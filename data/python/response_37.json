[{"tags": ["python", "selenium", "xpath", "element"], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 3, "last_activity_date": 1443085421, "last_edit_date": 1443085421, "creation_date": 1443052461, "answer_id": 32751282, "question_id": 32751250, "link": "https://stackoverflow.com/questions/32751250/selenium-python-2-7-how-to-find-element-that-only-has-a-title/32751282#32751282", "title": "Selenium/python 2.7 How to find element that only has a title?", "body": "<p>In Python, there is the <code>find_element_by_xpath()</code> shortcut method:</p>\n\n<pre><code>driver.find_element_by_xpath(\"//img[@title='']\")\n</code></pre>\n\n<p>Note that your locator does not look quite reliable. Providing the relevant HTML of the image and its parents might help us to provide you with a better option.</p>\n"}], "owner": {"reputation": 85, "user_id": 5318288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc741fed176e3f10bbef786050a8b049?s=128&d=identicon&r=PG&f=1", "display_name": "forgivennn", "link": "https://stackoverflow.com/users/5318288/forgivennn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1434, "favorite_count": 0, "accepted_answer_id": 32751282, "answer_count": 1, "score": 2, "last_activity_date": 1443085421, "creation_date": 1443052169, "last_edit_date": 1443052430, "question_id": 32751250, "link": "https://stackoverflow.com/questions/32751250/selenium-python-2-7-how-to-find-element-that-only-has-a-title", "title": "Selenium/python 2.7 How to find element that only has a title?", "body": "<p>im new to selenium and I am trying to click on an image but when I inspect the element it only has a title, an src=, and an alt=. I would like to use xpath but am unsure exactly how it works on python, on java i would do    <code>driver.findElement(By.xpath(\"//img[@title='']\"))</code> but I am unsure of how to do it on python any help is appreciated :)</p>\n"}, {"tags": ["python", "multithreading", "user-interface", "port", "maya"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5354479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LvUde.jpg?s=128&g=1", "display_name": "NightmaresInd", "link": "https://stackoverflow.com/users/5354479/nightmaresind"}, "edited": false, "score": 0, "creation_date": 1443295763, "post_id": 32791949, "comment_id": 53439507, "body": "Thanks a lot @theodox"}], "tags": [], "owner": {"reputation": 11342, "user_id": 1936075, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/keYz5.jpg?s=128&g=1", "display_name": "theodox", "link": "https://stackoverflow.com/users/1936075/theodox"}, "is_accepted": true, "score": 0, "last_activity_date": 1443223091, "last_edit_date": 1495539866, "creation_date": 1443223091, "answer_id": 32791949, "question_id": 32751234, "link": "https://stackoverflow.com/questions/32751234/python-function-call-not-runing-correcly-from-thread/32791949#32791949", "title": "Python function call not runing correcly from thread", "body": "<p>You can only run Maya ui commands from the main thread. You can use <a href=\"http://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2015/ENU/Maya/files/Python-Python-and-threading-htm.html\" rel=\"nofollow noreferrer\"><code>maya.util.ExcecuteDeferred()</code></a> to get around this to some degree but it takes extra work and won't be as responsive as a true multi-threaded app.  Longer explanation <a href=\"https://stackoverflow.com/questions/20106877/time-sleep-that-allows-parent-application-to-still-evaluate\">in this question</a></p>\n"}], "owner": {"reputation": 65, "user_id": 5354479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LvUde.jpg?s=128&g=1", "display_name": "NightmaresInd", "link": "https://stackoverflow.com/users/5354479/nightmaresind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32791949, "answer_count": 1, "score": 0, "last_activity_date": 1443223091, "creation_date": 1443051992, "question_id": 32751234, "link": "https://stackoverflow.com/questions/32751234/python-function-call-not-runing-correcly-from-thread", "title": "Python function call not runing correcly from thread", "body": "<p>I'm having some trouble getting this to work, i'm trying to append GUI texts to a window that allready exists, i'm using the python interpreter for autodesk maya, i attach here part of the host script where i check for multiple connections and try to add the text for each connection.</p>\n\n<p><strong>The problem</strong> comes when calling the <em>interpHostData()</em> function from inside the while loop inside the thread, it dosnt add anything to the window;</p>\n\n<p>But whenever i call the function by itself outside of a thread it works correctly.</p>\n\n<p>If anyone has a clue on how can i fix this i would apreciate it, thanks in advance.</p>\n\n<pre><code>def hostUpdate():\n    global socketHost\n    global clientL\n    clientL=[]\n    cmds.text('mt1',e=1,l='Update Process Started...')\n    while 1:\n        connectionMain,addressMain=socketHost.accept()\n        cmds.text('mt1',e=1,l='Connected with: %s'%str(addressMain))\n        #----------Different Thread for each connection\n        tid=thr.start_new_thread(hostRecieve,(connectionMain,addressMain))\n        clientL.append([connectionMain,addressMain,tid])\n        cmds.text('mt1',e=1,l='Thread started with: %s'%str(addressMain))\n\ndef hostRecieve(connI,addrI):\n    global clientL\n    cmds.text('mt1',e=1,l='Recieve Process Started...')\n    while 1: #------------------------------------Loop to keep listening for connections\n        try:\n            cmData=connI.recv(4096)\n            interpHostData(cmData) #--------------IF I CALL FROM HERE DOSN'T WORK\n        except:\n            for cl in clientL:\n                if connI==cl[0]:\n                    clientL.remove(cl)\n            cmds.text('mt1',e=1,l='Disconnected from %s'%str(addrI))\n            break\n\ndef interpHostData(cmDataC):\n    global cliLayout\n    tplD=cmDataC.split(',')\n    if tplD[0]=='0':\n        cID=tplD[2]\n        cmds.setParent(cliLayout)\n        cmds.text(cID+'_1',l=tplD[1])\n        cmds.text(cID+'_2',l=tplD[3])\n        cmds.text(cID+'_3',l=tplD[4])\n        cmds.text(cID+'_4',l='_')\n        cmds.text(cID+'_5',l='_')\n        cmds.text(cID+'_6',l='_')\n        cmds.text(cID+'_7',l='_')\n        cmds.text(cID+'_8',l='_')\n        cmds.columnLayout(cID+'_9')\n        cmds.progressBar(cID+'_10',h=10)\n        cmds.progressBar(cID+'_11',h=10)\n        cmds.setParent(cliLayout)\n        cmds.text(cID+'_12',l='_')\n        cmds.text(cID+'_13',l='Online')\n</code></pre>\n"}, {"tags": ["python", "pandas", "group-by", "aggregate"], "answers": [{"comments": [{"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 1, "creation_date": 1443053482, "post_id": 32751357, "comment_id": 53343398, "body": "thanks, can this be generalized? I have lots of columns of the form Y1961... so I generate a list like this: yrs = [&#39;Y&#39; + str(x) for x in range(1961, 2010 + 1, 1)]. Can your solution use &#39;yrs&#39; inside agg?"}, {"owner": {"reputation": 990, "user_id": 1563909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eac544cc95e988ba5f317c3bac442e3?s=128&d=identicon&r=PG", "display_name": "leroyJr", "link": "https://stackoverflow.com/users/1563909/leroyjr"}, "reply_to_user": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1443054087, "post_id": 32751357, "comment_id": 53343533, "body": "I really like this idea.  The trick is constructing this dict with the value being the numpy sum function.  Conversely though, if all you want to do is sum all of the remaining columns, your original-ish solution would work if all of the group by columns are included in the group by statement."}], "tags": [], "owner": {"reputation": 990, "user_id": 1563909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eac544cc95e988ba5f317c3bac442e3?s=128&d=identicon&r=PG", "display_name": "leroyJr", "link": "https://stackoverflow.com/users/1563909/leroyjr"}, "is_accepted": false, "score": 41, "last_activity_date": 1443053506, "last_edit_date": 1443053506, "creation_date": 1443053090, "answer_id": 32751357, "question_id": 32751229, "link": "https://stackoverflow.com/questions/32751229/pandas-sum-by-groupby-but-exclude-certain-columns/32751357#32751357", "title": "Pandas sum by groupby, but exclude certain columns", "body": "<p>The <code>agg</code> function will do this for you.  Pass the columns and function as a dict with column, output:</p>\n\n<pre><code>df.groupby(['Country', 'Item_Code']).agg({'Y1961': np.sum, 'Y1962': [np.sum, np.mean]})  # Added example for two output columns from a single input column\n</code></pre>\n\n<p>This will display only the group by columns, and the specified aggregate columns.  In this example I included two agg functions applied to 'Y1962'.</p>\n\n<p>To get exactly what you hoped to see, included the other columns in the group by, and apply sums to the Y variables in the frame:</p>\n\n<pre><code>df.groupby(['Code', 'Country', 'Item_Code', 'Item', 'Ele_Code', 'Unit']).agg({'Y1961': np.sum, 'Y1962': np.sum, 'Y1963': np.sum})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 6059273, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-uUsvxvv95VE/AAAAAAAAAAI/AAAAAAAAJq4/9_e_QsZwQQk/photo.jpg?sz=128", "display_name": "Sushant Kulkarni", "link": "https://stackoverflow.com/users/6059273/sushant-kulkarni"}, "edited": false, "score": 1, "creation_date": 1497310970, "post_id": 32751412, "comment_id": 76013509, "body": "How to include count of records for each country &amp; item code as another column?"}, {"owner": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "edited": false, "score": 0, "creation_date": 1518561385, "post_id": 32751412, "comment_id": 84555349, "body": "You could create a dummy column before grouping by that just contains 1. then sum will sum those up creating a count."}, {"owner": {"reputation": 179, "user_id": 5628367, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43GGprmmXeI/AAAAAAAAAAI/AAAAAAAAAAA/p0wYIVPlIrM/photo.jpg?sz=128", "display_name": "Roberto Stelling", "link": "https://stackoverflow.com/users/5628367/roberto-stelling"}, "edited": false, "score": 0, "creation_date": 1519053682, "post_id": 32751412, "comment_id": 84741937, "body": "If you just want to exclude a column or two, then you get all the columns names as in <code>listColumns = list(df.columns)</code> then you remove the columns you don&#39;t want, <code>listColumns.remove(&#39;Y1964&#39;)</code> and finally do your summation: <code>df.groupby([&#39;Country&#39;, &#39;Item_Code&#39;])[listColumns].sum()</code>"}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1541000040, "post_id": 32751412, "comment_id": 93070986, "body": "Thanks a lot. I can get the groupby to work, but not the selection part. The list of columns I put in are among the dataframe, but it keeps raising ValueError: <code>cannot reindex from a duplicate axis</code>"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1541004336, "post_id": 32751412, "comment_id": 93073637, "body": "@BowenLiu if you have multiple columns with the same name it&#39;ll show this error. In this case you&#39;ll have to use iloc to or loc to get the columns you want, I think you&#39;ll have to do that prior to the groupby."}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1541005871, "post_id": 32751412, "comment_id": 93074396, "body": "Thanks a lot, it is working now as I selected a smaller dataframe with manageable columns. I didn&#39;t know that it wouldn&#39;t work as long as there are columns with identical names. I thought as long as I don&#39;t select these columns, it will be fine. And I&#39;m wondering if you can help me with a question that arose for me in this process: why does <code>df.groupby({columns1])[columns2].sum()</code> return a dataframe whereas <code>df.groupby({columns1])[columns2].size()</code> will give me a data series as output? Thanks."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1541006044, "post_id": 32751412, "comment_id": 93074489, "body": "@BowenLiu I don&#39;t have a good answer for that one. Re the non-selection you might like to file a bug on github."}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1541006283, "post_id": 32751412, "comment_id": 93074608, "body": "Thanks, and by &quot;non-selection&quot; do you mean the first part of my comment? I will delete the columns with duplicate names and try it again and see if it&#39;s the problem. What shall be the best way to go about it? Can I change column name or delete column using <code>iloc</code> as specifying name doesn&#39;t work here. Thanks again"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1541012881, "post_id": 32751412, "comment_id": 93077703, "body": "@BowenLiu I mean you can slice out the columns you want <code>df.iloc[:, [0,1, 2, 3]].groupby(...)</code> where 0, 1, 2 are the columns you want to slice. Renaming so that you don&#39;t have an duplicates is also a solution"}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1544129079, "post_id": 32751412, "comment_id": 94177086, "body": "Thanks Andy. I used your code again today to work on a different project and it works like charm. But when I was playing around with your code, I found that <code>df.groupby([A, B, C)[[D, E, F]].sum()</code> seems to give the same result as <code>df.groupby([A, B, C)[D, E, F].sum()</code> . Could you tell me why you used two pair of brackets please? Thanks again."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1544139463, "post_id": 32751412, "comment_id": 94180911, "body": "@BowenLiu [[..]] is usually required to slice a subset of columns, that&#39;s the case with DataFrames BUT it <i>looks</i> like that&#39;s no longer necessary with a DataFrameGroupBy (you can now use either)."}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1544154023, "post_id": 32751412, "comment_id": 94183742, "body": "Thanks! I thought that probably has something to do with columns slicing."}], "tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": true, "score": 125, "last_activity_date": 1443053547, "creation_date": 1443053547, "answer_id": 32751412, "question_id": 32751229, "link": "https://stackoverflow.com/questions/32751229/pandas-sum-by-groupby-but-exclude-certain-columns/32751412#32751412", "title": "Pandas sum by groupby, but exclude certain columns", "body": "<p>You can select the columns of a groupby:</p>\n\n<pre><code>In [11]: df.groupby(['Country', 'Item_Code'])[[\"Y1961\", \"Y1962\", \"Y1963\"]].sum()\nOut[11]:\n                       Y1961  Y1962  Y1963\nCountry     Item_Code\nAfghanistan 15            10     20     30\n            25            10     20     30\nAngola      15            30     40     50\n            25            30     40     50\n</code></pre>\n\n<p><em>Note that the list passed must be a subset of the columns otherwise you'll see a KeyError.</em></p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 3212749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af9123207ae82fa4ce931b4f461f10d6?s=128&d=identicon&r=PG&f=1", "display_name": "Superstar", "link": "https://stackoverflow.com/users/3212749/superstar"}, "is_accepted": false, "score": 11, "last_activity_date": 1505522113, "last_edit_date": 1505522113, "creation_date": 1475965101, "answer_id": 39937937, "question_id": 32751229, "link": "https://stackoverflow.com/questions/32751229/pandas-sum-by-groupby-but-exclude-certain-columns/39937937#39937937", "title": "Pandas sum by groupby, but exclude certain columns", "body": "<p>If you are looking for a more generalized way to apply to many columns, what you can do is to build a list of column names and pass it as the index of the grouped dataframe. In your case, for example:</p>\n\n<pre><code>columns = ['Y'+str(i) for year in range(1967, 2011)]\n\ndf.groupby('Country')[columns].agg('sum')\n</code></pre>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172932, "favorite_count": 33, "accepted_answer_id": 32751412, "answer_count": 3, "score": 92, "last_activity_date": 1551581195, "creation_date": 1443051953, "last_edit_date": 1551581195, "question_id": 32751229, "link": "https://stackoverflow.com/questions/32751229/pandas-sum-by-groupby-but-exclude-certain-columns", "title": "Pandas sum by groupby, but exclude certain columns", "body": "<p>What is the best way to do a groupby on a Pandas dataframe, but exclude some columns from that groupby? e.g. I have the following dataframe:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Code   Country      Item_Code   Item    Ele_Code    Unit    Y1961    Y1962   Y1963\n2      Afghanistan  15          Wheat   5312        Ha      10       20      30\n2      Afghanistan  25          Maize   5312        Ha      10       20      30\n4      Angola       15          Wheat   7312        Ha      30       40      50\n4      Angola       25          Maize   7312        Ha      30       40      50\n</code></pre>\n\n<p>I want to groupby the column Country and Item_Code and only compute the sum of the rows falling under the columns Y1961, Y1962 and Y1963. The resulting dataframe should look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Code   Country      Item_Code   Item    Ele_Code    Unit    Y1961    Y1962   Y1963\n2      Afghanistan  15          C3      5312        Ha      20       40       60\n4      Angola       25          C4      7312        Ha      60       80      100\n</code></pre>\n\n<p>Right now I am doing this:</p>\n\n<pre><code>df.groupby('Country').sum()\n</code></pre>\n\n<p>However this adds up the values in the Item_Code column as well. Is there any way I can specify which columns to include in the <code>sum()</code> operation and which ones to exclude?</p>\n"}, {"tags": ["python", "json"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "edited": false, "score": 0, "creation_date": 1443052303, "post_id": 32751239, "comment_id": 53343093, "body": "Awesome, thanks!  What is the syntax for nested keys?  Some of the parameters are as many as 3 keys deep eg. [&#39;network&#39;][&#39;country&#39;][&#39;timezone&#39;]"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "reply_to_user": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "edited": false, "score": 2, "creation_date": 1443052428, "post_id": 32751239, "comment_id": 53343122, "body": "Are the intermediate dictionaries guaranteed to exist? If so, you can just use <code>get</code> at the last level (where the item might not exist). If the dictionaries on the way might not exist, you&#39;ll have to use <code>get</code> at every level, with an empty dictionary as the default: <code>data.get(&quot;network&quot;, {}).get(&quot;country&quot;, {}).get(&quot;timezone&quot;)</code>"}, {"owner": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "edited": false, "score": 0, "creation_date": 1443052676, "post_id": 32751239, "comment_id": 53343205, "body": "Perfect!  The intermediate dicts are not guaranteed to exist, so I&#39;ll use .get for each level.  Thank you very much!"}, {"owner": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "edited": false, "score": 0, "creation_date": 1443053549, "post_id": 32751239, "comment_id": 53343408, "body": "Hmm, it looks like this isn&#39;t actually working with nested dicts.  I&#39;m getting: <code>AttributeError: &#39;NoneType&#39; object has no attribute &#39;get&#39;</code> from the code  <code>self.data.get(&quot;network&quot;, {}).get(&quot;country&quot;, {}).get(&quot;timezone&quot;, {})</code>"}, {"owner": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "edited": false, "score": 0, "creation_date": 1443053785, "post_id": 32751239, "comment_id": 53343465, "body": "Looks like it is working only if the first key does exist and is not None.  In the case of this error, there is a &quot;network&quot; key but its value in the JSON is None.  Is there a way to handle this without try-except?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "reply_to_user": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "edited": false, "score": 1, "creation_date": 1443056452, "post_id": 32751239, "comment_id": 53344067, "body": "If your dictionary from JSON already has <code>None</code> values in it, than <code>get</code> won&#39;t let you pick a different default. You&#39;ll have to use <code>try</code>/<code>except</code> or other conditional logic (e.g. <code>if data[&quot;network&quot;] is None</code>...)."}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 2, "last_activity_date": 1443052027, "creation_date": 1443052027, "answer_id": 32751239, "question_id": 32751193, "link": "https://stackoverflow.com/questions/32751193/best-way-to-do-many-try-except-blocks-within-python-class-assignments/32751239#32751239", "title": "Best way to do many try-except blocks within Python class assignments?", "body": "<p>If you're going to set a default value to the attribute if it's not in the <code>data</code> dictionary, use <code>data.get('key')</code> rather than <code>data['key']</code>. The <code>get</code> method will return <code>None</code> if the key does not exist, rather than raising a <code>KeyError</code> exception. If you want a different default value than <code>None</code>, you can pass a second argument to <code>get</code> and that is what will be returned.</p>\n\n<p>So, your code could become:</p>\n\n<pre><code>class Show():\n  def __init__(self, data):\n    self.data = data\n    self.status = self.data.get('status')\n    self.rating = self.data.get('rating')\n    self.genres = self.data.get('genres')\n    self.weight = self.data.get('weight')\n    self.updated = self.data.get('updated')\n    self.name = self.data.get('name')\n    self.language = self.data.get('language')\n    self.schedule = self.data.get('schedule')\n    self.url = self.data.get('url')\n    self.image = self.data.get('image')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 1, "last_activity_date": 1443052031, "creation_date": 1443052031, "answer_id": 32751241, "question_id": 32751193, "link": "https://stackoverflow.com/questions/32751193/best-way-to-do-many-try-except-blocks-within-python-class-assignments/32751241#32751241", "title": "Best way to do many try-except blocks within Python class assignments?", "body": "<p>Use <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.get\" rel=\"nofollow\"><code>dict.get</code></a>, which provides a default value instead of raising an exception for missing keys.  </p>\n\n<p>For example, you can change this:</p>\n\n<pre><code>self.status = self.data['status']\n</code></pre>\n\n<p>into this:</p>\n\n<pre><code>self.status = self.data.get('status')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "edited": false, "score": 0, "creation_date": 1443056638, "post_id": 32751587, "comment_id": 53344100, "body": "Cool!  Never knew about <b>dict</b>.update().  Unfortunately I&#39;m not sure this works well for the nested values I want to expose, I would sill need to do an explicit assignment for things like data[&#39;network&#39;][&#39;country&#39;][&#39;name&#39;].  Maybe I need to come to terms with that and let the user dig deeper when they need to instead of trying to make EVERYTHING an object attribute."}], "tags": [], "owner": {"reputation": 867, "user_id": 2886693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6INn.jpg?s=128&g=1", "display_name": "Diogo Martins", "link": "https://stackoverflow.com/users/2886693/diogo-martins"}, "is_accepted": false, "score": 1, "last_activity_date": 1443055031, "creation_date": 1443055031, "answer_id": 32751587, "question_id": 32751193, "link": "https://stackoverflow.com/questions/32751193/best-way-to-do-many-try-except-blocks-within-python-class-assignments/32751587#32751587", "title": "Best way to do many try-except blocks within Python class assignments?", "body": "<p>You could change your code to something like:</p>\n\n<pre><code>class Show():\n    def __init__(self, data):\n        self.data = data\n        self.__dict__.update(data)\n\ndata = {'status': True, 'ratings': [1,2,3], 'foo': \"blahblah\"}\n\naShow = Show(data)\n\"\"\"\n&gt;&gt;&gt; aShow.status\nTrue\n&gt;&gt;&gt; aShow.ratings\n[1,2,3]\n&gt;&gt;&gt; aShow.something_not_in_dict\nAttributeError: Show instance has no attribute 'something_not_in_dict'\n\"\"\"\n</code></pre>\n\n<p>Which does exactly the same, and trying to access something from your <code>Show</code> instance that isn't a key in your <code>data</code> dictionary would raise an <code>AttributeError</code></p>\n"}], "owner": {"reputation": 187, "user_id": 5109467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-emJTwUCcO5Q/AAAAAAAAAAI/AAAAAAAAHP0/din_aiUH6W4/photo.jpg?sz=128", "display_name": "Spencer", "link": "https://stackoverflow.com/users/5109467/spencer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 32751239, "answer_count": 3, "score": 0, "last_activity_date": 1443055031, "creation_date": 1443051745, "last_edit_date": 1443054399, "question_id": 32751193, "link": "https://stackoverflow.com/questions/32751193/best-way-to-do-many-try-except-blocks-within-python-class-assignments", "title": "Best way to do many try-except blocks within Python class assignments?", "body": "<p>I have a class which is pulling JSON data with keys, but the problem is that per instance of this class, the JSON data may not have keys for everything I am trying to grab.  Currently, my class is set up like this:</p>\n\n<pre><code>class Show():\n    def __init__(self, data):\n        self.data = data\n        self.status = self.data['status']\n        self.rating = self.data['rating']\n        self.genres = self.data['genres']\n        self.weight = self.data['weight']\n        self.updated = self.data['updated']\n        self.name = self.data['name']\n        self.language = self.data['language']\n        self.schedule = self.data['schedule']\n        self.url = self.data['url']\n        self.image = self.data['image']\n</code></pre>\n\n<p>And so on, there are more parameters than that.  I'm trying to avoid the messiness of having a try-except block for EACH AND EVERY one of those (27) lines.  Is there a better way?  Ultimately, I want a parameter to be assigned <code>None</code> if the JSON key doesn't exist.</p>\n"}, {"tags": ["python", "graphics", "2d", "collision-detection"], "comments": [{"owner": {"reputation": 1100, "user_id": 5062825, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kpYOw.jpg?s=128&g=1", "display_name": "RamanSB", "link": "https://stackoverflow.com/users/5062825/ramansb"}, "edited": false, "score": 0, "creation_date": 1443051690, "post_id": 32751130, "comment_id": 53342942, "body": "if (bound1.x  0 &amp; bound1.y  bound3.y)): You&#39;re missing something right? A few of your if statements are like this"}, {"owner": {"reputation": 27, "user_id": 4522468, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0zqwhhvcF8s/AAAAAAAAAAI/AAAAAAAAAEg/PVMMZxnAcp0/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4522468/kyle"}, "reply_to_user": {"reputation": 1100, "user_id": 5062825, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kpYOw.jpg?s=128&g=1", "display_name": "RamanSB", "link": "https://stackoverflow.com/users/5062825/ramansb"}, "edited": false, "score": 0, "creation_date": 1443058043, "post_id": 32751130, "comment_id": 53344383, "body": "I do believe it is the If&#39;s. Updated the code because for whatever reason not all my code was there."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4522468, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0zqwhhvcF8s/AAAAAAAAAAI/AAAAAAAAAEg/PVMMZxnAcp0/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4522468/kyle"}, "edited": false, "score": 0, "creation_date": 1443101447, "post_id": 32751515, "comment_id": 53364478, "body": "It was in the if statements.. I changed &amp; to &#39;and&#39; and | to &#39;or&#39; and its works great now."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1443054410, "creation_date": 1443054410, "answer_id": 32751515, "question_id": 32751130, "link": "https://stackoverflow.com/questions/32751130/python-2d-ball-collision/32751515#32751515", "title": "Python 2d Ball Collision", "body": "<p>Fix your \"if\" statements to be legal and straightforward.  I think that you might be trying to say something like what's below.  It's hard to tell, since you haven't documented your code.</p>\n\n<pre><code>if cir2.vecti2 &gt; 0 and bound3.y &gt; bound1.y:\n    cir2.vecti2 = -cir2.vecti2\n</code></pre>\n\n<p>Note that bound3 has no value.  You will find other problems, I'm sure.</p>\n\n<p>I suggest that you back up and try incremental coding.  First, try getting one ball to move around legally, bouncing off walls.  Put in tracing print statements for the position, and label them so you know where you are in your code.</p>\n\n<p>Once you have that working, then add the second ball.  Continue with the print statements, commenting out the ones you don't think you need any more.  Don't delete them until you have the whole program working.</p>\n\n<p>Does this get you going?</p>\n"}], "owner": {"reputation": 27, "user_id": 4522468, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0zqwhhvcF8s/AAAAAAAAAAI/AAAAAAAAAEg/PVMMZxnAcp0/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4522468/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 2, "accepted_answer_id": 32751515, "answer_count": 1, "score": 1, "last_activity_date": 1443057959, "creation_date": 1443051247, "last_edit_date": 1443057959, "question_id": 32751130, "link": "https://stackoverflow.com/questions/32751130/python-2d-ball-collision", "title": "Python 2d Ball Collision", "body": "<p>Here is what I have mustered up:</p>\n\n<p><pre><code>from graphics import *\nfrom random import *\nfrom math import *</p>\n\n<p>class Ball(Circle):\n    def <strong>init</strong>(self, win_width, win_high, point, r, vel1, vel2):\n        Circle.<strong>init</strong>(self, point, r)</p>\n\n<pre><code>    self.width = win_width\n    self.high = win_high\n\n    self.vecti1 = vel1\n    self.vecti2 = vel2\n\n\ndef collide_wall(self):\n    bound1 = self.getP1()\n    bound2 = self.getP2()\n\n    if (bound2.y &gt;= self.width):            \n        self.vecti2 = -self.vecti2\n        self.move(0, -1)\n    if (bound2.x &gt;= self.high):\n        self.vecti1 = -self.vecti1\n        self.move(-1, 0)\n    if (bound1.x &lt;= 0):\n        self.vecti1 = -self.vecti1\n        self.move(1, 0)\n    if (bound2.y &lt;= 0):            \n        self.vecti2 = -self.vecti2\n        self.move(0, 1)\n\ndef ball_collision(self, cir2):\n    radius = self.getRadius()\n    radius2 = cir2.getRadius()\n\n    bound1 = self.getP1()      \n    bound3 = cir2.getP1()\n\n\n    center1 = Point(radius + bound1.x,radius + bound1.y)\n    center2 = Point(radius2 + bound3.x,radius2 + bound3.y)\n\n    centerx = center2.getX() - center1.getX()\n    centery = center2.getY() - center1.getY()\n\n    distance = sqrt((centerx * centerx) + (centery * centery))\n\n    if (distance &lt;= (radius + radius2)):\n        xdistance = abs(center1.getX() - center2.getX())\n        ydistance = abs(center1.getY() - center2.getY())\n\n        if (xdistance &lt;= ydistance):\n            if ((self.vecti2 &gt; 0 &amp; bound1.y &lt; bound3.y) | (self.vecti2 &lt; 0 &amp; bound1.y &gt; bound3.y)):\n                self.vecti2 = -self.vecti2\n\n\n            if ((cir2.vecti2 &gt; 0 &amp; bound3.y &lt; bound1.y) | (cir2.vecti2 &lt; 0 &amp; bound3.y &gt; bound1.y)):\n                cir2.vecti2 = -cir2.vecti2\n\n\n\n        elif (xdistance &gt; ydistance):\n            if ((self.vecti1 &gt; 0 &amp; bound1.x &lt; bound3.x) | (self.vecti1 &lt; 0 &amp; bound1.x &gt; bound3.x)):\n                self.vecti1 = -self.vecti1\n\n            if ((cir2.vecti1 &gt; 0 &amp; bound3.x &lt; bound1.x) | (cir2.vecti1 &lt; 0 &amp; bound3.x &gt; bound1.x)):\n                cir2.vecti1 = -cir2.vecti1\n</code></pre>\n\n<p>def main():\n    win = GraphWin(\"Ball screensaver\", 700,700)</p>\n\n<pre><code>velo1 = 4\nvelo2 = 3\nvelo3 = -4\nvelo4 = -3\n\ncir1 = Ball(win.getWidth(),win.getHeight(),Point(50,50), 20, velo1, velo2)\n\ncir1.setOutline(\"red\")\ncir1.setFill(\"red\")\ncir1.draw(win)\n\ncir2 = Ball(win.getWidth(),win.getHeight(),Point(200,200), 20, velo3, velo4)\ncir2.setOutline(\"blue\")\ncir2.setFill(\"blue\")\ncir2.draw(win)\n\n\nwhile(True):\n    cir1.move(cir1.vecti1, cir1.vecti2)\n    cir2.move(cir2.vecti1, cir2.vecti2)\n    time.sleep(.010)\n    cir1.collide_wall()\n    cir2.collide_wall()\n\n    cir1.ball_collision(cir2)\n    #cir2.ball_collision(cir1)\n</code></pre>\n\n<p>main()</p>\n\n<p></pre></code></p>\n\n<p>Ok so here is the problem. This Math is not working correctly at all. Sometimes it works perfectly sometimes one ball overpowers the other ball or they don't react like a ball collision should. I am racking my brain trying to figure out what the problem is but I feel I am too close to the project at the moment to see it. Any help would be appreciated.</p>\n"}, {"tags": ["python", "string", "variables", "printing", "integer"], "comments": [{"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1443051472, "post_id": 32751104, "comment_id": 53342885, "body": "remove () , otherwise you are dealing with tuples"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5369879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gJRwVG2dCKo/AAAAAAAAAAI/AAAAAAAAADY/M6NAeM5eVV0/photo.jpg?sz=128", "display_name": "user5369879", "link": "https://stackoverflow.com/users/5369879/user5369879"}, "edited": false, "score": 0, "creation_date": 1443052101, "post_id": 32751141, "comment_id": 53343051, "body": "Thank you, you&#39;ve helped a lot."}], "tags": [], "owner": {"reputation": 18468, "user_id": 5299236, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KtXnq.jpg?s=128&g=1", "display_name": "Casimir Crystal", "link": "https://stackoverflow.com/users/5299236/casimir-crystal"}, "is_accepted": true, "score": 0, "last_activity_date": 1443051337, "creation_date": 1443051337, "answer_id": 32751141, "question_id": 32751104, "link": "https://stackoverflow.com/questions/32751104/how-to-multiply-a-string-by-a-variable-integer-in-python/32751141#32751141", "title": "How to multiply a string by a variable integer in python", "body": "<p>However I understand what are you doing, do you want the code like this? </p>\n\n<pre><code>gapVal = \" \"\n\ngapSp=int(input(\"Please enter a the amount of spaces between the stars\"))\ngapSp2 = gapSp - 2\ngapSp3 = gapSp2 - 2\n\nprint(\"*\", gapSp * gapVal,\n      \"*\", gapSp2 * gapVal,\n      \"*\", gapSp3 * gapVal, \"*\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5369879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gJRwVG2dCKo/AAAAAAAAAAI/AAAAAAAAADY/M6NAeM5eVV0/photo.jpg?sz=128", "display_name": "user5369879", "link": "https://stackoverflow.com/users/5369879/user5369879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 0, "accepted_answer_id": 32751141, "answer_count": 1, "score": 0, "last_activity_date": 1443051337, "creation_date": 1443051101, "question_id": 32751104, "link": "https://stackoverflow.com/questions/32751104/how-to-multiply-a-string-by-a-variable-integer-in-python", "title": "How to multiply a string by a variable integer in python", "body": "<p>I'm having trouble multiplying a string by a variable that is a integer. Integer is in as variable form because it is an input that is entered by the user. However I cannot get the them to multiply together so I can print them. The program complies and runs but encounters a syntax error when it encounters the code where they're multiplied together.</p>\n\n<pre><code>gapVal=(\" \")\n\ngapSp=int(input(\"Please enter a the amount of spaces between the stars\"))\ngapSp2=(gapSp)-2\ngapSp3=(gapSp2)-2\n\nprint(\"*\", gapSp, \"*\", gapSp2, \"*\", gapSp3, \"*\")\n</code></pre>\n"}, {"tags": ["python", "aggregation"], "comments": [{"owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "edited": false, "score": 0, "creation_date": 1443052284, "post_id": 32751085, "comment_id": 53343090, "body": "It&#39;s not clear how you went from that df to that output."}, {"owner": {"reputation": 55, "user_id": 2541381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8dd884286d5ce2a852f9e50b380a5d?s=128&d=identicon&r=PG", "display_name": "Amrit", "link": "https://stackoverflow.com/users/2541381/amrit"}, "reply_to_user": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "edited": false, "score": 0, "creation_date": 1443057873, "post_id": 32751085, "comment_id": 53344348, "body": "I would like to cont the unique values of B and C group by A. Sorry if I was not clear."}], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": false, "score": 0, "last_activity_date": 1486298398, "creation_date": 1486298398, "answer_id": 42052164, "question_id": 32751085, "link": "https://stackoverflow.com/questions/32751085/getting-unique-counts-for-selected-columns-in-dataframe-with-groupby-using-pytho/42052164#42052164", "title": "Getting unique counts for selected columns in dataframe with groupby using Python", "body": "<p>Per <a href=\"http://pandas.pydata.org/pandas-docs/stable/api.html#id35\" rel=\"nofollow noreferrer\">the docs</a>,\nSeriesGroupBy objects have a nunique method. Therefore, you can aggregate <code>gb_a</code> using </p>\n\n<pre><code>gb_a.agg({'B': 'nunique', 'C': 'nunique'})\n</code></pre>\n\n<hr>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'A': ['a', 'a', 'b', 'c'], 'B': ['x', 'x', 'x', 'x'], 'C': [\n                  '1', '2', '3', '4'], 'D': [0, 0, 0, 0]})\ngb_a = df.groupby(['A'], as_index=False)\nresult = gb_a.agg({'B': 'nunique', 'C': 'nunique'})\nresult = result.rename(columns={'B':'unique_b', 'C':'unique_c'})\nprint(result)\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>   A  unique_c  unique_b\n0  a         2         1\n1  b         1         1\n2  c         1         1\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2541381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8dd884286d5ce2a852f9e50b380a5d?s=128&d=identicon&r=PG", "display_name": "Amrit", "link": "https://stackoverflow.com/users/2541381/amrit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486298398, "creation_date": 1443050969, "last_edit_date": 1495541343, "question_id": 32751085, "link": "https://stackoverflow.com/questions/32751085/getting-unique-counts-for-selected-columns-in-dataframe-with-groupby-using-pytho", "title": "Getting unique counts for selected columns in dataframe with groupby using Python", "body": "<p><strong>My dataframe is as follows:</strong></p>\n\n<pre><code>import pandas as pd\n\ndf=pd.DataFrame({'A':['a','a','b','c'], 'B':['x','x','x','x'],'C':['1','2','3','4'], 'D':[0,0,0,0]})\ngb_a=df.groupby(['A'], as_index=False)\n</code></pre>\n\n<p><strong>My desired output:</strong></p>\n\n<pre><code>A    unique_b    unique_c\na       1          2\nb       1          1\nc       1          1\n</code></pre>\n\n<p><strong>I have tried the following:</strong></p>\n\n<pre><code>gb_a['B','C'].agg({'B':pd.Series.nunique, 'C':pd.Series.nunique})\ngb_a['B','C'].agg({'unique_b':pd.Series.nunique, 'unique_c':pd.Series.nunique})\ngb_a['B','C'].agg({'B': {'unique_b':pd.Series.nunique}, 'C': {'unique_c':pd.Series.nunique}})\n</code></pre>\n\n<p><strong>Error I am getting:</strong></p>\n\n<pre><code>KeyError: ('B', 'C')\n</code></pre>\n\n<p><strong>Questions</strong></p>\n\n<p>Is it possible to fix it in above technique?</p>\n\n<p>I know I can do it individually and then merging as follows: </p>\n\n<pre><code>out_df=gb_a['B'].agg({'unique_b':pd.Series.nunique})\nout_df= pd.merge(out_df,gb_a['C'].agg({'unique_c':pd.Series.nunique}), on='A', how='inner')\n</code></pre>\n\n<p>But I am supposed to do different  aggregation on selected columns (a lot of columns). Do not want to merge that many times on a large data.</p>\n\n<p>I am using Python 2.7</p>\n\n<p>Thanks.</p>\n\n<p>p.s. I have read different answers on similar topic. e.g. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/19078325/naming-returned-columns-in-pandas-aggregate-function\">Naming returned columns in Pandas aggregate function?</a></p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": false, "score": 0, "last_activity_date": 1443055799, "creation_date": 1443055799, "answer_id": 32751694, "question_id": 32751077, "link": "https://stackoverflow.com/questions/32751077/splitting-moving-cell-in-pandas/32751694#32751694", "title": "Splitting &amp; Moving cell in Pandas", "body": "<p>You can use the <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.strings.StringMethods.extract.html\" rel=\"nofollow\"><code>str.extract</code></a> method to extract the year:</p>\n\n<pre><code>In [11]: df[\"release_date\"].str.extract(\"(\\d{4})\")\nOut[11]:\n0    2006\n1    2014\n2    2015\n3    2015\nName: \"release_date\", dtype: object\n</code></pre>\n\n<hr>\n\n<p>If you wanted to split the DataFrame you can also look <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.strings.StringMethods.match.html\" rel=\"nofollow\"><code>.str.match</code></a>, to check whether a column matches a regex:</p>\n\n<pre><code>In [12]: df[\"release_date\"].str.match(\"Released \\d{4}\")\nOut[12]:\n0     True\n1    False\n2    False\n3    False\nName: \"release_date\", dtype: bool\n</code></pre>\n\n<p>and index the df with this and ~this.</p>\n"}], "owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443055799, "creation_date": 1443050892, "question_id": 32751077, "link": "https://stackoverflow.com/questions/32751077/splitting-moving-cell-in-pandas", "title": "Splitting &amp; Moving cell in Pandas", "body": "<p>I have a slight problem with my pandas DataFrame. </p>\n\n<p>As the image shows, the first row has <code>released_date</code> as \"Released 2006\" while all other values for the same column have the format \"Released MMM DD\". </p>\n\n<p>I would like to split the first cell under <code>released_date</code> to \"Released\" and \"2006\", copy \"2006\" to year column and subsequently move everything by one column. Any ideas?  </p>\n\n<p>Current Format: </p>\n\n<pre><code>...|**released_date**| **year** | **genre**  | ...\n...| Released   2006 | Arcade   |    Comic   |...\n</code></pre>\n\n<p>Desired output format:</p>\n\n<pre><code>...|**released_date**| **year** | **genre**  | ...\n...|    Released     |     2006 |     Arcade |...\n</code></pre>\n\n<p>Thanks in advance!!</p>\n\n<p><a href=\"https://i.stack.imgur.com/gDkfg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gDkfg.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's the code to read the file in:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv(\"IndieGameCSV/page_1.csv\", \\\n    names=[\"Windows\",\"Mac\",\"Linux\",\"engine\",\"release_date\",\"year\",\"genre1\",\\\n           \"theme\",\"players\",\"score_final\",\"rating\", \"link\" ], index_col=False)\n</code></pre>\n\n<p>and here is the data as seen in the image:</p>\n\n<pre><code>True, False, True,Custom Built,Released 2006,Arcade,Comic,Single Player,                     10,1 v, http://indiedb.com/games/tux-climber,\nTrue, True, True,Custom Built,Released Oct 20, 2014,Role Playing,Fantasy,MMO,                     7.3,45 , http://indiedb.com/games/pokemon-planet,\nTrue, True, True,Ren'py,Released May 16, 2015,Turn Based Strategy,Noire,Single Player,                     9,1 v, http://indiedb.com/games/black-closet,\nTrue, True, False,ShiVa3D,Released Jan 2, 2015,First Person Shooter,Sci-Fi,Single Player,                     7.8,4 v, http://indiedb.com/games/kumoon,\n</code></pre>\n"}, {"tags": ["python", "haskell", "numpy"], "comments": [{"owner": {"reputation": 23444, "user_id": 414413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6de2113f01432aa844dc85070ff33e89?s=128&d=identicon&r=PG", "display_name": "Cirdec", "link": "https://stackoverflow.com/users/414413/cirdec"}, "edited": false, "score": 0, "creation_date": 1443052319, "post_id": 32751054, "comment_id": 53343096, "body": "Are you sure that in <code>feedforward</code> <code>a</code> should have type <code>Float</code>? Shouldn&#39;t the input to the network be a vector like <code>[Float]</code>, or does the network always have only one input? If the network has more than one input, each neuron should have a vector of weights <code>[Float]</code>, a layer would be multiple neurons <code>[[Float]]</code> and the entire multiple layer network would be multiple layers <code>[[[Float]]]</code>."}, {"owner": {"reputation": 1220, "user_id": 2124732, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cf9d2998c0d9cb26334028f72185fe38?s=128&d=identicon&r=PG", "display_name": "Christopher Dumas", "link": "https://stackoverflow.com/users/2124732/christopher-dumas"}, "reply_to_user": {"reputation": 23444, "user_id": 414413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6de2113f01432aa844dc85070ff33e89?s=128&d=identicon&r=PG", "display_name": "Cirdec", "link": "https://stackoverflow.com/users/414413/cirdec"}, "edited": false, "score": 0, "creation_date": 1443052748, "post_id": 32751054, "comment_id": 53343216, "body": "Yeah, I just came to that (or a similar) conciliation just now. I&#39;m really messing with stuff I don&#39;t understand very well here, though. Thanks!"}, {"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 2, "creation_date": 1443055429, "post_id": 32751054, "comment_id": 53343854, "body": "You could write unit tests for both programs and compare the results."}, {"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 0, "creation_date": 1443058711, "post_id": 32751054, "comment_id": 53344529, "body": "You might interested in this simple <a href=\"http://iamtrask.github.io/2015/07/12/basic-python-network/\" rel=\"nofollow noreferrer\">Python implementation</a> and this <a href=\"https://gist.github.com/gatlin/e81b8c572b2f284f1423\" rel=\"nofollow noreferrer\">Haskell version</a>"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 2, "creation_date": 1443072251, "post_id": 32751054, "comment_id": 53347878, "body": "Well, there is an obvious difference. <code>np.random.randn</code> isn&#39;t a pure function while your <code>rands</code> is. If you want to generate random numbers in Haskell you&#39;d have to use <a href=\"https://hackage.haskell.org/package/random-1.1/docs/System-Random.html\" rel=\"nofollow noreferrer\"><code>System.Random</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": true, "score": 1, "last_activity_date": 1443109485, "last_edit_date": 1443109485, "creation_date": 1443089147, "answer_id": 32758622, "question_id": 32751054, "link": "https://stackoverflow.com/questions/32751054/is-this-haskell-code-equivalent-to-this-python-code/32758622#32758622", "title": "Is this Haskell code equivalent to this Python code?", "body": "\n\n<p>First of all: note that the Python version lacks the equivalent of <code>deriving (Show, Eq, Ord)</code> \u2014 try implementing the corresponding <code>__magic__</code> methods and see how many lines of code are added. Without these, <code>==</code>, <code>&lt;=</code>, <code>&gt;</code>, as well as <code>print Network()</code> make little to no sense.</p>\n\n<p>Basically the verbosity mainly comes from the type signatures. Also, you can move <code>rands</code> to a <code>where</code> block under <code>buildNetwork</code> and simply completely get rid of <code>toFloat</code> by replacing any calls to <code>toFloat</code> with <code>fromIntegral</code> with no type annotation. Plus perhaps some other tiny refactorings.</p>\n\n<p>In general, you can expect, in some situations, for some things to be somewhat more verbose in languages that are generally much more concise. I'm sure as your neural network program progresses towards a more substantial code base, Haskell will be less verbose than Python, ignoring the possible existence of neural network libraries for Python that might be more mature than their (possibly non-existent) Haskell counterparts.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data NNetwork = NNetwork { nlayers :: Int\n                         , sizes   :: [Int]\n                         , biases  :: [[Float]]\n                         , weights :: [[Float]] }\n                deriving (Show, Ord, Eq)\n\nbuildNetwork sizes =\n  NNetwork { nlayers = length sizes\n           , sizes   = sizes\n           , biases  = map (\\y -&gt; replicate y (sig . fromIntegral . rands $ y)) sizes\n           , weights = map (\\y -&gt; replicate y (fromIntegral . rands $ y)) sizes }\n  where rands x = (7 * x) `mod` 11\n\nfeedforward net a = map (equation a) (zip (weights net) (biases net))\n\nsig a = 1 / (1 + exp (-a))\n\nequation a (w, b) = map sig $ zipWith (+) (dot w rep) b\n  where dot = zipWith (*)\n        rep = replicate (length w) a\n</code></pre>\n\n<p>and well you can do some micro-refactorings in the <code>buildNetwork</code> to remove some minor duplication but that would just shorten the lines, and would possibly make the code less readable to a domain expert:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>buildNetwork sizes =\n  NNetwork { nlayers = length sizes\n           , sizes   = sizes\n           , biases  = nameMe sig\n           , weights = nameMe id }\n  where nameMe fn = map (replicate y (fn y')) sizes\n        y'        = fromIntegral $ y * 7 `mod` 11\n</code></pre>\n"}], "owner": {"reputation": 1220, "user_id": 2124732, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cf9d2998c0d9cb26334028f72185fe38?s=128&d=identicon&r=PG", "display_name": "Christopher Dumas", "link": "https://stackoverflow.com/users/2124732/christopher-dumas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 32758622, "answer_count": 1, "score": 2, "last_activity_date": 1443109485, "creation_date": 1443050733, "question_id": 32751054, "link": "https://stackoverflow.com/questions/32751054/is-this-haskell-code-equivalent-to-this-python-code", "title": "Is this Haskell code equivalent to this Python code?", "body": "<p>I'm trying to port a Python program to Haskell, and I'm fairly new to NumPy (which the Python program uses) So I'm wondering why this code isn't equivalent.\nHere's my Haskell code:</p>\n\n<pre><code>data NNetwork = NNetwork { nlayers :: Int\n                         , sizes   :: [Int]\n                         , biases  :: [[Float]]\n                         , weights :: [[Float]] }\n                deriving (Show, Ord, Eq)\n\nbuildNetwork :: [Int] -&gt; NNetwork\nbuildNetwork sizes = NNetwork { nlayers = length sizes\n                              , sizes   = sizes\n                              , biases  = map (\\y -&gt; replicate y (sig . toFloat . rands $ y)) sizes\n                              , weights = map (\\y -&gt; replicate y (toFloat $ rands y)) sizes }\nfeedforward :: NNetwork -&gt; Float -&gt; [[Float]]\nfeedforward net a = map (equation a) (zip (weights net) (biases net))\n\ntoFloat x = fromIntegral x :: Float\n\nsig :: Float -&gt; Float\nsig a = 1 / (1 + exp (-a))\n\nrands :: Int -&gt; Int\nrands x = (7 * x) `mod` 11\n\nequation :: Float -&gt; ([Float], [Float]) -&gt; [Float]\nequation a (w, b) = map sig $ zipWith (+) (dot w (rep w a)) b\n  where dot = zipWith (*)\n        rep a b = replicate (length a) b\n</code></pre>\n\n<p>And the original Python code:</p>\n\n<pre><code>class Network(object):\n\n    def __init__(self, sizes):\n        self.num_layers = len(sizes)\n        self.sizes = sizes\n        self.biases = [np.random.randn(y, 1) for y in sizes[1:]]\n        self.weights = [np.random.randn(y, x) \n                        for x, y in zip(sizes[:-1], sizes[1:])]\n\ndef sigmoid(z):\n    return 1.0/(1.0+np.exp(-z))\n\ndef feedforward(self, a):\n        \"\"\"Return the output of the network if \"a\" is input.\"\"\"\n        for b, w in zip(self.biases, self.weights):\n            a = sigmoid(np.dot(w, a)+b)\n        return a\n</code></pre>\n\n<p>I'm trying to port a very simple neural network program from Python to Haskell, because I enjoy Haskell much more. I'm also worried that I'm doing something wrong, because the Haskell code is far more verbose.</p>\n\n<p>- Thanks!</p>\n"}, {"tags": ["python", "memory", "pandas", "merge", "out-of-memory"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1443050782, "post_id": 32750970, "comment_id": 53342711, "body": "check the shape of each data frame before and after the merge"}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "edited": false, "score": 3, "creation_date": 1443050807, "post_id": 32750970, "comment_id": 53342718, "body": "I encountered this behavior when duplicates are present in the <code>on</code> key column. When I removed the duplicates everything worked fine. You can look at the DataFrame shape to check if you are getting any unexpected results."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1443054030, "post_id": 32750970, "comment_id": 53343515, "body": "One thing that may help is to put the creation of the DataFrames in functions, that way the strings and zipfiles can be closed and garbage collected (rather than sitting in memory). One question is how big do you expect the final merge to be? If you have a n row merging with an m row it can be n*m rows, which could be VERY big here."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1443056395, "post_id": 32750970, "comment_id": 53344056, "body": "Also the DataFrame is 200 million rows!!!! My machine suggests I&#39;m already around 2.5Gb just reading that."}, {"owner": {"reputation": 307, "user_id": 3521354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb941bba28f2f1829ae50749480c5953?s=128&d=identicon&r=PG&f=1", "display_name": "pefmath", "link": "https://stackoverflow.com/users/3521354/pefmath"}, "edited": false, "score": 0, "creation_date": 1443108620, "post_id": 32750970, "comment_id": 53369656, "body": "@ Alexander:  using .size() ?  @ yakym: can you give an example of that?  @ Andy:  200 million rows is big, but isn&#39;t that the point of panda&#39;s?   Better handling data and &#39;big data.&#39;  I like the merging within a function idea.  Gotta collect more memory tricks like this."}], "answers": [{"tags": [], "owner": {"reputation": 1985, "user_id": 2452553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b349351aa7cff8ed699551ef82f5fb45?s=128&d=identicon&r=PG", "display_name": "mplf", "link": "https://stackoverflow.com/users/2452553/mplf"}, "is_accepted": false, "score": 3, "last_activity_date": 1483703167, "creation_date": 1483703167, "answer_id": 41505031, "question_id": 32750970, "link": "https://stackoverflow.com/questions/32750970/python-pandas-merge-causing-memory-overflow/41505031#41505031", "title": "Python Pandas Merge Causing Memory Overflow", "body": "<p>Although this is an old question, I recently came across the same problem.</p>\n\n<p>In my instance, duplicate keys are required in both dataframes, and I needed a method which could tell if a merge will fit into memory ahead of computation, and if not, change the computation method.</p>\n\n<p>The method I came up with is as follows:</p>\n\n<h2>Calculate merge size:</h2>\n\n<pre><code>def merge_size(left_frame, right_frame, group_by, how='inner'):\n    left_groups = left_frame.groupby(group_by).size()\n    right_groups = right_frame.groupby(group_by).size()\n    left_keys = set(left_groups.index)\n    right_keys = set(right_groups.index)\n    intersection = right_keys &amp; left_keys\n    left_diff = left_keys - intersection\n    right_diff = right_keys - intersection\n\n    left_nan = len(left_frame[left_frame[group_by] != left_frame[group_by]])\n    right_nan = len(right_frame[right_frame[group_by] != right_frame[group_by]])\n    left_nan = 1 if left_nan == 0 and right_nan != 0 else left_nan\n    right_nan = 1 if right_nan == 0 and left_nan != 0 else right_nan\n\n    sizes = [(left_groups[group_name] * right_groups[group_name]) for group_name in intersection]\n    sizes += [left_nan * right_nan]\n\n    left_size = [left_groups[group_name] for group_name in left_diff]\n    right_size = [right_groups[group_name] for group_name in right_diff]\n    if how == 'inner':\n        return sum(sizes)\n    elif how == 'left':\n        return sum(sizes + left_size)\n    elif how == 'right':\n        return sum(sizes + right_size)\n    return sum(sizes + left_size + right_size)\n</code></pre>\n\n<h2>Note:</h2>\n\n<p>At present with this method, the key can only be a label, not a list. Using a list for <code>group_by</code> currently returns a sum of merge sizes for each label in the list. This will result in a merge size far larger than the actual merge size.</p>\n\n<p>If you are using a list of labels for the group_by, the final row size is:</p>\n\n<pre><code>min([merge_size(df1, df2, label, how) for label in group_by])\n</code></pre>\n\n<h2>Check if this fits in memory</h2>\n\n<p>The <code>merge_size</code> function defined here returns the number of rows which will be created by merging two dataframes together.</p>\n\n<p>By multiplying this with the count of columns from both dataframes, then multiplying by the size of np.float[32/64], you can get a rough idea of how large the resulting dataframe will be in memory. This can then be compared against <a href=\"http://pythonhosted.org/psutil/#memory\" rel=\"nofollow noreferrer\"><code>psutil.virtual_memory().available</code></a> to see if your system can calculate the full merge.</p>\n\n<pre><code>def mem_fit(df1, df2, key, how='inner'):\n    rows = merge_size(df1, df2, key, how)\n    cols = len(df1.columns) + (len(df2.columns) - 1)\n    required_memory = (rows * cols) * np.dtype(np.float64).itemsize\n\n    return required_memory &lt;= psutil.virtual_memory().available\n</code></pre>\n\n<p>The <code>merge_size</code> method has been proposed as an extension of <code>pandas</code> in this issue. <a href=\"https://github.com/pandas-dev/pandas/issues/15068\" rel=\"nofollow noreferrer\">https://github.com/pandas-dev/pandas/issues/15068</a>.</p>\n"}], "owner": {"reputation": 307, "user_id": 3521354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb941bba28f2f1829ae50749480c5953?s=128&d=identicon&r=PG&f=1", "display_name": "pefmath", "link": "https://stackoverflow.com/users/3521354/pefmath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8669, "favorite_count": 1, "answer_count": 1, "score": 11, "last_activity_date": 1483703167, "creation_date": 1443050045, "question_id": 32750970, "link": "https://stackoverflow.com/questions/32750970/python-pandas-merge-causing-memory-overflow", "title": "Python Pandas Merge Causing Memory Overflow", "body": "<p>I'm new to Pandas and am trying to merge a few subsets of data.  I'm giving a specific case where this happens, but the question is general:  How/why is it happening and how can I work around it?</p>\n\n<p><strong>The data I load is around 85 Megs or so but I often watch my python session run up close to 10 gigs of memory usage then give a memory error.</strong></p>\n\n<p>I have no idea why this happens, but it's killing me as I can't even get started looking at the data the way I want to.</p>\n\n<p>Here's what I've done:</p>\n\n<p><strong>Importing the Main data</strong></p>\n\n<pre><code>import requests, zipfile, StringIO\nimport numpy as np\nimport pandas as pd \n\n\nSTAR2013url=\"http://www3.cde.ca.gov/starresearchfiles/2013/p3/ca2013_all_csv_v3.zip\"\nSTAR2013fileName = 'ca2013_all_csv_v3.txt'\n\nr = requests.get(STAR2013url)\nz = zipfile.ZipFile(StringIO.StringIO(r.content))\n\nSTAR2013=pd.read_csv(z.open(STAR2013fileName))\n</code></pre>\n\n<p><strong>Importing some Cross Cross Referencing Tables</strong> </p>\n\n<pre><code>STARentityList2013url = \"http://www3.cde.ca.gov/starresearchfiles/2013/p3/ca2013entities_csv.zip\"\nSTARentityList2013fileName = \"ca2013entities_csv.txt\"\nr = requests.get(STARentityList2013url)\nz = zipfile.ZipFile(StringIO.StringIO(r.content))\nSTARentityList2013=pd.read_csv(z.open(STARentityList2013fileName))\n\nSTARlookUpTestID2013url = \"http://www3.cde.ca.gov/starresearchfiles/2013/p3/tests.zip\"\nSTARlookUpTestID2013fileName = \"Tests.txt\"\nr = requests.get(STARlookUpTestID2013url)\nz = zipfile.ZipFile(StringIO.StringIO(r.content))\nSTARlookUpTestID2013=pd.read_csv(z.open(STARlookUpTestID2013fileName))\n\nSTARlookUpSubgroupID2013url = \"http://www3.cde.ca.gov/starresearchfiles/2013/p3/subgroups.zip\"\nSTARlookUpSubgroupID2013fileName = \"Subgroups.txt\"\nr = requests.get(STARlookUpSubgroupID2013url)\nz = zipfile.ZipFile(StringIO.StringIO(r.content))\nSTARlookUpSubgroupID2013=pd.read_csv(z.open(STARlookUpSubgroupID2013fileName))\n</code></pre>\n\n<p><strong>Renaming a Column ID to Allow for Merge</strong></p>\n\n<pre><code>STARlookUpSubgroupID2013 = STARlookUpSubgroupID2013.rename(columns={'001':'Subgroup ID'})\nSTARlookUpSubgroupID2013\n</code></pre>\n\n<p><strong>Successful Merge</strong></p>\n\n<pre><code>merged = pd.merge(STAR2013,STARlookUpSubgroupID2013, on='Subgroup ID')\n</code></pre>\n\n<p><strong><em>Try a second merge.  This is where the Memory Overflow Happens</em></strong></p>\n\n<pre><code>merged=pd.merge(merged, STARentityList2013, on='School Code')\n</code></pre>\n\n<p>I did all of this in ipython notebook, but don't think that changes anything.</p>\n"}, {"tags": ["python", "vigenere"], "answers": [{"comments": [{"owner": {"reputation": 1473, "user_id": 1327636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Si4B5.jpg?s=128&g=1", "display_name": "Matthew Brzezinski", "link": "https://stackoverflow.com/users/1327636/matthew-brzezinski"}, "edited": false, "score": 0, "creation_date": 1443050585, "post_id": 32751012, "comment_id": 53342639, "body": "That did not do anything for me."}, {"owner": {"reputation": 1473, "user_id": 1327636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Si4B5.jpg?s=128&g=1", "display_name": "Matthew Brzezinski", "link": "https://stackoverflow.com/users/1327636/matthew-brzezinski"}, "edited": false, "score": 0, "creation_date": 1443058219, "post_id": 32751012, "comment_id": 53344417, "body": "Works but gives the wrong unicode characters, I&#39;m sure I can just simply modify the values now. Thanks!"}, {"owner": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "reply_to_user": {"reputation": 1473, "user_id": 1327636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Si4B5.jpg?s=128&g=1", "display_name": "Matthew Brzezinski", "link": "https://stackoverflow.com/users/1327636/matthew-brzezinski"}, "edited": false, "score": 0, "creation_date": 1443089817, "post_id": 32751012, "comment_id": 53356789, "body": "Another thing to watch out for is that the <code>%</code> modulo operator has the same precedence as <code>*</code> and <code>&#47;</code>, so you may want this: <code>(ord(message[i]) + ord(key[j])) % 26</code>"}, {"owner": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "reply_to_user": {"reputation": 1473, "user_id": 1327636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Si4B5.jpg?s=128&g=1", "display_name": "Matthew Brzezinski", "link": "https://stackoverflow.com/users/1327636/matthew-brzezinski"}, "edited": false, "score": 1, "creation_date": 1443091244, "post_id": 32751012, "comment_id": 53357563, "body": "@MattBrzezinski See edit. This should also fix the unicode characters"}], "tags": [], "owner": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "is_accepted": true, "score": 1, "last_activity_date": 1443091216, "last_edit_date": 1443091216, "creation_date": 1443050338, "answer_id": 32751012, "question_id": 32750960, "link": "https://stackoverflow.com/questions/32750960/string-index-out-of-range-vigenere-cipher/32751012#32751012", "title": "String Index Out Of Range, Vigenere Cipher", "body": "<p>If <code>i == len(key)</code>, the value returned will be <code>i</code>.</p>\n\n<p>Replace</p>\n\n<pre><code>    if i &gt; len(key):\n        j = i % len(key)\n        f.write(str(ord(message[i]) + ord(key[j]) % 26 + ord('a')))\n    else:\n        f.write(str(ord(message[i]) + ord(key[i]) % 26 + ord('a')))\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>a = ord('a')\n  ...\n    j = i % (len(key) - 1)\n    f.write(str((ord(message[i])-a + ord(key[j])-a) % 26 + a))\n</code></pre>\n"}], "owner": {"reputation": 1473, "user_id": 1327636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Si4B5.jpg?s=128&g=1", "display_name": "Matthew Brzezinski", "link": "https://stackoverflow.com/users/1327636/matthew-brzezinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 32751012, "answer_count": 1, "score": 1, "last_activity_date": 1520347878, "creation_date": 1443050009, "last_edit_date": 1520347878, "question_id": 32750960, "link": "https://stackoverflow.com/questions/32750960/string-index-out-of-range-vigenere-cipher", "title": "String Index Out Of Range, Vigenere Cipher", "body": "<p>I'm working on implementing a Vigenere Cipher. I'm getting the error:</p>\n\n<blockquote>\n  <p>IndexError: string out of range</p>\n</blockquote>\n\n<pre><code>import sys\n\n# Get the message and key \nmessage = (sys.argv[1]).lower()\nkey = (sys.argv[2]).lower()\n\n# Open file\nf = open('Cipher.txt', 'w')\n\nfor i in range(len(message)):\n    if i &gt; len(key):\n        j = i % len(key)\n        f.write(str(ord(message[i]) + ord(key[j]) % 26 + ord('a')))\n    else:\n        f.write(str(ord(message[i]) + ord(key[i]) % 26 + ord('a')))\nf.close()\n</code></pre>\n\n<p>I'm getting it on the line after <code>f.write(str(ord(message[i]) + ord(key[i]) % 26 + ord('a')))</code>. I understand that my <code>key</code> may be shorter than the length of <code>message</code> that's why I put a check in front of it. For example if my key is <code>test</code> and I've gotten to the 5th character I'll come full circle back to the <code>t</code> in <code>test</code>.</p>\n"}, {"tags": ["python", "django", "django-settings"], "comments": [{"owner": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "edited": false, "score": 0, "creation_date": 1443050005, "post_id": 32750922, "comment_id": 53342457, "body": "did you restart the server_"}, {"owner": {"reputation": 1781, "user_id": 3782911, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e028bac777b7a1b9fdcfd294062497c?s=128&d=identicon&r=PG&f=1", "display_name": "David Boshton", "link": "https://stackoverflow.com/users/3782911/david-boshton"}, "reply_to_user": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "edited": false, "score": 0, "creation_date": 1443050344, "post_id": 32750922, "comment_id": 53342564, "body": "Good point @levi, but yes with the same results. The TEMPLATES  is included in the variables listed on the debug page."}, {"owner": {"reputation": 3302, "user_id": 2714733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7504fae09ab00aac17a6fbcb02d199d2?s=128&d=identicon&r=PG", "display_name": "Nostalg.io", "link": "https://stackoverflow.com/users/2714733/nostalg-io"}, "edited": false, "score": 1, "creation_date": 1443064078, "post_id": 32750922, "comment_id": 53345749, "body": "That bizarre. Your config is correct. You don&#39;t have another one somewhere else in the file? Are you sure your virtualenv is active?"}, {"owner": {"reputation": 6320, "user_id": 57158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/922a531469d720242886bf0b855d4072?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/57158/ben"}, "edited": false, "score": 0, "creation_date": 1443517882, "post_id": 32750922, "comment_id": 53514844, "body": "Do you have an old <code>settings.pyc</code> file hanging around anywhere?"}], "answers": [{"tags": [], "owner": {"reputation": 1781, "user_id": 3782911, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e028bac777b7a1b9fdcfd294062497c?s=128&d=identicon&r=PG&f=1", "display_name": "David Boshton", "link": "https://stackoverflow.com/users/3782911/david-boshton"}, "is_accepted": true, "score": 0, "last_activity_date": 1444345476, "creation_date": 1444345476, "answer_id": 33027372, "question_id": 32750922, "link": "https://stackoverflow.com/questions/32750922/invalid-backend-error-when-i-have-the-seemingly-correct-settings-why/33027372#33027372", "title": "Invalid BACKEND error when I have the seemingly correct settings -- why?", "body": "<p>Oh dear. It seemed to be the fact that there was an extra element tagged on the end, the <code>{TEMPLATE_DEBUG: DEBUG}</code> element in the list. Removed that and it gets past that point now. </p>\n\n<p>This is actually the old way of doing it. The 1.8 way is to have <code>debug: True</code> as a key-word in the dictionary.</p>\n"}], "owner": {"reputation": 1781, "user_id": 3782911, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e028bac777b7a1b9fdcfd294062497c?s=128&d=identicon&r=PG&f=1", "display_name": "David Boshton", "link": "https://stackoverflow.com/users/3782911/david-boshton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2114, "favorite_count": 0, "accepted_answer_id": 33027372, "answer_count": 1, "score": 4, "last_activity_date": 1444345476, "creation_date": 1443049825, "last_edit_date": 1444345366, "question_id": 32750922, "link": "https://stackoverflow.com/questions/32750922/invalid-backend-error-when-i-have-the-seemingly-correct-settings-why", "title": "Invalid BACKEND error when I have the seemingly correct settings -- why?", "body": "<p>Running Django 1.8 on a django development server on Ubuntu 14.04.\nI get this error: </p>\n\n<pre><code>Invalid BACKEND for a template engine: &lt;not defined&gt;. Check your TEMPLATES setting.\n</code></pre>\n\n<p>My settings file has:</p>\n\n<pre><code>TEMPLATES = [\n{\n    'BACKEND': 'django.template.backends.django.DjangoTemplates',\n    'DIRS': [],\n    'APP_DIRS': True,\n    'OPTIONS': {\n        'context_processors': [\n            'django.template.context_processors.debug',\n            'django.template.context_processors.request',\n            'django.contrib.auth.context_processors.auth',\n            'django.contrib.messages.context_processors.messages',\n        ],\n    },\n},\n]\n</code></pre>\n\n<p>and when I do `python manage.py diffsettings I get:</p>\n\n<pre><code>...\nTEMPLATES = [{'DIRS': [], 'APP_DIRS': True, 'BACKEND':    'django.template.backends.django.DjangoTemplates',\n 'OPTIONS':{'context_processors': ['django.template.context_processors.debug', \n'django.template.context_processors.request', \n'django.contrib.auth.context_processors.auth', \n'django.contrib.messages.context_processors.messages']}},\n {'TEMPLATE_DEBUG': 'DEBUG'}]\n</code></pre>\n\n<p><em>And</em> I can use it when I go to a shell and import it through django.conf. What gives?</p>\n\n<p>Update:</p>\n\n<p>It may be worth noting I'm running python3.</p>\n"}, {"tags": ["python", "numpy", "scikit-learn", "pca"], "comments": [{"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "edited": false, "score": 0, "creation_date": 1443050783, "post_id": 32750915, "comment_id": 53342712, "body": "Inverse transform is present in the pca module of scikit-learn, I just want to be able to run it manually. What it does is, it takes a data point from the reduced space, and takes it back(with information loss, of course) to the original space."}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "edited": false, "score": 0, "creation_date": 1443055810, "post_id": 32750915, "comment_id": 53343938, "body": "I don&#39;t think so. The matrix dimensions don&#39;t work out, to begin."}], "answers": [{"comments": [{"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 1, "creation_date": 1443097939, "post_id": 32757849, "comment_id": 53361840, "body": "When writing * above, I was not writing code, but psueodocde, i.e. writing the idea informally. As for subtracting the mean, that&#39;s understood, right, X, the input matrix, should already have each column with mean 0 and stdev 1, i.e. it is already standardized anyway, right? Thus, further tempering with the mean would not be necessary. However, if you&#39;re trying to express how to transform the original data, before standardization, can you please write it in a cleaner, more step-by-step process? Then I am ready to accept your answer."}, {"owner": {"reputation": 5894, "user_id": 1319871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ed3eb8fb25b9139f488153a7dc9490?s=128&d=identicon&r=PG", "display_name": "yangjie", "link": "https://stackoverflow.com/users/1319871/yangjie"}, "reply_to_user": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 1, "creation_date": 1443103218, "post_id": 32757849, "comment_id": 53365749, "body": "Yes, if your data already has each column with mean 0, you do not need to temper with the mean. The steps are actually simple, I have provided a more complete example, please point out if you are unclear about any part."}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 1, "creation_date": 1443106016, "post_id": 32757849, "comment_id": 53367812, "body": "One more question: you address the mean, but how about the variance? You don&#39;t mention anything about ensuring that st.dev=1."}, {"owner": {"reputation": 5894, "user_id": 1319871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ed3eb8fb25b9139f488153a7dc9490?s=128&d=identicon&r=PG", "display_name": "yangjie", "link": "https://stackoverflow.com/users/1319871/yangjie"}, "reply_to_user": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 1, "creation_date": 1443107598, "post_id": 32757849, "comment_id": 53368956, "body": "It is not necessary to ensure std=1. The PCA implemented by scikit-learn only centers the data but does not scale it. You can check that by looking at the source code <a href=\"https://github.com/scikit-learn/scikit-learn/blob/a95203b/sklearn/decomposition/pca.py#L99\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/blob/a95203b/sklearn/&hellip;</a>"}, {"owner": {"reputation": 5894, "user_id": 1319871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ed3eb8fb25b9139f488153a7dc9490?s=128&d=identicon&r=PG", "display_name": "yangjie", "link": "https://stackoverflow.com/users/1319871/yangjie"}, "reply_to_user": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1443108091, "post_id": 32757849, "comment_id": 53369284, "body": "You can normalize the data as preprocessing, but there is nothing to do with the PCA transform actually. What <code>inverse_transfrom</code> returns is only the preprocessed data."}, {"owner": {"reputation": 9132, "user_id": 913098, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3e07b09128f889209b738276d42d7ef?s=128&d=identicon&r=PG", "display_name": "Gulzar", "link": "https://stackoverflow.com/users/913098/gulzar"}, "edited": false, "score": 2, "creation_date": 1575146287, "post_id": 32757849, "comment_id": 104469729, "body": "For doing it manually, and truncating dimensions, <code>data_reduced = np.dot(data, pca.components_.T[:,:dim])</code>, and back <code>data_original = np.dot(data_reduced, pca.components_[:dim, :])</code>"}], "tags": [], "owner": {"reputation": 5894, "user_id": 1319871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ed3eb8fb25b9139f488153a7dc9490?s=128&d=identicon&r=PG", "display_name": "yangjie", "link": "https://stackoverflow.com/users/1319871/yangjie"}, "is_accepted": true, "score": 26, "last_activity_date": 1443103276, "last_edit_date": 1443103276, "creation_date": 1443086749, "answer_id": 32757849, "question_id": 32750915, "link": "https://stackoverflow.com/questions/32750915/pca-inverse-transform-manually/32757849#32757849", "title": "PCA inverse transform manually", "body": "<p>1) <code>transform</code> is not <code>data * pca.components_</code>.</p>\n\n<p>Firstly, <code>*</code> is not dot product for numpy array. It is element-wise multiplication. To perform dot product, you need to use <code>np.dot</code>.</p>\n\n<p>Secondly, the shape of <code>PCA.components_</code> is (n_components, n_features) while the shape of data to transform is (n_samples, n_features), so you need to transpose <code>PCA.components_</code> to perform dot product.</p>\n\n<p>Moreover, the first step of transform is to subtract the mean, therefore if you do it manually, you also need to subtract the mean at first. </p>\n\n<p>The correct way to transform is</p>\n\n<pre><code>data_reduced = np.dot(data - pca.mean_, pca.components_.T)\n</code></pre>\n\n<p>2) <code>inverse_transform</code> is just the inverse process of <code>transform</code></p>\n\n<pre><code>data_original = np.dot(data_reduced, pca.components_) + pca.mean_\n</code></pre>\n\n<hr>\n\n<p>If your data already has zero mean in each column, you can ignore the <code>pca.mean_</code> above, for example</p>\n\n<pre><code>import numpy as np\nfrom sklearn.decomposition import PCA\n\npca = PCA(n_components=3)\npca.fit(data)\n\ndata_reduced = np.dot(data, pca.components_.T) # transform\ndata_original = np.dot(data_reduced, pca.components_) # inverse_transform\n</code></pre>\n"}], "owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13149, "favorite_count": 6, "accepted_answer_id": 32757849, "answer_count": 1, "score": 11, "last_activity_date": 1443103276, "creation_date": 1443049793, "last_edit_date": 1443090239, "question_id": 32750915, "link": "https://stackoverflow.com/questions/32750915/pca-inverse-transform-manually", "title": "PCA inverse transform manually", "body": "<p>I am using scikit-learn. The nature of my application is such that I do the fitting offline, and then can only use the resulting coefficients online(on the fly), to manually calculate various objectives.</p>\n\n<p>The transform is simple, it is just <code>data * pca.components_</code>, i.e. simple dot product. However, I have no idea how to perform the inverse transform. Which field of the <code>pca</code> object contains the relevant coefficients for the inverse transform? How do I calculate the inverse transform?</p>\n\n<p>Specifically, I am referring to the PCA.inverse_transform() method call available in the <code>sklearn.decomposition.PCA package</code>: how can I manually reproduce its functionality using various coefficients calculated by the PCA?</p>\n"}, {"tags": ["python", "iteration", "urllib2", "urlopen"], "comments": [{"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 1, "creation_date": 1443049823, "post_id": 32750900, "comment_id": 53342413, "body": "<code>test_file</code> is a handle to a file that you have already <b>opened</b>. calling <code>f(test_file)</code> multiple times is simply moving through the file in memory already."}, {"owner": {"reputation": 51, "user_id": 5369070, "user_type": "registered", "profile_image": "https://graph.facebook.com/947710618605156/picture?type=large", "display_name": "Xuyan Xiao", "link": "https://stackoverflow.com/users/5369070/xuyan-xiao"}, "reply_to_user": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 0, "creation_date": 1443058961, "post_id": 32750900, "comment_id": 53344587, "body": "Yep, I know that. So do you have any idea what to add in the function like a     seek() in a normal file."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5369070, "user_type": "registered", "profile_image": "https://graph.facebook.com/947710618605156/picture?type=large", "display_name": "Xuyan Xiao", "link": "https://stackoverflow.com/users/5369070/xuyan-xiao"}, "edited": false, "score": 0, "creation_date": 1443058762, "post_id": 32750968, "comment_id": 53344541, "body": "but it doesn&#39;t work for urlopen files since it is just a &quot;file-like&quot; object"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1443050044, "creation_date": 1443050044, "answer_id": 32750968, "question_id": 32750900, "link": "https://stackoverflow.com/questions/32750900/how-to-return-to-the-first-line-in-a-urlopen-object/32750968#32750968", "title": "How to Return to the First Line in a Urlopen Object", "body": "<pre><code>f.seek(0)\n</code></pre>\n\n<p>returns you to the start of the file.  The argument is the byte position in the file.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5369070, "user_type": "registered", "profile_image": "https://graph.facebook.com/947710618605156/picture?type=large", "display_name": "Xuyan Xiao", "link": "https://stackoverflow.com/users/5369070/xuyan-xiao"}, "edited": false, "score": 0, "creation_date": 1443299938, "post_id": 32752203, "comment_id": 53440770, "body": "Thanks for your answer but I cannot save the test data as a file. I&#39;ve come up with my own solution. You can see it in the update part in my question."}], "tags": [], "owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "is_accepted": false, "score": 0, "last_activity_date": 1443060251, "creation_date": 1443060251, "answer_id": 32752203, "question_id": 32750900, "link": "https://stackoverflow.com/questions/32750900/how-to-return-to-the-first-line-in-a-urlopen-object/32752203#32752203", "title": "How to Return to the First Line in a Urlopen Object", "body": "<p>So the best thing for you to do is to save the output of your f.read() to a var and then push through via the <code>StringIO.readline()</code> method that will work similarly to <code>f.readline()</code> but within memory.</p>\n\n<pre><code>import urllib2\nimport StringIO\n\nt_fh = urllib2.urlopen('http://ftp.cs.stanford.edu/pub/sgb/test.dat')\ntest_data = t_fh.read()\n\n\ndef f(data):\n    buf = StringIO.StringIO(data)\n    while True:\n        line = buf.readline()\n        if line == \"\":\n            break\n        print line\n\nf(test_data)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5369070, "user_type": "registered", "profile_image": "https://graph.facebook.com/947710618605156/picture?type=large", "display_name": "Xuyan Xiao", "link": "https://stackoverflow.com/users/5369070/xuyan-xiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1443299748, "creation_date": 1443049612, "last_edit_date": 1443299748, "question_id": 32750900, "link": "https://stackoverflow.com/questions/32750900/how-to-return-to-the-first-line-in-a-urlopen-object", "title": "How to Return to the First Line in a Urlopen Object", "body": "<p>I am iterating a .dat file save on a http website using</p>\n\n<pre><code>import urllib2\ntest_file = urllib2.urlopen('http://~/file.dat')\n</code></pre>\n\n<p>And then, I have a function which iterates the file</p>\n\n<pre><code>def f(file):\n    while True:\n        iter = file.readline()\n        if iter == \"\":\n            break\n        print iter\n</code></pre>\n\n<p>If I want to call this function twice without opening the test_file again:</p>\n\n<pre><code>f(test_file)\nf(test_file)\n</code></pre>\n\n<p>then what should I add into the f function?</p>\n\n<p>Update:\nSince I am not allowed to change anything outside the function, I finally came up a silly but effective solution:</p>\n\n<pre><code>def f(file):\n    while True:\n        iter = file.readline()\n        if iter == \"\":\n            break\n        print iter\n        global test_file\n        test_file = test_file = urllib2.urlopen('http://~/file.dat')\n</code></pre>\n\n<p>Thanks for the guys who answered my questions!</p>\n"}, {"tags": ["python", "ruby-on-rails", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "is_accepted": false, "score": -1, "last_activity_date": 1444696500, "creation_date": 1444696500, "answer_id": 33092333, "question_id": 32750879, "link": "https://stackoverflow.com/questions/32750879/executing-a-simple-python-script-not-working-with-sidekiq/33092333#33092333", "title": "Executing a simple Python script not working with Sidekiq", "body": "<p><code>SeedWorker.perform_async()</code> is not an executable---that will not work. Also, Sidekiq is already running, but it may not have loaded your worker file. Last, Sidekiq just requires Redis. Rails and Sinatra are not related to your problem.</p>\n\n<p>That statement will work in an environment like <code>irb</code>. Alternatively you can use the <code>sidekiq</code> executable:</p>\n\n<pre><code>bundle exec sidekiq -r &lt;path to your worker file&gt;\n</code></pre>\n\n<p>How about following up the <a href=\"https://github.com/mperham/sidekiq/wiki/Getting-Started\" rel=\"nofollow\">good documentation</a> provided with Sidekiq?</p>\n"}], "owner": {"reputation": 303, "user_id": 3680812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/GM3Lb.jpg?s=128&g=1", "display_name": "six7zero9", "link": "https://stackoverflow.com/users/3680812/six7zero9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 895, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1444696587, "creation_date": 1443049477, "last_edit_date": 1444696587, "question_id": 32750879, "link": "https://stackoverflow.com/questions/32750879/executing-a-simple-python-script-not-working-with-sidekiq", "title": "Executing a simple Python script not working with Sidekiq", "body": "<pre><code>class SeedWorker\n  include Sidekiq::Worker\n\n  def perform\n    `python lib/assets/python_scripts/seed.py`\n  end\nend\n</code></pre>\n\n<p>I am trying to execute this from terminal like so:</p>\n\n<pre><code>bundle exec SeedWorker.perform_async() \n</code></pre>\n\n<p>I have a Redis server and Sidekiq running as well as a Rails server. The script works fine by itself, but I am wondering if this is even possible.  Also Sinatra is running too. Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "xpath", "web-scraping", "scrapy", "scrapy-spider"], "answers": [{"comments": [{"owner": {"reputation": 712, "user_id": 2350913, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/42f58938856ccf3d7b99673c4a87bc47?s=128&d=identicon&r=PG", "display_name": "Ricardo Silva", "link": "https://stackoverflow.com/users/2350913/ricardo-silva"}, "edited": false, "score": 0, "creation_date": 1459202534, "post_id": 32750923, "comment_id": 60170903, "body": "I&#39;m facing simillar problem and whant to understand, why remove tbody make it works?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 712, "user_id": 2350913, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/42f58938856ccf3d7b99673c4a87bc47?s=128&d=identicon&r=PG", "display_name": "Ricardo Silva", "link": "https://stackoverflow.com/users/2350913/ricardo-silva"}, "edited": false, "score": 0, "creation_date": 1459202635, "post_id": 32750923, "comment_id": 60170944, "body": "@RicardoSilva <code>tbody</code> as well as <code>thead</code> and other things are something that a browser would usually insert..scrapy is not a browser.."}, {"owner": {"reputation": 712, "user_id": 2350913, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/42f58938856ccf3d7b99673c4a87bc47?s=128&d=identicon&r=PG", "display_name": "Ricardo Silva", "link": "https://stackoverflow.com/users/2350913/ricardo-silva"}, "edited": false, "score": 0, "creation_date": 1459345482, "post_id": 32750923, "comment_id": 60244663, "body": "is there any way to recognize if &lt;tbody&gt; and &lt;thead&gt; really exists in code? Or the only way is trial and error?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 712, "user_id": 2350913, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/42f58938856ccf3d7b99673c4a87bc47?s=128&d=identicon&r=PG", "display_name": "Ricardo Silva", "link": "https://stackoverflow.com/users/2350913/ricardo-silva"}, "edited": false, "score": 2, "creation_date": 1459345594, "post_id": 32750923, "comment_id": 60244752, "body": "@RicardoSilva you don&#39;t have to use xpath expressions like in this topic - actually, these kind of expressions are not quite reliable generally. Just skip tbody or theads..for example: <code>&#47;&#47;table[@id=&quot;myid&quot;]&#47;&#47;tr</code> would match all rows..hope you got the idea."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 3, "last_activity_date": 1443049827, "creation_date": 1443049827, "answer_id": 32750923, "question_id": 32750871, "link": "https://stackoverflow.com/questions/32750871/my-xpath-is-good-but-ive-got-nothing-with-scrapy/32750923#32750923", "title": "my xpath is good, but i&#39;ve got nothing with scrapy", "body": "<p>You just need to remove <code>tbody</code> from the XPath expression:</p>\n\n<pre><code>.//*[@id='datawhois']/div[2]/table[3]/tr[3]/td[2]/a/text()\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>$ scrapy shell https://www.robtex.com/en/advisory/dns/com/stackoverflow/whois.html\nIn [1]: response.xpath(\".//*[@id='datawhois']/div[2]/table[3]/tbody/tr[3]/td[2]/a/text()\").extract()\nOut[1]: []\n\nIn [2]: response.xpath(\".//*[@id='datawhois']/div[2]/table[3]/tr[3]/td[2]/a/text()\").extract()\nOut[2]: [u'STACKOVERFLOW.COM']\n</code></pre>\n"}], "owner": {"reputation": 1159, "user_id": 1690695, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/564b695f2efe3331b06395c06afffbc5?s=128&d=identicon&r=PG", "display_name": "pi-2r", "link": "https://stackoverflow.com/users/1690695/pi-2r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 32750923, "answer_count": 1, "score": 3, "last_activity_date": 1443087706, "creation_date": 1443049450, "last_edit_date": 1443087706, "question_id": 32750871, "link": "https://stackoverflow.com/questions/32750871/my-xpath-is-good-but-ive-got-nothing-with-scrapy", "title": "my xpath is good, but i&#39;ve got nothing with scrapy", "body": "<p>I try to scrap one page with scrapy. I found the xpath with FireXpath (a firefox plugin), and it seem good. But with Scrapy, I've got no result.</p>\n\n<p>My python program look like this:</p>\n\n<pre><code>#!/usr/bin/python -tt\n# -*- coding: utf-8 -*-\n\nfrom scrapy.selector import Selector\nfrom scrapy.contrib.spiders import CrawlSpider\nfrom datetime import datetime\nfrom scrapy.spider import BaseSpider\n\nclass robtex(BaseSpider):\n    # Crawling Start\n    CrawlSpider.started_on = datetime.now()\n    # CrawlSpider\n    name = 'robtex'\n\n    DOWNLOAD_DELAY = 3\n    start_urls = [ \"https://www.whois.com/en/advisory/dns/com/stackoverflow/whois.html\"]\n\n\n    def parse(self, response):\n        # Selector\n        sel = Selector(response)\n        print sel.xpath(\".//*[@id='datawhois']/div[2]/table[3]/tbody/tr[3]/td[2]/a/text()\").extract()\n</code></pre>\n\n<p>How to fixe it ?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5369827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d08a9f399c7dc2b43a630d444befeb0?s=128&d=identicon&r=PG&f=1", "display_name": "Kathyz", "link": "https://stackoverflow.com/users/5369827/kathyz"}, "edited": false, "score": 0, "creation_date": 1443051403, "post_id": 32750931, "comment_id": 53342866, "body": "Thank you so much for your reply. Could you explain a little more about this dtype? Do I use it when I declare array or when I add values?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 23, "user_id": 5369827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d08a9f399c7dc2b43a630d444befeb0?s=128&d=identicon&r=PG&f=1", "display_name": "Kathyz", "link": "https://stackoverflow.com/users/5369827/kathyz"}, "edited": false, "score": 0, "creation_date": 1443051669, "post_id": 32750931, "comment_id": 53342933, "body": "<a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/generated/numpy.array.htm&zwnj;&#8203;l</a>  This should also be in your course or training materials."}, {"owner": {"reputation": 23, "user_id": 5369827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d08a9f399c7dc2b43a630d444befeb0?s=128&d=identicon&r=PG&f=1", "display_name": "Kathyz", "link": "https://stackoverflow.com/users/5369827/kathyz"}, "edited": false, "score": 0, "creation_date": 1443052452, "post_id": 32750931, "comment_id": 53343134, "body": "Thanks. I&#39;m just learning it by myself and tried to start with small projects. I looked up into the document and changed the declaration into: &quot;depth = np.array(dtype=float32)&quot; I got another error message says &quot;NameError: name &#39;float32&#39; is not defined&quot;. Did I miss something before using that?"}, {"owner": {"reputation": 23, "user_id": 5369827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d08a9f399c7dc2b43a630d444befeb0?s=128&d=identicon&r=PG&f=1", "display_name": "Kathyz", "link": "https://stackoverflow.com/users/5369827/kathyz"}, "edited": false, "score": 0, "creation_date": 1443052851, "post_id": 32750931, "comment_id": 53343248, "body": "Also, I&#39;m still confused about the value type I put into the array. Why &quot;word = float(word)&quot; didn&#39;t work, if the values that I put into the array were string? I thought I converted because I thought the change of my value from &quot;-5.3458000e+00&quot; into &quot;-5.3458&quot; would only happen for float value instead of string."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 23, "user_id": 5369827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d08a9f399c7dc2b43a630d444befeb0?s=128&d=identicon&r=PG&f=1", "display_name": "Kathyz", "link": "https://stackoverflow.com/users/5369827/kathyz"}, "edited": false, "score": 0, "creation_date": 1443053133, "post_id": 32750931, "comment_id": 53343317, "body": "<a href=\"http://stackoverflow.com/questions/568962/how-do-i-create-an-empty-array-matrix-in-numpy\" title=\"how do i create an empty array matrix in numpy\">stackoverflow.com/questions/568962/&hellip;</a> ... I suspect that you need to specify numpy.float32 -- this depends on how you import numpy in the first place.  Also see <a href=\"http://www.engr.ucsb.edu/~shell/che210d/numpy.pdf\" rel=\"nofollow noreferrer\">engr.ucsb.edu/~shell/che210d/numpy.pdf</a>"}, {"owner": {"reputation": 23, "user_id": 5369827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d08a9f399c7dc2b43a630d444befeb0?s=128&d=identicon&r=PG&f=1", "display_name": "Kathyz", "link": "https://stackoverflow.com/users/5369827/kathyz"}, "edited": false, "score": 0, "creation_date": 1443053716, "post_id": 32750931, "comment_id": 53343450, "body": "I&#39;m sorry to keep bothering but dtype simply doesn&#39;t work for me for some reason. I tried with all kinds of expression listed in manual including numpy.float32. When I just use np.array(float), and print out the array, I got this :&quot;[&lt;type &#39;float&#39;&gt; -5.3458 -5.3463 ..., -5.4902 -5.4912 -5.4926]&quot;. So I guess I had an array with float type values? I still got error message for plotting though: &quot;TypeError: float() argument must be a string or a number&quot;."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": -1, "last_activity_date": 1443053417, "last_edit_date": 1443053417, "creation_date": 1443049862, "answer_id": 32750931, "question_id": 32750868, "link": "https://stackoverflow.com/questions/32750868/matplotlib-pyplot-plot-valueerror-could-not-convert-string-to-float-f/32750931#32750931", "title": "matplotlib.pyplot.plot, ValueError: could not convert string to float: f", "body": "<p>You confused the value with the type.  If you're trying to declare the type, you need to use \"dtype=\".  What you actually did was to stick a single character into the array.</p>\n\n<p>To answer a later question, your line</p>\n\n<pre><code>word = float(word)\n</code></pre>\n\n<p>likely worked just fine.  However, we can't tell because you didn't do anything with the resulting value.  Are you expecting this to alter the original inside the variable \"line\"?  Common variables don't work that way.</p>\n"}], "owner": {"reputation": 23, "user_id": 5369827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d08a9f399c7dc2b43a630d444befeb0?s=128&d=identicon&r=PG&f=1", "display_name": "Kathyz", "link": "https://stackoverflow.com/users/5369827/kathyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4510, "favorite_count": 1, "accepted_answer_id": 32750931, "answer_count": 1, "score": 0, "last_activity_date": 1443053417, "creation_date": 1443049425, "question_id": 32750868, "link": "https://stackoverflow.com/questions/32750868/matplotlib-pyplot-plot-valueerror-could-not-convert-string-to-float-f", "title": "matplotlib.pyplot.plot, ValueError: could not convert string to float: f", "body": "<p>I'm trying to use python to make plots. Below is the simplified version of my code     that cause error.</p>\n\n<pre><code>import numpy as np\nimport matplotlib   \nimport matplotlib.pyplot as plt\nmatplotlib.use(\"AGG\")\n\ndistance = np.array('f')\ndepth = np.array('f')# make sure these two arrays store float type value\n\nwith open('Line671.txt','r') as datafile:\n  for line in datafile:\n    word_count = 0\n    for word in line.split():\n        word = float(word)#convert string type to float\n        if word_count == 0:\n            distance = np.append(distance, word)\n        elif word_count == 1:\n            depth = np.append(depth, word)\n        else:\n          print 'Error'\n        word_count += 1\n\ndatafile.closed\n\n\nprint depth\nprint distance #outputs looks correct \n# original data is like this: -5.3458000e+00\n# output of the array is :['f' '-5.3458' '-5.3463' ..., '-5.4902' '-5.4912' '-5.4926']\n\nplt.plot(depth, distance)# here comes the problem  \n</code></pre>\n\n<p>The error message says that in line for plt.plot(depth, distance): ValueError: could not convert string to float: f<br>\nI don't understand this because it seems I converted all string values into float type. I tried to search this problem on stackoverflow but they all seem to solve the problem once they cast all string values into float or int. Can anyone give any suggestion on this problem? I would be really appreciate for any help.</p>\n"}, {"tags": ["python", "python-2.7", "pep8"], "comments": [{"owner": {"reputation": 5534, "user_id": 5780109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hMec3.jpg?s=128&g=1", "display_name": "ivanleoncz", "link": "https://stackoverflow.com/users/5780109/ivanleoncz"}, "edited": false, "score": 0, "creation_date": 1518297357, "post_id": 32750833, "comment_id": 84450293, "body": "I believe that this question deserves a better explanation, regarding the example and the concept itself. Maybe some long time Pythonist could give a more clear vision for both situations. I opened this question at Quora, in order to get more explanations for the subject: <a href=\"https://www.quora.com/unanswered/How-can-I-respect-PEP-8-Maximum-Line-Length-79-characters-for-SQL-queries-without-causing-issues-to-my-code\" rel=\"nofollow noreferrer\">quora.com/unanswered/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 2958643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9439acce9b52e331e4f22f6c91620bee?s=128&d=identicon&r=PG&f=1", "display_name": "avatarofhope2", "link": "https://stackoverflow.com/users/2958643/avatarofhope2"}, "edited": false, "score": 0, "creation_date": 1602789507, "post_id": 32750873, "comment_id": 113838940, "body": "Are all of the extra spaces sent over the network to the database when running this query? Is this commonly considered negligible?"}], "tags": [], "owner": {"reputation": 47690, "user_id": 55925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4d4fbbf7cbb15f7076a5bc273f7fa039?s=128&d=identicon&r=PG", "display_name": "Johannes Weiss", "link": "https://stackoverflow.com/users/55925/johannes-weiss"}, "is_accepted": true, "score": 13, "last_activity_date": 1443049458, "creation_date": 1443049458, "answer_id": 32750873, "question_id": 32750833, "link": "https://stackoverflow.com/questions/32750833/how-to-format-long-sql-queries-according-to-pep8/32750873#32750873", "title": "How to format long SQL queries according to PEP8", "body": "<p>What about</p>\n\n<pre><code>cursor.execute(\"\"\"SELECT pivot_id\n                    FROM aud_qty\n                   WHERE hshake1 is NULL\n                     AND ((strftime('%s', DATETIME('now')) -\n                         strftime('%s', sent_to_pivot)) / (60)) &gt; 30;\n               \"\"\")\n</code></pre>\n\n<p>? Using <code>\"\"\"</code> or <code>'''</code> you get the same behaviour as a very long string but you can use newlines just fine. And your database won't mind them either.</p>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 2956796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q4IU7.gif?s=128&g=1", "display_name": "Mary Marchini", "link": "https://stackoverflow.com/users/2956796/mary-marchini"}, "is_accepted": false, "score": 2, "last_activity_date": 1443049592, "creation_date": 1443049592, "answer_id": 32750896, "question_id": 32750833, "link": "https://stackoverflow.com/questions/32750833/how-to-format-long-sql-queries-according-to-pep8/32750896#32750896", "title": "How to format long SQL queries according to PEP8", "body": "<p>You need to use multiline strings. If you declare your string with just one <code>\"</code> or <code>'</code>, it will be a single line string, to create multiline strings, you need to wrap your string with <code>\"\"\"</code> or <code>'''</code>. Here is an example:</p>\n\n<pre><code>sql_query = \"\"\"SELECT pivot_id \nFROM aud_qty \nWHERE hshake1 is NULL AND \n    ((strftime('%s', DATETIME('now')) - strftime('%s', sent_to_pivot)) / (60)) &gt; 30;\"\"\"\n</code></pre>\n\n<p>It's worth mentioning that creating SQL queries manually is usually not a good idea, as it can enable SQL injection attacks and lead to other problems.</p>\n"}, {"comments": [{"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 0, "creation_date": 1443050017, "post_id": 32750935, "comment_id": 53342463, "body": "Is this SQL Alchemy you are using?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 1, "creation_date": 1443050040, "post_id": 32750935, "comment_id": 53342470, "body": "yes the first example is sqlalchemy(I was kind of being a smart ass)"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1443050026, "last_edit_date": 1443050026, "creation_date": 1443049867, "answer_id": 32750935, "question_id": 32750833, "link": "https://stackoverflow.com/questions/32750833/how-to-format-long-sql-queries-according-to-pep8/32750935#32750935", "title": "How to format long SQL queries according to PEP8", "body": "<p>how bout</p>\n\n<pre><code>from models import AudQty,session\nupdate_limit = time.time()-30*60 # 30 minutes ago\nsession.query(AudQty.pivot_id).filter(hshake1=None,\n                                sent_to_pivot_lte=update_limit).all()\n</code></pre>\n\n<p>strings can also be multiline without triple quotes, as two quotes strings next to each other automagically concatenate</p>\n\n<pre><code>cursor.execute(\"SELECT pivot_id FROM aud_qty \" \n               \"WHERE hshake1 is NULL AND \"\n               \"((strftime('%s', DATETIME('now')) - strftime('%s', sent_to_pivot)) / (60)) &gt; 30;\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12211, "user_id": 5411817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z0g8T.png?s=128&g=1", "display_name": "SherylHohman", "link": "https://stackoverflow.com/users/5411817/sherylhohman"}, "edited": false, "score": 1, "creation_date": 1594602309, "post_id": 62859623, "comment_id": 111173660, "body": "Phase add an explanation, for long term value, and to help others learn from this code. Choose only answers are frowned upon on SO. For example, what is the important part of this answer that was not known by the OP, how does it solve the issue, etc."}], "tags": [], "owner": {"reputation": 119, "user_id": 13411047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a150b6eb087c9abae8c60ca348e05200?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo", "link": "https://stackoverflow.com/users/13411047/arturo"}, "is_accepted": false, "score": 3, "last_activity_date": 1594641070, "last_edit_date": 1594641070, "creation_date": 1594547940, "answer_id": 62859623, "question_id": 32750833, "link": "https://stackoverflow.com/questions/32750833/how-to-format-long-sql-queries-according-to-pep8/62859623#62859623", "title": "How to format long SQL queries according to PEP8", "body": "<p>In this way you have a clearly looking SQL statement that complies with PEP8 guidelines.</p>\n<pre><code>cursor.execute(&quot;&quot;&quot;\n    SELECT pivot_id\n    FROM aud_qty\n    WHERE hshake1 is NULL\n        AND ((strftime('%s', DATETIME('now')) -\n            strftime('%s', sent_to_pivot)) / (60)) &gt; 30;\n&quot;&quot;&quot;)\n</code></pre>\n"}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9556, "favorite_count": 2, "accepted_answer_id": 32750873, "answer_count": 4, "score": 14, "last_activity_date": 1594641070, "creation_date": 1443049244, "last_edit_date": 1518301265, "question_id": 32750833, "link": "https://stackoverflow.com/questions/32750833/how-to-format-long-sql-queries-according-to-pep8", "title": "How to format long SQL queries according to PEP8", "body": "<p>According to <a href=\"https://www.python.org/dev/peps/pep-0008/#maximum-line-length\" rel=\"noreferrer\">PEP 8 (Maximum Line Length)</a>, a line should never be longer than 79 characters. </p>\n\n<p>When I try to split up queries, however, I run into issues like continuation characters, and invalid tokens, etc.</p>\n\n<p>For example, what would be the best way to format this query, according to PEP8?</p>\n\n<pre><code>cursor.execute(\"SELECT pivot_id FROM aud_qty WHERE hshake1 is NULL AND ((strftime('%s', DATETIME('now')) - strftime('%s', sent_to_pivot)) / (60)) &gt; 30;\")\n</code></pre>\n"}, {"tags": ["python", "django", "unit-testing", "django-testing"], "comments": [{"owner": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "reply_to_user": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "edited": false, "score": 0, "creation_date": 1443049175, "post_id": 32750768, "comment_id": 53342224, "body": "@Gocht not, assertTrue does not working like that"}, {"owner": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "edited": false, "score": 0, "creation_date": 1443049205, "post_id": 32750768, "comment_id": 53342235, "body": "Oh I was thinking in AsserEqual"}], "answers": [{"tags": [], "owner": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "is_accepted": false, "score": 4, "last_activity_date": 1443049632, "last_edit_date": 1443049632, "creation_date": 1443049280, "answer_id": 32750843, "question_id": 32750768, "link": "https://stackoverflow.com/questions/32750768/self-asserttruefalse-what-exactly-does-it-test/32750843#32750843", "title": "self.assertTrue(False) what exactly does it test", "body": "<p>Function signature from python docs</p>\n\n<pre><code> assertTrue(expr, msg=None)\n</code></pre>\n\n<p>Check if given <code>expr</code> is <code>True</code>. In case that <code>expr</code> is <code>False</code>, it will raise an error using the provided message (<code>msg</code>)</p>\n\n<pre><code>self.assertTrue(True, \"Not authorized\") # Is always True \n\nself.assertTrue(False, \"Should not create reservation\")  # Is always False and it will throw an error saying \"Should not create reservation\"\n</code></pre>\n\n<p>So within your try block, if any exception is not raised, <code>self.assertTrue(False, \"Should not create reservation\")</code> will throw an error because <code>False</code> is not <code>True</code></p>\n\n<p>If an exception is raised, then your code will enter into <code>Except block</code> and \n<code>self.assertTrue(True, \"Not authorized\")</code> will not raise any error, because True is True. </p>\n\n<p>So, if you want to throw an exception, if any exception occurs, move <code>self.assertTrue(False, \"Should not create reservation\")</code> to Except block</p>\n\n<pre><code>except Exception, e:\n    self.assertTrue(False, \"Should not create reservation\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1443049365, "creation_date": 1443049365, "answer_id": 32750858, "question_id": 32750768, "link": "https://stackoverflow.com/questions/32750768/self-asserttruefalse-what-exactly-does-it-test/32750858#32750858", "title": "self.assertTrue(False) what exactly does it test", "body": "<p>I probably wouldn't set up my test like that. What you want to do is determine what exactly is the behaviour of your method and test accordingly.</p>\n\n<p>So, if you are testing a failure case, and let us say for example, your method returns something like \"reservation failed\" if it fails, then you should do something like this instead:</p>\n\n<pre><code># where msg is the response of your call\nself.assertEqual(msg, \"reservation failed\", \"assertion failed\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "is_accepted": false, "score": 1, "last_activity_date": 1443051583, "creation_date": 1443051583, "answer_id": 32751173, "question_id": 32750768, "link": "https://stackoverflow.com/questions/32750768/self-asserttruefalse-what-exactly-does-it-test/32751173#32751173", "title": "self.assertTrue(False) what exactly does it test", "body": "<p>Though not a direct answer to the title, this should answer your actual problem.</p>\n\n<ol>\n<li><p>You should never catch <code>Exception</code> (unless you re-reraise it after).</p>\n\n<pre><code>except Exception, e:\n</code></pre>\n\n<p>When you handle exceptions, you must specify the exact error you want to catch. For instance, the code that calls <code>create_reservation</code> might catch a <code>ReservationError</code> exception, that you defined.</p>\n\n<p>If you want this code to work, you must then test and make sure that <code>create_reservation</code> raises the <strong>correct</strong> error. So even in the test, you still must use the correct error.</p></li>\n<li><p>If you need to test some code raises an exception, use the appropriate assertion, which is <a href=\"https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises\" rel=\"nofollow\">assertRaises</a>. It can be used in two ways. Either as a call:</p>\n\n<pre><code>self.assertRaises(ReservationError, create_reservation, self.regularUser2, .........)\n</code></pre>\n\n<p>or you may use it as a context manager, using the <code>with</code> keyword (requires python 2.7 or python 3.1 or newer):</p>\n\n<pre><code>with self.assertRaises(ReservationError):\n    create_reservation(self.regularUser2, ...........)\n</code></pre>\n\n<p>Both example will run <code>create_reservation</code>, check that it raises an exception, pass if it does <strong>and</strong> it is of the correct type, fail otherwise.</p></li>\n</ol>\n"}], "owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15296, "favorite_count": 2, "answer_count": 3, "score": 4, "last_activity_date": 1443051583, "creation_date": 1443048835, "question_id": 32750768, "link": "https://stackoverflow.com/questions/32750768/self-asserttruefalse-what-exactly-does-it-test", "title": "self.assertTrue(False) what exactly does it test", "body": "<p>I am writting some tests for our application and am not sure I am testing the correct thing here. This is my test.</p>\n\n<pre><code>def test_ReservationExtensionFalseWrongResource(self):\n        'does not create a reservation that is an extension if different resource'\n        try:\n            reservation1 = Reservation.objects.create(user=self.regularUser1, resource=self.resource1, modality=self.modality, timeFrom=datetime(2015, 6, 11, 20, tzinfo=pytz.utc), timeTo=datetime(2015, 6, 11, 21, tzinfo=pytz.utc), count=1, notes=None, extendedReservation=None)\n            reservation = create_reservation(self.regularUser2, self.regularUser2, None, self.resource2, self.modality, datetime(2015, 6, 11, 20, tzinfo=pytz.utc), datetime(2015, 6, 11, 21, tzinfo=pytz.utc), 1, reservation1.uuid)\n            self.assertTrue(False, \"Should not create reservation\")\n        except Exception, e:\n            self.assertTrue(True, \"Not authorized\")\n</code></pre>\n\n<p>I want to be sure that a reservation extension cannot be created if it is of a different resource, so this line should fail in the try block:</p>\n\n<pre><code> reservation = create_reservation(self.regularUser2, self.regularUser2, None, self.resource2, self.modality, datetime(2015, 6, 11, 20, tzinfo=pytz.utc), datetime(2015, 6, 11, 21, tzinfo=pytz.utc), 1, reservation1.uuid)\n</code></pre>\n\n<p>Does this:</p>\n\n<pre><code>self.assertTrue(False, \"Should not create reservation\")\n</code></pre>\n\n<p>Assert that the reservation creation resulted in a False value? Or am I understanding the assert matchers incorrectly. I have tried going over the documentation but I could not see any analogous example of something like this in a try catch block that was obvious to me.</p>\n\n<p>Help is appreciated.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1443049844, "post_id": 32750764, "comment_id": 53342418, "body": "Why not remove words like &quot;to&quot; from the <code>Counter</code> objects you create? It would be easier than creating a regex. Also, you might want to learn about <code>for</code> loops."}, {"owner": {"reputation": 718, "user_id": 494526, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/05a5c779357effe368da837549e4ea5d?s=128&d=identicon&r=PG", "display_name": "rebeling", "link": "https://stackoverflow.com/users/494526/rebeling"}, "edited": false, "score": 2, "creation_date": 1443050228, "post_id": 32750764, "comment_id": 53342523, "body": "You are looking for <i>stopword filtering</i> <a href=\"http://stackoverflow.com/questions/5486337/how-to-remove-stop-words-using-nltk-or-python\">see this post</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4384, "user_id": 5171169, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/903cb5f31300e0ce8b9843fa4e273b41?s=128&d=identicon&r=PG&f=1", "display_name": "LetzerWille", "link": "https://stackoverflow.com/users/5171169/letzerwille"}, "is_accepted": true, "score": 2, "last_activity_date": 1443051121, "creation_date": 1443051121, "answer_id": 32751111, "question_id": 32750764, "link": "https://stackoverflow.com/questions/32750764/replace-a-specific-word/32751111#32751111", "title": "Replace a specific word", "body": "<p>here is a list of common words, you can use a list comprehention to remove them from text   </p>\n\n<pre><code>text = [ x for x in  text if not isCommon(x)]\n\n\n   def isCommon(word):\n\n    commonWords = [\"the\", \"be\", \"and\", \"of\", \"a\", \"in\", \"to\", \"have\", \"it\",\n        \"i\", \"that\", \"for\", \"you\", \"he\", \"with\", \"on\", \"do\", \"say\", \"this\",\n        \"they\", \"is\", \"an\", \"at\", \"but\",\"we\", \"his\", \"from\", \"that\", \"not\",\n        \"by\", \"she\", \"or\", \"as\", \"what\", \"go\", \"their\",\"can\", \"who\", \"get\",\n        \"if\", \"would\", \"her\", \"all\", \"my\", \"make\", \"about\", \"know\", \"will\",\n        \"as\", \"up\", \"one\", \"time\", \"has\", \"been\", \"there\", \"year\", \"so\",\n        \"think\", \"when\", \"which\", \"them\", \"some\", \"me\", \"people\", \"take\",\n        \"out\", \"into\", \"just\", \"see\", \"him\", \"your\", \"come\", \"could\", \"now\",\n        \"than\", \"like\", \"other\", \"how\", \"then\", \"its\", \"our\", \"two\", \"more\",\n        \"these\", \"want\", \"way\", \"look\", \"first\", \"also\", \"new\", \"because\",\n        \"day\", \"more\", \"use\", \"no\", \"man\", \"find\", \"here\", \"thing\", \"give\",\n        \"many\", \"well\"]\n\n    if word in commonWords:\n        return True\n    return False\n</code></pre>\n"}], "owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32751111, "answer_count": 1, "score": 0, "last_activity_date": 1474455188, "creation_date": 1443048823, "last_edit_date": 1474455188, "question_id": 32750764, "link": "https://stackoverflow.com/questions/32750764/replace-a-specific-word", "title": "Replace a specific word", "body": "<p>This script grabs headlines from a number of news sites and counts how many times words in the headlines come up.</p>\n\n<p>I get words like \"to\", \"for\", and similar words that I didn't intend to snatch with this script.</p>\n\n<p>I tried writing a str.translate(None, \"to\") to remove the word to, but it removed \"greedily\" - snatching out sections of Washington when all I meant for it to remove was the word \"to\".</p>\n\n<pre><code>import pprint\nimport feedparser\nfrom collections import Counter\n\ndef feedGrabber(feed):\n    parsed = feedparser.parse(feed)\n    feed1 = []\n    feed1.append(parsed.entries[0].title)\n    feed1.append(parsed.entries[1].title)\n    feed1.append(parsed.entries[3].title)\n    feed1.append(parsed.entries[4].title)\n    feed1.append(parsed.entries[5].title)\n    feed1.append(parsed.entries[6].title)\n    feed1.append(parsed.entries[7].title)\n    feed1.append(parsed.entries[8].title)\n    feed1.append(parsed.entries[9].title)\n    feed1 = str(feed1)\n    feedsplit = feed1\n    feedsplit = feedsplit.translate(None, '\\'')\n    feedsplit = feedsplit.translate(None, 'u')\n    feedsplit = feedsplit.translate(None, '[')\n    feedsplit = feedsplit.translate(None, ']')\n    feedsplit = str.lower(feedsplit)\n    feedsplit = str.split(feedsplit)\n    return(feedsplit)\n\nreddit = feedGrabber(\"https://www.reddit.com/r/news/.rss\")\ncnn = feedGrabber('http://rss.cnn.com/rss/cnn_topstories.rss')\nnyt = feedGrabber('http://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml')\n\none = Counter(reddit)\ntwo = Counter(cnn)\nthree = Counter(nyt)\npprint.pprint(one + two + three)\n</code></pre>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 0, "last_activity_date": 1443049303, "last_edit_date": 1443049303, "creation_date": 1443049000, "answer_id": 32750799, "question_id": 32750618, "link": "https://stackoverflow.com/questions/32750618/cant-retrieve-model-with-multiple-words-in-flask-sqlalchemy/32750799#32750799", "title": "Can&#39;t retrieve model with multiple words in flask-sqlalchemy", "body": "<p>It doesn't have a <code>parent_one</code> attribute because you did nothing to cause one to be created.  Add a relationship from <code>Child</code> to <code>ParentOne</code> called <code>parent_one</code>, or do the reverse with a <code>backref</code> named <code>parent_one</code>.</p>\n\n<pre><code># in Child\nparent_one = relationship('ParentOne', backref='children')\n# or in ParentOne\nchildren = relationship(Child, backref='parent_one')\n</code></pre>\n\n<p>Also note that the relationship you did define has an invalid backref name (<code>child.id</code> is not a valid Python variable name).  You seem to have confused <code>backref</code> with <code>ForeignKey</code>.</p>\n"}], "owner": {"reputation": 1733, "user_id": 4775902, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f84c51c41e176a4a86ccbe2fb05a59ea?s=128&d=identicon&r=PG&f=1", "display_name": "rublex", "link": "https://stackoverflow.com/users/4775902/rublex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 32750799, "answer_count": 1, "score": 0, "last_activity_date": 1443049303, "creation_date": 1443047807, "question_id": 32750618, "link": "https://stackoverflow.com/questions/32750618/cant-retrieve-model-with-multiple-words-in-flask-sqlalchemy", "title": "Can&#39;t retrieve model with multiple words in flask-sqlalchemy", "body": "<p>How do I retrieve a model that has multiple words in flask-sqlalchemy? The following throws an error:</p>\n\n<pre><code>class Child(Model):\n    id = Column(Integer, primary_key=True)\n    user_id = Column(Integer, ForeignKey('user.id'))\n    parent_one_id = Column(Integer, ForeignKey('parent_one.id'))\n\nclass ParentOne(Model):\n    id = Column(Integer, primary_key=True)\n    children = relationship('Child', backref='child.id', lazy='dynamic')\n</code></pre>\n\n<p>Looking at the DB, I see <code>parent_one</code> as the table name for respective model.</p>\n\n<p>Attempt to get parent:</p>\n\n<pre><code>c = Child.query.filter_by(id=1).first()\nprint c.user.id    # Works\nprint c.parent_one.id    # Fails\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>AttributeError: 'Child' object has no attribute 'parent_one'\n</code></pre>\n"}, {"tags": ["python", "list", "tuples", "mysql-python"], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 4625336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5d05e2644eb2e1061953cd7186c390e8?s=128&d=identicon&r=PG&f=1", "display_name": "Rachie", "link": "https://stackoverflow.com/users/4625336/rachie"}, "is_accepted": false, "score": 0, "last_activity_date": 1443047426, "creation_date": 1443047426, "answer_id": 32750559, "question_id": 32750558, "link": "https://stackoverflow.com/questions/32750558/error-assigning-none-to-list-item/32750559#32750559", "title": "Error assigning None to list item", "body": "<p>For some reason, MySQLdb returns rows as tuples instead of lists.  This is getting copied to my_list, in spite of the <code>row[:5]</code> syntax.</p>\n\n<pre><code>print type(my_list)\n##Prints &lt;type 'tuple'&gt;\n</code></pre>\n\n<p>Since tuples are immutable, they must be first converted to lists, after which individual elements can be reassigned.</p>\n\n<pre><code>my_list = list(row[:5])\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 4625336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5d05e2644eb2e1061953cd7186c390e8?s=128&d=identicon&r=PG&f=1", "display_name": "Rachie", "link": "https://stackoverflow.com/users/4625336/rachie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443047426, "creation_date": 1443047426, "question_id": 32750558, "link": "https://stackoverflow.com/questions/32750558/error-assigning-none-to-list-item", "title": "Error assigning None to list item", "body": "<p>I'm getting a strange error in my program which I can't seem to replicate in a simplified example.  I'm trying to assign the value of None to an item in a list, but for some reason it throws an error.  I don't understand the problem, since I'm not even using tuples.</p>\n\n<pre><code>#Execute SQL query returning five columns.\ncursor.execute(query)\n\n#Iterate the rows.\nfor row in cursor:\n    #Get one row, and copy it to a new list variable.\n    my_list         = row[:5]\n\n    #If index 3 is zero, convert it to None.\n    if (my_list[3] == 0):\n        print type(my_list[3])\n        ##Prints &lt;type 'int'&gt;\n\n        my_list[3]  = None\n        ##TypeError: 'tuple' object does not support item assignment\n</code></pre>\n"}, {"tags": ["python", "django", "python-2.7"], "comments": [{"owner": {"reputation": 15995, "user_id": 1783237, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a608cef53714ed07dfb108efdddba4eb?s=128&d=identicon&r=PG", "display_name": "GwynBleidD", "link": "https://stackoverflow.com/users/1783237/gwynbleidd"}, "edited": false, "score": 1, "creation_date": 1443047535, "post_id": 32750549, "comment_id": 53341691, "body": "What does it mean &quot;calling function from parent module&quot; to you? Is there some module imported inside that script? Or it is an submodule and you&#39;re trying to access module that contains that submodule?"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1443048493, "post_id": 32750549, "comment_id": 53342019, "body": "Are you saying that you have a save method in app.models and you are trying to call that?"}, {"owner": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "reply_to_user": {"reputation": 15995, "user_id": 1783237, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a608cef53714ed07dfb108efdddba4eb?s=128&d=identicon&r=PG", "display_name": "GwynBleidD", "link": "https://stackoverflow.com/users/1783237/gwynbleidd"}, "edited": false, "score": 0, "creation_date": 1443048829, "post_id": 32750549, "comment_id": 53342122, "body": "@GwynBleidD In the given code, i&#39;m calling external script from first program and that external script needs to access a function defined in the first program - save( ) function in this case"}, {"owner": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1443048905, "post_id": 32750549, "comment_id": 53342143, "body": "@idjaw No, the save method is using one of the django models inside"}], "answers": [{"tags": [], "owner": {"reputation": 1240, "user_id": 4442250, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bb9f877ee4b10635d9c38a67ee0b0920?s=128&d=identicon&r=PG&f=1", "display_name": "Huazuo Gao", "link": "https://stackoverflow.com/users/4442250/huazuo-gao"}, "is_accepted": false, "score": 2, "last_activity_date": 1443061515, "creation_date": 1443061515, "answer_id": 32752351, "question_id": 32750549, "link": "https://stackoverflow.com/questions/32750549/import-execute-a-module-and-call-function-from-parent-module/32752351#32752351", "title": "Import/execute a module and call function from parent module", "body": "<p>A module knows nothing of where it is imported, specifically, a module's global is freshly created when it is imported. Thus if the importer is not cooperative, an imported module can never touch an object that lives in importer's namespace. If a module needs to call a function in parent's namespace, its parent must pass that function to the module. Concretely:</p>\n\n<pre><code>#child\ndef do_stuff(parents_function):\n    pass\n</code></pre>\n\n<p><p></p>\n\n<pre><code>#parent\ndef func():\n    pass\n\nimport child\nchild.do_stuff(func)\n</code></pre>\n\n<p>However, modules are not perfectly isolated, due to the cache. Therefore, if you know the name of parent module, you can do this:</p>\n\n<pre><code>#child\nimport parent\ndef do_stuff():\n    parent.func()\n</code></pre>\n\n<p><p></p>\n\n<pre><code>#parent\nimport child\ndef func():\n    pass\nchild.do_stuff()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15995, "user_id": 1783237, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a608cef53714ed07dfb108efdddba4eb?s=128&d=identicon&r=PG", "display_name": "GwynBleidD", "link": "https://stackoverflow.com/users/1783237/gwynbleidd"}, "is_accepted": false, "score": 4, "last_activity_date": 1443082541, "creation_date": 1443082541, "answer_id": 32756529, "question_id": 32750549, "link": "https://stackoverflow.com/questions/32750549/import-execute-a-module-and-call-function-from-parent-module/32756529#32756529", "title": "Import/execute a module and call function from parent module", "body": "<p>If you have access to edit that external module and you're calling some function from it, not just importing that, you can pass an callback from first module:</p>\n\n<pre><code>def save():\n    pass # do something here\n\ndef execute_external_module():\n\n    from external_module import some_function\n    some_function(save)\n</code></pre>\n\n<p><p></p>\n\n<pre><code>def some_function(callback=None):\n    # do something here\n\n    if callback is not None:\n        callback()\n</code></pre>\n"}], "owner": {"reputation": 794, "user_id": 2665391, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1468977014/picture?type=large", "display_name": "Amal Ts", "link": "https://stackoverflow.com/users/2665391/amal-ts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6059, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1443082541, "creation_date": 1443047374, "last_edit_date": 1443048948, "question_id": 32750549, "link": "https://stackoverflow.com/questions/32750549/import-execute-a-module-and-call-function-from-parent-module", "title": "Import/execute a module and call function from parent module", "body": "<p>I'm trying to call an external python script from my django app. I want to call a function from the parent module in the external python script. I tried the following ways.</p>\n\n<ol>\n<li><p>Using subprocess.call : In this case, i'm not able to use the functions from the parent file. The target function uses Django models to do some db operations.</p></li>\n<li><p>Import external file : I tried importing the external file using <strong>import</strong>(), but i cannot access the functions defined in the parent module.</p></li>\n</ol>\n\n<p>Sample code :</p>\n\n<pre><code>from app.models import x\n\ndef save():\n    print x.objects.all()    \n\ndef do_stuff():\n    subprocess.call('external_script')\n\n\n#----------External script --------\n''' some code here '''\n\n#Calling save function from parent \nsave()\n</code></pre>\n\n<p>How do i achieve this?</p>\n"}, {"tags": ["python", "flask", "flask-login"], "answers": [{"comments": [{"owner": {"reputation": 3827, "user_id": 564979, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f8998fcd47892ab95f389d71683d55b1?s=128&d=identicon&r=PG", "display_name": "anvd", "link": "https://stackoverflow.com/users/564979/anvd"}, "edited": false, "score": 0, "creation_date": 1443048926, "post_id": 32750727, "comment_id": 53342154, "body": "ok, but i can use def is_banned(self): or anything else. basically this is a property totally independent of flask_login, right?"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "reply_to_user": {"reputation": 3827, "user_id": 564979, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f8998fcd47892ab95f389d71683d55b1?s=128&d=identicon&r=PG", "display_name": "anvd", "link": "https://stackoverflow.com/users/564979/anvd"}, "edited": false, "score": 0, "creation_date": 1443049570, "post_id": 32750727, "comment_id": 53342335, "body": "Yes, but is_active will be always true in that case. It&#39;s all up to your decision"}], "tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": false, "score": 0, "last_activity_date": 1443050195, "last_edit_date": 1443050195, "creation_date": 1443048513, "answer_id": 32750727, "question_id": 32750526, "link": "https://stackoverflow.com/questions/32750526/flask-login-raises-typeerror-bool-object-is-not-callable-when-trying-to-overr/32750727#32750727", "title": "Flask-Login raises TypeError: &#39;bool&#39; object is not callable when trying to override is_active property", "body": "<p>You overload <code>is_active</code> to implement your own logic.</p>\n\n<p>What's wrong with it?  Nothing IMO.  It's correct except that you forgot to make it a property using <code>@property</code> decorator</p>\n\n<p>In Tornado it's similar to <code>current_user</code> for example.</p>\n"}, {"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 32, "last_activity_date": 1446233143, "last_edit_date": 1446233143, "creation_date": 1443049895, "answer_id": 32750951, "question_id": 32750526, "link": "https://stackoverflow.com/questions/32750526/flask-login-raises-typeerror-bool-object-is-not-callable-when-trying-to-overr/32750951#32750951", "title": "Flask-Login raises TypeError: &#39;bool&#39; object is not callable when trying to override is_active property", "body": "<p><code>is_active</code>, <code>is_anonymous</code>, and <code>is_authenticated</code> are all properties as of Flask-Login 0.3.  If you want to use them, treat them as attributes, don't call them.  If you want to override them, remember to decorate them with <code>@property</code>.</p>\n\n<pre><code># change from\ncurrent_user.is_authenticated()\n# to\ncurrent_user.is_authenticated\n</code></pre>\n\n<p>It appears you are reading the docs for the most recent version (0.3), but using an older version of the library.  Version 0.3 <a href=\"https://github.com/maxcountryman/flask-login/blob/master/CHANGES#L25-L26\">contains a breaking change</a> which changed these attributes from methods to properties.  You should upgrade to the latest version of Flask-Login and treat them as properties.</p>\n\n<p>You deactivate the user by causing its <code>is_active</code> property to return <code>False</code>.  Your idea to return the value of a column is fine.</p>\n"}], "owner": {"reputation": 3827, "user_id": 564979, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f8998fcd47892ab95f389d71683d55b1?s=128&d=identicon&r=PG", "display_name": "anvd", "link": "https://stackoverflow.com/users/564979/anvd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7719, "favorite_count": 2, "accepted_answer_id": 32750951, "answer_count": 2, "score": 13, "last_activity_date": 1446233143, "creation_date": 1443047190, "last_edit_date": 1445498194, "question_id": 32750526, "link": "https://stackoverflow.com/questions/32750526/flask-login-raises-typeerror-bool-object-is-not-callable-when-trying-to-overr", "title": "Flask-Login raises TypeError: &#39;bool&#39; object is not callable when trying to override is_active property", "body": "<p>I want to modify <code>is_active</code> in Flask-Login so that users are not always active.  </p>\n\n<p>The default always returns <code>True</code>, but I changed it to return the value of the <code>banned</code> column.  </p>\n\n<p>Based on the docs, <code>is_active</code> should be a property.  However, the internal Flask-Login code raises: </p>\n\n<pre><code>TypeError: 'bool' object is not callable \n</code></pre>\n\n<p>When trying to use <code>is_active</code>.  </p>\n\n<p>How do I correctly use <code>is_active</code> to deactivate some users?</p>\n\n<pre><code>class User(UserMixin, db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    banned = db.Column(db.Boolean, default=False)\n\n    @property\n    def is_active(self):\n        return self.banned\n</code></pre>\n\n<hr>\n\n<pre><code>login_user(user, form.remember_me.data)\n\nif not force and not user.is_active():\nTypeError: 'bool' object is not callable\n</code></pre>\n"}, {"tags": ["python", "http", "python-requests"], "comments": [{"owner": {"reputation": 1143, "user_id": 2214462, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bLarQ.jpg?s=128&g=1", "display_name": "Mathemats", "link": "https://stackoverflow.com/users/2214462/mathemats"}, "edited": false, "score": 0, "creation_date": 1443047128, "post_id": 32750466, "comment_id": 53341555, "body": "What do you mean &#39;in the way&#39;. Is the same data being returned?"}, {"owner": {"reputation": 433, "user_id": 4797120, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/b745f046915af86cafebfd87902fa5d0?s=128&d=identicon&r=PG&f=1", "display_name": "bpr", "link": "https://stackoverflow.com/users/4797120/bpr"}, "reply_to_user": {"reputation": 1143, "user_id": 2214462, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bLarQ.jpg?s=128&g=1", "display_name": "Mathemats", "link": "https://stackoverflow.com/users/2214462/mathemats"}, "edited": false, "score": 0, "creation_date": 1443047867, "post_id": 32750466, "comment_id": 53341802, "body": "I modified data() to print r1,r2 and data, this is the output: &lt;Response [201]&gt; &lt;Response [403]&gt; {u&#39;error&#39;: {u&#39;message&#39;: u&quot;The passed Publisher ID &#39;100000&#39; does not match the logged in Publisher ID &#39;111111&#39;.&quot;, u&#39;code&#39;: u&#39;SYSTEM.SERVICE.IDENTITY_MISMATCH&#39;, u&#39;data&#39;: {u&#39;publisher_id&#39;: u&#39;100000&#39;, u&#39;identity&#39;: u&#39;111111&#39;}}}"}, {"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443053001, "post_id": 32750466, "comment_id": 53343283, "body": "I don&#39;t think there&#39;s anything fundamentally wrong with your Python code (<code>s.close()</code> is redundant though since you&#39;re already using the session context manager via the <code>with</code> statement. And I would move the <code>data = r2.json()</code> inside the <code>with</code> block). You&#39;re doing each request pair in a new sessions, so cookies wouldn&#39;t carry over. To me this looks like the issue is server side (could also be a caching proxy)."}], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 4797120, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/b745f046915af86cafebfd87902fa5d0?s=128&d=identicon&r=PG&f=1", "display_name": "bpr", "link": "https://stackoverflow.com/users/4797120/bpr"}, "edited": false, "score": 0, "creation_date": 1443116736, "post_id": 32750717, "comment_id": 53374673, "body": "There is nothing in the documentation that references being able to &#39;logout&#39;, is there anything I can do with the requests module in particular?"}, {"owner": {"reputation": 944, "user_id": 3462736, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/728f19a61d1716a14f5e63a712e5834a?s=128&d=identicon&r=PG&f=1", "display_name": "haraprasadj", "link": "https://stackoverflow.com/users/3462736/haraprasadj"}, "reply_to_user": {"reputation": 433, "user_id": 4797120, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/b745f046915af86cafebfd87902fa5d0?s=128&d=identicon&r=PG&f=1", "display_name": "bpr", "link": "https://stackoverflow.com/users/4797120/bpr"}, "edited": false, "score": 0, "creation_date": 1443184655, "post_id": 32750717, "comment_id": 53403178, "body": "Sorry no idea. Probably you should talk to the developer of the service"}], "tags": [], "owner": {"reputation": 944, "user_id": 3462736, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/728f19a61d1716a14f5e63a712e5834a?s=128&d=identicon&r=PG&f=1", "display_name": "haraprasadj", "link": "https://stackoverflow.com/users/3462736/haraprasadj"}, "is_accepted": false, "score": 0, "last_activity_date": 1443048451, "creation_date": 1443048451, "answer_id": 32750717, "question_id": 32750466, "link": "https://stackoverflow.com/questions/32750466/multiple-api-requests-of-different-accounts-how-to-properly-close-out-each-requ/32750717#32750717", "title": "Multiple API Requests of different accounts, how to properly close out each request?", "body": "<p>I believe you should also do a Logout in each session. I think the problem is that the previous session is still active on the server side as you did a Login but not Logout.</p>\n"}], "owner": {"reputation": 433, "user_id": 4797120, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/b745f046915af86cafebfd87902fa5d0?s=128&d=identicon&r=PG&f=1", "display_name": "bpr", "link": "https://stackoverflow.com/users/4797120/bpr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443048451, "creation_date": 1443046860, "question_id": 32750466, "link": "https://stackoverflow.com/questions/32750466/multiple-api-requests-of-different-accounts-how-to-properly-close-out-each-requ", "title": "Multiple API Requests of different accounts, how to properly close out each request?", "body": "<p>I am trying to make multiple calls to the same website for separate accounts. It seems the information from the first call is still stored or 'in the way' when the second call is made. Specifically, the pub ID's from the first account is mentioned in the error spit out by r1 of the second request saying that was not the expected ID. Here is my code making the request, I've tried adding in s.close() but the problem persists: </p>\n\n<pre><code>def data(account, report, st, et):     \n    url_post = \"https://publisher-api.website.com/1.0/Publisher/Login?\"\n    payload = {'username':account.username,'password':account.password}\n    url_get = report.url+\"?date_range=\"+st+\"|\"+et+\"\"\n\n    with requests.Session() as s:\n        r1 = s.post(url_post,data=payload)\n        r2 = s.get(url_get)\n    s.close()\n\n    data = r2.json()\n    df = pd.DataFrame.from_dict(data['value']['data'])\n    return df\n</code></pre>\n\n<p>Here is the code making multiple calls:</p>\n\n<pre><code>def rev_all():\n\n    spx_st = spotx_date(grab_date('Start Date: '))\n    spx_et = spotx_date(grab_date('End Date: '))\n\n    SP1_Rev = data(SP1, Revenue, spx_st, spx_et)\n    SP2_Rev = data(SP2, Revenue, spx_st, spx_et)\n    SP3_Rev = data(SP3, Revenue, spx_st, spx_et)\n    SP7_Rev = data(SP7, Revenue, spx_st, spx_et)\n    SP8_Rev = data(SP8, Revenue, spx_st, spx_et)\n\n    Rev = [SP1_Rev, SP2_Rev, SP3_Rev, SP7_Rev, SP8_Rev]\n    df = pd.concat(Rev,ignore_index=True)\n\n    return df\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1443045921, "post_id": 32750257, "comment_id": 53341111, "body": "Erm.. that code should work, and give you what you want."}, {"owner": {"reputation": 1581, "user_id": 3895102, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IhbL8.gif?s=128&g=1", "display_name": "areuexperienced", "link": "https://stackoverflow.com/users/3895102/areuexperienced"}, "edited": false, "score": 0, "creation_date": 1443045968, "post_id": 32750257, "comment_id": 53341129, "body": "Your code returns what you want."}, {"owner": {"reputation": 193, "user_id": 4986598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/017b3a2751c57e54e7d39ddc5cc5d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "April", "link": "https://stackoverflow.com/users/4986598/april"}, "reply_to_user": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1443046004, "post_id": 32750257, "comment_id": 53341145, "body": "@DSM that is giving me combined = {&#39;1&#39;:[&#39;one&#39;,[&#39;uno&#39;]] &#39;2&#39;:[&#39;two&#39;,[&#39;dos&#39;]] &#39;3&#39;:[&#39;three&#39;,[tres&#39;]]}   I don&#39;t understand why. is there another way to do it?"}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1443046054, "post_id": 32750257, "comment_id": 53341165, "body": "@April: respectfully, I don&#39;t believe you.  :-)  If you copy and paste your first two lines into a console, and then your <code>combined = {key: et cetera</code> line, you&#39;ll get your target.  Maybe your <code>dictionary2</code> is wrong, and has lists instead of strings as values."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443046079, "post_id": 32750257, "comment_id": 53341174, "body": "Post your full code, there is something you are not showing us."}, {"owner": {"reputation": 193, "user_id": 4986598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/017b3a2751c57e54e7d39ddc5cc5d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "April", "link": "https://stackoverflow.com/users/4986598/april"}, "edited": false, "score": 0, "creation_date": 1443046140, "post_id": 32750257, "comment_id": 53341204, "body": "YES! that&#39;s what it is. one of my dictionaries has a list for the values. I just realized. So how do I append the other value to the list?"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1443046777, "post_id": 32750257, "comment_id": 53341446, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/11011756/is-there-any-pythonic-way-to-combine-two-dicts-adding-values-for-keys-that-appe\">Is there any pythonic way to combine two dicts (adding values for keys that appear in both)?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4986598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/017b3a2751c57e54e7d39ddc5cc5d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "April", "link": "https://stackoverflow.com/users/4986598/april"}, "edited": false, "score": 0, "creation_date": 1443046271, "post_id": 32750309, "comment_id": 53341262, "body": "I just realized one of my dictionaries has values as list, so what I need is to append the new values to that list. how do I do that?"}, {"owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "reply_to_user": {"reputation": 193, "user_id": 4986598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/017b3a2751c57e54e7d39ddc5cc5d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "April", "link": "https://stackoverflow.com/users/4986598/april"}, "edited": false, "score": 0, "creation_date": 1443046382, "post_id": 32750309, "comment_id": 53341304, "body": "If dictionary2 for instance has lists as values, then you can just do this:   <code>combined = {key:[dictionary1[key]] +  dictionary2[key] for key in dictionary1}</code> .. if dictionary1 holds lists as values as well then remove the surrounding <code>[]</code> for  <code>dictionary1[key]</code>. We&#39;re just concatenating lists here."}, {"owner": {"reputation": 193, "user_id": 4986598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/017b3a2751c57e54e7d39ddc5cc5d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "April", "link": "https://stackoverflow.com/users/4986598/april"}, "edited": false, "score": 0, "creation_date": 1443050058, "post_id": 32750309, "comment_id": 53342477, "body": "how could you do this in separate lines with a for loop?"}], "tags": [], "owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "is_accepted": true, "score": 2, "last_activity_date": 1443046623, "last_edit_date": 1443046623, "creation_date": 1443046058, "answer_id": 32750309, "question_id": 32750257, "link": "https://stackoverflow.com/questions/32750257/merge-two-dictionaries-by-key/32750309#32750309", "title": "merge two dictionaries by key", "body": "<p>Actually, your code is already correct?</p>\n\n<pre><code>&gt;&gt;&gt; dictionary1 = {'1':'one', '2':'two', '3':'three'}\n&gt;&gt;&gt; dictionary2 = {'1':'uno', '2':'dos', '3':'tres'}\n&gt;&gt;&gt; combined = {key:[dictionary1[key], dictionary2[key]] for key in dictionary1}\n&gt;&gt;&gt; combined\n{'3': ['three', 'tres'], '2': ['two', 'dos'], '1': ['one', 'uno']}\n</code></pre>\n\n<p>Are you sure you are not doing anything else besides this?</p>\n"}, {"tags": [], "owner": {"reputation": 4384, "user_id": 5171169, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/903cb5f31300e0ce8b9843fa4e273b41?s=128&d=identicon&r=PG&f=1", "display_name": "LetzerWille", "link": "https://stackoverflow.com/users/5171169/letzerwille"}, "is_accepted": false, "score": 0, "last_activity_date": 1443048227, "creation_date": 1443048227, "answer_id": 32750687, "question_id": 32750257, "link": "https://stackoverflow.com/questions/32750257/merge-two-dictionaries-by-key/32750687#32750687", "title": "merge two dictionaries by key", "body": "<pre><code>dictionary1 = {'1':'one', '2':'two', '3':'three'}\ndictionary2 = {'1':'uno', '2':'dos', '3':'tres'}\n\n\nz = zip(zip(dictionary1.keys(), dictionary2.keys()),\n        zip(dictionary1.values(), dictionary2.values()))\n\ndual = {}\n\nfor el in z:\n    dual[el[0][0]] = el[1]\n\n\nprint(list(dual.items()))\n</code></pre>\n\n<p><strong>OUPUT</strong></p>\n\n<p>[('2', ('two', 'dos')), ('1', ('one', 'uno')), ('3', ('three', 'tres'))]</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 4830433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6a1b0ad2f1afa158c07c1575a07240?s=128&d=identicon&r=PG&f=1", "display_name": "Tammy Nguyen", "link": "https://stackoverflow.com/users/4830433/tammy-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1443050108, "creation_date": 1443050108, "answer_id": 32750981, "question_id": 32750257, "link": "https://stackoverflow.com/questions/32750257/merge-two-dictionaries-by-key/32750981#32750981", "title": "merge two dictionaries by key", "body": "<pre><code>dictionary1 = {'1':'one', '2':'two', '3':'three'}\ndictionary2 = {'1':['uno'], '2':['dos'], '3':['tres']}\n\ncombined = {key:[dictionary1[key], dictionary2[key][0]] for key in dictionary1}\n</code></pre>\n\n<p>Simply retrieve the 0th index from the values of <code>dictionary2</code>, considering they're all lists of length 1. </p>\n\n<p>Otherwise, this will work:</p>\n\n<pre><code>combined = {key:[dictionary1[key]] + dictionary2[key] for key in dictionary1}\n</code></pre>\n\n<p>This basically creates a one element list out of the values of <code>dictionary1</code> and combines it with the values of <code>dictionary2</code> which are already lists.</p>\n"}], "owner": {"reputation": 193, "user_id": 4986598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/017b3a2751c57e54e7d39ddc5cc5d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "April", "link": "https://stackoverflow.com/users/4986598/april"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2537, "favorite_count": 1, "accepted_answer_id": 32750309, "answer_count": 3, "score": 2, "last_activity_date": 1443050108, "creation_date": 1443045753, "last_edit_date": 1443046222, "question_id": 32750257, "link": "https://stackoverflow.com/questions/32750257/merge-two-dictionaries-by-key", "title": "merge two dictionaries by key", "body": "<p>I know this question has been asked but I could not find anything that appends the values to the list instead of creating a list of list. I have two dictionaries which have identical values:</p>\n\n<pre><code>dictionary1 = {'1':'one', '2':'two', '3':'three'}\ndictionary2 = {'1':['uno'], '2':['dos'], '3':['tres']}\n</code></pre>\n\n<p>and I need it to return this:</p>\n\n<pre><code>combined = {'1':['one','uno'] '2':['two','dos'] '3':['three',tres']} \n</code></pre>\n\n<p>so far everything I tried returns this:</p>\n\n<pre><code>combined = {'1':['one'['uno']] '2':['two'['dos']] '3':['three'[tres']]}\n</code></pre>\n\n<p>which has nested lists. How do I append the values of dictionary 1 into the dictionary2 list? Please help me, I know is really simple but I don't know how to do it. thank you </p>\n\n<p>Here is my code:</p>\n\n<pre><code>    combined = {key:[dictionary1[key], dictionary2[key]] for key in dictionary1}\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pandas", "google-analytics", "google-analytics-api"], "comments": [{"owner": {"reputation": 1052, "user_id": 1492284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8fb77935284841d725aa5cba5c64cde2?s=128&d=identicon&r=PG", "display_name": "mburke05", "link": "https://stackoverflow.com/users/1492284/mburke05"}, "edited": false, "score": 0, "creation_date": 1443045863, "post_id": 32750233, "comment_id": 53341097, "body": "Made some small edits to add in error code and the call itself."}, {"owner": {"reputation": 1052, "user_id": 1492284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8fb77935284841d725aa5cba5c64cde2?s=128&d=identicon&r=PG", "display_name": "mburke05", "link": "https://stackoverflow.com/users/1492284/mburke05"}, "reply_to_user": {"reputation": 6465, "user_id": 1182891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64170963e481496b89074f68786f4aeb?s=128&d=identicon&r=PG", "display_name": "Josh J", "link": "https://stackoverflow.com/users/1182891/josh-j"}, "edited": false, "score": 0, "creation_date": 1443112924, "post_id": 32750233, "comment_id": 53372503, "body": "Sorry I should have mentioned, <a href=\"https://github.com/pydata/pandas/blob/master/pandas/io/auth.py\" rel=\"nofollow noreferrer\">Here&#39;s auth.py in full that has FLAGS</a> . I&#39;m new to python and by consequence not very good at recognizing whether an error is complicated or a simple syntax misunderstasnding."}], "answers": [{"tags": [], "owner": {"reputation": 6465, "user_id": 1182891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64170963e481496b89074f68786f4aeb?s=128&d=identicon&r=PG", "display_name": "Josh J", "link": "https://stackoverflow.com/users/1182891/josh-j"}, "is_accepted": true, "score": 1, "last_activity_date": 1443116083, "creation_date": 1443116083, "answer_id": 32767557, "question_id": 32750233, "link": "https://stackoverflow.com/questions/32750233/pandas-noauth-local-webserver/32767557#32767557", "title": "Pandas: noauth_local_webserver", "body": "<p>I did a little digging and you are correct in your assumption that the usage of <code>FLAGS</code> is incorrect. The <a href=\"https://github.com/google/oauth2client/blob/master/oauth2client/tools.py#L143-L151\" rel=\"nofollow\">docstring for tools.run_flow()</a> states:</p>\n\n<pre><code>flags: ``argparse.Namespace``, The command-line flags. This is the\n       object returned from calling ``parse_args()`` on\n       ``argparse.ArgumentParser`` as described above.\n</code></pre>\n\n<p>The quick-n-dirty fix would be something like this:</p>\n\n<pre><code>credentials = tools.run_flow(flow, storage, tools.argparser.parse_args([]))\n</code></pre>\n\n<p>I believe a more robust solution would be for the maintainers of <code>pandas.io</code> to update it to the new workflow if <code>tools.run</code> is really deprecated.</p>\n"}], "owner": {"reputation": 1052, "user_id": 1492284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8fb77935284841d725aa5cba5c64cde2?s=128&d=identicon&r=PG", "display_name": "mburke05", "link": "https://stackoverflow.com/users/1492284/mburke05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 32767557, "answer_count": 1, "score": 2, "last_activity_date": 1443116083, "creation_date": 1443045663, "last_edit_date": 1443109110, "question_id": 32750233, "link": "https://stackoverflow.com/questions/32750233/pandas-noauth-local-webserver", "title": "Pandas: noauth_local_webserver", "body": "<p>I haven't used io within pandas to access google analytic's API for a few weeks but it had been working fine to my knowledge historically without hiccups. I ran it again today and it looks as though the <code>tools.run</code> syntax is deprecated, so I made a pull and replaced <code>tools.py</code> with <a href=\"https://github.com/google/oauth2client/blob/master/oauth2client/tools.py#L115\" rel=\"nofollow\">this update</a> and I've changed to <code>auth.py</code> within pandas to be:</p>\n\n<pre><code>def authenticate(flow, storage=None):\n    \"\"\"\n    Try to retrieve a valid set of credentials from the token store if possible\n    Otherwise use the given authentication flow to obtain new credentials\n    and return an authenticated http object\n\n    Parameters\n    ----------\n    flow : authentication workflow\n    storage: token storage, default None\n    \"\"\"\n    http = httplib2.Http()\n\n    # Prepare credentials, and authorize HTTP object with them.\n    credentials = storage.get()\n    if credentials is None or credentials.invalid:\n        credentials = tools.run_flow(flow, storage, FLAGS)\n\n    http = credentials.authorize(http)\n    return http\n</code></pre>\n\n<p>I have a feeling my usage of FLAGS there is incorrect.</p>\n\n<p>Any help? Thanks!</p>\n\n<p>Here's my code and the error:</p>\n\n<pre><code>df = ga.read_ga(\n    account_id  = id,\n    profile_id  = profile,\n    property_id = property,\n    metrics     = ['transactionRevenue', 'transactions'],\n    dimensions  = ['transactionId', 'city', 'region', 'date', 'hour', 'minute', 'cityId'],\n    start_date  = \"2015-07-11\",\n    end_date    = \"2015-07-16\",\n    index_col = 0,\n    parse_dates = {'new_date': [3,4,5]})\n</code></pre>\n\n<p>The error thrown up:</p>\n\n<pre><code>C:\\Users\\mburke\\AppData\\Local\\Continuum\\Anaconda64\\lib\\site-packages\\pandas\\io\\auth.py in authenticate(flow, storage)\n    106     credentials = storage.get()\n    107     if credentials is None or credentials.invalid:\n--&gt; 108         credentials = tools.run_flow(flow, storage, FLAGS)\n    109 \n    110     http = credentials.authorize(http)\n\nC:\\Users\\mburke\\AppData\\Local\\Continuum\\Anaconda64\\lib\\site-packages\\oauth2client\\util.pyc in positional_wrapper(*args, **kwargs)\n    140                 else:  # IGNORE\n    141                     pass\n--&gt; 142             return wrapped(*args, **kwargs)\n    143         return positional_wrapper\n    144 \n\nC:\\Users\\mburke\\AppData\\Local\\Continuum\\Anaconda64\\lib\\site-packages\\oauth2client\\tools.pyc in run_flow(flow, storage, flags, http)\n    148     logging.getLogger().setLevel(getattr(logging, flags.logging_level))\n--&gt; 149     if not flags.noauth_local_webserver:\n    150         success = False\n    151         port_number = 0\n\nC:\\Users\\mburke\\AppData\\Local\\Continuum\\Anaconda64\\lib\\site-packages\\python_gflags-2.0-py2.7.egg\\gflags.pyc in __getattr__(self, name)\n   1057     fl = self.FlagDict()\n   1058     if name not in fl:\n-&gt; 1059       raise AttributeError(name)\n   1060     return fl[name].value\n   1061 \n\nAttributeError: noauth_local_webserver\n</code></pre>\n"}, {"tags": ["python", "django", "django-queryset", "django-orm"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1443076375, "post_id": 32750222, "comment_id": 53349370, "body": "I&#39;m not sure why you want to bother with the foreign keys. You&#39;ve got a static method, you can just call it via the class: <code>MyModelC.my_Cstatic_method()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "edited": false, "score": 0, "creation_date": 1443047456, "post_id": 32750335, "comment_id": 53341665, "body": "Sorry Gwyn, I was confused in writing the OP. I have since corrected it. I have an instance of <code>MyModelA</code> and am trying to call a static method of <code>MyModelC</code>."}, {"owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "edited": false, "score": 0, "creation_date": 1443048955, "post_id": 32750335, "comment_id": 53342169, "body": "Hmm. It doesn&#39;t work: <a href=\"https://gist.github.com/saqib-zmi/cbda21d461246df2d225\" rel=\"nofollow noreferrer\">gist.github.com/saqib-zmi/cbda21d461246df2d225</a>. The <code>related</code> attribute sends me back to <code>MyModelB</code> instead of to <code>MyModelC</code>."}], "tags": [], "owner": {"reputation": 15995, "user_id": 1783237, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a608cef53714ed07dfb108efdddba4eb?s=128&d=identicon&r=PG", "display_name": "GwynBleidD", "link": "https://stackoverflow.com/users/1783237/gwynbleidd"}, "is_accepted": false, "score": 0, "last_activity_date": 1443048218, "last_edit_date": 1443048218, "creation_date": 1443046209, "answer_id": 32750335, "question_id": 32750222, "link": "https://stackoverflow.com/questions/32750222/how-can-i-access-a-django-models-reverse-foreign-key-from-a-staticmethod/32750335#32750335", "title": "How can I access a Django model&#39;s reverse foreign key from a staticmethod?", "body": "<p>After accessing model B from model A, you don't have model instance anymore, but model class.</p>\n\n<p>With class, there is no fields but rather field descriptors, also for related fields, so there shoudl be <code>MyModelC_b</code> here:</p>\n\n<pre><code>a.MyModelB_a.model.MyModelC_b\n</code></pre>\n\n<p>but, as I said this isn't a field, but it have reference to related model as an sub-attribute in attribute <code>related</code>:</p>\n\n<pre><code>a.MyModelB_a.model.MyModelC_b.related.model\n</code></pre>\n\n<p>using that, you can now accss your static function from model C</p>\n\n<pre><code>a.MyModelB_a.model.MyModelC_b.related.model.my_Cstatic_method()\n</code></pre>\n"}], "owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443048218, "creation_date": 1443045624, "last_edit_date": 1443047382, "question_id": 32750222, "link": "https://stackoverflow.com/questions/32750222/how-can-i-access-a-django-models-reverse-foreign-key-from-a-staticmethod", "title": "How can I access a Django model&#39;s reverse foreign key from a staticmethod?", "body": "<p>Suppose I have 3 Django models:</p>\n\n<pre><code>class MyModelA(models.Model):\n    my_int = models.IntegerField()\n\n    @staticmethod\n    def my_Astatic_method():\n        return \"AHello\"\n\nclass MyModelB(models.Model):\n    my_int = models.IntegerField()\n    my_a = models.ForeignKey(MyModelA, related_name=\"MyModelB_a\")\n\n\n    @staticmethod\n    def my_Bstatic_method():\n        return \"BHello\"\n\nclass MyModelC(models.Model):\n    my_int = models.IntegerField()\n    my_b = models.ForeignKey(MyModelB, related_name=\"MyModelC_b\")\n\n    @staticmethod\n    def my_Cstatic_method():\n        return \"CHello\"\n</code></pre>\n\n<p>I have an instance of <code>MyModelA</code> called <code>a</code>. From within a method of <code>a</code>, I would like to call <code>my_Cstatic_method()</code>. How can I do it?</p>\n\n<p><code>a.MyModelB_a.model.my_Bstatic_method()</code> works to call <code>MyModelB</code>'s static method. But I don't know how to get one level down into <code>MyModelC</code>'s static methods from <code>MyModelB</code>'s <code>model</code> attribute. How should I do it? </p>\n\n<p>Surprisingly, there is no <code>model</code> attribute for the object <code>a.MyModelB_a.model.MyModelC_b</code></p>\n"}, {"tags": ["python", "oracle", "dictionary"], "comments": [{"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443052545, "post_id": 32750209, "comment_id": 53343163, "body": "Can&#39;t really test this right now, so just a comment instead of an answer: Something along the lines of <code>cur.execute(&#39;INSERT INTO DIM_CUST (CUSTOMER_NO, CUSTOMER_NM, CUSTOMER_SK, EFFECTIVE_DT) VALUES (:CUSTOMER_NO, :CUSTOMER_NM, :CUSTOMER_SK, :EFFECTIVE_DT)&#39;, selrow[0])</code> should work. See the <a href=\"https://www.python.org/dev/peps/pep-0249/#paramstyle\" rel=\"nofollow noreferrer\"><code>paramstyle</code></a> docs for your Oracle DBAPI adapter for the supported parameter styles."}, {"owner": {"reputation": 1283, "user_id": 4375835, "user_type": "registered", "accept_rate": 32, "profile_image": "https://lh4.googleusercontent.com/-8ja4Ys4Itms/AAAAAAAAAAI/AAAAAAAAEfk/XYZa7G0lfpA/photo.jpg?sz=128", "display_name": "Arvind Kandaswamy", "link": "https://stackoverflow.com/users/4375835/arvind-kandaswamy"}, "reply_to_user": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443056095, "post_id": 32750209, "comment_id": 53344000, "body": "Thanks Lukas, Worked like charm. I rewrote it to make it somewhat generic. See below for my answer. Thanks again."}], "answers": [{"tags": [], "owner": {"reputation": 1283, "user_id": 4375835, "user_type": "registered", "accept_rate": 32, "profile_image": "https://lh4.googleusercontent.com/-8ja4Ys4Itms/AAAAAAAAAAI/AAAAAAAAEfk/XYZa7G0lfpA/photo.jpg?sz=128", "display_name": "Arvind Kandaswamy", "link": "https://stackoverflow.com/users/4375835/arvind-kandaswamy"}, "is_accepted": false, "score": 1, "last_activity_date": 1443056358, "creation_date": 1443056358, "answer_id": 32751768, "question_id": 32750209, "link": "https://stackoverflow.com/questions/32750209/python-oracle-insert-datatype-mismatch/32751768#32751768", "title": "python oracle insert datatype mismatch", "body": "<p>Thank you Lucas &amp; haraprasadj. Based on your pointers, I came up with this:</p>\n\n<pre><code>cols = ', '.join(selrow[0].keys())\nvals = ':'+', :'.join(selrow[0].keys())\nsql='INSERT INTO DIM_CUST (%s) VALUES (%s)' % (cols, vals)\ncur.execute(sql, selrow[0])\ndb.commit()\n</code></pre>\n\n<p>It works! appeciate your help.</p>\n"}], "owner": {"reputation": 1283, "user_id": 4375835, "user_type": "registered", "accept_rate": 32, "profile_image": "https://lh4.googleusercontent.com/-8ja4Ys4Itms/AAAAAAAAAAI/AAAAAAAAEfk/XYZa7G0lfpA/photo.jpg?sz=128", "display_name": "Arvind Kandaswamy", "link": "https://stackoverflow.com/users/4375835/arvind-kandaswamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443056358, "creation_date": 1443045551, "last_edit_date": 1443051818, "question_id": 32750209, "link": "https://stackoverflow.com/questions/32750209/python-oracle-insert-datatype-mismatch", "title": "python oracle insert datatype mismatch", "body": "<p>I am trying to insert a dictionary into an Oracle table and its failing with data mismatch error. I want to know if the syntax I am using is a correct one. </p>\n\n<pre><code>In [19]:selrow\nOut[19]:[{'CUSTOMER_NM': 'ABC INC',\n  'CUSTOMER_NO': 'A0050129',\n  'CUSTOMER_SK': 926,\n  'EFFECTIVE_DT': datetime.datetime(2015, 10, 2, 0, 0)}]\n</code></pre>\n\n<p>Here is my insert statement:</p>\n\n<pre><code>In [30]:cur=db.cursor()\ncur.execute('INSERT INTO DIM_CUST (%s) VALUES (%s)', (selrow[0].keys(),               selrow[0].values()))\ndb.commit()\n</code></pre>\n\n<p>and I am getting the following error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-30-eefac6fb0aa7&gt; in &lt;module&gt;()\n      2 #query = 'INSERT INTO DIM_CUST (%s) VALUES (%s)', (selrow[0].keys(), selrow[0].values())\n      3 #rint query\n----&gt; 4 cur.execute('INSERT INTO DIM_CUST (%s) VALUES (%s)', (selrow[0].keys(), selrow[0].values()))\n      5 db.commit()\n\nTypeError: expecting numeric data\n</code></pre>\n\n<p>Is my insert syntax correct? I am using dictionary keys as column names and dictionary values as the values to be entered into the table.</p>\n\n<p>pl. ask any details i may have omitted.  Thank you for any help that you can provide.</p>\n"}, {"tags": ["python", "apache", "flask", "mod-wsgi", "webdav"], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 4708935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xSF6w.jpg?s=128&g=1", "display_name": "jrodjpl", "link": "https://stackoverflow.com/users/4708935/jrodjpl"}, "is_accepted": true, "score": 1, "last_activity_date": 1461349558, "last_edit_date": 1461349558, "creation_date": 1461348616, "answer_id": 36800667, "question_id": 32750166, "link": "https://stackoverflow.com/questions/32750166/is-there-a-way-for-mod-wsgi-flask-and-mod-dav-to-coexist/36800667#36800667", "title": "Is there a way for mod_wsgi/Flask and mod_dav to coexist?", "body": "<p>Came back to this a while later, and I've found something that appears to work.</p>\n\n<p>Basically, I'm using mod_rewrite to redirect requests that I don't want mod_wsgi/Flask to handle. </p>\n\n<p>So, if my Flask app is being served under <code>/endpoint</code>, and I want my WebDAV repo to be available under <code>/endpoint/dav</code>, my config is:</p>\n\n<pre><code>RewriteCond %{REQUEST_URI} ^/endpoint/dav\nRewriteCond %{REQUEST_METHOD} ^(PROPFIND|OPTIONS|PROPPATCH)$\nRewriteRule ^/endpoint/dav /local_path_to_dav_repo/$1 [L]\n\nRewriteCond %{REQUEST_URI} ^/endpoint/dav\nRewriteCond %{REQUEST_METHOD} =GET\nRewriteCond /local_path_to_dav_repo/$1 !-d\nRewriteRule ^/endpoint/dav(.*) /local_path_to_dav_repo/$1 [L]\n\nWSGIScriptAlias /endpoint /my_wsgi_dir/flask.wsgi\n\n&lt;Directory /local_path_to_dav_repo&gt;\nDav On\n&lt;/Directory&gt;\n</code></pre>\n\n<p>The first 3 lines grab any DAV-specific method (the read-only ones, for now) and redirect them to the local path of the DAV repo. Because <code>mod_wsgi</code> is only grabbing requests for the <code>/endpoint</code> URI, this request never reaches Flask and goes straight to <code>mod_dav</code>.</p>\n\n<p>The next 4 lines grab any <code>GET</code> requests for specific files and redirect them to the specific location of that file in the local filesystem. Once again, this request doesn't reach Flask. From what I understand, it's faster to have Apache serve the file directly than to have Flask do it.</p>\n\n<p>So the result is that only <code>GET</code> requests for directories in the DAV repo make it to <code>mod_wsgi</code>, so I can build a nice-looking directory index and serve it via Flask.</p>\n"}], "owner": {"reputation": 93, "user_id": 4708935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xSF6w.jpg?s=128&g=1", "display_name": "jrodjpl", "link": "https://stackoverflow.com/users/4708935/jrodjpl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 36800667, "answer_count": 1, "score": 3, "last_activity_date": 1461349558, "creation_date": 1443045339, "last_edit_date": 1443488361, "question_id": 32750166, "link": "https://stackoverflow.com/questions/32750166/is-there-a-way-for-mod-wsgi-flask-and-mod-dav-to-coexist", "title": "Is there a way for mod_wsgi/Flask and mod_dav to coexist?", "body": "<p>I'm working on a website that's basically a file repository for a bunch of data.</p>\n\n<p>I need people to be able to traverse the directories and download files both via WebDAV and their browser (i.e. mod_autoindex).</p>\n\n<p>This works fine using just mod_autoindex and mod_dav. But I wanted to use mod_wsgi/Flask to customize and serve the directory listing pages instead of the fairly inflexible mod_autoindex, using the Flask-AutoIndex plugin.</p>\n\n<p>The problem is that this seems to then interfere with the DAV requests. I get a <code>The URL contains extraneous path components. The resource could not be identified.</code> errors when I try to connect with a DAV client.</p>\n\n<p>Is there a way I can make mod_wsgi ignore all requests with WebDAV-specific headers so that they can be handled correctly by mod_dav?</p>\n\n<p>EDIT:</p>\n\n<p>Here's my Apache config:</p>\n\n<p><code>LoadModule dav_module modules/mod_dav.so\nLoadModule dav_fs_module modules/mod_dav_fs.so\nDavLockDB \"/var/lib/urs_test/dav/DavLock\"\nLoadModule wsgi_module modules/mod_wsgi.so\nWSGIScriptAlias / /urs_test/webdav_info /usr/local/apache2/htdocs/urs_test/app.wsgi\nWSGIDaemonProcess test processes=2 threads=15\nWSGIProcessGroup test</code></p>\n\n<p><code>&lt;Directory /usr/local/apache2/htdocs/urs_test&gt;\nAuthType UrsOAuth2\nrequire valid-user\nDav On\nOptions +ExecCGI\nAddHandler cgi-script .cgi .pl\n&lt;/Directory&gt;</code></p>\n\n<p>ANOTHER EDIT:</p>\n\n<p>So I think I've figured out what's up here. It has to do with the WSGIScriptAlias tag, which is being appended to the request path.</p>\n\n<p>A WebDAV request for <code>/urs_test/files</code> is modified to <code>/usr/local/apache2/htdocs/urs_test/app.wsgi/files</code> by the time it reaches mod_dav.</p>\n\n<p>So I need to figure out a way to selectively apply that alias directive to certain HTTP methods (i.e. PROPFIND) and not to others (i.e. GET).</p>\n"}, {"tags": ["python", "parsing", "python-3.x", "logfile"], "comments": [{"owner": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 0, "creation_date": 1443045765, "post_id": 32750127, "comment_id": 53341070, "body": "I&#39;d start by splitting it up into entries utilizing property 4. eg split at eveyr instance of <code>eventid=\\d+</code>. From there it&#39;s a simple matter of splitting utilizing a regex that matches <code>&lt;key&gt;=&lt;value&gt;,</code> into a dictionary perhaps."}, {"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "reply_to_user": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 0, "creation_date": 1443045977, "post_id": 32750127, "comment_id": 53341136, "body": "I am trying to use property 4 to split the lines on the read but the way I am currently doing it removes the delimiter."}, {"owner": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 0, "creation_date": 1443046004, "post_id": 32750127, "comment_id": 53341144, "body": "Since the delimiter is static, you could always just add it back in. I&#39;m not terribly familiar with Python so I can&#39;t provide a ton of help there, sorry."}, {"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "reply_to_user": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 0, "creation_date": 1443046624, "post_id": 32750127, "comment_id": 53341393, "body": "With speed being an issue I was hoping that there was a cleaner way.  I know how to append the string but the entire correction will involve an if statement (to check if the &#39;eventId&#39; is there or not and then a string concatenation.  Both are slow."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1443047424, "post_id": 32750127, "comment_id": 53341652, "body": "add a snippet of the actual input showing all possibilities"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1443049982, "post_id": 32750127, "comment_id": 53342452, "body": "If the values can contain unescaped and unquoted equals signs, there&#39;s probably no unambiguous way to parse a given line. If the values can contain <code>&quot;\\neventId=#&quot;</code>, you can&#39;t even unambiguously match the lines."}, {"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 0, "creation_date": 1443050359, "post_id": 32750127, "comment_id": 53342565, "body": "I&#39;ve thought of this, while this is possible I am willing to make the assumption that this will not happen in the file, otherwise as you said all hope is lost."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1443051873, "post_id": 32750127, "comment_id": 53342987, "body": "what is the output supposed to be using your sample?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1443052694, "post_id": 32750127, "comment_id": 53343208, "body": "Do the keys in the <code>key=value</code> structure have any well-defined nature? That is, do they only contain letters, or something? E.g, can you tell if <code>&quot;maybe?&quot;</code> is a key (with an empty value) in your example?"}, {"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 0, "creation_date": 1443052824, "post_id": 32750127, "comment_id": 53343246, "body": "I don&#39;t know this for sure but I think keys are only letters and numbers.  I am trying to get a list of valid keys but I don&#39;t have that yet."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1443053601, "post_id": 32750127, "comment_id": 53343426, "body": "Can you add expected output as your description does not add up to what you have added as input"}], "answers": [{"comments": [{"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 0, "creation_date": 1443049635, "post_id": 32750847, "comment_id": 53342361, "body": "IndexError:  list index out of range  I don&#39;t think you are accounting for newlines in the values.  I also don&#39;t think you are taking to account that there can be =, \\n, and &#39;,&#39; in the value fields."}, {"owner": {"reputation": 895, "user_id": 5120411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9BjfU.png?s=128&g=1", "display_name": "Alea Kootz", "link": "https://stackoverflow.com/users/5120411/alea-kootz"}, "reply_to_user": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 0, "creation_date": 1443049793, "post_id": 32750847, "comment_id": 53342402, "body": "Would you show us a few lines of your data? I&#39;m operating under the &#39;sort of csv&#39; assumption here."}, {"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 0, "creation_date": 1443049842, "post_id": 32750847, "comment_id": 53342417, "body": "tried your update:  TypeError: unhashable type: &#39;list&#39;  The file is huge and I am not at liberty of disclosing actual lines (any samples may not contain all cases).  The rules I provided seem to be robust.  I&#39;d have to generate some &#39;fake&#39; data."}, {"owner": {"reputation": 895, "user_id": 5120411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9BjfU.png?s=128&g=1", "display_name": "Alea Kootz", "link": "https://stackoverflow.com/users/5120411/alea-kootz"}, "reply_to_user": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 0, "creation_date": 1443050012, "post_id": 32750847, "comment_id": 53342459, "body": "Well, I&#39;ll look at this after I get home. My answer works for the data you provided in section 3 of your question, I&#39;m willing to try and write some way to handle weird stuff in value fields, but without delimiters, you&#39;re going to need some complex regex&#39;s."}, {"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 0, "creation_date": 1443050385, "post_id": 32750847, "comment_id": 53342569, "body": "added examples of what can happen"}], "tags": [], "owner": {"reputation": 895, "user_id": 5120411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9BjfU.png?s=128&g=1", "display_name": "Alea Kootz", "link": "https://stackoverflow.com/users/5120411/alea-kootz"}, "is_accepted": false, "score": -1, "last_activity_date": 1443049849, "last_edit_date": 1443049849, "creation_date": 1443049285, "answer_id": 32750847, "question_id": 32750127, "link": "https://stackoverflow.com/questions/32750127/parsing-a-large-pseudo-csv-log-file-in-python/32750847#32750847", "title": "Parsing a large pseudo csv log file in Python", "body": "<p>Oh! This is an interesting problem, you'll want to process each line and part of line separately without iterating though the file more than once. </p>\n\n<pre><code>data_dict = {}\nfile_lines = open('file.txt','r').readlines()\nfor line in file_lines:\n    line_list = line.split(',')\n    if len(line_list)&gt;=1:\n        if 'eventId' in line_list[0]:\n            for item in line_list:\n                pair = item.split('=')\n                data_dict.update({pair[0]:pair[1]})\n</code></pre>\n\n<p>That should do it. Enjoy!</p>\n\n<p>If there are spaces in the 'pseudo csv' please change the last line to:</p>\n\n<pre><code>data_dict.update({pair[0].split():pair[1].split()})\n</code></pre>\n\n<p>In order to remove spaces from the strings for your key and value.</p>\n\n<p>p.s. If this answers your question, please click the check mark on the left to record this as an accepted answer. Thanks!</p>\n\n<p>p.p.s. A set of lines from your actual data would be very helpful in writing something to avoid error cases.</p>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1443055355, "last_edit_date": 1443055355, "creation_date": 1443052094, "answer_id": 32751248, "question_id": 32750127, "link": "https://stackoverflow.com/questions/32750127/parsing-a-large-pseudo-csv-log-file-in-python/32751248#32751248", "title": "Parsing a large pseudo csv log file in Python", "body": "<p>If <em>the start of each valid line should begin with eventId=</em> is correct, you can groupby those lines and find valid pairs with a regex:</p>\n\n<pre><code>from itertools import groupby\nimport re\nwith open(\"test.txt\") as f:\n    r = re.compile(\"\\w+=\\w+\")\n    grps = groupby(f, key=lambda x: x.startswith(\"eventId=\"))\n    d = dict(l.split(\"=\")  for k, v in grps if k\n             for l in r.findall(next(v))[1:])\n    print(d)\n    {'key3': 'value3', 'key2': 'value2', 'key1': 'value1', 'goodkey': 'goodvalue'}\n</code></pre>\n\n<p>If you want to keep the eventIds:</p>\n\n<pre><code>import re\nwith open(\"test.txt\") as f:\n    r = re.compile(\"\\w+=\\w+\")\n    grps = groupby(f, key=lambda x: x.startswith(\"eventId=\"))\n    d = list(r.findall(next(v)) for k, v in grps if k)\n    print(d)\n[['eventId=123', 'goodkey=goodvalue', 'key2=somestuff'], ['eventId=1234', 'key1=value1', 'key2=value2', 'key3=value3']]\n</code></pre>\n\n<p>Not clear from your  description exactly what the output should be, if you want all the valids key=value pairs and if <em>the start of each valid line should begin with eventId=</em> is not accurate:</p>\n\n<pre><code>from itertools import groupby,chain\nimport re\ndef parse(fle):\n    with open(fle) as f:\n        r = re.compile(\"\\w+=\\w+\")\n        grps = groupby(f, key=lambda x: x.startswith(\"eventId=\"))\n        for k, v in grps:\n            if k:\n                sub = \"\".join((list(v)) + list(next(grps)[1]))\n                yield from r.findall(sub)\n\nprint(list(parse(\"test.txt\")))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['eventId=123', 'key=value', 'key2=value2', 'anotherkey=anothervalue',   \n'eventId=1234', 'key1=value1', 'key2=value2', 'key3=value3', \n'eventId=12345', 'key=value', 'key21=value']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "edited": false, "score": 1, "creation_date": 1443053209, "post_id": 32751341, "comment_id": 53343335, "body": "Thank you, I&#39;ll give this a go as soon as I get home.  I am in 100% agreement with you about using libraries for I/O.  This nightmare of a file was exported from 3rd party software written by a fortune 500 company who will remain nameless.  As someone fairly new to the workforce I am amazed at the ineptitude of commercial software."}, {"owner": {"reputation": 4072, "user_id": 5246906, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/227935ae79fee841eaea7f6641ebec41?s=128&d=identicon&r=PG&f=1", "display_name": "nigel222", "link": "https://stackoverflow.com/users/5246906/nigel222"}, "edited": false, "score": 0, "creation_date": 1443083360, "post_id": 32751341, "comment_id": 53352882, "body": "Are you sure it&#39;s incompetence? There&#39;s lots extra profit to be made if they can convince a customer that something trivially easy is in fact hard. Sorry, back to tech stuff now."}], "tags": [], "owner": {"reputation": 7952, "user_id": 354144, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4d9bcaff13bb112adcca63a5bd74aaad?s=128&d=identicon&r=PG", "display_name": "Neal Ehardt", "link": "https://stackoverflow.com/users/354144/neal-ehardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1443052948, "creation_date": 1443052948, "answer_id": 32751341, "question_id": 32750127, "link": "https://stackoverflow.com/questions/32750127/parsing-a-large-pseudo-csv-log-file-in-python/32751341#32751341", "title": "Parsing a large pseudo csv log file in Python", "body": "<p>This problem is pretty insane, but here's a solution that seems to work.  Always use an existing library to output formatted data, kids.</p>\n\n<pre><code>import re;\n\nin_string = \"\"\"eventId=123, goodkey=goodvalue, key2=somestuff:\nthis, will, be, a problem,\nmaybe?=,\nanotherkey=anothervalue, gotit=see,\nthe problem===s,\neventId=1234, key1=value1, key2=value2, key3=value3,\neventId=12345, key1=\nmsg= {this is not a valid key value pair}, validkey=validvalue,\"\"\"\n\nline_matches = list(re.finditer(r'(,\\n)?eventId=\\d', in_string))\n\nlines = []\nfor i in range(len(line_matches)):\n    match_start = line_matches[i].start()\n    next_match_start = line_matches[i+1].start() if i &lt; len(line_matches)-1 else len(in_string)-1\n    line = in_string[match_start:next_match_start].lstrip(',\\n')\n    lines.append(line)\n\nlineDicts = []\nfor line in lines:\n    d = {}\n    pad_line = ', '+line\n    matches = list(re.finditer(r', [\\w\\d]+=', pad_line))\n    for i in range(len(matches)):\n        match = matches[i]\n        key = match.group().lstrip(', ').rstrip('=')\n        next_match_start = matches[i+1].start() if i &lt; len(matches)-1 else len(pad_line)\n        value = pad_line[match.end():next_match_start]\n        d[key] = value\n    lineDicts.append(d)\n\nprint lineDicts\n</code></pre>\n\n<p>Outputs <code>[{'eventId': '123', 'key2': 'somestuff:\\nthis, will, be, a problem,\\nmaybe?=,\\nanotherkey=anothervalue', 'goodkey': 'goodvalue', 'gotit': 'see,\\nthe problem===s'}, {'eventId': '1234', 'key2': 'value2', 'key1': 'value1', 'key3': 'value3'}, {'eventId': '12345', 'key1': '\\nmsg= {this is not a valid key value pair}', 'validkey': 'validvalue'}]</code></p>\n"}, {"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 0, "last_activity_date": 1443056895, "creation_date": 1443056895, "answer_id": 32751830, "question_id": 32750127, "link": "https://stackoverflow.com/questions/32750127/parsing-a-large-pseudo-csv-log-file-in-python/32751830#32751830", "title": "Parsing a large pseudo csv log file in Python", "body": "<p>If your values are can really contain anything, there's no unambiguous way of parsing. Any <code>key=value</code> pair could be part of the preceding value. Even a <code>eventID=#</code> pair on a new line could be part of a value from the previous line.</p>\n\n<p>Now, perhaps you can do a \"good enough\" parse on the data despite the ambiguity, if you assume that values will never contain valid looking <code>key=</code> substrings. If you know the possible keys (or at least, what constraints they have, like being alphanumeric), it will be a lot easier to guess at what is a new key and what is just part of the previous value.</p>\n\n<p>Anyway, if we assume that all alphanumeric strings followed by equals signs are indeed keys, we can do a parse with regular expressions. Unfortunately, there's no easy way to do this line by line, nor is there a good way to capture all the key-value pairs in a single scan. However, it's not too hard to scan once to get the log lines (which may have embedded newlines) and then separately get the <code>key=value,</code> pairs for each one.</p>\n\n<pre><code>with open(\"my_log_file\") as infile:\n    text = infile.read()\n\nline_pattern = r'(?S)eventId=\\d+,.*?(?:$|(?=\\neventId=\\d+))'\nkv_pattern = r'(?S)(\\w+)=(.*?),\\s*(?:$|(?=\\w+=))'\nresults = [re.findall(kv_pattern, line) for line in re.findall(line_pattern, text)]\n</code></pre>\n\n<p>I'm assuming that the file is small enough to fit into memory as a string. It would be quite a bit more obnoxious to solve the problem if the file can't all be handled at once.</p>\n\n<p>If we run this regex matching on your example text, we get:</p>\n\n<pre><code>[[('eventId', '123'), ('key', 'value'), ('key2', 'value2:\\nthis, will, be, a problem,\\nmaybe?='), ('anotherkey', 'anothervalue')],\n [('eventId', '1234'), ('key1', 'value1'), ('key2', 'value2'), ('key3', 'value3')],\n [('eventId', '12345'), ('key1', '\\nmsg= {this is not a valid key value pair}'), ('key', 'value'), ('key21', 'value=')]]\n</code></pre>\n\n<p><code>maybe?</code> is not considered a key because of the question mark. <code>msg</code> and the final <code>value</code> are not considered keys because there were no commas separating them from a previous value.</p>\n"}], "owner": {"reputation": 3886, "user_id": 3749393, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20afc19beaf256fa70ebbb40c24df2b6?s=128&d=identicon&r=PG&f=1", "display_name": "deltap", "link": "https://stackoverflow.com/users/3749393/deltap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1443056895, "creation_date": 1443045124, "last_edit_date": 1443050839, "question_id": 32750127, "link": "https://stackoverflow.com/questions/32750127/parsing-a-large-pseudo-csv-log-file-in-python", "title": "Parsing a large pseudo csv log file in Python", "body": "<p>I have several very large not quite csv log files.</p>\n\n<p>Given the following conditions:</p>\n\n<ol>\n<li>value fields have unescaped newlines and commas, almost anything can be in the value field including '='</li>\n<li>each valid line has an unknown number of valid value fields</li>\n<li>valid value looks like <code>key=value</code> such that a valid line looks like <code>key1=value1, key2=value2, key3=value3</code> etc.</li>\n<li>the start of each valid line should begin with <code>eventId=&lt;some number&gt;,</code></li>\n</ol>\n\n<p>What is the best way to read a file, split the file into correct lines and then parse each line into correct key value pairs?</p>\n\n<p>I have tried </p>\n\n<pre><code>file_name = 'file.txt'\nread_file = open(file_name, 'r').read().split(',\\neventId')\n</code></pre>\n\n<p>This correctly parses the first entry but all other entries starts with <code>=#</code> instead of <code>eventId=#</code>.  Is there a way to keep the deliminator and split on the valid newline?</p>\n\n<p>Also, speed is very important.</p>\n\n<p>Example Data:</p>\n\n<pre><code>eventId=123, key=value, key2=value2:\nthis, will, be, a problem,\nmaybe?=,\nanotherkey=anothervalue,\neventId=1234, key1=value1, key2=value2, key3=value3,\neventId=12345, key1=\nmsg= {this is not a valid key value pair}, key=value, key21=value=,\n</code></pre>\n\n<p>Yes the file really is this messy (sometimes) each event here has 3 key value pairs although in reality there is an unknown number of key value pairs in each event.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 4462690, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/55507bc6e2a43531c818be6c241a6ab5?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Philips", "link": "https://stackoverflow.com/users/4462690/thomas-philips"}, "edited": false, "score": 0, "creation_date": 1443045455, "post_id": 32750155, "comment_id": 53340963, "body": "Perfect! Thanks a mill for the quick response"}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 0, "last_activity_date": 1443046212, "last_edit_date": 1443046212, "creation_date": 1443045283, "answer_id": 32750155, "question_id": 32750123, "link": "https://stackoverflow.com/questions/32750123/find-the-row-of-an-index-value-in-a-pandas-dataframe/32750155#32750155", "title": "Find the row of an index value in a Pandas dataframe", "body": "<p>Use <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#selection-by-label\" rel=\"nofollow\"><code>loc</code></a> for label based indexing:</p>\n\n<pre><code>In [3]:\ndf = pd.DataFrame(index = np.arange(1925,2015))\ndf\n\nOut[3]:\nEmpty DataFrame\nColumns: []\nIndex: [1925, 1926, 1927, 1928, 1929, 1930, 1931, 1932, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014]\n\n[90 rows x 0 columns]\n\nIn [5]:\ndf.loc[1946:]\n\nOut[5]:\nEmpty DataFrame\nColumns: []\nIndex: [1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014]\n\n[69 rows x 0 columns]\n</code></pre>\n\n<p>What you tried:</p>\n\n<pre><code>In [6]:\ndf[1946:]\n\nOut[6]:\nEmpty DataFrame\nColumns: []\nIndex: []\n</code></pre>\n\n<p>won't work as this looks for a column named <code>1946</code></p>\n\n<p>So to specifically look for rows after <code>1946</code> you have to use <code>1947</code>, this assumes that <code>1947</code> does exist in your index:</p>\n\n<pre><code>df.loc[1947:]\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 4462690, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/55507bc6e2a43531c818be6c241a6ab5?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Philips", "link": "https://stackoverflow.com/users/4462690/thomas-philips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2704, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443046212, "creation_date": 1443045107, "question_id": 32750123, "link": "https://stackoverflow.com/questions/32750123/find-the-row-of-an-index-value-in-a-pandas-dataframe", "title": "Find the row of an index value in a Pandas dataframe", "body": "<p><p>I import data and index it with the year (first column)\n<br><code>rawData = pandas.read_csv(inFile)</code>\n<br><code>rawData.set_index('Year', inplace=True)</code></p>\n\n<p><p>My data now has two columns, one of years, the other of prices,</p>\n\n<p><br>Year     Price\n<br>1925     100\n<br>1926     105\n<br>1927     125\n<br>.\n<br>.\n<br>2014     1000</p>\n\n<p>i now want to remove all data before a certain year, so i write\n<br><code>startYr = 1946</code>\n<br><code>rawData1 = rawData[startYr:]</code>\n<p>But this does nothing, because 1946 is greater than the largest index (which is 80). What's the right way in which to find the row startIdx that corresponds to 1946, so that i can then write\n<br><code>startIdx = some_function(startYr)</code>\n<br><code>rawData1 = rawData[startIdx:]</code></p>\n\n<p><p>Thanks in advance for your help</p>\n\n<p>Thomas Philips</p>\n"}, {"tags": ["python", "xml", "lxml"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5364306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05623340127c4046d3133e9e95552bb?s=128&d=identicon&r=PG&f=1", "display_name": "rva4", "link": "https://stackoverflow.com/users/5364306/rva4"}, "edited": false, "score": 0, "creation_date": 1443045977, "post_id": 32750090, "comment_id": 53341135, "body": "how will it look like? Should I add this decorator to lxml <code>findall</code> method? But in this case, I change lib&#39;s code that is unacceptable"}], "tags": [], "owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "is_accepted": false, "score": 0, "last_activity_date": 1443044925, "creation_date": 1443044925, "answer_id": 32750090, "question_id": 32749960, "link": "https://stackoverflow.com/questions/32749960/change-default-parameter-for-built-in-class-method/32750090#32750090", "title": "Change default parameter for built-in class method", "body": "<p>Someone correct me if I'm wrong, but I don't think lxml has any concept of a default namespace unfortunately, you're always stuck passing the namespace explicitly. Perhaps write a custom decorator for the <code>findall()</code> method that passes your namespace?</p>\n"}], "owner": {"reputation": 43, "user_id": 5364306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05623340127c4046d3133e9e95552bb?s=128&d=identicon&r=PG&f=1", "display_name": "rva4", "link": "https://stackoverflow.com/users/5364306/rva4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1443044925, "creation_date": 1443044307, "question_id": 32749960, "link": "https://stackoverflow.com/questions/32749960/change-default-parameter-for-built-in-class-method", "title": "Change default parameter for built-in class method", "body": "<p>I'm using <code>lxml</code> in my project. I have an input xml and need to parse it. The problem is that root element has <code>xmlns=\"some_url\"</code>, for example </p>\n\n<pre><code>&lt;root xmlns=\"some_url\"&gt;\n&lt;child&gt;some_text&lt;/child&gt;\n&lt;child&gt;some_text&lt;/child&gt;\n&lt;child&gt;\n&lt;sub_child&gt;text&lt;/sub_child&gt;\n&lt;/child&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>My xml is much more complex, so when I need to find some element, I use:</p>\n\n<pre><code>root.findall(\"nsp:child/nsp:sub_child\", namespaces={\"nsp\":\"some_url\"})\n</code></pre>\n\n<p>So my code is full of <code>find</code> methods with the same <code>namespaces={\"nsp\":\"some_url\"}</code>\nHow can I pass this namespace once as default? I guess that I should inherit from <code>_SimpleElementPath</code> class. But how xml element will know to use this inherited class instead?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 7271, "user_id": 4154185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SGofP.jpg?s=128&g=1", "display_name": "Irshad Bhat", "link": "https://stackoverflow.com/users/4154185/irshad-bhat"}, "is_accepted": false, "score": 3, "last_activity_date": 1443044542, "creation_date": 1443044542, "answer_id": 32750006, "question_id": 32749954, "link": "https://stackoverflow.com/questions/32749954/for-loop-for-a-fourier-series-equation/32750006#32750006", "title": "For Loop for a Fourier Series Equation", "body": "<p>You can use a list comprehension:</p>\n\n<pre><code>n = 10\ny = ao + (1/pi) * sum([np.cos((i+1)*x) for i in range(n)])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": true, "score": 7, "last_activity_date": 1443044628, "creation_date": 1443044628, "answer_id": 32750024, "question_id": 32749954, "link": "https://stackoverflow.com/questions/32749954/for-loop-for-a-fourier-series-equation/32750024#32750024", "title": "For Loop for a Fourier Series Equation", "body": "<p>This is all you need:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nfig = plt.figure()\npi  = np.pi\nn = 10\nx = np.linspace(-pi,pi,100)\ny = (1/(2*pi)) + (1/pi)*(sum(np.cos(i * x) for i in xrange(1, n)))\n\nplt.plot(x,y)\nplt.show()\n</code></pre>\n\n<p>Basically you just have a list comprehension which does the sum for you:</p>\n\n<p><code>sum(np.cos(i * x) for i in xrange(1, n))</code></p>\n"}], "owner": {"reputation": 473, "user_id": 4367994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/add879bb03f3b2b6b0a856814cf73e98?s=128&d=identicon&r=PG&f=1", "display_name": "geeb.24", "link": "https://stackoverflow.com/users/4367994/geeb-24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 32750024, "answer_count": 2, "score": 3, "last_activity_date": 1443044628, "creation_date": 1443044272, "last_edit_date": 1443044453, "question_id": 32749954, "link": "https://stackoverflow.com/questions/32749954/for-loop-for-a-fourier-series-equation", "title": "For Loop for a Fourier Series Equation", "body": "<p>How can I plot the Fourier Series equation below, using a for loop where I can change n, instead of writing out the <code>cos(x) + cos(2x) + cos(3x)</code>, etc.?</p>\n\n<p>My script is below:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nfig = plt.figure()\npi  = np.pi\nx = np.linspace(-pi,pi,100)\nao = (1/(2*pi))\ny = ao + (1/pi)*(np.cos(x)+np.cos(2*x)+np.cos(3*x) + np.cos(4*x)+np.cos(5*x)+np.cos(6*x) + np.cos(7*x) + np.cos(8*x) + np.cos(9*x)+np.cos(10*x))\n\nplt.plot(x,y)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "pip", "macports"], "comments": [{"owner": {"reputation": 68601, "user_id": 315168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbcd3f115ce33ea2380f5a2dae0cf6d2?s=128&d=identicon&r=PG", "display_name": "Mikko Ohtamaa", "link": "https://stackoverflow.com/users/315168/mikko-ohtamaa"}, "edited": false, "score": 0, "creation_date": 1443044246, "post_id": 32749899, "comment_id": 53340479, "body": "This doesn&#39;t help your problem, but is an advice. I would recommend creating virtualenv and then installing py.test with pip, as this is more platform neutral and more community supported way to install packages: <a href=\"https://packaging.python.org/en/latest/installing.html\" rel=\"nofollow noreferrer\">packaging.python.org/en/latest/installing.html</a>"}, {"owner": {"reputation": 73, "user_id": 3401559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6703e1ed2d27dc7912db82c1775e25?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi", "link": "https://stackoverflow.com/users/3401559/kiwi"}, "reply_to_user": {"reputation": 68601, "user_id": 315168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbcd3f115ce33ea2380f5a2dae0cf6d2?s=128&d=identicon&r=PG", "display_name": "Mikko Ohtamaa", "link": "https://stackoverflow.com/users/315168/mikko-ohtamaa"}, "edited": false, "score": 0, "creation_date": 1443044443, "post_id": 32749899, "comment_id": 53340556, "body": "Should I do this for every package? And install all python related packages with pip instead of macports? I already installed pylint."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1443044881, "post_id": 32749899, "comment_id": 53340723, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/28098876/on-mac-os-x-py-test-not-recognized-as-a-command\">on MAC OS X, py.test not recognized as a command</a>"}, {"owner": {"reputation": 73, "user_id": 3401559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6703e1ed2d27dc7912db82c1775e25?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi", "link": "https://stackoverflow.com/users/3401559/kiwi"}, "edited": false, "score": 0, "creation_date": 1443045531, "post_id": 32749899, "comment_id": 53340988, "body": "the file setup.py doesn&#39;t exist on my machine"}, {"owner": {"reputation": 68601, "user_id": 315168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbcd3f115ce33ea2380f5a2dae0cf6d2?s=128&d=identicon&r=PG", "display_name": "Mikko Ohtamaa", "link": "https://stackoverflow.com/users/315168/mikko-ohtamaa"}, "edited": false, "score": 0, "creation_date": 1443045704, "post_id": 32749899, "comment_id": 53341056, "body": "@kiwi: Yes, install everything to a virtualenv (no sudo!) using pip and you get the best error reports if things do not work"}, {"owner": {"reputation": 73, "user_id": 3401559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6703e1ed2d27dc7912db82c1775e25?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi", "link": "https://stackoverflow.com/users/3401559/kiwi"}, "edited": false, "score": 0, "creation_date": 1443048380, "post_id": 32749899, "comment_id": 53341985, "body": "Why no sudo? Virtualenv has the same &#39;command not found&#39; problem. Do I have to change the PATH?"}, {"owner": {"reputation": 73, "user_id": 3401559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6703e1ed2d27dc7912db82c1775e25?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi", "link": "https://stackoverflow.com/users/3401559/kiwi"}, "edited": false, "score": 0, "creation_date": 1443053008, "post_id": 32749899, "comment_id": 53343285, "body": "Oh, the virtualenv.py is there and can be executed from the directory, but as a bash command it doesn&#39;t work"}], "owner": {"reputation": 73, "user_id": 3401559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6703e1ed2d27dc7912db82c1775e25?s=128&d=identicon&r=PG&f=1", "display_name": "Kiwi", "link": "https://stackoverflow.com/users/3401559/kiwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2036, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443044023, "creation_date": 1443044023, "question_id": 32749899, "link": "https://stackoverflow.com/questions/32749899/py-test-command-not-found", "title": "py.test: command not found", "body": "<p>I installed pytest via MacPorts:</p>\n\n<pre><code>sudo port install py34-pytest\n</code></pre>\n\n<p>but it doesn't work:</p>\n\n<pre><code>py.test --version\n-bash: pytest: command not found\n</code></pre>\n\n<p>pip freeze shows it as installed. If I install it via pip instead of ports the same thing happens.</p>\n"}, {"tags": ["python", "django", "django-admin", "manage.py"], "answers": [{"comments": [{"owner": {"reputation": 2942, "user_id": 1936024, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/dEbFR.jpg?s=128&g=1", "display_name": "Kishor Pawar", "link": "https://stackoverflow.com/users/1936024/kishor-pawar"}, "edited": false, "score": 1, "creation_date": 1521092597, "post_id": 32749972, "comment_id": 85587131, "body": "is this the reason, <code>--no-obsolete</code> was introduced?"}], "tags": [], "owner": {"reputation": 15995, "user_id": 1783237, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a608cef53714ed07dfb108efdddba4eb?s=128&d=identicon&r=PG", "display_name": "GwynBleidD", "link": "https://stackoverflow.com/users/1783237/gwynbleidd"}, "is_accepted": false, "score": 3, "last_activity_date": 1443044393, "creation_date": 1443044393, "answer_id": 32749972, "question_id": 32749854, "link": "https://stackoverflow.com/questions/32749854/django-makemessages-decides-to-comment-already-existing-translations/32749972#32749972", "title": "Django makemessages decides to comment already existing translations", "body": "<p>Django will comment-out all messages that are no longer in your code. It won't remove them, so you won't lose it, but that way this messages won't end up in compiled .mo file.</p>\n"}, {"tags": [], "owner": {"reputation": 5888, "user_id": 640916, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WX3vR.png?s=128&g=1", "display_name": "djangonaut", "link": "https://stackoverflow.com/users/640916/djangonaut"}, "is_accepted": false, "score": 2, "last_activity_date": 1453905252, "creation_date": 1453905252, "answer_id": 35040165, "question_id": 32749854, "link": "https://stackoverflow.com/questions/32749854/django-makemessages-decides-to-comment-already-existing-translations/35040165#35040165", "title": "Django makemessages decides to comment already existing translations", "body": "<p>I was facing a similar problem with 3rd party apps. makemessages did not include them in the .po file and when adding them manually makemessages was commenting them out next time.</p>\n\n<p>In my case I had the virtual env symlinked into the project folder. To make makemessages see those 3rd party apps I had to add <code>-s</code></p>\n\n<pre><code>./manage.py makemessages -a -s -l de -i faker -i openid -i gunicorn\n</code></pre>\n\n<p>At the same time I want to exclude some apps from translations with <code>-i</code></p>\n"}], "owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 0, "answer_count": 2, "score": 10, "last_activity_date": 1453905252, "creation_date": 1443043879, "question_id": 32749854, "link": "https://stackoverflow.com/questions/32749854/django-makemessages-decides-to-comment-already-existing-translations", "title": "Django makemessages decides to comment already existing translations", "body": "<p>When I run <code>manage.py makemessages</code> I found some messages which were in the <code>.po</code> file like this:</p>\n\n<pre><code>msgid \"Example\"\nmsgstr \"Example\"\n</code></pre>\n\n<p>Transformed to this, after I ran the command:</p>\n\n<pre><code>#~ msgid \"Example\"\n#~ msgstr \"Example\"\n</code></pre>\n\n<ul>\n<li>What does <code>#~</code> means? Since the translation of those messages doesn't work anymore, I suppose it is a comment.</li>\n<li>What can I do to prevent Django commenting out (or \"<code>#~</code>ing\") pre-existing messages in the translation file?</li>\n</ul>\n"}, {"tags": ["python", "csv", "tsv", "tab-delimited"], "comments": [{"owner": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "edited": false, "score": 0, "creation_date": 1443043461, "post_id": 32749551, "comment_id": 53340123, "body": "@StevenRumbalski Yes. But the csv file has ABC\\tOne in a cell, Two\\t12 in another cell, which is not what I&#39;m trying to write."}], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "edited": false, "score": 0, "creation_date": 1443043554, "post_id": 32749697, "comment_id": 53340172, "body": "Thanks for the reply! It says <code>AttributeError: &#39;_csv.writer&#39; object has no attribute &#39;write&#39;</code>. When I do writer.writerow, it gives ABC\\tOne in a cell, Two\\t12 in another."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "edited": false, "score": 0, "creation_date": 1443044365, "post_id": 32749697, "comment_id": 53340529, "body": "I&#39;m not sure what you mean by &quot;cell&quot; though. Are you perhaps importing into Excel but using a comma-delimited format rather than a tab-delimited one?"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1443044413, "last_edit_date": 1443044413, "creation_date": 1443043253, "answer_id": 32749697, "question_id": 32749551, "link": "https://stackoverflow.com/questions/32749551/python-even-after-specifying-delimiter-csv-writer-delimits-at-wrong-place/32749697#32749697", "title": "Python: Even after specifying delimiter, csv writer delimits at wrong place", "body": "<p>You've set up the CSV writer, but then for some reason you completely ignore it and try to output the lines manually. That's pointless. Use the functionality available. </p>\n\n<pre><code>writer = csv.writer(...)\nfor row in tsv_list:\n    writer.writerow(row)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "edited": false, "score": 0, "creation_date": 1443044262, "post_id": 32749894, "comment_id": 53340486, "body": "Thank you for your response. What can I do if I want a .csv instead of .tsv with tab delimiter?"}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "reply_to_user": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "edited": false, "score": 0, "creation_date": 1443044390, "post_id": 32749894, "comment_id": 53340539, "body": "@pam: don&#39;t set <code>delimiter=&quot;\\t&quot;</code>, which tells it to use a tab as a delimiter. :-)  Note that if you do that, you&#39;ll want to remove your <code>quoting=csv.QUOTE_NONE</code>, because if you want to use commas as delimiters but also have commas in the values, you&#39;ll need to make sure it automatically quotes them so you can split it correctly later."}, {"owner": {"reputation": 1794, "user_id": 1773592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6f0349bd99a58e30ae88b11111696144?s=128&d=identicon&r=PG", "display_name": "schoon", "link": "https://stackoverflow.com/users/1773592/schoon"}, "edited": false, "score": 0, "creation_date": 1560777616, "post_id": 32749894, "comment_id": 99836234, "body": "For some reason <code>delimiter=&quot;\\t&quot;</code> needs the double quotes. Single quotes did not work for me."}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 2, "last_activity_date": 1443044013, "creation_date": 1443044013, "answer_id": 32749894, "question_id": 32749551, "link": "https://stackoverflow.com/questions/32749551/python-even-after-specifying-delimiter-csv-writer-delimits-at-wrong-place/32749894#32749894", "title": "Python: Even after specifying delimiter, csv writer delimits at wrong place", "body": "<p>Using the <code>csv</code> module simply works, so you're going to need to be more specific about what's convincing you that the elements are bleeding across cells.  For example, using the (now quite outdated) Python 2.7:</p>\n\n<pre><code>import csv\n\ndata_lists = [['ABC','One,Two','12'],\n              ['DSE','Five,Two','52']]\n\nwith open(\"out.tsv\", \"wb\") as fp:\n    writer = csv.writer(fp, delimiter=\"\\t\", dialect=\"excel\", lineterminator=\"\\n\")\n    writer.writerows(data_lists)\n</code></pre>\n\n<p>I get an <code>out.tsv</code> file of:</p>\n\n<pre><code>dsm@winter:~/coding$ more out.tsv \nABC One,Two 12\nDSE Five,Two    52\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&gt;&gt;&gt; out = open(\"out.tsv\").readlines()\n&gt;&gt;&gt; for row in out: print repr(row)\n... \n'ABC\\tOne,Two\\t12\\n'\n'DSE\\tFive,Two\\t52\\n'\n</code></pre>\n\n<p>which is exactly as it should be.  Now if you take these rows, which are tab-delimited, and for some reason split them using <em>commas</em> as the delimiter, sure, you'll think that there are two columns, one with <code>ABC\\tOne</code> and one with <code>Two\\t12</code>.  But that would be silly.</p>\n"}], "owner": {"reputation": 925, "user_id": 4717733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b736f039a2454c439f54a40c0dec0c16?s=128&d=identicon&r=PG&f=1", "display_name": "pam", "link": "https://stackoverflow.com/users/4717733/pam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2229, "favorite_count": 0, "accepted_answer_id": 32749894, "answer_count": 2, "score": -2, "last_activity_date": 1443044413, "creation_date": 1443042696, "question_id": 32749551, "link": "https://stackoverflow.com/questions/32749551/python-even-after-specifying-delimiter-csv-writer-delimits-at-wrong-place", "title": "Python: Even after specifying delimiter, csv writer delimits at wrong place", "body": "<p>I'm trying to write lists like this to a CSV file:</p>\n\n<pre><code>['ABC','One,Two','12']\n['DSE','Five,Two','52']\n</code></pre>\n\n<p>To a file like this:</p>\n\n<pre><code>ABC   One,Two   12\nDSE   Five,Two   52\n</code></pre>\n\n<p>Basically, write anything inside '' to a cell. \nHowever, it is splitting One and Two into different cells and merging ABC with One in the first cell. </p>\n\n<p>Part of my script:</p>\n\n<pre><code>out_file_handle = open(output_path, \"ab\")\nwriter = csv.writer(out_file_handle, delimiter = \"\\t\", dialect='excel', lineterminator='\\n', quoting=csv.QUOTE_NONE)    \noutput_final = (tsv_name_list.split(\".\")[0]+\"\\t\"+key + \"\\t\" + str(listOfThings))\noutput_final = str([output_final]).replace(\"[\",\"\").replace(\"]\",\"\").replace('\"',\"\").replace(\"'\",\"\")\noutput_final = output_final.split(\"\\\\t\")\nprint output_final #gives the first lists of strings I mentioned above.\nwriter.writerow(output_final)\n</code></pre>\n\n<p>First output_final line gives</p>\n\n<pre><code>ABC  One,Two  12\nDSE  Five,Two  52\n</code></pre>\n"}, {"tags": ["jquery", "python", "django"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1443042750, "post_id": 32749436, "comment_id": 53339784, "body": "Why not use another data structure to extract those values from the 2d array in your views.py before passing it to the template? In this case, you might not even need any javascript code."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1443042762, "post_id": 32749436, "comment_id": 53339790, "body": "I&#39;m not sure what the point of the JS is here. You&#39;re not don&#39;t anything dynamic; why not output the fields directly in the template code?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1443042909, "post_id": 32749436, "comment_id": 53339873, "body": "Plus, you seem to have completely misunderstood when template code is evaluated. There is <b>no possible way</b> for JS code to dynamically evaluate a template variable."}], "answers": [{"tags": [], "owner": {"reputation": 1039, "user_id": 3331710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ac11afd2d57b9cb28e2a15cdfaf5d3?s=128&d=identicon&r=PG&f=1", "display_name": "mark922", "link": "https://stackoverflow.com/users/3331710/mark922"}, "is_accepted": true, "score": 0, "last_activity_date": 1443072256, "creation_date": 1443072256, "answer_id": 32753934, "question_id": 32749436, "link": "https://stackoverflow.com/questions/32749436/how-can-i-use-2d-array-in-djangos-template-in-jquery/32753934#32753934", "title": "How can I use 2d array in Django&#39;s template in jQuery?", "body": "<p>That's very true that I don't need to use jQuery here. It can be easily implemented by {% for loop %} {% endfor %} in Django. Thanks for your comments.</p>\n\n<pre><code>{% for p in pre %}&lt;input name=\"main_address_{{forloop.counter}}\" value=\"{{p.2}}\" type=\"text\" required=\"\"&gt;{% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 1039, "user_id": 3331710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ac11afd2d57b9cb28e2a15cdfaf5d3?s=128&d=identicon&r=PG&f=1", "display_name": "mark922", "link": "https://stackoverflow.com/users/3331710/mark922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 32753934, "answer_count": 1, "score": 0, "last_activity_date": 1443072256, "creation_date": 1443042194, "question_id": 32749436, "link": "https://stackoverflow.com/questions/32749436/how-can-i-use-2d-array-in-djangos-template-in-jquery", "title": "How can I use 2d array in Django&#39;s template in jQuery?", "body": "<p>I have a 2d array named \"pre\" in views.py . I have passed the same array in the template.html . I want to use the values of second column of each row of pre array as initial value for text boxes. Script is shown below. </p>\n\n<p>Variable i.toString() is working fine with name of input tag but in values it is not working. \nI want the value of {{pre.0.2}} as values of 1st textbox,{{ pre.1.2}} as value of second one and so on. How can I achieve that ?</p>\n\n<pre><code>&lt;script&gt;\n    $(document).ready(function() {\n        var max_fields = 10; //maximum input boxes allowed\n        var wrapper = $(\".input_fields_wrap\"); //Fields wrapper\n        var add_button = $(\".add_field_button\"); //Add button ID\n\n        var x = {{branches}}; //initlal text box count\n\n        for (var i = 1; i &lt;= x; i++) {\n\n            if(x &lt; max_fields){ //max input box allowed\n\n                $(wrapper).append('&lt;input name=\"main_address_'+i.toString()+'\" value=\"{{pre.'+i.toString()+'.2}}\" type=\"text\" required=\"\"&gt;&lt;br&gt;'); //add input box   \n            }\n\n        }\n&lt;/script&gt;\n</code></pre>\n\n<p>If you have any other way to achieve the same result please share it with me. </p>\n"}, {"tags": ["python", "user-input", "morse-code"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 5, "creation_date": 1443042449, "post_id": 32749428, "comment_id": 53339627, "body": "<code>return all(char in {&#39;.&#39;, &#39;-&#39;, &#39; &#39;} for char in message)</code>?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1443042719, "post_id": 32749428, "comment_id": 53339771, "body": "@jonrsharpe - why a list and not a string? <code>all(char in &#39;.- &#39; for char in message)</code>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1443042977, "post_id": 32749428, "comment_id": 53339900, "body": "@Rob\u1d69 it&#39;s not a list, it&#39;s a set, so lookup is <code>O(1)</code> instead of <code>O(n)</code>"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1443043036, "post_id": 32749428, "comment_id": 53339928, "body": "Thanks. Old eyes mistook the curly braces for square braces."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1443043376, "post_id": 32749428, "comment_id": 53340085, "body": "@Brandon Skerritt Just to be sure: are you really checking only for a single Morse code symbol? (I&#39;m asking because you left out the space char)"}, {"owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1443068783, "post_id": 32749428, "comment_id": 53346818, "body": "&quot;<i>checks to see if an inputted string is morse code</i>&quot; - Excuse me, I&#39;d just like to interject for a moment; Morse is a code where the long signals have three times the duration of the short signals, and your dits and dahs take the same number of bytes and same screen width as each other blah blah blah etc. etc. By the way, if it matters, you have a bug in your code with <code>elif &quot;....&quot;:</code> which should probably say <code>elif &quot;....&quot; in message:</code>. Just testing <code>if &quot;astring&quot;</code> will always be True. Strings with content test as True, empty strings test as False."}], "answers": [{"comments": [{"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1443042656, "post_id": 32749482, "comment_id": 53339745, "body": "What about the space char?"}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1443042702, "post_id": 32749482, "comment_id": 53339762, "body": "I don&#39;t think space character is allowed."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1443043605, "post_id": 32749482, "comment_id": 53340193, "body": "Maybe it is like this. Then it would probably be better to name the funnction after it, for example <code>is_morse_letter</code> or <code>is_morse_symbol</code>..."}], "tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": 0, "last_activity_date": 1443042384, "creation_date": 1443042384, "answer_id": 32749482, "question_id": 32749428, "link": "https://stackoverflow.com/questions/32749428/if-string-only-contains-or/32749482#32749482", "title": "If String ONLY contains &quot;-&quot; or &quot;.&quot;", "body": "<p>Just use a simple regular expression -</p>\n\n<pre><code>import re\n\ndef is_morse(message):\n    return True if bool(re.match(r'^[.-]+$', message)) else False\n</code></pre>\n\n<p>This would be probably faster too, than iterating over the each character in message.</p>\n"}, {"comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1443042637, "post_id": 32749489, "comment_id": 53339732, "body": "FYI: a solution based on <code>all()</code> would be much more readable than my solution. I just couldn&#39;t remember how to spell <code>all()</code> :)"}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 3, "last_activity_date": 1443042423, "creation_date": 1443042423, "answer_id": 32749489, "question_id": 32749428, "link": "https://stackoverflow.com/questions/32749428/if-string-only-contains-or/32749489#32749489", "title": "If String ONLY contains &quot;-&quot; or &quot;.&quot;", "body": "<p>You can use <code>any()</code>:</p>\n\n<pre><code>def is_morse(message):\n    return bool(message) and not any(ch not in '.- ' for ch in message)\n</code></pre>\n\n<p>The <code>bool(message)</code> bit also rejects zero-length messages.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443043139, "post_id": 32749490, "comment_id": 53339974, "body": "You need a <code>^</code> anchor at the beginning of the regexp."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1443043206, "post_id": 32749490, "comment_id": 53340013, "body": "<code>match</code> applies the regex to the beginning of the string; <code>search</code> would require the <code>^</code>."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1443046590, "post_id": 32749490, "comment_id": 53341373, "body": "You can use <code>&#39;-.&#39;</code> instead of <code>[&#39;-&#39;, &#39;.&#39;]</code>."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 3, "last_activity_date": 1443042430, "creation_date": 1443042430, "answer_id": 32749490, "question_id": 32749428, "link": "https://stackoverflow.com/questions/32749428/if-string-only-contains-or/32749490#32749490", "title": "If String ONLY contains &quot;-&quot; or &quot;.&quot;", "body": "<p>Check if each element of <code>message</code> is in the proper alphabet:</p>\n\n<pre><code>if all(c in ['-', '.'] for c in message):\n</code></pre>\n\n<p>or reduce the message to a set:</p>\n\n<pre><code>if set(message) &lt;= set(['.', '-'])\n</code></pre>\n\n<p>or use a regular expression:</p>\n\n<pre><code>if re.match('[-.]*$', message):\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1443042515, "post_id": 32749492, "comment_id": 53339659, "body": "That&#39;s a generator passed as an argument to <code>all</code>, not a list comprehension."}], "tags": [], "owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "is_accepted": false, "score": 0, "last_activity_date": 1443042432, "creation_date": 1443042432, "answer_id": 32749492, "question_id": 32749428, "link": "https://stackoverflow.com/questions/32749428/if-string-only-contains-or/32749492#32749492", "title": "If String ONLY contains &quot;-&quot; or &quot;.&quot;", "body": "<p>I guess most Pythonic would be to use a list comprehension here. This checks if a string consist purely out of - and . characters:</p>\n\n<pre><code>s = '---...---'\nismorse = all(c in ('-','.') for c in s)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1443043266, "post_id": 32749498, "comment_id": 53340040, "body": "This is just a reimplementation of <code>all</code>."}], "tags": [], "owner": {"reputation": 126, "user_id": 1325678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c68acb967b65058656ba7e932ec2ff8?s=128&d=identicon&r=PG", "display_name": "Jonathan Clede", "link": "https://stackoverflow.com/users/1325678/jonathan-clede"}, "is_accepted": false, "score": 0, "last_activity_date": 1443042472, "creation_date": 1443042472, "answer_id": 32749498, "question_id": 32749428, "link": "https://stackoverflow.com/questions/32749428/if-string-only-contains-or/32749498#32749498", "title": "If String ONLY contains &quot;-&quot; or &quot;.&quot;", "body": "<p>Would this meet your needs?</p>\n\n<pre><code>for char in message:\n    if char not in '.-':\n        return False\nreturn True\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443044791, "post_id": 32749622, "comment_id": 53340695, "body": "why is the space character included?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443045126, "post_id": 32749622, "comment_id": 53340825, "body": "@J.F.Sebastian, if the OP plans on parsing it back into english in a straightforward manner then the spaces are necessary"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443045654, "post_id": 32749622, "comment_id": 53341037, "body": "why <i>only</i> space then? If you want to combine tokenizing the input into letters and validation of individual letters then at least standard space should be allowed i.e., <code>letters = message.split()</code> and <code>is_morse = all(map(morse.__contains__, letters))</code>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443045716, "post_id": 32749622, "comment_id": 53341060, "body": "@J.F.Sebastian, how would you separate words if you <code>message.split()</code>?"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443045947, "post_id": 32749622, "comment_id": 53341122, "body": "there are many characters. Why do you need to separate words to check whether all letters are valid? The question of text segmentation at the level larger than a letter is off topic for the question (otherwise specify how would you encode punctuation, Unicode characters, extract sentences, paragraphs, etc)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443046329, "post_id": 32749622, "comment_id": 53341284, "body": "@J.F.Sebastian, I mean when joining , splitting on <code>&quot; &quot;</code> will keep spaces between words when using single spaces between letters and two or more between words. Just splitting msg will make the output <code>HELLOWORLD</code> as opposed to <code>HELLO WORLD</code>, the OP is free to choose whatever they like as a delimiter between words, I used  spaces as that was what I used originally"}, {"owner": {"reputation": 310, "user_id": 4483879, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8949fbfe1e61a0fd2d7d29e66ce95b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Skerritt", "link": "https://stackoverflow.com/users/4483879/brandon-skerritt"}, "edited": false, "score": 0, "creation_date": 1443119020, "post_id": 32749622, "comment_id": 53375797, "body": "Thanks! I got this implemented with the DetectEnglish module, if a string contains &quot;.- &quot; then try to convert it into Morse Code and use the detect english module to see if it translate to english, it errors when trying to convert to morse code though, so i guess i&#39;ll have to do some try excepts! thanks for your help!"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1443119554, "post_id": 32749622, "comment_id": 53376082, "body": "No worries, the translating in the answer is at a very basic level, I just added it to show that having the allowed characters does not make the message valid."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 8, "last_activity_date": 1443046545, "last_edit_date": 1443046545, "creation_date": 1443042932, "answer_id": 32749622, "question_id": 32749428, "link": "https://stackoverflow.com/questions/32749428/if-string-only-contains-or/32749622#32749622", "title": "If String ONLY contains &quot;-&quot; or &quot;.&quot;", "body": "<pre><code>def is_morse(message):\n    allowed = {\".\", \"-\", \" \"}\n    return allowed.issuperset(message)\n</code></pre>\n\n<p>But because the message has all the characters does not mean it is valid. You would need to check if each is valid which you can do using a dict mapping letters to morse, you also need to have some format which is unambiguous i.e a space between letters and 2 or more spaces between words:</p>\n\n<pre><code>morse = {'---': 'O', '--.': 'G', '-...': 'B', '-..-': 'X', '.-.': 'R', '--.-': 'Q',\n         '--..': 'Z', '.--': 'W', '..---': '2', '.-': 'A', '..': 'I', '-.-.': 'C',\n         '..-.': 'F', '-.--': 'Y', '-': 'T', '.': 'E', '.-..': 'L', '...': 'S',\n         '..-': 'U', '.----': '1', '-----': '0', '-.-': 'K', '-..': 'D', '----.':\n             '9', '-....': '6', '.---': 'J', '.--.': 'P', '....-': '4', '--': 'M',\n         '-.': 'N', '....': 'H', '---..': '8', '...-': 'V', '--...': '7', '.....':\n        '5', '...--': '3',\"\":\" \"}\n\n\nmsg = \".... . .-.. .-.. -----  .-- --- .-. .-.. -..\"\n\ndef is_morse(message):\n    spl = message.split(\" \")\n    return  all(m in morse for m in spl)\n\nif is_morse(msg):\n    print(\"\".join([morse[ch] for ch in msg.split(\" \")]))\n</code></pre>\n\n<p>It is possible to parse it as a single string getting all variations, it just take a lot more work.</p>\n\n<p>If you want to go the other way then you just reverse the mappings:</p>\n\n<pre><code>to_morse = {v: k for k, v in morse.items()}\n\ndef can_morse(msg):\n    return all(ch in to_morse for ch in msg.upper())\n\n\nmsg = \"Hello  World\"\nif can_morse(msg):\n    print(\" \".join([to_morse[ch] for ch in msg.upper()]))\n</code></pre>\n\n<p>I choose extra spaces to delimit the words, you can choose whatever you like just make sure to add the characters to the dict mapping then to a space or whatever you want the words delimited by.</p>\n"}], "owner": {"reputation": 310, "user_id": 4483879, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8949fbfe1e61a0fd2d7d29e66ce95b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Skerritt", "link": "https://stackoverflow.com/users/4483879/brandon-skerritt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 32749622, "answer_count": 6, "score": -1, "last_activity_date": 1443046545, "creation_date": 1443042167, "last_edit_date": 1443043076, "question_id": 32749428, "link": "https://stackoverflow.com/questions/32749428/if-string-only-contains-or", "title": "If String ONLY contains &quot;-&quot; or &quot;.&quot;", "body": "<p>I'm writing a small function which checks to see if an inputted string is morse code.\nThe function should do something like \n\"If \"-\" or \".\" only in Inputted_string: \"\nBut i can't seem to find a way to do the only bit on Python3.\nThe current way i have this implemented is <strong>very</strong> messy and not very Pythonic</p>\n\n<pre><code>if \"-\" in message:\n    # message might be morse code so check even more\n        if \".\" in message:\n            # Message IS morse code so return true\n            return True\n        else:\n            # TODO you can use a REGEX for the below things\n            if '--' in message:\n                # if the messsage contains only hyphens, then check to see if\n                # message contans hyphen only morse code by checking all hyphen\n                # only morse code against message\n                return True\n            elif '-----' in message:\n                # if message contains 0 in morse code, return True\n                return True\n    if \".\" in message:\n        # message might contain morse code\n        if \"-\" in message:\n            # message IS morse code.\n            return True\n        else:\n            # check to see if message is dots only morse code\n            # TODO you can use a REGEX for the below things\n            if \"..\" in message:\n                # message IS Morse Code\n                return True\n            elif \"...\" in message:\n                # message IS Morse Code\n                return True\n            elif \"....\":\n            # message IS Morse Code\n                return True\n        # if dots or dash not in message, return none\n        return(\"Message has no hyphens or full stops\")\n</code></pre>\n\n<p>the formatting is slightly off when i pasted, but that's the general gist. \nWhen it checks to see if message is \"----\" or \"..\" etc, this is because some morse code letters are only those charecters, but i'm sure there's a much easier way to go around this!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 10, "creation_date": 1443042288, "post_id": 32749423, "comment_id": 53339556, "body": "There is nothing slow about this code; the only thing that is slow is the user entering input."}, {"owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "edited": false, "score": 1, "creation_date": 1443043149, "post_id": 32749423, "comment_id": 53339979, "body": "If you&#39;re using an online interpreter or something like that, it can be painfully slow as it takes forever to import some modules."}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 1, "creation_date": 1443043209, "post_id": 32749423, "comment_id": 53340017, "body": "What do you have in mind as a bar for <b>not slow</b>. How fast can you type?"}, {"owner": {"reputation": 2617, "user_id": 5119090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965fcf1032f06744e4452531fcddd607?s=128&d=identicon&r=PG", "display_name": "Fernando Matsumoto", "link": "https://stackoverflow.com/users/5119090/fernando-matsumoto"}, "edited": false, "score": 4, "creation_date": 1443043312, "post_id": 32749423, "comment_id": 53340066, "body": "Long code does not imply slow code (on your title)."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1443045151, "post_id": 32749423, "comment_id": 53340836, "body": "@MartijnPieters: it may be slow if the answers are provided by another program. Though given <code>num1</code>, <code>num2</code> range, even brute-force would be instantaneous here. If we were to increase the range significantly then performance issues might arise e.g., <a href=\"http://stackoverflow.com/a/28480239/4279\"><code>str(long)</code> is quadratic in CPython</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "is_accepted": false, "score": 2, "last_activity_date": 1443074586, "last_edit_date": 1495542752, "creation_date": 1443074238, "answer_id": 32754328, "question_id": 32749423, "link": "https://stackoverflow.com/questions/32749423/how-can-i-make-this-code-shorter-in-python-it-runs-really-slow/32754328#32754328", "title": "How can I make this code shorter in python? (it runs really slow)", "body": "<p>Trying to fit the spirit of your question, and to flesh out the comments saying it's unnecesary (it is), I nerfed your script so it always reads '20' from the user (which is sometimes correct) and just builds the output strings but doesn't print them, so I could run it through the <code>timeit</code> module.</p>\n\n<p>Start: 20,000 runs in ~1.47 seconds.</p>\n\n<ul>\n<li><code>from random import choice, randint</code> to make them local names for faster lookup, same with <code>re.match</code>, improvement ~0.04 seconds over the 20,000 runs. </li>\n<li>Move the ops list creation outside the loop, ~0.03s</li>\n<li>Changing the regex to match \"[^0-9-]\" instead, ~0.07s</li>\n<li>Not computing str(product) twice, ~0.01s</li>\n<li>Changing the nested while condition to <code>while not userans.isdigit():</code>, which is probably good enough for positive whole number answers, ~0.31s\n\n<ul>\n<li>Whoops subtraction might mean negative answers, so that isn't quite right. Could replace <a href=\"https://stackoverflow.com/a/32453110/478656\">with this</a> but it's fine for now - not invoking regexes is the biggest step performance gain.</li>\n</ul></li>\n<li>Calculate the product before asking the user for their input, so there's less work going on between reading their input and knowing the answer, ~unknown, might shorten the give answer-get response gap.</li>\n<li>Tweak the way the calculations are done and checked, a touch slower, but less code repetition so it's shorter, as asked, but it's also uglier and harder to read.</li>\n</ul>\n\n<p>Finish: 20,000 runs in ~0.996 seconds.</p>\n\n<p><strong>Result: 1/3rd faster!</strong> Hooray! If my version is 100%, yours is 150%. If my version is harder to read, well so be it.</p>\n\n<pre><code>from random import randint, choice\nfrom re import match\n\nscore = 0\ni = 1\nops = [\"-\",\"+\",\"*\"]\nops2 = {\"-\":sub,\"+\":add,\"*\":mul}\n\nwhile i &lt; 11:\n    num1, num2, operation, userans = randint(1,4),randint(5,12),choice(ops),\"\",\n    q = (str(num1) + operation + str(num2) + \":   \")\n\n    product = str(ops2[operation](num1, num2))\n\n    while not userans.isdigit():\n     userans = input(q)\n\n    if userans == product:\n        print(\"you are correct!\")\n        score = score + 1\n    else:\n        print(\"You are incorrect! The correct answer was \" + product)\n\n    print(\"Your score is \" + str(score))\n    i=i+1\n</code></pre>\n\n<p>but</p>\n\n<p>we're talking 0.5 seconds faster over 20,000 runs. 0.000025 seconds per 10 question run. 0.0000025 seconds faster per question/answer. </p>\n\n<p>With random numbers involved, this is pretty much measurement noise. This tiny amounts of change could be significantly affected by different versions of the Python runtime doing slightly different things internally.</p>\n\n<p>2.5 micro seconds, is it? <a href=\"https://cogsci.stackexchange.com/questions/1664/what-is-the-threshold-where-actions-are-perceived-as-instant\">Oft quoted figures</a> say humans feel things are \"instant\" at around 10-100 milliseconds. </p>\n\n<p>Your code is already way way way fast enough not cause it to feel laggy.</p>\n\n<p>If it feels laggy, it's probably a network involved - running the code on a remote computer over SSH or Remote Desktop, or over the internet in a web browser. Or it's a broken terminal client or web based terminal which struggles with basic text input/output.</p>\n\n<p>Instead, fix it a bit for readability - like counting from 1 to less-than-11 as a way to loop ten times. Change the \"*\" to \"+\" in the regex and lose the \"userans = \"\"\" check, cut out some of the str() going on, don't call it \"product\" when it could be a sum or a difference.</p>\n\n<pre><code>from random import randint, choice\nimport re\n\nscore = 0\noperations = [\"-\", \"+\", \"*\"]\n\nfor turn in range(10):\n\n    num1 = randint(1,4)\n    num2 = randint(5,12)\n    operation = choice(operations)\n    q = \"{0} {1} {2}:  \".format(num1, operation, num2)\n\n    userans = \"\"\n    while not re.match('^[0-9-]+$', userans):\n        userans = input(q)\n\n    if operation == '+':\n        result = num1 + num2 \n    elif operation == '-':\n        result = num1 - num2\n    elif operation == '*':\n        result = num1 * num2\n\n    result = str(result)\n\n\n    if result == userans:\n        print (\"you are correct!\")\n        score = score + 1\n    else:\n        print(\"You are incorrect! The correct answer was \" + product)\n\n    print (\"Your score is \" + str(score))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5369573, "user_type": "registered", "profile_image": "https://graph.facebook.com/652466101523835/picture?type=large", "display_name": "AnonyAnony", "link": "https://stackoverflow.com/users/5369573/anonyanony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1443074586, "creation_date": 1443042148, "question_id": 32749423, "link": "https://stackoverflow.com/questions/32749423/how-can-i-make-this-code-shorter-in-python-it-runs-really-slow", "title": "How can I make this code shorter in python? (it runs really slow)", "body": "<pre><code>import random, re\nscore = 0\ni = 1\nwhile i &lt; 11:\n    ops = [\"-\",\"+\",\"*\"]\n    num1, num2, operation, userans = random.randint(1,4),random.randint(5,12),random.choice(ops),\"\",\n    q = (str(num1) + operation + str(num2) + \":   \")\n    while userans == \"\" or not re.match(r'^[0-9-]*$', userans):\n     userans = input(q)\n\n    if operation == '+':\n        product = num1+num2 \n    elif operation == '-':\n        product = num1-num2\n    elif operation == '*':\n        product = num1*num2\n\n    if str(product) == userans:\n        print (\"you are correct!\")\n        score = score + 1\n    else:\n        print(\"You are incorrect! The correct answer was \" + str(product))\n\n    print (\"Your score is \" + str(score))\n    i=i+1\n</code></pre>\n\n<p>This is the code I have but I need it to be less laggy. Also the program is a random question generator</p>\n"}, {"tags": ["python", "gis", "lidar", "liblas"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1443077128, "post_id": 32749399, "comment_id": 53349709, "body": "Fun thing about Python: <code>if ax &gt; xmin and ax &lt; xmax and ay &lt; ymax and ay &gt; ymin</code> is probably clearer written as <code>if xmin &lt; ax &lt; xmax and ymin &lt; ay &lt; ymax</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1443077202, "post_id": 32749399, "comment_id": 53349740, "body": "Can you show the complete traceback, instead of just a one-liner? In particular, which function call is causing the ArgumentError? Because then you can look up what type of argument the function expects, and use the correct argument instead."}, {"owner": {"reputation": 213, "user_id": 732529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df162d2fbaf76110474da705dc544fd5?s=128&d=identicon&r=PG", "display_name": "Pete Gadomski", "link": "https://stackoverflow.com/users/732529/pete-gadomski"}, "edited": false, "score": 0, "creation_date": 1443103361, "post_id": 32749399, "comment_id": 53365838, "body": "When you iterative over the points in a file (<code>for point in inFile3.points</code>), that point is then available in the <code>point</code> variable. Instead of then using indices (<code>n</code>, <code>t</code>), you could just compare the coordinate values of those <code>point</code> variables themselves. This would eliminate the possibility of <code>IndexErrors</code> in that area."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1443134398, "post_id": 32749399, "comment_id": 53383158, "body": "You&#39;ll have to look up 1/ what the types are of newx, newy and newz, and 2/ what input types liblas.point.Point takes as argument. If you solve that, you can get rid of the ArgumentError."}, {"owner": {"reputation": 209, "user_id": 5361462, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bde86d102adc0ff0847255f16ecb7a38?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/5361462/gary"}, "edited": false, "score": 0, "creation_date": 1443496995, "post_id": 32749399, "comment_id": 53505846, "body": "For the argument, error it turned out that in the inFile3.points I only have 415 points. So there is an error in the code where it tries to run the loop one more time when it should not"}], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 5361462, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bde86d102adc0ff0847255f16ecb7a38?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/5361462/gary"}, "is_accepted": false, "score": 1, "last_activity_date": 1443575301, "creation_date": 1443575301, "answer_id": 32856189, "question_id": 32749399, "link": "https://stackoverflow.com/questions/32749399/save-las-points-into-a-las-file-argument-error-and-indexerror/32856189#32856189", "title": "Save Las points into a las file: argument error and indexerror", "body": "<p>So here is what I got so far:</p>\n\n<p>For the first problem I simply left out the liblas module and used the laspy for saving the created new file.</p>\n\n<p>For the second problem I replaced the </p>\n\n<pre><code>for points in inFile3.points:\n</code></pre>\n\n<p>with</p>\n\n<pre><code> while t &lt; 415:\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 5361462, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bde86d102adc0ff0847255f16ecb7a38?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/5361462/gary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1443575301, "creation_date": 1443042078, "last_edit_date": 1443075835, "question_id": 32749399, "link": "https://stackoverflow.com/questions/32749399/save-las-points-into-a-las-file-argument-error-and-indexerror", "title": "Save Las points into a las file: argument error and indexerror", "body": "<p>I have this little code for manipulating lidar points in a Las file. The goal is to take 1 point from file 1 and look for the closest point in the file 2. Then create a new point which using the coordinates of the points and then save it. I encountered 2 problem so far, which are explained below:</p>\n\n<pre><code>import laspy\nimport laspy.file\nimport liblas\nfrom liblas import header\nh = header.Header()\n\ninFile2 = laspy.file.File(\"C:\\\\Users\\\\Geri\\\\Desktop\\\\Sync\\\\Sync\\\\pythonlas\\\\mapperclip\\\\2clip.las\", mode = \"r\")\ninFile3 = laspy.file.File(\"C:\\\\Users\\\\Geri\\\\Desktop\\\\Sync\\\\Sync\\\\pythonlas\\\\mapperclip\\\\3clip.las\", mode = \"r\")\npoint_records = inFile2.points\npoint_records = inFile3.points\n\nt=0\nfor points in inFile3.points:\n    z=0\n    q=0\n    p=0.1\n    while z==0:\n\n        xmin=inFile3.x[t]-p\n        ymin=inFile3.y[t]-p\n        xmax=inFile3.x[t]+p\n        ymax=inFile3.y[t]+p\n        n=0\n        for points in inFile2.points:\n            ax=inFile2.x[n]\n            ay=inFile2.y[n]\n            if ax &gt; xmin and ax &lt; xmax and ay &lt; ymax and ay &gt; ymin:          \n                                f = liblas.file.File(\"C:\\\\Users\\\\Geri\\\\Desktop\\\\Sync\\\\Sync\\\\pythonlas\\\\mapperclip\\\\proba.las\",mode='w', header= h)\n                                newx = inFile3.x[t]-((inFile3.x[t]-inFile2.x[n])/2)\n                                newy = inFile3.y[t]-((inFile3.y[t]-inFile2.y[n])/2)\n                                newz = inFile3.z[t]-((inFile3.z[t]-inFile2.z[n])/2)\n                                pt = liblas.point.Point(newx, newy, newz)\n</code></pre>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<p>The problem is here after this line. I want to save the newx,y,z as the X Y coordinates and z value for the new points in a new las file.</p>\n\n<p>Getting the following error:</p>\n\n<blockquote>\n  <p>ctypes.Argumenterror: argument 1: : wrong\n  type</p>\n</blockquote>\n\n<pre><code>                                f.write(pt)\n                                f.close()\n                                print t\n                                print newx\n                                print newy\n                                print newz\n                                print inFile2.y[n]\n                                print inFile2.z[n]                                \n                                print inFile3.z[t]\n                                n+=1\n                                q+=1\n                                t+=1\n            else:\n                n+=1\n        if q&gt;0:            \n            z+=1\n        else:\n            p+=0.1\n</code></pre>\n\n<p>When I take out the attempt to write the file from the code then I got the following: (the script runs 415 times succesfully)</p>\n\n<pre><code>Traceback (most recent call last):\n   File \"........\n       newx = inFile3.x[t]-((inFile3.x[t]-inFile2.x[n])/2)\n</code></pre>\n\n<p>IndexError: index 416 is out of bounds for axis 0 with size 416</p>\n"}, {"tags": ["python", "file", "if-statement"], "answers": [{"comments": [{"owner": {"reputation": 2453, "user_id": 7287271, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh6.googleusercontent.com/-lIchAiYNFGA/AAAAAAAAAAI/AAAAAAAABZQ/iI3fowVrwIM/photo.jpg?sz=128", "display_name": "Carl Thom&#233;", "link": "https://stackoverflow.com/users/7287271/carl-thom%c3%a9"}, "edited": false, "score": 1, "creation_date": 1511176004, "post_id": 32749410, "comment_id": 81733973, "body": "Won&#39;t this leave the file stream open?"}, {"owner": {"reputation": 137, "user_id": 8493023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j6xDQ.jpg?s=128&g=1", "display_name": "SrgSprinkles", "link": "https://stackoverflow.com/users/8493023/srgsprinkles"}, "edited": false, "score": 1, "creation_date": 1555257590, "post_id": 32749410, "comment_id": 98039400, "body": "This method didn&#39;t work for me :("}, {"owner": {"reputation": 483, "user_id": 494294, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/81a5de0c79671967d9f2e7a2209748fc?s=128&d=identicon&r=PG", "display_name": "MGoBlue93", "link": "https://stackoverflow.com/users/494294/mgoblue93"}, "reply_to_user": {"reputation": 137, "user_id": 8493023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j6xDQ.jpg?s=128&g=1", "display_name": "SrgSprinkles", "link": "https://stackoverflow.com/users/8493023/srgsprinkles"}, "edited": false, "score": 1, "creation_date": 1596342968, "post_id": 32749410, "comment_id": 111778851, "body": "@SrgSprinkles I&#39;m guessing it didn&#39;t work because this answer is Python 2 where the first answer is Python 3.  You have to call the right binary.  print&quot;&quot; and print() are not interchangeable between versions"}], "tags": [], "owner": {"reputation": 1328, "user_id": 2399208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2656e44dcda681bd7f31969ffbd91432?s=128&d=identicon&r=PG", "display_name": "camden", "link": "https://stackoverflow.com/users/2399208/camden"}, "is_accepted": false, "score": 4, "last_activity_date": 1443042107, "last_edit_date": 1495540906, "creation_date": 1443042107, "answer_id": 32749410, "question_id": 32749350, "link": "https://stackoverflow.com/questions/32749350/check-if-a-string-is-in-a-file-with-python/32749410#32749410", "title": "Check if a string is in a file with Python", "body": "<p>This is the top answer from a <a href=\"https://stackoverflow.com/questions/4940032/search-for-string-in-txt-file-python\">very similar question.</a></p>\n\n<pre><code>if 'blabla' in open('example.txt').read():\n    print \"true\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 3915643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0bb79454e9ed5b50707b8571a80be65?s=128&d=identicon&r=PG&f=1", "display_name": "munizig", "link": "https://stackoverflow.com/users/3915643/munizig"}, "edited": false, "score": 1, "creation_date": 1606265944, "post_id": 32749413, "comment_id": 114911028, "body": "If I&#39;m not mistaken, we can use &quot;open(&#39;myfile.txt&#39;, &#39;r&#39;)&quot; in order to only reading the file, and avoiding the &quot;.read()&quot; ahead."}, {"owner": {"reputation": 55, "user_id": 6858373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8686d1bafe6f47988909f14a652b2ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ferdossi", "link": "https://stackoverflow.com/users/6858373/ferdossi"}, "edited": false, "score": 0, "creation_date": 1613400526, "post_id": 32749413, "comment_id": 117056611, "body": "Is it possible to ignore case?"}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 55, "user_id": 6858373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8686d1bafe6f47988909f14a652b2ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ferdossi", "link": "https://stackoverflow.com/users/6858373/ferdossi"}, "edited": false, "score": 1, "creation_date": 1613402357, "post_id": 32749413, "comment_id": 117057510, "body": "@Ferdossi just do &#39;String&#39;.lower() in myfile.read().lower()"}], "tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": true, "score": 33, "last_activity_date": 1545391155, "last_edit_date": 1545391155, "creation_date": 1443042119, "answer_id": 32749413, "question_id": 32749350, "link": "https://stackoverflow.com/questions/32749350/check-if-a-string-is-in-a-file-with-python/32749413#32749413", "title": "Check if a string is in a file with Python", "body": "<p>As you yourself said, just open the file and check if it is in it.</p>\n\n<pre><code>with open('myfile.txt') as myfile:\n     if 'String' in myfile.read():\n         print('Blahblah')\n</code></pre>\n\n<p>Isn't <code>Python</code> delightful?</p>\n"}], "owner": {"reputation": 384, "user_id": 5369506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZdecgATTpWs/AAAAAAAAAAI/AAAAAAAAADY/cVFIaWRkhRg/photo.jpg?sz=128", "display_name": "Gleyak", "link": "https://stackoverflow.com/users/5369506/gleyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66560, "favorite_count": 3, "closed_date": 1443045715, "accepted_answer_id": 32749413, "answer_count": 2, "score": 12, "last_activity_date": 1545391155, "creation_date": 1443041904, "last_edit_date": 1443042025, "question_id": 32749350, "link": "https://stackoverflow.com/questions/32749350/check-if-a-string-is-in-a-file-with-python", "closed_reason": "Duplicate", "title": "Check if a string is in a file with Python", "body": "<p>I'm new to Python and I'm trying to figure out how I can search for a string in a file and use it as a condition in a if clause: \nIf \"String\" is in the file, Print(\"Blablabla\")</p>\n"}, {"tags": ["python", "mysql", "utf-8", "character-encoding", "rss"], "comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443047929, "post_id": 32749346, "comment_id": 53341825, "body": "unrelated: don&#39;t hardcode the encoding of outside environment (terminal) inside your script, print Unicode instead: <code>print t</code>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443047996, "post_id": 32749346, "comment_id": 53341843, "body": "have you tried <code>use_unicode=True</code> connect() parameter? Again, don&#39;t encode, pass Unicode string -- let the db driver to encode using the correct encoding (specified via <code>charset</code> parameter earlier)."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1445336558, "post_id": 32749346, "comment_id": 54271227, "body": "unrelated: don&#39;t use string formatting to insert sql values, use parametrized queries instead."}], "answers": [{"comments": [{"owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "edited": false, "score": 1, "creation_date": 1443089333, "post_id": 32749812, "comment_id": 53356509, "body": "This is wrong. You should pass Unicode strings to <code>.execute()</code>. The driver will encode where necessary: <a href=\"http://stackoverflow.com/a/6203782/1554386\">stackoverflow.com/a/6203782/1554386</a>"}], "tags": [], "owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "is_accepted": false, "score": 0, "last_activity_date": 1443044080, "last_edit_date": 1443044080, "creation_date": 1443043734, "answer_id": 32749812, "question_id": 32749346, "link": "https://stackoverflow.com/questions/32749346/unicodeencodeerror-when-trying-to-insert-utf-8-data-into-mysql/32749812#32749812", "title": "UnicodeEncodeError when trying to insert UTF-8 data into Mysql", "body": "<p>Assuming <code>cur.execute()</code> expects a utf-8 encoded string: you need to encode it as utf-8 explicitly when you pass it to MySQL, just doing str() will attempt to encode it as ascii which fails and produces your error:</p>\n\n<pre><code>   cur.execute(\"INSERT INTO articles (title, description, date, \\\n   category, link, source) VALUES ('\"+ \\\n   urlnzz.entries[i].title.encode('utf-8') +\" ', ' \" + \\\n   urlnzz.entries[i].description.encode('utf-8') + \" ', ' \" +  \\\n   urlnzz.entries[i].published + \" ', ' \" +  \\\n   urlnzz.entries[i].category + \" ', ' \" + urlnzz.entries[i].link + \" ', 'NZZ')\")\n</code></pre>\n\n<p>Being a <code>unicode</code> object is something distinct from being a str in utf-8 encoding. The encode method on a unicode object will produce a utf-8 formatted <code>str</code>  (assuming Python 2) </p>\n"}, {"tags": [], "owner": {"reputation": 944, "user_id": 3462736, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/728f19a61d1716a14f5e63a712e5834a?s=128&d=identicon&r=PG&f=1", "display_name": "haraprasadj", "link": "https://stackoverflow.com/users/3462736/haraprasadj"}, "is_accepted": false, "score": 1, "last_activity_date": 1443046807, "creation_date": 1443046807, "answer_id": 32750453, "question_id": 32749346, "link": "https://stackoverflow.com/questions/32749346/unicodeencodeerror-when-trying-to-insert-utf-8-data-into-mysql/32750453#32750453", "title": "UnicodeEncodeError when trying to insert UTF-8 data into Mysql", "body": "<p>It is possible that there are characters with other encodings present in the text from RSS feeds.\nFirst, you can try different encodings in nested try except blocks. Secondly you can add 'ignore' to the encode methods. Like:</p>\n\n<pre><code>try:\n    s = raw_s.encode('utf-8', 'ignore')\nexcept UnicodeEncodeError:\n    try:\n        s = raw_s.encode('latin-1', 'ignore')\n    except UnicodeEncodeError:\n        print raw_s\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 5351525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61f1b32593a537388dc1ce3b1f153fac?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/5351525/sascha"}, "edited": false, "score": 0, "creation_date": 1443112296, "post_id": 32759834, "comment_id": 53372115, "body": "This worked! thanks a lot, i&#39;ll have to figure out exactly what you changed with the &quot;uri&quot; and .format(uri=uri) because i need to document both the coding and the theoretical background to it in my school work, so i&#39;ll do some research now :)"}, {"owner": {"reputation": 105, "user_id": 5351525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61f1b32593a537388dc1ce3b1f153fac?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/5351525/sascha"}, "edited": false, "score": 0, "creation_date": 1444946039, "post_id": 32759834, "comment_id": 54127223, "body": "hey, i just had to start using this, and it turns out that the solution you gave me doesn&#39;t give me any errors anymore, but it also doesn&#39;t show me all the articles i want. it also confuses things such as the link and messes a lot of things up, now that i start to use this in further code... are you sure this is supposed to work?"}, {"owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "reply_to_user": {"reputation": 105, "user_id": 5351525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61f1b32593a537388dc1ce3b1f153fac?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/5351525/sascha"}, "edited": false, "score": 0, "creation_date": 1444948113, "post_id": 32759834, "comment_id": 54128081, "body": "Yes, this code is supposed to work. You&#39;re going to have to be more specific about what isn&#39;t working and make sure it&#39;s not because your 3rd party website have changed."}, {"owner": {"reputation": 105, "user_id": 5351525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61f1b32593a537388dc1ce3b1f153fac?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/5351525/sascha"}, "edited": false, "score": 0, "creation_date": 1444951966, "post_id": 32759834, "comment_id": 54129319, "body": "I added some more detail in the question above, it was too big for a comment. even when i put the counter directly in to the code which you suggested, the two numbers don&#39;t match, and the mixing of information that i get in my db is really strange. thanks for your time btw :D"}, {"owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "reply_to_user": {"reputation": 105, "user_id": 5351525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61f1b32593a537388dc1ce3b1f153fac?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/5351525/sascha"}, "edited": false, "score": 0, "creation_date": 1444989244, "post_id": 32759834, "comment_id": 54142909, "body": "When you have these kind of problems, you ought to try to debug your code. Ask yourself &quot;How could I end up with articles attributed to the wrong source?&quot;. I quickly found that I left a typo in my code - a second iteration of <code>for entry in urlbernerz.entries:</code> instead of <code>for entry in urlnzz.entries:</code>. The code above is now fixed. It&#39;d be wise to understand the <code>for x in iteratable</code> syntax"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1445336596, "post_id": 32759834, "comment_id": 54271247, "body": "don&#39;t use string formatting to insert sql values, use parametrized queries instead."}, {"owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1445345821, "post_id": 32759834, "comment_id": 54277316, "body": "I agree @J.F.Sebastian but I wanted to introduce the OP to some Python basics. I&#39;ll update the code..."}], "tags": [], "owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "is_accepted": true, "score": 0, "last_activity_date": 1444988759, "last_edit_date": 1444988759, "creation_date": 1443093004, "answer_id": 32759834, "question_id": 32749346, "link": "https://stackoverflow.com/questions/32749346/unicodeencodeerror-when-trying-to-insert-utf-8-data-into-mysql/32759834#32759834", "title": "UnicodeEncodeError when trying to insert UTF-8 data into Mysql", "body": "<p>The major issue is that you're calling <code>str()</code> on Unicode objects. Depending on many factors, this may result in Python trying to encode the Unicode into ASCII, which is not possible with non-ASCII chars.</p>\n\n<p>You should try to keep Unicode objects as Unicode objects for as long as possible in your code and only convert when it's totally necessary. Fortunately, the MySQL driver is Unicode compliant, so you can pass it Unicode strings and it will encode internally. The only thing you need to do is to tell the driver to use UTF-8. Feedparser is also Unicode compliant and is decoding the rss feed automatically to Unicode strings (strings without encoding).</p>\n\n<p>There's also some parts of your code, which would benefit from using Python's in built features like <code>for each in something:</code>, <code>String.format()</code>, and triple quotes (<code>\"\"\"</code>) for long pieces of text.</p>\n\n<p>Pulling this all together looks like:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: UTF-8 -*-\n\nimport MySQLdb\nimport feedparser\n\ndb = MySQLdb.connect(host=\"127.0.0.1\",\n                     user=\"root\",\n                      passwd=\"\",\n                      db=\"FeedStuff\",\n                     charset='UTF8')\n\nurllistnzz =['international', 'wirtschaft', 'sport']\nurllistbernerz =['kultur', 'wissen', 'leben']\n\ncur = db.cursor()\n\nfor uri in urllistbernerz:\n    urlbernerz = feedparser.parse('http://www.bernerzeitung.ch/{uri}/rss.html'.format(uri=uri))\n\n    for entry in urlbernerz.entries:\n        insert_sql = u\"\"\"INSERT INTO articles (title, description, date, category,\n                        link, source) VALUES (\"{e.title}\", \"{e.description}\",\n                        \"{e.published}\", \"{e.category}\", \"{e.link}\", \"Berner Zeitung\")\n                        \"\"\".format(e=entry)\n\n        cur.execute(insert_sql)\n\nfor uri in urllistnzz:\n    urlnzz = feedparser.parse('http://www.nzz.ch/{uri}.rss'.format(uri=uri) )\n\n    for entry in urlnzz.entries:\n        insert_sql = u\"\"\"INSERT INTO articles (title, description, date, category,\n                        link, source) VALUES (\"{e.title}\", \"{e.description}\",\n                        \"{e.published}\", \"{e.category}\", \"{e.link}\", \"NZZ\")\n                        \"\"\".format(e=entry)\n\n        cur.execute(insert_sql)\n\ndb.commit()\n\ncur.close()\ndb.close()\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5351525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61f1b32593a537388dc1ce3b1f153fac?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/5351525/sascha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1357, "favorite_count": 0, "accepted_answer_id": 32759834, "answer_count": 3, "score": 2, "last_activity_date": 1444989445, "creation_date": 1443041897, "last_edit_date": 1444989445, "question_id": 32749346, "link": "https://stackoverflow.com/questions/32749346/unicodeencodeerror-when-trying-to-insert-utf-8-data-into-mysql", "title": "UnicodeEncodeError when trying to insert UTF-8 data into Mysql", "body": "<p>i'm trying to create a news app for a schoolproject where i get information off rss feeds of my local newspapers, in order to combine multiple newspapers into one.</p>\n\n<p>i'm running into problems when i try to insert my collected data into my Mysql database.</p>\n\n<p>When i simply print my date (example: print urlnzz.entries[0].description) there is no problem with the german characters such as \u00fc \u00e4 \u00f6 \u00e9 \u00e0.</p>\n\n<p>when i try to insert the data into the Mysql databse however, I get <code>\"UnicodeEncodeError: 'ascii' codec can't encode character..\"</code>. Weird is, that this only happens for .title and .description, not for .category (even though there are also \u00fc etc in there)</p>\n\n<p>i've been looking for an answer for quite some time now, i changed the encoding of the variables with </p>\n\n<pre><code>t = urlbernerz.entries[i].title\n\n\nprint t.encode('utf-8')\n</code></pre>\n\n<p>changed the charset to utf-8 when i connect to the database and even tried the \"try / except \" function of python, yet nothing seems to work.</p>\n\n<p>I've checked the type of each entry with type(u['entries'].title) and they are all unicode, now i need to encode them in a way that i can put them into my mysqldatabase</p>\n\n<p>on the rss websites it states that it's already encoded as utf-8, and even though i explicitly tell python to encode it as utf-8 as well, it still gives me the error:'ascii' codec can't encode character u'\\xf6'</p>\n\n<p>i've tried many answer to this subject already, such as using str() or using chardet but nothing seem to work. Here's my code</p>\n\n<pre><code>import MySQLdb\nimport feedparser\n#!/usr/bin/env python\n# -*- coding: UTF-8 -*-\n\ndb = MySQLdb.connect(host=\"127.0.0.1\", \n                     user=\"root\",\n                      passwd=\"\",\n                      db=\"FeedStuff\",\n                     charset='UTF8')\ndb.charset=\"utf8\"\ncur = db.cursor()\n\n\n\n\nurllistnzz =['international', 'wirtschaft', 'sport']\nurllistbernerz =['kultur', 'wissen', 'leben']\n\n\nfor u in range (len(urllistbernerz)):\n    urlbernerz = feedparser.parse('http://www.bernerzeitung.ch/'+urllistbernerz[u]+'/rss.html')\n    k = len(urlbernerz['entries'])\n    for i in range (k):\n        cur.execute(\"INSERT INTO articles (title, description, date, category, link, source) VALUES (' \"+ str(urlbernerz.entries[i].title)+\"  ', ' \" + str(urlbernerz.entries[i].description)+ \" ', ' \" + urlbernerz.entries[i].published + \" ', ' \" + urlbernerz.entries[i].category + \" ', ' \" + urlbernerz.entries[i].link + \" ',' Berner Zeitung')\")\n\nfor a in range (len(urllistnzz)):\n    urlnzz = feedparser.parse('http://www.nzz.ch/'+urllistnzz[a]+'.rss')\n    k = len(urlnzz['entries'])\n    for i in range (k):\n        cur.execute(\"INSERT INTO articles (title, description, date, category, link, source) VALUES (' \"+str(urlnzz.entries[i].title)+\" ', ' \" + str(urlnzz.entries[i].description)+ \" ', ' \" + urlnzz.entries[i].published + \" ', ' \" + urlnzz.entries[i].category + \" ', ' \" + urlnzz.entries[i].link + \" ', 'NZZ')\")\n\n\n\ndb.commit()\n\ncur.close()\ndb.close()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 2, "creation_date": 1443042336, "post_id": 32749326, "comment_id": 53339581, "body": "You might want to clean up your variables as you swap between <code>height</code> and <code>diagonal</code> throughout the code. This makes it confusing as to what you actually meant. Start from the beginning and write out on paper each step you want to take to compute the area. Then convert that flow into code. Try to organize your def&#39;s in one place rather than all over as it will help with readability"}], "answers": [{"tags": [], "owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "is_accepted": false, "score": 1, "last_activity_date": 1443042418, "creation_date": 1443042418, "answer_id": 32749487, "question_id": 32749326, "link": "https://stackoverflow.com/questions/32749326/trying-to-compute-the-area-of-a-rectangle-given-the-width-and-the-diagonal/32749487#32749487", "title": "trying to compute the area of a rectangle given the width and the diagonal", "body": "<p>Using <a href=\"https://en.wikipedia.org/wiki/Pythagorean_theorem\" rel=\"nofollow\">Pythagoras' Theorem</a>, we notice that:</p>\n\n<p><code>diagonal^2 = height^2 + width^2 (not python code)</code></p>\n\n<p>knowing that the diagonal is always bigger than the height, we have:</p>\n\n<p><code>height = sqrt(diagonal^2 - width^2)</code></p>\n\n<p>So the code you want is:</p>\n\n<pre><code>def compute_height_rectangle(width, diagonal):\n    return (diagonal ** 2 - width ** 2) ** 0.5\n\ndef compute_area_rectangle(width, diaognal):\n    return width * compute_height_rectangle(width, diagonal)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 5324550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9edeca6669a103fae341813ba911ea61?s=128&d=identicon&r=PG&f=1", "display_name": "TheSporech", "link": "https://stackoverflow.com/users/5324550/thesporech"}, "is_accepted": false, "score": 0, "last_activity_date": 1443062250, "last_edit_date": 1443062250, "creation_date": 1443042448, "answer_id": 32749493, "question_id": 32749326, "link": "https://stackoverflow.com/questions/32749326/trying-to-compute-the-area-of-a-rectangle-given-the-width-and-the-diagonal/32749493#32749493", "title": "trying to compute the area of a rectangle given the width and the diagonal", "body": "<p>Diagonal is never defined because you have the</p>\n\n<pre><code>\"diagonal = width\"\n</code></pre>\n\n<p>in double quotes, which makes it just a string. I copied your code and removed the double quotes and it didn't produce an error. I would also remove the:</p>\n\n<pre><code>\"height = int(height)\"\n</code></pre>\n\n<p>line because there's no need to assign height as an integer input.</p>\n\n<p>For future questions, it would help if you told us what you were trying to make your code do, so we can spot any other errors too, and it might just save you some effort :).</p>\n"}], "owner": {"reputation": 1, "user_id": 5365281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87acdaf9c00702b7d8e8287435d7a811?s=128&d=identicon&r=PG&f=1", "display_name": "tom mcbride", "link": "https://stackoverflow.com/users/5365281/tom-mcbride"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1645, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1443062250, "creation_date": 1443041811, "last_edit_date": 1443041903, "question_id": 32749326, "link": "https://stackoverflow.com/questions/32749326/trying-to-compute-the-area-of-a-rectangle-given-the-width-and-the-diagonal", "title": "trying to compute the area of a rectangle given the width and the diagonal", "body": "<p>I know I'm not defining diagonal somewhere, but this is what I have so far:</p>\n\n<pre><code>import math\n\ndef compute_height_rectangle(width,diagonal):\n    height=area/diagonal\n    return height\n\nheight = int(input(\"Please enter the length of the diagonal: \"))\n\"height = int(height) \"\nwidth  = int(input(\"please enter the width: \"))\n\"diagonal = width\"\n\ndef compute_area_rectangle(width,diagonal):\n    area=height*width\n    return area\n\nprint(compute_area_rectangle(width,diagonal))\n</code></pre>\n"}, {"tags": ["python", "csv", "pandas"], "comments": [{"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 0, "creation_date": 1443041403, "post_id": 32749211, "comment_id": 53339122, "body": "What do you want instead of the NaNs?"}, {"owner": {"reputation": 479, "user_id": 3781000, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ea63df6a2b0d4c57fa9c92bab6a0640?s=128&d=identicon&r=PG&f=1", "display_name": "tsotsi", "link": "https://stackoverflow.com/users/3781000/tsotsi"}, "reply_to_user": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 0, "creation_date": 1443041431, "post_id": 32749211, "comment_id": 53339141, "body": "Good comment, let me edit the question"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1443041632, "post_id": 32749211, "comment_id": 53339228, "body": "But won&#39;t the dtype be float anyway if it has <code>NaN</code>?"}, {"owner": {"reputation": 479, "user_id": 3781000, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ea63df6a2b0d4c57fa9c92bab6a0640?s=128&d=identicon&r=PG&f=1", "display_name": "tsotsi", "link": "https://stackoverflow.com/users/3781000/tsotsi"}, "edited": false, "score": 0, "creation_date": 1443041910, "post_id": 32749211, "comment_id": 53339366, "body": "What I want to do is float64 to float32 conversion"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 1558546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gjGEN.jpg?s=128&g=1", "display_name": "DalekSec", "link": "https://stackoverflow.com/users/1558546/daleksec"}, "is_accepted": true, "score": 6, "last_activity_date": 1443043377, "creation_date": 1443043377, "answer_id": 32749730, "question_id": 32749211, "link": "https://stackoverflow.com/questions/32749211/remove-nan-and-convert-to-float32-in-python-pandas/32749730#32749730", "title": "Remove NaN and convert to float32 in Python Pandas", "body": "<p>I think this does what you want:</p>\n\n<pre><code>pd.read_csv('Filename.csv').dropna().astype(np.float32)\n</code></pre>\n\n<p>To keep rows that only have <em>some</em> NaN values, do this:</p>\n\n<pre><code>pd.read_csv('Filename.csv').dropna(how='all').astype(np.float32)\n</code></pre>\n\n<p>To replace each NaN with a number instead of dropping rows, do this:</p>\n\n<pre><code>pd.read_csv('Filename.csv').fillna(1e6).astype(np.float32)\n</code></pre>\n\n<p>(I replaced NaN with 1,000,000 just as an example.)</p>\n"}, {"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 3, "last_activity_date": 1443318281, "last_edit_date": 1443318281, "creation_date": 1443043732, "answer_id": 32749810, "question_id": 32749211, "link": "https://stackoverflow.com/questions/32749211/remove-nan-and-convert-to-float32-in-python-pandas/32749810#32749810", "title": "Remove NaN and convert to float32 in Python Pandas", "body": "<p>You can also specify the <code>dtype</code> when you read the csv file:</p>\n\n<blockquote>\n  <p>dtype : Type name or dict of column -> type\n        Data type for data or columns. E.g. {'a': np.float64, 'b': np.int32}</p>\n</blockquote>\n\n<pre><code>pd.read_csv(my_file, dtype={col: np.float32 for col in ['col_1', 'col_2']})\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>df_out = pd.DataFrame(np.random.random([5,5]), columns=list('ABCDE'))\ndf_out.iat[1,0] = np.nan \ndf_out.iat[2,1] = np.nan\ndf_out.to_csv('my_file.csv')\n\ndf = pd.read_csv('my_file.csv', dtype={col: np.float32 for col in list('ABCDE')})\n&gt;&gt;&gt; df.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 5 entries, 0 to 4\nData columns (total 6 columns):\nUnnamed: 0    5 non-null int64\nA             4 non-null float32\nB             4 non-null float32\nC             5 non-null float32\nD             5 non-null float32\nE             5 non-null float32\ndtypes: float32(5), int64(1)\nmemory usage: 180.0 bytes\n\n&gt;&gt;&gt; df.dropna(axis=0, how='any')\n   Unnamed: 0         A         B         C         D         E\n0           0  0.176224  0.943918  0.322430  0.759862  0.028605\n3           3  0.723643  0.105813  0.884290  0.589643  0.913065\n4           4  0.654378  0.400152  0.763818  0.416423  0.847861\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 3781000, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ea63df6a2b0d4c57fa9c92bab6a0640?s=128&d=identicon&r=PG&f=1", "display_name": "tsotsi", "link": "https://stackoverflow.com/users/3781000/tsotsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10556, "favorite_count": 0, "accepted_answer_id": 32749730, "answer_count": 2, "score": 6, "last_activity_date": 1443318281, "creation_date": 1443041349, "last_edit_date": 1443041883, "question_id": 32749211, "link": "https://stackoverflow.com/questions/32749211/remove-nan-and-convert-to-float32-in-python-pandas", "title": "Remove NaN and convert to float32 in Python Pandas", "body": "<p>I am reading in data from a csv file into a data frame, trying to remove all rows that contain NaNs and then convert it from float64 to float32. I have tried various solutions I've found online, nothing seems to work. Any thoughts?</p>\n"}, {"tags": ["python", "beautifulsoup", "scrapy", "imdb"], "comments": [{"owner": {"reputation": 4633, "user_id": 1426906, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f22228bf1ee45283d539c68cf652590e?s=128&d=identicon&r=PG&f=1", "display_name": "sergiuz", "link": "https://stackoverflow.com/users/1426906/sergiuz"}, "edited": false, "score": 0, "creation_date": 1443041365, "post_id": 32749164, "comment_id": 53339098, "body": "You need to give more details."}, {"owner": {"reputation": 6315, "user_id": 1555990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a743aed2f5b809958ebb17d4d952b7b2?s=128&d=identicon&r=PG", "display_name": "That1Guy", "link": "https://stackoverflow.com/users/1555990/that1guy"}, "edited": false, "score": 0, "creation_date": 1443041472, "post_id": 32749164, "comment_id": 53339163, "body": "As it is written, your question is unanswerable. We have no way of knowing how to extract anything without more details."}, {"owner": {"reputation": 81, "user_id": 5361376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10153641774551369/picture?type=large", "display_name": "Souradeep Basu", "link": "https://stackoverflow.com/users/5361376/souradeep-basu"}, "edited": false, "score": 0, "creation_date": 1443041566, "post_id": 32749164, "comment_id": 53339201, "body": "Sorry guys, I edited the post"}, {"owner": {"reputation": 6315, "user_id": 1555990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a743aed2f5b809958ebb17d4d952b7b2?s=128&d=identicon&r=PG", "display_name": "That1Guy", "link": "https://stackoverflow.com/users/1555990/that1guy"}, "edited": false, "score": 0, "creation_date": 1443042471, "post_id": 32749164, "comment_id": 53339637, "body": "That&#39;s a bit better. What is your expected result? What is your actual result? How does your actual result differ from what you expect? Are you getting an error? If you are, what is it? Include the entire traceback if an exception is raised."}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 2655758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f80990bf261b494969790dd60d124f?s=128&d=identicon&r=PG", "display_name": "Jason Q. Ng", "link": "https://stackoverflow.com/users/2655758/jason-q-ng"}, "is_accepted": true, "score": 2, "last_activity_date": 1443047863, "creation_date": 1443047863, "answer_id": 32750624, "question_id": 32749164, "link": "https://stackoverflow.com/questions/32749164/how-to-extract-budget-gross-metascore-from-imdb-using-scrapy-and-beautifulsoup/32750624#32750624", "title": "How to extract budget, gross, metascore from imdb using scrapy and beautifulsoup?", "body": "<p>I'll take a stab at this since it sounds like you're new to scraping. What it sounds like you're actually trying to do is to get the budget, gross, and metascore from each of the individual 250 movie pages on IMDB. You're on the right track by mentioning Scrapy because you do have to crawl to those pages from the initial URL you provided. Scrapy has some <a href=\"http://blog.siliconstraits.vn/building-web-crawler-scrapy/\" rel=\"nofollow\">excellent documentation</a>, so if you want to use it, I highly recommend you start there first.</p>\n\n<p>However, if all you need is to scrape those 250 pages, you're better off just using Beautiful Soup to do the whole job. Simply do a <code>soup.findAll(\"td\", {\"class\":\"titleColumn\"})</code>, extract the links, then do a loop where you have Beautiful Soup open each of the those pages one at a time. If you're not sure how to do that, again, BS has <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow\">excellent documentation</a>.</p>\n\n<p>From there, it's just a matter of scraping the relevant data you want during each iteration. For instance, the metascore of each film is inside the a <code>&lt;div&gt;</code> of the class <code>star-box-details</code>. Do a <code>.find</code> for that and then you'll have to do some regular expressions to extract the exact piece you want (<a href=\"http://www.regular-expressions.info/\" rel=\"nofollow\">regular-expressions.info</a> has a great tutorial on regex and if you really get into regex, you'll probably end up sinking hours into <a href=\"http://www.rexegg.com/\" rel=\"nofollow\">RexEgg</a>).</p>\n\n<p>I'm not going to code the whole thing since you'll learn a lot through the trial and error that comes with attempting to solve things, but hopefully that puts you on the right track. However, do note that <a href=\"http://www.imdb.com/conditions\" rel=\"nofollow\">IMDB forbids scraping</a>, but for small projects I'm sure no one will care. But if you want to get serious, the <a href=\"https://stackoverflow.com/questions/1966503/does-imdb-provide-an-api\">\"Does IMDB provide an API?\"</a> post has some excellent resources for how to do it via various third-party APIs (and some even directly from IMDB). In your case, the best might be to simply <a href=\"http://www.imdb.com/interfaces\" rel=\"nofollow\">download the data as text files directly from IMDB</a>. Click on any of the FTP links. The files you'll probably want are <code>business.list.gz</code> and <code>ratings.list.gz</code>. As for the metascore on each movie page, that rating actually comes from <a href=\"http://www.metacritic.com/\" rel=\"nofollow\">Metacritic</a>, so you'll want to go there to pull that data.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 81, "user_id": 5361376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10153641774551369/picture?type=large", "display_name": "Souradeep Basu", "link": "https://stackoverflow.com/users/5361376/souradeep-basu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 32750624, "answer_count": 1, "score": -3, "last_activity_date": 1443103425, "creation_date": 1443041168, "last_edit_date": 1443103425, "question_id": 32749164, "link": "https://stackoverflow.com/questions/32749164/how-to-extract-budget-gross-metascore-from-imdb-using-scrapy-and-beautifulsoup", "title": "How to extract budget, gross, metascore from imdb using scrapy and beautifulsoup?", "body": "<p>I am staring with the url below:</p>\n\n<p><a href=\"http://www.imdb.com/chart/top\" rel=\"nofollow\">http://www.imdb.com/chart/top</a></p>\n\n<p>The structure of the HTML file seems to be so confusing:</p>\n\n<p>\"&nbsp;\n            Metascore: \"</p>\n\n<p>I am trying to use a format like this:</p>\n\n<pre><code>movie['metascore'] = self.get_text(soup.find('h4', attrs={'&amp;nbsp':'Metascore'}))\n</code></pre>\n"}, {"tags": ["python", "subprocess", "popen", "python-2.4"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1443041225, "post_id": 32749152, "comment_id": 53339023, "body": "You need to pass a single string with shell=True to pipe or use two processes piping the stdout of the first to the stdin of the second"}, {"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1443041636, "post_id": 32749152, "comment_id": 53339229, "body": "Updated per your comment to try one single string"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443042889, "post_id": 32749152, "comment_id": 53339859, "body": "<i>&quot;Still not quite what im looking for&quot;</i> -- what do you expect to happen instead?"}, {"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 0, "creation_date": 1443043521, "post_id": 32749152, "comment_id": 53340159, "body": "This is the result i get when i run on the command line:  udp_send_command: timed out waiting for response. But it looks like i just get the results of the eqcho"}, {"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 0, "creation_date": 1443048547, "post_id": 32749152, "comment_id": 53342041, "body": "@ Padraic Cunningham vsh is a script to send udp packets that we use"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443050305, "post_id": 32749152, "comment_id": 53342546, "body": "unrelated: to avoid doubling newlines, use <code>print s,</code> (note: comma) -- it is <a href=\"https://docs.python.org/2.4/lib/bltin-file-objects.html#l2h-256\" rel=\"nofollow noreferrer\">softspace</a> hack. btw, do you want both to capture stdout/stderr as strings <i>and</i> to print them? If all you want is to print them then I don&#39;t understand why do you need to capture them, just remove <code>stdout=PIPE</code> and the output will appear on the screen."}, {"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 1, "creation_date": 1443050762, "post_id": 32749152, "comment_id": 53342702, "body": "I want to parse the output of the script in the python script"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 0, "creation_date": 1443048202, "post_id": 32749267, "comment_id": 53341924, "body": "-bash-3.2$ echo &quot;passthru TST,1234&quot; | ./vsh -a 127.0.0;1 -p 7000 udp_send_command: timed out waiting for response...................  <code>-bash-3.2$ python mfd_ascii_test.py ---- ,</code>  and the code      <code>p1 = Popen([&quot;echo&quot;, &quot;passthru TST,1234&quot;],stdout=PIPE)     p2 = Popen([&quot;.&#47;vsh&quot;, &quot;-a&quot;, &quot;127.0.0.1&quot;, &quot;-p&quot;, &quot;7000&quot;],stdin=p1.stdout,stdout=PIPE,stderr=PIPE)p1.stdout.cl&zwnj;&#8203;ose()                 out, err = p2.communicate()                 print &#39;----&#39;                 print out</code>"}, {"owner": {"reputation": 1490, "user_id": 2402577, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Fn7Ch.png?s=128&g=1", "display_name": "alper", "link": "https://stackoverflow.com/users/2402577/alper"}, "edited": false, "score": 0, "creation_date": 1592049804, "post_id": 32749267, "comment_id": 110288307, "body": "should I do <code>p2.stdout.close()</code> after calling <code>p2.communicate()</code>? @Padraic Cunningham"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 1490, "user_id": 2402577, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Fn7Ch.png?s=128&g=1", "display_name": "alper", "link": "https://stackoverflow.com/users/2402577/alper"}, "edited": false, "score": 1, "creation_date": 1592068092, "post_id": 32749267, "comment_id": 110294541, "body": "@alper, not needed. As per the docs you <code>Allow p1 to receive a SIGPIPE if p2 exits.</code> <code>stdout</code> and <code>stderr</code> are both closed regardless in <code>communicate</code>."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1443041566, "creation_date": 1443041566, "answer_id": 32749267, "question_id": 32749152, "link": "https://stackoverflow.com/questions/32749152/python-subprocess-popen-pipe/32749267#32749267", "title": "Python subprocess popen pipe", "body": "<p>If you want to pipe the output from one to the other, you can pipe the stdout from one process to the stdin of another:</p>\n\n<pre><code>from subprocess import PIPE,Popen\n\np1 = Popen([\"echo\", \"passthru TST,1234\"],stdout=PIPE)\n\np2 = Popen([\"./vsh\", \"-a\", \"127.0.0.1\", \"-p\", \"7000\"],stdin=p1.stdout,stdout=PIPE,stderr=PIPE)\np1.stdout.close()\nout, err = p2.communicate()\n</code></pre>\n\n<p>If you wanted to use the pipe character, you would need to set shell=True and pass a single string:</p>\n\n<pre><code>from subprocess import check_output\n\nout = check_output('echo \"passthru TST,1234\" | ./vsh -a 127.0.0.1 -p 7000',shell=True)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 807, "user_id": 5342356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ug0gx.png?s=128&g=1", "display_name": "Tibox", "link": "https://stackoverflow.com/users/5342356/tibox"}, "reply_to_user": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 0, "creation_date": 1443056125, "post_id": 32749522, "comment_id": 53344007, "body": "in this case use <code>output, err = subprocess.Popen(&quot; &quot;.join(new_command), stdout=subprocess.PIPE, shell=True).communicate()</code> it&#39;ll get the job done."}], "tags": [], "owner": {"reputation": 807, "user_id": 5342356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ug0gx.png?s=128&g=1", "display_name": "Tibox", "link": "https://stackoverflow.com/users/5342356/tibox"}, "is_accepted": false, "score": -1, "last_activity_date": 1443056221, "last_edit_date": 1443056221, "creation_date": 1443042559, "answer_id": 32749522, "question_id": 32749152, "link": "https://stackoverflow.com/questions/32749152/python-subprocess-popen-pipe/32749522#32749522", "title": "Python subprocess popen pipe", "body": "<p>You can use directly a string command with <code>subprocess.check_output</code> if you set <code>shell=True</code> it's easier this way (python 2.7).</p>\n\n<pre><code>output = subprocess.check_output(\" \".join(new_command), shell=True)\n</code></pre>\n\n<p>Or you can use <code>subprocess.Popen</code> (python &lt; 2.7).</p>\n\n<pre><code>output, err = subprocess.Popen(\" \".join(new_command), stdout=subprocess.PIPE, shell=True).communicate()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 0, "creation_date": 1443048482, "post_id": 32749580, "comment_id": 53342015, "body": "running python 2.4, doesn&#39;t like str object has no attribute format"}, {"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 0, "creation_date": 1443049325, "post_id": 32749580, "comment_id": 53342267, "body": "How do i get the output?                 <code>out, err =  p.communicate(&quot;passthru IDN?,1234&quot;)                 print &#39;----------&#39;                 print out</code> <code>-bash-3.2$ python mfd_ascii_test.py PASSTHRU IDN?,1234 udp_send_command: timed out waiting for response ---------- None </code>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 0, "creation_date": 1443049433, "post_id": 32749580, "comment_id": 53342297, "body": "@georges: include <i>minimal</i> code example and show its result in the question (to enable proper formatting). Set <code>stdout=PIPE</code> to capture stdout, set <code>stderr=PIPE</code> to capture stderr. If the process may write outside stdout, stderr then <a href=\"http://stackoverflow.com/a/12471855/4279\">use pexpect or pty modules</a>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "edited": false, "score": 1, "creation_date": 1443050117, "post_id": 32749580, "comment_id": 53342491, "body": "@georges: what about <code>stderr=PIPE</code>?"}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 1, "last_activity_date": 1443051154, "last_edit_date": 1495540844, "creation_date": 1443042771, "answer_id": 32749580, "question_id": 32749152, "link": "https://stackoverflow.com/questions/32749152/python-subprocess-popen-pipe/32749580#32749580", "title": "Python subprocess popen pipe", "body": "<p>To pass a string as an input to a subprocess and to capture its output, you could use <a href=\"https://docs.python.org/2.4/lib/node239.html\" rel=\"nofollow noreferrer\"><code>Popen.communicate()</code> method</a>:</p>\n\n<pre><code>#!/usr/bin/env python2\nfrom subprocess import Popen, PIPE, STDOUT\n\np = Popen([\"./vsh\", \"-a\", ip_address, \"-p\", str(port)],\n          stdin=PIPE, stdout=PIPE, stderr=STDOUT)\noutput = p.communicate(\"passthru \" + cmd)[0]\n</code></pre>\n\n<p><code>stderr=STDOUT</code> merges stderr into stdout.</p>\n\n<p>Set <code>stdout=PIPE</code> to capture stdout, set <code>stderr=PIPE</code> to capture stderr; otherwise <code>communicate()</code> returns <code>None</code> for the corresponding pipes. If the process may write outside stdout, stderr then <a href=\"https://stackoverflow.com/a/12471855/4279\">use <code>pexpect</code> or <code>pty</code> + <code>select</code> modules</a>. Here's <a href=\"https://stackoverflow.com/a/25945031/4279\"><code>pexpect.runu()</code> and <code>pty.spawn()</code> code examples</a>.</p>\n"}], "owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3276, "favorite_count": 0, "accepted_answer_id": 32749580, "answer_count": 3, "score": 1, "last_activity_date": 1443056221, "creation_date": 1443041117, "last_edit_date": 1443050017, "question_id": 32749152, "link": "https://stackoverflow.com/questions/32749152/python-subprocess-popen-pipe", "title": "Python subprocess popen pipe", "body": "<p>I am trying to issue a command in python and read the input and parse it back. This is the command i am trying to issue (example when running on the command line)</p>\n\n<pre><code>-bash-3.2$ echo \"passthru TST,1234\" | ./vsh -a 127.0.0.1 -p 7000\nPASSTHRU TST,1234\nudp_send_command: timed out waiting for response\n-bash-3.2$\n</code></pre>\n\n<p>I am trying to use python subprocess </p>\n\n<pre><code>            vsh_command = ' \"passthru ' + cmd + '\" | ./vsh -a ' + ip_address + ' -p ' + port\n            print vsh_command\n            new_command = ['echo', vsh_command]\n            print new_command\n            proc = subprocess.Popen(new_command,\n                    stdout=subprocess.PIPE,\n                    stderr=subprocess.PIPE,\n                    stdin=subprocess.PIPE,\n                    shell=True)\n            print '1'\n            out_2, err = proc.communicate()\n            print out_2\n            print '2'\n            rcv = out_2.splitlines()\n            print '3'\n            for r in rcv:\n                    print '     ' + r\n            print '4'\n</code></pre>\n\n<p>`</p>\n\n<pre><code> \"passthru TST,1234\" | ./vsh -a 127.0.0.1 -p 7000\n['echo', ' \"passthru TST,1234\" | ./vsh -a 127.0.0.1 -p 7000']\n1\n\n\n2\n3\n\n4\n</code></pre>\n\n<p>Is a | command not possible with subprocess? if so is there another way that i can run this shell command and get the input?</p>\n\n<p>UPDATE: (With single string for shell=true command)</p>\n\n<pre><code>`vsh_command = 'echo \"passthru ' + cmd + '\" | ./vsh -a ' + ip_address + ' -p ' + port\n            print vsh_command\n            proc = subprocess.Popen(vsh_command,\n                    stdout=subprocess.PIPE,\n                    stderr=subprocess.PIPE,\n                    stdin=subprocess.PIPE,\n                    shell=True)\n            print '1'\n            out_2, err = proc.communicate()\n            print out_2\n            print '2'\n            rcv = out_2.splitlines()\n            print '3'\n            for r in rcv:\n                    print '     ' + r\n            print '4'\n</code></pre>\n\n<p>`</p>\n\n<p>Run (python script) </p>\n\n<pre><code>echo \"passthru TST,1234\" | ./vsh -a 127.0.0.1 -p 7000\n1\nPASSTHRU TST,1234\n\n2\n3\n     PASSTHRU TST,1234\n4\nSUCCESS\n</code></pre>\n\n<p>Still not quite what im looking for, looks like its just doing the echo command not the pipe</p>\n\n<p>EDIT #2</p>\n\n<pre><code>            p = Popen([\"./vsh\", \"-a\", ip_address, \"-p\", str(port)],stdin=PIPE, stdout=PIPE)\n            out, err =  p.communicate(\"passthru TST,1234\")\n            print '----------'\n            print out\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-bash-3.2$ python mfd_ascii_test.py\nudp_send_command: timed out waiting for response\n----------\nPASSTHRU TST,1234\n\n-bash-3.2$\n</code></pre>\n\n<p>out is the result of the echo, not the 'udp_send_command: timed out waiting for response'</p>\n"}, {"tags": ["python", "django", "django-rest-framework", "mongoengine"], "comments": [{"owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "edited": false, "score": 0, "creation_date": 1443041697, "post_id": 32749143, "comment_id": 53339265, "body": "Why do you convert query set to <code>list</code> before caching? <a href=\"http://stackoverflow.com/questions/4631865/caching-query-results-in-django\" title=\"caching query results in django\">stackoverflow.com/questions/4631865/&hellip;</a>"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1443041697, "post_id": 32749143, "comment_id": 53339266, "body": "before, you could do this <a href=\"https://gist.github.com/zmcghee/1055992\" rel=\"nofollow noreferrer\">gist.github.com/zmcghee/1055992</a> but not anymore, sadly"}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1443041732, "post_id": 32749143, "comment_id": 53339277, "body": "Why don&#39;t you just cache a list but return the queryset in your <code>cache_user_articles</code> function?"}], "answers": [{"tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": true, "score": 4, "last_activity_date": 1443042008, "creation_date": 1443042008, "answer_id": 32749377, "question_id": 32749143, "link": "https://stackoverflow.com/questions/32749143/convert-list-into-queryset/32749377#32749377", "title": "Convert list into queryset", "body": "<p>That's the place where Python like dynamic languages really shine due to <code>Duck Typing</code>. You could easily write something that quacks like a <code>QuerySet</code>.</p>\n\n<pre><code>import mongoengine\nfrom bson import ObjectId\n\n\nclass DuckTypedQuerySet(list):\n\n    def __init__(self, data, document):\n        if not hasattr(data, '__iter__') or isinstance(data, mongoengine.Document):\n            raise TypeError(\"DuckTypedQuerySet requires iterable data\")\n\n        super(DuckTypedQuerySet, self).__init__(data)\n\n        self._document = document\n\n    @property\n    def objects(self):\n        return self\n\n    def _query_match(self, instance, **kwargs):\n        is_match = True\n\n        for key, value in kwargs.items():\n            attribute = getattr(instance, key, None)\n\n            if isinstance(attribute, ObjectId) and not isinstance(value, ObjectId):\n                attribute = str(attribute)\n\n            if not attribute == value:\n                is_match = False\n                break\n\n        return is_match\n\n\n    def filter(self, **kwargs):\n        data = filter(lambda instance: self._query_match(instance, **kwargs), self)\n\n        return self.__class__(data, self._document)\n\n    def get(self, **kwargs):\n        results = self.filter(**kwargs)\n\n        if len(results) &gt; 1:\n            raise self._document.MultipleObjectsReturned(\"{0} items returned, instead of 1\".format(len(results)))\n\n        if len(results) &lt; 1:\n            raise self._document.DoesNotExist(\"{0} matching query does not exist.\".format(str(self._document)))\n\n        return results[0]\n\n    def first(self):\n        return next(iter(self), None)\n\n    def all(self):\n        return self\n\n    def count(self):\n        return len(self)\n\n\ndef cache_user_articles(user_id):\n    key = \"articles_{0}\".format(user_id)\n\n    articles = cache.get(key)\n\n    if articles is None:\n        articles = DuckTypedQuerySet(list(Article.objects.filter(user_id = user_id)), document = Article)\n        cache.set(key, articles)\n\n    return articles\n</code></pre>\n\n<p>Ofcourse, this is not an exhaustive implementation. You might need to add other methods that exists in queryset. But I think these will do for simple use-cases. Now you can make do with generic implementations of Django Rest Framework.</p>\n"}, {"tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": false, "score": 0, "last_activity_date": 1443046542, "creation_date": 1443046542, "answer_id": 32750409, "question_id": 32749143, "link": "https://stackoverflow.com/questions/32749143/convert-list-into-queryset/32750409#32750409", "title": "Convert list into queryset", "body": "<p>What about this? \n(I have mocked the redis cache with a class variable)</p>\n\n<pre><code>class CachedManager(models.Manager):\n\n    cache = dict()\n\n    def cached(self, user_id):\n        cached = self.cache.get(user_id, [])\n        if not cached:\n            self.cache[user_id] = [article.pk for article in self.filter(user_id=user_id)]\n\n        return self.cache[user_id]\n\n\nclass Article(models.Model):\n\n    objects = CachedManager()\n\n    user_id = models.IntegerField()\n    #  Whatever fields your Article model has\n</code></pre>\n\n<p>Then in your views or wherever you need it:</p>\n\n<p>you can call <code>Article.objects.cached(&lt;a user id&gt;)</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5359895"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2965, "favorite_count": 2, "accepted_answer_id": 32749377, "answer_count": 2, "score": 2, "last_activity_date": 1443046542, "creation_date": 1443041081, "last_edit_date": 1443041599, "question_id": 32749143, "link": "https://stackoverflow.com/questions/32749143/convert-list-into-queryset", "title": "Convert list into queryset", "body": "<p>To improve performance, In my project most of the model instances are stored in cache as list values. But all generic views in Django Rest Framework expect them to be queryset objects. How can I convert the values I got from list into a queryset like objeccts, such that I can use generic views.</p>\n\n<p>Say, I have a function like</p>\n\n<pre><code>def cache_user_articles(user_id):\n    key = \"articles_{0}\".format(user_id)\n\n    articles = cache.get(key)\n\n    if articles is None:\n        articles = list(Article.objects.filter(user_id = user_id))\n        cache.set(key, articles)\n\n    return articles\n</code></pre>\n\n<p>In my views.py,</p>\n\n<pre><code>class ArticleViewSet(viewsets.ModelViewSet):\n\n    ...\n\n    def get_queryset(self, request, *args, **kwargs):\n        return cache_user_articles(kwargs.get(user_id))\n</code></pre>\n\n<p>But, this of course this wouldn't work as Django Rest Framework expects the result of <code>get_queryset</code> to be QuerySet object, and on <code>PUT</code> request it would call 'get' method on it. Is there any way, I could make it to work with generic DRF views.</p>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 11, "user_id": 5369523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97555b4b4c442273dea66512c6c7c6fd?s=128&d=identicon&r=PG&f=1", "display_name": "sandeep", "link": "https://stackoverflow.com/users/5369523/sandeep"}, "edited": false, "score": 0, "creation_date": 1443042160, "post_id": 32749130, "comment_id": 53339492, "body": "Python shows error at if a[backward] &gt; pivot: step,Cant find the reason why shall it give error."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5369523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97555b4b4c442273dea66512c6c7c6fd?s=128&d=identicon&r=PG&f=1", "display_name": "sandeep", "link": "https://stackoverflow.com/users/5369523/sandeep"}, "edited": false, "score": 0, "creation_date": 1443393557, "post_id": 32749417, "comment_id": 53463693, "body": "Why doesnt this code works when there are duplicates?"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1443042130, "creation_date": 1443042130, "answer_id": 32749417, "question_id": 32749130, "link": "https://stackoverflow.com/questions/32749130/quicksort-in-python-getting-error-list-index-out-of-range/32749417#32749417", "title": "QuickSort in python: getting error list index out of range", "body": "<p>You need to loop while <code>forward &lt;= backward</code>:</p>\n\n<pre><code>def quickSort(a, first, last):\n    if last - first &lt; 1:\n        return\n    pivot = a[first]\n    forward = first + 1\n    backward = last \n    # &lt;=\n    while forward &lt;= backward:\n        if a[forward] &lt; pivot:\n            forward += 1\n        elif a[backward] &gt; pivot:\n            backward -= 1\n        elif a[forward] &gt;= pivot &gt; a[backward]:\n            temp = a[forward]\n            a[forward] = a[backward]\n            a[backward] = temp\n            forward += 1\n            backward -= 1\n\n    if a[backward] &lt; pivot:\n        temp = a[backward]\n        a[backward] = pivot\n        a[first] = temp\n\n    quickSort(a, first, backward - 1)\n    quickSort(a, backward + 1, last)\n    return a\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>In [10]: a = [1,33,23,12,55,24]\n\nIn [11]: b = quickSort(a, 0, len(a) - 1)\n\nIn [12]: b\nOut[12]: [1, 12, 23, 24, 33, 55]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5369523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97555b4b4c442273dea66512c6c7c6fd?s=128&d=identicon&r=PG&f=1", "display_name": "sandeep", "link": "https://stackoverflow.com/users/5369523/sandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1443042130, "creation_date": 1443041040, "last_edit_date": 1443041096, "question_id": 32749130, "link": "https://stackoverflow.com/questions/32749130/quicksort-in-python-getting-error-list-index-out-of-range", "title": "QuickSort in python: getting error list index out of range", "body": "<pre><code>a = [10,100,45,60,90]\ndef quickSort(a,first, last):\n    if last-first&lt;1:\n        return \n    pivot = a[first]\n    forward = first+1\n    backward = last\n    while forward &lt; backward:\n        if a[forward] &lt; pivot:\n            forward=forward+1\n        if a[backward] &gt; pivot:\n            backward = backward -1\n        if a[forward] &gt;= pivot and a[backward] &lt; pivot:\n            temp = a[forward]\n            a[forward]=a[backward]\n            a[backward]=temp\n            forward=forward+1\n            backward = backward -1\n\n    if a[backward] &lt; pivot:\n        temp = a[backward]\n        a[backward]= pivot\n        a[first] =temp\n\n\n    quickSort(a,first,backward-1)\n    quickSort(a,backward+1,last)\n    return a\n\n\n\nb=quickSort(a,0,len(a)-1) \nprint b  \n</code></pre>\n"}, {"tags": ["python", "google-earth-engine"], "comments": [{"owner": {"reputation": 2099, "user_id": 1723707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BCM6E.jpg?s=128&g=1", "display_name": "ForgetfulFellow", "link": "https://stackoverflow.com/users/1723707/forgetfulfellow"}, "edited": false, "score": 0, "creation_date": 1443041976, "post_id": 32749123, "comment_id": 53339403, "body": "what do you want the list to contain?"}, {"owner": {"reputation": 1256, "user_id": 5186864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84a45ac1ccac37ed3a6565851115ecbf?s=128&d=identicon&r=PG&f=1", "display_name": "Falk Schuetzenmeister", "link": "https://stackoverflow.com/users/5186864/falk-schuetzenmeister"}, "reply_to_user": {"reputation": 2099, "user_id": 1723707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BCM6E.jpg?s=128&g=1", "display_name": "ForgetfulFellow", "link": "https://stackoverflow.com/users/1723707/forgetfulfellow"}, "edited": false, "score": 0, "creation_date": 1443042523, "post_id": 32749123, "comment_id": 53339662, "body": "If I run the code in its JS version in the sandbox I get a JSON object containing a list of image names. But maybe that is already the solution, I will see whether the ee.list object has a way to return that JSON object."}], "answers": [{"comments": [{"owner": {"reputation": 1055, "user_id": 2791453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2lPFi.jpg?s=128&g=1", "display_name": "Rodrigo E. Principe", "link": "https://stackoverflow.com/users/2791453/rodrigo-e-principe"}, "edited": false, "score": 0, "creation_date": 1489441536, "post_id": 32766553, "comment_id": 72663365, "body": "You have to be careful with getInfo() function because every time you call it you make a request to the server and thus slow down the process and consume EE capacity. The recomendation is to use it only if it is completally necessary."}, {"owner": {"reputation": 1256, "user_id": 5186864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84a45ac1ccac37ed3a6565851115ecbf?s=128&d=identicon&r=PG&f=1", "display_name": "Falk Schuetzenmeister", "link": "https://stackoverflow.com/users/5186864/falk-schuetzenmeister"}, "reply_to_user": {"reputation": 1055, "user_id": 2791453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2lPFi.jpg?s=128&g=1", "display_name": "Rodrigo E. Principe", "link": "https://stackoverflow.com/users/2791453/rodrigo-e-principe"}, "edited": false, "score": 0, "creation_date": 1489443809, "post_id": 32766553, "comment_id": 72664352, "body": "Yes, I am aware of this. But that is the point, I am importing the list to further process it client side."}, {"owner": {"reputation": 1055, "user_id": 2791453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2lPFi.jpg?s=128&g=1", "display_name": "Rodrigo E. Principe", "link": "https://stackoverflow.com/users/2791453/rodrigo-e-principe"}, "edited": false, "score": 0, "creation_date": 1489487463, "post_id": 32766553, "comment_id": 72681068, "body": "I supposed it, I also work with the Python API and use getInfo() quite often. I just commented not only for you but for everyone who reads this and finds it helpful."}], "tags": [], "owner": {"reputation": 1256, "user_id": 5186864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84a45ac1ccac37ed3a6565851115ecbf?s=128&d=identicon&r=PG&f=1", "display_name": "Falk Schuetzenmeister", "link": "https://stackoverflow.com/users/5186864/falk-schuetzenmeister"}, "is_accepted": true, "score": 4, "last_activity_date": 1443112402, "creation_date": 1443112402, "answer_id": 32766553, "question_id": 32749123, "link": "https://stackoverflow.com/questions/32749123/google-earth-engine-python-api-converting-ee-list-to-python-list/32766553#32766553", "title": "Google Earth Engine Python API, converting ee.list to Python list", "body": "<p>The following code returns a list of dictionaries containing the desired information:</p>\n\n<pre><code>import ee\nee.Initialize()\n\ncollection = ee.ImageCollection('MODIS/MCD43A4_NDVI')\nlist = collection.toList(10)\nprint list.getInfo()\n</code></pre>\n"}], "owner": {"reputation": 1256, "user_id": 5186864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84a45ac1ccac37ed3a6565851115ecbf?s=128&d=identicon&r=PG&f=1", "display_name": "Falk Schuetzenmeister", "link": "https://stackoverflow.com/users/5186864/falk-schuetzenmeister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3235, "favorite_count": 0, "accepted_answer_id": 32766553, "answer_count": 1, "score": 2, "last_activity_date": 1443474935, "creation_date": 1443041013, "last_edit_date": 1443474935, "question_id": 32749123, "link": "https://stackoverflow.com/questions/32749123/google-earth-engine-python-api-converting-ee-list-to-python-list", "title": "Google Earth Engine Python API, converting ee.list to Python list", "body": "<p>I am using Google Earth Engine's Python API which provides result objects such as ee.number, ee.list, ee.image. I do not know which detail I am missing but the following code:</p>\n\n<pre><code>import ee\nee.Initialize()\n\ncollection = ee.ImageCollection('MODIS/MCD43A4_NDVI')\nprint collection.toList(10)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>ee.List({\n  \"type\": \"Invocation\", \n    \"arguments\": {\n    \"count\": 10, \n    \"collection\": {\n      \"type\": \"Invocation\", \n      \"arguments\": {\n        \"id\": \"MODIS/MCD43A4_NDVI\"\n      }, \n     \"functionName\": \"ImageCollection.load\"\n    }\n  }, \n  \"functionName\": \"Collection.toList\"\n})\n</code></pre>\n\n<p>How can I get an actual Python list? Using any method displayed by</p>\n\n<pre><code>print dir(collection.toList(10)) \n</code></pre>\n\n<p>just adds to this JSON output.</p>\n"}, {"tags": ["python", "selenium", "phantomjs", "ghostdriver"], "comments": [{"owner": {"reputation": 2050, "user_id": 3126298, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/uIBJ7.gif?s=128&g=1", "display_name": "n1k31t4", "link": "https://stackoverflow.com/users/3126298/n1k31t4"}, "edited": false, "score": 0, "creation_date": 1443041668, "post_id": 32749105, "comment_id": 53339246, "body": "Running this &#39;working&#39; script exactly as it is from the second tutorial I mentioned produces the same &#39;Connection Refused&#39; error: Here is where you can get the script from: <a href=\"https://github.com/thayton/taleo_job_scraper/blob/master/scraper.py\" rel=\"nofollow noreferrer\">Github Download</a>"}], "owner": {"reputation": 2050, "user_id": 3126298, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/uIBJ7.gif?s=128&g=1", "display_name": "n1k31t4", "link": "https://stackoverflow.com/users/3126298/n1k31t4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1528, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1443105528, "creation_date": 1443040940, "last_edit_date": 1443105528, "question_id": 32749105, "link": "https://stackoverflow.com/questions/32749105/ghostdriver-with-phantomjs-and-selenium-python-connection-refused", "title": "GhostDriver with PhantomJS and Selenium (Python) - &quot;Connection Refused&quot;", "body": "<p><strong>The Goal:</strong></p>\n\n<p>I am trying to perform some scraping in Python using a headless browser: Selenium with PhantomJs and GhostDriver.</p>\n\n<p>I am using Python 2.7 on a Mac running Mavericks. I work within emacs (although it also didn't work from Terminal).\nI have already overcome some errors such as \"phantomjs - no such file or directory exists\", but have got the latest Binaries from <a href=\"https://github.com/eugene1g/phantomjs/releases\" rel=\"nofollow noreferrer\">here</a>, which promise to be the latest, including a pending patch from the official PhantomJS team.</p>\n\n<p><strong>My Test Script:</strong></p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities\n\ndesired_cap = {\n        'phantomjs.page.settings.loadImages' : True,\n        'phantomjs.page.settings.resourceTimeout' : 10000,\n        'phantomjs.page.settings.userAgent' : \"my_user_agent\"\n        }\n\ndriver = webdriver.PhantomJS(executable_path= \"/usr/local/bin/phantomjs\", desired_capabilities=desired_cap)\ndriver.set_window_size(1024, 768)\ndriver.get('https://google.com/')\n\ndriver.save_screenshot(\"testing.png\")\ndriver.page_source(\"source_code.txt\")\n\nelement = driver.find_element_by_xpath('--*[@id=-gbqfq-]')\nelement.send_keys('testing')\nelement.send_keys(Keys.ENTER)\n</code></pre>\n\n<p>Here is a link to the webdriver's simple explanation:\n<a href=\"http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_phantomjs/selenium.webdriver.phantomjs.webdriver.html\" rel=\"nofollow noreferrer\">http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_phantomjs/selenium.webdriver.phantomjs.webdriver.html</a></p>\n\n<p><strong>The Error Message:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/VdKrp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VdKrp.png\" alt=\"The error message that I was getting\"></a></p>\n\n<p><strong>What I have tried:</strong></p>\n\n<p>I took a simple example from a tutorial before trying to actually perform anything more complicated, but still get errors. One <a href=\"http://blog.likewise.org/2013/04/webdriver-testing-with-python-and-ghostdriver/\" rel=\"nofollow noreferrer\">tutorial</a>... a <a href=\"http://toddhayton.com/2015/02/03/scraping-with-python-selenium-and-phantomjs/\" rel=\"nofollow noreferrer\">second</a></p>\n\n<p>I made one last change to the phantomjs <code>service.py</code> file, which I found <a href=\"https://github.com/detro/ghostdriver/issues/236\" rel=\"nofollow noreferrer\">here</a>. Namely, I changed:</p>\n\n<p><code>self.process = subprocess.Popen(self.service_args,\nstdout=self._log, stderr=self._log)</code>  to:</p>\n\n<p><code>self.process = subprocess.Popen(['/usr/bin/env', 'phantomjs', '--webdriver=59202'])</code></p>\n\n<p>The last arguement <code>--webdriver</code> seems rather arbitrary to my inexperienced eyes. I thought it might correlate to the port that it used by ghostdriver, which is displayed after each run in the <code>ghostdriver.log</code> and is different each time. Because it changes each time, I don't think using it makes sense to have it static in the code - and after trying anyway, it didn't work.</p>\n\n<p><strong>The Question:</strong></p>\n\n<p>Does anybody have any ideas about why the connection is being refused??</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 3072, "user_id": 938408, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/617248e899da78c9391b0d8d44eab701?s=128&d=identicon&r=PG", "display_name": "L&#225;szl&#243;", "link": "https://stackoverflow.com/users/938408/l%c3%a1szl%c3%b3"}, "edited": false, "score": 0, "creation_date": 1443042236, "post_id": 32749359, "comment_id": 53339534, "body": "Great, I&#39;ll accept this in a second, but can you perhaps help with adding <code>newrowcount</code> new rows to an existing dataframe? They could be empty, though I tried to copy the first <code>newrowcount</code> rows not to hassle with NaN or NaT or string issues. I understand this is not the exact topic of the question."}, {"owner": {"reputation": 3072, "user_id": 938408, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/617248e899da78c9391b0d8d44eab701?s=128&d=identicon&r=PG", "display_name": "L&#225;szl&#243;", "link": "https://stackoverflow.com/users/938408/l%c3%a1szl%c3%b3"}, "edited": false, "score": 0, "creation_date": 1443043305, "post_id": 32749359, "comment_id": 53340063, "body": "The iteration sounds inefficient (I have many rows to add), but the concatenation is a great answer, should have thought of it! Thanks!"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1443043193, "last_edit_date": 1443043193, "creation_date": 1443041940, "answer_id": 32749359, "question_id": 32749104, "link": "https://stackoverflow.com/questions/32749104/getting-pandas-setting-with-enlargement-right/32749359#32749359", "title": "getting pandas Setting With Enlargement right", "body": "<p>You can only set by enlargement with a single row or column. You are setting with a range.</p>\n\n<blockquote>\n  <p>The .loc/.ix/[] operations can perform enlargement when setting a non-existant <strong>key</strong> for that axis.</p>\n</blockquote>\n\n<p>For your use, something like this should work to expand a dataframe with new blank rows:</p>\n\n<pre><code>df = pd.DataFrame({'a': [1, 2, 3], 'b': [4, 5, 6]})\n&gt;&gt;&gt; df\n    a   b\n0   1   4\n1   2   5\n2   3   6\n\nnew_row_count = 2\nfor new_row, old_row in enumerate(range(new_row_count), start=len(df)):\n    df.ix[new_row] = None\n\n&gt;&gt;&gt;df\n    a   b\n0   1   4\n1   2   5\n2   3   6\n3   NaN NaN\n4   NaN NaN\n</code></pre>\n\n<p>If you wanted to copy data from the original dataframe, I would normally just concatenate.  </p>\n\n<pre><code>df = pd.concat([df, df.iloc[:2, :]], ignore_index=True)\n</code></pre>\n"}], "owner": {"reputation": 3072, "user_id": 938408, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/617248e899da78c9391b0d8d44eab701?s=128&d=identicon&r=PG", "display_name": "L&#225;szl&#243;", "link": "https://stackoverflow.com/users/938408/l%c3%a1szl%c3%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 1, "accepted_answer_id": 32749359, "answer_count": 1, "score": 2, "last_activity_date": 1443043193, "creation_date": 1443040930, "question_id": 32749104, "link": "https://stackoverflow.com/questions/32749104/getting-pandas-setting-with-enlargement-right", "title": "getting pandas Setting With Enlargement right", "body": "<p>Since version 0.13, it is possible to append to a dataframe by referring to indices in .loc or .ix which are not yet in the dataframe. See the <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#setting-with-enlargement\" rel=\"nofollow\">documentation</a>.</p>\n\n<p>Then I am confused why this line fails:</p>\n\n<pre><code>all_treatments.loc[originalN:newN,:]    = all_treatments.loc[0:newrowcount,:]\n</code></pre>\n\n<p>This generates a ValueError:</p>\n\n<pre><code>ValueError: could not broadcast input array from shape (12) into shape (0)\n</code></pre>\n\n<p>Here <code>all_treatments.shape = (53, 12)</code>, <code>originalN = 53</code>, <code>newN = 64</code>, <code>all_treatments.loc[originalN:newN,:].shape = (0,12)</code>, <code>all_treatments.loc[0:newrowcount,:].shape = (12,12)</code>.</p>\n\n<p>What is the proper way to set with enlargement here?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 877, "user_id": 3084178, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fHQOe.jpg?s=128&g=1", "display_name": "Dr Xorile", "link": "https://stackoverflow.com/users/3084178/dr-xorile"}, "edited": false, "score": 2, "creation_date": 1443041846, "post_id": 32749057, "comment_id": 53339338, "body": "So the problem with your second example, which seems to work, is that you have a list of tuples, instead of just one tuple?  What kind of output do you want?"}, {"owner": {"reputation": 2248, "user_id": 824954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb9caff49a964c7f3c94b49f91812d78?s=128&d=identicon&r=PG", "display_name": "Jonathon Vandezande", "link": "https://stackoverflow.com/users/824954/jonathon-vandezande"}, "reply_to_user": {"reputation": 877, "user_id": 3084178, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fHQOe.jpg?s=128&g=1", "display_name": "Dr Xorile", "link": "https://stackoverflow.com/users/3084178/dr-xorile"}, "edited": false, "score": 0, "creation_date": 1443042739, "post_id": 32749057, "comment_id": 53339779, "body": "I want to match multiple instances of the block, and thus a list of tuples does not tell me which tuples need to be in which block. I would thus like a list of multiple tuples, each tuple corresponding to a block."}], "answers": [{"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 1, "last_activity_date": 1443045440, "creation_date": 1443045440, "answer_id": 32750183, "question_id": 32749057, "link": "https://stackoverflow.com/questions/32749057/matching-multiple-of-the-same-line-with-python/32750183#32750183", "title": "Matching multiple of the same line with Python", "body": "<p>The issue you're encountering is that Python's <code>re</code> module doesn't handle repeated groups well. If you have a pattern like <code>\"(foo)+\"</code> and match <code>\"foofoofoo\"</code>, the pattern will match the whole string, but only the last of the <code>\"foo\"</code> substrings will be captured.</p>\n\n<p>There are a few ways you might solve this. My first idea is to make a first matching pass without any capturing groups so that you get the whole blocks as strings, then later rematch (with capturing groups) on each block to parse the values from the individual lines:</p>\n\n<pre><code>block_re = r'(?:\\s*\\w+\\s+\\d+\\s+\\d+\\s+\\d+\\n)+' # no groups, findall will yield strings\nrow_re = r'(\\s*(\\w+)\\s+(\\d+)\\s+(\\d+)\\s+(\\d+))' # you may not want the outer group here\nresults = [re.findall(row_re, block) for block in re.findall(block_re, my_string)]\n</code></pre>\n\n<p>The <code>results</code> variable will be a list of lists of tuples, corresponding to the blocks and the rows within them.</p>\n\n<p>Another way to solve it is to use a fancier regex library. I've not had any personal experience with it, but I've heard that the <a href=\"https://pypi.python.org/pypi/regex\" rel=\"nofollow\"><code>regex</code> module</a> allows you to repeat groups and still get at all of the captured results. I don't actually know how it works though, so if you go this route you'll have to read the docs or experiment a bit.</p>\n"}], "owner": {"reputation": 2248, "user_id": 824954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb9caff49a964c7f3c94b49f91812d78?s=128&d=identicon&r=PG", "display_name": "Jonathon Vandezande", "link": "https://stackoverflow.com/users/824954/jonathon-vandezande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 32750183, "answer_count": 1, "score": 0, "last_activity_date": 1443062091, "creation_date": 1443040790, "last_edit_date": 1443062091, "question_id": 32749057, "link": "https://stackoverflow.com/questions/32749057/matching-multiple-of-the-same-line-with-python", "title": "Matching multiple of the same line with Python", "body": "<p>I am attempting to match multiple blocks of successive similar lines using a regular expression. Precisely, I am attempting to match multiple blocks in a file like</p>\n\n<pre><code>H  0  0  0\nO  0  0  1\nH  0  1  1\n</code></pre>\n\n<p>which appears multiple times in the file with differing values (to those of you who are curious, I am attempting to grab the molecular geometries output by a quantum chemistry geometry optimization program).</p>\n\n<p>I attempted a regular expression like</p>\n\n<pre><code>import re\n#                 atom      x       y       z\n&gt;&gt;&gt; my_re = r'(\\s*(\\w+)\\s+(\\d+)\\s+(\\d+)\\s+(\\d+)\\n)+'\n&gt;&gt;&gt; my_string = 'lorem ipsum\\nH 0 0 0\\nO 0 0 1\\nH 0 1 1\\nlorem ipsum'\n&gt;&gt;&gt; re.findall(my_re, my_string)\n[('H 0 1 1\\n', 'H', '0', '1', '1')]\n</code></pre>\n\n<p>Instead of matching the whole molecule block, it only matches the last line of the block. If I remove the final <code>+</code>, the regex then matches all the lines of the block individually, i.e.</p>\n\n<pre><code>[('H 0 0 0\\n', 'H', '0', '0', '0'),\n ('O 0 0 1\\n', 'O', '0', '0', '1'),\n ('H 0 1 1\\n', 'H', '0', '1', '1')]\n</code></pre>\n\n<p>My regex is happy to match successive lines if I duplicate it, e.g.</p>\n\n<pre><code>&gt;&gt;&gt; re.findall(my_re*3, a)\n[('H 0 0 0\\n', 'H', '0', '0', '0',\n  'O 0 0 1\\n', 'O', '0', '0', '1',\n  'H 0 1 1\\n', 'H', '0', '1', '1')]\n</code></pre>\n\n<p>Which gives the results that I want, however, I don't know the length of block I need to match ahead of time. How can I fix my regular expression to match multiple successive lines?</p>\n"}, {"tags": ["python", "qt", "pyside", "copy-paste", "qtableview"], "answers": [{"comments": [{"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443101487, "post_id": 32750111, "comment_id": 53364503, "body": "Doesn&#39;t work, I can still copy the cell contents. Tried putting it before and after setting the model and I can still copy and paste the cell contents."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443106577, "post_id": 32750111, "comment_id": 53368258, "body": "@LeandroPoblet. How are you copying and pasting? I just tested with a <code>QTableView</code> and <code>QStandardItemModel</code>, and I couldn&#39;t find any way to do it (with or without setting the edit triggers). There&#39;s no context menu or keyboard shortcuts for copy or paste (except when editing), so I don&#39;t understand how you are doing it."}, {"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443106701, "post_id": 32750111, "comment_id": 53368354, "body": "I&#39;m just doing Ctrl+C and Ctrl+V, nothing out of the ordinary. There&#39;s no context menu like you said, but the default copy and paste shortcuts do allow me to do so."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443107307, "post_id": 32750111, "comment_id": 53368766, "body": "@LeandroPoblet. I cannot reproduce that. I&#39;ve added a test case to my answer, and there are no copy and paste shortcuts. Please test my example and confirm (it might also be useful to say what platform you are on)."}, {"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443107573, "post_id": 32750111, "comment_id": 53368934, "body": "Same thing, I&#39;ll try to test this in my local windows machine and see if It&#39;s an actual PySide issue."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443107769, "post_id": 32750111, "comment_id": 53369080, "body": "@LeandroPoblet. Same as what? And I&#39;m testing on Linux, not Windows. Also, I see exactly the same behaviour with pyqt (i.e. no shortcuts)."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443108706, "post_id": 32750111, "comment_id": 53369717, "body": "@LeandroPoblet. Actually, the copy shortcuts (Ctrl+C and Ctrl + Insert) <b>do</b> work for me - it&#39;s just the paste that&#39;s missing. I had a look at the source code for <code>QAbstractItemView.keyPressEvent</code>, and sure enough, there&#39;s handling for copy, but not paste. The only way I can paste is if the cells are editable."}, {"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443109003, "post_id": 32750111, "comment_id": 53369911, "body": "Maybe I&#39;m not being clear enough, I&#39;m sorry if I wasn&#39;t. Like you said, you can copy cells but can&#39;t <b>paste inside the cell</b>, but what I&#39;m talking about is copying a cell and paste it <b>outside</b>, for example, in a text editor or an email. This is what I&#39;m trying to avoid. I&#39;ll update my question with this explanation."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443110252, "post_id": 32750111, "comment_id": 53370738, "body": "@LeandroPoblet. I&#39;ve updated my answer with a solution."}, {"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1443110466, "post_id": 32750111, "comment_id": 53370870, "body": "Perfect! Sorry for not being clear enough with my request."}], "tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 1, "last_activity_date": 1443110209, "last_edit_date": 1443110209, "creation_date": 1443045035, "answer_id": 32750111, "question_id": 32749036, "link": "https://stackoverflow.com/questions/32749036/disallow-copy-paste-in-qtableview-in-pyside/32750111#32750111", "title": "Disallow copy/paste in QTableView in pyside", "body": "<p>You can make the whole table read-only like this:</p>\n\n<pre><code>    self.projectView.setEditTriggers(QAbstractItemView.NoEditTriggers)\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>If you also want to prevent copying of cells, you will need to kill the relevant keyboard shortcuts. Below is some example code that does that:</p>\n\n<pre><code>from PySide import QtGui, QtCore\n\nclass Window(QtGui.QWidget):\n    def __init__(self, rows, columns):\n        super(Window, self).__init__()\n        self.table = QtGui.QTableView(self)\n        model =  QtGui.QStandardItemModel(rows, columns, self.table)\n        for row in range(rows):\n            for column in range(columns):\n                item = QtGui.QStandardItem('(%d, %d)' % (row, column))\n                model.setItem(row, column, item)\n        self.table.setModel(model)\n        self.table.setEditTriggers(QtGui.QAbstractItemView.NoEditTriggers)\n        layout = QtGui.QVBoxLayout(self)\n        layout.addWidget(self.table)\n        self.table.installEventFilter(self)\n\n    def eventFilter(self, source, event):\n        if (source is self.table and\n            event.type() == QtCore.QEvent.KeyPress and\n            event == QtGui.QKeySequence.Copy):\n            return True\n        return super(Window, self).eventFilter(source, event)\n\nif __name__ == '__main__':\n\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    window = Window(5, 5)\n    window.setGeometry(600, 300, 600, 250)\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 32750111, "answer_count": 1, "score": 0, "last_activity_date": 1508179872, "creation_date": 1443040715, "last_edit_date": 1508179872, "question_id": 32749036, "link": "https://stackoverflow.com/questions/32749036/disallow-copy-paste-in-qtableview-in-pyside", "title": "Disallow copy/paste in QTableView in pyside", "body": "<p>I have <code>QTableView</code> that gets information from a <code>QSqlQueryModel</code> and displays it in real time. The thing is, <code>QTableView</code> allows the user to copy and paste the info from one of the fields.</p>\n\n<pre><code>    projectModel = QtSql.QSqlQueryModel()\n    projectModel.setQuery(\"select * from queue\",self.db)\n    self.total_rows = projectModel.rowCount()\n    projectModel.setHeaderData(0, QtCore.Qt.Horizontal, 'ID cola')\n    projectModel.setHeaderData(1, QtCore.Qt.Horizontal, 'C\u00f3digo')\n\n    self.projectView = QtGui.QTableView()\n    self.projectView.setModel(projectModel)\n    self.projectView.resizeColumnsToContents()\n    self.projectView.horizontalHeader().setStretchLastSection(True)\n</code></pre>\n\n<p>How do I deny copying the content of QTableView and pasting it outside in a text editor, for example?</p>\n"}, {"tags": ["python", "python-2.7", "scope"], "answers": [{"comments": [{"owner": {"reputation": 6200, "user_id": 1040092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/se31H.jpg?s=128&g=1", "display_name": "Wondercricket", "link": "https://stackoverflow.com/users/1040092/wondercricket"}, "edited": false, "score": 0, "creation_date": 1443041111, "post_id": 32749081, "comment_id": 53338961, "body": "<code>self</code> would be used the OP was using a class"}, {"owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "reply_to_user": {"reputation": 6200, "user_id": 1040092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/se31H.jpg?s=128&g=1", "display_name": "Wondercricket", "link": "https://stackoverflow.com/users/1040092/wondercricket"}, "edited": false, "score": 0, "creation_date": 1443041180, "post_id": 32749081, "comment_id": 53338993, "body": "Indeed OP is not. It is coded as if the intention is a class."}], "tags": [], "owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "is_accepted": false, "score": -1, "last_activity_date": 1443040851, "creation_date": 1443040851, "answer_id": 32749081, "question_id": 32749011, "link": "https://stackoverflow.com/questions/32749011/how-can-i-reduce-number-of-trys-left-in-a-game/32749081#32749081", "title": "How can I reduce number of trys left in a game?", "body": "<pre><code>def trys(self):\n    self.trysLeft-=1\n</code></pre>\n\n<p>Should do it!</p>\n\n<p>Self is referring to the instance of the class that you are currently in.</p>\n\n<p>Similar to <code>this</code> in java and <code>Me</code> in vba.</p>\n"}, {"comments": [{"owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "edited": false, "score": 0, "creation_date": 1443041251, "post_id": 32749126, "comment_id": 53339040, "body": "Yes heavily discourage globals."}, {"owner": {"reputation": 63, "user_id": 5369472, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-LPVPFSuT5u8/AAAAAAAAAAI/AAAAAAAAABY/UL16roDLVZY/photo.jpg?sz=128", "display_name": "Kumar Patel", "link": "https://stackoverflow.com/users/5369472/kumar-patel"}, "edited": false, "score": 0, "creation_date": 1443041321, "post_id": 32749126, "comment_id": 53339069, "body": "Thanks a lot I got it!"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1443041330, "post_id": 32749126, "comment_id": 53339079, "body": "Of course! But for someone learning to program it&#39;s confusing why the code (as written) doesn&#39;t work. Explaining that passing arguments is better, doesn&#39;t clarify the confusion around why the first method doesn&#39;t work."}], "tags": [], "owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1443041030, "creation_date": 1443041030, "answer_id": 32749126, "question_id": 32749011, "link": "https://stackoverflow.com/questions/32749011/how-can-i-reduce-number-of-trys-left-in-a-game/32749126#32749126", "title": "How can I reduce number of trys left in a game?", "body": "<p>The problem is that you're assigning trysLeft in the function, so it assumes it has local (rather than global) scope. But you actually want to assign the global variable, so you need to declare that trysLeft has global scope. Change your <code>trys()</code> function to the following:</p>\n\n<pre><code>def trys():\n    global trysLeft\n    trysLeft -= 1\n    print \"You have %d trys left.\" %trysLeft\n</code></pre>\n\n<p>For more information, see the <a href=\"https://docs.python.org/3/faq/programming.html#why-am-i-getting-an-unboundlocalerror-when-the-variable-has-a-value\" rel=\"nofollow\">FAQ</a></p>\n\n<p>FWIW, the correct way to solve this would be to pass a variable to your function rather than use globals, but that's outside the scope of your question.</p>\n"}, {"tags": [], "owner": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "is_accepted": false, "score": 2, "last_activity_date": 1443041098, "creation_date": 1443041098, "answer_id": 32749149, "question_id": 32749011, "link": "https://stackoverflow.com/questions/32749011/how-can-i-reduce-number-of-trys-left-in-a-game/32749149#32749149", "title": "How can I reduce number of trys left in a game?", "body": "<p>You need to pass <code>trysLeft</code> to the function for it to see it ...</p>\n\n<pre><code>    def trys(trysLeft):\n        trysLeft -= 1\n        print \"You have %d trys left.\" %trysLeft\n        return trysLeft\n</code></pre>\n\n<p>and then when you call <code>trys</code> ...</p>\n\n<pre><code>trysLeft = trys(trysLeft)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4227, "user_id": 2391063, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f9a1f4059f57bfef806a5fde53665d?s=128&d=identicon&r=PG", "display_name": "Thane Plummer", "link": "https://stackoverflow.com/users/2391063/thane-plummer"}, "is_accepted": false, "score": 3, "last_activity_date": 1443041148, "last_edit_date": 1443041148, "creation_date": 1443041129, "answer_id": 32749156, "question_id": 32749011, "link": "https://stackoverflow.com/questions/32749011/how-can-i-reduce-number-of-trys-left-in-a-game/32749156#32749156", "title": "How can I reduce number of trys left in a game?", "body": "<p>You have 3 options to fix this:</p>\n\n<ul>\n<li>Put trysLeft in a global (not a good idea)</li>\n<li>Add function trys() to your class and reference it as self.trysLeft</li>\n<li>Pass the variable into the trys() function.</li>\n</ul>\n"}], "owner": {"reputation": 63, "user_id": 5369472, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-LPVPFSuT5u8/AAAAAAAAAAI/AAAAAAAAABY/UL16roDLVZY/photo.jpg?sz=128", "display_name": "Kumar Patel", "link": "https://stackoverflow.com/users/5369472/kumar-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 32749126, "answer_count": 4, "score": 1, "last_activity_date": 1443041673, "creation_date": 1443040634, "last_edit_date": 1443041673, "question_id": 32749011, "link": "https://stackoverflow.com/questions/32749011/how-can-i-reduce-number-of-trys-left-in-a-game", "title": "How can I reduce number of trys left in a game?", "body": "<p>I am trying to limit the amount of tries a person has when attempting to guess the random number. I get this error code when I run the program and can't figure out what to do next. </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Python27/coding/Guess.py\", line 34, in &lt;module&gt;\n    main()\n  File \"C:/Python27/coding/Guess.py\", line 24, in main\n    trys(userGuess)\n  File \"C:/Python27/coding/Guess.py\", line 29, in trys\n    trysLeft -= 1\nUnboundLocalError: local variable 'trysLeft' referenced before assignment\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>import random    \n\ndef main():\n\n    print \"Guess a number between 1 and 100.\"\n    randomNumber = random.randint(1,100)\n    found = False\n    trysLeft = 5\n\n    while not found:\n\n        userGuess = input(\"Your guess: \")  \n        if userGuess == randomNumber:\n             print \"You got it!\"\n             found = True\n\n        elif userGuess &gt; randomNumber:\n            trys()\n            print \"Guess lower!\"\n\n        else:\n            trys()\n            print \"Guess higher!\"\n\ndef trys():\n\n    trysLeft -= 1\n    print \"You have %d trys left.\" %trysLeft\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": ["python", "search", "dictionary"], "comments": [{"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "edited": false, "score": 1, "creation_date": 1443045575, "post_id": 32749008, "comment_id": 53341007, "body": "Can you show us the code that you tried for this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "edited": false, "score": 0, "creation_date": 1443112515, "post_id": 32757513, "comment_id": 53372237, "body": "Yes, that looks like my currently solution. (: I was wondering if there was some <code>pythonic</code> magic using list comprehension and so on. Thank you."}], "tags": [], "owner": {"reputation": 4072, "user_id": 5246906, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/227935ae79fee841eaea7f6641ebec41?s=128&d=identicon&r=PG&f=1", "display_name": "nigel222", "link": "https://stackoverflow.com/users/5246906/nigel222"}, "is_accepted": true, "score": 1, "last_activity_date": 1443085803, "creation_date": 1443085803, "answer_id": 32757513, "question_id": 32749008, "link": "https://stackoverflow.com/questions/32749008/pythonic-search-in-a-list-of-dictionaries/32757513#32757513", "title": "Pythonic search in a list of dictionaries", "body": "<p>I'd say that the outside part of the solution is best addressed with a couple of particularly pythonic for loop constructs:</p>\n\n<pre><code>for id,actionlist in bigdict.items():\n   opted_in=False  # initial state\n\n   for index,stardict in enumerate(actionlist):\n      if stardict['shortDesc'] == 'BADGE_OPT':\n          if ( stardict['d01'] == 'OPT-IN') opted_in = True\n          if ( stardict['d01'] == 'OPT-OUT' opted_in = False\n\n      # act depending on opted_in state\n</code></pre>\n\n<p>It looks clumsy, but I've avoided <code>opted_in = ( stardict['d01'] == 'OPT-IN' )</code> because it's not clear that d01 is constrained to have those two values only. You might put the last three lines in a <code>try ... except KeyError</code> block if it's possible for a <code>stardict</code> to not contain <code>shortDesc</code> or <code>d01</code> keys.</p>\n\n<p>So what to do? I'd build an outdict out of stardicts while opt_in is true, but I may not fully understand the problem. So</p>\n\n<pre><code> outdict={}\n\n for id,actionlist in bigdict.items():\n\n   opted_in=False  # initial state\n   outdict[id] = [] \n\n   for index,stardict in enumerate(actionlist):\n      if stardict['shortDesc'] == 'BADGE_OPT':\n          if ( stardict['d01'] == 'OPT-IN') opted_in = True\n          if ( stardict['d01'] == 'OPT-OUT' opted_in = False\n      if opted_in:\n          outdict[id].append( stardict)\n</code></pre>\n\n<p>and then process outdict. Note, there is no copying of stardicts, simply assigning the same stardicts to new lists stored in a new outdict, so it should be acceptably fast.</p>\n\n<p>NB not tested.</p>\n"}], "owner": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 32757513, "answer_count": 1, "score": -1, "last_activity_date": 1443114462, "creation_date": 1443040628, "last_edit_date": 1592644375, "question_id": 32749008, "link": "https://stackoverflow.com/questions/32749008/pythonic-search-in-a-list-of-dictionaries", "title": "Pythonic search in a list of dictionaries", "body": "<p>I have a dictionary structure as follows:</p>\n<p>{ID : [{*}, {*}, {*}, ...]}</p>\n<p>i.e, each ID have a list of dictionaries, each of them representing an action in a game. The content of each of this dictionary (represent by *) is structured by these keys, and the list is <strong>ordered</strong> by the <code>gameTime</code> field:</p>\n<pre><code>userID  gameTime    gameCode    shortDesc   d01   d02   d03   d04   chapter   level   playCnt\n</code></pre>\n<p>I have to write a .csv file filled with the data corresponding to <em>userIDs</em> that met some conditions. I.e., I have to store the data related to users that, at some point, took some actions.\nFor example, I have to have the information related to each <em>userID</em> that at some point had these key/values:</p>\n<blockquote>\n<p>shortDesc : BADGE_OPT</p>\n<p>d01 : OPT-IN</p>\n</blockquote>\n<p>As <code>d01</code> is a data related to <code>shortDescription</code>, I know that when I found <code>shortDesc : BADGE_OPT</code> I have to look at <code>d01 : OPT-IN</code></p>\n<p>However I can also found a sequence of:</p>\n<blockquote>\n<p>shortDesc : BADGE_OPT / d01 : OPT-IN</p>\n<p>shortDesc : BADGE_OPT / d01 : OPT-OUT</p>\n</blockquote>\n<p>Then, I have to store just information when the <code>d01 = OPT_IN</code>, i.e., the information between any <code>d01 = OPT_OUT / d01 = OPT_IN</code> must be discard.</p>\n<p>So, there are to cases, the <code>BADGE_OPT</code> is turned on and it was never turned out. Or I can found a sequence of turn in / turn out.</p>\n<p>I know that I can iterate over my list of dictionaries, start recording (in another list) when I first find <code>d01 = OPT_IN</code>, stop when I find <code>d01 = OPT_OUT</code> and so on. But I wondering if there is a <em>pythonic</em> way to do this (get these specifics parts or information, or delete the unnecessary ones).</p>\n<p>So far I was trying something like this:</p>\n<pre><code>import numpy\nimport csv\nimport fileinput\nimport sys\n\nfrom itertools import chain\n\ndef process_data(file_path):\n    users = {}\n    \n    # Open the .csv file and creates a dict of actions\n    with open(file_path, 'rb') as csvfile:\n        spamreader = csv.DictReader(csvfile, delimiter='\\t', quoting=csv.QUOTE_NONE)\n        for row in spamreader:\n            conditions = list(row[condition_name[i]] == condition_value[i] for i in range(len(condition_name)))\n            if row[event_name] == event_value and all(conditions) == True:  \n                # Add an empty list for 'userID' if it is not registered yet in dict\n                user = row['subjectID']\n                actions = users.get(user, [])\n                # Delete the 'userID' from the information\n                del row['subjectID']\n                # Add a register of actions for this user\n                actions.append(row)\n                # Update its values\n                users[user] = actions\n            \n    # Sort each list of actions based on time\n    for user, event_list in users.iteritems():\n        users[user] = sorted(event_list, key=lambda k: k[data])\n         \n    # Write a .csv to be consumed by the app    \n    with open('eventsInput.txt', 'w') as csvfile:\n        writer = csv.writer(csvfile, delimiter='\\t')\n        # Key is the user ID\n        # Value is a list of dictionaries of its action per time\n        for user, event_list in users.iteritems():\n            events = []\n            # Produces pairs of event/time\n            for event_dict in event_list:\n                event = &quot; &quot;.join(event_dict[e] for e in event_fields)\n                time = event_dict[data]\n                events.append(event)\n                events.append(time)\n            writer.writerow([user, 1, 2, 0, 4, str(5)] + events)\n            \n    # Pos-processing\n    if len(pos_condition_name) == 0:\n        return\n        \n    f = fileinput.input('eventsInput.txt', inplace=True)\n    w = csv.writer(sys.stdout) \n    spamreader = csv.DictReader(f, delimiter='\\t', quoting=csv.QUOTE_NONE)\n    for row in spamreader:\n        conditions = list(row[pos_condition_name[i]] == pos_condition_value[i] for i in range(len(pos_condition_name)))\n        if all(conditions) == True:\n            w.writerow(row)\n\nevent_name = 'shortDesc'\nevent_value = 'ANGLE_RULE_ACTION'\nevent_fields = ['d01', 'd02', 'd03', 'd04']\ncondition_name = ['level', 'chapter']\ncondition_value = ['3', '3']\npos_condition_name = ['shortDesc']\npos_condition_value = ['BADGE_OPT']\n</code></pre>\n<p>But this doesn't work at least for two reasons. First, it's not necessary that each dictionary have the field <code>shortDesc = BADGE_OPT</code> and <code>d01 = OPT_IN</code>. This would not even make sense in this data. However, I cannot test using <code>any</code> because the condition may be turned out later, and I have to store only the information relative to the period in which the condition value was <code>in</code>.</p>\n"}, {"tags": ["python", "mysql", "sql", "pyodbc"], "comments": [{"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 1, "creation_date": 1449666876, "post_id": 32748982, "comment_id": 56105630, "body": "The short answer is &quot;No&quot; (ref: <a href=\"https://groups.google.com/forum/#!topic/pyodbc/zuXrEgk_14A\" rel=\"nofollow noreferrer\">here</a>). In some cases a workaround is possible, e.g., with EXEC for stored procedures in T-SQL, as explained in the answer <a href=\"http://stackoverflow.com/a/34179375/2144390\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 5369481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/732ae18d503aed5062db58db327e0864?s=128&d=identicon&r=PG&f=1", "display_name": "randomdev2", "link": "https://stackoverflow.com/users/5369481/randomdev2"}, "edited": false, "score": 0, "creation_date": 1443044737, "post_id": 32749863, "comment_id": 53340660, "body": "Those are qmark style placeholders. I am talking about named style placeholders, or named parameters: <a href=\"https://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute\" rel=\"nofollow noreferrer\">sqlite3</a> --&gt; <code>:colname</code>; <a href=\"http://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-execute.html\" rel=\"nofollow noreferrer\">mysql-connector</a> --&gt; <code>%(colname)s</code>"}, {"owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "reply_to_user": {"reputation": 155, "user_id": 5369481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/732ae18d503aed5062db58db327e0864?s=128&d=identicon&r=PG&f=1", "display_name": "randomdev2", "link": "https://stackoverflow.com/users/5369481/randomdev2"}, "edited": false, "score": 1, "creation_date": 1443055021, "post_id": 32749863, "comment_id": 53343757, "body": "I haven&#39;t been in the code in a while, but last I was, they were not supported. You can pass as <code>x, y</code> or <code>(x, y)</code>. With <code>executemany</code>, you can pass as <code>((x, y), (a, b))</code>. You can make a feature request here, it would be nice to have: <a href=\"https://github.com/mkleehammer/pyodbc/issues\" rel=\"nofollow noreferrer\">github.com/mkleehammer/pyodbc/issues</a>"}], "tags": [], "owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "is_accepted": true, "score": 12, "last_activity_date": 1546591183, "last_edit_date": 1546591183, "creation_date": 1443043907, "answer_id": 32749863, "question_id": 32748982, "link": "https://stackoverflow.com/questions/32748982/does-pyodbc-support-any-form-of-named-parameters/32749863#32749863", "title": "Does pyodbc support any form of named parameters?", "body": "<p>It doesn't support named parameters, but bound parameters passed in the correct order are fairly straightforward:</p>\n\n<pre><code>x = \"This\"\ny = 345\n\nmssql_cur.execute(\"SELECT * FROM mytable WHERE colx = ? AND coly = ?\", x, y)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>mssql_cur.execute(\"SELECT * FROM mytable WHERE colx = ? AND coly = ?\", (x, y))\n</code></pre>\n\n<p>More details and options here, such as passing <code>executemany</code> parameters:</p>\n\n<p><a href=\"https://github.com/mkleehammer/pyodbc/wiki/Cursor\" rel=\"noreferrer\">https://github.com/mkleehammer/pyodbc/wiki/Cursor</a></p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 155, "user_id": 5369481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/732ae18d503aed5062db58db327e0864?s=128&d=identicon&r=PG&f=1", "display_name": "randomdev2", "link": "https://stackoverflow.com/users/5369481/randomdev2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18246, "favorite_count": 0, "accepted_answer_id": 32749863, "answer_count": 1, "score": 14, "last_activity_date": 1546591183, "creation_date": 1443040554, "question_id": 32748982, "link": "https://stackoverflow.com/questions/32748982/does-pyodbc-support-any-form-of-named-parameters", "title": "Does pyodbc support any form of named parameters?", "body": "<p>I know sqlite3 has</p>\n\n<pre><code>data = {'test_col': 012345679}\nsqlite3_conn.execute(\"\"\"\n    UPDATE test_db SET test_col = :test_col\n    ;\"\"\", data)\n</code></pre>\n\n<p>and mysql-connector-python has</p>\n\n<pre><code>data = {'test_col': 012345679}\nmysql_conn.execute(\"\"\"\n    UPDATE test_db SET test_col = %(test_col)s\n    ;\"\"\", data)\n</code></pre>\n\n<p>but does pyodbc support any form of named parameters? I like being able to just pass a <code>dict</code> to the execute method. It is very convenient, and with some of my queries, such as <code>INSERT INTO ... ON DUPLICATE KEY UPDATE</code>, it is needed.</p>\n"}, {"tags": ["python", "upload", "python-3.4", "ftplib"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4253609, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tO1Ff.jpg?s=128&g=1", "display_name": "INoble", "link": "https://stackoverflow.com/users/4253609/inoble"}, "edited": false, "score": 0, "creation_date": 1443045065, "post_id": 32749237, "comment_id": 53340798, "body": "Thanks!  I didn&#39;t know that happened."}], "tags": [], "owner": {"reputation": 1774, "user_id": 1181553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fdb435376f06014566318fd7e920d25c?s=128&d=identicon&r=PG", "display_name": "miniBill", "link": "https://stackoverflow.com/users/1181553/minibill"}, "is_accepted": true, "score": 0, "last_activity_date": 1443041446, "creation_date": 1443041446, "answer_id": 32749237, "question_id": 32748975, "link": "https://stackoverflow.com/questions/32748975/python-file-uploader-denying-permission-some-of-the-time/32749237#32749237", "title": "Python File Uploader denying permission *some* of the time", "body": "<p>If the third party program has opened the files in an exclusive mode (which is the default) then you cannot open them yourself until it has let go of them.</p>\n\n<p>Considering that it's third party code you can't change the mode in which the file is open, but you'll have to wait for the program to close the files before trying to manipulate them.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/50744/wait-until-file-is-unlocked-in-net\" title=\"this question\">this question</a></p>\n"}], "owner": {"reputation": 59, "user_id": 4253609, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tO1Ff.jpg?s=128&g=1", "display_name": "INoble", "link": "https://stackoverflow.com/users/4253609/inoble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 32749237, "answer_count": 1, "score": 1, "last_activity_date": 1443041446, "creation_date": 1443040526, "question_id": 32748975, "link": "https://stackoverflow.com/questions/32748975/python-file-uploader-denying-permission-some-of-the-time", "title": "Python File Uploader denying permission *some* of the time", "body": "<p>The code below 1. Identifies files that are created in a directory and 2. Uploads them to my webserver.</p>\n\n<p>My problem is that the program is only successful when I copy and paste a file into the directory \"path_to_watch\".  The program fails when I use a third-party program (NBA Live 06) that creates files in the \"path_to_watch\" directory.</p>\n\n<p>The error I receive is:  \"PermissionError: [Errno 13] Permission denied: 'filename.txt'\"</p>\n\n<pre><code>import os, time\nfrom ftplib import FTP\n\ndef idFiles():\n    path_to_watch = r\"c:\\Users\\User\\gamestats\"\n\n    before = dict ([(f, None) for f in os.listdir (path_to_watch)])\n\n    while True:\n        time.sleep (1)\n\n        after = dict ([(f, None) for f in os.listdir (path_to_watch)])\n        added = [f for f in after if not f in before]\n\n        if added: \n            ## edit filename to prepare for upload\n            upload = str(\", \".join (added))\n\n            ftp = FTP('www.website.com')\n            ftp.login(user='username', passwd='password')\n            ftp.cwd('archives')\n\n            ## error is called on this following line\n            ftp.storbinary('STOR ' + upload, open(upload, 'rb'))\n\n        #resets timer\n        before = after\n\nidFiles()\n</code></pre>\n\n<p>Many thanks in advance for any help.</p>\n"}, {"tags": ["python", "optimization"], "comments": [{"owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "edited": false, "score": 0, "creation_date": 1443040595, "post_id": 32748963, "comment_id": 53338700, "body": "Can you change the format of the file?"}, {"owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "edited": false, "score": 0, "creation_date": 1443040624, "post_id": 32748963, "comment_id": 53338722, "body": "Like is this for a class, can that formate be easily changed?"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1443041640, "post_id": 32748963, "comment_id": 53339233, "body": "Why is each in its own dict when they have unique keys?"}, {"owner": {"reputation": 35, "user_id": 387210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a45047375ffaffa385749b4ba92d45a1?s=128&d=identicon&r=PG", "display_name": "LZAntal", "link": "https://stackoverflow.com/users/387210/lzantal"}, "reply_to_user": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "edited": false, "score": 0, "creation_date": 1443042462, "post_id": 32748963, "comment_id": 53339632, "body": "@JeffreyHaines No I can&#39;t change the format I am getting the file this way"}, {"owner": {"reputation": 35, "user_id": 387210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a45047375ffaffa385749b4ba92d45a1?s=128&d=identicon&r=PG", "display_name": "LZAntal", "link": "https://stackoverflow.com/users/387210/lzantal"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1443042530, "post_id": 32748963, "comment_id": 53339664, "body": "@IgnacioVazquez-Abrams the keys are unique to each row, but other rows have the same keys but with different associated values with it"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1443042590, "post_id": 32748963, "comment_id": 53339701, "body": "So then the answer is &quot;no reason at all&quot;."}, {"owner": {"reputation": 35, "user_id": 387210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a45047375ffaffa385749b4ba92d45a1?s=128&d=identicon&r=PG", "display_name": "LZAntal", "link": "https://stackoverflow.com/users/387210/lzantal"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1443048218, "post_id": 32748963, "comment_id": 53341929, "body": "@IgnacioVazquez-Abrams Oh sorry I see what you meant. After this it is sent over to be processed and combined with other data. I am using a dict to hold the values. So thats why they all need their own dict instead of using one dict since the keys are unique"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 387210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a45047375ffaffa385749b4ba92d45a1?s=128&d=identicon&r=PG", "display_name": "LZAntal", "link": "https://stackoverflow.com/users/387210/lzantal"}, "edited": false, "score": 0, "creation_date": 1443048463, "post_id": 32749277, "comment_id": 53342007, "body": "Like it, it removes the duplication of split and the use of hard indexes."}], "tags": [], "owner": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "is_accepted": true, "score": 5, "last_activity_date": 1443041595, "creation_date": 1443041595, "answer_id": 32749277, "question_id": 32748963, "link": "https://stackoverflow.com/questions/32748963/can-this-code-be-rewritten-to-be-more-pythonic/32749277#32749277", "title": "Can this code be rewritten to be more pythonic?", "body": "<pre><code>size = 'GG|0,WQ|3,EW|8,RE|23'\nelements = size.split(',')\na = [dict([x.split('|')]) for x in elements]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "is_accepted": false, "score": 0, "last_activity_date": 1443042771, "creation_date": 1443042771, "answer_id": 32749581, "question_id": 32748963, "link": "https://stackoverflow.com/questions/32748963/can-this-code-be-rewritten-to-be-more-pythonic/32749581#32749581", "title": "Can this code be rewritten to be more pythonic?", "body": "<p>Perhaps you can use python regex... You can take this further obviously</p>\n\n<pre><code>import re\nsize = 'GG|0,WQ|3,EW|8,RE|23'\npattern = re.compile('[A-Z][A-Z][|][0-9]+')\nmy_list = re.findall(pattern, size)\nmy_dic = [dict([item.split('|')]) for item in my_list]\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 387210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a45047375ffaffa385749b4ba92d45a1?s=128&d=identicon&r=PG", "display_name": "LZAntal", "link": "https://stackoverflow.com/users/387210/lzantal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32749277, "answer_count": 2, "score": 0, "last_activity_date": 1443042843, "creation_date": 1443040479, "question_id": 32748963, "link": "https://stackoverflow.com/questions/32748963/can-this-code-be-rewritten-to-be-more-pythonic", "title": "Can this code be rewritten to be more pythonic?", "body": "<p>I read in values from a file. I have a line that has this format\nsize = 'GG|0,WQ|3,EW|8,RE|23'\nI want it to be a list of dictionary.\nRight now I use this code which works perfect but it seems like there has to be a cleaner way to do it.</p>\n\n<pre><code>&gt;&gt;&gt; size = 'GG|0,WQ|3,EW|8,RE|23'\n&gt;&gt;&gt; a = [{i.split('|')[0]:i.split('|')[1]} for i in size.split(',')]\n&gt;&gt;&gt; a\n[{'GG': '0'}, {'WQ': '3'}, {'EW': '8'}, {'RE': '23'}]\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": ["python", "twisted"], "comments": [{"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443040833, "post_id": 32748960, "comment_id": 53338832, "body": "These seem related: <a href=\"https://bitbucket.org/pypa/setuptools/pull-requests/33/rename-script-templatepy-to-script/\" rel=\"nofollow noreferrer\">pypa/setuptools #33 - Rename &#39;script template.py&#39; to &#39;script-template.py&#39;</a> and <a href=\"https://bitbucket.org/pypa/setuptools/issues/134/spaces-in-file-names-make-it-impossible-to\" rel=\"nofollow noreferrer\">#134 - Spaces in file names make it impossible to package for Solaris 9 and 10</a>"}, {"owner": {"reputation": 2163, "user_id": 1781548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cae6c8f9ef172f395b2b183320804fe5?s=128&d=identicon&r=PG", "display_name": "Pippi", "link": "https://stackoverflow.com/users/1781548/pippi"}, "reply_to_user": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443043703, "post_id": 32748960, "comment_id": 53340243, "body": "Thx for the link! When I did `ls -all /usr/lib/python2.6/vendor-packages/setuptools&quot;, the list does not contain a file starting with script. It seems to be a different problem?"}, {"owner": {"reputation": 29455, "user_id": 13564, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e1554622707bedd9202884900430b838?s=128&d=identicon&r=PG", "display_name": "Glyph", "link": "https://stackoverflow.com/users/13564/glyph"}, "edited": false, "score": 0, "creation_date": 1443170594, "post_id": 32748960, "comment_id": 53394794, "body": "12.1 is installable via <code>pip</code>; why do you believe you need to get it from the Twisted website?"}, {"owner": {"reputation": 29455, "user_id": 13564, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e1554622707bedd9202884900430b838?s=128&d=identicon&r=PG", "display_name": "Glyph", "link": "https://stackoverflow.com/users/13564/glyph"}, "edited": false, "score": 0, "creation_date": 1443170656, "post_id": 32748960, "comment_id": 53394844, "body": "It looks like you are installing onto Solaris.  What version of Solaris? What architecture? What version of Python 2.6?  Are you using virtualenv?  Are you using a vendor-built version of Python, or did you build your own?"}, {"owner": {"reputation": 29455, "user_id": 13564, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e1554622707bedd9202884900430b838?s=128&d=identicon&r=PG", "display_name": "Glyph", "link": "https://stackoverflow.com/users/13564/glyph"}, "edited": false, "score": 0, "creation_date": 1443170773, "post_id": 32748960, "comment_id": 53394922, "body": "Please do not use Python 2.6.  Upgrade to at least version 2.7.  It is no longer security-supported (and has not been for 2 years now - <a href=\"https://www.python.org/download/releases/2.6.9/\" rel=\"nofollow noreferrer\">python.org/download/releases/2.6.9</a> ), and so by using it you potentially put your users at risk."}, {"owner": {"reputation": 29455, "user_id": 13564, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e1554622707bedd9202884900430b838?s=128&d=identicon&r=PG", "display_name": "Glyph", "link": "https://stackoverflow.com/users/13564/glyph"}, "edited": false, "score": 0, "creation_date": 1443170912, "post_id": 32748960, "comment_id": 53395013, "body": "Please also do not use such old versions of Twisted; upgrade to <i>at least</i> 14.0.2, but please consider upgrading to the most recent version.  (Note that we have just stopped supporting Python 2.6 because it is no longer updated either.)"}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 323971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p6qKH.jpg?s=128&g=1", "display_name": "Raimund Steger", "link": "https://stackoverflow.com/users/323971/raimund-steger"}, "is_accepted": false, "score": 0, "last_activity_date": 1462096587, "creation_date": 1462096587, "answer_id": 36965327, "question_id": 32748960, "link": "https://stackoverflow.com/questions/32748960/missing-file-when-installing-twisted-python/36965327#36965327", "title": "Missing file when installing Twisted python?", "body": "<p>I had a similar error installing Ansible on a Solaris 11.3 machine. System Python was 2.7.9 but I think it's comparable, i. e. 'script template.py' didn't exist in /usr/lib/python2.7/vendor-packages/setuptools.</p>\n\n<p>I was successful installing a separate copy of setuptools und using them afterwards.</p>\n\n<p>I. e. download setuptools and install them in a custom location (example):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>setuptools-20.10.1$ python setup.py install --prefix=/export/dist/Solaris-x86/stw/setuptools-20.10.1\n</code></pre>\n\n<p>Then build your other package with (in this example) <code>PYTHONPATH=/export/dist/Solaris-x86/stw/setuptools-20.10.1/lib/python2.7/site-packages</code>.</p>\n"}], "owner": {"reputation": 2163, "user_id": 1781548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cae6c8f9ef172f395b2b183320804fe5?s=128&d=identicon&r=PG", "display_name": "Pippi", "link": "https://stackoverflow.com/users/1781548/pippi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462096587, "creation_date": 1443040468, "last_edit_date": 1443044141, "question_id": 32748960, "link": "https://stackoverflow.com/questions/32748960/missing-file-when-installing-twisted-python", "title": "Missing file when installing Twisted python?", "body": "<p>I am installing Twisted 12.1, which must be done by downloading from Twisted website. I am getting the following error after <code>python setup.py install</code>, which complains that a script file in setuptools is missing. Script file seems should be installed along with Python2.6. Can anyone point me to the direction of where to find such script file? </p>\n\n<pre><code>Processing Twisted-12.1.0-py2.6-solaris-2.12-i86pc.egg\ncreating /usr/lib/python2.6/site-packages/Twisted-12.1.0-py2.6-solaris-2.12-i86pc.egg\nExtracting Twisted-12.1.0-py2.6-solaris-2.12-i86pc.egg to /usr/lib/python2.6/site-packages\nAdding Twisted 12.1.0 to easy-install.pth file\nerror: /usr/lib/python2.6/vendor-packages/setuptools/script template.py: No such file or directory\n</code></pre>\n"}, {"tags": ["python", "numpy", "image-processing", "scipy"], "comments": [{"owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 2, "creation_date": 1443043155, "post_id": 32748950, "comment_id": 53339984, "body": "<code>np.where(img == label)</code> (or equivalently <code>np.nonzero(img == label)</code>) will be faster than iterating through with <code>nditer</code>.  However, do you actually need the indices?  If you&#39;re wanting to extract values of some other array, <code>data[img == label]</code> will be faster than <code>i, j = np.where(img == label); data[j, j]</code>."}, {"owner": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "reply_to_user": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 0, "creation_date": 1443454890, "post_id": 32748950, "comment_id": 53489364, "body": "@JoeKington Turns out <code>np.where</code> will not always be faster than iterating. I just made some edits to my question that reflect this."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1443460863, "post_id": 32748950, "comment_id": 53492648, "body": "Did you eliminate the use of <code>np.unique</code> from Salvador Dali and BHAT IRSHAD&#39;s answers?"}, {"owner": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1444087032, "post_id": 32748950, "comment_id": 53743671, "body": "@WarrenWeckesser yes"}, {"owner": {"reputation": 6107, "user_id": 7851470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d10f0dc1bc1f340708d6f6b4c8ec3866?s=128&d=identicon&r=PG&f=1", "display_name": "Georgy", "link": "https://stackoverflow.com/users/7851470/georgy"}, "edited": false, "score": 0, "creation_date": 1590417521, "post_id": 32748950, "comment_id": 109664577, "body": "Related: <a href=\"https://stackoverflow.com/q/33281957/7851470\">faster alternative to numpy.where?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1443059967, "post_id": 32749574, "comment_id": 53344833, "body": "Because <code>img</code> was computed using <code>scipy.ndimage.measurements.label()</code>, it is not necessary to call <code>np.unique(img)</code> to get its unique values.  We already know the values are 0, 1, 2, ..., <code>num_labels</code>.  <code>num_labels</code> is also known, because it is the second return value of <code>label()</code>.  So you could replace <code>np.unique(img)[1:]</code> with <code>range(1, num_labels+1)</code>."}], "tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": false, "score": 2, "last_activity_date": 1443120533, "last_edit_date": 1443120533, "creation_date": 1443042754, "answer_id": 32749574, "question_id": 32748950, "link": "https://stackoverflow.com/questions/32748950/fast-way-to-turn-a-labeled-image-into-a-dictionary-of-label-coordinates/32749574#32749574", "title": "Fast way to turn a labeled image into a dictionary of { label : [coordinates] }", "body": "<p>You can do something like this (let <code>img</code> is your original nd.array)</p>\n\n<pre><code>res = {}\nfor i in np.unique(img)[1:]:\n  x, y = np.where(a == i)\n  res[i] = zip(list(x), list(y))\n</code></pre>\n\n<p>which will give you what you want:</p>\n\n<pre><code>{\n 1: [(0, 1), (1, 1), (2, 1)],\n 2: [(4, 0), (4, 1), (5, 0), (5, 1)],\n 3: [(3, 4)]\n}\n</code></pre>\n\n<p>Whether it will be faster - is up to the benchmark to determine.</p>\n\n<p>Per Warren's suggestion, I do not need to use unique and can just do</p>\n\n<pre><code>res = {}\nfor i in range(1, num_labels + 1)\n    x, y = np.where(a == i)\n    res[i] = zip(list(x), list(y))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "edited": false, "score": 0, "creation_date": 1443053796, "post_id": 32749693, "comment_id": 53343468, "body": "Why do you need <code>if i</code> at the end of your comprehension?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1443060042, "post_id": 32749693, "comment_id": 53344847, "body": "See my comment to @SalvadorDali&#39;s answer about the use of <code>np.unique(img)</code>.  You could replace <code>for i in np.unique(z) if i</code> with <code>for i in range(1, num_labels + 1)</code>."}, {"owner": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "edited": false, "score": 1, "creation_date": 1443114769, "post_id": 32749693, "comment_id": 53373592, "body": "Oh, I see. The <code>if i</code> excludes the pixels labeled as 0s."}], "tags": [], "owner": {"reputation": 7271, "user_id": 4154185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SGofP.jpg?s=128&g=1", "display_name": "Irshad Bhat", "link": "https://stackoverflow.com/users/4154185/irshad-bhat"}, "is_accepted": false, "score": 0, "last_activity_date": 1443043236, "creation_date": 1443043236, "answer_id": 32749693, "question_id": 32748950, "link": "https://stackoverflow.com/questions/32748950/fast-way-to-turn-a-labeled-image-into-a-dictionary-of-label-coordinates/32749693#32749693", "title": "Fast way to turn a labeled image into a dictionary of { label : [coordinates] }", "body": "<p>Try this:</p>\n\n<pre><code>&gt;&gt;&gt; z\narray([[0, 1, 0, 0, 0, 0],\n       [0, 1, 0, 0, 0, 0],\n       [0, 1, 0, 0, 0, 0],\n       [0, 0, 0, 0, 3, 0],\n       [2, 2, 0, 0, 0, 0],\n       [2, 2, 0, 0, 0, 0]])\n&gt;&gt;&gt; {i:zip(*np.where(z==i)) for i in np.unique(z) if i}\n{1: [(0, 1), (1, 1), (2, 1)], 2: [(4, 0), (4, 1), (5, 0), (5, 1)], 3: [(3, 4)]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "edited": false, "score": 0, "creation_date": 1443114965, "post_id": 32750296, "comment_id": 53373710, "body": "I think your method is the fastest of the proposed solutions, but I haven&#39;t done thorough testing yet. Surprisingly, for large numbers of labels (~30,000), it seems like iterating through each image pixel (~75,000,000 of them) ends up being faster. When I do some thorough comparisons I&#39;ll update my question with what I find."}, {"owner": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "edited": false, "score": 0, "creation_date": 1443454944, "post_id": 32750296, "comment_id": 53489394, "body": "Just got around to doing a more detailed comparison. Lemme know what you think."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "edited": false, "score": 0, "creation_date": 1443460662, "post_id": 32750296, "comment_id": 53492532, "body": "@bennlich Nice comparison.  I suspected the performance would depend strongly on the density of the labels and on the number of unique labels."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": false, "score": 4, "last_activity_date": 1443045984, "creation_date": 1443045984, "answer_id": 32750296, "question_id": 32748950, "link": "https://stackoverflow.com/questions/32748950/fast-way-to-turn-a-labeled-image-into-a-dictionary-of-label-coordinates/32750296#32750296", "title": "Fast way to turn a labeled image into a dictionary of { label : [coordinates] }", "body": "<p>Here's a possibility:</p>\n\n<pre><code>import numpy as np\n\na = np.array([[0, 1, 0, 0, 0, 0],\n              [0, 1, 0, 0, 0, 0],\n              [0, 1, 0, 0, 0, 0],\n              [0, 0, 0, 0, 3, 0],\n              [2, 2, 0, 0, 0, 0],\n              [2, 2, 0, 0, 0, 0]])\n\n# If the array was computed using scipy.ndimage.measurements.label, you\n# already know how many labels there are.\nnum_labels = 3\n\nnz = np.nonzero(a)\ncoords = np.column_stack(nz)\nnzvals = a[nz[0], nz[1]]\nres = {k:coords[nzvals == k] for k in range(1, num_labels + 1)}\n</code></pre>\n\n<p>I called this script <code>get_label_indices.py</code>. Here's a sample run:</p>\n\n<pre><code>In [97]: import pprint\n\nIn [98]: run get_label_indices.py\n\nIn [99]: pprint.pprint(res)\n{1: array([[0, 1],\n       [1, 1],\n       [2, 1]]),\n 2: array([[4, 0],\n       [4, 1],\n       [5, 0],\n       [5, 1]]),\n 3: array([[3, 4]])}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2379410"}, "is_accepted": false, "score": 0, "last_activity_date": 1443695598, "last_edit_date": 1495535334, "creation_date": 1443695598, "answer_id": 32885342, "question_id": 32748950, "link": "https://stackoverflow.com/questions/32748950/fast-way-to-turn-a-labeled-image-into-a-dictionary-of-label-coordinates/32885342#32885342", "title": "Fast way to turn a labeled image into a dictionary of { label : [coordinates] }", "body": "<p>This is basically an <code>argsort</code> operation, with some additional work to get the desired format:</p>\n\n<pre><code>def sorting_based(img, nlabels):\n    img_flat = img.ravel()\n\n    label_counts = np.bincount(img_flat)\n    lin_idx = np.argsort(img_flat)[label_counts[0]:]\n    coor = np.column_stack(np.unravel_index(lin_idx, img.shape))\n\n    ptr = np.cumsum(label_counts[1:-1])\n    out = dict(enumerate(np.split(coor, ptr), start=1))\n\n    return out\n</code></pre>\n\n<p>As you found out, doing <code>np.where(img == label)</code> for each label results in quadratic runtime <code>O(m*n)</code>, with <code>m=n_pixels</code> and <code>n=n_labels</code>. The sorting based approach reduces the complexity to <code>O(m*log(m) + n)</code>.</p>\n\n<p>It is possible to do this operation in linear time, but I don't think it's possible to vectorize with Numpy. You could abuse the <code>scipy.sparse.csr_matrix</code> similar to <a href=\"https://stackoverflow.com/a/26888164\">this answer</a>, but at that point you're probably better off writing code that actually makes sense, in Numba, Cython, etc.</p>\n"}], "owner": {"reputation": 1180, "user_id": 1457005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a908cb429be7d669ab24aa76f34d5df?s=128&d=identicon&r=PG", "display_name": "bennlich", "link": "https://stackoverflow.com/users/1457005/bennlich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 1, "answer_count": 4, "score": 7, "last_activity_date": 1443695598, "creation_date": 1443040397, "last_edit_date": 1443454806, "question_id": 32748950, "link": "https://stackoverflow.com/questions/32748950/fast-way-to-turn-a-labeled-image-into-a-dictionary-of-label-coordinates", "title": "Fast way to turn a labeled image into a dictionary of { label : [coordinates] }", "body": "<p>Say I've labeled an image with <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.label.html\" rel=\"nofollow\">scipy.ndimage.measurements.label</a> like so:</p>\n\n<pre><code>[[0, 1, 0, 0, 0, 0],\n [0, 1, 0, 0, 0, 0],\n [0, 1, 0, 0, 0, 0],\n [0, 0, 0, 0, 3, 0],\n [2, 2, 0, 0, 0, 0],\n [2, 2, 0, 0, 0, 0]]\n</code></pre>\n\n<p>What's a fast way to collect the coordinates belonging to each label? I.e. something like:</p>\n\n<pre><code>{ 1: [[0, 1], [1, 1], [2, 1]],\n  2: [[4, 0], [4, 1], [5, 0], [5, 1]],\n  3: [[3, 4]] }\n</code></pre>\n\n<p>I'm working with images that are ~15,000 x 5000 pixels in size, and roughly half of each image's pixels are labeled (i.e. non-zero).</p>\n\n<p>Rather than iterating through the entire image with <code>nditer</code>, would it be faster to do something like <code>np.where(img == label)</code> for each label?</p>\n\n<p>EDIT:</p>\n\n<p>Which algorithm is fastest depends on how big the labeled image is as compared to how many labels it has. Warren Weckesser and Salvador Dali / BHAT IRSHAD's methods (which are based on <code>np.nonzero</code> and <code>np.where</code>) all seem to scale linearly with the number of labels, whereas iterating through each image element with <code>nditer</code> obviously scales linearly with the size of labeled image.</p>\n\n<p>The results of a small test:</p>\n\n<pre><code>size: 1000 x 1000, num_labels: 10\nweckesser ... 0.214357852936s \ndali ... 0.650229930878s \nnditer ... 6.53645992279s \n\n\nsize: 1000 x 1000, num_labels: 100\nweckesser ... 0.936990022659s \ndali ... 1.33582305908s \nnditer ... 6.81486487389s \n\n\nsize: 1000 x 1000, num_labels: 1000\nweckesser ... 8.43906402588s \ndali ... 9.81333303452s \nnditer ... 7.47897100449s \n\n\nsize: 1000 x 1000, num_labels: 10000\nweckesser ... 100.405524015s \ndali ... 118.17239809s \nnditer ... 9.14583897591s\n</code></pre>\n\n<p>So the question becomes more specific:</p>\n\n<p>For labeled images in which the number of labels is on the order of <code>sqrt(size(image))</code> is there an algorithm to gather label coordinates that is faster than iterating through every image element (i.e. with <code>nditer</code>)?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 6936, "user_id": 3868428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e7739b5c5f4626a9edde23f1b0c554?s=128&d=identicon&r=PG&f=1", "display_name": "JoeCondron", "link": "https://stackoverflow.com/users/3868428/joecondron"}, "is_accepted": true, "score": 1, "last_activity_date": 1443041143, "creation_date": 1443041143, "answer_id": 32749161, "question_id": 32748910, "link": "https://stackoverflow.com/questions/32748910/how-to-do-join-of-multiindex-dataframe-with-another-multiindex-dataframe/32749161#32749161", "title": "How to do join of multiindex dataframe with another multiindex dataframe?", "body": "<p>It's not clear from the question which index levels the data frames share. I think you need to revise the set-up code as it gives an error at the definition of <code>sngl</code>. Anyway, suppose <code>mult</code> shares the first and second level with <code>sngl</code> you can just drop the second level from the index of <code>mult</code> and index in: </p>\n\n<pre><code>mult[:] = sngl.loc[mult.index.droplevel(2)].values\n</code></pre>\n\n<p>On a side note, you can construct a multi index from a product directly using <code>pd.MultiIndex.from_product</code> rather than using <code>itertools</code></p>\n"}], "owner": {"reputation": 1867, "user_id": 5240614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/yyW6r.jpg?s=128&g=1", "display_name": "Rex", "link": "https://stackoverflow.com/users/5240614/rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 32749161, "answer_count": 1, "score": 0, "last_activity_date": 1443041917, "creation_date": 1443040224, "last_edit_date": 1495542577, "question_id": 32748910, "link": "https://stackoverflow.com/questions/32748910/how-to-do-join-of-multiindex-dataframe-with-another-multiindex-dataframe", "title": "How to do join of multiindex dataframe with another multiindex dataframe?", "body": "<p>This is to go further from the following thread:\n<a href=\"https://stackoverflow.com/questions/32747772/how-to-do-join-of-multiindex-dataframe-with-a-single-index-dataframe\">How to do join of multiindex dataframe with a single index dataframe?</a></p>\n\n<p>The multi-indices of df1 are sublevel indices of df2.</p>\n\n<pre><code>In [1]: import pandas as pd\nIn [2]: import numpy as np\nIn [3]: import itertools\nIn [4]: inner = ('a','b')\nIn [5]: outer = ((10,20), (1,2))\nIn [6]: cols = ('one','two','three','four')\nIn [7]: sngl = pd.DataFrame(np.random.randn(2,4), index=inner, columns=cols)\nIn [8]: index_tups = list(itertools.product(*(outer + (inner,))))\nIn [9]: index_mult = pd.MultiIndex.from_tuples(index_tups)\nIn [10]: mult = pd.DataFrame(index=index_mult, columns=cols)\nIn [11]: sngl\nOut[11]: \n        one       two     three      four\na  2.946876 -0.751171  2.306766  0.323146\nb  0.192558  0.928031  1.230475 -0.256739\n\nIn [12]: mult\nOut[12]: \n        one  two three four\n10 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n20 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n\n\nIn [13]: mult.ix[(10,1)] = sngl\n\nIn [14]: mult\nOut[14]: \n        one  two three four\n10 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n20 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n\n# the new dataframes\nsng2=pd.concat([sng1,sng1],keys=['X','Y'])\nmult2=pd.concat([mult,mult],keys=['X','Y'])\n\nIn [110]:\n\nsng2\nOut[110]:\n             one     two           three    four\nX   a   0.206810    -1.056264   -0.572809   -0.314475\n    b   0.514873    -0.941380   0.132694    -0.682903\nY   a   0.206810    -1.056264   -0.572809   -0.314475\n    b   0.514873    -0.941380   0.132694    -0.682903\n\nIn [121]: mult2\nOut[121]:\n               one  two three   four\nX   10  1   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\n        2   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\n    20  1   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\n        2   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\nY   10  1   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\n        2   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\n    20  1   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\n        2   a   NaN NaN NaN NaN\n            b   NaN NaN NaN NaN\n</code></pre>\n\n<p><em>the code above is long, please scroll</em>\nThe two multilevel indices of sng2 share the 1st and 4th indices of mul2. ('X','a') for example.</p>\n\n<p>@DSM proposed a solution to work with a multiindex df2 and single index df1</p>\n\n<pre><code>mult[:] = sngl.loc[mult.index.get_level_values(2)].values\n</code></pre>\n\n<p>BUt DataFrame.index.get_level_values(2) can only work for one level of index.</p>\n"}, {"tags": ["python", "parsing", "nlp"], "comments": [{"owner": {"reputation": 132, "user_id": 4014824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/753d8db3bd7b46e32b9947a827ac6ba7?s=128&d=identicon&r=PG&f=1", "display_name": "Marko", "link": "https://stackoverflow.com/users/4014824/marko"}, "reply_to_user": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1443040234, "post_id": 32748859, "comment_id": 53338518, "body": "listOfSentences = file.split(&quot;.&quot;)"}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 6, "creation_date": 1443040302, "post_id": 32748859, "comment_id": 53338547, "body": "Splitting into sentences is a non-trivial task. Maybe you can try Natural Language Toolkit. <a href=\"http://stackoverflow.com/questions/4576077/python-split-text-on-sentences\">Link</a> to the similar question."}, {"owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "edited": false, "score": 0, "creation_date": 1443043336, "post_id": 32748859, "comment_id": 53340073, "body": "Indeed, also consider abbreviations, e.g. like this one. Tokenisation and sentence splitting is quite an interesting, albeit under-appreciated, task in. NLTK surely has tokenisation and sentence splitting functions. For a specialized solution you can also consider using <i>ucto</i> with python-ucto (<a href=\"https://github.com/proycon/ucto\" rel=\"nofollow noreferrer\">github.com/proycon/ucto</a> , <a href=\"https://github.com/proycon/python-ucto\" rel=\"nofollow noreferrer\">github.com/proycon/python-ucto</a>), which can tokenize and sentence split various languages.  [<i>disclaimer</i>: I am the author of ucto]"}], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 4014824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/753d8db3bd7b46e32b9947a827ac6ba7?s=128&d=identicon&r=PG&f=1", "display_name": "Marko", "link": "https://stackoverflow.com/users/4014824/marko"}, "edited": false, "score": 1, "creation_date": 1443040440, "post_id": 32748913, "comment_id": 53338619, "body": "okay but what if it there was a case where there wasn&#39;t a space after for example: <code>population of 142,100,.[2] falling to 142,065 at the 2011 Census</code> the [2] stops this from working"}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 2, "creation_date": 1443040613, "post_id": 32748913, "comment_id": 53338712, "body": "Also what about abbreviations followed by dot? And for example question marks, exclamation marks, etc.?"}, {"owner": {"reputation": 7271, "user_id": 4154185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SGofP.jpg?s=128&g=1", "display_name": "Irshad Bhat", "link": "https://stackoverflow.com/users/4154185/irshad-bhat"}, "edited": false, "score": 0, "creation_date": 1443042602, "post_id": 32748913, "comment_id": 53339711, "body": "You are looking for <a href=\"http://stackoverflow.com/questions/4576077/python-split-text-on-sentences\" title=\"python split text on sentences\">stackoverflow.com/questions/4576077/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7271, "user_id": 4154185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SGofP.jpg?s=128&g=1", "display_name": "Irshad Bhat", "link": "https://stackoverflow.com/users/4154185/irshad-bhat"}, "is_accepted": false, "score": -2, "last_activity_date": 1443040232, "creation_date": 1443040232, "answer_id": 32748913, "question_id": 32748859, "link": "https://stackoverflow.com/questions/32748859/accurately-splitting-sentences/32748913#32748913", "title": "Accurately splitting sentences", "body": "<p>The simplest way is to split on a dot followed by a space as:</p>\n\n<pre><code>&gt;&gt;&gt; s = 'i love carpets. In fact i own 2.4 km of the stuff.'\n&gt;&gt;&gt; s.split('. ')\n['i love carpets', 'In fact i own 2.4 km of the stuff.']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 5306209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0dcea807428d8ba872ca1cdaeafa3ac?s=128&d=identicon&r=PG&f=1", "display_name": "halfr", "link": "https://stackoverflow.com/users/5306209/halfr"}, "is_accepted": false, "score": -1, "last_activity_date": 1443040887, "creation_date": 1443040887, "answer_id": 32749089, "question_id": 32748859, "link": "https://stackoverflow.com/questions/32748859/accurately-splitting-sentences/32749089#32749089", "title": "Accurately splitting sentences", "body": "<p>Not splitting at numbers can be done using the <a href=\"https://docs.python.org/3/library/re.html#re.split\" rel=\"nofollow\">split</a> function of the <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow\">re</a> module:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; s = 'i love carpets. In fact i own 2.4 km of the stuff.'\n&gt;&gt;&gt; re.split(r'\\.[^0-9]', s)\n['i love carpets', 'In fact i own 2.4 km of the stuff.']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 918, "user_id": 4486860, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/vg7mA.jpg?s=128&g=1", "display_name": "Adam Bittlingmayer", "link": "https://stackoverflow.com/users/4486860/adam-bittlingmayer"}, "edited": false, "score": 0, "creation_date": 1549403882, "post_id": 32749119, "comment_id": 95888486, "body": "What if the sentence has <code>Mr.</code> (or <code>i.e.</code>) in it?  Your own example yields <code>[&quot;your text here&quot;, &quot;i.e&quot;, &quot;something.&quot;]</code>."}], "tags": [], "owner": {"reputation": 442, "user_id": 3716130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4173d0fd73813b54bca67cd1af7217?s=128&d=identicon&r=PG&f=1", "display_name": "isamert", "link": "https://stackoverflow.com/users/3716130/isamert"}, "is_accepted": true, "score": -2, "last_activity_date": 1443041002, "last_edit_date": 1495539867, "creation_date": 1443041002, "answer_id": 32749119, "question_id": 32748859, "link": "https://stackoverflow.com/questions/32748859/accurately-splitting-sentences/32749119#32749119", "title": "Accurately splitting sentences", "body": "<p>If you have sentences both ending with \".\" and \". \", you can try regex: </p>\n\n<pre><code>import re\n\ntext = \"your text here. i.e. something.\"\nsentences = re.split(r'(?&lt;!\\w\\.\\w.)(?&lt;![A-Z][a-z]\\.)(?&lt;=\\.|\\?)\\s', text)\n</code></pre>\n\n<p>source: <a href=\"https://stackoverflow.com/questions/25735644/python-regex-for-splitting-text-into-sentences-sentence-tokenizing\">Python - RegEx for splitting text into sentences (sentence-tokenizing)</a></p>\n"}, {"comments": [{"owner": {"reputation": 696, "user_id": 1455800, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/mb17U.jpg?s=128&g=1", "display_name": "pedjjj", "link": "https://stackoverflow.com/users/1455800/pedjjj"}, "edited": false, "score": 0, "creation_date": 1576171502, "post_id": 32755923, "comment_id": 104821873, "body": "AFAIK there are no up-to-date quantitative evaluations about sentence splitting. Regarding your statement that spacy is better than nltk for English: I just experience the opposite, i.e., while I switched to spacy almost completely, I figured that its sentence splitting performance is not as good as the performance of nltk punkt for English news articles."}, {"owner": {"reputation": 918, "user_id": 4486860, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/vg7mA.jpg?s=128&g=1", "display_name": "Adam Bittlingmayer", "link": "https://stackoverflow.com/users/4486860/adam-bittlingmayer"}, "reply_to_user": {"reputation": 696, "user_id": 1455800, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/mb17U.jpg?s=128&g=1", "display_name": "pedjjj", "link": "https://stackoverflow.com/users/1455800/pedjjj"}, "edited": false, "score": 0, "creation_date": 1576176318, "post_id": 32755923, "comment_id": 104824015, "body": "You may be right, I can&#39;t remember why exactly I asserted that, even though I would still bet it&#39;s true."}], "tags": [], "owner": {"reputation": 918, "user_id": 4486860, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/vg7mA.jpg?s=128&g=1", "display_name": "Adam Bittlingmayer", "link": "https://stackoverflow.com/users/4486860/adam-bittlingmayer"}, "is_accepted": false, "score": 3, "last_activity_date": 1549403763, "last_edit_date": 1549403763, "creation_date": 1443080508, "answer_id": 32755923, "question_id": 32748859, "link": "https://stackoverflow.com/questions/32748859/accurately-splitting-sentences/32755923#32755923", "title": "Accurately splitting sentences", "body": "<p>Any regex based approach cannot handle cases like <em>\"I saw Mr. Smith.\"</em>, and adding hacks for those cases is not scalable.  As user <em>est</em> has commented, any serious implementation uses data.</p>\n\n<p>If you need to handle English only then spaCy is better than NLTK:</p>\n\n<pre><code>from spacy.en import English\nen = English()\ndoc = en(u'i love carpets. In fact i own 2.4 km of the stuff.')\nfor s in list(doc.sents):\n    print s.string\n</code></pre>\n\n<p>Update: spaCy now supports many languages.</p>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 1455800, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/mb17U.jpg?s=128&g=1", "display_name": "pedjjj", "link": "https://stackoverflow.com/users/1455800/pedjjj"}, "is_accepted": false, "score": 0, "last_activity_date": 1576249036, "creation_date": 1576249036, "answer_id": 59325001, "question_id": 32748859, "link": "https://stackoverflow.com/questions/32748859/accurately-splitting-sentences/59325001#59325001", "title": "Accurately splitting sentences", "body": "<p>I found <a href=\"https://github.com/fnl/syntok/\" rel=\"nofollow noreferrer\">https://github.com/fnl/syntok/</a> to be quite good, actually the best from all the popular ones. Specifically, I tested nltk (punkt), spacy, and syntok on English news articles.</p>\n\n<pre><code>import syntok.segmenter as segmenter\n\ndocument = \"some text. some more text\"\n\nfor paragraph in segmenter.analyze(document):\n    for sentence in paragraph:\n        for token in sentence:\n            # exactly reproduce the input\n            # and do not remove \"imperfections\"\n            print(token.spacing, token.value, sep='', end='')\n    print(\"\\n\")  # reinsert paragraph separators\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 4014824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/753d8db3bd7b46e32b9947a827ac6ba7?s=128&d=identicon&r=PG&f=1", "display_name": "Marko", "link": "https://stackoverflow.com/users/4014824/marko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1801, "favorite_count": 0, "accepted_answer_id": 32749119, "answer_count": 5, "score": 5, "last_activity_date": 1576249036, "creation_date": 1443040029, "last_edit_date": 1502226039, "question_id": 32748859, "link": "https://stackoverflow.com/questions/32748859/accurately-splitting-sentences", "title": "Accurately splitting sentences", "body": "<p>My program takes a text file and splits each sentence into a list using <code>split('.')</code> meaning that it will split when it registers a full stop however it can be inaccurate.</p>\n\n<h1>For Example</h1>\n\n<pre><code>str='i love carpets. In fact i own 2.4 km of the stuff.'\n</code></pre>\n\n<h2>Output</h2>\n\n<p><code>listOfSentences = ['i love carpets', 'in fact i own 2', '4 km of the stuff']</code></p>\n\n<h2>Desired Output</h2>\n\n<pre><code> listOfSentences = ['i love carpets', 'in fact i own 2.4 km of the stuff']\n</code></pre>\n\n<p>My question is: <strong>How do I split the end of sentences and not at every full stop.</strong></p>\n"}, {"tags": ["python", "arrays", "algorithm", "numpy"], "comments": [{"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1443040353, "post_id": 32748678, "comment_id": 53338573, "body": "I am sorry for not being very clear.  each row should have the same set of elements as before applying the permutation, however the way you arrange the elements in every row should be the same. So if the element in position 0 goes to position 4, the same should happen for every row."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1443041346, "post_id": 32748678, "comment_id": 53339089, "body": "In other words, you want to permute the columns of A?"}], "answers": [{"comments": [{"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1443039754, "post_id": 32748734, "comment_id": 53338276, "body": "your method seems to be changing the values of the rows, for example in the first row before the permutation we do not have a 2, but after that we have a 2. I would like to have some kind of masking that for instance, if an element of the first row that was previously in position 0 after the permutation goes to position 4, then the same should happen for the element that is in position 0 of the second row and all the other rows."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 6, "last_activity_date": 1443039955, "last_edit_date": 1443039955, "creation_date": 1443039514, "answer_id": 32748734, "question_id": 32748678, "link": "https://stackoverflow.com/questions/32748678/apply-same-permutation-for-every-row-in-a-2d-numpy-array/32748734#32748734", "title": "Apply same permutation for every row in a 2D numpy array", "body": "<p>Generate random permutations for the number of columns in A and index into the columns of <code>A</code>, like so -</p>\n\n<pre><code>A[:,np.random.permutation(A.shape[1])]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [100]: A\nOut[100]: \narray([[3, 5, 7, 4, 7],\n       [2, 5, 2, 0, 3],\n       [1, 4, 3, 8, 8]])\n\nIn [101]: A[:,np.random.permutation(A.shape[1])]\nOut[101]: \narray([[7, 5, 7, 4, 3],\n       [3, 5, 2, 0, 2],\n       [8, 4, 3, 8, 1]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9860, "user_id": 5259477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-onW75413sAQ/AAAAAAAAAAI/AAAAAAAAAGg/jDj_mb2WdPk/photo.jpg?sz=128", "display_name": "Bas van Stein", "link": "https://stackoverflow.com/users/5259477/bas-van-stein"}, "is_accepted": false, "score": 1, "last_activity_date": 1443039840, "creation_date": 1443039840, "answer_id": 32748812, "question_id": 32748678, "link": "https://stackoverflow.com/questions/32748678/apply-same-permutation-for-every-row-in-a-2d-numpy-array/32748812#32748812", "title": "Apply same permutation for every row in a 2D numpy array", "body": "<p>It depends what you mean on every row. </p>\n\n<p>If you want to permute all values (regardless of row and column), reshape your array to 1d, permute, reshape back to 2d.</p>\n\n<p>If you want to permutate each row but not shuffle the elements among the different columns you need to loop trough the one axis and call permutation.</p>\n\n<pre><code>for i in range(len(A)):\n    A[i] = np.random.permutation(A[i])\n</code></pre>\n\n<p>It can probably done shorter somehow but that is how it can be done.</p>\n"}, {"tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": false, "score": 3, "last_activity_date": 1443039856, "creation_date": 1443039856, "answer_id": 32748813, "question_id": 32748678, "link": "https://stackoverflow.com/questions/32748678/apply-same-permutation-for-every-row-in-a-2d-numpy-array/32748813#32748813", "title": "Apply same permutation for every row in a 2D numpy array", "body": "<p>Actually you do not need to do this, from the <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.permutation.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>If x is a multi-dimensional array, it is only shuffled along its first\n  index.</p>\n</blockquote>\n\n<p>So, taking Divakar's array:</p>\n\n<pre><code>a = np.array([\n    [3, 5, 7, 4, 7],\n    [2, 5, 2, 0, 3],\n    [1, 4, 3, 8, 8]\n])\n</code></pre>\n\n<p>you can just do: <code>np.random.permutation(a)</code> and get something like:</p>\n\n<pre><code>array([[2, 5, 2, 0, 3],\n       [3, 5, 7, 4, 7],\n       [1, 4, 3, 8, 8]])\n</code></pre>\n\n<p><strong>P.S.</strong> if you need to perform column permutations - just do <code>np.random.permutation(a.T).T</code>. Similar things apply to multi-dim arrays.</p>\n"}], "owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2855, "favorite_count": 0, "accepted_answer_id": 32748734, "answer_count": 3, "score": 3, "last_activity_date": 1443040047, "creation_date": 1443039311, "question_id": 32748678, "link": "https://stackoverflow.com/questions/32748678/apply-same-permutation-for-every-row-in-a-2d-numpy-array", "title": "Apply same permutation for every row in a 2D numpy array", "body": "<p>To permute a 1D array <code>A</code> I know that you can run the following code:</p>\n\n<pre><code>import numpy as np\nA = np.random.permutation(A)\n</code></pre>\n\n<p>I have a 2D array and want to apply exactly the same permutation for every row of the array. Is there any way you can specify the numpy to do that for you?</p>\n"}, {"tags": ["python", "recursion"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1443038595, "post_id": 32748497, "comment_id": 53337662, "body": "You&#39;re not returning anything in the <code>else:</code> clause."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1443038734, "post_id": 32748497, "comment_id": 53337740, "body": "A question dealing with recursion in Python would make for a better duplicate."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1443038997, "post_id": 32748497, "comment_id": 53337866, "body": "@chepner It&#39;s the same pattern in almost all languages. The exception is languages like Lisp, where the last expression in a function is automatically returned. So I haven&#39;t made a collection of analogous questions for each language."}, {"owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443039354, "post_id": 32748497, "comment_id": 53338046, "body": "@Barmar - but I have a return k in the if clause - I thought that it would return k - why not?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443039449, "post_id": 32748497, "comment_id": 53338114, "body": "That returns it to the recursive caller, but that caller doesn&#39;t have a <code>return</code> statement to pass it on."}, {"owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443039747, "post_id": 32748497, "comment_id": 53338273, "body": "@Barmar - I thought that when if condition is met, then else won&#39;t be executed - how come putting a return in the else has an effect?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443039910, "post_id": 32748497, "comment_id": 53338337, "body": "If <code>n</code> is 2, the <code>else</code> clause is executed. It then calls <code>fact</code> recursively, which returns <code>2</code>. That returns back to the first call, which then leaves the function without returning anything."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1443039922, "post_id": 32748497, "comment_id": 53338348, "body": "@user5331677 Each recursive call executes its own return. The last call in the chain uses the return in the <code>if</code> condition, but all the previous calls would not."}, {"owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443040155, "post_id": 32748497, "comment_id": 53338471, "body": "@Barmar - is &quot;first call&quot; is same as &quot;if&quot; loop? - In if loop I have a return k?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1443040223, "post_id": 32748497, "comment_id": 53338509, "body": "There&#39;s no such thing as an <code>if</code> loop. Loops are done with <code>while</code> and <code>for</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443040369, "post_id": 32748497, "comment_id": 53338578, "body": "The first call is when you do <code>a = fact(4, 4)</code>. That sets <code>n = 4</code> in the function. It then goes into the <code>else</code> clause, and executes <code>fact(3, 4*3)</code>. That&#39;s the second call. The third call is <code>fact(2, 12*2)</code>. 4th call is <code>fact(1, 24*1)</code>. That last call returns <code>24</code>. It then resumes the caller, which was in the <code>else</code> clause, so it doesn&#39;t return anything."}, {"owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443041406, "post_id": 32748497, "comment_id": 53339124, "body": "@Barmar - I thought if it get inside the &quot;if&quot;, then it will not get inside &quot;else&quot; - if it does not get inside else, then it can not execute  &#39;fact(n-1, k*(n-1) )&#39;?"}, {"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443041698, "post_id": 32748497, "comment_id": 53339267, "body": "Wow, this comment section got recursive quickly. @user5331677, your question has already been answered by chepner 10min ago: Different calls in the call stack may follow different code paths."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443042119, "post_id": 32748497, "comment_id": 53339465, "body": "@user5331677 You&#39;re forgetting that the function is recursive. There are <code>n</code> calls to the function -- the first <code>n-1</code> go into the <code>else</code>, the last one goes into the <code>if</code>."}, {"owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "reply_to_user": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443046125, "post_id": 32748497, "comment_id": 53341195, "body": "@LukasGraf - it is recursive because, explanations were lacking clarity! I am still not clear."}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "edited": false, "score": 0, "creation_date": 1443051447, "post_id": 32748497, "comment_id": 53342875, "body": "An <code>if</code> can contain 3 parts, predicate, consequent and alternative. like this <code>if( predicate) consequent; else alternative;</code> Either the consequent or the alternative will be run and both need to <code>return</code> a value. Computing something and not use it means the line can be omitted since you never use the result. In the end of a python function is an invisible <code>return None</code>. C++ and Python are just cousins and both Algol dialects, where the <code>if</code> came from."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "edited": false, "score": 0, "creation_date": 1443039416, "post_id": 32748527, "comment_id": 53338091, "body": "it gives correct answer - but I have a return k in the if clause - I thought that it would return k - why not?"}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "reply_to_user": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "edited": false, "score": 0, "creation_date": 1443052144, "post_id": 32748527, "comment_id": 53343061, "body": "@user5331677 Yes, everytime you call it with <code>n==1</code> it will work. For <code>2</code> it will recurse to <code>1</code> which returns <code>k</code> to the original caller, which discards the returned value and returns None. For 3 the original caller gets None, which it ignores but it self return None at it&#39;s end. Every tail position needs to return something in order for it to work, not just the first."}, {"owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "reply_to_user": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "edited": false, "score": 0, "creation_date": 1443074949, "post_id": 32748527, "comment_id": 53348838, "body": "@Sylwester - thank you"}], "tags": [], "owner": {"reputation": 44721, "user_id": 546084, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/wMoWk.jpg?s=128&g=1", "display_name": "Chris Taylor", "link": "https://stackoverflow.com/users/546084/chris-taylor"}, "is_accepted": true, "score": 1, "last_activity_date": 1443038661, "creation_date": 1443038661, "answer_id": 32748527, "question_id": 32748497, "link": "https://stackoverflow.com/questions/32748497/why-tail-recursion-of-factorial-returns-none/32748527#32748527", "title": "Why Tail recursion of factorial returns none?", "body": "<p>You haven't returned a value in the <code>else</code> clause -</p>\n\n<pre><code>else:\n    fact(n-1, k*(n-1) )\n</code></pre>\n\n<p>This should read</p>\n\n<pre><code>else:\n    return fact(n-1, k*(n-1) )\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 5331677, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70867b97c9d30b24d72a1196ce52ebe7?s=128&d=identicon&r=PG&f=1", "display_name": "user5331677", "link": "https://stackoverflow.com/users/5331677/user5331677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "closed_date": 1443038650, "accepted_answer_id": 32748527, "answer_count": 1, "score": 1, "last_activity_date": 1443038661, "creation_date": 1443038529, "question_id": 32748497, "link": "https://stackoverflow.com/questions/32748497/why-tail-recursion-of-factorial-returns-none", "closed_reason": "Duplicate", "title": "Why Tail recursion of factorial returns none?", "body": "<p>I did factorial using tail recursion, it is returning \"none\" - why</p>\n\n<pre><code>def fact(n, k):\n    print \"n = %d k = %d\" % (n,k)\n    if n == 1:\n        print \"k final = \", k\n        return k\n\n    else:\n#        print n\n        print k\n        fact(n-1, k*(n-1) )\n\na =(fact(4, 4) ) \nprint a\n</code></pre>\n"}, {"tags": ["python", "algorithm", "performance", "euclidean-distance"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 2, "creation_date": 1443038536, "post_id": 32748467, "comment_id": 53337631, "body": "This is the <a href=\"https://en.wikipedia.org/wiki/Travelling_salesman_problem\" rel=\"nofollow noreferrer\">traveling salesman problem</a>, which has no easy solution.  However, as described there, it is a lot easier to find paths that are pretty short but maybe not the absolute shortest."}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 0, "creation_date": 1443038643, "post_id": 32748467, "comment_id": 53337690, "body": "agreed, it gets slower for larger sets of points. It is an NP-hard problem and brute force approaches will run O(n!)"}], "answers": [{"tags": [], "owner": {"reputation": 807, "user_id": 5342356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ug0gx.png?s=128&g=1", "display_name": "Tibox", "link": "https://stackoverflow.com/users/5342356/tibox"}, "is_accepted": false, "score": 0, "last_activity_date": 1443041206, "creation_date": 1443041206, "answer_id": 32749170, "question_id": 32748467, "link": "https://stackoverflow.com/questions/32748467/find-the-most-efficient-path-in-term-of-shortest-distance-between-a-set-of-2d/32749170#32749170", "title": "find the most efficient path (in term of shortest distance) between a set of 2D points", "body": "<p>You can also take a look at the project <code>tsp-solver</code> \n<a href=\"https://github.com/dmishin/tsp-solver\" rel=\"nofollow\">https://github.com/dmishin/tsp-solver</a></p>\n"}], "owner": {"reputation": 5873, "user_id": 1493192, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/32662661bf4aa1d1db842f95d6b84729?s=128&d=identicon&r=PG&f=1", "display_name": "Gianni Spear", "link": "https://stackoverflow.com/users/1493192/gianni-spear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443041206, "creation_date": 1443038428, "question_id": 32748467, "link": "https://stackoverflow.com/questions/32748467/find-the-most-efficient-path-in-term-of-shortest-distance-between-a-set-of-2d", "title": "find the most efficient path (in term of shortest distance) between a set of 2D points", "body": "<p>I have a set of 2D points stored in a dictionary and i need to find the most efficient path to sampling all points (red traingles) in term of the shortest distance from a start-end point (yellow circle).</p>\n\n<p><a href=\"https://i.stack.imgur.com/915OU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/915OU.png\" alt=\"enter image description here\"></a></p>\n\n<p>dict_points = OrderedDict([(0, (0.5129102892466411, 1.2791525891782567)), (1, (1.8571436538551014, 1.3979619805011203)), (2, (2.796472292985357, 1.3021773853592946)), (3, (2.2054745567697513, 0.5231652951626251)), (4, (1.1209493135130593, 0.8220950186969501)), (5, (0.16416153316980153, 0.7241249969879273))])</p>\n\n<p>where the key is the ID of the point</p>\n\n<p>My strategy is very simple. I use all points sequence possible (720 for 6 points) and i compute the euclidean distance point-by-point starting and ending from the start-end point (yellow point). The sequence with the shortest total distance is the most efficient.</p>\n\n<p>The problem of this approach is that get very slow for a large number of points</p>\n\n<pre><code>import math\nimport itertools\n\nbase = (2.596, 2.196)\n\ndef segments(poly):\n    \"\"\"A sequence of (x,y) numeric coordinates pairs \"\"\"\n    return zip(poly, poly[1:] + [poly[0]])\n\n\n def best_path(dict_points, base=None):\n    sequence_min_distance = None\n    l = dict_points.keys()\n    gen = itertools.permutations(l)\n    min_dist = float('+inf')\n    for index, i in enumerate(gen):\n        seq = gen.next()\n        seq_list = [dict_points[s] for s in seq]\n        if base:\n            seq_list.insert(0, base)\n        points_paired = segments(seq_list)\n        tot_dist = 0\n        for points in points_paired:\n            dist = math.hypot(points[1][0] - points[0][0], points[1][1] - points[0][1])\n            tot_dist += dist\n        if tot_dist &lt;= min_dist:\n            sequence_min_distance = seq\n            min_dist = min(min_dist, tot_dist)\n    return sequence_min_distance\n\nbest_seq = best_path(dict_points)\n(5, 4, 3, 2, 1, 0)\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 1, "creation_date": 1443038471, "post_id": 32748446, "comment_id": 53337597, "body": "<code>if x=y</code> should be <code>if x==y</code>. but that can&#39;t be the error as it is not valid python code..."}, {"owner": {"reputation": 101, "user_id": 5369388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc4744fb01e6d5a0b602cd114779025?s=128&d=identicon&r=PG", "display_name": "Nagurski", "link": "https://stackoverflow.com/users/5369388/nagurski"}, "reply_to_user": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443038933, "post_id": 32748446, "comment_id": 53337837, "body": "I changed x=y to x==y and now it works for non prime numbers but not for prime numbers over 2."}], "answers": [{"tags": [], "owner": {"reputation": 4487, "user_id": 3791516, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CaaX7.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3791516/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1443039574, "creation_date": 1443039574, "answer_id": 32748743, "question_id": 32748446, "link": "https://stackoverflow.com/questions/32748446/what-is-wrong-with-my-prime-number-function-in-python/32748743#32748743", "title": "What is wrong with my prime number function in python?", "body": "<p>Here is the equivalent using the range function:</p>\n\n<pre><code>def is_prime(y):\n    for x in range(2, y):\n        if y % x == 0:\n            return False\n    return True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 5369388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc4744fb01e6d5a0b602cd114779025?s=128&d=identicon&r=PG", "display_name": "Nagurski", "link": "https://stackoverflow.com/users/5369388/nagurski"}, "is_accepted": false, "score": 0, "last_activity_date": 1443069372, "last_edit_date": 1443069372, "creation_date": 1443068390, "answer_id": 32753302, "question_id": 32748446, "link": "https://stackoverflow.com/questions/32748446/what-is-wrong-with-my-prime-number-function-in-python/32753302#32753302", "title": "What is wrong with my prime number function in python?", "body": "<p>I figured it out. I had to make it return false for y values less than 2 and had to change a x=y to x==y. This is my new program.</p>\n\n<pre><code>def is_prime(y):\n    if y&lt;2:\n        return False\n    else:\n        x=2\n        while x&lt;=y:\n            if x==y:\n                return True\n            elif y%x==0:\n                return False\n            else:\n                x=x+1\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5369388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc4744fb01e6d5a0b602cd114779025?s=128&d=identicon&r=PG", "display_name": "Nagurski", "link": "https://stackoverflow.com/users/5369388/nagurski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443069372, "creation_date": 1443038370, "last_edit_date": 1443069358, "question_id": 32748446, "link": "https://stackoverflow.com/questions/32748446/what-is-wrong-with-my-prime-number-function-in-python", "title": "What is wrong with my prime number function in python?", "body": "<p>I've seen other examples where someone used \"for x in range whatever\" but our teacher hasn't taught us that yet.</p>\n\n<pre><code>def is_prime(y):\n    x=2\n    while x&lt;=y:\n        if x=y:\n            return True\n        elif y%x==0:\n            return False\n        else:\n            x=x+1\n</code></pre>\n"}, {"tags": ["python", "flask", "gunicorn"], "comments": [{"owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "edited": false, "score": 0, "creation_date": 1443063896, "post_id": 32748326, "comment_id": 53345710, "body": "Out of curiosity, what are you doing that requires multiple non-compossible services to be treated as one site?  Is this for app dependency isolation?  And why not have a reverse-proxy in front of them all?"}, {"owner": {"reputation": 3894, "user_id": 191347, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7226597774ed3751d939858a9affbd68?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/191347/justin"}, "edited": false, "score": 0, "creation_date": 1443453178, "post_id": 32748326, "comment_id": 53488265, "body": "It&#39;s just for some micro-services, so there will be a single endpoint. Just have some extensions that need to be prefixed as well as the app. We currently have a reverse proxy in place, but this may change going forward so we wanted to do this at the route level if/when it does change on us."}], "answers": [{"comments": [{"owner": {"reputation": 3894, "user_id": 191347, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7226597774ed3751d939858a9affbd68?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/191347/justin"}, "edited": false, "score": 0, "creation_date": 1443041895, "post_id": 32748940, "comment_id": 53339362, "body": "I wanted to avoid doing this in a blueprint, as this wouldn&#39;t prefix other extensions being used in the app."}], "tags": [], "owner": {"reputation": 321, "user_id": 5364284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ec2f7ee5f973a1fdd9e3233dcd367b?s=128&d=identicon&r=PG&f=1", "display_name": "lv9", "link": "https://stackoverflow.com/users/5364284/lv9"}, "is_accepted": false, "score": 0, "last_activity_date": 1443040331, "creation_date": 1443040331, "answer_id": 32748940, "question_id": 32748326, "link": "https://stackoverflow.com/questions/32748326/add-route-prefix-to-flask-application-running-behing-gunicorn/32748940#32748940", "title": "Add route prefix to Flask application running behing Gunicorn", "body": "<p>You can prefix all routes for a specific blueprint </p>\n\n<pre><code>from flask import Blueprint\nmy_blueprint = Blueprint('my_blueprint_name', __name__, url_prefix='/my_prefix')\n</code></pre>\n\n<p>then for all your routes for the blue print simply put</p>\n\n<pre><code>@my_blueprint.route('my_route')\n</code></pre>\n\n<p>before the function definition and its route will be the url_prefix+my_route</p>\n\n<p>You may find this link helpful <a href=\"http://flask.pocoo.org/docs/0.10/patterns/urlprocessors/\" rel=\"nofollow\">http://flask.pocoo.org/docs/0.10/patterns/urlprocessors/</a></p>\n"}, {"comments": [{"owner": {"reputation": 3894, "user_id": 191347, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7226597774ed3751d939858a9affbd68?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/191347/justin"}, "edited": false, "score": 0, "creation_date": 1443453410, "post_id": 32752595, "comment_id": 53488429, "body": "I originally had #3 implemented, quick/easy, but I do like #2 a bit more so I&#39;ve gone with something similar (using a closure, in-place of the lambda. That dang PEP8 =)"}], "tags": [], "owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "is_accepted": true, "score": 5, "last_activity_date": 1443063539, "last_edit_date": 1495540979, "creation_date": 1443063539, "answer_id": 32752595, "question_id": 32748326, "link": "https://stackoverflow.com/questions/32748326/add-route-prefix-to-flask-application-running-behing-gunicorn/32752595#32752595", "title": "Add route prefix to Flask application running behing Gunicorn", "body": "<p>If you are doing app composition, then you can use the <a href=\"https://stackoverflow.com/questions/18967441/add-a-prefix-to-all-flask-routes\"><code>DispatcherMiddleware</code> trick</a> you referenced.  However, it sounds like you are trying to have a single service that is subpath mounted, but doesn't serve anything out of the \"higher\" paths at all.</p>\n\n<p>There are several different ways to do this.</p>\n\n<ol>\n<li><p>Replace <a href=\"http://flask.pocoo.org/docs/0.10/api/#flask.Flask.url_map\" rel=\"nofollow noreferrer\"><code>Flask.url_map._rules</code></a> with a <a href=\"http://werkzeug.pocoo.org/docs/0.10/routing/#werkzeug.routing.Submount\" rel=\"nofollow noreferrer\"><code>werkzeug.routing.Submount</code></a> rule factory:</p>\n\n<pre><code>from werkzeug.routing import SubPath\n\napp = Flask(__name__)\n\n# register blueprints and extensions\n# load config, etc.\n\napp.url_map._rules = SubPath(app.config['APPLICATION_ROOT'], app.url_map._rules)\n</code></pre></li>\n<li><p>Replace <a href=\"http://flask.pocoo.org/docs/0.10/api/#flask.Flask.url_rule_class\" rel=\"nofollow noreferrer\"><code>Flask.url_rule_class</code></a>:</p>\n\n<pre><code>from werkzeug.routing import Rule\n\napp.url_rule_class = lambda path, **options: Rule(PREFIX + path, **options)\n</code></pre></li>\n<li><p>Replace <code>add_url_rule</code>, as you suggest in your question.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11477479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tslnzGY8hy8/AAAAAAAAAAI/AAAAAAAClVA/grVr5GYga_8/photo.jpg?sz=128", "display_name": "William Turbayevsky", "link": "https://stackoverflow.com/users/11477479/william-turbayevsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1577395162, "last_edit_date": 1577395162, "creation_date": 1577392049, "answer_id": 59493162, "question_id": 32748326, "link": "https://stackoverflow.com/questions/32748326/add-route-prefix-to-flask-application-running-behing-gunicorn/59493162#59493162", "title": "Add route prefix to Flask application running behing Gunicorn", "body": "<p>try this</p>\n\n<pre><code>app = dash.Dash(\n    __name__,\n    server=server,\n    routes_pathname_prefix='/dash/'\n)\n</code></pre>\n"}], "owner": {"reputation": 3894, "user_id": 191347, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7226597774ed3751d939858a9affbd68?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/191347/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3910, "favorite_count": 1, "accepted_answer_id": 32752595, "answer_count": 3, "score": 3, "last_activity_date": 1577395162, "creation_date": 1443037872, "last_edit_date": 1495535240, "question_id": 32748326, "link": "https://stackoverflow.com/questions/32748326/add-route-prefix-to-flask-application-running-behing-gunicorn", "title": "Add route prefix to Flask application running behing Gunicorn", "body": "<p><strong>tldr;</strong> Looking for a way to prefix all routes within an app running behind Gunicorn without a reverse proxy/blueprint/duplicate prefix in <code>@route(PREFIX + '/')</code> etc.  </p>\n\n<hr>\n\n<p>Creating a few Python services, using Flask, running in Docker containers.<br>\nNot, currently, using Nginx/Apache for reverse proxying.  </p>\n\n<p>Have something like below that works when running flask by itself<br>\n - <em>(eg <code>% python app.py</code> responds with <code>localhost:5000/a/b/some-route</code>)</em></p>\n\n<pre><code>base_path = \"/a/b\"\napp = DispatcherMiddleware(_root_app, {base_path: self})\nrun_simple(host, port, app, **options)\n</code></pre>\n\n<p>Not sure how to achieve the same result when running behind Gunicorn.<br>\n<em>(Would really like to do this without making a blueprint for the main app. Also trying to avoid having the same prefix in every <code>@route(PREFIX + '')</code>)</em>  </p>\n\n<p><strong>Reason for doing this</strong><br>\nUsing an extension that adds a few routes, along with a blueprint. Would like to have app routes AND extension/blueprint routes to all be prefixed.</p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/questions/18967441/add-a-prefix-to-all-flask-routes\">This question</a> asked this specifically for Flask, which I'm able to get working using the <code>DispatcherMiddleware</code> approach.<br>\n  My question is how to get this working when running behind Gunicorn (no Nginx or Apache in front, just Gunicorn)</p>\n</blockquote>\n\n<hr>\n\n<h2>Potential Fix:</h2>\n\n<p>Currently using a subclass of Flask <em>(needed to do some customized logging nonsense.)</em><br>\nOverriding the <code>add_url_rule</code> works.</p>\n\n<pre><code>prefixed_rule = self._prefix_rule(rule)\nsuper().add_url_rule(prefixed_rule,\n                     endpoint=endpoint,\n                     view_func=view_func,\n                     **options)\n</code></pre>\n\n<p><em>This also works with our extensions too</em></p>\n"}, {"tags": ["python", "file", "python-3.4"], "comments": [{"owner": {"reputation": 1538, "user_id": 203976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1XaA.gif?s=128&g=1", "display_name": "cdkMoose", "link": "https://stackoverflow.com/users/203976/cdkmoose"}, "edited": false, "score": 0, "creation_date": 1443038072, "post_id": 32748231, "comment_id": 53337381, "body": "Not sure there is a definitive answer for this, likely dependent on OS, file-system and physical disk on the machine in question.  If this is intended to be a generic solution, you may want to add code to interrogate the system for parameters to calculate the best answer."}, {"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "reply_to_user": {"reputation": 1538, "user_id": 203976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1XaA.gif?s=128&g=1", "display_name": "cdkMoose", "link": "https://stackoverflow.com/users/203976/cdkmoose"}, "edited": false, "score": 0, "creation_date": 1443038167, "post_id": 32748231, "comment_id": 53337440, "body": "i was hoping to have &#39;interrogated the system&#39; by using <code>io.DEFAULT_BUFFER_SIZE</code> - but i really have no experience with the details of all  this..."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1443038747, "post_id": 32748231, "comment_id": 53337742, "body": "There&#39;s no single static answer for this even on a given system. It depends on a large number of variables, some of which can change over time or be different each time. as well as what else your program or the system is doing. The best approach might be to write something to determine a good size at that moment using certain unchanging representative test file(s). Alternatively you could write a standalone test and run it once to get a good estimate and then hardcode into your application (or make the test part of the installation or set-up process)."}, {"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443038952, "post_id": 32748231, "comment_id": 53337844, "body": "how would i &#39;determine a good size&#39;? benchmark and check what is most efficient? the processing i need to do does not care much about  the size of <code>data</code>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1443040276, "post_id": 32748231, "comment_id": 53338532, "body": "You need to benchmark, this blog post is related <a href=\"http://rabexc.org/posts/io-performance-in-python\" rel=\"nofollow noreferrer\">rabexc.org/posts/io-performance-in-python</a>. What are you doing with the data? If you are writing then the buffer size is also relevant as that can affect the performance"}, {"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443040582, "post_id": 32748231, "comment_id": 53338694, "body": "interesting, thanks! did not know about <code>io.open()</code> and <code>readinto()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443039250, "post_id": 32748592, "comment_id": 53338004, "body": "if i understand correctly i&#39;d still need to decide on the number of bytes <code>n</code> i&#39;d want to <a href=\"https://docs.python.org/3.4/library/mmap.html#mmap.mmap.read\" rel=\"nofollow noreferrer\"><code>read([n])</code></a>. then i&#39;m back to my original problem. or what am i missing?"}, {"owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "reply_to_user": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443039957, "post_id": 32748592, "comment_id": 53338375, "body": "I&#39;m trying some code now, but essentially mmap gives you a bytearray interface to your data, in addition to the file interface. So you can access, process, etc your data as if it were in a bytearray already."}, {"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443040130, "post_id": 32748592, "comment_id": 53338459, "body": "how do i profit from a <code>bytearray</code>? my <code>data</code> is of the type <code>&lt;class &#39;bytes&#39;&gt;</code> already - which is perfectly fine for what i need. but i&#39;m interested to see where this is going!"}, {"owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "reply_to_user": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443040761, "post_id": 32748592, "comment_id": 53338798, "body": "I&#39;ve added example code and a bit more explanation."}, {"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443041002, "post_id": 32748592, "comment_id": 53338902, "body": "ok. that looks nice! assuming i have a function <code>process(data)</code> that needs to access all the bytes in the file sequentially (but the size of <code>data</code> does not matter) - i&#39;d think this approach would go  twice through the data of a file. or how would i call <code>process(data)</code> in a smart &amp; efficient way?"}, {"owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "reply_to_user": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443041333, "post_id": 32748592, "comment_id": 53339081, "body": "That&#39;s part of the beauty of mmap. The data won&#39;t actually be read from the disk until it&#39;s actually used. &quot;m2 = mmap.mmap(f2.fileno(), 0)&quot; doesn&#39;t read any data from disk into RAM. Nor does &quot;len(m1)&quot;. Only at &quot;m2[:] = m1&quot; does data get read from input_file on disk. So, for your case, you&#39;d call &quot;process(m2)&quot; assuming code in process treats m2 as a sequence. If process() moves sequentially through the indices of the m2 &quot;bytearray&quot;, the data will only be read once from disk."}, {"owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "reply_to_user": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1443041403, "post_id": 32748592, "comment_id": 53339121, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/90476/discussion-between-chad-kennedy-and-hiro-protagonist\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "is_accepted": false, "score": 8, "last_activity_date": 1616839503, "last_edit_date": 1616839503, "creation_date": 1443038925, "answer_id": 32748592, "question_id": 32748231, "link": "https://stackoverflow.com/questions/32748231/preferred-block-size-when-reading-writing-big-binary-files/32748592#32748592", "title": "Preferred block size when reading/writing big binary files", "body": "<p>Let the OS make the decision for you. Use the mmap module:</p>\n<p><a href=\"https://docs.python.org/3/library/mmap.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/mmap.html</a></p>\n<p>It uses your OS's underlying memory mapping mechanism for mapping the contents of a file into RAM.</p>\n<p>Be aware that there's a 2GB file size limit if you're using 32-bit Python, so be sure to use the 64-bit version if you decide to go this route.</p>\n<p>For example:</p>\n<pre><code>f1 = open('input_file', 'r+b')\nm1 = mmap.mmap(f1.fileno(), 0)\nf2 = open('out_file', 'a+b') # out_file must be &gt;0 bytes on windows\nm2 = mmap.mmap(f2.fileno(), 0)\nm2.resize(len(m1))\nm2[:] = m1 # copy input_file to out_file\nm2.flush() # flush results\n</code></pre>\n<p>Note that you never had to call any read() functions and decide how many bytes to bring into RAM. This example just copies one file into another, but as you said in your example, you can do whatever processing you need in between. Note that while the entire file is mapped to an address space in RAM, that doesn't mean it has actually been copied there. It will be copied piecewise, at the discretion of the OS.</p>\n"}], "owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6515, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1616839503, "creation_date": 1443037542, "last_edit_date": 1527097560, "question_id": 32748231, "link": "https://stackoverflow.com/questions/32748231/preferred-block-size-when-reading-writing-big-binary-files", "title": "Preferred block size when reading/writing big binary files", "body": "<p>I need to read and write huge binary files. Is there a preferred or even optimal number of bytes (what I call <code>BLOCK_SIZE</code>) I should <code>read()</code> at a time?</p>\n\n<p>One byte is certainly too little, and I do not think reading 4&nbsp;GB into the RAM is a good idea either - is there a 'best' block size? or does that even depend on the file-system (I'm on <a href=\"http://en.wikipedia.org/wiki/Ext4\" rel=\"nofollow noreferrer\">ext4</a>)? What do I need to consider?</p>\n\n<p><a href=\"https://docs.python.org/3.4/library/functions.html#open\" rel=\"nofollow noreferrer\">Python's <code>open()</code></a> even provides a <code>buffering</code> argument. Would I need to tweak that as well?</p>\n\n<p>This is sample code that just joins the two files <code>in-0.data</code> and <code>in-1.data</code> into <code>out.data</code> (in real life there is more processing that is irrelevant to the question at hand). The <code>BLOCK_SIZE</code> is chosen equal to <a href=\"https://docs.python.org/3.4/library/io.html#io.DEFAULT_BUFFER_SIZE\" rel=\"nofollow noreferrer\"><code>io.DEFAULT_BUFFER_SIZE</code></a> which seems to be the default for <code>buffering</code>:</p>\n\n<pre><code>from pathlib import Path\nfrom functools import partial\n\nDATA_PATH = Path(__file__).parent / '../data/'\n\nout_path = DATA_PATH / 'out.data'\nin_paths = (DATA_PATH / 'in-0.data', DATA_PATH / 'in-1.data')\n\nBLOCK_SIZE = 8192\n\ndef process(data):\n    pass\n\nwith out_path.open('wb') as out_file:\n    for in_path in in_paths:\n        with in_path.open('rb') as in_file:\n            for data in iter(partial(in_file.read, BLOCK_SIZE), b''):\n                process(data)\n                out_file.write(data)\n#            while True:\n#                data = in_file.read(BLOCK_SIZE)\n#                if not data:\n#                    break\n#                process(data)\n#                out_file.write(data)\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "testing"], "answers": [{"comments": [{"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 2, "creation_date": 1443037643, "post_id": 32748232, "comment_id": 53337110, "body": "Missing a ) on assert true."}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 2, "creation_date": 1443037717, "post_id": 32748232, "comment_id": 53337149, "body": "I think a <code>self.assertFalse(os.path.exists(directory_path))</code> before the <code>make_directory</code> would improve things."}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "edited": false, "score": 1, "creation_date": 1443037801, "post_id": 32748232, "comment_id": 53337211, "body": "I think that would be unnecessary, as I mentioned all unit tests should be independent. So something like that should always be written in tearDown of any test that uses file system."}], "tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": 7, "last_activity_date": 1443037844, "last_edit_date": 1443037844, "creation_date": 1443037545, "answer_id": 32748232, "question_id": 32748212, "link": "https://stackoverflow.com/questions/32748212/how-to-test-a-function-that-creates-a-directory/32748232#32748232", "title": "How to test a function that creates a directory?", "body": "<p>Just test that directory exists</p>\n\n<pre><code>def test_make_directory(self):\n    directory_path = '...' # somepath\n\n    make_directory(directory_path)\n\n    self.assertTrue(os.path.exists(directory_path))\n</code></pre>\n\n<p>And do ensure that any directories created in unit tests are deleted after each tests in <code>tearDown</code> or <code>setUp</code>, to ensure independency of tests</p>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 7983963, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/afce462d3559e78d7dbd2025bcb06306?s=128&d=identicon&r=PG", "display_name": "Vince Miller", "link": "https://stackoverflow.com/users/7983963/vince-miller"}, "edited": false, "score": 0, "creation_date": 1552927341, "post_id": 32748404, "comment_id": 97186966, "body": "shouldnt the patch functions use <code>@patch(&#39;os.path.exists&#39;)</code> etc. ?"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "reply_to_user": {"reputation": 170, "user_id": 7983963, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/afce462d3559e78d7dbd2025bcb06306?s=128&d=identicon&r=PG", "display_name": "Vince Miller", "link": "https://stackoverflow.com/users/7983963/vince-miller"}, "edited": false, "score": 1, "creation_date": 1552928251, "post_id": 32748404, "comment_id": 97187432, "body": "Hi @VinceMiller. The rule of thumb with mock patching is you mock with respect to where you are testing and not where the module is defined. The docs actually explain this really well <a href=\"https://docs.python.org/3/library/unittest.mock.html#where-to-patch\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 5398, "user_id": 6733064, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbad917af60dd44536450743c01872c9?s=128&d=identicon&r=PG&f=1", "display_name": "GabrielChu", "link": "https://stackoverflow.com/users/6733064/gabrielchu"}, "edited": false, "score": 0, "creation_date": 1560908023, "post_id": 32748404, "comment_id": 99887475, "body": "I am still little bit confused, hope you can clarify. I think we have to patch <code>os.path.exists</code> instead of <code>module</code>, otherwise it&#39;s going to be <code>AttributeError</code>. It is similar to this <a href=\"https://stackoverflow.com/questions/22201583/patch-over-a-function-imported-inside-another-function\">post</a>."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "reply_to_user": {"reputation": 5398, "user_id": 6733064, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbad917af60dd44536450743c01872c9?s=128&d=identicon&r=PG&f=1", "display_name": "GabrielChu", "link": "https://stackoverflow.com/users/6733064/gabrielchu"}, "edited": false, "score": 0, "creation_date": 1560913326, "post_id": 32748404, "comment_id": 99888428, "body": "Hi @GabrielChu. I wrote up a very quick example to help illustrate <a href=\"https://github.com/idjaw/testing_example\" rel=\"nofollow noreferrer\">here</a>. Use pytest to run the tests. All but one of the tests will fail. Specifically for the <code>os.path.exists</code> example, because this is a library within Python, if you mock <code>os.path.exists</code>, it <i>will</i> still work, but we want to avoid that, because that will actually mock it across all modules. We are only interested in mocking the current system under test, which is where the specific method is we want to test. [cont&#39;d in next message]"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "reply_to_user": {"reputation": 5398, "user_id": 6733064, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbad917af60dd44536450743c01872c9?s=128&d=identicon&r=PG&f=1", "display_name": "GabrielChu", "link": "https://stackoverflow.com/users/6733064/gabrielchu"}, "edited": false, "score": 0, "creation_date": 1560913478, "post_id": 32748404, "comment_id": 99888458, "body": "@GabrielChu - By performing the mock with the path relative to where we are testing we are only mocking it within that context. Now, this brings to the example I linked. The failing test shows you what happens when you actually try to mock a module that &quot;you&quot; wrote by referencing its &quot;definition&quot; path rather than its usage in the portion of the code you are currently testing. I think the example provided should help clarify what&#39;s going on. Feel free to mess around with it and experiment."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "reply_to_user": {"reputation": 5398, "user_id": 6733064, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbad917af60dd44536450743c01872c9?s=128&d=identicon&r=PG&f=1", "display_name": "GabrielChu", "link": "https://stackoverflow.com/users/6733064/gabrielchu"}, "edited": false, "score": 0, "creation_date": 1560914358, "post_id": 32748404, "comment_id": 99888630, "body": "Also, @GabrielChu just a comment about the post you linked. I believe part of the reason it was mocked like that is because the example written in that answer the &quot;real&quot; code and test code were in the same file. But, this still should not take away from the fact that you should usually always mock with respect to the system under test. Just as a reminder, here is the documentation on it: <a href=\"https://docs.python.org/3/library/unittest.mock.html#where-to-patch\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "is_accepted": true, "score": 5, "last_activity_date": 1443038577, "last_edit_date": 1443038577, "creation_date": 1443038214, "answer_id": 32748404, "question_id": 32748212, "link": "https://stackoverflow.com/questions/32748212/how-to-test-a-function-that-creates-a-directory/32748404#32748404", "title": "How to test a function that creates a directory?", "body": "<p>A good practice here would be to learn how to use testing frameworks like <a href=\"https://pypi.python.org/pypi/mock\" rel=\"noreferrer\">mock</a> or <a href=\"https://has207.github.io/flexmock/\" rel=\"noreferrer\">flexmock</a></p>\n\n<p>Furthermore, you should use Python's <a href=\"https://docs.python.org/2/library/unittest.html\" rel=\"noreferrer\">unittest</a> Framework.</p>\n\n<p>Your objective here is not necessarily to make sure that something gets created, but rather that it gets called. So what you would want to do is mock out the external calls to help test the proper flow of your method. So in this case you should mock exists and makedirs. Then ensure that it gets called. That would be an acceptable unit test. You would do something like this: </p>\n\n<p>Let us assume your main code is being housed in a module called my_module.py. So you would want to create a test file, let's call it test.py to keep it simple and do something like this in your unit test:</p>\n\n<pre><code>from mock import patch\nimport my_module\nimport unittest\n\n\nclass MyTest(unittest.TestCase):\n    @patch('my_module.exists')\n    @patch('my_module.makedirs')\n    def test_create_dir(self, mock_make_dirs, mock_exists):\n        mock_exists.return_value = True\n\n        make_directory('thing_to_create')\n\n        mock_make_dirs.assert_called_with('thing_to_create')\n</code></pre>\n\n<p>So, what's happening here is that you are telling the mock that you want to mock out the makedirs and exists. You are making exists return with a True as specified with the <code>mock_exists.return_value</code>. Then you are making your actual call, your mocks will take effect in that method call. The last line with <code>mock_make_dirs.assert_called_with</code> will ensure that your method for making the dir will actually be called.</p>\n\n<p><strong>If you want to still test that something does actually get created</strong></p>\n\n<p>What you can do in this case, is maybe venture down the path of using a context manager and create a temporary folder to test in, do your work to test your method and anything else you have to do, and once you are done your work, the context manager will destroy itself. </p>\n\n<p>For information on context managers, check out <a href=\"https://docs.python.org/2/library/contextlib.html\" rel=\"noreferrer\">contextlib</a></p>\n"}], "owner": {"reputation": 1178, "user_id": 1943863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a62e600553c33dbad7404d6aa5a1a555?s=128&d=identicon&r=PG", "display_name": "Valeriy", "link": "https://stackoverflow.com/users/1943863/valeriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4368, "favorite_count": 0, "accepted_answer_id": 32748404, "answer_count": 2, "score": 5, "last_activity_date": 1443038577, "creation_date": 1443037444, "question_id": 32748212, "link": "https://stackoverflow.com/questions/32748212/how-to-test-a-function-that-creates-a-directory", "title": "How to test a function that creates a directory?", "body": "<p>How to test a function in Python which creates a directory? Can you give an example <code>make_directory_test()</code> function?</p>\n\n<pre><code>def make_directory(directory):\n    if not os.path.exists(directory):\n        os.makedirs(directory)\n</code></pre>\n"}, {"tags": ["python", "c++", "python-3.x", "for-loop"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 1, "creation_date": 1443037531, "post_id": 32748164, "comment_id": 53337058, "body": "dont use raw_input, just do open(&quot;eng.txt&quot;,&quot;r&quot;)"}, {"owner": {"reputation": 3255, "user_id": 2754197, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/V1LoG.jpg?s=128&g=1", "display_name": "Prime", "link": "https://stackoverflow.com/users/2754197/prime"}, "reply_to_user": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1443037821, "post_id": 32748164, "comment_id": 53337220, "body": "I have tried the same, but it doesn&#39;t show any output"}], "answers": [{"tags": [], "owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "is_accepted": false, "score": 1, "last_activity_date": 1443037560, "last_edit_date": 1495540789, "creation_date": 1443037560, "answer_id": 32748239, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output/32748239#32748239", "title": "How to read the data from a file and get the concordance output", "body": "<p><code>f</code> is a file resource in your example, not a string. You need to read from <code>f</code>. See here for example: <a href=\"https://stackoverflow.com/questions/8369219/how-do-i-read-a-text-file-into-a-string-variable-in-python\">How do I read a text file into a string variable in Python</a></p>\n\n<p>Do something like the following to also deal with <code>newline</code> characters: </p>\n\n<pre><code>with open (\"data.txt\", \"r\") as myfile:\n    f=myfile.read().replace('\\n', '')\n</code></pre>\n\n<p>Also <code>raw_input</code> is for command prompt and is not useful in this situation. </p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1443042816, "creation_date": 1443042816, "answer_id": 32749592, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output/32749592#32749592", "title": "How to read the data from a file and get the concordance output", "body": "<p>Since you have <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> there:</p>\n\n<pre><code>std::istringstream inputdata(\"HELLO HELLO HELLO BOBBY WHAT ARE YOU DOING\");\n\nstd::string word;\nstd::map&lt;std::string, size_t&gt; counts;\n\nwhile (inputdata &gt;&gt; word)\n    ++counts[word];\n\nfor (auto const &amp;w : counts)\n    std::cout &lt;&lt; std::setw(15) &lt;&lt; w.first &lt;&lt; \": \" &lt;&lt; w.second &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Note that I've skipped producing/storing the line numbers since you didn't use them anyway. :-)</p>\n"}, {"tags": [], "owner": {"reputation": 7013, "user_id": 4251775, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/abmgy.jpg?s=128&g=1", "display_name": "The6thSense", "link": "https://stackoverflow.com/users/4251775/the6thsense"}, "is_accepted": true, "score": 1, "last_activity_date": 1443072606, "last_edit_date": 1495542677, "creation_date": 1443071218, "answer_id": 32753761, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output/32753761#32753761", "title": "How to read the data from a file and get the concordance output", "body": "<p><strong>Notes:</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5563089/raw-input-function-in-python\">raw_input method</a> is used to get user input from prompt</p>\n\n<p><strong>Changes to your own code:</strong></p>\n\n<pre><code>f = open(\"eng.txt\", \"r\")\nmyDict = {}\nlinenum = 0\n\nfor word in f.read().split():\n    if not word in myDict:\n        myDict[word] = []\n    myDict[word].append(linenum)\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n\n<p>Simplified code using set <a href=\"http://www.tutorialspoint.com/python/dictionary_setdefault.htm\" rel=\"nofollow noreferrer\">default method</a> of dictionary </p>\n\n<p><strong>Code1:</strong></p>\n\n<pre><code>myDict = {}\nlinenum = 0\nwith open(\"eng.txt\", \"r\") as f:\n    for word in f.read().split():\n        myDict.setdefault(word,[]).append(linenum)\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n\n<p><strong>Sample input:</strong></p>\n\n<pre><code>was very very afraid can you help\nme\nme\nme\n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<pre><code>Word            Frequency      \nafraid         : 1              \ncan            : 1              \nhelp           : 1              \nme             : 3              \nvery           : 2              \nwas            : 1              \nyou            : 1  \n</code></pre>\n"}], "owner": {"reputation": 3255, "user_id": 2754197, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/V1LoG.jpg?s=128&g=1", "display_name": "Prime", "link": "https://stackoverflow.com/users/2754197/prime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 32753761, "answer_count": 3, "score": 0, "last_activity_date": 1443072606, "creation_date": 1443037279, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output", "title": "How to read the data from a file and get the concordance output", "body": "<p>I have the code which will throw the output from the given string.</p>\n\n<pre><code>inputdata = \"HELLO HELLO HELLO BOBBY WHAT ARE YOU DOING\"\nmyDict = {}\nlinenum = 0\n\nfor word in inputdata.split():\n    if not word in myDict:\n        myDict[word] = []\n\n    myDict[word].append(linenum)\n\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n\n<p>the output would be </p>\n\n<pre><code>   Word            Frequency     \n ARE           : 1              \n BOBBY         : 1              \n DOING         : 1              \n HELLO         : 3              \n WHAT          : 1              \n YOU           : 1   \n</code></pre>\n\n<p>But when I tried to replace the string with .txt file, Script was prompting the popup to enter the text instead of reading the data from the .txt file.</p>\n\n<pre><code>f = open(raw_input(\"eng.txt\"), \"r\")\nmyDict = {}\nlinenum = 0\n\nfor word in f.split():\n    if not word in myDict:\n        myDict[word] = []\n\n    myDict[word].append(linenum)\n\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n"}, {"tags": ["python", "design-patterns", "factory"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1443039213, "post_id": 32748071, "comment_id": 53337986, "body": "You can&#39;t call it because <code>personFactory</code> is a class. In order to call it with your current code you will first need to create an instance of ithe class before calling the method. ie. <code>pf = personFactory()</code>, then <code>pf.createUser()</code>. BTW you should follow <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP 8 - Style Guide for Python Code</a> coding conventions for naming classes, methods, and functions."}, {"owner": {"reputation": 1215, "user_id": 908759, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0f9a96073e4e3eb2372067c3a9a9fe39?s=128&d=identicon&r=PG", "display_name": "user908759", "link": "https://stackoverflow.com/users/908759/user908759"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1443042288, "post_id": 32748071, "comment_id": 53339557, "body": "Thank you! I actually had to add pf = personFactory.personFactory() and remove <b>init</b> from person.py. I will definitely look over the PEP 8 document. The following changes have still not made my program run. Please review my edits."}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1443042530, "post_id": 32748071, "comment_id": 53339665, "body": "You need to read your code very carefully and understand what types you have and how you&#39;re attempting to use them."}, {"owner": {"reputation": 1215, "user_id": 908759, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0f9a96073e4e3eb2372067c3a9a9fe39?s=128&d=identicon&r=PG", "display_name": "user908759", "link": "https://stackoverflow.com/users/908759/user908759"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1443042947, "post_id": 32748071, "comment_id": 53339888, "body": "@IgnacioVazquez-Abrams Thank you, but can you please elaborate?"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1443043058, "post_id": 32748071, "comment_id": 53339935, "body": "What do you think a function within a function does?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1443055414, "post_id": 32748071, "comment_id": 53343851, "body": "I think you need to learn Python itself and &quot;regular&quot; OOP much better before attempting to implement any of the relatively advanced Design Patterns because the code in your question has a large number of very fundamental coding programming problems. A big glaring one, for starters, is that all your <code>personFactory</code> class methods do nothing but define local variables and functions that are never used in them (or anywhere else) and don&#39;t return any results, which is why you&#39;re getting the <code>AttributeError</code> \u2014 <i>not</i> because <code>fName</code> is a <code>NoneType</code>, as you apparently think."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1443055687, "post_id": 32748071, "comment_id": 53343918, "body": "So more advice: Don&#39;t fundamentally modify the code in your question changing it so it effectively becomes a completely different one. Take what you have after the modification and if you can figure out what new thing is wrong, then post the changed code as a new separate question."}, {"owner": {"reputation": 1215, "user_id": 908759, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0f9a96073e4e3eb2372067c3a9a9fe39?s=128&d=identicon&r=PG", "display_name": "user908759", "link": "https://stackoverflow.com/users/908759/user908759"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1443124209, "post_id": 32748071, "comment_id": 53378561, "body": "@martineau define what you mean by &quot;learn Python itself&quot; and &quot;regular OOP&quot;... The reason my some of the methods are never used, is because this is an example, not an actual program. Also the reason why I was getting an error is because createUser and createCustomer needed to be a class instead of a function."}], "answers": [{"tags": [], "owner": {"reputation": 431, "user_id": 2371350, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7d8f4375824e1d6d94a73a68ad8b3a07?s=128&d=identicon&r=PG", "display_name": "cllamach", "link": "https://stackoverflow.com/users/2371350/cllamach"}, "is_accepted": false, "score": 0, "last_activity_date": 1443046277, "creation_date": 1443046277, "answer_id": 32750355, "question_id": 32748071, "link": "https://stackoverflow.com/questions/32748071/python-oop-factory-pattern/32750355#32750355", "title": "Python OOP Factory Pattern", "body": "<p>You have the constructor inside the create_user method. As Ignacio was saying the <strong>init</strong> function must be outside of the create_user function, in order for you to pass the name, pass and role to the person_factory object at creation.</p>\n\n<p>Or alternatively you could pass all those value to the create_user method as arguments and leave the class constructor out of the work.</p>\n\n<p>Could be something like this...</p>\n\n<p>class personFactory(person):</p>\n\n<pre><code>  def __init__(self,uName,password,role):\n        self.uName = uName\n        self.password = password\n        self.role = role\n\ndef createUser(self):\n    user = Person()\n    user.type = \"user\"\n    user.uName = self.uName\n    user.password = self.password\n    user.role = role\n    return user\n</code></pre>\n\n<p>Or...</p>\n\n<p>class personFactory(person):</p>\n\n<pre><code>  def createUser(self, uName, password, role):\n       user = Person()\n       user.type = \"user\"\n       user.uName = uName\n       user.password = password\n       user.role = role\n       return user\n</code></pre>\n\n<p>I would also suggest that you made use of inheritance and made concrete classes based on your abstract classes that represent each of your objects.</p>\n\n<p>Like...</p>\n\n<pre><code>class User(Person):\n\n      def __init__(name, password, role):\n          self.name = name\n          self.type = \"User\"\n          self.password = password\n</code></pre>\n\n<p>So you can have a User class, and a Customer class, and each method of your factory can create the corresponding object, instead of a regular Person.</p>\n"}], "owner": {"reputation": 1215, "user_id": 908759, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0f9a96073e4e3eb2372067c3a9a9fe39?s=128&d=identicon&r=PG", "display_name": "user908759", "link": "https://stackoverflow.com/users/908759/user908759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 486, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1443046277, "creation_date": 1443036965, "last_edit_date": 1443042103, "question_id": 32748071, "link": "https://stackoverflow.com/questions/32748071/python-oop-factory-pattern", "title": "Python OOP Factory Pattern", "body": "<p>I am still learning OOP Design Pattern and everything I have read so far says that Factory Patterns are commonly used. I am still trying to learn this pattern. For my program I am creating an Abstract Factory called \"person\" and my factory called \"personFactory\" should let you create different types of people (Users, Customers, Plumbers, etc...). With my current code I am getting this error:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'fName'\n</code></pre>\n\n<p>This is my code:</p>\n\n<p>person.py</p>\n\n<pre><code>import abc\n\nclass person:\n    __metaclass__ = abc.ABCMeta\n    fName = \"\"\n    mName = \"\"\n    lName = \"\"\n    address = \"\"\n    city = \"\"\n    state = \"\"\n    zipcode = \"\"\n    email = \"\"\n    phone = \"\"\n    dob = None\n</code></pre>\n\n<p>personFactory.py</p>\n\n<pre><code>from person import person\n\nclass personFactory(person):\n\n    def createUser(self):\n        uName = \"\"\n        password = \"\"\n        role = \"\"\n        def __init__(self,uName,password,role):\n            self.uName = uName\n            self.password = password\n            self.role = role\n        def login(uName,password):\n            if(uName == self.uName and password == self.password):\n                return \"Logged In\"\n            else:\n                return \"Did not log in\"\n        def logout():\n            return \"Logout\"\n\n    def createCustomer(self):\n        items = []\n        balace = 0\n        def __init__(self,balance):\n            self.balance = balance\n        def AddToCart(item):\n            self.items.append(item)\n            print(\"Item added\")\n        def Order(items):\n            totalprice = 0\n            for item in items:\n                totalprice =+ item.price\n            return totalprice\n        def Pay(payment):\n            self.balance =- payment\n            return self.balance\n</code></pre>\n\n<p>main.py</p>\n\n<pre><code>import personFactory\n\nclass main():\n    pf = personFactory.personFactory()\n    user1 = pf.createUser()\n    user1.fName = \"John\"\n    user1.lName = \"Smith\"\n    user1.uName = \"jSmith\"\n    user1.password = \"Jamestown\"\n\n    customer1 = pf.createCustomer()\n    customer1.fName = \"George\"\n    customer1.lName = \"Washington\"\n    customer1.balance = 100\n\nmain()\n</code></pre>\n\n<p>I'm not sure why fName is a NoneType. What am I doing wrong? Any help would be greatly appreciated!</p>\n"}, {"tags": ["python", "pyqt4", "qtableview"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4829813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40fd39cdbc1c2f94bb516a7002e4acee?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/4829813/marian"}, "edited": false, "score": 0, "creation_date": 1443091830, "post_id": 32748242, "comment_id": 53357934, "body": "The algorithm works with few changes. As per my model, I had to include the display role in the line: cell = model.getData(model.createIndex(irow, icol)). So it has to be:  cell = model.data(model.createIndex(irow, icol), QtCore.Qt.DisplayRole). Also because my model was created for tables, and trees the rowCount and columnCount methods contain the parent as parameters. Since my model is used for a table I had to pass None. Thank you!"}, {"owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "reply_to_user": {"reputation": 23, "user_id": 4829813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40fd39cdbc1c2f94bb516a7002e4acee?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/4829813/marian"}, "edited": false, "score": 0, "creation_date": 1443092389, "post_id": 32748242, "comment_id": 53358307, "body": "The <code>DisplayRole</code> and an invalid <code>parent</code> are usually the default arguments for <code>data</code> and <code>rowCount</code>/<code>columnCount</code>: <a href=\"http://doc.qt.io/qt-4.8/qabstractitemmodel.html#data\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qabstractitemmodel.html#data</a> That&#39;s why I omitted those..."}], "tags": [], "owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "is_accepted": true, "score": 4, "last_activity_date": 1443092341, "last_edit_date": 1443092341, "creation_date": 1443037568, "answer_id": 32748242, "question_id": 32748064, "link": "https://stackoverflow.com/questions/32748064/pyqt4-qtableview-how-to-loop-over-qtableview/32748242#32748242", "title": "PyQt4 - QTableView - How to loop over QTableView", "body": "<p>I think you confused model and view in some places within your question...</p>\n\n<p>But, why not simply get the number of rows and columns and loop over all of them:</p>\n\n<pre><code>for irow in xrange(model.rowCount()):\n    row = []\n    for icol in xrange(model.columnCount()):\n        cell = model.data(model.createIndex(irow, icol))\n        row.append(cell)\n    # print all elems per row\n    print ', '.join(str(c) for c in row))\n</code></pre>\n\n<p>Things can probably be beautified and/or written in a more compact way, but that's basically all.\nOr am I missing something?</p>\n"}], "owner": {"reputation": 23, "user_id": 4829813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40fd39cdbc1c2f94bb516a7002e4acee?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/4829813/marian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2143, "favorite_count": 1, "accepted_answer_id": 32748242, "answer_count": 1, "score": 1, "last_activity_date": 1515880457, "creation_date": 1443036947, "last_edit_date": 1515880457, "question_id": 32748064, "link": "https://stackoverflow.com/questions/32748064/pyqt4-qtableview-how-to-loop-over-qtableview", "title": "PyQt4 - QTableView - How to loop over QTableView", "body": "<p>I tried to find an example in python where I can loop over model elements of a QTableView and print the entire row.\nI have found how to loop over selected rows but nothing when rows are not selected.</p>\n\n<p>Can someone help me? No need to tell me how to create the model and how to apply it to the QTableModel. I am only interested how to iterate over the rows.</p>\n"}, {"tags": ["python", "windows"], "comments": [{"owner": {"reputation": 17732, "user_id": 237939, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GYEZO.jpg?s=128&g=1", "display_name": "Rajesh Chamarthi", "link": "https://stackoverflow.com/users/237939/rajesh-chamarthi"}, "edited": false, "score": 0, "creation_date": 1443036739, "post_id": 32747896, "comment_id": 53336637, "body": "are you in the python shell when you run this command? Did you do a pip install as suggested in the github notes?"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1443037355, "post_id": 32747896, "comment_id": 53336975, "body": "if you are just in cmd, you have to type python before your filename to run it with python"}, {"owner": {"reputation": 572, "user_id": 4931398, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c50c3f4445363d9ea9afd2ff5c804b5?s=128&d=identicon&r=PG&f=1", "display_name": "dominik791", "link": "https://stackoverflow.com/users/4931398/dominik791"}, "edited": false, "score": 0, "creation_date": 1443042132, "post_id": 32747896, "comment_id": 53339476, "body": "Yes, I did pip install. When I try with python before, I get: <code>can&#39;t find &#39;__main__&#39; module in &#39;py-mysql2pgsql&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 314922, "user_id": 73070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG", "display_name": "Joey", "link": "https://stackoverflow.com/users/73070/joey"}, "edited": false, "score": 0, "creation_date": 1443038511, "post_id": 32748183, "comment_id": 53337619, "body": "You can use <code>PATHEXT</code> to allow what he wants, though. In fact, that&#39;s how it&#39;s set up for me, probably by the Python installer."}, {"owner": {"reputation": 1538, "user_id": 203976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1XaA.gif?s=128&g=1", "display_name": "cdkMoose", "link": "https://stackoverflow.com/users/203976/cdkmoose"}, "reply_to_user": {"reputation": 314922, "user_id": 73070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG", "display_name": "Joey", "link": "https://stackoverflow.com/users/73070/joey"}, "edited": false, "score": 0, "creation_date": 1443039627, "post_id": 32748183, "comment_id": 53338201, "body": "This file doesn&#39;t have an extension though, so not sure this would help."}, {"owner": {"reputation": 1538, "user_id": 203976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1XaA.gif?s=128&g=1", "display_name": "cdkMoose", "link": "https://stackoverflow.com/users/203976/cdkmoose"}, "reply_to_user": {"reputation": 314922, "user_id": 73070, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG", "display_name": "Joey", "link": "https://stackoverflow.com/users/73070/joey"}, "edited": false, "score": 0, "creation_date": 1443039638, "post_id": 32748183, "comment_id": 53338209, "body": "Also, I believe that just tells windows what files are executable, not necessarily how to execute them, more entries are needed to associate .py files with python to complete your suggestion."}, {"owner": {"reputation": 572, "user_id": 4931398, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c50c3f4445363d9ea9afd2ff5c804b5?s=128&d=identicon&r=PG&f=1", "display_name": "dominik791", "link": "https://stackoverflow.com/users/4931398/dominik791"}, "edited": false, "score": 0, "creation_date": 1443041933, "post_id": 32748183, "comment_id": 53339375, "body": "While trying to run either <code>python py-mysql2pgsql</code> or <code>path_to_python\\python py-mysql2pgsql</code>, I get: <code>can&#39;t find &#39;__main__&#39; module in &#39;py-mysql2pgsql&#39;</code>"}, {"owner": {"reputation": 1538, "user_id": 203976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1XaA.gif?s=128&g=1", "display_name": "cdkMoose", "link": "https://stackoverflow.com/users/203976/cdkmoose"}, "edited": false, "score": 0, "creation_date": 1443043280, "post_id": 32748183, "comment_id": 53340049, "body": "Not familiar with the details of that tool, so not sure what the install dependencies are. This answer addresses the specific situation you described in your question."}], "tags": [], "owner": {"reputation": 1538, "user_id": 203976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1XaA.gif?s=128&g=1", "display_name": "cdkMoose", "link": "https://stackoverflow.com/users/203976/cdkmoose"}, "is_accepted": false, "score": 0, "last_activity_date": 1443037355, "creation_date": 1443037355, "answer_id": 32748183, "question_id": 32747896, "link": "https://stackoverflow.com/questions/32747896/how-to-run-python-programs-in-windows-7/32748183#32748183", "title": "How to run python programs in Windows 7?", "body": "<p>Windows does not understand shebang lines in scripts (#!/usr/bin/env python) like Linux and Unix variants do.  So Windows does not understand that this is a python script, you need to execute python yourself.</p>\n\n<p>If python executable is in your path, you should be able to run:</p>\n\n<pre><code>python py-mysql2pgsql\n</code></pre>\n\n<p>If it is not in your path, you should be able to run:</p>\n\n<pre><code>path_to_python\\python py-mysql2pgsql  (on my machine C:\\Python27\\python)\n</code></pre>\n\n<p>Note that this applies to any python script on Windows, not just this tool.</p>\n"}], "owner": {"reputation": 572, "user_id": 4931398, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c50c3f4445363d9ea9afd2ff5c804b5?s=128&d=identicon&r=PG&f=1", "display_name": "dominik791", "link": "https://stackoverflow.com/users/4931398/dominik791"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443037355, "creation_date": 1443036336, "question_id": 32747896, "link": "https://stackoverflow.com/questions/32747896/how-to-run-python-programs-in-windows-7", "title": "How to run python programs in Windows 7?", "body": "<p>I downloaded this tool to migrate MySQL to PostgreSQL: <a href=\"https://github.com/philipsoutham/py-mysql2pgsql\" rel=\"nofollow\">https://github.com/philipsoutham/py-mysql2pgsql</a></p>\n\n<p>Python interactive code works properly so the python path is set in the right way. </p>\n\n<p>When I type \"py-mysql2pgsql\" being in the directory: <code>C:\\Users\\me</code>, the downloaded tool doesn't run but ask me to choose the program to open that file. The same situation when I'm in <code>C:\\Users\\me\\py-mysql2pgsql</code></p>\n\n<p>How can I run this tool properly?</p>\n"}, {"tags": ["python", "python-2.7", "csv", "web-crawler", "scrapy"], "comments": [{"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 1, "creation_date": 1443038262, "post_id": 32747867, "comment_id": 53337487, "body": "What is your <code>csv</code> code?"}, {"owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1443038354, "post_id": 32747867, "comment_id": 53337534, "body": "My csv code is:    scrapy crawl craig_spider -o craig.csv -t csv"}], "answers": [{"comments": [{"owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "edited": false, "score": 0, "creation_date": 1443040738, "post_id": 32748886, "comment_id": 53338784, "body": "Thank you for the suggestion! Appreciated!"}], "tags": [], "owner": {"reputation": 4024, "user_id": 1901546, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Vd82d.png?s=128&g=1", "display_name": "Rejected", "link": "https://stackoverflow.com/users/1901546/rejected"}, "is_accepted": true, "score": 2, "last_activity_date": 1443040130, "creation_date": 1443040130, "answer_id": 32748886, "question_id": 32747867, "link": "https://stackoverflow.com/questions/32747867/csv-output-from-web-scrawling-using-scrapy/32748886#32748886", "title": "CSV output from web scrawling using scrapy", "body": "<p>The problem is that you get a response with multiple <code>//span[@class='pl']/a/</code> fields back, loading every <code>text()</code> into a list and assigning that to <code>item['title']</code>, and then loading every <code>@href</code> into a list and assigning that to <code>item['link']</code>.</p>\n\n<p>In otherwords for the first response, you are essentially doing the following:  </p>\n\n<pre><code>item['title'] = [title1, title2, ..., title100]\nitem['link'] = [url1, url2, ..., url100]\n</code></pre>\n\n<p>So, that's being sent to CSV as:</p>\n\n<pre><code>title,link\n[title1, title2, ..., title100],[url1, url2, ..., url100]\n</code></pre>\n\n<p>To fix this, loop through each <code>//span[@class='pl']/a/</code> and have individual items for each.</p>\n\n<pre><code>def parse_item(self, response):\n    for span in response.xpath(\"//span[@class='pl']/a\"):\n        item = TextPostItem()\n        item['title'] = span.xpath(\".//text()\").extract()\n        item['link'] = span.xpath(\".//@href\").extract()\n        yield item\n</code></pre>\n"}], "owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 32748886, "answer_count": 1, "score": 0, "last_activity_date": 1443040130, "creation_date": 1443036251, "last_edit_date": 1443038335, "question_id": 32747867, "link": "https://stackoverflow.com/questions/32747867/csv-output-from-web-scrawling-using-scrapy", "title": "CSV output from web scrawling using scrapy", "body": "<p>I am saving the output of web scrawling using scrapy in a csv file. The crawling itself seems to be working correctly, but I am not happy with the format of the output saved in csv file. I crawl 20 webpages where each page contains 100 job titles and their respective urls. So I am expecting the output looking like this:</p>\n\n<pre><code>url1, title1\nurl2, title2\n...\n...\nurl1999, title1999\nurl2000, title2000\n</code></pre>\n\n<p>however, the actual output in csv looks like this:</p>\n\n<pre><code>url1 url2 ... url100, title1 title2 ... title100\nurl101 url02 ... url200, title101 title102 ... title200\n...\nurl1901 url902 ... url2000, title1901 title1902 ... title2000\n</code></pre>\n\n<p>My Spider code is:</p>\n\n<pre><code>import scrapy\n\nclass TextPostItem(scrapy.Item):\n    title = scrapy.Field()\n    link = scrapy.Field()\n\nclass MySpider(scrapy.Spider):\n    name = \"craig_spider\"\n    allowed_domains = [\"craigslist.org\"]\n    start_urls = [\"http://sfbay.craigslist.org/search/npo\"]\n\n    def parse(self, response):\n        number = 0\n        for page in range(0, 20):\n            yield scrapy.Request(\"http://sfbay.craigslist.org/search/npo?=%s\" % number, callback=self.parse_item, dont_filter=True)\n            number += 100\n\n    def parse_item(self, response):\n        item = TextPostItem()\n        item['title'] =response.xpath(\"//span[@class='pl']/a/text()\").extract()\n        item['link'] = response.xpath(\"//span[@class='pl']/a/@href\").extract()\n        return item\n</code></pre>\n\n<p>My csv code is:</p>\n\n<pre><code>scrapy crawl craig_spider -o craig.csv -t csv\n</code></pre>\n\n<p>Any suggestion? Thanks.</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1443036112, "post_id": 32747806, "comment_id": 53336274, "body": "Look at one of <a href=\"https://stackoverflow.com/questions/3679694/a-weighted-version-of-random-choice\">these</a>, and weight by string length."}, {"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443036604, "post_id": 32747806, "comment_id": 53336548, "body": "I don&#39;t quite understand which problem you&#39;re trying to solve. If you&#39;re implementing Hangman, you already need to have a list of words, so you can verify the answer. If you then just select a random word by using <code>random.choice(word_list)</code>, the length of the picked words will automatically follow the same distribution as in the list of words to pick from. Lots of 5 letter words? Then there&#39;s a higher chance of a 5 letter word being picked."}, {"owner": {"reputation": 950, "user_id": 2662651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5zpH.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/2662651/edward"}, "reply_to_user": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 1, "creation_date": 1443042334, "post_id": 32747806, "comment_id": 53339580, "body": "@LukasGraf, I have updated the question to show why your comment does not apply (although, of course, it&#39;s perfectly correct given the information I originally supplied). Thanks for the feedback."}, {"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1443043218, "post_id": 32747806, "comment_id": 53340019, "body": "@Edward I see, that makes sense now (and is what I&#39;d call a slightly evil version of hangman). Thanks for the update ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 950, "user_id": 2662651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5zpH.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/2662651/edward"}, "edited": false, "score": 0, "creation_date": 1443042149, "post_id": 32747845, "comment_id": 53339485, "body": "Nice - I was not aware of <i>bisect</i>. Thanks!"}], "tags": [], "owner": {"reputation": 129273, "user_id": 71522, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0e286ba0482e57904e89e753a4b36e6?s=128&d=identicon&r=PG", "display_name": "David Wolever", "link": "https://stackoverflow.com/users/71522/david-wolever"}, "is_accepted": true, "score": 3, "last_activity_date": 1443036159, "last_edit_date": 1495541650, "creation_date": 1443036159, "answer_id": 32747845, "question_id": 32747806, "link": "https://stackoverflow.com/questions/32747806/random-values-with-uneven-distribution/32747845#32747845", "title": "random values with uneven distribution", "body": "<p>If you have your words in a list <code>words</code>, <code>random.choice(words)</code> will uniformly randomly select a word from the list.</p>\n\n<p>If you only have word lengths, I'd store the lengths and counts in a list:</p>\n\n<pre><code>len_counts = [\n    (1, 24), # 24 1-length words\n    (2, 39), # 39 2-length words\n    ...\n]\n</code></pre>\n\n<p>And use the algorithm in this answer to uniformly select a length: <a href=\"https://stackoverflow.com/a/4322940/71522\">https://stackoverflow.com/a/4322940/71522</a></p>\n"}, {"tags": [], "owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1443036965, "creation_date": 1443036965, "answer_id": 32748070, "question_id": 32747806, "link": "https://stackoverflow.com/questions/32747806/random-values-with-uneven-distribution/32748070#32748070", "title": "random values with uneven distribution", "body": "<pre><code># rel_dist holds the relative weight you want for each word length\n# here, words of length 3 have weight 9, length 4 have weight 8, etc\n# make sure you cover all word lengths\nrel_dist = [0, 0, 0, 9, 8, 7, 6, 5, 4, 3]\nrandom.choice(sum([[word]*rel_dist[len(word)]) for word in words], []))\n</code></pre>\n"}], "owner": {"reputation": 950, "user_id": 2662651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5zpH.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/2662651/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 32747845, "answer_count": 2, "score": 0, "last_activity_date": 1443040061, "creation_date": 1443036042, "last_edit_date": 1443040061, "question_id": 32747806, "link": "https://stackoverflow.com/questions/32747806/random-values-with-uneven-distribution", "title": "random values with uneven distribution", "body": "<p>Implementing Hangman. I want to randomly select the length of the word, taking into account how many words of a given length are in the wordlist - ie. 12-letter words should be chosen less frequently than 5-letter ones, because there are fewer of the former.</p>\n\n<p>It doesn't look like the <em>random</em> module will do that easily.</p>\n\n<p>I could hack something semi-ugly together, but am looking for suggestions of a tidy way to do it.</p>\n\n<p>UPDATE to remove some confusion:</p>\n\n<p>This is a <em>cheating</em> version of hangman: it specifies a word-length at the beginning, but doesn't actually pick the word until it absolutely has to.</p>\n\n<p>Here's the full problem description (from Chapter 8 of the book Think Like a Programmer):</p>\n\n<blockquote>\n  <p>Write a program that will be Player 1 in a text-based version of hangman (that is, you don't actually have to draw a hanged man\u2014just keep track of the number of incorrect guesses). Player 2 will set the difficulty of the game by specifying the length of the word to guess as well as the number of incorrect guesses that will lose the game.\n  The twist is that the program will cheat. Rather than actually picking a word at the beginning of the game, the program may avoid picking a word, so long as when Player 2 loses, the program can display a word that matches all the information given to Player 2. The correctly guessed letters must appear in their correct positions, and none of the incorrectly guessed letters can appear in the word at all. When the game ends, Player 1 (the program) will tell Player 2 the word that was chosen. Therefore, Player 2 can never prove that the game is cheating; it's just that the likelihood of Player 2 winning is small.</p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1867, "user_id": 5240614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/yyW6r.jpg?s=128&g=1", "display_name": "Rex", "link": "https://stackoverflow.com/users/5240614/rex"}, "edited": false, "score": 0, "creation_date": 1443040118, "post_id": 32748132, "comment_id": 53338451, "body": "cool! What if add an additional hierarchical index to both sng1 and mult? mult.index.get_level_values(2) can only work for one level.  sng2=pd.concat([sng1,sng1],keys=[&#39;X&#39;,&#39;Y&#39;]),      mult2=pd.concat([mult,mult],keys=[&#39;X&#39;,&#39;Y&#39;]). To make this thread clear, I posted a new one: <a href=\"http://stackoverflow.com/questions/32748910/how-to-do-join-of-multiindex-dataframe-with-another-multiindex-dataframe\" title=\"how to do join of multiindex dataframe with another multiindex dataframe\">stackoverflow.com/questions/32748910/&hellip;</a>"}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 1, "last_activity_date": 1443037184, "creation_date": 1443037184, "answer_id": 32748132, "question_id": 32747772, "link": "https://stackoverflow.com/questions/32747772/how-to-do-join-of-multiindex-dataframe-with-a-single-index-dataframe/32748132#32748132", "title": "How to do join of multiindex dataframe with a single index dataframe?", "body": "<p>This feels a little too manual, but in practice I might do something like this:</p>\n\n<pre><code>In [46]: mult[:] = sngl.loc[mult.index.get_level_values(2)].values\n\nIn [47]: mult\nOut[47]: \n             one       two     three      four\n10 1 a  1.175042  0.044014  1.341404 -0.223872\n     b  0.216168 -0.748194 -0.546003 -0.501149\n   2 a  1.175042  0.044014  1.341404 -0.223872\n     b  0.216168 -0.748194 -0.546003 -0.501149\n20 1 a  1.175042  0.044014  1.341404 -0.223872\n     b  0.216168 -0.748194 -0.546003 -0.501149\n   2 a  1.175042  0.044014  1.341404 -0.223872\n     b  0.216168 -0.748194 -0.546003 -0.501149\n</code></pre>\n\n<p>That is, first select the elements we want to use to index:</p>\n\n<pre><code>In [64]: mult.index.get_level_values(2)\nOut[64]: Index(['a', 'b', 'a', 'b', 'a', 'b', 'a', 'b'], dtype='object')\n</code></pre>\n\n<p>Then use these to index into <code>sngl</code>:</p>\n\n<pre><code>In [65]: sngl.loc[mult.index.get_level_values(2)]\nOut[65]: \n        one       two     three      four\na  1.175042  0.044014  1.341404 -0.223872\nb  0.216168 -0.748194 -0.546003 -0.501149\na  1.175042  0.044014  1.341404 -0.223872\nb  0.216168 -0.748194 -0.546003 -0.501149\na  1.175042  0.044014  1.341404 -0.223872\nb  0.216168 -0.748194 -0.546003 -0.501149\na  1.175042  0.044014  1.341404 -0.223872\nb  0.216168 -0.748194 -0.546003 -0.501149\n</code></pre>\n\n<p>and then we can use <code>.values</code> to throw away the indexing information and just get the raw array to fill with.</p>\n\n<p>It's not very elegant, but it's straightforward.</p>\n"}], "owner": {"reputation": 1867, "user_id": 5240614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/yyW6r.jpg?s=128&g=1", "display_name": "Rex", "link": "https://stackoverflow.com/users/5240614/rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 32748132, "answer_count": 1, "score": 1, "last_activity_date": 1443038016, "creation_date": 1443035937, "last_edit_date": 1495541200, "question_id": 32747772, "link": "https://stackoverflow.com/questions/32747772/how-to-do-join-of-multiindex-dataframe-with-a-single-index-dataframe", "title": "How to do join of multiindex dataframe with a single index dataframe?", "body": "<p>The single index of df1 matches with a sublevel of multiindex of df2. Both have the same columns. I want to copy all rows and columns of df1 to df2.</p>\n\n<p>It is similar to this thread:\n<a href=\"https://stackoverflow.com/questions/17451843/copying-a-single-index-dataframe-into-a-multiindex-dataframe\">copying a single-index DataFrame into a MultiIndex DataFrame</a></p>\n\n<p>But that solution only work for one index value, the index 'a' in that case. I want to do this operation for all index of df1.</p>\n\n<pre><code>In [1]: import pandas as pd\nIn [2]: import numpy as np\nIn [3]: import itertools\nIn [4]: inner = ('a','b')\nIn [5]: outer = ((10,20), (1,2))\nIn [6]: cols = ('one','two','three','four')\nIn [7]: sngl = pd.DataFrame(np.random.randn(2,4), index=inner, columns=cols)\nIn [8]: index_tups = list(itertools.product(*(outer + (inner,))))\nIn [9]: index_mult = pd.MultiIndex.from_tuples(index_tups)\nIn [10]: mult = pd.DataFrame(index=index_mult, columns=cols)\nIn [11]: sngl\nOut[11]: \n        one       two     three      four\na  2.946876 -0.751171  2.306766  0.323146\nb  0.192558  0.928031  1.230475 -0.256739\n\nIn [12]: mult\nOut[12]: \n        one  two three four\n10 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n20 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n\n\nIn [13]: mult.ix[(10,1)] = sngl\n\nIn [14]: mult\nOut[14]: \n        one  two three four\n10 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n20 1 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n   2 a  NaN  NaN   NaN  NaN\n     b  NaN  NaN   NaN  NaN\n</code></pre>\n\n<p>The solution given by @Jeff is</p>\n\n<pre><code>nm = mult.reset_index().set_index('level_2')\nnm.loc['a',sngl.columns] = sngl.loc['a'].values\n\n         level_0  level_1        one        two     three        four\nlevel_2                                                              \na             10        1  0.3738456 -0.2261926 -1.205177  0.08448757\nb             10        1        NaN        NaN       NaN         NaN\na             10        2  0.3738456 -0.2261926 -1.205177  0.08448757\nb             10        2        NaN        NaN       NaN         NaN\na             20        1  0.3738456 -0.2261926 -1.205177  0.08448757\nb             20        1        NaN        NaN       NaN         NaN\na             20        2  0.3738456 -0.2261926 -1.205177  0.08448757\nb             20        2        NaN        NaN       NaN         NaN\n</code></pre>\n\n<p>I can't do this:</p>\n\n<pre><code>nm.loc[:,sngl.columns] = sngl.loc[:].values\n</code></pre>\n\n<p>It will raise ValueError: \"cannot copy sequence with size X to array axis with dimension Y\"</p>\n\n<p>I am currently using a loop. But this is not the pandas way.</p>\n"}, {"tags": ["python", "intellij-idea", "code-generation", "intellij-14", "live-templates"], "owner": {"reputation": 1620, "user_id": 3368498, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e03e91b5e921f3c22e3d0688f3fd29a5?s=128&d=identicon&r=PG&f=1", "display_name": "Radek Anuszewski", "link": "https://stackoverflow.com/users/3368498/radek-anuszewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443035736, "creation_date": 1443035736, "question_id": 32747724, "link": "https://stackoverflow.com/questions/32747724/intellij-idea-14-python-live-template-with-binding-to-class-properties", "title": "Intellij IDEA 14 - python Live Template with binding to class properties", "body": "<p>I am pretty new to Intellij Live Templates, so to the point: In Intellij IDEA 14 I can define a <a href=\"https://confluence.jetbrains.com/pages/viewpage.action?pageId=51945923\" rel=\"nofollow\" title=\"Python class template\">Python class template</a>, which at the end looks like this (without comments):</p>\n\n<pre><code>class Car(object)\n    def __init__(self,)\n</code></pre>\n\n<p>And when I type arguments, they can be assigned to fields with magic <code>Alt + Enter</code> suggestion:</p>\n\n<pre><code>class Car(object)\n    def __init__(self, engine)\n        self.engine = engine\n</code></pre>\n\n<p>And then it allows me to live change variable to \"private\":</p>\n\n<pre><code>class Car(object)\n    def __init__(self, engine)\n        self.__engine = engine\n</code></pre>\n\n<p>But, is a way to make it automatic, for example i type <code>engine</code> and it generates <code>self.__engine = engine</code>? Thank you for all your answers - of course any useful links which will help me figure it out on my own are very welcomed. </p>\n"}, {"tags": ["python", "unicode", "encoding", "arcgis", "arcpy"], "comments": [{"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 1, "creation_date": 1443035668, "post_id": 32747648, "comment_id": 53336029, "body": "The error is coming from your call to &#39;str&#39; on the value. Just call unicode on the row.getValue(...) directly."}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1443035983, "post_id": 32747648, "comment_id": 53336211, "body": "I&#39;m aware.. <code>str(u&#39;\\u2019&#39;)</code> results in <code>UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\u2019&#39; in position 0: ordinal not in range(128)</code>"}, {"owner": {"reputation": 4289, "user_id": 908293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a30b8d0b807c736c457e506cd7f7f699?s=128&d=identicon&r=PG", "display_name": "saulspatz", "link": "https://stackoverflow.com/users/908293/saulspatz"}, "edited": false, "score": 0, "creation_date": 1443038588, "post_id": 32747648, "comment_id": 53337657, "body": "If the first non-ascii character (RIGHT SINGLE QUOTATION MARK) comes after 3000 records, I&#39;d guess it&#39;s a data error.  Have you considered editing the input file?  Personally, I&#39;d put the existing code in a try/except block to see how many rows give the error.  You don&#39;t have so much data that correcting it is not an option.  Of course, there are many considerations that you know about and I don&#39;t. :-)"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1443041323, "post_id": 32747648, "comment_id": 53339072, "body": "unrelated: use raw-string literals <code>r&#39;&#39;</code> for Windows paths (backslash may be special inside Python string literal otherwise)."}, {"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "edited": false, "score": 0, "creation_date": 1443048704, "post_id": 32747648, "comment_id": 53342084, "body": "\u201chave tried seemly every variation of unicode and encode\u201d \u2192 There&#39;s a guide to understanding this issue in the Python docs: <a href=\"https://docs.python.org/2/howto/unicode.html\" rel=\"nofollow noreferrer\">docs.python.org/2/howto/unicode.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": -1, "last_activity_date": 1443037007, "creation_date": 1443037007, "answer_id": 32748087, "question_id": 32747648, "link": "https://stackoverflow.com/questions/32747648/ascii-codec-cant-encode-character-u-u2019-ordinal-out-of-range128/32748087#32748087", "title": "ascii codec cant encode character u&#39;\\u2019&#39; ordinal out of range(128)", "body": "<p>The problem is that you need to decode/encode unicode/byte string instead of just calling <code>str</code> on it. So, if you have a byte string object, then you need to call encode on it to convert it into unicode object ignoring utf content. On the other hand, if you have <code>unicode</code> object, you need to call <code>decode</code> on it to convert it into <code>byte string</code> ignoring utf again. So, just use this function instead </p>\n\n<pre><code>import re\n\ndef remove_unicode(string_data):\n    \"\"\" (str|unicode) -&gt; (str|unicode)\n\n    recovers ascii content from string_data\n    \"\"\"\n    if string_data is None:\n        return string_data\n\n    if isinstance(string_data, str):\n        string_data = str(string_data.decode('ascii', 'ignore'))\n    else:\n        string_data = string_data.encode('ascii', 'ignore')\n\n    remove_ctrl_chars_regex = re.compile(r'[^\\x20-\\x7e]')\n\n    return remove_ctrl_chars_regex.sub('', string_data)\n\nfieldValue = remove_unicode(row.getValue(field.name))\n</code></pre>\n\n<p>It should fix the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 2, "last_activity_date": 1443041261, "creation_date": 1443041261, "answer_id": 32749185, "question_id": 32747648, "link": "https://stackoverflow.com/questions/32747648/ascii-codec-cant-encode-character-u-u2019-ordinal-out-of-range128/32749185#32749185", "title": "ascii codec cant encode character u&#39;\\u2019&#39; ordinal out of range(128)", "body": "<p>Never call <code>str()</code> on a <code>unicode</code> object:</p>\n\n<pre><code>&gt;&gt;&gt; str(u'\\u2019')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\u2019' in position 0: ordinal not in range(128)\n</code></pre>\n\n<p>To write rows that contain Unicode strings in csv format, use <a href=\"https://docs.python.org/2/library/csv.html#examples\" rel=\"nofollow\"><code>UnicodeWriter</code></a> instead of formatting the fields manually. It should fix several issues at once.</p>\n"}, {"tags": [], "owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "is_accepted": false, "score": 1, "last_activity_date": 1459850937, "creation_date": 1459850937, "answer_id": 36423331, "question_id": 32747648, "link": "https://stackoverflow.com/questions/32747648/ascii-codec-cant-encode-character-u-u2019-ordinal-out-of-range128/36423331#36423331", "title": "ascii codec cant encode character u&#39;\\u2019&#39; ordinal out of range(128)", "body": "<p>File TextWrappers make manual encoding/decoding unnecessary. </p>\n\n<p>Assuming the result from the row is a Unicode, simply use the <code>io.open()</code> with the encoding attribute set to the required encoding.</p>\n\n<p>For example:</p>\n\n<pre><code>import io\n\nwith io.open(r\"C:\\Users\\kkieliszek\\Desktop\\transfer.text\", \"w\", encoding='utf-8') as my_file:\n    my_file(my_unicode)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5369143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc1a4721c82e20d3f6ecd8a16680406?s=128&d=identicon&r=PG&f=1", "display_name": "KevinK", "link": "https://stackoverflow.com/users/5369143/kevink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5036, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1459850937, "creation_date": 1443035460, "question_id": 32747648, "link": "https://stackoverflow.com/questions/32747648/ascii-codec-cant-encode-character-u-u2019-ordinal-out-of-range128", "title": "ascii codec cant encode character u&#39;\\u2019&#39; ordinal out of range(128)", "body": "<p>Python 2.6, upgrading not an option</p>\n\n<p>Script is designed to take fields from a arcgis database and create Insert oracle statements to a text file that can be used at a later date. There are 7500 records after 3000 records it errors out and says the problem lies at. </p>\n\n<pre><code>fieldValue = unicode(str(row.getValue(field.name)),'utf-8',errors='ignore')\n</code></pre>\n\n<p>I have tried seemly every variation of unicode and encode. I am new to python and really just need someone with experience to look at my code and see where the problem is.</p>\n\n<pre><code>import arcpy\n\n#Where the GDB Table is located\nfc = \"D:\\GIS Data\\eMaps\\ALDOT\\ALDOT_eMaps_SignInventory.gdb/SignLocation\"\n\nfields = arcpy.ListFields(fc)\ncursor = arcpy.SearchCursor(fc)\n\n#text file output\noutFile = open(r\"C:\\Users\\kkieliszek\\Desktop\\transfer.text\", \"w\")\n\n\n#insert values into table billboard.sign_inventory\nfor row in cursor:\n outFile.write(\"Insert into billboard.sign_inventory() Values (\") \n for field in fields:\n\n    fieldValue = unicode(str(row.getValue(field.name)),'utf-8',errors='ignore')\n\n    if row.isNull(field.name) or fieldValue.strip() == \"\" : #if field is Null or a Empty String print NULL\n        value = \"NULL\"\n        outFile.write('\"' + value + '\",')\n    else: #print the value in the field\n        value = str(row.getValue(field.name))\n        outFile.write('\"' + value + '\",')\n\noutFile.write(\"); \\n\\n \")\n\n\noutFile.close()    # This closes the text file\n</code></pre>\n\n<p>Error Code:</p>\n\n<pre><code>Traceback (most recent call last):\n File \"tablemig.py\", line 25, in &lt;module&gt;\n  fieldValue = unicode(str(row.getValue(field.name)),'utf-8',errors='ignore')\n UnicodeEncodeError: 'ascii' codec can't encode character u'\\u2019' in    position 76: ordinal not in range(128)\n</code></pre>\n"}, {"tags": ["python", "string", "methods", "replace"], "answers": [{"tags": [], "owner": {"reputation": 2006, "user_id": 2639729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b003d5689d35dc6629895dbab3b0228?s=128&d=identicon&r=PG&f=1", "display_name": "DorElias", "link": "https://stackoverflow.com/users/2639729/dorelias"}, "is_accepted": false, "score": 7, "last_activity_date": 1443035538, "creation_date": 1443035538, "answer_id": 32747664, "question_id": 32747609, "link": "https://stackoverflow.com/questions/32747609/how-do-i-replace-the-following-occurrences-of-the-first-letter-with-a/32747664#32747664", "title": "How do I replace the following occurrences of the first letter with a &quot;*&quot;?", "body": "<pre><code>def fix_start(s):\n    return s[0]+ s[1:].replace(s[0],'*')\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5295553, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5d85d308fb00e06fdac2c8f2ed6efc8?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Dombal", "link": "https://stackoverflow.com/users/5295553/josh-dombal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1443035538, "creation_date": 1443035323, "question_id": 32747609, "link": "https://stackoverflow.com/questions/32747609/how-do-i-replace-the-following-occurrences-of-the-first-letter-with-a", "title": "How do I replace the following occurrences of the first letter with a &quot;*&quot;?", "body": "<p>I got stuck on this and I don't know what to do from here.</p>\n\n<pre><code># returns a string that changes all occurrences of its first char have been changed to '*'\n\n\ndef fix_start(str):\n    results = []\n    str.startswith(str[1])\n    results = \n</code></pre>\n\n<p>for example: given string = 'bubble' it should return: bu**le</p>\n"}, {"tags": ["python", "tkinter", "optionmenu"], "answers": [{"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1443058643, "post_id": 32751671, "comment_id": 53344510, "body": "<code>bind_all</code> isn&#39;t a good solution if there are any other widgets in the entire GUI that takes keyboard input."}, {"owner": {"reputation": 159, "user_id": 2127502, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Xk74I.png?s=128&g=1", "display_name": "Aginor", "link": "https://stackoverflow.com/users/2127502/aginor"}, "edited": false, "score": 0, "creation_date": 1443203696, "post_id": 32751671, "comment_id": 53414744, "body": "This is perfect. Excellent. Thank you!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "is_accepted": true, "score": 0, "last_activity_date": 1443055620, "creation_date": 1443055620, "answer_id": 32751671, "question_id": 32747592, "link": "https://stackoverflow.com/questions/32747592/can-you-have-a-tkinter-drop-down-menu-that-can-jump-to-an-entry-by-typing/32751671#32751671", "title": "Can you have a TKinter drop down menu that can jump to an entry by typing?", "body": "<p>You would have to catch each keypress, find the first item in the list that begins with the letter, and set the variable.  In the code below \"five\" is set no matter which key is pressed as an example.</p>\n\n<pre><code>import sys\nif sys.version_info[0] &lt; 3:\n    import Tkinter as tk     ## Python 2.x\nelse:\n    import tkinter as tk     ## Python 3.x\n\nmaster = tk.Tk()\nmaster.geometry(\"125x100\")\n\ndef key_in(event):\n    ch=event.char.lower()\n    print(\"key_in\", ch)\n    if \"a\" &lt;= ch &lt;= \"z\":\n        variable.set(\"five\")\n    if event.keysym==\"Return\":\n        print(\"Enter key pressed\")\n\ndef ok(arg):\n    print(\"ok called\", variable.get())\n\nvariable = tk.StringVar(master)\noptions=(\"one\", \"two\", \"three\", \"four\", \"five\")\nop=tk.OptionMenu(master, variable, *options, command=ok)\nop.grid()\nvariable.set(\"two\")\n\nop.bind_all('&lt;Key&gt;', key_in)\nop.focus_set()\n\ntk.Button(master, text=\"Exit\", bg=\"red\",\n          command=master.quit).grid(row=1)\n\nmaster.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 2127502, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Xk74I.png?s=128&g=1", "display_name": "Aginor", "link": "https://stackoverflow.com/users/2127502/aginor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 1, "accepted_answer_id": 32751671, "answer_count": 1, "score": 1, "last_activity_date": 1443055620, "creation_date": 1443035257, "question_id": 32747592, "link": "https://stackoverflow.com/questions/32747592/can-you-have-a-tkinter-drop-down-menu-that-can-jump-to-an-entry-by-typing", "title": "Can you have a TKinter drop down menu that can jump to an entry by typing?", "body": "<p>I have my OptionMenu setup but it's a very long list (every FBS football team) and takes forever to scroll through. Is there a way that I can setup the menu so that I can start typing a team name and it jumps to that section of the OptionMenu? Also, if there's a way to automatically select it when enter is pressed, that would be helpful as well.</p>\n"}, {"tags": ["python", "string", "python-3.x"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1443035342, "post_id": 32747569, "comment_id": 53335853, "body": "I think you&#39;re getting ahead of yourself here. Regular functions do not use <code>self</code>. That is typically exclusive to class methods. The function you have now will not work no matter what you replace <code>john</code> with."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5369233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dbbd18a12d04ab166ea343b6b611f83?s=128&d=identicon&r=PG&f=1", "display_name": "jim jam flim flam", "link": "https://stackoverflow.com/users/5369233/jim-jam-flim-flam"}, "edited": false, "score": 0, "creation_date": 1443035846, "post_id": 32747614, "comment_id": 53336132, "body": "what is the {0} for?  And I just edited - how would I go about making it so if I were to type in print_name(john) in the shell it would return the desired message?"}], "tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": 3, "last_activity_date": 1443037339, "last_edit_date": 1443037339, "creation_date": 1443035339, "answer_id": 32747614, "question_id": 32747569, "link": "https://stackoverflow.com/questions/32747569/defining-a-string/32747614#32747614", "title": "Defining a string", "body": "<p>You could easily do it as follows</p>\n\n<pre><code>def print_name(name):\n    print(\"Welcome to class, {0}\".format(name))\n\nprint_name(\"John\")\n</code></pre>\n\n<p>As far as your own solution is concerned, I don't know what you are doing. </p>\n\n<ol>\n<li>what is <code>self</code></li>\n<li>It should be <code>john</code> instead of john</li>\n</ol>\n\n<p><strong>For Edited question</strong></p>\n\n<pre><code>def printName(x):\n    msg = \"Welcome to class, \"\n    print(msg + x) # '+' is concatenation symbol in python, no self variable exists here\n\nprintName('john') # Since it's a string should be quoted\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1443035407, "creation_date": 1443035407, "answer_id": 32747633, "question_id": 32747569, "link": "https://stackoverflow.com/questions/32747569/defining-a-string/32747633#32747633", "title": "Defining a string", "body": "<p>It seems like you are looking for something like this:</p>\n\n<pre><code>def printName(name):\n    msg = \"Welcome to class, \"\n    print(msg, name)\n\nperson = 'John'\nprintName(person)\n</code></pre>\n\n<p>Note that I'm assigning a variable <code>person</code> to the string 'John', then passing that variable to the function. The function receives the parameter into the local variable <code>name</code> and prints that variable along with the message.</p>\n"}], "owner": {"reputation": 9, "user_id": 5369233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dbbd18a12d04ab166ea343b6b611f83?s=128&d=identicon&r=PG&f=1", "display_name": "jim jam flim flam", "link": "https://stackoverflow.com/users/5369233/jim-jam-flim-flam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1443055340, "creation_date": 1443035161, "last_edit_date": 1443036909, "question_id": 32747569, "link": "https://stackoverflow.com/questions/32747569/defining-a-string", "title": "Defining a string", "body": "<p>How would I go about defining a string in python?  I'm having issues</p>\n\n<pre><code>def printName(x):\n    msg = \"Welcome to class, \"\n    print(msg, self.name)\n\nprintName(john)\n</code></pre>\n\n<p>In this situation, I am trying to figure out what I am supposed to put after the function \"printName\" and make it so the string that it calls (in this case john) will show up, and print the message \"welcome to class, john\"</p>\n\n<p>Please note that I am a beginner.  </p>\n\n<p>I want to set it up so I type into the shell</p>\n\n<pre><code>&gt;&gt;&gt; printName(john)\n</code></pre>\n\n<p>and it'll return \"Welcome to class, john\"</p>\n\n<p>Obviously, I could do this with a very simple <code>print()</code> command, but I need to know how to do it with the defined printName command.  I am using Wing101 on 3.3.5</p>\n"}, {"tags": ["python", "numpy", "anaconda", "plotly", "http-status-code-504"], "comments": [{"owner": {"reputation": 2288, "user_id": 4142536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F9sonrb5TAQ/AAAAAAAAAAI/AAAAAAAAAEM/gqc30vi0ijw/photo.jpg?sz=128", "display_name": "Chris P", "link": "https://stackoverflow.com/users/4142536/chris-p"}, "edited": false, "score": 0, "creation_date": 1443044436, "post_id": 32747516, "comment_id": 53340553, "body": "Hey Connor -- A gateway timeout is a server error, not necessarily an error with your code. These errors happen when it takes too long to process a request (eg &gt;60 seconds). This can happen if the plot that you are creating is too large (e.g. &gt;10 million points) or if there just happens to be a lot of people on the website at the point of request. You might try to catch the error (<a href=\"http://stackoverflow.com/questions/16511337\">stackoverflow.com/questions/16511337</a>) and then retry a minute or so later. Also, make sure that the graphs that you are trying to make aren&#39;t too large!"}, {"owner": {"reputation": 1, "user_id": 5369198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee3ceb2ed3f7efa981de6c20c6bb7a8b?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Whitman", "link": "https://stackoverflow.com/users/5369198/connor-whitman"}, "reply_to_user": {"reputation": 2288, "user_id": 4142536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F9sonrb5TAQ/AAAAAAAAAAI/AAAAAAAAAEM/gqc30vi0ijw/photo.jpg?sz=128", "display_name": "Chris P", "link": "https://stackoverflow.com/users/4142536/chris-p"}, "edited": false, "score": 1, "creation_date": 1443384961, "post_id": 32747516, "comment_id": 53461378, "body": "Thanks Chris! Turns out there was an error in the code that was creating a recursively large data set, all fixed now."}], "owner": {"reputation": 1, "user_id": 5369198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee3ceb2ed3f7efa981de6c20c6bb7a8b?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Whitman", "link": "https://stackoverflow.com/users/5369198/connor-whitman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1342, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450136336, "creation_date": 1443034986, "question_id": 32747516, "link": "https://stackoverflow.com/questions/32747516/plotly-python-504-gateway-timeout", "title": "Plotly &amp; Python - 504 Gateway Timeout", "body": "<p>I have a small program that I wrote to analyze large data sets from a device at my work and graph the data using Plotly. Up until recently it was working well, however in the past week it has been giving a 504 Gateway Timeout server error when it goes to graph the data. Nothing has changed in the code, although I've tried altering the graphing portion of it. I've attempted a re-install of both python/anaconda, as well as installing and updating the plotly python libraries. I've re-initialized the API credentials for plotly as well using three different accounts with no success. So far the error has persisted despite all efforts, although I am able to graph to plotly when using the python console.</p>\n\n<p>Any help with this would be very useful. I can post portions of the code if necessary. Below is the error that the console outputs.</p>\n\n<p>File \"NKDA_2.1.py\", line 51, in \n    thisPulseCount, thisArcCount, thisMaxCurrent = FH.processFile(procedureID, currentProcedure, resultsFolder)\n  File \"C:\\Users\\cellison\\Documents\\Data Analysis\\fileHandling.py\", line 97, in processFile\n    unique_url = py.plot(fig, filename=graphName)\n  File \"C:\\Users\\cellison\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\plotly\\plotly\\plotly.py\", line 262, in plot\n    res = _send_to_plotly(figure, **plot_options)\n  File \"C:\\Users\\cellison\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\plotly\\plotly\\plotly.py\", line 1421, in _send_to_plotly\n    r.raise_for_status()\n  File \"C:\\Users\\cellison\\AppData\\Local\\Continuum\\Anaconda\\lib\\site-packages\\requests\\models.py\", line 851, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 504 Server Error: GATEWAY_TIMEOUT</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "is_accepted": true, "score": 1, "last_activity_date": 1443035741, "creation_date": 1443035741, "answer_id": 32747726, "question_id": 32747501, "link": "https://stackoverflow.com/questions/32747501/error-in-creating-csv-out-of-an-excel-file-read-by-pandas/32747726#32747726", "title": "Error in creating csv out of an excel file read by pandas", "body": "<p>I'm guessing you're using Python 2.  Try changing</p>\n\n<pre><code> df.to_csv('out.csv')\n</code></pre>\n\n<p>to</p>\n\n<pre><code> df.to_csv('out.csv', encoding='utf-8')\n</code></pre>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 32747726, "answer_count": 1, "score": 0, "last_activity_date": 1443035741, "creation_date": 1443034940, "question_id": 32747501, "link": "https://stackoverflow.com/questions/32747501/error-in-creating-csv-out-of-an-excel-file-read-by-pandas", "title": "Error in creating csv out of an excel file read by pandas", "body": "<p>I am reading in an excel file and then spitting out a sheet from that excel file, both using pandas. However, I am getting an error as follows:</p>\n\n<pre><code>try:\n    fao_file = pd.ExcelFile('FAO_Crops_area_harvested_Data.xlsx')\nexcept:\n    logging.info('Error reading excel file on FAO data')\n\ndf = fao_file.parse('Production_Crops_E_All_Data.csv')\ndf.to_csv('out.csv')\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>UnicodeEncodeError: 'ascii' codec can't encode character u'\\xf4' in position 1: ordinal not in range(128)\n</code></pre>\n\n<p>The excel file is available here: \n<a href=\"https://umd.box.com/s/73dqgf8npqquq3icw6w2z8xq73vob3me\" rel=\"nofollow\">https://umd.box.com/s/73dqgf8npqquq3icw6w2z8xq73vob3me</a></p>\n"}, {"tags": ["python", "numpy", "go"], "comments": [{"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1443035392, "post_id": 32747443, "comment_id": 53335878, "body": "I don&#39;t think there is anything in the standard lib but you could combine two things to achieve this. Write the matrix as binary, compress the file. Alternatively I would suggest using Google protobuff because it probably will suit your needs and is becoming pretty common in my experience (in many languages, not just Go)."}, {"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1443036946, "post_id": 32747443, "comment_id": 53336748, "body": "could also look into hdf5 formats, I know golang has a package to read/write them."}, {"owner": {"reputation": 5543, "user_id": 2526657, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2e87466d1323981236bb9ce4735ea9f1?s=128&d=identicon&r=PG&f=1", "display_name": "uday", "link": "https://stackoverflow.com/users/2526657/uday"}, "edited": false, "score": 0, "creation_date": 1443063442, "post_id": 32747443, "comment_id": 53345608, "body": "hdf5 is way too slow compared to npz and I mostly work with numpy (with some scipy)."}], "answers": [{"comments": [{"owner": {"reputation": 504, "user_id": 1941745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9fbfbcd311fc349cfe27c231fa3654?s=128&d=identicon&r=PG", "display_name": "Kerby Shedden", "link": "https://stackoverflow.com/users/1941745/kerby-shedden"}, "edited": false, "score": 0, "creation_date": 1460978280, "post_id": 32748241, "comment_id": 60973092, "body": "There is now a Go library for reading numpy .npy files:  <a href=\"https://github.com/kshedden/gonpy\" rel=\"nofollow noreferrer\">github.com/kshedden/gonpy</a>"}], "tags": [], "owner": {"reputation": 4011, "user_id": 29703, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/32e50f8f8e17d63c49bf03d54a48282a?s=128&d=identicon&r=PG", "display_name": "Jeffrey Martinez", "link": "https://stackoverflow.com/users/29703/jeffrey-martinez"}, "is_accepted": false, "score": 2, "last_activity_date": 1443037564, "creation_date": 1443037564, "answer_id": 32748241, "question_id": 32747443, "link": "https://stackoverflow.com/questions/32747443/storing-matrices-in-golang-in-compressed-binary-format/32748241#32748241", "title": "storing matrices in golang in compressed binary format", "body": "<p>1) .npz is a numpy specific format. It is unlikely that Go itself would ever support this format in the standard library. I also don't know of any third party library that exists today, and (10 second) search didn't pop one up. If you need npz specifically, go with python + numpy.</p>\n\n<p>If you just want something similar from Go, you can use any format. Binary formats include <a href=\"https://golang.org/pkg/encoding/binary/\" rel=\"nofollow\">golang binary</a> and <a href=\"https://golang.org/pkg/encoding/gob/\" rel=\"nofollow\">gob</a>. Depending on what you're trying to do, you could even use a non-binary format like <a href=\"https://golang.org/pkg/encoding/json/\" rel=\"nofollow\">json</a> and just compress it on your own.</p>\n\n<p>2) Go doesn't have built-in matrices. That library you found is third party and it only handles <code>float64</code>s.</p>\n\n<p>However, if you just need to store strings in matrix (n-dimensional) format, you would use a n-dimensional slice. For 2-dimensional it looks like this: <code>var myStringMatrix [][]string</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4011, "user_id": 29703, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/32e50f8f8e17d63c49bf03d54a48282a?s=128&d=identicon&r=PG", "display_name": "Jeffrey Martinez", "link": "https://stackoverflow.com/users/29703/jeffrey-martinez"}, "edited": false, "score": 0, "creation_date": 1443041776, "post_id": 32748774, "comment_id": 53339299, "body": "fwiw, Go wasn&#39;t built as an alternative to Python directly, and not just for web applications. The project is to create a general systems language. Usually I&#39;m replacing what I might have otherwise built with Java or C++. And perhaps python too."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 4011, "user_id": 29703, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/32e50f8f8e17d63c49bf03d54a48282a?s=128&d=identicon&r=PG", "display_name": "Jeffrey Martinez", "link": "https://stackoverflow.com/users/29703/jeffrey-martinez"}, "edited": false, "score": 1, "creation_date": 1443044094, "post_id": 32748774, "comment_id": 53340416, "body": "I first read about it as an alternative language for the Google App Engine - some 4 years ago.  But I&#39;m not surprised that Google would aiming for broader applications."}, {"owner": {"reputation": 5543, "user_id": 2526657, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2e87466d1323981236bb9ce4735ea9f1?s=128&d=identicon&r=PG&f=1", "display_name": "uday", "link": "https://stackoverflow.com/users/2526657/uday"}, "edited": false, "score": 0, "creation_date": 1443063096, "post_id": 32748774, "comment_id": 53345537, "body": "@hpaulj, I&#39;m just exploring Go as it is in between C++ and Python and I&#39;m facing speed issues with Python. I have designed and written binary file formats (some in Cython) that can be written/read from Python, including ones compressed by Python zip, I but haven&#39;t been able to come close to the speed of <code>.npz</code> or <code>.npy</code> files (even my own version of a faster min-Pandas written partially in Cython). Hence, my interest about Go. So far, trying to avoid migrating C++, but I&#39;m generally coming to the conclusion that the only language with everything I need, and faster than Python is C++."}, {"owner": {"reputation": 8426, "user_id": 1791279, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/abcaa7d84748400f1557b2f91add969a?s=128&d=identicon&r=PG", "display_name": "rth", "link": "https://stackoverflow.com/users/1791279/rth"}, "reply_to_user": {"reputation": 5543, "user_id": 2526657, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2e87466d1323981236bb9ce4735ea9f1?s=128&d=identicon&r=PG&f=1", "display_name": "uday", "link": "https://stackoverflow.com/users/2526657/uday"}, "edited": false, "score": 1, "creation_date": 1443094841, "post_id": 32748774, "comment_id": 53359847, "body": "@uday While Go sounds fun, I am a bit skeptical about switching from Python to Go in order to improve write performance of a binary format. You can always make a C (or Cython) extension, as you have done,  called from Python. The speed will be mostly dependent on your implementation (use of compression, cache etc), and IO bound, not the language itself (i.e. Cython/C/C++/Fortran/Go, etc).    Also have you looked at the <a href=\"https://github.com/numpy/numpy/blob/5d6a9f0030e8d1a63e43783c2b5b54cde93bc5d0/numpy/lib/npyio.py#L603\" rel=\"nofollow noreferrer\"><code>np.savez</code></a> implementation: it is pure Python and has good write speeds."}, {"owner": {"reputation": 4011, "user_id": 29703, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/32e50f8f8e17d63c49bf03d54a48282a?s=128&d=identicon&r=PG", "display_name": "Jeffrey Martinez", "link": "https://stackoverflow.com/users/29703/jeffrey-martinez"}, "reply_to_user": {"reputation": 8426, "user_id": 1791279, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/abcaa7d84748400f1557b2f91add969a?s=128&d=identicon&r=PG", "display_name": "rth", "link": "https://stackoverflow.com/users/1791279/rth"}, "edited": false, "score": 1, "creation_date": 1443129273, "post_id": 32748774, "comment_id": 53381015, "body": "I&#39;m a big fan of Go, but @rth is spot on. I recommend doing some measurements to see where your bottleneck is before spending a good amount of time trying to fix a problem that might not be. That being said if you just want to play with Go, do it :p"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1443039707, "creation_date": 1443039707, "answer_id": 32748774, "question_id": 32747443, "link": "https://stackoverflow.com/questions/32747443/storing-matrices-in-golang-in-compressed-binary-format/32748774#32748774", "title": "storing matrices in golang in compressed binary format", "body": "<p><code>npz</code> files are <code>zip</code> archives.  Archiving and compression (optional) are handled by the Python <code>zip</code> module.  The <code>npz</code> contains one <code>npy</code> file for each variable that you save. Any OS based archiving tool can decompress and extract the component <code>.npy</code> files.</p>\n\n<p>So the remaining question is - can you simulate the <code>npy</code> format?  It isn't trivial, but also not difficult either.  It consists of a header block that contains shape, strides, dtype, and order information, followed by a data block, which is, effectively, a byte image of the data buffer of the array.</p>\n\n<p>So the buffer information, and data are closely linked to the <code>numpy</code> array content.  And if the variable isn't a normal array, <code>save</code> uses the Python pickle mechanism.</p>\n\n<p>For a start I'd suggest using the <code>csv</code> format.  It's not binary, and not fast, but everyone and his brother can generate and read it.  We constantly get SO questions about reading such files using <code>np.loadtxt</code> or <code>np.genfromtxt</code>.  Look at the code for <code>np.savetxt</code> to see how <code>numpy</code> produces such files.  It's pretty simple.</p>\n\n<p>Another general purpose choice would be JSON using the <code>tolist</code> format of an array.  That comes to mind because <code>GO</code> is Google's home grown alternative to Python for web applications.  JSON is a cross language format based on simplified Javascript syntax.  </p>\n"}], "owner": {"reputation": 5543, "user_id": 2526657, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2e87466d1323981236bb9ce4735ea9f1?s=128&d=identicon&r=PG&f=1", "display_name": "uday", "link": "https://stackoverflow.com/users/2526657/uday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443039707, "creation_date": 1443034758, "question_id": 32747443, "link": "https://stackoverflow.com/questions/32747443/storing-matrices-in-golang-in-compressed-binary-format", "title": "storing matrices in golang in compressed binary format", "body": "<p>I am exploring a comparison between <code>Go</code> and <code>Python</code>, particularly for mathematical computation. I noticed that <code>Go</code> has a matrix package <a href=\"https://godoc.org/github.com/gonum/matrix/mat64\" rel=\"nofollow\">mat64</a>. </p>\n\n<p>1) I wanted to ask someone who uses both <code>Go</code> and <code>Python</code> if there are functions / tools comparable that are equivalent of <code>Numpy</code>'s <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.savez_compressed.html#numpy.savez_compressed\" rel=\"nofollow\"><code>savez_compressed</code></a> which stores data in a <code>npz</code> format (i.e. \"compressed\" binary, multiple matrices per file) for <code>Go</code>'s matrics?</p>\n\n<p>2) Also, can Go's matrices handle string types like <code>Numpy</code> does?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": 0, "last_activity_date": 1443035222, "last_edit_date": 1443035222, "creation_date": 1443034915, "answer_id": 32747493, "question_id": 32747377, "link": "https://stackoverflow.com/questions/32747377/python-help-reading-from-a-text-file/32747493#32747493", "title": "Python help reading from a text file", "body": "<p>Just create a list of <code>[longitude, latitude]</code> values.</p>\n\n<pre><code>import re\n\ncoordinates = []\n\nwith open('myfile.txt') as myfile:\n     for line in myfile.readlines():\n         coordinates.append(re.findall(r'[\\d.]+', line))\n</code></pre>\n\n<p>Now you can easily fetch any value, and do your computation, like</p>\n\n<pre><code>lat1 = coordinates[0][1]\nlong2 = coordinates[1][0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "is_accepted": false, "score": 0, "last_activity_date": 1443035033, "creation_date": 1443035033, "answer_id": 32747526, "question_id": 32747377, "link": "https://stackoverflow.com/questions/32747377/python-help-reading-from-a-text-file/32747526#32747526", "title": "Python help reading from a text file", "body": "<p>Assuming you have only two lines in the file:</p>\n\n<pre><code>convert = lambda line: map(float, line.strip().split())\n\nwith open('a.txt') as f:\n   lat1, long1 = convert( f.readline() )\n   lat2, long2 = convert( f.readline() )\n\nprint(lat1)\nprint(long1)\nprint(lat2)\nprint(long2)\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>38.898\n-77.037\n38.897\n-77.043\n</code></pre>\n\n<p>You can easily generalize it using a <code>for</code> loop.</p>\n"}, {"tags": [], "owner": {"reputation": 4384, "user_id": 5171169, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/903cb5f31300e0ce8b9843fa4e273b41?s=128&d=identicon&r=PG&f=1", "display_name": "LetzerWille", "link": "https://stackoverflow.com/users/5171169/letzerwille"}, "is_accepted": false, "score": 0, "last_activity_date": 1443039380, "last_edit_date": 1443039380, "creation_date": 1443036292, "answer_id": 32747880, "question_id": 32747377, "link": "https://stackoverflow.com/questions/32747377/python-help-reading-from-a-text-file/32747880#32747880", "title": "Python help reading from a text file", "body": "<pre><code>38.898      -77.037\n\n38.897      -77.043\n\n58.897      -77.045\n\n58.897      -77.045\n\n31.191      -77.037\n\n31.192      -77.043\n\n51.191      -77.049\n\n51.190      -77.045\n\nimport re\n\nallNums = []\n\nwith open(\"dir\", \"r\") as f:\n  for line in f:\n    l = re.findall('\\d+.\\d+',line)\n    if len(l) == 2:\n        allNums.extend(l)\n# split list into size 2 sublists\ncoord = [allNums[i:i+2] for i in range(0, len(allNums), 2)]\n\nfor el in coord:\n    print(el)\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<p>['38.898', '77.037']</p>\n\n<p>['38.897', '77.043']</p>\n\n<p>['58.897', '77.045']</p>\n\n<p>['58.897', '77.045']</p>\n\n<p>['31.191', '77.037']</p>\n\n<p>['31.192', '77.043']</p>\n\n<p>['51.191', '77.049']</p>\n\n<p>['51.190', '77.045']</p>\n"}], "owner": {"reputation": 113, "user_id": 5369169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6856bcd931b4f79a60ceb177eeea5b1d?s=128&d=identicon&r=PG&f=1", "display_name": "ToshibaA", "link": "https://stackoverflow.com/users/5369169/toshibaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1443039380, "creation_date": 1443034573, "last_edit_date": 1443034800, "question_id": 32747377, "link": "https://stackoverflow.com/questions/32747377/python-help-reading-from-a-text-file", "title": "Python help reading from a text file", "body": "<p>I have to make a program in python where i compute the distance using the latitude and longitude of numbers from a text file. I know how to do the computations, but i am lost on how to match the latitude and long from the text file. \nmy text file looks like this for instance:</p>\n\n<pre><code>38.898      -77.037\n38.897      -77.043\n</code></pre>\n\n<p>I need to match the first number w/ lat1 and the bottom number w/ lat2.\nThank you.</p>\n"}, {"tags": ["python", "python-2.7", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 1192, "user_id": 1478204, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/27b65f21b3f81f076351c1cea08ce420?s=128&d=identicon&r=PG", "display_name": "MyopicVisage", "link": "https://stackoverflow.com/users/1478204/myopicvisage"}, "edited": false, "score": 0, "creation_date": 1509206957, "post_id": 32747631, "comment_id": 80930081, "body": "Excellent feedback. Do you have a script you would recommend as a template for word-wise (Autocomplete) or paragraph-wise replacement in a tkinter text widget?"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 1, "last_activity_date": 1443035402, "creation_date": 1443035402, "answer_id": 32747631, "question_id": 32747369, "link": "https://stackoverflow.com/questions/32747369/tkinter-find-and-replace-function-for-notepad/32747631#32747631", "title": "Tkinter Find and Replace Function for Notepad", "body": "<p>The most obvious mistake is that you are creating a second instance of <code>Tk</code>. If you need a popup window you should create an instance of <code>Toplevel</code>. You should always have exactly one instance of <code>Tk</code> running.</p>\n\n<p>The second problem is related to the fact you are using a <code>Text</code> widget for the find and replace inputs. When you do a get with a second index of <code>END</code>, the string you get back will always have a newline whether the user entered one or not. If you want exactly and only what the user typed, use \"end-1c\" (end minus one character).</p>\n\n<p>Finally, there's no reason to get all the text, replace the string, and then re-insert all the text. That will work only as long as you have no formatting or embedded widgets or images in the text widget. The text widget has a <code>search</code> command which can search for a pattern (either string or regular expression), and you can use the returned information to replace the found text with the replacement text.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5368876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1294, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443035402, "creation_date": 1443034555, "question_id": 32747369, "link": "https://stackoverflow.com/questions/32747369/tkinter-find-and-replace-function-for-notepad", "title": "Tkinter Find and Replace Function for Notepad", "body": "<p>I'm new at Tkinter, and python. I've been experimenting with a notepad script I've made. I'm working on a find / replace command. But I've had no luck. Here is what I've tried so far:</p>\n\n<pre><code>def replace():\n    def replaceall():\n        findtext = str(find.get(1.0, END))\n        replacetext = str(replace.get(1.0, END))\n        alltext = str(text.get(1.0, END))\n        alltext1 = all.replace(findtext, replacetext)\n        text.delete(1.0, END)\n        text.insert('1.0', alltext1)\n    replacebox =Tk()\n    replacebox.geometry(\"230x150\")\n    replacebox.title(\"Replace..\")\n    find = Text(replacebox, height=2, width=20).pack()\n    replace = Text(replacebox, height=2, width=20).pack()\n    replaceallbutton = Button(replacebox, text=\"Replace..\", command=replaceall)\n    replaceallbutton.pack()\n</code></pre>\n\n<p>(this is just the function I am defining for the replace command)</p>\n\n<p>The 'text' variable is on the large canvas which contains the menu's and the main text widget.</p>\n\n<p>Any help is appreciated\nSo far I've been creating this notepad in 2.7.8, so the Tkinter import is 'Tkinter.'</p>\n\n<p>What I'm shooting for is having the first box have the text to find and the second box have the text to be replaced. Upon pressing the replace button, the function replaceall() should begin.</p>\n\n<p>Are there any obvious mistakes in my function, or is it just deeply flawed? Any help is appreciated.</p>\n"}, {"tags": ["python", "cx-oracle"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3056886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd8cefccd98c5174d0b5494e876518e5?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/3056886/oleg"}, "edited": false, "score": 0, "creation_date": 1443036326, "post_id": 32747463, "comment_id": 53336388, "body": "Cheers! Thank you for your asnwer! I&#39;ve put working example in the main post"}, {"owner": {"reputation": 17732, "user_id": 237939, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GYEZO.jpg?s=128&g=1", "display_name": "Rajesh Chamarthi", "link": "https://stackoverflow.com/users/237939/rajesh-chamarthi"}, "reply_to_user": {"reputation": 69, "user_id": 3056886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd8cefccd98c5174d0b5494e876518e5?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/3056886/oleg"}, "edited": false, "score": 1, "creation_date": 1443036438, "post_id": 32747463, "comment_id": 53336452, "body": "Hi Oleg - I still don&#39;t see why you&#39;d need a to_date for this. in your code, what is your variable &quot;a&quot; defined as?"}, {"owner": {"reputation": 69, "user_id": 3056886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd8cefccd98c5174d0b5494e876518e5?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/3056886/oleg"}, "edited": false, "score": 0, "creation_date": 1443037533, "post_id": 32747463, "comment_id": 53337059, "body": "Removed variable &quot;a&quot; from the last example so it doesn&#39;t confuse anyone, it accidentally derived from my testing. I don&#39;t need <code>to_date</code> there since I can use <code>trunc</code> for date rounding, but I can&#39;t guarantee users will avoid it and it&#39;s cool I&#39;ve encountered this behaviour before them. Actually I&#39;ve always been using <code>to_date</code> for date rounding in sql views since I never suspected such aspect"}, {"owner": {"reputation": 17732, "user_id": 237939, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GYEZO.jpg?s=128&g=1", "display_name": "Rajesh Chamarthi", "link": "https://stackoverflow.com/users/237939/rajesh-chamarthi"}, "reply_to_user": {"reputation": 69, "user_id": 3056886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd8cefccd98c5174d0b5494e876518e5?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/3056886/oleg"}, "edited": false, "score": 0, "creation_date": 1443037745, "post_id": 32747463, "comment_id": 53337166, "body": "ok. So, the correct solution would be to use trunc(sysdate) if you want a date output or to_char(sysdate,&#39;string format&#39;) if you want to assign/return a string datatype. There isn&#39;t a case for to_date(sysdate) either ways. Hope that is clear :)"}], "tags": [], "owner": {"reputation": 17732, "user_id": 237939, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/GYEZO.jpg?s=128&g=1", "display_name": "Rajesh Chamarthi", "link": "https://stackoverflow.com/users/237939/rajesh-chamarthi"}, "is_accepted": true, "score": 2, "last_activity_date": 1443036371, "last_edit_date": 1443036371, "creation_date": 1443034818, "answer_id": 32747463, "question_id": 32747281, "link": "https://stackoverflow.com/questions/32747281/cx-oracle-is-cutting-year-in-a-date-field-in-some-specific-cases/32747463#32747463", "title": "Cx_oracle is cutting year in a date field in some specific cases", "body": "<p>The simple answer to this problem is not using to_date on a date function again. </p>\n\n<p>Your conversion function should be </p>\n\n<p>a) <code>to_date(string_column,'string_representation')</code> if you are trying to convert something to a date </p>\n\n<p>or </p>\n\n<p>b) <code>to_char(date_column,'string_representation')</code> if you are trying to convert something from a date to a string, typically for reporting, spooling or printing.</p>\n\n<p>If you want to understand the wierd behavior, you can look at your session's NLS settings. When you say TO_DATE(sysdate,...), to_date expects a string, so I think Oracle would try and implicitly convert sysdate to a strng. This happens using NLS_DATE_FORMAT for your current session.</p>\n"}], "owner": {"reputation": 69, "user_id": 3056886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd8cefccd98c5174d0b5494e876518e5?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/3056886/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 32747463, "answer_count": 1, "score": 0, "last_activity_date": 1443036509, "creation_date": 1443034269, "last_edit_date": 1443036509, "question_id": 32747281, "link": "https://stackoverflow.com/questions/32747281/cx-oracle-is-cutting-year-in-a-date-field-in-some-specific-cases", "title": "Cx_oracle is cutting year in a date field in some specific cases", "body": "<p>I am stuck with next problem when working with dates using python &amp; cx_Oracle.</p>\n\n<p>This one works fine:</p>\n\n<pre><code>In [29]: cursor.execute(\"SELECT TO_DATE('23.09.2015','DD.MM.YYYY') FROM dual\")\nOut[29]: &lt;cx_Oracle.Cursor on &lt;cx_Oracle.Connection to web@hdb:1521/db11&gt;&gt;\n\nIn [30]: cursor.fetchone()\nOut[30]: (datetime.datetime(2015, 9, 23, 0, 0),)\n</code></pre>\n\n<p>this works fine also:</p>\n\n<pre><code>In [33]: cursor.execute(\"SELECT sysdate FROM dual\")\nOut[33]: &lt;cx_Oracle.Cursor on &lt;cx_Oracle.Connection to web@hdb:1521/db11&gt;&gt;\n\nIn [34]: cursor.fetchone()\nOut[34]: (datetime.datetime(2015, 9, 23, 21, 25, 16),)\n</code></pre>\n\n<p>But when I use oracle <code>to_date</code> function with a date field cx_Oracle cuts year value to 2 digits, so instead of <code>2015</code> I am getting <code>15</code>. Example here:</p>\n\n<pre><code>In [31]: cursor.execute(\"SELECT TO_DATE(TO_DATE('23.09.2015','DD.MM.YYYY'),'DD.MM.YYYY') FROM dual\")\nOut[31]: &lt;cx_Oracle.Cursor on &lt;cx_Oracle.Connection to web@hdb:1521/db11&gt;&gt;\n\nIn [32]: cursor.fetchone()\nOut[32]: (datetime.datetime(15, 9, 23, 0, 0),)\n</code></pre>\n\n<p>and here:</p>\n\n<pre><code>In [36]: cursor.execute(\"SELECT TO_DATE(sysdate,'DD.MM.YYYY') FROM dual\")\nOut[36]: &lt;cx_Oracle.Cursor on &lt;cx_Oracle.Connection to web@hdb:1521/db11&gt;&gt;\n\nIn [37]: cursor.fetchone()\nOut[37]: (datetime.datetime(15, 9, 23, 0, 0),)\n</code></pre>\n\n<p>There is also a <code>trunc</code> function in oracle which could be used for date rounding and it doesn't trigger an issue:</p>\n\n<pre><code>In [39]: cursor.execute(\"SELECT TRUNC(sysdate) FROM dual\")\nOut[39]: &lt;cx_Oracle.Cursor on &lt;cx_Oracle.Connection to web@hdb:1521/db11&gt;&gt;\n\nIn [40]: cursor.fetchone()\nOut[40]: (datetime.datetime(2015, 9, 23, 0, 0),)\n</code></pre>\n\n<p>But I suppose my tool to work with user defined DB objects (including views) without any specific restrinctions. Unfortunately this issue wouldn't let me work with dates correctly and currently I can't find any suitable solution.</p>\n\n<p>EDIT. Working example after Rajesh's asnwer:</p>\n\n<pre><code>In [104]: cursor.execute(\"ALTER SESSION SET NLS_DATE_FORMAT='DD.MM.YYYY'\")\n\nIn [105]: cursor.execute(\"SELECT TO_DATE(sysdate,'DD.MM.YYYY') FROM dual\")\nOut[105]: &lt;cx_Oracle.Cursor on &lt;cx_Oracle.Connection to web@hdb:1521/db11&gt;&gt;\n\nIn [106]: cursor.fetchone()\nOut[106]: (datetime.datetime(2015, 9, 23, 0, 0),)\n</code></pre>\n"}, {"tags": ["python", "split", "extract"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1443034362, "post_id": 32747247, "comment_id": 53335248, "body": "What does <code>re.findall</code> return?"}, {"owner": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "edited": false, "score": 0, "creation_date": 1443034374, "post_id": 32747247, "comment_id": 53335256, "body": "has your line always the same format ? &quot; Created Form XX&quot; ?"}], "answers": [{"tags": [], "owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1443034601, "creation_date": 1443034601, "answer_id": 32747386, "question_id": 32747247, "link": "https://stackoverflow.com/questions/32747247/extracting-digits-in-line-and-storing-them-to-list-in-python/32747386#32747386", "title": "Extracting digits in line and storing them to list in Python", "body": "<p><a href=\"https://docs.python.org/2/library/re.html#re.findall\" rel=\"nofollow\"><code>re.findall</code></a> returns a list of matched values (in your case list of numbers that got matched). You should assign the list back to a variable (so that you can use it later on) - </p>\n\n<pre><code>nums = re.findall('\\d+', line)\n</code></pre>\n\n<p>If you want to print this list, you can simply do -</p>\n\n<pre><code>print(nums)\n</code></pre>\n\n<p>For if you want to print each matched element in a separate line , you can use a <code>for</code> loop or <a href=\"https://docs.python.org/3/library/stdtypes.html#str.join\" rel=\"nofollow\"><code>str.join()</code></a> -</p>\n\n<pre><code>for i in nums:\n    print(i)\n</code></pre>\n\n<p>You can keep a list at the top, that stores all the numbers you found the file, and extend that list with the <code>nums</code> list. Example -</p>\n\n<pre><code>import re\nnumslist = []\nwith open(\"filename.txt\") as f:\n    for line in f:\n        if \"form\" in line:\n            nums = re.findall('\\d+', line)\n            numslist.extend(nums)\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 3681286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/IKPNK.jpg?s=128&g=1", "display_name": "ToofanHasArrived", "link": "https://stackoverflow.com/users/3681286/toofanhasarrived"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 32747386, "answer_count": 1, "score": 0, "last_activity_date": 1443034612, "creation_date": 1443034159, "question_id": 32747247, "link": "https://stackoverflow.com/questions/32747247/extracting-digits-in-line-and-storing-them-to-list-in-python", "title": "Extracting digits in line and storing them to list in Python", "body": "<p>I have a text file which produces the string \" Created Form XX,\" where XX is an integer. I would like to extract only the integer and save that to a list to be used later in my python program.</p>\n\n<p>Below is code for what I have been able to do so far but am not able to display the digits</p>\n\n<pre><code>import re\nwith open(\"filename.txt\") as f:\n  for line in f:\n    if \"form\" in line:\n      re.findall('\\d+', line)\n</code></pre>\n\n<p>How do I print the output of the last line of code and assign to a list?</p>\n"}, {"tags": ["python", "email", "imap", "imaplib", "uid"], "answers": [{"comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1443044668, "post_id": 32747373, "comment_id": 53340635, "body": "What you quoted says the opposite of your conclusion."}, {"owner": {"reputation": 26891, "user_id": 633961, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/0c29q.jpg?s=128&g=1", "display_name": "guettli", "link": "https://stackoverflow.com/users/633961/guettli"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1443079289, "post_id": 32747373, "comment_id": 53350747, "body": "@max Thank you! This was a typo. I fixed it. Of course I meant &quot;You <b>can&#39;t</b> get the folder name from an UID.&quot;"}], "tags": [], "owner": {"reputation": 26891, "user_id": 633961, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/0c29q.jpg?s=128&g=1", "display_name": "guettli", "link": "https://stackoverflow.com/users/633961/guettli"}, "is_accepted": false, "score": 1, "last_activity_date": 1443079246, "last_edit_date": 1443079246, "creation_date": 1443034565, "answer_id": 32747373, "question_id": 32747171, "link": "https://stackoverflow.com/questions/32747171/imap-from-uid-of-message-to-folder-name/32747373#32747373", "title": "IMAP: from UID of message to folder name?", "body": "<p>I found the answer myself:</p>\n\n<p><a href=\"http://www.limilabs.com/blog/unique-id-in-imap-protocol\" rel=\"nofollow\">http://www.limilabs.com/blog/unique-id-in-imap-protocol</a></p>\n\n<blockquote>\n  <p>To identify a message across all folders you need 3 variables: UID,\n  folder name and FolderStatus.UIDValidity.</p>\n  \n  <p>...</p>\n  \n  <p>In most modern servers FolderStatus.UIDValidity changes rarely. However client that\n  remembers message UIDs between sessions must deal with such change and\n  act accordingly.</p>\n</blockquote>\n\n<p>The result: You can't get the folder name from an UID.</p>\n"}, {"tags": [], "owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1443044469, "creation_date": 1443044469, "answer_id": 32749987, "question_id": 32747171, "link": "https://stackoverflow.com/questions/32747171/imap-from-uid-of-message-to-folder-name/32749987#32749987", "title": "IMAP: from UID of message to folder name?", "body": "<p>A uid is <strong><em>not</em></strong> unique between folders. Only the trio of (folder name, uid validity, uid) is guaranteed to be unique. </p>\n\n<p>With most server software (especially traditional UNIX IMAP servers), uids are generated monotonically ascending on each folder, and overlap.  That is, the first message in any folder is UID 1, the second is UID 2, and so on.  Obviously Sent:UID-1 is not the same message as Inbox:UID-1.</p>\n\n<p>Some servers do actually generate account-unique UIDs (such as yahoo), but that is the exception, not the norm. </p>\n\n<p>Gmail has an additional attribute which is account unique, the X-GM-MSGID, which is described at their <a href=\"https://developers.google.com/gmail/imap_extensions\" rel=\"nofollow\">IMAP extensions document</a>.</p>\n"}], "owner": {"reputation": 26891, "user_id": 633961, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/0c29q.jpg?s=128&g=1", "display_name": "guettli", "link": "https://stackoverflow.com/users/633961/guettli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443079246, "creation_date": 1443033905, "last_edit_date": 1443034290, "question_id": 32747171, "link": "https://stackoverflow.com/questions/32747171/imap-from-uid-of-message-to-folder-name", "title": "IMAP: from UID of message to folder name?", "body": "<p>I am connecting to a IMAP server with Python.</p>\n\n<p>I have a UID of a special message.</p>\n\n<p>Is there a way to get the folder name which contains this UID?</p>\n\n<p>Or can a UID/message be in more than one folder? Then, I would like to get the list of folders this message belongs to.</p>\n\n<p>Or I misunderstood something. A UID is always local to an IMAP folder. It is only valid in the context of an folder.</p>\n\n<p>I use <a href=\"http://imapclient.readthedocs.org/en/latest/\" rel=\"nofollow\">ImapClient</a> to connect to an IMAP server. But on this level all languages and their bindungs should be same (my guess).</p>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "reply_to_user": {"reputation": 18353, "user_id": 337315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/vNdBR.jpg?s=128&g=1", "display_name": "CodeLikeBeaker", "link": "https://stackoverflow.com/users/337315/codelikebeaker"}, "edited": false, "score": 2, "creation_date": 1443034031, "post_id": 32747165, "comment_id": 53335070, "body": "@GreenChili, please don&#39;t fix OP&#39;s indentation. You just removed the problem."}, {"owner": {"reputation": 18353, "user_id": 337315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/vNdBR.jpg?s=128&g=1", "display_name": "CodeLikeBeaker", "link": "https://stackoverflow.com/users/337315/codelikebeaker"}, "reply_to_user": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1443034076, "post_id": 32747165, "comment_id": 53335096, "body": "@MorganThrapp yes, you are right, rolled back."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 2, "creation_date": 1443034100, "post_id": 32747165, "comment_id": 53335113, "body": "oh dang now i need to go capitalize my answer again :P (just kidding)"}, {"owner": {"reputation": 812, "user_id": 5330834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Up5x.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/5330834/jake"}, "edited": false, "score": 2, "creation_date": 1443034275, "post_id": 32747165, "comment_id": 53335212, "body": "ALSO NOTE THAT <i>notices case has changed. Softens voice.</i> the quotes in the string are invalid. You will need to choose which quotes (&quot; &quot; or &#39; &#39;) to use to hold the query string, and use the other for the value PYTHON (which is to be interpreted by the database). In MySQL at least, the choice is arbitrary."}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 2, "last_activity_date": 1443034512, "last_edit_date": 1443034512, "creation_date": 1443034018, "answer_id": 32747199, "question_id": 32747165, "link": "https://stackoverflow.com/questions/32747165/why-am-i-getting-expected-an-indented-block/32747199#32747199", "title": "Why am I getting `expected an indented block`?", "body": "<p>your first line should not have a space to lead it</p>\n\n<p>your lines following <code>with open(\"file.txt...</code> should all be indented</p>\n\n<p>but you also have broken strings ... in your execute statements</p>\n"}], "owner": {"reputation": 375, "user_id": 4215280, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vaA09.png?s=128&g=1", "display_name": "javaworld", "link": "https://stackoverflow.com/users/4215280/javaworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1443346142, "creation_date": 1443033889, "last_edit_date": 1443346142, "question_id": 32747165, "link": "https://stackoverflow.com/questions/32747165/why-am-i-getting-expected-an-indented-block", "title": "Why am I getting `expected an indented block`?", "body": "<p>I'm trying to insert an image into MySQL with Python.</p>\n\n<pre><code> import mysql.connector\nimport base64\n\nconn = mysql.connector.Connect(user=\"root\",passwd=\"solomon\",host=\"localhost\",db=\"binarymanipulation\",port=\"3306\")\n\ncursor =conn.cursor;\nwith open('/home/solomon/Downloads/javapic.jpeg', 'rb') as image:\n\ncursor.execute('INSERT INTO images(id,size,image) VALUES('PYTHON',245,image) ')\nconn.commit();\nconn.close();\n</code></pre>\n\n<p>I'm getting <code>expected an indented block</code> while running this code. </p>\n\n<p>What did I miss? What is the right way?</p>\n"}, {"tags": ["python", "file", "text", "average"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5351731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b7dd5d1bd5a948648ae139f6ecab8?s=128&d=identicon&r=PG&f=1", "display_name": "jim john", "link": "https://stackoverflow.com/users/5351731/jim-john"}, "edited": false, "score": 0, "creation_date": 1443034176, "post_id": 32747220, "comment_id": 53335157, "body": "Could you give me a brief description of what it does. Thanks @Sait"}, {"owner": {"reputation": 19, "user_id": 5351731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b7dd5d1bd5a948648ae139f6ecab8?s=128&d=identicon&r=PG&f=1", "display_name": "jim john", "link": "https://stackoverflow.com/users/5351731/jim-john"}, "edited": false, "score": 0, "creation_date": 1443034452, "post_id": 32747220, "comment_id": 53335300, "body": "what does the word numpy represent after import? (module)"}, {"owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "reply_to_user": {"reputation": 19, "user_id": 5351731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b7dd5d1bd5a948648ae139f6ecab8?s=128&d=identicon&r=PG&f=1", "display_name": "jim john", "link": "https://stackoverflow.com/users/5351731/jim-john"}, "edited": false, "score": 0, "creation_date": 1443034654, "post_id": 32747220, "comment_id": 53335436, "body": "<code>numpy</code> is a library, you can use it to calculate the average: <code>np.mean([1,2,3])</code> will give you <code>2.0</code>. It is a good practice to use it since it makes the code more readable, compact and clear."}], "tags": [], "owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "is_accepted": false, "score": 0, "last_activity_date": 1443034477, "last_edit_date": 1443034477, "creation_date": 1443034084, "answer_id": 32747220, "question_id": 32747085, "link": "https://stackoverflow.com/questions/32747085/how-do-you-output-an-average-from-a-txt-file/32747220#32747220", "title": "How do you output an average from a .txt file?", "body": "<p><a href=\"https://docs.python.org/2/library/collections.html#collections.defaultdict\" rel=\"nofollow\"><code>collections.defaultdict</code></a> will be useful for your problem.</p>\n\n<p>Here <code>hours</code> is a dictionary (defaultdict) in which keys are the names and the values are  the list of integers (number of hours). We first read the lines from the file and append the number of hours to the dictionary. Then, we iterate over the keys in the dictionary (<code>hours</code>) and calculate the average for every name.</p>\n\n<h2>Code:</h2>\n\n<pre><code>from collections import defaultdict\nimport numpy as np\n\nhours = defaultdict(list)\n\nwith open('a.txt') as f:\n   for line in f:\n      stripped = line.strip()\n      if stripped:\n         parts = stripped.split(':')\n         hours[parts[0]].append( int(parts[1]) )\n\nfor key in hours:\n    print( '{},{}'.format(key, np.mean(hours[key])) )\n</code></pre>\n\n<h2>Input:</h2>\n\n<pre><code>Bobby:8\nSam:6\nKerry:4\nBobby:10\nKerry:8\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>Kerry,6.0\nSam,6.0\nBobby,9.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "edited": false, "score": 0, "creation_date": 1443034524, "post_id": 32747342, "comment_id": 53335353, "body": "What if there is an empty line at the end?"}, {"owner": {"reputation": 19, "user_id": 5351731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b7dd5d1bd5a948648ae139f6ecab8?s=128&d=identicon&r=PG&f=1", "display_name": "jim john", "link": "https://stackoverflow.com/users/5351731/jim-john"}, "edited": false, "score": 0, "creation_date": 1443034601, "post_id": 32747342, "comment_id": 53335406, "body": "Hi yes @Chad Kennedy, could you explain what the defaultdict does thanks."}, {"owner": {"reputation": 6910, "user_id": 567595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49e39b67d2ef2f9fc041495ae46fe6d?s=128&d=identicon&r=PG", "display_name": "Stuart", "link": "https://stackoverflow.com/users/567595/stuart"}, "edited": false, "score": 0, "creation_date": 1443034625, "post_id": 32747342, "comment_id": 53335419, "body": "Think you want <code>line.split(&#39;:&#39;)</code> not <code>strip</code> in your first section of code"}, {"owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "edited": false, "score": 0, "creation_date": 1443034770, "post_id": 32747342, "comment_id": 53335506, "body": "defaultdict says if you refer to a nonexistent item, it will create an item with a default value for you. For example, if you have an empty defaultdict, and you say hours[&#39;sam&#39;] += 5, that entry didn&#39;t exist, so it&#39;s created for you, with the default int value (0), then 5 is added to it. With a normal dict, hours[&#39;sam&#39;] += 5 would fail because you haven&#39;t yet created a &#39;sam&#39; entry."}, {"owner": {"reputation": 19, "user_id": 5351731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b7dd5d1bd5a948648ae139f6ecab8?s=128&d=identicon&r=PG&f=1", "display_name": "jim john", "link": "https://stackoverflow.com/users/5351731/jim-john"}, "edited": false, "score": 0, "creation_date": 1443035032, "post_id": 32747342, "comment_id": 53335670, "body": "Are there any tutorials that i could get extra help with this subject on thanks"}], "tags": [], "owner": {"reputation": 1552, "user_id": 3841261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0CKJ.jpg?s=128&g=1", "display_name": "Chad Kennedy", "link": "https://stackoverflow.com/users/3841261/chad-kennedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1443034808, "last_edit_date": 1443034808, "creation_date": 1443034455, "answer_id": 32747342, "question_id": 32747085, "link": "https://stackoverflow.com/questions/32747085/how-do-you-output-an-average-from-a-txt-file/32747342#32747342", "title": "How do you output an average from a .txt file?", "body": "<p>I assume you're looking for the average across workers. That is, take the average of all the numbers at the end of each line.</p>\n\n<pre><code>hours = [line.split(':')[1] for line in open('week 1 hrs.txt')]\naverage = sum(hours) / len(hours)\n</code></pre>\n\n<p>Instead, if you want the average hours for each worker:</p>\n\n<pre><code>from collections import defaultdict\nhours = defaultdict(int)\nfor line in open('week 1 hrs.txt'):\n    name, hour = line.split(':')\n    hours[name] += hour\nfor name in hours:\n    print('Average for {} is {}'.format(name, hours[name]/len(hours[name])))\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5351731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b7dd5d1bd5a948648ae139f6ecab8?s=128&d=identicon&r=PG&f=1", "display_name": "jim john", "link": "https://stackoverflow.com/users/5351731/jim-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443034808, "creation_date": 1443033658, "last_edit_date": 1443034050, "question_id": 32747085, "link": "https://stackoverflow.com/questions/32747085/how-do-you-output-an-average-from-a-txt-file", "title": "How do you output an average from a .txt file?", "body": "<p>Hello I have been trying to output the contents of a .txt file.\nWhat I need to do is find the average of the number of hours each worker does and out put it to the screen. I have worked on a bit of code but my .txt file contains \nstr and integer:</p>\n\n<pre><code>Bobby:8\nSam:6\nKerry:4\n</code></pre>\n\n<p>I have started some code but can get it to work. My attempt:</p>\n\n<pre><code>elif viewwork==('week 1 hrs'):\n    averageHours=[]\nwith open('week 1 hrs.txt') as f:\n   for line in f:\n       if line.strip():\n          averageHours.append(int(line.strip()))\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "django-templates"], "comments": [{"owner": {"reputation": 119, "user_id": 5351372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06cac12207dde7e4eeed0ec56a6379ab?s=128&d=identicon&r=PG&f=1", "display_name": "Avais ", "link": "https://stackoverflow.com/users/5351372/avais"}, "reply_to_user": {"reputation": 2210, "user_id": 5348681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbbb7fd03d7cec92ccb4d52a92bc221?s=128&d=identicon&r=PG", "display_name": "Paulo Pessoa", "link": "https://stackoverflow.com/users/5348681/paulo-pessoa"}, "edited": false, "score": 1, "creation_date": 1443034008, "post_id": 32747018, "comment_id": 53335056, "body": "@PauloPessoa Done :D"}, {"owner": {"reputation": 2210, "user_id": 5348681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbbb7fd03d7cec92ccb4d52a92bc221?s=128&d=identicon&r=PG", "display_name": "Paulo Pessoa", "link": "https://stackoverflow.com/users/5348681/paulo-pessoa"}, "edited": false, "score": 0, "creation_date": 1443034271, "post_id": 32747018, "comment_id": 53335209, "body": "what happening when you do this {{comment.author}} ?"}, {"owner": {"reputation": 119, "user_id": 5351372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06cac12207dde7e4eeed0ec56a6379ab?s=128&d=identicon&r=PG&f=1", "display_name": "Avais ", "link": "https://stackoverflow.com/users/5351372/avais"}, "reply_to_user": {"reputation": 2210, "user_id": 5348681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbbb7fd03d7cec92ccb4d52a92bc221?s=128&d=identicon&r=PG", "display_name": "Paulo Pessoa", "link": "https://stackoverflow.com/users/5348681/paulo-pessoa"}, "edited": false, "score": 1, "creation_date": 1443034510, "post_id": 32747018, "comment_id": 53335343, "body": "@PauloPessoa It doesn&#39;t show amything.I basically get &quot;Author-&quot; .Its the with {{post.author}} as well"}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 5348681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbbb7fd03d7cec92ccb4d52a92bc221?s=128&d=identicon&r=PG", "display_name": "Paulo Pessoa", "link": "https://stackoverflow.com/users/5348681/paulo-pessoa"}, "reply_to_user": {"reputation": 119, "user_id": 5351372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06cac12207dde7e4eeed0ec56a6379ab?s=128&d=identicon&r=PG&f=1", "display_name": "Avais ", "link": "https://stackoverflow.com/users/5351372/avais"}, "edited": false, "score": 0, "creation_date": 1443035282, "post_id": 32747408, "comment_id": 53335822, "body": "Can you check in the database, if the name is ok? and the comment has the author_id with the user."}, {"owner": {"reputation": 119, "user_id": 5351372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06cac12207dde7e4eeed0ec56a6379ab?s=128&d=identicon&r=PG&f=1", "display_name": "Avais ", "link": "https://stackoverflow.com/users/5351372/avais"}, "edited": false, "score": 1, "creation_date": 1443035680, "post_id": 32747408, "comment_id": 53336035, "body": "I checked.I hadn&#39;t typed the code from your answer correctly xD.It worked now!Thanks!"}], "tags": [], "owner": {"reputation": 2210, "user_id": 5348681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbbb7fd03d7cec92ccb4d52a92bc221?s=128&d=identicon&r=PG", "display_name": "Paulo Pessoa", "link": "https://stackoverflow.com/users/5348681/paulo-pessoa"}, "is_accepted": true, "score": 1, "last_activity_date": 1443034682, "creation_date": 1443034682, "answer_id": 32747408, "question_id": 32747018, "link": "https://stackoverflow.com/questions/32747018/how-to-get-specific-fields-of-a-foreign-key-in-django/32747408#32747408", "title": "How to get specific fields of a Foreign key in django?", "body": "<p>The problem is here: </p>\n\n<pre><code>author = Author.objects.create()\nauthor.name = request.user\nauthor.email = \"\"\ncomment.author = author\n</code></pre>\n\n<p>You create the author, but don't save the name and email.</p>\n\n<p>try this:</p>\n\n<pre><code>author = Author.objects.create(name=request.user, email=\"\")\ncomment.author = author\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>author = Author.objects.create()\nauthor.name = request.user\nauthor.email = \"\"\nauthor.save()\ncomment.author = author.pk\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5351372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06cac12207dde7e4eeed0ec56a6379ab?s=128&d=identicon&r=PG&f=1", "display_name": "Avais ", "link": "https://stackoverflow.com/users/5351372/avais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 32747408, "answer_count": 1, "score": 1, "last_activity_date": 1443034682, "creation_date": 1443033374, "last_edit_date": 1443033988, "question_id": 32747018, "link": "https://stackoverflow.com/questions/32747018/how-to-get-specific-fields-of-a-foreign-key-in-django", "title": "How to get specific fields of a Foreign key in django?", "body": "<p>So I've been learning django and I decided to make a blog with comments.\nHere are my models:</p>\n\n<pre><code>class Author(models.Model):\n\n    name = models.CharField(max_length = 20)\n    email = models.EmailField(verbose_name = 'e-mail')\n\n    def __str__(self):\n        return self.name\n\n\nclass Post(models.Model):\n\n    author = models.ForeignKey(Author)\n    title = models.CharField(max_length=80)\n    text = models.TextField()\n    created_date = models.DateTimeField(\n        default=timezone.now)\n    published_date = models.DateTimeField(\n        blank=True, null=True)\n\n    def __str__(self):\n        return self.title\n\nclass Comment(models.Model):\n\n    author = models.OneToOneField(Author)\n    post = models.ForeignKey(Post)\n    text = models.TextField()\n    post_date = models.DateTimeField(default = timezone.now)\n\n    def __str__(self):\n        return self.author + \"commented\"\n</code></pre>\n\n<p>Now,In my template,I can't access the name of the author.It just shiws the comment.{{comment.author.name}} doesn't work.</p>\n\n<p>Here's the template block.</p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block content %}\n&lt;div class=\"post\"&gt;\n    {% if post.published_date %}\n        &lt;div class=\"date\"&gt;\n            {{ post.published_date }}\n        &lt;/div&gt;\n    {% endif %}\n    &lt;a class=\"btn btn-default\" href=\"{% url \"post_edit\" pk=post.pk %}\"&gt;&lt;span class=\"glyphicon glyphicon-pencil\"&gt;&lt;/span&gt;&lt;/a&gt;\n    &lt;h1&gt;{{ post.title }}-{{post.author}}&lt;/h1&gt;\n    &lt;p&gt;{{ post.text|linebreaks }}&lt;/p&gt;\n&lt;/div&gt;\n{% for comment in comments %}\n    &lt;div class=\"post\"&gt;\n        &lt;div class=\"date\"&gt;\n            {{ comment.post_date }}\n        &lt;/div&gt;\n        &lt;h4&gt;Author:{{comment.author.name}}&lt;/h4&gt;\n        &lt;h5&gt;{{ comment.text|linebreaks }}&lt;/h5&gt;\n    &lt;/div&gt;\n{% endfor %}\n&lt;h3&gt;New Comment&lt;/h3&gt;\n&lt;form method=\"POST\" class=\"post-form\"&gt;{% csrf_token %}\n    {{ form.as_p }}\n    &lt;button type=\"submit\" class=\"save btn btn-default\"&gt;Save&lt;/button&gt;\n&lt;/form&gt;\n{% endblock %}\n</code></pre>\n\n<p>ViewCode</p>\n\n<pre><code>def post_detail(request, pk):\n    post = get_object_or_404(Post, pk=pk)\n    if request.method == \"POST\":\n        form = CommentForm(request.POST)\n        if form.is_valid():\n            comment = form.save(commit=False)\n            author = Author.objects.create()\n            author.name = request.user\n            author.email = \"\"\n            comment.author = author\n            comment.post = post\n            comment.post_date = timezone.now()\n            comment.save()\n            return redirect('/posts/'+pk+'/')\n\n    else:\n        form = CommentForm()\n    comments = Comment.objects.order_by('post_date')    \n    return render(request, 'post_detail.html', {'post': post, 'comments':      comments, 'form': form})\n</code></pre>\n"}, {"tags": ["python", "html", "beautifulsoup", "html-parsing"], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 1034127, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e18aad8db464ad837eb8b26ecd11b1c?s=128&d=identicon&r=PG", "display_name": "user1034127", "link": "https://stackoverflow.com/users/1034127/user1034127"}, "edited": false, "score": 0, "creation_date": 1443034365, "post_id": 32747071, "comment_id": 53335252, "body": "Thanks, I just updated my question, they are more classes that start with wallpapers-box"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 279, "user_id": 1034127, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e18aad8db464ad837eb8b26ecd11b1c?s=128&d=identicon&r=PG", "display_name": "user1034127", "link": "https://stackoverflow.com/users/1034127/user1034127"}, "edited": false, "score": 0, "creation_date": 1443034479, "post_id": 32747071, "comment_id": 53335322, "body": "@user1034127 and still the solution is valid."}, {"owner": {"reputation": 794, "user_id": 4732480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451c84ef8398ba67ff607a8160dd6fbc?s=128&d=identicon&r=PG&f=1", "display_name": "mmachine", "link": "https://stackoverflow.com/users/4732480/mmachine"}, "edited": false, "score": 0, "creation_date": 1443034730, "post_id": 32747071, "comment_id": 53335479, "body": "It may be even shorter: for elm in soup.select(&#39;a[href=&quot;/wallpapers/inna/&quot;]&#39;):"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 794, "user_id": 4732480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451c84ef8398ba67ff607a8160dd6fbc?s=128&d=identicon&r=PG&f=1", "display_name": "mmachine", "link": "https://stackoverflow.com/users/4732480/mmachine"}, "edited": false, "score": 0, "creation_date": 1443035215, "post_id": 32747071, "comment_id": 53335782, "body": "@mmachine well, but less generic - not sure if <code>inna</code> is a given."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1443034509, "last_edit_date": 1443034509, "creation_date": 1443033618, "answer_id": 32747071, "question_id": 32747007, "link": "https://stackoverflow.com/questions/32747007/how-to-extract-text-using-beautifulsoup/32747071#32747071", "title": "how to extract text using Beautifulsoup", "body": "<p>There are so many ways to locate the element in this case and it's difficult to tell which way would work for you better since we don't know the scope of the problem, how unique is the element and what do you know and can rely on.</p>\n\n<p>The most practical approach here I think would be to use the following <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors\" rel=\"nofollow\">CSS selector</a>:</p>\n\n<pre><code>for elm in soup.select('div[class^=\"wallpapers-box\"] &gt; a[href*=wallpapers]'):\n    print(elm.get_text())\n</code></pre>\n\n<p>Here we check for the parent <code>div</code> element's class to start with <code>wallpapers-box</code> and find the direct <code>a</code> child element having <code>wallpapers</code> text inside the <code>href</code> attribute value. </p>\n"}], "owner": {"reputation": 279, "user_id": 1034127, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e18aad8db464ad837eb8b26ecd11b1c?s=128&d=identicon&r=PG", "display_name": "user1034127", "link": "https://stackoverflow.com/users/1034127/user1034127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 32747071, "answer_count": 1, "score": -1, "last_activity_date": 1443034509, "creation_date": 1443033324, "last_edit_date": 1443034330, "question_id": 32747007, "link": "https://stackoverflow.com/questions/32747007/how-to-extract-text-using-beautifulsoup", "title": "how to extract text using Beautifulsoup", "body": "<p>Can you please show me how to extract the title text (Inna) using BeautifulSoup in this situation:</p>\n\n<pre><code>&lt;div class=\"wallpapers-box-300x180-2 wallpapers-margin-2\"&gt;\n&lt;div class=\"wallpapers-box-300x180-2-img\"&gt;&lt;a title=\"Inna\" href=\"/photo.jpg\" alt=\"Inna\" width=\"300\" height=\"188\" /&gt;&lt;/a&gt;&lt;/div&gt;\n&lt;div class=\"wallpapers-box-300x180-2-title\"&gt;&lt;a title=\"Inna\" href=\"/wallpapers/inna/\"&gt;Inna&lt;/a&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "matplotlib", "axes", "multiple-axes"], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 2, "last_activity_date": 1443107232, "last_edit_date": 1443107232, "creation_date": 1443052314, "answer_id": 32751266, "question_id": 32746912, "link": "https://stackoverflow.com/questions/32746912/how-to-change-the-labels-of-an-axis-created-with-host-subplot-from-axesgrid-too/32751266#32751266", "title": "How to change the labels of an axis created with host_subplot (from AxesGrid toolkit)", "body": "<p>Well, one thing I learned while trying to find an answer for this: <code>IPython</code> is a <strong><em>really good</em></strong> helper.</p>\n\n<hr>\n\n<p>Anyway, to get to the point. There seems to be something buggy about setting the text by iterating for each entry via <code>get_xticklabels()</code>. \nBy assigning with <code>set_text(my_text)</code>, even though <code>my_text</code> does indeed pass in the <code>Text</code> object, for some reason it is not picking it up afterwards.</p>\n\n<p>Case in point: </p>\n\n<pre><code>[item.set_text(\"Some Text\") for item in par2.get_xticklabels()]\n\nfor item in par2.get_xticklabels():\n    print item\n\n# Prints\nText(0,0,'Some Text')\nText(0,0,'Some Text')\nText(0,0,'Some Text')\nText(0,0,'Some Text')\nText(0,0,'Some Text')\nText(0,0,'Some Text')\n\n# plt.show() does not display these changes.\n</code></pre>\n\n<p><strong>Thankfully</strong> (<em>and oddly</em>), <strong>setting the labels</strong> <strong><em>works</em></strong> <strong>when doing it via</strong> <code>set_xticklabels()</code></p>\n\n<pre><code># Omitting rest of script.\n\n# Set as False or else the top axis also gets these labels.\n# Try commenting the line out to view what I mean.\npar2.axis[\"top\"].set_visible(False)\npar2.set_xticklabels([\"THIS\", \"IS\", \"PROBABLY\", \"A\", \"LITTLE\", \"BUG\"])\n\nplt.show()\n</code></pre>\n\n<p>The figure drawn in this case is what you're looking for:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QdtWo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QdtWo.png\" alt=\"bottom axis tick labels\"></a></p>\n\n<hr>\n\n<p>To add to the hypothesis of this being a little bug, the output of the same print statement as before returns a similar representation as it did before.</p>\n\n<pre><code>for item in par2.get_xticklabels():\n    print item\n\nText(0,0,'THIS')\nText(0,0,'IS')\nText(0,0,'PROBABLY')\nText(0,0,'A')\nText(0,0,'LITTLE')\nText(0,0,'BUG')\n</code></pre>\n\n<p>I am not the best with <code>matplotlib</code>, but this just seems iffy. Maybe someone with more knowledge can verify.</p>\n"}, {"comments": [{"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1443131202, "post_id": 32765072, "comment_id": 53381953, "body": "Nice additional solution, probably best you avoided <code>AxesGrid</code> since <b><i>it seems</i></b> it might need some additional debugging."}], "tags": [], "owner": {"reputation": 2530, "user_id": 534969, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c29ff9c7f802e4dd620430e38c2c0b39?s=128&d=identicon&r=PG", "display_name": "Saul Berardo", "link": "https://stackoverflow.com/users/534969/saul-berardo"}, "is_accepted": false, "score": 1, "last_activity_date": 1443107860, "creation_date": 1443107860, "answer_id": 32765072, "question_id": 32746912, "link": "https://stackoverflow.com/questions/32746912/how-to-change-the-labels-of-an-axis-created-with-host-subplot-from-axesgrid-too/32765072#32765072", "title": "How to change the labels of an axis created with host_subplot (from AxesGrid toolkit)", "body": "<p>Dimitris' answer is awesome! Anyway, I will describe bellow the workaround I finished using (before having his answer). The strategy was to add a new axes over the figure and then hide everything, except the x axis. This solution has the sole advantage of not requiring the use of the AxesGrid framework.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\ndef add_extra_xaxis(fig, x, labels, padding=35):\n    \"\"\"\n    Add a x axis bellow the figure (indeed bellow the ax returned by fig.gca()) having the labels\n    in the x positions. The axis is added by first adding an entire new axes and the hiding all\n    parts, except the xaxis.\n\n     Parameters\n    ------------\n\n    fig : Figure\n        The figure where to add the xaxis.\n\n    x : list\n        List of numbers specifying the x positions.\n\n    labels : list\n        List of strings specifying the labels to place in the x positions.\n\n    padding : int\n        How much space should be added between the figure and the new x axis bellow it.\n\n     Returns\n    ---------\n\n    new_ax : Axes\n        Return the axes added to the image.\n\n    \"\"\"\n\n    # Add some space bellow the figure\n    fig.subplots_adjust(bottom=0.2)\n\n    # Get current ax\n    ax = fig.gca()\n\n    # Add a new ax to the figure\n    new_ax = fig.add_axes(ax.get_position())\n\n    # Hide the the plot area and the yaxis\n    new_ax.patch.set_visible(False)\n    new_ax.yaxis.set_visible(False)\n\n    # Hide spines (unless the boottom one)\n    for spinename, spine in new_ax.spines.iteritems():\n        if spinename != 'bottom':\n            spine.set_visible(False)\n\n    # Set the ....\n    new_ax.spines['bottom'].set_position(('outward', padding))\n\n    # Change tick labels\n    plt.xticks([0] + x, [''] + labels) # the [0] and [''] stuff is to add an empty lable in the first position\n\n    return new_ax\n\n\nif __name__=='__main__':\n\n    f, _ = plt.subplots()\n    add_extra_xaxis(f, [1,3,5,7,10],['Now','it','should', 'work', ''], padding=30)\n</code></pre>\n"}], "owner": {"reputation": 2530, "user_id": 534969, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c29ff9c7f802e4dd620430e38c2c0b39?s=128&d=identicon&r=PG", "display_name": "Saul Berardo", "link": "https://stackoverflow.com/users/534969/saul-berardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 32751266, "answer_count": 2, "score": 1, "last_activity_date": 1443107860, "creation_date": 1443032994, "last_edit_date": 1495542577, "question_id": 32746912, "link": "https://stackoverflow.com/questions/32746912/how-to-change-the-labels-of-an-axis-created-with-host-subplot-from-axesgrid-too", "title": "How to change the labels of an axis created with host_subplot (from AxesGrid toolkit)", "body": "<p>The AxesGrid toolkit provides the function <code>host_subplot</code>, which makes possible the creation of multiple parallel axis, as show in the code bellow:</p>\n\n<pre><code>from mpl_toolkits.axes_grid1 import host_subplot\nimport mpl_toolkits.axisartist as AA\nimport matplotlib.pyplot as plt\n\n\nhost = host_subplot(111, axes_class=AA.Axes)\nplt.subplots_adjust(bottom=0.15)\npar2 = host.twiny()\npar2.axis[\"bottom\"] = par2.get_grid_helper().new_fixed_axis(loc=\"bottom\", axes=par2, offset=(0, -30) )\npar2.axis[\"bottom\"].toggle(all=True)\n</code></pre>\n\n<p>Which creates the following figure:\n<a href=\"https://i.stack.imgur.com/qVVBF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qVVBF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now I would like to change the label of the second x axis added below the image. I tried the following (among other things):</p>\n\n<pre><code>from mpl_toolkits.axes_grid1 import host_subplot\nimport mpl_toolkits.axisartist as AA\nimport matplotlib.pyplot as plt\n\n\nhost = host_subplot(111, axes_class=AA.Axes)\npar2 = host.twiny()\npar2.axis[\"bottom\"] = par2.get_grid_helper().new_fixed_axis(loc=\"bottom\", axes=par2, offset=(0, -30) )\n\nfor item in par2.get_xticklabels(): \n    item.set_text('new label')\n\npar2.axis[\"bottom\"].toggle(all=True)\n</code></pre>\n\n<p>Sadly <code>par2.get_xticklabels()</code> does not seem to work as I naively expected (i.e. it does not return the labels of the x axis).</p>\n\n<p>The most similar question I found adressing a similar issua was <a href=\"https://stackoverflow.com/questions/28308822/how-to-change-the-font-size-for-multiple-axes-labels-created-with-host-subplot\">How to change the font size for multiple axes labels (created with host_subplot API)</a>, which changes the font size property (not individual labels attached to the xaxis ticks).</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 1, "creation_date": 1443033088, "post_id": 32746907, "comment_id": 53334593, "body": "What are you trying to do?"}, {"owner": {"reputation": 13, "user_id": 5368995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f97d5b08d5f6447da5130b533b5a25?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5368995/joe"}, "reply_to_user": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1443033269, "post_id": 32746907, "comment_id": 53334700, "body": "print all values of the list/sublists in the following format: b : 50  m : 60 t : 90"}], "answers": [{"comments": [{"owner": {"reputation": 4289, "user_id": 908293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a30b8d0b807c736c457e506cd7f7f699?s=128&d=identicon&r=PG", "display_name": "saulspatz", "link": "https://stackoverflow.com/users/908293/saulspatz"}, "edited": false, "score": 2, "creation_date": 1443033442, "post_id": 32746979, "comment_id": 53334776, "body": "The line <code>i = len(forSale)</code> should be eliminated.  I realize the OP had it there, but it just confuses matters."}], "tags": [], "owner": {"reputation": 1093, "user_id": 5075345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9e52f79b87e57f80cb45409f2a7cae?s=128&d=identicon&r=PG&f=1", "display_name": "Sharon Dwilif K", "link": "https://stackoverflow.com/users/5075345/sharon-dwilif-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1443034282, "last_edit_date": 1443034282, "creation_date": 1443033231, "answer_id": 32746979, "question_id": 32746907, "link": "https://stackoverflow.com/questions/32746907/retrieving-values-of-sublists-without-using-other-lists/32746979#32746979", "title": "Retrieving values of sublists without using other lists", "body": "<p>If you are trying to print the values of the sublist, then directly use <code>i</code> , which points to the sublists in each iteration. Example -</p>\n\n<pre><code>forSale = [['b', 50],['m',60],['t',90]]\n\nif choice ==3:\n    for i in forSale:\n        print '{0} : {1}'.format(i[0],i[1])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1443034691, "last_edit_date": 1443034691, "creation_date": 1443033715, "answer_id": 32747105, "question_id": 32746907, "link": "https://stackoverflow.com/questions/32746907/retrieving-values-of-sublists-without-using-other-lists/32747105#32747105", "title": "Retrieving values of sublists without using other lists", "body": "<p>You can venture in to list comprehensions to solve this one.</p>\n\n<p>Firstly, change your variable naming to this instead:</p>\n\n<p><code>forSale</code> => <code>for_sale</code></p>\n\n<p>Read up on <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow\">pep8</a> for the style guide.</p>\n\n<pre><code>' '.join([\"{}:{}\".format(i[0],i[1]) for i in for_sale])\n</code></pre>\n\n<p>The <code>' '.join(</code> part will convert back to a string with a space between each word. The inside of the <code>[ ]</code> is pretty much iterating over the array, grabbing the first and second index from the sublist and placing a <code>:</code> between them.</p>\n\n<p>If they have to be printed on individual lines then you are just gonna do this: </p>\n\n<pre><code>for i in for_sale:\n    print(\"{}:{}\".format(i[0], i[1]))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5368995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f97d5b08d5f6447da5130b533b5a25?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5368995/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443034691, "creation_date": 1443032960, "question_id": 32746907, "link": "https://stackoverflow.com/questions/32746907/retrieving-values-of-sublists-without-using-other-lists", "title": "Retrieving values of sublists without using other lists", "body": "<p>I am trying to get the value of the i sublist and then i'm indexing in order to find the 1st and 2nd values in that sublist. </p>\n\n<p>However I cannot index by i, since it is a list.\nHow can I achieve this output?</p>\n\n<pre><code>forSale = [[b, 50],[m,60],[t,90]]\n\nif choice ==3:\n    i = len(forSale)\n    for i in forSale:\n        print forSale[i][0], \": \",forSale[i][1]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 1, "creation_date": 1443032300, "post_id": 32746698, "comment_id": 53334114, "body": "err. what&#39;s your problem, dude?"}, {"owner": {"reputation": 4230, "user_id": 1912128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YyM8r.png?s=128&g=1", "display_name": "taesu", "link": "https://stackoverflow.com/users/1912128/taesu"}, "edited": false, "score": 0, "creation_date": 1443032303, "post_id": 32746698, "comment_id": 53334115, "body": "next time, please paste what python gave you as error"}, {"owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "edited": false, "score": 0, "creation_date": 1443033007, "post_id": 32746698, "comment_id": 53334535, "body": "Check my edit for why you see <code>243.59999999999997</code>"}], "answers": [{"comments": [{"owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1443032481, "post_id": 32746748, "comment_id": 53334230, "body": "the calculation for dayspermonth is also wrong. Just saying."}, {"owner": {"reputation": 1362, "user_id": 2338997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vPZ5X.jpg?s=128&g=1", "display_name": "Barun Sharma", "link": "https://stackoverflow.com/users/2338997/barun-sharma"}, "edited": false, "score": 1, "creation_date": 1443032532, "post_id": 32746748, "comment_id": 53334264, "body": "But that is a logical issue. The OP has not even mentioned the error."}, {"owner": {"reputation": 19, "user_id": 5369029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e63ed1af51eced1b586e1df933e7616?s=128&d=identicon&r=PG&f=1", "display_name": "ablyn", "link": "https://stackoverflow.com/users/5369029/ablyn"}, "reply_to_user": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1443032801, "post_id": 32746748, "comment_id": 53334415, "body": "@AnandSKumar do you know the correct calculation for it... its also been driving me mental!"}, {"owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "reply_to_user": {"reputation": 19, "user_id": 5369029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e63ed1af51eced1b586e1df933e7616?s=128&d=identicon&r=PG&f=1", "display_name": "ablyn", "link": "https://stackoverflow.com/users/5369029/ablyn"}, "edited": false, "score": 0, "creation_date": 1443033515, "post_id": 32746748, "comment_id": 53334811, "body": "@ablyn how about now? for <code>dayspermonth</code>"}, {"owner": {"reputation": 19, "user_id": 5369029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e63ed1af51eced1b586e1df933e7616?s=128&d=identicon&r=PG&f=1", "display_name": "ablyn", "link": "https://stackoverflow.com/users/5369029/ablyn"}, "edited": false, "score": 0, "creation_date": 1443033546, "post_id": 32746748, "comment_id": 53334825, "body": "ill give it a try, hold on"}], "tags": [], "owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "is_accepted": true, "score": 0, "last_activity_date": 1443033491, "last_edit_date": 1443033491, "creation_date": 1443032401, "answer_id": 32746748, "question_id": 32746698, "link": "https://stackoverflow.com/questions/32746698/error-from-division-operator/32746748#32746748", "title": "Error from division operator", "body": "<p>The code you had was:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Leb/Desktop/Python/test.py\", line 14, in &lt;module&gt;\n    dayspermonth = (hourspermonth) / (hourspernight) * 24\nTypeError: unsupported operand type(s) for /: 'NoneType' and 'int'\n</code></pre>\n\n<p>That's because on line 12 you put <code>hourspermonth = print(\"you also sleep\", hourspermonth,\"hours per month\")</code>. Take out <code>hourspermonth</code> from your script. Same with last line.</p>\n\n<pre><code>#sleep calculator, user enters there hours slept over a nicght and the   program\n#will work out different facts about there sleaping\nprint(\"Welcome to the sleep calculator, all you have to do is answer one question...\")\nhourspernight = int(input(\"how many hours per night do you sleep?\"))\n#variable for the hours per week slept\nhoursperweek = hourspernight * 7\n#telling the user how many hours er week they sleep\nprint (\"you sleep\", hoursperweek,\"hours per week\")\n#variable for how many hours per month they sleep\nhourspermonth = float(hoursperweek * 4.35)\n#teling the user how namy hours per month they sleep\nprint(\"you also sleep\", hourspermonth,\"hours per month\")\n#ISSUE, this is the variable that python has a problem with, and I'm not sure why\ndayspermonth = (hourspermonth) / (hourspernight) * 24\n#telling the user how many days per month they sleep (this bits ok... I think)\nprint(\"you sleep for\",dayspermonth,\"days per month aswell!\")\n</code></pre>\n\n<p>Side note: In python it's better if you make sense of your variables. Instead of using <code>hourspernight</code> use <code>hours_per_night</code> or even smaller <code>hrs_night</code> then next to it add comments if you need. Make it more presentable overall.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Change line 12 to:</p>\n\n<pre><code>print(\"you also sleep\", \"{0:.2f}\".format(hourspermonth),\"hours per month\")\n</code></pre>\n\n<p>This will fix your format issue and make it 2 digits after the decimal point</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>Change line 14 and 16 to:</p>\n\n<pre><code>dayspermonth = (hourspermonth) / 24\n...\nprint(\"you sleep for\",\"{0:.2f}\".format(dayspermonth),\"days per month aswell!\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1362, "user_id": 2338997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vPZ5X.jpg?s=128&g=1", "display_name": "Barun Sharma", "link": "https://stackoverflow.com/users/2338997/barun-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1443032403, "creation_date": 1443032403, "answer_id": 32746749, "question_id": 32746698, "link": "https://stackoverflow.com/questions/32746698/error-from-division-operator/32746749#32746749", "title": "Error from division operator", "body": "<p>2 of the lines causing issue are:-</p>\n\n<pre><code>hourspermonth = print(\"you also sleep\", hourspermonth,\"hours per month\")\n</code></pre>\n\n<p>and</p>\n\n<pre><code>dayspermonth = print(\"you sleep for\",dayspermonth,\"days per month aswell!\")\n</code></pre>\n\n<p>calling <code>print</code> and assigning to a variable is not a valid syntax. Remove the assignment and just use print. This should work.</p>\n"}, {"comments": [{"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "reply_to_user": {"reputation": 19, "user_id": 5369029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e63ed1af51eced1b586e1df933e7616?s=128&d=identicon&r=PG&f=1", "display_name": "ablyn", "link": "https://stackoverflow.com/users/5369029/ablyn"}, "edited": false, "score": 0, "creation_date": 1443032949, "post_id": 32746795, "comment_id": 53334508, "body": "NPs. Good luck. You can mark an answer as working by ticking it. That will let others know that you have accepted it."}, {"owner": {"reputation": 19, "user_id": 5369029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e63ed1af51eced1b586e1df933e7616?s=128&d=identicon&r=PG&f=1", "display_name": "ablyn", "link": "https://stackoverflow.com/users/5369029/ablyn"}, "edited": false, "score": 0, "creation_date": 1443033106, "post_id": 32746795, "comment_id": 53334603, "body": "will do, once Ive found the right calculation for the days per month, cuz i think that&#39;s wrong :/"}], "tags": [], "owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "is_accepted": false, "score": 0, "last_activity_date": 1443032565, "creation_date": 1443032565, "answer_id": 32746795, "question_id": 32746698, "link": "https://stackoverflow.com/questions/32746698/error-from-division-operator/32746795#32746795", "title": "Error from division operator", "body": "<p>So, firstly, you don't want to reassign the value of your variables when you print output, so just print. Like this:</p>\n\n<pre><code># sleep calculator, user enters there hours slept over a nicght and the   program\n# will work out different facts about there sleaping\nprint(\"Welcome to the sleep calculator, all you have to do is answer one question...\")\nhourspernight = int(input(\"how many hours per night do you sleep?\"))\n# variable for the hours per week slept\nhoursperweek = hourspernight * 7\n# telling the user how many hours er week they sleep\nprint (\"you sleep\", hoursperweek,\"hours per week\")\n# variable for how many hours per month they sleep\nhourspermonth = float(hoursperweek * 4.35)\n# teling the user how namy hours per month they sleep\nprint(\"you also sleep\", hourspermonth,\"hours per month\")\n# ISSUE, this is the variable that python has a problem with, and I'm not sure why\ndayspermonth = (hourspermonth) / (hourspernight) * 24\n# telling the user how many days per month they sleep (this bits ok... I think)\nprint(\"you sleep for\",dayspermonth,\"days per month as well!\")\n</code></pre>\n\n<p>this works. Also, leave a space between <code>#</code> and the beginning of your comment.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 5369052, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hckaFSway-8/AAAAAAAAAAI/AAAAAAAAAAA/2cVkG_gRyPM/photo.jpg?sz=128", "display_name": "AMIT PRAKASH PANDEY", "link": "https://stackoverflow.com/users/5369052/amit-prakash-pandey"}, "is_accepted": false, "score": 1, "last_activity_date": 1443033787, "last_edit_date": 1443033787, "creation_date": 1443033312, "answer_id": 32747005, "question_id": 32746698, "link": "https://stackoverflow.com/questions/32746698/error-from-division-operator/32747005#32747005", "title": "Error from division operator", "body": "<p>Use only:</p>\n\n<pre><code>print(\"you also sleep\", hourspermonth,\"hours per month\")\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>hourspermonth = print(\"you also sleep\", hourspermonth,\"hours per month\")\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5369029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e63ed1af51eced1b586e1df933e7616?s=128&d=identicon&r=PG&f=1", "display_name": "ablyn", "link": "https://stackoverflow.com/users/5369029/ablyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 32746748, "answer_count": 4, "score": -5, "last_activity_date": 1443033894, "creation_date": 1443032202, "last_edit_date": 1443033894, "question_id": 32746698, "link": "https://stackoverflow.com/questions/32746698/error-from-division-operator", "title": "Error from division operator", "body": "<p>So, Im quite new to python 3.5.0, recently Ive been working on a sleep calculator, however Ive encountered an issue, this is my code so far... its been annotated with tags/comments:</p>\n\n<pre><code>#sleep calculator, user enters there hours slept over a nicght and the   program\n#will work out different facts about there sleaping\nprint(\"Welcome to the sleep calculator, all you have to do is answer one question...\")\nhourspernight = int(input(\"how many hours per night do you sleep?\"))\n#variable for the hours per week slept\nhoursperweek = hourspernight * 7\n#telling the user how many hours er week they sleep\nprint (\"you sleep\", hoursperweek,\"hours per week\")\n#variable for how many hours per month they sleep\nhourspermonth = float(hoursperweek * 4.35)\n#teling the user how namy hours per month they sleep\nhourspermonth = print(\"you also sleep\", hourspermonth,\"hours per month\")\n#ISSUE, this is the variable that python has a problem with, and I'm not sure why\ndayspermonth = (hourspermonth) / (hourspernight) * 24\n#telling the user how many days per month they sleep (this bits ok... I think)\ndayspermonth = print(\"you sleep for\",dayspermonth,\"days per month aswell!\")\n</code></pre>\n\n<p>error given:</p>\n\n<pre><code>========================= RESTART: F:/sleep hours.py \n\n=========================\nWelcome to the sleep calculator, all you have to do is answer one question...\nhow many hours per night do you sleep?8\nyou sleep 56 hours per week\nyou also sleep 243.59999999999997 hours per month\nTraceback (most recent call last):\n  File \"F:/sleep hours.py\", line 14, in &lt;module&gt;\n    dayspermonth = (hourspermonth) / (hourspernight) * 24\nTypeError: unsupported operand type(s) for /: 'NoneType' and 'int'\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>It's no longer giving an error, but the days per month doesn't look like the correct answer, is this correct?</p>\n\n<p>========================= RESTART: F:/sleep hours.py =========================</p>\n\n<pre><code>Welcome to the sleep calculator, all you have to do is answer one question...\nhow many hours per night do you sleep?8\nyou sleep 56 hours per week\nyou also sleep 243.59999999999997 hours per month\nyou sleep for 730.8 days per month aswell!\n</code></pre>\n\n<p><strong>UPDATE #2</strong></p>\n\n<p>Everything's working great, but I'm not sure on the calculation for days per month, here's the line of code for it</p>\n\n<pre><code>dayspermonth = (hourspermonth) / (hourspernight) * 24\n</code></pre>\n\n<p>If anyone could tell me if that's correct or not.</p>\n\n<p><strong>UPDATE #3</strong></p>\n\n<p>code now used:</p>\n\n<pre><code># sleep calculator, user enters there hours slept over a nicght and the program\n# will work out different facts about there sleaping\nprint(\"Welcome to the sleep calculator, all you have to do is answer one question...\")\nhourspernight = int(input(\"how many hours per night do you sleep?\"))\n# variable for the hours per week slept\nhoursperweek = hourspernight * 7\n# telling the user how many hours er week they sleep\nprint (\"you sleep\", hoursperweek,\"hours per week\")\n# variable for how many hours per month they sleep\nhourspermonth = float(hoursperweek * 4.35)\n# teling the user how namy hours per month they sleep\nprint(\"you also sleep\", \"{0:.2f}\".format(hourspermonth),\"hours per month\")\n# variable for calculating the days per month slept\ndayspermonth = (hourspermonth) / 24\n# telling the user how many days per month they sleep\nprint(\"you sleep for\",\"{0:.2f}\".format(dayspermonth),\"days per month aswell!\")\n</code></pre>\n\n<p>the response from the shell:\n    ========================= RESTART: F:/sleep hours.py =========================</p>\n\n<pre><code>Welcome to the sleep calculator, all you have to do is answer one question...\nhow many hours per night do you sleep?8\nyou sleep 56 hours per week\nyou also sleep 243.60 hours per month\nyou sleep for 10.15 days per month aswell!\n</code></pre>\n"}, {"tags": ["python", "module", "py2exe", "named"], "comments": [{"owner": {"reputation": 11504, "user_id": 2498729, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8wdJC.jpg?s=128&g=1", "display_name": "But I&#39;m Not A Wrapper Class", "link": "https://stackoverflow.com/users/2498729/but-im-not-a-wrapper-class"}, "edited": false, "score": 0, "creation_date": 1443032219, "post_id": 32746650, "comment_id": 53334064, "body": "You should post the error messages here as text instead of an image."}, {"owner": {"reputation": 1388, "user_id": 2601293, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/43WA3.jpg?s=128&g=1", "display_name": "J&#39;e", "link": "https://stackoverflow.com/users/2601293/je"}, "edited": false, "score": 0, "creation_date": 1443032805, "post_id": 32746650, "comment_id": 53334417, "body": "where is facebook.py located?"}, {"owner": {"reputation": 11, "user_id": 5368951, "user_type": "registered", "profile_image": "https://graph.facebook.com/126676641020425/picture?type=large", "display_name": "Maria Angeles Cano", "link": "https://stackoverflow.com/users/5368951/maria-angeles-cano"}, "edited": false, "score": 0, "creation_date": 1443033019, "post_id": 32746650, "comment_id": 53334543, "body": "I &#39;m using   &quot;Facebook-sdk-master&quot;  There is no file called facebook.py  =("}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5368951, "user_type": "registered", "profile_image": "https://graph.facebook.com/126676641020425/picture?type=large", "display_name": "Maria Angeles Cano", "link": "https://stackoverflow.com/users/5368951/maria-angeles-cano"}, "edited": false, "score": 0, "creation_date": 1443034948, "post_id": 32746890, "comment_id": 53335633, "body": "Thanks.... i tried and the new error is:  Traceback (most recent call last):   File &quot;a.py&quot;, line 15, in &lt;module&gt;   File &quot;facebook.pyc&quot;, line 99, in get_object   File &quot;facebook.pyc&quot;, line 295, in request   File &quot;urllib2.pyc&quot;, line 127, in urlopen   File &quot;urllib2.pyc&quot;, line 402, in open   File &quot;urllib2.pyc&quot;, line 1113, in do_request_ urllib2.URLError: &lt;urlopen error no host given&gt;"}, {"owner": {"reputation": 11, "user_id": 5368951, "user_type": "registered", "profile_image": "https://graph.facebook.com/126676641020425/picture?type=large", "display_name": "Maria Angeles Cano", "link": "https://stackoverflow.com/users/5368951/maria-angeles-cano"}, "edited": false, "score": 0, "creation_date": 1443036837, "post_id": 32746890, "comment_id": 53336690, "body": "My problem is that i dont find file &quot;facebook.py&quot;, in &quot;C:\\Python27\\Lib\\site-packages\\&quot; my scritp just use  &quot;facebook_sdk-1.0.0_alpha-py2.7.egg&quot;"}], "tags": [], "owner": {"reputation": 1388, "user_id": 2601293, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/43WA3.jpg?s=128&g=1", "display_name": "J&#39;e", "link": "https://stackoverflow.com/users/2601293/je"}, "is_accepted": false, "score": 0, "last_activity_date": 1443032904, "creation_date": 1443032904, "answer_id": 32746890, "question_id": 32746650, "link": "https://stackoverflow.com/questions/32746650/no-module-named-facebook-error-py2exe/32746890#32746890", "title": "No Module Named Facebook error Py2exe", "body": "<p>put this in your script above you \"import facebook\"</p>\n\n<pre><code>import sys\nsys.path.append(\"/some/path\") #this is the directory that facebook.py is in\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5368951, "user_type": "registered", "profile_image": "https://graph.facebook.com/126676641020425/picture?type=large", "display_name": "Maria Angeles Cano", "link": "https://stackoverflow.com/users/5368951/maria-angeles-cano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 984, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443032904, "creation_date": 1443032010, "last_edit_date": 1443032865, "question_id": 32746650, "link": "https://stackoverflow.com/questions/32746650/no-module-named-facebook-error-py2exe", "title": "No Module Named Facebook error Py2exe", "body": "<p>I have the following problem , my script works perfect , but when I compiled with py2exe throws me the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n   File \"MyFile.py\", line 2, in &lt;module&gt;\nImportError: No module named facebook\n</code></pre>\n\n<p>I tried to create a folder called \" facebook \" in the build folder, but it is throwing error. This time type :</p>\n\n<pre><code> Traceback (most recent call last):\n   File  \"MyFile.py\", line 13, in &lt;module&gt;\n   File \"facebook\\__init__pyc\", line 103, in get_object\n   File \"facebook\\__init__pyc\", line 245, in request\n   File \"requests\\api.pyc\", line 50, in request\n   File \"requests\\session.pyc\", line 465, in request\n   File \"requests\\session.pyc\", line 573, in send\n   File \"requests\\adapters.pyc\", line 431, in send\nrequests.exceptions.SSLError: [Errno 185090050] _ssl.c:344: error:0B084002:x509 \ncertificate routines: X509_load_cert_crl_file: system lib\n</code></pre>\n\n<p>My code is very simple to use and works just fine without compilation:</p>\n\n<pre><code>&gt; from facepy import GraphAPI\n&gt; import facebook\n&gt; graph = facebook.GraphAPI(AccessToken)\n&gt; graph.get_object()\n</code></pre>\n\n<p>This is my setup.py file in p2exe</p>\n\n<pre><code>from distutils.core import setup\nimport py2exe\nimport os\nsetup(console=['MyFile.py']) \n</code></pre>\n\n<p><strong>Thank you very much to all</strong></p>\n"}, {"tags": ["python", "django", "heroku", "amazon-s3", "nltk"], "comments": [{"owner": {"reputation": 7491, "user_id": 120004, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/555375131/picture?type=large", "display_name": "Kenneth Reitz", "link": "https://stackoverflow.com/users/120004/kenneth-reitz"}, "edited": false, "score": 0, "creation_date": 1489777669, "post_id": 32746636, "comment_id": 72837040, "body": "<a href=\"https://devcenter.heroku.com/articles/python-nltk\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/python-nltk</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1811, "user_id": 4701050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2be1035e138471971112dd021ba6aae9?s=128&d=identicon&r=PG", "display_name": "pthamm", "link": "https://stackoverflow.com/users/4701050/pthamm"}, "is_accepted": true, "score": 1, "last_activity_date": 1443634496, "creation_date": 1443634496, "answer_id": 32872392, "question_id": 32746636, "link": "https://stackoverflow.com/questions/32746636/heroku-django-app-using-nltk-how-do-i-use-the-nltk-corpora-in-the-app/32872392#32872392", "title": "Heroku Django app using NLTK: How do I use the NLTK corpora in the app?", "body": "<p>The way to do it was to make the S3 bucket public and then use the corresponding url for getting the object needed. </p>\n\n<p>For example:</p>\n\n<pre><code>pos_tagger = nltk.data.load(\"http://&lt;your S3 bucket with the nltk data&gt;.s3.amazonaws.com/nltk_data/taggers/maxent_treebank_pos_tagger/english.pickle\")\n</code></pre>\n"}], "owner": {"reputation": 1811, "user_id": 4701050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2be1035e138471971112dd021ba6aae9?s=128&d=identicon&r=PG", "display_name": "pthamm", "link": "https://stackoverflow.com/users/4701050/pthamm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 32872392, "answer_count": 1, "score": 1, "last_activity_date": 1443634496, "creation_date": 1443031928, "last_edit_date": 1495540430, "question_id": 32746636, "link": "https://stackoverflow.com/questions/32746636/heroku-django-app-using-nltk-how-do-i-use-the-nltk-corpora-in-the-app", "title": "Heroku Django app using NLTK: How do I use the NLTK corpora in the app?", "body": "<p>I am using the python NLTK for a Django app. Locally I have the NLTK corpora downloaded and things work fine. For heroku, I tried putting the corpora onto the filesystem and pushing to heroku (as described here: <a href=\"https://stackoverflow.com/questions/24107444/herokupythonnltk-lookuperror/26334947#26334947\">LookupError: Resource &#39;corpora/stopwords&#39; not found</a>) but this exceeded the 1GB limit that heroku has.</p>\n\n<p>Now I've added the corpora to an AWS S3 bucket, but can't figure out how to import the nltk data into the django app. How would I do this? Thanks!</p>\n"}, {"tags": ["python", "matplotlib", "legend", "axes"], "answers": [{"tags": [], "owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "is_accepted": true, "score": 2, "last_activity_date": 1443035257, "creation_date": 1443035257, "answer_id": 32747593, "question_id": 32746522, "link": "https://stackoverflow.com/questions/32746522/matlplotlib-plot-with-inset-make-legend-in-original-axis/32747593#32747593", "title": "Matlplotlib plot with inset: make legend in original axis", "body": "<p><code>plt.sca(main_ax)</code> should have worked.  Note that if you didn't specify a label for the curve/plot/etc, it won't be shown if you only call <code>plt.legend()</code>.  (Instead, you'd need to do <code>plt.legend([line], [label])</code>, or better yet, call <code>plot(x, y, label='some label')</code>.)</p>\n\n<p>However, it's better to approach the problem a different way.</p>\n\n<p>This is one of the many reasons why you'll often see people recommend avoiding the <code>pyplot</code> interface and using Axes/Figure methods instead.  It makes it very clear which axes you're operating on.  </p>\n\n<p>For example:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig, ax = plt.subplots()\nax.plot(range(10), label='Curve 1')\n\ninset = fig.add_axes([.2, .64, .28, .24])\ninset.scatter(range(3), range(3))\n\nax.legend()\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/PoguR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PoguR.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 32747593, "answer_count": 1, "score": 0, "last_activity_date": 1443035257, "creation_date": 1443031504, "question_id": 32746522, "link": "https://stackoverflow.com/questions/32746522/matlplotlib-plot-with-inset-make-legend-in-original-axis", "title": "Matlplotlib plot with inset: make legend in original axis", "body": "<p>I have a very simple question that I can't find the answer to:</p>\n\n<p>Using matplotlib I plot something in a main plot and then something else in an inset using e.g.</p>\n\n<pre><code>a = plt.axes([.2, .64, .28, .24])\n</code></pre>\n\n<p>But after that I want to plot a legend in the main plot again (because the legend contains something found in the meantime).</p>\n\n<p>How do I do this? As in how do I go back to the original plot and make the legend?</p>\n\n<p>I tried different things including <code>sca</code>, but nothing has worked.</p>\n"}]