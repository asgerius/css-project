[{"tags": ["python", "django", "django-forms"], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 1, "creation_date": 1440789135, "post_id": 32261937, "comment_id": 52435163, "body": "<code>super()</code> is ok even in case of multiple inheritance. I&#39;ve got an answer on another server, the issue is with Django&#39;s BaseForm init missing super() call. Possible bug. Explicit init calls like in your example is the way how to work around this issue. Else super() may be used as a standard way."}, {"owner": {"reputation": 101, "user_id": 5274574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FxRlM.png?s=128&g=1", "display_name": "siracoj", "link": "https://stackoverflow.com/users/5274574/siracoj"}, "reply_to_user": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 0, "creation_date": 1440789339, "post_id": 32261937, "comment_id": 52435265, "body": "Okay, good to know. That issue is probably why the examples I looked up had explicit init calls"}], "tags": [], "owner": {"reputation": 101, "user_id": 5274574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FxRlM.png?s=128&g=1", "display_name": "siracoj", "link": "https://stackoverflow.com/users/5274574/siracoj"}, "is_accepted": false, "score": 1, "last_activity_date": 1440777485, "last_edit_date": 1440777485, "creation_date": 1440724970, "answer_id": 32261937, "question_id": 32238581, "link": "https://stackoverflow.com/questions/32238581/switching-ancestors-order-breaks-initialization/32261937#32261937", "title": "Switching ancestors order breaks initialization?", "body": "<p>I'm not sure why that is happening, but I do know that you shouldn't be using super() when using multiple inheritance, instead you should:</p>\n\n<pre><code>    CommonForm.__init__(request, *args, **kwargs)\n    MyMixin.__init__(*args, **kwargs)\n</code></pre>\n\n<p>Here's a good example of this: <a href=\"http://www.python-course.eu/python3_multiple_inheritance.php\" rel=\"nofollow\">http://www.python-course.eu/python3_multiple_inheritance.php</a></p>\n"}], "owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440777485, "creation_date": 1440633527, "question_id": 32238581, "link": "https://stackoverflow.com/questions/32238581/switching-ancestors-order-breaks-initialization", "title": "Switching ancestors order breaks initialization?", "body": "<p>This is from Django application, using multiple inheritance in a custom form:</p>\n\n<pre><code>from django import forms\n\nclass CommonForm(forms.ModelForm):\n    class Meta:\n        model = MyModel\n\n    def __init__(self, request, *args, **kwargs):\n        print 'CommonForm.__init__'\n        super(CommonForm, self).__init__(request, *args, **kwargs)\n        print 'CommonForm.__init__ FINISHED'\n        self._request = request\n\nclass MyMixin(object):\n    def __init__(self, *args, **kwargs):\n        print 'MyMixin.__init__'\n        super(MyMixin, self).__init__(*args, **kwargs)\n        print 'MyMixin.__init__ FINISHED'\n\nclass CustomForm(CommonForm, MyMixin):\n    def __init__(self, request, *args, **kwargs):\n        print 'CustomForm.__init__'\n        super(CustomForm, self).__init__(request, *args, **kwargs)\n        print 'CustomForm.__init__ FINISHED'\n\n# weird initialization:\nfrm = CustomForm(http_request)\n\n# outputs:\nCustomForm.__init__\nCommonForm.__init__\nCommonForm.__init__ FINISHED\nCustomForm.__init__ FINISHED\n</code></pre>\n\n<p><strong>What can cause <code>MyMixin.__init__</code> being skipped ?!</strong>\nThere is no error message, no exception being thrown, nothing \u2026</p>\n\n<p>If I switch order of class inheritance to</p>\n\n<pre><code>class CustomForm(MyMixin, CommonForm):\n</code></pre>\n\n<p>all initializers are suddenly called as expected:</p>\n\n<pre><code>frm = CustomForm(http_request)\n\nCustomForm.__init__\nMyMixin.__init__\nCommonForm.__init__\nCommonForm.__init__ FINISHED\nMyMixin.__init__ FINISHED\nCustomForm.__init__ FINISHED\n</code></pre>\n\n<p>Can anybody explain what is going on here ?</p>\n"}, {"tags": ["python", "matlab", "numpy", "matplotlib", "plot"], "answers": [{"comments": [{"owner": {"reputation": 8002, "user_id": 2121597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o31zM.png?s=128&g=1", "display_name": "farenorth", "link": "https://stackoverflow.com/users/2121597/farenorth"}, "edited": false, "score": 0, "creation_date": 1440649595, "post_id": 32238851, "comment_id": 52362850, "body": "I usually put <code>plt.ion()</code> directly after the plt import statement, in which case in my environment I don&#39;t need <code>plt.show()</code>."}], "tags": [], "owner": {"reputation": 1143, "user_id": 3858885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a19704d80920c1f9e628c0d6463abe?s=128&d=identicon&r=PG", "display_name": "michaelrccurtis", "link": "https://stackoverflow.com/users/3858885/michaelrccurtis"}, "is_accepted": false, "score": 3, "last_activity_date": 1440646254, "last_edit_date": 1440646254, "creation_date": 1440635513, "answer_id": 32238851, "question_id": 32238577, "link": "https://stackoverflow.com/questions/32238577/can-i-have-multiple-matplotlib-plot-windows-in-python-interactive-mode/32238851#32238851", "title": "Can I have multiple matplotlib plot windows in python interactive mode?", "body": "<p>You need to turn on interactive mode by calling <code>plt.ion()</code> just before you call <code>plt.show()</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "is_accepted": true, "score": 4, "last_activity_date": 1440700886, "last_edit_date": 1440700886, "creation_date": 1440657657, "answer_id": 32242352, "question_id": 32238577, "link": "https://stackoverflow.com/questions/32238577/can-i-have-multiple-matplotlib-plot-windows-in-python-interactive-mode/32242352#32242352", "title": "Can I have multiple matplotlib plot windows in python interactive mode?", "body": "<p>In IPython running <a href=\"https://ipython.org/ipython-doc/3/interactive/magics.html#magic-matplotlib\" rel=\"nofollow\">%matplotlib</a> enables matplotlib interactive support without importing anything into the interactive namespace. Then running plt.figure() immediately opens a new plot window, plt.imshow() populates it with an image and plt.plot() does the same for tabular data, all without blocking console interactivity. </p>\n\n<p>With matplotlib interactive mode enabled its ok to run plt.show() and it won't block anything even without setting block=False, which causes IPython to hang fatally in noninteractive mode.  </p>\n\n<p><a href=\"https://ipython.org/ipython-doc/3/interactive/magics.html#magic-pylab\" rel=\"nofollow\">%pylab</a> also enables matplotlib interactive support, but it loads too many imports and is not recommended. </p>\n\n<p>External scripts executed with '<a href=\"https://ipython.org/ipython-doc/3/interactive/magics.html#magic-run\" rel=\"nofollow\">%run</a> -i' run in IPython's namespace and will have interactive plotting support if its been enabled there. </p>\n\n<p>For more information on matplotlib interactive mode see <a href=\"http://matplotlib.org/faq/usage_faq.html#what-is-interactive-mode\" rel=\"nofollow\">What is interactive mode?</a> and <a href=\"https://ipython.org/ipython-doc/3/interactive/reference.html#plotting-with-matplotlib\" rel=\"nofollow\">Plotting with mathplotlib in IPython</a>. </p>\n"}], "owner": {"reputation": 3353, "user_id": 735008, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ff8bc1d961191331430e5e93886b1826?s=128&d=identicon&r=PG", "display_name": "chanwcom", "link": "https://stackoverflow.com/users/735008/chanwcom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1892, "favorite_count": 0, "accepted_answer_id": 32242352, "answer_count": 2, "score": 4, "last_activity_date": 1440700886, "creation_date": 1440633505, "last_edit_date": 1440646134, "question_id": 32238577, "link": "https://stackoverflow.com/questions/32238577/can-i-have-multiple-matplotlib-plot-windows-in-python-interactive-mode", "title": "Can I have multiple matplotlib plot windows in python interactive mode?", "body": "<p>I've been using Matlab/octave for a long time, and I'm transiting to NumPy/SciPy. I find that matplotlib is very similar to figure drawing in Matlab, and it is easy to use.</p>\n\n<p>But, one thing I feel uncomfortable with matplotlib is when I draw a figure using <code>plt.show()</code>, then the process is stuck there, so I cannot type any new commands nor launch another window to draw another figure before closing that window. For example, if we type the following code, then before closing this window, we cannot type any new command nor launch another window for another plot.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nplt.plot([1,2,3,4])\nplt.ylabel('some numbers')\nplt.show()\n</code></pre>\n\n<p>This behavior is very different from Matlab plot. We may have multiple figure windows in the Matlab interactive mode.</p>\n\n<p>Can we do the same thing in python interactive mode?</p>\n"}, {"tags": ["python", "pickle"], "answers": [{"tags": [], "owner": {"reputation": 1594, "user_id": 3186400, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2fb28084a0bb62c60a1ba47526d0b149?s=128&d=identicon&r=PG&f=1", "display_name": "shaoyl85", "link": "https://stackoverflow.com/users/3186400/shaoyl85"}, "is_accepted": true, "score": 1, "last_activity_date": 1440635733, "creation_date": 1440635733, "answer_id": 32238870, "question_id": 32238574, "link": "https://stackoverflow.com/questions/32238574/how-does-copy-reg-save-the-reduce-rebuild-functions/32238870#32238870", "title": "How does copy_reg save the reduce/rebuild functions", "body": "<p>I just got the answer from experimenting the pickle module myself. Basically the bullet 2 is true. From inspecting the pickled string, the module name and the name of the rebuild function is saved. The module is to be imported upon unpickling and then the function from that module is to be called. </p>\n"}], "owner": {"reputation": 1594, "user_id": 3186400, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2fb28084a0bb62c60a1ba47526d0b149?s=128&d=identicon&r=PG&f=1", "display_name": "shaoyl85", "link": "https://stackoverflow.com/users/3186400/shaoyl85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 32238870, "answer_count": 1, "score": 1, "last_activity_date": 1440635733, "creation_date": 1440633485, "question_id": 32238574, "link": "https://stackoverflow.com/questions/32238574/how-does-copy-reg-save-the-reduce-rebuild-functions", "title": "How does copy_reg save the reduce/rebuild functions", "body": "<p>Suppose I use <code>copy_reg.pickle</code> to register a reduce function, like the following. </p>\n\n<pre><code>import copy_reg, copy, pickle\n\nsome_global_variable = 10\n\nclass C(object):\n  def __init__(self, a):\n    self.a = a\n    self.b = some_global_variable\n\ndef unpickle_c(a):\n  c = C(a)\n  c.b = some_global_variable\n\ndef pickle_c(c):\n  return unpickle_c, (c.a,)\n\ncopy_reg.pickle(C, pickle_c)\n</code></pre>\n\n<p>I have a few questions:</p>\n\n<ol>\n<li><p>Is the function <code>unpickle_c</code> saved as a serialized object and called upon unpickling? If this is true, does it mean I cannot access to states outside of the function, such as <code>some_global_variable</code> in the <code>unpickle_c</code> function? Or will the global variable be saved as part of the serialized function object as well?</p></li>\n<li><p>If the above is not true, is <code>unpickle_c</code> saved as some identifier and the function is simply located and called upon unpickling? If this is true, does it mean, if the module containing <code>unpickle_c</code> has not been imported yet upon unpickling, it will be imported? </p></li>\n</ol>\n"}, {"tags": ["python", "json", "serialization", "pandas", "celery"], "answers": [{"comments": [{"owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "edited": false, "score": 0, "creation_date": 1440637423, "post_id": 32239018, "comment_id": 52360153, "body": "Weird thing I wasn&#39;t getting those warnings, but I <b>was</b> getting them in my distributed <code>celery</code> application.    Thanks so much for the insight, quick fix, and now same size read / write!!"}], "tags": [], "owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "is_accepted": true, "score": 2, "last_activity_date": 1440637112, "creation_date": 1440637112, "answer_id": 32239018, "question_id": 32238554, "link": "https://stackoverflow.com/questions/32238554/large-filesize-difference-between-pandas-to-json-and-read-json/32239018#32239018", "title": "large filesize difference between `pandas to_json` and `read_json`", "body": "<p>If you look back through the output from your program, you probably had a message like this:</p>\n\n<pre><code>In [7]: wj_df.to_hdf('test.h5', 'key')\nPerformanceWarning: \nyour performance may suffer as PyTables will pickle object types that it cannot\nmap directly to c-types [inferred_type-&gt;unicode,key-&gt;axis0] [items-&gt;None]\n</code></pre>\n\n<p>It's not particularly obvious, but your column names are being read back as unicode rather than a python string - which PyTables doesn't handle well in python2, so it falls back to pickling.  A relatively easy workaround would be to cast the column as a string, like this.</p>\n\n<pre><code>wj_df.columns = wj_df.columns.astype(str)\n</code></pre>\n\n<p>There's an issue on GitHub for this problem below.</p>\n\n<p><a href=\"https://github.com/pydata/pandas/issues/5743\" rel=\"nofollow\">https://github.com/pydata/pandas/issues/5743</a></p>\n"}], "owner": {"reputation": 1782, "user_id": 963989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bdb8dc7d321a527514b75c942623efa6?s=128&d=identicon&r=PG", "display_name": "benjaminmgross", "link": "https://stackoverflow.com/users/963989/benjaminmgross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 1, "accepted_answer_id": 32239018, "answer_count": 1, "score": 2, "last_activity_date": 1440637112, "creation_date": 1440633377, "last_edit_date": 1495541677, "question_id": 32238554, "link": "https://stackoverflow.com/questions/32238554/large-filesize-difference-between-pandas-to-json-and-read-json", "title": "large filesize difference between `pandas to_json` and `read_json`", "body": "<h2>Setup</h2>\n\n<p>The basis of this question is that I'm using <a href=\"http://www.celeryproject.org/\" rel=\"nofollow noreferrer\"><code>celery</code></a> and <a href=\"https://www.rabbitmq.com/\" rel=\"nofollow noreferrer\"><code>rabbitmq</code></a> to create a distributed <code>HDFStore</code> messaging application that will pass <code>pandas DataFrame</code>s to distributed processes (and then write to <code>HDFStore</code>).  Because <code>json</code> is one of the <a href=\"http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html#keeping-results\" rel=\"nofollow noreferrer\">task serialization protocols</a> accepted by <code>celery</code> the <code>to_json()</code> and <code>read_json()</code> functionality of <code>pandas</code> is perfect for accomplishing this.  </p>\n\n<p>So my application:</p>\n\n<ul>\n<li>hits and API and pulls down a <code>pandas.DataFrame</code></li>\n<li>serializes the <code>DataFrame</code> using <code>to_json()</code></li>\n<li>passes the serialized values to a <code>celery</code> worker </li>\n<li>re-creates the <code>DataFrame</code> on the other side using a <code>celery.group</code> method</li>\n</ul>\n\n<h2>Problem</h2>\n\n<p>I found that when I was creating the HDFStore's, they were > 50x larger than if I just did a <code>for</code> loop and didn't serialize / de-serialize the object (using json).  So I've taken <code>celery</code> out of it and re-created it in a very simple function that re-creates the phenomenon:</p>\n\n<pre><code>import numpy\nimport pandas\nimport random\n\n\ndef test_store_size(n_dfs, f_path):\n    wj_store = pandas.HDFStore(f_path + 'from_json.h5', mode = 'w')\n    nj_store = pandas.HDFStore(f_path + 'from_dfrm.h5', mode = 'w')\n\n    ticks = []\n\n    for i in numpy.arange(n_dfs):\n\n        tag = _rnd_letters(5)\n        print \"working on \" + str(i)\n\n        index = pandas.DatetimeIndex(\n                start = '01/01/2000', \n                periods = 1000, \n                freq = 'b'\n        )\n\n        df = pandas.DataFrame(\n                numpy.random.rand(len(index), 3), \n                columns = ['a', 'b', 'c'], \n                index = index\n        )\n\n        nj_store[tag] = df\n\n        stream = df.to_json(\n                orient = 'index', \n                date_format = 'iso',\n        )\n\n        #stream = df.to_json(orient = 'values')\n        wj_df = pandas.read_json(\n                stream, \n                typ = 'frame', \n                orient = 'index', \n                dtype = _dtype_cols(df)\n        )\n\n        #wj_df = pandas.read_json(stream, convert_dates = False, orient = 'values')\n        wj_store[tag] = wj_df\n\n    wj_store.close()\n    nj_store.close()\n\ndef _rnd_letters(n_letters):\n    \"\"\"Make random tags for the DataFrames\"\"\"\n    s = 'abcdefghijklmnopqrstuvwxyz'\n    return reduce(lambda x, y: x + y, [random.choice(s) for i in numpy.arange(n_letters)])\n\ndef _dtype_cols(df):\n    \"\"\"map the types for dytpes\"\"\"\n    cols = df.columns.tolist()\n    return dict([(col, numpy.float) for col in cols])\n</code></pre>\n\n<p>So if you run the following function:</p>\n\n<pre><code>In [1]: test_store_size(n_dfs = 10, f_path = '/Users/benjamingross/Desktop/tq-')\n</code></pre>\n\n<p>The following is the disparity between the <code>HDFStore</code>s:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gD8oP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gD8oP.png\" alt=\"size-diff\"></a></p>\n\n<p>So 21.4 MB is 59x greater than 365 KB!!!  I'm dealing with 1,000s of <code>DataFrame</code>s so what seems like very little space on my hard drive (400MB) is turning out to be 24 GB, which is now a \"Big Data\" issue (and shouldn't be). </p>\n\n<p>Any help getting serialization using <code>to_json</code> and <code>read_json</code> to \"behave\" (i.e. be the same size before and after serialization) would be greatly appreciated.</p>\n\n<h2>What I've Tried</h2>\n\n<p>I've tried all the different parameters in <code>to_json / read_json</code>, including <code>orient = values</code> which <strong>almost works</strong>, but then I need to serialize the <code>index</code> and <code>columns</code>, which, when <a href=\"https://stackoverflow.com/questions/28078118/merge-many-json-strings-with-python-pandas-inputs\">re-created in very creative ways</a> <strong>still</strong> ends up being 60x of the original size.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1695, "user_id": 1547030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acea45d9c5ee7f36ab3981262bded0?s=128&d=identicon&r=PG", "display_name": "samstav", "link": "https://stackoverflow.com/users/1547030/samstav"}, "edited": false, "score": 0, "creation_date": 1440634283, "post_id": 32238504, "comment_id": 52359482, "body": "Is the <code>FileNameList.append</code> statement supposed to be in the first for loop? The <code>filefolder</code> variable used by your <code>for</code> loop is overwritten on each iteration of the <code>for</code> loop, and then the variable <code>filefolder</code> is appended to <code>FilenameList</code> only after the entire <code>for</code> loop finishes."}], "answers": [{"comments": [{"owner": {"reputation": 1871, "user_id": 1413826, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9c02e2ffe62e943db7b2ce85c7882ab2?s=128&d=identicon&r=PG", "display_name": "steve", "link": "https://stackoverflow.com/users/1413826/steve"}, "edited": false, "score": 0, "creation_date": 1440633836, "post_id": 32238544, "comment_id": 52359366, "body": "<code>pass</code> should be replaced with <code>continue</code>"}, {"owner": {"reputation": 924, "user_id": 5191640, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/avZ8N.jpg?s=128&g=1", "display_name": "Rock n&#39; Roll", "link": "https://stackoverflow.com/users/5191640/rock-n-roll"}, "edited": false, "score": 0, "creation_date": 1440635518, "post_id": 32238544, "comment_id": 52359756, "body": "if I use &quot;pass&quot; there is no output result but if I use &quot;continue&quot; the application will stuck and hang."}], "tags": [], "owner": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "is_accepted": false, "score": 2, "last_activity_date": 1440633301, "creation_date": 1440633301, "answer_id": 32238544, "question_id": 32238504, "link": "https://stackoverflow.com/questions/32238504/how-to-continue-loop-when-the-file-is-not-found/32238544#32238544", "title": "How to continue loop when the file is not found", "body": "<p>You gave the answer yourself.</p>\n\n<pre><code>try:\n    #handles the file\nexcept OSError:\n    pass # or log it if needed.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1695, "user_id": 1547030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acea45d9c5ee7f36ab3981262bded0?s=128&d=identicon&r=PG", "display_name": "samstav", "link": "https://stackoverflow.com/users/1547030/samstav"}, "edited": false, "score": 0, "creation_date": 1440633796, "post_id": 32238547, "comment_id": 52359357, "body": "This won&#39;t finish the <code>for</code> loop if the OSError occurs."}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": true, "score": 1, "last_activity_date": 1440633314, "creation_date": 1440633314, "answer_id": 32238547, "question_id": 32238504, "link": "https://stackoverflow.com/questions/32238504/how-to-continue-loop-when-the-file-is-not-found/32238547#32238547", "title": "How to continue loop when the file is not found", "body": "<p>You could surround the <code>os.listdir</code> call with a  try except:</p>\n\n<pre><code>try:\n    for filefolder in os.listdir(data_folder):      \n        filefolder = data_folder + \"\\\\\" + filefolder\nexcept OSError:\n    pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1695, "user_id": 1547030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acea45d9c5ee7f36ab3981262bded0?s=128&d=identicon&r=PG", "display_name": "samstav", "link": "https://stackoverflow.com/users/1547030/samstav"}, "is_accepted": false, "score": 3, "last_activity_date": 1440634161, "last_edit_date": 1440634161, "creation_date": 1440633354, "answer_id": 32238551, "question_id": 32238504, "link": "https://stackoverflow.com/questions/32238504/how-to-continue-loop-when-the-file-is-not-found/32238551#32238551", "title": "How to continue loop when the file is not found", "body": "<p>You could try/except the loop, but a better solution might be to only append existing directories to your list in the first place:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># your code and while loop here\n\nif os.path.isdir(data_folder):\n    for filefolder in os.listdir(data_folder):      \n        filefolder = data_folder + \"\\\\\" + filefolder\n\n    if os.path.isdir(filefolder):\n        FileNameList.append(filefolder)\n</code></pre>\n\n<p>Putting a <code>for</code> loop inside a try/except block can get a little messy, since you won't be able to continue the loop where you left off in the case that an exception occurs. But if you do want to stick with the <a href=\"https://docs.python.org/2/glossary.html#term-eafp\" rel=\"nofollow\">EAFP strategy</a>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>for filefolder in FileNameList:\n    try:\n        files = os.listdir(filefolder)\n    except OSError:\n        # You could log/print a warning here if you need.\n        continue\n    for file in files:\n        if \".txt\" in file:\n            filename = filefolder + \"\\\\\" + file \n            print filename \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "is_accepted": false, "score": 0, "last_activity_date": 1440633440, "creation_date": 1440633440, "answer_id": 32238569, "question_id": 32238504, "link": "https://stackoverflow.com/questions/32238504/how-to-continue-loop-when-the-file-is-not-found/32238569#32238569", "title": "How to continue loop when the file is not found", "body": "<p>You can use the <strong>continue statement</strong> :</p>\n\n<p>The continue statement in Python returns the control to the beginning of the while loop. The continue statement rejects all the remaining statements in the current iteration of the loop and moves the control back to the top of the loop.</p>\n\n<p>The continue statement can be used in both while and for loops.   </p>\n\n<pre><code> #!/usr/bin/python\n\nfor letter in 'Python':     # First Example\n   if letter == 'h':\n      continue\n   print 'Current Letter :', letter\n\nvar = 10                    # Second Example\nwhile var &gt; 0:              \n   var = var -1\n   if var == 5:\n      continue\n   print 'Current variable value :', var\nprint \"Good bye!\"\n</code></pre>\n\n<p>This will produce following result:</p>\n\n<pre><code>Current Letter : P\nCurrent Letter : y\nCurrent Letter : t\nCurrent Letter : o\nCurrent Letter : n\nCurrent variable value : 10\nCurrent variable value : 9\nCurrent variable value : 8\nCurrent variable value : 7\nCurrent variable value : 6\nCurrent variable value : 4\nCurrent variable value : 3\nCurrent variable value : 2\nCurrent variable value : 1\nGood bye!\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1695, "user_id": 1547030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acea45d9c5ee7f36ab3981262bded0?s=128&d=identicon&r=PG", "display_name": "samstav", "link": "https://stackoverflow.com/users/1547030/samstav"}, "edited": false, "score": 0, "creation_date": 1440634571, "post_id": 32238614, "comment_id": 52359557, "body": "The check needs to be <code>os.path.isdir</code> instead of <code>os.path.exists</code>, since <code>os.listdir</code> will throw <code>OSError: [Errno 20] Not a directory:</code> if it is passed a path to a file."}], "tags": [], "owner": {"reputation": 1871, "user_id": 1413826, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9c02e2ffe62e943db7b2ce85c7882ab2?s=128&d=identicon&r=PG", "display_name": "steve", "link": "https://stackoverflow.com/users/1413826/steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1440700569, "last_edit_date": 1440700569, "creation_date": 1440633809, "answer_id": 32238614, "question_id": 32238504, "link": "https://stackoverflow.com/questions/32238504/how-to-continue-loop-when-the-file-is-not-found/32238614#32238614", "title": "How to continue loop when the file is not found", "body": "<p>Below is an example where we check that the directory exists before progressing with the for loop.\nIt may be considered more 'pythonic' to use a try, except block, however I believe that in this instance a simple check is cleaner (just my opinion).</p>\n\n<pre><code>for filefolder in FileNameList:\n    # CHECK THAT THE DIRECTORY EXISTS HERE\n    if not os.path.isdir(filefolder):\n        continue # this instruction will immediately jump to the next for loop iteration, effectively skipping the current iteration.\n    for file in os.listdir(filefolder):\n        if \".txt\" in file:\n            filename = filefolder + \"\\\\\" + file \n            print filename    \n</code></pre>\n"}], "owner": {"reputation": 924, "user_id": 5191640, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/avZ8N.jpg?s=128&g=1", "display_name": "Rock n&#39; Roll", "link": "https://stackoverflow.com/users/5191640/rock-n-roll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7441, "favorite_count": 0, "accepted_answer_id": 32238547, "answer_count": 5, "score": 2, "last_activity_date": 1440703554, "creation_date": 1440633034, "last_edit_date": 1440703554, "question_id": 32238504, "link": "https://stackoverflow.com/questions/32238504/how-to-continue-loop-when-the-file-is-not-found", "title": "How to continue loop when the file is not found", "body": "<p>I am trying to print the list of files in the date range set by the user. </p>\n\n<p>This is my sample files: Note that there is no \"2015-01-01\" in the file</p>\n\n<p><a href=\"https://i.stack.imgur.com/DPoYa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DPoYa.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I input range from <code>2015-01-02</code> to <code>2015-01-05</code> it will print the list if files. But if I input from <code>2015-01-01</code> to <code>2015-01-05</code> it will result in an error: </p>\n\n<pre><code>OSError: (2, 'No such file or directory', '\\\\2015-01-01')\n</code></pre>\n\n<p>Is it possible to have try-except-pass or continue so that my loop will still continue and prints <code>2015-01-02</code> to <code>2015-01-05</code>. And just deny the file not found.</p>\n\n<p>This is my current code:</p>\n\n<pre><code>FileNameList = []\ndate = start_date\nwhile date &lt;= end_date:\n    folder_name = date.strftime(DATE_FORMAT)\n    data_folder = path.join(pathDir, folder_name)\n    #print data_folder  \n\n    for filefolder in os.listdir(data_folder):      \n        filefolder = data_folder + \"\\\\\" + filefolder\n\n    FileNameList.append(filefolder)\n\n    date += delta_one_day\n\nfor filefolder in FileNameList:\n    for file in os.listdir(filefolder):\n        if \".txt\" in file:\n            filename = filefolder + \"\\\\\" + file \n            print filename      \n</code></pre>\n"}, {"tags": ["python", "multithreading", "dictionary", "thread-safety"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440632778, "post_id": 32238453, "comment_id": 52359098, "body": "That is not an appropriate use of <code>with</code> .. the block is already over when the &#39;mydict&#39; object is returned."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440633247, "post_id": 32238453, "comment_id": 52359208, "body": "Anyway, 1) it is generally not reasonable to <i>only</i> replace / wrap the individual get/set operations because they do not extend a larger atomic context - ie. <code>if not x[y]: x[y] = z</code> is still <i>not</i> thread-safe; and 2) it is also pointless to wrap the individual get/set operations because, <a href=\"http://stackoverflow.com/questions/6953351/thread-safety-in-pythons-dictionary\"><i>as individual operations</i>, they are already thread-safe</a>."}, {"owner": {"reputation": 954, "user_id": 4181692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhyWX.png?s=128&g=1", "display_name": "Renae Lider", "link": "https://stackoverflow.com/users/4181692/renae-lider"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440633371, "post_id": 32238453, "comment_id": 52359242, "body": "@user2864740 Took me a while to think it through... now I get it. That lock is as useless as a white crayon. I should be using something like a queue mechanism... I think. Hmmmm...don&#39;t know (brain freeze)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "edited": false, "score": 0, "creation_date": 1440633624, "post_id": 32238453, "comment_id": 52359310, "body": "There is a discussion about and solution for this at <a href=\"http://stackoverflow.com/questions/8487673/how-would-you-make-this-python-dictionary-thread-safe\" title=\"how would you make this python dictionary thread safe\">stackoverflow.com/questions/8487673/&hellip;</a>"}], "owner": {"reputation": 954, "user_id": 4181692, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhyWX.png?s=128&g=1", "display_name": "Renae Lider", "link": "https://stackoverflow.com/users/4181692/renae-lider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440632779, "creation_date": 1440632648, "last_edit_date": 1440632779, "question_id": 32238453, "link": "https://stackoverflow.com/questions/32238453/which-all-methods-needs-to-overridden-to-make-a-dict-subclass-thread-safe", "title": "Which all methods needs to overridden to make a dict subclass thread-safe?", "body": "<p>I would like to implement an entire dictionary subclass that is thread safe in every way - all the get and set methods. Currently, I am simply providing access to it via a helper function like this:</p>\n\n<pre><code># Don't access directly (I am not a big fan of name mangling)\nmydict = dict()\nlock = threading.Rlock()\n\ndef getdict():\n    \"\"\"Safe way to access the dict.\"\"\"\n    with lock:\n        return mydict\n</code></pre>\n\n<p>I think it might be better if I do it by subclassing the dict, since it would avoid awkward calls like <code>getdict()[\"key\"] = \"value\"</code>. The wrapper classes from <code>collections</code> library looks promising, but I am not sure which methods needs to be overridden in order to make it entirely safe. <code>__getattr__</code> and <code>__setattr__</code> would be two, but what about <code>update</code>? Are there any more? Is this even a good idea?</p>\n"}, {"tags": ["python", "file", "python-2.7", "numpy", "tuples"], "answers": [{"comments": [{"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "edited": false, "score": 0, "creation_date": 1440634809, "post_id": 32238646, "comment_id": 52359612, "body": "Allright, that writes. What would be the inverse of this to read it back into <code>np.random.set_state()</code>? There&#39;s no point in writing to whatever format if I can&#39;t load it correctly afterwards."}], "tags": [], "owner": {"reputation": 46, "user_id": 2387896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82c535e09cec5561838b080ed13ee9ad?s=128&d=identicon&r=PG", "display_name": "Rafael Cordano", "link": "https://stackoverflow.com/users/2387896/rafael-cordano"}, "is_accepted": false, "score": 0, "last_activity_date": 1440634080, "creation_date": 1440634080, "answer_id": 32238646, "question_id": 32238391, "link": "https://stackoverflow.com/questions/32238391/writing-numpy-random-get-state-to-file/32238646#32238646", "title": "Writing numpy.random.get_state() to file", "body": "<p>Try to replace the line</p>\n\n<pre><code>writer.writerow(val)\n</code></pre>\n\n<p>with this</p>\n\n<pre><code>writer.writerow([val])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "edited": false, "score": 0, "creation_date": 1440660086, "post_id": 32239983, "comment_id": 52367255, "body": "Works like a charm :-)"}], "tags": [], "owner": {"reputation": 48633, "user_id": 832621, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/xOSw3.png?s=128&g=1", "display_name": "Saullo G. P. Castro", "link": "https://stackoverflow.com/users/832621/saullo-g-p-castro"}, "is_accepted": true, "score": 1, "last_activity_date": 1440644484, "creation_date": 1440644484, "answer_id": 32239983, "question_id": 32238391, "link": "https://stackoverflow.com/questions/32238391/writing-numpy-random-get-state-to-file/32239983#32239983", "title": "Writing numpy.random.get_state() to file", "body": "<p>Python built-in <code>cPickle.dump/load</code> can efficiently write and read many objects such as tuples.</p>\n\n<h2>Writing</h2>\n\n<pre><code>from cPickle import dump\nimport numpy as np\n\nwith open('state.obj', 'wb') as f:\n    dump(np.random.get_state(), f)\n</code></pre>\n\n<h2>Reading</h2>\n\n<pre><code>from cPickle import load\nimport numpy as np\n\nwith open('state.obj', 'rb') as f:\n    np.random.set_state(load(f))\n</code></pre>\n"}], "owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 32239983, "answer_count": 2, "score": 2, "last_activity_date": 1440644484, "creation_date": 1440632272, "question_id": 32238391, "link": "https://stackoverflow.com/questions/32238391/writing-numpy-random-get-state-to-file", "title": "Writing numpy.random.get_state() to file", "body": "<p><code>numpy.random.get_state()</code> returns a <code>tuple</code>. I want to write this to a file so I can use the same state later if required.</p>\n\n<p>I got it down to the following, but <code>csv</code> throws an error:</p>\n\n<pre><code>import csv\nimport numpy as np\n\ndef write_state():\n    with open(\"state_file\", \"w\") as file:\n        csv.register_dialect(\"custom\", delimiter=\" \", skipinitialspace=True)\n        writer = csv.writer(file, dialect=\"custom\")\n        for val in np.random.get_state():\n            writer.writerow(val)\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>  File \"MCVE.py\", line 21, in &lt;module&gt;\n    write_state()\n  File \"MCVE.py\", line 11, in write_state\n    writer.writerow(val)\n_csv.Error: sequence expected\n</code></pre>\n\n<p>What's the appropriate method for writing <code>np.random.get_state()</code> to a file so <code>np.random.set_state()</code> can use the stored information later on?</p>\n"}, {"tags": ["python", "http", "python-3.x", "cgi", "permission-denied"], "answers": [{"comments": [{"owner": {"reputation": 242, "user_id": 4766685, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1b67f35944bf4b7e5f1c1169c57fc5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro H. Forli", "link": "https://stackoverflow.com/users/4766685/pedro-h-forli"}, "edited": false, "score": 0, "creation_date": 1440635970, "post_id": 32238418, "comment_id": 52359857, "body": "Thanks for the answer, When I try running the webserver.py without sudo it gives me an &#39;Permission Denied&#39; error. The cgi1.py script already has the line &#39;#!/usr/bin/env python&#39; as its first line of code. About changing the port, it doesn&#39;t seen to have any effect on the problem. Any other suggestions?"}, {"owner": {"reputation": 1695, "user_id": 1547030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acea45d9c5ee7f36ab3981262bded0?s=128&d=identicon&r=PG", "display_name": "samstav", "link": "https://stackoverflow.com/users/1547030/samstav"}, "reply_to_user": {"reputation": 242, "user_id": 4766685, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1b67f35944bf4b7e5f1c1169c57fc5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro H. Forli", "link": "https://stackoverflow.com/users/4766685/pedro-h-forli"}, "edited": false, "score": 0, "creation_date": 1440703185, "post_id": 32238418, "comment_id": 52395462, "body": "You tried on a non-privileged port, i.e. greater than 1024 ?"}], "tags": [], "owner": {"reputation": 1695, "user_id": 1547030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89acea45d9c5ee7f36ab3981262bded0?s=128&d=identicon&r=PG", "display_name": "samstav", "link": "https://stackoverflow.com/users/1547030/samstav"}, "is_accepted": false, "score": 0, "last_activity_date": 1440632776, "last_edit_date": 1440632776, "creation_date": 1440632446, "answer_id": 32238418, "question_id": 32238374, "link": "https://stackoverflow.com/questions/32238374/programming-python-oreilly-webserver-py-permission-denied/32238418#32238418", "title": "Programming Python O&#39;Reilly webserver.py Permission Denied", "body": "<p>Since you are running the command with <code>sudo</code>, it is running as <code>root</code> and not as <code>pedro</code>. It could be that the script is assuming some other role (this is possible since you are running as root). Try removing <code>sudo</code>, and/or running the server on a different port, like <code>8080</code>.</p>\n\n<p>You might also try adding the line <code>#!/usr/bin/env python</code> to the very top of your file, <code>cgi1.py</code>.</p>\n"}], "owner": {"reputation": 242, "user_id": 4766685, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1b67f35944bf4b7e5f1c1169c57fc5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro H. Forli", "link": "https://stackoverflow.com/users/4766685/pedro-h-forli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440632776, "creation_date": 1440632101, "question_id": 32238374, "link": "https://stackoverflow.com/questions/32238374/programming-python-oreilly-webserver-py-permission-denied", "title": "Programming Python O&#39;Reilly webserver.py Permission Denied", "body": "<p>I'm trying to learn CGI scripting throw the book \"Programming Python\" 4th editon by O'Reilly, but I'm stuck at running my first CGI scripting. For learning porpuses the book suggests using an HTTP Server script called webserver.py as shown below.</p>\n\n<pre><code>import os, sys\nfrom http.server import HTTPServer, CGIHTTPRequestHandler\nwebdir = '.'\nport = 80\nif len(sys.argv) &gt; 1: webdir = sys.argv[1]\nif len(sys.argv) &gt; 2: port = int(sys.argv[2])\nprint('webdir \"%s\", port %s' % (webdir, port))\nos.chdir(webdir)\nsrvraddr = ('', port)\nsrvrobj = HTTPServer(srvraddr, CGIHTTPRequestHandler)\nsrvrobj.serve_forever()  \n</code></pre>\n\n<p>There is no problem acessing the server throw the browser by typing '<a href=\"http://localhost\" rel=\"nofollow\">http://localhost</a>', but when I try to run the cgi script inside the folder 'cgi-bin' an permission denied error is thrown:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/lib/python3.4/http/server.py\", line 1143, in run_cgi\n    os.execve(scriptfile, args, env)\nPermissionError: [Errno 13] Permission denied\n</code></pre>\n\n<p>As said in the book this problem can be solved by changing the permission of the file, to do so I typed 'chmod 755 cgi1.py' on the terminal and change the file permission to the following:</p>\n\n<pre><code>-rwxr-xr-x 1 pedro pedro 209 Ago 26 20:09 cgi1.py\n</code></pre>\n\n<p>But I keep getting the same error. I'm on Ubuntu 14.04 64bits, running the HTTP server file with 'sudo python3 webserver.py', does anybody know how to solve this problem?</p>\n\n<p>Thanks in advance, and sorry about my english!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440632354, "post_id": 32238335, "comment_id": 52358995, "body": "Well, you&#39;re printing the search results. If you want to print the whole row (the <code>text</code> variable in your example), tell it to do so."}], "answers": [{"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 1, "last_activity_date": 1440632486, "creation_date": 1440632486, "answer_id": 32238420, "question_id": 32238335, "link": "https://stackoverflow.com/questions/32238335/re-findall-display-row-of-tekst/32238420#32238420", "title": "Re.findall display row of tekst", "body": "<p>Check if <code>re.findall()</code> returned anything, then print the row:</p>\n\n<pre><code>text = \"He was carefully disguised but captured quickly by police.\"\nlines = [text, 't', 'l']\nfor line in lines:\n    if re.findall(r\"\\w+ly\", line):\n        print line\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 4967149, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b844ad01220e719cbef2f392eba00361?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/4967149/joey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 32238420, "answer_count": 1, "score": 0, "last_activity_date": 1440632486, "creation_date": 1440631872, "question_id": 32238335, "link": "https://stackoverflow.com/questions/32238335/re-findall-display-row-of-tekst", "title": "Re.findall display row of tekst", "body": "<p>I got the following code:</p>\n\n<pre><code>import re\n\ntext = \"He was carefully disguised but captured quickly by police.\"\nprint re.findall(r\"\\w+ly\", text)\n</code></pre>\n\n<p>The output now is:</p>\n\n<pre><code>['carefully', 'quickly']\n</code></pre>\n\n<p>How can I make my re.findall so, that it will displays the whole row where it found something. Like when there is a lot of tekst and I am searching for everything with my name in it. How can I let it display the whole row of tekst and not just only my name.</p>\n"}, {"tags": ["python", "matlab", "numpy", "equivalent"], "comments": [{"owner": {"reputation": 321, "user_id": 3380374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f06fcbfd4e0825e6405a067561b89804?s=128&d=identicon&r=PG&f=1", "display_name": "TinyEpic", "link": "https://stackoverflow.com/users/3380374/tinyepic"}, "edited": false, "score": 0, "creation_date": 1440632451, "post_id": 32238227, "comment_id": 52359026, "body": "<code>numpy.dstack((b,b,b,b,b))</code> gives weird output with the correct shape."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1440638083, "post_id": 32238227, "comment_id": 52360271, "body": "<code>@farenorth</code> gave you the right thing.  Did you look at <code>b_[:,:,i]</code> for i in 0:4?  Don&#39;t confuse display styles with actual values."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1440638299, "post_id": 32238227, "comment_id": 52360326, "body": "MATLAB changes the fist dimension fastest, the last slowest.  So it displays &#39;planes&#39; as (:,:,1) etc.  <code>numpy</code> iterates the last dimension fastest, the 1st last.  So it displays &#39;planes&#39; as 2d blocks, in this case 3x5."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 3380374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f06fcbfd4e0825e6405a067561b89804?s=128&d=identicon&r=PG&f=1", "display_name": "TinyEpic", "link": "https://stackoverflow.com/users/3380374/tinyepic"}, "edited": false, "score": 0, "creation_date": 1440632279, "post_id": 32238334, "comment_id": 52358981, "body": "Hi @farenorth,  This generate different output, similar to  the numpy.dstack(), from the Matlab version."}, {"owner": {"reputation": 321, "user_id": 3380374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f06fcbfd4e0825e6405a067561b89804?s=128&d=identicon&r=PG&f=1", "display_name": "TinyEpic", "link": "https://stackoverflow.com/users/3380374/tinyepic"}, "edited": false, "score": 0, "creation_date": 1440685803, "post_id": 32238334, "comment_id": 52384766, "body": "Thank you very much. You answer is very clear and complete. Sorry for my lack of understanding Python-numpy array."}, {"owner": {"reputation": 8002, "user_id": 2121597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o31zM.png?s=128&g=1", "display_name": "farenorth", "link": "https://stackoverflow.com/users/2121597/farenorth"}, "reply_to_user": {"reputation": 321, "user_id": 3380374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f06fcbfd4e0825e6405a067561b89804?s=128&d=identicon&r=PG&f=1", "display_name": "TinyEpic", "link": "https://stackoverflow.com/users/3380374/tinyepic"}, "edited": false, "score": 0, "creation_date": 1440686007, "post_id": 32238334, "comment_id": 52384917, "body": "No problem! I remember being boggled by <i>both</i> of the issues that you&#39;ve raised here when I was switching from Matlab."}], "tags": [], "owner": {"reputation": 8002, "user_id": 2121597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o31zM.png?s=128&g=1", "display_name": "farenorth", "link": "https://stackoverflow.com/users/2121597/farenorth"}, "is_accepted": true, "score": 11, "last_activity_date": 1440684640, "last_edit_date": 1440684640, "creation_date": 1440631859, "answer_id": 32238334, "question_id": 32238227, "link": "https://stackoverflow.com/questions/32238227/numpy-tile-did-not-work-as-matlab-repmat/32238334#32238334", "title": "numpy.tile did not work as Matlab repmat", "body": "<p>NumPy functions are not, in general, 'drop-in' replacements for matlab functions. Often times there are subtle difference to how the 'equivalent' functions are used. It does take time to adapt, but I've found the transition to be very worthwhile.</p>\n\n<p>In this case, the <code>np.tile</code> documentation indicates what happens when you are trying to tile an array to higher dimensions than it is defined,</p>\n\n<blockquote>\n  <p>numpy.tile(A, reps)</p>\n  \n  <blockquote>\n    <p>Construct an array by repeating A the number of times given by reps.</p>\n    \n    <p>If reps has length d, the result will have dimension of max(d, A.ndim).</p>\n    \n    <p>If A.ndim &lt; d, A is promoted to be d-dimensional by prepending new axes. So a shape (3,) array is promoted to (1, 3) for 2-D replication, or shape (1, 1, 3) for 3-D replication. If this is not the desired behavior, promote A to d-dimensions manually before calling this function.</p>\n  </blockquote>\n</blockquote>\n\n<p>In this case, your array is being cast to a shape of <code>[1, 3, 3]</code>, then being tiled. So, to get your desired behavior just be sure to append a new singleton-dimension to the array where you want it,</p>\n\n<pre><code>&gt;&gt;&gt; b_ = numpy.tile(b[..., None], [1, 1, 5])\n&gt;&gt;&gt; print(b_.shape)\n(3, 3, 5)\n</code></pre>\n\n<p>Note here that I've used <code>None</code> (i.e. <code>np.newaxis</code>) and ellipses notation to specify a new dimension at the end of the array. You can find out more about these capabilities <a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Another option, which is inspired by the OP's comment would be:</p>\n\n<pre><code>b_ = np.dstack((b, ) * 5)\n</code></pre>\n\n<p>In this case, I've used tuple multiplication to 'repmat' the array, which is then constructed by <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html\" rel=\"noreferrer\"><code>np.dstack</code></a>.</p>\n\n<p>As @hpaulj indicated, Matlab and NumPy display matrices differently. To replicate the Matlab output you can do something like:</p>\n\n<pre><code>&gt;&gt;&gt; for idx in xrange(b_.shape[2]):\n...    print 'b_[:, :, {}] = \\n{}\\n'.format(idx, str(b_[:, :, idx]))\n...\nb_[:, :, 0] = \n[[1 1 1]\n [1 2 1]\n [1 1 1]]\n\nb_[:, :, 1] = \n[[1 1 1]\n [1 2 1]\n [1 1 1]]\n\nb_[:, :, 2] = \n[[1 1 1]\n [1 2 1]\n [1 1 1]]\n\nb_[:, :, 3] = \n[[1 1 1]\n [1 2 1]\n [1 1 1]]\n\nb_[:, :, 4] = \n[[1 1 1]\n [1 2 1]\n [1 1 1]]\n</code></pre>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 3380374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f06fcbfd4e0825e6405a067561b89804?s=128&d=identicon&r=PG&f=1", "display_name": "TinyEpic", "link": "https://stackoverflow.com/users/3380374/tinyepic"}, "edited": false, "score": 0, "creation_date": 1440644853, "post_id": 32239245, "comment_id": 52361781, "body": "Thank you for your clarification."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 3, "last_activity_date": 1440640594, "last_edit_date": 1440640594, "creation_date": 1440638845, "answer_id": 32239245, "question_id": 32238227, "link": "https://stackoverflow.com/questions/32238227/numpy-tile-did-not-work-as-matlab-repmat/32239245#32239245", "title": "numpy.tile did not work as Matlab repmat", "body": "<p>Let's try the comparison, taking care to diversify the shapes and values.  </p>\n\n<pre><code>octave:7&gt; a=reshape(0:11,3,4)\na =\n    0    3    6    9\n    1    4    7   10\n    2    5    8   11\n\noctave:8&gt; repmat(a,[1,1,2])\nans =\nans(:,:,1) =\n    0    3    6    9\n    1    4    7   10\n    2    5    8   11\nans(:,:,2) =    \n    0    3    6    9\n    1    4    7   10\n    2    5    8   11\n</code></pre>\n\n<p>numpy equivalent - more or less:</p>\n\n<pre><code>In [61]: a=np.arange(12).reshape(3,4)    \nIn [62]: np.tile(a,[2,1,1])\nOut[62]: \narray([[[ 0,  1,  2,  3],\n        [ 4,  5,  6,  7],\n        [ 8,  9, 10, 11]],\n\n       [[ 0,  1,  2,  3],\n        [ 4,  5,  6,  7],\n        [ 8,  9, 10, 11]]])\n</code></pre>\n\n<p>numpy again, but with <code>order F</code> to better match the MATLAB Fortran-derived layout</p>\n\n<pre><code>In [63]: a=np.arange(12).reshape(3,4,order='F')    \nIn [64]: np.tile(a,[2,1,1])\nOut[64]: \narray([[[ 0,  3,  6,  9],\n        [ 1,  4,  7, 10],\n        [ 2,  5,  8, 11]],\n\n       [[ 0,  3,  6,  9],\n        [ 1,  4,  7, 10],\n        [ 2,  5,  8, 11]]])\n</code></pre>\n\n<p>I'm adding the new numpy dimension at the start, because in many ways it better replicates the MATLAB practice of adding it at the end.</p>\n\n<p>Try adding the new dimension at the end. The shape is (3,4,5), but you might not like the display.</p>\n\n<pre><code> np.tile(a[:,:,None],[1,1,2])\n</code></pre>\n\n<p>Another consideration - what happens when you flatten the tile?</p>\n\n<pre><code>octave:10&gt; repmat(a,[1,1,2])(:).'\nans =    \n    0    1    2    3    4    5    6    7    8    9   10   11 \n0    1    2    3     4    5    6    7    8    9   10   11\n</code></pre>\n\n<p>with the order F <code>a</code></p>\n\n<pre><code>In [78]: np.tile(a[:,:,None],[1,1,2]).flatten()\nOut[78]: \narray([ 0,  0,  3,  3,  6,  6,  9,  9,  1,  1,  4,  4,  7,  7, 10, 10,  2,\n        2,  5,  5,  8,  8, 11, 11])\n\nIn [79]: np.tile(a,[2,1,1]).flatten()\nOut[79]: \narray([ 0,  3,  6,  9,  1,  4,  7, 10,  2,  5,  8, 11,  0,  3,  6,  9,  1,\n        4,  7, 10,  2,  5,  8, 11])\n</code></pre>\n\n<p>with a C order array:</p>\n\n<pre><code>In [80]: a=np.arange(12).reshape(3,4)\n\nIn [81]: np.tile(a,[2,1,1]).flatten()\nOut[81]: \narray([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,  0,  1,  2,  3,  4,\n        5,  6,  7,  8,  9, 10, 11])\n</code></pre>\n\n<p>This last one matches the Octave layout.</p>\n\n<p>So does:</p>\n\n<pre><code>In [83]: a=np.arange(12).reshape(3,4,order='F')\n\nIn [84]: np.tile(a[:,:,None],[1,1,2]).flatten(order='F')\nOut[84]: \narray([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,  0,  1,  2,  3,  4,\n        5,  6,  7,  8,  9, 10, 11])\n</code></pre>\n\n<p>Confused yet?</p>\n"}], "owner": {"reputation": 321, "user_id": 3380374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f06fcbfd4e0825e6405a067561b89804?s=128&d=identicon&r=PG&f=1", "display_name": "TinyEpic", "link": "https://stackoverflow.com/users/3380374/tinyepic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4096, "favorite_count": 2, "accepted_answer_id": 32238334, "answer_count": 2, "score": 1, "last_activity_date": 1440696419, "creation_date": 1440631184, "last_edit_date": 1495540474, "question_id": 32238227, "link": "https://stackoverflow.com/questions/32238227/numpy-tile-did-not-work-as-matlab-repmat", "title": "numpy.tile did not work as Matlab repmat", "body": "<p>According to <a href=\"https://stackoverflow.com/questions/1721802/what-is-the-equivalent-of-matlabs-repmat-in-numpy\">What is the equivalent of MATLAB&#39;s repmat in NumPy</a>, I tried to build 3x3x5 array from 3x3 array using python.</p>\n\n<p>In Matlab, this work as I expected.</p>\n\n<pre><code>a = [1,1,1;1,2,1;1,1,1];\na_= repmat(a,[1,1,5]);\n</code></pre>\n\n<p>size(a_) = 3     3     5</p>\n\n<p>But for numpy.tile </p>\n\n<pre><code>b = numpy.array([[1,1,1],[1,2,1],[1,1,1]])\nb_ = numpy.tile(b, [1,1,5])\n</code></pre>\n\n<p>b_.shape = (1, 3, 15)</p>\n\n<p>If I want to generate the same array as in Matlab, what is the equivalent? </p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>The output I would expect to get is </p>\n\n<pre><code>b_(:,:,1) =\n\n1 1 1  \n1 2 1  \n1 1 1  \n\nb_(:,:,2) =\n\n1 1 1  \n1 2 1  \n1 1 1  \n\nb_(:,:,3) =\n\n1 1 1  \n1 2 1  \n1 1 1  \n\nb_(:,:,4) =  \n\n1 1 1  \n1 2 1  \n1 1 1  \nb_(:,:,5) =\n\n1 1 1  \n1 2 1  \n1 1 1  \n</code></pre>\n\n<p>but what @farenorth and the <code>numpy.dstack</code> give is </p>\n\n<pre><code>[[[1 1 1 1 1]  \n[1 1 1 1 1]  \n[1 1 1 1 1]]  \n\n[[1 1 1 1 1]  \n[2 2 2 2 2]  \n[1 1 1 1 1]]  \n\n[[1 1 1 1 1]  \n[1 1 1 1 1]  \n[1 1 1 1 1]]]  \n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1872, "user_id": 3651127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LZvG.png?s=128&g=1", "display_name": "dagrha", "link": "https://stackoverflow.com/users/3651127/dagrha"}, "edited": false, "score": 0, "creation_date": 1440632946, "post_id": 32238384, "comment_id": 52359143, "body": "For some reason, I am getting an error when I use that:   <code>TypeError: mean() takes exactly 1 argument (2 given)</code>.  Maybe a version issue? I&#39;m running 0.16.1--  I will try to upgrade and try with 0.16.2"}, {"owner": {"reputation": 1872, "user_id": 3651127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LZvG.png?s=128&g=1", "display_name": "dagrha", "link": "https://stackoverflow.com/users/3651127/dagrha"}, "edited": false, "score": 0, "creation_date": 1440633456, "post_id": 32238384, "comment_id": 52359267, "body": "<code>df.groupby([&#39;formation&#39;]).aggregate([np.mean, np.size])</code> did the trick"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 1, "creation_date": 1440633461, "post_id": 32238384, "comment_id": 52359268, "body": "It should be <code>.aggregate([&#39;mean&#39;, &#39;count&#39;])</code> (note the brackets)."}], "tags": [], "owner": {"reputation": 2135, "user_id": 722362, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4eb2b0ae663ddcd4bba660a26c0a638c?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/722362/sam"}, "is_accepted": true, "score": 2, "last_activity_date": 1440633585, "last_edit_date": 1440633585, "creation_date": 1440632205, "answer_id": 32238384, "question_id": 32238219, "link": "https://stackoverflow.com/questions/32238219/sample-size-from-mean-on-groupby-object/32238384#32238384", "title": "Sample size from mean() on groupby object", "body": "<p>You can do this by using the <a href=\"http://pandas.pydata.org/pandas-docs/stable/groupby.html#aggregation\" rel=\"nofollow\"><code>aggregate</code></a> function, with the <code>mean</code> and <code>count</code> functions as arguments. </p>\n\n<pre><code>&gt;&gt; df.groupby(['formation']).aggregate([np.mean, np.size])\n</code></pre>\n"}], "owner": {"reputation": 1872, "user_id": 3651127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LZvG.png?s=128&g=1", "display_name": "dagrha", "link": "https://stackoverflow.com/users/3651127/dagrha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 32238384, "answer_count": 1, "score": 0, "last_activity_date": 1440633585, "creation_date": 1440631125, "question_id": 32238219, "link": "https://stackoverflow.com/questions/32238219/sample-size-from-mean-on-groupby-object", "title": "Sample size from mean() on groupby object", "body": "<p>Is there a way to record the sample size when calling the <code>mean()</code> method of a groupby object?</p>\n\n<p>Consider the following dataframe:</p>\n\n<pre><code>In [16]: df\nOut[16]:\n   formation  phi  sw\n0        nio   14  47\n1        nio   10  16\n2        nio   12  12\n3        nio   19  82\n4        nio   23  43\n5     fthays   24  19\n6     codell   23   5\n7     codell   24  45\n8     codell    9  11\n9   graneros   26  11\n10  graneros   15  45\n11  graneros   12  16\n12      dkot   11  79\n</code></pre>\n\n<p>It's easy enough to compute the mean across each of these <code>formation</code>s using the <code>mean()</code> method of the groupby object:</p>\n\n<pre><code>In [17]: df.groupby(['formation']).mean()\nOut[17]:\n                 phi         sw\nformation\ncodell     18.666667  20.333333\ndkot       11.000000  79.000000\nfthays     24.000000  19.000000\ngraneros   17.666667  24.000000\nnio        15.600000  40.000000\n</code></pre>\n\n<p>But I'd like to know if there's a way to add a column for the sample size.  So my desired output would be something like:</p>\n\n<pre><code>                 phi         sw   n\nformation\ncodell     18.666667  20.333333   3 \ndkot       11.000000  79.000000   1\nfthays     24.000000  19.000000   1\ngraneros   17.666667  24.000000   3\nnio        15.600000  40.000000   5\n</code></pre>\n"}, {"tags": ["python", "sorting", "dictionary"], "comments": [{"owner": {"reputation": 171, "user_id": 5199522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9dUd3.jpg?s=128&g=1", "display_name": "Cheese", "link": "https://stackoverflow.com/users/5199522/cheese"}, "edited": false, "score": 0, "creation_date": 1440631832, "post_id": 32238196, "comment_id": 52358846, "body": "I see, thanks, so what if I changed the key to return a tuple though? What&#39;s happening there?   <code>key = lambda x: (-x[1],x[0])</code>"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 1, "creation_date": 1440631899, "post_id": 32238196, "comment_id": 52358867, "body": "That would sort by the tuples <code>(-value, key)</code>. It would end up sorting by the values from greatest to least, and breaking ties with the keys. The result would be <code>[(&#39;Baker&#39;, 20), (&#39;Charlie&#39;, 20), (&#39;Dog&#39;, 15), (&#39;Able&#39;, 10)]</code>."}, {"owner": {"reputation": 171, "user_id": 5199522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9dUd3.jpg?s=128&g=1", "display_name": "Cheese", "link": "https://stackoverflow.com/users/5199522/cheese"}, "reply_to_user": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440632297, "post_id": 32238196, "comment_id": 52358985, "body": "Oh ok, so what&#39;s the purpose of having the <code>x[0]</code> key aspect in the tuple if it&#39;s ignored by the sort? I guess I mean, why would I want to return a tuple there in the lambda?"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440632447, "post_id": 32238196, "comment_id": 52359024, "body": "The <code>x[0]</code> is not ignored; it&#39;s used to break ties with the first item in the tuple. That&#39;s why <code>(&#39;Baker&#39;, 20)</code> will always come before <code>(&#39;Charlie&#39;, 20)</code>"}, {"owner": {"reputation": 171, "user_id": 5199522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9dUd3.jpg?s=128&g=1", "display_name": "Cheese", "link": "https://stackoverflow.com/users/5199522/cheese"}, "reply_to_user": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440632720, "post_id": 32238196, "comment_id": 52359085, "body": "So since they have the same value, the <code>x[0]</code> allows those with equivalent values to be sorted by their key? And I&#39;m sorry I don&#39;t quite know what you mean by &quot;break ties with the keys&quot;"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 2, "creation_date": 1440632920, "post_id": 32238196, "comment_id": 52359135, "body": "When sorting tuples, Python first sorts by the first value. Then, if there are any ties (i.e. two or more tuples have the same first value), it sorts by the second value, then the third if there are any ties in the second value, etc. Think of it like sorting words in alphabetical order. First you sort by the first letter; if there are any ties, you sort by the second letter; you keep going until there are no more ties, or you run out of letters."}], "answers": [{"tags": [], "owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "is_accepted": true, "score": 8, "last_activity_date": 1440631136, "creation_date": 1440631136, "answer_id": 32238222, "question_id": 32238196, "link": "https://stackoverflow.com/questions/32238196/how-does-the-key-argument-in-pythons-sorted-function-work/32238222#32238222", "title": "How does the key argument in python&#39;s sorted function work?", "body": "<p>The function you pass in to <code>key</code> is given each of the items that are being sorted, and returns a \"key\" that Python can sort by. So, if you want to sort a list of strings by the <em>reverse</em> of the string, you could do this:</p>\n\n<pre><code>list_of_strings.sort(key=lambda s: s[::-1])\n</code></pre>\n\n<p>This lets you specify the value each item is sorted by, without having to change the item. That way, you don't have to build a list of reversed strings, sort that, then reverse them back.</p>\n\n<pre><code># DON'T do this\n\ndata = ['abc', 'def', 'ghi', 'jkl']\nreversed_data = [s[::-1] for s in data]\nreversed_data.sort()\ndata = [s[::-1] for s in reversed_data]\n\n# Do this\n\ndata.sort(key=lambda s: s[::-1])\n</code></pre>\n\n<p>In your case, the code is sorting each item by the <em>second</em> item in the tuple, whereas normally it would initially sort by the first item in the tuple, then break ties with the second item.</p>\n"}, {"tags": [], "owner": {"reputation": 1433, "user_id": 2371309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b032de2ed22560a8232a5d4911f5070f?s=128&d=identicon&r=PG", "display_name": "CodeIsLife", "link": "https://stackoverflow.com/users/2371309/codeislife"}, "is_accepted": false, "score": 4, "last_activity_date": 1440631237, "creation_date": 1440631237, "answer_id": 32238236, "question_id": 32238196, "link": "https://stackoverflow.com/questions/32238196/how-does-the-key-argument-in-pythons-sorted-function-work/32238236#32238236", "title": "How does the key argument in python&#39;s sorted function work?", "body": "<p>key is a function that will be called to transform the collection's items before they are compared. The parameter passed to key must be something that is callable.</p>\n\n<p>The use of lambda creates an anonymous function (which is callable). In the case of sorted the callable only takes one parameters. Python's lambda is pretty simple. It can only do and return one thing really.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 981698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7438cdb5cb9d0e114554ad4ea489b72?s=128&d=identicon&r=PG", "display_name": "Aishwarya Shukla", "link": "https://stackoverflow.com/users/981698/aishwarya-shukla"}, "is_accepted": false, "score": 2, "last_activity_date": 1565932039, "last_edit_date": 1565932039, "creation_date": 1523461600, "answer_id": 49779377, "question_id": 32238196, "link": "https://stackoverflow.com/questions/32238196/how-does-the-key-argument-in-pythons-sorted-function-work/49779377#49779377", "title": "How does the key argument in python&#39;s sorted function work?", "body": "<pre><code>&gt;&gt;&gt; votes = {'Charlie': 20, 'Able': 10, 'Baker': 20, 'Dog': 15}\n</code></pre>\n\n<p>If we apply <code>.items()</code> on the <code>votes</code> dictionary above we get: </p>\n\n<pre><code>&gt;&gt;&gt; votes_items=votes.items()\n&gt;&gt;&gt; votes_items\n[('Charlie', 20), ('Baker', 20), ('Able', 10), ('Dog', 15)]\n#a list of tuples, each tuple having two items indexed 0 and 1\n</code></pre>\n\n<p>For each tuple, the first index <code>[0]</code> are the strings (<code>'Charlie','Able','Baker','Dog'</code>) and the second index <code>[1]</code> the integers (<code>20,10,20,15</code>).</p>\n\n<p><code>print(sorted(votes.items(), key = lambda x: x[1]))</code> instructs python to sort the items<code>(tuples)</code> in <code>votes</code> using the second index <code>[1]</code> of each tuple, the integers, as the basis of the sorting.</p>\n\n<p>Python compares each integer from each tuple and returns a list that has ranked each tuple in ascending order (this can be reversed with the <code>reverse=True</code> argument) using each tuple's integer as the <code>key</code> to determine the tuple's rank, </p>\n\n<p>Where there is a tie in the key, the items are ranked in the order they are originally in the dictionary. (so <code>('Charlie', 20)</code> is before <code>('Baker', 20)</code> because there is a <code>20==20</code> tie on the key but ('<code>Charlie', 20)</code> comes before <code>('Baker', 20)</code> in the original <code>votes</code> dictionary).</p>\n\n<p>The output then is:</p>\n\n<pre><code> [('Able', 10), ('Dog', 15), ('Charlie', 20), ('Baker', 20)]\n</code></pre>\n\n<p>I hope this makes it easier to understand. </p>\n"}, {"tags": [], "owner": {"reputation": 894, "user_id": 10992166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62fdbca3940e5374302f1da721070f24?s=128&d=identicon&r=PG", "display_name": "Mustapha-Belkacim", "link": "https://stackoverflow.com/users/10992166/mustapha-belkacim"}, "is_accepted": false, "score": 2, "last_activity_date": 1572598891, "creation_date": 1572598891, "answer_id": 58656538, "question_id": 32238196, "link": "https://stackoverflow.com/questions/32238196/how-does-the-key-argument-in-pythons-sorted-function-work/58656538#58656538", "title": "How does the key argument in python&#39;s sorted function work?", "body": "<p>The <code>key</code> parameter takes a function as its value, which is applied to each element before sorting, so that the elements are sorted based on the output of this function.</p>\n\n<p>For example if you want to sort a list of strings based on their length, you can do something like this:</p>\n\n<pre><code>    list = ['aaaaaa', 'bb', 'ccc', 'd']\n    sorted(list, key=len)\n\n    # ['d', 'bb', 'ccc', 'aaaaaa']\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5199522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9dUd3.jpg?s=128&g=1", "display_name": "Cheese", "link": "https://stackoverflow.com/users/5199522/cheese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7446, "favorite_count": 5, "accepted_answer_id": 32238222, "answer_count": 4, "score": 14, "last_activity_date": 1616262924, "creation_date": 1440630966, "last_edit_date": 1616262924, "question_id": 32238196, "link": "https://stackoverflow.com/questions/32238196/how-does-the-key-argument-in-pythons-sorted-function-work", "title": "How does the key argument in python&#39;s sorted function work?", "body": "<p>Say I have</p>\n<pre><code>votes = {'Charlie': 20, 'Able': 10, 'Baker': 20, 'Dog': 15}\n</code></pre>\n<p>I understand</p>\n<pre><code>print(sorted(votes.items(), key=lambda x: x[1]))\n</code></pre>\n<p>will lead to</p>\n<pre><code>[('Able', 10), ('Dog', 15), ('Baker', 20), ('Charlie', 20)]\n</code></pre>\n<p>But how does this work?</p>\n"}, {"tags": ["python", "printing"], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 2, "last_activity_date": 1440630881, "last_edit_date": 1440630881, "creation_date": 1440630856, "answer_id": 32238186, "question_id": 32238153, "link": "https://stackoverflow.com/questions/32238153/print-function-backslash-disappears-python-3/32238186#32238186", "title": "Print function Backslash disappears Python 3", "body": "<p>The <code>'\\'</code> characters are being treated as escape characters. Use the <code>r</code> prefix to treat it as a raw string literal</p>\n\n<pre><code>print(\n       r\"\"\"\n         _____       ___       ___  ___   _____\n        /  ___|     /   |     /   |/   | |  ___|\n        | |        / /| |    / /|   /| | | |__\n        | |  _    / ___ |   / / |__/ | | |  __|\n        | |_| |  / /  | |  / /       | | | |___\n        \\_____/ /_/   |_| /_/        |_| |_____|\n\n         _____   _     _   _____   _____\n        /  _  \\ | |   / / |  ___| |  _  \\\n        | | | | | |  / /  | |__   | |_| |\n        | | | | | | / /   |  __|  |  _  /\n        | |_| | | |/ /    | |___  | | \\ \\\n        \\_____/ |___/     |_____| |_|  \\_\\\n\n        \"\"\"\n     )\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5270566, "user_type": "registered", "profile_image": "https://graph.facebook.com/955017524547732/picture?type=large", "display_name": "Daniel Heitel", "link": "https://stackoverflow.com/users/5270566/daniel-heitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440630881, "creation_date": 1440630661, "last_edit_date": 1440630795, "question_id": 32238153, "link": "https://stackoverflow.com/questions/32238153/print-function-backslash-disappears-python-3", "title": "Print function Backslash disappears Python 3", "body": "<p>The Backslashes in the Game over disappear how can I keep them visible?</p>\n\n<pre><code>__author__ = 'daniel'\n# Game Over 2.0\n# demonstrates the use of quotes in strings\n\nprint (\"Program 'Game Over' 2.0\")\n\nprint (\"Same\",\"message\",\"as before\")\n\nprint (\"Just\",\n       \"a bit\",\n       \"bigger\")\n\nprint (\"Here\", end=\" \")\nprint (\"it is.....\")\n\nprint(\n        \"\"\"\n         _____       ___       ___  ___   _____\n        /  ___|     /   |     /   |/   | |  ___|\n        | |        / /| |    / /|   /| | | |__\n        | |  _    / ___ |   / / |__/ | | |  __|\n        | |_| |  / /  | |  / /       | | | |___\n        \\_____/ /_/   |_| /_/        |_| |_____|\n\n         _____   _     _   _____   _____\n        /  _  \\ | |   / / |  ___| |  _  \\\n        | | | | | |  / /  | |__   | |_| |\n        | | | | | | / /   |  __|  |  _  /\n        | |_| | | |/ /    | |___  | | \\ \\\n        \\_____/ |___/     |_____| |_|  \\_\\\n\n        \"\"\"\n     )\n\ninput(\"\\n\\nPress the enter key to exit.\")\n</code></pre>\n"}, {"tags": ["python", "multithreading", "sockets", "tcp"], "comments": [{"owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "edited": false, "score": 0, "creation_date": 1440631310, "post_id": 32238140, "comment_id": 52358716, "body": "You want tee on a Queue. As far as I know it is not implemented. I am afraid of you are stuck with n queues, and have to supply the data to all of the Queues. Maybe you can wrap it in a class"}, {"owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "edited": false, "score": 0, "creation_date": 1440631602, "post_id": 32238140, "comment_id": 52358795, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4531564/send-one-way-message-to-all-threads-in-python\" title=\"send one way message to all threads in python\">stackoverflow.com/questions/4531564/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "edited": false, "score": 0, "creation_date": 1440632859, "post_id": 32238140, "comment_id": 52359115, "body": "This fits into a publish-subscribe model  where the server is also a UDP client.  Suggest taking a look at &#216;MQ for this. Documentation is at <a href=\"http://zguide.zeromq.org/page:all#Getting-the-Message-Out\" rel=\"nofollow noreferrer\">zguide.zeromq.org/page:all#Getting-the-Message-Out</a> with Python server code at <a href=\"http://zguide.zeromq.org/py:wuserver\" rel=\"nofollow noreferrer\">zguide.zeromq.org/py:wuserver</a> and Python client code at <a href=\"http://zguide.zeromq.org/py:wuclient\" rel=\"nofollow noreferrer\">zguide.zeromq.org/py:wuclient</a>. The Pubsub module can also do this but I have not used it, see <a href=\"http://pubsub.sourceforge.net/\" rel=\"nofollow noreferrer\">pubsub.sourceforge.net</a>"}, {"owner": {"reputation": 51, "user_id": 1653790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1a8d9249c35aba652de3942cb96bff16?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/1653790/rob"}, "edited": false, "score": 0, "creation_date": 1441132613, "post_id": 32238140, "comment_id": 52551583, "body": "Interesting read on &#216;MQ. Thanks for both ideas. I&#39;ll try both"}], "answers": [{"tags": [], "owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "is_accepted": false, "score": 0, "last_activity_date": 1440631978, "creation_date": 1440631978, "answer_id": 32238357, "question_id": 32238140, "link": "https://stackoverflow.com/questions/32238140/python-how-to-serve-multiple-tcp-clients-with-input-from-single-udp-port/32238357#32238357", "title": "python how to serve multiple tcp clients with input from single udp port?", "body": "<p>You could hide the point-to-point connections in a class, for example:</p>\n\n<pre><code>from multiprocessing import Queue\nfrom threading import Lock\n\nclass BroadcastChannel():\n  def __init__(self):\n    self._queues = []\n    self.lock = Lock()\n  def send(self, item):\n    self.lock.acquire()\n    for q in self._queues:\n      q.put(item)\n    self.lock.release()\n  def fork(self):\n    q = Queue()\n    self.lock.acquire()\n    self._queues.append(q)\n    self.lock.release()\n    return q\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 1653790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1a8d9249c35aba652de3942cb96bff16?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/1653790/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440631978, "creation_date": 1440630589, "question_id": 32238140, "link": "https://stackoverflow.com/questions/32238140/python-how-to-serve-multiple-tcp-clients-with-input-from-single-udp-port", "title": "python how to serve multiple tcp clients with input from single udp port?", "body": "<p>I have a python TCP server that listens for incoming data requests. As soon as someone connects to it, the server starts serving data to that client. The data it serves comes in via UDP on some port. </p>\n\n<p>The question is, how can I serve the same data coming in from a UDP port to potentially multiple tcp clients?</p>\n\n<p>Some background info: \n1. a thread is created to listen for incoming UDP data.\n2. A new thread is created every time a new TCP clients connects.</p>\n\n<p>I looked at the python Queue package, but it seems this is point-to-point and limiting for my objective.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 2582, "user_id": 2940627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5df0a513a91a3825f51045c23e71e99d?s=128&d=identicon&r=PG&f=1", "display_name": "Madness", "link": "https://stackoverflow.com/users/2940627/madness"}, "edited": false, "score": 0, "creation_date": 1440631435, "post_id": 32238089, "comment_id": 52358753, "body": "What error are you receiving though? Please update your question."}, {"owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "reply_to_user": {"reputation": 2582, "user_id": 2940627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5df0a513a91a3825f51045c23e71e99d?s=128&d=identicon&r=PG&f=1", "display_name": "Madness", "link": "https://stackoverflow.com/users/2940627/madness"}, "edited": false, "score": 0, "creation_date": 1440632011, "post_id": 32238089, "comment_id": 52358897, "body": "I am getting... &#39;module&#39; object is not callable..."}, {"owner": {"reputation": 4516, "user_id": 1350796, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/11dad08c4a88c491ccfb6ae3d91fdcb4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1350796/andrew"}, "edited": false, "score": 0, "creation_date": 1440633441, "post_id": 32238089, "comment_id": 52359261, "body": "post the stack trace"}, {"owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440668696, "post_id": 32238089, "comment_id": 52372465, "body": "i have changed it to urlparse3.parse_url(x).netlock ...Now it returns with a error message &quot;name &quot;basestring &quot;is not defined&quot;...."}, {"owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "edited": false, "score": 0, "creation_date": 1440674590, "post_id": 32238089, "comment_id": 52376464, "body": "What is <code>urlparse3</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440668660, "post_id": 32238603, "comment_id": 52372441, "body": "i have changed it to urlparse3.parse_url(x).netlock    ...Now it returns with a error message &quot;name &quot;basestring &quot;is not defined&quot;...."}, {"owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "reply_to_user": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440674281, "post_id": 32238603, "comment_id": 52376262, "body": "@tanmoysarkar You must be using Python 3, while <code>urlparse3</code> is Python 2 only."}, {"owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440674539, "post_id": 32238603, "comment_id": 52376429, "body": "but i installed urlparse3... so what i supposed to do for that."}, {"owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440674828, "post_id": 32238603, "comment_id": 52376603, "body": "this what i getting now.. &#39;module&#39; object has no attribute &#39;parse_url&#39;"}, {"owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "reply_to_user": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440675399, "post_id": 32238603, "comment_id": 52376990, "body": "@tanmoysarkar You can install <code>urlparse3</code> in Python 3, but it would be unusable, so you are supposed to find an alternative. You can try <code>urllib.parse.urlparse</code>"}, {"owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440675901, "post_id": 32238603, "comment_id": 52377321, "body": "I have installed urllib3 also... please help me to solve this i am in very early stage of python. now it returns with &#39;module&#39; object has no attribute &#39;parse&#39;....."}, {"owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "reply_to_user": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440676659, "post_id": 32238603, "comment_id": 52377781, "body": "@tanmoysarkar You should first check which version you are using with <code>python --version</code>"}, {"owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "edited": false, "score": 0, "creation_date": 1440694765, "post_id": 32238603, "comment_id": 52390694, "body": "thank you this problem has resolved...thank you,,,,,"}], "tags": [], "owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "is_accepted": true, "score": 0, "last_activity_date": 1440633720, "creation_date": 1440633720, "answer_id": 32238603, "question_id": 32238089, "link": "https://stackoverflow.com/questions/32238089/i-am-getting-error-during-url-parsing-any-suggestion/32238603#32238603", "title": "I am getting error during URL parsing. any suggestion", "body": "<p>You should not use <code>urlparse3.urlparse3</code>, if you read the documentation carefully you should be calling <code>urlparse3.parse_url</code> instead.</p>\n"}], "owner": {"reputation": 938, "user_id": 5260488, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Hw1jd.png?s=128&g=1", "display_name": "Tammy", "link": "https://stackoverflow.com/users/5260488/tammy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 1, "accepted_answer_id": 32238603, "answer_count": 1, "score": 0, "last_activity_date": 1440676300, "creation_date": 1440630177, "last_edit_date": 1440676300, "question_id": 32238089, "link": "https://stackoverflow.com/questions/32238089/i-am-getting-error-during-url-parsing-any-suggestion", "title": "I am getting error during URL parsing. any suggestion", "body": "<p>I want to create a django app in which by entering the URL of any website it will return with images of that website.  </p>\n\n<p>'module' object has no attribute 'parse'</p>\n\n<p>This is my error.</p>\n\n<p>This is my views.py of my application</p>\n\n<pre><code>from django.shortcuts import render, render_to_response, RequestContext\nfrom django.http import HttpResponse\nfrom django.template import RequestContext, loader\nfrom lxml import html\nimport requests\nimport urllib3\nimport urlparse3\n\ndef home(request):\ntemplate = loader.get_template('home.html')\nc = {}\nh = {}\nz = []\nif request.POST:\nurl = request.POST[\"url\"]\nr = requests.get(url)\ntree = html.fromstring(r.text)\nc = tree.xpath('//img/@src')\nh = tree.xpath('//a/@href')\nfor x in c:\n    if bool(urllib3.parse.urlparse3(x).netloc):\n        z.append(x)\n    else:\n        z.append(str(url) + str(x))\n\n return render_to_response(\"home.html\", {'h': h, 'z' : z},   context_instance=RequestContext(request))\n</code></pre>\n\n<p>But it return with errors when i entered URL for getting images.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 17399, "user_id": 1245190, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/c7sai.png?s=128&g=1", "display_name": "kqw", "link": "https://stackoverflow.com/users/1245190/kqw"}, "edited": false, "score": 0, "creation_date": 1440630242, "post_id": 32238031, "comment_id": 52358415, "body": "What exactly are you asking?"}, {"owner": {"reputation": 492, "user_id": 3358407, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/8628963/picture?type=large", "display_name": "Jason Melo Hall", "link": "https://stackoverflow.com/users/3358407/jason-melo-hall"}, "reply_to_user": {"reputation": 17399, "user_id": 1245190, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/c7sai.png?s=128&g=1", "display_name": "kqw", "link": "https://stackoverflow.com/users/1245190/kqw"}, "edited": false, "score": 0, "creation_date": 1440708362, "post_id": 32238031, "comment_id": 52398146, "body": "It is how to get around the memory error which occurred during writer.save()"}], "answers": [{"comments": [{"owner": {"reputation": 492, "user_id": 3358407, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/8628963/picture?type=large", "display_name": "Jason Melo Hall", "link": "https://stackoverflow.com/users/3358407/jason-melo-hall"}, "edited": false, "score": 0, "creation_date": 1440698169, "post_id": 32238256, "comment_id": 52392783, "body": "Thanks. I&#39;ve been searching for awhile but can&#39;t seem to find a good way to do that. Could you point me to a resource?"}, {"owner": {"reputation": 492, "user_id": 3358407, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/8628963/picture?type=large", "display_name": "Jason Melo Hall", "link": "https://stackoverflow.com/users/3358407/jason-melo-hall"}, "edited": false, "score": 0, "creation_date": 1440710968, "post_id": 32238256, "comment_id": 52399403, "body": "I just was talking to someone and I don&#39;t think the input file is too big. It&#39;s 59939 rows x 78 columns."}, {"owner": {"reputation": 492, "user_id": 3358407, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/8628963/picture?type=large", "display_name": "Jason Melo Hall", "link": "https://stackoverflow.com/users/3358407/jason-melo-hall"}, "edited": false, "score": 0, "creation_date": 1445125701, "post_id": 32238256, "comment_id": 54191392, "body": "After some more digging it appears you&#39;re right. The file wasn&#39;t big but I was using the basic version of Cloud9 IDE which has limited memory."}], "tags": [], "owner": {"reputation": 1920, "user_id": 2277746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GrXaZ.jpg?s=128&g=1", "display_name": "Andrea Dusza", "link": "https://stackoverflow.com/users/2277746/andrea-dusza"}, "is_accepted": true, "score": 4, "last_activity_date": 1440631380, "creation_date": 1440631380, "answer_id": 32238256, "question_id": 32238031, "link": "https://stackoverflow.com/questions/32238031/pandas-excelwriter-memoryerror/32238256#32238256", "title": "Pandas Excelwriter MemoryError", "body": "<p>Can it be that your input file is too big? (Judging by the MemoryError.) In this case, you could try breaking the data up to smaller chunks instead of trying to write it all at once to an .xlsx file.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7544620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc1b0525dbc0d9704274f42c26e0c53f?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ", "link": "https://stackoverflow.com/users/7544620/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1602588195, "creation_date": 1602588195, "answer_id": 64334286, "question_id": 32238031, "link": "https://stackoverflow.com/questions/32238031/pandas-excelwriter-memoryerror/64334286#64334286", "title": "Pandas Excelwriter MemoryError", "body": "<p>I think the reason is that you have a 32bit version installed. This allows accessing only a few Gigs of Memory. Try the 64bit version of python.</p>\n"}], "owner": {"reputation": 492, "user_id": 3358407, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/8628963/picture?type=large", "display_name": "Jason Melo Hall", "link": "https://stackoverflow.com/users/3358407/jason-melo-hall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4112, "favorite_count": 0, "accepted_answer_id": 32238256, "answer_count": 2, "score": 0, "last_activity_date": 1602588195, "creation_date": 1440629827, "last_edit_date": 1440631749, "question_id": 32238031, "link": "https://stackoverflow.com/questions/32238031/pandas-excelwriter-memoryerror", "title": "Pandas Excelwriter MemoryError", "body": "<pre><code>import pandas\n\n#Ignores a value is trying to be set on a copy of a slice from a DataFrame(side note if I shouldn't be doing this please let me know too)\npandas.options.mode.chained_assignment = None\n\n#opens file\nf = pandas.read_excel('.../foo.xlsx', sheetname=0)\n\n#sort by header_number and adjust index\nf = f.sort(columns=['FY15'],ascending=[0])\nf.index = range(0,len(f))\n\n#create field column\nf['AB_Test'] = ''\n\n#A/B Iteration\nfor i, row in enumerate(f['AB_Test']):\n\n    if i % 2 == 0:\n        f['AB_Test'][i] = 'A'\n    else:\n        f['AB_Test'][i] = 'B'\n\nprint f\n\n#output to Excel\nwriter = pandas.ExcelWriter('output.xlsx')\nf.to_excel(writer,'Sheet1')\nwriter.save()\n\nf.close\n</code></pre>\n\n<h2>Error Received</h2>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/jmhall/PycharmProjects/untitled/abtest\", line 33, in &lt;module&gt;\n    writer.save()\n  File \"C:\\Python27\\lib\\site-packages\\pandas\\io\\excel.py\", line 651, in save\n    return self.book.save(self.path)\n  File \"C:\\Python27\\lib\\site-packages\\openpyxl\\workbook.py\", line 265, in save\n    save_workbook(self, filename)\n  File \"C:\\Python27\\lib\\site-packages\\openpyxl\\writer\\excel.py\", line 186, in save_workbook\n    writer = ExcelWriter(workbook)\n  File \"C:\\Python27\\lib\\site-packages\\openpyxl\\writer\\excel.py\", line 71, in __init__\n    self.style_writer = StyleWriter(self.workbook)\n  File \"C:\\Python27\\lib\\site-packages\\openpyxl\\writer\\styles.py\", line 35, in __init__\n    self._style_list = self._get_style_list(workbook)\n  File \"C:\\Python27\\lib\\site-packages\\openpyxl\\writer\\styles.py\", line 43, in _get_style_list\n    uniqueStyles = dict((id(style), style) for style in worksheet._styles.values()).values()\nMemoryError\n\nProcess finished with exit code 1\n</code></pre>\n\n<h2>I ran the code below from a different solution I found and got the results below.</h2>\n\n<h3>Code</h3>\n\n<pre><code>pandas.__version__\npandas.show_versions(as_json=False)\n</code></pre>\n\n<h3>Results</h3>\n\n<pre><code>INSTALLED VERSIONS\n------------------\ncommit: None\npython: 2.7.10.final.0\npython-bits: 32\nOS: Windows\nOS-release: 7\nmachine: AMD64\nprocessor: Intel64 Family 6 Model 60 Stepping 3, GenuineIntel\nbyteorder: little\nLC_ALL: None\nLANG: None\n\npandas: 0.16.2\nnose: None\nCython: None\nnumpy: 1.9.2\nscipy: None\nstatsmodels: None\nIPython: None\nsphinx: None\npatsy: None\ndateutil: 2.4.2\npytz: 2015.4\nbottleneck: None\ntables: None\nnumexpr: None\nmatplotlib: None\nopenpyxl: 1.8.6\nxlrd: 0.9.4\nxlwt: None\nxlsxwriter: None\nlxml: None\nbs4: None\nhtml5lib: None\nhttplib2: None\napiclient: None\nsqlalchemy: None\npymysql: None\npsycopg2: None\n</code></pre>\n"}, {"tags": ["python", "r", "rpy2"], "comments": [{"owner": {"reputation": 1542, "user_id": 790979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ecf6f6d2ed8e343bb728a2e573c13ad?s=128&d=identicon&r=PG", "display_name": "charleslparker", "link": "https://stackoverflow.com/users/790979/charleslparker"}, "reply_to_user": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "edited": false, "score": 0, "creation_date": 1444251892, "post_id": 32238026, "comment_id": 53829684, "body": "Just encoutered this.  I would have been miserably stuck for hours had this question and it&#39;s response not been posted.  Thanks @lgautier for being on top of this!"}], "answers": [{"tags": [], "owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "is_accepted": true, "score": 2, "last_activity_date": 1440974228, "last_edit_date": 1440974228, "creation_date": 1440728052, "answer_id": 32262333, "question_id": 32238026, "link": "https://stackoverflow.com/questions/32238026/parameter-not-being-passed-to-r-via-rpy2/32262333#32262333", "title": "Parameter Not Being Passed to R via rpy2", "body": "<p>The attribute appears lost somewhere, presumably during conversion between low-level and high-level representation of the resulting R object (a factor).</p>\n\n<p>Using the low-level interface call is a workaround (see below), but it would be really nice if you could report the issue on the rpy2 issue tracker on bitbucket.</p>\n\n<pre><code>r_predict = rpy2.robjects.rinterface.globalenv.get('predict')\nr_traindata = rpy2.robjects.Matrix(trainingDataClassless)\nr_true = rpy2.robjects.BoolVector([True])\npredictOutcomes = r_predict(svmObj,\n                            r_traindata,\n                            probability=r_true)\n</code></pre>\n\n<p><strong>edit:</strong> an issue was opened... and closed (the bug is fixed - <a href=\"https://bitbucket.org/rpy2/rpy2/issues/299\" rel=\"nofollow\">https://bitbucket.org/rpy2/rpy2/issues/299</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 0, "last_activity_date": 1440735627, "creation_date": 1440735627, "answer_id": 32263292, "question_id": 32238026, "link": "https://stackoverflow.com/questions/32238026/parameter-not-being-passed-to-r-via-rpy2/32263292#32263292", "title": "Parameter Not Being Passed to R via rpy2", "body": "<p>Your R functions (<code>svm</code> and <code>predict</code>) need to run on the R side of things and not on Python as Python does not see or know those specialized functions. Python can just serve for the numpy samples calculations, as conduit to call functions, and for printing results:</p>\n\n<pre><code># PASS PYTHON DATASET OBJECTS INTO R  \n# numpy objects =&gt; R matrices \ntdClassless_row,tdClassess_col = trainingDataClassless.shape\nrmatrix_tdClassless = rpy2.robjects.r.matrix(tdClassless, \n                            nrow=tdClassless_row, ncol=tdClassless_col)\nrpy2.robjects.r.assign(\"tdClassless\", rmatrix_tdClassless)\n\ntdFactorClasses_row,tdFactorClasses_col = trainingDataFactorClasses.shape\nrmatrx_tdFactorClasses = rpy2.robjects.r.matrix(tdFactorClasses, \n                            nrow=tdFactorClasses_row, ncol=tdFactorClasses_col)\nrpy2.robjects.r.assign(\"tdFactorClasses\", rmatrix_tdFactorClassless)\n\n# OBTAIN THE SVM FUNCTION\nrsvm_funct = rpy2.robjects.globalenv['svm']\n\n# PASS SVM PARAMETERS\nsvmObj_py = rsvm_funct (\n     rpy2.robjects('x = tdClassless'), \n     rpy2.robjects('y = tdFactorClasses'),\n     rpy2.robjects('probability = TRUE'),\n     rpy2.robjects('kernel = \"linear\"'), \n     rpy2.robjects('type = \"C-classification\"')\n)\n# ASSIGN svmObj in R \nrpy2.robjects.r.assign(\"svmObj\", svmObj_py)\n\n# OBTAIN THE PREDICT FUNCTION\nrpredict_funct = rpy2.robjects.globalenv['predict']\n\n// PASS PREDICT PARAMETERS\npredictOutcomes = rpredict_funct(\n     rpy2.robjects('svmObj'), \n     rpy2.robjects('tdClassless'), \n     rpy2.robjects('probability = TRUE')\n) \n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5270543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ecdf33c143c4c4e154d2b545acb69d?s=128&d=identicon&r=PG&f=1", "display_name": "T. Smith", "link": "https://stackoverflow.com/users/5270543/t-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 32262333, "answer_count": 2, "score": 2, "last_activity_date": 1440974228, "creation_date": 1440629808, "last_edit_date": 1440725904, "question_id": 32238026, "link": "https://stackoverflow.com/questions/32238026/parameter-not-being-passed-to-r-via-rpy2", "title": "Parameter Not Being Passed to R via rpy2", "body": "<p>I'm having some trouble with rpy2 and the R library \"e1071\". I'm trying to retrieve probability data from an SVM prediction, but it is never included in the returned object.</p>\n\n<p>Building a model calling \"svm\" with \"probability=TRUE\" will tell the model to include extra data when requesting prediction. Prediction data is returned through the \"predict\" command with a \"probability=TRUE\" parameter and should return a complex data structure with labels and a \"probabilities\" attribute. My issue is the probabilities attribute is not included in the results. Its like the probability parameter is never included in the predict call.</p>\n\n<p>Here is some example code (e1071 R library must be installed):</p>\n\n<pre><code>import numpy\nimport rpy2\nimport rpy2.robjects.numpy2ri\nrpy2.robjects.numpy2ri.activate()\nfrom rpy2.robjects.packages import importr\nimportr('e1071')\n\n\n# configure the data set\nSAMPLES = 50\ntrainingDataClassless = numpy.random.random((SAMPLES, 7))\ntrainingDataClasses = numpy.where(numpy.random.random((SAMPLES, 1)) &gt; 0.5, 0.0, 1.0)\ntrainingDataFactorClasses = rpy2.robjects.FactorVector(trainingDataClasses)\n\n# create the args for the svm\nsvmargs = {\"x\": trainingDataClassless, \"y\": trainingDataFactorClasses, \"probability\": True,\n           \"kernel\": \"linear\", \"type\": \"C-classification\"}\n\nprint(\"Starting SVM with parameters: %s\" % (svmargs,))\nsvmObj = rpy2.robjects.r['svm'](**svmargs)\n\nprint(\"SVM Analysis\")\npredictOutcomes = rpy2.robjects.r['predict'](svmObj, trainingDataClassless, probability=True)\nprint(\"outcomes: %s\" % (predictOutcomes,))\nprobs = rpy2.robjects.r['attr'](predictOutcomes, \"probabilities\")\nprint(\"probs: %s\" % (probs,)) # should NOT be NULL!\n</code></pre>\n\n<p>More info on the predict function in R (with a working probability example) can be found on the <a href=\"https://cran.r-project.org/web/packages/e1071/e1071.pdf\" rel=\"nofollow\">e1071 documentation</a> on page 39.</p>\n"}, {"tags": ["python", "django", "django-templates", "django-views"], "comments": [{"owner": {"reputation": 265, "user_id": 1593443, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f0301be65f5b32c24ce5610f16a673c?s=128&d=identicon&r=PG", "display_name": "Chris McGinlay", "link": "https://stackoverflow.com/users/1593443/chris-mcginlay"}, "edited": false, "score": 0, "creation_date": 1440702251, "post_id": 32238020, "comment_id": 52394968, "body": "Does that &quot;cannot import name &#39;views&#39;&quot; error occur in the root urls.py? I suspect it does, because you have <code>from . import views</code>. The dot means to import from the same directory as the urls.py file, but if you look you will find that your views.py file is not in that directory, it is (or should be) in polls/views.py, so you should use <code>from polls import views</code> in the root urls.py.  The <code>from . import views</code> command would be what you&#39;d put in polls/urls.py."}, {"owner": {"reputation": 81, "user_id": 5017102, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3ad6ec18e0a05b5cbb218c4598356cf?s=128&d=identicon&r=PG&f=1", "display_name": "NotInternetExplorer", "link": "https://stackoverflow.com/users/5017102/notinternetexplorer"}, "reply_to_user": {"reputation": 265, "user_id": 1593443, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f0301be65f5b32c24ce5610f16a673c?s=128&d=identicon&r=PG", "display_name": "Chris McGinlay", "link": "https://stackoverflow.com/users/1593443/chris-mcginlay"}, "edited": false, "score": 0, "creation_date": 1440978677, "post_id": 32238020, "comment_id": 52480758, "body": "@Chris McGinlay I did that and now I&#39;m getting an error that says, &quot;TemplateDoesNotExist at /polls/&quot; and below that it lists &quot;index.html, polls/question_list.html&quot;. I just realized I don&#39;t have those html files, so it&#39;s calling files that actually aren&#39;t there haha. I&#39;ll create them and see if that fixes the problem :)"}], "answers": [{"comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1440630594, "post_id": 32238130, "comment_id": 52358509, "body": "These are the old template settings. The OP is using Django 1.8, which has a new <code>TEMPLATES</code> setting."}, {"owner": {"reputation": 121, "user_id": 1770053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a986bd0cda7a343c1d720e5377f117b1?s=128&d=identicon&r=PG", "display_name": "nixdaemon", "link": "https://stackoverflow.com/users/1770053/nixdaemon"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1440630662, "post_id": 32238130, "comment_id": 52358525, "body": "I am using it in django 1.8.4 without any issues. You can at least try this to see if the issue is fixed then next step would be to migrate towards new configuration."}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1440630833, "post_id": 32238130, "comment_id": 52358577, "body": "Yes, you can use the old settings in 1.8, but you should not mix the new and old settings. Since the OP is already using <code>TEMPLATES</code>, they don&#39;t gain anything by switching to the old settings."}, {"owner": {"reputation": 121, "user_id": 1770053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a986bd0cda7a343c1d720e5377f117b1?s=128&d=identicon&r=PG", "display_name": "nixdaemon", "link": "https://stackoverflow.com/users/1770053/nixdaemon"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1440631043, "post_id": 32238130, "comment_id": 52358642, "body": "i agree. Try this: &#39;DIRS&#39;: [os.path.join(BASE_DIR, &#39;templates&#39;), ],         &#39;APP_DIRS&#39;: True,   -&gt; this goes inside TEMPLATES as indicated by Alasdair :)"}, {"owner": {"reputation": 81, "user_id": 5017102, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3ad6ec18e0a05b5cbb218c4598356cf?s=128&d=identicon&r=PG&f=1", "display_name": "NotInternetExplorer", "link": "https://stackoverflow.com/users/5017102/notinternetexplorer"}, "edited": false, "score": 0, "creation_date": 1440631553, "post_id": 32238130, "comment_id": 52358776, "body": "@Chris McGinlay I changed the &#39;DIRS&#39; section like you said. I&#39;ll include the Loader post-mortem in an edit of my original post."}], "tags": [], "owner": {"reputation": 121, "user_id": 1770053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a986bd0cda7a343c1d720e5377f117b1?s=128&d=identicon&r=PG", "display_name": "nixdaemon", "link": "https://stackoverflow.com/users/1770053/nixdaemon"}, "is_accepted": false, "score": -1, "last_activity_date": 1440630542, "creation_date": 1440630542, "answer_id": 32238130, "question_id": 32238020, "link": "https://stackoverflow.com/questions/32238020/django-templatedoesnotexist-tried-numerous-different-things-already/32238130#32238130", "title": "Django: TemplateDoesNotExist. Tried numerous different things already", "body": "<p>Try this:</p>\n\n<pre><code>BASE_DIR = os.path.dirname(os.path.dirname(__file__))\n\nINSTALLED_APPS = (\n...\n    'polls',\n)\n\nTEMPLATE_PATH = os.path.join(BASE_DIR, 'templates')\n\nTEMPLATE_DIRS = (\n    TEMPLATE_PATH,\n)\n</code></pre>\n\n<p>with this your templates should be inside \"polls/templates\" directory or in the main \"templates\" directory</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5017102, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3ad6ec18e0a05b5cbb218c4598356cf?s=128&d=identicon&r=PG&f=1", "display_name": "NotInternetExplorer", "link": "https://stackoverflow.com/users/5017102/notinternetexplorer"}, "edited": false, "score": 0, "creation_date": 1440631907, "post_id": 32238151, "comment_id": 52358872, "body": "I already have a polls directory in the &#39;polls/templates&#39; file. Yeah I agree with you about the views, as soon as I noticed it I could feel problems inbound. Problem is the tutorial wasn&#39;t exactly clear about placing the views files :("}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 81, "user_id": 5017102, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3ad6ec18e0a05b5cbb218c4598356cf?s=128&d=identicon&r=PG&f=1", "display_name": "NotInternetExplorer", "link": "https://stackoverflow.com/users/5017102/notinternetexplorer"}, "edited": false, "score": 0, "creation_date": 1440634044, "post_id": 32238151, "comment_id": 52359425, "body": "To solve the import error, please show your root urls.py. Note that you should have <code>template_name = &#39;polls&#47;index.html&#39;</code> to be consistent with your other views."}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": false, "score": 2, "last_activity_date": 1440631126, "last_edit_date": 1440631126, "creation_date": 1440630644, "answer_id": 32238151, "question_id": 32238020, "link": "https://stackoverflow.com/questions/32238020/django-templatedoesnotexist-tried-numerous-different-things-already/32238151#32238151", "title": "Django: TemplateDoesNotExist. Tried numerous different things already", "body": "<p>You shouldn't have to include the polls directory in your <code>DIRS</code> setting. Django will find it because you have <code>APP_DIRS</code> set to <code>True</code>.</p>\n\n<p>So you can change <code>DIRS</code> back to.</p>\n\n<pre><code>'DIRS': [os.path.join(BASE_DIR,'templates')],\n</code></pre>\n\n<p>Now, note that there should be a <code>polls</code> directory inside <code>polls/templates</code> for example the details template should be at <code>polls/templates/polls/details.html</code>.</p>\n\n<p>Finally, stick with the tutorial, and keep the polls views in <code>polls/views.py</code>. Having two similar files <code>forumtest/views.py</code> and <code>polls/views.py</code> is going to make things very confusing.</p>\n"}, {"comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1440630907, "post_id": 32238154, "comment_id": 52358601, "body": "+1 The &#39;Django tried loading these templates, in this order&#39; should contain the required information to solve the problem."}, {"owner": {"reputation": 81, "user_id": 5017102, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3ad6ec18e0a05b5cbb218c4598356cf?s=128&d=identicon&r=PG&f=1", "display_name": "NotInternetExplorer", "link": "https://stackoverflow.com/users/5017102/notinternetexplorer"}, "edited": false, "score": 0, "creation_date": 1440631403, "post_id": 32238154, "comment_id": 52358744, "body": "@ChrisMcGinlay I changed the &#39;DIRS&#39; to have just &#39;templates. Gere"}], "tags": [], "owner": {"reputation": 265, "user_id": 1593443, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f0301be65f5b32c24ce5610f16a673c?s=128&d=identicon&r=PG", "display_name": "Chris McGinlay", "link": "https://stackoverflow.com/users/1593443/chris-mcginlay"}, "is_accepted": false, "score": 3, "last_activity_date": 1440630670, "creation_date": 1440630670, "answer_id": 32238154, "question_id": 32238020, "link": "https://stackoverflow.com/questions/32238020/django-templatedoesnotexist-tried-numerous-different-things-already/32238154#32238154", "title": "Django: TemplateDoesNotExist. Tried numerous different things already", "body": "<p>I think that the templates DIRS in the TEMPLATES setting should be as it was:</p>\n\n<p><code>'DIRS': [os.path.join (BASE_DIR,'templates')],</code></p>\n\n<p>Having <code>'APP_DIRS': True,</code> should pull in the templates from all your apps.</p>\n\n<p>When you obtain the dreaded 'TemplateDoesNotExist at ...' message in your browser, it will probably help to look down to the Template Loader post-mortem:</p>\n\n<p><strong>Django tried loading these templates, in this order:</strong></p>\n\n<p>Hopefully that will give some clues - could you post it here?</p>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 2578821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45945d87576a6f1b28628b9ee1180eba?s=128&d=identicon&r=PG", "display_name": "Jermaine", "link": "https://stackoverflow.com/users/2578821/jermaine"}, "is_accepted": false, "score": 0, "last_activity_date": 1495371293, "creation_date": 1495371293, "answer_id": 44097120, "question_id": 32238020, "link": "https://stackoverflow.com/questions/32238020/django-templatedoesnotexist-tried-numerous-different-things-already/44097120#44097120", "title": "Django: TemplateDoesNotExist. Tried numerous different things already", "body": "<p>Had the same problem, open that file in finder or outside the text editor/IDE and rename it, also check the extension.</p>\n"}], "owner": {"reputation": 81, "user_id": 5017102, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3ad6ec18e0a05b5cbb218c4598356cf?s=128&d=identicon&r=PG&f=1", "display_name": "NotInternetExplorer", "link": "https://stackoverflow.com/users/5017102/notinternetexplorer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1432, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1495371293, "creation_date": 1440629769, "last_edit_date": 1440634423, "question_id": 32238020, "link": "https://stackoverflow.com/questions/32238020/django-templatedoesnotexist-tried-numerous-different-things-already", "title": "Django: TemplateDoesNotExist. Tried numerous different things already", "body": "<p>I know this is a common issue apparently, but I've gone through a bunch of examples and can't find a solution.</p>\n\n<p>I'm doing the tutorial of django1.8. so I'm not sure if this is a glitch or not. I've tried moving my template file to multiple locations, but so far nothing has worked.</p>\n\n<p>I have my project structured in this way: my project is called \"forumtest\" and it's inside a virtualenv called \"venv\". Forumtest has one app called \"polls\". I had the \"templates\" folder stored inside the root directory of \"forumtest\", but I just moved it inside the \"polls\" directory. However, I got the same result.</p>\n\n<p>As of now, my settings.py file looks like this:</p>\n\n<pre><code>\"\"\"\nDjango settings for forumtest project.\n\nGenerated by 'django-admin startproject' using Django 1.8.3.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/1.8/topics/settings/\n\nFor the full list of settings and their values, see\n https://docs.djangoproject.com/en/1.8/ref/settings/\n\"\"\"\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nimport os\n\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/1.8/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = '$nnwkm0ln!$77m1n!%wv-5)k_rhs=-p-)xr-c-+m985w3jq#*='\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\n\nALLOWED_HOSTS = []\n\n\n# Application definition\n\nINSTALLED_APPS = (\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'polls',\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.auth.middleware.SessionAuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n    'django.middleware.security.SecurityMiddleware',\n)\n\nROOT_URLCONF = 'forumtest.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join (BASE_DIR,'C:/Desktop/Users/Owner/forumtest/polls/templates')],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'forumtest.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/1.8/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'forumtest',\n        'USER': 'admin',\n        'PASSWORD': 'aldotheapache12',\n        'HOST': 'localhost',\n        'PORT': '',\n    }\n}\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/1.8/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/1.8/howto/static-files/\n\nSTATIC_URL = '/static/'\n</code></pre>\n\n<p>The 'DIRS' section which looks like this:</p>\n\n<pre><code>'DIRS': [os.path.join (BASE_DIR,'C:/Desktop/Users/Owner/forumtest/polls/templates')], \n</code></pre>\n\n<p>Previously looked like this:</p>\n\n<pre><code>'DIRS': [os.path.join (BASE_DIR,'templates')],\n</code></pre>\n\n<p>My views file, stored under the \"forumtest\" directory looks like this:</p>\n\n<pre><code>from django.shortcuts import render,get_object_or_404\nfrom django.http import HttpResponseRedirect,HttpResponse\nfrom django.core.urlresolvers import reverse\nfrom django.views import generic\n\nfrom polls.models import Choice,Question\n\n# Create your views here.\nclass IndexView(generic.ListView):\n    template_name = 'index.html'\n    context_object_name = 'latest_question_list'\n\n    def get_queryset(self):\n        \"\"\"Return the last five published questions\"\"\"\n        return Question.objects.order_by('-pub_date')[:5]\n\nclass DetailView(generic.DetailView):\n    model = Question\n    template_name = 'polls/detail.html'\n\nclass ResultsView(generic.DetailView):\n    model = Question\n    template_name = 'polls/results.html'\n\ndef vote(request,question_id):\n    p = get_object_or_404(Question, pk=question_id)\n    try:\n        selected_choice = p.choice_set.get(pk=request.POST['choice'])\n    except(KeyError,Choice.DoesNotExist):\n        #redisplay the question voting form\n        return render(request,'polls/detail.html',{\n            'question':p,\n            'error_message': \"you didn't select a choice.\",\n        })\n    else:\n        selected_choice.votes += 1\n        selected_choice.save()\n        # Always return an HttpResponseRedirect after successfully dealing\n        # with POST data. This prevents data from being posted twice if a\n        # user hits the Back button.\n        return HttpResponseRedirect(reverse('polls:results', args=(p.id,)))\n</code></pre>\n\n<p>I have the exact same views file under \"polls\", except with this line (I'm aware that this may be an issue:</p>\n\n<pre><code>from .models import Choice,Question\n</code></pre>\n\n<p>Please let me know how I can solve this. Thanks guys!</p>\n\n<p>EDIT: as per requested by @Chris McGinlay, here's the template loader post-mortem:</p>\n\n<pre><code>Django tried loading these templates, in this order:\nUsing loader django.template.loaders.filesystem.Loader:\nC:\\Users\\Owner\\Desktop\\venv\\forumtest\\templates\\index.html, polls\\question_list.html (File does not exist)\nUsing loader django.template.loaders.app_directories.Loader:\nC:\\Users\\Owner\\Desktop\\venv\\lib\\site-packages\\django\\contrib\\admin\\templates\\index.html, polls\\question_list.html (File does not exist)\nC:\\Users\\Owner\\Desktop\\venv\\lib\\site-packages\\django\\contrib\\auth\\templates\\index.html, polls\\question_list.html (File does not exist)\nC:\\Users\\Owner\\Desktop\\venv\\forumtest\\polls\\templates\\index.html, polls\\question_list.html (File does not exist)\n</code></pre>\n\n<p>Thanks for all your comments, guys!</p>\n\n<p>EDIT: So I deleted the extra views file located under the 'forumtest/forumtest' directory, and now I'm getting an error that says</p>\n\n<pre><code>cannot import name 'views'\n</code></pre>\n\n<p>:(</p>\n\n<p>EDIT: @Alasdair here's the root urls.py file:</p>\n\n<pre><code>from django.conf.urls import include, url\nfrom django.contrib import admin\n\nfrom . import views\n\n\nurlpatterns = [\n    # ex: /polls/\n    url(r'^$', views.IndexView.as_view(), name='index'),\n    url(r'^polls/', include('polls.urls',namespace=\"polls\")),\n    url(r'^admin/', include(admin.site.urls)),\n]\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 3457, "user_id": 2708667, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da3688bbbf608ce43f998f63651088d6?s=128&d=identicon&r=PG&f=1", "display_name": "santon", "link": "https://stackoverflow.com/users/2708667/santon"}, "is_accepted": false, "score": 1, "last_activity_date": 1440646091, "creation_date": 1440646091, "answer_id": 32240192, "question_id": 32238004, "link": "https://stackoverflow.com/questions/32238004/chopping-up-a-pandas-data-frame-of-irregular-time-intervals-into-day-boundaries/32240192#32240192", "title": "Chopping up a Pandas data frame of irregular time intervals into day boundaries", "body": "<p>I couldn't think of a nice way to vectorize the answer, but here's a hack that gets the basic logic. There's surely a way to generate something cleaner than this, but maybe this is all you need.</p>\n\n<pre><code>x = pd.DataFrame({'start_time': ['2012-01-01 23:00', '2012-01-03 02:00', '2012-01-04 22:00'], \n                  'end_time': ['2012-01-02 02:00', '2012-01-03 05:00', '2012-01-05 2:00'], \n                  'count': [3, 5, 1]})\nx['start_time'] = pd.to_datetime(x['start_time'])\nx['end_time'] = pd.to_datetime(x['end_time'])\n\nfrom collections import Counter\nstrip_time = lambda x: pd.datetime(x.year, x.month, x.day)\n\nc = Counter()\nfor _, row in x.iterrows():\n    if row['start_time'].day == row['end_time'].day:\n        c[strip_time(row['start_time'])] += row['count']\n    else:\n        delta_t = row['end_time'] - row['start_time']\n        c[strip_time(row['start_time'])] += row['count'] * (strip_time(row['end_time']) - row['start_time'])/delta_t\n        c[strip_time(row['end_time'])] += row['count'] * (row['end_time'] - strip_time(row['end_time']))/delta_t\n\ns = pd.Series(c)\n\n# s:\n2012-01-01    1.0\n2012-01-02    2.0\n2012-01-03    5.0\n2012-01-04    0.5\n2012-01-05    0.5\ndtype: float64\n</code></pre>\n"}], "owner": {"reputation": 27877, "user_id": 231588, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/k2iEi.png?s=128&g=1", "display_name": "grautur", "link": "https://stackoverflow.com/users/231588/grautur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440646091, "creation_date": 1440629643, "question_id": 32238004, "link": "https://stackoverflow.com/questions/32238004/chopping-up-a-pandas-data-frame-of-irregular-time-intervals-into-day-boundaries", "title": "Chopping up a Pandas data frame of irregular time intervals into day boundaries", "body": "<p>I have a data frame that looks like the following:</p>\n\n<pre><code>import pandas as pd\nx = pd.DataFrame({'start_time': ['2012-01 23:00', '2012-02 02:00', '2012-02 05:00'], 'end_time': ['2012-02 02:00', '2012-02 05:00', '2012-02 9:00'], 'count': [3, 5, 1]})\n\n'''\nstart_time,end_time,count\n2012-01 23:00,2012-02 02:00,3\n2012-02 01:00,2012-02 05:00,5\n'''\n</code></pre>\n\n<p>For example, the first row might represent the fact that there were 3 sales between Jan 1 11p - Jan 2 1a.</p>\n\n<p>These time intervals cross day boundaries, but I want to be able to get a rough estimate of how many sales there were per day. So in the example above, I want the row representing 3 sales between 11p-2a to be divided into two rows:</p>\n\n<ol>\n<li>One row from 11p-midnight, with 1 sale. (because there were originally 3 hours for 3 sales, and now there's only 1 hour, so 1/3 * 3 = 1)</li>\n<li>Another row from midnight-2a, with 2 sales.</li>\n</ol>\n\n<p>Is there an easy way to do this?</p>\n"}, {"tags": ["python", "list", "python-3.x"], "comments": [{"owner": {"reputation": 3144, "user_id": 5270506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNVBw.jpg?s=128&g=1", "display_name": "Farhan.K", "link": "https://stackoverflow.com/users/5270506/farhan-k"}, "edited": false, "score": 0, "creation_date": 1518522110, "post_id": 32237981, "comment_id": 84532164, "body": "<code>from collections import defaultdict; new = defaultdict()</code> then <code>for i, j in enumerate(myList): q[j].append(i)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 4, "last_activity_date": 1440630160, "last_edit_date": 1440630160, "creation_date": 1440629857, "answer_id": 32238035, "question_id": 32237981, "link": "https://stackoverflow.com/questions/32237981/how-to-find-2-items-in-a-list-that-are-the-same-in-python/32238035#32238035", "title": "How to find 2 items in a list that are the same in Python", "body": "<p>You can use <code>enumerate</code> to get the pairs contain index of each element and the element itself then loop over it and store the items as key and indices as values using a <a href=\"https://docs.python.org/3/library/collections.html#collections.OrderedDict\" rel=\"nofollow\"><code>collections.OrderedDict</code></a> (to preserve the order) and <a href=\"https://docs.python.org/3/library/stdtypes.html#dict.setdefault\" rel=\"nofollow\"><code>dict.setdefault</code></a> method:</p>\n\n<pre><code>&gt;&gt;&gt; from collections import OrderedDict\n&gt;&gt;&gt; d=OrderedDict()\n&gt;&gt;&gt; for i,j in enumerate(mylist):\n...     d.setdefault(j,[]).append(i)\n... \n\n&gt;&gt;&gt; d.values()\n[[0, 3], [1], [2], [4, 5], [6], [7]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1709, "user_id": 2914896, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Yup3g.png?s=128&g=1", "display_name": "Arijoon", "link": "https://stackoverflow.com/users/2914896/arijoon"}, "is_accepted": true, "score": 1, "last_activity_date": 1440629999, "creation_date": 1440629999, "answer_id": 32238065, "question_id": 32237981, "link": "https://stackoverflow.com/questions/32237981/how-to-find-2-items-in-a-list-that-are-the-same-in-python/32238065#32238065", "title": "How to find 2 items in a list that are the same in Python", "body": "<p>I would use a dictionary:</p>\n\n<pre><code>mylist = [1,2,3,1,4,4,5,6]\ndic = {}\n\nfor i in range(0,len(mylist)):\n    if mylist[i] in dic:\n        dic[mylist[i]].append(i)\n    else:\n        dic[mylist[i]] = [i]\nprint dic.values()\n# prints [[0, 3], [1], [2], [4, 5], [6], [7]]\n</code></pre>\n"}], "owner": {"reputation": 3144, "user_id": 5270506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNVBw.jpg?s=128&g=1", "display_name": "Farhan.K", "link": "https://stackoverflow.com/users/5270506/farhan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 32238065, "answer_count": 2, "score": 2, "last_activity_date": 1440630160, "creation_date": 1440629540, "question_id": 32237981, "link": "https://stackoverflow.com/questions/32237981/how-to-find-2-items-in-a-list-that-are-the-same-in-python", "title": "How to find 2 items in a list that are the same in Python", "body": "<p>I have a list populated with ~100 names. The names in this list either occur once or twice and I would like to go through the list to find names that occur <em>twice</em> and names that only occur <em>once</em>. I will also need the position of the reoccurring names in the list and the positions of the names that only appear once.</p>\n\n<p>I'm not sure how I would go about doing this because all the methods I can think of are inefficient as they would go through the whole list even if they have already found a match. Other methods that I can think of would return two duplicate positions. The names that occur twice will not necessarily be adjacent to each other.</p>\n\n<p>For example, if this was the list:</p>\n\n<pre><code>mylist = [ 1, 2, 3, 1, 4, 4, 5, 6]\n</code></pre>\n\n<p>I would need something that outputs (something like):</p>\n\n<pre><code>[[0,3],[1],[2],[4,5],[6],[7]]\n</code></pre>\n\n<p>With those numbers being the positions of the duplicate names and the position of the names that occur once.</p>\n\n<p>I am by no means an expert so any help would be appreciated.</p>\n"}, {"tags": ["python", "deployment", "flask", "hosting"], "answers": [{"comments": [{"owner": {"reputation": 28103, "user_id": 248616, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c0813ef73a1a468d754775e4cb276abe?s=128&d=identicon&r=PG", "display_name": "Nam G VU", "link": "https://stackoverflow.com/users/248616/nam-g-vu"}, "edited": false, "score": 0, "creation_date": 1440631732, "post_id": 32238047, "comment_id": 52358820, "body": "May you brief steps to get the wap run under Apache? Great thanks!"}, {"owner": {"reputation": 2258, "user_id": 5270172, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2VVKW.jpg?s=128&g=1", "display_name": "Kelly Keller-Heikkila", "link": "https://stackoverflow.com/users/5270172/kelly-keller-heikkila"}, "reply_to_user": {"reputation": 28103, "user_id": 248616, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c0813ef73a1a468d754775e4cb276abe?s=128&d=identicon&r=PG", "display_name": "Nam G VU", "link": "https://stackoverflow.com/users/248616/nam-g-vu"}, "edited": false, "score": 1, "creation_date": 1440633496, "post_id": 32238047, "comment_id": 52359281, "body": "The link I posted describes how to configure Apache to run flask apps quite well (those are the instructions I followed myself). If you don&#39;t know how to install apache, just run <code>sudo apt-get install apache2</code> if you&#39;re using ubuntu. If you need more help than that, I suggest googling it and learning more about apache."}, {"owner": {"reputation": 28103, "user_id": 248616, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c0813ef73a1a468d754775e4cb276abe?s=128&d=identicon&r=PG", "display_name": "Nam G VU", "link": "https://stackoverflow.com/users/248616/nam-g-vu"}, "edited": false, "score": 0, "creation_date": 1440633722, "post_id": 32238047, "comment_id": 52359333, "body": "Got tht @Brian Keller-Heikkila."}], "tags": [], "owner": {"reputation": 2258, "user_id": 5270172, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2VVKW.jpg?s=128&g=1", "display_name": "Kelly Keller-Heikkila", "link": "https://stackoverflow.com/users/5270172/kelly-keller-heikkila"}, "is_accepted": true, "score": 3, "last_activity_date": 1440629935, "creation_date": 1440629935, "answer_id": 32238047, "question_id": 32237964, "link": "https://stackoverflow.com/questions/32237964/how-to-run-flask-python-website-permanently/32238047#32238047", "title": "How to run flask python website permanently?", "body": "<p>You need to use a regular web server, such as apache2. You can't use the python server for production purposes. Here is how you do it with apache: <a href=\"http://flask.pocoo.org/docs/0.10/deploying/mod_wsgi/\" rel=\"nofollow\">http://flask.pocoo.org/docs/0.10/deploying/mod_wsgi/</a></p>\n"}], "owner": {"reputation": 28103, "user_id": 248616, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c0813ef73a1a468d754775e4cb276abe?s=128&d=identicon&r=PG", "display_name": "Nam G VU", "link": "https://stackoverflow.com/users/248616/nam-g-vu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 0, "accepted_answer_id": 32238047, "answer_count": 1, "score": 0, "last_activity_date": 1440629935, "creation_date": 1440629435, "question_id": 32237964, "link": "https://stackoverflow.com/questions/32237964/how-to-run-flask-python-website-permanently", "title": "How to run flask python website permanently?", "body": "<p>I'm following <a href=\"http://flask.pocoo.org/docs/0.10/quickstart/\" rel=\"nofollow\">Flask Quickstart guide</a> and can run my web app via <a href=\"http://myip.com:5000\" rel=\"nofollow\">http://myip.com:5000</a>.</p>\n\n<p>One issue is that my web is only accessible as long as I keep my SSH remote connection session - when I sleep/shutdown my PC, the website shutdown too.</p>\n\n<p>How can I make it permanent available?</p>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 2366, "user_id": 621201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0dae3b36598f2b55e86fe1e906497a5?s=128&d=identicon&r=PG", "display_name": "maurits", "link": "https://stackoverflow.com/users/621201/maurits"}, "edited": false, "score": 0, "creation_date": 1483997267, "post_id": 32237954, "comment_id": 70319880, "body": "I wanted to ask the same question. This is still true for me today with <code>pip 9.0.1</code> and Python 2.7. When I install <code>requests</code> with either <code>--target</code> or <code>--prefix</code> and add it to the <code>PYTHONPATH</code> I can import it just fine. But with namespace packages <code>zest.releaser</code> and <code>zope.interface</code> it fails. When I install those normally without target or prefix, all is well. Background <a href=\"https://github.com/buildout/buildout/issues/319#issuecomment-271017185\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 2366, "user_id": 621201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0dae3b36598f2b55e86fe1e906497a5?s=128&d=identicon&r=PG", "display_name": "maurits", "link": "https://stackoverflow.com/users/621201/maurits"}, "edited": false, "score": 0, "creation_date": 1483997484, "post_id": 32237954, "comment_id": 70319998, "body": "Interestingly, it fails for me with Python2.7, but works fine with Python 3.3."}, {"owner": {"reputation": 254, "user_id": 399500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc74e57ffe93e6b718dccf0eaec5ed59?s=128&d=identicon&r=PG", "display_name": "gnathan", "link": "https://stackoverflow.com/users/399500/gnathan"}, "reply_to_user": {"reputation": 2366, "user_id": 621201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0dae3b36598f2b55e86fe1e906497a5?s=128&d=identicon&r=PG", "display_name": "maurits", "link": "https://stackoverflow.com/users/621201/maurits"}, "edited": false, "score": 0, "creation_date": 1484059299, "post_id": 32237954, "comment_id": 70347423, "body": "Thanks for commenting. Perhaps we should raise the issue with <code>pip</code>?"}, {"owner": {"reputation": 2366, "user_id": 621201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0dae3b36598f2b55e86fe1e906497a5?s=128&d=identicon&r=PG", "display_name": "maurits", "link": "https://stackoverflow.com/users/621201/maurits"}, "edited": false, "score": 0, "creation_date": 1484868816, "post_id": 32237954, "comment_id": 70699755, "body": "I have found an existing issue in the pip tracker that talks about this and presents a solution. I have added an answer for that."}], "answers": [{"comments": [{"owner": {"reputation": 254, "user_id": 399500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc74e57ffe93e6b718dccf0eaec5ed59?s=128&d=identicon&r=PG", "display_name": "gnathan", "link": "https://stackoverflow.com/users/399500/gnathan"}, "edited": false, "score": 0, "creation_date": 1484924924, "post_id": 41753634, "comment_id": 70724741, "body": "Awesome, thanks! We long ago moved on and used a different solution, so I can&#39;t really verify this fix, but I&#39;ll accept the answer."}], "tags": [], "owner": {"reputation": 2366, "user_id": 621201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0dae3b36598f2b55e86fe1e906497a5?s=128&d=identicon&r=PG", "display_name": "maurits", "link": "https://stackoverflow.com/users/621201/maurits"}, "is_accepted": true, "score": 2, "last_activity_date": 1484868777, "creation_date": 1484868777, "answer_id": 41753634, "question_id": 32237954, "link": "https://stackoverflow.com/questions/32237954/pip-install-t-doesnt-work-with-namespace-packages/41753634#41753634", "title": "`pip install -t` doesn&#39;t work with namespace packages", "body": "<p>It works when you do this:</p>\n\n<pre><code>import site\nsite.addsitedir('some_dir')\n</code></pre>\n\n<p>See <a href=\"https://docs.python.org/2/library/site.html#site.addsitedir\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/site.html#site.addsitedir</a></p>\n\n<p>I found this answer in a post by Matt Iversen (Ivoz) in this <a href=\"https://github.com/pypa/pip/issues/1924\" rel=\"nofollow noreferrer\">pip issue</a>. Note that talk in this issue continues about some corner cases you might run into.</p>\n"}], "owner": {"reputation": 254, "user_id": 399500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc74e57ffe93e6b718dccf0eaec5ed59?s=128&d=identicon&r=PG", "display_name": "gnathan", "link": "https://stackoverflow.com/users/399500/gnathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "accepted_answer_id": 41753634, "answer_count": 1, "score": 4, "last_activity_date": 1484868777, "creation_date": 1440629368, "question_id": 32237954, "link": "https://stackoverflow.com/questions/32237954/pip-install-t-doesnt-work-with-namespace-packages", "title": "`pip install -t` doesn&#39;t work with namespace packages", "body": "<p>When I install a package with <code>pip install -t some_dir</code>, I can usually then add <code>some_dir</code> to my PYTHONPATH when running python and import the package.  Like this:</p>\n\n<pre><code>~/dev/scratch [venv] \u00bb pip install -t some_dir pytest\n...\nSuccessfully installed py pytest\n~/dev/scratch [venv]  \u00bb PYTHONPATH=some_dir python\n...\n&gt;&gt;&gt; import pytest\n&gt;&gt;&gt;\n</code></pre>\n\n<p>However, I recently added the library \"stompest\" to my dependencies, which is apparently a \"namespace package\" (not entirely sure what that means).  It doesn't seem to work with this same pattern:</p>\n\n<pre><code>~/dev/scratch [venv]  \u00bb pip install -t some_dir stompest\n...\nSuccessfully installed stompest\n~/dev/scratch [venv]  \u00bb PYTHONPATH=some_dir python\n...\n&gt;&gt;&gt; import stompest.config\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named stompest.config\n</code></pre>\n\n<p>It works fine if I just install stompest normally (into a virtual environment, say):</p>\n\n<pre><code>~/dev/scratch [venv]  \u00bb pip install stompest\n...\nSuccessfully installed stompest-2.1.6\n~/dev/scratch [venv]  \u00bb python\n...\n&gt;&gt;&gt; import stompest.config\n&gt;&gt;&gt;\n</code></pre>\n\n<p>The problem seems to be that pip(?) lays down a <code>.pth</code> file that expects to be in the site-dir (notice <code>f_locals['sitedir']</code> below):</p>\n\n<pre><code>~/dev/scratch [venv]  \u00bb cat some_dir/stompest-2.1.6-py2.7-nspkg.pth\nimport sys,types,os; p = os.path.join(sys._getframe(1).f_locals['sitedir'], *('stompest',)); ie = os.path.exists(os.path.join(p,'__init__.py')); m = not ie and sys.modules.setdefault('stompest',types.ModuleType('stompest')); mp = (m or []) and m.__dict__.setdefault('__path__',[]); (p not in mp) and mp.append(p)\n</code></pre>\n\n<p>I tried also setting <code>PYTHONUSERBASE=some_dir</code>, but that didn't seem to make any difference.  It seems like a similar issue to <a href=\"https://github.com/pypa/pip/issues/3\" rel=\"nofollow\">this one</a>, which suggests using <code>--egg</code> as a workaround.  I can't get <code>--egg</code> to work with <code>-t</code>, though, because I get an error that I am \"attempting to install a package to a directory that is not on PYTHONPATH and which Python does not read \".pth\" files from.\"  The problem is that I can't add the directory to PYTHONPATH because it seems to be trying to install to a temporary directory:</p>\n\n<pre><code>~/dev/scratch [venv]  \u00bb PYTHONPATH=some_dir pip install -t some_dir --egg stompest\nCollecting stompest\n  Using cached stompest-2.1.6.tar.gz\nInstalling collected packages: stompest\n  Running setup.py install for stompest\n    Complete output from command /home/nalderso/dev/scratch/venv/bin/python -c \"import setuptools, tokenize;__file__='/tmp/pip-build-Wc3oaO/stompest/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-fZlXM2-record/install-record.txt --compile --install-headers /home/nalderso/dev/scratch/venv/include/site/python2.7/stompest --home=/tmp/tmpHNVOP0:\n    running install\n    Checking .pth file support in /tmp/tmpHNVOP0/lib/python/\n    /home/nalderso/dev/scratch/venv/bin/python -E -c pass\n    TEST FAILED: /tmp/tmpHNVOP0/lib/python/ does NOT support .pth files\n    error: bad install directory or PYTHONPATH\n\n    You are attempting to install a package to a directory that is not\n    on PYTHONPATH and which Python does not read \".pth\" files from.  The\n    installation directory you specified (via --install-dir, --prefix, or\n    the distutils default setting) was:\n\n        /tmp/tmpHNVOP0/lib/python/\n\n    and your PYTHONPATH environment variable currently contains:\n\n        'some_dir'\n\n    Here are some of your options for correcting the problem:\n\n    * You can choose a different installation directory, i.e., one that is\n      on PYTHONPATH or supports .pth files\n\n    * You can add the installation directory to the PYTHONPATH environment\n      variable.  (It must then also be on PYTHONPATH whenever you run\n      Python and want to use the package(s) you are installing.)\n\n    * You can set up the installation directory to support \".pth\" files by\n      using one of the approaches described here:\n\n      https://pythonhosted.org/setuptools/easy_install.html#custom-installation-locations\n\n    Please make the appropriate changes for your system and try again.\n\n    ----------------------------------------\nCommand \"/home/nalderso/dev/scratch/venv/bin/python -c \"import setuptools, tokenize;__file__='/tmp/pip-build-Wc3oaO/stompest/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-fZlXM2-record/install-record.txt --compile --install-headers /home/nalderso/dev/scratch/venv/include/site/python2.7/stompest --home=/tmp/tmpHNVOP0\" failed with error code 1 in /tmp/pip-build-Wc3oaO/stompest\n</code></pre>\n\n<p>Am I doing something wrong, or is this an issue with <code>pip</code>?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 1, "creation_date": 1440629465, "post_id": 32237898, "comment_id": 52358168, "body": "Did you try <code>df[&#39;test&#39;] = [str(int(x) + 1) for x in df[&#39;Start&#39;]]</code>?"}, {"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "reply_to_user": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1440629654, "post_id": 32237898, "comment_id": 52358227, "body": "I did, and it throws the same &#39;Invalid literal for long() with base 10:...&#39; error."}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1440629940, "post_id": 32237898, "comment_id": 52358329, "body": "What was the error when you used both <code>split</code> and <code>int</code>? The full error, with no ellipsis."}, {"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "reply_to_user": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1440630024, "post_id": 32237898, "comment_id": 52358355, "body": "Traceback (most recent call last):   File &quot;/Users/selasady/impala_scripts/testing.py&quot;, line 21, in &lt;module&gt;     df[&#39;test&#39;] = [str(int(x) + 1) for x in df[&#39;start&#39;]] ValueError: invalid literal for int() with base 10: &#39;101,102,&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "edited": false, "score": 0, "creation_date": 1440629724, "post_id": 32237989, "comment_id": 52358252, "body": "Thanks, I tried this, and got, &quot;AttributeError: &#39;Series&#39; object has no attribute &#39;split&#39;.&quot; So i added &#39;str.split(&#39;,&#39;) and got &quot;TypeError: int() argument must be a string or a number, not &#39;list&#39;&quot;"}, {"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "edited": false, "score": 0, "creation_date": 1440629949, "post_id": 32237989, "comment_id": 52358334, "body": "Without the split(&#39;,&#39;), I get the &quot;invalid literal for int() with base 10&quot; error. I&#39;m stumped!"}], "tags": [], "owner": {"reputation": 848, "user_id": 5263547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5765579c508aa191ce2c5aa64d478073?s=128&d=identicon&r=PG&f=1", "display_name": "JHobern", "link": "https://stackoverflow.com/users/5263547/jhobern"}, "is_accepted": false, "score": 1, "last_activity_date": 1440629822, "last_edit_date": 1440629822, "creation_date": 1440629583, "answer_id": 32237989, "question_id": 32237898, "link": "https://stackoverflow.com/questions/32237898/add-1-to-each-item-in-a-comma-separated-string-in-pandas-dataframe/32237989#32237989", "title": "Add +1 to each item in a comma-separated string in pandas dataframe", "body": "<p>By telling you that you cannot concatenate string and int objects you know that x must be a string. You can solve this by casting x to an int before adding 1 to it. So <code>str(x+1)</code> becomes <code>str(int(x)+1)</code>.</p>\n\n<pre><code>df['test'] = [str(int(x) + 1) for x in df['Start']]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "edited": false, "score": 0, "creation_date": 1440632114, "post_id": 32238323, "comment_id": 52358931, "body": "Thanks, but I still get this error:   value_list.append(str(int(y) + 1)) ValueError: invalid literal for int() with base 10: &#39;&#39;"}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "reply_to_user": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "edited": false, "score": 1, "creation_date": 1440632428, "post_id": 32238323, "comment_id": 52359018, "body": "Do you have data that you didn&#39;t include in your example? That could be a dangling comma causing the <code>&#39;&#39;</code>."}, {"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "edited": false, "score": 1, "creation_date": 1440633122, "post_id": 32238323, "comment_id": 52359181, "body": "Thanks so much Paulo! There were trailing commas. I ran rstrip(&#39;,&#39;) on the column, then ran your function and it works perfectly. Will you please add this step to your function so I can mark it as the answer?"}], "tags": [], "owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "is_accepted": true, "score": 1, "last_activity_date": 1440633236, "last_edit_date": 1440633236, "creation_date": 1440631812, "answer_id": 32238323, "question_id": 32237898, "link": "https://stackoverflow.com/questions/32237898/add-1-to-each-item-in-a-comma-separated-string-in-pandas-dataframe/32238323#32238323", "title": "Add +1 to each item in a comma-separated string in pandas dataframe", "body": "<p><code>df['Start']</code> is the whole series, so you have to iterate that and <em>then</em> split:</p>\n\n<pre><code>new_series = []\nfor x in df['Start']:\n    value_list = []\n    for y in x.rstrip(',').split(','):\n        value_list.append(str(int(y) + 1))\n    new_series.append(','.join(value_list))\ndf['test'] = new_series\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4194, "user_id": 3026131, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/h5dWI.png?s=128&g=1", "display_name": "Nader Hisham", "link": "https://stackoverflow.com/users/3026131/nader-hisham"}, "is_accepted": false, "score": 0, "last_activity_date": 1440658067, "creation_date": 1440658067, "answer_id": 32242455, "question_id": 32237898, "link": "https://stackoverflow.com/questions/32237898/add-1-to-each-item-in-a-comma-separated-string-in-pandas-dataframe/32242455#32242455", "title": "Add +1 to each item in a comma-separated string in pandas dataframe", "body": "<pre><code>df = pd.DataFrame({'Start' : [ [1 , 2, 3 , 4] , [100 , 101] ] , 'Stop' : [ [5 , 6 , 7 ,7] , [200,201] ] })\ndf.Start =  df.Start.apply(lambda x : [y + 1 for y in x ])\n</code></pre>\n"}], "owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "accepted_answer_id": 32238323, "answer_count": 3, "score": 1, "last_activity_date": 1440658067, "creation_date": 1440629061, "last_edit_date": 1440632178, "question_id": 32237898, "link": "https://stackoverflow.com/questions/32237898/add-1-to-each-item-in-a-comma-separated-string-in-pandas-dataframe", "title": "Add +1 to each item in a comma-separated string in pandas dataframe", "body": "<p>I have a pandas dataframe structured as follows: </p>\n\n<pre><code>|    ID    |     Start    |    Stop    |\n________________________________________\n|     1    |    1,2,3,4   |  5,6,7,7   |\n|     2    |    100,101   |  200,201   |\n</code></pre>\n\n<p>For each row in the dataframe, I'd like to add 1 to each value in the Start column. The dtype for the Start column is 'object'.</p>\n\n<p>Desired output looks like this: </p>\n\n<pre><code>|    ID    |     Start    |    Stop    |\n________________________________________\n|     1    |    2,3,4,5   |  5,6,7,7   |\n|     2    |    101,102   |  200,201   |\n</code></pre>\n\n<p>I've tried the following (and many versions of the following), but get an error stating ,TypeError: cannot concatenate 'str' and 'int' objects,: </p>\n\n<pre><code> df['test'] = [str(x + 1) for x in df['Start']]\n</code></pre>\n\n<p>I tried casting the column as an int, but got 'Invalid literal for long() with base 10: '101,102':</p>\n\n<pre><code>df['test'] = [int(x) + 1 for x in df['start'].astype(int)]\n</code></pre>\n\n<p>I tried converting the field to a list using str.split(), then casting each item as an integer: </p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["python", "date", "datetime"], "comments": [{"owner": {"reputation": 4789, "user_id": 3641545, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/F85G1.png?s=128&g=1", "display_name": "Zarwan", "link": "https://stackoverflow.com/users/3641545/zarwan"}, "edited": false, "score": 0, "creation_date": 1440629047, "post_id": 32237862, "comment_id": 52358040, "body": "Maybe you could try sorting the dates then checking the index before and after the date you&#39;re looking at and seeing which one is closer to it?"}, {"owner": {"reputation": 1381, "user_id": 3600497, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/539650391/picture?type=large", "display_name": "user3600497", "link": "https://stackoverflow.com/users/3600497/user3600497"}, "reply_to_user": {"reputation": 4789, "user_id": 3641545, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/F85G1.png?s=128&g=1", "display_name": "Zarwan", "link": "https://stackoverflow.com/users/3641545/zarwan"}, "edited": false, "score": 0, "creation_date": 1440629135, "post_id": 32237862, "comment_id": 52358066, "body": "At the moment, I use <code>np.argwhere</code> to find all the elements before and after the given date and take the last of first elements respectively.  The problem is, sometimes there are no dates after December 16 2014 in the array, which is a problem in my script.  It would be much easier to find the closest date."}, {"owner": {"reputation": 2409, "user_id": 1232110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/673c347007e8491a529e6514f81683d3?s=128&d=identicon&r=PG", "display_name": "Kevin Zhu", "link": "https://stackoverflow.com/users/1232110/kevin-zhu"}, "edited": false, "score": 0, "creation_date": 1476263053, "post_id": 32237862, "comment_id": 67267036, "body": "You may consider using <a href=\"http://stackoverflow.com/questions/9877391/how-to-get-the-closest-single-row-after-a-specific-datetime-index-using-python-p\">truncate</a> function."}], "answers": [{"tags": [], "owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "is_accepted": false, "score": 1, "last_activity_date": 1440629305, "creation_date": 1440629305, "answer_id": 32237943, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/32237943#32237943", "title": "Find the closest date to a given date", "body": "<pre><code>def nearestDate(base, dates):\n    nearness = { abs(base.timestamp() - date.timestamp()) : date for date in dates }\n    return nearness[min(nearness.keys())]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1440631453, "post_id": 32237949, "comment_id": 52358760, "body": "Wow, neat! Maybe it&#39;s kind of what my bigram method tries to reproduce, but way shorter."}, {"owner": {"reputation": 11053, "user_id": 533426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7hsON.png?s=128&g=1", "display_name": "Toskan", "link": "https://stackoverflow.com/users/533426/toskan"}, "edited": false, "score": 3, "creation_date": 1505298912, "post_id": 32237949, "comment_id": 79352738, "body": "you fail to explain your answer &quot;this will work for numbers too&quot; is no explanation. What is <code>items</code> what is <code>pivot</code>"}, {"owner": {"reputation": 902, "user_id": 6603658, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b64a8d63af5dfca2ec635aac587001bb?s=128&d=identicon&r=PG&f=1", "display_name": "astudentofmaths", "link": "https://stackoverflow.com/users/6603658/astudentofmaths"}, "edited": false, "score": 0, "creation_date": 1515487804, "post_id": 32237949, "comment_id": 83307856, "body": "What about a similar function to get the nearest date that is <i>after</i> the input date ?"}, {"owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "edited": false, "score": 9, "creation_date": 1515495486, "post_id": 32237949, "comment_id": 83312333, "body": "<code>min(item for item in items if item &gt; pivot)</code>"}, {"owner": {"reputation": 516, "user_id": 6381389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-EZt1cXZwmUQ/AAAAAAAAAAI/AAAAAAAAADA/VDcD4qAJadQ/photo.jpg?sz=128", "display_name": "Chiel", "link": "https://stackoverflow.com/users/6381389/chiel"}, "edited": false, "score": 0, "creation_date": 1585165289, "post_id": 32237949, "comment_id": 107670956, "body": "This code does not return the closest date <i>before</i> the given date."}], "tags": [], "owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "is_accepted": true, "score": 115, "last_activity_date": 1542131969, "last_edit_date": 1542131969, "creation_date": 1440629331, "answer_id": 32237949, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/32237949#32237949", "title": "Find the closest date to a given date", "body": "<p>This function will return the <code>datetime</code> in <code>items</code> which is the closest to the date <code>pivot</code>.</p>\n\n<pre><code>def nearest(items, pivot):\n    return min(items, key=lambda x: abs(x - pivot))\n</code></pre>\n\n<p>The good part this function works on types other than <code>datetime</code> too out of the box, if the type supports comparison, subtraction and <code>abs</code>, e.g.: numbers and vector types.</p>\n"}, {"comments": [{"owner": {"reputation": 2169, "user_id": 3017048, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/76fa741c85da64717bf8d8d5b2fc5e75?s=128&d=identicon&r=PG&f=1", "display_name": "user3017048", "link": "https://stackoverflow.com/users/3017048/user3017048"}, "edited": false, "score": 1, "creation_date": 1522756518, "post_id": 40188367, "comment_id": 86265549, "body": "I could not edit (too short for an edit, weird!), but there is a small bug: heading zeroes are not allowed as arguments to a datetime.datetime constructor: it results in an &#39;invalid token&#39; error."}, {"owner": {"reputation": 2169, "user_id": 3017048, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/76fa741c85da64717bf8d8d5b2fc5e75?s=128&d=identicon&r=PG&f=1", "display_name": "user3017048", "link": "https://stackoverflow.com/users/3017048/user3017048"}, "edited": false, "score": 0, "creation_date": 1522756714, "post_id": 40188367, "comment_id": 86265678, "body": "I tested: the <code>iloc</code> method is around 25% faster on my machine (~446&#181;s vs. ~588&#181;s)."}], "tags": [], "owner": {"reputation": 2409, "user_id": 1232110, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/673c347007e8491a529e6514f81683d3?s=128&d=identicon&r=PG", "display_name": "Kevin Zhu", "link": "https://stackoverflow.com/users/1232110/kevin-zhu"}, "is_accepted": false, "score": 35, "last_activity_date": 1477111859, "last_edit_date": 1495540478, "creation_date": 1477111016, "answer_id": 40188367, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/40188367#40188367", "title": "Find the closest date to a given date", "body": "<p>As answered on <a href=\"https://stackoverflow.com/questions/9877391/how-to-get-the-closest-single-row-after-a-specific-datetime-index-using-python-p\">this link</a> link, 'truncate' function is there for you.</p>\n\n<p><code>df.truncate(before='2012-01-07')</code></p>\n\n<p>Or you can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.get_loc.html\" rel=\"noreferrer\">get_loc</a> with 'nearest' option.</p>\n\n<pre><code>df.iloc[df.index.get_loc(datetime.datetime(2016,02,02),method='nearest')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 492, "user_id": 5848320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbea17915a39e01e1154d2c9ba2f0def?s=128&d=identicon&r=PG&f=1", "display_name": "MarMat", "link": "https://stackoverflow.com/users/5848320/marmat"}, "is_accepted": false, "score": 3, "last_activity_date": 1503650728, "creation_date": 1503650728, "answer_id": 45877624, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/45877624#45877624", "title": "Find the closest date to a given date", "body": "<p>To find a closest date <em>and</em> return the timedelta (difference between two dates) I did the following:</p>\n\n<pre><code>def nearest_date(items,pivot):\n    nearest=min(items, key=lambda x: abs(x - pivot))\n    timedelta = abs(nearest - pivot)\n    return nearest, timedelta\n</code></pre>\n\n<p>This may be useful when you have a minimum threshold for nearness for your app like I did.</p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 5634397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a86ae2a1d2137a681c43ebcf70fcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo Meneghetti", "link": "https://stackoverflow.com/users/5634397/lorenzo-meneghetti"}, "is_accepted": false, "score": 3, "last_activity_date": 1521716282, "creation_date": 1521716282, "answer_id": 49426888, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/49426888#49426888", "title": "Find the closest date to a given date", "body": "<p>My solution to find the closest index instead of the value</p>\n\n<pre><code>def nearest_ind(items, pivot):\n    time_diff = np.abs([date - pivot for date in items])\n    return time_diff.argmin(0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 516, "user_id": 6381389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-EZt1cXZwmUQ/AAAAAAAAAAI/AAAAAAAAADA/VDcD4qAJadQ/photo.jpg?sz=128", "display_name": "Chiel", "link": "https://stackoverflow.com/users/6381389/chiel"}, "edited": false, "score": 0, "creation_date": 1585696570, "post_id": 60856459, "comment_id": 107852621, "body": "This answer is based on Tamas Hegedus&#39; answer."}, {"owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "edited": false, "score": 0, "creation_date": 1618424395, "post_id": 60856459, "comment_id": 118599880, "body": "I would change the &lt; operator to a &lt;="}], "tags": [], "owner": {"reputation": 516, "user_id": 6381389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-EZt1cXZwmUQ/AAAAAAAAAAI/AAAAAAAAADA/VDcD4qAJadQ/photo.jpg?sz=128", "display_name": "Chiel", "link": "https://stackoverflow.com/users/6381389/chiel"}, "is_accepted": false, "score": 8, "last_activity_date": 1585166225, "creation_date": 1585166225, "answer_id": 60856459, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/60856459#60856459", "title": "Find the closest date to a given date", "body": "<p>This code returns the nearest date <strong>before</strong> the given date:</p>\n\n<pre><code>def nearest(items, pivot):\n    return min([i for i in items if i &lt; pivot], key=lambda x: abs(x - pivot))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 5480398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b55925b0d9ab056488677fa292bb8c50?s=128&d=identicon&r=PG&f=1", "display_name": "Tim P", "link": "https://stackoverflow.com/users/5480398/tim-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1592276301, "creation_date": 1592276301, "answer_id": 62400237, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/62400237#62400237", "title": "Find the closest date to a given date", "body": "<p>Assuming you want to answer the slight variant:\n\"Given a dataframe with a datetime index, how do I determine the last value of column <code>col</code> where \"last\" is defined as the last index that is less than some value <code>date</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\ndef last(df, date, col):\n    return df.loc[                      # access the dataframe using this index\n        max(                            # latest date\n            df[df.index &lt; date].index   # that precedes `date`\n        )\n    ][col]                              # access column `col`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 4412782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9be76d27e034144f32463ffd729b965?s=128&d=identicon&r=PG&f=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/4412782/wes"}, "is_accepted": false, "score": 0, "last_activity_date": 1610383145, "creation_date": 1610383145, "answer_id": 65670963, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date/65670963#65670963", "title": "Find the closest date to a given date", "body": "<p>I know this is an old answer, but I just used the code code that Tamas posted and found that it was taking quite a long time - I optimised it and saw much quicker performance; the problem was the iteration was taking a long time, this is my new method - it will only be quicker when the actual pivot appears in the list</p>\n<pre><code>def nearest(items, pivot):\n    if pivot in items:\n    return pivot\nelse:\n    return min(items, key=lambda x: abs(x - pivot))\n</code></pre>\n<p>Hope this helps anyone who came accross this question.</p>\n"}], "owner": {"reputation": 1381, "user_id": 3600497, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/539650391/picture?type=large", "display_name": "user3600497", "link": "https://stackoverflow.com/users/3600497/user3600497"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60824, "favorite_count": 24, "accepted_answer_id": 32237949, "answer_count": 8, "score": 59, "last_activity_date": 1610383145, "creation_date": 1440628787, "last_edit_date": 1495542360, "question_id": 32237862, "link": "https://stackoverflow.com/questions/32237862/find-the-closest-date-to-a-given-date", "title": "Find the closest date to a given date", "body": "<p>I have an array of datetime objects, and I would like to find which element in the array is the closest to a given date (e.g <code>datetime.datetime(2014,12,16)</code>)</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17249220/getting-the-closest-date-to-a-given-date\">This</a> post shows how to find the nearest date <em>which is not before the given date</em>.  How can I alter this code so that it can return dates that are before a given date?</p>\n\n<p>For example, if the array housed elements <code>datetime.datetime(2014,12,10)</code> and <code>datetime.datetime(2014,12,28)</code>, the former item should be returned because it is closest to <code>datetime.datetime(2014,12,16)</code> in absolute value.</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 1, "last_activity_date": 1440629343, "last_edit_date": 1440629343, "creation_date": 1440628977, "answer_id": 32237885, "question_id": 32237848, "link": "https://stackoverflow.com/questions/32237848/how-to-identify-elements-that-belong-to-a-set-in-a-numpy-array-in-python/32237885#32237885", "title": "How to identify elements that belong to a set in a numpy array in python", "body": "<p>You can use <code>numpy.logical_or</code> :</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; A[np.logical_or(A**2==1,A**2==9)]\narray([-1,  1,  3, -3])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "is_accepted": false, "score": 0, "last_activity_date": 1440629207, "creation_date": 1440629207, "answer_id": 32237926, "question_id": 32237848, "link": "https://stackoverflow.com/questions/32237848/how-to-identify-elements-that-belong-to-a-set-in-a-numpy-array-in-python/32237926#32237926", "title": "How to identify elements that belong to a set in a numpy array in python", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/functions.html#filter\" rel=\"nofollow\"><code>filter</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; filter(lambda x: x ** 2 in [1, 9], A)\n[-1, 1, 3, -3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "is_accepted": false, "score": 3, "last_activity_date": 1440629609, "creation_date": 1440629609, "answer_id": 32237993, "question_id": 32237848, "link": "https://stackoverflow.com/questions/32237848/how-to-identify-elements-that-belong-to-a-set-in-a-numpy-array-in-python/32237993#32237993", "title": "How to identify elements that belong to a set in a numpy array in python", "body": "<p><code>numpy</code> has a fucnction that does what you what called <code>in1d</code>:</p>\n\n<pre><code>import numpy\n\nA = numpy.array([-1, 1, 2, -2, 3, -3])\nmask = numpy.in1d(A**2, [1, 9])\nprint(mask)\n# [ True  True False False  True  True]\nprint(A[mask])\n# [-1  1  3 -3]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5270515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1437573e2701e5eddb8565cd384a94df?s=128&d=identicon&r=PG&f=1", "display_name": "Jiexing Wu", "link": "https://stackoverflow.com/users/5270515/jiexing-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1440629609, "creation_date": 1440628700, "last_edit_date": 1440628803, "question_id": 32237848, "link": "https://stackoverflow.com/questions/32237848/how-to-identify-elements-that-belong-to-a-set-in-a-numpy-array-in-python", "title": "How to identify elements that belong to a set in a numpy array in python", "body": "<p>Say I have a numpy array </p>\n\n<pre><code>A = numpy.array([-1, 1, 2, -2, 3, -3])\n</code></pre>\n\n<p>I would like to get all numbers whose squares equal 1 or 9 (so the expected result is <code>[1, -1, 3, -3]</code>). I tried <code>A[A**2 in [1, 9]]</code> but got an error. Is there any built-in function to handle this simple task without doing loops? Thanks.</p>\n"}, {"tags": ["python", "validation", "formencode"], "answers": [{"tags": [], "owner": {"reputation": 1408, "user_id": 744310, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e39c0951bdc3b22053aefb3aa88743d5?s=128&d=identicon&r=PG", "display_name": "jchysk", "link": "https://stackoverflow.com/users/744310/jchysk"}, "is_accepted": false, "score": 1, "last_activity_date": 1440628539, "creation_date": 1440628539, "answer_id": 32237813, "question_id": 32237812, "link": "https://stackoverflow.com/questions/32237812/how-to-validate-that-at-least-one-field-is-present-of-multiple-with-formencode-v/32237813#32237813", "title": "How to validate that at least one field is present of multiple with formencode validators?", "body": "<p>The class below: RequireAtLeastOne will take a list of fields and will only pass if at least a single one of the fields is present as demonstrated with the successes and failures at the bottom.</p>\n\n<pre><code>from formencode import Schema, validators, Invalid\nfrom formencode.validators import FormValidator\n\n\nclass RequireAtLeastOne(FormValidator):\n    choices = []\n    __unpackargs__ = ('choices',)\n    def _convert_to_python(self, value_dict, state):\n        for each in self.choices:\n            if value_dict.get(each) is not None:\n                return value_dict\n        raise Invalid('You must give a value for %s' % repr(self.choices), value_dict, state)\n\n\nclass ValidateThings(Schema):\n    field1 = validators.String(if_missing=None)    \n    field2 = validators.String(if_missing=None)\n    field3 = validators.String(if_missing=None)\n    chained_validators = [RequireAtLeastOne(['field1', 'field2', 'field3'])]\n\n\n\"\"\" Success \"\"\"        \nparams = ValidateThings().to_python({\"field2\": 12})\nparams = ValidateThings().to_python({\"field2\": 12, \"field3\": 126})\nparams = ValidateThings().to_python({\"field1\": \"foo\", \"field2\": 12, \"field3\": 126})\n\n\"\"\" Failure \"\"\"\nparams = ValidateThings().to_python({})\n</code></pre>\n"}], "owner": {"reputation": 1408, "user_id": 744310, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e39c0951bdc3b22053aefb3aa88743d5?s=128&d=identicon&r=PG", "display_name": "jchysk", "link": "https://stackoverflow.com/users/744310/jchysk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440628539, "creation_date": 1440628539, "question_id": 32237812, "link": "https://stackoverflow.com/questions/32237812/how-to-validate-that-at-least-one-field-is-present-of-multiple-with-formencode-v", "title": "How to validate that at least one field is present of multiple with formencode validators?", "body": "<p>With Python Formencode validators, there are chained_validators RequireIfMissing and RequireIfPresent that allow for requirements given the state of other fields being there or not. It seems to only work for single fields meaning if one field is missing, require another or if one field is present, require another. How does one require at least one of many fields?</p>\n"}, {"tags": ["python", "pandas", "logic", "xor"], "answers": [{"comments": [{"owner": {"reputation": 1834, "user_id": 1756427, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2e77b6b49fbdb2aa59016e232c9a143c?s=128&d=identicon&r=PG", "display_name": "Alok Nayak", "link": "https://stackoverflow.com/users/1756427/alok-nayak"}, "edited": false, "score": 0, "creation_date": 1606155758, "post_id": 32243342, "comment_id": 114870370, "body": "python xor operator ^ is overloaded by numpy library to carry out numpy.logical_xor internally. So readers should note that the performance testing results are equal for these, because these are the same."}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 16, "last_activity_date": 1440661034, "creation_date": 1440661034, "answer_id": 32243342, "question_id": 32237794, "link": "https://stackoverflow.com/questions/32237794/element-wise-xor-in-pandas/32243342#32243342", "title": "Element-wise XOR in pandas", "body": "<p>Python XOR: <code>a ^ b</code>  </p>\n\n<p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_xor.html\" rel=\"noreferrer\">Numpy logical XOR</a>: <code>np.logical_xor(a,b)</code></p>\n\n<p>Testing performance - result are equal:</p>\n\n<p><strong>1. Sequence of random booleans with size 10000</strong></p>\n\n<pre><code>In [7]: a = np.random.choice([True, False], size=10000)\nIn [8]: b = np.random.choice([True, False], size=10000)\n\nIn [9]: %timeit a ^ b\nThe slowest run took 7.61 times longer than the fastest. This could mean that an intermediate result is being cached\n100000 loops, best of 3: 11 us per loop\n\nIn [10]: %timeit np.logical_xor(a,b)\nThe slowest run took 6.25 times longer than the fastest. This could mean that an intermediate result is being cached\n100000 loops, best of 3: 11 us per loop\n</code></pre>\n\n<p><strong>2. Sequence of random booleans with size 1000</strong></p>\n\n<pre><code>In [11]: a = np.random.choice([True, False], size=1000)\nIn [12]: b = np.random.choice([True, False], size=1000)\n\nIn [13]: %timeit a ^ b\nThe slowest run took 21.52 times longer than the fastest. This could mean that an intermediate result is being cached\n1000000 loops, best of 3: 1.58 us per loop\n\nIn [14]: %timeit np.logical_xor(a,b)\nThe slowest run took 19.45 times longer than the fastest. This could mean that an intermediate result is being cached\n1000000 loops, best of 3: 1.58 us per loop\n</code></pre>\n\n<p><strong>3. Sequence of random booleans with size 100</strong></p>\n\n<pre><code>In [15]: a = np.random.choice([True, False], size=100)\nIn [16]: b = np.random.choice([True, False], size=100)\n\nIn [17]: %timeit a ^ b\nThe slowest run took 33.43 times longer than the fastest. This could mean that an intermediate result is being cached\n1000000 loops, best of 3: 614 ns per loop\n\nIn [18]: %timeit np.logical_xor(a,b)\nThe slowest run took 45.49 times longer than the fastest. This could mean that an intermediate result is being cached\n1000000 loops, best of 3: 616 ns per loop\n</code></pre>\n\n<p><strong>4. Sequence of random booleans with size 10</strong></p>\n\n<pre><code>In [19]: a = np.random.choice([True, False], size=10)\nIn [20]: b = np.random.choice([True, False], size=10)\n\nIn [21]: %timeit a ^ b\nThe slowest run took 86.10 times longer than the fastest. This could mean that an intermediate result is being cached\n1000000 loops, best of 3: 509 ns per loop\n\nIn [22]: %timeit np.logical_xor(a,b)\nThe slowest run took 40.94 times longer than the fastest. This could mean that an intermediate result is being cached\n1000000 loops, best of 3: 511 ns per loop\n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 2391326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e9458fd7b6b50fe5057750fa14c6ed?s=128&d=identicon&r=PG", "display_name": "SulfoCyaNate", "link": "https://stackoverflow.com/users/2391326/sulfocyanate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12101, "favorite_count": 1, "accepted_answer_id": 32243342, "answer_count": 1, "score": 10, "last_activity_date": 1440661034, "creation_date": 1440628402, "question_id": 32237794, "link": "https://stackoverflow.com/questions/32237794/element-wise-xor-in-pandas", "title": "Element-wise XOR in pandas", "body": "<p>I know that logical AND is &amp;, and logical OR is | in a Pandas Series, but I was looking for an element-wise logical XOR. I could express it in terms of AND and OR, I suppose, but I'd prefer to use an XOR if one is available.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "numpy", "scipy", "probability", "noise"], "answers": [{"comments": [{"owner": {"reputation": 1398, "user_id": 217470, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/12dc16590cb98275a751f1098d73b55e?s=128&d=identicon&r=PG", "display_name": "papahabla", "link": "https://stackoverflow.com/users/217470/papahabla"}, "edited": false, "score": 3, "creation_date": 1457051370, "post_id": 32237991, "comment_id": 59242944, "body": "<code>numpy.random.standard_normal(size=num_samples)</code> can also be used when mean=0, and std=1"}, {"owner": {"reputation": 552, "user_id": 4445832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4145068618961b654717e32113e346?s=128&d=identicon&r=PG&f=1", "display_name": "ivangtorre", "link": "https://stackoverflow.com/users/4445832/ivangtorre"}, "edited": false, "score": 1, "creation_date": 1525859652, "post_id": 32237991, "comment_id": 87518016, "body": "You can achieve this with any kind of distribution as long as there are no autocorrelations in the signal.  &quot;numpy.random.uniform(low=0.0, high=1.0, size=1000)&quot;, &quot;np.random.triangular(-3, 0, 8, 100000)&quot; will also get white noise. You can also have a correlated signal process and randomize it using &quot;numpy.random.shuffle&quot; for getting white noise."}], "tags": [], "owner": {"reputation": 2135, "user_id": 722362, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4eb2b0ae663ddcd4bba660a26c0a638c?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/722362/sam"}, "is_accepted": true, "score": 25, "last_activity_date": 1440629603, "creation_date": 1440629603, "answer_id": 32237991, "question_id": 32237769, "link": "https://stackoverflow.com/questions/32237769/defining-a-white-noise-process-in-python/32237991#32237991", "title": "Defining a white noise process in Python", "body": "<p>You can achieve this through the <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.normal.html\" rel=\"noreferrer\"><code>numpy.random.normal</code> function</a>, which draws a given number of samples from a Gaussian distribution. </p>\n\n<pre><code>import numpy\nimport matplotlib.pyplot as plt\n\nmean = 0\nstd = 1 \nnum_samples = 1000\nsamples = numpy.random.normal(mean, std, size=num_samples)\n\nplt.plot(samples)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/eyG8P.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/eyG8P.png\" alt=\"1000 random samples drawn from a Gaussian distribution of mean=0, std=1 \"></a></p>\n"}, {"comments": [{"owner": {"reputation": 5097, "user_id": 3175480, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/agIDd.jpg?s=128&g=1", "display_name": "Gluttton", "link": "https://stackoverflow.com/users/3175480/gluttton"}, "edited": false, "score": 4, "creation_date": 1514284941, "post_id": 47053568, "comment_id": 82923526, "body": "<code>White noise has Uniform distribution, not Normal (Gaussian).</code> White noise must have Uniform distribution over <i>frequencies</i> but it can have any distribution over <i>time</i> (for instance Normal)."}, {"owner": {"reputation": 552, "user_id": 4445832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4145068618961b654717e32113e346?s=128&d=identicon&r=PG&f=1", "display_name": "ivangtorre", "link": "https://stackoverflow.com/users/4445832/ivangtorre"}, "edited": false, "score": 1, "creation_date": 1525859204, "post_id": 47053568, "comment_id": 87517760, "body": "As Wikipedia says: &quot; white noise is a random signal having equal intensity at different frequencies&quot;. This means that you can have any kind of PDF for the signal as long as there are no temporary correlations. So White noise can have Uniform distribution, Normal distribution or other kind of distributions"}, {"owner": {"reputation": 2221, "user_id": 272642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cd5090839b1021f85bd329e1ed09264?s=128&d=identicon&r=PG", "display_name": "Vortico", "link": "https://stackoverflow.com/users/272642/vortico"}, "edited": false, "score": 5, "creation_date": 1532372698, "post_id": 47053568, "comment_id": 89940311, "body": "This answer is incorrect. White noise is a continuous process from <i>any</i> uncorrelated random process, like uniform or normal. However, if you digitize it, you must apply a bandpass filter at the Nyquist frequency, otherwise your approximation of the continuous process contains aliasing. It turns out that bandpassing white noise results in a discrete random process where each sample is picked from a Gaussian/normal distribution. This is the result of your confusion. Gaussian and white noise are the same thing in discrete processes. Gaussian is a <i>subset</i> of continuous white noise processes."}, {"owner": {"reputation": 16558, "user_id": 1804173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/53f721a451a1c68caf8316cefcde3083?s=128&d=identicon&r=PG", "display_name": "bluenote10", "link": "https://stackoverflow.com/users/1804173/bluenote10"}, "reply_to_user": {"reputation": 2221, "user_id": 272642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cd5090839b1021f85bd329e1ed09264?s=128&d=identicon&r=PG", "display_name": "Vortico", "link": "https://stackoverflow.com/users/272642/vortico"}, "edited": false, "score": 0, "creation_date": 1600979985, "post_id": 47053568, "comment_id": 113269001, "body": "@Vortico Interesting comment! In an attempt to understand what you are saying I have opened a <a href=\"https://dsp.stackexchange.com/q/70514/24353\">follow up question</a> :)."}], "tags": [], "owner": {"reputation": 65, "user_id": 8866568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781d44501f28ed06ed46e1f07af15cc4?s=128&d=identicon&r=PG&f=1", "display_name": "user8866568", "link": "https://stackoverflow.com/users/8866568/user8866568"}, "is_accepted": false, "score": 4, "last_activity_date": 1509536226, "last_edit_date": 1509536226, "creation_date": 1509534900, "answer_id": 47053568, "question_id": 32237769, "link": "https://stackoverflow.com/questions/32237769/defining-a-white-noise-process-in-python/47053568#47053568", "title": "Defining a white noise process in Python", "body": "<p>Short answer is <code>numpy.random.random()</code>. <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.random.html#numpy.random.random\" rel=\"noreferrer\">Numpy site description</a></p>\n\n<p>But since I find more and more answers to similar questions written as <code>numpy.random.normal</code>, I suspect a little description is needed. If I do understand Wikipedia (and a few lessons at the University) correctly, Gauss and White Noise are two separate things. White noise has Uniform distribution, not Normal (Gaussian).</p>\n\n<pre><code>import numpy.random as nprnd\nimport matplotlib.pyplot as plt\n\nnum_samples = 10000\nnum_bins = 200\n\nsamples = numpy.random.random(size=num_samples)\n\nplt.hist(samples, num_bins)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/EGKqQ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/EGKqQ.png\" alt=\"Image: Result\"></a></p>\n\n<p>This is my first answer, so if you correct mistakes possibly made by me here, I'll gladly update it. Thanks =)</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 10649176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e719a8cb0b51121e04bdc92851d187e?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Yarahmadian", "link": "https://stackoverflow.com/users/10649176/ryan-yarahmadian"}, "is_accepted": false, "score": 1, "last_activity_date": 1550713692, "creation_date": 1550713692, "answer_id": 54797985, "question_id": 32237769, "link": "https://stackoverflow.com/questions/32237769/defining-a-white-noise-process-in-python/54797985#54797985", "title": "Defining a white noise process in Python", "body": "<p>Create random samples with normal distribution (Gaussian) with <code>numpy.random.normal</code>:</p>\n\n<pre><code>import numpy as np\nimport seaborn as sns\n\nmu, sigma = 0, 1 # mean and standard deviation\ns = np.random.normal(mu, sigma, size=1000) # 1000 samples with normal distribution\n\n# seaborn histogram with Kernel Density Estimation\nsns.distplot(s, bins=40, hist_kws={'edgecolor':'black'})\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Do7SB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Do7SB.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40370, "favorite_count": 5, "accepted_answer_id": 32237991, "answer_count": 3, "score": 20, "last_activity_date": 1578487991, "creation_date": 1440628286, "last_edit_date": 1528914636, "question_id": 32237769, "link": "https://stackoverflow.com/questions/32237769/defining-a-white-noise-process-in-python", "title": "Defining a white noise process in Python", "body": "<p>I need to draw samples from a white noise process in order to implement a particular integral numerically.</p>\n\n<p>How do I generate this with Python (i.e., numpy, scipy, etc.)?</p>\n"}, {"tags": ["python", "arrays", "string", "python-2.7", "string-matching"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1440627740, "post_id": 32237657, "comment_id": 52357599, "body": "Can you add a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> to your question?"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440627984, "post_id": 32237657, "comment_id": 52357682, "body": "What format is the &quot;array&quot; in? Is it a string? A list?"}, {"owner": {"reputation": 13, "user_id": 5270492, "user_type": "registered", "profile_image": "https://graph.facebook.com/1484552191865581/picture?type=large", "display_name": "Brandon Morgan", "link": "https://stackoverflow.com/users/5270492/brandon-morgan"}, "edited": false, "score": 0, "creation_date": 1440628088, "post_id": 32237657, "comment_id": 52357724, "body": "Its an Array of strings, sorry if unclear"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440628191, "post_id": 32237657, "comment_id": 52357755, "body": "@BrandonMorgan, ooh, so you have <code>[&#39;BLAH&#39;, &#39;FIXX&#39;, &#39;FEZ&#39;, &#39;FOO&#39;]</code>, and you want to find the words that you could build with <code>&#39;ZZAFIEA&#39;</code>? You should really include sample input/output; it makes things easier :)."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1440628503, "post_id": 32237657, "comment_id": 52357858, "body": "Not very efficient, but you can try to replace <code>pass</code> with <code>if &quot;&quot;.join(sorted(word)) in &quot;&quot;.join(sorted(letters)): print letters, word</code>"}, {"owner": {"reputation": 13, "user_id": 5270492, "user_type": "registered", "profile_image": "https://graph.facebook.com/1484552191865581/picture?type=large", "display_name": "Brandon Morgan", "link": "https://stackoverflow.com/users/5270492/brandon-morgan"}, "edited": false, "score": 0, "creation_date": 1440628635, "post_id": 32237657, "comment_id": 52357903, "body": "Thank you alfasin, that works well enough for my liking"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1440628645, "post_id": 32237657, "comment_id": 52357906, "body": "@alfasin, <code>&#39;FEZ&#39;</code> is not in <code>&#39;AAEFIZZ&#39;</code>."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "reply_to_user": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440629213, "post_id": 32237657, "comment_id": 52358090, "body": "@Cyphase you&#39;re right (though you probably meant to say that <code>&#39;EFZ&#39;</code> is not in ...) ;)"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1440629350, "post_id": 32237657, "comment_id": 52358134, "body": "@alfasin, no, I meant <code>&#39;FEZ&#39;</code>; what do you mean?"}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "reply_to_user": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440629606, "post_id": 32237657, "comment_id": 52358213, "body": "@Cyphase both are sorted alphabetically (since I used <code>sorted</code>)"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 1, "creation_date": 1440629667, "post_id": 32237657, "comment_id": 52358230, "body": "Oh, whoops. Yea, that :D."}, {"owner": {"reputation": 13, "user_id": 5270492, "user_type": "registered", "profile_image": "https://graph.facebook.com/1484552191865581/picture?type=large", "display_name": "Brandon Morgan", "link": "https://stackoverflow.com/users/5270492/brandon-morgan"}, "edited": false, "score": 0, "creation_date": 1440629771, "post_id": 32237657, "comment_id": 52358271, "body": "Using that method i get this as an output <code>&#39;Input 7 letters: AAEIFZZ [&#39;AA&#39;, &#39;AE&#39;, &#39;EA&#39;, &#39;EF&#39;, &#39;FAE&#39;, &#39;FE&#39;, &#39;FIE&#39;, &#39;FIZ&#39;, &#39;FIZZ&#39;, &#39;IF&#39;, &#39;ZIZ&#39;]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "is_accepted": true, "score": 1, "last_activity_date": 1440629823, "creation_date": 1440629823, "answer_id": 32238029, "question_id": 32237657, "link": "https://stackoverflow.com/questions/32237657/matching-a-string-any-order-to-strings-in-an-array-of-a-huge-size/32238029#32238029", "title": "Matching a string (any order) to strings in an array of a huge size", "body": "<p>This is a pretty good solution:</p>\n\n<pre><code>from collections import Counter\n\n\ndef counter_is_subset(x, y):\n    # If subtracting y from x doesn't return an empty Counter,\n    # x is NOT a subset of y.\n    return not (x - y)\n\n\ndef find_buildable_words(words, letters):\n    letters = Counter(letters)\n\n    for word in words:\n        if counter_is_subset(Counter(word), letters):\n            yield word\n\n\nwords = ['BLAH', 'FIZZ', 'FEZ', 'FOO', 'FAZE', 'ZEE']\nletters = 'ZZAFIEA'\n\nbuildable_words = find_buildable_words(words, letters)\n\nfor word in buildable_words:\n    print(word)\n</code></pre>\n\n<p>On my computer, this runs in ~1.2 seconds with a 250,000 word list.</p>\n"}, {"comments": [{"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440630154, "post_id": 32238062, "comment_id": 52358396, "body": "This is wrong; <code>&#39;AGA&#39;</code> is not a valid result because there&#39;s only 1 <code>&#39;A&#39;</code> in &#39;&#39;ABEFGZ&#39;`."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "reply_to_user": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440630180, "post_id": 32238062, "comment_id": 52358403, "body": "@Cyphase Did you read the disclaimer ? I put <code>AGA</code> there on purpose  :)"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440630310, "post_id": 32238062, "comment_id": 52358430, "body": "The disclaimer wasn&#39;t there when I commented :)."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "reply_to_user": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 1, "creation_date": 1440630533, "post_id": 32238062, "comment_id": 52358489, "body": "@Cyphase nice usage of <code>Counter</code>!"}], "tags": [], "owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1441142976, "last_edit_date": 1441142976, "creation_date": 1440629982, "answer_id": 32238062, "question_id": 32237657, "link": "https://stackoverflow.com/questions/32237657/matching-a-string-any-order-to-strings-in-an-array-of-a-huge-size/32238062#32238062", "title": "Matching a string (any order) to strings in an array of a huge size", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/itertools.html#itertools.ifilter\" rel=\"nofollow\"><code>itertools.ifilter</code></a>, write a predicate that confirms if a word from the list is contained in your string, then run <code>ifilter</code> with your predicate on that list. </p>\n\n<p>Demo:</p>\n\n<pre><code>from itertools import ifilter\ncompare_against = \"ABEFGZ\"\nlst = ['EFZ', 'ZIP', 'AGA', 'ABM']\n\ndef pred(word):\n    for char in word:\n        if char not in compare_against:\n            return False\n    return True\n\nx = ifilter(pred, lst)\n\nfor y in x:\n    print y\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>EFZ\nAGA\n</code></pre>\n\n<p><strong>Disclaimer</strong> </p>\n\n<p>This example does not handle well duplicate characters, meaning, by definition you may decide if <code>AGA</code> should return or not (The character 'A' appears only once in <code>compare_against</code>). If you decide that AGA is not a valid output, the <code>pred</code> function should be modified to accommodate that restriction.</p>\n"}], "owner": {"reputation": 13, "user_id": 5270492, "user_type": "registered", "profile_image": "https://graph.facebook.com/1484552191865581/picture?type=large", "display_name": "Brandon Morgan", "link": "https://stackoverflow.com/users/5270492/brandon-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 32238029, "answer_count": 2, "score": 1, "last_activity_date": 1441142976, "creation_date": 1440627584, "last_edit_date": 1440628527, "question_id": 32237657, "link": "https://stackoverflow.com/questions/32237657/matching-a-string-any-order-to-strings-in-an-array-of-a-huge-size", "title": "Matching a string (any order) to strings in an array of a huge size", "body": "<pre><code>def Get_Word_List(File_=[]):\n    with open(\"Words.txt\") as File: #File of 250k+ words separated via new line \n        for Line in File:\n            File_.append(Line.replace(\"\\n\",\"\"))\n    return File_\n\ndef Get_Input(Str=str):\n    Str = raw_input(\"Input 7 letters: \")\n    while len(Str) != 7:\n        Str = raw_input(\"Input 7 letter: \")\n    return Str.upper()\n\ndef Find_Words():\n    Letters = Get_Input()\n    List = Get_Word_List() #An Array of strings, all in uppercase\n    for Word in List:\n        pass\n</code></pre>\n\n<p>I am trying to match a string in any order (Max length 7), for example \"ZZAFIEA\" could give \"FIZZ\" or \"FEZ\" to a word or multiple words in an array of size 250k+ and i can't find away to do it, i've tried all sorts, appreciate any bit of help</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 855, "user_id": 1243457, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YTIlN.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1243457/andrew"}, "edited": false, "score": 0, "creation_date": 1440627930, "post_id": 32237654, "comment_id": 52357660, "body": "Your code seems fine. Can you give us more specific example of your error?"}, {"owner": {"reputation": 855, "user_id": 1243457, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YTIlN.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1243457/andrew"}, "edited": false, "score": 1, "creation_date": 1440628044, "post_id": 32237654, "comment_id": 52357708, "body": "PS To make your code more efficient I would suggest to set the values of variables x and y only when you want to swap them."}, {"owner": {"reputation": 21, "user_id": 5270460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844bfc7459aa93b1d9d1f6c3135a95b4?s=128&d=identicon&r=PG&f=1", "display_name": "E.McMahon", "link": "https://stackoverflow.com/users/5270460/e-mcmahon"}, "reply_to_user": {"reputation": 855, "user_id": 1243457, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YTIlN.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1243457/andrew"}, "edited": false, "score": 0, "creation_date": 1440628064, "post_id": 32237654, "comment_id": 52357716, "body": "i&#39;m not sure how to edit &#39;pythonTest.rtf&#39; with the new values for columns[3] and columns[4]."}, {"owner": {"reputation": 855, "user_id": 1243457, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YTIlN.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1243457/andrew"}, "edited": false, "score": 3, "creation_date": 1440628152, "post_id": 32237654, "comment_id": 52357743, "body": "To swap column 3 and 4 you have to use index 2 and 3!"}], "answers": [{"comments": [{"owner": {"reputation": 2058, "user_id": 1908115, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/793c9f0cfb9f3cc6001d73f127644c67?s=128&d=identicon&r=PG", "display_name": "erik", "link": "https://stackoverflow.com/users/1908115/erik"}, "edited": false, "score": 0, "creation_date": 1440629857, "post_id": 32237790, "comment_id": 52358294, "body": "Wouldn&#39;t it be more efficient to not rewrite the whole file but just replace the changed lines?"}, {"owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "reply_to_user": {"reputation": 2058, "user_id": 1908115, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/793c9f0cfb9f3cc6001d73f127644c67?s=128&d=identicon&r=PG", "display_name": "erik", "link": "https://stackoverflow.com/users/1908115/erik"}, "edited": false, "score": 1, "creation_date": 1440630269, "post_id": 32237790, "comment_id": 52358422, "body": "Usually you cannot just replace lines of text files, because they are stored on the disk consecutively. Changing a line to a shorter or a longer one wouldn&#39;t be possible. In this case, the changed lines happen to be of the same length, but using this as an optimisation is not simple,  these things are done in database engines, not in text processor scripts"}], "tags": [], "owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "is_accepted": false, "score": 4, "last_activity_date": 1440628767, "last_edit_date": 1440628767, "creation_date": 1440628395, "answer_id": 32237790, "question_id": 32237654, "link": "https://stackoverflow.com/questions/32237654/how-to-swap-values-between-two-columns-of-a-tab-delimited-txt-file-in-place/32237790#32237790", "title": "How to swap values between two columns of a tab delimited txt file in place", "body": "<p>Try this</p>\n\n<pre><code>contents = []\nwith open('pythonTest.rtf') as x:\n    for line in x:\n        columns=line.split('\\t')\n        if len(columns) == 9 and columns[4]&gt;columns[3]:\n            columns[4],columns[3] = columns[3],columns[4]\n        contents.append('\\t'.join(columns))\nwith open('pythonTest.rtf', 'w') as y:\n    for line in contents:\n        y.write(line)\n</code></pre>\n\n<p>Or if you are fine with creating a new file, you don't have to store it in memory. You could also overwrite the first one with the new one:</p>\n\n<pre><code>import os\nwith open('pythonTest.rtf') as x, open('pythonTest.rtf.tmp', 'w') as y:\n    for line in x:\n        columns=line.split('\\t')\n        if len(columns) == 9 and columns[4]&gt;columns[3]:\n            columns[4],columns[3] = columns[3],columns[4]\n        y.write('\\t'.join(columns))\nos.remove('pythonTest.rtf')\nos.rename('pythonTest.rtf.tmp', 'pythonTest.rtf')\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5270460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844bfc7459aa93b1d9d1f6c3135a95b4?s=128&d=identicon&r=PG&f=1", "display_name": "E.McMahon", "link": "https://stackoverflow.com/users/5270460/e-mcmahon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1440632488, "creation_date": 1440627574, "last_edit_date": 1440632488, "question_id": 32237654, "link": "https://stackoverflow.com/questions/32237654/how-to-swap-values-between-two-columns-of-a-tab-delimited-txt-file-in-place", "title": "How to swap values between two columns of a tab delimited txt file in place", "body": "<p>I was attempting to use a tab-delimited txt file and found that there were some errors where values in two specific columns were swapped, which forced my program to shut down. </p>\n\n<p>The file has 9 columns total and columns 3 and 4 are sometimes swapped. I am attempting to write a python program that will swap the values in column 3 and 4 when column 3 > column 4. So far this is the code that I have, but I don't understand how to change the file (or write the changes) once I've set column 3 and column 4 to their new values. </p>\n\n<pre><code>with open('pythonTest.rtf') as x:\nfor line in x:\n    columns=line.split()\n    if len(columns)==9:\n        x=columns[3]\n        y=columns[4]\n        if columns[4]&gt;columns[3]:\n            columns[3]=y\n            columns[4]=x\n</code></pre>\n\n<p>Any guidance would be greatly appreciated.\nThank you,\nEvan McMahon</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 5233187, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a8a7e7c0769f7fc972ffdc8bc1937a26?s=128&d=identicon&r=PG&f=1", "display_name": "Shazia Nusrat", "link": "https://stackoverflow.com/users/5233187/shazia-nusrat"}, "edited": false, "score": 0, "creation_date": 1440627921, "post_id": 32237676, "comment_id": 52357657, "body": "Also tried this but no solution. You can see error above after removing $."}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 170, "user_id": 5233187, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a8a7e7c0769f7fc972ffdc8bc1937a26?s=128&d=identicon&r=PG&f=1", "display_name": "Shazia Nusrat", "link": "https://stackoverflow.com/users/5233187/shazia-nusrat"}, "edited": false, "score": 0, "creation_date": 1440629436, "post_id": 32237676, "comment_id": 52358159, "body": "Don&#39;t put the dollar sign back. Removing it is the correct thing to do. Now, you are getting the error because you are going to <code>&#47;</code> but you have not defined any url patterns for <code>&#47;</code>. Try going to <code>&#47;admin&#47;</code>, or <code>&#47;polls&#47;</code>, which you have added url patterns for."}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 0, "last_activity_date": 1440627723, "creation_date": 1440627723, "answer_id": 32237676, "question_id": 32237622, "link": "https://stackoverflow.com/questions/32237622/root-url-file-is-not-communicating-with-app-url-file/32237676#32237676", "title": "Root url file is not communicating with app url file", "body": "<p>Remove the dollar sign from the url that is including the polls urls.</p>\n\n<pre><code>url(r'^polls/', include('polls.urls')),\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 5233187, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a8a7e7c0769f7fc972ffdc8bc1937a26?s=128&d=identicon&r=PG&f=1", "display_name": "Shazia Nusrat", "link": "https://stackoverflow.com/users/5233187/shazia-nusrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32237676, "answer_count": 1, "score": 2, "last_activity_date": 1440629551, "creation_date": 1440627428, "last_edit_date": 1440629551, "question_id": 32237622, "link": "https://stackoverflow.com/questions/32237622/root-url-file-is-not-communicating-with-app-url-file", "title": "Root url file is not communicating with app url file", "body": "<p>I've created a project from official docs. Everything is same but still I am not able to communicate with my root urls.py through my app urls.py.</p>\n\n<p>If I use views to redirect to app urls.py they don't work. But same if do with root urls.py it works fine.</p>\n\n<p>My settings are:</p>\n\n<pre><code>ROOT_URLCONF = 'mysite.urls'\n</code></pre>\n\n<p>root urls:</p>\n\n<pre><code>from django.conf import settings\nfrom django.conf.urls.static import static\n\nfrom django.conf.urls import include, url\nfrom django.contrib import admin\n\nurlpatterns = [\n    url(r'^polls/$', include('polls.urls')),\n    url(r'^admin/', include(admin.site.urls)),\n\n]\n\nif settings.DEBUG:\n    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)\n    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>\n\n<p>app urls.py:</p>\n\n<pre><code>from django.conf.urls import url\n\nfrom polls import views\n\n urlpatterns = [\n     # ex: /polls/\n    url(r'^$', views.index, name='index'),\n    # ex: /polls/5/\n    url(r'^(?P&lt;question_id&gt;[0-9]+)/$', views.detail, name='detail'),\n    # ex: /polls/5/results/\n    url(r'^(?P&lt;question_id&gt;[0-9]+)/results/$', views.results, name='results'),\n    # ex: /polls/5/vote/\n    url(r'^(?P&lt;question_id&gt;[0-9]+)/vote/$', views.vote, name='vote'),\n ]\n</code></pre>\n\n<p>Simple view I am trying to present is:</p>\n\n<pre><code>from django.shortcuts import render, HttpResponse, RequestContext, loader\nfrom .models import Question\n\ndef index(request):\n     latest_question_list = Question.objects.order_by('-pub_date')[:5]\n    context = {'latest_question_list': latest_question_list}\n    return render(request, 'index.html', context)\n</code></pre>\n\n<p>Please help</p>\n\n<p>After removing the dollar from <code>polls/$</code>, I get a new error:</p>\n\n<pre><code>Page not found (404)\nRequest Method: GET\nRequest URL:    http://localhost:8000/\nUsing the URLconf defined in mysite.urls, Django tried these URL patterns, in this order:\n^polls/\n^admin/\n^static\\/(?P&lt;path&gt;.*)$\n^media\\/(?P&lt;path&gt;.*)$\nThe current URL, , didn't match any of these.\nYou're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard 404 page.\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 0, "creation_date": 1440628950, "post_id": 32237592, "comment_id": 52358008, "body": "Two things. One: An instance always knows the name of it&#39;s class: <code>self.__class__.__name__</code>. You do not need to hardcode it. Two: Instead of <code>def do_something(self): do_something_with_self(self)</code> you can just <code>do_something = do_something_with_self</code>"}], "answers": [{"tags": [], "owner": {"reputation": 44309, "user_id": 21640, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/492a3c5c13fb44d27229364e0993fa11?s=128&d=identicon&r=PG", "display_name": "Marcin", "link": "https://stackoverflow.com/users/21640/marcin"}, "is_accepted": true, "score": 3, "last_activity_date": 1440627421, "creation_date": 1440627421, "answer_id": 32237619, "question_id": 32237592, "link": "https://stackoverflow.com/questions/32237592/is-using-self-as-an-attribute-to-outside-method-a-good-practice/32237619#32237619", "title": "Is using self as an attribute to outside method a good practice?", "body": "<p>This is good practice. In general, you should avoid inheritance when you have a choice between inheritance and another simple mechanism for code sharing.</p>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 3, "last_activity_date": 1440627568, "creation_date": 1440627568, "answer_id": 32237652, "question_id": 32237592, "link": "https://stackoverflow.com/questions/32237592/is-using-self-as-an-attribute-to-outside-method-a-good-practice/32237652#32237652", "title": "Is using self as an attribute to outside method a good practice?", "body": "<p>It is a good practice if the situation calls for it. Sometimes an object needs to be passed to a function that works with objects of that type without being a method of that type of object, and that's the way to do it. For example, your object might have a logging function that includes a <code>dir()</code> of the object - <code>dir(self)</code> would be the way to do that.</p>\n\n<p>However, if <code>A</code> and <code>B</code> are really both objects of the same overarching kind (like <code>Letter</code>), I would recommend using inheritance.</p>\n"}], "owner": {"reputation": 1542, "user_id": 922009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f36f629503b3e2cbb089f82a40ec81?s=128&d=identicon&r=PG", "display_name": "amaurs", "link": "https://stackoverflow.com/users/922009/amaurs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 32237619, "answer_count": 2, "score": 3, "last_activity_date": 1440627568, "creation_date": 1440627308, "question_id": 32237592, "link": "https://stackoverflow.com/questions/32237592/is-using-self-as-an-attribute-to-outside-method-a-good-practice", "title": "Is using self as an attribute to outside method a good practice?", "body": "<p>I am trying to save me from repeating code in two classes, I have tested the following snippet and it works, I am wondering if it is a good practice or should I consider using inheritance. In that case is there something particularly wrong about this approach?</p>\n\n<pre><code>def do_something_with_self(obj):\n    print 'Hello, I was called from %s' % obj.name\n\nclass A(object):\n    name = \"Class A\"\n\n    def do_something(self):\n        do_something_with_self(self)    \n\nclass B(object):\n    name = \"Class B\"\n\n    def do_something(self):\n        do_something_with_self(self)\n\nif __name__ == '__main__':\n    a = A()\n    b = B()\n    a.do_something()\n    b.do_something() \n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "nltk"], "comments": [{"owner": {"reputation": 9283, "user_id": 1327005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b5b520280b7f71b4152579670ec5cb38?s=128&d=identicon&r=PG", "display_name": "bigOther", "link": "https://stackoverflow.com/users/1327005/bigother"}, "edited": false, "score": 1, "creation_date": 1440627255, "post_id": 32237564, "comment_id": 52357418, "body": "what you tried so far?"}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 1, "creation_date": 1440627423, "post_id": 32237564, "comment_id": 52357477, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/13423919/computing-n-grams-using-python\">Computing N Grams using Python</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1188, "user_id": 2998052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e75a139904dae2334fba46fa148e256?s=128&d=identicon&r=PG", "display_name": "fivetentaylor", "link": "https://stackoverflow.com/users/2998052/fivetentaylor"}, "is_accepted": false, "score": 1, "last_activity_date": 1440629295, "creation_date": 1440629295, "answer_id": 32237941, "question_id": 32237564, "link": "https://stackoverflow.com/questions/32237564/how-do-i-get-sorted-frequency-of-phrases-using-n-gram-analysis-in-python/32237941#32237941", "title": "How do I get sorted frequency of phrases using n-gram analysis in Python?", "body": "<p>Here's a solution without nltk:</p>\n\n<pre><code>from collections import deque\n\ndef window(seq, n=3):\n    it = iter(seq)\n    win = deque((next(it, None) for _ in xrange(n-1)), maxlen=n)\n    for e in it: \n        win.append(e)\n        yield tuple(win)\n\ndef sorted_grams(doc, n=3):\n    counts = {}\n    for ngram in window(doc, n): \n        counts[ngram] = counts.get(ngram, 0) + 1 \n\n    return sorted(((v,k) for k,v in counts.items()), reverse=True)\n\n\nexample_doc = 'it is a small world after all it is a small world after all'\nfor s in sorted_grams(example_doc.split(), 3): \n    print s\n</code></pre>\n"}], "owner": {"reputation": 1279, "user_id": 4747268, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e11a0fa1e0a9bc2d5c619e6dd44c36c5?s=128&d=identicon&r=PG&f=1", "display_name": "n00b", "link": "https://stackoverflow.com/users/4747268/n00b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1440629295, "creation_date": 1440627188, "question_id": 32237564, "link": "https://stackoverflow.com/questions/32237564/how-do-i-get-sorted-frequency-of-phrases-using-n-gram-analysis-in-python", "title": "How do I get sorted frequency of phrases using n-gram analysis in Python?", "body": "<p>I have a file, \"filename.txt\". I need to get all the n-grams, say trigrams, along with their frequency, in a sorted manner. My aim is basically to get the most commonly used phrases.</p>\n\n<p>How do I do this using nltk/scikit-learn?</p>\n"}, {"tags": ["python", "setuptools"], "owner": {"reputation": 3154, "user_id": 4638839, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6d448a9bda6120bfc480bff766e0830d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4638839/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440627083, "creation_date": 1440627083, "question_id": 32237541, "link": "https://stackoverflow.com/questions/32237541/how-do-i-determine-what-dependency-versions-to-require-in-a-package", "title": "How do I determine what dependency versions to require in a package?", "body": "<p>For the install_requires option of setuptools.setup, one can specify a minimum version of a required package:</p>\n\n<pre><code>setup(\n    name=\"mypackage\",\n    ...\n    install_requires = [\"somedep&gt;=x.y.z\"]\n)\n</code></pre>\n\n<p>How do I determine the appropriate value of x.y.z, without in-depth knowledge of the feature history of <code>somedep</code>?</p>\n\n<p>(context: from the user/admin perspective, I have run into cases where a minimum version was required but not specified, making for very strange errors. I would like to not cause that problem for anyone else.)</p>\n"}, {"tags": ["python", "flask"], "answers": [{"tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": true, "score": 9, "last_activity_date": 1440628875, "last_edit_date": 1440628875, "creation_date": 1440627720, "answer_id": 32237675, "question_id": 32237538, "link": "https://stackoverflow.com/questions/32237538/accept-list-of-ints-in-flask-url-instead-of-one-int/32237675#32237675", "title": "Accept list of ints in Flask url instead of one int", "body": "<p>Rather than passing it in the url, pass a form value.  Use <code>request.form.getlist</code> to get a list of values for a key, rather than a single value.  You can pass <code>type=int</code> to make sure all the values are ints.</p>\n\n<pre><code>@app.route('/users/', methods=['POST'])\ndef get_users():\n    ids = request.form.getlist('user_ids', type=int)\n    users = []\n\n    for id in ids:\n        try:\n            user = whatever_user_method(id)\n            users.append(user)\n        except:\n            continue\n\n    returns users\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": false, "score": 3, "last_activity_date": 1618749009, "last_edit_date": 1618749009, "creation_date": 1440629262, "answer_id": 32237936, "question_id": 32237538, "link": "https://stackoverflow.com/questions/32237538/accept-list-of-ints-in-flask-url-instead-of-one-int/32237936#32237936", "title": "Accept list of ints in Flask url instead of one int", "body": "<p>Write a <a href=\"https://werkzeug.palletsprojects.com/routing/#custom-converters\" rel=\"nofollow noreferrer\">custom url converter</a> that accepts a list of ints separated by a delimiter, rather than just one int.  The <a href=\"https://api.stackexchange.com/docs/vectors\">Stack Exchange API</a>, for example, accepts multiple ids delimted by semicolons: <code>/answers/1;2;3</code>.  Register the converter with your app and use it in your route.</p>\n<pre><code>from werkzeug.routing import BaseConverter\n\nclass IntListConverter(BaseConverter):\n    &quot;&quot;&quot;Match ints separated with ';'.&quot;&quot;&quot;\n\n    # at least one int, separated by ;, with optional trailing ;\n    regex = r'\\d+(?:;\\d+)*;?'\n\n    # this is used to parse the url and pass the list to the view function\n    def to_python(self, value):\n        return [int(x) for x in value.split(';')]\n\n    # this is used when building a url with url_for\n    def to_url(self, value):\n        return ';'.join(str(x) for x in value)\n\n# register the converter when creating the app\napp = Flask(__name__)\napp.url_map.converters['int_list'] = IntListConverter\n\n# use the converter in the route\n@app.route('/user/&lt;int_list:ids&gt;')\ndef process_user(ids):\n    for id in ids:\n    ...\n\n# will recognize /user/1;2;3 and pass ids=[1, 2, 3]\n# will 404 on /user/1;2;z\n# url_for('process_user', ids=[1, 2, 3]) produces /user/1;2;3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 13503720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhscLyK6rfMhXybPj6soWMATFx_UxaQNhYUXzC3F5w=k-s128", "display_name": "Henshal B", "link": "https://stackoverflow.com/users/13503720/henshal-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1618752144, "creation_date": 1618752144, "answer_id": 67149061, "question_id": 32237538, "link": "https://stackoverflow.com/questions/32237538/accept-list-of-ints-in-flask-url-instead-of-one-int/67149061#67149061", "title": "Accept list of ints in Flask url instead of one int", "body": "<p><em>Simple as this</em></p>\n<pre><code>@app.route('/user/&lt;users&gt;')\ndef process_user(users):\n    users = list(users.split(&quot;,&quot;))\n    print(users)\n</code></pre>\n<p><em>Input</em></p>\n<pre><code>/users/[1,2,3,4]\n</code></pre>\n<p><em>Output</em></p>\n<pre><code>[1,2,3,4]\n</code></pre>\n"}], "owner": {"reputation": 27355, "user_id": 902885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fc74acf73e1261de1f71cc5987258771?s=128&d=identicon&r=PG", "display_name": "frazman", "link": "https://stackoverflow.com/users/902885/frazman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4849, "favorite_count": 0, "accepted_answer_id": 32237675, "answer_count": 3, "score": 4, "last_activity_date": 1618752144, "creation_date": 1440627077, "last_edit_date": 1440629686, "question_id": 32237538, "link": "https://stackoverflow.com/questions/32237538/accept-list-of-ints-in-flask-url-instead-of-one-int", "title": "Accept list of ints in Flask url instead of one int", "body": "<p>My API has a route to process a user by an int id passed in the url.  I'd like to pass a list of ids so I can make one bulk request to the API rather than several single requests.  How can I accept a list of ids?</p>\n\n<pre><code>@app.route('/user/&lt;int:user_id&gt;')  # should accept multiple ints\ndef process_user(user_id):\n    return str(user_id)\n</code></pre>\n"}, {"tags": ["python", "cassandra", "ipython-notebook"], "answers": [{"tags": [], "owner": {"reputation": 771, "user_id": 3761363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oBCdD.png?s=128&g=1", "display_name": "cchi", "link": "https://stackoverflow.com/users/3761363/cchi"}, "is_accepted": true, "score": 2, "last_activity_date": 1440718163, "creation_date": 1440718163, "answer_id": 32261057, "question_id": 32237523, "link": "https://stackoverflow.com/questions/32237523/using-jupyter-ipython-and-cassandra-driver/32261057#32261057", "title": "Using Jupyter IPython and Cassandra driver", "body": "<p>The connection issue has to do with nodes communicating with internal IP addresses. Came across this <a href=\"https://groups.google.com/a/lists.datastax.com/forum/#!topic/python-driver-user/7Q1oysXHSV8\" rel=\"nofollow\">post</a> which helped clarify the problem.</p>\n\n<blockquote>\n  <p>\"When connecting to the cluster from external client using the the nodes' external IP addresses, these internal IPs gets returned as hosts, which makes the connection pool produce warnings since it can't connect to them.\"</p>\n</blockquote>\n\n<p>Still not sure why the behavior is different between command-line and notebook environments, but I got fixed the connection issue by using <code>WhiteListRoundRobinPolicy</code> as suggested (explicitly specifying the public ip addresses in the cluster)</p>\n\n<pre><code>from cassandra.cluster import Cluster\nfrom cassandra.policies import WhiteListRoundRobinPolicy\n\nlbp = WhiteListRoundRobinPolicy(['54.209.226.178', '52.7.220.112'])\ncluster = Cluster( contact_points=['54.209.226.178', '52.7.220.112'], load_balancing_policy=lbp )\nsession = cluster.connect()\n</code></pre>\n\n<p>More on <a href=\"https://datastax.github.io/python-driver/api/cassandra/policies.html#cassandra.policies.WhiteListRoundRobinPolicy\" rel=\"nofollow\">WhiteListRoundRobinPolicy</a></p>\n"}], "owner": {"reputation": 771, "user_id": 3761363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oBCdD.png?s=128&g=1", "display_name": "cchi", "link": "https://stackoverflow.com/users/3761363/cchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1909, "favorite_count": 0, "accepted_answer_id": 32261057, "answer_count": 1, "score": 1, "last_activity_date": 1440718163, "creation_date": 1440626986, "last_edit_date": 1592644375, "question_id": 32237523, "link": "https://stackoverflow.com/questions/32237523/using-jupyter-ipython-and-cassandra-driver", "title": "Using Jupyter IPython and Cassandra driver", "body": "<p>I am trying to use ipython notebook with the cassandra python driver. Using command line ipython is completely fine; I am able to establish connection. However, when I use Jupyter IPython notebook with same code, I encounter a connection error.</p>\n<pre><code>from cassandra.cluster import Cluster\ncluster = Cluster( contact_points=['xxx.xxx.xxx.xxx', 'xxx.xxx.xxx.xxx'] )\nsession = cluster.connect()\n</code></pre>\n<p>I can run the above 3 lines using both ipython and python via command line. I get errors when executing the code in jupyter ipython notebook:</p>\n<blockquote>\n<p>WARNING:cassandra.cluster:Failed to create connection pool for new host 10.0.0.7</p>\n<p>...</p>\n<p>error: [Errno None] Tried connecting to [('10.0.0.7', 9042)]. Last error: None</p>\n<p>WARNING:cassandra.pool:Error attempting to reconnect to 10.0.0.7, scheduling retry in 2.0 seconds: [Errno None] Tried connecting to [('10.0.0.7', 9042)]. Last error: None</p>\n</blockquote>\n<p>(I am using cassandra python driver <code>pip install cassandra-driver</code>)</p>\n<p>Could it be an ip address or routing issue? The error message mentioned for &quot;new host&quot; is pointing to a local ip address and NOT the ones I use to connect. If that's the case, I wonder why ipython command line vs notebook yields different results, so it has something to do with how notebook handles connections. Does anyone have any insights why this is the case and possibly how I can fix or get around this connection error?</p>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 2309332, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/utlPq.png?s=128&g=1", "display_name": "Duffau", "link": "https://stackoverflow.com/users/2309332/duffau"}, "edited": false, "score": 0, "creation_date": 1440627104, "post_id": 32237519, "comment_id": 52357367, "body": "Ok thanks. Does this only apply to lists? Because i tried adding something an int and it did not do the same thing."}, {"owner": {"reputation": 1297, "user_id": 1945088, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa51ef41702ba1cf1d6e25e3385e14ba?s=128&d=identicon&r=PG&f=1", "display_name": "pandubear", "link": "https://stackoverflow.com/users/1945088/pandubear"}, "reply_to_user": {"reputation": 353, "user_id": 2309332, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/utlPq.png?s=128&g=1", "display_name": "Duffau", "link": "https://stackoverflow.com/users/2309332/duffau"}, "edited": false, "score": 0, "creation_date": 1440627155, "post_id": 32237519, "comment_id": 52357384, "body": "In many programming languages, (including Python) this applies to objects, (like lists) but not primitives. (like ints) That is, you have to copy objects, but not primitives."}, {"owner": {"reputation": 353, "user_id": 2309332, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/utlPq.png?s=128&g=1", "display_name": "Duffau", "link": "https://stackoverflow.com/users/2309332/duffau"}, "edited": false, "score": 0, "creation_date": 1440627575, "post_id": 32237519, "comment_id": 52357530, "body": "Ok good to know! Thanks."}], "tags": [], "owner": {"reputation": 1297, "user_id": 1945088, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa51ef41702ba1cf1d6e25e3385e14ba?s=128&d=identicon&r=PG&f=1", "display_name": "pandubear", "link": "https://stackoverflow.com/users/1945088/pandubear"}, "is_accepted": true, "score": 1, "last_activity_date": 1440626967, "creation_date": 1440626967, "answer_id": 32237519, "question_id": 32237493, "link": "https://stackoverflow.com/questions/32237493/python-assigning-a-list-to-a-variable-from-a-named-list-how-to-avoid-dependenc/32237519#32237519", "title": "python: Assigning a list to a variable from a named list. How to avoid dependency?", "body": "<p><code>y = x</code> assigns <code>y</code> to be the <em>same</em> list as <code>x</code>. Instead, you should copy the list. One way to do this is:</p>\n\n<pre><code>y = list(x)\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 2309332, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/utlPq.png?s=128&g=1", "display_name": "Duffau", "link": "https://stackoverflow.com/users/2309332/duffau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1440627015, "accepted_answer_id": 32237519, "answer_count": 1, "score": -1, "last_activity_date": 1440626967, "creation_date": 1440626800, "question_id": 32237493, "link": "https://stackoverflow.com/questions/32237493/python-assigning-a-list-to-a-variable-from-a-named-list-how-to-avoid-dependenc", "closed_reason": "Duplicate", "title": "python: Assigning a list to a variable from a named list. How to avoid dependency?", "body": "<p>I'm learning Python and just came across the following behaviour.</p>\n\n<p>I define a list <code>x</code> and assign (what I think is) the values of <code>x</code> to the variable <code>y</code>.</p>\n\n<pre><code>&gt;&gt;&gt; x = [1,2,3]\n&gt;&gt;&gt; y = x\n&gt;&gt;&gt; y.extend([4,5,6])\n&gt;&gt;&gt; print y\n[1, 2, 3, 4, 5, 6]\n&gt;&gt;&gt; print x\n[1, 2, 3, 4, 5, 6]\n</code></pre>\n\n<p>But after <code>extend</code>'ing the list <code>y</code>, both <code>x</code> and <code>y</code> has the extra three elements. The same goes for <code>append</code>.</p>\n\n<pre><code>&gt;&gt;&gt; x = [1,2]\n&gt;&gt;&gt; y = x\n&gt;&gt;&gt; y.append(3)\n&gt;&gt;&gt; print y\n[1, 2, 3]\n&gt;&gt;&gt; print x\n[1, 2, 3]\n</code></pre>\n\n<p>I understood the assign operator <code>=</code> as assigning from right to left, what am I not getting?</p>\n\n<p>How can I assign a list from a named list but still be able to alter the new list without affecting the old one? Or is this not the right way to handle lists in Python?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1440627572, "post_id": 32237473, "comment_id": 52357529, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/q/23399867/2877364\">stackoverflow.com/q/23399867/2877364</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 121, "user_id": 2803555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7444f85036cc23ad8b86a5ba040a42ef?s=128&d=identicon&r=PG&f=1", "display_name": "user2803555", "link": "https://stackoverflow.com/users/2803555/user2803555"}, "edited": false, "score": 0, "creation_date": 1440639114, "post_id": 32237711, "comment_id": 52360517, "body": "Run <code>python --version</code> when you have the path set for Python 3.  What is the output?"}, {"owner": {"reputation": 121, "user_id": 2803555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7444f85036cc23ad8b86a5ba040a42ef?s=128&d=identicon&r=PG&f=1", "display_name": "user2803555", "link": "https://stackoverflow.com/users/2803555/user2803555"}, "edited": false, "score": 0, "creation_date": 1440650464, "post_id": 32237711, "comment_id": 52363127, "body": "It says it is using python 2.7"}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 2, "last_activity_date": 1440668558, "last_edit_date": 1495542580, "creation_date": 1440627906, "answer_id": 32237711, "question_id": 32237473, "link": "https://stackoverflow.com/questions/32237473/python-3-does-not-run-i-edited-the-system-variables/32237711#32237711", "title": "Python 3 does not run, I edited the system variables", "body": "<p>In addition to changing <code>PATH</code>, also change <code>PYTHONPATH</code> and <code>PYTHONHOME</code>.  See, e.g., <a href=\"https://www.assembla.com/spaces/foundationsqa/tickets/5-syntax-error-in-site-py?comment=296674713#comment:296674713\" rel=\"nofollow noreferrer\">this</a>.  For example:</p>\n\n<pre><code>set PYTHONHOME=C:\\Python33\nset PYTHONPATH=C:\\Python33\\lib\n</code></pre>\n\n<p>(thanks to <a href=\"https://stackoverflow.com/users/630924/aflat\">aflat</a>, <a href=\"https://stackoverflow.com/a/23400374/2877364\">this answer</a>).</p>\n\n<p><strong>Edit</strong>: </p>\n\n<ol>\n<li><p>Confirm that you are setting the PATH so that it will take effect.  See Step 2 of <a href=\"http://www.aaronstannard.com/how-to-setup-a-proper-python-environment-on-windows/\" rel=\"nofollow noreferrer\">this</a>.</p></li>\n<li><p>At the command prompt, run <code>path</code> and confirm it lists <code>Python33</code> and not <code>Python27</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 121, "user_id": 2803555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7444f85036cc23ad8b86a5ba040a42ef?s=128&d=identicon&r=PG&f=1", "display_name": "user2803555", "link": "https://stackoverflow.com/users/2803555/user2803555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 32237711, "answer_count": 1, "score": 1, "last_activity_date": 1440668558, "creation_date": 1440626703, "question_id": 32237473, "link": "https://stackoverflow.com/questions/32237473/python-3-does-not-run-i-edited-the-system-variables", "title": "Python 3 does not run, I edited the system variables", "body": "<p>When I try to run python 3 I get this error:</p>\n\n<pre><code>C:\\Users\\owner&gt;python\nFile \"C:\\Python33\\lib\\site.py\", line 173\nfile=sys.stderr)\n    ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I have never edited the site.py file.</p>\n\n<p>I was running python 2 before, but I want to use python 3 so I edited the System Variables:</p>\n\n<pre><code> C:\\Users\\owner\\AppData\\Roaming\\cabal\\bin;C:\\Ruby193\\bin;C:\\Program Files (x86)\\Google\\google_appengine\\;C:\\ProgramData\\chocolatey\\bin;C:\\Python33;C:\\Python33\\Scripts;\n</code></pre>\n\n<p>when I edit them back to use python 2 it works fine:</p>\n\n<pre><code>C:\\Users\\owner\\AppData\\Roaming\\cabal\\bin;C:\\Ruby193\\bin;C:\\Program Files (x86)\\Google\\google_appengine\\;C:\\ProgramData\\chocolatey\\bin;C:\\Python27;C:\\Python27\\Scripts;\n</code></pre>\n"}, {"tags": ["python", "sensors", "pyserial", "raspberry-pi2"], "comments": [{"owner": {"reputation": 8503, "user_id": 1946861, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/2ObQs.jpg?s=128&g=1", "display_name": "jlhonora", "link": "https://stackoverflow.com/users/1946861/jlhonora"}, "edited": false, "score": 0, "creation_date": 1440627713, "post_id": 32237417, "comment_id": 52357589, "body": "You might be reading faster than the sensor&#39;s output rate. Try blocking reads by a minimum number of characters: <a href=\"https://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects\" rel=\"nofollow noreferrer\">docs.python.org/2/tutorial/&hellip;</a> . Printing to a terminal is much slower than just writing to a file, which explains why it behaves differently."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5270379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b75f9dcc5a21768fc187b977673e184?s=128&d=identicon&r=PG&f=1", "display_name": "ohnonotyou", "link": "https://stackoverflow.com/users/5270379/ohnonotyou"}, "edited": false, "score": 0, "creation_date": 1440780127, "post_id": 32237645, "comment_id": 52430520, "body": "So I tried    <code>while True:     dodata = doser.read()     tempdata = tempser.read()     date = datetime.datetime.now()     timestamp = date.strftime(&quot;%Y&#47;%m&#47;%d %H:%M&quot;)      if dodata == &quot;\\r&quot; and tempdata == &quot;\\r&quot;:             print timestamp +&quot;  &quot;+line             line = &quot;&quot;      else:             line = line + dodata + tempdata</code> But it didn&#39;t get the output right. Any other suggestions?"}], "tags": [], "owner": {"reputation": 44, "user_id": 1258549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20c4957587fe90d9726a42c40090599?s=128&d=identicon&r=PG", "display_name": "Manuel Wong", "link": "https://stackoverflow.com/users/1258549/manuel-wong"}, "is_accepted": false, "score": 0, "last_activity_date": 1440627531, "creation_date": 1440627531, "answer_id": 32237645, "question_id": 32237417, "link": "https://stackoverflow.com/questions/32237417/raspberry-pi-2-python-mutliple-senors-output/32237645#32237645", "title": "Raspberry Pi 2 / Python + Mutliple Senors output?", "body": "<p>The problem is that your are printing the values with 2 print instructions.  Every print generate a line. Try to print the data when you have both values of your reading. About the duplicate lines, clear variables line and line2 in every iteration on the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5270379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b75f9dcc5a21768fc187b977673e184?s=128&d=identicon&r=PG&f=1", "display_name": "ohnonotyou", "link": "https://stackoverflow.com/users/5270379/ohnonotyou"}, "edited": false, "score": 0, "creation_date": 1441042642, "post_id": 32300867, "comment_id": 52508683, "body": "Thank you so much! It worked with just a little tweak. Your mod still gave me the the single reading and a reading with both sensors every 5  lines or so. I just added <code>if len(lineout) &gt;=20:</code>  So that it would print only the reading that had both of the sensors. Now it works like I want."}], "tags": [], "owner": {"reputation": 44, "user_id": 1258549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20c4957587fe90d9726a42c40090599?s=128&d=identicon&r=PG", "display_name": "Manuel Wong", "link": "https://stackoverflow.com/users/1258549/manuel-wong"}, "is_accepted": true, "score": 1, "last_activity_date": 1440967638, "last_edit_date": 1440967638, "creation_date": 1440966847, "answer_id": 32300867, "question_id": 32237417, "link": "https://stackoverflow.com/questions/32237417/raspberry-pi-2-python-mutliple-senors-output/32300867#32300867", "title": "Raspberry Pi 2 / Python + Mutliple Senors output?", "body": "<p>I think the problem is aobut synchronization. Since you are using a serial port to read the sensor, you read one character at a time and you get the whole reading after you find the character \"\\r\".  Sometimes you find that both readings (tempser and doser) are completed and that's why you find two readings in a line in your file.  You can try to print your data every time you find your reading is completed.  </p>\n\n<pre><code>import serial\nimport datetime\nimport time\n\n###Sensor serial settings\ntemp = '/dev/ttyAMA0'\ntempser = serial.Serial(temp, 9600)\ndo = '/dev/ttyUSB0'\ndoser = serial.Serial(do, 9600)\n\n###Temperature Sensor Settings\ntempser.write(\"SF\\r\")\n\n###DOSensor Settings\ndoser.write(\"C,1\\r\")\n\n###Looop\nline = \"\" \nline2 = \"\"\nlineout = \"\"\n\nwhile True:\n    dodata = doser.read()\n    tempdata = tempser.read()\n    f=open('2Sensor.txt','a')\n    date = datetime.datetime.now()\n    timestamp = date.strftime(\"%Y/%m/%d %H:%M\")\n    outstring = str(timestamp)+\" \"+line\n    outstring2 = \" \"+line2+\"\\n\"\n\n    if (dodata == \"\\r\"):\n        lineout = \" D.O. \" + line\n        f.write(outstring)\n        line = \"\"\n\n    else:\n        line = line + dodata\n\n    if(tempdata == \"\\r\"):           \n        lineout = lineout + \" Temp \"+line2\n        f.write(outstring2)\n        line2 = \"\"\n\n    else:\n        line2 = line2 + tempdata\n\n    if len(lineout) != 0:\n        print timestamp + lineout  \n#       optional if you want to print the same result to a file uncomment the next line and remove the previous f.write instructions\n#       f.write(timestamp + lineout)\n        lineout = \"\"\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5270379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b75f9dcc5a21768fc187b977673e184?s=128&d=identicon&r=PG&f=1", "display_name": "ohnonotyou", "link": "https://stackoverflow.com/users/5270379/ohnonotyou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 2, "accepted_answer_id": 32300867, "answer_count": 2, "score": 3, "last_activity_date": 1441043869, "creation_date": 1440626425, "last_edit_date": 1441043869, "question_id": 32237417, "link": "https://stackoverflow.com/questions/32237417/raspberry-pi-2-python-mutliple-senors-output", "title": "Raspberry Pi 2 / Python + Mutliple Senors output?", "body": "<p>I'm new to coding/Python an I'm working on some code that will take the values from two Atlas Scientific Sensors (temperature and dissolved oxygen) and write them to a text file along with a timestamp using a Raspberry Pi Model2.\nSo far this is what I have:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport serial\nimport datetime\nimport time\n\n###Sensor serial settings\ntemp = '/dev/ttyAMA0'\ntempser = serial.Serial(temp, 9600)\ndo = '/dev/ttyUSB0'\ndoser = serial.Serial(do, 9600)\n\n###Temperature Sensor Settings\ntempser.write(\"SF\\r\")\n\n###DOSensor Settings\ndoser.write(\"C,1\\r\")\n\n###Looop\nline = \"\"\nline2 = \"\"\n\nwhile True:\n    dodata = doser.read()\n    tempdata = tempser.read()\n    f=open('2Sensor.txt','a')\n    date = datetime.datetime.now()\n    timestamp = date.strftime(\"%Y/%m/%d %H:%M\")\n    outstring = str(timestamp)+\" \"+line\n    outstring2 = \" \"+line2+\"\\n\"\n\n    if(dodata == \"\\r\"):\n            print timestamp +\" D.O. \"+line\n            f.write(outstring)\n            line = \"\"\n\n    else:\n            line = line + dodata\n\n    if(tempdata == \"\\r\"):           \n            print timestamp +\" Temp \"+line2\n            f.write(outstring2)\n            line2 = \"\"\n\n    else:\n            line2 = line2 + tempdata\n</code></pre>\n\n<p>the teminal output looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2015/08/26 14:08 D.O. 8.42\n2015/08/26 14:08 Temp 84.38\n2015/08/26 14:08 D.O. 8.42\n2015/08/26 14:08 Temp 84.39\n</code></pre>\n\n<p>and writes to a text file like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2015/08/26 13:47 8.42 84.45\n2015/08/26 13:48 8.43 84.47\n2015/08/26 13:48 8.42 84.47\n2015/08/26 13:48 8.42 84.45\n2015/08/26 13:49 8.422015/08/26 13:49 8.42 84.45\n2015/08/26 13:50 8.42 84.45\n2015/08/26 13:50 8.42 84.47\n2015/08/26 13:50 8.43 84.47\n2015/08/26 13:51 8.43 84.47\n2015/08/26 13:51 8.432015/08/26 13:52 8.43 84.45\n2015/08/26 13:52 8.43 84.47\n</code></pre>\n\n<p>Why can I not get the terminal output to have the values from both sensors on one line and why does it double up in the text file every five readings?\nI have tried many different changes from googling but what I have posted here got me closest to my goals.\nAny help or tips  would be appreciated.</p>\n\n<p>Info on the sensors</p>\n\n<p><a href=\"http://www.atlas-scientific.com/_files/_datasheets/_circuit/DO_EZO_Datasheet.pdf?\" rel=\"nofollow\">Do Sensor</a></p>\n\n<p><a href=\"http://www.atlas-scientific.com/_files/_datasheets/_probe/ENV-TEMP-D.pdf\" rel=\"nofollow\">Temp</a></p>\n\n<p>Thanks!</p>\n\n<p><strong>Here is the final code with Manuel Wong's mods and my tweaks:</strong></p>\n\n<pre><code>import serial\nimport datetime\nimport time\n\n###Sensor serial settings\ntemp = '/dev/ttyAMA0'\ntempser = serial.Serial(temp, 9600)\ndo = '/dev/ttyUSB0'\ndoser = serial.Serial(do, 9600)\n\n###Temperature Sensor Settings\ntempser.write(\"SF\\r\")\n\n###DOSensor Settings\ndoser.write(\"C,1\\r\")\n\n###Looop\nline = \"\" \nline2 = \"\"\nlineout = \"\"\n\nwhile True:\n    dodata = doser.read()\n    tempdata = tempser.read()\n    f=open('2Sensor.txt','a')\n    date = datetime.datetime.now()\n    timestamp = date.strftime(\"%Y/%m/%d %H:%M\")\n\n    if (dodata == \"\\r\"):\n        lineout = \" D.O. \" + line\n        line = \"\"\n\n    else:\n        line = line + dodata\n\n    if(tempdata == \"\\r\"):           \n        lineout = lineout + \" Temp \"+line2\n        line2 = \"\"\n\n    else:\n        line2 = line2 + tempdata\n\n    if len(lineout) &gt;= 20:\n        print timestamp + lineout  \n        f.write(timestamp + lineout)\n        lineout = \"\"\n\n        time.sleep(360)\n</code></pre>\n"}, {"tags": ["python", "ssl", "flask"], "answers": [{"comments": [{"owner": {"reputation": 2258, "user_id": 5270172, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2VVKW.jpg?s=128&g=1", "display_name": "Kelly Keller-Heikkila", "link": "https://stackoverflow.com/users/5270172/kelly-keller-heikkila"}, "reply_to_user": {"reputation": 6574, "user_id": 4698026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-P-bQf8VLKQY/AAAAAAAAAAI/AAAAAAAAAO4/a_8mG7UXRfo/photo.jpg?sz=128", "display_name": "Himanshu Mishra", "link": "https://stackoverflow.com/users/4698026/himanshu-mishra"}, "edited": false, "score": 3, "creation_date": 1483455872, "post_id": 32238093, "comment_id": 70099013, "body": "I&#39;m not sure how it would redirect more than once, unless you have something else that&#39;s redirecting from https back to http somewhere, creating a loop. It should only redirect once."}, {"owner": {"reputation": 365, "user_id": 1137353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eba200f038e0ddc01861e54f25d7337?s=128&d=identicon&r=PG", "display_name": "jaysqrd", "link": "https://stackoverflow.com/users/1137353/jaysqrd"}, "reply_to_user": {"reputation": 6574, "user_id": 4698026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-P-bQf8VLKQY/AAAAAAAAAAI/AAAAAAAAAO4/a_8mG7UXRfo/photo.jpg?sz=128", "display_name": "Himanshu Mishra", "link": "https://stackoverflow.com/users/4698026/himanshu-mishra"}, "edited": false, "score": 1, "creation_date": 1502490512, "post_id": 32238093, "comment_id": 78248523, "body": "Reason that @HimanshuMishra ran into issues that they are probably terminating SSL. Checking <code>request.is_secure()</code> is what you want because it respects the <code>X-Forwarded-Protocol</code> header. <a href=\"https://code.djangoproject.com/ticket/14597\" rel=\"nofollow noreferrer\">code.djangoproject.com/ticket/14597</a>"}, {"owner": {"reputation": 365, "user_id": 1137353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eba200f038e0ddc01861e54f25d7337?s=128&d=identicon&r=PG", "display_name": "jaysqrd", "link": "https://stackoverflow.com/users/1137353/jaysqrd"}, "edited": false, "score": 2, "creation_date": 1502490553, "post_id": 32238093, "comment_id": 78248536, "body": "I think the change is as simple as: <code>if not request.is_secure():</code> as @tuned mentions below."}, {"owner": {"reputation": 365, "user_id": 1137353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eba200f038e0ddc01861e54f25d7337?s=128&d=identicon&r=PG", "display_name": "jaysqrd", "link": "https://stackoverflow.com/users/1137353/jaysqrd"}, "edited": false, "score": 4, "creation_date": 1502491153, "post_id": 32238093, "comment_id": 78248675, "body": "Should actually be request.is_secure"}], "tags": [], "owner": {"reputation": 2258, "user_id": 5270172, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2VVKW.jpg?s=128&g=1", "display_name": "Kelly Keller-Heikkila", "link": "https://stackoverflow.com/users/5270172/kelly-keller-heikkila"}, "is_accepted": false, "score": 42, "last_activity_date": 1440630199, "creation_date": 1440630199, "answer_id": 32238093, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/32238093#32238093", "title": "python flask redirect to https from http", "body": "<p>To me, it appears you're making it more complicated than it needs to be. Here is the code I use in my views.py script to force user to HTTPS connections:</p>\n\n<pre><code>@app.before_request\ndef before_request():\n    if request.url.startswith('http://'):\n        url = request.url.replace('http://', 'https://', 1)\n        code = 301\n        return redirect(url, code=code)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 957, "user_id": 2536357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TyZE9.png?s=128&g=1", "display_name": "tuned", "link": "https://stackoverflow.com/users/2536357/tuned"}, "is_accepted": false, "score": 5, "last_activity_date": 1461662551, "creation_date": 1461662551, "answer_id": 36860633, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/36860633#36860633", "title": "python flask redirect to https from http", "body": "<p>The standard solution is to wrap the request with an <code>enforce_ssl</code> decorator that after checking some flags in the app configuration (flags you can set depending on your debugging needs) modifies the request's url with <code>request.url</code>. </p>\n\n<p>As it is written <a href=\"http://flask.pocoo.org/snippets/93/\" rel=\"noreferrer\">here</a>.</p>\n\n<p>You can modify the code to make it working with <code>before_request</code> as suggested by @kelly-keller-heikkila</p>\n"}, {"comments": [{"owner": {"reputation": 1414, "user_id": 8808193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580cdf8d6e2da28f961f4e1aaa0a680d?s=128&d=identicon&r=PG", "display_name": "Josh Wolff", "link": "https://stackoverflow.com/users/8808193/josh-wolff"}, "edited": false, "score": 0, "creation_date": 1564633176, "post_id": 50041843, "comment_id": 101096748, "body": "I believe flask_sslify is no longer maintained .. see @Eyal Levin &#39;s answer below"}], "tags": [], "owner": {"reputation": 882, "user_id": 6262716, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Fice8.jpg?s=128&g=1", "display_name": "Rodolfo Alvarez", "link": "https://stackoverflow.com/users/6262716/rodolfo-alvarez"}, "is_accepted": false, "score": 17, "last_activity_date": 1524742161, "creation_date": 1524742161, "answer_id": 50041843, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/50041843#50041843", "title": "python flask redirect to https from http", "body": "<p>According with the <a href=\"https://github.com/heroku-python/flask-sslify\" rel=\"noreferrer\">docs</a>, after <code>pip install Flask-SSLify</code> you only need to insert the following code:</p>\n\n<pre><code>from flask import Flask\nfrom flask_sslify import SSLify\n\napp = Flask(__name__)\nsslify = SSLify(app)\n</code></pre>\n\n<p>I have done it and it works very well. Am I missing something in the discussion ?</p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 592043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a0a6cee6bd914c470e3bacf5fd9f33?s=128&d=identicon&r=PG", "display_name": "anulaibar", "link": "https://stackoverflow.com/users/592043/anulaibar"}, "is_accepted": false, "score": 10, "last_activity_date": 1612862438, "last_edit_date": 1612862438, "creation_date": 1543326106, "answer_id": 53501072, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/53501072#53501072", "title": "python flask redirect to https from http", "body": "<p>Thanks to answer from <a href=\"https://stackoverflow.com/users/5270172/kelly-keller-heikkila\">Kelly Keller-Heikkila</a> and comment by <a href=\"https://stackoverflow.com/users/1137353/jaysqrd\">jaysqrd</a> I ended up doing this in my Flask app:</p>\n<pre><code>from flask import request, redirect\n...\n\n@app.before_request\ndef before_request():\n    if app.env == &quot;development&quot;:\n        return\n    if request.is_secure:\n        return\n\n    url = request.url.replace(&quot;http://&quot;, &quot;https://&quot;, 1)\n    code = 301\n    return redirect(url, code=code)\n</code></pre>\n<p>I tried the <code>flask_sslify</code> solution suggested by <a href=\"https://stackoverflow.com/users/6262716/rodolfo-alvarez\">Rodolfo Alvarez</a> but ran into <a href=\"https://github.com/kennethreitz/flask-sslify/issues/51\" rel=\"nofollow noreferrer\">this issue</a> and went with the above solution instead.</p>\n<p>If the app is running in development mode or the request is already on https there's no need to redirect.</p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 1550594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ut1nt.png?s=128&g=1", "display_name": "MohanBabu", "link": "https://stackoverflow.com/users/1550594/mohanbabu"}, "is_accepted": false, "score": 0, "last_activity_date": 1543372735, "creation_date": 1543372735, "answer_id": 53511295, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/53511295#53511295", "title": "python flask redirect to https from http", "body": "<p>I'm using cloud foundry python app which is behind a load balancer (like <a href=\"https://stackoverflow.com/users/5270172/kelly-keller-heikkila\">https://stackoverflow.com/users/5270172/kelly-keller-heikkila</a> said) . \nThis resolution helped me by adding (_external and _Scheme to the url_for function). <a href=\"https://github.com/pallets/flask/issues/773\" rel=\"nofollow noreferrer\">https://github.com/pallets/flask/issues/773</a></p>\n"}, {"comments": [{"owner": {"reputation": 6600, "user_id": 2210667, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/65e361318ee533712efd7929d6e9977c?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2210667/thomas"}, "edited": false, "score": 0, "creation_date": 1577244246, "post_id": 57270582, "comment_id": 105128132, "body": "Also added <code>content_security_policy =None</code>. I tried GOOGLE_CSP_POLICY but it didn&#39;t work with google analytics. Also my &quot;Twitter follow me&quot; button wasn&#39;t working either. I didn&#39;t bother investigating more for something that was working as is before"}], "tags": [], "owner": {"reputation": 10722, "user_id": 451710, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99dc7b3a068fc5b2fcb80cef933102ae?s=128&d=identicon&r=PG", "display_name": "Eyal Levin", "link": "https://stackoverflow.com/users/451710/eyal-levin"}, "is_accepted": false, "score": 11, "last_activity_date": 1564486016, "creation_date": 1564486016, "answer_id": 57270582, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/57270582#57270582", "title": "python flask redirect to https from http", "body": "<p>The <a href=\"https://flask.palletsprojects.com/en/1.1.x/security/#security-headers\" rel=\"noreferrer\">Flask Security Guide</a> recommends using <a href=\"https://github.com/GoogleCloudPlatform/flask-talisman\" rel=\"noreferrer\">Flask-Talisman</a>.</p>\n\n<pre><code>$ pip install flask-talisman\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import Flask\nfrom flask_talisman import Talisman\n\napp = Flask(__name__)\nTalisman(app)\n</code></pre>\n\n<p>It forces <code>HTTPS</code> by default (from the README):</p>\n\n<blockquote>\n  <p><code>force_https</code>, default <code>True</code>, forces all non-debug connects to <code>https</code>.</p>\n</blockquote>\n\n<hr>\n\n<p>Personally, I got some errors relating to CSP (Content Security Policy) which I disabled with:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Talisman(app, content_security_policy=None)\n</code></pre>\n\n<p>But use this at your own risk :)</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12156266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--8rGcHcVPzw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5oLMhj1Keu0Izk-_7b0ieCpbSag/photo.jpg?sz=128", "display_name": "Wietze", "link": "https://stackoverflow.com/users/12156266/wietze"}, "is_accepted": false, "score": 3, "last_activity_date": 1570053088, "creation_date": 1570053088, "answer_id": 58209821, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/58209821#58209821", "title": "python flask redirect to https from http", "body": "<p>I use a simple extra app that runs on port 80 and redirect people to https:</p>\n\n<pre><code>from flask import Flask,redirect\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    return redirect(\"https://example.com\", code=302)\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=80)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 1657133, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5a827d57591f297bc00aa7e648adcde?s=128&d=identicon&r=PG", "display_name": "Yijin", "link": "https://stackoverflow.com/users/1657133/yijin"}, "edited": false, "score": 0, "creation_date": 1575404232, "post_id": 59023603, "comment_id": 104553431, "body": "this works for gcp app engine in flex env as well. Great job @edW"}], "tags": [], "owner": {"reputation": 1651, "user_id": 1812942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7143d181941e3e43d2eaa1305e49c53?s=128&d=identicon&r=PG", "display_name": "edW", "link": "https://stackoverflow.com/users/1812942/edw"}, "is_accepted": false, "score": 7, "last_activity_date": 1574639906, "creation_date": 1574639906, "answer_id": 59023603, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/59023603#59023603", "title": "python flask redirect to https from http", "body": "<p>Here is a flask solution if you are on aws and behind a load balancer.  Place it in your views.py</p>\n\n<pre><code>@app.before_request\ndef before_request():\n    scheme = request.headers.get('X-Forwarded-Proto')\n    if scheme and scheme == 'http' and request.url.startswith('http://'):\n        url = request.url.replace('http://', 'https://', 1)\n        code = 301\n        return redirect(url, code=code)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12470500, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/bf5babc8cdb572da8e20e1ad5b2263b9?s=128&d=identicon&r=PG", "display_name": "Evan G", "link": "https://stackoverflow.com/users/12470500/evan-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1575319419, "creation_date": 1575319419, "answer_id": 59146395, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/59146395#59146395", "title": "python flask redirect to https from http", "body": "<p>I ran into the same solution running a Flask application in AWS Elastic Beanstalk behind a load balancer. The following AWS docs provided two steps to configure the environment for http redirects: <a href=\"https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https-httpredirect.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https-httpredirect.html</a> Following both steps fixed my issue. </p>\n\n<p>One thing to note is that you'll have to create the .ebextenions folder at the root level of your application source bundle and add the config file to that .ebextensions folder. The readme here: <a href=\"https://github.com/awsdocs/elastic-beanstalk-samples\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/elastic-beanstalk-samples</a> explains this in a bit more detail. </p>\n"}, {"tags": [], "owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "is_accepted": false, "score": 1, "last_activity_date": 1579183473, "creation_date": 1579183473, "answer_id": 59771351, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/59771351#59771351", "title": "python flask redirect to https from http", "body": "<p>An alternative to the other answers that I've been able to use with great success:</p>\n\n<pre><code>from http import HTTPStatus\nfrom typing import Optional\n\nfrom flask import Response, redirect, request, url_for\n\n\ndef https_redirect() -&gt; Optional[Response]:\n    if request.scheme == 'http':\n        return redirect(url_for(request.endpoint,\n                                _scheme='https',\n                                _external=True),\n                        HTTPStatus.PERMANENT_REDIRECT)\n\n\n# ..\n\nif app.env == 'production':\n    app.before_request(https_redirect)\n\n# ..\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2151, "user_id": 1413201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/X2pZT.gif?s=128&g=1", "display_name": "Tim Ludwinski", "link": "https://stackoverflow.com/users/1413201/tim-ludwinski"}, "is_accepted": false, "score": 0, "last_activity_date": 1607981331, "creation_date": 1607981331, "answer_id": 65296739, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/65296739#65296739", "title": "python flask redirect to https from http", "body": "<p>For some reason it seems, requests from a Private AWS API Gateway with a VPC endpoint don't include the &quot;X-Forwarded-Proto&quot; header.  This can break some of the other solutions (either it doesn't work or it continuously redirects to the same url).  The following middleware forces https on most flask generated internal redirects:</p>\n<pre><code>class ForceHttpsRedirects:\n    def __init__(self, app):\n        self.app = app\n    \n    def __call__(self, environ, start_response):\n        environ[&quot;wsgi.url_scheme&quot;] = &quot;https&quot;\n        return self.app(environ, start_response)\n\n# Usage\napp = flask.Flask(__name__)\napp.wsgi_app = ForceHttpsRedirects(app.wsgi_app) # Add middleware to force all redirects to https\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15596950, "user_type": "registered", "profile_image": "https://graph.facebook.com/10221752470354507/picture?type=large", "display_name": "Lorenzo Francesco Elia Varisco", "link": "https://stackoverflow.com/users/15596950/lorenzo-francesco-elia-varisco"}, "is_accepted": false, "score": 0, "last_activity_date": 1618039835, "creation_date": 1618039835, "answer_id": 67031853, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http/67031853#67031853", "title": "python flask redirect to https from http", "body": "<p>I had the same issue and mine is a brute-force solution, but it works.\nHeroku in the past suggested <code>flask_sslify</code>, which is not maintained anymore. Nowadays the proper way in Flask should be <code>flask-talisman</code>, but I tried it and it has bad interactions with boostrap templates.\nI tried the anulaibar solution but it did not always worked for me.\nThe following is what I came up with:</p>\n<pre><code>@app.before_request\ndef before_request():\n    # If the request is sicure it should already be https, so no need to redirect\n    if not request.is_secure:\n        currentUrl = request.url\n        if currentUrl.startswith('http://'):\n            # http://example.com -&gt; https://example.com\n            # http://www.example.com -&gt; https://www.example.com\n            redirectUrl = currentUrl.replace('http://', 'https://', 1)\n        elif currentUrl.startswith('www'):\n            # Here we redirect the case in which the user access the site without typing any http or https\n            # www.example.com -&gt; https://www.example.com\n            redirectUrl = currentUrl.replace('www', 'https://www', 1)\n        else:\n            # I do not now when this may happen, just for safety\n            redirectUrl = 'https://www.example.com'\n        code = 301\n        return redirect(redirectUrl, code=code)\n</code></pre>\n<p>I have the domain registered in godaddy which is also redirecting to <a href=\"https://www.example.com\" rel=\"nofollow noreferrer\">https://www.example.com</a>.</p>\n"}], "owner": {"reputation": 680, "user_id": 4621593, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/IhqYw.jpg?s=128&g=1", "display_name": "David Yuan", "link": "https://stackoverflow.com/users/4621593/david-yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44032, "favorite_count": 10, "answer_count": 12, "score": 32, "last_activity_date": 1618039835, "creation_date": 1440626257, "question_id": 32237379, "link": "https://stackoverflow.com/questions/32237379/python-flask-redirect-to-https-from-http", "title": "python flask redirect to https from http", "body": "<p>I have a website build using python3.4 and flask...I have generated my own self-signed certificate and I am currently testing my website through localhost. </p>\n\n<p>I am using the python ssl module along with this flask extension: <a href=\"https://github.com/kennethreitz/flask-sslify\" rel=\"noreferrer\">https://github.com/kennethreitz/flask-sslify</a></p>\n\n<pre><code>context = ('my-cert.pem', 'my-key.pem')\napp = Flask(__name__)\nsslify = SSLify(app)\n\n...\n\nif __name__ == '__main__':\n    app.debug = False\n    app.run(\n    host=\"127.0.0.1\",\n    port=int(\"5000\"),\n    ssl_context=context\n)\n</code></pre>\n\n<p>This does not seem to be working however. I took a look in the sslify source code and this line does not seem to be working</p>\n\n<pre><code>def init_app(self, app):\n    \"\"\"Configures the configured Flask app to enforce SSL.\"\"\"\n    app.before_request(self.redirect_to_ssl)\n    app.after_request(self.set_hsts_header)\n</code></pre>\n\n<p>Specifically the function call to redirect_to_ssl (I added my own print statement under the redirect_to_ssl function and my statement was never printed)</p>\n\n<pre><code>def redirect_to_ssl(self):\n    print(\"THIS IS WORKING\")\n    \"\"\"Redirect incoming requests to HTTPS.\"\"\"\n    Should we redirect?\n    criteria = [\n        request.is_secure,\n        current_app.debug,\n        request.headers.get('X-Forwarded-Proto', 'http') == 'https'\n    ]\n\n    if not any(criteria) and not self.skip:\n        if request.url.startswith('http://'):\n            url = request.url.replace('http://', 'https://', 1)\n            code = 302\n            if self.permanent:\n                code = 301\n            r = redirect(url, code=code)\n            return r\n</code></pre>\n\n<p>I am pretty new to python. Any ideas?</p>\n"}, {"tags": ["python", "encoding", "character-encoding"], "comments": [{"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 1, "creation_date": 1440630069, "post_id": 32237295, "comment_id": 52358373, "body": "Do you know what encoding your input file is in and what output encoding you want?"}, {"owner": {"reputation": 2065, "user_id": 3195451, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9f1955e912e631e239d4389e54c9cc47?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3195451/daniel"}, "edited": false, "score": 0, "creation_date": 1440651488, "post_id": 32237295, "comment_id": 52363419, "body": "Check your indentations...still not totally sure what you&#39;re going for here.  Also, in this line <code>output_edited2 = output_edited.encode(&#39;utf-8&#39;)</code> do you mean <code>output_edited2 = output.encode(&#39;utf-8&#39;)</code>?"}, {"owner": {"reputation": 11, "user_id": 5270385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PmiMUXLvWLk/AAAAAAAAAAI/AAAAAAAAAHY/AjS5XeR-U3c/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/5270385/adam"}, "edited": false, "score": 0, "creation_date": 1440788520, "post_id": 32237295, "comment_id": 52434863, "body": "I guess the input file is ANSI. The output file should be UTF-8."}], "owner": {"reputation": 11, "user_id": 5270385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PmiMUXLvWLk/AAAAAAAAAAI/AAAAAAAAAHY/AjS5XeR-U3c/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/5270385/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440625864, "creation_date": 1440625864, "question_id": 32237295, "link": "https://stackoverflow.com/questions/32237295/python-text-coding-reading-from-files-and-writing-into-them", "title": "PYTHON text coding - Reading from files and writing into them", "body": "<p>I would like to read some text strings from file and save it back to another but I am facing the fact that the text is in coding which is not useful to me - this is the example of input file structure:</p>\n\n<ul>\n<li>Abeba</li>\n<li>abeced\\xe1\u0159</li>\n<li>abecedn\u011b</li>\n<li>abecednictv\\xed</li>\n<li>Abel</li>\n</ul>\n\n<p>And the desired output after processing trough my script should be like this:</p>\n\n<ul>\n<li>Abeba</li>\n<li>abeced\u00e1\u0159</li>\n<li>abecedn\u011b</li>\n<li>abecednictv\u00ed</li>\n<li>Abel</li>\n</ul>\n\n<p>Here is my code I'm trying to edit to work somehow but I get only fully UTF encoded strings or some errors:</p>\n\n<pre><code>`import unicodedata\nimport re\n\nwordlist = open('C:/Administrace/Python/inputs/test_input.txt', 'r')\nwordlist_edited = open('C:/Administrace/Python/inputs/test_output.txt', 'wb')\n\nwhile (end == \"false\"):\n    output = wordlist.readline()\n\noutput_edited2 = output_edited.encode('utf-8')\n\n    wordlist_edited.write(output_edited2)\n    if output == '': end = \"true\"\n    print (output_edited2)\n</code></pre>\n\n<p>`</p>\n\n<p>I think it should be easy but I am a newbie in Python ... ;-)</p>\n\n<p>Thanks a lot for any help!</p>\n\n<p>Regards, Adam</p>\n"}, {"tags": ["python", "ipython", "ipython-notebook", "jupyter", "ipython-magic"], "comments": [{"owner": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 1, "creation_date": 1440633242, "post_id": 32237275, "comment_id": 52359207, "body": "Saving is done from the notebook web interface, which the kernel doesn&#39;t really know about. But you could make a cell that <a href=\"http://ipython.readthedocs.org/en/stable/api/generated/IPython.display.html#IPython.display.Javascript\" rel=\"nofollow noreferrer\">displays Javascript</a> to call the frontend save function."}, {"owner": {"reputation": 618, "user_id": 2494865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eedfd4644b2410394451842005f0159?s=128&d=identicon&r=PG", "display_name": "Taar", "link": "https://stackoverflow.com/users/2494865/taar"}, "edited": false, "score": 2, "creation_date": 1440733495, "post_id": 32237275, "comment_id": 52405380, "body": "With IPython &lt; 4, you could do something like:  <code>from IPython.display import display,Javascript  display(Javascript(&#39;IPython.notebook.save_checkpoint();&#39;))</code>"}, {"owner": {"reputation": 1851, "user_id": 4476617, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/790e151f3f95d17e408ae9c60598052a?s=128&d=identicon&r=PG&f=1", "display_name": "applecider", "link": "https://stackoverflow.com/users/4476617/applecider"}, "reply_to_user": {"reputation": 618, "user_id": 2494865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eedfd4644b2410394451842005f0159?s=128&d=identicon&r=PG", "display_name": "Taar", "link": "https://stackoverflow.com/users/2494865/taar"}, "edited": false, "score": 0, "creation_date": 1440736535, "post_id": 32237275, "comment_id": 52405989, "body": "@Taar, thanks! That was the answer I was looking for; would accept as answer if it were answer!"}], "answers": [{"comments": [{"owner": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 1, "creation_date": 1440633052, "post_id": 32237524, "comment_id": 52359169, "body": "Be aware that this saves your <i>history</i> as a new notebook. If you&#39;ve run the notebook from start to finish without re-running any cells and run this at the end, that will be what you expect. If you re-run or re-order any cells, it may not do what you want."}, {"owner": {"reputation": 1851, "user_id": 4476617, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/790e151f3f95d17e408ae9c60598052a?s=128&d=identicon&r=PG&f=1", "display_name": "applecider", "link": "https://stackoverflow.com/users/4476617/applecider"}, "edited": false, "score": 0, "creation_date": 1440651191, "post_id": 32237524, "comment_id": 52363335, "body": "or1426, thanks but for some reason I am not getting the output in foo.ipynb, is there any way to do that?"}, {"owner": {"reputation": 382, "user_id": 5602957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/105706212ebe508932be29884fb15902?s=128&d=identicon&r=PG&f=1", "display_name": "CodeCollector", "link": "https://stackoverflow.com/users/5602957/codecollector"}, "edited": false, "score": 0, "creation_date": 1514994655, "post_id": 32237524, "comment_id": 83135544, "body": "Is there a way to dynamically add the path to save as well? Eg <code>%notebook path_variable_from_runtime\\name.ipynb</code>"}, {"owner": {"reputation": 1510, "user_id": 3067276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf2400db0d0c0a7ceabe81a19f04c693?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/3067276/fonini"}, "edited": false, "score": 1, "creation_date": 1551301090, "post_id": 32237524, "comment_id": 96595016, "body": "if <code>some_python_var</code> is a python variable with the path you want, you can <code>%notebook $some_python_var</code>"}], "tags": [], "owner": {"reputation": 849, "user_id": 2674572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac98e0d627ba6399371ceea60fa7225?s=128&d=identicon&r=PG", "display_name": "or1426", "link": "https://stackoverflow.com/users/2674572/or1426"}, "is_accepted": false, "score": 4, "last_activity_date": 1440626994, "creation_date": 1440626994, "answer_id": 32237524, "question_id": 32237275, "link": "https://stackoverflow.com/questions/32237275/save-an-ipython-notebook-programmatically-from-within-itself/32237524#32237524", "title": "Save an IPython notebook programmatically from within itself?", "body": "<p>The ipython magic command <code>%notebook</code> will help you here. It is shown on <a href=\"http://ipython.org/ipython-doc/stable/interactive/magics.html\" rel=\"nofollow\">this page</a> (search for %notebook).</p>\n\n<p>To save your current notebook history to the file \"foo.ipynb\" just enter:</p>\n\n<pre><code>%notebook -e foo.ipynb\n</code></pre>\n\n<p>At the point you want it to happen</p>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 9426242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c542730715cc9983af9f6962ec8571b3?s=128&d=identicon&r=PG", "display_name": "zozo", "link": "https://stackoverflow.com/users/9426242/zozo"}, "edited": false, "score": 0, "creation_date": 1578540809, "post_id": 57814673, "comment_id": 105474393, "body": "If I am running this from the command line (on a remote server where I am not the user currently using the notebook) how do I specify which notebook I want saved?"}, {"owner": {"reputation": 1059, "user_id": 5009287, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f27d40583d99bf22ceaaf07f947b218?s=128&d=identicon&r=PG&f=1", "display_name": "Raphvanns", "link": "https://stackoverflow.com/users/5009287/raphvanns"}, "reply_to_user": {"reputation": 137, "user_id": 9426242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c542730715cc9983af9f6962ec8571b3?s=128&d=identicon&r=PG", "display_name": "zozo", "link": "https://stackoverflow.com/users/9426242/zozo"}, "edited": false, "score": 0, "creation_date": 1578629973, "post_id": 57814673, "comment_id": 105509189, "body": "@zozo, I have no ideas. Note: yours is an entirely different question since you are trying to save a notebook from outside, I suggest you open another new question."}, {"owner": {"reputation": 1840, "user_id": 8508004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798dcbaee1ba2df492410d761941c87b?s=128&d=identicon&r=PG", "display_name": "Wayne", "link": "https://stackoverflow.com/users/8508004/wayne"}, "edited": false, "score": 2, "creation_date": 1581647790, "post_id": 57814673, "comment_id": 106515823, "body": "This won&#39;t work when using the JupyterLab interface, see <a href=\"https://github.com/jupyterlab/jupyterlab/issues/7627\" rel=\"nofollow noreferrer\">here</a>. (Also I think the code should read <code>import time</code>, and not <code>from time import sleep</code>.)"}], "tags": [], "owner": {"reputation": 1059, "user_id": 5009287, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f27d40583d99bf22ceaaf07f947b218?s=128&d=identicon&r=PG&f=1", "display_name": "Raphvanns", "link": "https://stackoverflow.com/users/5009287/raphvanns"}, "is_accepted": false, "score": 11, "last_activity_date": 1609893813, "last_edit_date": 1609893813, "creation_date": 1567733402, "answer_id": 57814673, "question_id": 32237275, "link": "https://stackoverflow.com/questions/32237275/save-an-ipython-notebook-programmatically-from-within-itself/57814673#57814673", "title": "Save an IPython notebook programmatically from within itself?", "body": "<p>I am taking @Taar's comment and making it an actual answer since it worked for the original person who asked the question and for myself.</p>\n<pre><code>from IPython.display import display, Javascript\ndisplay(Javascript('IPython.notebook.save_checkpoint();'))\n</code></pre>\n<p>This will create checkpoints - same thing as <code>CTRL-s</code>.</p>\n<p>Note: in Jupiter, CTRL-s triggers an async process and the file save is actually completed only a few seconds later. If you want a blocking save operation in a notebook, use this little function (<code>file_path</code> is the path to the notebook file):</p>\n<pre><code>import time\nfrom IPython.display import display, Javascript\nimport hashlib\n\ndef save_notebook(file_path):\n    start_md5 = hashlib.md5(open(file_path,'rb').read()).hexdigest()\n    display(Javascript('IPython.notebook.save_checkpoint();'))\n    current_md5 = start_md5\n    \n    while start_md5 == current_md5:\n        time.sleep(1)\n        current_md5 = hashlib.md5(open(file_path,'rb').read()).hexdigest()\n</code></pre>\n"}], "owner": {"reputation": 1851, "user_id": 4476617, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/790e151f3f95d17e408ae9c60598052a?s=128&d=identicon&r=PG&f=1", "display_name": "applecider", "link": "https://stackoverflow.com/users/4476617/applecider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5049, "favorite_count": 2, "answer_count": 2, "score": 17, "last_activity_date": 1609893813, "creation_date": 1440625746, "question_id": 32237275, "link": "https://stackoverflow.com/questions/32237275/save-an-ipython-notebook-programmatically-from-within-itself", "title": "Save an IPython notebook programmatically from within itself?", "body": "<p>I would like to leave an IPython notebook running to do some computation + show some visuals.</p>\n\n<p>Once the IPython notebook has finished, I want the last cell in the IPython notebook to programmatically save the IPython notebook. Then I want to copy the notebook (with all output) to another directory to keep a record of results.</p>\n\n<p>The copying bit I can code up easily, but I am not sure how to get an IPython notebook to programatically save itself? Is this possible? Thanks in advance!</p>\n"}, {"tags": ["python", "numpy", "machine-learning"], "comments": [{"owner": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "edited": false, "score": 0, "creation_date": 1440629297, "post_id": 32237252, "comment_id": 52358113, "body": "I&#39;d try using several different optimizers, <a href=\"http://docs.scipy.org/doc/scipy/reference/optimize.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy/reference/optimize.html</a>, and see if, say, bfgs performs better than ncg"}, {"owner": {"reputation": 2394, "user_id": 629187, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/82f622c78263b1bd52e6f2165d1cd049?s=128&d=identicon&r=PG", "display_name": "Rafael Barros", "link": "https://stackoverflow.com/users/629187/rafael-barros"}, "reply_to_user": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "edited": false, "score": 0, "creation_date": 1440629915, "post_id": 32237252, "comment_id": 52358317, "body": "I tried bfgs without suplying fprime and it gives similar results (~50% accuracy). With fprime (the gradient function there) I get an error."}, {"owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "edited": false, "score": 0, "creation_date": 1440677476, "post_id": 32237252, "comment_id": 52378313, "body": "if you&#39;re importing sklearn already, why not just use its logistic regression classifier to do the work for you? Or is this more of a learning exercise?"}, {"owner": {"reputation": 2394, "user_id": 629187, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/82f622c78263b1bd52e6f2165d1cd049?s=128&d=identicon&r=PG", "display_name": "Rafael Barros", "link": "https://stackoverflow.com/users/629187/rafael-barros"}, "edited": false, "score": 0, "creation_date": 1440679204, "post_id": 32237252, "comment_id": 52379650, "body": "This is a learning exercise. I want to implement my own to better use the tool in the future."}], "answers": [{"tags": [], "owner": {"reputation": 2394, "user_id": 629187, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/82f622c78263b1bd52e6f2165d1cd049?s=128&d=identicon&r=PG", "display_name": "Rafael Barros", "link": "https://stackoverflow.com/users/629187/rafael-barros"}, "is_accepted": true, "score": 0, "last_activity_date": 1440713148, "creation_date": 1440713148, "answer_id": 32260212, "question_id": 32237252, "link": "https://stackoverflow.com/questions/32237252/logistic-regression-with-regularization-in-python-failing-to-minimize/32260212#32260212", "title": "Logistic Regression with regularization in python failing to minimize", "body": "<p>There were two problems on that implementation:</p>\n\n<p>The first one, <code>fmin_ncg</code> is not ideal for that minimization. I have used it on the previous exercise, but it was failing to find the theta with that gradient function, which is ideal to the one in Octave.</p>\n\n<p>Switching to</p>\n\n<pre><code>theta = fmin_bfgs(cost_function_reg, initial_theta)\n</code></pre>\n\n<p>Fixed that issue.</p>\n\n<p>The second issue was that the accuracy was being miscalculated.\nOnce I optimized with <code>fmin_bfgs</code>, and achieved the cost that matched the Octave results (<code>0.529</code>), the <code>(predictions == y)</code> part had different shapes (<code>(118, 118)</code> and <code>(118,1)</code>) , yielding a matrix that was <code>MxM</code> instead of vector.</p>\n"}], "owner": {"reputation": 2394, "user_id": 629187, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/82f622c78263b1bd52e6f2165d1cd049?s=128&d=identicon&r=PG", "display_name": "Rafael Barros", "link": "https://stackoverflow.com/users/629187/rafael-barros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 32260212, "answer_count": 1, "score": 1, "last_activity_date": 1440713148, "creation_date": 1440625667, "last_edit_date": 1440691699, "question_id": 32237252, "link": "https://stackoverflow.com/questions/32237252/logistic-regression-with-regularization-in-python-failing-to-minimize", "title": "Logistic Regression with regularization in python failing to minimize", "body": "<p>I'm implementing logistic regression based on the Coursera documentation, both in python and Octave.\nIn Octave, I managed to do it and achieve the right training accuracy, but in python, since I don't have access to <code>fminunc</code>, I cannot figure out a work around.</p>\n\n<p>Currently, this is my code:</p>\n\n<pre><code>df = pandas.DataFrame.from_csv('ex2data2.txt', header=None, index_col=None)\ndf.columns = ['x1', 'x2', 'y']\ny = df[df.columns[-1]].as_matrix()\nm = len(y)\ny = y.reshape(m, 1)\nX = df[df.columns[:-1]]\nX = X.as_matrix()\n\nfrom sklearn.preprocessing import PolynomialFeatures\n\nfeature_mapper = PolynomialFeatures(degree=6)\nX = feature_mapper.fit_transform(X)\n\ndef sigmoid(z):\n    return 1/(1+np.power(np.e, z))\n\ndef cost_function_reg(theta):\n    _theta = theta.copy().reshape(-1, 1)\n    shifted_theta = np.insert(_theta[1:], 0, 0)\n    h = sigmoid(np.dot(X, _theta))\n    reg = (_lambda / (2.0*m))* shifted_theta.T.dot(shifted_theta)\n    J = ((1.0/m)*(-y.T.dot(np.log(h)) - (1 - y).T.dot(np.log(1-h)))) + reg\n    return J\n\ndef gradient(theta):\n    _theta = theta.copy().reshape(-1, 1)\n    shifted_theta = np.insert(_theta[1:], 0, 0)\n    h = sigmoid(np.dot(X, _theta))\n    gradR = _lambda*shifted_theta\n    gradR.shape = (gradR.shape[0], 1)\n    grad = (1.0/m)*(X.T.dot(h-y)+gradR)\n    return grad.flatten()\n\nfrom scipy.optimize import *\ntheta = fmin_ncg(cost_f, initial_theta, fprime=gradient)\npredictions = predict(theta, X)\naccuracy = np.mean(np.double(predictions == y)) * 100\nprint 'Train Accuracy: %.2f' % accuracy\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Warning: Desired error not necessarily achieved due to precision loss.\n         Current function value: 0.693147\n         Iterations: 0\n         Function evaluations: 22\n         Gradient evaluations: 12\n         Hessian evaluations: 0\nTrain Accuracy: 50.85\n</code></pre>\n\n<p>In octave, the accuracy is: 83.05.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "qt", "pyside", "qthread", "qt-signals"], "answers": [{"tags": [], "owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "is_accepted": true, "score": 1, "last_activity_date": 1440627653, "last_edit_date": 1440627653, "creation_date": 1440627262, "answer_id": 32237579, "question_id": 32237244, "link": "https://stackoverflow.com/questions/32237244/typeerror-pyside-qtcore-qobject-connect-not-enough-arguments/32237579#32237579", "title": "TypeError: PySide.QtCore.QObject.connect(): not enough arguments", "body": "<p>You're connecting to <code>onProgress</code>, which is an instance of the <code>Signal</code> class (a misleading name in this context). You want to be connecting to the <code>onProgress.this</code>, which is the actual signal object:</p>\n\n<pre><code>self.Thread.onProgress.this.connect(self.onProgress)\n</code></pre>\n\n<p>Alternatively assign <code>onProgress</code> to the signal itself:</p>\n\n<pre><code>self.onProgress = Signal().this\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3092, "user_id": 1295678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c622a384410a309e4a20630fc5a0b88?s=128&d=identicon&r=PG", "display_name": "strubbly", "link": "https://stackoverflow.com/users/1295678/strubbly"}, "is_accepted": false, "score": 1, "last_activity_date": 1440628818, "last_edit_date": 1440628818, "creation_date": 1440627528, "answer_id": 32237644, "question_id": 32237244, "link": "https://stackoverflow.com/questions/32237244/typeerror-pyside-qtcore-qobject-connect-not-enough-arguments/32237644#32237644", "title": "TypeError: PySide.QtCore.QObject.connect(): not enough arguments", "body": "<p>I'm not really sure what you are trying to do with the <code>this</code> name, but I don't think it will work.  Have you looked at <a href=\"https://wiki.qt.io/Signals_and_Slots_in_PySide\" rel=\"nofollow\" title=\"Signals and Slots in PySide\">Signals and Slots in PySide</a>? It has quite a nice description.  I think you just need something like this:</p>\n\n<pre><code>class Load(QtCore.QThread):\n\n    onProgress = QtCore.Signal(int)\n\n    def __init__(self, parent):\n        QtCore.QThread.__init__(self, parent)\n        self.parent = parent\n\n    def run(self):\n        '''\n        '''\n        stacks = []\n        count = 100\n        for i in range(count):\n            # do something ... \n            self.onProgress.emit(count)\n</code></pre>\n"}], "owner": {"reputation": 2279, "user_id": 747201, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/460fb79fa821add7fb73bcfba35b4f26?s=128&d=identicon&r=PG&f=1", "display_name": "Elteroooo", "link": "https://stackoverflow.com/users/747201/elteroooo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1946, "favorite_count": 0, "accepted_answer_id": 32237579, "answer_count": 2, "score": 1, "last_activity_date": 1440628818, "creation_date": 1440625620, "question_id": 32237244, "link": "https://stackoverflow.com/questions/32237244/typeerror-pyside-qtcore-qobject-connect-not-enough-arguments", "title": "TypeError: PySide.QtCore.QObject.connect(): not enough arguments", "body": "<p>I'm trying to emit a singal from a <code>QThread</code> to update the <code>progressBar</code></p>\n\n<pre><code>class Signal(QtCore.QObject):\n    this = QtCore.Signal(int)\n\nclass Load(QtCore.QThread):\n    def __init__(self, parent):\n            QtCore.QThread.__init__(self, parent)\n            self.parent = parent\n            self.onProgress = Signal()\n\n    def run(self):\n        '''\n        '''\n        stacks = []\n        count = 100\n        for i in range(count):\n            # do something ... \n            self.onProgress.this.emit(count)\n</code></pre>\n\n<p>And how I call it in the MainWindow</p>\n\n<pre><code>    def __init__(self ... ):\n            ...\n            self.Thread = Load(self)\n            self.Thread.onProgress.connect(self.onProgress)\n            self.Thread.start()\n\n    @QtCore.Slot(int)\n    def onProgress(self, int):\n        self.ui.progressBar.setValue(self.ui.progressBar.value() + (90/int))\n</code></pre>\n\n<p>but I always get this error</p>\n\n<pre><code>TypeError: PySide.QtCore.QObject.connect(): not enough arguments\n</code></pre>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1440625646, "post_id": 32237237, "comment_id": 52356746, "body": "Put them in a list, not separate variables."}, {"owner": {"reputation": 168, "user_id": 1117940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d1a2fc9250363bef0611bad1d593122?s=128&d=identicon&r=PG", "display_name": "Duplexia", "link": "https://stackoverflow.com/users/1117940/duplexia"}, "edited": false, "score": 0, "creation_date": 1440625885, "post_id": 32237237, "comment_id": 52356828, "body": "Is there a reason you can&#39;t use a dictionary? &quot;variable variables&quot; aren&#39;t a good idea"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1440626413, "post_id": 32237237, "comment_id": 52357059, "body": "Do you <i>need</i> to start counting at <code>1</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1440626284, "post_id": 32237299, "comment_id": 52356992, "body": "My guess is that the <code>&#39;node&#39;</code> prefix is merely an artifact of <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">problem Y</a>. A <code>list</code> is probably the best option, as it would turn something like <code>nodes[&#39;node2&#39;]</code> into <code>nodes[2]</code>."}], "tags": [], "owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "is_accepted": true, "score": 3, "last_activity_date": 1440626603, "last_edit_date": 1440626603, "creation_date": 1440625878, "answer_id": 32237299, "question_id": 32237237, "link": "https://stackoverflow.com/questions/32237237/how-can-i-create-n-numbers-of-instances-for-a-class/32237299#32237299", "title": "How can I create n numbers of instances for a class?", "body": "<p>You <em>could</em> do what you're trying to do, but it's a really bad idea. You should either use a <code>list</code> or a <code>dict</code>; since you seem to want the names to be <code>nodeX</code>, and starting from <code>1</code>, you should use a <code>dict</code>.</p>\n\n<pre><code>nodes = {'node{}'.format(x): C() for x in range(1, 3)}\n</code></pre>\n\n<p>Depending on what you're doing, you could also use a <code>defaultdict</code>.</p>\n\n<pre><code>from collections import defaultdict\n\nnodes = defaultdict(C)\n\nprint(nodes['node1'])\n\nnodes['node2'].method()\n\nprint(nodes['anything-can-go-here'])\n</code></pre>\n\n<p>Once you're doing that though, there's no need for the <code>'node'</code> prefix.</p>\n"}, {"tags": [], "owner": {"reputation": 1069, "user_id": 3088947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3dMh.jpg?s=128&g=1", "display_name": "Mumbleskates", "link": "https://stackoverflow.com/users/3088947/mumbleskates"}, "is_accepted": false, "score": 0, "last_activity_date": 1440625958, "creation_date": 1440625958, "answer_id": 32237325, "question_id": 32237237, "link": "https://stackoverflow.com/questions/32237237/how-can-i-create-n-numbers-of-instances-for-a-class/32237325#32237325", "title": "How can I create n numbers of instances for a class?", "body": "<p>You're trying to assign a value to a string. You can write <code>Node_1 = C()</code>, but <code>\"Node_1\" = C()</code> is meaningless, as <code>\"Node_1\"</code> is a string literal, not an identifier.</p>\n\n<p>It's a little sketchy, but you can use the <code>locals()</code> dictionary to access the identifiers by name:</p>\n\n<pre><code>for count in range(1, 3):\n    locals()[\"node\" + str(count)] = C()\n</code></pre>\n\n<p>...and, having done that, you can then use <code>node1</code> and <code>node2</code> as if they were defined explicitly in your code.</p>\n\n<p>Typically, however, it's preferable to not access your locals this way, rather you should probably be using a separate dictionary of your own creation that stands on its own and contains the values there:</p>\n\n<pre><code>nodes = {}\nfor count in range(1, 3):\n    nodes[count] = C()\n</code></pre>\n\n<p>... and the values can then be accessed like so: <code>nodes[1]</code>, <code>nodes[2]</code>, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1440689491, "post_id": 32237516, "comment_id": 52387418, "body": "Yes! Ditch the redundant variables and embrace the zero-based indexing. :)"}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 1, "last_activity_date": 1440626936, "creation_date": 1440626936, "answer_id": 32237516, "question_id": 32237237, "link": "https://stackoverflow.com/questions/32237237/how-can-i-create-n-numbers-of-instances-for-a-class/32237516#32237516", "title": "How can I create n numbers of instances for a class?", "body": "<p>The best pattern for creating several similar objects is a <code>list</code> comprehension:</p>\n\n<pre><code>class C():\n    pass\n\nnodes = [C() for i in range(3)]\n</code></pre>\n\n<p>This leaves you with three objects of class <code>C</code>, stored in a <code>list</code> called <code>nodes</code>. Access each object in the normal way, with indexing (e.g. <code>nodes[0]</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440627746, "post_id": 32237546, "comment_id": 52357601, "body": "This doesn&#39;t solve the problem of creating those instances in a tidy way. What if we want to create five of those objects? 50? 500?"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440628176, "post_id": 32237546, "comment_id": 52357750, "body": "True, but a simple for loop will creates these n objects, and the class will &quot;name&quot; each instance, which will be accessible via C.instances[node_x]"}], "tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": false, "score": 0, "last_activity_date": 1440628093, "last_edit_date": 1440628093, "creation_date": 1440627120, "answer_id": 32237546, "question_id": 32237237, "link": "https://stackoverflow.com/questions/32237237/how-can-i-create-n-numbers-of-instances-for-a-class/32237546#32237546", "title": "How can I create n numbers of instances for a class?", "body": "<p>What I like to do, to keep a registry of all the instances of a class:</p>\n\n<pre><code>class C(object):\n    instances = {}\n\n    def __new__(cls, *args, **kwargs):\n        instance = super(C, cls).__new__(cls, *args, **kwargs)\n        instance_name = 'node_{}'.format(len(cls.instances))\n        cls.instances[instance_name] = instance\n        return instance\n\n\nif __name__ == '__main__':\n    for _ in range(3):\n        C()\n\n    print C.instances\n</code></pre>\n\n<p>OrderedDict([('node_0', &lt;<strong>main</strong>.C object at 0x10c3fe8d0>), ('node_1', &lt;<strong>main</strong>.C object at 0x10c4cb610>), ('node_2', &lt;<strong>main</strong>.C object at 0x10c4e04d0>)])</p>\n"}], "owner": {"reputation": 3, "user_id": 5270366, "user_type": "registered", "profile_image": "https://graph.facebook.com/505141516328912/picture?type=large", "display_name": "Akash B", "link": "https://stackoverflow.com/users/5270366/akash-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32237299, "answer_count": 4, "score": -2, "last_activity_date": 1440628093, "creation_date": 1440625585, "question_id": 32237237, "link": "https://stackoverflow.com/questions/32237237/how-can-i-create-n-numbers-of-instances-for-a-class", "title": "How can I create n numbers of instances for a class?", "body": "<p>I am trying to write a code whereby I can set a variable, say n, to create n numbers of instances for that particular class. The instances have to be named 'Node_1', 'Node_2'...'Node_n'. I've tried to do this in several ways using the for loop, however I always get the error: 'Can't assign to operator.'</p>\n\n<p>My latest effort is as follows:</p>\n\n<pre><code>class C():\n    pass\nfor count in range(1,3):\n    \"node\"+str(count)=locals()[\"C\"]()\n\nprint(node)\n</code></pre>\n\n<p>I understand that the <code>\"node\" + str(count)</code> is not possible, but I don't see how I can solve this issue.</p>\n\n<p>Any help on the matter will be greatly appreciated.</p>\n"}, {"tags": ["python", "if-statement", "return"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1440625441, "post_id": 32237178, "comment_id": 52356664, "body": "It&#39;s telling you the <code>return</code> is outside the function because it <i>is</i> (and that&#39;s bad). I recommend brushing up on indentation as well as on the specific meaning of the <code>return</code> statement."}, {"owner": {"reputation": 203, "user_id": 4728190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb67c35d7de6249bafb42ea1698a048?s=128&d=identicon&r=PG", "display_name": "XaF", "link": "https://stackoverflow.com/users/4728190/xaf"}, "edited": false, "score": 0, "creation_date": 1440625515, "post_id": 32237178, "comment_id": 52356705, "body": "Could you please provide a minimal working example? The code you gave in your question is not at all usable."}, {"owner": {"reputation": 21, "user_id": 5270414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46eb270f85ed5137f162ab99df2af2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Er Rds", "link": "https://stackoverflow.com/users/5270414/er-rds"}, "edited": false, "score": 0, "creation_date": 1440625539, "post_id": 32237178, "comment_id": 52356714, "body": "how would I fix this then?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440625684, "post_id": 32237178, "comment_id": 52356763, "body": "By rereading the instructional materials provided by CodeAcademy. If you find those materials insufficient, the <a href=\"https://docs.python.org/3.4/tutorial\" rel=\"nofollow noreferrer\">official Python tutorial</a> is a great resource."}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1440625864, "post_id": 32237178, "comment_id": 52356820, "body": "@ErRds is this your entire code?"}, {"owner": {"reputation": 21, "user_id": 5270414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46eb270f85ed5137f162ab99df2af2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Er Rds", "link": "https://stackoverflow.com/users/5270414/er-rds"}, "edited": false, "score": 0, "creation_date": 1440625977, "post_id": 32237178, "comment_id": 52356859, "body": "It&#39;s the beginning, So I guess yeah"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5270414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46eb270f85ed5137f162ab99df2af2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Er Rds", "link": "https://stackoverflow.com/users/5270414/er-rds"}, "edited": false, "score": 0, "creation_date": 1440625656, "post_id": 32237224, "comment_id": 52356752, "body": "Thanks, that helps me a lot"}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "reply_to_user": {"reputation": 21, "user_id": 5270414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46eb270f85ed5137f162ab99df2af2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Er Rds", "link": "https://stackoverflow.com/users/5270414/er-rds"}, "edited": false, "score": 0, "creation_date": 1440626276, "post_id": 32237224, "comment_id": 52356985, "body": "@ErRds <code>return</code> roughly means something like &quot;exit a function and take a value back with you.&quot; If you put <code>return</code> in the outer scope, with no function, where&#39;s it supposed to go? Confused? So is Python. Hence, the error. :)"}, {"owner": {"reputation": 21, "user_id": 5270414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46eb270f85ed5137f162ab99df2af2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Er Rds", "link": "https://stackoverflow.com/users/5270414/er-rds"}, "edited": false, "score": 0, "creation_date": 1440626599, "post_id": 32237224, "comment_id": 52357146, "body": "@CasualDemon Thanks a ton.  Think that gave me more clarity into why I kept getting the types of return errors."}], "tags": [], "owner": {"reputation": 4377, "user_id": 3244542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d97462f60717863214b3efca87c24?s=128&d=identicon&r=PG&f=1", "display_name": "CasualDemon", "link": "https://stackoverflow.com/users/3244542/casualdemon"}, "is_accepted": false, "score": 3, "last_activity_date": 1440625524, "creation_date": 1440625524, "answer_id": 32237224, "question_id": 32237178, "link": "https://stackoverflow.com/questions/32237178/return-outside-function-error/32237224#32237224", "title": "&quot;return outside function&quot; error", "body": "<p><code>return</code> must be inside a function. Right now that code is at the base of the script, so you either way to save <code>5+self</code> to variable to use later, or print it to the screen it seems.</p>\n\n<p>To make it into a function:</p>\n\n<pre><code>def start():\n    input(\"Time for a questionnaire to define your stats\")\n    input(\"press enter to continue....\")\n    print(\"in an intense battle when both you and your enemy are on the edge of consciousness and you have a chance to flee do you finish off the opponent taking a chance on being struck down or do you flee with your life?\")\n    statq1=input(\"fight or flee\")\n    if statq1 == \"fight\":\n        return 5+self\n    elif statq1 == \"flee\":\n        return 5+hp\n\nprint(start())\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5270414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46eb270f85ed5137f162ab99df2af2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Er Rds", "link": "https://stackoverflow.com/users/5270414/er-rds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440626479, "creation_date": 1440625283, "last_edit_date": 1440626479, "question_id": 32237178, "link": "https://stackoverflow.com/questions/32237178/return-outside-function-error", "title": "&quot;return outside function&quot; error", "body": "<p>After some research, I cannot find out why I'm getting the specified error (<code>SyntaxError: 'return' outside function</code>) in this codeacademy exercise.</p>\n\n<pre><code>name=input(\" input name \")\nprint(\"welcome, {}\".format (name))\n\nclass player():\n\n    def __init__(self, atk, hp,):\n        self.atk=atk\n        self.hp=hp\n\n    def __str__(self):\n        return \"{}, {}\".format (self.atk, self.hp)\n\ninput(\"Time for a questionnaire to define your stats\")\ninput(\"press enter to continue....\")\nprint(\"in an intense battle when both you and your enemy are on the edge of consciousness and you have a chance to flee do you finish off the opponent taking a chance on being struck down or do you flee with your life?\")\nstatq1=input(\"fight or flee\")\nif statq1 == \"fight\":\n    return 5+self\nelif statq1 == \"flee\":\n    return 5+hp\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 1, "creation_date": 1555955942, "post_id": 32237806, "comment_id": 98266653, "body": "Got love SO. The &quot;I don&#39;t know how &#39;smart&#39; this is&quot; just cracked me. We can all relate to this phrase"}, {"owner": {"reputation": 177, "user_id": 5319143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39880fce9eecc128856878d64c614e7?s=128&d=identicon&r=PG&f=1", "display_name": "clement116", "link": "https://stackoverflow.com/users/5319143/clement116"}, "edited": false, "score": 1, "creation_date": 1581070424, "post_id": 32237806, "comment_id": 106315134, "body": "I didn&#39;t know how &quot;smart&quot; it is either, but it just helped me and worked, so it is smart."}], "tags": [], "owner": {"reputation": 17473, "user_id": 50305, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f921948761062f7785a10e38b8402d2c?s=128&d=identicon&r=PG", "display_name": "Dervin Thunk", "link": "https://stackoverflow.com/users/50305/dervin-thunk"}, "is_accepted": true, "score": 9, "last_activity_date": 1440628496, "creation_date": 1440628496, "answer_id": 32237806, "question_id": 32237106, "link": "https://stackoverflow.com/questions/32237106/what-does-float-object-has-no-attribute-replace-when-i-try-locale-atof-in-pan/32237806#32237806", "title": "What does float&#39; object has no attribute &#39;replace&#39; when I try locale.atof in Pandas?", "body": "<p>Well, I don't know how \"smart\" this is, but I \"fixed\" it like this, at least for the time being:</p>\n\n<pre><code>df.idh = df.idh.astype(str).apply(locale.atof)\n</code></pre>\n\n<p>Please, do let me know the smart answer to this.</p>\n"}, {"tags": [], "owner": {"reputation": 1329, "user_id": 2748781, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1c896aa42128679605eca967712ad2d5?s=128&d=identicon&r=PG&f=1", "display_name": "ansonw", "link": "https://stackoverflow.com/users/2748781/ansonw"}, "is_accepted": false, "score": 5, "last_activity_date": 1513710787, "creation_date": 1513710787, "answer_id": 47893728, "question_id": 32237106, "link": "https://stackoverflow.com/questions/32237106/what-does-float-object-has-no-attribute-replace-when-i-try-locale-atof-in-pan/47893728#47893728", "title": "What does float&#39; object has no attribute &#39;replace&#39; when I try locale.atof in Pandas?", "body": "<p>The problem has to do with null values.  Replace cannot work on numpy nulls.  Your solution doesn't return an error because you convert np.NaN (nulls) into 'nan' and replace can work on the string 'nan'.  The problem is though that you now have 'nan' in your column instead of np.NaN.  So if you run: </p>\n\n<pre><code>df[df.idh.isnull()]\n</code></pre>\n\n<p>It would return 0 rows even though you do have nulls in your data.  The following code keeps the np.NaN while running a replace statement on that column.</p>\n\n<pre><code>def replace_percent(x):\n    try: \n        return x.replace('%', '')\n    except AttributeError:\n        return np.NaN\n\ndf_not.secularism = df_not.secularism.map(replace_percent)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 1337430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f414fabb538e5ee089b16ec28a8899?s=128&d=identicon&r=PG", "display_name": "tonante27", "link": "https://stackoverflow.com/users/1337430/tonante27"}, "is_accepted": false, "score": 0, "last_activity_date": 1564578868, "last_edit_date": 1564578868, "creation_date": 1564578635, "answer_id": 57291564, "question_id": 32237106, "link": "https://stackoverflow.com/questions/32237106/what-does-float-object-has-no-attribute-replace-when-i-try-locale-atof-in-pan/57291564#57291564", "title": "What does float&#39; object has no attribute &#39;replace&#39; when I try locale.atof in Pandas?", "body": "<p>Could this alternative solution work for you?</p>\n\n<pre><code>csv_nn = df.replace(np.nan, 'null', regex=True)\n</code></pre>\n"}], "owner": {"reputation": 17473, "user_id": 50305, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f921948761062f7785a10e38b8402d2c?s=128&d=identicon&r=PG", "display_name": "Dervin Thunk", "link": "https://stackoverflow.com/users/50305/dervin-thunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18349, "favorite_count": 2, "accepted_answer_id": 32237806, "answer_count": 3, "score": 6, "last_activity_date": 1570025454, "creation_date": 1440624976, "question_id": 32237106, "link": "https://stackoverflow.com/questions/32237106/what-does-float-object-has-no-attribute-replace-when-i-try-locale-atof-in-pan", "title": "What does float&#39; object has no attribute &#39;replace&#39; when I try locale.atof in Pandas?", "body": "<p>I'm trying to convert a Pandas dataframe series to float. I do <code>locale.setlocale(locale.LC_NUMERIC, '')</code> and then <code>df.idh.apply(locale.atof)</code>, but it gives me the above mentioned error: <code>AttributeError: 'float' object has no attribute 'replace'</code>. I assume at some point it's getting something like a NaN, maybe or some other string and it does not recognize it. How do I tell <code>apply</code> to skip those?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 617, "user_id": 4525192, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7l9tu.jpg?s=128&g=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/4525192/angelo"}, "edited": false, "score": 0, "creation_date": 1440770877, "post_id": 32272701, "comment_id": 52424845, "body": "It&#39;s faster than my solution but still takes quite a while. I am starting to think thay maybe it&#39;s the whole way I framed the solution (i.e. modify a big dataframe) that may be wrong. On the other hand, I don&#39;t want to make life hard while parsing the xml file, since i&#39;ts not clean at all."}, {"owner": {"reputation": 617, "user_id": 4525192, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7l9tu.jpg?s=128&g=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/4525192/angelo"}, "edited": false, "score": 0, "creation_date": 1440776912, "post_id": 32272701, "comment_id": 52428870, "body": "I am still experimenting, but seems that the best way is to append to a vector and the create a new df from a list of lists (built by appending df.col.values)."}, {"owner": {"reputation": 195, "user_id": 5119420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab8f3a8756ca1413876d3fd2f182dc1?s=128&d=identicon&r=PG&f=1", "display_name": "pho", "link": "https://stackoverflow.com/users/5119420/pho"}, "reply_to_user": {"reputation": 617, "user_id": 4525192, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7l9tu.jpg?s=128&g=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/4525192/angelo"}, "edited": false, "score": 0, "creation_date": 1440861712, "post_id": 32272701, "comment_id": 52452784, "body": "Why not preallocate your df (as you can calculate the needed size) and write to it directly that should give you O(1) on the insert?"}, {"owner": {"reputation": 617, "user_id": 4525192, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7l9tu.jpg?s=128&g=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/4525192/angelo"}, "edited": false, "score": 0, "creation_date": 1441003973, "post_id": 32272701, "comment_id": 52486597, "body": "But anyway I would need to shift the index, right? So, I have a df of len x and I know that I need, let&#39;s say, x+10. If I need to insert a line at position 2, I need to shift the index from 2 on. Am I right?"}, {"owner": {"reputation": 195, "user_id": 5119420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab8f3a8756ca1413876d3fd2f182dc1?s=128&d=identicon&r=PG&f=1", "display_name": "pho", "link": "https://stackoverflow.com/users/5119420/pho"}, "reply_to_user": {"reputation": 617, "user_id": 4525192, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7l9tu.jpg?s=128&g=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/4525192/angelo"}, "edited": false, "score": 0, "creation_date": 1441359448, "post_id": 32272701, "comment_id": 52658080, "body": "Yes, you just have to increment your index for each insert."}], "tags": [], "owner": {"reputation": 195, "user_id": 5119420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab8f3a8756ca1413876d3fd2f182dc1?s=128&d=identicon&r=PG&f=1", "display_name": "pho", "link": "https://stackoverflow.com/users/5119420/pho"}, "is_accepted": true, "score": 0, "last_activity_date": 1440862572, "last_edit_date": 1440862572, "creation_date": 1440769955, "answer_id": 32272701, "question_id": 32237086, "link": "https://stackoverflow.com/questions/32237086/insert-new-rows-in-pandas-dataframe/32272701#32272701", "title": "Insert new rows in pandas dataframe", "body": "<p>EDIT:\nYou can preallocate your df, the required length will be <code>len(df)+df.multiwordexpr.sum()</code> then you can use .ix[] to set the correct rows. You still have to iterate your original df and split it though. That might be faster.</p>\n\n<pre><code>row = ['','','',0,0,0,0]\n#calculate correct length depending on your original df\ndf_len = len(orig_df)+orig_df.multiwordexpr.sum()\n\n#allocate a new df\nresult_df = pd.DataFrame([row for x in xrange(df_len)],\n                      columns=columns)\n#write to it instead appending\nresult_df.ix[index] = ['Per','per','epsf',0,0,0,0]\n</code></pre>\n\n<p>EDIT END</p>\n\n<p>Maybe creating a new dataframe and only appending to it will be faster than modifying the original?</p>\n\n<p>You could iterate your original df and append to a new one while splitting the multiwordexpr rows. No idea if that will perform better though.</p>\n\n<pre><code>import pandas as pd\ncolumns=    ['text','lemma','pos','markintext','doublelemme','multiwordexpr','nodetail']\n\nrows = [['Per','per','epsf',0,0,0,0],\n    ['dietro a','dietro a','eilksl',0,0,1,0],\n    ['Per','per','epsf',0,0,0,0]]\n\norig_f = pd.DataFrame(rows,columns=columns)\ndf = pd.DataFrame(columns=columns)\n\n\nfor index, row in orig_f.iterrows():\n    # check for multiwordexpr\n    if row[5] == 1:\n        s = row.copy()\n        s[0]   = row[0].split(' ')[0]     \n        row[0] = row[0].split(' ')[1]        \n        df = df.append(s)\n        df = df.append(row)\n\n    else:\n        df = df.append(row)\n\ndf = df.reset_index(drop=True)\n#there are no more multi words\ndf.ix[df['multiwordexpr']==1, 'multiwordexpr'] = 0\n</code></pre>\n"}], "owner": {"reputation": 617, "user_id": 4525192, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7l9tu.jpg?s=128&g=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/4525192/angelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2109, "favorite_count": 0, "accepted_answer_id": 32272701, "answer_count": 1, "score": 2, "last_activity_date": 1440862572, "creation_date": 1440624874, "last_edit_date": 1440767548, "question_id": 32237086, "link": "https://stackoverflow.com/questions/32237086/insert-new-rows-in-pandas-dataframe", "title": "Insert new rows in pandas dataframe", "body": "<p>I have parsed an xml file containing some part-of-speech tagged text and I since the file is not perfect I am adding the data to a pandas dataframe in order to later clean it.</p>\n\n<p>At this point I will need to duplicate some rows based on certain values and modify only one or two values in the duplicated row and in the original one.</p>\n\n<p>This is what the actual dataframe looks like:</p>\n\n<pre><code>In [8]: df.head()\nOut[8]: \n      text     lemma       pos markintext  doublemma  multiwordexpr nodetail\n0      Per       per      epsf          0          0              0        0\n1   correr   correre    vta2fp          0          0              0        0\n2  miglior  migliore      a2fp          0          0              0        0\n3    acque     acqua     sf1fp          0          0              0        0\n4     alza    alzare  vta1ips3          0          0              0        0\n</code></pre>\n\n<p>Now, if, for example, multiwordexpr is equal to 1, I want to duplicate the row and insert it in the database. So, I would like to go from this:</p>\n\n<pre><code>In [10]: df[df['multiwordexpr'] == 1]\nOut[10]: \n          text     lemma      pos markintext  doublemma  multiwordexpr\n16    dietro a  dietro a   eilksl          0          0              1  \n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>          text     lemma      pos markintext  doublemma  multiwordexpr\n16    dietro    dietro a   eilksl          0          0              1  \n17    a         dietro a   eilksl          0          0              1  \n</code></pre>\n\n<p>This is my code</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: latin-1 -*-\n\nfrom lxml import etree\nimport locale\nimport sys\nimport os\nimport glob\nimport pandas as pd\nimport numpy as np\nimport re\nfrom string import punctuation\nimport random\nimport unicodedata\n\ndef manage_tail(taillist):\n    z = []\n    for line in taillist:\n        y = list(line.strip())\n        for punkt in y:\n            z.append(punkt)\n    return z if len(z) &gt; 0 else 0\n\ndef checkmark(text):\n    pattern = re.compile(\"\\w|'\",re.UNICODE)\n    if re.match(pattern,text[-1]):\n        return 0\n    else:\n        return text[-1]\n\npath = \"~/working_corpus/\"\noutput_path = \"~/devel_output/\"\nf = \"*.xml\"\n\ndocs = [f for f in glob.glob(os.path.join(path,f))]\nparser = etree.XMLParser(load_dtd= True,resolve_entities=True)\n\nx = []\nfor d in docs:\n\n    tree = etree.parse(d,parser)\n\n    for node in [z for z in  tree.iterfind(\".//LM\")]:\n        text = node.text.strip()\n        multiwordexpr = 1 if (' ' in text.replace('  ', ' ')) else 0\n        lemma = node.get('lemma')\n        markintext = checkmark(text)\n        pos = node.get('catg')\n        doublemma = 1 if (node.getparent() is not None and node.getparent().tag == 'LM1') else 0\n        nodetail = manage_tail(node.tail.splitlines()) if node.tail else None\n        row = [text,lemma,pos,markintext,doublemma,multiwordexpr,nodetail]\n        x.append(row)\n\n\ndf = pd.DataFrame(x,columns=('text','lemma','pos','markintext','doublemma','multiwordexpr','nodetail'))\n</code></pre>\n\n<p>I've thought about something like this for managing the case in which nodetail is true(so not the multiwordexpr problem exactly, but the point is the same: how to efficiently add a row in an arbitrary position, so not at the end), but I don't know how to really do it efficiently. I am looking for a function that given one or more condition, inserts a certain number of duplicated rows under the selected row and modifyes one or two values in the other columns (in this case, it splits the text and duplicates the row).</p>\n\n<pre><code>l = []\ni = 0\nwhile i &lt; len(df):\n    if (df.iloc[i,6] != 0):\n        ntail = df.iloc[i,6]\n        df.iloc[i,6] = 0\n        i += 1\n        for w in range(len(ntail)):\n            line = pd.DataFrame({'text': ntail[w],\n            'lemma': ntail[w],\n            'pos':'NaN',\n            'markintext':0,\n            'doublemma':0,\n            'multiwordexpr':0,\n            'nodetail':0},index=[i+w], columns=('text','lemma','pos','markintext','doublemma','multiwordexpr','nodetail'))\n            l.append(line)\n    else:\n        pass\n    i += 1\n    sys.stdout.write(\"\\r%d/%d\" % (i,len(df)))\n    sys.stdout.flush()\nprint \"...done extracting.\"\n\nfor i in range(len(l)):    \n    start = int((l[i].index[0])-1)\n    end = int(l[i].index[0])\n    df = pd.concat([df.ix[:start], l[i], df.ix[end:]]).reset_index(drop=True)\n    sys.stdout.write(\"\\r%d/%d\" % (i,len(l)))\n    sys.stdout.flush()\n</code></pre>\n"}, {"tags": ["python", "linux", "serial-port", "pyserial"], "comments": [{"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1440625198, "post_id": 32237004, "comment_id": 52356557, "body": "What usb to serial device are you using? Do you see any problems in dmesg after plugin of the convertor, like driver issues? Did you test the convertor with any other device tha your projector?"}, {"owner": {"reputation": 1, "user_id": 5270351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5311eceade6d84d469772bacb9bf17?s=128&d=identicon&r=PG&f=1", "display_name": "rogeeeer", "link": "https://stackoverflow.com/users/5270351/rogeeeer"}, "reply_to_user": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1440626021, "post_id": 32237004, "comment_id": 52356880, "body": "I don&#39;t know the device name, some old thing I had in a closet ! The driver show &quot;ch34&quot; or &quot;ch340&quot;. Nothing in the dmesg everything is fine, the convertor is recognized and attached to ttyUSB0. I only tried the convertor with the projector, but it&#39;s the same I use with the windows device and the raspberry pi."}, {"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1440626521, "post_id": 32237004, "comment_id": 52357109, "body": "Would it be possible to add the output of dmesg to your question, from the time the device is inserted (a message starting with <code>New USB device found</code>) and the lines that follow?"}, {"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1440627349, "post_id": 32237004, "comment_id": 52357450, "body": "As <a href=\"http://www.wch.cn/download/CH341SER_LINUX_ZIP.html\" rel=\"nofollow noreferrer\">that manufacturer offers a source code driver for Linux</a> the might not be supported by the current kernels, or poorly. Maybe it&#39;s easier to get some FTDI or Prolific based USB-SER adapter..."}, {"owner": {"reputation": 1, "user_id": 5270351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5311eceade6d84d469772bacb9bf17?s=128&d=identicon&r=PG&f=1", "display_name": "rogeeeer", "link": "https://stackoverflow.com/users/5270351/rogeeeer"}, "reply_to_user": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1440702475, "post_id": 32237004, "comment_id": 52395074, "body": "I found a prolific based adapter and it works fine ! Thanks :)"}, {"owner": {"reputation": 2643, "user_id": 925592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e3X1a.jpg?s=128&g=1", "display_name": "RufusVS", "link": "https://stackoverflow.com/users/925592/rufusvs"}, "edited": false, "score": 0, "creation_date": 1504288012, "post_id": 32237004, "comment_id": 78971947, "body": "I&#39;ve done a lot of work with pySerial, and your byte-at-a-time loop for reading gave me a little chill (I won&#39;t talk about using time.sleep() to allow the response to fill the input buffer, not great, but works).  Anyway, you could replace that loop with: <code>if ser.inWaiting():     out=ser.read(ser.inWaiting())</code>"}], "owner": {"reputation": 1, "user_id": 5270351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5311eceade6d84d469772bacb9bf17?s=128&d=identicon&r=PG&f=1", "display_name": "rogeeeer", "link": "https://stackoverflow.com/users/5270351/rogeeeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 905, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440627215, "creation_date": 1440624433, "last_edit_date": 1495540331, "question_id": 32237004, "link": "https://stackoverflow.com/questions/32237004/command-projector-via-rs232-with-pyserial-on-linux", "title": "Command projector via RS232 with pyserial on linux", "body": "<p>I would like to use the serial connexion of my projector with a raspberry pi 2. \n I have a little python script working on windows (from <a href=\"https://stackoverflow.com/questions/676172/full-examples-of-using-pyserial-package\">Full examples of using pySerial package</a>). </p>\n\n<pre><code>import time\nimport serial\n\nser = serial.Serial(\n    port='COM3',\n    baudrate=115200,\n    parity=serial.PARITY_NONE,\n    stopbits=serial.STOPBITS_ONE,\n    bytesize=serial.EIGHTBITS\n)\n\nif ser.isOpen() : \n    ser.close()\nser.open()\n\nprint ser.portstr\n\nprint 'Enter your commands below.\\r\\nInsert \"exit\" to leave the application.'\n\ninput=1\nwhile 1 :\n    # get keyboard input\n    input = raw_input(\"&gt;&gt; \")\n    if input == 'exit':\n        ser.close()\n        exit()\n    else:\n        ser.write('\\r' + input + '\\r')\n        out = ''\n        time.sleep(1)\n        while ser.inWaiting() &gt; 0:\n            out += ser.read(1)\n\n        if out != '':\n            print \"&gt;&gt;\" + out\n</code></pre>\n\n<p>To use it on linux the only thing I changed is port='COM3' to port='/dev/ttyUSB0'. I checked with dmesg | grep -i tty, it's the good one. </p>\n\n<p>My problem is that when I send a command like : \n \"*pow=on#\" to turn the projector on, it works well on windows but not linux. Could it be some encoding issues ? </p>\n\n<p>Thanks. </p>\n\n<p>Edit : The output of the dmesg (too long for a reply)</p>\n\n<pre><code>[  211.001768] usb 1-1.2: new full-speed USB device number 5 using dwc_otg\n[  211.104934] usb 1-1.2: New USB device found, idVendor=1a86, idProduct=7523\n[  211.104965] usb 1-1.2: New USB device strings: Mfr=0, Product=2, SerialNumber=0\n[  211.104981] usb 1-1.2: Product: USB2.0-Ser!\n[  211.131759] usbcore: registered new interface driver usbserial\n[  211.131932] usbcore: registered new interface driver usbserial_generic\n[  211.132061] usbserial: USB Serial support registered for generic\n[  211.136250] usbcore: registered new interface driver ch341\n[  211.136485] usbserial: USB Serial support registered for ch341-uart\n[  211.136623] ch341 1-1.2:1.0: ch341-uart converter detected\n[  211.143994] usb 1-1.2: ch341-uart converter now attached to ttyUSB0\n</code></pre>\n"}, {"tags": ["python", "django", "rest", "serialization", "tastypie"], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 1046015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85f07299022bef095ee96020e4fa74fa?s=128&d=identicon&r=PG", "display_name": "Kari-Antti Kuosa", "link": "https://stackoverflow.com/users/1046015/kari-antti-kuosa"}, "is_accepted": false, "score": 2, "last_activity_date": 1440681385, "last_edit_date": 1440681385, "creation_date": 1440680498, "answer_id": 32250122, "question_id": 32236890, "link": "https://stackoverflow.com/questions/32236890/how-do-i-insert-user-permissions-field-in-user-resource/32250122#32250122", "title": "How do I insert user_permissions field in user resource?", "body": "<p>If you are using django-tastypie it could work like this without field.</p>\n\n<pre><code>class UserResource(ModelResource):\n     class Meta:\n         # your definitions\n\n     def dehydrate(self, bundle):\n         # Include user permissions\n         bundle.data['user_permissions'] = bundle.obj.user_permissions()\n         return bundle\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2234, "user_id": 1149136, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m8enX.jpg?s=128&g=1", "display_name": "iraj jelodari", "link": "https://stackoverflow.com/users/1149136/iraj-jelodari"}, "is_accepted": false, "score": 1, "last_activity_date": 1440693129, "creation_date": 1440693129, "answer_id": 32254949, "question_id": 32236890, "link": "https://stackoverflow.com/questions/32236890/how-do-i-insert-user-permissions-field-in-user-resource/32254949#32254949", "title": "How do I insert user_permissions field in user resource?", "body": "<p>I found this solution:</p>\n\n<pre><code>class PermissionResource(ModelResource):\n\n    class Meta:\n        queryset = Permission.objects.all()\n\n        resource_name = 'permission'\n        authorization = Authorization()\n        always_return_data = True\n        list_allowed_methods = ['get', 'post', 'put', 'delete']\n        authorization = DjangoAuthorization()\n        authentication = MultiAuthentication(BasicAuthentication(), SessionAuthentication())\n\nclass UserResource(ModelResource):\n    user_permissions = fields.ToManyField(PermissionResource,'user_permissions',null=True,full=True)\n\n    class Meta:\n        queryset = User.objects.all()\n        resource_name = 'user'\n        authorization = Authorization()\n        always_return_data = True\n        list_allowed_methods = ['get', 'post', 'put', 'delete']\n        authorization = DjangoAuthorization()\n        authentication = MultiAuthentication(BasicAuthentication(), SessionAuthentication())\n        filtering = {\n            \"date_joined\": ALL,\n            \"email\": ALL,\n            \"first_name\": ALL,\n            \"is_active\": ALL,\n            \"is_staff\": ALL,\n            \"is_superuser\": ALL,\n            \"last_login\": ALL,\n            \"last_name\": ALL,\n            \"username\": ALL,\n            \"user_permissions\": ALL_WITH_RELATIONS,\n\n        }\n</code></pre>\n"}], "owner": {"reputation": 2234, "user_id": 1149136, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m8enX.jpg?s=128&g=1", "display_name": "iraj jelodari", "link": "https://stackoverflow.com/users/1149136/iraj-jelodari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440693129, "creation_date": 1440623966, "last_edit_date": 1440625714, "question_id": 32236890, "link": "https://stackoverflow.com/questions/32236890/how-do-i-insert-user-permissions-field-in-user-resource", "title": "How do I insert user_permissions field in user resource?", "body": "<p>I have the following user resource code, how to insert the <code>'permissions field'</code> which returns the permission list for user?</p>\n\n<pre><code>class UserResource(ModelResource):\n    user_permissions = fields.ToManyField #??????\n    class Meta:\n       queryset = User.objects.all()\n       resource_name = 'user'\n       authorization = Authorization()\n       always_return_data = True\n       list_allowed_methods = ['get', 'post', 'put', 'delete']\n       authorization = DjangoAuthorization()\n       authentication = MultiAuthentication(BasicAuthentication(), SessionAuthentication())\n       filtering = {\n           \"date_joined\": ALL,\n           \"email\": ALL,\n           \"first_name\": ALL,\n           \"is_active\": ALL,\n           \"is_staff\": ALL,\n           \"is_superuser\": ALL,\n           \"last_login\": ALL,\n           \"last_name\": ALL,\n           \"username\": ALL,\n           \"user_permissions\": ALL_WITH_RELATIONS,\n    }\n</code></pre>\n"}, {"tags": ["python", "text", "syntax", "static-analysis"], "comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 1, "creation_date": 1440624043, "post_id": 32236850, "comment_id": 52356059, "body": "Isn&#39;t what you&#39;re asking for pretty much <a href=\"https://docs.python.org/2/library/inspect.html#inspect.getsourcelines\" rel=\"nofollow noreferrer\"><code>inspect.getsourcelines</code></a>?"}], "answers": [{"tags": [], "owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "is_accepted": true, "score": 3, "last_activity_date": 1440624226, "creation_date": 1440624226, "answer_id": 32236954, "question_id": 32236850, "link": "https://stackoverflow.com/questions/32236850/python-displaying-an-objects-implementation-source/32236954#32236954", "title": "Python: Displaying an object&#39;s implementation source", "body": "<p>It sounds like the <code>inspect</code> library is exactly what you need, in particular, the function <a href=\"https://docs.python.org/2/library/inspect.html#inspect.getsourcelines\" rel=\"nofollow\"><code>getsourcelines</code></a>:</p>\n\n<pre><code>In [1]: def foo(x):\n   ...:     x += 3\n   ...:     x += 4\n   ...:     return x\n   ...: \n\nIn [2]: import inspect\n\nIn [3]: inspect.getsourcelines(foo)\nOut[3]: (['def foo(x):\\n', '    x += 3\\n', '    x += 4\\n', '    return x\\n'], 1)\n\nIn [4]: source_code = _\n\nIn [6]: print(''.join(source_code[0]))\ndef foo(x):\n    x += 3\n    x += 4\n    return x\n</code></pre>\n\n<p>From the docs:</p>\n\n<blockquote>\n  <p>Return a list of source lines and starting line number for an object. The argument may be a module, class, method, function, traceback, frame, or code object. The source code is returned as a list of the lines corresponding to the object and the line number indicates where in the original source file the first line of code was found. An IOError is raised if the source code cannot be retrieved.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "is_accepted": false, "score": 2, "last_activity_date": 1440687897, "last_edit_date": 1440687897, "creation_date": 1440629222, "answer_id": 32237928, "question_id": 32236850, "link": "https://stackoverflow.com/questions/32236850/python-displaying-an-objects-implementation-source/32237928#32237928", "title": "Python: Displaying an object&#39;s implementation source", "body": "<p>In Python, because of the ability to dynamically modify <em>anything</em> it can be very tricky to map back to a source definition. The definition, after all, could be created on the fly.</p>\n\n<p>Here's a somewhat simplistic example. Dynamic definitions can be much trickier even than this, and it's especially tricky if implementation occurs in a pre-compiled module. </p>\n\n<pre><code>def make_random_function(coin='Heads'):\n    if coin == 'Heads':\n        def foo(self, a):\n            print a\n    elif coin == 'Tails':\n        def foo(self, a, b):\n            return a + b\n    else:\n        def foo(self, *args, **kwargs):\n            raise ValueError('Invalid coin used to create function.')\n\n    foo.__name__ = \"dynamic_foo\"\n    foo.__doc__ = \"Good luck buddy.\"\n    return foo\n\n\nimport random\nval = random.random()\nif val &gt; 0.51:\n    coin = 'Heads'\nelif val &lt; 0.49:\n    coin = 'Tails'\nelse:\n    coin = 'Trick'\n\nfunction = make_random_function(coin)\nMyType = type(\"MyType\", (object,), {function.__name__:function})\n\nm = MyType()\n</code></pre>\n\n<p>When I run this and then call <code>m.dynamic_foo()</code> I see this:</p>\n\n<pre><code>In [313]: coin\nOut[313]: 'Trick'\n\nIn [314]: val\nOut[314]: 0.5099718112195031\n\nIn [315]: m.dynamic_foo()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-315-70b3caeb205b&gt; in &lt;module&gt;()\n----&gt; 1 m.dynamic_foo()\n\n&lt;ipython-input-310-475ea0810d8d&gt; in foo(*args, **kwargs)\n      8     else:\n      9         def foo(*args, **kwargs):\n---&gt; 10             raise ValueError('Invalid coin used to create function.')\n     11 \n     12     foo.__name__ = \"dynamic_foo\"\n\nValueError: Invalid coin used to create function.\n\nIn [316]: m\nOut[316]: &lt;__main__.MyType at 0x7f37e70b3ad0&gt;\n</code></pre>\n\n<p>Even if I use <code>inspect.getsourcelines(m.dynamic_foo)</code> it's a bit misleading:</p>\n\n<pre><code>In [319]: inspect.getsourcelines(m.dynamic_foo)\nOut[319]: \n([u'        def foo(self, *args, **kwargs):\\n',\n  u\"            raise ValueError('Invalid coin used to create function.')\\n\"],\n 9)\n</code></pre>\n\n<p>Notice how the function's source shows that its name is \"foo\" (not \"dynamic_foo\") and it's not a class method or instance method of <code>MyType</code> or anything. This is technically correct in the sense that it is the actual lines of source code, but it's not necessarily what someone might expect to see, since it's a definition that exists in a manner disconnected from how it gets dynamically injected into a class definition.</p>\n\n<p>And this is a simple example of this kind of dynamic function creation and dynamic class manipulation. The more complicated this gets, the less reliable it is to count on inspecting source lines as a reasonable way to understand the function's implementation.</p>\n"}], "owner": {"reputation": 173, "user_id": 1658317, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d5a4666699116968fb939651399d5676?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1658317/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 32236954, "answer_count": 2, "score": 1, "last_activity_date": 1440687897, "creation_date": 1440623805, "question_id": 32236850, "link": "https://stackoverflow.com/questions/32236850/python-displaying-an-objects-implementation-source", "title": "Python: Displaying an object&#39;s implementation source", "body": "<p>I've been tasked with something a bit unusual and unexpectedly puzzling - Display the source code of a particular class's implementation of a method.</p>\n\n<pre><code>In [1]: class Demonstration:\n   ...:     def cost():\n   ...:         return 42\n   ...:     \n\nIn [2]: class OtherDemo:\n   ...:     def cost():\n   ...:         return 43\n   ...:  \n</code></pre>\n\n<p>In this example, I'd want to find the text <code>def cost():</code> and the following lines at the appropriate indent for either given class.</p>\n\n<p>modules like <code>inspect</code> or <code>dis</code> are nearly what I'm looking for, but I want to display the python code, such as is displayed during a traceback; not bytecode.</p>\n\n<p>I'm also not opposed to parsing the source files, either - is there a library that text editors might use for autocompletion or indent calculations that could find a specific method in a class?</p>\n"}, {"tags": ["python", "google-app-engine", "google-cloud-datastore", "app-engine-ndb"], "answers": [{"tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1440804694, "creation_date": 1440804694, "answer_id": 32281185, "question_id": 32236779, "link": "https://stackoverflow.com/questions/32236779/ndb-toplevel-for-python-method-versus-request-handler/32281185#32281185", "title": "ndb.toplevel for python method versus request handler", "body": "<p>Yes, the whole <code>tasklets</code> module <a href=\"https://github.com/GoogleCloudPlatform/datastore-ndb-python/blob/681b3ee430cc1c7d04d1d9f2d8ecec709e9e5387/ndb/tasklets.py\" rel=\"nofollow\">source</a>, from which <code>toplevel</code> comes, must be studied to confirm that (to the best of my knowledge, it's not documented elsewhere than in the module's own docstrings), but having done so I can see no side effect emerging from using <code>toplevel</code> to decorate a method that's not a handler.</p>\n"}], "owner": {"reputation": 1717, "user_id": 891441, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7d498503d9a55df34133c5092d72c905?s=128&d=identicon&r=PG", "display_name": "morfys", "link": "https://stackoverflow.com/users/891441/morfys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 32281185, "answer_count": 1, "score": 1, "last_activity_date": 1482932509, "creation_date": 1440623535, "last_edit_date": 1482932509, "question_id": 32236779, "link": "https://stackoverflow.com/questions/32236779/ndb-toplevel-for-python-method-versus-request-handler", "title": "ndb.toplevel for python method versus request handler", "body": "<p>The Google App Engine doc states that \"As a convenience, you can decorate the request handler with @ndb.toplevel.\"</p>\n\n<p>Can @ndb.toplevel be used with python methods that are not request\nhandlers?</p>\n\n<p>I have a python method mymethod() that calls ndb.put_multi_async(), and mymethod() gets called in unit tests.  I would like a call to mymethod() to complete the put_multi_async() before proceeding.  To get that effect, can I decorate mymethod() with @ndb.toplevel?  Doing so seems to ensure that put_multi_async() completes before mymethod() returns, but I wanted to double check that there are not any unintentional side-effects.</p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1440624805, "post_id": 32236738, "comment_id": 52356384, "body": "when did i say that i have a dict of dicts ?"}, {"owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1440624863, "post_id": 32236738, "comment_id": 52356413, "body": "oh..sorry..corrected.."}], "answers": [{"comments": [{"owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440624672, "post_id": 32236802, "comment_id": 52356331, "body": "tried coalesce but it looks like it does not even return a NULL value..it just completely omits the row..did not work.."}], "tags": [], "owner": {"reputation": 6258, "user_id": 1527018, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62e4e73fe7386a5e9401f90dc98c7584?s=128&d=identicon&r=PG", "display_name": "mic4ael", "link": "https://stackoverflow.com/users/1527018/mic4ael"}, "is_accepted": false, "score": 2, "last_activity_date": 1440623629, "creation_date": 1440623629, "answer_id": 32236802, "question_id": 32236738, "link": "https://stackoverflow.com/questions/32236738/appending-missing-values-in-list-of-dictionaries/32236802#32236802", "title": "Appending missing values in list of dictionaries", "body": "<p>Maybe you could utilize <code>COALESCE</code> to return 0 when there are <code>NULL</code> values.</p>\n"}, {"comments": [{"owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440651811, "post_id": 32236846, "comment_id": 52363525, "body": "the problem is that year range is not fixed..it is not only from 2014 to 2016..it could be any two years"}, {"owner": {"reputation": 2154, "user_id": 2312075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g2VYN.jpg?s=128&g=1", "display_name": "saarrrr", "link": "https://stackoverflow.com/users/2312075/saarrrr"}, "reply_to_user": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440653486, "post_id": 32236846, "comment_id": 52364043, "body": "But its always two?  Does it have to be two? Can it be 4?"}, {"owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440654425, "post_id": 32236846, "comment_id": 52364412, "body": "yes..it all depends on the start and end date in the query..if the query says from 2009 to 2015..it will pull up the total prescriptions for all the months from 2009 to 2015..so it could be any number of years..but it is always arranged in ascending order by date if that helps"}, {"owner": {"reputation": 2154, "user_id": 2312075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g2VYN.jpg?s=128&g=1", "display_name": "saarrrr", "link": "https://stackoverflow.com/users/2312075/saarrrr"}, "reply_to_user": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440654929, "post_id": 32236846, "comment_id": 52364609, "body": "Replace 2014 and 2016 with min_year and max_year + 1.  Male sure those values get saved off to variables and passed to the function that fixes the db return data."}, {"owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440660537, "post_id": 32236846, "comment_id": 52367483, "body": "saarrr..this was nice..but i ended up using Pandas..Pandas turned out to be faster and has timeline samping which was just perfect for my needs.."}], "tags": [], "owner": {"reputation": 2154, "user_id": 2312075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g2VYN.jpg?s=128&g=1", "display_name": "saarrrr", "link": "https://stackoverflow.com/users/2312075/saarrrr"}, "is_accepted": false, "score": 1, "last_activity_date": 1440654984, "last_edit_date": 1440654984, "creation_date": 1440623788, "answer_id": 32236846, "question_id": 32236738, "link": "https://stackoverflow.com/questions/32236738/appending-missing-values-in-list-of-dictionaries/32236846#32236846", "title": "Appending missing values in list of dictionaries", "body": "<p>Keep a reference list of known month numbers, and get a list of all the elements in the reference that do not exist in the pulled data.  In the code below, dc is your list of dicts.</p>\n\n<pre><code>ref = [str(x) + '-' + str(i) for x in range(min_year, max_year+1) for i in range(1,13)]\nmissing_timelines = [r for r in ref if r not in [i['timeline'] for i in dc]]\nfor m in missing_timelines:\n  dc.append({\"timeline\": m, \"total_prescriptions\": 0})\n</code></pre>\n\n<p>Mic4ael's idea is good too.  Ideally you would handle this in the database.</p>\n"}, {"tags": [], "owner": {"reputation": 741, "user_id": 1902466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1en5n.jpg?s=128&g=1", "display_name": "HackinGuy", "link": "https://stackoverflow.com/users/1902466/hackinguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1440624538, "creation_date": 1440624538, "answer_id": 32237016, "question_id": 32236738, "link": "https://stackoverflow.com/questions/32236738/appending-missing-values-in-list-of-dictionaries/32237016#32237016", "title": "Appending missing values in list of dictionaries", "body": "<p>I am not sure about the efficiency of this code but this might help you.\n<strong>Try this:</strong></p>\n\n<pre><code>presub = {...}\nbefore = int(presub[0][\"timeline\"].split(\"-\")[1])\nfor x in presub:\n  year = int(presub[x][\"timeline\"].split(\"-\")[0])\n  month = int(presub[x][\"timeline\"].split(\"-\")[1])\n  if before+1 != month:\n    if before+1%12 != 0:\n      year = year+1\n    presub.append({\"timeline\":str(year)+\"-\"+str((before+1) % 12, \"total_prescriptions\":0)})\n\npresub = sorted(presub, key=lambda k: k['timeline']) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440651858, "post_id": 32237403, "comment_id": 52363541, "body": "can&#39;t assume the start and end years to be 2014 and 2015..could be any two years.."}, {"owner": {"reputation": 126, "user_id": 1325678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c68acb967b65058656ba7e932ec2ff8?s=128&d=identicon&r=PG", "display_name": "Jonathan Clede", "link": "https://stackoverflow.com/users/1325678/jonathan-clede"}, "reply_to_user": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "edited": false, "score": 0, "creation_date": 1440699280, "post_id": 32237403, "comment_id": 52393418, "body": "Changed approach to work with any list regardless of start/end dates."}], "tags": [], "owner": {"reputation": 126, "user_id": 1325678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c68acb967b65058656ba7e932ec2ff8?s=128&d=identicon&r=PG", "display_name": "Jonathan Clede", "link": "https://stackoverflow.com/users/1325678/jonathan-clede"}, "is_accepted": false, "score": 0, "last_activity_date": 1440699237, "last_edit_date": 1440699237, "creation_date": 1440626339, "answer_id": 32237403, "question_id": 32236738, "link": "https://stackoverflow.com/questions/32236738/appending-missing-values-in-list-of-dictionaries/32237403#32237403", "title": "Appending missing values in list of dictionaries", "body": "<p>I've changed my approach. The list you are starting with is <code>my_list</code></p>\n\n<pre><code>def getDate(entry):\n    \"\"\"\n    Given a list entry dict, return a tuple of ints:\n    (year, month)\n    \"\"\"\n    date = entry['timeline']\n    i = date.index('-')\n    month = int(date[i + 1:])\n    year = int(date[:4])\n    return (year, month)\n\ndef supplyMissing(year, month, n):\n    \"\"\"\n    Given a year, month, &amp; number of missing entries (ints),\n    return a list of entries (dicts)\n    \"\"\"\n    entries = []\n    for e in range(n):\n        if month == 12:\n            year += 1\n            month = 1\n        else:\n            month += 1\n        entries.append({'timeline': str(year) + '-' + str(month),\n                        'total_prescriptions': 0})\n    return entries\n\n# Make a copy of the list to work with:\nnew_list = list(my_list)\n\n# Track the number of times corrections are made\nc_count = 0\n\n# Iterate over the list\nfor i in range(len(my_list) - 1):\n    entry = my_list[i]\n    next_entry = my_list[i + 1]\n    year, month = getDate(entry)\n    next_year, next_month = getDate(next_entry)\n\n    if ((next_year == year and next_month == month + 1) or\n        (next_year == year + 1 and next_month == month - 11)):\n        pass\n    # If entries are not sequential, determine what to add.\n    else:\n        # How many months are missing?\n        if next_year == year:\n            missing_months = next_month - month - 1\n        else:\n            dif_years = next_year - year\n            missing_months = 12 * dif_years + next_month - month - 1\n\n        # Generate missing entries\n        missing_entries = supplyMissing(year, month, missing_months)\n\n        # Insert missing entries into the temporary list.\n        for m in range(missing_months):\n            new_list.insert(i + 1 + m + c_count, missing_entries[m])\n        c_count += 1\n\n# Finalize the result\nmy_list = new_list\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "is_accepted": true, "score": 1, "last_activity_date": 1440661483, "creation_date": 1440661483, "answer_id": 32243484, "question_id": 32236738, "link": "https://stackoverflow.com/questions/32236738/appending-missing-values-in-list-of-dictionaries/32243484#32243484", "title": "Appending missing values in list of dictionaries", "body": "<p>I ended up using Pandas to solve this as it is obviously much faster for larger datasets and accomplishes this in a nice elegant way.\nThis is called \"Resampling\" in Pandas; first convert the your time to a numpy datetime and set as your index:</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df = pd.DataFrame(L) #where L is my list of dictionaries\n&gt;&gt;&gt; df.index=pd.to_datetime(df.timeline,format='%Y-%m')\n&gt;&gt;&gt; df\ntimeline    timeline            total_prescriptions                            \n2014-10-01  2014-10                   17\n2014-11-01  2014-11                   14\n2014-12-01  2014-12                    8\n2015-01-01  2015-1                     4\n2015-03-01  2015-3                    10\n2015-04-01  2015-4                     3\n</code></pre>\n\n<p>Then you can add in the missing months with resample('MS')and use fillna(0) to convert null values to zero :</p>\n\n<pre><code>&gt;&gt;&gt; df = df.resample('MS').fillna(0)\n&gt;&gt;&gt; df         \ntimeline                total_prescriptions\n2014-10-01                   17\n2014-11-01                   14\n2014-12-01                    8\n2015-01-01                    4\n2015-02-01                    0\n2015-03-01                   10\n2015-04-01                    3\n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 32243484, "answer_count": 5, "score": 3, "last_activity_date": 1440699237, "creation_date": 1440623375, "last_edit_date": 1440624876, "question_id": 32236738, "link": "https://stackoverflow.com/questions/32236738/appending-missing-values-in-list-of-dictionaries", "title": "Appending missing values in list of dictionaries", "body": "<p>I have a list which looks like this:</p>\n\n<pre><code>[\n{\n    \"timeline\": \"2014-10\", \n    \"total_prescriptions\": 17\n}, \n{\n    \"timeline\": \"2014-11\", \n    \"total_prescriptions\": 14\n}, \n{\n    \"timeline\": \"2014-12\", \n    \"total_prescriptions\": 8\n{\n    \"timeline\": \"2015-1\", \n    \"total_prescriptions\": 4\n}, \n{\n    \"timeline\": \"2015-3\", \n    \"total_prescriptions\": 10\n}, \n{\n    \"timeline\": \"2015-4\", \n    \"total_prescriptions\": 3\n} \n]\n</code></pre>\n\n<p>This is basically the output of a raw SQL query in Django which does a count of the total_prescriptions per months and arranges the data in ascending order.However,the nature of MYSQL count is that it does not return a 0 for null values.Hence,the month of February is totally skipped rather than having an entry with total_prescriptions equal to 0.</p>\n\n<p>I plan to iterate through the list in python and manually add total_prescriptions=0 for all the missing months so that the output looks like this:</p>\n\n<pre><code>[\n{\n    \"timeline\": \"2014-10\", \n    \"total_prescriptions\": 17\n}, \n{\n    \"timeline\": \"2014-11\", \n    \"total_prescriptions\": 14\n}, \n{\n    \"timeline\": \"2014-12\", \n    \"total_prescriptions\": 8\n{\n    \"timeline\": \"2015-1\", \n    \"total_prescriptions\": 4\n}, \n{\n    \"timeline\": \"2015-2\", \n    \"total_prescriptions\": 0\n}, \n{\n    \"timeline\": \"2015-3\", \n    \"total_prescriptions\": 10\n}, \n{\n    \"timeline\": \"2015-4\", \n    \"total_prescriptions\": 3\n} \n]\n</code></pre>\n\n<p>How would I go about doing that ?</p>\n"}, {"tags": ["python", "django", "forms", "views"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 1, "creation_date": 1440624794, "post_id": 32236718, "comment_id": 52356378, "body": "It&#39;s <code>cleaned_data</code> not <code>clean_data</code>."}, {"owner": {"reputation": 93, "user_id": 5190608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8dc245b4e91b3ca0729435a4dd417c?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Maestre", "link": "https://stackoverflow.com/users/5190608/antonio-maestre"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1440626800, "post_id": 32236718, "comment_id": 52357222, "body": "ooh thanks. It works!!"}], "owner": {"reputation": 93, "user_id": 5190608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8dc245b4e91b3ca0729435a4dd417c?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Maestre", "link": "https://stackoverflow.com/users/5190608/antonio-maestre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440623300, "creation_date": 1440623300, "question_id": 32236718, "link": "https://stackoverflow.com/questions/32236718/how-fix-this-attributeerror-at-contact-django-error", "title": "How fix this &quot;AttributeError at /contact/&quot; Django Error?", "body": "<p>AttributeError at /contact/</p>\n\n<p>'ContactForm' object has no attribute 'clean_data'</p>\n\n<p>These is my view:</p>\n\n<pre><code>def contact(request):\nif request.method == 'POST':\n    form = ContactForm(request.POST)\n    if form.is_valid():\n        topic = form.clean_data['topic']\n        message = form.clean_data['message']\n        sender = form.clean_data.get('sender', 'noreply@example.com')\n        send_mail(\n            'Feedback from your site, topic: %s' % topic,\n            message, sender,\n            ['antoniomaestre7@gmail.com']\n        )\n        return HttpResponseRedirect('/contact/thanks/')\nelse:\n    form = ContactForm(initial={'topic':'Write your topic here', 'message' : 'Write your message here','sender':'Sender'})\nreturn render_to_response('contact.html', {'form': form})\n</code></pre>\n\n<p>and there is my forms.py file:</p>\n\n<pre><code>class ContactForm(forms.Form):\ntopic = forms.ChoiceField(choices=TOPIC_CHOICES)\nmessage = forms.CharField(widget=forms.Textarea())\nsender = forms.EmailField(required = False)\n\ndef clean_message(self):\n    message = self.clean_data.get('message', '')\n    num_words = len(message.split())\n    if num_words &lt; 4:\n        raise forms.ValidationError(\"Not enough words!\")\n    return message\n</code></pre>\n\n<p>How can I fix this? Thanks</p>\n"}, {"tags": ["python", "http", "parse-platform", "httplib"], "comments": [{"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1440624783, "post_id": 32236657, "comment_id": 52356373, "body": "any odd characters in <code>fileName</code>?"}, {"owner": {"reputation": 1147, "user_id": 4992518, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fBgab.gif?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4992518/julius"}, "reply_to_user": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1440626842, "post_id": 32236657, "comment_id": 52357240, "body": "Not really. First I thought that the issue but it uses normal characters and I started removing whitespaces.          strippedName = name.replace(&quot; &quot;, &quot;&quot;) fileName = (strippedName + &quot;.png&quot;)  name is decoded from a JSON file in unicode, i.e. it still has the u&#39;string&#39; before any string."}, {"owner": {"reputation": 1147, "user_id": 4992518, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fBgab.gif?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4992518/julius"}, "reply_to_user": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1440627834, "post_id": 32236657, "comment_id": 52357630, "body": "@SanjayManohar I played around with the fileName again. It&#39;s working now!! Something with the unicode conversion was off"}], "answers": [{"tags": [], "owner": {"reputation": 1147, "user_id": 4992518, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fBgab.gif?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4992518/julius"}, "is_accepted": false, "score": 0, "last_activity_date": 1440627890, "creation_date": 1440627890, "answer_id": 32237707, "question_id": 32236657, "link": "https://stackoverflow.com/questions/32236657/trying-to-upload-data-to-parse-through-httplib-in-python/32237707#32237707", "title": "Trying to upload data to Parse through HTTPLib in Python", "body": "<p>Figured it out. It was the unicode conversion of fileName. Even though fileName was a String I had to force cast it with str(fileName). Everything is working now!</p>\n"}], "owner": {"reputation": 1147, "user_id": 4992518, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fBgab.gif?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4992518/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440627890, "creation_date": 1440623030, "question_id": 32236657, "link": "https://stackoverflow.com/questions/32236657/trying-to-upload-data-to-parse-through-httplib-in-python", "title": "Trying to upload data to Parse through HTTPLib in Python", "body": "<p>I am trying to upload several files to Parse with HTTLib and the following code:</p>\n\n<pre><code>        connection = httplib.HTTPSConnection('api.parse.com', 443)\n    connection.connect()\n\n    connection.request('POST', '/1/files/' + fileName, open(fileName, 'rb').read(), {\n        \"X-Parse-Application-Id\": \"6CXB7R7Q6Z6vUVbOqAgBNeDe0bavqfc40QH58fJv\",\n        \"X-Parse-REST-API-Key\": \"hBDXavBbm2V4xXJX6874MfcWjB9lIrx7DFTlWTbm\",\n        \"Content-Type\": \"image/png\"\n    })\n    result_pic = json.loads(connection.getresponse().read())\n    print result_pic\n</code></pre>\n\n<p>For the first 10 files or so it worked perfectly. Then all of a sudden it broke. First I couldn't read the responses anymore (result_pic) send me an exception \"ResponseNotReady\". I changed a few things in my code around and now when I try to establish a connection, I always get a de-coding error of the form: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/apple/PycharmProjects/untitled/Angel_list_request.py\", line 67, in &lt;module&gt;\n    \"Content-Type\": \"image/png\"\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 973, in request\n    self._send_request(method, url, body, headers)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 1007, in _send_request\n    self.endheaders(body)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 969, in endheaders\n    self._send_output(message_body)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 827, in _send_output\n    msg += message_body\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128)\n</code></pre>\n\n<p>No idea what is happening. Something with decoding but I didn't encounter this before at all. </p>\n"}, {"tags": ["php", "python", "raspberry-pi", "sensors", "gpio"], "comments": [{"owner": {"reputation": 392, "user_id": 8462076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cea304227dd5a520fc697981628665?s=128&d=identicon&r=PG&f=1", "display_name": "peyo", "link": "https://stackoverflow.com/users/8462076/peyo"}, "edited": false, "score": 0, "creation_date": 1502999942, "post_id": 32236588, "comment_id": 78445313, "body": "If you want to expose your service on Internet or public network, it is generally a (very) bad idea to add www-data to sudoers. The idea of having a www-data user is to avoid attacker to get root rights in case of php vulnerability. If you add www-data to sudoers, you will not have this privilege separation! (i.e. it&#39;s as if you were running your apache/php in root..)"}], "answers": [{"tags": [], "owner": {"reputation": 1521, "user_id": 855435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iFX6c.jpg?s=128&g=1", "display_name": "Viliam Simko", "link": "https://stackoverflow.com/users/855435/viliam-simko"}, "is_accepted": false, "score": 0, "last_activity_date": 1443789484, "creation_date": 1443789484, "answer_id": 32907357, "question_id": 32236588, "link": "https://stackoverflow.com/questions/32236588/passing-dht22-output-in-python-to-php/32907357#32907357", "title": "Passing DHT22 output in Python to PHP", "body": "<p>You need to setup access to GPIO on Raspberry PI otherwise it will only be accessible for root.</p>\n\n<p>Try to run the following code <strong>as root in a terminal</strong> and then check the output from your PHP script using your browser:</p>\n\n<pre><code>echo \"17\" &gt; /sys/class/gpio/export\necho \"18\" &gt; /sys/class/gpio/export\necho \"21\" &gt; /sys/class/gpio/export\necho \"22\" &gt; /sys/class/gpio/export\necho \"23\" &gt; /sys/class/gpio/export\necho \"24\" &gt; /sys/class/gpio/export\necho \"25\" &gt; /sys/class/gpio/export\n\necho \"out\" &gt; /sys/class/gpio/gpio17/direction\necho \"out\" &gt; /sys/class/gpio/gpio18/direction\necho \"out\" &gt; /sys/class/gpio/gpio21/direction\necho \"out\" &gt; /sys/class/gpio/gpio22/direction\necho \"out\" &gt; /sys/class/gpio/gpio23/direction\necho \"out\" &gt; /sys/class/gpio/gpio24/direction\necho \"out\" &gt; /sys/class/gpio/gpio25/direction\n\nchmod 666 /sys/class/gpio/gpio17/value\nchmod 666 /sys/class/gpio/gpio18/value\nchmod 666 /sys/class/gpio/gpio21/value\nchmod 666 /sys/class/gpio/gpio22/value\nchmod 666 /sys/class/gpio/gpio23/value\nchmod 666 /sys/class/gpio/gpio24/value\nchmod 666 /sys/class/gpio/gpio25/value\n\nchmod 666 /sys/class/gpio/gpio17/direction\nchmod 666 /sys/class/gpio/gpio18/direction\nchmod 666 /sys/class/gpio/gpio21/direction\nchmod 666 /sys/class/gpio/gpio22/direction\nchmod 666 /sys/class/gpio/gpio23/direction\nchmod 666 /sys/class/gpio/gpio24/direction\nchmod 666 /sys/class/gpio/gpio25/direction\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 2228629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5146470724af20890a16be2844d77acd?s=128&d=identicon&r=PG", "display_name": "user2228629", "link": "https://stackoverflow.com/users/2228629/user2228629"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2504, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459983335, "creation_date": 1440622734, "last_edit_date": 1459983335, "question_id": 32236588, "link": "https://stackoverflow.com/questions/32236588/passing-dht22-output-in-python-to-php", "title": "Passing DHT22 output in Python to PHP", "body": "<p>I have a DHT22 Temperature and Humidity sensor connected to my Raspberry Pi.  When running my Python script via CLI, the script works as expected and displays the temperature and humidity readings.  The problem that I am having is that I cannot retrieve the sensor output via PHP.</p>\n\n<p>As a test, I've included a command to print \"Hello World\" within my Python script.  When I load my PHP page, \"Hello World\" is displayed, the output from the sensor is not displayed.</p>\n\n<p>Per some of the discussions that I have read when troubleshooting this issue, the owner and group of my Python script is \"www-data\" and this user has been added to the sudoers file on my webserver.</p>\n\n<p>Any guidance is appreciated.  I've been at this for quite some time without any breakthroughs and suspect my unfamiliarity with Python may be the source of my problem.</p>\n\n<p>read_dht.py</p>\n\n<pre><code>#!/usr/bin/env python\n# Copyright (c) 2014 Adafruit Industries\n# Author: Tony DiCola\nprint 'Hello World...'\n\nimport sys\nimport Adafruit_DHT\nsensor = Adafruit_DHT.DHT22\npin = 4\n\nhumidity, temperature = Adafruit_DHT.read_retry(sensor, pin)\n\nif humidity is not None and temperature is not None:\n   print '{0:0.1f}|{1:0.1f}'.format(temperature, humidity)\nelse:\n   print 'Failed to get a reading. Please try again!'\n</code></pre>\n\n<p>get_readings.php</p>\n\n<pre><code>&lt;?php\n$command = escapeshellcmd('/var/www/cgi-bin/read_dht.py');\n$output = shell_exec($command);\necho $output;\n?&gt;\n</code></pre>\n"}, {"tags": ["python", "random-forest"], "comments": [{"owner": {"reputation": 93, "user_id": 2188329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cc6e402aee5d9aed897a007db14cf8e?s=128&d=identicon&r=PG", "display_name": "user2188329", "link": "https://stackoverflow.com/users/2188329/user2188329"}, "reply_to_user": {"reputation": 127, "user_id": 319728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/101ac51a386e694eac7995e5e189be49?s=128&d=identicon&r=PG", "display_name": "aquraishi", "link": "https://stackoverflow.com/users/319728/aquraishi"}, "edited": false, "score": 0, "creation_date": 1488814762, "post_id": 32236559, "comment_id": 72387195, "body": "The point of the post was that the model fit without error, but that the saved model could not be run without the fit error listed above.  The error says explicitly that the model was not fit when it&#39;s clear by the code already posted that it was in fact fit.  The relevant code is already posted."}], "answers": [{"comments": [{"owner": {"reputation": 2443, "user_id": 1168786, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d14d35ea0735a6a40fc61729bb936639?s=128&d=identicon&r=PG", "display_name": "ssuperczynski", "link": "https://stackoverflow.com/users/1168786/ssuperczynski"}, "edited": false, "score": 0, "creation_date": 1453454509, "post_id": 34942969, "comment_id": 57617690, "body": "This is not the answer. It should be posted under the question as a comment"}, {"owner": {"reputation": 1, "user_id": 2017531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10dad5f1d436e204a77938431c53cb3c?s=128&d=identicon&r=PG", "display_name": "MingYong Liu", "link": "https://stackoverflow.com/users/2017531/mingyong-liu"}, "reply_to_user": {"reputation": 2443, "user_id": 1168786, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d14d35ea0735a6a40fc61729bb936639?s=128&d=identicon&r=PG", "display_name": "ssuperczynski", "link": "https://stackoverflow.com/users/1168786/ssuperczynski"}, "edited": false, "score": 0, "creation_date": 1453703118, "post_id": 34942969, "comment_id": 57701148, "body": "@infaustus, I see it needs 50 Reputation in order post the comment under the question, however you can have a try of my solution."}], "tags": [], "owner": {"reputation": 1, "user_id": 2017531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10dad5f1d436e204a77938431c53cb3c?s=128&d=identicon&r=PG", "display_name": "MingYong Liu", "link": "https://stackoverflow.com/users/2017531/mingyong-liu"}, "is_accepted": false, "score": -2, "last_activity_date": 1453454189, "creation_date": 1453454189, "answer_id": 34942969, "question_id": 32236559, "link": "https://stackoverflow.com/questions/32236559/why-cant-i-save-my-trained-randomforestregressor-model/34942969#34942969", "title": "Why can&#39;t I save my trained RandomForestRegressor model?", "body": "<p>Maybe the file extension is wrong, i tried to use joblib.dump(rfClf, \"models/train_model_6.m\") to save the model and it works, you can have a try.</p>\n"}], "owner": {"reputation": 93, "user_id": 2188329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cc6e402aee5d9aed897a007db14cf8e?s=128&d=identicon&r=PG", "display_name": "user2188329", "link": "https://stackoverflow.com/users/2188329/user2188329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1552, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488652515, "creation_date": 1440622596, "question_id": 32236559, "link": "https://stackoverflow.com/questions/32236559/why-cant-i-save-my-trained-randomforestregressor-model", "title": "Why can&#39;t I save my trained RandomForestRegressor model?", "body": "<p>I have a trained RandomForestRegressor model I would like to save to a file for re-use.  I'm following the instructions on the scikit-learn persistence page, and can save the trained model.  The problem is that I cannot seem to re-use it because scikit-learn does not recognize it as trained.</p>\n\n<pre><code>model = RandomForestRegressor(n_estimators=100, max_features='sqrt',    max_depth=12, n_jobs=24)\nmodel.fit(training_input,training_target_values)\njoblib.dump(model, './trained_model/tree.pkl')\n</code></pre>\n\n<p>But when I try to re-use the model:</p>\n\n<pre><code>model = joblib.load('./trained_model/tree.pkl') \nprediction = np.array(model.predict(patient_arr))\n</code></pre>\n\n<p>I get the error:</p>\n\n<p>File \"/usr/local/lib/python2.7/dist-packages/sklearn/ensemble/forest.py\", line 614, in predict\n    check_is_fitted(self, 'n_outputs_')\n  File \"/usr/local/lib/python2.7/dist-packages/sklearn/utils/validation.py\", line 627, in check_is_fitted\n    raise NotFittedError(msg % {'name': type(estimator).<strong>name</strong>})\nsklearn.utils.validation.NotFittedError: This RandomForestRegressor instance is not fitted yet. Call 'fit' with appropriate arguments before using this method.</p>\n\n<p>I've also tried:</p>\n\n<pre><code>trained_model = model.fit(training_input,training_target_values)\njoblib.dump(trained_model, './trained_model/tree.pkl')\n</code></pre>\n\n<p>with the same results.</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "regression", "svm"], "comments": [{"owner": {"reputation": 1356, "user_id": 4500741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1823aa1543223a89629c6b54f02226b7?s=128&d=identicon&r=PG&f=1", "display_name": "NBartley", "link": "https://stackoverflow.com/users/4500741/nbartley"}, "edited": false, "score": 1, "creation_date": 1440634425, "post_id": 32236538, "comment_id": 52359533, "body": "Did you mess around with C at all?"}, {"owner": {"reputation": 235, "user_id": 1407080, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f8af675ffccf2120d52724407ccbfb?s=128&d=identicon&r=PG", "display_name": "Site", "link": "https://stackoverflow.com/users/1407080/site"}, "reply_to_user": {"reputation": 1356, "user_id": 4500741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1823aa1543223a89629c6b54f02226b7?s=128&d=identicon&r=PG&f=1", "display_name": "NBartley", "link": "https://stackoverflow.com/users/4500741/nbartley"}, "edited": false, "score": 0, "creation_date": 1440636826, "post_id": 32236538, "comment_id": 52360031, "body": "Yep, I tried values from 0.01 to 1000 for C (and played with epsilon a bit as well) but couldn&#39;t get a reasonable curve."}], "answers": [{"tags": [], "owner": {"reputation": 807, "user_id": 871765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15d7f45947de1f61299094319434b042?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/871765/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1445546450, "last_edit_date": 1445546450, "creation_date": 1445545869, "answer_id": 33290186, "question_id": 32236538, "link": "https://stackoverflow.com/questions/32236538/svm-regression-ruined-by-adding-polynomial-features/33290186#33290186", "title": "SVM regression ruined by adding polynomial features", "body": "<p>It looks like your model's picking up on outliers too heavily, which is a symptom of error from variance. This makes sense, because adding polynomial features increases the variance of a model. You should try tweaking the bias-variance tradeoff via cross validation by tweaking parameters. The parameters to modify would be C, epsilon, and gamma. The gamma parameter's incredibly important when using an RBF kernel, so I'd start there.</p>\n\n<p>Manually fiddling with these parameters (which is not recommended - see below) gave me the following model:</p>\n\n<p><a href=\"https://i.stack.imgur.com/83dac.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/83dac.png\" alt=\"enter image description here\"></a></p>\n\n<p>The parameters used here were C=5, epsilon=0.1, gamma=2**-15.</p>\n\n<p>Choosing these parameters is really a task for a proper model selection framework. I prefer simulated annealing + cross validation. The best scikit-learn currently has is random grid search +  crossval. Shameless plug for a simulated annealing module I helped with: <a href=\"https://github.com/skylergrammer/SimulatedAnnealing\" rel=\"nofollow noreferrer\">https://github.com/skylergrammer/SimulatedAnnealing</a></p>\n\n<p>Note: Polynomial features are actually products of all combinations of size d (with replacement), not just the squares of features. In the second degree case, since you only have a single feature, these are equivalent. Scikit-learn has a class that'll calculate these though: sklearn.preprocessing.PolynomialFeatures</p>\n"}], "owner": {"reputation": 235, "user_id": 1407080, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f8af675ffccf2120d52724407ccbfb?s=128&d=identicon&r=PG", "display_name": "Site", "link": "https://stackoverflow.com/users/1407080/site"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 503, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1445546450, "creation_date": 1440622504, "question_id": 32236538, "link": "https://stackoverflow.com/questions/32236538/svm-regression-ruined-by-adding-polynomial-features", "title": "SVM regression ruined by adding polynomial features", "body": "<p>I'm trying to get the feel for SVM regression with a toy example. I generated random numbers between 1 and 100 as the predictors, then took their log and added gaussian noise to create the target variables. Popping this data into sklearn's SVR module produces a reasonable looking model:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MquUM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MquUM.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, when I augment the training data by throwing in the squares of the original predictor variables, everything goes haywire: </p>\n\n<p><a href=\"https://i.stack.imgur.com/2YT3c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2YT3c.png\" alt=\"enter image description here\"></a></p>\n\n<p>I understand that the RBF kernel does something analogous to taking powers of the original features, so throwing in the second feature is mostly redundant. However, is it really the case the SVMs are this bad at handling feature redundancy? Or am I doing something wrong?</p>\n\n<p>Here is the code I used to generate these graphs:</p>\n\n<pre><code>from sklearn.svm import SVR\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# change to highest_power=2 to get the bad model\ndef create_design_matrix(x_array, highest_power=1):\n    return np.array([[x**k for k in range(1, highest_power + 1)] for x in x_array])\n\nN = 1000\n\nx_array = np.random.uniform(1, 100, N) \ny_array = np.log(x_array) + np.random.normal(0,0.2,N)\n\nmodel = SVR(C=1.0, epsilon=0.1)\nprint model\n\nX = create_design_matrix(x_array)\n#print X\n#print y_array\n\nmodel = model.fit(X, y_array)\n\n\ntest_x = np.linspace(1.0, 100.0, num=10000)\ntest_y = model.predict(create_design_matrix(test_x))\nplt.plot(x_array, y_array, 'ro')\nplt.plot(test_x, test_y)\nplt.show()\n</code></pre>\n\n<p>I'd appreciate any help with this mystery!</p>\n"}, {"tags": ["python", "while-loop", "psychopy"], "answers": [{"tags": [], "owner": {"reputation": 4377, "user_id": 3244542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d97462f60717863214b3efca87c24?s=128&d=identicon&r=PG&f=1", "display_name": "CasualDemon", "link": "https://stackoverflow.com/users/3244542/casualdemon"}, "is_accepted": false, "score": 2, "last_activity_date": 1440622732, "creation_date": 1440622732, "answer_id": 32236587, "question_id": 32236534, "link": "https://stackoverflow.com/questions/32236534/write-out-only-first-result-in-while-loop-in-psychopy/32236587#32236587", "title": "Write out only first result in while loop in psychopy", "body": "<p>I think you want something like this:</p>\n\n<pre><code>while timer.getTime() &gt;0: # while time isn't up (turns neg when time's up)\n    first = True\n    for key in event.getKeys():\n        if key in ['escape']:\n            core.quit() # quit if they press escape\n\n        timeText.draw(window)\n        timeline.draw(window)\n        cursorImage.draw(window)\n\n        ## flip so it actually appears\n        window.flip()\n        OnsetTime = clock.getTime()\n        if first:\n            logfile.write('OnsetTime, %s' % OnsetTime)\n            first = False\n</code></pre>\n\n<p>However if you only want the very first one, <code>first = True</code> will have to be outside the While loop instead. </p>\n"}, {"comments": [{"owner": {"reputation": 4377, "user_id": 3244542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824d97462f60717863214b3efca87c24?s=128&d=identicon&r=PG&f=1", "display_name": "CasualDemon", "link": "https://stackoverflow.com/users/3244542/casualdemon"}, "edited": false, "score": 0, "creation_date": 1440695815, "post_id": 32237888, "comment_id": 52391309, "body": "Very nice improvement! I never used psychopy and didn&#39;t imagine they would have something custom for that, very neat to learn."}], "tags": [], "owner": {"reputation": 4645, "user_id": 1297830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8rH9k.jpg?s=128&g=1", "display_name": "Jonas Lindel&#248;v", "link": "https://stackoverflow.com/users/1297830/jonas-lindel%c3%b8v"}, "is_accepted": true, "score": 3, "last_activity_date": 1440702270, "last_edit_date": 1440702270, "creation_date": 1440628995, "answer_id": 32237888, "question_id": 32236534, "link": "https://stackoverflow.com/questions/32236534/write-out-only-first-result-in-while-loop-in-psychopy/32237888#32237888", "title": "Write out only first result in while loop in psychopy", "body": "\n\n<p>This is just another way of doing what CasualDemon's proposing, but one which I think is more elegant (three lines of code for the logging instead of 5):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def logOnsetTime():\n    \"\"\"Function which allows launching this code right after a window.flip()\"\"\"\n    logfile.write('OnsetTime, %s' % clock.getTime())\n\nwindow.callOnFlip(logOnsetTime)  # runs on first flip\nwhile timer.getTime() &gt;0: # while time isn't up (turns neg when time's up)\n    for key in event.getKeys():\n        if key in ['escape']:\n            core.quit() # quit if they press escape\n\n        timeText.draw(window)\n        timeline.draw(window)\n        cursorImage.draw(window)\n\n        ## flip so it actually appears.\n        window.flip()\n</code></pre>\n\n<p>If you want a log for every keypress, put the <code>window.callOnFlip(logOnsetTime)</code> inside the while loop. There's also a <code>window.logOnFlip</code> method specifically for logging, but that just saves an input string to the log, timestamped to a global clock, so it wouldn't save the time of your <code>clock</code>.</p>\n"}], "owner": {"reputation": 997, "user_id": 4289314, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b2d813d4f448dc118468f2a2d69d29d6?s=128&d=identicon&r=PG&f=1", "display_name": "Maria", "link": "https://stackoverflow.com/users/4289314/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 32237888, "answer_count": 2, "score": 1, "last_activity_date": 1440702270, "creation_date": 1440622487, "last_edit_date": 1440623847, "question_id": 32236534, "link": "https://stackoverflow.com/questions/32236534/write-out-only-first-result-in-while-loop-in-psychopy", "title": "Write out only first result in while loop in psychopy", "body": "<p>I want to print my trial onset time to my logfile. However, I need to write to the logfile within a while (timer) loop, which means what whatever I do in that loop will be done for every screen refresh. </p>\n\n<p>The problem is that I only want to write the result of the first <code>clock.getTime()</code> call to the logfile. If I do this:</p>\n\n<pre><code>while timer.getTime() &gt;0: # while time isn't up (turns neg when time's up)\n    for key in event.getKeys():\n        if key in ['escape']:\n            core.quit() # quit if they press escape\n\n        timeText.draw(window)\n        timeline.draw(window)\n        cursorImage.draw(window)\n\n        ## flip so it actually appears\n        window.flip()\n        OnsetTime = clock.getTime()\n        logfile.write('OnsetTime, %s' % OnsetTime)\n</code></pre>\n\n<p>I get a bunch of lines of my logfile that say 'OnsetTime' and the time - one for every refresh.</p>\n\n<p>I only want the first one to be printed, but I'm not sure how to do that.</p>\n"}, {"tags": ["python", "image", "numpy", "ftp"], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 4682492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/15dee3daf5a186cce9ffb883c58ceb04?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/4682492/dan-g"}, "edited": false, "score": 0, "creation_date": 1440647483, "post_id": 32236577, "comment_id": 52362343, "body": "I get where you are coming from, we tried however the BytesIO object is not an image,  We get a file but it is 5x bigger than the original image."}, {"owner": {"reputation": 174, "user_id": 4682492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/15dee3daf5a186cce9ffb883c58ceb04?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/4682492/dan-g"}, "edited": false, "score": 0, "creation_date": 1440648012, "post_id": 32236577, "comment_id": 52362453, "body": "Edited main question to include attempt with MattDMo&#39;s suggestion."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 174, "user_id": 4682492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/15dee3daf5a186cce9ffb883c58ceb04?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/4682492/dan-g"}, "edited": false, "score": 0, "creation_date": 1440684046, "post_id": 32236577, "comment_id": 52383442, "body": "@DanG please see my edit, hopefully it will solve your problem."}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1440684021, "last_edit_date": 1440684021, "creation_date": 1440622691, "answer_id": 32236577, "question_id": 32236312, "link": "https://stackoverflow.com/questions/32236312/image-handling-in-python-with-numpy/32236577#32236577", "title": "Image handling in Python with Numpy", "body": "<p>In the <code>ftplib</code> module, the <a href=\"https://docs.python.org/2/library/ftplib.html#ftplib.FTP.storbinary\" rel=\"nofollow\"><code>FTP.storbinary()</code></a> method takes an open file object as its second argument. Since your <code>BytesIO</code> object can act as a file object, all you'd need to do is pass that - no need for a temporary file on the server.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Without seeing your full code, what I suspect is happening is that you are passing the NumPy array to <code>storbinary()</code>, not the <code>BytesIO</code> object. You also need to make sure the object's read pointer is at the beginning by calling <code>bytesio_object.seek(0)</code> before uploading. The following code demonstrates how to do everything:</p>\n\n<pre><code>from ftplib import FTP\nfrom io import BytesIO\nimport requests\n\nr = requests.get(\"http://example.com/foo.png\")\npng = BytesIO(r.content)\n\n# do image analysis\n\npng.seek(0)\nftp = FTP(\"ftp.server.com\")\nftp.login(user=\"username\", passwd=\"password\")\n# change to desired upload directory\nftp.storbinary(\"STOR \" + file_name, png)\ntry:\n    ftp.quit()\nexcept:\n    ftp.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 4682492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/15dee3daf5a186cce9ffb883c58ceb04?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/4682492/dan-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1440735851, "creation_date": 1440735851, "answer_id": 32263320, "question_id": 32236312, "link": "https://stackoverflow.com/questions/32236312/image-handling-in-python-with-numpy/32263320#32263320", "title": "Image handling in Python with Numpy", "body": "<p>Took a bit of research but our student figured it out :</p>\n\n<pre><code>def ftp_image_to(ftp_ip, ftp_dir, filename, data):\n    ftp = FTP(ftp_ip)\n    print(\"logging in\")\n    ftp.login('autoftp', 'autoftp')\n    print(\"making dir\")\n    ftp.mkd('FTP/' + ftp_dir)\n    ftp.cwd('FTP/' + ftp_dir)\n    print(\"formatting image\")\n    bytes = BytesIO()\n    plt.imsave(bytes, data, format='png')\n    bytes.seek(0)\n    print(\"storing binary\")\n    ftp.storbinary('STOR ' + filename, bytes)\n    ftp.quit()\n</code></pre>\n\n<p>Thanks IH!</p>\n"}], "owner": {"reputation": 174, "user_id": 4682492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/15dee3daf5a186cce9ffb883c58ceb04?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/4682492/dan-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 32263320, "answer_count": 2, "score": 1, "last_activity_date": 1579106954, "creation_date": 1440621653, "last_edit_date": 1579106954, "question_id": 32236312, "link": "https://stackoverflow.com/questions/32236312/image-handling-in-python-with-numpy", "title": "Image handling in Python with Numpy", "body": "<p>We are importing an screen capture from a web page direct into a variable in Python; and then producing a Numpy array using the following code :</p>\n\n<p>To capture is a PNG image (note - the device url has an embedded cgi to do the capture work) :</p>\n\n<pre><code>response = requests.get(url.format(ip, device), auth=credentials)\n</code></pre>\n\n<p>Once screen is captured, covert to a Numpy array called image :</p>\n\n<pre><code>image = imread(BytesIO(response.content))\n</code></pre>\n\n<p>After analysis of image, we would like to FTP the captured PNG to a server for reference at a later date.  The best solution we can find right now involves using imsave to create a file locally and then FTP with storbinary to take the local image and put it on the server.</p>\n\n<p>Is it possible to FTP response.content; or a conversion of the numpy array back into a PNG (using imsave?) direct to the server and skip the local storage step?</p>\n\n<h2>Update</h2>\n\n<p>As per MattDMo comment, we tried:</p>\n\n<pre><code>def ftp_artifact (ftp_ip, ftp_dir, tid, artifact_name, artifact_path, imgdata) :\n   ftp = FTP(ftp_ip)\n   ftp.login(\"autoftp\",\"autoftp\")\n   ftp.mkd (\"FTP/\" + ftp_dir)\n   ftp.cwd(\"FTP/\" + ftp_dir)\n   filepath = artifact_path\n   filename = artifact_name\n   f = BytesIO(imgdata)\n   ftp.storbinary ('STOR ' + filename, f)\n   ftp.quit()\n</code></pre>\n\n<p>Where imgdata is the result of io.imread.  The result file is 5x bigger and not an image.  The BytesIO object is the numpy array I presume?</p>\n"}, {"tags": ["python", "python-2.7", "if-statement", "exception-handling", "ternary-operator"], "comments": [{"owner": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "edited": false, "score": 4, "creation_date": 1440622115, "post_id": 32236306, "comment_id": 52355136, "body": "Why not use try/except? It&#39;s the perfect case for this."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1440622804, "post_id": 32236306, "comment_id": 52355460, "body": "The &quot;for some reason&quot; is that, as the error message indicates, the &quot;No review&quot; elements don&#39;t exist at the XPath location you&#39;re using.  Looking at the page, it looks like the ones with reviews have an extra div between the <code>a</code> tag and the <code>span</code> that the no-review ones don&#39;t have.  You could try refining your XPath to get both in one query (perhaps by using the <code>role=&quot;heading&quot;</code> attribute that appears on some of the divs).  Otherwise you&#39;ll have to query for a higher-level element like the business header itself, then iterate over that and check for the presence of the review on each one."}, {"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "reply_to_user": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "edited": false, "score": 0, "creation_date": 1440622879, "post_id": 32236306, "comment_id": 52355497, "body": "@f.rodrigues Yes, that&#39;s what I am currently doing (in my Webdriver program), but it is very costly from a time point of view. Each try/except is taking anywhere between 5 and 10 seconds to process."}, {"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 1, "creation_date": 1440630336, "post_id": 32236306, "comment_id": 52358437, "body": "Can you show us an example of that code?"}], "owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1440621630, "creation_date": 1440621630, "question_id": 32236306, "link": "https://stackoverflow.com/questions/32236306/how-to-avoid-an-exception-using-the-ternary-conditional-operator-or-other-with", "title": "How to avoid an exception using the ternary conditional operator (or other) without a try/except?", "body": "<p>Each of the Google review score elements (of which there are 20) on a page such as <a href=\"https://www.google.com/?gws_rd=ssl#q=chiropractors%2Bnew%20york%2Bny&amp;rflfq=1&amp;tbm=lcl&amp;tbs=lf:1,lf_ui:2&amp;oll=40.753684075373776,-73.98139879999997&amp;ospn=0.009947864395265071,0.01613616943359375&amp;oz=16&amp;fll=40.75791015795404,-73.95807431040645&amp;fspn=0.03978892801050904,0.064544677734375&amp;fz=14&amp;rlfi=hd:;si:&amp;rlha=0\" rel=\"nofollow noreferrer\">this</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9ErFS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9ErFS.png\" alt=\"enter image description here\"></a></p>\n\n<p>is defined in XPath thus:</p>\n\n<pre><code>  //ol/div[2]/div/div/div[2]/div[i]/div/div[3]/div/a[1]/div/div/div[2]/div/span\n</code></pre>\n\n<p>For some reason, when I try fetch all 20 with the following XPath, only the review scores that are <strong><em>not</em></strong> 'No reviews' get returned:</p>\n\n<pre><code>In [20]: reviews = driver.find_elements_by_xpath(\"//ol/div[2]/div/div/div[2]/div[position() &gt;= 1 and position() &lt;= 20]/div/div[3]/div/a[1]/div/div/div[2]/div/span\")\n\nIn [21]: [i.text for i in reviews]\n\nOut[21]: \n[u'20 reviews',\n u'4 reviews',\n u'4 reviews',\n u'15 reviews',\n u'2 reviews',\n u'7 reviews',\n u'3 reviews',\n u'14 reviews',\n u'2 reviews',\n u'4 reviews',\n u'3 reviews',\n u'30 reviews',\n u'6 reviews',\n u'3 reviews',\n u'2 reviews']\n</code></pre>\n\n<p>If I try to fetch these 'No reviews' elements individually, I get:</p>\n\n<pre><code>NoSuchElementException: Message: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//ol/div[2]/div/div/div[2]/div[6]/div/div[3]/div/a[1]/div/div/div[2]/div/span\"}\nStacktrace:\n    at FirefoxDriver.prototype.findElementInternal_ (file:///var/folders/th/40phk7_13ng3_7zs1rg70plh0000gn/T/tmpoUEQvJ/extensions/fxdriver@googlecode.com/components/driver-component.js:10299)\n    at FirefoxDriver.prototype.findElement (file:///var/folders/th/40phk7_13ng3_7zs1rg70plh0000gn/T/tmpoUEQvJ/extensions/fxdriver@googlecode.com/components/driver-component.js:10308)\n    at DelayedCommand.prototype.executeInternal_/h (file:///var/folders/th/40phk7_13ng3_7zs1rg70plh0000gn/T/tmpoUEQvJ/extensions/fxdriver@googlecode.com/components/command-processor.js:12282)\n    at DelayedCommand.prototype.executeInternal_ (file:///var/folders/th/40phk7_13ng3_7zs1rg70plh0000gn/T/tmpoUEQvJ/extensions/fxdriver@googlecode.com/components/command-processor.js:12287)\n    at DelayedCommand.prototype.execute/&lt; (file:///var/folders/th/40phk7_13ng3_7zs1rg70plh0000gn/T/tmpoUEQvJ/extensions/fxdriver@googlecode.com/components/command-processor.js:12229)\n</code></pre>\n\n<p>I need a way to populate a list or dict with all 20 review scores in one go, while keeping track of their position in the 20 results, and populating a value of 0 every time 'No Reviews' is encountered. I tried using the ternary conditional operator, but I obviously I will get the NoSuchElementException each time a review score is 'No Reviews', before the statement gets to say <code>else 0</code>:</p>\n\n<pre><code>In [30]: mydict[6] = driver.find_element_by_xpath(\"//ol/div[2]/div/div/div[2]/div[6]/div/div[3]/div/a[1]/div/div/div[2]/div/span\").text if driver.find_element_by_xpath(\"//ol/div[2]/div/div/div[2]/div[6]/div/div[3]/div/a[1]/div/div/div[2]/div/span\").text else 0\n</code></pre>\n\n<p>How can I check for the non-presence or presence of the element in question without triggering an exception?</p>\n"}, {"tags": ["python", "lambda"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 3, "creation_date": 1440621671, "post_id": 32236295, "comment_id": 52354906, "body": "So whats your expected output for first case?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "edited": false, "score": 0, "creation_date": 1440623149, "post_id": 32236295, "comment_id": 52355640, "body": "I can&#39;t tell what indexing you want. In python3, maybe list(range(10)) * 2 would work to replace range(10) as the second argument -- at least it has the same number of elements as list(range(20))."}], "answers": [{"comments": [{"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1440622474, "post_id": 32236365, "comment_id": 52355323, "body": "The lambdas require two arguments, but only get one. In Python 2 it&#39;s as easy as doing <code>lambda (x,y): (x**2,y**3)</code> instead. In Python 3 this doesn&#39;t work though."}, {"owner": {"reputation": 4289, "user_id": 908293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a30b8d0b807c736c457e506cd7f7f699?s=128&d=identicon&r=PG", "display_name": "saulspatz", "link": "https://stackoverflow.com/users/908293/saulspatz"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1440626820, "post_id": 32236365, "comment_id": 52357229, "body": "@tyn In python 3.4.3, lambda x,y: (x<b>2, y</b>3) seems to work fine.  You can&#39;t put parentheses around the tuple, but otherwise it works for me."}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 3, "last_activity_date": 1440623057, "last_edit_date": 1440623057, "creation_date": 1440621814, "answer_id": 32236365, "question_id": 32236295, "link": "https://stackoverflow.com/questions/32236295/is-it-possible-to-include-mutiple-equations-in-a-lambda-function/32236365#32236365", "title": "Is it possible to include mutiple equations in a lambda function", "body": "<p>If you want the product of range items you can use <code>itertools.product</code> :</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import product\n&gt;&gt;&gt; serial_result = map(lambda x:(x[0]**2,x[1]**3), product(range(20), range(10)))\n</code></pre>\n\n<p>If you want to pass the pairs to lambda like second case you can use <code>itertools.zip_longest</code> (in python 2 use <code>izip_longest</code>)and pass a fillvalue to fill the missed items, </p>\n\n<pre><code>&gt;&gt;&gt; from itertools import zip_longest\n&gt;&gt;&gt; serial_result = map(lambda x:(x[0]**2,x[1]**3), zip_longest(range(20), range(10),fillvalue=1))\n</code></pre>\n\n<p>Note that if you are in python 2 you can pass multiple argument to lambda as a tuple :</p>\n\n<pre><code>&gt;&gt;&gt; serial_result = map(lambda (x,y):(x**2,y**3), product(range(20), range(10)))\n</code></pre>\n\n<p>See the difference of <code>izip_longest</code> and <code>product</code> in following example :</p>\n\n<pre><code>&gt;&gt;&gt; list(product(range(5),range(3)))\n[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2), (3, 0), (3, 1), (3, 2), (4, 0), (4, 1), (4, 2)]\n&gt;&gt;&gt; list(zip_longest(range(5),range(3)))\n[(0, 0), (1, 1), (2, 2), (3, None), (4, None)]\n&gt;&gt;&gt; list(zip_longest(range(5),range(3),fillvalue=1))\n[(0, 0), (1, 1), (2, 2), (3, 1), (4, 1)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1069, "user_id": 3088947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3dMh.jpg?s=128&g=1", "display_name": "Mumbleskates", "link": "https://stackoverflow.com/users/3088947/mumbleskates"}, "is_accepted": false, "score": 0, "last_activity_date": 1440625529, "creation_date": 1440625529, "answer_id": 32237226, "question_id": 32236295, "link": "https://stackoverflow.com/questions/32236295/is-it-possible-to-include-mutiple-equations-in-a-lambda-function/32237226#32237226", "title": "Is it possible to include mutiple equations in a lambda function", "body": "<p>It sounds like you may be confused as to how exactly you want to use all the values in these two variables. There are several ways combine them...</p>\n\n<p>If you want a result for every combination of an element in <code>a</code> and an element in <code>b</code>: <code>itertools.product(a, b)</code>.</p>\n\n<p>If you want to stop once you get to the end of the shorter: <code>zip(a, b)</code></p>\n\n<p>If you want to continue on until you've used all of the longest: <code>itertools.zip_longer(a, b)</code> (<code>izip_longer</code> in python 2). Once <code>a</code> runs out of elements it will be filled in with <code>None</code>, or a default you provide.</p>\n"}], "owner": {"reputation": 483, "user_id": 3168283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xXxmF.jpg?s=128&g=1", "display_name": "takachanbo", "link": "https://stackoverflow.com/users/3168283/takachanbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 32236365, "answer_count": 2, "score": 1, "last_activity_date": 1440625529, "creation_date": 1440621589, "question_id": 32236295, "link": "https://stackoverflow.com/questions/32236295/is-it-possible-to-include-mutiple-equations-in-a-lambda-function", "title": "Is it possible to include mutiple equations in a lambda function", "body": "<p>I'm trying to include multiple operations in the lambda function with variables that have different lengths, i.e. something like:</p>\n\n<pre><code>$ serial_result = map(lambda x,y:(x**2,y**3), range(20), range(10))\n</code></pre>\n\n<p>but this doesn't work. Could someone tell me how to get around this?\nI understand that:</p>\n\n<pre><code>$ serial_result = map(lambda x,y:(x**2,y**3), range(0,20,2), range(10))\n</code></pre>\n\n<p>works because the arrays of \"x\" and \"y\" have the same length.</p>\n"}, {"tags": ["python", "terminal"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1440622398, "post_id": 32236241, "comment_id": 52355278, "body": "Print multiple newlines, print &quot;\\n&quot;*20"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 5000078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a2db7856fdbdeaa42ff154c82da3fb1?s=128&d=identicon&r=PG", "display_name": "BruceJohnJennerLawso", "link": "https://stackoverflow.com/users/5000078/brucejohnjennerlawso"}, "edited": false, "score": 0, "creation_date": 1440622058, "post_id": 32236345, "comment_id": 52355100, "body": "that does work, but I wanted the prompt to be at the top of the screen afterwards as well, I should have mentioned that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user890167"}, "reply_to_user": {"reputation": 357, "user_id": 5000078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a2db7856fdbdeaa42ff154c82da3fb1?s=128&d=identicon&r=PG", "display_name": "BruceJohnJennerLawso", "link": "https://stackoverflow.com/users/5000078/brucejohnjennerlawso"}, "edited": false, "score": 0, "creation_date": 1440622985, "post_id": 32236345, "comment_id": 52355543, "body": "Ok, edited. I was half-joking, but I guess there&#39;s nothing funny about 65k spaces"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user890167"}, "is_accepted": false, "score": 0, "last_activity_date": 1440622958, "last_edit_date": 1440622958, "creation_date": 1440621766, "answer_id": 32236345, "question_id": 32236241, "link": "https://stackoverflow.com/questions/32236241/python-clear-terminal-without-using-system-calls/32236345#32236345", "title": "Python clear terminal without using system calls", "body": "<p>If you have special knowledge of the screen size you can use a modified version of your original <code>print</code>-based answer.</p>\n\n<pre><code>def cls(x):\n    \"\"\"Clears the screen after printing x newlines.\"\"\"\n    print \"\\n\" * x\n    print \"\\033c\"\n</code></pre>\n\n<p>In Python 3.3 and later you can divine the size of the Terminal window with <code>shutil</code>, but I don't think there's a great way to do it in 2.7 without actually importing <code>os</code>, which you said should be avoided.</p>\n"}, {"tags": [], "owner": {"reputation": 741, "user_id": 1902466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1en5n.jpg?s=128&g=1", "display_name": "HackinGuy", "link": "https://stackoverflow.com/users/1902466/hackinguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1440623405, "creation_date": 1440623405, "answer_id": 32236743, "question_id": 32236241, "link": "https://stackoverflow.com/questions/32236241/python-clear-terminal-without-using-system-calls/32236743#32236743", "title": "Python clear terminal without using system calls", "body": "<p>This piece of code doesn't call <code>os</code> directly from the code.<br>\n<strong>Try this:</strong></p>\n\n<pre><code>from subprocess import call\ndef clear(int=None):  \n    call('clear')\n    if int == 0:\n       exit()\nclear()\n</code></pre>\n\n<p>It worked for me, I work on linux but I think it will work on windows to.</p>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 5000078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a2db7856fdbdeaa42ff154c82da3fb1?s=128&d=identicon&r=PG", "display_name": "BruceJohnJennerLawso", "link": "https://stackoverflow.com/users/5000078/brucejohnjennerlawso"}, "edited": false, "score": 0, "creation_date": 1440624235, "post_id": 32236785, "comment_id": 52356137, "body": "how exactly do I use it properly in 2.x? I tried     &gt;&gt;&gt; import sys  &gt;&gt;&gt; sys.stdout.write(&quot;\\x1b[2J\\x1b[H&quot;,end=&quot;&quot;)  Traceback (most recent call last):    File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;  TypeError: write() takes no keyword arguments"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 357, "user_id": 5000078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a2db7856fdbdeaa42ff154c82da3fb1?s=128&d=identicon&r=PG", "display_name": "BruceJohnJennerLawso", "link": "https://stackoverflow.com/users/5000078/brucejohnjennerlawso"}, "edited": false, "score": 0, "creation_date": 1440624403, "post_id": 32236785, "comment_id": 52356208, "body": "@BruceJohnJennerLawso, don&#39;t use end=&quot;&quot; with sys,  you can also <code>from __future__ import print_function</code>"}, {"owner": {"reputation": 849, "user_id": 2674572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac98e0d627ba6399371ceea60fa7225?s=128&d=identicon&r=PG", "display_name": "or1426", "link": "https://stackoverflow.com/users/2674572/or1426"}, "reply_to_user": {"reputation": 357, "user_id": 5000078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a2db7856fdbdeaa42ff154c82da3fb1?s=128&d=identicon&r=PG", "display_name": "BruceJohnJennerLawso", "link": "https://stackoverflow.com/users/5000078/brucejohnjennerlawso"}, "edited": false, "score": 0, "creation_date": 1440624535, "post_id": 32236785, "comment_id": 52356272, "body": "@BruceJohnJennerLawso just use <code>sys.stdout.write(&quot;\\x1b[2J\\x1b[H&quot;)</code> its only <code>print</code> that sticks the <code>&#39;\\n&#39;</code> on the end by default. <code>.write</code> doesn&#39;t add anything."}, {"owner": {"reputation": 849, "user_id": 2674572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac98e0d627ba6399371ceea60fa7225?s=128&d=identicon&r=PG", "display_name": "or1426", "link": "https://stackoverflow.com/users/2674572/or1426"}, "reply_to_user": {"reputation": 357, "user_id": 5000078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a2db7856fdbdeaa42ff154c82da3fb1?s=128&d=identicon&r=PG", "display_name": "BruceJohnJennerLawso", "link": "https://stackoverflow.com/users/5000078/brucejohnjennerlawso"}, "edited": false, "score": 1, "creation_date": 1440679245, "post_id": 32236785, "comment_id": 52379693, "body": "@BruceJohnJennerLawso: Look at the sequence elements <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code#Sequence_elements\" rel=\"nofollow noreferrer\">here</a>. The <code>&quot;\\x1b[&quot;</code> tells it that an ANSI code is coming up. This happens twice in that string. The first is just before <code>&quot;2J&quot;</code>. <code>&quot;J&quot;</code> tells it to clear the screen and <code>&quot;2&quot;</code> tells it to clear the <i>whole</i> screen rather than just the bit between the cursor and the beginning. The second <code>&quot;\\x1b[&quot;</code> is followed by the letter <code>&quot;H&quot;</code>. This tells it to move the cursor. You can add numbers before the <code>&quot;H&quot;</code> to tell it where to move but the default is the top left so we don&#39;t need any."}], "tags": [], "owner": {"reputation": 849, "user_id": 2674572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac98e0d627ba6399371ceea60fa7225?s=128&d=identicon&r=PG", "display_name": "or1426", "link": "https://stackoverflow.com/users/2674572/or1426"}, "is_accepted": true, "score": 2, "last_activity_date": 1440623547, "creation_date": 1440623547, "answer_id": 32236785, "question_id": 32236241, "link": "https://stackoverflow.com/questions/32236241/python-clear-terminal-without-using-system-calls/32236785#32236785", "title": "Python clear terminal without using system calls", "body": "<p>The following <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow\">ANSI escape code</a> should help on linux (and most *nix unless you find a really weird terminal):</p>\n\n<pre><code>print(\"\\x1b[2J\\x1b[H\",end=\"\")\n</code></pre>\n\n<p>It'll clear the screen and put your cursor at the top left. You can still scroll up to find your old stuff but you may have to go up a decent distance to find it.</p>\n\n<p>I have absolutely no idea what it'll do on windows. You may find you need to detect the os and use a different method there.</p>\n\n<p>For python 2.x you'll need to use <code>sys.stdout.write</code> instead of the <code>print</code> statement as you can't suppress the <code>\\n</code> on <code>print</code> in 2.x as far as I know.</p>\n"}], "owner": {"reputation": 357, "user_id": 5000078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a2db7856fdbdeaa42ff154c82da3fb1?s=128&d=identicon&r=PG", "display_name": "BruceJohnJennerLawso", "link": "https://stackoverflow.com/users/5000078/brucejohnjennerlawso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 32236785, "answer_count": 3, "score": 1, "last_activity_date": 1591770590, "creation_date": 1440621342, "last_edit_date": 1591770590, "question_id": 32236241, "link": "https://stackoverflow.com/questions/32236241/python-clear-terminal-without-using-system-calls", "title": "Python clear terminal without using system calls", "body": "<p>I would like to write a python script for use on Windows and Linux that clears the screen.<br>\nMost of the examples for this are something like:</p>\n\n<pre><code>import os\nos.system('cls')\n</code></pre>\n\n<p>which works, but is a bit dicey given all of the issues with making system calls (security issues). Is there a better way of clearing the terminal in python without needing to use system?<br>\nThe best alternative I have found so far was this:</p>\n\n<pre><code>print(\"\\033c\");\n</code></pre>\n\n<p>but it has the slight annoyance of removing everything from the terminal<br>\n(ie I would like it to clear the terminal, but the user should be able to scroll up and see previous output in the terminal).</p>\n"}, {"tags": ["java", "android", "python", "rsa"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1440720221, "post_id": 32236212, "comment_id": 52402267, "body": "You&#39;re saying your code works on Oracle Java but not Android? Also, do you realize that if you&#39;re readToken() method throws a FileNotFoundException you continue on anyway and will then get a BadPaddingException? Try setting <code>byte[] encryptedBytes = null;</code> and see if you get a different error message."}, {"owner": {"reputation": 51, "user_id": 5270200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bdcd93b112ac12c61c5c91912aca3b?s=128&d=identicon&r=PG", "display_name": "Pinae", "link": "https://stackoverflow.com/users/5270200/pinae"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1441007889, "post_id": 32236212, "comment_id": 52488406, "body": "I constructed this example because it creates the same problem I have with android with oracle java. Did you try to execute the example on your machine? If you execute the python part first the file exists and the java code reads its contents."}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1441066869, "post_id": 32236212, "comment_id": 52518537, "body": "Sorry, looking at it again I see a simple mistake in the Java code at line <code>RSAPrivateKeySpec privateKeySpec = new RSAPrivateKeySpec(d, e)</code>. This should be <code>new RSAPrivateKeySpec(N, d)</code> where the N is the same N as in the python code."}, {"owner": {"reputation": 51, "user_id": 5270200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bdcd93b112ac12c61c5c91912aca3b?s=128&d=identicon&r=PG", "display_name": "Pinae", "link": "https://stackoverflow.com/users/5270200/pinae"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1441178174, "post_id": 32236212, "comment_id": 52567249, "body": "RSA is using a private and a public key. The private key consists of <code>d</code> and <code>e</code> while the public key consists of <code>N</code> and <code>e</code>. The public key is used in the Python code to encrypt the token and the private key is used on the Java side to decrypt it. Just for fun I tested your suggestion anyways and it produces no BadPadding exception. However the decrypted text is wrong."}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1441233787, "post_id": 32236212, "comment_id": 52601089, "body": "I&#39;m an expert on RSA and Java cryptography. I have made the corrections I recommended and run the code, and received correct results. There is another bug in your code, namely your assumption that <code>System.out.println(token);</code> prints out something meaningful. It does not. You would get something more meaningful with <code>System.out.println(new String(token, StandardCharsets.UTF_8));</code>"}, {"owner": {"reputation": 51, "user_id": 5270200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bdcd93b112ac12c61c5c91912aca3b?s=128&d=identicon&r=PG", "display_name": "Pinae", "link": "https://stackoverflow.com/users/5270200/pinae"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1441912678, "post_id": 32236212, "comment_id": 52878999, "body": "I tested your suggestion and it worked. I clearly misunderstood the <code>RSAPrivateKeySpec</code> class. Thank you for your help. You mad my day!"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 5270200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bdcd93b112ac12c61c5c91912aca3b?s=128&d=identicon&r=PG", "display_name": "Pinae", "link": "https://stackoverflow.com/users/5270200/pinae"}, "is_accepted": true, "score": 1, "last_activity_date": 1441913543, "last_edit_date": 1495535435, "creation_date": 1441913543, "answer_id": 32510206, "question_id": 32236212, "link": "https://stackoverflow.com/questions/32236212/why-does-authentication-with-rsa-done-with-cryptography-io-and-java-on-android-d/32510206#32510206", "title": "Why does authentication with RSA done with cryptography.io and java on android does not work together?", "body": "<p>As <a href=\"https://stackoverflow.com/users/238704/jameskpolk\">JamesKPolk</a> pointed out there were two Bugs in my Code: The most important one was that <code>RSAPrivateKeySpec</code> needs the parameters <code>N</code> and <code>d</code> instead of <code>d</code> and <code>e</code>. The second error was not to convert the result to UTF-8.</p>\n\n<p>I updated the repository of the example which contains working code now: <a href=\"https://github.com/pinae/rsa-test-case\" rel=\"nofollow noreferrer\">https://github.com/pinae/rsa-test-case</a></p>\n\n<p>Here is the working Java code for reference (The Python part did not need to be changed):</p>\n\n<pre><code>import java.security.spec.RSAPrivateKeySpec;\nimport java.security.spec.InvalidKeySpecException;\nimport java.security.KeyFactory;\nimport java.security.interfaces.RSAPrivateKey;\nimport java.security.NoSuchAlgorithmException;\nimport javax.crypto.Cipher;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.IllegalBlockSizeException;\nimport javax.crypto.BadPaddingException;\nimport javax.xml.bind.DatatypeConverter;\nimport java.security.InvalidKeyException;\nimport java.io.BufferedReader;\nimport java.lang.StringBuilder;\nimport java.io.FileReader;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.math.BigInteger;\nimport java.nio.charset.StandardCharsets;\n\npublic class RsaTest\n{\n    public static String readTokenFile() throws IOException, FileNotFoundException\n    {\n        BufferedReader br = new BufferedReader(new FileReader(\"token.txt\"));\n        String everything;\n        try {\n            StringBuilder sb = new StringBuilder();\n            String line = br.readLine();\n\n            while (line != null) {\n                sb.append(line);\n                sb.append(System.lineSeparator());\n                line = br.readLine();\n            }\n            everything = sb.toString();\n        } finally {\n            br.close();\n        }\n        return everything;\n    }\n\n    public static void main(String args[])\n    {\n        BigInteger d = new BigInteger(\"295037637291191738956635211796692963240490064989667014592826352469032152\" +\n        \"554302874575878226107217392868462250989293041036431894475130143513053896027950170894654313285696024572\" +\n        \"555534662699797386157658559164375812029364988576033978927620169476835254057350243662602730036794048964\" +\n        \"222696882434825511051317613969394699304819377647584836298910958813068451008480950615750481597424491969\" +\n        \"616122089713036168262562790026376709519880676568817708332018002498979363533291261269633760290508292885\" +\n        \"685631554642526071767451720995816315263034482926025947996376673879307443752926326504743341468067701663\" +\n        \"647011041587666229832948060125468304864468556385524233326117655101116575438068518128417547551238351385\" +\n        \"860308667178310273798307275716775496726007972420724941548071903190058191309574401221590126135595556423\" +\n        \"538805604263913766128874929792845212075676240959916344274635408931764294117768329862724498717467735936\" +\n        \"771182991195111736108715670105340851228608489685386356809638648591870140613333363474891211943508005174\" +\n        \"556955182421433325620501790085286962409667669154804819913241047270891375736816718480232577171854082683\" +\n        \"282930378415208382344040938073467357285325060767468878914840146155371082700586582168876180646622366892\" +\n        \"654491190772272882871959076736231875073\");\n        BigInteger e = new BigInteger(\"65537\");\n        BigInteger N = new BigInteger(\n        \"6118949884542035758228165150480970484775948540894875675750019196760430437326375788316244083667312\" +\n        \"1127912691592042082374698218570305709542452573367037247942794176360141330260796114161991634877520\" +\n        \"9318638985939797245838394186947432815805159715295950796093763256835288557638341359755154607092758\" +\n        \"2125876646350225386205170869478762584625481559337889894643589498753324189655838737003231877149808\" +\n        \"0769782782986004968223577252545632595856348578972986803087375151523130980468315658731145540661959\" +\n        \"6050525545290045046944269076387765616800870979827653118293545195314596061160131055834487112435567\" +\n        \"4188026149535089147013264878621144892167844471212662659174643958985053020651238408715157877344829\" +\n        \"6332175379863190146700888623219388047354669492295105275244771100851445677743253407525918517909312\" +\n        \"1064757322245873728715200541955720319721861626588734157728068815156326358980514571916869090216857\" +\n        \"1674529819233099030185697193927748667568997849788205951188943230054712902846136235791743994018772\" +\n        \"7474047360851939145847078056327450140607700002648843419498134708391530606499524381440473803469993\" +\n        \"9125774781194053568746989605638413082541876600142556111173865505734416200456890738357199900214109\" +\n        \"565602296409823349451352963303084528108078854673626645830490080013931\");\n\n        byte[] encryptedBytes = new byte[]{};\n        try {\n            String encryptedToken = readTokenFile();\n            encryptedBytes = DatatypeConverter.parseBase64Binary(encryptedToken);\n        } catch (FileNotFoundException ex) {\n            System.out.println(\"File token.txt was not found.\");\n        } catch (IOException ex) {\n            System.out.println(\"IO error.\");\n        }\n        RSAPrivateKeySpec privateKeySpec = new RSAPrivateKeySpec(N, d);\n        try {\n            KeyFactory factory = KeyFactory.getInstance(\"RSA\");\n            RSAPrivateKey privateKey = (RSAPrivateKey) factory.generatePrivate(privateKeySpec);\n            Cipher cipher = Cipher.getInstance(\"RSA/ECB/OAEPWithSHA-1AndMGF1Padding\");\n            cipher.init(Cipher.DECRYPT_MODE, privateKey);\n            byte[] token = cipher.doFinal(encryptedBytes);\n            System.out.println(new String(token, StandardCharsets.UTF_8));\n        } catch (NoSuchAlgorithmException ex) {\n            System.out.println(\"Missing algorithm.\");\n        } catch (InvalidKeySpecException ex) {\n            System.out.println(\"Invalid key spec.\");\n        } catch (NoSuchPaddingException ex) {\n            System.out.println(\"No such padding.\");\n        } catch (InvalidKeyException ex) {\n            System.out.println(\"Invalid key.\");\n        } catch (IllegalBlockSizeException ex) {\n            System.out.println(\"Wrong block size.\");\n        } catch (BadPaddingException ex) {\n            System.out.println(\"Bad padding.\");\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5270200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bdcd93b112ac12c61c5c91912aca3b?s=128&d=identicon&r=PG", "display_name": "Pinae", "link": "https://stackoverflow.com/users/5270200/pinae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 4, "accepted_answer_id": 32510206, "answer_count": 1, "score": 2, "last_activity_date": 1441913543, "creation_date": 1440621248, "last_edit_date": 1440621397, "question_id": 32236212, "link": "https://stackoverflow.com/questions/32236212/why-does-authentication-with-rsa-done-with-cryptography-io-and-java-on-android-d", "title": "Why does authentication with RSA done with cryptography.io and java on android does not work together?", "body": "<p>I want to use RSA to authenticate clients at a server. The server written in Python posesses the public key of the client which is an Android app. I decided to use cryptography.io on the Python side to encrypt a token and I want to decrypt it with javax.crypto.</p>\n\n<p>I constructed a test case for my problem which works with Python3 and Java without Android: <a href=\"https://github.com/pinae/rsa-test-case\" rel=\"nofollow\">https://github.com/pinae/rsa-test-case</a></p>\n\n<p>The Python side looks like this:</p>\n\n<pre><code>from cryptography.hazmat.primitives import hashes\nfrom cryptography.hazmat.primitives.asymmetric import rsa, padding\nfrom cryptography.hazmat.backends import default_backend\nfrom base64 import b64encode\n\nN = int(\"6118949884542035758228165150480970484775948540894875675750019196760430437326375788316244083667312\" +\n        \"1127912691592042082374698218570305709542452573367037247942794176360141330260796114161991634877520\" +\n        \"9318638985939797245838394186947432815805159715295950796093763256835288557638341359755154607092758\" +\n        \"2125876646350225386205170869478762584625481559337889894643589498753324189655838737003231877149808\" +\n        \"0769782782986004968223577252545632595856348578972986803087375151523130980468315658731145540661959\" +\n        \"6050525545290045046944269076387765616800870979827653118293545195314596061160131055834487112435567\" +\n        \"4188026149535089147013264878621144892167844471212662659174643958985053020651238408715157877344829\" +\n        \"6332175379863190146700888623219388047354669492295105275244771100851445677743253407525918517909312\" +\n        \"1064757322245873728715200541955720319721861626588734157728068815156326358980514571916869090216857\" +\n        \"1674529819233099030185697193927748667568997849788205951188943230054712902846136235791743994018772\" +\n        \"7474047360851939145847078056327450140607700002648843419498134708391530606499524381440473803469993\" +\n        \"9125774781194053568746989605638413082541876600142556111173865505734416200456890738357199900214109\" +\n        \"565602296409823349451352963303084528108078854673626645830490080013931\")\ne = 65537\nkey = rsa.RSAPublicNumbers(e, int(N)).public_key(default_backend())\n\ntoken = \"Some test bytes.\".encode('utf-8')\nencrypted_token = key.encrypt(\n    token,\n    padding.OAEP(\n        mgf=padding.MGF1(algorithm=hashes.SHA1()),\n        algorithm=hashes.SHA1(),\n        label=None\n    )\n)\nwith open(\"token.txt\", 'w') as file:\n    file.write(str(b64encode(encrypted_token), encoding='utf-8'))\n</code></pre>\n\n<p>The java code is a bit more verbose:</p>\n\n<pre><code>import java.security.spec.RSAPrivateKeySpec;\nimport java.security.spec.InvalidKeySpecException;\nimport java.security.KeyFactory;\nimport java.security.interfaces.RSAPrivateKey;\nimport java.security.NoSuchAlgorithmException;\nimport javax.crypto.Cipher;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.IllegalBlockSizeException;\nimport javax.crypto.BadPaddingException;\nimport javax.xml.bind.DatatypeConverter;\nimport java.security.InvalidKeyException;\nimport java.io.BufferedReader;\nimport java.lang.StringBuilder;\nimport java.io.FileReader;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.math.BigInteger;\n\npublic class RsaTest\n{\n    public static String readTokenFile() throws IOException, FileNotFoundException\n    {\n        BufferedReader br = new BufferedReader(new FileReader(\"token.txt\"));\n        String everything;\n        try {\n            StringBuilder sb = new StringBuilder();\n            String line = br.readLine();\n\n            while (line != null) {\n                sb.append(line);\n                sb.append(System.lineSeparator());\n                line = br.readLine();\n            }\n            everything = sb.toString();\n        } finally {\n            br.close();\n        }\n        return everything;\n    }\n\n    public static void main(String args[])\n    {\n        BigInteger d = new BigInteger(\"295037637291191738956635211796692963240490064989667014592826352469032152\" +\n        \"554302874575878226107217392868462250989293041036431894475130143513053896027950170894654313285696024572\" +\n        \"555534662699797386157658559164375812029364988576033978927620169476835254057350243662602730036794048964\" +\n        \"222696882434825511051317613969394699304819377647584836298910958813068451008480950615750481597424491969\" +\n        \"616122089713036168262562790026376709519880676568817708332018002498979363533291261269633760290508292885\" +\n        \"685631554642526071767451720995816315263034482926025947996376673879307443752926326504743341468067701663\" +\n        \"647011041587666229832948060125468304864468556385524233326117655101116575438068518128417547551238351385\" +\n        \"860308667178310273798307275716775496726007972420724941548071903190058191309574401221590126135595556423\" +\n        \"538805604263913766128874929792845212075676240959916344274635408931764294117768329862724498717467735936\" +\n        \"771182991195111736108715670105340851228608489685386356809638648591870140613333363474891211943508005174\" +\n        \"556955182421433325620501790085286962409667669154804819913241047270891375736816718480232577171854082683\" +\n        \"282930378415208382344040938073467357285325060767468878914840146155371082700586582168876180646622366892\" +\n        \"654491190772272882871959076736231875073\");\n        BigInteger e = new BigInteger(\"65537\");\n\n        byte[] encryptedBytes = new byte[]{};\n        try {\n            String encryptedToken = readTokenFile();\n            encryptedBytes = DatatypeConverter.parseBase64Binary(encryptedToken);\n        } catch (FileNotFoundException ex) {\n            System.out.println(\"File token.txt was not found.\");\n        } catch (IOException ex) {\n            System.out.println(\"IO error.\");\n        }\n        RSAPrivateKeySpec privateKeySpec = new RSAPrivateKeySpec(d, e);\n        try {\n            KeyFactory factory = KeyFactory.getInstance(\"RSA\");\n            RSAPrivateKey privateKey = (RSAPrivateKey) factory.generatePrivate(privateKeySpec);\n            Cipher cipher = Cipher.getInstance(\"RSA/ECB/OAEPWithSHA-1AndMGF1Padding\");\n            cipher.init(Cipher.DECRYPT_MODE, privateKey);\n            byte[] token = cipher.doFinal(encryptedBytes);\n            System.out.println(token);\n        } catch (NoSuchAlgorithmException ex) {\n            System.out.println(\"Missing algorithm.\");\n        } catch (InvalidKeySpecException ex) {\n            System.out.println(\"Invalid key spec.\");\n        } catch (NoSuchPaddingException ex) {\n            System.out.println(\"No such padding.\");\n        } catch (InvalidKeyException ex) {\n            System.out.println(\"Invalid key.\");\n        } catch (IllegalBlockSizeException ex) {\n            System.out.println(\"Wrong block size.\");\n        } catch (BadPaddingException ex) {\n            System.out.println(\"Bad padding.\");\n        }\n    }\n}\n</code></pre>\n\n<p>If I run the code I get a BadPaddingException. I believe the settings for the padding match in both implementations.</p>\n\n<p>I would prefer an answer which keeps my choices for libraries but I am open for all ideas how to get this running.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 37, "user_id": 5230093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20b8a5ec338e09bf7d7b7e312a817bb3?s=128&d=identicon&r=PG&f=1", "display_name": "soul", "link": "https://stackoverflow.com/users/5230093/soul"}, "reply_to_user": {"reputation": 5896, "user_id": 5080995, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/10153059476487462/picture?type=large", "display_name": "martianwars", "link": "https://stackoverflow.com/users/5080995/martianwars"}, "edited": false, "score": 0, "creation_date": 1440621670, "post_id": 32236184, "comment_id": 52354905, "body": "Sorry got it forgot to add sum=0 at end"}, {"owner": {"reputation": 5896, "user_id": 5080995, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/10153059476487462/picture?type=large", "display_name": "martianwars", "link": "https://stackoverflow.com/users/5080995/martianwars"}, "edited": false, "score": 0, "creation_date": 1440621720, "post_id": 32236184, "comment_id": 52354930, "body": "use <a href=\"http://cs.stackexchange.com/\">cs.stackexchange.com</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1440621780, "post_id": 32236184, "comment_id": 52354966, "body": "Taking just this statement to keep it simple self.x=self.x/10, self.x will never be equal to or less than zero (assuming you are using Python 3x), it will just be very, very small, so you have an infinite loop.  I would suggest that you add a counter to the loop, print self.x and the counter, and exit the loop after the counter reaches some reasonable number, like 100 to test this."}], "answers": [{"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1441158926, "post_id": 32236835, "comment_id": 52561265, "body": "Hi, did you find your answer here?"}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 0, "last_activity_date": 1440623760, "creation_date": 1440623760, "answer_id": 32236835, "question_id": 32236184, "link": "https://stackoverflow.com/questions/32236184/error-time-limit-exceeded-add-digits-of-number/32236835#32236835", "title": "Error Time Limit exceeded Add digits of number", "body": "<p>I simplified the algorithm: here are 2 implementations (with 1 respectively 2 nested loops):</p>\n\n<pre><code>def addDigits(self, num):\n    aux = num\n    sum = 0\n    while aux &gt; 9:\n        sum = sum + aux % 10\n        aux = aux / 10\n        if aux &lt;= 9:\n            sum = sum + aux\n            aux = sum\n            sum = 0\n    return aux\n\ndef addDigits(self, num):\n    aux = num\n    sum = 0\n    while True:\n        while aux &gt; 9:\n            sum = sum + aux % 10\n            aux = aux / 10\n        sum = sum + aux\n        aux = sum\n        sum = 0\n        if aux &lt;= 9:\n            break\n    return aux\n</code></pre>\n\n<p><strong>Notes</strong>:</p>\n\n<ul>\n<li><p>I replaced <code>self.x</code> with <code>aux</code>; there's no reason to have a private member used just for storing a method internal (and temporary) data</p></li>\n<li><p>Since the method does not depend of any class members it can be decorated as <code>@classmethod</code></p></li>\n</ul>\n"}], "owner": {"reputation": 37, "user_id": 5230093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20b8a5ec338e09bf7d7b7e312a817bb3?s=128&d=identicon&r=PG&f=1", "display_name": "soul", "link": "https://stackoverflow.com/users/5230093/soul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 32236835, "answer_count": 1, "score": 0, "last_activity_date": 1440623760, "creation_date": 1440621120, "question_id": 32236184, "link": "https://stackoverflow.com/questions/32236184/error-time-limit-exceeded-add-digits-of-number", "title": "Error Time Limit exceeded Add digits of number", "body": "<p>I have used iterative approach to add all digits of a number till the sum is a unit number. My code is:</p>\n\n<pre><code>    def addDigits(self, num):\n    self.x=num\n    a=[]\n    sum=0\n    count=0\n    count1=0\n    p=0\n    while((self.x)/10&gt;0):\n        while(self.x&gt;0):\n            self.x=self.x/10\n            count=count+1\n        self.x=num\n        while(count&gt;0):\n            if(count==1):\n                self.x=self.x%10\n                sum=sum+self.x\n            else:\n                self.x=self.x/(10**(count-1))\n                sum=sum+self.x    \n                self.x=num\n                self.x=self.x%(10**(count-1))\n\n\n            count=count-1\n\n        self.x=sum \n\n        num=self.x\n    return self.x\n</code></pre>\n\n<p>I am getting time exceeded error for input where sum>10.Please suggest some ways to solve this problem so that correct output can be there</p>\n"}, {"tags": ["python", "function", "arduino"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1440622244, "post_id": 32236172, "comment_id": 52355201, "body": "What does  print(motorBytes) show and what does ser.write(motorBytes) return?  The function may or may not know what &quot;ser&quot;, &quot;left&quot;, &quot;right&quot;, etc. are as they are not passed to the function, but may be global in scope."}, {"owner": {"reputation": 107, "user_id": 4704943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/089b233db86fdca135cdb571ab2fbe54?s=128&d=identicon&r=PG&f=1", "display_name": "rtmurad", "link": "https://stackoverflow.com/users/4704943/rtmurad"}, "edited": false, "score": 0, "creation_date": 1440625410, "post_id": 32236172, "comment_id": 52356652, "body": "@CurlyJoe all of those are declared, I just left them out so my question text was not even longer! Though I can add them in if you think it is necessary. Also, I thought it might not be necessary, because the text in the while loop and the function are the exact same except for what I&#39;ve posted, and the while loop does run as expected."}, {"owner": {"reputation": 107, "user_id": 4704943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/089b233db86fdca135cdb571ab2fbe54?s=128&d=identicon&r=PG&f=1", "display_name": "rtmurad", "link": "https://stackoverflow.com/users/4704943/rtmurad"}, "edited": false, "score": 0, "creation_date": 1440625570, "post_id": 32236172, "comment_id": 52356722, "body": "print(motorBytes) returns bytearray(b&#39;\\xff\\x00\\xaa\\x00\\x00&#39;) and ser.write(motorBytes) returns the same thing in arduino, but without the bytearray part. These are the expected values."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1440693668, "post_id": 32236172, "comment_id": 52390121, "body": "ser.write() usually returns the number of bytes written, but it depends on the serial package in use.  If you are not getting that then there is a problem with the write, i.e. ser not declared properly, etc."}, {"owner": {"reputation": 107, "user_id": 4704943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/089b233db86fdca135cdb571ab2fbe54?s=128&d=identicon&r=PG&f=1", "display_name": "rtmurad", "link": "https://stackoverflow.com/users/4704943/rtmurad"}, "edited": false, "score": 0, "creation_date": 1440698068, "post_id": 32236172, "comment_id": 52392714, "body": "@CurlyJoe I see what you mean now about the function not being passed the global variables, sorry I keep misunderstanding what you mean, and I think you are right. Though I&#39;m not sure why it appears that my serial connection is working (I was able to print values that were sent through serial) if that is so."}, {"owner": {"reputation": 107, "user_id": 4704943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/089b233db86fdca135cdb571ab2fbe54?s=128&d=identicon&r=PG&f=1", "display_name": "rtmurad", "link": "https://stackoverflow.com/users/4704943/rtmurad"}, "edited": false, "score": 0, "creation_date": 1440698586, "post_id": 32236172, "comment_id": 52392999, "body": "Since ser is a global variable, if I add that in as a parameter to my function call, when I do call the function, do I just use ser as the parameter? e.g. motor_loop(1.5, 30, 0, 60, 60, ser)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1440707017, "post_id": 32236172, "comment_id": 52397436, "body": "Yes.  Use the name passed to the function (i.e. used in the function definition)"}], "owner": {"reputation": 107, "user_id": 4704943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/089b233db86fdca135cdb571ab2fbe54?s=128&d=identicon&r=PG&f=1", "display_name": "rtmurad", "link": "https://stackoverflow.com/users/4704943/rtmurad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440625611, "creation_date": 1440621085, "last_edit_date": 1440625611, "question_id": 32236172, "link": "https://stackoverflow.com/questions/32236172/trouble-switching-from-while-true-code-to-a-function", "title": "Trouble switching from While True code to a function", "body": "<p>I have code written in Python and Arduino using serial communication, and I didn't organize it into functions or a class originally, so I am trying to do so now in order to make it more readable and easier to use. However, I am having trouble with switching from an infinite loop to a function that can be called multiple times. The infinite loop works fully, making the motors run and printing out the right statements, and the function enacts the print statements, but it won't make the motors run.</p>\n\n<p>General Python code with infinite loop:</p>\n\n<pre><code>while True: \n    ser.write('a'.encode())       #used as an initial byte\n\n    ...other code... mostly assigning values to the variables below\n\n    motorBytes = bytearray([decToByte(left), decToByte(right), decToByte(leftMid), decToByte(rightMid), distPerc])      #puts the motor values into an array as hex\n    print(motorBytes)\n\n    ser.write(motorBytes)\n</code></pre>\n\n<p>General Python code with function:</p>\n\n<pre><code>def motor_loop(distObject, forceGraspL, forceGraspR, maxForceL, maxForceR):\n    ser.write('a'.encode())\n\n    ...other code... mostly assigning values to the variables below\n\n    motorBytes = bytearray([decToByte(left), decToByte(right), decToByte(leftMid), decToByte(rightMid), distPerc])      #puts the motor values into an array as hex\n    print(motorBytes)\n\n    ser.write(motorBytes)\n    return\n\nmotor_loop(1.5, 0, 30, 60, 60)        #call the function\n</code></pre>\n\n<p>The values are sort of arbitrary, for I am printing the values that are being sent through serial communication on both sides, and they are the correct values. </p>\n\n<p>General Arduino Code:</p>\n\n<pre><code>void loop() \n{\n  while (Serial.available()&gt;0)    //checks to see if anything needs to be sent,\n  {                            //denoted by recieveing signal from pySerial \n     char inByte = Serial.read();\n\n\n     if (inByte == 'a') \n     {\n       run_loop();\n     }   \n  }         \n}   \n\n void run_loop()\n{\n  int num = Serial.readBytes(values, 5);\n  if (num &lt; 5)\n  {\n     return;\n  }\n\n  writeMotor(mtrPinLeft, mtrSpeedLeft, mtrPinRight, mtrSpeedRight, mtrPinLeftMid, mtrSpeedLeftMid, mtrPinRightMid, mtrSpeedRightMid); \n</code></pre>\n\n<p>(where writeMotor is a function that will write all of the motor values to the correct pins.)</p>\n\n<p>I have a feeling that the section of code in the arduino bit in run_loop(): with the return, in order to have the function not run if it does not hold all of the data. Can anyone confirm this hunch and have any suggestions on how I might fix this? I am not super familiar with functions either, so I could be missing something with how to deal with functions. Thanks in advance!</p>\n\n<p><strong>Edit:</strong> ser is declared as ser = serial.Serial(port = 'COM4') and all of the variables above (left, right, leftMid, etc.) are declared in the space where it says other code</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 1137, "user_id": 639536, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7e850fb110d9225b2ffa48f27d1dd116?s=128&d=identicon&r=PG", "display_name": "Pramit", "link": "https://stackoverflow.com/users/639536/pramit"}, "edited": false, "score": 0, "creation_date": 1482199714, "post_id": 32236207, "comment_id": 69667267, "body": "Great answer guys. I do understand the question here is specific to pyspark but thought it might not hurt to also include how a similar logic may be resolved in Scala as well df.filter(df.col(&quot;a&quot;).isNull() or df.col(&quot;a&quot;).isNaN() ).count() I hope that was helpful"}, {"owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "edited": false, "score": 1, "creation_date": 1565124401, "post_id": 32236207, "comment_id": 101251689, "body": "Is there a way to filter the row if ANY column is null?"}], "tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": true, "score": 22, "last_activity_date": 1440625282, "last_edit_date": 1440625282, "creation_date": 1440621211, "answer_id": 32236207, "question_id": 32236135, "link": "https://stackoverflow.com/questions/32236135/how-to-get-rows-from-df-that-contain-value-none-in-pyspark-spark/32236207#32236207", "title": "How to get rows from DF that contain value None in pyspark (spark)", "body": "<p>You can use <a href=\"https://spark.apache.org/docs/1.3.1/api/python/pyspark.sql.html#pyspark.sql.Column.isNull\" rel=\"noreferrer\"><code>Column.isNull</code></a> method:</p>\n\n<pre><code>df.where(df.a.isNull()).count()\n</code></pre>\n\n<p>On a side note this behavior is what one could expect from a <a href=\"http://sqlfiddle.com/#!15/6c1d3/1\" rel=\"noreferrer\">normal SQL query</a>. Since <code>NULL</code> marks <em>\"missing information and inapplicable information\"</em> [1] it doesn't make sense to ask if something is equal to <code>NULL</code>. It simply either <code>IS</code> or <code>IS NOT</code> missing.\\</p>\n\n<p>Scala API provides special null-safe equality <code>&lt;=&gt;</code> operator so it is possible to do something like this:</p>\n\n<pre><code>df.where($\"a\" &lt;=&gt; lit(null))\n</code></pre>\n\n<p>but it doesn't look like a good idea if you ask me. </p>\n\n<p>1.<a href=\"https://en.wikipedia.org/wiki/Null_%28SQL%29\" rel=\"noreferrer\">Wikipedia, Null (SQL)</a></p>\n"}], "owner": {"reputation": 5335, "user_id": 333763, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0370dd5155ccb01b88ffee25f2e0f765?s=128&d=identicon&r=PG&f=1", "display_name": "marcin_koss", "link": "https://stackoverflow.com/users/333763/marcin-koss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23324, "favorite_count": 1, "accepted_answer_id": 32236207, "answer_count": 1, "score": 10, "last_activity_date": 1470146713, "creation_date": 1440620930, "question_id": 32236135, "link": "https://stackoverflow.com/questions/32236135/how-to-get-rows-from-df-that-contain-value-none-in-pyspark-spark", "title": "How to get rows from DF that contain value None in pyspark (spark)", "body": "<p>In below example <code>df.a == 1</code> predicate returns correct result but <code>df.a == None</code> returns 0 when it should return 1.</p>\n\n<pre><code>l = [[1], [1], [2], [2], [None]]\ndf = sc.parallelize(l).toDF(['a'])\ndf    # DataFrame[a: bigint]\ndf.collect()    # [Row(a=1), Row(a=1), Row(a=2), Row(a=2), Row(a=None)]\ndf.where(df.a == 1).count()   # 2L\ndf.where(df.a == None).count()   # 0L\n</code></pre>\n\n<p>Using Spark 1.3.1</p>\n"}, {"tags": ["python", "module", "interactive"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "edited": false, "score": 3, "creation_date": 1440620808, "post_id": 32236052, "comment_id": 52354426, "body": "import sys; sys.modules.keys()\u200b\u200b\u200b.  For a more refined solution see <a href=\"http://stackoverflow.com/questions/4858100/how-to-list-imported-modules\" title=\"how to list imported modules\">stackoverflow.com/questions/4858100/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 3, "last_activity_date": 1440621033, "creation_date": 1440621033, "answer_id": 32236157, "question_id": 32236052, "link": "https://stackoverflow.com/questions/32236052/what-is-the-best-way-of-listing-all-imported-modules-in-python/32236157#32236157", "title": "What is the best way of listing all imported modules in python?", "body": "<p>Use <code>sys.modules</code>:</p>\n\n<pre><code>import sys\nprint '\\n'.join(sys.modules)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 2, "creation_date": 1440621783, "post_id": 32236278, "comment_id": 52354970, "body": "That lists all <i>installed</i> modules, while the question is about listing the modules currently <i>imported</i> in a running process."}], "tags": [], "owner": {"reputation": 78, "user_id": 3383064, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LdEhE.jpg?s=128&g=1", "display_name": "Thuruv", "link": "https://stackoverflow.com/users/3383064/thuruv"}, "is_accepted": false, "score": -1, "last_activity_date": 1440664457, "last_edit_date": 1440664457, "creation_date": 1440621514, "answer_id": 32236278, "question_id": 32236052, "link": "https://stackoverflow.com/questions/32236052/what-is-the-best-way-of-listing-all-imported-modules-in-python/32236278#32236278", "title": "What is the best way of listing all imported modules in python?", "body": "<p>Use Pip</p>\n\n<pre><code>pip freeze\n</code></pre>\n\n<p>Using:</p>\n\n<pre><code>pip freeze &gt; requirements.txt \n</code></pre>\n\n<p>will save all the modelues in a text file.</p>\n"}], "owner": {"reputation": 3353, "user_id": 735008, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ff8bc1d961191331430e5e93886b1826?s=128&d=identicon&r=PG", "display_name": "chanwcom", "link": "https://stackoverflow.com/users/735008/chanwcom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 32236157, "answer_count": 2, "score": 2, "last_activity_date": 1440664457, "creation_date": 1440620622, "question_id": 32236052, "link": "https://stackoverflow.com/questions/32236052/what-is-the-best-way-of-listing-all-imported-modules-in-python", "title": "What is the best way of listing all imported modules in python?", "body": "<p>Usually, after doing numerical SciPy/NumPy calculations in the interactive mode for several hours, a bunch of modules become to be loaded.</p>\n\n<p>Are there any good ways to see the list of imported modules from the interactive python command line?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "matplotlib", "heatmap"], "comments": [{"owner": {"reputation": 7622, "user_id": 4752656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZLby.png?s=128&g=1", "display_name": "BlivetWidget", "link": "https://stackoverflow.com/users/4752656/blivetwidget"}, "edited": false, "score": 0, "creation_date": 1440621871, "post_id": 32236046, "comment_id": 52355014, "body": "I&#39;m not familiar with using heatmaps, but for plt.imshow I just use plt.legend.  If that doesn&#39;t work, you might consider just creating a subplot with a 1D heatmap below it, where input is just a list from 0 to your highest number."}], "answers": [{"comments": [{"owner": {"reputation": 1015, "user_id": 3284912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31af9051d49bec6f1bee594fa3573a55?s=128&d=identicon&r=PG&f=1", "display_name": "anaik", "link": "https://stackoverflow.com/users/3284912/anaik"}, "edited": false, "score": 4, "creation_date": 1552938678, "post_id": 32236254, "comment_id": 97192620, "body": "Where <code>heatmap = plt.pcolor(data)</code>"}], "tags": [], "owner": {"reputation": 3352, "user_id": 5062848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-q9vZC1ZFIGI/AAAAAAAAAAI/AAAAAAAAADc/2w-cUpWoQ6Y/photo.jpg?sz=128", "display_name": "Amy Teegarden", "link": "https://stackoverflow.com/users/5062848/amy-teegarden"}, "is_accepted": true, "score": 25, "last_activity_date": 1440621395, "creation_date": 1440621395, "answer_id": 32236254, "question_id": 32236046, "link": "https://stackoverflow.com/questions/32236046/add-a-legend-to-my-heatmap-plot/32236254#32236254", "title": "Add a legend to my heatmap plot", "body": "<p>It sounds like what you want is a colorbar. Once you plot your heatmap, you can use <code>plt.colorbar(heatmap)</code> to add a colorbar.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QIDCR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QIDCR.png\" alt=\"Heatmap with colorbar\"></a></p>\n"}], "owner": {"reputation": 986, "user_id": 5098391, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-T1xSe6F16Lo/AAAAAAAAAAI/AAAAAAAAACA/yysNIMuatno/photo.jpg?sz=128", "display_name": "Louis Etienne", "link": "https://stackoverflow.com/users/5098391/louis-etienne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19242, "favorite_count": 3, "accepted_answer_id": 32236254, "answer_count": 1, "score": 13, "last_activity_date": 1440621395, "creation_date": 1440620601, "question_id": 32236046, "link": "https://stackoverflow.com/questions/32236046/add-a-legend-to-my-heatmap-plot", "title": "Add a legend to my heatmap plot", "body": "<p>I'm trying to translate datas from csv file to a heatmap. For the moment, my heatmap looks like this : \n<a href=\"https://i.stack.imgur.com/aPtpL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aPtpL.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it miss a legend! This is my code :</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ncolumn_labels = list(range(0,24))\nrow_labels = [\"Lundi\",\n              \"Mardi\",\n              \"Mercredi\",\n              \"Jeudi\",\n              \"Vendredi\",\n              \"Samedi\",\n              \"Dimanche\"]\ndata = np.array([\n                [0,0,0,0,0,0,0,0,0,0,434,560,650,340,980,880,434,434,0,0,0,0,0,0],\n                [0,0,0,0,0,0,0,434,560,0,650,0,0,0,0,340,980,0,0,0,880,0,434,343],\n                [0,0,0,0,0,0,0,0,0,0,434,560,650,340,980,880,434,434,0,0,0,0,0,0],\n                [0,0,0,0,0,0,0,434,560,0,650,0,0,0,0,340,980,0,0,0,880,0,434,343],\n                [0,0,0,0,0,0,0,0,0,0,434,560,650,340,980,880,434,434,0,0,0,0,0,0],\n                [0,0,0,0,0,0,0,434,560,0,650,0,0,0,0,340,980,0,0,0,880,0,434,343],\n                [0,0,0,0,0,0,0,0,0,0,434,560,650,340,980,880,434,434,0,0,0,0,0,0]\n                ])\nfig, axis = plt.subplots() # il me semble que c'est une bonne habitude de faire supbplots\nheatmap = axis.pcolor(data, cmap=plt.cm.Blues) # heatmap contient les valeurs\n\naxis.set_yticks(np.arange(data.shape[0])+0.5, minor=False)\naxis.set_xticks(np.arange(data.shape[1])+0.5, minor=False)\n\naxis.invert_yaxis()\n\naxis.set_yticklabels(row_labels, minor=False)\naxis.set_xticklabels(column_labels, minor=False)\n\nfig.set_size_inches(11.03, 3.5)\n\nplt.savefig('test.png', dpi=100)\n</code></pre>\n\n<p>How can I have a legend to this plot ? Like in this one :\n<a href=\"https://i.stack.imgur.com/HzVAv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HzVAv.png\" alt=\"Heatmap made in javascript\"></a></p>\n\n<p>Thanks a lot for your help !</p>\n"}, {"tags": ["python", "windows", "escaping", "registry", "subprocess"], "comments": [{"owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "edited": false, "score": 0, "creation_date": 1440621001, "post_id": 32236009, "comment_id": 52354555, "body": "Have you tried supplying it as a list of arguments? i.e. <code>key = [&#39;reg&#39;, &#39;delete&#39;, &#39;HKEY...&#39;]</code>"}, {"owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "edited": false, "score": 0, "creation_date": 1440621140, "post_id": 32236009, "comment_id": 52354634, "body": "What about if you do <code>shell=False</code>?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1440624971, "post_id": 32236009, "comment_id": 52356454, "body": "If you simply launch <i>python</i> what&#39;s the 1st line that it displays?"}, {"owner": {"reputation": 55, "user_id": 4694490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a65038377ee0f9ee7a307938139557?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Gooddeal", "link": "https://stackoverflow.com/users/4694490/mister-gooddeal"}, "edited": false, "score": 0, "creation_date": 1440626487, "post_id": 32236009, "comment_id": 52357090, "body": "Python 3.4.2 (v3.4.2:ab2c023a9432, Oct  6 2014, 22:15:05) [MSC v.1600 32 bit (Intel)] on win32 Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.  wasn&#39;t expecting the 32 bits thing tbh..."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4694490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a65038377ee0f9ee7a307938139557?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Gooddeal", "link": "https://stackoverflow.com/users/4694490/mister-gooddeal"}, "edited": false, "score": 0, "creation_date": 1440628078, "post_id": 32237671, "comment_id": 52357720, "body": "I won&#39;t try right now to apply your advice but the test with SysWOW64 gives me the result you predicted,   I&#39;ll try to install python (64b) in a separate directory so my existing scripts (using weird dependencies) will continue to work.  Thanks !"}, {"owner": {"reputation": 55, "user_id": 4694490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a65038377ee0f9ee7a307938139557?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Gooddeal", "link": "https://stackoverflow.com/users/4694490/mister-gooddeal"}, "edited": false, "score": 0, "creation_date": 1440628536, "post_id": 32237671, "comment_id": 52357869, "body": "Tried it, didn&#39;t mess with my other scripts, worked like a charm !"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 55, "user_id": 4694490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a65038377ee0f9ee7a307938139557?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Gooddeal", "link": "https://stackoverflow.com/users/4694490/mister-gooddeal"}, "edited": false, "score": 0, "creation_date": 1440628766, "post_id": 32237671, "comment_id": 52357954, "body": "I just have another idea, you could delete the key &quot;manually&quot; from <i>Python</i> using the <a href=\"https://docs.python.org/2/library/_winreg.html\" rel=\"nofollow noreferrer\"><i>winreg</a> module (it comes as part of newer _Python</i> versions), you can try deleting it from both 64 and 32 bit locations, so you wouldn&#39;t care what kind of <i>Python</i> is running the script, but that&#39;s not doable in 2 lines of code :)."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1440634032, "post_id": 32237671, "comment_id": 52359421, "body": "FYI, the WOW64 system allows using &quot;SysNative&quot; to virtually refer to the real System32 directory. For example: <code>sysnative = os.path.join(os.environ[&#39;SystemRoot&#39;], &#39;SysNative&#39;);</code> <code>reg = os.path.join(sysnative, &#39;reg.exe&#39;);</code> <code>subprocess.call(&#39;&quot;%s&quot; query HKLM&#39; % reg)</code>."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1440666367, "post_id": 32237671, "comment_id": 52370972, "body": "Thank you, I wasn&#39;t aware of that!"}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 2, "last_activity_date": 1553622378, "last_edit_date": 1553622378, "creation_date": 1440627688, "answer_id": 32237671, "question_id": 32236009, "link": "https://stackoverflow.com/questions/32236009/python-subprocess-to-delete-reg-key-on-windows/32237671#32237671", "title": "Python Subprocess to delete reg key on Windows", "body": "<p>I thought so (the <strong><em>32bit</em></strong> part). You're running into a problem generated by <a href=\"https://docs.microsoft.com/en-gb/windows/desktop/WinProg64/shared-registry-keys\" rel=\"nofollow noreferrer\">[MS>Docs]: Registry Keys Affected by WOW64</a>.</p>\n\n<p>In other words (on <em>64bit</em> <em>Win</em>), for some registry keys (this one included), there are 2 separate locations:</p>\n\n<ul>\n<li>One for <em>64bit</em> (default (and old) one)</li>\n<li>One for <em>32bit</em> (brand new)</li>\n</ul>\n\n<p>By default a <em>64bit</em> app automatically uses the <em>64bit</em> registry location; same thing for *32bit8 (of course that can be programmatically modified - at least for <em>64bit</em> apps). </p>\n\n<p>So, in order for <em>32bit</em> apps that have some registry keys hardcoded, to still work on <em>64bit</em> <em>Win</em> (remember the key hardcoded in the <em>32bit</em> app is now <em>64bit</em>, and it's <em>invisible</em> to the app, while the <strong><em>real</em></strong> <em>32bit</em> is someplace else), <em>MS</em> came up with this approach. Same approach applies to paths on the filesystem (<strong><em>System32</em></strong> <em>vs</em> <strong><em>SysWOW64</em></strong> under <em>C:\\Windows</em>).</p>\n\n<p>Now why does it work from <em>cmdline</em>? Being a <em>64bit</em> <em>OS</em>, the default <em>cmd</em> is <em>64bit</em> (which launches the <em>64bit</em> <em>reg.exe</em>), so it finds the key. Yes, you have 2 <em>cmd</em>s (one under each of the above folders), actually (almost) all the <em>Win</em> executables (and <em>.dll</em>s) are \"duplicated\".</p>\n\n<p>To test, start <em>cmd.exe</em> from <em>C:\\Windows\\SysWOW64</em>, and run the <em>reg</em> command and it will fail.</p>\n\n<p>Finally, to get past this, associate <em>.py</em> files (I noticed that you ran it directly) with a <em>64bit</em> <em>Python</em> version (you might have to download and install it).</p>\n"}], "owner": {"reputation": 55, "user_id": 4694490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a65038377ee0f9ee7a307938139557?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Gooddeal", "link": "https://stackoverflow.com/users/4694490/mister-gooddeal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 1, "accepted_answer_id": 32237671, "answer_count": 1, "score": 2, "last_activity_date": 1553622378, "creation_date": 1440620463, "last_edit_date": 1440621792, "question_id": 32236009, "link": "https://stackoverflow.com/questions/32236009/python-subprocess-to-delete-reg-key-on-windows", "title": "Python Subprocess to delete reg key on Windows", "body": "<p>My code doesn't work as expected :</p>\n\n<pre><code>import subprocess\n\nkey = 'reg delete HKEY_USERS\\S-1-5-21-2637495828-1099793317-3825703309-1000\\SOFTWARE\\Classes\\CLSID\\{0E270DAA-1BE6-48F2-AC49-D955BE4EEF1D} /f'\nsubprocess.call(key, shell=True)\n</code></pre>\n\n<p>Running Windows 10 64b, tried with subprocess.Popen aswell.</p>\n\n<p>My first thought is I have to escape \\ somehow, but I'm not sure if that's what I need, nor how to do it.\nI also tried to make it work with a list of args <code>key = ['reg', 'delete', 'HKEY...'])</code>, which gave the same result</p>\n\n<p>Result from python script</p>\n\n<pre><code>C:\\test.py\nError : Couldn't find the key or registry value\n</code></pre>\n\n<p>Result from the command from the Windows prompt</p>\n\n<pre><code>C:\\reg delete HKEY_USERS\\S-1-5-21-2637495828-1099793317-3825703309-1000\\SOFTWARE\\Classes\\CLSID\\{0E270DAA-1BE6-48F2-AC49-D955BE4EEF1D} /f\nOperation Suceeded\n</code></pre>\n\n<p>N.B. I exported the key so I can add it again after every successful try.</p>\n\n<p>N.B. Windows return messages were translated, and may not be accurate.</p>\n"}, {"tags": ["python", "string", "format"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1440620713, "post_id": 32235955, "comment_id": 52354372, "body": "What you mean by string like <code>(&#39;A&#39;, &#39;B&#39;, &#39;C&#39;)</code> ? is it a tuple of string or you mean <code>&quot;(&#39;A&#39;, &#39;B&#39;, &#39;C&#39;)&quot;</code>?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440621999, "post_id": 32235955, "comment_id": 52355079, "body": "Do you just want to <code>print()</code> that?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440622025, "post_id": 32235955, "comment_id": 52355086, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/29761800/joining-elements-in-a-list-without-the-join-command\">Joining elements in a list without the join command</a>"}], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 2, "last_activity_date": 1440620413, "creation_date": 1440620413, "answer_id": 32235995, "question_id": 32235955, "link": "https://stackoverflow.com/questions/32235955/how-to-re-format-a-string-for-a-novice/32235995#32235995", "title": "How to re-format a string (for a novice)", "body": "<p>Use a list comprehension within <code>join</code> function :</p>\n\n<pre><code>&gt;&gt;&gt; s=\"('A', 'B', 'C')\"\n&gt;&gt;&gt; ''.join([i for i in s if i.isalpha()])\n'ABC'\n</code></pre>\n\n<p>Or use <code>ast.literal_eval</code> to convert your string to a tuple object then pass it to <code>join</code>:</p>\n\n<pre><code>&gt;&gt;&gt; from ast import literal_eval\n&gt;&gt;&gt; ''.join(literal_eval(s))\n'ABC'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "is_accepted": false, "score": 2, "last_activity_date": 1440620435, "creation_date": 1440620435, "answer_id": 32236000, "question_id": 32235955, "link": "https://stackoverflow.com/questions/32235955/how-to-re-format-a-string-for-a-novice/32236000#32236000", "title": "How to re-format a string (for a novice)", "body": "<p>If you have a list, or tuple, just do this:</p>\n\n<pre><code>concatenated_string = ''.join(list_of_values)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5270176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d54ae5cdd0e509003e0f5eeba309b1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Smith", "link": "https://stackoverflow.com/users/5270176/j-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440620435, "creation_date": 1440620280, "last_edit_date": 1495542581, "question_id": 32235955, "link": "https://stackoverflow.com/questions/32235955/how-to-re-format-a-string-for-a-novice", "title": "How to re-format a string (for a novice)", "body": "<p>A quick question from a Python novice... the short version is : How do I re-format a string like ('A', 'B', 'C') into ABC?</p>\n\n<p>Background: I'm writing a program that uses itertools.product to get all combinations of a set of letters <em>x</em> times. Eventually I want to search a much larger file to see how often each of those combinations occurs (<a href=\"https://stackoverflow.com/questions/533905/get-the-cartesian-product-of-a-series-of-lists-in-python\">similar to this post</a>). So I need to ensure that the results from itertools.product are simply concatenated together, without the formatting characters and spaces. Each approach I've tried has failed or caused errors I don't know how to resolve. It seems like there'd be an easy way to do this...</p>\n\n<p>Can anyone help me find a way to take strings like\n('A', 'B', 'C')\nand convert them to\nABC?</p>\n\n<p>Thanks in advance for any assistance.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 802, "user_id": 1508694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nTGB6.png?s=128&g=1", "display_name": "geo_so", "link": "https://stackoverflow.com/users/1508694/geo-so"}, "edited": false, "score": 0, "creation_date": 1440691452, "post_id": 32236121, "comment_id": 52388746, "body": "Doh... That was a easy one... Here the respective link to the documentation: <a href=\"http://pandas.pydata.org/pandas-docs/stable/reshaping.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reshaping.html</a>  Regarding the 12k columns: After a first step of sorting most of them can probably be discarded. Unfortunately befor this happened I have to keep them... or do the calculation the sorting is based on in a preliminary step in the database. Thanks!"}], "tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 1, "last_activity_date": 1440620879, "creation_date": 1440620879, "answer_id": 32236121, "question_id": 32235936, "link": "https://stackoverflow.com/questions/32235936/how-to-efficiently-columnize-pivoting-pandas-dataframe-with-groupby/32236121#32236121", "title": "How to efficiently columnize (=pivoting) pandas DataFrame (with groupby)?", "body": "<p>If I understand you right, you can do <code>df.pivot(index='date', columns='fk_id', values='field')</code>.</p>\n\n<blockquote>\n  <p>I think that it should be possible to solve everything \"small data\"-style.</p>\n</blockquote>\n\n<p>Good luck with that.  A DataFrame with 12000 columns is unlikely to perform well.</p>\n"}, {"tags": [], "owner": {"reputation": 3457, "user_id": 2708667, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da3688bbbf608ce43f998f63651088d6?s=128&d=identicon&r=PG&f=1", "display_name": "santon", "link": "https://stackoverflow.com/users/2708667/santon"}, "is_accepted": false, "score": 0, "last_activity_date": 1440647119, "creation_date": 1440647119, "answer_id": 32240342, "question_id": 32235936, "link": "https://stackoverflow.com/questions/32235936/how-to-efficiently-columnize-pivoting-pandas-dataframe-with-groupby/32240342#32240342", "title": "How to efficiently columnize (=pivoting) pandas DataFrame (with groupby)?", "body": "<p>If the combination of <code>fk_id</code> and <code>date</code> is always unique, you can do something like:</p>\n\n<pre><code>df = pd.DataFrame({'fk_id': [1, 2, 3],\n                   'date': pd.date_range('1/1/2015', periods=3),\n                   'field': [25, 25, 1]})\n\n\n#         date  field  fk_id\n# 0 2015-01-01     25      1\n# 1 2015-01-02     24      2\n# 2 2015-01-03      1      3\n\ndf.groupby(['date', 'fk_id']).agg(lambda x: x.unique()).unstack()\n\n\n#            field        \n# fk_id          1   2   3\n# date                    \n# 2015-01-01    25 NaN NaN\n# 2015-01-02   NaN  24 NaN\n# 2015-01-03   NaN NaN   1\n</code></pre>\n\n<p>If they're not always unique, you may need some more complicated strategy for aggregating values.</p>\n"}], "owner": {"reputation": 802, "user_id": 1508694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nTGB6.png?s=128&g=1", "display_name": "geo_so", "link": "https://stackoverflow.com/users/1508694/geo-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 32236121, "answer_count": 2, "score": 1, "last_activity_date": 1440691836, "creation_date": 1440620184, "last_edit_date": 1440691836, "question_id": 32235936, "link": "https://stackoverflow.com/questions/32235936/how-to-efficiently-columnize-pivoting-pandas-dataframe-with-groupby", "title": "How to efficiently columnize (=pivoting) pandas DataFrame (with groupby)?", "body": "<p>To give you the context of the question:</p>\n\n<p>I have decent SQL table (72M rows, 6GB) with data which could be understood as \"column-based\", e.g.:</p>\n\n<pre><code>------------------------------\n| fk_id | date       | field |\n------------------------------\n|     1 | 2001-01-02 |    24 |\n|     1 | 2001-01-03 |    25 |\n|     1 | 2001-01-04 |    21 |\n|     1 | 2001-01-05 |    20 |\n|     1 | 2001-01-06 |    30 |\n|     1 | 2001-01-07 |    33 |\n|            ....            |\n|     2 | 2001-01-02 |    10 |\n|     2 | 2001-01-03 |    15 |\n|     2 | 2001-01-04 |    12 |\n|     2 | 2001-01-05 |    11 |\n|     2 | 2001-01-06 |    10 |\n|     2 | 2001-01-07 |    12 |\n|            ....            |\n|            ....            |\n| 12455 | 2015-01-01 |    99 |\n| 12456 | 2005-10-10 |    10 |\n| 12456 | 2005-10-11 |    10 |\n|            ....            |\n------------------------------\n</code></pre>\n\n<p>The desired end result in Python as a <code>pandas.DataFrame</code> should look like this, where <code>date</code> becomes the index column the foreign keys the column names and the values of the column <code>field</code> the content of a matrix:</p>\n\n<pre><code>------------------------------------------------------\n| date       |     1 |     2 |  .... | 12455 | 12456 | \n------------------------------------------------------\n| 2001-01-02 |    24 |    10 |  .... |   NaN |   NaN |\n| 2001-01-03 |    25 |    15 |  .... |   NaN |   NaN |\n| 2001-01-04 |    21 |    12 |  .... |   NaN |   NaN |\n| 2001-01-05 |    20 |    11 |  .... |   NaN |   NaN |\n| 2001-01-06 |    30 |    10 |  .... |   NaN |   NaN |\n| 2001-01-07 |    33 |    12 |  .... |   NaN |   NaN |\n|       .... |    .. |    .. |  .... |  .... |  .... |\n| 2005-10-10 |    50 |     4 |  .... |   NaN |    10 |\n| 2005-10-11 |    51 |     3 |  .... |   NaN |    10 |\n|       .... |    .. |    .. |  .... |  .... |  .... |\n| 2015-01-01 |    40 |   NaN |  .... |    50 |    99 |\n------------------------------------------------------\n</code></pre>\n\n<p>Till now, I accomplish this with the following code:</p>\n\n<pre><code>def _split_by_fk(self, df):\n    \"\"\"\n    :param df: pandas.DataFrame\n    :param fields: Iterable\n    :return: pandas.Panel\n    \"\"\"\n    data = dict()\n    res = df.groupby('fk_id')\n    for r in res:\n        fk_id = r[0]\n        data[fk_id] = r[1]['field']\n    return pd.DataFrame(data)\n\ndef get_data(self, start, end):\n    s = select([daily_data.c.date, daily_data.c.fk_id, daily_data.c.field])\\\n        .where(and_(end &gt;= daily_data.c.date, daily_data.c.date &gt;= start))\\\n        .order_by(daily_data.c.fk_id, daily_data.c.date)\n    data = pd.read_sql(s, con=db_engine, index_col='date')\n    return self._split_by_fk(data)\n\n\n&gt;&gt;&gt; get_data('1960-01-01', '1989-12-31')\n</code></pre>\n\n<p>which does basically:</p>\n\n<ol>\n<li>Query SQL DB via sqlalchemy directly through <code>pandas.read_sql</code> function.</li>\n<li><code>groupby</code> the received <code>DataFrame</code></li>\n<li>Iterate over the group result object and put them in a dictionary</li>\n<li>Convert the <code>dict</code> into a <code>DataFrame</code>.</li>\n</ol>\n\n<p>To query 29 years of daily data with 13'813 columns takes with the above approach 4min 38s (the whole DataFrame takes up 796.5MB in memory), where <code>%lprun</code> shows that most of the time is spent in the <code>read_sql</code> function and the rest in the <code>_split_by_fk</code> (excerpt of the output):</p>\n\n<pre><code>% Time   Line Contents\n===============================================================\n83.8     data = pd.read_sql(s, con=db_engine, index_col='date')\n16.2     return self._split_by_fk(data)\n</code></pre>\n\n<hr>\n\n<p>My code feels not very elegant as I am collecting all groups in a dictionary to transform them again into a DataFrame.</p>\n\n<p>Now to my actual question: <strong>Is there a (more) efficient/pythonic way to \"columnize\" a <code>pandas.DataFrame</code> in the manner shown above?</strong></p>\n\n<hr>\n\n<p>PS: I would be not happy to pointers and hints into more general directions regarding the handling of such data structures and amount of data, tough, I think that it should be possible to solve everything \"small data\"-style.</p>\n"}, {"tags": ["python", "project"], "comments": [{"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440631719, "post_id": 32235903, "comment_id": 52358818, "body": "Files in the <code>bin&#47;</code> folder are not meant to be imported, they are meant to be installed as programs to be executed."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5081090"}, "edited": false, "score": 0, "creation_date": 1440623246, "post_id": 32236379, "comment_id": 52355684, "body": "I just added an init to the bin folder and unfortunately have the same result."}, {"owner": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "edited": false, "score": 0, "creation_date": 1440677633, "post_id": 32236379, "comment_id": 52378424, "body": "did you try with <code>py_modules : [&#39;bin.Birds&#39;]</code> and include the _<i>init_</i>.py"}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440952632, "post_id": 32236379, "comment_id": 52473945, "body": "The <code>bin&#47;</code> folder is for binaries/programs not for modules.  If <code>Birds</code> is a module intended to be imported by other modules <code>bin&#47;</code> simply isn&#39;t the right place for that file."}], "tags": [], "owner": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "is_accepted": false, "score": -1, "last_activity_date": 1440622592, "last_edit_date": 1440622592, "creation_date": 1440621864, "answer_id": 32236379, "question_id": 32235903, "link": "https://stackoverflow.com/questions/32235903/having-issues-with-python-project-structure/32236379#32236379", "title": "Having issues with python project structure", "body": "<p>Have you tried with an __init__.py file in the bin folder?</p>\n\n<p>Also, the documentation says this ...</p>\n\n<blockquote>\n  <p>Scripts are files containing Python source code, intended to be started from the command line</p>\n</blockquote>\n\n<p><a href=\"https://docs.python.org/2/distutils/setupscript.html\" rel=\"nofollow\">documentation</a></p>\n\n<p>So, maybe it's not intended to let you import them once they're install.</p>\n\n<p>Maybe what you want is ... <code>py_modules = ['bin.Birds']</code>  with an __init__.py file in bin/</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5081090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1440622592, "creation_date": 1440620062, "question_id": 32235903, "link": "https://stackoverflow.com/questions/32235903/having-issues-with-python-project-structure", "title": "Having issues with python project structure", "body": "<p>I'm currently on exercise 46 of learn python the hard way and I've been having serious issues getting my sample project structure to work the way it's described in the chapter. First off, my structure looks like this.</p>\n\n<pre><code> Kilos/\n      Kilos/\n          __init__.py\n      bin/\n          Birds.py\n      docs/\n      setup.py\n      tests/\n          __init__.py\n          Kilos_tests.py\n</code></pre>\n\n<p>Secondly, my setup.py script looks like this.</p>\n\n<pre><code>try:\n    from setuptools import setup\nexcept ImportError:\n    from distutils.core import setup\n\nconfig = {\n    'description': 'Kilos',\n    'author': 'My Name',\n    'url': 'URL to get it at.',\n    'download_url': 'Where to download it.',\n    'author_email': 'My email.',\n    'version': '0.1',\n    'install_requires': ['nose'],\n    'packages': ['Kilos'],\n    'scripts': ['bin/Birds.py'],\n    'name': 'Kilos'\n}\n\nsetup(**config)\n</code></pre>\n\n<p>So here's my issue. Unless I move Birds.py from /bin to the root Kilos folder that contains 'setup.py' and change the the location of it in my setup I can't import it at all after installing my module. I want to be able to access Birds.py while it's in the bin folder. I know I'm most definitely overlooking something really simple here but it's driving me crazy. If anyone can tell me where I went wrong with this it would be GREATLY appreciated. Thank you in advance!</p>\n"}, {"tags": ["python", "tkinter", "homebrew", "errno", "activetcl"], "comments": [{"owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "edited": false, "score": 0, "creation_date": 1440620552, "post_id": 32235845, "comment_id": 52354274, "body": "Do you supply that entire path? What do you get when you make it print <code>os.getcwd()</code>?"}, {"owner": {"reputation": 844, "user_id": 3775886, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecb138e174777b05aed08d32e51b9a31?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Qiu", "link": "https://stackoverflow.com/users/3775886/peter-qiu"}, "reply_to_user": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "edited": false, "score": 0, "creation_date": 1440624039, "post_id": 32235845, "comment_id": 52356057, "body": "No, that path is created as part of the error message. My cwd is &quot;/Users/john/Desktop/code&quot;"}, {"owner": {"reputation": 5518, "user_id": 892260, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4b21f13b2388dab1c90910e64b84e7a9?s=128&d=identicon&r=PG", "display_name": "Tim Smith", "link": "https://stackoverflow.com/users/892260/tim-smith"}, "edited": false, "score": 0, "creation_date": 1440641016, "post_id": 32235845, "comment_id": 52360916, "body": "Does your working directory contain a file named gui.py? How are you invoking Python?"}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440672535, "post_id": 32235845, "comment_id": 52375095, "body": "How do you start that gui app and what is the complete error message?"}], "owner": {"reputation": 844, "user_id": 3775886, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecb138e174777b05aed08d32e51b9a31?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Qiu", "link": "https://stackoverflow.com/users/3775886/peter-qiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440619880, "creation_date": 1440619880, "question_id": 32235845, "link": "https://stackoverflow.com/questions/32235845/errno2-no-such-file-or-directory-when-using-tkinter", "title": "Errno2: No such file or directory when using tkinter", "body": "<p>I downloaded ActiveTcl 8.5.18.0 for Mac (I'm running Yosemite 10.10.5) and checked that tkinter was there through terminal with <code>python3 -m tkinter</code>. I currently have 3 versions of python: 2.7.6 which came with my macbook, 2.7.10 and 3.4.3 which I installed with homebrew. </p>\n\n<p>However, I keep on encountering this error when attempting to run a simple gui app:</p>\n\n<blockquote>\n  <p>/usr/local/Cellar/python3/3.4.3_2/Frameworks/Python.framework/Versions/3.4/Resources/Python.app/Contents/MacOS/Python: can't open file 'gui.py': [Errno 2] No such file or directory</p>\n</blockquote>\n\n<p>I am fairly new to Python, and any help would be greatly appreciated! Thank you.</p>\n"}, {"tags": ["python", "pdb"], "answers": [{"comments": [{"owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "edited": false, "score": 0, "creation_date": 1440619817, "post_id": 32235790, "comment_id": 52353915, "body": "Right. My guess is that <code>werkzeug</code> is working to get my request arguments. But if I type <code>n</code>, I avoid  <code>GeneSignature.from_geo(request.form)</code> entirely, going to the next line. Maybe accessing <code>request.form</code> is what calls <code>__getattr__</code>."}, {"owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "edited": false, "score": 0, "creation_date": 1440620103, "post_id": 32235790, "comment_id": 52354058, "body": "No, my theory is correct. If I write <code>args = request.form; gene_signature = GeneSignature.from_geo(args)</code> then I can step over the <code>werkzeug</code> code and then when I type <code>s</code> for <code>from_geo</code>, I immediately step into that function."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "reply_to_user": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "edited": false, "score": 0, "creation_date": 1440620519, "post_id": 32235790, "comment_id": 52354252, "body": "Maybe I&#39;m imagining this wrong (apologies if this is just a misunderstanding), but I&#39;m saying it sounds to me like your <code>set_trace()</code> should be the first statement in <code>from_geo</code> and that at this point it is somewhere just before it. Is this not right?"}, {"owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "edited": false, "score": 0, "creation_date": 1440620960, "post_id": 32235790, "comment_id": 52354530, "body": "Well, you&#39;re right moving the breakpoint would avoid the problem, but often I want to put my breakpoint near the top of the stack and monitor the program as I step through it. Sometimes I want to step into <code>from_geo</code>; sometimes I don&#39;t. I&#39;ve encountered this <code>__getattr__</code> function every time I stepped into <code>from_geo</code> and I&#39;m wasn&#39;t sure why it was being called. It doesn&#39;t get called when I dereference a value on a <code>dict</code>, for example. But now I think I know why (thanks to rubber ducking with you): it gets called because the <code>werkzeug</code> module is overriding the built-in."}], "tags": [], "owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "is_accepted": true, "score": 1, "last_activity_date": 1440619837, "last_edit_date": 1440619837, "creation_date": 1440619712, "answer_id": 32235790, "question_id": 32235746, "link": "https://stackoverflow.com/questions/32235746/when-debugging-in-python-what-is-getattr-and-how-can-i-avoid-it/32235790#32235790", "title": "When debugging in Python, what is &quot;__getattr__&quot; and how can I avoid it?", "body": "<p>Two things:</p>\n\n<ol>\n<li><p><a href=\"https://docs.python.org/2/reference/datamodel.html#object.__getattr__\" rel=\"nofollow\"><code>__getattr__</code></a> is the built-in, overrideable method for accessing attributes on objects.</p></li>\n<li><p>You can avoid stepping into \"intermediate code\" in the debugger using <code>n</code> rather than <code>s</code> (You do this after the first time but not the first time, so it \"steps\" into this call.)</p></li>\n</ol>\n\n<p>Edited to add: It sounds like you are torn between <code>n</code> and <code>s</code> at this point because your break point is in the wrong place. Move it to start inside the function so you aren't stuck either stepping over it or too far into it.</p>\n"}], "owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 32235790, "answer_count": 1, "score": 0, "last_activity_date": 1440619837, "creation_date": 1440619554, "question_id": 32235746, "link": "https://stackoverflow.com/questions/32235746/when-debugging-in-python-what-is-getattr-and-how-can-i-avoid-it", "title": "When debugging in Python, what is &quot;__getattr__&quot; and how can I avoid it?", "body": "<p>Let's say I want to step into my function:</p>\n\n<pre><code>-&gt; gene_signature = GeneSignature.from_geo(request.form)\n(Pdb) s\n</code></pre>\n\n<p>What I always get next is:</p>\n\n<pre><code>--Call--\n&gt; ../venv/lib/python2.7/site-packages/werkzeug/local.py(335)__getattr__()\n-&gt; def __getattr__(self, name):\n(Pdb) n\n&gt; ../venv/lib/python2.7/site-packages/werkzeug/local.py(336)__getattr__()\n-&gt; if name == '__members__':\n(Pdb) n\n&gt; ../venv/lib/python2.7/site-packages/werkzeug/local.py(338)__getattr__()\n-&gt; return getattr(self._get_current_object(), name)\n(Pdb) n\n--Return--\n&gt; ../venv/lib/python2.7/site-packages/werkzeug/local.py(338)__getattr__()-&gt;Immutabl...iDict([])\n-&gt; return getattr(self._get_current_object(), name)\n(Pdb) n\n</code></pre>\n\n<p>Only after these steps do I get:</p>\n\n<pre><code>--Call--\n&gt; ../model/genesignature.py(72)from_geo()\n-&gt; @classmethod\n</code></pre>\n\n<p>What's happening? Can I avoid stepping through this intermediate code?</p>\n"}, {"tags": ["python", "matplotlib", "graphics", "plot"], "comments": [{"owner": {"reputation": 10567, "user_id": 4680533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tee8v.jpg?s=128&g=1", "display_name": "Ed Smith", "link": "https://stackoverflow.com/users/4680533/ed-smith"}, "edited": false, "score": 0, "creation_date": 1440621321, "post_id": 32235714, "comment_id": 52354714, "body": "I&#39;m a little confused as to exactly what you want but it sounds like <code>griddata</code> may help with what you need <a href=\"http://docs.scipy.org/doc/scipy-0.13.0/reference/generated/scipy.interpolate.griddata.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy-0.13.0/reference/generated/&hellip;</a>. Another alternative is to use a scatter plot with points coloured by Z value..."}, {"owner": {"reputation": 1662, "user_id": 304393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ee4ba524ad1000608c2023e666128c?s=128&d=identicon&r=PG", "display_name": "Brian Larsen", "link": "https://stackoverflow.com/users/304393/brian-larsen"}, "reply_to_user": {"reputation": 10567, "user_id": 4680533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tee8v.jpg?s=128&g=1", "display_name": "Ed Smith", "link": "https://stackoverflow.com/users/4680533/ed-smith"}, "edited": false, "score": 0, "creation_date": 1440621719, "post_id": 32235714, "comment_id": 52354927, "body": "Can you explain more on what has you confused and I will try a rewrite. The data as created is already like the output of greddata. The scatter plot isn&#39;t a great option as the data really do form little boxes of known size and scatters make that hard to replicate."}, {"owner": {"reputation": 10567, "user_id": 4680533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tee8v.jpg?s=128&g=1", "display_name": "Ed Smith", "link": "https://stackoverflow.com/users/4680533/ed-smith"}, "edited": false, "score": 0, "creation_date": 1440627798, "post_id": 32235714, "comment_id": 52357623, "body": "If the x direction is time, what is the &quot;time dependent bins in the Y direction&quot;? If the issue is speed of plotting and you have uniform gridded data then <code>imshow</code> is usually the fastest way to go (with extents specified from the limits of your data)."}, {"owner": {"reputation": 1662, "user_id": 304393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ee4ba524ad1000608c2023e666128c?s=128&d=identicon&r=PG", "display_name": "Brian Larsen", "link": "https://stackoverflow.com/users/304393/brian-larsen"}, "reply_to_user": {"reputation": 10567, "user_id": 4680533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tee8v.jpg?s=128&g=1", "display_name": "Ed Smith", "link": "https://stackoverflow.com/users/4680533/ed-smith"}, "edited": false, "score": 0, "creation_date": 1440685945, "post_id": 32235714, "comment_id": 52384872, "body": "Y is time dependent energy measurement bins as the instrument changes mode. How would one use imshow as you can&#39;t tell it 1d 2d 2d extents either?"}], "owner": {"reputation": 1662, "user_id": 304393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ee4ba524ad1000608c2023e666128c?s=128&d=identicon&r=PG", "display_name": "Brian Larsen", "link": "https://stackoverflow.com/users/304393/brian-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440697226, "creation_date": 1440619446, "question_id": 32235714, "link": "https://stackoverflow.com/questions/32235714/matplotlib-pcolor-with-varying-y-bins", "title": "Matplotlib pcolor with varying Y bins", "body": "<p>All, </p>\n\n<p>I am trying to find a way to reproduce this plot in matplotlib. Let me explain what is going on and provide some sample data. This is created from a 1D X array containing times. There is a 2D Y array containing the time dependent bins in the Y direction. There is a 2D Z array containing the value that is then plotted in color. The challenge here is that <a href=\"http://matplotlib.org/api/axes_api.html?highlight=pcolor#matplotlib.axes.Axes.pcolor\" rel=\"nofollow noreferrer\">pcolor()</a> and <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.pcolormesh\" rel=\"nofollow noreferrer\">pcolormesh()</a> both take 1D, 1D, 2D   </p>\n\n<p><a href=\"https://i.stack.imgur.com/S7Xsn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S7Xsn.png\" alt=\"Plot to replicate\"></a></p>\n\n<p>Lets create some sample data:</p>\n\n<pre><code>import numpy as np\nX = np.linspace(0, 100, 200)\nY = np.tile(np.logspace(0, 4, 15), len(X)).reshape(len(X), -1)\nY[::4, :] += 50\nZ = np.logspace(0, 7, (np.product(Y.shape))).reshape(Y.shape)\nprint(X.shape, Y.shape, Z.shape)\n# (200,) (200, 15) (200, 15)\n</code></pre>\n\n<p>It seems like <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html\" rel=\"nofollow noreferrer\">np.meshgrid()</a> could play a role here but I am not having luck there and it gets really slow. Another option is to make all the corners of the boxes and like <a href=\"http://matplotlib.org/api/axes_api.html?highlight=pcolor#matplotlib.axes.Axes.pcolor\" rel=\"nofollow noreferrer\">pcolor()</a> use <a href=\"http://matplotlib.org/api/collections_api.html#matplotlib.collections.PolyCollection\" rel=\"nofollow noreferrer\">matplotlib.collections.PolyCollection()</a> but I seem to have a mental block against getting this right. </p>\n\n<p>Anyone have other thoughts or code samples?</p>\n"}, {"tags": ["python", "numerical-integration", "taylor-series"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1440620954, "post_id": 32235707, "comment_id": 52354521, "body": "Note that &quot;r&quot; used in the function definition is never used.  Also there will be an error on both of the &quot;print taylor_two(x, 12)&quot; lines because x has not been declared.  To return from the function before all n tries, you have to submit a lower (and maybe upper) number(s) to compare the calculated numbers to if .6418538 &lt; taySum*2 &lt; .6418539: for example."}, {"owner": {"reputation": 73, "user_id": 5270096, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65d3538550d056d21783d8c1afc91932?s=128&d=identicon&r=PG", "display_name": "BigD4J", "link": "https://stackoverflow.com/users/5270096/bigd4j"}, "edited": false, "score": 0, "creation_date": 1440681574, "post_id": 32235707, "comment_id": 52381454, "body": "Hi Joe, thanks for your comment. I see now that there&#39;s a problem with x not being declared. Could you give a coded example of what you mean about lower and upper numbers? I&#39;m not sure what you mean here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4171906"}, "edited": false, "score": 0, "creation_date": 1440693389, "post_id": 32235707, "comment_id": 52389963, "body": "I put an if statement in the previous post.  Floating point numbers may not be 100% accurate so you have to define &quot;equals&quot; as a lower and upper number, and anything in between is &quot;equal&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5270096, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65d3538550d056d21783d8c1afc91932?s=128&d=identicon&r=PG", "display_name": "BigD4J", "link": "https://stackoverflow.com/users/5270096/bigd4j"}, "edited": false, "score": 0, "creation_date": 1440680907, "post_id": 32236091, "comment_id": 52380945, "body": "Thanks for your reply, Roland. I&#39;m actually using 2*sum k=1 to infinity for (x^(2k - 1))/(2k - 1) to approximate. I&#39;ve tried your code, and it&#39;s not quite what I&#39;m looking to do. Maybe I phrased the questions wrong. I need the system to work up to the value required &amp; stop once it&#39;s within 10 digits accuracy, then have it give me that value. The code you gave requires me to input values myself. Does that make sense?"}, {"owner": {"reputation": 73, "user_id": 5270096, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65d3538550d056d21783d8c1afc91932?s=128&d=identicon&r=PG", "display_name": "BigD4J", "link": "https://stackoverflow.com/users/5270096/bigd4j"}, "edited": false, "score": 0, "creation_date": 1440681404, "post_id": 32236091, "comment_id": 52381320, "body": "I assume a need some sort of while loop that iterates until the difference between ln(1.9) and the resulting value is very small. I&#39;m just not sure how do build this."}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "reply_to_user": {"reputation": 73, "user_id": 5270096, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65d3538550d056d21783d8c1afc91932?s=128&d=identicon&r=PG", "display_name": "BigD4J", "link": "https://stackoverflow.com/users/5270096/bigd4j"}, "edited": false, "score": 0, "creation_date": 1440700752, "post_id": 32236091, "comment_id": 52394184, "body": "@BigD4J See updated answer. The algorithm runs until the addition from the next step is &lt;1e-10. If you want to see how it works, uncomment the <code>print()</code> in the loop."}], "tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": false, "score": 4, "last_activity_date": 1440700690, "last_edit_date": 1440700690, "creation_date": 1440620779, "answer_id": 32236091, "question_id": 32235707, "link": "https://stackoverflow.com/questions/32235707/python-approximating-lnx-using-taylor-series/32236091#32236091", "title": "Python: Approximating ln(x) using Taylor Series", "body": "<p>The principle is;</p>\n\n<ul>\n<li>Look at how much each iteration adds to the result.</li>\n<li>Stop when the difference is smaller than 1e-10.</li>\n</ul>\n\n<p>You're using the following formula, right;</p>\n\n<p><a href=\"https://upload.wikimedia.org/math/5/4/e/54ed0cacb65c1570301eb072934a6b71.png\" rel=\"nofollow\"><img src=\"https://upload.wikimedia.org/math/5/4/e/54ed0cacb65c1570301eb072934a6b71.png\" alt=\"ln formula\"></a></p>\n\n<p>(Note the validity range!)</p>\n\n<pre><code>def taylor_two():\n    x = 1.9 - 1\n    i = 1\n    taySum = 0\n    while True:\n        addition = pow(-1,i+1)*pow(x,i)/i\n        if abs(addition) &lt; 1e-10:\n            break\n        taySum += addition\n        # print('value: {}, addition: {}'.format(taySum, addition))\n        i += 1\n    return taySum\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>In [2]: print(taylor_two())\n0.6418538862240631\n\nIn [3]: print('{:.10f}'.format(taylor_two()))\n0.6418538862\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5270096, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65d3538550d056d21783d8c1afc91932?s=128&d=identicon&r=PG", "display_name": "BigD4J", "link": "https://stackoverflow.com/users/5270096/bigd4j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3404, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1440708480, "creation_date": 1440619440, "last_edit_date": 1440708480, "question_id": 32235707, "link": "https://stackoverflow.com/questions/32235707/python-approximating-lnx-using-taylor-series", "title": "Python: Approximating ln(x) using Taylor Series", "body": "<p>I'm trying to build an approximation for ln(1.9) within ten digits of accuracy (so .641853861). </p>\n\n<p>I'm using a simple function I've built from ln[(1 + x)/(1 - x)]</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code># function for ln[(1 + x)/(1 - x)]\n\ndef taylor_two(r, n):\n    x = 0.9 / 2.9\n    i = 1\n    taySum = 0\n    while i &lt;= n:\n        taySum += (pow(x,i))/(i)\n        i += 2\n    return 2 * taySum\n\nprint taylor_two(x, 12)\n\nprint taylor_two(x, 17)\n</code></pre>\n\n<p>What I need to do now is reformat this so that it tells me the number of terms needed to approximate ln(1.9) to the above 10 digits, have it display the value that series gives, and also show the error.</p>\n\n<p>I assume I need to build my function into a for loop somehow, but how can I get it to stop iterating once it's reached the 10 digits needed?</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["python", "python-3.x", "python-requests"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user559633"}, "reply_to_user": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "edited": false, "score": 0, "creation_date": 1440620828, "post_id": 32235821, "comment_id": 52354442, "body": "@KoKlA Then it seems as if you got a request that wasn&#39;t touched by the remote server&#39;s cache.  Keep in mind that you cannot control the remote server, but you can make you <code>requests.get</code> ask as if it was a browser (as per my answer)."}, {"owner": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "edited": false, "score": 1, "creation_date": 1440621248, "post_id": 32235821, "comment_id": 52354690, "body": "I did check before. See this link <a href=\"http://postimg.org/image/do84les6n/\" rel=\"nofollow noreferrer\">Chrome</a> and it doesn&#39;t contain this line. Anyway this wasn&#39;t how i recognized that it&#39;s a cached website.  I simply get a share price from a few days ago not from today. Take a look at this comparison <a href=\"http://s21.postimg.org/fbs9733w7/Request2.png\" rel=\"nofollow noreferrer\">Via Requests</a> <a href=\"http://s12.postimg.org/4hi986rwt/Request3.png\" rel=\"nofollow noreferrer\">Via Chrome</a> I also tried the headers you supplied but it didn&#39;t work. But good idea"}, {"owner": {"user_type": "does_not_exist", "display_name": "user559633"}, "reply_to_user": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "edited": false, "score": 0, "creation_date": 1440621448, "post_id": 32235821, "comment_id": 52354785, "body": "@KoKlA if the two are different and that site is giving you different responses based on <code>requests</code> v. Chrome, see my above answer for steps on how to make <code>requests</code> appear to be the Chrome browser."}, {"owner": {"user_type": "does_not_exist", "display_name": "user559633"}, "reply_to_user": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "edited": false, "score": 0, "creation_date": 1440621958, "post_id": 32235821, "comment_id": 52355061, "body": "@KoKlA I would suggest getting the headers you&#39;re sending from Chrome and replicating those entries in the headers you set in requests [in response to your edit]."}, {"owner": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "edited": false, "score": 1, "creation_date": 1440624872, "post_id": 32235821, "comment_id": 52356419, "body": "Ok i added all headers from Chrome it still doesn&#39;t work. This is how the two requests look (intercepted them with burp) <a href=\"http://s16.postimg.org/ioqaostbo/Requests.jpg\" rel=\"nofollow noreferrer\">Comparison Requests vs Chrome</a> . Apart from the order of the headers they are the same.I even added the Cookie .I personally don&#39;t think that it&#39;s related to the headers but that they(the website) uses a different mechanism to determine if it&#39;s a real user or not. But that&#39;s just a guess"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user559633"}, "is_accepted": false, "score": 1, "last_activity_date": 1440620272, "last_edit_date": 1495542651, "creation_date": 1440619798, "answer_id": 32235821, "question_id": 32235706, "link": "https://stackoverflow.com/questions/32235706/python-requests-module-caching-websites/32235821#32235821", "title": "Python requests module caching websites?", "body": "<p>When troubleshooting what you think may be script-related behavior in requesting webpages, check in a browser before assuming that something like the user-agent or headers leads to a different response from the remote web server.</p>\n\n<p>The URL that you've specified returns that 'CacheEngine' line for me in Chrome, Safari, and Firefox.</p>\n\n<p>When you come across a page that does actually respond with different content for requests, I'd suggest first looking into setting your <a href=\"https://stackoverflow.com/questions/10606133/sending-user-agent-using-requests-library-in-python\">User-Agent field</a>.  While you can request that the remote and not cache content by specifying:</p>\n\n<p><code>{'cache-control': ' private, max-age=0, no-cache'}</code></p>\n\n<p>in the headers, keep in mind that this is only a <em>request</em> to the remote webserver not to serve you cached content.</p>\n\n<p>For a total request while pretending to be a browser asking for non-cache content, this would look like this:</p>\n\n<pre><code>url='http://finanzen.net/aktien/Tesla-Aktie'\nheaders = {\n    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.155 Safari/537.36',\n    'cache-control': 'private, max-age=0, no-cache'\n}\nresponse = requests.get(url, headers=headers)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "is_accepted": true, "score": 1, "last_activity_date": 1497209339, "creation_date": 1497209339, "answer_id": 44487884, "question_id": 32235706, "link": "https://stackoverflow.com/questions/32235706/python-requests-module-caching-websites/44487884#44487884", "title": "Python requests module caching websites?", "body": "<p>Nearly two years later, going through my stackoverlow questions, i found the issue.</p>\n\n<p>I didn't see it at the time but if you open <a href=\"http://s16.postimg.org/ioqaostbo/Requests.jpg\" rel=\"nofollow noreferrer\">Comparison Requests vs Chrome</a> which I previously posted as a comment to user559633 you can see that these two are actually different domains. With chrome I was accessing <em>finanzen.at</em> and with requests <em>finanzen.net</em></p>\n\n<p>So long story short: It was a mistake on my site and not requests caching the website or the webserver altering the reponse based on user detection.</p>\n"}], "owner": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3498, "favorite_count": 1, "accepted_answer_id": 44487884, "answer_count": 2, "score": 0, "last_activity_date": 1497209339, "creation_date": 1440619437, "question_id": 32235706, "link": "https://stackoverflow.com/questions/32235706/python-requests-module-caching-websites", "title": "Python requests module caching websites?", "body": "<p>When i request a website with the python module requests, i don't get a webpage which is up to date but a cached website.</p>\n\n<p>As far as i know there should be no caching with requests or am I wrong ?</p>\n\n<pre><code>finanzennet_request = requests.get('http://finanzen.net/aktien/Tesla-Aktie')\nprint(finanzennet_request)\n</code></pre>\n\n<p>Yields the following result</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;\n&lt;!-- CacheEngine generated: 87039 chars in 0,0313 seconds on 26.08.2015 21:39:07 from NT --&gt;\n</code></pre>\n\n\n\n<p>As you can see it says \"CacheEngine generated....\" .\nCan it really be that the webserver recognizes that my script is not a real user and therefore only gives me a cached version ? \nIf so how can i avoid it ?</p>\n"}, {"tags": ["python", "flask", "jinja2"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 11, "last_activity_date": 1532617526, "last_edit_date": 1532617526, "creation_date": 1440620096, "answer_id": 32235913, "question_id": 32235698, "link": "https://stackoverflow.com/questions/32235698/create-dynamic-arguments-for-url-for-in-flask/32235913#32235913", "title": "Create dynamic arguments for url_for in Flask", "body": "<p>Any arguments that don't match route parameters will be added as the query string.  Assuming <code>extra_args</code> is a dict, just unpack it.</p>\n\n<pre><code>extra_args = {'hello': 'world'}\nurl_for('doit', oid=oid, **extra_args)\n# /doit/123?hello=world\nurl_for('doit', oid=oid, hello='davidism')\n# /doit/123?hello=davidism\n</code></pre>\n\n<p>Then access them in the view with <code>request.args</code>:</p>\n\n<pre><code>@app.route('/doit/&lt;int:oid&gt;')\ndef doit(oid)\n    hello = request.args.get('hello')\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6465, "user_id": 1182891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64170963e481496b89074f68786f4aeb?s=128&d=identicon&r=PG", "display_name": "Josh J", "link": "https://stackoverflow.com/users/1182891/josh-j"}, "is_accepted": false, "score": -1, "last_activity_date": 1440620485, "creation_date": 1440620485, "answer_id": 32236014, "question_id": 32235698, "link": "https://stackoverflow.com/questions/32235698/create-dynamic-arguments-for-url-for-in-flask/32236014#32236014", "title": "Create dynamic arguments for url_for in Flask", "body": "<p>Using your example, this wound generate the URLs like you requested if you know your arguments in advance.</p>\n\n<pre><code>&lt;a href=\" {{ url_for('doit', oid=oid, name='bob', age=45 }} \"&gt;A specific query&lt;/a&gt;\n\n&lt;a href=\" {{ url_for('other', oid=oid) }} \"&gt;A generic query&lt;/a&gt;\n</code></pre>\n\n<p>@davidism's answer would be preferred if your set of arguments isn't known until runtime and are stored in a dictionary.</p>\n"}], "owner": {"reputation": 1733, "user_id": 4775902, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f84c51c41e176a4a86ccbe2fb05a59ea?s=128&d=identicon&r=PG&f=1", "display_name": "rublex", "link": "https://stackoverflow.com/users/4775902/rublex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9603, "favorite_count": 2, "accepted_answer_id": 32235913, "answer_count": 2, "score": 10, "last_activity_date": 1532617526, "creation_date": 1440619415, "last_edit_date": 1470074004, "question_id": 32235698, "link": "https://stackoverflow.com/questions/32235698/create-dynamic-arguments-for-url-for-in-flask", "title": "Create dynamic arguments for url_for in Flask", "body": "<p>I have a jinja2 template which I reuse for different Flask routes. All of these routes have a single required parameter and handle only <code>GET</code> requests, but some routes may have extra arguments.</p>\n\n<p>Is there a way to append extra arguments onto <code>url_for()</code>?</p>\n\n<hr>\n\n<p>Something like</p>\n\n<pre><code>url_for(my_custom_url, oid=oid, args=extra_args)\n</code></pre>\n\n<p>which will render to (depending on the route endpoint):</p>\n\n<pre><code># route 'doit/&lt;oid&gt;' with arguments\ndoit/123?name=bob&amp;age=45\n\n# route 'other/&lt;oid&gt;' without arguments\nother/123\n</code></pre>\n\n<p>My use case would be to provide links with predefined query arguments:</p>\n\n<pre><code>&lt;a href=\" {{ url_for('doit', oid=oid, args=extra_args }} \"&gt;A specific query&lt;/a&gt;\n&lt;a href=\" {{ url_for('other', oid=oid) }} \"&gt;A generic query&lt;/a&gt;\n</code></pre>\n\n<p>I would like to run this template without JavaScript, so I would not like to assign a click listener and use AJAX to do a <code>GET</code> request for each link if that is possible.</p>\n"}, {"tags": ["python", "pandas", "unicode", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 0, "creation_date": 1440619588, "post_id": 32235696, "comment_id": 52353811, "body": "Can you provide a reproducible example? (some example data and the code that reproduces the error)"}, {"owner": {"reputation": 1418, "user_id": 387191, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/31bb6d57fba392e9b4e757dcde624ba4?s=128&d=identicon&r=PG", "display_name": "lathomas64", "link": "https://stackoverflow.com/users/387191/lathomas64"}, "reply_to_user": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 0, "creation_date": 1440621856, "post_id": 32235696, "comment_id": 52355008, "body": "The error occurs with just the headers which I&#39;ve put in a pastebin above. the columns have some lengthy names due to some pivots that are done to the source table"}, {"owner": {"reputation": 1418, "user_id": 387191, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/31bb6d57fba392e9b4e757dcde624ba4?s=128&d=identicon&r=PG", "display_name": "lathomas64", "link": "https://stackoverflow.com/users/387191/lathomas64"}, "reply_to_user": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 0, "creation_date": 1440623479, "post_id": 32235696, "comment_id": 52355788, "body": "There are some special characters &#195;&#179; from some spanish data source names that end up here when attempting to create a pivot table. I would like to be able to handle this in the to_sql call as opposed to having to strip the characters from the headers."}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440673152, "post_id": 32235696, "comment_id": 52375470, "body": "The headers are used as column names for the database. Even when a database software allows special characters in column names I&#39;d be careful to just use a subset of ASCII which would be safe for unquoted identifiers. Looking at the headers this shouldn&#39;t go into <i>one</i> database table anyway, at least if you follow the usual normalisation guidelines. The headers are containing <i>data</i>."}], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 4779263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kBo4G.png?s=128&g=1", "display_name": "alybel", "link": "https://stackoverflow.com/users/4779263/alybel"}, "is_accepted": false, "score": 14, "last_activity_date": 1441878637, "last_edit_date": 1441878637, "creation_date": 1441877959, "answer_id": 32498279, "question_id": 32235696, "link": "https://stackoverflow.com/questions/32235696/pandas-to-sql-gives-unicode-decode-error/32498279#32498279", "title": "pandas to_sql gives unicode decode error", "body": "<p>I experienced the exact same issue with the combination pymysql and pandas.to_sql</p>\n\n<p><strong>Update</strong>, here is what worked for me: </p>\n\n<p>Instead of passing the charset as an argument, try attaching it directly to the connection string:</p>\n\n<p><code>connect_string = 'mysql+pymysql://{}:{}@{}:{}/{}?charset=utf8'.format(DB_USER, DB_PASS, DB_HOST, DB_PORT, DATABASE)</code></p>\n\n<p>The problem seems to happen in pymysql and the cause for the error seemingly is that the encoding you define is not properly forwarded and set when the pymsql connection is set. </p>\n\n<p>For the sake of debugging, I harcoded </p>\n\n<p><code>encoding = 'utf-8</code></p>\n\n<p>in the pymysql <code>_do_execute_many</code>function and that explained it to me.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6700599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tsP6rgv3iNI/AAAAAAAAAAI/AAAAAAAAABU/utMz-MJNQ18/photo.jpg?sz=128", "display_name": "David Incio", "link": "https://stackoverflow.com/users/6700599/david-incio"}, "is_accepted": false, "score": 2, "last_activity_date": 1500020439, "last_edit_date": 1500020439, "creation_date": 1499967676, "answer_id": 45087615, "question_id": 32235696, "link": "https://stackoverflow.com/questions/32235696/pandas-to-sql-gives-unicode-decode-error/45087615#45087615", "title": "pandas to_sql gives unicode decode error", "body": "<p>I have solved the issue changing the character set in MySQL database (UTF-8) and adding this to the pymysql connection: <code>charset='utf8'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 13089205, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/933835bd56b4935c787940ee698d55f6?s=128&d=identicon&r=PG", "display_name": "user13089205", "link": "https://stackoverflow.com/users/13089205/user13089205"}, "is_accepted": false, "score": 2, "last_activity_date": 1584627904, "creation_date": 1584627904, "answer_id": 60759141, "question_id": 32235696, "link": "https://stackoverflow.com/questions/32235696/pandas-to-sql-gives-unicode-decode-error/60759141#60759141", "title": "pandas to_sql gives unicode decode error", "body": "<p>I experienced a similar problem on python 3.7.:\nUnicodeEncodeError: 'charmap' codec can't encode character '\\ufffd' in position 0: character maps to </p>\n\n<p>It was the way I defined my engine. I had charset defined to utf-8 in my engine, yet it did not pick it up:</p>\n\n<pre><code># Connecting to the database(reference for checkout_listener not added)\ndef MysqlConnection(DbName):\n    DB_TYPE = 'mysql'\n    DB_DRIVER = 'mysqldb'\n    DB_NAME = DbName\n    POOL_SIZE = 100\n    CHARSET = 'utf-8'\n\n    SQLALCHEMY_DATABASE_URI = '%s+%s://%s:%s@%s:%s/%s?%s' % (DB_TYPE, DB_DRIVER, DB_USER,\n                                                             DB_PASS, DB_HOST, DB_PORT, DB_NAME, CHARSET)\n    ENGINE1 = create_engine(\n        SQLALCHEMY_DATABASE_URI, pool_size=POOL_SIZE, pool_recycle=3600, echo=False)\n    event.listen(ENGINE1, 'checkout', checkout_listener)\n    return (ENGINE1);\n</code></pre>\n\n<p>This worked fine on python 2 but on python 3, the charmap error would occur. The only solution I found was to write engine in a different manner, and add charset to the definition string:</p>\n\n<pre><code>connection_string = f\"{mysql_user}:{mysql_password}@localhost:3306/{db_name}?charset=utf8\"\nengine = create_engine(f'mysql://{connection_string}')\n</code></pre>\n"}], "owner": {"reputation": 1418, "user_id": 387191, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/31bb6d57fba392e9b4e757dcde624ba4?s=128&d=identicon&r=PG", "display_name": "lathomas64", "link": "https://stackoverflow.com/users/387191/lathomas64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12712, "favorite_count": 4, "answer_count": 3, "score": 15, "last_activity_date": 1584627904, "creation_date": 1440619400, "last_edit_date": 1440621809, "question_id": 32235696, "link": "https://stackoverflow.com/questions/32235696/pandas-to-sql-gives-unicode-decode-error", "title": "pandas to_sql gives unicode decode error", "body": "<p>I have a pandas dataframe I loaded via read_csv that I am trying to push to a database via to_sql when I attempt</p>\n\n<pre><code>df.to_sql(\"assessmentinfo_pivot\", util.ENGINE)\n</code></pre>\n\n<p>I get back a unicodeDecodeError:</p>\n\n<pre><code>UnicodeEncodeError: 'ascii' codec can't encode characters in position 83-84: ordinal not in range(128)\n</code></pre>\n\n<p>There is no encoding option for to_sql to specify utf-8 for the to_sql and the Engine was created with encoding set to utf-8</p>\n\n<pre><code>ENGINE = create_engine(\"mssql+pymssql://\" +\n                       config.get_local('CEDS_USERNAME') + ':' +\n                       config.get_local('CEDS_PASSWORD') + '@' +\n                       config.get_local('CEDS_SERVER') + '/' +\n                       config.get_local('CEDS_DATABASE'),\n                       encoding=\"utf-8\")\n</code></pre>\n\n<p>Any pandas insight into getting this working properly? most of my searched lead me to people having a similar error for to_csv which is just resolved by adding encoding=\"utf-8\" but that is unfortunately not an option here.</p>\n\n<p>I tried paring the file down but it still gives errors even when stripped down to just the headers: <a href=\"http://pastebin.com/F362xGyP\" rel=\"noreferrer\">http://pastebin.com/F362xGyP</a></p>\n"}, {"tags": ["python", "sublimetext2", "python-requests", "sublimetext3"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1440620410, "post_id": 32235671, "comment_id": 52354200, "body": "What platform are you on? Do you get the same error with ST3?"}, {"owner": {"reputation": 141, "user_id": 5248128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AS1NS6tH5i4/AAAAAAAAAAI/AAAAAAAAAGE/_KGIjBWvZTw/photo.jpg?sz=128", "display_name": "Speaking Code", "link": "https://stackoverflow.com/users/5248128/speaking-code"}, "edited": false, "score": 1, "creation_date": 1440626435, "post_id": 32235671, "comment_id": 52357069, "body": "It isn&#39;t exception. It&#39;s warning. You can ignore it."}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440630847, "post_id": 32235671, "comment_id": 52358582, "body": "The warning also contains a link to the documentation where it is explained. The documentation also has information on how to suppress this warning (if you know what you are doing by ignoring a security warning)."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 141, "user_id": 5248128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AS1NS6tH5i4/AAAAAAAAAAI/AAAAAAAAAGE/_KGIjBWvZTw/photo.jpg?sz=128", "display_name": "Speaking Code", "link": "https://stackoverflow.com/users/5248128/speaking-code"}, "edited": false, "score": 1, "creation_date": 1440681484, "post_id": 32235671, "comment_id": 52381391, "body": "@SpeakingCode OP doesn&#39;t want to ignore it - he wants a secure connection."}, {"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 1, "creation_date": 1441143816, "post_id": 32235671, "comment_id": 52557257, "body": "Try installing <code>requests</code> with the <code>[security]</code> extra. E.g. <code>pip install requests[security]</code>. This will pull in additional dependencies, amongst them <code>pyOpenSSL</code>, which should fix this issue."}], "owner": {"reputation": 4974, "user_id": 86537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9e5ac0fb8513b631021f01966da78c56?s=128&d=identicon&r=PG", "display_name": "Eric the Red", "link": "https://stackoverflow.com/users/86537/eric-the-red"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440619286, "creation_date": 1440619286, "question_id": 32235671, "link": "https://stackoverflow.com/questions/32235671/how-can-i-make-a-post-over-https-with-the-requests-module-in-a-sublime-text-plug", "title": "How can I make a POST over HTTPS with the requests module in a Sublime Text plugin?", "body": "<p>In a Sublime Text (2 and 3) plugin, I'm using the requests module to make a POST over HTTPS.</p>\n\n<pre><code>results = requests.post(secure_url, data=params)\n</code></pre>\n\n<p>This error is created:</p>\n\n<pre><code>Sublime Text 2/Packages/requests/all/requests/packages/urllib3/util/ssl_.py:90: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning.\n</code></pre>\n\n<p>How can I secure this communication in a way that is acceptable to all Sublime instances? Any help would be greatly appreciated!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 2, "creation_date": 1440619262, "post_id": 32235617, "comment_id": 52353630, "body": "recursion is really not the way to go with this"}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1440619264, "post_id": 32235617, "comment_id": 52353633, "body": "Can you show your solution where you did add?"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1440619311, "post_id": 32235617, "comment_id": 52353657, "body": "use iteration, <code>yield</code> the numbers to add, and catch the yield inside a <code>sum</code>.."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440619317, "post_id": 32235617, "comment_id": 52353659, "body": "Ah, the classic FizzBuzz."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440619459, "post_id": 32235617, "comment_id": 52353734, "body": "That &quot;Question 1&quot; makes it sound like this is for a test or exam. Is it?"}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1440619501, "post_id": 32235617, "comment_id": 52353763, "body": "@TigerhawkT3 Smells to me like Project Euler."}, {"owner": {"reputation": 37, "user_id": 5270113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-v7q4F1NX1FE/AAAAAAAAAAI/AAAAAAAADok/mRB4fXT5bI4/photo.jpg?sz=128", "display_name": "Arjit Kapoor", "link": "https://stackoverflow.com/users/5270113/arjit-kapoor"}, "edited": false, "score": 0, "creation_date": 1440619511, "post_id": 32235617, "comment_id": 52353770, "body": "I tried using sum(multi(a-1)) in last line. It showed &quot;int&quot; object is not iterable ."}, {"owner": {"reputation": 37, "user_id": 5270113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-v7q4F1NX1FE/AAAAAAAAAAI/AAAAAAAADok/mRB4fXT5bI4/photo.jpg?sz=128", "display_name": "Arjit Kapoor", "link": "https://stackoverflow.com/users/5270113/arjit-kapoor"}, "edited": false, "score": 0, "creation_date": 1440619534, "post_id": 32235617, "comment_id": 52353777, "body": "Yes, First problem of Project Euler!"}, {"owner": {"reputation": 1751, "user_id": 3586325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3CRVr.jpg?s=128&g=1", "display_name": "Buzz", "link": "https://stackoverflow.com/users/3586325/buzz"}, "edited": false, "score": 0, "creation_date": 1440619555, "post_id": 32235617, "comment_id": 52353791, "body": "try adding instead of printing"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5270113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-v7q4F1NX1FE/AAAAAAAAAAI/AAAAAAAADok/mRB4fXT5bI4/photo.jpg?sz=128", "display_name": "Arjit Kapoor", "link": "https://stackoverflow.com/users/5270113/arjit-kapoor"}, "edited": false, "score": 0, "creation_date": 1440619782, "post_id": 32235695, "comment_id": 52353896, "body": "Tried this , its not giving any result."}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "reply_to_user": {"reputation": 37, "user_id": 5270113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-v7q4F1NX1FE/AAAAAAAAAAI/AAAAAAAADok/mRB4fXT5bI4/photo.jpg?sz=128", "display_name": "Arjit Kapoor", "link": "https://stackoverflow.com/users/5270113/arjit-kapoor"}, "edited": false, "score": 0, "creation_date": 1440620226, "post_id": 32235695, "comment_id": 52354122, "body": "@ArjitKapoor Just tried it, it works, make sure your indentation is legal and try it again. Copy paste job."}], "tags": [], "owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "is_accepted": true, "score": 1, "last_activity_date": 1440619400, "creation_date": 1440619400, "answer_id": 32235695, "question_id": 32235617, "link": "https://stackoverflow.com/questions/32235617/sum-the-results-i-already-have-on-screen/32235695#32235695", "title": "Sum the results I already have on screen", "body": "<p>You need to actually do the addition at some point. The correct code is:</p>\n\n<pre><code>def multi(n):\n  if n &lt;= 1 :\n    return 0\n  elif n%3 == 0 or n%5 == 0:\n    return n + multi (n-1)\n  else:\n    return multi (n-1)\n\na = input(\"Enter value\")\nmulti(a-1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 5270113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-v7q4F1NX1FE/AAAAAAAAAAI/AAAAAAAADok/mRB4fXT5bI4/photo.jpg?sz=128", "display_name": "Arjit Kapoor", "link": "https://stackoverflow.com/users/5270113/arjit-kapoor"}, "edited": false, "score": 0, "creation_date": 1440620189, "post_id": 32235808, "comment_id": 52354102, "body": "Any suggestion for noob on How to tackle problem and on solving it?"}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "reply_to_user": {"reputation": 37, "user_id": 5270113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-v7q4F1NX1FE/AAAAAAAAAAI/AAAAAAAADok/mRB4fXT5bI4/photo.jpg?sz=128", "display_name": "Arjit Kapoor", "link": "https://stackoverflow.com/users/5270113/arjit-kapoor"}, "edited": false, "score": 0, "creation_date": 1440620290, "post_id": 32235808, "comment_id": 52354153, "body": "@ArjitKapoor You can actually figure this out without writing a line of code. Honing that skill will be critical for later Project Euler problems."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 0, "last_activity_date": 1440619768, "creation_date": 1440619768, "answer_id": 32235808, "question_id": 32235617, "link": "https://stackoverflow.com/questions/32235617/sum-the-results-i-already-have-on-screen/32235808#32235808", "title": "Sum the results I already have on screen", "body": "<p>The easiest way is probably a filtering generator expression:</p>\n\n<pre><code>def multi(n):\n    return sum(item for item in range(n) if not (item%3 and item%5))\n</code></pre>\n\n<p>Keep in mind that, as the very first Project Euler problem, the difficulty on subsequent problems goes nowhere but up.</p>\n"}, {"tags": [], "owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "is_accepted": false, "score": 0, "last_activity_date": 1440620259, "creation_date": 1440620259, "answer_id": 32235952, "question_id": 32235617, "link": "https://stackoverflow.com/questions/32235617/sum-the-results-i-already-have-on-screen/32235952#32235952", "title": "Sum the results I already have on screen", "body": "<pre><code>fives = [x for x in range(0,1000,5)]\nthrees= [x for x in range(0,1000,3)] \n\nprint( sum(list(set(fives) | set(threes))))\n</code></pre>\n\n<p>get the list of all fives and threes union and sum it up. </p>\n"}], "owner": {"reputation": 37, "user_id": 5270113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-v7q4F1NX1FE/AAAAAAAAAAI/AAAAAAAADok/mRB4fXT5bI4/photo.jpg?sz=128", "display_name": "Arjit Kapoor", "link": "https://stackoverflow.com/users/5270113/arjit-kapoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 32235695, "answer_count": 3, "score": 0, "last_activity_date": 1440620259, "creation_date": 1440619129, "last_edit_date": 1440620091, "question_id": 32235617, "link": "https://stackoverflow.com/questions/32235617/sum-the-results-i-already-have-on-screen", "title": "Sum the results I already have on screen", "body": "<blockquote>\n  <p>If we list all the natural numbers below 10 that are multiples of 3 or\n  5, we get 3, 5, 6 and 9. The sum of these multiples is 23.</p>\n  \n  <p>Find the sum of all the multiples of 3 or 5 below 1000</p>\n</blockquote>\n\n<p>Solution :</p>\n\n<pre><code>def multi(n):\n\n  if n &lt;= 1 :\n    return 0\n  elif n%3 == 0 or n%5 == 0:\n    s = n\n    print s\n    return multi (n-1)\n  else:\n    return multi (n-1)\n\na = input(\"Enter value\")\nmulti(a-1)\n</code></pre>\n\n<p>Though I am able to print all the numbers below 1000 that are divisible by 3 and 5, I am not able to add them. I don't want the solution, all I need is a hint. I tried adding it but what I received was the \"int and Nonetype can't be added\" error.</p>\n"}, {"tags": ["python", "regex", "datetime"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 4, "creation_date": 1440618884, "post_id": 32235538, "comment_id": 52353418, "body": "Unless there is some logic there is no way to know which is which, what should <code>11&#47;12&#47;16</code>  be, which is the month and which is the day?"}, {"owner": {"reputation": 18696, "user_id": 703229, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5c7b9b4837d58fb7ceac0e3bbf234246?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/703229/sam"}, "edited": false, "score": 0, "creation_date": 1440619153, "post_id": 32235538, "comment_id": 52353565, "body": "My favorite day ever was 11/10/09, do you know what happened that day?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1440619231, "post_id": 32235538, "comment_id": 52353604, "body": "Why does the linked question not answer yours? Once you&#39;ve converted the string to a <code>datetime</code> it is trivial to reformat the result as needed."}, {"owner": {"reputation": 269, "user_id": 4612488, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fe6efb9ba5399c22faa3daa0c618620f?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4612488/ben"}, "edited": false, "score": 1, "creation_date": 1440619461, "post_id": 32235538, "comment_id": 52353736, "body": "You can also split the string.  dates.split(&quot;/&quot;) and then index the first element to get the middle number(s)"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1440619985, "post_id": 32235538, "comment_id": 52353996, "body": "The linked question answers everything but how to determine which field is the month and which is the day. The answer to that is either A) <code>try..except</code>, or B) impossible (see @PadraicCunningham&#39;s comment)."}, {"owner": {"reputation": 169, "user_id": 4471354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/583871601f579b5bacc82203d32ad672?s=128&d=identicon&r=PG", "display_name": "Andy Kubiak", "link": "https://stackoverflow.com/users/4471354/andy-kubiak"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440678289, "post_id": 32235538, "comment_id": 52378961, "body": "@TigerhawkT3 Thanks, good points, esp. B). I hadn&#39;t noticed Padraic&#39;s note. Thanks for pointing it out!"}, {"owner": {"reputation": 883, "user_id": 3799942, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d5c7d9c65ebda6cb0323c65ecd00d115?s=128&d=identicon&r=PG&f=1", "display_name": "NachoMiguel", "link": "https://stackoverflow.com/users/3799942/nachomiguel"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1440689417, "post_id": 32235538, "comment_id": 52387359, "body": "@TigerhawkT3 thanks for the comments. Yeah i will have to deal with the fact that is probable that i can not solve this...thanks anyways everybody"}], "owner": {"reputation": 883, "user_id": 3799942, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d5c7d9c65ebda6cb0323c65ecd00d115?s=128&d=identicon&r=PG&f=1", "display_name": "NachoMiguel", "link": "https://stackoverflow.com/users/3799942/nachomiguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440696133, "creation_date": 1440618792, "last_edit_date": 1440696075, "question_id": 32235538, "link": "https://stackoverflow.com/questions/32235538/python-getting-the-month-out-of-a-string-this-is-not-converting-string-into", "title": "Python: getting the month out of a string -- This is NOT Converting string into datetime", "body": "<p>The title is horrible, sorry. I\u00b4m redding form a text file that has a bunch of dates in this format: </p>\n\n<pre><code>30/5/2015\n</code></pre>\n\n<p>and also can appear obviously with 2 numbers in the month:</p>\n\n<pre><code>21/12/2014\n</code></pre>\n\n<p>this is pure text, is not formatted as a date. What i have to do is to control that the month section does not exceds the number 12. This is because sometimes the date changes it\u00b4s format and appear like :</p>\n\n<pre><code>2/15/2015--- meaning that the second place turns to days and the first one to months\n</code></pre>\n\n<p>This are the dates that i do not need. From the text i\u00b4m getting all this dates like this:</p>\n\n<pre><code>fechas = list(set(re.findall(r'\\b(\\d+/\\d+/\\d{4})\\b', data))) --- i use set() because sometimes the dates appear more than one time\n</code></pre>\n\n<p>I tried something like this:</p>\n\n<pre><code>for fecha in fechas:\n    month = fecha[2:3]\n</code></pre>\n\n<p>trying to slice the string, but this wouldn\u00b4t work because of the fact that if i do this i\u00b4m getting 1 number and sometimes i need 2</p>\n\n<p>Does anyone have any idea on how o do this?</p>\n\n<p>Any help will be really appreciated</p>\n"}, {"tags": ["python", "logging", "pytest"], "comments": [{"owner": {"reputation": 319, "user_id": 2145382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b43680089ce9c3574fdc0fef221a5c03?s=128&d=identicon&r=PG", "display_name": "moorecm", "link": "https://stackoverflow.com/users/2145382/moorecm"}, "edited": false, "score": 0, "creation_date": 1440618604, "post_id": 32235459, "comment_id": 52353262, "body": "I forgot to mention that when multiple tests are run, only the last teardown has this problem."}, {"owner": {"reputation": 319, "user_id": 2145382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b43680089ce9c3574fdc0fef221a5c03?s=128&d=identicon&r=PG", "display_name": "moorecm", "link": "https://stackoverflow.com/users/2145382/moorecm"}, "edited": false, "score": 0, "creation_date": 1440619258, "post_id": 32235459, "comment_id": 52353626, "body": "Another thing worth mentioning is that just using print instead of logging works as expected too."}], "owner": {"reputation": 319, "user_id": 2145382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b43680089ce9c3574fdc0fef221a5c03?s=128&d=identicon&r=PG", "display_name": "moorecm", "link": "https://stackoverflow.com/users/2145382/moorecm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1440618520, "creation_date": 1440618520, "question_id": 32235459, "link": "https://stackoverflow.com/questions/32235459/attempts-to-log-py-test-setup-call-and-teardown-duration-results-in-unexpected", "title": "Attempts to log py.test setup, call, and teardown duration results in unexpected order of log output", "body": "<p>I'm using Python 3.4.3 and pytest-2.7.2.  Following the docs, I wrote this in my conftest.py:</p>\n\n<pre><code>import logging\nimport time\n\nimport pytest\n\n\nlogging.basicConfig(\n    level='INFO',\n    handlers=(\n        logging.StreamHandler(),\n        logging.FileHandler('log.txt')\n    )\n)\n\n@pytest.mark.hookwrapper\ndef pytest_runtest_teardown(item, nextitem):\n    logging.info('%s TEARDOWN &gt;&gt;&gt;', item.nodeid)\n    start = time.time()\n    outcome = yield\n    end = time.time()\n    logging.info('%s TEARDOWN &lt;&lt;&lt; %fs', item.nodeid, end - start)\n</code></pre>\n\n<p>And a trivial test.py:</p>\n\n<pre><code>def test_something():\n    pass\n</code></pre>\n\n<p>Using py.test test.py -vvv, exhibits the problem.  Note that the log message, that I would have expected py.test to hide, escapes and is printed later (after the summary line).</p>\n\n<pre><code>======= test session starts ======\n...snip...\n\ntest.py::test_something PASSED\n\n\n==== 1 passed in 0.03 seconds ====\nINFO:root:test.py::test_something TEARDOWN &lt;&lt;&lt; 0.000368s\n</code></pre>\n\n<p>Adding -s to avoid capture, displays everything as expected:</p>\n\n<pre><code>======= test session starts ======\n...snip...\n\ntest.py::test_something PASSEDINFO:root:test.py::test_something TEARDOWN &gt;&gt;&gt;\nINFO:root:test.py::test_something TEARDOWN &lt;&lt;&lt; 0.000207s\n\n\n==== 1 passed in 0.02 seconds ====\n</code></pre>\n\n<p>Now, this example is simplified a bit.  In my actual conftest.py, I'm outputing the same kind of logging for pytest_runtest_setup() and pytest_runtest_call() as well.</p>\n\n<p>log.txt looks fine for both invocations:</p>\n\n<pre><code>INFO:root:test.py::test_something TEARDOWN &gt;&gt;&gt;\nINFO:root:test.py::test_something TEARDOWN &lt;&lt;&lt; 0.000207s\nINFO:root:test.py::test_something TEARDOWN &gt;&gt;&gt;\nINFO:root:test.py::test_something TEARDOWN &lt;&lt;&lt; 0.000326s\n</code></pre>\n\n<p>I even have a pytest_unconfigure() implemented that prints (using print) some links at the end of the run.  The message that manages to escape (only without specifying -s) even displays after that content!</p>\n\n<p>Using py.test --debug, you can see that the scope of pytest_runtest_teardown() should not include pytest_unconfigure():</p>\n\n<pre><code>...snip...\n        pytest_runtest_teardown [hook]\n            item: &lt;Function 'test_something'&gt;\n            nextitem: None\n        finish pytest_runtest_teardown --&gt; [] [hook]\n...snip...\n      finish pytest_runtest_protocol --&gt; True [hook]\n    finish pytest_runtestloop --&gt; True [hook]\n    pytest_sessionfinish [hook]\n...snip...\n    finish pytest_sessionfinish --&gt; [] [hook]\n    pytest_unconfigure [hook]\n        config: &lt;_pytest.config.Config object at 0x7f8a46be6a90&gt;\n    finish [config:tmpdir]\n</code></pre>\n\n<p>I'm not sure if this is a py.test bug (in hookwrapper or the output capturing, perhaps?) or some kind of logging buffering biting me...  Any ideas?</p>\n"}, {"tags": ["python", "selenium", "exe", "py2exe"], "answers": [{"tags": [], "owner": {"reputation": 7115, "user_id": 552450, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d33b69be531ba04c28a96a54a47ee727?s=128&d=identicon&r=PG", "display_name": "redice", "link": "https://stackoverflow.com/users/552450/redice"}, "is_accepted": false, "score": 0, "last_activity_date": 1469776306, "creation_date": 1469776306, "answer_id": 38652618, "question_id": 32235313, "link": "https://stackoverflow.com/questions/32235313/python-selenium-webdriverprefs-json-not-found-py2exe/38652618#38652618", "title": "Python selenium webdriverprefs.json not found py2exe", "body": "<p>I met and have solved the similar problem:</p>\n\n<ol>\n<li>Copy webdriver.xpi and webdriver_prefs.json into your exe directoy.</li>\n<li><p>Modify C:\\Python27\\Lib\\site-packages\\selenium\\webdriver\\firefox\\firefox_profile.py:</p>\n\n<p>Change \"os.path.join(os.path.dirname(file)\" into -> \"os.path.join(os.path.dirname(file), '..\\..\\..\\..\\'\", has two places.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7719863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f889f42e7d72eb68c7b25949db9147?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Ubeda", "link": "https://stackoverflow.com/users/7719863/fernando-ubeda"}, "is_accepted": false, "score": 0, "last_activity_date": 1490628718, "last_edit_date": 1490628718, "creation_date": 1490612229, "answer_id": 43044497, "question_id": 32235313, "link": "https://stackoverflow.com/questions/32235313/python-selenium-webdriverprefs-json-not-found-py2exe/43044497#43044497", "title": "Python selenium webdriverprefs.json not found py2exe", "body": "<p>The following worked.</p>\n\n<p>Edit <code>firefox_profile.py</code>: WEBDRIVER_EXT, WEBDRIVER_PREFERENCES:</p>\n\n<pre><code>if getattr(sys, 'frozen', False):\n    WEBDRIVER_EXT = os.path.join(os.path.dirname(sys.executable), \"webdriver.xpi\")\n    WEBDRIVER_PREFERENCES = os.path.join(os.path.dirname(sys.executable), \"webdriver_prefs.json\")\nelif __file__:\n    WEBDRIVER_EXT = os.path.join(os.path.dirname(__file__), \"webdriver.xpi\")\n    WEBDRIVER_PREFERENCES = os.path.join(os.path.dirname(__file__), \"webdriver_prefs.json\")\n</code></pre>\n\n<p>goto the line <code>with open(...</code>\nand replace with <code>with open(WEBDRIVER_PREFERENCES) as default_prefs</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5236465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413a12edd3e081878863bab1348b6df5?s=128&d=identicon&r=PG&f=1", "display_name": "Looky", "link": "https://stackoverflow.com/users/5236465/looky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490628718, "creation_date": 1440617946, "question_id": 32235313, "link": "https://stackoverflow.com/questions/32235313/python-selenium-webdriverprefs-json-not-found-py2exe", "title": "Python selenium webdriverprefs.json not found py2exe", "body": "<p>I have a python  (34) script which uses selenium package, and when creating an exe using py2exe I have the following error </p>\n\n<blockquote>\n  <p>webdriver_prefs.json not found</p>\n</blockquote>\n\n<p>I found the following solution, but I dont get it :</p>\n\n<blockquote>\n  <p>when freezing scripts to exe don't use --onefile , use --onedir\n  instead , it will generate one folder for all files and then copy\n  selenium folder in path c:\\python27\\lib\\site-packages\\selenium to your\n  app folder and it works correctly</p>\n</blockquote>\n\n<p>Here's my setup.py</p>\n\n<pre><code>from distutils.core import setup\nimport py2exe\n\ndata_filesR = [('selenium/webdriver/firefox', ['C:/Python34/Lib/site-packages/selenium/webdriver/firefox/webdriver.xpi','C:/Python34/Lib/site-packages/selenium/webdriver/firefox/webdriver_prefs.json'])]\n\nsetup(\n    name='Test',\n    version='1.0',\n    description='General description of app',\n    author='author name',\n    author_email='author email',\n    url='',\n    console = ['firefox.py'],\n    data_files=data_filesR,\n    options={\n        'py2exe':\n            {\n\n                \"skip_archive\": True,\n                \"unbuffered\": True,\n                'optimize': 2,\n            }\n    },\n     requires=['selenium'],\n)\n</code></pre>\n"}, {"tags": ["python", "django", "openshift"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "edited": false, "score": 0, "creation_date": 1440618887, "post_id": 32235291, "comment_id": 52353419, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/24595223/static-files-on-openshift-django\">Static files on OpenShift Django</a>"}], "answers": [{"tags": [], "owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "is_accepted": false, "score": 1, "last_activity_date": 1440634439, "creation_date": 1440634439, "answer_id": 32238697, "question_id": 32235291, "link": "https://stackoverflow.com/questions/32235291/git-push-failing-on-openshift/32238697#32238697", "title": "Git Push failing on Openshift?", "body": "<p>The symptoms you see are not strictly the same as the issue it is claimed this duplicates, but the need to set <code>STATIC_ROOT</code> properly as a remedy is.</p>\n\n<p>The error you get suggests you have hard coded the path for <code>STATIC_ROOT</code> to be an actual path on your local MacOS X system. You can't do that, you need to calculate it dynamically.</p>\n\n<p>In the case of OpenShift, you should set <code>STATIC_ROOT</code> as:</p>\n\n<pre><code>STATIC_ROOT = os.path.join(os.environ['OPENSHIFT_REPO_DIR'], 'wsgi', 'static')\n</code></pre>\n\n<p>When <code>collectstatic</code> is run, it should then put static files under the directory <code>wsgi/static</code> within OpenShift. That directory is special and when it exists OpenShift will configure automatically the Apache/mod_wsgi instance to serve up static files from that location at the URL <code>/static</code>. So make sure <code>STATIC_URL</code> is also set to <code>/static</code>.</p>\n"}], "owner": {"reputation": 3063, "user_id": 3442820, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H8gll.jpg?s=128&g=1", "display_name": "Coderaemon", "link": "https://stackoverflow.com/users/3442820/coderaemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440634439, "creation_date": 1440617874, "question_id": 32235291, "link": "https://stackoverflow.com/questions/32235291/git-push-failing-on-openshift", "title": "Git Push failing on Openshift?", "body": "<p>Trying to <code>git push</code> to Django repo in Openshift getting the folloe error.</p>\n\n<pre><code>remote: Traceback (most recent call last):\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/app-root/runtime/repo/wsgi/myproject/manage.py\", line 11, in &lt;module&gt;\nremote:     execute_from_command_line(sys.argv)\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/__init__.py\", line 338, in execute_from_command_line\nremote:     utility.execute()\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/__init__.py\", line 330, in execute\nremote:     self.fetch_command(subcommand).run_from_argv(self.argv)\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/base.py\", line 390, in run_from_argv\nremote:     self.execute(*args, **cmd_options)\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/base.py\", line 441, in execute\nremote:     output = self.handle(*args, **options)\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/contrib/staticfiles/management/commands/collectstatic.py\", line 168, in handle\nremote:     collected = self.collect()\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/contrib/staticfiles/management/commands/collectstatic.py\", line 98, in collect\nremote:     for path, storage in finder.list(self.ignore_patterns):\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/contrib/staticfiles/finders.py\", line 112, in list\nremote:     for path in utils.get_files(storage, ignore_patterns):\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/contrib/staticfiles/utils.py\", line 28, in get_files\nremote:     directories, files = storage.listdir(location)\nremote:   File \"/var/lib/openshift/55d9fa9f7628e164d400008b/python/virtenv/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/files/storage.py\", line 300, in listdir\nremote:     for entry in os.listdir(path):\nremote: OSError: [Errno 2] No such file or directory: '/Users/ns/ergo/wsgi/static'\nremote: -------------------------\nremote: Git Post-Receive Result: failure\nremote: Activation status: failure\nremote: Activation failed for the following gears:\nremote: 55d9fa9f7628e164d400008b (Error activating gear: CLIENT_ERROR: Failed to execute action hook 'deploy' for 55d9fa9f7628e164d400008b application ergo\nremote: #&lt;IO:0x00000002124290&gt;\nremote: #&lt;IO:0x00000002124218&gt;\nremote: )\nremote: Deployment completed with status: failure\nremote: postreceive failed\n</code></pre>\n\n<p>The OSError directory(<code>/Users/ns/ergo/wsgi/static</code>) does exist I have checked. What is the problem happening ?</p>\n\n<p>Now if I comment following script from deploy hook the git push is successful </p>\n\n<p><code>python \"$OPENSHIFT_REPO_DIR\"wsgi/myproject/manage.py collectstatic --noinput</code></p>\n\n<p>So Static files are causing some issue ? </p>\n"}, {"tags": ["python", "machine-learning", "nlp", "nltk"], "comments": [{"owner": {"reputation": 2115, "user_id": 1394473, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7261fd63649bb17e90b30474b493a520?s=128&d=identicon&r=PG", "display_name": "tom", "link": "https://stackoverflow.com/users/1394473/tom"}, "edited": false, "score": 0, "creation_date": 1440618320, "post_id": 32235272, "comment_id": 52353137, "body": "It seems like the common elements in the &quot;pulled pork&quot; list is the word &quot;pork&quot;. I would be tempted to find the n most common words (you may want to filter out nouns specifically) in the dataset of dishes, then find subsets of dishes (which may overlap) that contain specific common words."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1440676263, "post_id": 32235272, "comment_id": 52377537, "body": "Try hyper/hyponym generation, see alt.qcri.org/semeval2015/task17/ and shameless plug: <a href=\"http://aclanthology.info/papers/usaar-wlv-hypernym-generation-with-deep-neural-nets\" rel=\"nofollow noreferrer\">aclanthology.info/papers/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4093, "user_id": 4582273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94fcc64a380a38b013479fbbcfffa9b?s=128&d=identicon&r=PG", "display_name": "lemonhead", "link": "https://stackoverflow.com/users/4582273/lemonhead"}, "is_accepted": false, "score": 1, "last_activity_date": 1440618659, "creation_date": 1440618659, "answer_id": 32235500, "question_id": 32235272, "link": "https://stackoverflow.com/questions/32235272/normalizing-a-list-of-restaurant-dishes/32235500#32235500", "title": "Normalizing a list of restaurant dishes", "body": "<p>Sounds like you are effectively trying to do <a href=\"http://nlp.stanford.edu/projects/coref.shtml\" rel=\"nofollow\">coreference resolution</a> on named entities, where the entities are distinct dishes.  You can check out projects like <a href=\"https://github.com/smartschat/cort\" rel=\"nofollow\"><code>cort</code></a> and <a href=\"https://code.google.com/p/nltk-drt/\" rel=\"nofollow\"><code>nltk-drt</code></a>.</p>\n\n<p>However, from your example it's a little unclear why a pulled pork sandwich should be considered the same dish as pulled pork, so you may need a way to come up with your own training set (e.g. culled from google) that tags entities as distinct within your desired tolerance.</p>\n"}, {"comments": [{"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1440676181, "post_id": 32235511, "comment_id": 52377479, "body": "This is hypothetical and not real truth, you will face more noise when you do cosine-similarity especially when you decide where is the threshold to decide what is &quot;similar&quot; and what is your gold cluster. A clustering approach would be more appropriate."}, {"owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "reply_to_user": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1440687518, "post_id": 32235511, "comment_id": 52386037, "body": "@alvas I would actually agree with that. The OP seemed to find a fast/ad-hoc solution to this problem, that is why I was thinking about a static-threshold. Probably, clustering the cosine similarities (similarity/distance matrix) would a more former/better way of doing it. Let me update my answer."}, {"owner": {"reputation": 2024, "user_id": 1985257, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a694f6f74b275133ce20f1a268b2b93c?s=128&d=identicon&r=PG", "display_name": "George B", "link": "https://stackoverflow.com/users/1985257/george-b"}, "edited": false, "score": 0, "creation_date": 1440695643, "post_id": 32235511, "comment_id": 52391205, "body": "Thanks, guys. This seems like a great approach."}], "tags": [], "owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "is_accepted": true, "score": 4, "last_activity_date": 1440687775, "last_edit_date": 1440687775, "creation_date": 1440618700, "answer_id": 32235511, "question_id": 32235272, "link": "https://stackoverflow.com/questions/32235272/normalizing-a-list-of-restaurant-dishes/32235511#32235511", "title": "Normalizing a list of restaurant dishes", "body": "<p>You might want look for <code>TFIDF</code> and <code>cosine similarity</code>.</p>\n\n<p>There are challenging cases, however. Let's say you have the following three dishes:</p>\n\n<ul>\n<li>Pulled pork</li>\n<li>Pulled egg</li>\n<li>Egg sandwich</li>\n</ul>\n\n<p>Which of the two you are going to combine? </p>\n\n<ul>\n<li>Pulled pork and pulled egg  </li>\n<li>Pulled egg and egg sandwich</li>\n</ul>\n\n<p>Using <code>TFIDF</code>, you can find the most <em>representative</em>  words. For example the word <em>sandwich</em> may happen to be in many dishes, hence not very <em>representative</em>. (Tuna sandwich, egg sandwich, cheese sandwich, etc.) Merging tuna sandwich and cheese sandwich may not be a good idea. </p>\n\n<p>After you have the TFIDF vectors, you can use cosine similarity (using the TFIDF vectors) and maybe a static threshold, you can decide whether to merge them or not. </p>\n\n<p>There is also another issue arises: When you match, what are you going to name them? (Pulled egg or egg sandwich?)</p>\n\n<h2>Update:</h2>\n\n<p>@alvas suggests to use clustering after having the similarity/dissimilarity values. I think that would be good idea. You can first create your <code>nxn</code> distance/similarity matrix using the cosine similarity with TFIDF vectors. And after you have the distance matrix, you can cluster them using a clustering algorithm.</p>\n"}], "owner": {"reputation": 2024, "user_id": 1985257, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a694f6f74b275133ce20f1a268b2b93c?s=128&d=identicon&r=PG", "display_name": "George B", "link": "https://stackoverflow.com/users/1985257/george-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 32235511, "answer_count": 2, "score": 5, "last_activity_date": 1440687775, "creation_date": 1440617828, "question_id": 32235272, "link": "https://stackoverflow.com/questions/32235272/normalizing-a-list-of-restaurant-dishes", "title": "Normalizing a list of restaurant dishes", "body": "<p>I have a large data set of restaurant dishes (for example, \"Pulled Pork\", \"Beef Brisket\"...)</p>\n\n<p>I am trying to \"normalize\" (wrong word) the dishes. I want \"Pulled Pork\" and \"Pulled Pork Sandwich\" and \"Jumbo Pork Slider\" all to map to a single dish, \"Pulled Pork\". </p>\n\n<p>So far I have gotten started with NLTK using Python and had some fun playing around with frequency distributions and such.</p>\n\n<p>Does anyone have a high-level strategy to approach this problem? Perhaps some keywords I could google?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "numpy", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "edited": false, "score": 0, "creation_date": 1440619044, "post_id": 32235229, "comment_id": 52353505, "body": "The &#39;1992-02-29&#39; has 5 NaNs - what&#39;s different about it that lets you determine that you don&#39;t want to drop it?"}, {"owner": {"reputation": 44364, "user_id": 2487184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8cd1dea84cfe8312c532088a0da08e8?s=128&d=identicon&r=PG", "display_name": "CT Zhu", "link": "https://stackoverflow.com/users/2487184/ct-zhu"}, "reply_to_user": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "edited": false, "score": 1, "creation_date": 1440619514, "post_id": 32235229, "comment_id": 52353772, "body": "@chrisb, drop <i>leading</i> rows."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1440620200, "post_id": 32235229, "comment_id": 52354115, "body": "All the rows have at least five NaNs. Surely you mean rows with more than 5 NaNs."}, {"owner": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "reply_to_user": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1440620563, "post_id": 32235229, "comment_id": 52354283, "body": "@Alexander thanks for pointing it out. Fixed the question."}], "answers": [{"comments": [{"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 2, "creation_date": 1440619988, "post_id": 32235842, "comment_id": 52354000, "body": "I suspect that if the second row had 8 NaNs, that would also count as a leading row to be dropped."}, {"owner": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440621377, "post_id": 32235842, "comment_id": 52354742, "body": "Beautiful. This answers the question. I wasn&#39;t aware of functionality of ravel and argwhere. Thank you @CTZhu"}], "tags": [], "owner": {"reputation": 44364, "user_id": 2487184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8cd1dea84cfe8312c532088a0da08e8?s=128&d=identicon&r=PG", "display_name": "CT Zhu", "link": "https://stackoverflow.com/users/2487184/ct-zhu"}, "is_accepted": false, "score": 3, "last_activity_date": 1440621850, "last_edit_date": 1440621850, "creation_date": 1440619868, "answer_id": 32235842, "question_id": 32235229, "link": "https://stackoverflow.com/questions/32235229/pandas-drop-leading-rows-with-nan-threshold-in-dataframe/32235842#32235842", "title": "Pandas: Drop leading rows with NaN threshold in dataframe", "body": "<p>You just need <code>df[(df.irow(0).isnull().sum()&gt;5):]</code></p>\n\n<p>When the 1st row has more than 5 <code>nan</code>, <code>df.irow(0).isnull().sum()&gt;5</code> is <code>True</code> and <code>df[(df.irow(0).isnull().sum()&gt;5):]</code> is simply <code>df[1:]</code>: the 1st row is omitted.</p>\n\n<p>To address @DSM's point, we may consider:</p>\n\n<pre><code>df.ix[np.argwhere(df.isnull().sum(1)&lt;=5).ravel()[0]:]\n</code></pre>\n\n<p>Basically this is to slice the DataFrame, from the 1st row (not in the original df, but the 1st row that has less or equal than 5 <code>nan</code>) on. This way, if the 1st row has 6, the 2nd row has 7 and the 3rd has 8 <code>nan</code>s, the resultant dataframe will start from the 4th row.  If the 1st row has only 1 <code>nan</code>, the result will be <code>df[0:]</code>, no rows skipped.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440620879, "post_id": 32236063, "comment_id": 52354476, "body": "I need to drop ALL leading rows with &gt; 5 NaNs, not just first one."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440621175, "post_id": 32236063, "comment_id": 52354655, "body": "I believe the term &#39;leading rows&#39; is a bit misleading. Perhaps just &#39;all rows&#39; with 6 or more NaNs?  If so, the edit above should work where I simply changed idx[0] to idx in the <code>drop</code> statement."}, {"owner": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440621570, "post_id": 32236063, "comment_id": 52354862, "body": "No. I specifically mean &#39;leading rows&#39;. For &#39;all rows&#39; I can simply use the df.dropna(thresh = 5). However, this is not the desired output for my question."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440622112, "post_id": 32236063, "comment_id": 52355132, "body": "Can you please clarify your definition of &#39;leading rows&#39;?"}, {"owner": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440622279, "post_id": 32236063, "comment_id": 52355218, "body": "The first &#39;n&#39; rows which satisfy the condition. If any 1 row doesn&#39;t satisfy the condition, then any row after that row also doesn&#39;t satisfy the condition."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440623293, "post_id": 32236063, "comment_id": 52355700, "body": "What if there was a row on top of the DataFrame (e.g. 1991-09-30) that only had 5 NaNs, i.e. it is a vaild row.  Should it be dropped, or retained?"}, {"owner": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "edited": false, "score": 0, "creation_date": 1440623881, "post_id": 32236063, "comment_id": 52355988, "body": "Retained. Furthermore, no row should be dropped since leading row doesn&#39;t have more than 5 NaNs."}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1440624604, "last_edit_date": 1440624604, "creation_date": 1440620681, "answer_id": 32236063, "question_id": 32235229, "link": "https://stackoverflow.com/questions/32235229/pandas-drop-leading-rows-with-nan-threshold-in-dataframe/32236063#32236063", "title": "Pandas: Drop leading rows with NaN threshold in dataframe", "body": "<p>Assuming the column named <code>Index</code> is actually the index, you can count the number of null values in each row and select those that are greater than your threshold.  If any are returned, drop the first one (i.e. the leading row).</p>\n\n<pre><code>idx = df[df.isnull().sum(axis=1) &lt;= 5].index\nif len(idx) &gt; 0:\n    df = df.ix[idx[0]:]\n\n&gt;&gt;&gt; df\n              Col1     Col2     Col3  Col4  Col5  Col6  Col7  Col8\nIndex                                                             \n1992-02-29  97.602  100.230   98.713   NaN   NaN   NaN   NaN   NaN\n1992-03-31  93.473      NaN  102.060   NaN   NaN   NaN   NaN   NaN\n1992-04-30  94.529  102.205  107.755   NaN   NaN   NaN   NaN   NaN\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 2367532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9a6db9fe518eeea08624d16d611ee1?s=128&d=identicon&r=PG", "display_name": "puneet", "link": "https://stackoverflow.com/users/2367532/puneet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1737, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440624604, "creation_date": 1440617617, "last_edit_date": 1440620529, "question_id": 32235229, "link": "https://stackoverflow.com/questions/32235229/pandas-drop-leading-rows-with-nan-threshold-in-dataframe", "title": "Pandas: Drop leading rows with NaN threshold in dataframe", "body": "<p>I have a Pandas Dataframe with intermittent NaN values:</p>\n\n<pre><code>Index       Col1     Col2      Col3    Col4  Col5  Col6  Col7  Col8 \n1991-12-31  100.000  100.000    NaN     NaN   NaN   NaN   NaN   NaN                     \n1992-01-31   98.300  101.530    NaN     NaN   NaN   NaN   NaN   NaN                     \n1992-02-29   97.602  100.230   98.713   NaN   NaN   NaN   NaN   NaN                     \n1992-03-31   93.473    NaN    102.060   NaN   NaN   NaN   NaN   NaN                     \n1992-04-30   94.529  102.205  107.755   NaN   NaN   NaN   NaN   NaN\n</code></pre>\n\n<p>I'd like to drop leading rows with 6 NaNs or more. Specifically, in this case, I'd only like to drop row with Indices '1991-12-31' and '1992-01-31'.</p>\n\n<p>Using df.dropna(thresh = 6) doesn't work because it drops row '1992-03-31' as well.</p>\n\n<p>One solution would be to count the NaNs in each row and stop at the first row when the number of NaNs is less than 6.</p>\n\n<p>Any faster/cleaner solution?</p>\n\n<p>EDIT: Edited for clarity and @Alexander's comment</p>\n"}, {"tags": ["python", "ipython-notebook"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "edited": false, "score": 0, "creation_date": 1440618985, "post_id": 32235195, "comment_id": 52353479, "body": "How about using ipy_table?  See <a href=\"http://epmoyer.github.io/ipy_table/\" rel=\"nofollow noreferrer\">epmoyer.github.io/ipy_table</a>"}, {"owner": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "edited": false, "score": 0, "creation_date": 1440619820, "post_id": 32235195, "comment_id": 52353918, "body": "Oh this is a workaround! But ideally, I would like to do it without any additional library. So that when I distribute my notebook, others don&#39;t have a trouble."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4322779"}, "edited": false, "score": 1, "creation_date": 1440620661, "post_id": 32235195, "comment_id": 52354343, "body": "You can put raw HTML in a markdown cell including an HTML table.  Examples of HTML table format are at <a href=\"http://www.w3schools.com/html/html_tables.asp\" rel=\"nofollow noreferrer\">w3schools.com/html/html_tables.asp</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "edited": false, "score": 0, "creation_date": 1440637162, "post_id": 32237054, "comment_id": 52360096, "body": "Awesome! Thank you Mr cchi!"}], "tags": [], "owner": {"reputation": 771, "user_id": 3761363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oBCdD.png?s=128&g=1", "display_name": "cchi", "link": "https://stackoverflow.com/users/3761363/cchi"}, "is_accepted": true, "score": 1, "last_activity_date": 1440624681, "creation_date": 1440624681, "answer_id": 32237054, "question_id": 32235195, "link": "https://stackoverflow.com/questions/32235195/create-a-table-containing-pipes-on-ipython-notebook/32237054#32237054", "title": "Create a table containing pipes on ipython notebook", "body": "<p>Use the escaped pipe version <code>&amp;#124;</code> to display the pipe characters properly when table is rendered for ipython notebook markdown cells.</p>\n\n<pre><code>identifier | class name | args | distance function\n------------|------------------|-------------------\n\u00e2\u20ac\u0153euclidean\u00e2\u20ac | EuclideanDistance | | sqrt(sum((x - y)^2))\n\u00e2\u20ac\u0153minkowski\u00e2\u20ac | MinkowskiDistance |p| sum(&amp;#124;x - y&amp;#124;^p)^(1/p)\n</code></pre>\n\n<p>*make sure you get rid of the tick marks.</p>\n\n<p>Outcome in notebook should display as such:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZvKpS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZvKpS.png\" alt=\"ipython markdown - table containing pipes \"></a></p>\n"}], "owner": {"reputation": 3022, "user_id": 3128336, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/da43d8bffd22132c457e8ac6e55322b6?s=128&d=identicon&r=PG&f=1", "display_name": "E.K.", "link": "https://stackoverflow.com/users/3128336/e-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 32237054, "answer_count": 1, "score": 1, "last_activity_date": 1489872316, "creation_date": 1440617489, "last_edit_date": 1489872316, "question_id": 32235195, "link": "https://stackoverflow.com/questions/32235195/create-a-table-containing-pipes-on-ipython-notebook", "title": "Create a table containing pipes on ipython notebook", "body": "<p>When I create a table in ipython notebook, how can I escape pipes inside of text. </p>\n\n<p>This is what I have</p>\n\n<pre><code>identifier | class name | args | distance function\n------------|------------------|-------------------\n\u201ceuclidean\u201d | EuclideanDistance | | sqrt(sum((x - y)^2))\n\u201cminkowski\u201d | MinkowskiDistance |p| `sum(|x - y|^p)^(1/p)`\n</code></pre>\n\n<p>It comes out as like below but obviously sum(|x - y|^p)^(1/p) is a formula and all the texts need to stay together...</p>\n\n<p><a href=\"https://i.stack.imgur.com/I5XTR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I5XTR.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "xml", "xpath"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 1, "creation_date": 1440617880, "post_id": 32235102, "comment_id": 52352898, "body": "Can you show us what xpath expression you&#39;ve tried so far?  There&#39;s really no magic in terms of figuring one out; you just need to look at the HTML code carefully and construct a path that matches the structure of the document."}, {"owner": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "reply_to_user": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1440618121, "post_id": 32235102, "comment_id": 52353026, "body": "Yeah, I edited it to show some of the paths I&#39;ve tried before, those are gotten using &quot;copy xpath&quot; in the inspect element browser of chrome."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "edited": false, "score": 0, "creation_date": 1440620190, "post_id": 32235552, "comment_id": 52354104, "body": "Okay wow thanks! That answers my question. However, I do have a couple of questions about the solution. First, at the end of the loop statement, what does <code>[1:]:</code> mean? Second, I get that in order to traverse a table you&#39;d have one variable for row and one for column, but why when we&#39;re assigning state and capital do we have that second variable set to 0 and not some sort of iterator? I&#39;m fairly new to Python coming from a C++ background so forgive me if the answer is obvious. Thanks again!"}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "reply_to_user": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "edited": false, "score": 1, "creation_date": 1440623038, "post_id": 32235552, "comment_id": 52355578, "body": "If you have a list in some variable <code>var</code>, then <code>var[1:]</code> means &quot;everything but the first element&quot;. In this case, the first row of the table is the headers, so we discard that. I&#39;m not sure what you mean by &quot;...second variable set to 0&quot;; I&#39;m not setting any variables to 0."}, {"owner": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "edited": false, "score": 0, "creation_date": 1440624830, "post_id": 32235552, "comment_id": 52356396, "body": "Thanks. What I mean by setting it to 0 is in the line <code>st = row[0][0].text</code> I understand why the first one is 0 because that&#39;s where the state column is, but why is the second one 0? If that&#39;s where the particular state is wouldn&#39;t that be the value iterated as you were going through <code>tree.xpath</code>."}, {"owner": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "edited": false, "score": 0, "creation_date": 1440625233, "post_id": 32235552, "comment_id": 52356569, "body": "Oh wait, I think I got it. What it is is what you were saying here:  &quot;That is the first child of the row (which is a &lt;td&gt; element), and then first child of that (which is an &lt;a&gt; element), and then the text content of that element.&quot;  so they have to deal with how elements are gotten from the html?"}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "reply_to_user": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "edited": false, "score": 1, "creation_date": 1440625453, "post_id": 32235552, "comment_id": 52356671, "body": "Right. <code>row[0]</code> is <code>&lt;td&gt;&lt;a&gt;...&lt;&#47;a&gt;&lt;&#47;td&gt;</code>. <code>row[0][0]</code> is <code>&lt;a&gt;...&lt;&#47;a&gt;</code>.  And sure, you have to deal with the structure of the document...like I said earlier, no magic! You could use additional xpath expressions (<code>row.xpath(&#39;td[1]&#47;a&#47;text()&#39;)</code>) here instead of indexes like this and get the same result."}, {"owner": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "edited": false, "score": 0, "creation_date": 1440625529, "post_id": 32235552, "comment_id": 52356711, "body": "Awesome! Thanks so much @larsks ! You were very helpful!"}], "tags": [], "owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "is_accepted": true, "score": 1, "last_activity_date": 1440618884, "creation_date": 1440618884, "answer_id": 32235552, "question_id": 32235102, "link": "https://stackoverflow.com/questions/32235102/webscraping-with-xpath-in-python/32235552#32235552", "title": "Webscraping with Xpath in Python", "body": "<p>Start with an expression that will get you the table.  Here's one that works:</p>\n\n<pre><code>&gt;&gt;&gt; tree.xpath('//div[@id=\"mw-content-text\"]/table[1]')\n[&lt;Element table at 0x7f9dd7322578&gt;]\n</code></pre>\n\n<p>You want the first table in that <code>div</code> (hence the <code>[1]</code>) and there does not appear to be a <code>tbody</code> element there.</p>\n\n<p>You could iterate over the rows in that table like this:</p>\n\n<pre><code>for row in tree.xpath('//div[@id=\"mw-content-text\"]/table[1]/tr')[1:]:\n</code></pre>\n\n<p>Within that loop, the state name is:</p>\n\n<pre><code>row[0][0].text\n</code></pre>\n\n<p>That is the first child of the row (which is a <code>&lt;td&gt;</code> element), and then first child of that (which is an <code>&lt;a&gt;</code> element), and then the text content of that element.</p>\n\n<p>And the capital is:</p>\n\n<pre><code>row[3][0].text\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>&gt;&gt;&gt; for row in tree.xpath('//div[@id=\"mw-content-text\"]/table[1]/tr')[1:]:\n...   st = row[0][0].text\n...   cap = row[3][0].text\n...   print 'The capital of %s is %s' % (st, cap)\nThe capital of Alabama is Montgomery\nThe capital of Alaska is Juneau\nThe capital of Arizona is Phoenix\n[...]\n</code></pre>\n\n<p>You can get all the state names like this:</p>\n\n<pre><code>&gt;&gt;&gt; tree.xpath('//div[@id=\"mw-content-text\"]/table[1]/tr/td[1]/a/text()')\n['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming']\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 2777912, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/007a8a2e94201d78ecba9937ac4583cf?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueSign", "link": "https://stackoverflow.com/users/2777912/theonetruesign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 0, "accepted_answer_id": 32235552, "answer_count": 1, "score": 0, "last_activity_date": 1440618884, "creation_date": 1440617180, "last_edit_date": 1440618130, "question_id": 32235102, "link": "https://stackoverflow.com/questions/32235102/webscraping-with-xpath-in-python", "title": "Webscraping with Xpath in Python", "body": "<p>From what I've seen the method to derive a path for Xpath to scrape a page  is not totally clear to me. I'm trying to use Xpath in python to scrape the wikipedia article for states and capitals to get a list of states and a list of capitals, but so far I've had no luck when trying to figure out the correct path to use. I've tried inspecting the element and copying the Xpath there but I still have had no luck. I'm looking for someone to explain a method to figure out the correct xpath to use to grab certain elements in a page.</p>\n\n<pre><code>from lxml import html\nimport requests\n\npage = requests.get('https://en.wikipedia.org/wiki/List_of_capitals_in_the_United_States')\ntree = html.fromstring(page.text)\n\n#creating list of states\nstate = tree.xpath('xpath')\n#list of capitals\ncapital = tree.xpath('xpath')\n\nprint 'State: ', state\nprint 'Capital: ', capital\n</code></pre>\n\n<p>Two of the xpaths I've tried so far have been:</p>\n\n<pre><code>//*[@id=\"mw-content-text\"]/table[1]/tbody/tr[1]/td[1]/a\n\n//*[@id=\"mw-content-text\"]/table[1]/tbody/tr[1]/td[2]\n</code></pre>\n"}, {"tags": ["python", "exception", "exception-handling", "generator", "stopiteration"], "comments": [{"owner": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 2, "creation_date": 1440617425, "post_id": 32235100, "comment_id": 52352640, "body": "Why not raise a different kind of error like a <code>ValueError</code> maybe? that way you can do a <code>try .. except ValueError: ..</code>"}, {"owner": {"reputation": 915, "user_id": 2124252, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/680a0166e64b3e5d85de364b55cbac60?s=128&d=identicon&r=PG&f=1", "display_name": "Mo2", "link": "https://stackoverflow.com/users/2124252/mo2"}, "reply_to_user": {"reputation": 2259, "user_id": 3646530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/668f24062be0d0ff0f30e04af21a2d30?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinjv", "link": "https://stackoverflow.com/users/3646530/ashwinjv"}, "edited": false, "score": 0, "creation_date": 1440619245, "post_id": 32235100, "comment_id": 52353617, "body": "@hgwells I thought about that shortly before you mentioned it. After thinking about it some more, I couldn&#39;t find a reason not to do what you suggested. Not sure if I should delete the question now."}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440629437, "post_id": 32235100, "comment_id": 52358162, "body": "The tupel for <code>yield</code> seems to be missing a second value.  And the <code>else</code> branch could be a one liner: <code>return (p.split() for p in parse_my_string(some_str))</code>"}, {"owner": {"reputation": 915, "user_id": 2124252, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/680a0166e64b3e5d85de364b55cbac60?s=128&d=identicon&r=PG&f=1", "display_name": "Mo2", "link": "https://stackoverflow.com/users/2124252/mo2"}, "reply_to_user": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1440687208, "post_id": 32235100, "comment_id": 52385783, "body": "@BlackJack the missing value is a typo. Thanks. The rest of the code was shortened just to get the point across. The actual code is a bit longer."}], "answers": [{"tags": [], "owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "is_accepted": false, "score": 3, "last_activity_date": 1453013690, "creation_date": 1453013690, "answer_id": 34835943, "question_id": 32235100, "link": "https://stackoverflow.com/questions/32235100/capture-stopiteration-error-message-in-for-loop/34835943#34835943", "title": "Capture StopIteration Error Message in For Loop", "body": "<p>You cannot do this in a for loop - because a for loop will implicitly catch the StopIteration exception.</p>\n\n<p>One possible way to do this is with an infinite while:</p>\n\n<pre><code>while True:\n    try:\n        obj = next(my_gen)\n    except StopIteration:\n        break\n\nprint('Done')\n</code></pre>\n\n<p>Or you can use any number of <a href=\"https://docs.python.org/2/library/itertools.html\" rel=\"nofollow\">consumers from the itertools library</a> - have a look at the recipe section at the bottom for examples.</p>\n"}], "owner": {"reputation": 915, "user_id": 2124252, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/680a0166e64b3e5d85de364b55cbac60?s=128&d=identicon&r=PG&f=1", "display_name": "Mo2", "link": "https://stackoverflow.com/users/2124252/mo2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3425, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1453013690, "creation_date": 1440617175, "last_edit_date": 1453011788, "question_id": 32235100, "link": "https://stackoverflow.com/questions/32235100/capture-stopiteration-error-message-in-for-loop", "title": "Capture StopIteration Error Message in For Loop", "body": "<p>I have code similar to this structure:</p>\n\n<pre><code>def my_gen(some_str):\n    if some_str == \"\":\n        raise StopIteration(\"Input was empty\")\n    else:\n        parsed_list = parse_my_string(some_str)\n        for p in parsed_list:\n            x, y = p.split()\n            yield x, y\n\nfor x, y in my_gen()\n    # do stuff\n    # I want to capture the error message from StopIteration if it was raised manually\n</code></pre>\n\n<p>Is it possible to do this by using a for loop? I couldn't find a case similar to this elsewhere.\nIf using a for loop isn't possible, what are some other alternatives?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 41246, "user_id": 129655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa81588f4aa842d08c9539f9313df4cc?s=128&d=identicon&r=PG", "display_name": "Platinum Azure", "link": "https://stackoverflow.com/users/129655/platinum-azure"}, "edited": false, "score": 1, "creation_date": 1440617315, "post_id": 32235033, "comment_id": 52352575, "body": "You also have a different problem. Note that you never use the variable <code>x</code> in your function, meaning whatever result is returned does not depend on the input word. You would also probably do better declaring <code>total</code> inside of the function, so that you can calculate a different total each time the function is called."}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1440617378, "post_id": 32235033, "comment_id": 52352609, "body": "You&#39;re also returning <code>i</code> which means you&#39;re just returning the last score."}], "answers": [{"tags": [], "owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "is_accepted": false, "score": 0, "last_activity_date": 1440617231, "creation_date": 1440617231, "answer_id": 32235121, "question_id": 32235033, "link": "https://stackoverflow.com/questions/32235033/creating-a-python-scrabble-function-that-takes-a-string-as-input-and-returns-a-s/32235121#32235121", "title": "Creating a python scrabble function that takes a string as input and returns a score for that word", "body": "<p>You have <code>total += i</code> but there is no variable named <code>total</code> in scope at this point.  Consider initializing it with <code>total=0</code> before the loop.  Or, declare <code>total</code> as a global variable.</p>\n\n<p>Also, your loop does not appear to be considering the value of <code>x</code>, so all it's going to do is calculate the total of all possible scores.</p>\n\n<p>And then return an index instead of the total.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5012399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4e401b15de9957b8be412149d65807?s=128&d=identicon&r=PG&f=1", "display_name": "P Ramos", "link": "https://stackoverflow.com/users/5012399/p-ramos"}, "edited": false, "score": 0, "creation_date": 1440691199, "post_id": 32235176, "comment_id": 52388593, "body": "just to clarify for &quot;total+= SCORES[letter]"}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "reply_to_user": {"reputation": 31, "user_id": 5012399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4e401b15de9957b8be412149d65807?s=128&d=identicon&r=PG&f=1", "display_name": "P Ramos", "link": "https://stackoverflow.com/users/5012399/p-ramos"}, "edited": false, "score": 0, "creation_date": 1440713138, "post_id": 32235176, "comment_id": 52400210, "body": "@PRamos, I don&#39;t understand what you mean."}], "tags": [], "owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "is_accepted": false, "score": 3, "last_activity_date": 1440617415, "creation_date": 1440617415, "answer_id": 32235176, "question_id": 32235033, "link": "https://stackoverflow.com/questions/32235033/creating-a-python-scrabble-function-that-takes-a-string-as-input-and-returns-a-s/32235176#32235176", "title": "Creating a python scrabble function that takes a string as input and returns a score for that word", "body": "<p>You need to put <code>total = 0</code> <em>inside</em> the function, and you need to loop through the <em>input word</em>, then add each letter's score from the dictionary. You also need to return <code>total</code>, not <code>i</code>.</p>\n\n<pre><code>SCORES = {\"a\": 1, \"c\": 3, \"b\": 3, \"e\": 1, \"d\": 2, \"g\": 2, \n          \"f\": 4, \"i\": 1, \"h\": 4, \"k\": 5, \"j\": 8, \"m\": 3, \n          \"l\": 1, \"o\": 1, \"n\": 1, \"q\": 10, \"p\": 3, \"s\": 1, \n          \"r\": 1, \"u\": 1, \"t\": 1, \"w\": 4, \"v\": 4, \"y\": 4, \n          \"x\": 8, \"z\": 10}\n\ndef scrabble_score(word):\n    total = 0\n    for letter in word:\n        total += SCORES[letter]\n    return total\n</code></pre>\n\n<p>Here's another way to do it, to keep in mind for the future:</p>\n\n<pre><code>def scrabble_score(word):\n    return sum(SCORES[letter] for letter in word)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1751, "user_id": 3586325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3CRVr.jpg?s=128&g=1", "display_name": "Buzz", "link": "https://stackoverflow.com/users/3586325/buzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1440618907, "last_edit_date": 1440618907, "creation_date": 1440617500, "answer_id": 32235200, "question_id": 32235033, "link": "https://stackoverflow.com/questions/32235033/creating-a-python-scrabble-function-that-takes-a-string-as-input-and-returns-a-s/32235200#32235200", "title": "Creating a python scrabble function that takes a string as input and returns a score for that word", "body": "<p>When you use a dictionary, you don't need to loop through it. the way to access a dictionary value is very simple. For example in the dictionary you have:</p>\n\n<pre><code>score = {\"a\": 1, \"c\": 3, \"b\": 3, \"e\": 1, \"d\": 2, \"g\": 2, \n         \"f\": 4, \"i\": 1, \"h\": 4, \"k\": 5, \"j\": 8, \"m\": 3, \n         \"l\": 1, \"o\": 1, \"n\": 1, \"q\": 10, \"p\": 3, \"s\": 1, \n         \"r\": 1, \"u\": 1, \"t\": 1, \"w\": 4, \"v\": 4, \"y\": 4, \n         \"x\": 8, \"z\": 10}\n</code></pre>\n\n<p>if you wanted to get the value for 'a' all you would have to do is:\n<code>score['a']</code> this will return the value that is set for the key 'a', you would get <code>1</code>. if you wanted to use variables you could do something like this:</p>\n\n<pre><code>test='b'\ntotal=score[test]\nprint(total)\n</code></pre>\n\n<p>you would get:</p>\n\n<pre><code>3\n</code></pre>\n\n<p>all you have to do is loop through the String that you have and call each letter and add them to the total.\nmake sure you set the total to <code>0</code> before you start too or else you would get errors. once you are done looping through each letter in the word return the total.</p>\n"}], "owner": {"reputation": 31, "user_id": 5012399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4e401b15de9957b8be412149d65807?s=128&d=identicon&r=PG&f=1", "display_name": "P Ramos", "link": "https://stackoverflow.com/users/5012399/p-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17971, "favorite_count": 1, "closed_date": 1440696765, "answer_count": 3, "score": 0, "last_activity_date": 1440618907, "creation_date": 1440616958, "question_id": 32235033, "link": "https://stackoverflow.com/questions/32235033/creating-a-python-scrabble-function-that-takes-a-string-as-input-and-returns-a-s", "closed_reason": "Duplicate", "title": "Creating a python scrabble function that takes a string as input and returns a score for that word", "body": "<p>Hi i am working on Codecademy exercise 9/15. The goal is to create a scrabble function that takes a string as input then returns a score for that word. </p>\n\n<p>They give you a dictionary to start off with and this is what I have so far after searching for \"how to loop through a dictionary and add values\" on google.</p>\n\n<pre><code>score = {\"a\": 1, \"c\": 3, \"b\": 3, \"e\": 1, \"d\": 2, \"g\": 2, \n         \"f\": 4, \"i\": 1, \"h\": 4, \"k\": 5, \"j\": 8, \"m\": 3, \n         \"l\": 1, \"o\": 1, \"n\": 1, \"q\": 10, \"p\": 3, \"s\": 1, \n         \"r\": 1, \"u\": 1, \"t\": 1, \"w\": 4, \"v\": 4, \"y\": 4, \n         \"x\": 8, \"z\": 10}\n\n\n\n\n1) total = 0 # takes your input word value and saves it to total \n\n\n2) def scrabble_score(x):       # defining function name \n3)     for i in score.values(): # loops through score           \n4)         total += i           # sums up your input key value\n5)     return i \n</code></pre>\n\n<p>this code keeps throwing a local variable total error.</p>\n\n<p>does this mean that the total variable does not work with the scrabble_score(x) function? </p>\n"}, {"tags": ["python", "arrays", "swig"], "comments": [{"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1440619075, "post_id": 32234996, "comment_id": 52353521, "body": "<a href=\"http://www.swig.org/Doc1.3/SWIG.html#SWIG_nn18\" rel=\"nofollow noreferrer\">swig.org/Doc1.3/SWIG.html#SWIG_nn18</a> It&#39;s a pointer, you can&#39;t use normal indexing of it. If the array is only 2 big, why are you using an array at all?"}, {"owner": {"reputation": 245, "user_id": 2658028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/558dddbff9542e95da19acca02868e51?s=128&d=identicon&r=PG", "display_name": "slowstart", "link": "https://stackoverflow.com/users/2658028/slowstart"}, "reply_to_user": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1440624642, "post_id": 32234996, "comment_id": 52356314, "body": "@Natecat array of 2 elements is only an example/simplification. My actual code uses a larger array."}], "answers": [{"tags": [], "owner": {"reputation": 245, "user_id": 2658028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/558dddbff9542e95da19acca02868e51?s=128&d=identicon&r=PG", "display_name": "slowstart", "link": "https://stackoverflow.com/users/2658028/slowstart"}, "is_accepted": true, "score": 0, "last_activity_date": 1440802633, "creation_date": 1440802633, "answer_id": 32280921, "question_id": 32234996, "link": "https://stackoverflow.com/questions/32234996/swig-python-array-of-structure-in-a-union/32280921#32280921", "title": "swig/python array of structure in a union", "body": "<p>After some poking around I figured out that I need to extend struct bar to fix the issue. I was able to get my above sample code working with the following addition to foo_test.i. </p>\n\n<pre><code>%extend bar {\n   const bar __getitem__(int i) {\n      return $self[i];\n   }\n}\n</code></pre>\n\n<p>The one downside though is that I need to add such an extension for every structure that gets used as array. Still haven't figured out how to solve this generically for all array of structures.</p>\n"}], "owner": {"reputation": 245, "user_id": 2658028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/558dddbff9542e95da19acca02868e51?s=128&d=identicon&r=PG", "display_name": "slowstart", "link": "https://stackoverflow.com/users/2658028/slowstart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 32280921, "answer_count": 1, "score": 0, "last_activity_date": 1440802633, "creation_date": 1440616828, "question_id": 32234996, "link": "https://stackoverflow.com/questions/32234996/swig-python-array-of-structure-in-a-union", "title": "swig/python array of structure in a union", "body": "<p>I am a beginner in the world of swig/python and was trying to access an array of C-structure in python, but I get the following error:</p>\n\n<blockquote>\n  <p>TypeError: 'bar' object does not support indexing</p>\n</blockquote>\n\n<p>Here is a simplified version of what I am trying to do:</p>\n\n<p>foo.h:</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\ntypedef struct bar {\n   uint8_t val;\n}bar;\n\ntypedef struct foo {\n   union {\n      bar b[2];\n   } u;\n}foo;\n\nint fill_foo(foo *);\n</code></pre>\n\n<p>foo.c:</p>\n\n<pre><code>#include \"foo.h\"\n\nint\nfill_foo(foo *var)\n{\n   var-&gt;u.b[0].val = 10;\n   var-&gt;u.b[1].val = 20;\n   return 0;\n}\n</code></pre>\n\n<p>foo_test.i:</p>\n\n<pre><code>%module foo_test\n%{\n#include \"foo.h\"\n%}\n\n%include \"foo.h\"\n</code></pre>\n\n<p>foo.py:</p>\n\n<pre><code>import foo_test\nf = foo_test.foo()\nfoo_test.fill_foo(f)\nprint f.u.b[0]\n</code></pre>\n\n<p>I have read a few other posts about c-arrays and swig, but its not clear to me how     can i can solve this particular case. Would be glad if someone can help me out.</p>\n"}, {"tags": ["python", "django", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1440620415, "post_id": 32235888, "comment_id": 52354203, "body": "This does not address foreign keys pointing to the model. It more or less does the same thing as the other posted solution from what I can tell."}, {"owner": {"reputation": 2054, "user_id": 1048100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616647d3d53e5125d8b7bfb23ac7d13e?s=128&d=identicon&r=PG", "display_name": "beezz", "link": "https://stackoverflow.com/users/1048100/beezz"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1440621097, "post_id": 32235888, "comment_id": 52354610, "body": "Yes you are right, I edited my answer. It was not absolutely clear from your question the direction of foreign keys."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1440621232, "post_id": 32235888, "comment_id": 52354682, "body": "You&#39;re right, that wasn&#39;t clear. I think you&#39;re onto something. Because of the direction of the FKs here it seems like I need to do the <code>deepcopy</code> on them, or even set their pk to None so they get duplicated and not moved from one model to another."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1440621725, "post_id": 32235888, "comment_id": 52354938, "body": "I&#39;m concerned about the performance of this since it requires calling the <code>save()</code> function for each of these in a loop. I would prefer to do this with fewer database operations. See the latest edit to my question."}, {"owner": {"reputation": 2054, "user_id": 1048100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616647d3d53e5125d8b7bfb23ac7d13e?s=128&d=identicon&r=PG", "display_name": "beezz", "link": "https://stackoverflow.com/users/1048100/beezz"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1440622078, "post_id": 32235888, "comment_id": 52355113, "body": "Again you are right that might get db expensive when there&#39;s lot of fkeys. I edited my answer to use bulk_create method (<a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/dev/ref/models/querysets/&hellip;</a>)."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1440623291, "post_id": 32235888, "comment_id": 52355699, "body": "All right, you win. Between <code>self.__class__</code> to avoid too much coupling (explicit references to class names containing actual FKs) and <code>bulk_create</code> to reduce the number of queries required, I ended up with an acceptable solution. This seemed like so much work for something that should be reasonably simple. Sheesh, Django!"}], "tags": [], "owner": {"reputation": 2054, "user_id": 1048100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616647d3d53e5125d8b7bfb23ac7d13e?s=128&d=identicon&r=PG", "display_name": "beezz", "link": "https://stackoverflow.com/users/1048100/beezz"}, "is_accepted": true, "score": 4, "last_activity_date": 1440690406, "last_edit_date": 1440690406, "creation_date": 1440620033, "answer_id": 32235888, "question_id": 32234986, "link": "https://stackoverflow.com/questions/32234986/duplicate-django-model-instance-and-all-foreign-keys-pointing-to-it/32235888#32235888", "title": "Duplicate Django Model Instance and All Foreign Keys Pointing to It", "body": "<p>You can create new instance and save it like this</p>\n\n<pre><code>def duplicate(self):\n    kwargs = {}\n    for field in self._meta.fields:\n        kwargs[field.name] = getattr(self, field.name)\n        # or self.__dict__[field.name]\n    kwargs.pop('id')\n    new_instance = self.__class__(**kwargs)\n    new_instance.save()\n    # now you have id for the new instance so you can\n    # create related models in similar fashion\n    fkeys_qs = self.fkeys.all()\n    new_fkeys = []\n    for fkey in fkey_qs:\n        fkey_kwargs = {}\n        for field in fkey._meta.fields:\n            fkey_kwargs[field.name] = getattr(fkey, field.name)\n        fkey_kwargs.pop('id')\n        fkey_kwargs['foreign_key_field'] = new_instance.id\n        new_fkeys.append(fkey_qs.model(**fkey_kwargs))\n    fkeys_qs.model.objects.bulk_create(new_fkeys)\n    return new_instance\n</code></pre>\n\n<p>I'm not sure how it'll behave with ManyToMany fields. But for <em>simple</em> fields it works. And you can always <em>pop</em> the fields you are not interested in for your new instance.</p>\n\n<p>The bits where I'm iterating over <em>_meta.fields</em> may be done with copy but the important thing is to use the new <code>id</code> for the <code>foreign_key_field</code>.</p>\n\n<p>I'm sure it's programmatically possible to detect which fields are foreign keys to the <code>self.__class__</code> (<code>foreign_key_field</code>) but since you can have more of them it'll better to name the one (or more) explicitly.</p>\n"}, {"tags": [], "owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "is_accepted": false, "score": 4, "last_activity_date": 1440691678, "creation_date": 1440691678, "answer_id": 32254483, "question_id": 32234986, "link": "https://stackoverflow.com/questions/32234986/duplicate-django-model-instance-and-all-foreign-keys-pointing-to-it/32254483#32254483", "title": "Duplicate Django Model Instance and All Foreign Keys Pointing to It", "body": "<p>Although I accepted the other poster's answer (since it helped me get here), I wanted to post the solution I ended up with in case it helps someone else stuck in the same place.</p>\n\n<pre><code>def duplicate(self):\n    \"\"\"\n    Duplicate a model instance, making copies of all foreign keys pointing\n    to it. This is an in-place method in the sense that the record the\n    instance is pointing to will change once the method has run. The old\n    record is still accessible but must be retrieved again from\n    the database.\n    \"\"\"\n    # I had a known set of related objects I wanted to carry over, so I\n    # listed them explicitly rather than looping over obj._meta.fields\n    fks_to_copy = list(self.fkeys_a.all()) + list(self.fkeys_b.all())\n\n    # Now we can make the new record\n    self.pk = None\n    # Make any changes you like to the new instance here, then\n    self.save()\n\n    foreign_keys = {}\n    for fk in fks_to_copy:\n        fk.pk = None\n        # Likewise make any changes to the related model here\n        # However, we avoid calling fk.save() here to prevent\n        # hitting the database once per iteration of this loop\n        try:\n            # Use fk.__class__ here to avoid hard-coding the class name\n            foreign_keys[fk.__class__].append(fk)\n        except KeyError:\n            foreign_keys[fk.__class__] = [fk]\n\n    # Now we can issue just two calls to bulk_create,\n    # one for fkeys_a and one for fkeys_b\n    for cls, list_of_fks in foreign_keys.items():\n        cls.objects.bulk_create(list_of_fks)\n</code></pre>\n\n<p>What it looks like when you use it:</p>\n\n<pre><code>In [6]: model.id\nOut[6]: 4443\n\nIn [7]: model.duplicate()\n\nIn [8]: model.id\nOut[8]: 17982\n\nIn [9]: old_model = Model.objects.get(id=4443)\n\nIn [10]: old_model.fkeys_a.count()\nOut[10]: 2\n\nIn [11]: old_model.fkeys_b.count()\nOut[11]: 1\n\nIn [12]: model.fkeys_a.count()\nOut[12]: 2\n\nIn [13]: model.fkeys_b.count()\nOut[13]: 1\n</code></pre>\n\n<p>Model and related_model names changed to protect the innocent.</p>\n"}, {"comments": [{"owner": {"reputation": 629, "user_id": 5067822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pnwc0.png?s=128&g=1", "display_name": "Stephen G Tuggy", "link": "https://stackoverflow.com/users/5067822/stephen-g-tuggy"}, "edited": false, "score": 0, "creation_date": 1555007907, "post_id": 52761743, "comment_id": 97969172, "body": "This did not work for me with Django 1.8 and Python 2.7. Not surprising, I suppose...."}], "tags": [], "owner": {"reputation": 681, "user_id": 2193573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vl1ln.jpg?s=128&g=1", "display_name": "liquidki", "link": "https://stackoverflow.com/users/2193573/liquidki"}, "is_accepted": false, "score": 1, "last_activity_date": 1539265686, "creation_date": 1539265686, "answer_id": 52761743, "question_id": 32234986, "link": "https://stackoverflow.com/questions/32234986/duplicate-django-model-instance-and-all-foreign-keys-pointing-to-it/52761743#52761743", "title": "Duplicate Django Model Instance and All Foreign Keys Pointing to It", "body": "<p>I tried the other answers in Django 2.1/Python 3.6 and they didn't seem to copy one-to-many and many-to-many related objects (<code>self._meta.fields</code> doesn't include one-to-many related fields but <code>self._meta.get_fields()</code> does). Also, the other answers required prior knowledge of the related field name or knowledge of which foreign keys to copy.</p>\n\n<p>I wrote a way to do this in a more generic fashion, handling one-to-many and many-to-many related fields. Comments included, and suggestions welcome:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def duplicate_object(self):\n    \"\"\"\n    Duplicate a model instance, making copies of all foreign keys pointing to it.\n    There are 3 steps that need to occur in order:\n\n        1.  Enumerate the related child objects and m2m relations, saving in lists/dicts\n        2.  Copy the parent object per django docs (doesn't copy relations)\n        3a. Copy the child objects, relating to the copied parent object\n        3b. Re-create the m2m relations on the copied parent object\n\n    \"\"\"\n    related_objects_to_copy = []\n    relations_to_set = {}\n    # Iterate through all the fields in the parent object looking for related fields\n    for field in self._meta.get_fields():\n        if field.one_to_many:\n            # One to many fields are backward relationships where many child objects are related to the\n            # parent (i.e. SelectedPhrases). Enumerate them and save a list so we can copy them after\n            # duplicating our parent object.\n            print(f'Found a one-to-many field: {field.name}')\n\n            # 'field' is a ManyToOneRel which is not iterable, we need to get the object attribute itself\n            related_object_manager = getattr(self, field.name)\n            related_objects = list(related_object_manager.all())\n            if related_objects:\n                print(f' - {len(related_objects)} related objects to copy')\n                related_objects_to_copy += related_objects\n\n        elif field.many_to_one:\n            # In testing so far, these relationships are preserved when the parent object is copied,\n            # so they don't need to be copied separately.\n            print(f'Found a many-to-one field: {field.name}')\n\n        elif field.many_to_many:\n            # Many to many fields are relationships where many parent objects can be related to many\n            # child objects. Because of this the child objects don't need to be copied when we copy\n            # the parent, we just need to re-create the relationship to them on the copied parent.\n            print(f'Found a many-to-many field: {field.name}')\n            related_object_manager = getattr(self, field.name)\n            relations = list(related_object_manager.all())\n            if relations:\n                print(f' - {len(relations)} relations to set')\n                relations_to_set[field.name] = relations\n\n    # Duplicate the parent object\n    self.pk = None\n    self.save()\n    print(f'Copied parent object ({str(self)})')\n\n    # Copy the one-to-many child objects and relate them to the copied parent\n    for related_object in related_objects_to_copy:\n        # Iterate through the fields in the related object to find the one that relates to the\n        # parent model (I feel like there might be an easier way to get at this).\n        for related_object_field in related_object._meta.fields:\n            if related_object_field.related_model == self.__class__:\n                # If the related_model on this field matches the parent object's class, perform the\n                # copy of the child object and set this field to the parent object, creating the\n                # new child -&gt; parent relationship.\n                related_object.pk = None\n                setattr(related_object, related_object_field.name, self)\n                related_object.save()\n\n                text = str(related_object)\n                text = (text[:40] + '..') if len(text) &gt; 40 else text\n                print(f'|- Copied child object ({text})')\n\n    # Set the many-to-many relations on the copied parent\n    for field_name, relations in relations_to_set.items():\n        # Get the field by name and set the relations, creating the new relationships\n        field = getattr(self, field_name)\n        field.set(relations)\n        text_relations = []\n        for relation in relations:\n            text_relations.append(str(relation))\n        print(f'|- Set {len(relations)} many-to-many relations on {field_name} {text_relations}')\n\n    return self\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 428, "user_id": 6705092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYtdsKTv4V0/AAAAAAAAAAI/AAAAAAAAABA/paYhrwaj_14/photo.jpg?sz=128", "display_name": "Branko Radojevic", "link": "https://stackoverflow.com/users/6705092/branko-radojevic"}, "edited": false, "score": 0, "creation_date": 1594925696, "post_id": 55639207, "comment_id": 111305756, "body": "I have tried your solution, but I get this error: AttributeError: &#39;collections.OrderedDict&#39; object has no attribute &#39;has_key&#39;"}, {"owner": {"reputation": 629, "user_id": 5067822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pnwc0.png?s=128&g=1", "display_name": "Stephen G Tuggy", "link": "https://stackoverflow.com/users/5067822/stephen-g-tuggy"}, "reply_to_user": {"reputation": 428, "user_id": 6705092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYtdsKTv4V0/AAAAAAAAAAI/AAAAAAAAABA/paYhrwaj_14/photo.jpg?sz=128", "display_name": "Branko Radojevic", "link": "https://stackoverflow.com/users/6705092/branko-radojevic"}, "edited": false, "score": 0, "creation_date": 1595202876, "post_id": 55639207, "comment_id": 111384532, "body": "@BrankoRadojevic Looks like your answer is here: <a href=\"https://stackoverflow.com/a/33727186/5067822\">stackoverflow.com/a/33727186/5067822</a>  I wrote my code for Python 2. Sorry about that."}, {"owner": {"reputation": 629, "user_id": 5067822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pnwc0.png?s=128&g=1", "display_name": "Stephen G Tuggy", "link": "https://stackoverflow.com/users/5067822/stephen-g-tuggy"}, "reply_to_user": {"reputation": 428, "user_id": 6705092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYtdsKTv4V0/AAAAAAAAAAI/AAAAAAAAABA/paYhrwaj_14/photo.jpg?sz=128", "display_name": "Branko Radojevic", "link": "https://stackoverflow.com/users/6705092/branko-radojevic"}, "edited": false, "score": 1, "creation_date": 1595203121, "post_id": 55639207, "comment_id": 111384566, "body": "So in Python 3, <code>if children_to_clone.has_key(field.name):</code> becomes <code>if field.name in children_to_clone:</code>, I guess."}, {"owner": {"reputation": 428, "user_id": 6705092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vYtdsKTv4V0/AAAAAAAAAAI/AAAAAAAAABA/paYhrwaj_14/photo.jpg?sz=128", "display_name": "Branko Radojevic", "link": "https://stackoverflow.com/users/6705092/branko-radojevic"}, "edited": false, "score": 0, "creation_date": 1595514315, "post_id": 55639207, "comment_id": 111507072, "body": "Thanks. Will give it a try."}], "tags": [], "owner": {"reputation": 629, "user_id": 5067822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pnwc0.png?s=128&g=1", "display_name": "Stephen G Tuggy", "link": "https://stackoverflow.com/users/5067822/stephen-g-tuggy"}, "is_accepted": false, "score": 0, "last_activity_date": 1555008056, "creation_date": 1555008056, "answer_id": 55639207, "question_id": 32234986, "link": "https://stackoverflow.com/questions/32234986/duplicate-django-model-instance-and-all-foreign-keys-pointing-to-it/55639207#55639207", "title": "Duplicate Django Model Instance and All Foreign Keys Pointing to It", "body": "<p>Here is a somewhat simple-minded solution. This does not depend on any undocumented Django APIs. It assumes that you want to duplicate a single parent record, along with its child, grandchild, etc. records. You pass in a whitelist of classes that should actually be duplicated, in the form of a <code>list</code> of names of the one-to-many relationships on each parent object that point to its child objects. This code assumes that, given the above whitelist, the entire tree is self-contained, with no external references to worry about.</p>\n\n<p>One more thing about this code: it is truly recursive, in that it calls itself for each new level of descendants.</p>\n\n<pre><code>from collections import OrderedDict\n\ndef duplicate_model_with_descendants(obj, whitelist, _new_parent_pk=None):\n    kwargs = {}\n    children_to_clone = OrderedDict()\n    for field in obj._meta.get_fields():\n        if field.name == \"id\":\n            pass\n        elif field.one_to_many:\n            if field.name in whitelist:\n                these_children = list(getattr(obj, field.name).all())\n                if children_to_clone.has_key(field.name):\n                    children_to_clone[field.name] |= these_children\n                else:\n                    children_to_clone[field.name] = these_children\n            else:\n                pass\n        elif field.many_to_one:\n            if _new_parent_pk:\n                kwargs[field.name + '_id'] = _new_parent_pk\n        elif field.concrete:\n            kwargs[field.name] = getattr(obj, field.name)\n        else:\n            pass\n    new_instance = obj.__class__(**kwargs)\n    new_instance.save()\n    new_instance_pk = new_instance.pk\n    for ky in children_to_clone.keys():\n        child_collection = getattr(new_instance, ky)\n        for child in children_to_clone[ky]:\n            child_collection.add(duplicate_model_with_descendants(child, whitelist=whitelist, _new_parent_pk=new_instance_pk))\n    return new_instance\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>from django.db import models\n\nclass Book(models.Model)\n\nclass Chapter(models.Model)\n    book = models.ForeignKey(Book, related_name='chapters')\n\nclass Page(models.Model)\n    chapter = models.ForeignKey(Chapter, related_name='pages')\n\nWHITELIST = ['books', 'chapters', 'pages']\noriginal_record = models.Book.objects.get(pk=1)\nduplicate_record = duplicate_model_with_descendants(original_record, WHITELIST)\n</code></pre>\n"}], "owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5556, "favorite_count": 3, "accepted_answer_id": 32235888, "answer_count": 4, "score": 10, "last_activity_date": 1555008056, "creation_date": 1440616782, "last_edit_date": 1440690127, "question_id": 32234986, "link": "https://stackoverflow.com/questions/32234986/duplicate-django-model-instance-and-all-foreign-keys-pointing-to-it", "title": "Duplicate Django Model Instance and All Foreign Keys Pointing to It", "body": "<p>I want to create a method on a Django model, call it <code>model.duplicate()</code>, that duplicates the model instance, including all the foreign keys pointing to it. I know that you can do this:</p>\n\n<pre><code>def duplicate(self):\n   self.pk = None\n   self.save()\n</code></pre>\n\n<p>...but this way all the related models still point to the old instance.</p>\n\n<p>I can't simply save a reference to the original object because what <code>self</code> points to changes during execution of the method:</p>\n\n<pre><code>def duplicate(self):\n    original = self\n    self.pk = None\n    self.save()\n    assert original is not self    # fails\n</code></pre>\n\n<p>I could try to save a reference to just the related object:</p>\n\n<pre><code>def duplicate(self):\n    original_fkeys = self.fkeys.all()\n    self.pk = None\n    self.save()\n    self.fkeys.add(*original_fkeys)\n</code></pre>\n\n<p>...but this transfers them from the original record to the new one. I need them copied over and pointed at the new record.</p>\n\n<p>Several answers elsewhere (and here before I updated the question) have suggested using Python's <a href=\"https://docs.python.org/2/library/copy.html\" rel=\"noreferrer\"><code>copy</code></a>, which I suspect works for foreign keys <em>on this model</em>, but not foreign keys on another model pointing to it.</p>\n\n<pre><code>def duplicate(self):\n    new_model = copy.deepcopy(self)\n    new_model.pk = None\n    new_model.save()\n</code></pre>\n\n<p>If you do this <code>new_model.fkeys.all()</code> (to follow my naming scheme thus far) will be empty.</p>\n"}, {"tags": ["python", "ctypes"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1440634696, "post_id": 32234970, "comment_id": 52359584, "body": "The function prototype may use <code>intptr_t</code> or <code>int64_t</code>, but that doesn&#39;t prevent you from using <code>c_char_p</code> in ctypes. A <code>char *</code> pointer is passed as an integer address."}, {"owner": {"reputation": 10088, "user_id": 21028, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/996a5828870fa84ad3a597f7935a9a5e?s=128&d=identicon&r=PG", "display_name": "csl", "link": "https://stackoverflow.com/users/21028/csl"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1440672651, "post_id": 32234970, "comment_id": 52375162, "body": "Sure, but the use case for me is a bit different: I&#39;m JITing code and need to pass the address to an intermediate Python function that expects integers, which then assembles a call to a C function. I failed to mention that."}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 4, "creation_date": 1440628202, "post_id": 32235051, "comment_id": 52357759, "body": "Alternatively, use the buffer protocol: <code>ctypes.c_void_p.from_buffer(s).value</code>. Using <code>from_buffer</code> is about 3 times faster since <code>cast</code> is implemented using an FFI call. But for the difference to matter you&#39;d have to be doing this millions of times in a tight loop that does nothing else."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 9, "last_activity_date": 1440617015, "creation_date": 1440617015, "answer_id": 32235051, "question_id": 32234970, "link": "https://stackoverflow.com/questions/32234970/how-to-get-the-pointer-address-of-a-ctypes-c-char-p-instance/32235051#32235051", "title": "How to get the pointer address of a ctypes.c_char_p instance", "body": "<p>You could just cast it to <code>c_void_p</code> and get the value:</p>\n\n<pre><code>&gt;&gt;&gt; ctypes.cast(s, ctypes.c_void_p).value\n4333430692\n</code></pre>\n"}], "owner": {"reputation": 10088, "user_id": 21028, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/996a5828870fa84ad3a597f7935a9a5e?s=128&d=identicon&r=PG", "display_name": "csl", "link": "https://stackoverflow.com/users/21028/csl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3554, "favorite_count": 1, "accepted_answer_id": 32235051, "answer_count": 1, "score": 5, "last_activity_date": 1440617034, "creation_date": 1440616722, "last_edit_date": 1440617034, "question_id": 32234970, "link": "https://stackoverflow.com/questions/32234970/how-to-get-the-pointer-address-of-a-ctypes-c-char-p-instance", "title": "How to get the pointer address of a ctypes.c_char_p instance", "body": "<p>I want to extract the integer address that a <code>ctypes.c_char_p</code> instance points to.</p>\n\n<p>For example, in</p>\n\n<pre><code>&gt;&gt;&gt; import ctypes\n&gt;&gt;&gt; s = ctypes.c_char_p(\"hello\")\n&gt;&gt;&gt; s\nc_char_p(4333430692)\n</code></pre>\n\n<p>the value I'd like to fetch is <strong>4333430692</strong> \u2014 the address of the string <code>hello\\0</code> in memory:</p>\n\n<pre><code>(lldb) x 4333430692\n0x1024ae7a4: 68 65 6c 6c 6f 00 5f 70 00 00 00 00 05 00 00 00  hello._p........\n</code></pre>\n\n<p>I've read the ctypes docs, but there doesn't seem to be any way of doing that. The closest is <code>ctypes.addressof</code>, but that only gives me the location of the pointer, of course.</p>\n\n<p>The reason why I want this is because I'm calling some C functions that actually expects raw addresses encoded as integers (whose size equals the native pointer width).</p>\n"}, {"tags": ["python", "python-3.x", "delimited-text", "tab-delimited", "two-columns"], "comments": [{"owner": {"reputation": 15, "user_id": 5265877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5948ceb03ca4492152106ab1fb01fe02?s=128&d=identicon&r=PG&f=1", "display_name": "tbk", "link": "https://stackoverflow.com/users/5265877/tbk"}, "edited": false, "score": 0, "creation_date": 1440617056, "post_id": 32234928, "comment_id": 52352433, "body": "And, would love to know if there are reference books out there that would have examples like this along with their solutions (like a Python cook book of sorts).  There seem to be many...would appreciate recommendations to help narrow the field."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1440618217, "post_id": 32234928, "comment_id": 52353079, "body": "Do you want to actually change the original file?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1440618612, "post_id": 32234928, "comment_id": 52353266, "body": "Also is there ever more than one word before the <code>;</code>"}, {"owner": {"reputation": 15, "user_id": 5265877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5948ceb03ca4492152106ab1fb01fe02?s=128&d=identicon&r=PG&f=1", "display_name": "tbk", "link": "https://stackoverflow.com/users/5265877/tbk"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1440619555, "post_id": 32234928, "comment_id": 52353790, "body": "@Padraic - I don&#39;t want to change the original file.  Create a new file with the transformation.  And there could be multiple words delimited by <code>;</code> -- like <code>big firetruck;fast airplane;broken skateboard</code> but I think the solution proposed by Anand below takes that into account since he&#39;s defined that entire string as a column. Could be wrong tho.."}, {"owner": {"reputation": 15, "user_id": 5265877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5948ceb03ca4492152106ab1fb01fe02?s=128&d=identicon&r=PG&f=1", "display_name": "tbk", "link": "https://stackoverflow.com/users/5265877/tbk"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1440621015, "post_id": 32234928, "comment_id": 52354563, "body": "I tried with multi-worded strings and it seems to have worked as expected with the below solution. I think this is because the delimiter is explicitly defined as <code>\\t</code> for the CSV module (the input file was tab-delimited to begin with). So the spaces in the string are treated as part of a word."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1440621179, "post_id": 32234928, "comment_id": 52354657, "body": "I missed your file was tab delimited"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5265877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5948ceb03ca4492152106ab1fb01fe02?s=128&d=identicon&r=PG&f=1", "display_name": "tbk", "link": "https://stackoverflow.com/users/5265877/tbk"}, "edited": false, "score": 0, "creation_date": 1440619287, "post_id": 32235075, "comment_id": 52353643, "body": "Awesome! This definitely did the trick.  I&#39;m on a Windows machine, so I edited <code>r</code> and <code>w</code> to <code>rt</code> and <code>wt</code> and also added <code>newline = &#39;&#39;</code> so that my output didn&#39;t have empty lines in between the rows."}], "tags": [], "owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1440617098, "creation_date": 1440617098, "answer_id": 32235075, "question_id": 32234928, "link": "https://stackoverflow.com/questions/32234928/break-out-delimited-string-with-the-same-category-in-a-two-column-table-using-py/32235075#32235075", "title": "Break out delimited string with the same category in a two column table using Python 3", "body": "<p>You pseudo-code has lots of issues (not talking about syntax issues, but logical issues).</p>\n\n<p>I would use <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow\"><code>csv</code></a> module for this. Simply read each row, split the first columns based on <code>';'</code> , if there are no <code>';'</code> you would get a list of one element back, if there are <code>';'</code> you would get the split list back, and then write it back to the other csv by using that value with the <code>row[1]</code> (second element of the row). </p>\n\n<p>Example -</p>\n\n<pre><code>with open('colors_in.txt', 'r') as src, open('colors_out.txt', 'w') as dest:\n    reader = csv.reader(src,delimiter='\\t')\n    writer = csv.writer(dest,delimiter='\\t')\n    for row in reader:\n        for col1 in row[0].split(';'):\n            writer.writerow([col1,row[1]])\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5265877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5948ceb03ca4492152106ab1fb01fe02?s=128&d=identicon&r=PG&f=1", "display_name": "tbk", "link": "https://stackoverflow.com/users/5265877/tbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 32235075, "answer_count": 1, "score": 0, "last_activity_date": 1440617098, "creation_date": 1440616582, "question_id": 32234928, "link": "https://stackoverflow.com/questions/32234928/break-out-delimited-string-with-the-same-category-in-a-two-column-table-using-py", "title": "Break out delimited string with the same category in a two column table using Python 3", "body": "<p>I have a 2 column table that consists of items in the 1st column and color categories in the 2nd, with the item and colors tab-delimited:</p>\n\n<pre><code>car blue\nbicycle;scooter green\nboat yellow\nfiretruck;airplane;skateboard red\nmotorcycle black\n</code></pre>\n\n<p>I would like to transform the table/list to read:</p>\n\n<pre><code>car blue\nbicycle green\nscooter green\nboat yellow\nfiretruck red\nairplane red\nskateboard red\nmotorcycle black\n</code></pre>\n\n<p>I was thinking that I would need to have a function defined to handle the splitting of the delimited string in column 1 and writing the appropriate category in the 2nd column for each row/line.</p>\n\n<p>I think the logic essentially reads:</p>\n\n<pre><code>with open('colors_in.txt', 'rt') as src:\nwith open('colors_out.txt', 'wt') as dest:\n\n#store column 2 category in a variable and break apart the string at the delimiter in new lines + category\ndef splitter()\n    colorval = (row[1] for row in src)\n    for line in src:\n        for word in line.split(';'):\n            dest.write(word.rstrip() + colorval + '\\n')\n\nif \";\" in line:\n    splitter()\nelse:\n    for line in src:\n        dest.write(line)\n</code></pre>\n\n<p>I've looked around for approaches to this problem and saw some pretty complex elements involving numpy and imap() that I'm not really sure how to incorporate.  I know the above code is wildly incorrect -- just tried to express as best I could what I want the code to do/accomplish.  Would be grateful for any insight - thanks!</p>\n"}, {"tags": ["python", "sql", "relational-database"], "comments": [{"owner": {"reputation": 1815, "user_id": 4396198, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/764850e15b50a825921c737694ceafb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam cd", "link": "https://stackoverflow.com/users/4396198/sam-cd"}, "edited": false, "score": 0, "creation_date": 1440616468, "post_id": 32234863, "comment_id": 52352101, "body": "Why wouldn&#39;t you use a SQL module in Python like SQLite?"}, {"owner": {"reputation": 1805, "user_id": 1121864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28e2c901e484700286869d95e0d4affd?s=128&d=identicon&r=PG", "display_name": "Michael Robellard", "link": "https://stackoverflow.com/users/1121864/michael-robellard"}, "edited": false, "score": 0, "creation_date": 1440616777, "post_id": 32234863, "comment_id": 52352276, "body": "To be able to effectively answer this question we need to know what database/dbapi driver you are using and if you are using an ORM, which one are you using? Also how big is the dataset. If it&#39;s small will differ from if it&#39;s huge. This is also a veyr vague question because the way yo have worded it. Have you already written some code to read the CSV, if so please include it."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1440616844, "post_id": 32234863, "comment_id": 52352315, "body": "Please show us what you have so far and explain what you&#39;re stuck on."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1440618214, "post_id": 32234863, "comment_id": 52353075, "body": "I see you are relatively new to Stack Overflow. Stack Overflow is a question-and-answer site. Readers, such as yourself, ask questions and other readers attempt to answer them. Your post seems to be missing the key ingredient: a question. Do you have a specific question?"}, {"owner": {"reputation": 337, "user_id": 3911737, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tslf8.jpg?s=128&g=1", "display_name": "jnshsrs", "link": "https://stackoverflow.com/users/3911737/jnshsrs"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1440619860, "post_id": 32234863, "comment_id": 52353941, "body": "Good hint @Rob\u1d69, I&#39;m also new to python. My question is: Is there a convenient way or module to transform csv data to relational tables."}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1440631280, "last_edit_date": 1440631280, "creation_date": 1440625638, "answer_id": 32237246, "question_id": 32234863, "link": "https://stackoverflow.com/questions/32234863/create-sql-insert-script-with-python/32237246#32237246", "title": "Create SQL INSERT Script with python", "body": "<p>The modules <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow\"><code>csv</code></a> and <a href=\"https://docs.python.org/2/library/sqlite3.html\" rel=\"nofollow\"><code>sqlite3</code></a> should fit your needs. Here is a sample:</p>\n\n<pre><code>#!/usr/bin/env python2\n\nimport sqlite3\nimport csv\n\n\ndef quotify(s):\n    return '\"' + s.strip().replace('\"', '\"\"') + '\"'\n\ncon = sqlite3.connect(\"pets.db\")\n\n# Examle contents of pets.csv:\n# person_name, person_age, pet_name\n# Lisa, 8, Snowball I\n# Lisa, 8, Snowball II\n# Bart, 10, Santa's Little Helper\nwith open(\"pets.csv\") as pets:\n    pets = csv.reader(pets)\n    with con:\n        names = next(pets)\n        names = [name.decode('utf-8') for name in names]\n        for name in names:\n            con.execute('drop table if exists %s;' % quotify(name))\n            con.execute('create table %s (value unique on conflict ignore);'\n                        % quotify(name))\n        con.execute(\"drop table if exists master\")\n        st = \"create table master(%s);\" % (\n            ','.join(\"%s\" % quotify(name) for name in names))\n        con.execute(st)\n        for row in pets:\n            row = [item.decode('utf-8') for item in row]\n            rowids = []\n            for name, value in zip(names, row):\n                rowids.append(\n                    con.execute(\"insert into %s (value) values(?)\"\n                                % quotify(name),\n                                (value.strip(),)).lastrowid)\n            st = 'insert into master values(%s)' % (\n                ','.join('?' for rowid in rowids))\n            con.execute(st, rowids)\n\n# Demonstration, using Simpon's example from question:\nfrom pprint import pprint\nst = '''select person_name.value, person_age.value, pet_name.value\n          from person_name, person_age, pet_name, master\n         where master.person_name = person_name.rowid\n           and master.person_age = person_age.rowid\n           and master.pet_name = pet_name.rowid;'''\n\npprint(con.execute(st).fetchall())\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 3911737, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tslf8.jpg?s=128&g=1", "display_name": "jnshsrs", "link": "https://stackoverflow.com/users/3911737/jnshsrs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3547, "favorite_count": 0, "accepted_answer_id": 32237246, "answer_count": 1, "score": 0, "last_activity_date": 1440631280, "creation_date": 1440616368, "last_edit_date": 1440618901, "question_id": 32234863, "link": "https://stackoverflow.com/questions/32234863/create-sql-insert-script-with-python", "title": "Create SQL INSERT Script with python", "body": "<p>I have a csv file. I want to organize this (unnormalized) data in a relational manner with python:</p>\n\n<p>A ID should be created which connects the tables.</p>\n\n<p>For example split my data from the csv file and create a m:n relationship. My result should be three tables. </p>\n\n<p>The following example may clarify this:</p>\n\n<pre><code>person_name person_age, pet_name\nLisa, 8, Snowball I\nLisa, 8, Snowball II\nBart, 10, Santa's Little Helper\n</code></pre>\n\n<p>This should be the result:</p>\n\n<pre><code>person_ID, person_name, person age\n1, Lisa, 8\n2, Bart, 10\n\npet_ID, pet_Name\n1, Snowball I\n2, Snowball II\n3, Santa's Little Helper\n\nperson_ID, pet_ID\n1, 1\n1, 2\n2, 3\n</code></pre>\n\n<p>I want to know if there are modules in python or some code to accomplish this.</p>\n\n<p>EDIT:\nMy strategy so far was to create a mySQL script with a formatted strings. The code below shows how I created a INSERT script without assinging any new IDs or keys.</p>\n\n<pre><code>#!/usr/bin/env python \n# -*- coding: utf-8 -*- \nimport csv \n\n#set counter variable\ncntr = 0\n\n# open file to read\nmyfile = open('insert_bundesland.sql', 'w')\n\n# Create header\nmyfile.write('INSERT INTO tbl_local (loc_gemeindeschl_ID, loc_bundesland_ID,      loc_bundesland, loc_stadt, loc_stadt_status, loc_einwohner, loc_einwohner_m, loc_einwohner_w)\\n') \n\n# open csv file\nwith open('gem_schl.csv') as f:\n    reader = csv.reader(f)\n    # init for loop - loop over row\n    for row in reader:\n        # split if there is beside the name of city a status of the city\n        x = str.split(row[3], \",\")\n        if len(x) == 1:\n            # if there is no status assign NULL string value\n            x.append('NULL')\n        del row[3]\n        x = row + x\n        if  cntr == 0:\n            cntr = cntr + 1\n        else:\n            if cntr == 1:\n                # write sql statements \n                x = \"\\tVALUES\\t(%s, %s, '%s', '%s', '%s', %s, %s, %s)\\n\" % (x[2], x[0], x[1], x[11], x[12], x[3], x[4], x[5])\n                myfile.write(x)\n                cntr = cntr + 1\n            else:\n                 x = \"\\t\\t\\t(%s, %s, '%s', '%s', '%s', %s, %s, %s)\\n\" % (x[2], x[0], x[1], x[11], x[12], x[3], x[4], x[5])\n                 myfile.write(x)\nmyfile.write(';')\nmyfile.close()\n</code></pre>\n"}, {"tags": ["python", "data-processing"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4469634, "user_type": "registered", "profile_image": "https://graph.facebook.com/684285197/picture?type=large", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/4469634/amit-liber"}, "is_accepted": false, "score": 0, "last_activity_date": 1440954474, "last_edit_date": 1440954474, "creation_date": 1440617208, "answer_id": 32235115, "question_id": 32234860, "link": "https://stackoverflow.com/questions/32234860/using-python-to-find-specific-pattern-contained-in-a-paragraph/32235115#32235115", "title": "Using python to find specific pattern contained in a paragraph", "body": "<p>My suggestions is to use regular expressions (<a href=\"https://docs.python.org/2/howto/regex.html\" rel=\"nofollow\">regex</a>) in order to catch the required pattern:</p>\n\n<pre><code>import re #for using regular expressions\ns = open(&lt;filename here&gt;).read() #read the content of the file and hold it as a string to be scanned\np = re.compile(\"\\HF=[^\\]+\", re.flags)  #p would be the pattern as you described, starting with \\HF= till the next \\)\nprint p.findall(s) #finds all occurrences and prints them \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": 0, "last_activity_date": 1440955616, "creation_date": 1440955616, "answer_id": 32299297, "question_id": 32234860, "link": "https://stackoverflow.com/questions/32234860/using-python-to-find-specific-pattern-contained-in-a-paragraph/32299297#32299297", "title": "Using python to find specific pattern contained in a paragraph", "body": "<p>Regular expressions is the answer, something like r'/HF.*/'. </p>\n\n<p>Tutorial:- <a href=\"http://www.regular-expressions.info/tutorial.html\" rel=\"nofollow\">regex tutorial</a></p>\n\n<p>Once you have learned regex, it is an indispensable resource.</p>\n"}], "owner": {"reputation": 1, "user_id": 5270005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3aa5c6bd4ac14cd803138ac19c80608?s=128&d=identicon&r=PG&f=1", "display_name": "SM_CQC", "link": "https://stackoverflow.com/users/5270005/sm-cqc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1440955616, "creation_date": 1440616366, "last_edit_date": 1440617454, "question_id": 32234860, "link": "https://stackoverflow.com/questions/32234860/using-python-to-find-specific-pattern-contained-in-a-paragraph", "title": "Using python to find specific pattern contained in a paragraph", "body": "<p>I'm trying to use python to go through a file, find a specific piece of information and then print it to the terminal. The information I'm looking for is contained in a block that looks something like this:</p>\n\n<pre><code>\\\\Version=EM64L-G09RevD.01\\State=1-A1\\HF=-1159.6991675\\RMSD=4.915e-11\\RMSF=1.175e-07\\ZeroPoint=0.0353317\\\n</code></pre>\n\n<p>I would like to be able to get the information <code>HF=-1159.6991675</code>. More generally, I would like the script to copy and print <code>\\HF=WhateverTheNumberIs\\</code> </p>\n\n<p>I've managed to make scripts that are able to copy an entire line and print it out to the terminal, but I am unsure how to accomplish this particular task.</p>\n"}, {"tags": ["python", "api", "google-app-engine", "google-cloud-datastore"], "answers": [{"comments": [{"owner": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "edited": false, "score": 0, "creation_date": 1440624683, "post_id": 32236472, "comment_id": 52356339, "body": "How would I query using this type of approach? I&#39;ve seen the example but i&#39;m unsure of how to grab entities from say, my <code>Sections</code> table."}, {"owner": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "edited": false, "score": 0, "creation_date": 1440625456, "post_id": 32236472, "comment_id": 52356673, "body": "This code throws an error: <code>AttributeError: &#39;module&#39; object has no attribute &#39;set_default_dataset_id&#39;</code>"}, {"owner": {"reputation": 1615, "user_id": 1315987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BweMf.jpg?s=128&g=1", "display_name": "Sandeep Dinesh", "link": "https://stackoverflow.com/users/1315987/sandeep-dinesh"}, "reply_to_user": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "edited": false, "score": 0, "creation_date": 1440629918, "post_id": 32236472, "comment_id": 52358318, "body": "Check out the docs: <a href=\"https://googlecloudplatform.github.io/gcloud-python/stable/datastore-client.html\" rel=\"nofollow noreferrer\">googlecloudplatform.github.io/gcloud-python/stable/&hellip;</a>  Also, did you pip install gcloud?"}], "tags": [], "owner": {"reputation": 1615, "user_id": 1315987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BweMf.jpg?s=128&g=1", "display_name": "Sandeep Dinesh", "link": "https://stackoverflow.com/users/1315987/sandeep-dinesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1440622180, "creation_date": 1440622180, "answer_id": 32236472, "question_id": 32234790, "link": "https://stackoverflow.com/questions/32234790/google-datastore-api-authentication-in-python/32236472#32236472", "title": "Google Datastore API Authentication in Python", "body": "<p>You probably should not be using raw POST requests to use Datastore, instead use the <a href=\"https://github.com/GoogleCloudPlatform/gcloud-python\" rel=\"nofollow\">gcloud library</a> to do the heavy lifting for you.</p>\n\n<p>I would also recommend the <a href=\"https://cloud.google.com/python/\" rel=\"nofollow\">Python getting started page</a>, as it has some good tutorials.</p>\n\n<p>Finally, I recorded a podcast where I go over the basics of <a href=\"https://youtu.be/bMC_k0NBjKs?t=1494\" rel=\"nofollow\">using Datastore with Python</a>, check it out!</p>\n\n<p><a href=\"https://github.com/thesandlord/samples/tree/master/google-cloud-datastore/interactive-demo\" rel=\"nofollow\">Here is the code</a>, and here is an example:</p>\n\n<pre><code>#Import libraries\nfrom gcloud import datastore\nimport os\n\n#The next few lines will set up your environment variables\n#Replace \"YOUR_RPOEJCT_ID_HERE\" with the correct value in code.py\nos.environ[\"GOOGLE_APPLICATION_CREDENTIALS\"] = \"key.json\"\n\nprojectID = \"YOUR_RPOEJCT_ID_HERE\"\n\nos.environ[\"GCLOUD_TESTS_PROJECT_ID\"] = projectID\nos.environ[\"GCLOUD_TESTS_DATASET_ID\"] = projectID\ndatastore.set_default_dataset_id(projectID)\n\n#Let us build a message board / news website\n\n#First, create a fake email for our fake user\nemail = \"me@fake.com\"\n\n#Now, create a 'key' for that user using the email\nuser_key = datastore.Key('User', email)\n\n#Now create a entity using that key\nnew_user = datastore.Entity( key=user_key )\n\n#Add some fields to the entity\n\nnew_user[\"name\"] = unicode(\"Iam Fake\")\nnew_user[\"email\"] = unicode(email)\n\n#Push entity to the Cloud Datastore\ndatastore.put( new_user )\n\n#Get the user from datastore and print\nprint( datastore.get(user_key) )\n</code></pre>\n\n<p>This code is licensed under Apache v2</p>\n"}], "owner": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 32236472, "answer_count": 1, "score": 0, "last_activity_date": 1475211538, "creation_date": 1440616111, "last_edit_date": 1475211538, "question_id": 32234790, "link": "https://stackoverflow.com/questions/32234790/google-datastore-api-authentication-in-python", "title": "Google Datastore API Authentication in Python", "body": "<p>Authenticating requests, especially with Google's API's is so incredibly confusing!</p>\n\n<p>I'd like to make authorized HTTP POST requests through python in order to query data from the datastore. I've got a service account and p12 file all ready to go. I've looked at the examples, but it seems no matter which one I try, I'm always unauthorized to make requests.</p>\n\n<p>Everything works fine from the browser, so I know my permissions are all in order. So I suppose my question is, how do I authenticate, and request data securely from the Datastore API through python?</p>\n\n<p>I am so lost...</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4471354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/583871601f579b5bacc82203d32ad672?s=128&d=identicon&r=PG", "display_name": "Andy Kubiak", "link": "https://stackoverflow.com/users/4471354/andy-kubiak"}, "edited": false, "score": 0, "creation_date": 1440617895, "post_id": 32234972, "comment_id": 52352904, "body": "raises <code>TypeError sequence item 1: expected string, tuple found</code>, because line in z is a nested tuple, e.g. <code>(&#39;plotA   10\\n&#39;, (&#39;98%\\n&#39;, &#39;5&#47;10\\n&#39;, &#39;20\\n&#39;))</code>"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 169, "user_id": 4471354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/583871601f579b5bacc82203d32ad672?s=128&d=identicon&r=PG", "display_name": "Andy Kubiak", "link": "https://stackoverflow.com/users/4471354/andy-kubiak"}, "edited": false, "score": 0, "creation_date": 1440617968, "post_id": 32234972, "comment_id": 52352936, "body": "@AndyKubiak That&#39;s for before edit, the post has been edited years ago ;-)"}, {"owner": {"reputation": 169, "user_id": 4471354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/583871601f579b5bacc82203d32ad672?s=128&d=identicon&r=PG", "display_name": "Andy Kubiak", "link": "https://stackoverflow.com/users/4471354/andy-kubiak"}, "edited": false, "score": 1, "creation_date": 1440618841, "post_id": 32234972, "comment_id": 52353390, "body": "Yeah, saw your edit. Almost got there. Figured I&#39;d drop a little formatted cherry on top for ya."}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 5, "last_activity_date": 1440618833, "last_edit_date": 1440618833, "creation_date": 1440616736, "answer_id": 32234972, "question_id": 32234727, "link": "https://stackoverflow.com/questions/32234727/python-combine-text-files-specific-lines/32234972#32234972", "title": "Python - combine text files (specific lines)", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/itertools.html#itertools.izip\" rel=\"nofollow\"><code>itertools.izip_longest</code></a> to slice file 2 to triple lines and use again use it to zip them with first file :</p>\n\n<pre><code>from itertools import izip_longest\nwith open('file1.txt') as f1, open('file2.txt') as f2:\n\n     args = [iter(f2)] * 3\n     z = izip_longest(f1, izip_longest(*args), fillvalue='-')\n     for line, tup in z:\n           print '{:11}'.format(line.strip()), '{:5}{:5}{:&gt;5}'.format(*map(str.strip, tup))\n</code></pre>\n\n<p>And if you want to write this result to a new file you can open a file for write and instead of printing it write the line in file.</p>\n\n<p>Result :</p>\n\n<pre><code>plotA   10  98%  7/10    21\nplotB   9   98%  5/10    20\nplotC   9   98%  10/10   21\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1805, "user_id": 1121864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28e2c901e484700286869d95e0d4affd?s=128&d=identicon&r=PG", "display_name": "Michael Robellard", "link": "https://stackoverflow.com/users/1121864/michael-robellard"}, "edited": false, "score": 2, "creation_date": 1440617125, "post_id": 32234977, "comment_id": 52352474, "body": "I would change your &#39;123&#39; hack to range(3) for clarity, while the other may be faster, why confuse the situation."}, {"owner": {"reputation": 2647, "user_id": 248390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0defac4e8b7c8e21418a95762bc747d0?s=128&d=identicon&r=PG", "display_name": "bufh", "link": "https://stackoverflow.com/users/248390/bufh"}, "reply_to_user": {"reputation": 1805, "user_id": 1121864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28e2c901e484700286869d95e0d4affd?s=128&d=identicon&r=PG", "display_name": "Michael Robellard", "link": "https://stackoverflow.com/users/1121864/michael-robellard"}, "edited": false, "score": 0, "creation_date": 1440620934, "post_id": 32234977, "comment_id": 52354509, "body": "Thank&#39;s for your comment Michael, I though the comment after the code snipped would be clear enough even for a beginner, but you are probably right. Forgive me for leaving it as it, but @Kasramvd solution is way more pythonic and should be accepted :^)"}, {"owner": {"reputation": 127, "user_id": 4637031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C8Yid.png?s=128&g=1", "display_name": "Hawk81", "link": "https://stackoverflow.com/users/4637031/hawk81"}, "edited": false, "score": 0, "creation_date": 1440663777, "post_id": 32234977, "comment_id": 52369325, "body": "Thank you too @bufh . It&#39;s always good to see others solutions that works!"}], "tags": [], "owner": {"reputation": 2647, "user_id": 248390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0defac4e8b7c8e21418a95762bc747d0?s=128&d=identicon&r=PG", "display_name": "bufh", "link": "https://stackoverflow.com/users/248390/bufh"}, "is_accepted": false, "score": 1, "last_activity_date": 1440616744, "creation_date": 1440616744, "answer_id": 32234977, "question_id": 32234727, "link": "https://stackoverflow.com/questions/32234727/python-combine-text-files-specific-lines/32234977#32234977", "title": "Python - combine text files (specific lines)", "body": "<p>Here is an example, you'll have to improve it with error handling and all :^)</p>\n\n<pre><code>file1 = open('file1')\nfile2 = open('file2')\n\n# take one line in file1\nfor line in file1:\n        # print result with tabulation to separate fields\n        print '\\t'.join(\n                # the line from file1\n                [line.strip()] + \n                # and three lines from file2\n                [file2.readline().strip() for _ in '123']\n        )       \n</code></pre>\n\n<p>Note that I'm using the string <code>'123'</code> because it is shorter than <code>range(3)</code> (and it does not require a function call); it just have to be an iterable of any sort generating three steps.</p>\n\n<p>Reading only the required data and processing them avoid the need to load all files in memory (as you said your files are large).</p>\n\n<p>Cheers.</p>\n"}], "owner": {"reputation": 127, "user_id": 4637031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C8Yid.png?s=128&g=1", "display_name": "Hawk81", "link": "https://stackoverflow.com/users/4637031/hawk81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 32234972, "answer_count": 2, "score": 1, "last_activity_date": 1440618833, "creation_date": 1440615913, "question_id": 32234727, "link": "https://stackoverflow.com/questions/32234727/python-combine-text-files-specific-lines", "title": "Python - combine text files (specific lines)", "body": "<p>I have two large text files of data from one experiment and I want split it into one in special way.</p>\n\n<p>Small sample of data:</p>\n\n<p>file1: </p>\n\n<pre><code>plotA   10 \nplotB   9 \nplotC   9\n</code></pre>\n\n<p>file2:</p>\n\n<pre><code>98%\n7/10\n21\n98%\n5/10\n20\n98%\n10/10\n21\n</code></pre>\n\n<p>And I would like result like this:</p>\n\n<pre><code>plotA   10  98% 7/10    21\nplotB   9   98% 5/10    20\nplotC   9   98% 10/10   21\n</code></pre>\n\n<p>I have no idea how it solve in python. I tried to reorder file2 with:</p>\n\n<pre><code>lines = file2.readlines()\naaa = lines[0] + lines[3] + lines[6]\nbbb = lines[1] + lines[4] + lines[7]\nccc = lines[2] + lines[5] + lines[8]\n</code></pre>\n\n<p>and use zip but I failed (and this method is time consuming for large text files).</p>\n\n<p>Any help?</p>\n"}]