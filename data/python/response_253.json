[{"tags": ["python", "pandas", "dataframe", "outliers"], "answers": [{"tags": [], "owner": {"reputation": 359, "user_id": 11805318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQKXh.jpg?s=128&g=1", "display_name": "aprilangel", "link": "https://stackoverflow.com/users/11805318/aprilangel"}, "is_accepted": false, "score": 1, "last_activity_date": 1573694025, "creation_date": 1573694025, "answer_id": 58847967, "question_id": 58847413, "link": "https://stackoverflow.com/questions/58847413/python-how-to-find-outliers-in-a-specific-column-in-a-dataframe/58847967#58847967", "title": "Python: how to find outliers in a specific column in a dataframe", "body": "<pre><code>np.abs(stats.zscore(df_final['rating'])) &lt; 3\n</code></pre>\n\n<p>This line will return a numpy array, value is a series of True and False. This can be used to do slicing.</p>\n\n<p>For numpy.all, please refer tho the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.all.html\" rel=\"nofollow noreferrer\">doc</a>. It is not used for your slicing purpose.</p>\n"}], "owner": {"reputation": 185, "user_id": 11920114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c72c78103503ac261922196249e4d1?s=128&d=identicon&r=PG&f=1", "display_name": "messy748", "link": "https://stackoverflow.com/users/11920114/messy748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573694025, "creation_date": 1573689552, "question_id": 58847413, "link": "https://stackoverflow.com/questions/58847413/python-how-to-find-outliers-in-a-specific-column-in-a-dataframe", "title": "Python: how to find outliers in a specific column in a dataframe", "body": "<p>I am trying to remove outliers from a specific column in my dataframe in Python. I found a solution from a few year old post that should work, but searches through the entire dataframe:</p>\n\n<p><code>df_final[(np.abs(stats.zscore(df_final)) &lt; 3).all(axis=1)]</code></p>\n\n<p>Since my dataframe has different data types, such as dates, I am getting the following error when I run it</p>\n\n<p><code>TypeError: unsupported operand type(s) for +: 'Timestamp' and 'Timestamp'</code></p>\n\n<p>I feel like the solution to just get the outliers for a single column should be easy, but when I try</p>\n\n<p><code>df_final[(np.abs(stats.zscore(df_final['rating'])) &lt; 3).all(axis=1)]</code></p>\n\n<p>to get the outliers of only the <code>rating</code> column, I get an error</p>\n\n<p><code>AxisError: axis 1 is out of bounds for array of dimension 1</code></p>\n\n<p>I know (think?) that this problem has to do with the array that is created, but I don't understand it well enough to find a solution. Can anyone better explain it to me?</p>\n\n<p>EDIT: It seems that <code>df_final[(np.abs(stats.zscore(df_final['rating'])) &lt; 3)]</code> works. Honestly not sure the reasoning behind it, so I'm still interested if anyone can explain or has a better solution.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 3, "last_activity_date": 1573689956, "creation_date": 1573689956, "answer_id": 58847475, "question_id": 58847405, "link": "https://stackoverflow.com/questions/58847405/drop-nan-rows-unless-string-value-in-separate-column-pandas/58847475#58847475", "title": "Drop nan rows unless string value in separate column - Pandas", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.notna.html\" rel=\"nofollow noreferrer\"><code>DataFrame.notna</code></a> + <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.all.html\" rel=\"nofollow noreferrer\"><code>DataFrame.all</code></a> to performance a <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#boolean-indexing\" rel=\"nofollow noreferrer\"><code>boolean indexing</code></a>:</p>\n\n<pre><code>new_df=df[df.Code1.eq('A')|df.notna().all(axis=1)]\nprint(new_df)\n\n  Code1 Code2 Code3\n0     A     B     C\n1     A   NaN   NaN\n2     B     A     C\n3     B     B     C\n5     C     B     A\n</code></pre>\n"}], "owner": {"reputation": 556, "user_id": 10964685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbbfc3c9b4878cb5064b260dcbdd98de?s=128&d=identicon&r=PG&f=1", "display_name": "jonboy", "link": "https://stackoverflow.com/users/10964685/jonboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58847475, "answer_count": 1, "score": 1, "last_activity_date": 1573689956, "creation_date": 1573689442, "question_id": 58847405, "link": "https://stackoverflow.com/questions/58847405/drop-nan-rows-unless-string-value-in-separate-column-pandas", "title": "Drop nan rows unless string value in separate column - Pandas", "body": "<p>I want to drop rows containing <code>NaN</code> values except if a separate column contains a specific string. Using the <code>df</code> below, I want to drop rows if <code>NaN</code> in <code>Code2, Code3</code> unless the string A is in <code>Code1</code>.</p>\n\n<pre><code>df = pd.DataFrame({   \n        'Code1' : ['A','A','B','B','C','C'],    \n        'Code2' : ['B',np.nan,'A','B',np.nan,'B'],    \n        'Code3' : ['C',np.nan,'C','C',np.nan,'A'],                                   \n        })\n\ndef dropna(df, col):\n\n    if col == np.nan:\n        df = df.dropna()\n\n    return df\n\ndf = dropna(df, df['Code2'])\n</code></pre>\n\n<p>Intended Output:</p>\n\n<pre><code>  Code1 Code2 Code3\n0     A     B     C\n1     A   NaN   NaN\n2     B     A     C\n3     B     B     C\n4     C     B     A\n</code></pre>\n"}, {"tags": ["python", "numpy", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "is_accepted": true, "score": 2, "last_activity_date": 1573690453, "creation_date": 1573690453, "answer_id": 58847541, "question_id": 58847401, "link": "https://stackoverflow.com/questions/58847401/how-can-i-fill-a-ragged-tensor-with-zeros-to-make-a-square-tensor/58847541#58847541", "title": "How can I fill a ragged tensor with zeros to make a square tensor", "body": "<p><code>A</code> is a list, so we can for-loop and use <code>tf.pad</code> and <code>tf.stack</code> to get the output tensor. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>max_len = max(len(e) for e in A)\nres = tf.stack([tf.pad(e, [[max_len - len(e),0]]) for e in A], axis=0)\n# array([[0, 1, 1, 1],\n#        [0, 0, 0, 2],\n#        [3, 3, 3, 3],\n#        [0, 0, 4, 4]], dtype=int32)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 8271309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d0955567fe3be9b32b4dbe7fe5bba2?s=128&d=identicon&r=PG&f=1", "display_name": "oktogen", "link": "https://stackoverflow.com/users/8271309/oktogen"}, "is_accepted": false, "score": 1, "last_activity_date": 1573690946, "creation_date": 1573690946, "answer_id": 58847599, "question_id": 58847401, "link": "https://stackoverflow.com/questions/58847401/how-can-i-fill-a-ragged-tensor-with-zeros-to-make-a-square-tensor/58847599#58847599", "title": "How can I fill a ragged tensor with zeros to make a square tensor", "body": "<p>In specific case where values are same per first dimension as are in your example. You can use:</p>\n\n<pre><code>digits = tf.ragged.constant([[1., 1., 1.],[2.],[3., 3., 3., 3.],[4., 4.]])\npadded = digits.to_tensor(0.)\nfinal_tensor = tf.reverse(zeros, [-1])\n#tf.Tensor(\n#[[0. 1. 1. 1.]\n# [0. 0. 0. 2.]\n# [3. 3. 3. 3.]\n# [0. 0. 4. 4.]], shape=(4, 4), dtype=float32)\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 8133000, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fO391S6tPYk/AAAAAAAAAAI/AAAAAAAAACc/TdDzC-qHnKc/photo.jpg?sz=128", "display_name": "John Mansell", "link": "https://stackoverflow.com/users/8133000/john-mansell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 58847541, "answer_count": 2, "score": 0, "last_activity_date": 1573690946, "creation_date": 1573689389, "question_id": 58847401, "link": "https://stackoverflow.com/questions/58847401/how-can-i-fill-a-ragged-tensor-with-zeros-to-make-a-square-tensor", "title": "How can I fill a ragged tensor with zeros to make a square tensor", "body": "<p><strong>I want to transform A into B:</strong></p>\n\n<pre><code>A = \n  [1, 1, 1]\n  [2]\n  [3, 3, 3, 3]\n  [4, 4]\n\nB =\n  [\n   [0, 1, 1, 1]\n   [0, 0, 0, 2]\n   [3, 3, 3, 3]\n   [0, 0, 4, 4]\n  ]\n</code></pre>\n\n<p><strong>Input</strong>:<br>\n- a list of lists</p>\n\n<p><strong>Output</strong>:<br>\n- a single matrix or tensor<br>\n- right aligned<br>\n- Left fill with 0's</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1573690629, "post_id": 58847390, "comment_id": 103968607, "body": "How do you get this dataframe? What is the origin? You won&#39;t be able to do it without a for loop, you need one, implicit or explicit."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1573690692, "post_id": 58847390, "comment_id": 103968626, "body": "What did you try which failed?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10824073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37762ee282783a9f68fae74e400c3104?s=128&d=identicon&r=PG&f=1", "display_name": "mike.depetriconi", "link": "https://stackoverflow.com/users/10824073/mike-depetriconi"}, "edited": false, "score": 0, "creation_date": 1573690732, "post_id": 58847549, "comment_id": 103968638, "body": "my bad, i&#39;ve just edited my question. It&#39;s not lists but strings. Thank you for your answer but can you please amend it to make it work?"}, {"owner": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "reply_to_user": {"reputation": 51, "user_id": 10824073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37762ee282783a9f68fae74e400c3104?s=128&d=identicon&r=PG&f=1", "display_name": "mike.depetriconi", "link": "https://stackoverflow.com/users/10824073/mike-depetriconi"}, "edited": false, "score": 1, "creation_date": 1573691031, "post_id": 58847549, "comment_id": 103968700, "body": "Why don&#39;t you just convert it to list first? Like <code>df[&#39;Lists&#39;].str.split(&#39;,&#39;)</code>"}], "tags": [], "owner": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "is_accepted": true, "score": 1, "last_activity_date": 1573691102, "last_edit_date": 1573691102, "creation_date": 1573690502, "answer_id": 58847549, "question_id": 58847390, "link": "https://stackoverflow.com/questions/58847390/keep-rows-in-dataframe-where-value-in-each-list-is-in-a-list/58847549#58847549", "title": "Keep rows in dataframe where value in each list is in a list", "body": "<p>This would work:</p>\n\n<pre><code>values = set(str(i) for i in [1, 2, 3, 4, 5])  # note the set\nidx = df['Lists'].str.split(',').map(lambda x: len(values.intersection(x)) &gt; 0)\ndf.loc[idx, 'Name']\n\n\n0     Tom\n1    nick\nName: Name, dtype: object\n</code></pre>\n\n<p>First convert the values to a set for faster membership tests (if you have many values), then filter rows where 'Lists' intersects the values.</p>\n"}], "owner": {"reputation": 51, "user_id": 10824073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37762ee282783a9f68fae74e400c3104?s=128&d=identicon&r=PG&f=1", "display_name": "mike.depetriconi", "link": "https://stackoverflow.com/users/10824073/mike-depetriconi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58847549, "answer_count": 1, "score": 0, "last_activity_date": 1573691102, "creation_date": 1573689310, "last_edit_date": 1573690691, "question_id": 58847390, "link": "https://stackoverflow.com/questions/58847390/keep-rows-in-dataframe-where-value-in-each-list-is-in-a-list", "title": "Keep rows in dataframe where value in each list is in a list", "body": "<p>I have a dataframe that looks like the following.</p>\n\n<pre><code>import pandas as pd\n\n# intialise data of lists.\ndata = {'Name':['Tom', 'nick', 'krish', 'jack'],\n        'Lists':[\"4,67,3,4,53,32\", \"7,3,44,2,5,6,9\", \"8,9,23\", \"9,36,21,32\"]}\n\n# Create DataFrame\ndf = pd.DataFrame(data)\n</code></pre>\n\n<p>I want to keep the rows where each list 'Lists' has any value in the pre-defined list [1,2,3,4,5]\nWhat would be the most efficient and rapid way of doing it.\nI'd like to avoid a for loop, and asking your proficiency in pandas df to ask you what's the best way to achieve this.</p>\n\n<p>In the example above, this would keep only the rows for 'Tom' and 'nick'.</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["python", "pandas", "scikit-learn"], "comments": [{"owner": {"reputation": 3360, "user_id": 4451315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09c02dbbd18039996ae87cfbfe02dd75?s=128&d=identicon&r=PG&f=1", "display_name": "ignoring_gravity", "link": "https://stackoverflow.com/users/4451315/ignoring-gravity"}, "edited": false, "score": 0, "creation_date": 1573732388, "post_id": 58847389, "comment_id": 103983949, "body": "What&#39;s <code>df</code>? If you can give us something we can copy-and-paste, it&#39;ll be easier to answer with something useful"}, {"owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "reply_to_user": {"reputation": 3360, "user_id": 4451315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09c02dbbd18039996ae87cfbfe02dd75?s=128&d=identicon&r=PG&f=1", "display_name": "ignoring_gravity", "link": "https://stackoverflow.com/users/4451315/ignoring-gravity"}, "edited": false, "score": 1, "creation_date": 1573743172, "post_id": 58847389, "comment_id": 103990207, "body": "@ignoring_gravity Gotcha. Made the example runnable. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "is_accepted": false, "score": 1, "last_activity_date": 1573760647, "creation_date": 1573760647, "answer_id": 58864644, "question_id": 58847389, "link": "https://stackoverflow.com/questions/58847389/how-do-i-get-top-matched-feature-names-from-tfidftransformer-in-scikit-learn/58864644#58864644", "title": "How do I get top matched feature names from TfidfTransformer in scikit-learn?", "body": "<p>This worked for me.</p>\n\n<pre><code># Produce top words between search text and each test set text\n# See also https://stackoverflow.com/a/40434047/34935\ntmp = pd.DataFrame(data=x_test_tfidf.multiply(query_text_tfidf).toarray(),\n                   columns=count_vect.get_feature_names())\ntmp = tmp.apply(lambda row: sorted(zip(tmp.columns, row),\n                                   key=lambda cv: -cv[1]), axis=1)\n\nnlargest = 5\nvals = []\nfor key, val in zip(tmp.index, tmp.values.tolist()):\n    val_tuples = val[:nlargest]\n    vals.append('%d|%s' % (key, ', '.join(\n        [str(tup) for tup in val_tuples])))\n\ntest['top_keywords'] = vals\n</code></pre>\n"}], "owner": {"reputation": 16423, "user_id": 34935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/27079559125269ea0a30acba3fb06235?s=128&d=identicon&r=PG", "display_name": "dfrankow", "link": "https://stackoverflow.com/users/34935/dfrankow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1574332620, "creation_date": 1573689308, "last_edit_date": 1574332620, "question_id": 58847389, "link": "https://stackoverflow.com/questions/58847389/how-do-i-get-top-matched-feature-names-from-tfidftransformer-in-scikit-learn", "title": "How do I get top matched feature names from TfidfTransformer in scikit-learn?", "body": "<p>Below is a code snippet showing scoring test documents based on TF-IDF in scikit-learn.</p>\n\n<p>How do I get the top 5 vocabulary elements for each row in x_test_tfidf, and their scores?</p>\n\n<p>I know <code>count_vect.get_feature_names</code> can get the words corresponding to each column, but I don't know how to 1) get top 5 largest columns per row (something like <a href=\"https://stackoverflow.com/a/38955365/34935\">this?</a>), and 2) map the feature names to those columns (perhaps by setting an index?).</p>\n\n<pre><code>import pandas as pd\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.feature_extraction.text import CountVectorizer\nfrom sklearn.feature_extraction.text import TfidfTransformer\n\ndf = pd.DataFrame({'text':[\n    'this is sentence one, about one thing',\n    'this is sentence two, about another thing',\n    'this is sentence three, about a third thing',\n    'this is sentence four, about a fourth thing']})\ntrain, test = train_test_split(df, test_size=0.5, random_state=42)\n\n# Transform words (unigrams and bigrams) via tfidf\n# See https://scikit-learn.org/stable/tutorial/text_analytics/working_with_text_data.html\n# See https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html\ncount_vect = CountVectorizer(ngram_range=(1, 2))\ntfidf_transformer = TfidfTransformer()\n\nx_train_counts = count_vect.fit_transform(train['text'])\nx_train_tfidf = tfidf_transformer.fit_transform(x_train_counts)\n\n# Get the test matrix using the trained tf-idf numbers\nx_test_counts = count_vect.transform(test['text'])\nx_test_tfidf = tfidf_transformer.transform(x_test_counts)\n\n# Produce tfidf scores for query_text\nquery_text = 'what about another thing'\nquery_text_df = pd.DataFrame({'text': [query_text]})\nquery_text_counts = count_vect.transform(query_text_df['text'])\nquery_text_tfidf = tfidf_transformer.transform(query_text_counts)\n\n# Produce scores that match test set with query_text\nscores = x_test_tfidf * query_text_tfidf.T\nprint(scores)\n</code></pre>\n\n<p>The desired outcome would be something like:</p>\n\n<pre><code>[[('about', 0.6), ('another', 0.6), ('thing', 0.4)],\n[('about', 0.6), ('thing', 0.4)]]\n</code></pre>\n\n<p>because the two test rows had those words that matched the query_text.</p>\n\n<p><strong>EDIT</strong>: Below is a partial answer, but without the \"top 5\" functionality, and the output looks messy.</p>\n\n<p>Perhaps to get non-messy top 5 final results, it should be in \"long\" form, i.e. one row is a single cell.</p>\n\n<pre><code>result = pd.DataFrame(\n    data=x_test_tfidf.multiply(query_text_tfidf).toarray(),\n    columns=count_vect.get_feature_names())\n\nwith pd.option_context('display.max_rows', None,\n                       'display.max_columns', None):\n    print(result)\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>  about  about one  about third   is  is sentence  one  one about  \\\n0  0.267261        0.0          0.0  0.0          0.0  0.0        0.0   \n1  0.316228        0.0          0.0  0.0          0.0  0.0        0.0   \n\none thing  sentence  sentence one  sentence three     thing  third  \\\n0        0.0       0.0           0.0             0.0  0.267261    0.0   \n1        0.0       0.0           0.0             0.0  0.316228    0.0   \n\nthird thing  this  this is  three  three about  \n0          0.0   0.0      0.0    0.0          0.0  \n1          0.0   0.0      0.0    0.0          0.0  \n</code></pre>\n\n<p><strong>EDIT 2</strong>: Found the rest of the answer <a href=\"https://stackoverflow.com/a/40434047/34935\">here</a>, and wrote it up as <a href=\"https://stackoverflow.com/a/58864644/34935\">an answer</a>.</p>\n"}, {"tags": ["python", "raspberry-pi3"], "comments": [{"owner": {"reputation": 753, "user_id": 12055383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d06db026197c4978ac0fdfef63891b?s=128&d=identicon&r=PG&f=1", "display_name": "askaroni", "link": "https://stackoverflow.com/users/12055383/askaroni"}, "edited": false, "score": 0, "creation_date": 1573691459, "post_id": 58847384, "comment_id": 103968803, "body": "I would use <a href=\"https://github.com/python-trio/trio-gpio/blob/master/examples/line_echo_polled.py\" rel=\"nofollow noreferrer\">trio-gpio</a>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12369739, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159746122533084/picture?type=large", "display_name": "Han Essa", "link": "https://stackoverflow.com/users/12369739/han-essa"}, "edited": false, "score": 0, "creation_date": 1573691114, "post_id": 58847619, "comment_id": 103968724, "body": "Thanks. Never thought of it. I&#39;ll try it out"}, {"owner": {"reputation": 753, "user_id": 12055383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d06db026197c4978ac0fdfef63891b?s=128&d=identicon&r=PG&f=1", "display_name": "askaroni", "link": "https://stackoverflow.com/users/12055383/askaroni"}, "edited": false, "score": 0, "creation_date": 1573691357, "post_id": 58847619, "comment_id": 103968781, "body": "We don&#39;t use <code>;</code> in Python."}, {"owner": {"reputation": 292, "user_id": 3542156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed18567aa51e35d03837e8ce17db8b00?s=128&d=identicon&r=PG&f=1", "display_name": "bitfhacker", "link": "https://stackoverflow.com/users/3542156/bitfhacker"}, "edited": false, "score": 0, "creation_date": 1573692129, "post_id": 58847619, "comment_id": 103968952, "body": "take a look to asyncio to run the two functions in parallel"}, {"owner": {"reputation": 169, "user_id": 287430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/eb0d16f3062b2c63a5fac92e83159025?s=128&d=identicon&r=PG", "display_name": "Mike Eager", "link": "https://stackoverflow.com/users/287430/mike-eager"}, "edited": false, "score": 0, "creation_date": 1573783213, "post_id": 58847619, "comment_id": 104007529, "body": "Oops.  I&#39;ve been programming in PHP all week and it took me most of that time to add ; on every line.  Now can&#39;t stop."}, {"owner": {"reputation": 21, "user_id": 12369739, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159746122533084/picture?type=large", "display_name": "Han Essa", "link": "https://stackoverflow.com/users/12369739/han-essa"}, "edited": false, "score": 0, "creation_date": 1574316243, "post_id": 58847619, "comment_id": 104190792, "body": "I tried to use the functions to run the sensor together, however, I have to force the compiler to stop (ctrl + C) in order to move to the next function."}, {"owner": {"reputation": 169, "user_id": 287430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/eb0d16f3062b2c63a5fac92e83159025?s=128&d=identicon&r=PG", "display_name": "Mike Eager", "link": "https://stackoverflow.com/users/287430/mike-eager"}, "edited": false, "score": 0, "creation_date": 1574727572, "post_id": 58847619, "comment_id": 104326171, "body": "I&#39;m guessing that you kept the loops in the heartBeat() and motionDetect() functions.  Remove the loops and just have the body from the loop in the function."}], "tags": [], "owner": {"reputation": 169, "user_id": 287430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/eb0d16f3062b2c63a5fac92e83159025?s=128&d=identicon&r=PG", "display_name": "Mike Eager", "link": "https://stackoverflow.com/users/287430/mike-eager"}, "is_accepted": false, "score": 1, "last_activity_date": 1573783245, "last_edit_date": 1573783245, "creation_date": 1573691039, "answer_id": 58847619, "question_id": 58847384, "link": "https://stackoverflow.com/questions/58847384/merge-two-while-loops-in-python/58847619#58847619", "title": "Merge two while loops in Python", "body": "<p>You don't mention how you are running your program.  I'm assuming </p>\n\n<pre><code> python heartBeats.py\n</code></pre>\n\n<p>This will run <em>heartbeats.py</em> only.  It doesn't include <em>PIR.py</em>, so that code will never be executed.  I'm assuming that you want both loops to be run, more or less at the same time, or alternating.</p>\n\n<p>A simple approach would be to create two functions \"heartBeat\" and \"motionDetect\", each of which performs a single iteration of the loop in heartBeats.py and PIR.py and then returns.  In main, call these in a loop:</p>\n\n<pre><code>while True:\n  heartBeat()\n  motionDetect()\n</code></pre>\n\n<p>A more complicated approach would be to create two threads, one to run the PIR code the other to run the heartBeats code.  </p>\n"}], "owner": {"reputation": 21, "user_id": 12369739, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159746122533084/picture?type=large", "display_name": "Han Essa", "link": "https://stackoverflow.com/users/12369739/han-essa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574316435, "creation_date": 1573689277, "last_edit_date": 1574316435, "question_id": 58847384, "link": "https://stackoverflow.com/questions/58847384/merge-two-while-loops-in-python", "title": "Merge two while loops in Python", "body": "<p>I'm trying to implement the motion sensor and pulse sensor together in the raspberry pi.\nI'm new in python and I have tried to merge them, but only the motion sensor work.</p>\n\n<p>Here is the code for the PIR moiton sensor (PIR.py):</p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\n\nGPIO.setmode(GPIO.BCM)\n\nGPIO.setup(23, GPIO.IN) #PIR\nGPIO.setup(24, GPIO.OUT) #BUzzer\n\ntry:\n    time.sleep(2) # to stabilize sensor\n    while True:\n        if GPIO.input(23):\n            GPIO.output(24, True)\n            time.sleep(0.5) #Buzzer turns on for 0.5 sec\n            GPIO.output(24, False)\n            print(\"Motion Detected...\")\n            time.sleep(5) #to avoid multiple detection\n        time.sleep(0.1) #loop delay, should be less than detection delay\n\nexcept:\n    GPIO.cleanup()\n</code></pre>\n\n<p>And the code for the pulse sensor (heartBeats.py):</p>\n\n<pre><code># Simple heart beat reader for Raspberry pi using ADS1x15 family of ADCs and a pulse sensor - http://pulsesensor.com/.\n# The code borrows heavily from Tony DiCola's examples of using ADS1x15 with \n# Raspberry pi and WorldFamousElectronics's code for PulseSensor_Amped_Arduino\n\n# Author: Udayan Kumar\n# License: Public Domain\n\nimport time\n# Import the ADS1x15 module.\nimport Adafruit_ADS1x15\n\n\nif __name__ == '__main__':\n\n    adc = Adafruit_ADS1x15.ADS1015()\n    # initialization \n    GAIN = 2/3  \n    curState = 0\n    thresh = 525  # mid point in the waveform\n    P = 512\n    T = 512\n    stateChanged = 0\n    sampleCounter = 0\n    lastBeatTime = 0\n    firstBeat = True\n    secondBeat = False\n    Pulse = False\n    IBI = 600\n    rate = [0]*10\n    amp = 100\n\n    lastTime = int(time.time()*1000)\n\n    # Main loop. use Ctrl-c to stop the code\n    while True:\n        # read from the ADC\n        Signal = adc.read_adc(0, gain=GAIN)   #TODO: Select the correct ADC channel. I have selected A0 here\n        curTime = int(time.time()*1000)\n\n        sampleCounter += curTime - lastTime;      #                   # keep track of the time in mS with this variable\n        lastTime = curTime\n        N = sampleCounter - lastBeatTime;     #  # monitor the time since the last beat to avoid noise\n        #print N, Signal, curTime, sampleCounter, lastBeatTime\n\n        ##  find the peak and trough of the pulse wave\n        if Signal &lt; thresh and N &gt; (IBI/5.0)*3.0 :  #       # avoid dichrotic noise by waiting 3/5 of last IBI\n            if Signal &lt; T :                        # T is the trough\n              T = Signal;                         # keep track of lowest point in pulse wave \n\n        if Signal &gt; thresh and  Signal &gt; P:           # thresh condition helps avoid noise\n            P = Signal;                             # P is the peak\n                                                # keep track of highest point in pulse wave\n\n          #  NOW IT'S TIME TO LOOK FOR THE HEART BEAT\n          # signal surges up in value every time there is a pulse\n        if N &gt; 250 :                                   # avoid high frequency noise\n            if  (Signal &gt; thresh) and  (Pulse == False) and  (N &gt; (IBI/5.0)*3.0)  :       \n              Pulse = True;                               # set the Pulse flag when we think there is a pulse\n              IBI = sampleCounter - lastBeatTime;         # measure time between beats in mS\n              lastBeatTime = sampleCounter;               # keep track of time for next pulse\n\n              if secondBeat :                        # if this is the second beat, if secondBeat == TRUE\n                secondBeat = False;                  # clear secondBeat flag\n                for i in range(0,10):             # seed the running total to get a realisitic BPM at startup\n                  rate[i] = IBI;                      \n\n              if firstBeat :                        # if it's the first time we found a beat, if firstBeat == TRUE\n                firstBeat = False;                   # clear firstBeat flag\n                secondBeat = True;                   # set the second beat flag\n                continue                              # IBI value is unreliable so discard it\n\n\n              # keep a running total of the last 10 IBI values\n              runningTotal = 0;                  # clear the runningTotal variable    \n\n              for i in range(0,9):                # shift data in the rate array\n                rate[i] = rate[i+1];                  # and drop the oldest IBI value \n                runningTotal += rate[i];              # add up the 9 oldest IBI values\n\n              rate[9] = IBI;                          # add the latest IBI to the rate array\n              runningTotal += rate[9];                # add the latest IBI to runningTotal\n              runningTotal /= 10;                     # average the last 10 IBI values \n              BPM = 60000/runningTotal;               # how many beats can fit into a minute? that's BPM!\n              print 'BPM: {}'.format(BPM)\n\n        if Signal &lt; thresh and Pulse == True :   # when the values are going down, the beat is over\n            Pulse = False;                         # reset the Pulse flag so we can do it again\n            amp = P - T;                           # get amplitude of the pulse wave\n            thresh = amp/2 + T;                    # set thresh at 50% of the amplitude\n            P = thresh;                            # reset these for next time\n            T = thresh;\n\n        if N &gt; 2500 :                          # if 2.5 seconds go by without a beat\n            thresh = 512;                          # set thresh default\n            P = 512;                               # set P default\n            T = 512;                               # set T default\n            lastBeatTime = sampleCounter;          # bring the lastBeatTime up to date        \n            firstBeat = True;                      # set these to avoid noise\n            secondBeat = False;                    # when we get the heartbeat back\n            print \"no beats found\"\n\n        time.sleep(0.005)\n</code></pre>\n\n<p>I would like the output would look like the following:</p>\n\n<pre><code>Motion Detected...\nBPM: 54\n\nBPM: 53\n\nMotion Detected...\nno beats found\n</code></pre>\n\n<p>Thank you for your help.</p>\n\n<p>Update 1: I tried to use the functions to run the sensor together, however, I have to force the compiler to stop (ctrl + C) in order to move to the next function.</p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\nimport time\n# Import the ADS1x15 module.\nimport Adafruit_ADS1x15\n\n\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(23, GPIO.IN) #PIR\nGPIO.setup(24, GPIO.OUT) #BUzzer\n\ndef pir_function():\n            print(\"This is the motion sensor\")\n\ntry:\n    time.sleep(2) # to stabilize sensor\n    while True:\n        if GPIO.input(23):\n            GPIO.output(24, True)\n            time.sleep(0.5) #Buzzer turns on for 0.5 sec\n            GPIO.output(24, False)\n            print(\"Motion Detected...\")\n            time.sleep(5) #to avoid multiple detection\n        time.sleep(0.1) #loop delay, should be less than detection delay\n\nexcept:\n    GPIO.cleanup()\n\n\ndef heart_function():\n\n    adc = Adafruit_ADS1x15.ADS1015()\n    # initialization \n    GAIN = 2/3  \n    curState = 0\n    thresh = 525  # mid point in the waveform\n    P = 512\n    T = 512\n    stateChanged = 0\n    sampleCounter = 0\n    lastBeatTime = 0\n    firstBeat = True\n    secondBeat = False\n    Pulse = False\n    IBI = 600\n    rate = [0]*10\n    amp = 100\n\n    lastTime = int(time.time()*1000)\n\n    # Main loop. use Ctrl-c to stop the code\n    while True:\n        # read from the ADC\n        Signal = adc.read_adc(0, gain=GAIN)   #TODO: Select the correct ADC channel. I have selected A0 here\n        curTime = int(time.time()*1000)\n\n        sampleCounter += curTime - lastTime;      #                   # keep track of the time in mS with this variable\n        lastTime = curTime\n        N = sampleCounter - lastBeatTime;     #  # monitor the time since the last beat to avoid noise\n        #print N, Signal, curTime, sampleCounter, lastBeatTime\n\n        ##  find the peak and trough of the pulse wave\n        if Signal &lt; thresh and N &gt; (IBI/5.0)*3.0 :  #       # avoid dichrotic noise by waiting 3/5 of last IBI\n            if Signal &lt; T :                        # T is the trough\n              T = Signal;                         # keep track of lowest point in pulse wave \n\n        if Signal &gt; thresh and  Signal &gt; P:           # thresh condition helps avoid noise\n            P = Signal;                             # P is the peak\n                                                # keep track of highest point in pulse wave\n\n          #  NOW IT'S TIME TO LOOK FOR THE HEART BEAT\n          # signal surges up in value every time there is a pulse\n        if N &gt; 250 :                                   # avoid high frequency noise\n            if  (Signal &gt; thresh) and  (Pulse == False) and  (N &gt; (IBI/5.0)*3.0)  :       \n              Pulse = True;                               # set the Pulse flag when we think there is a pulse\n              IBI = sampleCounter - lastBeatTime;         # measure time between beats in mS\n              lastBeatTime = sampleCounter;               # keep track of time for next pulse\n\n              if secondBeat :                        # if this is the second beat, if secondBeat == TRUE\n                secondBeat = False;                  # clear secondBeat flag\n                for i in range(0,10):             # seed the running total to get a realisitic BPM at startup\n                  rate[i] = IBI;                      \n\n              if firstBeat :                        # if it's the first time we found a beat, if firstBeat == TRUE\n                firstBeat = False;                   # clear firstBeat flag\n                secondBeat = True;                   # set the second beat flag\n                continue                              # IBI value is unreliable so discard it\n\n\n              # keep a running total of the last 10 IBI values\n              runningTotal = 0;                  # clear the runningTotal variable    \n\n              for i in range(0,9):                # shift data in the rate array\n                rate[i] = rate[i+1];                  # and drop the oldest IBI value \n                runningTotal += rate[i];              # add up the 9 oldest IBI values\n\n              rate[9] = IBI;                          # add the latest IBI to the rate array\n              runningTotal += rate[9];                # add the latest IBI to runningTotal\n              runningTotal /= 10;                     # average the last 10 IBI values \n              BPM = 60000/runningTotal;               # how many beats can fit into a minute? that's BPM!\n              print 'BPM: {}'.format(BPM)\n\n        if Signal &lt; thresh and Pulse == True :   # when the values are going down, the beat is over\n            Pulse = False;                         # reset the Pulse flag so we can do it again\n            amp = P - T;                           # get amplitude of the pulse wave\n            thresh = amp/2 + T;                    # set thresh at 50% of the amplitude\n            P = thresh;                            # reset these for next time\n            T = thresh;\n\n        if N &gt; 2500 :                          # if 2.5 seconds go by without a beat\n            thresh = 512;                          # set thresh default\n            P = 512;                               # set P default\n            T = 512;                               # set T default\n            lastBeatTime = sampleCounter;          # bring the lastBeatTime up to date        \n            firstBeat = True;                      # set these to avoid noise\n            secondBeat = False;                    # when we get the heartbeat back\n            print \"no beats found\"\n\n        time.sleep(0.005)\n\n\n\n\n\npir_function()\nheart_function()\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "artificial-intelligence", "dimensions"], "comments": [{"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1573725433, "post_id": 58847381, "comment_id": 103979872, "body": "Hi, your code is long. Can you put an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mvre</a>, please?"}, {"owner": {"reputation": 37, "user_id": 12297666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f25a606eedfaedcd55697538e06b056?s=128&d=identicon&r=PG&f=1", "display_name": "Murilo Araujo Souza", "link": "https://stackoverflow.com/users/12297666/murilo-araujo-souza"}, "reply_to_user": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1573726755, "post_id": 58847381, "comment_id": 103980648, "body": "Hello. Sorry, a bit new here, what does mvre stands for? Just saw what a reprex, mcve and mwe means in that link you posted. Anyway, maybe i could remove some libraries and other stuff, but most of it i think its needed to reproduce that error."}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1573727016, "post_id": 58847381, "comment_id": 103980812, "body": "this Sir -&gt; <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1573727084, "post_id": 58847381, "comment_id": 103980853, "body": "Murilo, make it as simple as possible but not simplier. The aim is to have a question that can be answered."}, {"owner": {"reputation": 37, "user_id": 12297666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f25a606eedfaedcd55697538e06b056?s=128&d=identicon&r=PG&f=1", "display_name": "Murilo Araujo Souza", "link": "https://stackoverflow.com/users/12297666/murilo-araujo-souza"}, "reply_to_user": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1573728130, "post_id": 58847381, "comment_id": 103981502, "body": "Andy, i&#39;ve removed a few more lines that were not needed to reproduce the error."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12297666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f25a606eedfaedcd55697538e06b056?s=128&d=identicon&r=PG&f=1", "display_name": "Murilo Araujo Souza", "link": "https://stackoverflow.com/users/12297666/murilo-araujo-souza"}, "edited": false, "score": 0, "creation_date": 1573730079, "post_id": 58855289, "comment_id": 103982670, "body": "Hey, thanks for the reply. I removed the resize command because i was getting confused with it. I was trying to pass that input array in the same shape that i read it, only with rows and columns, no more dimensions. Any idea what i should change to make it work that way?"}, {"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "reply_to_user": {"reputation": 37, "user_id": 12297666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f25a606eedfaedcd55697538e06b056?s=128&d=identicon&r=PG&f=1", "display_name": "Murilo Araujo Souza", "link": "https://stackoverflow.com/users/12297666/murilo-araujo-souza"}, "edited": false, "score": 0, "creation_date": 1573730650, "post_id": 58855289, "comment_id": 103983004, "body": "Either change the model accordingly (but note that you&#39;re throwing away most of your data right now by just indexing <code>[:batch_size]</code> or the non-resized data), or just include the <code>resize</code> from the original code. Also note that you&#39;ll probably need to get rid of your <code>verbose</code> arguments."}], "tags": [], "owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "is_accepted": true, "score": 1, "last_activity_date": 1573729415, "creation_date": 1573729415, "answer_id": 58855289, "question_id": 58847381, "link": "https://stackoverflow.com/questions/58847381/dimension-input-keras/58855289#58855289", "title": "Dimension Input Keras", "body": "<p>In</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>tf.keras.layers.Input(shape=(2,24,1),name='InputLayer')\n</code></pre>\n\n<p>you're specifying that the inputs to your model, i.e. the first argument passed to <code>model.fit</code> should have shape <code>(?, 2, 24, 1)</code>, but that's not what you're passing. Indeed, <code>next(train_generator)</code> produces the following output:</p>\n\n<pre><code>(array([[0.62840991, 0.36867201],\n        [0.68026787, 0.32275764],\n        [0.67140497, 0.30866827],\n        [0.61158515, 0.32725069],\n        [0.57037451, 0.41795902]]),\n array([[0.0301671 , 1.        , 0.00581285],\n        [0.        , 0.18781352, 0.        ],\n        [0.12077826, 0.3356642 , 0.19676627],\n        [0.56275038, 0.8747475 , 0.69121483],\n        [1.        , 0.        , 1.        ]]))\n</code></pre>\n\n<p>which is a tuple of arrays of shapes <code>(5, 2)</code> and <code>(5, 3)</code> respectively.</p>\n\n<p>In the notebook you're referring to, they're explicitly setting up inputs of the desired shape through</p>\n\n<pre><code>InputX = np.resize(InputX,(batch_size+valid_size,24,2,1))\n</code></pre>\n\n<p>but that's not part of your code.</p>\n"}], "owner": {"reputation": 37, "user_id": 12297666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f25a606eedfaedcd55697538e06b056?s=128&d=identicon&r=PG&f=1", "display_name": "Murilo Araujo Souza", "link": "https://stackoverflow.com/users/12297666/murilo-araujo-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "accepted_answer_id": 58855289, "answer_count": 1, "score": 0, "last_activity_date": 1573729415, "creation_date": 1573689249, "last_edit_date": 1573728075, "question_id": 58847381, "link": "https://stackoverflow.com/questions/58847381/dimension-input-keras", "title": "Dimension Input Keras", "body": "<p>I've amended the code found <a href=\"https://github.com/sibyjackgrove/CNN-on-Wind-Power-Data/blob/master/CNN_on_power_data_with_Keras_and_Python_generator.ipynb\" rel=\"nofollow noreferrer\">here</a>. But i'm getting a dimension error in my in input, like below:</p>\n\n<blockquote>\n  <p>ValueError: Error when checking input: expected InputLayer to have 4\n  dimensions, but got array with shape (None, None)</p>\n</blockquote>\n\n<p>This is my modified code (i'm running this on Colab):</p>\n\n<pre><code>#Power data classification/regression with CNN\nimport numpy as np\nimport tensorflow as tf\nfrom tensorflow import keras\nimport pandas as pd\nimport csv as csv\nimport keras.backend as K\nfrom sklearn.preprocessing import MinMaxScaler # For normalizing data\nprint(\"TensorFlow version:\",tf.__version__)\n\n!wget https://raw.githubusercontent.com/sibyjackgrove/CNN-on-Wind-Power-Data/master/MISO_power_data_classification_labels.csv\n!wget https://raw.githubusercontent.com/sibyjackgrove/CNN-on-Wind-Power-Data/master/MISO_power_data_input.csv\n\n#Read total rows in csv file without loading into memory\ndef data_set_size(csv_file):\n    with open(csv_file) as csvfile:\n        csv_rows = 0\n        for _ in csvfile:\n            csv_rows += 1\n    return csv_rows-1            #Remove header from count and return\n\ncsv_file = \"./MISO_power_data_classification_labels.csv\"\nn_train = data_set_size(csv_file)\nprint(\"Training data set size:\",n_train)\n\n#Python generator to supply batches of traning data during training with loading full data set to memory\ndef power_data_generator(batch_size,gen_type=''):\n    valid_size = max(1,np.int(0.2*batch_size))\n    while 1:\n        df_input=pd.read_csv('./MISO_power_data_input.csv',usecols =['Wind_MWh','Actual_Load_MWh'],chunksize =24*(batch_size+valid_size), iterator=True)\n        df_target=pd.read_csv('./MISO_power_data_classification_labels.csv',usecols =['Mean Wind Power','Standard Deviation','WindShare'],chunksize =batch_size+valid_size, iterator=True)\n        for chunk, chunk2 in  zip(df_input,df_target):\n            scaler = MinMaxScaler() # Define limits for normalize data\n            InputX = chunk.values\n            InputX = scaler.fit_transform(InputX) # Normalize input data\n            InputY = chunk2.values\n            InputY = scaler.fit_transform(InputY) # Normalize output data\n            if gen_type =='training':\n                yield (InputX[0:batch_size],InputY[0:batch_size])\n            elif gen_type =='validation':\n                yield (InputX[batch_size:batch_size+valid_size],InputY[batch_size:batch_size+valid_size])\n\n#Define model using Keras\nYclasses = 3 #Number of output classes\n\ndef nossa_metrica(y_true, y_pred):\n    diff = y_true - y_pred\n    count = K.sum(K.cast(K.equal(diff, K.zeros_like(diff)), 'int8')) # Count how many times y_true = y_pred\n    return count/n_train\n\nmodel = keras.Sequential([\n    tf.keras.layers.Input(shape=(2,24,1),name='InputLayer'),                    \n    tf.keras.layers.Conv2D(filters=4,kernel_size=(2,6),strides=(1,1),activation='relu',name='ConvLayer1'),\n    tf.keras.layers.Conv2D(filters=4,kernel_size=(1,6),strides=(1,1),activation='relu',name='ConvLayer2'),\n    tf.keras.layers.Flatten(name=\"Flatten\"),\n    tf.keras.layers.Dense(units = 8,activation='relu',name='FeedForward1'),\n    tf.keras.layers.Dense(units = Yclasses,name='OutputLayer'),\n])\n\nmodel.compile(loss='mse',optimizer='adam',verbose = 2,metrics = [nossa_metrica])\nmodel.summary()\n\nsamples_per_batch = 5\ntrain_generator= power_data_generator(batch_size=samples_per_batch,gen_type='training')\nvalid_generator= power_data_generator(batch_size=samples_per_batch,gen_type='validation')\nnumber_of_batches = np.int32(n_train/(samples_per_batch+max(1,np.int32(0.2*samples_per_batch)))) \n#Training starts\nhistory = model.fit(train_generator, steps_per_epoch= number_of_batches,epochs=200,validation_data=valid_generator, validation_steps=number_of_batches,verbose=2)\n</code></pre>\n\n<p>If anyone can shed some light here, I would be really grateful!</p>\n"}, {"tags": ["python", "tkinter", "turtle-graphics"], "comments": [{"owner": {"reputation": 412, "user_id": 10558670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf4beda28d8e5d164e8016b36eb4209?s=128&d=identicon&r=PG&f=1", "display_name": "MAO3J1m0Op", "link": "https://stackoverflow.com/users/10558670/mao3j1m0op"}, "edited": false, "score": 0, "creation_date": 1573698132, "post_id": 58847371, "comment_id": 103970208, "body": "There\u2019s no reason to import a module, then import all the members of the module."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 12369738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2b00fb3eb374d3c7fd6ebd14bccc1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Loza", "link": "https://stackoverflow.com/users/12369738/jack-loza"}, "edited": false, "score": 0, "creation_date": 1573696736, "post_id": 58848118, "comment_id": 103969924, "body": "Toby- It is poping up with a error in Lines 18,41,48"}, {"owner": {"reputation": 38, "user_id": 8388264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f1CkdFFzBm4/AAAAAAAAAAI/AAAAAAAAABw/T7eRsoYMToc/photo.jpg?sz=128", "display_name": "Toby Clark", "link": "https://stackoverflow.com/users/8388264/toby-clark"}, "reply_to_user": {"reputation": 41, "user_id": 12369738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2b00fb3eb374d3c7fd6ebd14bccc1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Loza", "link": "https://stackoverflow.com/users/12369738/jack-loza"}, "edited": false, "score": 0, "creation_date": 1573697805, "post_id": 58848118, "comment_id": 103970139, "body": "Have you copied the entire block of code across into your code file? This should replace the existing code you have - Make sure that you enter the coordinates as &quot;xx yy&quot; without the quotations."}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1573720217, "post_id": 58848118, "comment_id": 103976984, "body": "Why <code>command=lambda: retrieve_input()</code> instead of simply <code>command=retrieve_input</code>?"}, {"owner": {"reputation": 38, "user_id": 8388264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f1CkdFFzBm4/AAAAAAAAAAI/AAAAAAAAABw/T7eRsoYMToc/photo.jpg?sz=128", "display_name": "Toby Clark", "link": "https://stackoverflow.com/users/8388264/toby-clark"}, "edited": false, "score": 0, "creation_date": 1604621708, "post_id": 58848118, "comment_id": 114410790, "body": "cdlane sorry for the late reply - I was just basing the answer off the documentation I saw for tkinter as I don&#39;t have too much experience with it."}], "tags": [], "owner": {"reputation": 38, "user_id": 8388264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f1CkdFFzBm4/AAAAAAAAAAI/AAAAAAAAABw/T7eRsoYMToc/photo.jpg?sz=128", "display_name": "Toby Clark", "link": "https://stackoverflow.com/users/8388264/toby-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1573697502, "last_edit_date": 1573697502, "creation_date": 1573695378, "answer_id": 58848118, "question_id": 58847371, "link": "https://stackoverflow.com/questions/58847371/trying-to-take-user-input-and-make-a-turtle-dot/58848118#58848118", "title": "Trying to take user input and make a turtle dot", "body": "<p>with turtle you can tell it to go to a position using setPos commands. If you just convert the values from your user input into coordinates, tell you turtle to go there and then start drawing.</p>\n\n<p>Here is a solution:</p>\n\n<pre><code>import turtle\nfrom time import sleep\nfrom tkinter import *\n\n#Setup\nroot=Tk()\n\nwn = turtle.Screen()\nwn.bgcolor('black')\n\nplayer = turtle.Turtle()\nplayer.shape('turtle')\nplayer.color('white')\n\ndef goToLocation(coords):\n    #Get user input and split it into two different coordinants (coordsx and coordsy)\n\n    coordsx, coordsy = coords.split(\" \")\n\n    #Set turtles position to the coords specified\n\n    player.hideturtle()\n    player.penup()\n    player.setpos(int(coordsx),int(coordsy))\n\n    #Draw the circle of size\n    player.pensize(50)\n    player.showturtle()\n    player.pendown()\n    player.forward(1)\n\n    sleep(5)\n\n\n#Button clicked handler\ndef retrieve_input():\n    inputValue=textBox.get(\"1.0\",\"end-1c\")\n    print(inputValue)\n\n    #Calls the previous function\n    goToLocation(inputValue)\n\n\n#Input box setup\ntextBox=Text(root, height=2, width=10)\ntextBox.pack()\nbuttonCommit=Button(root, height=1, width=10, text=\"Commit\", \n                command=lambda: retrieve_input())\n#command=lambda: retrieve_input() &gt;&gt;&gt; just means do this when i press the button\n\nbuttonCommit.pack()\n\nmainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1573720140, "creation_date": 1573720140, "answer_id": 58852362, "question_id": 58847371, "link": "https://stackoverflow.com/questions/58847371/trying-to-take-user-input-and-make-a-turtle-dot/58852362#58852362", "title": "Trying to take user input and make a turtle dot", "body": "<p>When using Python turtle in conjunction with tkinter, you need to use the <strong><em>embedded</em></strong> turtle methods, not the <strong><em>standalone</em></strong> methods you used.  As turtle is built atop tkinter, you've effectively created two roots and will eventually run into trouble.  (E.g. images probably won't work for you.)  You're clearly confused by the combination as you call both <code>top.mainloop()</code> and <code>wn.mainloop()</code>!</p>\n\n<p>Here's an example of how to <em>embed</em> turtle in tkinter for your program:</p>\n\n<pre><code>import tkinter as tk\nfrom turtle import TurtleScreen, RawTurtle\n\ndef set_position():\n    player.setposition(x_entry.get(), y_entry.get())\n    player.dot(30, 'blue')\n    player.home()\n\ntop = tk.Tk()\n\ncanvas = tk.Canvas(top, width=600, height=600)\ncanvas.pack()\n\nscreen = TurtleScreen(canvas)\nscreen.bgcolor('black')\n\nplayer = RawTurtle(screen)\nplayer.shape('turtle')\nplayer.color('red', 'white')\nplayer.penup()\n\nx_entry = tk.DoubleVar()\ntk.Label(top, text=\"X: \").pack(side=tk.LEFT)\ntk.Entry(top, textvariable=x_entry).pack(side=tk.LEFT)\n\ny_entry = tk.DoubleVar()\ntk.Label(top, text=\"Y: \").pack(side=tk.LEFT)\ntk.Entry(top, textvariable=y_entry).pack(side=tk.LEFT)\n\ntk.Button(top, text=\"Draw Dot!\", command=set_position).pack()\n\nscreen.mainloop()\n</code></pre>\n\n<p>My recommendations are: first, try to work completely within <em>standalone</em> turtle if you can, and not introduce tkinter unless you really need to; second, don't trust any answer that makes this same mistake of trying to use <em>standalone</em> turtle classes <em>embedded</em> in a tkinter environment.</p>\n"}], "owner": {"reputation": 41, "user_id": 12369738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2b00fb3eb374d3c7fd6ebd14bccc1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Loza", "link": "https://stackoverflow.com/users/12369738/jack-loza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 58852362, "answer_count": 2, "score": 0, "last_activity_date": 1573720153, "creation_date": 1573689122, "last_edit_date": 1573720153, "question_id": 58847371, "link": "https://stackoverflow.com/questions/58847371/trying-to-take-user-input-and-make-a-turtle-dot", "title": "Trying to take user input and make a turtle dot", "body": "<p>Trying to take user input in this case a numbers and make a turtle make a dot with the number that we got from the user input. It is for a school project that I am trying to do and I tried finding YouTube videos they really did not help.</p>\n\n<pre><code>from tkinter import *\nimport tkinter\nimport turtle\n\nwn = turtle.Screen()\nwn.bgcolor('black')\n\nplayer = turtle.Turtle()\nplayer.shape('turtle')\nplayer.color('white')\n\ndef sad():\n    player.dot(str(kj.get()))\n\ntop = tkinter.Tk()\n\ntop.geometry('600x600')\n\nkj = Entry(top, bd =5)\nkj.pack()\n\nB = tkinter.Button(top, text =\"Hello\", command = sad)\nB.pack()\n\nwn.mainloop()\ntop.mainloop()\n</code></pre>\n"}, {"tags": ["python", "django", "settings", "django-settings", "12factor"], "answers": [{"tags": [], "owner": {"reputation": 485, "user_id": 4135382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cf42746036a3d96237ae380be0ccfa?s=128&d=identicon&r=PG", "display_name": "afilardo", "link": "https://stackoverflow.com/users/4135382/afilardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1573691017, "last_edit_date": 1573691017, "creation_date": 1573689840, "answer_id": 58847453, "question_id": 58847343, "link": "https://stackoverflow.com/questions/58847343/avoiding-code-duplication-in-django-settings-files/58847453#58847453", "title": "Avoiding code duplication in django settings files", "body": "<p>You can use <em>.env</em> file for setting up the variables of local/dev environment, and ensure you have this same variables set up in staging/prod envs.</p>\n\n<p><em>.env</em> file values will be used only when the environment var is not present. So, you can push the <em>.env</em> file to your code repo.</p>\n\n<p>In that way, you will be able to write just once your var in <em>base.py</em> file.</p>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "is_accepted": false, "score": 0, "last_activity_date": 1573761344, "creation_date": 1573761344, "answer_id": 58864792, "question_id": 58847343, "link": "https://stackoverflow.com/questions/58847343/avoiding-code-duplication-in-django-settings-files/58864792#58864792", "title": "Avoiding code duplication in django settings files", "body": "<p>The solution I ended up doing is this</p>\n\n<p>in <code>base.py</code> I put</p>\n\n<pre><code>PACKAGE_CONF = {\n  'foo1': bar,\n  'foo2': bar,\n  'foo3': bar,\n  'foo4': bar,\n  'foo5': bar,\n}\n</code></pre>\n\n<p>And then I override <code>PACKAGE_CONF['CONF_URL']</code> in the leaf settings files, e.g. in staging.py</p>\n\n<pre><code>CONF_URL = 'some other hard coded value'\nPACKAGE_CONF['CONF_URL'] = CONF_URL\n</code></pre>\n\n<p>The downside is you might forget to add this value when you create a new leaf settings file and that may lead to unexpected behavior since the dictionary exists but one key is missing.</p>\n\n<p>However, I think this is acceptable since when you create a new leaf settings you usually copy paste an existing one.</p>\n"}], "owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573761344, "creation_date": 1573688953, "question_id": 58847343, "link": "https://stackoverflow.com/questions/58847343/avoiding-code-duplication-in-django-settings-files", "title": "Avoiding code duplication in django settings files", "body": "<p>I am following Django settings best practices by using <code>base.py</code>, <code>local.py</code>, <code>prod.py</code>, and <code>staging.py</code>.</p>\n\n<p>My conundrum is whether or not to be okay with code duplication. Let's take this example. I need to set a URL which is used in a large dictionary of fixed values to configure a package.</p>\n\n<p><code>local.py\nCONF_URL = 'hard coded local value'</code></p>\n\n<p><code>prod.py\nCONF_URL = os.environ['CONF_URL']</code></p>\n\n<p><code>staging.py\nCONF_URL = 'some other hard coded value'</code></p>\n\n<p>I then have code like</p>\n\n<pre><code>PACKAGE_CONF = {\n  'CONF_URL': CONF_URL,\n  'foo1': bar,\n  'foo2': bar,\n  'foo3': bar,\n  'foo4': bar,\n  'foo5': bar,\n}\n</code></pre>\n\n<ul>\n<li>I can't put <code>PACKAGE_CONF</code> in <code>base.py</code> because we import <code>base</code> from the leaf settings files and not the other way around.</li>\n<li>I can write something to post process <code>PACKAGE_CONF</code> like using an env file but that seems unnecessarily complicated.</li>\n<li>I can force the user to take <code>CONF_URL</code> from the environment but that's not a good local dev experience.</li>\n<li>And lastly I can duplicate <code>PACKAGE_CONF</code> in <code>local</code>, <code>staging,</code> and <code>prod</code>.</li>\n</ul>\n\n<p>I'm not super pleased with any of these options. Can someone with experience in writing beautiful settings files offer a better solution?</p>\n"}, {"tags": ["python", "pool", "unordered"], "comments": [{"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 1, "creation_date": 1573688923, "post_id": 58847307, "comment_id": 103968207, "body": "Multiprocessing won&#39;t help speed up I/O. That&#39;s dependent on your I/O source."}, {"owner": {"reputation": 705, "user_id": 3291993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z5iac.jpg?s=128&g=1", "display_name": "burcak", "link": "https://stackoverflow.com/users/3291993/burcak"}, "reply_to_user": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1573689621, "post_id": 58847307, "comment_id": 103968395, "body": "My point is that, I would expect 24 processes to be running on (sim1,chr1), (sim1,chr2) ... (sim1,chrX). Since each chrom has a different input file.  Now only 1 or 2 processor are running."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1573692146, "post_id": 58847307, "comment_id": 103968957, "body": "Does &quot;only 1 or 2 processes are running&quot; mean 24 processes exist but most are sleeping or that only a couple of processes exist? Do the processes actually complete and produce a result or do they seem to die with no explanation? Have you tried doing this with just a normal <code>imap</code> call to ensure your functions aren&#39;t hitting an exception? If so, you can try wrapping the entire body of your <code>prepare_data_fill_arrays</code> in a <code>try</code>/<code>except</code> block to catch exceptions in the workers."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1573692310, "post_id": 58847307, "comment_id": 103968995, "body": "Also, just because your iterable has 24 items it doesn&#39;t necessarily mean 24 processes will be spawned to handle them. By default, pools won&#39;t spawn more processes than you have cores.Worker processes may handle multiple tasks before they&#39;re replaced or joined."}, {"owner": {"reputation": 705, "user_id": 3291993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z5iac.jpg?s=128&g=1", "display_name": "burcak", "link": "https://stackoverflow.com/users/3291993/burcak"}, "reply_to_user": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1573698217, "post_id": 58847307, "comment_id": 103970227, "body": "@skrrgwasme There are 28 processes in the cluster. Since I&#39;m calling imap.unordered(,chunksize=1), I&#39;m expecting at least 24 processes to be running. e.g.: for (sim1,chr1) (sim1,chr2) (sim1,chr3) ... (sim1,chrX)"}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1573834794, "post_id": 58847307, "comment_id": 104029080, "body": "I would first suspect that there are some messages or exceptions occurring in some of the workers that isn&#39;t being propagated to the main process or stdout. First confirm that all of the code works without using multiprocessing. If that passes, add logging to the functions that execute in subprocesses that will write messages to a file. Put a lot of context and progress messages in those logs so you can see everything happening in them. Also wrap the whole function bodies in a try/except block that will capture any exception and dump the exception info and stack trace to the logs if it occurs."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1573834986, "post_id": 58847307, "comment_id": 104029175, "body": "It&#39;s been a while since I&#39;ve worked with Python multiprocessing. If I remember correctly, output and exceptions <i>should</i> be propagated to stdout and the main process, but I definitely had some problems with silent worker process failures. Explicitly catching exceptions and logging them to a file guaranteed I could see that happening."}], "owner": {"reputation": 705, "user_id": 3291993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Z5iac.jpg?s=128&g=1", "display_name": "burcak", "link": "https://stackoverflow.com/users/3291993/burcak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573716851, "creation_date": 1573688701, "last_edit_date": 1573716851, "question_id": 58847307, "link": "https://stackoverflow.com/questions/58847307/how-to-use-python-pool-imap-unordered-efficiently", "title": "How to use python pool.imap_unordered efficiently?", "body": "<p>I'm using python multiprocessing imap.unordered with big expectations.\nHowever, my processes are in deep sleeping waiting for I/O.</p>\n\n<pre><code>numofSimulations=10\nchromNamesList=['chr1', 'chr2', 'chr3', 'chr4', 'chr5', 'chr6', 'chr7', 'chrX', 'chr8', 'chr9', 'chr10', 'chr11', 'chr12', 'chr13', 'chr14', 'chr15', 'chr16', 'chr17', 'chr18', 'chr20', 'chrY', 'chr19', 'chr22', 'chr21', 'chrM']\nsim_nums = range(0, numofSimulations+1)\nsim_num_chr_tuples=((sim_num,chrLong) for sim_num in sim_nums for chrLong in chromNamesList)\n\nfor arrayList in pool.imap_unordered(prepare_data_fill_arrays, (fillInputList(simNum,chrLong,x,y,z,a,b,c) for simNum,chrLong in sim_num_chr_tuples),chunksize=1):\n\n    print('Worker pid %s in accumulate' %str(os.getpid()))\n    array1 = arrayList[0]\n    array2 = arrayList[1]\n    accumulateArray(accumulatedArray1, array1)\n    accumulateArray(accumulatedArray2, array2)\n</code></pre>\n\n<p>In this pseudocode, I call imap_unordered for each simNum and chrLong pair.\nI submit for the same simulation number with varying chromosomes so that they won't try to read the same chrom input file at the same time.</p>\n\n<p><code>fillInputList</code> just fills inputList.</p>\n\n<p><code>prepare_data_fill_arrays</code> reads chromosome based files and fills arrays.</p>\n\n<p>However since imap_unordered are submitted in an order of different chromosomes at the same time, why processes are waiting for?</p>\n\n<p>And why </p>\n\n<blockquote>\n  <p>Worker id XXXX in accumulate</p>\n</blockquote>\n\n<p>is written before any comment is written in prepare_data_fill_arrays?</p>\n"}, {"tags": ["python", "regression", "linear-regression", "coefficients"], "answers": [{"comments": [{"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1573742187, "post_id": 58848182, "comment_id": 103989491, "body": "Upvoted for the clarity and excellence of the answer."}], "tags": [], "owner": {"reputation": 929, "user_id": 3480910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100003256248995/picture?type=large", "display_name": "adrianp", "link": "https://stackoverflow.com/users/3480910/adrianp"}, "is_accepted": true, "score": 2, "last_activity_date": 1573695815, "creation_date": 1573695815, "answer_id": 58848182, "question_id": 58847296, "link": "https://stackoverflow.com/questions/58847296/multiple-linear-regression-with-fixed-coefficient-for-a-feature/58848182#58848182", "title": "Multiple linear regression with fixed coefficient for a feature", "body": "<p>Say <code>Por</code> is <code>a2</code>. Once you set the value of <code>a2</code> to a fixed value A2, then your linear regression would be reduced to <code>y(a1) = a1x1 + (A2x2 + intercept)</code>. Therefore, you can simply solve the simple linear regression <code>y(a1) = a1x1 + intercept_new</code>, where <code>intercept_new</code> would already take into account setting <code>Por</code> to a constant value.</p>\n"}], "owner": {"reputation": 1967, "user_id": 7552761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1259153020839832/picture?type=large", "display_name": "Eric Kim", "link": "https://stackoverflow.com/users/7552761/eric-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 58848182, "answer_count": 1, "score": 1, "last_activity_date": 1573695815, "creation_date": 1573688623, "last_edit_date": 1573690478, "question_id": 58847296, "link": "https://stackoverflow.com/questions/58847296/multiple-linear-regression-with-fixed-coefficient-for-a-feature", "title": "Multiple linear regression with fixed coefficient for a feature", "body": "<p>Linear regression with two features can be described by the following equation:</p>\n\n<p>y = a1x1 + a2x2 + intercept</p>\n\n<p>Fitting multiple linear regression will solve for the coefficients <code>a1</code>, and <code>a2</code>. Consider the following code:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom sklearn import linear_model\n\nfile = 'https://aegis4048.github.io/downloads/notebooks/sample_data/unconv_MV_v5.csv'\ndf = pd.read_csv(file)[['Por', 'Perm', 'Prod']]\n\nfeatures = df[['Por', 'Perm']].values.reshape(-1,2)\ntarget = df['Prod']\n\nols = linear_model.LinearRegression()\nmodel = ols.fit(features, target)\npredicted = model.predict(features)\n\ncoef = model.coef_\n\npd.DataFrame(coef, index=['Por', 'Perm'], columns=['Regression Coef']).round(2)\n\n&gt;&gt;&gt;         Regression Coef\n    Por              244.47\n    Perm              97.75\n</code></pre>\n\n<p>The two features are <code>Por</code> and <code>Perm</code>. I want to fix the values of the regression coefficient of <code>Perm</code> to some fixed value, and solve only for the coefficient of <code>Por</code>. How can I do this in Python?</p>\n"}, {"tags": ["python", "performance", "loops"], "answers": [{"tags": [], "owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "is_accepted": false, "score": 0, "last_activity_date": 1573688985, "creation_date": 1573688985, "answer_id": 58847349, "question_id": 58847248, "link": "https://stackoverflow.com/questions/58847248/increasing-the-loop-speed/58847349#58847349", "title": "Increasing the loop speed", "body": "<p>There are two ways in general to make a loop faster:</p>\n\n<ol>\n<li>Make the thing you're doing inside the loop faster, so that the computer is doing less work to achieve the same result.  This only works if you're able to find inefficiencies in your code and fix them.</li>\n<li>Run more than one loop at the same time (i.e. instead of 1 thread doing 1M things, have 4 threads doing 250k things each).  This only works if you have multiple processors that can do the work in parallel <em>and</em> the work you're doing doesn't requires exclusive use of a shared resource (e.g. a disk) for its duration.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1573689700, "creation_date": 1573689700, "answer_id": 58847431, "question_id": 58847248, "link": "https://stackoverflow.com/questions/58847248/increasing-the-loop-speed/58847431#58847431", "title": "Increasing the loop speed", "body": "<p>Replacing python loops with numpy array operations often helps to improve performance.</p>\n\n<p>In your example, you effectively do</p>\n\n<pre><code>pop = 100  # for example\n\nfor i in range(pop):\n    pop += np.random.choice(5, p=reproductionDistM)\n</code></pre>\n\n<p>at each iteration.</p>\n\n<p>All sampling and summing can be done in numpy without a loop:</p>\n\n<pre><code>pop = 100\npop += np.random.choice(5, p=reproductionDistM, size=pop).sum()\n</code></pre>\n\n<p>On my machine, this provides a large speedup (how much depends on value of <code>pop</code>, around 100 for the example).</p>\n\n<p>On the other hand, this can waste a lot of RAM if the arrays are large. In this case, I often find it practical to balance speed and RAM by using numpy in batches.</p>\n"}], "owner": {"reputation": 31, "user_id": 12369698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3pdtN3vMh8I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd1tNq3FVv1aLOXSo93uAj596S4Gg/photo.jpg?sz=128", "display_name": "Dmitri Korof", "link": "https://stackoverflow.com/users/12369698/dmitri-korof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1573689700, "creation_date": 1573688321, "question_id": 58847248, "link": "https://stackoverflow.com/questions/58847248/increasing-the-loop-speed", "title": "Increasing the loop speed", "body": "<p>I have 1 million loops to make. Is there anyway of processing this (and python loops in general) faster?</p>\n\n<pre><code>import numpy\n#in a population of 1000 individuals of the same species, one individual has an advantageous mutation\n#before, the average quantity of newborns per each 2 individuals per generation was 2 (no average change in pop)\n\npopN, popM= 999, 1\nperiod= 1000\n\nreproductionDistN=[0.1, 0.2, 0.41, 0.19, 0.1] #expected value= 1.95\nreproductionDistM=[0.1, 0.2, 0.39, 0.21, 0.1] #expected value= 2.05\n\ndef reproduce(pop, reproductionDist):\n    newborns=numpy.random.choice(numpy.arange(0,5), p=reproductionDist) #numpy.arange(0,5)=[0, 1, 2, 3, 4]\n    pop+=newborns\n    return pop\n\nfor t in range(period):\n    for n in range(popN): popN=reproduce(popN, reproductionDistN)  \n    for m in range(popM): popM=reproduce(popM, reproductionDistM) \n\nprint(\"Population of N:\",popN)\nprint(\"Population of M:\",popM)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1247, "user_id": 5014700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVWqB.jpg?s=128&g=1", "display_name": "Lambda", "link": "https://stackoverflow.com/users/5014700/lambda"}, "edited": false, "score": 0, "creation_date": 1573689333, "post_id": 58847223, "comment_id": 103968316, "body": "try `...filter(lambda x: len(x)&gt;=3 and x[&quot;columnb&quot;]==&quot;pizza&quot;)...?"}, {"owner": {"reputation": 605, "user_id": 11611283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCMGs.png?s=128&g=1", "display_name": "Buffalo Collector", "link": "https://stackoverflow.com/users/11611283/buffalo-collector"}, "reply_to_user": {"reputation": 1247, "user_id": 5014700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVWqB.jpg?s=128&g=1", "display_name": "Lambda", "link": "https://stackoverflow.com/users/5014700/lambda"}, "edited": false, "score": 0, "creation_date": 1573690135, "post_id": 58847223, "comment_id": 103968505, "body": "I think I&#39;m getting <code>TypeError: filter function returned a Series, but expected a scalar bool</code>"}, {"owner": {"reputation": 1247, "user_id": 5014700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVWqB.jpg?s=128&g=1", "display_name": "Lambda", "link": "https://stackoverflow.com/users/5014700/lambda"}, "edited": false, "score": 1, "creation_date": 1573693029, "post_id": 58847223, "comment_id": 103969138, "body": "I think <code>df.groupby(&quot;columnA&quot;).filter(lambda x: len(x)&gt;=3).query(&quot;columnB==&#39;pizza&#39;&quot;)</code> may work for you."}, {"owner": {"reputation": 605, "user_id": 11611283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCMGs.png?s=128&g=1", "display_name": "Buffalo Collector", "link": "https://stackoverflow.com/users/11611283/buffalo-collector"}, "reply_to_user": {"reputation": 1247, "user_id": 5014700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVWqB.jpg?s=128&g=1", "display_name": "Lambda", "link": "https://stackoverflow.com/users/5014700/lambda"}, "edited": false, "score": 0, "creation_date": 1573694447, "post_id": 58847223, "comment_id": 103969433, "body": "Yep, that works."}], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 11611283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCMGs.png?s=128&g=1", "display_name": "Buffalo Collector", "link": "https://stackoverflow.com/users/11611283/buffalo-collector"}, "is_accepted": true, "score": 0, "last_activity_date": 1573796277, "creation_date": 1573796277, "answer_id": 58870936, "question_id": 58847223, "link": "https://stackoverflow.com/questions/58847223/grouping-dataframe-filtering-by-group-size-and-by-value-of-column-in-one-line/58870936#58870936", "title": "Grouping DataFrame, filtering by group size and by value of column in one line?", "body": "<p>@Lambda provided solution in comments: </p>\n\n<pre><code>df.groupby(\"columnA\").filter(lambda x: len(x)&gt;=3).query('columnB==\"pizza\"')\n</code></pre>\n"}], "owner": {"reputation": 605, "user_id": 11611283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCMGs.png?s=128&g=1", "display_name": "Buffalo Collector", "link": "https://stackoverflow.com/users/11611283/buffalo-collector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58870936, "answer_count": 1, "score": 1, "last_activity_date": 1573796277, "creation_date": 1573688163, "question_id": 58847223, "link": "https://stackoverflow.com/questions/58847223/grouping-dataframe-filtering-by-group-size-and-by-value-of-column-in-one-line", "title": "Grouping DataFrame, filtering by group size and by value of column in one line?", "body": "<p>I have some DataFrame, <code>df</code>, where I want to groupby <code>'columnA'</code>, filter for members of groups with <code>len &gt;= 3</code>, and select members with the value <em>pizza</em> in <code>'columnB'</code>. </p>\n\n<p>The following line</p>\n\n<pre><code>df.groupby('columnA').filter(lambda x: len(x) &gt;= 3)['columnB'] == 'pizza' \n</code></pre>\n\n<p>returns the indices of all rows with a boolean in <code>'columnB'</code>. </p>\n\n<p>This works of course: </p>\n\n<pre><code>df2 = df.groupby('columnA').filter(lambda x: len(x) &gt;= 3)\ndf2 = df2[(df2['columnB'] == 'pizza')]\n</code></pre>\n\n<p><strong>But can I do this in one line?</strong></p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573689009, "post_id": 58847191, "comment_id": 103968227, "body": "Why shouldn&#39;t the result for Chris Cohen go on a line of its own?"}, {"owner": {"reputation": 65, "user_id": 10321989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-grIKTeSUkXI/AAAAAAAAAAI/AAAAAAAAAWo/DWZAfPqyGLs/photo.jpg?sz=128", "display_name": "Ellie", "link": "https://stackoverflow.com/users/10321989/ellie"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573689052, "post_id": 58847191, "comment_id": 103968241, "body": "Sorry, that was a mistake. I&#39;ll edit it"}], "answers": [{"tags": [], "owner": {"reputation": 1632, "user_id": 3286487, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/JObEe.jpg?s=128&g=1", "display_name": "y.luis", "link": "https://stackoverflow.com/users/3286487/y-luis"}, "is_accepted": false, "score": 1, "last_activity_date": 1573689238, "last_edit_date": 1573689238, "creation_date": 1573688783, "answer_id": 58847318, "question_id": 58847191, "link": "https://stackoverflow.com/questions/58847191/python-read-file-and-adjust-output-do-not-understand-error/58847318#58847318", "title": "Python - Read file and adjust output (do not understand error)", "body": "<p>The split method of the string does not accept a regular expression. You should use <a href=\"https://docs.python.org/2/library/re.html#re.split\" rel=\"nofollow noreferrer\">the one at re module</a>:</p>\n\n<pre><code>re.split(\"_+\", student)\n</code></pre>\n\n<p>besides that, the variable <em>name</em> does not exists, you should be using <em>full_name</em>:</p>\n\n<pre><code>print \"%s has an average grade of \" % full_name\n</code></pre>\n\n<p>In order to not print a new line, you should use a comma after the <a href=\"https://docs.python.org/2/reference/simple_stmts.html#the-print-statement\" rel=\"nofollow noreferrer\">print statement</a>:</p>\n\n<pre><code>print \"%s has an average grade of \" % full_name,\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1573688783, "creation_date": 1573688783, "answer_id": 58847319, "question_id": 58847191, "link": "https://stackoverflow.com/questions/58847191/python-read-file-and-adjust-output-do-not-understand-error/58847319#58847319", "title": "Python - Read file and adjust output (do not understand error)", "body": "<p><code>input_list = student.split(\"_+\")</code></p>\n\n<p><code>str.split()</code> does not recognize a regular expression. That would be parsed as the string <code>_+</code> and that doesn't match what you want to match.</p>\n\n<p>There is no index == 1 here, <code>final_grade = input_list[1]</code> because in the line above that attempted to split the string didn't, so its all in <code>input_list[0]</code>.</p>\n\n<p>Might want to import re and do that split using <code>re.split('_+', student)</code>.</p>\n"}], "owner": {"reputation": 65, "user_id": 10321989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-grIKTeSUkXI/AAAAAAAAAAI/AAAAAAAAAWo/DWZAfPqyGLs/photo.jpg?sz=128", "display_name": "Ellie", "link": "https://stackoverflow.com/users/10321989/ellie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573689572, "creation_date": 1573687897, "last_edit_date": 1573689066, "question_id": 58847191, "link": "https://stackoverflow.com/questions/58847191/python-read-file-and-adjust-output-do-not-understand-error", "title": "Python - Read file and adjust output (do not understand error)", "body": "<p>My goal is to write a program which has this file as input:</p>\n\n<pre><code>Anne Adema____________6.5 5.5 4.5 \nBea de Bruin__________6.7 7.2 7.7\nChris Cohen___________6.8 7.8 7.3 \nDirk Dirksen__________1.0 5.0 7.7 \n</code></pre>\n\n<p>And gives this as output:</p>\n\n<pre><code>Report for group 2b\nAnne Adema has an average grade of 5.5\nBea de Bruin has an average grade of 7.2 \nChris Cohen has an average grade of 7.3\nDirk Dirksen has an average grade of 4.6 End of report\n</code></pre>\n\n<p>This is what I have made but it doesn't work and I do not fully understand why. I think splitting the names from the grades is going wrong but I do not know how to solve that. </p>\n\n<pre><code>import sys\n\ndef print_grade(input_grades):\n    grades = input_grades.split()\n    grade1 = float(grades[0])\n    grade2 = float(grades[1])\n    grade3 = float(grades[2])\n\n    final_grade = (grade1 + grade2 + grade3) / 3\n    print \"%.2f.\" %final_grade\n\ndef print_names(student) :\n    input_list = student.split(\"_+\")\n    full_name = input_list[0]\n    final_grade = input_list[1]\n\n    print \"%s has an average grade of \" % names\n    print_grade(final_grade)\n\nstudents = open('input.txt').readlines()\n\nprint \"Report for group 2b\"\n\nfor student in students:\n    print_names(student)\n\nprint \"End of report\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"...\", line 25, in &lt;module&gt;\nReport for group 2b\n    print_names(student)\n  File \"...\", line 15, in print_names\n    final_grade = input_list[1]\nIndexError: list index out of range\n</code></pre>\n"}, {"tags": ["python", "django", "django-views", "django-sessions"], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 7475772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ePUNaGaixPg/AAAAAAAAAAI/AAAAAAAAFPU/zPq1QOEsjRg/photo.jpg?sz=128", "display_name": "Grzegorz Bokota", "link": "https://stackoverflow.com/users/7475772/grzegorz-bokota"}, "is_accepted": false, "score": 1, "last_activity_date": 1573689765, "creation_date": 1573689765, "answer_id": 58847442, "question_id": 58847172, "link": "https://stackoverflow.com/questions/58847172/cannot-store-dictionary-or-object-in-request-session-in-django-view/58847442#58847442", "title": "Cannot store dictionary or object in request session in django view", "body": "<p>You got response in error message. With your settings django serialize object to json and your dictionary contains non object which has no rule for serialize. \n<a href=\"https://docs.djangoproject.com/en/2.2/topics/http/sessions/#session-serialization\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<p>I suggest to read also <a href=\"https://docs.djangoproject.com/en/2.2/topics/http/sessions/#write-your-own-serializer\" rel=\"nofollow noreferrer\">Write your own serializer</a>. Then you can write something like this. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import uuid\nimport json\n\nclass SerializeUUIDEncoder(json.JSONEncoder):\n    def default(self, o):\n        if isinstance(o, uuid.UUID):\n            return {\"__uuid__\": True, \"val\": str(obj)}\n        return super().default(o)\n\n\ndef serialize_hook(dkt: dict):\n    if \"__uuid__\" in dkt:\n        return uuid.UUID(dkt[\"val\"])\n    return dkt\n\n\nclass OwnSerilizer:\n    def dumps(self, obj):\n        return json.dumps(obj, cls=SerializeUUIDEncoder).encode('latin-1')\n\n    def loads(self, data):\n        return json.loads(data.decode('latin-1'), object_hook=serialize_hook)\n</code></pre>\n\n<p>this code use standard argument of json library methods. You can read more in <a href=\"https://docs.python.org/3/library/json.html#json.dump\" rel=\"nofollow noreferrer\">dump</a> documentation and in <a href=\"https://docs.python.org/3/library/json.html#json.load\" rel=\"nofollow noreferrer\">load</a> documentation.</p>\n"}, {"comments": [{"owner": {"reputation": 1331, "user_id": 7475772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ePUNaGaixPg/AAAAAAAAAAI/AAAAAAAAFPU/zPq1QOEsjRg/photo.jpg?sz=128", "display_name": "Grzegorz Bokota", "link": "https://stackoverflow.com/users/7475772/grzegorz-bokota"}, "edited": false, "score": 0, "creation_date": 1573714157, "post_id": 58847612, "comment_id": 103974403, "body": "For using pickle there is build in serializer <code>serializers.PickleSerializer</code>. But pickle may not work with all session backends"}, {"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "reply_to_user": {"reputation": 1331, "user_id": 7475772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ePUNaGaixPg/AAAAAAAAAAI/AAAAAAAAFPU/zPq1QOEsjRg/photo.jpg?sz=128", "display_name": "Grzegorz Bokota", "link": "https://stackoverflow.com/users/7475772/grzegorz-bokota"}, "edited": false, "score": 0, "creation_date": 1573742387, "post_id": 58847612, "comment_id": 103989650, "body": "@GrzegorzBokota that is why I use the hex conversion in my code."}], "tags": [], "owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "is_accepted": false, "score": 1, "last_activity_date": 1573690998, "creation_date": 1573690998, "answer_id": 58847612, "question_id": 58847172, "link": "https://stackoverflow.com/questions/58847172/cannot-store-dictionary-or-object-in-request-session-in-django-view/58847612#58847612", "title": "Cannot store dictionary or object in request session in django view", "body": "<p>I use pickle's dumps() and loads() functions, and convert the bytes objects from these methods to/from hex like so:</p>\n\n<pre><code>import pickle\ndict = {'s':'string', 'i':1}\nhexdict = pickle.dumps(dict).hex()\n\n# the above hexdict should be JSON OK\n\ndict2 = pickle.loads(bytes.fromhex(hexdict))\nprint(dict2)\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573690998, "creation_date": 1573687768, "question_id": 58847172, "link": "https://stackoverflow.com/questions/58847172/cannot-store-dictionary-or-object-in-request-session-in-django-view", "title": "Cannot store dictionary or object in request session in django view", "body": "<p>I am trying to set a session in one view and read this session in another view. Trying to store a dictionary in session.</p>\n\n<pre><code>request.session['staffdict'] = staffdict\n</code></pre>\n\n<p>When i try to get dictionary from the session in second view :</p>\n\n<pre><code>staffdict = request.session.get('staffdict')\n</code></pre>\n\n<p>I get below error :</p>\n\n<blockquote>\n  <p>Django Version:   2.2.6\n  Exception Type: TypeError\n  Exception Value:<br>\n  Object of type 'UUID' is not JSON serializable\n  Exception Location: /usr/lib/python3.6/json/encoder.py in default, line 180\n  Python Executable:  /usr/local/bin/uwsgi\n  Python Version: 3.6.8</p>\n</blockquote>\n"}, {"tags": ["python", "python-3.x", "pip", "setuptools", "spacy"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9944295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df429d089e971ce1fc0ebf917c81333?s=128&d=identicon&r=PG&f=1", "display_name": "Alex M", "link": "https://stackoverflow.com/users/9944295/alex-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1574214646, "creation_date": 1574214646, "answer_id": 58945476, "question_id": 58847147, "link": "https://stackoverflow.com/questions/58847147/error-when-installing-spacy-using-pip-exit-status-1/58945476#58945476", "title": "Error when installing Spacy using PIP - exit status 1", "body": "<p>The issues was caused by Anaconda being 32bit whereas the OS was 64 bit. Reinstalled 64 bit version of Anaconda and everything is working smoothly.</p>\n"}], "owner": {"reputation": 1, "user_id": 9944295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df429d089e971ce1fc0ebf917c81333?s=128&d=identicon&r=PG&f=1", "display_name": "Alex M", "link": "https://stackoverflow.com/users/9944295/alex-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 58945476, "answer_count": 1, "score": 0, "last_activity_date": 1574214646, "creation_date": 1573687587, "last_edit_date": 1573703999, "question_id": 58847147, "link": "https://stackoverflow.com/questions/58847147/error-when-installing-spacy-using-pip-exit-status-1", "title": "Error when installing Spacy using PIP - exit status 1", "body": "<p>I am trying to install SpaCy in Anaconda prompt for Python 3.7.3 and getting error below. </p>\n\n<p>I have upgraded pip (to 19.3.1) and setuptools (to 41.6.0) to latest version.</p>\n\n<p>I need to use proxy and dont have (local) admin rights, so I can not setup virtual environmen.</p>\n\n<p>Any ideas what may help ? I am newby. Thank you!!</p>\n\n<pre><code>(base) C:\\&gt;python -m pip install --proxy INT%5Cuser:password@proxy:port spacy\nCollecting spacy\n  Using cached https://files.pythonhosted.org/packages/fe/e2/81233a60e63fa94bfbddbe2c0902d1c50d80ef33666630683e9b2486f501/spacy-2.2.2.tar.gz\n  Installing build dependencies ... error\n  ERROR: Command errored out with exit status 1:\n   command: 'C:\\ProgramData\\Anaconda3\\python.exe' 'C:\\ProgramData\\Anaconda3\\lib\\site-packages\\pip' install --ignore-installed --no-user --prefix 'C:\\Users\\u213356\\AppData\\Local\\Temp\\pip-build-env-3epvxcgn\\overlay' --no-warn-script-location --no-binary :none: --only-binary :none: -i https://pypi.org/simple -- setuptools\n       cwd: None\n  Complete output (7 lines):\n  WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('&lt;pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x03ED00B0&gt;: Failed to establish a new connection: [Errno 11001] getaddrinfo failed')': /simple/setuptools/\n  WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('&lt;pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x03ED0430&gt;: Failed to establish a new connection: [Errno 11001] getaddrinfo failed')': /simple/setuptools/\n  WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('&lt;pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x03ED0230&gt;: Failed to establish a new connection: [Errno 11001] getaddrinfo failed')': /simple/setuptools/\n  WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('&lt;pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x03ED0C50&gt;: Failed to establish a new connection: [Errno 11001] getaddrinfo failed')': /simple/setuptools/\n  WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('&lt;pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x03ED09B0&gt;: Failed to establish a new connection: [Errno 11001] getaddrinfo failed')': /simple/setuptools/\n  ERROR: Could not find a version that satisfies the requirement setuptools (from versions: none)\n  ERROR: No matching distribution found for setuptools\n  ----------------------------------------\nERROR: Command errored out with exit status 1: 'C:\\ProgramData\\Anaconda3\\python.exe' 'C:\\ProgramData\\Anaconda3\\lib\\site-packages\\pip' install --ignore-installed --no-user --prefix 'C:\\Users\\u213356\\AppData\\Local\\Temp\\pip-build-env-3epvxcgn\\overlay' --no-warn-script-location --no-binary :none: --only-binary :none: -i https://pypi.org/simple -- setuptools Check the logs for full command output.\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "data-science"], "comments": [{"owner": {"reputation": 434, "user_id": 5693199, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153748534338959/picture?type=large", "display_name": "Fish11", "link": "https://stackoverflow.com/users/5693199/fish11"}, "edited": false, "score": 1, "creation_date": 1573688475, "post_id": 58847129, "comment_id": 103968089, "body": "You&#39;re missing scientific notation"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 5661496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07ff78165efd3dd7cdf49bade4545c5?s=128&d=identicon&r=PG&f=1", "display_name": "Nimtar", "link": "https://stackoverflow.com/users/5661496/nimtar"}, "is_accepted": true, "score": 4, "last_activity_date": 1573690170, "last_edit_date": 1573690170, "creation_date": 1573688441, "answer_id": 58847263, "question_id": 58847129, "link": "https://stackoverflow.com/questions/58847129/user-defined-sigmoid-function-in-python/58847263#58847263", "title": "user-defined Sigmoid function in python", "body": "<p>6.900207837141513e-36 is scientific record for 0.00...06900207837141513 (I omitted 13 zeroes)</p>\n\n<p>You can read it as \"6.900... divided by 10^36\". In this case you probably can treat value as 0.</p>\n\n<p>See <a href=\"https://en.wikipedia.org/wiki/Scientific_notation#E_notation\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Scientific_notation#E_notation</a></p>\n"}, {"comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1573688648, "post_id": 58847287, "comment_id": 103968135, "body": "and <code>6.900207837141513e-36 &lt; 1</code>"}], "tags": [], "owner": {"reputation": 965, "user_id": 1839841, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/62609001da1c988ed120333b1bf7c378?s=128&d=identicon&r=PG&f=1", "display_name": "dan", "link": "https://stackoverflow.com/users/1839841/dan"}, "is_accepted": false, "score": 1, "last_activity_date": 1573688574, "creation_date": 1573688574, "answer_id": 58847287, "question_id": 58847129, "link": "https://stackoverflow.com/questions/58847129/user-defined-sigmoid-function-in-python/58847287#58847287", "title": "user-defined Sigmoid function in python", "body": "<pre><code>&gt;&gt;&gt; 6.900207837141513e-36 &gt; 0\nTrue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 0, "last_activity_date": 1573688622, "creation_date": 1573688622, "answer_id": 58847295, "question_id": 58847129, "link": "https://stackoverflow.com/questions/58847129/user-defined-sigmoid-function-in-python/58847295#58847295", "title": "user-defined Sigmoid function in python", "body": "<p>Note the <code>e-36</code> on the end of <code>6.900207837141513e-36</code>. This is equivalent to the <a href=\"https://en.wikipedia.org/wiki/Scientific_notation\" rel=\"nofollow noreferrer\">scientific notation</a> <code>6.900207837141513 * 10^-36</code>. In other words, it is a very small value that is basically zero.</p>\n"}], "owner": {"reputation": 5343, "user_id": 205929, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c0cf9d5bfde491833d0f8895020b882?s=128&d=identicon&r=PG", "display_name": "yokks", "link": "https://stackoverflow.com/users/205929/yokks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58847263, "answer_count": 3, "score": 0, "last_activity_date": 1573690170, "creation_date": 1573687448, "question_id": 58847129, "link": "https://stackoverflow.com/questions/58847129/user-defined-sigmoid-function-in-python", "title": "user-defined Sigmoid function in python", "body": "<p>I have one doubt on using user-defined sigmoid function(Logistic). I tried using numpy.exp &amp; math.exp for the sigmoid formula <code>(1 / 1+ e^-x)</code>.</p>\n\n<pre><code>1 / (1 + numpy.exp(-x))\n1 / (1 + math.exp(-x))\n</code></pre>\n\n<p>Both methods gives the value\u00a06.900207837141513e-36 for x =\u00a0-80.96151181531121. \nBut, we are expecting a value between 0  &amp; 1.\nAm I missing anything?</p>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 73862, "user_id": 3358272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1", "display_name": "r2evans", "link": "https://stackoverflow.com/users/3358272/r2evans"}, "reply_to_user": {"reputation": 41871, "user_id": 6530970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c261ba0849b06fa0b34a50df358d7fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Maurits Evers", "link": "https://stackoverflow.com/users/6530970/maurits-evers"}, "edited": false, "score": 2, "creation_date": 1573690909, "post_id": 58847127, "comment_id": 103968669, "body": "I can&#39;t find a duplicate for this. I confess that part of me wants to respond along the same lines as @MauritsEvers&#39; comment ... but another part wants to say <i>&quot;You&#39;re one of today&#39;s lucky 10,000.&quot;</i> (<a href=\"https://xkcd.com/1053/\" rel=\"nofollow noreferrer\">xkcd.com/1053</a>). user665997, I suggest that a little targeted research will save you time and snarky comments like mine here; and once you get past this hurdle in learning R, I believe that SO will again be a good resource for learning how to do things in R."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 2839580, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100003031121942/picture?type=large", "display_name": "user665997", "link": "https://stackoverflow.com/users/2839580/user665997"}, "edited": false, "score": 0, "creation_date": 1573768928, "post_id": 58847297, "comment_id": 104003701, "body": "That help! thanks!"}], "tags": [], "owner": {"reputation": 434, "user_id": 5693199, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153748534338959/picture?type=large", "display_name": "Fish11", "link": "https://stackoverflow.com/users/5693199/fish11"}, "is_accepted": true, "score": 2, "last_activity_date": 1573688979, "last_edit_date": 1573688979, "creation_date": 1573688659, "answer_id": 58847297, "question_id": 58847127, "link": "https://stackoverflow.com/questions/58847127/how-to-transform-the-uniform-in-python-into-something-similar-in-r/58847297#58847297", "title": "How to transform the uniform() in Python into something similar in R?", "body": "<p>Assuming you want a function that takes a random sample from a uniform distribution, there is an R function for that:</p>\n\n<p><a href=\"https://stat.ethz.ch/R-manual/R-devel/library/stats/html/Uniform.html\" rel=\"nofollow noreferrer\">https://stat.ethz.ch/R-manual/R-devel/library/stats/html/Uniform.html</a></p>\n\n<p>Specifically, use the <code>runif</code> function to generate n random samples from min to max.</p>\n\n<p>In your case, you could generate a 1000 by 20 matrix of uniform samples using the following code:</p>\n\n<pre><code>matrix(runif(test_size * predictors), ncol=predictors)\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 2839580, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100003031121942/picture?type=large", "display_name": "user665997", "link": "https://stackoverflow.com/users/2839580/user665997"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1573726811, "accepted_answer_id": 58847297, "answer_count": 1, "score": -3, "last_activity_date": 1573688979, "creation_date": 1573687447, "question_id": 58847127, "link": "https://stackoverflow.com/questions/58847127/how-to-transform-the-uniform-in-python-into-something-similar-in-r", "closed_reason": "Needs more focus", "title": "How to transform the uniform() in Python into something similar in R?", "body": "<p>I have been wanting to know how can I get a line of Python code that uses the uniform() function such as:</p>\n\n<pre><code>X_test = uniform(0, 1, size=(test_size, 20))\n</code></pre>\n\n<p>where test size is 1000 observations and 20 predictors, into an R code version. Much appreciated thanks!</p>\n"}, {"tags": ["python", "airflow"], "comments": [{"owner": {"reputation": 1326, "user_id": 6092420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24e00c77fc8fc5f977da388a142bf9a6?s=128&d=identicon&r=PG&f=1", "display_name": "absolutelydevastated", "link": "https://stackoverflow.com/users/6092420/absolutelydevastated"}, "edited": false, "score": 0, "creation_date": 1573693741, "post_id": 58847124, "comment_id": 103969292, "body": "Are you running Airflow in a container or locally? Either way, try running <code>bash</code> to check whether the command can be found. Also, maybe you should post the bash command you&#39;re running as well."}, {"owner": {"reputation": 1143, "user_id": 8237877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2529862c828cc8c57a818d191f10ba3?s=128&d=identicon&r=PG&f=1", "display_name": "PirateNinjas", "link": "https://stackoverflow.com/users/8237877/pirateninjas"}, "edited": false, "score": 1, "creation_date": 1573738526, "post_id": 58847124, "comment_id": 103987349, "body": "could you include the code for your task definition in your dag?"}, {"owner": {"reputation": 2423, "user_id": 948341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb0fa774e39f6d9b7efa1c9ca413b52?s=128&d=identicon&r=PG", "display_name": "brki", "link": "https://stackoverflow.com/users/948341/brki"}, "edited": false, "score": 0, "creation_date": 1574176844, "post_id": 58847124, "comment_id": 104133301, "body": "Is it a scheduled DAG run, or are you using <code>airflow test ...</code> from the command line?  It would be odd that <code>&#47;bin&#47;</code> is not on the <code>$PATH</code> for that process."}], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 8227552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0c3a4776c49821b3e2b02551616ea2?s=128&d=identicon&r=PG&f=1", "display_name": "Srule", "link": "https://stackoverflow.com/users/8227552/srule"}, "edited": false, "score": 0, "creation_date": 1578604308, "post_id": 58944754, "comment_id": 105502991, "body": "Thank you. I&#39;ve been struggling with the exact same issue. This fixed it."}], "tags": [], "owner": {"reputation": 177, "user_id": 4962779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ac74c302a0e3ddda89856574e6f63c?s=128&d=identicon&r=PG&f=1", "display_name": "ohss117", "link": "https://stackoverflow.com/users/4962779/ohss117"}, "is_accepted": false, "score": 5, "last_activity_date": 1574208634, "creation_date": 1574208634, "answer_id": 58944754, "question_id": 58847124, "link": "https://stackoverflow.com/questions/58847124/airflow-bashoperator-cant-find-bash/58944754#58944754", "title": "Airflow BashOperator can&#39;t find Bash", "body": "<p>It turns out I had to modify PATH variable in my systemctl file.</p>\n\n<p>Adding <code>:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin</code> to <code>PATH</code> fixed my problem.</p>\n\n<p>My setup is using Airflow + virtualenv managed through Systemctl on Centos 7.</p>\n\n<p>Airflow scheduler systemctl file</p>\n\n<pre><code>[Unit]\nDescription=Airflow scheduler daemon\nAfter=network.target postgresql.service mysql.service redis.service rabbitmq-server.service\nWants=postgresql.service mysql.service redis.service rabbitmq-server.service\n\n[Service]\nEnvironmentFile=/etc/sysconfig/airflow\nEnvironment=VIRTUAL_ENV=/home/airflow/virtualenvs/airflow_env\nEnvironment=PATH=/home/airflow/virtualenvs/airflow_env/bin:$PATH:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin\nUser=airflow\nGroup=airflow\nType=simple\nExecStart=/home/airflow/virtualenvs/airflow_env/bin/airflow scheduler\nRestart=always\nRestartSec=5s\nRuntimeDirectory=airflow\nRuntimeDirectoryMode=0775\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 4962779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ac74c302a0e3ddda89856574e6f63c?s=128&d=identicon&r=PG&f=1", "display_name": "ohss117", "link": "https://stackoverflow.com/users/4962779/ohss117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1574208634, "creation_date": 1573687421, "question_id": 58847124, "link": "https://stackoverflow.com/questions/58847124/airflow-bashoperator-cant-find-bash", "title": "Airflow BashOperator can&#39;t find Bash", "body": "<p>I'm using Airflow in Centos 7, using Python 3.7.</p>\n\n<p>When I run a Bash command through BashOperator, I run in to the following problem:</p>\n\n<pre><code>[2019-11-13 23:20:08,238] {taskinstance.py:1058} ERROR - [Errno 2] No such file or directory: 'bash': 'bash'\nTraceback (most recent call last):\n  File \"/home/airflow/virtualenvs/airflow_env/lib/python3.7/site-packages/airflow/models/taskinstance.py\", line 930, in _run_raw_task\n    result = task_copy.execute(context=context)\n  File \"/home/airflow/virtualenvs/airflow_env/lib/python3.7/site-packages/airflow/operators/bash_operator.py\", line 120, in execute\n    preexec_fn=pre_exec)\n  File \"/home/airflow/python/Python-3.7.5/Lib/subprocess.py\", line 800, in __init__\n    restore_signals, start_new_session)\n  File \"/home/airflow/python/Python-3.7.5/Lib/subprocess.py\", line 1551, in _execute_child\n    raise child_exception_type(errno_num, err_msg, err_filename)\nFileNotFoundError: [Errno 2] No such file or directory: 'bash': 'bash'\n</code></pre>\n\n<p>Is there a variable I need to pass to BashOperator so it knows to look for <code>/bin/bash</code>? In the source code, it appears that BashOperator opens a subprocess using <code>bash</code>; do I need to modify it to use <code>/bin/bash</code>?</p>\n"}, {"tags": ["python", "arrays", "string"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 1, "creation_date": 1573687784, "post_id": 58847123, "comment_id": 103967940, "body": "Use str(n).zfill(4). See <a href=\"https://stackoverflow.com/questions/733454/best-way-to-format-integer-as-string-with-leading-zeros\" title=\"best way to format integer as string with leading zeros\">stackoverflow.com/questions/733454/&hellip;</a>"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1573688204, "post_id": 58847123, "comment_id": 103968030, "body": "@jarmod <code>zfill()</code> wouldn&#39;t work when the number has to start with 0 (and truncated if needed)"}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "reply_to_user": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1573688495, "post_id": 58847123, "comment_id": 103968093, "body": "@Mohd I&#39;m not sure what you mean. Can you give me an example of an integer between 0 and 9999 that would be problematic?"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1573688545, "post_id": 58847123, "comment_id": 103968110, "body": "@jarmod OP&#39;s 4th example: <code>1235</code> -&gt; <code>0123</code>"}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "reply_to_user": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1573688868, "post_id": 58847123, "comment_id": 103968190, "body": "@Mohd OK thanks, I didn&#39;t read that final example. What a strange requirement. OK, something like: <code>str(n).zfill(4) if n &lt; 1000 else str(n&#47;&#47;10).zfill(4)</code>"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1573689186, "post_id": 58847123, "comment_id": 103968280, "body": "@jarmod Yes, I&#39;m not sure how <code>zfill()</code> is implemented but I think it would be faster than concatenating/slicing. I&#39;ll add it to my answer"}], "answers": [{"tags": [], "owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "is_accepted": false, "score": 1, "last_activity_date": 1573689264, "last_edit_date": 1573689264, "creation_date": 1573687838, "answer_id": 58847182, "question_id": 58847123, "link": "https://stackoverflow.com/questions/58847123/another-simplified-method-for-the-function-in-python/58847182#58847182", "title": "Another simplified method for the function in python", "body": "<p>You can use <code>4-len(a)</code> if the number is less than 1000 to determine the number of leading zeroes and otherwise <code>'0' + a[:3]</code> to slice the first three numbers of the string. For example:</p>\n\n<pre><code>def stringtoZ(n):\n    a = str(n)\n    return '0' * (4-len(a)) + a if n &lt; 1000 else '0' + a[:3]\n\nprint(stringtoZ(3), stringtoZ(123), stringtoZ(1234))\n# 0003 0123 0123\n</code></pre>\n\n<p>Another approach is what jarmod mentioned in the comment:</p>\n\n<pre><code>def stringtoZ(n):\n    return str(n).zfill(4) if n &lt; 1000 else str(n//10).zfill(4)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "is_accepted": false, "score": 0, "last_activity_date": 1573723341, "last_edit_date": 1573723341, "creation_date": 1573690744, "answer_id": 58847569, "question_id": 58847123, "link": "https://stackoverflow.com/questions/58847123/another-simplified-method-for-the-function-in-python/58847569#58847569", "title": "Another simplified method for the function in python", "body": "<p>If you want to check for valid input, try</p>\n\n<pre><code>def z(n):\n    if -1 &lt; n &lt; 1000  : return ('000'+str(n))[-4:]\n    if -1 &lt; n &lt; 10000 : return '0'+str(n//10)\n    raise ValueError('n = %d is out of range (0 \u2264 n &lt; 10000).'%n)\n</code></pre>\n\n<p>The first <code>if</code> catches all the <code>n &lt; 1000</code> numbers and returns the tail\nof a a longer string.</p>\n\n<p>The second if catches all the numbers in <code>999 &lt; n &lt; 10000</code> and uses\ninteger division (the <code>//</code> operator) to remove the last digit.</p>\n\n<p>The <code>raise</code> statement is reached only if <code>n</code> is outside the valid\ninterval, so we can raise an exception (<code>ValueError</code> seems\nappropriate), providing also an error message for the caller.</p>\n\n<p>Having previously defined <code>z(n)</code> in the interpreter we have</p>\n\n<pre><code>In [32]: z(4567)\nOut[32]: '0456'\n\nIn [33]: z(567)\nOut[33]: '0567'\n\nIn [34]: z(20000)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-34-3a36d9b24c14&gt; in &lt;module&gt;\n----&gt; 1 z(20000)\n\n&lt;ipython-input-26-d5602c2c4b24&gt; in z(n)\n      2     if -1 &lt; n &lt; 1000  : return ('000'+str(n))[-4:]\n      3     if -1 &lt; n &lt; 10000 : return '0'+str(n//10)\n----&gt; 4     raise ValueError('n = %d is out of range (0 \u2264 n &lt; 10000).'%n)\n\nValueError: n = 20000 is out of range (0 \u2264 n &lt; 10000).\n</code></pre>\n\n<p>And eventually an example of how one can manage the exception in their code:</p>\n\n<pre><code>In [35]: for n in (-1, 0, 1, 999, 9999, 10000):\n    ...:     try:\n    ...:         print('%8d \u2014\u2014\u2192'%n, z(n))\n    ...:     except ValueError as e:\n    ...:         print(e)\nn = -1 is out of range (0 \u2264 n &lt; 10000).\n       0 \u2014\u2014\u2192 0000\n       1 \u2014\u2014\u2192 0001\n     999 \u2014\u2014\u2192 0999\n    9999 \u2014\u2014\u2192 0999\nn = 10000 is out of range (0 \u2264 n &lt; 10000).\n\nIn [36]:\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11359368, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0LpGmKZA1NI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr7g5Xyqo4XiOY72Y0dGwoYry-zA/mo/photo.jpg?sz=128", "display_name": "Alice Langertton", "link": "https://stackoverflow.com/users/11359368/alice-langertton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1573723341, "creation_date": 1573687414, "last_edit_date": 1573688782, "question_id": 58847123, "link": "https://stackoverflow.com/questions/58847123/another-simplified-method-for-the-function-in-python", "title": "Another simplified method for the function in python", "body": "<p>I have to implement a function in python which returns a string of 4 characters from integers of 0 to 9999.\nThe value of the string should begin with 0.</p>\n\n<p>Example : </p>\n\n<p>input:</p>\n\n<pre><code>3\n22\n123\n1235\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>0003\n0022\n0123\n0123\n</code></pre>\n\n<p>The code that I have implemented is:</p>\n\n<pre><code>def stringtoZ(n):\n    a = str(n)\n    if(n &lt; 10):\n        string = \"0\" + \"00\" + a\n    elif (n &lt; 100):\n        string = \"0\" + \"0\" + a\n    elif (n &lt; 1000):\n        string = \"0\" + a\n    else:\n        string = \"0\" + a[:3]\n    return string;\n</code></pre>\n\n<p>Normally the result is correct, but as I am a beginner in python, I wanted to know if there is another way which can be easier to implement this? \nThank you so much!</p>\n"}, {"tags": ["python", "python-3.x", "standard-library"], "comments": [{"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1573687505, "post_id": 58847065, "comment_id": 103967872, "body": "Is this what you want? <a href=\"https://docs.python.org/3/library/\" rel=\"nofollow noreferrer\">docs.python.org/3/library</a>"}, {"owner": {"reputation": 2947, "user_id": 10191554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IbXJ.jpg?s=128&g=1", "display_name": "Angus Tay", "link": "https://stackoverflow.com/users/10191554/angus-tay"}, "edited": false, "score": 0, "creation_date": 1573688052, "post_id": 58847065, "comment_id": 103967995, "body": "Just use <code>pip list</code> in the terminal or cmd"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12352684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0b8285a18ff1ecc211612475d4a391?s=128&d=identicon&r=PG&f=1", "display_name": "CCCC_David", "link": "https://stackoverflow.com/users/12352684/cccc-david"}, "is_accepted": false, "score": 1, "last_activity_date": 1615492007, "creation_date": 1615492007, "answer_id": 66589502, "question_id": 58847065, "link": "https://stackoverflow.com/questions/58847065/are-any-standard-library-modules-missing-from-print-helpmodules/66589502#66589502", "title": "Are any standard library modules missing from `print( help(&#39;modules&#39;))`", "body": "<p>In Python 3.10 you can use <a href=\"https://docs.python.org/3.10/library/sys.html#sys.stdlib_module_names\" rel=\"nofollow noreferrer\">sys.stdlib_module_names</a>.</p>\n<p>You can also take a look at <a href=\"https://docs.python.org/3/library/sys.html#sys.builtin_module_names\" rel=\"nofollow noreferrer\">sys.builtin_module_names</a> if that is what you need.</p>\n"}], "owner": {"reputation": 1020, "user_id": 12119282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BvAPB.jpg?s=128&g=1", "display_name": "Samuel Muldoon", "link": "https://stackoverflow.com/users/12119282/samuel-muldoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1615492007, "creation_date": 1573686997, "question_id": 58847065, "link": "https://stackoverflow.com/questions/58847065/are-any-standard-library-modules-missing-from-print-helpmodules", "title": "Are any standard library modules missing from `print( help(&#39;modules&#39;))`", "body": "<p>In a very brief python script, we can write:</p>\n\n<pre><code>print( help('modules'))\n</code></pre>\n\n<p>This lists a great number of things, including the following:</p>\n\n<pre><code>PIL                 _weakrefset         html                secrets\n__future__          _winapi             http                select\n_abc                _xxsubinterpreters  idlelib             selectors\n_ast                abc                 imaplib             setuptools\n</code></pre>\n\n<p>Note that some non-standard libraries are included. For example, I have <code>PIL</code> installed for image processing. My question is, are any of the standard libraries <strong>missing</strong> from <code>print( help('modules'))</code>? Basically, I want to print a list of the names of all python standard libraries to file. My attempt is shown below:</p>\n\n<pre><code>import os\nimport pathlib as pl\nimport string\nfrom contextlib import redirect_stdout\n\n\nclass FileFilter:\n\n    def __init__(self, filepath):\n        filepath = pl.Path(str(filepath))\n        if os.path.exists(filepath):\n            os.remove(filepath)\n        # open in `append` mode\n        self._file = open(filepath, \"a\")\n        self.prev_was_comma = False\n\n    def write(self, stuff):\n        lamby = lambda ch:\\\n            \",\" if ch in string.whitespace else ch\n        mahp = map(lamby, str(stuff))\n        for ch in mahp:\n            if ch != \",\" or not self.prev_was_comma:\n                self._file.write(ch)\n            if ch == \",\":\n                self.prev_was_comma = True\n            else:\n                self.prev_was_comma = False\n\n    def __del__(self):\n        self._file.close()\n\n\nwith redirect_stdout(FileFilter(\"stdlibs.txt\")):\n    help('modules')\n\n# TODO:\n# remove opening line\n#     ,Please,wait,a,moment,while,I,gather,a,list,of,all,available,modules...,\n# remove closing line\n#     ,Enter,any,module,name,to,get,more,help.,Or,type,\"modules,spam\"\n#     to,search,for,modules,whose,name,or,summary,contain,the,string,\"spam\"., \n</code></pre>\n"}, {"tags": ["python", "django", "jinja2"], "comments": [{"owner": {"reputation": 27, "user_id": 6641974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3b813ed5c7df4d495292ba67c52a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Nufdriew", "link": "https://stackoverflow.com/users/6641974/nufdriew"}, "edited": false, "score": 0, "creation_date": 1573687129, "post_id": 58847046, "comment_id": 103967764, "body": "Thanks for the edit, my folder structure came out all wrong!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6641974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3b813ed5c7df4d495292ba67c52a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Nufdriew", "link": "https://stackoverflow.com/users/6641974/nufdriew"}, "edited": false, "score": 0, "creation_date": 1579650411, "post_id": 59814024, "comment_id": 105835132, "body": "Thanks, yes I tried that amongst many things. It was useful to learn about the debug mode but the problem turned out to be path related after all. I figured it out by working back from getting only the css file to show in the browser then making corrections to the css path name in the html file. Using Jinja2 the path name looks like: href=&quot;{{static(&#39;/appname/css/cssfilename.css&#39;)}}&quot;"}], "tags": [], "owner": {"reputation": 11, "user_id": 12743826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b09bf3ffe49c16c35b5395a63d89e436?s=128&d=identicon&r=PG&f=1", "display_name": "ima_hima", "link": "https://stackoverflow.com/users/12743826/ima-hima"}, "is_accepted": false, "score": 1, "last_activity_date": 1579465059, "creation_date": 1579465059, "answer_id": 59814024, "question_id": 58847046, "link": "https://stackoverflow.com/questions/58847046/load-css-file-with-jinja2-in-django/59814024#59814024", "title": "Load css file with Jinja2 in Django", "body": "<p>Did you try turning on debug mode? If it only stops working when debug is off, try this <a href=\"https://stackoverflow.com/questions/5836674/why-does-debug-false-setting-make-my-django-static-files-access-fail\">Why does DEBUG=False setting make my django Static Files Access fail?</a></p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 6641974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3b813ed5c7df4d495292ba67c52a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Nufdriew", "link": "https://stackoverflow.com/users/6641974/nufdriew"}, "is_accepted": true, "score": 0, "last_activity_date": 1579650771, "creation_date": 1579650771, "answer_id": 59850843, "question_id": 58847046, "link": "https://stackoverflow.com/questions/58847046/load-css-file-with-jinja2-in-django/59850843#59850843", "title": "Load css file with Jinja2 in Django", "body": "<p>Just to mark this question as answered now: the mistake I made was in using not quite the right syntax for the css file path name in the html header. I got only the css file to show in the browser then made corrections to the css path name in the html file. Using Jinja2 the path name looks like: href=\"{{static('/appname/css/cssfilename.css')}}\"  </p>\n\n<p>Make sure to include the parentheses, inside quotation mark and leading forward slash. </p>\n"}], "owner": {"reputation": 27, "user_id": 6641974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3b813ed5c7df4d495292ba67c52a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Nufdriew", "link": "https://stackoverflow.com/users/6641974/nufdriew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "accepted_answer_id": 59850843, "answer_count": 2, "score": 0, "last_activity_date": 1579650771, "creation_date": 1573686867, "last_edit_date": 1573686954, "question_id": 58847046, "link": "https://stackoverflow.com/questions/58847046/load-css-file-with-jinja2-in-django", "title": "Load css file with Jinja2 in Django", "body": "<p>I am using Jinja2 version 2.10 with Django. I get a not found error for my css stylesheet. I have read every question on Stackoverflow related to Jinja2 templating in Django and tried all the answers, still no success. </p>\n\n<p>My jinja2 config file (top level in my Django project): </p>\n\n<pre><code>from django.contrib.staticfiles.storage import staticfiles_storage\nfrom django.urls import reverse\nfrom jinja2 import Environment\n\n# This enables us to use Django template tags like {% url \u2018index\u2019 %} or {% static \u2018path/to/static/file.js\u2019 %} in our Jinja2 templates. \ndef environment(**options):\n    env = Environment(**options)\n    env.globals.update({\n        'static': staticfiles_storage.url,\n        'url': reverse,\n    })\n    return env\n</code></pre>\n\n<p>My html templates load as expected and the page shows in the browser, it's just the css load that isn't working. My folder structure is:</p>\n\n<p>Django_project </p>\n\n<pre><code>-- my_app folder\n      -- Jinja2\n      |      -- my_app\n      |          -- .html files\n      | -- static\n              -- my_app\n                  -- styles\n                      -- .css file\n</code></pre>\n\n<p>That is, jinja2 and static are both folders on the same level inside my_app folder. </p>\n\n<p>My base.html file:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n\n&lt;html lang=\"en\"&gt;\n &lt;head&gt;\n   &lt;meta charset=\"utf-8\"&gt;\n    &lt;!--bootstrap responsive viewport: mobile device optimization first --&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"&gt;\n    &lt;bootstrapp css goes here&gt;\n\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/my_app/static/styles/my_app.css\"&gt;\n\n    &lt;!-- defines an area that child templates fill --&gt;\n    {% block head %}\n\n    {% endblock head %}\n &lt;/head&gt;\n</code></pre>\n\n<p>I tried using the {% static 'path/goes/here.css' %} and got an error message on 'static' unrecognized. But if I use the normal {% load static %} Django tags at the top of the file, I get an error that 'load' is an unrecognized tag (which I expected because I'm using Jinja2). </p>\n\n<p>Bootstrap css loads. I've tried excluding the bootstrap links, that makes no difference. \nI've tried using a static prefix in Jinja2 environment globals, as explained <a href=\"https://stackoverflow.com/questions/42064874/jinja2-link-to-static-files\">here</a>, it seems to make no difference. </p>\n\n<p>I've read the Jinja2 and Django documentation and followed all the set up recommendations. css templates load in other Django projects where I'm not using Jinja2, using {% load static %}.</p>\n\n<p>Is hardcoding the href the right thing to do? I've tried every possible combination of path reference in case I was just putting the wrong path there. The error message is 'not found: path/etc/etc.css' </p>\n\n<p>Any help much appreciated, thanks!  </p>\n"}, {"tags": ["python", "math"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 4, "creation_date": 1573686856, "post_id": 58847034, "comment_id": 103967694, "body": "You don&#39;t have to take the mod only at the end, you can apply it at every step of the computation thus always working with small numbers."}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1573687010, "post_id": 58847034, "comment_id": 103967736, "body": "@Julien if you fleshed that out a bit, that could be an answer."}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 1, "creation_date": 1573687255, "post_id": 58847034, "comment_id": 103967796, "body": "yes, i would definitely give you a checkmark for an answer, i think i know where your going with this. I&#39;m actually trying to work through this now, but kinda stuck, what number do you use at each step?"}, {"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "edited": false, "score": 1, "creation_date": 1573687856, "post_id": 58847034, "comment_id": 103967959, "body": "Also see <a href=\"https://en.wikipedia.org/wiki/Modular_exponentiation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Modular_exponentiation</a>"}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 1, "creation_date": 1573690540, "post_id": 58847034, "comment_id": 103968594, "body": "You should be able to get an understanding of this by doing some examples by hand and working out the algorithm complexity."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1573720825, "post_id": 58847034, "comment_id": 103977301, "body": "math on small numbers is <code>O(1)</code> but on big ones is not ... even simple addition is <code>O(n)</code> and multiplication is between <code>O(3*n^1.58)</code> and  <code>O(n^2)</code> or even less for more advanced stuff on really big numbers. so if you take modulo each multiplication step  (<code>modmul</code>) then you limit the numbers to your modulo staying small ... making the <code>modpow</code> much much faster"}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": true, "score": 6, "last_activity_date": 1573687684, "last_edit_date": 1573687684, "creation_date": 1573687330, "answer_id": 58847110, "question_id": 58847034, "link": "https://stackoverflow.com/questions/58847034/why-is-pownum-power-mod-so-much-faster-than-num-power-mod/58847110#58847110", "title": "Why is pow(num, power, mod) so much faster than (num ** power) % mod?", "body": "<p>You can experience this as a human being. Suppose you want to answer the following question:</p>\n\n<blockquote>\n  <p>What is the last digit in a decimal representation of 3<sup>100</sup>?</p>\n</blockquote>\n\n<p>To answer this, you can calculate 3<sup>100</sup> while tracking only the last digit:</p>\n\n<pre><code>3^5 = 243 = 3 mod 10\n3^25 = (3^5)^5 = 3 mod 10\n3^50 = (3^25)^2 = 9 mod 10\n3^100 = (3^50)^2 = 1 mod 10\n</code></pre>\n\n<p>So the last digit is 1. Now imagine calculating all digits of 3<sup>100</sup>, just to throw them all away, except for the last one... Too tedious to be practical.</p>\n\n<p>The considerations above hold also for calculation in python.</p>\n"}], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1599330667, "accepted_answer_id": 58847110, "answer_count": 1, "score": 2, "last_activity_date": 1573690343, "creation_date": 1573686751, "last_edit_date": 1573690343, "question_id": 58847034, "link": "https://stackoverflow.com/questions/58847034/why-is-pownum-power-mod-so-much-faster-than-num-power-mod", "closed_reason": "Duplicate", "title": "Why is pow(num, power, mod) so much faster than (num ** power) % mod?", "body": "<p>I have a question, how does </p>\n\n<pre><code>pow(num, power, mod)\n</code></pre>\n\n<p>work so much faster than </p>\n\n<pre><code>(num**power)%mod\n</code></pre>\n\n<p>On large numbers the second is unusable, so i'm wondering how pow() works. How does it work to be so much faster, what is the underpinning of how it works with mod to calculate an answer so much faster than</p>\n\n<pre><code>(num**power)%mod.\n\n</code></pre>\n\n<p>(num * * power)%mod is unusable with larger numbers </p>\n\n<p>so i'm wondering what trick pow() uses to calculate the answer so quickly? Does it mod first, then power? Hopefully somebody can help me understand how this works.</p>\n\n<pre><code>import time\n\nshared_Prime = 1031267\nbase_prime = 111029\n\nsecret_num = 103123\n\n\nstart = time.time()\nA = (secret_num**base_prime) % shared_Prime\nend = time.time()\nprint(end - start)\n0.1082313060760498\n\nstart = time.time()\nB = pow(secret_num, base_prime, shared_Prime)\nend = time.time()\nprint(end - start)\n8.916854858398438e-05\n\nA==B\nTrue\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 11598950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63162face707e9aaeee28df958e51e0d?s=128&d=identicon&r=PG&f=1", "display_name": "Gromit", "link": "https://stackoverflow.com/users/11598950/gromit"}, "edited": false, "score": 1, "creation_date": 1573713877, "post_id": 58847341, "comment_id": 103974293, "body": "Didn&#39;t know that seeing (600, 600) could make a grown man so happy, thanks alot for your help this have been a real head scratcher of mine for awhile :)"}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": true, "score": 0, "last_activity_date": 1573728304, "last_edit_date": 1573728304, "creation_date": 1573688949, "answer_id": 58847341, "question_id": 58847029, "link": "https://stackoverflow.com/questions/58847029/cover-art-size-from-a-mp3-with-python/58847341#58847341", "title": "Cover art size from a MP3 with Python", "body": "<p>You can use <a href=\"https://pypi.org/project/stagger/\" rel=\"nofollow noreferrer\">stagger</a> and <a href=\"https://pypi.org/project/Pillow/\" rel=\"nofollow noreferrer\">PIL</a>, i.e.:</p>\n\n<pre><code>import stagger, io, traceback\nfrom PIL import Image\n\ntry:\n    mp3 = stagger.read_tag('Menuetto.mp3')\n    im = Image.open(io.BytesIO(mp3[stagger.id3.APIC][0].data))\n    print(im.size)\n    # (300, 300)\n    # im.save(\"cover.jpg\") # save cover to file\nexcept:\n    pass\n    print(traceback.format_exc())\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11598950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63162face707e9aaeee28df958e51e0d?s=128&d=identicon&r=PG&f=1", "display_name": "Gromit", "link": "https://stackoverflow.com/users/11598950/gromit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58847341, "answer_count": 1, "score": 2, "last_activity_date": 1573728304, "creation_date": 1573686721, "question_id": 58847029, "link": "https://stackoverflow.com/questions/58847029/cover-art-size-from-a-mp3-with-python", "title": "Cover art size from a MP3 with Python", "body": "<p>I'am trying to write a script that gives me the dimension of the Cover art in a mp3 file, the furthest I've is via Mutgen doing:</p>\n\n<pre><code>audiofile = mutagen.File(wavefile, easy=False)\nprint(audiofile.tags)\n</code></pre>\n\n<p>but then from that raw output how can I extract the dimensions like 400x400</p>\n"}, {"tags": ["python", "function", "logging", "time", "refresh"], "comments": [{"owner": {"reputation": 1491, "user_id": 996946, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a84158250c6a89b0e4647d555d3ae7f5?s=128&d=identicon&r=PG", "display_name": "Alex 75", "link": "https://stackoverflow.com/users/996946/alex-75"}, "edited": false, "score": 0, "creation_date": 1573687221, "post_id": 58847014, "comment_id": 103967786, "body": "Hi Wil, There are many ways to measure &quot;elapsed time&quot; in Python. Do a simple search and choose the easiest or more adapt for your case. if you are looking for some specific function in Selenium, make it clear, because that does not came out from the question."}, {"owner": {"reputation": 3465, "user_id": 803194, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/517b0b537f276b8dcf84c55ed078035a?s=128&d=identicon&r=PG", "display_name": "blues", "link": "https://stackoverflow.com/users/803194/blues"}, "edited": false, "score": 0, "creation_date": 1573742104, "post_id": 58847014, "comment_id": 103989440, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20026493/how-to-measure-page-download-time-with-selenium\">How to measure page download time with Selenium</a>"}], "owner": {"reputation": 1, "user_id": 12369640, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA3a15uMuQdi0pIsyXW2JkJtNmT22GRo8Wh6GdjyQ=k-s128", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/12369640/will-alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 8, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573686621, "creation_date": 1573686621, "question_id": 58847014, "link": "https://stackoverflow.com/questions/58847014/python-function-to-log-refresh-times-of-a-web-page", "title": "Python function to log refresh times of a web page", "body": "<p>I am trying to write a program that will refresh a webpage and log the time it takes to refresh the webpage. So far I have this :</p>\n\n<pre><code>from selenium import webdriver\ndriver = webdriver.GoogleChrome()\ndriver.get(\"https://www.wikipedia.org/\")\ndriver.refresh()\n</code></pre>\n\n<p>I was wondering how I would go about timing the page refreshing. I am not sure where to find the loading time or how to calculate it</p>\n"}, {"tags": ["python", "sql", "sqlalchemy", "pyramid"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1573708415, "post_id": 58847008, "comment_id": 103972570, "body": "Try some of these <a href=\"https://stackoverflow.com/search?q=%5Bsqlalchemy%5D+left+join+subquery\">stackoverflow.com/search?q=%5Bsqlalchemy%5D+left+join+subque&zwnj;&#8203;ry</a>, they should at least give you an idea how to go about creating the query in SQLA."}, {"owner": {"reputation": 91, "user_id": 5365095, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156101120105634/picture?type=large", "display_name": "Marc Tanne", "link": "https://stackoverflow.com/users/5365095/marc-tanne"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1574097314, "post_id": 58847008, "comment_id": 104100779, "body": "I came up with this:  <code>url_subquery = request.dbsession.query(Url).filter(Url.url_type_id == 3).subquery() cameras = request.dbsession.query(Camera, url_subquery.c.url).outerjoin(Camera_Url_Sets, Camera.uuid == Camera_Url_Sets.camera_uuid).join(url_subquery, Camera_Url_Sets.url_set_uuid == url_subquery.c.url_set_uuid) camera_group_cameras = cameras.filter(Camera.camera_groups_uuid == camera_groups_uuid).all()</code> That was the closest I was able to get"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1574099921, "post_id": 58847008, "comment_id": 104102063, "body": "Could you please edit your question to include your attempt and perhaps a word or two about how it&#39;s not yet working as you&#39;d expect, if so."}, {"owner": {"reputation": 91, "user_id": 5365095, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156101120105634/picture?type=large", "display_name": "Marc Tanne", "link": "https://stackoverflow.com/users/5365095/marc-tanne"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1574221162, "post_id": 58847008, "comment_id": 104150476, "body": "just added the closest thing I have."}, {"owner": {"reputation": 8183, "user_id": 2527433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c229e643ed27e10d4c943cc51229478?s=128&d=identicon&r=PG", "display_name": "Hieu Nguyen", "link": "https://stackoverflow.com/users/2527433/hieu-nguyen"}, "edited": false, "score": 0, "creation_date": 1579164668, "post_id": 58847008, "comment_id": 105676029, "body": "You should edit your question to include your models, current attempt&#39;s result and the result you are expecting."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 5365095, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156101120105634/picture?type=large", "display_name": "Marc Tanne", "link": "https://stackoverflow.com/users/5365095/marc-tanne"}, "is_accepted": false, "score": 0, "last_activity_date": 1579548705, "creation_date": 1579548705, "answer_id": 59829789, "question_id": 58847008, "link": "https://stackoverflow.com/questions/58847008/convert-raw-postgresql-into-sqlalchemy-orm-query-for-a-pyramid-application/59829789#59829789", "title": "Convert raw PostgreSQL into SQLAlchemy ORM query for a Pyramid Application", "body": "<p>I got this figured out. The solution turned out to be:</p>\n\n<pre><code>url_subquery = request.dbsession.query(Url).filter(Url.url_type_id == 3, Url.enabled == True, Url.verified == True).subquery()\ncameras = request.dbsession.query(Camera, url_subquery.c.url)\\\n    .outerjoin(Camera_Url_Sets, Camera.uuid == Camera_Url_Sets.camera_uuid)\\\n    .outerjoin(url_subquery, Camera_Url_Sets.url_set_uuid == url_subquery.c.url_set_uuid)\nif request.params.get('guardbox'):\n    camera_group_cameras = cameras.filter(Camera.camera_groups_uuid == camera_groups_uuid, Camera.magic_camera_box == guardbox).order_by(asc(Camera.name)).all()\nelse:\n    camera_group_cameras = cameras.filter(Camera.camera_groups_uuid == camera_groups_uuid).order_by(asc(Camera.name)).all()\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5365095, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156101120105634/picture?type=large", "display_name": "Marc Tanne", "link": "https://stackoverflow.com/users/5365095/marc-tanne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579548705, "creation_date": 1573686589, "last_edit_date": 1574221128, "question_id": 58847008, "link": "https://stackoverflow.com/questions/58847008/convert-raw-postgresql-into-sqlalchemy-orm-query-for-a-pyramid-application", "title": "Convert raw PostgreSQL into SQLAlchemy ORM query for a Pyramid Application", "body": "<p>I have a rather complex SQL query below that I need to convert into an ORM query for our Pyramid application: </p>\n\n<pre><code>SELECT cameras. *, b.url\nFROM cameras\nLEFT OUTER JOIN camera_url_sets ON cameras.uuid = camera_url_sets.camera_uuid\nLEFT JOIN(SELECT url_set_uuid, url\nFROM urls\nWHERE url_type_id = 3) as b ON camera_url_sets.url_set_uuid = b.url_set_uuid\n</code></pre>\n\n<p>For example: </p>\n\n<pre><code>SELECT * from cameras WHERE cameras.camera_groups_uuid == `camera_groups_uuid`;\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>request.dbsession.query(Camera)\ncamera_group_cameras = query.filter(Camera.camera_groups_uuid == camera_groups_uuid).all()\n</code></pre>\n\n<p>I am struggling to perform this type of SQL to ORM conversion for the above SQL</p>\n\n<p>What I have so far is close, but it does not seem to link the tables correctly. It keeps generating a list of tuples. </p>\n\n<pre><code>url_subquery = request.dbsession.query(Url).filter(Url.url_type_id == 3, Url.enabled == True).subquery()\ncameras = request.dbsession.query(Camera, Url.url)\\\n            .outerjoin(Camera_Url_Sets, Camera.uuid == Camera_Url_Sets.camera_uuid)\\\n            .outerjoin(url_subquery, Camera_Url_Sets.url_set_uuid == url_subquery.c.url_set_uuid)\\\n            .filter(Camera.camera_groups_uuid == camera_groups_uuid).all()\n</code></pre>\n"}, {"tags": ["python", "arrays", "string", "utf-8", "encode"], "comments": [{"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 1, "creation_date": 1573689198, "post_id": 58847006, "comment_id": 103968281, "body": "<code>b&#39;\\x43\\x44&#39;</code> and <code>b&#39;CD&#39;</code> are the same byte string, just written differently. Check this expression: <code>b&#39;\\x43\\x44&#39; == b&#39;CD&#39;</code>. It&#39;s like writing <code>3.0</code> or <code>3.00000</code> or <code>3e0</code> for all the same number."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9448512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alice Sigane", "link": "https://stackoverflow.com/users/9448512/alice-sigane"}, "edited": false, "score": 0, "creation_date": 1573688535, "post_id": 58847184, "comment_id": 103968102, "body": "Thanks a lot ! I get what you say. Actually I wanted to get b&quot;\\x43\\x44&quot;, but it&#39;s okay. The most important is that i understand what Python is doing."}], "tags": [], "owner": {"reputation": 570, "user_id": 9403538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da268da2db6f3c7ccd94074524e4c184?s=128&d=identicon&r=PG&f=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/9403538/jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1573833223, "last_edit_date": 1573833223, "creation_date": 1573687849, "answer_id": 58847184, "question_id": 58847006, "link": "https://stackoverflow.com/questions/58847006/how-to-encoding-a-string-into-a-bytearray-using-utf-8/58847184#58847184", "title": "How to encoding a string into a bytearray using utf-8?", "body": "<p>One of the major changes from Python 2 to 3 was with the str data type. More about that <a href=\"https://medium.com/better-programming/strings-unicode-and-bytes-in-python-3-everything-you-always-wanted-to-know-27dc02ff2686\" rel=\"nofollow noreferrer\">here</a>. Basically, they try their hardest to be human readable at all times, which can lead to some interesting and frustrating things when trying to keep hex values in a string. The b in front of a string tells python that it is encoded, so your function actually is working, but it is displayed as human readable. To show this, simply try:</p>\n\n<pre><code>b'CD'.hex()\n</code></pre>\n\n<p>or, more specifically:</p>\n\n<pre><code>'CD'.encode().hex()\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>'4344'\n</code></pre>\n\n<p>EDIT: To clarify, a python <code>str</code> will always represent ASCII as ASCII. This can be shown by entering the following into a console:</p>\n\n<pre><code>\"r\u00e9sum\u00e9\".encode(\"utf-8\")\n</code></pre>\n\n<p>which will yield:</p>\n\n<pre><code>b'r\\xc3\\xa9sum\\xc3\\xa9'\n</code></pre>\n\n<p>Notice that all ASCII is rendered as such and non-ASCI is represented by bytes. Also notice something key, UTF-8 characters can be represented with anything form 1 to 4 bytes (where a byte is 8 bits). The entire ASCII set on the other hand can be represented with only 7 bits, leaving all ASCII bytes zero padded.</p>\n\n<p>So again, your output is <code>b'\\x43\\x44'</code>, it is just visually represented as <code>b'CD'</code>. If you passed this to a c program to, say, exploit a buffer overflow, it recognizes the string as <code>b'\\x43\\x44'</code> as you desire.</p>\n\n<p>To show this, try:</p>\n\n<pre><code>if b'\\x43\\x44' == b'CD':\n    print(True, b'\\x43\\x44')\nelse:\n    print(False)\n</code></pre>\n\n<p>Which will print: <code>True b'CD'</code></p>\n"}, {"comments": [{"owner": {"reputation": 570, "user_id": 9403538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da268da2db6f3c7ccd94074524e4c184?s=128&d=identicon&r=PG&f=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/9403538/jacob"}, "edited": false, "score": 0, "creation_date": 1573774083, "post_id": 58847377, "comment_id": 104005411, "body": "But this does not do what the OP wants, as you are putting in a byte array. If you already have the byte array, why not just use it, rather than putting in a function to get the same thing out?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 570, "user_id": 9403538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da268da2db6f3c7ccd94074524e4c184?s=128&d=identicon&r=PG&f=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/9403538/jacob"}, "edited": false, "score": 0, "creation_date": 1573775912, "post_id": 58847377, "comment_id": 104005849, "body": "@jacob: Perhaps I misunderstood what the OP meant by &quot;I want to obtain <code>b&quot;\\x43\\x44&quot;</code> \u2014 which I took to mean literally a string with exactly those characters in it."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 1, "last_activity_date": 1573689195, "creation_date": 1573689195, "answer_id": 58847377, "question_id": 58847006, "link": "https://stackoverflow.com/questions/58847006/how-to-encoding-a-string-into-a-bytearray-using-utf-8/58847377#58847377", "title": "How to encoding a string into a bytearray using utf-8?", "body": "<p>You could get what you want by combining and formatting each byte of the bytearray manually.</p>\n\n<pre><code>def toTab(strMessage):\n    return 'b\"{}\"'.format(''.join(r'\\x{:0x}'.format(b) for b in strMessage))\n\nmsg = b\"\\x43\\x44\"\nprint(toTab(msg))  # -&gt; b\"\\x43\\x44\"\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9448512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alice Sigane", "link": "https://stackoverflow.com/users/9448512/alice-sigane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1573833223, "creation_date": 1573686575, "last_edit_date": 1573688067, "question_id": 58847006, "link": "https://stackoverflow.com/questions/58847006/how-to-encoding-a-string-into-a-bytearray-using-utf-8", "title": "How to encoding a string into a bytearray using utf-8?", "body": "<p>I want to encode a string in a byte array using utf-8. For example, for the string <code>\"CD\"</code> I want to obtain <code>b\"\\x43\\x44\"</code>. I have tried this, but it's not working: </p>\n\n<pre><code>def toTab(strMessage):\n    return strMessage.encode('utf-8')\n</code></pre>\n\n<p>and I get <code>b'CD'</code>, which is not the result I want.</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "edited": false, "score": 0, "creation_date": 1573691609, "post_id": 58847004, "comment_id": 103968842, "body": "You need to post more code as the problem isn&#39;t likely in this snippet. For starters, all but the first of these statements should be <code>elif</code>. Or even better, turn this long switch statement into a dictionary of moves or something to avoid laboriously typing out each possible if statement."}, {"owner": {"reputation": 9, "user_id": 12369632, "user_type": "registered", "profile_image": "https://graph.facebook.com/2492889317592958/picture?type=large", "display_name": "Dino", "link": "https://stackoverflow.com/users/12369632/dino"}, "reply_to_user": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "edited": false, "score": 0, "creation_date": 1573697954, "post_id": 58847004, "comment_id": 103970167, "body": "its ok I was able to fix it but thank you"}], "owner": {"reputation": 9, "user_id": 12369632, "user_type": "registered", "profile_image": "https://graph.facebook.com/2492889317592958/picture?type=large", "display_name": "Dino", "link": "https://stackoverflow.com/users/12369632/dino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573686568, "creation_date": 1573686568, "question_id": 58847004, "link": "https://stackoverflow.com/questions/58847004/turtles-moving-on-a-board-game", "title": "Turtles moving on a board game", "body": "<p>I am currently creating Candyland in Python and I'm using turtles for the board. After the first turn the turtles are in a stopped position but on the second turn I created a ton of if statements for the turtles positions such as</p>\n\n<pre><code>if P1.pos() == y10:\n    if draw2 == \"Red\":\n        P1.goto(r11)\n    if draw2 == \"Red Red\":\n        P1.goto(r12)\n    if draw2 == \"Purple\":\n        P1.goto(p11)\n    if draw2 == \"Purple Purple\":\n        P1.goto(p12)\n    if draw2 == \"Yellow\":\n        P1.goto(y11)\n    if draw2 == \"Yellow Yellow\":\n        P1.goto(y12)\n    if draw2 == \"Blue\":\n        P1.goto(b10)\n    if draw2 == \"Blue Blue\":\n        P1.goto(b11)\n    if draw2 == \"Orange\":\n        P1.goto(o10)\n    if draw2 == \"Orange Orange\":\n        P1.goto(o11)\n    if draw2 == \"Green\":\n        P1.goto(g10)\n    if draw2 == \"Green Green\":\n        P1.goto(g11)\n</code></pre>\n\n<p>my issue is that the turtles now will go all the way to the end because there is an if statement like the one above for every space on the board. How do i make the turtles stop after one movement so that they don't end the game on the second turn. </p>\n"}, {"tags": ["python", "contextmanager"], "comments": [{"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 1, "creation_date": 1573686806, "post_id": 58846993, "comment_id": 103967678, "body": "The expression <code>l1 and l2 and l3</code> here would evaluate to <code>l3</code>. Your context manager is only managing lock <code>l3</code>."}], "answers": [{"tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": true, "score": 3, "last_activity_date": 1573687014, "creation_date": 1573687014, "answer_id": 58847067, "question_id": 58846993, "link": "https://stackoverflow.com/questions/58846993/multiple-context-managers-in-a-with-statement-in-python/58847067#58847067", "title": "Multiple context managers in a &quot;with&quot; statement in python", "body": "<p>To understand this, consider how <code>and</code> works in Python.</p>\n\n<p>The result of the expression <code>x and y</code> is equivalent to <code>y if x else x</code>, except that it only evaluates <code>x</code> once. That is, when <code>bool(x)</code> is <code>True</code>, the <code>and</code> operator results in <code>y</code>, otherwise it results in <code>x</code> (and doesn't evaluate <code>y</code>).</p>\n\n<p>Unless an object defines its own <code>__bool__</code> dunder method, <code>bool(obj)</code> will generally be <code>True</code>. This is the case for lock objects. So <code>bool(l1)</code> is <code>True</code>, and the expression <code>l1 and l2 and l3</code> evaluates as <code>l2 and l3</code>. Then since <code>bool(l2)</code> is <code>True</code>, this expression evaluates as <code>l3</code>.</p>\n\n<p>So the <code>with</code> statement ends up managing the lock <code>l3</code>, and therefore that's the one which is locked in the body of the <code>with</code> statement. As you note, if you want to manage multiple locks at once, you should pass them separated by commas.</p>\n"}], "owner": {"reputation": 45, "user_id": 5220956, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153144684387992/picture?type=large", "display_name": "Arunkumar Navasiva", "link": "https://stackoverflow.com/users/5220956/arunkumar-navasiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58847067, "answer_count": 1, "score": 0, "last_activity_date": 1573687014, "creation_date": 1573686489, "question_id": 58846993, "link": "https://stackoverflow.com/questions/58846993/multiple-context-managers-in-a-with-statement-in-python", "title": "Multiple context managers in a &quot;with&quot; statement in python", "body": "<p>I'm curious why the following code:</p>\n\n<pre><code>l1= threading.Lock()\nl2= threading.Lock()\nl3=threading.Lock()\nwith l1 and l2 and l3:\n  print l1.locked()\n  print l2.locked()\n  print l3.locked()\n</code></pre>\n\n<p>prints this:</p>\n\n<pre><code>False\nFalse\nTrue\n</code></pre>\n\n<p>I realize that the right syntax is:</p>\n\n<pre><code>with l1, l2, l3:\n</code></pre>\n\n<p>but I'm trying to find an explanation for why only l3 was locked.</p>\n"}, {"tags": ["python", "regex", "text"], "comments": [{"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 2, "creation_date": 1573686855, "post_id": 58846990, "comment_id": 103967691, "body": "@toolic While we&#39;re at it, we can ditch the square brackets ` {14}`. @Rahul it looks like you&#39;re new to regex are confused about what some of the common special characters represent. I&#39;d recommend going to regex101.com and experimenting, or check out the answer to this question for a general regex reference: <a href=\"https://stackoverflow.com/questions/22937618/reference-what-does-this-regex-mean\" title=\"reference what does this regex mean\">stackoverflow.com/questions/22937618/&hellip;</a>"}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 2, "creation_date": 1573686856, "post_id": 58846990, "comment_id": 103967693, "body": "You could match 14 spaces and 1-11 times the character class <code>[A-Z0-9]</code> in 2 groups and replace with the 2 groups <code>\\1extraspaceshere\\2</code> like <code>^( {14})([0-9A-Z]{1,11})</code> see <a href=\"https://regex101.com/r/DG3FNF/1\" rel=\"nofollow noreferrer\">regex101.com/r/DG3FNF/1</a>"}, {"owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "reply_to_user": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1573687193, "post_id": 58846990, "comment_id": 103967781, "body": "@The fourth bird: Thanks, This sounds helpful. I&#39;m going through this link and try to to incorporate changes. Will post in case of any issue or if it works."}, {"owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "reply_to_user": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1573687307, "post_id": 58846990, "comment_id": 103967810, "body": "@CAustin: Thank You for sharing the link , I&#39;m new indeed but will try to go through this link and make changes for my requirement."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 0, "creation_date": 1573687592, "post_id": 58847109, "comment_id": 103967897, "body": "@Jayg_Code: Thank you for the answer, i&#39;m checking this one. shall post update in few minutes."}, {"owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 0, "creation_date": 1573687630, "post_id": 58847109, "comment_id": 103967906, "body": "@CAustin: Sure will try to use multiplier as well"}, {"owner": {"reputation": 416, "user_id": 2390269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80641e2edac30d5c84e24e94bd1a22?s=128&d=identicon&r=PG", "display_name": "jayg_code", "link": "https://stackoverflow.com/users/2390269/jayg-code"}, "reply_to_user": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 1, "creation_date": 1573687991, "post_id": 58847109, "comment_id": 103967982, "body": "@Rahul, I&#39;d like to add that, since you&#39;re just after the characters after the space, you&#39;re only really after the first capture group (i.e., what&#39;s in between the parentheses). I&#39;ve edited my answer to reflect that."}, {"owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 0, "creation_date": 1573688334, "post_id": 58847109, "comment_id": 103968053, "body": "thank you , i see the updates , the code is searching and matching the string but still not able to add the spaces. I&#39;m getting the same output as input in file as well if i a printing the line         print (line)         re.sub(pattern, r&#39;34ActualSpacesEntered\\1&#39;, line)         print (line)"}, {"owner": {"reputation": 416, "user_id": 2390269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80641e2edac30d5c84e24e94bd1a22?s=128&d=identicon&r=PG", "display_name": "jayg_code", "link": "https://stackoverflow.com/users/2390269/jayg-code"}, "reply_to_user": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 1, "creation_date": 1573688670, "post_id": 58847109, "comment_id": 103968143, "body": "I&#39;ve edited my answer again so you replace the value of the <code>line</code> variable with <code>re.sub</code>&#39;s output."}, {"owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 0, "creation_date": 1573689292, "post_id": 58847109, "comment_id": 103968301, "body": "Ohh got mistake , was not storing in line. Thanks a lot :) come to Mumbai will give you Party :P One last question when i am writing this output to another file using         with open(&#39;2.txt&#39;, &#39;w&#39;) as f1:                 f1.write(line2 + &quot;\\n&quot;) it only storing last line. Any clue &gt;"}, {"owner": {"reputation": 416, "user_id": 2390269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80641e2edac30d5c84e24e94bd1a22?s=128&d=identicon&r=PG", "display_name": "jayg_code", "link": "https://stackoverflow.com/users/2390269/jayg-code"}, "reply_to_user": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 0, "creation_date": 1573689919, "post_id": 58847109, "comment_id": 103968455, "body": "You do need to concatenate the lines back in once you&#39;ve edited them. My suggestion is to save all the lines first in a list (i.e., <code>revised_lines = []</code>, then at the print part you instead do <code>revised_lines.append(line)</code>. Only after you&#39;ve completed the lines you can concatenate the output (i.e., <code>\\n.join(revised_lines)</code>) and saving it to a new file."}], "tags": [], "owner": {"reputation": 416, "user_id": 2390269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80641e2edac30d5c84e24e94bd1a22?s=128&d=identicon&r=PG", "display_name": "jayg_code", "link": "https://stackoverflow.com/users/2390269/jayg-code"}, "is_accepted": true, "score": 1, "last_activity_date": 1573688633, "last_edit_date": 1573688633, "creation_date": 1573687326, "answer_id": 58847109, "question_id": 58846990, "link": "https://stackoverflow.com/questions/58846990/regular-expression-in-python-to-add-space-in-matching-line/58847109#58847109", "title": "Regular Expression in Python to add Space in matching Line", "body": "<p>I suggest the following RegEx: <a href=\"https://regex101.com/r/6crgHK/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/6crgHK/1</a></p>\n\n<p>Then, your substitution pattern would be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\ninput_file = open(\"1.txt\", \"r\")\n\npattern = re.compile(r'\\s+([\\dA-Z]+)$')\n\nfor line in input_file:\n    if re.match(pattern, line):\n        line = re.sub(pattern, r'34spaces\\1', line)\n        print(line)\n</code></pre>\n\n<p>Of course the <code>34spaces</code> part you'll need to replace with actual 34 spaces. :)</p>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "edited": false, "score": 0, "creation_date": 1573689553, "post_id": 58847392, "comment_id": 103968377, "body": "Hey Abhishek, thanks for the answer , but i need to actually store the string instead print preferably in other new text file."}], "tags": [], "owner": {"reputation": 1, "user_id": 12334055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86a9b8a0edbfcd06121ccbea860e9769?s=128&d=identicon&r=PG&f=1", "display_name": "Abbishek", "link": "https://stackoverflow.com/users/12334055/abbishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1573689347, "creation_date": 1573689347, "answer_id": 58847392, "question_id": 58846990, "link": "https://stackoverflow.com/questions/58846990/regular-expression-in-python-to-add-space-in-matching-line/58847392#58847392", "title": "Regular Expression in Python to add Space in matching Line", "body": "<pre><code>&gt; import re\n&gt; \n&gt; input_file = open(\"1.txt\", \"r\") space = ' ' * 14 for line in input file:\n&gt;     if re.match('[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$',line):\n&gt;         print (space + line)\n</code></pre>\n\n<p>This might work! I'm just prepending 14 spaces to whatever line matches your query and then concatenating the space and your line to print 14 spaces followed by your line.</p>\n"}], "owner": {"reputation": 191, "user_id": 6201003, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bc4a0c62f75273b709939f1b1e2bc856?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6201003/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 58847109, "answer_count": 2, "score": 0, "last_activity_date": 1573689347, "creation_date": 1573686479, "last_edit_date": 1573686686, "question_id": 58846990, "link": "https://stackoverflow.com/questions/58846990/regular-expression-in-python-to-add-space-in-matching-line", "title": "Regular Expression in Python to add Space in matching Line", "body": "<p>I have a text file with some of the rows containing data as below.\nI want to replace rows matching these patterns by adding more space in the beginning (i.e. currently these rows having 14 Space which I want to make 34).</p>\n\n<p>I can not just replace 14 Spaces to 34 as there are other rows as well with 14 Spaces but not matching below pattern.</p>\n\n<pre><code>          9\n          1P\n          PKC\n          ABC1\n          1BC1C\n          ZBC12X\n          A4C12XZ\n          H4C12XZQ\n          94C12XZQQ\n          Q4C12XZQQT\n          A4C12XZQQTY\n</code></pre>\n\n<p>I am using all 11 individual code to search for this 11 pattern as below:</p>\n\n<pre><code>[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$\n[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$\n</code></pre>\n\n<p>Below is the Python code I'm using.</p>\n\n<pre><code>import re\n\ninput_file = open(\"1.txt\", \"r\")\n\nfor line in input_file:\n    if re.match('[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z][0-9,A-Z]$', line):\n        print (line)\n</code></pre>\n\n<p>I need guidance on how I can replace the text now to get below output. I can use re.Sub but then how I can just add the spaces and not replace the other character in the original line which should be used just for matching pattern.</p>\n\n<p>Output:</p>\n\n<pre><code>                              9\n                              1P\n                              PKC\n                              ABC1\n                              1BC1C\n                              ZBC12X\n                              A4C12XZ\n                              H4C12XZQ\n                              94C12XZQQ\n                              Q4C12XZQQT\n                              A4C12XZQQTY\n</code></pre>\n"}, {"tags": ["python", "matlab", "image-processing", "computer-vision", "scikit-image"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1573686679, "post_id": 58846984, "comment_id": 103967649, "body": "Are <code>digits.images</code> binary images? If they&#39;re integer-valued, <code>regionprops</code> might produce an output for each distinct intensity level (what it interprets as a label)."}, {"owner": {"reputation": 17360, "user_id": 3680831, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad944759b2a52c3885cc41b2ec0a0a4?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/3680831/a-b"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1573687073, "post_id": 58846984, "comment_id": 103967750, "body": "@CrisLuengo, I am new in Image processing, i loaded dataset from here &quot;<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_digits.html\" rel=\"nofollow noreferrer\">scikit-learn.org/stable/modules/generated/&hellip;</a>&quot; how can i check this?"}, {"owner": {"reputation": 17360, "user_id": 3680831, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad944759b2a52c3885cc41b2ec0a0a4?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/3680831/a-b"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1573687219, "post_id": 58846984, "comment_id": 103967784, "body": "Link mentions &quot;Features: integers 0-16&quot;, So it it a problem of being not in binary?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1573687383, "post_id": 58846984, "comment_id": 103967840, "body": "You should display your data and look at it. This is the nice thing about image processing, it&#39;s all visual! :)"}, {"owner": {"reputation": 17360, "user_id": 3680831, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad944759b2a52c3885cc41b2ec0a0a4?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/3680831/a-b"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1573689637, "post_id": 58846984, "comment_id": 103968398, "body": "@CrisLuengo i loaded binary images now but got 91856 for 1000 images"}], "answers": [{"tags": [], "owner": {"reputation": 3747, "user_id": 224254, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3574772b96b3708ab652c69914bbcce0?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/224254/juan"}, "is_accepted": true, "score": 3, "last_activity_date": 1573798444, "creation_date": 1573798444, "answer_id": 58871293, "question_id": 58846984, "link": "https://stackoverflow.com/questions/58846984/skimage-regionprops-featuresarea-euler-number-dimensions-not-correct-in-pytho/58871293#58871293", "title": "Skimage regionprops feature&#39;s(area,euler_number) dimensions not correct in Python", "body": "<p>Just like you need a for-loop in Matlab to compute the properties for each image, you need one in Python to do the same. Currently, you are computing the properties for a single <em>3D</em> image of shape (1797, 8, 8), instead of 1797 2D images of shape (8, 8). Here is the somewhat equivalent Python code for what you are after:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>features = []\nfor image in digits.images:\n    labels = (image &gt; 0).astype(int)  # only one object in the image\n    props = regionprops(labels, image)[0]  # only one object\n    features.append((props.euler_number, props.filled_area))\n</code></pre>\n"}], "owner": {"reputation": 17360, "user_id": 3680831, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad944759b2a52c3885cc41b2ec0a0a4?s=128&d=identicon&r=PG&f=1", "display_name": "A.B", "link": "https://stackoverflow.com/users/3680831/a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 58871293, "answer_count": 1, "score": 1, "last_activity_date": 1573798444, "creation_date": 1573686430, "question_id": 58846984, "link": "https://stackoverflow.com/questions/58846984/skimage-regionprops-featuresarea-euler-number-dimensions-not-correct-in-pytho", "title": "Skimage regionprops feature&#39;s(area,euler_number) dimensions not correct in Python", "body": "<p>I have 1797 Mnist Images, for which I need to extract two features (FilledArea,EulerNumber). I know how to do it in Matlab. My feature matrix is having(and is correct) size of 1797*2 (1797 for each dimension) In Matlab </p>\n\n<p>Code for matlab (working correctly)</p>\n\n<pre><code>for i = 1:2*N\n    img = regionprops(BW(:,:,i),'FilledArea', 'Solidity');\n    features(i, 1) = img.EulerNumber;\n    features(i, 2) = img.FilledArea;\n    clear img;\nend\n</code></pre>\n\n<p>I want to do same thing in python with Skimage regionprops, but for 1797 images, I am getting 29350*2 features (29350 props for each features), which according to my understanding should be 1797*2</p>\n\n<p>Code for python (not working correctly)</p>\n\n<pre><code>digits = datasets.load_digits()\nlabel_img = digits.images\nrps = regionprops(label_img, cache=False)\nprint(len([r.area for r in rps]))  #29350\nprint(len([r.euler_number for r in rps]))  #29350\n</code></pre>\n\n<p>What might be wrong with my approach? why am I having 29350 element for each feature instead of 1797?</p>\n"}, {"tags": ["python", "html", "pandas", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 598, "user_id": 8333806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbIJB.jpg?s=128&g=1", "display_name": "abdoulsn", "link": "https://stackoverflow.com/users/8333806/abdoulsn"}, "edited": false, "score": 0, "creation_date": 1573686507, "post_id": 58846951, "comment_id": 103967611, "body": "can you show the output you&#39;ve and one you want?"}, {"owner": {"reputation": 598, "user_id": 8333806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbIJB.jpg?s=128&g=1", "display_name": "abdoulsn", "link": "https://stackoverflow.com/users/8333806/abdoulsn"}, "edited": false, "score": 0, "creation_date": 1573687662, "post_id": 58846951, "comment_id": 103967914, "body": "You can do it by image(screen shoot) or markdown. Just edit your question."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "reply_to_user": {"reputation": 598, "user_id": 8333806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbIJB.jpg?s=128&g=1", "display_name": "abdoulsn", "link": "https://stackoverflow.com/users/8333806/abdoulsn"}, "edited": false, "score": 0, "creation_date": 1573688093, "post_id": 58846951, "comment_id": 103968004, "body": "Just added the image of what I get and what I want. I have tried so many things. The best I have got is [2,2] as sum."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1573688371, "post_id": 58846951, "comment_id": 103968062, "body": "Presumably it&#39;s concatenating values because they are strings. Convert the columns to a numeric datatype after stripping the strings down to just the numeric values."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573689144, "post_id": 58846951, "comment_id": 103968268, "body": "When I added this code: Frame[[&#39;Total Score&#39;, &#39;Away Score&#39;]] = Frame[[&#39;Total Score&#39;, &#39;Away Score&#39;]].apply(pd.to_numeric) I get this error: File &quot;C:/Users/harsh/PycharmProjects/Web Scraping/Code1.1.py&quot;, line 65, in &lt;module&gt;     Frame[&#39;Away Score&#39;] = Frame[&#39;Away Score&#39;].astype(int)   File &quot;C:\\Users\\harsh\\PycharmProjects\\We.......... return lib.astype_intsafe(arr.ravel(), dtype).reshape(arr.shape)   File &quot;pandas/_libs/lib.pyx&quot;, line 547, in pandas._libs.lib.astype_intsafe TypeError: int() argument must be a string, a bytes-like object or a number, not &#39;NoneType&#39;"}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573689302, "post_id": 58846951, "comment_id": 103968305, "body": "Man.. I wanna build a data confidence AI.. Even the first steps are mountains to climb.. :P But I will"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1573689865, "post_id": 58846951, "comment_id": 103968440, "body": "Some of your values are null (<code>None</code>) which make no sense to convert to int. You need to explicitly fill those or ignore them to proceed to convert the column to an int."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573689906, "post_id": 58846951, "comment_id": 103968452, "body": "Can you please help me with the code? Please."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573690689, "post_id": 58846951, "comment_id": 103968624, "body": "Is my dataframe locked?"}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573690783, "post_id": 58846951, "comment_id": 103968644, "body": "Seriously man.. just getting tables in python is not easy.. I wanna clean the dataset.. keep just the matches which have been completed.. Have then for like a 100 such pages/teams.. and save it into an access databse. I have created the access database.."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573690971, "post_id": 58846951, "comment_id": 103968683, "body": "I get an output till this stage<a href=\"https://imgur.com/CQdfUZa\" rel=\"nofollow noreferrer\">link</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573701625, "post_id": 58848661, "comment_id": 103970999, "body": "Where does my code come in? I ran just this code and i got this <a href=\"https://imgur.com/11CmGXV\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573701707, "post_id": 58848661, "comment_id": 103971010, "body": "your code won&#39;t work as is. You are targeting the wrong level nodes for data and not converting to ints."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573701829, "post_id": 58848661, "comment_id": 103971041, "body": "Mate.. can you help me just to write my datafdrame to my database? Or make it calcutable? What should my code be?"}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573702722, "post_id": 58848661, "comment_id": 103971225, "body": "Hi QHarr, Can we chat and you can help me out of this issue? My chat id is harshadbarge@gmail.com"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573702828, "post_id": 58848661, "comment_id": 103971250, "body": "hi, it&#39;s 3.30am here - if no one else has answered this in the way you want by the time I finish work I will open a room and invite you to give some pointers."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573702835, "post_id": 58848661, "comment_id": 103971253, "body": "Yes.. and the response I got was: <a href=\"https://imgur.com/3EE3aDm\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573702859, "post_id": 58848661, "comment_id": 103971260, "body": "you need to install lxml parser"}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573702899, "post_id": 58848661, "comment_id": 103971267, "body": "Thats great @QHarr Let me know the best time to do this. Sensei!"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573702908, "post_id": 58848661, "comment_id": 103971269, "body": "or switch to slower parser with soup = bs(r.content, &#39;html.parser&#39;)"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573702921, "post_id": 58848661, "comment_id": 103971273, "body": "^^ run with that parser instead"}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573703143, "post_id": 58848661, "comment_id": 103971323, "body": "I am on on python 3.7.3 I dont have a compatible xml parser?"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573703260, "post_id": 58848661, "comment_id": 103971350, "body": "to use lxml you need lxml installed. You should have html.parser by default. Either will work here."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573703343, "post_id": 58848661, "comment_id": 103971374, "body": "Hey! Look at that!.. Atleast the edit worked. Now &quot;Away Scores&quot; Is defined? <a href=\"https://imgur.com/t3x1BZp\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "edited": false, "score": 0, "creation_date": 1573703428, "post_id": 58848661, "comment_id": 103971392, "body": "Sorry, I edited to shorter names but missed one. Jupyter, of course, remembered the old so didn&#39;t throw an error. Use: limit = len(a_scores)    - answer edited."}, {"owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "reply_to_user": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1573703500, "post_id": 58848661, "comment_id": 103971407, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/202299/discussion-between-py-noob-and-qharr\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": true, "score": 2, "last_activity_date": 1573706147, "last_edit_date": 1573706147, "creation_date": 1573699740, "answer_id": 58848661, "question_id": 58846951, "link": "https://stackoverflow.com/questions/58846951/i-am-unable-to-add-two-columns-in-a-dataframe/58848661#58848661", "title": "I am unable to add two columns in a dataframe", "body": "<p>I would gather a list of each column of interest's values using the length of one of the scores columns to limit the other columns list size to being the same. Then zip those lists and convert to df. You can calculate last two columns provided you have converted prior scores columns into ints.</p>\n\n<pre><code>import pandas as pd\nimport requests\nfrom bs4 import BeautifulSoup as bs\n\nheaders = ['Competition','Home Team','Home Score','Away Team','Away Score','Date Keep','Total Score (Home + Away Score)','Goal Difference (Home - Away Score)']\nr = requests.get('https://www.soccerbase.com/teams/team.sd?team_id=536&amp;comp_id=1&amp;teamTabs=results')\nsoup = bs(r.content, 'lxml')\n\nh_scores = [int(i.text) for i in soup.select('.score a em:first-child')]\na_scores = [int(i.text) for i in soup.select('.score a em + em')]\ntotal_scores = [h+a for h,a in zip(h_scores, a_scores)]\ndiff_scores = [h-a for h,a in zip(h_scores, a_scores)]\nlimit = len(a_scores)\ncomps = [i.text for i in soup.select('.tournament a', limit=limit)]\ndates = [i.text for i in soup.select('.dateTime .hide', limit=limit)]\nh_teams = [i.text for i in soup.select('.homeTeam a', limit=limit)]\na_teams = [i.text for i in soup.select('.awayTeam a', limit=limit)]\n\ndf = pd.DataFrame(zip(comps, h_teams, h_scores, a_teams, a_scores, dates, total_scores, diff_scores), columns = headers)\nprint(df)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9489201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156297937466204/picture?type=large", "display_name": "Harshad", "link": "https://stackoverflow.com/users/9489201/harshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 58848661, "answer_count": 1, "score": 1, "last_activity_date": 1573706147, "creation_date": 1573686101, "last_edit_date": 1573699804, "question_id": 58846951, "link": "https://stackoverflow.com/questions/58846951/i-am-unable-to-add-two-columns-in-a-dataframe", "title": "I am unable to add two columns in a dataframe", "body": "<p>I am trying to add two columns in a dataframe. I am unable to ckeck their properties.\nHow can I go about it?</p>\n\n<pre><code>import re\nimport textwrap\nimport pandas as pd\nimport numpy as np\nimport requests\nfrom bs4 import BeautifulSoup\nfrom pandas import DataFrame\n\nURL = \"https://www.soccerbase.com/teams/team.sd?team_id=536&amp;comp_id=1&amp;teamTabs=results\"\n# URL = \"http://worldpopulationreview.com/countries/countries-by-gdp/\"\nr = requests.get(URL)\n\n# soup = BeautifulSoup(r.content, 'html.parser')\nsoup = BeautifulSoup(r.content, 'html.parser')\n\ntable = soup.find('table', {'class': 'soccerGrid'})\n\n\ndef rowgetdatatext(tr, coltag='td', true=None):  # td (data) or th (header)\n    cols = []\n    for td in tr.find_all(coltag):\n        cols.append(td.get_text(strip=true))\n    return cols\n\n\ndef tabledatatext(table):\n    rows = []\n    trs = table.find_all('tr')\n    headerow = rowgetdatatext(trs[0], 'th')\n    if headerow:  # if there is a header row include first\n        rows.append(headerow)\n        trs = trs[1:]\n    for tr in trs:  # for every table row\n        rows.append(rowgetdatatext(tr, 'td'))  # data row\n    return rows\n\n\nd = tabledatatext(table)\n\npd.set_option('display.width', 400)\npd.set_option('display.max_columns', 20)\ndf = pd.DataFrame(d)\n\nFrame = pd.DataFrame(df.values,\n                     columns=[\"Competition\", \"Date\", \"Omit\", \"Home Team\", \"Score\", \"Away Team\", \"Omit\",\n                              \"Omit\", \"Omit\", \"DateKeep\"\n                              ])\nFrame = Frame.drop(columns=[\"Omit\", \"Date\"])\nFrame = Frame.drop([0, 1], axis=0)\n\nFrame[['Home Score', 'Away Score']] = Frame['Score'].str.split('-', expand=True)\nFrame = Frame.drop(columns=\"Score\")\nFrame = Frame[[\"Competition\", \"Home Team\", \"Home Score\", \"Away Team\", \"Away Score\",\n               \"DateKeep\"]]\n\nFrame['Home Team'] = Frame['Home Team'].str[:-20]\nFrame['Away Team'] = Frame['Away Team'].str[:-20]\nFrame['DateKeep'] = Frame['DateKeep'].str[3:]\nFrame['Competition'] = Frame['Competition'].str[:-18]\n\n# Frame['Home Score'] = Frame['Home Score'].str.split()\n# Frame['Away Score'] = Frame['Away Score'].str.split()\n\n# pd.to_numeric(Frame['Away Score'], errors='coerce')\nF2 = Frame.index(Frame)\nprint(Frame)\nprint(F2)\n</code></pre>\n\n<p>A sample output is:</p>\n\n<p>Competition       Home Team Home Score       Away Team Away Score           DateKeep\n2                       Premier League Premier League         Man Utd         4\u00a0         Chelsea         \u00a00  2019-08-11 16:30 \n3               European Super Cup European Super Cup       Liverpool         2\u00a0         Chelsea         \u00a02  2019-08-14 20:00 \n4                       Premier League Premier League         Chelsea         1\u00a0       Leicester         \u00a01  2019-08-18 16:30 \n5                       Premier League Premier League         Norwich         2\u00a0         Chelsea         \u00a03  2019-08-24 12:30 \n6                       Premier League Premier League         Chelsea         2\u00a0       Sheff Utd         \u00a02  2019-08-31 15:00 \n7                       Premier League Premier League          Wolves         2\u00a0         Chelsea         \u00a05  2019-09-14 15:00 </p>\n\n<p>If I want to add the Home Score &amp; the Away Score columns, it concats the two values instead of adding.\nWhere am I not getting it?\nThanks\nEdit: Adding screenshot of current output &amp; Desired output\n<a href=\"https://i.stack.imgur.com/nCAim.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["python", "python-3.x", "networkx"], "comments": [{"owner": {"reputation": 4794, "user_id": 2038383, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN49R.png?s=128&g=1", "display_name": "semisecure", "link": "https://stackoverflow.com/users/2038383/semisecure"}, "edited": false, "score": 0, "creation_date": 1573694851, "post_id": 58846949, "comment_id": 103969521, "body": "Please include your <code>node_match</code> and <code>edeg_match</code> functions. I suspect the issue is with your implementation of these functions but it is impossible for us to discount that if you don&#39;t include them."}, {"owner": {"reputation": 1737, "user_id": 5511906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NJfrg.jpg?s=128&g=1", "display_name": "Yu Gu", "link": "https://stackoverflow.com/users/5511906/yu-gu"}, "reply_to_user": {"reputation": 4794, "user_id": 2038383, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN49R.png?s=128&g=1", "display_name": "semisecure", "link": "https://stackoverflow.com/users/2038383/semisecure"}, "edited": false, "score": 0, "creation_date": 1573695781, "post_id": 58846949, "comment_id": 103969721, "body": "@spinkus makes sense. I have updated my question with these functions."}, {"owner": {"reputation": 4794, "user_id": 2038383, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN49R.png?s=128&g=1", "display_name": "semisecure", "link": "https://stackoverflow.com/users/2038383/semisecure"}, "edited": false, "score": 0, "creation_date": 1573721719, "post_id": 58846949, "comment_id": 103977759, "body": "I&#39;m using nx 2.4 on Python 3.7. nx.graph_edit_distance gives 1 with or without the node_match or edge_match which I don&#39;t think you need."}], "owner": {"reputation": 1737, "user_id": 5511906, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NJfrg.jpg?s=128&g=1", "display_name": "Yu Gu", "link": "https://stackoverflow.com/users/5511906/yu-gu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573696081, "creation_date": 1573686083, "last_edit_date": 1573696081, "question_id": 58846949, "link": "https://stackoverflow.com/questions/58846949/how-to-calculate-graph-edit-distance-between-two-multi-graphs-using-networkx", "title": "How to calculate graph edit distance between two multi-graphs using networkx?", "body": "<p>Say I have two graphs G and H:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    G = nx.MultiDiGraph()\n    G.add_node(0, id = 'a', f = 'none')\n    G.add_node(1, id = 'b', f = 'k')\n    G.add_edge(0, 1, r = 'bicycle')\n    G.add_edge(1, 0, r = 'bicycle_r')\n    G.add_edge(1, 0, r = 'bicycle_rr')\n\n    H = nx.MultiDiGraph()\n    H.add_node(0, id = 'a', f = 'none')\n    H.add_node(1, id = 'b', f = 'k')\n    H.add_edge(0, 1, r = 'bicycle')\n    H.add_edge(1, 0, r = 'bicycle_r')\n</code></pre>\n\n<p><code>networkx</code> provides us a very simple api to calculate the edit distance between two graphs of the same type, i.e., <code>nx.graph_edit_distance(G, H, node_match=node_match, edge_match=edge_match)</code>. Here for <code>node_match</code> and <code>edge_match</code>, I simply define them as exact match for all labels (i.e., <code>id</code> and <code>f</code> for nodes, and <code>r</code> for edges). This is trivial and not important here since there is no substitution operation between 2 graphs in my example.</p>\n\n<p>The edit distance between G and H is expected to be 1, because G has one more edge between node 1 and 0. However, the answer returned by <code>nx.graph_edit_distance</code> is 0. It seems like it just ignores the multi-edges between two graph nodes. I have tried it with simple directed graph (i.e. <code>nx.DiGraph()</code>), it works well. But I really don't know how to tell the distance calculator to take the deletion of multi-edge into consideration.</p>\n\n<p>I think something is wrong with <code>nx.graph_edit_distance</code> when applying it to multi-graphs. I have tried <code>nx.is_isomorphic</code> on multi-graphs. This function returns whether two graphs are isomorphic (i.e., whether the distance is 0), and takes exactly the same input as <code>nx.graph_edit_distance</code>. They both have <code>node_match</code> and <code>edge_match</code>. As suggested by the documentation, the input for <code>edge_match</code> should be <code>G1[u1][v1], G2[u2][v2]</code>, however, when I check the input to <code>edge_match</code> for <code>nx.graph_edit_distance</code> and <code>nx.is_isomorphic</code>, I found that the input edges for <code>edge_match</code> in <code>nx.graph_edit_distance</code> doesn't have the shape of edges in multi-graph, while it does have that shape for <code>edge_match</code> in <code>nx.is_isomorphic</code>. I think this could be a serious bug of networkx.</p>\n\n<p>Edit:\nI checked the source code of networkx. Now I am pretty sure it's a bug. The usage of <code>edge_match</code> is not consistent with what is claimed in the documentation.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    elif edge_match:\n        C[0:m, 0:n] = np.array([1 - int(edge_match(G1.edges[g], G2.edges[h]))\n                                for g in pending_g for h in pending_h]\n                               ).reshape(m, n)\n</code></pre>\n\n<p>Here is my implementation for <code>node_match</code> and <code>edge_match</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def node_match(n1, n2):\n    if n1['id'] == n2['id'] and n1['f'] == n2['f']:\n        return True\n    else:\n        return False\n\ndef edge_match(e1, e2):\n    if e1['r'] == e2['r']:\n        return True\n    else:\n        return False\n\ndef multi_edge_match(e1, e2):\n    if e1.keys() != e2.keys():\n        return False\n    for k in e1.keys():\n        if e1[k]['r'] != e2[k]['r']:\n            return False\n    return True\n\n</code></pre>\n\n<p>Note that, based on the documentation, for multi-graphs, <code>edge_match</code> should not work, because in multi-graph G[u1][u2] is first indexed by an edge id, so I defined <code>multi_edge_match</code>. However,<code>nx.graph_edit_distance(G, H, node_match, multi_edge_match)</code> will lead to running error. We can only call <code>nx.graph_edit_distance(G, H, node_match, edge_match)</code> and then get unexpected results.<br> While for <code>nx.is_isomorphic</code>, we can only call <code>nx.is_isomorphic(G, H, node_match, multi_edge_match)</code> instead of <code>nx.is_isomorphic(G, H, node_match, edge_match)</code>, and this is what I have expected. So I think it's likely that the implementation for <code>nx.graph_edit_distance</code> is not correct for multi-graphs. At least, it is not consistent with the documentation, if not incorrect.</p>\n"}, {"tags": ["python", "json", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1573687638, "post_id": 58846908, "comment_id": 103967908, "body": "That&#39;s tough, your JSON is deeply nested. Use <code>json_normalize</code> instead."}, {"owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1573688598, "post_id": 58846908, "comment_id": 103968123, "body": "I tried json_normalize(data) , but that gave a pd dataframe of just one row"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1573691981, "post_id": 58846908, "comment_id": 103968925, "body": "You will need to play around with the <code>record_path</code> and <code>meta</code> arguments. Check out the docs:  <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.io.json.json_normalize.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}], "owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573687510, "creation_date": 1573685917, "last_edit_date": 1573687510, "question_id": 58846908, "link": "https://stackoverflow.com/questions/58846908/opening-multi-line-json-on-pandas-results-on-keys-not-being-seperated-in-the-col", "title": "Opening multi line Json on pandas results on keys not being seperated in the columns", "body": "<p>I am trying to open in pandas a json file from this file</p>\n\n<p><a href=\"https://rajpurkar.github.io/SQuAD-explorer/dataset/dev-v2.0.json\" rel=\"nofollow noreferrer\">https://rajpurkar.github.io/SQuAD-explorer/dataset/dev-v2.0.json</a></p>\n\n<p>however, the resulting data frame results in each line containing the whole json line, instead of separating out the columns. </p>\n\n<p>Here is my code. </p>\n\n<p>import urllib.request</p>\n\n<pre><code>url = 'https://rajpurkar.github.io/SQuAD-explorer/dataset/dev-v2.0.json'\nurllib.request.urlretrieve(url, 'dev.json')\n\nimport pandas as pd\nimport json\n\npd.set_option('max_colwidth', 800)\n\ndata_df = pd.read_json('dev.json')\n\ndata_df.head()\n\n    version data\n0   v2.0    {'title': 'Normans', 'paragraphs': [{'qas': [{'question': 'In what country is Normandy located?', 'id': '56ddde6b9a695914005b9628', 'answers': [{'text': 'France', 'answer_start': 159}, {'text': 'France', 'answer_start': 159}, {'text': 'France', 'answer_start': 159}, {'text': 'France', 'answer_start': 159}], 'is_impossible': False}, {'question': 'When were the Normans in Normandy?', 'id': '56ddde6b9a695914005b9629', 'answers': [{'text': '10th and 11th centuries', 'answer_start': 94}, {'text': 'in the 10th and 11th centuries', 'answer_start': 87}, {'text': '10th and 11th centuries', 'answer_start': 94}, {'text': '10th and 11th centuries', 'answer_start': 94}], 'is_impossible': False}, {'question': 'From which countries did the Norse originate?', 'id': '56ddde6b9a695914005b962a', 'answers...\n1   v2.0    {'title': 'Computational_complexity_theory', 'paragraphs': [{'qas': [{'question': 'What branch of theoretical computer science deals with broadly classifying computational problems by difficulty and class of relationship?', 'id': '56e16182e3433e1400422e28', 'answers': [{'text': 'Computational complexity theory', 'answer_start': 0}, {'text': 'Computational complexity theory', 'answer_start': 0}, {'text': 'Computational complexity theory', 'answer_start': 0}], 'is_impossible': False}, {'question': 'By what main attribute are computational problems classified utilizing computational complexity theory? ', 'id': '56e16182e3433e1400422e29', 'answers': [{'text': 'inherent difficulty', 'answer_start': 175}, {'text': 'their inherent difficulty', 'answer_start': 169}, {'text': 'inherent difficul...\n2   v2.0    {'title': 'Southern_California', 'paragraphs': [{'qas': [{'question': 'What is Southern California often abbreviated as?', 'id': '5705e26d75f01819005e76d4', 'answers': [{'text': 'SoCal', 'answer_start': 39}, {'text': 'SoCal', 'answer_start': 39}, {'text': 'SoCal', 'answer_start': 39}], 'is_impossible': False}, {'question': 'Despite being traditionall described as \"eight counties\", how many counties does this region actually have?', 'id': '5705e26d75f01819005e76d5', 'answers': [{'text': '10 counties', 'answer_start': 133}, {'text': '10', 'answer_start': 133}, {'text': '10', 'answer_start': 133}], 'is_impossible': False}, {'question': 'What is a major importance of Southern California in relation to California and the United States?', 'id': '5705e26d75f01819005e76d6', 'answers': [{'text'...\n3   v2.0    {'title': 'Sky_(United_Kingdom)', 'paragraphs': [{'qas': [{'question': 'What company was formed by the merger of Sky Television and British Satellite Broadcasting?', 'id': '57092322efce8f15003a7db0', 'answers': [{'text': 'BSkyB', 'answer_start': 98}, {'text': 'BSkyB', 'answer_start': 98}, {'text': 'BSkyB', 'answer_start': 98}], 'is_impossible': False}, {'question': \"Who is the UK's largest digital subscription television company?\", 'id': '57092322efce8f15003a7db1', 'answers': [{'text': 'BSkyB', 'answer_start': 98}, {'text': 'BSkyB', 'answer_start': 98}, {'text': 'BSkyB', 'answer_start': 98}], 'is_impossible': False}, {'question': 'What year did BSkyB acquire Sky Italia?', 'id': '57092322efce8f15003a7db2', 'answers': [{'text': '2014', 'answer_start': 187}, {'text': '2014', 'answer_start...\n4   v2.0    {'title': 'Victoria_(Australia)', 'paragraphs': [{'qas': [{'question': 'What kind of economy does Victoria have?', 'id': '570d2417fed7b91900d45c3d', 'answers': [{'text': 'diversified', 'answer_start': 34}, {'text': 'highly diversified', 'answer_start': 27}, {'text': 'highly diversified', 'answer_start': 27}], 'is_impossible': False}, {'question': 'Where according to gross state product does Victoria rank in Australia?', 'id': '570d2417fed7b91900d45c3e', 'answers': [{'text': 'second', 'answer_start': 266}, {'text': 'second', 'answer_start': 266}, {'text': 'second', 'answer_start': 266}], 'is_impossible': False}, {'question': 'At what rank does GPS per capita set Victoria?', 'id': '570d2417fed7b91900d45c3f', 'answers': [{'text': 'fourth', 'answer_start': 315}, {'text': 'fourth', 'answer_...\n</code></pre>\n\n<p>For convenience, here's a link to the colab notebook so people don't have to download the data directly</p>\n\n<p><a href=\"https://colab.research.google.com/drive/19apJGZsrlFI3XCp8OmHbEhbHkJEjp0T5\" rel=\"nofollow noreferrer\">https://colab.research.google.com/drive/19apJGZsrlFI3XCp8OmHbEhbHkJEjp0T5</a></p>\n\n<p>I tried <code>data_df1 = pd.read_json('dev.json', lines=True)</code> that that just puts all the lines into one row </p>\n"}, {"tags": ["python", "model", "neural-network", "training-data"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 12217342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ece6219ae34376f40ba17f4b7c5db3?s=128&d=identicon&r=PG&f=1", "display_name": "gab", "link": "https://stackoverflow.com/users/12217342/gab"}, "edited": false, "score": 0, "creation_date": 1573772535, "post_id": 58852132, "comment_id": 104004910, "body": "ok that answered basically my question, that I train k different model. If I now finish my training, do I choose my model random from the k splits or do I look for the smallest validation error and take this model?"}, {"owner": {"reputation": 151, "user_id": 6631232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ohzXTL3PoZI/AAAAAAAAAAI/AAAAAAAAAmQ/rDhdSlLEroc/photo.jpg?sz=128", "display_name": "Giuseppe Cannizzaro", "link": "https://stackoverflow.com/users/6631232/giuseppe-cannizzaro"}, "reply_to_user": {"reputation": 85, "user_id": 12217342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ece6219ae34376f40ba17f4b7c5db3?s=128&d=identicon&r=PG&f=1", "display_name": "gab", "link": "https://stackoverflow.com/users/12217342/gab"}, "edited": false, "score": 1, "creation_date": 1573814427, "post_id": 58852132, "comment_id": 104018191, "body": "You can select the best one, but remember that this is a validation strategy, this means that you DON&#39;T use cross validation to select a model, you just use it to better EVALUATE a model avoiding problems like <a href=\"https://en.wikipedia.org/wiki/Selection_bias\" rel=\"nofollow noreferrer\">Selection Bias</a>. If you want to SELECT a model what you should do is: 1) Create a set of parameters you wanto to try (like number of layers, number of neurons per layer etc.) 2) Run Different trainings with different combinations of those parameters, each evaluated with crossval. 3) Select the model with best performances"}, {"owner": {"reputation": 151, "user_id": 6631232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ohzXTL3PoZI/AAAAAAAAAAI/AAAAAAAAAmQ/rDhdSlLEroc/photo.jpg?sz=128", "display_name": "Giuseppe Cannizzaro", "link": "https://stackoverflow.com/users/6631232/giuseppe-cannizzaro"}, "reply_to_user": {"reputation": 85, "user_id": 12217342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ece6219ae34376f40ba17f4b7c5db3?s=128&d=identicon&r=PG&f=1", "display_name": "gab", "link": "https://stackoverflow.com/users/12217342/gab"}, "edited": false, "score": 1, "creation_date": 1573814607, "post_id": 58852132, "comment_id": 104018269, "body": "Also there&#39;s a lot of stuff you should do before training, but if you just want to select a model this is the overview"}], "tags": [], "owner": {"reputation": 151, "user_id": 6631232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ohzXTL3PoZI/AAAAAAAAAAI/AAAAAAAAAmQ/rDhdSlLEroc/photo.jpg?sz=128", "display_name": "Giuseppe Cannizzaro", "link": "https://stackoverflow.com/users/6631232/giuseppe-cannizzaro"}, "is_accepted": true, "score": 1, "last_activity_date": 1573719350, "creation_date": 1573719350, "answer_id": 58852132, "question_id": 58846899, "link": "https://stackoverflow.com/questions/58846899/initialization-neural-network-model-kfold/58852132#58852132", "title": "initialization neural network model kfold", "body": "<p>It depends on what you mean by \"initialized the network\", you should show some snippet of code to make people understand your problem.</p>\n\n<p>In principle, k-fold cross validation is a technique used to have a better estimation of the performance of a model. \nThe concept is easy, whithout k-fold you just split dataset into train/test, you use unseen samples in test set to estimate a performance/error, but usually data is not perfect, it's a bit dirty, so it can happen that \"bad\" samples end up to be in the test set, and when you use them to estimate the performance of a model you'll get a value which does not represent the real one.</p>\n\n<p>To reduce the error in the estimate of the error/performance, you split dataset into k equally distributed folds, then you train k times a NEW model (so weights are each time initialized from scratch), testing each time on one of the k different \"folds\" and training it on the remaining samples of the dataset.</p>\n\n<p><a href=\"https://i.stack.imgur.com/U0qQ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U0qQ9.png\" alt=\"enter image description here\"></a></p>\n\n<p>By doing so, you'll have k different estimates of the error/performance of your model. </p>\n\n<p>If you want to have a single value as measure, you just average the results.\nOF course you can use the results to do whatever you like, you can SELECT the best model, you can average the weights of the k models, you can average the \"top n\" model weights and so on.</p>\n\n<p>So, answering your question, NO you don't keep your weights.\nUpon the k models you are training, it can happen that one of them is \"bad\", but you are using k-fold just to VALIDATE your model, not to better train it! \nAfter validation you can decide what to do.\nYou are looking for a measure of how much your model is \"good\", by doing this you are just more sure your result is near the real value.</p>\n\n<p>If you want to use dataset to reduce other types of errors (like overfitting or other stuff) you should check ensemble methods.</p>\n\n<p>I hope this was helpful</p>\n"}], "owner": {"reputation": 85, "user_id": 12217342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ece6219ae34376f40ba17f4b7c5db3?s=128&d=identicon&r=PG&f=1", "display_name": "gab", "link": "https://stackoverflow.com/users/12217342/gab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 58852132, "answer_count": 1, "score": 0, "last_activity_date": 1573719350, "creation_date": 1573685865, "last_edit_date": 1573715435, "question_id": 58846899, "link": "https://stackoverflow.com/questions/58846899/initialization-neural-network-model-kfold", "title": "initialization neural network model kfold", "body": "<p>I initialized the network model before the k-fold starts. </p>\n\n<p>Does that mean that the model trains for the first fold and this model with the trained weights is taken for the second fold and so on? What if the last fold is bad and the whole model is bad?</p>\n"}, {"tags": ["python", "deep-learning", "conv-neural-network", "pytorch", "resnet"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6342380, "user_type": "registered", "profile_image": "https://graph.facebook.com/912366072218796/picture?type=large", "display_name": "Carlos Hernandez Perez", "link": "https://stackoverflow.com/users/6342380/carlos-hernandez-perez"}, "edited": false, "score": 0, "creation_date": 1573721695, "post_id": 58847207, "comment_id": 103977746, "body": "You were right, I was looking for a more complex error and missed this indentation error. The question could be considered solved but I still have a related issue.   I can&#39;t grasp my mind about the use of *netLayers nor how to use it. I solved the issue by adding this piece of code after the if statement:     <code>else:       netLayers = []       netLayers.append(block(self.input_planes,planes))           return torch.nn.Sequential(*netLayers)</code>  The network trains, loss function goes down and accuracy goes up but I&#39;d like to know why this works. Thank you for your time."}, {"owner": {"reputation": 8123, "user_id": 4228275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3MMo.png?s=128&g=1", "display_name": "Berriel", "link": "https://stackoverflow.com/users/4228275/berriel"}, "reply_to_user": {"reputation": 111, "user_id": 6342380, "user_type": "registered", "profile_image": "https://graph.facebook.com/912366072218796/picture?type=large", "display_name": "Carlos Hernandez Perez", "link": "https://stackoverflow.com/users/6342380/carlos-hernandez-perez"}, "edited": false, "score": 0, "creation_date": 1573737339, "post_id": 58847207, "comment_id": 103986690, "body": "@CarlosHernandezPerez sry, but I didn&#39;t get the problem. You don&#39;t understand the star operator or is it something else? Comments are not intended for this type of thing, but maybe I can tell you if it is worth opening another question."}, {"owner": {"reputation": 111, "user_id": 6342380, "user_type": "registered", "profile_image": "https://graph.facebook.com/912366072218796/picture?type=large", "display_name": "Carlos Hernandez Perez", "link": "https://stackoverflow.com/users/6342380/carlos-hernandez-perez"}, "edited": false, "score": 0, "creation_date": 1574075084, "post_id": 58847207, "comment_id": 104088241, "body": "I will cease my questioning here as some more hours of coding will give me the answer. Your response was very helpful, thank you."}], "tags": [], "owner": {"reputation": 8123, "user_id": 4228275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3MMo.png?s=128&g=1", "display_name": "Berriel", "link": "https://stackoverflow.com/users/4228275/berriel"}, "is_accepted": true, "score": 2, "last_activity_date": 1573688047, "creation_date": 1573688047, "answer_id": 58847207, "question_id": 58846881, "link": "https://stackoverflow.com/questions/58846881/pytorch-residual-network-throws-unexpected-typeerror-nonetype-object-is-no/58847207#58847207", "title": "Pytorch + Residual Network throws unexpected: TypeError: &#39;NoneType&#39; object is not callable", "body": "<p>This is a simple typo. Your <code>return</code> is inside the <code>if</code>, and the only layer with <code>stride==1</code> is the <code>layer1</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def _layer(self,block,planes,num_layers,stride=1):\n    dim_change = None\n    if stride != 1 or planes != self.input_planes*block.expansion:\n        # [...]\n        return torch.nn.Sequential(*netLayers)\n</code></pre>\n\n<p>Therefore, for the <code>layer1</code>, there is no <code>return</code>, hence <code>None</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 6342380, "user_type": "registered", "profile_image": "https://graph.facebook.com/912366072218796/picture?type=large", "display_name": "Carlos Hernandez Perez", "link": "https://stackoverflow.com/users/6342380/carlos-hernandez-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 58847207, "answer_count": 1, "score": 0, "last_activity_date": 1573688047, "creation_date": 1573685752, "question_id": 58846881, "link": "https://stackoverflow.com/questions/58846881/pytorch-residual-network-throws-unexpected-typeerror-nonetype-object-is-no", "title": "Pytorch + Residual Network throws unexpected: TypeError: &#39;NoneType&#39; object is not callable", "body": "<p>I am diving into the world of Deep Learning and as Python is my most prominent programming language I decided to start with the Pytorch framework. Following a <a href=\"https://www.youtube.com/watch?v=lK5rm2_OPGo\" rel=\"nofollow noreferrer\">tutorial</a> I implemented a ResNet of 50 layers. Afterwards I tried to make an ResNet-18 with simpler blocks which looked like this:</p>\n\n<pre><code>class baseBlock(torch.nn.Module):\n  expansion = 1\n  def __init__(self,input_planes,planes,stride=1,dim_change=None):\n    super(baseBlock,self).__init__()\n    #Declare convolutional layers with batch norms\n    self.conv1 = torch.nn.Conv2d(input_planes, planes, stride=stride, kernel_size=3, padding=1)\n    self.bn1   = torch.nn.BatchNorm2d(planes)\n    self.conv2 = torch.nn.Conv2d(planes, planes, stride=1, kernel_size=3, padding=1)\n    self.bn2   = torch.nn.BatchNorm2d(planes)\n    self.dim_change = dim_change\n\n  def forward(self,x):\n    #Save the residue\n    res = x\n    output = F.relu(self.bn1(self.conv1(x)))\n    output = self.bn2(self.conv2(output))\n\n    if self.dim_change is not None:\n      res = self.dim_change(res)\n\n    output += res\n    output = F.relu(output)\n\n    return output\n</code></pre>\n\n<p>I divided the code into the blocks and the actual Neural Network to make it more understandable. The rest of the code for the NN is:</p>\n\n<pre><code>class ResNet(torch.nn.Module):\n  def __init__(self,block,num_layers,classes=10):\n    super(ResNet,self).__init__()\n    #according to research paper\n    self.input_planes = 64\n    self.conv1  = torch.nn.Conv2d(3,64,kernel_size =3,stride=1,padding=1)\n    self.bn1    = torch.nn.BatchNorm2d(64)\n    self.layer1 = self._layer(block, 64, num_layers[0], stride=1)\n    self.layer2 = self._layer(block, 128, num_layers[1], stride=2)\n    self.layer3 = self._layer(block, 256, num_layers[2], stride=2)\n    self.layer4 = self._layer(block, 512, num_layers[3], stride=2)\n    self.avaragePool = torch.nn.AvgPool2d(kernel_size=4,stride=1)\n    self.fc = torch.nn.Linear(512*block.expansion, classes)\n\n\n  def _layer(self,block,planes,num_layers,stride=1):\n    dim_change = None\n    if stride != 1 or planes != self.input_planes*block.expansion:\n      dim_change = torch.nn.Sequential(torch.nn.Conv2d(self.input_planes, planes*block.expansion, kernel_size = 1, stride=stride),\n                                                        torch.nn.BatchNorm2d(planes*block.expansion))\n      netLayers = []\n      netLayers.append(block(self.input_planes,planes,stride=stride, dim_change=dim_change))\n\n      self.input_planes = planes*block.expansion\n\n      for i in range(1,num_layers):\n        netLayers.append(block(self.input_planes,planes))\n        self.input_planes = planes * block.expansion\n\n      return torch.nn.Sequential(*netLayers)\n\n\n  def forward(self,x):\n    x = F.relu(self.bn1(self.conv1(x)))\n\n    #Problem at this layer\n    x = self.layer1(x) &lt;- NoneType object is not callable\n    x = self.layer2(x)\n    x = self.layer3(x)\n    x = self.layer4(x)\n\n    x = F.avg_pool2d(x,4)\n    x = x.view(x.size(0),-1)\n    x = self.fc(x)\n\n    return x\n</code></pre>\n\n<p>The problem arises on the last forward function in the layer1 that is marked on the code. If I comment it the network keeps on computing (obviously it throws an error later because the dimensions are not right but it still does something). If I change the stride on this first layer the problem also resolves but still throws an error later for the same dimensional reasons. I don't seem to figure out what the problem is. I use a standard CIFAR10 dataset to train it and the training code is as standard as it gets.</p>\n\n<p>If I can provided any additional information let me know. Thank you</p>\n"}, {"tags": ["python", "python-3.x", "python-requests", "anaconda", "cx-freeze"], "comments": [{"owner": {"reputation": 1138, "user_id": 6793245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yzbof.jpg?s=128&g=1", "display_name": "orangeInk", "link": "https://stackoverflow.com/users/6793245/orangeink"}, "edited": false, "score": 0, "creation_date": 1573719275, "post_id": 58846872, "comment_id": 103976555, "body": "I don&#39;t know a lot about <code>cx_freeze</code> but I was interested in the problem: when googling I found that there seem to be a few issues like yours with cx_freeze version 5.x. What version are you using? Your example works perfectly fine for me (starting it by double-clicking the exe and from Windows CMD both work), no workarounds required at all (using <code>cx_freeze</code> version 6.0)."}, {"owner": {"reputation": 41, "user_id": 11011452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c9bfdce4088d6f7776d047e9619e9?s=128&d=identicon&r=PG&f=1", "display_name": "Fgop", "link": "https://stackoverflow.com/users/11011452/fgop"}, "reply_to_user": {"reputation": 1138, "user_id": 6793245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yzbof.jpg?s=128&g=1", "display_name": "orangeInk", "link": "https://stackoverflow.com/users/6793245/orangeink"}, "edited": false, "score": 0, "creation_date": 1573724264, "post_id": 58846872, "comment_id": 103979191, "body": "Interesting. That defeats the purpose of my MWE... I&#39;m also on <code>cx_freeze</code> 6.0 and set up a whole new conda env in python 3.7 to test this. So all packages are up to date. Did my example run for you without any adjustments? Are you using Anaconda or a different python environment?"}, {"owner": {"reputation": 1138, "user_id": 6793245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yzbof.jpg?s=128&g=1", "display_name": "orangeInk", "link": "https://stackoverflow.com/users/6793245/orangeink"}, "edited": false, "score": 0, "creation_date": 1573731036, "post_id": 58846872, "comment_id": 103983194, "body": "I used a fresh conda env with Python 3.7 I did have to make one adjustment but didn&#39;t mention it since it seemed unrelated: when I ran your MWE I got <code>ImportError: No module named &#39;queue&#39;</code> which I resolved by changing the <code>build_exe_options</code> in your <code>setup.py</code> to include <code>&#39;packages&#39; : [&quot;multiprocessing&quot;]</code> (taken from this post: <a href=\"https://stackoverflow.com/questions/40768570/importerror-no-module-named-queue-while-running-my-app-freezed-with-cx-freeze\" title=\"importerror no module named queue while running my app freezed with cx freeze\">stackoverflow.com/questions/40768570/&hellip;</a>)"}, {"owner": {"reputation": 1138, "user_id": 6793245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yzbof.jpg?s=128&g=1", "display_name": "orangeInk", "link": "https://stackoverflow.com/users/6793245/orangeink"}, "edited": false, "score": 0, "creation_date": 1573731549, "post_id": 58846872, "comment_id": 103983486, "body": "Here&#39;s a <a href=\"https://pastebin.com/zi5qDm9V\" rel=\"nofollow noreferrer\">pastebin</a> of my dependencies for your MWE in case you&#39;re interested."}, {"owner": {"reputation": 41, "user_id": 11011452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c9bfdce4088d6f7776d047e9619e9?s=128&d=identicon&r=PG&f=1", "display_name": "Fgop", "link": "https://stackoverflow.com/users/11011452/fgop"}, "reply_to_user": {"reputation": 1138, "user_id": 6793245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yzbof.jpg?s=128&g=1", "display_name": "orangeInk", "link": "https://stackoverflow.com/users/6793245/orangeink"}, "edited": false, "score": 0, "creation_date": 1573809732, "post_id": 58846872, "comment_id": 104015376, "body": "Thanks, I didn&#39;t get that error. I will still try whether your solution works for me. Will report back."}], "owner": {"reputation": 41, "user_id": 11011452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c9bfdce4088d6f7776d047e9619e9?s=128&d=identicon&r=PG&f=1", "display_name": "Fgop", "link": "https://stackoverflow.com/users/11011452/fgop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1573687210, "creation_date": 1573685697, "last_edit_date": 1573687210, "question_id": 58846872, "link": "https://stackoverflow.com/questions/58846872/missing-files-after-using-cx-freeze-exe-runs-in-anaconda-prompt-but-not-in-cmd", "title": "Missing files after using cx_freeze, exe runs in Anaconda prompt but not in cmd", "body": "<p>I ran into some problems with using <code>cx_freeze</code> to create executables from python code. The built executables run from the Anaconda prompt, but when run in windows cmd (or via click on the .exe) the program exits with an error message related to the requests package.</p>\n\n<p>Here is a minimal working example. First, the script that will be frozen: <code>main.py</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\n\nr = requests.get('https://github.com/')\n\nprint(r.text)\n</code></pre>\n\n<p>Secondly, the setup script for <code>cx_freeze</code>: <code>setup.py</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import cx_Freeze\n\nbuild_exe_options = {\n        \"includes\": [],\n        'include_files': [],\n        'excludes' : [],\n        'packages' : []\n           }\n\nbase = None\n\nexecutables = [cx_Freeze.Executable('main.py',\n                                    base=base)]\n\ncx_Freeze.setup(name = \"MWE\",\n                options = {\"build_exe\": build_exe_options},\n                executables = executables)\n</code></pre>\n\n<p>Here is the problem:</p>\n\n<ol>\n<li>Running <code>main.py</code> in python works as expected</li>\n<li>Building the executable via <code>python setup.py build</code> works fine</li>\n<li>Running the resulting <code>main.exe</code> in the Anaconda prompt works as expected</li>\n<li><p>Running <code>main.exe</code> in the windows cmd (or starting via mouse-click) exits with the following error message:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Traceback (most recent call last):\n  File \"P:\\Anaconda3\\lib\\site-packages\\cx_Freeze\\initscripts\\__startup__.py\", line 40, in run\n    module.run()\n  File \"P:\\Anaconda3\\lib\\site-packages\\cx_Freeze\\initscripts\\Console.py\", line 23, in run\n    exec(code, {'__name__': '__main__'})\n  File \"main.py\", line 9, in &lt;module&gt;\n    r = requests.get('https://github.com/')\n  File \"P:\\Anaconda3\\lib\\site-packages\\requests\\api.py\", line 75, in get\n    return request('get', url, params=params, **kwargs)\n  File \"P:\\Anaconda3\\lib\\site-packages\\requests\\api.py\", line 60, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"P:\\Anaconda3\\lib\\site-packages\\requests\\sessions.py\", line 533, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"P:\\Anaconda3\\lib\\site-packages\\requests\\sessions.py\", line 646, in send\n    r = adapter.send(request, **kwargs)\n  File \"P:\\Anaconda3\\lib\\site-packages\\requests\\adapters.py\", line 514, in send\n    raise SSLError(e, request=request)\nrequests.exceptions.SSLError: HTTPSConnectionPool(host='github.com', port=443): Max retries exceeded\nwith url: / (Caused by SSLError(\"Can't connect to HTTPS URL because the SSL module is not available.\"))\n</code></pre></li>\n</ol>\n\n<p>After digging through related issues it seems the problem is that some DLLs are not copied into the build-folder of the application, such that these files cannot be found by the application. What I tried without positive result:</p>\n\n<ol>\n<li>Played with the <code>includes</code> and <code>packages</code> options in the setup script to include certain packages (as describe <a href=\"https://stackoverflow.com/a/53323828/11011452\">here</a>)</li>\n<li>Manually copied <code>libssl</code> and <code>libcrypto</code> to the build-folder (as described <a href=\"https://stackoverflow.com/a/53333922/11011452\">here</a> and <a href=\"https://github.com/conda/conda/issues/8273\" rel=\"nofollow noreferrer\">here</a>)</li>\n<li>Copied the same files via the <code>include_files</code> option in the setup script</li>\n<li>Added <code>(requests.certs.where(),'cacert.pem')</code> to <code>include_files</code> and <code>os.environ[\"REQUESTS_CA_BUNDLE\"] = os.path.join(os.getcwd(), \"cacert.pem\")</code> to <code>setup.py</code> as described <a href=\"https://stackoverflow.com/a/15224335/11011452\">here</a> and <a href=\"https://stackoverflow.com/a/25239701/11011452\">here</a></li>\n</ol>\n\n<p>Does anyone know how to avoid this issue? Does anyone know how to find out which files exactly are missing, such that they can be copied to the application folder? I ran into the same problem with other packages, not only <code>requests</code>.</p>\n"}, {"tags": ["python", "macos", "python-2.7", "pip"], "comments": [{"owner": {"reputation": 598, "user_id": 8333806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbIJB.jpg?s=128&g=1", "display_name": "abdoulsn", "link": "https://stackoverflow.com/users/8333806/abdoulsn"}, "edited": false, "score": 4, "creation_date": 1573687613, "post_id": 58846845, "comment_id": 103967901, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26939308/importerror-cannot-import-name-nullhandler\">ImportError: cannot import name NullHandler</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1573687653, "post_id": 58846845, "comment_id": 103967913, "body": "Do you have any script or module called <code>logging</code>? It seems something overshadow standard <code>logging</code>."}], "owner": {"reputation": 7, "user_id": 6291246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585e0dc67983078b5e0b01fd907bc7ea?s=128&d=identicon&r=PG&f=1", "display_name": "jbangue85", "link": "https://stackoverflow.com/users/6291246/jbangue85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 755, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573685531, "creation_date": 1573685531, "question_id": 58846845, "link": "https://stackoverflow.com/questions/58846845/pip-importerror-cannot-import-name-nullhandler", "title": "pip ImportError: cannot import name NullHandler", "body": "<p>when I try to see the pip version, the error is generated</p>\n\n<p>pip --version </p>\n\n<pre><code>Traceback (most recent call last):\n    from pip._internal.locations import USER_CACHE_DIR, get_src_prefix\n  File \"/Library/Python/2.7/site-packages/pip/_internal/locations.py\", line 18, in &lt;module&gt;\n    from pip._internal.utils import appdirs\n  File \"/Library/Python/2.7/site-packages/pip/_internal/utils/appdirs.py\", line 16, in &lt;module&gt;\n    from pip._internal.utils.compat import WINDOWS, expanduser\n  File \"/Library/Python/2.7/site-packages/pip/_internal/utils/compat.py\", line 17, in &lt;module&gt;\n    from pip._vendor.urllib3.util import IS_PYOPENSSL\n  File \"/Library/Python/2.7/site-packages/pip/_vendor/urllib3/__init__.py\", line 21, in &lt;module&gt;\n    from logging import NullHandler\nImportError: cannot import name NullHandler\n\n</code></pre>\n"}, {"tags": ["python", "node.js", "web", "flask"], "comments": [{"owner": {"reputation": 1828, "user_id": 5677187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-xT3tsBQ4GeU/AAAAAAAAAAI/AAAAAAAAAEg/sHTtqA2noSc/photo.jpg?sz=128", "display_name": "Babak Abadkheir", "link": "https://stackoverflow.com/users/5677187/babak-abadkheir"}, "edited": false, "score": 0, "creation_date": 1573704376, "post_id": 58846829, "comment_id": 103971588, "body": "It&#39;s about something core origins. You must handle in your code. Cross domain access try to read about it."}, {"owner": {"reputation": 1, "user_id": 12369559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfb5659bf83f3f10e463db3868618bd?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Cassiano", "link": "https://stackoverflow.com/users/12369559/lucas-cassiano"}, "reply_to_user": {"reputation": 1828, "user_id": 5677187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-xT3tsBQ4GeU/AAAAAAAAAAI/AAAAAAAAAEg/sHTtqA2noSc/photo.jpg?sz=128", "display_name": "Babak Abadkheir", "link": "https://stackoverflow.com/users/5677187/babak-abadkheir"}, "edited": false, "score": 0, "creation_date": 1573758726, "post_id": 58846829, "comment_id": 103998948, "body": "yes, I added CORS, and the error remains the same.  Also I get the log on Flask:  <code>172.16.0.49 - - [14&#47;Nov&#47;2019 11:10:23] &quot;GET &#47; HTTP&#47;1.1&quot; 200 -</code> meaning that the connection is ok, flask session is receiving the call from remote device."}, {"owner": {"reputation": 1, "user_id": 12369559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfb5659bf83f3f10e463db3868618bd?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Cassiano", "link": "https://stackoverflow.com/users/12369559/lucas-cassiano"}, "reply_to_user": {"reputation": 1828, "user_id": 5677187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-xT3tsBQ4GeU/AAAAAAAAAAI/AAAAAAAAAEg/sHTtqA2noSc/photo.jpg?sz=128", "display_name": "Babak Abadkheir", "link": "https://stackoverflow.com/users/5677187/babak-abadkheir"}, "edited": false, "score": 0, "creation_date": 1573758861, "post_id": 58846829, "comment_id": 103999005, "body": "I also disabled the firewall on MacOS, the problem remains."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12369559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfb5659bf83f3f10e463db3868618bd?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Cassiano", "link": "https://stackoverflow.com/users/12369559/lucas-cassiano"}, "is_accepted": false, "score": 0, "last_activity_date": 1574199703, "creation_date": 1574199703, "answer_id": 58943230, "question_id": 58846829, "link": "https://stackoverflow.com/questions/58846829/flask-err-connection-closed/58943230#58943230", "title": "Flask ERR_CONNECTION_CLOSED", "body": "<p>So, if anyone in the future encounters this error, I couldn't find a fix.. however I found a simple work around: to have a Node.js Proxy Script proxying info from Flask to the iPad: </p>\n\n<pre><code>var http = require('http'),\n    httpProxy = require('http-proxy');\nvar proxy = httpProxy.createProxyServer({});\n\ntry {\n    var server = http.createServer(function (req, res) {\n        try {\n            proxy.web(req, res, { target: 'http://10.0.60.108:10800' });\n        }\n        catch (error) {\n            console.log(`[PROXY]-&gt; ERROR!`);\n        }\n    });\n\n\n    server.listen(5001);\n    console.log(\"[PROXY]-&gt; PORT:5001\")\n} catch (error) {\n    //handle errors here\n    console.log('[PROXY]:error')\n}\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12369559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfb5659bf83f3f10e463db3868618bd?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Cassiano", "link": "https://stackoverflow.com/users/12369559/lucas-cassiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574199703, "creation_date": 1573685409, "question_id": 58846829, "link": "https://stackoverflow.com/questions/58846829/flask-err-connection-closed", "title": "Flask ERR_CONNECTION_CLOSED", "body": "<p>I'm trying to access a local webserver (Flask) from an iPad. \nmy setup: iPad connected via Ethernet to a Macbook (server). \nWhen I try a Node.js (express) webserver - as seen bellow - it works, I can access <code>http://172.x.x.x:5000/</code> and get the response. However when I try the same thing with a simple Flask server I can't access it, I get the error <code>ERR_CONNECTION_CLOSED</code> on iPad (Chrome browser).</p>\n\n<p>Simple Node.js server that works: </p>\n\n<pre><code>const express = require('express');\nvar app = express();\nvar PORT = 5000;\n\napp.get('/', (req, res) =&gt; {\n    res.send(JSON.stringify({ value: 1 }));\n})\n\napp.listen(PORT);\n</code></pre>\n\n<p>Flask (Python) server that works locally but not from iPad: </p>\n\n<pre><code>from flask import Flask\n\napp = Flask(__name__)\n\n\n@app.route('/')\ndef hello_world():\n    return 'Hello World!'\n\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000, debug=False)\n</code></pre>\n\n<p>Detail: if I add ssl_context to flask (<code>app.run(ssl_context='adhoc'</code>) it works on the iPad, however I don't have credentials and get the error of unsecure webpage, so request to the REST API don't work.</p>\n\n<p>obs: I can't run node.js on production.</p>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["python", "kivy", "kivy-language"], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 11948346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4fRfE.png?s=128&g=1", "display_name": "ArtemSBulgakov", "link": "https://stackoverflow.com/users/11948346/artemsbulgakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1575477883, "creation_date": 1575477883, "answer_id": 59180896, "question_id": 58846752, "link": "https://stackoverflow.com/questions/58846752/kivymd-attributeerror-nonetype-object-has-no-attribute-theme-cls-upon-addi/59180896#59180896", "title": "KivyMD: AttributeError: &#39;NoneType&#39; object has no attribute &#39;theme_cls&#39; upon Adding MDToolbar", "body": "<blockquote>\n  <p>All code here works with <strong><a href=\"https://github.com/kivy/kivy\" rel=\"nofollow noreferrer\">Kivy</a> 1.11.1</strong> and <strong><a href=\"https://github.com/HeaTTheatR/KivyMD\" rel=\"nofollow noreferrer\">KivyMD</a> 0.102.0</strong>. KivyMD is in <em>alpha</em> status and API can be changed in future.</p>\n</blockquote>\n\n<ol>\n<li>Create all widgets inside <em>build</em> function. You should move creating of <em>ScreenManager</em>:</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>    def build(self):\n        sm = ScreenManager()\n        sm.add_widget(inventory(name='inventory'))\n        return sm\n</code></pre>\n\n<ol start=\"2\">\n<li><em>NavigationLayout</em> cannot take more than two widgets, one of them is <em>MDNavigationDrawer</em> and second is layout. Create <em>BoxLayout</em> and put in it <em>MDToolbar</em> and <em>Button</em>:</li>\n</ol>\n\n<pre><code>    NavigationLayout:\n        MDNavigationDrawer:\n            # ...\n            NavigationDrawerSubheader:\n                # ...\n        BoxLayout:\n            orientation: \"vertical\"\n            MDToolbar:\n                title: \"test\"\n            Button:\n                text: \"test\"\n                on_release: app.nav_drawer.toggle()\n</code></pre>\n\n<ol start=\"3\">\n<li>Id property in kv code should be without \"\":</li>\n</ol>\n\n<pre><code>    NavigationLayout:\n        id: nav_layout\n        MDNavigationDrawer:\n            id: nav_drawer\n</code></pre>\n\n<ol start=\"4\">\n<li><p>To call widget by id you should use <code>app.root.ids.nav_drawer</code>.</p></li>\n<li><p>To toggle <em>NavigationDrawer</em> you should call <em>NavigationLayout</em>: <code>app.root.ids.nav_layout.toggle_nav_drawer()</code>.</p></li>\n<li><p>Usually <em>NavigationLayout</em> used as root widget. Add <em>ScreenManager</em> to <em>BoxLayout</em>.</p></li>\n<li><p>You can add screens to <em>ScreenManager</em> using kv code:</p></li>\n</ol>\n\n<pre><code>        ScreenManager:\n            id: screen_manager\n\n            Inventory:\n                name: \"inventory\"\n</code></pre>\n\n<ol start=\"8\">\n<li>Do not combine layouts. Do not write <code>class Inventory(BoxLayout, Screen):</code>. Create <em>BoxLayout</em> inside your screen:</li>\n</ol>\n\n<pre><code>&lt;Inventory&gt;:\n    BoxLayout:\n        orientation: \"vertical\"\n</code></pre>\n\n<hr>\n\n<p>Final code will be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from kivy.app import App\nfrom kivy.lang import Builder\nfrom kivy.properties import ObjectProperty\nfrom kivy.uix.screenmanager import Screen\nfrom kivymd.theming import ThemeManager\n\nroot_kv = \"\"\"\nNavigationLayout:\n    id: nav_layout\n\n    MDNavigationDrawer:\n        id: nav_drawer\n        drawer_logo: \"test.png\"\n\n        NavigationDrawerSubheader:\n            text: \"Categories\"\n        NavigationDrawerIconButton:\n            text: \"Printers\"\n            icon: \"printer\"\n            on_release: app.screen_manager.current = \"printers\"\n        NavigationDrawerIconButton:\n            text: \"PCs\"\n            icon: \"laptop\"\n        NavigationDrawerIconButton:\n            text: \"Monitors\"\n            icon: \"monitor\"\n        NavigationDrawerIconButton:\n            text: \"Tablets\"\n            icon: \"tablet\"\n        NavigationDrawerIconButton:\n            text: \"Non-HP\"\n            icon: \"close-circle-outline\"\n        NavigationDrawerIconButton:\n            text: \"Supplies\"\n            icon: \"water\"\n        NavigationDrawerIconButton:\n            text: \"Misc.\"\n            icon: \"paperclip\"\n\n    BoxLayout:\n        orientation: \"vertical\"\n\n        ScreenManager:\n            id: screen_manager\n\n            Inventory:\n                name: \"inventory\"\n\n\n&lt;Inventory&gt;:\n    BoxLayout:\n        orientation: \"vertical\"\n\n        MDToolbar:\n            title: \"test\"\n\n        Button:\n            text: \"test\"\n            on_release: app.root.toggle_nav_drawer()\n\"\"\"\n\n\nclass Inventory(Screen):\n    pass\n\n\nclass MainApp(App):\n    theme_cls = ThemeManager()\n    screen_manager = ObjectProperty()\n\n    def build(self):\n        self.root = Builder.load_string(root_kv)\n        self.screen_manager = self.root.ids.screen_manager\n\n\nif __name__ == \"__main__\":\n    MainApp().run()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12369485, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC5FsJjB-V0-Y6wrUnsP8aug3qVOtKeMwaNX-u82w=k-s128", "display_name": "Matthew Kelley", "link": "https://stackoverflow.com/users/12369485/matthew-kelley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575478370, "creation_date": 1573684939, "last_edit_date": 1575478370, "question_id": 58846752, "link": "https://stackoverflow.com/questions/58846752/kivymd-attributeerror-nonetype-object-has-no-attribute-theme-cls-upon-addi", "title": "KivyMD: AttributeError: &#39;NoneType&#39; object has no attribute &#39;theme_cls&#39; upon Adding MDToolbar", "body": "<p>I'm using <strong>Kivy</strong> and <strong>KivyMD</strong>, I'm trying to implement <em>MDToolbar</em>. After running my program I get this error: <code>AttributeError: 'NoneType' object has no attribute 'theme_cls'</code>. I included only the relevant code from my program. Everything works perfectly up until adding the <em>MDToolbar</em>. How can I get <em>MDToolbar</em> to work? Please help!</p>\n\n<p>My Full Error:</p>\n\n<pre><code>Parser: File \"&lt;inline&gt;\", line 22:\n...\n     20:&lt;MDToolbar&gt;\n     21:    size_hint_y: None\n&gt;&gt;   22:    height: root.theme_cls.standard_increment\n     23:    padding: [root.theme_cls.horizontal_margins - dp(12), 0]\n     24:    opposite_colors: True\n...\nAttributeError: 'NoneType' object has no attribute 'theme_cls'\n  File \"C:\\Users\\kelleym\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\kivy\\lang\\builder.py\", line 696, in _apply_rule\n    setattr(widget_set, key, value)\n  File \"kivy\\weakproxy.pyx\", line 35, in kivy.weakproxy.WeakProxy.__setattr__\n  File \"kivy\\properties.pyx\", line 497, in kivy.properties.Property.__set__\n  File \"kivy\\properties.pyx\", line 544, in kivy.properties.Property.set\n  File \"kivy\\properties.pyx\", line 599, in kivy.properties.Property.dispatch\n  File \"kivy\\_event.pyx\", line 1214, in kivy._event.EventObservers.dispatch\n  File \"kivy\\_event.pyx\", line 1120, in kivy._event.EventObservers._dispatch\n  File \"kivy\\properties.pyx\", line 1318, in kivy.properties.ReferenceListProperty.trigger_change\n  File \"kivy\\properties.pyx\", line 1333, in kivy.properties.ReferenceListProperty.trigger_change\n  File \"kivy\\properties.pyx\", line 599, in kivy.properties.Property.dispatch\n  File \"kivy\\_event.pyx\", line 1214, in kivy._event.EventObservers.dispatch\n  File \"kivy\\_event.pyx\", line 1120, in kivy._event.EventObservers._dispatch\n  File \"C:\\Users\\kelleym\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\kivymd\\uix\\behaviors\\elevation.py\", line 105, in _update_shadow\n    self._shadow = App.get_running_app().theme_cls.quad_shadow\n  File \"C:\\Users\\kelleym\\Desktop\\Actual Inventory App\\main.py\", line 313, in &lt;module&gt;\n    sm.add_widget(inventory(name='inventory'))\n</code></pre>\n\n<p>My Code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from kivy.app import App\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import ScreenManager, Screen\nfrom kivymd.theming import ThemeManager\n\nBuilder.load_string(\"\"\"\n&lt;inventory&gt;:\n    NavigationLayout:\n        id: \"nav_layout\"\n        MDToolbar:\n            title: \"test\"\n        MDNavigationDrawer:\n            drawer_logo: \"test.png\"\n            id: \"nav_drawer\"\n            NavigationDrawerSubheader:\n                text: \"[color=#black]Categories[/color]\"\n            NavigationDrawerIconButton:\n                icon: 'printer'\n                text: \"Printers\"\n                on_release: root.manager.current = 'printers'\n            NavigationDrawerIconButton:\n                text: \"PCs\"\n                icon: \"laptop\"\n            NavigationDrawerIconButton:\n                text: \"Monitors\"\n                icon: \"monitor\"\n            NavigationDrawerIconButton:\n                text: \"Tablets\"\n                icon: \"tablet\"\n            NavigationDrawerIconButton:\n                text: \"Non-HP\"\n                icon: \"close-circle-outline\"\n            NavigationDrawerIconButton:\n                text: \"Supplies\"\n                icon: \"water\"\n            NavigationDrawerIconButton:\n                text: \"Misc.\"\n                icon: \"paperclip\"\n        Button:\n            text: \"test\"\n            on_release: app.nav_drawer.toggle()\n\"\"\")\n\n\nclass inventory(BoxLayout, Screen):\n    pass\n\n\nsm = ScreenManager()\nsm.add_widget(inventory(name='inventory'))\n\n\nclass TestApp(App):\n    theme_cls = ThemeManager()\n\n    def build(self):\n        return sm\n\n\nif __name__ == \"__main__\":\n    TestApp().run()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "edited": false, "score": 0, "creation_date": 1573685179, "post_id": 58846712, "comment_id": 103967231, "body": "Do you want the output to be a list of tuples that contains something like: <code>[(&#39;file1&#39;, &#39;rope&#39;), (&#39;file2&#39;, &#39;dope&#39;), (&#39;file3&#39;, &#39;goat&#39;), (&#39;file4&#39;, &#39;badger&#39;)]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 3366740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwWOC.jpg?s=128&g=1", "display_name": "Robi Sen", "link": "https://stackoverflow.com/users/3366740/robi-sen"}, "is_accepted": false, "score": 0, "last_activity_date": 1573685178, "creation_date": 1573685178, "answer_id": 58846793, "question_id": 58846712, "link": "https://stackoverflow.com/questions/58846712/can-you-loop-over-a-panda-df-and-array-at-the-same-time/58846793#58846793", "title": "Can you loop over a panda df and array at the same time?", "body": "<p>Ok so I solved it right after asking. I was being dumber than usual. </p>\n\n<pre><code>data = {'index':[2, 5, 1, 3],\n        'file':[\"file1\", \"file2\", \"file3\",\"file4\" ]}\n\n# Create DataFrame\ndf = pd.DataFrame(data)\n\nfiles = df[\"file\"]\nprint(files)\nlabels = [\"rope\", \"dope\", \"goat\", \"badger\"]\n\nfor x,y in zip(files, labels):\n        print(x)\n        print(y)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1573685271, "creation_date": 1573685271, "answer_id": 58846806, "question_id": 58846712, "link": "https://stackoverflow.com/questions/58846712/can-you-loop-over-a-panda-df-and-array-at-the-same-time/58846806#58846806", "title": "Can you loop over a panda df and array at the same time?", "body": "<p>Just use <code>list</code> and <code>zip</code> together to get the output.</p>\n\n<pre><code>data = {'index':[2, 5, 1, 3],\n        'file':[\"file1\", \"file2\", \"file3\",\"file4\" ]}\nlabels = [\"rope\", \"dope\", \"goat\", \"badger\"]\n# Create DataFrame\ndf = pd.DataFrame(data)\n\noutput = list(zip(df['file'], labels))\n</code></pre>\n\n<p>Output will be:</p>\n\n<pre><code>[('file1', 'rope'), ('file2', 'dope'), ('file3', 'goat'), ('file4', 'badger')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1573685611, "creation_date": 1573685611, "answer_id": 58846860, "question_id": 58846712, "link": "https://stackoverflow.com/questions/58846712/can-you-loop-over-a-panda-df-and-array-at-the-same-time/58846860#58846860", "title": "Can you loop over a panda df and array at the same time?", "body": "<p>IIUC,</p>\n\n<p>you want to sort by index then create a new array?</p>\n\n<pre><code>import itertools\ndf.sort_index(inplace=True)\nnew_arr = list(zip(df['file'],labels))\nprint(list(itertools.chain(*new_arr)))\nout: \n['file3', 'rope', 'file1', 'dope', 'file4', 'goat', 'file2', 'badger']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 598, "user_id": 8333806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbIJB.jpg?s=128&g=1", "display_name": "abdoulsn", "link": "https://stackoverflow.com/users/8333806/abdoulsn"}, "edited": false, "score": 0, "creation_date": 1573686654, "post_id": 58846960, "comment_id": 103967643, "body": "what does the * mean here in print?"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "reply_to_user": {"reputation": 598, "user_id": 8333806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbIJB.jpg?s=128&g=1", "display_name": "abdoulsn", "link": "https://stackoverflow.com/users/8333806/abdoulsn"}, "edited": false, "score": 2, "creation_date": 1573687103, "post_id": 58846960, "comment_id": 103967755, "body": "To unpack the iterable as multiple arguments"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1573687336, "post_id": 58846960, "comment_id": 103967816, "body": "the more i learn about itertools the more impressed I am, such a handy library."}], "tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 4, "last_activity_date": 1573686181, "creation_date": 1573686181, "answer_id": 58846960, "question_id": 58846712, "link": "https://stackoverflow.com/questions/58846712/can-you-loop-over-a-panda-df-and-array-at-the-same-time/58846960#58846960", "title": "Can you loop over a panda df and array at the same time?", "body": "<p><code>more-itertools</code> has a method called <a href=\"https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.interleave\" rel=\"nofollow noreferrer\"><code>interleave</code></a> that does this for you. </p>\n\n<p>But if you don\u2019t want to use the package then just use the recipe (it uses <code>zip</code> and <code>itertools.chain</code>):</p>\n\n<pre><code>print(*itertools.chain(*zip(data['fields'], labels)), sep=', ')\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>file1, rope, file2, dope, file3, goat, file4, badger\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 3366740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwWOC.jpg?s=128&g=1", "display_name": "Robi Sen", "link": "https://stackoverflow.com/users/3366740/robi-sen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1573686181, "creation_date": 1573684689, "question_id": 58846712, "link": "https://stackoverflow.com/questions/58846712/can-you-loop-over-a-panda-df-and-array-at-the-same-time", "title": "Can you loop over a panda df and array at the same time?", "body": "<p>I have two different sets of data being passed to a method. One is a panda dataframe and the other is an array. The dataframe has one column that I want to map to an array. Something like this</p>\n\n<pre><code>data = {'index':[2, 5, 1, 3],\n        'file':[\"file1\", \"file2\", \"file3\",\"file4\" ]}\n\n# Create DataFrame\ndf = pd.DataFrame(data)\n\nlabels = [\"rope\", \"dope\", \"goat\", \"badger\"]\n\nfor x,y in zip(df, labels):\n        print(x[0])\n        print(y)\n\n</code></pre>\n\n<p>The output I would like would look like this:</p>\n\n<p>file1,dope\nfile2,dope\nfile3, goat</p>\n\n<p>is there a straight forward way to do this or do i need to loop over both arrays and build a new one?</p>\n"}, {"tags": ["python", "matplotlib", "animation", "subplot"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1573684887, "post_id": 58846707, "comment_id": 103967116, "body": "To clear an axes <code>ax</code>, call <code>ax.clear()</code>; if you have several such axes, call that for each of them."}], "answers": [{"tags": [], "owner": {"reputation": 1501, "user_id": 11517841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gs4vK.png?s=128&g=1", "display_name": "Sushanth", "link": "https://stackoverflow.com/users/11517841/sushanth"}, "is_accepted": true, "score": 1, "last_activity_date": 1573718150, "last_edit_date": 1573718150, "creation_date": 1573686081, "answer_id": 58846947, "question_id": 58846707, "link": "https://stackoverflow.com/questions/58846707/how-to-clear-all-subplots-without-closing-the-figure/58846947#58846947", "title": "How to clear all subplots without closing the figure?", "body": "<p>Try using:</p>\n\n<pre><code>subplot.cla()  # this clears the data but not the axes\nsubplot.clf()  #  this clears the data and the axes\n</code></pre>\n\n<p>So in your case, it will be</p>\n\n<pre><code>ax.cla()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ax.clf()\n</code></pre>\n"}], "owner": {"reputation": 224, "user_id": 12035739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nf259.png?s=128&g=1", "display_name": "scribe", "link": "https://stackoverflow.com/users/12035739/scribe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 58846947, "answer_count": 1, "score": 0, "last_activity_date": 1573718150, "creation_date": 1573684667, "question_id": 58846707, "link": "https://stackoverflow.com/questions/58846707/how-to-clear-all-subplots-without-closing-the-figure", "title": "How to clear all subplots without closing the figure?", "body": "<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\nN = 50\n\nfig = plt.figure()\n\nax = fig.add_subplot(1, 2, 1, projection='3d')\nax.set_title('Cartesian Plot')\n\n# im = fig.add_subplot(1, 2, 2)\n# im.set_title('Image')\n# im.axis('off')\n\nplt.ion()\nplt.show()\n\nfor p in range(10):\n    Z = np.random.randint(255, size=(N, N, 3))\n    A, B, C = Z[:, 0], Z[:, 1], Z[:, 2]\n    ax.scatter(A, B, C, c='r', marker='.')\n    # im.imshow(Z)\n\n    plt.draw()\n    plt.pause(1)\n    plt.cla()\n\nplt.ioff()\nplt.close()\n</code></pre>\n\n<p>I am trying to plot an image and it's Cartesian plot again and again after it is modified, so I set up this example. This code works if you comment out the image part, then the Cartesian plot is cleared properly. But, if you add the image subplot (uncomment the <code>im</code> subplot) than instead of clearing and redrawing all the subplots, they are drawn over each other which is a problem for the plot in the Cartesian space.</p>\n\n<p>Could someone help me? After each iteration of the loop I want both subplots to be cleared and redrawn for the next iteration and so forth.</p>\n\n<p>I would also like the numbers labelling the axis to not show, for the image I did <code>im.axis('off')</code> but that only works for the first iteration and than it is set to default.</p>\n"}, {"tags": ["python", "sql", "oracle"], "comments": [{"owner": {"reputation": 442, "user_id": 7538307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bd4571a8ff2a826d85cb42fb9d32dc9?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/7538307/paul"}, "edited": false, "score": 0, "creation_date": 1573717662, "post_id": 58846687, "comment_id": 103975865, "body": "This might help <a href=\"https://stackoverflow.com/questions/51868112/blob-data-from-oracle-to-text-file-using-python\" title=\"blob data from oracle to text file using python\">stackoverflow.com/questions/51868112/&hellip;</a>"}, {"owner": {"reputation": 6003, "user_id": 4799035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuyZM.jpg?s=128&g=1", "display_name": "Christopher Jones", "link": "https://stackoverflow.com/users/4799035/christopher-jones"}, "edited": false, "score": 0, "creation_date": 1573724635, "post_id": 58846687, "comment_id": 103979414, "body": "On the cx_Oracle side, review the LOB documentation <a href=\"https://cx-oracle.readthedocs.io/en/latest/user_guide/lob_data.html\" rel=\"nofollow noreferrer\">cx-oracle.readthedocs.io/en/latest/user_guide/lob_data.html</a>  Either query mode will give you the binary data in Python.  You will then need to use some Python utility to convert whatever format it is in (Word format?) into something readable."}], "owner": {"reputation": 135, "user_id": 12252458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681d7ab4261eca6e0b1b7ea82182ab7e?s=128&d=identicon&r=PG&f=1", "display_name": "wolf7687", "link": "https://stackoverflow.com/users/12252458/wolf7687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573747834, "creation_date": 1573684573, "last_edit_date": 1573747834, "question_id": 58846687, "link": "https://stackoverflow.com/questions/58846687/working-with-hugeblob-datatype-in-python", "title": "Working with &#39;HUGEBLOB&#39; datatype in python", "body": "<p>I have a database where one of the columns is BLOB data type(\"STOREDFILEBLOB\"). The data looks like this when I query the database using TOAD(Oracle):</p>\n\n<pre><code>DOC    VERK    FILENAME       STOREDFILEBLOB\n434    2343    sow2.rtf       (HUGEBLOB)\n342    352     soodata.doc    (HUGEBLOB)\n123    456     wan_tech.doc   (HUGEBLOB)\n</code></pre>\n\n<p>The BLOB holds the document referenced in the 'FILENAME' column. I need to ingest the BLOB in human readable form into python; ideally I would want it to be a long string with the contents of the 'FILENAME' doc. I will be using the info in the BLOB to do some text classification using machine learning. I'm using the following to read from the database. The problem is once the data is brought into python, the column is no longer a BLOB but an object.</p>\n\n<pre><code>conn = pyodbc.connect(conn_str)\n\nquery = '''\nselect dockey,verkey,filename,storedfileblob\nfrom supportdoc \nwhere upper(filename) like '%SOO%' or upper(filename) like '%SOW%'\nfetch first 15 rows only;\n'''\n\ntest = pd.read_sql(query,conn)\n\nprint(test)\nDOC    VERK    FILENAME          STOREDFILEBLOB\n434    2343    sow2.rtf          b'\\xa0\\xa0\\xa0\\xa0\\xfc\\x0e\\x00\\x00\\xff{\\\\rtf1\\...\n342    352     soo_data.doc      b'\\xa0\\xa0\\xa0\\xa0\\xd3&amp;\\x00\\x00\\xff\\xd0\\xcf\\x1...\n123    456     wan_tech_sow.doc  b'\\xa0\\xa0\\xa0\\xa0\\x8a\\x19\\x00\\x00\\xff\\xd0\\xcf...  \n\n\ntest.dtypes\n\nDOC                float64\nVERK               float64\nFILENAME           object\nSTOREDFILEBLOB     object\ndtype: object\n</code></pre>\n\n<p>I tried doing the conversion in the database using this sql:</p>\n\n<pre><code>select DOC, VERK, FILENAME, UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.substr(storedfileblob, 400,1))\nfrom supportdoc \nwhere upper(filename) like '%SOO%' or upper(filename) like '%SOW%'\n</code></pre>\n\n<p>but I got this nonsensical output.</p>\n\n<pre><code>DOC     VERK    FILENAME                            UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(\n6908    8761    SOW (9503581Q0003).rtf      \u00a0\u00a0\u00a0\u00a0\u00fc\n9535    8890    Dataequip SOW9706000Q0008.doc   \u00a0\u00a0\u00a0\u00a0j\n9553    8891    9602001Q0002WritingSOW.doc  \u00a0\u00a0\u00a0\u00a0T\n</code></pre>\n\n<p>APPROACH 2:</p>\n\n<p>I've decided to step back and try to get the .pdf files decoded and in human-readable form first. I updated the query to only yield .pdf type files and am not using pyodbc but cx_Oracle since everyone else is using that.</p>\n\n<p>New Code:</p>\n\n<pre><code>query = '''\nselect doc,verk,filename,storedfileblob\nfrom supportdoc \nwhere (upper(filename) like '%SOO%' or upper(filename) like '%SOW%' or upper(filename) like '%PWS%')\nand (substr(upper(filename),-3) like '%PDF%')\nfetch first 15 rows only\n'''\n\ndsn = cx_Oracle.makedsn(host, port, sid)  \norcl = cx_Oracle.connect(username+'/'+password+'@'+dsn)\ncurs = orcl.cursor()\ncurs.execute(query)\nrows = curs.fetchall()\n\n\nfor row in rows:\n    filename = 'F:/Users/Acme'+'/contract_blob/'+str(row[0])+'_'+str(row[1])+'_dockey_verkey.pdf'\n    f = codecs.open(filename, encoding='utf-16', mode='wb+')\n    f.write(row[3].read())\n    f.close()\n</code></pre>\n\n<p>The code above yields:</p>\n\n<pre><code>TypeError: utf_16_encode() argument 1 must be str, not bytes\n</code></pre>\n\n<p>I picked utf-16 at random for the encoding. I did some research and pdfs tend to be utf-16(atleast that's what I understood from what I read). I'm just grasping at straws. </p>\n\n<p>At the end of the day, my objective is the same. I need to retrieve BLOBs from the database then decode the BLOB and get the human readable document. I'm starting with the pdf documents. There are also .doc, .png. and .zip type BLOB files. I'm hoping once I perfect the method for the .pdfs, it will be easier to tackle the .doc BLOBs. I'll probably ignore the .png and .zip files. Any help is appreciated.</p>\n"}, {"tags": ["python", "directory", "jupyter-notebook", "windows-10", "command-prompt"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10768419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde756b4b649bf23b4eb692ef523df40?s=128&d=identicon&r=PG&f=1", "display_name": "toch_okafor", "link": "https://stackoverflow.com/users/10768419/toch-okafor"}, "edited": false, "score": 0, "creation_date": 1573692407, "post_id": 58846869, "comment_id": 103969015, "body": "It&#39;s my personal computer. I gave access and full control to everyone. It still isn&#39;t working."}, {"owner": {"reputation": 1, "user_id": 10768419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde756b4b649bf23b4eb692ef523df40?s=128&d=identicon&r=PG&f=1", "display_name": "toch_okafor", "link": "https://stackoverflow.com/users/10768419/toch-okafor"}, "edited": false, "score": 0, "creation_date": 1573734551, "post_id": 58846869, "comment_id": 103985031, "body": "I think I&#39;ve figured out the issue. My Documents folder were being saved in OneDrive. I&#39;ve moved them from OneDrive now. Thanks for your time!"}], "tags": [], "owner": {"reputation": 1501, "user_id": 11517841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gs4vK.png?s=128&g=1", "display_name": "Sushanth", "link": "https://stackoverflow.com/users/11517841/sushanth"}, "is_accepted": false, "score": 0, "last_activity_date": 1573685674, "creation_date": 1573685674, "answer_id": 58846869, "question_id": 58846651, "link": "https://stackoverflow.com/questions/58846651/the-system-cannot-find-the-path-specified-the-notebook-list-is-empty/58846869#58846869", "title": "&quot;The system cannot find the path specified.&quot;/ &quot;The notebook list is empty&quot;", "body": "<p>Check the permissions of the particular folder. On the respective folder, right-click --> give access to-->. In the appearing list, make sure that \"<strong>view and edit</strong>\" access is granted to all users if you have more than 1. </p>\n\n<p>(To do this you will require admin privileges. So make sure in your windows PC you have logged on as an admin.) </p>\n"}], "owner": {"reputation": 1, "user_id": 10768419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde756b4b649bf23b4eb692ef523df40?s=128&d=identicon&r=PG&f=1", "display_name": "toch_okafor", "link": "https://stackoverflow.com/users/10768419/toch-okafor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1024, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573685674, "creation_date": 1573684357, "question_id": 58846651, "link": "https://stackoverflow.com/questions/58846651/the-system-cannot-find-the-path-specified-the-notebook-list-is-empty", "title": "&quot;The system cannot find the path specified.&quot;/ &quot;The notebook list is empty&quot;", "body": "<p>Please I need help with an issue.</p>\n\n<p>I can't access the folders in my Documents folder on Command Prompt. I also noticed this problem with my Jupyter Notebook. The system does not detect the folders in my Documents folder. It returns an error message on Command Prompt which says, \"The system cannot find the path specified.\". On Jupyter Notebook, it's still the same issue; it says, \"The notebook list is empty.\" But my Documents folder is not empty.</p>\n\n<p>Please, what is causing this issue?</p>\n\n<p>I use a Windows 10 HP computer.</p>\n"}, {"tags": ["python", "macos", "pyqt5", "pyinstaller", "codesign"], "owner": {"reputation": 51, "user_id": 6950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a432cc7ed36084b06e3630394abdc6?s=128&d=identicon&r=PG&f=1", "display_name": "John Singer", "link": "https://stackoverflow.com/users/6950963/john-singer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573684445, "creation_date": 1573684317, "last_edit_date": 1573684445, "question_id": 58846647, "link": "https://stackoverflow.com/questions/58846647/how-to-eliminate-error-code-signing-qt-framework-unsealed-contents-present-in", "title": "How to eliminate Error Code Signing Qt Framework - unsealed contents present in the root directory of an embedded framework", "body": "<p>I am attempting to codesign and notarize a MacOS .app bundle generated by Pyinstaller.  The application is developed using Python3, PyQt bindings, and the Qt toolkit.  </p>\n\n<p>Here are the versions:</p>\n\n<ul>\n<li>PyInstaller 3.5</li>\n<li>Python version: 3.7.4 (v3.7.4:e09359112e, Jul  8 2019, 14:54:52) \n[Clang 6.0 (clang-600.0.57)]</li>\n<li>Qt version: 5.13.0</li>\n<li>PyQt version: 5.13.1</li>\n<li>sip version: 4.19.19</li>\n</ul>\n\n<p>The app itself runs great on the MAC, the problems start when attempting to code sign the app so it can be notarized.  The issue I'm illustrating here has to do with the Qt Frameworks.  If anyone can provide a set of steps that will successfully sign one of the Qt Frameworks in the pyinstaller generated .app bundle I'd really appreciate it.</p>\n\n<p>Here is my process...  </p>\n\n<p>The .app bundle is created by Pyinstaller and runs fine.\nThe first step is to fix the folder structure created by Pyinstaller.  It doesn't conform exactly to what Apple expects, but to be fair, what Qt installs doesn't either.  Run this script to fix the QtCore framework in the .app bundle</p>\n\n<p>Echo Fix the QtCore framework folders</p>\n\n<pre><code>qtfolder=\"/Users/xxx/Qt/5.13.1/clang_64/lib\"\nbasefolder=\"/Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework\"\ncp -R $qtfolder/QtCore.framework/Versions/5/Resources $basefolder/Versions/5\nln -s $basefolder/Versions/5 $basefolder\nmv $basefolder/5 $basefolder/Versions/Current\nln -s $basefolder/Versions/Current/Resources $basefolder\nln -s $basefolder/Versions/Current/QtCore $basefolder\n</code></pre>\n\n<p>This produces the following folder structure and files which I believe conform to what Apple expects.  this is based on numerous blog posts etc.</p>\n\n<pre><code>QtCore@ -&gt; /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework/Versions/Current/QtCore\nResources@ -&gt; /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework/Versions/Current/Resources\nVersions/\n\n./Versions:\n\n5/\nCurrent@ -&gt; /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework/Versions/5\n\n./Versions/5:\nQtCore*\nResources/\n\n./Versions/5/Resources:\nInfo.plist\n</code></pre>\n\n<p>Now I start signing the files.  There are many posts on what to sign and how to sign all of which seem outdated and contradictory.  The best current advice I think is to sign everything.  I've tried many combinations and they've all ended up with the same error.</p>\n\n<pre><code>sudo codesign --verbose --force --sign \"Developer ID Application:  (xxx)\" /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework/versions/5/resources/Info.plist\nsudo codesign --verbose --force --sign \"Developer ID Application:  (xxx)\" /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework/versions/5/QtCore\nsudo codesign --verbose --force --sign \"Developer ID Application:  (xxx)\" /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework/versions/5/_CodeSignature/CodeResources\nsudo codesign --verbose --force --sign \"Developer ID Application:  (xxx)\" /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework/versions/5\n</code></pre>\n\n<p>At this point every file and folder in the framework that can be signed has been signed successfully.  I don't sign the symlinks as I think that just resigns the underlying files.  The final step is to sign the framework itself.</p>\n\n<pre><code>sudo codesign  --verbose --force --sign \"Developer ID Application: (xxx)\" /Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework\n</code></pre>\n\n<p>this produces the following error message:</p>\n\n<pre><code>/Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework: replacing existing signature\n/Users/xxx/Documents/PYINSTALLERTEST/dist/MyApp.app/Contents/MacOS/PyQt5/Qt/lib/QtCore.framework: **unsealed contents present in the root directory of an embedded framework**\n</code></pre>\n\n<p>Any ideas on what I'm doing wrong?</p>\n"}, {"tags": ["python", "numpy", "scipy", "fft"], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 5779869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8927c69d87d3a060c3c4f723243986f0?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5779869/tomasz"}, "is_accepted": true, "score": 0, "last_activity_date": 1573684233, "creation_date": 1573684233, "answer_id": 58846628, "question_id": 58846626, "link": "https://stackoverflow.com/questions/58846626/filter-out-range-of-frequencies-using-band-stop-filter-in-python-and-confirm-it/58846628#58846628", "title": "Filter out range of frequencies using band stop filter in Python and confirm it using Fourier Transform FFT", "body": "<p>Basing on answers from: \n<a href=\"https://stackoverflow.com/questions/25735153/plotting-a-fast-fourier-transform-in-python\">Plotting a Fast Fourier Transform in Python</a>\nand:\n<a href=\"https://dsp.stackexchange.com/questions/49433/bandstop-filter\">Bandstop filter</a>\nI wrote following code:</p>\n\n<pre><code>import pandas as pd\nimport time\nfrom scipy.signal import lfilter\nimport matplotlib.pyplot as plt\nimport scipy\nimport numpy as np\n\n# In the below lines data are being filtered using Bandstop filter\nprint(\"Filtering using Bandstop filter...\")\nstart_filtering_bandstop = time.time()\n\n# Define filtering parameters:\norder = 2\nfs = 800.0 # sample rate, Hz\nlowcut = 90 # desired cutoff frequency of the filter, Hz\nhighcut = 110\n\n# Define plots\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 7))\n\n# Number of samplepoints\nN = 600\n# sample spacing\nT = 1.0 / fs\nx = np.linspace(0.0, N*T, N)\ny = np.sin(50.0 * 2.0*np.pi*x) + 0.5*np.sin(100.0 * 2.0*np.pi*x) + 0.2*np.sin(200 * 2.0*np.pi*x) # You can put there pandas series too...\nax1.plot(x, y, label='Signal before filtering')\nprint(\"Calculating FFT, please wait...\")\nyf = scipy.fftpack.fft(y)\nxf = np.linspace(0.0, 1.0/(2.0*T), N/2)\n\n\nax1.set_title('Signal')\nax2.set_title('FFT')\nax2.plot(xf, 2.0/N * np.abs(yf[:N//2]), label='Before filtering')\n\ndef butter_bandstop_filter(data, lowcut, highcut, fs, order):\n    nyq = 0.5 * fs\n    low = lowcut / nyq\n    high = highcut / nyq\n    b, a = scipy.signal.butter(order, [low, high], btype='bandstop')#, fs, )\n    y = lfilter(b, a, data)\n    return y\n\nprint(\"Filtering signal, please wait...\")\nsignal_filtered = butter_bandstop_filter(y, lowcut, highcut, fs, order)\nax1.plot(x, signal_filtered, label='Signal after filtering')\nax1.set(xlabel='X', ylabel='Signal values')\nax1.legend() # Don't forget to show the legend\nax1.set_xlim([0,0.8])\nax1.set_ylim([-1.5,2])\n\n# Number of samplepoints\nN = len(signal_filtered)\n# sample spacing\nT = 1.0 / fs\nx = np.linspace(0.0, N*T, N)\ny = signal_filtered\nprint(\"Calculating FFT after filtering, please wait...\")\nyf = scipy.fftpack.fft(y)\nxf = np.linspace(0.0, 1.0/(2.0*T), N/2)\n\n# Plot axes...\nax2.plot(xf, 2.0/N * np.abs(yf[:N//2]), label='After filtering')\nax2.set(xlabel='Frequency [Hz]', ylabel='Magnitude')\nax2.legend() # Don't forget to show the legend\nplt.savefig('FFT_after_bandstop_filtering.png', bbox_inches='tight', dpi=300) # If dpi isn't set, the script execution will be faster\n# Alternatively for immediate showing of plot:\n# plt.show()\nplt.close()\n\nend_filtering_bandstop = time.time()\nprint(\"Data filtered using Bandstop filter in\",round(end_filtering_bandstop - start_filtering_bandstop,2),\"seconds!\")\n\n</code></pre>\n\n<p>and obtained following plots:\n<a href=\"https://i.stack.imgur.com/FQNsr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FQNsr.png\" alt=\"Plots showing signals and their FFT representations\"></a></p>\n\n<p>As we can see, the 100Hz has been filtered out using band-stop filter.</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 5779869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8927c69d87d3a060c3c4f723243986f0?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5779869/tomasz"}, "edited": false, "score": 0, "creation_date": 1573740872, "post_id": 58858660, "comment_id": 103988723, "body": "Probably due to the &quot;immediate&quot; end of the signal, that f(end)=/=0, but has some value..."}], "tags": [], "owner": {"reputation": 11, "user_id": 4337756, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z8--RqJ-vGI/AAAAAAAAAAI/AAAAAAAAC6w/lKXyGK1sV9Q/photo.jpg?sz=128", "display_name": "Andrzej \u017bukowski", "link": "https://stackoverflow.com/users/4337756/andrzej-%c5%bbukowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1573740431, "creation_date": 1573740431, "answer_id": 58858660, "question_id": 58846626, "link": "https://stackoverflow.com/questions/58846626/filter-out-range-of-frequencies-using-band-stop-filter-in-python-and-confirm-it/58858660#58858660", "title": "Filter out range of frequencies using band stop filter in Python and confirm it using Fourier Transform FFT", "body": "<p>Why magnitude for frequency 50 Hz decreased from 1 to 0.7 after Fast Fourier Transform?</p>\n"}], "owner": {"reputation": 399, "user_id": 5779869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8927c69d87d3a060c3c4f723243986f0?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5779869/tomasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 58846628, "answer_count": 2, "score": 0, "last_activity_date": 1573740431, "creation_date": 1573684233, "question_id": 58846626, "link": "https://stackoverflow.com/questions/58846626/filter-out-range-of-frequencies-using-band-stop-filter-in-python-and-confirm-it", "title": "Filter out range of frequencies using band stop filter in Python and confirm it using Fourier Transform FFT", "body": "<p>Supposing that I have following signal:\n<code>y = np.sin(50.0 * 2.0*np.pi*x) + 0.5*np.sin(100.0 * 2.0*np.pi*x) + 0.2*np.sin(200 * 2.0*np.pi*x)</code>\nhow can I filter out in example 100Hz using Band-stop filter in Python? In this signal there are peaks at 50Hz, 100Hz and 200Hz. It would be helpful it it could be visualized using FFT in order to confirm that this frequency has been filtered correctly.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "graph", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 12229, "user_id": 12366110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d357302df47fd4307d331001e90ef5?s=128&d=identicon&r=PG&f=1", "display_name": "CDJB", "link": "https://stackoverflow.com/users/12366110/cdjb"}, "is_accepted": false, "score": 0, "last_activity_date": 1581282597, "last_edit_date": 1581282597, "creation_date": 1573732041, "answer_id": 58856095, "question_id": 58846623, "link": "https://stackoverflow.com/questions/58846623/add-thousands-comma-separator-to-relplot/58856095#58856095", "title": "Add thousands comma separator to Relplot", "body": "<p>You can do this with the following.</p>\n\n<pre><code>import matplotlib.ticker as tkr\n\nfor ax in g.axes.flatten():\n    ax.yaxis.set_major_formatter(\n        tkr.FuncFormatter(lambda y, p: format(int(y), ',')))\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4793429, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b486c65903066c9c7af9bc6db127f0d1?s=128&d=identicon&r=PG&f=1", "display_name": "lala_12", "link": "https://stackoverflow.com/users/4793429/lala-12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1581282610, "creation_date": 1573684227, "last_edit_date": 1581282610, "question_id": 58846623, "link": "https://stackoverflow.com/questions/58846623/add-thousands-comma-separator-to-relplot", "title": "Add thousands comma separator to Relplot", "body": "<p>How can I add a thousands comma separator to a Seaborn Relplot in Python?</p>\n\n<p>My code is below:</p>\n\n<pre><code>g = sns.relplot(\n    x='date',\n    y='count',\n    kind='line',\n    data=df\n)\nplt.ticklabel_format(style='plain', axis='y')\n</code></pre>\n"}, {"tags": ["python", "windows", "tkinter", "pyinstaller", "transparent"], "answers": [{"comments": [{"owner": {"reputation": 1082, "user_id": 2607201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bwnDh.jpg?s=128&g=1", "display_name": "DCA-", "link": "https://stackoverflow.com/users/2607201/dca"}, "edited": false, "score": 0, "creation_date": 1608686078, "post_id": 64086586, "comment_id": 115656552, "body": "Wow, this solved a problem I&#39;ve had for a long time. Nice!"}], "tags": [], "owner": {"reputation": 21, "user_id": 14348776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc073f8d650d49dc4ef9bf52f8226734?s=128&d=identicon&r=PG", "display_name": "Yizhenhua", "link": "https://stackoverflow.com/users/14348776/yizhenhua"}, "is_accepted": false, "score": 2, "last_activity_date": 1601196580, "creation_date": 1601196580, "answer_id": 64086586, "question_id": 58846611, "link": "https://stackoverflow.com/questions/58846611/tkinter-partially-click-through-able-windows-only/64086586#64086586", "title": "Tkinter partially click through-able? (Windows only)", "body": "<p>I also have met this problem...</p>\n<p>after a lot try, I found that if distribute the exe file with the manifest file which also generated by pyinstaller, the click through feature will work as expected.</p>\n"}], "owner": {"reputation": 55, "user_id": 9588121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1abf11c6718a50f31eb88e70252857f5?s=128&d=identicon&r=PG&f=1", "display_name": "Torvoor", "link": "https://stackoverflow.com/users/9588121/torvoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1601196580, "creation_date": 1573684158, "last_edit_date": 1573725563, "question_id": 58846611, "link": "https://stackoverflow.com/questions/58846611/tkinter-partially-click-through-able-windows-only", "title": "Tkinter partially click through-able? (Windows only)", "body": "<p>I am writing an application that hovers a ruler over all other on-screen content.  I have made the tkinter window and associated canvas transparent using: </p>\n\n<pre><code>root.overrideredirect(True) #This hides the window outline/controls \nroot.state('zoomed') #This scales the window to fill the page\nroot.configure(background=bgColor) #Set bg color of window (used to make transparent \\/)\nroot.wm_attributes(\"-transparentcolor\", bgColor) #Necessary for transparent, window\nroot.lift()#Lifting window above all others\nroot.wm_attributes(\"-topmost\", True)#Hold window on top of all other windows\n</code></pre>\n\n<p>I am able to click through this application where transparent before compiling with pyinstaller to an exe.  However after compiling to an exe this is no longer possible.  </p>\n\n<p>I attempted the solution shared here: <a href=\"https://stackoverflow.com/questions/29458775/tkinter-see-through-window-not-affected-by-mouse-clicks/29854420#29854420\">Tkinter see through window not affected by mouse clicks</a>\nHowever this makes the entire window click through-able, meaning that I can no longer interact with the non-transparent portions of the top window (which I have to be able to do).</p>\n\n<pre><code>hwnd = win32gui.FindWindow(None, \"Digital Ruler\") # Getting window handle\n# hwnd = root.winfo_id() getting hwnd with Tkinter windows\n# hwnd = root.GetHandle() getting hwnd with wx windows\nlExStyle = win32gui.GetWindowLong(hwnd, win32con.GWL_EXSTYLE)\nlExStyle |=  win32con.WS_EX_TRANSPARENT | win32con.WS_EX_LAYERED \nwin32gui.SetWindowLong(hwnd, win32con.GWL_EXSTYLE , lExStyle )\n</code></pre>\n\n<p>I need to be able to move/interact with any colored sections of the root window but need to be able to click through any transparent sections... So far I have only been able to completely seize the mouse or completely miss it.</p>\n"}, {"tags": ["python", "user-interface", "button", "tkinter"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1573725410, "post_id": 58846570, "comment_id": 103979863, "body": "<b><i>&quot;I know the submit button needs a command&quot;</i></b>: Why didn&#39;t do so? Read <a href=\"http://effbot.org/tkinterbook/button.htm\" rel=\"nofollow noreferrer\">The Tkinter Button Widget</a>"}, {"owner": {"reputation": 4975, "user_id": 2323393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d52f68fba51eda4b59593a83a3c1250?s=128&d=identicon&r=PG", "display_name": "scotty3785", "link": "https://stackoverflow.com/users/2323393/scotty3785"}, "edited": false, "score": 0, "creation_date": 1573726684, "post_id": 58846570, "comment_id": 103980588, "body": "<code>submit = Button(master, text=&quot;Submit&quot;).grid(row=5, column=1, stick=W, pady=4)</code> Don&#39;t do this. submit will be set to none. Put the .grid on a new line like <code>submit.grid()</code>. Same for all of your labels. This will likely explain why the <code>date.get</code> calls aren&#39;t working."}], "answers": [{"tags": [], "owner": {"reputation": 224, "user_id": 12027397, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V76AVuMEvp4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcIJRS5vGqMom44kR8c57llIt3Lvw/photo.jpg?sz=128", "display_name": "John T", "link": "https://stackoverflow.com/users/12027397/john-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1573776976, "creation_date": 1573776976, "answer_id": 58868490, "question_id": 58846570, "link": "https://stackoverflow.com/questions/58846570/how-to-send-information-from-gui-to-excel-spreadsheet-below-is-my-code/58868490#58868490", "title": "How to send information from GUI to excel spreadsheet? Below is my code", "body": "<p>add a command to call your insert function to the submit button.</p>\n\n<pre><code>#modify the submit button\nsubmitBtn = Button(master, text=\"Submit\", command = insert)\nsubmitBtn.grid(row=5, column=1, stick=W, pady=4)\n</code></pre>\n\n<p>next update your names and follow this template (or a similar one) for your variable-label-entry items. as mentioned in the comments to your question calling a grid in the same line as your creation of the instance can cause issues. not so much with labels as those are static (in this case), but the get() method on the entry boxes will return the error \"'NoneType' object has no attribute get()\".  </p>\n\n<pre><code>#Entry field initialize variable \ndate = StringVar()\n# create entry widget and tie it to variable\ndateLabel = Label(...)\ndateEntry = Entry(master, textvariable = date)\ndateLabel.grid(row = 0, column = 0)\ndateEntry.grid(row = 0, column = 1) \n</code></pre>\n\n<p>you can add this next part on to your submit function or create a clearEntryBoxes function to call when the insert() function finishes.</p>\n\n<pre><code>#to clear entry fields\ndateEntry.delete(0,'end')\n</code></pre>\n\n<p>insert command is trying to write in the next row (headers are columns), while your headers are set up as row labels under the # Excel sheet location, it should be this to match your insert functions format... or flip your insert function to match the locations by adding to the columns instead of rows</p>\n\n<pre><code>sheet.cell(row=1, column=1).value = \"Date\"\nsheet.cell(row=1, column=2).value = \"Production Hour\"\n.\n.\n.\n</code></pre>\n\n<p>or </p>\n\n<pre><code>sheet.cell(row=1, column=current_column + 1).value = dateEnt.get()\nsheet.cell(row=2, column=current_column + 1).value = prodhourEnt.get()\n.\n.\n.\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12334127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acebb68cf83ca3489daae64206db177f?s=128&d=identicon&r=PG&f=1", "display_name": "Newguy22", "link": "https://stackoverflow.com/users/12334127/newguy22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573776976, "creation_date": 1573683938, "last_edit_date": 1573725316, "question_id": 58846570, "link": "https://stackoverflow.com/questions/58846570/how-to-send-information-from-gui-to-excel-spreadsheet-below-is-my-code", "title": "How to send information from GUI to excel spreadsheet? Below is my code", "body": "<pre><code>from tkinter import *\nfrom openpyxl import *\n</code></pre>\n\n<p>I want to save information into this work book by a user using the GUI I have created. </p>\n\n<pre><code>master = Tk()\nwb = load_workbook('C:\\\\Users\\\\broc\\\\PycharmProjects\\\\GLTDB\\\\gltdb.xlsx')\nsheet = wb.active\n\n# Excel sheet location\nsheet.cell(row=1, column=1).value = \"Date\"\nsheet.cell(row=2, column=1).value = \"Production Hour\"\nsheet.cell(row=3, column=1).value = \"Production\"\nsheet.cell(row=4, column=1).value = \"Scrap\"\nsheet.cell(row=5, column=1).value = \"Operators\"\n\n\n\n\n# Function to take data from GUI put into Excel\n\n\ndef insert():\n    if (date.get() == \"\" and\n        prodhour.get() == \"\" and\n        production.get() == \"\" and\n        scrap.get() == \"\" and\n        operators.get() == \"\"):\n\n        print(\"empty input\")\n\n    else:\n\n        current_row = sheet.max_row\n        current_column = sheet.max_column\n\n        sheet.cell(row=current_row + 1, column=1).value = date.get()\n        sheet.cell(row=current_row + 1, column=2).value = prodhour.get()\n        sheet.cell(row=current_row + 1, column=3).value = production.get()\n        sheet.cell(row=current_row + 1, column=4).value = scrap.get()\n        sheet.cell(row=current_row + 1, column=5).value = operators.get()\n\n        wb.save('C:\\\\Users\\\\broc\\\\PycharmProjects\\\\GLTDB\\\\gltdb.xlsx')\n        date.focus_set()\n\n        clear()\n\n# GUI\nmaster.title(\"Enter Production results here.\")\nmaster.geometry(\"350x200\")\nmaster.config(background='lightblue', borderwidth=5)\n\n# Labels for GUI\ndate = Label(master, text=\"Date\", bg='lightblue').grid(row=0)\nprodhour = Label(master, text=\"Production Hour\", bg='lightblue').grid(row=1)\nproduction = Label(master, text=\"Production\", bg='lightblue').grid(row=2)\nscrap = Label(master, text=\"Scrap\", bg='lightblue').grid(row=3)\noperators = Label(master, text=\"Operators\", bg='lightblue').grid(row=4)\n\n# Entries for GUI\ndate = Entry(master).grid(row=0, column=1)\nprodhour = Entry(master).grid(row=1, column=1)\nproduction = Entry(master).grid(row=2, column=1)\nscrap = Entry(master).grid(row=3, column=1)\noperators = Entry(master).grid(row=4, column=1)\n</code></pre>\n\n<p>I know the submit button needs a command but im not sure where to start to make this happen. I want the user to hit submit and the data go to excel sheet, then in the GUI window I would like it to clear contents or close automatically.      </p>\n\n<pre><code># Command Buttons\nsubmit = Button(master, text=\"Submit\").grid(row=5, column=1, stick=W, pady=4)\nButton(master, text='Cancel', command=master.quit).grid(row=5, column=2, sticky=W, pady=4)\nmainloop()\n</code></pre>\n"}, {"tags": ["python", "django", "redirect"], "comments": [{"owner": {"reputation": 986, "user_id": 7663649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772ff178b6b78778a0018ddd77d6a25?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7663649/pierre"}, "edited": false, "score": 0, "creation_date": 1573684076, "post_id": 58846568, "comment_id": 103966835, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/12671649/redirect-to-index-page-after-submiting-form-in-django\">Redirect to index page after submiting form in django</a>"}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573684600, "post_id": 58846607, "comment_id": 103967024, "body": "Ok, so 1st method works fine - I get what I want, but it&#39;s still at the same endpoint (just content of homepage changes, there is no redirect to localhost:8000/bokeh what I expected. The 2nd method doesnt work - probably I got something wrong with my urls.py (url(r&#39;^bokeh/&#39;,views.bokeh,name=&#39;bokeh&#39;))"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 1, "creation_date": 1573684679, "post_id": 58846607, "comment_id": 103967048, "body": "@Frendom: no there is no redirect. You simply call the functin, and return the response of that function. As said before, it is furthermore not a good idea to call the function in the first place. You should return a <code>redirect</code> with the name of the <code>bokeh</code> view, and then let the client make a second request."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573684891, "post_id": 58846607, "comment_id": 103967119, "body": "@Frendom: since the name of that view is <code>bokeh</code>, it thus should be <code>redirect(&#39;bokeh&#39;, url=url)</code>. But you forgot to add a <code>(?P&lt;url&gt;...)</code> parameter to you <code>url(..)</code>. See: <a href=\"https://docs.djangoproject.com/en/2.0/ref/urls/#django.urls.re_path\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.0/ref/urls/#django.urls.re_path</a>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573685722, "post_id": 58846607, "comment_id": 103967404, "body": "@Frendom: you should omit the <code>url=&#39;url&#39;</code> parameter."}, {"owner": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573685920, "post_id": 58846607, "comment_id": 103967454, "body": "Im getting NoReverseMatch for &#39;bokeh&#39; with keyword arguments &#39;{&#39;url&#39;: &#39;url I just sent&#39;}&#39;"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573685954, "post_id": 58846607, "comment_id": 103967464, "body": "@Frendom: did you use an <code>app_name</code>?"}, {"owner": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573686122, "post_id": 58846607, "comment_id": 103967524, "body": "I&#39;ve never used app_name because it worked fine to this moment"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573686122, "post_id": 58846607, "comment_id": 103967523, "body": "@Frendom: note that <code>\\w+</code> only contains word characters. So no <code>&#47;</code>, <code>:</code>, <code>.</code>, <code>?</code>, <code>#</code>, <code>-</code>, etc."}, {"owner": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573686822, "post_id": 58846607, "comment_id": 103967681, "body": "so how correct pattern would like to look? Or is there a must to us him?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "edited": false, "score": 0, "creation_date": 1573686904, "post_id": 58846607, "comment_id": 103967705, "body": "You can use <code>(?P&lt;url&gt;.+)</code>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1573685693, "last_edit_date": 1573685693, "creation_date": 1573684143, "answer_id": 58846607, "question_id": 58846568, "link": "https://stackoverflow.com/questions/58846568/django-calling-function-does-not-redirect/58846607#58846607", "title": "Django - calling function does not redirect", "body": "<p>You did not return the result of the <code>bokeh</code> function:</p>\n\n<pre><code>def home(request):\n    if request.method == 'POST':\n        url = request.POST['url']\n        <b>return</b> bokeh(request,url)\n    return render(request,'home.html')</code></pre>\n\n<p>Note however that this is <em>not</em> redirecting, and therefore you do <em>not</em> implement the <a href=\"https://en.wikipedia.org/wiki/Post/Redirect/Get\" rel=\"nofollow noreferrer\"><em>Post/Redirect/Get</em> pattern [wiki]</a>. In case of a successful POST request, it is usually a good idea to perform a redirect, to prevent a user from refreshing the page, making the <em>same</em> POST request. A POST request frequently has side effects, and therefore we want to omit that.</p>\n\n<p>You better make use of the <a href=\"https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect\" rel=\"nofollow noreferrer\"><strong><code>redirect(..)</code></strong> function [Django-doc]</a> here:</p>\n\n<pre><code>from django.shortcuts import <b>redirect</b>\n\ndef home(request):\n    if request.method == 'POST':\n        url = request.POST['url']\n        <b>return redirect('bokeh', url=url)</b>\n    return render(request,'home.html')</code></pre>\n\n<p>You should not use a <code>url=&hellip;</code> in the <code>url(..)</code> function:</p>\n\n<pre><code>urlpatterns = [\n    url(r'^$', views.home, name='home'),\n    <b>url(r'^bokeh/(?P&lt;url&gt;\\w+)/$', views.bokeh, name='bokeh')</b>,\n]</code></pre>\n"}], "owner": {"reputation": 314, "user_id": 10415819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679e65849fcf8fdf7a0884ea65b1a147?s=128&d=identicon&r=PG&f=1", "display_name": "Frendom", "link": "https://stackoverflow.com/users/10415819/frendom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 58846607, "answer_count": 1, "score": 1, "last_activity_date": 1573685693, "creation_date": 1573683920, "last_edit_date": 1573685508, "question_id": 58846568, "link": "https://stackoverflow.com/questions/58846568/django-calling-function-does-not-redirect", "title": "Django - calling function does not redirect", "body": "<p>I want to redirect and return view after submiting form on my homepage. Unfortunately after POST nothing is happend.</p>\n\n<p>My homepage:</p>\n\n<pre><code>def home(request):\n    if request.method == 'POST':\n        url = request.POST['url']\n        bokeh(request,url)\n    return render(request,'home.html')\n\ndef bokeh(request,url):\n    //my calculation logic\n    return render(request,'bokeh.html')\n</code></pre>\n\n<p>Of course I send other attributes like dictionaries etc, but it works fine when I hardcode my url in browser. After clicking submit on my form in my homepage nothing is happend.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>my bokeh function look like that:</p>\n\n<pre><code>def bokeh(request,url):\n\n    source = urllib.request.urlopen(url).read()\n    soup = bs.BeautifulSoup(source, 'lxml')\n    descrp = [description.text for description in soup.find_all('p', class_=\"commit-title\")]\n    author = [author.text for author in soup.find_all('a', class_=\"commit-author\")]\n    dict1 = dict(zip(descrp,author))\n    dict2 = dict(Counter(dict1.values()))\n    label = list(dict2.keys())\n    value = list(dict2.values())\n\n    plot = figure(title='Github Effort',x_range=label,y_range=(0,30), plot_width=400, plot_height=400)\n    plot.line(label,value,line_width = 2)\n    script,div = components(plot)\n\n    return render(request,'bokeh.html',{'script': script,'div': div})\n</code></pre>\n\n<p>and my <strong>urls.py</strong></p>\n\n<pre><code>urlpatterns = [\n    url(r'^$', views.home, name='home'),\n    url(r'^bokeh/(?P&lt;url&gt;\\w+)/$',views.bokeh,name='bokeh',url='url'),\n]\n</code></pre>\n\n<p>And at this moment I got TypeError: url() got an unexpected keyword argument 'url'</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10095933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKYJM.jpg?s=128&g=1", "display_name": "Gabriel Hisatugu", "link": "https://stackoverflow.com/users/10095933/gabriel-hisatugu"}, "edited": false, "score": 0, "creation_date": 1573684346, "post_id": 58846557, "comment_id": 103966936, "body": "This function works, but it returns an object. Would it be possible to turn this object into a pd.Series or Data Frame?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 69, "user_id": 10095933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKYJM.jpg?s=128&g=1", "display_name": "Gabriel Hisatugu", "link": "https://stackoverflow.com/users/10095933/gabriel-hisatugu"}, "edited": false, "score": 0, "creation_date": 1573684413, "post_id": 58846557, "comment_id": 103966962, "body": "you need to be more descriptive about what you expect.  None the less, I&#39;ll update with what I think you&#39;re after."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 69, "user_id": 10095933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKYJM.jpg?s=128&g=1", "display_name": "Gabriel Hisatugu", "link": "https://stackoverflow.com/users/10095933/gabriel-hisatugu"}, "edited": false, "score": 0, "creation_date": 1573684485, "post_id": 58846557, "comment_id": 103966985, "body": "@GabrielHisatugu Well, for starters, <code>pd.Series</code> and <code>pd.DataFrame</code> <i>are objects since everything is an object in Python</i>. And in any case, this produces a data-frame, so what exactly do you mean?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1573684705, "post_id": 58846557, "comment_id": 103967058, "body": "Hey! @juanpa.arrivillaga.  OP, I&#39;m not going to guess what you want.  You can see what I&#39;ve done so far.  If that makes sense or helps you solidify what you want to do, then edit your question with more description and let me know."}, {"owner": {"reputation": 69, "user_id": 10095933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKYJM.jpg?s=128&g=1", "display_name": "Gabriel Hisatugu", "link": "https://stackoverflow.com/users/10095933/gabriel-hisatugu"}, "edited": false, "score": 0, "creation_date": 1573684723, "post_id": 58846557, "comment_id": 103967067, "body": "Sorry, I thought the outcome expected was a good example. I wanted the results to be shown in a new DataFrame, as a result of a groupby function would normally work, with the &#39;A&#39; column with the &#39;icon1&#39; and the updated dict in the &#39;B&#39; column."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1573684817, "last_edit_date": 1573684817, "creation_date": 1573683864, "answer_id": 58846557, "question_id": 58846482, "link": "https://stackoverflow.com/questions/58846482/pandas-groupby-function-with-dict-update/58846557#58846557", "title": "Pandas groupby function with dict.update()", "body": "<h3><code>toolz.dicttoolz.merge</code></h3>\n\n<pre><code>from toolz.dicttoolz import merge\n\ndf.groupby('A')['B'].agg(merge).reset_index()\n\n       A                                                  B\n0  icon1  {'ap1': {'item': 1}, 'ap2': {'item': 2}, 'ap3'...\n1  icon2  {'ap1': {'item': 1}, 'ap2': {'item': 2}, 'ap3'...\n</code></pre>\n\n<hr>\n\n<h3>Setup</h3>\n\n<pre><code>df = pd.DataFrame(dict(\n    A=['icon1', 'icon1', 'icon2', 'icon2'],\n    B=[{'ap1': {'item': 1}, 'ap2': {'item': 2}}, {'ap3': {'item': 3}}] * 2\n))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 10095933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKYJM.jpg?s=128&g=1", "display_name": "Gabriel Hisatugu", "link": "https://stackoverflow.com/users/10095933/gabriel-hisatugu"}, "edited": false, "score": 1, "creation_date": 1573685456, "post_id": 58846748, "comment_id": 103967325, "body": "Thanks @rafaelc this solved the issue after some treatment in my data. New thing to learn: dict comprehension!"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 5, "last_activity_date": 1573684912, "creation_date": 1573684912, "answer_id": 58846748, "question_id": 58846482, "link": "https://stackoverflow.com/questions/58846482/pandas-groupby-function-with-dict-update/58846748#58846748", "title": "Pandas groupby function with dict.update()", "body": "<p>Using dict comprehension </p>\n\n<pre><code>df.groupby('A').B.agg(lambda s: {k:v for a in s for k, v in a.items()}).reset_index()\n</code></pre>\n\n<hr>\n\n<pre><code>        A                                                                 B\n0   icon1   {'ap1': {'item' : 1}, 'ap2': {'item' : 2}, 'ap3': {'item' : 3}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8412, "user_id": 8973620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7qt6R.jpg?s=128&g=1", "display_name": "Mykola Zotko", "link": "https://stackoverflow.com/users/8973620/mykola-zotko"}, "is_accepted": false, "score": 0, "last_activity_date": 1573688061, "last_edit_date": 1573688061, "creation_date": 1573686740, "answer_id": 58847032, "question_id": 58846482, "link": "https://stackoverflow.com/questions/58846482/pandas-groupby-function-with-dict-update/58847032#58847032", "title": "Pandas groupby function with dict.update()", "body": "<p>You can use a helper function:</p>\n\n<pre><code>def func(x):\n    dct = {}\n    for i in x:\n        dct.update(i)\n    return dct\n\ndf.groupby('A')['B'].agg(func).reset_index()\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10095933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKYJM.jpg?s=128&g=1", "display_name": "Gabriel Hisatugu", "link": "https://stackoverflow.com/users/10095933/gabriel-hisatugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 58846748, "answer_count": 3, "score": 3, "last_activity_date": 1573688061, "creation_date": 1573683501, "question_id": 58846482, "link": "https://stackoverflow.com/questions/58846482/pandas-groupby-function-with-dict-update", "title": "Pandas groupby function with dict.update()", "body": "<p>I'm trying to use the Pandas groupby function with a dict.update() function to each element. An example in a data frame (just for illustration):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>        A                                            B\n0   icon1   {'ap1': {'item' : 1}, 'ap2': {'item' : 2}}\n\n1   icon1                        {'ap3': {'item' : 3}}\n</code></pre>\n\n<p>What I'm trying to do is set something like</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = df.groupby('A')['B'].apply(', '.join).reset_index()\n</code></pre>\n\n<p>But instead of using <code>python', '.join</code>, I need to groupby the 'A' column and update each element in the 'B' column. I've tried using the map function, but I was not able to achieve anything useful.</p>\n\n<p>The outcome should be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>        A                                                                 B\n0   icon1   {'ap1': {'item' : 1}, 'ap2': {'item' : 2}, 'ap3': {'item' : 3}}\n\n</code></pre>\n\n<p>Is that even possible without changing the item type from dict?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 816, "user_id": 667758, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QTjZp.png?s=128&g=1", "display_name": "jchung", "link": "https://stackoverflow.com/users/667758/jchung"}, "edited": false, "score": 0, "creation_date": 1573683558, "post_id": 58846380, "comment_id": 103966629, "body": "To clarify: you want main() to request the input, and then pass that input to the replace(), which will then pass that input to uppercase()?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 4, "creation_date": 1573683588, "post_id": 58846380, "comment_id": 103966641, "body": "You&#39;ve identified what you need to do, and apparently what lines of code you need to do it.  Where are you stuck?  Move the code where you need it to be. Also, please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>: most of your post has nothing to do with the question you ask."}, {"owner": {"reputation": 816, "user_id": 667758, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QTjZp.png?s=128&g=1", "display_name": "jchung", "link": "https://stackoverflow.com/users/667758/jchung"}, "edited": false, "score": 0, "creation_date": 1573684217, "post_id": 58846380, "comment_id": 103966881, "body": "Welcome to StackOverflow and thank you for your question. I think you have some formatting issues in your question. Fixing those could make the code easier to read. Here&#39;s a helpful post on that <a href=\"https://meta.stackexchange.com/questions/22186/how-do-i-format-my-code-blocks\" title=\"how do i format my code blocks\">meta.stackexchange.com/questions/22186/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 816, "user_id": 667758, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QTjZp.png?s=128&g=1", "display_name": "jchung", "link": "https://stackoverflow.com/users/667758/jchung"}, "is_accepted": false, "score": 0, "last_activity_date": 1573684046, "creation_date": 1573684046, "answer_id": 58846590, "question_id": 58846380, "link": "https://stackoverflow.com/questions/58846380/how-to-get-the-main-function-to-call-the-other-program/58846590#58846590", "title": "How to get the main function to call the other program", "body": "<p>You are trying to pass values between functions. You need to <code>return</code> the values from each function so that the parent function can use them. Passing values around works like this:</p>\n\n<pre><code>def function2(foo):\n    double_foo = foo * 2 # Do something to create whatever output you need\n    return double_foo\n\ndef function1(bar):\n    foobar = function2(bar) # Note that the foo and bar variables here are locally scoped \n    return foobar\n\ndef main():\n    user_input = input(\"Please enter your string here: \")\n    output = function1(user_input)\n    return output\n\nmain()\n</code></pre>\n\n<p>For more on scoping, check out <a href=\"https://matthew-brett.github.io/teaching/global_scope.html\" rel=\"nofollow noreferrer\">https://matthew-brett.github.io/teaching/global_scope.html</a></p>\n"}], "owner": {"reputation": 13, "user_id": 12368152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d322f21902181b103a73e073df088d2f?s=128&d=identicon&r=PG&f=1", "display_name": "lost", "link": "https://stackoverflow.com/users/12368152/lost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1573684046, "creation_date": 1573682919, "question_id": 58846380, "link": "https://stackoverflow.com/questions/58846380/how-to-get-the-main-function-to-call-the-other-program", "title": "How to get the main function to call the other program", "body": "<p>I have this issue I did where the replace function calls the uppercase function, what I need to do is, I need the main function to call the other functions(SO first the uppercase and then the replace). I also need to change the interactive area. What I mean by this is right now the uppercase function is asking the user for a string, but I need the main function to ask the user for a string and then call the uppercase function and then call replace function. </p>\n\n<pre><code>def uppercase():\ncap_letters = input(\"Please enter your string here: \")\nnew_uppercase=''\nfor letters in cap_letters:\n    if ord(letters) &gt; 96:\n        new_uppercase += chr(ord(letters)-32)\n    else:\n        new_uppercase += letters\nprint(new_uppercase)\nreturn new_uppercase\n</code></pre>\n\n<p>def replace():</p>\n\n<pre><code>old,new = [],[]\nnewString = \"\"\nnew_uppercase = uppercase()\nstring = new_uppercase\nchar = input(\"Change: \")\ntoThis = input(\"Change \" + char + \" to this: \")\n\nfor x in range(0,len(string)):\n    old.append(string[x])\n\nfor y in range(0,len(old)):\n    if old[y] != char:\n        new.append(old[y])\n    else:\n        new.append(toThis)\n\nfor z in range(0,len(new)):\n    newString+=new[z]\nprint(newString)\n\n\ndef main():\nprint(\"Hello, And Welcome to this Slang Program\")\nuppercase()\n# write the part of the program that interacts with the user here\nreplace() \n</code></pre>\n\n<p>main()</p>\n"}, {"tags": ["python", "arrays", "numpy", "numpy-ndarray", "numpy-slicing"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1573683380, "post_id": 58846368, "comment_id": 103966575, "body": "One of them is a multidimensional list, the other is a jagged list.  See <a href=\"https://www.ict.social/python/basics/multidimensional-lists-in-python\" rel=\"nofollow noreferrer\">ict.social/python/basics/multidimensional-lists-in-python</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 3, "creation_date": 1573683641, "post_id": 58846368, "comment_id": 103966661, "body": "@RobertHarvey the question is about <code>numpy.ndarray</code> objects, really, you cant&#39; know the type of object just from this, and in any case, python lists do not have &quot;dimensions&quot;."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1573683688, "post_id": 58846368, "comment_id": 103966681, "body": "Well, alright.  But that&#39;s not what the question is asking."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1573683742, "post_id": 58846368, "comment_id": 103966701, "body": "@RobertHarvey well, the issue isn&#39;t jagged vs not, numpy.ndarray objects implement true multidimensional arrays, and cannot be jagged. That link is really bad, giving a lot of misleading impressions that it tries to pass off as not mere useful abstractions but &quot;how things are implemented technically&quot;."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1573683906, "post_id": 58846368, "comment_id": 103966777, "body": "Is the question answerable in its present form?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1573684274, "post_id": 58846368, "comment_id": 103966907, "body": "Closely related (includes example where behavior differs): <a href=\"https://stackoverflow.com/q/35644847/364696\">python numpy slice notation (COMMA VS STANDARD INDEX)</a>. Also: <a href=\"https://stackoverflow.com/q/38113994/364696\">Why does indexing numpy arrays with brackets and commas differ in behavior?</a>"}, {"owner": {"reputation": 709, "user_id": 898160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfc3d05d23774b06d0b9d2c2e0bcef9?s=128&d=identicon&r=PG", "display_name": "user898160", "link": "https://stackoverflow.com/users/898160/user898160"}, "edited": false, "score": 0, "creation_date": 1573716106, "post_id": 58846368, "comment_id": 103975234, "body": "Thanks! This latter really explains the phenomenon."}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1574404971, "post_id": 58846368, "comment_id": 104229129, "body": "Note that <code>x[:][:][:][:][:][:][:][:][:][:][:][:][:][:][:][:] == x</code>. This just creates copies of x over and over."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1574407361, "post_id": 58846368, "comment_id": 104230005, "body": "Regarding the first part, can you provide any examples where <code>A[:][:] = B[:][:]</code> and <code>A[:,:] = B[:,:]</code> do give different results? I am not able to reproduce this."}], "answers": [{"tags": [], "owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "is_accepted": false, "score": 1, "last_activity_date": 1574405976, "last_edit_date": 1574405976, "creation_date": 1574405362, "answer_id": 58988932, "question_id": 58846368, "link": "https://stackoverflow.com/questions/58846368/what-is-the-difference-in-numpy-between-and/58988932#58988932", "title": "What is the difference in NumPy between [:][:] and [:,:]?", "body": "<p>Let's take a step back. Try this:</p>\n\n<pre><code>&gt;&gt;&gt; x = np.arange(6)\n\n&gt;&gt;&gt; x\narray([0, 1, 2, 3, 4, 5])\n\n&gt;&gt;&gt; x[:]\narray([0, 1, 2, 3, 4, 5])\n\n&gt;&gt;&gt; x[:][:]\narray([0, 1, 2, 3, 4, 5])\n\n&gt;&gt;&gt; x[:][:][:][:][:][:][:][:][:][:]\narray([0, 1, 2, 3, 4, 5])\n</code></pre>\n\n<p>It looks like <code>x[:]</code> is equal to <code>x</code>. (Indeed, <code>x[:]</code> creates a copy of <code>x</code>.) </p>\n\n<p><strong>Therefore, <code>x[:][1] == x[1]</code>.</strong></p>\n\n<hr>\n\n<p>Is this consistent with what we should expect? Why should <code>x[:]</code> be a copy of <code>x</code>? If you're familiar with slicing, these examples should clarify:</p>\n\n<pre><code>&gt;&gt;&gt; x[0:4]\narray([0, 1, 2, 3])\n\n&gt;&gt;&gt; x[0:6]\narray([0, 1, 2, 3, 4, 5])\n\n&gt;&gt;&gt; x[0:]\narray([0, 1, 2, 3, 4, 5])\n\n&gt;&gt;&gt; x[:]\narray([0, 1, 2, 3, 4, 5])\n</code></pre>\n\n<p>We can omit the <code>0</code> and <code>6</code> and numpy will figure out what the maximum dimensions are for us.</p>\n\n<hr>\n\n<p>Regarding the first part of your question, to create a <strong>copy</strong> of <code>B</code>, you can do any of the following:</p>\n\n<pre><code>A = B[:, :]\nA = B[...]\nA = np.copy(B)\n</code></pre>\n"}], "owner": {"reputation": 709, "user_id": 898160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfc3d05d23774b06d0b9d2c2e0bcef9?s=128&d=identicon&r=PG", "display_name": "user898160", "link": "https://stackoverflow.com/users/898160/user898160"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574406932, "creation_date": 1573682854, "last_edit_date": 1574365462, "question_id": 58846368, "link": "https://stackoverflow.com/questions/58846368/what-is-the-difference-in-numpy-between-and", "title": "What is the difference in NumPy between [:][:] and [:,:]?", "body": "<p>I am quite familiar with python programming but I found some strange cases where the following two lines of code provided different results (assuming that the two arrays are 2-dimensional):</p>\n\n<pre><code>A[:][:] = B[:][:]\n</code></pre>\n\n<p>and </p>\n\n<pre><code>A[:,:] = B[:,:]\n</code></pre>\n\n<p>I am wondering if there is any case, explication.</p>\n\n<p>Any hint?</p>\n\n<p>Example :</p>\n\n<pre><code>&gt;&gt;&gt; x = numpy.array([[1, 2], [3, 4], [5, 6]])\n&gt;&gt;&gt; x\narray([[1, 2],\n       [3, 4],\n       [5, 6]])\n&gt;&gt;&gt; x[1][1]\n4                 # expected behavior\n&gt;&gt;&gt; x[1,1]\n4                 # expected behavior\n&gt;&gt;&gt; x[:][1]\narray([3, 4])     # huh?\n&gt;&gt;&gt; x[:,1]\narray([2, 4, 6])  # expected behavior\n</code></pre>\n"}, {"tags": ["python", "json", "python-requests", "web-crawler"], "comments": [{"owner": {"reputation": 986, "user_id": 7663649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772ff178b6b78778a0018ddd77d6a25?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7663649/pierre"}, "edited": false, "score": 0, "creation_date": 1573683880, "post_id": 58846348, "comment_id": 103966765, "body": "Are you trying to send your request back to the server, or to inject some JavaScript code of yours into the <code>game.js</code> file you got from the server and run it in a web browser?"}, {"owner": {"reputation": 323, "user_id": 5897783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXNSZ.jpg?s=128&g=1", "display_name": "uaBArt", "link": "https://stackoverflow.com/users/5897783/uabart"}, "edited": false, "score": 0, "creation_date": 1573683909, "post_id": 58846348, "comment_id": 103966778, "body": "I&#39;m not sure why you&#39;re doing this. But for testing purpose you can try to use Resource Override extension for Chrome. So you will be able to change external JS file to any you want."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12360322"}, "reply_to_user": {"reputation": 986, "user_id": 7663649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772ff178b6b78778a0018ddd77d6a25?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7663649/pierre"}, "edited": false, "score": 0, "creation_date": 1573684179, "post_id": 58846348, "comment_id": 103966871, "body": "@Pierre Yes I want to send request back to the server"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12360322"}, "reply_to_user": {"reputation": 323, "user_id": 5897783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXNSZ.jpg?s=128&g=1", "display_name": "uaBArt", "link": "https://stackoverflow.com/users/5897783/uabart"}, "edited": false, "score": 0, "creation_date": 1573684224, "post_id": 58846348, "comment_id": 103966884, "body": "@uaBArt Thanks, but I want to do this in python and edit the response of req.get()."}, {"owner": {"reputation": 986, "user_id": 7663649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772ff178b6b78778a0018ddd77d6a25?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7663649/pierre"}, "edited": false, "score": 0, "creation_date": 1573684254, "post_id": 58846348, "comment_id": 103966898, "body": "@kami54 Which endpoint on the server do you want to send it to?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12360322"}, "reply_to_user": {"reputation": 986, "user_id": 7663649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772ff178b6b78778a0018ddd77d6a25?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7663649/pierre"}, "edited": false, "score": 0, "creation_date": 1573684453, "post_id": 58846348, "comment_id": 103966974, "body": "@Pierre You can see this as a proxy server. I get a request from server A, then get this java script file from server B, change it and send it as the response to server A. I mean I want to send this manipulated js file as a response to another request."}], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 8331185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k0atX.jpg?s=128&g=1", "display_name": "Kamran Hosseini", "link": "https://stackoverflow.com/users/8331185/kamran-hosseini"}, "is_accepted": true, "score": 0, "last_activity_date": 1573766040, "creation_date": 1573766040, "answer_id": 58866610, "question_id": 58846348, "link": "https://stackoverflow.com/questions/58846348/change-javascript-response-and-resend-it/58866610#58866610", "title": "change javascript response and resend it", "body": "<p>You don't need to edit the js file. JS files are consistent and don't change in time. So you download the file once, change it and save your changes. Then whenever you want to serve the file, resend the change javascript file saved in your computer.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12360322"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58866610, "answer_count": 1, "score": 1, "last_activity_date": 1573766040, "creation_date": 1573682759, "last_edit_date": 1573685088, "question_id": 58846348, "link": "https://stackoverflow.com/questions/58846348/change-javascript-response-and-resend-it", "title": "change javascript response and resend it", "body": "<p>I'm trying to get a java script file from a server, manipulate it and resend it as response to another request.\nHere's the request and the response file</p>\n\n<pre><code>import requests as req\nheaders = {'Connection': 'keep-alive',\\\n    'Pragma': 'no-cache',\\\n    'Cache-Control': 'no-cache',\\\n    'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) \\\n    Chrome/75.0.3770.142 Safari/537.36',\\\n    'Accept': '*/*',\\\n    'Accept-Language': 'en-GB,en;q=0.9,en- US;q=0.8,fa;q=0.7,eo;q=0.6',\\\n    'Cookie': '_ga=GA1.1.879245751.1566985641; cookieconsent_status=dismiss; \\\n    csrftoken=soEaxgZCM95FtydIUO4McG7G5Uek2uknLRCs0K6VI8amnbEAw1dXWV3kIONBtpgV; \\\n    _gid=GA1.1.1723047283.1573514239; io=yWUz84McCeIU7PLvJz1w'}\nresponse = req.get('https://skribbl.io/js/game.js', headers = headers)\n</code></pre>\n\n<p>Now I want to edit the js file, for example, I want to add a line to first line of a function of it. \nMy code is here</p>\n\n<pre><code>x = 'o.prototype.createTransport=function(t){'\ny = 'o.prototype.createTransport=function(t){console.log(this.hostname);'\nresponse.__dict__['_content'] = str.encode(str(response.__dict__['_content']).replace(x, y))\n</code></pre>\n\n<p>The content changes correctly but the problem is that I think I should change the 'content-length' and some other attributes which I don't know so that the browser can parse this new js code. For example, I don't know how to calculate new 'content-length' of this response. And after that is there any standard library(like beautiful soap for html files) which does this operation automatically?</p>\n"}, {"tags": ["python", "python-2.7", "pygame", "sprite"], "answers": [{"tags": [], "owner": {"reputation": 82, "user_id": 10343641, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xp4_G3rcoNs/AAAAAAAAAAI/AAAAAAAAAGA/E1i4PW-LzkA/photo.jpg?sz=128", "display_name": "Jim T Westerkamp", "link": "https://stackoverflow.com/users/10343641/jim-t-westerkamp"}, "is_accepted": false, "score": 0, "last_activity_date": 1573684540, "creation_date": 1573684540, "answer_id": 58846681, "question_id": 58846344, "link": "https://stackoverflow.com/questions/58846344/using-spritecollide-in-pygame-with-rotated-surfaces/58846681#58846681", "title": "Using spritecollide in Pygame - with rotated surfaces", "body": "<p>You can use collision masks for anything more complex than a rectangle or circle.\n<a href=\"http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.collide_mask\" rel=\"nofollow noreferrer\">http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.collide_mask</a></p>\n"}], "owner": {"reputation": 21, "user_id": 8610440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa5a9b561ba564d023f1ebce0007267?s=128&d=identicon&r=PG&f=1", "display_name": "W. Kent", "link": "https://stackoverflow.com/users/8610440/w-kent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573684540, "creation_date": 1573682749, "question_id": 58846344, "link": "https://stackoverflow.com/questions/58846344/using-spritecollide-in-pygame-with-rotated-surfaces", "title": "Using spritecollide in Pygame - with rotated surfaces", "body": "<p>I have created a surface that is intended to be used as a 'wall' for an rpg style game, however I rotated this surface so it takes the form of a diamond since this is how the game design looks. My question is when using spritecollide it only works in rect arguments (rectangles). How can I make a 'wall' surface that has been rotated and essentially gives a rotated rect argument for a diamond? Thanks for the help!!</p>\n"}, {"tags": ["python", "python-3.x", "class", "global-variables"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1573683071, "post_id": 58846342, "comment_id": 103966440, "body": "Why do you want to do this? Global variables are generally a bad idea."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1573683097, "post_id": 58846342, "comment_id": 103966448, "body": "Why are you doing any of that in a class definition?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1573683152, "post_id": 58846342, "comment_id": 103966476, "body": "The <code>if</code> statement is being executed when you define the class, not when you create instances of it. That means you have to assign the variable before you define the class."}, {"owner": {"reputation": 3, "user_id": 12246983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c22eafd3866ffb78a8503cd2f6f030e?s=128&d=identicon&r=PG&f=1", "display_name": "Infeamous99", "link": "https://stackoverflow.com/users/12246983/infeamous99"}, "edited": false, "score": 0, "creation_date": 1573683501, "post_id": 58846342, "comment_id": 103966610, "body": "I want to try it and it doing different things in class, so I need to use global variable."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12246983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c22eafd3866ffb78a8503cd2f6f030e?s=128&d=identicon&r=PG&f=1", "display_name": "Infeamous99", "link": "https://stackoverflow.com/users/12246983/infeamous99"}, "edited": false, "score": 0, "creation_date": 1573684261, "post_id": 58846567, "comment_id": 103966901, "body": "I want to replace ask=input(&quot;&quot;) to global ask. For not taking input again."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573684664, "post_id": 58846567, "comment_id": 103967041, "body": "<code>global</code> doesn&#39;t do anything if it&#39;s not inside a function."}, {"owner": {"reputation": 561, "user_id": 3507547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/138198821a077c95cd0a8990162f03d2?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Kuypers", "link": "https://stackoverflow.com/users/3507547/dennis-kuypers"}, "edited": false, "score": 0, "creation_date": 1573685964, "post_id": 58846567, "comment_id": 103967468, "body": "Jim, you can use the comments on the question to ask for more information if you&#39;re not yet sure what the question is about."}, {"owner": {"reputation": 82, "user_id": 10343641, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xp4_G3rcoNs/AAAAAAAAAAI/AAAAAAAAAGA/E1i4PW-LzkA/photo.jpg?sz=128", "display_name": "Jim T Westerkamp", "link": "https://stackoverflow.com/users/10343641/jim-t-westerkamp"}, "edited": false, "score": 0, "creation_date": 1573696794, "post_id": 58846567, "comment_id": 103969934, "body": "Sure thing Dennis Kuypers."}], "tags": [], "owner": {"reputation": 82, "user_id": 10343641, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xp4_G3rcoNs/AAAAAAAAAAI/AAAAAAAAAGA/E1i4PW-LzkA/photo.jpg?sz=128", "display_name": "Jim T Westerkamp", "link": "https://stackoverflow.com/users/10343641/jim-t-westerkamp"}, "is_accepted": false, "score": 0, "last_activity_date": 1573683913, "creation_date": 1573683913, "answer_id": 58846567, "question_id": 58846342, "link": "https://stackoverflow.com/questions/58846342/how-to-define-global-variable-in-class-in-python/58846567#58846567", "title": "How to define global variable in class in python", "body": "<p>I'm not exactly sure what you are trying to do but perhaps you just need to have\n<code>global ask</code>\nabove your \n<code>ask=input(\"\")</code> outside the class.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573684645, "post_id": 58846615, "comment_id": 103967036, "body": "Fix your indentation please"}], "tags": [], "owner": {"reputation": 180, "user_id": 5472708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63e44c0fa64f7c881bdbeace0b9803db?s=128&d=identicon&r=PG&f=1", "display_name": "Wodlo", "link": "https://stackoverflow.com/users/5472708/wodlo"}, "is_accepted": true, "score": 1, "last_activity_date": 1573724689, "last_edit_date": 1573724689, "creation_date": 1573684170, "answer_id": 58846615, "question_id": 58846342, "link": "https://stackoverflow.com/questions/58846342/how-to-define-global-variable-in-class-in-python/58846615#58846615", "title": "How to define global variable in class in python", "body": "<p>If you just want to define your variable outside of the class you don't need to use the <code>global</code> keyword unless you plan on modifying it. If you just want to read the variable and not modify it you could just do something like.</p>\n\n<pre><code>ask = input(\"What type you are writing? (absolute value and phase angle or real and imaginary parts)\")\n\nclass ComplexMethods:\n    if ask == \"real and imaginary parts\":\n        pass\n\nif ask == \"real and imaginary parts\":\n    firstcomplexreal = float(input(\"Enter real part of first complex number: \"))\n    firstcompleximaginary = float(input(\"Enter imaginary part of first complex number: \"))\n    secondcomplexreal = float(input(\"Enter real part of second complex number: \"))\n    secondcompleximaginary = float(input(\"Enter imaginary part of second complex number: \"))\n    complexnumbers = ComplexMethods(firstcomplexreal, firstcompleximaginary, secondcomplexreal,\n                                    secondcompleximaginary)\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 12246983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c22eafd3866ffb78a8503cd2f6f030e?s=128&d=identicon&r=PG&f=1", "display_name": "Infeamous99", "link": "https://stackoverflow.com/users/12246983/infeamous99"}, "is_accepted": false, "score": 0, "last_activity_date": 1573684489, "creation_date": 1573684489, "answer_id": 58846675, "question_id": 58846342, "link": "https://stackoverflow.com/questions/58846342/how-to-define-global-variable-in-class-in-python/58846675#58846675", "title": "How to define global variable in class in python", "body": "<p>I found the solution. Thank you from Barmar. It worked.</p>\n\n<pre><code>ask = input(\"What type you are writing? (absolute value and phase angle or real and imaginary parts)\")\n\n\nclass ComplexMethods:\n    global ask\n    if ask == \"real and imaginary parts\":\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 9664844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C9px0u3gGeU/AAAAAAAAAAI/AAAAAAAADUE/WYG6CwBEMKg/photo.jpg?sz=128", "display_name": "Catamondium", "link": "https://stackoverflow.com/users/9664844/catamondium"}, "is_accepted": false, "score": 0, "last_activity_date": 1573684721, "creation_date": 1573684721, "answer_id": 58846718, "question_id": 58846342, "link": "https://stackoverflow.com/questions/58846342/how-to-define-global-variable-in-class-in-python/58846718#58846718", "title": "How to define global variable in class in python", "body": "<p>if you're referring to a static, something available from <code>Class.val</code> and <code>instance.val</code> referencing the same thing; you can declare one in the class body</p>\n\n<pre><code>class A:\n  val = None # Static variable\n  def __init__(self, x, y):\n    # Instance variables\n    self.x = x\n    self.y = y\n\ninst_1 = A(2, 3)\ninst_2 = A(\"a\", \"b\")\n\nprint(A.val)\n# static can't be modified via instance, only A\nA.val = \"abcd\"\nprint(inst_2.val) # static modified across As\n\n# Unique to each instance\nprint(inst_1.x)\nprint(inst_2.x)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12246983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c22eafd3866ffb78a8503cd2f6f030e?s=128&d=identicon&r=PG&f=1", "display_name": "Infeamous99", "link": "https://stackoverflow.com/users/12246983/infeamous99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 58846615, "answer_count": 4, "score": -1, "last_activity_date": 1573724689, "creation_date": 1573682740, "question_id": 58846342, "link": "https://stackoverflow.com/questions/58846342/how-to-define-global-variable-in-class-in-python", "title": "How to define global variable in class in python", "body": "<p>I want to take a variable outside the class but not outside of the file. I have a condition outside the class but I have to use it in the class too. Have can i do that?</p>\n\n<p>This is the sample to try if it is working. I want to erase the input part and do with global variable.</p>\n\n<pre><code>class ComplexMethods:\n    ask = input(\"What type you are writing? (absolute value and phase angle or real and imaginary parts)\")\n    if ask == \"real and imaginary parts\":\n</code></pre>\n\n<p>I tried this one but not working. It gives name \"ask\" not defined.</p>\n\n<pre><code>class ComplexMethods:\n     global ask\n     if ask == \"real and imaginary parts\":\n</code></pre>\n\n<p>This is the outside of class.</p>\n\n<pre><code>ask = input(\"What type you are writing? (absolute value and phase angle or real and imaginary parts)\")\nif ask == \"real and imaginary parts\":\n    firstcomplexreal = float(input(\"Enter real part of first complex number: \"))\n    firstcompleximaginary = float(input(\"Enter imaginary part of first complex number: \"))\n    secondcomplexreal = float(input(\"Enter real part of second complex number: \"))\n    secondcompleximaginary = float(input(\"Enter imaginary part of second complex number: \"))\n    complexnumbers = ComplexMethods(firstcomplexreal, firstcompleximaginary, secondcomplexreal,\n                                    secondcompleximaginary)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tensorflow", "keras", "neural-network"], "comments": [{"owner": {"reputation": 660, "user_id": 2993180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290c41c605ef5be965af846aa10d0508?s=128&d=identicon&r=PG&f=1", "display_name": "ravikt", "link": "https://stackoverflow.com/users/2993180/ravikt"}, "edited": false, "score": 0, "creation_date": 1574233300, "post_id": 58846318, "comment_id": 104153843, "body": "How do you load the trained model ?"}, {"owner": {"reputation": 4502, "user_id": 4614675, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-wENEinPp2ls/AAAAAAAAAAI/AAAAAAAAABw/oJ3bOTpW9ek/photo.jpg?sz=128", "display_name": "Giordano", "link": "https://stackoverflow.com/users/4614675/giordano"}, "reply_to_user": {"reputation": 660, "user_id": 2993180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290c41c605ef5be965af846aa10d0508?s=128&d=identicon&r=PG&f=1", "display_name": "ravikt", "link": "https://stackoverflow.com/users/2993180/ravikt"}, "edited": false, "score": 0, "creation_date": 1574237188, "post_id": 58846318, "comment_id": 104155516, "body": "The model is not saved and then loaded, but is stored in a class variable (self.model)"}, {"owner": {"reputation": 660, "user_id": 2993180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290c41c605ef5be965af846aa10d0508?s=128&d=identicon&r=PG&f=1", "display_name": "ravikt", "link": "https://stackoverflow.com/users/2993180/ravikt"}, "edited": false, "score": 0, "creation_date": 1574238432, "post_id": 58846318, "comment_id": 104156046, "body": "Is it possible for you to save the model as h5 file and then run the <code>predict</code> ?"}, {"owner": {"reputation": 4502, "user_id": 4614675, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-wENEinPp2ls/AAAAAAAAAAI/AAAAAAAAABw/oJ3bOTpW9ek/photo.jpg?sz=128", "display_name": "Giordano", "link": "https://stackoverflow.com/users/4614675/giordano"}, "reply_to_user": {"reputation": 660, "user_id": 2993180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290c41c605ef5be965af846aa10d0508?s=128&d=identicon&r=PG&f=1", "display_name": "ravikt", "link": "https://stackoverflow.com/users/2993180/ravikt"}, "edited": false, "score": 0, "creation_date": 1574239111, "post_id": 58846318, "comment_id": 104156374, "body": "Train and prediction are done in the same python process so no reason to save and load again the model i think..."}], "answers": [{"comments": [{"owner": {"reputation": 4502, "user_id": 4614675, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-wENEinPp2ls/AAAAAAAAAAI/AAAAAAAAABw/oJ3bOTpW9ek/photo.jpg?sz=128", "display_name": "Giordano", "link": "https://stackoverflow.com/users/4614675/giordano"}, "edited": false, "score": 0, "creation_date": 1573766820, "post_id": 58853908, "comment_id": 104002878, "body": "yes with your suggestion works correctly! My original input_x.shape is (288,), how can i reshape it to use correctly?"}, {"owner": {"reputation": 4502, "user_id": 4614675, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-wENEinPp2ls/AAAAAAAAAAI/AAAAAAAAABw/oJ3bOTpW9ek/photo.jpg?sz=128", "display_name": "Giordano", "link": "https://stackoverflow.com/users/4614675/giordano"}, "edited": false, "score": 0, "creation_date": 1573811911, "post_id": 58853908, "comment_id": 104016676, "body": "I&#39;ve updated my question with some details, please take a look a let me know"}], "tags": [], "owner": {"reputation": 1485, "user_id": 10025506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0M1u.jpg?s=128&g=1", "display_name": "Olivier Dehaene", "link": "https://stackoverflow.com/users/10025506/olivier-dehaene"}, "is_accepted": false, "score": 3, "last_activity_date": 1573725328, "creation_date": 1573725328, "answer_id": 58853908, "question_id": 58846318, "link": "https://stackoverflow.com/questions/58846318/error-on-prediction-running-keras-multi-gpu-model/58853908#58853908", "title": "Error on prediction running keras multi_gpu_model", "body": "<p>From the <code>tf.keras.utils.multi_gpu_model</code> we can see that it works in the following way:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>Divide the model's input(s) into multiple sub-batches.</strong></li>\n  <li>Apply a model copy on each sub-batch. Every model copy is executed on a dedicated GPU.</li>\n  <li>Concatenate the results (on CPU) into one big batch.</li>\n  </ul>\n</blockquote>\n\n<p>You are triggering an error because the input of the <code>CuDNNLSTM</code> layer is empty for at least one of the model copy. This is because the divide operations requires that: <code>input // n_gpus &gt; 0</code></p>\n\n<p>Try this code out:</p>\n\n<pre><code>input_x = np.random.randn(8, n_timesteps, n_features)\nmodel.predict(input_x)\n</code></pre>\n"}], "owner": {"reputation": 4502, "user_id": 4614675, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-wENEinPp2ls/AAAAAAAAAAI/AAAAAAAAABw/oJ3bOTpW9ek/photo.jpg?sz=128", "display_name": "Giordano", "link": "https://stackoverflow.com/users/4614675/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1574520852, "creation_date": 1573682602, "last_edit_date": 1574520852, "question_id": 58846318, "link": "https://stackoverflow.com/questions/58846318/error-on-prediction-running-keras-multi-gpu-model", "title": "Error on prediction running keras multi_gpu_model", "body": "<p>I've an issue running a Keras model on a Google Cloud Platform instance. <br>\nThe model is the following:</p>\n\n<pre><code>n_timesteps, n_features, n_outputs = train_x.shape[1], train_x.shape[2], train_y.shape[1]\n\ntrain_y = train_y.reshape((train_y.shape[0], train_y.shape[1], 1))\n\nverbose, epochs, batch_size = 1, 1, 64  # low number of epochs just for testing purpose\nwith tf.device('/cpu:0'):\n    m = Sequential()\n    m.add(CuDNNLSTM(20, input_shape=(n_timesteps, n_features)))\n    m.add(LeakyReLU(alpha=0.1))\n    m.add(RepeatVector(n_outputs))\n    m.add(CuDNNLSTM(20, return_sequences=True))\n    m.add(LeakyReLU(alpha=0.1))\n    m.add(TimeDistributed(Dense(20)))\n    m.add(LeakyReLU(alpha=0.1))\n    m.add(TimeDistributed(Dense(1)))\n\nself.model = multi_gpu_model(m, gpus=8)\nself.model.compile(loss='mse', optimizer='adam')\n\nself.model.fit(train_x, train_y, epochs=epochs, batch_size=batch_size, verbose=verbose)\n</code></pre>\n\n<p>As you can see from the code above, I run the model on machine with 8 GPUs (Nvidia Tesla K80). <br>\nTrain works well, without any errors. However, the prediction fails and returns the following error:</p>\n\n<blockquote>\n  <p>W tensorflow/core/framework/op_kernel.cc:1502] OP_REQUIRES failed at cudnn_rnn_ops.cc:1336 : Unknown: CUDNN_STATUS_BAD_PARAM\n  in tensorflow/stream_executor/cuda/cuda_dnn.cc(1285): 'cudnnSetTensorNdDescriptor( tensor_desc.get(), data_type, sizeof(dims) / sizeof(dims[0]), dims, strides)'</p>\n</blockquote>\n\n<p>Here the code to run the prediction:</p>\n\n<pre><code>self.model.predict(input_x)\n</code></pre>\n\n<p>What I've noticed is that if I remove the code for multi-GPU data parallelism, the code works well using a single GPU. <br>\nTo be more precise, if I comment this line, the code works without error</p>\n\n<pre><code>self.model = multi_gpu_model(m, gpus=8)\n</code></pre>\n\n<p>What am I missing? </p>\n\n<p><strong>virtualenv information</strong></p>\n\n<p>cudatoolkit        - 10.0.130 <br>\ncudnn              - 7.6.4 <br>\nkeras              - 2.2.4 <br>\nkeras-applications - 1.0.8 <br>\nkeras-base         - 2.2.4 <br>\nkeras-gpu          - 2.2.4 <br>\npython             - 3.6</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>train_x.shape = (1441, 288, 1)\ntrain_y.shape = (1441, 288, 1)\ninput_x.shape = (1, 288, 1)\n</code></pre>\n\n<p>After Olivier Dehaene's reply I tried his suggestion and it worked. <br>\nI tried to modify the input_x shape in order to obtain (8, 288, 1). <br>\nIn order to do that I also modified train_x and train_y shapes. <br>\nHere a recap:</p>\n\n<pre><code>train_x.shape = (8065, 288, 1)\ntrain_y.shape = (8065, 288, 1)\ninput_x.shape = (8, 288, 1)\n</code></pre>\n\n<p>But now I've the same error on the training phase, on this line:</p>\n\n<pre><code>self.model.fit(train_x, train_y, epochs=epochs, batch_size=batch_size, verbose=verbose)\n</code></pre>\n"}, {"tags": ["python", "nlp", "nltk", "allennlp"], "comments": [{"owner": {"reputation": 677, "user_id": 3421659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc4a95d1dfffbdd39f6daf3433757aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3421659/andrew"}, "edited": false, "score": 0, "creation_date": 1573682900, "post_id": 58846317, "comment_id": 103966380, "body": "Hello, welcome to SO! The question you&#39;re asking is a little unclear. You should try to include some more details about what you&#39;re asking. To maximize your chances of getting the help you need you can check out <a href=\"https://stackoverflow.com/help/how-to-ask\">this guide</a>, which just gives some tips on how to write a more approachable question."}, {"owner": {"reputation": 1, "user_id": 12369418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c5a7b8ba979eda601420f668584812d?s=128&d=identicon&r=PG&f=1", "display_name": "rohanp965", "link": "https://stackoverflow.com/users/12369418/rohanp965"}, "reply_to_user": {"reputation": 677, "user_id": 3421659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc4a95d1dfffbdd39f6daf3433757aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3421659/andrew"}, "edited": false, "score": 0, "creation_date": 1573683432, "post_id": 58846317, "comment_id": 103966591, "body": "Hello. I updated the title and edited the body to display the error traceback. I&#39;m receiving the error shown and not able to debug the error. Any help received would be appreciated. Thanks!"}], "owner": {"reputation": 1, "user_id": 12369418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c5a7b8ba979eda601420f668584812d?s=128&d=identicon&r=PG&f=1", "display_name": "rohanp965", "link": "https://stackoverflow.com/users/12369418/rohanp965"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573698702, "creation_date": 1573682602, "last_edit_date": 1573698702, "question_id": 58846317, "link": "https://stackoverflow.com/questions/58846317/valueerror-parentedtree-read-expected-end-of-string-but-got", "title": "ValueError: ParentedTree.read(): expected &#39;end-of-string&#39; but got &#39;(:&#39;", "body": "<p>Here is a step-by-step code to debug the error I'm getting: </p>\n\n<pre><code>from nltk.tree import ParentedTree\n\nteststr = 'a) Any service and handling fee imposed on customers by Used Motor Vehicle Dealers subject to these Rules: \\r\\n        1) shall be charged uniformly to all retail customers; \\r\\n        2) may not be presented as mandatory in writing, electronically, verbally, via American Sign Language, or via other media as mandatory; nor presented as mandatory or mandated by any entity, other than the Arkansas Used Motor Vehicle Dealer who or dealership which is legally permitted to invoice, charge and collect the service and handling fee established by these Rules; \\r\\n        3) must follow the procedures for disclosure set out by these Rules.'\n\n#Using ALLENNLP's parser\nfrom allennlp.predictors.predictor import Predictor\nconspredictor = Predictor.from_path(\"https://s3-us-west-2.amazonaws.com/allennlp/models/elmo-constituency-parser-2018.03.14.tar.gz\")\n\n\ntreestr = conspredictor.predict(sentence=teststr)['trees']\n\nptree = ParentedTree.fromstring(treestr)\n</code></pre>\n\n<p>Here is the error I'm receiving with the traceback: </p>\n\n<pre><code>&lt;ipython-input-391-f600cbe3ff5e&gt; in &lt;module&gt;\n\n         10 treestr = conspredictor.predict(sentence=teststr)['trees']\n         11 \n    ---&gt; 12 ptree = ParentedTree.fromstring(treestr)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\nltk\\tree.py in fromstring(cls, s, brackets, read_node, read_leaf, node_pattern, leaf_pattern, remove_empty_top_bracketing)\n\n        616             if token[0] == open_b:\n        617                 if len(stack) == 1 and len(stack[0][1]) &gt; 0:\n    --&gt; 618                     cls._parse_error(s, match, 'end-of-string')\n        619                 label = token[1:].lstrip()\n        620                 if read_node is not None: label = read_node(label)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\nltk\\tree.py in _parse_error(cls, s, match, expecting)\n\n        677             offset = 13\n        678         msg += '\\n%s\"%s\"\\n%s^' % (' '*16, s, ' '*(17+offset))\n    --&gt; 679         raise ValueError(msg)\n        680 \n        681     #////////////////////////////////////////////////////////////\n\nValueError: ParentedTree.read(): expected 'end-of-string' but got '(:'\n            at index 273.\n                \"...es))))))) (: :) (S (...\"\n                              ^\n</code></pre>\n"}, {"tags": ["python", "list", "numpy", "boolean", "or-operator"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1573683201, "creation_date": 1573683201, "answer_id": 58846423, "question_id": 58846312, "link": "https://stackoverflow.com/questions/58846312/element-wise-boolean-operation-between-row-of-sparse-matrix-and-list/58846423#58846423", "title": "Element-wise boolean operation between row of sparse matrix and list", "body": "<p>Vectorized <code>or</code> is a <code>numpy</code> operation; there is no direct equivalent for a common list.  The most effective and readable way to do this is to convert your Boolean list to an np_array and <em>then</em> apply the operation, letting <code>numpy</code>'s processing to rule the process.</p>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1573684389, "last_edit_date": 1573684389, "creation_date": 1573683943, "answer_id": 58846571, "question_id": 58846312, "link": "https://stackoverflow.com/questions/58846312/element-wise-boolean-operation-between-row-of-sparse-matrix-and-list/58846571#58846571", "title": "Element-wise boolean operation between row of sparse matrix and list", "body": "<p>You need to do two things:</p>\n\n<p>Cast the list to <code>np.ndarray</code> and use <code>+</code> instead of <code>or</code>. For reasons I do not know the <code>bitwise_or</code> operator <code>|</code> (which one would use for arrays) does not work here.</p>\n\n<pre><code>a[2] += np.array(b)\n</code></pre>\n"}], "owner": {"reputation": 378, "user_id": 8300107, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8d884c95bf0c6f08cdd2e725dfbb9e9f?s=128&d=identicon&r=PG&f=1", "display_name": "hegdep", "link": "https://stackoverflow.com/users/8300107/hegdep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58846571, "answer_count": 2, "score": 0, "last_activity_date": 1573684389, "creation_date": 1573682585, "question_id": 58846312, "link": "https://stackoverflow.com/questions/58846312/element-wise-boolean-operation-between-row-of-sparse-matrix-and-list", "title": "Element-wise boolean operation between row of sparse matrix and list", "body": "<p>I want to carry out an element wise logical operation between a row of a sparse matrix and another list. </p>\n\n<pre><code>from scipy.sparse import lil_matrix\na=lil_matrix((3,3), dtype=bool)\nb=[True,False,True]\na[2,:]=a[2,:] or b\n</code></pre>\n\n<p>However, this returns:</p>\n\n<pre><code>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all().\n</code></pre>\n\n<p>There is already one very good explanation for why the error occurs <a href=\"https://stackoverflow.com/questions/10062954/valueerror-the-truth-value-of-an-array-with-more-than-one-element-is-ambiguous\">here</a></p>\n\n<p>However, <code>a.any()</code> or <code>a.all()</code> will return only one truth value and not perform something element wise. Also, <code>np.logical_or(a[2,:],b)</code> returns the same error. </p>\n"}, {"tags": ["python", "selenium", "date", "selenium-webdriver", "webdriver"], "answers": [{"tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1573683077, "last_edit_date": 1573683077, "creation_date": 1573682700, "answer_id": 58846335, "question_id": 58846271, "link": "https://stackoverflow.com/questions/58846271/eol-string-literal-creating-save-location-with-webdriver-selenium/58846335#58846335", "title": "EOL String Literal Creating Save Location with webdriver selenium", "body": "<p>Try:</p>\n\n<pre><code>driver.save_screenshot('path/to/Screenshots' + ' ' + today.strftime('%m-%d-%Y') + '/image.png')\n</code></pre>\n\n<hr>\n\n<p><strong>Tip:</strong> </p>\n\n<p>If you're using python +3.6, <a href=\"https://realpython.com/python-f-strings/\" rel=\"nofollow noreferrer\">f-Strings</a> will help you avoiding this kind of errors by using a cleaner syntax, i.e.:</p>\n\n<pre><code>import time\ntd = time.strftime('%m-%d-%Y')\ndriver.save_screenshot(f'/path/to/Screenshots/{td}/image.png')\n# /path/to/Screenshots/11-13-2019/image.png\n</code></pre>\n\n<hr>\n\n<p>Demo:</p>\n\n<p><a href=\"https://trinket.io/python3/c25a00b29a\" rel=\"nofollow noreferrer\">https://trinket.io/python3/c25a00b29a</a></p>\n"}, {"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1573727071, "creation_date": 1573727071, "answer_id": 58854484, "question_id": 58846271, "link": "https://stackoverflow.com/questions/58846271/eol-string-literal-creating-save-location-with-webdriver-selenium/58854484#58854484", "title": "EOL String Literal Creating Save Location with webdriver selenium", "body": "<p>To create a folder with <strong>today's</strong> <em>date</em> and save some screenshots that folder you can use the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategy</a> based solution:</p>\n\n<ul>\n<li><p>Code Block:</p>\n\n<pre><code>import os\nfrom datetime import date\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\ndatetoday = date.today()\nos.mkdir(str(datetoday))\noptions = webdriver.ChromeOptions()\noptions.add_argument(\"start-maximized\")\noptions.add_experimental_option(\"excludeSwitches\", [\"enable-automation\"])\noptions.add_experimental_option('useAutomationExtension', False)\ndriver = webdriver.Chrome(options=options, executable_path=r'C:\\Utility\\BrowserDrivers\\chromedriver.exe')\ndriver.get(\"http://www.google.com\")\nfor i in range(1,5):\n    WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.NAME, \"q\"))).send_keys(\"DaveDoesDev\")\n    driver.save_screenshot(\"{}/image{}.png\".format(datetoday, i))\n</code></pre></li>\n<li><p>Output: </p>\n\n<ul>\n<li>This program will create a subdirectory with today's date.</li>\n<li>All the screenshots will be save with different names.</li>\n</ul></li>\n<li><p>Browser Snapshot:</p></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/zw8BS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zw8BS.png\" alt=\"date_directory\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 9604409, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DaveDoesDev", "link": "https://stackoverflow.com/users/9604409/davedoesdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573727071, "creation_date": 1573682367, "last_edit_date": 1573726944, "question_id": 58846271, "link": "https://stackoverflow.com/questions/58846271/eol-string-literal-creating-save-location-with-webdriver-selenium", "title": "EOL String Literal Creating Save Location with webdriver selenium", "body": "<p>So as the title suggests I am trying to accomplish a couple of things in Python 3. </p>\n\n<p>Step 1 - I want to run a script that makes a folder with todays date. I am currently doing that like this:</p>\n\n<pre><code>import time\nfrom selenium import webdriver\nimport os\nfrom datetime import date\n\ntoday = date.today()\n\nos.mkdir('path/to/Screenshots' + ' ' + today.strftime('%m' + '-' + '%d' + '-' + '%Y'))\n</code></pre>\n\n<p>Step 2 Have webdriver open a chrome window to a link. I am currently doing that like this</p>\n\n<pre><code>driver = webdriver.Chrome('/path/to/chromedriver')\ndriver.get('http://www.google.com/');\n</code></pre>\n\n<p>Step 3 Where I am having my issue - I am trying to have webdriver take a screenshot and put it into the folder that I made in step 1. No I would think I do that like this:</p>\n\n<pre><code>driver.save_screenshot('path/to/Screenshots' + ' ' + today.strftime('%m' + '-' + '%d' + '-' + '%Y')/image.png')\n</code></pre>\n\n<p>This gives me the error SyntaxError: EOL while scanning string literal - please help me in understanding what I am doing wrong.</p>\n"}, {"tags": ["python", "python-3.x", "python-decorators"], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 5594358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93405de8d7ea936461ce3bd3ce29f9c8?s=128&d=identicon&r=PG&f=1", "display_name": "SlyCaptainFlint", "link": "https://stackoverflow.com/users/5594358/slycaptainflint"}, "edited": false, "score": 0, "creation_date": 1573773388, "post_id": 58846868, "comment_id": 104005185, "body": "Thank you for helping me with the first part! I would really appreciate if you could also suggest a solution for the setter issue (where the name of the decorator depends on the name of the property, and I don&#39;t know how to invoke it based on the string representation of its name)"}, {"owner": {"reputation": 271, "user_id": 5594358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93405de8d7ea936461ce3bd3ce29f9c8?s=128&d=identicon&r=PG&f=1", "display_name": "SlyCaptainFlint", "link": "https://stackoverflow.com/users/5594358/slycaptainflint"}, "edited": false, "score": 0, "creation_date": 1573775334, "post_id": 58846868, "comment_id": 104005720, "body": "I have figured out a way to do this. I can simply pass the property into my setter decorator like this <code>@my_setter_decorator(prop)</code>, then use that reference to decorate the inner returned function with <code>@prop.setter</code>. Thank you for getting me on the right track!"}], "tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": true, "score": 2, "last_activity_date": 1573685669, "creation_date": 1573685669, "answer_id": 58846868, "question_id": 58846245, "link": "https://stackoverflow.com/questions/58846245/dynamically-applying-setter-decorator-in-python/58846868#58846868", "title": "Dynamically applying setter decorator in Python", "body": "<p>note that decorators are just standard Python objects, i.e. mostly classes and functions.  also remember that:</p>\n\n<pre><code>@decorator\ndef foo():\n  pass\n</code></pre>\n\n<p>is just short for</p>\n\n<pre><code>def foo():\n  pass\nfoo = decorator(foo)\n</code></pre>\n\n<p>you could therefore write your code like:</p>\n\n<pre><code>def my_property_decorator(func):\n    @property\n    def decorator(*args):\n        # do some work here\n        return func(*args)\n    return decorator\n</code></pre>\n\n<p>or like:</p>\n\n<pre><code>def my_property_decorator(func):\n    func = property(func)\n    def decorator(*args):\n        # do some work here\n        return func(*args)\n    return decorator\n</code></pre>\n\n<p>or even:</p>\n\n<pre><code>def my_property_decorator(func):\n    def decorator(*args):\n        # do some work here\n        return func(*args)\n    return property(decorator)\n</code></pre>\n\n<p>depending on what was appropriate and/or clearer</p>\n"}], "owner": {"reputation": 271, "user_id": 5594358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93405de8d7ea936461ce3bd3ce29f9c8?s=128&d=identicon&r=PG&f=1", "display_name": "SlyCaptainFlint", "link": "https://stackoverflow.com/users/5594358/slycaptainflint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58846868, "answer_count": 1, "score": 2, "last_activity_date": 1573685669, "creation_date": 1573682199, "last_edit_date": 1573682431, "question_id": 58846245, "link": "https://stackoverflow.com/questions/58846245/dynamically-applying-setter-decorator-in-python", "title": "Dynamically applying setter decorator in Python", "body": "<p>I am looking for a way to write a decorator that wraps the property and setter decorators. Ideally, this decorator will perform some simple work, then return a version of the method decorated with <code>@property</code> or <code>@propertyname.setter</code>. I was imagining something like this for <code>@property</code>, but cannot think of a way to express it:</p>\n\n<pre><code>def my_property_decorator(func):\n    def decorator(*args):\n        # do some work here\n\n        # apply regular property decorator\n        @property(func) # this is not correct syntax\n        return func(*args)\n\n    return decorator\n</code></pre>\n\n<p>For the setter, I am even more at a loss because I would have to get the name of the property being decorated so I can compose the full name of the decorator, but I'm not sure how I would be able to apply the decorator when I have its name as a string.</p>\n\n<p>I think I could probably just stack decorators like this:</p>\n\n<pre><code>@property\n@my_property_decorator\ndef prop(self):\n    # implementation\n\n\n@prop.setter\n@my_setter_decorator\ndef prop(self, newVal):\n    # implementation\n</code></pre>\n\n<p>But wanted to see if there was a cleaner solution that I am not seeing.</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 3912225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230c9c81dfa384ccd37f7b2d6426cb5?s=128&d=identicon&r=PG&f=1", "display_name": "Medi Montaseri", "link": "https://stackoverflow.com/users/3912225/medi-montaseri"}, "edited": false, "score": 0, "creation_date": 1573689590, "post_id": 58846502, "comment_id": 103968387, "body": "Nice ... so you are using &quot;on_click on send&quot; to take the input from QTextLine and feed it to QProcess."}, {"owner": {"reputation": 75, "user_id": 3912225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230c9c81dfa384ccd37f7b2d6426cb5?s=128&d=identicon&r=PG&f=1", "display_name": "Medi Montaseri", "link": "https://stackoverflow.com/users/3912225/medi-montaseri"}, "edited": false, "score": 0, "creation_date": 1573690445, "post_id": 58846502, "comment_id": 103968576, "body": "A follow up .... what if sub process is very long interactive program with hundreds of line of output and many interactions. And I have an impatient user who would enter presumptuous answer(s) into the TextLine. Wouldn&#39;t that confuse the event loop and deliver improper data to handlers ? Is it possible to  disable (or grey out) TextLine until  sub process is ready for input (perhaps via something like writeReady) and then enable the TextLine and disable it again."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 75, "user_id": 3912225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230c9c81dfa384ccd37f7b2d6426cb5?s=128&d=identicon&r=PG&f=1", "display_name": "Medi Montaseri", "link": "https://stackoverflow.com/users/3912225/medi-montaseri"}, "edited": false, "score": 0, "creation_date": 1573690561, "post_id": 58846502, "comment_id": 103968596, "body": "@user3912225 Yes, it is possible. You have to use <code>self._lineedit.setEnabled(True)</code> or <code>self._lineedit.setEnabled(False)</code> as appropriate. (The same can be done with other widgets such as disabling the button), but that already depends on your logic. My solution is only based on the MRE you have provided."}, {"owner": {"reputation": 75, "user_id": 3912225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230c9c81dfa384ccd37f7b2d6426cb5?s=128&d=identicon&r=PG&f=1", "display_name": "Medi Montaseri", "link": "https://stackoverflow.com/users/3912225/medi-montaseri"}, "edited": false, "score": 0, "creation_date": 1573692145, "post_id": 58846502, "comment_id": 103968954, "body": "I will certainly mark this accepted / correct. One last part , since you have been so nice. Is there such an event like QProcess.writeReady()."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 75, "user_id": 3912225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230c9c81dfa384ccd37f7b2d6426cb5?s=128&d=identicon&r=PG&f=1", "display_name": "Medi Montaseri", "link": "https://stackoverflow.com/users/3912225/medi-montaseri"}, "edited": false, "score": 0, "creation_date": 1573692338, "post_id": 58846502, "comment_id": 103969001, "body": "@user3912225 No, there is not. the writing is done synchronously so a signal is not necessary. You could use <code>waitForBytesWritten(-1)</code> to be sure it is written but I think it is not necessary."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1573683611, "creation_date": 1573683611, "answer_id": 58846502, "question_id": 58846237, "link": "https://stackoverflow.com/questions/58846237/pyqt5-how-to-read-write-from-to-a-qprocess/58846502#58846502", "title": "PyQt5 how to read/write from/to a QProcess", "body": "<p>You have to use the <a href=\"https://doc.qt.io/qt-5/qiodevice.html#write-2\" rel=\"nofollow noreferrer\"><code>write()</code></a> method of QProcess:</p>\n\n<pre><code>\u251c\u2500\u2500 goo\n\u2514\u2500\u2500 main.py\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport sys\n\nfrom PyQt5 import QtCore, QtGui, QtWidgets\n\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        super().__init__(parent)\n\n        self._textedit = QtWidgets.QTextEdit(readOnly=True)\n        self._lineedit = QtWidgets.QLineEdit()\n        self._pushbutton = QtWidgets.QPushButton(\"Send\")\n        self._pushbutton.clicked.connect(self.on_clicked)\n\n        lay = QtWidgets.QGridLayout(self)\n        lay.addWidget(self._textedit, 0, 0, 1, 2)\n        lay.addWidget(self._lineedit, 1, 0)\n        lay.addWidget(self._pushbutton, 1, 1)\n\n        self._process = QtCore.QProcess(self)\n        self._process.setProcessChannelMode(QtCore.QProcess.MergedChannels)\n        self._process.readyRead.connect(self.on_readReady)\n\n        current_dir = os.path.dirname(os.path.realpath(__file__))\n        self._process.start(os.path.join(current_dir, \"goo\"))\n\n    @QtCore.pyqtSlot()\n    def on_readReady(self):\n        cursor = self._textedit.textCursor()\n        cursor.movePosition(QtGui.QTextCursor.End)\n        cursor.insertText(str(self._process.readAll(), \"utf-8\"))\n        self._textedit.ensureCursorVisible()\n\n    @QtCore.pyqtSlot()\n    def on_clicked(self):\n        text = self._lineedit.text() + \"\\n\"\n        self._process.write(text.encode())\n\n\nif __name__ == \"__main__\":\n    os.environ[\"PYTHONUNBUFFERED\"] = \"1\"\n\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LKdJE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LKdJE.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 75, "user_id": 3912225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6230c9c81dfa384ccd37f7b2d6426cb5?s=128&d=identicon&r=PG&f=1", "display_name": "Medi Montaseri", "link": "https://stackoverflow.com/users/3912225/medi-montaseri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 58846502, "answer_count": 1, "score": 1, "last_activity_date": 1573683611, "creation_date": 1573682148, "last_edit_date": 1573682228, "question_id": 58846237, "link": "https://stackoverflow.com/questions/58846237/pyqt5-how-to-read-write-from-to-a-qprocess", "title": "PyQt5 how to read/write from/to a QProcess", "body": "<p>I have a PyQt5 GUI application and would like to execute an external program and display stdout, stderr and stdin of the external program on a QTextEdit widget. I have managed to do so for stdout and stderr. I need help for the stdin of the external process.</p>\n\n<p>Imagine the following snippets </p>\n\n<pre><code>       self.te = QTextEdit(self)\n       self.te.move(self.x0, 150)\n       self.te.resize(self.mainWinWidth - 100, self.mainWinHeight - 200)\n</code></pre>\n\n<p>And the snippet to get QProcess going ...</p>\n\n<pre><code>      self.process = QtCore.QProcess(self)\n      self.process.setProcessChannelMode( QProcess.MergedChannels )\n      self.process.readyRead.connect(self.readReady)\n      # ... and elsewhere I start the sub process like\n      os.environ[\"PYTHONUNBUFFERED\"] = \"1\"\n      self.process.start('./goo', [])\n</code></pre>\n\n<p>and readReady() implemented as:</p>\n\n<pre><code>    def readReady(self):\n        cursor = self.te.textCursor()\n        cursor.movePosition(cursor.End)\n        cursor.insertText(str(self.process.readAll(), 'utf-8'))\n        self.te.ensureCursorVisible()\n</code></pre>\n\n<p>And goo(1) is a basic sub process implemented as </p>\n\n<pre><code>#!/usr/bin/python3\n\nimport time\nimport sys\n\nfor i in range(0,5):\n    print(f\"============ {i} ===\")\n    time.sleep(1)\n\nsys.stderr.write(\"Testing stderr...\\n\")\nprint(\"Enter name:\")\nname = sys.stdin.readline()\nprint(f\"Got {name}\")\n</code></pre>\n\n<p>With that said, I do see stdout and stderr all working ok. I also see \"Enter name:\" but when I enter \"joe\" or \"moe\" on the QTextEdit, nothing happens, ie the back end sub process is still waiting. </p>\n\n<p>So it seems like I need an event handler for the write. That is when the sub-process (via QProcess) waits for input on its stdin, I need to detect that and somehow read that from QTextEdit (from the user) and then feed that to the sub process (i.e write to its stdin).</p>\n\n<p>Think ssh or telnet or xterm. Isn't there any on the shelf widget for this ? </p>\n"}, {"tags": ["python", "utf-8", "windows-server-2008"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 3, "creation_date": 1573682352, "post_id": 58846212, "comment_id": 103966172, "body": "Your terminal does not support or is not set to UTF-8 encoding."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 4437149, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ca3fada09fb7d92be243b360831658d?s=128&d=identicon&r=PG&f=1", "display_name": "Marlon", "link": "https://stackoverflow.com/users/4437149/marlon"}, "edited": false, "score": 1, "creation_date": 1573754847, "post_id": 58846522, "comment_id": 103997167, "body": "The solution was to set the font of the terminal to &quot;Lucida Console&quot;. Then the characters showed up with your example above."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "reply_to_user": {"reputation": 167, "user_id": 4437149, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ca3fada09fb7d92be243b360831658d?s=128&d=identicon&r=PG&f=1", "display_name": "Marlon", "link": "https://stackoverflow.com/users/4437149/marlon"}, "edited": false, "score": 1, "creation_date": 1573759356, "post_id": 58846522, "comment_id": 103999243, "body": "Glad you sorted out!"}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": true, "score": 1, "last_activity_date": 1573759451, "last_edit_date": 1573759451, "creation_date": 1573683711, "answer_id": 58846522, "question_id": 58846212, "link": "https://stackoverflow.com/questions/58846212/python-wrong-output-of-currency-symbol-on-server/58846522#58846522", "title": "Python wrong output of currency symbol on server", "body": "<p><strong>Update:</strong></p>\n\n<p>Setting the terminal font to \"<code>Lucida Console</code>\" seems to be the solution.</p>\n\n<hr>\n\n<p><strong>Old Answer:</strong>   </p>\n\n<p>On windows, you may want to use an escape sequence (aka Python source code, aka code point), i.e.:</p>\n\n<pre><code>print(\"\\u20AC\") # Euro\nprint(\"\\u0024\") # Dollar\nprint(\"\\u00A3\") # Pound\nprint(\"\\u00A5\") # Yen\n</code></pre>\n\n<hr>\n\n<pre><code>\u20ac\n$\n\u00a3\n\u00a5\n</code></pre>\n\n<hr>\n\n<p>References:   </p>\n\n<ul>\n<li><a href=\"http://www.columbia.edu/~em36/wpdos/eurodos.html\" rel=\"nofollow noreferrer\">http://www.columbia.edu/~em36/wpdos/eurodos.html</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1969385/unable-to-print-euro-symbol-in-a-c-program\">unable to print euro symbol in a &quot;C&quot; program</a></li>\n<li><a href=\"https://lwn.net/Articles/741698/\" rel=\"nofollow noreferrer\">https://lwn.net/Articles/741698/</a></li>\n</ul>\n"}], "owner": {"reputation": 167, "user_id": 4437149, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ca3fada09fb7d92be243b360831658d?s=128&d=identicon&r=PG&f=1", "display_name": "Marlon", "link": "https://stackoverflow.com/users/4437149/marlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58846522, "answer_count": 1, "score": 1, "last_activity_date": 1573759451, "creation_date": 1573682069, "question_id": 58846212, "link": "https://stackoverflow.com/questions/58846212/python-wrong-output-of-currency-symbol-on-server", "title": "Python wrong output of currency symbol on server", "body": "<p>I want to display currencies using a really simple python script:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport sys\nimport logging\n\nif __name__ == '__main__':\n    print('\u20ac')\n</code></pre>\n\n<p>On my local computer, everything works fine when I run the script with powershell.</p>\n\n<p>If I run the same script on my Windows Server 2008 however, the output is a question mark (<code>?</code>).</p>\n\n<p>I tried all solutions from this answer without success: <a href=\"https://stackoverflow.com/a/39936499/4437149\">https://stackoverflow.com/a/39936499/4437149</a>.</p>\n\n<p>Since im new to python I cant figure out whats exactly wrong.</p>\n\n<p>Is there something missing in my script or any server misconfiguration? Im using the newest version of python (currently 3.8.0).</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "is_accepted": false, "score": 0, "last_activity_date": 1573683153, "last_edit_date": 1573683153, "creation_date": 1573682840, "answer_id": 58846366, "question_id": 58846198, "link": "https://stackoverflow.com/questions/58846198/is-is-possible-each-cell-of-a-numpy-array-iteratively-from-a-function/58846366#58846366", "title": "Is is possible each cell of a numpy array iteratively from a function?", "body": "<p>In numpy we generally write <code>foo</code> to to be \"array aware\" to avoid needing to loop over our inputs. For example, you could take this function <code>crossAddF</code> and write an array aware version <code>crossAddArray</code>:</p>\n\n<pre><code>def crossAdd(a, b):\n    S = np.zeros([len(a), len(b)])\n    for i in range(len(a)):\n        for j in range(len(b)):\n            S[i][j] = a[i] + b[j]\n    return S\n\ndef corssAddArray(a, b):\n    a = np.reshape(a, [len(a), 1])\n    b = np.reshape(b, [1, len(b)])\n    return a + b\n</code></pre>\n\n<p>That being said, I realize that we sometimes need to work with functions that weren't meant for numpy that we can't easily re-write or change. In that case <code>numpy.vectorize</code> can be useful. Keep in mind that <code>vectorize</code> can be slower than other implementations of the same functionality. Here's an example:</p>\n\n<pre><code>def foo(i, j):\n    return float(i) + float(j)\n\ndef crossAddUsingVectorize(a, b):\n    a = np.reshape(a, [len(a), 1])\n    b = np.reshape(b, [1, len(b)])\n    return np.vectorize(foo)(a, b)\n</code></pre>\n\n<p>My examples also use numpy's <a href=\"https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\">broadcasting feature</a> it might be worth reading about if you're not already familiar with it.</p>\n"}], "owner": {"reputation": 129, "user_id": 9822933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf07952826b03c3fe3e31371a97ce70?s=128&d=identicon&r=PG&f=1", "display_name": "jpc", "link": "https://stackoverflow.com/users/9822933/jpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573683153, "creation_date": 1573682010, "question_id": 58846198, "link": "https://stackoverflow.com/questions/58846198/is-is-possible-each-cell-of-a-numpy-array-iteratively-from-a-function", "title": "Is is possible each cell of a numpy array iteratively from a function?", "body": "<p>Was not sure how exactly to word the question but here is the problem:</p>\n\n<p>I essentially have an empty array S that is of shape n * n. I also have an array of data R, of shape n * m. My goal is for S[i][j] = some func combining R[i] R[j].</p>\n\n<p>This is the code I wrote to accomplish what I want:</p>\n\n<pre><code>for i in range(n):\n    for j in range(n):\n        S[i][j] = foo(R[i], R[j])\n</code></pre>\n\n<p>I'd like to know if there is an existing numpy function that can do something like this, so I do not have to write the for loops.</p>\n"}, {"tags": ["python", "cmd", "rasa-core", "rasa"], "answers": [{"tags": [], "owner": {"reputation": 986, "user_id": 7663649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772ff178b6b78778a0018ddd77d6a25?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7663649/pierre"}, "is_accepted": false, "score": 1, "last_activity_date": 1573682993, "creation_date": 1573682993, "answer_id": 58846389, "question_id": 58846194, "link": "https://stackoverflow.com/questions/58846194/importerror-cannot-import-name-online-from-rasa-core-training/58846389#58846389", "title": "ImportError: cannot import name &#39;online&#39; from &#39;rasa_core.training&#39;", "body": "<p>The book you are reading might have outdated code samples with an outdated version of the Rasa library.</p>\n\n<p>After installing the <code>rasa-x</code> package using <code>pip install rasa-x --extra-index-url https://pypi.rasa.com/simple</code> and trying to run <code>from rasa_core.training import online</code> in my Python 3.6 interpreter, I got the following warning:</p>\n\n<blockquote>\n  <p>UserWarning: The 'rasa_core' package has been renamed. You should change your imports to use 'rasa.core' instead.</p>\n</blockquote>\n\n<p>Consider reading the new <a href=\"https://rasa.com/docs/getting-started/\" rel=\"nofollow noreferrer\">Getting Started</a> with Rasa document.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11317422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29ab0b4f9af36336758e1a5e233d3998?s=128&d=identicon&r=PG&f=1", "display_name": "yattara", "link": "https://stackoverflow.com/users/11317422/yattara"}, "is_accepted": false, "score": 0, "last_activity_date": 1606127836, "creation_date": 1606127836, "answer_id": 64966741, "question_id": 58846194, "link": "https://stackoverflow.com/questions/58846194/importerror-cannot-import-name-online-from-rasa-core-training/64966741#64966741", "title": "ImportError: cannot import name &#39;online&#39; from &#39;rasa_core.training&#39;", "body": "<p>hope it help:\n<strong>remove</strong></p>\n<pre><code>from rasa_core.training import online\nonline.serve_agent(agent)\n</code></pre>\n<p><strong>Replace by this</strong></p>\n<pre><code>from rasa_core.training import interactive\ninteractive.run_interactive_learning(agent)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12299604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd304e38bac74332f8184cd3db1c8ae4?s=128&d=identicon&r=PG&f=1", "display_name": "Max_Meadowcroft", "link": "https://stackoverflow.com/users/12299604/max-meadowcroft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1606127836, "creation_date": 1573681988, "question_id": 58846194, "link": "https://stackoverflow.com/questions/58846194/importerror-cannot-import-name-online-from-rasa-core-training", "title": "ImportError: cannot import name &#39;online&#39; from &#39;rasa_core.training&#39;", "body": "<p>I am following code from a book and run into this error while trying to run online training.</p>\n\n<p>the full error is:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"train_online.py\", line 9, in \n      from rasa_core.training import online\n  ImportError: cannot import name 'online' from 'rasa_core.training' (C:\\Users\\Max\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\rasa_core\\training__init__.py)</p>\n</blockquote>\n\n<p>My code is: </p>\n\n<pre><code>from __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\nfrom __future__ import unicode_literals\n\nimport logging\n\nfrom rasa_core import utils, train\nfrom rasa_core.training import online\nfrom rasa_core.interpreter import NatraulLanguageInterpreter\n\nlogger = logging.getLogger(__name__)\n\ndef train_agent(interpreter):\n    return train.train_dialog_model(domain_file=\"horoscope_domain.yml\", \nstories_file=\"data/stories.md\", output_path=\"models/dialog\", \nnlu_model_path=interpreter, endpoints=\"endpoints.yml\", max_history=2, kwargs= \n{\"batch_size\": 50, \"epochs\": 200, \"max_training_samples\": 300})\n\nif __name__ == '__main__':\n    utils.configure_colored_logging(loglevel='DEBUG')\n    nlu_model_path = \"'/models/nlu/default/horoscopebot\"\n    interpreter = NatraulLanguageInterpreter.create(nlu_model_path)\n    agent = train_agent(interpreter)\n    online.serve_agent(agent)\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "indexing"], "comments": [{"owner": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "edited": false, "score": 0, "creation_date": 1573682511, "post_id": 58846178, "comment_id": 103966236, "body": "Do you want to get indices where <i>all</i> bands equal the special value or <i>any</i>?"}, {"owner": {"reputation": 549, "user_id": 10881573, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iHazXnor2I8/AAAAAAAAAAI/AAAAAAAAC_o/iSpyKguxPVg/photo.jpg?sz=128", "display_name": "Michael Green", "link": "https://stackoverflow.com/users/10881573/michael-green"}, "edited": false, "score": 0, "creation_date": 1573682644, "post_id": 58846178, "comment_id": 103966285, "body": "Not entirely sure I&#39;m following the question... so you have a 3d-array x of (length=7, width=325, height=255) which contains a bunch of values, one of which is x(l,w,h) = -9999. And you want to generate some &#39;y&#39; array which can be represented in a 2d array which inherits the width and height of your 3d array. What exactly are you hoping to populate the y array with? What information is it supposed to hold?"}, {"owner": {"reputation": 5, "user_id": 7370704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8bdbd2f2448441620b5e09d29c436ec?s=128&d=identicon&r=PG&f=1", "display_name": "fotxoa", "link": "https://stackoverflow.com/users/7370704/fotxoa"}, "reply_to_user": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "edited": false, "score": 0, "creation_date": 1573682751, "post_id": 58846178, "comment_id": 103966321, "body": "@Matthias It would probably be any, sorry should have clarified that ."}, {"owner": {"reputation": 5, "user_id": 7370704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8bdbd2f2448441620b5e09d29c436ec?s=128&d=identicon&r=PG&f=1", "display_name": "fotxoa", "link": "https://stackoverflow.com/users/7370704/fotxoa"}, "reply_to_user": {"reputation": 549, "user_id": 10881573, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iHazXnor2I8/AAAAAAAAAAI/AAAAAAAAC_o/iSpyKguxPVg/photo.jpg?sz=128", "display_name": "Michael Green", "link": "https://stackoverflow.com/users/10881573/michael-green"}, "edited": false, "score": 0, "creation_date": 1573682931, "post_id": 58846178, "comment_id": 103966391, "body": "@MichaelGreen The final product is an index that shows where I have a value of -9999 across any band."}, {"owner": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "edited": false, "score": 0, "creation_date": 1573683207, "post_id": 58846178, "comment_id": 103966505, "body": "@fotxoa So if I understand correctly, you want a boolean 2d array that is True if any -9999 occurs?"}, {"owner": {"reputation": 5, "user_id": 7370704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8bdbd2f2448441620b5e09d29c436ec?s=128&d=identicon&r=PG&f=1", "display_name": "fotxoa", "link": "https://stackoverflow.com/users/7370704/fotxoa"}, "reply_to_user": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "edited": false, "score": 0, "creation_date": 1573683320, "post_id": 58846178, "comment_id": 103966551, "body": "@MatthiasOssadnik yes! That&#39;s exactly what I&#39;m looking for."}], "answers": [{"tags": [], "owner": {"reputation": 826, "user_id": 4267414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39869b9351200b0bea3133cdb77429cf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Ossadnik", "link": "https://stackoverflow.com/users/4267414/matthias-ossadnik"}, "is_accepted": true, "score": 1, "last_activity_date": 1573683491, "creation_date": 1573683491, "answer_id": 58846480, "question_id": 58846178, "link": "https://stackoverflow.com/questions/58846178/obtaining-a-2d-index-from-a-3d-array/58846480#58846480", "title": "Obtaining a 2D index from a 3D array?", "body": "<p>Use <code>any</code> to aggregate over the bands. This yields the required 2d boolean array:</p>\n\n<pre><code>y = np.any(x == -9999, axis=0)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7370704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8bdbd2f2448441620b5e09d29c436ec?s=128&d=identicon&r=PG&f=1", "display_name": "fotxoa", "link": "https://stackoverflow.com/users/7370704/fotxoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 58846480, "answer_count": 1, "score": 0, "last_activity_date": 1573683491, "creation_date": 1573681913, "question_id": 58846178, "link": "https://stackoverflow.com/questions/58846178/obtaining-a-2d-index-from-a-3d-array", "title": "Obtaining a 2D index from a 3D array?", "body": "<p>I have a numpy array that is (7 x 325 x 255). The seven are different bands from an image, and the 325 and 448 are rows and columns (i.e. pixels). X is an example of my setup.</p>\n\n<pre><code>     x = x = np.random.randint(5, size=(7,325,255))\n</code></pre>\n\n<p>I'm trying to create a two-dimensional index (325,255) using np.where() from all 7 bands, where the values are equal to my no data parameter, which is -9999. My argument is the following:</p>\n\n<pre><code>    y = np.asarray(np.where(x == -9999))\n</code></pre>\n\n<p>However, when I print the shape of y, I get the following, which should be (325, 255):</p>\n\n<pre><code>    (3, 580125)\n</code></pre>\n\n<p>Any suggestions or ideas on how to tackle this?\nMuch thanks! </p>\n"}, {"tags": ["python", "stackdriver", "google-cloud-stackdriver", "google-cloud-logging", "structured-logging"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 9504856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a495406077ca069ee7499fe0cf2f3?s=128&d=identicon&r=PG&f=1", "display_name": "PCS-I", "link": "https://stackoverflow.com/users/9504856/pcs-i"}, "edited": false, "score": 0, "creation_date": 1573847987, "post_id": 58868535, "comment_id": 104034906, "body": "Thanks! Unfortunately, trying it as I said is not correlating the logs for me. I did try it with a stdout and the result was the same, see the updated screenshot."}, {"owner": {"reputation": 86, "user_id": 12375776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnbaF.jpg?s=128&g=1", "display_name": "Dina Graves Portman", "link": "https://stackoverflow.com/users/12375776/dina-graves-portman"}, "edited": false, "score": 1, "creation_date": 1573850651, "post_id": 58868535, "comment_id": 104036032, "body": "Can you try one more time?  When you re-deploy the app, this message will be correlated with the log: &quot;This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application.&quot;   -- I see the same thing when I re-deploy my app. But when I reload the page, the custom message shows correlated with the request log."}, {"owner": {"reputation": 353, "user_id": 9504856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a495406077ca069ee7499fe0cf2f3?s=128&d=identicon&r=PG&f=1", "display_name": "PCS-I", "link": "https://stackoverflow.com/users/9504856/pcs-i"}, "edited": false, "score": 0, "creation_date": 1573851237, "post_id": 58868535, "comment_id": 104036238, "body": "You&#39;re right! It did appear inside the request! But the log appears twice: once inside the request and once in its own line. Would you know how to make the extra one disappear?"}, {"owner": {"reputation": 353, "user_id": 9504856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a495406077ca069ee7499fe0cf2f3?s=128&d=identicon&r=PG&f=1", "display_name": "PCS-I", "link": "https://stackoverflow.com/users/9504856/pcs-i"}, "edited": false, "score": 0, "creation_date": 1573852440, "post_id": 58868535, "comment_id": 104036702, "body": "Another issue is that the &#39;child&#39; log severity is not taken by the &#39;parent&#39; log (request), which makes all request log with a default severity."}, {"owner": {"reputation": 86, "user_id": 12375776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnbaF.jpg?s=128&g=1", "display_name": "Dina Graves Portman", "link": "https://stackoverflow.com/users/12375776/dina-graves-portman"}, "edited": false, "score": 1, "creation_date": 1573861526, "post_id": 58868535, "comment_id": 104039271, "body": "Added to the answer: You can easily filter out the stdout and only see the Request logs using the filter in the UI."}, {"owner": {"reputation": 86, "user_id": 12375776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnbaF.jpg?s=128&g=1", "display_name": "Dina Graves Portman", "link": "https://stackoverflow.com/users/12375776/dina-graves-portman"}, "edited": false, "score": 0, "creation_date": 1573861831, "post_id": 58868535, "comment_id": 104039351, "body": "Regarding the severity - that&#39;s a difficult one.  B/c the request returned a 200, I&#39;m not sure it should pick up the highest related severity?   If there is an actual error in the app, it should return a 400 or higher.     One option you have is to create your own structured logs that replace the RequestLog.  You can put in all the same information and add your custom fields and custom severity and use this as your main source.  You can either do that with the same stdout approach you&#39;re currently taking, or you can use stackdriver logging API."}, {"owner": {"reputation": 353, "user_id": 9504856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a495406077ca069ee7499fe0cf2f3?s=128&d=identicon&r=PG&f=1", "display_name": "PCS-I", "link": "https://stackoverflow.com/users/9504856/pcs-i"}, "edited": false, "score": 0, "creation_date": 1573884637, "post_id": 58868535, "comment_id": 104042412, "body": "Thanks for the advice! By replacing the RequestLog, you mean logging the request myself along with other logs. That could be a solution, ideally I would have wished to have the same behavior as I had using the google appengine library in python2 (with the google appengine sdk now deprecated), unfortunately I had the same non-similar result using the stackdriver logging API"}, {"owner": {"reputation": 86, "user_id": 12375776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnbaF.jpg?s=128&g=1", "display_name": "Dina Graves Portman", "link": "https://stackoverflow.com/users/12375776/dina-graves-portman"}, "edited": false, "score": 0, "creation_date": 1574106630, "post_id": 58868535, "comment_id": 104105128, "body": "Yes - that&#39;s precisely what I meant.  I hope it works for you!  Best of luck!"}], "tags": [], "owner": {"reputation": 86, "user_id": 12375776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnbaF.jpg?s=128&g=1", "display_name": "Dina Graves Portman", "link": "https://stackoverflow.com/users/12375776/dina-graves-portman"}, "is_accepted": false, "score": 1, "last_activity_date": 1573861964, "last_edit_date": 1573861964, "creation_date": 1573777350, "answer_id": 58868535, "question_id": 58846168, "link": "https://stackoverflow.com/questions/58846168/google-stackdriver-correlating-logs-with-parent-request-python-3/58868535#58868535", "title": "Google StackDriver correlating logs with parent request python 3", "body": "<p>Thanks for the question!</p>\n\n<p>It looks like you're logging the trace correctly, but your logName indicates that you're not using a stdout or stderr.   If you use one of these for your logs, they will correlate properly, like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/Qjigu.png\" rel=\"nofollow noreferrer\">StackDriver Logs Screenshot</a></p>\n\n<p>You can see that the logName ends with stdout.  An stdout or stderr will correlate.  You can create this as shown here in the tutorial:</p>\n\n<pre><code># Build structured log messages as an object.\nglobal_log_fields = {}\n\n# Add log correlation to nest all log messages\n# beneath request log in Log Viewer.\ntrace_header = request.headers.get('X-Cloud-Trace-Context')\n\nif trace_header and PROJECT:\n    trace = trace_header.split('/')\n    global_log_fields['logging.googleapis.com/trace'] = (\n        f\"projects/{PROJECT}/traces/{trace[0]}\")\n\n# Complete a structured log entry.\nentry = dict(severity='NOTICE',\n             message='This is the default display field.',\n             # Log viewer accesses 'component' as jsonPayload.component'.\n             component='arbitrary-property',\n             **global_log_fields)\n\nprint(json.dumps(entry))\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>To filter out the stdout and only see the Request logs in the stackdriver UI, you can de-select the stdout from the filter.  <a href=\"https://i.stack.imgur.com/LaxKk.png\" rel=\"nofollow noreferrer\">Logs Filter</a></p>\n\n<p>For a sample using the python client API, please see this article and attached sample Flask app.  <a href=\"https://medium.com/google-cloud/combining-correlated-log-lines-in-google-stackdriver-dd23284aeb29\" rel=\"nofollow noreferrer\">Combining correlated Log Lines in Google Stackdriver</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4108011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSXI6.jpg?s=128&g=1", "display_name": "Maulik Patel", "link": "https://stackoverflow.com/users/4108011/maulik-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1589807868, "creation_date": 1589807868, "answer_id": 61870471, "question_id": 58846168, "link": "https://stackoverflow.com/questions/58846168/google-stackdriver-correlating-logs-with-parent-request-python-3/61870471#61870471", "title": "Google StackDriver correlating logs with parent request python 3", "body": "<p>I was able to achieve this kind of logging structure on Google Cloud Logging Console:<a href=\"https://i.stack.imgur.com/psr1v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/psr1v.png\" alt=\"enter image description here\"></a></p>\n\n<p>I was using the Django Framework. I wrote Django middleware which integrates Google Cloud Logging API.</p>\n\n<p>\"Trace\" needs to be added to every log object which points to its parent log object. </p>\n\n<p>please check <a href=\"https://djangocircle.com/how-to-manage-nesting-of-logs-in-google-stackdriver-with-django-web-apps/\" rel=\"nofollow noreferrer\">manage nesting of logs in Google Stackdriver with Django</a></p>\n\n<p>Please check <a href=\"https://github.com/djangocircle/django-google-stackdriver-nested-logging\" rel=\"nofollow noreferrer\">django-google-stackdriver-nested-logging</a> log_middleware.py source on Github.</p>\n"}], "owner": {"reputation": 353, "user_id": 9504856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a495406077ca069ee7499fe0cf2f3?s=128&d=identicon&r=PG&f=1", "display_name": "PCS-I", "link": "https://stackoverflow.com/users/9504856/pcs-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1589807868, "creation_date": 1573681870, "last_edit_date": 1573853008, "question_id": 58846168, "link": "https://stackoverflow.com/questions/58846168/google-stackdriver-correlating-logs-with-parent-request-python-3", "title": "Google StackDriver correlating logs with parent request python 3", "body": "<p>In python 2.7, the app engine sdk was doing the work in the background to nest all logs with the parent request to have a correlation in Google StackDriver.</p>\n\n<p>As of the transition to python 3, it is through the usage of google cloud logging or structured logging, and from all the different references I could found, it's important to have the same trace id in the 'sub' logs for stack driver to make a match with the 'request' log.</p>\n\n<p>And still as you can see below, it still appear as different logs.</p>\n\n<p>For context, I even tried this on an empty django project deployed on app engine.</p>\n\n<p>Got the same result, even when following the example in the documentation:\n<a href=\"https://cloud.google.com/run/docs/logging#writing_structured_logs\" rel=\"nofollow noreferrer\">https://cloud.google.com/run/docs/logging#writing_structured_logs</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tbr3r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tbr3r.png\" alt=\"Log StackDriver\"></a></p>\n\n<p>Trying to log to the stdout is giving the same result.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VOAdC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VOAdC.png\" alt=\"Log StackDriver 2\"></a></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>After the initial request, all other request will be nested under the initial request when using the stdout.</p>\n\n<p>But, the highest severity of the 'child' logs is not taken by the 'parent' log, therefore the filters won't pick up the actual log. See below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4XYAK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4XYAK.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django", "sentry", "raven"], "answers": [{"tags": [], "owner": {"reputation": 6980, "user_id": 1544347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ad87bb0303238ee876a147dacd557a1?s=128&d=identicon&r=PG", "display_name": "Markus Unterwaditzer", "link": "https://stackoverflow.com/users/1544347/markus-unterwaditzer"}, "is_accepted": true, "score": 0, "last_activity_date": 1574113146, "creation_date": 1574113146, "answer_id": 58923312, "question_id": 58846149, "link": "https://stackoverflow.com/questions/58846149/how-to-prevent-sentry-from-grouping-errors-alerts-on-a-specific-type-of-error/58923312#58923312", "title": "How to prevent Sentry from grouping errors/alerts on a specific type of error?", "body": "<p>You can set the fingerprint to a completely random value to create one group per event/message. That would effectively give you one alert per event/message.</p>\n"}], "owner": {"reputation": 5668, "user_id": 2023745, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc8256640c8046280c734a84b4be3f1d?s=128&d=identicon&r=PG", "display_name": "TheRealFakeNews", "link": "https://stackoverflow.com/users/2023745/therealfakenews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58923312, "answer_count": 1, "score": 0, "last_activity_date": 1574113146, "creation_date": 1573681765, "question_id": 58846149, "link": "https://stackoverflow.com/questions/58846149/how-to-prevent-sentry-from-grouping-errors-alerts-on-a-specific-type-of-error", "title": "How to prevent Sentry from grouping errors/alerts on a specific type of error?", "body": "<p>I am trying to prevent sentry from grouping my errors. Specifically I log to sentry (<code>captureMessage()</code>) when a task is taking too long. A daemon will check this task on a regular interval. As long as the job is still \"taking too long\", I want it to alert me. As of now, I have I have one sentry alert where there are 10k events. Instead, I want each of these events to be an individual Sentry alert. I cannot find anything that would work. The closest thing I can find is <a href=\"https://docs.sentry.io/data-management/event-grouping/sdk-fingerprinting/?platform=python#group-errors-more-granularly\" rel=\"nofollow noreferrer\">this link</a>. However, this does not help because I am not \"splitting\" these errors in to further subcategories; I simply do not want grouping to be enabled for this one particular section of my code (where I check task X).</p>\n\n<p>Is this possible to do in Sentry?</p>\n"}, {"tags": ["python", "python-3.x", "kivy", "kivy-language"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1573681834, "post_id": 58846123, "comment_id": 103965952, "body": "what is the error message?"}, {"owner": {"reputation": 1, "user_id": 12369080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-01cn73ZAu1I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdw-hqVkWT2YzaLlHKN608n6EnXrA/photo.jpg?sz=128", "display_name": "marcel", "link": "https://stackoverflow.com/users/12369080/marcel"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1573736323, "post_id": 58846123, "comment_id": 103986100, "body": "Until now it works, but I didn&#180;t find a solution to update the text on Label  after the kv has been read."}, {"owner": {"reputation": 1, "user_id": 12369080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-01cn73ZAu1I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdw-hqVkWT2YzaLlHKN608n6EnXrA/photo.jpg?sz=128", "display_name": "marcel", "link": "https://stackoverflow.com/users/12369080/marcel"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1573737061, "post_id": 58846123, "comment_id": 103986531, "body": "For example, I would like to do a calculation in python and pass new data to a text label in kV and show them on screen."}], "answers": [{"tags": [], "owner": {"reputation": 726, "user_id": 11686943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tTcrPxYPRmg/AAAAAAAAAAI/AAAAAAAAG6I/fLx2p_ksQ54/photo.jpg?sz=128", "display_name": "Chitkaran Singh", "link": "https://stackoverflow.com/users/11686943/chitkaran-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1574059590, "creation_date": 1574059590, "answer_id": 58909238, "question_id": 58846123, "link": "https://stackoverflow.com/questions/58846123/how-to-update-a-text-label-by-python-function/58909238#58909238", "title": "How to update a text label by python function", "body": "<p>From what I see, you are looking to update the text of a Label from the Python code. To achieve this, you'll need to use the ObjectProperty</p>\n\n<p><strong>kv code (snippet)</strong>    </p>\n\n<pre><code>GridLayout:\n    cols: 1\n    username:username\n    Label:\n        id : username\n        text: 'hello'\n        color: 1,0,1,1\n</code></pre>\n\n<p><strong>python code (snippet)</strong></p>\n\n<pre><code>class function(self):\n    username = ObjectProperty(None)\n    if logic1:\n        self.username.text = 'text for logic 1'\n    else:\n        self.username.text = 'text for logic 2'\n</code></pre>\n\n<p>Hope this was able to answer your query\n:)</p>\n"}], "owner": {"reputation": 1, "user_id": 12369080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-01cn73ZAu1I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdw-hqVkWT2YzaLlHKN608n6EnXrA/photo.jpg?sz=128", "display_name": "marcel", "link": "https://stackoverflow.com/users/12369080/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1574059590, "creation_date": 1573681626, "last_edit_date": 1573681742, "question_id": 58846123, "link": "https://stackoverflow.com/questions/58846123/how-to-update-a-text-label-by-python-function", "title": "How to update a text label by python function", "body": "<p>I use a Button to call a function (root.write_username())</p>\n\n<pre><code>  GridLayout\n        cols: 1\n\n        Label:\n            text: \"Login\"\n\n        TextInput:\n            id: username\n            hint_text: root.usernamehint\n            multiline: False\n\n        Button:\n            text: \"Gooo\"\n            on_release: root.write_username()\n\n</code></pre>\n\n<p>The Funktion (def write_username(self):) write username in a text file.\nAfter that, the Funktion should update a Label in the SecondWindow with the entered username.</p>\n\n<pre><code>class LoginScreen(Screen):\n    username = ObjectProperty(None)\n    usernamehint = StringProperty(str(read_username()))\n\n\n#####Weiterleitung SecondScreen, wenn ein Benutzername eingegeben wurde wird dieser gespeichert#####\n\n    def write_username(self):\n        if str(self.username.text) is \"\":\n            self.manager.current = \"second\"\n            pass\n        else:\n            f = open(\"username.text\", \"w\")\n            f.write(str(self.username.text))\n            f.close()\n          #######befor go to second the label in second should be updated but how?#####\n            self.manager.current = \"second\"\n</code></pre>\n\n<pre><code>&lt;SecondWindow&gt;:\n    name: \"second\"\n    username_label: usernamelabel\n\n    GridLayout:\n        cols: 1\n\n        ####this label should be updated####\n        Label:\n            id : usernamelabel\n            text: root.username\n            color: 1,0,1,1\n</code></pre>\n\n<p>I know there are some posts about updating a kivy label with python but I didn\u00b4t get an answer in my case. \nThanks for your help!</p>\n\n<p>In Case you need my entire code</p>\n\n<pre><code>##########################Pyton#############################\nimport random\nimport operator\nimport time\nimport kivy\nfrom kivy.app import App\nfrom kivy.uix.label import Label\nfrom kivy.uix.gridlayout import GridLayout\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import ScreenManager, Screen\nfrom kivy.properties import ObjectProperty\nfrom kivy.properties import StringProperty\n\nkivy.require(\"1.11.1\")\n\n\ndef read_username():\n    f = open(\"username.text\", \"r\")\n    username = str(f.read())\n    f.close()\n    return username\n\n    pass\n\n\ndef choicehello():\n    spruch = [\"Gib jedem Tag die Chance, der sch\u00f6nste deines Lebens zu werden. \u2013 Mark Twain\",\n              \"Wenn du die Absicht hast, dich zu erneuern, tu es jeden Tag. \u2013 Konfuzius\",\n              ]\n    hello = random.choice(spruch)\n\n    return hello\n\n    pass\n\n\n#####Eingabe Username falls Unbekannt########\n\nclass LoginScreen(Screen):\n    username = ObjectProperty(None)\n    usernamehint = StringProperty(str(read_username()))\n\n\n#####Weiterleitung SecondScreen, wenn ein Benutzername eingegeben wurde wird dieser gespeichert#####\n\n    def write_username(self):\n        if str(self.username.text) is \"\":\n            self.manager.current = \"second\"\n            pass\n        else:\n            f = open(\"username.text\", \"w\")\n            f.write(str(self.username.text))\n            f.close()\n\n            self.manager.current = \"second\"\n\n\n\n\n####Begr\u00fc\u00dfung des Users, Level Auswahl, Einstellungen, Highscores#####\n\nclass SecondWindow(Screen):\n    username = StringProperty(str(read_username()))\n    userhello = StringProperty(str(choicehello()))\n\nclass Game1Window(Screen):\n    pass\n\n\nclass WindowManager(ScreenManager):\n    pass\n\n\nkv = Builder.load_file(\"mathe.kv\")\n\n\nclass MatheApp(App):\n    def build(self):\n        return kv\n\n\nif __name__ == \"__main__\":\n    MatheApp().run()\n\n\n########################KV########################################\n\nWindowManager:\n    LoginScreen:\n    SecondWindow:\n    Game1Window:\n\n&lt;LoginScreen&gt;:\n    name: \"login\"\n    username: username\n\n\n    GridLayout\n        cols: 1\n\n        Label:\n            text: \"Login\"\n\n        TextInput:\n            id: username\n            hint_text: root.usernamehint\n            multiline: False\n\n        Button:\n            text: \"Gooo\"\n            on_release: root.write_username()\n\n\n\n\n\n&lt;SecondWindow&gt;:\n    name: \"second\"\n\n\n    GridLayout:\n        cols: 1\n\n        Label:\n            text: root.userhello\n            color: 1,0,1,1\n\n        Label:\n            text: \"W\u00e4hle ein Level\"\n\n        Label:\n            id : usernamelabel\n            text: root.username\n            color: 1,0,1,1\n\n        ScrollView:\n\n            GridLayout:\n                cols: 1\n                padding: 10\n                spacing: 10\n\n\n\n                Button:\n                    text: \"Test\"\n                    on_release:\n                        app.root.current = \"game1\"\n\n                Button:\n                    text: \"Test\"\n\n                Button:\n                    text: \"Test\"\n\n        Button:\n            text: \"Go Back\"\n            on_release:\n                app.root.current = \"login\"\n\n\n\n&lt;Game1Window&gt;:\n    name: \"game1\"\n\n    GridLayout:\n        cols: 1\n\n        Button:\n            text: \"back\"\n            on_release:\n                app.root.current = \"second\"\n\n\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 4, "creation_date": 1573681788, "post_id": 58846106, "comment_id": 103965931, "body": "dict can not have dup key"}, {"owner": {"reputation": 424, "user_id": 10964035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7db17639693fecedeea0d05c28e565d?s=128&d=identicon&r=PG&f=1", "display_name": "MaxB", "link": "https://stackoverflow.com/users/10964035/maxb"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1573681808, "post_id": 58846106, "comment_id": 103965940, "body": "I&#39;m stuck on handling the <code>X&#39;s</code> because like you said, cant have the same key twice and at the end of the day I don&#39;t need them in there."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1573682039, "post_id": 58846106, "comment_id": 103966042, "body": "Check your expected output , you have dup key with test2 and test1, both of them shown twice ."}, {"owner": {"reputation": 424, "user_id": 10964035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7db17639693fecedeea0d05c28e565d?s=128&d=identicon&r=PG&f=1", "display_name": "MaxB", "link": "https://stackoverflow.com/users/10964035/maxb"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1573682337, "post_id": 58846106, "comment_id": 103966164, "body": "@WeNYoBen updated question, I guess the only way to do it would be keys/multivalue dict pairs."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1573682834, "post_id": 58846106, "comment_id": 103966346, "body": "maybe work with a <code>defaultdict(list)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1573683321, "creation_date": 1573683321, "answer_id": 58846443, "question_id": 58846106, "link": "https://stackoverflow.com/questions/58846106/make-dictionary-key-pairs-based-on-entire-dataframe/58846443#58846443", "title": "Make dictionary/key pairs based on entire dataframe", "body": "<p>I will keep it in <code>list</code> rather than string </p>\n\n<pre><code>s=df.replace({'X':np.nan}).melt('num').dropna()\nd=s.groupby('value')['num'].apply(list).to_dict()\nOut[183]: {'test1': [999, 124], 'test2': [123, 124]}\n</code></pre>\n"}], "owner": {"reputation": 424, "user_id": 10964035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7db17639693fecedeea0d05c28e565d?s=128&d=identicon&r=PG&f=1", "display_name": "MaxB", "link": "https://stackoverflow.com/users/10964035/maxb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573683321, "creation_date": 1573681552, "last_edit_date": 1573682311, "question_id": 58846106, "link": "https://stackoverflow.com/questions/58846106/make-dictionary-key-pairs-based-on-entire-dataframe", "title": "Make dictionary/key pairs based on entire dataframe", "body": "<p>I have a dataframe that can contain any number of columns. I want to make a dictionary in which the value is the element of column one, and the keys are every other element at the same index for every column.</p>\n\n<p>ex df</p>\n\n<pre><code>num  test1   test2  etc...\n123    X     test2\n999   test1     X\n555    X        X\n124   test1   test2\n</code></pre>\n\n<p>The idea is to create a dictionary in which every single element (of the same index that is NOT <code>X</code>) becomes a key, and the <code>num</code> column becomes the value (allowing multi-value dict pairs)</p>\n\n<p>The dict for the above df would be as follows:</p>\n\n<pre><code>thisdict = { 'test2':'123,124','test1':'999,124'}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "scrapy"], "owner": {"reputation": 1058, "user_id": 2797757, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4db8a84f0f567cc5df66a9a480ce5b08?s=128&d=identicon&r=PG&f=1", "display_name": "hydradon", "link": "https://stackoverflow.com/users/2797757/hydradon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573681498, "creation_date": 1573681498, "question_id": 58846098, "link": "https://stackoverflow.com/questions/58846098/ensure-scrapy-stay-logged-in-during-extended-crawl", "title": "Ensure Scrapy stay logged in during extended crawl", "body": "<p>I have my Spider that needs to stay logged in to website for extended crawl:</p>\n\n<pre><code> start_urls = ['https://example.com/login']\n crawl_urls = [\"www.example.com/page1\",\n               \"www.example.com/page2\",\n               \"www.example.com/page1000\"]\n\n\n def parse(self, response):\n        token = response.xpath('//*[@name=\"csrf_token\"]/@value').extract_first()\n        return [scrapy.FormRequest.from_response(response,\n                                                 formdata={'csrf_token': token,\n                                                           'password': 'mypassword',\n                                                           'username': 'myusername'},\n                                                 formcss='.login_form_widget .form',\n                                                 callback=self.check_login_response)]\n\n    def check_login_response(self, response):\n        if b\"Incorrect username or password\" in response.body:\n            self.log(\"Login failed\", level=logging.ERROR)\n            return\n        else:\n            self.log(\"Successfully logged in!!\")\n            for url in self.crawl_urls:\n                yield scrapy.Request(url=url, callback=self.scrape)\n\n    def scrape(self, response):\n        # scraping\n        yield item\n</code></pre>\n\n<p>The issue is that some of the data on the page are only visible when logged in. So my spider can scrape those data when it's logged in. But some records are missing those data, which I have discovered that Scrapy crawled those pages when not logged in. </p>\n\n<p>I am thinking of checking the response page if its HTML contains my <code>username</code>, then it's logged in.</p>\n\n<p>Where, in my code, should I make Scrapy check itself if it's logged in and perform logging in if not?</p>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1573681391, "post_id": 58846040, "comment_id": 103965754, "body": "To try to guide you to your own understanding, try to point out exactly where you think you&#39;ve changed the list."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1573681680, "post_id": 58846040, "comment_id": 103965884, "body": "at first glance, it looks like you changed a temporary variable named &quot;i&quot; so it had no effect once you were done with &quot;i&quot;"}, {"owner": {"reputation": 11, "user_id": 10286707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4147b1f6fb242bfdc0296161dd5cd9?s=128&d=identicon&r=PG&f=1", "display_name": "Yomiko Q", "link": "https://stackoverflow.com/users/10286707/yomiko-q"}, "edited": false, "score": 0, "creation_date": 1573752690, "post_id": 58846040, "comment_id": 103996105, "body": "Thanks a lot. I worked it out!"}], "owner": {"reputation": 11, "user_id": 10286707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4147b1f6fb242bfdc0296161dd5cd9?s=128&d=identicon&r=PG&f=1", "display_name": "Yomiko Q", "link": "https://stackoverflow.com/users/10286707/yomiko-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1573681492, "answer_count": 0, "score": 1, "last_activity_date": 1573681758, "creation_date": 1573681212, "last_edit_date": 1573681758, "question_id": 58846040, "link": "https://stackoverflow.com/questions/58846040/simple-nested-for-loops", "closed_reason": "Duplicate", "title": "simple nested for loops", "body": "<p>I am new to Python and need some help with the following codes. The mission is to replace all \"bad\" symbols and characters with empty strings \"\".</p>\n\n<p>test_data = [\"1913-1923\",\"(1951)\", \"1994\", \"1934\", \"c. 1915\", \"1995\", \"(1988)\", \"2002\", \"1957-1959\",\"c. 1955.\", \"c. 1970's\", \"C. 1990-1999\"]</p>\n\n<p>bad_chars = [\"(\",\")\",\"c\",\"C\",\".\",\"s\",\"'\", \" \"]</p>\n\n<p>This is what I thought would work:</p>\n\n<pre><code>def func1(list1, tobereplaced):\n    for x in tobereplaced:\n        for i in list1:\n            i = i.replace(x,'')\n    return list1\n</code></pre>\n\n<p>The function made no changes to the list. Could someone please explain to me what went wrong? Many many thanks!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1573681650, "post_id": 58846025, "comment_id": 103965871, "body": "The &quot;zip&quot; function can create tuples from two or more lists which can be used by &quot;dict&quot; function to create the dictionary."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1573682034, "post_id": 58846025, "comment_id": 103966038, "body": "Can you please provide a demo dictionary for testing purposes?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1573687600, "post_id": 58846025, "comment_id": 103967900, "body": "It&#39;s hard to give a definitive answer without knowing what a &quot;python document` is (i.e. what&#39;s in your <code>Document</code> class)."}, {"owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "edited": false, "score": 0, "creation_date": 1573749033, "post_id": 58846025, "comment_id": 103993918, "body": "I use: from trp import Document"}, {"owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "edited": false, "score": 0, "creation_date": 1573749412, "post_id": 58846025, "comment_id": 103994170, "body": "My rows are oftype: trp.Row"}], "answers": [{"comments": [{"owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "edited": false, "score": 0, "creation_date": 1573749401, "post_id": 58846975, "comment_id": 103994160, "body": "I use trp import Document and my rows are of type: trp.Row"}], "tags": [], "owner": {"reputation": 8483, "user_id": 677022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jJlWr.png?s=128&g=1", "display_name": "Nicol&#225;s Ozimica", "link": "https://stackoverflow.com/users/677022/nicol%c3%a1s-ozimica"}, "is_accepted": true, "score": 0, "last_activity_date": 1573686367, "creation_date": 1573686367, "answer_id": 58846975, "question_id": 58846025, "link": "https://stackoverflow.com/questions/58846025/create-dictionary-from-table-in-document/58846975#58846975", "title": "Create dictionary from table in Document", "body": "<p>What about something like this:</p>\n\n<pre><code>def do_test(json_data):\n    doc = Document(json_data)\n    for page in doc.pages:\n        for table in page.tables:\n            keys = table.rows[0]\n            row1 = table.rows[1]\n            row2 = table.rows[2]\n\n            dict1 = dict(zip(keys, row1))\n            dict2 = dict(zip(keys, row2))\n\n            return dict1, dict2\n</code></pre>\n\n<p>I don't know quite well the structure returned by <code>doc.pages</code>, <code>doc.tables</code> and <code>table.rows</code>.</p>\n"}], "owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58846975, "answer_count": 1, "score": 2, "last_activity_date": 1573749028, "creation_date": 1573681167, "last_edit_date": 1573749028, "question_id": 58846025, "link": "https://stackoverflow.com/questions/58846025/create-dictionary-from-table-in-document", "title": "Create dictionary from table in Document", "body": "<p>I have a python document which contains a page and a table.\nWith the following function I can print the keys (which is the first row of the table):</p>\n\n<pre><code>from trp import Document\n\ndef do_test(json_data):\n    doc = Document(json_data)\n    for page in doc.pages:\n        for table in page.tables:\n            keys = table.rows[0]\n            print(keys)\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[VAR1 ][VAR2 ][VAR3 ][VAR4 ][VAR5 ]\n</code></pre>\n\n<p>When I print the second and third row:</p>\n\n<pre><code>    print(table.rows[1])\n    print(table.rows[2])\n    ...\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[Val1A ][Val1B ][Val1C ][Val1D ][Vald1E ]\n[Val2A ][Val2B ][Val2C ][Val2D ][Vald2E ]\n...\n</code></pre>\n\n<p>I want to create 2 dictionaries like this:</p>\n\n<pre><code>dic1 =  {\n  \"VAR1\": \"Val1A\",\n  \"VAR2\": \"Val1B\",\n  \"VAR3\": \"Val1C\",\n  \"VAR4\": \"Val1D\",\n  \"VAR5\": \"Val1E\"\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>dic1 =  {\n  \"VAR1\": \"Val2A\",\n  \"VAR2\": \"Val2B\",\n  \"VAR3\": \"Val2C\",\n  \"VAR4\": \"Val2D\",\n  \"VAR5\": \"Val2E\"\n}\n</code></pre>\n\n<p>How can I create this by updating the <code>do_test</code> function?</p>\n"}, {"tags": ["python", "python-3.x", "multiprocessing"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1573681997, "post_id": 58846018, "comment_id": 103966025, "body": "processes do not share state."}, {"owner": {"reputation": 152, "user_id": 12369340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce662422dfd6b1152133d005aa4a7929?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/12369340/noah"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1573685057, "post_id": 58846018, "comment_id": 103967180, "body": "so I cant accomplish what im trying to do? @juanpa.arrivillaga"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1573685091, "post_id": 58846018, "comment_id": 103967200, "body": "You can, but you have to handle <a href=\"https://docs.python.org/3.8/library/multiprocessing.html#sharing-state-between-processes\" rel=\"nofollow noreferrer\">sharing state</a> yourself. You&#39;ve created two different <i>processes</i> which are not sharing memory."}], "answers": [{"tags": [], "owner": {"reputation": 1996, "user_id": 4620420, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f042995922d39078a6c252040748eb6c?s=128&d=identicon&r=PG&f=1", "display_name": "bivouac0", "link": "https://stackoverflow.com/users/4620420/bivouac0"}, "is_accepted": false, "score": 0, "last_activity_date": 1573712266, "last_edit_date": 1573712266, "creation_date": 1573710559, "answer_id": 58850164, "question_id": 58846018, "link": "https://stackoverflow.com/questions/58846018/multiprocessing-counters-and-printing-multiple-times/58850164#58850164", "title": "multiprocessing counters and printing multiple times", "body": "<p>Here's a quick example close to what you have above...</p>\n\n<pre><code>import time\nimport multiprocessing as mp\nfrom multiprocessing import Pool, Value, Lock\n\ncounter = Value('i',0)  # integer value starting at 0\nlock = Lock()\n\ndef check(line):\n    with lock:\n        counter.value += 1\n    if counter.value == 5:\n        with lock:\n            counter.value -= 5\n        print('Counter Reached 5 in process ', mp.current_process() )\n        return 1\n    else:\n        time.sleep(0.1)\n        return 0\n\npool = Pool(processes=4)\nresults = pool.map(check, range(15))\nprint(results)\n</code></pre>\n\n<p>Which gives (note that the process that gets to '5' first is random)..</p>\n\n<pre><code>Counter Reached 5 in process  &lt;ForkProcess(ForkPoolWorker-1, started daemon)&gt;\nCounter Reached 5 in process  &lt;ForkProcess(ForkPoolWorker-2, started daemon)&gt;\nCounter Reached 5 in process  &lt;ForkProcess(ForkPoolWorker-1, started daemon)&gt;\n[0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]\n</code></pre>\n\n<p>The <code>Lock()</code> will prevent potential race issues when modifying the <code>Value</code>.  If you remove the <code>with lock:</code> lines and run the above code a bunch of times, you'll see it intermittently print only twice because of the race condition.  There is a nice discussion of <code>Lock</code> <a href=\"https://eli.thegreenplace.net/2012/01/04/shared-counter-with-pythons-multiprocessing\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 152, "user_id": 12369340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce662422dfd6b1152133d005aa4a7929?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/12369340/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573712266, "creation_date": 1573681138, "question_id": 58846018, "link": "https://stackoverflow.com/questions/58846018/multiprocessing-counters-and-printing-multiple-times", "title": "multiprocessing counters and printing multiple times", "body": "<p>I am trying to figure out how to implement a print statement that will only print once in a function that has a pool of workers on it. So if they're is 2 threads running in the pool, I only want 1 thread to print it. I am trying to achieve this by using a counter, I have been messing around with the multiprocessing.Value that way it will increment right, but I removed it for now. Every time the counter hits 5 it will minus 5 from the counter and print something. </p>\n\n<pre><code>from multiprocessing import Pool, Value, Lock\nfrom colorama import Fore\ncounter = 0\ndef check(line):\n    counter+=1\n    if counter == 5:\n        counter-=5\n        print(Fore.YELLOW + \"Counter Reached 5\")\n    else:\n        pass\n    #my other code here that normally gets executed \ndef main():\n    #args.threads is taken from an argument given by the user before program starts\n    pool = Pool(args.threads)\n    pool.daemon = True\n    results = pool.map(check, arrange)\n\n</code></pre>\n\n<p>Of course they're is more code, but this is what I need help with. When the counter reaches 5, I want only one thread to print something instead of all of the threads in the pool.</p>\n"}, {"tags": ["python", "mysql", "django"], "comments": [{"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1573688005, "post_id": 58845987, "comment_id": 103967985, "body": "You seem to set a unique restriction somewhere on the user id field"}], "answers": [{"tags": [], "owner": {"reputation": 532, "user_id": 11619935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqkIK.jpg?s=128&g=1", "display_name": "Hossein Zare", "link": "https://stackoverflow.com/users/11619935/hossein-zare"}, "is_accepted": true, "score": 0, "last_activity_date": 1573736622, "creation_date": 1573736622, "answer_id": 58857466, "question_id": 58845987, "link": "https://stackoverflow.com/questions/58845987/django-duplicate-entry-1062/58857466#58857466", "title": "Django duplicate entry 1062", "body": "<p>I added <code>unique=False</code> to <strong>ForeignKey fields</strong> and it solved the problem.</p>\n\n<p>I hope if this error occurs in your app this answer gives you a hand.</p>\n"}], "owner": {"reputation": 532, "user_id": 11619935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqkIK.jpg?s=128&g=1", "display_name": "Hossein Zare", "link": "https://stackoverflow.com/users/11619935/hossein-zare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58857466, "answer_count": 1, "score": 0, "last_activity_date": 1573736622, "creation_date": 1573680969, "question_id": 58845987, "link": "https://stackoverflow.com/questions/58845987/django-duplicate-entry-1062", "title": "Django duplicate entry 1062", "body": "<p>I ran <code>python manage.py migrate accounts zero</code> then i faced an error,\nI checked my models multiple times it seems everything is ok but...!?</p>\n\n<p><strong>This is the error:</strong></p>\n\n<pre><code>django.db.utils.IntegrityError: (1062, \"Duplicate entry '1' for key 'accounts_post_user_id_ecf3e197_uniq'\")\n</code></pre>\n\n<p><strong>User model</strong>:</p>\n\n<pre><code>class User(AbstractBaseUser):\n    id = models.BigAutoField(primary_key=True)\n    username = models.CharField(max_length=30, unique=True)\n    email = models.EmailField(max_length=191, unique=True)\n    email_verified = models.BooleanField(default=False)\n    first_name = models.CharField(max_length=30)\n    last_name = models.CharField(max_length=30, blank=True)\n    is_active = models.BooleanField(default=True)\n    is_staff = models.BooleanField(default=False)\n    is_admin = models.BooleanField(default=False)\n    is_verified = models.BooleanField(default=False)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    objects = UserManager()\n\n    USERNAME_FIELD = 'username'\n    EMAIL_FIELD = 'email'\n    REQUIRED_FIELDS = ['email', 'first_name', 'last_name']\n\n    def __str__(self):\n        return self.username\n\n    def has_perm(self, perm, obj=None):\n        return self.is_admin\n\n    def has_module_perms(self, app_label):\n        return self.is_admin\n</code></pre>\n\n<p><strong>Post model:</strong></p>\n\n<pre><code>class Post(models.Model):\n    id = models.BigAutoField(primary_key=True)\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    channel = models.ForeignKey(Channel, on_delete=models.CASCADE, null=True, blank=True)\n    hashed_id = models.CharField(max_length=191)\n    text = models.TextField(max_length=270)\n    visits = models.IntegerField(default=0)\n    comment_status = models.BooleanField(default=True)\n    edited = models.BooleanField(default=False)\n    signature = models.CharField(max_length=191)\n    deleted_at = models.DateTimeField(null=True, blank=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n</code></pre>\n\n<p>There was 1 user with 2 posts.</p>\n"}, {"tags": ["python", "namespaces", "packaging"], "owner": {"reputation": 300, "user_id": 875551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4444abd90cc0649ccf99a25fe53384d1?s=128&d=identicon&r=PG", "display_name": "ChuckZ", "link": "https://stackoverflow.com/users/875551/chuckz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1573680956, "creation_date": 1573680956, "question_id": 58845983, "link": "https://stackoverflow.com/questions/58845983/python-package-namespace-prefix-without-creating-blank-directories", "title": "Python package namespace prefix without creating blank directories", "body": "<p>I maintain a Python library that is packaged so that the namespace prefix <code>mycompany.mydivision.productx</code></p>\n\n<p>To achieve this, our source code is stored in directory structure <code>mycompany/mydivision/productx</code> but really the first two directories don't do anything except to create the desired namespace.</p>\n\n<p>Is there an alternate way to get namespace prefixes rather than to create these empty parent directories?\nWe have a lot of legacy code that imports based on this namespace.</p>\n\n<p>We support both Python 2.7 and Python 3 but are migrating to 3 so a Python 3 only solution is fine.</p>\n"}, {"tags": ["python", "macos", "python-imaging-library", "cv2"], "answers": [{"comments": [{"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1573681300, "post_id": 58846038, "comment_id": 103965715, "body": "Thanks for the reply. So there is no way to do it using python?"}, {"owner": {"reputation": 1202, "user_id": 147204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e593ac63e5f25649b701dc25f69d1b7?s=128&d=identicon&r=PG", "display_name": "luis.parravicini", "link": "https://stackoverflow.com/users/147204/luis-parravicini"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1573681344, "post_id": 58846038, "comment_id": 103965736, "body": "You could run <code>xattr</code> and <code>mdls</code> to extract that info from Python if you want."}], "tags": [], "owner": {"reputation": 1202, "user_id": 147204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e593ac63e5f25649b701dc25f69d1b7?s=128&d=identicon&r=PG", "display_name": "luis.parravicini", "link": "https://stackoverflow.com/users/147204/luis-parravicini"}, "is_accepted": true, "score": 1, "last_activity_date": 1573681208, "creation_date": 1573681208, "answer_id": 58846038, "question_id": 58845982, "link": "https://stackoverflow.com/questions/58845982/python-extract-url-where-from-information-of-downloaded-image/58846038#58846038", "title": "Python Extract URL (`where from`) information of downloaded image", "body": "<p>The url from where the file was downloaded is not inside the image itself but as an extended attribute (that is from macOS). See <a href=\"https://superuser.com/questions/214934/how-can-mac-os-x-save-details-about-the-url-from-which-a-file-has-been-downloade\">https://superuser.com/questions/214934/how-can-mac-os-x-save-details-about-the-url-from-which-a-file-has-been-downloade</a></p>\n"}, {"tags": [], "owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "is_accepted": false, "score": 0, "last_activity_date": 1573733721, "creation_date": 1573733721, "answer_id": 58856566, "question_id": 58845982, "link": "https://stackoverflow.com/questions/58845982/python-extract-url-where-from-information-of-downloaded-image/58856566#58856566", "title": "Python Extract URL (`where from`) information of downloaded image", "body": "<p><strong>Just for the record,</strong> I have managed to find a solution to do this within python:</p>\n\n<pre><code>from subprocess import call\nimport os, numpy as np\n\npath = \"/Users//Downloads/photos/\"\nfiles = [f for f in os.listdir(path)]\nn_images = len(files)\n\nfor i in range(n_images):\n    full_file_path = os.path.join(path + files[i])\n    tmp = os.popen(\"mdls -name kMDItemWhereFroms '{}'\".format(full_file_path)).read()\n    ID = tmp.split('file=')[-1].split('.')[0].split('ss')[0]\n    new_name = '/Users//Downloads/photos/' + ID + '.jpeg'\n    call([\"mv\", \"{}\".format(full_file_path), \"{}\".format(new_name)])\n\n</code></pre>\n"}], "owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58846038, "answer_count": 2, "score": 1, "last_activity_date": 1573733789, "creation_date": 1573680956, "last_edit_date": 1573733789, "question_id": 58845982, "link": "https://stackoverflow.com/questions/58845982/python-extract-url-where-from-information-of-downloaded-image", "title": "Python Extract URL (`where from`) information of downloaded image", "body": "<p>I have downloaded an image from a website and I can see manually that the URL from which I have downloaded the image, appears in the image's information dialog window.</p>\n\n<p><strong>I want to use python to extract the last part of this field i.e., <code>0001ss180819.png</code>.</strong></p>\n\n<p>I have tried <code>PIL</code>:</p>\n\n<pre><code>from PIL import Image, ExifTags\n\nimg = Image.open(\"/Users/anonymous/Downloads/figs/image (1).jpeg\")\nexif = { ExifTags.TAGS[k]: v for k, v in img._getexif().items() if k in ExifTags.TAGS }\n</code></pre>\n\n<p><strong>but I cannot manage to get the desired information i.e., <code>where from</code> field as shown below.</strong></p>\n\n<p><strong>My goal is to rename the photos based on this information.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/NmHki.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NmHki.png\" alt=\"on\"></a></p>\n"}, {"tags": ["python", "bloomberg", "quantitative-finance", "blpapi", "pdblp"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 12344903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBltiKdXqhcJyG6M_EKeb2Jt4b_XJYEWTMoTZmYZQ=k-s128", "display_name": "Andrew Bunker", "link": "https://stackoverflow.com/users/12344903/andrew-bunker"}, "edited": false, "score": 0, "creation_date": 1574108273, "post_id": 58871900, "comment_id": 104105922, "body": "thanks - I used ....                                                                                                      tickers = pd.read_csv(&quot;Tick.csv&quot;)                                                                                                                         tickers1=tickers[&#39;ticker&#39;].tolist()                                                                                                                            con.ref(tickers1,[PX_LAST])"}], "tags": [], "owner": {"reputation": 1, "user_id": 9304852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEGwm.png?s=128&g=1", "display_name": "Zoli", "link": "https://stackoverflow.com/users/9304852/zoli"}, "is_accepted": false, "score": 0, "last_activity_date": 1573801540, "creation_date": 1573801540, "answer_id": 58871900, "question_id": 58845966, "link": "https://stackoverflow.com/questions/58845966/how-can-i-use-a-csv-file-for-python-pdblp-instead-of-a-ticker-reference-for-gett/58871900#58871900", "title": "How can I use a CSV file for Python pdblp instead of a ticker reference for getting API from con.ref", "body": "<p>assuming you would want to load all tickers into one df, i think it would look something like this: </p>\n\n<pre><code>df = pd.DataFrame(columns=[\"set your columns\"])\n\nfor ticker in tickers.tickers1:\n   df_tmp = pd.DataFrame()\n   con.ref(ticker,\"PX_LAST\")\n   df_tmp = con.fetch #you'll have to fetch the records into a df\n   df.append(df_tmp) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 12344903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBltiKdXqhcJyG6M_EKeb2Jt4b_XJYEWTMoTZmYZQ=k-s128", "display_name": "Andrew Bunker", "link": "https://stackoverflow.com/users/12344903/andrew-bunker"}, "is_accepted": false, "score": 0, "last_activity_date": 1574108682, "creation_date": 1574108682, "answer_id": 58922382, "question_id": 58845966, "link": "https://stackoverflow.com/questions/58845966/how-can-i-use-a-csv-file-for-python-pdblp-instead-of-a-ticker-reference-for-gett/58922382#58922382", "title": "How can I use a CSV file for Python pdblp instead of a ticker reference for getting API from con.ref", "body": "<p>Ended up using the following .tolist() function, and worked well.</p>\n\n<pre><code>      tickers = pd.read_csv(\"Tick.csv\")                                                                                                                  \n      tickers1=tickers['ticker'].tolist()                                                                                                                     \n      con.ref(tickers1,[PX_LAST])\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 12344903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBltiKdXqhcJyG6M_EKeb2Jt4b_XJYEWTMoTZmYZQ=k-s128", "display_name": "Andrew Bunker", "link": "https://stackoverflow.com/users/12344903/andrew-bunker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574108682, "creation_date": 1573680876, "question_id": 58845966, "link": "https://stackoverflow.com/questions/58845966/how-can-i-use-a-csv-file-for-python-pdblp-instead-of-a-ticker-reference-for-gett", "title": "How can I use a CSV file for Python pdblp instead of a ticker reference for getting API from con.ref", "body": "<p>I very new to Python and I want to replace an exact ticker with a reference to a column of a Data Frame I created from a CVS file, can this be done. i'm using:</p>\n\n<pre><code>import pandas as pd \nimport numpy as np \nimport pdblp as pdblp\nimport blpapi as blp\ncon = pdblp.BCon(debug=False, port=8194, timeout=5000)\ncon.start()\ncon.ref(\"CLF0CLH0 Comdty\",\"PX_LAST\")\ntickers = pd.read_csv(\"Tick.csv\")\n</code></pre>\n\n<p>so \"tickers\" has a colum 'ticker1' which is a list of tickers, i want to replace<br>\n<code>con.ref(\"CLF0CLH0 Comdty\",\"PX_LAST\")</code> with somthing like </p>\n\n<pre><code>con.ref([tickers('ticker1')],\"PX_LAST\")\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["python", "aws-lambda", "timeout", "boto3", "amazon-ses"], "answers": [{"comments": [{"owner": {"reputation": 2116, "user_id": 2378691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/73370cdd42ae37d4183b6ef1a36dde6d?s=128&d=identicon&r=PG", "display_name": "Ido Naveh", "link": "https://stackoverflow.com/users/2378691/ido-naveh"}, "edited": false, "score": 0, "creation_date": 1573685498, "post_id": 58846601, "comment_id": 103967338, "body": "It was my mistake when I added the code to the question. I&#39;ve just changed the endpoint URL to the correct address which is <code>https:&#47;&#47;email.us-east-1.amazonaws.com</code>"}], "tags": [], "owner": {"reputation": 6770, "user_id": 1730461, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/LOpo2.jpg?s=128&g=1", "display_name": "Tomanow", "link": "https://stackoverflow.com/users/1730461/tomanow"}, "is_accepted": false, "score": 1, "last_activity_date": 1573684114, "creation_date": 1573684114, "answer_id": 58846601, "question_id": 58845956, "link": "https://stackoverflow.com/questions/58845956/task-timed-out-when-trying-to-use-ses-sendemail-operation/58846601#58846601", "title": "Task timed out when trying to use SES SendEmail operation", "body": "<p>It looks like your <code>endpoint_url = 'https://dynamodb.us-east-1.amazonaws.com'</code> is pointing to DynamoDB which doesn' seem valid in an SES client. Try removing that:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>ses = boto3.client(\n    'ses', \n    region_name = 'us-east-1',\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1059, "user_id": 3887119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1459d1bf11199ce08729ef31539308?s=128&d=identicon&r=PG&f=1", "display_name": "Gilad S", "link": "https://stackoverflow.com/users/3887119/gilad-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1576684321, "last_edit_date": 1576684321, "creation_date": 1576581686, "answer_id": 59373191, "question_id": 58845956, "link": "https://stackoverflow.com/questions/58845956/task-timed-out-when-trying-to-use-ses-sendemail-operation/59373191#59373191", "title": "Task timed out when trying to use SES SendEmail operation", "body": "<p>I'm having the same issue (but with nodejs).\nI found these answers that may help you, looks like a networking issue of aws.\n<a href=\"https://forums.aws.amazon.com/thread.jspa?threadID=232508\" rel=\"nofollow noreferrer\">https://forums.aws.amazon.com/thread.jspa?threadID=232508</a>\n<a href=\"https://github.com/aws/aws-sdk-js/issues/1451\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-js/issues/1451</a></p>\n\n<p>Edit: The easiest solution for me in a similar situation was to use SNS to invoke another lambda that is not inside a VPC. The second lambda is used to call the SES service. You can create an endpoint for SNS and connect it to the VPC.</p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 3312018, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aad37f2290987f1dad3275e50f22e645?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky", "link": "https://stackoverflow.com/users/3312018/rocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1591112357, "creation_date": 1591112357, "answer_id": 62155756, "question_id": 58845956, "link": "https://stackoverflow.com/questions/58845956/task-timed-out-when-trying-to-use-ses-sendemail-operation/62155756#62155756", "title": "Task timed out when trying to use SES SendEmail operation", "body": "<p>I tried unsuccessfully for a long time to get this to work with a boto3 SES client and just couldn't do it, even after creating an SES endpoint (my lambda is in a VPC). It kept timing out without any other error. In case this helps anyone else, I switched to using smtplib as explained here: <a href=\"https://www.authsmtp.com/python/index.html\" rel=\"nofollow noreferrer\">https://www.authsmtp.com/python/index.html</a>. I don't know if there is a downside to this approach; I only know that it worked for me.</p>\n\n<pre><code>import boto3\nimport json\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\nimport smtplib\n</code></pre>\n\n<p>and then (I have the SES SMTP credentials stored in AWS Secrets Manager):</p>\n\n<pre><code># get SES smtp email credentials from Secrets Manager\nclient2 = boto3.client('secretsmanager')\nresponse = client2.get_secret_value(\nSecretId='secretIDhere'\n)\nsecretDict = json.loads(response['SecretString'])\nsmtpusername = secretDict['username']\nsmtppassword = secretDict['password']\nsmtphost = 'email-smtp.us-east-1.amazonaws.com:25'\n</code></pre>\n\n<p>and finally</p>\n\n<pre><code># send email\nmsg = MIMEMultipart()\nmessage = \"Message text here\"\nmsg['From'] = \"email address here\"\nmsg['To'] = \"email address here\"\nmsg['Subject'] = \"Subject line here\"\nmsg.attach(MIMEText(message, 'plain'))\nserver = smtplib.SMTP(smtphost)\nserver.starttls()\nserver.login(smtpusername, smtppassword)\nserver.sendmail(msg['From'], msg['To'], msg.as_string())\nserver.quit()\n</code></pre>\n"}], "owner": {"reputation": 2116, "user_id": 2378691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/73370cdd42ae37d4183b6ef1a36dde6d?s=128&d=identicon&r=PG", "display_name": "Ido Naveh", "link": "https://stackoverflow.com/users/2378691/ido-naveh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1591112357, "creation_date": 1573680848, "last_edit_date": 1573709923, "question_id": 58845956, "link": "https://stackoverflow.com/questions/58845956/task-timed-out-when-trying-to-use-ses-sendemail-operation", "title": "Task timed out when trying to use SES SendEmail operation", "body": "<p>I'm trying to send an email message using AWS SES with Python 3.7 lambda function.</p>\n\n<p>When I'm trying to test the function and see if it sends the email message, I get a message that the task timed out.\n<br>\nIt reaches to the code part where it sends the message, but the message isn't being sent at any time, and the task just got timeout.</p>\n\n<p>This is the code that I'm using to send the message:</p>\n\n<pre><code>from __future__ import print_function\nimport boto3\nimport json\nimport decimal\nfrom datetime import datetime\nfrom boto3.dynamodb.conditions import Key, Attr\nfrom botocore.exceptions import ClientError\n\nses = boto3.client(\n    'ses', \n    region_name = 'us-east-1', \n    endpoint_url = 'https://email.us-east-1.amazonaws.com'\n)\n\ntry:\n    response = ses.send_email(\n        Destination = {\n            'ToAddresses': [\n                email\n            ],\n        },\n        Message = {\n            'Body': {\n                'Html': {\n                    'Charset': CHARSET,\n                    'Data': BODY_HTML\n                },\n                'Text': {\n                    'Charset': CHARSET,\n                    'Data': BODY_TEXT\n                },\n            },\n            'Subject': {\n                'Charset': CHARSET,\n                'Data': SUBJECT\n            }\n        },\n        Source = SENDER\n    )\nexcept ClientError as e:\n    print(e)\nelse:\n    print('Email sent! Message ID:'),\n    print(response['MessageId'])\n</code></pre>\n\n<p>All of the above variables are hardcoded in the code, and definitely has value (I have printed it to the console to ensure it).</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "comments": [{"owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "edited": false, "score": 0, "creation_date": 1573680971, "post_id": 58845926, "comment_id": 103965564, "body": "For HTML <i>text</i>, that&#39;s correct, otherwise it would be invalid HTML. You need to add the <code>&lt;a&gt;</code> tag as a child element to the <code>&lt;td&gt;</code>, not as text <i>in</i> the <code>&lt;td&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7949454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/odhf5.jpg?s=128&g=1", "display_name": "wblakecannon", "link": "https://stackoverflow.com/users/7949454/wblakecannon"}, "edited": false, "score": 0, "creation_date": 1573682423, "post_id": 58846215, "comment_id": 103966201, "body": "Thanks. My biggest problem is that I just don&#39;t know HTML all that well. Thank you."}], "tags": [], "owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1573682071, "creation_date": 1573682071, "answer_id": 58846215, "question_id": 58845926, "link": "https://stackoverflow.com/questions/58845926/adding-links-with-beautifulsoup-cant-get-past-special-characters/58846215#58846215", "title": "Adding Links with BeautifulSoup. Can&#39;t get past special characters", "body": "<p>Building off of my comment, you need to insert a new tag, not modify the text of <code>&lt;td&gt;</code>:</p>\n\n<pre><code>for elem in soup.find_all('td', class_=['sun', 'mon', 'tues', 'wed', 'thu', 'fri', 'sat']):\n    # Grab the current element text\n    # I got weird behavior where it would always use the last element's string if I didn't do this\n    text = elem.string\n    elem.string = ''\n\n    # Create new tag using \"elem\"'s text\n    new = soup.new_tag('a', href=\"{}.html\".format(text))\n    new.string = text\n\n    # Insert &lt;a&gt; tag\n    elem.append(new)\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>&lt;html&gt;\n &lt;body&gt;\n  &lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"month\"&gt;\n   &lt;tr&gt;\n    &lt;th class=\"month\" colspan=\"7\"&gt;\n     November 2019\n    &lt;/th&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;th class=\"sun\"&gt;\n     Sun\n    &lt;/th&gt;\n    &lt;th class=\"mon\"&gt;\n     Mon\n    &lt;/th&gt;\n    &lt;th class=\"tue\"&gt;\n     Tue\n    &lt;/th&gt;\n    &lt;th class=\"wed\"&gt;\n     Wed\n    &lt;/th&gt;\n    &lt;th class=\"thu\"&gt;\n     Thu\n    &lt;/th&gt;\n    &lt;th class=\"fri\"&gt;\n     Fri\n    &lt;/th&gt;\n    &lt;th class=\"sat\"&gt;\n     Sat\n    &lt;/th&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=\"noday\"&gt;\n    &lt;/td&gt;\n    &lt;td class=\"noday\"&gt;\n    &lt;/td&gt;\n    &lt;td class=\"noday\"&gt;\n    &lt;/td&gt;\n    &lt;td class=\"noday\"&gt;\n    &lt;/td&gt;\n    &lt;td class=\"noday\"&gt;\n    &lt;/td&gt;\n    &lt;td class=\"fri\"&gt;\n     &lt;a href=\"1.html\"&gt;\n      1\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"sat\"&gt;\n     &lt;a href=\"2.html\"&gt;\n      2\n     &lt;/a&gt;\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=\"sun\"&gt;\n     &lt;a href=\"3.html\"&gt;\n      3\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"mon\"&gt;\n     &lt;a href=\"4.html\"&gt;\n      4\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"tue\"&gt;\n     5\n    &lt;/td&gt;\n    &lt;td class=\"wed\"&gt;\n     &lt;a href=\"6.html\"&gt;\n      6\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"thu\"&gt;\n     &lt;a href=\"7.html\"&gt;\n      7\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"fri\"&gt;\n     &lt;a href=\"8.html\"&gt;\n      8\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"sat\"&gt;\n     &lt;a href=\"9.html\"&gt;\n      9\n     &lt;/a&gt;\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=\"sun\"&gt;\n     &lt;a href=\"10.html\"&gt;\n      10\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"mon\"&gt;\n     &lt;a href=\"11.html\"&gt;\n      11\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"tue\"&gt;\n     12\n    &lt;/td&gt;\n    &lt;td class=\"wed\"&gt;\n     &lt;a href=\"13.html\"&gt;\n      13\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"thu\"&gt;\n     &lt;a href=\"14.html\"&gt;\n      14\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"fri\"&gt;\n     &lt;a href=\"15.html\"&gt;\n      15\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"sat\"&gt;\n     &lt;a href=\"16.html\"&gt;\n      16\n     &lt;/a&gt;\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=\"sun\"&gt;\n     &lt;a href=\"17.html\"&gt;\n      17\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"mon\"&gt;\n     &lt;a href=\"18.html\"&gt;\n      18\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"tue\"&gt;\n     19\n    &lt;/td&gt;\n    &lt;td class=\"wed\"&gt;\n     &lt;a href=\"20.html\"&gt;\n      20\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"thu\"&gt;\n     &lt;a href=\"21.html\"&gt;\n      21\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"fri\"&gt;\n     &lt;a href=\"22.html\"&gt;\n      22\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"sat\"&gt;\n     &lt;a href=\"23.html\"&gt;\n      23\n     &lt;/a&gt;\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=\"sun\"&gt;\n     &lt;a href=\"24.html\"&gt;\n      24\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"mon\"&gt;\n     &lt;a href=\"25.html\"&gt;\n      25\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"tue\"&gt;\n     26\n    &lt;/td&gt;\n    &lt;td class=\"wed\"&gt;\n     &lt;a href=\"27.html\"&gt;\n      27\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"thu\"&gt;\n     &lt;a href=\"28.html\"&gt;\n      28\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"fri\"&gt;\n     &lt;a href=\"29.html\"&gt;\n      29\n     &lt;/a&gt;\n    &lt;/td&gt;\n    &lt;td class=\"sat\"&gt;\n     &lt;a href=\"30.html\"&gt;\n      30\n     &lt;/a&gt;\n    &lt;/td&gt;\n   &lt;/tr&gt;\n  &lt;/table&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Your expected output included \"index\" in the <code>href</code> url, but based on your question and sample HTML, I'm not sure where you're expecting that to come from. If you need it, you can just put it into the <code>format</code> call.</p>\n"}], "owner": {"reputation": 5, "user_id": 7949454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/odhf5.jpg?s=128&g=1", "display_name": "wblakecannon", "link": "https://stackoverflow.com/users/7949454/wblakecannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 58846215, "answer_count": 1, "score": 0, "last_activity_date": 1573682071, "creation_date": 1573680674, "last_edit_date": 1592644375, "question_id": 58845926, "link": "https://stackoverflow.com/questions/58845926/adding-links-with-beautifulsoup-cant-get-past-special-characters", "title": "Adding Links with BeautifulSoup. Can&#39;t get past special characters", "body": "<p>I'm am using the Python <code>calendar</code> package to create an HTML calendar, but want each date to be a link since the Python <code>calendar</code> just displays a text date. I am using <code>BeautifulSoup4</code> to find all the elements and replace them with a link. However, when I do this, it changes my greater and less than symbols to <code>&amp;gt;</code> and <code>&amp;lt</code>. I have even tried forcing it with <code>unescape</code> in the <code>html</code> python package. It does the same thing.</p>\n<pre><code>cal = calendar.HTMLCalendar(calendar.SUNDAY)\nsoup = BeautifulSoup(cal.formatmonth(2019, 11))\n</code></pre>\n<p>Creates:</p>\n<pre><code>&lt;html&gt;\n &lt;body&gt;\n  &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; class=&quot;month&quot;&gt;\n   &lt;tr&gt;\n    &lt;th class=&quot;month&quot; colspan=&quot;7&quot;&gt;\n     November 2019\n    &lt;/th&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;th class=&quot;sun&quot;&gt;\n     Sun\n    &lt;/th&gt;\n    &lt;th class=&quot;mon&quot;&gt;\n     Mon\n    &lt;/th&gt;\n    &lt;th class=&quot;tue&quot;&gt;\n     Tue\n    &lt;/th&gt;\n    &lt;th class=&quot;wed&quot;&gt;\n     Wed\n    &lt;/th&gt;\n    &lt;th class=&quot;thu&quot;&gt;\n     Thu\n    &lt;/th&gt;\n    &lt;th class=&quot;fri&quot;&gt;\n     Fri\n    &lt;/th&gt;\n    &lt;th class=&quot;sat&quot;&gt;\n     Sat\n    &lt;/th&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=&quot;noday&quot;&gt;\n    &lt;/td&gt;\n    &lt;td class=&quot;noday&quot;&gt;\n    &lt;/td&gt;\n    &lt;td class=&quot;noday&quot;&gt;\n    &lt;/td&gt;\n    &lt;td class=&quot;noday&quot;&gt;\n    &lt;/td&gt;\n    &lt;td class=&quot;noday&quot;&gt;\n    &lt;/td&gt;\n    &lt;td class=&quot;fri&quot;&gt;\n     1\n    &lt;/td&gt;\n    &lt;td class=&quot;sat&quot;&gt;\n     2\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=&quot;sun&quot;&gt;\n     3\n    &lt;/td&gt;\n    &lt;td class=&quot;mon&quot;&gt;\n     4\n    &lt;/td&gt;\n    &lt;td class=&quot;tue&quot;&gt;\n     5\n    &lt;/td&gt;\n    &lt;td class=&quot;wed&quot;&gt;\n     6\n    &lt;/td&gt;\n    &lt;td class=&quot;thu&quot;&gt;\n     7\n    &lt;/td&gt;\n    &lt;td class=&quot;fri&quot;&gt;\n     8\n    &lt;/td&gt;\n    &lt;td class=&quot;sat&quot;&gt;\n     9\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=&quot;sun&quot;&gt;\n     10\n    &lt;/td&gt;\n    &lt;td class=&quot;mon&quot;&gt;\n     11\n    &lt;/td&gt;\n    &lt;td class=&quot;tue&quot;&gt;\n     12\n    &lt;/td&gt;\n    &lt;td class=&quot;wed&quot;&gt;\n     13\n    &lt;/td&gt;\n    &lt;td class=&quot;thu&quot;&gt;\n     14\n    &lt;/td&gt;\n    &lt;td class=&quot;fri&quot;&gt;\n     15\n    &lt;/td&gt;\n    &lt;td class=&quot;sat&quot;&gt;\n     16\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=&quot;sun&quot;&gt;\n     17\n    &lt;/td&gt;\n    &lt;td class=&quot;mon&quot;&gt;\n     18\n    &lt;/td&gt;\n    &lt;td class=&quot;tue&quot;&gt;\n     19\n    &lt;/td&gt;\n    &lt;td class=&quot;wed&quot;&gt;\n     20\n    &lt;/td&gt;\n    &lt;td class=&quot;thu&quot;&gt;\n     21\n    &lt;/td&gt;\n    &lt;td class=&quot;fri&quot;&gt;\n     22\n    &lt;/td&gt;\n    &lt;td class=&quot;sat&quot;&gt;\n     23\n    &lt;/td&gt;\n   &lt;/tr&gt;\n   &lt;tr&gt;\n    &lt;td class=&quot;sun&quot;&gt;\n     24\n    &lt;/td&gt;\n    &lt;td class=&quot;mon&quot;&gt;\n     25\n    &lt;/td&gt;\n    &lt;td class=&quot;tue&quot;&gt;\n     26\n    &lt;/td&gt;\n    &lt;td class=&quot;wed&quot;&gt;\n     27\n    &lt;/td&gt;\n    &lt;td class=&quot;thu&quot;&gt;\n     28\n    &lt;/td&gt;\n    &lt;td class=&quot;fri&quot;&gt;\n     29\n    &lt;/td&gt;\n    &lt;td class=&quot;sat&quot;&gt;\n     30\n    &lt;/td&gt;\n   &lt;/tr&gt;\n  &lt;/table&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>So here I try to replace the text strings with links:</p>\n<pre><code>for elem in soup.find_all('td', class_=['sun', 'mon', 'tues', 'wed', 'thu', 'fri', 'sat']):\n    elem.string = '&lt;a href=&quot;{}.html&quot;&gt;'.format(elem.string) + elem.string + '&lt;/a&gt;'\n</code></pre>\n<p>Which creates:</p>\n<pre><code>&lt;bound method Tag.prettify of &lt;html&gt;&lt;body&gt;&lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; class=&quot;month&quot;&gt;\n&lt;tr&gt;&lt;th class=&quot;month&quot; colspan=&quot;7&quot;&gt;November 2019&lt;/th&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th class=&quot;sun&quot;&gt;Sun&lt;/th&gt;&lt;th class=&quot;mon&quot;&gt;Mon&lt;/th&gt;&lt;th class=&quot;tue&quot;&gt;Tue&lt;/th&gt;&lt;th class=&quot;wed&quot;&gt;Wed&lt;/th&gt;&lt;th class=&quot;thu&quot;&gt;Thu&lt;/th&gt;&lt;th class=&quot;fri&quot;&gt;Fri&lt;/th&gt;&lt;th class=&quot;sat&quot;&gt;Sat&lt;/th&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td class=&quot;noday&quot;&gt; &lt;/td&gt;&lt;td class=&quot;noday&quot;&gt; &lt;/td&gt;&lt;td class=&quot;noday&quot;&gt; &lt;/td&gt;&lt;td class=&quot;noday&quot;&gt; &lt;/td&gt;&lt;td class=&quot;noday&quot;&gt; &lt;/td&gt;&lt;td class=&quot;fri&quot;&gt;&amp;lt;a href=&quot;1.html&quot;&amp;gt;1&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;sat&quot;&gt;&amp;lt;a href=&quot;2.html&quot;&amp;gt;2&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td class=&quot;sun&quot;&gt;&amp;lt;a href=&quot;3.html&quot;&amp;gt;3&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;mon&quot;&gt;&amp;lt;a href=&quot;4.html&quot;&amp;gt;4&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;tue&quot;&gt;5&lt;/td&gt;&lt;td class=&quot;wed&quot;&gt;&amp;lt;a href=&quot;6.html&quot;&amp;gt;6&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;thu&quot;&gt;&amp;lt;a href=&quot;7.html&quot;&amp;gt;7&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;fri&quot;&gt;&amp;lt;a href=&quot;8.html&quot;&amp;gt;8&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;sat&quot;&gt;&amp;lt;a href=&quot;9.html&quot;&amp;gt;9&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td class=&quot;sun&quot;&gt;&amp;lt;a href=&quot;10.html&quot;&amp;gt;10&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;mon&quot;&gt;&amp;lt;a href=&quot;11.html&quot;&amp;gt;11&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;tue&quot;&gt;12&lt;/td&gt;&lt;td class=&quot;wed&quot;&gt;&amp;lt;a href=&quot;13.html&quot;&amp;gt;13&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;thu&quot;&gt;&amp;lt;a href=&quot;14.html&quot;&amp;gt;14&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;fri&quot;&gt;&amp;lt;a href=&quot;15.html&quot;&amp;gt;15&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;sat&quot;&gt;&amp;lt;a href=&quot;16.html&quot;&amp;gt;16&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td class=&quot;sun&quot;&gt;&amp;lt;a href=&quot;17.html&quot;&amp;gt;17&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;mon&quot;&gt;&amp;lt;a href=&quot;18.html&quot;&amp;gt;18&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;tue&quot;&gt;19&lt;/td&gt;&lt;td class=&quot;wed&quot;&gt;&amp;lt;a href=&quot;20.html&quot;&amp;gt;20&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;thu&quot;&gt;&amp;lt;a href=&quot;21.html&quot;&amp;gt;21&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;fri&quot;&gt;&amp;lt;a href=&quot;22.html&quot;&amp;gt;22&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;sat&quot;&gt;&amp;lt;a href=&quot;23.html&quot;&amp;gt;23&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td class=&quot;sun&quot;&gt;&amp;lt;a href=&quot;24.html&quot;&amp;gt;24&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;mon&quot;&gt;&amp;lt;a href=&quot;25.html&quot;&amp;gt;25&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;tue&quot;&gt;26&lt;/td&gt;&lt;td class=&quot;wed&quot;&gt;&amp;lt;a href=&quot;27.html&quot;&amp;gt;27&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;thu&quot;&gt;&amp;lt;a href=&quot;28.html&quot;&amp;gt;28&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;fri&quot;&gt;&amp;lt;a href=&quot;29.html&quot;&amp;gt;29&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;td class=&quot;sat&quot;&gt;&amp;lt;a href=&quot;30.html&quot;&amp;gt;30&amp;lt;/a&amp;gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/body&gt;&lt;/html&gt;&gt;\n</code></pre>\n<p>How do I get <code>BeautifulSoup4</code> to actually put in a link?</p>\n<h2>Intended Result:</h2>\n<pre><code>&lt;tr&gt;\n    &lt;td class=&quot;sun&quot;&gt;\n     &lt;a href=&quot;3.index.html&quot;&gt;3&lt;/a&gt;\n    &lt;/td&gt;\n&lt;&lt;&lt;etc&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "file"], "comments": [{"owner": {"reputation": 838, "user_id": 10552640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29ea973ff7557ba6510ef47518c9051?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/10552640/gary"}, "edited": false, "score": 0, "creation_date": 1573682096, "post_id": 58845907, "comment_id": 103966065, "body": "what is the output that you are expecting ?"}, {"owner": {"reputation": 3, "user_id": 12367784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGIXnknRz6o_q1ojvwCuR5XjCtoA0MesX7d0tssA=k-s128", "display_name": "Aono", "link": "https://stackoverflow.com/users/12367784/aono"}, "reply_to_user": {"reputation": 838, "user_id": 10552640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29ea973ff7557ba6510ef47518c9051?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/10552640/gary"}, "edited": false, "score": 0, "creation_date": 1573682291, "post_id": 58845907, "comment_id": 103966148, "body": "@Gary [&quot;hello test&quot;, &quot;C&quot;, &quot;[&#39;Gore&#39;, &#39;Family&#39;]&quot;, &quot;3.4&quot;, &quot;Actor&quot;, &quot;[&#39;Cesar&#39;, &#39;Mile&#39;]&quot;, &quot;1&quot;]"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12367784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGIXnknRz6o_q1ojvwCuR5XjCtoA0MesX7d0tssA=k-s128", "display_name": "Aono", "link": "https://stackoverflow.com/users/12367784/aono"}, "edited": false, "score": 0, "creation_date": 1573685308, "post_id": 58846609, "comment_id": 103967280, "body": "That just adds each line into a list. What im trying to do is split each argument in the line so I can edit individually."}], "tags": [], "owner": {"reputation": 3, "user_id": 12246983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c22eafd3866ffb78a8503cd2f6f030e?s=128&d=identicon&r=PG&f=1", "display_name": "Infeamous99", "link": "https://stackoverflow.com/users/12246983/infeamous99"}, "is_accepted": false, "score": -1, "last_activity_date": 1573684152, "creation_date": 1573684152, "answer_id": 58846609, "question_id": 58845907, "link": "https://stackoverflow.com/questions/58845907/how-to-split-a-string-containing-more-than-one-list-python/58846609#58846609", "title": "how to split a string containing more than one list? python", "body": "<p>I think it will help your problem.</p>\n\n<pre><code>Basetext = open(\"LAB3.txt\", \"r\")\nlistfortext = []\nfor line in Basetext:\n    listfortext.append(line.split())\nBasetext.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 6605594, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074258289321174/picture?type=large", "display_name": "nad_rom", "link": "https://stackoverflow.com/users/6605594/nad-rom"}, "is_accepted": true, "score": 0, "last_activity_date": 1573686011, "last_edit_date": 1573686011, "creation_date": 1573685353, "answer_id": 58846820, "question_id": 58845907, "link": "https://stackoverflow.com/questions/58845907/how-to-split-a-string-containing-more-than-one-list-python/58846820#58846820", "title": "how to split a string containing more than one list? python", "body": "<pre class=\"lang-py prettyprint-override\"><code>s = \"hello test, C, ['Gore', 'Family'], 3.4, Actor, ['Cesar', 'Mile'], 1\"\n\nsplitted = re.split(r', (?!\\')', s)\n</code></pre>\n\n<p>This will split the line on <code>,</code>(comma and space) only if there is no single-quote <code>'</code> after slit expression. More about lookahead syntax: <a href=\"https://docs.python.org/3/library/re.html#index-21\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/re.html#index-21</a></p>\n\n<p>Output:</p>\n\n<pre><code>['hello test',\n 'C',\n \"['Gore', 'Family']\",\n '3.4',\n 'Actor',\n \"['Cesar', 'Mile']\",\n '1']\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12367784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGIXnknRz6o_q1ojvwCuR5XjCtoA0MesX7d0tssA=k-s128", "display_name": "Aono", "link": "https://stackoverflow.com/users/12367784/aono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 58846820, "answer_count": 2, "score": 0, "last_activity_date": 1573686011, "creation_date": 1573680581, "last_edit_date": 1573683175, "question_id": 58845907, "link": "https://stackoverflow.com/questions/58845907/how-to-split-a-string-containing-more-than-one-list-python", "title": "how to split a string containing more than one list? python", "body": "<p>Hi Im having trouble while reading a file and trying to split a string that has 2 lists.</p>\n\n<p>I have this string in the file text:</p>\n\n<p><strong>BaseDeDatos.txt:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>hello test, C, ['Gore', 'Family'], 3.4, Actor, ['Cesar', 'Mile'], 1\n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open('BaseDeDatos.txt', 'r') as data:\n        peli = data.readlines()[int(modificar_peli)-1]\n        selec_final = [ast.literal_eval(i) if i.startswith('[') else int(i) if re.findall('^\\\\d+$', i) else i for i in re.split(',\\s*', peli)]\n</code></pre>\n\n<p>As suggested from another question: <a href=\"https://stackoverflow.com/questions/47481361/python-split-a-string-containing-a-list\">question</a> I tried using <code>ast.literal_eval()</code> but im getting this error:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>return compile(source, filename, mode, flags,  File \"&lt;unknown&gt;\", line 1\n    ['Gore'\n          ^\nSyntaxError: unexpected EOF while parsing\n</code></pre>\n\n<p><strong>Output Expected:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[\"hello test\", \"C\", \"['Gore', 'Family']\", \"3.4\", \"Actor\", \"['Cesar', 'Mile']\", \"1\"] \n</code></pre>\n\n<p>If it helps I tried using the same code when I had only 1 list and it split it perfectly. </p>\n\n<p>Any help is appreciated :)</p>\n"}, {"tags": ["python", "python-3.x", "url", "beautifulsoup", "urllib"], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 9908952, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rbvcro96lIw/AAAAAAAAAAI/AAAAAAAAAAA/qiUZRO7icZo/photo.jpg?sz=128", "display_name": "DBA108642", "link": "https://stackoverflow.com/users/9908952/dba108642"}, "is_accepted": true, "score": 0, "last_activity_date": 1573688290, "last_edit_date": 1573688290, "creation_date": 1573680645, "answer_id": 58845919, "question_id": 58845859, "link": "https://stackoverflow.com/questions/58845859/how-to-copy-all-text-from-an-url-to-the-clipboard-using-python/58845919#58845919", "title": "How to copy all text from an URL to the clipboard using Python?", "body": "<p>Try the package <a href=\"https://pypi.org/project/pyperclip/\" rel=\"nofollow noreferrer\">Pyperclip</a>. Here's an example from their site</p>\n\n<pre><code>import pyperclip\npyperclip.copy('The text to be copied to the clipboard.')\nspam = pyperclip.paste()\n</code></pre>\n\n<p>If you have a variable that stores the URL you can sub that in for the argument in copy. Installation:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>pip install pyperclip\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1573682384, "creation_date": 1573682384, "answer_id": 58846276, "question_id": 58845859, "link": "https://stackoverflow.com/questions/58845859/how-to-copy-all-text-from-an-url-to-the-clipboard-using-python/58846276#58846276", "title": "How to copy all text from an URL to the clipboard using Python?", "body": "<p><a href=\"https://pypi.org/project/clipboard/\" rel=\"nofollow noreferrer\">clipboard</a>  is cross platform (Linux, Mac &amp; Windows), i.e.:</p>\n\n<p>Install:</p>\n\n<pre><code>pip install clipboard\n</code></pre>\n\n<hr>\n\n<p>Usage:  </p>\n\n<pre><code>import clipboard\nclipboard.copy(\"abc\")  # put \"abc\" on clipboard\ncb_text = clipboard.paste()  # get clipboard content\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 12138116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75870c6be91fb5edc7cef704732c422?s=128&d=identicon&r=PG&f=1", "display_name": "Gaddz", "link": "https://stackoverflow.com/users/12138116/gaddz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 58845919, "answer_count": 2, "score": 1, "last_activity_date": 1573688290, "creation_date": 1573680329, "question_id": 58845859, "link": "https://stackoverflow.com/questions/58845859/how-to-copy-all-text-from-an-url-to-the-clipboard-using-python", "title": "How to copy all text from an URL to the clipboard using Python?", "body": "<p>I want to make a script that copies all the text from an URL to the clipboard. I have tried to find a solution here, and on other forums, but I have not found anything that answers the question. I am pretty new to Python, so its hard to figure out by myself.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 1, "creation_date": 1573680525, "post_id": 58845796, "comment_id": 103965379, "body": "<code>for line in words: lst += line.split(&#39; &#39;)</code> ? you definately don&#39;t want to be appending <code>words</code> here"}, {"owner": {"reputation": 219, "user_id": 9843311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b937a6f203853bc7c6a5894fe81741?s=128&d=identicon&r=PG&f=1", "display_name": "F. Serna", "link": "https://stackoverflow.com/users/9843311/f-serna"}, "edited": false, "score": 0, "creation_date": 1573680643, "post_id": 58845796, "comment_id": 103965442, "body": "Are you saying that the resulting list is not in the same order left to right as the words in romeo.txt?"}, {"owner": {"reputation": 83, "user_id": 12100701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c7ac360e6f1df11b79c1e167f707f3?s=128&d=identicon&r=PG&f=1", "display_name": "MATT_BOOTY", "link": "https://stackoverflow.com/users/12100701/matt-booty"}, "reply_to_user": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1573692305, "post_id": 58845796, "comment_id": 103968994, "body": "@chris_rands but why not?"}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 9908952, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rbvcro96lIw/AAAAAAAAAAI/AAAAAAAAAAA/qiUZRO7icZo/photo.jpg?sz=128", "display_name": "DBA108642", "link": "https://stackoverflow.com/users/9908952/dba108642"}, "is_accepted": false, "score": 0, "last_activity_date": 1573680345, "creation_date": 1573680345, "answer_id": 58845864, "question_id": 58845796, "link": "https://stackoverflow.com/questions/58845796/the-nature-of-lists-in-python-why-do-i-get-a-repeating-list/58845864#58845864", "title": "The nature of lists in python, why do I get a repeating list?", "body": "<p>Not sure what the actual question is, but if you want to have something like a list that doesn't allow duplicates, the datatype you want is a set. Sets don't allow duplicates so if you try to add a string to a set that's already there it will just skip it. Try initializing sets instead of lists Just a heads up as well you can initialize blank lists like this: </p>\n\n<pre><code>lst = []\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1488, "user_id": 102476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7daec2f9052c7c1690422d0d74c3b7d?s=128&d=identicon&r=PG", "display_name": "Joe Germuska", "link": "https://stackoverflow.com/users/102476/joe-germuska"}, "is_accepted": false, "score": 1, "last_activity_date": 1573747695, "last_edit_date": 1573747695, "creation_date": 1573680441, "answer_id": 58845881, "question_id": 58845796, "link": "https://stackoverflow.com/questions/58845796/the-nature-of-lists-in-python-why-do-i-get-a-repeating-list/58845881#58845881", "title": "The nature of lists in python, why do I get a repeating list?", "body": "<p>Python lists are not expected to be unique. They preserve the order in which things were inserted. If you want the unique set of words, use Python <a href=\"https://docs.python.org/3/library/stdtypes.html#set\" rel=\"nofollow noreferrer\"><code>set</code></a>. You can create a set by passing a list to it, as in changing your last line to </p>\n\n<p><code>print(set(lst))</code></p>\n\n<p>or you can create an empty set and then add words to it as you come across them, something like this:</p>\n\n<pre><code>s = set()\n...\nfor... :\n  s.update(words.split(' '))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1573683140, "post_id": 58846211, "comment_id": 103966467, "body": "We spotted the real problem at the same time but you were 1. faster and 2. your explanation is way better than mine... +1  (but i suggest that you add a recipe for using a <code>set</code> to perform the task)"}, {"owner": {"reputation": 7055, "user_id": 10987432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wt3JW.png?s=128&g=1", "display_name": "Paul M.", "link": "https://stackoverflow.com/users/10987432/paul-m"}, "reply_to_user": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1573683748, "post_id": 58846211, "comment_id": 103966704, "body": "@gboffi, Thank you! I realize that when the OP says &quot;Instead of giving me a list of words only appearing once&quot;, it does sound like they want a set. However, I&#39;m not convinced that this is how the OP&#39;s phrasing is meant to be interpreted. We don&#39;t know what their Coursera assignment was asking for (at least I don&#39;t), and I can&#39;t glean any attempt by the OP to retain only unique words just by looking at their code. Perhaps what they meant was, in the context of an absurdly long list, they were expecting the list of all words printed once (OP: If my assumption is wrong look at gboffi&#39;s answer)."}, {"owner": {"reputation": 83, "user_id": 12100701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c7ac360e6f1df11b79c1e167f707f3?s=128&d=identicon&r=PG&f=1", "display_name": "MATT_BOOTY", "link": "https://stackoverflow.com/users/12100701/matt-booty"}, "edited": false, "score": 0, "creation_date": 1573706008, "post_id": 58846211, "comment_id": 103971960, "body": "Wait, you&#39;re saying that I&#39;m iterating over letters and not words???? Which means that every time I get a hit, I&#39;m putting the word onto the list??? OH LORDY LORDY LORD!!!!"}], "tags": [], "owner": {"reputation": 7055, "user_id": 10987432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wt3JW.png?s=128&g=1", "display_name": "Paul M.", "link": "https://stackoverflow.com/users/10987432/paul-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1573682069, "creation_date": 1573682069, "answer_id": 58846211, "question_id": 58845796, "link": "https://stackoverflow.com/questions/58845796/the-nature-of-lists-in-python-why-do-i-get-a-repeating-list/58846211#58846211", "title": "The nature of lists in python, why do I get a repeating list?", "body": "<p>Initially you said:</p>\n\n<pre><code>words = ''\n</code></pre>\n\n<p>Ok. So <code>words</code> is a string.\nThen, you said:</p>\n\n<pre><code>for line in fh:\n    words += line.strip(' ')\n</code></pre>\n\n<p>For every line in the file, strip spaces from the current line and append it to <code>words</code>. Each iteration you are appending to your <code>words</code> string. When the loop is done, <code>words</code> will be one giant string.</p>\n\n<p>Then, you said:</p>\n\n<pre><code>words = words.replace('\\n', ' ')\n</code></pre>\n\n<p>Ok. <code>words</code> is still a string. All you've done is replace all newline characters with spaces.</p>\n\n<p>Then, you said:</p>\n\n<pre><code>for line in words:\n    lst += words.split(' ')\n</code></pre>\n\n<p><code>line</code> in this case, is not a good name for this temporary variable, since you are not iterating over the lines anymore. Your iterable is <code>words</code>, which is a string. When you iterate over a string, you get individual characters, not lines:</p>\n\n<pre><code>&gt;&gt;&gt; for line in \"abcdefg\":\n    print(line)\n\n\na\nb\nc\nd\ne\nf\ng\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Just because I'm calling the temporary variable <code>line</code>, doesn't mean that that's what it actually is. I could have called it anything and I still would have received the same output. A better name for this variable, therefore, would be <code>char</code>, for example.</p>\n\n<p>Back to your snippet, since you are iterating over the characters in your <code>words</code> string, you are extending your <code>list</code> with the result of <code>words.split(' ')</code>, once for every character! I don't need to see your input file to know that that's a gigantic list. The number of strings in your <code>lst</code> list will be approximately equal to the number of words in the file multiplied by the number of characters in the file.</p>\n"}], "owner": {"reputation": 83, "user_id": 12100701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c7ac360e6f1df11b79c1e167f707f3?s=128&d=identicon&r=PG&f=1", "display_name": "MATT_BOOTY", "link": "https://stackoverflow.com/users/12100701/matt-booty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1573747695, "creation_date": 1573680087, "question_id": 58845796, "link": "https://stackoverflow.com/questions/58845796/the-nature-of-lists-in-python-why-do-i-get-a-repeating-list", "title": "The nature of lists in python, why do I get a repeating list?", "body": "<p>So, I was writing a program for an assignment on Coursera, I solved it but I got some unintended behavior.\nThe following code with the input of romeo.txt:</p>\n\n<pre><code>fname = input(\"Enter file name: \")\nfh = open(fname, 'r')\nlst = list()\nwords = ''\nfin = list()\nfor line in fh:\n    words += line.strip(' ')\n\nwords = words.replace('\\n', ' ')\n\nfor line in words:\n    lst += words.split(' ')\nprint(lst)\n\n</code></pre>\n\n<p>Instead of giving me a list of words only appearing once, it gives me every word, but repeated an unknown number of times.</p>\n\n<pre><code>Gives me a huge list\nof repeating words: ['But', 'soft', 'what', 'light', 'through', 'yonder', 'window', 'breaks', 'It', 'is', 'the', 'east', 'and', 'Juliet', 'is', 'the', 'sun', 'Arise', 'fair', 'sun', 'and', 'kill', 'the', 'envious', 'moon', 'Who', 'is', 'already', 'sick', 'and', 'pale', 'with', 'grief', 'But', 'soft', 'what', 'light', 'through', 'yonder', 'window', 'breaks', 'It', 'is', 'the', 'east', 'and', 'Juliet', 'is', 'the', 'sun', 'Arise', 'fair', 'sun', 'and', 'kill', 'the', 'envious', 'moon', 'Who', 'is', 'already', 'sick', 'and', 'pale', 'with', 'grief', 'But', 'soft', 'what', 'light', 'through', 'yonder', 'window', 'breaks', 'It', 'is', 'the', 'east', 'and', 'Juliet', 'is', 'the', 'sun', 'Arise', 'fair', 'sun', 'and', 'kill', 'the', 'envious', 'moon', 'Who', 'is', 'already', 'sick', 'and', 'pale', 'with', 'grief', 'But', 'soft', 'what', 'light', 'through', 'yonder', 'window', 'breaks', 'It', 'is', 'the', 'east', 'and', 'Juliet', 'is', 'the', 'sun', 'Arise', 'fair', 'sun' . . . ., \n</code></pre>\n\n<p>The words repeat SO much more than that.</p>\n"}, {"tags": ["python", "tensorflow", "conv-neural-network"], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 10932997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zXY4qtoW8xE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb6T1XvFo1c_coLAaNO992EaTMw5g/mo/photo.jpg?sz=128", "display_name": "Prachi ", "link": "https://stackoverflow.com/users/10932997/prachi"}, "is_accepted": true, "score": 0, "last_activity_date": 1573685000, "creation_date": 1573685000, "answer_id": 58846759, "question_id": 58845793, "link": "https://stackoverflow.com/questions/58845793/batch-normalization-in-tensorflow-2-0-makes-prediction-results-worse/58846759#58846759", "title": "Batch Normalization in tensorflow 2.0 makes prediction results worse", "body": "<p>This <a href=\"https://stats.stackexchange.com/questions/361700/lack-of-batch-normalization-before-last-fully-connected-layer\">link</a> could help you understand.</p>\n\n<p>Please note - Dense layer is a FC layer which is further used for predictions, there is no need to standardise its outputs.\nStandardisation and hence batchnorm is useful when there is a large variation in the input data (also called as covariate shift) which further creates an imbalanced input data for further CNN layers.</p>\n"}], "owner": {"reputation": 85, "user_id": 12347331, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZRxEhyKGzv4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcFijzzf5SvpruW-cZbDwrfhM7LhA/photo.jpg?sz=128", "display_name": "LiverToll92", "link": "https://stackoverflow.com/users/12347331/livertoll92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 58846759, "answer_count": 1, "score": 1, "last_activity_date": 1573729976, "creation_date": 1573680080, "last_edit_date": 1573729976, "question_id": 58845793, "link": "https://stackoverflow.com/questions/58845793/batch-normalization-in-tensorflow-2-0-makes-prediction-results-worse", "title": "Batch Normalization in tensorflow 2.0 makes prediction results worse", "body": "<p>I have built a CNN with the following architecture:</p>\n\n<pre><code>X = self.conv_layer_1(inputs)\nX = self.conv_layer_2(X)\nX = self.max_pool_1(X)\nX = self.dropout_1(X,training = training)\nX = self.batch_norm_1(X,training = training)\n\nX = self.conv_layer_3(X)\nX = self.conv_layer_4(X)\nX = self.max_pool_2(X)\nX = self.dropout_2(X,training = training)\nX = self.batch_norm_2(X,training = training)\n\nX = self.flatten(X)\nX = self.dense_1(X)\nX = self.batch_norm_3(X,training = training)\nX = self.dropout_3(X)\nX = self.softmax(X)\n\nreturn X\n</code></pre>\n\n<p>If I don't use a batch_normalization layers, I am getting good accuracy (train 95%, test 79 %).  If I use only <code>self.batch_norm_3</code>, then the result is getting worse and from time to time, on test sets, the loss increases dramatically (like every 3-4 epochs it goes from 1.23123 to 500000).</p>\n\n<p>If I use <code>self.batch_norm_1</code> and/or <code>self.batch_norm_2</code>, I always get an accuracy of 10% test and train).</p>\n\n<p>Why is this happening?</p>\n\n<p>I have used the CIFAR-10 dataset.  </p>\n"}, {"tags": ["python", "json", "xml", "avro"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12169033, "user_type": "registered", "profile_image": "https://graph.facebook.com/2174106716028030/picture?type=large", "display_name": "kamco", "link": "https://stackoverflow.com/users/12169033/kamco"}, "edited": false, "score": 0, "creation_date": 1573749917, "post_id": 58848382, "comment_id": 103994523, "body": "Yes this works, but it adds the new dictonary value to the end of the file. I need to do this action with all attributes if I want to save the structure of the XML. Thank you, you helped me!"}], "tags": [], "owner": {"reputation": 929, "user_id": 3480910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100003256248995/picture?type=large", "display_name": "adrianp", "link": "https://stackoverflow.com/users/3480910/adrianp"}, "is_accepted": true, "score": 1, "last_activity_date": 1573697526, "creation_date": 1573697526, "answer_id": 58848382, "question_id": 58845785, "link": "https://stackoverflow.com/questions/58845785/convert-xml-to-json-or-avro-in-python/58848382#58848382", "title": "convert XML to JSON or Avro (in python)", "body": "<p><code>type(doc)</code> is an ordered dictionary. Therefore, you can modify individual keys before converting it to a json file. For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import xmltodict\nimport json\n\nwith open('xmlskuska.xml') as fd:\n    doc = xmltodict.parse(fd.read())\n\n# Get the old value for cbc:ID and assign it to ID\ndoc['Invoice']['ID'] = doc['Invoice'].pop('cbc:ID')\n\napp_json = json.dumps(doc)\nprint(app_json)\n\nwith open('skuska.txt', 'w') as json_file:\n    json.dump(doc, json_file)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12169033, "user_type": "registered", "profile_image": "https://graph.facebook.com/2174106716028030/picture?type=large", "display_name": "kamco", "link": "https://stackoverflow.com/users/12169033/kamco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 58848382, "answer_count": 1, "score": 0, "last_activity_date": 1573697526, "creation_date": 1573680039, "question_id": 58845785, "link": "https://stackoverflow.com/questions/58845785/convert-xml-to-json-or-avro-in-python", "title": "convert XML to JSON or Avro (in python)", "body": "<p>I am trying to convert XML to JSON or Avro schema in python.</p>\n\n<p>Do you have any suggestions?</p>\n\n<p>I tried already this code:</p>\n\n<pre><code>    import xmltodict\n    import json\n\n    with open('xmlskuska.xml') as fd:\n         doc = xmltodict.parse(fd.read())\n\n    app_json = json.dumps(doc)\n    print(app_json)\n\n    with open('skuska.txt', 'w') as json_file:\n         json.dump(doc, json_file)\n</code></pre>\n\n<p>The thing is that I want to rename those attributes names during conversion.\nThis is my XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Invoice xmlns=\"urn:oasis:names:specification:ubl:schema:xsd:Invoice-2\"\n    xmlns:cac=\"urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2\"\n    xmlns:cbc=\"urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2\"&gt;\n    &lt;cbc:ID&gt;TOSL108&lt;/cbc:ID&gt;\n    &lt;cbc:IssueDate&gt;2009-12-15&lt;/cbc:IssueDate&gt;\n    &lt;cac:OrderReference&gt;\n        &lt;cbc:ID&gt;123&lt;/cbc:ID&gt;\n    &lt;/cac:OrderReference&gt;\n    &lt;cac:InvoiceLine&gt;\n        &lt;cac:Price&gt;\n            &lt;cbc:PriceAmount currencyID=\"EUR\"&gt;0.75&lt;/cbc:PriceAmount&gt;\n            &lt;cbc:BaseQuantity unitCode=\"C62\"&gt;1&lt;/cbc:BaseQuantity&gt;\n        &lt;/cac:Price&gt;\n    &lt;/cac:InvoiceLine&gt;\n&lt;/Invoice&gt;\n</code></pre>\n\n<p>For example, i want to rename attribute cbc:ID to just ID.\nDo you have any suggestions how to make this conversion which I want with a nice JSON or better Avro output??</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "edited": false, "score": 2, "creation_date": 1573680162, "post_id": 58845784, "comment_id": 103965214, "body": "You have a <code>while True:</code> that will run forever. What is the ideal solution?"}, {"owner": {"reputation": 1784, "user_id": 6917446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDXFS.gif?s=128&g=1", "display_name": "kosist", "link": "https://stackoverflow.com/users/6917446/kosist"}, "edited": false, "score": 0, "creation_date": 1573680500, "post_id": 58845784, "comment_id": 103965372, "body": "If you would like to stop <code>while True</code> loop (which will run forever), then there should be inner condition which will do <code>break</code>. Otherwise, loop will never stop."}, {"owner": {"reputation": 3, "user_id": 7572148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234d26392008be2d38ffd1fb58ff3c7?s=128&d=identicon&r=PG&f=1", "display_name": "Aberdeen ", "link": "https://stackoverflow.com/users/7572148/aberdeen"}, "edited": false, "score": 0, "creation_date": 1573680595, "post_id": 58845784, "comment_id": 103965416, "body": "Main goal is to send &#39;usrname&#39; i.e. Mum every time she replies on our group chat. if I take while True: out,  the program stop and doesn&#39;t reply to future messages."}], "owner": {"reputation": 3, "user_id": 7572148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234d26392008be2d38ffd1fb58ff3c7?s=128&d=identicon&r=PG&f=1", "display_name": "Aberdeen ", "link": "https://stackoverflow.com/users/7572148/aberdeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573680030, "creation_date": 1573680030, "question_id": 58845784, "link": "https://stackoverflow.com/questions/58845784/whatsapp-message-automated-reply", "title": "Whatsapp message automated reply", "body": "<p>I am trying to create automate a reply on whatsappweb every-time a selected person messages me. Every time i run the code it doesn't stop</p>\n\n<pre><code>user = driver.find_element_by_xpath(f'//span[@title = \"{name}\"]')\nuser.click()\nusrname = 'Mum'\nmsg_box = driver.find_element_by_class_name('_13mgZ')\nkiki = \"\"\n##while True:\n##   if kiki != None:\n##       break\n\nkiki = wait.until(EC.presence_of_element_located((By.XPATH(f\"//span[.='{usrname}']\"))))\n\nkiki = driver.find_element_by_xpath(f\"//span[.='{usrname}']\")\nwhile True:\n    if kiki == driver.find_element_by_xpath(f\"//span[.='{usrname}']\"):\n            for i in range(count):\n\n                msg_box.send_keys(msg)\n                driver.find_element_by_class_name('_3M-N-').click()\n                time.sleep(2)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "asynchronous", "python-asyncio", "python-requests-html"], "answers": [{"tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": true, "score": 1, "last_activity_date": 1573720965, "last_edit_date": 1573720965, "creation_date": 1573685276, "answer_id": 58846808, "question_id": 58845758, "link": "https://stackoverflow.com/questions/58845758/how-do-i-use-requests-html-to-asynchronously-get-a-list-of-urls/58846808#58846808", "title": "How do I use requests_html to asynchronously get() a list of URLs?", "body": "<blockquote>\n  <p>Am I doing something wrong?</p>\n</blockquote>\n\n<p>You are not calling <code>asession.run</code> correctly.</p>\n\n<p><code>asyncio.gather</code> accepts awaitable objects, such as coroutine objects obtained by just calling a coroutine (async) function. <code>asession.run</code>, on the other hand, accepts <em>callables</em>, such as async functions, which it will invoke to produce awaitables. The difference is like between one function that accepts an iterable, and which you could pass e.g. an instantiated generator, and another that accepts a callable that will return an iterable, and which you could pass a generator function itself.</p>\n\n<p>Since your async functions have arguments, you cannot just pass <code>get_link</code> to <code>asession.run</code>; you must use <code>functools.partial</code> or a lambda itself:</p>\n\n<pre><code>results = asession.run(\n    lambda: get_link(\"http://google.com\"),\n    lambda: get_link(\"http://yahoo.com\"),\n)\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7982462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d9f3c5919022b1730546f1fb7082b8?s=128&d=identicon&r=PG", "display_name": "etskinner", "link": "https://stackoverflow.com/users/7982462/etskinner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 0, "accepted_answer_id": 58846808, "answer_count": 1, "score": 1, "last_activity_date": 1573749678, "creation_date": 1573679909, "last_edit_date": 1573749678, "question_id": 58845758, "link": "https://stackoverflow.com/questions/58845758/how-do-i-use-requests-html-to-asynchronously-get-a-list-of-urls", "title": "How do I use requests_html to asynchronously get() a list of URLs?", "body": "<p>I'm trying to asynchronously get() a list of URLs using python package <a href=\"https://pypi.org/project/requests-html/\" rel=\"nofollow noreferrer\">resuqests_html</a>, similar to the <a href=\"https://github.com/psf/requests-html#tutorial--usage\" rel=\"nofollow noreferrer\">async example in the README</a> using Python 3.6.5 and requests_html 0.10.0.</p>\n\n<p>My understanding is that AsyncHTMLSession.run() is supposed work very much the same as asyncio.gather(): You give it a bunch of awaitables, and it runs all of them. Is that incorrect?</p>\n\n<p>Here's the code I'm trying, which I expect should get the pages and store the responses:</p>\n\n<pre><code>from requests_html import AsyncHTMLSession\n\nasync def get_link(url):\n    r = await asession.get(url)\n    return r\n\nasession = AsyncHTMLSession()\nresults = asession.run(get_link(\"http://google.com\"), get_link(\"http://yahoo.com\"))\n</code></pre>\n\n<p>But I'm getting this exception instead:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 10, in &lt;module&gt;\n    results = asession.run(get_link(\"google.com\"), get_link(\"yahoo.com\"))\n  File \".\\venv\\lib\\site-packages\\requests_html.py\", line 772, in run\n    asyncio.ensure_future(coro()) for coro in coros\n  File \".\\venv\\lib\\site-packages\\requests_html.py\", line 772, in &lt;listcomp&gt;\n    asyncio.ensure_future(coro()) for coro in coros\nTypeError: 'coroutine' object is not callable\nsys:1: RuntimeWarning: coroutine 'get_link' was never awaited\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["python", "numpy", "matplotlib", "graph", "scatter"], "answers": [{"comments": [{"owner": {"reputation": 452, "user_id": 1532734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d951bf08149181a2c4fd0f46ed4c4d3d?s=128&d=identicon&r=PG", "display_name": "chandhooguy", "link": "https://stackoverflow.com/users/1532734/chandhooguy"}, "edited": false, "score": 0, "creation_date": 1573688093, "post_id": 58846913, "comment_id": 103968005, "body": "Hey! Thank you for the response. If I change the axes, then I get a bounding error (out of bounds) when I&#39;m writing to the empty array. I&#39;m not sure why this would be the case, since I&#39;m normalizing the X by image.size[0] and y by image.size[1]. Any ideas?"}, {"owner": {"reputation": 3144, "user_id": 10640534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25583304ddb01032ed802cbd87b17d53?s=128&d=identicon&r=PG&f=1", "display_name": "Patol75", "link": "https://stackoverflow.com/users/10640534/patol75"}, "reply_to_user": {"reputation": 452, "user_id": 1532734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d951bf08149181a2c4fd0f46ed4c4d3d?s=128&d=identicon&r=PG", "display_name": "chandhooguy", "link": "https://stackoverflow.com/users/1532734/chandhooguy"}, "edited": false, "score": 0, "creation_date": 1573690437, "post_id": 58846913, "comment_id": 103968574, "body": "Sorry, forgot to mention you also need to change your first line: <code>uv_new = np.zeros((img.shape[1], img.shape[0]))</code>."}, {"owner": {"reputation": 452, "user_id": 1532734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d951bf08149181a2c4fd0f46ed4c4d3d?s=128&d=identicon&r=PG", "display_name": "chandhooguy", "link": "https://stackoverflow.com/users/1532734/chandhooguy"}, "edited": false, "score": 0, "creation_date": 1573692692, "post_id": 58846913, "comment_id": 103969079, "body": "Thanks! I did that, and that fixes the sideways problem, but I still have the problem of the points shown being much fewer than in the scatter plot."}, {"owner": {"reputation": 3144, "user_id": 10640534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25583304ddb01032ed802cbd87b17d53?s=128&d=identicon&r=PG&f=1", "display_name": "Patol75", "link": "https://stackoverflow.com/users/10640534/patol75"}, "reply_to_user": {"reputation": 452, "user_id": 1532734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d951bf08149181a2c4fd0f46ed4c4d3d?s=128&d=identicon&r=PG", "display_name": "chandhooguy", "link": "https://stackoverflow.com/users/1532734/chandhooguy"}, "edited": false, "score": 0, "creation_date": 1573695732, "post_id": 58846913, "comment_id": 103969710, "body": "Do you mind updating the figures attached to your question with the new results?"}], "tags": [], "owner": {"reputation": 3144, "user_id": 10640534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25583304ddb01032ed802cbd87b17d53?s=128&d=identicon&r=PG&f=1", "display_name": "Patol75", "link": "https://stackoverflow.com/users/10640534/patol75"}, "is_accepted": true, "score": 0, "last_activity_date": 1573725436, "last_edit_date": 1573725436, "creation_date": 1573685935, "answer_id": 58846913, "question_id": 58845745, "link": "https://stackoverflow.com/questions/58845745/plt-scatter-not-showing-same-points-as-imshow-with-same-data/58846913#58846913", "title": "plt scatter not showing same points as imshow with same data", "body": "<p>You have, I believe, a few mistakes in your snippet.</p>\n\n<ul>\n<li>You do not need <code>uv_int</code> because when you calculate x and y, you cast them as integers with <code>astype(int)</code>.</li>\n<li>The reason why <code>count_nonzero</code> returns two different values is probably that you get some duplicate coordinates (x, y) for multiple non-zero values of z when you perform the normalization. Applying the previous point might help in discarding a few duplicates.</li>\n<li>This call <code>uv_new[x,y] = z</code> is the reason why your <code>imshow</code> plot is transposed. Yes, <code>x</code> represents the X axis and <code>y</code> the Y axis, but keep in mind that in terms of displaying matrices, (rows, cols) is actually equivalent to (y, x). So please update your call to <code>uv_new[y, x] = z</code> and change the shape of <code>uv_new</code>.</li>\n<li>Use the same colormap for each plot. Please avoid using jet or rainbow as well. Matplotlib has viridis, inferno, magma, plasma and cividis which are great colormaps you should use. Just add the keyword <code>cmap='plasma'</code> in both calls to <code>imshow</code> and <code>scatter</code> for example.</li>\n</ul>\n\n<p>EDIT:\nHere is an actual example with randomly-generated data. The first two plots are similar to what you do, except that the <code>interpolation</code> keyword for <code>imshow</code> is used. The last plot is similar to the second one but the background color is changed so as to try to match the first plot and the size of the scatter dots is decreased. See how first and last image resemble each other? I think this roughly explains why you do not get the same plots with imshow and scatter. Snippet and figure below (figure quality is pretty poor due to the size restriction, so please execute the snippet on your machine to get a better quality image).</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nrng = np.random.default_rng()\nuv = rng.random(size=(3, 16425))\nuv_new = np.zeros((1920, 1200))\nx = (uv[0] / np.amax(uv[0]) * (uv_new.shape[1] - 1)).astype(int)\ny = (uv[1] / np.amax(uv[1]) * (uv_new.shape[0] - 1)).astype(int)\nz = 1 - uv[2] / np.amax(uv[2])\nuv_new[y, x] = z\nfig, (ax, bx, cx) = plt.subplots(nrows=1, ncols=3, num=0, figsize=(20, 10))\nax.imshow(uv_new, origin='lower', cmap='plasma', interpolation='bilinear')\nbx.scatter(x, y, c=z, s=1, cmap='plasma')\ncx.scatter(x, y, c=z, s=0.02, cmap='plasma')\ncx.set_facecolor('xkcd:royal blue')\nax.set_aspect('equal')\nax.autoscale(enable=True, axis='both', tight=True)\nbx.set_aspect('equal')\nbx.autoscale(enable=True, axis='both', tight=True)\ncx.set_aspect('equal')\ncx.autoscale(enable=True, axis='both', tight=True)\nfig.tight_layout()\nfig.savefig('/home/thomas/so.png', bbox_inches='tight', dpi=200)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yjkZd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yjkZd.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 452, "user_id": 1532734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d951bf08149181a2c4fd0f46ed4c4d3d?s=128&d=identicon&r=PG", "display_name": "chandhooguy", "link": "https://stackoverflow.com/users/1532734/chandhooguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 58846913, "answer_count": 1, "score": 0, "last_activity_date": 1573725436, "creation_date": 1573679860, "last_edit_date": 1573712095, "question_id": 58845745, "link": "https://stackoverflow.com/questions/58845745/plt-scatter-not-showing-same-points-as-imshow-with-same-data", "title": "plt scatter not showing same points as imshow with same data", "body": "<p>I am trying to overlay points and values that show up fine on a scatterplot, into an image. I have an image of size (1200,1920,3), and a list of points organized as (x,y,value) that I call uv, of size (3,16425). When I show these points on a scatterplot, they show up as I want them to. However, when I try showing these points in an array of size (1200,1920) and then displaying using imshow, not only do most of the points not show up, but the dimensions are also backwards. I don't know what's going on, as it is the same data in both cases. Any help would be appreciated.</p>\n\n<p>Code:</p>\n\n<pre><code>uv_new = np.zeros((img.shape[0],img.shape[1]))\nmax_depth = np.max((uv[2,:]).astype(np.float64)) # just a normalizer\nuv_int = uv.astype(int) # Since I'm putting it in an array, I need integer x,y coordinates\nprint(img.shape)\nx = (uv_int[0]/np.max(uv_int[0])*(img.shape[0]-1)).astype(int) # Normalize x coordinates\ny = (uv_int[1]/np.max(uv_int[1])*(img.shape[1]-1)).astype(int) # Normalize y coordinates\nz = 1-uv[2]/max_depth # The color values I want to show\nuv_new[x,y] = z # Set the image I want to show with the color values\nplt.imshow(uv_new,origin='lower') # Show this image which should contain all the points, but doesn't\nprint(np.count_nonzero(uv_new)) \nprint(np.count_nonzero(z)) # Comparing these two just to show that no data is lost\nplt.figure(figsize=(8,5))\n#plt.imshow(img)\ncm = plt.cm.get_cmap('jet')\nscat = plt.scatter(x,y, c=z, s=1, cmap=cm) # What I want, but is different from the image above, even though it is the exact same data\n#plt.axis('off')\nplt.show()\n</code></pre>\n\n<p>Result:\n<a href=\"https://i.stack.imgur.com/gWlYT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gWlYT.png\" alt=\"enter image description here\"></a></p>\n\n<p>EDIT:\nAs per the most recent comment on the answer, here is the updated results switching so that uv_new is now of shape (img.shape<a href=\"https://i.stack.imgur.com/gWlYT.png\" rel=\"nofollow noreferrer\">1</a>,img.shape[0]), and moving to uv_new[y,x] = z.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dfaSx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dfaSx.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "excel"], "comments": [{"owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "edited": false, "score": 0, "creation_date": 1573680193, "post_id": 58845724, "comment_id": 103965225, "body": "You can use wildcards in your <a href=\"https://docs.python.org/3.8/library/glob.html#glob.glob\" rel=\"nofollow noreferrer\"><code>glob</code></a> call to list all of the excel files in that directory: <code>f = glob.glob(&#39;*.xlsx&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "edited": false, "score": 1, "creation_date": 1573680258, "post_id": 58845826, "comment_id": 103965257, "body": "List comprehension isn&#39;t necessary, glob already returns a list."}], "tags": [], "owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "is_accepted": false, "score": 1, "last_activity_date": 1573680275, "last_edit_date": 1573680275, "creation_date": 1573680190, "answer_id": 58845826, "question_id": 58845724, "link": "https://stackoverflow.com/questions/58845724/how-can-i-extract-the-same-excel-sheet-from-multiple-files/58845826#58845826", "title": "How can I extract the same excel sheet from multiple files?", "body": "<p>You can get all your files into a list using glob with a list comprehension:</p>\n\n<pre><code>files_to_be_read = glob.glob(\"*.xlsx\") #Assuming you also have the path to the folder where the excel files are saved\nfor i in files_to_be_read:\n    df_in = pd.read_excel(i) #You pass the path, pd.read_excel always uses the first sheet by default\n    df_out = pd.to_csv(i+'.csv') #You will save the file with the same name, but in csv format\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8707997, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156717964252571/picture?type=large", "display_name": "Jack Mitchell", "link": "https://stackoverflow.com/users/8707997/jack-mitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573680275, "creation_date": 1573679737, "question_id": 58845724, "link": "https://stackoverflow.com/questions/58845724/how-can-i-extract-the-same-excel-sheet-from-multiple-files", "title": "How can I extract the same excel sheet from multiple files?", "body": "<p>I have a directory of similar excel files and want to extract the first sheet from each file and save it as a .csv file. Currently have code which works to extract and save sheet from individual file: </p>\n\n<pre><code>import glob\nimport pandas as pd\n\nf = glob.glob('filename.xlsx') # assume the path\nfor excel in f:\n    out = excel.split('.')[0]+'.csv'\n    df = pd.read_excel(excel) # if only the first sheet is needed.\n    df.to_csv(out) \n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 1190, "user_id": 9908952, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rbvcro96lIw/AAAAAAAAAAI/AAAAAAAAAAA/qiUZRO7icZo/photo.jpg?sz=128", "display_name": "DBA108642", "link": "https://stackoverflow.com/users/9908952/dba108642"}, "edited": false, "score": 0, "creation_date": 1573679962, "post_id": 58845705, "comment_id": 103965127, "body": "How is this data stored? In a file? data frame?"}, {"owner": {"reputation": 331, "user_id": 9601725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b4cb37091a75c39f5ff958c7e812b8f?s=128&d=identicon&r=PG&f=1", "display_name": "NZ_DJ", "link": "https://stackoverflow.com/users/9601725/nz-dj"}, "reply_to_user": {"reputation": 1190, "user_id": 9908952, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rbvcro96lIw/AAAAAAAAAAI/AAAAAAAAAAA/qiUZRO7icZo/photo.jpg?sz=128", "display_name": "DBA108642", "link": "https://stackoverflow.com/users/9908952/dba108642"}, "edited": false, "score": 0, "creation_date": 1573680585, "post_id": 58845705, "comment_id": 103965412, "body": "Hey, stored as a csv file so excel table format"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1573681250, "last_edit_date": 1573681250, "creation_date": 1573680917, "answer_id": 58845973, "question_id": 58845705, "link": "https://stackoverflow.com/questions/58845705/create-a-table-using-data-content-as-columns-in-python/58845973#58845973", "title": "Create a table using data content as columns in python", "body": "<p>I will use <code>get_dummies</code> (you can add <code>map({True:'Y',False:''})</code> at the end )</p>\n\n<pre><code>s=pd.get_dummies(df1)\ns.columns=pd.MultiIndex.from_tuples(s.columns.str.split('_').map(tuple))\nYourdf=s.stack(0).sum(level=1).eq(1)\nYourdf\nOut[132]: \n         black   blue  green  orange    red  white  yellow\nperson1   True   True  False    True   True   True   False\nperson2   True   True   True   False   True  False   False\nperson3  False  False   True   False  False  False    True\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>pd.concat([df1[x].str.get_dummies() for x in df1.columns],keys=df1.columns,axis=1).\\\n        stack(1).sum(level=1).T.eq(1)\nOut[164]: \n         black   blue  green  orange    red  white  yellow\nperson1   True   True  False    True   True   True   False\nperson2   True   True   True   False   True  False   False\nperson3  False  False   True   False  False  False    True\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1573684775, "post_id": 58846007, "comment_id": 103967083, "body": "ansev, for you first method to work i needed to run new_df1 = new_df1.drop(new_df1.columns[0], axis=1) . What version are you running? I upvoted you."}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1573684960, "post_id": 58846007, "comment_id": 103967151, "body": "I use 0.25.2, You can also try: <code>new_df=df.apply(lambda x: x.value_counts()).replace({1:&#39;Y&#39;,np.nan:&#39;&#39;}).T</code>. Thanks by upvote:)"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": false, "score": 3, "last_activity_date": 1573683615, "last_edit_date": 1573683615, "creation_date": 1573681072, "answer_id": 58846007, "question_id": 58845705, "link": "https://stackoverflow.com/questions/58845705/create-a-table-using-data-content-as-columns-in-python/58846007#58846007", "title": "Create a table using data content as columns in python", "body": "<p><strong>Method 1</strong>: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\"><code>DataFrame.apply</code></a> + <code>pd.value_counts</code></p>\n\n<pre><code>new_df=df.apply(pd.value_counts).replace({1:'Y',np.nan:''}).T\nprint(new_df)\n\n        black blue green orange red white yellow\nperson1     Y    Y            Y   Y     Y       \nperson2     Y    Y     Y          Y             \nperson3                Y                       Y \n</code></pre>\n\n<hr>\n\n<p><strong>Method 2</strong>: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.crosstab.html\" rel=\"nofollow noreferrer\"><code>pd.crosstab</code></a> + <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.melt.html\" rel=\"nofollow noreferrer\"><code>DataFrame.melt</code></a></p>\n\n<pre><code>df2=df.melt()\nnew_df=pd.crosstab(df2['variable'],df2['value']).replace({0:'',1:'Y'}).rename_axis(index=None,columns=None)\nprint(new_df)\n        black blue green orange red white yellow\nperson1     Y    Y            Y   Y     Y       \nperson2     Y    Y     Y          Y             \nperson3                Y                       Y\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 10435754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3dfc6b6cce7607822e5ac56969886be?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmet Furkan", "link": "https://stackoverflow.com/users/10435754/ahmet-furkan"}, "is_accepted": false, "score": 0, "last_activity_date": 1573683664, "creation_date": 1573683664, "answer_id": 58846510, "question_id": 58845705, "link": "https://stackoverflow.com/questions/58845705/create-a-table-using-data-content-as-columns-in-python/58846510#58846510", "title": "Create a table using data content as columns in python", "body": "<p>I have a primitive approach using dictionary data type and print function,</p>\n\n<pre><code>columns = (\"Blue\", \"Red\", \"Black\", \"Green\", \"Yellow\", \"Orange\", \"White\")\n\ntable_dict = {\"Person1\": (\"Y\", \"Y\", \"Y\", \" \", \" \",  \"Y\", \"Y\"),\n          \"Person2\": (\"Y\", \"Y\", \"Y\", \"Y \", \" \", \" \", \" \"),\n          \"Person3\": (\" \", \" \", \" \", \"Y\", \"Y\", \" \", \" \")}\n\nprint(\" \"*5, *columns, sep=\" \"*5)\n\nfor person in table_dict:\n    print(person, end=\" \"*4)\n    print(*table_dict.get(person), sep=\" \"*9)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>          Blue     Red     Black     Green     Yellow     Orange     White\nPerson1    Y         Y         Y                             Y         Y\nPerson2    Y         Y         Y         Y                               \nPerson3                                  Y         Y                    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1573684688, "creation_date": 1573684688, "answer_id": 58846711, "question_id": 58845705, "link": "https://stackoverflow.com/questions/58845705/create-a-table-using-data-content-as-columns-in-python/58846711#58846711", "title": "Create a table using data content as columns in python", "body": "<p>This is a working implementation, let me know what you think:</p>\n\n<pre><code>d1={'person1': ['blue', 'red', 'black', 'white', 'orange'], 'person2': ['red', 'blue', 'black', 'green', ''], 'person3': ['green', 'yellow', '', '', '']}\ndf1 = pd.DataFrame(data=d1)\nnew_df1 = df1.apply(pd.value_counts).replace({1:'Y',np.nan:''})\nnew_df1 = new_df1.reset_index().drop(df1.index[0]).T\n\nnew_df1\n             1     2      3       4    5      6       7\nindex    black  blue  green  orange  red  white  yellow\nperson1      Y     Y              Y    Y      Y        \nperson2      Y     Y      Y            Y               \nperson3                   Y                           Y\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 9601725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b4cb37091a75c39f5ff958c7e812b8f?s=128&d=identicon&r=PG&f=1", "display_name": "NZ_DJ", "link": "https://stackoverflow.com/users/9601725/nz-dj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 58845973, "answer_count": 4, "score": 2, "last_activity_date": 1573684688, "creation_date": 1573679653, "question_id": 58845705, "link": "https://stackoverflow.com/questions/58845705/create-a-table-using-data-content-as-columns-in-python", "title": "Create a table using data content as columns in python", "body": "<p>I currently have raw data like this:</p>\n\n<pre><code>person1  person2   person3...\n  blue     red      green\n  red      blue     yellow\n  black    black\n  white    green\n  orange\n</code></pre>\n\n<p>with lots of different values and columns.</p>\n\n<p>What I need is:</p>\n\n<pre><code>         Blue  Red  Black  Green Yellow Orange White\nPerson1   Y     Y     Y                    Y     Y\nPerson2   Y     Y     Y      Y\nPerson3                      Y      Y\n</code></pre>\n\n<p>Any suggestions please?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "edited": false, "score": 1, "creation_date": 1573680526, "post_id": 58845672, "comment_id": 103965381, "body": "Can you give a bit more context to the size of your dataframe and the number of pairs you are intending to swap? Even adding pseudo code for the intended for loop you mentioned would give us some insight."}, {"owner": {"reputation": 9, "user_id": 12245428, "user_type": "registered", "profile_image": "https://graph.facebook.com/995467833980750/picture?type=large", "display_name": "gota", "link": "https://stackoverflow.com/users/12245428/gota"}, "reply_to_user": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "edited": false, "score": 0, "creation_date": 1574229792, "post_id": 58845672, "comment_id": 104152671, "body": "Sorry it wasn&#39;t clear enough. Based on my data, @rafaelc &#39;s code is what I wanted to do. Thank you, everyone!"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1573680242, "last_edit_date": 1573680242, "creation_date": 1573679804, "answer_id": 58845737, "question_id": 58845672, "link": "https://stackoverflow.com/questions/58845672/pairwise-swap-python-pandas-numpy/58845737#58845737", "title": "pairwise swap (Python, Pandas, NumPy)", "body": "<p>IIUC <code>groupby</code> reverse the order  then assign it back </p>\n\n<pre><code>df['col']=df.groupby('ID',sort=False).col.apply(lambda x : x.iloc[::-1]).values\n\ndf\n\nOut[104]: \n   ID  side  col\n0  10  home  a_a\n1  10  away  a_h\n2  11  home  b_a\n3  11  away  b_h\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1573680008, "post_id": 58845744, "comment_id": 103965147, "body": "What if you have 100000 rows? Would you have to manually create your dictionary ?"}, {"owner": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1573681032, "post_id": 58845744, "comment_id": 103965596, "body": "@rafaelc this solution holds if there are 100000 rows. The dictionary scales as the number of pairs to swap scales, not with the number of rows in the dataframe."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1573681083, "post_id": 58845744, "comment_id": 103965631, "body": "I know it works. But are you going to <i>manually</i> write 1000000 entries in a dictionary?"}, {"owner": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1573686944, "post_id": 58845744, "comment_id": 103967714, "body": "<i>The dictionary scales as the number of pairs to swap scales, not with the number of rows in the dataframe.</i> There are only two pairs to swap."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1573930941, "post_id": 58845744, "comment_id": 104053265, "body": "I&#39;m not sure you understand what I say hahaha. You have manually written <code>{&#39;a_h&#39;: &#39;a_a&#39;, &#39;a_a&#39;: &#39;a_h&#39;}</code> and then <code>{&#39;b_h&#39;: &#39;b_a&#39;, &#39;b_a&#39;: &#39;b_h&#39;}</code>. Suppose you also have <code>c_h</code>, <code>d_h</code>, <code>e_h</code>, <code>f_h</code>, <code>g_h</code> all the way through <code>z_h</code>. And then, when it gets to <code>z_h</code>, it starts over from <code>a_i</code>, then <code>b_i</code>, then <code>c_i</code> etc. Are you <b>manually</b> going to <b>write every</b> dictionary with two pairs to swap and call <b>manually</b> replace on all of them? Because that is obviously a solution that doesn&#39;t scale"}, {"owner": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1574033714, "post_id": 58845744, "comment_id": 104075157, "body": "No I understand that; and yes you would have to manually write every entry for the dictionary. But OP didn&#39;t specify how many pairs to swap. And from the example, I assumed it was just two. If it is in fact just two, this works and is easier than a for loop."}], "tags": [], "owner": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "is_accepted": false, "score": 1, "last_activity_date": 1573679856, "creation_date": 1573679856, "answer_id": 58845744, "question_id": 58845672, "link": "https://stackoverflow.com/questions/58845672/pairwise-swap-python-pandas-numpy/58845744#58845744", "title": "pairwise swap (Python, Pandas, NumPy)", "body": "<p>Try the following: <code>df['col'] = df['col'].replace({'a_h': 'a_a', 'a_a': 'a_h'})</code> and <code>df['col'] = df['col'].replace({'b_h': 'b_a', 'b_a': 'b_h'})</code>. More on replace() here: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.replace.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.replace.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 94, "user_id": 11483132, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gbjAPwrYt54/AAAAAAAAAAI/AAAAAAAAABI/Q4Xs2SluGKA/photo.jpg?sz=128", "display_name": "Eli", "link": "https://stackoverflow.com/users/11483132/eli"}, "edited": false, "score": 0, "creation_date": 1573680622, "post_id": 58845781, "comment_id": 103965433, "body": "@rafaelc I don&#39;t think your answer addresses pairwise swapping as in the original question... If I&#39;m understanding np.roll, this is only intended for shifting values (which is only useful if the a_a and a_h, &amp; b_a and b_h are ordered and conveniently adjacent to each other.)"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1573680776, "post_id": 58845781, "comment_id": 103965494, "body": "The idea is that when you <code>groupby.apply</code>, the function is applied to the <code>col</code> Series in every group. Each group has 2 items - home and away - and when you <code>roll</code> them, you simply swap their positions. <code>np.roll</code> works differently than <code>pd.Series.shift</code> because it fills the first values with the last values"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 3, "last_activity_date": 1573680016, "creation_date": 1573680016, "answer_id": 58845781, "question_id": 58845672, "link": "https://stackoverflow.com/questions/58845672/pairwise-swap-python-pandas-numpy/58845781#58845781", "title": "pairwise swap (Python, Pandas, NumPy)", "body": "<p>Use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.roll.html\" rel=\"nofollow noreferrer\"><code>np.roll</code></a></p>\n\n<pre><code>df['shift_col'] = df.groupby('ID').col.transform(np.roll, shift=1)\n</code></pre>\n\n<hr>\n\n<pre><code>ID side shift_col\n\n10 home  a_a\n10 away  a_h\n11 home  b_a\n11 away  b_h\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 1, "last_activity_date": 1573681408, "last_edit_date": 1573681408, "creation_date": 1573680931, "answer_id": 58845978, "question_id": 58845672, "link": "https://stackoverflow.com/questions/58845672/pairwise-swap-python-pandas-numpy/58845978#58845978", "title": "pairwise swap (Python, Pandas, NumPy)", "body": "<p><strong>IFF</strong> this is truly a pairwise swap and the DataFrame is sorted so that IDs have exactly two observations that appear in consecutive rows, we can use two shifts and slice the proper rows from each. </p>\n\n<pre><code>df['shift_col'] = pd.concat([df['col'].shift()[1::2], df['col'].shift(-1)[::2]])\n#   ID  side  col shift_col\n#0  10  home  a_h       a_a\n#1  10  away  a_a       a_h\n#2  11  home  b_h       b_a\n#3  11  away  b_a       b_h\n</code></pre>\n\n<p>The benefit here is that with many <code>IDs</code> this will scale much better than <code>GroupBy.apply</code>. The downside is that it's error prone. </p>\n"}], "owner": {"reputation": 9, "user_id": 12245428, "user_type": "registered", "profile_image": "https://graph.facebook.com/995467833980750/picture?type=large", "display_name": "gota", "link": "https://stackoverflow.com/users/12245428/gota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58845781, "answer_count": 4, "score": 0, "last_activity_date": 1573681408, "creation_date": 1573679514, "question_id": 58845672, "link": "https://stackoverflow.com/questions/58845672/pairwise-swap-python-pandas-numpy", "title": "pairwise swap (Python, Pandas, NumPy)", "body": "<p>Given a data frame like this:</p>\n\n<pre><code>ID, side, col\n\n10, home, a_h\n10, away, a_a\n11, home, b_h\n11, away, b_a\n...\n</code></pre>\n\n<p>I want to swap the values <code>a_h</code> and <code>a_a</code>,  <code>b_h</code> and <code>b_a</code> and make a data frame like this:</p>\n\n<pre><code>ID, side, col\n\n10, home, a_a\n10, away, a_h\n11, home, b_a\n11, away, b_h\n...\n</code></pre>\n\n<p>I could implement this by using for-loop but I am wondering if there is a more efficient way to do it using numpy or pandas.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "zeromq", "mql4", "metatrader4"], "answers": [{"comments": [{"owner": {"reputation": 1633, "user_id": 12001122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec161ec6ec2ddb3c5ea5989f03fe053?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/12001122/jonas"}, "edited": false, "score": 1, "creation_date": 1573716981, "post_id": 58846778, "comment_id": 103975599, "body": "Thank you so much! I will have some more questions which pretty likely would stretch this threads topic. Any option to get in touch outside of SO?"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 1633, "user_id": 12001122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec161ec6ec2ddb3c5ea5989f03fe053?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/12001122/jonas"}, "edited": false, "score": 1, "creation_date": 1573722618, "post_id": 58846778, "comment_id": 103978232, "body": "@Phanti Glad it helped. Maybe. How about starting with an email to Stuttgart?"}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 1, "last_activity_date": 1573685577, "last_edit_date": 1573685577, "creation_date": 1573685127, "answer_id": 58846778, "question_id": 58845664, "link": "https://stackoverflow.com/questions/58845664/how-can-someone-send-data-from-metatrader-4-5-terminal-to-external-server/58846778#58846778", "title": "How can someone send data from MetaTrader 4/5 Terminal to external server?", "body": "<blockquote>\n  <p><em>Since this is <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=user%3A3666197%20%5Bmql4%5D\">a <strong>rare topic</strong>, ... <sub> is it, indeed, so rare to need this </sub>? </a></em></p>\n</blockquote>\n\n<p>Welcome to the club - my above cited answer has received within 1,5 years Zero-votes so far</p>\n\n<p>Nevertheless,<br>having used ZeroMQ since v2.11+, thanks to the R&amp;D work published by Austen CONRAD - all thanks and deep respect for his persistence we owe to him.</p>\n\n<blockquote>\n  <p><strong>Q</strong> : <em>\"How would this be accomplished within the MetaTrader environment?\"</em></p>\n</blockquote>\n\n<p>One simply <strong><code>#import</code></strong>-s the DLL and starts to use ZeroMQ-API-wrapper calls. A few details went a bit more complex, after MetaTrader has silently changed internal representation of <strong><code>string</code></strong> to cease to be a <code>string</code> ( becoming a <code>struct</code> in <em>\"New\"-<strong></em><code>MQL4.56789</code></strong>, but you will learn how to live with this \"Always On Watch\"-style, so as to survive in production )</p>\n\n<blockquote>\n  <p><strong>Q</strong> : <em>\"Will this still be an expert advisor or some kind of DLL solution?\"</em></p>\n</blockquote>\n\n<p>ZeroMQ can be used in either and/or all of:<br>\n- <strong>Expert Advisor</strong>-type of <code>MQL4</code>-code<br>\n- <strong>Custom Indicator</strong>-type of <code>MQL4</code>-code<br>\n- <strong>Script</strong>-type of <code>MQL4</code>-code<br>\nand<br>\ncan even provide a proxy-signaling/messaging-layer, so as to communicate among these otherwise separate and not-cooperating processes inside the MT4-Terminal Ecosystem.</p>\n\n<p><strong>Example:</strong><br>\nI have MT4-Terminal processes cooperate with external AI/ML-based market analyser, which auto-detects windows-of-opportunity plus having an external CLI-console, as a remote-keyboard for MT4-Terminal hosted Control Panel, showing system health-state and listening to a remote-keyboard, used for a remote CLI-command control ( for both configuration and maintenance tasks of the whole multi-party distributed trading system )</p>\n\n<blockquote>\n  <p><strong>Q</strong> : <em>\"What is the ZeroMQ's role within the setup?\"</em></p>\n</blockquote>\n\n<p>ZeroMQ provides an independent, smart and industry-standard, smart and low-latency  signaling/messaging layer among any kind of needed nodes ( grid-computing, GPU-computing, CLI-treminal, AI/ML-decision making, system-wide consolidated central logging, anything one may need )</p>\n\n<p>Try to setup and use a remote <strong><code>tipc://</code></strong>-transport-class for cross-cluster computing paradigm with any other approach.</p>\n\n<p>Try to setup and use an M:N-redundant Strategy Trading, operated accross a mix of <strong><code>tcp://</code></strong> + <strong><code>tipc://</code></strong> + <strong><code>norm://</code></strong> + <strong><code>vmci://</code></strong> transport-classes, used so as to interconnect ( A x M + N x B )-nodes' exo-systems.</p>\n\n<p>Try to setup a system, that asks MetaTrader to do some work from outside, without this technology ( <code>webrequest()</code> is not ready for any \"qestions from outside\", is it? )</p>\n\n<blockquote>\n  <p><strong>Q</strong> : <em>\"What are the pros and cons compared to the <code>webrequest()</code> function?\"</em></p>\n</blockquote>\n\n<p>Feel free to read about this in StackOverflow answers.</p>\n"}, {"tags": [], "owner": {"reputation": 522, "user_id": 5405192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a73cd733801599ec05cf8ec5c4d9b1?s=128&d=identicon&r=PG", "display_name": "Jansen Simanullang", "link": "https://stackoverflow.com/users/5405192/jansen-simanullang"}, "is_accepted": false, "score": 1, "last_activity_date": 1604175032, "creation_date": 1604175032, "answer_id": 64625961, "question_id": 58845664, "link": "https://stackoverflow.com/questions/58845664/how-can-someone-send-data-from-metatrader-4-5-terminal-to-external-server/64625961#64625961", "title": "How can someone send data from MetaTrader 4/5 Terminal to external server?", "body": "<p><strong>Integration with Python, support for Market and Signals services in Wine (Linux/MacOS) and highly optimized strategy tester in MetaTrader 5 build 2085</strong></p>\n<p>MetaQuotes Software Corp, 14 June 2019</p>\n<hr />\n<p>In the new MetaTrader 5 version, we have added an API which enables request of MetaTrader 5 terminal data through applications, using the Python high-level programming language. The API contains multiple libraries for machine learning, process automation, as well as data analysis and visualization.</p>\n<hr />\n<p>MetaTrader 5 integration with Python</p>\n<p>MetaTrader package for Python is designed for efficient and fast obtaining of exchange data via interprocessor communication, directly from MetaTrader 5. The data received via this pathway can be used for statistical calculations and machine learning.</p>\n"}], "owner": {"reputation": 1633, "user_id": 12001122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec161ec6ec2ddb3c5ea5989f03fe053?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/12001122/jonas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 1, "accepted_answer_id": 58846778, "answer_count": 2, "score": 2, "last_activity_date": 1604175032, "creation_date": 1573679479, "last_edit_date": 1573683819, "question_id": 58845664, "link": "https://stackoverflow.com/questions/58845664/how-can-someone-send-data-from-metatrader-4-5-terminal-to-external-server", "title": "How can someone send data from MetaTrader 4/5 Terminal to external server?", "body": "<p>this is somehow intended to (maybe) be(come) a guideline post in terms of MetaTrader 4/5 and its corresponding language MQL4 both set into context with sending data to external servers. </p>\n\n<p>In my special case I am building a Django/Python based web application that will process FOREX trading data for further use.</p>\n\n<p>Thus, I am in search for a proper solution to <strong>send data from the MetaTrader 4/5 Terminal to an external server periodically (e.g. every 60 seconds) formatted as <code>json</code> or <code>csv</code> (if possible).</strong> In particular, the data to be sent is the accounts trade history and the running + pending trades set.</p>\n\n<p>After doing the research I basically found the following approaches:</p>\n\n<p><strong>1.) Using <code>webrequest()</code> in MQL4 wrapped in an expert advisor</strong></p>\n\n<p>As the official MQL4 docu suggests, the <code>webrequest()</code> function sends an http:// request to a specified server. <br>This is a related SO thread:<br><a href=\"https://stackoverflow.com/questions/42098884/how-to-post-from-metatrader-terminal-5-mql-5-a-request-to-my-nodejs-server-whic?noredirect=1&amp;lq=1\">How to post from MetaTrader Terminal 5 MQL 5 a request to my nodejs server, which is running locally on my MT5 host?</a></p>\n\n<p>and the official documentation: </p>\n\n<p><a href=\"https://docs.mql4.com/common/webrequest\" rel=\"nofollow noreferrer\">https://docs.mql4.com/common/webrequest</a></p>\n\n<p>This could be wrapped into an expert advisor to execute the request periodically on defined events given.</p>\n\n<p>Which kind of data from the MT4/5 terminal can be populated into the data array?\n<br>How can that data be formatted? Is it possible to format it as <code>json</code> straight away or should that be done on the server-side?</p>\n\n<p><strong>2.) Using <code>ZeroMQ</code></strong></p>\n\n<p>This is a setup I found in this thread: <a href=\"https://stackoverflow.com/questions/50107279/how-to-send-a-message-in-mql4-5-from-metatrader-terminal-to-python-using-zeromq\">How to send a message in MQL4/5 from MetaTrader Terminal to python using ZeroMQ?</a></p>\n\n<p>How would this be accomplished within the MetaTrader environment? Will this still be an expert advisor or some kind of DLL solution? What is the ZeroMQ's role within the setup?</p>\n\n<p>What are the pros and cons compared to the <code>webrequest()</code> function?</p>\n\n<p><strong>3.) Others?</strong></p>\n\n<p>Are there any other possible approaches on achieving this like e.g. with APIs or MQL4 scripts?</p>\n\n<p>Since this is a rare topic, I am loooking forward to any however small idea and input. </p>\n"}, {"tags": ["python", "list", "dictionary", "for-loop", "key-value"], "comments": [{"owner": {"reputation": 11092, "user_id": 3066077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666991815/picture?type=large", "display_name": "DarrylG", "link": "https://stackoverflow.com/users/3066077/darrylg"}, "edited": false, "score": 1, "creation_date": 1573680578, "post_id": 58845655, "comment_id": 103965407, "body": "In your desired output, did you mean to have &#39;789&#39; : 20110509 rather than &#39;789&#39; : &#39;Arabian&#39; ???"}, {"owner": {"reputation": 487, "user_id": 9343043, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ced251a523e5346aa3aed9005f13f30f?s=128&d=identicon&r=PG&f=1", "display_name": "florence-y", "link": "https://stackoverflow.com/users/9343043/florence-y"}, "reply_to_user": {"reputation": 11092, "user_id": 3066077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666991815/picture?type=large", "display_name": "DarrylG", "link": "https://stackoverflow.com/users/3066077/darrylg"}, "edited": false, "score": 0, "creation_date": 1573680661, "post_id": 58845655, "comment_id": 103965450, "body": "+DarrylG yes, just edited it now"}], "answers": [{"tags": [], "owner": {"reputation": 11092, "user_id": 3066077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666991815/picture?type=large", "display_name": "DarrylG", "link": "https://stackoverflow.com/users/3066077/darrylg"}, "is_accepted": false, "score": 1, "last_activity_date": 1573680753, "creation_date": 1573680753, "answer_id": 58845940, "question_id": 58845655, "link": "https://stackoverflow.com/questions/58845655/append-to-value-in-dict-if-key-exists-convert-value-to-list-then-append/58845940#58845940", "title": "Append to value in dict if key exists / convert value to list then append", "body": "<pre><code>subdirectories = ['/Oceans/Pacific_123/20140306', '/Oceans/Pacific_123/20140306', '/Oceans/Atlantic_456/20101203', '/Oceans/Atlantic_456/20160723', '/Oceans/Atlantic_456/20140306', '/Oceans/Indian_789/20110509']\nmarginal = {}\nfor s in subdirectories:\n  prefix, delim, postfix = s.rpartition('/')\n  _, _, key = prefix.rpartition('_')\n  marginal.setdefault(key, []).append(postfix)\n\nprint(marginal)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>{'123': ['20140306', '20140306'], '456': ['20101203', '20160723', '20140306'], '789': ['20110509']}\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 9343043, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ced251a523e5346aa3aed9005f13f30f?s=128&d=identicon&r=PG&f=1", "display_name": "florence-y", "link": "https://stackoverflow.com/users/9343043/florence-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573680753, "creation_date": 1573679453, "last_edit_date": 1573680641, "question_id": 58845655, "link": "https://stackoverflow.com/questions/58845655/append-to-value-in-dict-if-key-exists-convert-value-to-list-then-append", "title": "Append to value in dict if key exists / convert value to list then append", "body": "<p>I have a list of all subdirectories, <code>subdirectories</code>.</p>\n\n<pre><code>Oceans\\\n   Pacific_123\\\n      20140306\\\n      20131217\\\n   Atlantic_456\\\n      20101203\\\n      20160723\\\n      20140306\\\n   Indian_789\\\n      20110509\\\n</code></pre>\n\n<pre><code>&gt;&gt;&gt; print(subdirectories)`\n['/Oceans/Pacific_123/20140306', '/Oceans/Pacific_123/20140306', '/Oceans/Atlantic_456/20101203', '/Oceans/Atlantic_456/20160723', '/Oceans/Atlantic_456/20140306', '/Oceans/Indian_789/20110509']\n</code></pre>\n\n<p>I am creating a dictionary, <code>marginal</code>, where the oceans of the <code>subdirectories</code> list, or level 1 of <code>Oceans</code>, are keys, and the values are the IDs, or level 2. </p>\n\n<p>My desired <code>marginal</code> should look something like this:</p>\n\n<pre><code>&gt;&gt;&gt; print(marginal)\n{'123': ['20140306', '20131217'], '456': ['20101203', '20160723', '20140306'], '789': '20110509'}\n</code></pre>\n\n<p>I am iterating over <code>subdirectories</code> to create this dictionary. How do I create a second value/append it if the key exists from a previous iteration of my loop?</p>\n\n<pre><code>&gt;&gt;&gt; pairs = dict()\n&gt;&gt;&gt; for subdirectory in subdirectories:\n    ...     pairs.update({subdirectory:subdirectory[20:]})\n</code></pre>\n"}, {"tags": ["python", "curl", "python-requests"], "answers": [{"comments": [{"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "edited": false, "score": 1, "creation_date": 1573718070, "post_id": 58846883, "comment_id": 103976064, "body": "thanks @int_32, I was posting too quickly. And here one sees again. one should never answer without testing / double checking. Fixed my answer"}, {"owner": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "edited": false, "score": 0, "creation_date": 1573720646, "post_id": 58846883, "comment_id": 103977198, "body": "thanks, I&#39;ve tried this variant, it does not work too (same error)"}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "edited": false, "score": 0, "creation_date": 1573720896, "post_id": 58846883, "comment_id": 103977338, "body": "perhaps the file is too big for the server. please try the second part of my modified answer.   though the fact that you manage via curl indicates otherwise.  Do you really use the exact same url with exactly the same params?"}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "edited": false, "score": 0, "creation_date": 1573721067, "post_id": 58846883, "comment_id": 103977437, "body": "I also renamed the file field to data, perhaps that was the reason. Pls retry"}, {"owner": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "edited": false, "score": 0, "creation_date": 1573721366, "post_id": 58846883, "comment_id": 103977579, "body": "This variant does not work too. Files is fine, it&#39;s just 2 mb and can be successfully sent with curl (as I posted in the question)."}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "edited": false, "score": 0, "creation_date": 1573721480, "post_id": 58846883, "comment_id": 103977642, "body": "So now you use the <code>files</code> param to upload the file and the file dict has the key <code>&quot;data&quot;</code> and your url is 100% identical?  And it still fails?  Try to remove the <code>data</code> param. WIll cahnge answer"}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "edited": false, "score": 0, "creation_date": 1573723342, "post_id": 58846883, "comment_id": 103978649, "body": "I passed the mime type explicitly. Perhaps this was the issue"}], "tags": [], "owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "is_accepted": true, "score": 1, "last_activity_date": 1573723669, "last_edit_date": 1573723669, "creation_date": 1573685760, "answer_id": 58846883, "question_id": 58845636, "link": "https://stackoverflow.com/questions/58845636/upload-file-with-python-requests-not-working/58846883#58846883", "title": "Upload file with python requests not working", "body": "<p>Normally this should work</p>\n\n<pre><code>with open('test.mp4', 'rb') as f:\n    r = requests.post(\n        url,\n        headers={\n            'Content-Type': 'multipart/form-data',\n        },\n        files={ \"data\": f},\n    )\n</code></pre>\n\n<p>But somehow it fails for your server.\nProviding file name and mime type explicitly seems to solve the problem.</p>\n\n<pre><code>fname = \"test.mp4\"\n\nwith open(fname, \"rb\") as f:\n    r = requests.post(\n        url,\n        files=[\n            (\"data\", (os.path.basename(fname), f, \"video/mp4\")),\n            ]\n    )\n\nprint(r.status_code)\nprint(r.text)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1097, "user_id": 6537262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V8Oqa.jpg?s=128&g=1", "display_name": "Harish Vutukuri", "link": "https://stackoverflow.com/users/6537262/harish-vutukuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1573722720, "creation_date": 1573722720, "answer_id": 58853061, "question_id": 58845636, "link": "https://stackoverflow.com/questions/58845636/upload-file-with-python-requests-not-working/58853061#58853061", "title": "Upload file with python requests not working", "body": "<pre><code>import requests\n\nheaders = {\n    'Content-Type': 'multipart/form-data',\n}\n\nparams = (\n    ('someskippedparams', ''),\n)\n\nfiles = {\n    'data': ('test.mp4', open('test.mp4', 'rb')),\n}\n\nresponse = requests.post('https://vu.mycdn.me/upload.do', headers=headers, params=params, files=files)\n</code></pre>\n"}], "owner": {"reputation": 13672, "user_id": 497132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/497132/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 58846883, "answer_count": 2, "score": 1, "last_activity_date": 1573723669, "creation_date": 1573679372, "question_id": 58845636, "link": "https://stackoverflow.com/questions/58845636/upload-file-with-python-requests-not-working", "title": "Upload file with python requests not working", "body": "<p><strong>Note:</strong> I've already read all related questions &amp; answers and tried that solutions without success.</p>\n\n<p>I'm trying to upload file to the server with the following code:</p>\n\n<pre><code>with open('test.mp4', 'rb') as f:\n    r = requests.post(\n        url,\n        headers={\n            'Content-Type': 'multipart/form-data',\n        },\n        data=f\n    )\n</code></pre>\n\n<p>But request always fails with:</p>\n\n<p><code>requests.exceptions.ConnectionError: ('Connection aborted.', BrokenPipeError(32, 'Broken pipe'))</code></p>\n\n<p>I've also tried to send it as <code>files</code>, not <code>data</code>.</p>\n\n<p>I'm sure that server works fine, because if I send the same file to the same URL with curl it works:</p>\n\n<pre><code>curl -vvv -i -X POST -H \"Content-Type: multipart/form-data\" -F \"data=@test.mp4\"  \"https://vu.mycdn.me/upload.do?someskippedparams\"\n</code></pre>\n\n<p>What's wrong with my code?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1573680472, "post_id": 58845635, "comment_id": 103965361, "body": "Find the <code>line</code> with the <code>------------   --------- ...</code> pattern, the index of the first <code>-</code> char is the <code>x2</code> index of the <b>text elements</b>. Slice the <code>text element</code> with <code>line[:x2]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 6660112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12506479d2e50b1ad39d3b1429025811?s=128&d=identicon&r=PG&f=1", "display_name": "Amrsaeed", "link": "https://stackoverflow.com/users/6660112/amrsaeed"}, "is_accepted": true, "score": 0, "last_activity_date": 1573683960, "last_edit_date": 1573683960, "creation_date": 1573683648, "answer_id": 58846507, "question_id": 58845635, "link": "https://stackoverflow.com/questions/58845635/python-processing-table-in-from-text/58846507#58846507", "title": "Python processing table in from text", "body": "<p>Given that your data doesn't have a lot of room for generic answer, you can opt for searching for the first occurrence of the '--' character and split using that as defined length.</p>\n\n<p>To do that you will add an initial run through the lines to determine you split index</p>\n\n<pre><code>for line in data:\n    idx = line.find('--')\n    if idx != -1:\n        break\n\n\nfor line in data:\n    try:\n        itemlist.append(line[0:idx])\n        line = line[idx:]\n        item = [item for item in line.split()]\n        itemlist.append(item)\n    except:\n        itemlist.append(line)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11799005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa86d9c8152166957e257123e5bd99b?s=128&d=identicon&r=PG&f=1", "display_name": "Hersenvocht", "link": "https://stackoverflow.com/users/11799005/hersenvocht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 58846507, "answer_count": 1, "score": 0, "last_activity_date": 1573683960, "creation_date": 1573679371, "question_id": 58845635, "link": "https://stackoverflow.com/questions/58845635/python-processing-table-in-from-text", "title": "Python processing table in from text", "body": "<p>I am processing a table from a text file which is unfortunately not in HTML.\nMy largest problem is that my code splits up everything on spaces (which is good), but I need an exception for the text which is displayed on the left. So I do not want to split up 'Tax expense (benefit) at statutory'. My code looks as follows</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>s = '''&lt;TABLE&gt;\n&lt;CAPTION&gt;\n\n                                                           2001                     2000                    1999\n                                                 ------------------------- ----------------------- -------------------------\n                                                     Amount          %        Amount          %        Amount          %\n                                                 ------------   ---------  -----------   --------  ------------    --------\n        Tax expense (benefit) at statutory\n&lt;S&gt;                                             &lt;C&gt;            &lt;C&gt;        &lt;C&gt;            &lt;C&gt;      &lt;C&gt;              &lt;C&gt;\n               rate on continuing operations     $ (1,702,000)    (34.0)   $     80,240     34.0   $ (1,524,000)     (34.0)\n        Other differences, net                        506,000      10.1         (80,240)   (34.0)       240,000        5.4\n\n        Change in valuation allowance\n               for deferred tax assets              1,196,000      23.9               -        -       (573,000)     (12.8)\n        Benefit absorbed by income from\n               discontinued operations                      -         -               -        -      1,857,000       41.4\n                                                 ------------   -------    ------------  -------   ------------    -------\n               Total income tax provision\n                  (benefit)                      $          -         -%   $          -        -%  $          -          -%\n                                                 ============   =======    ============  =======   ============    =======\n\n&lt;/TABLE&gt;\n'''\n\nbs1 = bs(s, \"html.parser\")\ndata = bs1.find('table').get_text().splitlines()\nitemlist = []\nfor line in data:\n    item = [item for item in line.split()]\n    itemlist.append(item)\n</code></pre>\n\n<p>And the output of the list:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[]\n[]\n[]\n['2001', '2000', '1999']\n['-------------------------', '-----------------------', '-------------------------']\n['Amount', '%', 'Amount', '%', 'Amount', '%']\n['------------', '---------', '-----------', '--------', '------------', '--------']\n['Tax', 'expense', '(benefit)', 'at', 'statutory']\n[]\n['rate', 'on', 'continuing', 'operations', '$', '(1,702,000)', '(34.0)', '$', '80,240', '34.0', '$', '(1,524,000)', '(34.0)']\n['Other', 'differences,', 'net', '506,000', '10.1', '(80,240)', '(34.0)', '240,000', '5.4']\n[]\n['Change', 'in', 'valuation', 'allowance']\n['for', 'deferred', 'tax', 'assets', '1,196,000', '23.9', '-', '-', '(573,000)', '(12.8)']\n['Benefit', 'absorbed', 'by', 'income', 'from']\n['discontinued', 'operations', '-', '-', '-', '-', '1,857,000', '41.4']\n['------------', '-------', '------------', '-------', '------------', '-------']\n['Total', 'income', 'tax', 'provision']\n['(benefit)', '$', '-', '-%', '$', '-', '-%', '$', '-', '-%']\n['============', '=======', '============', '=======', '============', '=======']\n[]\n</code></pre>\n\n<p>So I basically want to combine the text elements in the lists, but not the other characters. Anyone an idea how to solve this?</p>\n"}, {"tags": ["python", "python-3.x", "xml"], "comments": [{"owner": {"reputation": 2465, "user_id": 2570277, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0483cce5f2ea53671a36477fed79898b?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2570277/nick"}, "edited": false, "score": 0, "creation_date": 1573679360, "post_id": 58845599, "comment_id": 103964863, "body": "Try a parser like beautifulsoup to manipulate the text"}], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 7415598, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6d889abac3feb8a788e0d0f846d51387?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dev", "link": "https://stackoverflow.com/users/7415598/rahul-dev"}, "edited": false, "score": 0, "creation_date": 1573680031, "post_id": 58845749, "comment_id": 103965156, "body": "Can&#39;t query on &lt;p&gt; (in your first approach). There can be way too many of those. Just need the ones under &lt;textTag&gt; (which can be assumed to be unique)."}, {"owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "reply_to_user": {"reputation": 451, "user_id": 7415598, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6d889abac3feb8a788e0d0f846d51387?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dev", "link": "https://stackoverflow.com/users/7415598/rahul-dev"}, "edited": false, "score": 0, "creation_date": 1573680313, "post_id": 58845749, "comment_id": 103965287, "body": "I was just suggesting the approach. Obviously you need to choose appropriate <code>xpath</code> expression."}, {"owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "reply_to_user": {"reputation": 451, "user_id": 7415598, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6d889abac3feb8a788e0d0f846d51387?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dev", "link": "https://stackoverflow.com/users/7415598/rahul-dev"}, "edited": false, "score": 1, "creation_date": 1573680339, "post_id": 58845749, "comment_id": 103965296, "body": "<a href=\"https://devhints.io/xpath\" rel=\"nofollow noreferrer\">devhints.io/xpath</a> is a good xpath cheatsheet, that you can refer to."}, {"owner": {"reputation": 46640, "user_id": 317052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GaULO.jpg?s=128&g=1", "display_name": "Daniel Haley", "link": "https://stackoverflow.com/users/317052/daniel-haley"}, "edited": false, "score": 0, "creation_date": 1573706139, "post_id": 58845749, "comment_id": 103971998, "body": "If you&#39;re worried about diffing, you should probably create canonical versions of the before/after XML and diff those."}], "tags": [], "owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "is_accepted": false, "score": 0, "last_activity_date": 1573679873, "creation_date": 1573679873, "answer_id": 58845749, "question_id": 58845599, "link": "https://stackoverflow.com/questions/58845599/how-to-extract-text-from-xml-based-on-a-tag-then-put-it-back-python/58845749#58845749", "title": "How to extract text from XML based on a tag &amp; then put it back (Python)?", "body": "<p>Option 1:</p>\n\n<p>You can use the <code>xml</code> module of python for parsing, updating and saving the xml file. A problem though, would be that the resulting xml file might have order of attributes etc different from the original xml file. So when you make a diff, you might see a lot of differences. </p>\n\n<p>So you might do something like. </p>\n\n<pre><code>from xml.etree import ElementTree as ET\n\ntree = ET.parse('xmlfilename')\nroot = tree.getroot()\np_nodes = root.findall('.//&lt;p&gt;')\nfor node in p_nodes:\n   # process\ntree.save()\n</code></pre>\n\n<p>Option 2:</p>\n\n<p>Use regular expression. </p>\n\n<p>Read the file line by line and look for the pattern you are interested in and make the update and write it back. \nThe obvious advantage being the diff between the original and modified file will shown only the update you made. </p>\n\n<pre><code>import re\n\nwith open(outputfile) as fout:\n   with open(xmlfile) as f:\n      data = f.readlines()\n      pattern = re.compile(r\"...\") # your pattern\n      for line in data:\n         re.sub(line, pattern, update)\n         fout.write(line)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46640, "user_id": 317052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GaULO.jpg?s=128&g=1", "display_name": "Daniel Haley", "link": "https://stackoverflow.com/users/317052/daniel-haley"}, "is_accepted": false, "score": 0, "last_activity_date": 1573689792, "creation_date": 1573689792, "answer_id": 58847445, "question_id": 58845599, "link": "https://stackoverflow.com/questions/58845599/how-to-extract-text-from-xml-based-on-a-tag-then-put-it-back-python/58847445#58847445", "title": "How to extract text from XML based on a tag &amp; then put it back (Python)?", "body": "<p>You could use <a href=\"https://lxml.de/tutorial.html\" rel=\"nofollow noreferrer\">lxml</a> (which has much better <a href=\"https://docs.python.org/3/library/xml.etree.elementtree.html#xpath-support\" rel=\"nofollow noreferrer\">XPath 1.0 support than ElementTree</a>) to find all <code>text()</code> nodes that contain \"-----some text goes here-----\", modify the text, and then replace the <a href=\"https://lxml.de/tutorial.html#elements-contain-text\" rel=\"nofollow noreferrer\">.text (or .tail)</a> of the parent.</p>\n\n<p>Example...</p>\n\n<p><strong>Python 3.x</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from lxml import etree\n\nxml = \"\"\"\n&lt;textTag&gt;\n    &lt;div xmlns=\"http://www.tei-c.org/ns/1.0\"&gt;&lt;p&gt; &lt;br/&gt;-----some text goes here-----\n    &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/textTag&gt;\"\"\"\n\ntree = etree.fromstring(xml)\nfor text in tree.xpath(\".//text()[contains(.,'-----some text goes here-----')]\"):\n    parent = text.getparent()\n    new_text = text.replace(\"-----some text goes here-----\", \"---- BAM! ----\")\n    if text.is_text:\n        parent.text = new_text\n    elif text.is_tail:\n        parent.tail = new_text\n\netree.dump(tree)\n</code></pre>\n\n<p><strong>Output</strong> (dumped to console)</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;textTag&gt;\n    &lt;div xmlns=\"http://www.tei-c.org/ns/1.0\"&gt;&lt;p&gt; ---- BAM! ----\n    &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/textTag&gt;\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 7415598, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6d889abac3feb8a788e0d0f846d51387?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dev", "link": "https://stackoverflow.com/users/7415598/rahul-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573689792, "creation_date": 1573679193, "question_id": 58845599, "link": "https://stackoverflow.com/questions/58845599/how-to-extract-text-from-xml-based-on-a-tag-then-put-it-back-python", "title": "How to extract text from XML based on a tag &amp; then put it back (Python)?", "body": "<p>I have a messy XML, with some tag structure like - </p>\n\n<pre><code>&lt;textTag&gt;\n    &lt;div xmlns=\"http://www.tei-c.org/ns/1.0\"&gt;&lt;p&gt; -----some text goes here-----\n    &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/textTag&gt;\n</code></pre>\n\n<p>I want to extract <code>-----some text goes here-----</code>, make some changes and put it back into the XML. How should I go about it?</p>\n"}, {"tags": ["python", "windows", "pip"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1573683227, "post_id": 58845545, "comment_id": 103966510, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52460484/python-3-5-pip-9-attributeerror-nonetype-object-has-no-attribute-bytes\">Python 3.5 pip 9 AttributeError: &#39;NoneType&#39; object has no attribute &#39;bytes&#39;</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1573683233, "post_id": 58845545, "comment_id": 103966514, "body": "<a href=\"https://stackoverflow.com/search?q=%5Bpip%5D+AttributeError%3A+%27NoneType%27+object+has+no+attribute+%27bytes%27\">stackoverflow.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2597, "user_id": 276168, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c3737e23c60ee88122120ea1eff8017?s=128&d=identicon&r=PG", "display_name": "D\u017eenan", "link": "https://stackoverflow.com/users/276168/d%c5%beenan"}, "edited": false, "score": 0, "creation_date": 1573679737, "post_id": 58845623, "comment_id": 103965028, "body": "I needed the --user flag too: <code>python -m pip install --user --force-reinstall -U pip</code>."}], "tags": [], "owner": {"reputation": 5049, "user_id": 284120, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l4Pau.jpg?s=128&g=1", "display_name": "tobygriffin", "link": "https://stackoverflow.com/users/284120/tobygriffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1573679303, "creation_date": 1573679303, "answer_id": 58845623, "question_id": 58845545, "link": "https://stackoverflow.com/questions/58845545/how-to-suppress-outdated-pip-warning/58845623#58845623", "title": "How to suppress outdated pip warning", "body": "<p>To upgrade pip on Windows, you may find answers in <a href=\"https://github.com/pypa/pip/issues/5820\" rel=\"nofollow noreferrer\">this thread</a>. This seems to be the solution:</p>\n\n<pre><code>python -m pip install -U --force-reinstall pip\n</code></pre>\n\n<p>Or to answer your actual question about suppressing pip warnings, pip has the <code>-q/-qq/-qqq</code> option to suppress logging output.</p>\n"}], "owner": {"reputation": 2597, "user_id": 276168, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c3737e23c60ee88122120ea1eff8017?s=128&d=identicon&r=PG", "display_name": "D\u017eenan", "link": "https://stackoverflow.com/users/276168/d%c5%beenan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 58845623, "answer_count": 1, "score": 0, "last_activity_date": 1573679303, "creation_date": 1573678884, "question_id": 58845545, "link": "https://stackoverflow.com/questions/58845545/how-to-suppress-outdated-pip-warning", "title": "How to suppress outdated pip warning", "body": "<p>Every <code>pip</code> command ends with a warning:</p>\n\n<blockquote>\n  <p>You are using pip version 18.1, however version 19.3.1 is available.\n  You should consider upgrading via the 'python -m pip install --upgrade\n  pip' command.</p>\n</blockquote>\n\n<p>However, updating pip doesn't work, see below. Can I suppress the warning, and how? Can I update pip, and how?</p>\n\n<p><a href=\"https://i.stack.imgur.com/XYMnE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XYMnE.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>C:\\WINDOWS\\system32>python -m pip install --upgrade pip Collecting pip\n  Downloading\n  <a href=\"https://files.pythonhosted.org/packages/00/b6/9cfa56b4081ad13874b0c6f96af8ce16cfbc1cb06bedf8e9164ce5551ec1/pip-19.3.1-py2.py3-none-any.whl\" rel=\"nofollow noreferrer\">https://files.pythonhosted.org/packages/00/b6/9cfa56b4081ad13874b0c6f96af8ce16cfbc1cb06bedf8e9164ce5551ec1/pip-19.3.1-py2.py3-none-any.whl</a>\n  (1.4MB)\n      100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.4MB 7.3MB/s Installing collected packages: pip   Found existing installation: pip 18.1\n      Uninstalling pip-18.1:\n        Successfully uninstalled pip-18.1   Rolling back uninstall of pip Exception: Traceback (most recent call last):   File\n  \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_internal\\cli\\base_command.py\",\n  line 143, in main\n      status = self.run(options, args)   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_internal\\commands\\install.py\",\n  line 366, in run\n      use_user_site=options.use_user_site,   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_internal\\req__init__.py\",\n  line 49, in install_given_reqs\n      **kwargs   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_internal\\req\\req_install.py\",\n  line 760, in install\n      use_user_site=use_user_site, pycompile=pycompile,   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_internal\\req\\req_install.py\",\n  line 382, in move_wheel_files\n      warn_script_location=warn_script_location,   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_internal\\wheel.py\",\n  line 441, in move_wheel_files\n      generated.extend(maker.make(spec))   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_vendor\\distlib\\scripts.py\",\n  line 403, in make\n      self._make_script(entry, filenames, options=options)   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_vendor\\distlib\\scripts.py\",\n  line 307, in _make_script\n      self._write_script(scriptnames, shebang, script, filenames, ext)   File\n  \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_vendor\\distlib\\scripts.py\",\n  line 243, in _write_script\n      launcher = self._get_launcher('t')   File \"C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip_vendor\\distlib\\scripts.py\",\n  line 382, in _get_launcher\n      result = finder(distlib_package).find(name).bytes AttributeError: 'NoneType' object has no attribute 'bytes' You are using pip version\n  18.1, however version 19.3.1 is available. You should consider upgrading via the 'python -m pip install --upgrade pip' command.</p>\n  \n  <p>C:\\WINDOWS\\system32>pip --version pip 18.1 from\n  C:\\Users\\Dzenan\\AppData\\Roaming\\Python\\Python37\\site-packages\\pip\n  (python 3.7)</p>\n</blockquote>\n"}, {"tags": ["python", "sql", "sql-server", "oracle"], "comments": [{"owner": {"reputation": 35510, "user_id": 3706016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wqmW0.jpg?s=128&g=1", "display_name": "jarlh", "link": "https://stackoverflow.com/users/3706016/jarlh"}, "edited": false, "score": 0, "creation_date": 1573678915, "post_id": 58845541, "comment_id": 103964659, "body": "Are you using MS SQL Server or Oracle?"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 35510, "user_id": 3706016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wqmW0.jpg?s=128&g=1", "display_name": "jarlh", "link": "https://stackoverflow.com/users/3706016/jarlh"}, "edited": false, "score": 0, "creation_date": 1573678998, "post_id": 58845541, "comment_id": 103964692, "body": "@jarlh both. Some of my queries will be directly on the SQL Server and some will be using <code>OPENQUERY</code> against a linked Oracle server. I can get data with single values as columns but I need to be able to do this with a list of values. Otherwise I will have to build 20 Union statements and I really don&#39;t think that is efficient."}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 1, "creation_date": 1573679287, "post_id": 58845541, "comment_id": 103964821, "body": "Not sure how you would do this in python but what you are describing is a table valued parameter in sql server."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1573679349, "post_id": 58845541, "comment_id": 103964857, "body": "@SeanLange this has to be pass in a query string that is sent to the SQL Server via pyodbc using the ODBC standard drivers. Again I can do this with single values just not lists."}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1573679532, "post_id": 58845541, "comment_id": 103964938, "body": "Well as you have found out you can&#39;t pass arrays of values in a standard string. And you have a two dimensional array at that. You can use a string splitter and pass in delimited lists. But you are going to need one that returns the ordinal position of each element so you can reassemble a delimited list and get the values lined up correctly. Here is a great example of one of those. <a href=\"https://www.sqlservercentral.com/articles/reaping-the-benefits-of-the-window-functions-in-t-sql-2\" rel=\"nofollow noreferrer\">sqlservercentral.com/articles/&hellip;</a>"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1573679756, "post_id": 58845541, "comment_id": 103965037, "body": "@SeanLange hum. That is a bit more complicated than I will be able to implement any time soon. I guess for now I will write UNIONS until I can figure out how to implement what you have linked."}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1573679902, "post_id": 58845541, "comment_id": 103965102, "body": "Yeah I hear you there. But what you are trying to do is pass an entire table with nothing but a string. This is sort of like passing a single tab of data from excel in a string. It is complicated because that is not a good way of sending that information. If I understood what you are trying to do more clearly I could maybe offer some better alternatives."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1573680153, "post_id": 58845541, "comment_id": 103965208, "body": "Ya. This is very similar to taking the data stored in excel, converting it into Python lists and then using those list to build the select statement. Its not a problem when I only need to use one column of data from excel in a <code>WHERE IN</code> statement but when I also want to take several other columns as data in the returned table is where I am getting stuck. I could likely do some extra work to match rows in one tab of excel and then copy that data over to the new tab that holds the query results. Its a work around at least but it would have been so much nicer to simple use a list in the select."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1573680322, "post_id": 58845541, "comment_id": 103965290, "body": "@SeanLange can you take a 2D Array and send it to the server as a table to be used in the <code>FROM&#47;JOIN</code>? Like inside the sql string. One problem is I cannot create temp tables as this application will be used by many people at one time. So constant creation and deletion of temp tables is not a great idea. I wonder if something like PANDA&#39;s can be used as a table in a query against a server?"}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1573682126, "post_id": 58845541, "comment_id": 103966078, "body": "Something like this help? <a href=\"https://stackoverflow.com/questions/43354292/how-to-pass-a-data-frame-as-parameter-to-a-sql-query-in-python/43354606\" title=\"how to pass a data frame as parameter to a sql query in python\">stackoverflow.com/questions/43354292/&hellip;</a>"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1573682572, "post_id": 58845541, "comment_id": 103966254, "body": "@SeanLange that is what I am currently doing. That works for only needing one list of data to work with but when I need multiple list to be returned in the select itself that is my issue. I have however finished the code to write multiple UNIONS for now until I can get around to your first link."}], "answers": [{"comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1573687084, "post_id": 58846873, "comment_id": 103967753, "body": "I have updated my questions to provide some more context and how I plan to use the data. I will have to wait till I get back to work tomorrow to test the code against out server."}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1573751891, "post_id": 58846873, "comment_id": 103995651, "body": "@Mike-SMT I just updated my answer. Let me know if you have any question."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1573755878, "post_id": 58846873, "comment_id": 103997649, "body": "That is interesting is <code>df_test.set_index(&#39;ID&#39;).join(df_table.set_index(&#39;VALUE&#39;))</code> basically the same thing as <code>JOIN ON</code>?. My concern here is that it looks to be a full table scan between the 2 tables and that will be a hefty price on the spool space. Pulling down all the data will not work. I need to somehow send the column of say TEST as a select statement to the Oracle server so it is only pulling back values I need."}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1573756149, "post_id": 58846873, "comment_id": 103997778, "body": "@Mike-SMT, Could you test it? As I know, pandas now has one of the fastest in-memory database join operators out there."}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1573756460, "post_id": 58846873, "comment_id": 103997909, "body": "@Mike-SMT, Also, you can use DataFrame.where() after you joined the tables to pull the data you need."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1573757182, "post_id": 58846873, "comment_id": 103998244, "body": "Well your statement looks like it is pulling all the data from each table into memory. That is bad practice and very high on CPU cost. However when I get a chance I will test it to verify."}], "tags": [], "owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "is_accepted": false, "score": 0, "last_activity_date": 1573768998, "last_edit_date": 1573768998, "creation_date": 1573685704, "answer_id": 58846873, "question_id": 58845541, "link": "https://stackoverflow.com/questions/58845541/how-to-use-a-list-array-of-values-as-column-name-in-select-statement/58846873#58846873", "title": "How to use a list/array of values as column name in select statement?", "body": "<p><strong><em>Update:</em></strong></p>\n\n<p>1, Convert the table into 3 lists:</p>\n\n<pre><code>import cx_Oracle\nimport pandas\n\ndb = cx_Oracle.connect('*******', '********', '*******')\nconn = db.cursor()\n\nsql_test = '''SELECT * FROM TEST'''\n\nsql_table = '''SELECT * FROM \"TABLE\" '''\n\ndf_test = pandas.read_sql_query(sql_test,db)\ndf_table = pandas.read_sql_query(sql_table,db)\n\nser_aggCol=df_test.aggregate(lambda x: [x.tolist()], axis=0).map(lambda x:x[0])\n\nprint(ser_aggCol, sep='\\n', end='\\n\\n\\n')\n\nprint(ser_aggCol['ID'])\nprint(ser_aggCol['TYPE'])\nprint(ser_aggCol['OTHER'])\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/CZwZv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CZwZv.png\" alt=\"enter image description here\"></a></p>\n\n<p>2, Use while loop to concat the dataframe row by row.</p>\n\n<pre><code>sql_max = '''SELECT MAX(ID) FROM TEST'''\nconn.execute(sql_max)\nmax_id = 0\nfor result in conn:\n    max_id = result[0]\n\nprint(max_id)\n\ni = 0\nsql_first_row = '''select \\'''' + ser_aggCol['TYPE'][i] + '''\\' as TYPE, \\'''' + ser_aggCol['OTHER'][i] + '''\\' AS OTHER, VALUE, COLOR FROM \"TABLE\" WHERE VALUE = '''+ str(ser_aggCol['ID'][i])\ndf_result = pandas.read_sql_query(sql_first_row,db)\n\nwhile i + 1 &lt;= max_id - 1:\n    new_sql = '''select \\'''' + ser_aggCol['TYPE'][i+1] + '''\\' as TYPE, \\'''' + ser_aggCol['OTHER'][i+1] + '''\\' AS OTHER, VALUE, COLOR FROM \"TABLE\" WHERE VALUE = '''+ str(ser_aggCol['ID'][i+1])\n    df_new = pandas.read_sql_query(new_sql, db)\n    df_result = pandas.concat([df_result,df_new])\n    i = i + 1\n\nprint(df_result)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/eo5it.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eo5it.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>Original Post:</strong></p>\n\n<p>My approach is: </p>\n\n<p>1, Read the SQL results into the dataframes</p>\n\n<pre><code>pandas.read_sql_query(sql, con, index_col=None, coerce_float=True, params=None, parse_dates=None, chunksize=None)\n</code></pre>\n\n<p>2, Join the dataframes using Pandas</p>\n\n<pre><code>DataFrame.join(self, other, on=None, how='left', lsuffix='', rsuffix='', sort=False)\n</code></pre>\n\n<hr>\n\n<hr>\n\n<p>Testing:</p>\n\n<p>I do not have the SQL Server client on my new PC so I created those two tables in Oracle only. You just need to add the SQL Server connection in your Python.\nLet me know if you got stuck here.</p>\n\n<p><strong><em>Created two tables in Oracle:</em></strong></p>\n\n<p><strong>Test:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/nF7ft.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nF7ft.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Table:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/tCo9z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tCo9z.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Then Python:</strong></p>\n\n<pre><code>import cx_Oracle\nimport pandas\n\ndb = cx_Oracle.connect('********', '********', '********')\nconn = db.cursor()\n\nsql_test = '''SELECT * FROM TEST'''\n\nsql_table = '''SELECT * FROM \"TABLE\" '''\n\ndf_test = pandas.read_sql_query(sql_test,db)\ndf_table = pandas.read_sql_query(sql_table,db)\n\nprint(df_test) \nprint(df_table)\n\nprint(df_test.set_index('ID').join(df_table.set_index('VALUE')))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   ID TYPE OTHER\n0   1    C     S\n1   2    C     O\n2   3    D     D\n3   4    D     H\n\n   VALUE  COLOR\n0      1    Red\n1      2  Green\n2      3   Blue\n3      4  Black\n\nID  TYPE OTHER  COLOR                  \n1     C     S    Red\n2     C     O  Green\n3     D     D   Blue\n4     D     H  Black\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": true, "score": 0, "last_activity_date": 1579896267, "last_edit_date": 1579896267, "creation_date": 1573740314, "answer_id": 58858604, "question_id": 58845541, "link": "https://stackoverflow.com/questions/58845541/how-to-use-a-list-array-of-values-as-column-name-in-select-statement/58858604#58858604", "title": "How to use a list/array of values as column name in select statement?", "body": "<p>Ok so here is the solution I have to go with.</p>\n\n<p>Instead of managing the data on the client side I will create a new database on the SQL Server and then all the needed tables the tool will interact with.</p>\n\n<p>Then I will have the program insert and delete rows in each table based on the user who is using the tool.</p>\n\n<p>Getting the username is simple as:</p>\n\n<pre><code>import os\n\nprint(os.getlogin())\n</code></pre>\n\n<p>As there will 99% of the time be less than 100 rows being added and deleted for any of the say 10 users at a time this will be efficient enough to handle the work.</p>\n\n<p>This solutions is far more efficient then my current <code>UNION</code> method and will also allow each user to only see and work with data related to their login.</p>\n\n<p>Seeing that each table will likely never exceed a total of 10,000 rows I don't think this will be much of an issue even without having a primary key to work with.</p>\n"}], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2132, "favorite_count": 0, "accepted_answer_id": 58858604, "answer_count": 2, "score": 0, "last_activity_date": 1579896267, "creation_date": 1573678865, "last_edit_date": 1573690658, "question_id": 58845541, "link": "https://stackoverflow.com/questions/58845541/how-to-use-a-list-array-of-values-as-column-name-in-select-statement", "title": "How to use a list/array of values as column name in select statement?", "body": "<p>Say I have 3 list of data that I am using to build a new query. I need to take these list of data and return the values of those list where things were found.</p>\n\n<p>So my question is this:</p>\n\n<blockquote>\n  <p>Is there a standard method of taking a list and using it as a column?</p>\n</blockquote>\n\n<p>I will need to use multiple list as columns where one column is the \"JOIN ON\" or \"WHERE IN\" portion.</p>\n\n<p>The results from my first query are used to build my 3 list.</p>\n\n<p>Say I get back this data:</p>\n\n<pre><code>[[ID, TYPE, OTHER],\n [1, C, S], \n [2, C, O],\n [3, D, D],\n [4, D, H]]\n</code></pre>\n\n<p>Then convert that table/2D Array to the following Python List:</p>\n\n<pre><code>[1, 2, 3, 4]\n[C, C, D, D]\n[S, O, D, H]\n</code></pre>\n\n<p>Now I want to use those 2 list as columns in a select statement like this:</p>\n\n<pre><code>select [C, C, D, D] as TYPE # These 2 list are needed to return in the correct order\n      ,[S, O, D, H] as OTHER  # as it relates to [1, 2, 3, 4] in the WHERE.\n      ,table.value\n      ,table.color\nFrom table\nwhere table.value in [1, 2, 3, 4]  # one list is used to deal with the where \n</code></pre>\n\n<p><code>table</code> contains 2 columns:</p>\n\n<pre><code>VALUE    COLOR\n1        Red\n2        Green\n3        Blue\n4        Black\n</code></pre>\n\n<p>Results should look like this:</p>\n\n<pre><code>TYPE    OTHER    VALUE    COLOR\nC       S        1        Red\nC       O        2        Green\nD       D        3        Blue\nD       H        4        Black\n</code></pre>\n"}, {"tags": ["javascript", "python", "selenium", "python-requests"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10275798"}, "edited": false, "score": 3, "creation_date": 1573679432, "post_id": 58845536, "comment_id": 103964888, "body": "You&#39;re trying to get around a captcha by some automation? That&#39;s exactly what the captcha is there to prevent."}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 0, "creation_date": 1573685942, "post_id": 58845536, "comment_id": 103967460, "body": "you probably need something with a real browser that executs java script like for example selenium. I think you could be able to extract cookies from selenium, though I&#39;m not 100% sure. If you are able to extract cookies, then you can pass the session cookies and others to requests and continue from there."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1573691417, "post_id": 58845536, "comment_id": 103968793, "body": "Yes you can absolutely pass selenium cookies to requests, I&#39;ve done it many times."}, {"owner": {"reputation": 789, "user_id": 12291742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1ofq.png?s=128&g=1", "display_name": "Ekrem Din&#231;el", "link": "https://stackoverflow.com/users/12291742/ekrem-din%c3%a7el"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1573842599, "post_id": 58845536, "comment_id": 104032815, "body": "@pguardiario can you share a code example or a source about passing selenium cookies to requests?"}], "answers": [{"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 1, "last_activity_date": 1573862235, "creation_date": 1573862235, "answer_id": 58886190, "question_id": 58845536, "link": "https://stackoverflow.com/questions/58845536/python-requests-to-login-website-behind-captcha/58886190#58886190", "title": "Python requests to login website behind captcha", "body": "<p>I believe it's something along the lines of:</p>\n\n<pre><code>session = requests.Session()\nsession.cookies.update(driver.getCookies())\n</code></pre>\n\n<p><a href=\"https://webdriver.io/docs/api/browser/getCookies.html\" rel=\"nofollow noreferrer\">https://webdriver.io/docs/api/browser/getCookies.html</a></p>\n"}], "owner": {"reputation": 789, "user_id": 12291742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1ofq.png?s=128&g=1", "display_name": "Ekrem Din&#231;el", "link": "https://stackoverflow.com/users/12291742/ekrem-din%c3%a7el"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573862235, "creation_date": 1573678827, "last_edit_date": 1573680272, "question_id": 58845536, "link": "https://stackoverflow.com/questions/58845536/python-requests-to-login-website-behind-captcha", "title": "Python requests to login website behind captcha", "body": "<p>I want to log in an website <a href=\"https://eokulyd.meb.gov.tr/\" rel=\"nofollow noreferrer\">https://eokulyd.meb.gov.tr/</a> and read some html from that. </p>\n\n<p>But the website has an control image, user must write number which is in that image. </p>\n\n<p>I know requests has Session class that allow us to log in websites, But when I use requests I cant take that control image. </p>\n\n<p>I think that image is loading by JavaScript when website is opening. </p>\n\n<p>Is there any way to use requests or should i use selenium? If I should use selenium, is there any way to use selenium while log in, and then use requests?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3185, "user_id": 9733868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ul3IR.jpg?s=128&g=1", "display_name": "Pedram Parsian", "link": "https://stackoverflow.com/users/9733868/pedram-parsian"}, "edited": false, "score": 1, "creation_date": 1573679137, "post_id": 58845525, "comment_id": 103964758, "body": "Are you running the project with <code>DEBUG = True</code>?"}, {"owner": {"reputation": 31, "user_id": 12367914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f43b9e31b71e2abc5a02354fb7ea08?s=128&d=identicon&r=PG&f=1", "display_name": "Mari", "link": "https://stackoverflow.com/users/12367914/mari"}, "reply_to_user": {"reputation": 3185, "user_id": 9733868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ul3IR.jpg?s=128&g=1", "display_name": "Pedram Parsian", "link": "https://stackoverflow.com/users/9733868/pedram-parsian"}, "edited": false, "score": 0, "creation_date": 1573679533, "post_id": 58845525, "comment_id": 103964940, "body": "@PedramParsian Yes"}, {"owner": {"reputation": 219, "user_id": 9843311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b937a6f203853bc7c6a5894fe81741?s=128&d=identicon&r=PG&f=1", "display_name": "F. Serna", "link": "https://stackoverflow.com/users/9843311/f-serna"}, "edited": false, "score": 0, "creation_date": 1573679719, "post_id": 58845525, "comment_id": 103965019, "body": "Do you have <code>django.contrib.staticfiles</code> in your <code>INSTALLED_APP</code> section in your settings file?"}, {"owner": {"reputation": 31, "user_id": 12367914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f43b9e31b71e2abc5a02354fb7ea08?s=128&d=identicon&r=PG&f=1", "display_name": "Mari", "link": "https://stackoverflow.com/users/12367914/mari"}, "reply_to_user": {"reputation": 219, "user_id": 9843311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b937a6f203853bc7c6a5894fe81741?s=128&d=identicon&r=PG&f=1", "display_name": "F. Serna", "link": "https://stackoverflow.com/users/9843311/f-serna"}, "edited": false, "score": 0, "creation_date": 1573679843, "post_id": 58845525, "comment_id": 103965071, "body": "@F.Serna Yea I have that too"}, {"owner": {"reputation": 2253, "user_id": 12279585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bo79C8N91Dg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnRgwDnwn6kzjCh_bZZwuu2M0opQ/photo.jpg?sz=128", "display_name": "ha-neul", "link": "https://stackoverflow.com/users/12279585/ha-neul"}, "edited": false, "score": 0, "creation_date": 1573681053, "post_id": 58845525, "comment_id": 103965612, "body": "do you have <code>STATIC_ROOT = os.path.join(BASE_DIR, &#39;static&#39;)</code> in your settings.py?"}, {"owner": {"reputation": 31, "user_id": 12367914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f43b9e31b71e2abc5a02354fb7ea08?s=128&d=identicon&r=PG&f=1", "display_name": "Mari", "link": "https://stackoverflow.com/users/12367914/mari"}, "reply_to_user": {"reputation": 2253, "user_id": 12279585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bo79C8N91Dg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnRgwDnwn6kzjCh_bZZwuu2M0opQ/photo.jpg?sz=128", "display_name": "ha-neul", "link": "https://stackoverflow.com/users/12279585/ha-neul"}, "edited": false, "score": 0, "creation_date": 1573681277, "post_id": 58845525, "comment_id": 103965704, "body": "@ha-neul Yes. All my static roots, urls as well as media are correct"}, {"owner": {"reputation": 2253, "user_id": 12279585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bo79C8N91Dg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnRgwDnwn6kzjCh_bZZwuu2M0opQ/photo.jpg?sz=128", "display_name": "ha-neul", "link": "https://stackoverflow.com/users/12279585/ha-neul"}, "edited": false, "score": 0, "creation_date": 1573681508, "post_id": 58845525, "comment_id": 103965808, "body": "so, under the Static-root folder, do you see <code>admin</code> folder with <code>css</code> subfolder? also, when you run collectstatic, was there any error message?"}, {"owner": {"reputation": 31, "user_id": 12367914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f43b9e31b71e2abc5a02354fb7ea08?s=128&d=identicon&r=PG&f=1", "display_name": "Mari", "link": "https://stackoverflow.com/users/12367914/mari"}, "reply_to_user": {"reputation": 2253, "user_id": 12279585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bo79C8N91Dg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnRgwDnwn6kzjCh_bZZwuu2M0opQ/photo.jpg?sz=128", "display_name": "ha-neul", "link": "https://stackoverflow.com/users/12279585/ha-neul"}, "edited": false, "score": 0, "creation_date": 1573681918, "post_id": 58845525, "comment_id": 103965985, "body": "@ha-neul Yes I&#39;ve checked both. No errors and the admin folder has a populated css folder. Another weird thing I noticed is that my site changes up depending on if I&#39;m using <code>localhost:8000</code> or <code>127.0.0.1:8000</code>. Like somethings won&#39;t render with <code>127.0.0.1</code> like they do with <code>localhost</code>. Not sure if it has to do with <code>collectstatic</code> though."}, {"owner": {"reputation": 2253, "user_id": 12279585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bo79C8N91Dg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnRgwDnwn6kzjCh_bZZwuu2M0opQ/photo.jpg?sz=128", "display_name": "ha-neul", "link": "https://stackoverflow.com/users/12279585/ha-neul"}, "edited": false, "score": 0, "creation_date": 1573682239, "post_id": 58845525, "comment_id": 103966129, "body": "I had a couple of times with css not doing its job; I solved it by deleting browser history. maybe worth a try."}, {"owner": {"reputation": 31, "user_id": 12367914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f43b9e31b71e2abc5a02354fb7ea08?s=128&d=identicon&r=PG&f=1", "display_name": "Mari", "link": "https://stackoverflow.com/users/12367914/mari"}, "reply_to_user": {"reputation": 2253, "user_id": 12279585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bo79C8N91Dg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcnRgwDnwn6kzjCh_bZZwuu2M0opQ/photo.jpg?sz=128", "display_name": "ha-neul", "link": "https://stackoverflow.com/users/12279585/ha-neul"}, "edited": false, "score": 0, "creation_date": 1573682939, "post_id": 58845525, "comment_id": 103966396, "body": "@ha-neul Crazy how that worked lol. Fixed everything. Thank you"}, {"owner": {"reputation": 530, "user_id": 6092721, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/rGp52.jpg?s=128&g=1", "display_name": "Christopher Turnbull", "link": "https://stackoverflow.com/users/6092721/christopher-turnbull"}, "edited": false, "score": 0, "creation_date": 1609056541, "post_id": 58845525, "comment_id": 115737534, "body": "It didn&#39;t fix it for me, and I&#39;m still getting the error"}], "owner": {"reputation": 31, "user_id": 12367914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f43b9e31b71e2abc5a02354fb7ea08?s=128&d=identicon&r=PG&f=1", "display_name": "Mari", "link": "https://stackoverflow.com/users/12367914/mari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1987, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1600846606, "creation_date": 1573678778, "last_edit_date": 1573679487, "question_id": 58845525, "link": "https://stackoverflow.com/questions/58845525/django-admin-site-not-loading-css", "title": "Django admin site not loading CSS", "body": "<p>Not sure what is going on, but my admin page on my Django site isn't loading any CSS. Not sure if it has to do with <code>python manage.py collectstatic</code> but ever since I served my static files using this, my admin page doesn't load with CSS and instead, it's plain HTML. This same issue is happening with a few projects of mine when using <code>collectstatic</code>. Any ideas? They'd be appreciated. Since I don't know what the issue is or where to start, I'm not sure what code to provide. If you want to see anything, let me know. </p>\n\n<p>I've noticed when I viewed the source of the admin page and clicked on the css links (<code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/static/admin/css/base.css\"&gt;</code>), the base.css file seems to be corrupted maybe ? <a href=\"https://i.stack.imgur.com/youTA.png\" rel=\"nofollow noreferrer\">What the base.css looks like</a> All the other css files when clicked are readable. <a href=\"https://i.stack.imgur.com/TQZiI.png\" rel=\"nofollow noreferrer\">What the other css files look like</a></p>\n"}]