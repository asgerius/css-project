[{"tags": ["python", "python-requests", "python-asyncio", "concurrent.futures", "timeit"], "comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1535627430, "post_id": 52087546, "comment_id": 91141127, "body": "<code>res = yield resp</code> should be <code>res = await resp</code>. (Note that code predating Python 3.5 used <code>yield from</code> to await - but never just <code>yield</code>.)"}, {"owner": {"reputation": 2427, "user_id": 5042169, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IcPwP.png?s=128&g=1", "display_name": "Jun711", "link": "https://stackoverflow.com/users/5042169/jun711"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1535645385, "post_id": 52087546, "comment_id": 91153491, "body": "i am using Python 3.6 though but I will give it a try @user4815162342"}], "owner": {"reputation": 2427, "user_id": 5042169, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IcPwP.png?s=128&g=1", "display_name": "Jun711", "link": "https://stackoverflow.com/users/5042169/jun711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 974, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1535645425, "creation_date": 1535587193, "last_edit_date": 1535645425, "question_id": 52087546, "link": "https://stackoverflow.com/questions/52087546/time-asynchronous-http-requests-using-asyncio-and-timeit", "title": "Time asynchronous http requests using asyncio and timeit", "body": "<p>I found this code snippet from <a href=\"http://skipperkongen.dk/2016/09/09/easy-parallel-http-requests-with-python-and-asyncio/\" rel=\"nofollow noreferrer\">shipperkongen blog</a> regarding how to send concurrent requests using asyncio. I added in timeit to calculate the time used for the requests. However, it seems to wait for all requests to complete before proceeding to calculate the time needed. </p>\n\n<p>I would like to know how to get the time elapsed between the concurrent request sent and the first response. How should I modify the code to achieve this? Thanks</p>\n\n<p>Note that I added in the timeit lines and I am using Python3.6</p>\n\n<pre><code>import asyncio\nimport concurrent.futures\nimport requests\nimport timeit\n\nasync def main():\n\n    with concurrent.futures.ThreadPoolExecutor(max_workers=20) as executor:\n        loop = asyncio.get_event_loop()\n        start = timeit.default_timer()\n        futures = [\n            loop.run_in_executor(\n                executor, \n                requests.get, \n                'http://example.org/'\n            )\n            for i in range(20)\n        ]\n        for response in await asyncio.gather(*futures):\n            stop = timeit.default_timer()\n            pass\n        elapsed = stop - start\n        print(elapsed)\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n</code></pre>\n\n<p>I got error that says \"'return' with value in async generator\" when I tried with <code>asyncio.as_completed(futures)</code></p>\n\n<pre><code>import asyncio\nimport concurrent.futures\nimport requests\nimport timeit\n\nasync def main():\n\n    with concurrent.futures.ThreadPoolExecutor(max_workers=20) as executor:\n        loop = asyncio.get_event_loop()\n        start = timeit.default_timer()\n        futures = [\n            loop.run_in_executor(\n                executor, \n                requests.get, \n                'http://example.org/'\n            )\n            for i in range(20)\n        ]\n        for resp in asyncio.as_completed(futures):\n            res = yield resp\n            print(res.status_code)\n            stop = timeit.default_timer()\n            elapsed = stop - start\n            print(elapsed)\n            return elapsed\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "opencv", "opencv3.0"], "comments": [{"owner": {"reputation": 3515, "user_id": 2145211, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZT0xb.jpg?s=128&g=1", "display_name": "Harrison", "link": "https://stackoverflow.com/users/2145211/harrison"}, "edited": false, "score": 0, "creation_date": 1535587271, "post_id": 52087533, "comment_id": 91125406, "body": "What have you tried so far?  Generally it is advisable to put in a a code sample of your attempt at the problem"}, {"owner": {"reputation": 677, "user_id": 1418351, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a7dba2123954dce6d12c48c0c74d785?s=128&d=identicon&r=PG", "display_name": "John_Sharp1318", "link": "https://stackoverflow.com/users/1418351/john-sharp1318"}, "edited": false, "score": 0, "creation_date": 1535596866, "post_id": 52087533, "comment_id": 91127251, "body": "Could you please add an image to your question in order to allow the reader to have a better understanding of your issue."}], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 10292474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c6ae2dc17050f6b83e490b6a8e619?s=128&d=identicon&r=PG&f=1", "display_name": "CallMeCrazy", "link": "https://stackoverflow.com/users/10292474/callmecrazy"}, "edited": false, "score": 0, "creation_date": 1538004006, "post_id": 52088840, "comment_id": 91994175, "body": "Is there a best way to segment them into rows and columns as well?"}], "tags": [], "owner": {"reputation": 126, "user_id": 10013640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wcGQenH-nU4/AAAAAAAAAAI/AAAAAAAAAGg/WF5I6royvAI/photo.jpg?sz=128", "display_name": "taront", "link": "https://stackoverflow.com/users/10013640/taront"}, "is_accepted": false, "score": 2, "last_activity_date": 1535599639, "creation_date": 1535599639, "answer_id": 52088840, "question_id": 52087533, "link": "https://stackoverflow.com/questions/52087533/how-to-find-number-of-clusters-in-a-image/52088840#52088840", "title": "How to find number of clusters in a image?", "body": "<p>How is this?</p>\n\n<pre><code>import numpy as np\nimport cv2\n\nimg = cv2.imread('points.jpg')\ngray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)\nret, thresh = cv2.threshold(gray,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)\n\nn_labels, labels, stats, centroids = cv2.connectedComponentsWithStats(thresh)\n\nprint(n_labels)\n\nsize_thresh = 1\nfor i in range(1, n_labels):\n    if stats[i, cv2.CC_STAT_AREA] &gt;= size_thresh:\n        #print(stats[i, cv2.CC_STAT_AREA])\n        x = stats[i, cv2.CC_STAT_LEFT]\n        y = stats[i, cv2.CC_STAT_TOP]\n        w = stats[i, cv2.CC_STAT_WIDTH]\n        h = stats[i, cv2.CC_STAT_HEIGHT]\n        cv2.rectangle(img, (x, y), (x+w, y+h), (0, 255, 0), thickness=1)\n\ncv2.imwrite(\"out.jpg\", img)\n</code></pre>\n\n<p>number of cluster : 974<br>\nout.jpg :<br>\n<a href=\"https://i.stack.imgur.com/rfT22.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rfT22.jpg\" alt=\"enter image description here\"></a> </p>\n"}, {"comments": [{"owner": {"reputation": 122, "user_id": 10292474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c6ae2dc17050f6b83e490b6a8e619?s=128&d=identicon&r=PG&f=1", "display_name": "CallMeCrazy", "link": "https://stackoverflow.com/users/10292474/callmecrazy"}, "edited": false, "score": 0, "creation_date": 1538003973, "post_id": 52089196, "comment_id": 91994166, "body": "Is there a best way to segment them into rows and columns as well?"}, {"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "reply_to_user": {"reputation": 122, "user_id": 10292474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c6ae2dc17050f6b83e490b6a8e619?s=128&d=identicon&r=PG&f=1", "display_name": "CallMeCrazy", "link": "https://stackoverflow.com/users/10292474/callmecrazy"}, "edited": false, "score": 0, "creation_date": 1538810546, "post_id": 52089196, "comment_id": 92282414, "body": "Yes, come up with a proper question"}], "tags": [], "owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1535603078, "creation_date": 1535603078, "answer_id": 52089196, "question_id": 52087533, "link": "https://stackoverflow.com/questions/52087533/how-to-find-number-of-clusters-in-a-image/52089196#52089196", "title": "How to find number of clusters in a image?", "body": "<p>Solution is as simple as this. You should find number of contours of the image and count them. For that you can use <code>cv2.findContours</code> method with following parameters. For further details about <code>cv2.findContours</code> please check the <a href=\"https://docs.opencv.org/3.0.0/d4/d73/tutorial_py_contours_begin.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<pre><code>import cv2\nimg = cv2.imread('test.jpg', 0)\ncv2.threshold(img,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU,img)\n\nimage, contours, hier = cv2.findContours(img, cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_NONE)\ncount = len(contours)\nprint(count)\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>973\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 10292474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c6ae2dc17050f6b83e490b6a8e619?s=128&d=identicon&r=PG&f=1", "display_name": "CallMeCrazy", "link": "https://stackoverflow.com/users/10292474/callmecrazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1650, "favorite_count": 1, "accepted_answer_id": 52089196, "answer_count": 2, "score": 2, "last_activity_date": 1535607613, "creation_date": 1535587077, "last_edit_date": 1535607613, "question_id": 52087533, "link": "https://stackoverflow.com/questions/52087533/how-to-find-number-of-clusters-in-a-image", "title": "How to find number of clusters in a image?", "body": "<p>Find the number of clusters in this image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/HPhnJ.jpg\">\nI'm trying to find the number of cluster in this image. I tried openCV morphologyEx and erode but can't seem to get a single pixel for each cluster. Please suggest which would be the best way to count the number of clusters in an image using openCV preferably in Python. </p>\n\n<p><strong>--Edit</strong></p>\n\n<p>I tried thinning, erode and morphologyEx(closing) but couldn't converge the clusters to a single pixel. Below are some of things I tried.</p>\n\n<pre><code>kernel = np.ones((2, 2), np.uint8) #[[1,1,1],[1,1,1],[1,1,1]\nerosion = cv2.erode(img, kernel, iterations=1)\nclosing = cv2.morphologyEx(img, cv2.MORPH_CLOSE, kernel)\ncv2.imwrite('test1.jpg', erosion)\ncv2.imwrite('test2.jpg', closing)\n\nimg = cv2.imread(file, 0)\nsize = np.size(img)\nskel = np.zeros(img.shape, np.uint8)\n\n#ret, img = cv2.threshold(img, 127, 255, 0)\nelement = cv2.getStructuringElement(cv2.MORPH_CROSS, (3, 3))\ndone = False\n\nwhile (not done):\n    eroded = cv2.erode(img, element)\n    temp = cv2.dilate(eroded, element)\n    temp = cv2.subtract(img, temp)\n    skel = cv2.bitwise_or(skel, temp)\n    img = eroded.copy()\n\n    zeros = size - cv2.countNonZero(img)\n    if zeros == size:\n        done = True\n\ncv2.imwrite('thinning.jpg', skel)\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535587579, "post_id": 52087527, "comment_id": 91125466, "body": "observation: pyqtSlot only works for methods that belong to a class that inherit from QObject, in your case callbackA and callbackB does not belong to any class."}, {"owner": {"reputation": 339, "user_id": 2030914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa1bd039ccc4539bef97f4529d0d07a?s=128&d=identicon&r=PG", "display_name": "DDR", "link": "https://stackoverflow.com/users/2030914/ddr"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535589690, "post_id": 52087527, "comment_id": 91125850, "body": "Interesting! That must be why A and B are working, since pyqtSlot is probably not doing anything in their case and thus not causing the issue."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535589736, "post_id": 52087527, "comment_id": 91125860, "body": "Exactly, my observation goes there."}], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 2030914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa1bd039ccc4539bef97f4529d0d07a?s=128&d=identicon&r=PG", "display_name": "DDR", "link": "https://stackoverflow.com/users/2030914/ddr"}, "is_accepted": false, "score": 0, "last_activity_date": 1536905022, "creation_date": 1536905022, "answer_id": 52325795, "question_id": 52087527, "link": "https://stackoverflow.com/questions/52087527/pyqt5-callback-of-different-name-being-invoked-on-valuechanged/52325795#52325795", "title": "PyQt5 callback of different name being invoked on valueChanged", "body": "<p>So, the fix for this turns out to be simple if non-obvious. After a good 10 hours of trouble:</p>\n\n<p>You fucking change</p>\n\n<pre><code>@pyqtSlot(int)\n</code></pre>\n\n<p>to god damn</p>\n\n<pre><code>@pyqtSlot(int, name=\"unique_name_here\")\n</code></pre>\n\n<p>and it works.</p>\n\n<p>I recommend using the name of the function being decorated as the unique name.</p>\n"}], "owner": {"reputation": 339, "user_id": 2030914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa1bd039ccc4539bef97f4529d0d07a?s=128&d=identicon&r=PG", "display_name": "DDR", "link": "https://stackoverflow.com/users/2030914/ddr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536905022, "creation_date": 1535586997, "question_id": 52087527, "link": "https://stackoverflow.com/questions/52087527/pyqt5-callback-of-different-name-being-invoked-on-valuechanged", "title": "PyQt5 callback of different name being invoked on valueChanged", "body": "<p>I want more than one callback available to an object, but defining <em>any</em> subsequent callback in an object overwrites all previous callbacks. However, the callbacks are decorated, which seems to be messing with things. How should I define object-level callbacks, so I can use self in them?</p>\n\n<p>In the following example, which you can run on any computer with Python 3.x and PyQt5.11.x, a spinbox is hooked up to two valueChanged callbacks. These are called <code>A</code> and <code>C</code>. However, the second callback <code>C</code> never triggers, and a third callback <code>D</code> triggers instead. <code>D</code> should not trigger.</p>\n\n<p>The callbacks print their letters and the spinbox value, so the expected output when spinning the spinbox is:</p>\n\n<pre><code>got A 1\ngot C 1\n</code></pre>\n\n<p>However, the actual output is:</p>\n\n<pre><code>got A 1\ngot D 1\n</code></pre>\n\n<p>This is wrong because the spinbox is hooked up to</p>\n\n<pre><code>callbackA\nself.callbackC\n</code></pre>\n\n<p>I do not know why D is being called, since I don't actually reference it anywhere. However, if we remove any of the decorators from C or D they work again. What am I doing wrong?</p>\n\n<p>The code in question is:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from PyQt5 import QtWidgets\nfrom PyQt5.QtCore import pyqtSlot\n\n\ndef silenceCallbacks(*elements):\n    \"\"\"Silence events for the duration of a callback. Mostly skipped for this reproduction.\"\"\"\n    def silenceCallbacksOf(callback):\n        def silencedCallback(self, *args, **kwargs):\n            callback(self, *args, **kwargs)\n        return silencedCallback\n    return silenceCallbacksOf\n\n\n@pyqtSlot(int)\n@silenceCallbacks()\ndef callbackA(px: int):\n    #correctly called\n    print('got A', px)\n\n@pyqtSlot(int) #this overwrites the last three functions\n@silenceCallbacks()\ndef callbackB(px: int):\n    #correctly not called\n    print('got B', px)\n\n\nclass RecordingSettings(QtWidgets.QDialog):\n    @pyqtSlot(int)\n    @silenceCallbacks()\n    def callbackC(self, px: int):\n        #incorrectly not called\n        print('got C', px)\n\n    @pyqtSlot(int) #this overwrites the previous pyqtSlot-decorated function\n    @silenceCallbacks()\n    def callbackD(self, px: int):\n        #incorrectly called\n        print('got D', px)\n\n\n    def __init__(self, window):\n        super().__init__()\n\n        spin = QtWidgets.QSpinBox()\n\n        spin.valueChanged.connect(callbackA)\n        spin.valueChanged.connect(self.callbackC)\n\n        layout = QtWidgets.QVBoxLayout()\n        layout.addWidget(spin)\n        self.setLayout(layout)\n        self.show()\n\n\n\napp = QtWidgets.QApplication([])\nrecSettingsWindow = RecordingSettings(app)\nrecSettingsWindow.show()\napp.exec_()\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5", "mysql-python"], "comments": [{"owner": {"reputation": 953, "user_id": 5854343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/erVBq.jpg?s=128&g=1", "display_name": "Bobby Durrett", "link": "https://stackoverflow.com/users/5854343/bobby-durrett"}, "edited": false, "score": 0, "creation_date": 1535587146, "post_id": 52087437, "comment_id": 91125381, "body": "Maybe try _mysql_exceptions.IntegrityError in your except clause."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9008695, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215404891775392/picture?type=large", "display_name": "Oscar Manuel Alba Mendoza", "link": "https://stackoverflow.com/users/9008695/oscar-manuel-alba-mendoza"}, "edited": false, "score": 0, "creation_date": 1535913268, "post_id": 52087672, "comment_id": 91229568, "body": "Thanks for your answer; but suppose you, if the value is your social security identification..."}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "reply_to_user": {"reputation": 1, "user_id": 9008695, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215404891775392/picture?type=large", "display_name": "Oscar Manuel Alba Mendoza", "link": "https://stackoverflow.com/users/9008695/oscar-manuel-alba-mendoza"}, "edited": false, "score": 0, "creation_date": 1535915371, "post_id": 52087672, "comment_id": 91230084, "body": "Create a field for these purposes, for example <code>id_social</code>. Field <code>id</code> - Primary key (primary key) is one of the examples of unique indexes and is used to uniquely identify table entries. None of the two table entries can have the same primary key values."}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1535588645, "last_edit_date": 1535588645, "creation_date": 1535588476, "answer_id": 52087672, "question_id": 52087437, "link": "https://stackoverflow.com/questions/52087437/how-to-fix-duplicate-entry-error-in-a-mysqldb-pyqt5/52087672#52087672", "title": "How To Fix duplicate entry Error in a mysqldb- pyqt5", "body": "<p><code>id</code> an auto increment column you don't need the value for key primary. </p>\n\n<pre><code>cur.execute(\"INSERT INTO data (name, email, phone)\" \n                     \"VALUES('%s','%s','%s')\" % (\n                                                 ''.join(self.linedit1.text()),\n                                                 ''.join(self.linedit2.text()),\n                                                 ''.join(self.linedit3.text()))) \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9008695, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215404891775392/picture?type=large", "display_name": "Oscar Manuel Alba Mendoza", "link": "https://stackoverflow.com/users/9008695/oscar-manuel-alba-mendoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535588645, "creation_date": 1535586199, "last_edit_date": 1535586483, "question_id": 52087437, "link": "https://stackoverflow.com/questions/52087437/how-to-fix-duplicate-entry-error-in-a-mysqldb-pyqt5", "title": "How To Fix duplicate entry Error in a mysqldb- pyqt5", "body": "<p>I\u00b4m learning and trying raise an app with pyqt5, which insert a data in my database. Sometimes an existing id number (primary key) is typed and the program fall... I have created the next code:</p>\n\n<pre><code>from PyQt5 import QtGui\nfrom PyQt5.QtWidgets import QApplication, QMainWindow, QLineEdit, \nQPushButton, QMessageBox\nimport sys\nimport MySQLdb as mdb \n\nclass Window(QMainWindow):\n\n  def __init__(self):\n    super().__init__()\n\n    self.title = \"PyQt5 Insert Data\"        \n    self.top = 100        \n    self.left = 100        \n    self.width = 680        \n    self.height = 400\n    self.setWindowIcon(QtGui.QIcon(\"icon_health.png\"))\n\n    self.InitWindow()\n\n  def InitWindow(self):\n\n    self.linedit0 = QLineEdit(self)\n    self.linedit0.setPlaceholderText('Please enter your ID')\n    self.linedit0.setGeometry(200,50,200,30)\n\n    self.linedit1 = QLineEdit(self)\n    self.linedit1.setPlaceholderText('Please enter your name')\n    self.linedit1.setGeometry(200,100,200,30)\n\n    self.linedit2 = QLineEdit(self)\n    self.linedit2.setPlaceholderText('Please enter your email')\n    self.linedit2.setGeometry(200,150,200,30)\n\n    self.linedit3 = QLineEdit(self)\n    self.linedit3.setPlaceholderText('Please enter your phone')\n    self.linedit3.setGeometry(200,200,200,30)\n\n    self.button = QPushButton(\"Insert data\", self)\n    self.button.setGeometry(200,250,100,30)\n    self.button.clicked.connect(self.Insertdata)\n\n    self.setWindowIcon(QtGui.QIcon(\"icon_health.png\"))\n    self.setWindowTitle(self.title)\n    self.setGeometry(self.top, self.left, self.width, self.height)\n    self.show()\n\n def Insertdata (self):\n    con = mdb.connect(\"localhost\",\"root\",\"xxxx\",\"dbname\")\n    with con:\n        cur = con.cursor()\n        cur.execute(\"INSERT INTO data (id, name, email, phone)\" \n                     \"VALUES('%s','%s','%s','%s')\" % (''.join(self.linedit0.text()),\n                                                 ''.join(self.linedit1.text()),\n                                                 ''.join(self.linedit2.text()),\n                                                 ''.join(self.linedit3.text())))\n        QMessageBox.about(self, \"Connection\",\"Data Inserted Sucessfully\")\n        self.close()\n\nApp = QApplication(sys.argv)\nwindow = Window()\nsys.exit(App.exec())\n</code></pre>\n\n<p>The app run nice, but when i type a duplicate ID enter (primary key) the program fall and advertize:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:\\Users\\oscar\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site- \npackages\\MySQLdb\\cursors.py\", line 250, in execute\nself.errorhandler(self, exc, value)\nFile \"C:\\Users\\oscar\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site- \npackages\\MySQLdb\\connections.py\", line 50, in defaulterrorhandler\nraise errorvalue\nFile \"C:\\Users\\oscar\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site- \npackages\\MySQLdb\\cursors.py\", line 247, in execute\nres = self._query(query)\nFile \"C:\\Users\\oscar\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site- \npackages\\MySQLdb\\cursors.py\", line 411, in _query\nrowcount = self._do_query(q)\nFile \"C:\\Users\\oscar\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site- \npackages\\MySQLdb\\cursors.py\", line 374, in _do_query\ndb.query(q)\nFile \"C:\\Users\\oscar\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site- \npackages\\MySQLdb\\connections.py\", line 277, in query\n_mysql.connection.query(self, query)\n_mysql_exceptions.IntegrityError: (1062, \"Duplicate entry '#######' for key \n'PRIMARY'\")\n[Finished in 13.2s]\n</code></pre>\n\n<p>That\u00b4s a litle very frustrating for me. I have intentend a solution:</p>\n\n<pre><code>try:\n   con = mdb.connect(\"localhost\", \"root\", \"xxxxx\", \"dbname\") \nexcept _mysql.Error as e: \n   QMessageBox.about(self,\"Connection\", \"Duplicate entry for ID\")\n   sys.exit()\n</code></pre>\n\n<p>But the output remain the same. I would appreciatte your help</p>\n"}, {"tags": ["python", "excel", "csv"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10292433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wqmp_vlzODs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPO-BQDpwTIUPTGTjqXYJLCG7EsFw/mo/photo.jpg?sz=128", "display_name": "JAM", "link": "https://stackoverflow.com/users/10292433/jam"}, "edited": false, "score": 0, "creation_date": 1535646089, "post_id": 52087735, "comment_id": 91153915, "body": "Thanks, but that does not seem to work either.     (Part of) what I get on Spyder when I run that code is:        File &quot;C:\\Users\\Murphy\\Desktop\\WinPython-64bit-3.6.3.0Qt5\\python-3&zwnj;&#8203;.6.3.amd64\\lib\\site-&zwnj;&#8203;packages\\numpy\\lib\\n&zwnj;&#8203;pyio.py&quot;, line 725, in floatconv     return float(x)  ValueError: could not convert string to float: b&#39;&quot;Company\\xc2\\xa0&#39;"}, {"owner": {"reputation": 3, "user_id": 10277602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9674078b154e2552353f3dfa7b8f7a15?s=128&d=identicon&r=PG&f=1", "display_name": "altarawy", "link": "https://stackoverflow.com/users/10277602/altarawy"}, "reply_to_user": {"reputation": 1, "user_id": 10292433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wqmp_vlzODs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPO-BQDpwTIUPTGTjqXYJLCG7EsFw/mo/photo.jpg?sz=128", "display_name": "JAM", "link": "https://stackoverflow.com/users/10292433/jam"}, "edited": false, "score": 0, "creation_date": 1535658683, "post_id": 52087735, "comment_id": 91159935, "body": "@JAM this is because your csv file contains letters, notice how my foc.csv file is formatted. You can reformat your csv to look like mine and label the line(s) to suit your needs."}], "tags": [], "owner": {"reputation": 3, "user_id": 10277602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9674078b154e2552353f3dfa7b8f7a15?s=128&d=identicon&r=PG&f=1", "display_name": "altarawy", "link": "https://stackoverflow.com/users/10277602/altarawy"}, "is_accepted": false, "score": 0, "last_activity_date": 1535591003, "last_edit_date": 1535591003, "creation_date": 1535589031, "answer_id": 52087735, "question_id": 52087426, "link": "https://stackoverflow.com/questions/52087426/plotting-graphing-excel-file-data-using-python/52087735#52087735", "title": "plotting/graphing excel file data using python", "body": "<p>To make it as simple as possible, I recommend using numpy(<code>pip install numpy</code> to install it). Using numpy we can do this: </p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nx, y = np.loadtxt('foc.csv', delimiter=',', unpack=True)\nplt.plot(x,y, label='Loaded from file!')\n\nplt.xlabel('x')\nplt.ylabel('y')\nplt.title('Test')\nplt.legend()\nplt.show()\n</code></pre>\n\n<p>and this is our <a href=\"https://i.stack.imgur.com/Af9Lm.png\" rel=\"nofollow noreferrer\">result</a></p>\n\n<p>foc.csv:</p>\n\n<pre><code>1, 10\n2, 20\n3, 30\n4, 40\n5, 50\n</code></pre>\n\n<p>If you still need more help or want to get into more complex things using matplotlib, I recommend checking out sentdex's <a href=\"https://pythonprogramming.net/matplotlib-intro-tutorial/\" rel=\"nofollow noreferrer\">tutorials</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10292433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wqmp_vlzODs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPO-BQDpwTIUPTGTjqXYJLCG7EsFw/mo/photo.jpg?sz=128", "display_name": "JAM", "link": "https://stackoverflow.com/users/10292433/jam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535591554, "creation_date": 1535586050, "last_edit_date": 1535591554, "question_id": 52087426, "link": "https://stackoverflow.com/questions/52087426/plotting-graphing-excel-file-data-using-python", "title": "plotting/graphing excel file data using python", "body": "<p>I'm new to Python and there is a piece of Python coding that I am having trouble getting to graph.\nSpecifically how to parse data from an Excel spreadsheet in order to generate and plot some basic value comparison graphs.</p>\n\n<p>I'm using the Spyder IDE with Python 3.6.3.</p>\n\n<p>The file 'foc' location is: \n<code>C:\\Users\\Murphy\\Desktop\\WinPython-64bit-3.6.3.0Qt5\\PYWorkFiles\\foc.csv</code>\nI have more than one version of the excel spreadsheet foc file as I have attempted to graph it in more than one format. The two formats it is stored in at present are <code>csv</code> and <code>xlsx</code></p>\n\n<p>The code scraps I have put together at present are:</p>\n\n<pre><code>import xlrd\n\nworkbook = xlrd.open_workbook('foc.xlsx')\n\nfrom csv import reader\nimport matplotlib.pyplot as plt\n\nwith open('foc.csv', 'r') as f:\ndata = list(reader(f))\n\ntaste = [i[6] for i in data]\n\nplt.plot(range(len(taste)), taste)\nplt.show()\nplt.plot()\n</code></pre>\n\n<p>All these pieces of code generate is two useless graphs (I've attached them below) with only the first one even showing any of the foc spreadsheet data.</p>\n\n<p>Can I get any help with this? I have very little knowledge of how to use Python. </p>\n\n<p><a href=\"https://i.stack.imgur.com/Zgm66.png\" rel=\"nofollow noreferrer\">graph1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/yHB4D.png\" rel=\"nofollow noreferrer\">graph2</a></p>\n"}, {"tags": ["python", "time-series", "statsmodels", "holtwinters"], "comments": [{"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "edited": false, "score": 0, "creation_date": 1537207008, "post_id": 52087404, "comment_id": 91691323, "body": "I&#39;ve just fixed the x-axis time format to represent the format of the original data."}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "reply_to_user": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "edited": false, "score": 0, "creation_date": 1537224842, "post_id": 52087404, "comment_id": 91698046, "body": "@vestland - there is still an error regretfully - -------------------- NameErrorTraceback (most recent call last) &lt;ipython-input-45-86f5607eaa8e&gt; in &lt;module&gt;()      22 # Plot      23 fig, ax = plt.subplots() ---&gt; 24 myFmt = mdates.DateFormatter(&#39;%Y-%m&#39;)      25 df_all.plot(ax = ax, x_compat=True)      26 ax.xaxis.set_major_formatter(myFmt)  NameError: name &#39;mdates&#39; is not defined"}, {"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "edited": false, "score": 0, "creation_date": 1537252982, "post_id": 52087404, "comment_id": 91705056, "body": "What matplotlib version are you running? run <code>matplotlib.__version__</code> and check. I&#39;m on <code>2.2.2</code>"}, {"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "edited": false, "score": 0, "creation_date": 1537254004, "post_id": 52087404, "comment_id": 91705573, "body": "And I see you&#39;ve got something called <code>Plot 23</code> in your error message there. If you&#39;re just adding parts of my code on top of your own code, It moght not work. Try a fresh start with <i>only</i> the code I provided to see if it works with mdates. And in any case, make sure to add this line at the beginning of your code <code>import matplotlib.dates as mdates</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536785488, "post_id": 52095244, "comment_id": 91554262, "body": "Thank you and sorry for the delay. The first part worked really well (modelHW.fittedvalues) The issue is with the 2nd portion (forecast) I am getting an error: - see above. Can not properly format here. It is also not clear why do you suggest use &quot;D&quot; while the data has monthly frequency. However I tried &quot;M&quot; but got the same error"}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536785803, "post_id": 52095244, "comment_id": 91554388, "body": "forecast_values = model_HW.forecast(prediction_size)     forecast_period = y_train.index[-1] +pd.to_timedelta(np.arange(prediction_size+1),&#39;D&#39;)     forecast_period  = forecast_period[1:]     hw_forecast = pd.concat([y_train[&#39;n_passengers&#39;], pd.Series(forecast_values,  index = forecast_period)], axis = 1)     hw_forecast.columns = [&#39;Observed Passengers&#39;, &#39;HW-Forecast&#39;]     hw_forecast.plot()"}, {"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "reply_to_user": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536786037, "post_id": 52095244, "comment_id": 91554446, "body": "Thanks for the feedback! I can set up a chatroom tomorrow and we can take it from there."}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 1, "creation_date": 1536786250, "post_id": 52095244, "comment_id": 91554521, "body": "sure! be happy to! I provided the code and the error"}, {"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "reply_to_user": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536786638, "post_id": 52095244, "comment_id": 91554663, "body": "Could you provide a sample of your real world dataset? The numbers are not important, but the structure and index is."}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536787464, "post_id": 52095244, "comment_id": 91554973, "body": "<a href=\"https://raw.githubusercontent.com/dacatay/time-series-analysis/master/data/passengers.csv\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/dacatay/time-series-analysis/maste&zwnj;&#8203;r/&hellip;</a>"}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 1, "creation_date": 1536787518, "post_id": 52095244, "comment_id": 91555003, "body": "this is the extraction command: pass_df = pd.read_csv(&#39;<a href=\"https://raw.githubusercontent.com/dacatay/time-series-analysis/master/data/passengers.csv\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/dacatay/time-series-a&zwnj;&#8203;nalysis/master/&hellip;</a>&#39;,                       header=0, parse_dates=True, sep=&#39;;&#39;)"}, {"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "reply_to_user": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536959504, "post_id": 52095244, "comment_id": 91625753, "body": "@Toly, the code in my latest edit will work on your sample data. I hope this is what you were looking for."}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536973389, "post_id": 52095244, "comment_id": 91628481, "body": "Thanks! Will try over the weekend and will assign the score. One more question: X axes do not plot values (in this case like &quot;1950-02&quot;. I tried many ways including xticks with np.arange(start, finish, stepwise) but can get those data labels displayed in a good way (either like in your case just says month or a date OR lists everything so it is unreadable). Any idea?"}, {"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "reply_to_user": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1536991032, "post_id": 52095244, "comment_id": 91630616, "body": "@Toly, I&#39;ll fix it over the weekend"}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1537057378, "post_id": 52095244, "comment_id": 91645073, "body": "I tried the following: fig, ax = plt.subplots(1,1, figsize=(18,12))  ax.plot(df_all) ax.xaxis.set_major_locator(plticker.MultipleLocator(x_step))&zwnj;&#8203;. It worked in the first part of the code (fittedvalues) but for some reason does not work on forecast. x_step = min(int(num_values/10+0.5), 12) where num_values is the number of total observations"}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1537057773, "post_id": 52095244, "comment_id": 91645122, "body": "It gives the error:  Period(&#39;1961-01&#39;, &#39;M&#39;) is not a string for the command:   ax.plot(df-all)"}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1537224802, "post_id": 52095244, "comment_id": 91698033, "body": "the latest code generates an error - -------------------- NameErrorTraceback (most recent call last) &lt;ipython-input-45-86f5607eaa8e&gt; in &lt;module&gt;()      22 # Plot      23 fig, ax = plt.subplots() ---&gt; 24 myFmt = mdates.DateFormatter(&#39;%Y-%m&#39;)      25 df_all.plot(ax = ax, x_compat=True)      26 ax.xaxis.set_major_formatter(myFmt)  NameError: name &#39;mdates&#39; is not defined"}, {"owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1537287812, "post_id": 52095244, "comment_id": 91726790, "body": "I made a little adjustment and it works now - # Plot fig, ax = plt.subplots(figsize=(18,12)) myFmt = mdates.DateFormatter(&#39;%Y-%m&#39;) df_all.plot(ax = ax, x_compat=True) #ax.xaxis.set_major_locator(plticker.MultipleLocator(x_step)&zwnj;&#8203;)  ax.grid(True) ax.xaxis.set_major_locator(mdates.MonthLocator(bymonth=range&zwnj;&#8203;(0,12,6))) fig.autofmt_xdate() ax.xaxis.set_major_formatter(myFmt)  # rotates and right aligns the x labels, and moves the bottom of the # axes up to make room for them fig.autofmt_xdate()"}, {"owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "reply_to_user": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "edited": false, "score": 0, "creation_date": 1537288233, "post_id": 52095244, "comment_id": 91727012, "body": "Sounds cool! Please share a screenshot of your final plot! I&#39;m curious..."}], "tags": [], "owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "is_accepted": true, "score": 3, "last_activity_date": 1537206959, "last_edit_date": 1537206959, "creation_date": 1535626358, "answer_id": 52095244, "question_id": 52087404, "link": "https://stackoverflow.com/questions/52087404/interpolation-using-exponentialsmoothing-from-stats-models/52095244#52095244", "title": "Interpolation using ExponentialSmoothing from stats models", "body": "<p><strong>Edit:</strong></p>\n\n<ul>\n<li><p>Replaced synthetic dataset with sample data from OP</p></li>\n<li><p>Fixed function that builds new forecast period</p></li>\n<li><p>Fixed x-axis date format as per OPs request</p></li>\n</ul>\n\n<p><strong>Answer:</strong></p>\n\n<p>If you're looking for calculated values within your estimation period, you should use <code>modelHW.fittedvalues</code> and not <code>modelHW.forecast()</code>. The latter will give you just what it says; forecasts. And it's pretty awesome. Let me show you how to do both things:</p>\n\n<p><strong>Plot 1 - Model within estimation period</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/LQj65.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LQj65.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Plot 2 - Forecasts</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/choAk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/choAk.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#imports\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\nfrom statsmodels.tsa.api import ExponentialSmoothing\nimport matplotlib.dates as mdates\n#%%\n#\n\n# Load data\npass_df = pd.read_csv('https://raw.githubusercontent.com/dacatay/time-series-analysis/master/data/passengers.csv', sep=';')\npass_df = pass_df.set_index('month')\ntype(pass_df.index)\n\ndf = pass_df.copy()\n\n# Model\nmodelHW = ExponentialSmoothing(np.asarray(df['n_passengers']), seasonal_periods=12, trend='add', seasonal='mul',).fit()\nmodelHW.summary()\n\n# Model, fitted values\nmodel_values = modelHW.fittedvalues\nmodel_period = df.index\ndf_model = pd.concat([df['n_passengers'], pd.Series(model_values, index = model_period)], axis = 1)\ndf_model.columns = ['n_passengers', 'HWmodel']\ndf_model = df_model.set_index(pd.DatetimeIndex(df_model.index))\n\n# Model, plot\nfig, ax = plt.subplots()\nmyFmt = mdates.DateFormatter('%Y-%m')\ndf_model.plot(ax = ax, x_compat=True)\nax.xaxis.set_major_formatter(myFmt)\n\n# Forecasts\nprediction_size = 10\nforecast_values = modelHW.forecast(prediction_size)\n\n# Forecasts, build new period \nforecast_start = df.index[-1]\nforecast_start = pd.to_datetime(forecast_start, format='%Y-%m-%d')\nforecast_period = pd.period_range(forecast_start, periods=prediction_size+1, freq='M')\nforecast_period = forecast_period[1:]\n\n# Forecasts, create dataframe\ndf_forecast = pd.Series(forecast_values, index = forecast_period.values).to_frame()\ndf_forecast.columns = ['HWforecast']\n\n# merge input and forecast dataframes\ndf_all = pd.merge(df,df_forecast, how='outer', left_index=True, right_index=True)\n#df_all = df_all.set_index(pd.DatetimeIndex(df_all.index.values))\nix = df_all.index\nixp = pd.PeriodIndex(ix, freq = 'M')\ndf_all = df_all.set_index(ixp)\n\n# Forecast, plot\nfig, ax = plt.subplots()\nmyFmt = mdates.DateFormatter('%Y-%m')\ndf_all.plot(ax = ax, x_compat=True)\nax.xaxis.set_major_formatter(myFmt)\n</code></pre>\n\n<hr>\n\n<p><strong>Previous attempts:</strong></p>\n\n<pre><code># imports\nimport pandas as pd\nimport numpy as np\nfrom statsmodels.tsa.api import ExponentialSmoothing\n\n# Data that matches your setup, but with a random\n# seed to make it reproducible\nnp.random.seed(42)\n\n# Time\ndate = pd.to_datetime(\"1st of Jan, 2019\")\ndates = date+pd.to_timedelta(np.arange(140), 'D')\n\n# Data\nn_passengers = np.random.normal(loc=0.0, scale=5.0, size=140).cumsum()\nn_passengers = n_passengers.astype(int) + 100\ndf = pd.DataFrame({'n_passengers':n_passengers},index=dates)\n</code></pre>\n\n<p><strong>1. How to plot observed vs. estimated values within the estimation period:</strong></p>\n\n<p>The following snippet will extract all fitted values and plot it against your observed values.</p>\n\n<p><strong>Snippet 2:</strong></p>\n\n<pre><code># Model\nmodelHW = ExponentialSmoothing(np.asarray(df['n_passengers']), seasonal_periods=12, trend='add', seasonal='mul',).fit()\nmodelHW.summary()\n\n# Model, fitted values\nmodel_values = modelHW.fittedvalues\nmodel_period = df.index\ndf_model = pd.concat([df['n_passengers'], pd.Series(model_values, index = model_period)], axis = 1)\ndf_model.columns = ['n_passengers', 'HWmodel']\ndf_model.plot()\n</code></pre>\n\n<p><strong>Plot 1:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/dTdRq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dTdRq.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>2. How to produce and plot model forecasts of a certain length:</strong></p>\n\n<p>The following snippet will produce 10 forecasts from your model, and plot it as an extended period compared to your observer values.</p>\n\n<p><strong>Snippet 3:</strong></p>\n\n<pre><code># Forecast\nprediction_size = 10\nforecast_values = modelHW.forecast(prediction_size)\nforecast_period = df.index[-1] + pd.to_timedelta(np.arange(prediction_size+1), 'D')\nforecast_period  = forecast_period[1:]\n\ndf_forecast = pd.concat([df['n_passengers'], pd.Series(forecast_values, index = forecast_period)], axis = 1)\ndf_forecast.columns = ['n_passengers', 'HWforecast']\ndf_forecast.plot()\n</code></pre>\n\n<p><strong>Plot 2:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/G9aB8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G9aB8.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>And here's the whole thing for an easy copy&amp;paste:</strong></p>\n\n<pre><code># imports\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\nfrom statsmodels.tsa.api import ExponentialSmoothing\n\n# Data that matches your setup, but with a random\n# seed to make it reproducible\nnp.random.seed(42)\n\n# Time\ndate = pd.to_datetime(\"1st of Jan, 2019\")\ndates = date+pd.to_timedelta(np.arange(140), 'D')\n\n# Data\nn_passengers = np.random.normal(loc=0.0, scale=5.0, size=140).cumsum()\nn_passengers = n_passengers.astype(int) + 100\ndf = pd.DataFrame({'n_passengers':n_passengers},index=dates)\n\n# Model\nmodelHW = ExponentialSmoothing(np.asarray(df['n_passengers']), seasonal_periods=12, trend='add', seasonal='mul',).fit()\nmodelHW.summary()\n\n# Model, fitted values\nmodel_values = modelHW.fittedvalues\nmodel_period = df.index\ndf_model = pd.concat([df['n_passengers'], pd.Series(model_values, index = model_period)], axis = 1)\ndf_model.columns = ['n_passengers', 'HWmodel']\ndf_model.plot()\n\n# Forecast\nprediction_size = 10\nforecast_values = modelHW.forecast(prediction_size)\nforecast_period = df.index[-1] + pd.to_timedelta(np.arange(prediction_size+1), 'D')\nforecast_period  = forecast_period[1:]\n\ndf_forecast = pd.concat([df['n_passengers'], pd.Series(forecast_values, index = forecast_period)], axis = 1)\ndf_forecast.columns = ['n_passengers', 'HWforecast']\ndf_forecast.plot()\n</code></pre>\n\n<p>@vestland - here is the code and error:</p>\n\n<pre><code>y_train = passtrain_df.copy(deep=True)\n\nmodel_HW = ExponentialSmoothing(np.asarray(y_train['n_passengers']), seasonal_periods=12, trend='add', seasonal='mul',).fit()\n\nmodel_values = model_HW.fittedvalues\nmodel_period = y_train.index\n\nhw_model = pd.concat([y_train['n_passengers'], pd.Series(model_values, index = model_period)], axis = 1)\nhw_model.columns = ['Observed Passengers', 'Holt-Winters']\n\nplt.figure(figsize=(18,12))\nhw_model.plot()\n\nforecast_values = model_HW.forecast(prediction_size)\nforecast_period = y_train.index[-1] + pd.to_timedelta(np.arange(prediction_size+1),'D')\nforecast_period  = forecast_period[1:]\n\nhw_forecast = pd.concat([y_train['n_passengers'], pd.Series(forecast_values, index = forecast_period)], axis = 1)\nhw_forecast.columns = ['Observed Passengers', 'HW-Forecast']\nhw_forecast.plot()\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>NullFrequencyError     Traceback (most recent call last)\n&lt;ipython-input-25-5f37a0dd0cfa&gt; in &lt;module&gt;()\n     17 \n     18 forecast_values = model_HW.forecast(prediction_size)\n---&gt; 19 forecast_period = y_train.index[-1] +  pd.to_timedelta(np.arange(prediction_size+1),'D')\n     20 forecast_period  = forecast_period[1:]\n     21 \n\n/anaconda3/lib/python3.6/site- packages/pandas/core/indexes/datetimelike.py in __radd__(self, other)\n    879         def __radd__(self, other):\n    880             # alias for __add__\n--&gt; 881             return self.__add__(other)\n    882         cls.__radd__ = __radd__\n    883 \n\n/anaconda3/lib/python3.6/site- packages/pandas/core/indexes/datetimelike.py in __add__(self, other)\n    842                 # This check must come after the check for  np.timedelta64\n    843                 # as is_integer returns True for these\n--&gt; 844                 result = self.shift(other)\n    845 \n    846             # array-like others\n\n/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/datetimelike.py in shift(self, n, freq)\n   1049 \n   1050         if self.freq is None:\n-&gt; 1051             raise NullFrequencyError(\"Cannot shift with no freq\")\n   1052 \n   1053         start = self[0] + n * self.freq\n\nNullFrequencyError: Cannot shift with no freq\n</code></pre>\n"}], "owner": {"reputation": 1705, "user_id": 5287011, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e0aeb1e86e9c3c29581c71f034b715c0?s=128&d=identicon&r=PG&f=1", "display_name": "Toly", "link": "https://stackoverflow.com/users/5287011/toly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 1, "accepted_answer_id": 52095244, "answer_count": 1, "score": 1, "last_activity_date": 1537206959, "creation_date": 1535585876, "last_edit_date": 1535627099, "question_id": 52087404, "link": "https://stackoverflow.com/questions/52087404/interpolation-using-exponentialsmoothing-from-stats-models", "title": "Interpolation using ExponentialSmoothing from stats models", "body": "<p>I am using <code>ExponentialSmoothing</code> from statsmodels to run Holt-Winters method on time series.\nI get forecasted values but can not extract calculated values and compare them with observed values.</p>\n\n<pre><code>from pandas import Series\nfrom scipy import stats\nimport statsmodels.api as sm\nfrom statsmodels.tsa.api import ExponentialSmoothing\n\nmodelHW = ExponentialSmoothing(np.asarray(passtrain_df['n_passengers']), seasonal_periods=12, trend='add', seasonal='mul',).fit()\n\ny_hat_avg['Holt_Winter'] = modelHW.forecast(prediction_size)\n</code></pre>\n\n<p>So here, <code>prediction_size = number of forecasted datapoints</code> (4 in my case)\n<code>passtrain_df</code> is a dataframe with observations (140 datapoints) based on which Holt_Winter model is built (regression).</p>\n\n<p>I can easily display 4 forecasted values.</p>\n\n<p>How do I extract 140 calculated values?</p>\n\n<p>Tried to use: </p>\n\n<pre><code>print(ExponentialSmoothing.predict(np.asarray(passtrain_df), start=0, end=139))\n</code></pre>\n\n<p>But I probably have a syntax error somewhere</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "if-statement"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1535585895, "post_id": 52087398, "comment_id": 91125153, "body": "<code>if</code> is not <code>elif</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1535585953, "post_id": 52087398, "comment_id": 91125164, "body": "&quot;I do not really know why the code is termed incorrect even though it gives an output&quot; - we don&#39;t call code correct just because it gives an output."}, {"owner": {"reputation": 196, "user_id": 7517688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/702ed33e853d743c00538347959ab018?s=128&d=identicon&r=PG", "display_name": "klanmiko", "link": "https://stackoverflow.com/users/7517688/klanmiko"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1535585953, "post_id": 52087398, "comment_id": 91125165, "body": "@user2357112 that&#39;s not helpful"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 3, "creation_date": 1535586051, "post_id": 52087398, "comment_id": 91125183, "body": "if comp == &#39;rock&#39;  is true so prints. then the program continues and check if user ==&#39;paper&#39;, this fails so goes to else and prints you win. If you change if user ==&#39;paper&#39; to elif, this will not run if the above if statement is true. Lookup Python Control Flow <a href=\"https://en.wikibooks.org/wiki/Python_Programming/Control_Flow\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Python_Programming/Control_Flow</a>"}, {"owner": {"reputation": 13, "user_id": 9088790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c7fba20d4af771fad3410ffba69a8b?s=128&d=identicon&r=PG&f=1", "display_name": "wumi", "link": "https://stackoverflow.com/users/9088790/wumi"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1535600077, "post_id": 52087398, "comment_id": 91127861, "body": "@user2357112 I have realised so that is why I want to know the reason why this code is termed incorrect."}], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 4101319, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/JselF.jpg?s=128&g=1", "display_name": "Joseph Seung Jae Dollar", "link": "https://stackoverflow.com/users/4101319/joseph-seung-jae-dollar"}, "is_accepted": true, "score": 0, "last_activity_date": 1535586453, "last_edit_date": 1535586453, "creation_date": 1535586125, "answer_id": 52087431, "question_id": 52087398, "link": "https://stackoverflow.com/questions/52087398/when-is-an-if-statement-code-incorrect-even-after-giving-an-output/52087431#52087431", "title": "when is an &#39;if&#39; statement code incorrect even after giving an output?", "body": "<p>So what happens with the if statements is this.\nIf your code hits an <code>if</code> statement, it will look at the condition and execute it based on the condition, and what happens next, when the first <code>if</code> statement didn't get executed is it looks if there are any following <code>elif</code>s, or <code>else</code>s.\nAnd out of all the <code>if</code>, <code>elif</code>s, and <code>else</code>, only one of them will get executed. Think of it as a big single chunk starting at an <code>if</code>, at ending with an <code>else</code>.\nIf there is another <code>if</code> statement, your code will look at it again regardless of the previous <code>if</code> being executed or not, since your code will think that it is another chunk of conditions.</p>\n\n<p>So in your code, even if your input falls under the first <code>if</code> statement, it will still look in to the second <code>if</code> and check for the conditions.</p>\n\n<p>I added some comments in your code to make it more intuitive:</p>\n\n<pre><code>comp = 'rock'\nuser = 'rock'\n\n# a code block that needs to be looked at\nif comp == 'rock':\n    print 'I win *_*!'\n# another code block that still has to be checked since it's starting with another if statement\nif user == 'paper':\n    print 'You win.'\nelse:\n    print 'Tie.'\n</code></pre>\n\n<p>Replacing the second <code>if</code> with <code>elif</code> will fix the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 420, "user_id": 9396091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5dcc57d323a84b3ee4bdef5b724188?s=128&d=identicon&r=PG&f=1", "display_name": "Connor J", "link": "https://stackoverflow.com/users/9396091/connor-j"}, "is_accepted": false, "score": 2, "last_activity_date": 1535586210, "creation_date": 1535586210, "answer_id": 52087438, "question_id": 52087398, "link": "https://stackoverflow.com/questions/52087398/when-is-an-if-statement-code-incorrect-even-after-giving-an-output/52087438#52087438", "title": "when is an &#39;if&#39; statement code incorrect even after giving an output?", "body": "<p>when you are using an if statement, you are not asking if something is correct, but rather that something is <em>true or false</em>. This is known as a boolean operator, and depending on whether it is true of false, leads to either the if statement executing or not executing.</p>\n\n<p>The reason why you are getting the 'tie' to the answer is because you are using two if statements, rather than an elif statement. I've refactored it below for you:</p>\n\n<pre><code>comp = 'rock'\nuser = 'rock'\n\nif comp == 'rock':\n    print 'I win *_*!'\nelif user == 'paper':\n    print 'You win.'\nelse:\n    print 'Tie.'\n</code></pre>\n\n<p>More reading can be found here: <a href=\"https://www.programiz.com/python-programming/if-elif-else\" rel=\"nofollow noreferrer\">https://www.programiz.com/python-programming/if-elif-else</a></p>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 1443145, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OED7s.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/1443145/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1535590056, "creation_date": 1535590056, "answer_id": 52087829, "question_id": 52087398, "link": "https://stackoverflow.com/questions/52087398/when-is-an-if-statement-code-incorrect-even-after-giving-an-output/52087829#52087829", "title": "when is an &#39;if&#39; statement code incorrect even after giving an output?", "body": "<p>Your code will work, with a few syntax corrections:</p>\n\n<pre><code>comp = 'rock'\nuser = 'rock'\n\nif comp == 'rock':\n    print('I win *_*!')\nelif user == 'paper':\n    print('You win.')\nelse:\n    print('Tie.')\n</code></pre>\n\n<p>All I've done here is change the second <code>if</code> to <code>elif</code>, and put parentheses around the <code>print</code> statement output. In Python, 'else if' is written 'elif'. You can have as many <code>elif</code> statements as you want.</p>\n"}], "owner": {"reputation": 13, "user_id": 9088790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c7fba20d4af771fad3410ffba69a8b?s=128&d=identicon&r=PG&f=1", "display_name": "wumi", "link": "https://stackoverflow.com/users/9088790/wumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52087431, "answer_count": 3, "score": 0, "last_activity_date": 1535601834, "creation_date": 1535585794, "last_edit_date": 1535601834, "question_id": 52087398, "link": "https://stackoverflow.com/questions/52087398/when-is-an-if-statement-code-incorrect-even-after-giving-an-output", "title": "when is an &#39;if&#39; statement code incorrect even after giving an output?", "body": "<p>am completely new to programming and I am learning through edX now and I came across this code but I do  not really know why the code is termed incorrect even though it gives an output. would have asked on the edx platform but the course finished two years ago, just learning from what is archived. Thanks .</p>\n\n<p>The result is 'i win' and 'tie' it has an output so why is it still incorrect?</p>\n\n<pre><code>comp = 'rock'\nuser = 'rock'\n\nif comp == 'rock':\n    print 'I win *_*!'\nif user == 'paper':\n    print 'You win.'\nelse:\n    print 'Tie.'\n</code></pre>\n\n<p>Really grateful for the replies to my questions but for further clarifications please look at this code here:\n    comp == 'rock'\n    user == 'rock'</p>\n\n<pre><code>if comp == 'paper' and user == 'paper':\n    print('tie')\nelif comp == 'rock':\n    if user == 'scissors':\n        print ('I win')\n    else:\n        print ('You win')\nelse:\n    print ('tie')\n</code></pre>\n\n<p>For user being 'rock', it will print 'you win' from the second test (elif) but the output is said to be incorrect but if user == 'scissors' it will print 'I win' this is said to be correct. My concern is why, what is the difference that makes the if under the second elif correct and the else under the same elif incorrect?</p>\n"}, {"tags": ["python", "animation"], "owner": {"reputation": 23, "user_id": 8963166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d4cb132e7952e5c23b35ca98f54f02?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/8963166/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535591817, "creation_date": 1535585699, "last_edit_date": 1535591817, "question_id": 52087391, "link": "https://stackoverflow.com/questions/52087391/python-funcanimation-is-not-updating-the-frame-when-i-am-trying-to-update-4-plot", "title": "Python FuncAnimation is not updating the frame when I am trying to update 4 plots in a subplot", "body": "<p>I am a newbie and trying to get the basics of Python right. I am trying to create an animation with 4 plots using matplotlib.pyplot.subplots. Each plot has same mean but different standard deviation. Here's my code:</p>\n\n<p>import numpy as np\nimport matplotlib as mlp\nimport matplotlib.animation as animation</p>\n\n<h1>Test data</h1>\n\n<pre><code>n = 100\nmn = 0\nstdv = [1,2,3,4]\nx = [np.random.normal(loc= mn, scale = stdv[0], size = n ),\n     np.random.normal(loc= mn, scale = stdv[1], size = n ),\n     np.random.normal(loc= mn, scale = stdv[2], size = n ),\n     np.random.normal(loc= mn, scale = stdv[3], size = n )]\n</code></pre>\n\n<h1>Animation update function</h1>\n\n<pre><code>def  anim_norm(i):\n    if (i == n):\n        b.event_source.stop()\n    plt.cla()\n    ax = [ax1,ax2,ax3,ax4]\n    for k in range((len(ax)+1)):\n        ax[k].set_title('S.D. = {}, n = {}'.format(stdv[k],i))\n        ax[k].set_xlabel('Value')\n        ax[k].set_ylabel('Frequency')\n        ax[k].hist(x[k][:i])\n</code></pre>\n\n<h1>Running the animation</h1>\n\n<pre><code>fig,((ax1,ax2),(ax3,ax4)) = plt.subplots(2,2, sharex = True)\nb = animation.FuncAnimation(fig,anim_norm, interval = 300)\n</code></pre>\n\n<p>All I see is the plots with xlabel, ylabel, and title and the first frame. I would appreciate any guidance. Also, do I need to increment (i - the frame count) or FuncAnimation does it automatically?</p>\n\n<p>Thank you!</p>\n\n<p><img src=\"https://i.stack.imgur.com/XoRIH.jpg\" alt=\"enter image description here\"></p>\n"}, {"tags": ["python", "tensorflow", "conv-neural-network"], "answers": [{"tags": [], "owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1535591275, "creation_date": 1535591275, "answer_id": 52087943, "question_id": 52087350, "link": "https://stackoverflow.com/questions/52087350/getting-an-error-when-restoring-a-model-that-was-already-trained/52087943#52087943", "title": "Getting an error when restoring a model that was already trained", "body": "<p>Your <code>feed_dict</code> key is <code>layer</code>, not <code>labels</code>. <code>layer</code> was created in a different graph. Change to:</p>\n\n<pre><code>print(sess.run(pred, feed_dict={inputs: code, labels: label_vecs}))\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10073147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dLjatmEd7hM/AAAAAAAAAAI/AAAAAAAAAAc/W-1nq3iSPas/photo.jpg?sz=128", "display_name": "Harsha", "link": "https://stackoverflow.com/users/10073147/harsha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535591275, "creation_date": 1535585250, "question_id": 52087350, "link": "https://stackoverflow.com/questions/52087350/getting-an-error-when-restoring-a-model-that-was-already-trained", "title": "Getting an error when restoring a model that was already trained", "body": "<p>I have trained a model and saved its checkpoint using</p>\n\n<pre><code>saver.save(sess, \"checkpoints/sleeve.ckpt\")\n</code></pre>\n\n<p>The following is the architecture of the CNN model </p>\n\n<pre><code>inputs_ = tf.placeholder(tf.float32, shape=[None, codes.shape[1]], name ='inputs_')\nlabels_ = tf.placeholder(tf.int64, shape=[None, label_vecs.shape[1]], name='labels_')\n\n\nlayer = tf.contrib.layers.fully_connected(inputs_, 128)\nlogits = tf.contrib.layers.fully_connected(layer, label_vecs.shape[1],activation_fn=None)# output layer logits\ncross_entropy = tf.nn.softmax_cross_entropy_with_logits(labels=labels_, logits=logits)# cross entropy loss\ncost = tf.reduce_mean(cross_entropy)\n\noptimizer = tf.train.AdamOptimizer().minimize(cost)# training optimizer\n\n# Operations for validation/test accuracy\npredicted = tf.nn.softmax(logits)\ncorrect_pred = tf.equal(tf.argmax(predicted, 1), tf.argmax(labels_, 1))\naccuracy = tf.reduce_mean(tf.cast(correct_pred, tf.float32))\n</code></pre>\n\n<p>I am restoring the above model in a different notebook from the following command</p>\n\n<pre><code>imported_meta tf.train.import_meta_graph(\"checkpoints/neckline.ckpt.meta\")\n\nwith tf.Session() as sess:\n    imported_meta.restore(sess, tf.train.latest_checkpoint('./checkpoints'))\n    graph = tf.get_default_graph()\n    inputs = graph.get_tensor_by_name(\"inputs_:0\")\n    labels = graph.get_tensor_by_name(\"labels_:0\")\n    pred = graph.get_tensor_by_name(\"prediction:0\")\n    print(sess.run(pred, feed_dict={inputs:code, layer:label_vecs}))\n</code></pre>\n\n<p>It is throwing an error <code>Cannot interpret feed_dict key as Tensor: Tensor Tensor(\"fully_connected/Relu_1:0\", shape=(?, 128), dtype=float32) is not an element of this graph.</code></p>\n"}, {"tags": ["python", "python-3.x", "mathematical-optimization"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10292383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81d2361de7d0a2f381d46bce440979ea?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10292383/aaron"}, "edited": false, "score": 0, "creation_date": 1535670345, "post_id": 52087719, "comment_id": 91163835, "body": "Perfect, this is exactly what I needed. Thank you!"}], "tags": [], "owner": {"reputation": 1788, "user_id": 4745529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yk4sY.png?s=128&g=1", "display_name": "joni", "link": "https://stackoverflow.com/users/4745529/joni"}, "is_accepted": true, "score": 2, "last_activity_date": 1535588915, "creation_date": 1535588915, "answer_id": 52087719, "question_id": 52087336, "link": "https://stackoverflow.com/questions/52087336/minimizing-least-squares-with-algebraic-constraints-and-bounds/52087719#52087719", "title": "Minimizing Least Squares with Algebraic Constraints and Bounds", "body": "<p>For your case you can use <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html\" rel=\"nofollow noreferrer\">minimize()</a> from scipy.optimize like this:</p>\n\n<pre><code>minimize(fun=obj_fun, args=argtpl x0=xinit, bounds=bnds, constraints=cons)\n</code></pre>\n\n<p>where <code>obj_fun(x, *args)</code> is your objective function, <code>argtpl</code> a tuple of (optional) arguments for you objective function, <code>xinit</code> a initial point, <code>bnds</code> a list of tuples for the bounds of your variables and <code>cons</code> a list of dicts for your constraints.</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import minimize\n\n# Observation A has the following measurements:\nA = np.array([0, 4.1, 5.6, 8.9, 4.3])\n# How similar is A to ideal groups identified by the following:\ngroup1 = np.array([1, 3, 5, 10, 3])\ngroup2 = np.array([6, 3, 2, 1, 10])\ngroup3 = np.array([3, 3, 4, 2, 1])\n\n# Define the objective function\n# x is the array containing your wanted coefficients\ndef obj_fun(x, A, g1, g2, g3):\n    y = x[0] * g1 + x[1] * g2 + x[2] * g3\n    return np.sum((y-A)**2)\n\n# Bounds for the coefficients\nbnds = [(0, 1), (0, 1), (0, 1)]\n# Constraint: x[0] + x[1] + x[2] - 1 = 0\ncons = [{\"type\": \"eq\", \"fun\": lambda x: x[0] + x[1] + x[2] - 1}]\n\n# Initial guess\nxinit = np.array([1, 1, 1])\nres = minimize(fun=obj_fun, args=(A, group1, group2, group3), x0=xinit, bounds=bnds, constraints=cons)\nprint(res.x)\n</code></pre>\n\n<p>Solution for your example:</p>\n\n<pre><code>array([9.25609756e-01, 7.43902439e-02, 6.24242179e-12])\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10292383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81d2361de7d0a2f381d46bce440979ea?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10292383/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1579, "favorite_count": 1, "accepted_answer_id": 52087719, "answer_count": 1, "score": 3, "last_activity_date": 1535588915, "creation_date": 1535585102, "last_edit_date": 1535586995, "question_id": 52087336, "link": "https://stackoverflow.com/questions/52087336/minimizing-least-squares-with-algebraic-constraints-and-bounds", "title": "Minimizing Least Squares with Algebraic Constraints and Bounds", "body": "<p>I'm attempting to minimize a sum of least squares based on some vector summations. Briefly, I'm creating an equation that takes ideal vectors, weights them with a determined coefficient, and then sums the weighted vectors. The sum of least squares comes in once this sum is compared to the actual vector measurements found for some observation.</p>\n\n<p>To give an example:</p>\n\n<pre><code># Observation A has the following measurements:\nA = [0, 4.1, 5.6, 8.9, 4.3]\n\n# How similar is A to ideal groups identified by the following:\ngroup1 = [1, 3, 5, 10, 3]\ngroup2 = [6, 3, 2, 1, 10]\ngroup3 = [3, 3, 4, 2, 1]\n\n# Let y be the predicted measurement for A with coefficients s1, s2, and s3:\ny = s1 * group1 + s2 * group2 + s3 * group3\n\n# y will be some vector of length 5, similar to A\n# Now find the sum of least squares between y and A\nsum((y_i - A_i)** 2 for y_i in y for A_i in A)\n</code></pre>\n\n<blockquote>\n  <p>Necessary bounds and constraints  </p>\n  \n  <p>0 &lt;= s1, s2, s3 &lt;= 1</p>\n  \n  <p>s1 + s2 + s3 = 1</p>\n  \n  <p>y = s1 * group1 + s2 * group2 + s3 * group3</p>\n</blockquote>\n\n<p>This sum of least squares for y and A is what I'd like to minimize to get the coefficients s1, s2, s3, but I'm having difficulties identifying what the proper choice in scipy.optimize might be. It doesn't seem like the functions there for minimizing sum of least squares can handle algebraic variable constraints. The data I'm working with is thousands of observations with these vectorized measurements. Any thoughts or ideas would be greatly appreciated!</p>\n"}, {"tags": ["python", "xml"], "comments": [{"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1535585781, "post_id": 52087335, "comment_id": 91125126, "body": "Well, you are returning when <code>relation.attrib[&#39;connection&#39;].startswith(tuple(prefixes))</code>, on both the <code>if</code> and <code>else</code> of the <code>sql.isCustom()</code> test.   If your problems runs deeper than that, you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including actual and expected output."}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 1, "creation_date": 1535585893, "post_id": 52087335, "comment_id": 91125152, "body": "Also, what&#39;s up with the three year dry spell for accepting answers?"}, {"owner": {"reputation": 512, "user_id": 1794515, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2d392e80bfed2305d29148dd37422306?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1794515/alex"}, "reply_to_user": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1535597989, "post_id": 52087335, "comment_id": 91127470, "body": "Because the answers have come in a year after I asked them for the most part and I had already moved on."}, {"owner": {"reputation": 512, "user_id": 1794515, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2d392e80bfed2305d29148dd37422306?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1794515/alex"}, "reply_to_user": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1535598055, "post_id": 52087335, "comment_id": 91127481, "body": "And as for the question, my confusion comes why it works for only the first instance and not the rest in the document."}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1535598291, "post_id": 52087335, "comment_id": 91127528, "body": "If you&#39;re not getting useful answers in less than a year timeframe, then you&#39;ve really got to improve your questions.   For example, here you&#39;ve failed to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.   You should return to your old questions and accept the helpful answers.  If you want faster answers, improve your questions by reading <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help\">help center</a> for starters, and adding a MCVE here.  Good luck."}], "answers": [{"tags": [], "owner": {"reputation": 512, "user_id": 1794515, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2d392e80bfed2305d29148dd37422306?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1794515/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1535643434, "creation_date": 1535643434, "answer_id": 52100793, "question_id": 52087335, "link": "https://stackoverflow.com/questions/52087335/xml-findall-is-stopping-at-the-first-find/52100793#52100793", "title": "XML findall is stopping at the first find", "body": "<p>The reason I was only getting the first table was that I was returning after finding it, thus never completing the loop.</p>\n"}], "owner": {"reputation": 512, "user_id": 1794515, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2d392e80bfed2305d29148dd37422306?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1794515/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 52100793, "answer_count": 1, "score": 0, "last_activity_date": 1535643434, "creation_date": 1535585102, "question_id": 52087335, "link": "https://stackoverflow.com/questions/52087335/xml-findall-is-stopping-at-the-first-find", "title": "XML findall is stopping at the first find", "body": "<p>I am trying to parse out XML using python 2.7 and xml.etree.ElementTree.</p>\n\n<p>It works only for the first element in the tree and does not iterate over all of the other tags it should be capturing. </p>\n\n<p>Below is the loop I am using to traverse the XML. </p>\n\n<pre><code>prefixes=['conn','dummy']\nfor datasource in root.findall('.//datasource'):\n        for relation in datasource.findall('.//relation'):\n            if 'connection' in relation.attrib:\n                if relation.attrib['connection'].startswith(tuple(prefixes)): \n                    sql = SQL(relation.text)\n\n                    if sql.isCustom() is True:\n                        return sql.findTables()\n                    else:    \n                        print(relation.attrib['table'])\n                        return relation.attrib['table']\n</code></pre>\n\n<p>The XML looks something like this.\n</p>\n\n<pre><code>&lt;datasources&gt;\n    &lt;datasource&gt;\n        &lt;connection&gt;\n            &lt;relation connection=\"conn.dbe\" table=\"table1\"&gt;\n    &lt;datasource&gt;\n        &lt;connection&gt;\n            &lt;relation connection=\"conn.abc\" table=\"table2\"&gt;\n</code></pre>\n\n<p>I have tried using iterall as well as findall('.//*relation') as a matching pattern but nothing has worked so far. </p>\n"}, {"tags": ["python", "tkinter", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 2258687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83e8edaae16343c337fe954546b1995?s=128&d=identicon&r=PG", "display_name": "DeclaredInsane", "link": "https://stackoverflow.com/users/2258687/declaredinsane"}, "is_accepted": false, "score": 0, "last_activity_date": 1535634296, "creation_date": 1535634296, "answer_id": 52097843, "question_id": 52087285, "link": "https://stackoverflow.com/questions/52087285/pycharm-tkinter-displays-gui-and-a-green-border-appears-around-the-window-but-no/52097843#52097843", "title": "Pycharm tkinter displays gui and a green border appears around the window but nothing else works", "body": "<p>Ok, solved it. Nothing to do with python settings or anything python or pycharm related. It was other software namely Comodo Firewall. There is an issue that occurs where the Firewall notifications popup and close instantly. This happened and it placed the application in a sandbox that is why it didn't run any code. Comodo has no solution other than uninstalling and reinstalling the firewall which is a pain. Everything working now... </p>\n"}], "owner": {"reputation": 23, "user_id": 2258687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83e8edaae16343c337fe954546b1995?s=128&d=identicon&r=PG", "display_name": "DeclaredInsane", "link": "https://stackoverflow.com/users/2258687/declaredinsane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535634296, "creation_date": 1535584649, "last_edit_date": 1535591094, "question_id": 52087285, "link": "https://stackoverflow.com/questions/52087285/pycharm-tkinter-displays-gui-and-a-green-border-appears-around-the-window-but-no", "title": "Pycharm tkinter displays gui and a green border appears around the window but nothing else works", "body": "<p>I am new to Python and using pycharm. Everything I tried worked until about an hour ago. The application is running but a green border appears around the gui (tkinter) and no code works. I run a simple print string but nothing happens. I have added buttons and frames and the application runs but the buttons and frames don't appear. All previous project run just fine but all new projects I create does the above mentioned. I am not sure what I did, any ideas?</p>\n\n<p>Below are screenshots. The first two show the issue and the bottom shows an exercise I did before that runs just fine.</p>\n\n<p><img src=\"https://i.stack.imgur.com/xJ3dt.jpg\" alt=\"enter image description here\"></p>\n\n<pre><code>from tkinter import *\n\nroot = Tk()\n\nprint (\"Ready\")\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1535585180, "post_id": 52087256, "comment_id": 91124973, "body": "List, not an array."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1535595936, "post_id": 52087256, "comment_id": 91127076, "body": "<a href=\"https://docs.python.org/3/library/argparse.html#nargs\" rel=\"nofollow noreferrer\">docs.python.org/3/library/argparse.html#nargs</a>  <i>Note that nargs=1 produces a list of one item. This is different from the default, in which the item is produced by itself.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10292395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06663ca4dbc2390aed5c76cc488cbe02?s=128&d=identicon&r=PG&f=1", "display_name": "Niels Jansen", "link": "https://stackoverflow.com/users/10292395/niels-jansen"}, "edited": false, "score": 0, "creation_date": 1535649247, "post_id": 52087323, "comment_id": 91155442, "body": "This did the trick! Thanks. Also thanks for providing some extra insight in array vs list."}], "tags": [], "owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "is_accepted": true, "score": 3, "last_activity_date": 1535585432, "last_edit_date": 1535585432, "creation_date": 1535585043, "answer_id": 52087323, "question_id": 52087256, "link": "https://stackoverflow.com/questions/52087256/python-argparse-array-instead-of-str/52087323#52087323", "title": "python argparse array instead of str", "body": "<p>You indicated <code>nargs=1</code> and even though you provided the value 1, argparse built you a list (like an array but <a href=\"https://www.pythoncentral.io/the-difference-between-a-list-and-an-array/\" rel=\"nofollow noreferrer\">not exactly the same thing</a>). This is actually helpful because you can guarantee that when you indicate <code>nargs</code>, you will always get a list.</p>\n\n<p>Remove the <code>nargs</code> parameter and you will get a string rather than a list.</p>\n"}], "owner": {"reputation": 13, "user_id": 10292395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06663ca4dbc2390aed5c76cc488cbe02?s=128&d=identicon&r=PG&f=1", "display_name": "Niels Jansen", "link": "https://stackoverflow.com/users/10292395/niels-jansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 52087323, "answer_count": 1, "score": 1, "last_activity_date": 1535585432, "creation_date": 1535584461, "last_edit_date": 1535584569, "question_id": 52087256, "link": "https://stackoverflow.com/questions/52087256/python-argparse-array-instead-of-str", "title": "python argparse array instead of str", "body": "<p>I'm running into issues when using argparse. With below code, I expected \nargs.dir to be a string, but instead I got an array. How can I get a string? Can anyone help?</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport sys\nimport argparse\n\n#import mysql.connector\n\n# Set version number\nversion = '1.0.0'\n\n# Parse arguments supplied on the commandline\nargparser = argparse.ArgumentParser(description=sys.argv[0])\nargparser.add_argument('dir', nargs=1, type=str, help='directory to view')\nargs = argparser.parse_args()\n\n# Print program name and version number to stdout\nprint(argparser.prog + \" v\" + version)\nprint('Creating index for: ' + args.dir[0])\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "file", "csv"], "comments": [{"owner": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 1, "creation_date": 1535584146, "post_id": 52087219, "comment_id": 91124719, "body": "Possible Duplicate: <a href=\"https://stackoverflow.com/questions/30750843/python-3-unicodedecodeerror-charmap-codec-cant-decode-byte-0x9d#30751201\" title=\"python 3 unicodedecodeerror charmap codec cant decode byte 0x9d%2330751201\">stackoverflow.com/questions/30750843/&hellip;</a>"}, {"owner": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 1, "creation_date": 1535584375, "post_id": 52087219, "comment_id": 91124784, "body": "This issue is often seen when the environment is reading files in as ASCII encoded when they&#39;re actually UTF-8 (which seems likely since you have non-english language characters in your CSVs). Try updating the code to specify the text encoding: <code>with open(file, newline = &#39;&#39;, encoding = &#39;utf8&#39;) as f: </code>"}, {"owner": {"reputation": 394, "user_id": 10071946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eTZGBlyhMyc/AAAAAAAAAAI/AAAAAAAABZM/jNGDDNH3VGo/photo.jpg?sz=128", "display_name": "Tim B", "link": "https://stackoverflow.com/users/10071946/tim-b"}, "reply_to_user": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 0, "creation_date": 1535585772, "post_id": 52087219, "comment_id": 91125121, "body": "Unfortunately it didn&#39;t work.  Just got a different message: UnicodeDecodeError: &#39;utf-8&#39; codec can&#39;t decode byte 0x96 in position 197: invalid start byte"}, {"owner": {"reputation": 394, "user_id": 10071946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eTZGBlyhMyc/AAAAAAAAAAI/AAAAAAAABZM/jNGDDNH3VGo/photo.jpg?sz=128", "display_name": "Tim B", "link": "https://stackoverflow.com/users/10071946/tim-b"}, "reply_to_user": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 0, "creation_date": 1535592897, "post_id": 52087219, "comment_id": 91126420, "body": "I went back to the source file and opened it in Excel.  I did a &quot;save as&quot; to the type .csv (not the unicode variety).  It was already set to that file format, so that answers whether it is Unicode.  The problem is that the data comes from a discovery tool that can pull data from thousands of devices globally.  So there really could be weird stuff in the source file"}, {"owner": {"reputation": 394, "user_id": 10071946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eTZGBlyhMyc/AAAAAAAAAAI/AAAAAAAABZM/jNGDDNH3VGo/photo.jpg?sz=128", "display_name": "Tim B", "link": "https://stackoverflow.com/users/10071946/tim-b"}, "reply_to_user": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 0, "creation_date": 1535593605, "post_id": 52087219, "comment_id": 91126555, "body": "Found the answer.  Based on the feedback I decided to look and see if there were other codecs I should try.  In looking through the documentation I found that there is a parameter in open errors=&#39;strict&#39;.  It didn&#39;t actually say what the other options were, but that led to the right Google search.  This thread is a Duplicate, but not of the thread referenced above.  The correct answer is to open the file with errors=&#39;ignore&#39;.  That solved the problem.  This is the thread with the solution:  <a href=\"https://stackoverflow.com/questions/10487563/unicode-error-handling-with-python-3s-readlines\" title=\"unicode error handling with python 3s readlines\">stackoverflow.com/questions/10487563/&hellip;</a>"}, {"owner": {"reputation": 394, "user_id": 10071946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eTZGBlyhMyc/AAAAAAAAAAI/AAAAAAAABZM/jNGDDNH3VGo/photo.jpg?sz=128", "display_name": "Tim B", "link": "https://stackoverflow.com/users/10071946/tim-b"}, "reply_to_user": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 0, "creation_date": 1535665299, "post_id": 52087219, "comment_id": 91162516, "body": "Thanks for your feedback @Greenstick.  Your edits are much clearer than my initial attempt."}, {"owner": {"reputation": 6554, "user_id": 2206251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuSbu.jpg?s=128&g=1", "display_name": "Greenstick", "link": "https://stackoverflow.com/users/2206251/greenstick"}, "edited": false, "score": 0, "creation_date": 1535734494, "post_id": 52087219, "comment_id": 91190670, "body": "Happy to help! And welcome to SO!"}], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 10071946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eTZGBlyhMyc/AAAAAAAAAAI/AAAAAAAABZM/jNGDDNH3VGo/photo.jpg?sz=128", "display_name": "Tim B", "link": "https://stackoverflow.com/users/10071946/tim-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1539962299, "last_edit_date": 1539962299, "creation_date": 1535593754, "answer_id": 52088173, "question_id": 52087219, "link": "https://stackoverflow.com/questions/52087219/how-to-address-python-import-of-file-with-csv-dictreader-fails-on-undefined-ch/52088173#52088173", "title": "How to address: Python import of file with .csv Dictreader fails on undefined character", "body": "<p>I posted the solution I went with in the comments above; it was to set the <code>errors</code> argument of <code>open()</code> to <code>'ignore'</code>:</p>\n\n<pre><code>with open(file, newline = '', errors='ignore') as f: \n</code></pre>\n\n<p>This is exactly what I was looking for in my first question in the original post above (i.e. whether there is a way to tell the <code>csv.DictReader</code> to ignore undefined characters).</p>\n\n<p>Update:  Later I did need to work with some of the Unicode characters and couldn't ignore them.  The correct answer for that solution based on Excel-produced unicode .csv file was to use the 'utf_8_sig' codec.  That deletes the byte order marker (utf-16 BOM) that Windows writes at the top of the file to let it know there are unicode characters in it.</p>\n"}], "owner": {"reputation": 394, "user_id": 10071946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eTZGBlyhMyc/AAAAAAAAAAI/AAAAAAAABZM/jNGDDNH3VGo/photo.jpg?sz=128", "display_name": "Tim B", "link": "https://stackoverflow.com/users/10071946/tim-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 52088173, "answer_count": 1, "score": 3, "last_activity_date": 1539962299, "creation_date": 1535584020, "last_edit_date": 1535664926, "question_id": 52087219, "link": "https://stackoverflow.com/questions/52087219/how-to-address-python-import-of-file-with-csv-dictreader-fails-on-undefined-ch", "title": "How to address: Python import of file with .csv Dictreader fails on undefined character", "body": "<p>First of all, I found <a href=\"https://stackoverflow.com/questions/38019379/python-unicodedecodeerror-utf8-codec-cant-decode-byte-0x91\">the following</a> which is basically the same as my question, but it is closed and I'm not sure I understand the reason for closing vs. the content of the post.  I also don't really see a working answer.</p>\n\n<p>I have 20+ input files from 4 apps.  All files are exported as .csv files.  The first 19 files worked (4 others exported from the same app work) and then I ran into a file that gives me this error:</p>\n\n<pre><code>UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5762: character maps to &lt;undefined&gt;\n</code></pre>\n\n<p>If I looked that up right it is a &amp;lt ctrl &amp;gt. The code below are the relevant lines: </p>\n\n<pre><code>with open(file, newline = '') as f: \n    reader = csv.DictReader(f, dialect = 'excel')\n    for line in reader:\n</code></pre>\n\n<p>I know I'm going to be getting a file.  I know it will be a .csv.  There may be some variance in what I get due to the manual generation/export of the source files.  There may also be some strange characters in some of the files (e.g. Japanese, Russian, etc.). I provide this information because going back to the source to get a different file might just kick the can down the road until I have to pull updated data (or worse, someone else does). </p>\n\n<p>So the question is probably multi-part:<br>\n1) Is there a way to tell the csv.DictReader to ignore undefined characters?  (Hint for the codec:  if I can't see it, it is of no value to me.)</p>\n\n<p>2) If I do have \"crazy\" characters, what should I do?  I've considered opening each input as a binary file, filtering out offending hex characters, writing the file back to disk and then opening the new file, but that seems like a lot of overhead for the program and even more for me.  It's also a few JCL statements from being 1977 again.</p>\n\n<p>3) How do I figure out what I'm getting as an input if it crashes while I'm reading it in.</p>\n\n<p>4) I chose the \"dialect = 'excel'\"; because many of the inputs are Excel files that can be downloaded from one of the source applications.  From the docs on dictreader, my impression is that this just defines delimiter, quote character and EOL characters to expect/use.  Therefore, I don't think this is my issue, but I'm also a Python noob, so I'm not 100% sure.</p>\n"}, {"tags": ["python", "tensorflow", "matrix", "matrix-multiplication"], "answers": [{"tags": [], "owner": {"reputation": 539, "user_id": 10149172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8336be71fbe148053db45a9d9314021?s=128&d=identicon&r=PG&f=1", "display_name": "dtward", "link": "https://stackoverflow.com/users/10149172/dtward"}, "is_accepted": true, "score": 1, "last_activity_date": 1535586608, "last_edit_date": 1535586608, "creation_date": 1535586306, "answer_id": 52087449, "question_id": 52087206, "link": "https://stackoverflow.com/questions/52087206/multiply-a-set-of-constants-1d-array-with-a-set-of-matrixes-3d-array-in-tens/52087449#52087449", "title": "Multiply a set of constants (1D array) with a set of matrixes (3D array) in Tensorflow", "body": "<p>Tensorflow uses the same type of indexing as numpy, which can be quite powerful.  </p>\n\n<p>You can look at details here: <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy-1.13.0/user/basics.broadcasting.html</a>  Note that <code>np.newaxis</code> is defined to be the same as <code>None</code>.</p>\n\n<p>For your problem, you can add an extra dimension to your data to make sure there's no ambiguity in how arrays get multiplied.</p>\n\n<pre><code>import numpy as np\ncov = np.array([[5.],[8.],[4.]])\neyes = np.array([[[1.0,0,0,0],[0.0,1.0,0.0,0],[0.0,0.0,1.0,0],[0.0,0.0,0.0,1.0]],[[1.0,0,0,0],[0.0,1.0,0.0,0],[0.0,0.0,1.0,0],[0.0,0.0,0.0,1.0]],[[1.0,0,0,0],[0.0,1.0,0.0,0],[0.0,0.0,1.0,0],[0.0,0.0,0.0,1.0]]])\nresult = cov[:,:,None]*eyes\n</code></pre>\n\n<p>Using <code>None</code> here adds an extra dimension, making <code>cov</code> into a 3x1x1 array, which can unambiguously multiply with a 3x4x4 array.  You can use <code>None</code> this way in tensorflow as well.</p>\n\n<p>Two arrays can multiply unambiguously if each corresponding dimensions are either the same size, or one of them has size 1.</p>\n"}], "owner": {"reputation": 814, "user_id": 6130605, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3fc6c12348dbf0f46dd14ad2fa391018?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Orellana", "link": "https://stackoverflow.com/users/6130605/diego-orellana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 1, "accepted_answer_id": 52087449, "answer_count": 1, "score": 2, "last_activity_date": 1535586608, "creation_date": 1535583869, "question_id": 52087206, "link": "https://stackoverflow.com/questions/52087206/multiply-a-set-of-constants-1d-array-with-a-set-of-matrixes-3d-array-in-tens", "title": "Multiply a set of constants (1D array) with a set of matrixes (3D array) in Tensorflow", "body": "<p>My end goal is to train a 4D multivariate gaussian distribution parameterized on the mean and covariance </p>\n\n<p><a href=\"https://i.stack.imgur.com/UfJby.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UfJby.png\" alt=\"enter image description here\"></a></p>\n\n<p>where,</p>\n\n<p><a href=\"https://i.stack.imgur.com/6Hf8B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Hf8B.png\" alt=\"enter image description here\"></a></p>\n\n<p>and,</p>\n\n<p><a href=\"https://i.stack.imgur.com/Qb0dF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qb0dF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Currently I have the following code:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\nvalue = [[1,2.0,3,4,5],[0,2,4,6,8],[80,7,6,5,4]]\n\nvalue=tf.constant(value)\n\ncov= tf.slice(value,[0,int(value.shape[1])-1],[int(value.shape[0]),1])\nmean= tf.slice(value,[0,0],[int(value.shape[0]),int(value.shape[1])-1])\n\neyes=tf.eye(int(mean.shape[1]),batch_shape=[int(value.shape[0])])\n\n\n#eyes = tf.multiply(eyes,cov)\n\n\n\nnormal = tf.contrib.distributions.MultivariateNormalFullCovariance(\n                 loc=mean,\n                 covariance_matrix=eyes) \n</code></pre>\n\n<p><code>value = [[1,2.0,3,4,5],[0,2,4,6,8],[80,7,6,5,4]]</code>  is an example of what the rest of the code may be receiving.</p>\n\n<p>In the example above</p>\n\n<pre><code>cov = &lt;tf.Tensor 'Slice_2:0' shape=(3, 1) dtype=float32&gt;\neyes = &lt;tf.Tensor 'eye_1/MatrixDiag:0' shape=(3, 4, 4) dtype=float32&gt;\n\n                     cov =  [[5.] [8.] [4.]]` \n                     eyes =  [[[1. 0. 0. 0.]\n                              [0. 1. 0. 0.]\n                              [0. 0. 1. 0.]\n                              [0. 0. 0. 1.]]\n\n                             [[1. 0. 0. 0.]\n                              [0. 1. 0. 0.]\n                              [0. 0. 1. 0.]\n                              [0. 0. 0. 1.]]\n\n                             [[1. 0. 0. 0.]\n                              [0. 1. 0. 0.]\n                              [0. 0. 1. 0.]\n                              [0. 0. 0. 1.]]]`\n</code></pre>\n\n<p>My question is, How can I obtain <code>result</code> given <code>cov</code> and <code>eyes</code>? where result is as follows:</p>\n\n<pre><code>result = [[[5., 0., 0., 0.],\n           [0., 5., 0., 0.],\n           [0., 0., 5., 0.],\n           [0., 0., 0., 5.]],\n\n          [[8., 0., 0., 0.],\n           [0., 8., 0., 0.],\n           [0., 0., 8., 0.],\n           [0., 0., 0., 8.]],\n\n          [[4., 0., 0., 0.],\n           [0., 4., 0., 0.],\n           [0., 0., 4., 0.],\n           [0., 0., 0., 4.]]]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gdijc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gdijc.png\" alt=\"enter image description here\"></a></p>\n\n<p><em>Thanks, in advance</em>.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535583965, "post_id": 52087195, "comment_id": 91124669, "body": "How do you want the result to look? The output will only have two rows."}, {"owner": {"reputation": 58, "user_id": 10292370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18c2c111f41898dfa487c90f5efc67b2?s=128&d=identicon&r=PG&f=1", "display_name": "mynameisarjay", "link": "https://stackoverflow.com/users/10292370/mynameisarjay"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535584217, "post_id": 52087195, "comment_id": 91124739, "body": "a series of data indexed by index_a so something like:      index_a   new_column\t     1          1:00:00\t     2         2:00:00"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535584376, "post_id": 52087195, "comment_id": 91124785, "body": "I can&#39;t understand that without any formatting inside the comments. Please edit your question."}, {"owner": {"reputation": 58, "user_id": 10292370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18c2c111f41898dfa487c90f5efc67b2?s=128&d=identicon&r=PG&f=1", "display_name": "mynameisarjay", "link": "https://stackoverflow.com/users/10292370/mynameisarjay"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535586268, "post_id": 52087195, "comment_id": 91125223, "body": "I have found a way to do it by each index:  df.loc[1,&#39;Foo&#39;][&#39;date_a&#39;] - df.loc[1.&#39;Bar&#39;][&#39;date_b&#39;]  Now, how do I it to all index_a"}], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 10292370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18c2c111f41898dfa487c90f5efc67b2?s=128&d=identicon&r=PG&f=1", "display_name": "mynameisarjay", "link": "https://stackoverflow.com/users/10292370/mynameisarjay"}, "edited": false, "score": 0, "creation_date": 1535586803, "post_id": 52087446, "comment_id": 91125315, "body": "Exactly what I need, Thanks!"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1535586282, "creation_date": 1535586282, "answer_id": 52087446, "question_id": 52087195, "link": "https://stackoverflow.com/questions/52087195/perform-operations-on-different-rows-on-a-multiindex-dataframe/52087446#52087446", "title": "Perform operations on different rows on a multiindex DataFrame", "body": "<p>Use <code>DataFrame.xs</code> to slice levels and subtract:</p>\n\n<pre><code>(pd.to_datetime(df.xs('Foo', level=1)['date_a']) \n     - pd.to_datetime(df.xs('Bar', level=1)['date_b']))\n\nindex_a\n1    13 days\n2   398 days\ndtype: timedelta64[ns]\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 10292370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18c2c111f41898dfa487c90f5efc67b2?s=128&d=identicon&r=PG&f=1", "display_name": "mynameisarjay", "link": "https://stackoverflow.com/users/10292370/mynameisarjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 52087446, "answer_count": 1, "score": 1, "last_activity_date": 1535586484, "creation_date": 1535583800, "last_edit_date": 1535586484, "question_id": 52087195, "link": "https://stackoverflow.com/questions/52087195/perform-operations-on-different-rows-on-a-multiindex-dataframe", "title": "Perform operations on different rows on a multiindex DataFrame", "body": "<p>Given I have the following MultiIndex Dataframe</p>\n\n<pre><code>                     date_a        date_b\nindex_a   index_b               \n1          Foo     1/2/2018     1/1/2018\n           Bar     1/3/2018     12/20/2017  \n2          Foo     2/4/2018     3/6/2018\n           Bar     2/2/2017     1/2/2017\n</code></pre>\n\n<p>How do I generate a series that gets the difference of date_a from Foo and date_b from Bar indexed by index_a</p>\n\n<pre><code>index_a   difference_of_a_and_b     \n1          1:00:00  \n2          2:00:00\n</code></pre>\n\n<p>I have found a way to do it by each index: </p>\n\n<pre><code>df.loc[1,'Foo']['date_a'] - df.loc[1,'Bar']['date_b'] \n</code></pre>\n\n<p>Now, how do I it to all index_a </p>\n"}, {"tags": ["python", "python-3.x", "elasticsearch"], "comments": [{"owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "edited": false, "score": 0, "creation_date": 1535601930, "post_id": 52087193, "comment_id": 91128211, "body": "<code>EVENT</code> vs <code>Event</code> maybe?"}, {"owner": {"reputation": 302, "user_id": 3391589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/73624f9dfa807573a36043c2df8ccb5a?s=128&d=identicon&r=PG&f=1", "display_name": "Yuhao Zhang", "link": "https://stackoverflow.com/users/3391589/yuhao-zhang"}, "reply_to_user": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "edited": false, "score": 0, "creation_date": 1535602208, "post_id": 52087193, "comment_id": 91128282, "body": "@Val Ah, thanks! Fixed."}], "owner": {"reputation": 302, "user_id": 3391589, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/73624f9dfa807573a36043c2df8ccb5a?s=128&d=identicon&r=PG&f=1", "display_name": "Yuhao Zhang", "link": "https://stackoverflow.com/users/3391589/yuhao-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535643745, "creation_date": 1535583795, "last_edit_date": 1535643745, "question_id": 52087193, "link": "https://stackoverflow.com/questions/52087193/elasticsearch-field-inserted-with-keyword-mapping-become-string-type", "title": "Elasticsearch: field inserted with keyword mapping become string type", "body": "<p><strong>Elasticsearch version: 5.6.5</strong></p>\n\n<p>I am using Elasticsearch Python API to create indices and bulk-insert documents:</p>\n\n<pre><code>EVENT = {\n    \"mappings\": {\n        \"my_mapping\": {\n            \"properties\": {\n                \"event_time\": {\n                    \"type\": \"date\"\n                },\n                \"some_field\": {\n                    \"type\": \"keyword\"\n                }\n            }\n        }\n    }\n}\n\nes = Elasticsearch(\"localhost\")\nes.indices.create(index=\"some_index\", ignore=400, body=EVENT)\nactions = [\n            {\n                '_index': index,\n                '_type': \"my_mapping\",\n                '_source': doc\n            } for doc in a_list_of_dictionaries]\nhelpers.bulk(es, actions, raise_on_error=True, request_timeout=15)\n</code></pre>\n\n<p>However, the above code created a \"some_field\" field as <code>string</code> type instead of <code>keyword</code>, I also see a string field called \"some_field.keyword\" populated automatically.</p>\n\n<p>How do I create a <code>keyword</code> field so that I can search for only exact whole word match?</p>\n"}, {"tags": ["python", "numpy", "type-conversion"], "answers": [{"comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1535615534, "post_id": 52087221, "comment_id": 91133455, "body": "Is there any advantage of this over <code>np.triu_indices()</code>?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 1, "creation_date": 1535616270, "post_id": 52087221, "comment_id": 91133902, "body": "@norok2 Good question. Added section at the end including timings."}, {"owner": {"reputation": 157, "user_id": 7774259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f4bfc0e41532c4b0db82d3ecefb262?s=128&d=identicon&r=PG", "display_name": "Buttonwood", "link": "https://stackoverflow.com/users/7774259/buttonwood"}, "edited": false, "score": 0, "creation_date": 1536092411, "post_id": 52087221, "comment_id": 91297737, "body": "For just starting to work with numpy, this was very much more than anticipated -- and in much more depth, than expected.  Although the matrices to built are less large (up to about 80..100 columns/lines) delegating this work to Python clearly showed to be a huge time saver compared to manual rectangular mark and yank across Emacs&#39; buffers and transpose paste in gnumeric..."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 5, "last_activity_date": 1535616248, "last_edit_date": 1535616248, "creation_date": 1535584054, "answer_id": 52087221, "question_id": 52087192, "link": "https://stackoverflow.com/questions/52087192/list-to-matrix-conversion-with-numpy/52087221#52087221", "title": "list to matrix conversion with numpy", "body": "<p>Here's one vectorized approach leveraging <code>broadcasting</code> and <code>masking/boolean-indexing</code> -</p>\n\n<pre><code>r = np.arange(dimension)\nmask = r[:,None] &lt; r # Or in one step : ~np.tri(dimension,dtype=bool)\nmatrix[mask] = register\nmatrix.T[mask] = register\n</code></pre>\n\n<p>If you need to compute <code>dimension</code> from the given <code>register</code>, we could use : </p>\n\n<pre><code>dimension = int(np.ceil(np.sqrt(2*len(register))))\n</code></pre>\n\n<p>And to assert for length, given <code>dimension</code>, we could have :</p>\n\n<pre><code>assert dimension*(dimension-1)//2 == len(register)\n</code></pre>\n\n<p>Also, for performance do consider feeding in the array version of <code>register</code>.</p>\n\n<p>Sample run -</p>\n\n<pre><code>In [43]: import numpy as np\n    ...: dimension = 4    # other matrices' dimensions will be larger\n    ...: matrix = np.zeros((dimension,dimension))\n    ...: \n    ...: register = [11, 12, 13, 23, 24, 34]\n\nIn [44]: r = np.arange(dimension)\n    ...: mask = r[:,None] &lt; r\n    ...: matrix[mask] = register\n    ...: matrix.T[mask] = register\n\nIn [45]: matrix\nOut[45]: \narray([[ 0., 11., 12., 13.],\n       [11.,  0., 23., 24.],\n       [12., 23.,  0., 34.],\n       [13., 24., 34.,  0.]])\n</code></pre>\n\n<p><strong>How <code>masking</code> could be better than generating all triangular indices</strong></p>\n\n<p>Generating the indices would occupy more memory than creating a boolean array which by its very nature would be memory efficient and hence translates to better performance, especially on large arrays. Timings on this would try to prove it -</p>\n\n<pre><code>In [3]: import numpy as np\n   ...: dimension = 5000    # other matrices' dimensions will be larger\n   ...: register = np.random.randint(0,10,dimension*(dimension-1)//2)\n\n# With masking and boolean-indexing\nIn [4]: %%timeit\n   ...: matrix = np.zeros((dimension,dimension),dtype=int)\n   ...: r = np.arange(dimension)\n   ...: mask = r[:,None] &lt; r\n   ...: matrix[mask] = register\n   ...: matrix.T[mask] = register\n10 loops, best of 3: 108 ms per loop\n\n# With triangular indices indexing\nIn [5]: %%timeit\n   ...: N = dimension\n   ...: matrix = np.zeros((dimension,dimension),dtype=int)\n   ...: idx = np.triu_indices(N, k=1)\n   ...: matrix = np.zeros((N, N))\n   ...: matrix[idx] = register\n   ...: matrix.T[idx] = register\n1 loop, best of 3: 364 ms per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 7774259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f4bfc0e41532c4b0db82d3ecefb262?s=128&d=identicon&r=PG", "display_name": "Buttonwood", "link": "https://stackoverflow.com/users/7774259/buttonwood"}, "edited": false, "score": 1, "creation_date": 1536091493, "post_id": 52087231, "comment_id": 91297332, "body": "Condensed to the point (in sight of posts like (<a href=\"https://academia.stackexchange.com/questions/115967/during-peer-review-should-i-comment-on-the-authors-messy-code\" title=\"during peer review should i comment on the authors messy code\">academia.stackexchange.com/questions/115967/&hellip;</a>)) plus a useful checkpoint in the code. Sadly, there is only once the mark of accepted answer."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 4, "last_activity_date": 1535584547, "last_edit_date": 1535584547, "creation_date": 1535584185, "answer_id": 52087231, "question_id": 52087192, "link": "https://stackoverflow.com/questions/52087192/list-to-matrix-conversion-with-numpy/52087231#52087231", "title": "list to matrix conversion with numpy", "body": "<p>Here's another vectorised approach with <code>triu_indices</code>:</p>\n\n<pre><code>N = 4\nidx = np.triu_indices(N, k=1)\nmatrix = np.zeros((N, N))\nmatrix[idx] = register\nmatrix.T[idx] = register\n</code></pre>\n\n<p>Generate a indices for the upper triangular matrix with a diagonal offset of 1, and then assign accordingly.</p>\n\n<p>Ensure that register has enough elements to do this operation. You can enforce a precondition check using </p>\n\n<pre><code>assert len(register) == np.count_nonzero(1 - np.tri(N))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 7774259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f4bfc0e41532c4b0db82d3ecefb262?s=128&d=identicon&r=PG", "display_name": "Buttonwood", "link": "https://stackoverflow.com/users/7774259/buttonwood"}, "edited": false, "score": 0, "creation_date": 1536091973, "post_id": 52087233, "comment_id": 91297536, "body": "Selecting integers instead of true floating numbers in the question aimed for useful simplification of the problem faced.  But I agree with you, I shall discern them more clearly, especially around Python and future use of numpy and eventually scipy."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1535584205, "creation_date": 1535584205, "answer_id": 52087233, "question_id": 52087192, "link": "https://stackoverflow.com/questions/52087192/list-to-matrix-conversion-with-numpy/52087233#52087233", "title": "list to matrix conversion with numpy", "body": "<p>Just call <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.squareform.html\" rel=\"noreferrer\"><code>scipy.spatial.distance.squareform</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; import scipy.spatial.distance\n&gt;&gt;&gt; scipy.spatial.distance.squareform([11, 12, 13, 23, 24, 34])\narray([[ 0, 11, 12, 13],\n       [11,  0, 23, 24],\n       [12, 23,  0, 34],\n       [13, 24, 34,  0]])\n</code></pre>\n\n<p>The conversion you want is the same as the conversion from a condensed distance matrix to a square-form distance matrix, and <code>scipy.spatial.distance.squareform</code> performs that conversion (and its inverse). Be careful about dtypes, though; <code>[11, 12, 13, 23, 24, 34]</code> is a list of ints, not floats, and passing it to <code>squareform</code> will give you an array of ints. You can convert the input to floats or call <code>result.astype(float)</code> if you want floats.</p>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 7774259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f4bfc0e41532c4b0db82d3ecefb262?s=128&d=identicon&r=PG", "display_name": "Buttonwood", "link": "https://stackoverflow.com/users/7774259/buttonwood"}, "edited": false, "score": 0, "creation_date": 1536090977, "post_id": 52087907, "comment_id": 91297068, "body": "Considering myself pretty much as a beginner about Python, I really like this answer because it showed that there was little in addition to consider to perform the task successfully.   Even if the other answers are more condensed because they use functions in numpy (and scipy) I wasn&#39;t yet aware."}], "tags": [], "owner": {"reputation": 153, "user_id": 10077641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o55WM-4rOO0/AAAAAAAAAAI/AAAAAAAAAKY/WLzXx8iM8xY/photo.jpg?sz=128", "display_name": "Aron Lawrence", "link": "https://stackoverflow.com/users/10077641/aron-lawrence"}, "is_accepted": true, "score": 1, "last_activity_date": 1535591302, "last_edit_date": 1535591302, "creation_date": 1535590879, "answer_id": 52087907, "question_id": 52087192, "link": "https://stackoverflow.com/questions/52087192/list-to-matrix-conversion-with-numpy/52087907#52087907", "title": "list to matrix conversion with numpy", "body": "<p>You were pretty close, your issue occurs when <code>progress</code> is equal to or greater than <code>permitted_steps-1</code> as there is no range there to iterate through. try this:</p>\n\n<pre><code>    import numpy as np\n\n    dimension = 4\n    matrix = np.zeros((dimension,dimension))\n\n    register = [11, 12, 13, 23, 24, 34]\n    progress = 0\n    inner_step = 0\n    i = 0\n    offset = 0\n    for progress in range(0, (dimension + 1)):\n        permitted_steps = dimension - progress\n        for i in range(0, permitted_steps-1):\n            matrix[(progress, inner_step+1+offset)] = register[0]\n            matrix[(inner_step+1+offset, progress)] = register[0]\n            inner_step += 1\n            del register[0]\n        progress += 1\n        inner_step = 0\n        offset +=1\n    print matrix\n</code></pre>\n\n<p>And that will print out:</p>\n\n<pre><code>[[  0.  11.  12.  13.]\n [ 11.   0.  23.  24.]\n [ 12.  23.   0.  34.]\n [ 13.  24.  34.   0.]]\n</code></pre>\n\n<p>if you change your register array to length 10:</p>\n\n<pre><code>register = [11, 12, 13, 23, 24, 34, 37, 39, 40, 43]\n</code></pre>\n\n<p>you will get: </p>\n\n<pre><code>[[  0.  11.  12.  13.  23.]\n [ 11.   0.  24.  34.  37.]\n [ 12.  24.   0.  39.  40.]\n [ 13.  34.  39.   0.  43.]\n [ 23.  37.  40.  43.   0.]]\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 7774259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f4bfc0e41532c4b0db82d3ecefb262?s=128&d=identicon&r=PG", "display_name": "Buttonwood", "link": "https://stackoverflow.com/users/7774259/buttonwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 52087907, "answer_count": 4, "score": 2, "last_activity_date": 1535616248, "creation_date": 1535583794, "question_id": 52087192, "link": "https://stackoverflow.com/questions/52087192/list-to-matrix-conversion-with-numpy", "title": "list to matrix conversion with numpy", "body": "<p>Starting from a list of floats, i.e. </p>\n\n<pre><code>register = [11, 12, 13, 23, 24, 34]\n</code></pre>\n\n<p>I would like to generate symmetric matrices where elements of the diagonal equal to zero, i.e.</p>\n\n<pre><code>[[  0.  11.  12.  13.]\n [ 11.   0.  23.  24.]\n [ 12.  23.   0.  34.]\n [ 13.  24.  34.   0.]]\n</code></pre>\n\n<p>So I opted for creating a zero with dimension 4 x 4 then to be filled with the elements of my list.  After setting a progress indicator and considering an offset to not overwrite the zeroes of the diagonal, I then would either move to east (or south) until the number of previously determined steps to reach the limit of the matrix were consumed.  After incrementing of the progress and reset of the initial step counter, I could enter the next column (line) to proceed further.  However, I erred in my present code (at least once -- it is my first contact with numpy) and harvest only</p>\n\n<pre><code>[[  0.  11.  12.  13.]\n [ 11.   0.  23.   0.]\n [ 12.  23.   0.   0.]\n [ 13.   0.   0.   0.]]\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code> import numpy as np\n dimension = 4    # other matrices' dimensions will be larger\n matrix = np.zeros((dimension,dimension))\n\n register = [11, 12, 13, 23, 24, 34]\n\n progress = 0\n inner_step = 0\n i = 0\n\n for progress in range(0, (dimension + 1)):\n permitted_steps = dimension - progress\n for i in range(progress, permitted_steps-1):\n     matrix[(progress, inner_step+1+offset)] = register[0]\n     matrix[(inner_step+1+offset, progress)] = register[0]\n     inner_step += 1\n     del register[0]\n\n progress += 1\n inner_step = 0\n offset += 1\n</code></pre>\n\n<p>The targeted environment used is Python 2.7 (Continuum Anaconda) for Windows.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 1, "creation_date": 1535584001, "post_id": 52087165, "comment_id": 91124682, "body": "the last migrations file that you had before removing the <code>IntegerField()</code> still has your default value <code>&#39;undefined&#39;</code> as default"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1535584373, "post_id": 52087165, "comment_id": 91124783, "body": "Migrations are regular Python modules (i.e. <code>.py</code> files). Find the relevant migration and remove the offending code."}, {"owner": {"reputation": 1243, "user_id": 9397534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/17BOy.jpg?s=128&g=1", "display_name": "Desiigner", "link": "https://stackoverflow.com/users/9397534/desiigner"}, "edited": false, "score": 0, "creation_date": 1535584417, "post_id": 52087165, "comment_id": 91124795, "body": "Thank you guys, I really didn&#39;t know that. It works great!"}], "owner": {"reputation": 1243, "user_id": 9397534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/17BOy.jpg?s=128&g=1", "display_name": "Desiigner", "link": "https://stackoverflow.com/users/9397534/desiigner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535583565, "creation_date": 1535583565, "question_id": 52087165, "link": "https://stackoverflow.com/questions/52087165/cannot-delete-an-sql-object-in-django", "title": "Cannot delete an sql object in Django", "body": "<p>I'm working on a Django project and I have a problem with deleting an object. I have a model called Order and it looked like this:</p>\n\n<pre><code>class Order(models.Model):\n    name = models.CharField(max_length=64)\n    price = models.IntegerField()\n    add = models.CharField(max_length=128)\n    size = models.CharField(max_length=5, default=\"Undefined\")\n    guest = models.CharField(max_length=64, default=\"Anonymous\")\n</code></pre>\n\n<p>I've already had an object and I decided to add another integer row. I forgot that integer rows must have integer default values and I just typed 'undefined'. When I made migrations, that was applied to my existing object but also gave me the following error:</p>\n\n<pre><code>ValueError: invalid literal for int() with base 10: 'undefined'\n</code></pre>\n\n<p>I've removed default value in the row but everytime I want to migrate (makemigrations works fine) I get the same error (this error above).</p>\n\n<p>All I have to do is to delete this 'broken' object but I can't. I tried:</p>\n\n<pre><code>Orders.objects.all().delete()\n</code></pre>\n\n<p>it gave me the same error. And I also cannot access to this table via Django admin because of this error. What should I do?</p>\n"}, {"tags": ["python", "python-3.x"], "owner": {"reputation": 11, "user_id": 10292366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5891bd44159d123ee8dc40d426c9ed8b?s=128&d=identicon&r=PG&f=1", "display_name": "treaz92", "link": "https://stackoverflow.com/users/10292366/treaz92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1535583877, "answer_count": 0, "score": 1, "last_activity_date": 1535583718, "creation_date": 1535583465, "last_edit_date": 1535583718, "question_id": 52087150, "link": "https://stackoverflow.com/questions/52087150/issue-with-multiplication-0-1", "closed_reason": "Duplicate", "title": "Issue with multiplication 0.1", "body": "<p>I have values and when I diveded with 0.1 and multiply with 0.1 I don't have the value that I expected.</p>\n\n<p>Exemple :</p>\n\n<pre><code>X=963.9\n</code></pre>\n\n<p>I have this formula :</p>\n\n<pre><code>Y=int(X/0.1)*0.1\n</code></pre>\n\n<p>I expected Y=963.9 but I have 963.9000000000001\nI would like to have the same number.</p>\n\n<p>With some other number like </p>\n\n<pre><code>X=963.8\n</code></pre>\n\n<p>result = 963.7 and I expected =963.8</p>\n\n<p>I don't understand why !!\nHelp</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 2, "creation_date": 1535609995, "post_id": 52087148, "comment_id": 91130516, "body": "It&#39;s not really clear what you want to achieve. Please describe your goals and issues in detail. Perhaps an image would help."}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 1, "creation_date": 1535640588, "post_id": 52087148, "comment_id": 91150444, "body": "The problem is that you don&#39;t need to <i>add</i> a block, you just need to <i>not</i> remove one when moving. When the snake moves what you do is removing the last block (a piece of the &quot;tail&quot;) and add one at the head in the direction of the last keypress. If you just add one at the head without removing it from the tail, you&#39;ll have a longer snake."}, {"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1535661523, "post_id": 52087148, "comment_id": 91161173, "body": "Check out this answer on GameDev SE <a href=\"https://gamedev.stackexchange.com/a/33789/104257\">gamedev.stackexchange.com/a/33789/104257</a> Pretty much any game development question you need to ask will be there."}], "owner": {"reputation": 155, "user_id": 9975119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-St2zj5dcCvQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2fEUnpQECCYXjFPEfzGbyp3Fngvw/mo/photo.jpg?sz=128", "display_name": "Lol Lol", "link": "https://stackoverflow.com/users/9975119/lol-lol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "closed_date": 1610395198, "answer_count": 0, "score": 0, "last_activity_date": 1535609797, "creation_date": 1535583446, "last_edit_date": 1535609797, "question_id": 52087148, "link": "https://stackoverflow.com/questions/52087148/python-snake-lengthing-algorithm", "closed_reason": "Duplicate", "title": "Python snake lengthing algorithm", "body": "<p>So i thought of this algorithm that consists of creating a counter that adds to itself the block size of a rect object  + 1 and then draws another rect using the lead_x + counter.\nWhat this would do is that it would constantly add another block to the outermost side of the snake.\nBut for some reason it's not working.\nAny explanation as to why and how I can make it work would leave me extremely grateful. Best of wishes.</p>\n\n<pre><code>if rectangle.colliderect(rectangle2):\n    counter += block_size + 1\n    lead_x2 = randint(100, 700)\n    lead_y2 = randint(100, 500)\n    velocity += 0.000002\n\n    pygame.draw.rect(gameDisplay, black, [lead_x + counter, lead_y, block_size, block_size])\n    pygame.draw.rect(gameDisplay, red, [lead_x2, lead_y2, block_size, block_size])\n\n    message_to_screen(\"You ate an apple.\", red)\n</code></pre>\n"}, {"tags": ["python", "nltk"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1535582875, "post_id": 52087044, "comment_id": 91124395, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/on-topic\">On topic</a>, <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>, and <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">... the perfect question</a> apply here. StackOverflow is an archive of specific programming solutions.  Your question seems to want generic guidance for attacking a loosely defined application."}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1535584281, "post_id": 52087044, "comment_id": 91124755, "body": "The method for doing this could vary greatly depending on the document type. What are we working with?"}, {"owner": {"reputation": 13, "user_id": 8470050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049bd3d314ecd7ae763cff940d259c84?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/8470050/austin"}, "edited": false, "score": 0, "creation_date": 1535586155, "post_id": 52087044, "comment_id": 91125206, "body": "Im working on csv file and alr know how to read the file."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1535600263, "post_id": 52087044, "comment_id": 91127897, "body": "Possible dupe of <a href=\"https://stackoverflow.com/questions/3113428/classifying-documents-into-categories\" title=\"classifying documents into categories\">stackoverflow.com/questions/3113428/&hellip;</a>. Also, too broad."}], "answers": [{"comments": [{"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 1, "creation_date": 1535582972, "post_id": 52087080, "comment_id": 91124418, "body": "This doesn&#39;t answer the question. How do they identify if a sentence contains the term? Also it would be better to use a <code>dict</code> for this imo"}, {"owner": {"reputation": 35, "user_id": 10284803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28cc10694c67f989b2cde502e885dda8?s=128&d=identicon&r=PG&f=1", "display_name": "Frogmonkey", "link": "https://stackoverflow.com/users/10284803/frogmonkey"}, "reply_to_user": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1535583082, "post_id": 52087080, "comment_id": 91124461, "body": "Sorry, I thought that when you sort a document in python the text was read as a string"}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1535583792, "post_id": 52087080, "comment_id": 91124634, "body": "@Frogmonkey yes, but you didn&#39;t explain how to read the file or how to check if each word exists in the sentence. You simply told them how to increment variables, which I&#39;m sure they already knew"}], "tags": [], "owner": {"reputation": 35, "user_id": 10284803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28cc10694c67f989b2cde502e885dda8?s=128&d=identicon&r=PG&f=1", "display_name": "Frogmonkey", "link": "https://stackoverflow.com/users/10284803/frogmonkey"}, "is_accepted": false, "score": -2, "last_activity_date": 1535582888, "creation_date": 1535582888, "answer_id": 52087080, "question_id": 52087044, "link": "https://stackoverflow.com/questions/52087044/how-to-identify-a-sentences-related-to-a-topic/52087080#52087080", "title": "How to identify a sentences related to a topic?", "body": "<p>Just name the variables after the topics you want</p>\n\n<pre><code>lecture = 2\ntutor = 1\nexam = 1\n</code></pre>\n\n<p>You can use <code>variable_name += 1</code> to increment the variable</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8470050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049bd3d314ecd7ae763cff940d259c84?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/8470050/austin"}, "edited": false, "score": 0, "creation_date": 1535585614, "post_id": 52087159, "comment_id": 91125088, "body": "Thank you, this would solve my problem. However, this might have a problem that If a sentences repeat the word &quot;lecture&quot; twice, it would affect to result."}, {"owner": {"reputation": 13, "user_id": 8470050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049bd3d314ecd7ae763cff940d259c84?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/8470050/austin"}, "edited": false, "score": 0, "creation_date": 1535586103, "post_id": 52087159, "comment_id": 91125197, "body": "Also, if I want to extend my program which can analyse the sentence is positive or negative. Do you know which library would support for that?. I already try to use nltk with scikit classifier. But only can check result that already seen. For example, I label 200 sentence that are combination of positive and negative, then let classifier learn and check how many percentage of another labelled 50 comments is correct."}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "reply_to_user": {"reputation": 13, "user_id": 8470050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049bd3d314ecd7ae763cff940d259c84?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/8470050/austin"}, "edited": false, "score": 0, "creation_date": 1535735423, "post_id": 52087159, "comment_id": 91191082, "body": "You could always split the sentence further and evaluate each word if you want to find the same keyword twice in a sentence. I&#39;m not sure about libraries... maybe you could check out the software recommendations stack exchange site?"}], "tags": [], "owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "is_accepted": false, "score": 0, "last_activity_date": 1535583528, "creation_date": 1535583528, "answer_id": 52087159, "question_id": 52087044, "link": "https://stackoverflow.com/questions/52087044/how-to-identify-a-sentences-related-to-a-topic/52087159#52087159", "title": "How to identify a sentences related to a topic?", "body": "<p>I'm assuming you're reading from a text file or something. Here is how I would go about doing this.</p>\n\n<pre><code>keywords = {\"lecture\": 0, \"tutor\": 0, \"exam\": 0}\n\nwith open(\"file.txt\", \"r\") as f:\n  for line in f:\n    for key, value in keywords.items():\n      if key in line.lower():\n        value += 1\n\nprint(keywords)\n</code></pre>\n\n<p>This searches each line for any word in your keywords dictionary, and if a match is found, it increments the value on that key.</p>\n\n<p>You shouldn't need any external libraries or anything for this.</p>\n"}, {"tags": [], "owner": {"reputation": 4254, "user_id": 10255652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5DDj.jpg?s=128&g=1", "display_name": "vash_the_stampede", "link": "https://stackoverflow.com/users/10255652/vash-the-stampede"}, "is_accepted": false, "score": 0, "last_activity_date": 1535589345, "last_edit_date": 1535589345, "creation_date": 1535588456, "answer_id": 52087670, "question_id": 52087044, "link": "https://stackoverflow.com/questions/52087044/how-to-identify-a-sentences-related-to-a-topic/52087670#52087670", "title": "How to identify a sentences related to a topic?", "body": "<p><strong>Solution</strong></p>\n\n<pre><code>filename = \"information.txt\"\n\n\nlibrary = {\"lecture\": 0, \"tutor\": 0, \"exam\": 0}\n\nwith open(filename) as f_obj:\n    content = f_obj.read() # read text into contents\n\nwords  = (content.lower()).split() # create list of all words in content\n\nfor k, v in library.items():\n    for i in words:\n        if k in i:\n            v += 1 \n            library[k] = v # without this line code count will not update \n\nfor k, v in library.items():\n    print(k.title() + \": \"  + str(v))\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<blockquote>\n<pre><code>(xenial)vash@localhost:~/pcc/12/alien_invasion_2$ python3 helping_topic.py \nTutor: 1\nLecture: 2\nExam: 1\n(xenial)vash@localhost:~/pcc/12/alien_invasion_2$\n</code></pre>\n</blockquote>\n\n<p>This method will count duplicates for you</p>\n\n<p>Enjoy!</p>\n"}, {"comments": [{"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1535600320, "post_id": 52088896, "comment_id": 91127909, "body": "Shameless plug in help you further in the answer above, <a href=\"https://www.kaggle.com/alvations/basic-nlp-with-nltk\" rel=\"nofollow noreferrer\">kaggle.com/alvations/basic-nlp-with-nltk</a> and <a href=\"https://drive.google.com/file/d/1lxRclJablHF-veuRzWBgJ9gaqMNo6fPa/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1lxRclJablHF-veuRzWBgJ9gaqMNo6fPa/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 8470050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049bd3d314ecd7ae763cff940d259c84?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/8470050/austin"}, "edited": false, "score": 0, "creation_date": 1535614620, "post_id": 52088896, "comment_id": 91132904, "body": "Thanks, this would be potential answer for me"}], "tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": true, "score": 5, "last_activity_date": 1535664831, "last_edit_date": 1535664831, "creation_date": 1535600200, "answer_id": 52088896, "question_id": 52087044, "link": "https://stackoverflow.com/questions/52087044/how-to-identify-a-sentences-related-to-a-topic/52088896#52088896", "title": "How to identify a sentences related to a topic?", "body": "<p>This is the excellent example to use something smarter than string matching =)</p>\n\n<p>Lets consider this:</p>\n\n<ul>\n<li><p>Is there a way to <strong>convert each word to a vector form</strong> (i.e. an array of floats)?</p></li>\n<li><p>Is there a way to <strong>convert each sentence to the same vector form</strong> (i.e. an array of floats the same dimensions as the word's vector form?</p></li>\n</ul>\n\n<hr>\n\n<p>First lets get a vocabulary to all the words possible in your list of sentences (let's call it a corpus):</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import chain\n&gt;&gt;&gt; s1 = \"Lecture was engaging\"\n&gt;&gt;&gt; s2 = \"Tutor is very nice and active\"\n&gt;&gt;&gt; s3 = \"The content of lecture was too much for 2 hours.\"\n&gt;&gt;&gt; s4 = \"Exam seem to be too difficult compare with weekly lab.\"\n&gt;&gt;&gt; list(map(word_tokenize, [s1, s2, s3, s4]))\n[['Lecture', 'was', 'engaging'], ['Tutor', 'is', 'very', 'nice', 'and', 'active'], ['The', 'content', 'of', 'lecture', 'was', 'too', 'much', 'for', '2', 'hours', '.'], ['Exam', 'seem', 'to', 'be', 'too', 'difficult', 'compare', 'with', 'weekly', 'lab', '.']]\n&gt;&gt;&gt; vocab = sorted(set(token.lower() for token in chain(*list(map(word_tokenize, [s1, s2, s3, s4])))))\n&gt;&gt;&gt; vocab\n['.', '2', 'active', 'and', 'be', 'compare', 'content', 'difficult', 'engaging', 'exam', 'for', 'hours', 'is', 'lab', 'lecture', 'much', 'nice', 'of', 'seem', 'the', 'to', 'too', 'tutor', 'very', 'was', 'weekly', 'with']\n</code></pre>\n\n<p>Now lets' represent the 4 key words as vectors by using the index of the word in a vocabulary:</p>\n\n<pre><code>&gt;&gt;&gt; lecture = [1 if token == 'lecture' else 0 for token in vocab]\n&gt;&gt;&gt; lab = [1 if token == 'lab' else 0 for token in vocab]\n&gt;&gt;&gt; tutor = [1 if token == 'tutor' else 0 for token in vocab]\n&gt;&gt;&gt; exam = [1 if token == 'exam' else 0 for token in vocab]\n&gt;&gt;&gt; lecture\n[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n&gt;&gt;&gt; lab\n[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n&gt;&gt;&gt; tutor\n[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]\n&gt;&gt;&gt; exam\n[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n</code></pre>\n\n<p>Similarly, we loop through each sentence and convert them into a vector form:</p>\n\n<pre><code>&gt;&gt;&gt; [token.lower() for token in word_tokenize(s1)]\n['lecture', 'was', 'engaging']\n&gt;&gt;&gt; s1_tokens = [token.lower() for token in word_tokenize(s1)]\n&gt;&gt;&gt; s1_vec = [1 if token in s1_tokens else 0  for token in vocab]\n&gt;&gt;&gt; s1_vec\n[0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0]\n</code></pre>\n\n<p>Repeating the same for all sentences:</p>\n\n<pre><code>&gt;&gt;&gt; s2_tokens = [token.lower() for token in word_tokenize(s2)]\n&gt;&gt;&gt; s3_tokens = [token.lower() for token in word_tokenize(s3)]\n&gt;&gt;&gt; s4_tokens = [token.lower() for token in word_tokenize(s4)]\n&gt;&gt;&gt; s2_vec = [1 if token in s2_tokens else 0  for token in vocab]\n&gt;&gt;&gt; s3_vec = [1 if token in s3_tokens else 0  for token in vocab]\n&gt;&gt;&gt; s4_vec = [1 if token in s4_tokens else 0  for token in vocab]\n&gt;&gt;&gt; s2_vec\n[0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0]\n&gt;&gt;&gt; s3_vec\n[1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0]\n&gt;&gt;&gt; s4_vec\n[1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1]\n</code></pre>\n\n<p>Now, given the vectorial form of sentence and words, you can do use similarity functions, e.g. <a href=\"https://en.wikipedia.org/wiki/Cosine_similarity\" rel=\"nofollow noreferrer\">cosine similarity</a>:</p>\n\n<pre><code>&gt;&gt;&gt; from numpy import dot\n&gt;&gt;&gt; from numpy.linalg import norm\n&gt;&gt;&gt; \n&gt;&gt;&gt; cos_sim = lambda x, y: dot(x,y)/(norm(x)*norm(y))\n&gt;&gt;&gt; cos_sim(s1_vec, lecture)\n0.5773502691896258\n&gt;&gt;&gt; cos_sim(s1_vec, lab)\n0.0\n&gt;&gt;&gt; cos_sim(s1_vec, exam)\n0.0\n&gt;&gt;&gt; cos_sim(s1_vec, tutor)\n0.0\n</code></pre>\n\n<p>Now, doing it more systematically:</p>\n\n<pre><code>&gt;&gt;&gt; topics = {'lecture': lecture, 'lab': lab, 'exam': exam, 'tutor':tutor}\n&gt;&gt;&gt; topics\n{'lecture': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \n 'lab':     [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \n 'exam':    [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], \n 'tutor':   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]}\n\n\n&gt;&gt;&gt; sentences = {'s1':s1_vec, 's2':s2_vec, 's3':s3_vec, 's4':s4_vec}\n\n&gt;&gt;&gt; for s_num, s_vec in sentences.items():\n...     print(s_num)\n...     for name, topic_vec in topics.items():\n...         print('\\t', name, cos_sim(s_vec, topic_vec))\n... \ns1\n     lecture 0.5773502691896258\n     lab 0.0\n     exam 0.0\n     tutor 0.0\ns2\n     lecture 0.0\n     lab 0.0\n     exam 0.0\n     tutor 0.4082482904638631\ns3\n     lecture 0.30151134457776363\n     lab 0.0\n     exam 0.0\n     tutor 0.0\ns4\n     lecture 0.0\n     lab 0.30151134457776363\n     exam 0.30151134457776363\n     tutor 0.0\n</code></pre>\n\n<hr>\n\n<p>I guess you get the idea. But we see that the scores are still tied for s4-lab vs s4-exam. So the question becomes, \"Is there a way to make them diverge?\" and you will jump into the rabbit hole of:</p>\n\n<ul>\n<li><p>How best to represent the sentence/word as a fix-size vector? </p></li>\n<li><p>What similarity function to use to compare \"topic\"/word vs sentence?</p></li>\n<li><p>What is a \"topic\"? What does the vector actually represent?</p></li>\n</ul>\n\n<p>The answer above is what is usually called a one-hot vector to represent the word/sentence. There's lots more complexity than simply comparing strings to \"identify a sentences related to a topic?\" (aka document clustering/classification). E.g. Can a document/sentence have more than one topic?</p>\n\n<p>Do look up these keywords to further understand the problem \"natural language processing\", \"document classification\", \"machine learning\". Meanwhile, if you don't mind, I guess it's close for this question as <strong>\"too broad\"</strong>.</p>\n"}], "owner": {"reputation": 13, "user_id": 8470050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049bd3d314ecd7ae763cff940d259c84?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/8470050/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 52088896, "answer_count": 4, "score": 1, "last_activity_date": 1535664831, "creation_date": 1535582630, "question_id": 52087044, "link": "https://stackoverflow.com/questions/52087044/how-to-identify-a-sentences-related-to-a-topic", "title": "How to identify a sentences related to a topic?", "body": "<p>Im doing a project that require me to sort the document to match with topic.</p>\n\n<p>For example, I have 4 <strong>topics</strong> which is <strong>Lecture, Tutor, Lab</strong> and <strong>Exam</strong>.\nI have some sentences which are:</p>\n\n<ol>\n<li><strong>Lecture</strong> was engaging</li>\n<li><strong>Tutor</strong> is very nice and active</li>\n<li>The content of <strong>lecture</strong> was too much for 2 hours.</li>\n<li><strong>Exam</strong> seem to be too difficult compare with weekly <strong>lab</strong>.</li>\n</ol>\n\n<p>And now I wanna sort these sentences into topic above, result should be:</p>\n\n<ul>\n<li>Lecture: 2</li>\n<li>Tutor: 1</li>\n<li>Exam: 1</li>\n</ul>\n\n<p>I did research and the most instruction I found is using LDA topic modeling. But seem like cannot solve my problem because as I know LDA support for identifying topic in document, and dont know how to pre-choose topic manually.</p>\n\n<p>Could anyone help me please? Im stuck with that.</p>\n"}, {"tags": ["python", "pandas", "series"], "comments": [{"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1535582696, "post_id": 52087029, "comment_id": 91124339, "body": "A Series takes an iterable/sequence... of which a <code>str</code> type is one... did you perhaps mean: <code>series = pd.Series([&#39;Data was not intuitive and too difficult for our marketing team to use. Big-Data has been a huge improvement.&#39;])</code> so you then have a series of one element instead of one consisting of N many characters?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1535582747, "post_id": 52087029, "comment_id": 91124350, "body": "@JonClements What version are you on? It creates a single row Series on 0.23.4."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535582801, "post_id": 52087029, "comment_id": 91124375, "body": "Why do you want to call <code>to_string</code> when you could just do <code>s[0]</code> to print out the whole thing?"}, {"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535582816, "post_id": 52087029, "comment_id": 91124380, "body": "@coldspeed oh yeah... and you thought you were getting tired :) Guess it&#39;s the old display formatting stuff... <code>s[0]</code> will do it..."}, {"owner": {"reputation": 908, "user_id": 8601590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BPgDo.png?s=128&g=1", "display_name": "msr_003", "link": "https://stackoverflow.com/users/8601590/msr-003"}, "edited": false, "score": 0, "creation_date": 1535611379, "post_id": 52087029, "comment_id": 91131138, "body": "@ni3 Do <code>s = s[0]</code>. Your Series will store as str."}, {"owner": {"reputation": 43, "user_id": 7682095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-roweYSJZrbo/AAAAAAAAAAI/AAAAAAAADmc/QflKHEl-M70/photo.jpg?sz=128", "display_name": "ni3", "link": "https://stackoverflow.com/users/7682095/ni3"}, "reply_to_user": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1535639930, "post_id": 52087029, "comment_id": 91149975, "body": "@JonClements Thank you All! It solved my issue."}], "owner": {"reputation": 43, "user_id": 7682095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-roweYSJZrbo/AAAAAAAAAAI/AAAAAAAADmc/QflKHEl-M70/photo.jpg?sz=128", "display_name": "ni3", "link": "https://stackoverflow.com/users/7682095/ni3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535582883, "creation_date": 1535582484, "last_edit_date": 1535582883, "question_id": 52087029, "link": "https://stackoverflow.com/questions/52087029/how-can-i-convert-pandas-string-column-into-string-series-without-text-getting-t", "title": "How can I convert pandas string column into string series without text getting trimmed?", "body": "<p>How can I convert pandas string column into string series without text getting trimmed?</p>\n\n<pre><code>   s = pd.Series('Data was not intuitive and too difficult for our marketing team to use. Big-Data has been a huge improvement.')\n</code></pre>\n\n<p>When convert Series into string. It gets trimmed. </p>\n\n<pre><code>d = s.to_string(index=False)\nd = 'Sprinklr was not intuitive and too difficult f...'\n</code></pre>\n\n<p>I want to use this series to count words in it. But getting trimmed is coming in my way.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8640566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b0aedc8819539e99ce7b11a3565b17?s=128&d=identicon&r=PG&f=1", "display_name": "user469216", "link": "https://stackoverflow.com/users/8640566/user469216"}, "edited": false, "score": 0, "creation_date": 1535982112, "post_id": 52089966, "comment_id": 91251918, "body": "hmm - for some reason it does not work. The problem is that the /option[text()=&#39;1 A&#39;]&quot; seems to be wrong syntax"}, {"owner": {"reputation": 3571, "user_id": 9405154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2b7yZ.jpg?s=128&g=1", "display_name": "Ishita Shah", "link": "https://stackoverflow.com/users/9405154/ishita-shah"}, "reply_to_user": {"reputation": 61, "user_id": 8640566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b0aedc8819539e99ce7b11a3565b17?s=128&d=identicon&r=PG&f=1", "display_name": "user469216", "link": "https://stackoverflow.com/users/8640566/user469216"}, "edited": false, "score": 0, "creation_date": 1536036345, "post_id": 52089966, "comment_id": 91267704, "body": "Its not syntax issue, You need to share exception details for what it did not work."}, {"owner": {"reputation": 61, "user_id": 8640566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b0aedc8819539e99ce7b11a3565b17?s=128&d=identicon&r=PG&f=1", "display_name": "user469216", "link": "https://stackoverflow.com/users/8640566/user469216"}, "edited": false, "score": 1, "creation_date": 1536070522, "post_id": 52089966, "comment_id": 91286693, "body": "you are correct, I made it work :-) mistake was on my end"}], "tags": [], "owner": {"reputation": 3571, "user_id": 9405154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2b7yZ.jpg?s=128&g=1", "display_name": "Ishita Shah", "link": "https://stackoverflow.com/users/9405154/ishita-shah"}, "is_accepted": true, "score": 2, "last_activity_date": 1535608124, "creation_date": 1535608124, "answer_id": 52089966, "question_id": 52087021, "link": "https://stackoverflow.com/questions/52087021/selecting-multiple-options-from-drop-down-menu-using-selenium-in-python/52089966#52089966", "title": "Selecting multiple options from drop down menu using selenium in python", "body": "<p>As on Manual operation, if we have to select Multiple values from Multi options Drop down then We have to Select it by using Control click. </p>\n\n<p>Similarly, You have to Automate it by using Control click for Multiple Values. </p>\n\n<p><strong>Example with reference to your case:</strong></p>\n\n<pre><code>from selenium.webdriver.common.action_chains import ActionChains\nfrom selenium.webdriver.common.keys import Keys\n\nelement1 = driver.find_element_by_xpath(\"//select[@name='Area']/option[text()='1 A']\")\nelement2 = driver.find_element_by_xpath(\"//select[@name='Area']/option[text()='2 B']\")\n\nActionChains(driver).key_down(Keys.CONTROL).click(element1).key_up(Keys.CONTROL).perform()\nActionChains(driver).key_down(Keys.CONTROL).click(element2).key_up(Keys.CONTROL).perform()\n</code></pre>\n\n<p>All you have to do is, control Key binding to select multiple values. Please Note: You can handle control click by multiple ways. Ref Post: <a href=\"https://stackoverflow.com/questions/27775759/send-keys-control-click-in-selenium-with-python-bindings\">Click Here</a></p>\n"}], "owner": {"reputation": 61, "user_id": 8640566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b0aedc8819539e99ce7b11a3565b17?s=128&d=identicon&r=PG&f=1", "display_name": "user469216", "link": "https://stackoverflow.com/users/8640566/user469216"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1898, "favorite_count": 0, "accepted_answer_id": 52089966, "answer_count": 1, "score": 0, "last_activity_date": 1535614166, "creation_date": 1535582463, "last_edit_date": 1535614166, "question_id": 52087021, "link": "https://stackoverflow.com/questions/52087021/selecting-multiple-options-from-drop-down-menu-using-selenium-in-python", "title": "Selecting multiple options from drop down menu using selenium in python", "body": "<p>Tried searching but did not find any working solutions for this. I have a drop down menu as follows where I'd like to select multiple options at once:</p>\n\n<pre><code>&lt;select name=\"Area\" multiple=\"\" size=\"5\" class=\"sel0\"\nonchange=\"opbygQvar('Area',dummyArray,false,true,false)\"&gt;\n&lt;option value=\"\"&gt;(blankstil)\n&lt;/option&gt;&lt;option value=\"1\"&gt;1 A\n&lt;/option&gt;&lt;option value=\"2\"&gt;2 B\n&lt;/option&gt;&lt;option value=\"3\"&gt;3 C\n&lt;/option&gt;&lt;option value=\"4\"&gt;4 D\n&lt;/option&gt;&lt;option value=\"5\"&gt;5 E\n&lt;/option&gt;&lt;option value=\"6\"&gt;6 F\n&lt;/option&gt;&lt;/select&gt;\n</code></pre>\n\n<p><strong>Trial Code:</strong> </p>\n\n<pre><code>driver.find_element_by_xpath(\"//select[@name='Area']/option[text()='1 A']\").click()\ndriver.find_element_by_xpath(\"//select[@name='Area']/option[text()='2 B']\").click()\n</code></pre>\n\n<p>only selects one option and then changes selection to a different one instead of keeping multiple options checked.</p>\n\n<p>Any help is highly appreciated - thanks in advance :)</p>\n"}, {"tags": ["python", "logging", "command-line-interface", "pytest"], "comments": [{"owner": {"reputation": 1121, "user_id": 3562777, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d04jC.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/3562777/liz"}, "edited": false, "score": 0, "creation_date": 1542240921, "post_id": 52086974, "comment_id": 93502142, "body": "Did you ever find a solution/configuration here? Same issue :("}, {"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "reply_to_user": {"reputation": 1121, "user_id": 3562777, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/d04jC.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/3562777/liz"}, "edited": false, "score": 1, "creation_date": 1542313277, "post_id": 52086974, "comment_id": 93535066, "body": "@Liz Unfortunately not - however as I allude to in my last paragraph, in a previous project I did add my own custom command-line option that selectively turned on debugging for specific components."}, {"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "reply_to_user": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1569454874, "post_id": 52086974, "comment_id": 102605996, "body": "@Dan D. The alleged &quot;duplicate&quot; is in fact a different question from what I asked. The answer to the linked question does not answer my question."}], "answers": [{"comments": [{"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "edited": false, "score": 1, "creation_date": 1569454973, "post_id": 58105764, "comment_id": 102606014, "body": "Thanks, that is useful, although that&#39;s more of a workaround for the issue I described since it doesn&#39;t address the per-module enable/disable feature, which is a useful feature in-and-of itself, I think."}], "tags": [], "owner": {"reputation": 12739, "user_id": 304209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac832b45e72b203d51e2d501c0e52e4f?s=128&d=identicon&r=PG", "display_name": "Dennis Golomazov", "link": "https://stackoverflow.com/users/304209/dennis-golomazov"}, "is_accepted": false, "score": 1, "last_activity_date": 1569441530, "creation_date": 1569441530, "answer_id": 58105764, "question_id": 52086974, "link": "https://stackoverflow.com/questions/52086974/pytest-selective-log-levels-on-a-per-module-basis/58105764#58105764", "title": "pytest: selective log levels on a per-module basis", "body": "<p>I had the same problem, and found a solution in another <a href=\"https://stackoverflow.com/a/54638114/304209\">answer</a>:</p>\n\n<p>Instead of <code>--log-cli-level=DEBUG</code>, use <code>--log-level DEBUG</code>. It disables all third-party module logs (in my case, I had plenty of matplotlib logs), but still outputs your app logs for each test that fails.</p>\n"}], "owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 2, "answer_count": 1, "score": 9, "last_activity_date": 1569801453, "creation_date": 1535582042, "last_edit_date": 1569801453, "question_id": 52086974, "link": "https://stackoverflow.com/questions/52086974/pytest-selective-log-levels-on-a-per-module-basis", "title": "pytest: selective log levels on a per-module basis", "body": "<p>I'm using pytest-3.7.1 which has good support for logging, including live logging to stdout during tests. I'm using <code>--log-cli-level=DEBUG</code> to dump all debug-level logging to the console as it happens.</p>\n\n<p>The problem I have is that <code>--log-cli-level=DEBUG</code> turns on debug logging for <em>all</em> modules in my test program, including third-party dependencies, and it floods the log with a lot of uninteresting output.</p>\n\n<p>Python's logging module has the ability to set logging levels per module. This enables selective logging - for example, in a normal Python program I can turn on debugging for just one or two of my own modules, and restrict the log output to just those, or set different log levels for each module. This enables turning off debug-level logging for noisy libraries.</p>\n\n<p><strong>So what I'd like to do is apply the same concept to pytest's logging - i.e. specify a logging level, from the command line, for specific non-root loggers</strong>. For example, if I have a module called <code>test_foo.py</code> then I'm looking for a way to set the log level for this module <em>from the command line</em>.</p>\n\n<p>I'm prepared to roll-my-own if necessary (I know how to add custom arguments to pytest), but before I do that I just want to be sure that there isn't already a solution. Is anyone aware of one?</p>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1535582304, "post_id": 52086973, "comment_id": 91124238, "body": "If <code>Data_X</code> is a 2D array, then <code>for numeric_string in data_X</code> gives you a 1D array, with at least 7 elements. You can&#39;t call <code>int</code> on that, for exactly the reason the error message says. Just naming the variable <code>numeric_string</code> doesn&#39;t change it into a string. And it&#39;s not clear what string you were expecting to get there."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535582403, "post_id": 52086973, "comment_id": 91124268, "body": "Are you looking to get the <i>first</i> string in each row and turn that into an int? Or are you looking to build a list of lists that converts <i>every</i> string in every row? Or to flatten the array and build a list that converts every string in the flattened array? Or\u2026? If you can <a href=\"https://stackoverflow.com/posts/52086973/edit\">edit</a> your answer to show the expected output that goes with that input, it would help."}, {"owner": {"reputation": 1, "user_id": 10290510, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cxwfwAc7F0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNgdkianZ8DlRHv8pN6xKOLoZ2BFA/mo/photo.jpg?sz=128", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10290510/julio-cesar"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535583071, "post_id": 52086973, "comment_id": 91124457, "body": "edited! I wanted only change the array from [ [&#39;2&#39; &#39;3&#39;] [&#39;4&#39; &#39;5&#39;]] to [ [2 3] [4 5]]"}, {"owner": {"reputation": 833, "user_id": 5432304, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206686944764888/picture?type=large", "display_name": "Peybae", "link": "https://stackoverflow.com/users/5432304/peybae"}, "edited": false, "score": 0, "creation_date": 1535583204, "post_id": 52086973, "comment_id": 91124505, "body": "@JulioCesar <code>[&#39;2&#39; &#39;3&#39;]</code> is compiled as <code>[&#39;23&#39;]</code> and you&#39;ll lose the space separated structure! You have to choose a different way/data structure to represent your data!"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1535583220, "post_id": 52086973, "comment_id": 91124510, "body": "I get the feeling all the code you&#39;ve posted should just be replaced with <code>data_X.astype(int)</code> (or really, it&#39;s likely that it should actually be fixed further up)."}, {"owner": {"reputation": 1, "user_id": 10290510, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cxwfwAc7F0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNgdkianZ8DlRHv8pN6xKOLoZ2BFA/mo/photo.jpg?sz=128", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10290510/julio-cesar"}, "reply_to_user": {"reputation": 833, "user_id": 5432304, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206686944764888/picture?type=large", "display_name": "Peybae", "link": "https://stackoverflow.com/users/5432304/peybae"}, "edited": false, "score": 0, "creation_date": 1535583863, "post_id": 52086973, "comment_id": 91124646, "body": "@Peyman the Matrix is printed so [&#39;2&#39; &#39;3&#39;] but what I want is [2 3]"}, {"owner": {"reputation": 1, "user_id": 10290510, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cxwfwAc7F0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNgdkianZ8DlRHv8pN6xKOLoZ2BFA/mo/photo.jpg?sz=128", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10290510/julio-cesar"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1535583868, "post_id": 52086973, "comment_id": 91124648, "body": "@user2357112 I did these, and I have this error &quot; Python int too large to convert to C long&quot;"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1535583989, "post_id": 52086973, "comment_id": 91124678, "body": "<code>data_X.astype(&#39;int64&#39;)</code>, then, if you&#39;re on Windows or 32-bit Python, or if that doesn&#39;t work, your integers are way too huge and you&#39;re going to have a really hard time working with them at all in NumPy."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 833, "user_id": 5432304, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206686944764888/picture?type=large", "display_name": "Peybae", "link": "https://stackoverflow.com/users/5432304/peybae"}, "edited": false, "score": 1, "creation_date": 1535584530, "post_id": 52086973, "comment_id": 91124817, "body": "@Peyman Most likely that&#39;s the output of printing numpy array. Unlike lists, numpy arrays have a str that&#39;s different from their repr, including leaving out the commas."}, {"owner": {"reputation": 1, "user_id": 10290510, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cxwfwAc7F0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNgdkianZ8DlRHv8pN6xKOLoZ2BFA/mo/photo.jpg?sz=128", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10290510/julio-cesar"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1535584617, "post_id": 52086973, "comment_id": 91124839, "body": "@user2357112 thats work, but I don&#39;t know is why I have now these Problem: &quot;&#39;&gt;&#39; not supported between instances of &#39;numpy.ndarray&#39; and &#39;float&#39;&quot; when I do:  desired_array = data_X.astype(&#39;int64&#39;) data_new=np.delete(desired_array,14,1)  what I have no is this array: [                  30 -6725209669690155188               154950 ...                     60  4017763880221344027  -136014339944321305]"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535585084, "post_id": 52086973, "comment_id": 91124947, "body": "@JulioCesar That problem comes from some other line of code that isn&#39;t even included in your question, and it&#39;s almost certainly not related to this one. Create a new question, and include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates that problem."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10290510, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cxwfwAc7F0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNgdkianZ8DlRHv8pN6xKOLoZ2BFA/mo/photo.jpg?sz=128", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10290510/julio-cesar"}, "edited": false, "score": 0, "creation_date": 1535585280, "post_id": 52087316, "comment_id": 91125005, "body": "thanks the problem is solved but I have now these Problem <code>&quot;&#39;&gt;&#39; not supported between instances of &#39;numpy.ndarray&#39; and &#39;float&#39;&quot; </code>  when I do:   <code>desired_array = data_X.astype(&#39;int64&#39;) data_new=np.delete(desired_array,14,1)</code>  what I have no is this array: ` [         30 -6725209669690155188       154950 ... 60 4017763880221344027 -136014339944321305] `"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 1, "last_activity_date": 1535584962, "creation_date": 1535584962, "answer_id": 52087316, "question_id": 52086973, "link": "https://stackoverflow.com/questions/52086973/error-only-size-1-arrays-can-be-converted-to-python-scalars/52087316#52087316", "title": "Error only size-1 arrays can be converted to Python scalars", "body": "<p>You're trying to use a list comprehension to create a new list, like this:</p>\n\n<pre><code> desired_array = [int(numeric_string) for numeric_string in data_X]\n</code></pre>\n\n<p>Since <code>data_X</code> is a 2D array, each <code>numeric_string</code> is a 1D array, as long as however many columns you have (at least 7). (The fact that you called it <code>numeric_string</code> doesn't make it a string.) You can't call <code>int</code> on that, for exactly the reason that the error message shows.</p>\n\n<p>If this isn't clear, you should try printing out the values:</p>\n\n<pre><code>for numeric_string in data_X:\n    print(numeric_string)\n</code></pre>\n\n<p>\u2026 and it should be pretty clear that <code>numeric_string</code> is not a numeric string.</p>\n\n<hr>\n\n<p>You <em>could</em> fix this with a nested loop. If you don't understand comprehensions that well, write it with explicit loop statements first:</p>\n\n<pre><code>desired_array = []\nfor row in data_X:\n    desired_row = []\n    for col in row:\n        desired_row.append(int(col))\n    desired_array.append(desired_row)\n</code></pre>\n\n<p>\u2026 and then you can turn it into a comprehension once you're sure you understand it:</p>\n\n<pre><code>desired_array = [int(numeric_string) for numeric_string in row] for row in data_X]\n</code></pre>\n\n<hr>\n\n<p>However, that still doesn't give you a 2D array of ints, it gives you a list of list of ints. It's <em>similar</em>, but it's bigger and slower, and you can't call numpy methods on it. (Althouuh you can still pass it to global numpy functions, at least.)</p>\n\n<p>If you wanted to create a 2D array by looping, you could do that.</p>\n\n<p>But as always with numpy, what you want to do, if at all possible, is used vectorized operations instead of loops. It'll be both a lot simpler and a lot faster, with no real downside.</p>\n\n<p>What you probably want is <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.astype.html\" rel=\"nofollow noreferrer\"><code>astype</code></a>:</p>\n\n<pre><code>desired_array = data_X.astype(np.int64)\n</code></pre>\n\n<p>It's hard to get any simpler than that. And, unless you wanted an array of <code>dtype=object</code> holding Python <code>int</code> values (e.g., because some of your numbers are too big to fit in a native int64), it's exactly what you want.</p>\n"}], "owner": {"reputation": 1, "user_id": 10290510, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5cxwfwAc7F0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNgdkianZ8DlRHv8pN6xKOLoZ2BFA/mo/photo.jpg?sz=128", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10290510/julio-cesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11167, "favorite_count": 1, "accepted_answer_id": 52087316, "answer_count": 1, "score": -2, "last_activity_date": 1535584962, "creation_date": 1535582035, "last_edit_date": 1535582942, "question_id": 52086973, "link": "https://stackoverflow.com/questions/52086973/error-only-size-1-arrays-can-be-converted-to-python-scalars", "title": "Error only size-1 arrays can be converted to Python scalars", "body": "<p>I have this code:</p>\n\n<pre><code>for a in data_X:\n    for i in a:\n        if not i.isdigit():\n            x=hash(i)\n            data_X[column,row]=x\n        row=row+1\n    row=0\n    column=column+1\n\n\ndesired_array = [int(numeric_string) for numeric_string in data_X]\n</code></pre>\n\n<p>and I the Data_X are these (only a part of the Array):</p>\n\n<pre><code>[['42' '-6725209669690155188' '159449' ... '40' '4017763880221344027'\n  '-136014339944321305']\n ...\n ['30' '-6725209669690155188' '154950' ... '60' '4017763880221344027'\n  '-136014339944321305']]\n</code></pre>\n\n<p>and I wanted to transform the numbers from char ( e.g '42') to int (42) and I thougt I could doing this: <code>desired_array = [int(numeric_string) for numeric_string in data_X]</code>\nbut I received the error \"Error only size-1 arrays can be converted to Python scalars\" and I don't know what can I do..</p>\n\n<p>these is what I want to have: from :</p>\n\n<pre><code>[['42' '-6725209669690155188' '159449' ... '40' '4017763880221344027'\n  '-136014339944321305']\n ...\n ['30' '-6725209669690155188' '154950' ... '60' '4017763880221344027'\n  '-136014339944321305']]\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>[[42 -6725209669690155188 159449 ... 40 4017763880221344027\n  -136014339944321305]\n ...\n [30 -6725209669690155188 154950 ... 60 4017763880221344027\n  -136014339944321305]]\n</code></pre>\n\n<p>Can somebody tell me where is the Problem?</p>\n\n<p>thanks!</p>\n"}, {"tags": ["python", "discord.py"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1535582558, "post_id": 52086906, "comment_id": 91124300, "body": "If you Google the phrase &quot;Python input user&quot;, you\u2019ll find tutorials that can explain it much better than we can in an answer here."}, {"owner": {"reputation": 960, "user_id": 10249627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1a4b67de46f450379009dc722681e?s=128&d=identicon&r=PG&f=1", "display_name": "crodev", "link": "https://stackoverflow.com/users/10249627/crodev"}, "reply_to_user": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "edited": false, "score": 0, "creation_date": 1535582923, "post_id": 52086906, "comment_id": 91124407, "body": "@Joe Iddon explained it great already but thanks!"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1535583998, "post_id": 52086906, "comment_id": 91124681, "body": "You tagged this <a href=\"https://stackoverflow.com/questions/tagged/discord.py\">discord.py</a>, are you looking for a way to get these values from a discord command?"}, {"owner": {"reputation": 960, "user_id": 10249627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1a4b67de46f450379009dc722681e?s=128&d=identicon&r=PG&f=1", "display_name": "crodev", "link": "https://stackoverflow.com/users/10249627/crodev"}, "edited": false, "score": 0, "creation_date": 1535584174, "post_id": 52086906, "comment_id": 91124726, "body": "Yes, but I managed to get them."}], "answers": [{"tags": [], "owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "is_accepted": true, "score": 1, "last_activity_date": 1535581996, "last_edit_date": 1535581996, "creation_date": 1535581842, "answer_id": 52086949, "question_id": 52086906, "link": "https://stackoverflow.com/questions/52086906/how-to-read-user-command-input-and-store-parts-in-variables/52086949#52086949", "title": "How to read user command input and store parts in variables", "body": "<p>Split the input on spaces and extract the second and third elements:</p>\n\n<pre><code>parts = input().split()\nuser = parts[1]\nnumb = parts[2]\n</code></pre>\n\n<p>Although it would be more Pythonic to unpack into variables (discarding the first with a conventional underscore):</p>\n\n<pre><code>_, user, numb = input().split()\n</code></pre>\n\n<hr>\n\n<p>Just to elaborate further, <code>input.split()</code> returns a list of the sublists split at the deliminator passed into the function. However, when there are no inputs, the string is split on spaces.</p>\n\n<p>To get a feel, observe:</p>\n\n<pre><code>&gt;&gt;&gt; 'hello there bob'.split()\n['hello', 'there', 'bob']\n&gt;&gt;&gt; 'split,on,commas'.split(',')\n['split', 'on', 'commas']\n</code></pre>\n\n<p>and then unpacking just assigns variables to each element in a list:</p>\n\n<pre><code>&gt;&gt;&gt; a, b, c = [1, 2, 3]\n&gt;&gt;&gt; a\n1\n&gt;&gt;&gt; b\n2\n&gt;&gt;&gt; c\n3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "edited": false, "score": 0, "creation_date": 1535582091, "post_id": 52086977, "comment_id": 91124171, "body": "why index backwards? :p guess it still works though so +1"}], "tags": [], "owner": {"reputation": 193, "user_id": 8939718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3znQ0.jpg?s=128&g=1", "display_name": "Ori Arbes", "link": "https://stackoverflow.com/users/8939718/ori-arbes"}, "is_accepted": false, "score": 2, "last_activity_date": 1535582054, "creation_date": 1535582054, "answer_id": 52086977, "question_id": 52086906, "link": "https://stackoverflow.com/questions/52086906/how-to-read-user-command-input-and-store-parts-in-variables/52086977#52086977", "title": "How to read user command input and store parts in variables", "body": "<pre><code>list_of_sub_string=YourString.split()\nprint(list_of_sub_string[-1])  #33000\nprint(list_of_sub_string[-2])  #user#5435\n</code></pre>\n"}], "owner": {"reputation": 960, "user_id": 10249627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1a4b67de46f450379009dc722681e?s=128&d=identicon&r=PG&f=1", "display_name": "crodev", "link": "https://stackoverflow.com/users/10249627/crodev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52086949, "answer_count": 2, "score": 0, "last_activity_date": 1535582062, "creation_date": 1535581534, "last_edit_date": 1535582062, "question_id": 52086906, "link": "https://stackoverflow.com/questions/52086906/how-to-read-user-command-input-and-store-parts-in-variables", "title": "How to read user command input and store parts in variables", "body": "<p>So let's say that user types <code>!give_money user#5435 33000</code></p>\n\n<p>Now I want to take that <code>user#5435</code> and <code>33000</code> and store them in variables.  </p>\n\n<p>How do I do that? Maybe it is very simple but I don't know.  </p>\n\n<p>If you need any more info please comment.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "class"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 9546238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8e51571c6f5efa66fd31b9f62b0c86?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/9546238/jonathan"}, "edited": false, "score": 0, "creation_date": 1535581921, "post_id": 52086934, "comment_id": 91124128, "body": "I put those in for the purpose of my attack method."}, {"owner": {"reputation": 197, "user_id": 9546238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8e51571c6f5efa66fd31b9f62b0c86?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/9546238/jonathan"}, "edited": false, "score": 0, "creation_date": 1535583994, "post_id": 52086934, "comment_id": 91124679, "body": "I don&#39;t think this works actually. From what I&#39;ve read and the errors I&#39;m encountering, you can&#39;t make an assignment statement with lambda. Also, I think that syntax might be wrong."}, {"owner": {"reputation": 197, "user_id": 9546238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8e51571c6f5efa66fd31b9f62b0c86?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/9546238/jonathan"}, "edited": false, "score": 0, "creation_date": 1535584106, "post_id": 52086934, "comment_id": 91124705, "body": "see here: <a href=\"https://stackoverflow.com/questions/50090868/why-are-assignments-not-allowed-in-pythons-lambda-expressions\" title=\"why are assignments not allowed in pythons lambda expressions\">stackoverflow.com/questions/50090868/&hellip;</a>"}, {"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "reply_to_user": {"reputation": 197, "user_id": 9546238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8e51571c6f5efa66fd31b9f62b0c86?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/9546238/jonathan"}, "edited": false, "score": 0, "creation_date": 1535623828, "post_id": 52086934, "comment_id": 91138842, "body": "Hmm I believe you&#39;re entirely correct. Didn&#39;t know about that. But I think your <code>dict_hand</code> method should work with <code>getattr</code> instead"}], "tags": [], "owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1535582034, "last_edit_date": 1535582034, "creation_date": 1535581762, "answer_id": 52086934, "question_id": 52086900, "link": "https://stackoverflow.com/questions/52086900/changing-attributes-from-a-method-call/52086934#52086934", "title": "Changing attributes from a method call", "body": "<p>your code seems to have some unnecessary methods. You can get rid of the methods that set the variables with a number:</p>\n\n<pre><code>def set_x_left(self, num):\n    self.x_left = num\n</code></pre>\n\n<p>When you create an instance of game you can use dot notation to set the values:</p>\n\n<pre><code>chopsticks = game()\n#   ^^^ that's the instance\n\nchopsticks.set_x_left(0)\n# is the same as \nchopsticks.x_left = 0\n</code></pre>\n\n<p>As you can see it's quicker to type, doesn't require any methods. It's just attribute assignments.  Doing this will affect you <code>dict_func</code> method, so you can create an anonymous function instead:</p>\n\n<pre><code>def dict_func(self, hand):        \n    self.func = {'x_left': lambda self, x: self.x_left = x,\n                 'x_right': lambda self, x: self.x_right = x,\n                 'o_left': lambda self, x: self.o_left = x,\n                 'o_right': lambda self, x: self.o_right = x}\n\n    return self.func[hand]\n</code></pre>\n\n<p>In fact you can declare the <code>self.func</code> <code>self.hands</code> attributes in <code>__init__</code> to make sure that they're only assigned to once. Then in the function you can just write <code>return self.func[hand]</code></p>\n\n<p>Your <code>dict_hand</code> method is also slightly over complicated. Your aim is to get the attribute from the instance dict, so you can do:</p>\n\n<pre><code>def dict_hand(self, hand):\n    return getatttr(self, hand)\n</code></pre>\n\n<p>(You may want to rename this function :))</p>\n"}], "owner": {"reputation": 197, "user_id": 9546238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8e51571c6f5efa66fd31b9f62b0c86?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/9546238/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535586452, "creation_date": 1535581463, "last_edit_date": 1535586452, "question_id": 52086900, "link": "https://stackoverflow.com/questions/52086900/changing-attributes-from-a-method-call", "title": "Changing attributes from a method call", "body": "<p>I'm trying to make a chopsticks game. Here's a wikipedia link to the game <a href=\"https://en.wikipedia.org/wiki/Chopsticks_(hand_game)\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Chopsticks_(hand_game)</a>. So far I just added a couple methods so that one hand can attack another hand using the 'attack' method. I feel like the code I wrote is very verbose, ugly and maybe even wrong though. How can I write this more elegantly?</p>\n\n<pre><code>class game:\n    def __init__(self):\n        self.x_left = 1\n        self.x_right = 1\n        self.o_left = 1\n        self.o_right = 1  \n\n    def set_x_left(self, num):\n        self.x_left = num\n\n    def set_x_right(self, num):\n        self.x_right = num\n\n    def set_o_left(self, num):\n        self.o_left = num\n\n    def set_o_right(self, num):\n        self.o_right = num    \n\n    def dict_func(self, hand):        \n        self.func= {'x_left': self.set_x_left, 'x_right': self.set_x_right,\n             'o_left': self.set_o_left, 'o_right': self.set_o_right}\n\n        return self.func[hand]\n\n    def dict_hand(self, hand):\n        self.hands = {'x_left': self.x_left, 'x_right': self.x_right,\n             'o_left': self.o_left, 'o_right': self.o_right}     \n\n        return self.hands[hand]\n\n    def attack(self, from_hand, to_hand):\n        self.dict_func(to_hand)(self.dict_hand(from_hand) + self.dict_hand(to_hand))\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8810963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MAjHYUjq2jU/AAAAAAAAAAI/AAAAAAAAADY/TTLx8twXlm4/photo.jpg?sz=128", "display_name": "Arnechos", "link": "https://stackoverflow.com/users/8810963/arnechos"}, "edited": false, "score": 0, "creation_date": 1535622450, "post_id": 52086890, "comment_id": 91137893, "body": "Hm, strage because I get the type error where value parameter must be a scala, dict or Series, but you passed a ndarray"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 4, "last_activity_date": 1535581406, "creation_date": 1535581406, "answer_id": 52086890, "question_id": 52086863, "link": "https://stackoverflow.com/questions/52086863/filling-nan-with-data-based-on-condition/52086890#52086890", "title": "Filling NaN with data based on condition", "body": "<p>This is an elementwise operation, and you can vectorize this. Build an array with <code>np.where</code> and pass that to <code>fillna</code>.</p>\n\n<pre><code>df['VAL'] = df['VAL'].fillna(np.where(df['FLAG'], median, 0))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1535590304, "creation_date": 1535590304, "answer_id": 52087858, "question_id": 52086863, "link": "https://stackoverflow.com/questions/52086863/filling-nan-with-data-based-on-condition/52087858#52087858", "title": "Filling NaN with data based on condition", "body": "<p>You may can do this </p>\n\n<pre><code> df.loc[df['VAL'].isna(),'Val']=df['FLAG']*median\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8810963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MAjHYUjq2jU/AAAAAAAAAAI/AAAAAAAAADY/TTLx8twXlm4/photo.jpg?sz=128", "display_name": "Arnechos", "link": "https://stackoverflow.com/users/8810963/arnechos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1535655670, "creation_date": 1535581271, "last_edit_date": 1535655670, "question_id": 52086863, "link": "https://stackoverflow.com/questions/52086863/filling-nan-with-data-based-on-condition", "title": "Filling NaN with data based on condition", "body": "<p>My code looks like that:</p>\n\n<pre><code>if df['FLAG'] == 1:\n    df['VAL'] = df['VAL'].fillna(median)\nelif df['FLAG'] == 0:\n    df['VAL'] = df['VAL'].fillna(0)\n</code></pre>\n\n<p>Which returns - The truth value of a DataFrame is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().</p>\n\n<p>I have tried with doing like a mask and then applying it with a.all() but it didn't worked out. I'd be very thankful for enlightment!</p>\n\n<p>Edit: I've solution for my problem right here - <a href=\"https://stackoverflow.com/questions/39242615/pandas-fillna-based-on-specific-column-attribute\" title=\"Link\">Link</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1535581402, "post_id": 52086852, "comment_id": 91123993, "body": "This website is not meant for people to write code for you, but rather to help you work your way through code you have already written. See this link for guidelines in posting: <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1535581522, "post_id": 52086852, "comment_id": 91124020, "body": "These popup boxes are generally called &quot;tooltips&quot;."}, {"owner": {"reputation": 1, "user_id": 10089419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3571b39a31f3f0c2663bba03d657689?s=128&d=identicon&r=PG&f=1", "display_name": "D Asiagi", "link": "https://stackoverflow.com/users/10089419/d-asiagi"}, "edited": false, "score": 0, "creation_date": 1535583828, "post_id": 52086852, "comment_id": 91124641, "body": "Im not asking for anyone to write code for me, Im asking if anyone knows of a library or something that interfaces with these boxes"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10089419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3571b39a31f3f0c2663bba03d657689?s=128&d=identicon&r=PG&f=1", "display_name": "D Asiagi", "link": "https://stackoverflow.com/users/10089419/d-asiagi"}, "edited": false, "score": 0, "creation_date": 1535583923, "post_id": 52086909, "comment_id": 91124659, "body": "Thank you for the advice. Im not trying to do this with an HTML page, but knowing what they are called will help."}], "tags": [], "owner": {"reputation": 68, "user_id": 4424949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O6SeMqCKGoY/AAAAAAAAAAI/AAAAAAAAAGo/hhH1kVHNpOo/photo.jpg?sz=128", "display_name": "Dave Faliskie", "link": "https://stackoverflow.com/users/4424949/dave-faliskie"}, "is_accepted": false, "score": 0, "last_activity_date": 1535581544, "creation_date": 1535581544, "answer_id": 52086909, "question_id": 52086852, "link": "https://stackoverflow.com/questions/52086852/how-to-get-info-box-text-with-python/52086909#52086909", "title": "How to get info box text with Python", "body": "<p>You are referring to tooltips. It's possible to use python with BeautifulSoup to scrape these off the web. </p>\n"}, {"comments": [{"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1547821217, "post_id": 54225071, "comment_id": 95335563, "body": "This is old docs for old pywinauto 0.5.4. Latest one is 0.6.5. Also direct usage of wrapper class is not recommended. See <a href=\"https://pywinauto.readthedocs.io/en/latest/getting_started.html\" rel=\"nofollow noreferrer\">Getting Started Guide</a>."}], "tags": [], "owner": {"reputation": 11, "user_id": 10815265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea1028e7b7d2242b2f18886328acd27?s=128&d=identicon&r=PG&f=1", "display_name": "Prachi", "link": "https://stackoverflow.com/users/10815265/prachi"}, "is_accepted": false, "score": 0, "last_activity_date": 1547671410, "creation_date": 1547671410, "answer_id": 54225071, "question_id": 52086852, "link": "https://stackoverflow.com/questions/52086852/how-to-get-info-box-text-with-python/54225071#54225071", "title": "How to get info box text with Python", "body": "<p>I am looking to get tooltip text from an icon displaying in the system tray. There are functions in class pywinauto.controls.common_controls.ToolTipsWrapper(hwnd) in pywinauto module of python. For example GetTipText(tip_index)Return the text of the tooltip. You can try if these functions provide any help to you. But I was getting error like 'no windows found' when using control of the icon by classname as window handle. For e.g </p>\n\n<pre><code>    app = Application(backend=\"uia\").connect(path=\"explorer\")\n    sys_tray = app.window(class_name=\"Shell_TrayWnd\")\n    hnd = sys_tray.childWindow(class_name= \"ToolbarWindow32\")``\n    texts= pywinauto.controls.common_controls.ToolTipsWrapper(hnd).texts()\n    print(texts)\n</code></pre>\n\n<p>Documentation of pywinauto: <a href=\"https://media.readthedocs.org/pdf/pywinauto-docs/docs-rework/pywinauto-docs.pdf\" rel=\"nofollow noreferrer\">https://media.readthedocs.org/pdf/pywinauto-docs/docs-rework/pywinauto-docs.pdf</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10089419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3571b39a31f3f0c2663bba03d657689?s=128&d=identicon&r=PG&f=1", "display_name": "D Asiagi", "link": "https://stackoverflow.com/users/10089419/d-asiagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1547671410, "creation_date": 1535581218, "question_id": 52086852, "link": "https://stackoverflow.com/questions/52086852/how-to-get-info-box-text-with-python", "title": "How to get info box text with Python", "body": "<p>Im sorry if this question sounds a bit vague, but I dont know the term for what I am looking for.</p>\n\n<p>If you place your mouse cursor over an item in Windows and leave it there for a second, a box pops up with some text. For example, if you have your cursor on the 'e' icon,  a box will show up with the text \"Microsoft Edge\".</p>\n\n<p>Is there a method, using Python, to read what that text is? So for the example given, I would like to write or call a function that returns a string containing \"Microsoft Edge\".</p>\n\n<p>Thank you for any help you can offer.</p>\n"}, {"tags": ["javascript", "python", "jquery", "django", "pdf-generation"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1535598078, "post_id": 52086726, "comment_id": 91127486, "body": "preventDefault()"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5647915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb72ff3473a329e4378a1de9b0f406da?s=128&d=identicon&r=PG&f=1", "display_name": "clickie", "link": "https://stackoverflow.com/users/5647915/clickie"}, "edited": false, "score": 0, "creation_date": 1535642899, "post_id": 52090220, "comment_id": 91151957, "body": "May God Bless You ! Thank you !"}], "tags": [], "owner": {"reputation": 416, "user_id": 5719955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cfba1a05fd4e81a8d4125aac7aa3c8b?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Raghavan", "link": "https://stackoverflow.com/users/5719955/vishal-raghavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1535609805, "last_edit_date": 1535609805, "creation_date": 1535609270, "answer_id": 52090220, "question_id": 52086726, "link": "https://stackoverflow.com/questions/52086726/django-the-html-template-fails-to-be-converted-to-pdf/52090220#52090220", "title": "Django: The HTML template fails to be converted to PDF", "body": "<p>Wrap your js in a function and return the function on submission of the form.</p>\n\n<p>Do something like this.</p>\n\n<pre><code>&lt;script&gt;\nfunction pdfdownload(){\nvar doc = new jsPDF();\n    var specialElementHandlers = {\n        '#editor': function (element, renderer) {\n            return true;\n        }\n    };\n\n    $('#Approve').click(function () {\n        doc.fromHTML($('#content').html(), 15, 15, {\n            'width': 170,\n                'elementHandlers': specialElementHandlers\n        });\n        doc.save('sample-file.pdf');\n    });\nreturn false;\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>and for the form </p>\n\n<pre><code>&lt;form action=\"your_url\" onsubmit=\"return pdfdownload()\"&gt; // your form\n</code></pre>\n\n<p>Without this call, the submit button submits whatever form it is in to the url mentioned in action of the form without executing your js. </p>\n\n<p>Note that this does not submit your form after executing your js.If you want the form to be submitted to the url given in action after js execution, just change \"return false\" to \"return true\" in your function.</p>\n"}], "owner": {"reputation": 3, "user_id": 5647915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb72ff3473a329e4378a1de9b0f406da?s=128&d=identicon&r=PG&f=1", "display_name": "clickie", "link": "https://stackoverflow.com/users/5647915/clickie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 52090220, "answer_count": 1, "score": 0, "last_activity_date": 1535609805, "creation_date": 1535580461, "question_id": 52086726, "link": "https://stackoverflow.com/questions/52086726/django-the-html-template-fails-to-be-converted-to-pdf", "title": "Django: The HTML template fails to be converted to PDF", "body": "<p>I am fairly new to Django and also JS/Jquery.</p>\n\n<p>I am trying to generate a pdf view of my HTML template, upon clicking the \"Approve\" Button. I have also written a js/jquery script within the same template to generatea pdf and instead I'm redirected to my homepage; just as I have defined it to do so in the corresponding view method. \nI'm wondering now why it does not run the js/jquery script and keeps referring to my view method and also what can I do to make it go through the script and convert the page to PDF and downloads it for the user, after hitting \"Approve\" Button.</p>\n\n<p>Many thanks for your smart comments ! </p>\n\n<h1>My Template</h1>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n{% load staticfiles %}\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\" /&gt;\n&lt;link rel=\"stylesheet\" href=\"{% static 'css/quote_letter_est.css' %}\"&gt;\n&lt;script src=\"https://code.jquery.com/jquery-1.12.3.min.js\"&gt;&lt;/script&gt;\n&lt;script \nsrc=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/0.9.0rc1/jspdf.min.js\"&gt; \n&lt;/script&gt;\n\n&lt;title&gt;Estimate Quote Letter&lt;/title&gt;\n&lt;script&gt;\n    var doc = new jsPDF();\n    var specialElementHandlers = {\n        '#editor': function (element, renderer) {\n            return true;\n        }\n    };\n\n    $('#Approve').click(function () {\n        doc.fromHTML($('#content').html(), 15, 15, {\n            'width': 170,\n                'elementHandlers': specialElementHandlers\n        });\n        doc.save('sample-file.pdf');\n    });\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;div id=\"content\"&gt;\n&lt;body  bgcolor=\"#ffffff\" border=\"1\"&gt;\n    &lt;form action=\"http://{{host}}:{{port}}/label/approve001\" method=\"Get\"&gt;\n    {%csrf_token%}\n        {% block content %}\n            {% if cust_data %}\n              {% for row in cust_data %}\n                  &lt;table id = \"print-friendly\" class=\"print-friendly\" style=\"width:80%; cellspacing:0;\"&gt;\n                        &lt;td colspan=\"8\" align=\"left\" valign=\"top\" &gt;{{ row.contact_fname }}&amp;nbsp;{{ row.contact_lname }}&lt;br&gt;We trust that the following estimate meets with your approval and we look forward to working with you.&lt;br&gt;&lt;br&gt;\n                        &lt;/td&gt;\n                        &lt;th colspan=\"2\" align=\"left\" style=\"width:300px; height:25px; font-size:14px;\"&gt;\n                        &lt;p&gt;TO: &lt;br&gt;{{ row.customer }} &lt;br&gt;{{row.add_line1}}, \n                           {{row.add_line2}} &lt;br&gt;{{ row.city}}, {{ \n                            row.province}}{{ row.postal_code}} \n                            &lt;br&gt;ATTN:&amp;nbsp;&amp;nbsp;{{ row.contact_lname }} \n                            &lt;br&gt;Phone:&amp;nbsp;&amp;nbsp;{{ row.phone }} \n                            &lt;br&gt;Email:&amp;nbsp;&amp;nbsp;{{ row.email }}&lt;/th&gt; &lt;/p&gt; \n\n                        &lt;th&gt;&lt;/th&gt;&lt;th align=\"left\" style=\"width:300px; \n                        height:25px; font-size:14px;\"&gt;QUOTATION#:&amp;nbsp;&amp;nbsp; \n                        {{ quotation_number }}&lt;br&gt;Date:&amp;nbsp;&amp;nbsp;{{ \n                         current_date}}&lt;br&gt;&lt;br&gt;Sales Person:&amp;nbsp;&amp;nbsp;{{ \n                         row.sales_person }}&lt;br&gt;CSR:&amp;nbsp;&amp;nbsp;{{row.csr}} \n                         &lt;br&gt;Estimator:&amp;nbsp;&amp;nbsp;{{estimater}}\n                       &lt;/th&gt;\n                       &lt;input type=\"hidden\"  name=\"Description\" id=\"Description\"     value={{quote_description}}&gt;\n                       &lt;input type=\"hidden\"  name=\"sales_person\" id=\"sales_person\"     value={{sales_person}}&gt;\n                       &lt;input type=\"hidden\"  name=\"csr_name\" id=\"csr_name\"     value={{csr_name}}&gt;\n                       &lt;input type=\"hidden\"  name=\"estimater\" id=\"estimater\"     value={{estimater}}&gt;\n                       &lt;input type=\"hidden\"  name=\"contact_lname\" id=\"contact_lname\"     value={{row.contact_lname}}&gt;\n                       &lt;input type=\"hidden\"  name=\"contact_fname\" id=\"contact_fname\"     value={{row.contact_fname}}&gt;\n                       &lt;input type=\"hidden\"  id=\"quotation_id\" name=\"quotation_id\" value={{ quotation_number }}&gt;\n                       &lt;input type=\"hidden\" name=\"deal_id\" value={{ deal_id }}&gt;\n              &lt;/table&gt;\n              &lt;button class=\"myButton\" id=\"Approve\" type=\"submit\" name=\"approve001\" formaction=\"approve001/\" value=approve001&gt;Approve&lt;/button&gt;\n\n              &lt;input type=\"button\" class =\"myButton\" name=\"Revise_All\" \n               onclick=\"window.location.href='http://{{host}}: \n               {port}}/label/generate_quotation_letter001/letter_quotation/? \n               id='+ quotation_id.value + '&amp;deal_id=' + deal_id.value \"  \n               value=\"Revise\" /&gt; \n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<h1>and this my view method (Note the request.GET values are being fetched from database and are dealt with in another method and there is no problem there).</h1>\n\n<pre><code>class approve(APIView):\n    def get(self, request):\n        print (\"Step 1 121get\")\n        part = request.GET['quotation_id']\n        try:\n            req_id = request.GET['quotation_id']\n        except:\n            req_id = \"\"\n        try:\n           verb = request.GET['approve001']\n        except:\n            verb = \"\"\n\n        if verb == \"decline001\": #\"\"decline\":\n            print (\"decline data............\")\n        try:\n            self.UpdateStatusRequest(req_id, \"Request-Declined\")\n        except:\n            quotation_id = \"\"\n\n    elif verb == \"approve001\": #\"\"approved\":\n        print (\"approve data............\")\n        try:\n            self.UpdateStatusRequest(req_id, \"Request-Approved\")\n        except:\n            quotation_id = \"\"\n    return redirect('/')\n\ndef UpdateStatusRequest(self, req_id, status_state):\n    print(\"pppppppppp\", req_id, status_state)\n    query = \"update label_newquote set status=\" + \"'\" + status_state + \"' \" + \" WHERE id = \" + str(req_id) + \";\"\n    print (query)\n    with connection.cursor() as cursor:\n        cursor.execute(query)\n\ndef post(self, request):\n    print(\"Step 1 post\")\n    try:\n        submit = request.POST.get('submit')\n    except:\n        submit = \"\"\n    try:\n        decline = request.POST.get('decline')\n    except:\n        decline = \"\"\n    print(submit)\n    print(decline)\n\n    return redirect('generate_quotation_letter001/letter_quotation/')\n</code></pre>\n\n<p>and just in case, this is my url: </p>\n\n<p><code>url(r'^generate_quotation_letter/perform_generate_quotation_letter/letter_quotation/LetterTwoQuotation/approve001/$', views_pdf.approve.as_view(), name=\"approve\"),\n</code></p>\n"}, {"tags": ["python", "pandas", "csv", "datetime"], "comments": [{"owner": {"reputation": 2291, "user_id": 8773597, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w9ZfPZR_pqg/AAAAAAAAAAI/AAAAAAAAAD4/UWy3eUzG4-o/photo.jpg?sz=128", "display_name": "Lev Zakharov", "link": "https://stackoverflow.com/users/8773597/lev-zakharov"}, "edited": false, "score": 1, "creation_date": 1535580267, "post_id": 52086665, "comment_id": 91123653, "body": "Please, add <code>odd.csv</code> example and received error."}, {"owner": {"reputation": 2291, "user_id": 8773597, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w9ZfPZR_pqg/AAAAAAAAAAI/AAAAAAAAAD4/UWy3eUzG4-o/photo.jpg?sz=128", "display_name": "Lev Zakharov", "link": "https://stackoverflow.com/users/8773597/lev-zakharov"}, "edited": false, "score": 0, "creation_date": 1535581063, "post_id": 52086665, "comment_id": 91123894, "body": "Please, load example not as image, but as text. You can read about principles of  creating an example <a href=\"https://stackoverflow.com/help/mcve\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3157, "user_id": 9948827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25OHb.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/9948827/abhi"}, "reply_to_user": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "edited": false, "score": 1, "creation_date": 1535582429, "post_id": 52086956, "comment_id": 91124275, "body": "Glad to be of help. :)"}], "tags": [], "owner": {"reputation": 3157, "user_id": 9948827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25OHb.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/9948827/abhi"}, "is_accepted": true, "score": 1, "last_activity_date": 1535581900, "creation_date": 1535581900, "answer_id": 52086956, "question_id": 52086665, "link": "https://stackoverflow.com/questions/52086665/filtering-rows-by-years/52086956#52086956", "title": "Filtering rows by years", "body": "<p>use the <code>.dt</code> accessor: <a href=\"https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.Series.dt.html\" rel=\"nofollow noreferrer\">dt</a></p>\n\n<pre><code>df[(df['Delivery Date'].dt.year &gt;= 2017) &amp; (df['Delivery Date'].dt.year &lt;= 2018)]\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 9969049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1896598870391245/picture?type=large", "display_name": "Haris Khaliq", "link": "https://stackoverflow.com/users/9969049/haris-khaliq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 52086956, "answer_count": 1, "score": 0, "last_activity_date": 1535581900, "creation_date": 1535580120, "last_edit_date": 1535580300, "question_id": 52086665, "link": "https://stackoverflow.com/questions/52086665/filtering-rows-by-years", "title": "Filtering rows by years", "body": "<p>I have this code that is used for to filter rows by year. I know that you are supposed to call the method datetime for this code to work. Every answer I see on StackOverFlow contains code similar to mine and it works for them. How can I print the row values from 2017-2018 without running into errors? This is my entire code, do I need to create a function? I am very unfamiliar with datetime code so any insight or guide will be very beneficial, like I said I have been looking for answers for the past 2 days without any findings so I believe I am doing something fundamentally wrong. Please let me know If i need to clarify my question more. </p>\n\n<pre><code>import pandas as pd\nimport datetime\n\n\ndf = pd.read_csv('otd.csv', encoding='latin-1')\ndf['Delivery Date'] = pd.to_datetime(df['Delivery Date'], format= '%m/%d/%Y')\ndf[(df['Delivery Date'].year &gt;= 2017) &amp; (df['Delivery Date'].year &lt;= 2018)]\nprint(df)\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\khalha\\eclipse-workspace\\Test3\\Project3\\P3.py\", line 10, in &lt;module&gt;\n    df[(df['Delivery Date'].year &gt;= 2017) &amp; (df['Delivery Date'].year &lt;= 2018)]\n  File \"C:\\Users\\khalha\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\generic.py\", line 4376, in __getattr__\n    return object.__getattribute__(self, name)\nAttributeError: 'Series' object has no attribute 'year'\n</code></pre>\n\n<p>otd.csv: </p>\n\n<p><a href=\"https://i.stack.imgur.com/OTeSN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OTeSN.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "python", ".net", "ironpython"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1535580280, "post_id": 52086663, "comment_id": 91123655, "body": "What is that <code>regex</code> you&#39;re trying to import? Is it <a href=\"https://pypi.org/project/regex/\" rel=\"nofollow noreferrer\">this library on PyPI</a>? Is that documented to work with IronPython? AIUI, that library includes a C extension module, so it&#39;s only usable from CPython (and from PyPy via cpyext)."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1535580325, "post_id": 52086663, "comment_id": 91123668, "body": "Also: (1) do you have a local file named <code>regex.py</code>? (2) how are you calling this from C#? have you made sure to set up the sys.path properly? (3) what&#39;s the full exception, not just a description of it?"}, {"owner": {"reputation": 484, "user_id": 4115214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01b61ded96906ad26084bb554829161?s=128&d=identicon&r=PG&f=1", "display_name": "Pallavi", "link": "https://stackoverflow.com/users/4115214/pallavi"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535580813, "post_id": 52086663, "comment_id": 91123810, "body": "regex.py is located in my C:\\Python27\\Lib\\site-packages. That&#39;s the one the existing code is referring to. I have also added it to the ScriptEngine&#39;s searchpaths list."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1535581380, "post_id": 52086663, "comment_id": 91123987, "body": "Include the full error traceback in your post, so we can see the line of code that has the error, instead of trying to guess where it is."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535582091, "post_id": 52086663, "comment_id": 91124172, "body": "Knowing where it is in your site-packages doesn&#39;t help; we need to know where you got it from and what it&#39;s supposed to do (and maybe also how you installed it)."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535582204, "post_id": 52086663, "comment_id": 91124210, "body": "Also, from the path, it looks like you&#39;re trying to use a CPython stdlib and site-packages, not an IronPython one. That&#39;s unlikely to work."}, {"owner": {"reputation": 484, "user_id": 4115214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01b61ded96906ad26084bb554829161?s=128&d=identicon&r=PG&f=1", "display_name": "Pallavi", "link": "https://stackoverflow.com/users/4115214/pallavi"}, "edited": false, "score": 0, "creation_date": 1535584277, "post_id": 52086663, "comment_id": 91124754, "body": "I have installed the IronPython stdlib nuget but I couldn&#39;t find regex.py in it. I thought it was a standard python library. Turns out the one I&#39;m using is &#39;Secret Labs&#39; Regular Expression Engine&#39;"}], "owner": {"reputation": 484, "user_id": 4115214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01b61ded96906ad26084bb554829161?s=128&d=identicon&r=PG&f=1", "display_name": "Pallavi", "link": "https://stackoverflow.com/users/4115214/pallavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535584524, "creation_date": 1535580119, "last_edit_date": 1535584524, "question_id": 52086663, "link": "https://stackoverflow.com/questions/52086663/importing-regex-throws-global-variable-i-not-found", "title": "Importing regex throws &quot;Global variable &#39;i&#39; not found&quot;", "body": "<p>I'm using IronPython to run my script in c#. This is the first time I'm using IronPython and I have it set up right. The script works as it should. I need to add a \"regex.compile()\" to it though and for that, I need to import regex.</p>\n\n<p>But as soon as I do that, I get a runtime exception from IronPython that 'global name 'i' is not defined'</p>\n\n<p>Here's the script that works-</p>\n\n<pre><code>def parse_failure(failure_string):\n    if failure_string:\n        try:\n            failure_string = HTMLParser.HTMLParser().unescape(failure_string)\n        except:\n            pass\n    return failure_string\n</code></pre>\n\n<p>And here's the one that throws exception-</p>\n\n<pre><code>import regex\n\ndef parse_failure(failure_string):\n    if failure_string:\n        try:\n            failure_string = HTMLParser.HTMLParser().unescape(failure_string)\n        except:\n            pass\n    if (failure_string):\n        LOG_START_PATTERN = regex.compile('(.+?)(begin\\s+captured\\s+(logging|stdout))')\n        result = LOG_START_PATTERN.search(failure_string)\n        if (result):\n            end_pos = failure_string.find(result.group(0))\n            if (end_pos != -1):\n                return failure_string[:end_pos]\n\n    return failure_string\n</code></pre>\n\n<p>Exception details-</p>\n\n<pre><code>IronPython.Runtime.UnboundNameException\n  HResult=0x80131500\n  Message=global name 'i' is not defined\n  Source=IronPython\n  StackTrace:\n   at IronPython.Compiler.PythonGlobal.GetCachedValue(Boolean lightThrow)\n   at IronPython.Compiler.PythonGlobal.get_CurrentValue()\n   at IronPython.Runtime.PythonGenerator.GetNext()\n   at IronPython.Runtime.PythonGenerator.MoveNextWorker()\n   at IronPython.Runtime.PythonGenerator.System.Collections.IEnumerator.MoveNext()\n   at IronPython.Runtime.PythonTuple.MakeItems(Object o)\n   at IronPython.Runtime.PythonTuple.__new__(CodeContext context, PythonType cls, Object sequence)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`4.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run4[T0,T1,T2,T3,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`6.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run4[T0,T1,T2,T3,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3)\n   at IronPython.Compiler.Ast.CallExpression.Invoke1Instruction.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run1[T0,TRet](T0 arg0)\n   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)\n   at IronPython.Compiler.RuntimeScriptCode.Run(Scope scope)\n   at IronPython.Runtime.PythonContext.InitializeModule(String fileName, ModuleContext moduleContext, ScriptCode scriptCode, ModuleOptions options)\n   at IronPython.Runtime.PythonContext.CompileModule(String fileName, String moduleName, SourceUnit sourceCode, ModuleOptions options, ScriptCode&amp; scriptCode)\n   at IronPython.Runtime.Importer.LoadModuleFromSource(CodeContext context, String name, String path)\n   at IronPython.Runtime.Importer.LoadFromDisk(CodeContext context, String name, String fullName, String str)\n   at IronPython.Runtime.Importer.ImportFromPathHook(CodeContext context, String name, String fullName, List path, Func`5 defaultLoader)\n   at IronPython.Runtime.Importer.ImportFromPath(CodeContext context, String name, String fullName, List path)\n   at IronPython.Runtime.Importer.ImportTopAbsolute(CodeContext context, String name)\n   at IronPython.Runtime.Importer.ImportModule(CodeContext context, Object globals, String modName, Boolean bottom, Int32 level)\n   at IronPython.Modules.Builtin.__import__(CodeContext context, String name, Object globals, Object locals, Object fromlist, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`7.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run7[T0,T1,T2,T3,T4,T5,T6,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6)\n   at IronPython.Runtime.Importer.ImportLightThrow(CodeContext context, String fullName, PythonTuple from, Int32 level)\n   at IronPython.Runtime.Operations.PythonOps.ImportTop(CodeContext context, String fullName, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`4.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run1[T0,TRet](T0 arg0)\n   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)\n   at IronPython.Compiler.RuntimeScriptCode.Run(Scope scope)\n   at IronPython.Runtime.PythonContext.InitializeModule(String fileName, ModuleContext moduleContext, ScriptCode scriptCode, ModuleOptions options)\n   at IronPython.Runtime.PythonContext.CompileModule(String fileName, String moduleName, SourceUnit sourceCode, ModuleOptions options, ScriptCode&amp; scriptCode)\n   at IronPython.Runtime.Importer.LoadModuleFromSource(CodeContext context, String name, String path)\n   at IronPython.Runtime.Importer.LoadFromDisk(CodeContext context, String name, String fullName, String str)\n   at IronPython.Runtime.Importer.ImportFromPathHook(CodeContext context, String name, String fullName, List path, Func`5 defaultLoader)\n   at IronPython.Runtime.Importer.ImportFromPath(CodeContext context, String name, String fullName, List path)\n   at IronPython.Runtime.Importer.ImportTopAbsolute(CodeContext context, String name)\n   at IronPython.Runtime.Importer.ImportModule(CodeContext context, Object globals, String modName, Boolean bottom, Int32 level)\n   at IronPython.Modules.Builtin.__import__(CodeContext context, String name, Object globals, Object locals, Object fromlist, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`7.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run7[T0,T1,T2,T3,T4,T5,T6,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6)\n   at IronPython.Runtime.Importer.ImportLightThrow(CodeContext context, String fullName, PythonTuple from, Int32 level)\n   at IronPython.Runtime.Operations.PythonOps.ImportBottom(CodeContext context, String fullName, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`4.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run1[T0,TRet](T0 arg0)\n   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)\n   at IronPython.Compiler.RuntimeScriptCode.Run(Scope scope)\n   at IronPython.Runtime.PythonContext.InitializeModule(String fileName, ModuleContext moduleContext, ScriptCode scriptCode, ModuleOptions options)\n   at IronPython.Runtime.PythonContext.CompileModule(String fileName, String moduleName, SourceUnit sourceCode, ModuleOptions options, ScriptCode&amp; scriptCode)\n   at IronPython.Runtime.Importer.LoadModuleFromSource(CodeContext context, String name, String path)\n   at IronPython.Runtime.Importer.LoadFromDisk(CodeContext context, String name, String fullName, String str)\n   at IronPython.Runtime.Importer.ImportFromPathHook(CodeContext context, String name, String fullName, List path, Func`5 defaultLoader)\n   at IronPython.Runtime.Importer.ImportFromPath(CodeContext context, String name, String fullName, List path)\n   at IronPython.Runtime.Importer.ImportTopAbsolute(CodeContext context, String name)\n   at IronPython.Runtime.Importer.ImportModule(CodeContext context, Object globals, String modName, Boolean bottom, Int32 level)\n   at IronPython.Modules.Builtin.__import__(CodeContext context, String name, Object globals, Object locals, Object fromlist, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`7.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run7[T0,T1,T2,T3,T4,T5,T6,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6)\n   at IronPython.Runtime.Importer.ImportLightThrow(CodeContext context, String fullName, PythonTuple from, Int32 level)\n   at IronPython.Runtime.Operations.PythonOps.ImportTop(CodeContext context, String fullName, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`4.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run1[T0,TRet](T0 arg0)\n   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)\n   at IronPython.Compiler.RuntimeScriptCode.Run(Scope scope)\n   at IronPython.Runtime.PythonContext.InitializeModule(String fileName, ModuleContext moduleContext, ScriptCode scriptCode, ModuleOptions options)\n   at IronPython.Runtime.PythonContext.CompileModule(String fileName, String moduleName, SourceUnit sourceCode, ModuleOptions options, ScriptCode&amp; scriptCode)\n   at IronPython.Runtime.Importer.LoadModuleFromSource(CodeContext context, String name, String path)\n   at IronPython.Runtime.Importer.LoadFromDisk(CodeContext context, String name, String fullName, String str)\n   at IronPython.Runtime.Importer.ImportFromPathHook(CodeContext context, String name, String fullName, List path, Func`5 defaultLoader)\n   at IronPython.Runtime.Importer.ImportFromPath(CodeContext context, String name, String fullName, List path)\n   at IronPython.Runtime.Importer.ImportTopAbsolute(CodeContext context, String name)\n   at IronPython.Runtime.Importer.ImportModule(CodeContext context, Object globals, String modName, Boolean bottom, Int32 level)\n   at IronPython.Modules.Builtin.__import__(CodeContext context, String name, Object globals, Object locals, Object fromlist, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`7.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run7[T0,T1,T2,T3,T4,T5,T6,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6)\n   at IronPython.Runtime.Importer.ImportLightThrow(CodeContext context, String fullName, PythonTuple from, Int32 level)\n   at IronPython.Runtime.Operations.PythonOps.ImportTop(CodeContext context, String fullName, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`4.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run1[T0,TRet](T0 arg0)\n   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)\n   at IronPython.Compiler.RuntimeScriptCode.Run(Scope scope)\n   at IronPython.Runtime.PythonContext.InitializeModule(String fileName, ModuleContext moduleContext, ScriptCode scriptCode, ModuleOptions options)\n   at IronPython.Runtime.PythonContext.CompileModule(String fileName, String moduleName, SourceUnit sourceCode, ModuleOptions options, ScriptCode&amp; scriptCode)\n   at IronPython.Runtime.Importer.LoadModuleFromSource(CodeContext context, String name, String path)\n   at IronPython.Runtime.Importer.LoadFromDisk(CodeContext context, String name, String fullName, String str)\n   at IronPython.Runtime.Importer.ImportFromPathHook(CodeContext context, String name, String fullName, List path, Func`5 defaultLoader)\n   at IronPython.Runtime.Importer.ImportFromPath(CodeContext context, String name, String fullName, List path)\n   at IronPython.Runtime.Importer.ImportTopAbsolute(CodeContext context, String name)\n   at IronPython.Runtime.Importer.ImportModule(CodeContext context, Object globals, String modName, Boolean bottom, Int32 level)\n   at IronPython.Modules.Builtin.__import__(CodeContext context, String name, Object globals, Object locals, Object fromlist, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`7.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run7[T0,T1,T2,T3,T4,T5,T6,TRet](T0 arg0, T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6)\n   at IronPython.Runtime.Importer.ImportLightThrow(CodeContext context, String fullName, PythonTuple from, Int32 level)\n   at IronPython.Runtime.Operations.PythonOps.ImportTop(CodeContext context, String fullName, Int32 level)\n   at Microsoft.Scripting.Interpreter.FuncCallInstruction`4.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)\n   at Microsoft.Scripting.Interpreter.LightLambda.Run2[T0,T1,TRet](T0 arg0, T1 arg1)\n   at IronPython.Compiler.PythonScriptCode.RunWorker(CodeContext ctx)\n   at IronPython.Compiler.PythonScriptCode.Run(Scope scope)\n   at IronPython.Compiler.RuntimeScriptCode.InvokeTarget(Scope scope)\n   at IronPython.Compiler.RuntimeScriptCode.Run(Scope scope)\n   at Microsoft.Scripting.Hosting.CompiledCode.Execute(ScriptScope scope)\n</code></pre>\n\n<p>Not sure what I'm doing wrong. This is a preexisting code in python, I'm just trying to call it in my C# logic.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535580574, "post_id": 52086736, "comment_id": 91123735, "body": "This isn&#39;t what OP asked for. The idea is not to create a new column, but to rename an existing one."}, {"owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535580615, "post_id": 52086736, "comment_id": 91123743, "body": "Are you sure? Why not?"}, {"owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535583178, "post_id": 52086736, "comment_id": 91124498, "body": "Sorry mate, you&#39;re talking rubbish. The OP clearly just wants the output they specified, they don&#39;t care about the intermediate step of creating an identical column with the same name. Why would anyone require that?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535583766, "post_id": 52086736, "comment_id": 91124629, "body": "Fair enough, but they are trying to create a new DataFrame while yours modifies the original, so this is still not what OP wants. My downvote will remain for now."}], "tags": [], "owner": {"reputation": 5135, "user_id": 5506894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jSK1.jpg?s=128&g=1", "display_name": "Denziloe", "link": "https://stackoverflow.com/users/5506894/denziloe"}, "is_accepted": false, "score": 0, "last_activity_date": 1535580541, "creation_date": 1535580541, "answer_id": 52086736, "question_id": 52086658, "link": "https://stackoverflow.com/questions/52086658/how-to-change-the-name-of-the-column-after-duplicate-and-still-keep-the-previou/52086736#52086736", "title": "How to change the name of the column after duplicate, and still keep the previous data at new column?", "body": "<p>Basic pandas if I understand you correctly.</p>\n\n<pre><code>df[\"Vega\"] = df[\"Gamma\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 10292058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ZPnz.png?s=128&g=1", "display_name": "Mypel", "link": "https://stackoverflow.com/users/10292058/mypel"}, "edited": false, "score": 0, "creation_date": 1535581546, "post_id": 52086746, "comment_id": 91124022, "body": "your solution looks like good, but: In DataFrame i see : Alpha, Beta, Vega, Delta and Gamma. i want to see: Alpha, Beta, Gamma, Delta and Vega. Also, where in your code i can recognize the specific column, that you selected?"}, {"owner": {"reputation": 149, "user_id": 10292058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ZPnz.png?s=128&g=1", "display_name": "Mypel", "link": "https://stackoverflow.com/users/10292058/mypel"}, "edited": false, "score": 0, "creation_date": 1535583905, "post_id": 52086746, "comment_id": 91124655, "body": "Thanks! short and elegant."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1535583628, "last_edit_date": 1535583628, "creation_date": 1535580576, "answer_id": 52086746, "question_id": 52086658, "link": "https://stackoverflow.com/questions/52086658/how-to-change-the-name-of-the-column-after-duplicate-and-still-keep-the-previou/52086746#52086746", "title": "How to change the name of the column after duplicate, and still keep the previous data at new column?", "body": "<p>Looks like a simple <code>assign</code> will do it.</p>\n\n<pre><code>A1 = df.assign(Vega=df['Gamma'])\nprint (A1)\n               Alpha      Beta     Gamma     Delta      Vega\n2012-01-01 -2.695081 -1.934733  0.892127 -0.895014  0.892127\n2012-01-02 -0.911289  0.714030  0.531698  1.435397  0.531698\n2012-01-03 -1.374162  1.517784  0.321945  1.268438  0.321945\n2012-01-04 -0.103294 -0.483923 -0.661366 -0.829013 -0.661366\n2012-01-05 -2.700309  0.601139  1.940421 -0.489158  1.940421\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 10028533, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y3K2lk47tCg/AAAAAAAAAAI/AAAAAAAAafQ/fGHQx_j3BlM/photo.jpg?sz=128", "display_name": "Bharat Sesham", "link": "https://stackoverflow.com/users/10028533/bharat-sesham"}, "is_accepted": false, "score": 0, "last_activity_date": 1535580595, "creation_date": 1535580595, "answer_id": 52086750, "question_id": 52086658, "link": "https://stackoverflow.com/questions/52086658/how-to-change-the-name-of-the-column-after-duplicate-and-still-keep-the-previou/52086750#52086750", "title": "How to change the name of the column after duplicate, and still keep the previous data at new column?", "body": "<p>Instead of concating and re-naming the column, you directly add the column with desired column name and desired output. </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame(np.random.randn(5, 4),\n           index=pd.date_range('1/1/2012', periods=5),\n           columns=['Alpha', 'Beta', 'Gamma', 'Delta'])\n\ndf[\"Vega\"]=(df.iloc[0:,2])\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 10292058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ZPnz.png?s=128&g=1", "display_name": "Mypel", "link": "https://stackoverflow.com/users/10292058/mypel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52086746, "answer_count": 3, "score": 2, "last_activity_date": 1535583704, "creation_date": 1535580091, "last_edit_date": 1535583704, "question_id": 52086658, "link": "https://stackoverflow.com/questions/52086658/how-to-change-the-name-of-the-column-after-duplicate-and-still-keep-the-previou", "title": "How to change the name of the column after duplicate, and still keep the previous data at new column?", "body": "<p>I have DataFrame with few columns. After i duplicate one of the columns (\"Gamma\"), i got two columns. now i want to change the name of the second \"Gamma\" to other name (\"Vega\"), and still keep the same data as before.</p>\n\n<p>My code is:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame(np.random.randn(5, 4),\n               index=pd.date_range('1/1/2012', periods=5),\n               columns=['Alpha', 'Beta', 'Gamma', 'Delta'])\n\nX1=(df.iloc[0:,2])\nA1=pd.concat([df,X1], axis=1)\n</code></pre>\n\n<p>Both columns with same the name \"Gamma\" are changed to \"Vega\", and looks like this:</p>\n\n<pre><code>               Alpha      Beta      Vega     Delta      Vega\n2012-01-01  1.183407  1.621138 -0.265026  1.281414 -0.265026\n2012-01-02  0.242500  1.447831  1.416176  0.213390  1.416176\n2012-01-03  2.561872  0.772370  0.491330  0.441862  0.491330\n2012-01-04 -0.520791  0.295666 -0.426005 -0.302739 -0.426005\n2012-01-05 -0.076098 -0.118959  0.252242 -0.995290  0.252242\n</code></pre>\n\n<p>So, how can i select the correct \"Gamma\" column (the second one), and how to change his name only.              </p>\n\n<p>My expected output is:</p>\n\n<pre><code>               Alpha      Beta     Gamma     Delta      Vega\n2012-01-01  1.183407  1.621138 -0.265026  1.281414 -0.265026\n2012-01-02  0.242500  1.447831  1.416176  0.213390  1.416176\n2012-01-03  2.561872  0.772370  0.491330  0.441862  0.491330\n2012-01-04 -0.520791  0.295666 -0.426005 -0.302739 -0.426005\n2012-01-05 -0.076098 -0.118959  0.252242 -0.995290  0.252242\n</code></pre>\n"}, {"tags": ["python", "snakemake"], "comments": [{"owner": {"reputation": 3263, "user_id": 3998252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e12ce9e892926492f5436f0466e5e573?s=128&d=identicon&r=PG&f=1", "display_name": "Manavalan Gajapathy", "link": "https://stackoverflow.com/users/3998252/manavalan-gajapathy"}, "edited": false, "score": 0, "creation_date": 1535594173, "post_id": 52086652, "comment_id": 91126688, "body": "Is there a reason you&#39;re avoiding usage of <code>rule all</code>?"}, {"owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "reply_to_user": {"reputation": 3263, "user_id": 3998252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e12ce9e892926492f5436f0466e5e573?s=128&d=identicon&r=PG&f=1", "display_name": "Manavalan Gajapathy", "link": "https://stackoverflow.com/users/3998252/manavalan-gajapathy"}, "edited": false, "score": 0, "creation_date": 1535598237, "post_id": 52086652, "comment_id": 91127516, "body": "Not sure what you mean. I am definitely not trying to avoid it, but rather trying to write <code>Snakemake</code> file that would work. So, what should be changed in your view to make it better?"}], "answers": [{"comments": [{"owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "edited": false, "score": 0, "creation_date": 1535598064, "post_id": 52087224, "comment_id": 91127485, "body": "Thank you! I updated the question with your suggestions and still getting an error (please, see at the top)"}, {"owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "edited": false, "score": 0, "creation_date": 1535598167, "post_id": 52087224, "comment_id": 91127503, "body": "Probably <code>base_neo4j</code> needs to be specified in the <code>rule all</code> too somehow, but I am not sure on that"}, {"owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "edited": false, "score": 1, "creation_date": 1535599035, "post_id": 52087224, "comment_id": 91127666, "body": "Ok, no worries, I rewrote it to use direct paths. Thank you very much!"}, {"owner": {"reputation": 131, "user_id": 4487318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pCHRrZ5QKhw/AAAAAAAAAAI/AAAAAAAAABo/Zv7-driSq14/photo.jpg?sz=128", "display_name": "Mali Akmanalp", "link": "https://stackoverflow.com/users/4487318/mali-akmanalp"}, "reply_to_user": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "edited": false, "score": 0, "creation_date": 1535634711, "post_id": 52087224, "comment_id": 91146222, "body": "If you have a static value like that, you can probably pass that in as a <code>params</code> and then use <code>params.base_neo4j</code> to access the value: <a href=\"https://snakemake.readthedocs.io/en/stable/snakefiles/rules.html#non-file-parameters-for-rules\" rel=\"nofollow noreferrer\">snakemake.readthedocs.io/en/stable/snakefiles/&hellip;</a>"}], "tags": [], "owner": {"reputation": 131, "user_id": 4487318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pCHRrZ5QKhw/AAAAAAAAAAI/AAAAAAAAABo/Zv7-driSq14/photo.jpg?sz=128", "display_name": "Mali Akmanalp", "link": "https://stackoverflow.com/users/4487318/mali-akmanalp"}, "is_accepted": true, "score": 2, "last_activity_date": 1535584101, "creation_date": 1535584101, "answer_id": 52087224, "question_id": 52086652, "link": "https://stackoverflow.com/questions/52086652/snakemake-rule-is-not-picked-up-and-can-not-specify-the-output-files/52087224#52087224", "title": "Snakemake rule is not picked up and can not specify the output files", "body": "<p>It's not very easy to diagnose the full issue since you haven't provided the whole Snakefile, but here is what I can infer from what you specified:</p>\n\n<p>The error message is unfortunately a bit misleading, but the gist of it is that snakemake starts from a list of targets. These targets are either files you specified through the command line, or files that are the input of the topmost rule of a snakefile. Usually this rule is named \"all\" or \"main\". Here you would specify the final list of files to be generated by default. An example for your case would be:</p>\n\n<pre><code>rule all:\n    input: expand('results/neo4j/{sample}/{file}.csv', sample=samples, file=['cells.csv', 'genes.csv', ...])\n\nrule neo4j:\n    ...\n    output:'results/neo4j/{sample}/cells.csv', 'results/neo4j/{sample}/genes.csv'...\n</code></pre>\n\n<p>Snakemake looks at the input of <code>main</code> to figure out all the files to be generated, then figures out what rule(s) to run (<code>neo4j</code>) with which parameters, in order to generate those, and what rules to use to generate the inputs of those rules, etc etc. So at the end of the day the very last rule, i.e. the \"target rule\" <code>all</code> is where everything starts, so you can't use wildcards there.</p>\n\n<p>Notice that the output for <code>neo4j</code> is just wildcards (they have {} in them and refer to a hypothetical pattern that may match a file), versus the input for <code>all</code> is expanded to a concrete file names (like 'results/neo4j/123/cells.csv').</p>\n\n<p>Often the way people get this error is that they don't have an <code>all</code> rule on the top of their snakefile, which leads snakemake to pick whatever other rule is at the top as the target, which happens to be a rule that has a wildcard.</p>\n\n<p>You probably shouldn't need dynamic / directory / etc for something like this.</p>\n"}], "owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1136, "favorite_count": 0, "accepted_answer_id": 52087224, "answer_count": 1, "score": 0, "last_activity_date": 1535654415, "creation_date": 1535580055, "last_edit_date": 1535654415, "question_id": 52086652, "link": "https://stackoverflow.com/questions/52086652/snakemake-rule-is-not-picked-up-and-can-not-specify-the-output-files", "title": "Snakemake rule is not picked up and can not specify the output files", "body": "<p>I have a folder where the outputs of the rule are generated. I am having a real trouble running <code>snakemake</code> with it. If I do not specify the outputs in <code>rule all</code>, the rule (called <code>neo4j</code>) is not run at all. If I try running it manually with <code>snakemake neo4j</code> (which I would prefer not to), then I get an error:</p>\n\n<blockquote>\n  <p>WorkflowError:\n  Target rules may not contain wildcards. Please specify concrete files or a rule without wildcards.</p>\n</blockquote>\n\n<p>I tried specifying the outputs of the rule in different ways but none of them worked. </p>\n\n<ol>\n<li><p>Using <code>expand</code>:</p>\n\n<pre><code>expand('results/neo4j/{sample}/cells.csv', sample=samples),\nexpand('results/neo4j/{sample}/genes.csv', sample=samples),\nexpand('results/neo4j/{sample}/cl_nodes.csv', sample=samples),\nexpand('results/neo4j/{sample}/cl_contains.csv', sample=samples),\nexpand('results/neo4j/{sample}/cl_isin.csv', sample=samples),\nexpand('results/neo4j/{sample}/expr_by.csv', sample=samples),\nexpand('results/neo4j/{sample}/expr_ess.csv', sample=samples)\n</code></pre></li>\n</ol>\n\n<p>Generates a very weird error for a completely different unrelated rule (called <code>umap</code>):</p>\n\n<blockquote>\n  <p>Missing input files for rule umap:\n  data_files/normalized/minus_2/cl_nodes.csv.csv</p>\n</blockquote>\n\n<p>The path generation is completely messed up even though the folders are not connected in any way except for the <code>results</code> being the root folder of all of the outputs.</p>\n\n<ol start=\"2\">\n<li><p>Using <code>dynamic</code>:</p>\n\n<pre><code>dynamic('results/neo4j/{sample}/cells.csv', sample=samples),\ndynamic('results/neo4j/{sample}/genes.csv', sample=samples),\ndynamic('results/neo4j/{sample}/cl_nodes.csv', sample=samples),\ndynamic('results/neo4j/{sample}/cl_contains.csv', sample=samples),\ndynamic('results/neo4j/{sample}/cl_isin.csv', sample=samples),\ndynamic('results/neo4j/{sample}/expr_by.csv', sample=samples),\ndynamic('results/neo4j/{sample}/expr_ess.csv', sample=samples)\n</code></pre></li>\n</ol>\n\n<p>Gives an error:</p>\n\n<blockquote>\n  <p>dynamic() got an unexpected keyword argument 'sample'</p>\n</blockquote>\n\n<p>Ok, I tried removing <code>sample=samples</code> but no luck</p>\n\n<ol start=\"3\">\n<li><p>Just <code>directory</code>:</p>\n\n<pre><code>directory('results/neo4j/{sample}/', sample=samples)\n</code></pre></li>\n</ol>\n\n<p>Gives error:</p>\n\n<blockquote>\n  <p>directory() got an unexpected keyword argument 'sample'</p>\n</blockquote>\n\n<p>If I omit <code>sample=samples</code>, not working either. If I specify <code>directory</code> under <code>rule all</code> <code>output</code>, not working. </p>\n\n<p>The rule I am having difficulty with is below:</p>\n\n<pre><code>rule neo4j:\n    input:\n        script = 'python/neo4j.py',\n        path_to_cl = 'results/clusters/umap/{sample}_umap_clusters.csv',\n        path_to_umap = 'results/umap/{sample}_umap.csv',\n        path_to_mtx = 'data_files/normalized/{sample}.csv'\n    output:\n        base_neo4j = 'results/neo4j/{sample}'\n    shell:\n        \"python {input.script} -path_to_cl {input.path_to_cl} -path_to_umap {input.path_to_umap} -path_to_mtx {input.path_to_mtx} -base_neo4j {output.base_neo4j}\"\n</code></pre>\n\n<p><code>snakemake</code> version is <code>5.2.2</code></p>\n\n<p>Any suggestions would be greatly appreciated.</p>\n\n<blockquote>\n  <p>Update</p>\n</blockquote>\n\n<p>I modified the <code>Snakemake</code> file using suggestions of <code>Mali Akmanalp</code> and now <code>rule all</code> looks like that:</p>\n\n<pre><code>samples,=glob_wildcards('data_files/normalized/{sample}.csv')\n   rule all:\n     input:\n        expand('results/pca/img/{sample}_pca.png', sample=samples),\n        expand('results/pca/{sample}_pca.csv', sample=samples),\n        expand('results/tsne/{sample}_tsne.csv', sample=samples),\n        expand('results/umap/{sample}_umap.csv', sample=samples),\n        expand('results/umap/img/{sample}_umap.png', sample=samples),\n        expand('results/tsne/img/{sample}_tsne.png', sample=samples),\n        expand('results/clusters/umap/{sample}_umap_clusters.csv', sample=samples),\n        expand('results/clusters/tsne/{sample}_tsne_clusters.csv', sample=samples),\n        expand('results/neo4j/{sample}/{file}', sample=samples,    \n          file=['cells.csv', 'genes.csv', 'cl_contains.csv', 'cl_isin.csv', 'cl_nodes.csv', 'expr_by.csv', 'expr_ess.csv'])\n</code></pre>\n\n<p>and <code>neo4j</code> rule like that:</p>\n\n<pre><code>rule neo4j:\n    input:\n        script = 'python/neo4j.py',\n        path_to_cl = 'results/clusters/umap/{sample}_umap_clusters.csv',\n        path_to_umap = 'results/umap/{sample}_umap.csv',\n        path_to_mtx = 'data_files/normalized/{sample}.csv',\n        base_neo4j = 'results/neo4j/{sample}'\n    output: 'results/neo4j/{sample}/cells.csv', 'results/neo4j/{sample}/genes.csv', 'results/neo4j/{sample}/cl_nodes.csv',\n            'results/neo4j/{sample}/cl_contains.csv', 'results/neo4j/{sample}/expr_by.csv', 'results/neo4j/{sample}/expr_ess.csv',\n            'results/neo4j/{sample}/cl_isin.csv'\n    shell:\n        \"python {input.script} -path_to_cl {input.path_to_cl} -path_to_umap {input.path_to_umap} -path_to_mtx {input.path_to_mtx} -base_neo4j {input.base_neo4j}\"\n</code></pre>\n\n<p>With such set ups I am getting the error:</p>\n\n<blockquote>\n  <p>Missing input files for rule neo4j:\n  results/neo4j/plus_1</p>\n  \n  <p>Update</p>\n</blockquote>\n\n<p>I removed this line from <code>neo4j</code> rule: <code>base_neo4j = 'results/neo4j/{sample}'</code> and then changed the <code>output</code> of the rule to:</p>\n\n<pre><code> output: \n      cells = 'results/neo4j/{sample}/cells.csv', \n      genes = 'results/neo4j/{sample}/genes.csv', \n      cl_nodes = 'results/neo4j/{sample}/cl_nodes.csv',\n      cl_contains = 'results/neo4j/{sample}/cl_contains.csv', \n      cl_isin = 'results/neo4j/{sample}/cl_isin.csv', \n      expr_by = 'results/neo4j/{sample}/expr_by.csv',\n      expr_ess = 'results/neo4j/{sample}/expr_ess.csv'\n</code></pre>\n\n<p>and the <code>shell</code> command:</p>\n\n<pre><code>shell:\n   \"python {input.script} -path_to_cl {input.path_to_cl} -path_to_umap {input.path_to_umap} -path_to_mtx {input.path_to_mtx} -cells {output.cells} -genes {output.genes} -cl_nodes {output.cl_nodes} -cl_contains {output.cl_contains} -cl_isin {output.cl_isin} -expr_by {output.expr_by} -expr_ess {output.expr_ess}\"\n</code></pre>\n\n<p>I do not like feeding in each parameter in the <code>output</code> but it is not working otherwise. I tried feeding in just <code>output</code> but it only feeds in the first item in the <code>output</code>, others are ignored for some reason. I asked a separate question regarding that:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/52088953/snakemake-passes-only-the-first-path-in-the-output-to-shell-command\">Snakemake passes only the first path in the output to shell command</a></p>\n\n<p>Other than that, it is working now.</p>\n"}, {"tags": ["python", "tensorflow", "arm", "bazel", "zynq"], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 10292094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d76362673777d1a4e11f34515439d2?s=128&d=identicon&r=PG&f=1", "display_name": "R. Klein", "link": "https://stackoverflow.com/users/10292094/r-klein"}, "edited": false, "score": 0, "creation_date": 1549410096, "post_id": 54517810, "comment_id": 95890246, "body": "Thanks for the info.  Can you tell me how you ran an ubuntu disk image on a peta-linux kernel??  How can you ensure correctness between the two distributions?  I am assuming you created a bitstream for the Xilinx board that frankensteined the two distros together.  How did you do that?  Any details would be appreciated.  Thanks,"}, {"owner": {"reputation": 54, "user_id": 9845608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14dda5dcb04c5a32e73d5779765ccca?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas", "link": "https://stackoverflow.com/users/9845608/niklas"}, "reply_to_user": {"reputation": 58, "user_id": 10292094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d76362673777d1a4e11f34515439d2?s=128&d=identicon&r=PG&f=1", "display_name": "R. Klein", "link": "https://stackoverflow.com/users/10292094/r-klein"}, "edited": false, "score": 0, "creation_date": 1549438349, "post_id": 54517810, "comment_id": 95897367, "body": "I pretty much followed this <a href=\"https://medium.com/developments-and-implementations-on-zynq-7000-ap/install-ubuntu-16-04-lts-on-zynq-zc702-using-petalinux-2016-4-e1da902eaff7\" rel=\"nofollow noreferrer\">tutorial</a>. In Short: First I create a Kernel with petalinux. I put the created files BOOT.BIN and image.ub in the BOOT partition of my SD card. Then I put the rootfs (from the tutorial) in a second partition. As much as I know it is a customized Ubuntu core rootfs. <a href=\"https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18841732/Ubuntu+on+Zynq\" rel=\"nofollow noreferrer\">Xilinx</a> has some information about it, too."}, {"owner": {"reputation": 54, "user_id": 9845608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14dda5dcb04c5a32e73d5779765ccca?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas", "link": "https://stackoverflow.com/users/9845608/niklas"}, "reply_to_user": {"reputation": 58, "user_id": 10292094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d76362673777d1a4e11f34515439d2?s=128&d=identicon&r=PG&f=1", "display_name": "R. Klein", "link": "https://stackoverflow.com/users/10292094/r-klein"}, "edited": false, "score": 0, "creation_date": 1549439070, "post_id": 54517810, "comment_id": 95897683, "body": "I can&#39;t tell you how correct this process is. However, for my little project it worked quite well. My biggest problem was the transition from an ARM 32 Bit to 64 Bit rootfs (I used the Zynq Ultrascale+, but most tutorials are written for the Zynq 7000). For me the big advantage was, that I could use apt-get afterwards. Out of curiosity: What was your solution for the last months?"}, {"owner": {"reputation": 58, "user_id": 10292094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d76362673777d1a4e11f34515439d2?s=128&d=identicon&r=PG&f=1", "display_name": "R. Klein", "link": "https://stackoverflow.com/users/10292094/r-klein"}, "edited": false, "score": 0, "creation_date": 1549474869, "post_id": 54517810, "comment_id": 95918482, "body": "I remain unable to solve this problem.  Specifically, I do need to be able to rebuild tensor flow for an ARM system, not use someone else&#39;s.  I can&#39;t get anyone from google/tensorflow to respond on this.  But being able to run someone else&#39;s ARM port on the Xilinx Zynq UltraScale helps me quite a bit.  Many thanks for the pointer to the tutorial.  The ability to use apt-get is huge."}, {"owner": {"reputation": 58, "user_id": 10292094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d76362673777d1a4e11f34515439d2?s=128&d=identicon&r=PG&f=1", "display_name": "R. Klein", "link": "https://stackoverflow.com/users/10292094/r-klein"}, "edited": false, "score": 0, "creation_date": 1549475758, "post_id": 54517810, "comment_id": 95918895, "body": "After a bunch of research I have concluded that cross compiling tensor flow for ARM is (or at least was) broken.  The only way to get an ARM port is to natively compile.  The problem, of course, is the huge number of dependencies that Bazel brings, that all need to be available or built for the target platform.  So trying to do this on a constrained ARM platform is somewhere between hard and impossible."}], "tags": [], "owner": {"reputation": 54, "user_id": 9845608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14dda5dcb04c5a32e73d5779765ccca?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas", "link": "https://stackoverflow.com/users/9845608/niklas"}, "is_accepted": true, "score": 0, "last_activity_date": 1549288936, "creation_date": 1549288936, "answer_id": 54517810, "question_id": 52086637, "link": "https://stackoverflow.com/questions/52086637/bazel-cross-compile-of-tensorflow-for-arm-fails/54517810#54517810", "title": "Bazel cross compile of tensorflow for ARM fails", "body": "<p>I can't help you with your error message (or Bazel altogether). However I installed TensorFlow on an Xilinx Zynq Ultrascale+ with a Petalinux kernel and an Ubuntu (arm64) root filesystem. It's not the same exact chip (but the installation process should be similar). I didn't build TensorFlow myself, instead I used the packages provided by the <a href=\"https://github.com/lhelontra/tensorflow-on-arm/releases\" rel=\"nofollow noreferrer\">tensorflow-on-arm</a> project. Maybe my experience will be useful for other people to get TensorFlow running:</p>\n\n<ol>\n<li><p>You need a working OS (Xilinx has documentation for that). Depending on your chip you need either a 32 (armhf) or 64 Bit (arm64) rootfs. I used an Ubuntu rootfs, so I could use apt-install.</p></li>\n<li><p>You need to install some dependencies. I followed the instructions from the <a href=\"https://github.com/lhelontra/tensorflow-on-arm\" rel=\"nofollow noreferrer\">tensorflow-on-arm</a> project.<br>\n<code>apt-get install openjdk-8-jdk automake autoconf curl zip unzip libtool swig libpng12-dev zlib1g-dev pkg-config git g++ wget xz-utils</code></p></li>\n<li><p>You also need Python (be sure to install Python v3.5 - not Python v3.6, etc.).<br>\n<code>apt-get install python3-numpy python3-dev python3-pip python3-mock</code></p></li>\n<li><p>I also needed to install two not listed packages.<br>\n<code>apt-get install cython3 libhdf5-dev</code></p></li>\n<li><p>Install some pip3 packages (you might want to install those in a virtual-environment and also update pip3).<br>\n<code>pip3 install -U --user keras_applications==1.0.5 --no-deps</code><br>\n<code>pip3 install -U --user keras_preprocessing==1.0.3 --no-deps</code><br>\n<code>pip3 install -U --user numpy grpcio h5py</code>  </p></li>\n<li><p>Now you should download the TensorFlow pip package. The different packages are listed under <a href=\"https://github.com/lhelontra/tensorflow-on-arm/releases\" rel=\"nofollow noreferrer\">Releases</a>. I chose TensorFlow v.1.12 for Python v3.5 and arm64 / aarch64.<br>\n<code>wget https://github.com/lhelontra/tensorflow-on-arm/releases/download/v1.12.0/tensorflow-1.12.0-cp35-none-linux_aarch64.whl</code></p></li>\n<li><p>Now you can install the package with pip3.<br>\n<code>pip3 install -U --user tensorflow-1.12.0*</code></p></li>\n</ol>\n\n<p>I hope it worked for you!</p>\n"}], "owner": {"reputation": 58, "user_id": 10292094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d76362673777d1a4e11f34515439d2?s=128&d=identicon&r=PG&f=1", "display_name": "R. Klein", "link": "https://stackoverflow.com/users/10292094/r-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1612, "favorite_count": 0, "accepted_answer_id": 54517810, "answer_count": 1, "score": 2, "last_activity_date": 1549288936, "creation_date": 1535579966, "question_id": 52086637, "link": "https://stackoverflow.com/questions/52086637/bazel-cross-compile-of-tensorflow-for-arm-fails", "title": "Bazel cross compile of tensorflow for ARM fails", "body": "<p>I am trying to build tensorflow to run on a Zynq, specifically, the Z7020.  I have petalinux running on the board, and python 3.4.9.  When trying to build tensorflow following the instructions found here:[<a href=\"https://www.tensorflow.org/install/install_raspbian#cross-compiling_from_sources]\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/install/install_raspbian#cross-compiling_from_sources]</a>\nNote that both petalinux and raspbian are both Debian derivatives and the Z7020 has the same CortexA9 cores as the raspberry-pi 0 and 1 series boards.</p>\n\n<p>I am trying to build on an Ubuntu 16.04 host.  The command I am using to build is:</p>\n\n<pre><code>sudo CI_DOCKER_EXTRA_PARAMS=\"-e CI_BUILD_PYTHON=python3 -e CROSSTOOL_PYTHON_INCLUDE=/home/rklein/Python-3.4.9/Include\" tensorflow/tools/ci_build/ci_build.sh PI-PYTHON3 tensorflow/tools/ci_build/pi/build_raspberry_pi.sh PI_ONE\n</code></pre>\n\n<p>Bazel churns for about 2 hours and comes back with the following error message:</p>\n\n<pre><code>    /home/rklein/tensorflow/bazel-ci_build-cache/.cache/bazel/_bazel_root/eab0--lots of hex digits--85e8/external/arm_compiler/bin/arm-linux-gnueablhf-gcc --lots of options\n\n    In file included from /usr/include/python2.7/Python.h:8:0, from ./tensorflow/python/lib/core/bfloat16.h:19, \n                     from tensorflow/python/lib/core/bfloat16.h:18:\n                     from /usr/include/python2.7/pyconfig.h:13:54: \n    fatal error: arm-linux-gnueabihf/python2.7/pyconfig.h: No such file or directory\n    #include &lt;arm-linux-gnueabihf/python2.7/pyconfig.h&gt;\n                                                       ^\n    compilation terminated.\n</code></pre>\n\n<p>What settings are needed to tell Bazel to use python3?  Note that there is no /usr/include/python2.7 directory on the host machine, so I suspect that Basel is doing some voodoo behind the scenes.  The command</p>\n\n<pre><code>find ~ -name python2.7\n</code></pre>\n\n<p>comes up empty.</p>\n\n<p>I have tried to read up as much as I can on Bazel, but the documentation seems pretty lean - any good references would be appreciated.</p>\n"}, {"tags": ["python", "r", "x11", "rpy2", "xquartz"], "answers": [{"tags": [], "owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "is_accepted": false, "score": 0, "last_activity_date": 1539656275, "creation_date": 1539656275, "answer_id": 52827035, "question_id": 52086621, "link": "https://stackoverflow.com/questions/52086621/how-can-i-get-x11-available-for-rpy2-in-python-environment/52827035#52827035", "title": "how can I get x11() available for rpy2 in python environment?", "body": "<p>X11 is working on my side.</p>\n\n<p>Whenever you observe differences between R in rpy2 and the \"regular R on the system\", this is often means that different installations of R are used.</p>\n\n<p>There is a small utility module tell a user more about which R rpy2 is using: </p>\n\n<pre><code>python -m rpy2.situation\n</code></pre>\n\n<p>Does this match the R that has x11 ?</p>\n"}], "owner": {"reputation": 382, "user_id": 6901311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZeAQP.png?s=128&g=1", "display_name": "Irbin B.", "link": "https://stackoverflow.com/users/6901311/irbin-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539656275, "creation_date": 1535579857, "question_id": 52086621, "link": "https://stackoverflow.com/questions/52086621/how-can-i-get-x11-available-for-rpy2-in-python-environment", "title": "how can I get x11() available for rpy2 in python environment?", "body": "<p>I am trying to plot a simple graph in python 3 using the rpy2 library:</p>\n\n<pre><code>import rpy2.robjects as robjects\n\nr = robjects.r\n\nx = robjects.IntVector(range(10))\ny = r.rnorm(10)\n\nr.X11(1,1)\n\nr.layout(r.matrix(robjects.IntVector([1,2,3,2]), nrow=2, ncol=2))\nr.plot(r.runif(10), y, xlab=\"runif\", ylab=\"foo/bar\"\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>/Users/Irbin/anaconda3/lib/python3.6/site-packages/rpy2/rinterface/__init__.py:145: RRuntimeWarning: Error in (function (display = \"\", width, height, pointsize, gamma, bg,  : \nX11 is not available\nwarnings.warn(x, RRuntimeWarning)---------------------------------------------------------------------------\nRRuntimeError                             Traceback (most recent call last)\n&lt;ipython-input-3-bdd0b9cb9184&gt; in &lt;module&gt;()\n----&gt; 1 import codecs, os, ast;__pyfile = codecs.open('''/var/folders/7q/2v_j6pcx0bb9jq2r_4b2b30w0000gn/T/pyDtdUIr''', encoding='''utf-8''');__code = __pyfile.read().encode('''utf-8''');__pyfile.close();os.remove('''/var/folders/7q/2v_j6pcx0bb9jq2r_4b2b30w0000gn/T/pyDtdUIr''');__block = ast.parse(__code, '''/Users/Irbin/Downloads/scratch.py''', mode='exec');__last = __block.body[-1];__isexpr = isinstance(__last,ast.Expr);__block.body.pop() if __isexpr else None;exec(compile(__block, '''/Users/Irbin/Downloads/scratch.py''', mode='exec'));eval(compile(ast.Expression(__last.value), '''/Users/Irbin/Downloads/scratch.py''', mode='eval')) if __isexpr else None\n\n~/Downloads/scratch.py in &lt;module&gt;()\n  6 # r Into (run inside sub codes)\n  7 \n----&gt; 8 \n  9 import pdb\n 10 \n\n~/anaconda3/lib/python3.6/site-packages/rpy2/robjects/functions.py in __call__(self, *args, **kwargs)\n176                 v = kwargs.pop(k)\n177                 kwargs[r_k] = v\n--&gt; 178         return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)\n179 \n180 pattern_link = re.compile(r'\\\\link\\{(.+?)\\}')\n\n~/anaconda3/lib/python3.6/site-packages/rpy2/robjects/functions.py in __call__(self, *args, **kwargs)\n104         for k, v in kwargs.items():\n105             new_kwargs[k] = conversion.py2ri(v)\n--&gt; 106         res = super(Function, self).__call__(*new_args, **new_kwargs)\n107         res = conversion.ri2ro(res)\n108         return res\n\nRRuntimeError: Error in (function (display = \"\", width, height, pointsize, gamma, bg,  : \nX11 is not available\n</code></pre>\n\n<p>I googled it and I have understood X11 is necessary on OSX for graphics. When I check it with rpy2 I obtain the following:</p>\n\n<pre><code>print(robjects.r(\"capabilities()\"))\n\njpeg         png        tiff       tcltk         X11        aqua \nTRUE        TRUE        TRUE        TRUE       FALSE        TRUE \nhttp/ftp     sockets      libxml        fifo      cledit       iconv \nTRUE        TRUE        TRUE        TRUE        TRUE        TRUE \nNLS     profmem       cairo         ICU long.double     libcurl \nTRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n</code></pre>\n\n<p>Which indicate X11() is not available (FALSE), but if I run native R and code the same instruction X11() is available, as you can see:</p>\n\n<pre><code>capabilities()\n\njpeg         png        tiff       tcltk         X11        aqua \nTRUE        TRUE        TRUE        TRUE        TRUE        TRUE \nhttp/ftp     sockets      libxml        fifo      cledit       iconv \nTRUE        TRUE        TRUE        TRUE       FALSE        TRUE \nNLS     profmem       cairo         ICU long.double     libcurl \nTRUE        TRUE        TRUE        TRUE        TRUE        TRUE\n</code></pre>\n\n<p>So, how can I get x11() available for rpy2 in a python environment?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 254, "user_id": 10194674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5XwTv.jpg?s=128&g=1", "display_name": "Tam Le", "link": "https://stackoverflow.com/users/10194674/tam-le"}, "is_accepted": false, "score": 6, "last_activity_date": 1536123449, "creation_date": 1536123449, "answer_id": 52177343, "question_id": 52086574, "link": "https://stackoverflow.com/questions/52086574/pandas-isna-and-isnull-what-is-the-difference/52177343#52177343", "title": "Pandas isna() and isnull(), what is the difference?", "body": "<p>The documentation for both is literally identical.</p>\n\n<p>pandas.isna() : <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.isna.html#pandas.isna\" rel=\"noreferrer\">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.isna.html#pandas.isna</a></p>\n\n<p>pandas.isnull() : <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.isnull.html#pandas.isnull\" rel=\"noreferrer\">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.isnull.html#pandas.isnull</a></p>\n\n<p>In here, it even says DataFrame.isnull is an alias of isna in See also section.</p>\n\n<p>pandas.DataFrame.isnull(): <a href=\"https://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.isnull.html#pandas.DataFrame.isnull\" rel=\"noreferrer\">https://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.isnull.html#pandas.DataFrame.isnull</a></p>\n\n<p>Therefore, they must be the same thing, like np.nan, np.NaN, np.NAN.</p>\n"}, {"comments": [{"owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "edited": false, "score": 4, "creation_date": 1541802382, "post_id": 52628380, "comment_id": 93354894, "body": "Is there a recommendation which to use? Is one of them just legacy?"}, {"owner": {"reputation": 1045, "user_id": 4457767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DxAX.png?s=128&g=1", "display_name": "qsantos", "link": "https://stackoverflow.com/users/4457767/qsantos"}, "reply_to_user": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "edited": false, "score": 3, "creation_date": 1541923338, "post_id": 52628380, "comment_id": 93378648, "body": "Since <code>isnull</code> is an alias for <code>isna</code>, I would tend to prefer <code>isna</code>. Indeed, <code>isna</code> seems to be used more often than <code>isnull</code>."}, {"owner": {"reputation": 820, "user_id": 2883198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acdb75129e3898b1556020c44785b16d?s=128&d=identicon&r=PG&f=1", "display_name": "Cai", "link": "https://stackoverflow.com/users/2883198/cai"}, "edited": false, "score": 10, "creation_date": 1558519297, "post_id": 52628380, "comment_id": 99125430, "body": "&quot;There should be one\u2014and preferably only one\u2014obvious way to do it.&quot;"}, {"owner": {"reputation": 2236, "user_id": 7134286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xh7AS.png?s=128&g=1", "display_name": "Ron Kalian", "link": "https://stackoverflow.com/users/7134286/ron-kalian"}, "edited": false, "score": 0, "creation_date": 1608806231, "post_id": 52628380, "comment_id": 115689761, "body": "Presumably same would apply to <code>notna</code> and <code>notnull</code>?"}, {"owner": {"reputation": 4421, "user_id": 774575, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/I2J58.png?s=128&g=1", "display_name": "mins", "link": "https://stackoverflow.com/users/774575/mins"}, "edited": false, "score": 0, "creation_date": 1611143059, "post_id": 52628380, "comment_id": 116354048, "body": "Not only we should use <code>isna</code> for clarity, but <code>isnull</code> should also be deprecated. <code>isnull</code> which returns <code>False</code> for null values indicates some grass excess during design and quality review."}], "tags": [], "owner": {"reputation": 1045, "user_id": 4457767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DxAX.png?s=128&g=1", "display_name": "qsantos", "link": "https://stackoverflow.com/users/4457767/qsantos"}, "is_accepted": true, "score": 70, "last_activity_date": 1541923365, "last_edit_date": 1541923365, "creation_date": 1538574013, "answer_id": 52628380, "question_id": 52086574, "link": "https://stackoverflow.com/questions/52086574/pandas-isna-and-isnull-what-is-the-difference/52628380#52628380", "title": "Pandas isna() and isnull(), what is the difference?", "body": "<p><code>isnull</code> is an alias for <code>isna</code>. Literally in the <a href=\"https://github.com/pandas-dev/pandas/blob/0409521665bd436a10aea7e06336066bf07ff057/pandas/core/dtypes/missing.py#L109\" rel=\"noreferrer\">code source of pandas</a>:</p>\n\n<pre><code>isnull = isna\n</code></pre>\n\n<p>Indeed:</p>\n\n<pre><code>&gt;&gt;&gt; pd.isnull\n&lt;function isna at 0x7fb4c5cefc80&gt;\n</code></pre>\n\n<p>So I would recommend using <code>isna</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1167, "user_id": 3173123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d9a147609cfe147e20ffdd26aef749?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti Prasad Pal", "link": "https://stackoverflow.com/users/3173123/jyoti-prasad-pal"}, "is_accepted": false, "score": 4, "last_activity_date": 1565858533, "creation_date": 1565858533, "answer_id": 57507051, "question_id": 52086574, "link": "https://stackoverflow.com/questions/52086574/pandas-isna-and-isnull-what-is-the-difference/57507051#57507051", "title": "Pandas isna() and isnull(), what is the difference?", "body": "<p>They both are same. As a best practice, always prefer to use <code>isna()</code> over <code>isnull()</code>. </p>\n\n<p>It is easy to remember what <code>isna()</code> is doing because when you look at numpy method <code>np.isnan()</code>, it checks <code>NaN</code> values. In pandas there are other similar method names like <code>dropna()</code>, <code>fillna()</code> that handles missing values and it always helps to remember easily.</p>\n"}], "owner": {"reputation": 1662, "user_id": 10292170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JUrO.jpg?s=128&g=1", "display_name": "ipramusinto", "link": "https://stackoverflow.com/users/10292170/ipramusinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17478, "favorite_count": 8, "accepted_answer_id": 52628380, "answer_count": 3, "score": 48, "last_activity_date": 1565858533, "creation_date": 1535579550, "last_edit_date": 1538579602, "question_id": 52086574, "link": "https://stackoverflow.com/questions/52086574/pandas-isna-and-isnull-what-is-the-difference", "title": "Pandas isna() and isnull(), what is the difference?", "body": "<p>Pandas has both <code>isna()</code> and <code>isnull()</code>. I usually use <code>isnull()</code> to detect missing values and have never met the case so that I had to use other than that.\nSo, when to use <code>isna()</code>?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1535580529, "post_id": 52086557, "comment_id": 91123722, "body": "This code just raises a <code>NameError: name &#39;create_train_test_windows&#39; is not defined</code> when I run it."}, {"owner": {"reputation": 2650, "user_id": 3005995, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/966aaa1f263ed9a5339e5d581aca85e5?s=128&d=identicon&r=PG", "display_name": "David Crook", "link": "https://stackoverflow.com/users/3005995/david-crook"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535636332, "post_id": 52086557, "comment_id": 91147346, "body": "I was slicing the code down for Stack Overflow and looks like I renamed a function without renaming the call.  Its fixed."}], "answers": [{"comments": [{"owner": {"reputation": 2547, "user_id": 2136892, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8d65df6cc1fbdbc0260ef3abf1333afc?s=128&d=identicon&r=PG&f=1", "display_name": "sundance", "link": "https://stackoverflow.com/users/2136892/sundance"}, "edited": false, "score": 0, "creation_date": 1535638791, "post_id": 52099224, "comment_id": 91149158, "body": "Is performance different if using <code>.iloc</code> to do the slicing? (I assume not)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535646203, "post_id": 52099224, "comment_id": 91153990, "body": "This makes sense. Slicing is always a tradeoff\u2014how much memory can you save by releasing the original arrays earlier vs. how much you can save by having views instead of copies. Views are the right choice more often (which is why they\u2019re the default), but by no means always, so you often do have to sit down and work through the details like you did here."}], "tags": [], "owner": {"reputation": 2650, "user_id": 3005995, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/966aaa1f263ed9a5339e5d581aca85e5?s=128&d=identicon&r=PG", "display_name": "David Crook", "link": "https://stackoverflow.com/users/3005995/david-crook"}, "is_accepted": true, "score": 1, "last_activity_date": 1535638481, "creation_date": 1535638481, "answer_id": 52099224, "question_id": 52086557, "link": "https://stackoverflow.com/questions/52086557/pandas-memory-leaks-sorting-data-frames/52099224#52099224", "title": "Pandas Memory Leaks &amp; Sorting Data Frames", "body": "<p><strong>I solved this.</strong></p>\n\n<p>In my posted code above, I am using the following to create my dataframe slices:</p>\n\n<pre><code>list_df = [df[:-(i + n)] for i in range(0, df.shape[0], slide_size * size_multiplier)]\n</code></pre>\n\n<p>This returns a reference to the original dataframe, which is being held on to and not a \"true\" copy.  Therefor when I sort, it is creating all the required indices with reference to the original dataframe required and why the memory consumption explodes.</p>\n\n<p><strong>To solve this, I am now using the following to slice my dataframe up:</strong></p>\n\n<pre><code>list_df = [df[:-(i + n)].copy() for i in range(0, df.shape[0], slide_size * size_multiplier)]\n</code></pre>\n\n<p><strong>.copy()</strong> returns a full copy with no references to the original dataframe.</p>\n\n<p><strong>Caveats</strong></p>\n\n<p>With the .copy() option, I get to a 30GB memory consumption and during sorts spike upwards of 30.3GB or so.  My execution time creating the slices is fractionally slower, but my sort speeds are significantly faster.</p>\n\n<p>Without the .copy() option, I start at about 95MB and end at about 32GB.  My slice creation is marginally faster while my sorting is exponentially slower.  It also introduces a potential caveat in that depending on how I want to sort each slice and the fact that my slices overlap, I may be un-doing work I previously did.</p>\n\n<p><strong>Summary</strong>  if you intend to do any fancy work with slices of a larger data frame, from a performance perspective it appears to be much better to copy those slices from both a memory and cpu perspective using the <strong>.copy()</strong> operator on the slice. </p>\n\n<p><strong>example:</strong> </p>\n\n<pre><code>df[1:9].copy()\n</code></pre>\n"}], "owner": {"reputation": 2650, "user_id": 3005995, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/966aaa1f263ed9a5339e5d581aca85e5?s=128&d=identicon&r=PG", "display_name": "David Crook", "link": "https://stackoverflow.com/users/3005995/david-crook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 52099224, "answer_count": 1, "score": 1, "last_activity_date": 1535638481, "creation_date": 1535579459, "last_edit_date": 1535636301, "question_id": 52086557, "link": "https://stackoverflow.com/questions/52086557/pandas-memory-leaks-sorting-data-frames", "title": "Pandas Memory Leaks &amp; Sorting Data Frames", "body": "<p>Below is some code so you can exactly reproduce the problem.  Essentially this will explode your memory from 90MB or so to excess of 5GB in a matter of seconds if you don't kill it.  With the memory consumption will also come a capped out CPU.</p>\n\n<p>The memory will also be held on to after the sorting function exits.</p>\n\n<p>I appear to only surface this issue if I start with a big master dataframe, slice it up and then do the sorting.  If I build a bunch of independent dataframes; this doesn't happen.</p>\n\n<pre><code>def test_sorting(df_list):\n    counter = 0\n    total = len(df_list)    \n    for i in range(0,total):\n        df_list[i].sort_index(inplace=True)\n\nimport pandas as pd\nimport numpy as np\nfrom math import floor\n\ndef make_master_df(rows = 250000):\n    groups = 5\n    df = pd.DataFrame(np.random.randint(0,100,size=(rows, 26)), columns=list('ABCDEFGHIJKLMNOPQRSTUVWXYZ'))\n    df[\"timestep\"] = pd.Series([floor(x / groups) for x in range(0,rows)])\n    df[\"id\"] = pd.Series([ x % groups for x in range(0,rows)])\n    df = df.set_index([\"timestep\", \"id\"]).sort_index()\n    return df\n\n\ndef create_train_test_windows(df, train_size, test_size, slide_size, include_history = True, second_index=False):\n    n = train_size + test_size\n    size_multiplier = 1\n    if(second_index):\n        size_multiplier = df.index.levels[1].size\n        n = n * size_multiplier\n    list_df = None\n    if(include_history):\n        df.sort_index(ascending=True, inplace=True)\n        list_df = [df[:-(i + n)] for i in range(0, df.shape[0], slide_size * size_multiplier)]\n        list_df.insert(0,df[:])\n        list_df = list_df[::-1]\n    else:\n        raise Exception(\"excluding history currently not supported.\") \n    list_df = [x for x in list_df if x.shape[0] &gt;= n]\n    return list_df\n\nmaster_df = make_master_df()\nlist_df = create_train_test_windows(master_df, 500, 20, 20, include_history=True, second_index=True)\n</code></pre>\n\n<p>And this will finally blow up your memory during execution and that memory will be held onto after execution is over.</p>\n\n<pre><code>test_sorting(list_df)\n</code></pre>\n\n<p><strong>NOTES:</strong></p>\n\n<p>I have noticed that each of the sliced dataframes maintained the full index level size for the first index (timesteps).</p>\n\n<p>I have forced a usage of gc.collect() on every step just to try to be aggressive about it. (didn't work at all).</p>\n\n<p>I have tested as a standalone python script and in an IPython notebook with the same results.</p>\n\n<p>My best guess is that the sliced data frames are not in fact a proper slice; they are bringing a fair amount of baggage with them which is referenced somewhere else.</p>\n\n<p>Any Insights/Assistance is greatly appreciated!</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1535582043, "post_id": 52086550, "comment_id": 91124159, "body": "I think the link pretty well covers the options.  There&#39;s nothing built into <code>argparse</code> that does this kind of cross checking.  I prefer the post-parsing testing option.  But also consider - what kind of <code>help</code> do you want to provide?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1535582585, "post_id": 52086550, "comment_id": 91124307, "body": "I might add that if you don&#39;t need the &#39;-c&#39; flag, you could use the subparsers mechanism.  &#39;stop&#39; could then be a subparser without any added arguments, &#39;start&#39; one with 2 required arguments."}, {"owner": {"reputation": 953, "user_id": 5854343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/erVBq.jpg?s=128&g=1", "display_name": "Bobby Durrett", "link": "https://stackoverflow.com/users/5854343/bobby-durrett"}, "edited": false, "score": 1, "creation_date": 1535584829, "post_id": 52086550, "comment_id": 91124893, "body": "In the link you mentioned the best answer talks about looking at sys.argv. That makes sense to me. Forget about argparse at first and just check for -c and stop or start in argv. Then use argparse based on what you found in sys.argv. Or just forget argparse and handle sys.argv yourself. Seems simpler to me."}, {"owner": {"reputation": 41, "user_id": 5909205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8433678106c3b18b7a438b823530a40?s=128&d=identicon&r=PG&f=1", "display_name": "Boyang", "link": "https://stackoverflow.com/users/5909205/boyang"}, "edited": false, "score": 0, "creation_date": 1535654041, "post_id": 52086550, "comment_id": 91157682, "body": "Thank you for the comments"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5909205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8433678106c3b18b7a438b823530a40?s=128&d=identicon&r=PG&f=1", "display_name": "Boyang", "link": "https://stackoverflow.com/users/5909205/boyang"}, "edited": false, "score": 0, "creation_date": 1535653971, "post_id": 52087110, "comment_id": 91157650, "body": "Thank you for the suggestion"}], "tags": [], "owner": {"reputation": 3055, "user_id": 735893, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5970da463301e1fb98b1b524c633b0f9?s=128&d=identicon&r=PG", "display_name": "Vader", "link": "https://stackoverflow.com/users/735893/vader"}, "is_accepted": false, "score": 5, "last_activity_date": 1535585157, "last_edit_date": 1535585157, "creation_date": 1535583109, "answer_id": 52087110, "question_id": 52086550, "link": "https://stackoverflow.com/questions/52086550/python-argparse-conditionally-required-arguments-based-on-the-value-of-another/52087110#52087110", "title": "Python Argparse - conditionally required arguments based on the value of another argument", "body": "<p>I think you can use two parsers to do that:</p>\n\n<pre><code>import argparse\n\nif __name__ == '__main__':\n    command_parser = argparse.ArgumentParser()\n    command_parser.add_argument('-c', '--command', required=True,\n                                help='provide a valid command: start, stop, restart, or status')\n\n    if command_parser.parse_known_args()[0].command.lower().startswith('start'):\n        option_parser = argparse.ArgumentParser()\n        option_parser.add_argument('-d', '--download', required=True, help='set account download folder')\n        option_parser.add_argument('-j', '--input', required=True, help='set input json file')\n        option_parser.parse_known_args()\n</code></pre>\n\n<p>or you can use a subparser, which is probably better in your case:</p>\n\n<pre><code>import argparse\n\nif __name__ == '__main__':\n    command_parser = argparse.ArgumentParser()\n\n    subparsers = command_parser.add_subparsers(help='Choose a command')\n\n    start_parser = subparsers.add_parser('start', help='\"start\" help')\n    start_parser.add_argument('-d', '--download', required=True, help='set account download folder')\n    start_parser.add_argument('-j', '--input', required=True, help='set input json file')\n    start_parser.set_defaults(action=lambda: 'start')\n\n    stop_parser = subparsers.add_parser('stop', help='\"stop\" help')\n    stop_parser.set_defaults(action=lambda: 'stop')\n\n    command_parser.parse_args()\n</code></pre>\n\n<p>in this case command line syntax will be bit different:</p>\n\n<pre><code>python3 test.py start -d /mydownloadfolder/ -j /myconfig.json\n\npython3 test.py stop\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5909205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8433678106c3b18b7a438b823530a40?s=128&d=identicon&r=PG&f=1", "display_name": "Boyang", "link": "https://stackoverflow.com/users/5909205/boyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3117, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535585157, "creation_date": 1535579434, "last_edit_date": 1535580275, "question_id": 52086550, "link": "https://stackoverflow.com/questions/52086550/python-argparse-conditionally-required-arguments-based-on-the-value-of-another", "title": "Python Argparse - conditionally required arguments based on the value of another argument", "body": "<p>I am trying to write a daemon service, which can be controlled in the command line. For example, to start the service</p>\n\n<p><code>python3 test.py -c start -d /mydownloadfolder/ -j /myconfig.json</code></p>\n\n<p>to stop the service, </p>\n\n<p><code>python3 test.py -c stop</code></p>\n\n<p>The <code>-d</code> <code>-j</code> parameters are required only when I start the service. Therefore, I need to implement conditionally required arguments based on the value of another argument.</p>\n\n<p>I did some search and found this useful post <a href=\"https://stackoverflow.com/questions/25626109/python-argparse-conditionally-required-arguments\">Python Argparse conditionally required arguments</a>\nThe difference is: instead of checking the existence of '--command', I need to check the value of the '--command'. </p>\n\n<p>Here is my tentative solution:</p>\n\n<pre><code>PARSER.add_argument('-c', '--command', required=True, help='provide a valid command: start, stop, restart, or status')\nNEED_MORE_ARGS = PARSER.parse_args().command.lower().startswith('start')\nPARSER.add_argument('-d', '--download', required=NEED_MORE_ARGS , default=LOCAL_DOWNLOAD, help='set account download folder')\nPARSER.add_argument('-j', '--input',  required=NEED_MORE_ARGS, default=JSON_INPUT, help='set input json file')\n</code></pre>\n\n<p>I parsed the args in the middle to get NEED_MORE_ARGS(boolean), and then add other args. The code seems not clean. Is there a better way to do this?</p>\n\n<p>==============</p>\n\n<p>Updated: The tentative solution does not work. :(</p>\n"}, {"tags": ["python", "indexing", "argmax"], "owner": {"reputation": 43, "user_id": 9623424, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/9623424/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535579064, "creation_date": 1535579064, "question_id": 52086486, "link": "https://stackoverflow.com/questions/52086486/how-can-use-index-in-tensorflow", "title": "How can use index in tensorflow?", "body": "<p>I have three 2-dim tensor in the training.\nI made like this below, but I get an error</p>\n\n<blockquote>\n  <p>Cannot convert an unknown Dimension to a Tensor: ?</p>\n</blockquote>\n\n<pre><code>mu = params[:, :self.num_mixture]\nsigma = params[:, self.num_mixture:self.num_mixture * 2]\nalpha = params[:, self.num_mixture * 2:self.num_mixture * 3]\nmax_alpha = tf.cast(tf.argmax(alpha, axis=1 ), 'int32')\n\nmu = tf.gather_nd(mu,tf.stack([tf.range(max_alpha.shape[0])[...,tf.newaxis], mu[...,tf.newaxis]], axis=2))\nsigma = tf.gather_nd(sigma,tf.stack([tf.range(max_alpha.shape[0])[...,tf.newaxis], sigma[...,tf.newaxis]], axis=2))\n</code></pre>\n\n<p>How can I fix it? </p>\n"}, {"tags": ["python", "pandas", "dask"], "comments": [{"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "edited": false, "score": 0, "creation_date": 1535584510, "post_id": 52086462, "comment_id": 91124812, "body": "It sounds like you want to start with group-by on the sample column. Regular SO users will suggest that you should try something first, because &quot;why does this code behave the way it does&quot; is much easier to answer than &quot;how do I...&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 0, "last_activity_date": 1535893600, "creation_date": 1535893600, "answer_id": 52137331, "question_id": 52086462, "link": "https://stackoverflow.com/questions/52086462/mutliindex-dask-dataframe-to-2d-dask-array/52137331#52137331", "title": "mutliindex dask dataframe to 2d dask array", "body": "<p>Something like the following might work:</p>\n\n<pre><code>df = dd.read_csv('*.csv')\ndf = df.categorize()\ndf = df.get_dummies()\nx = df.values\n</code></pre>\n\n<p>This isn't tested though, so you'll probably run into issues.  I recommend trying this first with Pandas and providing an <a href=\"https://stackoverflow.com/help/mcve\">mcve</a> for future questions.</p>\n"}], "owner": {"reputation": 13, "user_id": 10292183, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kz-ZQ4C4eZU/AAAAAAAAAAI/AAAAAAAAE3w/2adCRYtgU2I/photo.jpg?sz=128", "display_name": "Jack Michuda", "link": "https://stackoverflow.com/users/10292183/jack-michuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 52137331, "answer_count": 1, "score": 0, "last_activity_date": 1535893600, "creation_date": 1535578950, "question_id": 52086462, "link": "https://stackoverflow.com/questions/52086462/mutliindex-dask-dataframe-to-2d-dask-array", "title": "mutliindex dask dataframe to 2d dask array", "body": "<p>I have <code>n</code> CSVs that each have an identical format (same <code>k</code> number of features). I'm hoping to construct a 2d dask array <code>n</code> sample by <code>k</code> features dask array for PCA, model building, etc. </p>\n\n<p>I read them into a dask dataframe using dd.read_csv(\"*_all_csvs.csv\"), at which point my dask dataframe is basically just <code>sample</code>, <code>feature</code>, <code>feature_value</code>. Is there an efficient way to convert the multi-indexed dataframe to a 2d dask array of <code>n</code> samples by <code>k</code> features?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 123, "user_id": 2337857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e1f8982cb47521d4faee6f9a984885?s=128&d=identicon&r=PG", "display_name": "user2337857", "link": "https://stackoverflow.com/users/2337857/user2337857"}, "edited": false, "score": 0, "creation_date": 1535580073, "post_id": 52086420, "comment_id": 91123597, "body": "After some googling, my noob intuition tells me that it might be related to deep and shallow copies. If z_shallow = x.copy(deep=False) then changes to z_shallow also changes x. While z_deep = x.copy(deep=True) does not modify the original x. However, still not 100% sure how the .iloc is related to deep and shallow copies. Anybody?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1535580235, "post_id": 52086420, "comment_id": 91123641, "body": "Simple assignment, <code>x = &lt;something&gt;</code> <b>never copies</b> and simply says &quot;the name <code>x</code> now refers to &lt;some-object&gt;&quot;. Read <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1535580310, "post_id": 52086420, "comment_id": 91123663, "body": "<code>y = x.iloc[:,:]</code> assigns a <i>view</i> of <code>x</code> to <code>y</code>, not a copy at all. So when you mutate <code>y</code>, you will see this effect on <code>x</code>. However, doing <code>y = 123</code> is <b>not a mutation</b>, it simply assigns <code>y</code> to another object."}, {"owner": {"reputation": 123, "user_id": 2337857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e1f8982cb47521d4faee6f9a984885?s=128&d=identicon&r=PG", "display_name": "user2337857", "link": "https://stackoverflow.com/users/2337857/user2337857"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1535580661, "post_id": 52086420, "comment_id": 91123757, "body": "Thank you for explaining. Thus the problem came from the fact that initially y was a view on x.iloc and then we did a mutation (versus a different new assignment)?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1535580721, "post_id": 52086420, "comment_id": 91123777, "body": "Read this link: <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a> for how assignment works in Python."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1535580878, "post_id": 52086420, "comment_id": 91123836, "body": "Note, slicing generally returns <i>copies</i> for built-in python objects, e.g. with <code>list</code> objects. However, <code>numpy</code> and <code>pandas</code> objects will return views if possible"}], "answers": [{"tags": [], "owner": {"reputation": 1662, "user_id": 10292170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JUrO.jpg?s=128&g=1", "display_name": "ipramusinto", "link": "https://stackoverflow.com/users/10292170/ipramusinto"}, "is_accepted": true, "score": 2, "last_activity_date": 1535580895, "creation_date": 1535580895, "answer_id": 52086802, "question_id": 52086420, "link": "https://stackoverflow.com/questions/52086420/assigning-pandas-df-slice-via-iloc-is-by-reference/52086802#52086802", "title": "assigning pandas df slice via iloc is by reference?", "body": "<p>This might answer your question:\n<a href=\"https://stackoverflow.com/questions/27673231/why-should-i-make-a-copy-of-a-data-frame-in-pandas\">why should I make a copy of a data frame in pandas</a></p>\n\n<p>'In Pandas, indexing a DataFrame returns a reference to the initial DataFrame'</p>\n"}], "owner": {"reputation": 123, "user_id": 2337857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e1f8982cb47521d4faee6f9a984885?s=128&d=identicon&r=PG", "display_name": "user2337857", "link": "https://stackoverflow.com/users/2337857/user2337857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 1, "accepted_answer_id": 52086802, "answer_count": 1, "score": 1, "last_activity_date": 1535580895, "creation_date": 1535578693, "last_edit_date": 1535579933, "question_id": 52086420, "link": "https://stackoverflow.com/questions/52086420/assigning-pandas-df-slice-via-iloc-is-by-reference", "title": "assigning pandas df slice via iloc is by reference?", "body": "<p>I'm a new user of python and pandas, and I don't understand how assigning a slice of a pandas df1 to another df2 via the iloc \"slicer\", copies the data from df1 via reference. </p>\n\n<p>The example code below illustrates my problem. If I use the assignment <code>y = 123</code>, then x stays unchanged. However, if I modify <code>y.iloc[:,:]</code> then by \"magic\" also x changes. Is <code>y.iloc</code> a pointer to x? if <code>y.iloc</code> is a pointer to x, then why does x stay unchanged if I modify y directly via assignment <code>y = 123</code>? </p>\n\n<pre><code>d = {'col1': [5]}\nx = pd.DataFrame(data=d)\nprint('x equals')\nprint(x)\ny = x.iloc[:,:]\nprint('y equals')\nprint(y)\n\n#why does the y.iloc[:,:]=123 also modify x?\ny.iloc[0,0] = 123 \n#y = 123 #this way x is unchanged.\n\nprint('y equals')\nprint(y)\nprint('x equals')\nprint(x)\n</code></pre>\n"}, {"tags": ["python", "logging", "celery"], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 6562325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X2uEeOzaSfs/AAAAAAAAAAI/AAAAAAAAAD0/LMZNuy3lYVw/photo.jpg?sz=128", "display_name": "Aditya Patel", "link": "https://stackoverflow.com/users/6562325/aditya-patel"}, "edited": false, "score": 0, "creation_date": 1535635638, "post_id": 52094938, "comment_id": 91146846, "body": "Certainly, I just have a quick question. How may I pass that logger to the run_task() method?"}, {"owner": {"reputation": 3093, "user_id": 1741053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qhvrB.jpg?s=128&g=1", "display_name": "Bjorn Stiel", "link": "https://stackoverflow.com/users/1741053/bjorn-stiel"}, "reply_to_user": {"reputation": 128, "user_id": 6562325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X2uEeOzaSfs/AAAAAAAAAAI/AAAAAAAAAD0/LMZNuy3lYVw/photo.jpg?sz=128", "display_name": "Aditya Patel", "link": "https://stackoverflow.com/users/6562325/aditya-patel"}, "edited": false, "score": 0, "creation_date": 1535635848, "post_id": 52094938, "comment_id": 91146982, "body": "You don&#39;t need to. What you do for your tasks, is this:       <code>from celery.utils.log import get_task_logger      logger = get_task_logger(__name__)</code>  and then use <code>logger</code> in your task"}, {"owner": {"reputation": 128, "user_id": 6562325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X2uEeOzaSfs/AAAAAAAAAAI/AAAAAAAAAD0/LMZNuy3lYVw/photo.jpg?sz=128", "display_name": "Aditya Patel", "link": "https://stackoverflow.com/users/6562325/aditya-patel"}, "edited": false, "score": 0, "creation_date": 1535644120, "post_id": 52094938, "comment_id": 91152717, "body": "I just what I wrote to test but Im not getting logs, did I do something incorrectly? Also, Timber.io is very new and might not support celery loggers which could be a possible scenario"}], "tags": [], "owner": {"reputation": 3093, "user_id": 1741053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qhvrB.jpg?s=128&g=1", "display_name": "Bjorn Stiel", "link": "https://stackoverflow.com/users/1741053/bjorn-stiel"}, "is_accepted": true, "score": 4, "last_activity_date": 1535821464, "last_edit_date": 1535821464, "creation_date": 1535625407, "answer_id": 52094938, "question_id": 52086417, "link": "https://stackoverflow.com/questions/52086417/assistance-with-celery-logging/52094938#52094938", "title": "Assistance with Celery Logging", "body": "<p>Can you try this?</p>\n\n<pre><code>import logging\nimport os\nimport sys\nfrom celery import Celery\nfrom celery.signals import after_setup_logger\n\napp = Celery('app')\napp.conf.update({\n    'broker_url': 'filesystem://',\n    'broker_transport_options': {\n        'data_folder_in': './broker/out',\n        'data_folder_out': './broker/out',\n        'data_folder_processed': './broker/processed'\n    },\n    'result_persistent': False,\n    'task_serializer': 'json',\n    'result_serializer': 'json',\n    'accept_content': ['json']})\n\n\nlogger = logging.getLogger(__name__)\n\n\nfor f in ['./broker/out', './broker/processed']:\n    if not os.path.exists(f):\n        os.makedirs(f)\n\n@after_setup_logger.connect\ndef setup_loggers(logger, *args, **kwargs):\n    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')\n\n    # add filehandler\n    fh = logging.FileHandler('logs.log')\n    fh.setLevel(logging.DEBUG)\n    fh.setFormatter(formatter)\n    logger.addHandler(fh)\n\n\n@app.task()\ndef add(x, y):\n    logger.info('Found addition')\n    logger.info('Added {0} and {1} to result, '.format(x,y))\n    return x+y\n\n\nif __name__ == '__main__':\n    task = add.s(x=2, y=3).delay()\n</code></pre>\n\n<p>Start the worker like this:</p>\n\n<pre><code>celery worker --app=app.app --concurrency=1 --loglevel=INFO\n</code></pre>\n\n<p>And kick off the task asynchronously:</p>\n\n<pre><code>python app.py\n</code></pre>\n\n<p>I've changed it so it's a stand-alone script that just uses the filesystem as a message broker (also, I've deliberately replaced the timber.io handler with a filehandler).</p>\n\n<p>This writes the logs to <code>logs.log</code> (replace the filehandler with the timber.io handler and that should solve your issue).</p>\n\n<p>I had a bit of a hard time as the I couldn't get it working with <code>worker_hijack_root_logger=False</code> and a custom logger defined in <code>setup_logging</code>. </p>\n\n<p>However, after revisiting the docs, I came to the conclusion it's a better option to not override the logger but just augment it:</p>\n\n<blockquote>\n  <p>If you\u2019d like to augment the logging configuration setup by Celery\n  then you can use the after_setup_logger and after_setup_task_logger\n  signals.</p>\n</blockquote>\n\n<p>See also: <a href=\"http://docs.celeryproject.org/en/latest/userguide/signals.html#after-setup-logger\" rel=\"nofollow noreferrer\">http://docs.celeryproject.org/en/latest/userguide/signals.html#after-setup-logger</a></p>\n"}], "owner": {"reputation": 128, "user_id": 6562325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X2uEeOzaSfs/AAAAAAAAAAI/AAAAAAAAAD0/LMZNuy3lYVw/photo.jpg?sz=128", "display_name": "Aditya Patel", "link": "https://stackoverflow.com/users/6562325/aditya-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2686, "favorite_count": 2, "accepted_answer_id": 52094938, "answer_count": 1, "score": 4, "last_activity_date": 1535821464, "creation_date": 1535578676, "last_edit_date": 1535594293, "question_id": 52086417, "link": "https://stackoverflow.com/questions/52086417/assistance-with-celery-logging", "title": "Assistance with Celery Logging", "body": "<p>So Celery is a super great library but its documentation for the logging section isn't the best, which bring me here to request for assistance.</p>\n\n<p>My Script as of now is as so (well in summary):</p>\n\n<pre><code>import logging\nfrom celery import Celery\nfrom celery.utils.log import get_logger\nfrom task import process\nimport config\n\nlogger = get_logger(__name__)\ntimber_handler = timber.TimberHandler(api_key=config.key,\n                                  level=logging.INFO)\nlogger.addHandler(timber_handler)\n\n\n\napp = Celery('task',\n             broker=config.url,\n             backend='rpc://')\n\n@app.task\ndef run_task():\n    status = get_status() # get alive or dead status\n    if status == 1:\n        logger.info(\"Task is running\")\n        process()\n\n\n@app.on_after_configure.connect\ndef task_periodic(**kwargs):\n    app.add_periodic_task(2.0, run_task.s(), name=\"Run Constantly\")\n    # More tasks\n</code></pre>\n\n<p>The process function in the tasks.py file is very basic function hitting up APIs and DBs for some info and I want to be able to log that to a logger (timber.io) which attaches to the python logging library and is an online storage for logs. </p>\n\n<p>However, my major issue is that the logs are getting sent to stdout and not to the timber logs. I have looked at celery.signals but the documentation isn't great. Any assistance here would be greatly appreciated. Thank you.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535579085, "post_id": 52086416, "comment_id": 91123298, "body": "Is there a good reason not to use the <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\"><code>csv</code></a> module in the standard library here (or maybe a third-party library like Pandas)? You <i>can</i> write your own code that parses and builds CSV rows and gets all the quoting/escaping/etc. right, but why do you want to?"}, {"owner": {"reputation": 55264, "user_id": 1258041, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2593c44c42429c503d2e5e9e307e241?s=128&d=identicon&r=PG", "display_name": "Lev Levitsky", "link": "https://stackoverflow.com/users/1258041/lev-levitsky"}, "edited": false, "score": 0, "creation_date": 1535579161, "post_id": 52086416, "comment_id": 91123321, "body": "You should definitely look into using <code>csv</code> to both read <code>infile</code> and write <code>outfile</code>."}, {"owner": {"reputation": 93, "user_id": 9885825, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chuck Slayton", "link": "https://stackoverflow.com/users/9885825/chuck-slayton"}, "edited": false, "score": 0, "creation_date": 1535579267, "post_id": 52086416, "comment_id": 91123347, "body": "Yes, I&#39;m using csv for other scripts.  I&#39;ll look into it."}, {"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1535579631, "post_id": 52086416, "comment_id": 91123453, "body": "If your fields don&#39;t contain embedded commasand you can do a simple split on <code>line</code>, you might even be able to get away with <code>print(*line.split(), sep=&#39;,&#39;, file=fh)</code> instead of <code>fh.write(line)</code> but using a <code>csv.writer</code> is definitely more robust."}, {"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1535579717, "post_id": 52086416, "comment_id": 91123489, "body": "and to note: <code>if line.startswith(&#39;*&#39;) or line.startswith(&#39;+&#39;)</code> can be written as <code>if line.startswith((&#39;*&#39;, &#39;+&#39;))</code>... (or <code>if line.startswith(tuple(&#39;*+&#39;))</code>...)"}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1535654680, "post_id": 52086416, "comment_id": 91157983, "body": "Please don&#39;t change your question to ask a different question - just ask a new question."}], "answers": [{"tags": [], "owner": {"reputation": 10051, "user_id": 6031995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KAcWh.png?s=128&g=1", "display_name": "Kenan", "link": "https://stackoverflow.com/users/6031995/kenan"}, "is_accepted": false, "score": 0, "last_activity_date": 1535593437, "creation_date": 1535593437, "answer_id": 52088141, "question_id": 52086416, "link": "https://stackoverflow.com/questions/52086416/write-lines-from-text-file-into-csv-file/52088141#52088141", "title": "Write lines from text file into .csv file", "body": "<p>Pandas can do this well</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv('c:/sw_mac_addr/mycsv.csv', sep=',')\ndf.to_csv('c:/sw_mac_addr/test.txt')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "is_accepted": false, "score": 0, "last_activity_date": 1535715826, "creation_date": 1535715826, "answer_id": 52114766, "question_id": 52086416, "link": "https://stackoverflow.com/questions/52086416/write-lines-from-text-file-into-csv-file/52114766#52114766", "title": "Write lines from text file into .csv file", "body": "<pre><code>import os\npath = './text/'\n# open this file for writing\nwith open(\"sw_mac_addr.csv\", \"w+\") as fh:\n    print('Switch Name', 'Port', 'mac addr', 'vlan', sep=\",\", file=fh)\n    # get data from all files in the path\n    for filename in os.listdir(path):\n        with open(os.path.join(path,filename), \"r\") as infile:\n            for line in infile:\n                if line.startswith('*') or line.startswith('+'):\n                    # if you want to get rid of the * and +, uncomment the following code\n                    # line = line.replace(\"*\",\"\").replace(\"+\",\"\")\n                    line = \",\".join(line.split()) + \"\\n\"\n                    fh.write(line)\n                    print(line)\n</code></pre>\n\n<p>output (both on console and csv file):</p>\n\n<pre><code>*,51,0000.0c9f.f033,static,0,F,F,sup-eth2\n\n*,51,0000.0c9f.f033,static,0,F,F,sup-eth2\n\n*,51,0000.0c9f.f033,static,0,F,F,sup-eth2\n</code></pre>\n\n<p>output with uncommented line of code (line = line.replace(\"*\";\"\").replace(\"+\",\"\")</p>\n\n<pre><code>51,0000.0c9f.f033,static,0,F,F,sup-eth2\n\n51,0000.0c9f.f033,static,0,F,F,sup-eth2\n\n51,0000.0c9f.f033,static,0,F,F,sup-eth2\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9885825, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chuck Slayton", "link": "https://stackoverflow.com/users/9885825/chuck-slayton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1535715826, "creation_date": 1535578652, "last_edit_date": 1535654607, "question_id": 52086416, "link": "https://stackoverflow.com/questions/52086416/write-lines-from-text-file-into-csv-file", "title": "Write lines from text file into .csv file", "body": "<p>I have the following code that creates a csv file (sw_mac_addr.csv).  Right now it writes each line that I want.  I need it to separate the values with a comma (,).</p>\n\n<p>a single line from the infile looks like this:\n<code>\n* 51       0000.0c9f.f033    static    0          F    F  sup-eth2\n</code></p>\n\n<p>I want it to appear in the csv file like this:\n<code>\n51,0000.0c9f.f033,sup-eth2\n</code></p>\n\n<pre><code>import os\npath = 'c:/sw_mac_addr/'\nfh = open(\"C:/Users/cslayton2/Documents/sw_mac_addr.csv\", \"w+\")\nprint('Switch Name', 'Port', 'mac addr', 'vlan', sep=\",\", file=fh)\n\nfor filename in os.listdir(path):\n    with open(os.path.join(path,filename), \"r\") as infile:\n        for line in infile:\n            if line.startswith('*') or line.startswith('+'):\n                fh.write(line)\nfh.close()\n</code></pre>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 2, "creation_date": 1535578696, "post_id": 52086363, "comment_id": 91123163, "body": "You are trying to print <code>check_key</code> only in the case that it does not exist..."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1535578726, "creation_date": 1535578726, "answer_id": 52086426, "question_id": 52086363, "link": "https://stackoverflow.com/questions/52086363/parse-json-if-a-certain-value-exists/52086426#52086426", "title": "Parse Json if a certain value exists", "body": "<blockquote>\n  <p>I need to parse \"order\" from below JSON , if only value of \"success\" = 'true' , else raise an exception.</p>\n</blockquote>\n\n<p>There's no function that will automatically raise an exception if a value is False; you need to write that yourself.</p>\n\n<p>But it's dead easy:</p>\n\n<pre><code>check_key = data.get('success')\nif not check_key:\n    raise MyKindOfError(f'response success was {check_key}')\ndo_stuff(data['order'])\n</code></pre>\n\n<p>(You don't actually need to use <code>get</code> there; you <em>could</em> let <code>data['success']</code> raise a <code>KeyError</code> if it's not present, and then separately check the value for falsiness and raise your own error. But I assume you probably want to handle a missing <code>success</code> the same way as <code>false</code>, and the error you want to raise probably isn't <code>KeyError</code>, in which case this is simpler.)</p>\n\n<hr>\n\n<p>As a side note, <em>you've already parsed the JSON at this point</em>. What you have is a <code>dict</code>. </p>\n\n<p>The fact that it originally came from parsing JSON doesn't make any difference; it's a plain old Python <code>dict</code>, with all the same methods, etc., as any other <code>dict</code>. So, it really isn't helpful to think of \"how do I \u2026 with JSON \u2026\"; that just misleads you into forgetting about how easy <code>dict</code>s are to use.</p>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535578977, "post_id": 52086440, "comment_id": 91123258, "body": "You probably don&#39;t want to test <code>== False</code>, unless you really need to make sure that other falsey values (like <code>None</code>) are not treated as false, while at the same time making sure that really weird objects that are not <code>False</code> but define a <code>__eq__</code> that claims to be equal to it <i>are</i> treated as false."}], "tags": [], "owner": {"reputation": 351, "user_id": 5327169, "user_type": "registered", "profile_image": "https://graph.facebook.com/1187474291269110/picture?type=large", "display_name": "Rigoberto Ramirez Cruz", "link": "https://stackoverflow.com/users/5327169/rigoberto-ramirez-cruz"}, "is_accepted": true, "score": 1, "last_activity_date": 1535579200, "last_edit_date": 1535579200, "creation_date": 1535578817, "answer_id": 52086440, "question_id": 52086363, "link": "https://stackoverflow.com/questions/52086363/parse-json-if-a-certain-value-exists/52086440#52086440", "title": "Parse Json if a certain value exists", "body": "<p>You should evaluate data['success'] in a condition, whether it is false, then you raise your exception.</p>\n\n<pre><code>import json\n\ndata = json.load(open('data.json'))\n\nif data['success'] is not True:\n  raise Exception(\"Success is false\")\n\norder = data['order']\nprint(order)\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 5290692, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/479f2919b4bda952f58afcb61251a6f3?s=128&d=identicon&r=PG&f=1", "display_name": "rkj", "link": "https://stackoverflow.com/users/5290692/rkj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 52086440, "answer_count": 2, "score": -1, "last_activity_date": 1535579200, "creation_date": 1535578383, "question_id": 52086363, "link": "https://stackoverflow.com/questions/52086363/parse-json-if-a-certain-value-exists", "title": "Parse Json if a certain value exists", "body": "<p>I need to parse \"order\" from below JSON , if only value of \"success\" = 'true' , else raise an exception.</p>\n\n<p>Tried below, but not sure how to include the 'true' check in try:</p>\n\n<pre><code>{  \n   \"success\":true,\n   \"order\":\"123345\"\n} \n</code></pre>\n\n<p>below is the code , I am trying , which is not giving any result from print as well.</p>\n\n<pre><code>import json\nfrom pprint import pprint\n\n\ndata = json.load(open('data.json'))\n#pprint(data)\n\ntry:\n    check_key = data['success']\nexcept KeyError:\n    #continue\n    print(check_key)\n   #print(data['order'])\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 915, "user_id": 6569803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ec911c8581d51827067b7bf0bcf7c368?s=128&d=identicon&r=PG&f=1", "display_name": "antonioACR1", "link": "https://stackoverflow.com/users/6569803/antonioacr1"}, "edited": false, "score": 1, "creation_date": 1535578317, "post_id": 52086301, "comment_id": 91123023, "body": "What about <code>c=pd.concat([a,b],axis=1).transpose()</code>?"}, {"owner": {"reputation": 3581, "user_id": 742172, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09f8e52a0e6ebe8bdf8e9f56be396ea7?s=128&d=identicon&r=PG", "display_name": "SamFisher83", "link": "https://stackoverflow.com/users/742172/samfisher83"}, "reply_to_user": {"reputation": 915, "user_id": 6569803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ec911c8581d51827067b7bf0bcf7c368?s=128&d=identicon&r=PG&f=1", "display_name": "antonioACR1", "link": "https://stackoverflow.com/users/6569803/antonioacr1"}, "edited": false, "score": 0, "creation_date": 1535578439, "post_id": 52086301, "comment_id": 91123065, "body": "@user322778 That seems to work."}], "answers": [{"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 1, "last_activity_date": 1535578938, "last_edit_date": 1535578938, "creation_date": 1535578394, "answer_id": 52086364, "question_id": 52086301, "link": "https://stackoverflow.com/questions/52086301/how-do-you-concatenate-two-single-rows-in-pandas/52086364#52086364", "title": "How do you concatenate two single rows in pandas?", "body": "<p>Since you are slicing by <code>index</code> I'd use <code>.iloc</code> and then notice the difference between <code>[[]]</code> and <code>[]</code> which return a <code>DataFrame</code> and <code>Series</code>*</p>\n\n<pre><code>a = x.iloc[[0]]\nb = x.iloc[[1]]\n\npd.concat([a, b])\n#   A  B  C\n#0  1  2  3\n#1  1  2  3\n</code></pre>\n\n<p>To still use <code>.loc</code>, you'd do something like</p>\n\n<pre><code>a = x.loc[[0,]]\nb = x.loc[[1,]]\n</code></pre>\n\n<p>*There's a small caveat that if index 0 is duplicated in <code>x</code> then <code>x.loc[0,:]</code> will return a <code>DataFrame</code> and not a <code>Series</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 2, "last_activity_date": 1535578564, "creation_date": 1535578564, "answer_id": 52086403, "question_id": 52086301, "link": "https://stackoverflow.com/questions/52086301/how-do-you-concatenate-two-single-rows-in-pandas/52086403#52086403", "title": "How do you concatenate two single rows in pandas?", "body": "<p>If you want to concat two series vertically (vertical stacking), then one option is a <code>concat</code> and transpose.</p>\n\n<p>Another is using <code>np.vstack</code>:</p>\n\n<pre><code>pd.DataFrame(np.vstack([a, b]), columns=a.index)\n\n   A  B  C\n0  1  2  3\n1  1  2  3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "is_accepted": false, "score": 2, "last_activity_date": 1535579463, "creation_date": 1535579463, "answer_id": 52086558, "question_id": 52086301, "link": "https://stackoverflow.com/questions/52086301/how-do-you-concatenate-two-single-rows-in-pandas/52086558#52086558", "title": "How do you concatenate two single rows in pandas?", "body": "<p>It looks like you want to make a new dataframe from a collection of records. There's a method for that:</p>\n\n<pre><code>import pandas as pd\nx = pd.DataFrame([[1,2,3],[1,2,3]], columns=[\"A\",\"B\",\"C\"])\na = x.loc[0,:]\nb = x.loc[1,:]\nc = pd.DataFrame.from_records([a, b])\nprint(c)\n#    A  B  C\n# 0  1  2  3\n# 1  1  2  3\n</code></pre>\n"}], "owner": {"reputation": 3581, "user_id": 742172, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09f8e52a0e6ebe8bdf8e9f56be396ea7?s=128&d=identicon&r=PG", "display_name": "SamFisher83", "link": "https://stackoverflow.com/users/742172/samfisher83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1535579463, "creation_date": 1535578050, "question_id": 52086301, "link": "https://stackoverflow.com/questions/52086301/how-do-you-concatenate-two-single-rows-in-pandas", "title": "How do you concatenate two single rows in pandas?", "body": "<p>I am trying to select a bunch of single rows in bunch of dataframes and trying to make a new data frame by concatenating them together.</p>\n\n<p>Here is a simple example</p>\n\n<pre><code>x=pd.DataFrame([[1,2,3],[1,2,3]],columns=[\"A\",\"B\",\"C\"])\n\n   A  B  C\n0  1  2  3\n1  1  2  3\n\n\na=x.loc[0,:]\n\nA    1\nB    2\nC    3\nName: 0, dtype: int64\n\nb=x.loc[1,:]\nA    1\nB    2\nC    3\nName: 1, dtype: int64\n\nc=pd.concat([a,b])\n\nI end up with this:\n\nA    1\nB    2\nC    3\nA    1\nB    2\nC    3\nName: 0, dtype: int64\n</code></pre>\n\n<p>Whearas I would expect the original data frame:</p>\n\n<pre><code>   A  B  C\n0  1  2  3\n1  1  2  3\n</code></pre>\n\n<p>I can get the values and create a new dataframe, but this doesn't seem like the way to do it.</p>\n"}, {"tags": ["python", "newline", "concat", "string-concatenation"], "comments": [{"owner": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 0, "creation_date": 1535578738, "post_id": 52086283, "comment_id": 91123172, "body": "Can you clarify &quot;combine columns that end in a newline with the column to the right&quot;? Can you show us a sample of the CSV?"}, {"owner": {"reputation": 1164, "user_id": 3219777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfa7dfb0b54aa7052f991f85cd534e3?s=128&d=identicon&r=PG&f=1", "display_name": "Askold Ilvento", "link": "https://stackoverflow.com/users/3219777/askold-ilvento"}, "edited": false, "score": 0, "creation_date": 1535579586, "post_id": 52086283, "comment_id": 91123441, "body": "Fixing such .csv looks like a simple task. You can just replace \\&#39;    &#39; with nothing. Or if don&#39;t know the number of space, you may use regexp &#39;\\ +&#39;. I would preprocess a file using sed or just do the replacement in a gui text editor that supports regexp, instead of using python."}], "answers": [{"tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": false, "score": 1, "last_activity_date": 1535580062, "creation_date": 1535580062, "answer_id": 52086655, "question_id": 52086283, "link": "https://stackoverflow.com/questions/52086283/python-concatenate-columns-based-on/52086655#52086655", "title": "Python: Concatenate columns based on &quot;\\&quot;", "body": "<p><strong>Step 1:</strong>\nFirst you need to extract the column <code>'D'</code> which has been split up and put at the end of non-empty values for each row. Additionally each of the values from <code>'D'</code> should be removed from their current positions. You can do this with a loop like this:</p>\n\n<pre><code>import pandas as pd\n\nD_col = []\nfor i,row in df.iterrows():\n    # get the index of the last non-empty/null value in the row\n    d_idx = next(j for j,x in reversed(list(enumerate(row))) if x)\n    # put the value at that index in D_col\n    D_col.append(row[d_idx])\n    # replace that value with ''\n    row.iloc[d_idx] = ''\n</code></pre>\n\n<p>This will remove the <code>some_date</code> values from your DataFrame and put them in the list <code>D_col</code>.</p>\n\n<p><strong>Step 2:</strong>\nNow you can use <code>str.replace</code> to remove the slashes and <code>str.cat</code> to join the columns. Here's an example:</p>\n\n<pre><code>from functools import reduce\n\ncolumns_to_join = ['C', 'D', 'e1', 'e2', 'e3']\n# first remove the slashes\ncleaned_columns = [df[col].fillna('').str.replace('\\\\', '') for col in columns_to_join]\n\n# create an empty Series to start reduce with\nempty_series = pd.Series(['' for _ in range(len(df))])\n# iterate over the cleaned columns and join them (using str.cat) into one column\nC_col = reduce(lambda acc, col: acc.str.cat(col.fillna('')), cleaned_columns, empty_series)\n</code></pre>\n\n<p><strong>Step 3:</strong>\nBring all this together into one, final DataFrame. Here's how:</p>\n\n<pre><code>new_df = pd.DataFrame(df[['A', 'B']])\nnew_df['C'] = C_col\nnew_df['D'] = D_col\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 3752774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228697133274303f4993efeec01d2a61?s=128&d=identicon&r=PG&f=1", "display_name": "cbruno", "link": "https://stackoverflow.com/users/3752774/cbruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535580062, "creation_date": 1535577972, "question_id": 52086283, "link": "https://stackoverflow.com/questions/52086283/python-concatenate-columns-based-on", "title": "Python: Concatenate columns based on &quot;\\&quot;", "body": "<p>I've recently received a .csv data frame from a database that was supposed to return 4 columns but actually returned 8. When I checked, I found that some columns have been added because it seems like the string that belonged in the fourth column had a newline in it.</p>\n\n<p>In other words, I'm seeing something like this:</p>\n\n<pre><code>index  A  B    C         D      (extra)   (extra)  (extra)  (extra)\n  0    1  2  'abc\\'    'def\\'    'ghi\\'    'jkl\\'   'xyz'   some_date\n  1    1  2  'abc'    some_date\n  2    1  2  'abc\\'    'def'    some_date\n</code></pre>\n\n<p>As opposed to this:</p>\n\n<pre><code>index  A  B         C                D\n  0    1  2  'abcdefghijklxyz'   some_date\n  1    1  2       'abc'          some_date\n  2    1  2     'abcdef'         some_date\n</code></pre>\n\n<p>Is there an efficient way to combine columns that end in a newline with the column to the right? </p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1535582780, "post_id": 52086264, "comment_id": 91124367, "body": "Does the pattern always occupy all columns?  So you could, in theory, just test the  pattern against <code>arr[0:5,:]</code>, then against <code>arr[1:6,:]</code> and so on?"}, {"owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1535583156, "post_id": 52086264, "comment_id": 91124487, "body": "@hpaulj There are various patterns that don&#39;t occupy all columns no, this is just one example of a pattern that happens to do so. I could add additional examples to my original post if that would help explain more clearly the issue I have?"}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1535585556, "post_id": 52086264, "comment_id": 91125072, "body": "What are the range of your values? Includes 0?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1535587358, "post_id": 52086264, "comment_id": 91125419, "body": "Keep in mind that code that works nicely with compiled languages might not makes optimal use of <code>numpy</code> array processing.  Image convolution code in <code>scipy</code> might be closest you&#39;ll get with commonly used packages, <a href=\"https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.ndimage.filters.convolve.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy-0.14.0/reference/generated/&hellip;</a>"}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1535609923, "post_id": 52086264, "comment_id": 91130467, "body": "What is the input format of the &quot;pattern&quot;?  Also @DanielMesejo &#39;s question about zero is important."}, {"owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1535617388, "post_id": 52086264, "comment_id": 91134575, "body": "@DanielMesejo The range of values goes from 1 to 7, it does not include 0 values."}, {"owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "reply_to_user": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1535619691, "post_id": 52086264, "comment_id": 91136004, "body": "@DanielF The input format of the pattern, in this case, will always be a (12,6) two-dimensional numpy array filled with integers between the range 1 to 7. The pattern will always be a (M,N) two-dimensional numpy array filled with integers between the range 1 to 7 and wildcards. The pattern can thus also have different dimensions on each axis."}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1535620751, "post_id": 52086264, "comment_id": 91136700, "body": "What are the &quot;wildcards&quot;?  0?"}, {"owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "reply_to_user": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1535620963, "post_id": 52086264, "comment_id": 91136848, "body": "@DanielF Wildcards can take on any value (and will hence match any value present at the index the wildcard is present). I&#39;ve used &quot;?&quot; to denote these wildcards, sometimes these get denote them as &quot;*&quot;, though."}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1535621181, "post_id": 52086264, "comment_id": 91136985, "body": "In the <code>pattern</code>.  It&#39;s an array right?  What are you using to signify a wildcard in the <i>actual program</i>?  You don&#39;t just use a symbol do you?  Because then you&#39;re going to make us needlessly parse string arrays."}, {"owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "reply_to_user": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1535621487, "post_id": 52086264, "comment_id": 91137193, "body": "@DanielF Both the pattern and the original are numpy arrays in my case. If I knew the answer to your question, however, I could probably figure out how to solve the above problem myself. I don&#39;t know whether using symbols is actually the way to go to match any value within an array."}, {"owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1535622978, "post_id": 52086264, "comment_id": 91138272, "body": "OK, you&#39;re thinking of it like a string.  That&#39;s . . . not really how it works in <code>numpy</code>, and that&#39;s why folks are confused.  There&#39;s no special wildcard symbol like you&#39;d get in <code>regex</code>, but you can do the same thing mathematically."}, {"owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "reply_to_user": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "edited": false, "score": 0, "creation_date": 1535623492, "post_id": 52086264, "comment_id": 91138630, "body": "@DanielF Well yeah, if it was an array of strings then the wildcard would work like the above, I could theoretically convert all integers to strings if that would mitigate that issue? And how would you do the same thing mathematically? That&#39;s essentially what I&#39;m asking, as there are several posts about exact pattern matching out there already."}], "answers": [{"tags": [], "owner": {"reputation": 11838, "user_id": 4427777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1106434f7517ac69aad09d2cf529d793?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/4427777/daniel-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1535624706, "creation_date": 1535624706, "answer_id": 52094713, "question_id": 52086264, "link": "https://stackoverflow.com/questions/52086264/two-dimensional-pattern-matching-with-wildcards-in-numpy-arrays/52094713#52094713", "title": "Two Dimensional Pattern Matching with Wildcards in Numpy Arrays", "body": "<p>Since your searching space if very small we don't have to worry about memory errors by just unravelling a windowed view.</p>\n\n<p>First you need a mask of <em>where</em> there are values in your pattern</p>\n\n<pre><code>mask\n\narray([[False, False,  True,  True, False, False],\n       [False, False,  True,  True, False, False],\n       [ True,  True,  True,  True,  True,  True],\n       [ True,  True,  True,  True,  True,  True],\n       [False, False,  True,  True, False, False],\n       [False, False,  True,  True, False, False]], dtype=bool)\n</code></pre>\n\n<p>Then you need an array of <em>what</em> the values are in those positions:</p>\n\n<pre><code>val = np.array([ 3.,  4.,  3.,  4.,  3.,  3.,  3.,  4.,  4.,  4.,\n                 3.,  3.,  3.,  4.,  4.,  4.,  3.,  4.,  3.,  4.])\n</code></pre>\n\n<p>Then you need a sliding window across your input.  Easiest implementation to use is <code>skimage.util.view_as_windows</code> but you can use my <a href=\"https://stackoverflow.com/questions/45960192/using-numpy-as-strided-function-to-create-patches-tiles-rolling-or-sliding-w/45960193#45960193\">pure numpy implementatation here</a></p>\n\n<pre><code>windows = skimage.util.view_as_windows(input, pattern.shape)\n# or\nwindows = window_nd(input, pattern.shape)\n</code></pre>\n\n<p>Now, normally doing <code>windows[mask]</code> here would be dangerous - it can create a huge array if you're convolving over many windows.  But sice the most windows we could ever have here is 12*6 = 72, we don't have to worry about that.</p>\n\n<pre><code>loc = np.where(np.all(window[mask] == val, axis = -1))\n</code></pre>\n\n<p>Now <code>loc</code> is the coordinates of the upper left corner of the matching windows.</p>\n\n<p>Or it should be.  Maybe provide a test case that can be copy/pasted into an interpreter? </p>\n"}, {"comments": [{"owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "edited": false, "score": 0, "creation_date": 1535627144, "post_id": 52095255, "comment_id": 91140917, "body": "I&#39;ve tested this for various different patterns and it seems to work exactly as expected. Appreciate the answer!"}], "tags": [], "owner": {"reputation": 3357, "user_id": 3100523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpNa9.png?s=128&g=1", "display_name": "Jundiaius", "link": "https://stackoverflow.com/users/3100523/jundiaius"}, "is_accepted": true, "score": 1, "last_activity_date": 1535626377, "creation_date": 1535626377, "answer_id": 52095255, "question_id": 52086264, "link": "https://stackoverflow.com/questions/52086264/two-dimensional-pattern-matching-with-wildcards-in-numpy-arrays/52095255#52095255", "title": "Two Dimensional Pattern Matching with Wildcards in Numpy Arrays", "body": "<p>This function takes an <code>input_array</code>, a <code>pattern</code> and a function that lets you identify the wildcard. Here I have used <code>np.nan</code> as wildcard but it could be anything, giving that you can make your own <code>wildcard_function</code>. </p>\n\n<p>It works for arrays of any dimension (1 or more). I have tested it for your example and it seems ok. </p>\n\n<pre><code>from itertools import product\nimport numpy as np\n\n\ndef match_pattern(input_array, pattern, wildcard_function=np.isnan):\n\n    pattern_shape = pattern.shape\n    input_shape = input_array.shape\n\n    is_wildcard = wildcard_function(pattern) # This gets a boolean N-dim array\n\n    if len(pattern_shape) != len(input_shape):\n        raise ValueError(\"Input array and pattern must have the same dimension\")\n\n    shape_difference = [i_s - p_s for i_s, p_s in zip(input_shape, pattern_shape)]\n\n    if any((diff &lt; -1 for diff in shape_difference)):\n        raise ValueError(\"Input array cannot be smaller than pattern in any dimension\")\n\n    dimension_iterators = [range(0, s_diff + 1) for s_diff in shape_difference]\n\n    # This loop will iterate over every possible \"window\" given the shape of the pattern\n    for start_indexes in product(*dimension_iterators):\n        range_indexes = [slice(start_i, start_i + p_s) for start_i, p_s in zip(start_indexes, pattern_shape)]\n        input_match_candidate = input_array[range_indexes]\n\n        # This checks that for the current \"window\" - the candidate - every element is equal \n        #  to the pattern OR the element in the pattern is a wildcard\n        if np.all(\n            np.logical_or(\n                is_wildcard, (input_match_candidate == pattern)\n            )\n        ):\n            return True\n\n    return False\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 6029749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1089886571062551/picture?type=large", "display_name": "Menno Van Dijk", "link": "https://stackoverflow.com/users/6029749/menno-van-dijk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 1, "accepted_answer_id": 52095255, "answer_count": 2, "score": 1, "last_activity_date": 1535626377, "creation_date": 1535577880, "last_edit_date": 1535621305, "question_id": 52086264, "link": "https://stackoverflow.com/questions/52086264/two-dimensional-pattern-matching-with-wildcards-in-numpy-arrays", "title": "Two Dimensional Pattern Matching with Wildcards in Numpy Arrays", "body": "<p>First of, I'm aware of <a href=\"https://gamedev.stackexchange.com/questions/48065/identifying-quad-patterns-in-a-two-dimensional-array\">this</a>, <a href=\"https://cstheory.stackexchange.com/questions/8445/n-dimensional-pattern-matching\">this</a> and <a href=\"https://stackoverflow.com/questions/32531377/how-can-i-check-if-one-two-dimensional-numpy-array-contains-a-specific-pattern-o\">this</a> post about two-dimensional pattern matching, these posts however all don't include wildcard matching. Furthermore, I know there are several papers such as <a href=\"https://www.sciencedirect.com/science/article/pii/S0196677496908445\" rel=\"nofollow noreferrer\">this one</a> that have solved the issue I'm facing. However, I'm only just getting familiar with pattern matching in two dimensional arrays and trying to implement the algorithms in the papers is non-trivial for me at the moment. </p>\n\n<p>Thus, the following problem is what I'm facing.</p>\n\n<p>Given a two dimensional array:</p>\n\n<pre><code>[[1 3 4 5 3 3]\n [4 1 4 5 5 2]\n [5 4 3 4 4 2] # pattern\n [4 5 3 4 1 3] # pattern\n [3 3 3 4 4 4] # pattern\n [3 4 3 4 2 5] # pattern\n [4 5 3 4 1 2] # pattern\n [5 1 1 2 4 2]\n [2 1 3 2 1 5]\n [4 4 1 3 3 1]\n [1 4 3 4 4 1]\n [5 2 4 4 4 1]]\n</code></pre>\n\n<p>And the following example pattern (where a ? would indicate the wildcard match):</p>\n\n<pre><code>[[? ? 3 4 ? ?]\n [? ? 3 4 ? ?]\n [3 3 3 4 4 4]\n [? ? 3 4 ? ?]\n [? ? 3 4 ? ?]]\n</code></pre>\n\n<p>How would a function be written that takes in the two dimensional array and the pattern, returning True if the pattern is present in the array or False if it is not?</p>\n\n<p>If possible a generalized solution to this problem would be highly appreciated, as there are numerous distinct patterns that I'm trying to match. If required I'm more than willing to provide additional examples. </p>\n"}, {"tags": ["python", "cpython"], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1535578351, "last_edit_date": 1592644375, "creation_date": 1535578351, "answer_id": 52086357, "question_id": 52086246, "link": "https://stackoverflow.com/questions/52086246/get-a-list-of-class-methods-inside-c-python/52086357#52086357", "title": "Get a list of class methods inside C-Python", "body": "<p><a href=\"https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_methods\" rel=\"nofollow noreferrer\"><code>tp_methods</code></a> is:</p>\n<blockquote>\n<p>An optional pointer to a static NULL-terminated array of <code>PyMethodDef</code> structures, declaring regular methods of this type.</p>\n<p>For each entry in the array, an entry is added to the type\u2019s dictionary (see <code>tp_dict</code> below) containing a method descriptor.</p>\n<p>This field is not inherited by subtypes (methods are inherited through a different mechanism).</p>\n</blockquote>\n<p>In other words, these are the builtin methods attached to the class by the extension module that created it.</p>\n<p>For a class built in Python, there are no builtin methods, and there is no extension module that created it, so it will always be either <code>NULL</code> or empty.</p>\n<hr />\n<p>What you want to do is the same thing you do in Python:</p>\n<ul>\n<li>Either look in the class's dict (which you can access via <a href=\"https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_dict\" rel=\"nofollow noreferrer\"><code>tp_dict</code></a>), or</li>\n<li>Call a method like <code>dir</code> or <code>inspect.getmembers</code> (the same way you'd call any other Python code).</li>\n</ul>\n<p>Of course that gets you <em>all</em> attributes of the class (depending on which you do, also possibly all <em>inherited</em> attributes), so if you want just the <em>methods</em>, you need to filter it. But you do this the same way as in Python as well.</p>\n<p>Since &quot;method&quot; is kind of an ambiguous term (Should it include classmethods and staticmethods? What about wrappers that act just like functions when bound as methods, but aren't functions? And so on\u2026), you need to come up with exactly the rule you want to filter on, and apply it the same way you would from Python. (A few things, like <a href=\"https://docs.python.org/3/c-api/object.html#c.PyCallable_Check\" rel=\"nofollow noreferrer\"><code>PyCallable_Check</code></a>, have special C API support; for anything else, you'll be doing a subclass check or calling a Python function.)</p>\n"}], "owner": {"reputation": 1829, "user_id": 2505648, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xYTjv.jpg?s=128&g=1", "display_name": "Shady Atef", "link": "https://stackoverflow.com/users/2505648/shady-atef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 52086357, "answer_count": 1, "score": 1, "last_activity_date": 1535578351, "creation_date": 1535577791, "question_id": 52086246, "link": "https://stackoverflow.com/questions/52086246/get-a-list-of-class-methods-inside-c-python", "title": "Get a list of class methods inside C-Python", "body": "<p>Let's say I have a class defined in python as following</p>\n\n<pre><code>class A(object):\n    def __init__(self):\n        pass\n    def rockabye(self):\n        pass\n\nclass B(A):\n    def __init__(self):\n        pass\n    def iamOnlyinB(self):\n        pass\n</code></pre>\n\n<p>I am trying to get a list of the functions that only exist in <code>B</code> and not inherited from <code>A</code> or <code>object</code>.</p>\n\n<pre><code>PyTypeObject* l_typeObject = &lt;a function out of scope of the question&gt;\n\nfor (int i = 0; true; i++)\n    {\n        PyMethodDef method_def = l_typeObject-&gt;tp_methods[i];\n        if(method_def.ml_name == NULL)\n            break;\n        std::cout &lt;&lt; method_def.ml_name &lt;&lt;std::endl;\n\n    }\n</code></pre>\n\n<p>I always find <code>l_typeObject-&gt;tp_methods</code> is <code>NULL</code>. Why ? and what are the possible alternative approaches ?</p>\n"}, {"tags": ["python", "pandas", "matrix-indexing"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535577760, "post_id": 52086208, "comment_id": 91122821, "body": "What is the CSV separator used here?"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1535577763, "post_id": 52086208, "comment_id": 91122825, "body": "Can you add <code>df.head().to_dict()</code> to the question. I think it&#39;s ambiguous as to how <code>&#39;time_cost&#39;</code> is stored in your <code>DataFrame</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535577907, "post_id": 52086208, "comment_id": 91122891, "body": "Also, are there only these two (three) columns in <code>df</code> or can there be more?"}, {"owner": {"reputation": 301, "user_id": 9554719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e147955f157b3ecad4b6c616d5802506?s=128&d=identicon&r=PG&f=1", "display_name": "mm_nieder", "link": "https://stackoverflow.com/users/9554719/mm-nieder"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1535578488, "post_id": 52086208, "comment_id": 91123082, "body": "Hi @ALollz I&#39;ve edited my question. @coldspeed  the CSV separator is <code>sep=&#39;;&#39;</code>, and yes there are only two (three) columns."}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 9554719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e147955f157b3ecad4b6c616d5802506?s=128&d=identicon&r=PG&f=1", "display_name": "mm_nieder", "link": "https://stackoverflow.com/users/9554719/mm-nieder"}, "edited": false, "score": 0, "creation_date": 1535639074, "post_id": 52094518, "comment_id": 91149356, "body": "Hi @Anna Iliukovich-Strakovskaia, thank you for your response. This is close, but I need to <code>groupby</code> <code>name</code> and then some how merge the <code>time_cost</code> values together in an array like so: <code>[[[28800000, 250], [39600000, 300], [61200000, 250], [72000000, 0 ], [86400000, 0 ]], [[115200000, 250], [126000000, 300], [147600000, 250], [158400000, 0]]]</code>"}, {"owner": {"reputation": 1058, "user_id": 10242229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HGH7n.jpg?s=128&g=1", "display_name": "Anna Iliukovich-Strakovskaia", "link": "https://stackoverflow.com/users/10242229/anna-iliukovich-strakovskaia"}, "reply_to_user": {"reputation": 301, "user_id": 9554719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e147955f157b3ecad4b6c616d5802506?s=128&d=identicon&r=PG&f=1", "display_name": "mm_nieder", "link": "https://stackoverflow.com/users/9554719/mm-nieder"}, "edited": false, "score": 0, "creation_date": 1535640152, "post_id": 52094518, "comment_id": 91150146, "body": "Hi! @mm_nieder see the last update. I didn&#39;t understand what you want first time = ). Does last update help?"}, {"owner": {"reputation": 1058, "user_id": 10242229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HGH7n.jpg?s=128&g=1", "display_name": "Anna Iliukovich-Strakovskaia", "link": "https://stackoverflow.com/users/10242229/anna-iliukovich-strakovskaia"}, "reply_to_user": {"reputation": 301, "user_id": 9554719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e147955f157b3ecad4b6c616d5802506?s=128&d=identicon&r=PG&f=1", "display_name": "mm_nieder", "link": "https://stackoverflow.com/users/9554719/mm-nieder"}, "edited": false, "score": 0, "creation_date": 1535640228, "post_id": 52094518, "comment_id": 91150207, "body": "@mm_nieder So you don&#39;t need step 2-4, but I think it can be helpful for other peoples."}, {"owner": {"reputation": 301, "user_id": 9554719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e147955f157b3ecad4b6c616d5802506?s=128&d=identicon&r=PG&f=1", "display_name": "mm_nieder", "link": "https://stackoverflow.com/users/9554719/mm-nieder"}, "edited": false, "score": 0, "creation_date": 1535641069, "post_id": 52094518, "comment_id": 91150785, "body": "Thank you SO MUCH for your brilliant answer :) Very helpful!"}], "tags": [], "owner": {"reputation": 1058, "user_id": 10242229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HGH7n.jpg?s=128&g=1", "display_name": "Anna Iliukovich-Strakovskaia", "link": "https://stackoverflow.com/users/10242229/anna-iliukovich-strakovskaia"}, "is_accepted": true, "score": 1, "last_activity_date": 1535640070, "last_edit_date": 1535640070, "creation_date": 1535624039, "answer_id": 52094518, "question_id": 52086208, "link": "https://stackoverflow.com/questions/52086208/python-group-unique-ids-and-merge-values-into-an-array/52094518#52094518", "title": "Python: Group Unique ids and Merge Values into an Array", "body": "<p>In my example, data is:</p>\n\n<pre><code>df= pd.DataFrame({'name': {0: 'x',\n          1: 'x',\n          2: 'x',\n          3: 'y'},\n 'time_cost': {0: '28800000, 250',\n                1: '39600000, 300',\n                2: '61200000, 250',\n                3: '72000000, 0'}})\n</code></pre>\n\n<p><strong>Step 1.</strong> You can use something like this to get result:</p>\n\n<pre><code>def split_function(n):\n    return n.split(',')\n\ndf['time_cost'] = df.time_cost.apply(split_function)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>name         time_cost\n0    x  [28800000,  250]\n1    x  [39600000,  300]\n2    x  [61200000,  250]\n3    y    [72000000,  0]\n</code></pre>\n\n<p><strong>Step 2.</strong> If you want two different columns in your DataFrame you can use:</p>\n\n<pre><code>df.time_cost.apply(pd.Series)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>          0     1\n0  28800000   250\n1  39600000   300\n2  61200000   250\n3  72000000     0\n</code></pre>\n\n<p><strong>Step 3.</strong> And then join them:</p>\n\n<pre><code>df = df.join(df.time_cost.apply(pd.Series))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>name         time_cost         0     1\n0    x  [28800000,  250]  28800000   250\n1    x  [39600000,  300]  39600000   300\n2    x  [61200000,  250]  61200000   250\n3    y    [72000000,  0]  72000000     0\n</code></pre>\n\n<p>And then you can use <code>drop</code> to drop \"time_cost\" column and <code>rename</code> to rename new columns if you like.</p>\n\n<p>Is it what you want? I hope it will be helpful.</p>\n\n<p><strong>UPD:</strong></p>\n\n<p><strong>Step 4.</strong> If you want grouped by name, you can use this:</p>\n\n<pre><code>df[0] = df[0].astype(int)\ndf[1] = df[1].astype(int)\n\ndef concat_function_0(df):\n    return np.array(df[0])\ndef concat_function_1(df):\n    return np.array(df[1])\n\ndf = pd.DataFrame([df.groupby('name').apply(concat_function_1), df.groupby('name').apply(concat_function_0)]).T\n</code></pre>\n\n<p>It isn't pythonic, but it works = )</p>\n\n<p>Output:</p>\n\n<pre><code>name               0                               1                                                 \nx     [250, 300, 250]  [28800000, 39600000, 61200000]\ny                 [0]                      [72000000]\n</code></pre>\n\n<p><strong>UPD:</strong></p>\n\n<p><strong>Step 5.</strong> For your result, after first step use this:</p>\n\n<pre><code>def df_to_array(df):\n    return list(df.time_cost)\n\nresult = df.groupby('name').apply(df_to_array).values\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[['28800000', ' 250'], ['39600000', ' 300'], ['61200000', ' 250']]\n [['72000000', ' 0']]]\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 9554719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e147955f157b3ecad4b6c616d5802506?s=128&d=identicon&r=PG&f=1", "display_name": "mm_nieder", "link": "https://stackoverflow.com/users/9554719/mm-nieder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 52094518, "answer_count": 1, "score": 1, "last_activity_date": 1535640070, "creation_date": 1535577549, "last_edit_date": 1535579149, "question_id": 52086208, "link": "https://stackoverflow.com/questions/52086208/python-group-unique-ids-and-merge-values-into-an-array", "title": "Python: Group Unique ids and Merge Values into an Array", "body": "<p>I have a <code>pandas</code> DF that looks like this</p>\n\n<p>DF:</p>\n\n<pre><code>       name ;time_cost\n        x   ;28800000, 250 \n        x   ;39600000, 300 \n        x   ;61200000, 250 \n        x   ;72000000, 0 \n        y   ;86400000, 0 \n        y   ;115200000, 250 \n        y   ;126000000, 300 \n        y   ;147600000, 250\n        y   ;158400000, 0\n\ndf.head().to_dict()\n{'name': {0: 'x',\n          1: 'x',\n          2: 'x',\n          3: 'x'},\n 'time_cost': {0: '28800000, 250',\n                1: '39600000, 300',\n                2: '61200000, 250',\n                0: '72000000, 0'}}\n</code></pre>\n\n<p>I'm trying to put all the values from time_cost into an array like so:</p>\n\n<pre><code>[[[28800000, 250],\n[39600000, 300],\n[61200000, 250],\n[72000000, 0 ],\n[86400000, 0 ]],\n[[115200000, 250],\n[126000000, 300],\n[147600000, 250],\n[158400000, 0]]]\n</code></pre>\n\n<p>Here's what I have tried:</p>\n\n<pre><code>    import pandas as pd\n\n        df = pd.read_csv('file.csv', sep=';')\n        def f(df):\n            return pd.Series(dict(timecost_range = \"%s\" % '| '.join(df['time_cost'])))\n\n        result = df.groupby('name').apply(f)\n        result\n                timecost_range\n        name    \n        x       28800000, 250| 39600000, 300| 61200000, 250| 72000000, 0\n        y       86400000, 0| 115200000, 250| 126000000, 300| 147600000, 250|...\n</code></pre>\n\n<p>This works somewhat, but isn't exactly what I am looking for. Any ideas or suggestions would be useful.</p>\n"}, {"tags": ["python", "string-literals"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1535577631, "post_id": 52086185, "comment_id": 91122769, "body": "What is the code that you&#39;ve tried and gave you an error?"}, {"owner": {"reputation": 914, "user_id": 2957890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/643683633/picture?type=large", "display_name": "T.Woody", "link": "https://stackoverflow.com/users/2957890/t-woody"}, "edited": false, "score": 0, "creation_date": 1535577754, "post_id": 52086185, "comment_id": 91122815, "body": "duplicate? <a href=\"https://stackoverflow.com/questions/10059554/inserting-characters-at-the-start-and-end-of-a-string\" title=\"inserting characters at the start and end of a string\">stackoverflow.com/questions/10059554/&hellip;</a>"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1535578040, "post_id": 52086185, "comment_id": 91122936, "body": "Underscores don&#39;t normally need to be escaped.  In what context do you need to escape them?"}, {"owner": {"reputation": 67, "user_id": 8221662, "user_type": "registered", "profile_image": "https://graph.facebook.com/1289658447763152/picture?type=large", "display_name": "Gagan Ganapathy", "link": "https://stackoverflow.com/users/8221662/gagan-ganapathy"}, "edited": false, "score": 0, "creation_date": 1535578078, "post_id": 52086185, "comment_id": 91122951, "body": "I was converting it to latex so they need to replaced"}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 2, "last_activity_date": 1535578548, "last_edit_date": 1535578548, "creation_date": 1535577663, "answer_id": 52086226, "question_id": 52086185, "link": "https://stackoverflow.com/questions/52086185/how-to-append-to-the-start-of-the-string-in-python/52086226#52086226", "title": "How to append &quot;\\&quot; to the start of the string in python", "body": "<p>A single backslash in Python is written like this:</p>\n\n<pre><code>\"\\\\\"\n</code></pre>\n\n<p>Various ways to convince yourself of this:</p>\n\n<pre><code>&gt;&gt;&gt; len(\"\\\\\")\n1\n&gt;&gt;&gt; print(\"\\\\\")\n\\\n&gt;&gt;&gt; \"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"[0]\n'\\\\'\n&gt;&gt;&gt; chr(92)\n'\\\\'\n&gt;&gt;&gt; '\\N{REVERSE SOLIDUS}'\n'\\\\'\n</code></pre>\n\n<p>The weirdness is because, since the backslash <em>is</em> the escape character, a backslash itself must be escaped.</p>\n\n<p>So, to answer the question in the title:</p>\n\n<blockquote>\n  <p>How to append \u201c\\\u201d to the start of the string in python</p>\n</blockquote>\n\n<p>You can use:</p>\n\n<pre><code>mystring = \"\\\\\" + mystring\n</code></pre>\n\n<p>In your example case, which is escaping only leading underscores, try something like this:</p>\n\n<pre><code>&gt;&gt;&gt; mystring = '__x_a'\n&gt;&gt;&gt; n = next((i for i,c in enumerate(mystring) if c != '_'), len(mystring))\n&gt;&gt;&gt; result = mystring.replace('_', r'\\_', n)\n&gt;&gt;&gt; print(result)\n\\_\\_x_a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1535578558, "post_id": 52086285, "comment_id": 91123110, "body": "@wim. works fine both on python 2.7 and 3.7. What warning do you exactly see and what python version are you using?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1535578810, "post_id": 52086285, "comment_id": 91123203, "body": "3.7.0 final.  You probably have your warnings turned off."}], "tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": false, "score": 2, "last_activity_date": 1535577977, "creation_date": 1535577977, "answer_id": 52086285, "question_id": 52086185, "link": "https://stackoverflow.com/questions/52086185/how-to-append-to-the-start-of-the-string-in-python/52086285#52086285", "title": "How to append &quot;\\&quot; to the start of the string in python", "body": "<p>You can use <code>re.sub</code></p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; s = \"__x_a\" \n&gt;&gt;&gt; new_s = re.sub(r'^_*', lambda x: x.group().replace('_', '\\_'), s)\n&gt;&gt;&gt; print(new_s)\n\\_\\_x_a\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8221662, "user_type": "registered", "profile_image": "https://graph.facebook.com/1289658447763152/picture?type=large", "display_name": "Gagan Ganapathy", "link": "https://stackoverflow.com/users/8221662/gagan-ganapathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1535578548, "creation_date": 1535577393, "last_edit_date": 1535577890, "question_id": 52086185, "link": "https://stackoverflow.com/questions/52086185/how-to-append-to-the-start-of-the-string-in-python", "title": "How to append &quot;\\&quot; to the start of the string in python", "body": "<p>How to append <code>\\</code> character to the start of the string in python, it throws an error saying </p>\n\n<blockquote>\n  <p>SyntaxError: EOL while scanning string literal</p>\n</blockquote>\n\n<p>I need to append <code>\\</code> whenever underscore is seen in the string </p>\n\n<p>for example:</p>\n\n<p><code>__x_a</code> &rarr; <code>\\_\\_x_a</code> this needs to be done only for the initial underscores</p>\n"}, {"tags": ["python", "string", "pandas", "dataframe", "multiple-columns"], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 7991624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5dcbbcfdba21518963c48f7a443164b?s=128&d=identicon&r=PG&f=1", "display_name": "sos.cott", "link": "https://stackoverflow.com/users/7991624/sos-cott"}, "edited": false, "score": 0, "creation_date": 1535578704, "post_id": 52086223, "comment_id": 91123165, "body": "These answers are perfect! Thanks for your speedy reply. :D"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 213, "user_id": 7991624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5dcbbcfdba21518963c48f7a443164b?s=128&d=identicon&r=PG&f=1", "display_name": "sos.cott", "link": "https://stackoverflow.com/users/7991624/sos-cott"}, "edited": false, "score": 0, "creation_date": 1535580220, "post_id": 52086223, "comment_id": 91123634, "body": "@a.parris It&#39;s in my name after all, yw"}, {"owner": {"reputation": 213, "user_id": 7991624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5dcbbcfdba21518963c48f7a443164b?s=128&d=identicon&r=PG&f=1", "display_name": "sos.cott", "link": "https://stackoverflow.com/users/7991624/sos-cott"}, "edited": false, "score": 0, "creation_date": 1535580901, "post_id": 52086223, "comment_id": 91123842, "body": "I do have one more question actually. For the dataframe, I would like to keep the first column (the id number). Would it be possible to state in that line that I would like to keep the &#39;id&#39; column?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 213, "user_id": 7991624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5dcbbcfdba21518963c48f7a443164b?s=128&d=identicon&r=PG&f=1", "display_name": "sos.cott", "link": "https://stackoverflow.com/users/7991624/sos-cott"}, "edited": false, "score": 0, "creation_date": 1535580940, "post_id": 52086223, "comment_id": 91123854, "body": "@a.parris First do <code>df = df.set_index(&#39;id&#39;)</code> and then run this code."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1535577653, "creation_date": 1535577653, "answer_id": 52086223, "question_id": 52086175, "link": "https://stackoverflow.com/questions/52086175/how-to-split-a-large-dataframe-into-multiple-dataframe-based-on-the-first-3-char/52086223#52086223", "title": "How to split a large dataframe into multiple dataframe based on the first 3 characters of the column names?", "body": "<p>Call <code>groupby</code> with a lambda and iterate over the group object to separate them out into a list of DataFrames:</p>\n\n<pre><code>df_list = [g for _, g in df.groupby(by=lambda x: x[:3], axis=1)]\n</code></pre>\n\n<p>If you want a mapping of {prefix : dataFrame} instead, you can create a dictionary:</p>\n\n<pre><code>df_dict = {k: g for k, g in df.groupby(by=lambda x: x[:3], axis=1)}\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 7991624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5dcbbcfdba21518963c48f7a443164b?s=128&d=identicon&r=PG&f=1", "display_name": "sos.cott", "link": "https://stackoverflow.com/users/7991624/sos-cott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 52086223, "answer_count": 1, "score": -2, "last_activity_date": 1535577653, "creation_date": 1535577335, "question_id": 52086175, "link": "https://stackoverflow.com/questions/52086175/how-to-split-a-large-dataframe-into-multiple-dataframe-based-on-the-first-3-char", "title": "How to split a large dataframe into multiple dataframe based on the first 3 characters of the column names?", "body": "<p>I have a huge dataframe (2077 columns) that I would like to break down into multiple dataframes (78 exactly). Each column name starts with a 3 letter acronym (coc, cou, wam etc.). How would I split up the master dataframe into multiple smaller data frames based on the first 3 letters of the column names?</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1535578413, "post_id": 52086229, "comment_id": 91123060, "body": "same problem as with the other modules I&#39;ve tried. It works on desktop but not ingame :S"}, {"owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "reply_to_user": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1535578488, "post_id": 52086229, "comment_id": 91123081, "body": "Put the game in windowed mode rather than full screen."}, {"owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1535578558, "post_id": 52086229, "comment_id": 91123109, "body": "I did, but once I click on the game window the mouse &quot;disappears&quot;. It recognizes mouse clicks but not the movement"}, {"owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "reply_to_user": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "edited": false, "score": 0, "creation_date": 1535603102, "post_id": 52086229, "comment_id": 91128483, "body": "That&#39;s a different question all together, you need to figure out what library/how the game itself is handling input and then find a way to simulate so that it behaves as you want."}], "tags": [], "owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "is_accepted": false, "score": 0, "last_activity_date": 1535578090, "last_edit_date": 1535578090, "creation_date": 1535577679, "answer_id": 52086229, "question_id": 52086173, "link": "https://stackoverflow.com/questions/52086173/controlling-mouse-movement-with-python-inside-a-game/52086229#52086229", "title": "Controlling mouse movement with python inside a game", "body": "<pre><code>from pynput.mouse import Controller, Button\n\n\ndef clickAt(Mouse, x, y):\n    Mouse.position = (x, y)\n    Mouse.press(Button.right)\n    Mouse.release(Button.right)\n\n\nMouse = Controller()\nclickAt(Mouse,100,100)\n</code></pre>\n\n<p>This is how you do it with pynput </p>\n"}], "owner": {"reputation": 3032, "user_id": 6341510, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28d1da138966966ff82959171f915dd3?s=128&d=identicon&r=PG&f=1", "display_name": "AaronDT", "link": "https://stackoverflow.com/users/6341510/aarondt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1950, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1535634099, "creation_date": 1535577327, "last_edit_date": 1535634099, "question_id": 52086173, "link": "https://stackoverflow.com/questions/52086173/controlling-mouse-movement-with-python-inside-a-game", "title": "Controlling mouse movement with python inside a game", "body": "<p>I want to learn some reinforcement-learning concepts by letting my agent play a video game. In order to do so, I would like to control the mouse movement inside the game.</p>\n\n<p>I've been fiddling with <strong>win32api</strong>, using <code>win32api.SetCursorPos((x,y))</code>to move the mouse. While this works perfectly on my desktop, I can't find a way to translate the movement inside the game. </p>\n\n<p>I have also tried using <strong>pyautogui</strong> with no luck either. </p>\n\n<p>Any suggestions on how to solve this?</p>\n"}, {"tags": ["python", "regex", "replace"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535577495, "post_id": 52086166, "comment_id": 91122716, "body": "What is the point of that output dict?"}, {"owner": {"reputation": 739, "user_id": 6410719, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb861330b3f5d93e31cec9fc4f454c2b?s=128&d=identicon&r=PG&f=1", "display_name": "madik_atma", "link": "https://stackoverflow.com/users/6410719/madik-atma"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535577598, "post_id": 52086166, "comment_id": 91122756, "body": "I need to know, where I cleaned up the strings. Thats because I write it with an index to my documentation. I do it with re.sub."}, {"owner": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "edited": false, "score": 0, "creation_date": 1535651771, "post_id": 52086166, "comment_id": 91156582, "body": "@madik_atma Did any of the two solutions work for you?"}, {"owner": {"reputation": 739, "user_id": 6410719, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb861330b3f5d93e31cec9fc4f454c2b?s=128&d=identicon&r=PG&f=1", "display_name": "madik_atma", "link": "https://stackoverflow.com/users/6410719/madik-atma"}, "edited": false, "score": 0, "creation_date": 1535660140, "post_id": 52086166, "comment_id": 91160556, "body": "thank you for your interst on the solution. I have choose the way with this solution and because of no time I have forget to post it here: <a href=\"https://stackoverflow.com/a/16762053/6410719\">stackoverflow.com/a/16762053/6410719</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "is_accepted": false, "score": 0, "last_activity_date": 1535580980, "last_edit_date": 1535580980, "creation_date": 1535578260, "answer_id": 52086336, "question_id": 52086166, "link": "https://stackoverflow.com/questions/52086166/find-all-matches-and-replace-iteratively-with-an-index/52086336#52086336", "title": "Find all matches and replace iteratively with an index", "body": "<p>I suspect there may be another way to approach your true problem more directly, but try this:</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>import collections as ct\n\n\ndef replace(s, subs):\n    \"\"\"Return a tuple of substitutes and a related dict.\"\"\"\n    dd = ct.defaultdict(list)\n    replaced = []\n    for i, word in enumerate(s.split()):\n        if word in set(subs):\n            pos = \"&lt;{}&gt;\".format(i)\n            replaced.append(pos)\n            dd[word].append(pos)\n        else:\n            replaced.append(word)\n    return \" \".join(replaced), dict(dd)\n</code></pre>\n\n<p><strong>Demo</strong><sup>+</sup></p>\n\n<pre><code>x = \"hayde hayde bim bam bimbam hayde hayde bim bam hayde hayde bim bbm ba bi bim\"\nreplace(x, [\"bim\", \"bam\"])\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>('hayde hayde &lt;2&gt; &lt;3&gt; bimbam hayde hayde &lt;7&gt; &lt;8&gt; hayde hayde &lt;11&gt; bbm ba bi &lt;15&gt;',\n{'bim': ['&lt;2&gt;', '&lt;7&gt;', '&lt;11&gt;', '&lt;15&gt;'], 'bam': ['&lt;3&gt;', '&lt;8&gt;']})\n</code></pre>\n\n<hr>\n\n<p>You commented: </p>\n\n<blockquote>\n  <p>I need to know, where I cleaned up the strings.</p>\n</blockquote>\n\n<p>Why not enumerate the split string with numbers that reflect actual indexed positions?  The numeric substitutes in this example thereby represent index positions of the split string.  You can easily swap them out with an incrementing counter if you wish.</p>\n\n<p><sub><sup>+</sup>Note: the test input slightly differs from the OP (\"bimbam\").</sub></p>\n"}], "owner": {"reputation": 739, "user_id": 6410719, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb861330b3f5d93e31cec9fc4f454c2b?s=128&d=identicon&r=PG&f=1", "display_name": "madik_atma", "link": "https://stackoverflow.com/users/6410719/madik-atma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535580980, "creation_date": 1535577310, "question_id": 52086166, "link": "https://stackoverflow.com/questions/52086166/find-all-matches-and-replace-iteratively-with-an-index", "title": "Find all matches and replace iteratively with an index", "body": "<p>I have the following problem:</p>\n\n<p>I would like to mark the matches found with an index. Example:</p>\n\n<pre><code>x = \"hayde hayde bim bam hayde hayde bim bam hayde hayde bim bbm ba bi bim\"\n</code></pre>\n\n<p>I want to replace all the <code>bim</code>s and <code>bam</code>s with <code>&lt;1&gt;, &lt;2&gt;, ..</code></p>\n\n<p>Like this:</p>\n\n<pre><code>x = \"hayde hayde &lt;1&gt; &lt;2&gt; hayde hayde &lt;3&gt; &lt;4&gt; hayde hayde &lt;3&gt; bbm ba bi &lt;5&gt;\"\n</code></pre>\n\n<p>And get the output has a dict:</p>\n\n<pre><code>{\"bim\": \"&lt;1&gt;\"}\n{\"bam\": \"&lt;2&gt;\"}\n..\n</code></pre>\n\n<p>I think it is a simple problem but I cannot find the approach to solve this. I have to use the <code>re</code> module, to find the match, not the <code>str.replace</code>. This here is an abstract example for my problem</p>\n"}, {"tags": ["python", "python-3.x", "for-loop", "itertools"], "answers": [{"comments": [{"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1535578876, "post_id": 52086206, "comment_id": 91123225, "body": "this is fixing the length at 5. I guess you should have <code>if len(current) == len(d)</code>"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1535579402, "post_id": 52086206, "comment_id": 91123387, "body": "@Onyambu The original data has to be renamed, as <code>d</code> is the variable name for the input in the scope of the function. See my recent edit."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1535579480, "post_id": 52086206, "comment_id": 91123407, "body": "what is the difference between d and data?"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1535579730, "post_id": 52086206, "comment_id": 91123492, "body": "In the recursive function, <code>d</code> is mutated at every iteration by list slicing (<code>d[i+1:]</code>). Since the length of <code>d</code> decreases, and <code>len(d)</code> finds the length of the object <code>d</code> in declared in the scope of the function, it will not be finding the length of the list storing the original data but the length of the current value passed to <code>combination</code> which is decreasing at every call."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1535579927, "post_id": 52086206, "comment_id": 91123554, "body": "perfect. Understood it. Thanks"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 3, "last_activity_date": 1535579362, "last_edit_date": 1535579362, "creation_date": 1535577538, "answer_id": 52086206, "question_id": 52086142, "link": "https://stackoverflow.com/questions/52086142/how-to-produce-combinations-from-a-list-of-tuples/52086206#52086206", "title": "How to produce combinations from a list of tuples?", "body": "<p>You can use <code>itertools.product</code>:</p>\n\n<pre><code>import itertools\ndata = [('Serial Number', [12345]), ('Test Points', ['TestpointA', 'TestpointC']), ('Voltage_1', [3.0, 3.3, 3.6, 0.0]), ('Temperature Setpoint', [0, 60]), ('Slew_1', [200, 400, 800, 1600, 3200, 6400])]\nparams = ['sn', 'tp', 'v1', 'temp', 'slew']\nfor i in itertools.product(*[b for _, b in data]):\n  print('\\n'.join(f'{a}:{b}' for a, b in zip(params, i)))\n  print('-'*20)\n</code></pre>\n\n<p>Output (first three results):</p>\n\n<pre><code>sn:12345\ntp:TestpointA\nv1:3.0\ntemp:0\nslew:200\n--------------------\nsn:12345\ntp:TestpointA\nv1:3.0\ntemp:0\nslew:400\n--------------------\nsn:12345\ntp:TestpointA\nv1:3.0\ntemp:0\nslew:800\n--------------------\n...\n</code></pre>\n\n<p>While <code>itertools.product</code> is (perhaps) the cleanest solution to this problem, a simple recursive function with a generator can be used:</p>\n\n<pre><code>def combination(d, current = []):\n   if len(current) == len(data):\n     yield current\n   else:\n     for i, a in enumerate(d):\n       for c in a: \n         yield from combination(d[i+1:], current = current+[c])\n\n\nfor i in combination([b for _, b in data]):\n  print('\\n'.join(f'{a}:{b}' for a, b in zip(params, i)))\n  print('-'*20)\n</code></pre>\n\n<p>Output (first three results):</p>\n\n<pre><code>sn:12345\ntp:TestpointA\nv1:3.0\ntemp:0\nslew:200\n--------------------\nsn:12345\ntp:TestpointA\nv1:3.0\ntemp:0\nslew:400\n--------------------\nsn:12345\ntp:TestpointA\nv1:3.0\ntemp:0\nslew:800\n--------------------\n</code></pre>\n"}], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 52086206, "answer_count": 1, "score": 0, "last_activity_date": 1593304870, "creation_date": 1535577158, "last_edit_date": 1593304870, "question_id": 52086142, "link": "https://stackoverflow.com/questions/52086142/how-to-produce-combinations-from-a-list-of-tuples", "title": "How to produce combinations from a list of tuples?", "body": "<ul>\n<li>How to produce combinations from a list of tuples, containing a string at index 0 and a list at index 1?</li>\n<li>Given the following <code>list</code> of <code>tuples</code>:</li>\n</ul>\n<pre class=\"lang-py prettyprint-override\"><code>params = ['sn', 'tp', 'v1', 'temp', 'slew']\n\nlist_tuple = [('Serial Number', [12345]),\n              ('Test Points', ['TestpointA', 'TestpointC']),\n              ('Voltage_1', [3.0, 3.3, 3.6, 0.0]),\n              ('Temperature Setpoint', [0, 60]),\n              ('Slew_1', [200, 400, 800, 1600, 3200, 6400])]\n\ndef what_i_want(test_tuple, params):\n    for sn in test_tuple[0][1]:\n            for tp in test_tuple[1][1]:\n                for v in test_tuple[2][1]:\n                    for temp in test_tuple[3][1]:\n                        for slew in test_tuple[4][1]:\n                            print(f'{params[0]}: ', sn)\n                            print(f'{params[1]}: ', tp)\n                            print(f'{params[2]}: ', v)\n                            print(f'{params[3]}: ', temp)\n                            print(f'{params[4]}: ', slew)\n                            print('\\n')\n\nwhat_i_want(list_tuple, params)\n</code></pre>\n<p>produces <strong>desired output</strong>:</p>\n<pre><code>sn:  12345\ntp:  TestpointA\nv1:  3.0\ntemp:  0\nslew:  200\n\nsn:  12345\ntp:  TestpointA\nv1:  3.0\ntemp:  0\nslew:  400\n...\n...\n</code></pre>\n<p>The length of <code>params</code> corresponds to the number of tuples within <code>list_tuple</code> and this length can vary.  The length of each list within the tuple can also vary (i.e. the list with Serial Number could be 3 or 4 elements long instead of 1).</p>\n<p>I'd like to use recursion to unpack <code>list_tuple</code> and properly call <code>params</code> by index so I don't have to create a class with a bunch of nested loops.  However, this is the first time I've used recursion and I've only been able to produce the following:</p>\n<pre><code>def poo_doo(list_tuple):\n    for i in list_tuple:\n        if isinstance(i, tuple):\n            print(i[0])\n            poo_doo(i[1])\n        else:\n            print(i)\n            print('\\n')\n\npoo_doo(list_tuple)\n</code></pre>\n<p>yields:</p>\n<pre><code>Serial Number\n12345\n\n\nTest Points\nTestpointA\n\n\nTestpointC\n\n\nVoltage_1\n3.0\n\n\n3.3\n...\n</code></pre>\n<p>Please provide assistance in using the most efficient method to produce the <strong>desired output</strong>, preferably without nested loops .</p>\n<p>Link to the full class to provide a broader scope of understanding: <a href=\"https://github.com/trenton3983/Testing/tree/master/Auto_Filter\" rel=\"nofollow noreferrer\">auto_filter class</a></p>\n"}, {"tags": ["python", "string", "python-3.6"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1535577217, "post_id": 52086096, "comment_id": 91122631, "body": "In addition to the <code>{}</code> in your string, you also have things like that <code>body { \u2026 }</code>. So, it&#39;s going to try to interpret the whole thing inside those braces as a format spec, and it isn&#39;t a valid format spec (but it&#39;s actually kind of close to one, which is why the error is a bit confusing\u2026), so it fails."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1535577237, "post_id": 52086096, "comment_id": 91122638, "body": "If you want literal braces in your format string, you have to escape them by doubling them, like <code>body {{ \u2026 }}</code>."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535577278, "post_id": 52086096, "comment_id": 91122655, "body": "This is almost certainly a duplicate of a question with a great answer that explains it better than I can; if I can&#39;t find it, hopefully someone else can."}, {"owner": {"reputation": 11810, "user_id": 2063031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f2677db7242bfbcead46fbf27390160d?s=128&d=identicon&r=PG", "display_name": "ostrokach", "link": "https://stackoverflow.com/users/2063031/ostrokach"}, "edited": false, "score": 0, "creation_date": 1535577327, "post_id": 52086096, "comment_id": 91122672, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5466451/how-can-i-print-literal-curly-brace-characters-in-python-string-and-also-use-fo\">How can I print literal curly-brace characters in python string and also use .format on it?</a>"}, {"owner": {"reputation": 1494, "user_id": 7926479, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-h0cTmvESd2U/AAAAAAAAAAI/AAAAAAAAAG0/AgASXHA7WdQ/photo.jpg?sz=128", "display_name": "Andres Urrego Angel", "link": "https://stackoverflow.com/users/7926479/andres-urrego-angel"}, "edited": false, "score": 0, "creation_date": 1535577925, "post_id": 52086096, "comment_id": 91122897, "body": "I have done the double <code>{{</code> and <code>}}</code> and it&#39;s not going thru :("}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1535578203, "post_id": 52086096, "comment_id": 91122984, "body": "@AndresUrregoAngel You need the <code>{{</code> where you want a literal <code>{</code>. It doesn&#39;t look like that&#39;s what you have."}], "answers": [{"tags": [], "owner": {"reputation": 1603, "user_id": 5879698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d578a2912894d68ed1f822ab5c9c4?s=128&d=identicon&r=PG&f=1", "display_name": "William D. Irons", "link": "https://stackoverflow.com/users/5879698/william-d-irons"}, "is_accepted": true, "score": 2, "last_activity_date": 1535578623, "creation_date": 1535578623, "answer_id": 52086411, "question_id": 52086096, "link": "https://stackoverflow.com/questions/52086096/formatting-error-python-3-6/52086411#52086411", "title": "formatting error python 3.6", "body": "<p>Where you want the values replaced you want {}</p>\n\n<p>Where you want to preserve the literal { or } you want {{ or }}</p>\n\n<p>so for body {, you need body {{</p>\n\n<p>and then close it with }} instead of }.</p>\n\n<p>Then use {} in each place you want to substitute with a value in message.format()</p>\n\n<pre><code>message = \"\"\"\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;style&gt;\n    body {{\n    !background-color: #ffffcc;\n    font-family:courier;\n    font-size: 120%\n}}\n&lt;/style&gt;\n&lt;div&gt;\n    &lt;h2 style=\"text-decoration:underline\"&gt;Alert process failure&lt;/h2&gt;\n    &lt;p&gt; The process &lt;b&gt;{}&lt;/b&gt; has failure in the method &lt;b&gt;{}&lt;/b&gt; due the error &lt;br&gt;{}&lt;/b&gt;. Please take a look the system log and take the required\n        actions in order to solve the problem ASAP and communicate the end users.&lt;/p&gt;\n\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n\nprint(message.format('1','2','2'))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1535597743, "post_id": 52086412, "comment_id": 91127422, "body": "The 2nd option doesn&#39;t work.  It still has <code>Template</code> variables like <code>$message</code>."}], "tags": [], "owner": {"reputation": 1494, "user_id": 7926479, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-h0cTmvESd2U/AAAAAAAAAAI/AAAAAAAAAG0/AgASXHA7WdQ/photo.jpg?sz=128", "display_name": "Andres Urrego Angel", "link": "https://stackoverflow.com/users/7926479/andres-urrego-angel"}, "is_accepted": false, "score": 0, "last_activity_date": 1535578626, "creation_date": 1535578626, "answer_id": 52086412, "question_id": 52086096, "link": "https://stackoverflow.com/questions/52086096/formatting-error-python-3-6/52086412#52086412", "title": "formatting error python 3.6", "body": "<p>Guys thanks so much for your feedback. For the record this is how I figure it out;</p>\n\n<p><strong>option 1</strong></p>\n\n<pre><code>from string import Template\n\nmessage = Template(\"\"\"\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;style&gt;\n    body {\n    !background-color: #ffffcc;\n    font-family:courier;\n    font-size: 120%\n}\n&lt;/style&gt;\n&lt;div&gt;\n    &lt;h2 style=\"text-decoration:underline\"&gt;BI Alert process failure&lt;/h2&gt;\n    &lt;p&gt; The process &lt;b&gt; $fname &lt;/b&gt; has failure in the method &lt;b&gt; $method &lt;/b&gt; due the error &lt;b&gt; $error &lt;/b&gt;. Please take a look the system log and take the required \n        actions in order to solve the problem ASAP and communicate the end users.&lt;/p&gt;\n\n&lt;/div&gt;\n&lt;div style=\"text-decoration:underline\"&gt;\n    &lt;p&gt; For more information contact to &lt;b&gt;BI&lt;/b&gt; team.&lt;/p&gt;\n    &lt;img src=\"https://s3.amazonaws.com/gp-process/etl-deployment/chronos/medias/logo.png\"\n    width=\"100\" height=\"100\"&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\"\"\")\n\nprint(message.substitute(fname = 'hello',method='two',error='hi'))\n</code></pre>\n\n<p>**Option 2 **</p>\n\n<pre><code>message = \"\"\"\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;style&gt;\n    body {{\n    !background-color: #ffffcc;\n    font-family:courier;\n    font-size: 120%\n}}\n&lt;/style&gt;\n&lt;div&gt;\n    &lt;h2 style=\"text-decoration:underline\"&gt;BI Alert process failure&lt;/h2&gt;\n    &lt;p&gt; The process &lt;b&gt; $fname &lt;/b&gt; has failure in the method &lt;b&gt; $method &lt;/b&gt; due the error &lt;b&gt; $error &lt;/b&gt;. Please take a look the system log and take the required \n        actions in order to solve the problem ASAP and communicate the end users.&lt;/p&gt;\n\n&lt;/div&gt;\n&lt;div style=\"text-decoration:underline\"&gt;\n    &lt;p&gt; For more information contact to &lt;b&gt;BI&lt;/b&gt; team.&lt;/p&gt;\n    &lt;img src=\"https://s3.amazonaws.com/gp-process/etl-deployment/chronos/medias/logo.png\"\n    width=\"100\" height=\"100\"&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n\nprint(message.format('1','2','3'))\n</code></pre>\n\n<p>By the way, I think option 1 is cleaner.</p>\n\n<p>thanks </p>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1535598496, "last_edit_date": 1535598496, "creation_date": 1535598048, "answer_id": 52088647, "question_id": 52086096, "link": "https://stackoverflow.com/questions/52086096/formatting-error-python-3-6/52088647#52088647", "title": "formatting error python 3.6", "body": "<p>Since you tagged <code>python-3.6</code>, look into <a href=\"https://docs.python.org/3.6/reference/lexical_analysis.html#formatted-string-literals\" rel=\"nofollow noreferrer\">f-strings</a> (<a href=\"https://www.python.org/dev/peps/pep-0498/\" rel=\"nofollow noreferrer\">PEP 498</a>).  Here's a simple example with some embedded curly braces.  Values of variables are inserted.  <a href=\"https://docs.python.org/3.6/library/string.html#formatspec\" rel=\"nofollow noreferrer\">Formatting</a> can be applied as well:</p>\n\n<pre><code>&gt;&gt;&gt; a,b,c = 1,2,3\n&gt;&gt;&gt; print(f'{{a={a} b={b} c={c:02}}}')\n{a=1 b=2 c=03}\n</code></pre>\n\n<p>Your solution:</p>\n\n<pre><code>def do_error(fname,message,error):\n    print(f'''\n    &lt;!DOCTYPE html&gt;\n    &lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"UTF-8\"&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n    &lt;style&gt;\n        body {{\n        !background-color: #ffffcc;\n        font-family:courier;\n        font-size: 120%\n    }}\n    &lt;/style&gt;\n    &lt;div&gt;\n        &lt;h2 style=\"text-decoration:underline\"&gt;Alert process failure&lt;/h2&gt;\n        &lt;p&gt; The process &lt;b&gt;{fname}&lt;/b&gt; has failure in the method &lt;b&gt;{message}&lt;/b&gt; due the error &lt;b&gt;{error}&lt;/b&gt;. Please take a look the system log and take the required \n            actions in order to solve the problem ASAP and communicate the end users.&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n    ''')\n\ndo_error('FNAME','MESSAGE','ERROR')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;style&gt;\n    body {\n    !background-color: #ffffcc;\n    font-family:courier;\n    font-size: 120%\n}\n&lt;/style&gt;\n&lt;div&gt;\n    &lt;h2 style=\"text-decoration:underline\"&gt;Alert process failure&lt;/h2&gt;\n    &lt;p&gt; The process &lt;b&gt;FNAME&lt;/b&gt; has failure in the method &lt;b&gt;MESSAGE&lt;/b&gt; due the error &lt;b&gt;ERROR&lt;/b&gt;. Please take a look the system log and take the required \n        actions in order to solve the problem ASAP and communicate the end users.&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 1494, "user_id": 7926479, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-h0cTmvESd2U/AAAAAAAAAAI/AAAAAAAAAG0/AgASXHA7WdQ/photo.jpg?sz=128", "display_name": "Andres Urrego Angel", "link": "https://stackoverflow.com/users/7926479/andres-urrego-angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 958, "favorite_count": 0, "accepted_answer_id": 52086411, "answer_count": 3, "score": -1, "last_activity_date": 1535598496, "creation_date": 1535576881, "last_edit_date": 1535577901, "question_id": 52086096, "link": "https://stackoverflow.com/questions/52086096/formatting-error-python-3-6", "title": "formatting error python 3.6", "body": "<p>I get a html message that I have mapped as string and then I want to replace 3 variables with a parameter but I'm struggling with this. here is the code:</p>\n\n<pre><code>message = \"\"\"\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;style&gt;\n    body {\n    !background-color: #ffffcc;\n    font-family:courier;\n    font-size: 120%\n}\n&lt;/style&gt;\n&lt;div&gt;\n    &lt;h2 style=\"text-decoration:underline\"&gt;Alert process failure&lt;/h2&gt;\n    &lt;p&gt; The process &lt;b&gt;{{ }}&lt;/b&gt; has failure in the method &lt;b&gt;{{ }}&lt;/b&gt; due the error &lt;b&gt;{{ }}&lt;/b&gt;. Please take a look the system log and take the required \n        actions in order to solve the problem ASAP and communicate the end users.&lt;/p&gt;\n\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n\nprint(message.format('1','2','2'))\n</code></pre>\n\n<p>My error on the print is:</p>\n\n<blockquote>\n  <p>ValueError: expected ':' after conversion specifier</p>\n</blockquote>\n\n<p>Event though I have included a doubt <code>{{</code> and <code>}}</code> like in other posts. The code is not going thru</p>\n\n<p>Thanks for the help!\nAU</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "amazon-emr", "gzip"], "owner": {"reputation": 3946, "user_id": 247560, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/170a600a5dc35940531afc9bfc57b780?s=128&d=identicon&r=PG", "display_name": "TopCoder", "link": "https://stackoverflow.com/users/247560/topcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546854427, "creation_date": 1535576831, "last_edit_date": 1535592027, "question_id": 52086089, "link": "https://stackoverflow.com/questions/52086089/pyspark-reading-malformed-gz-file", "title": "pyspark - reading malformed .gz file", "body": "<p>I am reading a compressed .gz file in pyspark on EMR. But the \nfile is malformed (it's a json file with different number of columns in each row) and getting the following exception. Could someone provide pointers on how to read malformed gz file in pyspark?</p>\n\n<p>Code:</p>\n\n<pre><code>rdd = sc.textFile(\"s3n://abc/us/web-logs/2018/08/29/00/0000.gz\");\ndf = rdd.toDF();\nprint df.printSchema();\ndf = rdd.toDF();\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>&gt;     &gt; Traceback (most recent call last):   File \"&lt;stdin&gt;\", line 1, in\n&gt;     &gt; &lt;module&gt;   File \"/usr/lib/spark/python/pyspark/sql/session.py\", line\n&gt;     &gt; 58, in toDF\n&gt;     &gt;     return sparkSession.createDataFrame(self, schema, sampleRatio)   File \"/usr/lib/spark/python/pyspark/sql/session.py\",\n&gt; line 687, in\n&gt;     &gt; createDataFrame\n&gt;     &gt;     rdd, schema = self._createFromRDD(data.map(prepare), schema, samplingRatio)   File \"/usr/lib/spark/python/pyspark/sql/session.py\",\n&gt;     &gt; line 384, in _createFromRDD\n&gt;     &gt;     struct = self._inferSchema(rdd, samplingRatio, names=schema)   File \"/usr/lib/spark/python/pyspark/sql/session.py\", line 355, in\n&gt;     &gt; _inferSchema\n&gt;     &gt;     first = rdd.first()   File \"/usr/lib/spark/python/pyspark/rdd.py\", line 1376, in first\n&gt;     &gt;     rs = self.take(1)   File \"/usr/lib/spark/python/pyspark/rdd.py\", line 1328, in take\n&gt;     &gt;     totalParts = self.getNumPartitions()   File \"/usr/lib/spark/python/pyspark/rdd.py\", line 2455, in getNumPartitions\n&gt;     &gt;     return self._prev_jrdd.partitions().size()   File \"/usr/lib/spark/python/lib/py4j-0.10.6-src.zip/py4j/java_gateway.py\",\n&gt;     &gt; line 1160, in __call__   File\n&gt;     &gt; \"/usr/lib/spark/python/pyspark/sql/utils.py\", line 63, in deco\n&gt;     &gt;     return f(*a, **kw)   File \"/usr/lib/spark/python/lib/py4j-0.10.6-src.zip/py4j/protocol.py\", line\n&gt;     &gt; 324, in get_return_value py4j.protocol.Py4JError: An error occurred\n&gt;     &gt; while calling o81.partitions. Trace:\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$ComputationException:\n&gt;     &gt; java.lang.ArrayIndexOutOfBoundsException: 16227     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:553)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:419)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2041)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$StackTraceElements.forMember(StackTraceElements.java:53)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.Errors.formatSource(Errors.java:690)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.Errors.format(Errors.java:555)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.ProvisionException.getMessage(ProvisionException.java:59)\n&gt;     &gt;     at java.lang.Throwable.getLocalizedMessage(Throwable.java:391)  at\n&gt;     &gt; java.lang.Throwable.toString(Throwable.java:480)    at\n&gt;     &gt; java.lang.Throwable.&lt;init&gt;(Throwable.java:311)  at\n&gt;     &gt; java.lang.Exception.&lt;init&gt;(Exception.java:102)  at\n&gt;     &gt; java.lang.RuntimeException.&lt;init&gt;(RuntimeException.java:96)     at\n&gt;     &gt; py4j.Py4JException.&lt;init&gt;(Py4JException.java:56)    at\n&gt;     &gt; py4j.Py4JJavaException.&lt;init&gt;(Py4JJavaException.java:59)    at\n&gt;     &gt; py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:251)    at\n&gt;     &gt; py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)  at\n&gt;     &gt; py4j.Gateway.invoke(Gateway.java:282)   at\n&gt;     &gt; py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\n&gt;     &gt;     at py4j.commands.CallCommand.execute(CallCommand.java:79)   at\n&gt;     &gt; py4j.GatewayConnection.run(GatewayConnection.java:214)  at\n&gt;     &gt; java.lang.Thread.run(Thread.java:748) Caused by:\n&gt;     &gt; java.lang.ArrayIndexOutOfBoundsException: 16227     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.asm.$ClassReader.readClass(Unknown\n&gt;     &gt; Source)     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.asm.$ClassReader.accept(Unknown\n&gt;     &gt; Source)     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.asm.$ClassReader.accept(Unknown\n&gt;     &gt; Source)     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$LineNumbers.&lt;init&gt;(LineNumbers.java:62)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$StackTraceElements$1.apply(StackTraceElements.java:36)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$StackTraceElements$1.apply(StackTraceElements.java:33)\n&gt;     &gt;     at\n&gt;     &gt; com.amazon.ws.emr.hadoop.fs.shaded.com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:549)\n&gt;     &gt;     ... 20 more\n</code></pre>\n"}, {"tags": ["python", "dictionary", "search"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1535576828, "post_id": 52086044, "comment_id": 91122481, "body": "Looks good to me. It&#39;s a single pass of the list, but I&#39;m not sure I understand the <code>[0]</code> index. You might be better with a <code>for</code> loop with a <code>break</code> if you only want the first result."}], "answers": [{"tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": true, "score": 2, "last_activity_date": 1535577525, "creation_date": 1535577525, "answer_id": 52086205, "question_id": 52086044, "link": "https://stackoverflow.com/questions/52086044/efficient-way-of-searching-for-a-value-in-a-nested-dictionary/52086205#52086205", "title": "Efficient Way of Searching for a Value in a Nested Dictionary?", "body": "<p>With your approach, you would end up iterating through the entire list_of_dict even after a match is found.</p>\n\n<p>You can use <code>next</code> to get only the first match</p>\n\n<pre><code>next((x['C'] for x in list_of_dic if x['C']['name'] == 'some_name5'), None)\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 9841032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2547ba15e982c4e52da849e4fda91e?s=128&d=identicon&r=PG&f=1", "display_name": "LeetCoder", "link": "https://stackoverflow.com/users/9841032/leetcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 52086205, "answer_count": 1, "score": -1, "last_activity_date": 1535577525, "creation_date": 1535576574, "question_id": 52086044, "link": "https://stackoverflow.com/questions/52086044/efficient-way-of-searching-for-a-value-in-a-nested-dictionary", "title": "Efficient Way of Searching for a Value in a Nested Dictionary?", "body": "<p>If I have a list of nested dictionaries of arbitrary length that look something like this:</p>\n\n<pre><code>list_of_dic = [{'A': 1, 'B': 2, 'C': {'name': 'some_name1', ...}},\n               {'A': 4, 'B': 1, 'C': {'name': 'some_name2', ...}},\n               {'A': 3, 'B': 4, 'C': {'name': 'some_name3', ...}},\n               ...]\n</code></pre>\n\n<p>And I want to find the nested dictionary (i.e. the dictionary associated with the key <code>C</code>) that contains the <code>name</code> I want (each <code>name</code> is unique; there are no duplicates), what is the most efficient way to do this?</p>\n\n<p>I can think of 2 methods; the first is to just loop through everything, which sounds like a terrible way to do this, and the second is this:</p>\n\n<pre><code>[x['C'] for x in list_of_dic if x['C']['name'] == 'some_name5'][0]\n</code></pre>\n\n<p>Is there a better, more efficient way to do this, because <code>list_of_dic</code> has the potential to be quite long. Thank you.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9365528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d266424d89536343750bbc2d1aa22cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Machi", "link": "https://stackoverflow.com/users/9365528/machi"}, "edited": false, "score": 0, "creation_date": 1535577683, "post_id": 52086125, "comment_id": 91122792, "body": "thank you, do you have a link to understand more about reshaping? Trying to understand the:          <code>d[k] for d in data for k in d</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 81, "user_id": 9365528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d266424d89536343750bbc2d1aa22cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Machi", "link": "https://stackoverflow.com/users/9365528/machi"}, "edited": false, "score": 0, "creation_date": 1535577713, "post_id": 52086125, "comment_id": 91122801, "body": "@Machi I am just flattening out your list of dicts into a single dictionary using a simple nested dictionary comprehension."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1535577402, "last_edit_date": 1535577402, "creation_date": 1535577021, "answer_id": 52086125, "question_id": 52086012, "link": "https://stackoverflow.com/questions/52086012/how-to-get-a-nested-dictionary-inside-a-list-into-dataframe/52086125#52086125", "title": "How to get a nested dictionary inside a list into Dataframe?", "body": "<p>Reshape your data and then call <code>DataFrame.to_dict</code>:</p>\n\n<pre><code>df = pd.DataFrame.from_dict(\n    {k : d[k] for d in data for k in d}, orient='index')\n</code></pre>\n\n<p></p>\n\n<pre><code>df[['initialprice', 'price', 'high', 'low']]\n\n         initialprice       price        high         low\nBTC-ACM    0.00000380  0.00000428  0.00000510  0.00000351\nBTC-AEON   0.00010652  0.00011040  0.00013774  0.00010616\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1535577444, "post_id": 52086177, "comment_id": 91122700, "body": "Ah, this is sneakily succinct, but quite inefficient. Especially when there are thousands of rows, creating thousands of dataframes, transposing them, and concatenating them is not a good idea."}], "tags": [], "owner": {"reputation": 16731, "user_id": 10201580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awLHs.png?s=128&g=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/10201580/chris-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1535577340, "creation_date": 1535577340, "answer_id": 52086177, "question_id": 52086012, "link": "https://stackoverflow.com/questions/52086012/how-to-get-a-nested-dictionary-inside-a-list-into-dataframe/52086177#52086177", "title": "How to get a nested dictionary inside a list into Dataframe?", "body": "<p>You could try:</p>\n\n<pre><code>pd.concat([pd.DataFrame(x).T for x in data])\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9365528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d266424d89536343750bbc2d1aa22cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Machi", "link": "https://stackoverflow.com/users/9365528/machi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 52086125, "answer_count": 2, "score": 1, "last_activity_date": 1535577402, "creation_date": 1535576421, "last_edit_date": 1535576973, "question_id": 52086012, "link": "https://stackoverflow.com/questions/52086012/how-to-get-a-nested-dictionary-inside-a-list-into-dataframe", "title": "How to get a nested dictionary inside a list into Dataframe?", "body": "<p>I'm trying to get data from an exchange's api, and it is in a list with dict inside, I think? So I want to create a table, with the name, initial price, price, high, low and so on.. question: How do I get them into the dataframe format? Index with <code>pd.Dataframe</code> works but only if it's one stock.</p>\n\n<p><code>pd.Series</code> is the best I got to so far and looks like this: </p>\n\n<pre><code>1 {'BTC-ACM': {'initialprice': '0.00000390', 'pr...\n0 {'BTC-AEON': {'initialprice': '0.00010617', 'p...\n</code></pre>\n\n<p>Raw Data look like this:</p>\n\n<pre><code>[{'BTC-ACM': {'initialprice': '0.00000380', 'price': '0.00000428', 'high': \n'0.00000510', 'low': '0.00000351', 'volume': '0.24647930', '\n bid': '0.00000433', 'ask': '0.00000465'}}, {'BTC-AEON': {'initialprice': \n'0.00010652', 'price': '0.00011040', 'high': '0.00013774', 'lo\n w': '0.00010616', 'volume': '1.17486173', 'bid': '0.00011040', 'ask': \n'0.00011867'}},....]\n</code></pre>\n\n<p>Attempt to make it a table like this:</p>\n\n<pre><code>Name   | InitialPrice |Price |High |Low|\nBTC-ACM| 0.0000132    |0.123 |0.9  |0.2|\nBTC-AEO| 0.2131243    |0.213 |0.2  |0.1|\n</code></pre>\n"}, {"tags": ["python", "autoencoder"], "comments": [{"owner": {"reputation": 1403, "user_id": 10210511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05fb1a7498067d7e438c7976bac27a8?s=128&d=identicon&r=PG&f=1", "display_name": "J. Blackadar", "link": "https://stackoverflow.com/users/10210511/j-blackadar"}, "edited": false, "score": 1, "creation_date": 1535577961, "post_id": 52085986, "comment_id": 91122908, "body": "Welcome to Stack Overflow! We might be able to help you better if you provide some examples of what you&#39;ve already tried. Please edit your question to include the section of code producing this error. At first glance, it seems your image is not RGB?"}, {"owner": {"reputation": 1, "user_id": 10291606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o-d3AsDV0_4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOxsjjJwhrINy_AykbKowyfem1p5w/mo/photo.jpg?sz=128", "display_name": "Amro Saleh", "link": "https://stackoverflow.com/users/10291606/amro-saleh"}, "reply_to_user": {"reputation": 1403, "user_id": 10210511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05fb1a7498067d7e438c7976bac27a8?s=128&d=identicon&r=PG&f=1", "display_name": "J. Blackadar", "link": "https://stackoverflow.com/users/10210511/j-blackadar"}, "edited": false, "score": 0, "creation_date": 1535622291, "post_id": 52085986, "comment_id": 91137783, "body": "Thanks J.Blackader.i am using grayscale images -ultrasound- the following code used:"}, {"owner": {"reputation": 1, "user_id": 10291606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o-d3AsDV0_4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOxsjjJwhrINy_AykbKowyfem1p5w/mo/photo.jpg?sz=128", "display_name": "Amro Saleh", "link": "https://stackoverflow.com/users/10291606/amro-saleh"}, "reply_to_user": {"reputation": 1403, "user_id": 10210511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05fb1a7498067d7e438c7976bac27a8?s=128&d=identicon&r=PG&f=1", "display_name": "J. Blackadar", "link": "https://stackoverflow.com/users/10210511/j-blackadar"}, "edited": false, "score": 0, "creation_date": 1535622308, "post_id": 52085986, "comment_id": 91137796, "body": "# imports  import argparse  import logging  import os    import numpy as np  import tensorflow as tf  from six.moves import xrange  from tqdm import tqdm    from autoencoder_training import build_model  from utils import configs  from utils.ops import get_pkl_file  from utils.ops import     from utils.vector_file_handler import VectorSaver  from utils.vector_file_handler import establish_vectors_folder    # setup  logging.basicConfig(level=logging.DEBUG)    # variables  if <b>name</b> == &#39;<b>main</b>&#39;:      parser = argparse.ArgumentParser(description=&#39;Program to vectorize &#39; \\"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1535728093, "post_id": 52085986, "comment_id": 91187494, "body": "Do not post code in the comments, when you can edit your question."}], "owner": {"reputation": 1, "user_id": 10291606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o-d3AsDV0_4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOxsjjJwhrINy_AykbKowyfem1p5w/mo/photo.jpg?sz=128", "display_name": "Amro Saleh", "link": "https://stackoverflow.com/users/10291606/amro-saleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1535576288, "creation_date": 1535576288, "question_id": 52085986, "link": "https://stackoverflow.com/questions/52085986/trying-to-vectorizaion-of-gray-scale-image-from-bottelneck-layer", "title": "Trying to vectorizaion of gray scale image from bottelneck layer", "body": "<p>i am working on program that make a vectorization for gray scale images not RGB that taken bottleneck layer from autoencoder  but i have the following error, any suggestion:</p>\n\n<p>Root: image at /path/to/images is not RGB , therefore not using it</p>\n"}, {"tags": ["python", "unit-testing", "mocking", "patch", "pathlib"], "comments": [{"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1535588011, "post_id": 52085969, "comment_id": 91125534, "body": "<code>mock_mkdir.assert_called_with(&quot;any path&quot;)</code>? is that what you needed?"}, {"owner": {"reputation": 556, "user_id": 6587755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/da6387cebcb086ae76028d41f36bab70?s=128&d=identicon&r=PG", "display_name": "iceblueorbitz", "link": "https://stackoverflow.com/users/6587755/iceblueorbitz"}, "reply_to_user": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1535588855, "post_id": 52085969, "comment_id": 91125677, "body": "This doesn&#39;t work, since the Path instance created in the <code>check_dirs</code> function calls the <code>.mkdir()</code> method and the <code>self</code> parameter which technically gets passed in is obscured from the mock object. If I try what you put, it says the expected call was <code>mkdir(&quot;any path&quot;)</code> and the actual call was <code>mkdir()</code>."}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1535589490, "post_id": 52085969, "comment_id": 91125808, "body": "the <code>mkdir()</code> have no parameter defined, it is the <code>Path</code> class defines what directory to create. so the class <code>Path</code> is to be tested with directory."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1535679630, "post_id": 52085969, "comment_id": 91165608, "body": "Why not include your checkdir() listing? It makes a better example. Also, why does not checkdir take an arguement? Perhaps you can live with no mock at all and no hidden global state."}], "answers": [{"comments": [{"owner": {"reputation": 944, "user_id": 4222629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/koKO1.jpg?s=128&g=1", "display_name": "sagarr", "link": "https://stackoverflow.com/users/4222629/sagarr"}, "edited": false, "score": 0, "creation_date": 1547027720, "post_id": 52106927, "comment_id": 95046890, "body": "are you sure about assert? coz am getting error as other params like <code>exist_ok</code> &amp; <code>parents</code> are not passed"}, {"owner": {"reputation": 944, "user_id": 4222629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/koKO1.jpg?s=128&g=1", "display_name": "sagarr", "link": "https://stackoverflow.com/users/4222629/sagarr"}, "edited": false, "score": 0, "creation_date": 1547028636, "post_id": 52106927, "comment_id": 95047408, "body": "solved, below assert worked for me: <code>assert mock_mkdir.call_args == call(path, exist_ok=True, parents=True)</code>"}], "tags": [], "owner": {"reputation": 556, "user_id": 6587755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/da6387cebcb086ae76028d41f36bab70?s=128&d=identicon&r=PG", "display_name": "iceblueorbitz", "link": "https://stackoverflow.com/users/6587755/iceblueorbitz"}, "is_accepted": false, "score": 3, "last_activity_date": 1535674580, "creation_date": 1535674580, "answer_id": 52106927, "question_id": 52085969, "link": "https://stackoverflow.com/questions/52085969/patching-pathlib-and-testing-the-string-during-calls/52106927#52106927", "title": "Patching pathlib and testing the string during calls", "body": "<p>I found a nifty solution. Trying to mock the whole Path class was proving very convoluted especially because I wanted the path class to do all the normal behavior except for modify the disk. What I found out was by enabling autospec, I could now assert the call including the 'hidden' self argument like so:</p>\n\n<pre><code>def test_correct_dir_was_made(self):\nwith patch('my.module.Path.mkdir', autospec=True) as mock_mkdir:\n    check_dirs()\ntest_path = Path('path', 'to', 'test')\nmock_mkdir.assert_called_once_with(test_path)\n</code></pre>\n\n<p>Now I can assert easily that the correct directory would have been made. There may be a way to mock the entire Path class with autospec and achieve a similar result, but it seems more sane to patch out the method I don't want and still be able to make assertions without having direct access to the instance that called the method.</p>\n"}], "owner": {"reputation": 556, "user_id": 6587755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/da6387cebcb086ae76028d41f36bab70?s=128&d=identicon&r=PG", "display_name": "iceblueorbitz", "link": "https://stackoverflow.com/users/6587755/iceblueorbitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535674580, "creation_date": 1535576220, "question_id": 52085969, "link": "https://stackoverflow.com/questions/52085969/patching-pathlib-and-testing-the-string-during-calls", "title": "Patching pathlib and testing the string during calls", "body": "<p>I started using pathlib, and really like using it for the most part. The problem I'm having is testing it due to the nature of methods instead of functions.</p>\n\n<pre><code>def test_correct_dir_was_made(self):\n    with patch('my.module.Path.mkdir') as mock_mkdir:\n        check_dirs()\n        mock_mkdir.assert_called_once()\n</code></pre>\n\n<p>In the <code>check_dirs</code> function, a path is generated dynamically and created if it doesn't exist. I can figure out how to make sure it was called arbitrarily, but my problem is I am not sure how to capture the self parameter passed into Path.mkdir to check that its path string was correct. With os.path this was easier, because mocking the mkdir function I could simply assert it was called with the correct string. Any ideas?</p>\n"}, {"tags": ["python", "user-interface", "refresh", "maya", "keyframe"], "comments": [{"owner": {"reputation": 1375, "user_id": 9142615, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tSg9unJnK74/AAAAAAAAAAI/AAAAAAAAABw/afWGZ6SyceA/photo.jpg?sz=128", "display_name": "haggi krey", "link": "https://stackoverflow.com/users/9142615/haggi-krey"}, "edited": false, "score": 0, "creation_date": 1535614514, "post_id": 52085966, "comment_id": 91132850, "body": "If you want to export all keys to a file, I&#39;m quite sure there is a method to simply request all keys from an animation curve. Then you can write them to a file."}, {"owner": {"reputation": 2302, "user_id": 2742418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbieZ.png?s=128&g=1", "display_name": "DrWeeny", "link": "https://stackoverflow.com/users/2742418/drweeny"}, "edited": false, "score": 0, "creation_date": 1535618336, "post_id": 52085966, "comment_id": 91135127, "body": "I agree with Haggi, you don&#39;t have to refresh the timeline to get all the value from a animated curve"}, {"owner": {"reputation": 1, "user_id": 10290978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d40a401babbdd1169355c7accb224a?s=128&d=identicon&r=PG&f=1", "display_name": "Bandu", "link": "https://stackoverflow.com/users/10290978/bandu"}, "edited": false, "score": 0, "creation_date": 1535618526, "post_id": 52085966, "comment_id": 91135237, "body": "The thing is that I&#39;m writing it as a certain filetype that needs the time, xyzw rotation and xyz position, in that order for each key. So if I got all the keys for a curve and then wrote that to the file, it wouldn&#39;t work in the format. And if certain curves had keys at different times it would also not work."}, {"owner": {"reputation": 1375, "user_id": 9142615, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tSg9unJnK74/AAAAAAAAAAI/AAAAAAAAABw/afWGZ6SyceA/photo.jpg?sz=128", "display_name": "haggi krey", "link": "https://stackoverflow.com/users/9142615/haggi-krey"}, "edited": false, "score": 0, "creation_date": 1535628904, "post_id": 52085966, "comment_id": 91142116, "body": "With the keyframe command you can query a value from a animcurve at a arbitrary time value so this should be no problem even if the keys are not evenly distributed."}, {"owner": {"reputation": 1, "user_id": 10290978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d40a401babbdd1169355c7accb224a?s=128&d=identicon&r=PG&f=1", "display_name": "Bandu", "link": "https://stackoverflow.com/users/10290978/bandu"}, "edited": false, "score": 0, "creation_date": 1535643798, "post_id": 52085966, "comment_id": 91152490, "body": "Although I didn&#39;t manage to find a way to query a value at a specific time with the keyframe command, I could do it with the getAttr command, so I got it working. Thanks for the help!"}, {"owner": {"reputation": 4158, "user_id": 4759736, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JHRRj.jpg?s=128&g=1", "display_name": "Green Cell", "link": "https://stackoverflow.com/users/4759736/green-cell"}, "edited": false, "score": 0, "creation_date": 1535683558, "post_id": 52085966, "comment_id": 91166313, "body": "haggi is correct, you don&#39;t have to change the current frame or have the object selected in order to get a key&#39;s value. Use <code>cmds.keyframe(&quot;obj.attr&quot;, q=True)</code> to get all frames of that plug, then <code>cmds.keyframe(&quot;obj.attr&quot;, q=True, time=(10, 10), eval=True)</code> to get the value at a specific time. In fact, changing the current frame will make your script run significantly slower so it&#39;s best to avoid that."}], "owner": {"reputation": 1, "user_id": 10290978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d40a401babbdd1169355c7accb224a?s=128&d=identicon&r=PG&f=1", "display_name": "Bandu", "link": "https://stackoverflow.com/users/10290978/bandu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535576202, "creation_date": 1535576202, "question_id": 52085966, "link": "https://stackoverflow.com/questions/52085966/refreshing-maya-ui-during-script", "title": "Refreshing Maya UI during script?", "body": "<p>I'm making a script that goes through a skeleton and for each joint checks how many keys it has and for each key will write the position and rotation values out to a file.</p>\n\n<p>but when I select a joint through code, it does not update the timeslider to show the joints keyframe ticks. And my next step is to use the findKeyframe command to find the first keyframe, and then just find the next and the next for the amount of keys the joint has. But since it dosn't update the UI all I'm getting is the same value over and over.</p>\n\n<p>I've tried using timeControl to set showKeyframes and force an update, which just doesn't seem to work, and I've also tried the refresh command which does update the current view, but no the UI.</p>\n\n<p>Are there any other way I might be able to refresh the UI in the middle of a script using python?</p>\n"}, {"tags": ["python", "datetime", "strptime", "arcpy", "arcmap"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1535576173, "post_id": 52085930, "comment_id": 91122213, "body": "Can you please break this down into paragraphs or more code-based? I&#39;ve just opened this on my phone and it&#39;s literally a wall of text"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 1, "creation_date": 1535576601, "post_id": 52085930, "comment_id": 91122392, "body": "You should apply <code>strptime</code> to a string, not a <code>datetime</code> object. Your <code>datetime</code> objects do not have any format."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9872033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701897510d6b7eafca0c66dfaa6f0b6a?s=128&d=identicon&r=PG&f=1", "display_name": "PythonPerson", "link": "https://stackoverflow.com/users/9872033/pythonperson"}, "edited": false, "score": 0, "creation_date": 1536099735, "post_id": 52100502, "comment_id": 91300270, "body": "Whenever I try that I get an error message that reads &quot;AttributeError: &#39;list&#39; object has no attribute &#39;strftime&#39; &quot;."}, {"owner": {"reputation": 505, "user_id": 2993024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c139a2fd37a253e01bbc7ec95efacdf6?s=128&d=identicon&r=PG&f=1", "display_name": "BigGerman", "link": "https://stackoverflow.com/users/2993024/biggerman"}, "reply_to_user": {"reputation": 1, "user_id": 9872033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701897510d6b7eafca0c66dfaa6f0b6a?s=128&d=identicon&r=PG&f=1", "display_name": "PythonPerson", "link": "https://stackoverflow.com/users/9872033/pythonperson"}, "edited": false, "score": 0, "creation_date": 1536164317, "post_id": 52100502, "comment_id": 91328910, "body": "If row is a list then you need to pass in the index of the list that contains the datetime object. So if the list only contains one thing, i.e. <code>[datetime.datetime(2003, 6, 3, 0, 0)]</code> then you would use <code>row[0]</code>. So then your code would be <code>dtm = row[0].strftime(&#39;%Y&#47;%m&#47;%d %H:%M&#39;)</code>"}, {"owner": {"reputation": 1, "user_id": 9872033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701897510d6b7eafca0c66dfaa6f0b6a?s=128&d=identicon&r=PG&f=1", "display_name": "PythonPerson", "link": "https://stackoverflow.com/users/9872033/pythonperson"}, "edited": false, "score": 0, "creation_date": 1536179628, "post_id": 52100502, "comment_id": 91335750, "body": "Thank you that worked.  The last line of the code is:     arcpy.CalculateField_management(fc, &quot;DOY&quot;, dtm.timetuple().tm_yday)  which is supposed to take the dtm and calculate the day of the year from it and add it to a field called &quot;DOY&quot;.  However, when I try this I get an error message that reads &quot;AttributeError: &#39;str&#39; object has no attribute &#39;timetuple&#39; &quot; so does that mean I need to do a strptime function on a new line after the strftime one to get the object back into a datetime format?  And if so what would that look like?"}, {"owner": {"reputation": 505, "user_id": 2993024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c139a2fd37a253e01bbc7ec95efacdf6?s=128&d=identicon&r=PG&f=1", "display_name": "BigGerman", "link": "https://stackoverflow.com/users/2993024/biggerman"}, "reply_to_user": {"reputation": 1, "user_id": 9872033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701897510d6b7eafca0c66dfaa6f0b6a?s=128&d=identicon&r=PG&f=1", "display_name": "PythonPerson", "link": "https://stackoverflow.com/users/9872033/pythonperson"}, "edited": false, "score": 0, "creation_date": 1536242007, "post_id": 52100502, "comment_id": 91360413, "body": "Just do the <code>.timetuple().tm_yday</code> function on the original datetime object: <code>row[0].timetuple().tm_yday</code>"}, {"owner": {"reputation": 505, "user_id": 2993024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c139a2fd37a253e01bbc7ec95efacdf6?s=128&d=identicon&r=PG&f=1", "display_name": "BigGerman", "link": "https://stackoverflow.com/users/2993024/biggerman"}, "reply_to_user": {"reputation": 1, "user_id": 9872033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701897510d6b7eafca0c66dfaa6f0b6a?s=128&d=identicon&r=PG&f=1", "display_name": "PythonPerson", "link": "https://stackoverflow.com/users/9872033/pythonperson"}, "edited": false, "score": 0, "creation_date": 1536242463, "post_id": 52100502, "comment_id": 91360732, "body": "I don&#39;t think you are using CalculateField correctly though. CalculateField can calculate a value for all records in the table at once so there is no reason to use it while iterating through the table row-by-row"}], "tags": [], "owner": {"reputation": 505, "user_id": 2993024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c139a2fd37a253e01bbc7ec95efacdf6?s=128&d=identicon&r=PG&f=1", "display_name": "BigGerman", "link": "https://stackoverflow.com/users/2993024/biggerman"}, "is_accepted": false, "score": 1, "last_activity_date": 1535642440, "creation_date": 1535642440, "answer_id": 52100502, "question_id": 52085930, "link": "https://stackoverflow.com/questions/52085930/getting-datetime-data-into-the-correct-format-arcpy-python-arcmap/52100502#52100502", "title": "Getting datetime data into the correct format arcpy python arcmap", "body": "<p>You are using the wrong datetime method. The error that you got shows that value in <code>row</code> is already a <a href=\"https://docs.python.org/2/library/datetime.html#datetime.datetime\" rel=\"nofollow noreferrer\">datetime object</a>. </p>\n\n<p><code>strptime</code> takes a string and a datetime string format and returns a datetime object.</p>\n\n<p>For example this code: <code>datetime.datetime.strptime('2018/08/30 10:30', '%Y/%m/%d %H:%M')</code> returns the object <code>datetime.datetime(2018, 8, 30, 10, 30)</code></p>\n\n<p><code>strftime</code> returns a string representing the date in the format specified.</p>\n\n<p>You already have a datetime in <code>row</code> so you need to use <code>strftime</code> to convert that to a string. </p>\n\n<p>The proper code to convert <code>row</code> into a date string would be:</p>\n\n<pre><code>dtm = row.strftime('%Y/%m/%d %H:%M')\n</code></pre>\n\n<p>This will return the string representing the datetime. For example for the datetime object of <code>datetime.datetime(2003, 6, 3, 0, 0)</code> the returned string would be '2003/06/03 00:00'</p>\n"}], "owner": {"reputation": 1, "user_id": 9872033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701897510d6b7eafca0c66dfaa6f0b6a?s=128&d=identicon&r=PG&f=1", "display_name": "PythonPerson", "link": "https://stackoverflow.com/users/9872033/pythonperson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2109, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535642440, "creation_date": 1535576054, "last_edit_date": 1535576602, "question_id": 52085930, "link": "https://stackoverflow.com/questions/52085930/getting-datetime-data-into-the-correct-format-arcpy-python-arcmap", "title": "Getting datetime data into the correct format arcpy python arcmap", "body": "<p>I am using <code>datetime</code> in <code>Arcpy</code> to convert a <code>\"Sample Date\"</code> field in a feature class to the day of the year.  The date in the field is in a <code>month/day/year</code> format and it doesn't include any leading zeros (ex. <code>7/8/2018</code> instead of <code>07/08/2018</code>). </p>\n\n<p>Whenever I try running the following line of code,</p>\n\n<pre><code>dtm = datetime.datetime.strptime(row, '%Y/%m/%d %H:%M')\n</code></pre>\n\n<p>I get the following error:</p>\n\n<p><code>ValueError: time data '[datetime.datetime(2003, 6, 3, 0, 0)]' does not match format '%Y/%m/%d %H:%M'</code>  </p>\n\n<p>The sample date field that I am using does not include any time data which I believe is where the two zeros at the end of the error message are coming from.  I just assumed that they were hours and minutes but I am not sure.  </p>\n\n<p>Does anyone know what the zeros are so that I can change my code to fit the correct format or how I can avoid the zeros altogether?  I tried <code>datetime.date</code> instead of <code>datetime.datetime</code> as well and still had complications.  I can post the long version of the code if needed but the code that I provided is the cause of the error message. I have included the link of the <code>datetime</code> reference I used. The website is for <code>strftime</code> not <code>strptime</code> but I believe that it works the same. Trying <code>strftime</code> throws an error as well. Link: <a href=\"http://strftime.org/\" rel=\"nofollow noreferrer\">http://strftime.org/</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1535576253, "post_id": 52085923, "comment_id": 91122243, "body": "If you have three <code>1</code>s per row, and you want one <code>1</code> per row, then what determines where that <code>1</code> goes in the result?"}, {"owner": {"reputation": 1, "user_id": 10292033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jpjpB9Twjhc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNByQKJplyFowxRcicAntEITHT7Pw/mo/photo.jpg?sz=128", "display_name": "Tiko", "link": "https://stackoverflow.com/users/10292033/tiko"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1535576754, "post_id": 52085923, "comment_id": 91122451, "body": "In the end, two of the three 1s need to be deleted. The 1s contain basically preferences for the single columns that represent topics that have been chosen. So the idea is to assign each individual - represented by the ID - to a topic based on the preferences so that the groups that handle one topic are about the same size"}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1535576855, "post_id": 52085923, "comment_id": 91122489, "body": "From the sounds of it, this is what you&#39;re looking for. <a href=\"https://en.wikipedia.org/wiki/Set_cover_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Set_cover_problem</a>"}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 1, "creation_date": 1535576902, "post_id": 52085923, "comment_id": 91122505, "body": "And for some unsolicited advice, which is offered with the friendliest of intentions: Please read this <a href=\"https://en.wikipedia.org/wiki/First_normal_form\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/First_normal_form</a>"}], "owner": {"reputation": 1, "user_id": 10292033, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jpjpB9Twjhc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNByQKJplyFowxRcicAntEITHT7Pw/mo/photo.jpg?sz=128", "display_name": "Tiko", "link": "https://stackoverflow.com/users/10292033/tiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535578206, "creation_date": 1535576007, "last_edit_date": 1535577002, "question_id": 52085923, "link": "https://stackoverflow.com/questions/52085923/manipulate-dataframe-so-that-column-sum-is-equal-to-constant", "title": "Manipulate dataframe so that column sum is equal to constant", "body": "<p>I got a dataframe with 1500 rows and 25 columns where each cell can take the value 0 or 1 with a maximum of three 1s per row:</p>\n\n<p>ID, t01, t02, t03, t04, t05, .... t25</p>\n\n<p>s0001, 0, 1, 1, 0, 0,...., 1</p>\n\n<p>s0002, 1, 0, 1, 1, 0 ,..., 0</p>\n\n<p>s0003, 0, 1, 0, 0, 1, ...., 1</p>\n\n<p>.</p>\n\n<p>.</p>\n\n<p>.</p>\n\n<p>s1500, 0, 0, 1, 1, 1,...., 0</p>\n\n<p>Now I need to transform this dataframe, so that each row only contains a single 1 and the sum of the columns all add up to 60 (1500/25 =60 ; +/- 2 tolerance is fine), meaning that all 1s are distributed evenly among the columns. \nI tried solving this through using lists and assigning the IDs step by step to individual lists, however, this only leaves me with a bunch of unassigned IDs for the very last columns since I mainly used if and for loops to iterate over the single lists, not the entire data frame. </p>\n\n<p>Any help would be appreciated!</p>\n\n<p>UPDATE\nAs mentioned in the comment: In the end, two of the three 1s need to be deleted. The 1s contain basically preferences for the single columns that represent topics that have been chosen. So the idea is to assign each individual - represented by the ID - to a topic based on the preferences so that the groups that handle one topic are about the same size</p>\n"}, {"tags": ["python", "python-2.7", "module"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1535576955, "post_id": 52085921, "comment_id": 91122531, "body": "Pretty sure you can&#39;t use modulefinder on a .pyd (it says it works on &quot;scripts&quot;, which a .pyd is not).  Have you <i>installed</i> the package you&#39;re trying to use, or just copied its files somewhere?"}, {"owner": {"reputation": 230, "user_id": 6024187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9hGu.png?s=128&g=1", "display_name": "Finncent Price", "link": "https://stackoverflow.com/users/6024187/finncent-price"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1535577511, "post_id": 52085921, "comment_id": 91122724, "body": "Just copied it."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1535906198, "post_id": 52085921, "comment_id": 91227619, "body": "Is there a reason you didn&#39;t install it?  You could also look at the <code>setup.py</code> to see what dependencies are listed there."}, {"owner": {"reputation": 230, "user_id": 6024187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9hGu.png?s=128&g=1", "display_name": "Finncent Price", "link": "https://stackoverflow.com/users/6024187/finncent-price"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1535906311, "post_id": 52085921, "comment_id": 91227650, "body": "I didn&#39;t install it because there are no setup.py or other installation scripts.  The author compiles it in Virtual Studio, which I don&#39;t have, and uses it as the .pyd file."}], "owner": {"reputation": 230, "user_id": 6024187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9hGu.png?s=128&g=1", "display_name": "Finncent Price", "link": "https://stackoverflow.com/users/6024187/finncent-price"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535575995, "creation_date": 1535575995, "question_id": 52085921, "link": "https://stackoverflow.com/questions/52085921/using-modulefinder-in-python-2-7-to-discover-dependencies-in-a-pyd-file", "title": "Using modulefinder in python 2.7 to discover dependencies in a pyd file", "body": "<p>I am trying to load a module from a .pyd file I have downloaded from a GitHub repo.  I am running python in the directory with the .pyd file and references to other files in the directory work, so I think the problem isn't a path issue.  Other files in the GitHub show how the module is loaded by that author, so it isn't a naming problem, either.</p>\n\n<p>When I attempt to load module XYZ from XYZ.pyd I get the following error:</p>\n\n<blockquote>\n  <p>ImportError: DLL load failed: The specified module could not be found.</p>\n</blockquote>\n\n<p>Searching this error tells me that the problem is likely that XYZ.pyd depends on another DLL that I don't have, so I want to trace dependency.  I'm using modulefinder, which is part of the python standard library.</p>\n\n<p>When I try to run modulefinder on the module in XYZ.pyd, I get the following error:</p>\n\n<blockquote>\n  <p>TypeError: compile() expected string without null bytes</p>\n</blockquote>\n\n<p>Search results for this error are mostly about JSON, which I'm not sure have anything to do with this problem.  I can get modulefinder to work on ordinary .py files that I have written myself.</p>\n\n<p>My questions are: is it generally possible to use modulefinder on a .pyd file, and if so, is the syntax different from the the usage <a href=\"https://docs.python.org/2/library/modulefinder.html\" rel=\"nofollow noreferrer\">given in the manual</a>.  More specifically, how do I use modulefinder to see the dependencies on a .pyd file?</p>\n"}, {"tags": ["python", "regex", "scrapy"], "comments": [{"owner": {"reputation": 3978, "user_id": 1084647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0NBj.jpg?s=128&g=1", "display_name": "Valdir Stumm Junior", "link": "https://stackoverflow.com/users/1084647/valdir-stumm-junior"}, "edited": false, "score": 0, "creation_date": 1535576302, "post_id": 52085907, "comment_id": 91122262, "body": "You can try using js2xml: <a href=\"https://github.com/scrapinghub/js2xml\" rel=\"nofollow noreferrer\">github.com/scrapinghub/js2xml</a> to parse the JS code for you."}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1535576373, "post_id": 52085907, "comment_id": 91122289, "body": "It&#39;s a long one, but <a href=\"https://regex101.com/r/cvC4V0/1\" rel=\"nofollow noreferrer\">This pattern</a> should work. Regardless of length it&#39;s still pretty efficient."}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535619878, "post_id": 52087965, "comment_id": 91136133, "body": "Hello @gangabass! Thank for your answer!  I have an error for the code which sounds like this:    source_json = re.sub(ur&#39;//[^\\n]+&#39;, &quot;&quot;, source_json)                                                                                SyntaxError: invalid syntax.   The error is after the &quot;+&quot; sign. I will update the code in my question above too."}, {"owner": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535621573, "post_id": 52087965, "comment_id": 91137243, "body": "I fixed the error @gangabass. I&#39;ve eliminated the &#39;u&#39; from the: source_json = re.sub(ur&#39;//[^\\n]+&#39;, &quot;&quot;, source_json). So now it looks like: source_json = re.sub(r&#39;//[^\\n]+&#39;, &quot;&quot;, source_json). The problem is that in the final csv where I store the information it return the right headers but the information is &quot;,,,&quot; so it didn&#39;t retrieves nothing. I will update the code in my question, so you can see  how it looks now. I don&#39;t have errors, but it doesn&#39;t work as intended."}, {"owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "reply_to_user": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535623402, "post_id": 52087965, "comment_id": 91138564, "body": "@user7362809 please give one url from your input file"}, {"owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "reply_to_user": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535625025, "post_id": 52087965, "comment_id": 91139628, "body": "@user7362809 your code works for me (for this url: <a href=\"https://www.samsung.com/uk/smartphones/galaxy-s9/\" rel=\"nofollow noreferrer\">samsung.com/uk/smartphones/galaxy-s9</a>)"}, {"owner": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535625912, "post_id": 52087965, "comment_id": 91140143, "body": "and it writes the data in the final csv?"}, {"owner": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535626732, "post_id": 52087965, "comment_id": 91140649, "body": "I&#39;ve solved it, too! Thank you a lot @gangabass! Have a nice day! \u0441\u043f\u0430\u0441\u0438\u0431\u043e!"}, {"owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "reply_to_user": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535629977, "post_id": 52087965, "comment_id": 91142850, "body": "@user7362809 What was a problem? Don&#39;t forget to accept my answer :-)"}, {"owner": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "edited": false, "score": 0, "creation_date": 1535633115, "post_id": 52087965, "comment_id": 91145019, "body": "I was a silly mistake from my side. I didn&#39;t add the right url in the input csv. Thank you again! I&#39;ve marked it as correct :)"}], "tags": [], "owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "is_accepted": true, "score": 2, "last_activity_date": 1535625058, "last_edit_date": 1535625058, "creation_date": 1535591555, "answer_id": 52087965, "question_id": 52085907, "link": "https://stackoverflow.com/questions/52085907/how-to-modify-the-xpath-from-my-code-to-retrieve-data-needed/52087965#52087965", "title": "How to modify the xpath from my code to retrieve data needed", "body": "<p>We can't process (using <code>json.loads()</code>) whole <code>digitalData</code> vaariable because of </p>\n\n<blockquote>\n  <p>\"siteCode\" : siteCode,</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>\"pageURL\" : pageURL,</p>\n</blockquote>\n\n<p>so I try to get only product section:</p>\n\n<pre><code>def parse(self, response):\n\n    regex = re.compile(r'\"product\"\\s*:\\s*(.+?\\})', re.DOTALL)        \n    source_json = response.xpath(\"//script[contains(., 'var digitalData')]/text()\").re_first(regex)\n\n    if source_json:\n\n        # Now we need to remove comments from the JSON:\n        # \"category\" : \"\", // pathIndicator depth\uc815\ubcf4 \uc774\uc6a9\ud558\uc5ec \uc124\uc815\n\n        # source_json = re.sub(r'//.+$', \"\", source_json, re.MULTILINE) # this regex doesn't work for me\n        source_json = re.sub(r'//[^\\n]+', \"\", source_json)\n\n        product = json.loads(source_json)\n\n        product_category = product[\"category\"]\n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 7362809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d6e6ed69c6a0fcfb842a41406e4f99?s=128&d=identicon&r=PG&f=1", "display_name": "PyRar", "link": "https://stackoverflow.com/users/7362809/pyrar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 52087965, "answer_count": 1, "score": 0, "last_activity_date": 1535625058, "creation_date": 1535575937, "last_edit_date": 1535621897, "question_id": 52085907, "link": "https://stackoverflow.com/questions/52085907/how-to-modify-the-xpath-from-my-code-to-retrieve-data-needed", "title": "How to modify the xpath from my code to retrieve data needed", "body": "<p>So I have a scrapy that retrieves the data from  tag and then writes it in a csv. I now need to modify the xpath so it can read a var like the one below. From \"var digitalData\" I'll need the data from \"product\". I'll post my code too below. </p>\n\n<pre><code>var digitalData = {\n        \"page\" : {\n            \"pageInfo\" : {\n                \"siteCode\" : siteCode,\n                \"siteSection\": \"\", \n                \"pageName\" : \"\", \n                \"pageURL\" : pageURL,\n                \"pageTrack\" : \"\" \n                },\n            \"pathIndicator\" : { \n                \"depth_2\" : \"mobile\",\n                \"depth_3\" : \"mobile\",\n                \"depth_4\" : \"smartphones\",\n                \"depth_5\" : \"galaxy-s9\"\n                }\n        },\n        \"user\" : {\n            \"loginStatus\" : \"\"\n            },\n        \"product\" : {\n            \"category\" : \"\", \n            \"model_code\" : \"SM-G960FZPDBTU\",\n            \"model_name\" : \"SM-G960F/DS\",\n            \"displayName\" : \"Galaxy S9 Hybrid Sim 64GB\",\n            \"pvi_type_code\" : \"\", \n            \"pvi_type_name\" : \"Mobile\", \n            \"pvi_subtype_code\" : \"\", \n            \"pvi_subtype_name\" : \"Smartphone\"\n            }\n};\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>import scrapy\nimport json\nimport csv\nimport re\n\nclass QuotesSpider(scrapy.Spider):\n    name = \"quotes1\"\n\n    def start_requests(self):\n        with open('so_52069753.csv','r') as csvf:\n            urlreader = csv.reader(csvf, delimiter=',',quotechar='\"')\n            for url in urlreader:\n                if url[0]==\"y\":\n                    yield scrapy.Request(url[1])\n        with open('so_52069753_out.csv', 'w') as csvfile:\n            fieldnames = ['Category', 'Type', 'Model', 'SK']\n            writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n            writer.writeheader()\n\n    def parse(self, response):\n\n        regex = re.compile(r'\"product\"\\s*:\\s*(.+?\\})', re.DOTALL)\n        source_json = response.xpath(\"//script[contains(., 'var digitalData')]/text()\").re_first(regex)\n\n        if source_json:\n            source_json = re.sub(r'//[^\\n]+', \"\", source_json)\n            product = json.loads(source_json)\n            product_category = product[\"pvi_type_name\"]\n            product_type = product[\"pvi_subtype_name\"]\n            product_model = product[\"displayName\"]\n            product_name = product[\"model_name\"]\n\n        if source_json:\n            source = source_json[0]\n            #yield ({'Category': get_values(\"pvi_subtype_name\", source), 'Type': get_values(\"pathIndicator.depth_5\", source), 'SK': get_values(\"model_name\", source)})\n            with open('so_52069753_out.csv', 'a') as csvfile:\n                fieldnames = ['Category', 'Type', 'Model', 'SK']\n                writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n                writer.writerow({'Category': product_category, 'Type': product_type, 'Model': product_model, 'SK': product_name})\n</code></pre>\n\n<p>How can I modify my xpath to read the \"var DigitalData\"? Thank you in advance!</p>\n"}, {"tags": ["python", "bloomberg"], "comments": [{"owner": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1535576651, "post_id": 52085891, "comment_id": 91122409, "body": "Yes it&#39;s expected to receive an error message if a field is not defined for a given security, but the underlying API will send data for all the fields which have a value. I&#39;m not familiar with the python API but I imagine there is a way to access the valid data that you have received."}, {"owner": {"reputation": 131, "user_id": 7072160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04c65f0de0c4eea6f785fe30f2908a4a?s=128&d=identicon&r=PG&f=1", "display_name": "theurlin", "link": "https://stackoverflow.com/users/7072160/theurlin"}, "reply_to_user": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1535577022, "post_id": 52085891, "comment_id": 91122552, "body": "I&#39;m thinking I can loop through the list of tickers and pass on any requests that return the error then combine all valid requests. I just want to make sure I&#39;m not missing an override somewhere before doing so."}, {"owner": {"reputation": 296034, "user_id": 829571, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zflGZ.png?s=128&g=1", "display_name": "assylias", "link": "https://stackoverflow.com/users/829571/assylias"}, "edited": false, "score": 0, "creation_date": 1535615777, "post_id": 52085891, "comment_id": 91133628, "body": "I don&#39;t think you can avoid the errors with an override. But when you get the error, you don&#39;t have a way to access the values returned for the fields that &quot;worked&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 1872, "user_id": 1332656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Zv8H8.jpg?s=128&g=1", "display_name": "Alpha", "link": "https://stackoverflow.com/users/1332656/alpha"}, "is_accepted": true, "score": 1, "last_activity_date": 1543367052, "creation_date": 1543367052, "answer_id": 53510572, "question_id": 52085891, "link": "https://stackoverflow.com/questions/52085891/tia-bbg-python-overriding-n-a-field-not-applicable/53510572#53510572", "title": "tia bbg python - Overriding &quot;#N/A Field Not Applicable&quot;", "body": "<p>You can try out <a href=\"https://xbbg.readthedocs.io\" rel=\"nofollow noreferrer\"><code>xbbg</code></a> package with following lines:</p>\n\n<pre><code>from xbbg import blp\n\nblp.bdp(\n    tickers=[\n        'BRK/B US Equity', 'C US Equity'\n    ],\n    flds=[\n        'Best_Div_Yld', 'DVD_Ex_Dt', 'Expected_Report_Dt',\n        'Gross_Margin', 'Oper_Margin', 'Prof_Margin',\n    ]\n)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>             ticker               field       value\n0   BRK/B US Equity        Best_Div_Yld         -  \n1   BRK/B US Equity           DVD_Ex_Dt         NaN\n2   BRK/B US Equity  Expected_Report_Dt  2019-02-25\n3   BRK/B US Equity        Gross_Margin       18.37\n4   BRK/B US Equity         Oper_Margin       10.86\n5   BRK/B US Equity         Prof_Margin       18.56\n6       C US Equity        Best_Div_Yld        2.96\n7       C US Equity           DVD_Ex_Dt  2018-11-02\n8       C US Equity  Expected_Report_Dt  2019-01-14\n9       C US Equity        Gross_Margin         NaN\n10      C US Equity         Oper_Margin       31.86\n11      C US Equity         Prof_Margin       -7.73\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 6550894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bfb13eed2408d1b027bc247969891c0?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/6550894/lorenzo"}, "is_accepted": false, "score": 2, "last_activity_date": 1552530459, "creation_date": 1552530459, "answer_id": 55154059, "question_id": 52085891, "link": "https://stackoverflow.com/questions/52085891/tia-bbg-python-overriding-n-a-field-not-applicable/55154059#55154059", "title": "tia bbg python - Overriding &quot;#N/A Field Not Applicable&quot;", "body": "<p>I found the following override:</p>\n\n<pre><code>LocalTerminal.get_reference_data(tk, flds, ignore_field_error=1, ignore_security_error=1)\n</code></pre>\n\n<p>output is then generated as nan or nat</p>\n"}], "owner": {"reputation": 131, "user_id": 7072160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04c65f0de0c4eea6f785fe30f2908a4a?s=128&d=identicon&r=PG&f=1", "display_name": "theurlin", "link": "https://stackoverflow.com/users/7072160/theurlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 53510572, "answer_count": 2, "score": 2, "last_activity_date": 1552530459, "creation_date": 1535575832, "question_id": 52085891, "link": "https://stackoverflow.com/questions/52085891/tia-bbg-python-overriding-n-a-field-not-applicable", "title": "tia bbg python - Overriding &quot;#N/A Field Not Applicable&quot;", "body": "<p>I'm trying to request fields using get_attributes, but it returns a FieldError for anything not applicable (e.g. requesting ex-dividend date on a non-dividend paying stock).</p>\n\n<pre><code>FieldError: (BRK/B US Equity, DVD_EX_DT, BAD_FLD, Field not applicable to security) \n</code></pre>\n\n<p>Is there already an override for this situation or do i have to iterate over each ticker then combine?</p>\n\n<pre><code>import tia.bbg.datamgr as dm\nmgr = dm.BbgDataManager()\nsids_index = mgr[TICKERS]\nbloomberg_fields =  ['BEST_DIV_YLD',  # Forward Dividend Yield\n                     'DVD_EX_DT',  # Ex-Dividend Date\n                     'EXPECTED_REPORT_DT',  # Next Earnings Call Date\n                     'GROSS_MARGIN',  # Gross Margin\n                     'OPER_MARGIN',  # Operating Margin\n                     'PROF_MARGIN']  # Profit Margin\ndf_data = sids_index.get_attributes(bloomberg_fields, OVERRIDE)\n</code></pre>\n"}, {"tags": ["python", "model", "keras", "sequential"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10201498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TqMonN7es9M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oBJGBmj9x9XgUnXY_IOXyPvmFxxQ/mo/photo.jpg?sz=128", "display_name": "John Xu", "link": "https://stackoverflow.com/users/10201498/john-xu"}, "edited": false, "score": 0, "creation_date": 1535622408, "post_id": 52086256, "comment_id": 91137869, "body": "Thanks! It should act as another layer, &#39;cause it passes tensors. I don&#39;t understand &quot;another layer&quot;. The comment when the author calls the defined function &quot;predict&quot; is &quot;# prediction BEFORE-SOFTMAX of the model&quot; (in the l2_attack.py).  BTW, Class MNISTModel is defined in the &quot;setup_mnist.py&quot;. The full code is at github &quot;<a href=\"https://github.com/carlini/nn_robust_attacks\" rel=\"nofollow noreferrer\">github.com/carlini/nn_robust_attacks</a>&quot;."}, {"owner": {"reputation": 23, "user_id": 10201498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TqMonN7es9M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oBJGBmj9x9XgUnXY_IOXyPvmFxxQ/mo/photo.jpg?sz=128", "display_name": "John Xu", "link": "https://stackoverflow.com/users/10201498/john-xu"}, "edited": false, "score": 0, "creation_date": 1535622516, "post_id": 52086256, "comment_id": 91137955, "body": "Can you give me some document about the use of model(data)?"}, {"owner": {"reputation": 9526, "user_id": 9758922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryhQ0.png?s=128&g=1", "display_name": "nuric", "link": "https://stackoverflow.com/users/9758922/nuric"}, "reply_to_user": {"reputation": 23, "user_id": 10201498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TqMonN7es9M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oBJGBmj9x9XgUnXY_IOXyPvmFxxQ/mo/photo.jpg?sz=128", "display_name": "John Xu", "link": "https://stackoverflow.com/users/10201498/john-xu"}, "edited": false, "score": 0, "creation_date": 1535627919, "post_id": 52086256, "comment_id": 91141437, "body": "<code>anotherlayer</code> is like <code>Dense</code>, an actual layer, have a look at <a href=\"https://keras.io/getting-started/functional-api-guide/\" rel=\"nofollow noreferrer\">functional API</a> documentation that will help."}, {"owner": {"reputation": 23, "user_id": 10201498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TqMonN7es9M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oBJGBmj9x9XgUnXY_IOXyPvmFxxQ/mo/photo.jpg?sz=128", "display_name": "John Xu", "link": "https://stackoverflow.com/users/10201498/john-xu"}, "edited": false, "score": 0, "creation_date": 1535657030, "post_id": 52086256, "comment_id": 91159172, "body": "Thanks, it really helps!"}], "tags": [], "owner": {"reputation": 9526, "user_id": 9758922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryhQ0.png?s=128&g=1", "display_name": "nuric", "link": "https://stackoverflow.com/users/9758922/nuric"}, "is_accepted": true, "score": 0, "last_activity_date": 1535577836, "creation_date": 1535577836, "answer_id": 52086256, "question_id": 52085864, "link": "https://stackoverflow.com/questions/52085864/keras-what-is-the-meaning-of-modeldata/52086256#52086256", "title": "keras, what is the meaning of model(data)", "body": "<p>Good question, it depends on what <code>data</code> is but certainly the code snippet is <em>misleading</em>. To clarify:</p>\n\n<ul>\n<li>If you call model directly you need to pass <em>tensors</em>, it acts like another layer. <code>model(anotherlayer)</code> works for example. But if you pass actual data such as a NumPy error it will give this error:\n\n<blockquote>\n  <p>ValueError: Layer sequential_1 was called with an input that isn't a symbolic tensor. Received type: . Full input: [array(...)]. All inputs to the layer should be tensors.</p>\n</blockquote></li>\n<li>If you want to predict, as in pass some numeric data and run the network / propagate values / compute output then you need to <code>model.predict(data)</code> which is why it is misleading as it is a predict function.</li>\n</ul>\n\n<p>My guess is that the author needed to chain models together and edited the <code>predict</code> function of the class instead of creating a different class function.</p>\n"}], "owner": {"reputation": 23, "user_id": 10201498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TqMonN7es9M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oBJGBmj9x9XgUnXY_IOXyPvmFxxQ/mo/photo.jpg?sz=128", "display_name": "John Xu", "link": "https://stackoverflow.com/users/10201498/john-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 52086256, "answer_count": 1, "score": 1, "last_activity_date": 1535577836, "creation_date": 1535575694, "last_edit_date": 1535577412, "question_id": 52085864, "link": "https://stackoverflow.com/questions/52085864/keras-what-is-the-meaning-of-modeldata", "title": "keras, what is the meaning of model(data)", "body": "<pre><code>class MNISTModel:\n    def __init__(self, restore, session=None):\n        self.num_channels = 1\n        self.image_size = 28\n        self.num_labels = 10\n\n        model = Sequential()\n\n        model.add(Conv2D(32, (3, 3),\n                         input_shape=(28, 28, 1)))\n        model.add(Activation('relu'))\n        model.add(Conv2D(32, (3, 3)))\n        model.add(Activation('relu'))\n        model.add(MaxPooling2D(pool_size=(2, 2)))\n\n        model.add(Conv2D(64, (3, 3)))\n        model.add(Activation('relu'))\n        model.add(Conv2D(64, (3, 3)))\n        model.add(Activation('relu'))\n        model.add(MaxPooling2D(pool_size=(2, 2)))\n\n        model.add(Flatten())\n        model.add(Dense(200))\n        model.add(Activation('relu'))\n        model.add(Dense(200))\n        model.add(Activation('relu'))\n        model.add(Dense(10))\n        model.load_weights(restore)\n\n        self.model = model\n        print('selfMNIST')\n\n    def predict(self, data):\n        tmp=self.model(data)  #Question is here\n        return tmp\n</code></pre>\n\n<p>What is this sentence \"tmp=self.model(data)\" for?\n\"model\" here is the variable of Class sequential, I never see such usage.\nThis code is taken from ## Copyright (C) 2016, Nicholas Carlini </p>\n"}, {"tags": ["python", "exception-handling", "subprocess"], "comments": [{"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 1, "creation_date": 1535575861, "post_id": 52085846, "comment_id": 91122071, "body": "Are you sure it&#39;s raising an exception or just printing it out?"}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1535575945, "post_id": 52085846, "comment_id": 91122106, "body": "What is the rest of your code?  How do you know that section is causing the problem?  With that code, it will just continue on and execute whatever comes next in your file."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 9932395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d404502a90c8ff409c9dc01af40b54?s=128&d=identicon&r=PG&f=1", "display_name": "erickque", "link": "https://stackoverflow.com/users/9932395/erickque"}, "is_accepted": true, "score": 2, "last_activity_date": 1535576164, "creation_date": 1535576164, "answer_id": 52085956, "question_id": 52085846, "link": "https://stackoverflow.com/questions/52085846/why-my-python-code-terminates-even-though-i-have-proper-exception-handling/52085956#52085956", "title": "Why my python code terminates even though I have proper exception handling?", "body": "<p>Right now, <code>sys.exit(0)</code> will only be called when an exception is raised. To ensure that it is called every time, add a finally statement:</p>\n\n<pre><code>try:\n    subprocess.check_output('service uwsgi stop;pkill -f uwsgi', shell = True)\nexcept:\n    # Handle the exception\nfinally:\n    sys.exit(0)\n</code></pre>\n"}], "owner": {"reputation": 1458, "user_id": 4159712, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/3Iwx7.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4159712/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 52085956, "answer_count": 1, "score": 0, "last_activity_date": 1535576164, "creation_date": 1535575638, "question_id": 52085846, "link": "https://stackoverflow.com/questions/52085846/why-my-python-code-terminates-even-though-i-have-proper-exception-handling", "title": "Why my python code terminates even though I have proper exception handling?", "body": "<p>I have the following python code: </p>\n\n<pre><code>try:\n    subprocess.check_output('service uwsgi stop;pkill -f uwsgi', shell = True)\nexcept:\n    sys.exit(0)\n</code></pre>\n\n<p>it should return always 0 but when I run it, it prints 'Terminated' and then I receive a non-zero return code.</p>\n"}, {"tags": ["python", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 0, "creation_date": 1535575951, "post_id": 52085839, "comment_id": 91122108, "body": "Try using sets and the <code>-</code> (minus) operator to get difference."}, {"owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "reply_to_user": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 1, "creation_date": 1535576054, "post_id": 52085839, "comment_id": 91122152, "body": "@NChauhan Won&#39;t work with dicts!"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1535576167, "post_id": 52085839, "comment_id": 91122208, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem.   We should be able to paste your posted code into a text file and reproduce the problem you described. Your posted code fails to run on for a couple of reasons, and you don&#39;t show what you <i>do</i> get with the current attempt."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1535576211, "post_id": 52085839, "comment_id": 91122226, "body": "Among other things, your indentation is off, and you&#39;re trying to subtract strings."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 1998437, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/377d7c49f9ec40b3965b0487dfa9e19a?s=128&d=identicon&r=PG", "display_name": "GreetRufus", "link": "https://stackoverflow.com/users/1998437/greetrufus"}, "edited": false, "score": 0, "creation_date": 1535635891, "post_id": 52086284, "comment_id": 91147021, "body": "I concur that this was a very confusing task and I hesitated to ask in this forum.  But your solution works perfectly and I can see where I was off target.  Once again the Stack members have an answer. Thank you Joe!!!"}, {"owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "reply_to_user": {"reputation": 381, "user_id": 1998437, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/377d7c49f9ec40b3965b0487dfa9e19a?s=128&d=identicon&r=PG", "display_name": "GreetRufus", "link": "https://stackoverflow.com/users/1998437/greetrufus"}, "edited": false, "score": 0, "creation_date": 1535638771, "post_id": 52086284, "comment_id": 91149148, "body": "@GreetRufus No problem! Please accept the answer then :) (it&#39;s a little tick)"}], "tags": [], "owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "is_accepted": true, "score": 1, "last_activity_date": 1535578688, "last_edit_date": 1535578688, "creation_date": 1535577977, "answer_id": 52086284, "question_id": 52085839, "link": "https://stackoverflow.com/questions/52085839/compare-two-lists-of-dictionaries-and-output-diffs/52086284#52086284", "title": "Compare Two Lists of Dictionaries and Output diffs", "body": "<p>Very confusing task indeed! Here is my solution (comments should explain the method).</p>\n\n<pre><code>#init a list to store the dictionaries\nupdated_list = []\n#define our 'special keys'\nevents = ('event15', 'event16')\n#remove duplicates from both lists (where all key, values match) - case (2)\nold_list_no_dupes = [d for d in old_list if not any(d == dd for dd in new_list)]\nnew_list_no_dupes = [d for d in new_list if not any(d == dd for dd in old_list)]\nfor d in new_list_no_dupes:\n    #iterate over all the dictionaries in old_list for case (3)\n    for dd in old_list_no_dupes:\n        #continue to next if not every pair (but event*) matches\n        if any(k not in dd or dd[k] != v for k,v in d.items() if k not in events):\n            continue\n        #iterate the to event keys\n        for k in events:\n            #check both dictionaries have that key and they are different values\n            if k in d and k in dd and d[k] != dd[k]:\n                #update the new dictionary to be the absolute difference\n                d[k] = str(abs(int(dd[k]) - int(d[k])))\n    #append our new dictionary - cases (1), (3) and (4)\n    updated_list.append(d)\n</code></pre>\n\n<hr>\n\n<pre><code>[{'datetime':'2018-08-01', 'evar1':'newRecord', 'event16':'100', 'event15': '200'},\n {'datetime':'2018-08-03', 'evar1':'diffEvent', 'event16':'5',   'event15': '25'}]\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 1998437, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/377d7c49f9ec40b3965b0487dfa9e19a?s=128&d=identicon&r=PG", "display_name": "GreetRufus", "link": "https://stackoverflow.com/users/1998437/greetrufus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 52086284, "answer_count": 1, "score": 1, "last_activity_date": 1535578688, "creation_date": 1535575602, "last_edit_date": 1535575829, "question_id": 52085839, "link": "https://stackoverflow.com/questions/52085839/compare-two-lists-of-dictionaries-and-output-diffs", "title": "Compare Two Lists of Dictionaries and Output diffs", "body": "<p>I have 2 lists of dicts that I need to compare and output the difference for a report</p>\n\n<p>I need to:</p>\n\n<ol>\n<li>Check new_list against old_list for new records (records that exist in new_list but not in old_list) and append these to updated_list</li>\n<li>Ignore matching records (all key, values match)</li>\n<li>Find matching records with different event15 or event16 and update the event with the diff of the 2 values </li>\n<li>Output results to a new list of dicts (updated_list in this example)</li>\n</ol>\n\n<p>To process:</p>\n\n<pre><code>new_list = [\n{'datetime': '2018-08-01', 'evar1': 'newRecord', 'event16': '100', 'event15': '200'},\n{'datetime': '2018-08-02', 'evar1': 'duplicateRecord', 'event16': '10', 'event15': '20'},\n{'datetime': '2018-08-03', 'evar1': 'diffEvent', 'event16': '15', 'event15': '25'}\n]\n\nold_list = [\n{'datetime': '2018-08-02', 'evar1': 'duplicateRecord', 'event16': '10', 'event15': '20'},\n{'datetime': '2018-08-03', 'evar1': 'diffEvent', 'event16': '10', 'event15': '25'}\n] \n</code></pre>\n\n<p>The results should look like this list:</p>\n\n<pre><code>updated_list = [\n{'datetime': '2018-08-01', 'evar1': 'newRecord', 'evar3': 'site',  'event16': '100', 'event15': '200'},\n{'datetime': '2018-08-03', 'evar1': 'diffEvent', 'evar3': 'site',  'event16': '5', 'event15': '25'}\n]\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>updated_list = []\nfor new_item in new_list:\n    for old_item in old_list:\n        for key, value in new_item.iteritems():\n        # If values don't match, subtract old_list value from new_list values and append the diff\n        if any(ko == key for ko, vo in old_item.iteritems()):\n            ko, vo = [(ko, vo) for (ko, vo) in old_item.iteritems() if ko == key][0]\n            if vo != value:\n                new_value = value - vo\n                new_item.update({ko: new_value})\n                updated_list.append(new_item)\n            else:\n            # If record does not exist in old_list, append the new record\n            updated_list.append(new_item)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1535575818, "post_id": 52085817, "comment_id": 91122058, "body": "flatten your array_a, get the indices of non nan elements, replace the elements at these indices with array_b and reshape back"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1535576646, "post_id": 52085817, "comment_id": 91122407, "body": "@Bazingaa, no need to flatten or reshape.  Boolean indexing flattens automatically."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1535576702, "post_id": 52085817, "comment_id": 91122432, "body": "@hpaulj: Thanks for the info!"}], "answers": [{"tags": [], "owner": {"reputation": 1403, "user_id": 10210511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05fb1a7498067d7e438c7976bac27a8?s=128&d=identicon&r=PG&f=1", "display_name": "J. Blackadar", "link": "https://stackoverflow.com/users/10210511/j-blackadar"}, "is_accepted": false, "score": 1, "last_activity_date": 1535576168, "creation_date": 1535576168, "answer_id": 52085957, "question_id": 52085817, "link": "https://stackoverflow.com/questions/52085817/replacing-fill-values-in-2d-array-with-values-from-a-1d-array/52085957#52085957", "title": "Replacing fill values in 2D array with values from a 1D array", "body": "<p>This should do the trick, although there might be a pre-written solution or a list comprehension to do the same.</p>\n\n<pre><code>import numpy as np\nb_index = 0\narray_c = np.zeros(np.array(array_a).shape)\nfor row_index, row in enumerate(array_a):\n    for col_index, col in enumerate(row):\n        if not np.isnan(col):\n            array_c[row_index, col_index] = array_b[b_index]\n            b_index += 1\n        else:\n            array_c[row_index, col_index] = np.nan\n\n&gt;&gt;&gt; print(array_c)\n[[  nan   nan 0.324]\n [0.254   nan 0.204]\n [  nan 0.469 0.381]\n [0.292 0.55    nan]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1535576508, "creation_date": 1535576508, "answer_id": 52086034, "question_id": 52085817, "link": "https://stackoverflow.com/questions/52085817/replacing-fill-values-in-2d-array-with-values-from-a-1d-array/52086034#52086034", "title": "Replacing fill values in 2D array with values from a 1D array", "body": "<p>boolean indexing does the job nicely:</p>\n\n<p>Locate the <code>nan</code>:</p>\n\n<pre><code>In [229]: mask = np.isnan(array_a)\nIn [230]: mask\nOut[230]: \narray([[ True,  True, False],\n       [False,  True, False],\n       [ True, False, False],\n       [False, False,  True]])\n</code></pre>\n\n<p>boolean mask applied to the array produces a 1d array:</p>\n\n<pre><code>In [231]: array_a[~mask]\nOut[231]: array([0., 0., 0., 0., 0., 0., 0.])\n</code></pre>\n\n<p>Use that same array in a <code>set</code> context:</p>\n\n<pre><code>In [232]: array_a[~mask]=array_b\nIn [233]: array_a[~mask]\nOut[233]: array([0.324, 0.254, 0.204, 0.469, 0.381, 0.292, 0.55 ])\nIn [234]: array_a\nOut[234]: \narray([[  nan,   nan, 0.324],\n       [0.254,   nan, 0.204],\n       [  nan, 0.469, 0.381],\n       [0.292, 0.55 ,   nan]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "is_accepted": false, "score": 2, "last_activity_date": 1535579529, "creation_date": 1535579529, "answer_id": 52086570, "question_id": 52085817, "link": "https://stackoverflow.com/questions/52085817/replacing-fill-values-in-2d-array-with-values-from-a-1d-array/52086570#52086570", "title": "Replacing fill values in 2D array with values from a 1D array", "body": "<p>You can also do:</p>\n\n<pre><code>np.place(array_a, array_a == 0, array_b)\n\narray_a\n\narray([[  nan,   nan, 0.324],\n       [0.254,   nan, 0.204],\n       [  nan, 0.469, 0.381],\n       [0.292, 0.55 ,   nan]])\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9306892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f118c0617b691afc2f64750c9b43e1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Morbecknaga", "link": "https://stackoverflow.com/users/9306892/morbecknaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 52086034, "answer_count": 3, "score": 1, "last_activity_date": 1535579529, "creation_date": 1535575507, "question_id": 52085817, "link": "https://stackoverflow.com/questions/52085817/replacing-fill-values-in-2d-array-with-values-from-a-1d-array", "title": "Replacing fill values in 2D array with values from a 1D array", "body": "<p>My goal is to fill a 2D array with values from a 1D array that exactly matches the pattern of values in the 2D array. For example:</p>\n\n<pre><code>array_a = \n([[nan,nan,0],\n [0,nan,0],\n [nan,0,0], \n [0,0,nan]])\n\narray_b = \n([0.324,0.254,0.204,\n0.469,0.381,0.292,\n0.550])\n</code></pre>\n\n<p>And I want to get this:</p>\n\n<pre><code>array_c = \n([[nan,nan,0.324],\n [0.254,nan,0.204],\n [nan,0.469,0.381], \n [0.292,0.550,nan]])\n</code></pre>\n\n<p>The number of values that need to be filled in array_a will exactly match the number of values in array_b. The main issue is that I want to have the nan values in the appropiate order throughout the array and I'm not sure how best to do that. </p>\n"}, {"tags": ["python", "iis", "flask", "fastcgi"], "owner": {"reputation": 394, "user_id": 2465307, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/153b302e7122e56490536469ab531c68?s=128&d=identicon&r=PG", "display_name": "kflaw", "link": "https://stackoverflow.com/users/2465307/kflaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 758, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548717785, "creation_date": 1535575359, "last_edit_date": 1535577946, "question_id": 52085781, "link": "https://stackoverflow.com/questions/52085781/error-configuring-flask-on-iis", "title": "Error configuring flask on IIS", "body": "<p>I am trying to configure flask with IIS on a windows 2016 server VM, running python 2.7. I have followed these instructions:</p>\n\n<p><a href=\"http://netdot.co/2015/03/09/flask-on-iis/\" rel=\"nofollow noreferrer\">http://netdot.co/2015/03/09/flask-on-iis/</a></p>\n\n<p>When I try to load my site, this is the error I get:</p>\n\n<pre><code>Error occurred while reading WSGI handler: Traceback (most recent call last): File \"C:\\inetpub\\wwwroot\\flask\\wfastcgi.py\", line 792, in main env, handler = read_wsgi_handler(response.physical_path) File \"C:\\inetpub\\wwwroot\\flask\\wfastcgi.py\", line 634, in read_wsgi_handler handler = get_wsgi_handler(os.getenv(\"WSGI_HANDLER\")) File \"C:\\inetpub\\wwwroot\\flask\\wfastcgi.py\", line 586, in get_wsgi_handler raise Exception('WSGI_HANDLER env var must be set') Exception: WSGI_HANDLER env var must be set StdOut: StdErr: \n</code></pre>\n\n<p>I did some searching and found this post <a href=\"https://stackoverflow.com/questions/49441038/flask-wfastcgi-and-iis-on-windows-server-2012\">Flask, wfastcgi, and IIS on Windows Server 2012</a>  where poster appeared to be getting the same error. No answered was provided here but I also set up a web.config file similar to what that person created:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n    &lt;appSettings&gt;\n        &lt;add key=\"WSGI_HANDLER\" value=\"app.app\" /&gt;\n        &lt;add key=\"PYTHONPATH\" value=\"c:/inetpub/wwwroot/flask/\" /&gt;\n        &lt;add key=\"WSGI_LOG\" value=\"C:/TMP/logs/app.log\" /&gt;\n    &lt;/appSettings&gt;\n    &lt;system.webServer&gt;\n        &lt;handlers&gt;\n            &lt;add name=\"python-wfastcgi\" path=\"*\" verb=\"*\" modules=\"FastCgiModule\" scriptProcessor=\"C:\\inetpub\\wwwroot\\flask\\venv\\Scripts\\python.exe|C:\\inetpub\\wwwroot\\flask\\wfastcgi.py\" resourceType=\"Unspecified\" requireAccess=\"Script\" /&gt;\n        &lt;/handlers&gt;\n    &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I have also granted access on the website folder to IIS and IUSR. What am I missing?</p>\n"}, {"tags": ["python", "python-3.x", "debugging", "tensorflow"], "comments": [{"owner": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 0, "creation_date": 1536101024, "post_id": 52085617, "comment_id": 91300573, "body": "Could you put together a snippet to reproduce? Does look like something weird going on with while_loop gradients. Is the while_loop in a restored MetaGraph (random guess)?"}], "owner": {"reputation": 164, "user_id": 3140750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02b4f126997d2f143d296f41b5e1cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Atimaharjun", "link": "https://stackoverflow.com/users/3140750/atimaharjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535575105, "creation_date": 1535574531, "last_edit_date": 1535575105, "question_id": 52085617, "link": "https://stackoverflow.com/questions/52085617/getcontrolpivot-returns-none-during-compute-gradients", "title": "GetControlPivot() returns None during compute_gradients", "body": "<p>During a call to compute_gradients I get the following error</p>\n\n<pre><code>File \"...../tensorflow/python/ops/control_flow_ops.py\", line 2430, in AddOp\n  self._AddOpInternal(op)\nFile \"...../tensorflow/python/ops/control_flow_ops.py\", line 2467, in _AddOpInternal\n  for x in external_inputs if x.outputs]\nFile \"...../tensorflow/python/ops/control_flow_ops.py\", line 2467, in &lt;listcomp&gt;\n  for x in external_inputs if x.outputs]\nFile \"...../tensorflow/python/ops/array_ops.py\", line 79, in identity\n  return gen_array_ops.identity(input, name=name)\nFile \"...../tensorflow/python/ops/gen_array_ops.py\", line 3263, in identity\n  \"Identity\", input=input, name=name)\nFile \"...../tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\n  op_def=op_def)\nFile \"...../tensorflow/python/framework/ops.py\", line 3414, in create_op\n  op_def=op_def)\nFile \"...../tensorflow/python/framework/ops.py\", line 1782, in __init__\n  self._control_flow_post_processing()\nFile \"...../tensorflow/python/framework/ops.py\", line 1793, in _control_flow_post_processing\n  self._control_flow_context.AddOp(self)\nFile \"...../tensorflow/python/ops/control_flow_ops.py\", line 2430, in AddOp\n  self._AddOpInternal(op)\nFile \"...../tensorflow/python/ops/control_flow_ops.py\", line 2458, in _AddOpInternal\n  self._MaybeAddControlDependency(op)\nFile \"...../tensorflow/python/ops/control_flow_ops.py\", line 2496, in _MaybeAddControlDependency\n  op._add_control_input(self.GetControlPivot().op)\n</code></pre>\n\n<p>There's more to the stacktrace in the higher levels but this appears more relevant. On the Ipython debugger I get the following additional information</p>\n\n<pre><code>ipdb&gt; self\n&lt;tensorflow.python.ops.control_flow_ops.WhileContext object at 0x7fa4d32bf7b8&gt;\nipdb&gt; self.name\n'gradients/RelnetBabi/map/while/RelnetBabi/StoryEmbedding/rnn/while/while_context'\nipdb&gt; op\n&lt;tf.Operation 'gradients/b_count_13/Identity' type=Identity&gt;\n</code></pre>\n\n<p>The 'rnn' in self.name above is an instance of tf.nn.dynamic_rnn. It appears that the while loop context created by the dynamic rnn does not have a \"pivot\". Any ideas on what could be the issue here?</p>\n\n<p>i'm using Python 3.5 and tensorflow 1.9.0</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1535575217, "post_id": 52085600, "comment_id": 91121815, "body": "That&#39;s normal, the prefetch an annotation are <i>independent</i> parts."}, {"owner": {"reputation": 1952, "user_id": 850380, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01f5869cf567c3fcb245014c7987d707?s=128&d=identicon&r=PG", "display_name": "James Parker", "link": "https://stackoverflow.com/users/850380/james-parker"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1535575655, "post_id": 52085600, "comment_id": 91121979, "body": "Ok thanks. I guess I&#39;m wondering how I would get the count of the filtered prefetch queryset issues then? My goal is to eventually be able to do a issue_count__gte=0."}, {"owner": {"reputation": 1952, "user_id": 850380, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01f5869cf567c3fcb245014c7987d707?s=128&d=identicon&r=PG", "display_name": "James Parker", "link": "https://stackoverflow.com/users/850380/james-parker"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1535578877, "post_id": 52085600, "comment_id": 91123226, "body": "This post helped me resolve it. But because I&#39;m using Django 1.11 I need to use a SubQuery within the annotate() call to get the value back."}], "answers": [{"tags": [], "owner": {"reputation": 1952, "user_id": 850380, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01f5869cf567c3fcb245014c7987d707?s=128&d=identicon&r=PG", "display_name": "James Parker", "link": "https://stackoverflow.com/users/850380/james-parker"}, "is_accepted": true, "score": -1, "last_activity_date": 1535742162, "creation_date": 1535742162, "answer_id": 52121395, "question_id": 52085600, "link": "https://stackoverflow.com/questions/52085600/django-add-count-annotation-to-a-prefetch-related-query-that-is-filtered/52121395#52121395", "title": "Django add Count annotation to a prefetch related query that is filtered", "body": "<p>When using Django 1.11 in annotations you have to use a subquery to achieve the desired count of the filtered relationship.</p>\n\n<pre><code>queryset = Series.objects.prefetch_related(\n            Prefetch('issue_series', queryset=Issue.objects.filter(hide=False).filter(issue_query_set))) \\\n            .filter(hide=False) \\\n            .annotate(issue_count=Subquery(\n                    Issue.objects.filter(\n                        series=OuterRef('pk'),\n                        hide=False\n                    )\n                    .filter(issue_query_set)\n                    .values('series')\n                    .annotate(cnt=Count('pk'))\n                    .values('cnt'),\n                    output_field=IntegerField()\n                )\n            )\\\n            .filter(issue_count__gt=0)\n</code></pre>\n"}], "owner": {"reputation": 1952, "user_id": 850380, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01f5869cf567c3fcb245014c7987d707?s=128&d=identicon&r=PG", "display_name": "James Parker", "link": "https://stackoverflow.com/users/850380/james-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 52121395, "answer_count": 1, "score": 2, "last_activity_date": 1535742162, "creation_date": 1535574483, "question_id": 52085600, "link": "https://stackoverflow.com/questions/52085600/django-add-count-annotation-to-a-prefetch-related-query-that-is-filtered", "title": "Django add Count annotation to a prefetch related query that is filtered", "body": "<p>I'm using Django version 1.11 and I'm trying to execute the following query.</p>\n\n<pre><code>queryset = Series.objects.prefetch_related(\n        Prefetch(\n             'issues',queryset=Issue.objects.filter(hide=False)\n        )\n     )\n    .filter(hide=False, issues__hide=False)\n    .annotate('issue_count=Count('issues')\n)\n</code></pre>\n\n<p>The query runs perfectly fine the issue is that the annotated issue_count value is not correct. Instead of it reading back the count of the prefetch queryset it is just reading back the entire related issues property.</p>\n\n<p>Any suggestions??</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 96, "user_id": 4028732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bill S.", "link": "https://stackoverflow.com/users/4028732/bill-s"}, "edited": false, "score": 1, "creation_date": 1535574664, "post_id": 52085573, "comment_id": 91121570, "body": "You mention that you are looking to move the dictionaries &quot;out of my program&quot;. So are you looking for a type of database that allows a user to interact with a front-end and perform the type of search you&#39;ve made?"}, {"owner": {"reputation": 179, "user_id": 7638701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386aeaa315533b862e2aa02c0155777b?s=128&d=identicon&r=PG&f=1", "display_name": "adamz88", "link": "https://stackoverflow.com/users/7638701/adamz88"}, "reply_to_user": {"reputation": 96, "user_id": 4028732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bill S.", "link": "https://stackoverflow.com/users/4028732/bill-s"}, "edited": false, "score": 0, "creation_date": 1535574825, "post_id": 52085573, "comment_id": 91121644, "body": "@BillS. While that is a good option, that might be overkill for this and I should of expressed it differently. I would like to either move the dictionaries to a different module or to some sort of file. I think CSV might be the easiest to maintain in the long run."}, {"owner": {"reputation": 3231, "user_id": 8069403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WFeKp.png?s=128&g=1", "display_name": "xdze2", "link": "https://stackoverflow.com/users/8069403/xdze2"}, "edited": false, "score": 1, "creation_date": 1535616335, "post_id": 52085573, "comment_id": 91133948, "body": "Maybe something like <a href=\"https://tinydb.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">tinydb.readthedocs.io/en/latest</a>?"}, {"owner": {"reputation": 179, "user_id": 7638701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386aeaa315533b862e2aa02c0155777b?s=128&d=identicon&r=PG&f=1", "display_name": "adamz88", "link": "https://stackoverflow.com/users/7638701/adamz88"}, "reply_to_user": {"reputation": 3231, "user_id": 8069403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WFeKp.png?s=128&g=1", "display_name": "xdze2", "link": "https://stackoverflow.com/users/8069403/xdze2"}, "edited": false, "score": 0, "creation_date": 1535658814, "post_id": 52085573, "comment_id": 91160002, "body": "Thanks for the suggestion @xdze2!"}], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 7638701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386aeaa315533b862e2aa02c0155777b?s=128&d=identicon&r=PG&f=1", "display_name": "adamz88", "link": "https://stackoverflow.com/users/7638701/adamz88"}, "is_accepted": true, "score": 0, "last_activity_date": 1535658749, "creation_date": 1535658749, "answer_id": 52104418, "question_id": 52085573, "link": "https://stackoverflow.com/questions/52085573/simplifying-dynamic-dictionary-creation-and-looping-through-it/52104418#52104418", "title": "Simplifying dynamic dictionary creation and looping through it", "body": "<p>I took @BillS' suggestion and implemented a Database with two tables:</p>\n\n<pre><code>    import mysql.connector\n\n    mydb = mysql.connector.connect(\n      host='127.0.0.1',\n      user='something',\n      passwd='else',\n      database='some_db'\n    )\n\n    mycursor = mydb.cursor(buffered=True)\n\n    mycursor.execute(\"SELECT main, description FROM categories\")\n    main_categories = mycursor.fetchall()\n    for letter, desc in main_categories:\n      .\n      .\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 7638701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386aeaa315533b862e2aa02c0155777b?s=128&d=identicon&r=PG&f=1", "display_name": "adamz88", "link": "https://stackoverflow.com/users/7638701/adamz88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 52104418, "answer_count": 1, "score": 0, "last_activity_date": 1535658749, "creation_date": 1535574360, "last_edit_date": 1535575270, "question_id": 52085573, "link": "https://stackoverflow.com/questions/52085573/simplifying-dynamic-dictionary-creation-and-looping-through-it", "title": "Simplifying dynamic dictionary creation and looping through it", "body": "<p>I currently have a dictionary that has capital letters as the keys and a list as the values. The list has a description at [0] and a variable name which points to another dictionary at [1].  </p>\n\n<pre><code>categories = {'A': ('Song Language', song_language),\n              'B': ('Rythm/Genre', rythm_genre),\n              'D': ('Atributes', atributes),\n              'E': ('Region', region)\n              }\n\nsong_language = {\n    'A1': 'Spanish',\n    'A2': 'English',\n    'A3': 'Spanglish',\n    'A4': 'Non S&amp;E',\n}\n</code></pre>\n\n<p>In the case of <code>categories['A'][1]['A2']</code> it equals <code>English</code>.</p>\n\n<p>Neither of these dictionaries are finalized, meaning I am constantly updating them to add entries. It gets very tedious having to:</p>\n\n<ul>\n<li>Create additional dictionaries</li>\n<li>Modify existing dictionaries</li>\n</ul>\n\n<p>The use for the dictionaries is to loop through them. First, Loop through the <code>categories</code> dictionary and in a nested manner, I loop through the dictionary contained in the [1] of the list. </p>\n\n<p>Each time, I collect input to determine if I am to add the key of the nested dictionary to a list. if user enters 'YL' or 'NL' the script will take some actions and then move on to the next dictionary.</p>\n\n<pre><code>for category_key in categories:\n    next_dict = categories[category_key][1]\n    dict_desc = categories[category_key][0]\n    print(dict_desc, \": \", next_dict)\n    for attribute in next_dict:\n        prompt = \"\\tIs this song == \"+next_dict[attribute]+\"(\"+attribute+\"): \"\n        add_to_list = input(prompt).upper()\n        while add_to_list not in ('Y', 'YL', 'NN','NL','N'):\n            prompt = \"Is this song == \" + next_dict[attribute] + \"(\" + attribute + \"): \"\n            add_to_list = input(prompt).upper()\n        if add_to_list == 'Y':\n            comment_list.append(attribute)\n        elif add_to_list == 'YL':\n            comment_list.append(attribute)\n            break\n        elif add_to_list == 'NN':\n            continue\n        elif add_to_list == 'NL':\n            break\n        elif add_to_list == 'N':\n            this_prompt = '\\t\\tDo you want to set any more '+dict_desc+' attributes: '\n            any_more = input(this_prompt).upper()\n            if any_more == 'Y':\n                continue\n            elif any_more == 'N':\n                break\n</code></pre>\n\n<p>Again, my aim is to move my dictionaries out of my program and finding a more efficient way to creating and managing them since they are always changing. </p>\n\n<p>I still want to maintain the functionality of allowing an user to move on to the next dictionary(category). </p>\n\n<p>For example, if the user is being asked about a language and determines that the only applicable attribute is english they can input 'YL' and that would move them to the 'Rhythm/Genre'  dictionary instead of having to go through the remainder of the <code>song_language</code> dictionary. </p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1535574571, "post_id": 52085541, "comment_id": 91121525, "body": "<code>df.Rosedale &#47;df.Rosedale_y</code>"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 1, "creation_date": 1535574810, "post_id": 52085541, "comment_id": 91121632, "body": "@mad_ ... OP is asking mass division across ~50 columns."}], "answers": [{"comments": [{"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 1, "creation_date": 1535576403, "post_id": 52085669, "comment_id": 91122299, "body": "That regex can be <code>_y$</code> so it&#39;s guaranteed to end with <code>_y</code> and not somehow match <code>_y</code> anywhere in the column name (unlikely - but - you&#39;re being safe with the <code>reindex</code> :) Your current regex is the equivalent of using <code>like=&#39;_y&#39;</code>..."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1535576740, "post_id": 52085669, "comment_id": 91122448, "body": "@JonClements Thank you!"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1535576719, "last_edit_date": 1535576719, "creation_date": 1535574752, "answer_id": 52085669, "question_id": 52085541, "link": "https://stackoverflow.com/questions/52085541/division-on-multiple-columns-pandas-df/52085669#52085669", "title": "Division on multiple columns pandas df", "body": "<p><code>filter</code> makes it easy to select the columns you need, followed by one final division.</p>\n\n<pre><code>df = df.set_index('Age')\n\ni = df.filter(regex=r'_y$')\nj = df[df.columns.difference(i.columns)]\ni.columns = j.columns.str.split('_y').str[0]\n\ndf = j / i.reindex(j.columns, axis=1)\n</code></pre>\n\n<p>The <code>reindex</code> is for added security to make sure both DataFrames are aligned.</p>\n"}], "owner": {"reputation": 607, "user_id": 7679796, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/zN1DX.jpg?s=128&g=1", "display_name": "OptimusPrime", "link": "https://stackoverflow.com/users/7679796/optimusprime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 52085669, "answer_count": 1, "score": 0, "last_activity_date": 1535576719, "creation_date": 1535574220, "question_id": 52085541, "link": "https://stackoverflow.com/questions/52085541/division-on-multiple-columns-pandas-df", "title": "Division on multiple columns pandas df", "body": "<p>I am a pandas df and I need to do mass division between ~50 columns</p>\n\n<pre><code> Age  Rosedale   Rosedale_y   Trinity  Trinity_y.....etc until 50 more columns   \n 0    1          100\n 1    3          106\n 2    2          109\n 3    3          108\n</code></pre>\n\n<p>How do I divide columns such as </p>\n\n<ul>\n<li>Rosedale by Rosedale_y </li>\n<li>Trinity by Trinity_y</li>\n</ul>\n\n<p>Desired</p>\n\n<pre><code>Age   Rosedale_rate   Trinity_rate\n0     0.01\n1     0.03\n2     0.02\n3     0.03\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter", "python-imaging-library"], "answers": [{"tags": [], "owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "is_accepted": true, "score": 1, "last_activity_date": 1535575146, "creation_date": 1535575146, "answer_id": 52085742, "question_id": 52085525, "link": "https://stackoverflow.com/questions/52085525/determining-systemfacebutton-rbg-value-at-runtime/52085742#52085742", "title": "Determining &quot;SystemFaceButton&quot; RBG Value At RunTime", "body": "<p>You can use <code>w.winfo_rgb(\"systembuttonface\")</code> to turn any color name to a tuple of R, G, B.  (<code>w</code> is any Tkinter widget, the root window perhaps.  Note that you had the color name scrambled.)  The values returned are 16-bit for some unknown reason, you'll likely need to shift them right by 8 bits to get the 0-255 values commonly used for specifying colors.</p>\n"}], "owner": {"reputation": 3, "user_id": 10209707, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217161619021180/picture?type=large", "display_name": "Aaron Kline", "link": "https://stackoverflow.com/users/10209707/aaron-kline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 52085742, "answer_count": 1, "score": 0, "last_activity_date": 1535575146, "creation_date": 1535574137, "last_edit_date": 1535574264, "question_id": 52085525, "link": "https://stackoverflow.com/questions/52085525/determining-systemfacebutton-rbg-value-at-runtime", "title": "Determining &quot;SystemFaceButton&quot; RBG Value At RunTime", "body": "<p>I am using tkinter and the PIL to make a basic photo viewer (mostly for learning purposes). I have the bg color of all of my widgets set to the default which is \"systemfacebutton\", whatever that means.\nI am using the PIL.Image module to view and rotate my images. When an image is rotated you have to choose a fillcolor for the area behind the image. I want this fill color to be the same as the default system color but I have no idea how to get a the rgb value or a supported color name for this. It has to be calculated by python at run time so that it is consistent on anyone's OS.</p>\n\n<p>Does anyone know how I can do this?</p>\n"}, {"tags": ["python", "flask", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5672149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd13bdf16406d36c0df41e418e502c5e?s=128&d=identicon&r=PG&f=1", "display_name": "Zaturek", "link": "https://stackoverflow.com/users/5672149/zaturek"}, "edited": false, "score": 0, "creation_date": 1535643057, "post_id": 52089354, "comment_id": 91152068, "body": "Thank&#39;s a lot! It helped."}], "tags": [], "owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "is_accepted": true, "score": 0, "last_activity_date": 1535604301, "creation_date": 1535604301, "answer_id": 52089354, "question_id": 52085511, "link": "https://stackoverflow.com/questions/52085511/flask-wtf-validate-method-shouldnt-override-other-validations/52089354#52089354", "title": "Flask-WTF validate() method shouldn&#39;t override other validations?", "body": "<p>When rendered, a <code>wtforms.UrlField</code> creates an <code>&lt;input type=\"url\"&gt;</code> element.  Modern browsers will only accept <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/url#Value\" rel=\"nofollow noreferrer\">valid absolute or relative urls</a> in a url input element.  A string like 'google.com' is not a valid absolute or relative url (it's a hostname), so the browser will not let you type it into the input.</p>\n\n<p>To get around this, use a StringField instead of a UrlField so that an <code>&lt;input type=\"text\"&gt;</code> is rendered, and the browser does not perform any validation.  </p>\n\n<pre><code>class BookmarkForm(FlaskForm):\n    url = StringField('url', validators=[DataRequired(), url()])\n    description = StringField('description')\n</code></pre>\n\n<p>See also the answers to <a href=\"https://stackoverflow.com/q/17946960/5320906\">this question</a> for some possible solutions on the browser side.</p>\n"}], "owner": {"reputation": 3, "user_id": 5672149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd13bdf16406d36c0df41e418e502c5e?s=128&d=identicon&r=PG&f=1", "display_name": "Zaturek", "link": "https://stackoverflow.com/users/5672149/zaturek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 52089354, "answer_count": 1, "score": 0, "last_activity_date": 1535604301, "creation_date": 1535574061, "question_id": 52085511, "link": "https://stackoverflow.com/questions/52085511/flask-wtf-validate-method-shouldnt-override-other-validations", "title": "Flask-WTF validate() method shouldn&#39;t override other validations?", "body": "<p>I'm busy with a plurasight course where I suppose to handle errors in Flask-wtf. The only problem is the course is a 'bit outdated. It's been made in 2014. In the video the teacher showed how you can define a <code>validate()</code> method in a class to use it first when I call <code>form.validate_on_submit()</code>. Here is the code:</p>\n\n<pre><code>from flask_wtf import FlaskForm\nfrom wtforms.fields import StringField\nfrom wtforms.fields.html5 import URLField\nfrom wtforms.validators import DataRequired, url\n\n\nclass BookmarkForm(FlaskForm):\n    url = URLField('url', validators=[DataRequired(), url()])\n    description = StringField('description')\n\n    def validate(self):\n        if not self.url.data.startswith(\"http://\") or self.url.data.startswith(\"https://\"):\n            self.url.data = \"http://\" + self.url.data\n\n        if not FlaskForm.validate(self):\n            return False\n\n        if not self.description.data:\n            self.description.data = self.url.data\n\n        return True\n</code></pre>\n\n<p>And here is my view: </p>\n\n<pre><code>@app.route('/add', methods=['GET', 'POST'])\ndef add():\n    form = BookmarkForm(request.form)\n    if form.validate_on_submit():\n        url = form.url.data\n        description = form.description.data\n\n        store_bookmark(url, description)\n        flash('Stored bookmark {}'.format(description))\n        return redirect(url_for('index'))\n    return render_template('add.html', form=form)\n</code></pre>\n\n<p>The problem is, Flask-wtf don't let me submit a url like google.com. Only in this form: <a href=\"http://www.google.com\" rel=\"nofollow noreferrer\">http://www.google.com</a>. </p>\n\n<p>Based on <a href=\"https://flask-wtf.readthedocs.io/en/stable/api.html#flask_wtf.FlaskForm\" rel=\"nofollow noreferrer\">this description</a>\nIt should work like this:</p>\n\n<p>validate_on_submit()</p>\n\n<p>Call validate() only if the form is submitted. This is a shortcut for form.is_submitted() and form.validate()</p>\n\n<p>But it doesn't. It still don't let me type a URL in without http://.\nI didn't find any solution in the documentation and <a href=\"https://stackoverflow.com/questions/32076750/how-to-make-flask-wtf-validate-override-execute-properly\">here</a> is a stackoverflow question, but there is no answer and it's also 3 years old. Please help me find out what I've done wrong!</p>\n"}, {"tags": ["python", "python-3.x", "exception-handling"], "comments": [{"owner": {"reputation": 489, "user_id": 5432349, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a49c998284a38d23d9e741472f26eef5?s=128&d=identicon&r=PG&f=1", "display_name": "FallenWarrior", "link": "https://stackoverflow.com/users/5432349/fallenwarrior"}, "edited": false, "score": 2, "creation_date": 1535574446, "post_id": 52085506, "comment_id": 91121470, "body": "That is not possible, as exceptions are just regular classes in Python, with the main difference being that the built-in ones are, well, in the <code>builtins</code> module. However, it is not possible nor desirable to add custom classes to that module."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1535575084, "post_id": 52085506, "comment_id": 91121748, "body": "What you can do is keep your exceptions in one place, and then just do <code>from myexceptions import *</code> at the beginning of your files."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 489, "user_id": 5432349, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a49c998284a38d23d9e741472f26eef5?s=128&d=identicon&r=PG&f=1", "display_name": "FallenWarrior", "link": "https://stackoverflow.com/users/5432349/fallenwarrior"}, "edited": false, "score": 2, "creation_date": 1535575212, "post_id": 52085506, "comment_id": 91121813, "body": "@FallenWarrior It definitely is <i>possible</i>; it&#39;s even <i>easy</i>. But you&#39;re right that it&#39;s not desirable."}, {"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 2, "creation_date": 1535575581, "post_id": 52085506, "comment_id": 91121940, "body": "How many exceptions have you defined? If it&#39;s a few, then you <i>should</i> try and generalise and combine them into 1, and when raised have an error message that gives details. In fact, it is most desirable to use builtin exceptions before having to end up making new ones. E.g. <code>connectionError</code>, <code>RequestError</code> and <code>WebsiteError</code> should be combined into one error, say <code>HTTPError</code>. If you manage to define only one error, you&#39;re left to choose whether to import it into each file or to define it again in each file."}, {"owner": {"reputation": 530, "user_id": 6683107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b2d9da9434026f7673c213f5ab9eef6?s=128&d=identicon&r=PG&f=1", "display_name": "questionable_code", "link": "https://stackoverflow.com/users/6683107/questionable-code"}, "reply_to_user": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 0, "creation_date": 1535648621, "post_id": 52085506, "comment_id": 91155137, "body": "@NChauhan when I am completely done with development, I will likely have 12-15 of them. They are mainly going to be used for hardware communication errors between a control board and my Raspberry Pi, and each different case could have different additional information. The hardware is designed to interface with MRI technology for during-scan operations, so knowing exactly what goes wrong where is important. Thank you for your feedback."}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 6683107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b2d9da9434026f7673c213f5ab9eef6?s=128&d=identicon&r=PG&f=1", "display_name": "questionable_code", "link": "https://stackoverflow.com/users/6683107/questionable-code"}, "edited": false, "score": 1, "creation_date": 1535648472, "post_id": 52086002, "comment_id": 91155086, "body": "Thanks for the insight. My current structure has a base exception class (so that way I can just catch one specific thing in most cases) with multiple subclasses. I have quite a few, because I&#39;m using them to highlight specific hardware issues."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1535576333, "creation_date": 1535576333, "answer_id": 52086002, "question_id": 52085506, "link": "https://stackoverflow.com/questions/52085506/using-custom-exceptions-without-needing-to-import-them/52086002#52086002", "title": "Using Custom Exceptions Without Needing to Import Them", "body": "<p>Python puts all of the builtin exception types into the <a href=\"https://docs.python.org/3/library/builtins.html\" rel=\"nofollow noreferrer\"><code>builtins</code></a> module. So, no matter where you evaluate <code>ZeroDivisionError</code>, it can be found.<sup>1</sup></p>\n\n<p>Your exceptions aren't in <code>builtins</code>, they're in whatever module you defined them in. So, they have to be accessed as <code>mymodule.MyError</code>, or imported with something like <code>from mymodule import MyError</code>.</p>\n\n<p>Also, as N. Chauhan points out in <a href=\"https://stackoverflow.com/questions/52085506/using-custom-exceptions-without-needing-to-import-them/52086002#comment91121940_52085506\">a comment</a>, you rarely need more than a handful of public exception types\u2014often only one. You might have 30 different error types that matter <em>internally</em>, but your users probably only care about 1 or 2 different kinds of errors, so you can make your 30 types all subclasses of 1 or 2 base classes, and your users only have to <code>import</code> those.</p>\n\n<hr>\n\n<p>Could you do the same trick? Yes, and it's actually pretty easy<sup>2</sup>\u2014but it's almost always a bad idea.</p>\n\n<p>It might sound like that would be handy for interactive programming at the REPL\u2014but it isn't needed there. Just add new stuff into the current (<code>__main__</code>) module, and it's just as accessible as if it were in <code>builtins</code>, right? And Python provides syntactic sugar for doing that. In fact, that's exactly what <code>from mymodule import MyError</code> does: it adds <code>MyError</code> into the current module's globals.</p>\n\n<p>And for non-interactive programming, putting stuff into builtins makes your code confusing and hard to read.</p>\n\n<p>If I see <code>MyError</code> in some code, and <code>from mymodule import MyError</code> at the top, it's obvious where it came from. If I don't, then there's no way to figure out where <code>MyError</code> came from except by exhaustively searching the entire codebase and all site-packages modules imported anywhere.</p>\n\n<p>And it's even harder for IDEs and other tools that help you write and navigate your code. If I hover over <code>MyError</code> in PyCharm, and there's a <code>from mymodule import MyError</code> at the top, PyCharm immediately knows where it came from and can show a nice tooltip with whatever information seems useful. I can right-click it and it can jump to the definition of <code>MyError</code>. If I enable static type checking, it knows what a <code>MyError</code> is and can verify that it's a subclass of <code>Exception</code>. And so on. But without that <code>import</code>, there is no way PyCharm could possibly know what <code>MyError</code> means.</p>\n\n<hr>\n\n<p><sub>1. When you evaluate <code>ZeroDivisionError</code>, the oversimplified version of the way it works is that if it's not a local or free variable, Python looks for it in globals, and, if it's not there, in builtins. (For a deeper explanation, see the <a href=\"https://docs.python.org/3/library/functions.html#eval\" rel=\"nofollow noreferrer\"><code>eval</code> and <code>exec</code></a> docs, and for full details, see <a href=\"https://docs.python.org/3/reference/executionmodel.html#resolution-of-names\" rel=\"nofollow noreferrer\">Resolution of names</a>.)</sub></p>\n\n<p><sub>2. How do you do it? You <em>can</em> substitute a different <code>builtins</code> module into globals that happens to include your extra stuff, but the really easy way is to just <code>import builtins</code> and just add new stuff into it, like <code>builtins.MyError = MyError</code>.</sub></p>\n"}], "owner": {"reputation": 530, "user_id": 6683107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b2d9da9434026f7673c213f5ab9eef6?s=128&d=identicon&r=PG&f=1", "display_name": "questionable_code", "link": "https://stackoverflow.com/users/6683107/questionable-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 52086002, "answer_count": 1, "score": 0, "last_activity_date": 1535576333, "creation_date": 1535574043, "question_id": 52085506, "link": "https://stackoverflow.com/questions/52085506/using-custom-exceptions-without-needing-to-import-them", "title": "Using Custom Exceptions Without Needing to Import Them", "body": "<p>I've defined a few custom exceptions for one of my projects. Much in the way one can use a standard Python exception (e.g. ZeroDivisionError) without needing to <code>import</code> anything, is there any way I could set up my project to have my custom exceptions exposed to all of the files in one of my packages?</p>\n"}, {"tags": ["python", "tensorflow", "image-processing", "neural-network", "keras"], "comments": [{"owner": {"reputation": 953, "user_id": 6586867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hAP77.png?s=128&g=1", "display_name": "SilverMonkey", "link": "https://stackoverflow.com/users/6586867/silvermonkey"}, "edited": false, "score": 0, "creation_date": 1535575108, "post_id": 52085468, "comment_id": 91121760, "body": "An example image as well as descriptive code would be helpful."}], "owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 482, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535573849, "creation_date": 1535573849, "question_id": 52085468, "link": "https://stackoverflow.com/questions/52085468/measuring-the-size-of-an-object-in-photo-via-reference-image", "title": "Measuring the size of an object in photo via reference image", "body": "<p>I'm trying to find more information on how you can process an image that contains an object and a reference object to measure estimated sizes. </p>\n\n<p>An example, I place my hand flat on a table and place a 1\" by 1\" purple square next to my hand and take a picture. What algorithms, or techniques do I use to determine the width of my hand, along with the lengths of my fingers? </p>\n\n<p>As per the measuring I have found information regarding algorithms that do this here: <a href=\"https://stackoverflow.com/questions/35555375/measure-size-of-object-using-reference-object-in-photo\">Measure size of object using reference object in photo</a> which state that if the object is in the same plane as the reference then it's possible. The problem I am having is how I would automatically detect the outlines of objects.</p>\n\n<p>I have looked through alot of the open-cv tutorials and such online and it seems the biggest problem is when trying to use the find contours method you need to do erosion based on a threshhold that is seemingly handpicked (meaning trial and error to choose the best one) but this won't work for what I want to use it for. </p>\n\n<p>I've written my own genetic algorithm based on a simple NN structure I devised myself but have never gotten much further than this into the field of NN's but I believe this would be a good candidate for NN usage. My idea was to rip several thousand or more images of hands and do the following:</p>\n\n<ul>\n<li>Scale them to a common size, keeping aspect ratio (say 500x500)</li>\n<li>Create new images from what I have, giving random noise, rotations, adding objects in the scences etc..</li>\n<li><p>Slice the images into 400 sections (25x25) or for more accuracy go even smaller</p></li>\n<li><p>When I want to detect outline I would run the images through my classifier and save the outer-most detected pixels locations and I could overlay my lines on the image. </p></li>\n</ul>\n\n<p>Would this work? Also how would I go about labeling data automatically so I don't have to go through hundreds of thousands of images? Do you believe the resulting NN could be run by a common cellphone? (only for classifying).</p>\n\n<p>This is a side project to learn from so any relevant information you can give me I'd appreciate. </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1535573849, "post_id": 52085458, "comment_id": 91121182, "body": "Can you please post the <i>full</i> traceback? It looks to me that you have patched <code>post</code> the wrong way: <code>post(..)</code> first performs a <code>self.object = self.get_object()</code>."}, {"owner": {"reputation": 472, "user_id": 1957846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fOXJc.jpg?s=128&g=1", "display_name": "vladimir.gorea", "link": "https://stackoverflow.com/users/1957846/vladimir-gorea"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1535574100, "post_id": 52085458, "comment_id": 91121306, "body": "@WillemVanOnsem I&#39;ve updated it with the traceback. running self.get_object() cries &quot;AttributeError: Generic detail view CreateSupport must be called with either an object pk or a slug&quot;"}, {"owner": {"reputation": 1553, "user_id": 4452004, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/262c32f7add160a19c186b007c417938?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Kirkpatrick", "link": "https://stackoverflow.com/users/4452004/ian-kirkpatrick"}, "edited": false, "score": 0, "creation_date": 1535574745, "post_id": 52085458, "comment_id": 91121600, "body": "What file is this in the traceback?"}, {"owner": {"reputation": 17759, "user_id": 2091925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc96737b990c24e08de6174eed0b0f?s=128&d=identicon&r=PG", "display_name": "Will Keeling", "link": "https://stackoverflow.com/users/2091925/will-keeling"}, "edited": false, "score": 2, "creation_date": 1535620649, "post_id": 52085458, "comment_id": 91136639, "body": "Is there any reason why you have overridden <code>post()</code>? The default implementation already does what you&#39;ve done (creates the form and validates it) but also ensures that <code>self.object</code> is set."}, {"owner": {"reputation": 472, "user_id": 1957846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fOXJc.jpg?s=128&g=1", "display_name": "vladimir.gorea", "link": "https://stackoverflow.com/users/1957846/vladimir-gorea"}, "reply_to_user": {"reputation": 17759, "user_id": 2091925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc96737b990c24e08de6174eed0b0f?s=128&d=identicon&r=PG", "display_name": "Will Keeling", "link": "https://stackoverflow.com/users/2091925/will-keeling"}, "edited": false, "score": 0, "creation_date": 1535653350, "post_id": 52085458, "comment_id": 91157327, "body": "@WillKeeling I had some nested forms that were being instantiated there."}], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 1957846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fOXJc.jpg?s=128&g=1", "display_name": "vladimir.gorea", "link": "https://stackoverflow.com/users/1957846/vladimir-gorea"}, "is_accepted": true, "score": 1, "last_activity_date": 1535655321, "creation_date": 1535655321, "answer_id": 52103670, "question_id": 52085458, "link": "https://stackoverflow.com/questions/52085458/django-1-11-createview-invalid-form-raises-error-for-nonexistent-object-attr/52103670#52103670", "title": "Django 1.11 - CreateView - invalid form raises error for nonexistent object attribute", "body": "<p>Following Will Keeling's comment about the default post() implementation, I reached out to BaseCreateView class.</p>\n\n<p>This is the default implementation of post():</p>\n\n<pre><code>def post(self, request, *args, **kwargs):\n    self.object = None\n    return super(BaseCreateView, self).post(request, *args, **kwargs)\n</code></pre>\n\n<p>The problem can thus be simply resolved by setting the self.object to None.</p>\n"}], "owner": {"reputation": 472, "user_id": 1957846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fOXJc.jpg?s=128&g=1", "display_name": "vladimir.gorea", "link": "https://stackoverflow.com/users/1957846/vladimir-gorea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 52103670, "answer_count": 1, "score": 1, "last_activity_date": 1535655321, "creation_date": 1535573776, "last_edit_date": 1535653187, "question_id": 52085458, "link": "https://stackoverflow.com/questions/52085458/django-1-11-createview-invalid-form-raises-error-for-nonexistent-object-attr", "title": "Django 1.11 - CreateView - invalid form raises error for nonexistent object attribute", "body": "<p>Django 1.11, using generic class based views. </p>\n\n<p>When submitting an invalid form then the call super(CreateSupport, self).get_context_data(**kwargs) raises </p>\n\n<blockquote>\n  <p>AttributeError: 'CreateSupport' object has no attribute 'object'.</p>\n</blockquote>\n\n<p>Expecting to show validation errors on form instead.</p>\n\n<p>View/Create when form is valid works alright. </p>\n\n<p>This is the class:</p>\n\n<pre><code>class CreateSupport(IsAdminMixin, CreateView):\nmodel = Support\nform_class = SupportForm\ntemplate_name = 'admin/support/form.html'\nsuccess_url = reverse_lazy('admin-supports')\n\ndef get_context_data(self, **kwargs):\n    context = super(CreateSupport, self).get_context_data(**kwargs)\n    if hasattr(self, 'object'):\n        context['images_form'] = SupportForm.ProductImageFormSet(\n            instance=self.object) if \"validated_images_form\" not in kwargs else kwargs[\"validated_images_form\"]\n\n    # filter the colour and size options for current vendor\n    curr_vend = Vendor.objects.get(id=self.kwargs['vendorid'])\n    context['colours'] = Colour.objects.filter(vendor=curr_vend)\n    context['sizes'] = Size.objects.filter(vendor=curr_vend)\n    return context\n\ndef form_valid(self, support_form):\n    if support_form.is_valid():\n        redirect = super(CreateSupport, self).form_valid(support_form)\n    else:\n        validated_forms_context = self.get_context_data(form=support_form)\n        redirect = self.render_to_response(validated_forms_context)\n\n    return redirect\n\ndef post(self, request, *args, **kwargs):\n    support_form = SupportForm(data=request.POST)\n    return self.form_valid(support_form)\n</code></pre>\n\n<p>I could not find any solution to this so far other than <a href=\"https://groups.google.com/forum/#!topic/django-users/LUwhO9irjR8\" rel=\"nofollow noreferrer\">this old post</a> using self.get_object() method that obviously would not work since the object has not yet been created.</p>\n\n<p>Traceback:</p>\n\n<pre><code>\"C:\\Program Files\\JetBrains\\PyCharm 2017.3.3\\helpers\\pydev\\_pydevd_bundle\\pydevd_exec2.py\", line 3, in Exec\n    exec(exp, global_vars, local_vars)\n  File \"&lt;input&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\ProgramData\\Anaconda2\\envs\\django3.4\\lib\\site-packages\\django\\views\\generic\\edit.py\", line 94, in get_context_data\n    return super(FormMixin, self).get_context_data(**kwargs)\n  File \"C:\\ProgramData\\Anaconda2\\envs\\django3.4\\lib\\site-packages\\django\\views\\generic\\detail.py\", line 101, in get_context_data\n    if self.object:\nAttributeError: 'CreateSupport' object has no attribute 'object'\n</code></pre>\n"}, {"tags": ["python", "spi", "cdo-climate"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7582654, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158333308915445/picture?type=large", "display_name": "Marijke", "link": "https://stackoverflow.com/users/7582654/marijke"}, "edited": false, "score": 0, "creation_date": 1536061419, "post_id": 52085636, "comment_id": 91280535, "body": "Thanks for the link, it did not succeed yet, but i think indeed it is an error in the installation. My research is indeed about climate change, in specific drought forecast related."}], "tags": [], "owner": {"reputation": 1485, "user_id": 138264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mZr81.png?s=128&g=1", "display_name": "natersoz", "link": "https://stackoverflow.com/users/138264/natersoz"}, "is_accepted": false, "score": 2, "last_activity_date": 1535574601, "creation_date": 1535574601, "answer_id": 52085636, "question_id": 52085416, "link": "https://stackoverflow.com/questions/52085416/calculate-mean-over-an-selected-area-lon-lat-with-cdo/52085636#52085636", "title": "Calculate mean over an selected area lon lat with cdo", "body": "<p>I am not familiar with cdo, but using ipython (interactive python) I debugged this section of code:</p>\n\n<pre><code>from cdo import *\ncdo=Cdo() \n</code></pre>\n\n<p>And was able to get your error:</p>\n\n<pre><code>FileNotFoundError: [Errno 2] No such file or directory: 'cdo': 'cdo'\n</code></pre>\n\n<p>I can also see in the exception trace that it is looking for the executable 'cdo'. It appears that the python module <code>cdo</code> is a wrapper around a program binary <code>cdo</code>.</p>\n\n<p>If you install the program <code>cdo</code> it will probably solve your problem.\nInformation appears here? :\n<a href=\"https://code.mpimet.mpg.de/projects/cdo/wiki/Cdo#Documentation\" rel=\"nofollow noreferrer\">https://code.mpimet.mpg.de/projects/cdo/wiki/Cdo#Documentation</a></p>\n\n<p>Is this climate change related? That is very cool!</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 7582654, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158333308915445/picture?type=large", "display_name": "Marijke", "link": "https://stackoverflow.com/users/7582654/marijke"}, "is_accepted": false, "score": 1, "last_activity_date": 1536918553, "creation_date": 1536918553, "answer_id": 52329378, "question_id": 52085416, "link": "https://stackoverflow.com/questions/52085416/calculate-mean-over-an-selected-area-lon-lat-with-cdo/52329378#52329378", "title": "Calculate mean over an selected area lon lat with cdo", "body": "<p>I did not use the cdo package in the end, but used the slice function in xarray. </p>\n\n<pre><code>ds_mlw = ds.sel(lon=slice(33,37), lat=slice(-18,-13), time=slice(\"2002-01-01\", \"2017- \n11-01\"))\nspi_avg = ds_mlw.mean(dim=('lon', 'lat'))\nplt.figure(figsize=(10,5))\nspi_avg['spi3'].plot()\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7582654, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158333308915445/picture?type=large", "display_name": "Marijke", "link": "https://stackoverflow.com/users/7582654/marijke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1579468474, "creation_date": 1535573576, "last_edit_date": 1579468474, "question_id": 52085416, "link": "https://stackoverflow.com/questions/52085416/calculate-mean-over-an-selected-area-lon-lat-with-cdo", "title": "Calculate mean over an selected area lon lat with cdo", "body": "<p>Im trying to calculate the mean SPI value over a selected area with a specific lon/lat. I made the following area where i want to calculate the mean over. </p>\n\n<pre><code>ds_mlw1 = ds.sel(lat=slice(-16.74833, -16.75613), lon=slice(35.27023, 35.27915))\n</code></pre>\n\n<p>I saw that it works best to work with the cdo package. I get an error that my cdo is not recognized. Does someone know how to solve this problem. </p>\n\n<p>This is my script</p>\n\n<pre><code>from cdo import *\nimport matplotlib.pyplot as plt\nfile = 'spi3_6_12_1deg_cru_ts_3_21_1949_2012.nc'\ncdo = Cdo()\ncdo.debug=True\n\n\nmeanspi  = cdo.fldmean(input=file,returnCdf=True).variables['spi3'][:] \n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>---------------------------------------------------------------------------\nFileNotFoundError                         Traceback (most recent call last)\n&lt;ipython-input-77-7eeb6d09369c&gt; in &lt;module&gt;()\n      9 import matplotlib.pyplot as plt\n      10 file = 'spi3_6_12_1deg_cru_ts_3_21_1949_2012.nc'\n  ---&gt; 11 cdo = Cdo()\n     12 cdo.debug=True\n     13 \n</code></pre>\n\n<p>FileNotFoundError: [WinError 2] Het systeem kan het opgegeven bestand niet vinden</p>\n\n<p>meaning (the systme can't find the given file)</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy", "pickle"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535574141, "post_id": 52085413, "comment_id": 91121319, "body": "When you <code>np.memmap(filename, \u2026)</code>, that&#39;s the same filename you used for the pickle file. So as soon you <code>fp[:] = array[:]</code>, you&#39;re replacing all of the pickle data with raw array data instead. But then you try to unpickle that raw array data as if it were a pickle, which it isn&#39;t (unless you get really unlucky), so it fails."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535574173, "post_id": 52085413, "comment_id": 91121337, "body": "I&#39;m not sure what you&#39;re trying to do here, but the fix might be as simple as having separate <code>final_images.pkl</code> and <code>final_images.bin</code> files or something. Or maybe it&#39;s as simple as not using a <code>memmap</code> in the first place, and just appending <code>array[i][j]</code> (or, likely better, <code>array[i, j]</code>)."}, {"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535574355, "post_id": 52085413, "comment_id": 91121429, "body": "I&#39;m not really sure what you mean, but the error occurs before the <code>memmap</code> line anyway. And with the <code>memmap</code> I&#39;m only trying to generate an array (that won&#39;t save in memory)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535574705, "post_id": 52085413, "comment_id": 91121584, "body": "But (a) why do you even need that mmap, when you have the exact same array in memory in the first place, and (b) why are you trying to use the same file you&#39;re in the middle of reading as the backing store for the mmap?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535574799, "post_id": 52085413, "comment_id": 91121625, "body": "Your code is also confusing in other ways. Your <code>normalize</code> function saves something to a file and does a <code>return</code> with no value, so it just returns <code>None</code>, but then you call it with <code>final_img = normalize(data_set)</code>. I&#39;m not sure what that&#39;s supposed to do, but I suspect it&#39;s not the same thing as what it actually does."}, {"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535575119, "post_id": 52085413, "comment_id": 91121767, "body": "Corrected a typo in the return statement. Initially I was recommended to try to use <code>mmap</code> in my previous question, because my arrays are rather large and I do not want to save them all in memory at once. What I need is a more efficient way to accomplish just grabbing a value at pixel position (i, j) for each array (then making a 1D array out of these), but I&#39;m not sure if efficiency here is possible."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1535576612, "post_id": 52085413, "comment_id": 91122398, "body": "But you&#39;re <i>already</i> not saving them into memory all at once. As soon as one loop ends and the next loop starts, you reassign <code>array</code> to the next array, so the old one becomes garbage and gets freed. Also, having the array in memory and <i>also</i> having a copy in a file isn&#39;t going to be more efficient than just having the array. You&#39;re using at least the same amount of real memory, plus twice as much virtual memory, plus disk space and disk I/O time."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1535574849, "last_edit_date": 1535574849, "creation_date": 1535574470, "answer_id": 52085596, "question_id": 52085413, "link": "https://stackoverflow.com/questions/52085413/reading-arrays-pixel-by-pixel-getting-unpicklingerror/52085596#52085596", "title": "Reading arrays pixel by pixel, getting UnpicklingError", "body": "<p>You have a perfectly valid pickle file, <code>final_images.data</code>, that you've appended pickle dumps to. So, the first time through the loop, <code>array = pickle.load(f)</code> will work.</p>\n\n<p>But then you mmap the same file:</p>\n\n<pre><code>fp = np.memmap(filename, dtype='float32', mode='w+', shape=(600,600))\n</code></pre>\n\n<p>This <code>fp</code> is going to be full of garbage, attempting to interpret a stream of pickles as raw array data, but since you don't actually use that data, it doesn't matter.</p>\n\n<p>But then you overwrite the entire file with the raw array data of the last pickle you loaded:</p>\n\n<pre><code>fp[:] = array[:]\n</code></pre>\n\n<p>And now, the file isn't a valid pickle file anymore, it's that raw data.</p>\n\n<p>So, the next time through the loop, when you <code>pickle.load</code> from it, it's going to fail, giving you exactly the error you're seeing.<sup>1</sup>.</p>\n\n<hr>\n\n<p>If you actually need a mmap here, you want to store it in a <em>different</em> file, not overwrite the pickle file you're in the middle of reading:</p>\n\n<pre><code>fp = np.memmap(filename + '.raw', dtype='float32', mode='w+', shape=(600,600))\n</code></pre>\n\n<p>But really, I can't see what good the mmap is doing in the first place. You've already got the exact same array in memory, as <code>array</code>. Making a <code>memmap</code> and then copying the data to it is just wasting resources for no benefit that I can see. If you just remove that line entirely, and do <code>pixels_at_position.append(array[i][j])</code>, it should have exactly the effect you were after.<sup>2</sup></p>\n\n<p>I'm not actually <em>sure</em> that's what you're after, because what your code seems to be trying to do is build a list of the <code>(i, j)</code>th values of each array in the pickle, but the name of the function, <code>sort_by_pixel</code>, sounds like what you actually want is something completely different from that (something that's sorted, for one thing).</p>\n\n<hr>\n\n<p><sub>1. Actually, it's only going to fail if you get lucky. If the raw data is small enough. the <code>f</code> file pointer could be past the end, and you'd just get an EOF. And if you're <em>really</em> unlucky, the raw data could happen to be interpretable as the pickle for a tuple of datetime objects or something crazy, and you'll just silently produce a ton of garbage.</suB></p>\n\n<p><sub>2. Except you really should be using <code>[i, j]</code>, not <code>[i][j]</code>. The latter has to create a row object just so it can index it. That isn't too expensive, since the row is just a slice into the same memory as the original array, but it's still not free. And it's also less idiomatic, and therefore less clear\u2014someone reading <code>[i, j]</code> knows you're indexing a 2D array; someone reading <code>[i][j]</code> will expect that you're indexing a (possibly jagged) sequence of sequences and have to go figure out that it's actually a 2D array.</sub></p>\n"}], "owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535574849, "creation_date": 1535573558, "last_edit_date": 1535574847, "question_id": 52085413, "link": "https://stackoverflow.com/questions/52085413/reading-arrays-pixel-by-pixel-getting-unpicklingerror", "title": "Reading arrays pixel by pixel, getting UnpicklingError", "body": "<p>I have previously saved thousands of 2D numpy arrays (600x600) to a binary file with <code>pickle</code>. I saved them one by one due to memory constraints, and now I'd like to read them in one by one, perform some operations and save the new arrays (also one by one) to a new file. Then my last goal is to read in these new arrays one by one, and append the pixel value to a new list corresponding to a given position. But for some reason I'm getting an <code>UnpickingError</code>, and I'm not sure why.</p>\n\n<pre><code>import numpy as np\nimport pickle\n\ndef normalize(data_set):\n    data_set *= 1/data_set.max()\n    with open('final_images.data', 'a+b') as f:\n        pickle.dump(data_set, f)\n    return data_set\n\nwith open('initial_data.data', 'rb') as f:\n    while True:\n        try:\n            data_set = pickle.load(f)\n            # other operations\n            final_img = normalize(data_set)\n        except EOFError:\n            break\n\nfilename = 'final_images.data'\ndef sort_by_pixel(i, j):\n    pixels_at_position = []\n    with open(filename, 'rb') as f:\n        while True:\n            try:\n                array = pickle.load(f) #GET ERROR HERE\n                fp = np.memmap(filename, dtype='float32', mode='w+', shape=(600,600))\n                fp[:] = array[:]\n                pixels_at_position.append(fp[i][j])\n            except EOFError:\n                break\n    return pixels_at_position\n\nstacked = []\nfor i in range(600):\n    for j in range(600):\n        stacked.append(np.median(sort_by_pixel(i, j)))\n</code></pre>\n\n<p>The error that I get at the line I indicated is:</p>\n\n<p><code>pickle.UnpicklingError: invalid load key, '\\x00'.</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1535598693, "post_id": 52085855, "comment_id": 91127603, "body": "Thanks. Got off work before I could take a look at your reply. Just tried on my personal laptop, which had a newer version of Anaconda, and it worked. Thanks a lot. If you don&#39;t mind, could you illuminate me why it says float64 instead of object please? Isn&#39;t float number also a kind of object?Thanks."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1535575661, "creation_date": 1535575661, "answer_id": 52085855, "question_id": 52085394, "link": "https://stackoverflow.com/questions/52085394/discrepancy-between-my-pandas-cut-output-category-and-the-ones-shown-in-pandas-d/52085855#52085855", "title": "Discrepancy between my pandas.cut output category and the ones shown in pandas documentation", "body": "<p>I think this might be a bug, but it has been fixed now. On 0.23.4, it returns float64 as expected.</p>\n\n<pre><code>pd.cut(s, 6)\n\na    (1.992, 3.333]\nb    (3.333, 4.667]\nc      (4.667, 6.0]\nd    (7.333, 8.667]\ne     (8.667, 10.0]\ndtype: category\nCategories (6, interval[float64]): [(1.992, 3.333] &lt; (3.333, 4.667] &lt; (4.667, 6.0] &lt; (6.0, 7.333] &lt;\n                                    (7.333, 8.667] &lt; (8.667, 10.0]]\n</code></pre>\n\n<p>Guessing it was a bug that had to do with the non-numeric index in the second example contributing to that in some way.</p>\n"}], "owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 52085855, "answer_count": 1, "score": 1, "last_activity_date": 1535575661, "creation_date": 1535573455, "question_id": 52085394, "link": "https://stackoverflow.com/questions/52085394/discrepancy-between-my-pandas-cut-output-category-and-the-ones-shown-in-pandas-d", "title": "Discrepancy between my pandas.cut output category and the ones shown in pandas documentation", "body": "<p>I'm learning pandas.cut to put my data into different bins. I'm running the example code from the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.cut.html\" rel=\"nofollow noreferrer\">pandas documentation</a>. But somehow the category shown in the outputs I generated are different. </p>\n\n<p>The first example:</p>\n\n<pre><code>Tocut = np.array([1, 7, 5, 6, 4, 9])\npd.cut(Tocut, 3)\n</code></pre>\n\n<p>The category output I get is \"Categories (3, object): [(0.992, 3.667] &lt; (3.667, 6.333] &lt; (6.333, 9]]\" while the documentation shows \"Categories (3, interval[float64]):...\"</p>\n\n<p>The second example:</p>\n\n<pre><code>s = pd.Series(np.array([2, 4, 6, 8, 10]), index=['a', 'b', 'c', 'd', 'e'])\npd.cut(s, 6)\n</code></pre>\n\n<p>The category output I get is \"Categories (6, object):\" while the documentation still shows float64. </p>\n\n<p>I am just wondering what contributes to this. And is anything in Python not an object?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "tensorflow", "keras", "lstm"], "answers": [{"comments": [{"owner": {"reputation": 494, "user_id": 3407289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpLSX.png?s=128&g=1", "display_name": "Supamee", "link": "https://stackoverflow.com/users/3407289/supamee"}, "edited": false, "score": 0, "creation_date": 1535631863, "post_id": 52085516, "comment_id": 91144157, "body": "How should I be setting the seed. I already set the seed for the data generation with numpy.random.seed(10) and tensorflow.set_random_seed(10) but how would I set the seed for keras?         Also any idea why a model would start with a loss of ~0 when accuracy is low?"}, {"owner": {"reputation": 436, "user_id": 4103997, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e58ff977a1f2b53765736eb6a16b999f?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran", "link": "https://stackoverflow.com/users/4103997/ciaran"}, "reply_to_user": {"reputation": 494, "user_id": 3407289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpLSX.png?s=128&g=1", "display_name": "Supamee", "link": "https://stackoverflow.com/users/3407289/supamee"}, "edited": false, "score": 0, "creation_date": 1535636919, "post_id": 52085516, "comment_id": 91147770, "body": "numpy.randon.seed(10) should be sufficient. Two other thoughts, are you scaling your input data? Non-scaled input data can result in zero or NaN division in certain circumstances. see: <a href=\"https://machinelearningmastery.com/how-to-scale-data-for-long-short-term-memory-networks-in-python/\" rel=\"nofollow noreferrer\">machinelearningmastery.com/&hellip;</a>.  Secondly,  Are you spliting your training/testing data the same way each time? I would test it on the same train/test split to see how consistent it is. May help narrow it down."}, {"owner": {"reputation": 494, "user_id": 3407289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpLSX.png?s=128&g=1", "display_name": "Supamee", "link": "https://stackoverflow.com/users/3407289/supamee"}, "edited": false, "score": 0, "creation_date": 1535645287, "post_id": 52085516, "comment_id": 91153434, "body": "I tried scaling the input data to between 0 and 1, same problem. The training data and the testing data are generated separately from the same function but I just tried splitting it also with no change. The problem is happening before I even call fit as evaluate( with train or test data) already has a loss of 0"}], "tags": [], "owner": {"reputation": 436, "user_id": 4103997, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e58ff977a1f2b53765736eb6a16b999f?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran", "link": "https://stackoverflow.com/users/4103997/ciaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1535574080, "creation_date": 1535574080, "answer_id": 52085516, "question_id": 52085388, "link": "https://stackoverflow.com/questions/52085388/keras-model-loss-starts-at-0-but-only-sometimes/52085516#52085516", "title": "Keras model loss starts at 0, but only sometimes", "body": "<p>Try setting your random seed for reproducibility: </p>\n\n<pre><code>random.seed(10)\n</code></pre>\n\n<p>Also, if the model is stateless, the cell states are reset at each sequence. But if not for example if your using stateful = True, you will need to reset states after each training run. </p>\n"}], "owner": {"reputation": 494, "user_id": 3407289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpLSX.png?s=128&g=1", "display_name": "Supamee", "link": "https://stackoverflow.com/users/3407289/supamee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536068273, "creation_date": 1535573414, "last_edit_date": 1536068273, "question_id": 52085388, "link": "https://stackoverflow.com/questions/52085388/keras-model-loss-starts-at-0-but-only-sometimes", "title": "Keras model loss starts at 0, but only sometimes", "body": "<p>I'm trying to get a feel for what input parameters might work well for my data so I am training multiple models and trying to compare the results. For some reason some of the models start will a loss of 0 even when accuracy is very low. \nMy code looks something like:<code>\nfirst=keras.models.Sequential()\nfirst.add(keras.layers.LSTM(100, activation = 'tanh', input_shape = (X.shape[1], 1), return_sequences = True))\nfirst.add(keras.layers.Dense(Y.shape[2], activation = 'softmax'))\nfirst.compile(optimizer = 'rmsprop', loss = 'categorical_crossentropy', metrics=['categorical_accuracy'])\nmodels[\"first\"]=first</code></p>\n\n<p>and I have a series of code blocks like that changing a few parameters in each one. \nEven before I try to fit the loss is already 0 (or 2.79e-7) for some of them, but not with any real consistency. Sometimes the first model will have that issue, sometimes the 3rd. I tried even just re-generating the data and the models when that happens, but when I do that the odds of the loss==0 issue seem to rise. \nThe input data is in the form [[[5],[7],[3]...]...] and the labels were the same before I ran them though keras.utils.to_categorical and it is now 1 hot. I'm fairly certain the inputs and labels are correct as any given model works correctly most of the time. </p>\n\n<p>Any suggestions would be useful at this point. </p>\n\n<p>EDIT: This seems to only happen when running on the GPU. When I force TensorFolw to run only on the CPU there are no issues. Any idea what causes issues on the GPU?</p>\n"}, {"tags": ["python", "string", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1535573926, "post_id": 52085349, "comment_id": 91121217, "body": "the expression worked for me, maybe there&#39;s something specific to your column A of your data frame. please share the output of <code>df.head()</code>"}, {"owner": {"reputation": 328, "user_id": 5310949, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/db24109eda7d3c2acc82704aac7a741f?s=128&d=identicon&r=PG&f=1", "display_name": "Chen Chen", "link": "https://stackoverflow.com/users/5310949/chen-chen"}, "reply_to_user": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1535576882, "post_id": 52085349, "comment_id": 91122500, "body": "@HaleemurAli I have modified the code and you can use the sample there."}], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 5310949, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/db24109eda7d3c2acc82704aac7a741f?s=128&d=identicon&r=PG&f=1", "display_name": "Chen Chen", "link": "https://stackoverflow.com/users/5310949/chen-chen"}, "edited": false, "score": 0, "creation_date": 1535629803, "post_id": 52095035, "comment_id": 91142741, "body": "This is exactly what I want. Thanks."}], "tags": [], "owner": {"reputation": 1952, "user_id": 4472331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b141db9afcc2c331f5f7f397fd667926?s=128&d=identicon&r=PG", "display_name": "gyoza", "link": "https://stackoverflow.com/users/4472331/gyoza"}, "is_accepted": true, "score": 1, "last_activity_date": 1535625728, "creation_date": 1535625728, "answer_id": 52095035, "question_id": 52085349, "link": "https://stackoverflow.com/questions/52085349/pandas-filter-string-data-based-on-its-string-length-using-dataframe-query/52095035#52095035", "title": "Pandas filter string data based on its string length using DataFrame.query", "body": "<p>Replacing <code>3</code> with <code>\"3\"</code> works. I'm using <code>pandas 0.23.1</code>.</p>\n\n<pre><code>df.query('A.str.len() != \"3\"')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       A  B\n0     hi  1\n1  hello  2\n3    NaN  4\n</code></pre>\n\n<hr>\n\n<p>Alternatively, if you want to remove <code>np.nan</code> as 3-character string (<code>NaN</code>):</p>\n\n<pre><code>df.query('A.astype(\"str\").str.len() != \"3\"')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       A  B\n0     hi  1\n1  hello  2\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 328, "user_id": 5310949, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/db24109eda7d3c2acc82704aac7a741f?s=128&d=identicon&r=PG&f=1", "display_name": "Chen Chen", "link": "https://stackoverflow.com/users/5310949/chen-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1701, "favorite_count": 0, "accepted_answer_id": 52095035, "answer_count": 1, "score": 2, "last_activity_date": 1561175856, "creation_date": 1535573233, "last_edit_date": 1561175856, "question_id": 52085349, "link": "https://stackoverflow.com/questions/52085349/pandas-filter-string-data-based-on-its-string-length-using-dataframe-query", "title": "Pandas filter string data based on its string length using DataFrame.query", "body": "<p>The question is very similar to this question <a href=\"https://stackoverflow.com/questions/19937362/python-pandas-filter-string-data-based-on-its-string-length\">Python: Pandas filter string data based on its string length</a>, but I want to use <code>pandas.DataFrame.query</code>. Let's say we have a <code>pandas.DataFrame</code>. I like to filter out the rows where the string length of the column <code>A</code> is not equal to 3 using <code>pandas.DataFrame.query</code></p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.DataFrame({'A' : ['hi', 'hello', 'day', np.nan], 'B' : [1, 2, 3, 4]})  \ndf.query('A.str.len() != 3')\n</code></pre>\n\n<p>However, I got the following error </p>\n\n<pre><code>TypeError: unhashable type: 'numpy.ndarray'\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "recursion", "optimization"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1535576180, "post_id": 52085323, "comment_id": 91122217, "body": "Are the timestamps systematically different between both sources? For instance, if orders occur simultaneously in one source, but can occur at different times in the other source (or can have their ordering reversed between sources) I think you have a very complicated problem."}, {"owner": {"reputation": 183, "user_id": 10291888, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CfkpMXGZAEs/AAAAAAAAAAI/AAAAAAAAABo/6Ig9zRcckjg/photo.jpg?sz=128", "display_name": "Jones", "link": "https://stackoverflow.com/users/10291888/jones"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1535577659, "post_id": 52085323, "comment_id": 91122785, "body": "The timestamps should however be within a certain range of each other. If an order shows up at location A then can&#39;t be matched with an order within a 2 second timeframe in location B, we can safely say the order wasn&#39;t found."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 10293351, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/738d5b4986b737dd94a807901ea9da28?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/10293351/nate"}, "is_accepted": true, "score": 0, "last_activity_date": 1535608758, "creation_date": 1535608758, "answer_id": 52090091, "question_id": 52085323, "link": "https://stackoverflow.com/questions/52085323/effeciently-iterating-recursively-over-multiple-dataframes-in-pandas/52090091#52090091", "title": "(effeciently) Iterating recursively over multiple dataframes in pandas", "body": "<p>Pandas does Series and DataFrame operations recursively by default. You can corral all the necessary data into a single DataFrame, then use boolean indexing with the desired filters to leave the data you'd like. This should simplify your operations a bit because you won't have to deal with loops to iterate through your market data. On another note, when you do use pandas, don't use the 'Timestamp' column as the index; you will find that an error may occur with some datasets. If you have any more questions feel free to ask and I'll help to the best of my ability.</p>\n"}], "owner": {"reputation": 183, "user_id": 10291888, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CfkpMXGZAEs/AAAAAAAAAAI/AAAAAAAAABo/6Ig9zRcckjg/photo.jpg?sz=128", "display_name": "Jones", "link": "https://stackoverflow.com/users/10291888/jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52090091, "answer_count": 1, "score": 2, "last_activity_date": 1535608758, "creation_date": 1535573147, "last_edit_date": 1592644375, "question_id": 52085323, "link": "https://stackoverflow.com/questions/52085323/effeciently-iterating-recursively-over-multiple-dataframes-in-pandas", "title": "(effeciently) Iterating recursively over multiple dataframes in pandas", "body": "<p>So basically I'm working with large datasets of market data (100,000 rows). A simplified version of the dataset columns look like this:</p>\n<blockquote>\n<p>[Timestamp] [Price] [Shares] [orders] [side]</p>\n<p>111.239 $23.28 200 2 B</p>\n<p>111.240 $23.59 200 1 S</p>\n</blockquote>\n<p>Etc etc. This data is what comes out of our market parsing software after feeding it a pcap file. Now I need to compare the output of the same market data from two different sources to make sure our market data parser is working correctly and not dropping orders or behaving inconsistently. The only problem is that the timestamps are slightly different because the data is from two different sources.</p>\n<p>So my current approach is to implement these datasets as lists of dictionaries, each dictionary representing one of these orders. I have dictionary A and dictionary B, each representing one of the two sources, and each ordered by timestamp. Then I choose a 'fuzz-factor' of time, in this example I will use 2 seconds. Here is how I do my comparison in pseduo-code:</p>\n<pre><code>for item1 in dictionaryA:\n    for item 2 in dictionaryB\n        if the item2[timestamp] is over 2 seconds before item1[timestamp]:\n            remove item from dictionaryB\n        \n        elif item2[timestamp] is over 2 seconds after item1[timestamp]:\n            mark item1 as not matched\n            break           \n\n        else: # We are in 2 second fuzz factor:\n            compare the items, if a match is found:\n                Mark item 1 in dictionaryA as matched\n                Remove item2 from dictionary\n                break\n</code></pre>\n<p>So as you can see I speed up processing by constantly removing items from dictionary B as I cycle through dictionary A. Since most of the items match this speeds things up considerably. However I'm not sure how to do something like this in pandas. The apply() function seems to be the fastest way to iterate through a dataset, but it iterates the entire dataset, not until a certain condition is met like the timestamp fuzzing I do above. Furthermore I'm not sure how fast dropping rows is in pandas.</p>\n<p>Something to note:</p>\n<ol>\n<li>Timestamps are at nanosecond precision in floating point format, but\nseveral orders may have the same timestamp.</li>\n<li>Several orders may\nappear to look exactly the same but appear with different timestamps</li>\n<li>Several orders may appear to look exactly the same AND appear with\nthe same timestamp, both orders will need to find separate matches</li>\n</ol>\n<p>So what do you guys think? What functions would I use to re-implement this algorithm in pandas? And because I'm shifting to pandas should I retool the algorithm itself? I've been playing with iterrows but that seems slow and I was wondering if there was some way I could apply vectorized operators here.</p>\n<p>Thanks for your help and let me know if you have any questions.</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "owner": {"reputation": 684, "user_id": 6019463, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/--k9r735X5c8/AAAAAAAAAAI/AAAAAAAAOuc/YHPSAsOHffM/photo.jpg?sz=128", "display_name": "Steven", "link": "https://stackoverflow.com/users/6019463/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535574273, "creation_date": 1535573035, "last_edit_date": 1535574273, "question_id": 52085297, "link": "https://stackoverflow.com/questions/52085297/saved-keras-model-freezes-kernal-on-inference", "title": "Saved keras model freezes kernal on inference", "body": "<p>The issue I'm having is that when I load a serialized Keras LSTM model (on a separate machine, although identical config except no GPU), it loads fine, but freezes when using the <code>model.predict()</code> method. </p>\n\n<p>I use the exact same method for inference after training the model (when it is still in memory), and I have no problems. </p>\n\n<p>I load the model like so: </p>\n\n<pre><code> def load_ner_model(self):\n\n\n        mod_name_ext = '{}.h5'.format(self.mod_name)\n        mod_path = 'misc/3p_ner/'\n\n        tt_name = '{}_text_tokenizer.pickle'.format(self.mod_name)\n        cc_name = '{}_char_tokenizer.pickle'.format(self.mod_name)\n        lookup_name = '{}_pos_lookup.pickle'.format(self.mod_name)\n\n        mod_files = [self.mod_name +\".h5\", tt_name, cc_name, lookup_name]\n        for file_name in mod_files:\n            if file_name not in os.listdir(os.getcwd()):\n                print(file_name)\n                client.download_file(databuck, mod_path+ file_name, file_name)\n\n        with open(tt_name, 'rb') as handle:\n            self.text_tokenizer = pickle.load(handle)\n\n        with open(cc_name, 'rb') as handle:\n            self.char_tokenizer = pickle.load(handle)\n\n        with open(lookup_name, 'rb') as handle:\n            self.pos_lookup = pickle.load(handle)\n\n        self.model = keras.models.load_model(mod_name_ext)\n</code></pre>\n\n<p>Then I prepare the data and make the inference like this: </p>\n\n<pre><code>def create_char_arrs(text):\n    dummy = 'nada'\n    char_arrs = list() \n    terms = text.split()\n    doc_res = list()\n    for term in terms[0:50]:\n        res = char_tokenizer.texts_to_sequences([term])\n        doc_res.append(res[0])\n    doc_res = sequence.pad_sequences(doc_res, maxlen=18, padding='post')\n    char_arrs.append(doc_res)\n    char_arrs = sequence.pad_sequences(char_arrs, maxlen=50, padding='post')\n    return char_arrs\n\noos = text_tokenizer.texts_to_sequences([x])\noos = sequence.pad_sequences(oos, maxlen=max_length, padding='post', value=36)\nch = create_char_arrs(x)\nres = model.predict([ch, oos])\n</code></pre>\n\n<p>And the result is that it just freezes the kernel, no error message or anything. </p>\n\n<p>I've saved and re-loaded many Keras models before and never had this issue. </p>\n\n<p>Any help would be greatly appreciated! </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1535573120, "post_id": 52085276, "comment_id": 91120825, "body": "The <code>min(..)</code> does not care about the key, it sorts the tuples like tuples are sorted <i>by default</i>."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1535573146, "post_id": 52085276, "comment_id": 91120834, "body": "Its a sorted list, just use the first element in it ... <code>arr[0]</code>"}, {"owner": {"reputation": 271, "user_id": 3139424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df31754d3d764d60a062779925ff834e?s=128&d=identicon&r=PG&f=1", "display_name": "Srinabh", "link": "https://stackoverflow.com/users/3139424/srinabh"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1535573278, "post_id": 52085276, "comment_id": 91120911, "body": "@PatrickArtner I intended to remove all the minimum elements off the list, that&#39;s the reason for it."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1535573335, "post_id": 52085276, "comment_id": 91120942, "body": "&quot;remove all the minimum elements&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1535573227, "creation_date": 1535573227, "answer_id": 52085346, "question_id": 52085276, "link": "https://stackoverflow.com/questions/52085276/selecting-minimum-valued-element-of-nested-list-after-sorting/52085346#52085346", "title": "Selecting minimum valued element of nested list after sorting", "body": "<p>You calculate the minimum with:</p>\n\n<pre><code>n = int(input(\"Enter the number: \"))\narr = [[input(),float(input())] for _ in range(0,n)]\narr.sort(key=lambda x: (x[1],x[0]))\n<b>min_val=min(arr)</b>\nprint(min_val)</code></pre>\n\n<p>This means that you will perform a loop over the list, and obtain the smallest element. Since you did not provide a key, Python will sort, like it sorts tuples by default: first by first element, and in case of a tie by second element and so on.</p>\n\n<p>In case you want the minimum according to a specific key, you need to use the <code>key</code> parameter <em>of the <code>min</code> function</em>:</p>\n\n<pre><code>n = int(input(\"Enter the number: \"))\narr = [[input(),float(input())] for _ in range(0,n)]\n<b>min_val=min(arr<b>, key=lambda x: (x[1],x[0])</b>)</b>\nprint(min_val)</code></pre>\n\n<p>Note that obtaining the <em>minimum</em> is usually faster than <em>sorting</em> the list. If you do not need to sort the list, you can drop it, and simply use <code>min(..)</code> (like here).</p>\n\n<p>In case you need to sort the list anyway, the smallest element is the first element of the list, so you can obtain it with:</p>\n\n<pre><code>n = int(input(\"Enter the number: \"))\narr = [[input(),float(input())] for _ in range(0,n)]\narr.sort(key=lambda x: (x[1],x[0]))\n<b>min_val=arr[0]</b>\nprint(min_val)</code></pre>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 6786021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edec462b80ffd30bd4b6e7c456ac053?s=128&d=identicon&r=PG&f=1", "display_name": "VanTan", "link": "https://stackoverflow.com/users/6786021/vantan"}, "is_accepted": false, "score": 0, "last_activity_date": 1535573605, "creation_date": 1535573605, "answer_id": 52085426, "question_id": 52085276, "link": "https://stackoverflow.com/questions/52085276/selecting-minimum-valued-element-of-nested-list-after-sorting/52085426#52085426", "title": "Selecting minimum valued element of nested list after sorting", "body": "<p>since the array is already sorted:</p>\n\n<pre><code>print(arr[0])\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>min_val=min(arr)\n</code></pre>\n\n<p>will sort by the first element. To sort by second element, change it to:</p>\n\n<pre><code>min_val=min(arr, key = lambda t: t[1])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": true, "score": 1, "last_activity_date": 1535573860, "creation_date": 1535573860, "answer_id": 52085471, "question_id": 52085276, "link": "https://stackoverflow.com/questions/52085276/selecting-minimum-valued-element-of-nested-list-after-sorting/52085471#52085471", "title": "Selecting minimum valued element of nested list after sorting", "body": "<p>Use min with key as Willem Van Onsem suggested and apply filter to your sequence:</p>\n\n<pre><code>arr=[(\"a\",2),(\"b\",\"5\"),(\"c\",1),(\"a\",2),(\"b\",\"5\"),(\"c\",1)]  \n# get minimal value\nmin_val=min(arr, key= lambda x:(x[1],x[0]))\n# filter all with 2nd element euqal to minimals 2nd elemenbt\nwithoutMin = filter(lambda x: x[1] != min_val[1], arr)\n\n# or use equivalent list comp:\n# without = [x for x in arr if x[1] != min_val[x]] \nprint(arr)\n\nprint(withoutMin)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[('a', 2), ('b', '5'), ('c', 1), ('a', 2), ('b', '5'), ('c', 1)]\n[('a', 2), ('b', '5'), ('a', 2), ('b', '5')] # filtered\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 3139424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df31754d3d764d60a062779925ff834e?s=128&d=identicon&r=PG&f=1", "display_name": "Srinabh", "link": "https://stackoverflow.com/users/3139424/srinabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52085471, "answer_count": 3, "score": 0, "last_activity_date": 1535573860, "creation_date": 1535572978, "question_id": 52085276, "link": "https://stackoverflow.com/questions/52085276/selecting-minimum-valued-element-of-nested-list-after-sorting", "title": "Selecting minimum valued element of nested list after sorting", "body": "<p>I want to select the minimum value of a nested list of the second element (the float part).</p>\n\n<p>Code</p>\n\n<pre><code>n=int(input(\"Enter the number: \"))\narr=[[input(),float(input())] for _ in range(0,n)]\narr.sort(key=lambda x: (x[1],x[0]))\nmin_val=min(arr)\nprint(min_val)\n</code></pre>\n\n<p>Input</p>\n\n<pre><code>Enter the number: 3\narp\n5\ngrp\n4\ndrp\n3\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>['arp', 5.0]\n</code></pre>\n\n<p>Expected output</p>\n\n<pre><code>['drp',3.0]\n</code></pre>\n"}, {"tags": ["python", "json", "django", "database", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 10172569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245b4306bdb107da3fbfacb7809f47d4?s=128&d=identicon&r=PG&f=1", "display_name": "Rosey", "link": "https://stackoverflow.com/users/10172569/rosey"}, "is_accepted": false, "score": 0, "last_activity_date": 1535574046, "creation_date": 1535574046, "answer_id": 52085507, "question_id": 52085263, "link": "https://stackoverflow.com/questions/52085263/maintaining-a-read-only-database-in-django-using-python-script/52085507#52085507", "title": "Maintaining a Read-Only Database in Django using Python Script", "body": "<p>Check out <a href=\"https://stackoverflow.com/questions/44022142/django-create-and-save-a-model-using-json-data\">this</a> answer. You have done most of the work already. There's a number of ways you could approach inserting your JSON values into your database. You don't even have to go through Django if you don't want to. All that matters is that your data ends up in the database somehow. Django doesn't have to be the one inserting those values to use them either, it can read values placed in the database by 3rd parties.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 7173617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-IHiaBiyQH-Q/AAAAAAAAAAI/AAAAAAAAAGA/OHVb8rV56eM/photo.jpg?sz=128", "display_name": "Owais Arshad", "link": "https://stackoverflow.com/users/7173617/owais-arshad"}, "edited": false, "score": 0, "creation_date": 1535636444, "post_id": 52085514, "comment_id": 91147428, "body": "This makes sense. I was thinking of using Cron, but did not realise that you could create custom commands under manage.py . Will give this a go."}], "tags": [], "owner": {"reputation": 1434, "user_id": 1477280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a389944a84117b88586ad394aef59a00?s=128&d=identicon&r=PG", "display_name": "Eugene Prikazchikov", "link": "https://stackoverflow.com/users/1477280/eugene-prikazchikov"}, "is_accepted": true, "score": 1, "last_activity_date": 1535574073, "creation_date": 1535574073, "answer_id": 52085514, "question_id": 52085263, "link": "https://stackoverflow.com/questions/52085263/maintaining-a-read-only-database-in-django-using-python-script/52085514#52085514", "title": "Maintaining a Read-Only Database in Django using Python Script", "body": "<p>One way to approach this is following:</p>\n\n<ul>\n<li>Create a model in your django project to store downloaded data</li>\n<li>Convert python script that downloads the data to management command <a href=\"https://docs.djangoproject.com/en/2.1/howto/custom-management-commands/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.1/howto/custom-management-commands/</a></li>\n<li>Run the management command periodically (via <code>cron</code> or some other means that you prefer)</li>\n</ul>\n"}], "owner": {"reputation": 169, "user_id": 7173617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-IHiaBiyQH-Q/AAAAAAAAAAI/AAAAAAAAAGA/OHVb8rV56eM/photo.jpg?sz=128", "display_name": "Owais Arshad", "link": "https://stackoverflow.com/users/7173617/owais-arshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52085514, "answer_count": 2, "score": 0, "last_activity_date": 1535574073, "creation_date": 1535572903, "question_id": 52085263, "link": "https://stackoverflow.com/questions/52085263/maintaining-a-read-only-database-in-django-using-python-script", "title": "Maintaining a Read-Only Database in Django using Python Script", "body": "<p>I have a python script which downloads data from an API source and transforms it in to a a list of dictionaries that I save as a JSON file. </p>\n\n<p>Separately, I have a Django project that uses this data to serve the data in a web page. I am currently using the default SQLite DB but plan on using Postgresql in production.</p>\n\n<p>The data is updated frequently, and so the script needs to download the new data on a daily basis and update the data being used by the Djano project's database. </p>\n\n<p>The issue is I can make the Django project \"work\" with dummy, sample data; and the script works independently of Django. </p>\n\n<p>How do I integrate this downloading script to work with Django and \"push\" new records and updates to the Django DB using the python script? Users of the Django project will only read the data and not write / update the data otherwise.</p>\n\n<p>I have reviewed a variety of tutorials such as the Django polls app but am lost on how to marry these two pieces together. Is this a case of using fixtures over and over against to reload data into the DB? It appears that this is not the best method as fixtures are only used for test data and would not be automatic. </p>\n\n<p>What am I missing? Alternatively, is Django not the best way to serve data from a DB that is read-only? What would be a better alternative?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4001, "user_id": 8811778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/803575584f2d2d45fe01ee5d52c003dd?s=128&d=identicon&r=PG&f=1", "display_name": "chillin", "link": "https://stackoverflow.com/users/8811778/chillin"}, "edited": false, "score": 0, "creation_date": 1535573646, "post_id": 52085228, "comment_id": 91121087, "body": "Maybe something like <code>row_number = (df[&#39;ExpirationDate&#39;] - current_date).dt.total_seconds().abs().idxmin()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15275, "user_id": 512652, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5ebd7d7a16e74330d299b048ab548999?s=128&d=identicon&r=PG", "display_name": "ajwood", "link": "https://stackoverflow.com/users/512652/ajwood"}, "edited": false, "score": 0, "creation_date": 1535574026, "post_id": 52085417, "comment_id": 91121266, "body": "Is there a reason to do <code>df.iloc[idx, :]</code> over just <code>df.iloc[idx]</code>?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 15275, "user_id": 512652, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5ebd7d7a16e74330d299b048ab548999?s=128&d=identicon&r=PG", "display_name": "ajwood", "link": "https://stackoverflow.com/users/512652/ajwood"}, "edited": false, "score": 0, "creation_date": 1535574050, "post_id": 52085417, "comment_id": 91121279, "body": "@ajwood No, just being thorough and explicit about the indexing. They&#39;re both the same."}, {"owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "edited": false, "score": 0, "creation_date": 1535574582, "post_id": 52085417, "comment_id": 91121530, "body": "Ah, I forgot to mention that I only want the forward closest date, and if I&#39;m not mistaking this code will look both directions. How can I account for this?"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1535574920, "last_edit_date": 1535574920, "creation_date": 1535573577, "answer_id": 52085417, "question_id": 52085228, "link": "https://stackoverflow.com/questions/52085228/pandas-optimal-row-selection-over-intercolumn-conditional/52085417#52085417", "title": "pandas - optimal row selection over intercolumn conditional", "body": "<p>Find the index of the minimum absolute difference and index.</p>\n\n<pre><code>v = pd.to_datetime(df.reset_index()['ExpirationDate'])\nidx = (v.mask(v &lt; current_date) \n           - pd.to_datetime(current_date)).abs().idxmin()\nrow = df.iloc[idx, :]\n</code></pre>\n\n<p>I see one problem here: If your index values are not unique, then you will need to index on position and not label. For that reason, I add the <code>reset_index</code> call.</p>\n"}], "owner": {"reputation": 845, "user_id": 3911832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myepU.jpg?s=128&g=1", "display_name": "&#201;variste Galois", "link": "https://stackoverflow.com/users/3911832/%c3%89variste-galois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52085417, "answer_count": 1, "score": 1, "last_activity_date": 1535574920, "creation_date": 1535572752, "last_edit_date": 1535573212, "question_id": 52085228, "link": "https://stackoverflow.com/questions/52085228/pandas-optimal-row-selection-over-intercolumn-conditional", "title": "pandas - optimal row selection over intercolumn conditional", "body": "<p>I have the following DataFrame:</p>\n\n<pre><code>            dataPoint   RIC ExpirationDate          Exchange Description  \\\nclosingDate                                                                \n2002-10-15       4207  SPH3     2003-03-20  CME:Index and Options Market   \n2002-10-15       5400  SPH4     2004-03-18  CME:Index and Options Market   \n2002-10-15      18661  SPM3     2003-06-19  CME:Index and Options Market   \n2002-10-15      19918  SPM4     2004-06-17  CME:Index and Options Market   \n2002-10-15      33439  SPU3     2003-09-18  CME:Index and Options Market   \n2002-10-15      35523  SPU4     2004-09-16  CME:Index and Options Market   \n2002-10-15      47733  SPZ2     2002-12-19  CME:Index and Options Market   \n2002-10-15      49022  SPZ3     2003-12-18  CME:Index and Options Market \n</code></pre>\n\n<p>I want to grab the row with an ExpirationDate closest to my closingDate (note that I have the static closingDate stored in a variable called current_date). </p>\n\n<p>df.iterrows() is one solution that comes to mind, but it seems inefficient. Is there an optimal method of doing this conditional selection?</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qprocess"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535574769, "post_id": 52085223, "comment_id": 91121612, "body": "show the <i>cmd files</i>"}, {"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535576462, "post_id": 52085223, "comment_id": 91122328, "body": "@eyllanesc The cmd file is running some image processing on another file but how would that affect anything? When it finishes, it does say &quot;Press any key to continue&quot;....would that be the issue? I don&#39;t even know how to get it to start another cmd process (since it doesn&#39;t even print the &#39;finish&#39;)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1535576656, "post_id": 52085223, "comment_id": 91122414, "body": "I just want to review that, but without the .cmd I can not reproduce your problem, you could create dummy cmds that reproduce the problem."}, {"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535586874, "post_id": 52085223, "comment_id": 91125330, "body": "@eyllanesc I edited the question and added a simple cmd file I created just now. Does the same thing and never prints &quot;Finished&quot; (although it prints &quot;Started&quot;)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535587100, "post_id": 52085223, "comment_id": 91125374, "body": "As I review PAUSE, it only finishes executing if you press certain keys. Do not you think that if you do not press any of those keys the .cmd will not stop executing? Do not you think that&#39;s the problem?, why do you use PAUSE?"}, {"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535589456, "post_id": 52085223, "comment_id": 91125798, "body": "You are right, removing the pause causes the &#39;Finish&#39; to be printed. However, how do I start the second process? I tried doing another <code>self.process.start(&#39;test2.cmd&#39;)</code> but that never gets executed"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535589561, "post_id": 52085223, "comment_id": 91125825, "body": "Is the test2.cmd similar to the .cmd it shows?"}, {"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535589726, "post_id": 52085223, "comment_id": 91125858, "body": "Yeah it is similar (without the pause)."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1535669568, "post_id": 52088053, "comment_id": 91163647, "body": "What if I already have a class for the layout and buttons? Can I put <code>manager = SequentialManager()</code> inside the central widget?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1535670123, "post_id": 52088053, "comment_id": 91163787, "body": "@Jess SequentialManager is not a widget, use it as I have used it."}, {"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1535742325, "post_id": 52088053, "comment_id": 91194073, "body": "I meant when calling SequentialManager(): I did this in my central widget:         <code>manager = SequentialManager(self)</code> <code>commands = [&#39;test1.cmd&#39;, &#39;test2.cmd&#39;]</code> <code>manager.start(commands)</code> I kept the SequentialManager class basically the same. When I hit RUN in my gui, nothing happens?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1535742423, "post_id": 52088053, "comment_id": 91194108, "body": "@Jess use <code>manager = SequentialManager(self)</code> <code>commands = [&#39;test1.cmd&#39;, &#39;test2.cmd&#39;]</code> <code>manager.start(commands)</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1535742513, "post_id": 52088053, "comment_id": 91194160, "body": "@Jess Do not modify SequentialManager, if you do I can not guarantee that it works."}, {"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1535742967, "post_id": 52088053, "comment_id": 91194315, "body": "thanks for your help so far. I edited the previous comment before I saw your comment. So even when I use <code>manager.start(commands)</code> the commands don&#39;t execute (however it does do editing that the script calls for before the SequentialManager(), I checked the timestamp and the files were updated)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1535743088, "post_id": 52088053, "comment_id": 91194348, "body": "@Jess if a certain part is executed, the error is probably due to permissions or other reasons, unfortunately, without knowing what you are doing, I will not be able to help you."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1535592490, "creation_date": 1535592490, "answer_id": 52088053, "question_id": 52085223, "link": "https://stackoverflow.com/questions/52085223/how-to-use-pyqt-to-start-one-process-after-another-finishes/52088053#52088053", "title": "How to use Pyqt to start one process after another finishes?", "body": "<p>To solve the problem, a class is implemented that executes the commands sequentially, that is, it ends one task and executes the next one until all the commands are executed.</p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets\nfrom functools import partial\n\n\nclass SequentialManager(QtCore.QObject):\n    finished = QtCore.pyqtSignal()\n    resultsChanged = QtCore.pyqtSignal(QtCore.QByteArray)\n\n    def __init__(self, parent=None):\n        super(SequentialManager, self).__init__(parent)\n        self.process = QtCore.QProcess(self)\n        self.process.finished.connect(self.handleFinished)\n        self.process.readyReadStandardOutput.connect(self.onReadyReadStandardOutput)\n\n    def start(self, commands):\n        self._commands = iter(commands)\n        self.fetchNext()\n\n    def fetchNext(self):\n        try:\n            command = next(self._commands)\n        except StopIteration:\n            return False\n        else:\n            self.process.start(command)\n        return True\n\n    def onReadyReadStandardOutput(self):\n        result = self.process.readAllStandardOutput()\n        self.resultsChanged.emit(result)\n\n    def handleFinished(self):\n        if not self.fetchNext():\n            self.finished.emit()\n\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        super(Widget, self).__init__(parent)\n        vlay = QtWidgets.QVBoxLayout(self)\n        self.te = QtWidgets.QTextEdit()\n        self.te.setReadOnly(True)\n        btn = QtWidgets.QPushButton(\"Start processes\")\n        vlay.addWidget(self.te)\n        vlay.addWidget(btn)\n\n        manager = SequentialManager(self)\n        manager.resultsChanged.connect(self.onResultsChanged)\n\n        commands = [\"test1.cmd\", \"test2.cmd\"]\n        btn.clicked.connect(partial(manager.start, commands))\n\n    def onResultsChanged(self, result):\n        self.te.append(str(result, \"utf-8\"))\n\n\nif __name__ == '__main__':\n    import sys\n\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 52088053, "answer_count": 1, "score": 0, "last_activity_date": 1535592490, "creation_date": 1535572740, "last_edit_date": 1535586819, "question_id": 52085223, "link": "https://stackoverflow.com/questions/52085223/how-to-use-pyqt-to-start-one-process-after-another-finishes", "title": "How to use Pyqt to start one process after another finishes?", "body": "<p>I would like to run several cmd files using Pyqt5. I am able to currently run only one cmd file...here is a snippet of the code:</p>\n\n<pre><code>def run(self):\n    self.process = QProcess(self)\n    self.process.started.connect(lambda: self.statusUpdate('Started'))\n    self.process.finished.connect(lambda: self.statusUpdate('Finished'))\n    self.process.start('test.cmd')\n\ndef statusUpdate(self, event):\n    print(event)\n    self.status = event\n</code></pre>\n\n<p>Here is the simple cmd file I want to test with:</p>\n\n<pre><code>echo TEST\necho TEST\necho TEST\nPAUSE\n</code></pre>\n\n<p>I noticed that even though the cmd file finishes, it never prints 'Finished' </p>\n\n<p>How can I start another cmd file after the first one finishes? </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "edited": false, "score": 0, "creation_date": 1536162075, "post_id": 52085200, "comment_id": 91327673, "body": "I don&#39;t understand the downvote, could you please leave a comment explaining what I could do better next time?"}], "answers": [{"comments": [{"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "edited": false, "score": 0, "creation_date": 1536161332, "post_id": 52085314, "comment_id": 91327281, "body": "Although this works, I cannot imagine a world where regex is the best solution to this problem."}], "tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 2, "last_activity_date": 1535573106, "creation_date": 1535573106, "answer_id": 52085314, "question_id": 52085200, "link": "https://stackoverflow.com/questions/52085200/in-dataframe-of-strings-and-floats-cast-floats-to-integer-then-string/52085314#52085314", "title": "In dataframe of strings AND floats, cast floats to integer then string", "body": "<p>One option is to cast to string and then use a regex to remove the decimals.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'col1': [1.1, 2.2, 'bar'], \n                   'col2': [3.3, 'foo', 4.4], \n                   'col3': ['spam', 'eggs', 5.5]})\n\ndf = df.astype(str).replace(r'(\\-?\\d+)\\.\\d+', r'\\1', regex=True)\n\n# returns:\n  col1 col2  col3\n0    1    3  spam\n1    2  foo  eggs\n2  bar    4     5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "edited": false, "score": 0, "creation_date": 1536161492, "post_id": 52086279, "comment_id": 91327377, "body": "This pointed my in the right direction, what I ended up using was (mostly cause it&#39;s a one-liner):  <code>df.applymap(lambda x: int(x) if isinstance(x, float) else x)</code>"}], "tags": [], "owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "is_accepted": true, "score": 2, "last_activity_date": 1535581109, "last_edit_date": 1535581109, "creation_date": 1535577954, "answer_id": 52086279, "question_id": 52085200, "link": "https://stackoverflow.com/questions/52085200/in-dataframe-of-strings-and-floats-cast-floats-to-integer-then-string/52086279#52086279", "title": "In dataframe of strings AND floats, cast floats to integer then string", "body": "<p>You can use a helper function that:</p>\n\n<ul>\n<li>tries to convert what's in your object to a <code>float</code> - so \"2.5\" and \"2\" will be able to be translated (as well as anything that Python's <code>float</code> function can interpret as a <code>float</code> value), but \"hello there. how are you?\" won't...</li>\n<li>then tries to convert that <code>float</code> to an <code>int</code></li>\n<li>then returns its <code>str</code> value</li>\n</ul>\n\n<p>If the <code>float</code> conversion fails - then it'll just return your original object as technically only the <code>float</code> conversation can fail, as if that succeeds you can always <code>int(some_float)</code> and <code>str</code> will always work (failing some weird custom class - that deliberately causes it to fail).</p>\n\n<p>eg:</p>\n\n<pre><code>def try_to_int(obj):\n    try:\n        return str(int(float(obj)))\n    except (ValueError, TypeError):\n        return obj\n</code></pre>\n\n<p>Then use it with <code>new_df = df.applymap(try_to_int)</code></p>\n"}], "owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52086279, "answer_count": 2, "score": -1, "last_activity_date": 1535581109, "creation_date": 1535572649, "question_id": 52085200, "link": "https://stackoverflow.com/questions/52085200/in-dataframe-of-strings-and-floats-cast-floats-to-integer-then-string", "title": "In dataframe of strings AND floats, cast floats to integer then string", "body": "<p>I have the following dataframe of dtype <code>object</code>:</p>\n\n<pre><code>  col1 col2  col3\n0  1.1  3.3  spam\n1  2.2  foo  eggs\n2  bar  4.4   5.5\n</code></pre>\n\n<p>I would like to cast all the floats to integers then convert everything to strings, so the output would be of dtype <code>string</code>: </p>\n\n<pre><code>  col1 col2  col3\n0    1    3  spam\n1    2  foo  eggs\n2  bar    4     5\n</code></pre>\n\n<p>Is there something that allows me to cast a dataframe to an int but ignore errors?  Or achieve this in a different way?  (using the <code>errors = 'ignore'</code>, seems to ignore the entire thing)</p>\n"}, {"tags": ["python", "sql", "sql-server", "sqlite", "pyodbc"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1535581496, "post_id": 52085191, "comment_id": 91124017, "body": "maybe try <code>pip install --upgrade pyodbc</code> (<a href=\"https://github.com/Microsoft/sql-server-samples/issues/295\" rel=\"nofollow noreferrer\">github.com/Microsoft/sql-server-samples/issues/295</a>), or this technique from another similar question <a href=\"https://stackoverflow.com/a/21055195/1248974\">Python pip unable to locate pyodbc</a>"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 10291844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cc5e82611c63ee795fbb36f0a07acc3?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry12345678", "link": "https://stackoverflow.com/users/10291844/jerry12345678"}, "edited": false, "score": 0, "creation_date": 1535577899, "post_id": 52085981, "comment_id": 91122885, "body": "On step 5. In this directory (which is were my pyodbc file is): C:\\Users\\Jerry\\AppData\\Local\\Programs\\Python\\Python37\\Lib\\si&zwnj;&#8203;te-packages I ran the &quot;pip install pyodbc.cp37-win_amd64.pyd&quot; command. It returned the following error: Could not find a version that satisfies the requirement pyodbc.cp37-win_amd64.pyd (from versions: ) No matching distribution found for pyodbc.cp37-win_amd64.pyd. Any idea why?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9621927"}, "reply_to_user": {"reputation": 131, "user_id": 10291844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cc5e82611c63ee795fbb36f0a07acc3?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry12345678", "link": "https://stackoverflow.com/users/10291844/jerry12345678"}, "edited": false, "score": 1, "creation_date": 1536598699, "post_id": 52085981, "comment_id": 91472374, "body": "I do not remember what to do when this arises :(sorry)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9621927"}, "is_accepted": false, "score": 0, "last_activity_date": 1535576276, "creation_date": 1535576276, "answer_id": 52085981, "question_id": 52085191, "link": "https://stackoverflow.com/questions/52085191/modulenotfounderror-no-module-named-pyodbc-when-importing-pyodbc-into-py-scri/52085981#52085981", "title": "ModuleNotFoundError: No module named &#39;pyodbc&#39; when importing pyodbc into py script", "body": "<p>I ran into the same error a few days ago! Thankfully, I found the answer.</p>\n\n<p>You see, the problem is that pyodbc comes in a .whl (wheel) file/package. So, as a result, you have to pip install it.</p>\n\n<p>Pip installing is a very tricky process, so please be careful. The steps are:-</p>\n\n<p>Step1. Go to C:/Python (whatever version you are using)/Scripts. Scroll down. If you see a file named pip.exe, then that means that you are in the right folder. Copy the path.</p>\n\n<p>Step2. In your computer, search for Environment Variables. You should see an option labeled 'Edit the System Environment Variables'. Click on it.</p>\n\n<p>Step3. There, you should see a dialogue box appear. Click 'Environment Variables'. Click on 'Path'. Then, click 'New'. Paste the path that you copied earlier.</p>\n\n<p>Step4. Click 'Ok'.</p>\n\n<p>Step5. Open the Windows File Explorer. Shift + Right Click wherever your pyodbc.whl file is installed. Select 'Open Command Window Here' from the dropdown menu. Type in 'pip install py', then click tab and the full file name should fill in. Then, press Enter, and you're ready to go! Now you shouldn't get the error again!!!</p>\n"}, {"tags": [], "owner": {"reputation": 792, "user_id": 3005674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UniXf.png?s=128&g=1", "display_name": "t_warsop", "link": "https://stackoverflow.com/users/3005674/t-warsop"}, "is_accepted": false, "score": 6, "last_activity_date": 1544178115, "creation_date": 1544178115, "answer_id": 53667554, "question_id": 52085191, "link": "https://stackoverflow.com/questions/52085191/modulenotfounderror-no-module-named-pyodbc-when-importing-pyodbc-into-py-scri/53667554#53667554", "title": "ModuleNotFoundError: No module named &#39;pyodbc&#39; when importing pyodbc into py script", "body": "<p>There is a useful step by step guide here: <a href=\"https://docs.microsoft.com/en-us/sql/connect/python/pyodbc/step-1-configure-development-environment-for-pyodbc-python-development?view=sql-server-2017\" rel=\"noreferrer\">https://docs.microsoft.com/en-us/sql/connect/python/pyodbc/step-1-configure-development-environment-for-pyodbc-python-development?view=sql-server-2017</a></p>\n\n<p>For reference, the steps in this guide (windows) are (assuming you already have python installed):</p>\n\n<ol>\n<li>Install the Microsoft ODBC Driver for SQL Server on Windows, from <a href=\"https://docs.microsoft.com/en-us/sql/connect/odbc/windows/system-requirements-installation-and-driver-files?view=sql-server-2017#installing-microsoft-odbc-driver-for-sql-server\" rel=\"noreferrer\">https://docs.microsoft.com/en-us/sql/connect/odbc/windows/system-requirements-installation-and-driver-files?view=sql-server-2017#installing-microsoft-odbc-driver-for-sql-server</a></li>\n<li>Open cmd.exe as an administrator</li>\n<li>Navigate to your python scripts folder containing pip</li>\n<li>Type: pip install pyodbc</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 329, "user_id": 10189973, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aIcY1a2kESI/AAAAAAAAAAI/AAAAAAAAT5A/4OQG-UJ6-98/photo.jpg?sz=128", "display_name": "Manish Pal", "link": "https://stackoverflow.com/users/10189973/manish-pal"}, "is_accepted": false, "score": 0, "last_activity_date": 1554980228, "last_edit_date": 1554980228, "creation_date": 1554979202, "answer_id": 55630516, "question_id": 52085191, "link": "https://stackoverflow.com/questions/52085191/modulenotfounderror-no-module-named-pyodbc-when-importing-pyodbc-into-py-scri/55630516#55630516", "title": "ModuleNotFoundError: No module named &#39;pyodbc&#39; when importing pyodbc into py script", "body": "<p>I also faced the same issue. You can try the following method :</p>\n\n<p>a) You can install the ODBC Driver for SQL Server. Visit: <br><a href=\"https://docs.microsoft.com/en-us/sql/connect/odbc/windows/system-requirements-installation-and-driver-files?view=sql-server-2017#installing-microsoft-odbc-driver-for-sql-server\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/sql/connect/odbc/windows/system-requirements-installation-and-driver-files?view=sql-server-2017#installing-microsoft-odbc-driver-for-sql-server</a></p>\n\n<p>b) Uninstall Python and close all your IDLE and install Python again. This worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 1901, "user_id": 4687359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e66NO.png?s=128&g=1", "display_name": "A. Nadjar", "link": "https://stackoverflow.com/users/4687359/a-nadjar"}, "is_accepted": false, "score": 2, "last_activity_date": 1556167896, "last_edit_date": 1556167896, "creation_date": 1556166240, "answer_id": 55841769, "question_id": 52085191, "link": "https://stackoverflow.com/questions/52085191/modulenotfounderror-no-module-named-pyodbc-when-importing-pyodbc-into-py-scri/55841769#55841769", "title": "ModuleNotFoundError: No module named &#39;pyodbc&#39; when importing pyodbc into py script", "body": "<p>It seems you have already installed the <strong>pyodbc module</strong>, but are trying to reference it from another environment.</p>\n\n<p>Some Steps:</p>\n\n<ol>\n<li>In the Solution Explorer window <em>right-click</em> Python Environments</li>\n<li><em>select</em> add/remove</li>\n<li><em>choose</em> your desired python interpreter.</li>\n</ol>\n\n<p>Refer: <a href=\"https://docs.microsoft.com/en-us/visualstudio/python/selecting-a-python-environment-for-a-project?view=vs-2019\" rel=\"nofollow noreferrer\">How to switch your project python environment to the one which includes pyodbc</a></p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 12379878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48062814da8e0444693415788e66f922?s=128&d=identicon&r=PG&f=1", "display_name": "TrishaAgrawal", "link": "https://stackoverflow.com/users/12379878/trishaagrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1573839865, "last_edit_date": 1592644375, "creation_date": 1573839445, "answer_id": 58882108, "question_id": 52085191, "link": "https://stackoverflow.com/questions/52085191/modulenotfounderror-no-module-named-pyodbc-when-importing-pyodbc-into-py-scri/58882108#58882108", "title": "ModuleNotFoundError: No module named &#39;pyodbc&#39; when importing pyodbc into py script", "body": "<p>I had the same problem.</p>\n<blockquote>\n<p>import sys</p>\n<p>print(sys.path)</p>\n</blockquote>\n<p>It turned out that the IDE I was using, PyCharm by JetBrains, had a different directory in which I had to install pyodbc. I used cmd line prompt to navigate to the PyCharm directory and reinstalled with pip there.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12859407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda4943f6e76ac6213d2c9a50b82c8ec?s=128&d=identicon&r=PG&f=1", "display_name": "alexey", "link": "https://stackoverflow.com/users/12859407/alexey"}, "is_accepted": false, "score": 0, "last_activity_date": 1581094995, "last_edit_date": 1581094995, "creation_date": 1581092445, "answer_id": 60117348, "question_id": 52085191, "link": "https://stackoverflow.com/questions/52085191/modulenotfounderror-no-module-named-pyodbc-when-importing-pyodbc-into-py-scri/60117348#60117348", "title": "ModuleNotFoundError: No module named &#39;pyodbc&#39; when importing pyodbc into py script", "body": "<p>I had absolutely the same error when tried to run my script on production server. <code>pip</code> successfully installed the <code>pyodbc</code>. its files were in location <code>...\\Lib\\site-packages</code> of that <code>python.exe</code> which I run (in cmd). But python still couldn't find it. I've tried manually reinstall it, but nothing was changed.</p>\n\n<p>Then I've noticed that python version on prod is newer <code>3.8.1</code> than it was on dev. So I installed an older version <code>3.6.5</code> of python (in other dir), install pyodbc to it (as usual). </p>\n\n<p>And what do you think? -  Now everything works fine with it!</p>\n"}], "owner": {"reputation": 131, "user_id": 10291844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cc5e82611c63ee795fbb36f0a07acc3?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry12345678", "link": "https://stackoverflow.com/users/10291844/jerry12345678"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46148, "favorite_count": 2, "answer_count": 6, "score": 13, "last_activity_date": 1581094995, "creation_date": 1535572609, "last_edit_date": 1535575093, "question_id": 52085191, "link": "https://stackoverflow.com/questions/52085191/modulenotfounderror-no-module-named-pyodbc-when-importing-pyodbc-into-py-scri", "title": "ModuleNotFoundError: No module named &#39;pyodbc&#39; when importing pyodbc into py script", "body": "<p>I've written a short python script which tries to import the pyodbc extension package so I can access my SQL table.</p>\n\n<pre><code>import pyodbc as pyodbc\ncnxn = pyodbc.connect('Driver={SQL Server};'\n                      'Server=DESKTOP-UO8KJOP;'\n                      'Database=ExamplePFData'\n                      'Trusted_Connection=yes;')\n</code></pre>\n\n<p>I have definitely installed the extension by using: pip install pyodbc. And when I go to install it again, cmd says: Requirement already satisfied: pyodbc in ... and I've found the pyd file in my directories.</p>\n\n<p>I have also tried installing pypyodbc, which didn't work.</p>\n\n<p>The error I get is:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:\\Users\\Jerry\\Documents\\Python\\SQLembed.py\", line 5, in &lt;module&gt;\nimport pyodbc as pyodbc\nModuleNotFoundError: No module named 'pyodbc'\n</code></pre>\n\n<p>(where line 5 is the 'import pyodbc' line)</p>\n\n<p>I have tried copying the pyodbc.cp37-win_amd64.pyd file into my Python Scripts folder and into the folder where my pip.exe file is.</p>\n\n<ul>\n<li>Currently python is my Python37 folder. </li>\n<li>pyodbc.cp37-win_amd64.pyd is in Python > Lib > site-packages.</li>\n</ul>\n\n<p>Can anyone help me fix this error please so that I can import pyodbc?</p>\n\n<p>Do all of the python extensions/modules that I install via pip need to be in the same folder/directory as python.exe?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2485, "user_id": 3639630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rPscq.jpg?s=128&g=1", "display_name": "Wesgur", "link": "https://stackoverflow.com/users/3639630/wesgur"}, "edited": false, "score": 0, "creation_date": 1535572529, "post_id": 52085169, "comment_id": 91120557, "body": "Post the entire error"}, {"owner": {"reputation": 1365, "user_id": 4032503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZyGYGtRux0/AAAAAAAAAAI/AAAAAAAACPo/xgHTSkTRldM/photo.jpg?sz=128", "display_name": "noslenkwah", "link": "https://stackoverflow.com/users/4032503/noslenkwah"}, "edited": false, "score": 0, "creation_date": 1535573070, "post_id": 52085169, "comment_id": 91120802, "body": "Please 1) Post your entire error as an edit to your question and not in the comment section and 2) Format your code (and error) as code."}, {"owner": {"reputation": 1826, "user_id": 261812, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1fb426f3d4f6918cac4ca4612e375736?s=128&d=identicon&r=PG", "display_name": "dursun", "link": "https://stackoverflow.com/users/261812/dursun"}, "edited": false, "score": 0, "creation_date": 1535573245, "post_id": 52085169, "comment_id": 91120893, "body": "can you also share a portion of your data object, because the schema and data is not seem to agree."}, {"owner": {"reputation": 59, "user_id": 10291856, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217185404527590/picture?type=large", "display_name": "Sandeep Sandy", "link": "https://stackoverflow.com/users/10291856/sandeep-sandy"}, "edited": false, "score": 0, "creation_date": 1535573860, "post_id": 52085169, "comment_id": 91121189, "body": "I have updated the post, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "is_accepted": true, "score": 6, "last_activity_date": 1535576943, "creation_date": 1535576943, "answer_id": 52086109, "question_id": 52085169, "link": "https://stackoverflow.com/questions/52085169/valueerror-conflicting-metadata-name-name-need-distinguishing-prefix-in-pandas/52086109#52086109", "title": "ValueError: Conflicting metadata name name, need distinguishing prefix in pandas", "body": "<p>You are close all you need to do is add record_prefix to handle name being used twice. Set the prefix to whatever string you want:</p>\n\n<pre><code>json_normalize(data,\n               'protocol_parameters',\n               [['status','status'], \n               'auto_discovered', \n               'average_eps',\n               'creation_date',\n               'description',\n               'last_event_time',\n               'name'], record_prefix='_'\n                )\n</code></pre>\n\n<p>out:</p>\n\n<pre><code>_name   _value  status.status   auto_discovered average_eps creation_date   description last_event_time name\n0   identifier  x.x.x.x SUCCESS True    0   0   LinuxServer device  1535539535018   LinuxServer @ x.x.x.x\n1   incomingPayloadEncoding UTF-8   SUCCESS True    0   0   LinuxServer device  1535539535018   LinuxServer @ x.x.x.x\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10291856, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217185404527590/picture?type=large", "display_name": "Sandeep Sandy", "link": "https://stackoverflow.com/users/10291856/sandeep-sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2983, "favorite_count": 0, "accepted_answer_id": 52086109, "answer_count": 1, "score": 4, "last_activity_date": 1535576943, "creation_date": 1535572511, "last_edit_date": 1535573731, "question_id": 52085169, "link": "https://stackoverflow.com/questions/52085169/valueerror-conflicting-metadata-name-name-need-distinguishing-prefix-in-pandas", "title": "ValueError: Conflicting metadata name name, need distinguishing prefix in pandas", "body": "<p>I am getting a ValueError when I execute the following</p>\n\n<pre><code>df = pd.DataFrame.from_dict(\n                  json_normalize(\n                                 data,\n                                 'protocol_parameters',\n                                 [['status','status'], \n                                  'auto_discovered', \n                                  'average_eps',\n                                  'creation_date',\n                                  'description',\n                                  'last_event_time',\n                                  'name']\n                                ), orient='columns')\n</code></pre>\n\n<p>Data Object used in the code</p>\n\n<pre><code>{\n        \"protocol_parameters\": [\n            {\n                \"name\": \"identifier\",\n                \"value\": \"x.x.x.x\"\n            },\n            {\n                \"name\": \"incomingPayloadEncoding\",\n                \"value\": \"UTF-8\"\n            }\n        ],\n        \"description\": \"LinuxServer device\",\n        \"average_eps\": 0,\n        \"creation_date\": 0,\n        \"name\": \"LinuxServer @ x.x.x.x\",\n        \"auto_discovered\": true,\n        \"last_event_time\": 1535539535018,\n        \"status\": {\n            \"status\": \"SUCCESS\"\n        }\n    },\n</code></pre>\n\n<p>Error Message ( I guess because name field is in 'protocol_parameters' and also a separate object. But I am unable to fix this issue</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"D:\\Qradar\\python\\LogSources.py\", line 31, in &lt;module&gt;\n    df = pd.DataFrame.from_dict(json_normalize(data,'protocol_parameters',[['status','status'],'auto_discovered','average_eps','creation_date','description','last_event_time','name']), orient='columns')\n  File \"D:\\VM\\python\\lib\\site-packages\\pandas\\io\\json\\normalize.py\", line 262, in json_normalize\n    'need distinguishing prefix ' % k)\nValueError: Conflicting metadata name name, need distinguishing prefix \n</code></pre>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 3254, "user_id": 274752, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tLuK6.jpg?s=128&g=1", "display_name": "Hultner", "link": "https://stackoverflow.com/users/274752/hultner"}, "edited": false, "score": 0, "creation_date": 1535573574, "post_id": 52085139, "comment_id": 91121049, "body": "Would you like to provide which version of python you are using? And could you attach with a link to this Canopy-thing (I haven&#39;t heard of it before)."}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 1, "creation_date": 1535574615, "post_id": 52085139, "comment_id": 91121546, "body": "Include all the information related to your question; don&#39;t link to external resources. Distill the page down to the minimum amount example required to exhibit the problem, and show what you&#39;re trying to accomplish. Please read <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3254, "user_id": 274752, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tLuK6.jpg?s=128&g=1", "display_name": "Hultner", "link": "https://stackoverflow.com/users/274752/hultner"}, "is_accepted": false, "score": 2, "last_activity_date": 1535574986, "last_edit_date": 1535574986, "creation_date": 1535574411, "answer_id": 52085588, "question_id": 52085139, "link": "https://stackoverflow.com/questions/52085139/scraping-webpage-in-python-cant-find-text/52085588#52085588", "title": "Scraping webpage in Python can&#39;t find text", "body": "<p>The page you provided is rendered within the browser with JavaScript (Angular). The actual sent HTML doesn't include the information about \"College Dominator\". Thus you'll have to render it before you can parse it, I'd recommend using a library more suited for parsing client side rendered pages. \n<a href=\"https://html.python-requests.org\" rel=\"nofollow noreferrer\">Requests-HTML</a> is one such option. With that library you could achieve your results like this:</p>\n\n<pre><code>r = session.get(\"https://www.playerprofiler.com/nfl/larry-fitzgerald/\")\nr.html.render()\ncollege_dominator = r.html.search(\"College Dominator {percentage}% ({rank}th)\")\n# {\"rank\": 96, \"percentage\": 51.3}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10291867, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217125546755835/picture?type=large", "display_name": "Tommy Valtin-Erwin", "link": "https://stackoverflow.com/users/10291867/tommy-valtin-erwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535574986, "creation_date": 1535572393, "question_id": 52085139, "link": "https://stackoverflow.com/questions/52085139/scraping-webpage-in-python-cant-find-text", "title": "Scraping webpage in Python can&#39;t find text", "body": "<p>I am trying to scrape <a href=\"https://www.playerprofiler.com/nfl/larry-fitzgerald/\" rel=\"nofollow noreferrer\">this webpage</a> using BeautifulSoup in Canopy 1.6.1. What I want to be able to return is the \"College Dominator\" rating as well as the \"Breakout Age\" rating. I think that the reason this isn't working is because it's behind Javascript, but I don't know how to find that information from the scraped data. Please help!</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": true, "score": 3, "last_activity_date": 1535572559, "creation_date": 1535572559, "answer_id": 52085179, "question_id": 52085111, "link": "https://stackoverflow.com/questions/52085111/dictionary-comprehension-with-items-divided-to-lists-based-on-attribute-as-key/52085179#52085179", "title": "dictionary comprehension with items divided to lists based on attribute as key.", "body": "<p>The <code>defaultdict</code> from <code>collections</code> is a good solution for this problem.</p>\n\n<pre><code>from collections import defaultdict\n\nclass A:\n    def __init__(self,x):\n        self.x = x\n\na = A(1)\nb = A(2)\nc = A(2)\nd = A(2)\ne = A(1)\nmylist = [a,b,c,d,e]\n\nout = defaultdict(list)\n\nfor e in mylist:\n    out[e.x].append(e)\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4473522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90221aa7b4a18738977e5c7ac9daf771?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Sakalos", "link": "https://stackoverflow.com/users/4473522/jan-sakalos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1535572785, "accepted_answer_id": 52085179, "answer_count": 1, "score": 0, "last_activity_date": 1535582148, "creation_date": 1535572238, "question_id": 52085111, "link": "https://stackoverflow.com/questions/52085111/dictionary-comprehension-with-items-divided-to-lists-based-on-attribute-as-key", "closed_reason": "Duplicate", "title": "dictionary comprehension with items divided to lists based on attribute as key.", "body": "<p>we have following code:</p>\n\n<pre><code>class A:\n    def __init__(self,x):\n        self.x = x\n\na = A(1)\nb = A(2)\nc = A(2)\nd = A(2)\ne = A(1)\nlist = [a,b,c,d,e]\n</code></pre>\n\n<p>How to get following output?</p>\n\n<pre><code>{1:[a,e],\n2:[b,c,d]\n}\n</code></pre>\n\n<p>i was thinking of something like:</p>\n\n<pre><code>{item.x: [].append(item) for item in list}\n</code></pre>\n\n<p>Thanks\nJano</p>\n"}, {"tags": ["python", "python-3.x", "python-multiprocessing"], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 790979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ecf6f6d2ed8e343bb728a2e573c13ad?s=128&d=identicon&r=PG", "display_name": "charleslparker", "link": "https://stackoverflow.com/users/790979/charleslparker"}, "edited": false, "score": 0, "creation_date": 1536097598, "post_id": 52085319, "comment_id": 91299705, "body": "Thanks @Daniel.  I&#39;d assumed that the value returned by <code>multiprocessing.get_context</code> just contained a reference to <code>multiprocessing.Process</code>, but looking deeper into the source I was clearly wrong."}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1535573139, "creation_date": 1535573139, "answer_id": 52085319, "question_id": 52085107, "link": "https://stackoverflow.com/questions/52085107/python-3-spawning-process-subclasses/52085319#52085319", "title": "Python 3: Spawning Process Subclasses", "body": "<p>Inherit from <code>ctx.Process</code>:</p>\n\n<pre><code>ctx = multiprocessing.get_context('spawn')\nclass CustomProcess(ctx.Process):\n    # define methods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1542, "user_id": 790979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ecf6f6d2ed8e343bb728a2e573c13ad?s=128&d=identicon&r=PG", "display_name": "charleslparker", "link": "https://stackoverflow.com/users/790979/charleslparker"}, "is_accepted": false, "score": 1, "last_activity_date": 1536098057, "creation_date": 1536098057, "answer_id": 52174476, "question_id": 52085107, "link": "https://stackoverflow.com/questions/52085107/python-3-spawning-process-subclasses/52174476#52174476", "title": "Python 3: Spawning Process Subclasses", "body": "<p>The accepted answer by @Daniel is perfectly fine (and may be more idiomatic), but note also that you can find the appropriately contextualized subclasses of <code>Process</code> deeper in the multiprocessing module (such as <code>multiprocessing.context.SpawnProcess</code>).  You can also inherit from these to get the desired behavior.</p>\n"}], "owner": {"reputation": 1542, "user_id": 790979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ecf6f6d2ed8e343bb728a2e573c13ad?s=128&d=identicon&r=PG", "display_name": "charleslparker", "link": "https://stackoverflow.com/users/790979/charleslparker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 52085319, "answer_count": 2, "score": 0, "last_activity_date": 1536098057, "creation_date": 1535572228, "last_edit_date": 1535572864, "question_id": 52085107, "link": "https://stackoverflow.com/questions/52085107/python-3-spawning-process-subclasses", "title": "Python 3: Spawning Process Subclasses", "body": "<p>We can create non-forked processes with Python 3's <code>multiprocessing</code> using a created context:</p>\n\n<pre><code>ctx = multiprocessing.get_context('spawn')\np = ctx.Process(target=foo, args=(42,))\np.start()\n</code></pre>\n\n<p>But suppose I'm working with a subclass of <code>Process</code>.  Is there a way to create a <code>Process</code> subclass instance using a method other than <code>fork</code>?</p>\n"}, {"tags": ["python", "python-3.x", "flask", "werkzeug"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1535573259, "post_id": 52085099, "comment_id": 91120900, "body": "What versions of Flask and werkzeug are you running?"}, {"owner": {"reputation": 1641, "user_id": 3357587, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e68d1106f2d159c72a735b8235ce557b?s=128&d=identicon&r=PG&f=1", "display_name": "David Simic", "link": "https://stackoverflow.com/users/3357587/david-simic"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1536088047, "post_id": 52085099, "comment_id": 91295800, "body": "@KlausD. see my edit."}], "answers": [{"comments": [{"owner": {"reputation": 1641, "user_id": 3357587, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e68d1106f2d159c72a735b8235ce557b?s=128&d=identicon&r=PG&f=1", "display_name": "David Simic", "link": "https://stackoverflow.com/users/3357587/david-simic"}, "edited": false, "score": 0, "creation_date": 1535576503, "post_id": 52085655, "comment_id": 91122343, "body": "I ended up uninstalling / installing Werkzeug and it worked. Unfortunately still clueless as to what it was and odds of now finding out are slim to none."}, {"owner": {"reputation": 3254, "user_id": 274752, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tLuK6.jpg?s=128&g=1", "display_name": "Hultner", "link": "https://stackoverflow.com/users/274752/hultner"}, "reply_to_user": {"reputation": 1641, "user_id": 3357587, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e68d1106f2d159c72a735b8235ce557b?s=128&d=identicon&r=PG&f=1", "display_name": "David Simic", "link": "https://stackoverflow.com/users/3357587/david-simic"}, "edited": false, "score": 0, "creation_date": 1535576557, "post_id": 52085655, "comment_id": 91122364, "body": "Strange, maybe some version mismatch somewhere."}], "tags": [], "owner": {"reputation": 3254, "user_id": 274752, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tLuK6.jpg?s=128&g=1", "display_name": "Hultner", "link": "https://stackoverflow.com/users/274752/hultner"}, "is_accepted": false, "score": 1, "last_activity_date": 1535574699, "creation_date": 1535574699, "answer_id": 52085655, "question_id": 52085099, "link": "https://stackoverflow.com/questions/52085099/werkzeug-on-python-3-raises-not-supported-between-instances-of-str-and-int/52085655#52085655", "title": "Werkzeug on Python 3 raises &quot;&lt; not supported between instances of str and int&quot;", "body": "<p>It seems you're error is outside of this file, most likely either in your <code>@login_required</code> decorator or in your flask-app using this blueprint. </p>\n\n<p>I think you are returning a status code as a string somewhere e.g. <code>return Response, \"200\"</code> which is causing werkzeug total the comparison</p>\n"}, {"comments": [{"owner": {"reputation": 13247, "user_id": 943773, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/66a7a506ddac2514578a371a66c8d781?s=128&d=identicon&r=PG", "display_name": "ryanjdillon", "link": "https://stackoverflow.com/users/943773/ryanjdillon"}, "edited": false, "score": 0, "creation_date": 1548945096, "post_id": 53073753, "comment_id": 95733620, "body": "This was the solution to my problem. I&#39;m not sure why this was down-voted. I&#39;m on Flask <code>0.12.1</code>, and was getting this error on Werkzeug <code>0.14.0</code>.  Please include comments with your down-votes folks!"}], "tags": [], "owner": {"reputation": 83, "user_id": 2898183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1046e1e622d72ff9d8e41269bf7fa13a?s=128&d=identicon&r=PG&f=1", "display_name": "Zeke", "link": "https://stackoverflow.com/users/2898183/zeke"}, "is_accepted": false, "score": 4, "last_activity_date": 1540942696, "last_edit_date": 1592644375, "creation_date": 1540938421, "answer_id": 53073753, "question_id": 52085099, "link": "https://stackoverflow.com/questions/52085099/werkzeug-on-python-3-raises-not-supported-between-instances-of-str-and-int/53073753#53073753", "title": "Werkzeug on Python 3 raises &quot;&lt; not supported between instances of str and int&quot;", "body": "<p>This is fixed in werkzeug 0.14.1</p>\n<p>See:\n<a href=\"https://github.com/pallets/werkzeug/commit/86f6d0bc7c410f70ac290eef018ee48a46563d4b\" rel=\"nofollow noreferrer\">https://github.com/pallets/werkzeug/commit/86f6d0bc7c410f70ac290eef018ee48a46563d4b</a></p>\n<blockquote>\n<p>Fixed a regression in the development server</p>\n<p>This fixes a type error being thrown for some requests.</p>\n</blockquote>\n"}], "owner": {"reputation": 1641, "user_id": 3357587, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e68d1106f2d159c72a735b8235ce557b?s=128&d=identicon&r=PG&f=1", "display_name": "David Simic", "link": "https://stackoverflow.com/users/3357587/david-simic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1540942696, "creation_date": 1535572187, "last_edit_date": 1536591197, "question_id": 52085099, "link": "https://stackoverflow.com/questions/52085099/werkzeug-on-python-3-raises-not-supported-between-instances-of-str-and-int", "title": "Werkzeug on Python 3 raises &quot;&lt; not supported between instances of str and int&quot;", "body": "<p>I am trying to upgrade my flask app from Python 2.7 to 3.6.</p>\n\n<p>The dev server runs. However when I try to access the home view, I am getting the rather unhelpful error:</p>\n\n<pre><code>INFO:werkzeug:127.0.0.1 - - [29/Aug/2018 14:41:11] \"GET / HTTP/1.1\" 500 \nERROR:werkzeug:Error on request:\nTraceback (most recent call last):\n  File \"/Users/david/PycharmProjects/med-portal/venv/lib/python3.6/site-packages/werkzeug/serving.py\", line 269, in run_wsgi\n    execute(self.server.app)\n  File \"/Users/david/PycharmProjects/med-portal/venv/lib/python3.6/site-packages/werkzeug/serving.py\", line 260, in execute\n    write(data)\n  File \"/Users/david/PycharmProjects/med-portal/venv/lib/python3.6/site-packages/werkzeug/serving.py\", line 231, in write\n    status &lt; 200 or status in (204, 304)):\nTypeError: '&lt;' not supported between instances of 'str' and 'int'\n</code></pre>\n\n\n\n<pre><code># The Home page is accessible to authenticated users\n@core_blueprint.route('')\n@login_required  # Limits access to authenticated and active users\ndef home_page():\n    print(\"Return home\")\n    return render_template('index.html')\n</code></pre>\n\n<p><strong>Version Info: Flask version 1.0.2, Werkzeug 0.14, Mac OSX High Sierra 10.13.6</strong></p>\n"}]