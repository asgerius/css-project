[{"tags": ["python", "django", "django-views"], "answers": [{"tags": [], "owner": {"reputation": 1842, "user_id": 4592608, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/9hXR4.jpg?s=128&g=1", "display_name": "Zagorodniy Olexiy", "link": "https://stackoverflow.com/users/4592608/zagorodniy-olexiy"}, "is_accepted": false, "score": -1, "last_activity_date": 1483574476, "creation_date": 1483574476, "answer_id": 41475246, "question_id": 41475220, "link": "https://stackoverflow.com/questions/41475220/cant-call-a-view-from-within-a-template/41475246#41475246", "title": "Can&#39;t call a view from within a template", "body": "<p>Try to change on it:</p>\n\n<pre><code>def page(request, pk):\n    page = Page.objects.get(pk=1).first()\n    context = {\n        'page': page,\n        'answers': Answer.objects.filter(source_page_id=page__id)\n    }\n    return render(request, 'page.html', context)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 579, "user_id": 7362592, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b11d811d7671fc1bca9d2d7ab4093151?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Vyushkov", "link": "https://stackoverflow.com/users/7362592/alex-vyushkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1483576197, "creation_date": 1483576197, "answer_id": 41475464, "question_id": 41475220, "link": "https://stackoverflow.com/questions/41475220/cant-call-a-view-from-within-a-template/41475464#41475464", "title": "Can&#39;t call a view from within a template", "body": "<p>You need to define input parameters to your view in your urls.py:</p>\n\n<p>This is wrong:</p>\n\n<pre><code>url(r\"^page/$\", page, name=\"page\"),\n</code></pre>\n\n<p>This is right:</p>\n\n<pre><code>url(r\"^page/(?P&lt;page_id&gt;.*)/$\", page, name=\"page\"),\n</code></pre>\n"}], "owner": {"reputation": 673, "user_id": 5077434, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-CQSO8YkdyGg/AAAAAAAAAAI/AAAAAAAAC1o/GXf_oc5W1ic/photo.jpg?sz=128", "display_name": "Aviran Katz", "link": "https://stackoverflow.com/users/5077434/aviran-katz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484049306, "creation_date": 1483574310, "last_edit_date": 1484049306, "question_id": 41475220, "link": "https://stackoverflow.com/questions/41475220/cant-call-a-view-from-within-a-template", "title": "Can&#39;t call a view from within a template", "body": "<p>I'm trying to call a view with an optional parameter from a template, but an exception is thrown.</p>\n\n<p>This is my view:</p>\n\n<pre><code>def page(request, page_id=1):\n    page = Page.objects.filter(pk=page_id).first()\n    context = {\n        'page': page,\n        'answers': Answer.objects.filter(source_page_id=page.id)\n    }\n    return render(request, 'page.html', context)\n</code></pre>\n\n<p>And here's my attempt to call it from <code>page.html</code> template:</p>\n\n<pre><code>&lt;ul&gt;\n    {% for answer in answers %}\n        &lt;li&gt;&lt;a href=\"{% url 'page' answer.target_page_id %}\"&gt;{{ answer.choice_text }}&lt;/a&gt;&lt;/li&gt;\n    {% endfor %}\n&lt;/ul&gt;\n</code></pre>\n\n<p>But for some reason, an exception is thrown, as follows:</p>\n\n<pre><code>Reverse for 'page' with arguments '(1,)' and keyword arguments '{}' not found. 1 pattern(s) tried: ['$$']\n</code></pre>\n\n<p>What's happening here? Thanks in advance.</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "reply_to_user": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1483574777, "post_id": 41475226, "comment_id": 70156583, "body": "@user308827: it really shouldn&#39;t. what makes you think so?"}, {"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1483574855, "post_id": 41475226, "comment_id": 70156607, "body": "In my full dataset, it is converting everything to 0.0"}, {"owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "reply_to_user": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "edited": false, "score": 0, "creation_date": 1483575147, "post_id": 41475226, "comment_id": 70156712, "body": "@user308827: see my update to the answer. Maybe something is wrong with your dataset (all NaNs?) -- check it step by step"}], "tags": [], "owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "is_accepted": true, "score": 1, "last_activity_date": 1483575121, "last_edit_date": 1483575121, "creation_date": 1483574340, "answer_id": 41475226, "question_id": 41475203, "link": "https://stackoverflow.com/questions/41475203/replace-nans-in-masked-numpy-array/41475226#41475226", "title": "Replace NaNs in masked numpy array", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.nan_to_num.html\" rel=\"nofollow noreferrer\">nan_to_num</a> is the right way to do it. Here's a 2D example:</p>\n\n<pre><code>In [25]: arr = np.array([[10, 20], [np.nan, 30], [np.nan, -10]])\n\nIn [26]: arr\nOut[26]: \narray([[ 10.,  20.],\n       [ nan,  30.],\n       [ nan, -10.]])\n\nIn [27]: np.nan_to_num(arr)\nOut[27]: \narray([[ 10.,  20.],\n       [  0.,  30.],\n       [  0., -10.]])\n</code></pre>\n\n<p>I believe <code>nan_to_num</code> should work on masked arrays as well. For example:</p>\n\n<pre><code>In [33]: mx = ma.masked_array([np.nan, 2, 3, 4], mask=[0, 0, 1, 0])\n\nIn [34]: mx.compressed()\nOut[34]: array([ nan,   2.,   4.])\n</code></pre>\n\n<p>And now:</p>\n\n<pre><code>In [36]: np.nan_to_num(ma.masked_array([np.nan, 2, 3, 4], mask=[0, 0, 1, 0])).compressed()\nOut[36]: array([ 0.,  2.,  4.])\n</code></pre>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 41475226, "answer_count": 1, "score": 0, "last_activity_date": 1483575121, "creation_date": 1483574211, "question_id": 41475203, "link": "https://stackoverflow.com/questions/41475203/replace-nans-in-masked-numpy-array", "title": "Replace NaNs in masked numpy array", "body": "<pre><code>var[np.isnan(var)] = 0.0\n\nvar.shape\n(50, 360, 720)\n</code></pre>\n\n<p>I want to replace NaNs in the array with 0.0. However, I get an error: <code>*** IndexError: Index cannot be multidimensional</code></p>\n\n<pre><code>var[0]\n\nmasked_array(data =\n [[-- -- -- ..., -- -- --]\n [-- -- -- ..., -- -- --]\n [-- -- -- ..., -- -- --]\n ..., \n [-- -- -- ..., -- -- --]\n [-- -- -- ..., -- -- --]\n [-- -- -- ..., -- -- --]],\n             mask =\n [[ True  True  True ...,  True  True  True]\n [ True  True  True ...,  True  True  True]\n [ True  True  True ...,  True  True  True]\n ..., \n [ True  True  True ...,  True  True  True]\n [ True  True  True ...,  True  True  True]\n [ True  True  True ...,  True  True  True]],\n       fill_value = nan)\n</code></pre>\n\n<p>How to fix it?</p>\n"}, {"tags": ["python", "oracle", "oracle11g", "pypyodbc"], "comments": [{"owner": {"reputation": 868, "user_id": 4406123, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27d01f1d87068e51325594a05952bbdc?s=128&d=identicon&r=PG&f=1", "display_name": "ju.", "link": "https://stackoverflow.com/users/4406123/ju"}, "edited": false, "score": 0, "creation_date": 1483634175, "post_id": 41475185, "comment_id": 70185783, "body": "The key is to link python code to tnsname.ora by define dbq parameter. So change the code to the following worked. <code>conn_string = &quot;driver={Oracle in OraClient11g_home1}; dbq=&#39;tabto&#39;; uid=&#39;myuid&#39;; pwd=&#39;mypwd&#39;&quot; conn = pypyodbc.connect(conn_string)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 7376763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2dqOe.jpg?s=128&g=1", "display_name": "Diogo Sousa", "link": "https://stackoverflow.com/users/7376763/diogo-sousa"}, "is_accepted": false, "score": 0, "last_activity_date": 1483576833, "creation_date": 1483576833, "answer_id": 41475549, "question_id": 41475185, "link": "https://stackoverflow.com/questions/41475185/how-to-connect-oracle-database-with-python-pypyodbc/41475549#41475549", "title": "How to connect oracle database with python pypyodbc", "body": "<pre><code>conn = pyodbc.connect(r'DRIVER={SQL Server Native Client 11.0};SERVER=example.oneco.com:1521;DATABASE=tabto;UID=youruid;PWD=password')\n</code></pre>\n\n<p>try it without quotes(') of your code in the middle...</p>\n\n<p>check too pyodbc wiki: <a href=\"https://github.com/mkleehammer/pyodbc/wiki/Connecting-to-SQL-Server-from-Windows\" rel=\"nofollow noreferrer\">https://github.com/mkleehammer/pyodbc/wiki/Connecting-to-SQL-Server-from-Windows</a></p>\n"}, {"comments": [{"owner": {"reputation": 104, "user_id": 11949430, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K2tpCyQIyyk/AAAAAAAAAAI/AAAAAAAAADw/q1zvzwmQL-U/photo.jpg?sz=128", "display_name": "Yi Zong Kuang", "link": "https://stackoverflow.com/users/11949430/yi-zong-kuang"}, "edited": false, "score": 0, "creation_date": 1610953055, "post_id": 41490084, "comment_id": 116284871, "body": "I just want to clarify for future references, as I got confused about this. But the parameter for dbq can be any of the tns names specified. So dbq=&#39;tabto.oneco.com&#39; or dbq=&#39;tabto.world&#39; would work also."}], "tags": [], "owner": {"reputation": 868, "user_id": 4406123, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27d01f1d87068e51325594a05952bbdc?s=128&d=identicon&r=PG&f=1", "display_name": "ju.", "link": "https://stackoverflow.com/users/4406123/ju"}, "is_accepted": true, "score": 2, "last_activity_date": 1483669522, "last_edit_date": 1483669522, "creation_date": 1483634095, "answer_id": 41490084, "question_id": 41475185, "link": "https://stackoverflow.com/questions/41475185/how-to-connect-oracle-database-with-python-pypyodbc/41490084#41490084", "title": "How to connect oracle database with python pypyodbc", "body": "<p>The key is link python code to tnsname.ora by defining <code>dbq</code> parameter. So change the code to the following worked.</p>\n\n<pre><code>conn_string = \"driver={Oracle in OraClient11g_home1}; dbq='tabto'; uid='myuid'; pwd='mypwd'\"\nconn = pypyodbc.connect(conn_string)\n</code></pre>\n"}], "owner": {"reputation": 868, "user_id": 4406123, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27d01f1d87068e51325594a05952bbdc?s=128&d=identicon&r=PG&f=1", "display_name": "ju.", "link": "https://stackoverflow.com/users/4406123/ju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6214, "favorite_count": 0, "accepted_answer_id": 41490084, "answer_count": 2, "score": 1, "last_activity_date": 1483669522, "creation_date": 1483574077, "question_id": 41475185, "link": "https://stackoverflow.com/questions/41475185/how-to-connect-oracle-database-with-python-pypyodbc", "title": "How to connect oracle database with python pypyodbc", "body": "<p>I am trying to connect an oracle database from my python code using <code>pypyodbc</code>:</p>\n\n<pre><code>conn_string = \"driver={Oracle in OraClient11g_home1}; server='example.oneco.com:1521'; database='tabto'; uid='myuid'; pwd='mypwd'\"\nconn = pypyodbc.connect(conn_string)\n</code></pre>\n\n<p>I got error message:</p>\n\n<blockquote>\n  <p>Error: (u'HY000', u'[HY000] [Oracle][ODBC][Ora]ORA-12560: TNS:protocol\n  adapter error\\n')</p>\n</blockquote>\n\n<p>Following is the connection string found in my <code>tnsnames.ora</code> file. Please tell me what is the right way to use <code>pypyodbc</code>.</p>\n\n<pre><code>tabto, tabto.world, tabto.oracleoutsourcing.com, tabto.oneco.com =\n  (DESCRIPTION =\n    (ADDRESS = \n      (PROTOCOL = TCP)\n      (HOST = example.oneco.com)\n      (PORT = 1521)\n    )\n    (CONNECT_DATA =\n    (SERVER = DEDICATED)\n    (SERVICE_NAME = tabto_dcu)\n    )\n  )\n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 2178, "user_id": 2878004, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f808bd3121d4fe714d476f8cad18f9d5?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2878004/aaron"}, "edited": false, "score": 0, "creation_date": 1483575642, "post_id": 41475180, "comment_id": 70156857, "body": "In response to your 2nd question: it probably doesn&#39;t matter very much which strategy you use but I would recommend going with what s0urcer said"}, {"owner": {"reputation": 3261, "user_id": 5915270, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/960481744028994/picture?type=large", "display_name": "Shamane Siriwardhana", "link": "https://stackoverflow.com/users/5915270/shamane-siriwardhana"}, "edited": false, "score": 0, "creation_date": 1500436711, "post_id": 41475180, "comment_id": 77329558, "body": "I tried to explain NCE loss in this post. Please give a look at.   <a href=\"https://www.linkedin.com/pulse/heavy-softmax-use-nce-loss-shamane-siriwardhana\" rel=\"nofollow noreferrer\">linkedin.com/pulse/&hellip;</a>"}, {"owner": {"reputation": 3862, "user_id": 142456, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e084f5673214074a5c737c131f082a43?s=128&d=identicon&r=PG", "display_name": "fostandy", "link": "https://stackoverflow.com/users/142456/fostandy"}, "edited": false, "score": 0, "creation_date": 1522086671, "post_id": 41475180, "comment_id": 85999214, "body": "@GabrielChu you identified that each word has two embeddings (centre word and context word). Would you mind identifying where in any of the answers these are identified? I get the impression the hidden layer weight matrix is one of these. But which one? And where is the other?"}, {"owner": {"reputation": 3862, "user_id": 142456, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e084f5673214074a5c737c131f082a43?s=128&d=identicon&r=PG", "display_name": "fostandy", "link": "https://stackoverflow.com/users/142456/fostandy"}, "edited": false, "score": 0, "creation_date": 1522088015, "post_id": 41475180, "comment_id": 85999893, "body": "Okay, after some thinking - it intuitively looks like like the nce_weights is the &#39;other&#39; embedding (after all, you are performing the dot product of one row against column of another) - and ultimately it is just discarded?"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 4646735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2159a73e51936cf851e7ccf325b71f16?s=128&d=identicon&r=PG&f=1", "display_name": "curator23", "link": "https://stackoverflow.com/users/4646735/curator23"}, "is_accepted": false, "score": 3, "last_activity_date": 1485865597, "last_edit_date": 1485865597, "creation_date": 1485865144, "answer_id": 41957436, "question_id": 41475180, "link": "https://stackoverflow.com/questions/41475180/understanding-tf-nn-nce-loss-in-tensorflow/41957436#41957436", "title": "Understanding `tf.nn.nce_loss()` in tensorflow", "body": "<p>The <code>embeddings</code> Tensor is your final output matrix. It maps words to vectors. Use this in your word prediction graph.</p>\n\n<p>The input matrix is a batch of <code>centre-word : context-word</code> pairs (<code>train_input</code> and <code>train_label</code> respectively) generated from the training text. </p>\n\n<p>While the exact workings of the <code>nce_loss</code> op are not yet know to me, the basic idea is that it uses a single layer network (parameters <code>nce_weights</code> and <code>nce_biases</code>) to map an input vector (selected from <code>embeddings</code> using the <code>embed</code> op) to an output word, and then compares the output to the training label (an adjacent word in the training text) and also to a random sub-sample (<code>num_sampled</code>) of all other words in the vocab, and then modifies the input vector (stored in <code>embeddings</code>) and the network parameters to minimise the error.</p>\n"}, {"comments": [{"owner": {"reputation": 6485, "user_id": 665023, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/19de47c795aeb4440bcf2097e83e02a4?s=128&d=identicon&r=PG", "display_name": "derek", "link": "https://stackoverflow.com/users/665023/derek"}, "edited": false, "score": 0, "creation_date": 1488690211, "post_id": 42392407, "comment_id": 72339558, "body": "word embedding [10, 12, 19] is not output layer. Instead it is Hidden layer."}, {"owner": {"reputation": 4261, "user_id": 3552975, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3afcf08cd317313539eeca4b605c0ad?s=128&d=identicon&r=PG&f=1", "display_name": "Lerner Zhang", "link": "https://stackoverflow.com/users/3552975/lerner-zhang"}, "reply_to_user": {"reputation": 6485, "user_id": 665023, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/19de47c795aeb4440bcf2097e83e02a4?s=128&d=identicon&r=PG", "display_name": "derek", "link": "https://stackoverflow.com/users/665023/derek"}, "edited": false, "score": 0, "creation_date": 1488690639, "post_id": 42392407, "comment_id": 72339630, "body": "Yeah. The output of <b>that</b> hidden layer."}], "tags": [], "owner": {"reputation": 4261, "user_id": 3552975, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3afcf08cd317313539eeca4b605c0ad?s=128&d=identicon&r=PG&f=1", "display_name": "Lerner Zhang", "link": "https://stackoverflow.com/users/3552975/lerner-zhang"}, "is_accepted": false, "score": 2, "last_activity_date": 1488690739, "last_edit_date": 1592644375, "creation_date": 1487768962, "answer_id": 42392407, "question_id": 41475180, "link": "https://stackoverflow.com/questions/41475180/understanding-tf-nn-nce-loss-in-tensorflow/42392407#42392407", "title": "Understanding `tf.nn.nce_loss()` in tensorflow", "body": "<blockquote>\n<p>What are the input and output matrices in the NCE function?</p>\n</blockquote>\n<p>Take for example the skip gram model, for this sentence:</p>\n<p><code>the quick brown fox jumped over the lazy dog</code></p>\n<p>the input and output pairs are:</p>\n<p><code>(quick, the), (quick, brown), (brown, quick), (brown, fox), ...</code></p>\n<p>For more information please refer to <a href=\"https://www.tensorflow.org/tutorials/word2vec\" rel=\"nofollow noreferrer\">the tutorial</a>.</p>\n<blockquote>\n<p>What is the final embedding?</p>\n</blockquote>\n<p>The final embedding you should extract is usually <strong>the {w} between the input and hidden layer</strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/447Nn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/447Nn.png\" alt=\"enter image description here\" /></a></p>\n<p>To illustrate more intuitively take a look at the following picture:\n<a href=\"https://i.stack.imgur.com/Rlo4M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rlo4M.png\" alt=\"enter image description here\" /></a></p>\n<p>The one hot vector [0, 0, 0, 1, 0] is the input layer in the above graph, the output is the word embedding [10, 12, 19], and W(in the graph above) is the matrix in between.</p>\n<p>For detailed explanation please read <a href=\"http://mccormickml.com/2016/04/19/word2vec-tutorial-the-skip-gram-model/\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 663, "user_id": 1020390, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29e44d5a58298e32d84fa39602dd78da?s=128&d=identicon&r=PG", "display_name": "LKS", "link": "https://stackoverflow.com/users/1020390/lks"}, "edited": false, "score": 1, "creation_date": 1503944574, "post_id": 44078789, "comment_id": 78808974, "body": "In the warning part, targets and contexts are just choices you made to call the parameters when you declare the model. The model you intend to use is the skipgrams model."}, {"owner": {"reputation": 663, "user_id": 1020390, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29e44d5a58298e32d84fa39602dd78da?s=128&d=identicon&r=PG", "display_name": "LKS", "link": "https://stackoverflow.com/users/1020390/lks"}, "edited": false, "score": 1, "creation_date": 1503947340, "post_id": 44078789, "comment_id": 78810268, "body": "I am not saying your answer is wrong. My comment is trying to say that the terminology &quot;context&quot; and &quot;target&quot; depends on what you want to do (and you want to do is skipgram model) and nce loss itself does not make the distinction."}], "tags": [], "owner": {"reputation": 450, "user_id": 4670794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7438877b19bd0ae735aef453a72855?s=128&d=identicon&r=PG&f=1", "display_name": "garej", "link": "https://stackoverflow.com/users/4670794/garej"}, "is_accepted": false, "score": 1, "last_activity_date": 1558640150, "last_edit_date": 1558640150, "creation_date": 1495227038, "answer_id": 44078789, "question_id": 41475180, "link": "https://stackoverflow.com/questions/41475180/understanding-tf-nn-nce-loss-in-tensorflow/44078789#44078789", "title": "Understanding `tf.nn.nce_loss()` in tensorflow", "body": "<p>1) In short, it is right in general, but just partly right for the function in question. See <a href=\"https://www.tensorflow.org/tutorials/word2vec#training_the_model\" rel=\"nofollow noreferrer\">tutorial</a>:</p>\n\n<blockquote>\n  <p>The noise-contrastive estimation loss is defined in terms of a\n  logistic regression model. For this, we need to define the weights and\n  biases for each word in the vocabulary (also called the <code>output weights</code>\n  <strong>as opposed</strong> to the <code>input embeddings</code>).</p>\n</blockquote>\n\n<p>So inputs to the function <code>nce_loss</code> are <code>output weights</code> and a small <strong>part</strong> of <code>input embeddings</code>, among the other stuff.</p>\n\n<p>2) 'Final' embedding (aka Word vectors, aka Vector representations of Words) is what you call <code>input matrix</code>. Embeddings are strings (vectors) of that matrix, corresponding to each word.</p>\n\n<p><strong>Warn</strong> In fact, this terminology is confusing because of input and output concepts usage in NN environment. Embeddings matrix is not an input to NN, as input to NN is technically an input layer. You obtain the final state of this matrix during training process. Nonetheless, this matrix should be initialised in programming, because an algorithm has to start from some random state of this matrix to gradually update it during training.</p>\n\n<p>The same is true for weights - they are to be initialised also. It happens in the following line:</p>\n\n<pre><code>nce_weights = tf.Variable(\n        tf.truncated_normal([50000, 128], stddev=1.0 / math.sqrt(128)))\n</code></pre>\n\n<p>Each embedding vector can be multiplied by a vector from weights matrix (in a string to column manner). So we will get the scalar in the NN <code>output layer</code>. The norm of this scalar is interpreted as probability that the target word (from input layer) will be accompanied by label [or context] word corresponding to the place of scalar in <code>output layer</code>.</p>\n\n<hr>\n\n<p>So, if we are saying about inputs (arguments) to the function, then both matrixes are such: weights and a batch sized extraction from embeddings:</p>\n\n<pre><code>tf.nn.nce_loss(weights=nce_weights,            # Tensor of shape(50000, 128)\n               biases=nce_biases,              # vector of zeros; len(128)\n               labels=train_labels,            # labels == context words enums\n               inputs=embed,                   # Tensor of shape(128, 128)\n               num_sampled=num_sampled,        # 64: randomly chosen negative (rare) words\n               num_classes=vocabulary_size))   # 50000: by construction\n</code></pre>\n\n<p>This <code>nce_loss</code> function outputs a vector of batch_size - in the TensorFlow example a <code>shape(128,)</code> tensor.\nThen <code>reduce_mean()</code> reduces this result to a scalar taken the mean of those 128 values, which is in fact an objective for further minimization.</p>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 479, "user_id": 8796085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w3hNjnf3AD8/AAAAAAAAAAI/AAAAAAAAACA/1kXoCeNiTFc/photo.jpg?sz=128", "display_name": "Eduardo Freitas", "link": "https://stackoverflow.com/users/8796085/eduardo-freitas"}, "edited": false, "score": 0, "creation_date": 1591683216, "post_id": 44099690, "comment_id": 110140282, "body": "I think that <code>y_</code> in the mentioned code is <code>y_idx</code>, right? And, in the beginning of answer, is  <code>train_labels</code>."}, {"owner": {"reputation": 157, "user_id": 6088463, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/A7JG5.jpg?s=128&g=1", "display_name": "JenkinsY", "link": "https://stackoverflow.com/users/6088463/jenkinsy"}, "edited": false, "score": 0, "creation_date": 1604373454, "post_id": 44099690, "comment_id": 114321886, "body": "<code>nce_biases</code> dimension should be <code>vocabulary_size </code> rather than <code>embed_size</code>, right? might be a typo in your comment."}, {"owner": {"reputation": 426, "user_id": 8003239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vlweG3C9s54/AAAAAAAAAAI/AAAAAAAAABY/ragcFFi1okQ/photo.jpg?sz=128", "display_name": "drowsyleilei", "link": "https://stackoverflow.com/users/8003239/drowsyleilei"}, "reply_to_user": {"reputation": 157, "user_id": 6088463, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/A7JG5.jpg?s=128&g=1", "display_name": "JenkinsY", "link": "https://stackoverflow.com/users/6088463/jenkinsy"}, "edited": false, "score": 0, "creation_date": 1604563375, "post_id": 44099690, "comment_id": 114386021, "body": "@JenkinsY Thanks. The dimension of <code>nce_biases</code> has been revised."}], "tags": [], "owner": {"reputation": 426, "user_id": 8003239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vlweG3C9s54/AAAAAAAAAAI/AAAAAAAAABY/ragcFFi1okQ/photo.jpg?sz=128", "display_name": "drowsyleilei", "link": "https://stackoverflow.com/users/8003239/drowsyleilei"}, "is_accepted": true, "score": 18, "last_activity_date": 1604563292, "last_edit_date": 1604563292, "creation_date": 1495387149, "answer_id": 44099690, "question_id": 41475180, "link": "https://stackoverflow.com/questions/41475180/understanding-tf-nn-nce-loss-in-tensorflow/44099690#44099690", "title": "Understanding `tf.nn.nce_loss()` in tensorflow", "body": "<p>Let's look at the relative code in <strong>word2vec</strong> example (<a href=\"https://github.com/aymericdamien/TensorFlow-Examples/blob/master/examples/2_BasicModels/word2vec.py\" rel=\"nofollow noreferrer\">examples/tutorials/word2vec</a>).</p>\n<pre><code>embeddings = tf.Variable(\n    tf.random_uniform([vocabulary_size, embedding_size], -1.0, 1.0))\nembed = tf.nn.embedding_lookup(embeddings, train_inputs)\n</code></pre>\n<p>These two lines create embedding representations. <code>embeddings</code> is a matrix where each row represents a word vector. <code>embedding_lookup</code> is a quick way to get vectors corresponding to <code>train_inputs</code>. In word2vec example, <code>train_inputs</code> consists of some <code>int32</code> number, representing the <code>id</code> of target words. Basically, <strong>it can be placed by hidden layer feature</strong>.</p>\n<pre><code># Construct the variables for the NCE loss\nnce_weights = tf.Variable(\n    tf.truncated_normal([vocabulary_size, embedding_size],\n                        stddev=1.0 / math.sqrt(embedding_size)))\nnce_biases = tf.Variable(tf.zeros([vocabulary_size]))\n</code></pre>\n<p>These two lines create parameters. They will be updated by optimizer during training. We can use <code>tf.matmul(embed, tf.transpose(nce_weights)) + nce_biases</code> to get final output score. In other words, <strong>last inner-product layer in classification can be replaced by it</strong>.</p>\n<pre><code>loss = tf.reduce_mean(\n      tf.nn.nce_loss(weights=nce_weights,     # [vocab_size, embed_size]\n                   biases=nce_biases,         # [vocab_size]\n                   labels=train_labels,       # [bs, 1]\n                   inputs=embed,              # [bs, embed_size]\n                   num_sampled=num_sampled, \n                   num_classes=vocabulary_size))\n</code></pre>\n<p>These lines create <code>nce loss</code>, <strong>@garej</strong> has given a very good explanation. <code>num_sampled</code> refers to the number of negative sampling in <code>nce</code> algorithm.</p>\n<hr />\n<p>To illustrate the usage of <code>nce</code>, we can apply it in <strong>mnist</strong> example (<a href=\"https://github.com/yl-1993/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist_deep.py\" rel=\"nofollow noreferrer\">examples/tutorials/mnist/mnist_deep.py</a>) with following 2 steps:</p>\n<p><strong>1. Replace embed with hidden layer output</strong>. The dimension of hidden layer is <code>1024</code> and num_output is <code>10</code>. Minimum value of <code>num_sampled</code> is 1. Remember to remove the last inner-product layer in <code>deepnn()</code>.</p>\n<pre><code>y_conv, keep_prob = deepnn(x)                                            \n                                                                           \nnum_sampled = 1                                                          \nvocabulary_size = 10                                                     \nembedding_size = 1024                                                    \nwith tf.device('/cpu:0'):                                                \n  embed = y_conv                                                         \n  # Construct the variables for the NCE loss                             \n  nce_weights = tf.Variable(                                             \n      tf.truncated_normal([vocabulary_size, embedding_size],             \n                          stddev=1.0 / math.sqrt(embedding_size)))       \n  nce_biases = tf.Variable(tf.zeros([vocabulary_size])) \n</code></pre>\n<p><strong>2. Create loss and compute output</strong>. After computing the output, we can use it to calculate accuracy. Note that the label here is not one-hot vector as used in softmax. Labels are the original label of training samples.</p>\n<pre><code>loss = tf.reduce_mean(                                   \n    tf.nn.nce_loss(weights=nce_weights,                           \n                   biases=nce_biases,                             \n                   labels=y_idx,                                  \n                   inputs=embed,                                  \n                   num_sampled=num_sampled,                       \n                   num_classes=vocabulary_size))                  \n                                                                    \noutput = tf.matmul(y_conv, tf.transpose(nce_weights)) + nce_biases\ncorrect_prediction = tf.equal(tf.argmax(output, 1), tf.argmax(y_, 1))\n</code></pre>\n<p>When we set <code>num_sampled=1</code>, the val accuracy will end at around <code>98.8%</code>. And if we set <code>num_sampled=9</code>, we can get almost the same val accuracy as trained by softmax. But note that <code>nce</code> is different from <code>softmax</code>.</p>\n<p>Full code of training <code>mnist</code> by <code>nce</code> can be found <a href=\"https://github.com/yl-1993/tensorflow/blob/master/tensorflow/examples/tutorials/mnist/mnist_deep_nce.py\" rel=\"nofollow noreferrer\">here</a>. Hope it is helpful.</p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 5163915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439498188b934831a319819fc5f93b8d?s=128&d=identicon&r=PG&f=1", "display_name": "zhuzilin", "link": "https://stackoverflow.com/users/5163915/zhuzilin"}, "is_accepted": false, "score": 0, "last_activity_date": 1521105060, "creation_date": 1521105060, "answer_id": 49295301, "question_id": 41475180, "link": "https://stackoverflow.com/questions/41475180/understanding-tf-nn-nce-loss-in-tensorflow/49295301#49295301", "title": "Understanding `tf.nn.nce_loss()` in tensorflow", "body": "<p>From the paper <strong><em>Learning word embeddings efficiently with noise-contrastive estimation</em></strong>:</p>\n\n<blockquote>\n  <p>NCE is based on the reduction of density estimationto probabilistic binary classification. The basic idea is to train a logistic regression classifier to\n  discriminate between samples from the data distribution and samples from some \u201cnoise\u201d distribution</p>\n</blockquote>\n\n<p>We could find out that in word embedding, the NCE is actually negative sampling. (For the difference between this two, see paper: <strong><em>Notes on Noise Contrastive Estimation and Negative Sampling</em></strong>)</p>\n\n<p>Therefore, you do not need to input the noise distribution. And also from the quote, you will find out that it is actually a logistic regression: weight and bias would be the one need for logistic regression. If you are familiar with word2vec, it is just adding a bias. </p>\n"}], "owner": {"reputation": 5398, "user_id": 6733064, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbad917af60dd44536450743c01872c9?s=128&d=identicon&r=PG&f=1", "display_name": "GabrielChu", "link": "https://stackoverflow.com/users/6733064/gabrielchu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14538, "favorite_count": 15, "accepted_answer_id": 44099690, "answer_count": 5, "score": 24, "last_activity_date": 1604563292, "creation_date": 1483574059, "last_edit_date": 1523033907, "question_id": 41475180, "link": "https://stackoverflow.com/questions/41475180/understanding-tf-nn-nce-loss-in-tensorflow", "title": "Understanding `tf.nn.nce_loss()` in tensorflow", "body": "<p>I am trying to understand the NCE loss function in Tensorflow. NCE loss is employed for a word2vec task, for instance:</p>\n\n<pre><code># Look up embeddings for inputs.\nembeddings = tf.Variable(\n    tf.random_uniform([vocabulary_size, embedding_size], -1.0, 1.0))\nembed = tf.nn.embedding_lookup(embeddings, train_inputs)\n\n# Construct the variables for the NCE loss\nnce_weights = tf.Variable(\n    tf.truncated_normal([vocabulary_size, embedding_size],\n                        stddev=1.0 / math.sqrt(embedding_size)))\nnce_biases = tf.Variable(tf.zeros([vocabulary_size]))\n\n# Compute the average NCE loss for the batch.\n# tf.nce_loss automatically draws a new sample of the negative labels each\n# time we evaluate the loss.\nloss = tf.reduce_mean(\n    tf.nn.nce_loss(weights=nce_weights,\n                   biases=nce_biases,\n                   labels=train_labels,\n                   inputs=embed,\n                   num_sampled=num_sampled,\n                   num_classes=vocabulary_size))\n</code></pre>\n\n<p>more details, please reference Tensorflow <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py\" rel=\"noreferrer\">word2vec_basic.py</a></p>\n\n<ol>\n<li>What are the input and output matrices in the NCE function? </li>\n</ol>\n\n<p>In a word2vec model, we are interested in building representations for words. In the training process, given a slid window, every word will have two embeddings: 1) when the word is a centre word; 2) when the word is a context word. These two embeddings are called input and output vectors, respectively. (<a href=\"http://www-personal.umich.edu/~ronxin/pdf/w2vexp.pdf\" rel=\"noreferrer\">more explanations of input and output matrices</a>)</p>\n\n<p>In my opinion, the input matrix is <code>embeddings</code> and the output matrix is <code>nce_weights</code>. Is it right?</p>\n\n<ol start=\"2\">\n<li>What is the final embedding?</li>\n</ol>\n\n<p>According to a <a href=\"https://stackoverflow.com/questions/37982478/what-is-the-purpose-of-weights-and-biases-in-tensorflow-word2vec-example\">post</a> by s0urcer also relating to <code>nce</code>, it says the final embedding matrix is just the input matrix. While, <a href=\"https://stats.stackexchange.com/questions/177667/input-vector-representation-vs-output-vector-representation-in-word2vec\">some others saying</a>, the <code>final_embedding=input_matrix+output_matrix</code>. Which is right/more common?</p>\n"}, {"tags": ["python", "evaluation"], "comments": [{"owner": {"reputation": 8310, "user_id": 1851986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/17l5p.jpg?s=128&g=1", "display_name": "Vasili Syrakis", "link": "https://stackoverflow.com/users/1851986/vasili-syrakis"}, "edited": false, "score": 0, "creation_date": 1483574007, "post_id": 41475140, "comment_id": 70156393, "body": "This runs fine in Python 3.5. What&#39;s the problem?"}, {"owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "edited": false, "score": 0, "creation_date": 1483574182, "post_id": 41475140, "comment_id": 70156439, "body": "See also <a href=\"http://stackoverflow.com/questions/8725673/multiple-assignment-and-evaluation-order-in-python\" title=\"multiple assignment and evaluation order in python\">stackoverflow.com/questions/8725673/&hellip;</a>"}, {"owner": {"reputation": 40406, "user_id": 336527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a57f523157ebdf6e5a9662d2e8754b9?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/336527/max"}, "reply_to_user": {"reputation": 8310, "user_id": 1851986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/17l5p.jpg?s=128&g=1", "display_name": "Vasili Syrakis", "link": "https://stackoverflow.com/users/1851986/vasili-syrakis"}, "edited": false, "score": 0, "creation_date": 1483574757, "post_id": 41475140, "comment_id": 70156578, "body": "@VasiliSyrakis  Sorry, rewrote for clarity."}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1483574456, "last_edit_date": 1483574456, "creation_date": 1483574083, "answer_id": 41475187, "question_id": 41475140, "link": "https://stackoverflow.com/questions/41475140/swapping-items-in-container-evaluation-order/41475187#41475187", "title": "Swapping items in container - evaluation order", "body": "<p>The rhs is evaluated before the lhs. That's not the problem.</p>\n\n<p>The problem is how the lhs is evaluated. You can prove this to yourself by running this statement:</p>\n\n<pre><code>lst[0], lst[lookup[lst[0]]] = 1, 0\n</code></pre>\n\n<p>Note that the assigning to <code>lst[0]</code> occurs <em>before</em> the evaluation of <code>lst[lookup[lst[0]]]</code>. So the <code>lst[0]</code> in that complex expression is the <em>new</em> value, not the old value.</p>\n\n<p>Breaking it down:</p>\n\n<pre><code>lst[0], lst[lookup[lst[0]]] = 1, 0\n=&gt; lst[0] = 1; lst[lookup[lst[0]]] = 0\n=&gt; lst[0] = 1; lst[lookup[1]] = 0\n=&gt; lst[0] = 1; lst[0] = 0\n</code></pre>\n\n<p>So the final result appears unchanged.</p>\n"}, {"tags": [], "owner": {"reputation": 1146, "user_id": 1382970, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01c4253b4695140e6fd8b2ad8d91fdb3?s=128&d=identicon&r=PG", "display_name": "bits", "link": "https://stackoverflow.com/users/1382970/bits"}, "is_accepted": false, "score": 0, "last_activity_date": 1483574654, "creation_date": 1483574654, "answer_id": 41475272, "question_id": 41475140, "link": "https://stackoverflow.com/questions/41475140/swapping-items-in-container-evaluation-order/41475272#41475272", "title": "Swapping items in container - evaluation order", "body": "<p>Because:</p>\n\n<pre><code>lst[0], lst[lookup[lst[0]]] = lst[lookup[lst[0]]], lst[0]\n</code></pre>\n\n<p>is equivalent to: </p>\n\n<pre><code>lst[0]= lst[lookup[lst[0]]]\nlst[lookup[lst[0]]] = lst[0]\n</code></pre>\n"}], "owner": {"reputation": 40406, "user_id": 336527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4a57f523157ebdf6e5a9662d2e8754b9?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/336527/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 41475187, "answer_count": 2, "score": -1, "last_activity_date": 1483574810, "creation_date": 1483573746, "last_edit_date": 1483574810, "question_id": 41475140, "link": "https://stackoverflow.com/questions/41475140/swapping-items-in-container-evaluation-order", "title": "Swapping items in container - evaluation order", "body": "<p>Edited for clarity:</p>\n\n<p>Why do the list items not swap?</p>\n\n<pre><code># python 3.5\nlst = [0, 1]\nlookup = {0: 1, 1: 0}\n\nlst[0], lst[lookup[lst[0]]] = lst[lookup[lst[0]]], lst[0]\n# lst is still unchanged; why aren't items 0 and 1 not swapped\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 13154, "user_id": 2999675, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b7c8c3b13457a7cb7749d1334d3ae?s=128&d=identicon&r=PG&f=1", "display_name": "Hello lad", "link": "https://stackoverflow.com/users/2999675/hello-lad"}, "edited": false, "score": 0, "creation_date": 1483603855, "post_id": 41476085, "comment_id": 70165321, "body": "thanks a lot for the comment. I got this error TypeError: Only valid with DatetimeIndex, TimedeltaIndex or PeriodIndex, but got an instance of &#39;RangeIndex&#39;"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 13154, "user_id": 2999675, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b7c8c3b13457a7cb7749d1334d3ae?s=128&d=identicon&r=PG&f=1", "display_name": "Hello lad", "link": "https://stackoverflow.com/users/2999675/hello-lad"}, "edited": false, "score": 0, "creation_date": 1483616909, "post_id": 41476085, "comment_id": 70173367, "body": "When you use <code>resample</code> you must have one of those three types of indices that error message told you. If you ran the first two lines of code above then you must have a DateTimeIndex."}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": false, "score": 2, "last_activity_date": 1483580732, "creation_date": 1483580732, "answer_id": 41476085, "question_id": 41475112, "link": "https://stackoverflow.com/questions/41475112/how-to-interpolate-grouped-time-series-in-a-pandas-dataframe/41476085#41476085", "title": "How to interpolate grouped time series in a Pandas dataframe", "body": "<p>You first must change your date to a datetime and put that column in the index to take advantage of resampling and then you can convert the date back to its original format</p>\n\n<pre><code># change to datetime\ndf['date'] =pd.to_datetime(df.date, format=\"%b-%d\")\ndf = df.set_index('date')\n\n# resample to fill in missing dates\ndf1 = df.groupby('type').resample('d')['sum'].asfreq().fillna(0)\ndf1 = df1.reset_index()\n\n# change back to original date format\ndf1['date'] = df1.date.dt.strftime('%b-%d')\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>  type    date  sum\n0    A  Jan-01  1.0\n1    A  Jan-02  0.0\n2    A  Jan-03  2.0\n3    B  Feb-01  1.0\n4    B  Feb-02  3.0\n5    B  Feb-03  0.0\n6    B  Feb-04  0.0\n7    B  Feb-05  6.0\n</code></pre>\n"}], "owner": {"reputation": 13154, "user_id": 2999675, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b7c8c3b13457a7cb7749d1334d3ae?s=128&d=identicon&r=PG&f=1", "display_name": "Hello lad", "link": "https://stackoverflow.com/users/2999675/hello-lad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1521673456, "creation_date": 1483573590, "last_edit_date": 1521673456, "question_id": 41475112, "link": "https://stackoverflow.com/questions/41475112/how-to-interpolate-grouped-time-series-in-a-pandas-dataframe", "title": "How to interpolate grouped time series in a Pandas dataframe", "body": "<p>I have data in type <code>pd.DataFrame</code> which looks like the following:</p>\n\n<pre><code>type  date  sum\nA     Jan-1 1\nA     Jan-3 2\nB     Feb-1 1\nB     Feb-2 3\nB     Feb-5 6\n</code></pre>\n\n<p>The task is to build a continuous time series for each type (the missing date should be filled with 0).</p>\n\n<p>The expected result is:</p>\n\n<pre><code>type  date  sum\nA     Jan-1 1\nA     Jan-2 0\nA     Jan-3 2\nB     Feb-1 1\nB     Feb-2 3\nB     Feb-3 0\nB     Feb-4 0\nB     Feb-5 6\n</code></pre>\n\n<p>Is it possible to do that with <code>pandas</code> or other Python tools?</p>\n\n<p>The real dataset has millions of rows.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1483573198, "post_id": 41475040, "comment_id": 70156142, "body": "<code>bufferCopy = uploadBuffer</code> is not a copy."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 2, "creation_date": 1483573330, "post_id": 41475040, "comment_id": 70156186, "body": "change it to: <code>bufferCopy = uploadBuffer[:]</code>"}, {"owner": {"reputation": 133, "user_id": 3944015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b7b55db3e9ddc4432d8d92a5c319b0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHunt", "link": "https://stackoverflow.com/users/3944015/henryhunt"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1483573648, "post_id": 41475040, "comment_id": 70156283, "body": "@alfasin thanks, thought it might be something small like that! I&#39;ll try it tomorrow when I have time"}, {"owner": {"reputation": 133, "user_id": 3944015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b7b55db3e9ddc4432d8d92a5c319b0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHunt", "link": "https://stackoverflow.com/users/3944015/henryhunt"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1483641922, "post_id": 41475040, "comment_id": 70190646, "body": "@alfasin it works great, thank you. What was that line doing before then?"}, {"owner": {"reputation": 14401, "user_id": 1730261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/m57hO.jpg?s=128&g=1", "display_name": "Rushy Panchal", "link": "https://stackoverflow.com/users/1730261/rushy-panchal"}, "edited": false, "score": 2, "creation_date": 1483648085, "post_id": 41475040, "comment_id": 70194176, "body": "@HenryHunt it was simply copying the reference to the list, not the list itself."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1483649012, "post_id": 41475040, "comment_id": 70194688, "body": "@HenryHunt read <a href=\"https://docs.python.org/2/tutorial/introduction.html\" rel=\"nofollow noreferrer\">this</a> search for the word &quot;slice&quot;"}], "owner": {"reputation": 133, "user_id": 3944015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8b7b55db3e9ddc4432d8d92a5c319b0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHunt", "link": "https://stackoverflow.com/users/3944015/henryhunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483648023, "creation_date": 1483573068, "last_edit_date": 1483648023, "question_id": 41475040, "link": "https://stackoverflow.com/questions/41475040/iteration-over-an-array-is-behaving-as-if-the-array-is-being-modified-during-ite", "title": "Iteration over an array is behaving as if the array is being modified during iteration, when this is not happening", "body": "<p>I\u2019m writing some software for a weather station in python. Every minute, on the minute, new values are taken from sensors (the values are actually taken from a file that updates each minute) and added to an array. The items in this array are to be uploaded to an online database. The array acts as a buffer to stop the current latest data being overwritten by a newer version if, for example the internet connection goes down. When the connection comes back up, the items in the array can all be uploaded and nothing will have been lost. The population of the array happens in a separate thread.</p>\n\n<p>Back on the main thread, 1 second after the minute a copy of the array is made. This copy is then iterated over and each item is uploaded to the database. Following the upload of an item, it is removed from the ORIGINAL array but not the copy, to prevent errors caused by manipulating an while iterating over it. If an error occurs with uploading any of the items then the entire iteration stops and is left to be resumed on the next minute, in order to preserve the chronology of data in the database. This is thread safe because I\u2019m deleting from the original array, but I am iterating over a copy of it, and I see no problems with the threading side of things anywhere in the code.</p>\n\n<p>However, I am having a very hard to remove problem that looks like something you would find when modifying a list while iterating over it, even though this is not happening anywhere. When supplied with one piece of data every minute (this is normal operation), everything uploads fine. Additionally, it also works fine if there are two items in the array (done by removing the internet connection for one minute). Both items upload in the right order. However, if there are more than two items to upload in the list (internet is down for more than a minute) then the iteration seems to skip every other item in the list. This results in every other item being uploaded, then every other item of the remaining items in the array being uploaded and so on until the array returns to a normal one per minute. This leads to the uploads in the database being out of order.</p>\n\n<p>I have narrowed the error down to the line that deletes the item from the uploadBuffer array, as without this line it works fine (except obviously the items aren\u2019t removed from the buffer once uploaded). I don\u2019t see how this problem can be exist because I\u2019m iterating over a copy of the original list. Removal of the item from the original list happens using its value and not its index, so that can\u2019t be the problem. Also, the copy of the original array is made once, before the iteration begins, so I don\u2019t see how removing items from the original can affect the iteration over the copy.</p>\n\n<p>I really would like to get this fixed as I\u2019ve been trying for over two weeks with no luck, so thanks for any help, and my code is below. Also, please mention if you notice any problems with how I am using the threading locks as I\u2019m not completely sure if I\u2019m using them correctly.</p>\n\n<pre><code>import urllib2\nfrom lxml import etree\nimport os\nimport datetime\nimport time\nimport httplib\nimport socket\nimport threading\n\ntimeFormat = \"%d/%m/%Y at %H:%M:%S.%f\"\nrollingData = \"/home/pi/weatherstation/other/latest.xml\"\nbufferLock = threading.Lock()\n\nprint(\"MOD_UPLOAD: file watching started on \" +\n      datetime.datetime.now().strftime(timeFormat))\nuploadBuffer = []\n\ndef watchForReport():\n    previousModified = os.stat(rollingData)[8]\n\n    while True:\n        try:\n            currentModified = os.stat(rollingData)[8]\n\n            # New data needs to be uploaded\n            if not currentModified == previousModified:\n                newData = open(rollingData, \"r\").read()\n\n                bufferLock.acquire()\n                uploadBuffer.append(newData)\n                bufferLock.release()\n\n                previousModified = currentModified\n\n        except:\n            print(\"OSError\")\n\n# Watch for new data in separate thread\nthreading.Thread(target = watchForReport).start()\n\n\nwhile True:\n    currentSecond = datetime.datetime.now().strftime(\"%S\")\n\n    if currentSecond == \"01\" or currentSecond == \"02\":\n        if bufferLock.locked() == False:\n\n            bufferLock.acquire()\n            bufferCopy = uploadBuffer\n            bufferLock.release()\n\n            # If there are records to be uploaded\n            if len(bufferCopy) &gt; 0:\n\n                for item in bufferCopy:\n                    print(\"\\nreport: \" + item[:35])\n                    print(\"bufferCount: \" + str(len(bufferCopy)))\n\n                    if item == \"\":\n                        # This isn't the problem, as the text 'empty' is almost never printed\n                        print(\"empty\")\n                        bufferCopy.remove(item)\n                        break\n                    else:\n                        report = etree.fromstring(item)\n\n                    # Separate date and time and format\n                    timestamp = report.xpath(\"@time\")[0]\n\n                    tDate = timestamp.rsplit(\"T\", 2)[0]\n                    tTime = timestamp.rsplit(\"T\", 2)[1]\n                    tTime = tTime.replace(\":\", \"-\")\n\n                    # Generate URL to write data to the database\n                    url = \"http://www.example.com/uploadfile.php?date=\"\n                    url += tDate + \"&amp;time=\" + tTime + \"&amp;shieldedtemp=\"\n                    url += report.xpath(\"@shieldedtemp\")[0] + \"&amp;exposedtemp=\"\n                    url += report.xpath(\"@exposedtemp\")[0] + \"&amp;soil10temp=\"\n                    url += report.xpath(\"@soil10temp\")[0] + \"&amp;soil30temp=\"\n                    url += report.xpath(\"@soil30temp\")[0] + \"&amp;soil100temp=\"\n                    url += report.xpath(\"@soil100temp\")[0]\n\n                    try:\n                        # Upload report to database\n                        response = urllib2.urlopen(url, timeout = 9).read()\n                        print(\"response: \" + response)\n\n                        # Response[4] means success\n                        if response == \"response[4]\":\n                            bufferLock.acquire()\n                            # Thus is the line causing the problem:\n                            uploadBuffer.remove(item)\n                            bufferLock.release()\n\n                        else:\n                            # Break out of loop on failure to preserve chronology\n                            break\n\n                    except urllib2.HTTPError:\n                        print(\"urllib2.HTTPError\")\n                        print(\"bufferReCount: \" + str(len(bufferCopy)))\n                        break\n\n                    except httplib.BadStatusLine:\n                        print(\"httplib.BadStatusLine\")\n                        print(\"bufferReCount: \" + str(len(bufferCopy)))\n                        break\n\n                    except urllib2.URLError:\n                        print(\"urllib2.URLError\")\n                        print(\"bufferReCount: \" + str(len(bufferCopy)))\n                        break\n\n                    except socket.timeout:\n                        print(\"timeout\")\n                        print(\"bufferReCount: \" + str(len(bufferCopy)))\n                        break\n\n                    print(\"bufferReCount: \" + str(len(bufferCopy)))\n</code></pre>\n"}, {"tags": ["python", "flask", "materialize", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 1406, "user_id": 1253492, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a200a57e247ff87a982cd001b0463ea9?s=128&d=identicon&r=PG", "display_name": "tiagosilva", "link": "https://stackoverflow.com/users/1253492/tiagosilva"}, "edited": false, "score": 0, "creation_date": 1484161750, "post_id": 41587056, "comment_id": 70400326, "body": "Doesn&#39;t really solve my issue: the default widget {{ subfield }} won&#39;t work for materialize so i&#39;ll have to make it manually, and doing it manually i HAVE to set the name attribute because that&#39;s how materialize works to group a bunch of radios, even if i used a RadioField, it would still bring me to the same problem"}, {"owner": {"reputation": 2308, "user_id": 3632543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0d7570cb4eba046ecc690acc54637f0b?s=128&d=identicon&r=PG&f=1", "display_name": "AArias", "link": "https://stackoverflow.com/users/3632543/aarias"}, "reply_to_user": {"reputation": 1406, "user_id": 1253492, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a200a57e247ff87a982cd001b0463ea9?s=128&d=identicon&r=PG", "display_name": "tiagosilva", "link": "https://stackoverflow.com/users/1253492/tiagosilva"}, "edited": false, "score": 0, "creation_date": 1484211828, "post_id": 41587056, "comment_id": 70419456, "body": "It works as expected. Here&#39;s a plunker of the rendered template: <a href=\"https://plnkr.co/edit/qutaW8tXld84H5PbaLE5?p=preview\" rel=\"nofollow noreferrer\">plnkr.co/edit/qutaW8tXld84H5PbaLE5?p=preview</a> Please follow the steps exactly as described and don&#39;t forget to include the materialize files in your template"}, {"owner": {"reputation": 2308, "user_id": 3632543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0d7570cb4eba046ecc690acc54637f0b?s=128&d=identicon&r=PG&f=1", "display_name": "AArias", "link": "https://stackoverflow.com/users/3632543/aarias"}, "reply_to_user": {"reputation": 1406, "user_id": 1253492, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a200a57e247ff87a982cd001b0463ea9?s=128&d=identicon&r=PG", "display_name": "tiagosilva", "link": "https://stackoverflow.com/users/1253492/tiagosilva"}, "edited": false, "score": 0, "creation_date": 1484212033, "post_id": 41587056, "comment_id": 70419595, "body": "Just edited the answer with the generated code and plunker. If you get different generated code from mine after following the steps please update your question with that so I can check it."}], "tags": [], "owner": {"reputation": 2308, "user_id": 3632543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0d7570cb4eba046ecc690acc54637f0b?s=128&d=identicon&r=PG&f=1", "display_name": "AArias", "link": "https://stackoverflow.com/users/3632543/aarias"}, "is_accepted": false, "score": 2, "last_activity_date": 1485509429, "last_edit_date": 1485509429, "creation_date": 1484126929, "answer_id": 41587056, "question_id": 41475015, "link": "https://stackoverflow.com/questions/41475015/how-to-have-radio-buttons-with-materialize-and-wtforms/41587056#41587056", "title": "How to have radio buttons with Materialize and WTForms?", "body": "<p>You can't set the <code>name</code> attribute in your field, wtforms already does that for you.</p>\n\n<p>Use the <a href=\"http://wtforms.readthedocs.io/en/latest/fields.html#wtforms.fields.RadioField\" rel=\"nofollow noreferrer\">RadioField</a> instead of HiddenField:</p>\n\n<pre><code>from wtforms import RadioField\nfrom flask_wtf import Form\n\nclass YourForm(Form):\n    radio_group = RadioField('label', choices=[('value','description'),('value_two','some other description')])\n    (...)\n</code></pre>\n\n<p>Then, in your endpoint:</p>\n\n<pre><code>@route('/your/route')\ndef your_endpoint():\n    your_form = YourForm()\n    (...)\n    return render_template('/your/template.html', form=your_form)\n</code></pre>\n\n<p>Finally, in your template:</p>\n\n<pre><code>&lt;form action=\"#\"&gt;\n    {% for subfield in form.radio_group %}\n    &lt;p&gt;\n        {{ subfield }}\n        {{ subfield.label }}\n    &lt;/p&gt;\n    {% endfor %}\n&lt;/form&gt;\n</code></pre>\n\n<p>This generates the following code:</p>\n\n<pre><code>  &lt;form action=\"#\"&gt;\n    &lt;p&gt;\n      &lt;input id=\"radio_group-0\" name=\"radio_group\" type=\"radio\" value=\"value\"&gt;\n      &lt;label for=\"radio_group-0\"&gt;description&lt;/label&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n      &lt;input id=\"radio_group-1\" name=\"radio_group\" type=\"radio\" value=\"value_two\"&gt;\n      &lt;label for=\"radio_group-1\"&gt;some other description&lt;/label&gt;\n    &lt;/p&gt;\n  &lt;/form&gt;\n</code></pre>\n\n<p>Which, given materialize is included in the template, will render the radio buttons properly as shown in <a href=\"https://plnkr.co/edit/qutaW8tXld84H5PbaLE5?p=preview\" rel=\"nofollow noreferrer\">this plunker</a>.</p>\n"}], "owner": {"reputation": 1406, "user_id": 1253492, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a200a57e247ff87a982cd001b0463ea9?s=128&d=identicon&r=PG", "display_name": "tiagosilva", "link": "https://stackoverflow.com/users/1253492/tiagosilva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1940, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485509429, "creation_date": 1483572909, "last_edit_date": 1484258495, "question_id": 41475015, "link": "https://stackoverflow.com/questions/41475015/how-to-have-radio-buttons-with-materialize-and-wtforms", "title": "How to have radio buttons with Materialize and WTForms?", "body": "<p>In Materialize you define the radio group of a radio button using the attribute <code>name</code>, but Flask-WTForms binds the input with an attribute <code>name</code>.</p>\n\n<p>If I have the following in my template:</p>\n\n<pre><code>{{ form.radio1(type='radio', name='group1') }}\n{{ form.radio2(type='radio', name='group1') }}\n</code></pre>\n\n<p>There will be an error:</p>\n\n<pre><code>TypeError: html_params() got multiple values for keyword argument 'name'\n</code></pre>\n\n<p>And if we don't add the name, the radios won't work as radios, just as checkboxes, as expected.</p>\n\n<p>How can i get around this?</p>\n\n<p>This is my form class:</p>\n\n<pre><code>class AbcForm(FlaskForm):\n    field1 = HiddenField('Field1')\n    field2 = HiddenField('Field2')\n</code></pre>\n\n<p>and then at runtime I'll dynamically add the radios, here's a simplification:</p>\n\n<pre><code>class F(AbcForm):\n    pass\n\n    setattr(F, radio1, BooleanField('Radio1')\n    setattr(F, radio2, BooleanField('Radio2')\n\nform = F(field1=x, field2=y)\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1483572591, "post_id": 41474963, "comment_id": 70155948, "body": "you want float <i>slicing</i> it seems."}], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 2, "last_activity_date": 1483572680, "creation_date": 1483572680, "answer_id": 41474989, "question_id": 41474963, "link": "https://stackoverflow.com/questions/41474963/float-indexer-to-numpy-array/41474989#41474989", "title": "Float indexer to numpy array", "body": "<p>You might need logical indexing:</p>\n\n<pre><code>i[i['foo'] &lt; 5.5]\n\n# array([(5.0, 1)], \n#       dtype=[('foo', '&lt;f4'), ('bar', '&lt;i4')])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1483584053, "last_edit_date": 1483584053, "creation_date": 1483582015, "answer_id": 41476275, "question_id": 41474963, "link": "https://stackoverflow.com/questions/41474963/float-indexer-to-numpy-array/41476275#41476275", "title": "Float indexer to numpy array", "body": "<p><code>i[:5.5]</code> does not have an obvious meaning. </p>\n\n<p><code>i[:5]</code> means the first 5 elements of the array (or list). <code>i[:6]</code> the first 6.  What is it supposed to do with the <code>5.5</code>?  <code>floor(5.5)</code>?  Ceiling?  Return 5 and half elements?  5 elements plus a linear interpolation between the 5th and 6th?</p>\n\n<p>Actually <code>:5.5</code> works (in 1.11) but with a warning:</p>\n\n<pre><code>In [346]: np.arange(10)[:5]\nOut[346]: array([0, 1, 2, 3, 4])\nIn [347]: np.arange(10)[:5.5]\n/usr/local/bin/ipython3:1: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future\n  #!/usr/bin/python3\nOut[347]: array([0, 1, 2, 3, 4])\n</code></pre>\n\n<p>With your structured array, record indexing works the same way:</p>\n\n<pre><code>In [349]: i = np.array([(5.,1), (6.,2)], dtype=[('foo', 'f4'),('bar', 'i4')])\nIn [350]: i[:5]\n</code></pre>\n\n<p>It's ok to slice beyond the end - it just returns everything.</p>\n\n<pre><code>Out[350]: \narray([(5.0, 1), (6.0, 2)], \n      dtype=[('foo', '&lt;f4'), ('bar', '&lt;i4')])\nIn [351]: i[:5.5]\n/usr/local/bin/ipython3:1: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future\n  #!/usr/bin/python3\nOut[351]: \narray([(5.0, 1), (6.0, 2)], \n      dtype=[('foo', '&lt;f4'), ('bar', '&lt;i4')])\n</code></pre>\n\n<p>================</p>\n\n<p>Indexing in <code>numpy</code> is just a way of counting.  There isn't an indexing or labeling list or array.  That's something that <code>pandas</code> has added, but it isn't part of <code>numpy</code>.  In your <code>i</code> array, fields do have names, e.g. <code>i['foo']</code>.  It can look like column labeling, but it's dangerous to confuse structured fields with 2d columns.</p>\n"}], "owner": {"reputation": 2858, "user_id": 4506929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20ee736213f0fcf408fd50895e9b6a01?s=128&d=identicon&r=PG&f=1", "display_name": "TomCho", "link": "https://stackoverflow.com/users/4506929/tomcho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 41474989, "answer_count": 2, "score": 0, "last_activity_date": 1483584053, "creation_date": 1483572505, "question_id": 41474963, "link": "https://stackoverflow.com/questions/41474963/float-indexer-to-numpy-array", "title": "Float indexer to numpy array", "body": "<p>I want to make a numpy array that takes a float as a indexes (like, for example, a Pandas Series would if it had a float-type index). So let me explain. I want something like:</p>\n\n<pre><code>i = np.array([(5.,1), (6.,2)], dtype=[('foo', 'f4'),('bar', 'i4')])\n</code></pre>\n\n<p>if the first type (the 'foo' type), could be used as a indexer. So I could do</p>\n\n<pre><code>print(i[:5.5])\n</code></pre>\n\n<p>and it would print <code>1</code>, or <code>(5., 1)</code>.</p>\n\n<p>I'm pretty sure that's possible with Numpy, I just don't know how to.</p>\n"}, {"tags": ["python", "python-2.7", "pip"], "comments": [{"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1483572942, "post_id": 41474921, "comment_id": 70156060, "body": "It looks like it should be available <a href=\"https://github.com/alexandrebarachant/pyRiemann/commit/f92766642a595950efa474deb3d55a8895ac047f#diff-202a83d02f1b113a6b35d57f5013e974\" rel=\"nofollow noreferrer\">from 0.2.4</a> so the question is: are you sure you&#39;re using the right version? do you know that it&#39;s installed properly ? are you using virtualenv ? which OS are you using ? and etc..."}, {"owner": {"reputation": 9345, "user_id": 4237316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/100004533998341/picture?type=large", "display_name": "Harald Nordgren", "link": "https://stackoverflow.com/users/4237316/harald-nordgren"}, "edited": false, "score": 0, "creation_date": 1483573150, "post_id": 41474921, "comment_id": 70156125, "body": "Looking at the latest commit on Github seems to indicate otherwise, it should be added in 0.2.5: <a href=\"https://github.com/alexandrebarachant/pyRiemann/blob/159b7548e1cc9b784b15214bc42fd358a1e84108/pyriemann/estimation.py#L498\" rel=\"nofollow noreferrer\">github.com/alexandrebarachant/pyRiemann/blob/&hellip;</a> And the code is clearly not in module downloaded by pip when installing pyriemann==0.2.4 (see lib/python2.7/site-packages/pyriemann/estimation.py ) Maybe there was some miscommunication within the pyRiemann team regarding these release notes?"}, {"owner": {"reputation": 9345, "user_id": 4237316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/100004533998341/picture?type=large", "display_name": "Harald Nordgren", "link": "https://stackoverflow.com/users/4237316/harald-nordgren"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1483574398, "post_id": 41474921, "comment_id": 70156491, "body": "The commit @alfasin linked was after the 0.2.4 release. August 2016 compared to June."}, {"owner": {"reputation": 89, "user_id": 3252542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d651804e341ec6fd65d87eaa40fb4bff?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/3252542/farzad"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1483600960, "post_id": 41474921, "comment_id": 70163960, "body": "@alfasin: Ubuntu 14.04.5 LTS, the version of pyRiemann is 0.2.4. However, I&#39;m not sure if it is installed properly. I didn&#39;t get any error while installing, but the fact that it&#39;s getting me error tells that sth is wrong!"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 3252542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d651804e341ec6fd65d87eaa40fb4bff?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/3252542/farzad"}, "edited": false, "score": 0, "creation_date": 1483600465, "post_id": 41475118, "comment_id": 70163732, "body": "But the Github code is 0.2.4 too! I didn&#39;t find version 0.2.5 on the repo. I installed from github, as you suggested, but the version is still 0.2.4.  I could see the class &#39;Shrinkage&#39; in the source files of pyRiemann, but for some reasons, it didn&#39;t work when calling it."}, {"owner": {"reputation": 9345, "user_id": 4237316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/100004533998341/picture?type=large", "display_name": "Harald Nordgren", "link": "https://stackoverflow.com/users/4237316/harald-nordgren"}, "reply_to_user": {"reputation": 89, "user_id": 3252542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d651804e341ec6fd65d87eaa40fb4bff?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/3252542/farzad"}, "edited": false, "score": 0, "creation_date": 1483625709, "post_id": 41475118, "comment_id": 70179647, "body": "The Github code is a development branch. So it&#39;s technically not a version at all. It is version 0.2.5-devel -- or whatever number they chose to for the next release. It is still 0.2.4 in pip&#39;s eyes, which is why <code>pip uninstall pyriemann</code> is needed beforehand."}, {"owner": {"reputation": 9345, "user_id": 4237316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/100004533998341/picture?type=large", "display_name": "Harald Nordgren", "link": "https://stackoverflow.com/users/4237316/harald-nordgren"}, "reply_to_user": {"reputation": 89, "user_id": 3252542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d651804e341ec6fd65d87eaa40fb4bff?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/3252542/farzad"}, "edited": false, "score": 0, "creation_date": 1483625766, "post_id": 41475118, "comment_id": 70179700, "body": "You did call <code>pip install git+https:&#47;&#47;github.com&#47;alexandrebarachant&#47;pyRiemann</code> but weren&#39;t able to import <code>Shrinkage</code>? Or the import worked but then there are problems with using the class?"}, {"owner": {"reputation": 89, "user_id": 3252542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d651804e341ec6fd65d87eaa40fb4bff?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/3252542/farzad"}, "edited": false, "score": 0, "creation_date": 1483729846, "post_id": 41475118, "comment_id": 70231248, "body": "First, it didn&#39;t work for some reasons. I tried the same thing again, and this time it worked! thanks."}, {"owner": {"reputation": 9345, "user_id": 4237316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/100004533998341/picture?type=large", "display_name": "Harald Nordgren", "link": "https://stackoverflow.com/users/4237316/harald-nordgren"}, "reply_to_user": {"reputation": 89, "user_id": 3252542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d651804e341ec6fd65d87eaa40fb4bff?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/3252542/farzad"}, "edited": false, "score": 0, "creation_date": 1486307734, "post_id": 41475118, "comment_id": 71279407, "body": "Pleas upvote as well if you are happy with the answer :)"}], "tags": [], "owner": {"reputation": 9345, "user_id": 4237316, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/100004533998341/picture?type=large", "display_name": "Harald Nordgren", "link": "https://stackoverflow.com/users/4237316/harald-nordgren"}, "is_accepted": true, "score": 1, "last_activity_date": 1483575411, "last_edit_date": 1483575411, "creation_date": 1483573617, "answer_id": 41475118, "question_id": 41474921, "link": "https://stackoverflow.com/questions/41474921/cannot-import-name-shrinkage/41475118#41475118", "title": "cannot import name Shrinkage", "body": "<p>It seems that <code>Shrinkage</code> is not in pyRiemann 0.2.4.</p>\n\n<p>The code is on Github, so the development version could be installed with:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>pip uninstall -y pyriemann\npip install git+https://github.com/alexandrebarachant/pyRiemann\n</code></pre>\n\n<p>If you work with other people and put the git link in a <code>requirements.txt</code> file, consider locking yourself to a specific commit, e.g. the current latest one. And then remember to change it to <code>pyriemann==0.2.5</code> once that is released.</p>\n"}], "owner": {"reputation": 89, "user_id": 3252542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d651804e341ec6fd65d87eaa40fb4bff?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad", "link": "https://stackoverflow.com/users/3252542/farzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41475118, "answer_count": 1, "score": 1, "last_activity_date": 1483629574, "creation_date": 1483572230, "last_edit_date": 1483629574, "question_id": 41474921, "link": "https://stackoverflow.com/questions/41474921/cannot-import-name-shrinkage", "title": "cannot import name Shrinkage", "body": "<p>I'm running a python script which uses Shrinkage class from pyRiemann package.\nEven though that I've installed this package, I got this error:</p>\n\n<pre><code>from pyriemann.estimation import Shrinkage\nImportError: cannot import name Shrinkage\n</code></pre>\n\n<p>I'm using:<br>\npyriemann==0.2.4\nPython 2.7.13 :: Anaconda custom (64-bit)</p>\n\n<p>any idea what this problem is?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1, "user_id": 1113186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bba8ded62fc5102b8d5a88862e0dc70?s=128&d=identicon&r=PG", "display_name": "user1113186", "link": "https://stackoverflow.com/users/1113186/user1113186"}, "reply_to_user": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1483633470, "post_id": 41474862, "comment_id": 70185289, "body": "@vaultah - This is a not operator question. I meant to understand short circuit version here."}, {"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1483633886, "post_id": 41474862, "comment_id": 70185560, "body": "Answers on that page explain the behaviour of the <code>and</code> operator perfectly, you just need to apply them to your code."}, {"owner": {"reputation": 1, "user_id": 1113186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bba8ded62fc5102b8d5a88862e0dc70?s=128&d=identicon&r=PG", "display_name": "user1113186", "link": "https://stackoverflow.com/users/1113186/user1113186"}, "reply_to_user": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1483636152, "post_id": 41474862, "comment_id": 70187136, "body": "that&#39;s correct but I dont understand how n and int(n)..is working here. How this expression is being evaluated?"}, {"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1483636321, "post_id": 41474862, "comment_id": 70187254, "body": "According to <a href=\"http://stackoverflow.com/a/19187401/2301450\">this</a> answer, <code>x and y</code> means <i>&quot;if x is false, then x, else y&quot;</i>. Substitute <i>x</i> for <code>n</code> and <i>y</i> for <code>int(n)</code>."}, {"owner": {"reputation": 1, "user_id": 1113186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bba8ded62fc5102b8d5a88862e0dc70?s=128&d=identicon&r=PG", "display_name": "user1113186", "link": "https://stackoverflow.com/users/1113186/user1113186"}, "reply_to_user": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1483641754, "post_id": 41474862, "comment_id": 70190547, "body": "Thanks I got it now."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1113186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bba8ded62fc5102b8d5a88862e0dc70?s=128&d=identicon&r=PG", "display_name": "user1113186", "link": "https://stackoverflow.com/users/1113186/user1113186"}, "edited": false, "score": 0, "creation_date": 1483636334, "post_id": 41474905, "comment_id": 70187263, "body": "this makes sense.  so n = n or int(n) would mean that whatever n would evaluate to ( if n is true or false), next expression int(n) won&#39;t be evaluated (it would be skipped)?"}], "tags": [], "owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "is_accepted": false, "score": 0, "last_activity_date": 1483572133, "creation_date": 1483572133, "answer_id": 41474905, "question_id": 41474862, "link": "https://stackoverflow.com/questions/41474862/how-short-circuit-code-works-in-python/41474905#41474905", "title": "How short circuit code works in python", "body": "<p><code>and</code> conditions return the last truthy value or the first falsy one. So if <code>n</code> is falsy, <code>n</code> will remain whatever value it was. If <code>n</code> is truthy, it will be cast to an <code>int</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 1113186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bba8ded62fc5102b8d5a88862e0dc70?s=128&d=identicon&r=PG", "display_name": "user1113186", "link": "https://stackoverflow.com/users/1113186/user1113186"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1483572006, "answer_count": 1, "score": 0, "last_activity_date": 1483633628, "creation_date": 1483571907, "last_edit_date": 1483633628, "question_id": 41474862, "link": "https://stackoverflow.com/questions/41474862/how-short-circuit-code-works-in-python", "closed_reason": "Duplicate", "title": "How short circuit code works in python", "body": "<p>This looks like a short circuit way of writing code but I just can't understand it. Is there a specific way to read this kind of short circuit.</p>\n\n<p>e.g:\n<code>n = n and int(n)</code>\n<code>n = n or int(n)</code></p>\n"}, {"tags": ["python", "list", "python-internals"], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 4, "creation_date": 1483572500, "post_id": 41474907, "comment_id": 70155903, "body": "Is that a CPython implementation detail, or a documented part of Python language?  Because it can cause an infinite recursion if you don&#39;t know about that call in advance."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 5, "creation_date": 1483572508, "post_id": 41474907, "comment_id": 70155908, "body": "&quot;<i>it needs a size</i>&quot; and &quot;<i>a default value is used</i>&quot; seem to contradict each other. Instead of &quot;it needs a size&quot; how about &quot;it uses the size to preallocate memory.&quot;"}, {"owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1483573040, "post_id": 41474907, "comment_id": 70156091, "body": "@Rob\u1d69: I meant to say it needs some size to get started. Not that it needs <code>__len__</code>, just some size. The size can be either from <code>__len__</code> or from a default. Feel free to propose and edit and let editors decide what the clearer phrasing is - I don&#39;t feel strongly about it"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 1, "creation_date": 1483573043, "post_id": 41474907, "comment_id": 70156093, "body": "Note that the optimization of knowing the <code>len</code> in advance could turn out to be a disadvantage if you lie (see OP) about the length. :-)"}, {"owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 3, "creation_date": 1483574959, "post_id": 41474907, "comment_id": 70156647, "body": "@wim: not 100% sure but I think this is a CPython implementation detail, which also makes it a de-facto part of the Python language since there&#39;s no official implementation-agnostic spec. See additional discussion in <a href=\"http://stackoverflow.com/questions/37189968/how-to-have-list-consume-iter-without-calling-len\" title=\"how to have list consume iter without calling len\">stackoverflow.com/questions/37189968/&hellip;</a> -- I don&#39;t think a correctly/reasonably implemented <code>__len__</code> should cause issues"}, {"owner": {"reputation": 743, "user_id": 720545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c22535cf5c8ab60177caf28a36efb310?s=128&d=identicon&r=PG", "display_name": "enomad", "link": "https://stackoverflow.com/users/720545/enomad"}, "edited": false, "score": 0, "creation_date": 1571698286, "post_id": 41474907, "comment_id": 103319809, "body": "Probably I&#39;ve found the code - <a href=\"https://github.com/python/cpython/blob/master/Objects/listobject.c#L2708\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/master/Objects/&hellip;</a>"}], "tags": [], "owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "is_accepted": false, "score": 32, "last_activity_date": 1599816363, "last_edit_date": 1599816363, "creation_date": 1483572143, "answer_id": 41474907, "question_id": 41474829, "link": "https://stackoverflow.com/questions/41474829/why-does-list-ask-about-len/41474907#41474907", "title": "Why does list ask about __len__?", "body": "<p><code>list</code> is a list object constructor that will allocate an initial slice of memory for its contents.  The list constructor attempts to figure out a good size for that initial slice of memory by checking the length hint or the length of any object passed into the constructor .  See the call to <a href=\"https://github.com/python/cpython/blob/0bdd9e516e8cb7f4a7d8198bf36194c8328c0f2c/Objects/abstract.c#L82\" rel=\"nofollow noreferrer\"><code>PyObject_LengthHint</code></a> in the Python <a href=\"https://github.com/python/cpython/blob/master/Objects/listobject.c#L833\" rel=\"nofollow noreferrer\">source here</a>. This place is called from the list constructor -- <a href=\"https://github.com/python/cpython/blob/06d0b8b67e8aebd8fe4c34e97d6915c11f4afa30/Objects/listobject.c#L2685\" rel=\"nofollow noreferrer\">list_init</a></p>\n<p>If your object has no <code>__len__</code> or <code>__length_hint__</code>, that's OK -- a <a href=\"https://github.com/python/cpython/blob/0bdd9e516e8cb7f4a7d8198bf36194c8328c0f2c/Objects/abstract.c#L82\" rel=\"nofollow noreferrer\">default value of 8</a> is used; it just may be less efficient due to reallocations.</p>\n"}, {"comments": [{"owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "edited": false, "score": 3, "creation_date": 1483575355, "post_id": 41475344, "comment_id": 70156766, "body": "This is a great find for the motivation!"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "reply_to_user": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "edited": false, "score": 3, "creation_date": 1483575479, "post_id": 41475344, "comment_id": 70156803, "body": "@EliBendersky <a href=\"https://github.com/python/cpython/blame/master/Objects/listobject.c#L834\" rel=\"nofollow noreferrer\">git blame</a> is a miracle worker in these cases :-D"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1535162902, "post_id": 41475344, "comment_id": 90977646, "body": "@wim Please don&#39;t start a revert-war. The original asking <i>&quot;Why does list ask about len()?&quot;</i> is too vague and bogus since it doesn&#39;t say that it&#39;s specifically the <code>list()</code> constructor that asked for the length-hint. That&#39;s all."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 38, "last_activity_date": 1499251594, "last_edit_date": 1499251594, "creation_date": 1483575239, "answer_id": 41475344, "question_id": 41474829, "link": "https://stackoverflow.com/questions/41474829/why-does-list-ask-about-len/41475344#41475344", "title": "Why does list ask about __len__?", "body": "<p>See the <a href=\"https://www.python.org/dev/peps/pep-0424/#rationale\" rel=\"noreferrer\">Rationale section from PEP 424</a> that introduced <code>__length_hint__</code> and offers insight on the motivation:</p>\n\n<blockquote>\n  <p>Being able to pre-allocate lists based on the expected size, as estimated by <code>__length_hint__</code> , can be a significant optimization. <em>CPython has been observed to run some code faster than PyPy, purely because of this optimization being present.</em></p>\n</blockquote>\n\n<p>In addition to that, the documentation <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__length_hint__\" rel=\"noreferrer\">for <code>object.__length_hint__</code></a> verifies the fact that this is purely an optimization feature:</p>\n\n<blockquote>\n  <p>Called to implement <code>operator.length_hint()</code>. Should return an estimated length for the object (which may be greater or less than the actual length). The length must be an integer <code>&gt;= 0</code>. <em>This method is <strong>purely an optimization</strong> and is never required for correctness</em>.</p>\n</blockquote>\n\n<p>So <code>__length_hint__</code> is here because it can result in some nice optimizations.</p>\n\n<p><code>PyObject_LengthHint</code>, <a href=\"https://github.com/python/cpython/blob/master/Objects/abstract.c#L88\" rel=\"noreferrer\">first tries to get a value from <code>object.__len__</code>  (if it is defined)</a> and then tries to see if <code>object.__length_hint__</code> is available. If neither is there, it returns a default value of <code>8</code> for lists. </p>\n\n<p><code>listextend</code>, which is called from <code>list_init</code> as Eli stated in his answer, was modified according to this PEP to offer this optimization for anything that defines either a <code>__len__</code> or a <code>__length_hint__</code>. </p>\n\n<p><code>list</code> isn't the only one that benefits from this, of course, <a href=\"https://github.com/python/cpython/blob/0217f632ee40ec3dab11e6f88e82b6ed24974861/Objects/bytesobject.c#L2688\" rel=\"noreferrer\"><code>bytes</code> objects do</a>:</p>\n\n<pre><code>&gt;&gt;&gt; bytes(Foo())\nlen\ngetitem 0\n...\nb'\\x00\\x01\\x04\\t\\x10\\x19'\n</code></pre>\n\n<p>so <a href=\"https://github.com/python/cpython/blob/0217f632ee40ec3dab11e6f88e82b6ed24974861/Objects/bytearrayobject.c#L1616\" rel=\"noreferrer\">do <code>bytearray</code> objects but, only when you <code>extend</code> them</a>:</p>\n\n<pre><code>&gt;&gt;&gt; bytearray().extend(Foo())\nlen\ngetitem 0\n...\n</code></pre>\n\n<p>and <code>tuple</code> objects which create <a href=\"https://github.com/python/cpython/blob/0bdd9e516e8cb7f4a7d8198bf36194c8328c0f2c/Objects/abstract.c#L1794\" rel=\"noreferrer\">an intermediary sequence to</a> populate themselves:</p>\n\n<pre><code>&gt;&gt;&gt; tuple(Foo())\nlen\ngetitem 0\n...\n(0, 1, 4, 9, 16, 25)\n</code></pre>\n\n<hr>\n\n<p>If anybody is wandering why exactly <code>'iter'</code> is printed <em>before</em> <code>'len'</code> in class <code>Bar</code> and not after as happens with class <code>Foo</code>: </p>\n\n<p>This is because if the object in hand defines an <code>__iter__</code> <a href=\"https://github.com/python/cpython/blob/0bdd9e516e8cb7f4a7d8198bf36194c8328c0f2c/Objects/abstract.c#L3118\" rel=\"noreferrer\">Python <em>will first call it</em> to get the iterator</a>, thereby running the <code>print('iter')</code> too. The same doesn't happen if it falls back to using <code>__getitem__</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 0, "last_activity_date": 1568217727, "last_edit_date": 1568217727, "creation_date": 1568202294, "answer_id": 57888431, "question_id": 41474829, "link": "https://stackoverflow.com/questions/41474829/why-does-list-ask-about-len/57888431#57888431", "title": "Why does list ask about __len__?", "body": "<p><strong>Note</strong>: I prepared the answer for <a href=\"https://stackoverflow.com/questions/57887023/why-len-is-called-and-the-result-is-not-used-when-iterating-with-getitem\">[SO]: Why __len__ is called and the result is not used when iterating with __getitem__?</a>, which was marked as a dupe (as it's exactly this question) while I was writing it, so it was no longer possible to post it there, and since I already had it, I decided to post it here (with small adjustments).</p>\n\n<p>Here's a modified version of your code that makes things a bit clearer.</p>\n\n<p><em>code00.py</em>:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport sys\n\n\nclass Foo:\n    def __getitem__(self, item):\n        print(\"{0:s}.{1:s}: {2:d}\".format(self.__class__.__name__, \"getitem\", item))\n        if item == 6:\n            raise IndexError\n        return item ** 2\n\n\nclass Bar:\n    def __iter__(self):\n        print(\"{0:s}.{1:s}\".format(self.__class__.__name__, \"iter\"))\n        return iter([3, 5, 42, 69])\n\n    def __len__(self):\n        result = 3\n        print(\"{0:s}.{1:s}: {2:d}\".format(self.__class__.__name__, \"len\", result))\n        return result\n\n\ndef main():\n    print(\"Start ...\\n\")\n    for class_obj in [Foo, Bar]:\n        inst_obj = class_obj()\n        print(\"Created {0:s} instance\".format(class_obj.__name__))\n        list_obj = list(inst_obj)\n        print(\"Converted instance to list\")\n        print(\"{0:s}: {1:}\\n\".format(class_obj.__name__, list_obj))\n\n\nif __name__ == \"__main__\":\n    print(\"Python {0:s} {1:d}bit on {2:s}\\n\".format(\" \".join(item.strip() for item in sys.version.split(\"\\n\")), 64 if sys.maxsize &gt; 0x100000000 else 32, sys.platform))\n    main()\n    print(\"\\nDone.\")\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n<pre><code>[cfati@CFATI-5510-0:e:\\Work\\Dev\\StackOverflow\\q041474829]&gt; \"e:\\Work\\Dev\\VEnvs\\py_064_03.07.03_test0\\Scripts\\python.exe\" code00.py\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 22:22:05) [MSC v.1916 64 bit (AMD64)] 64bit on win32\n\nStart ...\n\nCreated Foo instance\nFoo.getitem: 0\nFoo.getitem: 1\nFoo.getitem: 2\nFoo.getitem: 3\nFoo.getitem: 4\nFoo.getitem: 5\nFoo.getitem: 6\nConverted instance to list\nFoo: [0, 1, 4, 9, 16, 25]\n\nCreated Bar instance\nBar.iter\nBar.len: 3\nConverted instance to list\nBar: [3, 5, 42, 69]\n\n\nDone.\n</code></pre>\n</blockquote>\n\n<p>As seen, <em>__len__</em> is called when the list is constructed. Browsing <a href=\"https://github.com/python/cpython/blob/master/Objects/listobject.c\" rel=\"nofollow noreferrer\">[GitHub]: python/cpython - (master) cpython/Objects/listobject.c</a>:</p>\n\n<ul>\n<li><em>list___init__</em> (which is the initializer: <strong><em>__init__</em></strong> (<em>tp_init</em> member in <em>PyList_Type</em>)) calls <em>list___init___impl</em></li>\n<li><em>list___init___impl</em> calls <em>list_extend</em></li>\n<li><em>list_extend</em> calls <em>PyObject_LengthHint</em> (<code>n = PyObject_LengthHint(iterable, 8);</code>)</li>\n<li><p><em>PyObject_LengthHint</em> (in <em>abstract.c</em>), does the check:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Py_ssize_t\nPyObject_LengthHint(PyObject *o, Py_ssize_t defaultvalue)\n\n    // ...\n\n    if (_PyObject_HasLen(o)) {\n        res = PyObject_Length(o);\n\n    // ...\n</code></pre></li>\n</ul>\n\n<p>So, it's an optimization feature that works for iterables that define <em>__len__</em>.</p>\n\n<p>This is particularly handy when the iterable has a large number of elements, so that they are allocated at once, and therefore skip the list growth mechanism (didn't check if still applies, but at one point, it was): \"<strong><em>Space increases by ~12.5% when full</em></strong>\" (according to David M. Beazley). It is very useful when lists were constructed out of (other) lists or tuples. <br>For example, constructing a list from an iterable (that doesn't define <em>__len__</em>) with <strong><em>1000</em></strong> elements, instead of allocating everything at once, there will be <strong><em>~41</em></strong> (<strong><code>log<sub>1.125</sub>(1000 / 8)</code></strong>) operations (allocation, data shifting, deallocation) required only for increasing the new list as it gets filled (with elements from the source iterable).</p>\n\n<p>Needless to say that for \"modern\" iterables, the improvement no longer applies.</p>\n"}], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2238, "favorite_count": 5, "accepted_answer_id": 41475344, "answer_count": 3, "score": 35, "last_activity_date": 1599816363, "creation_date": 1483571727, "last_edit_date": 1535411990, "question_id": 41474829, "link": "https://stackoverflow.com/questions/41474829/why-does-list-ask-about-len", "title": "Why does list ask about __len__?", "body": "<pre><code>class Foo:\n    def __getitem__(self, item):\n        print('getitem', item)\n        if item == 6:\n            raise IndexError\n        return item**2\n    def __len__(self):\n        print('len')\n        return 3\n\nclass Bar:\n    def __iter__(self):\n        print('iter')\n        return iter([3, 5, 42, 69])\n    def __len__(self):\n        print('len')\n        return 3\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; list(Foo())\nlen\ngetitem 0\ngetitem 1\ngetitem 2\ngetitem 3\ngetitem 4\ngetitem 5\ngetitem 6\n[0, 1, 4, 9, 16, 25]\n&gt;&gt;&gt; list(Bar())\niter\nlen\n[3, 5, 42, 69]\n</code></pre>\n\n<p>Why does <code>list</code> call <code>__len__</code>?  It doesn't seem to use the result for anything obvious.  A <code>for</code> loop doesn't do it.  This isn't mentioned anywhere in the <a href=\"https://docs.python.org/3/library/stdtypes.html#iterator-types\">iterator protocol</a>, which just talks about <code>__iter__</code> and <code>__next__</code>.  </p>\n\n<p>Is this Python reserving space for the list in advance, or something clever like that?  </p>\n\n<p>(CPython 3.6.0 on Linux)</p>\n"}, {"tags": ["python", "algorithm", "performance", "math"], "comments": [{"owner": {"reputation": 33, "user_id": 5491311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c255666c5c45e0383da4de9885dfd957?s=128&d=identicon&r=PG&f=1", "display_name": "A. White", "link": "https://stackoverflow.com/users/5491311/a-white"}, "reply_to_user": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1483572164, "post_id": 41474814, "comment_id": 70155765, "body": "@UrielEli What do you mean? I told you that x is how many times to move to the right and y is how many times to move upward."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1483572165, "post_id": 41474814, "comment_id": 70155767, "body": "Analyze the pattern. There&#39;s clearly a relationship between a number and its coordinates. If you can figure out what it is, there is no need to do looping."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1483572513, "post_id": 41474814, "comment_id": 70155910, "body": "If your code works without errors, a better place to ask could be <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5491311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c255666c5c45e0383da4de9885dfd957?s=128&d=identicon&r=PG&f=1", "display_name": "A. White", "link": "https://stackoverflow.com/users/5491311/a-white"}, "edited": false, "score": 0, "creation_date": 1483572300, "post_id": 41474878, "comment_id": 70155821, "body": "Wouldn&#39;t it be better to store a list like: [[1], [2, 3], [4, 5, 6]]?"}], "tags": [], "owner": {"reputation": 29901, "user_id": 58737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/95bd14f2b84f4af133b18d541dd33530?s=128&d=identicon&r=PG", "display_name": "Pratik Deoghare", "link": "https://stackoverflow.com/users/58737/pratik-deoghare"}, "is_accepted": false, "score": -1, "last_activity_date": 1483572000, "creation_date": 1483572000, "answer_id": 41474878, "question_id": 41474814, "link": "https://stackoverflow.com/questions/41474814/need-to-make-my-algorithm-faster/41474878#41474878", "title": "Need to make my algorithm faster", "body": "<p>Store input as list of lists. Reverse the list of lists you just read. Then indexing is simple. </p>\n\n<pre><code>m = [[7], [4, 8], [2, 5, 9], [1, 3, 6, 10]] \nm = m[::-1] # reverse m = [[1, 3, 6, 10], [2, 5, 9], [4, 8], [7]] \nx = 1 \ny = 1 \nprint m[x-1][y-1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29901, "user_id": 58737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/95bd14f2b84f4af133b18d541dd33530?s=128&d=identicon&r=PG", "display_name": "Pratik Deoghare", "link": "https://stackoverflow.com/users/58737/pratik-deoghare"}, "edited": false, "score": 0, "creation_date": 1483624209, "post_id": 41474919, "comment_id": 70178553, "body": "ah I was under the impression that this was supposed to work for any list of arrays :-)"}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 3, "last_activity_date": 1483572219, "creation_date": 1483572219, "answer_id": 41474919, "question_id": 41474814, "link": "https://stackoverflow.com/questions/41474814/need-to-make-my-algorithm-faster/41474919#41474919", "title": "Need to make my algorithm faster", "body": "<p>There's a closed-form solution to this problem. The numbers along the bottom row are the triangular numbers. You can compute them with <code>n*(n+1)//2</code>. You can get your result by computing the right <code>n</code> and offsetting from the triangular number that it produces:</p>\n\n<pre><code>def answer(x, y):\n    n = x + y + 1\n    return n*(n+1)//2 - y\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5491311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c255666c5c45e0383da4de9885dfd957?s=128&d=identicon&r=PG&f=1", "display_name": "A. White", "link": "https://stackoverflow.com/users/5491311/a-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 41474919, "answer_count": 2, "score": 0, "last_activity_date": 1483574202, "creation_date": 1483571676, "last_edit_date": 1483574202, "question_id": 41474814, "link": "https://stackoverflow.com/questions/41474814/need-to-make-my-algorithm-faster", "title": "Need to make my algorithm faster", "body": "<p>I need to make my program faster, but I just can't figure out how. Here is the problem. I have a sequence of numbers sorted like this:</p>\n\n<pre><code>7\n4 8\n2 5 9\n1 3 6 10\n\n 7\n  \\\n 4 8\n  \\ \\\n 2 5 9\n  \\ \\ \\\n 1 3 6 10\n</code></pre>\n\n<p>I have to output a number depending on the input. The input is going to be two integers, think of them as x and y coordinates. The <em>x</em> is how many away from the left I go and the y is how many from the bottom I go. So say <em>x</em> and <em>y</em> are 1 and 1, then I would have to output 5. </p>\n\n<pre><code> 7\n\n 4 8\n\n 2-5 9\n   |\n 1 3 6 10\n</code></pre>\n\n<p>Now my code works and gets the correct number, but it is too slow.</p>\n\n<pre><code>def answer(x, y):\n    last_num = 1\n    arr_hold = [[1]]\n    for i in range(2, x+(y+2)):\n        reg_hold = []\n        for j in range(last_num + 1, i + last_num + 1):\n            if j == (i + last_num + 1) - 1:\n                last_num = j\n            if i == (x+(y+2)) - 1:\n                reg_hold.append(j)\n    print reg_hold\n    return reg_hold[x]\n</code></pre>\n\n<p>Is there anything I can do to speed it up?\nThe max <em>x</em> or <em>y</em> can be is 100000 and the lowest is 0</p>\n"}, {"tags": ["python", "web-scraping", "lxml"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7376606, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/558721808a415f257e205c7aa8594760?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/7376606/john-smith"}, "edited": false, "score": 0, "creation_date": 1483572407, "post_id": 41474812, "comment_id": 70155860, "body": "It works great with the site I&#39;m scraping! If I could ask another question - I wanted to get rid of the bracketed sections ([ABCD], [BCDE], etc) how would I go about doing that?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 125, "user_id": 7376606, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/558721808a415f257e205c7aa8594760?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/7376606/john-smith"}, "edited": false, "score": 0, "creation_date": 1483572506, "post_id": 41474812, "comment_id": 70155907, "body": "@JohnSmith well, <code>&quot;&quot;.join(root.xpath(&#39;&#47;&#47;div[contains(@class,&quot;field-clearfix&quot;)]&zwnj;&#8203;&#47;div[2]&#47;div&#47;p&#47;text()&zwnj;&#8203;&#39;))</code> should work, please give it a try."}, {"owner": {"reputation": 125, "user_id": 7376606, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/558721808a415f257e205c7aa8594760?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/7376606/john-smith"}, "edited": false, "score": 0, "creation_date": 1483572617, "post_id": 41474812, "comment_id": 70155958, "body": "Yep, that works too. Thanks. I&#39;m really quite a noob at all this."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 3, "last_activity_date": 1483572067, "last_edit_date": 1483572067, "creation_date": 1483571671, "answer_id": 41474812, "question_id": 41474787, "link": "https://stackoverflow.com/questions/41474787/trying-to-scrape-all-the-text-under-a-particular-div-while-ignoring-html-tags/41474812#41474812", "title": "Trying to Scrape all the text under a particular &lt;div&gt;, while ignoring HTML tags", "body": "<p>Get all the text nodes under an element and join:</p>\n\n<pre><code>\"\".join(tree.xpath('//div[contains(@class,\"field-clearfix\")]/div[2]/div/p//text()'))\n                                                   # NOTE THIS EXTRA SLASH^\n</code></pre>\n\n<p>Note that <em>your HTML is not well-formed</em> and should be fixed for this to work. It works for me for this fixed version of your HTML:</p>\n\n<pre><code>&lt;div class=\"field-clearfix\"&gt;\n    &lt;div class=\"field-label\"&gt;Heading&lt;/div&gt;\n    &lt;div class=\"field-items\"&gt;\n        &lt;div class=\"field-item even\"&gt;\n        &lt;p&gt;\n        Text script &lt;a href=\"URL\" target=\"_blank\"&gt;[ABCD]&lt;/a&gt;.\n        Another text script &lt;a href=\"URL\" target=\"_blank\"&gt;[BCDE]&lt;/a&gt;, text.\n        Another text text script &lt;a href=\"URL\" target=\"_blank\"&gt;[FGHI]&lt;/a&gt;, text.\n        &lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "is_accepted": false, "score": 1, "last_activity_date": 1483572520, "creation_date": 1483572520, "answer_id": 41474965, "question_id": 41474787, "link": "https://stackoverflow.com/questions/41474787/trying-to-scrape-all-the-text-under-a-particular-div-while-ignoring-html-tags/41474965#41474965", "title": "Trying to Scrape all the text under a particular &lt;div&gt;, while ignoring HTML tags", "body": "<p>Using @alexcxe's amended HTML, this does the trick:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nstring = '''&lt;div class=\"field-clearfix\"&gt;\n    &lt;div class=\"field-label\"&gt;Heading&lt;/div&gt;\n    &lt;div class=\"field-items\"&gt;\n        &lt;div class=\"field-item even\"&gt;\n        &lt;p&gt;\n        Text script &lt;a href=\"URL\" target=\"_blank\"&gt;[ABCD]&lt;/a&gt;.\n        Another text script &lt;a href=\"URL\" target=\"_blank\"&gt;[BCDE]&lt;/a&gt;, text.\n        Another text text script &lt;a href=\"URL\" target=\"_blank\"&gt;[FGHI]&lt;/a&gt;, text.\n        &lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;'''\n\nsoup = BeautifulSoup(string, 'html.parser')\n\nparagraphs = soup.find_all('p')\n\nresult = [x.text for x in paragraphs]\n\nresult = \" \".join(x for x in result[0].split())\n</code></pre>\n\n<p>Check out <code>result</code>:</p>\n\n<pre><code>&gt;&gt;&gt; result\n'Text script [ABCD]. Another text script [BCDE], text. Another text text script [FGHI], text.'\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 7376606, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/558721808a415f257e205c7aa8594760?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/7376606/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 1, "accepted_answer_id": 41474812, "answer_count": 2, "score": 1, "last_activity_date": 1483572520, "creation_date": 1483571495, "question_id": 41474787, "link": "https://stackoverflow.com/questions/41474787/trying-to-scrape-all-the-text-under-a-particular-div-while-ignoring-html-tags", "title": "Trying to Scrape all the text under a particular &lt;div&gt;, while ignoring HTML tags", "body": "<p>I'm trying to use lxml in Python 3.5 to scrape a website, but I am having problems getting satisfactory results from a particular part of the website.</p>\n\n<p>This is the basic formatting for that section:</p>\n\n<pre><code>&lt;div class=\"field-clearfix\"&gt;\n    &lt;div class=\"field-label\"&gt;Heading&lt;/div&gt;\n    &lt;div class=\"field-items\"&gt;\n        &lt;div class=\"field-item even\"&gt;\n        &lt;p&gt;\n        Text script &lt;a href=\"URL\" target=\\\"_blank\\&gt;[ABCD]&lt;/a&gt;.\n        Another text script &lt;a href=\"URL\" target=\\\"_blank\\&gt;[BCDE]&lt;/a&gt;, text. \n        Another text text script &lt;a href=\"URL\" target=\\\"_blank\\&gt;[FGHI]&lt;/a&gt;, text.\n        &lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Right now I use this:</p>\n\n<pre><code>page = requests.get(URL_TO_SCRAPE)\ntree = html.fromstring(page.content)\noutput = tree.xpath('//div[contains(@class,\"field-clearfix\")]/div[2]/div/p/text()')\n</code></pre>\n\n<p>But that of course, only returns <code>Text script</code>. What I'd really like is for the output to include all non-HTML tagged text:</p>\n\n<p><code>Text script [ABCD] Another text script [BCDE], text. Another text text script [FGHI], text.</code></p>\n\n<p>I'm very much new to Python and scraping, so I suspect there's a really easy solution with lxml that I'm not getting here. Would appreciate any help!</p>\n"}, {"tags": ["python", "encoding", "brackets"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7326582, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-iWqKQLFRJr8/AAAAAAAAAAI/AAAAAAAABlg/SWNS3Y_K-tQ/photo.jpg?sz=128", "display_name": "Kkheartsmak", "link": "https://stackoverflow.com/users/7326582/kkheartsmak"}, "edited": false, "score": 0, "creation_date": 1483579096, "post_id": 41475537, "comment_id": 70157776, "body": "thank you! Thats what I was wondering about, and this code comes from an assignment on Prisoners Dilemma which our class is currently using enthought canopy to code to clarify, but thank you for all the help."}, {"owner": {"reputation": 5775, "user_id": 1988991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a4ae5d937c20301fb9442597a6d0ee?s=128&d=identicon&r=PG", "display_name": "Jonathan March", "link": "https://stackoverflow.com/users/1988991/jonathan-march"}, "reply_to_user": {"reputation": 39, "user_id": 7326582, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-iWqKQLFRJr8/AAAAAAAAAAI/AAAAAAAABlg/SWNS3Y_K-tQ/photo.jpg?sz=128", "display_name": "Kkheartsmak", "link": "https://stackoverflow.com/users/7326582/kkheartsmak"}, "edited": false, "score": 0, "creation_date": 1483639740, "post_id": 41475537, "comment_id": 70189407, "body": "Glad this helped. a) Please read and act on these guidelines: <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a> b) Yes, I understood that you were using this as part of a Prisoner&#39;s Dilemma coding project. But your question is not at all specific to that. The title of a question should reflect the content of a question, not the reason you are asking it. As an analogy, if you wanted information about making an apple pie for your friend&#39;s birthday, you would probably google &quot;good type of apple for pies&quot; rather than &quot;help with birthday&quot;."}], "tags": [], "owner": {"reputation": 5775, "user_id": 1988991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a4ae5d937c20301fb9442597a6d0ee?s=128&d=identicon&r=PG", "display_name": "Jonathan March", "link": "https://stackoverflow.com/users/1988991/jonathan-march"}, "is_accepted": true, "score": 0, "last_activity_date": 1483576733, "creation_date": 1483576733, "answer_id": 41475537, "question_id": 41474745, "link": "https://stackoverflow.com/questions/41474745/python-negative-index/41475537#41475537", "title": "Python negative index?", "body": "<p>Since this question has nothing to do with Prisoner's Dilemma, I've retitled it to reflect what appears to be your actual question. I've also removed the <code>canopy</code> tag since this question seems to be strictly about pure Python (a very active topic here), nothing specifically about Canopy.</p>\n\n<p>If your question is \"does <code>history[-1]</code> yield the last element of the <code>history</code> list\", then the answer is Yes. You can verify this at the Python prompt with something like this:</p>\n\n<p><code>\nhistory = list('abcde')\nprint history\nprint history[-1]\n</code></p>\n"}], "owner": {"reputation": 39, "user_id": 7326582, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-iWqKQLFRJr8/AAAAAAAAAAI/AAAAAAAABlg/SWNS3Y_K-tQ/photo.jpg?sz=128", "display_name": "Kkheartsmak", "link": "https://stackoverflow.com/users/7326582/kkheartsmak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 2, "accepted_answer_id": 41475537, "answer_count": 1, "score": 0, "last_activity_date": 1483576733, "creation_date": 1483571257, "last_edit_date": 1483576432, "question_id": 41474745, "link": "https://stackoverflow.com/questions/41474745/python-negative-index", "title": "Python negative index?", "body": "<p>I have simple question about prisoners dilemma. It is mainly just to reassure that I am doing this correctly.</p>\n\n<p>In the code below [-1] means that it will see if your last move is collude and if their last move is betray. And you could go even further back in the histories using [-2] or [-3]</p>\n\n<pre><code>elif my_history[-1]=='c' and their_history[-1]=='b':\n    return 'b'\nelse:\n    return 'c'\n</code></pre>\n"}, {"tags": ["php", "python", "python-2.7"], "comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 1, "creation_date": 1483571586, "post_id": 41474739, "comment_id": 70155567, "body": "Escape your back-slashes! <code>C:\\Python27</code> should be <code>C:\\\\Python27</code> for instance. And never use relative paths when excecuting something.. <code>python\\\\pythontesting.py</code> could be anywhere, and you never know which folder the PHP runs out of let alone Python under PHP.. Will be it running in <code>C:\\Python27</code> or your web dir? Better to use absolute paths for <b>everything</b>. And as a final note, <code>$SKU</code> won&#39;t get resolved because it&#39;s within <code>&#39;</code> and not <code>&quot;</code>"}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1483571770, "post_id": 41474739, "comment_id": 70155641, "body": "And I&#39;m not PHP guru, but <code>exec()</code> is probably better than <code>passthru()</code>"}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1483571946, "post_id": 41474739, "comment_id": 70155702, "body": "Final thought, <code>subprocess.call</code> <b>probably</b> hangs your application because it&#39;s waiting for a process to finish or something, try switching to <a href=\"http://stackoverflow.com/questions/41462957/python-subprocess-communicate-freezes-when-reading-output?noredirect=1#comment70134378_41462957\">popen.poll()</a> which got answers a few hours ago. And why are you starting <code>pythontesting3.py</code> via <code>subprocess.call</code> to begin with? Why not just do <code>import pythontesting3</code>? It&#39;s a Python script, you can &quot;run&quot; those by just importing it..."}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1483572154, "post_id": 41474739, "comment_id": 70155758, "body": "Most likely, <code>sys.executable</code> isn&#39;t pointing to <code>C:\\\\Python27\\\\python.exe</code>. At least swap out <code>sys.executable</code> to eliminate a problem source, because you&#39;re chaining a lot of things here and any problem source you can take away from the equation will help you out greatly. You&#39;re also using <code>print &quot;I&#39;m alive&quot;</code> which is a nifty debug tool, add more of those and see where your code breaks ;)"}, {"owner": {"reputation": 1, "user_id": 6856062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c5d703eb4b266d3579d3d90378e72d?s=128&d=identicon&r=PG&f=1", "display_name": "sonicspeed17", "link": "https://stackoverflow.com/users/6856062/sonicspeed17"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1483573880, "post_id": 41474739, "comment_id": 70156359, "body": "thanks for the suggestions. I escaped everything and also changed the subprocess.call to C:\\\\Python27\\\\python.exe. but still no luck. the reason for calling the 3rd script is this set of tests are written so they acts the same as my main program (which has 3 tiers of python scripts. each script is waiting for some database variables to be set which can take 10-15 mins, thus the need to run the scripts without waiting for them to finish."}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1483574026, "post_id": 41474739, "comment_id": 70156400, "body": "Just so we&#39;re both on the same Python plane, calling <code>subprocess</code> on anything will not run the next script until that call is complete. Meaning <code>need to run the scripts without waiting for them to finish</code> won&#39;t hold up here. Unless you&#39;re talking about the PHP execution, that however will still also wait for the Python chain to complete.. If i&#39;m not mistake, again, I&#39;m not PHP guru."}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1483574373, "post_id": 41474739, "comment_id": 70156483, "body": "I&#39;ll bet that your <code>subprocess.call</code> is blocking your <code>python1.py</code> script - as I said - but you&#39;re expecting <code>python2.py</code> to start because you assumed <code>subprocess.call</code> is a non-blocking execution. Is this a correct assumption?"}, {"owner": {"reputation": 1, "user_id": 6856062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c5d703eb4b266d3579d3d90378e72d?s=128&d=identicon&r=PG&f=1", "display_name": "sonicspeed17", "link": "https://stackoverflow.com/users/6856062/sonicspeed17"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1483575263, "post_id": 41474739, "comment_id": 70156747, "body": "I have some progress. the 2nd script IS started by the 1st script however it is terminated immediately before it can run any code. I set the 1st script to open the 2nd script with pop up a command line terminal (changed them from opening pythonw.exe to python.exe). when the 1st script is executed via PHP I get the 1st messagebox and when I clikc ok I see the command line window pop up momentarily."}], "owner": {"reputation": 1, "user_id": 6856062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c5d703eb4b266d3579d3d90378e72d?s=128&d=identicon&r=PG&f=1", "display_name": "sonicspeed17", "link": "https://stackoverflow.com/users/6856062/sonicspeed17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483571212, "creation_date": 1483571212, "question_id": 41474739, "link": "https://stackoverflow.com/questions/41474739/python-script-will-not-start-another-python-script-when-started-from-php", "title": "Python script will not start another python script when started from PHP", "body": "<p>I have written the following test php code that will run a python script, note that there are 3 methods listed (all work). The last method will run the python script but does not cause the PHP page to wait for it to finished.</p>\n\n<pre><code> &lt;?PHP\n  $SKU= 'asdfghyt42';\n  $showID = '60';\n\n\n  //method 1\n  $command='C:\\Python27\\python.exe python\\pythontesting.py $SKU $showID';\n  $buffer='';\n  ob_start(); // prevent outputting till you are done\n   passthru($command);\n  //get the result out\n $sketchfabKey=ob_get_contents();\n  //clean up the buffer\n ob_end_clean();\n echo $sketchfabKey; \n\n\n /*\n /method 2\n $command = escapeshellcmd('C:\\Python27\\pythonw.exe python\\pythontesting.py $SKU $showID');\n$output = shell_exec($command);\necho $output;\n\n\n // method 3\n$command=\"C:\\Python27\\pythonw.exe python\\pythontesting.py $sketchfabKey $SKU\"; \n$out = 0;\nob_end_clean();\nignore_user_abort();\nob_start();\nheader(\"Connection: close\");\necho json_encode($out);\nheader(\"Content-Length: \" . ob_get_length());\nob_end_flush();\nflush();\n  exec($command);\n  */\n\n ?&gt;\n</code></pre>\n\n<p>the python script will open a windows messagebox and tell you it is python script 1</p>\n\n<pre><code>import win32api\nimport sys\nimport subprocess\n\nwin32api.MessageBox(0, '1:', 'yay', 0x00001000)\np = subprocess.call([sys.executable, 'pythontesting2.py'], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\nprint \"I am alive\"\n</code></pre>\n\n<p>Once the user clicks ok button on the message box it should run the next python script which does the same thing with the message box stating it is script 2</p>\n\n<pre><code>import win32api\nimport sys\nimport subprocess\n\nwin32api.MessageBox(0, '2:', 'yay', 0x00001000)\np = subprocess.call([sys.executable, 'pythontesting3.py'], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\nprint \"I am alive\"\n</code></pre>\n\n<p>This is where the problem occurs. If I run the 1st python script from the python shell it works exactly as intended and give me a messagebox with 1 and then a messagebox with 2.</p>\n\n<p>However when the first python script is executed by the PHP page, python will only execute code within the 1st script and give me messagebox with a 1. When I click ok I do not get the 2nd messagebox and thus have concluded that the 2nd python script is never started.</p>\n\n<p>I thought it may be a permissions issue with windows, set the python.exe's to run as administrator and made sure that all permissions were set to full control. It did not change anything.\n<br><br>\nHere is some info on the system if that will help:<br>\nPython 2.7<br>\nwebserver is run locally via Apache and setup with XAMPP</p>\n"}, {"tags": ["python", "python-2.7", "list"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1483571210, "post_id": 41474710, "comment_id": 70155446, "body": "Your code is not asking if the lists are equal, but if both lists are the same list."}], "answers": [{"tags": [], "owner": {"reputation": 230015, "user_id": 8206, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG", "display_name": "Eli Bendersky", "link": "https://stackoverflow.com/users/8206/eli-bendersky"}, "is_accepted": true, "score": 4, "last_activity_date": 1483571104, "last_edit_date": 1495540421, "creation_date": 1483571104, "answer_id": 41474724, "question_id": 41474710, "link": "https://stackoverflow.com/questions/41474710/python-saying-2-equal-lists-are-not-equal/41474724#41474724", "title": "Python saying 2 equal lists are not equal", "body": "<p>You should compare lists for equality with <code>==</code>, not <code>is</code></p>\n\n<p>The <code>is</code> operator is for comparing object IDs in the Python runtime; it asks, literally, are the two the same object. Observe this example:</p>\n\n<pre><code>In [13]: ['a', 'b'] == ['a', 'b']\nOut[13]: True\n\nIn [14]: ['a', 'b'] is ['a', 'b']\nOut[14]: False\n</code></pre>\n\n<p>Examining the ids helps:</p>\n\n<pre><code>In [19]: id(['a', 'b'])\nOut[19]: 140365516758984\n\nIn [20]: id(['a', 'b'])\nOut[20]: 140365515846360\n</code></pre>\n\n<p>Note: two calls of <code>id</code> on the same list (same values) produces different IDs, since these are different objects. </p>\n\n<hr>\n\n<p>For more background see <a href=\"https://stackoverflow.com/questions/132988/is-there-a-difference-between-and-is-in-python\">this SO discussion</a></p>\n"}], "owner": {"reputation": 25, "user_id": 6684480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734541f0a4cdb0a2f949ebd3b478b980?s=128&d=identicon&r=PG&f=1", "display_name": "Miles Abarr", "link": "https://stackoverflow.com/users/6684480/miles-abarr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "closed_date": 1483571457, "accepted_answer_id": 41474724, "answer_count": 1, "score": 0, "last_activity_date": 1483571104, "creation_date": 1483571033, "question_id": 41474710, "link": "https://stackoverflow.com/questions/41474710/python-saying-2-equal-lists-are-not-equal", "closed_reason": "Duplicate", "title": "Python saying 2 equal lists are not equal", "body": "<p>I have a very strange thing happening where two lists which are clearly equal are not being considered equal by Python. From here you can see the IPython console output of an element of a dictionary I am working with:</p>\n\n<p><code>In [251]: saveDict['data']['hpSH']['manifold_type']\nOut[251]: ['duct', 'pipe']</code></p>\n\n<p>Then when I go to check if this same dictionary element is equal to the list ['duct', 'pipe'], it says it is not:</p>\n\n<p><code>In [252]: ['duct', 'pipe'] is saveDict['data']['hpSH']['manifold_type']\nOut[252]: False</code></p>\n\n<p>However, using \"==\" instead of \"is\" results in a True output in the console.</p>\n\n<p>I discovered this because it is messing up other parts of my code and not doing the same calculations with saveDict['data']['hpSH']['manifold_type'] as it is with ['duct', 'pipe']. To give you more backstory, saveDict is coming from a saved file made by cPickle. Here is more on the environment I am working with:</p>\n\n<p>Windows 10, \nPython 2.7.12 :: Anaconda 4.1.1 (32-bit), \nSpyder 2 IDE</p>\n"}, {"tags": ["python", "python-3.x", "floating-point"], "comments": [{"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1483571030, "post_id": 41474697, "comment_id": 70155370, "body": "what operation do you think <code>(1&#47;2)(b1+b2)*h</code> is performing?"}, {"owner": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 1, "creation_date": 1483571049, "post_id": 41474697, "comment_id": 70155380, "body": "Seriously? Where&#39;s CSS coming here?"}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1483571223, "post_id": 41474697, "comment_id": 70155453, "body": "Also, <code>b1</code>, <code>b2</code> and <code>h</code> are all going to be strings. You&#39;ll need to wrap them in <code>float()</code> before you treat them as floats."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7376573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef501c654497dfa554a7b083aedc1cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/7376573/wolfgang"}, "edited": false, "score": 0, "creation_date": 1483571988, "post_id": 41474770, "comment_id": 70155714, "body": "Thanks, I also realized I needed to wrap the variables with floats as well, now it works."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 13, "user_id": 7376573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef501c654497dfa554a7b083aedc1cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/7376573/wolfgang"}, "edited": false, "score": 0, "creation_date": 1483574301, "post_id": 41474770, "comment_id": 70156468, "body": "@Wolfgang If this answer <a href=\"http://stackoverflow.com/help/someone-answers\">addressed your problem</a>, please consider <a href=\"http://meta.stackexchange.com/questions/5234\">accepting it</a> by clicking on the check mark/tick to the left of the answer, turning it green. This marks the question as resolved to your satisfaction, and awards <a href=\"http://stackoverflow.com/help/whats-reputation\">reputation</a> both to you and the person who answered. Once you have &gt;= 15 reputation points, you may also upvote the answer if you wish. There is no obligation to do either."}], "tags": [], "owner": {"reputation": 74, "user_id": 6778001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsVdC.jpg?s=128&g=1", "display_name": "Jarek", "link": "https://stackoverflow.com/users/6778001/jarek"}, "is_accepted": true, "score": 2, "last_activity_date": 1483571421, "creation_date": 1483571421, "answer_id": 41474770, "question_id": 41474697, "link": "https://stackoverflow.com/questions/41474697/i-keep-getting-float-object-is-not-callable/41474770#41474770", "title": "I keep getting &#39;float&#39; object is not callable", "body": "<p>The problem is in <code>area = (1/2)(b1+b2)*h</code>.</p>\n\n<p>Python syntax differs from a mathematical, for one, () are used to pass parameters to a method call. However, (1/2) returns a float, hence what is interpreted is a call with the result of b1 + b2 as parameter to (1/2).</p>\n\n<p>You just need to insert <code>*</code> in the formula to make it right, i.e. change method invocation to multiplication (which is defined for type float).</p>\n\n<p>Hence, the fixed line would be <code>area = (1/2)*(b1+b2)*h</code>.</p>\n\n<p>Another issue, you would notice after fixing this is the actual type of all variables , i.e. <code>b1</code>, <code>b2</code>, and <code>h</code> being strings. To fix that you need to parse them as floats:</p>\n\n<pre><code>b1 = float(input(\"Enter the length of one of your bases: \"))\nb2 = float(input(\"Enter the length of one of your bases: \"))\nh = float(input(\"Enter the height: \"))\n</code></pre>\n\n<p>Python uses <a href=\"https://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow noreferrer\">duck typing</a>, hence problem such as those often surface in run time.</p>\n"}], "owner": {"reputation": 13, "user_id": 7376573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef501c654497dfa554a7b083aedc1cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/7376573/wolfgang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 1, "accepted_answer_id": 41474770, "answer_count": 1, "score": 0, "last_activity_date": 1483571421, "creation_date": 1483570971, "last_edit_date": 1483571088, "question_id": 41474697, "link": "https://stackoverflow.com/questions/41474697/i-keep-getting-float-object-is-not-callable", "title": "I keep getting &#39;float&#39; object is not callable", "body": "<p>I am new to coding and I have no idea how to use 'floats'.  Could someone please inform me where to use floats in this piece of code so that I will not receive the:</p>\n\n<pre><code>TypeError, 'float' object is not callable.  \n</code></pre>\n\n<p>my code so far:</p>\n\n<pre><code>def problem1_7():\n    b1 = input(\"Enter the length of one of your bases: \")\n    b2 = input(\"Enter the length of one of your bases: \")\n    h = input(\"Enter the height: \")\n\n    area = (1/2)(b1+b2)*h\n\n    print(\"The area of a trapezoid with bases\",b1,\"and\",b2,\"and height      \",h,\"is\",area)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1483580570, "post_id": 41474679, "comment_id": 70158139, "body": "First I see no pandas <code>merge</code> or python merge, only a list append. Second, if this works great, what better way do you need?"}, {"owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "edited": false, "score": 0, "creation_date": 1483590783, "post_id": 41474679, "comment_id": 70160368, "body": "if what you want are exact matches, you might consider using the <code>isin()</code> functionality (e.g. <code>db_cust_df.loc[~db_cust_df[&#39;email&#39;].isin(to_drop)]</code>)"}], "owner": {"reputation": 1631, "user_id": 1675909, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/01c2f960262afc76b149cdd786760753?s=128&d=identicon&r=PG", "display_name": "FunnyChef", "link": "https://stackoverflow.com/users/1675909/funnychef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483610234, "creation_date": 1483570868, "last_edit_date": 1483610234, "question_id": 41474679, "link": "https://stackoverflow.com/questions/41474679/is-it-possible-to-drop-a-list-of-lists-from-a-pandas-dataframe", "title": "Is it possible to drop a list of lists from a pandas Dataframe?", "body": "<p>I'm merging multiple data sources together and need to drop certain email addresses from the end result. </p>\n\n<p>I can drop individual strings from my data source:</p>\n\n<pre><code>to_drop = ['string 1', '@something.com']\ndrop_df = pd.DataFrame(db_cust_df[~db_cust_df['email'].str.contains\n                       ('|'.join(to_drop))])\n</code></pre>\n\n<p>I can drop a list of strings generated from a dataframe:</p>\n\n<pre><code>new_drop_list = db_var_df['email'].tolist()\nnew_df = pd.DataFrame(drop_df[~drop_cust_df['email'].str.contains\n                      ('|'.join(new_drop_list))])\n</code></pre>\n\n<p>How can I drop them all using the same command? Should I just merge the lists together? </p>\n\n<pre><code>to_drop = ['string 1', '@something.com']\nnew_drop_list = db_var_df['email'].tolist()\nall_drop = to_drop + new_drop\n</code></pre>\n\n<p>The above merge works great but I'm wondering if there is a better way? </p>\n"}, {"tags": ["python", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 7198778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72afd39638d833a7e8311e50d505ebe?s=128&d=identicon&r=PG", "display_name": "backpackcoder", "link": "https://stackoverflow.com/users/7198778/backpackcoder"}, "edited": false, "score": 0, "creation_date": 1483571236, "post_id": 41474703, "comment_id": 70155456, "body": "I would recommend selecting on the value.  It would seem less likely to be dynamic and will also result in clearer test code."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 3, "last_activity_date": 1483571001, "creation_date": 1483571001, "answer_id": 41474703, "question_id": 41474667, "link": "https://stackoverflow.com/questions/41474667/python-selenium-iterate-through-radio-buttons-that-have-dynamic-ids-and-select/41474703#41474703", "title": "python selenium: iterate through radio buttons that have dynamic ids and select", "body": "<p>You can always apply a partial match via a CSS selector or XPath:</p>\n\n<pre><code>driver.find_element_by_css_selector(\"input[id^=subj_received]\")\ndriver.find_element_by_css_selector(\"input[id*=subj_received]\")\n</code></pre>\n\n<p>where <code>^=</code> means \"starts with\", <code>*=</code> means \"contains\".</p>\n\n<p>If you want to check the <code>value</code> attribute:</p>\n\n<pre><code>driver.find_element_by_css_selector(\"input[value=received]\")\n</code></pre>\n\n<p>And you can check both:</p>\n\n<pre><code>driver.find_element_by_css_selector(\"input[value=received][id^=subj_received]\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5196010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-14WaLmjgunY/AAAAAAAAAAI/AAAAAAAAADQ/qGOi_1rgJ0w/photo.jpg?sz=128", "display_name": "Ken Villarruel", "link": "https://stackoverflow.com/users/5196010/ken-villarruel"}, "is_accepted": false, "score": 0, "last_activity_date": 1483648294, "creation_date": 1483648294, "answer_id": 41494154, "question_id": 41474667, "link": "https://stackoverflow.com/questions/41474667/python-selenium-iterate-through-radio-buttons-that-have-dynamic-ids-and-select/41494154#41494154", "title": "python selenium: iterate through radio buttons that have dynamic ids and select", "body": "<p>Input from alecxe helped me in finding a workable solution.</p>\n\n<p>I also had the developer add an integer value to the id which helped in locating the correct id.</p>\n\n<p>The following snippet works</p>\n\n<pre><code>button = self.driver.find_element_by_css_selector('[id*=\"2_subj_received_\"]')\nbutton.click()\n</code></pre>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 21, "user_id": 5196010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-14WaLmjgunY/AAAAAAAAAAI/AAAAAAAAADQ/qGOi_1rgJ0w/photo.jpg?sz=128", "display_name": "Ken Villarruel", "link": "https://stackoverflow.com/users/5196010/ken-villarruel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 41474703, "answer_count": 2, "score": 1, "last_activity_date": 1483648294, "creation_date": 1483570786, "question_id": 41474667, "link": "https://stackoverflow.com/questions/41474667/python-selenium-iterate-through-radio-buttons-that-have-dynamic-ids-and-select", "title": "python selenium: iterate through radio buttons that have dynamic ids and select", "body": "<p>Using python + Selenium Web Driver, I am attempting to automate selection of certain radio buttons for an insurance web site. Problem is that IDs of the radio buttons are dynamic.  For example, when a new insurance application is generated, a new page is generated and the radio buttons on the screen have dynamically created IDs (see HTML example below)</p>\n\n<pre><code>&lt;div class=\"data\"&gt;\n&lt;input type=\"radio\" id=\"subj_received_33965\" name=\"subj_status[33965]\" value=\"received\" class=\"radio form-element-left-radio\"&gt;&lt;label for=\"subj_received_33965\" class=\"label-right\"&gt;Received&lt;/label&gt;\n&lt;input type=\"radio\" id=\"subj_waived_33965\" name=\"subj_status[33965]\" value=\"waived\" class=\"radio form-element-left-radio multi-radio-line-spacer\" checked=\"\"&gt;&lt;label for=\"subj_waived_33965\" class=\"label-right\"&gt;Waived&lt;/label&gt;\n&lt;input type=\"radio\" id=\"subj_open_33965\" name=\"subj_status[33965]\" value=\"open\" class=\"radio form-element-left-radio multi-radio-line-spacer\"&gt;&lt;label for=\"subj_open_33965\" class=\"label-right\"&gt;Open&lt;/label&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So, using the above example, I want to click on radio button with id \"subj_received_33965\".  However, because the elements are dynamically generated, the id will be different at the next automation run (and the script will fail).</p>\n\n<p>What should I do to allow the script to consistently click ONLY the elements that begin with \"subj_received_\" on this page OR select only the elements that have the value = \"received\"?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 1, "creation_date": 1483571714, "post_id": 41474654, "comment_id": 70155623, "body": "can you do <code>import tensorflow</code> and <code>import inspect</code> and see what&#39;s the output of <code>inspect.getsourcefile(tensorflow)</code>"}, {"owner": {"reputation": 309, "user_id": 2446538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3321c84e1d5d24458b810f68d91d5176?s=128&d=identicon&r=PG", "display_name": "Mojo Jojo", "link": "https://stackoverflow.com/users/2446538/mojo-jojo"}, "reply_to_user": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1483573456, "post_id": 41474654, "comment_id": 70156228, "body": "/home/mojo/.local/lib/python2.7/site-packages/tensorflow/__i&zwnj;&#8203;nit__.py"}, {"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1483579100, "post_id": 41474654, "comment_id": 70157777, "body": "Perhaps the issue is in the <code>unet</code> module? If you add the code that Yaroslav suggested to the file containing the <code>unet.Unet</code> implementation, do you get a different result?"}, {"owner": {"reputation": 309, "user_id": 2446538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3321c84e1d5d24458b810f68d91d5176?s=128&d=identicon&r=PG", "display_name": "Mojo Jojo", "link": "https://stackoverflow.com/users/2446538/mojo-jojo"}, "edited": false, "score": 0, "creation_date": 1483586211, "post_id": 41474654, "comment_id": 70159398, "body": "Yes the result is different and is /home/mojo/.local/lib/python2.7/site-packages/tf_unet-0.1.0-&zwnj;&#8203;py2.7.egg/tf_unet/un&zwnj;&#8203;et.py"}, {"owner": {"reputation": 21839, "user_id": 6521116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U2zHq.jpg?s=128&g=1", "display_name": "LF00", "link": "https://stackoverflow.com/users/6521116/lf00"}, "edited": false, "score": 0, "creation_date": 1530421476, "post_id": 41474654, "comment_id": 89226483, "body": "<a href=\"https://stackoverflow.com/a/51120550/6521116\">AttributeError: module &#39;tensorflow&#39; has no attribute &#39;reset_default_graph&#39;</a>"}], "owner": {"reputation": 309, "user_id": 2446538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3321c84e1d5d24458b810f68d91d5176?s=128&d=identicon&r=PG", "display_name": "Mojo Jojo", "link": "https://stackoverflow.com/users/2446538/mojo-jojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1519, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1483570729, "creation_date": 1483570729, "question_id": 41474654, "link": "https://stackoverflow.com/questions/41474654/attributeerror-module-object-has-no-attribute-reset-default-graph", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;reset_default_graph&#39;", "body": "<p>While using U-Net in tensorflow, using the command:\n <code>net = unet.Unet(nx=128, ny=128, layers=3, features_root=64, channels=1, n_class=2)</code> gives attribute error <code>AttributeError: 'module' object has no attribute 'reset_default_graph'</code> . There is no tensorflow.py file which is being imported by default as in few similar issues I came across.</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["python", "python-2.7", "pyqt", "pyqt4"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1483576214, "post_id": 41474647, "comment_id": 70157018, "body": "Does this have to work in PyQt4, or could you use PyQt5? I think you may need the latter to get this to work on Windows. (I assume you&#39;re asking about embedding external windows in your own application)."}, {"owner": {"reputation": 109, "user_id": 7161079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eeaefd0cc7ffbc2540881cdc2107089?s=128&d=identicon&r=PG&f=1", "display_name": "SDE", "link": "https://stackoverflow.com/users/7161079/sde"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1483617326, "post_id": 41474647, "comment_id": 70173661, "body": "How can i make it with PyQt5? I want to include the cmd.exe there. In linux i had done this with xterm and fit it into a qwidget successfully. But in windows this doesnt work :(. Thx in advance."}, {"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1483623127, "post_id": 41474647, "comment_id": 70177793, "body": "What do you mean by run an exe inside a python gui?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1483640321, "post_id": 41474647, "comment_id": 70189774, "body": "@SDE. There&#39;s <a href=\"https://doc.qt.io/qt-5/qwindow.html#fromWinId\" rel=\"nofollow noreferrer\">QWindow.fromWinId</a> and <a href=\"https://doc.qt.io/qt-5/qwidget.html#createWindowContainer\" rel=\"nofollow noreferrer\">QWidget.createWindowContainer</a>. However, I tried it on Linux and could not get it to work."}, {"owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 0, "creation_date": 1483681456, "post_id": 41474647, "comment_id": 70204948, "body": "@SDE What does embedding another app&#39;s window in your app provide, over just starting the other app as a separate process?"}, {"owner": {"reputation": 109, "user_id": 7161079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eeaefd0cc7ffbc2540881cdc2107089?s=128&d=identicon&r=PG&f=1", "display_name": "SDE", "link": "https://stackoverflow.com/users/7161079/sde"}, "reply_to_user": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 0, "creation_date": 1484132254, "post_id": 41474647, "comment_id": 70381531, "body": "@Schollii Yes. It should work like the youtube link, which i have post above. I have now change to pyqt5."}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1594407213, "post_id": 41474647, "comment_id": 111126371, "body": "@SDE would you have a full solution example to this question for me? I am aiming to achieve the same thing however I can&#39;t find the complete solution"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 9304804, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rg4HjQ3XNtU/AAAAAAAAAAI/AAAAAAAAAVQ/6zjuospqa7I/photo.jpg?sz=128", "display_name": "Sid133", "link": "https://stackoverflow.com/users/9304804/sid133"}, "edited": false, "score": 0, "creation_date": 1579773561, "post_id": 43905685, "comment_id": 105881565, "body": "Can this be extended to work on Linux, any ideas or suggestions?"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1594407311, "post_id": 43905685, "comment_id": 111126420, "body": "Could you provide the full code that runs this example? Thank sir."}], "tags": [], "owner": {"reputation": 81, "user_id": 7994891, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9190895a43e804a61e91ace92a2b0aca?s=128&d=identicon&r=PG", "display_name": "chanbiao", "link": "https://stackoverflow.com/users/7994891/chanbiao"}, "is_accepted": false, "score": 8, "last_activity_date": 1589394974, "last_edit_date": 1589394974, "creation_date": 1494470846, "answer_id": 43905685, "question_id": 41474647, "link": "https://stackoverflow.com/questions/41474647/run-a-foreign-exe-inside-a-python-gui-pyqt/43905685#43905685", "title": "Run a foreign exe inside a Python GUI (PyQt)", "body": "<pre><code>import subprocess\nimport time\nimport win32gui\n\n...\n\ndef initUI(self):\n    # create a process\n    exePath = \"C:\\\\Windows\\\\system32\\\\calc.exe\"\n    subprocess.Popen(exePath)\n    hwnd = win32gui.FindWindowEx(0, 0, \"CalcFrame\", \"\u8ba1\u7b97\u5668\")\n    time.sleep(0.05)\n    window = QWindow.fromWinId(hwnd)\n    self.createWindowContainer(window, self)\n    self.setGeometry(500, 500, 450, 400)\n    self.setWindowTitle('File dialog')\n    self.show()\n\n...\n</code></pre>\n\n<ul>\n<li>01 create a process, run your exe</li>\n<li>02 use spy++ to get hwnd of the exe</li>\n<li>03 create QWindow from hwnd</li>\n<li>04 create window container</li>\n</ul>\n\n<p>Result:</p>\n\n<p>lose exe'menu</p>\n\n<p><a href=\"https://i.stack.imgur.com/W5xtF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W5xtF.png\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 109, "user_id": 7161079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eeaefd0cc7ffbc2540881cdc2107089?s=128&d=identicon&r=PG&f=1", "display_name": "SDE", "link": "https://stackoverflow.com/users/7161079/sde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4402, "favorite_count": 3, "answer_count": 1, "score": 7, "last_activity_date": 1589394974, "creation_date": 1483570699, "question_id": 41474647, "link": "https://stackoverflow.com/questions/41474647/run-a-foreign-exe-inside-a-python-gui-pyqt", "title": "Run a foreign exe inside a Python GUI (PyQt)", "body": "<p>I want to run an exe (for example calc.exe or cmd.exe) inside a python gui (python 2.7 | Windows | PyQt).\nHave anybody an idea how can i do this? \n(something like that : <a href=\"https://www.youtube.com/watch?v=N6GWgxEvibE\" rel=\"noreferrer\">https://www.youtube.com/watch?v=N6GWgxEvibE</a>)</p>\n\n<p>Thanks all in advance.</p>\n"}, {"tags": ["python", "python-2.7", "hdf5", "h5py"], "comments": [{"owner": {"reputation": 14401, "user_id": 1730261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/m57hO.jpg?s=128&g=1", "display_name": "Rushy Panchal", "link": "https://stackoverflow.com/users/1730261/rushy-panchal"}, "edited": false, "score": 1, "creation_date": 1483572401, "post_id": 41474634, "comment_id": 70155854, "body": "Please don&#39;t post images of your code or output. Paste the code &amp; output directly, so it&#39;s much easier to work with."}, {"owner": {"reputation": 313, "user_id": 5137645, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-WkFw0lKBNz8/AAAAAAAAAAI/AAAAAAAAAAA/R5DX9sNmpSE/photo.jpg?sz=128", "display_name": "Nikita Belooussov", "link": "https://stackoverflow.com/users/5137645/nikita-belooussov"}, "reply_to_user": {"reputation": 14401, "user_id": 1730261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/m57hO.jpg?s=128&g=1", "display_name": "Rushy Panchal", "link": "https://stackoverflow.com/users/1730261/rushy-panchal"}, "edited": false, "score": 0, "creation_date": 1483572843, "post_id": 41474634, "comment_id": 70156034, "body": "Sorry I hope this makes it better @RushyPanchal"}, {"owner": {"reputation": 313, "user_id": 5137645, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-WkFw0lKBNz8/AAAAAAAAAAI/AAAAAAAAAAA/R5DX9sNmpSE/photo.jpg?sz=128", "display_name": "Nikita Belooussov", "link": "https://stackoverflow.com/users/5137645/nikita-belooussov"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1483573021, "post_id": 41474634, "comment_id": 70156088, "body": "Sorry I hope this makes it better @RadLexus"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1483573142, "post_id": 41474634, "comment_id": 70156121, "body": "Try putting and <code>r</code> in front of your file name;  <code>r&quot;C:\\User</code>."}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 1, "creation_date": 1483573588, "post_id": 41474634, "comment_id": 70156262, "body": "Avoid backslashes in paths like the plague. Python will happily convert forward-slashes (<code>&#47;</code>) to backslashes on Windows for you."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 5137645, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-WkFw0lKBNz8/AAAAAAAAAAI/AAAAAAAAAAA/R5DX9sNmpSE/photo.jpg?sz=128", "display_name": "Nikita Belooussov", "link": "https://stackoverflow.com/users/5137645/nikita-belooussov"}, "edited": false, "score": 0, "creation_date": 1483574525, "post_id": 41475150, "comment_id": 70156520, "body": "Thanks that got rid UnicodeDecodeError and some of the other lines that the terminal was displaying. Ill edit it so that you can see what it shows now. I am still unable to open the file."}], "tags": [], "owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "is_accepted": true, "score": 2, "last_activity_date": 1483573808, "creation_date": 1483573808, "answer_id": 41475150, "question_id": 41474634, "link": "https://stackoverflow.com/questions/41474634/python-unable-to-open-a-h5-file/41475150#41475150", "title": "Python unable to open a .h5 file", "body": "<p>Your string:</p>\n\n<pre><code>path = \"C:\\Users\\312001\\m2020\\data\\20170104_145626\\doPoint_20170104_150016\\dataset_XMIT    data_20170104_150020.h5\"\n</code></pre>\n\n<p>is full of broken/illegal <a href=\"https://docs.python.org/2/reference/lexical_analysis.html#string-literals\" rel=\"nofollow noreferrer\">escapes</a> (thankfully they will be turned into SyntaxErrors, though you are using Python 2), and some that actually <em>do</em> work, so Python thinks <code>path</code> is really equal to: <code>'C:\\\\Users\\xca001\\\\m2020\\\\data\\x8170104_145626\\\\doPoint_20170104_150016\\\\dataset_XMIT    data_20170104_150020.h5'</code> (note those <code>\\x##</code>'s).</p>\n\n<p>Your options:</p>\n\n<ol>\n<li>Use a <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals\" rel=\"nofollow noreferrer\"><em>raw</em> string</a> by prefixing the string literal with <code>r</code></li>\n<li>Don't use backslashes for paths. Python will convert forward slashes to backslashes for Windows paths.</li>\n<li>Double-backslash.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 5137645, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-WkFw0lKBNz8/AAAAAAAAAAI/AAAAAAAAAAA/R5DX9sNmpSE/photo.jpg?sz=128", "display_name": "Nikita Belooussov", "link": "https://stackoverflow.com/users/5137645/nikita-belooussov"}, "is_accepted": false, "score": 0, "last_activity_date": 1483631658, "creation_date": 1483631658, "answer_id": 41489283, "question_id": 41474634, "link": "https://stackoverflow.com/questions/41474634/python-unable-to-open-a-h5-file/41489283#41489283", "title": "Python unable to open a .h5 file", "body": "<p>The answer that @NickT posted fixed the orginal problem I had. The problem that is shown in the new version is due to the hd5 folder names in the hd5 file not matching the folder names that the code provided.</p>\n"}], "owner": {"reputation": 313, "user_id": 5137645, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-WkFw0lKBNz8/AAAAAAAAAAI/AAAAAAAAAAA/R5DX9sNmpSE/photo.jpg?sz=128", "display_name": "Nikita Belooussov", "link": "https://stackoverflow.com/users/5137645/nikita-belooussov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5292, "favorite_count": 1, "accepted_answer_id": 41475150, "answer_count": 2, "score": 0, "last_activity_date": 1483631658, "creation_date": 1483570606, "last_edit_date": 1483574937, "question_id": 41474634, "link": "https://stackoverflow.com/questions/41474634/python-unable-to-open-a-h5-file", "title": "Python unable to open a .h5 file", "body": "<p>I am trying to open a HDF5 file in order to read it with python, so that I can do more things with it later. There is an error when I run the program to read the file. The program is below:</p>\n\n<pre><code>import h5py    # HDF5 support\nimport numpy\n\nfileName = \"C:/.../file.h5\"\nf = h5py.File(fileName,  \"r\")\nfor item in f.attrs.keys():\n    print item + \":\", f.attrs[item]\nmr = f['/entry/mr_scan/mr']\ni00 = f['/entry/mr_scan/I00']\nprint \"%s\\t%s\\t%s\" % (\"#\", \"mr\", \"I00\")\nfor i in range(len(mr)):\n    print \"%d\\t%g\\t%d\" % (i, mr[i], i00[i])\nf.close()\n</code></pre>\n\n<p>If I run the program I end up seeing this error:</p>\n\n<pre><code>Traceback (most recent call last):\n File \"TestHD5.py\", line 8, in &lt;module&gt;\n    mr = f['/entry/mr_scan/mr']\n File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (C:\\aroot\\work\\h5py\\_objects.c:2587)\n File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (C:\\aroot\\work\\h5py\\_objects.c:2546)\n File \"C:\\programs\\Python27\\lib\\site-packages\\h5py\\_hl\\group.py\", line 166, in __getitem__\n    oid = h5o.open(self.id, self._e(name), lapl=self._lapl)\n File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (C:\\aroot\\work\\h5py\\_objects.c:2587)\n File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (C:\\aroot\\work\\h5py\\_objects.c:2546)\n File \"h5py\\h5o.pyx\", line 190, in h5py.h5o.open (C:\\aroot\\work\\h5py\\h5o.c:3417)\nKeyError: 'Unable to open object (Component not found)'\n</code></pre>\n\n<p>Am I just missing some modules to read the file, or is this something else. It will open the .h5 file if I use an h5 file veiwer program. Thank you</p>\n"}, {"tags": ["python", "python-3.x", "sorting"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1483570656, "post_id": 41474585, "comment_id": 70155208, "body": "use <code>ls.sort(key=functools.cmp_to_key(func))</code>. <a href=\"https://docs.python.org/3/library/functions.html#sorted\" rel=\"nofollow noreferrer\">sorted docs</a> (<code>list.sort</code> refers to that) and <a href=\"https://docs.python.org/3/library/functools.html#functools.cmp_to_key\" rel=\"nofollow noreferrer\">functools docs</a>"}, {"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1483570672, "post_id": 41474585, "comment_id": 70155213, "body": "Thank you for your response. I tried now, but I received the message: &quot;NameError: name &#39;functools&#39; is not defined&quot;"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1483570935, "post_id": 41474585, "comment_id": 70155324, "body": "@PaulRooney: that&#39;s overkill for this sort."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1483571046, "post_id": 41474585, "comment_id": 70155374, "body": "true, I wasn&#39;t really looking at his code, just looking at how he could use what he had."}, {"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483572225, "post_id": 41474585, "comment_id": 70155789, "body": "I added the <code>import functools</code> line and now I got the <code>NameError: name &#39;cmp&#39; is not defined</code> again. Somehow the conversion doesn&#39;t work yet."}, {"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1483604256, "post_id": 41474585, "comment_id": 70165503, "body": "Thank you @Paul. I think, my latest problem was the same as below: <a href=\"http://eblong.com/zarf/ftp/rpvote.py\" rel=\"nofollow noreferrer\">the script</a> called the <code>func</code> function later again, and the <code>cmp</code> didn&#39;t work there.Now, Martijn&#39;s suggestion solved this, too. Sorry, that I didn&#39;t provide the entire code at the beginning."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483571321, "post_id": 41474686, "comment_id": 70155481, "body": "hmm. I received an &quot;IndexError: string index out of range&quot; message for this code..."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483572376, "post_id": 41474686, "comment_id": 70155848, "body": "@Sam updated, I had missed your code is sorting based on an external mapping <code>res</code>."}, {"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483572764, "post_id": 41474686, "comment_id": 70156007, "body": "Dear @Martijn Pieters : sorry, I didn&#39;t realize you edited your answer. Unfortunately, I am at the same point as before: &quot;NameError: name &#39;cmp&#39; is not defined&quot; points to the line with <code>val = cmp((w2,t2), (w1,t1))</code> :("}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483573677, "post_id": 41474686, "comment_id": 70156294, "body": "@Sam my answer doesn&#39;t use <code>cmp</code> at all. Remove all of <code>func</code>."}, {"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483574299, "post_id": 41474686, "comment_id": 70156467, "body": "Ah, I see :) The problem is, that the program tries to call the <code>func</code> function later, and after I removed, I receive a &quot;NameError: name &#39;func&#39; is not defined&quot; error message."}, {"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483574670, "post_id": 41474686, "comment_id": 70156556, "body": "I think it is easier to help me if you know the full code. I tried to use <a href=\"http://eblong.com/zarf/ftp/rpvote.py\" rel=\"nofollow noreferrer\">this code</a> after I converted using the 2to3.py"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483575936, "post_id": 41474686, "comment_id": 70156936, "body": "@Sam right, the code is merely reusing <code>func()</code> later on to test if <code>lastkey</code> would sort differently. Use <code>(res[lastkey][0], res[lastkey][2]) != (res[key][0], res[key][2])</code> in its place."}, {"owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "edited": false, "score": 0, "creation_date": 1483603966, "post_id": 41474686, "comment_id": 70165380, "body": "Thank you. This replacement solved my problem. Best,"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 3, "last_activity_date": 1483572328, "last_edit_date": 1483572328, "creation_date": 1483570887, "answer_id": 41474686, "question_id": 41474585, "link": "https://stackoverflow.com/questions/41474585/sorting-function-in-python-3/41474686#41474686", "title": "Sorting function in Python 3", "body": "<p>Just return the first and last element of each tuple you are sorting, but reverse the result:</p>\n\n<pre><code>ls.sort(key=lambda t: (res[t][0], res[t][2]), reverse=True)\n</code></pre>\n\n<p>That's exactly what the <code>cmp</code> version was comparing on, but in reverse, and the <code>sort()</code> method will do so too.</p>\n"}], "owner": {"reputation": 23, "user_id": 7376548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58a2acea5eadc80ec3ff6cdb49562a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7376548/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 41474686, "answer_count": 1, "score": 2, "last_activity_date": 1483651656, "creation_date": 1483570360, "last_edit_date": 1483651656, "question_id": 41474585, "link": "https://stackoverflow.com/questions/41474585/sorting-function-in-python-3", "title": "Sorting function in Python 3", "body": "<p>I would like to use an older python script with <code>cmp</code> function, but it doesn't work in Python 3. It raises an error:</p>\n\n<pre><code>TypeError: must use keyword argument for key function \n</code></pre>\n\n<p>I know that I should avoid the <code>cmp</code> function and use the key function instead, but I don't know how (I don't know Python and I am not a programmer). Could you please help me to change the following part according to <a href=\"https://docs.python.org/3/howto/sorting.html\" rel=\"nofollow noreferrer\">this</a>?</p>\n\n<pre><code>ls = list(self.entries)\n\ndef func(key1, key2):\n    (w1,l1,t1) = res[key1]\n    (w2,l2,t2) = res[key2]\n    val = cmp((w2,t2), (w1,t1))\n    return val\nls.sort(func)\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "python-2.7", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 5173924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bbbce2bb70dea81aa4260a1919fb0c79?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey Negiar", "link": "https://stackoverflow.com/users/5173924/geoffrey-negiar"}, "edited": false, "score": 0, "creation_date": 1491938836, "post_id": 43203728, "comment_id": 73772324, "body": "But then, it won&#39;t use a conda/virtual env, it will only work with the system python version."}], "tags": [], "owner": {"reputation": 23, "user_id": 5599225, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cy2If290PUs/AAAAAAAAAAI/AAAAAAAAAVc/5q_V0e1Gi74/photo.jpg?sz=128", "display_name": "Abhilash V J", "link": "https://stackoverflow.com/users/5599225/abhilash-v-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1491299275, "creation_date": 1491299275, "answer_id": 43203728, "question_id": 41474573, "link": "https://stackoverflow.com/questions/41474573/cant-build-opencv3-1-for-python-2-7/43203728#43203728", "title": "Can&#39;t build OpenCV3.1 for Python 2.7", "body": "<p><a href=\"https://realpython.com/blog/python/face-detection-in-python-using-a-webcam/\" rel=\"nofollow noreferrer\">https://realpython.com/blog/python/face-detection-in-python-using-a-webcam/</a></p>\n\n<p>If you follow this link and  you can try running this code</p>\n\n<pre><code>git clone https://github.com/shantnu/Webcam-Face-Detect.git\ncd  cd Webcam-Face-Detect/\nsudo python webcam_cv3.py haarcascade_frontalface_default.xml\n</code></pre>\n\n<p>typing the sudo python did the trick for me , i was getting errors when using just python.So try running with sudo.</p>\n"}, {"tags": [], "owner": {"reputation": 942, "user_id": 2992789, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-4u0SelqQsKc/AAAAAAAAAAI/AAAAAAAAAD0/AMZuuclNpBENUXAVmHApflMWfka-QeQxZQ/s96-c/photo.jpg?sz=128", "display_name": "daniel_hck", "link": "https://stackoverflow.com/users/2992789/daniel-hck"}, "is_accepted": false, "score": 0, "last_activity_date": 1491361040, "creation_date": 1491361040, "answer_id": 43221010, "question_id": 41474573, "link": "https://stackoverflow.com/questions/41474573/cant-build-opencv3-1-for-python-2-7/43221010#43221010", "title": "Can&#39;t build OpenCV3.1 for Python 2.7", "body": "<p>This error is nothing to do with  libgtk2.0-dev and pkg-config. Probably both are installed, but you still get the same error everytime you try to run make. </p>\n\n<p>This often happen when you have tried to install opencv from different sources (for exemple opencv-python, official python, etc). Try to uninstall all opencv related packages (specially if they were not the official one), and start over. I even had to re-install ubuntu once. </p>\n\n<p>The instructions from pyimagesearch work well. </p>\n"}], "owner": {"reputation": 578, "user_id": 5173924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bbbce2bb70dea81aa4260a1919fb0c79?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey Negiar", "link": "https://stackoverflow.com/users/5173924/geoffrey-negiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 648, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491361040, "creation_date": 1483570314, "last_edit_date": 1483574645, "question_id": 41474573, "link": "https://stackoverflow.com/questions/41474573/cant-build-opencv3-1-for-python-2-7", "title": "Can&#39;t build OpenCV3.1 for Python 2.7", "body": "<p>I downloaded opencv and opencv contrib files, following the tutorial here: <a href=\"http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/\" rel=\"nofollow noreferrer\">http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/</a></p>\n\n<p>I want to install OpenCV3 for Python2.7 in a Conda environment called obj_recog. My OS is Ubuntu 16.04.\nI then tried running the Cmake with different options, finally settling on this:</p>\n\n<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local \\\n-D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON \\\n-D WITH_QT=ON -D WITH_GTK=ON -D WITH_OPENGL=ON -D WITH_CUDA=ON \\\n-D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-8.0 -D WITH_FFMPEG=ON \\\n-D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib-3.1.0/modules \\\n-D PYTHON_EXECUTABLE=~/anaconda3/envs/obj_recog/bin/python \\\n-D INSTALL_PYTHON_EXAMPLES=ON -D INSTALL_C_EXAMPLES=OFF \\\n-D BUILD_EXAMPLES=ON -D WITH_CUBLAS=ON ..\n</code></pre>\n\n<p>Here is the output I get:</p>\n\n<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D WITH_QT=ON -D WITH_GTK=ON -D WITH_OPENGL=ON -D WITH_CUDA=ON -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-8.0 -D WITH_FFMPEG=ON -D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib-3.1.0/modules -D PYTHON_EXECUTABLE=~/anaconda3/envs/obj_recog/bin/python -D INSTALL_PYTHON_EXAMPLES=ON -D INSTALL_C_EXAMPLES=OFF -D BUILD_EXAMPLES=ON -D WITH_CUBLAS=ON ..\n-- The CXX compiler identification is GNU 5.4.0\n-- The C compiler identification is GNU 5.4.0\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Detected version of GNU GCC: 54 (504)\n-- Performing Test HAVE_CXX_FSIGNED_CHAR\n-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success\n-- Performing Test HAVE_C_FSIGNED_CHAR\n-- Performing Test HAVE_C_FSIGNED_CHAR - Success\n-- Performing Test HAVE_CXX_W\n-- Performing Test HAVE_CXX_W - Success\n-- Performing Test HAVE_C_W\n-- Performing Test HAVE_C_W - Success\n-- Performing Test HAVE_CXX_WALL\n-- Performing Test HAVE_CXX_WALL - Success\n-- Performing Test HAVE_C_WALL\n-- Performing Test HAVE_C_WALL - Success\n-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE\n-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success\n-- Performing Test HAVE_C_WERROR_RETURN_TYPE\n-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success\n-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR\n-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR - Success\n-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR\n-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR - Success\n-- Performing Test HAVE_CXX_WERROR_ADDRESS\n-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success\n-- Performing Test HAVE_C_WERROR_ADDRESS\n-- Performing Test HAVE_C_WERROR_ADDRESS - Success\n-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT\n-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success\n-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT\n-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success\n-- Performing Test HAVE_CXX_WFORMAT\n-- Performing Test HAVE_CXX_WFORMAT - Success\n-- Performing Test HAVE_C_WFORMAT\n-- Performing Test HAVE_C_WFORMAT - Success\n-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY\n-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success\n-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY\n-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success\n-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS\n-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success\n-- Performing Test HAVE_C_WMISSING_DECLARATIONS\n-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success\n-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES\n-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed\n-- Performing Test HAVE_C_WMISSING_PROTOTYPES\n-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success\n-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES\n-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed\n-- Performing Test HAVE_C_WSTRICT_PROTOTYPES\n-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success\n-- Performing Test HAVE_CXX_WUNDEF\n-- Performing Test HAVE_CXX_WUNDEF - Success\n-- Performing Test HAVE_C_WUNDEF\n-- Performing Test HAVE_C_WUNDEF - Success\n-- Performing Test HAVE_CXX_WINIT_SELF\n-- Performing Test HAVE_CXX_WINIT_SELF - Success\n-- Performing Test HAVE_C_WINIT_SELF\n-- Performing Test HAVE_C_WINIT_SELF - Success\n-- Performing Test HAVE_CXX_WPOINTER_ARITH\n-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success\n-- Performing Test HAVE_C_WPOINTER_ARITH\n-- Performing Test HAVE_C_WPOINTER_ARITH - Success\n-- Performing Test HAVE_CXX_WSHADOW\n-- Performing Test HAVE_CXX_WSHADOW - Success\n-- Performing Test HAVE_C_WSHADOW\n-- Performing Test HAVE_C_WSHADOW - Success\n-- Performing Test HAVE_CXX_WSIGN_PROMO\n-- Performing Test HAVE_CXX_WSIGN_PROMO - Success\n-- Performing Test HAVE_C_WSIGN_PROMO\n-- Performing Test HAVE_C_WSIGN_PROMO - Failed\n-- Performing Test HAVE_CXX_WNO_NARROWING\n-- Performing Test HAVE_CXX_WNO_NARROWING - Success\n-- Performing Test HAVE_C_WNO_NARROWING\n-- Performing Test HAVE_C_WNO_NARROWING - Success\n-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR\n-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success\n-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR\n-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed\n-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS\n-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed\n-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS\n-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed\n-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION\n-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success\n-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION\n-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success\n-- Performing Test HAVE_CXX_WNO_LONG_LONG\n-- Performing Test HAVE_CXX_WNO_LONG_LONG - Success\n-- Performing Test HAVE_C_WNO_LONG_LONG\n-- Performing Test HAVE_C_WNO_LONG_LONG - Success\n-- Performing Test HAVE_CXX_PTHREAD\n-- Performing Test HAVE_CXX_PTHREAD - Success\n-- Performing Test HAVE_C_PTHREAD\n-- Performing Test HAVE_C_PTHREAD - Success\n-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER\n-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success\n-- Performing Test HAVE_C_FOMIT_FRAME_POINTER\n-- Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success\n-- Performing Test HAVE_CXX_MSSE\n-- Performing Test HAVE_CXX_MSSE - Success\n-- Performing Test HAVE_C_MSSE\n-- Performing Test HAVE_C_MSSE - Success\n-- Performing Test HAVE_CXX_MSSE2\n-- Performing Test HAVE_CXX_MSSE2 - Success\n-- Performing Test HAVE_C_MSSE2\n-- Performing Test HAVE_C_MSSE2 - Success\n-- Performing Test HAVE_CXX_MNO_AVX\n-- Performing Test HAVE_CXX_MNO_AVX - Success\n-- Performing Test HAVE_C_MNO_AVX\n-- Performing Test HAVE_C_MNO_AVX - Success\n-- Performing Test HAVE_CXX_MSSE3\n-- Performing Test HAVE_CXX_MSSE3 - Success\n-- Performing Test HAVE_C_MSSE3\n-- Performing Test HAVE_C_MSSE3 - Success\n-- Performing Test HAVE_CXX_MNO_SSSE3\n-- Performing Test HAVE_CXX_MNO_SSSE3 - Success\n-- Performing Test HAVE_C_MNO_SSSE3\n-- Performing Test HAVE_C_MNO_SSSE3 - Success\n-- Performing Test HAVE_CXX_MNO_SSE4_1\n-- Performing Test HAVE_CXX_MNO_SSE4_1 - Success\n-- Performing Test HAVE_C_MNO_SSE4_1\n-- Performing Test HAVE_C_MNO_SSE4_1 - Success\n-- Performing Test HAVE_CXX_MNO_SSE4_2\n-- Performing Test HAVE_CXX_MNO_SSE4_2 - Success\n-- Performing Test HAVE_C_MNO_SSE4_2\n-- Performing Test HAVE_C_MNO_SSE4_2 - Success\n-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS\n-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success\n-- Performing Test HAVE_C_FFUNCTION_SECTIONS\n-- Performing Test HAVE_C_FFUNCTION_SECTIONS - Success\n-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN\n-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN - Success\n-- Performing Test HAVE_C_FVISIBILITY_HIDDEN\n-- Performing Test HAVE_C_FVISIBILITY_HIDDEN - Success\n-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN\n-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN - Success\n-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN\n-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN - Failed\n-- Looking for pthread.h\n-- Looking for pthread.h - found\n-- Check if the system is big endian\n-- Searching 16 bit integer\n-- Looking for sys/types.h\n-- Looking for sys/types.h - found\n-- Looking for stdint.h\n-- Looking for stdint.h - found\n-- Looking for stddef.h\n-- Looking for stddef.h - found\n-- Check size of unsigned short\n-- Check size of unsigned short - done\n-- Using unsigned short\n-- Check if the system is big endian - little endian\n-- Found ZLIB: /home/geoff/anaconda3/envs/obj_recog/lib/libz.so (found suitable version \"1.2.8\", minimum required is \"1.2.3\") \n-- Found TIFF: /home/geoff/anaconda3/envs/obj_recog/lib/libtiff.so (found version \"4.0.6\") \n-- Found JPEG: /home/geoff/anaconda3/envs/obj_recog/lib/libjpeg.so  \n-- Found WebP: /usr/lib/x86_64-linux-gnu/libwebp.so  \n-- Found Jasper: /usr/lib/x86_64-linux-gnu/libjasper.so (found version \"1.900.1\") \n-- Found ZLIB: /home/geoff/anaconda3/envs/obj_recog/lib/libz.so (found version \"1.2.8\") \n-- Found PNG: /home/geoff/anaconda3/envs/obj_recog/lib/libpng.so (found version \"1.6.22\") \n-- Looking for /home/geoff/anaconda3/envs/obj_recog/include/libpng/png.h\n-- Looking for /home/geoff/anaconda3/envs/obj_recog/include/libpng/png.h - not found\n-- Looking for semaphore.h\n-- Looking for semaphore.h - found\n-- Performing Test HAVE_CXX_WNO_SHADOW\n-- Performing Test HAVE_CXX_WNO_SHADOW - Success\n-- Performing Test HAVE_CXX_WNO_UNUSED\n-- Performing Test HAVE_CXX_WNO_UNUSED - Success\n-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE\n-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE - Success\n-- Performing Test HAVE_CXX_WNO_UNDEF\n-- Performing Test HAVE_CXX_WNO_UNDEF - Success\n-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS\n-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success\n-- Performing Test HAVE_CXX_WNO_UNINITIALIZED\n-- Performing Test HAVE_CXX_WNO_UNINITIALIZED - Success\n-- Performing Test HAVE_CXX_WNO_SWITCH\n-- Performing Test HAVE_CXX_WNO_SWITCH - Success\n-- Performing Test HAVE_CXX_WNO_PARENTHESES\n-- Performing Test HAVE_CXX_WNO_PARENTHESES - Success\n-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS\n-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS - Success\n-- Performing Test HAVE_CXX_WNO_EXTRA\n-- Performing Test HAVE_CXX_WNO_EXTRA - Success\n-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS\n-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success\n-- Checking for module 'gstreamer-base-1.0'\n--   No package 'gstreamer-base-1.0' found\n-- Checking for module 'gstreamer-video-1.0'\n--   No package 'gstreamer-video-1.0' found\n-- Checking for module 'gstreamer-app-1.0'\n--   No package 'gstreamer-app-1.0' found\n-- Checking for module 'gstreamer-riff-1.0'\n--   No package 'gstreamer-riff-1.0' found\n-- Checking for module 'gstreamer-pbutils-1.0'\n--   No package 'gstreamer-pbutils-1.0' found\n-- Checking for module 'gstreamer-base-0.10'\n--   No package 'gstreamer-base-0.10' found\n-- Checking for module 'gstreamer-video-0.10'\n--   No package 'gstreamer-video-0.10' found\n-- Checking for module 'gstreamer-app-0.10'\n--   No package 'gstreamer-app-0.10' found\n-- Checking for module 'gstreamer-riff-0.10'\n--   No package 'gstreamer-riff-0.10' found\n-- Checking for module 'gstreamer-pbutils-0.10'\n--   No package 'gstreamer-pbutils-0.10' found\n-- Checking for module 'libdc1394-2'\n--   Found libdc1394-2, version 2.2.4\n-- Checking for module 'libv4l1'\n--   Found libv4l1, version 1.10.0\n-- Checking for module 'libv4l2'\n--   Found libv4l2, version 1.10.0\n-- Looking for linux/videodev.h\n-- Looking for linux/videodev.h - not found\n-- Looking for linux/videodev2.h\n-- Looking for linux/videodev2.h - found\n-- Looking for sys/videoio.h\n-- Looking for sys/videoio.h - not found\n-- Checking for module 'libavcodec'\n--   Found libavcodec, version 57.64.101\n-- Checking for module 'libavformat'\n--   Found libavformat, version 57.56.100\n-- Checking for module 'libavutil'\n--   Found libavutil, version 55.34.100\n-- Checking for module 'libswscale'\n--   Found libswscale, version 4.2.100\n-- Checking for module 'libavresample'\n--   No package 'libavresample' found\n-- Looking for libavformat/avformat.h\n-- Looking for libavformat/avformat.h - found\n-- Looking for ffmpeg/avformat.h\n-- Looking for ffmpeg/avformat.h - not found\n-- Checking for module 'libgphoto2'\n--   No package 'libgphoto2' found\n-- Checking for module 'tbb'\n--   Found tbb, version 4.4~20151115\n-- ICV: Removing previous unpacked package: /home/geoff/opencv-3.1.0/3rdparty/ippicv/unpack\n-- ICV: Unpacking ippicv_linux_20151201.tgz to /home/geoff/opencv-3.1.0/3rdparty/ippicv/unpack...\n-- ICV: Package successfully downloaded\n-- found IPP (ICV version): 9.0.1 [9.0.1]\n-- at: /home/geoff/opencv-3.1.0/3rdparty/ippicv/unpack/ippicv_lnx\n-- CUDA detected: 8.0\n-- CUDA NVCC target flags: -gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=sm_21;-gencode;arch=compute_30,code=sm_30;-gencode;arch=compute_35,code=sm_35;-gencode;arch=compute_30,code=compute_30\n-- Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) \n-- To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR=&lt;filepath&gt; option to cmake\n-- Found PythonInterp: /home/geoff/anaconda3/envs/obj_recog/bin/python (found suitable version \"2.7.12\", minimum required is \"2.7\") \n</code></pre>\n\n<p>When I execute <code>make j-4</code> as in the tutorial, the make then breaks around 40%.</p>\n\n<p>I also tried installing by using <code>conda install opencv</code>, but then I can't read <code>.avi</code> videos or images, getting the following error: </p>\n\n<pre><code>OpenCV Error: Unspecified error (The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script) in cvShowImage, file /root/mc-x64-2.7/conda-bld/opencv-3_1482256854890/work/opencv-3.1.0/modules/highgui/src/window.cpp, line 545\nTraceback (most recent call last):\n File \"find_game.py\", line 24, in &lt;module&gt;\n   cv2.imshow(\"Image\", image)\ncv2.error: /root/mc-x64-2.7/conda-bld/opencv-3_1482256854890/work/opencv-3.1.0/modules/highgui/src/window.cpp:545: error: (-2) The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script in function cvShowImage\n</code></pre>\n\n<p>I checked and <code>libgtk2-0-dev</code> is correctly installed.</p>\n\n<p>Before building OpenCV by hand, I also compiled and reinstalled ffmpeg and gstreamer.</p>\n\n<p>During the <code>make</code>, I get this error:</p>\n\n<pre><code>//usr/lib/x86_64-linux-gnu/libsoxr.so.0: undefined reference to `GOMP_parallel@GOMP_4.0'\ncollect2: error: ld returned 1 exit status\nsamples/opengl/CMakeFiles/example_opengl_opengl_interop.dir/build.make:107: recipe for target 'bin/opengl-example-opengl_interop' failed\nmake[2]: *** [bin/opengl-example-opengl_interop] Error 1\nCMakeFiles/Makefile2:31556: recipe for target 'samples/opengl/CMakeFiles/example_opengl_opengl_interop.dir/all' failed\nmake[1]: *** [samples/opengl/CMakeFiles/example_opengl_opengl_interop.dir/all] Error 2\n</code></pre>\n\n<p>Any help would be greatly appreciated !</p>\n"}, {"tags": ["python", "regex", "twitter", "replace"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4760112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b7571fbf490711f6cb2c4ea82cdbb0?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Miranda", "link": "https://stackoverflow.com/users/4760112/omar-miranda"}, "edited": false, "score": 0, "creation_date": 1483633031, "post_id": 41475296, "comment_id": 70184928, "body": "Thanks! I added a summary, sorry for not being so specific the first time :)"}, {"owner": {"reputation": 113, "user_id": 4760112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b7571fbf490711f6cb2c4ea82cdbb0?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Miranda", "link": "https://stackoverflow.com/users/4760112/omar-miranda"}, "edited": false, "score": 0, "creation_date": 1483646469, "post_id": 41475296, "comment_id": 70193321, "body": "I modify (?i)\\b(?&lt;!@)(#x[- ]?men:?\\s?(?:apocalypse)?)\\b, adding the &#39;#&#39;, but \\b thinks that # is a word separator, so it only match xmen on #xmen; and how I using re.sub(regx, &#39;MOVIE&#39;), the result is #MOVIE. That&#39;s the reason why (?:^|\\s) works better, as @Toto suggested."}], "tags": [], "owner": {"reputation": 110, "user_id": 6938240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ivbtb.jpg?s=128&g=1", "display_name": "moogle", "link": "https://stackoverflow.com/users/6938240/moogle"}, "is_accepted": false, "score": 0, "last_activity_date": 1483635753, "last_edit_date": 1483635753, "creation_date": 1483574830, "answer_id": 41475296, "question_id": 41474535, "link": "https://stackoverflow.com/questions/41474535/regex-to-findreplace-movie-names-python/41475296#41475296", "title": "Regex to find&amp;replace movie names python", "body": "<p>This should work per your (vague) constraints:\n<code>(?i)(?&lt;![#@])x[- ]?men(?!:)( apocalypse)?</code></p>\n\n<ul>\n<li><code>(?i)</code> -- ignore case flag</li>\n<li><code>(?&lt;![#@])</code> -- no <code>#</code> or <code>@</code> before 'xmen' </li>\n<li><code>[- ]?</code> -- optional <code>-</code> or <code></code> </li>\n<li><code>(?!:)</code> -- no colon after 'xmen'</li>\n<li><code>( apocalypse)?</code> -- optional apocalypse string</li>\n</ul>\n\n<hr>\n\n<p><strong>Edit</strong>: Instead of requiring a space in front/behind, I think having a boundary (<code>\\b</code>) would be more fitting, i.e. <code>(?i)\\b(?&lt;!@)(x[- ]?men:?\\s?(?:apocalypse)?)\\b</code> as 'xmen' may start the sentence.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 4760112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b7571fbf490711f6cb2c4ea82cdbb0?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Miranda", "link": "https://stackoverflow.com/users/4760112/omar-miranda"}, "edited": false, "score": 0, "creation_date": 1483646867, "post_id": 41490178, "comment_id": 70193558, "body": "Thanks! Is the same that I came up today. The problem, is that I&#39;m using re.sub(regx, &#39;MOVIE&#39;) the &quot;non capture group&quot; it is still substituted. i.e. &#39;jaja #xmen jaja&#39; -&gt; jajaMOVIE jaja"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 113, "user_id": 4760112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b7571fbf490711f6cb2c4ea82cdbb0?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Miranda", "link": "https://stackoverflow.com/users/4760112/omar-miranda"}, "edited": false, "score": 0, "creation_date": 1483695326, "post_id": 41490178, "comment_id": 70210635, "body": "@OmarMiranda:You could use a capture group <code>(^|\\s)</code> and add it in the replacement part."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 1, "last_activity_date": 1483695429, "last_edit_date": 1483695429, "creation_date": 1483634342, "answer_id": 41490178, "question_id": 41474535, "link": "https://stackoverflow.com/questions/41474535/regex-to-findreplace-movie-names-python/41490178#41490178", "title": "Regex to find&amp;replace movie names python", "body": "<p>This one should do the job:</p>\n\n<pre><code>(?:^|\\s)#x[ -]?men:?\\s?apocalypse\\b\n</code></pre>\n\n<p>In case of replacement, if you want to keep the space before, use a capture group and put it in the replacement part:</p>\n\n<pre><code>(^|\\s)#x[ -]?men:?\\s?apocalypse\\b\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<pre><code>(?:^|\\s)    : non capture group, begining of string or a space\n#           : #\nx           : x\n[ -]?       : optional space or dash\nmen         : men\n:?          : optional semicolon\n\\s?         : optional space\napocalypse  : apocalypse\n\\b          : word boundary\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4760112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b7571fbf490711f6cb2c4ea82cdbb0?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Miranda", "link": "https://stackoverflow.com/users/4760112/omar-miranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 2, "accepted_answer_id": 41490178, "answer_count": 2, "score": 1, "last_activity_date": 1483695429, "creation_date": 1483570111, "last_edit_date": 1483632814, "question_id": 41474535, "link": "https://stackoverflow.com/questions/41474535/regex-to-findreplace-movie-names-python", "title": "Regex to find&amp;replace movie names python", "body": "<p>I've been working on tweets about different movies (using the Twitter Search API) and now I wanted to replace the match by a fixed string. </p>\n\n<p>I've been struggling with \"XMen Apocalypse\" because there are many ways to find this on tweets.\nI looked for <strong>\"XMen Apocalypse\"</strong>, <strong>\"X-Men Apocalypse\"</strong>, <strong>\"X Men Apocalypse\"</strong>, <strong>\"XMen\"</strong>, <strong>\"X-Men\"</strong>, <strong>\"X Men\"</strong> and it retrived me matches that also includes <strong>\"@xmenmovie\"</strong>, <strong>\"#xmen\"</strong>, <strong>\"x-men: apocalypse\"</strong>, etc...</p>\n\n<p>This is the regex that I have:</p>\n\n<pre><code>xmen_regex = re.compile(\"(((#)x[\\-]?men:?(apocalypse)?)|(x[\\-]? ?men[:]?[ ]?(apocalypse)?))\")\ndef re_place_moviename(text, compiled_regex):\n    return re.sub(compiled_regex, \"MOVIE_NAME\", text.lower())\n</code></pre>\n\n<p>I have tested with <a href=\"http://regexr.com/\" rel=\"nofollow noreferrer\">RegExr</a>, but still isn't accurate at some edge cases like: '#xmen blabla' -> replace -> '#MOVIE_NAME blabla' or 'MOVIE_NAMEblabla'.</p>\n\n<p>So, there is a better way to do this? maybe compile different regex (on increasing length order (?)) and applying it separately?</p>\n\n<p><em>edit</em></p>\n\n<p><strong>Constrains (or summary):</strong></p>\n\n<ol>\n<li>I want to find \"x-men\", \"x men\", \"xmen\"</li>\n<li>All of 1 + \" apocalypse\"</li>\n<li>All of 1 + \": apocalypse\"</li>\n<li>Also: \"#xmen\", \"#x-men\", \"#xmenapocalypse\", \"#x-menapocalypse\"</li>\n<li>All musn't be a substring (\"@xmenmovie\" or \"lovexmen perfect\"), must contain at least 1 space at the begining and end of the expression. </li>\n</ol>\n\n<p><em>PS: Other movies are easier, but xmen and others like Rogue One there has many ways to expressed it and we want to catches the most of it.</em></p>\n\n<p><em>PS1: I know that <strong>\\b</strong> can help, but I couldn't understand how it works.</em></p>\n"}, {"tags": ["python", "flask", "config"], "comments": [{"owner": {"reputation": 15497, "user_id": 594211, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7c9805edc21e2627ed8d6edc8a52802d?s=128&d=identicon&r=PG", "display_name": "jrc", "link": "https://stackoverflow.com/users/594211/jrc"}, "edited": false, "score": 1, "creation_date": 1484317010, "post_id": 41474520, "comment_id": 70472847, "body": "I ran into the same error, but I had an unnecessary <code>__init__.py</code> at the root level. Make sure you don&#39;t have that in <code>&#47;bloggy</code>. You are in <code>&#47;bloggy</code> when you <code>flask run</code>?"}, {"owner": {"reputation": 1560, "user_id": 6084335, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nrdgR.jpg?s=128&g=1", "display_name": "Jack Evans", "link": "https://stackoverflow.com/users/6084335/jack-evans"}, "reply_to_user": {"reputation": 15497, "user_id": 594211, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7c9805edc21e2627ed8d6edc8a52802d?s=128&d=identicon&r=PG", "display_name": "jrc", "link": "https://stackoverflow.com/users/594211/jrc"}, "edited": false, "score": 0, "creation_date": 1484321966, "post_id": 41474520, "comment_id": 70476094, "body": "I gave up and decided to drop the application factory and just keep everything inside <b>init</b>.py instead."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5958142"}, "is_accepted": false, "score": 1, "last_activity_date": 1492007169, "last_edit_date": 1492007169, "creation_date": 1486795062, "answer_id": 42173104, "question_id": 41474520, "link": "https://stackoverflow.com/questions/41474520/flask-flask-cli-noappexception-with-app-factory/42173104#42173104", "title": "Flask flask.cli.NoAppException with app factory", "body": "<p>Maybe adding the name of the flask application will help. Like following:</p>\n\n<pre><code>app.config.from_object(bloggy.config[config_name])\n</code></pre>\n\n<p>See <a href=\"http://flask.pocoo.org/docs/0.12/config/#configuring-from-files\" rel=\"nofollow noreferrer\">here</a> in flask doc.</p>\n"}], "owner": {"reputation": 1560, "user_id": 6084335, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nrdgR.jpg?s=128&g=1", "display_name": "Jack Evans", "link": "https://stackoverflow.com/users/6084335/jack-evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3377, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1492007169, "creation_date": 1483570044, "question_id": 41474520, "link": "https://stackoverflow.com/questions/41474520/flask-flask-cli-noappexception-with-app-factory", "title": "Flask flask.cli.NoAppException with app factory", "body": "<p>I'm attemping to split up my configuration settings into different classes within a config.py file, as documented <a href=\"http://flask.pocoo.org/docs/0.12/config/#development-production\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I've split my project up into folders like so:</p>\n\n<pre><code>/bloggy\n    autoapp.py\n    config.py\n    /app\n        __init__.py\n        models.py\n        views.py\n        /static\n        /templates\n</code></pre>\n\n<p>My <code>config.py</code> looks as follows</p>\n\n<pre><code>import os\nbasedir = os.path.abspath(os.path.dirname(__file__))\n\n\nclass Config(object):\n    SECRET_KEY = os.environ.get('SECRET_KEY') or 'secret key'\n    SQLALCHEMY_TRACK_MODIFICATIONS = True\n    SQLALCHEMY_MIGRATE_REPO = os.path.join(basedir, 'db_repository')\n\n\nclass DevelopmentConfig(Config):\n    DEBUG = True\n    SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(basedir, 'db.sqlite3')\n\n\nclass TestingConfig(Config):\n    TESTING = True\n\n\nconfig = {\n    'development': DevelopmentConfig,\n    'testing': TestingConfig,\n    'default': DevelopmentConfig\n}\n</code></pre>\n\n<p>I have an application factory file <code>autoapp.py</code>  to create my Flask application from the desired environment variable </p>\n\n<pre><code>import os\nfrom app import create_app\napp = create_app(os.getenv('FLASK_CONFIG') or 'default')\n</code></pre>\n\n<p>My <code>app/__init__.py</code> looks as follows:</p>\n\n<pre><code>from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom config import config\n\ndb = SQLAlchemy()\n\n\ndef create_app(config_name):\n    app = Flask(__name__)\n    app.config.from_object(config[config_name])\n    db.init_app(app)\n    return app\n</code></pre>\n\n<p>After running</p>\n\n<p><code>$ export FLASK_APP=autoapp.py</code></p>\n\n<p>and</p>\n\n<p><code>$ export FLASK_DEBUG=1</code></p>\n\n<p>and starting the server with: </p>\n\n<p><code>$ flask run</code></p>\n\n<p>I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/jwe/.local/lib/python3.5/site-packages/flask/cli.py\", line 178, in __call__\n    self._flush_bg_loading_exception()\n  File \"/home/jwe/.local/lib/python3.5/site-packages/flask/cli.py\", line 166, in _flush_bg_loading_exception\n    reraise(*exc_info)\n  File \"/home/jwe/.local/lib/python3.5/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"/home/jwe/.local/lib/python3.5/site-packages/flask/cli.py\", line 155, in _load_app\n    self._load_unlocked()\n  File \"/home/jwe/.local/lib/python3.5/site-packages/flask/cli.py\", line 170, in _load_unlocked\n    self._app = rv = self.loader()\n  File \"/home/jwe/.local/lib/python3.5/site-packages/flask/cli.py\", line 231, in load_app\n    rv = locate_app(self.app_import_path)\n  File \"/home/jwe/.local/lib/python3.5/site-packages/flask/cli.py\", line 95, in locate_app\n    'is .py' % module)\nflask.cli.NoAppException: The file/path provided (autoapp) does not appear to exist.  Please verify the path is correct.  If app is not on PYTHONPATH, ensure the extension is .py\n</code></pre>\n\n<p>Is there anyway I can get my application to use the settings laid out in <code>config.py</code> or should I take a different approach?</p>\n"}, {"tags": ["python", "sorting", "pandas", "group-by"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1483572329, "post_id": 41474500, "comment_id": 70155829, "body": "now i&#39;m totally confused - do you want to sort / change values in <code>t</code> column where (<code>id == 1</code>) or not?"}, {"owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1483583867, "post_id": 41474500, "comment_id": 70158909, "body": "yes. The dataframe has id&#39;s from 0 to n where n is an integer. For each n, I want to reverse the corresponding <code>t</code> values. Each <code>id</code> may have a different number of <code>t</code> values so it needs to be done for each <code>id</code>."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "edited": false, "score": 0, "creation_date": 1483571362, "post_id": 41474587, "comment_id": 70155496, "body": "Sorry @MaxU, I had the wrong dataframe in there. I made some edits."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "edited": false, "score": 0, "creation_date": 1483571498, "post_id": 41474587, "comment_id": 70155534, "body": "@superhero, do you want to sort only <code>t</code> column values or complete rows? I mean would it be my first solution or the second one for your old data sets?"}, {"owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "edited": false, "score": 0, "creation_date": 1483571668, "post_id": 41474587, "comment_id": 70155607, "body": "Only <code>t</code> but as a function of <code>id</code>. So, given the subset <code>id == 0</code> I want to reverse the column <code>t</code> so it reads descending instead of ascending but keeps all other columns as is, and all other rows where <code>id != 0</code> as is. Then, do the same thing for all subgroups as <code>groupby(&#39;id&#39;)</code>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "edited": false, "score": 0, "creation_date": 1483571877, "post_id": 41474587, "comment_id": 70155683, "body": "@superhero, so you want to sort only those rows where <code>id == 0</code>, right?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "edited": false, "score": 0, "creation_date": 1483572045, "post_id": 41474587, "comment_id": 70155728, "body": "@superhero, why do you have changed <code>t: 86 --&gt; 90</code> in the row with index: <code>5</code> (where <code>id == 1</code>)?"}, {"owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "edited": false, "score": 0, "creation_date": 1483587374, "post_id": 41474587, "comment_id": 70159642, "body": "You&#39;re a wizard. This does it: <code>df[[&#39;id&#39;,&#39;t&#39;]] = df[[&#39;id&#39;,&#39;t&#39;]].sort_values([&#39;id&#39;,&#39;t&#39;], ascending=[1,0]).values </code>"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 4, "last_activity_date": 1483572980, "last_edit_date": 1495540909, "creation_date": 1483570365, "answer_id": 41474587, "question_id": 41474500, "link": "https://stackoverflow.com/questions/41474500/pandas-dataframe-reverse-sort-on-subsets-using-groupby/41474587#41474587", "title": "Pandas dataframe reverse sort on subsets using groupby", "body": "<p><strong>UPDATE2:</strong> sort / replace values in the <code>t</code> column, but only for those rows where <code>id == 0</code> (<a href=\"https://stackoverflow.com/questions/41474500/pandas-dataframe-reverse-sort-on-subsets-using-groupby#comment70155607_41474587\">as described in this comment</a>):</p>\n\n<pre><code>In [373]: df\nOut[373]:\n   id   t  metric_1  metric_2  metric_3\n0   0  86    13.333    61.989  0.017444\n1   0  87    13.333    61.993  0.017569\n2   0  88    13.333    61.992  0.017711\n3   0  89    13.333    61.998  0.017746\n4   0  90    13.333    61.993  0.017871\n5   1  86    13.333    61.964  0.018511\n6   1  87    20.000    61.913  0.020058\n7   1  88    20.000    61.864  0.022475\n8   1  89    26.667    61.802  0.025995\n9   1  90    33.333    61.736  0.030689\n\nIn [374]: df.loc[df.id == 0, 't'] = df.loc[df.id == 0, 't'].sort_values(ascending=0).values\n\nIn [375]: df\nOut[375]:\n   id   t  metric_1  metric_2  metric_3\n0   0  90    13.333    61.989  0.017444\n1   0  89    13.333    61.993  0.017569\n2   0  88    13.333    61.992  0.017711\n3   0  87    13.333    61.998  0.017746\n4   0  86    13.333    61.993  0.017871\n5   1  86    13.333    61.964  0.018511\n6   1  87    20.000    61.913  0.020058\n7   1  88    20.000    61.864  0.022475\n8   1  89    26.667    61.802  0.025995\n9   1  90    33.333    61.736  0.030689\n</code></pre>\n\n<p><strong>UPDATE:</strong> for updated data sets</p>\n\n<p>original DF:</p>\n\n<pre><code>In [363]: df\nOut[363]:\n   id   t  metric_1  metric_2  metric_3\n0   0  86    13.333    61.989  0.017444\n1   0  87    13.333    61.993  0.017569\n2   0  88    13.333    61.992  0.017711\n3   0  89    13.333    61.998  0.017746\n4   0  90    13.333    61.993  0.017871\n5   1  86    13.333    61.964  0.018511\n6   1  87    20.000    61.913  0.020058\n7   1  88    20.000    61.864  0.022475\n8   1  89    26.667    61.802  0.025995\n9   1  90    33.333    61.736  0.030689\n</code></pre>\n\n<p>sorting complete rows:</p>\n\n<pre><code>In [364]: df.sort_values(['id','t'], ascending=[1,0])\nOut[364]:\n   id   t  metric_1  metric_2  metric_3\n4   0  90    13.333    61.993  0.017871\n3   0  89    13.333    61.998  0.017746\n2   0  88    13.333    61.992  0.017711\n1   0  87    13.333    61.993  0.017569\n0   0  86    13.333    61.989  0.017444\n9   1  90    33.333    61.736  0.030689\n8   1  89    26.667    61.802  0.025995\n7   1  88    20.000    61.864  0.022475\n6   1  87    20.000    61.913  0.020058\n5   1  86    13.333    61.964  0.018511   # &lt;--\n</code></pre>\n\n<p>sorting values for two columns (<code>['id','t']</code>), replacing their values:</p>\n\n<pre><code>In [366]: df[['id','t']] = df[['id','t']].sort_values(['id','t'], ascending=[1,0]).values\n\nIn [367]: df\nOut[367]:\n   id   t  metric_1  metric_2  metric_3\n0   0  90    13.333    61.989  0.017444\n1   0  89    13.333    61.993  0.017569\n2   0  88    13.333    61.992  0.017711\n3   0  87    13.333    61.998  0.017746\n4   0  86    13.333    61.993  0.017871\n5   1  90    13.333    61.964  0.018511\n6   1  89    20.000    61.913  0.020058\n7   1  88    20.000    61.864  0.022475\n8   1  87    26.667    61.802  0.025995\n9   1  86    33.333    61.736  0.030689  # &lt;--\n</code></pre>\n\n<p><strong>OLD answer:</strong></p>\n\n<p>IIUC you can simply sort your data by two columns:</p>\n\n<pre><code>In [349]: df.sort_values(['id','t'], ascending=[1,1])\nOut[349]:\n   id   t  metric_1  metric_2  metric_3\n4   0  86    13.333    61.993  0.017871\n3   0  87    13.333    61.998  0.017746\n2   0  88    13.333    61.992  0.017711\n1   0  89    13.333    61.993  0.017569\n0   0  90    13.333    61.989  0.017444\n9   1  86    33.333    61.736  0.030689\n8   1  87    26.667    61.802  0.025995\n7   1  88    20.000    61.864  0.022475\n6   1  89    20.000    61.913  0.020058\n5   1  90    13.333    61.964  0.018511\n</code></pre>\n\n<p>if you want to sort it as in your desired data set (replacing <code>t</code> column values):</p>\n\n<pre><code>In [357]: df[['id','t']] = df[['id','t']].sort_values(['id','t']).values\n\nIn [358]: df\nOut[358]:\n   id   t  metric_1  metric_2  metric_3\n0   0  86    13.333    61.989  0.017444\n1   0  87    13.333    61.993  0.017569\n2   0  88    13.333    61.992  0.017711\n3   0  89    13.333    61.998  0.017746\n4   0  90    13.333    61.993  0.017871\n5   1  86    13.333    61.964  0.018511\n6   1  87    20.000    61.913  0.020058\n7   1  88    20.000    61.864  0.022475\n8   1  89    26.667    61.802  0.025995\n9   1  90    33.333    61.736  0.030689   # 1 90 33.333 61.736 0.030689 as in your desired DF\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "edited": false, "score": 0, "creation_date": 1483633851, "post_id": 41478383, "comment_id": 70185537, "body": "Right, but it&#39;s more complicated. I want to reverse <code>t</code> for each <code>id</code>. Each <code>id</code> corresponds to a run of an experiment that lasts for n seconds where n is different every time. If I reverse just column <code>t</code> the time values will obviously be mismatched to their <code>id</code> benefactor."}], "tags": [], "owner": {"reputation": 149, "user_id": 7324758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73a3fc1cb5b45ff657870a575c8f026a?s=128&d=identicon&r=PG&f=1", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/7324758/mahesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1483610331, "last_edit_date": 1483610331, "creation_date": 1483596890, "answer_id": 41478383, "question_id": 41474500, "link": "https://stackoverflow.com/questions/41474500/pandas-dataframe-reverse-sort-on-subsets-using-groupby/41478383#41478383", "title": "Pandas dataframe reverse sort on subsets using groupby", "body": "<p>if you want to reverse the 't' column leaving all other columns intact, you can try following code:</p>\n\n<pre><code>df.t=df['t'].sort_values(ascending=False)\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 4921853, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/602d046ecc1bc07ce379e77e1d541766?s=128&d=identicon&r=PG&f=1", "display_name": "superhero", "link": "https://stackoverflow.com/users/4921853/superhero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 41474587, "answer_count": 2, "score": 1, "last_activity_date": 1483610331, "creation_date": 1483569907, "last_edit_date": 1483587006, "question_id": 41474500, "link": "https://stackoverflow.com/questions/41474500/pandas-dataframe-reverse-sort-on-subsets-using-groupby", "title": "Pandas dataframe reverse sort on subsets using groupby", "body": "<p>I have a dataframe with <code>names = ['id','t','metric_1','metric_2','metric_3']</code>. I am running some signal processing on each <code>grp in groupby('id')</code>. I need to reverse the time for another process that is taking in the entire dataframe and doing it's processing under the hood. Simply put, given a <code>grp</code>, I need to reverse the time column only, leaving all other columns intact, and all rows not in <code>grp</code> intact. </p>\n\n<p>Input dataframe:</p>\n\n<pre><code>    id  t   metric_1    metric_2    metric_3\n0   0   86  13.333  61.989  0.017444\n1   0   87  13.333  61.993  0.017569\n2   0   88  13.333  61.992  0.017711\n3   0   89  13.333  61.998  0.017746\n4   0   90  13.333  61.993  0.017871\n5   1   32  13.333  61.964  0.018511\n6   1   33  20.000  61.913  0.020058\n7   1   34  20.000  61.864  0.022475\n8   1   35  26.667  61.802  0.025995\n9   1   36  33.123  61.563  0.032345\n10  1   37  33.763  61.836  0.060189\n11  2   2   13.333  61.964  0.018511\n12  2   3   20.000  61.613  0.020058\n13  2   4   20.000  61.164  0.027475\n14  2   5   26.667  61.802  0.024995\n15  2   6   33.333  61.736  0.030689\n</code></pre>\n\n<p>I would like to use an operation that yields a dataframe like this:</p>\n\n<pre><code>    id  t   metric_1    metric_2    metric_3\n0   0   90  13.333  61.989  0.017444\n1   0   89  13.333  61.993  0.017569\n2   0   88  13.333  61.992  0.017711\n3   0   87  13.333  61.998  0.017746\n4   0   86  13.333  61.993  0.017871\n5   1   37  13.333  61.964  0.018511\n6   1   36  20.000  61.913  0.020058\n7   1   35  20.000  61.864  0.022475\n8   1   34  26.667  61.802  0.025995\n9   1   33  33.333  61.736  0.030689\n10  1   32  33.763  61.836  0.060189\n11  2   6   13.333  61.964  0.018511\n12  2   5   20.000  61.613  0.020058\n13  2   4   20.000  61.164  0.027475\n14  2   3   26.667  61.802  0.024995\n15  2   2   33.333  61.736  0.030689\n</code></pre>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 3, "creation_date": 1483569992, "post_id": 41474495, "comment_id": 70154934, "body": "<code>u</code> stands for <a href=\"https://docs.python.org/2/howto/unicode.html\" rel=\"nofollow noreferrer\">unicode</a>"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1483570123, "post_id": 41474495, "comment_id": 70154997, "body": "Instead try <code>print(&#39;, &#39;.join(hobbies))</code>"}, {"owner": {"reputation": 613, "user_id": 4580814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027bad725fb46b84a2499611073a2ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Abass Sesay", "link": "https://stackoverflow.com/users/4580814/abass-sesay"}, "edited": false, "score": 0, "creation_date": 1483573555, "post_id": 41474495, "comment_id": 70156255, "body": "That should not be something that you should worry about. Like the first comment said, It only states that the text is in unicode. This will not affect the printing each individual hobby. If for aesthetic reasons you want to print it out without the <code>u</code>  you could <code>map(lambda x: x.encode(&#39;ascii&#39;), hobbies</code> before printing <code>hobbies</code>"}], "owner": {"reputation": 45, "user_id": 6352236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b91f42adb4c9d88ceef725ccd8e20737?s=128&d=identicon&r=PG&f=1", "display_name": "wahoowa", "link": "https://stackoverflow.com/users/6352236/wahoowa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1483570183, "answer_count": 0, "score": 0, "last_activity_date": 1483569887, "creation_date": 1483569887, "question_id": 41474495, "link": "https://stackoverflow.com/questions/41474495/for-loop-printing-oddly", "closed_reason": "Duplicate", "title": "For-loop printing oddly", "body": "<p>Here's the basic code I'm working with:</p>\n\n<pre><code>hobbies = []\n\nfor i in range(3):\n    hobby = raw_input(\"What are your three favorite hobbies?\")\n    hobbies.append(hobby)\n\nprint hobbies\n</code></pre>\n\n<p>My answers were \"ok\", \"k\", \"ok\". The hobbies list will print: </p>\n\n<pre><code>[u'ok', u'k', u'ok']\n</code></pre>\n\n<p>What's with the \"u\"?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 1, "creation_date": 1483571080, "post_id": 41474482, "comment_id": 70155395, "body": "The <code>plt.plot</code> line is equivalent to <code>plt.plot(something=-10,whatever=-10,nothing=10,who=10,color=&zwnj;&#8203;&#39;blue&#39;)</code> or more simply, <code>plt.plot(color=&#39;blue&#39;)</code>. The arguments you&#39;re giving it are meaningless to Matplotlib."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7376534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b2ce62ab312552ad6dadb90e10435f?s=128&d=identicon&r=PG&f=1", "display_name": "May", "link": "https://stackoverflow.com/users/7376534/may"}, "edited": false, "score": 0, "creation_date": 1484588721, "post_id": 41474562, "comment_id": 70561376, "body": "Thank you, it solved the problem! I don&#39;t know why I kept using x1, y1, x2, y2 arguments and where I found them, but apparently the problem was just the wrong syntax of the command."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 3, "user_id": 7376534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b2ce62ab312552ad6dadb90e10435f?s=128&d=identicon&r=PG&f=1", "display_name": "May", "link": "https://stackoverflow.com/users/7376534/may"}, "edited": false, "score": 0, "creation_date": 1484588785, "post_id": 41474562, "comment_id": 70561419, "body": "@May you&#39;re welcome. What confuses me is that <code>matplotlib</code> would take named arguments like that at all and not error."}], "tags": [], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1483570628, "last_edit_date": 1483570628, "creation_date": 1483570248, "answer_id": 41474562, "question_id": 41474482, "link": "https://stackoverflow.com/questions/41474482/matplotlib-never-shows-lines/41474562#41474562", "title": "Matplotlib never shows lines", "body": "<pre><code>import matplotlib\nmatplotlib.use('Agg')\nimport matplotlib.pyplot as plt\n\nx_data = [5, -5] \ny_data = [-5, 5]\n\nplt.plot(x_data, y_data)\nplt.show()\n</code></pre>\n\n<p><code>plt.plot(x1=-10,y1=-10,x2=10,y2=10,color='blue')</code> well <code>x1</code> and <code>x2</code> (etc.) have no specific meaning to <code>matplotlib</code> (that I know of). You need to provide the values in separate lists.</p>\n"}], "owner": {"reputation": 3, "user_id": 7376534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b2ce62ab312552ad6dadb90e10435f?s=128&d=identicon&r=PG&f=1", "display_name": "May", "link": "https://stackoverflow.com/users/7376534/may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 41474562, "answer_count": 1, "score": 0, "last_activity_date": 1483574120, "creation_date": 1483569812, "last_edit_date": 1483574120, "question_id": 41474482, "link": "https://stackoverflow.com/questions/41474482/matplotlib-never-shows-lines", "title": "Matplotlib never shows lines", "body": "<p>Whenever I try to visualize any data, the <em>plot</em> command doesn't work for me. <em>scatter</em>, <em>hist</em> and others work fine. For example, for this code:</p>\n\n<pre><code>import matplotlib\nmatplotlib.use('Agg')\nimport matplotlib.pyplot as plt\n\nplt.title(\"Test\")\nplt.xlim(-10, 10)\nplt.ylim(-10, 10)\nplt.scatter(x=-5, y=5, color='red')\nplt.scatter(x=5, y=-5, color='green')\nplt.plot(x1=-10,y1=-10,x2=10,y2=10,color='blue')\nplt.gcf().savefig('Test.png')\n</code></pre>\n\n<p>I would expect to get two points plus a line separating them, however all I get is the two points in the output file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wlrcp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wlrcp.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've tried every possible backend option, various output options, different format of the plt.plot command, and I never can get any lines to show up. What could the issue be?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 4, "creation_date": 1483569897, "post_id": 41474465, "comment_id": 70154894, "body": "Its called a <a href=\"http://stackoverflow.com/questions/13857/can-you-explain-closures-as-they-relate-to-python\">closure</a>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1483569898, "post_id": 41474465, "comment_id": 70154895, "body": "This is called a &quot;closure&quot;. When you return the inner function, it captures the binding of the outer variable."}], "answers": [{"tags": [], "owner": {"reputation": 14401, "user_id": 1730261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/m57hO.jpg?s=128&g=1", "display_name": "Rushy Panchal", "link": "https://stackoverflow.com/users/1730261/rushy-panchal"}, "is_accepted": true, "score": 1, "last_activity_date": 1506463683, "last_edit_date": 1506463683, "creation_date": 1483570168, "answer_id": 41474547, "question_id": 41474465, "link": "https://stackoverflow.com/questions/41474465/inner-function-accessing-outer-functions-variable/41474547#41474547", "title": "inner function accessing outer function&#39;s variable", "body": "<blockquote>\n  <p>the variable of the outer function is available only when that function is running on, i.e. it vanishes when my_outer_function ends.</p>\n</blockquote>\n\n<p>That's not entirely true. The variable is available in <code>my_outer_function</code>'s scope. <code>my_inner_function</code> has the scope of its own declarations <em>and</em> its parent's scope.</p>\n\n<p><code>my_inner_function</code> references a variable outside of its own scope, and so those references are bound to <code>my_inner_function</code> as a closure when its parent's scope is no longer available. To learn more about closures, see <a href=\"https://stackoverflow.com/questions/13857/can-you-explain-closures-as-they-relate-to-python\">Can you explain closures (as they relate to Python)?</a> (taken from Paul Rooney's comment)</p>\n"}], "owner": {"reputation": 861, "user_id": 3211950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Lw6mr.jpg?s=128&g=1", "display_name": "enneppi", "link": "https://stackoverflow.com/users/3211950/enneppi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "closed_date": 1483570473, "accepted_answer_id": 41474547, "answer_count": 1, "score": 1, "last_activity_date": 1506463683, "creation_date": 1483569686, "last_edit_date": 1483569904, "question_id": 41474465, "link": "https://stackoverflow.com/questions/41474465/inner-function-accessing-outer-functions-variable", "closed_reason": "Duplicate", "title": "inner function accessing outer function&#39;s variable", "body": "<p>Let's suppose to have this simple code:</p>\n\n<pre><code>def my_outer_function():\n    outer_var = 123\n    def my_inner_function():\n        return outer_var + 1\n    return my_inner_function\n\nget_inner = my_outer_function()\nget_inner()                      \n</code></pre>\n\n<p>I wonder there isn't any kind of runtime error. <code>outer_var</code> - the variable of the outer function - is available only when that function is running on, i.e. it vanishes when <code>my_outer_function</code> ends. But when I call <code>get_inner()</code>, <code>my_outer_function()</code> is already ended so I would have bet on a runtime error since <code>my_inner_function</code> couldn't find <code>outer_var</code>.</p>\n\n<p>How do you explain all this?</p>\n"}, {"tags": ["python", "python-3.x", "integer", "rounding"], "answers": [{"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 0, "last_activity_date": 1483596826, "last_edit_date": 1483596826, "creation_date": 1483572080, "answer_id": 41474894, "question_id": 41474403, "link": "https://stackoverflow.com/questions/41474403/python-3-code-rounding-integers/41474894#41474894", "title": "Python 3 code - Rounding integers", "body": "<p>One way of rounding up would be to use integer division to go down to the precision you want and then multiplying back up.  e.g.,:</p>\n\n<pre><code>Sumrounded = SumOfusrinput // (-10) * (-10)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7376447, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ef2a1d85a8f87538b5dfe1c299f1a1e?s=128&d=identicon&r=PG&f=1", "display_name": "lewis12642", "link": "https://stackoverflow.com/users/7376447/lewis12642"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "closed_date": 1483572196, "accepted_answer_id": 41474894, "answer_count": 1, "score": -1, "last_activity_date": 1483596826, "creation_date": 1483569424, "last_edit_date": 1483570162, "question_id": 41474403, "link": "https://stackoverflow.com/questions/41474403/python-3-code-rounding-integers", "closed_reason": "Duplicate", "title": "Python 3 code - Rounding integers", "body": "<p>I am trying to round numbers up in python 3. In my existing code, the number either round up to the nearest 10 or down. For example, 67 goes to 70 and 64 goes to 60. I would like the number to always round up to the nearest multiple of 10, so that <code>67--&gt;70</code> and <code>64--&gt;70</code>. Here is my code for rounding so far:</p>\n\n<pre><code>##ROUNDING SumOfUsrinput TO NEAREST 10##\nSumOfUsrinput=int(input(\"Please enter the sum: \"))\nSumRounded=round(SumOfUsrinput,-1)\nprint (SumRounded)\n</code></pre>\n\n<p>I would appreciate it if you could answer simple and explain how it works.</p>\n"}, {"tags": ["python", "multithreading", "datetime", "timestamp"], "comments": [{"owner": {"reputation": 935, "user_id": 738924, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ee57204de04a618ddf0bfefae8429c6f?s=128&d=identicon&r=PG", "display_name": "theannouncer", "link": "https://stackoverflow.com/users/738924/theannouncer"}, "edited": false, "score": 0, "creation_date": 1483570908, "post_id": 41474354, "comment_id": 70155314, "body": "Can you clarify &quot;For each unique time event, I want a function to run at 2 intervals prior to the event&quot;"}, {"owner": {"reputation": 935, "user_id": 738924, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ee57204de04a618ddf0bfefae8429c6f?s=128&d=identicon&r=PG", "display_name": "theannouncer", "link": "https://stackoverflow.com/users/738924/theannouncer"}, "edited": false, "score": 0, "creation_date": 1483571630, "post_id": 41474354, "comment_id": 70155593, "body": "Also please clarify &quot;This list is updated every 2 mins these events &quot;"}, {"owner": {"reputation": 421, "user_id": 4889550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/oHKXR.jpg?s=128&g=1", "display_name": "noblerthanoedipus", "link": "https://stackoverflow.com/users/4889550/noblerthanoedipus"}, "reply_to_user": {"reputation": 935, "user_id": 738924, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ee57204de04a618ddf0bfefae8429c6f?s=128&d=identicon&r=PG", "display_name": "theannouncer", "link": "https://stackoverflow.com/users/738924/theannouncer"}, "edited": false, "score": 0, "creation_date": 1483590800, "post_id": 41474354, "comment_id": 70160372, "body": "@theannouncer 1st: 2 times at x &amp; y minutes before the events I want the <code>#do something</code> to happen. The x &amp; y are in <code>interval_minutes_before_event</code>. 2nd: I changed the grammar to make this clearer. That&#39;s accomplished by the <code>refresh_every_2_mins function</code>"}], "owner": {"reputation": 421, "user_id": 4889550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/oHKXR.jpg?s=128&g=1", "display_name": "noblerthanoedipus", "link": "https://stackoverflow.com/users/4889550/noblerthanoedipus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483590633, "creation_date": 1483569184, "last_edit_date": 1483590633, "question_id": 41474354, "link": "https://stackoverflow.com/questions/41474354/multiple-timed-threads-in-python", "title": "Multiple timed threads in python", "body": "<p>I have a list of timestamps that represents events at various times in the future. I run the function every 2 minutes as the source list of <code>times</code> changes regularly.</p>\n\n<p>For each unique time event, I want a function to run at 2 intervals prior to the event. There are 2 issues.</p>\n\n<p>One is I don\u2019t know how to allow for however many events I\u2019ve got in my list as some may overlap with a function supposed to run while another is sleeping (is pooling an option here?)</p>\n\n<p>Two is I don\u2019t know how to kill the current sleeps and refresh every two minutes. The <code>Timer</code> is not overriding the <code>time.sleep</code> currently. </p>\n\n<p>Any solutions or alternative options appreciated. I looked at <code>sched</code> but threading seems to be the preferred route according to their documentation. </p>\n\n<pre><code>import datetime,time, threading\n\nt1 = datetime.datetime.now() + datetime.timedelta(minutes=60)\nt2 = datetime.datetime.now() + datetime.timedelta(minutes=62)\nt3 = datetime.datetime.now() + datetime.timedelta(days=1)\nt4 = datetime.datetime.now() + datetime.timedelta(days=1)\n\ninterval_minutes_before_event = [59,20]\ntimes = [t1,t2,t3,t4]\n\ndef refresh_every_2_mins(timeslist, intervals):\n    threading.Timer(120,refresh_every_2_mins)\n    for event in set(timeslist):\n        for interval_prior in intervals:\n            print 'Sleeping for',((event - datetime.timedelta(minutes=interval_prior)) - datetime.datetime.now()).seconds, 'seconds'\n            time.sleep(((event - datetime.timedelta(minutes=interval_prior)) - datetime.datetime.now()).seconds)\n            # do something \n    print 'Two mins up, starting again'\n\n\nrefresh_every_2_mins(times,interval_minutes_before_event)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 439, "user_id": 2649287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k7rpN.jpg?s=128&g=1", "display_name": "SudoKid", "link": "https://stackoverflow.com/users/2649287/sudokid"}, "edited": false, "score": 0, "creation_date": 1483569596, "post_id": 41474304, "comment_id": 70154780, "body": "There maybe a better way if you provide more details about the problem. Is the input data a string? where are you getting the input from. If you can format it differently earlier it could be easier to deal with the data. Also if you want a really easy way to just test a bunch of lines of data you should give this site a try. <a href=\"http://pythex.org/\" rel=\"nofollow noreferrer\">pythex.org</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3080, "user_id": 3293987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ck5de.jpg?s=128&g=1", "display_name": "Quixrick", "link": "https://stackoverflow.com/users/3293987/quixrick"}, "is_accepted": false, "score": 1, "last_activity_date": 1483569903, "creation_date": 1483569903, "answer_id": 41474499, "question_id": 41474304, "link": "https://stackoverflow.com/questions/41474304/how-to-use-regularexpression-for-this-example/41474499#41474499", "title": "How to use regularexpression for this example?", "body": "<p>Here's something you can try:</p>\n\n<pre><code>(\\+|-)\\s*(\\d+\\.\\d+)\\s*\n</code></pre>\n\n<p>Although, you will always have a trailing comma, so you'd have to remove it.</p>\n\n<p><a href=\"https://regex101.com/r/Sv0qjx/2\" rel=\"nofollow noreferrer\">Here is a demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 2, "last_activity_date": 1483570124, "creation_date": 1483570124, "answer_id": 41474538, "question_id": 41474304, "link": "https://stackoverflow.com/questions/41474304/how-to-use-regularexpression-for-this-example/41474538#41474538", "title": "How to use regularexpression for this example?", "body": "<p>According to your requirement:</p>\n\n<blockquote>\n  <p>That It could group floats with sign in a single group (-5.0,-4.0...)</p>\n</blockquote>\n\n<p>The solution using <code>re.findall()</code> function:</p>\n\n<pre><code>s = '-  5.0   -  4.0   -  3.0  ... +  12.0'\nsigned_floats = [re.sub(r'\\s+', r'', f) for f in re.findall(r'-\\s*\\d+\\.\\d+\\b', s)]\n\nprint(signed_floats)\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>['-5.0', '-4.0', '-3.0']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "is_accepted": true, "score": 1, "last_activity_date": 1483570258, "creation_date": 1483570258, "answer_id": 41474565, "question_id": 41474304, "link": "https://stackoverflow.com/questions/41474304/how-to-use-regularexpression-for-this-example/41474565#41474565", "title": "How to use regularexpression for this example?", "body": "<p>Your capture group has the following elements:</p>\n\n<ul>\n<li><code>[+]</code> matches a literal <code>+</code></li>\n<li><code>(?:\\s)*</code> matches any number of whitespace characters</li>\n<li><code>\\d*</code> matches any number of digits</li>\n<li><code>[.]</code> matches a literal <code>.</code></li>\n</ul>\n\n<p>So right now, that matches a plus sign followed by space followed by digits followed by a decimal point. But it sounds like you want to match <em>several</em> sign-space-digits-decimalpoint-digits sequences in a row, as long as they have the same sign. I'd do that like this:</p>\n\n<ol>\n<li><p>Start with the expression to match a single such sequence:</p>\n\n<pre><code>[+-]\\s*\\d+[.]\\d+\n</code></pre>\n\n<p>This matches plus or minus, then space, then digits, decimal point, digits.</p></li>\n<li><p>You'll want to save the sign to make sure that the rest of the pattern only matches sequences with the same sign. So make a capturing group.</p>\n\n<pre><code>([+-])\\s*\\d+[.]\\d+\n</code></pre></li>\n<li><p>Now let's repeat the pattern (with some intervening space) to match another group, except that we want to make sure the sign is the same so we use a backreference.</p>\n\n<pre><code>([+-])\\s*\\d+[.]\\d+\\s*\\1\\s*\\d+[.]\\d+\n</code></pre>\n\n<p>The <code>\\1</code> matches whatever was matched by capturing group number 1. In this case, that's the sign, <code>+</code> or <code>-</code>. This pattern will match two consecutive sequences that have the same sign.</p></li>\n<li><p>Now change the second part of the pattern to match zero or more additional sequences.</p>\n\n<pre><code>([+-])\\s*\\d+[.]\\d+(?:\\s*\\1\\s*\\d+[.]\\d+)*\n</code></pre></li>\n<li>Finally, you can allow for spaces before and after the match. This can be solved with judicious use of the <a href=\"https://docs.python.org/3/library/re.html#re.regex.search\" rel=\"nofollow noreferrer\"><code>search</code></a> function, or <a href=\"https://docs.python.org/3/library/re.html#re.regex.findall\" rel=\"nofollow noreferrer\"><code>findall</code></a>, rather than <a href=\"https://docs.python.org/3/library/re.html#re.regex.match\" rel=\"nofollow noreferrer\"><code>match</code></a>. You can then use <a href=\"https://docs.python.org/3/library/re.html#re.match.group\" rel=\"nofollow noreferrer\"><code>match_object.group()</code></a> with no arguments to get the sequence that was matched, which is what you want.</li>\n</ol>\n"}], "owner": {"reputation": 75, "user_id": 7376475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/675d9d88fd038bd0944732d995d62a39?s=128&d=identicon&r=PG&f=1", "display_name": "DumbQ", "link": "https://stackoverflow.com/users/7376475/dumbq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 41474565, "answer_count": 3, "score": 1, "last_activity_date": 1483570258, "creation_date": 1483568991, "question_id": 41474304, "link": "https://stackoverflow.com/questions/41474304/how-to-use-regularexpression-for-this-example", "title": "How to use regularexpression for this example?", "body": "<p>I am trying to write regular expression for this line:</p>\n\n<p><code>-  5.0   -  4.0   -  3.0  ... +  12.0</code></p>\n\n<p>That It could group floats with sign in a single group (-5.0,-4.0...)</p>\n\n<p>I have tried:</p>\n\n<p><code>\\s*([+](?:\\s)*\\d*[.])</code> </p>\n\n<p>But apparently It does not ignore non-capture group inside capture group.\nAny suggestion how this could be solved?</p>\n"}, {"tags": ["python", "arrays", "pandas", "matrix", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 10, "last_activity_date": 1483569191, "creation_date": 1483569191, "answer_id": 41474355, "question_id": 41474284, "link": "https://stackoverflow.com/questions/41474284/how-to-convert-a-matrix-into-column-array-with-pandas-python/41474355#41474355", "title": "How to convert a matrix into column array with PANDAS / Python", "body": "<p>you can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.stack.html\" rel=\"noreferrer\">DataFrame.stack()</a> method:</p>\n\n<pre><code>In [335]: df.stack().reset_index().rename(columns={'level_0':'Source','level_1':'Target', 0:'Weight'})\nOut[335]:\n  Source Target  Weight\n0      a      A       1\n1      a      B       3\n2      a      C       4\n3      b      A       4\n4      b      B       0\n5      b      C       6\n6      c      A       9\n7      c      B       8\n8      c      C       0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 785, "user_id": 651299, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UX5Sh.jpg?s=128&g=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/651299/hugo"}, "is_accepted": false, "score": 1, "last_activity_date": 1483570840, "creation_date": 1483570840, "answer_id": 41474675, "question_id": 41474284, "link": "https://stackoverflow.com/questions/41474284/how-to-convert-a-matrix-into-column-array-with-pandas-python/41474675#41474675", "title": "How to convert a matrix into column array with PANDAS / Python", "body": "<p>I was thinking about using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.melt.html\" rel=\"nofollow noreferrer\">pd.melt()</a> :</p>\n\n<pre><code>pd.melt(df.reset_index(), id_vars=['index'], value_vars=['A', 'B', 'C'], var_name='Target', value_name='Weight')\n</code></pre>\n\n<p>It won't give you exactly what you want but it might be good to know :</p>\n\n<pre><code>      index Target  Weight\n0     a      A     1.0\n1     b      A     4.0\n2     c      A     9.0\n3     a      B     3.0\n4     b      B     0.0\n5     c      B     8.0\n...\n</code></pre>\n"}], "owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4549, "favorite_count": 2, "accepted_answer_id": 41474355, "answer_count": 2, "score": 8, "last_activity_date": 1483570840, "creation_date": 1483568884, "question_id": 41474284, "link": "https://stackoverflow.com/questions/41474284/how-to-convert-a-matrix-into-column-array-with-pandas-python", "title": "How to convert a matrix into column array with PANDAS / Python", "body": "<p>I need to convert a matriz (below) into a 3 column list. </p>\n\n<p>I currently have a DataFrame as this:</p>\n\n<pre><code>     A   B   C  ...\na    1   3   4  ...\nb    4   0   6  ...\nc    9   8   0  ...\n</code></pre>\n\n<p>and I need to get a results as this: </p>\n\n<pre><code>Source   Target    Weight\n  a        A          1\n  a        B          3\n  a        C          4\n  b        A          4\n  b        C          6\n  c        A          9\n  c        B          8\n</code></pre>\n\n<p>I've been trying to use pandas.pivot_table function, but I can't get the result needed. </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1483569113, "post_id": 41474271, "comment_id": 70154581, "body": "Typo : asnwer instead of answer"}, {"owner": {"reputation": 673, "user_id": 5077434, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-CQSO8YkdyGg/AAAAAAAAAAI/AAAAAAAAC1o/GXf_oc5W1ic/photo.jpg?sz=128", "display_name": "Aviran Katz", "link": "https://stackoverflow.com/users/5077434/aviran-katz"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1483569560, "post_id": 41474271, "comment_id": 70154771, "body": "LOL. A bit embarrassing, thanks :)"}, {"owner": {"reputation": 9029, "user_id": 2663692, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/LOx4z.png?s=128&g=1", "display_name": "Tal Avissar", "link": "https://stackoverflow.com/users/2663692/tal-avissar"}, "edited": false, "score": 0, "creation_date": 1483571543, "post_id": 41474271, "comment_id": 70155550, "body": "do you have something in the answers sequence?"}, {"owner": {"reputation": 2855, "user_id": 4759330, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203598554836776/picture?type=large", "display_name": "Evaldo Bratti", "link": "https://stackoverflow.com/users/4759330/evaldo-bratti"}, "edited": false, "score": 0, "creation_date": 1483572158, "post_id": 41474271, "comment_id": 70155761, "body": "how are you filling the context in your view? can you provide your call to <code>render</code> from your view?"}, {"owner": {"reputation": 673, "user_id": 5077434, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-CQSO8YkdyGg/AAAAAAAAAAI/AAAAAAAAC1o/GXf_oc5W1ic/photo.jpg?sz=128", "display_name": "Aviran Katz", "link": "https://stackoverflow.com/users/5077434/aviran-katz"}, "reply_to_user": {"reputation": 2855, "user_id": 4759330, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203598554836776/picture?type=large", "display_name": "Evaldo Bratti", "link": "https://stackoverflow.com/users/4759330/evaldo-bratti"}, "edited": false, "score": 0, "creation_date": 1483574360, "post_id": 41474271, "comment_id": 70156482, "body": "@EvaldoBratti see Daniel&#39;s comment. The cause was a type"}, {"owner": {"reputation": 2855, "user_id": 4759330, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203598554836776/picture?type=large", "display_name": "Evaldo Bratti", "link": "https://stackoverflow.com/users/4759330/evaldo-bratti"}, "edited": false, "score": 0, "creation_date": 1483621001, "post_id": 41474271, "comment_id": 70176232, "body": "@AviranKatz  I thought it was just a typo error in your question and not in your real code ^^ sorry"}], "owner": {"reputation": 673, "user_id": 5077434, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-CQSO8YkdyGg/AAAAAAAAAAI/AAAAAAAAC1o/GXf_oc5W1ic/photo.jpg?sz=128", "display_name": "Aviran Katz", "link": "https://stackoverflow.com/users/5077434/aviran-katz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483571454, "creation_date": 1483568820, "last_edit_date": 1483571454, "question_id": 41474271, "link": "https://stackoverflow.com/questions/41474271/how-to-print-a-field-of-a-list-under-iteration-in-a-view", "title": "How to print a field of a list under iteration in a view?", "body": "<p>I'm trying to print a field of a list of answers from a view using django with no success (nothing is printed to the html), as follows:</p>\n\n<pre><code>&lt;ul&gt;\n    {% for asnwer in answers %}\n        &lt;li&gt;{{ answer.choice_text }}&lt;/li&gt;\n    {% endfor %}\n&lt;/ul&gt;\n</code></pre>\n\n<p>I'm new to django, so I guess that I'm missing something which is pretty obvious. Your help is greatly appreciated.</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "statistics"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6732806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf4bffb9c88a54cce9d2a21f2df917d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tappy", "link": "https://stackoverflow.com/users/6732806/tappy"}, "edited": false, "score": 0, "creation_date": 1483570605, "post_id": 41474546, "comment_id": 70155188, "body": "Thanks Ted, my 6 hours of frustration comes to an end thanks to your simple solution of plotting them separately!"}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": true, "score": 2, "last_activity_date": 1483570167, "creation_date": 1483570167, "answer_id": 41474546, "question_id": 41474172, "link": "https://stackoverflow.com/questions/41474172/stacked-bar-plot-in-pandas-with-max-values-instead-of-being-summed/41474546#41474546", "title": "Stacked bar plot in Pandas with max values instead of being summed", "body": "<p>One simple solution is to plot them separately with the idle time last</p>\n\n<pre><code>df['Total time [hours]'].plot.bar(color='r')\ndf['Idle time [hours]'].plot.bar(color='b')\n</code></pre>\n\n<p>Another solution is to create a new column that is equal to the Total time minus the Idle Time and then do a stacked bar plot. You can rename the columns from there</p>\n\n<pre><code>df['Extra_Time'] = df['Total time [hours]'] - df['Idle time [hours]']\ndata[['Idle time [hours]', 'Extra_Time']].plot.bar(stacked=True)\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6732806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf4bffb9c88a54cce9d2a21f2df917d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tappy", "link": "https://stackoverflow.com/users/6732806/tappy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "accepted_answer_id": 41474546, "answer_count": 1, "score": 0, "last_activity_date": 1526620064, "creation_date": 1483568324, "last_edit_date": 1592644375, "question_id": 41474172, "link": "https://stackoverflow.com/questions/41474172/stacked-bar-plot-in-pandas-with-max-values-instead-of-being-summed", "title": "Stacked bar plot in Pandas with max values instead of being summed", "body": "<p>I'm trying to replicate work done in an excel pivot table. I have 3 variables (idle time, and total time, and customer). I want to make a bar plot that is stacked(overlaps) but is not a sum of all variables.</p>\n<p>For example: if..</p>\n<pre><code>Total_time = 10\nIdle_time = 3\n</code></pre>\n<p>I want the bar graph to show the max value of idle time and total time for each customer.</p>\n<p>So far when I try to use stacked=True, it just stacks Total &amp; Idle time and creates a bar graph with a max value of 10+3=13. I want two separate bars overlapping each other where one bar maxes at 10 and the other at 3.</p>\n<pre><code>data = df.pivot_table(df,index=['Customer'], aggfunc=np.sum)\nax = data[['Total time [hours]', 'Idle time [hours]']].plot.bar(stacked=True)\nax.set_ylabel(&quot;Miles&quot;)\nax.set_title(&quot;Total Miles Per Customer&quot;)\n\nplt.show()\n</code></pre>\n<p>I've uploaded a screenshot of the excel version, and pandas version for further illustration.</p>\n<h3>Excel Image</h3>\n<p><img src=\"https://i.stack.imgur.com/FDJWC.jpg\" alt=\"Excel Image\" /></p>\n<h3>Pandas Image</h3>\n<p><img src=\"https://i.stack.imgur.com/PsvDn.jpg\" alt=\"Pandas Image\" /></p>\n<p>Thanks in advance.</p>\n<hr />\n<p><strong>UPDATE</strong>: Ted with the solution below.</p>\n"}, {"tags": ["python", "string", "python-3.x", "character-encoding"], "comments": [{"owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1483568846, "post_id": 41474169, "comment_id": 70154477, "body": "Once you understand <i>why</i> Python3 separates strings and binary data into two different types, this will be a lot easier to answer. See <a href=\"http://eli.thegreenplace.net/2012/01/30/the-bytesstr-dichotomy-in-python-3\" rel=\"nofollow noreferrer\">eli.thegreenplace.net/2012/01/30/&hellip;</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1483569292, "post_id": 41474169, "comment_id": 70154671, "body": "<i>Everything</i> is binary data."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6627712"}, "edited": false, "score": 0, "creation_date": 1492500301, "post_id": 41474169, "comment_id": 73987299, "body": "It is so natural to think that every thing in computers has a  binary representation, but in Python it&#39;s not that way - too bad!  In particular, strings are unicode objects with no encoding and an encoding is a map from unicode objects to bytes objects. It&#39;s one way to see strings, bytes objects and their relationship, but I don&#39;t see what is gained."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7376183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad93f64ab7f251281d660c2a39e9eed?s=128&d=identicon&r=PG&f=1", "display_name": "QuintenG", "link": "https://stackoverflow.com/users/7376183/quinteng"}, "edited": false, "score": 0, "creation_date": 1483630845, "post_id": 41474215, "comment_id": 70183336, "body": "This explanation is very helpful. This fills in a gap in my understanding that was haunting me elsewhere as well. Thanks!"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 5, "last_activity_date": 1483569277, "last_edit_date": 1483569277, "creation_date": 1483568591, "answer_id": 41474215, "question_id": 41474169, "link": "https://stackoverflow.com/questions/41474169/converting-python-3-bytes-object-to-string-when-bytes-object-apparently-only-con/41474215#41474215", "title": "Converting Python 3 bytes object to string when bytes object apparently only contains characters", "body": "<p>Don't confuse the developer-friendly <em>representation</em> of the <code>bytes</code> object with the data that is contained in it. You have binary data either way.</p>\n\n<p>The developer representation makes it easy for you to see what is contained by showing anything that just <em>happens</em> to be a valid ASCII codepoint as that ASCII character, rather than the <code>\\xhh</code> escape code. It's just easier to read text encoded as ASCII that way, and a lot of the world's text happens to be ASCII encoded.</p>\n\n<p>You'll have a harder time when the data is not within the ASCII range however:</p>\n\n<pre><code>&gt;&gt;&gt; '\u00c5\u00e6\u00f8\u00e9\u00ef'.encode('utf8')\nb'\\xc3\\x85\\xc3\\xa6\\xc3\\xb8\\xc3\\xa9\\xc3\\xaf'\n</code></pre>\n\n<p>That's a UTF-8 byte sequence encoding text with accents. The above may be a little bit contrived, but most non-English text will include <em>some</em> non-ASCII text. Even English text can contain em-dashes or fancy quotes, and the <code>b'...'</code> bytes version of that is not nearly as readable as the properly decoded text version:</p>\n\n<pre><code>&gt;&gt;&gt; '\u201cKrager\u00f8\u201d is a town in Norway \u2013 in the province of Vestfold'.encode('utf8')\nb'\\xe2\\x80\\x9cKrager\\xc3\\xb8\\xe2\\x80\\x9d is a town in Norway \\xe2\\x80\\x93 in the province of Vestfold'\n</code></pre>\n\n<p>Note that the <code>b'....'</code> output is the result of using the <a href=\"https://docs.python.org/3/library/functions.html#repr\" rel=\"nofollow noreferrer\"><code>repr()</code> function</a> on a <code>bytes</code> object; that calls the <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__repr__\" rel=\"nofollow noreferrer\"><code>object.__repr__()</code> method</a>, which has the explicit function of producing a developer-friendly string for you. There is no dedicated <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__str__\" rel=\"nofollow noreferrer\"><code>object.__str__()</code> method</a> on a <code>bytes</code> object, the <code>__repr__</code> method is called instead, even when you use the <code>str()</code> function. The proper way to convert a <code>bytes</code> <em>value</em> to a string is to decode (using the correct codec for the data).</p>\n\n<p>Of course, when you have binary data that represents <em>something else</em>, like, say, image data, then keep it as <code>bytes</code>. There is no text to decode there.</p>\n"}], "owner": {"reputation": 3, "user_id": 7376183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad93f64ab7f251281d660c2a39e9eed?s=128&d=identicon&r=PG&f=1", "display_name": "QuintenG", "link": "https://stackoverflow.com/users/7376183/quinteng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4519, "favorite_count": 3, "accepted_answer_id": 41474215, "answer_count": 1, "score": 0, "last_activity_date": 1483631591, "creation_date": 1483568304, "last_edit_date": 1483631591, "question_id": 41474169, "link": "https://stackoverflow.com/questions/41474169/converting-python-3-bytes-object-to-string-when-bytes-object-apparently-only-con", "title": "Converting Python 3 bytes object to string when bytes object apparently only contains characters", "body": "<p>I'm new to Python 3 and it seems that I can't quite completely grasp unicode and character encoding.</p>\n\n<p>I'm working with the output of another tool that returns the content of an html page as a bytes object. Other tools we use need this output to be in bytes type, but, I'd like to convert the bytes output to a string for some parsing and comparison to other strings. For cases that I'm interested in, printing the output bytes object shows only characters and no \\x or \\u binary. I'm a little confused on how best to do this and why the methods that create the desired output, actually do work.</p>\n\n<p>I've read elsewhere that .decode() should be used in this context and this does work, but I don't understand why I am decoding an object that is already characters. From what I understand, decoding is intended for binary numbers, for example:</p>\n\n<pre><code>&gt;&gt;&gt; b'\\x41'.decode('utf-8')\n'A'\n</code></pre>\n\n<p>In my understanding, all I really want to do is tell Python that an object that's been labeled as a bytes type object is actually a str object. Simply using the str() function on the bytes object also accomplishes this goal, but adds the \"b\" prefix and adds quotations around the string.</p>\n\n<p>Here are the two solutions I'm working with:</p>\n\n<pre><code>&gt;&gt;&gt; str(b'htmltext')\n\"b'htmltext'\"\n\n&gt;&gt;&gt; b'htmltext'.decode('utf-8')\n'htmltext'\n</code></pre>\n\n<p>Essentially, either of these solutions appears to achieve what I'm looking for, but the decode() obviously seems cleaner and, from what I've read, the recommended method. I'm wondering why decode() works, given that, apparently, I'm not converting binary numbers to characters. Furthermore, is there any reason other than the unappealing \"b\" and quotation marks in the output that str() would not be a valid solution here?</p>\n"}, {"tags": ["python", "c", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1483568879, "post_id": 41474163, "comment_id": 70154494, "body": "Related, the case Linus tries to amplify walks a pointer-to-pointer through the list, addressing not just the previous node, but rather the pointer that points to the prospect node. No external pointer-to-node is used beyond <code>head</code>, Rather, a pointer-to-pointer is used instead. And fwiw, the samples posted will both &quot;leak&quot; the removed-node if nothing else points to it in the given example. They will be unreachable once the link is severed."}], "answers": [{"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 2, "last_activity_date": 1483569114, "creation_date": 1483569114, "answer_id": 41474335, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/41474335#41474335", "title": "Singly-Linked List remove", "body": "<p>Sure you can do this in Python. What he's saying is that you have some data structure that represents the list itself and points to the head of the list, and you manipulate that just as you would the pointer in a list item when you're dealing with the first list item.</p>\n\n<p>Now Python is not C so the implementation would be different, but the principle applies. The list itself is not the same object as its first item, and list items should not have the same methods as the list as a whole, so it makes sense to use separate kinds of objects for them.</p>\n\n<p>Both of them can, however, use an attribute of the same name (e.g. <code>next</code>) to point to the next item. So when you iterate through the list, and you are at the first item, the \"previous\" item is the list itself, and you are manipulating its <code>next</code> attribute if you need to remove the first item.</p>\n\n<p>In the real world, of course, you would never write your own Python linked list class except as an exercise. The built-in <code>list</code> is more efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1483569144, "creation_date": 1483569144, "answer_id": 41474342, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/41474342#41474342", "title": "Singly-Linked List remove", "body": "<p>You cannot use Linus's specific trick in Python, because, as you well know, Python does not have pointers (as such) or an address-of operator.  You can still, however, eliminate a special case for the list head by giving the list a dummy head node.  You can do that as an inherent part of the design of your list, or you can do it on the fly just by creating an extra node and making it refer to the first data-bearing node as its next node.  Either way, all the nodes you might want to delete are then interior nodes, not special cases.</p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 4835086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5b6b4edeab1b28365049c395cdce1?s=128&d=identicon&r=PG&f=1", "display_name": "Andi Kleve", "link": "https://stackoverflow.com/users/4835086/andi-kleve"}, "is_accepted": false, "score": 1, "last_activity_date": 1483570598, "creation_date": 1483570598, "answer_id": 41474632, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/41474632#41474632", "title": "Singly-Linked List remove", "body": "<p>My first thought upon reading your question was: why would you want to build a singly linked list in python? Python offers a wealth of collection types and you can use these without having to worry about whether they are implemented as singly linked list, as double linked list or as some non-recursive data structure (which are usually easier to handle).</p>\n\n<p>But the answer to your question is: Python allows of course to build a singly linked list. For example, the following code does just that:</p>\n\n<pre><code>class Node:\n    def __init__(self, x, next):\n        self.x = x\n        self.next = next\n\n    def __str__(self):\n        return \"&lt;{}, {!s}&gt;\".format(self.x, self.next)\n\nn = Node(1, None)\nn = Node(2, n)\nn = Node(3, n)\nprint(n)  # output: &lt;3, &lt;2, &lt;1, None&gt;&gt;&gt;\n\nn.next.next = n.next.next.next\nprint(n)  # output: &lt;3, &lt;2, None&gt;&gt;\n</code></pre>\n\n<p>The difference to C is: we did not have to <code>malloc()</code> or work with pointers because python handles memory for us. Python has references instead of pointers, they are similar but much safer and easier to use.</p>\n\n<p>However, before implementing a linked list, you should consider what your requirements are regarding your collection and maybe you can pick a good one from the built-ins or from the collections module.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": false, "score": 0, "last_activity_date": 1514356594, "last_edit_date": 1514356594, "creation_date": 1514355579, "answer_id": 47987293, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/47987293#47987293", "title": "Singly-Linked List remove", "body": "<p>You need two levels of indirection to do it the way Linus suggests, but you can potentially do it in Python perhaps by having a reference to an object which stores a reference to an object or something of this sort (an index to an index?). That said, I don't think it maps so elegantly or efficiently to Python and it'd probably be quite wasteful to use an object just to represent a single link in a linked structure. </p>\n\n<p>In Python's case I'd just do the additional branching to check for cases where you're removing from the head unless there's some trick I'm missing.</p>\n\n<p>As for implementing linked lists yourself, I actually find many use cases where the standard libraries don't suffice. Here's one example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/S9i9A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S9i9A.png\" alt=\"enter image description here\"></a></p>\n\n<p>... where the grid might have 10,000 cells. Most linked lists provided by standard libraries aren't optimized to store 10,000+ linked lists in the size of a 32-bit index per list since they're trying to provide interfaces that allow the linked list to be used in isolation (not using a separate backing data structure for storage like an array). Typically the most efficient use of a linked list is one that doesn't own memory or manage any resources. It's just linking data in an auxiliary fashion already allocated and managed in another data structure, like this for a 128-bit (16-byte) tree node in an n-ary tree where elements can be stored at any level of the hierarchy:</p>\n\n<pre><code>struct TreeNode\n{\n     int32 parent;       // parent index or -1 for no parent\n     int32 first_child;  // first child of this node or -1\n     int32 next_sibling; // next child for the parent node or -1\n     int32 element;      // element data stored in this node or -1\n                         // if no data is associated\n};\n</code></pre>\n\n<p>So there's a lot of use cases for implementing your own linked lists and other linked structures which are significantly more efficient for a more narrowly-applicable use case (grid data structures, octrees, quad-trees, graphs, etc), but again, I don't think you can use this trick in languages that don't easily allow you to utilize two or more levels of pointer indirection. Python inherently only has one for objects -- same with Java and C#. You'd need something like a <em>\"reference to a reference to an object\"</em> or an <em>\"index to an index to an object\"</em> or <em>\"an index to an object reference to an object\"</em>.</p>\n\n<p>Also linked lists generally aren't so useful in languages that don't allow you to manage where everything is stored in memory since you can end up getting cache misses galore iterating through linked lists otherwise if each list node is fragmented in memory as would often be the case after a GC cycle, e.g. For linked lists to be really efficient as in the case of the Linux kernel requires you to be able to really have fine control over where each node resides in memory so that list traversal is actually mostly, if not entirely, just iterating through contiguous chunks of memory. Otherwise you're generally better-off using small arrays even if that implies linear-time removals and insertions to/from the middle.</p>\n"}], "owner": {"reputation": 3516, "user_id": 1597944, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c1d9df1b61a99e23af28bf753da54256?s=128&d=identicon&r=PG&f=1", "display_name": "Harish Kayarohanam", "link": "https://stackoverflow.com/users/1597944/harish-kayarohanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1514356594, "creation_date": 1483568292, "last_edit_date": 1483568537, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove", "title": "Singly-Linked List remove", "body": "<p>I was doing Singly-Linked List implementation and I remember Linus Torvalds talking about it <a href=\"https://youtu.be/o8NPllzkFhE?t=890\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>In a singly-linked list in order to remove a node we should have access to the previous node and then change the node it is currently pointing to.</p>\n\n<p>Like this\n<a href=\"https://i.stack.imgur.com/rVCdE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rVCdE.png\" alt=\"enter image description here\"></a></p>\n\n<p>So any way we should have access to the previous node.</p>\n\n<p>But Linus Torvalds removed the special case by using the idea of address in C. So that head also has the 'previous thing' which is the address of head which points to head. So he has used C's feature of pointer and address to remove special case.</p>\n\n<p>The normal code with special case \n<a href=\"https://i.stack.imgur.com/gvF0j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gvF0j.png\" alt=\"enter image description here\"></a></p>\n\n<p>The code with special case becoming normal case\n<a href=\"https://i.stack.imgur.com/7XBSb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7XBSb.png\" alt=\"enter image description here\"></a></p>\n\n<p>I think this kind of special case removal in singly linked list cannot be done in python, because we don't have the concept of pointers (and hence I will not be able to go one step before head)? Am I right ?</p>\n"}, {"tags": ["python", "macros", "gdb", "preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1483589997, "creation_date": 1483589997, "answer_id": 41477244, "question_id": 41474153, "link": "https://stackoverflow.com/questions/41474153/gdb-api-preprocessor-macro/41477244#41477244", "title": "gdb API preprocessor macro", "body": "<blockquote>\n  <p>it is nowhere to be found in the current gdb source code.</p>\n</blockquote>\n\n<p>It doesn't appear that the patches have ever been approved or committed, so you are out of luck.</p>\n\n<p>You can of course try to apply the patches to current GDB, or even GDB current as of the time patches were sent.</p>\n"}], "owner": {"reputation": 772, "user_id": 7376141, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IHSDj.png?s=128&g=1", "display_name": "dwjbosman", "link": "https://stackoverflow.com/users/7376141/dwjbosman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 41477244, "answer_count": 1, "score": 2, "last_activity_date": 1483589997, "creation_date": 1483568251, "question_id": 41474153, "link": "https://stackoverflow.com/questions/41474153/gdb-api-preprocessor-macro", "title": "gdb API preprocessor macro", "body": "<p>I would like to access preprocessor macro definitions using GDB's embedded Python interpreter. Is there a Python macro API for GDB?</p>\n\n<p>in GDB you can do:</p>\n\n<p>gdb> info macro MACRO</p>\n\n<p>But there is no mention of a Python API for macro's in the documentation.</p>\n\n<p><a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Python-API.html\" rel=\"nofollow noreferrer\">https://sourceware.org/gdb/onlinedocs/gdb/Python-API.html</a></p>\n\n<p>Also I came across a few messages about development of a Python macro API.</p>\n\n<p><a href=\"https://sourceware.org/ml/gdb-patches/2011-08/msg00441.html\" rel=\"nofollow noreferrer\">https://sourceware.org/ml/gdb-patches/2011-08/msg00441.html</a></p>\n\n<p>It mentions a py-macro.c file. But it is nowhere to be found in the current gdb source code.</p>\n"}, {"tags": ["python", "python-3.x", "syntax", "beautifulsoup"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1483568327, "post_id": 41473988, "comment_id": 70154279, "body": "Are you trying to find all <code>&lt;a&gt;</code> elements contained in all <code>&lt;li&gt;</code> elements? Just use an XPath expression."}, {"owner": {"reputation": 10600, "user_id": 6856342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10020e210dd11a731c13627b306d83d9?s=128&d=identicon&r=PG", "display_name": "\u5b8f\u6770\u674e", "link": "https://stackoverflow.com/users/6856342/%e5%ae%8f%e6%9d%b0%e6%9d%8e"}, "edited": false, "score": 1, "creation_date": 1483580434, "post_id": 41473988, "comment_id": 70158097, "body": "you should post html code"}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 4488349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-mnKoSd4sEjg/AAAAAAAAAAI/AAAAAAAABME/VNYimyyUwno/photo.jpg?sz=128", "display_name": "debo", "link": "https://stackoverflow.com/users/4488349/debo"}, "is_accepted": false, "score": 0, "last_activity_date": 1483580783, "last_edit_date": 1483580783, "creation_date": 1483579894, "answer_id": 41475975, "question_id": 41473988, "link": "https://stackoverflow.com/questions/41473988/python-beautiful-soup-syntax/41475975#41475975", "title": "Python Beautiful Soup Syntax", "body": "<p>You could do it in a single line with a list comprehension. </p>\n\n<pre><code>atags = [t.a for t in s.find_all('li') if t.a != None]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7359903, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EWosJd1c3T0/AAAAAAAAAAI/AAAAAAAAAEg/ncBd3tGVM98/photo.jpg?sz=128", "display_name": "Zepol", "link": "https://stackoverflow.com/users/7359903/zepol"}, "edited": false, "score": 0, "creation_date": 1483588153, "post_id": 41476058, "comment_id": 70159817, "body": "not exactly what I was looking for but it helped me get to where I wanted. thanks."}], "tags": [], "owner": {"reputation": 10600, "user_id": 6856342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10020e210dd11a731c13627b306d83d9?s=128&d=identicon&r=PG", "display_name": "\u5b8f\u6770\u674e", "link": "https://stackoverflow.com/users/6856342/%e5%ae%8f%e6%9d%b0%e6%9d%8e"}, "is_accepted": true, "score": 1, "last_activity_date": 1483580546, "creation_date": 1483580546, "answer_id": 41476058, "question_id": 41473988, "link": "https://stackoverflow.com/questions/41473988/python-beautiful-soup-syntax/41476058#41476058", "title": "Python Beautiful Soup Syntax", "body": "<pre><code>soup.select('li a')\n</code></pre>\n\n<p>this will return a list of <code>a</code> tag which is contained by <code>li</code> tag</p>\n"}], "owner": {"reputation": 25, "user_id": 7359903, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EWosJd1c3T0/AAAAAAAAAAI/AAAAAAAAAEg/ncBd3tGVM98/photo.jpg?sz=128", "display_name": "Zepol", "link": "https://stackoverflow.com/users/7359903/zepol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 41476058, "answer_count": 2, "score": 1, "last_activity_date": 1483580783, "creation_date": 1483567413, "question_id": 41473988, "link": "https://stackoverflow.com/questions/41473988/python-beautiful-soup-syntax", "title": "Python Beautiful Soup Syntax", "body": "<p>I am looking for ways to simplify my beautiful soup code.</p>\n\n<p>Normally while parsing I could do this:</p>\n\n<pre><code>content = soup.find_all('li')\nlinks_from_content = content.find_all('a')\n</code></pre>\n\n<p>is there a way to do this single line? Something like:</p>\n\n<pre><code>content = harpatchnumber.find_all('li').find_all('a')\n</code></pre>\n\n<p>this seems to not be working so, I would like to know how i could do it better</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1483567380, "post_id": 41473958, "comment_id": 70153837, "body": "That&#39;s a reference to the C implementation: <a href=\"https://hg.python.org/cpython/file/tip/Modules/_randommodule.c\" rel=\"nofollow noreferrer\">hg.python.org/cpython/file/tip/Modules/_randommodule.c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "is_accepted": false, "score": 4, "last_activity_date": 1553262369, "last_edit_date": 1553262369, "creation_date": 1483567495, "answer_id": 41473999, "question_id": 41473958, "link": "https://stackoverflow.com/questions/41473958/what-is-pythons-random/41473999#41473999", "title": "What is python&#39;s _random?", "body": "<p>It's a reference to C Python's <a href=\"https://github.com/python/cpython/blob/master/Modules/_randommodule.c#L521\" rel=\"nofollow noreferrer\">_random module</a>. It is implemented in C, so there is no .py file to find.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1950164"}, "edited": false, "score": 0, "creation_date": 1483568783, "post_id": 41474012, "comment_id": 70154459, "body": "Ok so at the end of the <code>seed</code> method you see <code>super(Random, self).seed(a)</code>. So <code>super(Random)</code> is actually the C-version of Random, is that right? However, opening the file that you linked I can&#39;t find the function <code>seed()</code> there..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1950164"}, "edited": false, "score": 0, "creation_date": 1483569179, "post_id": 41474012, "comment_id": 70154611, "body": "&quot;Just type the module name at the interactive prompt to see the path:&quot; That&#39;s not what I get. I get this: <code>&gt;&gt;&gt; _random &lt;module &#39;_random&#39; (built-in)&gt;</code>"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1483569381, "post_id": 41474012, "comment_id": 70154706, "body": "OK. I am on Mac. Maybe it is different on other platforms."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1950164"}, "edited": false, "score": 0, "creation_date": 1483569771, "post_id": 41474012, "comment_id": 70154853, "body": "I&#39;ve marked this as answered. But I&#39;d suggest that you edit back in that link to the source code repo in the response body. Originally it was there."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1483570232, "post_id": 41474012, "comment_id": 70155039, "body": "Updated accordingly."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 8, "last_activity_date": 1553261810, "last_edit_date": 1553261810, "creation_date": 1483567522, "answer_id": 41474012, "question_id": 41473958, "link": "https://stackoverflow.com/questions/41473958/what-is-pythons-random/41474012#41474012", "title": "What is python&#39;s _random?", "body": "<p>It is common practice to use a leading underscore for modules implemented in C. Often the pattern <code>_mod</code> for this C module and <code>mod</code> for a Python module that imports this <code>_mod</code> is used. You will find this for several modules of the standard library. Typically, you should use <code>mod</code> and not <code>_mod</code>.</p>\n\n<p>On Mac OS X there is a file:</p>\n\n<pre><code>_random.so\n</code></pre>\n\n<p>In the directory of the shared libraries used by Python.</p>\n\n<p>Just type the module name at the interactive prompt to see the path:</p>\n\n<pre><code>&gt;&gt;&gt; _random\n&gt;&gt;&gt; &lt;module '_random' from '/path/to/python/sharedlibs/_random.so'&gt;\n</code></pre>\n\n<p>BTW, not all modules you can import have a file associated with them. Some are part of the Python executeable, the builtin modules: </p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.builtin_module_names\n('_ast', '_codecs', '_collections', '_functools', '_imp', '_io', '_locale',\n '_operator', '_signal', '_sre', '_stat', '_string', '_symtable', '_thread',\n '_tracemalloc', '_warnings', '_weakref', 'atexit', 'builtins', 'errno', \n 'faulthandler', 'gc', 'itertools', 'marshal', 'posix', 'pwd', 'sys', \n 'time', 'xxsubtype', 'zipimport')\n</code></pre>\n\n<p>So if you get on your platform:</p>\n\n<pre><code>&gt;&gt;&gt; _random\n_random &lt;module '_random' (built-in)&gt;\n</code></pre>\n\n<p>Than <code>_random</code> is part of Python executeable itself.</p>\n\n<p>In the C source <a href=\"https://github.com/python/cpython/blob/master/Modules/_randommodule.c#L455\" rel=\"nofollow noreferrer\">_randommodule.c</a> you can find the methods of <code>Random</code> that are made available for use in Python:</p>\n\n<pre><code>static PyMethodDef random_methods[] = {\n    {\"random\",          (PyCFunction)random_random,  METH_NOARGS,\n        PyDoc_STR(\"random() -&gt; x in the interval [0, 1).\")},\n    {\"seed\",            (PyCFunction)random_seed,  METH_VARARGS,\n        PyDoc_STR(\"seed([n]) -&gt; None.  Defaults to current time.\")},\n    {\"getstate\",        (PyCFunction)random_getstate,  METH_NOARGS,\n        PyDoc_STR(\"getstate() -&gt; tuple containing the current state.\")},\n    {\"setstate\",          (PyCFunction)random_setstate,  METH_O,\n        PyDoc_STR(\"setstate(state) -&gt; None.  Restores generator state.\")},\n    {\"getrandbits\",     (PyCFunction)random_getrandbits,  METH_VARARGS,\n        PyDoc_STR(\"getrandbits(k) -&gt; x.  Generates an int with \"\n                  \"k random bits.\")},\n    {NULL,              NULL}           /* sentinel */\n};\n</code></pre>\n\n<p>Compare to:</p>\n\n<pre><code>&gt;&gt;&gt; [x for x in dir(_random.Random) if not x.startswith('__')]\n['getrandbits', 'getstate', 'jumpahead', 'random', 'seed', 'setstate']\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1950164"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2288, "favorite_count": 2, "accepted_answer_id": 41474012, "answer_count": 2, "score": 8, "last_activity_date": 1553262369, "creation_date": 1483567275, "last_edit_date": 1483866462, "question_id": 41473958, "link": "https://stackoverflow.com/questions/41473958/what-is-pythons-random", "title": "What is python&#39;s _random?", "body": "<p>If you open <code>random.py</code> to see how it works, its class <code>Random</code> subclasses <code>_random.Random</code>:</p>\n\n<pre><code>import _random\n\nclass Random(_random.Random):\n    \"\"\"Random number generator base class used by bound module functions.\n\n    Used to instantiate instances of Random to get generators that don't\n    share state.  Especially useful for multi-threaded programs, creating\n    a different instance of Random for each thread, and using the jumpahead()\n    method to ensure that the generated sequences seen by each thread don't\n    overlap.\n\n    Class Random can also be subclassed if you want to use a different basic\n    generator of your own devising: in that case, override the following\n    methods: random(), seed(), getstate(), setstate() and jumpahead().\n    Optionally, implement a getrandbits() method so that randrange() can cover\n    arbitrarily large ranges.\n\n    \"\"\"\n</code></pre>\n\n<p>I can find the file <code>random.py</code> easily by doing:</p>\n\n<pre><code>In [1]: import sys\nIn [2]: print random.__file__\n/usr/lib/python2.7/random.pyc\n</code></pre>\n\n<p>However <code>_random</code> does not have this variable:</p>\n\n<pre><code>In [3]: _random.__file__\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-295-a62b7df330e2&gt; in &lt;module&gt;()\n----&gt; 1 _random.__file__\n\nAttributeError: 'module' object has no attribute '__file__'\n</code></pre>\n\n<p>So what is <code>_random</code>, why does <code>random</code> subclass it, and where can I find its corresponding file?</p>\n"}, {"tags": ["python", "command-line", "sys"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1483567615, "post_id": 41473945, "comment_id": 70153958, "body": "There&#39;s nothing odd whatsoever about the <code>sys.exit()</code>, and we already have (answered!) questions in our knowledgebase about the practices used there, comparing <code>__name__</code> to <code>__main__</code>. Please consider narrowing your question to no longer have a duplicative component; arguably, spanning both pre-answered and non-answered questions makes it &quot;too broad&quot;."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1483567765, "post_id": 41473945, "comment_id": 70154032, "body": "...one example among many: <a href=\"http://stackoverflow.com/questions/4041238/why-use-def-main\">Why use <code>def main()</code>?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1483567625, "creation_date": 1483567625, "answer_id": 41474038, "question_id": 41473945, "link": "https://stackoverflow.com/questions/41473945/why-def-mainargv-name-and-if-name-main-sys-exitmainsys-a/41474038#41474038", "title": "Why def main(argv=[__name__]) and if __name__ == &quot;__main__&quot;: sys.exit(main(sys.argv))?", "body": "<p>The <code>main()</code> definition allows for the possibility that <code>main()</code> will be called in other ways than the <code>sys.exit()</code> line at the bottom of the file. This might be an example of defensive programming, or it might indicate other supported uses of this file.</p>\n\n<p>One such other supported use might be to invoke it from another Python program, like so:</p>\n\n<pre><code>import your_module\nyour_module.main()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 3780150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099f813987971bf4cc8a77fffa210d37?s=128&d=identicon&r=PG&f=1", "display_name": "D. W.", "link": "https://stackoverflow.com/users/3780150/d-w"}, "edited": false, "score": 0, "creation_date": 1483568004, "post_id": 41474045, "comment_id": 70154141, "body": "Hmmm... Interesting. The original code does not use <code>sys.arvg[0]</code> at all, or any of the elements of argv, in the <code>main()</code> function. If this function was run as a module instead of out of the command line, would defining argv like this ensure that the main() function always uses the arguments specific in the command line argument of the script that is calling this as a module?"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 133, "user_id": 3780150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099f813987971bf4cc8a77fffa210d37?s=128&d=identicon&r=PG&f=1", "display_name": "D. W.", "link": "https://stackoverflow.com/users/3780150/d-w"}, "edited": false, "score": 0, "creation_date": 1483569619, "post_id": 41474045, "comment_id": 70154789, "body": "If the function doesn&#39;t use <code>argv</code>, then it has no meaning for the use of it as a parameter. Otherwise, you can control the main functionality by sending in your custom parameters (or ensuring they will exist with the default <code>argv</code>)"}], "tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 1, "last_activity_date": 1483567638, "creation_date": 1483567638, "answer_id": 41474045, "question_id": 41473945, "link": "https://stackoverflow.com/questions/41473945/why-def-mainargv-name-and-if-name-main-sys-exitmainsys-a/41474045#41474045", "title": "Why def main(argv=[__name__]) and if __name__ == &quot;__main__&quot;: sys.exit(main(sys.argv))?", "body": "<p>As for the <code>argv=[__name__]</code>, the original dev probably wanted to keep the option to run this function not from the command line (i.e. invoked by another module), and provided <code>__name__</code> because it uses <code>sys.argv[0]</code> for some functionality.</p>\n\n<p>The <code>main</code> function is nothing to do with python, just some convention (derived from languages like <code>C</code>). <code>sys.exit(main(sys.argv))</code> will trigger the <code>sys.exit</code> function with an exit code equivalent to the product of running the <code>main</code> function with the received command line arguments. <code>main</code> probably should return an appropriate exit code (<code>0</code> is to indicate OK, others imply various exceptions).</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1483567648, "creation_date": 1483567648, "answer_id": 41474047, "question_id": 41473945, "link": "https://stackoverflow.com/questions/41473945/why-def-mainargv-name-and-if-name-main-sys-exitmainsys-a/41474047#41474047", "title": "Why def main(argv=[__name__]) and if __name__ == &quot;__main__&quot;: sys.exit(main(sys.argv))?", "body": "<p>When a script is run from the CLI, <code>argv[0]</code> is the name of the script, and the rest of <code>argv</code> is the command-line arguments. So the rest of <code>main()</code> may expect that <code>argv[0]</code> will always be filled in.</p>\n\n<p>The default value is ensuring that <code>argv[0]</code> has something analogous in it when the file is being imported instead of being run directly. In this case, it's the name of the module.</p>\n"}], "owner": {"reputation": 133, "user_id": 3780150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099f813987971bf4cc8a77fffa210d37?s=128&d=identicon&r=PG&f=1", "display_name": "D. W.", "link": "https://stackoverflow.com/users/3780150/d-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4340, "favorite_count": 2, "answer_count": 3, "score": 0, "last_activity_date": 1483567850, "creation_date": 1483567212, "last_edit_date": 1483567850, "question_id": 41473945, "link": "https://stackoverflow.com/questions/41473945/why-def-mainargv-name-and-if-name-main-sys-exitmainsys-a", "title": "Why def main(argv=[__name__]) and if __name__ == &quot;__main__&quot;: sys.exit(main(sys.argv))?", "body": "<p>I'm working with/rewriting a code that first defines a function as follows:</p>\n\n<pre><code>def main(argv=[__name__]):\n    ...\n    *rest of code*\n    ...\n</code></pre>\n\n<p>and ends with:</p>\n\n<pre><code>if __name__ == \"__main__\":\n    sys.exit(main(sys.argv))\n</code></pre>\n\n<p>I'm under the impression that what this is doing is checking to make sure that the script is being executed from the command line, and then running the function <code>main</code> with the arguments provided as it exits python. But then, why is it necessary to preset the variable <code>argv</code> to <code>[__name__]</code> in the function definition? This is not my code, so I don't know the original intention behind this. I am, however, new to using <code>if __name__ == \"__main__\":</code> lines to spot check command line execution, so maybe there is some glaringly obvious reason for this syntax that I'm missing. Any help, or further detail on <code>main</code> function definition and argument/command-line-vs-module testing would be appreciated.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1483567082, "post_id": 41473887, "comment_id": 70153690, "body": "<code>df.groupby([&#39;UD&#39;,&#39;QTY&#39;])[[&#39;TIME_1&#39;,&#39;TIME_2&#39;]].mean()</code> - is that what you want?"}, {"owner": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1483567324, "post_id": 41473887, "comment_id": 70153806, "body": "@MaxU: Please see my update. I posted the expected result."}, {"owner": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "reply_to_user": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1483567364, "post_id": 41473887, "comment_id": 70153824, "body": "@DavidZ: I am using the last version of pandas: 0.19.1"}, {"owner": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1483567523, "post_id": 41473887, "comment_id": 70153912, "body": "@MaxU: Thanks. But it will create two columns <code>count</code>: one per <code>TIME_1</code> and another per <code>TIME_2</code>. I need the total count of rows per group."}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1483567778, "post_id": 41473887, "comment_id": 70154037, "body": "@Dinosaurius (3 comments up) Sorry, that was actually my mistake. Anyway, do you want to group by <code>GRADE</code> or not? You say both in your question."}], "answers": [{"comments": [{"owner": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "edited": false, "score": 0, "creation_date": 1483567631, "post_id": 41474022, "comment_id": 70153968, "body": "Could the final solution contain only rows that I specified as the expected result in my question?"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "edited": false, "score": 2, "creation_date": 1483567756, "post_id": 41474022, "comment_id": 70154025, "body": "It looks like you are only grouping by UD and QTY and not GRADE. Your final dataframe does not match what you wrote"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1483569923, "post_id": 41474022, "comment_id": 70154908, "body": "yeah, this solution is MUCH better compared to mine"}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": true, "score": 5, "last_activity_date": 1483569108, "last_edit_date": 1483569108, "creation_date": 1483567560, "answer_id": 41474022, "question_id": 41473887, "link": "https://stackoverflow.com/questions/41473887/group-rows-and-calculate-mean-and-count/41474022#41474022", "title": "Group rows and calculate mean and count", "body": "<p>It's possible to do all different kind of aggregations in the same step without merging or assigning. <code>groupby.agg</code> allows you to do this with a dictionary of columns mapped to the aggregation function used</p>\n\n<pre><code>df1 = df.groupby(['UD', 'QTY']).agg({'TIME_1': 'mean', \n                                     'TIME_2': 'mean', \n                                     'GRADE':'count'}).reset_index()\n\n   UD  QTY  TIME_1  GRADE  TIME_2\n0   1   20  24.675      4  17.025\n1   2   25  23.300      1  19.900\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "is_accepted": false, "score": 1, "last_activity_date": 1483568292, "last_edit_date": 1483568292, "creation_date": 1483567651, "answer_id": 41474048, "question_id": 41473887, "link": "https://stackoverflow.com/questions/41473887/group-rows-and-calculate-mean-and-count/41474048#41474048", "title": "Group rows and calculate mean and count", "body": "<p>The argument to <code>DataFrame.groupby()</code> specifies which columns should be used to combine rows into groups. So if you write</p>\n\n<pre><code>df.groupby([['TIME_1', 'TIME_2']])\n</code></pre>\n\n<p>then Pandas will combine rows which have the same values of <code>TIME_1</code> and <code>TIME_2</code>. But you want to combine rows which have the same values of <code>UD</code> and <code>QTY</code>. (If you also want to use <code>GRADE</code> to group rows, just add that in where appropriate.) So use</p>\n\n<pre><code>&gt;&gt;&gt; g = df.groupby([['UD', 'QTY']])\n</code></pre>\n\n<p>Then you can just call <code>mean()</code> on the resulting object to get the means of the groups.</p>\n\n<pre><code>&gt;&gt;&gt; g.mean()\n        GRADE  TIME_1  TIME_2\nUD QTY                       \n1  20    4.75  24.675  17.025\n2  25    4.00  23.300  19.900\n</code></pre>\n\n<p>Similarly, you can call <code>count()</code> to get row counts.</p>\n\n<pre><code>&gt;&gt;&gt; g.count()\n        GRADE  TIME_1  TIME_2\nUD QTY                       \n1  20       4       4       4\n2  25       1       1       1\n</code></pre>\n\n<p>You can now assemble these pieces into a new <code>DataFrame</code> using <code>pandas.concat()</code>.</p>\n\n<pre><code>&gt;&gt;&gt; m = g.mean()\n&gt;&gt;&gt; c = g.count()\n&gt;&gt;&gt; new_df = concat([m, c], axis=1)\n&gt;&gt;&gt; new_df\n        TIME_1  TIME_2  GRADE\nUD QTY                       \n1  20   24.675  17.025      4\n2  25   23.300  19.900      1\n</code></pre>\n\n<p>All that remains is to change <code>UD</code> and <code>QTY</code> from index columns to regular columns, which you can do with <code>new_df.reset_index()</code>, and change the column names to your liking, which you can do by assigning a list to <code>new_df.columns</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "edited": false, "score": 0, "creation_date": 1483569577, "post_id": 41474064, "comment_id": 70154776, "body": "Do I understand correctly that if, for instance, I do not need to calculate mean times, then I should simply run <code>g.assign(COUNT=g[[&#39;TIME_1&#39;,&#39;TIME_2&#39;]].size().values)</code> excluding <code>[[&#39;TIME_1&#39;,&#39;TIME_2&#39;]].mean()</code> ?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "edited": false, "score": 0, "creation_date": 1483569668, "post_id": 41474064, "comment_id": 70154805, "body": "@Dinosaurius, i would try this: <code>g.size().to_frame(&#39;COUNT&#39;).reset_index()</code>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "edited": false, "score": 1, "creation_date": 1483569988, "post_id": 41474064, "comment_id": 70154932, "body": "@Dinosaurius, you should probably mark <a href=\"http://stackoverflow.com/a/41474022/5741205\">Ted&#39;s solution</a> as a correct one - it&#39;s much better and more idiomatic"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1483569780, "last_edit_date": 1483569780, "creation_date": 1483567756, "answer_id": 41474064, "question_id": 41473887, "link": "https://stackoverflow.com/questions/41473887/group-rows-and-calculate-mean-and-count/41474064#41474064", "title": "Group rows and calculate mean and count", "body": "<p>try this:</p>\n\n<pre><code>In [295]: g = df.groupby(['UD','QTY'], as_index=False)\n\nIn [297]: (pd.merge(g[['TIME_1','TIME_2']].mean(),\n     ...:           g.size().to_frame('COUNT').reset_index(),\n     ...:           on=['UD','QTY'])\n     ...: )\n     ...:\nOut[297]:\n   UD  QTY  TIME_1  TIME_2  COUNT\n0   1   20  24.675  17.025      4\n1   2   25  23.300  19.900      1\n</code></pre>\n\n<p>or a bit nicer one:</p>\n\n<pre><code>In [301]: g[['TIME_1','TIME_2']].mean().assign(COUNT=g.size().values)\nOut[301]:\n   UD  QTY  TIME_1  TIME_2  COUNT\n0   1   20  24.675  17.025      4\n1   2   25  23.300  19.900      1\n</code></pre>\n"}], "owner": {"reputation": 6582, "user_id": 7316807, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fd1f0c06a1f7429686c2a7e47074449d?s=128&d=identicon&r=PG&f=1", "display_name": "Dinosaurius", "link": "https://stackoverflow.com/users/7316807/dinosaurius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2492, "favorite_count": 0, "accepted_answer_id": 41474022, "answer_count": 3, "score": 1, "last_activity_date": 1483571485, "creation_date": 1483566873, "last_edit_date": 1483571485, "question_id": 41473887, "link": "https://stackoverflow.com/questions/41473887/group-rows-and-calculate-mean-and-count", "title": "Group rows and calculate mean and count", "body": "<p>This is my data frame:</p>\n\n<pre><code>df = \nUD   QTY   GRADE   TIME_1   TIME_2\n1    20    5       22.5     16.1\n1    20    5       26.2     19.5\n1    20    5       30.0     14.0\n1    20    4       20.0     18.5\n2    25    4       23.3     19.9\n</code></pre>\n\n<p>I need to calculate mean values of <code>TIME_1</code> and <code>TIME_2</code> per each combination of <code>UD</code>, and <code>QTY</code>. Then I want to add the new column <code>GRADE_COUNT</code> that will store the total count of rows per group. For instance, in the above-given data set there are 4 rows per group defined by <code>UD</code> = 1 and <code>QTY</code> = 20.</p>\n\n<p>The result should be this one:</p>\n\n<pre><code>df = \n\nUD  QTY  MEAN_TIME_1   MEAN_TIME_2   COUNT\n1   20   24.67         17.02         4\n2   25   23.3          19.9          1\n</code></pre>\n\n<p>I wrote this code which groups rows, calculates mean values and counts values.</p>\n\n<pre><code>groupby_object = df[['UD', 'QTY', 'GRADE', 'TIME_1', 'TIME_2']].groupby(['TIME_1', 'TIME_2])\n\ndf = groupby_object.agg('mean').rename(columns = lambda x: x + ' mean').join(pd.DataFrame(groupby_object.size(),columns=['counts'])).reset_index()\n</code></pre>\n\n<p>But instead of calculating mean times, it calculates mean <code>QTY</code> and <code>GRADE</code>, also the column <code>UD</code> disappears.</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1483566957, "post_id": 41473875, "comment_id": 70153613, "body": "Are you asking if it&#39;s acceptable (as in your title), or why it would be done (as in your question body)?"}, {"owner": {"reputation": 6400, "user_id": 1245418, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7005b0353700331ae983ee90c81b2e69?s=128&d=identicon&r=PG", "display_name": "Evan Zamir", "link": "https://stackoverflow.com/users/1245418/evan-zamir"}, "reply_to_user": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1483567517, "post_id": 41473875, "comment_id": 70153909, "body": "Really both. Is it acceptable, and if so, what is the purpose?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1483582193, "post_id": 41473875, "comment_id": 70158526, "body": "The name of the function includes the word &quot;factory&quot; which should tell you that it serves as a constructor. <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Factory_method_pattern</a>"}, {"owner": {"reputation": 6400, "user_id": 1245418, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7005b0353700331ae983ee90c81b2e69?s=128&d=identicon&r=PG", "display_name": "Evan Zamir", "link": "https://stackoverflow.com/users/1245418/evan-zamir"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1483583656, "post_id": 41473875, "comment_id": 70158862, "body": "@KennyOstrom For example here I see creational patterns (factory) implemented in Python, but none show a class defined within a function. <a href=\"https://github.com/faif/python-patterns\" rel=\"nofollow noreferrer\">github.com/faif/python-patterns</a> Am I wrong that this isn&#39;t the standard/typical way to implement this pattern?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1483583868, "post_id": 41473875, "comment_id": 70158910, "body": "Ah, I see the difference, sorry. That is weird, but I think it guarantees that nobody else can create that class (RadarAxes)?"}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 0, "creation_date": 1483584587, "post_id": 41473875, "comment_id": 70159066, "body": "Functions and classes are first class objects, so it&#39;s possible and nothing is &quot;wrong&quot; with it.   It&#39;s just unconventional and a bit strange :)"}, {"owner": {"reputation": 7116, "user_id": 1394353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/519ce8a904896c40b9a9e2d9a82e0d3c?s=128&d=identicon&r=PG", "display_name": "JL Peyret", "link": "https://stackoverflow.com/users/1394353/jl-peyret"}, "edited": false, "score": 0, "creation_date": 1483603262, "post_id": 41473875, "comment_id": 70165053, "body": "Well, one effect of this is that it will be really difficult to subclass/adjust <i>RadarAxes</i>.  It&#39;s kinda baked in.  But... if it works..."}, {"owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "edited": false, "score": 0, "creation_date": 1515412954, "post_id": 41473875, "comment_id": 83277979, "body": "I&#39;d say this approach is chosen mostly because of laziness/simplicity: Wrapping this all into one namespace (the function) allows you to access a lot of run-time global variables from within the class, which would look even worse if you did this in a module. If you put more effort into this, you would need to change the <code>__init__</code> of the base class and pass the parameters into it that way. Cleaner but more cumbersome."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1527070193, "creation_date": 1527070193, "answer_id": 50485564, "question_id": 41473875, "link": "https://stackoverflow.com/questions/41473875/is-it-an-acceptable-pattern-to-define-a-class-inside-a-function/50485564#50485564", "title": "Is it an acceptable pattern to define a Class inside a Function?", "body": "<p>It is an acceptable pattern and is used when you need a dynamically created class. For example in class decorators, the decorator function dynamically creates the decorated class and returns it.</p>\n\n<p>Here the line <code>register_projection(RadarAxes)</code> is the reason for that pattern. I am not used to <code>matplotlib</code>, but I assume that <code>register_projection</code> takes here as parameter a subclass of <code>PolarAxes</code>. That subclass is dynamically created by the function <em>using function parameters</em>.</p>\n\n<p>The language allows for dynamic creation of classes, this is a use case for a dynamically create class, so there is no problem in creating the class in a function.</p>\n"}], "owner": {"reputation": 6400, "user_id": 1245418, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7005b0353700331ae983ee90c81b2e69?s=128&d=identicon&r=PG", "display_name": "Evan Zamir", "link": "https://stackoverflow.com/users/1245418/evan-zamir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1527070193, "creation_date": 1483566819, "last_edit_date": 1527068923, "question_id": 41473875, "link": "https://stackoverflow.com/questions/41473875/is-it-an-acceptable-pattern-to-define-a-class-inside-a-function", "title": "Is it an acceptable pattern to define a Class inside a Function?", "body": "<p>There's an example of creating a radar chart in the documentation for Matplotlib, and I'm trying to understand the design. <a href=\"http://matplotlib.org/examples/api/radar_chart.html\" rel=\"nofollow noreferrer\">http://matplotlib.org/examples/api/radar_chart.html</a></p>\n\n<pre><code>\"\"\"\nExample of creating a radar chart (a.k.a. a spider or star chart) [1]_.\n\nAlthough this example allows a frame of either 'circle' or 'polygon', polygon\nframes don't have proper gridlines (the lines are circles instead of polygons).\nIt's possible to get a polygon grid by setting GRIDLINE_INTERPOLATION_STEPS in\nmatplotlib.axis to the desired number of vertices, but the orientation of the\npolygon is not aligned with the radial axes.\n\n.. [1] http://en.wikipedia.org/wiki/Radar_chart\n\"\"\"\nimport numpy as np\n\nimport matplotlib.pyplot as plt\nfrom matplotlib.path import Path\nfrom matplotlib.spines import Spine\nfrom matplotlib.projections.polar import PolarAxes\nfrom matplotlib.projections import register_projection\n\n\ndef radar_factory(num_vars, frame='circle'):\n    \"\"\"Create a radar chart with `num_vars` axes.\n\n    This function creates a RadarAxes projection and registers it.\n\n    Parameters\n    ----------\n    num_vars : int\n        Number of variables for radar chart.\n    frame : {'circle' | 'polygon'}\n        Shape of frame surrounding axes.\n\n    \"\"\"\n    # calculate evenly-spaced axis angles\n    theta = np.linspace(0, 2*np.pi, num_vars, endpoint=False)\n    # rotate theta such that the first axis is at the top\n    theta += np.pi/2\n\n    def draw_poly_patch(self):\n        verts = unit_poly_verts(theta)\n        return plt.Polygon(verts, closed=True, edgecolor='k')\n\n    def draw_circle_patch(self):\n        # unit circle centered on (0.5, 0.5)\n        return plt.Circle((0.5, 0.5), 0.5)\n\n    patch_dict = {'polygon': draw_poly_patch, 'circle': draw_circle_patch}\n    if frame not in patch_dict:\n        raise ValueError('unknown value for `frame`: %s' % frame)\n\n    class RadarAxes(PolarAxes):\n\n        name = 'radar'\n        # use 1 line segment to connect specified points\n        RESOLUTION = 1\n        # define draw_frame method\n        draw_patch = patch_dict[frame]\n\n        def fill(self, *args, **kwargs):\n            \"\"\"Override fill so that line is closed by default\"\"\"\n            closed = kwargs.pop('closed', True)\n            return super(RadarAxes, self).fill(closed=closed, *args, **kwargs)\n\n        def plot(self, *args, **kwargs):\n            \"\"\"Override plot so that line is closed by default\"\"\"\n            lines = super(RadarAxes, self).plot(*args, **kwargs)\n            for line in lines:\n                self._close_line(line)\n\n        def _close_line(self, line):\n            x, y = line.get_data()\n            # FIXME: markers at x[0], y[0] get doubled-up\n            if x[0] != x[-1]:\n                x = np.concatenate((x, [x[0]]))\n                y = np.concatenate((y, [y[0]]))\n                line.set_data(x, y)\n\n        def set_varlabels(self, labels):\n            self.set_thetagrids(np.degrees(theta), labels)\n\n        def _gen_axes_patch(self):\n            return self.draw_patch()\n\n        def _gen_axes_spines(self):\n            if frame == 'circle':\n                return PolarAxes._gen_axes_spines(self)\n            # The following is a hack to get the spines (i.e. the axes frame)\n            # to draw correctly for a polygon frame.\n\n            # spine_type must be 'left', 'right', 'top', 'bottom', or `circle`.\n            spine_type = 'circle'\n            verts = unit_poly_verts(theta)\n            # close off polygon by repeating first vertex\n            verts.append(verts[0])\n            path = Path(verts)\n\n            spine = Spine(self, spine_type, path)\n            spine.set_transform(self.transAxes)\n            return {'polar': spine}\n\n    register_projection(RadarAxes)\n    return theta\n</code></pre>\n\n<p>What is the rationale for this pattern? </p>\n"}, {"tags": ["python", "audio", "amixer"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1483566967, "post_id": 41473851, "comment_id": 70153618, "body": "If you have a <code>break</code> where?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1483567195, "post_id": 41473851, "comment_id": 70153741, "body": "What is the purpose of <code>while True: main()</code>? It just re-calls the function even if you break it."}], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567052, "post_id": 41473899, "comment_id": 70153677, "body": "Nope, what I am trying to do is to execute only one time the &quot;notify-send ecc...&quot; command when the status_on == state"}, {"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "reply_to_user": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567210, "post_id": 41473899, "comment_id": 70153748, "body": "You realize that you&#39;re resetting state, and checking it again in the next if statement, right?"}, {"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "reply_to_user": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567284, "post_id": 41473899, "comment_id": 70153785, "body": "also, as someone mentioned above, you have main wrapped in a while True..."}, {"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "reply_to_user": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567446, "post_id": 41473899, "comment_id": 70153873, "body": "Check out my edits: i&#39;d recommend using if and elif in stead of two ifs. That might be the root of your problem..."}, {"owner": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567486, "post_id": 41473899, "comment_id": 70153897, "body": "Yes I know that I&#39;ve used while true &#39;cause I have to run this script in background. What I am trying to do is to send a notification when the jack is plugged in or unplugged."}, {"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "reply_to_user": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567528, "post_id": 41473899, "comment_id": 70153915, "body": "just try the if/ elif edits...that should do the trick then, I believe."}, {"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "reply_to_user": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567820, "post_id": 41473899, "comment_id": 70154061, "body": "Actually, I think I see what you need to do...give me a second and I&#39;ll edit my post."}, {"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "reply_to_user": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483568186, "post_id": 41473899, "comment_id": 70154225, "body": "Check out my updated answer: 1) state is initialized to the current state.  2) whenever status_on is not state, reset it to state, and indicate the change that happened."}, {"owner": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483568570, "post_id": 41473899, "comment_id": 70154367, "body": "I&#39;ve executed the script but when I added (for debugging) a &quot;print &#39;true&#39; after the &quot;plugged in&quot; case it prints infinite"}], "tags": [], "owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "is_accepted": true, "score": 1, "last_activity_date": 1483571616, "last_edit_date": 1483571616, "creation_date": 1483566959, "answer_id": 41473899, "question_id": 41473851, "link": "https://stackoverflow.com/questions/41473851/exit-from-an-if-python/41473899#41473899", "title": "Exit from an if [Python]", "body": "<p>This should work.  Move your global declaration to inside the main function, then this should initialize the status, and then check for status changes.  This can probably be cleaned up a bit (namely the if statement), but it should work.</p>\n\n<pre><code>#!/usr/bin/python2.7\nimport os\nimport sys\nimport re\nimport time\n\n\n#print status_on.group()\ndef main():\n    global state\n    get_current_jack_status = \"\"\"amixer -c1 contents | grep -A 2 'Headphone Jack'\"\"\"\n    output = os.popen(get_current_jack_status).read()\n    status_on = re.search('values=on', output)\n    if (status_on is None and state) or (state is None and status_on):\n        state = status_on\n        if status_on:\n            print \"a jack was plugged in\"\n            os.system(\"notify-send 'Audio Manager' 'An audio jack was plugged in' -i audacity.png\")\n        else:\n            print \"a jack was unplugged\"\n            os.system(\"notify-send 'Audio Manager' 'An audio jack was unplugged' -i audacity.png\")\n\nget_current_jack_status = \"\"\"amixer -c1 contents | grep -A 2 'Headphone Jack'\"\"\"\noutput = os.popen(get_current_jack_status).read()\nstate = re.search('values=on', output)\n\nwhile True:\n        main()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567603, "post_id": 41474020, "comment_id": 70153950, "body": "repeat: i want to send a notification when the headphones jack is plugged in or unplugged"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483567702, "post_id": 41474020, "comment_id": 70153994, "body": "@Dreamwhite repeat to who? It&#39;s not in your question or a comment to this answer."}, {"owner": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "edited": false, "score": 0, "creation_date": 1483568726, "post_id": 41474020, "comment_id": 70154436, "body": "Nope, it prints (with the <code>print &quot;true</code>) a lot of &quot;true&quot;"}], "tags": [], "owner": {"reputation": 1, "user_id": 4107207, "user_type": "registered", "profile_image": "https://graph.facebook.com/1364842855/picture?type=large", "display_name": "Dimitris Tim", "link": "https://stackoverflow.com/users/4107207/dimitris-tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1483568120, "last_edit_date": 1483568120, "creation_date": 1483567545, "answer_id": 41474020, "question_id": 41473851, "link": "https://stackoverflow.com/questions/41473851/exit-from-an-if-python/41474020#41474020", "title": "Exit from an if [Python]", "body": "<p>Then use a variable holding the previous state. And do it like:</p>\n\n<pre><code>if status_on == state and previousState!=1:\n    print \"True\"\n    state = 1\n</code></pre>\n"}], "owner": {"reputation": 86, "user_id": 3991260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrrjh.png?s=128&g=1", "display_name": "dreamwhite", "link": "https://stackoverflow.com/users/3991260/dreamwhite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 41473899, "answer_count": 2, "score": -1, "last_activity_date": 1483571616, "creation_date": 1483566729, "question_id": 41473851, "link": "https://stackoverflow.com/questions/41473851/exit-from-an-if-python", "title": "Exit from an if [Python]", "body": "<p>I can't exit from this if construct</p>\n\n<pre><code>#!/usr/bin/python2.7\nimport os\nimport re\nimport time\nglobal state\n\n\n#print status_on.group()\ndef main():\n    get_current_jack_status = \"\"\"amixer -c1 contents | grep -A 2 'Headphone Jack'\"\"\"\n    output = os.popen(get_current_jack_status).read()\n    status_on = re.search('values=on', output)\n    if status_on:\n        state = status_on\n        os.system(\"notify-send 'Audio Manager' 'An audio jack was plugged in' -i audacity.png\")\n        if status_on == state:\n            print \"True\"\n            state = 1   #here i can't exit\n\n        if status_on != state:\n            print state\n            os.system(\"notify-send 'Audio Manager' 'An audio jack was unplugged' -i audacity.png\")\n\n\nwhile True:\n    main()\n</code></pre>\n\n<p>I've tried pass but when I execute the script it says as output:</p>\n\n<pre><code>True\n1\nTrue\n1\n</code></pre>\n\n<p>ecc.\nIf I use \"break\" it crashes. </p>\n"}, {"tags": ["python", "numpy", "for-loop", "sum", "nested-loops"], "comments": [{"owner": {"reputation": 1356, "user_id": 7138814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6x8j.png?s=128&g=1", "display_name": "user7138814", "link": "https://stackoverflow.com/users/7138814/user7138814"}, "edited": false, "score": 0, "creation_date": 1483795868, "post_id": 41473845, "comment_id": 70249715, "body": "In the formula for <code>P(V)</code> you are summing over the mode, so why would there be a column for &quot;mode&quot; in the output file <code>data.dat</code>? Maybe you could calculate the <code>P</code>&#39;s by hand and put it in the exampe output file (<code>data.dat</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "edited": false, "score": 0, "creation_date": 1483789036, "post_id": 41487461, "comment_id": 70247729, "body": "@user7138814Thank you for your answer. However, the use of <code>P +=</code> strategy gives a different result than the <code>P[i] = P[i] + P[i-1]</code> strategy (see posted question) please"}, {"owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "edited": false, "score": 0, "creation_date": 1483789094, "post_id": 41487461, "comment_id": 70247741, "body": "I would like to solve this problem... Thank you very much"}], "tags": [], "owner": {"reputation": 1356, "user_id": 7138814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6x8j.png?s=128&g=1", "display_name": "user7138814", "link": "https://stackoverflow.com/users/7138814/user7138814"}, "is_accepted": true, "score": 1, "last_activity_date": 1483626266, "creation_date": 1483626266, "answer_id": 41487461, "question_id": 41473845, "link": "https://stackoverflow.com/questions/41473845/a-summation-using-nested-loop-and-zip/41487461#41487461", "title": "A summation using nested loop and zip", "body": "<p>You need one more for-loop, since you have arrays of 3 different lenghts (i.e. your parameter space is 3 dimensional). The <code>V</code> and <code>FREQ</code> you load from <code>volume_FREQ.dat</code> are in fact two dimensional data. So with reshapes and another loop you would get something like:</p>\n\n<pre><code>import numpy as np\n\nn_volume = 11\nn_mode = 45\nn_T = 3\n\nc, d, f, mode = np.loadtxt('parameters.dat', skiprows = 1).T\nV, FREQ, mode = np.loadtxt('Volume_FREQ.dat',  skiprows = 1).T\nT =  [10.0, 30.1, 50.2]\n\nV = V.reshape(n_volume, n_mode)\nFREQ = FREQ.reshape(n_volume, n_mode)\n\nP_for_each_volume_and_each_T = []\nfor i in range(n_volume):\n    for j in range(n_T):\n        P = 0\n        for k in range(n_mode)\n            P += FREQ[i,k] * T[j] * (V[i,k]*c[k] + d[k])\n        P_for_each_volume_and_each_T.append(P)\n</code></pre>\n\n<p>A more numpythonic would be the following array operation:</p>\n\n<pre><code>V = V.reshape(n_volume, n_mode)\nFREQ = FREQ.reshape(n_volume, n_mode)\nT = np.array(T).reshape(-1, 1, 1)\nP_for_each_volume_and_each_T = (FREQ * T * (V*c + d)).sum(axis=0)\n</code></pre>\n\n<p>This would give a <code>(n_volume, n_T)</code> 2D array. Use <code>ravel</code> to get the same result as with the for-loops.</p>\n"}], "owner": {"reputation": 609, "user_id": 6168921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d3fbf944304aae21d6513938cfbadb35?s=128&d=identicon&r=PG&f=1", "display_name": "DavidC.", "link": "https://stackoverflow.com/users/6168921/davidc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 41487461, "answer_count": 1, "score": 0, "last_activity_date": 1483723249, "creation_date": 1483566714, "last_edit_date": 1483723249, "question_id": 41473845, "link": "https://stackoverflow.com/questions/41473845/a-summation-using-nested-loop-and-zip", "title": "A summation using nested loop and zip", "body": "<p>I have a file: <code>volume_FREQ.dat</code>:</p>\n\n<pre><code># Volume (V)  FREQ    mode\n18.1          400.9    1      #| \n18.1          401.3    2      #| 1st Volume: 18.1\n18.1          404.2    3      #| \n18.1          505.2    4      #|\n19.2          202.4    1           #|  \n19.2          203.6    2           #| 2nd Volume: 19.2 \n19.2          205.4    3           #|\n19.2          199.5    4           #|\n</code></pre>\n\n<p>In the real file there are 11 volumes, and 45 modes at each volume.</p>\n\n<p>Then I have this file: <code>parameters.dat</code> :</p>\n\n<pre><code># c           d         f        mode\n-1.14     -24.70     1297.20     1\n-1.24     -22.60     1295.20     2\n-1.54     -21.08     1296.20     3\n-1.72     -22.4      1298.40     4        \n</code></pre>\n\n<p>For each of these 11 volumes, there is a value of <code>P</code>. In the following formula, this is represented by <code>P(V)</code>: This value of <code>P</code> at each <code>Volume</code> is calculated by summing over the <code>modes</code>, using the values of <code>c</code>, <code>d</code>,<code>f</code>, and<code>FREQ</code> accordingly:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1LRvD.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1LRvD.gif\" alt=\"enter image description here\"></a></p>\n\n<p><sup><i> Figure 1. </i></sup></p>\n\n<p>The variable <code>T</code> is this list:</p>\n\n<pre><code> T =  [10.0, 30.1, 50.2]\n</code></pre>\n\n<p>The real list has a length of 100.</p>\n\n<p>For each <code>T</code> and each <code>V</code> there is a value of <code>P</code>.</p>\n\n<p>The final solution would be to end up with a file like <code>data.dat</code> :</p>\n\n<pre><code># Volume (V)  FREQ    mode   T        P\n18.1          400.9    1    10.0     x            #| \n18.1          401.3    2    10.0     x            #| 1st Volume: 18.1\n18.1          404.2    3    10.0     x            #| \n18.1          505.2    4    10.0     x            #|\n19.2          202.4    1    10.0     x                #|  \n19.2          203.6    2    10.0     x                #| 2nd Volume: 19.2 \n19.2          205.4    3    10.0     x                #|\n19.2          199.5    4    10.0     x                #|\n18.1          400.9    1    30.1     x            #| \n18.1          401.3    2    30.1     x            #| 1st Volume: 18.1\n18.1          404.2    3    30.1     x            #| \n18.1          505.2    4    30.1     x            #|\n19.2          202.4    1    30.1     x                #|  \n19.2          203.6    2    30.1     x                #| 2nd Volume: 19.2 \n19.2          205.4    3    30.1     x                #|\n19.2          199.5    4    30.1     x                #|\n18.1          300.1    1    50.2     x            #| \n18.1          305.2    2    50.2     x            #| 1st Volume: 18.1\n18.1          303.6    3    50.2     x            #| \n18.1          303.9    4    50.2     x            #|\n19.2          304.5    1    50.2     x                #|  \n19.2          305.9    2    50.2     x                #| 2nd Volume: 19.2 \n19.2          306.5    3    50.2     x                #|\n19.2          307.1    4    50.2     x                #|\n</code></pre>\n\n<p>Each of the input variables can be easily extracted by <code>numpy</code>:</p>\n\n<pre><code>import numpy as np\nc, d, f, mode = np.loadtxt('parameters.dat', skiprows = 1).T\nV, FREQ, mode = np.loadtxt('Volume_FREQ.dat',  skiprows = 1).T\n</code></pre>\n\n<p>However, the difficulty comes when applying the formula and looping over the <code>modes</code>:</p>\n\n<p>I can create a <code>VOLUME</code> list:</p>\n\n<pre><code> VOLUME = [19.2, 18.1]\n</code></pre>\n\n<p>And then a nested loop + <code>zip</code>:</p>\n\n<pre><code> sum_for_each_volume = []\n for i_VOLUME in VOLUME:\n\n   P_CORRECT = []\n\n   for j_c1, j_d, j_FREQ, i_T in zip(c1, d, FREQ, T):\n\n        P = j_FREQ * i_T * (i_VOLUME * j_c1 + j_d)\n\n        P_CORRECT.append(P)\n\n   summation = sum(P_CORRECT)\n\n   sum_for_each_volume.append(summation)\n</code></pre>\n\n<p>However, this solution is not grabbing the <code>FREQS</code> at each volume correctly, and also the all the<code>T</code> elements are not read by each <code>volume</code>.</p>\n\n<p>I would appreciate if you could help me.</p>\n\n<p><strong>Based on @user7138814 's answer :</strong></p>\n\n<p>Running this script:</p>\n\n<pre><code>import numpy as np\nn_volume = 2\nn_mode = 4\nn_T = 3\n\nc, d, f, mode = np.loadtxt('parameters.dat', skiprows = 1).T\nV, FREQ, mode = np.loadtxt('Volume_FREQ.dat',  skiprows = 1).T\nT =  [10.0, 30.1, 50.2]\n\nV = V.reshape(n_volume, n_mode)\nFREQ = FREQ.reshape(n_volume, n_mode)\n\n\nP_for_each_volume_and_each_T = []\n\nfor i in range(n_volume):\n  for j in range(n_T):\n    P = 0\n    for k in range(n_mode)\n        P += FREQ[i,k] * T[j] * (V[i,k]*c[k] + d[k])\n    P_for_each_volume_and_each_T.append(P)\n\n\nprint 'P = ', P_for_each_volume_and_each_T\n</code></pre>\n\n<p>the output is the following:</p>\n\n<p><code>P =  [-830821.31000000006, -2500772.1431000005, -4170722.9762000004, -403382.67200000002, -1214181.8427200001, -2024981.0134400004]</code> </p>\n\n<p>However, by using the <code>P_for_each_volume_and_each_T[i] = P_for_each_volume_and_each_T[i] + P_for_each_volume_and_each_T[i-1]</code> <em>strategy</em>, as shown here (run the following script):</p>\n\n<pre><code>import numpy as np\n\nn_volume = 2 \nn_mode = 4\n\nn_T = 3\n\nc, d, f, mode = np.loadtxt('parameters.dat', skiprows = 1).T\nV, FREQ, mode = np.loadtxt('Volume_FREQ.dat',  skiprows = 1).T\nT =  [10.0, 30.1, 50.2]\n\nV = V.reshape(n_volume, n_mode)\nFREQ = FREQ.reshape(n_volume, n_mode)\n\n\nP_for_each_volume_and_each_T = []\n\nfor i in range(n_volume):\n\n  for j in range(n_T):\n    P = 0\n    for k in range(n_mode):\n        P = FREQ[i,k] * T[j] * (V[i,k]*c[k] + d[k])\n        print 'FREQ[i,k] = ', FREQ[i,k]\n        print 'V[i,k] = ', V[i,k]\n        print 'c[k] = ', c[k]\n        print 'd[k] = ',  d[k]\n        print 'P = ', P\n    P_for_each_volume_and_each_T.append(P)\nprint 'P = ', P_for_each_volume_and_each_T\n\n\nfor i in xrange(1,len(P_for_each_volume_and_each_T)):\n    P_for_each_volume_and_each_T[i] = P_for_each_volume_and_each_T[i] + P_for_each_volume_and_each_T[i-1]\n\n\nprint 'P after summing= ', P_for_each_volume_and_each_T\n</code></pre>\n\n<p>you get this output:</p>\n\n<p><code>P =  [-270443.66399999999, -814035.42863999994, -1357627.19328, -110570.88, -332818.34880000004, -555065.81760000007]</code> </p>\n\n<p>this makes total sense when summing:</p>\n\n<p><code>P after summing=  [-270443.66399999999, -1084479.0926399999, -2442106.2859199997, -2552677.1659199996, -2885495.5147199994, -3440561.3323199996]</code></p>\n\n<p>Therefore, <code>P after summing</code> list does not match <strong>@user7138814</strong>'s <code>P</code> list. </p>\n\n<p>Which strategy is therefore the correct one for solving this problem (see <em>Figure 1</em>) ? </p>\n\n<p>Either <code>+=</code> <em>strategy</em>  or <code>[i] + [i-1]</code> <em>strategy</em> ?</p>\n"}, {"tags": ["python", "arabic", "right-to-left"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1483566782, "post_id": 41473820, "comment_id": 70153533, "body": "reverse the makeup of <code>address</code>....<code>address = number + &#39; &#39; +city +&#39; &#39;+ street</code>"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1483566804, "post_id": 41473820, "comment_id": 70153542, "body": "isnt&#39;t that output correct in arabic context? if we start to read from right to left doesn&#39;t it seems ok?"}, {"owner": {"reputation": 3649, "user_id": 291561, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/34af7900a62a00920216a3543d20f23c?s=128&d=identicon&r=PG", "display_name": "Doo Dah", "link": "https://stackoverflow.com/users/291561/doo-dah"}, "edited": false, "score": 0, "creation_date": 1483567044, "post_id": 41473820, "comment_id": 70153671, "body": "Reversing the order makes no difference. About to update the post. Reading from right to left, I expect house number, street and then city (as in the US). That is, &quot;City Street House-Number&quot;. Correct me if I am wrong here."}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 291561, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/34af7900a62a00920216a3543d20f23c?s=128&d=identicon&r=PG", "display_name": "Doo Dah", "link": "https://stackoverflow.com/users/291561/doo-dah"}, "edited": false, "score": 0, "creation_date": 1483573052, "post_id": 41474255, "comment_id": 70156098, "body": "Thanks. Any idea how to set an HTML element left to right? Or, can I use the Unicode Left to Right marker?"}, {"owner": {"reputation": 3649, "user_id": 291561, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/34af7900a62a00920216a3543d20f23c?s=128&d=identicon&r=PG", "display_name": "Doo Dah", "link": "https://stackoverflow.com/users/291561/doo-dah"}, "edited": false, "score": 0, "creation_date": 1483710660, "post_id": 41474255, "comment_id": 70219894, "body": "Interestingly, the css markup had not effect in Chrome. Instead, I put the HTML markup &quot;&amp;rlm;&quot; at the beginning of the string. So, I am now building the string as I would a western String, except adding the markup: &quot;&amp;rlm;House number + Street + City&quot;, and the string is rendered correctly."}], "tags": [], "owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "is_accepted": true, "score": 1, "last_activity_date": 1483568742, "creation_date": 1483568742, "answer_id": 41474255, "question_id": 41473820, "link": "https://stackoverflow.com/questions/41473820/python-arabic-string-contatenated-with-number/41474255#41474255", "title": "Python Arabic string contatenated with number", "body": "<p>The problem is with Aptana, it doesn't know anything about right-to-left and displays everything left-to-right, as you have seen.</p>\n\n<p>On the web page, set the page's direction to right-to-left, or at least the element where you display the Arabic strings.</p>\n"}], "owner": {"reputation": 3649, "user_id": 291561, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/34af7900a62a00920216a3543d20f23c?s=128&d=identicon&r=PG", "display_name": "Doo Dah", "link": "https://stackoverflow.com/users/291561/doo-dah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 41474255, "answer_count": 1, "score": 1, "last_activity_date": 1483568742, "creation_date": 1483566647, "last_edit_date": 1483568079, "question_id": 41473820, "link": "https://stackoverflow.com/questions/41473820/python-arabic-string-contatenated-with-number", "title": "Python Arabic string contatenated with number", "body": "<p>With Python 2.7.11, I am trying to build a string with Arabic characters and a number. But, the number always ends up on the left side of the final string instead of the right. Here is my code:</p>\n\n<pre><code>#! /usr/local/bin/python  -*- coding: UTF-8 -*-\n\ncity = '\u0627\u0644\u062f\u0648\u062d\u0629'\nstreet = '\u0634\u0627\u0631\u0639 \u0628\u0627\u0628\u0644'\nnumber = '6990'\n\naddress = city + ' ' + street + ' ' + number\nprint address\n\naddress = number + ' ' + city + ' ' + street + ' '\nprint address\n</code></pre>\n\n<p>And the output, from Aptana:</p>\n\n<pre><code>\u0627\u0644\u062f\u0648\u062d\u0629 \u0634\u0627\u0631\u0639 \u0628\u0627\u0628\u0644 6990\n6990 \u0627\u0644\u062f\u0648\u062d\u0629 \u0634\u0627\u0631\u0639 \u0628\u0627\u0628\u0644 \n</code></pre>\n\n<p>What can I do to force the number to the right of the final string?</p>\n\n<p><strong>UPDATE</strong>\nTurns out, from the command line, the output is as expected, but, from Apatana Studio, the console is reformatting the string. Arabic is tricky to work with using English tools. </p>\n\n<p>That said, I think the string is correct. But, I am next inserting into MySQL and then displaying on a web page, where it is wrong. So, not sure if the insert is re-formatting it, or, if it is being rendered incorrectly by HTML.</p>\n"}, {"tags": ["python", "windows", "anaconda", "conda", "pythonmagick"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1483567495, "post_id": 41473804, "comment_id": 70153901, "body": "have you tried without the version number?"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1483568448, "post_id": 41473804, "comment_id": 70154326, "body": "This package is only available from that channel for win-64. You cannot install it into 32-bit conda."}, {"owner": {"reputation": 8261, "user_id": 453463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5032614561a63651efc89912eb5a9e?s=128&d=identicon&r=PG", "display_name": "cgohlke", "link": "https://stackoverflow.com/users/453463/cgohlke"}, "edited": false, "score": 1, "creation_date": 1483568757, "post_id": 41473804, "comment_id": 70154451, "body": "Try <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#pythonmagick\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs/#pythonmagick</a>"}, {"owner": {"reputation": 41, "user_id": 3287824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43724195213aaa3a2a3e883405afbef7?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/3287824/eric"}, "edited": false, "score": 0, "creation_date": 1483634538, "post_id": 41473804, "comment_id": 70186010, "body": "I tried without the version number, and I get this error:  The following specifications were found to be in conflict: - python 3.5* - pythonmagick"}, {"owner": {"reputation": 41, "user_id": 3287824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43724195213aaa3a2a3e883405afbef7?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/3287824/eric"}, "edited": false, "score": 0, "creation_date": 1483634596, "post_id": 41473804, "comment_id": 70186049, "body": "I uninstalled my 32-bit python and installed the 64-bit python, and it&#39;s still not working."}, {"owner": {"reputation": 41, "user_id": 3287824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43724195213aaa3a2a3e883405afbef7?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/3287824/eric"}, "edited": false, "score": 0, "creation_date": 1483634641, "post_id": 41473804, "comment_id": 70186080, "body": "cgohlke,  When you say try that website, I&#39;m not sure what you mean to try it.  What needs to be done?  I just see tons of links, not sure which one to download or what to do with it."}, {"owner": {"reputation": 41, "user_id": 3287824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43724195213aaa3a2a3e883405afbef7?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/3287824/eric"}, "edited": false, "score": 0, "creation_date": 1483636781, "post_id": 41473804, "comment_id": 70187571, "body": "Never mind, used &quot;pip install &lt;filename&gt;&quot;, and it worked.  Thanks, cgohlke!  How do I mark your answer as correct?"}, {"owner": {"reputation": 430, "user_id": 4264333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9bSXN.jpg?s=128&g=1", "display_name": "Trisa Biswas", "link": "https://stackoverflow.com/users/4264333/trisa-biswas"}, "edited": false, "score": 0, "creation_date": 1540458905, "post_id": 41473804, "comment_id": 92876705, "body": "How do I install it on anaconda? I tried this command but its not working.."}], "owner": {"reputation": 41, "user_id": 3287824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43724195213aaa3a2a3e883405afbef7?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/3287824/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483570016, "creation_date": 1483566582, "last_edit_date": 1483570016, "question_id": 41473804, "link": "https://stackoverflow.com/questions/41473804/trouble-installing-pythonmagick-on-windows-7-package-missing", "title": "Trouble Installing PythonMagick on Windows 7: &quot;Package missing...&quot;", "body": "<p>When I try installing PythonMagick on Windows 7 via a <code>conda install -c melund pythonmagick=0.9.10</code> command, I get this error:</p>\n\n<blockquote>\n  <p>Package missing in current win-32 channels:\n  - pythonmagick 0.9.10*</p>\n</blockquote>\n\n<p>What do I need to do?</p>\n"}, {"tags": ["c#", "python", "asp.net", "asp.net-mvc", "azure"], "comments": [{"owner": {"reputation": 28253, "user_id": 1139830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fAXTi.jpg?s=128&g=1", "display_name": "mason", "link": "https://stackoverflow.com/users/1139830/mason"}, "edited": false, "score": 0, "creation_date": 1483567007, "post_id": 41473801, "comment_id": 70153642, "body": "It really depends on how you&#39;re doing this in Azure. Is it an Azure Website? A VM? Can you use Azure Functions? Does the Python code need to run on the exact same machine as the website?"}, {"owner": {"reputation": 830, "user_id": 7025662, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bfe4e63b49cebe9e84eb638a455e1ebc?s=128&d=identicon&r=PG&f=1", "display_name": "scorpion5211", "link": "https://stackoverflow.com/users/7025662/scorpion5211"}, "reply_to_user": {"reputation": 28253, "user_id": 1139830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fAXTi.jpg?s=128&g=1", "display_name": "mason", "link": "https://stackoverflow.com/users/1139830/mason"}, "edited": false, "score": 0, "creation_date": 1483567183, "post_id": 41473801, "comment_id": 70153737, "body": "I was thinking Azure website but coworker told me hes thinking it wont be possible that way but wasnt fully sure due to little python experience. I edited my question for more info. I dont have any preference with the way of publish, as long as it works."}, {"owner": {"reputation": 28253, "user_id": 1139830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fAXTi.jpg?s=128&g=1", "display_name": "mason", "link": "https://stackoverflow.com/users/1139830/mason"}, "edited": false, "score": 0, "creation_date": 1483567331, "post_id": 41473801, "comment_id": 70153809, "body": "You can&#39;t run separate processes in Azure websites as far as I&#39;m aware. But nothing preventing you from using Azure Functions (Google it) or setting up a Python app somewhere else."}], "answers": [{"tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": true, "score": 0, "last_activity_date": 1484240184, "creation_date": 1484240184, "answer_id": 41618832, "question_id": 41473801, "link": "https://stackoverflow.com/questions/41473801/publishing-mvc-app-that-uses-python-script/41618832#41618832", "title": "Publishing MVC app that uses python script", "body": "<p>It seems to be possible to use Python script with NLTK package in C# on Azure website.</p>\n\n<p>I tried to implement it via a workaround way as below, and it works fine.</p>\n\n<p><strong>Step 1. For installing Python &amp; NLTK on Azure WebApp</strong></p>\n\n<ol>\n<li>Access the Kudu tool of your webapp via the url <code>https://&lt;your webapp name&gt;.scm.azurewebsites.net</code>.</li>\n<li>Install a site extension <code>Python 2.7.12 x86</code> which will be installed at the path <code>D:\\home</code> if using the 32bit version of Azure WebApp as example.\n<a href=\"https://i.stack.imgur.com/IxBET.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IxBET.png\" alt=\"enter image description here\"></a></li>\n<li>Switch to the Kudu CMD, then you can see a new Python runtime which has been installed at here and you have permission to do any operations on it.\n<a href=\"https://i.stack.imgur.com/ts9ID.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ts9ID.png\" alt=\"enter image description here\"></a></li>\n<li>Commands <code>cd Python27</code> and <code>touch get-pip.py</code> and copy the content of the url <code>https://bootstrap.pypa.io/get-pip.py</code> into the <code>get-pip.py</code> via <code>Edit</code> button, then run <code>python get-pip.py</code> to install the <code>pip</code> tool.\n<a href=\"https://i.stack.imgur.com/mRrTB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mRrTB.png\" alt=\"enter image description here\"></a></li>\n<li>Command <code>Scripts\\pip install nltk</code> to install <code>nltk</code> package.</li>\n<li>To download the nltk data, command <code>python -m nltk.downloader -d D:\\home\\Python27\\nltk_data all</code> as below, please don't close the current browser window or switch other urls until the command completed\n<a href=\"https://i.stack.imgur.com/XvDow.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XvDow.png\" alt=\"enter image description here\"></a>\nYou can view the download task in process as below via the url <code>https://&lt;your webapp name&gt;.scm.azurewebsites.net/ProcessExplorer/</code> at the other browser window.\n<a href=\"https://i.stack.imgur.com/UhOOz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UhOOz.png\" alt=\"enter image description here\"></a>\n6.1 Or you can download the nltk data on local to upload them into Azure WebApp.</li>\n</ol>\n\n<p><strong>Step 2. For testing Python script with NLTK package</strong></p>\n\n<ol>\n<li><p>Command <code>touch test.py</code> at the path <code>wwwroot</code>, and edit the content below.</p>\n\n<pre><code>import nltk\nsentence = \"\"\"At eight o'clock on Thursday morning\n... Arthur didn't feel very good.\"\"\"\ntokens = nltk.word_tokenize(sentence)\nprint tokens\n</code></pre></li>\n<li><p>The console show the result as below, it works.\n<a href=\"https://i.stack.imgur.com/8oCim.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8oCim.png\" alt=\"enter image description here\"></a></p></li>\n</ol>\n\n<p><strong>Step 3. Calls python script via <code>Process</code> in C#</strong></p>\n\n<p>Just only using the absoulte path of python runtime &amp; script <code>D:\\home\\Python27\\python</code> &amp; <code>D:\\home\\site\\wwwroot\\test.python</code> instead of them in your C# code.</p>\n\n<p>Please try and feedback your result. Any concern, please feel free to let me know.</p>\n"}], "owner": {"reputation": 830, "user_id": 7025662, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bfe4e63b49cebe9e84eb638a455e1ebc?s=128&d=identicon&r=PG&f=1", "display_name": "scorpion5211", "link": "https://stackoverflow.com/users/7025662/scorpion5211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 1, "accepted_answer_id": 41618832, "answer_count": 1, "score": -1, "last_activity_date": 1484240184, "creation_date": 1483566555, "last_edit_date": 1483567281, "question_id": 41473801, "link": "https://stackoverflow.com/questions/41473801/publishing-mvc-app-that-uses-python-script", "title": "Publishing MVC app that uses python script", "body": "<p>I currently have MVC project that calls python script via Process (new processStartinfo(\"/path/to/python.exe\", \" /path/to/script.py\"). Which works perfectly fine in visual studio. \nWhen i publish this on azure how will it be able to call python.exe? (Im probably not constructing this question accurately since this is my very first web to publish and do not have full understanding of publishing) </p>\n\n<p>P.S. I did try to use IronPython but since my script uses NLTK, i ran into bunch of issues so it was easier to install python&amp;nltk with pip, then call python.exe with through command line that takes argument of /path/to/script.py. Any input is appreciated. </p>\n\n<p>EDIT: my homeController starts a process that passes in path_of_python, path_of_script to command line, redirects the output and does work on the data it gets back (from output).  </p>\n"}, {"tags": ["python", "unicode-escapes"], "comments": [{"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "edited": false, "score": 0, "creation_date": 1483566377, "post_id": 41473744, "comment_id": 70153345, "body": "Unicode strings begin with u&#39;...try that and that should fix your problem..."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1483566437, "post_id": 41473744, "comment_id": 70153375, "body": "Why have you wrapped the fourth one with extra single quotes? It would have given you the correct result if you hadn&#39;t."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1483566579, "post_id": 41473744, "comment_id": 70153446, "body": "Please stop LPTHW if at all possible. First off, it teaches you Python 2, which is the outdated version of the language - essentially <i>all</i> new projects nowadays use Python 3. More importantly, its method of teaching, well, sucks. Read <a href=\"http://sopython.com/wiki/LPTHW_Complaints\" rel=\"nofollow noreferrer\">this</a> for more issues. There are many much better tutorials out there, starting with the official one on python.org."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1483566628, "post_id": 41473744, "comment_id": 70153468, "body": "For example, in Python 3, you don&#39;t have to worry about this garbage of putting <code>u</code> characters before some strings, but not others. Also, check the version of the docs you&#39;re reading - 2.5 was released in <b>2006</b>."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 6744196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmMKm.jpg?s=128&g=1", "display_name": "bha159", "link": "https://stackoverflow.com/users/6744196/bha159"}, "edited": false, "score": 0, "creation_date": 1483566420, "post_id": 41473756, "comment_id": 70153361, "body": "Can you write complete command so that I get what should be exactly typed."}, {"owner": {"reputation": 147, "user_id": 6744196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmMKm.jpg?s=128&g=1", "display_name": "bha159", "link": "https://stackoverflow.com/users/6744196/bha159"}, "edited": false, "score": 0, "creation_date": 1483566653, "post_id": 41473756, "comment_id": 70153477, "body": "Thank you now I get it :-)"}], "tags": [], "owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "is_accepted": true, "score": 1, "last_activity_date": 1483566441, "last_edit_date": 1483566441, "creation_date": 1483566335, "answer_id": 41473756, "question_id": 41473744, "link": "https://stackoverflow.com/questions/41473744/can-not-use-u-in-python/41473756#41473756", "title": "Can not use \\u in python", "body": "<p>Unicode strings begin with \"u\"...try that and that should fix your problem.</p>\n\n<p>you were on the right track here:<code>print 'u\"\\U0001F47E\"'</code></p>\n\n<p>except you don't need the single quotes.\nso... <code>print u\"\\U0001F47E\"</code></p>\n"}], "owner": {"reputation": 147, "user_id": 6744196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmMKm.jpg?s=128&g=1", "display_name": "bha159", "link": "https://stackoverflow.com/users/6744196/bha159"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 41473756, "answer_count": 1, "score": 0, "last_activity_date": 1483566441, "creation_date": 1483566264, "question_id": 41473744, "link": "https://stackoverflow.com/questions/41473744/can-not-use-u-in-python", "title": "Can not use \\u in python", "body": "<p>I am newbie in python so bear with me, I am learning python from 'Learn Python The Hard Way', I learned about escape sequences but I am not able to use \\u.\nI have tried <code>print \"\\U0001F47E\"</code> , <code>print \"U\\U0001F47E\"</code> , <code>print \"U'\\U001F47E'\"</code>, <code>print 'u\"\\U0001F47E\"'</code> but all print the string within quotes as it is, I have tried <code>print \"\\x56\"</code> and other with \\x they all are working fine. I also looked at <a href=\"https://docs.python.org/2.5/ref/strings.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2.5/ref/strings.html</a> but I did not find anything that can help me.</p>\n\n<p>So please tell what I am doing wrong?</p>\n"}, {"tags": ["python", "multithreading", "operating-system"], "comments": [{"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1483566674, "post_id": 41473738, "comment_id": 70153485, "body": "Could you please expand the acronyms to make the question more readable. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1483566593, "creation_date": 1483566593, "answer_id": 41473806, "question_id": 41473738, "link": "https://stackoverflow.com/questions/41473738/is-every-operation-in-try-blocks-atomic-in-python/41473806#41473806", "title": "Is every operation in try blocks atomic in Python?", "body": "<blockquote>\n  <p>Is every operation in try blocks atomic</p>\n</blockquote>\n\n<p>No. The point is that \"ask permission, then do thing\" is definitely not atomic, while depending on the operation and the degree of atomicity required, \"do thing\" alone might be atomic.</p>\n"}, {"tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": false, "score": 3, "last_activity_date": 1483566612, "creation_date": 1483566612, "answer_id": 41473812, "question_id": 41473738, "link": "https://stackoverflow.com/questions/41473738/is-every-operation-in-try-blocks-atomic-in-python/41473812#41473812", "title": "Is every operation in try blocks atomic in Python?", "body": "<blockquote>\n  <p>Is every operation in try blocks atomic in Python?</p>\n</blockquote>\n\n<p>No, <code>try</code> doesn't add any form of atomicity. All it does is ensure the <code>except</code> or <code>finally</code> clause gets executed as appropriate.</p>\n\n<blockquote>\n  <p>Is there a way that the file could be removed while the program is reading it or something like this?</p>\n</blockquote>\n\n<p>Yes, you could lose access to the file (for example, if it resides on a network filesystem and network connectivity gets disrupted while you're reading). That said, this could happen irrespectively of whether your program is multithreaded, so threading doesn't really change things here.</p>\n"}], "owner": {"reputation": 141, "user_id": 4272244, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/147952faa65681952aaec43291b8fbed?s=128&d=identicon&r=PG&f=1", "display_name": "nelfurion", "link": "https://stackoverflow.com/users/4272244/nelfurion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483566612, "creation_date": 1483566239, "question_id": 41473738, "link": "https://stackoverflow.com/questions/41473738/is-every-operation-in-try-blocks-atomic-in-python", "title": "Is every operation in try blocks atomic in Python?", "body": "<p>The python docs say that the EAFP approach is preferred over the LBYL in multi threaded environments.</p>\n\n<p>Is there a case in which multi threading fails?\nI mean lets say that I want to read a file from a directory.\nI could write something like this:</p>\n\n<pre><code>try:\n    with open('Path/to/file', 'r') as content_file:\n        content = content_file.read()\nexcept ... :\n</code></pre>\n\n<p>Is there a way that the file could be removed while the program is reading it or something like this?</p>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 19230, "user_id": 1444609, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/bgWmu.jpg?s=128&g=1", "display_name": "I wrestled a bear once.", "link": "https://stackoverflow.com/users/1444609/i-wrestled-a-bear-once"}, "edited": false, "score": 0, "creation_date": 1483566350, "post_id": 41473734, "comment_id": 70153332, "body": "post the code where you attempted to call <code>http()</code>"}, {"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1483566382, "post_id": 41473734, "comment_id": 70153347, "body": "You can not return from an asynchronous call...."}, {"owner": {"reputation": 175, "user_id": 4551904, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh4.googleusercontent.com/-EIZhhGqiSvI/AAAAAAAAAAI/AAAAAAAAAFI/kIyP0odEpz4/photo.jpg?sz=128", "display_name": "cgp25", "link": "https://stackoverflow.com/users/4551904/cgp25"}, "reply_to_user": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1483566862, "post_id": 41473734, "comment_id": 70153570, "body": "Ok, so is there anyway to do what I did in python in JS? Or no? @epascarello"}, {"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1483567585, "post_id": 41473734, "comment_id": 70153939, "body": "Did you read the info in the dupe?"}, {"owner": {"reputation": 175, "user_id": 4551904, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh4.googleusercontent.com/-EIZhhGqiSvI/AAAAAAAAAAI/AAAAAAAAAFI/kIyP0odEpz4/photo.jpg?sz=128", "display_name": "cgp25", "link": "https://stackoverflow.com/users/4551904/cgp25"}, "edited": false, "score": 0, "creation_date": 1483568591, "post_id": 41473734, "comment_id": 70154375, "body": "I did, but it&#39;s a little over my head. I&#39;ll try again. Thank you for your help!"}], "owner": {"reputation": 175, "user_id": 4551904, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh4.googleusercontent.com/-EIZhhGqiSvI/AAAAAAAAAAI/AAAAAAAAAFI/kIyP0odEpz4/photo.jpg?sz=128", "display_name": "cgp25", "link": "https://stackoverflow.com/users/4551904/cgp25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "closed_date": 1483566430, "answer_count": 0, "score": 0, "last_activity_date": 1483566723, "creation_date": 1483566232, "last_edit_date": 1483566723, "question_id": 41473734, "link": "https://stackoverflow.com/questions/41473734/javascript-get-request-with-headers-print-result", "closed_reason": "Duplicate", "title": "Javascript GET request with headers - print result", "body": "<p>Very new to JS and am trying to make a GET request to an API with a header. The below code appears to work (no errors) but I don't understand how to get it to print the data it has collected from the API.</p>\n\n<pre><code>function httpGet(theUrl)\n{\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open( \"GET\", 'URL');\n    xmlHttp.headers({'Authorization': 'Token REDACTED'}); \n    xmlHttp.send( null );\n    return xmlHttp.responseText;\n}\n</code></pre>\n\n<p>Basically am trying to do what this python code does:</p>\n\n<pre><code>header =  {'Authorization': 'Token REDACTED'}\n\nresponse = requests.get(\"URL\", headers = header)\nprint response.content\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy", "teradata", "database-tuning"], "comments": [{"owner": {"reputation": 38450, "user_id": 2221001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19e92b3618d46eb6ab80e4bc38cec44?s=128&d=identicon&r=PG", "display_name": "JNevill", "link": "https://stackoverflow.com/users/2221001/jnevill"}, "edited": false, "score": 0, "creation_date": 1483989696, "post_id": 41473724, "comment_id": 70315901, "body": "It&#39;s difficult to say since it could be your teradata box, network, odbc driver, sql alchemy, or whatever is sitting in the stack above it. Perhaps check out <a href=\"http://docs.sqlalchemy.org/en/latest/faq/performance.html\" rel=\"nofollow noreferrer\">this article</a> to dig in deeper about what is causing the problem."}, {"owner": {"reputation": 1, "user_id": 6416024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276920f8eced446517571dd50164a1e?s=128&d=identicon&r=PG&f=1", "display_name": "yl2526", "link": "https://stackoverflow.com/users/6416024/yl2526"}, "reply_to_user": {"reputation": 38450, "user_id": 2221001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19e92b3618d46eb6ab80e4bc38cec44?s=128&d=identicon&r=PG", "display_name": "JNevill", "link": "https://stackoverflow.com/users/2221001/jnevill"}, "edited": false, "score": 0, "creation_date": 1484180961, "post_id": 41473724, "comment_id": 70408897, "body": "@JNevill, Thanks! I will definitely look into this after the business trip. The thing makes this weird is that, if I used pyodbc to set up the teradata connection, the speed is normal. So, I totally got lost about what could be wrong about this and don&#39;t know where to start. I feel like this finally gives me something to start with."}, {"owner": {"reputation": 38450, "user_id": 2221001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19e92b3618d46eb6ab80e4bc38cec44?s=128&d=identicon&r=PG", "display_name": "JNevill", "link": "https://stackoverflow.com/users/2221001/jnevill"}, "edited": false, "score": 0, "creation_date": 1487183277, "post_id": 41473724, "comment_id": 71672366, "body": "That particular view <code>tablesvx</code> is pretty weighty. It takes 4-6 seconds for my system to respond to a query for a specific table and database against that view. Since the view takes into account the user&#39;s access there&#39;s a lot of testing in the WHERE clause. Can you just hit <code>dbc.tablesize</code> or do you need to take into account the logged in user&#39;s access?"}, {"owner": {"reputation": 38450, "user_id": 2221001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19e92b3618d46eb6ab80e4bc38cec44?s=128&d=identicon&r=PG", "display_name": "JNevill", "link": "https://stackoverflow.com/users/2221001/jnevill"}, "edited": false, "score": 0, "creation_date": 1487183385, "post_id": 41473724, "comment_id": 71672434, "body": "I also agree with your sql help person. Don&#39;t touch the DBC tables. They are tuned fine. Changing how they are tuned may affect other things since those tables hold meta on the tables, database, security and other whatnots that make the system run."}, {"owner": {"reputation": 1, "user_id": 6416024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276920f8eced446517571dd50164a1e?s=128&d=identicon&r=PG&f=1", "display_name": "yl2526", "link": "https://stackoverflow.com/users/6416024/yl2526"}, "reply_to_user": {"reputation": 38450, "user_id": 2221001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19e92b3618d46eb6ab80e4bc38cec44?s=128&d=identicon&r=PG", "display_name": "JNevill", "link": "https://stackoverflow.com/users/2221001/jnevill"}, "edited": false, "score": 0, "creation_date": 1487192330, "post_id": 41473724, "comment_id": 71677481, "body": "@JNevill, Thanks for you response. Really appreciate it. If the query only takes 4-6 seconds or just under 10 seconds, I will have no problem about it but it is taking over 100 seconds. Also, to drop the table, the dialect will try run a query taking over 200 seconds. The queries are generated by sqlalchemy-teradta dialect and I cannot change it. What do you think I can do to alleviate this overhead? Should I mask the dialect&#39;s methods?"}, {"owner": {"reputation": 54566, "user_id": 2527905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY8e6.jpg?s=128&g=1", "display_name": "dnoeth", "link": "https://stackoverflow.com/users/2527905/dnoeth"}, "edited": false, "score": 0, "creation_date": 1487194081, "post_id": 41473724, "comment_id": 71678406, "body": "You can&#39;t tune the system views besides collecting statistics. To check if you DBAs implemented statistics simply run <code>select * from dbc.StatsV where databasename = &#39;dbc&#39;</code>. If no rows are returned point them to <a href=\"http://developer.teradata.com/blog/carrie/2010/05/if-you-re-not-collecting-statistics-on-your-dictionary-tables-do-it-now\" rel=\"nofollow noreferrer\">developer.teradata.com/blog/carrie/2010/05/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 6416024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276920f8eced446517571dd50164a1e?s=128&d=identicon&r=PG&f=1", "display_name": "yl2526", "link": "https://stackoverflow.com/users/6416024/yl2526"}, "edited": false, "score": 0, "creation_date": 1487196967, "post_id": 41473724, "comment_id": 71679877, "body": "@denoth, Thanks. I tried  <code>select * from dbc.StatsV where databasename =&#39;dbc&#39; and lower(trim(tablename)) in (&#39;indices&#39;, &#39;tablesvx&#39;, &#39;all_ri_childrenv&#39;) </code>before and found nothing. I thought the reason is that you can only collect stats on tables but not on view. Can you do collect stat on view?"}, {"owner": {"reputation": 54566, "user_id": 2527905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY8e6.jpg?s=128&g=1", "display_name": "dnoeth", "link": "https://stackoverflow.com/users/2527905/dnoeth"}, "edited": false, "score": 0, "creation_date": 1487230961, "post_id": 41473724, "comment_id": 71691851, "body": "No, you can&#39;t collect stats on views (you can collect on calculations, but only on a table level). Are there stats on dbc?"}, {"owner": {"reputation": 1, "user_id": 6416024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276920f8eced446517571dd50164a1e?s=128&d=identicon&r=PG&f=1", "display_name": "yl2526", "link": "https://stackoverflow.com/users/6416024/yl2526"}, "reply_to_user": {"reputation": 54566, "user_id": 2527905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY8e6.jpg?s=128&g=1", "display_name": "dnoeth", "link": "https://stackoverflow.com/users/2527905/dnoeth"}, "edited": false, "score": 0, "creation_date": 1487257114, "post_id": 41473724, "comment_id": 71711054, "body": "@dnoeth, Thanks. Yes, there are. However, some stats were collected one year ago and some columns that the view is joining or filtering on doesn&#39;t have stats. So, for the underling tables, I should collect stats on all the columns on which the system views do the calculation, join or filter and all columns that I want to filter on the view. Should I collect stats on some columns together or one by one? I never understand this."}, {"owner": {"reputation": 54566, "user_id": 2527905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY8e6.jpg?s=128&g=1", "display_name": "dnoeth", "link": "https://stackoverflow.com/users/2527905/dnoeth"}, "edited": false, "score": 0, "creation_date": 1487259783, "post_id": 41473724, "comment_id": 71713116, "body": "You can&#39;t collect stats on system tables, only dbc (i.e your DBAs) can. As I said, point them to Carrie Ballinger&#39;s blog. Of course stats should be periodically refreshed, too."}, {"owner": {"reputation": 1, "user_id": 6416024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276920f8eced446517571dd50164a1e?s=128&d=identicon&r=PG&f=1", "display_name": "yl2526", "link": "https://stackoverflow.com/users/6416024/yl2526"}, "reply_to_user": {"reputation": 54566, "user_id": 2527905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY8e6.jpg?s=128&g=1", "display_name": "dnoeth", "link": "https://stackoverflow.com/users/2527905/dnoeth"}, "edited": false, "score": 0, "creation_date": 1487259849, "post_id": 41473724, "comment_id": 71713169, "body": "@dnoeth, Sure, thanks."}], "owner": {"reputation": 1, "user_id": 6416024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a276920f8eced446517571dd50164a1e?s=128&d=identicon&r=PG&f=1", "display_name": "yl2526", "link": "https://stackoverflow.com/users/6416024/yl2526"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487192455, "creation_date": 1483566198, "last_edit_date": 1487192455, "question_id": 41473724, "link": "https://stackoverflow.com/questions/41473724/teradata-system-views-tuning", "title": "Teradata system views tuning", "body": "<p>I tried to connect teradata using sqlalchemy in order to use read_sql and to_sql methods form pandas.</p>\n\n<p>However, the connection is so slow. Even simple stuff, such as pd.read_sql('select current_date'), will cost more than 30 seconds to complete. </p>\n\n<p>I don't really understand why this is so slow. If anyone experienced similar issue before, please tell me why and how you solved this. Thanks!</p>\n\n<p>Updates:<br>\nI tried cProfile and sqlTAP and realize the slowness is due to some queries that the dialect generated. The has_table meathod will run a query to dbc.tablesvx view and this query will take around <strong>100 seconds</strong> to finish while the view is only about 55k rows. For pd.to_sql, this has_table might be called more than once and some other queries to system tables will be required.  </p>\n\n<pre><code>-- query from has_table method   \nSELECT tablename\nFROM dbc.tablesvx\nWHERE DatabaseName=?\n  AND TableName=? \n-- query form drop_table method\nSELECT tablename\nFROM dbc.TablesVX\nWHERE DatabaseName = ?\n  AND (tablekind='T'\n       OR tablekind='O')\n</code></pre>\n\n<p>It seems like all I need to do is some tuning to the system tables to make the queries run faster. However, our sql help persons told me that those system tables are already in the best performance. Is this possible? Is there anyone who have done any tuning to teradata DBC view? Thanks.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1483566208, "post_id": 41473692, "comment_id": 70153250, "body": "Please consider simplifying your problem when asking a question, as given in <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>. For instance, you could have a regex that <i>only</i> searched for the string <code>] [</code>; if that still caused the problem, there&#39;d be a lot less guesswork (and the question would be much easier to read)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1483566269, "post_id": 41473692, "comment_id": 70153285, "body": "...similarly, you&#39;re depending on variables (like <code>Text</code>) that your code doesn&#39;t define, meaning folks can&#39;t just copy-and-paste to see the problem for themselves."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6884534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1692892ea0bf49efc51df658e90bc3f6?s=128&d=identicon&r=PG", "display_name": "user18160", "link": "https://stackoverflow.com/users/6884534/user18160"}, "edited": false, "score": 0, "creation_date": 1483566929, "post_id": 41473765, "comment_id": 70153601, "body": "Thanks this helped."}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 2, "last_activity_date": 1483566712, "last_edit_date": 1483566712, "creation_date": 1483566368, "answer_id": 41473765, "question_id": 41473692, "link": "https://stackoverflow.com/questions/41473692/searching-for-a-string-containing-literal-brackets-with-a-python-regular-express/41473765#41473765", "title": "Searching for a string containing literal brackets with a Python Regular Expression", "body": "<p>Use <code>re.escape()</code> to escape a string such that it can be used as a literal in a regular expression.</p>\n\n<p>Observe:</p>\n\n<h3>With contents escaped</h3>\n\n<pre><code>&gt;&gt;&gt; re.search(re.escape('] ['), 'foo ] [ bar')\n&lt;_sre.SRE_Match object at 0x105a956b0&gt;\n</code></pre>\n\n<h3>Without contents escaped</h3>\n\n<pre><code>&gt;&gt;&gt; re.search('] [', 'foo ] [ bar')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py\", line 146, in search\n    return _compile(pattern, flags).search(string)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py\", line 251, in _compile\n    raise error, v # invalid expression\nsre_constants.error: unexpected end of regular expression\n</code></pre>\n\n<h3>Escaping Only Literal Components</h3>\n\n<p>In your immediate case, of course, you want to escape only the two literal strings you're searching between:</p>\n\n<pre><code>re.search('%s(.*)%s' % (re.escape(\"DateCreated:\"),\n                        re.escape(\"] [TotalTime:\")),\n          \"DateCreated: yadda yadda ] [TotalTime: meh\")\n</code></pre>\n\n<p>...by the way, notice how much easier proper indentation makes readability? You might think about doing that yourself in the future, or using an editor (such as emacs) which will do it for you.</p>\n"}, {"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 0, "last_activity_date": 1483566869, "creation_date": 1483566869, "answer_id": 41473885, "question_id": 41473692, "link": "https://stackoverflow.com/questions/41473692/searching-for-a-string-containing-literal-brackets-with-a-python-regular-express/41473885#41473885", "title": "Searching for a string containing literal brackets with a Python Regular Expression", "body": "<p>Special characters should be escaped when using within regex pattern:</p>\n\n<p><strong>1)</strong> in a direct way:</p>\n\n<pre><code>Date = re.search(r'%s(.*)%s' % (\"DateCreated:\", \"\\] \\[TotalTime:\"), 'DateCreated: 04-01-2017 ] [TotalTime: 2')\nprint(Date.group(1))  # 04-01-2017\n</code></pre>\n\n<p><strong>2)</strong> OR by using <code>re.escape()</code> function(which is preferable):</p>\n\n<pre><code>Date = re.search(r'%s(.*)%s' % (re.escape(\"DateCreated:\"), re.escape(\"] [TotalTime:\")), 'DateCreated: 04-01-2017 ] [TotalTime: 2')\nprint(Date.group(1)) # 04-01-2017\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/re.html#re.escape\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/re.html#re.escape</a></p>\n"}], "owner": {"reputation": 23, "user_id": 6884534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1692892ea0bf49efc51df658e90bc3f6?s=128&d=identicon&r=PG", "display_name": "user18160", "link": "https://stackoverflow.com/users/6884534/user18160"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1483566869, "creation_date": 1483566064, "last_edit_date": 1483566840, "question_id": 41473692, "link": "https://stackoverflow.com/questions/41473692/searching-for-a-string-containing-literal-brackets-with-a-python-regular-express", "title": "Searching for a string containing literal brackets with a Python Regular Expression", "body": "<pre><code>Date = re.search('%s(.*)%s' % (\"DateCreated:\", \"] [TotalTime:\"), find_all(Text(\"Exam\"))[0].value).group(1)\n</code></pre>\n\n<p>I am getting an error \"unexpected end of regular expression\". My guess is it is not accepting \"] [\" section in code. </p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 3240, "user_id": 1840421, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/515ec6ff557dab01ee32f0e2cf288663?s=128&d=identicon&r=PG", "display_name": "Sharif Mamun", "link": "https://stackoverflow.com/users/1840421/sharif-mamun"}, "edited": false, "score": 0, "creation_date": 1483566238, "post_id": 41473670, "comment_id": 70153267, "body": "It means your system environment path is not set!"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1483566971, "post_id": 41473670, "comment_id": 70153621, "body": "Do you have two Python installations, one from Anaconda and one from python.org?"}, {"owner": {"reputation": 79, "user_id": 1211653, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/521e80ac70146344b8bc4ea050ee175d?s=128&d=identicon&r=PG", "display_name": "JLarrimore", "link": "https://stackoverflow.com/users/1211653/jlarrimore"}, "edited": false, "score": 0, "creation_date": 1483581562, "post_id": 41473670, "comment_id": 70158364, "body": "Hmm the Anaconda install is new, but how would I force the system env to use the original python install and not look in the anaconda path?"}], "owner": {"reputation": 79, "user_id": 1211653, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/521e80ac70146344b8bc4ea050ee175d?s=128&d=identicon&r=PG", "display_name": "JLarrimore", "link": "https://stackoverflow.com/users/1211653/jlarrimore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483565982, "creation_date": 1483565982, "question_id": 41473670, "link": "https://stackoverflow.com/questions/41473670/i-can-import-scipy-in-my-command-prompt-but-i-get-a-dll-load-fail-when-i-run-my", "title": "I can import scipy in my command prompt but I get a DLL load fail when I run my script", "body": "<p>Windows 7 \nPython 2.7</p>\n\n<p>When I import scipy in my command prompt, everything works as expected:</p>\n\n<pre><code>Python 2.7.12 |Anaconda 4.2.0 (32-bit)| (default, Jun 29 2016, 11:42:13)        [MSC v.\n1500 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nAnaconda is brought to you by Continuum Analytics.\nPlease check out: http://continuum.io/thanks and https://anaconda.org\n&gt;&gt;&gt; from scipy.stats import norm\n</code></pre>\n\n<p>When I run a script, scipy has a DLL issue:</p>\n\n<pre><code>  from scipy.stats import norm\n  File \"C:\\Python27\\lib\\site-packages\\scipy\\stats\\__init__.py\", line 344, in &lt;module&gt;\n  from .stats import *\n  File \"C:\\Python27\\lib\\site-packages\\scipy\\stats\\stats.py\", line 173, in &lt;module&gt;\n  import scipy.special as special\n  File \"C:\\Python27\\lib\\site-packages\\scipy\\special\\__init__.py\", line 636, in &lt;module&gt;\n  from ._ufuncs import *\n  ImportError: DLL load failed: %1 is not a valid Win32 application.\n</code></pre>\n\n<p>Thanks in advance for any advice.</p>\n"}, {"tags": ["python", "linux", "tkinter", "raspberry-pi", "focus"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7376211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d112e245af31b5f897104b785c3d161?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/7376211/stephen"}, "edited": false, "score": 0, "creation_date": 1484484413, "post_id": 41475557, "comment_id": 70520837, "body": "Thanks for the response, this didn&#39;t really help though.  I&#39;ve since done away with the number buttons in favor of sliding scales, which do the job and avoid the entry boxes altogether.  Now my problem is making an exit button that the program will look for even while in a loop.  I&#39;ll post a new question with that soon."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 0, "last_activity_date": 1483576901, "creation_date": 1483576901, "answer_id": 41475557, "question_id": 41473634, "link": "https://stackoverflow.com/questions/41473634/tkinter-focus-not-working-need-button-keypad-to-type-into-2-different-entries/41475557#41475557", "title": "Tkinter Focus not working - Need button keypad to type into 2 different entries based on focus", "body": "<p>You can use the method <code>focus_get</code> on the root window to get the widget that has focus. You can then insert text using that widget. You can specify the special index of \"end\" to have the text inserted at the end of the widget.</p>\n\n<p>For example:</p>\n\n<pre><code>def set_text(text)\n    widget = root.focus_get()\n    widget.insert(\"end\", text)\n</code></pre>\n\n<p>Of course, you'll want to do some validation to make sure that the widget is a text or entry widget. </p>\n\n<p>Also, be careful with using ttk -- the default behavior of ttk button widgets is to steal the keyboard focus. </p>\n"}], "owner": {"reputation": 3, "user_id": 7376211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d112e245af31b5f897104b785c3d161?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/7376211/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483576901, "creation_date": 1483565815, "last_edit_date": 1483568541, "question_id": 41473634, "link": "https://stackoverflow.com/questions/41473634/tkinter-focus-not-working-need-button-keypad-to-type-into-2-different-entries", "title": "Tkinter Focus not working - Need button keypad to type into 2 different entries based on focus", "body": "<p>Please Help!  I'm at my wits end over here... I am new to learning Python and tkinter and I have not found anyone trying to do what I am, so I keep trying different people's answers and nothing is working.  I can't understand the docs, and every tutorial I find is not quite exactly what I need to do, so I end up with irrelevant code bits that just lead to more problems.</p>\n\n<p>I want to build a GUI for a touchscreen program for a Raspberry Pi that will allow me to program a relay to turn on for \"x\" seconds, then turn off for \"y\" seconds, then repeat forever until I stop it.  The touchscreen needs to have large buttons for each of the numbers 0 - 9, a button to clear the values, buttons to confirm each value once it has been input in the entry box, a button to start the cycle, and a button to exit.  There also needs to be 2 entry boxes, one for \"On\", and one for \"Off\", so that the user can see the numbers they have entered for each value. This is what is messing me up. I can get it to work for one entry box, but not two.</p>\n\n<p>Please someone tell me what is wrong.  I don't know how to tell each button to place its value only in the entry field that has focus.  I can only figure out how to tell it to input in one entry or the other, regardless of which has focus.</p>\n\n<p>I also need the numbers to appear in the entry boxes in the correct sequence, so that when you type a \"3\" and then a \"0\", the program reads \"30\". Right now it is producing \"03\".</p>\n\n<p>Here's the code.  I have some things commented out currently, and yes, I know it's ugly:</p>\n\n<pre><code>    #!/usr/bin/env python\n\n    try:\n        # for Python 2\n        from Tkinter import *\n    except ImportError:\n        # for Python 3\n        from tkinter import *\n\n    import ttk as ttk\n    import RPi.GPIO as GPIO\n    import time\n    GPIO.setwarnings(False)\n    GPIO.setmode(GPIO.BCM)\n    GPIO.setup(4, GPIO.OUT)\n    GPIO.setup(4, GPIO.LOW)\n\n    running = True\n\n\n    def water():\n        go.grid(column=4, row=3, rowspan=6, columnspan=6, sticky=W)\n\n    def go():\n        running = True    \n        x = on.get()\n        y = off.get()\n        y = float(y)\n        x = float(x)        \n        if running:\n            GPIO.output(4, False)\n            print(\"Off\")\n            time.sleep(y)\n            GPIO.output(4, True)\n            print(\"On\")\n            time.sleep(x)    \n            root.after(10, go)    \n\n    def clear():\n        on.set('')\n        off.set('')\n        global running\n        running = False\n        go.grid_forget()\n        on_entry.focus()\n\n    def select(value):\n        if on_entry.focus():\n            on_entry.set(value)\n        elif off_entry.focus():\n            off_entry.set(value)\n\n    def geton():\n        on_entry.get()\n        off_entry.focus()\n\n    def getoff():\n        off_entry.get()\n        water()\n\n    #this is the PROBLEM!!!!\n    def set_text(text):\n        on_entry.insert(0,text)\n\n\n    #buttons = ['1','2','3','4','5','6','7','8','9','0']    \n    #varRow = 5\n    #varColumn = 0\n\n    root = Tk()\n    root.geometry(\"740x480+0+0\")\n    root.title(\"Waterboy\")\n\n    #need to make this fullscreen\n    mainframe = Frame(root)\n    mainframe.grid(column=0, row=0, sticky=(N, W, E, S))\n    mainframe.columnconfigure(0, weight=1)\n    mainframe.rowconfigure(0, weight=1)\n\n    go = Button(mainframe, text=\"GO\", command=go, bg=\"green\", width=6, height=11)\n\n    #seconds on and off\n    on = StringVar()\n    off = StringVar()\n\n    on_entry = Entry(mainframe, width=8, textvariable=on)\n    on_entry.grid(column=2, row=1, sticky=(W, E))\n    off_entry = Entry(mainframe, width=8, textvariable=off)\n    off_entry.grid(column=2, row=2, sticky=(W, E))\n\n\n    on_entry.focus_set()\n\n    onok = Button(mainframe, text=\"OK\", command=geton, bg=\"white\", width=6, height=1)\n    onok.grid(column=4, row=1, sticky=W)\n\n    offok = Button(mainframe, text=\"OK\", command=getoff, bg=\"white\", width=6, height=1)\n    offok.grid(column=4, row=2, sticky=W)\n\n    reset = Button(mainframe, text=\"Reset Values\", command=clear, bg='yellow', width=16, height=2)\n    reset.grid(column=0, row=7, sticky=W)\n\n    adios = Button(mainframe, text=\"EXIT\", command=exit, bg=\"red\", width=16, height=2)\n    adios.grid(column=2, row=7, sticky=W)\n\n    secon = ttk.Label(mainframe, text=\"Input # Seconds Water ON and press 'OK' --&gt;\", width=36)\n    secon.grid(column=0, row=1, columnspan=2)\n    secoff = ttk.Label(mainframe, text=\"Input # Seconds Water OFF and press 'OK' --&gt;\", width=36)\n    secoff.grid(column=0, row=2, columnspan=2)\n\n    one = Button(mainframe, text=\"1\", width=16, height=2, command=lambda:set_text(\"1\")\n    one.grid(column=0, row=4, sticky=W)\n    two = Button(mainframe, text=\"2\", width=16, height=2, command=lambda:set_text(\"2\")\n    two.grid(column=1, row=4, sticky=W)\n    three = Button(mainframe, text=\"3\", width=16, height=2, command=lambda:set_text(\"3\")\n    three.grid(column=2, row=4, sticky=W)\n    four = Button(mainframe, text=\"4\", width=16, height=2, command=lambda:set_text(\"4\")\n    four.grid(column=0, row=5, sticky=W)\n    five = Button(mainframe, text=\"5\", width=16, height=2, command=lambda:set_text(\"5\")\n    five.grid(column=1, row=5, sticky=W)\n    six = Button(mainframe, text=\"6\", width=16, height=2, command=lambda:set_text(\"6\")\n    six.grid(column=2, row=5, sticky=W)\n    seven = Button(mainframe, text=\"7\", width=16, height=2, command=lambda:set_text(\"7\")\n    seven.grid(column=0, row=6, sticky=W)\n    eight = Button(mainframe, text=\"8\", width=16, height=2, command=lambda:set_text(\"8\")\n    eight.grid(column=1, row=6, sticky=W)\n    nine = Button(mainframe, text=\"9\", width=16, height=2, command=lambda:set_text(\"9\")\n    nine.grid(column=2, row=6, sticky=W)\n    zero = Button(mainframe, text=\"0\", width=16, height=2, command=lambda:set_text(\"0\")\n    zero.grid(column=1, row=7, sticky=W)\n\n\n    #for child in mainframe.winfo_children(): child.grid_configure(padx=4, pady=4)\n\n\n    #root.bind('&lt;Return&gt;', go)\n\n    #for button in buttons:\n    #    command = lambda x=button: select(x)\n    #    Button(mainframe, text=button, width=5, bg=\"white\", command = command).grid(row = varRow, column=varColumn)\n    #    varColumn += 1\n    #    if varColumn &gt; 2 and varRow == 4:\n    #        varColumn = 0\n    #        varRow += 1\n    #    if varColumn &gt; 2 and varRow == 5:\n    #        varColumn = 0\n    #        varRow += 1\n    #    if varColumn &gt; 2 and varRow == 6:\n    #        varColumn = 0\n    #        varRow += 1\n\n    root.mainloop()\n</code></pre>\n"}, {"tags": ["python", "sql-server", "python-3.x", "csv", "null"], "comments": [{"owner": {"reputation": 470, "user_id": 965435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5616ff1ae7c660e83f6b0ee78ebbdb5?s=128&d=identicon&r=PG", "display_name": "Sam F", "link": "https://stackoverflow.com/users/965435/sam-f"}, "edited": false, "score": 0, "creation_date": 1483566319, "post_id": 41473612, "comment_id": 70153315, "body": "Possibly useful: <a href=\"http://stackoverflow.com/questions/1149665/how-do-you-insert-null-values-into-sql-server\" title=\"how do you insert null values into sql server\">stackoverflow.com/questions/1149665/&hellip;</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1483566486, "post_id": 41473612, "comment_id": 70153401, "body": "From Python I&#39;d guess <code>None</code> but certainly not <code>&#39;NULL&#39;</code>. But it&#39;s a guess."}, {"owner": {"reputation": 3496, "user_id": 2961734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f0229603e30b04fddc833d85afc9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Laughing Vergil", "link": "https://stackoverflow.com/users/2961734/laughing-vergil"}, "edited": false, "score": 0, "creation_date": 1483567005, "post_id": 41473612, "comment_id": 70153639, "body": "What is your writer? How is it outputting the data - SQL commands to be executed, data elements to be imported, some form of direct-to-SQL-Server writer, or ??."}, {"owner": {"reputation": 47, "user_id": 5640174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba775dac5b4fa26e8b8c3d41293f8360?s=128&d=identicon&r=PG&f=1", "display_name": "Partha", "link": "https://stackoverflow.com/users/5640174/partha"}, "edited": false, "score": 0, "creation_date": 1483567012, "post_id": 41473612, "comment_id": 70153646, "body": "I tried using None, it&#39;s shows blank in SQL Server table after dataload."}, {"owner": {"reputation": 47, "user_id": 5640174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba775dac5b4fa26e8b8c3d41293f8360?s=128&d=identicon&r=PG&f=1", "display_name": "Partha", "link": "https://stackoverflow.com/users/5640174/partha"}, "edited": false, "score": 0, "creation_date": 1483567339, "post_id": 41473612, "comment_id": 70153814, "body": "Laughing Vergil - I&#39;ve added more code to understand how it&#39;s inserting data in SQL Server. - Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5640174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba775dac5b4fa26e8b8c3d41293f8360?s=128&d=identicon&r=PG&f=1", "display_name": "Partha", "link": "https://stackoverflow.com/users/5640174/partha"}, "edited": false, "score": 0, "creation_date": 1483655856, "post_id": 41477897, "comment_id": 70198108, "body": "I tried above approach but it doesn&#39;t work. Still shows up blank in SQL database."}, {"owner": {"reputation": 47, "user_id": 5640174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba775dac5b4fa26e8b8c3d41293f8360?s=128&d=identicon&r=PG&f=1", "display_name": "Partha", "link": "https://stackoverflow.com/users/5640174/partha"}, "edited": false, "score": 0, "creation_date": 1483738663, "post_id": 41477897, "comment_id": 70235601, "body": "Promod - Your solution works. I had to do bit modification in code but technically that&#39;s the correct solution. Thanks. I&#39;ve edited working version in answer. Thanks again."}], "tags": [], "owner": {"reputation": 161, "user_id": 7356982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43cefa7056cb3632d6bbaa6ed35f4455?s=128&d=identicon&r=PG&f=1", "display_name": "Pramod Maharjan", "link": "https://stackoverflow.com/users/7356982/pramod-maharjan"}, "is_accepted": true, "score": 3, "last_activity_date": 1483594321, "creation_date": 1483594321, "answer_id": 41477897, "question_id": 41473612, "link": "https://stackoverflow.com/questions/41473612/convert-csv-blank-cell-to-sql-null-in-python/41477897#41477897", "title": "Convert CSV Blank cell to SQL NULL in Python", "body": "<p>This should work</p>\n\n<pre><code>import pyodbc\nimport csv\ncnxn = pyodbc.connect(connection string)\ncur = cnxn.cursor()\nquery = \"insert into yourtable values(?, ?)\"\nwith open('yourfile.csv', 'rb') as csvfile:\n    reader = csv.reader(csvfile, delimiter=',')\n    for row in reader:\n        for i in range(len(row)):\n            if row[i] == '':\n                row[i] = None\n        cur.execute(query, row)   \n    cur.commit()\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5640174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba775dac5b4fa26e8b8c3d41293f8360?s=128&d=identicon&r=PG&f=1", "display_name": "Partha", "link": "https://stackoverflow.com/users/5640174/partha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2372, "favorite_count": 0, "accepted_answer_id": 41477897, "answer_count": 1, "score": 1, "last_activity_date": 1483594321, "creation_date": 1483565716, "last_edit_date": 1483567284, "question_id": 41473612, "link": "https://stackoverflow.com/questions/41473612/convert-csv-blank-cell-to-sql-null-in-python", "title": "Convert CSV Blank cell to SQL NULL in Python", "body": "<p>I'm trying to convert blank cells in a csv file to NULL and upload them in SQL Server table so it shows as NULL rather blank. below code works but they load NULL as a string. Can you please help me to modify the code so it loads NULL in SQL ? </p>\n\n<pre><code>reader = csv.reader(f_in)    # setup code\nwriter = csv.writer(f_out)\n\nrow = next(reader)           # handle first line (with no replacements)\nwriter.writerow(row)\nlast_row = row               # always save the last row of data that we've written\nvariable = None\n\nfor row in reader:           # loop over the rest of the lines\n    row = [x if x else \"NULL\" for x, y in zip(row, last_row)]  # replace empty strings\n    writer.writerow(row)\n    last_row = row\n\n\n\n\nwith open(outputFileName,'r') as fin: # `with` statement available in 2.5+    \ndr = csv.DictReader(fin) # comma is default delimiter        \nto_db = [(i['SubFund'], \n        i['Trader'], \n        i['Prime Broker/Clearing Broker']) \n\ncur.executemany(\"INSERT INTO Citco_SPOS (\" + \n            \"subfund, \" +\n           \"trader, \" +\n            \"prime_broker_clearing_broker, \" + +\n            \"VALUES (?, ?,  ?);\", to_db)\ncon.commit()\n</code></pre>\n"}, {"tags": ["python", "filtering", "signal-processing", "lowpass-filter"], "comments": [{"owner": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "edited": false, "score": 0, "creation_date": 1483570925, "post_id": 41473545, "comment_id": 70155319, "body": "I&#39;m voting to close this question as off-topic because it&#39;s a better fit for <a href=\"http://dsp.stackexchange.com\">dsp.stackexchange.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7376244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442ae2e1dd090198fa94275493512e4a?s=128&d=identicon&r=PG&f=1", "display_name": "jeimer", "link": "https://stackoverflow.com/users/7376244/jeimer"}, "edited": false, "score": 0, "creation_date": 1483586911, "post_id": 41474681, "comment_id": 70159535, "body": "Thanks!. Motivated by your comment, I was able to look at the phase plot with fresh eyes and see that the slope does appear to be the same in the stop band as it is in the pass band - provided the 2pi jumps are healed. I had naively expected np.unwrap() would take care of this for me, but it seems something isn&#39;t working there. If it is the same slope, it&#39;s definitely a nice linear phase filter. Thanks again."}], "tags": [], "owner": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "is_accepted": false, "score": 1, "last_activity_date": 1483570872, "creation_date": 1483570872, "answer_id": 41474681, "question_id": 41473545, "link": "https://stackoverflow.com/questions/41473545/why-does-my-windowed-sinc-function-have-non-linear-phase/41474681#41474681", "title": "Why does my windowed-sinc function have non-linear phase?", "body": "<p>The phase as shown in your graph is in fact linear. It's a constant slope in the passband, corresponding to a constant delay in the time domain. It's a much steeper slope, which renders as wrapping around at 2pi boundaries, in the stopband. But the value of the phase in the stopband is not particularly important since those frequencies aren't going to come through the filter anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7376244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442ae2e1dd090198fa94275493512e4a?s=128&d=identicon&r=PG&f=1", "display_name": "jeimer", "link": "https://stackoverflow.com/users/7376244/jeimer"}, "edited": false, "score": 0, "creation_date": 1483586445, "post_id": 41474742, "comment_id": 70159442, "body": "I want to understand your point about zero crossing. The phase crosses zero many time in the pass band as well and it seems np.unwrap handled them ok, is there something in the stop band in particular that would cause the crossings to be treated differently?"}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "reply_to_user": {"reputation": 23, "user_id": 7376244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442ae2e1dd090198fa94275493512e4a?s=128&d=identicon&r=PG&f=1", "display_name": "jeimer", "link": "https://stackoverflow.com/users/7376244/jeimer"}, "edited": false, "score": 0, "creation_date": 1483588637, "post_id": 41474742, "comment_id": 70159922, "body": "It&#39;s not the phase crossing zero, it&#39;s the amplitude/magnitude crossing zero.  This only happens in the stop band, because the amplitude is very large <i>everywhere</i> in the pass band.  When the amplitude crosses zero, it &quot;really&quot; goes from positive to negative or vice-versa.  np.angle interprets this as a 180 degree phase jump.  Imagine you had a <i>zero</i> phase filter...  Where the response is (0.001+0j), np.angle says 0.  Where the response is (-0.001+0j), np.angle says pi."}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "reply_to_user": {"reputation": 23, "user_id": 7376244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442ae2e1dd090198fa94275493512e4a?s=128&d=identicon&r=PG&f=1", "display_name": "jeimer", "link": "https://stackoverflow.com/users/7376244/jeimer"}, "edited": false, "score": 0, "creation_date": 1483589677, "post_id": 41474742, "comment_id": 70160141, "body": "See, for example: <a href=\"https://ccrma.stanford.edu/~jos/fp/Example_Zero_Phase_Filter_Design.html\" rel=\"nofollow noreferrer\">ccrma.stanford.edu/~jos/fp/&hellip;</a>"}], "tags": [], "owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "is_accepted": true, "score": 2, "last_activity_date": 1483571665, "last_edit_date": 1483571665, "creation_date": 1483571249, "answer_id": 41474742, "question_id": 41473545, "link": "https://stackoverflow.com/questions/41473545/why-does-my-windowed-sinc-function-have-non-linear-phase/41474742#41474742", "title": "Why does my windowed-sinc function have non-linear phase?", "body": "<p>The magnitudes in the stop band are crossing zero.  The phase of the coefficient after a zero crossing will jump by 180 degrees, which is confusing np.angle()/np.unwrap().   -1*180\u00b0 = 1*0\u00b0</p>\n"}], "owner": {"reputation": 23, "user_id": 7376244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442ae2e1dd090198fa94275493512e4a?s=128&d=identicon&r=PG&f=1", "display_name": "jeimer", "link": "https://stackoverflow.com/users/7376244/jeimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 41474742, "answer_count": 2, "score": 1, "last_activity_date": 1483735874, "creation_date": 1483565413, "last_edit_date": 1483735874, "question_id": 41473545, "link": "https://stackoverflow.com/questions/41473545/why-does-my-windowed-sinc-function-have-non-linear-phase", "title": "Why does my windowed-sinc function have non-linear phase?", "body": "<p>Similar to many tutorials on the web, I've tried implementing a windowed-sinc lowpass filter using the following python functions: </p>\n\n<pre><code>def black_wind(w):\n''' blackman window of width w'''\n    samps = np.arange(w)\n    return (0.42  - 0.5 * np.cos(2 * np.pi * samps/ (w-1)) + 0.08 * np.cos(4 * np.pi * samps/ (w-1)))\n\ndef lp_win_sinc(tw, fc, n):\n''' lowpass sinc impulse response \nParameters:\n    tw = approximate transition width [fraction of nyquist freq]\n    fc = cutoff freq [fraction of nyquest freq]\n    n = length of output. \nReturns:\n    s = impulse response of windowed-sinc filter appended zero-padding\n    to make len(s) = n\n'''\n    m = int(np.ceil( 4./tw / 2) * 2) \n    samps = np.arange(m+1)\n    shift = samps - m/2\n    shift[m/2] = 1\n    h = np.sin(2 * np.pi * fc * shift)/shift\n    h[m/2] = 2 * np.pi * fc\n    h = h * black_wind(m+1)\n    h = h / h.sum()\n    s = np.zeros(n)\n    s[:len(h)] = h\n    return s\n</code></pre>\n\n<p>For input: 'tw = 0.05', 'fc = 0.2', 'n = 6000', the magnitude of the fft seems reasonable. </p>\n\n<pre><code>tw = 0.05\nfc = 0.2\nn = 6000\nlp = lp_win_sinc(tw, fc, n)\nf_lp = np.fft.rfft(lp)\nplt.figure()\nx = np.linspace(0, 0.5, len(f_lp))\nplt.plot(x, np.abs(f_lp))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3p7wk.png\" rel=\"nofollow noreferrer\">magnitude of lowpass filter response</a></p>\n\n<p>however, the phase is non-linear above ~fc.</p>\n\n<pre><code>plt.figure()\nx = np.linspace(0, 0.5, len(f_lp))\nplt.plot(x, np.unwrap(np.angle(f_lp)))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/mmEnD.png\" rel=\"nofollow noreferrer\">phase of lowpass filter response</a></p>\n\n<p>Given the symmetry of the non-zero-padded portion of the impulse response, I would expect the resulting phase to be linear. Can someone explain what is going on? Perhaps I'm using a numpy function incorrectly, or maybe my expectations are incorrect. I'm very grateful for any help.</p>\n\n<p>***********************EDIT***********************</p>\n\n<p>based on some of the helpful comments to this question and some more work, I wrote a function that produces zero phase delay and is therefore a bit easier to interpret the np.angle() results. </p>\n\n<pre><code>def lp_win_sinc(tw, fc, n):\n    m = int(np.ceil( 2./tw) * 2) \n    samps = np.arange(m+1)\n    shift = samps - m/2\n    shift[m/2] = 1\n    h = np.sin(2 * np.pi * fc * shift)/shift\n    h[m/2] = 2 * np.pi * fc\n    h = h * np.blackman(m+1)\n    h = h / h.sum()\n    s = np.zeros(n)\n    s[:len(h)] = h\n    return np.roll(s, -m/2)\n</code></pre>\n\n<p>The main change here is using np.roll() to place the line of symmetry at t=0.</p>\n"}, {"tags": ["python", "json", "python-requests"], "comments": [{"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "edited": false, "score": 1, "creation_date": 1483565509, "post_id": 41473527, "comment_id": 70152894, "body": "maybe try using OrderedDict instead if order matters to you: <a href=\"https://docs.python.org/2/library/collections.html#ordereddict-objects\" rel=\"nofollow noreferrer\">docs.python.org/2/library/collections.html#ordereddict-objec&zwnj;&#8203;ts</a>"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1483568285, "post_id": 41473527, "comment_id": 70154263, "body": "In the JSON format the type object is considered unordered already, very similar to Python dictionaries. You can not rely on the order at any time in both languages."}, {"owner": {"reputation": 71, "user_id": 4999086, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ce6a6cbee808db8cfc1bccda70776e70?s=128&d=identicon&r=PG&f=1", "display_name": "Theof", "link": "https://stackoverflow.com/users/4999086/theof"}, "edited": false, "score": 0, "creation_date": 1483626225, "post_id": 41473527, "comment_id": 70180030, "body": "What I want to do is to create a dictionary exactly like the JSON file. It&#39;s not about ordering with a specific way."}], "owner": {"reputation": 71, "user_id": 4999086, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ce6a6cbee808db8cfc1bccda70776e70?s=128&d=identicon&r=PG&f=1", "display_name": "Theof", "link": "https://stackoverflow.com/users/4999086/theof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1483565709, "answer_count": 0, "score": 0, "last_activity_date": 1581602161, "creation_date": 1483565342, "last_edit_date": 1581602161, "question_id": 41473527, "link": "https://stackoverflow.com/questions/41473527/json-gets-reversed-automatically-when-converted-to-dictionary", "closed_reason": "Duplicate", "title": "JSON gets reversed automatically when converted to dictionary", "body": "<p>I am using the \"requests\" module in order to get the content of a web page which happens to be a JSON file. What I want is to convert this JSON to a Python's dictionary.</p>\n\n<p>Here is the code I am using so far:</p>\n\n<pre><code>import requests\nimport json\n\n\napiURL = \"http://www.cryptocompare.com/api/data/coinlist/\"\ncontent = requests.get(apiURL)\ncontent = r.content\ncontent = json.load(r)\n</code></pre>\n\n<p>While I am expecting the created dictionary to contains the whole JSON from the beggining till the end as shown in the image below:<br>\n<a href=\"https://i.stack.imgur.com/dVNYO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dVNYO.png\" alt=\"enter image description here\"></a></p>\n\n<p>The created dictionary starts from the middle or in another words doesn't contains the first lines of the JSON.\n<a href=\"https://i.stack.imgur.com/n7Wa4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n7Wa4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why is this happening and how can I fix that?</p>\n"}, {"tags": ["python", "callable-object"], "comments": [{"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1483566465, "post_id": 41473518, "comment_id": 70153389, "body": "oh wait, are you using python 2?"}, {"owner": {"reputation": 31, "user_id": 7376285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbceecb4922a389d12031f89418bae2?s=128&d=identicon&r=PG&f=1", "display_name": "Brendon OLeary", "link": "https://stackoverflow.com/users/7376285/brendon-oleary"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1483656854, "post_id": 41473518, "comment_id": 70198521, "body": "Ahh yes i am using python 2. Great to know that python 3 has such great support for getting this info though."}], "answers": [{"tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": false, "score": 3, "last_activity_date": 1483570870, "last_edit_date": 1483570870, "creation_date": 1483566034, "answer_id": 41473682, "question_id": 41473518, "link": "https://stackoverflow.com/questions/41473518/getting-arguments-for-any-callable-object/41473682#41473682", "title": "Getting arguments for any callable object?", "body": "<p>All these can be handled by using the <a href=\"https://docs.python.org/3/library/inspect.html#inspect.signature\" rel=\"nofollow noreferrer\"><code>inspect.signature</code></a> helper function which, as stated in its docs:</p>\n\n<blockquote>\n  <p>Accepts a wide range of python callables, from plain functions and classes to <code>functools.partial()</code> objects.</p>\n</blockquote>\n\n<p>What <code>signature</code> does is it takes your callable and constructs a <code>Signature</code> object from it:</p>\n\n<pre><code>&gt;&gt;&gt; from inspect import signature\n&gt;&gt;&gt; s = signature(Foo())  # class as shown in your example\n</code></pre>\n\n<p>with the arguments now lying in the <code>parameters</code> mapping attribute for the <code>Signature</code> instance:    </p>\n\n<pre><code>&gt;&gt;&gt; s.parameters\nmappingproxy({'args': &lt;Parameter \"*args\"&gt;, 'kwargs': &lt;Parameter \"**kwargs\"&gt;})\n</code></pre>\n\n<p>With a <code>partial</code> object, you'd get the corresponding representation:</p>\n\n<pre><code>&gt;&gt;&gt; def foo(a, b, c): pass\n&gt;&gt;&gt; p = partial(foo, c = 30)\n&gt;&gt;&gt; signature(p).parameters\n&lt;Signature (a, b, *, c=20)&gt;\n</code></pre>\n\n<p>As for built-in functions such as <code>zip</code>, this isn't always possible, some of these functions don't expose the appropriate metadata to construct a signature, <a href=\"https://www.python.org/dev/peps/pep-0362/#some-functions-may-not-be-introspectable\" rel=\"nofollow noreferrer\">from <code>PEP 362</code></a>:</p>\n\n<blockquote>\n  <p>Some functions may not be introspectable in certain implementations of Python. For example, in CPython, built-in functions defined in <code>C</code> provide no metadata about their arguments. Adding support for them is out of scope for this PEP.</p>\n</blockquote>\n\n<p>So, while <code>zip</code> isn't the type to expose information about itself, others are, e.g <code>all</code>:</p>\n\n<pre><code>&gt;&gt;&gt; signature(all)\n&lt;Signature (iterable, /)&gt;\n</code></pre>\n\n<p>you'll unfortunately require a <code>try-except</code> for these, there's nothing else that can be done.</p>\n\n<p>The cases that the <code>signature</code> helper handles are enumerated in the <a href=\"https://www.python.org/dev/peps/pep-0362/#implementation\" rel=\"nofollow noreferrer\">implementation section of <code>PEP 362</code></a> which introduced it.</p>\n\n<p>In general, <code>inspect.getargspec</code> has been deprecated for a while now in Python 3, the suggested approach (if you're using Python 3, that is) is to use  the representation offered via <code>Signature</code> objects. </p>\n\n<p>If on Python <code>2</code>, I'm pretty sure you can't do it directly with <code>getargspec</code>, you should use <code>getfullargspec</code> as Anttis' answer suggests. </p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 0, "last_activity_date": 1483566601, "creation_date": 1483566601, "answer_id": 41473809, "question_id": 41473518, "link": "https://stackoverflow.com/questions/41473518/getting-arguments-for-any-callable-object/41473809#41473809", "title": "Getting arguments for any callable object?", "body": "<p><a href=\"https://docs.python.org/3/library/inspect.html#inspect.getfullargspec\" rel=\"nofollow noreferrer\"><code>getfullargspec</code></a> also handles partials correctly. It was previously deprecated but was <em>undeprecated</em> since it was deemed that it is quite useful for single-source Python 2/3 polyglot code.</p>\n\n<p>Another option is <a href=\"https://docs.python.org/3/library/inspect.html#inspect.signature\" rel=\"nofollow noreferrer\"><code>signature</code></a> which is a bit more complicated.</p>\n"}], "owner": {"reputation": 31, "user_id": 7376285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbceecb4922a389d12031f89418bae2?s=128&d=identicon&r=PG&f=1", "display_name": "Brendon OLeary", "link": "https://stackoverflow.com/users/7376285/brendon-oleary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2266, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1483570870, "creation_date": 1483565288, "last_edit_date": 1483570669, "question_id": 41473518, "link": "https://stackoverflow.com/questions/41473518/getting-arguments-for-any-callable-object", "title": "Getting arguments for any callable object?", "body": "<p>I am interested in obtaining a general way to obtain a list of arguments and keyword arguments taken by a callable Python object. This is straight-forward for functions with the <code>inspect.getargspec</code> function, for example:</p>\n\n<pre><code>import inspect\nfrom functools import partial\n\ndef foo(*args, **kwargs):\n    return args, kwargs\n\nprint(inspect.getargspec(foo))\n&gt;&gt;ArgSpec(args=[], varargs='args', keywords='kwargs', defaults=None)\n\ndef bar(*args):\n    return args\n\nprint(inspect.getargspec(bar))\n&gt;&gt;ArgSpec(args=[], varargs='args', keywords=None, defaults=None)\n</code></pre>\n\n<p>However, this fails in cases such as these:</p>\n\n<pre><code>partial_function = partial(foo, kwarg=\"value\")\n\ninspect.getargspec(partial_function)\n&gt;&gt;TypeError: &lt;functools.partial object at 0x11748bc58&gt; is not a Python function\n\nclass Foo(object):\n    def __call__(self, *args, **kwargs):\n        return args, kwargs\n\nfoo_instance = Foo()\n\ninspect.getargspec(foo_instance)\n&gt;&gt;TypeError: &lt;__main__.Foo object at 0x116c13ed0&gt; is not a Python function\n\ninspect.getargspec(zip)\n&gt;&gt;TypeError: &lt;built-in function zip&gt; is not a Python function\n</code></pre>\n\n<p>Note, that there are ways to obtain the arguments for the partial function and for the callable object, i.e:</p>\n\n<pre><code>inspect.getargspec(partial_function.func)\n&gt;&gt;ArgSpec(args=[], varargs='args', keywords='kwargs', defaults=None)\n\ninspect.getargspec(foo_instance.__call__)\n&gt;&gt;ArgSpec(args=['self'], varargs='args', keywords='kwargs', defaults=None)\n</code></pre>\n\n<p>but I would like a more general way of obtaining these results, if at all possible.</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1483571073, "post_id": 41473492, "comment_id": 70155390, "body": "What would you do if they gave <code>--severity</code> after <code>--start_date</code>?  Or <code>--name</code> along with <code>--severity</code>?  <code>argparse</code> allows you to enter flagged arguments like this in any order.  If order is important to you, then <code>argparse</code> is the wrong tool."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1483577195, "post_id": 41473492, "comment_id": 70157248, "body": "A <code>mutually_exclusve_group</code> can raise an error if <code>--start_date</code> is provided along with <code>--name</code>, but there isn&#39;t a mechanism for <code>mutually-inclusive</code> testing."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1483577280, "post_id": 41473492, "comment_id": 70157270, "body": "A useful prior question: <a href=\"http://stackoverflow.com/questions/19414060/argparse-required-argument-y-if-x-is-present\" title=\"argparse required argument y if x is present\">stackoverflow.com/questions/19414060/&hellip;</a>"}, {"owner": {"reputation": 271, "user_id": 6227936, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/427f1dbbaabe98488d9a7537c56c7ff7?s=128&d=identicon&r=PG&f=1", "display_name": "paris_serviola", "link": "https://stackoverflow.com/users/6227936/paris-serviola"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1483599910, "post_id": 41473492, "comment_id": 70163496, "body": "@hpauulj severity should always come before start_date."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1483604822, "post_id": 41473492, "comment_id": 70165761, "body": "The only way to enforce that with <code>argparse</code> is to construct one or more custom <code>Action</code> classes.  As an exercise I could probably do that, but I wouldn&#39;t recommend it for production code."}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1483575887, "post_id": 41473797, "comment_id": 70156921, "body": "Unless you used <code>default=SUPPRESS</code> the namespace will always have a <code>severity</code> attribute.  <code>args.severity is None</code> is a better test."}, {"owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1483586532, "post_id": 41473797, "comment_id": 70159459, "body": "@hpaulj good catch! changed to getattr with default value to make it work in both cases. Though, <code>if args.start_date and not args.severity:</code> will be more readable"}], "tags": [], "owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "is_accepted": true, "score": 1, "last_activity_date": 1483586402, "last_edit_date": 1483586402, "creation_date": 1483566532, "answer_id": 41473797, "question_id": 41473492, "link": "https://stackoverflow.com/questions/41473492/optional-suboptions-after-positonal-options-argparse/41473797#41473797", "title": "Optional suboptions after positonal options argparse", "body": "<p>Unfortunately, <code>argparse</code> does not have such capability, so you will have to do it explicitly. Something like this should work:</p>\n\n<pre><code>...\nargs = parser.parse_args()\nif getattr(args, 'start_date', None) and not getattr(args, 'severity', None):\n    parser.print_help()\n    parser.exit(1, \"error message\")\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 6227936, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/427f1dbbaabe98488d9a7537c56c7ff7?s=128&d=identicon&r=PG&f=1", "display_name": "paris_serviola", "link": "https://stackoverflow.com/users/6227936/paris-serviola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 1, "accepted_answer_id": 41473797, "answer_count": 1, "score": 0, "last_activity_date": 1483586402, "creation_date": 1483565170, "last_edit_date": 1592644375, "question_id": 41473492, "link": "https://stackoverflow.com/questions/41473492/optional-suboptions-after-positonal-options-argparse", "title": "Optional suboptions after positonal options argparse", "body": "<p>I am trying to achieve something like this:</p>\n<blockquote>\n<p>python main.py --severity high --start_date 10/12/2016</p>\n<p>python main.py --name samuel</p>\n</blockquote>\n<p>Here, the argument <strong>--start_date arg</strong> will only be valid if previous argument is --severity. If we have <strong>--name</strong> instead of <strong>--severity</strong>. The argparse should return error.\nHow do I achieve this? I have looked for a while and couldn't find something that I wanted to do.</p>\n"}, {"tags": ["python", "twilio-twiml"], "comments": [{"owner": {"reputation": 11, "user_id": 7376325, "user_type": "registered", "profile_image": "https://graph.facebook.com/350237395362205/picture?type=large", "display_name": "Crash Bandicoot", "link": "https://stackoverflow.com/users/7376325/crash-bandicoot"}, "edited": false, "score": 0, "creation_date": 1483565168, "post_id": 41473480, "comment_id": 70152750, "body": "And before somebody makes that comment, no that is not my API key."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7376325, "user_type": "registered", "profile_image": "https://graph.facebook.com/350237395362205/picture?type=large", "display_name": "Crash Bandicoot", "link": "https://stackoverflow.com/users/7376325/crash-bandicoot"}, "edited": false, "score": 0, "creation_date": 1483628974, "post_id": 41473629, "comment_id": 70181995, "body": "How would I get the url of that file?"}, {"owner": {"reputation": 3777, "user_id": 2888580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0dd533cb7b1f32949fc1cef3bd0145?s=128&d=identicon&r=PG", "display_name": "Muntaser Ahmed", "link": "https://stackoverflow.com/users/2888580/muntaser-ahmed"}, "reply_to_user": {"reputation": 11, "user_id": 7376325, "user_type": "registered", "profile_image": "https://graph.facebook.com/350237395362205/picture?type=large", "display_name": "Crash Bandicoot", "link": "https://stackoverflow.com/users/7376325/crash-bandicoot"}, "edited": false, "score": 1, "creation_date": 1483651033, "post_id": 41473629, "comment_id": 70195750, "body": "Recoding instance resources have URIs that you can access. See this documentation from Twilio: <a href=\"https://www.twilio.com/docs/api/rest/recording#instance\" rel=\"nofollow noreferrer\">twilio.com/docs/api/rest/recording#instance</a>"}], "tags": [], "owner": {"reputation": 3777, "user_id": 2888580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0dd533cb7b1f32949fc1cef3bd0145?s=128&d=identicon&r=PG", "display_name": "Muntaser Ahmed", "link": "https://stackoverflow.com/users/2888580/muntaser-ahmed"}, "is_accepted": false, "score": 1, "last_activity_date": 1483565798, "creation_date": 1483565798, "answer_id": 41473629, "question_id": 41473480, "link": "https://stackoverflow.com/questions/41473480/how-to-get-newest-recording-in-twilio/41473629#41473629", "title": "How to get newest recording in Twilio?", "body": "<p><code>recordings[-1]</code> should get you the last item in recordings, which should be the newest recording, as recordings are appended to the list. Make sure <code>recordings</code> is not empty otherwise you will get an <code>IndexError</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7376325, "user_type": "registered", "profile_image": "https://graph.facebook.com/350237395362205/picture?type=large", "display_name": "Crash Bandicoot", "link": "https://stackoverflow.com/users/7376325/crash-bandicoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1483565798, "creation_date": 1483565119, "question_id": 41473480, "link": "https://stackoverflow.com/questions/41473480/how-to-get-newest-recording-in-twilio", "title": "How to get newest recording in Twilio?", "body": "<p>I'm making recordings in Twilio, using python. Just wondering how do I access the latest/newest recording that I've made? Cheers!</p>\n\n<p>Making the recording:</p>\n\n<pre><code>resp = twilio.twiml.Response()\nresp.say(\"Please record your message after the beep\")\nresp.record(maxLength=\"10\", action=\"/handle-recording\")\n</code></pre>\n\n<p>Sample code on accessing recordings, how would I code it for the latest? Thanks!</p>\n\n<pre><code># Download the Python helper library from twilio.com/docs/python/install\nfrom twilio.rest import TwilioRestClient\n\n# Your Account Sid and Auth Token from twilio.com/user/account\naccount_sid = \"AC30bd8bdca7572344721eb96c15a5c0c7\"\nauth_token  = \"your_auth_token\"\nclient = TwilioRestClient(account_sid, auth_token)\n\n# A list of recording objects with the properties described above\nrecordings = client.recordings.list()\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1483566252, "post_id": 41473476, "comment_id": 70153271, "body": "What versions of Python and NumPy are you using?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1483566297, "post_id": 41473476, "comment_id": 70153307, "body": "What CPU architecture do you have? And what exactly is the <code>dtype</code> of <code>a</code>? <code>np.int64</code>? or <code>np.int32?</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1483566367, "post_id": 41473476, "comment_id": 70153342, "body": "Anyway, the objects dtypes will be strictly <i>slower</i> but there are several possibilities for why you are getting a smaller file size."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1483566447, "post_id": 41473476, "comment_id": 70153380, "body": "I can&#39;t replicate this in my own tests."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1483566608, "post_id": 41473476, "comment_id": 70153459, "body": "also, check out <code>a.nbytes</code> and <code>b.nbytes</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1483566798, "post_id": 41473476, "comment_id": 70153540, "body": "Interesting, I&#39;m getting the same results..."}, {"owner": {"reputation": 4904, "user_id": 1005409, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc458e828b50a1f9329469ab1e5d98fd?s=128&d=identicon&r=PG", "display_name": "Muppet", "link": "https://stackoverflow.com/users/1005409/muppet"}, "edited": false, "score": 0, "creation_date": 1483566966, "post_id": 41473476, "comment_id": 70153617, "body": "a.nbytes yields 40000000 b.nbytes yields 80000000  However, saving it down definitely shows that the file size for dtype=object is smaller. Here a screenshot: <a href=\"http://i.imgur.com/Fegj69J.png\" rel=\"nofollow noreferrer\">i.imgur.com/Fegj69J.png</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4904, "user_id": 1005409, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc458e828b50a1f9329469ab1e5d98fd?s=128&d=identicon&r=PG", "display_name": "Muppet", "link": "https://stackoverflow.com/users/1005409/muppet"}, "edited": false, "score": 0, "creation_date": 1483567084, "post_id": 41473896, "comment_id": 70153693, "body": "Great answer - makes a lot of sense. Thanks!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1483567128, "post_id": 41473896, "comment_id": 70153713, "body": "Beat me to it - I just finished looking under the covers: <a href=\"https://github.com/numpy/numpy/blob/master/numpy/lib/format.py#L567\" rel=\"nofollow noreferrer\">github.com/numpy/numpy/blob/master/numpy/lib/format.py#L567</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1483567249, "post_id": 41473896, "comment_id": 70153768, "body": "I was expecting this to be the answer, but in my own tests, the pickle didn&#39;t seem to use the memo operators, or at least if it did, the results were still around 8-10 bytes per integer."}, {"owner": {"reputation": 11683, "user_id": 163633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764323a14e554c97ab74177e0bce51d4?s=128&d=identicon&r=PG", "display_name": "Robert Kern", "link": "https://stackoverflow.com/users/163633/robert-kern"}, "edited": false, "score": 0, "creation_date": 1483568888, "post_id": 41473896, "comment_id": 70154498, "body": "Ah, quite so. It looks like pickle is just using a packed 1-byte representation due to the small values."}, {"owner": {"reputation": 11683, "user_id": 163633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764323a14e554c97ab74177e0bce51d4?s=128&d=identicon&r=PG", "display_name": "Robert Kern", "link": "https://stackoverflow.com/users/163633/robert-kern"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1483569140, "post_id": 41473896, "comment_id": 70154594, "body": "@user2357112 Please write that up as an answer, and Muppet, please accept their answer instead."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1483569214, "post_id": 41473896, "comment_id": 70154633, "body": "aaargh. I just realized why I couldn&#39;t replicate it - I&#39;d accidentally used an array of floats."}], "tags": [], "owner": {"reputation": 11683, "user_id": 163633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764323a14e554c97ab74177e0bce51d4?s=128&d=identicon&r=PG", "display_name": "Robert Kern", "link": "https://stackoverflow.com/users/163633/robert-kern"}, "is_accepted": false, "score": 2, "last_activity_date": 1483572080, "last_edit_date": 1483572080, "creation_date": 1483566952, "answer_id": 41473896, "question_id": 41473476, "link": "https://stackoverflow.com/questions/41473476/why-does-a-numpy-array-with-dtype-object-result-in-a-much-smaller-file-size-than/41473896#41473896", "title": "Why does a numpy array with dtype=object result in a much smaller file size than dtype=int?", "body": "<p>EDIT: This analysis is wrong. See user2357112's answer for the correct one.</p>\n\n<p><code>dtype=object</code> arrays are saved as a Python pickle inside the NPY file. Python pickles preserve identity for objects inside its object graph; i.e. if <code>b[i] is b[j]</code> then the pickle will serialize the object referred to by <code>b[i]</code> and <code>b[j]</code> just the first time and refer to it when it comes to the next occurrence. That reference is often smaller than the serialized object itself, even when the objects themselves are pretty small when serialized.</p>\n\n<p>Python optimizes small integers such that it will always reuses the same object for integers from -5 to 256, thus including all <code>range(0, 20)</code> which are the only values in your array. numpy may also decide to reuse instances when it converts via <code>.astype(object)</code>.</p>\n\n<p>If you created an array where most or all of the values are unique, like with the floating point <code>uniform(0.0, 1.0, 10000000)</code>, then you would get the relative sizes that you expect.</p>\n"}, {"comments": [{"owner": {"reputation": 4904, "user_id": 1005409, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc458e828b50a1f9329469ab1e5d98fd?s=128&d=identicon&r=PG", "display_name": "Muppet", "link": "https://stackoverflow.com/users/1005409/muppet"}, "edited": false, "score": 0, "creation_date": 1483570811, "post_id": 41474511, "comment_id": 70155278, "body": "Interesting. Thank you for this further analysis. It goes well together with Roberts answer."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1483569993, "creation_date": 1483569993, "answer_id": 41474511, "question_id": 41473476, "link": "https://stackoverflow.com/questions/41473476/why-does-a-numpy-array-with-dtype-object-result-in-a-much-smaller-file-size-than/41474511#41474511", "title": "Why does a numpy array with dtype=object result in a much smaller file size than dtype=int?", "body": "<p>With a non-object dtype, most of the npy file format consists of a dump of the raw bytes of the array's data. That'd be either 4 or 8 bytes per element here, depending on whether your NumPy defaults to 4- or 8-byte integers. From the file size, it looks like 4 bytes per element.</p>\n\n<p>With an object dtype, most of the npy file format consists of an ordinary pickle of the array. For small integers, such as those in your array, the pickle uses the <code>K</code> pickle opcode, long name <code>BININT1</code>, \"documented\" in the <code>pickletools</code> module:</p>\n\n<pre><code>I(name='BININT1',\n  code='K',\n  arg=uint1,\n  stack_before=[],\n  stack_after=[pyint],\n  proto=1,\n  doc=\"\"\"Push a one-byte unsigned integer.\n\n  This is a space optimization for pickling very small non-negative ints,\n  in range(256).\n  \"\"\"),\n</code></pre>\n\n<p>This requires two bytes per integer, one for the <code>K</code> opcode and one byte of unsigned integer data.</p>\n\n<p>Note that you could have cut down the file size even further by storing your array with dtype <code>numpy.int8</code> or <code>numpy.uint8</code>, for roughly 1 byte per integer.</p>\n"}], "owner": {"reputation": 4904, "user_id": 1005409, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc458e828b50a1f9329469ab1e5d98fd?s=128&d=identicon&r=PG", "display_name": "Muppet", "link": "https://stackoverflow.com/users/1005409/muppet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 1, "accepted_answer_id": 41474511, "answer_count": 2, "score": 5, "last_activity_date": 1483572080, "creation_date": 1483565096, "question_id": 41473476, "link": "https://stackoverflow.com/questions/41473476/why-does-a-numpy-array-with-dtype-object-result-in-a-much-smaller-file-size-than", "title": "Why does a numpy array with dtype=object result in a much smaller file size than dtype=int?", "body": "<p>Here an example:</p>\n\n<pre><code>import numpy as np\nrandoms = np.random.randint(0, 20, 10000000)\n\na = randoms.astype(np.int)\nb = randoms.astype(np.object)\n\nnp.save('d:/dtype=int.npy', a)     #39 mb\nnp.save('d:/dtype=object.npy', b)  #19 mb! \n</code></pre>\n\n<p>You can see that the file with dtype=object is about half the size. How come? I was under the impression that properly defined numpy dtypes are strictly better than object dtypes.</p>\n"}, {"tags": ["python", "macos", "installation", "virtualenv", "xgboost"], "answers": [{"comments": [{"owner": {"reputation": 974, "user_id": 4229825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dMNcM.jpg?s=128&g=1", "display_name": "0x1337", "link": "https://stackoverflow.com/users/4229825/0x1337"}, "edited": false, "score": 0, "creation_date": 1483625798, "post_id": 41486304, "comment_id": 70179721, "body": "Which lines should I comment?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7379399, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5aef0cc40348d20677440e671d5105c6?s=128&d=identicon&r=PG", "display_name": "simon", "link": "https://stackoverflow.com/users/7379399/simon"}, "is_accepted": false, "score": -2, "last_activity_date": 1483622763, "creation_date": 1483622763, "answer_id": 41486304, "question_id": 41473404, "link": "https://stackoverflow.com/questions/41473404/how-to-install-xgboost-python-wrapper-in-macos-virtualenv-properly/41486304#41486304", "title": "How to install xgboost python wrapper in macOS virtualenv properly?", "body": "<p>you can just comment these lines and then it works fine!</p>\n"}, {"tags": [], "owner": {"reputation": 974, "user_id": 4229825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dMNcM.jpg?s=128&g=1", "display_name": "0x1337", "link": "https://stackoverflow.com/users/4229825/0x1337"}, "is_accepted": true, "score": 0, "last_activity_date": 1484332028, "creation_date": 1484332028, "answer_id": 41641166, "question_id": 41473404, "link": "https://stackoverflow.com/questions/41473404/how-to-install-xgboost-python-wrapper-in-macos-virtualenv-properly/41641166#41641166", "title": "How to install xgboost python wrapper in macOS virtualenv properly?", "body": "<p>As a workaround, I did:</p>\n\n<pre><code>import sys\nsys.path.append('&lt;your-path-here&gt;/xgboost/python-package')\n</code></pre>\n"}], "owner": {"reputation": 974, "user_id": 4229825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dMNcM.jpg?s=128&g=1", "display_name": "0x1337", "link": "https://stackoverflow.com/users/4229825/0x1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 41641166, "answer_count": 2, "score": 1, "last_activity_date": 1484332028, "creation_date": 1483564730, "last_edit_date": 1495535364, "question_id": 41473404, "link": "https://stackoverflow.com/questions/41473404/how-to-install-xgboost-python-wrapper-in-macos-virtualenv-properly", "title": "How to install xgboost python wrapper in macOS virtualenv properly?", "body": "<p>Under virtualenv, I'm trying to install python wrapper using <a href=\"https://xgboost.readthedocs.io/en/latest/build.html#python-package-installation\" rel=\"nofollow noreferrer\">official installation guide</a>. When I did </p>\n\n<pre><code>sudo python setup.py install\n</code></pre>\n\n<p>I got errors:</p>\n\n<pre><code>Install libxgboost from: ['/Users/dmitry/dev/mlenv/xgboost/xgboost/python-package/xgboost/../../lib/libxgboost.so']\nrunning install\nrunning bdist_egg\nrunning egg_info\ncreating xgboost.egg-info\nwriting xgboost.egg-info/PKG-INFO\nwriting dependency_links to xgboost.egg-info/dependency_links.txt\nwriting requirements to xgboost.egg-info/requires.txt\nwriting top-level names to xgboost.egg-info/top_level.txt\nwriting manifest file 'xgboost.egg-info/SOURCES.txt'\nreading manifest file 'xgboost.egg-info/SOURCES.txt'\nreading manifest template 'MANIFEST.in'\nwarning: no files found matching '*' under directory 'xgboost/include'\nwarning: no files found matching '*' under directory 'xgboost/src'\nwarning: no files found matching '*' under directory 'xgboost/make'\nwarning: no files found matching '*' under directory 'xgboost/rabit'\nwarning: no files found matching '*' under directory 'xgboost/lib'\nwarning: no files found matching '*' under directory 'xgboost/dmlc-core'\nwarning: no previously-included files matching '*.o' found anywhere in distribution\nwarning: no previously-included files matching '*.a' found anywhere in distribution\nwarning: no previously-included files matching '*.pyo' found anywhere in distribution\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nwriting manifest file 'xgboost.egg-info/SOURCES.txt'\ninstalling library code to build/bdist.macosx-10.12-x86_64/egg\nrunning install_lib\nrunning build_py\ncreating build\ncreating build/lib\ncreating build/lib/xgboost\ncopying xgboost/__init__.py -&gt; build/lib/xgboost\ncopying xgboost/callback.py -&gt; build/lib/xgboost\ncopying xgboost/compat.py -&gt; build/lib/xgboost\ncopying xgboost/core.py -&gt; build/lib/xgboost\ncopying xgboost/libpath.py -&gt; build/lib/xgboost\ncopying xgboost/plotting.py -&gt; build/lib/xgboost\ncopying xgboost/rabit.py -&gt; build/lib/xgboost\ncopying xgboost/sklearn.py -&gt; build/lib/xgboost\ncopying xgboost/training.py -&gt; build/lib/xgboost\nerror: Error: setup script specifies an absolute path:\n\n    /Users/dmitry/dev/mlenv/xgboost/xgboost/python-package/xgboost/../../lib/libxgboost.so\n\nsetup() arguments must *always* be /-separated paths relative to the\nsetup.py directory, *never* absolute paths.\n</code></pre>\n\n<p>In this post <a href=\"https://stackoverflow.com/a/41061466\">https://stackoverflow.com/a/41061466</a>, the guy advised remove <code>\"include_package_data=True\"</code> from <code>setup.py</code>. I did that, then xgboost has been successfully installed, i.e. <code>python -c \"import xgboost; print(xgboost.__version__)\"</code> outputs 0.6.</p>\n\n<p>Nevertheless, when I execute it in folder that is different from <code>xgboost_root_dir/python-package/</code>, I get:</p>\n\n<pre><code>python -c \"import xgboost; print(xgboost.__version__)\"\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"/Users/dmitry/dev/mlenv/lib/python3.6/site-packages/xgboost-0.6-py3.6.egg/xgboost/__init__.py\", line 21, in &lt;module&gt;\n    with open(VERSION_FILE) as f:\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/dmitry/dev/mlenv/lib/python3.6/site-packages/xgboost-0.6-py3.6.egg/xgboost/VERSION'\n</code></pre>\n\n<p>How to resolve this issue?</p>\n"}, {"tags": ["python", "architecture", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1483566280, "creation_date": 1483566280, "answer_id": 41473746, "question_id": 41473397, "link": "https://stackoverflow.com/questions/41473397/how-to-obtain-information-on-tensorflow-architecture/41473746#41473746", "title": "How to obtain information on tensorflow architecture", "body": "<p>You're very much on the right track.  Yes, parameters are neurons.  For instance, the output of the first conv layer is 32 filters (kernels) of grid size 149^2.  That's a total of 710,432 neurons/parameters for that layer alone.</p>\n\n<p>The critical part of training is back-propagation which adjusts the weights between one layer and the next.  The result of that SoftMax operation is the 1000 output predictions; the last trained layer would be its connection to the prior layer.</p>\n\n<p>You can read the simple convolutions and poolings from the chart.  I'm not sure whether or not you are supposed to include the ones inside the inception layers.</p>\n\n<p>Finally, if I read this correctly, the inceptions are multiple units of each type, applied in series.  That would mean that we have 10 inception layers, not 3.</p>\n"}], "owner": {"reputation": 1707, "user_id": 918967, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/669122b89437f78175d8eeaf4408c4e3?s=128&d=identicon&r=PG", "display_name": "user918967", "link": "https://stackoverflow.com/users/918967/user918967"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 41473746, "answer_count": 1, "score": 2, "last_activity_date": 1483566280, "creation_date": 1483564707, "question_id": 41473397, "link": "https://stackoverflow.com/questions/41473397/how-to-obtain-information-on-tensorflow-architecture", "title": "How to obtain information on tensorflow architecture", "body": "<p>I have been working on retraining TensorFlow Inception v3 (see <a href=\"https://github.com/tensorflow/models/tree/master/inception\" rel=\"nofollow noreferrer\">TensorFlow Github</a>) and was curious as to how I would obtain some general \"metadata\" about the model.</p>\n\n<p>For instance:</p>\n\n<ul>\n<li>How many hidden layers are there?</li>\n<li>Which is the \"last\" layer that gets retrained?</li>\n<li>How many total neurons (or neurons / layer)?</li>\n<li>How many convolutions were used?</li>\n<li>How many poolings were used?</li>\n</ul>\n\n<p>I basically want to be able to write a sentence or two describing the model. There is sentence on the site </p>\n\n<blockquote>\n  <p>...single frame evaluation with a computational cost of 5 billion multiply-adds per inference and with using less than 25 million parameters.</p>\n</blockquote>\n\n<p>but I am not quit sure what that means.  Is that 25 million neurons?  </p>\n\n<p>Looking at the document <a href=\"http://arxiv.org/abs/1512.00567\" rel=\"nofollow noreferrer\">Rethinking the Inception Architecture for Computer Vision</a> which was referenced on the GitHub, I think much of what I need is in Table 1?</p>\n\n<p>Would I write this ?  </p>\n\n<p>\"TensorFlow InceptionV3 is a deep convolution neural network that has 13 hidden layers and uses six convolutions, two pooling steps, and three inception modules to perform a softmax classification of images\"</p>\n\n<p>Of course I want the correct data in the sentence and would love to know how many neurons are in the model as well</p>\n\n<p>Thanks! </p>\n\n<p><a href=\"https://i.stack.imgur.com/Tsy2A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tsy2A.png\" alt=\"Table 1\"></a></p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1483565315, "post_id": 41473391, "comment_id": 70152824, "body": "Have you looked at the page source at all using your browser&#39;s developer tools? You should be able to find the comments section quite easily."}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1483565647, "post_id": 41473391, "comment_id": 70152954, "body": "don&#39;t you want <code>class_=&#39;comments-view&#39;)</code> or tab-content?"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1483565745, "post_id": 41473391, "comment_id": 70153001, "body": "I would recommend trying a browser emulator, check <a href=\"http://www.seleniumhq.org\" rel=\"nofollow noreferrer\"><code>selenium</code></a>"}, {"owner": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 0, "creation_date": 1483566437, "post_id": 41473391, "comment_id": 70153374, "body": "depperm: Thanks. but your advice gives the same result."}, {"owner": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 0, "creation_date": 1483566545, "post_id": 41473391, "comment_id": 70153430, "body": "MattDMo - I tried to use Chrome&#39;s Inspect and look for the source of the comment section, as depperm said, I tried almost all the classes i.e. comments-panel, comments-view, etc. Each yields me the same result - empty!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 0, "creation_date": 1483586668, "post_id": 41475057, "comment_id": 70159486, "body": "Thank you Benjamin - Very smart solution and I modify a bit and it scrape the comments, but not all. There are hidden comments unless we click &quot;read more&quot;."}, {"owner": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "reply_to_user": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 1, "creation_date": 1483612095, "post_id": 41475057, "comment_id": 70170128, "body": "Maybe, a more efficient alternative to scraping would be to use the NYTimes&#39; <a href=\"http://developer.nytimes.com/\" rel=\"nofollow noreferrer\">API</a> which provides access to comments of registered users: <a href=\"http://developer.nytimes.com/community_api_v3.json#/Documentation/GET/user-content/url.json\" rel=\"nofollow noreferrer\">developer.nytimes.com/community_api_v3.json#/Documentation/G&zwnj;&#8203;ET/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 0, "creation_date": 1483639942, "post_id": 41475057, "comment_id": 70189550, "body": "Benjamin: I can see you have deep understanding of HTML, CSS, and JAVASCRIPT. 2 more questions: (1) Error occurs when I run your code, which alerts as &quot;selenium.common.exceptions.WebDriverException: Message: unknown error: Element is not clickable at point (728, 817)   (Session info: chrome=55.0.2883.87)   (Driver info: chromedriver=2.25.426923 (0390b88869384d6eb0d5d09729679f934aab9eed),platform=Windows NT 6.1.7601 SP1 x86_64)&quot;  (2) for the css selector parts, how did you find the &quot;button.button.comments-button.theme-speech-bubble&#39;&#39;? Sorry I have little experience on web programming."}, {"owner": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "reply_to_user": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 0, "creation_date": 1483651655, "post_id": 41475057, "comment_id": 70196080, "body": "I&#39;ve tested the extended version of the code this morning with the firefox geckodriver (due to different computer setting) - with the geckodriver it works fine - but I didn&#39;t change the webdriver in the post assuming that the chromedriver is working in the same way. This seems not to be the case. With the chromedriver I&#39;m getting the same Error. At the moment I don&#39;t know what the problem is. Therefore, I&#39;ve changed the webdriver to firefox geckodriver in the post. It should work this way."}, {"owner": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "reply_to_user": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 0, "creation_date": 1483652323, "post_id": 41475057, "comment_id": 70196423, "body": "Regarding your 2. question: right-button-cllick on the speech bubble icon in the article header -&gt; inspect element, then chrome or firefox will show you the div tag with the class attributes."}, {"owner": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "edited": false, "score": 0, "creation_date": 1483652643, "post_id": 41475057, "comment_id": 70196587, "body": "Thanks. I was advised to use APIs. Figuring out the CSS class is time consuming and sometimes works awfully."}], "tags": [], "owner": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "is_accepted": false, "score": 1, "last_activity_date": 1483651077, "last_edit_date": 1483651077, "creation_date": 1483573193, "answer_id": 41475057, "question_id": 41473391, "link": "https://stackoverflow.com/questions/41473391/how-to-grab-data-from-the-comment-tab-from-an-online-nyt-article-using-python/41475057#41475057", "title": "how to grab data from the comment tab from an online NYT article using Python?", "body": "<p>The comment tab with all comments is hidden and will be shown via a javascript event. As recommended by @eLRuLL you could use selenium to open the comment tab and retrieve the comments like this (here in Python 3):</p>\n\n<pre><code>import time\nfrom bs4 import BeautifulSoup\nfrom selenium import webdriver\n\ndriver = webdriver.firefox.webdriver.WebDriver(executable_path='.../geckodriver') # adapt the path to the geckodriver\n\n# set the browser window size to desktop view\ndriver.set_window_size(2024, 1000)\n\nurl = \"http://www.nytimes.com/2017/01/04/world/asia/china-xinhua-donald-trump-twitter.html\"\ndriver.get(url)\n\n# waiting for the page is fully loaded\ntime.sleep(5)\n\n# select the link 'SEE ALL COMMENTS' and click it\nelem = driver.find_element_by_css_selector('li.comment-count').click()\n\n# get source code and close the browser\npage  = driver.page_source\ndriver.close()\n\nsoup = BeautifulSoup(page)\n\ncomments = soup.find_all('div', class_='comments-panel')\nprint(comments[0].prettify())\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>To retrieve all comments and all replies to the comments, you need 1) to select the elements 'READ MORE' and 'SEE ALL REPLIES', 2) to iterate and to click them.\nI've modified my code example accordingly:</p>\n\n<pre><code>import time\nfrom bs4 import BeautifulSoup\nfrom selenium import webdriver, common\n\ndriver = webdriver.firefox.webdriver.WebDriver(executable_path='.../geckodriver') # adapt the path to the geckodriver\n\n# set the browser window size to desktop view\ndriver.set_window_size(2024, 1000)\n\nurl = 'http://www.nytimes.com/2017/01/04/world/asia/china-xinhua-donald-trump-twitter.html'\ndriver.get(url)\n\n# waiting for the page is fully loaded\ntime.sleep(5)\n\n# select the link 'SEE ALL COMMENTS' and READ MORE and click them\nelem = driver.find_element_by_css_selector('button.button.comments-button.theme-speech-bubble').click()\nwhile True:\n    try:\n        driver.find_element_by_css_selector('div.comments-expand.comments-thread-expand').click()\n        time.sleep(3)\n    except common.exceptions.ElementNotVisibleException:\n        break\n\n# select the links SEE ALL REPLIES and click them\nreplies = driver.find_elements_by_css_selector('div.comments-expand.comments-subthread-expand')\nfor reply in replies:\n    reply.click()\n    time.sleep(3)\n\n# get source code and close the browser\npage  = driver.page_source\ndriver.close()\n\nsoup = BeautifulSoup(page, 'html.parser')\n\ncomments = soup.find_all('div', class_='comments-panel')\nprint(comments[0].prettify())\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7246029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d4f265ba1931821f7a4bcb3a509379?s=128&d=identicon&r=PG&f=1", "display_name": "user7246029", "link": "https://stackoverflow.com/users/7246029/user7246029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483651077, "creation_date": 1483564669, "question_id": 41473391, "link": "https://stackoverflow.com/questions/41473391/how-to-grab-data-from-the-comment-tab-from-an-online-nyt-article-using-python", "title": "how to grab data from the comment tab from an online NYT article using Python?", "body": "<p>Here is a URL of an article from the New York Times: the URL containing the comment tab is <a href=\"http://www.nytimes.com/2017/01/04/world/asia/china-xinhua-donald-trump-twitter.html\" rel=\"nofollow noreferrer\">http://www.nytimes.com/2017/01/04/world/asia/china-xinhua-donald-trump-twitter.html</a></p>\n\n<p>It has a comment tab and I would like to grab all the comments from the website using BeautifulSoup lib of Python to achieve my goal. </p>\n\n<p>Below is my code. But it yields empty result. I guess it is an issue of not telling the computer where exactly to find the source link. Anyone can modify it? Thank you!</p>\n\n<pre><code>import bs4\nimport requests\nsession = requests.Session()\nurl = \"http://www.nytimes.com/2017/01/04/world/asia/china-xinhua-donald-trump-twitter.html\"\npage  = session.get(url).text\nsoup = bs4.BeautifulSoup(page)\ncomments= soup.find_all(class_='comments-panel')\nfor e in comments:\n    print comments.string\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "edited": false, "score": 0, "creation_date": 1483564826, "post_id": 41473321, "comment_id": 70152566, "body": "What have you tried so far, and what was the result? If all rows have the same number of columns the read_csv function should be able to read in the data properly."}, {"owner": {"reputation": 809, "user_id": 2893053, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8YLDx.jpg?s=128&g=1", "display_name": "zkytony", "link": "https://stackoverflow.com/users/2893053/zkytony"}, "reply_to_user": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "edited": false, "score": 0, "creation_date": 1483565515, "post_id": 41473321, "comment_id": 70152898, "body": "@Benjamin See my new edits."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 1, "creation_date": 1483565603, "post_id": 41473321, "comment_id": 70152942, "body": "If you don&#39;t know ahead of time how many columns you have then just name the columns in the next line of code after you have read in the dataframe."}, {"owner": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "edited": false, "score": 0, "creation_date": 1483565948, "post_id": 41473321, "comment_id": 70153111, "body": "You don&#39;t need to indicate the column names or the number of columns as @ashishsingal has pointed out. You only need to specify the separator  <code>sep = ...</code> if the seperator in the csv file is not a comma (,). For example:  <code>df = pd.read_csv(&#39;file.csv&#39;, sep = &#39;;&#39;) </code>"}], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 2893053, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8YLDx.jpg?s=128&g=1", "display_name": "zkytony", "link": "https://stackoverflow.com/users/2893053/zkytony"}, "edited": false, "score": 0, "creation_date": 1483565056, "post_id": 41473427, "comment_id": 70152696, "body": "In the raw csv data, there is no header row. If I want to call the column with value &lt;N&gt; (e.g. <code>800</code>) the name &quot;count&quot;, how do I specify the column name for the N columns after it?"}], "tags": [], "owner": {"reputation": 1962, "user_id": 3132595, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/G2oiF.jpg?s=128&g=1", "display_name": "ashishsingal", "link": "https://stackoverflow.com/users/3132595/ashishsingal"}, "is_accepted": false, "score": 0, "last_activity_date": 1483564816, "creation_date": 1483564816, "answer_id": 41473427, "question_id": 41473321, "link": "https://stackoverflow.com/questions/41473321/python-pandas-read-csv-with-n-columns-where-n-is-specified-in-the-some-other-co/41473427#41473427", "title": "Python Pandas: read csv with N columns where N is specified in the some other column", "body": "<p>You don't need to specify the number of columns in read_csv. You can just call</p>\n\n<pre><code>df = pd.read_csv('file.csv')\n</code></pre>\n\n<p>And it should read all the columns in (and rows as well). You can pass <code>header=0</code> if you'd like but pandas can usually infer this.</p>\n"}, {"comments": [{"owner": {"reputation": 809, "user_id": 2893053, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8YLDx.jpg?s=128&g=1", "display_name": "zkytony", "link": "https://stackoverflow.com/users/2893053/zkytony"}, "edited": false, "score": 0, "creation_date": 1483568216, "post_id": 41473839, "comment_id": 70154240, "body": "What if I have several trailing columns, such as <code>&lt;id&gt;  &lt;timestamp&gt;  &lt;N&gt;  &lt;1&gt;  &lt;2&gt; ... &lt;N&gt;  &lt;max&gt; &lt;min&gt;</code>, how do you use the value of <code>n</code> here?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 809, "user_id": 2893053, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8YLDx.jpg?s=128&g=1", "display_name": "zkytony", "link": "https://stackoverflow.com/users/2893053/zkytony"}, "edited": false, "score": 0, "creation_date": 1483568685, "post_id": 41473839, "comment_id": 70154415, "body": "@zkytony, how do you want to name the trailing columns - <code>(&#39;max&#39;,&#39;min&#39;)</code>? Are those names predefined?"}, {"owner": {"reputation": 809, "user_id": 2893053, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8YLDx.jpg?s=128&g=1", "display_name": "zkytony", "link": "https://stackoverflow.com/users/2893053/zkytony"}, "edited": false, "score": 0, "creation_date": 1483568830, "post_id": 41473839, "comment_id": 70154471, "body": "so when parsing the rows, we assume that the last column means &#39;min&#39; and the second-to-last one means &#39;max&#39;. They will not be part of the numerically indexed columns. Thanks!"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 4, "last_activity_date": 1483568985, "last_edit_date": 1483568985, "creation_date": 1483566698, "answer_id": 41473839, "question_id": 41473321, "link": "https://stackoverflow.com/questions/41473321/python-pandas-read-csv-with-n-columns-where-n-is-specified-in-the-some-other-co/41473839#41473839", "title": "Python Pandas: read csv with N columns where N is specified in the some other column", "body": "<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>What if I have several trailing columns, such as   \n  &lt;1> &lt;2> ...   , how do you use the value of n here?</p>\n</blockquote>\n\n<pre><code>In [320]: df\nOut[320]:\n   0             1   2   3   4   5   6   7   8   9   10    11    12\n0   5  1.423232e+08   8   1   2   3   4   5   6   7   8  1000  1000\n1   6  1.423236e+08   8  11  22  33  44  55  66  77  88  1000  1000\n\nIn [321]: ['id', 'timestamp', 'n'] + (df.columns[3:3+df.iat[0, 2]] - 2).tolist() + [11, 12]\nOut[321]: ['id', 'timestamp', 'n', 1, 2, 3, 4, 5, 6, 7, 8, 11, 12]\n\nIn [322]: df.columns = ['id', 'timestamp', 'n'] + (df.columns[3:3+df.iat[0, 2]] - 2).tolist() + [11, 12]\n\nIn [323]: df\nOut[323]:\n   id     timestamp  n   1   2   3   4   5   6   7   8    11    12\n0   5  1.423232e+08  8   1   2   3   4   5   6   7   8  1000  1000\n1   6  1.423236e+08  8  11  22  33  44  55  66  77  88  1000  1000\n</code></pre>\n\n<p>if you can predefine trailing column names, you can do this:</p>\n\n<pre><code>In [328]: trailing_cols = ['max','min']\n\nIn [329]: ['id', 'timestamp', 'n'] + (df.columns[3:3+df.iat[0, 2]] - 2).tolist() + trailing_cols\nOut[329]: ['id', 'timestamp', 'n', 1, 2, 3, 4, 5, 6, 7, 8, 'max', 'min']\n</code></pre>\n\n<p><strong>OLD answer:</strong></p>\n\n<p>I'd do it this way:</p>\n\n<p>first read your CSV not specifying column names: </p>\n\n<pre><code>df = pd.read_csv('file.csv', delim_whitespace=True, header=None)\n\nIn [271]: df\nOut[271]:\n   0             1    2   3   4   5   6   7   8   9   10\n0   5  1.423232e+08  800   1   2   3   4   5   6   7   8\n1   5  1.423232e+08  800  11  22  33  44  55  66  77  88\n</code></pre>\n\n<p>now we can rename columns as follows:</p>\n\n<pre><code>In [272]: df.columns = ['id', 'timestamp', 'n'] + (df.columns[3:].values - 2).tolist()\n\nIn [273]: df\nOut[273]:\n   id     timestamp    n   1   2   3   4   5   6   7   8\n0   5  1.423232e+08  800   1   2   3   4   5   6   7   8\n1   5  1.423232e+08  800  11  22  33  44  55  66  77  88\n</code></pre>\n"}], "owner": {"reputation": 809, "user_id": 2893053, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8YLDx.jpg?s=128&g=1", "display_name": "zkytony", "link": "https://stackoverflow.com/users/2893053/zkytony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1765, "favorite_count": 0, "accepted_answer_id": 41473839, "answer_count": 2, "score": 2, "last_activity_date": 1483568985, "creation_date": 1483564346, "last_edit_date": 1483565489, "question_id": 41473321, "link": "https://stackoverflow.com/questions/41473321/python-pandas-read-csv-with-n-columns-where-n-is-specified-in-the-some-other-co", "title": "Python Pandas: read csv with N columns where N is specified in the some other column", "body": "<p>Suppose I have a dataset which has the following header:</p>\n\n<pre><code>&lt;id&gt;  &lt;timestamp&gt;  &lt;N&gt;  &lt;1&gt;  &lt;2&gt; ... &lt;N&gt;\n</code></pre>\n\n<p>In this dataset, every row has a column \"N\", a number that determines how many columns that are numerically labeled after it. For example, I have a row like the following:</p>\n\n<pre><code>5 142323151.14 800 5.3564 5.4534 ... 7.4839 (800 columns after the 3rd column)\n</code></pre>\n\n<p>It is guaranteed that all rows have the same number of columns.</p>\n\n<p>How can I read this CSV file with Pandas <code>read_csv</code> and label the columns currectly? Is it possible to be done in a single call? I am learning Pandas, so I wonder how Pandas can do a task that would require multiple lines of Python code to do.</p>\n\n<p>Thanks for your help!</p>\n\n<p>EDIT:\nI tried </p>\n\n<pre><code>pd.read_csv('file.csv', names=['id','timestamp','count',...],\n                        delimiter=' ',\n                        header=None)\n</code></pre>\n\n<p>and I don't know what to put in the ... part</p>\n"}, {"tags": ["python", "django", "bash", "shell"], "comments": [{"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1483564146, "post_id": 41473275, "comment_id": 70152232, "body": "Also open to any suggestions of a better way to do this"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1483564419, "post_id": 41473275, "comment_id": 70152352, "body": "In terms of trying to get a better feel for how pipelines work in bash -- <code>foo | bar</code> connects the stdout of <code>foo</code> to the stdin of <code>bar</code>. Thus, the command you proposed sends the output of <code>python manage.py shell</code> to the input of a command named <code>from</code>, with its second argument <code>cities.models</code>, &amp;c."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1483564482, "post_id": 41473275, "comment_id": 70152397, "body": "You could perhaps do this the other way: <code>printf &#39;%s\\n&#39; &#39;from cities.models import *&#39; &#39;Country.objects.all().exclude(name=&quot;United States&quot;).delete()&#39; | python manage.py shell</code> -- that way you&#39;re sending the <i>output</i> of a <code>printf</code> command that generates your script as the <i>input</i> to the <code>manage.py shell</code> command."}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1483564896, "post_id": 41473320, "comment_id": 70152602, "body": "Thumbs-up for the management command suggestion. I actually think I prefer either the management-command approach or the heredoc approach to <code>python manage.py shell &lt;script.py</code> -- in the latter case, you have a <code>script.py</code> that won&#39;t run unless invoked in a very specific way, whereas either the heredoc or the management command are provided in a context that makes their invocation obvious."}], "tags": [], "owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "is_accepted": false, "score": 1, "last_activity_date": 1506535218, "last_edit_date": 1506535218, "creation_date": 1483564346, "answer_id": 41473320, "question_id": 41473275, "link": "https://stackoverflow.com/questions/41473275/how-do-i-pipe-a-model-query-into-the-django-shell-via-a-bash-script/41473320#41473320", "title": "How do I pipe a model query into the Django Shell via a Bash Script?", "body": "<p>It's not such a good idea to include django code in a shell script file. It's better to either make a python file and put those code in it and do:</p>\n\n<pre><code>python manage.py shell &lt; script.py\n</code></pre>\n\n<p>Or better, write a <a href=\"https://docs.djangoproject.com/en/1.10/howto/custom-management-commands/\" rel=\"nofollow noreferrer\">django management command</a>. In this way you could track your code in the same project/repo and people got less confused when they see this.</p>\n"}, {"comments": [{"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1483564573, "post_id": 41473322, "comment_id": 70152447, "body": "I am going to try this."}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 1, "last_activity_date": 1483564354, "creation_date": 1483564354, "answer_id": 41473322, "question_id": 41473275, "link": "https://stackoverflow.com/questions/41473275/how-do-i-pipe-a-model-query-into-the-django-shell-via-a-bash-script/41473322#41473322", "title": "How do I pipe a model query into the Django Shell via a Bash Script?", "body": "<p>Use a heredoc:</p>\n\n<pre><code>python manage.py shell &lt;&lt;'EOF'\nfrom cities.models import *\nCountry.objects.all().exclude(name='United States').delete()\nEOF\n</code></pre>\n"}], "owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1506535218, "creation_date": 1483564095, "question_id": 41473275, "link": "https://stackoverflow.com/questions/41473275/how-do-i-pipe-a-model-query-into-the-django-shell-via-a-bash-script", "title": "How do I pipe a model query into the Django Shell via a Bash Script?", "body": "<p>I'm writing a startup.sh script to be ran when a docker container is created.</p>\n\n<pre><code>#!/bin/bash\npython manage.py runserver\npython manage.py makemigrations accounts\npython manage.py migrate\npython manage.py check_permissions    \npython manage.py cities --import=country --force\n\n*python manage.py shell | from cities.models import * Country.objects.all().exclude(name='United States\").delete()*\n\npython manage.py cities --import=cities\npython manage.py cities --import=postal_code\n</code></pre>\n\n<p>I am guessing the line in question is incorrect, what would be the correct way to do this in a bash script?</p>\n"}, {"tags": ["python", "numpy", "tensorflow", "neural-network"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": -1, "last_activity_date": 1483565922, "creation_date": 1483565922, "answer_id": 41473653, "question_id": 41473261, "link": "https://stackoverflow.com/questions/41473261/python-tensorflow-numpy-setting-an-array-element-with-a-sequence-error/41473653#41473653", "title": "Python / Tensorflow / Numpy setting an array element with a sequence error", "body": "<p>I don't have <code>tensorflow</code>, so can't help you directly.  But I can create your error with something similar</p>\n\n<p>Make an dtype object array with lists of various sizes:</p>\n\n<pre><code>In [343]: x=np.array([3, [1,2], [1,2,3]],dtype=object)\nIn [344]: x\nOut[344]: array([3, [1, 2], [1, 2, 3]], dtype=object)\nIn [345]: x.astype(np.float32)\n...\nValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>The same would apply if one or more of the elements were an array, and I imagine a <code>tensorflow</code> object, if iterable (as sequence), would produce the same error.</p>\n\n<p>So - check the <code>dtype</code> of <code>sample_images</code>, and identify the type of the elements.  Also check the <code>tensorflow</code> has its own methods of converting its objects to arrays of floats.  Don't assume that <code>numpy</code> functions and methods work directly on <code>tensorflow</code> objects.</p>\n"}], "owner": {"reputation": 139, "user_id": 7376251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76efd2f156225ec7522295ac3c11c2a3?s=128&d=identicon&r=PG&f=1", "display_name": "nathanburns", "link": "https://stackoverflow.com/users/7376251/nathanburns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484224738, "creation_date": 1483564042, "last_edit_date": 1484224738, "question_id": 41473261, "link": "https://stackoverflow.com/questions/41473261/python-tensorflow-numpy-setting-an-array-element-with-a-sequence-error", "title": "Python / Tensorflow / Numpy setting an array element with a sequence error", "body": "<p>I'm experimenting with the Generative Adversarial Network found here:\n<a href=\"https://github.com/carpedm20/DCGAN-tensorflow\" rel=\"nofollow noreferrer\">https://github.com/carpedm20/DCGAN-tensorflow</a>\nI've installed all the prereqs and downloaded the code and I've hit an error that I'm not sure where it's coming from. After running main.py with any image set, I get the following error:</p>\n\n<pre><code>ValueError: setting an array element with a sequence\n</code></pre>\n\n<p>The line it mentions, line 153 of model.py, is as follows:</p>\n\n<pre><code>sample_images = np.array(sample).astype(np.float32)\n</code></pre>\n\n<p>'sample_images' seems to be set to a tensorflow placeholder, based on lines 75  and 76 of model.py:</p>\n\n<pre><code>self.sample_images= tf.placeholder(tf.float32, [self.sample_size] + [self.output_size, self.output_size, self.c_dim],\n                                    name='sample_images')\n</code></pre>\n\n<p>Some googling has led me towards using something like 'feed_dict', but a few experiments with this haven't worked. Additionally feed_dict is used later on in the code, like this at line 187:</p>\n\n<pre><code>feed_dict={ self.images: batch_images, self.z: batch_z, self.y:batch_labels })\n</code></pre>\n\n<p>I'm not sure if this is Python, Tensorflow, Numpy or something else causing the error so don't really know where to start. Help appreciated.</p>\n\n<p>For reference, I'm running Python 3.5 64-bit on Windows 7</p>\n\n<p>Thanks</p>\n\n<p>Nathan</p>\n\n<p>UPDATE: After far too long spent trying to fix this, I eventually spun up an Ubuntu VM, installed Python and Tensorflow and the whole thing works without a hitch. Not quite an answer to the original question, but definitely a workaround.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 2, "creation_date": 1483566566, "post_id": 41473350, "comment_id": 70153437, "body": "Very nice answer. Might as well finish it off with <code>pd.concat([df, df.transport.apply(lambda x: pd.Series(True, [&#39;trans_&#39; + col for col in x.split(&quot;;&quot;)])).fillna(False)], axis=1)</code>"}, {"owner": {"reputation": 1185, "user_id": 5751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8be504af15d779610d72b554c97544a?s=128&d=identicon&r=PG", "display_name": "Arvodan", "link": "https://stackoverflow.com/users/5751/arvodan"}, "edited": false, "score": 0, "creation_date": 1483627436, "post_id": 41473350, "comment_id": 70180901, "body": "In the end, I used Psidorn&#39;s answer with the extension from Ted-Petrou."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 3, "last_activity_date": 1483564479, "creation_date": 1483564479, "answer_id": 41473350, "question_id": 41473194, "link": "https://stackoverflow.com/questions/41473194/how-to-convert-keyword-in-cell-of-dataframe-to-own-column-each/41473350#41473350", "title": "How to convert keyword in cell of dataframe to own column each", "body": "<p>You can use <code>apply</code> and construct a Series for each entry with the splited fields as index. This will result in a data frame with the index as the columns:</p>\n\n<pre><code>df.transport.apply(lambda x: pd.Series(True, x.split(\";\"))).fillna(False)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dLN1x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dLN1x.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 1707, "user_id": 1088415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8rZdp.jpg?s=128&g=1", "display_name": "Metropolis", "link": "https://stackoverflow.com/users/1088415/metropolis"}, "edited": false, "score": 0, "creation_date": 1483565951, "post_id": 41473370, "comment_id": 70153114, "body": "Very clean approach!"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 1707, "user_id": 1088415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8rZdp.jpg?s=128&g=1", "display_name": "Metropolis", "link": "https://stackoverflow.com/users/1088415/metropolis"}, "edited": false, "score": 0, "creation_date": 1483566009, "post_id": 41473370, "comment_id": 70153148, "body": "@Metropolis, thank you! I&#39;ve added timing - <code>CountVectorizer</code> is <b>amazing</b>! I should have learned it before..."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1483565955, "last_edit_date": 1495542275, "creation_date": 1483564562, "answer_id": 41473370, "question_id": 41473194, "link": "https://stackoverflow.com/questions/41473194/how-to-convert-keyword-in-cell-of-dataframe-to-own-column-each/41473370#41473370", "title": "How to convert keyword in cell of dataframe to own column each", "body": "<p>I decided to extend <a href=\"https://stackoverflow.com/a/41473414/5741205\">the great @Metropolis's answer</a> with a working example:</p>\n\n<pre><code>In [249]: %paste\nfrom sklearn.feature_extraction.text import CountVectorizer\n\nvectorizer = CountVectorizer(min_df=1)\nX = vectorizer.fit_transform(df.transport.str.replace(';',' '))\n\nr = pd.DataFrame(X.toarray(), columns=vectorizer.get_feature_names())\n## -- End pasted text --\n\nIn [250]: r\nOut[250]:\n   bike  car  horse\n0     1    1      1\n1     0    1      0\n2     1    1      0\n3     0    1      1\n</code></pre>\n\n<p>now you can join it back to the source DF:</p>\n\n<pre><code>In [251]: df.join(r)\nOut[251]:\n        transport  bike  car  horse\n0  Car;Bike;Horse     1    1      1\n1             Car     0    1      0\n2        Car;Bike     1    1      0\n3       Horse;Car     0    1      1\n</code></pre>\n\n<p><strong>Timing:</strong> for 40K rows DF:</p>\n\n<pre><code>In [254]: df = pd.concat([df] * 10**4, ignore_index=True)\n\nIn [255]: df.shape\nOut[255]: (40000, 1)\n\nIn [256]: %timeit df.transport.apply(lambda x: pd.Series(True, x.split(\";\"))).fillna(False)\n1 loop, best of 3: 33.8 s per loop\n\nIn [257]: %%timeit\n     ...: vectorizer = CountVectorizer(min_df=1)\n     ...: X = vectorizer.fit_transform(df.transport.str.replace(';',' '))\n     ...: r = pd.DataFrame(X.toarray(), columns=vectorizer.get_feature_names())\n     ...:\n1 loop, best of 3: 732 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1707, "user_id": 1088415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8rZdp.jpg?s=128&g=1", "display_name": "Metropolis", "link": "https://stackoverflow.com/users/1088415/metropolis"}, "is_accepted": false, "score": 1, "last_activity_date": 1483565807, "last_edit_date": 1483565807, "creation_date": 1483564752, "answer_id": 41473414, "question_id": 41473194, "link": "https://stackoverflow.com/questions/41473194/how-to-convert-keyword-in-cell-of-dataframe-to-own-column-each/41473414#41473414", "title": "How to convert keyword in cell of dataframe to own column each", "body": "<p>I would consider using the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html\" rel=\"nofollow noreferrer\">Count Vectorizer</a> provided by Scikit-learn. The vectorizer will construct a vector where each index refers to a term and the value refers to the number of appearances of that term in the record. </p>\n\n<p>Advantages over the home-rolled approaches suggested in other answer are efficiency for large datasets and generalizability. Disadvantage is, obviously, bringing in an extra dependency. </p>\n"}], "owner": {"reputation": 1185, "user_id": 5751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8be504af15d779610d72b554c97544a?s=128&d=identicon&r=PG", "display_name": "Arvodan", "link": "https://stackoverflow.com/users/5751/arvodan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 41473350, "answer_count": 3, "score": 2, "last_activity_date": 1483565955, "creation_date": 1483563797, "last_edit_date": 1495540426, "question_id": 41473194, "link": "https://stackoverflow.com/questions/41473194/how-to-convert-keyword-in-cell-of-dataframe-to-own-column-each", "title": "How to convert keyword in cell of dataframe to own column each", "body": "<p>I have a dataframe like the following: </p>\n\n<pre><code>In[8]: df = pd.DataFrame({'transport': ['Car;Bike;Horse','Car','Car;Bike', 'Horse;Car']})\ndf\nOut[8]:\n    transport\n 0  Car;Bike;Horse\n 1  Car\n 2  Car;Bike\n 3  Horse;Car\n</code></pre>\n\n<p>And I want to convert it to something like this:</p>\n\n<pre><code>In[9]: df2 = pd.DataFrame({'transport_car': [True,True,True,True],'transport_bike': [True,False,True,False], 'transport_horse': [True,False,False,True]} )\ndf2\nOut[10]:\n  transport_bike    transport_car   transport_horse\n0   True                True            True\n1   False               True            False\n2   True                True            False\n3   False               True            True\n</code></pre>\n\n<p>I got a solution, but it feels very 'hacked' and 'unpythonic'. (It works for my considerably small data set)</p>\n\n<pre><code>In[11]:\n# get set of all possible values\nnew_columns = set()\nfor element in set(df.transport.unique()):\n    for transkey in str(element).split(';'):\n        new_columns.add(transkey)\nprint(new_columns)\n\n# Use broadcast to initialize all columns with default value.\nfor col in new_columns:\n    df['trans_'+str(col).lower()] = False\n\n# Change cells appropiate to keywords\nfor index, row in df.iterrows():\n    for key in new_columns:\n        if key in row.transport:\n            df.set_value(index, 'trans_'+str(key).lower(), True)\ndf\n\nOut[11]:\n    transport     trans_bike    trans_car   trans_horse\n0   Car;Bike;Horse  True          True          True\n1   Car             False         True          False\n2   Car;Bike        True          True          False\n3   Horse;Car       False         True          True\n</code></pre>\n\n<p>My goal is to use the second representation to perform some evaluation to answer questions like: \"How often is car used?\", \"How often is car used together with horse\", etc. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/39840377/how-to-convert-one-columns-all-values-to-separate-column-name-in-dataframe-of-p/39840429#39840429\">This</a> and <a href=\"https://stackoverflow.com/questions/38231591/splitting-dictionary-list-inside-a-pandas-column-into-separate-columns\">this</a> answers suggest using <code>pivot</code> and <code>eval</code> might be the way to go, but I'm not sure.</p>\n\n<p>So what would be the best way, to convert a DataFrame from first representation to the second? </p>\n"}, {"tags": ["python", "django", "forms", "unicode"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 4, "creation_date": 1483563827, "post_id": 41473169, "comment_id": 70152100, "body": "The error already speaks for itself, <code>linea</code> is a unicode object(just consider it as a string), unicode object doesn&#39;t have an attribute <code>numero</code>, what else you are not clear about?"}], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 7376038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7ac1531c63344065128e2002aa7db56?s=128&d=identicon&r=PG&f=1", "display_name": "Pepv", "link": "https://stackoverflow.com/users/7376038/pepv"}, "edited": false, "score": 0, "creation_date": 1483628847, "post_id": 41473644, "comment_id": 70181889, "body": "Gracias Jaime :)  Anyway, If you could read the update I would be grateful."}], "tags": [], "owner": {"reputation": 168, "user_id": 7331040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5138c72fb9b1b1f8e2454cca339c854?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime Sanz", "link": "https://stackoverflow.com/users/7331040/jaime-sanz"}, "is_accepted": true, "score": 0, "last_activity_date": 1483566359, "last_edit_date": 1483566359, "creation_date": 1483565860, "answer_id": 41473644, "question_id": 41473169, "link": "https://stackoverflow.com/questions/41473169/attributeerror-unicode-object-has-no-attribute-numero/41473644#41473644", "title": "AttributeError &#39;unicode&#39; object has no attribute &#39;numero&#39;", "body": "<p>The problem is, indeed, in your views.py. This line:</p>\n\n<pre><code>linea = form.cleaned_data['linea']\n</code></pre>\n\n<p>doesn't return an instance of the model Linea, it returns the value that the 'linea' <em>field</em> has in your form. To get the Linea instance you have to save the form:</p>\n\n<pre><code>form = LineaForm(request.POST)\nif form.is_valid():\n    linea = form.save()\n    linea_numero = str(linea.numero)\n</code></pre>\n\n<p>This will, however, save the changes to the database. If you don't want that, you can do the same, but with:</p>\n\n<pre><code>linea = form.save(commit=False)\n</code></pre>\n\n<p><strong>edit</strong> also, your Linea model doesn't seem to have a 'numero' attribute</p>\n"}], "owner": {"reputation": 54, "user_id": 7376038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7ac1531c63344065128e2002aa7db56?s=128&d=identicon&r=PG&f=1", "display_name": "Pepv", "link": "https://stackoverflow.com/users/7376038/pepv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1773, "favorite_count": 0, "accepted_answer_id": 41473644, "answer_count": 1, "score": 0, "last_activity_date": 1483630794, "creation_date": 1483563710, "last_edit_date": 1483630794, "question_id": 41473169, "link": "https://stackoverflow.com/questions/41473169/attributeerror-unicode-object-has-no-attribute-numero", "title": "AttributeError &#39;unicode&#39; object has no attribute &#39;numero&#39;", "body": "<p>I'm new with django, so I apologize for this (probably) dumb question:</p>\n\n<p>I'm trying to make a form based on the content of a model named <code>Linea</code>that, depending of the input, redirects the user to a view named <code>lineas_detalles</code>. If the input is not a part of the model <code>Linea</code>the form is supposed to do nothing.</p>\n\n<p>I can perfectly load the page where the form is, but when I enter something and I submit I get the error:</p>\n\n<pre><code>AttributeError at /lineas/\n'unicode' object has no attribute 'numero'\n</code></pre>\n\n<p>The content that is intended to go into the form is a number.</p>\n\n<p><strong>lineas.html</strong></p>\n\n<pre><code>{% load staticfiles %}\n[...]\n{% block content %}\n    &lt;h1&gt;Escoja una l\u00ednea&lt;/h1&gt;\n    &lt;form method=\"POST\" class=\"post-form\"&gt;{% csrf_token %}\n        {{ form.as_p }}\n        &lt;button type=\"submit\"&gt;Actualizar&lt;/button&gt;\n    &lt;/form&gt;\n{% endblock %}\n</code></pre>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>from django import forms\nfrom .models import Linea\n\n\nclass LineaForm(forms.ModelForm):\n\n\n    class Meta:\n        model = Linea\n        fields = ('linea',)\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from __future__ import unicode_literals\nfrom django.db import models\n\n\nclass Linea(models.Model):\n    linea = models.CharField(max_length=2)\n\n\n    def __str__(self):\n        return self.linea\n\n[...]\n</code></pre>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>from django.conf.urls import url\nfrom . import views\n\n\nurlpatterns = [\n    [...]\n    url(r'^lineas/$', views.lineas, name='lineas'),\n    url(r'^lineas/(?P&lt;linea_numero&gt;)/$', views.lineas_detalles, name='lineas_detalles'),\n]\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.shortcuts import render, redirect\nfrom .forms import LineaForm\n\n\ndef lineas(request):\n    if request.method == \"POST\":\n        form = LineaForm(request.POST)\n        if form.is_valid():\n            linea = form.cleaned_data['linea']\n            linea_numero = str(linea.numero)\n            return redirect('lineas_detalles', linea_numero=linea_numero)\n    else:\n        form = LineaForm()\n    return render(request, 'bustopapp/lineas.html', {'form': form})\n\n\ndef lineas_detalles(request):\n    return render(request, 'bustopapp/lineas_detalles.html', {})\n\n\n[...]\n</code></pre>\n\n<p>The traceback marcks the origin of the problem in this line of the <code>views.py</code> file: <code>linea_numero = str(linea.numero)</code></p>\n\n<hr>\n\n<p><strong>Update 1</strong></p>\n\n<p>Following the correction of <em>Jaime Sanz</em> the AttributeError is corrected. Now the code look like this:</p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>[...]\nclass LineaForm(forms.ModelForm):\n\n\n    class Meta:\n        model = Linea\n        fields = ('numero',)\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>[...]\nclass Linea(models.Model):\n    numero = models.CharField(max_length=2)\n\n\n    def __str__(self):\n        return self.numero\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>[...]\nform = LineaForm(request.POST)\n        if form.is_valid():\n            linea = form.save(commit=False)\n            linea_numero = str(linea.numero)\n            return redirect('lineas_detalles', linea_numero=linea_numero)\n[...]\n</code></pre>\n\n<p>The rest is the same as before. Anyway, now I get this other error:</p>\n\n<pre><code>NoReverseMatch at /lineas/\nReverse for 'lineas_detalles' with arguments '()' and keyword arguments '{'linea_numero': '3'}' not found. 1 pattern(s) tried: ['lineas/(?P&lt;linea_numero&gt;)/$']\n</code></pre>\n\n<p>With the traceback marking at tis line in views.py:</p>\n\n<pre><code>return redirect('lineas_detalles', linea_numero=linea_numero)\n</code></pre>\n\n<p>I'm learning programming by myself, sorry if these questions are too basic.</p>\n\n<hr>\n\n<p><strong>Update 2</strong></p>\n\n<p>I've made some changes, so now I don't have any error:</p>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>url(r'^lineas/(?P&lt;linea_numero&gt;\\d+)/$', views.lineas_detalles, name='lineas_detalles'),\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>def lineas_detalles(request, linea_numero):\n    return render(request, 'bustopapp/lineas_detalles.html', {})\n</code></pre>\n\n<p>But now I realize that regardless of what number I type in the form, the <code>Lineas</code> view sends me to the <code>Lineas_detalles</code> view. Initially my intention was to show an error when something that is not in the database is typed in the form.</p>\n"}, {"tags": ["python", "sql-server", "azure", "pyodbc", "azure-sql-database"], "answers": [{"comments": [{"owner": {"reputation": 5657, "user_id": 3188761, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28fe029285b3168ae61f354eccd5b562?s=128&d=identicon&r=PG&f=1", "display_name": "90abyss", "link": "https://stackoverflow.com/users/3188761/90abyss"}, "edited": false, "score": 0, "creation_date": 1483650278, "post_id": 41480876, "comment_id": 70195352, "body": "This seems to be working as expected. Thanks a lot, Peter. :)"}, {"owner": {"reputation": 309, "user_id": 9824074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85db191d448811bc1be91df3ee92c86?s=128&d=identicon&r=PG&f=1", "display_name": "Karan M", "link": "https://stackoverflow.com/users/9824074/karan-m"}, "edited": false, "score": 0, "creation_date": 1533234680, "post_id": 41480876, "comment_id": 90283730, "body": "I am facing a similar issue in my python script. But, I have used my sql query like this: <code>import pyodbc @property def sqlquery(self): conn = pyodbc.connect(&quot;Driver={SQL Server};&quot;                       &quot;Server=server1;&quot;                       &quot;Database=db1;&quot;                       &quot;Trusted_Connection=yes;&quot;) cursor = conn.cursor() cursor.execute(&#39;SELECT TOP(10) * FROM xyz&#39;) for row in cursor:     print(&#39;row = %r&#39; % (row,))     return row     conn.close()</code> Can you please help me how to integrate this code into the function?"}, {"owner": {"reputation": 76, "user_id": 6129389, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0mVrmQgAow4/AAAAAAAAAAI/AAAAAAAAAWM/mCLToGMH7Ak/photo.jpg?sz=128", "display_name": "Anurag Sharma", "link": "https://stackoverflow.com/users/6129389/anurag-sharma"}, "edited": false, "score": 0, "creation_date": 1601721282, "post_id": 41480876, "comment_id": 113497599, "body": "Still giving the same error. Tried increasing the retry time also."}], "tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": true, "score": 13, "last_activity_date": 1483607090, "creation_date": 1483607090, "answer_id": 41480876, "question_id": 41473137, "link": "https://stackoverflow.com/questions/41473137/pyodbc-how-to-retry-to-recover-from-transient-errors/41480876#41480876", "title": "pyodbc: How to retry to recover from Transient errors?", "body": "<p>Per my experience, I think may be you can try to use the code below to implement the retry logic.</p>\n\n<pre><code>import time\n\nretry_flag = True\nretry_count = 0\nwhile retry_flag and retry_count &lt; 5:\n  try:\n    cursor.execute(query, [args['type'], args['id']])\n    retry_flag = False\n  except:\n    print \"Retry after 1 sec\"\n    retry_count = retry_count + 1\n    time.sleep(1)\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 5657, "user_id": 3188761, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28fe029285b3168ae61f354eccd5b562?s=128&d=identicon&r=PG&f=1", "display_name": "90abyss", "link": "https://stackoverflow.com/users/3188761/90abyss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13422, "favorite_count": 1, "accepted_answer_id": 41480876, "answer_count": 1, "score": 3, "last_activity_date": 1483607090, "creation_date": 1483563594, "question_id": 41473137, "link": "https://stackoverflow.com/questions/41473137/pyodbc-how-to-retry-to-recover-from-transient-errors", "title": "pyodbc: How to retry to recover from Transient errors?", "body": "<p>I've an API hosted on Flask. It runs behind a Tornado server. What is happening is that sometimes changes made on the UI are not reflected in the database. Also a few of the scripts I have running gives any of the 3 following errors:</p>\n\n<ol>\n<li>pyodbc.Error: ('08S01', '[08S01] [Microsoft][ODBC SQL Server Driver]Communication link failure (0) (SQLExecDirectW)')</li>\n<li>pyodbc.Error: ('01000', '[01000] [Microsoft][ODBC SQL Server Driver][DBNETLIB]ConnectionWrite (send()). (10054) (SQLExecDirectW)')</li>\n<li>pyodbc.Error: ('01000', '[01000] [Microsoft][ODBC SQL Server Driver][DBNETLIB]ConnectionRead (recv()). (10054) (SQLExecDirectW)')</li>\n</ol>\n\n<p>This is the snippet of my Flask API code:</p>\n\n<pre><code>class Type(Resource):\n\n    def put(self):\n        parser = reqparse.RequestParser()\n        parser.add_argument('id', type = int)\n        parser.add_argument('type', type = int)\n        args = parser.parse_args()\n\n        query = \"\"\"\n        UPDATE myDb SET Type = ? WHERE Id = ?\n        \"\"\"\n\n        connection = pyodbc.connect(connectionString)\n        cursor = connection.cursor()\n        cursor.execute(query, [args['type'], args['id']])\n        connection.commit()\n        cursor.close()\n        connection.close()\n\napi.add_resource(Type, '/type')\n</code></pre>\n\n<p>Is there any retry logic I can add on the cursor.execute line? I've no idea how to deal with transient errors with python. Please help.</p>\n"}, {"tags": ["python", "mongoengine"], "answers": [{"tags": [], "owner": {"reputation": 1888, "user_id": 3271558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfbgY.png?s=128&g=1", "display_name": "Steve Rossiter", "link": "https://stackoverflow.com/users/3271558/steve-rossiter"}, "is_accepted": true, "score": 1, "last_activity_date": 1483687087, "creation_date": 1483687087, "answer_id": 41500839, "question_id": 41473133, "link": "https://stackoverflow.com/questions/41473133/making-sure-value-exists-with-other-value-in-mongoengine/41500839#41500839", "title": "making sure value exists with other value in mongoengine", "body": "<p>The easiest way to do this is with <a href=\"http://docs.mongoengine.org/guide/signals.html#signals\" rel=\"nofollow noreferrer\">signals</a>.</p>\n\n<pre><code>class Doc(Document):\n    param_1 = BooleanField()\n    param_2 = StringField()\n\n    @classmethod\n    def pre_save(cls, sender, document, **kwargs):\n        if (document.param_1 is True) and (document.param_2 is None):\n            raise ValueError(\"If param_1 is True then param_2 cannot be None\")\n\nsignals.pre_save.connect(Document.pre_save, sender=Document)\n</code></pre>\n"}], "owner": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 41500839, "answer_count": 1, "score": 0, "last_activity_date": 1483687087, "creation_date": 1483563576, "question_id": 41473133, "link": "https://stackoverflow.com/questions/41473133/making-sure-value-exists-with-other-value-in-mongoengine", "title": "making sure value exists with other value in mongoengine", "body": "<p>I know mongoengine you can set things like <code>unique_with</code> but I want to set a constraint that says \"if param_1 is True, param_2 must not be null.\"  Is there a way to do this in mongoengine?  Would the best way to handle this be to set conditions in the update/save methods?</p>\n\n<pre><code>class Doc(Document):\n    param_1 = BooleanField()\n    param_2 = StringField()\n\n    def save(self, *args, **kwargs):\n        # DO SOMETHING HERE TO MAKE SURE\n        # IF param_1 == True, param_2 != None\n        super(Doc, self).save(*args, **kwargs)\n</code></pre>\n"}, {"tags": ["python", "macos"], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1483564411, "last_edit_date": 1483564411, "creation_date": 1483563993, "answer_id": 41473246, "question_id": 41473127, "link": "https://stackoverflow.com/questions/41473127/python-oserror-errno-2-no-such-file-or-directory-with-the-file-it-foun/41473246#41473246", "title": "Python: &quot;OSError: [Errno 2] No such file or directory:&quot;... with the file it found?", "body": "<p><code>listdir</code> won't prepend the directory name, so you cannot pass <code>os.path.getmtime</code> as-is.</p>\n\n<p>Wrap it with a lambda and join with the source directory:</p>\n\n<pre><code>MacPlistFile = max((f for f in os.listdir(MacPlistPath) if f.lower().endswith('.plist') and f.lower().startswith('com.apple.screensaver.')), key=lambda f : os.path.getmtime(os.path.join(MacPlistPath,f)))\n</code></pre>\n\n<p>But looking at the bigger picture, you'd be even better off with <code>glob.glob</code> and a wildcard:</p>\n\n<pre><code>import glob\nMacPlistFile = os.path.basename(max(glob.glob(os.path.join(MacPlistPath,\"com.apple.screensaver.*.plist\")), key=os.path.getmtime))\n</code></pre>\n\n<p><code>glob.glob</code> returns the full path, so now you can use <code>os.path.getmtime</code> directly as a key. You just have to perform an <code>os.path.basename</code> in the end to get only the last modified file name.</p>\n\n<p>Aside: no need to create a <em>list comprehension</em>. A <em>generator comprehension</em> is enough for <code>max</code> to work efficiently.</p>\n"}], "owner": {"reputation": 77, "user_id": 7375845, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/SHixi.jpg?s=128&g=1", "display_name": "Taizen", "link": "https://stackoverflow.com/users/7375845/taizen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1171, "favorite_count": 0, "accepted_answer_id": 41473246, "answer_count": 1, "score": 0, "last_activity_date": 1483564411, "creation_date": 1483563553, "question_id": 41473127, "link": "https://stackoverflow.com/questions/41473127/python-oserror-errno-2-no-such-file-or-directory-with-the-file-it-foun", "title": "Python: &quot;OSError: [Errno 2] No such file or directory:&quot;... with the file it found?", "body": "<p>I'm writing a Python script where part of its function is to find the last modified file of a specific kind.  In my case, it's for the last modified screen saver plist file on Mac OS X.  Below are the bits of code which deal with this:</p>\n\n<pre><code>import os\n\nPlistFolder = \"Library/Preferences/ByHost\"\nMacPlistPath = os.path.join(HomeFolder, PlistFolder)\nPlistSSMac = max([f for f in os.listdir(MacPlistPath) if f.lower().endswith('.plist') and f.lower().startswith('com.apple.screensaver.')], key=os.path.getmtime)\n</code></pre>\n\n<p>When I run it, however, it gives me an error while returning exactly what I wanted it to find...</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"tcn_test.py\", line 29, in &lt;module&gt;\n    MacPlistFile = max([f for f in os.listdir(MacPlistPath) if f.lower().endswith('.plist') and f.lower().startswith('com.apple.screensave\nr.')], key=os.path.getmtime)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/genericpath.py\", line 62, in getmtime\n    return os.stat(filename).st_mtime\nOSError: [Errno 2] No such file or directory: 'com.apple.screensaver.097EBF05-D7B5-5FD6-A031-12734A82135D.plist'\n</code></pre>\n\n<p>Any ideas on what causes this and how I can fix it?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python", "class", "inheritance"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1483567309, "post_id": 41473119, "comment_id": 70153798, "body": "At the time <code>External</code> is actually called, <code>shirt_color</code> and <code>shoes_color</code> are not class variables <i>at all</i>; they are simply local variables in the body of the <code>class</code> statement that will be added to the class&#39;s dictionary once the metaclass actually creates <code>Parent</code>."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "edited": false, "score": 0, "creation_date": 1483563862, "post_id": 41473159, "comment_id": 70152120, "body": "Yes but I redefine the class variables that are called in External, do you have an alternative ?"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "edited": false, "score": 0, "creation_date": 1483563901, "post_id": 41473159, "comment_id": 70152133, "body": "Redefining the class variables won&#39;t do anything... why would it? Python doesn&#39;t magically remember how each value was constructed and redo the construction when any of its components change"}, {"owner": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "edited": false, "score": 0, "creation_date": 1483564360, "post_id": 41473159, "comment_id": 70152323, "body": "can&#39;t use <code>@property</code> decorator if class isn&#39;t instantiated <a href=\"http://stackoverflow.com/questions/13867172/attributeerror-property-object-has-no-attribute\">like in here</a>"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "edited": false, "score": 0, "creation_date": 1483564421, "post_id": 41473159, "comment_id": 70152353, "body": "Well, yes. you need to instantiate the class. That&#39;s what classes are for, after all. I thought that would go without saying..."}, {"owner": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "edited": false, "score": 0, "creation_date": 1483564565, "post_id": 41473159, "comment_id": 70152439, "body": "I&#39;m not sure if you are familiar with Django, but the Models can be used to instantiate <code>User(email=&#39;asda@asd.com&#39;).save()</code> or <code>User.objects.all()</code> that is my purpose with this code, to replicate this"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "edited": false, "score": 0, "creation_date": 1483564623, "post_id": 41473159, "comment_id": 70152466, "body": "If you need property behavior on a class, you could use a property on its metaclass... but at that point you&#39;d naturally start wondering why."}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 0, "last_activity_date": 1483563926, "last_edit_date": 1483563926, "creation_date": 1483563661, "answer_id": 41473159, "question_id": 41473119, "link": "https://stackoverflow.com/questions/41473119/define-class-variable-with-instance-of-another-class/41473159#41473159", "title": "Define class variable with instance of another class", "body": "<p>You never define <code>external_class</code> on <code>SouthParent</code>, so accessing that attribute uses the <code>external_class</code> from <code>Parent</code>, where it was defined as <code>External('', '')</code>.</p>\n\n<p>If you want to have it construct <code>external_class</code> based on the class attributes, you can use a property:</p>\n\n<pre><code>class Parent(object):\n\n    shirt_color = ''\n    shoes_color = ''\n\n    @property\n    def external_class(self):\n        return External(self.shirt_color, self.shoes_color)\n</code></pre>\n\n<p>If it should be the <em>same</em> <code>External</code> instance each time, do it this way:</p>\n\n<pre><code>class Parent(object):\n\n    shirt_color = ''\n    shoes_color = ''\n\n    _external_class = None\n\n    @property\n    def external_class(self):\n        if self._external_class is None:\n            self._external_class = External(self.shirt_color, self.shoes_color)\n        return self._external_class\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "is_accepted": false, "score": 0, "last_activity_date": 1483567008, "creation_date": 1483567008, "answer_id": 41473906, "question_id": 41473119, "link": "https://stackoverflow.com/questions/41473119/define-class-variable-with-instance-of-another-class/41473906#41473906", "title": "Define class variable with instance of another class", "body": "<p>Possible Solution: (with help of @kindall)</p>\n\n<p>Use Python metaclass</p>\n\n<pre><code>class External(object):\n    def __init__(self, first, second):\n        self.first = first\n        self.second = second\n\n    def foo():\n        print('something')\n\nclass ParentMeta(type):\n    def __new__(cls, name, bases, attrs):\n\n        if attrs['shirt_color'] and attrs['shoes_color']:\n            attrs['external_class'] = External(attrs['odoo_model'],attrs['cache_name'])\n\n        return super(ParentMeta, cls).__new__(cls, name, bases, attrs)\n\nclass Parent(metaclass=ParentMeta):\n\n    shirt_color = ''\n    shoes_color = ''         \n\nclass SouthParent(Parent):\n\n    shirt_color = 'white'\n    shoes_color = 'blue'\n\n\nSouthParent.external_class.foo()\n# something\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4465457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Sl6aY2fXy2o/AAAAAAAAAAI/AAAAAAAAANs/zr8ZUCyCPpc/photo.jpg?sz=128", "display_name": "Andr&#233; Almeida", "link": "https://stackoverflow.com/users/4465457/andr%c3%a9-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1337, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1483567008, "creation_date": 1483563538, "question_id": 41473119, "link": "https://stackoverflow.com/questions/41473119/define-class-variable-with-instance-of-another-class", "title": "Define class variable with instance of another class", "body": "<p>I'm have the following class set:</p>\n\n<pre><code>class External(object):\n\n    def __init__(self, first, second):\n        self.first = first\n        self.second = second\n\n    def foo():\n        print('something')\n\nclass Parent(object):\n\n    shirt_color = ''\n    shoes_color = ''\n    external_class = External(shirt_color, shoes_color)\n\nclass SouthParent(Parent):\n\n    shirt_color = 'white'\n    shoes_color = 'blue'\n</code></pre>\n\n<p>Because SouthParent is a children of Parent and the class variables shirt_color and shoes_color are redefined in the SouthParent class, the expected args that External() would receive should be ('white', 'blue') but the instead it receives ('','')</p>\n\n<p>This is defined this way, to be used in the terminal like SouthParent.external_class.foo() like Django Model ( User.objects.all() )</p>\n"}, {"tags": ["python", "pandas", "dataframe", "multiple-columns"], "answers": [{"comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 2633, "user_id": 7372165, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PCyvJ.png?s=128&g=1", "display_name": "JAG2024", "link": "https://stackoverflow.com/users/7372165/jag2024"}, "edited": false, "score": 0, "creation_date": 1483571342, "post_id": 41473225, "comment_id": 70155490, "body": "@JAG2024, glad i could help :)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1483564069, "last_edit_date": 1483564069, "creation_date": 1483563912, "answer_id": 41473225, "question_id": 41473112, "link": "https://stackoverflow.com/questions/41473112/replace-column-values-in-python/41473225#41473225", "title": "Replace column values in python", "body": "<p>Try this:</p>\n\n<pre><code>df['native_id'] = df.device_id.map(names.set_index('device_id')['native_id'])\n</code></pre>\n\n<p>Or if you don't want to preserve <code>device_id</code> column in the <code>df</code> DF:</p>\n\n<pre><code>In [210]: df['native_id'] = df.pop('device_id').map(names.set_index('device_id')['native_id'])\n\nIn [211]: df\nOut[211]:\n   day  month  year  rain     native_id\n0   31     12  2016   0.0  zim_pod_0001\n1   31     12  2016   0.0  zim_pod_0002\n2   31     12  2016   0.0  zim_pod_0003\n3   31     12  2016   1.2  zim_pod_0004\n4   31     12  2016   2.2  zim_pod_0005\n5   31     12  2016   0.2  zim_pod_0006\n6   31     12  2016   0.0  zim_pod_0013\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 423, "user_id": 4781358, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-hRY4wr2Dt0M/AAAAAAAAAAI/AAAAAAAADGY/D4wnv7luqNY/photo.jpg?sz=128", "display_name": "RedVII", "link": "https://stackoverflow.com/users/4781358/redvii"}, "is_accepted": true, "score": 0, "last_activity_date": 1483567941, "creation_date": 1483567941, "answer_id": 41474099, "question_id": 41473112, "link": "https://stackoverflow.com/questions/41473112/replace-column-values-in-python/41474099#41474099", "title": "Replace column values in python", "body": "<p>Use the <code>merge()</code> method which is built-in to Pandas. It essentially works as a join, and is quite straightforward to use. Specify device_id as the joining key, and then select the columns that you want, like so:</p>\n\n<pre><code>df2 = pd.merge(df,names,on=\"device_id\")[[\"native_id\",\"day\",\"month\",\"year\",\"rain\"]]\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>      native_id  day  month  year  rain\n0  zim_pod_0001   31     12  2016   0.0\n1  zim_pod_0002   31     12  2016   0.0\n2  zim_pod_0003   31     12  2016   0.0\n3  zim_pod_0004   31     12  2016   1.2\n4  zim_pod_0005   31     12  2016   2.2\n5  zim_pod_0006   31     12  2016   0.2\n6  zim_pod_0013   31     12  2016   0.0\n</code></pre>\n"}], "owner": {"reputation": 2633, "user_id": 7372165, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PCyvJ.png?s=128&g=1", "display_name": "JAG2024", "link": "https://stackoverflow.com/users/7372165/jag2024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 41474099, "answer_count": 2, "score": 1, "last_activity_date": 1483567941, "creation_date": 1483563491, "question_id": 41473112, "link": "https://stackoverflow.com/questions/41473112/replace-column-values-in-python", "title": "Replace column values in python", "body": "<p>This is hopefully an easy question for someone out there:</p>\n\n<p>I have one data frame that looks like this:</p>\n\n<pre><code>import pandas as pd\nnames_raw = {\n    'device_id': [ '1d28d33a-c98e-4986-a7bb-5881d222c9a8','54322099-e76d-4986-afd2-0861e2113a16','ec3a9f9d-8e4d-4986-bea8-c17c361366e9','cc8e247d-4e2e-4986-b783-e516d03a358c','ca2d8769-ccf5-4986-8aed-741ca68e94cd','12178e22-6d64-4986-966a-374326fdaf3d','50ba7a2e-a1aa-4986-86a7-08e0605dc702','f427c8e9-65d4-46de-b986-8f8e79242842','cee68e2b-135f-45b0-be4b-7c23009866ba','e785988e-2693-47ad-9899-0049860ccaa7','a1986866-13f8-4dbe-b661-8c9f78eac745','a9998ecd-9fe9-4932-870d-29c6b5df1214','9b88e362-b06d-4317-96f5-f266c986a8d6','a04498ef-fd7c-4aa4-bffc-9158ccbad3a1'],\n    'pod_id': ['B00001','B00011','B00013','B00016','B00021','B00023','B00024','B00026','B00027','B00028','B00030','B00032','B00034','B00039'],\n    'native_id': ['zim_pod_0001','zim_pod_0002',    'zim_pod_0003', 'zim_pod_0004', 'zim_pod_0005', 'zim_pod_0006', 'zim_pod_0007', 'zim_pod_0008', 'zim_pod_0009', 'zim_pod_0010', 'zim_pod_0011', 'zim_pod_0012', 'zim_pod_0013','zim_pod_0014']\n    }\nnames = pd.DataFrame(names_raw, columns = ['device_id', 'pod_id', 'native_id'])\n</code></pre>\n\n<p>And another data frame that looks like this:</p>\n\n<pre><code>&gt;&gt;&gt; df\n                          device_id      day  month  year  rain\n0  1d28d33a-c98e-4986-a7bb-5881d222c9a8   31     12  2016   0.0\n1  54322099-e76d-4986-afd2-0861e2113a16   31     12  2016   0.0\n2  ec3a9f9d-8e4d-4986-bea8-c17c361366e9   31     12  2016   0.0\n3  cc8e247d-4e2e-4986-b783-e516d03a358c   31     12  2016   1.2\n4  ca2d8769-ccf5-4986-8aed-741ca68e94cd   31     12  2016   2.2\n5  12178e22-6d64-4986-966a-374326fdaf3d   31     12  2016   0.2\n6  9b88e362-b06d-4317-96f5-f266c986a8d6   31     12  2016   0.0\n</code></pre>\n\n<p>I want to replace the <code>device_id</code> column with the <code>native_id</code> column. How can this be done using the least amount of lines of code?</p>\n\n<p>The final data frame should look something like this:</p>\n\n<pre><code>&gt;&gt;&gt; df\n                           native_id      day  month  year  rain\n0                          zim_pod_0001   31     12  2016   0.0\n1                          zim_pod_0002   31     12  2016   0.0\n2                          zim_pod_0003   31     12  2016   0.0\n</code></pre>\n\n<p>etc. etc...</p>\n"}, {"tags": ["python", "django", "django-forms", "django-allauth"], "comments": [{"owner": {"reputation": 1842, "user_id": 4592608, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/9hXR4.jpg?s=128&g=1", "display_name": "Zagorodniy Olexiy", "link": "https://stackoverflow.com/users/4592608/zagorodniy-olexiy"}, "edited": false, "score": 0, "creation_date": 1483563637, "post_id": 41473047, "comment_id": 70152015, "body": "show your ` url &#39;account_login&#39;`"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "reply_to_user": {"reputation": 1842, "user_id": 4592608, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/9hXR4.jpg?s=128&g=1", "display_name": "Zagorodniy Olexiy", "link": "https://stackoverflow.com/users/4592608/zagorodniy-olexiy"}, "edited": false, "score": 0, "creation_date": 1483564783, "post_id": 41473047, "comment_id": 70152544, "body": "That&#39;s allauth&#39;s URL. Here&#39;s the doc: <a href=\"https://github.com/pennersr/django-allauth/blob/master/allauth/account/urls.py\" rel=\"nofollow noreferrer\">github.com/pennersr/django-allauth/blob/master/allauth/accou&zwnj;&#8203;nt/&hellip;</a>"}, {"owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "edited": false, "score": 0, "creation_date": 1483567227, "post_id": 41473047, "comment_id": 70153757, "body": "does it bring you to the second login page even if the credentials are correct?"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1483567533, "post_id": 41473047, "comment_id": 70153919, "body": "Yes, regardless if the credentials are correct or incorrect, it redirects to /accounts/login"}], "answers": [{"tags": [], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "is_accepted": false, "score": 1, "last_activity_date": 1483570087, "creation_date": 1483570087, "answer_id": 41474532, "question_id": 41473047, "link": "https://stackoverflow.com/questions/41473047/allauth-login-on-homepage-not-working/41474532#41474532", "title": "Allauth login on homepage not working", "body": "<p>Managed to fix it by passing in the forms as context in my view:</p>\n\n<pre><code>    from allauth.account.forms import LoginForm, SignupForm\n\n    allauth_login = LoginForm(request.POST or None)\n    allauth_signup = SignupForm(request.POST or None)\n\n\n    context = {\n        'posts': posts,\n        'allauth_login': allauth_login,\n        'allauth_signup': allauth_signup\n    }\n</code></pre>\n\n<p>Then replacing <code>{{ form.as_p }}</code> for <code>{{ allauth_login }}</code> in my template:</p>\n\n<pre><code>&lt;form class=\"login\" method=\"POST\" action=\"{% url 'account_login' %}\"&gt;\n&lt;div class=\"loginWrapper\"&gt;\n    &lt;div class=\"loginNested\"&gt;\n    &lt;div class=\"loginBox\"&gt;\n  {% csrf_token %}\n  {{ allauth_login }}\n  {% if redirect_field_value %}\n  &lt;input type=\"hidden\" name=\"{{ redirect_field_name }}\" value=\"{{ redirect_field_value }}\" /&gt;\n  {% endif %}\n  &lt;a class=\"button secondaryAction\" href=\"{% url 'account_reset_password' %}\"&gt;{% trans \"Forgot Password?\" %}&lt;/a&gt;\n  &lt;button class=\"primaryAction\" type=\"submit\"&gt;{% trans \"Sign In\" %}&lt;/button&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>This method only works when the credentials are entered correctly. So when entered correctly the form successfully submits and logs in/signs up. However when credentials are entered incorrectly for login, or when a username is already taken for signup etc, it will submit the form anyway and redirect me to /accounts/login or /accounts/signup. This is different to the normal allauth which shows errors without submitting the form. If anyone could tell me how to show errors that would be great, otherwise I will post a seperate question.</p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483570087, "creation_date": 1483563216, "last_edit_date": 1483564553, "question_id": 41473047, "link": "https://stackoverflow.com/questions/41473047/allauth-login-on-homepage-not-working", "title": "Allauth login on homepage not working", "body": "<p>To allow Django's allauth to work on my homepage, I copied the allauth HTML for the login and signup forms to my own base.html (The login form can be seen <a href=\"https://github.com/pennersr/django-allauth/blob/master/allauth/templates/account/login.html#L36\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p>So this successfully renders the form and its fields on my homepage. However, when I click submit on the login form, it just redirects me to allauth's /accounts/login URL, which renders the same form. Only after that does submitting the form work. It's the same with the signup form when I submit the signup form on my homepage, it redirects me to /accounts/signup and then the signup works after submitting again. How can I make the login/signup work initially from my homepage?</p>\n\n<p>My urls and views:</p>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>urlpatterns = [\n    url(r'^$', views.boxes_view, name='news'),\n    url(r'^accounts/', include('allauth.urls')),\n]\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>def boxes_view(request):\n   search = request.GET.get('search')\n   posts = Post.objects.all().filter(category=1).order_by('-date')\n   if search:\n      posts = posts.filter(Q(title__icontains=search)|Q(content__icontains=search))\n   else:\n      posts = Post.objects.all().filter(category=1).order_by('-date')\n\n   context = {'posts': posts,}\n   return render(request, 'polls.html', context)\n</code></pre>\n\n<p><strong>base.html</strong></p>\n\n<pre><code>...\n\n{% load i18n %}\n&lt;form class=\"login\" method=\"POST\" action=\"{% url 'account_login' %}\"&gt;\n&lt;div class=\"loginWrapper\"&gt;\n    &lt;div class=\"loginNested\"&gt;\n    &lt;div class=\"loginBox\"&gt;\n  {% csrf_token %}\n  {{ form.as_p }}\n  {% if redirect_field_value %}\n  &lt;input type=\"hidden\" name=\"{{ redirect_field_name }}\" value=\"{{ redirect_field_value }}\" /&gt;\n  {% endif %}\n  &lt;a class=\"button secondaryAction\" href=\"{% url 'account_reset_password' %}\"&gt;{% trans \"Forgot Password?\" %}&lt;/a&gt;\n  &lt;button class=\"primaryAction\" type=\"submit\"&gt;{% trans \"Sign In\" %}&lt;/button&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/form&gt;\n\n...\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pexpect"], "answers": [{"comments": [{"owner": {"reputation": 1821, "user_id": 1830818, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/65e299f7496c229201300aea72106cfd?s=128&d=identicon&r=PG", "display_name": "kozooh", "link": "https://stackoverflow.com/users/1830818/kozooh"}, "edited": false, "score": 0, "creation_date": 1484126693, "post_id": 41476953, "comment_id": 70377654, "body": "<code>ssh -o ServerAliveInterval=15 -o ServerAliveCountMax=3</code> worked for me, thanks!"}], "tags": [], "owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "is_accepted": true, "score": 1, "last_activity_date": 1483590785, "last_edit_date": 1483590785, "creation_date": 1483587515, "answer_id": 41476953, "question_id": 41473000, "link": "https://stackoverflow.com/questions/41473000/how-can-i-monitor-health-of-ssh-tunnel-with-pexpect/41476953#41476953", "title": "How can I monitor health of SSH tunnel with Pexpect?", "body": "<p>I think you can use <code>ssh</code>'s <code>ServerAliveInterval</code> and <code>ServerAliveCountMax</code> options:</p>\n\n<pre><code>ssh -o ServerAliveInterval=15 -o ServerAliveCountMax=3 user@host ...\n</code></pre>\n\n<p>If your <code>ssh</code> server does not support these options you can still try <code>TCPKeepAlive</code>:</p>\n\n<pre><code>ssh -o TCPKeepAlive=yes user@host ...\n</code></pre>\n\n<p>And then in your <code>pexpect</code> script you only need to check <code>pexpect.EOF</code>.</p>\n\n<hr>\n\n<p>The following is from <code>ssh_config</code> man page:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> ServerAliveCountMax\n         Sets the number of server alive messages (see below) which may be\n         sent without ssh(1) receiving any messages back from the server.\n         If this threshold is reached while server alive messages are\n         being sent, ssh will disconnect from the server, terminating the\n         session.  It is important to note that the use of server alive\n         messages is very different from TCPKeepAlive (below).  The server\n         alive messages are sent through the encrypted channel and there-\n         fore will not be spoofable.  The TCP keepalive option enabled by\n         TCPKeepAlive is spoofable.  The server alive mechanism is valu-\n         able when the client or server depend on knowing when a connec-\n         tion has become inactive.\n\n         The default value is 3.  This option applies to protocol\n         version 2 only.\n\n ServerAliveInterval\n         Sets a timeout interval in seconds after which if no data has\n         been received from the server, ssh(1) will send a message through\n         the encrypted channel to request a response from the server.  The\n         default is 0, indicating that these messages will not be sent to\n         the server.  This option applies to protocol version 2 only.\n\n TCPKeepAlive\n         Specifies whether the system should send TCP keepalive messages\n         to the other side.  If they are sent, death of the connection or\n         crash of one of the machines will be properly noticed.  However,\n         this means that connections will die if the route is down tempo-\n         rarily, and some people find it annoying.\n\n         The default is ``yes'' (to send TCP keepalive messages), and the\n         client will notice if the network goes down or the remote host\n         dies.  This is important in scripts, and many users want it too.\n</code></pre>\n"}], "owner": {"reputation": 1821, "user_id": 1830818, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/65e299f7496c229201300aea72106cfd?s=128&d=identicon&r=PG", "display_name": "kozooh", "link": "https://stackoverflow.com/users/1830818/kozooh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 41476953, "answer_count": 1, "score": 1, "last_activity_date": 1483590785, "creation_date": 1483563035, "question_id": 41473000, "link": "https://stackoverflow.com/questions/41473000/how-can-i-monitor-health-of-ssh-tunnel-with-pexpect", "title": "How can I monitor health of SSH tunnel with Pexpect?", "body": "<p>I got an SSH tunnel done with <code>Pexpect</code> module which I'm only allowed to read from. How can I check if the connection is still up and running e.g. if there was any network connection issue in the meantime? The other side of my tunnel sends messages randomly so there may be like one day without any data in the stream. I've checked <code>pexpect.isalive()</code> function but it seems like it doesn't detect that the network connection is down.</p>\n"}, {"tags": ["python", "kivy", "kivy-language"], "comments": [{"owner": {"reputation": 25731, "user_id": 2469283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3271ba34d6b680ed1103b4d4aeda9d6d?s=128&d=identicon&r=PG", "display_name": "inclement", "link": "https://stackoverflow.com/users/2469283/inclement"}, "edited": false, "score": 0, "creation_date": 1483646696, "post_id": 41472972, "comment_id": 70193463, "body": "Post the full log."}], "answers": [{"tags": [], "owner": {"reputation": 24, "user_id": 7454520, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/afeac678cbf9d6ff44ccef247c9bfb2c?s=128&d=identicon&r=PG", "display_name": "phoenix_206", "link": "https://stackoverflow.com/users/7454520/phoenix-206"}, "is_accepted": true, "score": 0, "last_activity_date": 1485111005, "creation_date": 1485111005, "answer_id": 41794838, "question_id": 41472972, "link": "https://stackoverflow.com/questions/41472972/how-do-i-fix-kivy-calledprocesserror-returned-non-zero-exit-status-1/41794838#41794838", "title": "How do I fix &quot;Kivy CalledProcessError: returned non-zero exit status 1&quot;?", "body": "<p>Although a bit of sloppy job, you can find your sh.py file somewhere in your site_packages folder and place it next to your package_app.py (i.e in the same directory) :)</p>\n"}], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 41794838, "answer_count": 1, "score": -1, "last_activity_date": 1485111005, "creation_date": 1483562895, "last_edit_date": 1483908163, "question_id": 41472972, "link": "https://stackoverflow.com/questions/41472972/how-do-i-fix-kivy-calledprocesserror-returned-non-zero-exit-status-1", "title": "How do I fix &quot;Kivy CalledProcessError: returned non-zero exit status 1&quot;?", "body": "<p>I am attempting to build an app I built in kivy using buildozer. However, when I run the command \"build osx debug\", I get the following error: </p>\n\n<pre><code>    CalledProcessError: Command '['python', 'package_app.py', '/Users\n    /ajax/Documents/.buildozer/osx/app', \n    '--appname=musicalapp', '--bundlename=Music Favorites', \n   '--bundleid=org.test', '--bundleversion=0.1', '--displayname=Music \n   Favorites']' returned non-zero exit status 1\n</code></pre>\n\n<p>Does anyone know how to fix this issue? Thank you!</p>\n\n<p>Here is the full log:</p>\n\n<pre><code>   Traceback (most recent call last):\n   File \"package_app.py\", line 234, in &lt;module&gt;\n   main(arguments)\n   File \"package_app.py\", line 217, in main\n   bootstrap(source_app, appname, confirm)\n  File \"package_app.py\", line 79, in bootstrap\n  sh.cp('-a', source_app, appname)\n  NameError: global name 'sh' is not defined\n  Traceback (most recent call last):\n  File \"/usr/local/bin/buildozer\", line 9, in &lt;module&gt;\n  load_entry_point('buildozer==0.32', 'console_scripts', 'buildozer')()\n   File \"/Library/Python/2.7/site-packages/buildozer/scripts\n  /client.py\", line 13, in main\n  Buildozer().run_command(sys.argv[1:])\n   File \"/Library/Python/2.7/site-packages/buildozer/__init__.py\",    \n  line 1020, in run_command\n   self.target.run_commands(args)\n   File \"/Library/Python/2.7/site-packages/buildozer/targets \n   /osx.py\",     \n  line 234, in run_commands func(args)\n  File \"/Library/Python/2.7/site-packages/buildozer/targets/osx.py\",\n  line 250, in cmd_debug\n  self.buildozer.build()\n  File \"/Library/Python/2.7/site-packages/buildozer/__init__.py\", line\n  210, in build self.target.build_package()\n  File \"/Library/Python/2.7/site-packages/buildozer/targets/osx.py\",\n  line 155, in build_package\n  check_output(cmd, cwd=cwd)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib \n /python2.7/subprocess.py\", line 573, in check_output\n raise CalledProcessError(retcode, cmd, output=output)\n  subprocess.CalledProcessError: Command '['python', 'package_app.py', \n '/Users/ajax/Documents/.buildozer/osx/app',\n '--appname=musicalapp', '--bundlename=Music Favorites', \n  '--bundleid=my_app.test', '--bundleversion=1.0', \n  '--displayname=Music Favorites']' returned non-zero exit status 1\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1483563164, "post_id": 41472959, "comment_id": 70151767, "body": "It&#39;s exactly what it says: you failed to indent your function code at the given line, function SetUp.  When you post here, we <i>do</i> expect you to include the entire error message."}], "answers": [{"tags": [], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "is_accepted": false, "score": 1, "last_activity_date": 1483563340, "creation_date": 1483563340, "answer_id": 41473081, "question_id": 41472959, "link": "https://stackoverflow.com/questions/41472959/theres-an-error-in-your-program-expected-an-indented-block-when-i-run-this-cod/41473081#41473081", "title": "There&#39;s an error in your program: expected an indented block when I run this code", "body": "<p>It looks like you failed to indent this part right here:</p>\n\n<pre><code>def setUp(self):\nself._places_instance = GooglePlaces(DUMMY_API_KEY)\n</code></pre>\n\n<p>This should be the following instead:</p>\n\n<pre><code>def setUp(self):\n    self._places_instance = GooglePlaces(DUMMY_API_KEY)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1483645707, "post_id": 41473083, "comment_id": 70192867, "body": "give my answer is identical to yours, I wonder why mine is upvoted and yours is downvoted?"}, {"owner": {"reputation": 761, "user_id": 6646696, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0a134da06540ea285f5f4f90ea5117a3?s=128&d=identicon&r=PG&f=1", "display_name": "r0xette", "link": "https://stackoverflow.com/users/6646696/r0xette"}, "reply_to_user": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1483652073, "post_id": 41473083, "comment_id": 70196310, "body": "Just hating on me :)"}], "tags": [], "owner": {"reputation": 761, "user_id": 6646696, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0a134da06540ea285f5f4f90ea5117a3?s=128&d=identicon&r=PG&f=1", "display_name": "r0xette", "link": "https://stackoverflow.com/users/6646696/r0xette"}, "is_accepted": false, "score": -1, "last_activity_date": 1483563345, "creation_date": 1483563345, "answer_id": 41473083, "question_id": 41472959, "link": "https://stackoverflow.com/questions/41472959/theres-an-error-in-your-program-expected-an-indented-block-when-i-run-this-cod/41473083#41473083", "title": "There&#39;s an error in your program: expected an indented block when I run this code", "body": "<p>Line # 25 had indentation error.</p>\n\n<p>Change:</p>\n\n<pre><code>def setUp(self):\nself._places_instance = GooglePlaces(DUMMY_API_KEY)\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>def setUp(self):\n    self._places_instance = GooglePlaces(DUMMY_API_KEY)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7376191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d74d3946c2b523ee9f4ee24c05a7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Atirah", "link": "https://stackoverflow.com/users/7376191/atirah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1483563345, "creation_date": 1483562853, "last_edit_date": 1483563013, "question_id": 41472959, "link": "https://stackoverflow.com/questions/41472959/theres-an-error-in-your-program-expected-an-indented-block-when-i-run-this-cod", "title": "There&#39;s an error in your program: expected an indented block when I run this code", "body": "<pre><code>\"\"\"\nUnit tests for google places.\n\n@author: sam@slimkrazy.com\n\"\"\"\n\nfrom random import randint\nimport unittest\nimport warnings\n\nfrom googleplaces import GooglePlaces,GooglePlacesSearchResult,GoogleAutocompleteSearchResult\nfrom testfixtures import PLACES_QUERY_RESPONSE, AUTOCOMPLETE_QUERY_RESPONSE\n\nDUMMY_API_KEY = 'foobarbaz'\n\nclass Test(unittest.TestCase):\n\n    def setUp(self):\n        self._places_instance = GooglePlaces(DUMMY_API_KEY)\n\n    def tearDown(self):\n        self._places_instance = None\n\n    def setUp(self):\n    self._places_instance = GooglePlaces(DUMMY_API_KEY)\n\ndef tearDown(self):\n    self._places_instance = None\n\ndef testSuccessfulPlaceResponse(self):\n    query_result = GooglePlacesSearchResult(\n            self._places_instance,\n            PLACES_QUERY_RESPONSE)\n\n    self.assertEqual(5, len(query_result.places), 'Place count is incorrect.')\n    place_index = randint(0, len(query_result.places)-1)\n    place = query_result.places[place_index]\n    response_place_entity = PLACES_QUERY_RESPONSE['results'][place_index]\n\n    # make sure Place.id and Place.reference raise appropriate warnings\n    with warnings.catch_warnings(record=True) as w:\n        place_id = place.id\n        place_reference = place.reference\n        self.assertEqual(len(w), 2)\n        self.assertEqual(w[0].category, FutureWarning)\n        self.assertEqual(w[1].category, FutureWarning)\n\n    self.assertEqual(place_id, response_place_entity.get('id'), 'ID value is incorrect.')\n    self.assertEqual(place_reference,\n                     response_place_entity.get('reference'),\n                     'Reference value is incorrect.')\n    self.assertEqual(place.name, response_place_entity.get('name'),\n                     'Name value is incorrect.')\n    self.assertEqual(place.vicinity, response_place_entity.get('vicinity'),\n                     'Vicinity value is incorrect.')\n    self.assertEqual(\n            place.geo_location,\n            response_place_entity['geometry']['location'],\n            'Geo-location value is incorrect.')\n\ndef testSuccessfulAutocompleteResponse(self):\n    query_result = GoogleAutocompleteSearchResult(\n            self._places_instance,\n            AUTOCOMPLETE_QUERY_RESPONSE)\n\n    self.assertEqual(5, len(query_result.predictions), 'Prediction count is incorrect.')\n    prediction_index = randint(0, len(query_result.predictions)-1)\n    prediction = query_result.predictions[prediction_index]\n    response_prediction_entity = AUTOCOMPLETE_QUERY_RESPONSE['predictions'][prediction_index]\n    self.assertEqual(prediction.id, response_prediction_entity.get('id'), 'ID value is incorrect.')\n    self.assertEqual(\n                     prediction.place_id,\n                     response_prediction_entity.get('place_id'),\n                     'Place ID value is incorrect.')\n    self.assertEqual(\n                     prediction.reference,\n                     response_prediction_entity.get('reference'),\n                     'Reference value is incorrect.')\n    self.assertEqual(prediction.description,\n                     response_prediction_entity.get('description'),\n                     'Description value is incorrect.')\n    self.assertEqual(prediction.types,\n                     response_prediction_entity.get('types'),\n                     'Types value is incorrect.')\n</code></pre>\n\n<p><strong>This will appear :\nThere's an error in your program: expected an indented block</strong></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 1, "creation_date": 1483563181, "post_id": 41472951, "comment_id": 70151776, "body": "Please share some data for testing."}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1483563635, "post_id": 41472951, "comment_id": 70152014, "body": "or <code>df[&#39;Col1&#39;].replace({&#39;([A-Za-z]+), ([A-Za-z]+)&#39; : &#39;\\\\2 \\\\1&#39;}, inplace=True, regex=True)</code>."}, {"owner": {"reputation": 263, "user_id": 7376147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f849913eebcf6a05d94b69691b2cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter D", "link": "https://stackoverflow.com/users/7376147/peter-d"}, "reply_to_user": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1483564035, "post_id": 41472951, "comment_id": 70152187, "body": "Really great! Just learning python as well, so please excuse the newbie mistake.  Additional question: Do both ways broadcast, i.e. are the both fast, the one via .str and the one using replace() directly?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1483564831, "post_id": 41472951, "comment_id": 70152571, "body": "@PeterD, <code>df.column.str.replace()</code> - should be bit faster compared to <code>df.column.replace({})</code>, but the second one aloows you to make a few replacements in one go"}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 7376147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f849913eebcf6a05d94b69691b2cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter D", "link": "https://stackoverflow.com/users/7376147/peter-d"}, "edited": false, "score": 0, "creation_date": 1483564195, "post_id": 41473049, "comment_id": 70152265, "body": "Thanks for the extra info on extract(), piRSquared. I flagged the answer by MaxU for the extra hint on my newbie mistake with regex."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 263, "user_id": 7376147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f849913eebcf6a05d94b69691b2cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter D", "link": "https://stackoverflow.com/users/7376147/peter-d"}, "edited": false, "score": 0, "creation_date": 1483564253, "post_id": 41473049, "comment_id": 70152287, "body": "@PeterD no problem.  MaxU&#39;s answer is great"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 10, "last_activity_date": 1483563219, "creation_date": 1483563219, "answer_id": 41473049, "question_id": 41472951, "link": "https://stackoverflow.com/questions/41472951/using-regex-matched-groups-in-pandas-dataframe-replace-function/41473049#41473049", "title": "Using regex matched groups in pandas dataframe replace function", "body": "<p><strong><em>setup</em></strong></p>\n\n<pre><code>df = pd.DataFrame(dict(name=['Smith, Sean']))\nprint(df)\n\n          name\n0  Smith, Sean\n</code></pre>\n\n<p><strong><em>using <code>replace</code></em></strong>  </p>\n\n<pre><code>df.name.str.replace(r'(\\w+),\\s*(\\w+)', r'\\2 \\1')\n\n0    Sean Smith\nName: name, dtype: object\n</code></pre>\n\n<p><strong><em>using <code>extract</code></em></strong><br>\nsplit to two columns</p>\n\n<pre><code>df.name.str.extract('(?P&lt;Last&gt;\\w+),\\s*(?P&lt;First&gt;\\w+)', expand=True)\n\n    Last First\n0  Smith  Sean\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 263, "user_id": 7376147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f849913eebcf6a05d94b69691b2cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter D", "link": "https://stackoverflow.com/users/7376147/peter-d"}, "edited": false, "score": 0, "creation_date": 1483564716, "post_id": 41473130, "comment_id": 70152512, "body": "Thanks, especially for the nice explanation how python regex works, Most examples I have seen are so simple they can omit the r syntax without problems, it seems."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 28, "last_activity_date": 1483563563, "last_edit_date": 1495541388, "creation_date": 1483563563, "answer_id": 41473130, "question_id": 41472951, "link": "https://stackoverflow.com/questions/41472951/using-regex-matched-groups-in-pandas-dataframe-replace-function/41473130#41473130", "title": "Using regex matched groups in pandas dataframe replace function", "body": "<p>I think you have a few issues with the RegEx's.</p>\n\n<p>As <a href=\"https://stackoverflow.com/questions/41472951/using-regex-matched-groups-in-pandas-dataframe-replace-function/41473130#comment70152014_41472951\">@Abdou just said</a> use either <code>'\\\\2 \\\\1'</code> or better <code>r'\\2 \\1'</code>, as <code>'\\1'</code> is a symbol with ASCII code <code>1</code></p>\n\n<p>Your solution should work if you will use correct RegEx's:</p>\n\n<pre><code>In [193]: df\nOut[193]:\n              name\n0        John, Doe\n1  Max, Mustermann\n\nIn [194]: df.name.replace({r'(\\w+),\\s+(\\w+)' : r'\\2 \\1'}, regex=True)\nOut[194]:\n0          Doe John\n1    Mustermann Max\nName: name, dtype: object\n\nIn [195]: df.name.replace({r'(\\w+),\\s+(\\w+)' : r'\\2 \\1', 'Max':'Fritz'}, regex=True)\nOut[195]:\n0            Doe John\n1    Mustermann Fritz\nName: name, dtype: object\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 7376147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f849913eebcf6a05d94b69691b2cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter D", "link": "https://stackoverflow.com/users/7376147/peter-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11757, "favorite_count": 5, "accepted_answer_id": 41473130, "answer_count": 2, "score": 26, "last_activity_date": 1516078601, "creation_date": 1483562824, "question_id": 41472951, "link": "https://stackoverflow.com/questions/41472951/using-regex-matched-groups-in-pandas-dataframe-replace-function", "title": "Using regex matched groups in pandas dataframe replace function", "body": "<p>I'm just learning python/pandas and like how powerful and concise it is.</p>\n\n<p>During data cleaning I want to use replace on a column in a dataframe with regex but I want to reinsert parts of the match (groups).</p>\n\n<p>Simple Example:\nlastname, firstname -> firstname lastname</p>\n\n<p>I tried something like the following (actual case is more complex so excuse the simple regex):</p>\n\n<pre><code>df['Col1'].replace({'([A-Za-z])+, ([A-Za-z]+)' : '\\2 \\1'}, inplace=True, regex=True)\n</code></pre>\n\n<p>However, this results in empty values. The match part works as expected, but the value part doesn't.\nI guess this could be achieved by some splitting and merging, but I am looking for a general answer as to whether the regex group can be used in replace.</p>\n"}, {"tags": ["python", "python-2.7", "google-app-engine", "webapp2"], "comments": [{"owner": {"reputation": 3348, "user_id": 408870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/965032240f7a1613a61ab201eecc0c2e?s=128&d=identicon&r=PG", "display_name": "Dan O&#39;Boyle", "link": "https://stackoverflow.com/users/408870/dan-oboyle"}, "edited": false, "score": 0, "creation_date": 1483562607, "post_id": 41472859, "comment_id": 70151510, "body": "Try to explain what &quot;correct&quot; output would mean.  You should also include an error message.    Looking at the example code, it should simply be displaying the form you&#39;ve written in.  What are you expecting to happen?"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1483562996, "post_id": 41472859, "comment_id": 70151688, "body": "Questions seeking debugging help (<b>&quot;why isn&#39;t this code working?&quot;</b>) must include the desired behavior, <i>a specific problem or error</i> and <i>the shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without <b>a clear problem statement</b> are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 10484, "user_id": 3524613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71de987671a207271720d862fa4caafb?s=128&d=identicon&r=PG&f=1", "display_name": "GAEfan", "link": "https://stackoverflow.com/users/3524613/gaefan"}, "edited": false, "score": 0, "creation_date": 1483591659, "post_id": 41472859, "comment_id": 70160568, "body": "Here is the tutorial:  <a href=\"http://wsgi.tutorial.codepoint.net/parsing-the-request-post\" rel=\"nofollow noreferrer\">wsgi.tutorial.codepoint.net/parsing-the-request-post</a>"}], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 7384851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dWNIH.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7384851/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1483721769, "creation_date": 1483721769, "answer_id": 41510465, "question_id": 41472859, "link": "https://stackoverflow.com/questions/41472859/my-code-isnt-giving-correct-output/41510465#41510465", "title": "My code isn&#39;t giving correct output", "body": "<p>The issue was that you weren't calling the checking functions correctly. The easiest fix is just to put the business logic outside the class like:</p>\n\n<pre><code>import webapp2\n\nform=\"\"\"\n&lt;form method=\"post\"&gt;\n    When is ur birthday?\n    &lt;br&gt;\n    &lt;label&gt; Month\n        &lt;input type=\"text\" name=\"month\"&gt;\n    &lt;/label&gt;\n    &lt;label&gt; Day\n        &lt;input type=\"text\" name=\"day\"&gt;\n    &lt;/label&gt;\n    &lt;label&gt; Year\n        &lt;input type=\"text\" name=\"year\"&gt;\n    &lt;/label&gt;\n     &lt;br&gt;\n     &lt;br&gt;\n     &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n\"\"\"\n\nmonths = ['January',\n          'February',\n          'March',\n          'April',\n          'May',\n          'June',\n          'July',\n          'August',\n          'September',\n          'October',\n          'November',\n          'December']\n\ndef valid_month(month):\n    month= month.capitalize()\n    if month in months:\n        return month\n    else:\n        return None\n\ndef valid_day(day):\n    if day and day.isdigit():\n        if int(day) in range(1, 32):\n            return int(day)\n    return None\n\ndef valid_year(year):\n    if year and year.isdigit():\n        if int(year) in range (1900, 2021):\n            return int(year)\n    return None\n\n\nclass MainPage(webapp2.RequestHandler):\n\n    def get(self):\n        self.response.out.write(form)\n\n    def post(self):\n        user_month = valid_month(self.request.get(\"month\"))\n        user_day = valid_day(self.request.get(\"day\"))\n        user_year = valid_year(self.request.get(\"year\"))\n        if not (user_year and user_day and user_month):\n            self.response.out.write(form)\n        else:\n            self.response.out.write(\"Thanks!\")\n\n\napp = webapp2.WSGIApplication([\n    ('/', MainPage)\n], debug=True)\n</code></pre>\n\n<p>If you're intent on having it within the class then you're going to have to do something like</p>\n\n<pre><code>import webapp2\n\nform=\"\"\"\n&lt;form method=\"post\"&gt;\n    When is ur birthday?\n    &lt;br&gt;\n    &lt;label&gt; Month\n        &lt;input type=\"text\" name=\"month\"&gt;\n    &lt;/label&gt;\n    &lt;label&gt; Day\n        &lt;input type=\"text\" name=\"day\"&gt;\n    &lt;/label&gt;\n    &lt;label&gt; Year\n        &lt;input type=\"text\" name=\"year\"&gt;\n    &lt;/label&gt;\n     &lt;br&gt;\n     &lt;br&gt;\n     &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n\"\"\"\n\nclass MainPage(webapp2.RequestHandler):\n\n    def valid_month(self, month):\n        months = ['January',\n              'February',\n              'March',\n              'April',\n              'May',\n              'June',\n              'July',\n              'August',\n              'September',\n              'October',\n              'November',\n              'December']\n\n        month= month.capitalize()\n        if month in months:\n            return month\n        else:\n            return None\n\n    def valid_day(self, day):\n        if day and day.isdigit():\n            if int(day) in range(1, 32):\n                return int(day)\n        return None\n\n    def valid_year(self, year):\n        if year and year.isdigit():\n            if int(year) in range (1900, 2021):\n                return int(year)\n        return None\n\n    def get(self):\n        self.response.out.write(form)\n\n    def post(self):\n        user_month = self.valid_month(self.request.get(\"month\"))\n        user_day = self.valid_day(self.request.get(\"day\"))\n        user_year = self.valid_year(self.request.get(\"year\"))\n        if not (user_year and user_day and user_month):\n            self.response.out.write(form)\n        else:\n            self.response.out.write(\"Thanks!\")\n\n\napp = webapp2.WSGIApplication([\n    ('/', MainPage)\n], debug=True)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7376143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kgcpfXHS5W4/AAAAAAAAAAI/AAAAAAAAER4/1S5PBjhsKHs/photo.jpg?sz=128", "display_name": "darsh gupta", "link": "https://stackoverflow.com/users/7376143/darsh-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1483721769, "creation_date": 1483562461, "last_edit_date": 1483563454, "question_id": 41472859, "link": "https://stackoverflow.com/questions/41472859/my-code-isnt-giving-correct-output", "title": "My code isn&#39;t giving correct output", "body": "<p>i want to display a form and after getting the details entered, if the day, month and year entered is valid display Thanks message else display the form again but the problem is when i click submit button i don't get any output but only a blank screen. There is some error in Post procedure.</p>\n\n<pre><code>import webapp2\nform=\"\"\"\n&lt;form method=\"post\"&gt;\n    When is ur birthday?\n    &lt;br&gt;\n    &lt;label&gt; Month\n        &lt;input type=\"text\" name=\"month\"&gt;\n    &lt;/label&gt;\n    &lt;label&gt; Day\n        &lt;input type=\"text\" name=\"day\"&gt;\n    &lt;/label&gt;\n    &lt;label&gt; Year\n        &lt;input type=\"text\" name=\"year\"&gt;\n    &lt;/label&gt;\n     &lt;br&gt;\n     &lt;br&gt;\n     &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n\"\"\"\n\nclass MainPage(webapp2.RequestHandler):\n    months = ['January',\n              'February',\n              'March',\n              'April',\n              'May',\n              'June',\n              'July',\n              'August',\n              'September',\n              'October',\n              'November',\n              'December']\n    def valid_month(month):\n        month= month.capitalize()\n        if month in months:\n            return month\n        else:\n            return None\n\n    def valid_day(day):\n        if day and day.isdigit():\n            if int(day) in range(1, 32):\n                return int(day)\n        return None\n\n    def valid_year(year):\n        if year and year.isdigit():\n            if int(year) in range (1900, 2021):\n                return int(year)\n        return None\n\n    def get(self):\n        self.response.out.write(form)\n\n    def post(self):\n        user_month = valid_month(self.request.get(\"month\"))\n        user_day = valid_day(self.request.get(\"day\"))\n        user_year = valid_year(self.request.get(\"year\"))\n        if not (user_year and user_day and user_month):\n            self.response.out.write(form)\n        else:\n            self.response.out.write(\"Thanks!\")\n\n\napp = webapp2.WSGIApplication([\n    ('/', MainPage),\n], debug=True)\n</code></pre>\n"}, {"tags": ["python", "django", "dictionary"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 6, "creation_date": 1483562336, "post_id": 41472803, "comment_id": 70151375, "body": "What do you mean <code>first dictionary key</code>? Python dictionary is a hash table and it&#39;s not sorted, so there&#39;s no order for keys."}, {"owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1483562461, "post_id": 41472803, "comment_id": 70151440, "body": "I create the dictionary in a way where the first key that I add is the latest year and I don&#39;t want to show it in the optgroup label. all other years (keys) should be shown."}, {"owner": {"reputation": 10793, "user_id": 488784, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7518909259cc80c14d7a9dd36a66a518?s=128&d=identicon&r=PG", "display_name": "bozdoz", "link": "https://stackoverflow.com/users/488784/bozdoz"}, "edited": false, "score": 0, "creation_date": 1483562497, "post_id": 41472803, "comment_id": 70151459, "body": "In the past I&#39;ve done something like this: <code>durationDict.items.0</code>"}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 1, "creation_date": 1483562586, "post_id": 41472803, "comment_id": 70151498, "body": "There&#39;s no &quot;first key&quot; in a dictionary. The fact that you could do <code>dict.keys()[0]</code> could give you surprisingly different result if the same code is run on different machines. It could work perfectly on your local machine and not in production, it may work today but not tomorrow. If you want sequence, use a list of tuples."}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 1, "creation_date": 1483562673, "post_id": 41472803, "comment_id": 70151537, "body": "Maybe you want to learn what a hash table looks like: <a href=\"https://en.wikipedia.org/wiki/Hash_table\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Hash_table</a>"}, {"owner": {"reputation": 2934, "user_id": 6217490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603a0fe24d8bc279817df2e4dcd2a433?s=128&d=identicon&r=PG&f=1", "display_name": "jmelesky", "link": "https://stackoverflow.com/users/6217490/jmelesky"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 1, "creation_date": 1483562691, "post_id": 41472803, "comment_id": 70151544, "body": "As @ShangWang points out, python&#39;s dicts don&#39;t preserve order -- if you use one of the other suggestions, you might get the wrong key omitted. The <a href=\"https://docs.python.org/3/library/collections.html#module-collections\" rel=\"nofollow noreferrer\">collections</a> standard library includes an OrderedDict class which will do what you want."}, {"owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "edited": false, "score": 0, "creation_date": 1483563274, "post_id": 41472803, "comment_id": 70151821, "body": "I hear what you&#39;re saying about the order. If I use orderedDict - how will I get the first key on template then?"}, {"owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "edited": false, "score": 0, "creation_date": 1483563616, "post_id": 41472803, "comment_id": 70152003, "body": "@user2880391 check my answer"}, {"owner": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "reply_to_user": {"reputation": 10793, "user_id": 488784, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7518909259cc80c14d7a9dd36a66a518?s=128&d=identicon&r=PG", "display_name": "bozdoz", "link": "https://stackoverflow.com/users/488784/bozdoz"}, "edited": false, "score": 1, "creation_date": 1483564227, "post_id": 41472803, "comment_id": 70152277, "body": "I think it&#39;s impossible to answer your question without knowing whether you want to exclude the first <i>key</i> (order irrelevant) or the first <i>year</i> (order relevant). If you simply want to exclude the first key, maybe @bozdoz&#39;s answer will suffice but if you want to exclude the first year, you probably want to sort your keys in a list or tuple first using <code>sorted</code>, <code>sort</code>, <code>map</code>, <code>lambda</code> or a combination of these. Alternatively, if you want to sort based on insertion order rather than the numerical value of your keys, use an <code>OrderedDict</code> as previously suggested."}, {"owner": {"reputation": 10793, "user_id": 488784, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7518909259cc80c14d7a9dd36a66a518?s=128&d=identicon&r=PG", "display_name": "bozdoz", "link": "https://stackoverflow.com/users/488784/bozdoz"}, "edited": false, "score": 0, "creation_date": 1483564472, "post_id": 41472803, "comment_id": 70152389, "body": "or <code>pop</code> a specific year to remove it: dict.pop(2010, &#39;&#39;)"}, {"owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "reply_to_user": {"reputation": 10793, "user_id": 488784, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7518909259cc80c14d7a9dd36a66a518?s=128&d=identicon&r=PG", "display_name": "bozdoz", "link": "https://stackoverflow.com/users/488784/bozdoz"}, "edited": false, "score": 1, "creation_date": 1483564886, "post_id": 41472803, "comment_id": 70152597, "body": "@bozdoz - durationDict.items.0 returns key + value."}], "answers": [{"comments": [{"owner": {"reputation": 1011, "user_id": 3924113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RhGO9.png?s=128&g=1", "display_name": "calico_", "link": "https://stackoverflow.com/users/3924113/calico"}, "edited": false, "score": 2, "creation_date": 1483563224, "post_id": 41472890, "comment_id": 70151799, "body": "Keep in mind, a dict is not ordered so you can&#39;t predict which key will be deleted with this method."}, {"owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "reply_to_user": {"reputation": 1011, "user_id": 3924113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RhGO9.png?s=128&g=1", "display_name": "calico_", "link": "https://stackoverflow.com/users/3924113/calico"}, "edited": false, "score": 1, "creation_date": 1483563256, "post_id": 41472890, "comment_id": 70151811, "body": "Fair enough, I just wrote this assuming he is using an <code>ordered_dict()</code> or something along those lines"}, {"owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "reply_to_user": {"reputation": 1011, "user_id": 3924113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RhGO9.png?s=128&g=1", "display_name": "calico_", "link": "https://stackoverflow.com/users/3924113/calico"}, "edited": false, "score": 0, "creation_date": 1483563550, "post_id": 41472890, "comment_id": 70151972, "body": "I also edited my answer to show OP how to delete the <code>latest_year</code> key (or any specific key/value), assuming that ultimately that is his goal."}], "tags": [], "owner": {"reputation": 5586, "user_id": 3345051, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100002242913967/picture?type=large", "display_name": "Hybrid", "link": "https://stackoverflow.com/users/3345051/hybrid"}, "is_accepted": false, "score": 0, "last_activity_date": 1483563454, "last_edit_date": 1483563454, "creation_date": 1483562605, "answer_id": 41472890, "question_id": 41472803, "link": "https://stackoverflow.com/questions/41472803/python-find-first-dictionary-key-in-template/41472890#41472890", "title": "Python - find first dictionary key in template", "body": "<p>You can use a <code>filter</code> tag. For example:</p>\n\n<p><strong>template_tags.py</strong></p>\n\n<pre><code>from django import template\n\n\nregister = template.Library()\n\n@register.filter()\ndef exclude_first(dict):\n    first_key = list(dict)[0]\n    del dict[first_key]\n    return dict\n</code></pre>\n\n<p><strong>html</strong></p>\n\n<pre><code>{% load template_tags %}\n\n{% for year, durations in durationDict|exclude_first %}\n...\n{% endfor %}\n</code></pre>\n\n<p>This should allow you to loop through all of the items in <code>durationDict</code> <strong>except</strong> for the first item. Keep in mind that <code>dicts</code> are not ordered by default. If you have a custom key/value pair that you want deleted every time, you can simply replace <code>del dict[first_key]</code> with <code>del dict['latest_year']</code> (or replace <code>latest_year</code> with the key name you want to delete).</p>\n"}, {"tags": [], "owner": {"reputation": 10793, "user_id": 488784, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7518909259cc80c14d7a9dd36a66a518?s=128&d=identicon&r=PG", "display_name": "bozdoz", "link": "https://stackoverflow.com/users/488784/bozdoz"}, "is_accepted": false, "score": 1, "last_activity_date": 1483563649, "creation_date": 1483563649, "answer_id": 41473153, "question_id": 41472803, "link": "https://stackoverflow.com/questions/41472803/python-find-first-dictionary-key-in-template/41473153#41473153", "title": "Python - find first dictionary key in template", "body": "<p>If you don't want to show the first iteration of a for loop in a Django template, you can omit it by checking for <a href=\"https://docs.djangoproject.com/es/1.9/ref/templates/builtins/#for\" rel=\"nofollow noreferrer\">forloop.first</a></p>\n\n<pre><code> {% for year, durations in durationDict.items %}\n      {% if not forloop.first %}\n      &lt;optgroup label={{ year }}&gt;\n      {% for duration in durations %}\n           &lt;option data-from-date=\"{{ duration.from_date }}\" data-to-date=\"{{ duration.to_date }}\" value={{ duration.duration_id }}&gt;{{ duration.from_date }}\n                                - {{ duration.to_date }}&lt;/option&gt;\n      {% endfor %}\n      {% endif %}\n {% endfor %}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "is_accepted": true, "score": 1, "last_activity_date": 1484873905, "last_edit_date": 1484873905, "creation_date": 1484827101, "answer_id": 41741257, "question_id": 41472803, "link": "https://stackoverflow.com/questions/41472803/python-find-first-dictionary-key-in-template/41741257#41741257", "title": "Python - find first dictionary key in template", "body": "<p>What I finally done was as following:</p>\n\n<p>creating an OrderedDict out of my Dictionary, making sure that it's sorted by dates Descending:</p>\n\n<pre><code> duration_dict = OrderedDict(sorted(duration_dict.items(), key=lambda t: t[0], reverse=True))\n</code></pre>\n\n<p>So now I can be sure that the first key is also the latest year.\nand for presenting all the key,value pairs without the first year I used forloop.first, as suggested by @bozdoz:</p>\n\n<pre><code>{% for year, durations in duration_dict.items %}\n                            {% if not forloop.first %}\n                            &lt;optgroup label={{ year }}&gt;\n                            {% endif %}\n                           {% for duration in durations %}\n                              &lt;option data-from-date=\"{{ duration.from_date }}\" data-to-date=\"{{ duration.to_date }}\" value={{ duration.duration_id }}&gt;{{ duration.from_date }}\n                                - {{ duration.to_date }}&lt;/option&gt;\n                            {% endfor %}\n                        {% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 41741257, "answer_count": 3, "score": 1, "last_activity_date": 1484873905, "creation_date": 1483562241, "last_edit_date": 1483562382, "question_id": 41472803, "link": "https://stackoverflow.com/questions/41472803/python-find-first-dictionary-key-in-template", "title": "Python - find first dictionary key in template", "body": "<p>I'm trying to show my dictionary keys and values in template in for loop, but I don't want to show the first key.\nWhat is the best way to do it?\nI thought of using something like </p>\n\n<pre><code>dictionary.keys()[0]\n</code></pre>\n\n<p>but i can't do it in template.\nor maybe add counter to the for loop (not sure how to do it in the loop below)\nThis is my loop to show the dictionary-</p>\n\n<pre><code> {% for year, durations in durationDict.items %}\n      &lt;optgroup label={{ year }}&gt;\n      {% for duration in durations %}\n           &lt;option data-from-date=\"{{ duration.from_date }}\" data-to-date=\"{{ duration.to_date }}\" value={{ duration.duration_id }}&gt;{{ duration.from_date }}\n                                - {{ duration.to_date }}&lt;/option&gt;\n      {% endfor %}\n {% endfor %}\n</code></pre>\n"}, {"tags": ["python", "word-wrap"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1483562273, "post_id": 41472735, "comment_id": 70151344, "body": "split the string by whitespace and only add to a line if the next word fits on the line"}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 1, "creation_date": 1483563153, "post_id": 41472735, "comment_id": 70151764, "body": "Please provide the expected output for your example. Should it use 4 lines only, or should it split some other line in two to still get to 5?"}, {"owner": {"reputation": 800, "user_id": 5194792, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e85c0da1fa0da0207db65252ba9be959?s=128&d=identicon&r=PG&f=1", "display_name": "Anay Bose", "link": "https://stackoverflow.com/users/5194792/anay-bose"}, "reply_to_user": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1483564186, "post_id": 41472735, "comment_id": 70152257, "body": "@trincot, there is no strict rules about lines 4 and 5 both could work."}], "answers": [{"tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": true, "score": 1, "last_activity_date": 1483565314, "creation_date": 1483565314, "answer_id": 41473522, "question_id": 41472735, "link": "https://stackoverflow.com/questions/41472735/splits-a-string-by-number/41473522#41473522", "title": "Splits a string by number", "body": "<p>You could use the <a href=\"https://docs.python.org/2/library/textwrap.html#textwrap.TextWrapper.break_long_words\" rel=\"nofollow noreferrer\"><code>break_long_words</code></a> option of the <a href=\"https://docs.python.org/2/library/textwrap.html#textwrap.TextWrapper\" rel=\"nofollow noreferrer\"><code>TextWrapper</code> constructor</a>:</p>\n\n<pre><code>import textwrap\nimport re\n\n# define a customised object with option set to not break long words\ntextwrap = textwrap.TextWrapper(break_long_words=False)\n\ndef count (s, no_of_lines):\n    # set the width option instead of using a count\n    textwrap.width = 1\n    result = textwrap.fill(s.upper())\n    while len(re.split('\\n', result)) &gt; no_of_lines:\n        textwrap.width += 1\n        result = textwrap.fill(s.upper())\n    return textwrap.width\n\nstring = \"He could not meet her in conversation\"\nnumber_of_lines = 5\ntextwrap.width = count(string, number_of_lines)\nresult = textwrap.fill(string)\nprint (result)\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>He could<br>\n  not meet<br>\n  her in<br>\n  conversation</p>\n</blockquote>\n"}], "owner": {"reputation": 800, "user_id": 5194792, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e85c0da1fa0da0207db65252ba9be959?s=128&d=identicon&r=PG&f=1", "display_name": "Anay Bose", "link": "https://stackoverflow.com/users/5194792/anay-bose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 41473522, "answer_count": 1, "score": 1, "last_activity_date": 1483565314, "creation_date": 1483561989, "last_edit_date": 1483562287, "question_id": 41472735, "link": "https://stackoverflow.com/questions/41472735/splits-a-string-by-number", "title": "Splits a string by number", "body": "<p>I have just written a very simple function which splits a string by a given number. It works, but got flaws. It sometimes breaks a word apart, for example:</p>\n\n<pre><code>string = \"He could not meet her in conversation\"\nnumber_of_lines = 5\nresult = (textwrap.fill(string, count(string, number_of_lines)))\nprint result\n\nHe could\nnot meet\nher in c\nonversat\nion\n</code></pre>\n\n<p>Please note it breaks the word \"conversation.\" I need suggestions how to overcome this problem, or there is an inbuilt function for this task already available.</p>\n\n<p>Here is the actual function:</p>\n\n<pre><code>import textwrap\nimport re\n\ndef count (s, no_of_lines):\n    result = (textwrap.fill(s.upper(), 1))\n    count = 1  \n    while (len(re.split('[\\n]', result)) != no_of_lines):\n        count = count + 1\n        result = (textwrap.fill(s.upper(), count))\n    return count\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1483562353, "post_id": 41472726, "comment_id": 70151381, "body": "Is your list of edges guaranteed to be in depth-first order?"}, {"owner": {"reputation": 1586, "user_id": 2463048, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e5659861c49bd5b8e7886610f083ac64?s=128&d=identicon&r=PG&f=1", "display_name": "soldiershin", "link": "https://stackoverflow.com/users/2463048/soldiershin"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1483562434, "post_id": 41472726, "comment_id": 70151425, "body": "@schwobaseggl yes"}], "answers": [{"comments": [{"owner": {"reputation": 1586, "user_id": 2463048, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e5659861c49bd5b8e7886610f083ac64?s=128&d=identicon&r=PG&f=1", "display_name": "soldiershin", "link": "https://stackoverflow.com/users/2463048/soldiershin"}, "edited": false, "score": 0, "creation_date": 1483564728, "post_id": 41473151, "comment_id": 70152520, "body": "Yup thats exactly what i needed."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 5, "last_activity_date": 1483624188, "last_edit_date": 1483624188, "creation_date": 1483563638, "answer_id": 41473151, "question_id": 41472726, "link": "https://stackoverflow.com/questions/41472726/multi-nested-dictionary-from-tuples-in-python/41473151#41473151", "title": "multi nested dictionary from tuples in python", "body": "<p>I'm going to whip up a quick tree class that can take this input and build a tree with it, then I'm going to write a method for that class that converts them back to dictionaries</p>\n\n<pre><code>class Tree:\n    def __init__(self, name, parent=None): #parent is None to detect root\n        self.name = name\n        self.parent = parent\n        self.children = []    \n    def add(self, target , child):\n        '''\n        Does DFS until it finds Tree with name target.  Creates a Tree(child)\n        as child of Tree name\n        '''\n        if self.name == target:\n            self.children.append(Tree(child, self))\n            return True\n        else:\n            for subtree in self.children:\n                if subtree.add(target, child):\n                    return True\n        if self.parent:\n            return False\n        raise ValueError('Bad Parent no such node {}'.format(target))    \n    def dictify(self):\n        d = {}\n        for child in self.children:\n          d.update(child.dictify())\n        return {self.name: d}\n\nlist_of_tuples = [('0', '1'), ('1', '1.1'), ('1', '1.2'), ('1', '1.3'), ('1', '1.4'), ('0', '3'), ('3', '3.1'), ('3', '3.2'), ('3', '3.3'), ('3', '3.4'), ('3', '3.5'), ('0', '4'), ('4', '4.1'), ('4', '4.2'), ('4', '4.3'), ('4', '4.4'), ('4', '4.5'), ('4', '4.6'), ('4', '4.7'), ('4', '4.8'), ('4', '4.9'), ('0', '5'), ('5', '5.1'), ('5', '5.2'), ('5', '5.3'), ('5', '5.4'), ('0', '6'), ('6', '6.1'), ('6', '6.2'), ('6', '6.3'), ('6', '6.4'), ('6', '6.5'), ('0', '7'), ('7', '7.1'), ('7', '7.2'), ('7', '7.3'), ('7.3', '7.3.1'), ('7.3', '7.3.2'), ('7.3', '7.3.3'), ('0', '8'), ('8', '8.1.1'), ('8', '8.1.2'), ('8', '8.2'), ('0', '9'), ('9', '9.1'), ('9', '9.2'), ('0', '10'), ('10', '10.1'), ('10', '10.2'), ('10', '10.3'), ('10.3', '10.3.2'), ('10.3', '10.3.3'), ('10.3', '10.3.4'), ('10.3', '10.3.5'), ('10.3', '10.3.6')]\n\nroot = Tree('0')\nfor parent, child in list_of_tuples:\n  root.add(parent, child)\nprint(root.dictify())\n</code></pre>\n\n<p>Here is is with <code>pprint</code> (pretty printing)</p>\n\n<pre><code>{'0': {'1': {'1.1': {}, '1.2': {}, '1.3': {}, '1.4': {}},\n       '10': {'10.1': {},\n              '10.2': {},\n              '10.3': {'10.3.2': {},\n                       '10.3.3': {},\n                       '10.3.4': {},\n                       '10.3.5': {},\n                       '10.3.6': {}}},\n       '3': {'3.1': {}, '3.2': {}, '3.3': {}, '3.4': {}, '3.5': {}},\n       '4': {'4.1': {},\n             '4.2': {},\n             '4.3': {},\n             '4.4': {},\n             '4.5': {},\n             '4.6': {},\n             '4.7': {},\n             '4.8': {},\n             '4.9': {}},\n       '5': {'5.1': {}, '5.2': {}, '5.3': {}, '5.4': {}},\n       '6': {'6.1': {}, '6.2': {}, '6.3': {}, '6.4': {}, '6.5': {}},\n       '7': {'7.1': {},\n             '7.2': {},\n             '7.3': {'7.3.1': {}, '7.3.2': {}, '7.3.3': {}}},\n       '8': {'8.1.1': {}, '8.1.2': {}, '8.2': {}},\n       '9': {'9.1': {}, '9.2': {}}}}\n</code></pre>\n\n<p>If you want those empty dicts to be <code>None</code> just change <code>dictify</code> to <code>return {self.name: d if d else None}</code></p>\n\n<p>Edit: schwobaseggl makes a good point about insertion complexity.  Here is a version of the Tree class that takes advantage of ordered inputs</p>\n\n<pre><code>class Tree:\n    def __init__(self, name, parent=None): #parent is None to detect root\n        self.name = name\n        self.parent = parent\n        self.children = []        \n    def add(self, target , child):\n        '''\n        Accepts additions in DFS order.  Relies on the fact that every node will\n        be the direct descendant of the previous node or one of its ancestors.\n        '''\n        if self.name == target:\n            kiddo = Tree(child, self)\n            self.children.append(kiddo)\n            return kiddo\n        elif self.parent:\n            return self.parent.add(target, child)\n        else:\n            raise ValueError('Bad Parent no such node {}'.format(target))    \n    def dictify(self):\n        d = {}\n        for child in self.children:\n          d.update(child.dictify())\n        return {self.name: d}\nlist_of_tuples = [('0', '1'), ('1', '1.1'), ('1', '1.2'), ('1', '1.3'), ('1', '1.4'), ('0', '3'), ('3', '3.1'), ('3', '3.2'), ('3', '3.3'), ('3', '3.4'), ('3', '3.5'), ('0', '4'), ('4', '4.1'), ('4', '4.2'), ('4', '4.3'), ('4', '4.4'), ('4', '4.5'), ('4', '4.6'), ('4', '4.7'), ('4', '4.8'), ('4', '4.9'), ('0', '5'), ('5', '5.1'), ('5', '5.2'), ('5', '5.3'), ('5', '5.4'), ('0', '6'), ('6', '6.1'), ('6', '6.2'), ('6', '6.3'), ('6', '6.4'), ('6', '6.5'), ('0', '7'), ('7', '7.1'), ('7', '7.2'), ('7', '7.3'), ('7.3', '7.3.1'), ('7.3', '7.3.2'), ('7.3', '7.3.3'), ('0', '8'), ('8', '8.1.1'), ('8', '8.1.2'), ('8', '8.2'), ('0', '9'), ('9', '9.1'), ('9', '9.2'), ('0', '10'), ('10', '10.1'), ('10', '10.2'), ('10', '10.3'), ('10.3', '10.3.2'), ('10.3', '10.3.3'), ('10.3', '10.3.4'), ('10.3', '10.3.5'), ('10.3', '10.3.6')]\n\nroot = Tree('0')\ncurr = root\nfor parent, child in list_of_tuples:\n  curr = curr.add(parent, child)\nprint(root.dictify())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 5, "last_activity_date": 1483564975, "last_edit_date": 1483564975, "creation_date": 1483564660, "answer_id": 41473389, "question_id": 41472726, "link": "https://stackoverflow.com/questions/41472726/multi-nested-dictionary-from-tuples-in-python/41473389#41473389", "title": "multi nested dictionary from tuples in python", "body": "<p>Patrick's solution is generic and object-oriented. However, it is <code>O(N^2)</code> (<code>N</code> being the number of edges) because it traverses the entire tree for each edge. Since you know that you get the edges in depth-first order, you can save a lot (for large trees: a lot lot!) of time by memorizing your current position in the tree, inserting right where you are, and going back up the tree if needed. </p>\n\n<p>The following is more concise and <code>O(N)</code> without the additional overhead of your own classes and extra-conversion:</p>\n\n<pre><code>from pprint import pprint\n\nd = {}\ncrnt = d  # memo the crnt subtree\nstck = []  # stack of (sub)trees along current path\nfor k, v in list_of_tuples:\n  while stck and k not in crnt:\n    crnt = stck.pop()\n  if k not in crnt:\n    crnt[k] = {}\n  stck.append(crnt)\n  crnt = crnt[k]\n  crnt[v] = {}\n\npprint(d)\n\n{'0': {'1': {'1.1': {}, '1.2': {}, '1.3': {}, '1.4': {}},\n       '10': {'10.1': {},\n              '10.2': {},\n              '10.3': {'10.3.2': {},\n                       '10.3.3': {},\n                       '10.3.4': {},\n                       '10.3.5': {},\n                       '10.3.6': {}}},\n       '3': {'3.1': {}, '3.2': {}, '3.3': {}, '3.4': {}, '3.5': {}},\n       '4': {'4.1': {},\n             '4.2': {},\n             '4.3': {},\n             '4.4': {},\n             '4.5': {},\n             '4.6': {},\n             '4.7': {},\n             '4.8': {},\n             '4.9': {}},\n       '5': {'5.1': {}, '5.2': {}, '5.3': {}, '5.4': {}},\n       '6': {'6.1': {}, '6.2': {}, '6.3': {}, '6.4': {}, '6.5': {}},\n       '7': {'7.1': {},\n             '7.2': {},\n             '7.3': {'7.3.1': {}, '7.3.2': {}, '7.3.3': {}}},\n       '8': {'8.1.1': {}, '8.1.2': {}, '8.2': {}},\n       '9': {'9.1': {}, '9.2': {}}}}\n</code></pre>\n"}], "owner": {"reputation": 1586, "user_id": 2463048, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e5659861c49bd5b8e7886610f083ac64?s=128&d=identicon&r=PG&f=1", "display_name": "soldiershin", "link": "https://stackoverflow.com/users/2463048/soldiershin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 41473151, "answer_count": 2, "score": 5, "last_activity_date": 1483624188, "creation_date": 1483561947, "question_id": 41472726, "link": "https://stackoverflow.com/questions/41472726/multi-nested-dictionary-from-tuples-in-python", "title": "multi nested dictionary from tuples in python", "body": "<p>I have this list of tuples</p>\n\n<pre><code>list_of_tuples = [('0', '1'), ('1', '1.1'), ('1', '1.2'), ('1', '1.3'), ('1', '1.4'), ('0', '3'), ('3', '3.1'), ('3', '3.2'), ('3', '3.3'), ('3', '3.4'), ('3', '3.5'), ('0', '4'), ('4', '4.1'), ('4', '4.2'), ('4', '4.3'), ('4', '4.4'), ('4', '4.5'), ('4', '4.6'), ('4', '4.7'), ('4', '4.8'), ('4', '4.9'), ('0', '5'), ('5', '5.1'), ('5', '5.2'), ('5', '5.3'), ('5', '5.4'), ('0', '6'), ('6', '6.1'), ('6', '6.2'), ('6', '6.3'), ('6', '6.4'), ('6', '6.5'), ('0', '7'), ('7', '7.1'), ('7', '7.2'), ('7', '7.3'), ('7.3', '7.3.1'), ('7.3', '7.3.2'), ('7.3', '7.3.3'), ('0', '8'), ('8', '8.1.1'), ('8', '8.1.2'), ('8', '8.2'), ('0', '9'), ('9', '9.1'), ('9', '9.2'), ('0', '10'), ('10', '10.1'), ('10', '10.2'), ('10', '10.3'), ('10.3', '10.3.2'), ('10.3', '10.3.3'), ('10.3', '10.3.4'), ('10.3', '10.3.5'), ('10.3', '10.3.6')\n</code></pre>\n\n<p>The first value in the tuple is the parent and the second is the value.</p>\n\n<pre><code>(parent,child)\n</code></pre>\n\n<p>i want the output to be like this.</p>\n\n<pre><code>{ '0':\n     {'1':\n         {'1.1':None,\n          '1.2':None......\n         }\n     {'3':\n         {'3.1':None/[]..\n         }\n     }\n}\n</code></pre>\n\n<p>i can add it to the dictionary but i want it to be nested like a tree with multiple children.</p>\n\n<pre><code>d = defaultdict(list)\nfor k, v in h:\n   d[k].append(v)\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 1, "creation_date": 1483561982, "post_id": 41472689, "comment_id": 70151198, "body": "You have not even googled it, right?"}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "edited": false, "score": 2, "creation_date": 1483562141, "post_id": 41472689, "comment_id": 70151278, "body": "You may already have <code>pip</code> if you installed python &gt;=3.4. Try using the command <code>pip3</code>."}, {"owner": {"reputation": 1397, "user_id": 4958332, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/kvGxB.png?s=128&g=1", "display_name": "Karan Khanna", "link": "https://stackoverflow.com/users/4958332/karan-khanna"}, "edited": false, "score": 0, "creation_date": 1483562371, "post_id": 41472689, "comment_id": 70151387, "body": "Worked for me Greg. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "is_accepted": false, "score": 1, "last_activity_date": 1483562019, "creation_date": 1483562019, "answer_id": 41472744, "question_id": 41472689, "link": "https://stackoverflow.com/questions/41472689/install-pip-on-mac-for-python3-with-python2-already-installed/41472744#41472744", "title": "Install pip on Mac for Python3 with Python2 already installed", "body": "<p>You'll have to specify the Python 3 version of <code>easy_install</code>. The easiest way to do this is to give its full path on the command line. It should be in the executable directory of the Python 3 installation you did (i.e. the same directory as the Python 3 interpreter itself).</p>\n\n<p>You should not remove the system-installed Python 2 in an attempt to get <code>easy_install</code> to refer to Python 3, because the operating system relies on that version of Python being installed.</p>\n"}], "owner": {"reputation": 1397, "user_id": 4958332, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/kvGxB.png?s=128&g=1", "display_name": "Karan Khanna", "link": "https://stackoverflow.com/users/4958332/karan-khanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 1, "closed_date": 1483638266, "answer_count": 1, "score": 0, "last_activity_date": 1483599184, "creation_date": 1483561769, "last_edit_date": 1483599184, "question_id": 41472689, "link": "https://stackoverflow.com/questions/41472689/install-pip-on-mac-for-python3-with-python2-already-installed", "closed_reason": "Duplicate", "title": "Install pip on Mac for Python3 with Python2 already installed", "body": "<p>I have installed python3 on Mac and I am trying to install pip.</p>\n\n<p>While installing pip with command sudo easy_install pip it installs the pip for python 2.x which by default comes with Mac.</p>\n\n<p>Is there any way I can install pip for python3?</p>\n\n<p>Also, is it necessary to keep the older version of python installed as well?</p>\n"}, {"tags": ["python", "request", "response", "urllib2"], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 6353556, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1234c6489e1eb1e07d368a716dad0fcc?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142", "link": "https://stackoverflow.com/users/6353556/rafa%c5%82"}, "is_accepted": true, "score": 1, "last_activity_date": 1483565940, "creation_date": 1483565940, "answer_id": 41473660, "question_id": 41472687, "link": "https://stackoverflow.com/questions/41472687/attributeerror-addinfourl-instance-has-no-attribute-getcode/41473660#41473660", "title": "AttributeError: addinfourl instance has no attribute &#39;getCode&#39;", "body": "<p>I have just change from upper \"C\" to lower \"c\" in getcode() although PyCharm prompted me to getCode() method. </p>\n"}], "owner": {"reputation": 414, "user_id": 6353556, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1234c6489e1eb1e07d368a716dad0fcc?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142", "link": "https://stackoverflow.com/users/6353556/rafa%c5%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 0, "accepted_answer_id": 41473660, "answer_count": 1, "score": 0, "last_activity_date": 1483565940, "creation_date": 1483561765, "question_id": 41472687, "link": "https://stackoverflow.com/questions/41472687/attributeerror-addinfourl-instance-has-no-attribute-getcode", "title": "AttributeError: addinfourl instance has no attribute &#39;getCode&#39;", "body": "<pre><code>from flask import Flask, session, render_template, request, redirect, url_for\nfrom urllib2 import Request, urlopen, HTTPError\nfrom json import dump\nimport json\n\ndef checkLogin():\n    data = {}\n    data['login'] = request.form['login']\n    data['password'] = request.form['password']\n\n    headers = {'Content-Type': 'application/json'}\n\n    jsonData = json.dumps(data)\n    myRequest = Request(\"http://edi.iem.pw.edu.pl....\", data=jsonData,\n                        headers=headers)\n    try:\n        myResponse = urlopen(myRequest)\n        myResponseDict = json.load(myResponse)\n\n        if myResponse.getCode() == 200 and myResponseDict['info'] == 'OK':\n            session['token'] = myResponseDict['token']\n            session['uid'] = myResponseDict['uid']\n        else:\n            myResponseDict['error']\n    except HTTPError as e:\n        print e.code\n        print e.reason\n        return e.read()\n</code></pre>\n\n<p>I get error: \"AttributeError: addinfourl instance has no attribute 'getCode'\"</p>\n\n<p>I check if it work when I write method \"getCode\" without brackets but it doesn't work.</p>\n\n<p>In similar topic I didn't got the answer so I have question what can I do in this case?</p>\n"}, {"tags": ["python", "python-2.7", "web-scraping"], "comments": [{"owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "edited": false, "score": 0, "creation_date": 1483561984, "post_id": 41472676, "comment_id": 70151199, "body": "why negative votes without stating the reason?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1483562754, "post_id": 41472676, "comment_id": 70151571, "body": "I suspect that the reasons are hinted at by the closure votes: too broad.  You&#39;ve asked three questions in one posting, the second of which really belongs in Code Review rather than Stack Overflow."}, {"owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1483562830, "post_id": 41472676, "comment_id": 70151609, "body": "Thank you @Prune Made changes to the code."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1483736205, "post_id": 41472676, "comment_id": 70234444, "body": "Do you know what URL causes the urlopen failure? Is it always the same one?"}, {"owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "edited": false, "score": 0, "creation_date": 1483736755, "post_id": 41472676, "comment_id": 70234719, "body": "it changes not a constant url."}, {"owner": {"reputation": 2157, "user_id": 968231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SWsf0.jpg?s=128&g=1", "display_name": "Hod", "link": "https://stackoverflow.com/users/968231/hod"}, "edited": false, "score": 0, "creation_date": 1483776418, "post_id": 41472676, "comment_id": 70244471, "body": "What OS are you running on?"}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1483794525, "post_id": 41472676, "comment_id": 70249323, "body": "Is there a way to search something which closely matches but not exact match?&quot; -&gt; can you clarify what you mean by &quot;closely matches&quot;?"}, {"owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "edited": false, "score": 0, "creation_date": 1483795046, "post_id": 41472676, "comment_id": 70249498, "body": "OS is windows. For example search word is &quot;Abc In.&quot; But in the website if we have just &quot;Abc In&quot; can I return back as 1 (i.e. match found)?"}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1483798643, "post_id": 41472676, "comment_id": 70250571, "body": "Is a trailling <code>.</code> the only possible kind of close match or are there others?"}, {"owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "reply_to_user": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1483799588, "post_id": 41472676, "comment_id": 70250880, "body": "@snakecharmerb Mostly yes"}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "edited": false, "score": 0, "creation_date": 1483923762, "post_id": 41523245, "comment_id": 70284507, "body": "Thank you @snakecharmerb when I try to implement the first logic of having try and except I get could not fetch error for all urls?"}, {"owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "edited": false, "score": 0, "creation_date": 1484062862, "post_id": 41523245, "comment_id": 70349895, "body": "can we chat I have couple of doubts thank you <a href=\"http://chat.stackoverflow.com/rooms/132718/room-for-zack-and-snakecharmerb\">chat.stackoverflow.com/rooms/132718/&hellip;</a>"}], "tags": [], "owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "is_accepted": true, "score": 2, "last_activity_date": 1483915293, "last_edit_date": 1483915293, "creation_date": 1483804223, "answer_id": 41523245, "question_id": 41472676, "link": "https://stackoverflow.com/questions/41472676/searching-for-a-word-in-a-url-error/41523245#41523245", "title": "Searching for a word in a url error", "body": "<blockquote>\n  <p>when I run around 200 urls at once it gives me urlopen error [Errno 11004] \n  getaddrinfo failed error.</p>\n</blockquote>\n\n<p>This error message is telling you that the DNS lookup for the server hosting \nthe url has failed.</p>\n\n<p>This is a outside the control of your program, but you can decide how to \nhandle the situation.</p>\n\n<p>The simplest approach is to trap the error, log it and carry on:</p>\n\n<pre><code>try:\n    html_content = urllib2.urlopen(req).read()\nexcept urllib2.URLError as ex:\n    print 'Could not fetch {} because of {}, skipping.'.format(url, ex)\n    # skip the rest of the loop\n    continue\n</code></pre>\n\n<p>However, it's possible that the error is transient, and that the lookup will \nwork if you try later; for example, perhaps the DNS server is configured to \nreject incoming requests if it receives too many in too short a space of time.<br>\nIn this situation, you can write a function to retry after a delay:</p>\n\n<pre><code>import time\n\nclass FetchException(Exception):\n    pass\n\ndef fetch_url(req, retries=5):\n    for i in range(1, retries + 1):\n        try:\n            html_content = urllib2.urlopen(req).read()\n        except urllib2.URLError as ex:\n            print 'Could not fetch {} because of {}, skipping.'.format(url, ex)\n            time.sleep(1 * i))\n            continue\n        else:\n            return html_content\n     # if we reach here then all lookups have failed\n     raise FetchFailedException() \n\n# In your main code\ntry:\n    html_content = fetch_url(req)\nexcept FetchFailedException:\n    print 'Could not fetch {} because of {}, skipping.'.format(url, ex)\n    # skip the rest of the loop\n    continue\n</code></pre>\n\n<blockquote>\n  <p>Is there a way to search something which closely matches but not exact match?</p>\n</blockquote>\n\n<p>If you want to match a string with an optional trailing dot, use the <code>?</code> modifier.</p>\n\n<p>From the <a href=\"https://docs.python.org/2/library/re.html#regular-expression-syntax\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Causes the resulting RE to match 0 or 1 repetitions of the preceding RE. ab? will match either \u2018a\u2019 or \u2018ab\u2019.</p>\n</blockquote>\n\n<pre><code>&gt;&gt;&gt; s = 'Abc In'\n&gt;&gt;&gt; m = re.match(r'Abc In.', s)\n&gt;&gt;&gt; m is None\nTrue\n\n# Surround `.` with brackets so that `?` only applies to the `.`\n&gt;&gt;&gt; m = re.match(r'Abc In(.)?', s)\n&gt;&gt;&gt; m.group()\n'Abc In'\n&gt;&gt;&gt; m = re.match(r'Abc In(.)?', 'Abc In.')\n&gt;&gt;&gt; m.group()\n'Abc In.'\n</code></pre>\n\n<p>Notice the <code>r</code> character preceding the regex patterns.  This denotes a <a href=\"https://docs.python.org/2/library/re.html#raw-string-notation\" rel=\"nofollow noreferrer\">raw string</a>.  It's good practice to use raw strings in your regex patterns because they make it much easier to handle backslash (<code>\\</code>) characters, which are very common in regexes.</p>\n\n<p>So you could construct a regex to match optional trailing dots like this:</p>\n\n<p><code>matches = soup(text=re.compile(r'{}(.)?').format(line[2]))</code></p>\n"}], "owner": {"reputation": 535, "user_id": 2540455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/vU4tC.jpg?s=128&g=1", "display_name": "Illuminati", "link": "https://stackoverflow.com/users/2540455/illuminati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 2, "accepted_answer_id": 41523245, "answer_count": 1, "score": 4, "last_activity_date": 1483915293, "creation_date": 1483561722, "last_edit_date": 1483562808, "question_id": 41472676, "link": "https://stackoverflow.com/questions/41472676/searching-for-a-word-in-a-url-error", "title": "Searching for a word in a url error", "body": "<p>I have one million odd urls and search terms in a text file with unique ID. I need to open the urls and search for the searchterms, if present represent as <code>1</code> else <code>0</code>. </p>\n\n<p>Input file:</p>\n\n<pre><code>\"ID\" \"URL\",\"SearchTerm1\",\"Searchterm2\"\n\"1\",\"www.google.com\",\"a\",\"b\"\n\"2\",\"www.yahoo.com\",\"f\",\"g\"\n\"3\",\"www.att.net\",\"k\"\n\"4\" , \"www.facebook.com\",\"cs\",\"ee\"\n</code></pre>\n\n<p>Code Snippet:</p>\n\n<pre><code>import urllib2\nimport re\nimport csv \nimport datetime \nfrom BeautifulSoup import BeautifulSoup\n\nwith open('txt.txt') as inputFile, open ('results.txt','w+') as proc_seqf:\n        header = 'Id' + '\\t' + 'URL' +  '\\t'  \n        for i in range(1,3):\n            header += 'Found_Search' + str(i) +  '\\t'\n        header += '\\n'\n        proc_seqf.write(header)\n        for line in inputFile:\n            line=line.split(\",\")\n            url = 'http://' + line[1]\n            req = urllib2.Request(url, headers={'User-Agent' : \"Magic Browser\"})\n            html_content = urllib2.urlopen(req).read()\n            soup = BeautifulSoup(html_content)\n            if line[2][0:1] == '\"' and line[2][-1:] == '\"':\n                 line[2] = line[2][1:-1]\n            matches = soup(text=re.compile(line[2]))\n            #print soup(text=re.compile(line[2]))\n            #print matches\n            if len(matches) == 0 or line[2].isspace() == True:\n                output_1 =0\n            else:\n                output_1 =1\n            #print output_1\n            #print line[2]\n            if line[3][0:1] == '\"' and line[3][-1:] == '\"':\n                 line[3] = line[3][1:-1]\n            matches = soup(text=re.compile(line[3]))\n            if len(matches) == 0 or line[3].isspace() == True:\n                output_2 =0\n            else:\n                output_2 =1\n            #print output_2\n            #print line[3]\n\n            proc_seqf.write(\"{}\\t{}\\t{}\\t{}\\n\".format(line[0],url,output_1, output_2))\n</code></pre>\n\n<p>output File: </p>\n\n<pre><code>ID,SearchTerm1,Searchterm2\n1,0,1\n2,1,0\n3,0\n4,1,1\n</code></pre>\n\n<p>Two issues with the code:</p>\n\n<ol>\n<li><p>when I run around 200 urls at once it gives me <code>urlopen error [Errno 11004] getaddrinfo failed error</code>.</p></li>\n<li><p>Is there a way to search something which closely matches but not exact match?</p></li>\n</ol>\n"}, {"tags": ["python", "flask", "flask-security"], "answers": [{"comments": [{"owner": {"reputation": 2192, "user_id": 1749551, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42a1266a75ef6e6f77c0690ab43b380d?s=128&d=identicon&r=PG", "display_name": "Nick K9", "link": "https://stackoverflow.com/users/1749551/nick-k9"}, "edited": false, "score": 0, "creation_date": 1572309225, "post_id": 43745575, "comment_id": 103512430, "body": "This is a link-only answer\u2026 and the link in question is just the scheme!"}, {"owner": {"reputation": 1614, "user_id": 6240026, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b329d2fbbe2e05bf4d02115fda970969?s=128&d=identicon&r=PG&f=1", "display_name": "yugantar kumar", "link": "https://stackoverflow.com/users/6240026/yugantar-kumar"}, "reply_to_user": {"reputation": 2192, "user_id": 1749551, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42a1266a75ef6e6f77c0690ab43b380d?s=128&d=identicon&r=PG", "display_name": "Nick K9", "link": "https://stackoverflow.com/users/1749551/nick-k9"}, "edited": false, "score": 0, "creation_date": 1572425771, "post_id": 43745575, "comment_id": 103551417, "body": "@NickK9: It&#39;s always nice to improve the answer rather than criticizing and downvoting it. Hope you understand :)"}, {"owner": {"reputation": 1614, "user_id": 6240026, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b329d2fbbe2e05bf4d02115fda970969?s=128&d=identicon&r=PG&f=1", "display_name": "yugantar kumar", "link": "https://stackoverflow.com/users/6240026/yugantar-kumar"}, "reply_to_user": {"reputation": 2192, "user_id": 1749551, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42a1266a75ef6e6f77c0690ab43b380d?s=128&d=identicon&r=PG", "display_name": "Nick K9", "link": "https://stackoverflow.com/users/1749551/nick-k9"}, "edited": false, "score": 0, "creation_date": 1572425911, "post_id": 43745575, "comment_id": 103551493, "body": "Guys, it was a broken link, which I have fixed now. Go through it once, that might help."}], "tags": [], "owner": {"reputation": 1614, "user_id": 6240026, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b329d2fbbe2e05bf4d02115fda970969?s=128&d=identicon&r=PG&f=1", "display_name": "yugantar kumar", "link": "https://stackoverflow.com/users/6240026/yugantar-kumar"}, "is_accepted": false, "score": -1, "last_activity_date": 1572425830, "last_edit_date": 1572425830, "creation_date": 1493752526, "answer_id": 43745575, "question_id": 41472664, "link": "https://stackoverflow.com/questions/41472664/disable-any-api-exposed-by-flask-security/43745575#43745575", "title": "Disable any API exposed by flask-security", "body": "<p>I found out the way to do this. </p>\n\n<p>Follow this link: <a href=\"https://pythonhosted.org/Flask-Security/configuration.html#feature-flags\" rel=\"nofollow noreferrer\">flask security config</a> to disable API's which you don't want to keep in your application.</p>\n"}], "owner": {"reputation": 1614, "user_id": 6240026, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b329d2fbbe2e05bf4d02115fda970969?s=128&d=identicon&r=PG&f=1", "display_name": "yugantar kumar", "link": "https://stackoverflow.com/users/6240026/yugantar-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572425830, "creation_date": 1483561674, "question_id": 41472664, "link": "https://stackoverflow.com/questions/41472664/disable-any-api-exposed-by-flask-security", "title": "Disable any API exposed by flask-security", "body": "<p>I was trying to implement login functionality in my app. I started with using flask-security for basic api exposed by flask-security like <code>register, login, logout</code> etc. </p>\n\n<p>While doing this, I realised that some of the API's provided by <code>flask-security</code> is not of my use. So for that, I was looking to disable some of the API but didn't get anything related to that.</p>\n\n<p>I saw <a href=\"https://pythonhosted.org/Flask-Security/configuration.html\" rel=\"nofollow noreferrer\">flask-security-config</a> too, but there is no way to disable API which is exposed by flask-security.</p>\n\n<p>I am new to <a href=\"http://flask.pocoo.org/docs/0.12/\" rel=\"nofollow noreferrer\">flask</a> &amp; <a href=\"https://pythonhosted.org/Flask-Security/\" rel=\"nofollow noreferrer\">flask-security</a> &amp; struggled a lot but didn't get sucess. Any useful suggestion will be very helpful.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "xpath", "scrapy", "web-crawler"], "comments": [{"owner": {"reputation": 8949, "user_id": 3270427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8nv26.jpg?s=128&g=1", "display_name": "McNets", "link": "https://stackoverflow.com/users/3270427/mcnets"}, "edited": false, "score": 0, "creation_date": 1483561530, "post_id": 41472582, "comment_id": 70151007, "body": "<a href=\"http://stackoverflow.com/search?q=Scrapy+csv\">stackoverflow.com/search?q=Scrapy+csv</a>"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1483562037, "post_id": 41472582, "comment_id": 70151222, "body": "so what&#39;s the problem?"}, {"owner": {"reputation": 115, "user_id": 7376051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8820583b6a8796915c9e59d536be271?s=128&d=identicon&r=PG&f=1", "display_name": "thaneofcawdor", "link": "https://stackoverflow.com/users/7376051/thaneofcawdor"}, "reply_to_user": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1483562259, "post_id": 41472582, "comment_id": 70151339, "body": "@eLRuLL Added more to make that clear"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1483562571, "post_id": 41472582, "comment_id": 70151490, "body": "I still don&#39;t understand. What do you mean with &quot;<i>hobby product information from different websites</i>&quot;. If you can&#39;t format the table correctly, try creating a simpler example with similar structure. Also please specify which parts of the html you want to get."}, {"owner": {"reputation": 115, "user_id": 7376051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8820583b6a8796915c9e59d536be271?s=128&d=identicon&r=PG&f=1", "display_name": "thaneofcawdor", "link": "https://stackoverflow.com/users/7376051/thaneofcawdor"}, "edited": false, "score": 0, "creation_date": 1483564094, "post_id": 41472582, "comment_id": 70152210, "body": "More clarity added. Does that help?"}], "answers": [{"tags": [], "owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "is_accepted": true, "score": 0, "last_activity_date": 1483577567, "creation_date": 1483577567, "answer_id": 41475640, "question_id": 41472582, "link": "https://stackoverflow.com/questions/41472582/first-time-using-scrapy-trying-to-crawl-a-set-of-tables/41475640#41475640", "title": "First time using scrapy, trying to crawl a set of tables", "body": "<p>If I understand you correctly you want to extract structured data: row title and row data from that table?</p>\n\n<p>You can achieve this by:  </p>\n\n<ol>\n<li>Extract all rows For each row</li>\n<li>For each row extract a title and rows data</li>\n</ol>\n\n<p>So it's just the matter of using right <code>xpath</code> selectors. For example something like this would do the trick:</p>\n\n<pre><code># find all table rows\nrows = response.xpath(\"//tr\")\nfor row in rows:\n    title = row.xpath(\".//strong/text()\").extract_first()\n    text = ''.join(row.xpath(\".//td/text()\").extract()).strip('. \\n')\n    print(title)\n    print(text)\n    print('-'*80)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>Regular Price:\n$9,072\n--------------------------------------------------------------------------------\nRetail Price:\n$12,350\n--------------------------------------------------------------------------------\nItem Number:\n112555\n--------------------------------------------------------------------------------\nRegular Price:\n$9,072\n--------------------------------------------------------------------------------\nRetail Price:\n$12,350\n--------------------------------------------------------------------------------\nItem Number:\n112555\n--------------------------------------------------------------------------------\nManufacturer:\nRolex\n--------------------------------------------------------------------------------\nModel Name/Number:\nYacht-Master 116622\n--------------------------------------------------------------------------------\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7376051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8820583b6a8796915c9e59d536be271?s=128&d=identicon&r=PG&f=1", "display_name": "thaneofcawdor", "link": "https://stackoverflow.com/users/7376051/thaneofcawdor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 41475640, "answer_count": 1, "score": 0, "last_activity_date": 1483577567, "creation_date": 1483561252, "last_edit_date": 1483577026, "question_id": 41472582, "link": "https://stackoverflow.com/questions/41472582/first-time-using-scrapy-trying-to-crawl-a-set-of-tables", "title": "First time using scrapy, trying to crawl a set of tables", "body": "<p>I am very new to Python (and new to stackoverflow) and have just started with Scrapy. I am looking to grab some hobby product information from different websites. I have read through the tutorial and am feeling pretty lsot. What I want are the attributes of watches that are listed in tables but they all have the same class (\"productTitle\") in the second table.</p>\n\n<pre><code>&lt;table border=\"0\" cellspacing=\"0\" cellpadding=\"4\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td class=\"productTitle creditCardPrice\" valign=\"top\"&gt;\n        &lt;strong&gt;Regular Price:&lt;/strong&gt;\n      &lt;/td&gt; \n      &lt;td valign=\"top\"&gt;$9,072&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;td class=\"productTitle retailPrice\" valign=\"top\"&gt;\n        &lt;strong&gt;Retail Price:&lt;/strong&gt;\n      &lt;/td&gt; \n      &lt;td valign=\"top\"&gt;$12,350&lt;/td&gt; \n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;td class=\"productTitle itemNumber\" valign=\"top\"&gt;\n        &lt;strong&gt;Item Number:&lt;/strong&gt;\n      &lt;/td&gt; \n      &lt;td valign=\"top\"&gt;112555&lt;/td&gt; \n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Second table:</p>\n\n<pre><code>&lt;table border=\"0\" cellpadding=\"4\" cellspacing=\"0\"&gt;\n  &lt;tbody&gt;\n    &lt;tr style=\"height: 15px;\"&gt;\n      &lt;td class=\"productTitle\" style=\"height: 15px;\" valign=\"top\"&gt; .     \n        &lt;strong&gt;Manufacturer:&lt;/strong&gt;\n      &lt;/td&gt; \n      &lt;td style=\"height: 15px;\" valign=\"top\"&gt;Rolex&lt;/td&gt; \n    &lt;/tr&gt;\n    &lt;tr style=\"height: 30px;\"&gt;\n      &lt;td class=\"productTitle\" style=\"height: 30px;\" valign=\"top\"&gt;\n        &lt;strong&gt;Model Name/Number:&lt;/strong&gt;\n      &lt;/td&gt; \n      &lt;td style=\"height: 30px;\" valign=\"top\"&gt;Yacht-Master 116622&lt;/td&gt; \n    &lt;/tr&gt;\n</code></pre>\n\n<p>There are many more rows of data. You can see the example here: <a href=\"https://www.bobswatches.com/rolex-platinum-yacht-master-116622-pre-owned.html\" rel=\"nofollow noreferrer\">https://www.bobswatches.com/rolex-platinum-yacht-master-116622-pre-owned.html</a></p>\n\n<p>My goal is to get all of this data into a .csv file with each column labeled with \"Credit Card Price\", \"Manufacturer\", \"Model Name/Number\" etc. and then crawl my favorite watches from the website and create an sheet with all these details for every watch. But, before I get to the part where the spider moves through different pages, I have to get it to crawl this one page correctly.</p>\n\n<p>I do not see how to write this out using Scrapy. I am bouncing around to several other stackoverflow questions and playing with the tutorial still, but making very slow progress. This is clearly wrong, but where I am atm:</p>\n\n<pre><code>    def parse(self, response):\n    for row in response.selector.xpath('//table'):\n        yield {\n            'text': row.xpath('./td[1]').extract_first(),\n        }\n\n    next_page_url = response.xpath('//li[@class=\"next\"]/a/@href').extract_first()\n    if next_page_url is not None:\n        yield scrapy.Request(response.urljoin(next_page_url))\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1483561393, "post_id": 41472578, "comment_id": 70150930, "body": "@not_a_robot: No, that&#39;s an entirely unrelated question."}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 2, "creation_date": 1483561496, "post_id": 41472578, "comment_id": 70150985, "body": "Nate, there&#39;s an inconsistency in your question: where does 567.89 come from?"}, {"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 1, "creation_date": 1483561521, "post_id": 41472578, "comment_id": 70151002, "body": "What do you mean &quot;end at 567.89&quot;? This number is not in the interval &quot;690.4025 to 3968.85&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6787996, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/f551128257b138ea25d9296b85ac1cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/6787996/nate"}, "edited": false, "score": 0, "creation_date": 1483563032, "post_id": 41472613, "comment_id": 70151705, "body": "Thanks. What I was missing seems to be that arange gives an array <i>up to but not including</i> the specified value, which inflated the &quot;error&quot;."}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "reply_to_user": {"reputation": 85, "user_id": 6787996, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/f551128257b138ea25d9296b85ac1cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/6787996/nate"}, "edited": false, "score": 0, "creation_date": 1483565086, "post_id": 41472613, "comment_id": 70152713, "body": "yeah, it&#39;s like that for almost all ranges in python, except for maybe some pandas stuff."}], "tags": [], "owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "is_accepted": false, "score": 1, "last_activity_date": 1483561403, "creation_date": 1483561403, "answer_id": 41472613, "question_id": 41472578, "link": "https://stackoverflow.com/questions/41472578/is-there-a-way-to-accurately-generate-an-evenly-spaced-array-numpy-arange-giv/41472613#41472613", "title": "Is there a way to accurately generate an evenly-spaced array? numpy.arange() gives me inexact results", "body": "<p>you could just create an int array and then divide:</p>\n\n<pre><code>a = np.arange(6904025, 39688500, 19285) / 10000\n</code></pre>\n\n<p>also, to be clear, the original way you did has a total error on the order of 10^-8 (i.e., summing up all the differences between the int way and the float way), so that way should be more than precise enough.</p>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1483561498, "creation_date": 1483561498, "answer_id": 41472632, "question_id": 41472578, "link": "https://stackoverflow.com/questions/41472578/is-there-a-way-to-accurately-generate-an-evenly-spaced-array-numpy-arange-giv/41472632#41472632", "title": "Is there a way to accurately generate an evenly-spaced array? numpy.arange() gives me inexact results", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.linspace.html\" rel=\"nofollow noreferrer\"><code>numpy.linspace</code></a> is designed for this task:</p>\n\n<pre><code>numpy.linspace(690.4025, 3968.85, num=whatever)\n</code></pre>\n\n<p>where <code>num</code> should be the number of elements you want in your array (including the endpoints), rather than the step size.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1483561963, "post_id": 41472661, "comment_id": 70151185, "body": "And even when the intermediates are exactly representable, <a href=\"http://ideone.com/d9VwBi\" rel=\"nofollow noreferrer\">you can still get rounding errors</a>."}, {"owner": {"reputation": 85, "user_id": 6787996, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/f551128257b138ea25d9296b85ac1cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/6787996/nate"}, "edited": false, "score": 0, "creation_date": 1483562943, "post_id": 41472661, "comment_id": 70151661, "body": "Thanks! This is what I was looking for."}], "tags": [], "owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "is_accepted": false, "score": 2, "last_activity_date": 1483561643, "creation_date": 1483561643, "answer_id": 41472661, "question_id": 41472578, "link": "https://stackoverflow.com/questions/41472578/is-there-a-way-to-accurately-generate-an-evenly-spaced-array-numpy-arange-giv/41472661#41472661", "title": "Is there a way to accurately generate an evenly-spaced array? numpy.arange() gives me inexact results", "body": "<p>You can use <a href=\"https://docs.scipy.org/doc/numpy-1.11.0/reference/generated/numpy.linspace.html\" rel=\"nofollow noreferrer\"><code>numpy.linspace()</code></a> to generate an array whose last element is exactly what you specify. In your example,</p>\n\n<pre><code>linspace(690.4025, 3968.85, (3968.85-690.4025)/1.9285)\n</code></pre>\n\n<p>should do it. Of course, some of the intermediate values may not be exactly representable as floating point numbers, so they might be inexact, but there's no way around that. If you're using 64-bit floats, the inaccuracy is on the order of 10<sup>-15</sup> so it should still be within your tolerance.</p>\n"}, {"tags": [], "owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1483564593, "creation_date": 1483564593, "answer_id": 41473375, "question_id": 41472578, "link": "https://stackoverflow.com/questions/41472578/is-there-a-way-to-accurately-generate-an-evenly-spaced-array-numpy-arange-giv/41473375#41473375", "title": "Is there a way to accurately generate an evenly-spaced array? numpy.arange() gives me inexact results", "body": "<p><code>690.4025+1700*1.9285=3968.8525</code>. So your start,stop,step seems to be irrelevant.</p>\n\n<p>probably <code>arange(690.4025,3969,1.9285)</code> is what you want ?</p>\n\n<pre><code>[  690.4025,   692.331 ,   694.2595, ...,  3964.9955,  3966.924 ,\n    3968.8525]\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6787996, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/f551128257b138ea25d9296b85ac1cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/6787996/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1483564593, "creation_date": 1483561224, "last_edit_date": 1483562348, "question_id": 41472578, "link": "https://stackoverflow.com/questions/41472578/is-there-a-way-to-accurately-generate-an-evenly-spaced-array-numpy-arange-giv", "title": "Is there a way to accurately generate an evenly-spaced array? numpy.arange() gives me inexact results", "body": "<p>I'm attempting to generate an evenly spaced array which needs to be very precise. A specific example would be an array from 690.4025 to 3968.85, in steps of exactly 1.9285. </p>\n\n<p>Using numpy.arange() with floats results in an array which does not end at 3968.85, and there's some sort of weird systematic drift away from the \"true\" values of such an array.</p>\n\n<p>How would you generate this kind of data if precision down to about 0.0001 is required for each value? Thanks in advance.</p>\n"}, {"tags": ["python", "loops", "indexing"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1483563596, "post_id": 41472528, "comment_id": 70151995, "body": "One thing I&#39;d recommend is if this is homework to mention that -&gt; this is a  <i>very</i> common request in college CS programs and you clearly need some additional help. I&#39;d recommend going and seeing a mentor or your professor."}], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "edited": false, "score": 0, "creation_date": 1483561400, "post_id": 41472597, "comment_id": 70150935, "body": "umm, if that were the case, the beginning of his outputs would be the same, and the ends would differ...?"}, {"owner": {"reputation": 129, "user_id": 7290548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1275427202524730/picture?type=large", "display_name": "Enigma", "link": "https://stackoverflow.com/users/7290548/enigma"}, "edited": false, "score": 0, "creation_date": 1483561464, "post_id": 41472597, "comment_id": 70150968, "body": "Doesn&#39;t really change a thing"}], "tags": [], "owner": {"reputation": 74, "user_id": 6778001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsVdC.jpg?s=128&g=1", "display_name": "Jarek", "link": "https://stackoverflow.com/users/6778001/jarek"}, "is_accepted": false, "score": 0, "last_activity_date": 1483561321, "creation_date": 1483561321, "answer_id": 41472597, "question_id": 41472528, "link": "https://stackoverflow.com/questions/41472528/cant-control-loop-index/41472597#41472597", "title": "can&#39;t control loop index", "body": "<p>Most likely the problem is in usage of <code>range</code> in:</p>\n\n<pre><code>for flight in range(0,s_count-1):\n    for check in range(0,count-1):\n</code></pre>\n\n<p>If you want to have numbers from 0 to s_count, excluding s_count, you should just type <code>range(s_count)</code>. Same for the second line.</p>\n\n<p>Example:</p>\n\n<pre><code>In [1]: list(range(5))\n[0, 1, 2, 3, 4]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1400, "user_id": 1030592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890c54cfa80230239d633e742a6734bf?s=128&d=identicon&r=PG", "display_name": "deweyredman", "link": "https://stackoverflow.com/users/1030592/deweyredman"}, "is_accepted": false, "score": 0, "last_activity_date": 1483562477, "creation_date": 1483562477, "answer_id": 41472863, "question_id": 41472528, "link": "https://stackoverflow.com/questions/41472528/cant-control-loop-index/41472863#41472863", "title": "can&#39;t control loop index", "body": "<p>try this out:</p>\n\n<pre><code>s_count=5\ncount=7\nrmr = [[2, 4], [2, 3], [2, 5], [4, 5], [1, 5]]\nsec =[[1, 2, 4.0, 100.0],[2, 3, 1.5, 500.0],[2, 4, 10.0, 700.0],[2, 5, 5.75, 1500.0],[3, 4, 11.4, 200.0],[4, 5, 10.5, 750.0],[4, 6, 6.75, 550.0]]\n\n\n\nfor flight in range(0,s_count):\n    for check in range(0,count):\n       if str(rmr[flight][0])==str(sec[check][0]) and str(rmr[flight][1])==str(sec[check][1]):\n            print 'Direct flight exist from '+str(sec[check][0])+' to '+str(sec[check][1])+', price'+str(sec[check][3])+', flight duration '+str(sec[check][2])+'\\n'         \n            break\n       if check == count-1 and flight == s_count-1:\n            print 'There is no Direct flight from '+str(rmr[flight][0])+' to '+str(rmr[flight][1])+'\\n'\n</code></pre>\n\n<p>This basically check to make sure that you have a match between rmr and sec, and then prints the result.  If you're at the end of the loop, you know there is no match, so you can indicate that.</p>\n\n<p>This can obviously be cleaned up and optimized a bit, but it does solve your immediate problem I believe.</p>\n"}, {"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 2, "creation_date": 1483563029, "post_id": 41472947, "comment_id": 70151704, "body": "One thing I&#39;d recommend: <code>print &#39;Direct flight exist from {0} to {1}, price {3}, duration {2}&#39;.format(*sec[check])</code> &amp; <code>print &#39;There is no Direct flight from {} to {}&#39;.format(*rmr[flight])</code> cleans it up quite nicely via unpacking."}, {"owner": {"reputation": 129, "user_id": 7290548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1275427202524730/picture?type=large", "display_name": "Enigma", "link": "https://stackoverflow.com/users/7290548/enigma"}, "edited": false, "score": 0, "creation_date": 1483563494, "post_id": 41472947, "comment_id": 70151936, "body": "actually I know that there is no need for the <code>str()</code> but I added it later to check if it would matter at all, great help thanks"}], "tags": [], "owner": {"reputation": 3810, "user_id": 689423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3bcf801b66d96d74fcecabb64943ba?s=128&d=identicon&r=PG", "display_name": "unpythonic", "link": "https://stackoverflow.com/users/689423/unpythonic"}, "is_accepted": true, "score": 2, "last_activity_date": 1483573635, "last_edit_date": 1483573635, "creation_date": 1483562805, "answer_id": 41472947, "question_id": 41472528, "link": "https://stackoverflow.com/questions/41472528/cant-control-loop-index/41472947#41472947", "title": "can&#39;t control loop index", "body": "<p>You don't have a problem with your loop indices, you have a problems with:</p>\n\n<ul>\n<li>wrong conditional: you want <code>and</code> not <code>or</code></li>\n<li>wrong placement of break: you want to stop when you find a direct</li>\n<li>wrong use of else</li>\n<li>no reason for using <code>str</code> on everything</li>\n</ul>\n\n<p>This will work:</p>\n\n<pre><code>for flight in range(0,s_count-1):\n    found = False\n    for check in range(0,count-1):\n       if rmr[flight][0]==sec[check][0] and rmr[flight][1]==sec[check][1]:\n            found = True\n            print 'Direct flight exist from {0} to {1}, price {3}, duration {2}'.format(*sec[check])\n            break\n    if not found:\n        print 'There is no Direct flight from {} to {}'.format(*rmr[flight])\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 7290548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1275427202524730/picture?type=large", "display_name": "Enigma", "link": "https://stackoverflow.com/users/7290548/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 41472947, "answer_count": 3, "score": -1, "last_activity_date": 1483573635, "creation_date": 1483561004, "question_id": 41472528, "link": "https://stackoverflow.com/questions/41472528/cant-control-loop-index", "title": "can&#39;t control loop index", "body": "<pre><code>for flight in range(0,s_count-1):\n    for check in range(0,count-1):\n       if str(rmr[flight][0])==str(sec[check][0]) or str(rmr[flight][1])==str(sec[check][1]):\n            print  'Direct flight exist from '+str(sec[check][0])+' to '+str(sec[check][1])+', price'+str(sec[check][3])+', flight duration '+str(sec[check][2])+'\\n'\n       else:\n            print  'There is no Direct flight from '+str(sec[check][0])+' to '+str(sec[check][1])+'\\n'\n     break\n</code></pre>\n\n<blockquote>\n  <p>s_count=6</p>\n  \n  <p>count=8</p>\n</blockquote>\n\n<p>count and s_count are numbers representing how many lines there is in two certain files that I took information from.\nThe information basically are the following</p>\n\n<blockquote>\n  <p>rmr = [[2, 4], [2, 3], [2, 5], [4, 5], [1, 5]]</p>\n</blockquote>\n\n<p><code>rmr[x][0]</code> represents 'Origin' and <code>rmr[x][1]</code> represents 'Destination'</p>\n\n<blockquote>\n  <p>sec =</p>\n  \n  <p>[</p>\n  \n  <p>[1, 2, 4.0, 100.0], </p>\n  \n  <p>[2, 3, 1.5, 500.0], </p>\n  \n  <p>[2, 4, 10.0, 700.0], </p>\n  \n  <p>[2, 5, 5.75, 1500.0], </p>\n  \n  <p>[3, 4, 11.4, 200.0], </p>\n  \n  <p>[4, 5, 10.5, 750.0], </p>\n  \n  <p>[4, 6, 6.75, 550.0]</p>\n  \n  <p>]</p>\n</blockquote>\n\n<p><code>sec[x][0]</code> represents 'Origin'\n<code>sec[x][1]</code> represents 'Destination'\n<code>sec[x][2]</code> represents 'Time'\n<code>sec[x][3]</code> represents 'Cost'</p>\n\n<p>The whole concept of what I am trying to do about flights' information. According to <code>rmr[0]</code> \"<em>Route Matching Request</em>\" a costumer would like go from 'Origin' 2 to 'Destination' 4</p>\n\n<p>and So if we go to <code>sec[2]</code> we will see that this flight is available, it would take 10 units of time and cost 700, and so that's what the out should say:</p>\n\n<blockquote>\n  <p>Direct flight exist from 2 to 4, price 700.0, flight duration 10.0</p>\n</blockquote>\n\n<p>So I ran this code that I have and this is the output </p>\n\n<blockquote>\n  <p>There is no Direct flight from 1 to 2</p>\n  \n  <p>Direct flight exist from 2 to 3, price500.0, flight duration 1.5</p>\n  \n  <p>Direct flight exist from 2 to 4, price700.0, flight duration 10.0</p>\n  \n  <p>Direct flight exist from 2 to 5, price1500.0, flight duration 5.75</p>\n  \n  <p>Direct flight exist from 3 to 4, price200.0, flight duration 11.4</p>\n  \n  <p>There is no Direct flight from 4 to 5</p>\n  \n  <p>There is no Direct flight from 4 to 6</p>\n</blockquote>\n\n<p>While what I expected was</p>\n\n<blockquote>\n  <p>Direct flight exist from 2 to 4, price700.0, flight duration 10.0</p>\n  \n  <p>Direct flight exist from 2 to 3, price500.0, flight duration 1.5</p>\n  \n  <p>Direct flight exist from 2 to 5, price1500.0, flight duration 5.75</p>\n  \n  <p>Direct flight exist from 4 to 5, price750.0, flight duration 10.5</p>\n  \n  <p>There is no Direct flight from 1 to 5</p>\n</blockquote>\n"}, {"tags": ["python", "django", "mongodb", "pymongo", "pymodm"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 3176998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1741381757/picture?type=large", "display_name": "Kristian", "link": "https://stackoverflow.com/users/3176998/kristian"}, "edited": false, "score": 0, "creation_date": 1483604257, "post_id": 41479753, "comment_id": 70165504, "body": "Thank you for the answer I will vote for your issue and hope it will be fixed soon."}], "tags": [], "owner": {"reputation": 1888, "user_id": 3271558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfbgY.png?s=128&g=1", "display_name": "Steve Rossiter", "link": "https://stackoverflow.com/users/3271558/steve-rossiter"}, "is_accepted": false, "score": 1, "last_activity_date": 1483602513, "creation_date": 1483602513, "answer_id": 41479753, "question_id": 41472478, "link": "https://stackoverflow.com/questions/41472478/how-to-drop-mongodb-field-using-pymodm-and-django/41479753#41479753", "title": "How to drop MongoDB field using PyMODM and Django", "body": "<p>I found the same issue and understand this to be a bug. I have <a href=\"https://jira.mongodb.org/browse/PYMODM-48\" rel=\"nofollow noreferrer\">created an issue to help reslove it.</a></p>\n\n<p>If you needed to remove all the <code>last_name</code> fields from your User collection you could use the underlying pymongo connection like so:</p>\n\n<pre><code>pymodm.connection._get_db()['user'].update_many({}, {\"$unset\":{\"last_name\":\"\"}})\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 3176998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1741381757/picture?type=large", "display_name": "Kristian", "link": "https://stackoverflow.com/users/3176998/kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523043672, "creation_date": 1483560786, "last_edit_date": 1523043672, "question_id": 41472478, "link": "https://stackoverflow.com/questions/41472478/how-to-drop-mongodb-field-using-pymodm-and-django", "title": "How to drop MongoDB field using PyMODM and Django", "body": "<p>How can I drop/delete a field from the document when it is already created using <a href=\"https://pymodm.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">PyMoDM</a>?</p>\n\n<p>I have following model:</p>\n\n<pre><code>class User(MongoModel):\n    email = fields.EmailField(required=True)\n    password = fields.CharField(required=True)\n    first_name = fields.CharField(required=True)\n    last_name = fields.CharField(blank=True)\n</code></pre>\n\n<p>I have a user with all the fields. After deleting <code>last_name</code> from the model next \"get\" throws an error: <code>ValueError: Unrecognized field name 'last_name'</code></p>\n\n<pre><code>user = User.objects.get({'email': email.lower()})\n</code></pre>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1483560973, "post_id": 41472457, "comment_id": 70150717, "body": "<code>json_list = [{&#39;result&#39;: {&#39;qa&#39;: q[&#39;result&#39;][&#39;status&#39;], &#39;dev&#39;: d[&#39;result&#39;][&#39;status&#39;], &#39;prod&#39;: p[&#39;result&#39;][&#39;status&#39;]}} for q, d, p in zip(qa, dev, prod)]</code>"}], "owner": {"reputation": 1814, "user_id": 4971053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ac0ab017afbb53c5fbacfe695b30c6eb?s=128&d=identicon&r=PG&f=1", "display_name": "teddybear123", "link": "https://stackoverflow.com/users/4971053/teddybear123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1483560691, "creation_date": 1483560691, "question_id": 41472457, "link": "https://stackoverflow.com/questions/41472457/how-to-cronstruct-complex-data-structure-in-python-with-zipping-multiple-data-se", "title": "How to cronstruct complex data structure in python with zipping multiple data set", "body": "<p>I have 3 data sets from a json response and would have to merge and restructure them from my end. The 3 data sets are identical in keys and length.    </p>\n\n<p><strong><em>dev.json</em></strong></p>\n\n<pre><code>   [  \n       {  \n          \"result\":{  \n             \"duration\":0.0,\n             \"status\":\"passed\"\n          }\n       },\n        {  \n          \"result\":{  \n             \"duration\":0.0,\n             \"status\":\"passed\"\n          }\n       }\n    ]\n</code></pre>\n\n<p><strong><em>qa.json</em></strong></p>\n\n<pre><code>   [  \n       {  \n          \"result\":{  \n             \"duration\":0.0,\n             \"status\":\"passed\"\n          }\n       },\n        {  \n          \"result\":{  \n             \"duration\":0.0,\n             \"status\":\"passed\"\n          }\n       }\n    ]\n</code></pre>\n\n<p><strong><em>prod.json</em></strong></p>\n\n<pre><code>   [  \n       {  \n          \"result\":{  \n             \"duration\":0.0,\n             \"status\":\"failed\"\n          }\n       },\n        {  \n          \"result\":{  \n             \"duration\":0.0,\n             \"status\":\"failed\"\n          }\n       }\n    ]\n</code></pre>\n\n<p><strong>I would like to restructure them into this format:</strong></p>\n\n<pre><code>[  \n   {  \n      \"result\":{  \n         \"qa\":\"passed\",\n         \"dev\":\"passed\",\n         \"prod\":\"failed\"\n      }\n   },\n   {  \n      \"result\":{  \n         \"qa\":\"passed\",\n         \"dev\":\"passed\",\n         \"prod\":\"failed\"\n      }\n   }\n]\n</code></pre>\n\n<p><strong>What i've done so far:</strong></p>\n\n<pre><code>with open('qa.json') as data_file:    \n    qa = json.load(data_file)\n\nwith open('dev.json') as data_file:    \n    dev = json.load(data_file)\n\nwith open('prod.json') as data_file:    \n    prod= json.load(data_file)\n\n#I'm not good with python but this is what i've gotten so far and obviously incorrect\njson_list = [dict(list(x[0].items()) + list(x[1].items() + list(x[3].items())) for x in zip(qa,dev,prod)]\n</code></pre>\n\n<p>Coming from a javascript background, I'm trying to figure out how to loop through the list objects and assign a new key </p>\n"}, {"tags": ["python", "loops", "for-loop", "random", "selection"], "answers": [{"tags": [], "owner": {"reputation": 2435, "user_id": 1231055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k7x3R.png?s=128&g=1", "display_name": "Brad Campbell", "link": "https://stackoverflow.com/users/1231055/brad-campbell"}, "is_accepted": true, "score": 1, "last_activity_date": 1483561363, "creation_date": 1483561363, "answer_id": 41472605, "question_id": 41472369, "link": "https://stackoverflow.com/questions/41472369/create-list-of-randomly-selected-items-based-on-criteria/41472605#41472605", "title": "Create list of randomly selected items based on criteria", "body": "<p>Setup code</p>\n\n<pre><code>funds = [\"Fund{}\".format(i+1) for i in range(7)]\nstrategies = ['Activist']*4 + ['Macro']*3\ndf = pd.DataFrame(list(zip(funds, strat)), columns=('FundName', 'Strategy'))\n</code></pre>\n\n<p>You can get a list of strategies from the data frame</p>\n\n<pre><code>all_strategies = set(df['Strategy'])\n</code></pre>\n\n<p>You can then get all of the fund names that match a given strategy like this:</p>\n\n<pre><code>my_fund_names = df[df['Strategy']=='Activist']['FundName'].values\n</code></pre>\n\n<p>Like you have in your question, you can then use np.random.choice to select from <code>my_fund_names</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 7375967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a5c38b01b27bc251a28b4c1e020027?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7375967/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41472605, "answer_count": 1, "score": -1, "last_activity_date": 1483650798, "creation_date": 1483560351, "last_edit_date": 1483650798, "question_id": 41472369, "link": "https://stackoverflow.com/questions/41472369/create-list-of-randomly-selected-items-based-on-criteria", "title": "Create list of randomly selected items based on criteria", "body": "<p>I'm trying to randomly select a list of funds based on their investment strategy.\nFor instance if I have the following dataframe:</p>\n\n<p><strong>FundName/Strategy</strong></p>\n\n<ul>\n<li>Fund1/Activist      </li>\n<li>Fund2/Activist       </li>\n<li>Fund3/Activist       </li>\n<li>Fund4/Activist</li>\n<li>Fund5/Macro        </li>\n<li>Fund6/Macro        </li>\n<li>Fund7/Macro </li>\n</ul>\n\n<p>I would like to randomly select 2 funds from each strategy category. I have 18 strategies and thousands of funds. </p>\n\n<p>I tried the following:</p>\n\n<pre><code> Strategylist={'Activist', 'Macro'}\n\n for x in Strategylist:\n     np.random.choice(df[df.loc[:,'Strategy']==x].FundName,2,replace=False)\n</code></pre>\n\n<p>Ideally, the number of fund selected from each strategy would be flexible. For instance if we select: </p>\n\n<p><strong>Strategy/of funds</strong></p>\n\n<ul>\n<li>Activist/2</li>\n<li>Macro/1</li>\n</ul>\n\n<p>Then each time, I run the loop I would get a unique random selection of funds with 2 random activist funds and 1 random macro fund such as Fund1, Fund3, Fund6 </p>\n"}, {"tags": ["python", "web-scraping", "python-requests", "lxml"], "comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1483560835, "post_id": 41472367, "comment_id": 70150635, "body": "Here is, for example, one of headlines: <code>Complicating &#39;Brexit&#39; Plans, Britain&#39;s Top Envoy to EU Resigns</code>... show what output should be after your parsing"}], "answers": [{"comments": [{"owner": {"reputation": 4857, "user_id": 998537, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/t1FT1.jpg?s=128&g=1", "display_name": "Istiaque Ahmed", "link": "https://stackoverflow.com/users/998537/istiaque-ahmed"}, "edited": false, "score": 0, "creation_date": 1523735308, "post_id": 41472936, "comment_id": 86686111, "body": "What if the <code>class</code> names of the headlines are not known ?"}], "tags": [], "owner": {"reputation": 142, "user_id": 6500957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-49RmKjrls20/AAAAAAAAAAI/AAAAAAAAANU/JJTfpiMwuSE/photo.jpg?sz=128", "display_name": "ethan lee", "link": "https://stackoverflow.com/users/6500957/ethan-lee"}, "is_accepted": true, "score": 3, "last_activity_date": 1571501928, "last_edit_date": 1571501928, "creation_date": 1483562767, "answer_id": 41472936, "question_id": 41472367, "link": "https://stackoverflow.com/questions/41472367/how-to-use-python-to-get-google-news-headlines-and-search-keywords/41472936#41472936", "title": "How to use python to get google news headlines and search keywords?", "body": "<p>Alright I fixed it. </p>\n\n<pre><code>from lxml import html\nimport requests\n\n# Send request to get the web page\nresponse = requests.get('https://news.google.com/news/section?cf=all&amp;pz=1&amp;topic=b&amp;siidp=b458d5455b7379bd8193a061024cd11baa97&amp;ict=ln')\n\n# Check if the request succeeded (response code 200)\nif (response.status_code == 200):\n\n    # Parse the html from the webpage\n    pagehtml = html.fromstring(response.text)\n\n    # search for news headlines\n    news = pagehtml.xpath('//h2[@class=\"esc-lead-article-title\"] \\\n                          /a/span[@class=\"titletext\"]/text()')\n\n    # Print each news item in a new line\n    print(\"\\n \\n\".join(news))\n\ntf = open(\"headlines.txt\", \"w\")\n\ntf.write(\"\\n \\n\".join(news).lower())\n\ntf.close()\n# puts as lower case in text file named headlines\n\nwith open('headlines.txt', 'r') as inF:\n    for line in inF:\n        if 'inflation' in line:\n             print \"\\n\" + \"    \" + line\n# searches for 'inflation' (or whatever query) and prints in indented on a new line\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 6500957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-49RmKjrls20/AAAAAAAAAAI/AAAAAAAAANU/JJTfpiMwuSE/photo.jpg?sz=128", "display_name": "ethan lee", "link": "https://stackoverflow.com/users/6500957/ethan-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6697, "favorite_count": 3, "accepted_answer_id": 41472936, "answer_count": 1, "score": 0, "last_activity_date": 1571501928, "creation_date": 1483560339, "last_edit_date": 1501187591, "question_id": 41472367, "link": "https://stackoverflow.com/questions/41472367/how-to-use-python-to-get-google-news-headlines-and-search-keywords", "title": "How to use python to get google news headlines and search keywords?", "body": "<p>I am working on a project to look through google news headlines and find keywords. </p>\n\n<p>I want it to:\n -put the headlines into a text file\n -remove commas, apostrophes, quotes, punctuation, etc\n -search keywords</p>\n\n<p>This is the code I have so far. I am getting the headlines, I now just need it to parse the keywords from each individual headline.</p>\n\n<pre><code>from lxml import html\nimport requests\n\n# Send request to get the web page\nresponse = requests.get('http://news.google.com')\n\n# Check if the request succeeded (response code 200)\nif (response.status_code == 200):\n\n# Parse the html from the webpage\npagehtml = html.fromstring(response.text)\n\n# search for news headlines\nnews = pagehtml.xpath('//h2[@class=\"esc-lead-article-title\"] \\\n                      /a/span[@class=\"titletext\"]/text()')\n\n# Print each news item in a new line\nprint(\"\\n\".join(news))\n</code></pre>\n"}, {"tags": ["python", "string", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 6206, "user_id": 38611, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eabc9d16eb242f16b504e5f6910a734?s=128&d=identicon&r=PG", "display_name": "jbasko", "link": "https://stackoverflow.com/users/38611/jbasko"}, "edited": false, "score": 1, "creation_date": 1483560468, "post_id": 41472364, "comment_id": 70150445, "body": "Aren&#39;t you by any chance working with a .csv file? Because it looks like one. Where do you get the file from. There is probably a format that the file follows."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1483560750, "post_id": 41472364, "comment_id": 70150592, "body": "you could split according to, say 2 or 3 spaces, then strip and partition your strings. But that&#39;s a specific input AND output format. You&#39;d have to show us your attempts, the question is way too specific."}, {"owner": {"reputation": 2330, "user_id": 2399397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LL1BT.jpg?s=128&g=1", "display_name": "Rafael Aguilar", "link": "https://stackoverflow.com/users/2399397/rafael-aguilar"}, "edited": false, "score": 0, "creation_date": 1483560823, "post_id": 41472364, "comment_id": 70150626, "body": "the fields seems to be wide fixed, aren&#39;t they?. If so, could be pretty easy to do it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 6206, "user_id": 38611, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eabc9d16eb242f16b504e5f6910a734?s=128&d=identicon&r=PG", "display_name": "jbasko", "link": "https://stackoverflow.com/users/38611/jbasko"}, "edited": false, "score": 0, "creation_date": 1483560839, "post_id": 41472364, "comment_id": 70150636, "body": "@jbasko if the big gaps are tabulations (we can&#39;t be sure of that), yes, that&#39;s a CSV file (rather a TSV file). But it&#39;s still unspecfied how to split fields in the sub-fields. Which field keeps the space, which data type is integer which is string..."}, {"owner": {"reputation": 507, "user_id": 1956016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/21ecdf91b9eaafd76a95cd6dc1310821?s=128&d=identicon&r=PG", "display_name": "j5juice", "link": "https://stackoverflow.com/users/1956016/j5juice"}, "edited": false, "score": 0, "creation_date": 1483561213, "post_id": 41472364, "comment_id": 70150850, "body": "It is not a .csv file. It actually comes from a &lt;pre&gt; tag in html that I used BeautifulSoup to pull. I then used splitlines() to get each line into it&#39;s own string within a list. This all works. Now I need it slightly more granular. Most of what I have found doesn&#39;t exactly split it the way I was hoping. Like:         a = [&#39;xyz=123&#39;, &#39;abc=456&#39;]         d = dict(s.split(&#39;=&#39;) for s in a)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483561673, "post_id": 41472364, "comment_id": 70151071, "body": "If it&#39;s in a <code>&lt;pre&gt;</code> tag, whitespaces are preserved, so it looks like you&#39;re actually working with fixed-width data. I assume you have multiple lines similar to the one in your question...are the fields all lined up nicely in columns?"}], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 1956016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/21ecdf91b9eaafd76a95cd6dc1310821?s=128&d=identicon&r=PG", "display_name": "j5juice", "link": "https://stackoverflow.com/users/1956016/j5juice"}, "edited": false, "score": 0, "creation_date": 1483566291, "post_id": 41472691, "comment_id": 70153298, "body": "The first one works great. Exactly what I needed with a little massaging. Hopefully the format doesn&#39;t change, but this will do for the dataset I have currently. Thank you."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 3, "last_activity_date": 1483562502, "last_edit_date": 1483562502, "creation_date": 1483561782, "answer_id": 41472691, "question_id": 41472364, "link": "https://stackoverflow.com/questions/41472364/split-string-from-list-into-a-dictionary/41472691#41472691", "title": "Split string from list into a Dictionary", "body": "<p>The data you've shown appears to be stored in fixed-width fields. If all of the data is in similarly-sized fields, then you can use the slice operator <code>[:]</code> to parse the data.</p>\n\n<p>This program might do what you want:</p>\n\n<pre><code>def parse(s):\n    return {\n        'Date': s[0:9],\n        'Visiting Team': s[9:38].strip(),\n        'Visitor Score': int(s[38:41]),\n        'Home Team': s[41:69].strip(),\n        'Home Score': int(s[69:72]),\n        'Location if Neutral': s[72:].strip(),\n    }\n\nline='02-Jan-17 Penn State                  49 Southern Cal                52 Pasadena CA'\n\nassert parse(line) == {\n    'Date': '02-Jan-17',\n    'Visiting Team': 'Penn State',\n    'Visitor Score': 49,\n    'Home Team': 'Southern Cal',\n    'Home Score': 52,\n    'Location if Neutral': 'Pasadena CA',\n}\n</code></pre>\n\n<p>Another possibility is to use a regular expression to parse your data. Here is an example:</p>\n\n<pre><code>import re\ndef parse(s):\n    m = re.match(r'''\n        (?x)\n        (?P&lt;Date&gt;\\d+-\\w+-\\d+)  \\s+\n        (?P&lt;Visiting_Team&gt;.*?) \\s+\n        (?P&lt;Visitor_Score&gt;\\d+) \\s+\n        (?P&lt;Home_Team&gt;.*?)     \\s+\n        (?P&lt;Home_Score&gt;\\d+)    \\s+\n        (?P&lt;Location_if_Neutral&gt;.*)\n        ''',\n        s)\n    return m.groupdict() if m else dict()\n\nline='02-Jan-17 Penn State                  49 Southern Cal                52 Pasadena CA'\n\nassert parse(line)  == {\n    'Date': '02-Jan-17',\n    'Visiting_Team': 'Penn State',\n    'Visitor_Score': '49',\n    'Home_Team': 'Southern Cal',\n    'Home_Score': '52',\n    'Location_if_Neutral': 'Pasadena CA',\n}\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 1956016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/21ecdf91b9eaafd76a95cd6dc1310821?s=128&d=identicon&r=PG", "display_name": "j5juice", "link": "https://stackoverflow.com/users/1956016/j5juice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "accepted_answer_id": 41472691, "answer_count": 1, "score": -3, "last_activity_date": 1483563565, "creation_date": 1483560330, "question_id": 41472364, "link": "https://stackoverflow.com/questions/41472364/split-string-from-list-into-a-dictionary", "title": "Split string from list into a Dictionary", "body": "<p>I have a question about splitting a string that I have inside of a list and adding it to a dictionary. So I have a strings like this inside my list:</p>\n\n<pre><code>    '02-Jan-17 Penn State                  49 Southern Cal                52 Pasadena CA'\n</code></pre>\n\n<p>What I want to do is to insert that into a dictionary, but I need to split that string and insert it into a dictionary. </p>\n\n<pre><code>    { \n        'Date': '02-Jan-17', \n        'Visiting Team': 'Penn State',\n        'Visitor Score': 49,\n        'Home Team': 'Southern Cal',\n        'Home Score': 52,\n        'Location if Neutral': 'Pasadena CA'\n    }\n</code></pre>\n\n<p>So this is where it gets a little tricky. The location could be blank so I am not sure I can split on the whitespace or not. I would also need to repeat this for every string in my list preferably putting them all in the same dictionary. I am not sure if that is even possible. I am pretty new with Python so any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7375795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67df3111d3d2275a00e680e8bb6a3ede?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7375795/alec"}, "edited": false, "score": 0, "creation_date": 1483563550, "post_id": 41472706, "comment_id": 70151973, "body": "My actual function is more complicated and does need to act on the group as a whole.  I expect some overhead from that, but &gt;1000x for case 3 vs 1?  The example data only has 4500 groups, and making 4500 copies of the <i>entire</i> dataset is 4x faster than case 3"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 11, "user_id": 7375795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67df3111d3d2275a00e680e8bb6a3ede?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7375795/alec"}, "edited": false, "score": 0, "creation_date": 1483563685, "post_id": 41472706, "comment_id": 70152034, "body": "Yes, &#39;apply&#39; can be extremely, extremely slow. I&#39;ve had an apply take 8 hours once. You need to try and vectorize as many operations as you can before you use apply."}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": false, "score": 1, "last_activity_date": 1483561844, "creation_date": 1483561844, "answer_id": 41472706, "question_id": 41472327, "link": "https://stackoverflow.com/questions/41472327/slow-performance-of-pandas-groupby-apply/41472706#41472706", "title": "Slow performance of pandas groupby/apply", "body": "<p><code>apply</code> is a method of last resort and is very slow as it passes the entire dataframe group for each iteration to your custom function. In your specific case, you have no need for apply as you are simply multiplying two columns together. The grouping has no effect here. Try to use vectorized functions first if you can or <code>agg</code> and then <code>transform</code> when grouping.</p>\n\n<p>You can simply do <code>data2['i4'] * data2['x']</code> instead of your groupby and apply.</p>\n\n<pre><code>%timeit result1 = [[[[i4*x4 for (i4, x4) in enumerate(x3)] for x3 in x2] for x2 in x1] for x1 in data1]\n# 100 loops, best of 3: 4.51 ms per loop\n%timeit result2 = data2.groupby(['i1', 'i2', 'i3']).apply(lambda group: group['i4']*group['x'])\n# 1 loop, best of 3: 1.69 s per loop\n%timeit result3 = data3.groupby(level = ['i1', 'i2', 'i3']).apply(lambda group: group['i4']*group['x'])\n# 1 loop, best of 3: 3.31 s per loop\n%timeit data2['i4'] * data2['x']\n10000 loops, best of 3: 122 \u00b5s per loop\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7375795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67df3111d3d2275a00e680e8bb6a3ede?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7375795/alec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1847, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483561844, "creation_date": 1483560185, "question_id": 41472327, "link": "https://stackoverflow.com/questions/41472327/slow-performance-of-pandas-groupby-apply", "title": "Slow performance of pandas groupby/apply", "body": "<p>I am noticing very slow performance when calling groupby and apply for a pandas dataframe (>100x slower than using pure python).  My data is a series of nested lists of different lengths but fixed nesting depth, which I convert to a dataframe by adding columns for the list indices:</p>\n\n<pre><code>import pandas as pd\nfrom random import randint\n\n# original data\ndata1   = [[[[randint(0, 10) for i in range(randint(1, 3))] for i in range(randint(1, 5))] for i in range(500)] for i in range(3)]\n# as a DataFrame\ndata2   = pd.DataFrame(\n    [\n        (i1, i2, i3, i4, x4)\n        for (i1, x1) in enumerate(data1)\n        for (i2, x2) in enumerate(x1)\n        for (i3, x3) in enumerate(x2)\n        for (i4, x4) in enumerate(x3)\n    ],\n    columns = ['i1', 'i2', 'i3', 'i4', 'x']\n)\n# with indexing\ndata3   = data2.set_index(['i1', 'i2', 'i3']).sort_index()\n</code></pre>\n\n<p>Example data:</p>\n\n<pre><code>&gt;&gt;&gt; data3\n           i4   x\ni1 i2  i3        \n0  0   0    0   8\n       0    1   0\n       0    2   4\n       1    0   4\n       2    0   7\n       3    0   6\n       4    0  10\n       4    1   1\n       4    2   8\n   1   0    0   8\n       0    1   9\n       0    2   1\n       1    0   5\n       2    0   9\n   2   0    0   1\n       1    0   1\n       1    1   4\n       1    2   0\n       2    0   6\n       2    1  10\n       2    2   8\n       3    0   4\n       3    1   5\n       4    0   3\n       4    1   6\n   3   0    0   9\n       0    1   8\n       0    2   7\n       1    0   2\n       1    1   9\n...        ..  ..\n2  495 0    0   1\n       0    1   6\n       0    2   5\n       1    0   1\n       1    1   8\n       1    2   6\n   496 0    0   4\n       0    1   8\n       0    2   3\n   497 0    0   3\n       0    1  10\n       1    0   9\n       2    0   6\n       2    1   1\n       2    2   3\n       3    0   0\n       4    0  10\n   498 0    0   9\n       0    1   1\n       1    0   2\n       1    1  10\n       2    0   2\n       2    1   2\n       2    2   2\n       3    0   9\n   499 0    0   0\n       0    1   2\n       1    0   2\n       1    1   8\n       2    0   6\n\n[8901 rows x 2 columns]\n</code></pre>\n\n<p>I want to apply a function on the inner most list.  In the case below, the function operates on each row individually, but my real code would need to use the group as a whole, so groupby/apply is needed.</p>\n\n<pre><code>%timeit result1 = [[[[i4*x4 for (i4, x4) in enumerate(x3)] for x3 in x2] for x2 in x1] for x1 in data1]\n# 100 loops, best of 3: 7.52 ms per loop\n%timeit result2 = data2.groupby(['i1', 'i2', 'i3']).apply(lambda group: group['i4']*group['x'])\n# 1 loop, best of 3: 4.02 s per loop\n%timeit result3 = data3.groupby(level = ['i1', 'i2', 'i3']).apply(lambda group: group['i4']*group['x'])\n# 1 loop, best of 3: 8.86 s per loop\n</code></pre>\n\n<p>The code using pandas is orders of magnitude slower than working with the lists directly.  Could someone point out what I am doing wrong?  I am using pandas 0.18.1.</p>\n"}, {"tags": ["python", "string", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1483560115, "post_id": 41472234, "comment_id": 70150298, "body": "What is the difference between the first and the second frames?"}, {"owner": {"reputation": 35644, "user_id": 4895725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4e5cb5b1f211efd656044dfb0174f7?s=128&d=identicon&r=PG&f=1", "display_name": "lmo", "link": "https://stackoverflow.com/users/4895725/lmo"}, "edited": false, "score": 0, "creation_date": 1483560267, "post_id": 41472234, "comment_id": 70150369, "body": "To follow up, it would be helpful if you provided a small, reproducible example to illustrate your problem. Take a look at <a href=\"http://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">this post</a> for tips."}, {"owner": {"reputation": 1905, "user_id": 4114372, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b374a0395b39b278373c21b5c6840d1b?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/4114372/john-doe"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1483560319, "post_id": 41472234, "comment_id": 70150389, "body": "The second is a dataframe conformed of all the sentences of the document, carrying out their respective id. @DYZ"}], "answers": [{"comments": [{"owner": {"reputation": 1905, "user_id": 4114372, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b374a0395b39b278373c21b5c6840d1b?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/4114372/john-doe"}, "edited": false, "score": 0, "creation_date": 1483560616, "post_id": 41472372, "comment_id": 70150514, "body": "Also, I would like to split the text by sentence with nltk, spliting by period is fine. Nevertheless, it is not going to produce the same results as nltk function."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 1905, "user_id": 4114372, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b374a0395b39b278373c21b5c6840d1b?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/4114372/john-doe"}, "edited": false, "score": 1, "creation_date": 1483561206, "post_id": 41472372, "comment_id": 70150845, "body": "Check  my updated answer that uses nltk.sent_tokenize"}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": false, "score": 1, "last_activity_date": 1483561172, "last_edit_date": 1483561172, "creation_date": 1483560361, "answer_id": 41472372, "question_id": 41472234, "link": "https://stackoverflow.com/questions/41472234/how-to-stack-the-wthin-in-a-pandas-dataframe-carrying-out-its-reference/41472372#41472372", "title": "How to stack the wthin in a pandas dataframe carrying out its reference?", "body": "<p>This iterates over each sentences with <code>apply</code> so that it can use <code>nltk.sent_tokenize</code>. Then it converts all the sentences into their own columns using the Series constructor.</p>\n\n<pre><code>df1 = df['text'].apply(lambda x: pd.Series(nltk.sent_tokenize(x)))\ndf1.set_index(df['id']).stack()\n</code></pre>\n\n<h3>Example with fake data</h3>\n\n<pre><code>df=pd.DataFrame({'id':['doc1', 'doc2'], 'text' :['This is a sentence. And another. And one more. cheers', \n                                                 'here are more sentences. yipee. woop.']})\n\ndf1 = df['text'].apply(lambda x: pd.Series(nltk.sent_tokenize(x)))\ndf1.set_index(df['id']).stack().reset_index().drop('level_1', axis=1)\n\n     id                         0\n0  doc1       This is a sentence.\n1  doc1              And another.\n2  doc1             And one more.\n3  doc1                    cheers\n4  doc2  here are more sentences.\n5  doc2                    yipee.\n6  doc2                     woop.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1905, "user_id": 4114372, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b374a0395b39b278373c21b5c6840d1b?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/4114372/john-doe"}, "edited": false, "score": 0, "creation_date": 1483561563, "post_id": 41472567, "comment_id": 70151022, "body": "This actually worked. Thank you very much!, could you provide an explanation about the stack() usage and the reset_index?."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 1905, "user_id": 4114372, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b374a0395b39b278373c21b5c6840d1b?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/4114372/john-doe"}, "edited": false, "score": 1, "creation_date": 1483562291, "post_id": 41472567, "comment_id": 70151358, "body": "<code>.stack()</code> replaces Series column indexes with DataFrame row indexes, essentially &quot;transposing&quot; the Series. <code>.reset_index()</code> converts the second level of indexes into a column and then drops it."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1483561784, "last_edit_date": 1495542830, "creation_date": 1483561185, "answer_id": 41472567, "question_id": 41472234, "link": "https://stackoverflow.com/questions/41472234/how-to-stack-the-wthin-in-a-pandas-dataframe-carrying-out-its-reference/41472567#41472567", "title": "How to stack the wthin in a pandas dataframe carrying out its reference?", "body": "<p>There is a solution to the problem that is similar to yours here: <a href=\"https://stackoverflow.com/questions/27263805/pandas-when-cell-contents-are-lists-create-a-row-for-each-element-in-the-list\">pandas: When cell contents are lists, create a row for each element in the list</a>. Here's my interpretation of it with respect to your particular task:</p>\n\n<pre><code>df['sents'] = df['text'].apply(lambda x: nltk.sent_tokenize(x))\ns = df.apply(lambda x: pd.Series(x['sents']), axis=1).stack().\\\n                                 reset_index(level=1, drop=True)\ns.name = 'sents'\ndf = df.drop(['sents','text'], axis=1).join(s)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6415978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1b58ea28b66f7c6e229efaf2530ac6?s=128&d=identicon&r=PG&f=1", "display_name": "Bray", "link": "https://stackoverflow.com/users/6415978/bray"}, "is_accepted": false, "score": 1, "last_activity_date": 1483562482, "creation_date": 1483562482, "answer_id": 41472864, "question_id": 41472234, "link": "https://stackoverflow.com/questions/41472234/how-to-stack-the-wthin-in-a-pandas-dataframe-carrying-out-its-reference/41472864#41472864", "title": "How to stack the wthin in a pandas dataframe carrying out its reference?", "body": "<p>I think you would find this a lot easier if you kept your corps not in pandas. Here is my solution. I fit it back into a pandas data frame in the end. I think this is probably the most scalable solution.</p>\n\n<pre><code>def stack(one, two):\n    sp = two.split(\".\")\n    return [(one, a.strip()) for a in sp if len(a.strip()) &gt; 0]\n\nst = sum(map(stack, df['id'].tolist(),df['text'].tolist()),[])\n\ndf2 = pd.DataFrame(st)\n\ndf2.columns = ['id','text']\n</code></pre>\n\n<p>If  you want to add a sentence Id column you can make a small tweak. </p>\n\n<pre><code>def stack(one, two):\n    sp = two.split(\".\")\n    return [(one, b, a.strip()) for a,b in zip(sp,xrange(1,len(sp)+1)) if len(a.strip()) &gt; 0]\n\nst = sum(map(stack, df['id'].tolist(),df['text'].tolist()),[])\n\ndf2 = pd.DataFrame(gen)\n\ndf2.columns = ['id','sentence_id','text']\n</code></pre>\n"}], "owner": {"reputation": 1905, "user_id": 4114372, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b374a0395b39b278373c21b5c6840d1b?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/4114372/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 41472567, "answer_count": 3, "score": 1, "last_activity_date": 1483562482, "creation_date": 1483559853, "question_id": 41472234, "link": "https://stackoverflow.com/questions/41472234/how-to-stack-the-wthin-in-a-pandas-dataframe-carrying-out-its-reference", "title": "How to stack the wthin in a pandas dataframe carrying out its reference?", "body": "<p>I have a large pandas dataframe with a lot of documents:</p>\n\n<pre><code>    id  text\n1   doc2    Google i...\n2   doc3    Amazon...\n3   doc4    This was...\n...\nn   docN    nice camara...\n</code></pre>\n\n<p><strong>How can I stack all the documents into sentences carrying out their respective id?:</strong></p>\n\n<pre><code>    id  text\n1   doc1   Google is a great company.\n2   doc1   It is in silicon valley.\n3   doc1   Their search engine is the best\n4   doc2   Amazon is a great store.\n5   doc2   it is located in Seattle.\n6   doc2   its new product is alexa. \n5   doc2   its expensive.\n5   doc3   This was a great product.\n...\nn   docN   nice camara I really liked it.\n</code></pre>\n\n<p>I tried to:</p>\n\n<pre><code>import nltk\ndef sentence(document):\n    sentences = nltk.sent_tokenize(document.strip(' '))\n    return sentences\n\n\ndf['sentece'] = df['text'].apply(sentence)\ndf.stack(level=0)\n</code></pre>\n\n<p>However, it did not worked. Any idea of how to stack the sentences carrying out their id of provenance?.</p>\n"}]