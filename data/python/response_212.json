[{"tags": ["python", "pyqt5"], "comments": [{"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548893050, "post_id": 54451416, "comment_id": 95711257, "body": "Please clarify: a) you are using QT, right? b) which version of QT? Edit your question, add tags. Help community to help you"}, {"owner": {"reputation": 9, "user_id": 8055917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ebd8bd1753abb9c40fe781e9c1a1404?s=128&d=identicon&r=PG", "display_name": "user8055917", "link": "https://stackoverflow.com/users/8055917/user8055917"}, "reply_to_user": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548894270, "post_id": 54451416, "comment_id": 95711562, "body": "thanks for reminding me and i&#39;m using pyqt5 @AlexYu"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1548950709, "post_id": 54451416, "comment_id": 95737320, "body": "Please post a minimal example that can demonstrate your problem."}], "answers": [{"tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1548978966, "creation_date": 1548978966, "answer_id": 54470990, "question_id": 54451416, "link": "https://stackoverflow.com/questions/54451416/qmainwindow-disappears-when-called-from-another-qmainwindow/54470990#54470990", "title": "QMainWindow disappears when called from another QMainWindow", "body": "<p>Not quite sure what and where you want to import from, but try the example below:</p>\n\n<p>main.py</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\nfrom MainWindow_1 import Ui_MainWindow\nfrom MainWindow_6 import Ui_MainWindow_6\n\n\nclass Window2(QtWidgets.QMainWindow, Ui_MainWindow_6):\n    def __init__(self):\n        super().__init__()\n\n        self.setupUi_6(self)\n\n        self.btn2 = QtWidgets.QPushButton(\"import \\n first window\", self)\n        self.btn2.setGeometry(5, 5, 70, 70)\n\n\nclass Window(QtWidgets.QMainWindow, Ui_MainWindow):\n    def __init__(self):\n        super().__init__()\n\n        self.setupUi(self)\n\n        btn = QtWidgets.QPushButton(\"import \\n second window\", self)\n        btn.setGeometry(50, 50, 100, 100)\n        btn.clicked.connect(self.on_clicked_1)\n\n    def on_clicked_1(self):\n        self.window2 = Window2()\n        self.window2.btn2.clicked.connect(self.on_clicked_2)\n        self.hide()\n        self.window2.show()\n\n    def on_clicked_2(self):\n        self.window2.hide()\n        self.show()\n\n\nif __name__ == '__main__':  \n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = Window()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>MainWindow_1.py</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Ui_MainWindow(object):\n\n    def setupUi(self, MainWindow):\n        MainWindow.setObjectName(\"MainWindow\")\n        MainWindow.resize(1419, 768)\n        icon = QtGui.QIcon()\n        icon.addPixmap(QtGui.QPixmap(\"D:/_Qt/img/py-qt.png\"), # \":/newPrefix/snooker1.png\"\n        QtGui.QIcon.Normal, QtGui.QIcon.Off)\n        MainWindow.setWindowIcon(icon)\n        MainWindow.setStyleSheet(\"\"\"\n                    QMainWindow {\n                        background-image: url(D:/_Qt/img/pyqt.jpg);\n                    }\"\"\")               # url(:/newPrefix/snk.jpg)\n\n        MainWindow.setIconSize(QtCore.QSize(38, 38))\n        self.centralwidget = QtWidgets.QWidget(MainWindow)\n</code></pre>\n\n<p>MainWindow_6.py</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Ui_MainWindow_6(object):\n\n    def setupUi_6(self, MainWindow1):\n        MainWindow1.setObjectName(\"MainWindow\")\n        MainWindow1.setFixedSize(462, 488)\n        icon = QtGui.QIcon()\n        icon.addPixmap(QtGui.QPixmap(\"D:/_Qt/img/py-qt.png\"),   # \":/newPrefix/snooker1.png\"\n            QtGui.QIcon.Normal, QtGui.QIcon.Off)\n        MainWindow1.setWindowIcon(icon)\n\n        MainWindow1.setStyleSheet(\"\"\"\n                    QMainWindow {\n                        background-image: url(D:/_Qt/img/cat.jpg);\n                    }\"\"\")               # url(:/newPrefix/snk.jpg)\n\n        self.centralwidget = QtWidgets.QWidget(MainWindow1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LujIE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LujIE.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 9, "user_id": 8055917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ebd8bd1753abb9c40fe781e9c1a1404?s=128&d=identicon&r=PG", "display_name": "user8055917", "link": "https://stackoverflow.com/users/8055917/user8055917"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 54470990, "answer_count": 1, "score": 0, "last_activity_date": 1548978966, "creation_date": 1548892737, "last_edit_date": 1548972811, "question_id": 54451416, "link": "https://stackoverflow.com/questions/54451416/qmainwindow-disappears-when-called-from-another-qmainwindow", "title": "QMainWindow disappears when called from another QMainWindow", "body": "<p>This is second window which i want to import in first window but it will flash and disappear.</p>\n\n<p>from PyQt5 import QtCore, QtGui, QtWidgets</p>\n\n<p>class Ui_MainWindow_6(object):</p>\n\n<pre><code>def setupUi_6(self, MainWindow1):\n    MainWindow1.setObjectName(\"MainWindow\")\n    MainWindow1.setFixedSize(462, 488)\n    icon = QtGui.QIcon()\n    icon.addPixmap(QtGui.QPixmap(\":/newPrefix/snooker1.png\"), \n    QtGui.QIcon.Normal, QtGui.QIcon.Off)\n    MainWindow1.setWindowIcon(icon)\n    MainWindow1.setStyleSheet(\"QMainWindow{\\n\"\n                             \"background-image: url(:/newPrefix/snk.jpg);\\n\"\n                             \"}\")\n    self.centralwidget = QtWidgets.QWidget(MainWindow1)\n</code></pre>\n\n<p>if <strong>name</strong> == \"<strong>main</strong>\":\n    import sys</p>\n\n<pre><code>app = QtWidgets.QApplication(sys.argv)\nMainWindow1 = QtWidgets.QMainWindow()\nui = Ui_MainWindow_6()\nui.setupUi_6(MainWindow1)\nMainWindow1.show()\nsys.exit(app.exec_())\n</code></pre>\n\n<p>This is my first window:</p>\n\n<p>class Ui_MainWindow(object):</p>\n\n<pre><code>def setupUi(self, MainWindow):\n    MainWindow.setObjectName(\"MainWindow\")\n    MainWindow.resize(1419, 768)\n    icon = QtGui.QIcon()\n    icon.addPixmap(QtGui.QPixmap(\":/newPrefix/snooker1.png\"), \n    QtGui.QIcon.Normal, QtGui.QIcon.Off)\n    MainWindow.setWindowIcon(icon)\n    MainWindow.setStyleSheet(\"QMainWindow{\\n\"\n                             \"background-image: url(:/newPrefix/snk.jpg);\\n\"\n                             \"}\\n\"\n                             \"\")\n    MainWindow.setIconSize(QtCore.QSize(38, 38))\n    self.centralwidget = QtWidgets.QWidget(MainWindow)\n</code></pre>\n\n<p>if <strong>name</strong> == \"<strong>main</strong>\":\n    import sys</p>\n\n<pre><code>app = QtWidgets.QApplication(sys.argv)\nMainWindow = QtWidgets.QMainWindow()\nui = Ui_MainWindow()\nui.setupUi(MainWindow)\nMainWindow.show()\nsys.exit(app.exec_())\n</code></pre>\n\n<p>This is the function which i'm using:</p>\n\n<pre><code>def data(self):\n    MainWindow1 = QtWidgets.QMainWindow()\n    ui = Ui_MainWindow_6()\n    ui.setupUi_6(MainWindow1)\n    MainWindow1.show()  \n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "unit-testing", "pycharm"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1548929823, "post_id": 54451406, "comment_id": 95724446, "body": "I assume you don&#39;t have <i>PyCharm <b>Community</b> Edition</i>, as this error seems to be after the point that ran into in <a href=\"https://stackoverflow.com/questions/42989471/run-debug-a-django-applications-unittests-from-the-mouse-right-click-context-me\">&#91;SO&#93;: Run/Debug a Django application&#39;s UnitTests from the mouse right click context menu in PyCharm Community Edition?</a>"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548892669, "creation_date": 1548892669, "question_id": 54451406, "link": "https://stackoverflow.com/questions/54451406/how-do-i-run-django-unittests-in-pycharm", "title": "How do I run Django unittests in PyCharm?", "body": "<p>I'm using Python 3.7, Django, within PyCharm 2018.2.4.  I have loaded my project in PyCharm and have opened my file, ./mainpage/tests.py, which is</p>\n\n<pre><code>from django.test import TestCase\nfrom mainpage.models import ArticleStat, Article\nimport unittest\n\n\nclass TestModels(unittest.TestCase):\n\n    fixtures = ['/mainpage/fixtures/test_data.yaml',]\n\n    # Test saving an article stat that hasn't previously\n    # existed\n    def test_add_articlestat(self):\n        id = 1\n        article = Article.objects.filter(id=id)\n        self.assertTrue(article, \"A pre-condition of this test is that an article exist with id=\" + str(id))\n        articlestat = ArticleStat(article=article,elapsed_time_in_seconds=250,votes=25,comments=15)\n        articlestat.save()\n        article_stat = ArticleStat.objects.get(article=article)\n        self.assertTrue(article_stat, \"Failed to svae article stat properly.\")\n</code></pre>\n\n<p>I want to run this test file in PyCharm.  I go to the \"Run\" menu and select \"Run unit tests for Tests.models.\"  But I get this error</p>\n\n<pre><code>Error running 'Unittests for tests.TestModels': Can't find file where tests.TestModels declared. Make sure it is in project roo\n</code></pre>\n\n<p>What do I need to do in PyCharm in order to run my tests within the IDE?</p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 827, "user_id": 8584957, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d941904aebbae1d37f16e3d573d55d1e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8584957/sebastian"}, "edited": false, "score": 0, "creation_date": 1548894273, "post_id": 54451428, "comment_id": 95711564, "body": "I tried         <code>for start in enumerate(segment_start):             clean = re.sub(&#39;{}.*?{}&#39;.format(start, segment_end), &#39; &#39;, clean)</code>, <code>for start in enumerate(segment_start):             clean = re.sub(&#39;{}.?{}&#39;.format(start, segment_end), &#39; &#39;, clean)</code> and <code>for start in enumerate(segment_start):             clean = re.sub(&#39;{}*?{}&#39;.format(start, segment_end), &#39; &#39;, clean)</code>"}, {"owner": {"reputation": 827, "user_id": 8584957, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d941904aebbae1d37f16e3d573d55d1e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8584957/sebastian"}, "edited": false, "score": 0, "creation_date": 1548894308, "post_id": 54451428, "comment_id": 95711574, "body": "The function is no longer removing any of the phrases"}, {"owner": {"reputation": 167922, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 827, "user_id": 8584957, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d941904aebbae1d37f16e3d573d55d1e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8584957/sebastian"}, "edited": false, "score": 0, "creation_date": 1548894374, "post_id": 54451428, "comment_id": 95711597, "body": "The first one should. I am not at keyboard now to test though. <code>?</code> by itself is \u201c0 or 1\u201d, which won\u2019t stretch between <code>cAt</code> and <code>f</code>; and in 3rd example you left off the dot, so it means \u201cany number of cats followed by <code>f</code>\u201d."}, {"owner": {"reputation": 827, "user_id": 8584957, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d941904aebbae1d37f16e3d573d55d1e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8584957/sebastian"}, "edited": false, "score": 0, "creation_date": 1548894681, "post_id": 54451428, "comment_id": 95711675, "body": "Got it. <code>&#39;{}.*?{}&#39;.format(start, segment_end)</code> was printing <code>(0, &#39; cAt &#39;).*?</code>  <code>(1, &#39; DOG &#39;).*?</code>. I made segment_end into a list with the same length as segment_start and changed the loop to <code>for k, start</code> It&#39;s working"}, {"owner": {"reputation": 167922, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 827, "user_id": 8584957, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d941904aebbae1d37f16e3d573d55d1e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8584957/sebastian"}, "edited": false, "score": 0, "creation_date": 1548894781, "post_id": 54451428, "comment_id": 95711697, "body": "Ah, didn\u2019t read close enough and took it upon faith that your code did what you claimed to do. Remove <code>enumerate</code>."}, {"owner": {"reputation": 827, "user_id": 8584957, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d941904aebbae1d37f16e3d573d55d1e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8584957/sebastian"}, "edited": false, "score": 0, "creation_date": 1548894974, "post_id": 54451428, "comment_id": 95711742, "body": "It&#39;s working. I changed it to <code>for start in enumerate(segment_start):             clean = re.sub(&#39;{}.*?{}&#39;.format(start[1], segment_end), &#39; &#39;, clean)</code>"}], "tags": [], "owner": {"reputation": 167922, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1548892812, "creation_date": 1548892812, "answer_id": 54451428, "question_id": 54451403, "link": "https://stackoverflow.com/questions/54451403/how-to-set-a-stop-criteria-for-regex-search-in-re-sub/54451428#54451428", "title": "How to set a stop criteria for regex search in re.sub()", "body": "<p><code>*</code> is greedy repetition: \"0 or more, as many as possible\". This makes your first match grab everything from <code>cAt</code> to the last <code>f</code>, leaving nothing for the <code>DOG</code> query.</p>\n\n<p>Use <code>*?</code> instead: \"0 or more, as few as possible\". This way, the regexp will be satisfied with \"just\" the bit between <code>cAt</code> and the first <code>f</code>, and the <code>DOG</code> regex will have its day, too.</p>\n"}], "owner": {"reputation": 827, "user_id": 8584957, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d941904aebbae1d37f16e3d573d55d1e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8584957/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 54451428, "answer_count": 1, "score": 0, "last_activity_date": 1548892875, "creation_date": 1548892646, "last_edit_date": 1548892875, "question_id": 54451403, "link": "https://stackoverflow.com/questions/54451403/how-to-set-a-stop-criteria-for-regex-search-in-re-sub", "title": "How to set a stop criteria for regex search in re.sub()", "body": "<p>I have a block of text and I want to remove phrases from it. </p>\n\n<blockquote>\n  <p>\"Adaptation\" means a work based upon the Work, or <code>cAt</code> upon the Work and\n  other pre-existing works, such as a <code>f</code> translation, <code>DOG</code> adaptation,\n  derivative work, arrangement  of music or other alterations of a\n  literary or artistic work, or phonogram <code>f</code> or performance and includes\n  cinematographic adaptations or any</p>\n</blockquote>\n\n<p>I want to remove any text between <code>cAt</code> and <code>f</code>, between <code>DOG</code> and <code>f</code> or between <code>rugrats</code> and <code>f</code>. I highlighted the terms in the text box for ease.</p>\n\n<p>Each phrase (<code>cAt</code>, <code>DOG</code>, <code>rugrats</code>, <code>f</code>) has a space in front and behind it. </p>\n\n<p>Here's my code</p>\n\n<pre><code>clean = `TEXT SHOWN ABOVE`\nsegment_start = [' cAt ', ' DOG ', ' rugrats ']\nsegment_end = ' f ' \n\nfor start in enumerate(segment_start):\n    clean = re.sub('{}.*{}{1}'.format(start, segment_end), ' ', clean)\n</code></pre>\n\n<p>I want to cut out </p>\n\n<blockquote>\n  <p>\"Adaptation\" means a work based upon the Work, or <s><code>cAt</code> upon the Work and\n  other pre-existing works, such as a <code>f</code></s> translation, <s> <code>DOG</code> adaptation,\n  derivative work, arrangement  of music or other alterations of a\n  literary or artistic work, or phonogram <code>f</code> </s> or performance and includes\n  cinematographic adaptations or any</p>\n</blockquote>\n\n<p>And end up with this</p>\n\n<blockquote>\n  <p>\"Adaptation\" means a work based upon the Work, or translation,  or performance and includes\n  cinematographic adaptations or any</p>\n</blockquote>\n\n<p>My code is making an error. It finds the start of the segment and then it finds that last appearance of the segment end <code>f</code> and deletes everything in between.</p>\n\n<p>It does this</p>\n\n<blockquote>\n  <p>\"Adaptation\" means a work based upon the Work, or <s><code>cAt</code> upon the Work and\n  other pre-existing works, such as a <code>f</code> translation, <code>DOG</code> adaptation,\n  derivative work, arrangement  of music or other alterations of a\n  literary or artistic work, or phonogram <code>f</code> </s> or performance and includes\n  cinematographic adaptations or any</p>\n</blockquote>\n"}, {"tags": ["python", "numpy", "options", "h5py"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1548892710, "post_id": 54451391, "comment_id": 95711164, "body": "People don&#39;t usually want their screen flooded with hundreds of thousands of numbers that usually make very little sense unless you analyse specific slices or truncate the meat, like numpy does."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1548892924, "post_id": 54451391, "comment_id": 95711221, "body": "It probably is just a <code>numpy</code> array underneath so you can probably use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html\" rel=\"nofollow noreferrer\"><code>numpy.set_printoptions()</code></a> to change the behaviour."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1548896459, "post_id": 54451391, "comment_id": 95712157, "body": "In fact <a href=\"https://stackoverflow.com/questions/1987694/how-to-print-the-full-numpy-array-without-truncation\">How to print the full NumPy array, without truncation?</a> is the best close-target, but I can&#39;t change my vote now."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1548897668, "post_id": 54451391, "comment_id": 95712454, "body": "Your <code>s</code> array has 64**3 elements.  <code>numpy</code> starts using the ellipsis at 1000 elements.  While you can play the print threshhold, it might be more useful to display slices of the whole thing, such as <code>s[0,:,:]</code> panel. Or run other tests such as <code>max</code> or <code>min</code> or <code>mean</code>."}, {"owner": {"reputation": 19, "user_id": 10716496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fc4a5bc2f7ac8f10a8fcbc91c885fe?s=128&d=identicon&r=PG&f=1", "display_name": "M Cosmo", "link": "https://stackoverflow.com/users/10716496/m-cosmo"}, "edited": false, "score": 0, "creation_date": 1548899354, "post_id": 54451391, "comment_id": 95712832, "body": "thanks all! my problem is solved"}], "answers": [{"tags": [], "owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "is_accepted": false, "score": 1, "last_activity_date": 1548893498, "creation_date": 1548893498, "answer_id": 54451519, "question_id": 54451391, "link": "https://stackoverflow.com/questions/54451391/how-to-see-all-values-of-long-arrays-in-numpy/54451519#54451519", "title": "How to see all values of long arrays in NumPy?", "body": "<p>Try:</p>\n\n<pre><code>import numpy as np\nnp.set_printoptions(threshold=np.nan)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10716496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70fc4a5bc2f7ac8f10a8fcbc91c885fe?s=128&d=identicon&r=PG&f=1", "display_name": "M Cosmo", "link": "https://stackoverflow.com/users/10716496/m-cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 0, "closed_date": 1549005279, "answer_count": 1, "score": 0, "last_activity_date": 1548909836, "creation_date": 1548892587, "last_edit_date": 1548909836, "question_id": 54451391, "link": "https://stackoverflow.com/questions/54451391/how-to-see-all-values-of-long-arrays-in-numpy", "closed_reason": "Duplicate", "title": "How to see all values of long arrays in NumPy?", "body": "<p>I have a h5 file which contains a large number of data of arrays. I can read the h5 file in python and able to see the array of values. But, I can't see all values of arrays in the output. Is it possible to see all values of arrays in python? </p>\n\n<p>Here is my code:</p>\n\n<pre><code>import numpy as np   \nimport h5py\nimport matplotlib.pyplot as plt\nf = h5py.File('k.h5', 'r')  \nlist(f.keys())\ndset = f[u'data']\ndset.shape\ndset.value.shape\ns=dset[0:64,0:64,0:64]\nprint(s)\n</code></pre>\n\n<p>Here is my sample output:</p>\n\n<pre><code>[[[-2.89660161e-05 -2.55907859e-05 -2.26706938e-05 ... -3.17377055e-05\n   -3.19882377e-05 -3.11190429e-05]\n  [-2.79035096e-05 -2.42448566e-05 -2.08823974e-05 ... -3.05330241e-05\n   -3.07284066e-05 -2.99954101e-05]\n  [-2.64130475e-05 -2.34394543e-05 -2.03711989e-05 ... -2.76314902e-05\n   -2.82685520e-05 -2.80147175e-05]...\n</code></pre>\n\n<p>The h5 file can be downloaded from <a href=\"https://drive.google.com/open?id=1cpnZBGDgbijAH0kJchcecTM5lKasiflp\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1cpnZBGDgbijAH0kJchcecTM5lKasiflp</a> this link.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1548893731, "post_id": 54451351, "comment_id": 95711415, "body": "Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1548893833, "post_id": 54451351, "comment_id": 95711449, "body": "I answered the question you asked.  Your comments include a follow-up question about the results of later code -- a problem you didn&#39;t document.  Please post one of these (long typing <i>or</i> frame concatenation) as a separate question, and supply the expected MCVE for the latter problem."}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1548893878, "post_id": 54451351, "comment_id": 95711463, "body": "your answer didnt work unfortuantely"}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1548894305, "post_id": 54451351, "comment_id": 95711572, "body": "not sure if I get the idea wrong, but you are trying to join all excels into one excel?  If it&#39;s in a folder, why not get every file in the folder so you do not have to type any part of the file name?"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548894470, "post_id": 54451351, "comment_id": 95711631, "body": "thats what I want to do, how do I do it?"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1548894662, "post_id": 54451351, "comment_id": 95711673, "body": "@Prune could be error be due to this? <code>frames[1:] = [df[1:] for df in frames[5:]] </code>"}, {"owner": {"reputation": 1698, "user_id": 2128414, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/EE8ag.jpg?s=128&g=1", "display_name": "Tsuna", "link": "https://stackoverflow.com/users/2128414/tsuna"}, "edited": false, "score": 0, "creation_date": 1548894985, "post_id": 54451351, "comment_id": 95711749, "body": "someone posted the answer before me, which is also a reference of <a href=\"https://stackoverflow.com/questions/3207219/how-do-i-list-all-files-of-a-directory\" title=\"how do i list all files of a directory\">stackoverflow.com/questions/3207219/&hellip;</a> see if this is what you need"}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548892813, "post_id": 54451395, "comment_id": 95711192, "body": "thanks, I have to do this for a couple years, for everymonth for every day. Is there a way to make it faster?"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548892987, "post_id": 54451395, "comment_id": 95711238, "body": "also why did you do <code>+day</code> what is <code>day</code>? Thanks"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548893127, "post_id": 54451395, "comment_id": 95711276, "body": "<code>day</code> is the index variable for the comprehension, <code>for day in dates</code>."}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548893221, "post_id": 54451395, "comment_id": 95711303, "body": "when i used your code, it added the first data file but not the rest?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548893223, "post_id": 54451395, "comment_id": 95711304, "body": "<code>&quot;everymonth for every day&quot;</code> [sic] is a change to the problem you posted.  Yes, you can use the <code>datetime</code> package to take a starting date, increment it each time through a loop, and then extract the YYMMDD form of the date.  Convert that to a string."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548893461, "post_id": 54451395, "comment_id": 95711355, "body": "@newtoR: the code I posted produces the desired list of strings, as shown in the extended answer.  There&#39;s no way we can debug your usage when you haven&#39;t posted it."}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548893523, "post_id": 54451395, "comment_id": 95711366, "body": "my code prints that as well, but when I open my output excel file it hadn&#39;t joined everything, weird."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1548893294, "last_edit_date": 1548893294, "creation_date": 1548892609, "answer_id": 54451395, "question_id": 54451351, "link": "https://stackoverflow.com/questions/54451351/loop-file-name-for-joining-data-excel-data-in-python/54451395#54451395", "title": "loop file name for joining data excel data in python?", "body": "<p>Something like this?  Put the consistent parts into static variables; put the variable part into a list.  Build with another list comprehension.</p>\n\n<pre><code>prefix = \"Market_Information_System_Control_daily_trading_day_\"\next = \".xlsx\"\ndates  = [\"170701\",\n          \"170702\",\n          \"170703\",\n          \"170704\",\n          \"170731\"]\nexcel_names = [prefix + day + ext for day in dates]\n\nprint(excel_names)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>['Market_Information_System_Control_daily_trading_day_170701.xlsx',\n 'Market_Information_System_Control_daily_trading_day_170702.xlsx',\n 'Market_Information_System_Control_daily_trading_day_170703.xlsx',\n 'Market_Information_System_Control_daily_trading_day_170704.xlsx',\n 'Market_Information_System_Control_daily_trading_day_170731.xlsx']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895016, "post_id": 54451697, "comment_id": 95711758, "body": "so If i rename your &#39;only files&#39; to `excel_names&quot; it should work?"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895058, "post_id": 54451697, "comment_id": 95711769, "body": "I only want to print out xlsx files though, not my python files?"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895095, "post_id": 54451697, "comment_id": 95711777, "body": "this will work if I can modify the code for xlsx files only"}, {"owner": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "reply_to_user": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895175, "post_id": 54451697, "comment_id": 95711795, "body": "@newtoR edit the <code>folder_path</code> to the dir where your xlsx are.  If xlsx files are with other files.  try checking all files and only save those with xlsx extension into another variable.  But I would prefer you saving all xlsx into a separate folder which would be easier to manage"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895360, "post_id": 54451697, "comment_id": 95711856, "body": "Oh true! that makes a lot of sense and it fixed it for me"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895425, "post_id": 54451697, "comment_id": 95711868, "body": "one more question if you dont mind, how can I modify my code to delete the first 5 rows when importing the files, other than for the first file?"}, {"owner": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "reply_to_user": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895737, "post_id": 54451697, "comment_id": 95711954, "body": "@newtoR I believe I get what you mean, I would suggest you move those files into a new folder let&#39;s say <code>already_imported</code>, this way the other folder is always having the new files that&#39;s not imported and also IF something really goes wrong.  You still have the files that&#39;s already imported to check out instead of deleting them"}, {"owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548895826, "post_id": 54451697, "comment_id": 95711980, "body": "I have fixed the importing files error, check my edited post to see my problem, thanks for all your help btw"}, {"owner": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "reply_to_user": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 0, "creation_date": 1548896392, "post_id": 54451697, "comment_id": 95712138, "body": "@newtoR honestly I am not into excel combining, creating, answering your post due to the question of don&#39;t have to type the full file name each time.  Would suggest you to create another post for that question instead of editing this one so it&#39;ll be more convenient for others having same issue as yours."}, {"owner": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "reply_to_user": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "edited": false, "score": 1, "creation_date": 1548896470, "post_id": 54451697, "comment_id": 95712160, "body": "@newtoR by the way, if you think <code>[df[1:] for df in frames[1:]]</code> might be the reason, I would suggest using regular <code>for</code> loop which then you&#39;ll be able to do some <code>prints</code> to see what values are given which might cause the problem."}], "tags": [], "owner": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "is_accepted": false, "score": 2, "last_activity_date": 1548895828, "last_edit_date": 1548895828, "creation_date": 1548894810, "answer_id": 54451697, "question_id": 54451351, "link": "https://stackoverflow.com/questions/54451351/loop-file-name-for-joining-data-excel-data-in-python/54451697#54451697", "title": "loop file name for joining data excel data in python?", "body": "<p>Is this what you are looking for? which will print out all the file names that you just need to loop through the file names then combine</p>\n\n<pre><code>from os import listdir\nfrom os.path import isfile, join\n\nfolder_path = './'\n\nonlyfiles = [f for f in listdir(folder_path) if isfile(join(folder_path, f))]\nprint(onlyfiles);\n</code></pre>\n\n<p>P.S. this is from <a href=\"https://stackoverflow.com/questions/3207219/how-do-i-list-all-files-of-a-directory\">How do I list all files of a directory?</a></p>\n\n<p>EDIT, in case you really want do some kind of file extension filtering, I am using <code>json</code> files as example, change it to your need</p>\n\n<pre><code>from os import listdir\nfrom os.path import isfile, join\n\nfolder_path = './'\n\nonlyfiles = [f for f in listdir(folder_path) if isfile(join(folder_path, f))]\nfilter_extension = []\nmy_ext = 'json'\n\nfor f in listdir(folder_path):\n    extension = f.split('.')[-1]\n    if (extension == my_ext):\n        filter_extension.extend([f])\n\nprint(filter_extension)\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 10773710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149ecc7a8921a9a87181394d17d0244?s=128&d=identicon&r=PG&f=1", "display_name": "user8261831", "link": "https://stackoverflow.com/users/10773710/user8261831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548895952, "creation_date": 1548892329, "last_edit_date": 1548895952, "question_id": 54451351, "link": "https://stackoverflow.com/questions/54451351/loop-file-name-for-joining-data-excel-data-in-python", "title": "loop file name for joining data excel data in python?", "body": "<p>I have some code for joining excel files, how can I edit my code so that I don't have to type the full file name each time?</p>\n\n<p>Thanks</p>\n\n<p>Code below:</p>\n\n<pre><code>import pandas as pd\n\nexcel_names = [\"Market_Information_System_Control_daily_trading_day_170701.xlsx\",\n               \"Market_Information_System_Control_daily_trading_day_170702.xlsx\",\n               \"Market_Information_System_Control_daily_trading_day_170703.xlsx\",\n               \"Market_Information_System_Control_daily_trading_day_170704.xlsx\",\n               \"Market_Information_System_Control_daily_trading_day_170731.xlsx\"]\n\nexcels = [pd.ExcelFile(name) for name in excel_names]\nframes = [x.parse(x.sheet_names[1], header=None,index_col=None) for x in excels]\n\nframes[1:] = [df[1:] for df in frames[1:]]\ncombined = pd.concat(frames)\ncombined.to_excel(\"c.xlsx\", header=False, index=False)\n</code></pre>\n\n<p>EDIT1:\n<a href=\"https://i.stack.imgur.com/HHvw7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HHvw7.png\" alt=\"image\"></a></p>\n\n<p>I just wan't the time to flow, not have heading breaks.</p>\n\n<p>I think it has something to do with this:\n<code>frames[1:] = [df[1:] for df in frames[1:]]</code></p>\n"}, {"tags": ["python", "amazon-ec2", "window", "jupyter", "putty"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10919244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284114d6073e834942ec64a49905e3bc?s=128&d=identicon&r=PG&f=1", "display_name": "Kalyanee C", "link": "https://stackoverflow.com/users/10919244/kalyanee-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1551821531, "creation_date": 1551821531, "answer_id": 55011938, "question_id": 54451288, "link": "https://stackoverflow.com/questions/54451288/how-to-run-python-and-jupyter-in-aws-ec2-ubuntu-when-using-windowsputty/55011938#55011938", "title": "How to run Python and Jupyter in AWS EC2 + Ubuntu when using Windows+puTTY?", "body": "<p>Thanks for opening this query. Apologies for the delayed response.\nWe investigated the above query and looks like the port setup for using Jupyter notebook on your instance has not been done correctly. We would recommend following <a href=\"https://docs.aws.amazon.com/dlami/latest/devguide/setup-jupyter.html\" rel=\"nofollow noreferrer\">steps from the guide</a>. </p>\n\n<p>Essentially, your ec2 instance should allow for opening a port and setting up a server. The logs pasted above indicated that no server was up and this might have been because the ec2 instance wasn't configured with the correct configuration. Please ensure that you setup a <code>Custom TCP Rule</code> as mentioned above while launching your instance and then try the above steps again. </p>\n\n<p>Please feel free to comment and let us know if this doesn't solve your issue.</p>\n"}], "owner": {"reputation": 1655, "user_id": 4827407, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-PpeKpxZJxqA/AAAAAAAAAAI/AAAAAAAAAC0/00uLdjlJgHU/photo.jpg?sz=128", "display_name": "Feng Chen", "link": "https://stackoverflow.com/users/4827407/feng-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1604385868, "creation_date": 1548891891, "last_edit_date": 1604385868, "question_id": 54451288, "link": "https://stackoverflow.com/questions/54451288/how-to-run-python-and-jupyter-in-aws-ec2-ubuntu-when-using-windowsputty", "title": "How to run Python and Jupyter in AWS EC2 + Ubuntu when using Windows+puTTY?", "body": "<p>I just started trying AWS EC2 free tier. I use Windows 10 + puTTY to connect ubuntu in ec2. So far, where I have got is:</p>\n<p><a href=\"https://i.stack.imgur.com/PX1jb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PX1jb.jpg\" alt=\"enter image description here\" /></a></p>\n<p>You can see that I already can use putty to link to Ubuntu. And python and Jupyter have been already installed. But, I do not know how to use Jupyter for Python coding.</p>\n<p>PS.I also tried the methods presented in <a href=\"https://docs.aws.amazon.com/dlami/latest/devguide/setup-jupyter-configure-client-windows.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/dlami/latest/devguide/setup-jupyter-configure-client-windows.html</a>, but I do not know how to continue.</p>\n<p>So, how can I use Jupyter and Python in EC2 when using puTTP to link to AWS?</p>\n"}, {"tags": ["python", "cmd"], "comments": [{"owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 0, "creation_date": 1548891923, "post_id": 54451283, "comment_id": 95710977, "body": "What do you mean by &quot;open&quot;? Do you mean you want to edit the file? Or run it? Something else? I&#39;m unclear about what problem you&#39;re having specifically."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1548892002, "post_id": 54451283, "comment_id": 95711002, "body": "Start a new <i>cmd</i> if it&#39;s an <b>User</b> variable, or relogon (or restart) if it&#39;s a <b>System</b> variable."}, {"owner": {"reputation": 123, "user_id": 10914591, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f33d02d4c189e6054790d894887b72f4?s=128&d=identicon&r=PG", "display_name": "catcat", "link": "https://stackoverflow.com/users/10914591/catcat"}, "edited": false, "score": 0, "creation_date": 1548892029, "post_id": 54451283, "comment_id": 95711007, "body": "This is a python question, nothing to do with CMD."}, {"owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "reply_to_user": {"reputation": 123, "user_id": 10914591, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f33d02d4c189e6054790d894887b72f4?s=128&d=identicon&r=PG", "display_name": "catcat", "link": "https://stackoverflow.com/users/10914591/catcat"}, "edited": false, "score": 0, "creation_date": 1548892091, "post_id": 54451283, "comment_id": 95711023, "body": "@catcat Don&#39;t be so sure, this could well be a question about how to use CMD to run python scripts."}, {"owner": {"reputation": 181, "user_id": 9443697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ea0c71c775eed44dd8bce1461b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Po Chen Liu", "link": "https://stackoverflow.com/users/9443697/po-chen-liu"}, "edited": false, "score": 0, "creation_date": 1548892189, "post_id": 54451283, "comment_id": 95711047, "body": "Sorry i meant run the file, it shows up with python: can&#39;t open file &#39;HelloWorld.py&#39;: [Errno 2] No such file or directory"}, {"owner": {"reputation": 123, "user_id": 10914591, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f33d02d4c189e6054790d894887b72f4?s=128&d=identicon&r=PG", "display_name": "catcat", "link": "https://stackoverflow.com/users/10914591/catcat"}, "edited": false, "score": 0, "creation_date": 1548892859, "post_id": 54451283, "comment_id": 95711204, "body": "What CMD&#39;s commands do they want advice on. Considering that THERE IS NO PYTHON in Windows."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 9443697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ea0c71c775eed44dd8bce1461b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Po Chen Liu", "link": "https://stackoverflow.com/users/9443697/po-chen-liu"}, "edited": false, "score": 0, "creation_date": 1548892746, "post_id": 54451331, "comment_id": 95711173, "body": "Is there a way to change the location of the default directory so that when I open it, it always starts on desktop?"}, {"owner": {"reputation": 893, "user_id": 7238987, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/acf47133b3cef8963064bd5d3e90bdb0?s=128&d=identicon&r=PG&f=1", "display_name": "algorythms", "link": "https://stackoverflow.com/users/7238987/algorythms"}, "reply_to_user": {"reputation": 181, "user_id": 9443697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ea0c71c775eed44dd8bce1461b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Po Chen Liu", "link": "https://stackoverflow.com/users/9443697/po-chen-liu"}, "edited": false, "score": 1, "creation_date": 1548893655, "post_id": 54451331, "comment_id": 95711404, "body": "go to directory where cmd prompt exe is located. right click, select properties, find option &quot;start in&quot; and you can set your default directory here."}, {"owner": {"reputation": 893, "user_id": 7238987, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/acf47133b3cef8963064bd5d3e90bdb0?s=128&d=identicon&r=PG&f=1", "display_name": "algorythms", "link": "https://stackoverflow.com/users/7238987/algorythms"}, "reply_to_user": {"reputation": 181, "user_id": 9443697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ea0c71c775eed44dd8bce1461b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Po Chen Liu", "link": "https://stackoverflow.com/users/9443697/po-chen-liu"}, "edited": false, "score": 0, "creation_date": 1574747324, "post_id": 54451331, "comment_id": 104330662, "body": "if my main answer thread above was helpful, would you mind upvoting it? I&#39;m new here and it would help me a lot. Thanks!"}], "tags": [], "owner": {"reputation": 893, "user_id": 7238987, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/acf47133b3cef8963064bd5d3e90bdb0?s=128&d=identicon&r=PG&f=1", "display_name": "algorythms", "link": "https://stackoverflow.com/users/7238987/algorythms"}, "is_accepted": true, "score": 0, "last_activity_date": 1548892552, "last_edit_date": 1548892552, "creation_date": 1548892147, "answer_id": 54451331, "question_id": 54451283, "link": "https://stackoverflow.com/questions/54451283/opening-python-files-through-cmd-not-working/54451331#54451331", "title": "Opening python files through cmd not working", "body": "<p>it's usually:prompt> python filename.py</p>\n\n<p>prompt should be the location of your python file: ex: c:\\users\\documents\\python\nthis is the preferred way.</p>\n\n<p>if this doesn't work you may not have added python to path. when initially installing python, you will get an option that says \"add to path\" make sure you check this. just reinstall python if you have this problem.</p>\n\n<p>I'm 99% sure you're not trying to run the script as an executable, but just in case you are, here is a related thread:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2933/how-can-i-create-a-directly-executable-cross-platform-gui-app-using-python\">How can I create a directly-executable cross-platform GUI app using Python?</a></p>\n"}, {"tags": [], "owner": {"reputation": 515, "user_id": 10567693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CALGX.jpg?s=128&g=1", "display_name": "LonelyDaoist", "link": "https://stackoverflow.com/users/10567693/lonelydaoist"}, "is_accepted": false, "score": 0, "last_activity_date": 1548892835, "creation_date": 1548892835, "answer_id": 54451431, "question_id": 54451283, "link": "https://stackoverflow.com/questions/54451283/opening-python-files-through-cmd-not-working/54451431#54451431", "title": "Opening python files through cmd not working", "body": "<p>if you get the error: </p>\n\n<blockquote>\n  <p>No such file or directory</p>\n</blockquote>\n\n<p>then you need to be in the same directory as your file, first use </p>\n\n<pre><code>cd c:\\Users\\(username)\\Desktop\n</code></pre>\n\n<p>(replace (username) with your username)</p>\n\n<p>this should put you on your desktop, then use:</p>\n\n<pre><code>python HelloWorld.py\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 9443697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ea0c71c775eed44dd8bce1461b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Po Chen Liu", "link": "https://stackoverflow.com/users/9443697/po-chen-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "accepted_answer_id": 54451331, "answer_count": 2, "score": 2, "last_activity_date": 1604526137, "creation_date": 1548891844, "last_edit_date": 1548892694, "question_id": 54451283, "link": "https://stackoverflow.com/questions/54451283/opening-python-files-through-cmd-not-working", "title": "Opening python files through cmd not working", "body": "<p><a href=\"https://i.stack.imgur.com/t8HIX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t8HIX.png\" alt=\"path information\"></a></p>\n\n<p>I want to run python files through cmd (python 3) from my desktop by using this command:</p>\n\n<pre><code>python HelloWorld.py\n</code></pre>\n\n<p>I have made sure to click on all the ok buttons when adding a path, I had the python installation automatically add paths so python works through the terminal.\nIt just won't do it without me pasting in the path manually every time.</p>\n\n<p>P.S.: What do python developers usually use? A text editor and run it through cmd or something like pycharm?</p>\n"}, {"tags": ["python", "celery", "flower"], "answers": [{"comments": [{"owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "edited": false, "score": 0, "creation_date": 1549033846, "post_id": 54481959, "comment_id": 95771322, "body": "Yeah looks like flower only at the celery queue. Whenever I start workers in another queue, flower does not see them. So, I think I will need to create an API layer in nodejs with node-celery. Then, I can route specific queues"}, {"owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "edited": false, "score": 0, "creation_date": 1549033947, "post_id": 54481959, "comment_id": 95771388, "body": "Or is there a way to change the flower queue, because I couldn&#39;t find a setting to do so"}], "tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": false, "score": 2, "last_activity_date": 1549033452, "last_edit_date": 1549033452, "creation_date": 1549033046, "answer_id": 54481959, "question_id": 54451258, "link": "https://stackoverflow.com/questions/54451258/specify-worker-in-celery/54481959#54481959", "title": "Specify Worker in Celery", "body": "<p>The easiest way to achieve this is with separate queues.  Start worker with <code>-Q first_worker,celery</code> and the second broker with <code>-Q second_worker,celery</code>.  <code>celery</code> is the default queue name in <code>celery</code>.</p>\n\n<p>Now, when you want to send a task to just the first worker, you can route the task to the <code>first_worker</code> queue using celery's <a href=\"http://docs.celeryproject.org/en/latest/userguide/routing.html#automatic-routing\" rel=\"nofollow noreferrer\"><code>task_routes</code> setting</a>.  You treat routing tasks to the <code>second_worker</code> queue symmetrically.  You can also <a href=\"http://docs.celeryproject.org/en/latest/userguide/routing.html#manual-routing\" rel=\"nofollow noreferrer\">manually route</a> a particular task call to a certain queue when using <code>apply_async</code>, e.g.:</p>\n\n<pre><code>add.apply_async(args=(1, 2), queue='first_worker')\n</code></pre>\n\n<p>n.b., last I checked, flower will only monitor one of your queues (by default it's the celery queue).  </p>\n"}], "owner": {"reputation": 1460, "user_id": 6209382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vdnUl.jpg?s=128&g=1", "display_name": "GavinBelson", "link": "https://stackoverflow.com/users/6209382/gavinbelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1063, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549033452, "creation_date": 1548891686, "last_edit_date": 1548963674, "question_id": 54451258, "link": "https://stackoverflow.com/questions/54451258/specify-worker-in-celery", "title": "Specify Worker in Celery", "body": "<p>I have two workers:</p>\n\n<pre><code>celery worker -l info --concurrency=2 -A o_broker -n main_worker\ncelery worker -l info --concurrency=2 -A o_broker -n second_worker\n</code></pre>\n\n<p>I am using flower to monitor and receive API requests for these workers:</p>\n\n<pre><code>flower -A o_broker\n</code></pre>\n\n<p>to launch these celery workers from an API I use flower per the <a href=\"https://flower.readthedocs.io/en/latest/api.html\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<pre><code>curl -X POST -d '{\"args\":[1,2]}' 'http://localhost:5555/api/task/async-apply/o_broker.add'\n</code></pre>\n\n<p>However, with this POST request it runs the task on either one of the workers. I need to choose to run a specific broker to complete the task. </p>\n\n<p>How do I specify or set this up so I can choose what worker to use for the <code>add</code> task? If you have a solution using another API without flower, that would also work.</p>\n"}, {"tags": ["python", "pandas", "keyerror"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548891844, "post_id": 54451246, "comment_id": 95710953, "body": "After <code>df = pd.read_csv(file, encoding = &quot;ISO-8859-1&quot;)</code> do you get anything from <code>print(df.head())</code>?"}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 1, "creation_date": 1548891876, "post_id": 54451246, "comment_id": 95710963, "body": "Please post an example of what the csv file looks like"}, {"owner": {"reputation": 11, "user_id": 10993103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5041a4bdc16eaff9f7178a12c49fcca6?s=128&d=identicon&r=PG&f=1", "display_name": "Madison", "link": "https://stackoverflow.com/users/10993103/madison"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548892578, "post_id": 54451246, "comment_id": 95711129, "body": "@roganjosh when I do that I get this:    File &quot;&lt;ipython-input-15-873aa293d964&gt;&quot;, line 1, in &lt;module&gt;     print(df.head()) NameError: name &#39;df&#39; is not defined"}, {"owner": {"reputation": 11, "user_id": 10993103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5041a4bdc16eaff9f7178a12c49fcca6?s=128&d=identicon&r=PG&f=1", "display_name": "Madison", "link": "https://stackoverflow.com/users/10993103/madison"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548892654, "post_id": 54451246, "comment_id": 95711147, "body": "@EdekiOkoh would you like a sample of the CSV itself or once it&#39;s in excel?"}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 1, "creation_date": 1548892853, "post_id": 54451246, "comment_id": 95711202, "body": "Yes that would be fine, thanks. In the future any data related question should have some data associated with it so we can recreate the bug"}, {"owner": {"reputation": 11, "user_id": 10993103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5041a4bdc16eaff9f7178a12c49fcca6?s=128&d=identicon&r=PG&f=1", "display_name": "Madison", "link": "https://stackoverflow.com/users/10993103/madison"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548893143, "post_id": 54451246, "comment_id": 95711286, "body": "@EdekiOkoh how do I give you the sample? I am totally lost."}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 1, "creation_date": 1548893358, "post_id": 54451246, "comment_id": 95711332, "body": "Copy the output of df.head and post it to your question"}, {"owner": {"reputation": 11, "user_id": 10993103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5041a4bdc16eaff9f7178a12c49fcca6?s=128&d=identicon&r=PG&f=1", "display_name": "Madison", "link": "https://stackoverflow.com/users/10993103/madison"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548893529, "post_id": 54451246, "comment_id": 95711369, "body": "@EdekiOkoh Added"}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548908024, "post_id": 54451246, "comment_id": 95714637, "body": "Did you print df after you use read_csv? It shouldn&#39;t be empty is there is data being read from the file."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1549043789, "post_id": 54451246, "comment_id": 95776528, "body": "You&#39;ve called your dataframe <code>db</code> not <code>df</code>"}, {"owner": {"reputation": 2500, "user_id": 10100272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2b304071c78a2a5f90c6e6e10482d6?s=128&d=identicon&r=PG&f=1", "display_name": "MEdwin", "link": "https://stackoverflow.com/users/10100272/medwin"}, "edited": false, "score": 0, "creation_date": 1561975978, "post_id": 54451246, "comment_id": 100219722, "body": "you should have done <code>print(db.head())</code> instead of <code>print(df.head())</code> as you have stored the dataframe as <code>db</code>."}], "owner": {"reputation": 11, "user_id": 10993103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5041a4bdc16eaff9f7178a12c49fcca6?s=128&d=identicon&r=PG&f=1", "display_name": "Madison", "link": "https://stackoverflow.com/users/10993103/madison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2928, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1548893802, "creation_date": 1548891584, "last_edit_date": 1548893802, "question_id": 54451246, "link": "https://stackoverflow.com/questions/54451246/keyerror-not-in-index", "title": "KeyError &quot;[.....]&quot; not in index", "body": "<p>I am working on a project for work and was handed this code after having no previous experience with Python. I'm getting a KeyError message, and the line above that has some red text that I am also unsure about. Here's the exact text: </p>\n\n<pre><code>  File \"/anaconda3/lib/python3.7/site-packages/pandas/core/indexing.py\", line 1327, in _convert_to_indexer\n    .format(mask=objarr[mask]))\n\nKeyError: \"['First name' 'Last name' 'Company' 'Email address - other' 'Opened At'\\n 'Company.1'] not in index\"\n</code></pre>\n\n<p>I have been looking into tutorials all day and understand that this is an issue with the fact that this DataFrame doesn't have an index, but I think that is due to the fact that it is importing data from a file that doesn't have a set name. </p>\n\n<p>Here's the beginning portion of the code that I believe has the issue: </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport glob, os\nimport re\n\n# In[21]:\ndb = pd.DataFrame()\nfor file in glob.glob(\"report_*.csv\"):\n    df = pd.read_csv(file, encoding = \"ISO-8859-1\")\n    db = db.append(df,ignore_index=True)\n\n# In[22]:\ndb= db[['First name','Last name', 'Company', 'Email address - other','Opened At','Company.1']]\n\n# In[23]:\ndb.columns = [c.replace(' ', '_') for c in db.columns]\ndb.columns = [c.replace('-', '_') for c in db.columns]\ndb.columns = [c.replace('.', '_') for c in db.columns]\n</code></pre>\n\n<p>When I print(bd) I get this: </p>\n\n<pre><code>Empty DataFrame\nColumns: []\nIndex: []\n</code></pre>\n\n<p>So I recognize that I need to add an Index but I'm not sure what it should be. The resulting file should have 6 columns, I believe, but the number of rows varies. </p>\n\n<p>I am willing to provide whatever information is necessary I'm just at a loss of what to do and would appreciate any help at all! </p>\n\n<p>Edit: Print(df.head()) yields: </p>\n\n<pre><code>print(df.head())\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-17-873aa293d964&gt;\", line 1, in &lt;module&gt;\n    print(df.head())\n\nNameError: name 'df' is not defined\n</code></pre>\n"}, {"tags": ["python", "ujson"], "comments": [{"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 0, "creation_date": 1548891905, "post_id": 54451218, "comment_id": 95710974, "body": "Seems \u201cindent\u201d is the only formatting option."}, {"owner": {"reputation": 4501, "user_id": 5252492, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/QYvFc.png?s=128&g=1", "display_name": "azazelspeaks", "link": "https://stackoverflow.com/users/5252492/azazelspeaks"}, "reply_to_user": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 0, "creation_date": 1548960184, "post_id": 54451218, "comment_id": 95742402, "body": "Yes but my choices are either indent=0 where everything is on the same line, or indent=1 which puts every dict element on a new line, creating waay too much of a scrolling problem."}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 0, "creation_date": 1549050078, "post_id": 54451218, "comment_id": 95779061, "body": "That&#39;s all you got. Your choice of tool makes other things not possible. If this is a real bother, why don&#39;t you just write a small python-Skript that you use to pipe the data through, which formats according to you wishes?"}], "owner": {"reputation": 4501, "user_id": 5252492, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/QYvFc.png?s=128&g=1", "display_name": "azazelspeaks", "link": "https://stackoverflow.com/users/5252492/azazelspeaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548891453, "creation_date": 1548891453, "question_id": 54451218, "link": "https://stackoverflow.com/questions/54451218/python-ujson-print-with-newline", "title": "Python: ujson print with newline", "body": "<p>Trying to ujson.dump with newlines after every line, but I cannot seem to do it with the dump options (ujson doesn't seem to support the separators keyword).</p>\n\n<p>Is there some other way to do this?</p>\n"}, {"tags": ["python", "syntax", "monkeypatching", "language-enhancement"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548891509, "post_id": 54451211, "comment_id": 95710877, "body": "Aside from the fact that the grammar doesn&#39;t define it? Are you looking for a reason <i>why</i> Python doesn&#39;t support it?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548891637, "post_id": 54451211, "comment_id": 95710906, "body": "Near duplicate: <a href=\"https://stackoverflow.com/q/39871227/1126841\">stackoverflow.com/q/39871227/1126841</a>, which confirms that this is invalid syntax without providing a rationale."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1548891839, "post_id": 54451211, "comment_id": 95710951, "body": "Here&#39;s a <a href=\"https://groups.google.com/forum/#!topic/python-ideas/8rxVLGryXrg\" rel=\"nofollow noreferrer\">thread</a> from the python-ideas mailing list discussing the idea."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1548891944, "post_id": 54451211, "comment_id": 95710983, "body": "This doesn&#39;t provide anywhere near enough benefit to justify its addition."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1548891986, "post_id": 54451211, "comment_id": 95710995, "body": "(Plenty of syntax is <i>possible</i>. That doesn&#39;t mean it&#39;s <i>worthwhile</i>.)"}], "owner": {"reputation": 2088, "user_id": 5104777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a23b08f8a2c7898c5157d836e67e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "benjimin", "link": "https://stackoverflow.com/users/5104777/benjimin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548891389, "creation_date": 1548891389, "question_id": 54451211, "link": "https://stackoverflow.com/questions/54451211/syntax-to-monkey-patch-a-class-in-python", "title": "Syntax to monkey patch a class in python", "body": "<p>Is there any reason why this syntax wouldn't be possible?</p>\n\n<pre><code>def myclass.method(self):\n    pass\n</code></pre>\n\n<p>Instead, python currently uses assignment, such as:</p>\n\n<pre><code>def f(self):\n    pass\nmyclass.method = f\n</code></pre>\n"}, {"tags": ["python", "html", "regex", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 1, "creation_date": 1548891415, "post_id": 54451185, "comment_id": 95710853, "body": "You will need some code to do this. Try searching your issue first."}], "answers": [{"tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1549128708, "creation_date": 1549128708, "answer_id": 54495614, "question_id": 54451185, "link": "https://stackoverflow.com/questions/54451185/find-the-content-between-two-html-tags/54495614#54495614", "title": "Find the content between two HTML tags", "body": "<p>It depends on what else is in the full HTML, but using the HTML you have provided, you could first locate the <code>&lt;i&gt;</code> element using its class of <code>ihome-bed</code> and then navigate to the text element that follows. A standard Python <code>strip()</code> could then be used to remove newlines spaces and quote characters. For example:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nhtml = \"\"\"&lt;ul class=\"left slider_pinfo\"&gt;\n    &lt;li&gt;\n        &lt;i class=\"ihome-bed\"&gt;&lt;/i&gt;\n               \" 4\"\n                &lt;div class=\"meta-tooltip\"&gt;bed&lt;/div&gt;\n        &lt;span class=\"right listing-sp\"&gt;&lt;/span&gt;\n        &lt;/li&gt;\n                                        &lt;li&gt;\n            &lt;i class=\"ihome-arrows\"&gt;&lt;/i&gt;\n            \"300meter\"\n            &lt;div class=\"meta-tooltip\"&gt;meter&lt;/div&gt;\n        &lt;/li&gt;\n                                        &lt;li&gt;\n            &lt;i class=\"ihome-building-age\"&gt;&lt;/i&gt;\n            \"6years\"\n            &lt;div class=\"meta-tooltip\"&gt;age&lt;/div&gt;\n        &lt;/li&gt;\n                &lt;/ul&gt;\"\"\"\n\nsoup = BeautifulSoup(html, \"html.parser\")\nnumber = soup.find('i', class_='ihome-bed').next_element.strip('\\n\" ')\n\nprint(number)\n</code></pre>\n\n<p>Would display:</p>\n\n<pre><code>4    \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10924842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7584e51c81f9f2cb8a517aad74b3a0d?s=128&d=identicon&r=PG&f=1", "display_name": "Varg", "link": "https://stackoverflow.com/users/10924842/varg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1549128852, "creation_date": 1548891248, "last_edit_date": 1549128852, "question_id": 54451185, "link": "https://stackoverflow.com/questions/54451185/find-the-content-between-two-html-tags", "title": "Find the content between two HTML tags", "body": "<p>I want to extract only the number \"4\" in this HTML code using Python <code>beautifulsoup</code> what should I do?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ul class=\"left slider_pinfo\"&gt;\r\n    &lt;li&gt;\r\n                &lt;i class=\"ihome-bed\"&gt;&lt;/i&gt;\r\n                       \" 4\"\r\n                        &lt;div class=\"meta-tooltip\"&gt;bed&lt;/div&gt;\r\n                &lt;span class=\"right listing-sp\"&gt;&lt;/span&gt;\r\n                &lt;/li&gt;\r\n                                                &lt;li&gt;\r\n                    &lt;i class=\"ihome-arrows\"&gt;&lt;/i&gt;\r\n                    \"300meter\"\r\n                    &lt;div class=\"meta-tooltip\"&gt;meter&lt;/div&gt;\r\n                &lt;/li&gt;\r\n                                                &lt;li&gt;\r\n                    &lt;i class=\"ihome-building-age\"&gt;&lt;/i&gt;\r\n                    \"6years\"\r\n                    &lt;div class=\"meta-tooltip\"&gt;age&lt;/div&gt;\r\n                &lt;/li&gt;\r\n                        &lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "python-3.x", "pycrypto", "pycryptodome"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10613479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8NFdnuNJHs8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCmT7Lm-E7I4gVr3ram6VItBZpr0Q/mo/photo.jpg?sz=128", "display_name": "maribor", "link": "https://stackoverflow.com/users/10613479/maribor"}, "is_accepted": false, "score": 1, "last_activity_date": 1548891824, "creation_date": 1548891824, "answer_id": 54451279, "question_id": 54451176, "link": "https://stackoverflow.com/questions/54451176/have-an-error-with-aes-key-after-his-rsa-decryption/54451279#54451279", "title": "Have an error with AES key after his RSA decryption", "body": "<p>Solved by my own.</p>\n\n<pre><code>def receive_data(key, data):\n    ...\n    decrypted = cipher.decrypt(data, aes_key)#used variable ket instead of aes key\n    ...\n</code></pre>\n\n<p>But i think i should leave it here for future users)</p>\n"}], "owner": {"reputation": 31, "user_id": 10613479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8NFdnuNJHs8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCmT7Lm-E7I4gVr3ram6VItBZpr0Q/mo/photo.jpg?sz=128", "display_name": "maribor", "link": "https://stackoverflow.com/users/10613479/maribor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548900086, "creation_date": 1548891173, "last_edit_date": 1548900086, "question_id": 54451176, "link": "https://stackoverflow.com/questions/54451176/have-an-error-with-aes-key-after-his-rsa-decryption", "title": "Have an error with AES key after his RSA decryption", "body": "<p>I'm trying to realize hybrid cryptosystem with pycryptodome.</p>\n\n<pre><code>from Crypto.PublicKey import RSA\nfrom Crypto.Cipher import AES\nfrom Crypto.Random import get_random_bytes\nfrom Crypto.Random.random import getrandbits\nfrom Crypto.Cipher import PKCS1_v1_5\nfrom Crypto.Hash import SHA\nfrom Crypto import Random\nimport base64\nimport hashlib\nimport os\n\ndef main():\n    setup()\n    data = b'12 43 42 46 af'\n    key, data = send_data_to_dron(data)\n    receive_data(key, data)\n\nclass AESCipher:\n    def __init__(self, key):\n        self.key = key\n\n    def pad(self, s):\n        return s + b\"\\0\" * (AES.block_size - len(s) % AES.block_size)\n\n    def encrypt(self, message, key, key_size=256):\n        message = self.pad(message)\n        iv = Random.new().read(AES.block_size)\n        cipher = AES.new(key, AES.MODE_CBC, iv)\n        return iv + cipher.encrypt(message)\n\n    def decrypt(self, ciphertext, key):\n        iv = ciphertext[:AES.block_size]\n        print(len(key))\n        cipher = AES.new(key, AES.MODE_CBC, iv)\n        plaintext = cipher.decrypt(ciphertext[AES.block_size:])\n        return plaintext.rstrip(b\"\\0\")\n\ndef receive_data(key, data):\n    private_key = RSA.import_key(open(\"./keys/private1.pem\").read())\n    dsize = SHA.digest_size\n    sentinel = Random.new().read(15+dsize)\n    cipher = PKCS1_v1_5.new(private_key)\n    aes_key = cipher.decrypt(key, sentinel)\n    print(\"dec AES key:\", aes_key)\n\n    cipher = AESCipher(aes_key)\n    decrypted = cipher.decrypt(data, key)\n    return decrypted\n\ndef send_data_to_dron(data):\n    key = os.urandom(16)\n    print(\"gen AES key:\", key)\n    print(len(key))\n    cipher = AESCipher(key)\n    ciphertext = cipher.encrypt(data, key)\n\n    rsa_public1 = RSA.import_key(open(\"./keys/public1.pem\").read())\n    cipher = PKCS1_v1_5.new(rsa_public1)\n    ecnrypted_aes_key = cipher.encrypt(key)\n    return ecnrypted_aes_key, ciphertext\n\ndef setup():\n    key1 = RSA.generate(2048)\n    private_key1 = key1.export_key()\n    fileout = open(\"./keys/private1.pem\", mode=\"wb+\")\n    fileout.write(private_key1)\n    public_key1 = key1.publickey().export_key()\n    file_out = open(\"./keys/public1.pem\", \"wb+\")\n    file_out.write(public_key1)\n\n    key2 = RSA.generate(2048)\n    private_key2 = key2.export_key()\n    fileout = open(\"./keys/private2.pem\", mode=\"wb+\")\n    fileout.write(private_key2)\n    public_key2 = key2.publickey().export_key()\n    file_out = open(\"./keys/public2.pem\", \"wb+\")\n    file_out.write(public_key2)\n\n    send_private(\"./keys/private1.pem\", to='dron')\n    send_private(\"./keys/private2.pem\", to='operator')\n    send_public(\"./keys/public1.pem\", to='dron')\n    send_public(\"./keys/public2.pem\", to='operator')\n\ndef send_private(keyfile_path, to='dron'):\n    pass\n\ndef send_public(keyfile_path, to='dron'):\n    pass\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Have such output:</p>\n\n<pre><code>gen AES key: b'A\\xef\\xc1\\xa8\\xa1\\rf\\xb3\\xd1\\x95\\xe4L\\xc1.\\x16\\xa9'&lt;br&gt;\n16 (length of generated key)&lt;br&gt;\ndec AES key: b'A\\xef\\xc1\\xa8\\xa1\\rf\\xb3\\xd1\\x95\\xe4L\\xc1.\\x16\\xa9'&lt;br&gt;\n256 (lenght of decrypted key)&lt;br&gt;\n&lt;i&gt;Long traceback&lt;/i&gt;&lt;br&gt;\nValueError: Incorrect AES key length (256 bytes)&lt;br&gt;\n</code></pre>\n\n<p>I may specialize padding for RSA encrypting, but I don't know how to do it.</p>\n"}, {"tags": ["python", "pandas", "seaborn"], "comments": [{"owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "edited": false, "score": 0, "creation_date": 1548891959, "post_id": 54451127, "comment_id": 95710985, "body": "It would help if you could create a minimal code example that reproduces your error.    This will make it a lot easier to help others figure out what is going on and help."}, {"owner": {"reputation": 3, "user_id": 10886212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QiRdhwHtIgk/AAAAAAAAAAI/AAAAAAAACRg/vhazO2ePCH4/photo.jpg?sz=128", "display_name": "Nicolas Enrique Bourbon", "link": "https://stackoverflow.com/users/10886212/nicolas-enrique-bourbon"}, "reply_to_user": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "edited": false, "score": 0, "creation_date": 1548897290, "post_id": 54451127, "comment_id": 95712366, "body": "thanks, it&#39;s true.. I was wondering how as my code is based on an extract of another database and in one of the transformations I ended up with that summary table. But the basic question is: If I have a multi index series, with Level0=Years and level1=Months for example and I want to have the Years in columns and then create a heat map like a matrix with Months in Rows and Years in Columns and the data inside.. how can I move the data from one format to the other?"}, {"owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "edited": false, "score": 0, "creation_date": 1548961407, "post_id": 54451127, "comment_id": 95742956, "body": "In my experience, taking the time to create a minimal example can often help you solve your own problem.  A &quot;toy example&quot; allows you to more easily experiment and distill the question down, as well as clarifying for others what exactly you are looking for.  This process definitely takes more time, and it can be annoying to try to pull out a small piece of code from within a larger and more complicated routine, but it is worthwhile.  Here are the <a href=\"https://stackoverflow.com/help/mcve\">stack overflow guidelines</a> on creating such an example!"}, {"owner": {"reputation": 3, "user_id": 10886212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QiRdhwHtIgk/AAAAAAAAAAI/AAAAAAAACRg/vhazO2ePCH4/photo.jpg?sz=128", "display_name": "Nicolas Enrique Bourbon", "link": "https://stackoverflow.com/users/10886212/nicolas-enrique-bourbon"}, "reply_to_user": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "edited": false, "score": 0, "creation_date": 1549034729, "post_id": 54451127, "comment_id": 95771791, "body": "thanks, and yes... I&#39;ll certainly take into account."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10886212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QiRdhwHtIgk/AAAAAAAAAAI/AAAAAAAACRg/vhazO2ePCH4/photo.jpg?sz=128", "display_name": "Nicolas Enrique Bourbon", "link": "https://stackoverflow.com/users/10886212/nicolas-enrique-bourbon"}, "edited": false, "score": 0, "creation_date": 1548953751, "post_id": 54464456, "comment_id": 95739086, "body": "I think you got exactly my question and your last part of transforming the levels 0 and level1 into rows and columns is exactly what I wanted.  Nevertheless my table that looks very much like the one you simulated rejects that transformation with this message   Traceback (most recent call last):  KeyError: &#39;level_1&#39;"}, {"owner": {"reputation": 3, "user_id": 10886212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QiRdhwHtIgk/AAAAAAAAAAI/AAAAAAAACRg/vhazO2ePCH4/photo.jpg?sz=128", "display_name": "Nicolas Enrique Bourbon", "link": "https://stackoverflow.com/users/10886212/nicolas-enrique-bourbon"}, "edited": false, "score": 0, "creation_date": 1548953872, "post_id": 54464456, "comment_id": 95739151, "body": "If I type  dayofweek.index I guet MultiIndex(levels=[[2016, 2017, 2018, 2019], [&#39;Friday&#39;, &#39;Monday&#39;, &#39;Saturday&#39;, &#39;Sunday&#39;, &#39;Thursday&#39;, &#39;Tuesday&#39;, &#39;Wednesday&#39;]],            labels=[[0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3], [0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6]],            names=[&#39;YR&#39;, &#39;DOW&#39;])"}, {"owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "reply_to_user": {"reputation": 3, "user_id": 10886212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QiRdhwHtIgk/AAAAAAAAAAI/AAAAAAAACRg/vhazO2ePCH4/photo.jpg?sz=128", "display_name": "Nicolas Enrique Bourbon", "link": "https://stackoverflow.com/users/10886212/nicolas-enrique-bourbon"}, "edited": false, "score": 0, "creation_date": 1548961953, "post_id": 54464456, "comment_id": 95743227, "body": "Since your indexes have names, they are preserved when doing <code>reset_index()</code>, the <code>pivot</code> must then use the correct column names: <code>df.reset_index.pivot(columns=&#39;YR&#39;, index=&#39;DOW&#39;, values=&#39;&lt;name of the column containing the values&gt;&#39;)</code>"}, {"owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "reply_to_user": {"reputation": 3, "user_id": 10886212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QiRdhwHtIgk/AAAAAAAAAAI/AAAAAAAACRg/vhazO2ePCH4/photo.jpg?sz=128", "display_name": "Nicolas Enrique Bourbon", "link": "https://stackoverflow.com/users/10886212/nicolas-enrique-bourbon"}, "edited": false, "score": 0, "creation_date": 1549051488, "post_id": 54464456, "comment_id": 95779587, "body": "If you consider your question answered, consider accepting the answer by clicking on the check mark on the left to close the topic"}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 2, "last_activity_date": 1548950138, "creation_date": 1548950138, "answer_id": 54464456, "question_id": 54451127, "link": "https://stackoverflow.com/questions/54451127/creating-a-heatmap-from-a-pandas-multiindex-series/54464456#54464456", "title": "Creating a HeatMap from a Pandas MultiIndex Series", "body": "<p>If you have a DataFrame like this:</p>\n\n<pre><code>years = range(2016,2019)\nmonths = range(1,6)\n\ndf = pd.DataFrame(index=pd.MultiIndex.from_product([years,months]))\ndf['vals'] = np.random.random(size=len(df))\n</code></pre>\n\n<p>You can reformat the data to a rectangular shape using:</p>\n\n<pre><code>df2 = df.reset_index().pivot(columns='level_0',index='level_1',values='vals')\n\nsns.heatmap(df2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/g1M81.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g1M81.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 10886212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QiRdhwHtIgk/AAAAAAAAAAI/AAAAAAAACRg/vhazO2ePCH4/photo.jpg?sz=128", "display_name": "Nicolas Enrique Bourbon", "link": "https://stackoverflow.com/users/10886212/nicolas-enrique-bourbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2658, "favorite_count": 0, "accepted_answer_id": 54464456, "answer_count": 1, "score": -2, "last_activity_date": 1548950138, "creation_date": 1548890854, "question_id": 54451127, "link": "https://stackoverflow.com/questions/54451127/creating-a-heatmap-from-a-pandas-multiindex-series", "title": "Creating a HeatMap from a Pandas MultiIndex Series", "body": "<p>I have a Pandas DF and I need to create a Heatmap. My data looks like this and I'd like to put the Years in Columns, the Days in rows and then use that with Seaborn to create a heatmap</p>\n\n<p>I tried multiple ways but I was always getting \"inconsistent shape\" when I chose the DF, so any recommendation on how to transform it?</p>\n\n<p>Year and Days are the index of this series</p>\n\n<p>2016  </p>\n\n<pre><code>  Tuesday  4\n  Wednesady 6\n  .....\n</code></pre>\n\n<p>2017  </p>\n\n<pre><code>  Tuesday  4.4\n  Monday   3.5\n ....\n</code></pre>\n\n<p>import seaborn as sns\nax = sns.heatmap(dayofweek)</p>\n"}, {"tags": ["python", "tensorflow", "word2vec"], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "edited": false, "score": 0, "creation_date": 1548892953, "post_id": 54451276, "comment_id": 95711226, "body": "Very helpful, thanks! However I have one more issue. I don&#39;t have a lot of experience with tf (mostly used keras) and I don&#39;t know what command I should use to calculate the prediction, especially for the word2vec model. The code is linked to the original question. Can you also suggest how to get a prediction with that model?"}, {"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "reply_to_user": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "edited": false, "score": 0, "creation_date": 1548893434, "post_id": 54451276, "comment_id": 95711351, "body": "I had a look at the code. Word2vec (implemented with Skipgram), is not a model that you can use to make predictions in the exact sense. Usually, what you would do in this case, is load the pretrained <code>embedding</code> matrix into another model, and initialize the other model&#39;s embedding matrix with the loaded values."}, {"owner": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "edited": false, "score": 0, "creation_date": 1548894433, "post_id": 54451276, "comment_id": 95711616, "body": "What exactly do you mean by that? Use the embedding as a &quot;seed&quot; for a new model?"}, {"owner": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "edited": false, "score": 0, "creation_date": 1548926885, "post_id": 54451276, "comment_id": 95722626, "body": "Hi, that&#39;s not exactly it. I already store the embeddings once training is finished, I just want to generate new embeddings. How can I use the existing rudimentary nn and weights to calculate a new embedding?"}, {"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "reply_to_user": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "edited": false, "score": 0, "creation_date": 1548927078, "post_id": 54451276, "comment_id": 95722730, "body": "You can&#39;t. The word2vec model is not something that you use to make predictions on unseen examples. What you can do, on the other hand, is retrieve the learned embeddings for the samples that the word2vec model has already seen, and use them for your specific use case. Read more about the word2vec (skip-gram, cbow) to see how it should be used."}, {"owner": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "edited": false, "score": 0, "creation_date": 1549150963, "post_id": 54451276, "comment_id": 95802218, "body": "I have weights and biases from the model. I have the embedding of my original batch and then I make some changes to my word and want to find the new embedding. Can&#39;t I use the weights and bias to get the new embedding?"}, {"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "reply_to_user": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "edited": false, "score": 0, "creation_date": 1549152425, "post_id": 54451276, "comment_id": 95802481, "body": "The embeddings your model has learned are just for the words the model has seen during the training phase. The size of the embedding matrix is equal to the number of words. Therefore, once you load the model, you can only retrieve an embedding for the words the model has seen(learned the embeddings for), during the training phase."}], "tags": [], "owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "is_accepted": true, "score": 1, "last_activity_date": 1548895424, "last_edit_date": 1548895424, "creation_date": 1548891814, "answer_id": 54451276, "question_id": 54451105, "link": "https://stackoverflow.com/questions/54451105/how-to-do-prediction-using-trained-and-stored-tensorflow-model/54451276#54451276", "title": "How to do prediction using trained and stored tensorflow model", "body": "<p>Based on how you are loading the checkpoint I assume this should be the best way to use it for inference.</p>\n\n<p>Load the placeholders:</p>\n\n<pre><code>input = tf.get_default_graph().get_tensor_by_name(\"Placeholders/placeholder_name:0\")\n....\n</code></pre>\n\n<p>Load the op you use to perform prediction:</p>\n\n<pre><code>prediction = tf.get_default_graph().get_tensor_by_name(\"SomewhereInsideGraph/prediction_op_name:0\")\n</code></pre>\n\n<p>Create a session, execute the prediction op, and feed data in the placeholders.</p>\n\n<pre><code>sess = tf.Session()\nsess.run(prediction, feed_dict={input:input_data})\n</code></pre>\n\n<p>On the other hand, what I prefer to do is always create have the whole model creation inside a constructor of a class. Then, what I would do is the following:</p>\n\n<pre><code>tf.reset_default_graph()\nmodel = ModelClass()\nloader = tf.train.Saver()\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\nloader.restore(sess, path_to_checkpoint_dir)\n</code></pre>\n\n<p>Since you want to load the embeddings from a trained word2vec model in another model, you should do something like:</p>\n\n<pre><code>embeddings_new_model = tf.Variable(...,name=\"embeddings\")\nembedding_saver = tf.train.Saver({\"embeddings_word2vec\": embeddings_new_model})\nwith tf.Session() as sess:\n    embedding_saver.restore(sess, \"word2vec_model_path\")\n</code></pre>\n\n<p>Assuming that the embeddings variable in the word2vec model is named <code>embeddings_word2vec</code>.</p>\n"}], "owner": {"reputation": 972, "user_id": 5208088, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b9ad0a35608d37b10dd4d08352ad70c?s=128&d=identicon&r=PG&f=1", "display_name": "Mnemosyne", "link": "https://stackoverflow.com/users/5208088/mnemosyne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 54451276, "answer_count": 1, "score": 0, "last_activity_date": 1548895424, "creation_date": 1548890732, "last_edit_date": 1548892974, "question_id": 54451105, "link": "https://stackoverflow.com/questions/54451105/how-to-do-prediction-using-trained-and-stored-tensorflow-model", "title": "How to do prediction using trained and stored tensorflow model", "body": "<p>I have an existing trained model (specifically tensorflow word2vec <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/udacity/5_word2vec.ipynb\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/udacity/5_word2vec.ipynb</a>). I restore the existing model well enough:</p>\n\n<pre><code>model1 = tf.train.import_meta_graph(\"models/model.meta\")\nmodel1.restore(sess, tf.train.latest_checkpoint(\"model/\"))\n</code></pre>\n\n<p>But I don't know how to use the newly loaded (and trained) model to make predictions. How do I do predictions with a restored model?</p>\n\n<p>Edit:</p>\n\n<p>model code from the official tensorflow repo <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py</a></p>\n"}, {"tags": ["python", "string-formatting"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548890766, "post_id": 54451081, "comment_id": 95710692, "body": "I assume it&#39;s going to be regex and out of my field, but what of <code>&quot;April&#47;May 30-1&quot;</code>?"}, {"owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548890827, "post_id": 54451081, "comment_id": 95710708, "body": "You&#39;re right. I think I&#39;ll manage these exceptions manually... what a pain. Thanks for pointing it out."}], "answers": [{"comments": [{"owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "edited": false, "score": 0, "creation_date": 1548891642, "post_id": 54451199, "comment_id": 95710907, "body": "Note that this is using <code>search</code> instead of <code>match</code> to make the first example work - the second example actually matches the entire string from the start, so you could consider using <code>match</code> instead."}], "tags": [], "owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "is_accepted": false, "score": 3, "last_activity_date": 1548892573, "last_edit_date": 1548892573, "creation_date": 1548891320, "answer_id": 54451199, "question_id": 54451081, "link": "https://stackoverflow.com/questions/54451081/python-strptime-with-variable-text/54451199#54451199", "title": "Python strptime with variable text", "body": "<p>There is no wildcard directive for <code>strptime</code>. You can see a list of the directives here <a href=\"https://docs.python.org/3/library/time.html#time.strftime\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/time.html#time.strftime</a></p>\n\n<p>A sensible way to solve your problem would be to combine a regex with the <code>strptime</code>. I.e. filter out the text with the regex and put the remaining, restricted text into the <code>strptime</code>, or by just passing the matched groups directly into <code>datetime</code>.</p>\n\n<pre><code>import re\nfrom datetime import datetime\n\nss = [\n  \"January 29-30 Meeting - 2013\",\n  \"March 19-20 Meeting - 2013\",\n  \"April/May 30-1 Meeting - 2013\",\n  \"June 18-19 Meeting - 2013\",\n  \"July 30-31 Meeting - 2013\",\n  \"September 17-18 Meeting - 2013\",\n  \"October 29-30 Meeting - 2013\",\n  \"December 17-18 Meeting - 2013\"\n]\n\nFORMAT = '%B %d %Y'\n\nfor s in ss:\n    match = re.search(r\"(\\w+)\\s(\\d+)-(\\d+)\\s.*\\s(\\d{4})\", s)\n    if match:\n        dt1 = datetime.strptime(f'{match.group(1)} {match.group(2)} {match.group(4)}', FORMAT)\n        dt2 = datetime.strptime(f'{match.group(1)} {match.group(3)} {match.group(4)}', FORMAT)\n\n        print (dt1, dt2)\n</code></pre>\n\n<p>Note that you also have the <code>April/May 30-1</code> complication in there, I'm not addressing that, since you are not asking about that.</p>\n\n<p>As a bonus though:</p>\n\n<pre><code>for s in ss:\n    match = re.search(r\"((\\w+)/)?(\\w+)\\s(\\d+)-(\\d+)\\s.*\\s(\\d{4})\", s)\n    if match:\n        dt1 = datetime.strptime(\n            f'{match.group(2) if match.group(2) else match.group(3)} {match.group(4)} {match.group(6)}', FORMAT)\n        dt2 = datetime.strptime(\n            f'{match.group(3)} {match.group(5)} {match.group(6)}', FORMAT)\n\n        print (dt1, dt2)\n</code></pre>\n\n<p>Also, note the interesting, if a bit hacky solution offered by @blhsing below, involving <code>_strptime.TimeRE</code>. I would not recommend doing anything like that, but it is interesting to know you could actually change the behaviour of <code>strptime</code> itself that way.</p>\n"}, {"comments": [{"owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "edited": false, "score": 0, "creation_date": 1548892664, "post_id": 54451291, "comment_id": 95711150, "body": "I think your answer is interesting, but not really a recommended way to go about it, since it changes the behaviour globally and could have very unexpected side effects for a larger script. I certainly would not call it Pythonic."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 1, "last_activity_date": 1548891914, "creation_date": 1548891914, "answer_id": 54451291, "question_id": 54451081, "link": "https://stackoverflow.com/questions/54451081/python-strptime-with-variable-text/54451291#54451291", "title": "Python strptime with variable text", "body": "<p>You can override the <code>_strptime.TimeRE</code> object with an additional directive that lazily matches any sequence of characters:</p>\n\n<pre><code>from datetime import datetime\nimport _strptime\nTimeRE = _strptime.TimeRE()\nTimeRE.update({'x': '.*?'})\n_strptime._TimeRE_cache = TimeRE\nprint(datetime.strptime(\"January 29-30 Meeting - 2013\", \"%B %d-%x - %Y\"))\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>2013-01-29 00:00:00\n</code></pre>\n"}], "owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 54451291, "answer_count": 2, "score": 4, "last_activity_date": 1548892573, "creation_date": 1548890570, "question_id": 54451081, "link": "https://stackoverflow.com/questions/54451081/python-strptime-with-variable-text", "title": "Python strptime with variable text", "body": "<p>I have a list of dates as strings. It looks like this:</p>\n\n<pre><code>[\n  \"January 29-30 Meeting - 2013\",\n  \"March 19-20 Meeting - 2013\",\n  \"April/May 30-1 Meeting - 2013\",\n  \"June 18-19 Meeting - 2013\",\n  \"July 30-31 Meeting - 2013\",\n  \"September 17-18 Meeting - 2013\",\n  \"October 29-30 Meeting - 2013\",\n  \"December 17-18 Meeting - 2013\"\n]\n</code></pre>\n\n<p>I need to parse these dates to <code>datetime</code> format.</p>\n\n<pre><code>datetime.strptime(\"January 29-30 Meeting - 2013\", \"%B %d-[something] - %Y\")\ndatetime.strptime(\"January 29-30 Meeting - 2013\", \"%B [something]-%d [something] - %Y\")\n</code></pre>\n\n<p>Is there any way I can tell strptime, in the format specifier, to ignore the text in <code>[something]</code> since it can be variable? Is there a format specifier for variable text?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1548890719, "post_id": 54451038, "comment_id": 95710682, "body": "That&#39;s <a href=\"https://en.wikipedia.org/wiki/Longest_common_subsequence_problem\" rel=\"nofollow noreferrer\">longest common subsequence</a> in disguise."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1548891091, "post_id": 54451038, "comment_id": 95710783, "body": "Googling for longest common subsequence algorithms doesn&#39;t turn up anything better for the 2-sequence case than the straightforward dynamic programming solution, aside from the simple optimization of only keeping one row of the table at a time."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 2, "creation_date": 1548891343, "post_id": 54451038, "comment_id": 95710835, "body": "Welcome to StackOverflow! It seems that your code currently works, and you are looking to improve it. Generally these questions are too opinionated for this site, but you might find better luck at <a href=\"//codereview.stackexchange.com/tour\">CodeReview.SE</a>. Remember to read <a href=\"//codereview.stackexchange.com/help/on-topic\">their requirements</a> as they are a bit more strict than this site."}], "owner": {"reputation": 11, "user_id": 10993078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wMxwjbsTG14/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMIAVbtDFdKohkHIFn7l2cDlRIObA/mo/photo.jpg?sz=128", "display_name": "Gideo", "link": "https://stackoverflow.com/users/10993078/gideo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 562, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1548917034, "creation_date": 1548890306, "last_edit_date": 1548917034, "question_id": 54451038, "link": "https://stackoverflow.com/questions/54451038/algorithm-problem-for-deletion-distance-between-2-string", "title": "Algorithm problem for Deletion Distance between 2 string", "body": "<p>I was solving this problem at Pramp and I have trouble figuring out the algorithm for this problem. I'll paste the problem description and how I kind of solved it. It's the correct solution.  It is similar to the edit distance algorithm and I used the same approach.  I just wanted to see what are other ways to solve this problem.</p>\n\n<blockquote>\n  <p>The deletion distance of two strings is the minimum number of characters you need to delete in the two strings in order to get the same string. For instance, the deletion distance between \"heat\" and \"hit\" is 3:</p>\n  \n  <p>By deleting 'e' and 'a' in \"heat\", and 'i' in \"hit\", we get the string \"ht\" in both cases.\n  We cannot get the same string from both strings by deleting 2 letters or fewer.\n  Given the strings str1 and str2, write an efficient function deletionDistance that returns the deletion distance between them. Explain how your function works, and analyze its time and space complexities.</p>\n  \n  <p>Examples:<br>\n  input:  str1 = \"dog\", str2 = \"frog\"<br>\n  output: 3<br>\n  input:  str1 = \"some\", str2 = \"some\"<br>\n  output: 0<br>\n  input:  str1 = \"some\", str2 = \"thing\"<br>\n  output: 9<br>\n  input:  str1 = \"\", str2 = \"\"<br>\n  output: 0  </p>\n</blockquote>\n\n<p>What I want to do in this solution, is to use dynamic programming in order to build a function that calculates opt(str1Len, str2Len). Notice the following:\nI use dynamic programming methods to calculate opt(str1Len, str2Len), i.e. the deletion distance for the two strings, by calculating opt(i,j) for all 0 \u2264 i \u2264 str1Len, 0 \u2264 j \u2264 str2Len, and saving previous values </p>\n\n<pre><code>  def deletion_distance(s1, s2):\n    m = [[0 for j in range(len(s2) +1)] for i in range(len(s1)+1)] \n    for i in range(len(s1)+1):\n      for j in range(len(s2)+1):\n        if i == 0:\n          m[i][j] = j\n        elif j == 0:\n          m[i][j] = i\n        elif s1[i-1] == s2[j-1]:\n          m[i][j] = m[i-1][j-1]\n        else:\n          m[i][j] = 1 + min(m[i-1][j], m[i][j-1])\n    return m[len(s1)][len(s2)]   \n</code></pre>\n"}, {"tags": ["python", "if-statement", "schedule"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9969998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03aeaa9cc5e898fd72bbb82bcb2dff5?s=128&d=identicon&r=PG&f=1", "display_name": "clcarver", "link": "https://stackoverflow.com/users/9969998/clcarver"}, "edited": false, "score": 0, "creation_date": 1548955972, "post_id": 54451197, "comment_id": 95740251, "body": "Ah, that is probably much more stable thank you! But what if I want the 15-minute job to only run on the weekdays too, or in this case, only run when the stock market is open? Is there a way to still use logic?"}, {"owner": {"reputation": 137, "user_id": 10992197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmcg6.jpg?s=128&g=1", "display_name": "JLynchDesigns", "link": "https://stackoverflow.com/users/10992197/jlynchdesigns"}, "reply_to_user": {"reputation": 11, "user_id": 9969998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03aeaa9cc5e898fd72bbb82bcb2dff5?s=128&d=identicon&r=PG&f=1", "display_name": "clcarver", "link": "https://stackoverflow.com/users/9969998/clcarver"}, "edited": false, "score": 0, "creation_date": 1548956100, "post_id": 54451197, "comment_id": 95740321, "body": "If you want that, just put the 15 minute job scheduler in a function, make 5 more schedulers for the weekdays to run just the 15 minute scheduler, and then make two more schedulers for the weekends to cancel the 15 minute scheduler. Make sense?"}], "tags": [], "owner": {"reputation": 137, "user_id": 10992197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmcg6.jpg?s=128&g=1", "display_name": "JLynchDesigns", "link": "https://stackoverflow.com/users/10992197/jlynchdesigns"}, "is_accepted": false, "score": 3, "last_activity_date": 1548957710, "last_edit_date": 1548957710, "creation_date": 1548891317, "answer_id": 54451197, "question_id": 54451027, "link": "https://stackoverflow.com/questions/54451027/using-python-with-schedule-library-with-an-if-statement/54451197#54451197", "title": "Using Python with Schedule library with an IF statement", "body": "<p>Instead of using an IF statement, use this instead:</p>\n\n<pre><code>schedule.every(15).minutes.do(fifteen_min_job)\nschedule.every().monday.at(\"09:32\").do(daily_job, text='daily job...')\nschedule.every().tuesday.at(\"09:32\").do(daily_job, text='daily job...')\nschedule.every().wednesday.at(\"09:32\").do(daily_job, text='daily job...')\nschedule.every().thursday.at(\"09:32\").do(daily_job, text='daily job...')\nschedule.every().friday.at(\"09:32\").do(daily_job, text='daily job...')\n</code></pre>\n\n<p>This method is a lot more stable in the long run!</p>\n\n<p>For running the 15 minute job on weekdays as well, just do this:</p>\n\n<pre><code>def weekdayJob:\n    schedule.every(15).minutes.do(fifteen_min_job).tag(\"fifteen\")\n\ndef clearJob:\n    schedule.clear(\"fifteen\")\n\nschedule.every().monday.at(\"00:00\").do(weekdayJob)\nschedule.every().saturday.at(\"00:00\").do(clearJob)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9969998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03aeaa9cc5e898fd72bbb82bcb2dff5?s=128&d=identicon&r=PG&f=1", "display_name": "clcarver", "link": "https://stackoverflow.com/users/9969998/clcarver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548957710, "creation_date": 1548890224, "last_edit_date": 1548890823, "question_id": 54451027, "link": "https://stackoverflow.com/questions/54451027/using-python-with-schedule-library-with-an-if-statement", "title": "Using Python with Schedule library with an IF statement", "body": "<p>Hoping for some help with scheduling a python script. I understand the syntax, but since I've added the IF statement logic, I can't get the script to run for two days in a row. The next morning it will either only run the daily job OR skips it entirely and only runs the fifteen-minute job. I need the if logic so the jobs runs on the weekdays only. Does anyone have a fix or a clever workaround to just have it run on on a weekday?</p>\n\n<p>Thanks for the help. I included a simplified version of my code below:</p>\n\n<pre><code>import schedule\nimport time\n\ndef daily_job(text):\n    print(text)\n\ndef fifteen_min_job():\n    print('15 minute job...')\n\nif True: # For example only run on weekdays\n    schedule.every().day.at(\"09:32\").do(daily_job, text='daily job...')\n    schedule.every(15).minutes.do(fifteen_min_job)\n\nwhile True:\n    schedule.run_pending()\n    time.sleep(1)\n</code></pre>\n"}, {"tags": ["python", "pandas", "text"], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 4633341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z34J5.png?s=128&g=1", "display_name": "ignacio pacheco", "link": "https://stackoverflow.com/users/4633341/ignacio-pacheco"}, "is_accepted": true, "score": 1, "last_activity_date": 1548897016, "creation_date": 1548897016, "answer_id": 54451951, "question_id": 54451016, "link": "https://stackoverflow.com/questions/54451016/parsing-dirty-text-file-with-pandas-header-issue/54451951#54451951", "title": "Parsing Dirty Text File with Pandas Header Issue", "body": "<p>I try with the file you linked and one i downloaded i think from 2015:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('bhcf9909.txt',sep='^')\nfirst_headers = df.columns.tolist()\ndf_more_actual = pd.read_csv('bhcf1506.txt',sep='^')\nsecond_headers = df_more_actual.columns.tolist()\nprint(df.shape)\nprint(df_more_actual.shape)\n# df_more_actual has more columns than first one\n# Normalize column names to avoid duplicate columns\ndf.columns = df.columns.str.upper()\ndf_more_actual.columns = df_more_actual.columns.str.upper()\nnew_df = df.append(df_parsed2)\nprint(new_df.shape)\n</code></pre>\n\n<p>The final dataframe has the rows of both csv, and the union of columns from them.\nYou can do this for the csv of each quarter and appending it so finally you will have all the rows of them and the union of the columns.</p>\n"}], "owner": {"reputation": 697, "user_id": 1041958, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/k80sC.jpg?s=128&g=1", "display_name": "StormsEdge", "link": "https://stackoverflow.com/users/1041958/stormsedge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 54451951, "answer_count": 1, "score": 0, "last_activity_date": 1548897016, "creation_date": 1548890167, "question_id": 54451016, "link": "https://stackoverflow.com/questions/54451016/parsing-dirty-text-file-with-pandas-header-issue", "title": "Parsing Dirty Text File with Pandas Header Issue", "body": "<p>I am trying to parse a text file created back in '99 that is slightly difficult to deal with.  The headers are in the first row and are delimited by '^' (the entire file is ^ delimited).  The issue is that there are characters that appear to be thrown in (long lines of spaces for example appear to separate the headers from the rest of the data points in the file. (example file located at <a href=\"https://www.chicagofed.org/applications/bhc/bhc-home\" rel=\"nofollow noreferrer\">https://www.chicagofed.org/applications/bhc/bhc-home</a>   My example was referencing Q3 1999).</p>\n\n<p>Issues:\n1) Too many headers to manually create them and I need to do this for many files that may have new headers as we move forward or backwards throughout the time series\n2) I need to recreate the headers from the file and then remove them so that I don't pollute my entire first row with header duplicates.  I realize I could probably slice the dataframe [1:] after the fact and just get rid of it, but that's sloppy and i'm sure there's a better way.\n3) the unreported fields by company appear to show up as \"^^^^^^^^^\", which is fine, but will pandas automatically populate NaNs in that scenario?</p>\n\n<p>My attempt below is simply trying to isolate the headers, but i'm really stuck on the larger issue of the way the text file is structured.  Any recommendations or obvious easy tricks i'm missing?</p>\n\n<pre><code>from zipfile import ZipFile\nimport pandas as pd\n\ndef main():\n    #Driver\n\n    FILENAME_PREFIX = 'bhcf'\n    FILE_TYPE = '.txt'\n    field_headers = []\n\n    with ZipFile('reg_data.zip', 'r') as zip:\n\n        with zip.open(FILENAME_PREFIX + '9909'+ FILE_TYPE) as qtr_file:\n            headers_df = pd.read_csv(qtr_file, sep='^', header=None)\n\n            headers_df = headers_df[:1]\n            headers_array = headers_df.values[0]\n\n            parsed_data = pd.read_csv(qtr_file, sep='^',header=headers_array)\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10433093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d41e1a96310f76fcb3594b213f48c1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Kay Tukendorf", "link": "https://stackoverflow.com/users/10433093/kay-tukendorf"}, "edited": false, "score": 0, "creation_date": 1548930968, "post_id": 54452200, "comment_id": 95725124, "body": "This works fine for a single image being the entire figure, but what if I&#39;d like multiple images on different subplots? Would I have to take the first approach?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 37, "user_id": 10433093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d41e1a96310f76fcb3594b213f48c1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Kay Tukendorf", "link": "https://stackoverflow.com/users/10433093/kay-tukendorf"}, "edited": false, "score": 0, "creation_date": 1548938335, "post_id": 54452200, "comment_id": 95729481, "body": "Both should work for several subplots as well, I just used a big subplot instead for the sake of the example."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1548911770, "last_edit_date": 1548911770, "creation_date": 1548899323, "answer_id": 54452200, "question_id": 54451011, "link": "https://stackoverflow.com/questions/54451011/jagged-output-from-dot-file/54452200#54452200", "title": "&#39;Jagged&#39; output from dot file", "body": "<p>There are several issues. </p>\n\n<ul>\n<li>The image produced by <code>dot</code> is not actually the exact size you specify in <code>-Gsize={},{}!</code> parameter.</li>\n<li>There are rounding errors, because the matplotlib axes is positioned in relative figure coordinates and those later do not precisely match the integer positions of pixels.</li>\n<li>Finally, the axes to show the image in is extremely small, so the above effects become even more pronounced.</li>\n</ul>\n\n<p>A solution one can come up with is to find the approximate size of the axes, call the <code>dot</code> program and retrieve the image from it. Then <em>set</em> the actual size of the axes according to the actual image size (this might shift the axes by a few pixels compared to their original position). \nIn the code below I took a bigger axes. Also note that a higher dpi or figure size will increase the readability.</p>\n\n<pre><code>import numpy as np\nfrom subprocess import check_call\nfrom PIL import Image\nimport matplotlib.pyplot as plt\nimport matplotlib.transforms as mtrans\n\ndpi = 100\nfig = plt.figure(dpi=dpi)\ngridSpec = fig.add_gridspec(3, 2)\nax = plt.subplot(gridSpec.new_subplotspec((2, 1)))\n#ax = fig.add_subplot(111)\n\nax.tick_params(axis = \"both\", which = \"both\", bottom = False, top = False, \n                        labelbottom = False, right = False, left = False, labelleft = False)\nax.set_xlabel(\"Final model\")\n\n# calculate nominal size supplied to `dot`\next = ax.get_position().transformed(fig.transFigure).extents\nbbox = mtrans.Bbox.from_extents(np.array(ext).astype(int))\n\nheight = bbox.height\nwidth = bbox.width\n\n# get image from dot\ncheck_call(['dot','-Tpng', \"-Gsize={},{}!\".format(width/100, height/100),\n            \"-Gdpi={}\".format(100), \"-Gratio=fill\", 'random_tree.dot','-o','random.png'])\nrandImg = np.array(Image.open(\"random.png\"))\n\n# get ACTUAL size from produced image\naheight, awidth, _ = randImg.shape\n\n# create new bounding box from actual size\nabbox = mtrans.Bbox.from_bounds(bbox.x0, bbox.y0, awidth, aheight)\n# transform bbox to figure coordintes\nabboxf = bbox.transformed(fig.transFigure.inverted())\n# Use the thus created bbox to modify the position of the axes\nax.set_position(abboxf)\n\n# finally plot the data\nax.imshow(randImg, aspect = \"auto\")\n# save image (this should now be correct)\nplt.savefig(\"randomdot_mpl.png\")\n# show image (this might still be slightly wrong, \n#             if the GUI changes the figure size on the fly.)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/z800d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z800d.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see the result is still not perfect (e.g the l in \"values\" is slightly thicker). In general, a much better solution might be to not place the image inside the axes at all, but to use a <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figimage.html\" rel=\"nofollow noreferrer\"><code>figimage</code></a>, which is a non-resampled image placed inside the figure. If you still want to show the axes around it, you need to make the axes transparent to \"see-through\".</p>\n\n<p>This would be accomplished by the following code</p>\n\n<pre><code>import numpy as np\nfrom subprocess import check_call\nfrom PIL import Image\nimport matplotlib.pyplot as plt\nimport matplotlib.transforms as mtrans\n\ndpi = 100\nfig = plt.figure(dpi=dpi)\n#gridSpec = fig.add_gridspec(3, 2)\n#ax = plt.subplot(gridSpec.new_subplotspec((2, 1)))\nax = fig.add_subplot(111)\n\nax.tick_params(axis = \"both\", which = \"both\", bottom = False, top = False, \n                        labelbottom = False, right = False, left = False, labelleft = False)\nax.patch.set_visible(False)\nax.set_xlabel(\"Final model\")\n\n# calculate nominal size supplied to `dot`\next = ax.get_position().transformed(fig.transFigure).extents\nbbox = mtrans.Bbox.from_extents(np.array(ext).astype(int))\n\nheight = bbox.height\nwidth = bbox.width\n\n# get image from dot\ncheck_call(['dot','-Tpng', \"-Gsize={},{}!\".format(width/100, height/100),\n            \"-Gdpi={}\".format(100), \"-Gratio=fill\", 'random_tree.dot','-o','random.png'])\nrandImg = np.array(Image.open(\"random.png\"))\n\n# produce a figimage, i.e. a non-resampled image\nfig.figimage(randImg, xo=bbox.x0, yo=bbox.y0)\n\n# save image (this should now be perfect)\nplt.savefig(\"randomdot_mpl.png\")\n# show image (this should now be perfect)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VMXMA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VMXMA.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 37, "user_id": 10433093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d41e1a96310f76fcb3594b213f48c1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Kay Tukendorf", "link": "https://stackoverflow.com/users/10433093/kay-tukendorf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 54452200, "answer_count": 1, "score": 1, "last_activity_date": 1548911770, "creation_date": 1548890139, "last_edit_date": 1548893197, "question_id": 54451011, "link": "https://stackoverflow.com/questions/54451011/jagged-output-from-dot-file", "title": "&#39;Jagged&#39; output from dot file", "body": "<p>I have been trying to insert a .dot graph from an sklearn decision tree into a pyplot subplot, and have been struggling to do so. The library pygraphviz is refusing to work on my Windows system, so I've used the following to insert the images:</p>\n\n<pre><code>from subprocess import check_call\nfrom PIL import Image\nimport matplotlib.pyplot as plt \n\ngridSpec = fig.add_gridspec(3, 2)\ntreeSubPlot = plt.subplot(gridSpec.new_subplotspec((2, 1)))\ntreeSubPlot.tick_params(axis = \"both\", which = \"both\", bottom = False, top = False, labelbottom = False, right = False, left = False, labelleft = False)\ntreeSubPlot.set_xlabel(\"Final model\")\n\n# Obtain the size of a single plot in inches to inform the dot picture creator.\nheight = treeSubPlot.get_window_extent().y1 - treeSubPlot.get_window_extent().y0\nwidth = treeSubPlot.get_window_extent().x1 - treeSubPlot.get_window_extent().x0\n\ncheck_call(['dot','-Tpng', \"-Gsize=\" + str(width/100) + \",\" + str(height/100) + \"!\", \"-Gdpi=100\", \"-Gratio=fill\", 'random_tree.dot','-o','random.png'])\nrandImg = Image.open(\"random.png\")\ntreeSubplot.imshow(randImg, aspect = \"auto\")\n</code></pre>\n\n<p>With the .dot file:</p>\n\n<pre><code>digraph Tree {\nnode [shape=box] ;\n0 [label=\"B field &lt;= 332.72\\nsamples = 19\\nvalue = 0.41\"] ;\n1 [label=\"samples = 11\\nvalue = 0.67\"] ;\n0 -&gt; 1 [labeldistance=2.5, labelangle=45, headlabel=\"True\"] ;\n2 [label=\"B field &lt;= 576.73\\nsamples = 8\\nvalue = 0.04\"] ;\n0 -&gt; 2 [labeldistance=2.5, labelangle=-45, headlabel=\"False\"] ;\n3 [label=\"samples = 4\\nvalue = 0.05\"] ;\n2 -&gt; 3 ;\n4 [label=\"samples = 4\\nvalue = 0.03\"] ;\n2 -&gt; 4 ;\n}\n</code></pre>\n\n<p>What results is the plot, but it looks extremely 'jagged', for lack of a better term:\n<a href=\"https://i.stack.imgur.com/JyO0W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JyO0W.png\" alt=\"Resulting subplot\"></a></p>\n\n<p>Are there any settings I can use to stop this? I'm trying to make the image to fit the subplot perfectly but it's still jagged.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 148, "user_id": 4526204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/snoEt.png?s=128&g=1", "display_name": "Vanessa", "link": "https://stackoverflow.com/users/4526204/vanessa"}, "edited": false, "score": 0, "creation_date": 1548892135, "post_id": 54450999, "comment_id": 95711035, "body": "Have you tried using <code>CurrentUserDefault</code> field? (like they show in the example <a href=\"https://www.django-rest-framework.org/api-guide/validators/#currentuserdefault\" rel=\"nofollow noreferrer\">here</a>). This way you don&#39;t even have to pass <code>requestor</code> in the payload, the serializer would get <code>request.user</code> &quot;automagically&quot;."}, {"owner": {"reputation": 691, "user_id": 2543982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5679224a8a4ec76343fa43507e429d4a?s=128&d=identicon&r=PG", "display_name": "Lombax", "link": "https://stackoverflow.com/users/2543982/lombax"}, "reply_to_user": {"reputation": 148, "user_id": 4526204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/snoEt.png?s=128&g=1", "display_name": "Vanessa", "link": "https://stackoverflow.com/users/4526204/vanessa"}, "edited": false, "score": 1, "creation_date": 1548892565, "post_id": 54450999, "comment_id": 95711127, "body": "Thank you very much for the suggestion. I&#39;ll give it a go."}], "owner": {"reputation": 691, "user_id": 2543982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5679224a8a4ec76343fa43507e429d4a?s=128&d=identicon&r=PG", "display_name": "Lombax", "link": "https://stackoverflow.com/users/2543982/lombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548890380, "creation_date": 1548890053, "last_edit_date": 1548890380, "question_id": 54450999, "link": "https://stackoverflow.com/questions/54450999/properly-serialize-a-value-so-it-is-passed-to-currentuserfield-properly", "title": "Properly serialize a value so it is passed to CurrentUserField() properly", "body": "<p>I started using Django REST this week, and I am running into something I do not understand. </p>\n\n<p>I building a POST that takes in the following payload: </p>\n\n<pre><code>{\n  \"requestor\":\"naughtron\",\n  \"test_name\":\"testName\",\n  \"workers\":\"2\"\n}\n</code></pre>\n\n<p>The value for requestor in our data model is set to CurrentUserField()</p>\n\n<p>When the payload comes into the serializer </p>\n\n<pre><code>class TestSuiteRequestSerializer(serializers.Serializer):\n    requestor = what_do_use_here?\n    test_name = serializers.CharField(required=True, allow_blank=False, max_length=100) \n    workers = serializers.CharField(required=True, allow_blank=True, max_length=3)\n</code></pre>\n\n<p>the following error is thrown</p>\n\n<pre><code>database_1  | ERROR:  null value in column \"requestor\" violates not-null constraint\n</code></pre>\n\n<p>because I am believe it is not being serialized properly therefore the model has no idea what to do. </p>\n\n<p>I looked through the documentation and the current list of Serializer fields. Nothing seems to be helping. </p>\n\n<p>I tried using a basic <code>serializers.CharField</code> but that threw an error stating <code>must be a \"User\" instance.</code></p>\n"}, {"tags": ["python", "pandas", "date", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 2608, "user_id": 3507584, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4566e93d939844b0ee480c2a23e29aab?s=128&d=identicon&r=PG&f=1", "display_name": "user3507584", "link": "https://stackoverflow.com/users/3507584/user3507584"}, "edited": false, "score": 0, "creation_date": 1548892098, "post_id": 54451009, "comment_id": 95711025, "body": "This worked! :-)  However, how would you deal with more date variables, like if you wanted the min of base_date and also subset for date_var2 to be max. Would you have to use the idxmin and idxmax separetely or can you mix them in a one-liner?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 2608, "user_id": 3507584, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4566e93d939844b0ee480c2a23e29aab?s=128&d=identicon&r=PG&f=1", "display_name": "user3507584", "link": "https://stackoverflow.com/users/3507584/user3507584"}, "edited": false, "score": 0, "creation_date": 1548892607, "post_id": 54451009, "comment_id": 95711138, "body": "@user3507584 You want two separate rows? Or do you want a <i>single</i> row where col1 is minimum and col2 is maximum?"}, {"owner": {"reputation": 2608, "user_id": 3507584, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4566e93d939844b0ee480c2a23e29aab?s=128&d=identicon&r=PG&f=1", "display_name": "user3507584", "link": "https://stackoverflow.com/users/3507584/user3507584"}, "edited": false, "score": 0, "creation_date": 1548893235, "post_id": 54451009, "comment_id": 95711308, "body": "I was wondering how to subset using more datetime variables. If you use the index (.idxmin) inside df.iloc, that can only refer to one variable, right? If you had a second date time variable, it looks like you would have to use df.iloc twice, once for each datetime variable you are subsetting. Am I right?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 2608, "user_id": 3507584, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4566e93d939844b0ee480c2a23e29aab?s=128&d=identicon&r=PG&f=1", "display_name": "user3507584", "link": "https://stackoverflow.com/users/3507584/user3507584"}, "edited": false, "score": 0, "creation_date": 1548893314, "post_id": 54451009, "comment_id": 95711320, "body": "@user3507584 Hmm, I&#39;m still having a hard time following. It would be great if you can open a follow up question with some input and expected output so I can figure out how exactly to help you. (please consider marking this accepted if it solved your problem as originally defined.)"}, {"owner": {"reputation": 2608, "user_id": 3507584, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4566e93d939844b0ee480c2a23e29aab?s=128&d=identicon&r=PG&f=1", "display_name": "user3507584", "link": "https://stackoverflow.com/users/3507584/user3507584"}, "edited": false, "score": 0, "creation_date": 1548894442, "post_id": 54451009, "comment_id": 95711621, "body": "Just posted another question with the same example <a href=\"https://stackoverflow.com/questions/54451643/subset-pandas-data-frame-with-datetime-columns\" title=\"subset pandas data frame with datetime columns\">stackoverflow.com/questions/54451643/&hellip;</a>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 2608, "user_id": 3507584, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4566e93d939844b0ee480c2a23e29aab?s=128&d=identicon&r=PG&f=1", "display_name": "user3507584", "link": "https://stackoverflow.com/users/3507584/user3507584"}, "edited": false, "score": 1, "creation_date": 1548900275, "post_id": 54451009, "comment_id": 95713028, "body": "@user3507584 Seems like Wen-Ben as weighed in. Let me know if you still need any help on that question and I&#39;ll see what I can do."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1548890133, "creation_date": 1548890133, "answer_id": 54451009, "question_id": 54450983, "link": "https://stackoverflow.com/questions/54450983/subset-pandas-data-frame-with-multiple-condition-on-several-columns-with-date/54451009#54451009", "title": "Subset pandas data frame with multiple condition on several columns with date", "body": "<p>You can use <code>idxmin</code>:</p>\n\n<pre><code>pd.to_datetime(df.loc[df['class'] == 'C', 'base_date']).idxmin()\n# 2\n\ndf.iloc[pd.to_datetime(df.loc[df['class'] == 'C', 'base_date']).idxmin()]\n\nslot_id               3\nclass                 C\nday           Wednesday\nbase_date    2019-01-23\nName: 2, dtype: object\n</code></pre>\n\n<hr>\n\n<p>If you need to do this repeatedly, a better solution is to pre-convert \"base_date\" to <code>datetime</code> type:</p>\n\n<pre><code>df['base_date'] = pd.to_datetime(df['base_date'], errors='coerce')\ndf.iloc[df.loc[df['class'] == 'C', 'base_date'].idxmin()]\n\nslot_id                        3\nclass                          C\nday                    Wednesday\nbase_date    2019-01-23 00:00:00\nName: 2, dtype: object\n</code></pre>\n"}], "owner": {"reputation": 2608, "user_id": 3507584, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4566e93d939844b0ee480c2a23e29aab?s=128&d=identicon&r=PG&f=1", "display_name": "user3507584", "link": "https://stackoverflow.com/users/3507584/user3507584"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 54451009, "answer_count": 1, "score": 2, "last_activity_date": 1548890133, "creation_date": 1548889965, "question_id": 54450983, "link": "https://stackoverflow.com/questions/54450983/subset-pandas-data-frame-with-multiple-condition-on-several-columns-with-date", "title": "Subset pandas data frame with multiple condition on several columns with date", "body": "<p>I have a data frame as follows:</p>\n\n<pre><code>  slot_id class        day   base_date\n0        1     A     Monday  2019-01-21\n1        2     B    Tuesday  2019-01-22\n2        3     C  Wednesday  2019-01-23\n3        4     C  Wednesday  2019-01-23\n4        5     C   Thursday  2019-01-24\n</code></pre>\n\n<p>With the following info: </p>\n\n<pre><code>example.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 8 entries, 0 to 7\nData columns (total 4 columns):\nslot_id      8 non-null int64\nclass        8 non-null object\nday          8 non-null object\nbase_date    8 non-null object\ndtypes: int64(1), object(3)\nmemory usage: 200.0+ bytes\n</code></pre>\n\n<p>I would like to get the row with <code>class == \"C\"</code> with the minimum <code>base_date</code>. I have tried many combinations of <code>min</code> without success, like this one: </p>\n\n<pre><code>example[(example['class']==\"C\") &amp; min(example['base_date'])]\n</code></pre>\n\n<p>What's wrong with the code above? How could I get a full row meeting the condition above? \nFull <code>example</code> data frame:</p>\n\n<pre><code>{'slot_id': {0: 1, 1: 2, 2: 3, 3: 4, 4: 5, 5: 6, 6: 7, 7: 8}, 'class': {0: 'A', 1: 'B', 2: 'C', 3: 'C', 4: 'C', 5: 'C', 6: 'D', 7: 'E'}, 'day': {0: 'Monday', 1: 'Tuesday', 2: 'Wednesday', 3: 'Wednesday', 4: 'Thursday', 5: 'Tuesday', 6: 'Thursday', 7: 'Saturday'}, 'base_date': {0: datetime.date(2019, 1, 21), 1: datetime.date(2019, 1, 22), 2: datetime.date(2019, 1, 23), 3: datetime.date(2019, 1, 23), 4: datetime.date(2019, 1, 24), 5: datetime.date(2019, 1, 22), 6: datetime.date(2019, 1, 24), 7: datetime.date(2019, 1, 26)}}\nexample['base_date'] = pd.to_datetime(example['base_date'].astype(str), format='%d%m%Y')\nexample['base_date'] = example['base_date'].dt.date\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 10992592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d17f363c7930d420ffe5a74c7c3a91b6?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Graffman", "link": "https://stackoverflow.com/users/10992592/jonas-graffman"}, "edited": false, "score": 0, "creation_date": 1548939103, "post_id": 54450993, "comment_id": 95729987, "body": "Thank you so much! This helped a lot :)"}, {"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "reply_to_user": {"reputation": 97, "user_id": 10992592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d17f363c7930d420ffe5a74c7c3a91b6?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Graffman", "link": "https://stackoverflow.com/users/10992592/jonas-graffman"}, "edited": false, "score": 0, "creation_date": 1548939699, "post_id": 54450993, "comment_id": 95730358, "body": "You&#39;re welcome! Can mark as solved (green check) if it&#39;s closed :)"}], "tags": [], "owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "is_accepted": false, "score": 1, "last_activity_date": 1548890021, "creation_date": 1548890021, "answer_id": 54450993, "question_id": 54450939, "link": "https://stackoverflow.com/questions/54450939/create-a-function-that-returns-a-new-dictionary/54450993#54450993", "title": "Create a function that returns a new dictionary", "body": "<p>You're initialising a blank dictionary again at every pass through the loop.</p>\n\n<p>This should work:</p>\n\n<pre><code>def myfunction(animals):\n    new_dictionary = {}\n\n    for key in animals.keys():\n        new_dictionary[key] = []\n\n        for value in animals[key]:\n            bandit_animals = bandit_language(value)\n            new_dictionary[key].append(bandit_animals)\n\n    return new_dictionary\n\n\nprint(myfunction(animals))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2939, "user_id": 8334261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f9cdd180c34b49d28655f0e4b80e22?s=128&d=identicon&r=PG&f=1", "display_name": "DocDriven", "link": "https://stackoverflow.com/users/8334261/docdriven"}, "is_accepted": false, "score": 0, "last_activity_date": 1548890544, "creation_date": 1548890544, "answer_id": 54451076, "question_id": 54450939, "link": "https://stackoverflow.com/questions/54450939/create-a-function-that-returns-a-new-dictionary/54451076#54451076", "title": "Create a function that returns a new dictionary", "body": "<p>A more compact way of doing this by using <code>items()</code>:</p>\n\n<pre><code>animals = {'tiger': ['claws', 'sharp teeth', 'four legs', 'stripes'],\n           'elephant': ['trunk', 'four legs', 'big ears', 'gray skin'],\n           'human': ['two legs', 'funny looking ears', 'a sense of humor']\n           }\n\n# some dummy function\ndef bandit_language(val):\n    return 'Ho ho ho'\n\n\ndef myfunction(animals):\n    return {key: [bandit_language(val) for val in lst] for key, lst in animals.items()}\n\nprint(myfunction(animals)\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>{'human': ['Ho ho ho', 'Ho ho ho', 'Ho ho ho'], 'tiger': ['Ho ho ho', 'Ho ho ho', 'Ho ho ho', 'Ho ho ho'], 'elephant': ['Ho ho ho', 'Ho ho ho', 'Ho ho ho', 'Ho ho ho']}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1443, "user_id": 3679377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff6ad7525153d053c43fc405985de57?s=128&d=identicon&r=PG&f=1", "display_name": "najeem", "link": "https://stackoverflow.com/users/3679377/najeem"}, "is_accepted": false, "score": 0, "last_activity_date": 1548904083, "creation_date": 1548904083, "answer_id": 54452739, "question_id": 54450939, "link": "https://stackoverflow.com/questions/54450939/create-a-function-that-returns-a-new-dictionary/54452739#54452739", "title": "Create a function that returns a new dictionary", "body": "<p>You could do the whole thing in a single line.</p>\n\n<pre><code>print({k: bandit_language(v) for k, v in animals.items()})\n</code></pre>\n\n<p>For demo, if I substitute <code>bandit_language</code> function with <code>len</code>.</p>\n\n<pre><code>print({k: len(v) for k, v in animals.items()})\nOut: {'elephant': 4, 'human': 3, 'tiger': 4}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10992592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d17f363c7930d420ffe5a74c7c3a91b6?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Graffman", "link": "https://stackoverflow.com/users/10992592/jonas-graffman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1548904083, "creation_date": 1548889711, "last_edit_date": 1548890664, "question_id": 54450939, "link": "https://stackoverflow.com/questions/54450939/create-a-function-that-returns-a-new-dictionary", "title": "Create a function that returns a new dictionary", "body": "<p>I want to write a function that takes in a dictionary as an input and returns a new dictionary. In the new dictionary I would like to use the same keys as in the old one, but I've got new values. </p>\n\n<p>This is my old dictionary:</p>\n\n<pre><code>animals = {'tiger': ['claws', 'sharp teeth', 'four legs', 'stripes'],\n           'elephant': ['trunk', 'four legs', 'big ears', 'gray skin'],\n           'human': ['two legs', 'funny looking ears', 'a sense of humor']\n           }\n</code></pre>\n\n<p>Then I'm creating a function that takes in the old dictionary and I want it to keep the keys but change values (the new values should pass through a function called bandit. It looks something like this.</p>\n\n<pre><code>def myfunction(animals):\n    new_dictionary = {}\n\n    for key in animals.keys():\n        new_dictionary = {key: []}\n\n\n        for value in animals[key]:\n            bandit_animals = bandit_language(value)\n            new_dictionary = {key: bandit_animals}\n\n    return new_dictionary\n\n\nprint(myfunction(animals))\n</code></pre>\n\n<p>The function only prints the last key and the last value and I want it to print a whole dictionary.</p>\n\n<p>Can anyone explain?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql", "cprofile"], "comments": [{"owner": {"reputation": 1401, "user_id": 2218905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6955a4b9785afc061ae028b6cda5fa?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2218905/jason"}, "edited": false, "score": 0, "creation_date": 1548889518, "post_id": 54450896, "comment_id": 95710363, "body": "I tried <code>df.groupby(&#39;_1&#39;).count().collect()</code>, which apparently has  both actions and transformations, and still no printout"}], "answers": [{"comments": [{"owner": {"reputation": 10563, "user_id": 189336, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7543066b996b2053a554951bfeae16b0?s=128&d=identicon&r=PG", "display_name": "conradlee", "link": "https://stackoverflow.com/users/189336/conradlee"}, "edited": false, "score": 0, "creation_date": 1561020569, "post_id": 54450950, "comment_id": 99930386, "body": "I can unfortunately confirm that python UDFs are not profiled."}], "tags": [], "owner": {"reputation": 3220, "user_id": 10938362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b85d0493b812411fbd4204eda0c51d?s=128&d=identicon&r=PG", "display_name": "user10938362", "link": "https://stackoverflow.com/users/10938362/user10938362"}, "is_accepted": false, "score": 0, "last_activity_date": 1548891068, "last_edit_date": 1548891068, "creation_date": 1548889770, "answer_id": 54450950, "question_id": 54450896, "link": "https://stackoverflow.com/questions/54450896/pyspark-show-profile-prints-nothing-with-dataframe-api-operations/54450950#54450950", "title": "PySpark show_profile() prints nothing with DataFrame API operations", "body": "<p>That is the expected behavior. </p>\n\n<p>Unlike <code>RDD</code> API, which provides native Python logic, <code>DataFrame</code> / <code>SQL</code> API are JVM native. Unless you invoke Python <code>udf</code>* (including <code>pandas_udf</code>), no Python code is executed on the worker machines. All that is done on the Python side, is simple API calls through Py4j gateway.</p>\n\n<p>Therefore there no profiling information exists.</p>\n\n<hr>\n\n<p>* Note that the <code>udf</code>'s seem to be excluded from the profiling as well.</p>\n"}], "owner": {"reputation": 1401, "user_id": 2218905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6955a4b9785afc061ae028b6cda5fa?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2218905/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548891068, "creation_date": 1548889438, "question_id": 54450896, "link": "https://stackoverflow.com/questions/54450896/pyspark-show-profile-prints-nothing-with-dataframe-api-operations", "title": "PySpark show_profile() prints nothing with DataFrame API operations", "body": "<p>Pyspark uses cProfile and works according to the docs for the RDD API, but it seems that there is no way to get the profiler to print results after running a bunch of DataFrame API operations?</p>\n\n<pre><code>from pyspark import SparkContext, SQLContext\nsc = SparkContext()\nsqlContext = SQLContext(sc)\nrdd = sc.parallelize([('a', 0), ('b', 1)])\ndf = sqlContext.createDataFrame(rdd)\nrdd.count()         # this ACTUALLY gets profiled :)\nsc.show_profiles()  # here is where the profiling prints out\nsc.show_profiles()  # here prints nothing (no new profiling to show)\n\nrdd.count()         # this ACTUALLY gets profiled :)\nsc.show_profiles()  # here is where the profiling prints out in DataFrame API\n\ndf.count()          # why does this NOT get profiled?!?\nsc.show_profiles()  # prints nothing?!\n\n# and again it works when converting to RDD but not \n\ndf.rdd.count()      # this ACTUALLY gets profiled :)\nsc.show_profiles()  # here is where the profiling prints out\n\ndf.count()          # why does this NOT get profiled?!?\nsc.show_profiles()  # prints nothing?!\n</code></pre>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 4, "creation_date": 1548889422, "post_id": 54450843, "comment_id": 95710343, "body": "You&#39;re abusing <code>try...catch</code>s here. There&#39;s potentially an error being thrown, but you&#39;ve told your code to ignore all errors. I&#39;d remove almost all the <code>try</code>s, as I can&#39;t see any need for them here and they&#39;re just silencing errors. The only ones that would be beneficial are ones catching <code>ValueErrors</code> thrown by <code>int</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1548892970, "post_id": 54450843, "comment_id": 95711231, "body": "You don&#39;t need parentheses in things like <code>if var == (1):</code>."}], "answers": [{"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1548895661, "last_edit_date": 1548895661, "creation_date": 1548894953, "answer_id": 54451710, "question_id": 54450843, "link": "https://stackoverflow.com/questions/54450843/dont-understand-why-my-code-is-skipping-to-the-end/54451710#54451710", "title": "Don&#39;t understand why my code is skipping to the end", "body": "<p>The reason it appears to skip to the end is because mostof the methods of <code>class user_input</code>, such as <code>one()</code>, <code>two()</code>, <code>three()</code>, etc try to call its <code>r_of_c()</code> method which causes a</p>\n\n<p><code>NameError: name 'r_of_c' is not defined</code></p>\n\n<p>exception to occur because it wasn't done properly.</p>\n\n<p>This makes it so that when the following lines near the end are executed:</p>\n\n<pre><code>try: user_input.one()\nexcept:\n    pass\ntry: user_input.two()\nexcept:\n    pass\ntry: user_input.three()\nexcept:\n    pass\ntry: user_input.four()\nexcept:\n    pass\ntry: user_input.greater_than()\nexcept:\n    pass\ntry: user_input.less_than()\nexcept:\n    pass\n\n\"\"\" The following will output the answer based on the initial user input. \"\"\"\n\ntry: answer.one()\nexcept:\n    pass\ntry: answer.two()\nexcept:\n    pass\ntry: answer.three()\nexcept:\n    pass\ntry: anwer.four()\nexcept:\n    pass\n\ninput(\"Press Enter to exit. \")\n</code></pre>\n\n<p><strong>every</strong> call to <code>user.input.xxx()</code> inside a <code>try</code>/<code>except</code> encounters an exception being raised, but they are ignored and the following call is attempted, and so on and so forth, until the <code>input(\"Press Enter to exit. \")</code> at the very end is encountered.</p>\n\n<p>I think the proper way to call it would be <code>user_input.r_of_c()</code> instead of a plain <code>r_of_c()</code>. Note that because there are a number of other issues that also would need to be fixed just make this change won't be enough to make it work\u2014but it should stop skipping to the end.</p>\n"}], "owner": {"reputation": 11, "user_id": 10993018, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TZygmIhsN2k/AAAAAAAAAAI/AAAAAAAAFZM/c7ytymg_pDE/photo.jpg?sz=128", "display_name": "Johnathan Nguyen", "link": "https://stackoverflow.com/users/10993018/johnathan-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548895805, "creation_date": 1548889141, "last_edit_date": 1548895805, "question_id": 54450843, "link": "https://stackoverflow.com/questions/54450843/dont-understand-why-my-code-is-skipping-to-the-end", "title": "Don&#39;t understand why my code is skipping to the end", "body": "<p>It used to work, now it doesn't! I'm still learning. I am trying to make a compound interest calculator, just so I can start learning code by doing it. I'm not quite sure why the code is skipping to the end after asking for an interest rate... I've been trying to figure it out for a while now and I can't figure it out. I'm sure it's something small. I'm a beginner so if someone could help me, it'd mean a lot. </p>\n\n<pre><code>import math\n\nclass error: # All possible errors are located here.\n    def input():\n        print(\"\\nError: Invalid input entered.\\n\")\n    def accumulated():\n        print(\"\\nError: There has been an error calculating the accumulated amount.\\n\")\n    def principal():\n        print(\"\\nError: There has been an error calculating the principal amount.\\n\")\n    def rate():\n        print(\"\\nError: There has been an error calculating the interest rate.\\n\")\n    def years():\n        print(\"\\nError: There has been an error calculating the number of years.\\n\")\nclass user_input:\n    def r_of_c():  # What gets assigned here is based upon the user's input based on its corrosoponding function.\n        roc = int(input(\"\\nEnter the rate of compounding: \"))\n        if roc == (1):\n            n = 365\n        elif roc == (2):\n            n = 52\n        elif roc == (3):\n            n = 12\n        elif roc == (4):\n            n = 4\n        elif roc == (5):\n            n = 2\n        elif roc == (6):\n            n = 1\n        elif roc == (7):\n            n = 2.7182\n        elif roc &gt; 7:\n            error.input()\n        elif roc &lt; 1:\n            error.input()\n        else:\n            error.input()\n    def one():\n        if var == (1):\n            p = float(input(\"\\nPlease enter the Principal amount: $\"))\n            r = float(input(\"\\nPlease enter an Interest rate: %\"))\n            print(\"\\n[1] Daily [2] Weekly [3] Monthly [4] Quarterly [5] Semi-Annually [6] Annually [7] Continuously\")\n            r_of_c()\n            t = int(input(\"\\nPlease enter the number of years compounded: \"))\n            try: accumulated_amount = float(p * (1 + ((r/100)/n)) ** (n * t))\n            except:\n                error.accumulated()\n        else:\n            pass\n    def two():\n        if var == (2):\n            a = float(input(\"\\nPlease enter the Accumulated amount: $\"))\n            r = float(input(\"\\nPlease enter an Interest rate: %\"))\n            print(\"\\n[1] Daily [2] Weekly [3] Monthly [4] Quarterly [5] Semi-Annually [6] Annually [7] Continuously\")\n            r_of_c()\n            t = int(input(\"\\nPlease enter the number of years compounded: \"))\n            try: principal_amount = float(a / (1 + ((r/100)/n)) ** (n * t))\n            except: \n                error.principal()\n        else:\n            pass\n    def three():\n        if var == (3):\n            a = float(input(\"\\nPlease enter the Accumulated amount: $\\n\"))\n            p = float(input(\"\\nPlease enter the Principal amount: $\"))\n            print(\"\\n[1] Daily [2] Weekly [3] Monthly [4] Quarterly [5] Semi-Annually [6] Annually [7] Continuously\")\n            r_of_c()\n            t = int(input(\"\\nPlease enter the number of years compounded: \"))\n            try: interest_rate = float(n(math.pow(a/p, 1/nt) - 1))\n            except:\n                error.rate()\n        else:\n            pass\n    def four():\n        if var == (4):\n            a = float(input(\"\\nPlease enter the Accumulated amount: $\\n\"))\n            p = float(input(\"\\nPlease enter the Principal amount: $\"))\n            r = float(input(\"\\nPlease enter an Interest rate: %\"))  \n            print(\"\\n[1] Daily [2] Weekly [3] Monthly [4] Quarterly [5] Semi-Annually [6] Annually [7] Continuously\")\n            r_of_c()\n            t = int(input(\"\\nPlease enter the number of years compounded: \"))\n            try: number_of_years = ((math.log10(a/p) / n(math.log10(1 + (r/100)/n))))\n            except:\n                error.years()\n        else:\n            pass\n    def greater_than():\n        if var &gt; 4:\n            error.input()\n        else:\n            pass\n    def less_than():\n        if var &lt; 1:\n            error.input()\n        else: \n            pass\nclass answer: # This will be processed based upon the intial user input.\n    def one():\n        if var == (1):\n            try: print(\"\\nThe accumulated amount is $%s.\\n\" % round(accumulated_amount, 2))\n            except:\n                pass\n    def two():\n        if var == (2):\n            try: print(\"\\nThe principal amount is $%s.\\n\" % round(principal_amount, 2))\n            except:\n                pass\n    def three():\n        if var == (3): \n            try: print(\"\\nThe interest rate is $%s.\\n\" % interest_rate)\n            except:\n                pass\n    def four():\n        if var == (4):\n            try: print(\"\\nThe number of years compounded is $%s.\\n\" % round(number_of_years, 2))\n            except:\n                pass    \n\nprint(\"[1] Accumulated Amount [2] Principal [3] Interest Rate [4] Years \\n\")\nvar = int(input(\"What do you want to solve for? \"))\n\n\"\"\" The following will process the users input based on which function it gets assigned to. \"\"\"\n\ntry: user_input.one()\nexcept: \n    pass\ntry: user_input.two()\nexcept:\n    pass\ntry: user_input.three()\nexcept:\n    pass\ntry: user_input.four()\nexcept:\n    pass\ntry: user_input.greater_than()\nexcept: \n    pass\ntry: user_input.less_than()\nexcept:\n    pass\n\n\"\"\" The following will output the answer based on the initial user input. \"\"\"\n\ntry: answer.one()\nexcept:\n    pass\ntry: answer.two()\nexcept:\n    pass\ntry: answer.three()\nexcept: \n    pass\ntry: anwer.four()\nexcept:\n    pass\n\ninput(\"Press Enter to exit. \")\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas.excelwriter"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548889352, "post_id": 54450837, "comment_id": 95710323, "body": "<code>print(type(os.walk(output_path)))</code>. My best guess it that it returns <code>None</code> and that will print as a blank line, unless you call <code>type()</code> which will give <code>NoneType</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548889547, "post_id": 54450837, "comment_id": 95710372, "body": "Actually, I&#39;m not convinced that is the case; the code should not return None and you should get an error in that instance. It&#39;s not true that the code doesn&#39;t execute, but something is stopping the iteration; or something is missing from your question."}, {"owner": {"reputation": 83, "user_id": 4937790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414b82929119c62fc7a4dee9f9ea6a78?s=128&d=identicon&r=PG&f=1", "display_name": "MonoHearted", "link": "https://stackoverflow.com/users/4937790/monohearted"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548893625, "post_id": 54450837, "comment_id": 95711400, "body": "I have tried the os.walk independently, and it gets the files fine; I&#39;m also unconvinced that it&#39;s an iteration problem as a print statement before the os.walk loop doesn&#39;t print, either."}], "owner": {"reputation": 83, "user_id": 4937790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414b82929119c62fc7a4dee9f9ea6a78?s=128&d=identicon&r=PG&f=1", "display_name": "MonoHearted", "link": "https://stackoverflow.com/users/4937790/monohearted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548950633, "creation_date": 1548889108, "last_edit_date": 1548950633, "question_id": 54450837, "link": "https://stackoverflow.com/questions/54450837/code-after-excelwriter-definition-not-being-run", "title": "Code after ExcelWriter definition not being run", "body": "<p>I am trying to collect data from multiple excel files into separate sheets in a single workbook through Pandas. However, the code block after my ExcelWriter definition is never executed, and no error is thrown.</p>\n\n<pre><code>res_path = os.path.join(output_path, 'overview.xls')\nwriter = pd.ExcelWriter(res_path)\n# No statements from here onwards execute\nfor root, dirs, files in os.walk(output_path):\n    for f in files:\n        name = re.compile(r'(.*)_.*_(?:result.xls)').match(f).group(1)\n        pd.read_excel(os.path.join(root, f)).to_excel(writer, sheet_name=name)\nwriter.save()\n</code></pre>\n\n<p>I have attempted to run various print statements (before the for loop, inside the for loop, after the save), but none of them are executed. I have also attempted to use ExcelWriter within a context manager, but the same problem occurs. I have attempted to wait for upwards of 5 minutes, with no avail. The file size is small (8kb) so I do not believe it would have taken longer than that to save.</p>\n\n<p>I have also attempted to use a simple path (i.e just 'overview.xls') as an argument for ExcelWriter, which also doesn't work, leading me to believe that the path is not the issue.</p>\n\n<p>Other engines (saving as .xlsx via XlsxWriter) also do not work.</p>\n\n<p>Any help would be much appreciated!</p>\n\n<p>Edit: I have also attempted to run this code on a Linux machine (I was previously on a Windows machine), but it has not changed anything; the code still freezes after <code>writer = pd.ExcelWriter(res_path)</code>, and any print statements after that or otherwise are never executed.</p>\n"}, {"tags": ["python", "python-3.x", "python-3.6", "locust"], "answers": [{"comments": [{"owner": {"reputation": 903, "user_id": 2312300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7bf30b3d1f6893d8710598eaedf84a?s=128&d=identicon&r=PG", "display_name": "SilentGuy", "link": "https://stackoverflow.com/users/2312300/silentguy"}, "edited": false, "score": 0, "creation_date": 1602270667, "post_id": 54450966, "comment_id": 113678168, "body": "This is deprecated in locust 1.0 but the doc hasn&#39;t been updated."}], "tags": [], "owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "is_accepted": true, "score": 3, "last_activity_date": 1548890922, "last_edit_date": 1548890922, "creation_date": 1548889871, "answer_id": 54450966, "question_id": 54450832, "link": "https://stackoverflow.com/questions/54450832/how-to-create-a-locust-task-for-a-dynamic-list-of-urls/54450966#54450966", "title": "How to create a Locust task for a dynamic list of URLs?", "body": "<p>Found it in the <a href=\"https://docs.locust.io/en/latest/api.html#locust.core.TaskSet.schedule_task\" rel=\"nofollow noreferrer\">API docs</a>:</p>\n\n<pre><code>def setup(self) -&gt; None:\n    for api_path in self.client.get('/api/doc/?format=openapi').json()['paths'].keys():\n        self.schedule_task(self.api_task, args=[api_path])\n\ndef api_task(self, path: str) -&gt; None:\n    response = self.client.get(\"/api{}?limit=1000\".format(path))\n    assert response.status_code == HTTPStatus.OK, response.content.decode()\n</code></pre>\n"}], "owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 2, "accepted_answer_id": 54450966, "answer_count": 1, "score": 3, "last_activity_date": 1548890922, "creation_date": 1548889093, "question_id": 54450832, "link": "https://stackoverflow.com/questions/54450832/how-to-create-a-locust-task-for-a-dynamic-list-of-urls", "title": "How to create a Locust task for a dynamic list of URLs?", "body": "<p>I'm trying to get timing information for <em>all</em> my API endpoints based on the OpenAPI JSON, so I would like to do something like this in the <code>setup</code> method:</p>\n\n<pre><code>for api_path in self.client.get('/api/doc/?format=openapi').json()['paths'].keys():\n    self.get_[api_path] = [@task decorated method which retrieves the API path]\n</code></pre>\n\n<p>Or is there another way to generate tasks at runtime?</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "histogram"], "comments": [{"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1548889594, "post_id": 54450824, "comment_id": 95710380, "body": "I think a bar plot would be way easier here"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1548889796, "post_id": 54450824, "comment_id": 95710440, "body": "What is the relevance of <code>*100</code> here? I don&#39;t see a need of histogram here"}, {"owner": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 0, "creation_date": 1548889940, "post_id": 54450824, "comment_id": 95710476, "body": "No particular relevance for this. That was there because my overall goal is to create some plots for Importance Sampling using a fair die to estimate the mean of a biased die.  Probably I could remove that 100"}, {"owner": {"reputation": 68, "user_id": 10823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b5897f8cb961347f9526caf0f2cb57?s=128&d=identicon&r=PG&f=1", "display_name": "LeRobin", "link": "https://stackoverflow.com/users/10823441/lerobin"}, "edited": false, "score": 1, "creation_date": 1548893851, "post_id": 54450824, "comment_id": 95711454, "body": "@Euler_Salter or show a truly probabilistic die: see <b>Bonus</b> part of my answer."}], "answers": [{"comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1548889685, "post_id": 54450932, "comment_id": 95710410, "body": "Always try your code before you post as an answer. See the plot first for yourself I would suggest"}, {"owner": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 1, "creation_date": 1548889708, "post_id": 54450932, "comment_id": 95710415, "body": "Doesn&#39;t seem to work, I get basically one big vertical bar"}, {"owner": {"reputation": 68, "user_id": 10823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b5897f8cb961347f9526caf0f2cb57?s=128&d=identicon&r=PG&f=1", "display_name": "LeRobin", "link": "https://stackoverflow.com/users/10823441/lerobin"}, "reply_to_user": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 0, "creation_date": 1548889984, "post_id": 54450932, "comment_id": 95710490, "body": "@Euler_Salter add `rwidth=0.9&#39; as argument. This will clear things up."}, {"owner": {"reputation": 68, "user_id": 10823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b5897f8cb961347f9526caf0f2cb57?s=128&d=identicon&r=PG&f=1", "display_name": "LeRobin", "link": "https://stackoverflow.com/users/10823441/lerobin"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1548890001, "post_id": 54450932, "comment_id": 95710492, "body": "@Bazingaa code is fresh from the terminal..."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1548890144, "post_id": 54450932, "comment_id": 95710532, "body": "Does your code generate any figure? Does it look like 6 individual bars or even close to a histogram?"}, {"owner": {"reputation": 68, "user_id": 10823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b5897f8cb961347f9526caf0f2cb57?s=128&d=identicon&r=PG&f=1", "display_name": "LeRobin", "link": "https://stackoverflow.com/users/10823441/lerobin"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1548890181, "post_id": 54450932, "comment_id": 95710545, "body": "@Bazingaa I suggest you copy paste it and you&#39;ll see"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1548890234, "post_id": 54450932, "comment_id": 95710557, "body": "Ok now you added width. It wasn\u2019t there previously"}, {"owner": {"reputation": 68, "user_id": 10823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b5897f8cb961347f9526caf0f2cb57?s=128&d=identicon&r=PG&f=1", "display_name": "LeRobin", "link": "https://stackoverflow.com/users/10823441/lerobin"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1548890479, "post_id": 54450932, "comment_id": 95710618, "body": "@Bazingaa it was just as correct previously as it is now. Previously the bars were just stuck together, seeming to be one single bar. But they never were. <b>This answer was never wrong!</b> Just not very pretty at some point. It&#39;s kinda unfair to downvote."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1548890771, "post_id": 54450932, "comment_id": 95710694, "body": "I didn\u2019t downvote to be frank. My point was that the bars were not visible and you should have used width which you do now. Anyway, i will upvote so that you still don&#39;t think that I downvoted"}, {"owner": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 0, "creation_date": 1548890885, "post_id": 54450932, "comment_id": 95710722, "body": "How can I make the bars centered? At the moment they are in between"}, {"owner": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 1, "creation_date": 1548890949, "post_id": 54450932, "comment_id": 95710742, "body": "Oh okay you need to use align=&#39;left&#39;"}, {"owner": {"reputation": 68, "user_id": 10823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b5897f8cb961347f9526caf0f2cb57?s=128&d=identicon&r=PG&f=1", "display_name": "LeRobin", "link": "https://stackoverflow.com/users/10823441/lerobin"}, "reply_to_user": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 0, "creation_date": 1548891001, "post_id": 54450932, "comment_id": 95710755, "body": "@Euler_Salter exactly! was just adding it to the answer."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1548891426, "post_id": 54450932, "comment_id": 95710856, "body": "Also you can try using range(1,8) instead of writing all numbers in a list manually"}, {"owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "edited": false, "score": 1, "creation_date": 1548892177, "post_id": 54450932, "comment_id": 95711045, "body": "I think Bazingaa helped you improve the code, and because of the previous downvote, I upvoted because it certainly doesn&#39;t deserve downvote."}], "tags": [], "owner": {"reputation": 68, "user_id": 10823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b5897f8cb961347f9526caf0f2cb57?s=128&d=identicon&r=PG&f=1", "display_name": "LeRobin", "link": "https://stackoverflow.com/users/10823441/lerobin"}, "is_accepted": true, "score": 5, "last_activity_date": 1548891794, "last_edit_date": 1592644375, "creation_date": 1548889639, "answer_id": 54450932, "question_id": 54450824, "link": "https://stackoverflow.com/questions/54450824/matplotlib-plot-histogram-of-fair-die/54450932#54450932", "title": "Matplotlib plot histogram of fair die", "body": "<p>The issue here are the bins.</p>\n<p>You want to avoid binning any two (or more) values together, otherwise your density will be a multiple of 1/6.</p>\n<p>Here is how to set the bins right:</p>\n<pre><code>fair = np.array([1, 2, 3, 4, 5, 6]*100)\nplt.hist(fair, density=True, bins=[1,2,3,4,5,6,7], label='Fair Die', rwidth=0.9, align='left')  # rwidth is optional\nplt.show()\n</code></pre>\n<p>From <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.hist.html\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n<blockquote>\n<p>bins : array</p>\n<p>The edges of the bins. Length nbins + 1 (nbins left edges and right edge of last bin). Always a single array even when multiple data sets are passed in.</p>\n</blockquote>\n<p>Note: If you want the label to be shown, call <code>plt.legend()</code> before the <code>plt.show()</code>.</p>\n<p>Note 2: In this case it's kinda recommended to set <code>rwidth</code> &lt; binsize as otherwise there is no space between the bins and here all bis are of equal dimension, thus it all appears as a single block. <strong>Have a look at the comments to see how this confuses people :P</strong></p>\n<p>Alternatively you could draw a border around the bars:</p>\n<pre><code>plt.hist(fair, density=True, bins=range(1,8), label='Fair Die', edgecolor='white', linewidth=1.2)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/h7L8G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h7L8G.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Bonus:</strong></p>\n<p>In case you want to have a <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.random_integers.html\" rel=\"nofollow noreferrer\">stochastic representation of your fair dice</a>:</p>\n<pre><code>fair_proba = np.random.random_integers(1,6, 1000) \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/pIy3w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pIy3w.png\" alt=\"enter image description here\" /></a></p>\n"}, {"comments": [{"owner": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 0, "creation_date": 1548890092, "post_id": 54450981, "comment_id": 95710521, "body": "Is it possible to align them with the label in the center? I tried align=mid, which kinda works, but it leaves a weird blank space on the left"}, {"owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "reply_to_user": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 0, "creation_date": 1548890484, "post_id": 54450981, "comment_id": 95710620, "body": "Use align=&#39;left&#39;"}, {"owner": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 0, "creation_date": 1548890781, "post_id": 54450981, "comment_id": 95710695, "body": "Still leaves a weird space in and the labels are wrong, the dice can&#39;t roll a 0"}, {"owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "reply_to_user": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "edited": false, "score": 1, "creation_date": 1548891126, "post_id": 54450981, "comment_id": 95710790, "body": "You need to play with the code to get what you want. I edited the code for the sake of completeness, but it&#39;s not a good practice."}], "tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": false, "score": 3, "last_activity_date": 1548891056, "last_edit_date": 1548891056, "creation_date": 1548889951, "answer_id": 54450981, "question_id": 54450824, "link": "https://stackoverflow.com/questions/54450824/matplotlib-plot-histogram-of-fair-die/54450981#54450981", "title": "Matplotlib plot histogram of fair die", "body": "<pre><code>In [10]: fair = np.array([1, 2, 3, 4, 5, 6]*100)\n    ...: bins = np.array([i/2 for i in range(-1, 14)])\n    ...: plt.hist(fair, bins=bins, label='Fair Die', align='left')\n    ...: plt.xlim([0, 7])\n    ...: plt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1teCt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1teCt.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2425, "user_id": 6435921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d0f05243a7d08247da1da87548f808d6?s=128&d=identicon&r=PG&f=1", "display_name": "Euler_Salter", "link": "https://stackoverflow.com/users/6435921/euler-salter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 1, "closed_date": 1548892351, "accepted_answer_id": 54450932, "answer_count": 2, "score": 2, "last_activity_date": 1548891794, "creation_date": 1548889058, "question_id": 54450824, "link": "https://stackoverflow.com/questions/54450824/matplotlib-plot-histogram-of-fair-die", "closed_reason": "Duplicate", "title": "Matplotlib plot histogram of fair die", "body": "<p>I'm trying to display a histogram of the probability density of throwing a fair die. Basically there should be 6 bars and each with height 1/6, equally spaced. I tried this:</p>\n\n<pre><code>fair = np.array([1, 2, 3, 4, 5, 6]*100)\nplt.hist(fair, density=True, label='Fair Die')\nplt.show()\n</code></pre>\n\n<p>and I also tried this</p>\n\n<pre><code>plt.hist(fair, bins=11, density=True, label='Fair Die', align='mid')\n</code></pre>\n\n<p>but it doesn't seem to work. I don't understand why the hist command doesn't make the correct histogram by default, it is such a simple histogram.</p>\n"}, {"tags": ["python", "validation", "parallel-processing"], "comments": [{"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548889174, "post_id": 54450796, "comment_id": 95710266, "body": "Can you post the datatype of the Y_train variable? I want to confirm my suspicions before posting my answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10302153"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548889425, "post_id": 54450796, "comment_id": 95710344, "body": "&#39;numpy.ndarray&#39;"}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548889643, "post_id": 54450796, "comment_id": 95710399, "body": "Is that the result after using y_train.dtype?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10302153"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548889761, "post_id": 54450796, "comment_id": 95710429, "body": "No was type(Y_train).  dtype(&#39;O&#39;)"}], "answers": [{"tags": [], "owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "is_accepted": true, "score": 1, "last_activity_date": 1548890262, "last_edit_date": 1548890262, "creation_date": 1548890050, "answer_id": 54450997, "question_id": 54450796, "link": "https://stackoverflow.com/questions/54450796/python-code-that-was-working-stopped-working/54450997#54450997", "title": "python code that was working stopped working", "body": "<p>Add this after making your y_train and y_validator variables:</p>\n\n<pre><code>Y_train = Y_train.astype('float')\nY_validator = Y_validation.astype('float')\n</code></pre>\n\n<p>When you are reading in your y variable it is being stored as an object, thus sklearn does not know what to do with it (thus the error ValueError(\"Unknown <strong>label type</strong>: %r\" % y_type). Changing the Y_train and Y_test to a float or int type should fix the error</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10302153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1557, "favorite_count": 0, "accepted_answer_id": 54450997, "answer_count": 1, "score": 1, "last_activity_date": 1564937180, "creation_date": 1548888899, "last_edit_date": 1564937180, "question_id": 54450796, "link": "https://stackoverflow.com/questions/54450796/python-code-that-was-working-stopped-working", "title": "python code that was working stopped working", "body": "<p>this was working fine </p>\n\n<p>cv_results = model_selection.cross_val_score(model, X_train, Y_train, cv=kfold, scoring=scoring)</p>\n\n<pre><code>    import pandas\n    from pandas.plotting import scatter_matrix\n    import matplotlib.pyplot as plt\n    from sklearn import model_selection\n    from sklearn.metrics import classification_report\n    from sklearn.metrics import confusion_matrix\n    from sklearn.metrics import accuracy_score\n    from sklearn.linear_model import LogisticRegression\n    from sklearn.tree import DecisionTreeClassifier\n    from sklearn.neighbors import KNeighborsClassifier\n    from sklearn.discriminant_analysis import LinearDiscriminantAnalysis\n    from sklearn.naive_bayes import GaussianNB\n    from sklearn.svm import SVC\n\n    # Load dataset (contains floats and one boolean)\n    url = \"\\\\File\\\\Path.csv\"\n    names = ['Headers', 'Here', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'T/F']\n    dataset = pandas.read_csv(url, names=names)\n\n    # Split-out validation dataset\n    array = dataset.values\n    X = array[:,0:12]\n    Y = array[:,12]\n    validation_size = 0.10\n    seed = 7\n    X_train, X_validation, Y_train, Y_validation = model_selection.train_test_split(X, Y, test_size=validation_size, random_state=seed)\n\n    # Test options and evaluation metric\n    seed = 7\n    scoring = 'accuracy'\n\n    # Spot check algorithms\n    models = []\n    models.append(('LR', LogisticRegression()))\n    models.append(('LDA', LinearDiscriminantAnalysis()))\n    models.append(('KNN', KNeighborsClassifier()))\n    models.append(('CART', DecisionTreeClassifier()))\n    models.append(('NB', GaussianNB()))\n    models.append(('SVM', SVC()))\n\n    # evaluate each model in turn\n    results = []\n    names = []\n    for name, model in models:\n        kfold = model_selection.KFold(n_splits=10, random_state=seed)\n        cv_results = model_selection.cross_val_score(model, X_train, Y_train, cv=kfold, scoring=scoring)\n        results.append(cv_results)\n        names.append(name)\n        msg = \"%s: %f (%f)\" % (name, cv_results.mean(), cv_results.std())\n        print(msg)\n\n    # Compare Algorithms\n    fig = plt.figure()\n    fig.suptitle('Algorithm Comparison')\n    ax = fig.add_subplot(111)\n    plt.boxplot(results)\n    ax.set_xticklabels(names)\n    plt.show()\n\n</code></pre>\n\n<p>it stops when it reaches this part </p>\n\n<p>cv_results = model_selection.cross_val_score(model, X_train, Y_train, cv=kfold, scoring=scoring)</p>\n\n<pre><code>\n    Warning (from warnings module):\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\linear_model\\logistic.py\", line 433\n        FutureWarning)\n    FutureWarning: Default solver will be changed to 'lbfgs' in 0.22. Specify a solver to silence this warning.\n\n    Warning (from warnings module):\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\model_selection\\_validation.py\", line 542\n        FutureWarning)\n    FutureWarning: From version 0.22, errors during fit will result in a cross validation score of NaN by default. Use error_score='raise' if you want an exception raised or error_score=np.nan to adopt the behavior from version 0.22.\n    Traceback (most recent call last):\n      File \"/test.py\", line 46, in &lt;module&gt;\n        cv_results = model_selection.cross_val_score(model, X_train, Y_train, cv=kfold, scoring=scoring)\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\model_selection\\_validation.py\", line 402, in cross_val_score\n        error_score=error_score)\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\model_selection\\_validation.py\", line 240, in cross_validate\n        for train, test in cv.split(X, y, groups))\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 917, in __call__\n        if self.dispatch_one_batch(iterator):\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 759, in dispatch_one_batch\n        self._dispatch(tasks)\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 716, in _dispatch\n        job = self._backend.apply_async(batch, callback=cb)\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 182, in apply_async\n        result = ImmediateResult(func)\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\externals\\joblib\\_parallel_backends.py\", line 549, in __init__\n        self.results = batch()\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 225, in __call__\n        for func, args, kwargs in self.items]\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\externals\\joblib\\parallel.py\", line 225, in &lt;listcomp&gt;\n        for func, args, kwargs in self.items]\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\model_selection\\_validation.py\", line 528, in _fit_and_score\n        estimator.fit(X_train, y_train, **fit_params)\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\linear_model\\logistic.py\", line 1289, in fit\n        check_classification_targets(y)\n      File \"C:\\Python\\Python37-32\\lib\\site-packages\\sklearn\\utils\\multiclass.py\", line 171, in check_classification_targets\n        raise ValueError(\"Unknown label type: %r\" % y_type)\n    ValueError: Unknown label type: 'unknown'\n\n</code></pre>\n\n<p>it runs fine until it reaches</p>\n\n<p>cv_results = model_selection.cross_val_score(model, X_train, Y_train, cv=kfold, scoring=scoring)</p>\n"}, {"tags": ["python", "matplotlib", "bar-chart", "subplot"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1548888891, "post_id": 54450772, "comment_id": 95710197, "body": "Your code is redundant. Either you create the subplots via <code>plt.subplots</code> <b><i>or</i></b> you add subplots via <code>fig.add_subplot</code>. Not both."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 5514178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ca2476971069fcd3e3595bdbbd14b49?s=128&d=identicon&r=PG&f=1", "display_name": "mah65", "link": "https://stackoverflow.com/users/5514178/mah65"}, "edited": false, "score": 0, "creation_date": 1548894892, "post_id": 54451045, "comment_id": 95711719, "body": "Helped alot. Please also see the full answer posted by me."}], "tags": [], "owner": {"reputation": 2214, "user_id": 2864250, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/svmFB.jpg?s=128&g=1", "display_name": "dubbbdan", "link": "https://stackoverflow.com/users/2864250/dubbbdan"}, "is_accepted": true, "score": 1, "last_activity_date": 1548890757, "last_edit_date": 1548890757, "creation_date": 1548890348, "answer_id": 54451045, "question_id": 54450772, "link": "https://stackoverflow.com/questions/54450772/plot-several-barplots-using-matplotlib-and-subplot/54451045#54451045", "title": "Plot several barplots using matplotlib and subplot", "body": "<p>When you create a figure using <code>fig, axes = plt.subplots(figsize=(12, 8) , nrows = 3, ncols = 2)</code>, you already have initialized all of the subplots with the <code>nrows</code> and <code>ncols</code> keywords. <code>axes</code> is a list you can iterate over during the for loop.</p>\n\n<p>I think everything should work fine if you change:</p>\n\n<pre><code>ax = fig.add_subplot(3,2,i+1)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>ax = axes[i]\n</code></pre>\n\n<p>All together:</p>\n\n<pre><code>fig, axes = plt.subplots(figsize=(12, 8) , nrows = 3, ncols = 2)\nfig.tight_layout()\n\n#five categorical columns and three numerical columns of interest\nfor i, category in enumerate(['Cat1', 'Cat2', 'Cat3', 'Cat4', 'Cat5']):   \n    ax = axes[i]\n    data.groupby(category).sum()[['Num1','Num2','Num3']].plot.bar(rot=0,ax=ax)\n    ax.xticks(rotation = 90)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 5514178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ca2476971069fcd3e3595bdbbd14b49?s=128&d=identicon&r=PG&f=1", "display_name": "mah65", "link": "https://stackoverflow.com/users/5514178/mah65"}, "is_accepted": false, "score": 0, "last_activity_date": 1548892486, "creation_date": 1548892486, "answer_id": 54451377, "question_id": 54450772, "link": "https://stackoverflow.com/questions/54450772/plot-several-barplots-using-matplotlib-and-subplot/54451377#54451377", "title": "Plot several barplots using matplotlib and subplot", "body": "<p>Thanks for your helps all my friend.</p>\n\n<p>The final code that worked:</p>\n\n<pre><code>#Build subplot with three rows and two columns\nnrows = 3\nncols = 2\nfig, axes = plt.subplots(figsize=(12, 16) , nrows = nrows, ncols = ncols)\nfig.tight_layout()\n\n#five categorical columns and three numerical columns of interest\nfor i, category in enumerate(['Cat1', 'Cat2', 'Cat3', 'Cat4', 'Cat5']):   \n    ax = axes[i%nrows][i%ncols]\n    data.groupby(category).sum()[['Num1','Num2','Num3']].plot.bar(rot=0, ax=ax)\n\n#Rotating xticks for all\nfor ax in fig.axes:\n    plt.sca(ax)\n    plt.xticks(rotation=90)\n    fig.tight_layout()\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 5514178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ca2476971069fcd3e3595bdbbd14b49?s=128&d=identicon&r=PG&f=1", "display_name": "mah65", "link": "https://stackoverflow.com/users/5514178/mah65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2950, "favorite_count": 0, "accepted_answer_id": 54451045, "answer_count": 2, "score": 2, "last_activity_date": 1548892486, "creation_date": 1548888738, "last_edit_date": 1548889425, "question_id": 54450772, "link": "https://stackoverflow.com/questions/54450772/plot-several-barplots-using-matplotlib-and-subplot", "title": "Plot several barplots using matplotlib and subplot", "body": "<p>I want to plot several barplots using matplotlib library (or other libraries if possible), and place each figure in its place using subplot.</p>\n\n<p>I am also using groupby to group by in each category and sum the values. Then I just want to show three columns (Num1, Num2, Num3):</p>\n\n<pre><code>#Build subplot with three rows and two columns\nfig, axes = plt.subplots(figsize=(12, 8) , nrows = 3, ncols = 2)\nfig.tight_layout()\n\n#five categorical columns and three numerical columns of interest\nfor i, category in enumerate(['Cat1', 'Cat2', 'Cat3', 'Cat4', 'Cat5']):   \n    ax = fig.add_subplot(3,2,i+1)\n    data.groupby(category).sum()[['Num1','Num2','Num3']].plot.bar(rot=0)\n    plt.xticks(rotation = 90)\n</code></pre>\n\n<p>What I get are six empty plots arranged in 3rows and 2cols, followed by 5 correct plots arranged in one column one after another.\nAn example of a plots is seen in the photo.</p>\n\n<p>Thanks for your helps and suggestions.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Gs4lB.jpg\" rel=\"nofollow noreferrer\">Figure Hereeee</a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2939, "user_id": 8334261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f9cdd180c34b49d28655f0e4b80e22?s=128&d=identicon&r=PG&f=1", "display_name": "DocDriven", "link": "https://stackoverflow.com/users/8334261/docdriven"}, "edited": false, "score": 1, "creation_date": 1548888979, "post_id": 54450770, "comment_id": 95710217, "body": "This is not valid Python code."}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1548890008, "post_id": 54450770, "comment_id": 95710495, "body": "<code>int</code> does the opposite of what you showed in your code."}], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 10987583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2784c721faaef41948b18febaeff3a3?s=128&d=identicon&r=PG&f=1", "display_name": "Yannick Buehler", "link": "https://stackoverflow.com/users/10987583/yannick-buehler"}, "is_accepted": false, "score": 2, "last_activity_date": 1548888917, "creation_date": 1548888917, "answer_id": 54450801, "question_id": 54450770, "link": "https://stackoverflow.com/questions/54450770/represent-number-in-python3/54450801#54450801", "title": "Represent Number in python3", "body": "<p>This can be achieved with the built-in integers and functions:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Python 3.7.2 (default, Jan 10 2019, 23:51:51) \n[GCC 8.2.1 20181127] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; i = 5\n&gt;&gt;&gt; bin(i)\n'0b101'\n&gt;&gt;&gt; hex(i)\n'0x5'\n&gt;&gt;&gt; i\n5\n</code></pre>\n\n<p>If you want to obtain a string representation of <code>i</code>, you can use <code>str(i)</code>.</p>\n\n<p>To obtain the number itself from other bases: <code>i = int(\"ff\", 16)</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7548672"}, "is_accepted": true, "score": 0, "last_activity_date": 1548890591, "last_edit_date": 1548890591, "creation_date": 1548890038, "answer_id": 54450995, "question_id": 54450770, "link": "https://stackoverflow.com/questions/54450770/represent-number-in-python3/54450995#54450995", "title": "Represent Number in python3", "body": "<p>class <a href=\"https://docs.python.org/3/library/stdtypes.html#str\" rel=\"nofollow noreferrer\">str</a>(object=''). In particular you can use <a href=\"https://docs.python.org/3/library/string.html#format-examples\" rel=\"nofollow noreferrer\">str.format()</a></p>\n\n<p>Just simply call .format() function and pass in the value. For example:</p>\n\n<pre><code>number = 5435\nprint('bin: {0:b}   hex: {0:x}   int: {0:d}'.format(number))\n</code></pre>\n\n<p>output:\n<code>bin: 1010100111011   hex: 153b   int: 5435</code></p>\n\n<p>or</p>\n\n<pre><code>number = 5435\nprint('bin: {0:#b}   hex: {0:#x}   int: {0:d}'.format(number))\n</code></pre>\n\n<p>output:\n<code>bin: 0b1010100111011   hex: 0x153b   int: 5435</code></p>\n"}], "owner": {"reputation": 569, "user_id": 8032151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a08e1d021cb4084f35ef8242ec14dfd8?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/8032151/billy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1548890895, "accepted_answer_id": 54450995, "answer_count": 2, "score": -2, "last_activity_date": 1548890591, "creation_date": 1548888734, "question_id": 54450770, "link": "https://stackoverflow.com/questions/54450770/represent-number-in-python3", "closed_reason": "Needs details or clarity", "title": "Represent Number in python3", "body": "<p>I want to know if there are any build-in class of python3 that can represent the number in all <strong>hex</strong>, <strong>binary</strong>, <strong>integer</strong>. type.</p>\n\n<p>So I do not need to implment lots of methods to convert from one form to the another.</p>\n\n<p>For example</p>\n\n<pre><code>number = SomeClass(number,base)\n# then I can call the build in function hex(), int(), bin() to convert the number\n\"0b0000\" = bin(number)\n\"0x0000\" = hex(number)\n \"0\" = int(number)\n</code></pre>\n"}, {"tags": ["python", "pandas", "shuffle"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1548889156, "post_id": 54450767, "comment_id": 95710263, "body": "This isn&#39;t exactly shuffling, but you can reorder the data using <code>groupby</code> and <code>cumcount</code>. Pandas <code>sample</code> does not have any way of doing this for you directly."}, {"owner": {"reputation": 1752, "user_id": 9094710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_cKm8ormGks/AAAAAAAAAAI/AAAAAAAABXQ/foU1k07iisM/photo.jpg?sz=128", "display_name": "Qusai Alothman", "link": "https://stackoverflow.com/users/9094710/qusai-alothman"}, "edited": false, "score": 0, "creation_date": 1548953823, "post_id": 54450767, "comment_id": 95739121, "body": "pandas doesn&#39;t have such capabilities. You may find <a href=\"https://stackoverflow.com/questions/35783551/shuffling-a-list-with-restrictions-in-python\">this similar question</a> useful."}], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "is_accepted": false, "score": 0, "last_activity_date": 1548976066, "creation_date": 1548976066, "answer_id": 54470579, "question_id": 54450767, "link": "https://stackoverflow.com/questions/54450767/shuffling-pandas-data-frame-rows-while-avoiding-consecutive-condition-values/54470579#54470579", "title": "Shuffling pandas data frame rows while avoiding consecutive condition values", "body": "<p>Thanks for the comments/pointers. I got it to work by: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>randomized = False\nwhile not randomized:\n    xlist = xlistbase.sample(frac=1).reset_index(drop=True) # where xlistbase is the original file read in\n    # check for repeats\n    for i in range(0, len(xlist)):\n        try:\n            if i == len(xlist) - 1:\n                randomized = True\n            elif xlist['label'][i] != xlist['label'][i+1]:\n                continue\n            elif xlist['label'][i] == xlist['label'][i+1]:\n                break\n        except IndexError:\n            pass\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575988105, "creation_date": 1548888716, "question_id": 54450767, "link": "https://stackoverflow.com/questions/54450767/shuffling-pandas-data-frame-rows-while-avoiding-consecutive-condition-values", "title": "Shuffling pandas data frame rows while avoiding consecutive condition values", "body": "<p>I have a sample data frame read in using pandas. The data has two columns: 'item','label'. While I shuffle the df rows, I want to make sure the shuffled df does not have items that have the same consecutive labels. \nie. this is acceptable, because the labels 'a','b', and 'c' are not in consecutive order:</p>\n\n<p>1: fire, 'a'</p>\n\n<p>2: smoke, 'b'</p>\n\n<p>3: honey bee, 'a'</p>\n\n<p>4: curtain, 'c'</p>\n\n<p>but I want to avoid having such that the labels are in consecutive index, ie: </p>\n\n<ol>\n<li><p>fire, 'a'</p></li>\n<li><p>honey bee, 'a'</p></li>\n<li><p>smoke, 'b'</p></li>\n<li><p>curtain, 'c'</p></li>\n</ol>\n\n<p>So far, I can shuffle using:</p>\n\n<p><code>df = df.sample(frac=1).reset_index(drop=True)</code></p>\n\n<p>I have a vague idea of looping over until <code>df['label'][i+1] != df['label'][i]</code>, but not sure exactly how to. Any pointers or easier suggestion would be appreciated!</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 0, "creation_date": 1548888934, "post_id": 54450766, "comment_id": 95710208, "body": "There is no such a thing as &quot;machine learning histograms&quot;, and your question has actually nothing to do with <code>machine-learning</code> (edited tags &amp; title)."}, {"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 1, "creation_date": 1548891000, "post_id": 54450766, "comment_id": 95710754, "body": "If you&#39;re calling <code>.astype(str).astype(np.int64)</code>, the first is redundant. What does your data look like - are you sure it can all be converted to <code>int</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 4550485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d106bde6a9952ab10d52b4cc9b406bd?s=128&d=identicon&r=PG&f=1", "display_name": "UpstatePedro", "link": "https://stackoverflow.com/users/4550485/upstatepedro"}, "is_accepted": true, "score": 1, "last_activity_date": 1548889109, "creation_date": 1548889109, "answer_id": 54450838, "question_id": 54450766, "link": "https://stackoverflow.com/questions/54450766/pandas-histograms/54450838#54450838", "title": "Pandas histograms", "body": "<p>I think you just need to assign the output of those dtype changes back to your DataFrame:</p>\n\n<pre><code>trainsetcopy['Perioden'] = trainsetcopy['Perioden'].astype(str).astype(np.int64)\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10478511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9152f62c7fd23070b56f3b1e781e91?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/10478511/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54450838, "answer_count": 1, "score": 0, "last_activity_date": 1548904433, "creation_date": 1548888707, "last_edit_date": 1548904433, "question_id": 54450766, "link": "https://stackoverflow.com/questions/54450766/pandas-histograms", "title": "Pandas histograms", "body": "<p>I have emissions data from the 1990s up to 2017 and want to plot a histogram after separating the training and test sets. </p>\n\n<p>The issue (I think) is that the years column is an object data type (entries for this column look like this: <code>1995JJ00</code>) and I want to switch it to an <code>int</code> data type so I can plot a histogram with matplotlib.</p>\n\n<p>The reason why I want to see the years data on a plot is to make sure that splitting the data included a reasonable spread of the years and didn't accidentally include a lot of results from similar years. Maybe this isn't even the best way to decide that, however I'm down this rabbit hole and would like to see it through.</p>\n\n<p>First I removed the unwanted letters and numbers at the end by:</p>\n\n<pre><code>trainsetcopy['Perioden'] = trainsetcopy['Perioden'].map(lambda x: str(x)[:-4])\n</code></pre>\n\n<p>The data is from the Netherlands so 'Perioden' is years. Now I want to change the datatype of the column to enable it for plotting on a histogram. For this I tried:</p>\n\n<pre><code>trainsetcopy['Perioden'].astype(str).astype(np.int64)\n</code></pre>\n\n<p>and ended up with:</p>\n\n<pre><code>trainsetcopy.dtypes\n\nID            int64\nBronnen      object \nPerioden     object \nCO2_1         int64 \nCH4_2       float64 \nN2O_3       float64 \ndtype: object\n</code></pre>\n\n<p>Which hasn't changed the datatype. How can I fix this?</p>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 7729, "user_id": 4718350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-CxgNhC_5nUE/AAAAAAAAAAI/AAAAAAAAP78/9FTapxcd2dY/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4718350/chris"}, "edited": false, "score": 0, "creation_date": 1548888653, "post_id": 54450664, "comment_id": 95710121, "body": "did you try tab and shift+tab ? or backspace?"}, {"owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "reply_to_user": {"reputation": 7729, "user_id": 4718350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-CxgNhC_5nUE/AAAAAAAAAAI/AAAAAAAAP78/9FTapxcd2dY/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4718350/chris"}, "edited": false, "score": 0, "creation_date": 1548891764, "post_id": 54450664, "comment_id": 95710933, "body": "Yes, shit+tab seems working. Just that not that convenient."}], "owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548888116, "creation_date": 1548888116, "question_id": 54450664, "link": "https://stackoverflow.com/questions/54450664/how-to-align-mouse-pointer-quickly-in-pycharm", "title": "How to align mouse pointer quickly in PyCharm?", "body": "<p>For example:</p>\n\n<pre><code>def imshow(img):\n    img = img/2+0.5\n    npimg = img.numpy()\n    plt.imshow(np.transpose(npimg, (1,2,0)))\n    plt.show()\n</code></pre>\n\n<p>after type in this function, the screen focus is just at the ')' position. Now I need to move the focus to the next line, but aligns with 'def', not 'plt', is there a way to do that? Currently after I type in my function and press 'enter', it automatically alines with 'plt', not 'def'.  </p>\n"}, {"tags": ["python", "django", "heroku"], "comments": [{"owner": {"reputation": 137, "user_id": 10992197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmcg6.jpg?s=128&g=1", "display_name": "JLynchDesigns", "link": "https://stackoverflow.com/users/10992197/jlynchdesigns"}, "edited": false, "score": 0, "creation_date": 1548888899, "post_id": 54450653, "comment_id": 95710200, "body": "Do you think that since the detached dyno outputs to logs instead of the console, the writestream would be eating enough memory to cause your issue? Just a thought. Also, you may want to try updating Heroku?"}, {"owner": {"reputation": 350, "user_id": 9035107, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x0QraeCV_Tk/AAAAAAAAAAI/AAAAAAAAAAc/fVd02oGR_co/photo.jpg?sz=128", "display_name": "Teddy Ward", "link": "https://stackoverflow.com/users/9035107/teddy-ward"}, "reply_to_user": {"reputation": 137, "user_id": 10992197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmcg6.jpg?s=128&g=1", "display_name": "JLynchDesigns", "link": "https://stackoverflow.com/users/10992197/jlynchdesigns"}, "edited": false, "score": 0, "creation_date": 1548889285, "post_id": 54450653, "comment_id": 95710297, "body": "it&#39;s possible. it logs a lot of info. do you know of a way to suppress output?"}, {"owner": {"reputation": 137, "user_id": 10992197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmcg6.jpg?s=128&g=1", "display_name": "JLynchDesigns", "link": "https://stackoverflow.com/users/10992197/jlynchdesigns"}, "edited": false, "score": 0, "creation_date": 1548889644, "post_id": 54450653, "comment_id": 95710400, "body": "I&#39;m not so sure about that. Let me look into it..."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 10992197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmcg6.jpg?s=128&g=1", "display_name": "JLynchDesigns", "link": "https://stackoverflow.com/users/10992197/jlynchdesigns"}, "edited": false, "score": 0, "creation_date": 1548950525, "post_id": 54451039, "comment_id": 95737221, "body": "@Teddy Ward Did you try using the log drain?"}, {"owner": {"reputation": 350, "user_id": 9035107, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x0QraeCV_Tk/AAAAAAAAAAI/AAAAAAAAAAc/fVd02oGR_co/photo.jpg?sz=128", "display_name": "Teddy Ward", "link": "https://stackoverflow.com/users/9035107/teddy-ward"}, "edited": false, "score": 0, "creation_date": 1548971679, "post_id": 54451039, "comment_id": 95747455, "body": "I tried, but it seems like since the <code>drains</code> command does not take a <code>--dyno</code> flag, I would have to set up a log drain for the whole app, which I don&#39;t think I can do in my organization. Also, I&#39;m not sure if creating a log drain stops it from logging in memory. seems like it&#39;s more additive. Anyway, I&#39;m experimenting with making the underlying code less noisy, and hoping that helps."}], "tags": [], "owner": {"reputation": 137, "user_id": 10992197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmcg6.jpg?s=128&g=1", "display_name": "JLynchDesigns", "link": "https://stackoverflow.com/users/10992197/jlynchdesigns"}, "is_accepted": false, "score": 2, "last_activity_date": 1548890310, "creation_date": 1548890310, "answer_id": 54451039, "question_id": 54450653, "link": "https://stackoverflow.com/questions/54450653/could-running-a-heroku-one-off-dyno-as-detached-cause-it-to-consume-more-memo/54451039#54451039", "title": "Could running a Heroku one-off dyno as `:detached` cause it to consume more memory?", "body": "<p>So, I lost the ability to comment for the moment, so I am kind of forced to write out an answer. Good news is, I think what you want to do is set up a <a href=\"https://devcenter.heroku.com/articles/log-drains#removing-drains\" rel=\"nofollow noreferrer\">Log Drain</a> to compensate for the memory leaks and/or bottlenecking you're experiencing.</p>\n\n<p>If you don't mind, could I also see one of the logs in question (Pastebin?). I would like to see exactly what's going on, that would probably help.</p>\n"}], "owner": {"reputation": 350, "user_id": 9035107, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x0QraeCV_Tk/AAAAAAAAAAI/AAAAAAAAAAc/fVd02oGR_co/photo.jpg?sz=128", "display_name": "Teddy Ward", "link": "https://stackoverflow.com/users/9035107/teddy-ward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548890310, "creation_date": 1548888076, "question_id": 54450653, "link": "https://stackoverflow.com/questions/54450653/could-running-a-heroku-one-off-dyno-as-detached-cause-it-to-consume-more-memo", "title": "Could running a Heroku one-off dyno as `:detached` cause it to consume more memory?", "body": "<p>When I run my management command in a detached one-off dyno, it exceeds the memory quota almost immediately. When I run non-detached, it works perfectly. I would like some insight as to how that could possibly be. Any answer that points to any documentation on this phenomenon would be amazing.</p>\n\n<p>This is for a Python management command (<code>addfeederpolygons</code>) that I estimate to use a few hundred megabytes of memory, as it does some intensive spatial joins with geodjango.</p>\n\n<p>Are there ways that the underlying code could perform differently in a detached one-off dyno vs. a non-detached one-off dyno?</p>\n\n<p>I expect the results to be the same, regardless of whether or not the dyno is running detached. But here is the actual output:</p>\n\n<p><strong>When running un-detached</strong></p>\n\n<pre><code>$ heroku run -a kevala-api-stage python manage.py addfeederpolygons --geography 25 --overwrite\n \u203a   Warning: heroku update available from 7.0.33 to 7.19.3\nRunning python manage.py addfeederpolygons --geography 25 --overwrite on \u2b22 kevala-api-stage... up, run.8817 (Standard-1X)\ninitialized redis cache\nImported all multipolygon data for 328922\nImported all multipolygon data for 329602\n...etc...\n</code></pre>\n\n<p>this does not crash, and runs <strong>much</strong> faster than the other scenario...</p>\n\n<p><strong>When running detached</strong></p>\n\n<pre><code>$ heroku run:detached -a kevala-api-stage python manage.py addfeederpolygons --geography 25 --overwrite\n$ heroku logs --app kevala-api-stage --dyno run.5051 -n 1500\n \u203a   Warning: heroku update available from 7.0.33 to 7.19.3\n2019-01-30T19:23:10.894495+00:00 heroku[run.5051]: State changed from starting to up\n2019-01-30T19:23:19.578170+00:00 app[run.5051]: initialized redis cache\n2019-01-30T19:23:56.311511+00:00 heroku[run.5051]: Process running mem=553M(108.1%)\n2019-01-30T19:23:56.311732+00:00 heroku[run.5051]: Error R14 (Memory quota exceeded)\n2019-01-30T19:24:00.700959+00:00 app[run.5051]: Imported all multipolygon data for 328922\n2019-01-30T19:24:03.325782+00:00 app[run.5051]: Imported all multipolygon data for 329602\n...etc...\neventually fails with R15\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "docx"], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1548890465, "creation_date": 1548890465, "answer_id": 54451060, "question_id": 54450631, "link": "https://stackoverflow.com/questions/54450631/typeerror-sequence-item-0-expected-str-instance-paragraph-found/54451060#54451060", "title": "Typeerror: sequence item 0: expected str instance, Paragraph found", "body": "<p>The <code>str.join</code> method expects a list of strings, and yet you're giving it a list of <code>Paragraph</code> objects. You should retrieve the <code>text</code> attribute of the <code>Paragraph</code> objects to append to <code>fulltext</code> instead:</p>\n\n<pre><code>fulltext.append(para.text)\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 6950508, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7YT00TuyeQI/AAAAAAAAAAI/AAAAAAAAAAo/Puo-CvvLmk4/photo.jpg?sz=128", "display_name": "Syed Ali", "link": "https://stackoverflow.com/users/6950508/syed-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 54451060, "answer_count": 1, "score": 2, "last_activity_date": 1548890480, "creation_date": 1548887922, "last_edit_date": 1548890480, "question_id": 54450631, "link": "https://stackoverflow.com/questions/54450631/typeerror-sequence-item-0-expected-str-instance-paragraph-found", "title": "Typeerror: sequence item 0: expected str instance, Paragraph found", "body": "<p>I am using below code to open a doc file and store the paragraphs as a string in a Django view.</p>\n\n<pre><code> doc = docx.Document('media/%s'%(filename))\n fulltext = []\n for para in doc.paragraphs:\n     fulltext.append(para)\n docdata1 ='\\n'.join(fulltext)\n</code></pre>\n\n<p>I am getting an error</p>\n\n<pre><code>Typeerror: sequence item 0: expected str instance, Paragraph found\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1548888012, "post_id": 54450621, "comment_id": 95709904, "body": "This is basic array indexing with numpy. Have you read the docs?"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1548888027, "post_id": 54450621, "comment_id": 95709912, "body": "Your question is not very clear, but it seems like you may want to read <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/arrays.indexing.html\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 247, "user_id": 1227066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y14el.jpg?s=128&g=1", "display_name": "cmaureir", "link": "https://stackoverflow.com/users/1227066/cmaureir"}, "edited": false, "score": 0, "creation_date": 1548888128, "post_id": 54450621, "comment_id": 95709939, "body": "Can you try explaining a bit your issue? hopefully you can provide a minimal example, the one you presented seems to be missing something."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1548889495, "post_id": 54450621, "comment_id": 95710358, "body": "This just a special case of indexing with 2 arrays <code>scores[x, y]</code>, with <code>x=np.arange(500)</code>."}, {"owner": {"reputation": 13, "user_id": 8132149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97be6d21d62466bacd7be3b82acd0f06?s=128&d=identicon&r=PG&f=1", "display_name": "apiotrowsky", "link": "https://stackoverflow.com/users/8132149/apiotrowsky"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1548890512, "post_id": 54450621, "comment_id": 95710630, "body": "@hpaulj I understand but is there a way to achive this result without creating np.arange(500)?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8132149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97be6d21d62466bacd7be3b82acd0f06?s=128&d=identicon&r=PG&f=1", "display_name": "apiotrowsky", "link": "https://stackoverflow.com/users/8132149/apiotrowsky"}, "edited": false, "score": 0, "creation_date": 1548945928, "post_id": 54451664, "comment_id": 95734131, "body": "Range can be used for indexing, it gives the same result as numpy.arange()."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "reply_to_user": {"reputation": 13, "user_id": 8132149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97be6d21d62466bacd7be3b82acd0f06?s=128&d=identicon&r=PG&f=1", "display_name": "apiotrowsky", "link": "https://stackoverflow.com/users/8132149/apiotrowsky"}, "edited": false, "score": 0, "creation_date": 1548946966, "post_id": 54451664, "comment_id": 95734826, "body": "You&#39;re right. I tried before writing this answer, but got an error. Maybe I did something wrong that time. I&#39;ll remove the incorrect part."}], "tags": [], "owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "is_accepted": false, "score": 0, "last_activity_date": 1548946995, "last_edit_date": 1548946995, "creation_date": 1548894581, "answer_id": 54451664, "question_id": 54450621, "link": "https://stackoverflow.com/questions/54450621/is-there-a-more-elegant-way-to-take-values-by-indicies-in-2d-array/54451664#54451664", "title": "Is there a more elegant way to take values by indicies in 2D array?", "body": "<p>You could use a list comprehension:</p>\n\n<pre><code>l = [j[y[i]] for i, j in enumerate(scores)]\n</code></pre>\n\n<p><code>l</code> is your 500 length list.</p>\n\n<p>But also <code>numpy.arange()</code> as said in the comments works.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1548902360, "last_edit_date": 1548902360, "creation_date": 1548900811, "answer_id": 54452361, "question_id": 54450621, "link": "https://stackoverflow.com/questions/54450621/is-there-a-more-elegant-way-to-take-values-by-indicies-in-2d-array/54452361#54452361", "title": "Is there a more elegant way to take values by indicies in 2D array?", "body": "<p>In a related question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/54451666/how-to-index-a-ndarray-with-another-ndarray\">How to index a ndarray with another ndarray?</a></p>\n\n<pre><code>a = np.arange(50).reshape(10, 5) # Array to be indexed\nb = np.arange(9, -1, -2) # Indexing array\n</code></pre>\n\n<p>Selecting one item from each column is done with:</p>\n\n<pre><code>In [252]: a[b, np.arange(5)]\nOut[252]: array([45, 36, 27, 18,  9])\n</code></pre>\n\n<p>A similar action in MATLAB requires, <a href=\"https://stackoverflow.com/questions/8184090/how-to-select-one-element-from-each-column-of-a-matrix-in-matlab\">How to select one element from each column of a matrix in matlab?</a>, a <code>sub2ind</code> function which <code>unravels</code> the indices, producing a flat list:</p>\n\n<pre><code>a(sub2ind(size(a), b, 1:length(b)))\n</code></pre>\n\n<p><code>numpy</code> has a similar function, constructing indices in to the 1d flatten (or ravelled) databuffer:</p>\n\n<pre><code>In [253]: np.ravel_multi_index((b, np.arange(5)), a.shape)\nOut[253]: array([45, 36, 27, 18,  9])\nIn [254]: a.flat[_]\nOut[254]: array([45, 36, 27, 18,  9])\n</code></pre>\n\n<p>Those <code>Out[253]</code> numbers are calculated with:</p>\n\n<pre><code>In [256]: b*5 + np.arange(5)\nOut[256]: array([45, 36, 27, 18,  9])\n</code></pre>\n\n<p>So regardless of whether we provide the <code>np.arange(5)</code>, or just 5, or it is deduced from <code>a.shape</code>, the values are required to derive the flat indices.  Hiding that step isn't going to save you any time or memory.</p>\n\n<p>Note that the order of those values is not regular, so it can't be expressed in terms of a slice.  In the more general case we are just picking points scattered at random around the array <code>a</code>.  They don't have to be one per row (or column), there could be several or none.</p>\n\n<p>Here simplicity is in the eye of the beholder.  To me the idea indexing with</p>\n\n<pre><code>a[x, y]\n</code></pre>\n\n<p>where <code>x</code> and <code>y</code> can be any arrays that are broadcastable is simple.</p>\n"}], "owner": {"reputation": 13, "user_id": 8132149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97be6d21d62466bacd7be3b82acd0f06?s=128&d=identicon&r=PG&f=1", "display_name": "apiotrowsky", "link": "https://stackoverflow.com/users/8132149/apiotrowsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 54452361, "answer_count": 2, "score": 0, "last_activity_date": 1548946995, "creation_date": 1548887872, "last_edit_date": 1548888225, "question_id": 54450621, "link": "https://stackoverflow.com/questions/54450621/is-there-a-more-elegant-way-to-take-values-by-indicies-in-2d-array", "title": "Is there a more elegant way to take values by indicies in 2D array?", "body": "<p>I need to take values from a matrix by column indices in the array. My code works but it seems strange that i need to create dummy array.  </p>\n\n<p>EDIT: Scores is 500x10 matrix, y is a list of 500 indicies from 0 to 9. I have to select 500 values corresponding to y.</p>\n\n<pre><code># scores: 2D matrix  \n# y: array of indices\n\ndummy_array = range(scores.shape[0])  \nscores[range(dummy_array), y]\n</code></pre>\n"}, {"tags": ["python", "pytest", "quart"], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 155849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8666534927b738b1f91f744f0e30c94?s=128&d=identicon&r=PG", "display_name": "Zeroshade", "link": "https://stackoverflow.com/users/155849/zeroshade"}, "is_accepted": true, "score": 2, "last_activity_date": 1548952276, "creation_date": 1548952276, "answer_id": 54465117, "question_id": 54450601, "link": "https://stackoverflow.com/questions/54450601/where-is-a-complete-example-of-testing-with-pytest-using-quarts-extension-quart/54465117#54465117", "title": "Where is a complete example of testing with pytest using Quart&#39;s extension Quart-OpenAPI?", "body": "<p>Looking at the pytest fixture docs the name you give the fixture is the name you would reference. So I'd probably change the \"name\" param to be 'testapp' like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pytest\nfrom app.api import QUART_APP as app\n@pytest.fixture(name='testapp')\ndef _test_app():\n  return app\n\n@pytest.mark.asyncio\nasync def test_app(testapp):\n  client = testapp.test_client()\n  response = await client.get('/')\n  assert response.status_code == 200\n</code></pre>\n\n<p>When I set this up in my own directory the above works and passes so it should work for you.</p>\n"}], "owner": {"reputation": 5, "user_id": 5405246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZVxBM.jpg?s=128&g=1", "display_name": "Eli H.", "link": "https://stackoverflow.com/users/5405246/eli-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 54465117, "answer_count": 1, "score": 0, "last_activity_date": 1548952276, "creation_date": 1548887778, "last_edit_date": 1548888386, "question_id": 54450601, "link": "https://stackoverflow.com/questions/54450601/where-is-a-complete-example-of-testing-with-pytest-using-quarts-extension-quart", "title": "Where is a complete example of testing with pytest using Quart&#39;s extension Quart-OpenAPI?", "body": "<p>I'd like to use pytest with Quart's extension quart-openapi, but the documentation examples and googling have not helped.</p>\n\n<p>Where can I find a concrete, example of the pytest testing tool being used with quart-openapi?</p>\n\n<p>So far I've read through these sources: </p>\n\n<p><a href=\"https://pgjones.gitlab.io/quart/blog_tutorial.html#testing\" rel=\"nofollow noreferrer\">Quart's blog tutorial with testing</a></p>\n\n<p><a href=\"http://pgjones.gitlab.io/quart/testing.html\" rel=\"nofollow noreferrer\">Quart documentation on testing</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/49936724/async-fixtures-with-pytest\">Stack Overflow question on similar tools</a></p>\n\n<p>The project structure is:</p>\n\n<pre><code>\u251c\u2500\u2500 app\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 api.py\n\u2502   \u251c\u2500\u2500 log.py\n\u2502   \n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 run.py\n\u2514\u2500\u2500 tests\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 test_endpoint.py\n</code></pre>\n\n<p><code>app/__init__.py</code>:</p>\n\n<pre><code>\n    from .api import QUART_APP\n\n</code></pre>\n\n<p><code>api.py</code>:</p>\n\n<pre><code>\n    \"\"\"Registered endpoints\"\"\"\n    from quart import jsonify\n    from quart_openapi import Pint, Resource\n\n    # Docs say that Pint will forward all init args to Quart()\n    QUART_APP = Pint(__name__, title=\"Quart tts\")\n\n    @QUART_APP.route('/')\n    class Home(Resource):\n        \"\"\" Endpoint that reports its own status \"\"\"\n        async def get(self):\n            \"\"\" Report status of service \"\"\"\n            return jsonify({'OK': True, 'hello': 'world'})\n\n</code></pre>\n\n<p><code>test_endpoint.py</code>:</p>\n\n<pre><code>\n    import pytest\n    from app.api import QUART_APP as app\n    @pytest.fixture(name='test_app')\n    def _test_app():\n        return app\n\n    @pytest.mark.asyncio\n    async def test_app(app):\n        client = app.test_client()\n        response = await client.get('/')\n        assert response.status_code == 200\n\n</code></pre>\n\n<p>Actual results: <code>ERROR at setup of test_app ... fixture 'app' not found</code></p>\n\n<p>Expected results: I'm able to test with quart-openapi using pytest.</p>\n"}, {"tags": ["python", "macos", "pip", "homebrew"], "comments": [{"owner": {"reputation": 26, "user_id": 5773108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x5N8g.jpg?s=128&g=1", "display_name": "mohamad Jamal", "link": "https://stackoverflow.com/users/5773108/mohamad-jamal"}, "edited": false, "score": 0, "creation_date": 1548888199, "post_id": 54450504, "comment_id": 95709975, "body": "<a href=\"https://apple.stackexchange.com/questions/284824/remove-and-reinstall-python-on-mac-can-i-trust-these-old-references\">Try this May help, Remove and Reinstall Python on Mac \u2014 Can I trust these old references?</a>"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 1, "creation_date": 1548888312, "post_id": 54450504, "comment_id": 95710009, "body": "As far as I am aware there are no extra packages installed with MacOS. By default the system python will have site packages in <code>&#47;Library&#47;Python&#47;&lt;Version&gt;&#47;site-packages</code>. But I would be surprised if you have installed into this, user installed versions would normally be in <code>&#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;&lt;version&gt;&#47;...</code>. If you installed anything via <code>homebrew</code> you can completely nuke that. Good luck in getting your system back into a good state - I would learn how to use virtual environments."}], "answers": [{"tags": [], "owner": {"reputation": 247, "user_id": 1227066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y14el.jpg?s=128&g=1", "display_name": "cmaureir", "link": "https://stackoverflow.com/users/1227066/cmaureir"}, "is_accepted": false, "score": 0, "last_activity_date": 1602588267, "last_edit_date": 1602588267, "creation_date": 1548888655, "answer_id": 54450758, "question_id": 54450504, "link": "https://stackoverflow.com/questions/54450504/how-to-fully-revert-python-to-factory-settings-on-mac/54450758#54450758", "title": "How to fully revert Python to factory settings on Mac", "body": "<p>For the system modules you installed via <code>pip</code>, I would do a:</p>\n<pre><code>sudo pip freeze &gt; system_modules.txt\nsudo pip uninstall -y -r system_modules.txt\n</code></pre>\n<p>If you also did the same as a user, I would do the same without <code>sudo</code> (and changing the filename)</p>\n<p>For <code>homebrew</code>, you can try remove python and just install it again:</p>\n<pre><code>brew uninstall --ignore-dependencies python\nbrew uninstall --ignore-dependencies python3\n</code></pre>\n<p>I recommend you to install <a href=\"https://virtualenv.pypa.io/en/latest/\" rel=\"nofollow noreferrer\">virtualenv</a> as soon as you reinstall python\nthen you can just create a new virtual environment:</p>\n<pre><code>virtualenv new_env\n</code></pre>\n<p>activate it:</p>\n<pre><code>source new_env/bin/activate\n</code></pre>\n<p>and work there, and if at some point you mess up some packages, you can just remove the directory.\nAfter the activation you will be able to <code>pip install</code> any package and it will remain inside <code>new_env</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 893, "user_id": 7238987, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/acf47133b3cef8963064bd5d3e90bdb0?s=128&d=identicon&r=PG&f=1", "display_name": "algorythms", "link": "https://stackoverflow.com/users/7238987/algorythms"}, "is_accepted": false, "score": 0, "last_activity_date": 1548894236, "creation_date": 1548894236, "answer_id": 54451615, "question_id": 54450504, "link": "https://stackoverflow.com/questions/54450504/how-to-fully-revert-python-to-factory-settings-on-mac/54451615#54451615", "title": "How to fully revert Python to factory settings on Mac", "body": "<p>first delete directories where python is installed. you can find these using</p>\n\n<p>$ which python </p>\n\n<p>$ which python3</p>\n\n<p>then use \n$ brew doctor</p>\n\n<p>you will find broken links which can be removed using  --> $ brew prune</p>\n\n<p>finally, you should reinstall python using homebrew</p>\n\n<p>hope this helps.</p>\n"}], "owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2271, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1602588267, "creation_date": 1548887215, "question_id": 54450504, "link": "https://stackoverflow.com/questions/54450504/how-to-fully-revert-python-to-factory-settings-on-mac", "title": "How to fully revert Python to factory settings on Mac", "body": "<p>I was looking for this information for a while, but as additional packages and python versions can be installed through <code>homebrew</code> and <code>pip</code> I have the feeling that my environment is messed up. Furthermore a long time ago, I had installed some stuff with <code>sudo pip install</code> and as well <code>sudo python ~/get-pip.py</code>.</p>\n\n<p>Is there a trivial way of removing all danging dependencies and have python as it was when I first got the machine, or at least with only the packages that are delivered with the Mac distro?</p>\n"}, {"tags": ["python", "scikit-learn", "knn"], "comments": [{"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548891876, "post_id": 54450495, "comment_id": 95710964, "body": "Welcome to stackoverflow! Please read <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> . Provide some data for your question. Help community to help you"}], "answers": [{"tags": [], "owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1548891018, "creation_date": 1548891018, "answer_id": 54451152, "question_id": 54450495, "link": "https://stackoverflow.com/questions/54450495/apply-knn-from-small-supervised-dataset-to-large-unsupervised-dataset-in-python/54451152#54451152", "title": "Apply KNN from small supervised dataset to large unsupervised dataset in Python", "body": "<p>In machine learning there are two broad types of learners, namely eager learners (Decision trees, neural nets, svms...) and lazy learners such as <code>KNN</code>. In fact, <code>KNN</code> doesn't do any learning at all. It just stores the \"labeled\" data you have and then uses it to perform inference such that it computes how similar the new sample (unlabeled) is, to all of the samples in the data that it has stored (labeled data). Then based on majority voting of the <code>K</code> nearest instances (<code>K</code> nearest neighbours hence the name) of the new sample, it will infer it's class/value. </p>\n\n<p>Now to get to your question, \"training\" the <code>KNN</code> has nothing to do with the <code>K</code> itself, so when performing inference feel free to use whatever <code>K</code> gives the best result for you.</p>\n"}, {"tags": [], "owner": {"reputation": 1181, "user_id": 8628758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WOsKE.jpg?s=128&g=1", "display_name": "James Dellinger", "link": "https://stackoverflow.com/users/8628758/james-dellinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1548903767, "creation_date": 1548903767, "answer_id": 54452705, "question_id": 54450495, "link": "https://stackoverflow.com/questions/54450495/apply-knn-from-small-supervised-dataset-to-large-unsupervised-dataset-in-python/54452705#54452705", "title": "Apply KNN from small supervised dataset to large unsupervised dataset in Python", "body": "<p>I would recommend actually fitting a KNN model on your larger dataset a couple of different times, each time using a different value for <code>k</code>. For each of those models you could then calculate the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.metrics.silhouette_score.html\" rel=\"nofollow noreferrer\">Silhouette Score</a>. </p>\n\n<p>Compare the various silhouette scores and choose for your final value of <code>k</code> (number of clusters) the value that you used for your highest scoring model.</p>\n\n<p>As an example, here's some code I used to do this for myself last year:</p>\n\n<pre><code>from sklearn import mixture\nfrom sklearn.metrics import silhouette_score\nimport matplotlib.pyplot as plt\n\n\n## A list of the different numbers of clusters (the 'n_components' parameter) with \n## which we will run GMM.\nnumber_of_clusters = [2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]\n\n## Graph plotting method\ndef makePlot(number_of_clusters, silhouette_scores):\n    # Plot the each value of 'number of clusters' vs. the silhouette score at that value\n    fig, ax = plt.subplots(figsize=(16, 6))\n    ax.set_xlabel('GMM - number of clusters')\n    ax.set_ylabel('Silhouette Score (higher is better)')\n    ax.plot(number_of_clusters, silhouette_scores)\n\n    # Ticks and grid\n    xticks = np.arange(min(number_of_clusters), max(number_of_clusters)+1, 1.0)\n    ax.set_xticks(xticks, minor=False)\n    ax.set_xticks(xticks, minor=True)\n    ax.xaxis.grid(True, which='both')\n    yticks = np.arange(round(min(silhouette_scores), 2), max(silhouette_scores), .02)\n    ax.set_yticks(yticks, minor=False)\n    ax.set_yticks(yticks, minor=True)\n    ax.yaxis.grid(True, which='both')\n\n## Graph the mean silhouette score of each cluster amount.\n## Print out the number of clusters that results in the highest\n## silhouette score for GMM.\ndef findBestClusterer(number_of_clusters):\n    silhouette_scores = []\n    for i in number_of_clusters:\n        clusterer = mixture.GMM(n_components=i) # Use the model of your choice here\n        clusterer.fit(&lt;your data set&gt;) # enter your data set's variable name here\n        preds = clusterer.predict(&lt;your data set&gt;)\n        score = silhouette_score(&lt;your data set&gt;, preds)\n        silhouette_scores.append(score)\n\n    ## Print a table of all the silhouette scores\n    print(\"\")\n    print(\"| Number of clusters | Silhouette score |\")\n    print(\"| ------------------ | ---------------- |\")\n    for i in range(len(number_of_clusters)):\n        ## Ensure printed table is properly formatted, taking into account\n        ## amount of digits (either one or two) in the value for number of clusters.\n        if number_of_clusters[i] &lt;= 9:\n            print(\"| {number}                  | {score:.4f}           |\".format(number=number_of_clusters[i], \n                                                                        score=round(silhouette_scores[i], 4)))\n        else:\n            print(\"| {number}                 | {score:.4f}           |\".format(number=number_of_clusters[i], \n                                                                        score=round(silhouette_scores[i], 4)))\n\n\n    ## Graph the plot of silhoutte scores for each amount of clusters\n    makePlot(number_of_clusters, silhouette_scores)\n\n    ## Find and print out the cluster amount that gives the highest \n    ## silhouette score.\n    best_silhouette_score = max(silhouette_scores)\n    index_of_best_score = silhouette_scores.index(best_silhouette_score)\n    ideal_number_of_clusters = number_of_clusters[index_of_best_score]\n    print(\"\")\n    print(\"Having {} clusters gives the highest silhouette score of {}.\".format(ideal_number_of_clusters,\n                                                                                round(best_silhouette_score, 4)))\n\nfindBestClusterer(number_of_clusters) \n</code></pre>\n\n<p>Please note that in my example, I used a <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.mixture.GaussianMixture.html\" rel=\"nofollow noreferrer\">GMM</a> model instead of KNN, but you should be able to slightly modify the <code>findBestClusterer()</code> method to use whatever clustering algorithm you wish. In this method you will also specify your dataset.</p>\n"}], "owner": {"reputation": 3, "user_id": 9023178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8be2fd7bdd9eb8332147570d090b98?s=128&d=identicon&r=PG&f=1", "display_name": "rich314", "link": "https://stackoverflow.com/users/9023178/rich314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 54452705, "answer_count": 2, "score": 0, "last_activity_date": 1548903767, "creation_date": 1548887204, "last_edit_date": 1548888887, "question_id": 54450495, "link": "https://stackoverflow.com/questions/54450495/apply-knn-from-small-supervised-dataset-to-large-unsupervised-dataset-in-python", "title": "Apply KNN from small supervised dataset to large unsupervised dataset in Python", "body": "<p>I have trained and tested a KNN model on a small supervised dataset of about 200 samples in Python. I would like to apply these results to a much larger unsupervised dataset of several thousand samples.</p>\n\n<p>My question is: is there a way to fit the KNN model using the small supervised dataset, and then change the K-value for the large unsupervised dataset? I do not want to overfit the model by using the low K-value from the smaller dataset but am unsure how to fit the model and then change the K-value in Python.</p>\n\n<p>Is this possible using KNN? Is there some other way to apply KNN to a much larger unsupervised dataset?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1548887521, "post_id": 54450526, "comment_id": 95709746, "body": "Thanks! This is really great! Any stabs on a loop (I am trying to get better at them but I am really bad at loops)."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 2, "creation_date": 1548887590, "post_id": 54450526, "comment_id": 95709775, "body": "@JohnStud There are cases when loops are useful, but generally do not recommend their use on numeric data (especially when vectorised methods exist). Loops are good for string/regex operations. I have a detailed writeup on that here: <a href=\"https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care\">For loops with pandas - When should I care?</a>"}, {"owner": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1548887736, "post_id": 54450526, "comment_id": 95709824, "body": "Thanks again! Much appreciated help!"}, {"owner": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1548890169, "post_id": 54450526, "comment_id": 95710541, "body": "Actually.. I am getting errors on every single one of these suggestions!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1548890228, "post_id": 54450526, "comment_id": 95710554, "body": "@JohnStud Okay, that&#39;s not particularly... helpful. What does the error say? Please provide the error message as well."}, {"owner": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1548891965, "post_id": 54450526, "comment_id": 95710990, "body": "Sorry, I am not sure what the issue was. I just re-ran everything and got it to work. The first issue was; AttributeError: &#39;float&#39; object has no attribute &#39;loc&#39;"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1548892524, "post_id": 54450526, "comment_id": 95711116, "body": "@JohnStud You must&#39;ve mistakenly reassigned <code>df</code> to something else (not a DataFrame, at least)."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1548887323, "creation_date": 1548887323, "answer_id": 54450526, "question_id": 54450490, "link": "https://stackoverflow.com/questions/54450490/convert-column-values-to-nan-using-np-where/54450526#54450526", "title": "Convert column values to NaN using np.where", "body": "<p>You can directly assign to the column:</p>\n\n<pre><code>m = (df['petal_length'] == 1.6) &amp; (df['petal_width'] == 0.2)\ndf.loc[m, 'species'] = np.nan\n</code></pre>\n\n<p>Or, fixing your code.</p>\n\n<pre><code>df['species'] = np.where(m, np.nan, df['species'])\n</code></pre>\n\n<p>Or, using <code>Series.mask</code>:</p>\n\n<pre><code>df['species'] = df['species'].mask(m)\n</code></pre>\n"}], "owner": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 54450526, "answer_count": 1, "score": 2, "last_activity_date": 1548887385, "creation_date": 1548887182, "last_edit_date": 1548887385, "question_id": 54450490, "link": "https://stackoverflow.com/questions/54450490/convert-column-values-to-nan-using-np-where", "title": "Convert column values to NaN using np.where", "body": "<p>I cannot figure out how to use the index results from np.where in a for loop. I want to use this for loop to ONLY change the values of a column given the np.where index results.</p>\n\n<p>This is a hypothetical example for a situation where I want to find the indexed location of certain problems or anomalies in my dataset, grab their locations with np.where, and then run a loop on the dataframe to recode them as NaN, while leaving every other index untouched.</p>\n\n<p>Here is my simple code attempt so far:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\n# import iris\ndf = pd.read_csv('https://raw.githubusercontent.com/rocketfish88/democ/master/iris.csv')\n\n# conditional np.where -- hypothetical problem data\nfind_error = np.where((df['petal_length'] == 1.6) &amp; \n                  (df['petal_width'] == 0.2))\n\n# loop over column to change error into NA\nfor i in enumerate(find_error):\n    df = df['species'].replace({'setosa': np.nan})\n\n# df[i] is a problem but I cannot figure out how to get around this or an alternative\n</code></pre>\n"}, {"tags": ["python", "django", "transliteration"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1548887554, "post_id": 54450489, "comment_id": 95709761, "body": "What is <code>translit</code> and why are you running your slug through it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10898133"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1548888062, "post_id": 54450489, "comment_id": 95709918, "body": "translit it is a method, which translates russian chars to english. I&#39;m getting error if I&#39;m input english chars. If I&#39;m inputting russian chars , slug doesn&#39;t translating their to english."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10898133"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1548888275, "post_id": 54450489, "comment_id": 95709997, "body": "I need a slug to form an url"}, {"owner": {"reputation": 1063, "user_id": 9631956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KdRAc.jpg?s=128&g=1", "display_name": "Nikita Tonkoskur", "link": "https://stackoverflow.com/users/9631956/nikita-tonkoskur"}, "edited": false, "score": 0, "creation_date": 1548888287, "post_id": 54450489, "comment_id": 95709998, "body": "Try to add language as a second paramether to <code>translit</code> like this: <code>translit(str(instance.title), &#39;ru&#39;, reversed=True)</code> Works fine for me, I use &#39;transliterate` library."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10898133"}, "reply_to_user": {"reputation": 1063, "user_id": 9631956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KdRAc.jpg?s=128&g=1", "display_name": "Nikita Tonkoskur", "link": "https://stackoverflow.com/users/9631956/nikita-tonkoskur"}, "edited": false, "score": 0, "creation_date": 1548888457, "post_id": 54450489, "comment_id": 95710061, "body": "@bloodwithmilk it&#39;s working, thnx)"}, {"owner": {"reputation": 1063, "user_id": 9631956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KdRAc.jpg?s=128&g=1", "display_name": "Nikita Tonkoskur", "link": "https://stackoverflow.com/users/9631956/nikita-tonkoskur"}, "edited": false, "score": 0, "creation_date": 1548888497, "post_id": 54450489, "comment_id": 95710072, "body": "@m0nte-cr1st0 I&#39;ll add it as an answer"}], "answers": [{"tags": [], "owner": {"reputation": 1063, "user_id": 9631956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KdRAc.jpg?s=128&g=1", "display_name": "Nikita Tonkoskur", "link": "https://stackoverflow.com/users/9631956/nikita-tonkoskur"}, "is_accepted": true, "score": 0, "last_activity_date": 1548888687, "creation_date": 1548888687, "answer_id": 54450764, "question_id": 54450489, "link": "https://stackoverflow.com/questions/54450489/cant-detect-language-for-the-text-notebook-9-pro-given-from-pre-save-signal/54450764#54450764", "title": "Can&#39;t detect language for the text &quot;Notebook 9 Pro&quot; given from pre_save signal. Django 2.1, Python 3.7", "body": "<p>You should add language as a second parameter to <code>translit</code> function:</p>\n\n<pre><code>from transliterate import translit\n\n\ndef pre_save_product_slug(sender, instance, *args, **kwargs):\n    if not instance.slug:\n        slug = slugify(translit(str(instance.title), 'ru', reversed=True))\n        instance.slug = slug\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10898133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 54450764, "answer_count": 1, "score": -1, "last_activity_date": 1548888884, "creation_date": 1548887181, "last_edit_date": 1548888884, "question_id": 54450489, "link": "https://stackoverflow.com/questions/54450489/cant-detect-language-for-the-text-notebook-9-pro-given-from-pre-save-signal", "title": "Can&#39;t detect language for the text &quot;Notebook 9 Pro&quot; given from pre_save signal. Django 2.1, Python 3.7", "body": "<p>I want to automatically create slug in admin with helping by <code>pre_save signal</code> (when filling in the model's  name), but I have next error: <em>Can't detect language for the text \"Notebook 9 Pro\" given.</em></p>\n\n<p>I know, that can make with <code>prepopulated_fields</code>, but i need method with pre_save signal. \nThx.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class Product(models.Model):\n    title = models.CharField(max_length=120)\n    slug = models.SlugField(blank=True)\n\n    def __str__(self):\n        return self.title\n\n    def get_absolute_url(self):\n        return reverse('product_detail', kwargs={'product_slug': self.slug})\n\ndef pre_save_product_slug(sender, instance, *args, **kwargs):\n    if not instance.slug:\n        slug = slugify(translit(str(instance.title), reversed=True))\n        instance.slug = slug\n\npre_save.connect(pre_save_product_slug, sender=Product)\n</code></pre>\n\n<p><strong>Traceback</strong></p>\n\n<pre><code>/media/m0nte-cr1st0/43338d5a-aa90-411c-a6d7-96964c46e415/m0nte-cr1st0/programming/django_projects/djangoshop/ecomapp/models.py in pre_save_product_slug\n        slug = slugify(translit(str(instance.title), reversed=True)) ...\n\u25b6 Local vars\n/media/m0nte-cr1st0/43338d5a-aa90-411c-a6d7-96964c46e415/m0nte-cr1st0/programming/django_projects/myvenv/lib/python3.5/site-packages/transliterate/utils.py in translit\n        language_code = detect_language(value, fail_silently=False) ...\n\u25b6 Local vars\n/media/m0nte-cr1st0/43338d5a-aa90-411c-a6d7-96964c46e415/m0nte-cr1st0/programming/django_projects/myvenv/lib/python3.5/site-packages/transliterate/utils.py in detect_language\n            _(\"\"\"Can't detect language for the text \"%s\" given.\"\"\") % text ...\n\u25b6 Local vars\n</code></pre>\n\n<p>I'm getting error if I'm input english chars. If I'm inputting russian chars , slug doesn't translating their to english.</p>\n\n<p>I need a slug to form an url.</p>\n"}, {"tags": ["python", "python-3.x", "machine-learning", "scikit-learn", "classification"], "answers": [{"tags": [], "owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "is_accepted": true, "score": 10, "last_activity_date": 1600877788, "last_edit_date": 1600877788, "creation_date": 1548892729, "answer_id": 54451414, "question_id": 54450453, "link": "https://stackoverflow.com/questions/54450453/classification-metrics-cant-handle-a-mix-of-binary-and-continuous-targets/54451414#54451414", "title": "Classification metrics can&#39;t handle a mix of binary and continuous targets", "body": "<p>All your commented-out models are not classifiers but <em>regression</em> models, for which accuracy is meaningless.</p>\n<p>You get the error because these regression models do not produce binary outcomes, but continuous (float) numbers (as all regression models do); so, when scikit-learn attempts to calculate the accuracy by comparing a binary number (true label) with a float (predicted value), it not unexpectedly gives an error. And this cause is clearly hinted at the error message itself:</p>\n<pre><code>Classification metrics can't handle a mix of binary and continuous target\n</code></pre>\n<p>Notice also that the accepted (and highly upvoted...!) answer in the <a href=\"https://stackoverflow.com/questions/38015181/accuracy-score-valueerror-cant-handle-mix-of-binary-and-continuous\">question</a> suggested at the first comment as a possible duplicate of yours is <strong>wrong</strong>; there, as here, the root cause is the use of accuracy in a <code>LinearRegression</code> model, which, as already said, is meaningless.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 11384887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXQTp.jpg?s=128&g=1", "display_name": "RyanAbnavi", "link": "https://stackoverflow.com/users/11384887/ryanabnavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1600878009, "last_edit_date": 1600878009, "creation_date": 1592850607, "answer_id": 62521140, "question_id": 54450453, "link": "https://stackoverflow.com/questions/54450453/classification-metrics-cant-handle-a-mix-of-binary-and-continuous-targets/62521140#62521140", "title": "Classification metrics can&#39;t handle a mix of binary and continuous targets", "body": "<p>I have used a few models for stacking using the <code>vecstack</code> and set <code>needs_proba=True</code> and then got this error. I solved it by <strong>changing the metric</strong> inside the stacking. because stacking use class prediction by default, so in case you want to have probabilities you should change the metric as well. I have defined a new function as metric:</p>\n<pre><code>def get_classification_metric(testy, probs):\n    from sklearn.metrics import precision_recall_curve\n    precision, recall, thresholds = precision_recall_curve(testy, probs[:,1])\n    # convert to f score\n    fscore = (2 * precision * recall) / (precision + recall)\n    # locate the index of the largest f score\n    ix = np.argmax(fscore)\n    return fscore[ix]\n</code></pre>\n<p>This function finds the highest F1 score at optimal threshold. So only need to set <code>metric=get_classification_metric</code> inside the stacking function.</p>\n"}], "owner": {"reputation": 1274, "user_id": 688563, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ba0fb451b240351c79a96cae6ea14ea?s=128&d=identicon&r=PG&f=1", "display_name": "PhilBot", "link": "https://stackoverflow.com/users/688563/philbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18431, "favorite_count": 4, "accepted_answer_id": 54451414, "answer_count": 2, "score": 7, "last_activity_date": 1600878009, "creation_date": 1548886954, "last_edit_date": 1597919850, "question_id": 54450453, "link": "https://stackoverflow.com/questions/54450453/classification-metrics-cant-handle-a-mix-of-binary-and-continuous-targets", "title": "Classification metrics can&#39;t handle a mix of binary and continuous targets", "body": "<p>I try to train and test several scikit-learn models and attempt to print off the accuracy. Only some of these models work, others fail with the</p>\n<pre><code>ValueError: Classification metrics can't handle a mix of binary and continuous targets. \n</code></pre>\n<p>What does this error mean?\nHow can I modify my code below to successfully evaluate the models that are failing?</p>\n<pre><code>import pandas as pd\nimport numpy as np\n\nimport matplotlib.pyplot as plt\nfrom sklearn import model_selection\nfrom sklearn.metrics import classification_report\nfrom sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import accuracy_score\n\nfrom sklearn import linear_model\nfrom sklearn import svm\n\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.discriminant_analysis import LinearDiscriminantAnalysis\nfrom sklearn.naive_bayes import GaussianNB\nfrom sklearn.svm import SVC\n\nfrom sklearn import preprocessing\nfrom sklearn import utils\n\n# Shuffle pandas rows randomly\nfrom sklearn.utils import shuffle\n\n# Disable annoying warnings\nimport warnings\nwarnings.simplefilter(action='ignore', category=FutureWarning)\nwarnings.simplefilter(action='ignore', category=UserWarning)\n\n# Performance\nimport time\n\n# Import the data and assign the column names\ncolNames = []\nfor colName in range(0,3780):\n    colNames.append(&quot;%s&quot;%(colName))\ncolNames.append('class')\ndf = pd.read_csv(&quot;HoGTestData.csv&quot;, names=colNames)\n\n# Randomly shuffle rows\ndf = shuffle(df)\ndf = df.head(20)\n\n# Print some info on the dataset\nprint(&quot;Head of Data:&quot;)\nprint(df.head())\nprint(&quot;Shape of Data:&quot;)\nprint(df.shape)\n\n# descriptions\nprint(&quot;Describe Data:&quot;)\n#print(df.describe())\n\n# class distribution\nprint(df.groupby('class').size())\n\n# Split-out validation dataset\ndatasetData = df.values\n\n# Determine shape and portion of data that is real data as opposed to labels\nshape = datasetData.shape\nthresh = int(shape[1]) - 1\n\n# Extract labels and feature vectors\nfeatureVectors = datasetData[:,0:thresh]\nlabels = datasetData[:,thresh:]\n\n# Perform a standard scaler on the data\nscaler = preprocessing.StandardScaler()\nfeatureVectors = scaler.fit_transform(featureVectors)\n\n# Encode labels to be acceptable\nlabelEncoder = preprocessing.LabelEncoder()\nlabels = labelEncoder.fit_transform(labels)\n\n# Split data into training and testing data\ntest_size = 0.20\nseed = 7\nfeatureVectorTrain, featureVectorTest, labelsTrain, labelsTest = model_selection.train_test_split(featureVectors, labels, test_size=test_size, random_state=seed)\n\n# Spot Check Algorithms\nmodels = []\nmodels.append(('SVM', svm.SVC()))\nmodels.append(('LR', LogisticRegression()))\nmodels.append(('LDA', LinearDiscriminantAnalysis()))\nmodels.append(('KNN', KNeighborsClassifier()))\nmodels.append(('CART', DecisionTreeClassifier()))\nmodels.append(('NB', GaussianNB()))\n#models.append(('SGDRegressor', linear_model.SGDRegressor())) #ValueError: Classification metrics can't handle a mix of binary and continuous targets\n#models.append(('BayesianRidge', linear_model.BayesianRidge())) #ValueError: Classification metrics can't handle a mix of binary and continuous targets\n#models.append(('LassoLars', linear_model.LassoLars())) #ValueError: Classification metrics can't handle a mix of binary and continuous targets\n#models.append(('ARDRegression', linear_model.ARDRegression())) #ValueError: Classification metrics can't handle a mix of binary and continuous targets\n#models.append(('PassiveAggressiveRegressor', linear_model.PassiveAggressiveRegressor())) #ValueError: Classification metrics can't handle a mix of binary and continuous targets\n#models.append(('TheilSenRegressor', linear_model.TheilSenRegressor())) #ValueError: Classification metrics can't handle a mix of binary and continuous targets\n#models.append(('LinearRegression', linear_model.LinearRegression())) #ValueError: Classification metrics can't handle a mix of binary and continuous targets\n\n# Test options and evaluation metric\nseed = 42\nscoring = 'accuracy'\n\n# evaluate each model in turn\nresults = []\nnames = []\nprint(&quot;---------------------------------------&quot;)\nfor name, model in models:\n    start_time = time.time()\n    kfold = model_selection.KFold(n_splits=10, random_state=seed)\n    cv_results = model_selection.cross_val_score(model, featureVectorTrain, labelsTrain, cv=kfold, scoring=scoring)\n    elapsed_time = time.time() - start_time\n    results.append(cv_results)\n    names.append(name)\n    msg = &quot;{:3.2f} ({:3.2f})  Time elapsed: {:6.2f}&quot;.format(cv_results.mean(), cv_results.std(), elapsed_time)\n    msg = &quot;%s &quot;%(name) + msg\n    print(msg)\nprint(&quot;---------------------------------------&quot;)\n\nprint(&quot;Done&quot;)\n</code></pre>\n<p>Here is the script output:</p>\n<pre><code>Head of Data:\n              0         1         2  ...        3778      3779  class\n20573  0.124282  0.090376  0.088723  ...    0.148411  0.120542     -1\n20461  0.154031  0.110177  0.087799  ...    0.100416  0.119484     -1\n10416  0.340767  0.150863  0.025489  ...    0.047592  0.036171      1\n52404  0.000000  0.000000  0.000000  ...    0.000000  0.000000     -1\n42785  0.159105  0.118963  0.090405  ...    0.009996  0.027460     -1\n\n[5 rows x 3781 columns]\nShape of Data:\n(1024, 3781)\nDescribe Data:\nclass\n-1    794\n 1    230\ndtype: int64\n---------------------------------------\nSVM 0.9878 (0.0123)  Time elapsed:  10.20\nLR 0.9414 (0.0187)  Time elapsed:   7.09\nLDA 0.9768 (0.0128)  Time elapsed:   6.60\nKNN 0.8511 (0.0384)  Time elapsed:   3.06\nCART 0.9047 (0.0358)  Time elapsed:   8.84\nNB 0.9292 (0.0209)  Time elapsed:   0.36\n---------------------------------------\nDone\n</code></pre>\n<p>Here is the labelsTrain variable:</p>\n<pre><code>print(labelsTrain)\n[0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 1 0 1 1 1 0 1 1 0 0\n 1 1 0 1 0 0 0 0 0 0 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0\n 0 0 1 1 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 1 1 0 0 1 0 1 0 0 1 0 0 0 1 1 0 0 0\n 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0\n 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n 0 0 0 0 1 1 1 0 1 1 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1\n 1 0 1 1 0 0 0 1 0 1 0 0 0 0 0 0 1 1 0 0 0 0 0 1 1 0 0 0 0 1 0 0 1 0 0 0 1\n 0 1 0 1 0 0 0 0 1 0 0 1 0 0 0 0 1 0 0 1 0 0 1 0 1 0 0 0 0 0 0 1 0 0 1 0 0\n 0 0 0 0 1 1 0 0 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0\n 1 0 0 0 0 0 0 0 1 0 0 0 1 0 0 1 0 0 0 1 1 0 1 0 1 1 0 1 0 0 0 0 0 0 1 0 1\n 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 1 0\n 0 1 0 0 0 1 0 1 0 0 1 0 1 0 1 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0\n 0 0 1 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0\n 0 0 0 0 1 1 0 0 0 1 0 0 0 0 0 0 0 0 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 1 0 0 0 0 0 1 1 0 0 0 0 0\n 0 0 0 1 1 1 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 1 1 0 0 0 0 0 1 0 1 0 0 0\n 1 0 0 0 0 0 1 1 0 0 0 0 1 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0\n 1 0 0 0 0 0 0 1 1 0 0 1 0 0 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 1 0 1\n 0 0 0 0 1 0 1 0 0 1 1 1 1 0 1 0 0 0 0 0 1 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 0\n 0 0 1 1 0 0 1 0 0 0 0 0 0 1 0 0 1 1 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 0\n 0 0 1 0 0]\n</code></pre>\n<p>The errors happen during the cross_val_score function:</p>\n<pre><code># evaluate each model in turn\nresults = []\nnames = []\nprint(&quot;---------------------------------------&quot;)\nfor name, model in models:\n    start_time = time.time()\n    kfold = model_selection.KFold(n_splits=10, random_state=seed)\n    print(&quot;start cross_val_score&quot;)\n    cv_results = model_selection.cross_val_score(model, featureVectorTrain, labelsTrain, cv=kfold, scoring=scoring)\n    print(&quot;done cross_val_score&quot;)\n    elapsed_time = time.time() - start_time\n    results.append(cv_results)\n    #print(results)\n    names.append(name)\n    msg = &quot;{:3.4f} ({:3.4f})  Time elapsed: {:6.2f}&quot;.format(cv_results.mean(), cv_results.std(), elapsed_time)\n    msg = &quot;%s &quot;%(name) + msg\n    print(msg)\nprint(&quot;---------------------------------------&quot;)\n\n... \n\n---------------------------------------\nstart cross_val_score\ndone cross_val_score\nSVM 0.9744 (0.0127)  Time elapsed:  10.46\nstart cross_val_score\ndone cross_val_score\nLR 0.9194 (0.0390)  Time elapsed:   9.56\nstart cross_val_score\ndone cross_val_score\nLDA 0.9780 (0.0106)  Time elapsed:   8.04\nstart cross_val_score\ndone cross_val_score\nKNN 0.8657 (0.0319)  Time elapsed:   3.20\nstart cross_val_score\ndone cross_val_score\nCART 0.9072 (0.0326)  Time elapsed:  10.20\nstart cross_val_score\ndone cross_val_score\nNB 0.9182 (0.0327)  Time elapsed:   0.38\nstart cross_val_score\nTraceback (most recent call last):\n  File &quot;/Users/me/Desktop/MachineLearning/Initial.py&quot;, line 112, in &lt;module&gt;\n    cv_results = model_selection.cross_val_score(model, featureVectorTrain, labelsTrain, cv=kfold, scoring=scoring)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/model_selection/_validation.py&quot;, line 402, in cross_val_score\n    error_score=error_score)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/model_selection/_validation.py&quot;, line 240, in cross_validate\n    for train, test in cv.split(X, y, groups))\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/parallel.py&quot;, line 917, in __call__\n    if self.dispatch_one_batch(iterator):\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/parallel.py&quot;, line 759, in dispatch_one_batch\n    self._dispatch(tasks)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/parallel.py&quot;, line 716, in _dispatch\n    job = self._backend.apply_async(batch, callback=cb)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/_parallel_backends.py&quot;, line 182, in apply_async\n    result = ImmediateResult(func)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/_parallel_backends.py&quot;, line 549, in __init__\n    self.results = batch()\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/parallel.py&quot;, line 225, in __call__\n    for func, args, kwargs in self.items]\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/parallel.py&quot;, line 225, in &lt;listcomp&gt;\n    for func, args, kwargs in self.items]\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/model_selection/_validation.py&quot;, line 568, in _fit_and_score\n    test_scores = _score(estimator, X_test, y_test, scorer, is_multimetric)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/model_selection/_validation.py&quot;, line 605, in _score\n    return _multimetric_score(estimator, X_test, y_test, scorer)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/model_selection/_validation.py&quot;, line 635, in _multimetric_score\n    score = scorer(estimator, X_test, y_test)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/metrics/scorer.py&quot;, line 98, in __call__\n    **self._kwargs)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/metrics/classification.py&quot;, line 176, in accuracy_score\n    y_type, y_true, y_pred = _check_targets(y_true, y_pred)\n  File &quot;/usr/local/lib/python3.7/site-packages/sklearn/metrics/classification.py&quot;, line 81, in _check_targets\n    &quot;and {1} targets&quot;.format(type_true, type_pred))\nValueError: Classification metrics can't handle a mix of binary and continuous targets\n</code></pre>\n<p>Here is my entire ( under sampled ) dataset that shows the error with this code:</p>\n<p><a href=\"https://shrib.com/#EQZsqzXMoT2BEpSGM08R\" rel=\"nofollow noreferrer\">Entire Dataset</a></p>\n"}, {"tags": ["python", "beautifulsoup", "google-play", "pdb"], "comments": [{"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "edited": false, "score": 1, "creation_date": 1548887250, "post_id": 54450423, "comment_id": 95709641, "body": "<code>AttributeError: &#39;NoneType&#39; object has no attribute &#39;span&#39;</code> is pretty explicit, <code>bs.find(&quot;span&quot;,{&quot;class&quot;:&quot;oocvOe&quot;})</code> gave you <code>None</code>, try printing it or something before calling <code>.span.&lt;everything_else&gt;</code>, and also take another look at the source code of the page you are scrapping maybe there&#39;s something you&#39;ve missed."}], "answers": [{"tags": [], "owner": {"reputation": 513, "user_id": 10485625, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217741712717286/picture?type=large", "display_name": "userHG", "link": "https://stackoverflow.com/users/10485625/userhg"}, "is_accepted": false, "score": 2, "last_activity_date": 1548889104, "creation_date": 1548889104, "answer_id": 54450834, "question_id": 54450423, "link": "https://stackoverflow.com/questions/54450423/error-while-scraping-and-populate-json-in-python-use-of-python-debug-pdb/54450834#54450834", "title": "Error while scraping and populate JSON in python / Use of python debug pdb", "body": "<p>The AttributeError: 'NoneType' object has no attribute 'span' was due to white spaces in my 'applications.txt' because none of the package was giving 'None' except an empty line. </p>\n\n<p>Once I deleted all white spaces everything was working.</p>\n"}], "owner": {"reputation": 513, "user_id": 10485625, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217741712717286/picture?type=large", "display_name": "userHG", "link": "https://stackoverflow.com/users/10485625/userhg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548889104, "creation_date": 1548886728, "question_id": 54450423, "link": "https://stackoverflow.com/questions/54450423/error-while-scraping-and-populate-json-in-python-use-of-python-debug-pdb", "title": "Error while scraping and populate JSON in python / Use of python debug pdb", "body": "<p>I'm scraping the Android Play Store to populate a json file with informations about apps. </p>\n\n<p>Here is my code :</p>\n\n<pre><code>filename = \"applications.txt\" #file containing apps names com.app...\nfile = open(filename, \"r\")\n\nappArray = [line.rstrip() for line in open(filename)]\n\ndef createGPscrapjson(pkg_name):\n    url = 'https://play.google.com/store/apps/details?id=' + pkg_name\n    response = get(url)\n    html_soup = BeautifulSoup(response.text, 'html.parser')\n    bs = BeautifulSoup(response.text,\"lxml\")\n    result = {}\n    details = bs.find_all(\"div\",{\"class\":\"hAyfc\"})\n    for item in details:\n        label = item.findChild('div', {'class' : 'BgcNfc'})\n        value = item.findChild('span', {'class' : 'htlgb'})\n        result[label.text] = value.text\n        devurl = item.findChild(\"a\",{\"class\":\"hrTbp\"})\n\n    category = [e.text for e in bs.find_all(\"span\",{\"class\":\"T32cc UAO9ie\"})]\n    appdescription = bs.find(\"div\",{\"class\":\"DWPxHb\"})\n    #developer_link = bs.find(\"div\",{\"class\":\"rAknu\"}).find('a').get('href')\n    developer_link = bs.find(\"span\",{\"class\":\"T32cc UAO9ie\"}).find('a').get('href')\n    rating = [e.text for e in bs.find_all(\"div\",{\"class\":\"BHMmbe\"})]\n    reviewers = [e.text for e in bs.find_all(\"span\",{\"class\":\"AYi5wd TBRnV\"})]\n    price = bs.find(\"span\",{\"class\":\"oocvOe\"}).span.find(itemprop=\"price\").get('content')\n\n    def developermail():\n        devinfos = result['Developer'].lower() #Need to be in lower for the regex\n        devmail = re.search(r'[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}',devinfos).group(0)\n        if \"website\" in devmail:\n            return(devmail[7:])\n        else:\n            return(devmail)\n\n     data = {}\n     data['appdata'] = []\n     data['appdata'].append({\n    'rating' : rating[0] if len(rating) != 0 else \"No rate\",\n    'reviewers' : reviewers[0] if len(reviewers) != 0 else 0,\n    'app_url' : 'https://play.google.com/store/apps/details?id=' + pkg_name,\n    'title': html_soup.find(class_=\"AHFaub\").text,\n     'version' : result['Current Version'],\n     'pkg_name' : pkg_name,\n    'developer': result['Offered By'],\n    'dev_website' : \"No website\" if \"mailto:\" in devurl.get('href') else devurl.get('href'),\n    'downloads' : result['Installs'],\n    'category' : category[1],\n     'description' : appdescription.text,\n     'price' : price,\n     'developer_link' :developer_link,\n    'operating_system' : \"Android\",\n    'email' : developermail(),\n     'updated': result['Updated']\n    })\n\n    jsonfile_one = \"scrapGPdata.json\"      #Get all the appS infos in one JSON\n    with open(jsonfile_one, 'a+') as outfile_one:\n        json.dump(data, outfile_one)\n\n    for i in range(0,len(appArray)):\n        pdb.set_trace()\n        createGPscrapjson(appArray[i])\n</code></pre>\n\n<p>When I execute my code I have this error :</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File \"ScrapAppPage.py\", line 141,\n  in \n      createGPscrapjson(appArray[i])   File \"ScrapAppPage.py\", line 49, in createGPscrapjson\n      price = bs.find(\"span\",{\"class\":\"oocvOe\"}).span.find(itemprop=\"price\").get('content')\n  AttributeError: 'NoneType' object has no attribute 'span'</p>\n</blockquote>\n\n<p>Where is my mistake and how can I use the debug mode (pdb) to see how my json file is populated?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1548886789, "post_id": 54450410, "comment_id": 95709467, "body": "That ain&#39;t a <i>list</i>, but a <code>numpy.ndarray</code>."}, {"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 0, "creation_date": 1548887050, "post_id": 54450410, "comment_id": 95709556, "body": "You are trying to set the function itself as your y value. Check what you want your y values to be first. Your function doesn&#39;t seem like something that you would actually want either."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1548887387, "post_id": 54450410, "comment_id": 95709697, "body": "Do you want to plot the cumulative hours? If yes, then just do <code>hours_per_day = np.array([1, 4, 3, 2, 3, 1])</code> and then <code>plt.plot(days, np.cumsum(hours_per_day), label=&quot;Total Hours&quot;)</code> where you first <code>import numpy as np</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1548887440, "post_id": 54450410, "comment_id": 95709712, "body": "Because your <code>for</code> loop completes, with all values being thrown away, and then you return the last, <i>singular</i> value."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1548887397, "creation_date": 1548887397, "answer_id": 54450541, "question_id": 54450410, "link": "https://stackoverflow.com/questions/54450410/sum-of-n-elements-of-a-list-with-for-in-loop/54450541#54450541", "title": "Sum of n elements of a list with for-in loop", "body": "<p>I might not grasp correctly what you're trying to achieve, but just reading the sentence \"create a graph with the number of days as the x axis and the total hours as the y axis\" this would simply be</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nhours_per_day = [1, 4, 3, 2, 3, 1]\n\nplt.plot(np.cumsum(hours_per_day))\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/bZvMu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bZvMu.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 10927483, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rfY7vzqSDZY/AAAAAAAAAAI/AAAAAAAAACA/sGX5RKE_7UU/photo.jpg?sz=128", "display_name": "Tudor Popica", "link": "https://stackoverflow.com/users/10927483/tudor-popica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548899608, "creation_date": 1548886661, "last_edit_date": 1548899608, "question_id": 54450410, "link": "https://stackoverflow.com/questions/54450410/sum-of-n-elements-of-a-list-with-for-in-loop", "title": "Sum of n elements of a list with for-in loop", "body": "<p>I am trying to create a graph with the number of days as the x axis and the total hours as the y axis, but I don't know how to create the y axis. The code is:</p>\n\n<pre><code>hours_per_day = [1, 4, 3, 2, 3, 1]\ndays = [x for x in range(len(hours_per_day))]\n\n\ndef total_hours():\n        y = 0\n        for x in hours_per_day:\n                y = x + y\n        return y\n\n\nplt.plot(days, total_hours, label=\"Total Hours\")\n</code></pre>\n\n<p>And the error: </p>\n\n<pre><code>ValueError: x and y must have same first dimension, but have shapes (6,) and (1,)\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "pycharm"], "comments": [{"owner": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 1, "creation_date": 1548886772, "post_id": 54450362, "comment_id": 95709461, "body": "Why this is not possible from <code>Edit Configurations</code> and then add whatever you want to parameters?"}, {"owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "reply_to_user": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 0, "creation_date": 1548893378, "post_id": 54450362, "comment_id": 95711339, "body": "I see <code>Additional Arguments</code> (arguments to the test case I believe), and <code>Interpreter options</code> (arguments to the python interpreter). But nothing there that lets me send arguments to pytest. Am I wrong?"}, {"owner": {"reputation": 5051, "user_id": 2787185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8db1d0a1d644464a0f834ba886a6cd9?s=128&d=identicon&r=PG", "display_name": "Pavel Karateev", "link": "https://stackoverflow.com/users/2787185/pavel-karateev"}, "edited": false, "score": 1, "creation_date": 1549007911, "post_id": 54450362, "comment_id": 95757525, "body": "<code>Additional Arguments</code> are arguments for <code>pytest</code> indeed, try it out."}, {"owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "edited": false, "score": 0, "creation_date": 1549062629, "post_id": 54450362, "comment_id": 95783146, "body": "Ah, thanks Pavel, you&#39;re right! I was misusing the argument and it made me think the arguments were not going to the right place. You should post that as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": true, "score": 1, "last_activity_date": 1549570904, "creation_date": 1549570904, "answer_id": 54581660, "question_id": 54450362, "link": "https://stackoverflow.com/questions/54450362/in-pycharm-how-do-you-add-a-custom-parameter-to-pytest-when-running-unittests/54581660#54581660", "title": "In PyCharm, how do you add a custom parameter to pytest when running unittests?", "body": "<p>Answering on behalf of comments, indeed Additional Arguments in the Edit Configurations section does pass arguments through to <code>py.test</code>. My error was in misusing one of the arguments, obfuscating the fact that <code>Additional Arguments</code> was passing on the arguments as expected.</p>\n"}], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 54581660, "answer_count": 1, "score": 1, "last_activity_date": 1549570904, "creation_date": 1548886364, "question_id": 54450362, "link": "https://stackoverflow.com/questions/54450362/in-pycharm-how-do-you-add-a-custom-parameter-to-pytest-when-running-unittests", "title": "In PyCharm, how do you add a custom parameter to pytest when running unittests?", "body": "<p>I'm running a Python unittest in pycharm. This executes the command:</p>\n\n<pre><code>/&lt;path&gt;/python /&lt;path&gt;/_jb_pytest_runner.py --target my_function_test_base.py::MyFunctionTestBase\n</code></pre>\n\n<p>Launching pytest with arguments my_function_test_base.py::MyFunctionTestBase in //tests</p>\n\n<p>I would like to add a pytest option <code>--tb=1</code> that I found in this answer: <a href=\"https://stackoverflow.com/questions/33555891/make-python-unittest-show-assertionerror-but-no-traceback\">Make Python unittest show AssertionError but no Traceback</a> </p>\n\n<p>I don't know how to do that under PyCharm.</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": true, "score": 5, "last_activity_date": 1548886338, "creation_date": 1548886338, "answer_id": 54450356, "question_id": 54450348, "link": "https://stackoverflow.com/questions/54450348/accessing-variables-from-a-different-directory/54450356#54450356", "title": "Accessing variables from a different directory", "body": "<p>If you want variables to be accessible when the module is imported, don't put them in </p>\n\n<pre><code>if __name__ == \"__main__\":\n</code></pre>\n\n<p>That <code>if</code> block is meant to explicitly hide things from those who import the module (in the main module, <code>__name__</code> is <code>\"__main__\"</code>, whereas in imported modules, the <code>__name__</code> is something else - the name of the module).</p>\n\n<p>So, if you currently have this</p>\n\n<pre><code>if __name__ == \"__main__\":\n    my_variable = 7\n    ...\n</code></pre>\n\n<p>Change it to this:</p>\n\n<pre><code>my_variable = 7\n\nif __name__ == \"__main__\":\n    ...\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10473440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VzOA3.png?s=128&g=1", "display_name": "Harambe", "link": "https://stackoverflow.com/users/10473440/harambe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 54450356, "answer_count": 1, "score": 0, "last_activity_date": 1548886426, "creation_date": 1548886264, "last_edit_date": 1548886426, "question_id": 54450348, "link": "https://stackoverflow.com/questions/54450348/accessing-variables-from-a-different-directory", "title": "Accessing variables from a different directory", "body": "<p>How would I access a variable, var, that's in fileA within the </p>\n\n<pre><code>if __name__ == \"__main__\":    \n</code></pre>\n\n<p>in a different file, fileB? I've tried:</p>\n\n<pre><code>import fileA    \nfrom fileA import main\nprint (main.var)\n\n\nimport fileA\nfrom fileA import var\nprint (var)\n\nimport fileA\nfrom fileA import __name__\nprint (__name__.var)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1548886327, "post_id": 54450295, "comment_id": 95709339, "body": "Why is HTML being mixed into this? At best I could say you have a <i>multiindex</i> but I don&#39;t get the HTML table"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 4, "creation_date": 1548886530, "post_id": 54450295, "comment_id": 95709385, "body": "It would be more beneficial to see the code that generated this to fix that, rather than put bandaids on top of bad code."}, {"owner": {"reputation": 25, "user_id": 6105836, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204609210784864/picture?type=large", "display_name": "Queila Martins", "link": "https://stackoverflow.com/users/6105836/queila-martins"}, "edited": false, "score": 0, "creation_date": 1548934299, "post_id": 54450295, "comment_id": 95727078, "body": "Sorry, guys...the HTML was the only way I found to add a table, I should have mentioned that. I spend more time trying to add a table in other ways than to really explain that."}, {"owner": {"reputation": 1752, "user_id": 9094710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_cKm8ormGks/AAAAAAAAAAI/AAAAAAAABXQ/foU1k07iisM/photo.jpg?sz=128", "display_name": "Qusai Alothman", "link": "https://stackoverflow.com/users/9094710/qusai-alothman"}, "edited": false, "score": 0, "creation_date": 1549341939, "post_id": 54450295, "comment_id": 95857487, "body": "@QueilaMartins if my answer solves your problem, then kindly accept it. Or provide some feedback!"}, {"owner": {"reputation": 25, "user_id": 6105836, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204609210784864/picture?type=large", "display_name": "Queila Martins", "link": "https://stackoverflow.com/users/6105836/queila-martins"}, "reply_to_user": {"reputation": 1752, "user_id": 9094710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_cKm8ormGks/AAAAAAAAAAI/AAAAAAAABXQ/foU1k07iisM/photo.jpg?sz=128", "display_name": "Qusai Alothman", "link": "https://stackoverflow.com/users/9094710/qusai-alothman"}, "edited": false, "score": 0, "creation_date": 1549366386, "post_id": 54450295, "comment_id": 95868348, "body": "Sorry I still didn&#39;t accept it, @QusaiAlothman. I&#39;m not sure if it will work as I tested something similar with Rename method previously. But I&#39;ll test it today (I was in a hurry delivering something else and I had to leave this for some days, but I&#39;ll come back to it as I need to solve it too). Thanks and sorry for the delay!"}], "answers": [{"tags": [], "owner": {"reputation": 1752, "user_id": 9094710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_cKm8ormGks/AAAAAAAAAAI/AAAAAAAABXQ/foU1k07iisM/photo.jpg?sz=128", "display_name": "Qusai Alothman", "link": "https://stackoverflow.com/users/9094710/qusai-alothman"}, "is_accepted": true, "score": 0, "last_activity_date": 1548953617, "creation_date": 1548953617, "answer_id": 54465535, "question_id": 54450295, "link": "https://stackoverflow.com/questions/54450295/how-do-i-rename-column-names-that-have-parenthesis-and-quotes/54465535#54465535", "title": "How do I rename column names that have Parenthesis and Quotes?", "body": "<p>Use <code>df.rename(columns=your_column_mapping)</code>, like this:</p>\n\n<pre><code>df.rename(columns={\"('Name', '')\" : \"Name\",\n                   \"('Code', '')\" : \"Code\",\n                   \"('Sum', 'Duration')\" : \"Duration\"}) \n</code></pre>\n\n<p>However, just like the others told you in the comments, you really should investigate how these weird names were generated in the first place.</p>\n\n<p>Documentation of the rename method can be found <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rename.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6105836, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204609210784864/picture?type=large", "display_name": "Queila Martins", "link": "https://stackoverflow.com/users/6105836/queila-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1738, "favorite_count": 0, "accepted_answer_id": 54465535, "answer_count": 1, "score": 0, "last_activity_date": 1548953617, "creation_date": 1548886000, "question_id": 54450295, "link": "https://stackoverflow.com/questions/54450295/how-do-i-rename-column-names-that-have-parenthesis-and-quotes", "title": "How do I rename column names that have Parenthesis and Quotes?", "body": "<p>I have 2 dataframes, A and B. I use some commands in A to get a pivot_table (and I used aggfunc to get total of 'Duration' data). After this, I merge A and B. When I run a command to show columns name, columns from A look strange, with parenthesis and quotes, like showed below:\nIndex([            ('Name', ''),\n       ('Code', ''), ('sum', 'Duration'),\n                         'Position'],\n      dtype='object')</p>\n\n<p>Header example: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table border=\"1\"&gt;\r\n&lt;tr&gt;\r\n  &lt;td&gt;('Name', '')&lt;/td&gt;\r\n  &lt;td&gt;('Code', '')&lt;/td&gt;\r\n  &lt;td&gt;('Sum', 'Duration')&lt;/td&gt;\r\n  &lt;td&gt;Position&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>As you can see, only Position (which is from dataframe B). I tried to use rename function to change those 3 columns from A, but it didn't work. </p>\n\n<p>What I expected to have as final was:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table border=\"1\"&gt;\r\n&lt;tr&gt;\r\n  &lt;td&gt;Name&lt;/td&gt;\r\n  &lt;td&gt;Code&lt;/td&gt;\r\n  &lt;td&gt;Duration&lt;/td&gt;\r\n  &lt;td&gt;Position&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Does anybody know what kind of syntax I should use to rename those columns? Actually I save the file as csv and then I need to change the column names manually.</p>\n"}, {"tags": ["python", "json", "pandas", "zipline", "enigma-catalyst"], "comments": [{"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1548887489, "post_id": 54450274, "comment_id": 95709727, "body": "Which line is <code>data = context.allData</code> ? Can you paste the entire stacktrace?"}, {"owner": {"reputation": 1470, "user_id": 1008128, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f3d305b76ce737771451a40931545ccf?s=128&d=identicon&r=PG", "display_name": "Goose", "link": "https://stackoverflow.com/users/1008128/goose"}, "reply_to_user": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1548893135, "post_id": 54450274, "comment_id": 95711280, "body": "Sorry, please check the updated post, I posted the wrong stack at first, here is the correct stack trace - <a href=\"https://pastebin.com/RaF9LPYt\" rel=\"nofollow noreferrer\">pastebin.com/RaF9LPYt</a>"}], "owner": {"reputation": 1470, "user_id": 1008128, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f3d305b76ce737771451a40931545ccf?s=128&d=identicon&r=PG", "display_name": "Goose", "link": "https://stackoverflow.com/users/1008128/goose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548893217, "creation_date": 1548885899, "last_edit_date": 1548893217, "question_id": 54450274, "link": "https://stackoverflow.com/questions/54450274/attributeerror-in-pandas-dataframe-when-reading-in-json", "title": "AttributeError in Pandas Dataframe When Reading in JSON", "body": "<p>When I run this file to extract Bitcoin data from an exchange into JSON format:</p>\n\n<pre><code>import os\nimport pytz\nfrom datetime import datetime\nimport json\n\nfrom catalyst.api import record, symbol, symbols\nfrom catalyst.utils.run_algo import run_algorithm\n\ndef initialize(context):\n    # Portfolio assets list\n    context.asset = symbol('btc_usd') # Bitcoin on Bitfinex\n\ndef handle_data(context, data):\n    # Variables to record for a given asset: price and volume\n\n    currentTimeString = str(data.current_dt)\n    currentData = {\n                   'open':   data.current(context.asset, 'open'),\n                   'high':   data.current(context.asset, 'high'),\n                   'low':    data.current(context.asset, 'low'),\n                   'close':  data.current(context.asset, 'close'),\n                   'volume': data.current(context.asset, 'volume'),\n                   }\n    context.allData[currentTimeString] = currentData\n\n\ndef analyze(context=None, results=None):\n    # Generate DataFrame with Price and Volume only\n    data = results[['open','high','low','close','price','volume']]\n\n    # Save results in CSV file\n#    filename = os.path.splitext(os.path.basename(__file__))[0]\n#    data.to_csv(filename + '.csv')\n\n    with open('data.json', 'w') as outfile:\n        json.dump(context.allData, outfile)\n\n''' Bitcoin data is available on Poloniex since 2015-3-1.\n     Dates vary for other tokens. In the example below, we choose the\n     full month of July of 2017.\n'''\nstart = datetime(2018, 1, 1, 0, 0, 0, 0, pytz.utc)\nend = datetime(2018, 1, 31, 0, 0, 0, 0, pytz.utc)\nresults = run_algorithm(initialize=initialize,\n                                handle_data=handle_data,\n                                analyze=analyze,\n                                start=start,\n                                end=end,\n                                exchange_name='bitfinex',\n                                capital_base=10000,\n                                quote_currency = 'usd')\n</code></pre>\n\n<p>I receive the following error:</p>\n\n<pre><code>  File \"C:/Users/XYZ/Code/grabdata.py\", line 31, in handle_data\n    context.allData[currentTimeString] = currentData\n\nAttributeError: 'ExchangeTradingAlgorithmBacktest' object has no attribute 'allData'\n</code></pre>\n\n<p>EDIT: Posted the wrong error code at first, it's updated now.</p>\n\n<p>Is there a bug in my code, or am I missing a reference to context.allData in initialize? I'm trying to speed up the backtest by reading from a file instead of ingesting from an exchange, it seems to take too long. Using the catalyst framework which is built from Quantopian/Zipline: <a href=\"https://enigma.co/catalyst/index.html\" rel=\"nofollow noreferrer\">https://enigma.co/catalyst/index.html</a></p>\n"}, {"tags": ["python", "python-3.x", "newline"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1548886059, "post_id": 54450229, "comment_id": 95709236, "body": "Are you sure you mean <code>newline=&#39; &#39;</code> instead of <code>newline=&#39;&#39;</code>?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1548886080, "post_id": 54450229, "comment_id": 95709246, "body": "The part about &quot;a new line escaped by a <code>\\n</code> character&quot; makes no sense."}, {"owner": {"reputation": 134, "user_id": 10405959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879a3af22a7c0aac4cd7906ef211df3e?s=128&d=identicon&r=PG&f=1", "display_name": "Schematic", "link": "https://stackoverflow.com/users/10405959/schematic"}, "edited": false, "score": 2, "creation_date": 1548886152, "post_id": 54450229, "comment_id": 95709274, "body": "Keyword arguments are named arguments. The open function&#39;s newline argument can be None, &#39;&#39; (empty string), \\n, \\r, or \\n\\r. You can read about the open function (and other built-in functions) here: <a href=\"https://docs.python.org/3/library/functions.html#open\" rel=\"nofollow noreferrer\">docs.python.org/3/library/functions.html#open</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1548886334, "post_id": 54450229, "comment_id": 95709342, "body": "If you want to quote content, use a <code>&gt; </code> prefix at the front of the line. That&#39;s much easier than bolding on the reader&#39;s eyes. Similarly, for multi-line content, use either triple-quotes gating above and below, or the <code>{}</code> button in the javascript editing UI."}, {"owner": {"reputation": 69, "user_id": 10992810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c38ccc2c67bea37521a25e4346ec34?s=128&d=identicon&r=PG&f=1", "display_name": "DeadManProp", "link": "https://stackoverflow.com/users/10992810/deadmanprop"}, "edited": false, "score": 0, "creation_date": 1548886891, "post_id": 54450229, "comment_id": 95709507, "body": "Thank you for pointing that out user2357112. It is two apostrophes. And thank you for the link to the documentation Schematic. I think I get a general idea of what&#39;s going on now."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1548889561, "post_id": 54450229, "comment_id": 95710375, "body": "It&#39;s because the <code>csv</code> module handles newlines in files it reads and writes its own way, so the documentation says to use <code>newline=&#39;&#39;</code> so Python&#39;s own default newline handling is disabled when using the module to process files. This primarily to support newlines embedded in fields of logical &quot;rows&quot; of csvs."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1548889772, "post_id": 54450229, "comment_id": 95710435, "body": "See <a href=\"https://docs.python.org/3/library/csv.html#id3\" rel=\"nofollow noreferrer\">this footnote</a> in the documentation."}], "owner": {"reputation": 69, "user_id": 10992810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c38ccc2c67bea37521a25e4346ec34?s=128&d=identicon&r=PG&f=1", "display_name": "DeadManProp", "link": "https://stackoverflow.com/users/10992810/deadmanprop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548890689, "creation_date": 1548885683, "last_edit_date": 1548890689, "question_id": 54450229, "link": "https://stackoverflow.com/questions/54450229/why-do-we-equate-newline-to-an-empty-space-in-the-argument-newline", "title": "Why do we equate &quot;newline&quot; to an empty space in the argument newline = &#39; &#39;?", "body": "<p>I've been going through the Codecademy tutorial on opening CSV files in Python 3.x and they give the following example, including a CSV file and an explanation paragraph, which I don't completely understand. Why do we equate newline to an empty space (i.e. <code>newline = ' '</code>) and what do they mean by the following?</p>\n\n<blockquote>\n  <p>\"The possibility of a new line escaped by a <code>\\n</code> character in our data is why we pass the <code>newline=' '</code> keyword argument...\"</p>\n</blockquote>\n\n<p>Is there some technical reason for why we write <code>newline = ' '</code> specifically or am I missing some logical connection? Can the newline be equated to anything other than an empty space?</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name;Address;Telephone          \nDonna Smith;126 Orr Corner Suite 857\\nEast Michael, LA 54411;906-918-6560          \nAaron Osborn;6965 Miller Station Suite 485\\nNorth Michelle, KS 64364;815.039.3661x42816\nJennifer Barnett;8749 Alicia Vista Apt. 288\\nLake Victoriaberg, TN 51094;397-796-4842x451 \nJoshua Bryan;20116 Stephanie Stravenue\\nWhitneytown, IA 87358;(380)074-6173            \nAndrea Jones;558 Melissa Keys Apt. 588\\nNorth Teresahaven, WA 63411;+57(8)7795396386\nVictor Williams;725 Gloria Views Suite 628\\nEast Scott, IN 38095;768.708.3411x954\n</code></pre>\n\n<p>Notice the <code>\\n</code> character, this is the escape sequence for a new line. The possibility of a new line escaped by a <code>\\n</code> character in our data is why we pass the <code>newline=' '</code> keyword argument to the <code>open()</code> function.</p>\n"}, {"tags": ["python", "python-2.7", "raspberry-pi"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 10734767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c040da47f54a2fe85c124a50958a6e5c?s=128&d=identicon&r=PG&f=1", "display_name": "rattionline", "link": "https://stackoverflow.com/users/10734767/rattionline"}, "edited": false, "score": 0, "creation_date": 1548886862, "post_id": 54450346, "comment_id": 95709496, "body": "image.add_header(&#39;Content-Disposition&#39;, &#39;attachment; filename=filename.jpg&#39;) works perfectly, thanks. Now I get the picture send as a .jpg"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 189, "user_id": 10734767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c040da47f54a2fe85c124a50958a6e5c?s=128&d=identicon&r=PG&f=1", "display_name": "rattionline", "link": "https://stackoverflow.com/users/10734767/rattionline"}, "edited": false, "score": 0, "creation_date": 1548908365, "post_id": 54450346, "comment_id": 95714722, "body": "@rattionline Cool. You may also <i>accept</i> the answer to show that it solves the problem."}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": true, "score": 1, "last_activity_date": 1548886247, "creation_date": 1548886247, "answer_id": 54450346, "question_id": 54450222, "link": "https://stackoverflow.com/questions/54450222/how-to-add-file-extension-to-pictures-send-via-email/54450346#54450346", "title": "How to add file extension to pictures send via email", "body": "<p>To add a filename to the attachment, you need to add the <code>\"Content-Disposition\"</code> header to that MIME part, i.e. add this to the code:</p>\n\n<pre><code>attachment = open(dat, 'rb')\nimage=MIMEImage(attachment.read())\nattachment.close()\nimage.add_header('Content-Disposition', 'attachment; filename=filename.extension')\nmail.attach(image)\n</code></pre>\n\n<p>To send the image without saving it to the file, you have to have the image contents and pass them to <code>MIMEImage</code> constructor. You are currently reading them from file in <code>attachment.read()</code>.</p>\n\n<p>So, if you can pass the image binary (instead of filename) to the function, like this:</p>\n\n<pre><code>def sendMail(image_binary_data):\n</code></pre>\n\n<p>then just pass it, like this:</p>\n\n<pre><code>image=MIMEImage(image_binary_data)\nimage.add_header('Content-Disposition', 'attachment; filename=filename.extension')\nmail.attach(image)\n</code></pre>\n\n<p>BTW, if you are reading the image from file, it's safer to open and read files this way, to be sure it always closes properly:</p>\n\n<pre><code>with open(dat, 'rb') as image_file:\n    image=MIMEImage(image_file.read())\n# no need to close explicitly\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 10734767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c040da47f54a2fe85c124a50958a6e5c?s=128&d=identicon&r=PG&f=1", "display_name": "rattionline", "link": "https://stackoverflow.com/users/10734767/rattionline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54450346, "answer_count": 1, "score": 0, "last_activity_date": 1548886247, "creation_date": 1548885653, "last_edit_date": 1548885891, "question_id": 54450222, "link": "https://stackoverflow.com/questions/54450222/how-to-add-file-extension-to-pictures-send-via-email", "title": "How to add file extension to pictures send via email", "body": "<p>The complete script makes a picture with my raspberry pi camera every minute and sends it via email to my adress. The picture is as an attachment in the email but it has no file extension.\n1. What do i have to add that the file get the original file extension that they are saved on the raspberry.</p>\n\n<p>Or if its possible:\n2. How can I get the pictures embed in the email. This would be much easier so I don`t have to safe them first on my pc.</p>\n\n<p>I hope you all know what I mean, my englich is not the best :)</p>\n\n<pre><code>def sendMail(data):\n    global texte\n    mail = MIMEMultipart()\n    mail['Subject'] = \"Pictures from home\"\n    mail['From'] = fromaddr\n    mail['To'] = toaddr\n    mail.attach(MIMEText(body, 'plain'))\n\n    dat='%s.jpg'%data\n    attachment = open(dat, 'rb')\n    image=MIMEImage(attachment.read())\n    attachment.close()\n    mail.attach(image)\n    server = smtplib.SMTP('smtp.web.de', 587)\n    server.starttls()\n    server.login(fromaddr, \"PASSWORD\")\n    text = mail.as_string()\n    server.sendmail(fromaddr, toaddr, text)\n    server.quit()\n\n\n    movepic(data)\n</code></pre>\n"}, {"tags": ["python", "list", "sorting", "cjk"], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "edited": false, "score": 0, "creation_date": 1548886146, "post_id": 54450242, "comment_id": 95709269, "body": "it works perfectly fine, do you have any idea about the order of english and korean by any chance?"}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 1, "creation_date": 1548887004, "post_id": 54450242, "comment_id": 95709541, "body": "hint: you can use <code>ord</code>"}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 0, "last_activity_date": 1548885735, "creation_date": 1548885735, "answer_id": 54450242, "question_id": 54450215, "link": "https://stackoverflow.com/questions/54450215/moving-elements-to-the-end-of-a-list/54450242#54450242", "title": "Moving elements to the end of a list", "body": "<p>Use a <code>key</code> function that sorts the <code>noname</code> items higher than the non-<code>noname</code> items.</p>\n\n<pre><code>sorted(names, key=lambda x: (x.startswith(\"noname\"), x))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1548888115, "creation_date": 1548888115, "answer_id": 54450663, "question_id": 54450215, "link": "https://stackoverflow.com/questions/54450215/moving-elements-to-the-end-of-a-list/54450663#54450663", "title": "Moving elements to the end of a list", "body": "<p>Without knowing how exactly Korean characters are alphabetized, here's my attempt (based on @kindall's start). Note, you can pass a custom function into the <code>key</code> parameter of the sorter</p>\n\n<pre><code>def sorter(char):\n    #Place english characters after Korean\n    if ord(char[0])&gt;122:\n        return ord(char[0])-12000\n    else:\n        return ord(char[0])+12000\n\nlst=['Z', 'C', 'A B', 'noname3', '\u3134', '\u3131', 'D A', 'A A' , '\u3137']\n\nsorted(lst, key=lambda x: (x.startswith('noname'),sorter(x)))\n\n['\u3131', '\u3134', '\u3137', 'A B', 'A A', 'C', 'D A', 'Z', 'noname3']\n</code></pre>\n"}], "owner": {"reputation": 753, "user_id": 7472392, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1436682073022717/picture?type=large", "display_name": "Yun Tae Hwang", "link": "https://stackoverflow.com/users/7472392/yun-tae-hwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548889892, "creation_date": 1548885633, "last_edit_date": 1548889892, "question_id": 54450215, "link": "https://stackoverflow.com/questions/54450215/moving-elements-to-the-end-of-a-list", "title": "Moving elements to the end of a list", "body": "<p>I want to solve two problems regarding sorting my list in python.</p>\n\n<p>1) In my list, there is an element starts with <code>\"noname\"</code> and a number comes after it like this, <code>\"noname3\"</code> or <code>\"noname4\"</code> (each list contains only one <code>noname</code>+<code>number</code>)</p>\n\n<p>This <code>noname</code> aggregates all the <code>nonames</code> and the number after it shows however many <code>nonames</code> are there. </p>\n\n<p>My question is that how can I send this <code>noname</code>+<code>integer</code> element to the end?</p>\n\n<p>2) As you can see below, <code>sorted</code> function will sort English first then Korean. Is there any way that I can sort Korean first then English? Of course <code>'noname'</code> at the end. </p>\n\n<pre><code>names =  ['Z', 'C', 'A B', 'noname3', '\u3134', '\u3131', 'D A', 'A A' , '\u3137']\nsorted(names)\n\n# Output\n['A A', 'A B', 'C', 'D A','noname3', 'Z', '\u3131', '\u3134', '\u3137']\n\n# Desired Output\n[ '\u3131', '\u3134', '\u3137', 'A A', 'A B', 'C', 'D A', 'Z', 'noname3']\n</code></pre>\n"}, {"tags": ["python", "visual-c++", "simulink"], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 1936946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/33ed9c363164cc8c495e80a759f8062a?s=128&d=identicon&r=PG", "display_name": "Hong", "link": "https://stackoverflow.com/users/1936946/hong"}, "edited": false, "score": 0, "creation_date": 1548947273, "post_id": 54453194, "comment_id": 95735033, "body": "thanks. I tried your suggestion but my PC complains on the requirement of visual C++ 2008 SP1 update. And while I am trying to install Visual C++ 2008 sp1. It asks me to install Visual C++ 2008. I tried that too. But it failed. So I tried other methods."}], "tags": [], "owner": {"reputation": 10236, "user_id": 1998377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJV1Z.jpg?s=128&g=1", "display_name": "Phil Goddard", "link": "https://stackoverflow.com/users/1998377/phil-goddard"}, "is_accepted": false, "score": 0, "last_activity_date": 1548908187, "creation_date": 1548908187, "answer_id": 54453194, "question_id": 54450211, "link": "https://stackoverflow.com/questions/54450211/invalid-mex-file-missing-dependent-shared-libraries/54453194#54453194", "title": "invalid mex file missing dependent shared libraries", "body": "<p>It looks like you need to download the Visual Studio compiler used by Python 2.7. There are a couple of links for doing this in the answers here: <a href=\"https://stackoverflow.com/questions/15318560/visual-c-2008-express-download-link-dead\">ide - Visual C++ 2008 Express Edition</a></p>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 1936946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/33ed9c363164cc8c495e80a759f8062a?s=128&d=identicon&r=PG", "display_name": "Hong", "link": "https://stackoverflow.com/users/1936946/hong"}, "is_accepted": false, "score": 0, "last_activity_date": 1548944777, "creation_date": 1548944777, "answer_id": 54462713, "question_id": 54450211, "link": "https://stackoverflow.com/questions/54450211/invalid-mex-file-missing-dependent-shared-libraries/54462713#54462713", "title": "invalid mex file missing dependent shared libraries", "body": "<p>It turns out that windows SDK for windows@7 has the necessary library. The action is to check the box \" tools\", \"visual C++ compilers\" and \"Microsoft visual c++ 2010\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/4lCA2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4lCA2.png\" alt=\"snapshot of installation\"></a></p>\n"}], "owner": {"reputation": 508, "user_id": 1936946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/33ed9c363164cc8c495e80a759f8062a?s=128&d=identicon&r=PG", "display_name": "Hong", "link": "https://stackoverflow.com/users/1936946/hong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 389, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549058075, "creation_date": 1548885626, "last_edit_date": 1549058075, "question_id": 54450211, "link": "https://stackoverflow.com/questions/54450211/invalid-mex-file-missing-dependent-shared-libraries", "title": "invalid mex file missing dependent shared libraries", "body": "<p>While trying to run a simulink model, run into the following error complained by Simulink: </p>\n\n<blockquote>\n  <p>Invalid MEX-file  >\n  'C:...\\sfun_WheelContacts.mexw64':\n  Missing dependent shared libraries: 'MSVCR90.dll' required by\n  'C:\\Windows\\system32\\python27.dll->C:\\Program\n  Files\\PreScan\\PreScan_8.4.0\\bin\\boost_python-vc140-mt-1_64.dll->C:\\Program\n  Files\\PreScan\\PreScan_8.4.0\\bin\\impcore.dll->C:\\Program\n  Files\\PreScan\\PreScan_8.4.0\\bin\\dataprovider.dll->C:\\Program\n  Files\\PreScan\\PreScan_8.4.0\\bin\\interface_WheelContacts.dll-></p>\n</blockquote>\n\n<p>I tried to look into the log of PreScan and Matlab integration but found nothing. Another action is to look for python27.dll. Confirm that it exists in c:\\windows\\system32. </p>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "edited": false, "score": 1, "creation_date": 1548886705, "post_id": 54450199, "comment_id": 95709443, "body": "on_press: module.func()"}, {"owner": {"reputation": 63, "user_id": 10812447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d05e759a61dc112cb61589a01b1c90?s=128&d=identicon&r=PG&f=1", "display_name": "LearningtoCodee", "link": "https://stackoverflow.com/users/10812447/learningtocodee"}, "reply_to_user": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "edited": false, "score": 0, "creation_date": 1548887647, "post_id": 54450199, "comment_id": 95709796, "body": "@CSMaverick My python function is not finding the kv file id"}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "edited": false, "score": 0, "creation_date": 1548887796, "post_id": 54450199, "comment_id": 95709847, "body": "from kivy.app import App"}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "edited": false, "score": 1, "creation_date": 1548887930, "post_id": 54450199, "comment_id": 95709883, "body": "your python file should have APP class and call the ButtonPopup@Popup"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1548895075, "post_id": 54450199, "comment_id": 95711772, "body": "The <code>id</code> that you are trying to reference is only valid within the <code>ButtonPopup</code> class, so the <code>schedule_event()</code> method must be a method of the <code>ButtonPopup</code> class. And, just to be clear, <code>self.root.ids[&#39;set_event&#39;]</code> is a reference to the <code>Button</code> instance."}, {"owner": {"reputation": 63, "user_id": 10812447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d05e759a61dc112cb61589a01b1c90?s=128&d=identicon&r=PG&f=1", "display_name": "LearningtoCodee", "link": "https://stackoverflow.com/users/10812447/learningtocodee"}, "reply_to_user": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "edited": false, "score": 0, "creation_date": 1548951066, "post_id": 54450199, "comment_id": 95737521, "body": "@CSMaverick That function I created is in my app class"}, {"owner": {"reputation": 63, "user_id": 10812447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d05e759a61dc112cb61589a01b1c90?s=128&d=identicon&r=PG&f=1", "display_name": "LearningtoCodee", "link": "https://stackoverflow.com/users/10812447/learningtocodee"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1548951111, "post_id": 54450199, "comment_id": 95737545, "body": "@JohnAnderson How can I add the method to the ButtonPopup class ? Because I only have it in my kv file"}, {"owner": {"reputation": 63, "user_id": 10812447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d05e759a61dc112cb61589a01b1c90?s=128&d=identicon&r=PG&f=1", "display_name": "LearningtoCodee", "link": "https://stackoverflow.com/users/10812447/learningtocodee"}, "edited": false, "score": 0, "creation_date": 1548951370, "post_id": 54450199, "comment_id": 95737669, "body": "I get an error <code>KeyError: &#39;set_event&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10812447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d05e759a61dc112cb61589a01b1c90?s=128&d=identicon&r=PG&f=1", "display_name": "LearningtoCodee", "link": "https://stackoverflow.com/users/10812447/learningtocodee"}, "edited": false, "score": 0, "creation_date": 1548957018, "post_id": 54465217, "comment_id": 95740815, "body": "Ohh so basically if I want to add logic to my class it has to be created in with my app class in python, not with the <code>@</code> in the kv file. It works, thanks a bunch."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "reply_to_user": {"reputation": 63, "user_id": 10812447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d05e759a61dc112cb61589a01b1c90?s=128&d=identicon&r=PG&f=1", "display_name": "LearningtoCodee", "link": "https://stackoverflow.com/users/10812447/learningtocodee"}, "edited": false, "score": 0, "creation_date": 1548962550, "post_id": 54465217, "comment_id": 95743521, "body": "The <code>@</code> in the <code>.kv</code> file is used to create <code>Dynamic</code> classes, which are typically used to specify common properties of some Widgets that you will use. The <code>&lt;ButtonPopup@Popup&gt;:</code> is a <code>Dynamic</code> class rule that specifies what properties to set whenever you create a <code>ButtonPopup</code> instance in your <code>.kv</code> file. This is the <a href=\"https://kivy.org/doc/stable/api-kivy.lang.html#dynamic-classes\" rel=\"nofollow noreferrer\">documentation</a> for <code>Dynamic</code> classes."}], "tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 0, "last_activity_date": 1548952593, "creation_date": 1548952593, "answer_id": 54465217, "question_id": 54450199, "link": "https://stackoverflow.com/questions/54450199/kivy-how-to-detect-if-a-button-is-pressed/54465217#54465217", "title": "Kivy - How to detect if a button is pressed?", "body": "<p>The <code>KeyError</code> means there is no <code>set_event</code> in your <code>App</code> root class <code>ids</code>, which is to be expected. In your <code>.py</code> file add:</p>\n\n<pre><code>class ButtonPopup(Popup):\n    def schedule_event(self, *args):\n        if 'set_event` in self.ids:\n            print('Working')\n        else:\n            print('Missing set_event')\n</code></pre>\n\n<p>Then, in your <code>.kv</code> file, replace <code>&lt;ButtonPopup@Popup&gt;:</code> with <code>&lt;ButtonPopup&gt;:</code> This puts your method in the <code>ButtonPopup</code> class where it can easily access the <code>ids</code> of that class. Also, in your <code>.kv</code> file, change <code>on_press: app.root.schedule_event()</code> to <code>on_press: root.schedule_event()</code></p>\n\n<p>The <code>id</code> that you set in your <code>.kv</code> file will be in the <code>ButtonPopup</code> class, not in the <code>App</code>. See the <a href=\"https://kivy.org/doc/stable/api-kivy.lang.html#ids\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 63, "user_id": 10812447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d05e759a61dc112cb61589a01b1c90?s=128&d=identicon&r=PG&f=1", "display_name": "LearningtoCodee", "link": "https://stackoverflow.com/users/10812447/learningtocodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 0, "accepted_answer_id": 54465217, "answer_count": 1, "score": 1, "last_activity_date": 1548952593, "creation_date": 1548885583, "question_id": 54450199, "link": "https://stackoverflow.com/questions/54450199/kivy-how-to-detect-if-a-button-is-pressed", "title": "Kivy - How to detect if a button is pressed?", "body": "<p>Ok so, I have an app where when you click a button and a popup appears. In the popup, you are able to schedule an event. When you click the 'Schedule' button, for now, I'd like it to print to the terminal that it has been clicked. I am trying to define a function in python and connect it with my id in my kv file for the button press to be recorded, but it doesn't seem to be working. Help? Might be an obvious answer, but I am still learning lol</p>\n\n<p><b>Python</b></p>\n\n<pre><code>  def schedule_event(self, *args):\n      if self.root.ids['set_event']:\n          print('Working')\n</code></pre>\n\n<p><b>Kv File</b></p>\n\n<pre><code>&lt;ButtonPopup@Popup&gt;:\n    title: 'Set Events'\n    title_align: 'center'\n    auto_dismiss: False\n    size_hint: None, None\n    size: 400, 200\n\n    GridLayout:\n        cols: 1\n        TextInput:\n            id: scheduled_event\n            hint_text: \"Something scheduled for this day...\"\n\n        BoxLayout:\n\n            Button:\n                id: set_event\n                text: \"Schedule\"\n                on_press: app.root.schedule_event()\n                on_release: root.dismiss()\n\n            Button:\n                id: cancel\n                text: \"Cancel\"\n                on_release: root.dismiss()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "data-cleaning"], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "edited": false, "score": 0, "creation_date": 1548888178, "post_id": 54450555, "comment_id": 95709964, "body": "Works perfectly. Thanks."}], "tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": true, "score": 2, "last_activity_date": 1548887445, "creation_date": 1548887445, "answer_id": 54450555, "question_id": 54450186, "link": "https://stackoverflow.com/questions/54450186/replace-nans-for-month-n-with-the-value-for-month-n-1-in-pandas-dataframe/54450555#54450555", "title": "Replace NaNs for month N with the value for month (N - 1) in Pandas DataFrame", "body": "<p>The following should work:</p>\n\n<pre><code>df.loc[lambda df: df.groupby('part')['price'].transform(np.any)]\\\n  .sort_values('date')\\\n  .assign(price=lambda df: df.groupby('part')['price'].ffill())\\\n  .dropna()\\\n  .reset_index(drop=True)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>    part    price   date\n0   1   88.37   2018-07-01\n1   3   264.02  2018-07-01\n2   1   88.37   2018-08-01\n3   3   264.02  2018-08-01\n4   1   88.37   2018-09-01\n5   3   212.70  2018-09-01\n6   1   67.32   2018-10-01\n7   3   167.34  2018-10-01\n8   1   67.32   2018-11-01\n9   3   167.34  2018-11-01\n10  1   67.32   2018-12-01\n11  3   99.16   2018-12-01\n</code></pre>\n\n<p>A little more details:</p>\n\n<ul>\n<li>The first line of the method chain removes any rows whose part numbers don't have a non-null price for any date</li>\n<li>The next line sorts the values by date</li>\n<li>The 3rd line replaces the <code>'price'</code> column with a forward-filled one by group</li>\n<li>The 4th line drops rows with nulls</li>\n<li>The final line is just for looks</li>\n</ul>\n\n<p>If you want the <code>df</code> in the order you showed, you can flip the dataframe:</p>\n\n<pre><code>df = df.iloc[::-1].reset_index(drop=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": false, "score": 1, "last_activity_date": 1548887889, "creation_date": 1548887889, "answer_id": 54450625, "question_id": 54450186, "link": "https://stackoverflow.com/questions/54450186/replace-nans-for-month-n-with-the-value-for-month-n-1-in-pandas-dataframe/54450625#54450625", "title": "Replace NaNs for month N with the value for month (N - 1) in Pandas DataFrame", "body": "<p>I think you need to use bfill rather ffill here:</p>\n\n<pre><code>In [11]: df.groupby('part')['price'].bfill()\nOut[11]:\n0      67.32\n1        NaN\n2      99.16\n3      67.32\n4        NaN\n5     167.34\n6      67.32\n7        NaN\n8     167.34\n9      88.37\n10       NaN\n11    212.70\n12     88.37\n13       NaN\n14    264.02\n15     88.37\n16       NaN\n17    264.02\n18       NaN\nName: price, dtype: float64\n</code></pre>\n\n<p>So update the price column:</p>\n\n<pre><code>In [12]: df['price'] = df.groupby('part')['price'].bfill()\n\nIn [13]: df\nOut[13]:\n    part   price                     date\n0      1   67.32  2018-12-01 00:00:00.000\n1      2     NaN  2018-12-01 00:00:00.000\n2      3   99.16  2018-12-01 00:00:00.000\n3      1   67.32  2018-11-01 00:00:00.000\n4      2     NaN  2018-11-01 00:00:00.000\n5      3  167.34  2018-11-01 00:00:00.000\n6      1   67.32  2018-10-01 00:00:00.000\n7      2     NaN  2018-10-01 00:00:00.000\n8      3  167.34  2018-10-01 00:00:00.000\n9      1   88.37  2018-09-01 00:00:00.000\n10     2     NaN  2018-09-01 00:00:00.000\n11     3  212.70  2018-09-01 00:00:00.000\n12     1   88.37  2018-08-01 00:00:00.000\n13     2     NaN  2018-08-01 00:00:00.000\n14     3  264.02  2018-08-01 00:00:00.000\n15     1   88.37  2018-07-01 00:00:00.000\n16     2     NaN  2018-07-01 00:00:00.000\n17     3  264.02  2018-07-01 00:00:00.000\n18     1     NaN  2018-06-01 00:00:00.000\n</code></pre>\n\n<p>Now you can drop those with NaN price:</p>\n\n<pre><code>In [14]: df = df.dropna(subset=['price'])\n\nIn [15]: df\nOut[15]:\n    part   price                     date\n0      1   67.32  2018-12-01 00:00:00.000\n2      3   99.16  2018-12-01 00:00:00.000\n3      1   67.32  2018-11-01 00:00:00.000\n5      3  167.34  2018-11-01 00:00:00.000\n6      1   67.32  2018-10-01 00:00:00.000\n8      3  167.34  2018-10-01 00:00:00.000\n9      1   88.37  2018-09-01 00:00:00.000\n11     3  212.70  2018-09-01 00:00:00.000\n12     1   88.37  2018-08-01 00:00:00.000\n14     3  264.02  2018-08-01 00:00:00.000\n15     1   88.37  2018-07-01 00:00:00.000\n17     3  264.02  2018-07-01 00:00:00.000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2751, "user_id": 10888655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQFKi.png?s=128&g=1", "display_name": "run-out", "link": "https://stackoverflow.com/users/10888655/run-out"}, "is_accepted": false, "score": 0, "last_activity_date": 1548888088, "creation_date": 1548888088, "answer_id": 54450658, "question_id": 54450186, "link": "https://stackoverflow.com/questions/54450186/replace-nans-for-month-n-with-the-value-for-month-n-1-in-pandas-dataframe/54450658#54450658", "title": "Replace NaNs for month N with the value for month (N - 1) in Pandas DataFrame", "body": "<p>With your data in a dataframe (df) as shown above in your question, you can use the following to get your result: </p>\n\n<pre><code>df = df.pivot_table('price', index='date', columns ='part').fillna(method='ffill')\ndf.dropna().sort_index(ascending=False)\n</code></pre>\n\n<p>In my case your answer is in a pivot table however. </p>\n\n<pre><code>   part       1       3\ndate        \n2018-12-01  67.32   99.16\n2018-11-01  67.32   167.34\n2018-10-01  67.32   167.34\n2018-09-01  88.37   212.70\n2018-08-01  88.37   264.02\n2018-07-01  88.37   264.02\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 54450555, "answer_count": 3, "score": 3, "last_activity_date": 1548888088, "creation_date": 1548885544, "question_id": 54450186, "link": "https://stackoverflow.com/questions/54450186/replace-nans-for-month-n-with-the-value-for-month-n-1-in-pandas-dataframe", "title": "Replace NaNs for month N with the value for month (N - 1) in Pandas DataFrame", "body": "<p>I have some pricing data for parts that updates monthly. It has been pulled into a pandas dataframe. Occasionally, a part won't get a price for a certain month, in which case I would like to replace it with that part's price from the previous month. </p>\n\n<p>In the event that the previous month also has a missing price for that part, I want to continue searching backwards until a valid price is found, in which case this price should propagate forward until a valid price is found. </p>\n\n<p>If no valid prices are found for that part, then I want this part to be dropped from the dataframe entirely. </p>\n\n<p>If the first number of months contain missing prices for a certain part, I would like to delete these rows so that the first record is always a valid price.</p>\n\n<p>Essentially I want to do a forward fill on the price column but taking part numbers into account.</p>\n\n<p>As an example, I would start with something like this:</p>\n\n<pre><code>part   price      date\n1      NaN        2018-12-01 00:00:00.000\n2      NaN        2018-12-01 00:00:00.000\n3      99.16      2018-12-01 00:00:00.000\n1      NaN        2018-11-01 00:00:00.000\n2      NaN        2018-11-01 00:00:00.000\n3      NaN        2018-11-01 00:00:00.000\n1      67.32      2018-10-01 00:00:00.000\n2      NaN        2018-10-01 00:00:00.000\n3      167.34     2018-10-01 00:00:00.000\n1      88.37      2018-09-01 00:00:00.000\n2      NaN        2018-09-01 00:00:00.000\n3      212.70     2018-09-01 00:00:00.000\n1      88.37      2018-08-01 00:00:00.000\n2      NaN        2018-08-01 00:00:00.000\n3      NaN        2018-08-01 00:00:00.000\n1      88.37      2018-07-01 00:00:00.000\n2      NaN        2018-07-01 00:00:00.000\n3      264.02     2018-07-01 00:00:00.000\n1      NaN        2018-06-01 00:00:00.000\n</code></pre>\n\n<p>And end with this:</p>\n\n<pre><code>part   price      date\n1      67.32      2018-12-01 00:00:00.000\n3      99.16      2018-12-01 00:00:00.000\n1      67.32      2018-11-01 00:00:00.000\n3      167.34     2018-11-01 00:00:00.000\n1      67.32      2018-10-01 00:00:00.000\n3      167.34     2018-10-01 00:00:00.000\n1      88.37      2018-09-01 00:00:00.000\n3      212.70     2018-09-01 00:00:00.000\n1      88.37      2018-08-01 00:00:00.000\n3      264.02     2018-08-01 00:00:00.000\n1      88.37      2018-07-01 00:00:00.000\n3      264.02     2018-07-01 00:00:00.000\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "encryption", "pycrypto", "pycryptodome"], "answers": [{"tags": [], "owner": {"reputation": 1632, "user_id": 3286487, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/JObEe.jpg?s=128&g=1", "display_name": "y.luis", "link": "https://stackoverflow.com/users/3286487/y-luis"}, "is_accepted": true, "score": 2, "last_activity_date": 1548886214, "creation_date": 1548886214, "answer_id": 54450336, "question_id": 54450159, "link": "https://stackoverflow.com/questions/54450159/probles-with-aes-encrypting-cant-decrypt-with-a-right-key/54450336#54450336", "title": "Probles with AES encrypting. cant decrypt with a right key", "body": "<p>I think that what you want to decrypt is the ciphered text, not the original <code>data</code> (non-encrypted):</p>\n\n<pre><code>decrypted = receive_data(key, ciphertext)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10613479, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8NFdnuNJHs8/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCmT7Lm-E7I4gVr3ram6VItBZpr0Q/mo/photo.jpg?sz=128", "display_name": "maribor", "link": "https://stackoverflow.com/users/10613479/maribor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 54450336, "answer_count": 1, "score": 1, "last_activity_date": 1548886214, "creation_date": 1548885404, "question_id": 54450159, "link": "https://stackoverflow.com/questions/54450159/probles-with-aes-encrypting-cant-decrypt-with-a-right-key", "title": "Probles with AES encrypting. cant decrypt with a right key", "body": "<p>I'm trying to decrypt encrypdet data. Data was encrypted with AES CBC mode using pycryptodome lib.\nHave a such error - \"ValueError: Incorrect AES key length (256 bytes)</p>\n\n<pre><code>import os\nfrom Crypto import Random\nfrom Crypto.Cipher import AES\n\nclass AESCipher:\n    def __init__(self, key):\n        pass\n\n    def pad(self, s):\n        return s + b\"\\0\" * (AES.block_size - len(s) % AES.block_size)\n\n    def encrypt(self, message, key, key_size=256):\n        message = self.pad(message)\n        iv = Random.new().read(AES.block_size)\n        cipher = AES.new(key, AES.MODE_CBC, iv)\n        return iv + cipher.encrypt(message)\n\n    def decrypt(self, ciphertext, key):\n        iv = ciphertext[:AES.block_size]\n        cipher = AES.new(key, AES.MODE_CBC, iv)\n        plaintext = cipher.decrypt(ciphertext[AES.block_size:])\n        return plaintext.rstrip(b\"\\0\")\n\ndef send_data(data)\n    key = os.urandom(16)\n    cipher = AESCipher(key)\n    ciphertext = cipher.encrypt(data, key)\n    return key, ciphertext\n\ndef receive_data(key, data):\n    cipher = AESCipher(key)\n    decrypted = cipher.decrypt(data, key)\n    return decrypted\n\ndata = b'12 43 42 46 af'\nkey, ciphertext = send_data(data)\ndecrypted = receive_data(key, data)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list-comprehension"], "comments": [{"owner": {"reputation": 1756, "user_id": 9521723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d068ebd4677eaf960f4dde5b5234f0?s=128&d=identicon&r=PG", "display_name": "SimonF", "link": "https://stackoverflow.com/users/9521723/simonf"}, "edited": false, "score": 1, "creation_date": 1548885401, "post_id": 54450132, "comment_id": 95709001, "body": "If should be last in list comprehension"}, {"owner": {"reputation": 165, "user_id": 7411022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d0mCJXy9yuI/AAAAAAAAAAI/AAAAAAAAAAs/6BTdA8tZ-k8/photo.jpg?sz=128", "display_name": "CS101", "link": "https://stackoverflow.com/users/7411022/cs101"}, "reply_to_user": {"reputation": 1756, "user_id": 9521723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d068ebd4677eaf960f4dde5b5234f0?s=128&d=identicon&r=PG", "display_name": "SimonF", "link": "https://stackoverflow.com/users/9521723/simonf"}, "edited": false, "score": 0, "creation_date": 1548885507, "post_id": 54450132, "comment_id": 95709040, "body": "The problem is resolved!"}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 7411022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d0mCJXy9yuI/AAAAAAAAAAI/AAAAAAAAAAs/6BTdA8tZ-k8/photo.jpg?sz=128", "display_name": "CS101", "link": "https://stackoverflow.com/users/7411022/cs101"}, "is_accepted": true, "score": 0, "last_activity_date": 1548885602, "creation_date": 1548885602, "answer_id": 54450204, "question_id": 54450132, "link": "https://stackoverflow.com/questions/54450132/list-comprehension-with-zipped-iterators-and-conditionals/54450204#54450204", "title": "List comprehension with zipped iterators and conditionals", "body": "<p>Base on @SimonF's comment, correct expression should be</p>\n\n<pre><code>filteredNames = [re.findall(r'foo.(\\w+)', i)[0] for i,j in zip(columnHeaders,maskNaN) if j ]\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 7411022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d0mCJXy9yuI/AAAAAAAAAAI/AAAAAAAAAAs/6BTdA8tZ-k8/photo.jpg?sz=128", "display_name": "CS101", "link": "https://stackoverflow.com/users/7411022/cs101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54450204, "answer_count": 1, "score": 1, "last_activity_date": 1548885602, "creation_date": 1548885282, "question_id": 54450132, "link": "https://stackoverflow.com/questions/54450132/list-comprehension-with-zipped-iterators-and-conditionals", "title": "List comprehension with zipped iterators and conditionals", "body": "<p>I have been trying to populate a list such that if another list containing a boolean at index j is True, I perform an operation(simple regex) on another list else choose to pass(implicitly).</p>\n\n<pre><code>import re\nmaskNan = [True, True, False, True, False]\nstringList = ['foo.abc','foo.def','foo.ghi','foo.jkl']\nfilteredNames = [re.findall(r'foo.(\\w+)', i)[0] if j for i,j in zip(columnHeaders,maskNaN)]\n</code></pre>\n\n<p>This gives me <code>SyntaxError: invalid syntax</code> at end of for</p>\n\n<p>while this works fine</p>\n\n<pre><code>justNames = [re.findall(r'foo.(\\w+)', i)[0] for i in columnHeaders]\n</code></pre>\n\n<p>giving</p>\n\n<pre><code>['abc','def','ghi','jkl']\n</code></pre>\n"}, {"tags": ["python", "floating-point", "int"], "comments": [{"owner": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 3, "creation_date": 1548886584, "post_id": 54450129, "comment_id": 95709401, "body": "IMO it should not be downvoted. It is not a duplicate, not offtopic, not stupid. Maybe the form could be better, but in general it is a good question"}], "answers": [{"comments": [{"owner": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 1, "creation_date": 1548886862, "post_id": 54450167, "comment_id": 95709497, "body": "Could you provide an example where this difference matters?"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 0, "creation_date": 1548887943, "post_id": 54450167, "comment_id": 95709889, "body": "When printing them, for example."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 0, "creation_date": 1548903991, "post_id": 54450167, "comment_id": 95713756, "body": "@radrow: The type affects the operations performed on them. For example, <code>5&#47;2</code> will perform integer division, discarding the fraction and producing <code>2</code>, while <code>5.0&#47;2</code> will perform floating-point division, producing <code>2.5</code>."}, {"owner": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548926524, "post_id": 54450167, "comment_id": 95722405, "body": "@Eric this is not true in current version of python. It was true in python 2 however"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 1, "creation_date": 1548940009, "post_id": 54450167, "comment_id": 95730552, "body": "@radrow: Okay, they changed division. Nonetheless, integer and floating-point objects behave differently in arithmetic. <code>print(5 + 2**55 - 2**55)</code> yields 5 whereas <code>print(5.0 + 2**55 - 2**55)</code> yields 8.0 (in an implementation that uses IEEE-754 basic 64-bit binary floating-point)."}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 6, "last_activity_date": 1548885449, "creation_date": 1548885449, "answer_id": 54450167, "question_id": 54450129, "link": "https://stackoverflow.com/questions/54450129/is-there-a-difference-between-an-int-of-5-and-a-float-of-5-0/54450167#54450167", "title": "Is there a difference between an int of 5 and a float of 5.0?", "body": "<p>They are different data types:</p>\n\n<pre><code> type(5)     # int\n type(5.0)   # float\n</code></pre>\n\n<p>And therefore they are not, strictly speaking, the same.</p>\n\n<p>However, they are equal:</p>\n\n<pre><code>5 == 5.0     # true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 871, "user_id": 8357969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d947836b34ed6238d065fd26bf75662?s=128&d=identicon&r=PG&f=1", "display_name": "fstop_22", "link": "https://stackoverflow.com/users/8357969/fstop-22"}, "is_accepted": false, "score": 4, "last_activity_date": 1548885489, "creation_date": 1548885489, "answer_id": 54450175, "question_id": 54450129, "link": "https://stackoverflow.com/questions/54450129/is-there-a-difference-between-an-int-of-5-and-a-float-of-5-0/54450175#54450175", "title": "Is there a difference between an int of 5 and a float of 5.0?", "body": "<p>They are different types.</p>\n\n<pre><code>&gt;&gt;&gt; type(5)\n&lt;type 'int'&gt;\n&gt;&gt;&gt; type(5.0)\n&lt;type 'float'&gt;\n</code></pre>\n\n<p>Internally, they are stored differently.</p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548885625, "post_id": 54450187, "comment_id": 95709090, "body": "Better to emphasize that <code>5</code> and <code>5.0</code> are different objects because they produce objects of different types; even <code>5 is 5</code> can be false depending on your Python implementation."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1548894392, "post_id": 54450187, "comment_id": 95711601, "body": "FWIW, in most cases they behave very differently. They are very different internally, and can represent a vastly different range of numbers. Each of them has different problems associated with them."}], "tags": [], "owner": {"reputation": 153, "user_id": 9253874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3e51820942c61b16b4e51ed885f6c0?s=128&d=identicon&r=PG&f=1", "display_name": "stefan", "link": "https://stackoverflow.com/users/9253874/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1548885551, "creation_date": 1548885551, "answer_id": 54450187, "question_id": 54450129, "link": "https://stackoverflow.com/questions/54450129/is-there-a-difference-between-an-int-of-5-and-a-float-of-5-0/54450187#54450187", "title": "Is there a difference between an int of 5 and a float of 5.0?", "body": "<p><code>5</code> and <code>5.0</code> are different objects in python so <code>5 is 5.0</code> is <code>False</code></p>\n\n<p>But in most cases they behave the same like <code>5 == 5.0</code> is <code>True</code></p>\n"}, {"tags": [], "owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "is_accepted": false, "score": 0, "last_activity_date": 1549025931, "creation_date": 1549025931, "answer_id": 54480058, "question_id": 54450129, "link": "https://stackoverflow.com/questions/54450129/is-there-a-difference-between-an-int-of-5-and-a-float-of-5-0/54480058#54480058", "title": "Is there a difference between an int of 5 and a float of 5.0?", "body": "<p>This question is already answered: they have different type.<br>\nBut what does that mean?</p>\n\n<p>One must think in term of object: they are somehow objects of different classes, and the class dictates the object behavior.</p>\n\n<p>Thus they will behave differently.</p>\n\n<p>It's easier to grasp such things when you are in a pure object oriented language like in Smalltalk, because you clearly can browse the Float and Integer classes and learn how they might differ thru their implementation. In Python, it's more complex because the computation model is multi-layer with notions of types, operators, function, and this complexity is somehow obscuring the basic object oriented principles. But from behavioural point of view, it ends up being the same: <a href=\"https://stackoverflow.com/questions/4162578/python-terminology-class-vs-type\">Python : terminology &#39;class&#39; VS &#39;type&#39;</a></p>\n\n<p>So what are these differences of Behavior?<br>\nThey are thin because we make our best effort to have uniform and unsurprising arithmetic (including mixed arithmetic) behavior matching the laws of mathematics, whatever the programming language.</p>\n\n<p>Floating point behaves differently because they keep a limited number of significand bits. It's a necessary trade-off for keeping computations simple and fast. Small integers require few significand bits, so they will behave mostly the same than floating point. But when growing larger, they won't. Here is an arithmetic example:</p>\n\n<pre><code>print(5.0**3 == 5**3)\nprint(5.0**23 == 5**23)\n</code></pre>\n\n<p>The former expression will print True, the later False... Because 5^23 requires 54bits to be represented and Python VM will in most case depend on IEEE754 double floating point which provide only 53 bits significand.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 7923451, "user_type": "registered", "profile_image": "https://graph.facebook.com/675334495999901/picture?type=large", "display_name": "Mankrit Singh", "link": "https://stackoverflow.com/users/7923451/mankrit-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1589876718, "creation_date": 1589876718, "answer_id": 61886485, "question_id": 54450129, "link": "https://stackoverflow.com/questions/54450129/is-there-a-difference-between-an-int-of-5-and-a-float-of-5-0/61886485#61886485", "title": "Is there a difference between an int of 5 and a float of 5.0?", "body": "<p>As your question is focused on the difference and need of having two different data types I will try to focus on that and answer.</p>\n\n<blockquote>\n  <p>Need for different data type (why not put everything in float?)</p>\n</blockquote>\n\n<p>Different data type have different memory usage.int uses 2 byte whereas float uses 4 byte.One can use the correct data type in correct palce and save memory</p>\n\n<blockquote>\n  <p>What are some of the things I can do with an int that I can't with a float?</p>\n</blockquote>\n\n<p>One of the most important thing one should know while using these these two data type is that,\"integer division truncates\": any fractional part is discarded.To get desired result you should use the correct type.</p>\n\n<p>A nice example is given in the book \"The C Programming Language.Book by Brian Kernighan and Dennis Ritchie\" which is applicable regardless of the language used.</p>\n\n<p>This statement converts the temparature from Fahrenheit to Celsius.</p>\n\n<pre><code>float celsius=(5/9)*(Fahrenheit-32)\n</code></pre>\n\n<p>This code will always give you the answer as 0.That is because the answer of 5/9 is 0.5556 which due to truncation is taken as 0.</p>\n\n<p>now look at this code:</p>\n\n<pre><code>float celsius=(5.0/9.0)*(Fahrenheit-32)\n</code></pre>\n\n<p>This code will give you the correct answer as 5.0/9.0 gives us the value 0.5556. As we have used float value here the compiler does not truncate the value.The float value prevents the truncation of fraction part and gives us our desired answer</p>\n\n<p>I think this will tell you how important is the difference between 5 and 5.0</p>\n"}], "owner": {"reputation": 41, "user_id": 10986376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b61e9794ab83bb9b3ae7b5de376495?s=128&d=identicon&r=PG&f=1", "display_name": "GoTerps3288", "link": "https://stackoverflow.com/users/10986376/goterps3288"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1946, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1589876718, "creation_date": 1548885274, "last_edit_date": 1589494407, "question_id": 54450129, "link": "https://stackoverflow.com/questions/54450129/is-there-a-difference-between-an-int-of-5-and-a-float-of-5-0", "title": "Is there a difference between an int of 5 and a float of 5.0?", "body": "<p>I am confused on whether there is or is not any difference between and <code>int</code> of 5 and a <code>float</code> of 5.0, besides the float having a decimal.</p>\n\n<p>What are some of the things I can do with an <code>int</code> that I can't with a <code>float</code>? What is the point of having two separate types, instead of just letting everything be a <code>float</code> in the first place?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1548885438, "post_id": 54450108, "comment_id": 95709013, "body": "are you sure the delimiter is <code>,</code> try <code>;</code>... it is used by some csv generators, can you print <code>x</code>&amp;<code>y</code> and tell us what it looks like. Without more information about the structure of your data, it will be difficult to answer."}, {"owner": {"reputation": 1, "user_id": 10992800, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9ijEim3Bwck/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMoMhNnt_IHbKUrNWAYWyQVQqgWyQ/mo/photo.jpg?sz=128", "display_name": "iiAUBURYii", "link": "https://stackoverflow.com/users/10992800/iiauburyii"}, "reply_to_user": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1548886273, "post_id": 54450108, "comment_id": 95709321, "body": "@Beno&#238;tPilatte I&#39;ve changed the delimiter and I&#39;m coming up with a different error but I think i&#39;m on track, I can&#39;t print the x or y value but i can show you the value error that flags when running the code.   ( ValueError: could not convert string to float: &#39;[&quot;2018-10-17 22:27:23,224&quot;, &quot;\\&#39;h\\&#39;&quot;]&#39;)"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1548886672, "post_id": 54450108, "comment_id": 95709433, "body": "Ah, ok, try <code>import csv; f = csv.reader(&quot;file.txt&quot;, delimiter = &#39;;&#39;); print([ i for i in f])</code> At least you will have an idea of what the correct delimiter is and why some values aren&#39;t numbers. You can then filter the array yourself before giving It to <code>numpy</code>"}, {"owner": {"reputation": 1, "user_id": 10992800, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9ijEim3Bwck/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMoMhNnt_IHbKUrNWAYWyQVQqgWyQ/mo/photo.jpg?sz=128", "display_name": "iiAUBURYii", "link": "https://stackoverflow.com/users/10992800/iiauburyii"}, "reply_to_user": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1548890022, "post_id": 54450108, "comment_id": 95710500, "body": "@Beno&#238;tPilatte thank you for your help, starting to understand it a bit more now"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1548890231, "post_id": 54450108, "comment_id": 95710556, "body": "If you want to plot time, I would highly suggest using the <code>datetime</code> module, or convert your dates &amp; times to <code>epoch</code> time. Computers prefer handling integers."}, {"owner": {"reputation": 1, "user_id": 10992800, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9ijEim3Bwck/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMoMhNnt_IHbKUrNWAYWyQVQqgWyQ/mo/photo.jpg?sz=128", "display_name": "iiAUBURYii", "link": "https://stackoverflow.com/users/10992800/iiauburyii"}, "reply_to_user": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1548892465, "post_id": 54450108, "comment_id": 95711099, "body": "is there a way i could get a bit more guidance on this im not sure where to use the datatime function in regards to the x &amp; y axis, could i potentially email you or something ?"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1548930487, "post_id": 54450108, "comment_id": 95724838, "body": "Not on this thread, you can ask questions if you have one, but it is probably already answered, <code>help(datetime.datetime) and dir(datetime.datetime)</code> is a good start. Google is your friend, read the doc, and Good luck."}], "owner": {"reputation": 1, "user_id": 10992800, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9ijEim3Bwck/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMoMhNnt_IHbKUrNWAYWyQVQqgWyQ/mo/photo.jpg?sz=128", "display_name": "iiAUBURYii", "link": "https://stackoverflow.com/users/10992800/iiauburyii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548885669, "creation_date": 1548885162, "last_edit_date": 1548885669, "question_id": 54450108, "link": "https://stackoverflow.com/questions/54450108/how-to-display-asctime-as-a-visual-graph", "title": "How to display Asctime as a visual graph", "body": "<p>I'm attempting to create a code that can log my keystrokes and display a each press in representation of a graph. however when ever I attempt to run the code through the matplotlib i get the error of string can't be converted into a float </p>\n\n<p>import matplotlib.pyplot as plt\n   import numpy as np</p>\n\n<pre><code>x, y = np.loadtxt('key_log.txt', delimiter=',', unpack=True)\nplt.plot(x,y, label='Loaded from file!')\n\nplt.xlabel('x')\nplt.ylabel('y')\nplt.title('Interesting\\nCheck it out')\nplt.legend()\nplt.show()\n</code></pre>\n\n<p>Display the information taken from using asctime command to display time and amount of strokes displayed as a graph </p>\n"}, {"tags": ["python", "list", "sorting"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1548885316, "post_id": 54450093, "comment_id": 95708972, "body": "I don&#39;t understand how you arrived at the <code>second_list</code> output, can you please clarify"}], "answers": [{"tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": false, "score": 1, "last_activity_date": 1548885882, "last_edit_date": 1548885882, "creation_date": 1548885535, "answer_id": 54450183, "question_id": 54450093, "link": "https://stackoverflow.com/questions/54450093/ordering-multiple-lists-at-once-with-one-as-base-reference/54450183#54450183", "title": "Ordering multiple lists at once with one as base reference", "body": "<pre><code>import numpy as np\nindices = np.argsort(base_list)[::-1]\ns_list = [second_list[i] for i in indices]\nprint(s_list)\n#[[2, 2], [1, 1], [3, 3], [4, 4]]\n#Note: your second list is missing commas between lists.\n</code></pre>\n\n<p>If you don't want to use numpy </p>\n\n<pre><code>indices = sorted(range(len(base_list)), key=base_list.__getitem__, reverse=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 10405959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879a3af22a7c0aac4cd7906ef211df3e?s=128&d=identicon&r=PG&f=1", "display_name": "Schematic", "link": "https://stackoverflow.com/users/10405959/schematic"}, "is_accepted": true, "score": 1, "last_activity_date": 1548885751, "creation_date": 1548885751, "answer_id": 54450247, "question_id": 54450093, "link": "https://stackoverflow.com/questions/54450093/ordering-multiple-lists-at-once-with-one-as-base-reference/54450247#54450247", "title": "Ordering multiple lists at once with one as base reference", "body": "<p>Operating under the assumption that your base list and second list will always be the same length, here's how I would do it (without using another library like numpy).</p>\n\n<p>If you turn the second list into a list of tuples where the first element of the tuple is the corresponding element in base list, you could sort the second list the way that you want.</p>\n\n<pre><code>for i in range(len(second_list)):\n    second_list[i] = (base_list[i], second_list[i])\n</code></pre>\n\n<p>Now you can sort the second list the same way as the base list:</p>\n\n<pre><code>sorted_second_list = sorted(second_list, reverse=True)\n</code></pre>\n\n<p>You could then extract the values from the tuples.</p>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 7483073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c3deafe1fb032d5ad9bc859ebae598?s=128&d=identicon&r=PG&f=1", "display_name": "Hatatister", "link": "https://stackoverflow.com/users/7483073/hatatister"}, "is_accepted": false, "score": 1, "last_activity_date": 1548886420, "creation_date": 1548886420, "answer_id": 54450372, "question_id": 54450093, "link": "https://stackoverflow.com/questions/54450093/ordering-multiple-lists-at-once-with-one-as-base-reference/54450372#54450372", "title": "Ordering multiple lists at once with one as base reference", "body": "<p>You could map your unsorted eigenvalues to values of base list. Then sort your base list and then create a list of sorted eigenvalues by using the sorted list as indices:</p>\n\n<pre><code>base_list = [2, 3,1,4]\nsecond_list =[[3,3],[1,1],[4,4],[2,2]]\neigen_map = {i: eigenvalue for i, eigenvalue in zip(base_list, second_list)}\nsorted_list = sorted(base_list)\nsorted_eigenvalues = [eigen_map[index] for index in sorted_list]\n</code></pre>\n\n<p>This gives:\n    [[4, 4], [3, 3], [1, 1], [2, 2]]</p>\n"}], "owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 54450247, "answer_count": 3, "score": 0, "last_activity_date": 1548886420, "creation_date": 1548885066, "last_edit_date": 1548885527, "question_id": 54450093, "link": "https://stackoverflow.com/questions/54450093/ordering-multiple-lists-at-once-with-one-as-base-reference", "title": "Ordering multiple lists at once with one as base reference", "body": "<p>I am using <code>sklearn</code> to calculate some eigenvalues and eigenvectors, part of my problem is that I want to order the eigenvalues, calculate a cumulative sum over them and compare that number to a certain variance threshold. As soon as I know for example the first 3 eigenvalues are sufficient and will get me past that threshold, I will have to find the corresponding eigenvectors. </p>\n\n<p>Like this</p>\n\n<pre><code>base_list = [2,3,1,4]\nsorted_base_list = sorted(base_list, reverse=True)\n&gt;&gt;&gt; [4,3,2,1]\nsecond_list = [[3,3][1,1][4,4][2,2]]\n</code></pre>\n\n<p>Applying the re-ordering of <code>base_list</code> to <code>second_list</code> I would like to get this</p>\n\n<pre><code>second_list = [[2,2][1,1][3,3][4,4]]\n</code></pre>\n\n<p>In other words I want to have my eigenvector list of lists ordered in the same way as my eigenvalues.</p>\n\n<p>any suggestions are appreciated</p>\n"}, {"tags": ["python", "pandas", "multi-index"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1548885436, "post_id": 54450063, "comment_id": 95709012, "body": "Create the index by for loop , then reindex it ?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1548885609, "post_id": 54450063, "comment_id": 95709083, "body": "@Wen-Ben Thanks! That would be my last-resort option. I hate using loops in pandas."}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1548886217, "creation_date": 1548886217, "answer_id": 54450338, "question_id": 54450063, "link": "https://stackoverflow.com/questions/54450063/inserting-missing-multiindex-rows-into-a-pandas-dataframe/54450338#54450338", "title": "Inserting &quot;missing&quot; multiindex rows into a Pandas Dataframe", "body": "<p>If there is a will, there is a way.  I am not proud of this but, I think it works.</p>\n\n<p>Try:</p>\n\n<pre><code>def f(x):\n    levels = x.index.remove_unused_levels().levels\n    x = x.reindex(pd.MultiIndex.from_product([levels[0], np.arange(levels[1][0], levels[1][-1]+1)]))\n    return x\n\ndf.groupby(level=0, as_index=False, group_keys=False).apply(f)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     value\nA 1    0.0\n  2    NaN\n  3    1.0\nB 2    2.0\n  3    3.0\n  4    NaN\n  5    NaN\n  6    4.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 2, "last_activity_date": 1548888921, "creation_date": 1548888921, "answer_id": 54450803, "question_id": 54450063, "link": "https://stackoverflow.com/questions/54450063/inserting-missing-multiindex-rows-into-a-pandas-dataframe/54450803#54450803", "title": "Inserting &quot;missing&quot; multiindex rows into a Pandas Dataframe", "body": "<p>After much deliberations, I was able to come up with a solution myself. Judging by the fact of how lousy it is, the problem I am facing is not a very typical one.</p>\n\n<pre><code>new_index = d.index.to_frame()\\\n                .groupby(0)[1]\\\n                .apply(lambda x:\n                         pd.Series(1, index=range(x.min(), x.max() + 1))).index\nd.reindex(new_index)\n</code></pre>\n"}], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 54450803, "answer_count": 2, "score": 5, "last_activity_date": 1548888921, "creation_date": 1548884947, "question_id": 54450063, "link": "https://stackoverflow.com/questions/54450063/inserting-missing-multiindex-rows-into-a-pandas-dataframe", "title": "Inserting &quot;missing&quot; multiindex rows into a Pandas Dataframe", "body": "<p>I have a pandas DataFrame with a two-level multiindex. The second level is numeric and supposed to be sorted and sequential for each unique value of the first-level index, but has gaps. How do I insert the \"missing\" rows? Sample input:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame(list(range(5)),\n                  index=pd.MultiIndex.from_tuples([('A',1), ('A',3),\n                                                   ('B',2), ('B',3), ('B',6)]),\n                  columns='value')\n#     value\n#A 1      0\n#  3      1\n#B 2      2\n#  3      3\n#  6      4\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>#     value\n#A 1      0\n#  2    NaN\n#  3      1\n#B 2      2\n#  3      3\n#  4    NaN\n#  5    NaN\n#  6      4\n</code></pre>\n\n<p>I suspect I could have used <code>resample</code>, but I am having trouble converting the numbers to anything date-like.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 2, "creation_date": 1548884999, "post_id": 54450047, "comment_id": 95708851, "body": "I can&#39;t reproduce, because when I do <code>df.groupby(&#39;Date&#39;).sum()</code> it works fine for me"}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1548885120, "post_id": 54450047, "comment_id": 95708892, "body": "<a href=\"https://stackoverflow.com/help/mcve%5D\">Can you show us what the weird results look like?</a>. Also post the exact error message you are receiving"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548886018, "post_id": 54450047, "comment_id": 95709220, "body": "That&#39;s what it gives.          Date                                MW 0 2017-01-01 09:00:00               111 1 2017-01-01 10:00:00          11222237 2 2017-01-01 11:00:00      111314161119 3 2017-01-01 12:00:00  1316201318152322 4 2017-01-01 13:00:00        1923242120"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548886121, "post_id": 54450144, "comment_id": 95709263, "body": "When I try to do this, it gives me  0 2017-01-01 09:00:00               111 1 2017-01-01 10:00:00          11222237 2 2017-01-01 11:00:00      111314161119 3 2017-01-01 12:00:00  1316201318152322 4 2017-01-01 13:00:00        1923242120"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548886320, "post_id": 54450144, "comment_id": 95709334, "body": "Corrected the error. My MW column had dtype as object. Converted it to int and applied groupby"}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "edited": false, "score": 1, "creation_date": 1548886330, "post_id": 54450144, "comment_id": 95709340, "body": "df.dtypes and you should see Date column as Object, MW as int"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548886682, "post_id": 54450144, "comment_id": 95709439, "body": "Is there a way I could add missing hours with zeros in MW column to this data? @CSMaverick"}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "reply_to_user": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548886792, "post_id": 54450144, "comment_id": 95709469, "body": "like you want to add 1,2,3,4,5,6,7,8,11,00 for this particular case??"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548886841, "post_id": 54450144, "comment_id": 95709490, "body": "Yes, and add zeros in MW column alongside"}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "reply_to_user": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 1, "creation_date": 1548886998, "post_id": 54450144, "comment_id": 95709538, "body": "date_rng = pd.date_range(start=&#39;1/1/2017&#39;, end=&#39;1/2/2017&#39;, freq=&#39;H&#39;) df = pd.DataFrame(date_rng, columns=[&#39;date&#39;]) df[&#39;MW&#39;] = 0 try this"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548887835, "post_id": 54450144, "comment_id": 95709857, "body": "Still working on merging the two dataframes on index"}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "reply_to_user": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548888795, "post_id": 54450144, "comment_id": 95710165, "body": "did u get the anwer? if not try this  date_rng = pd.date_range(start=&#39;1/1/2017&#39;, end=&#39;1/2/2017&#39;, freq=&#39;H&#39;) df2 = pd.DataFrame(date_rng, columns=[&#39;Date&#39;]) df2.Date.astype(str) df2[&quot;MW&quot;] = 0 new_df = pd.concat([df1,df2]).drop_duplicates([&#39;Date&#39;,&#39;MW&#39;],keep=&#39;las&zwnj;&#8203;t&#39;)"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548889109, "post_id": 54450144, "comment_id": 95710250, "body": "Getting the size of new_df as 13550 when I try it for the entire year instead of 8760."}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "reply_to_user": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548889341, "post_id": 54450144, "comment_id": 95710320, "body": "date_rng = pd.date_range(start=&#39;1/1/2018&#39;, end=&#39;1/1/2019&#39;, freq=&#39;H&#39;)[:-1] df2 = pd.DataFrame(date_rng, columns=[&#39;Date&#39;]) df2.Date.astype(str) df2[&quot;MW&quot;] = 0 new_df = pd.concat([df2,df]).drop_duplicates([&#39;Date&#39;,&#39;MW&#39;],keep=&#39;last&zwnj;&#8203;&#39;)"}, {"owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "reply_to_user": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 1, "creation_date": 1548889369, "post_id": 54450144, "comment_id": 95710328, "body": "You should get the right output.. I don&#39;t know how you&#39;re doing but try above comment. You should maintain data type across the dataframes"}, {"owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "edited": false, "score": 0, "creation_date": 1548889855, "post_id": 54450144, "comment_id": 95710452, "body": "Used merge to get the output. Thanks for the help"}], "tags": [], "owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "is_accepted": false, "score": 1, "last_activity_date": 1548889096, "last_edit_date": 1548889096, "creation_date": 1548885330, "answer_id": 54450144, "question_id": 54450047, "link": "https://stackoverflow.com/questions/54450047/merge-similar-hours-from-date-column-into-one/54450144#54450144", "title": "Merge similar hours from Date Column into one", "body": "<p>Why not considering datetime as string while doing group by?</p>\n\n<pre><code>df = pd.DataFrame({'Date':['2017-01-01 09:00:00','2017-01-01 09:00:00','2017-01-01 10:00:00','2017-01-01 10:00:00'],\n              'MW':[1,2,1,1]})\ndf['Date'] = pd.to_datetime(df1['Date'])\ndf.groupby('Date', as_index=False).sum()\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>                  Date  MW\n0  2017-01-01 09:00:00   3\n1  2017-01-01 10:00:00   2\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 10491084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UukmjQqNXLs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU0EpIXh5J6Xa2nC7T6edJNwuhhuA/mo/photo.jpg?sz=128", "display_name": "Chinmay", "link": "https://stackoverflow.com/users/10491084/chinmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548889096, "creation_date": 1548884866, "question_id": 54450047, "link": "https://stackoverflow.com/questions/54450047/merge-similar-hours-from-date-column-into-one", "title": "Merge similar hours from Date Column into one", "body": "<p>I have a dataframe which looks like this.</p>\n\n<pre><code>   Date                   MW\n0 2017-01-01 09:00:00      1\n1 2017-01-01 09:00:00      1\n2 2017-01-01 09:00:00      1\n3 2017-01-01 10:00:00      1\n4 2017-01-01 10:00:00      1\n</code></pre>\n\n<p>I want to add up values for all the repeated hours and convert it into a single row. For example, for 09:00:00, the final value should be 3 MW.</p>\n\n<p>I tried groupby but it says missing values for hours that are not in the dataset. Also, df.resample('H').sum() gives weird results.</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1548884908, "post_id": 54450039, "comment_id": 95708830, "body": "Please <i>don&#39;t</i> give your serializers the same name as the model, rename <code>Data_Point</code> to <code>DataPointSerializer</code> at the bottom."}, {"owner": {"reputation": 168, "user_id": 10863369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eac657375a27b8222d9a271379d338b9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle DeGennaro", "link": "https://stackoverflow.com/users/10863369/kyle-degennaro"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1548884997, "post_id": 54450039, "comment_id": 95708850, "body": "Of course it was the smallest thing. That did the trick! Thank you so much!"}], "owner": {"reputation": 168, "user_id": 10863369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eac657375a27b8222d9a271379d338b9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle DeGennaro", "link": "https://stackoverflow.com/users/10863369/kyle-degennaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 603, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548884840, "creation_date": 1548884840, "question_id": 54450039, "link": "https://stackoverflow.com/questions/54450039/django-attributeerror-type-object-data-point-has-no-attribute-objects", "title": "Django: AttributeError: type object &#39;Data_Point &#39; has no attribute &#39;objects&#39;", "body": "<p>I am trying to make a migration, but however I am running into an issue. I am getting the error: </p>\n\n<pre><code>queryset = Data_Point.objects.all()\nAttributeError: type object 'Data_Point' has no attribute 'objects'\n</code></pre>\n\n<p>and I am not sure why. I have googled the error, and still can not find a soultion. Could the error lie in the models.py class? Specifically could the issue be with the association with each table and the foreign keys? Here are the follow classes:</p>\n\n<p>models.py</p>\n\n<pre><code>class System(models.Model):\n    System = models.CharField(max_length=255)\n\n    def __str__(self):\n        return self.System\n\nclass Sub_System(models.Model):\n    Sub_System = models.CharField(max_length=255)\n    System = models.ForeignKey(System, on_delete=models.CASCADE)\n\n    def __str__(self):\n        return self.Sub_System\n\nclass Data_Name(models.Model):\n    Data_Name = models.CharField(max_length=255)\n    Sub_System = models.ForeignKey(Sub_System, on_delete=models.CASCADE)\n\n    def __str__(self):\n        return self.Data_Name\n\nclass Data_Point(models.Model):\n    Captured_Timestamp = models.DateTimeField(auto_now_add=False, blank=True)\n    Inserted_Timestamp = models.DateTimeField(default=datetime.now, blank=True)\n    Data_Value = models.CharField(max_length=4)\n    Data_Name = models.ForeignKey(Data_Name, on_delete=models.CASCADE)\n\n    def __str__(self):\n        return self.Data_Value\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>class SystemView(viewsets.ModelViewSet):\n    queryset = System.objects.all()\n    serializer_class = SystemSerializer\n\nclass Sub_SystemView(viewsets.ModelViewSet):\n    queryset = Sub_System.objects.all()\n    serializer_class = Sub_SystemSerializer\n\nclass Data_NameView(viewsets.ModelViewSet):\n    queryset = Data_Name.objects.all()\n    serializer_class = Data_NameSerializer\n\nclass Data_PointView(viewsets.ModelViewSet):\n    queryset = Data_Point.objects.all()\n    serializer_class = Data_PointSerializer\n</code></pre>\n\n<p>serializers.py</p>\n\n<pre><code>class SystemSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = System\n        fields = ('id', 'System')\n\nclass Sub_SystemSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Sub_System\n        fields = ('id', 'Sub_System', 'System')\n\nclass Data_NameSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Data_Name\n        fields = ('id', 'Data_Name', 'Sub_System')\n\nclass Data_Point(serializers.ModelSerializer):\n    class Meta:\n        model = Data_Point\n        fields = ('id', 'Captured_Timestamp', 'Inserted_Timestamp', 'Data_Value', 'Data_name')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "if-statement", "comparison"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1548884609, "post_id": 54449923, "comment_id": 95708727, "body": "<a href=\"https://docs.python.org/3/library/stdtypes.html#truth-value-testing\" rel=\"nofollow noreferrer\">This is the relevant section of the documentation</a>. Importantly: &quot;By default, an object is considered true unless its class defines either a <code>__bool__()</code> method that returns False or a <code>__len__()</code> method that returns zero, when called with the object.&quot;"}], "owner": {"reputation": 21, "user_id": 10854916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669fbfb395847072b26e3e1dba7c38c5?s=128&d=identicon&r=PG&f=1", "display_name": "kalintri", "link": "https://stackoverflow.com/users/10854916/kalintri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1548884697, "answer_count": 0, "score": 1, "last_activity_date": 1548884602, "creation_date": 1548884205, "last_edit_date": 1548884497, "question_id": 54449923, "link": "https://stackoverflow.com/questions/54449923/what-is-the-check-if-var-actually-doing-in-the-background-in-python3", "closed_reason": "Duplicate", "title": "What is the check &quot;if var:&quot; actually doing in the background in Python3?", "body": "<p>I kind of know the difference between <code>var == None</code> and <code>var is None</code>, however my question is about the following condition check:</p>\n\n<pre><code>if var:\n  action\n</code></pre>\n\n<p>Is the above equivalent to:</p>\n\n<pre><code>if not var == None:\n  action\n</code></pre>\n\n<p>or is it equivalent to:</p>\n\n<pre><code>if var is not None:\n  action\n</code></pre>\n\n<p>Or does it depend on what is the current type of the \"var\" variable, how it performs the check?</p>\n\n<p>Or does it have a completely different mechanic in the background?</p>\n\n<p>Coming from that as a follow up what would happen if the value of \"var\" is actually 0 and it's of type float or int and I use the <code>if var:</code> construct?</p>\n\n<p>Any insights about the inner workings of Python3 are much appreciated.\nThanks!</p>\n"}, {"tags": ["python", "eclipse", "jython"], "comments": [{"owner": {"reputation": 1753, "user_id": 1555925, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bd24a2af3551b9e30b267ce944a18639?s=128&d=identicon&r=PG", "display_name": "davidrmcharles", "link": "https://stackoverflow.com/users/1555925/davidrmcharles"}, "edited": false, "score": 1, "creation_date": 1548885552, "post_id": 54449918, "comment_id": 95709060, "body": "Jython doesn&#39;t have language-level support for Python3."}, {"owner": {"reputation": 55, "user_id": 4734923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2103aff6bcf9e6173bd9852c23e69503?s=128&d=identicon&r=PG&f=1", "display_name": "Rui", "link": "https://stackoverflow.com/users/4734923/rui"}, "reply_to_user": {"reputation": 1753, "user_id": 1555925, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bd24a2af3551b9e30b267ce944a18639?s=128&d=identicon&r=PG", "display_name": "davidrmcharles", "link": "https://stackoverflow.com/users/1555925/davidrmcharles"}, "edited": false, "score": 0, "creation_date": 1548891554, "post_id": 54449918, "comment_id": 95710893, "body": "So would I have to downgrade my Python version to 2.something to get this to work? Is there another option available for Java-Python integration that will work for Python3?"}, {"owner": {"reputation": 1753, "user_id": 1555925, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bd24a2af3551b9e30b267ce944a18639?s=128&d=identicon&r=PG", "display_name": "davidrmcharles", "link": "https://stackoverflow.com/users/1555925/davidrmcharles"}, "edited": false, "score": 0, "creation_date": 1548955398, "post_id": 54449918, "comment_id": 95739934, "body": "Correct.  As far as I know, that is the state of things."}], "owner": {"reputation": 55, "user_id": 4734923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2103aff6bcf9e6173bd9852c23e69503?s=128&d=identicon&r=PG&f=1", "display_name": "Rui", "link": "https://stackoverflow.com/users/4734923/rui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548884165, "creation_date": 1548884165, "question_id": 54449918, "link": "https://stackoverflow.com/questions/54449918/problem-with-urllib-source-code-in-eclipse", "title": "Problem with urllib source code in Eclipse?", "body": "<p>I am having a bizarre problem in which Eclipse is raising an error for the source code of a python Lib package. I am using Python 3.7.1.</p>\n\n<p>The relevant line is:</p>\n\n<pre><code>import urllib.request.urlopen as uReq\n</code></pre>\n\n<p>I don't believe the python interpreter I'm using is relevant to this particular problem. Nevertheless, here is the code for it. (I know, it's probably horrendous. If you know a better way to do this, please kindly point me in the right direction; this is my first time using jython and I'm sure it shows.)</p>\n\n<pre><code>interpreter = new PythonInterpreter();\ninterpreter.exec(\"import sys\");\ninterpreter.exec(\"import os\");\ninterpreter.exec(\"sys.path.insert(0, os.getcwd() + '\\\\src\\\\python')\");\ninterpreter.exec(\"sys.path.insert(0, os.getcwd() + '\\\\Lib')\");\ninterpreter.exec(\"sys.path.insert(0, os.getcwd() + '\\\\Lib\\\\site-packages')\");\ninterpreter.exec(\"print(sys.path[0])\");\ninterpreter.exec(\"from myscraper import validateUrl\");\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" Traceback (most recent call last):\nFile \"&lt;string&gt;\", line 1, in &lt;module&gt;\nFile \"C:\\Users\\...\\ThreadTracker\\src\\python\\myscraper.py\", line 6, in &lt;module&gt;\nimport urllib.request.urlopen as uReq\nSyntaxError: (\"mismatched input ',' expecting NAME\", \n('C:\\\\Users\\\\...\\\\ThreadTracker\\\\Lib\\\\urllib\\\\request.py', 140, 13, '            \n*, cafile=None, capath=None, cadefault=False, context=None):\\n'))\n</code></pre>\n\n<p>Which seems to be having a problem with this line of code from the source file:</p>\n\n<pre><code>def urlopen(url, data=None, timeout=socket._GLOBAL_DEFAULT_TIMEOUT,\n        *, cafile=None, capath=None, cadefault=False, context=None):\n</code></pre>\n\n<p>I saw on another post that urllib3 could be used as well, so I tried:</p>\n\n<p>from urllib3 import request as uReq</p>\n\n<p>But this came up with its own error:</p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" Traceback (most recent call last):\nFile \"&lt;string&gt;\", line 1, in &lt;module&gt;\nFile \"C:\\Users\\Christina\\ThreadTracker\\src\\python\\myscraper.py\", line 6, in &lt;module&gt;\nfrom urllib3 import request as uReq\nFile \"C:\\Users\\Christina\\ThreadTracker\\Lib\\site-packages\\urllib3\\__init__.py\", line 8, in &lt;module&gt;\nfrom .connectionpool import (\nFile \"C:\\Users\\Christina\\ThreadTracker\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 3, in &lt;module&gt;\nimport logging\nSyntaxError: (\"no viable alternative at input '='\", ('C:\\\\Users\\\\Christina\\\\ThreadTracker\\\\Lib\\\\logging\\\\__init__.py', 261, 55, '                      method_name, \"method:\", err, file=sys.stderr)\\n'))\n</code></pre>\n\n<p>I'm extremely confused as to why I'm getting errors from the source code... And I've been having a heck of a time just trying to get the java-python integration to work.</p>\n"}, {"tags": ["java", "python", "spring"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12478046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6bc7c833782ade720fdaed656c8849?s=128&d=identicon&r=PG&f=1", "display_name": "Asad Javed", "link": "https://stackoverflow.com/users/12478046/asad-javed"}, "is_accepted": false, "score": 2, "last_activity_date": 1612420460, "last_edit_date": 1612420460, "creation_date": 1612420097, "answer_id": 66040380, "question_id": 54449911, "link": "https://stackoverflow.com/questions/54449911/access-config-properties-w-python-from-java-spring-cloud-config-server/66040380#66040380", "title": "Access Config Properties w/ Python from Java Spring Cloud Config Server", "body": "<p>In my case I have achieved this using <code>spring-config-client</code> library. I am sharing the code sample.</p>\n<pre><code>from spring_config.client import SpringConfigClient\n\nconfig = (\n    ClientConfigurationBuilder()\n    .app_name(&quot;dashboard-service-python11&quot;) #config file\n    .address(&quot;http://localhost:3051&quot;)\n    .build()\n)\n\nc = SpringConfigClient(config)\nc.get_config()\nprint(c.get_config())\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10992732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gAGaBlSph-4/AAAAAAAAAAI/AAAAAAAAABE/J--gfZ8xEok/photo.jpg?sz=128", "display_name": "Eduardo Rios", "link": "https://stackoverflow.com/users/10992732/eduardo-rios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1612420460, "creation_date": 1548884140, "question_id": 54449911, "link": "https://stackoverflow.com/questions/54449911/access-config-properties-w-python-from-java-spring-cloud-config-server", "title": "Access Config Properties w/ Python from Java Spring Cloud Config Server", "body": "<p>I have a repo containing config properties that a Java Spring Cloud Config Server accesses whenever another Java Spring App requests to pull the properties. I want to have the same concept, but with a Python App that pulls similar properties. I know there's Python Spring libraries out there, but I can't find an example of Python pulling these properties from a similar config server.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "escaping", "special-characters"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1548884148, "post_id": 54449889, "comment_id": 95708560, "body": "Are you trying to replace a backslash followed by an n, or a newline character <code>\\n</code> ?"}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1548884261, "post_id": 54449889, "comment_id": 95708599, "body": "Could you show some inputs along with desired outputs? Otherwise it&#39;s not really clear what you&#39;re trying to achieve."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1548884301, "post_id": 54449889, "comment_id": 95708615, "body": "The difficulty with trying to match backslash n in a regular expression is that backslash n is regex code for a newline. So <code>\\n</code> is a newline character, and <code>\\\\n</code> is a pattern that matches a newline (but doesn&#39;t match backslash n). So if you want to match actual backslash n, you could use the pattern <code>\\\\\\\\n</code> in your regular expression."}, {"owner": {"reputation": 720, "user_id": 7654548, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/06b8f98652f2e67986a103b2a6b50e26?s=128&d=identicon&r=PG&f=1", "display_name": "physlexic", "link": "https://stackoverflow.com/users/7654548/physlexic"}, "edited": false, "score": 0, "creation_date": 1548884362, "post_id": 54449889, "comment_id": 95708638, "body": "Sorry, I will edit with more information"}, {"owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "edited": false, "score": 2, "creation_date": 1548884448, "post_id": 54449889, "comment_id": 95708670, "body": "when you write a regex in python, try with raw string, e.g., <code>r&quot;&#39;: ;\\d{5,6},\\n&#39;&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 4017657, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zoV_Bfurw-g/AAAAAAAAAAI/AAAAAAAAALQ/xU1yAleko5c/photo.jpg?sz=128", "display_name": "Greg Mueller", "link": "https://stackoverflow.com/users/4017657/greg-mueller"}, "is_accepted": false, "score": 0, "last_activity_date": 1548886455, "creation_date": 1548886455, "answer_id": 54450379, "question_id": 54449889, "link": "https://stackoverflow.com/questions/54449889/python-replacing-literal-n/54450379#54450379", "title": "Python replacing literal \\n", "body": "<p>Here are two \"one-liners\" but both require chaining two replace methods.</p>\n\n<pre><code>&gt;&gt;&gt; filedata = 'Foo\\nBarFoo,\\nFoo\\nBarFoo'\n\n&gt;&gt;&gt; filedata.replace(',\\n', ', ').replace('\\n', '')\n'FooBarFoo, FooBarFoo'\n\n&gt;&gt;&gt; filedata.replace('\\n', '').replace(',', ', ')\n'FooBarFoo, FooBarFoo'\n</code></pre>\n"}], "owner": {"reputation": 720, "user_id": 7654548, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/06b8f98652f2e67986a103b2a6b50e26?s=128&d=identicon&r=PG&f=1", "display_name": "physlexic", "link": "https://stackoverflow.com/users/7654548/physlexic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 777, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548886455, "creation_date": 1548884055, "last_edit_date": 1548884956, "question_id": 54449889, "link": "https://stackoverflow.com/questions/54449889/python-replacing-literal-n", "title": "Python replacing literal \\n", "body": "<p>I didn't want to ask here because I eventually got this to work, but I don't understand why my other attempts were not viable. It is driving me insane. I looked up so many forums.</p>\n\n<p>Currently I have</p>\n\n<pre><code>filedata.replace('\\\\n','')\n</code></pre>\n\n<p>which removed literal <code>\\n</code>, followed by </p>\n\n<pre><code>filedata = re.sub(\"': ;\\d{5,6},\\n'\",', ',filedata)\n</code></pre>\n\n<p>to remove the subsequent \"crap\" in my output file</p>\n\n<p>I could not, for the life of me, put this into one command. I don't know what I am missing, but this is because I cannot escape <code>\\n</code> in <code>re.sub</code> (<code>\\\\n</code> does not work). And, I cannot escape <code>,</code> in <code>filedata.replace</code>; <code>\\,</code> did not work, but <code>\\'</code> works to escape <code>'</code>. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Input:</p>\n\n<pre><code>Foo\\nBarFoo,\nFoo\\nBarFoo\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>FooBarFoo, FooBarFoo\n</code></pre>\n\n<p>This works:</p>\n\n<pre><code>filedata = filedata.replace('\\\\n','')\nfiledata = re.sub(\",\\n\",', ',filedata)\n</code></pre>\n\n<p>so the first line replaces <code>literal \\n</code> and second line replaces <code>literal ,</code> and newline (<code>\\n</code>). What I could not do is get <code>.replace</code> to escape <code>,</code> (<code>\\,</code>, etc. did not work) nor can I escape <code>\\n</code> (newline) in <code>.sub</code> (<code>\\\\n</code>, etc. did not work). So I had to do it in two different steps, while I would prefer to do both in one.</p>\n\n<p>I understand there are other ways to just remove characters if I am not actually replacing, this is just a simplified example of what I am doing. Thanks.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1548884141, "post_id": 54449876, "comment_id": 95708555, "body": "For example, it could be that <code>$PYTHONPATH</code> is different between your account and the account that Apache is running under. <a href=\"https://stackoverflow.com/questions/19917492/how-to-use-pythonpath\" title=\"how to use pythonpath\">stackoverflow.com/questions/19917492/how-to-use-pythonpath</a>"}, {"owner": {"reputation": 8469, "user_id": 2504762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af5ca9c20dafdb1e4e1005468fdf75f7?s=128&d=identicon&r=PG", "display_name": "Gaurang Shah", "link": "https://stackoverflow.com/users/2504762/gaurang-shah"}, "edited": false, "score": 0, "creation_date": 1548884493, "post_id": 54449876, "comment_id": 95708687, "body": "<code>apache2</code> is it a different server ? username ?"}, {"owner": {"reputation": 53, "user_id": 4459581, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1609887875/picture?type=large", "display_name": "Archie", "link": "https://stackoverflow.com/users/4459581/archie"}, "reply_to_user": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1548885392, "post_id": 54449876, "comment_id": 95708997, "body": "@NPE It&#39;s under the same server, same user"}, {"owner": {"reputation": 53, "user_id": 4459581, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1609887875/picture?type=large", "display_name": "Archie", "link": "https://stackoverflow.com/users/4459581/archie"}, "reply_to_user": {"reputation": 8469, "user_id": 2504762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af5ca9c20dafdb1e4e1005468fdf75f7?s=128&d=identicon&r=PG", "display_name": "Gaurang Shah", "link": "https://stackoverflow.com/users/2504762/gaurang-shah"}, "edited": false, "score": 0, "creation_date": 1548885424, "post_id": 54449876, "comment_id": 95709009, "body": "@GaurangShah It&#39;s under the same server, same user. I&#39;m pretty sure"}, {"owner": {"reputation": 832, "user_id": 2660966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/778bc4c1e60ee65d17d5d5ab947e5e52?s=128&d=identicon&r=PG", "display_name": "user2660966", "link": "https://stackoverflow.com/users/2660966/user2660966"}, "edited": false, "score": 0, "creation_date": 1548885586, "post_id": 54449876, "comment_id": 95709071, "body": "have you tried the shebang line #!/usr/bin/env python   ?"}, {"owner": {"reputation": 53, "user_id": 4459581, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1609887875/picture?type=large", "display_name": "Archie", "link": "https://stackoverflow.com/users/4459581/archie"}, "reply_to_user": {"reputation": 832, "user_id": 2660966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/778bc4c1e60ee65d17d5d5ab947e5e52?s=128&d=identicon&r=PG", "display_name": "user2660966", "link": "https://stackoverflow.com/users/2660966/user2660966"}, "edited": false, "score": 0, "creation_date": 1548885722, "post_id": 54449876, "comment_id": 95709124, "body": "@user2660966 Already tried env, same result"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1548887115, "post_id": 54449876, "comment_id": 95709580, "body": "Daemons don&#39;t run <code>.bashrc</code> or <code>.profile</code>, which may be setting the <code>PYTHONPATH</code> environment variable."}, {"owner": {"reputation": 8469, "user_id": 2504762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af5ca9c20dafdb1e4e1005468fdf75f7?s=128&d=identicon&r=PG", "display_name": "Gaurang Shah", "link": "https://stackoverflow.com/users/2504762/gaurang-shah"}, "edited": false, "score": 0, "creation_date": 1548888684, "post_id": 54449876, "comment_id": 95710125, "body": "so are you running with apache user or not ? if so <code>&#39;&#47;home&#47;archie&#47;.local&#47;lib&#47;python2.7&#47;site-packages&#39;,</code> this might create an issue, make sure apache user has access to this"}], "answers": [{"tags": [], "owner": {"reputation": 900, "user_id": 1094711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1f1aa7108ec48219abc991444c542a?s=128&d=identicon&r=PG", "display_name": "woodm1979", "link": "https://stackoverflow.com/users/1094711/woodm1979"}, "is_accepted": false, "score": 0, "last_activity_date": 1548888070, "creation_date": 1548888070, "answer_id": 54450651, "question_id": 54449876, "link": "https://stackoverflow.com/questions/54449876/shebang-doesnt-have-the-same-import-available/54450651#54450651", "title": "Shebang doesn&#39;t have the same import available?", "body": "<p>If you're using a bash-like shell you might also want to try typing <code>type python2.7</code>.  It's entirely possible there's an alias, which <code>which</code> is completely unaware of.</p>\n"}], "owner": {"reputation": 53, "user_id": 4459581, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1609887875/picture?type=large", "display_name": "Archie", "link": "https://stackoverflow.com/users/4459581/archie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548888070, "creation_date": 1548884007, "last_edit_date": 1548886145, "question_id": 54449876, "link": "https://stackoverflow.com/questions/54449876/shebang-doesnt-have-the-same-import-available", "title": "Shebang doesn&#39;t have the same import available?", "body": "<p>In Linux, if I type in\n<code>which python2.7</code> I get <code>/usr/bin/python2.7</code>. If I type in <code>/usr/bin/python2.7</code> to bring up the Python2.7 environment, and I type in <code>import pandas as pd</code> it works fine.</p>\n\n<p>Now I'm running a python file on apache2 on the same server with the shebang <code>#!/usr/bin/python2.7</code>\nnext line I put <code>import pandas as pd</code> and the error log spits out <code>No module named pandas</code>. I don't understand why it doesn't work if it's using the same Python?</p>\n\n<p>Also Here's if I do <code>python2.7 -m site</code></p>\n\n<pre><code>sys.path = [\n    '/home/archie',\n    '/usr/lib/python2.7',\n    '/usr/lib/python2.7/plat-x86_64-linux-gnu',\n    '/usr/lib/python2.7/lib-tk',\n    '/usr/lib/python2.7/lib-old',\n    '/usr/lib/python2.7/lib-dynload',\n    '/home/archie/.local/lib/python2.7/site-packages',\n    '/usr/local/lib/python2.7/dist-packages',\n    '/usr/local/lib/python2.7/dist-packages/requests-2.21.0-py2.7.egg',\n    '/usr/local/lib/python2.7/dist-packages/urllib3-1.24.1-py2.7.egg',\n    '/usr/local/lib/python2.7/dist-packages/chardet-3.0.4-py2.7.egg',\n    '/usr/local/lib/python2.7/dist-packages/certifi-2018.11.29-py2.7.egg',\n    '/usr/local/lib/python2.7/dist-packages/simple_salesforce-0.74.2-py2.7.egg',\n    '/usr/lib/python2.7/dist-packages',\n]\n</code></pre>\n\n<p>if I do <code>pip2.7 uninstall pandas</code>\nI get </p>\n\n<pre><code>Uninstalling pandas-0.23.4:\n  Would remove:\n    /home/archie/.local/lib/python2.7/site-packages/pandas-0.23.4.dist-info/*\n    /home/archie/.local/lib/python2.7/site-packages/pandas/*\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1548884393, "post_id": 54449856, "comment_id": 95708651, "body": "A text box is usually just a post request. Look at the website&#39;s source code or track the request when you manually enter information into the text box (e.g. with  chrome&#39;s developer tools) to see what information to post. Once you have that, you can use &quot;requests.post()&quot; from &quot;requests&quot; package."}], "answers": [{"tags": [], "owner": {"reputation": 344, "user_id": 5712576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3345913770b035b74e93490570a10e?s=128&d=identicon&r=PG&f=1", "display_name": "Kays Kadhi", "link": "https://stackoverflow.com/users/5712576/kays-kadhi"}, "is_accepted": true, "score": 0, "last_activity_date": 1548885197, "last_edit_date": 1548885197, "creation_date": 1548884241, "answer_id": 54449933, "question_id": 54449856, "link": "https://stackoverflow.com/questions/54449856/how-do-i-input-information-into-a-website-with-python/54449933#54449933", "title": "How do I input information into a website with python?", "body": "<p>I don't think that's doable with the webbrowser module, I suggest you take a look at <a href=\"https://selenium-python.readthedocs.io/\" rel=\"nofollow noreferrer\">Selenium</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/17540971/how-to-use-selenium-with-python\">How to use Selenium with Python?\n</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 9932358, "user_type": "registered", "profile_image": "https://graph.facebook.com/1853788198257534/picture?type=large", "display_name": "Thiago de Vasconcellos", "link": "https://stackoverflow.com/users/9932358/thiago-de-vasconcellos"}, "is_accepted": false, "score": 1, "last_activity_date": 1548885253, "last_edit_date": 1548885253, "creation_date": 1548884905, "answer_id": 54450057, "question_id": 54449856, "link": "https://stackoverflow.com/questions/54449856/how-do-i-input-information-into-a-website-with-python/54450057#54450057", "title": "How do I input information into a website with python?", "body": "<p>I suggest you use Selenium for that matter.</p>\n\n<p>Here is an example code:</p>\n\n<pre><code>from selenium import webdriver \nfrom selenium.webdriver.common.keys import Keys\n\n# driver = webdriver.Firefox() # Use this if you prefer Firefox. \ndriver = webdriver.Chrome()\n\ndriver.get('http://www.google.com/')\n\nsearch_input = driver.find_elements_by_css_selector('input.gLFyf.gsfi')[0]\nsearch_input.send_keys('some search string' + Keys.RETURN)\n</code></pre>\n\n<p>You can use Selenium better if you know HTML and CSS well. Knowing Javascript/JQuery may help too.</p>\n\n<p>You need the specific webdriver to run it properly:</p>\n\n<p><a href=\"https://github.com/mozilla/geckodriver/releases\" rel=\"nofollow noreferrer\">GeckoDriver (Firefox)</a></p>\n\n<p><a href=\"http://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">Chrome</a></p>\n\n<p>There are other webdrivers available, but one of the previous should be enough for you.</p>\n\n<p>On Windows, you should have the executable on the same folder as your code. On Ubuntu, you should copy the webdriver file to /usr/local/bin/</p>\n\n<p>You can use Selenium not only to input information, but also to a lot of other utilities.</p>\n"}, {"tags": [], "owner": {"reputation": 796, "user_id": 10876060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be377127a6abea88e1dbf7e24d84358d?s=128&d=identicon&r=PG", "display_name": "user24343", "link": "https://stackoverflow.com/users/10876060/user24343"}, "is_accepted": false, "score": 0, "last_activity_date": 1548887400, "creation_date": 1548887400, "answer_id": 54450542, "question_id": 54449856, "link": "https://stackoverflow.com/questions/54449856/how-do-i-input-information-into-a-website-with-python/54450542#54450542", "title": "How do I input information into a website with python?", "body": "<p>Depending on how complex (interactive, reliant on scripts, ...) your activity is, you can use <a href=\"https://python-requests.org\" rel=\"nofollow noreferrer\"><code>requests</code></a> or, as others have suggested, <a href=\"https://selenium-python.readthedocs.io/\" rel=\"nofollow noreferrer\"><code>selenium</code></a>.</p>\n\n<p>Requests allows you to send and get basic data from websites, you would probably use this when automatically submitting an order form, querying an API, checking if a page has ben updated, ...</p>\n\n<p>Selenium gives you programmatic control of a \"normal\" browser, this seems better for you specific use-case.</p>\n\n<p>The <code>webbrowser</code> module is actually only (more or less) able to open a browser. You can use this if you want to open a link from inside your application.</p>\n"}], "owner": {"reputation": 33, "user_id": 10773645, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9jbY3820h-M/AAAAAAAAAAI/AAAAAAAAABI/6e4EM8TnhRM/photo.jpg?sz=128", "display_name": "Daniel Domingos", "link": "https://stackoverflow.com/users/10773645/daniel-domingos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 54449933, "answer_count": 3, "score": -3, "last_activity_date": 1548887400, "creation_date": 1548883945, "question_id": 54449856, "link": "https://stackoverflow.com/questions/54449856/how-do-i-input-information-into-a-website-with-python", "title": "How do I input information into a website with python?", "body": "<p>I have this python code, which accesses a website using the module webbrowser:</p>\n\n<pre><code> import webbrowser\n webbrowser.open('kahoot.it')\n</code></pre>\n\n<p>How could I input information into a text box on this website?</p>\n"}, {"tags": ["python", "python-3.x", "pycharm", "usb-drive"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 6473579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b5b130d51714eb8c875e372abfd836e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben_its", "link": "https://stackoverflow.com/users/6473579/ben-its"}, "is_accepted": false, "score": 0, "last_activity_date": 1548884711, "creation_date": 1548884711, "answer_id": 54450021, "question_id": 54449841, "link": "https://stackoverflow.com/questions/54449841/i-need-to-be-able-to-run-pycharm-modules-off-of-a-usb/54450021#54450021", "title": "I need to be able to run pycharm + modules off of a USB", "body": "<p>If you have a correct python interpreter with the necessary modules on your USB key it will be quite easy.\nOpen pycharm. Go to Files/Settings/Project Interpreter. Select the correct python.exe in the left menu.</p>\n\n<p>Now leave the settings. Click on Add Configuration on the top right of the main page. Select python, then the interpreter you just added and in Script Path select the script you want to run.\nJust click play next to Add Configuration and you can run your programs without installing anything.</p>\n"}], "owner": {"reputation": 71, "user_id": 10742164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uEVjLafALJ8/AAAAAAAAAAI/AAAAAAAAAHY/ElM-kXHrFkQ/photo.jpg?sz=128", "display_name": "Tyrone Pope", "link": "https://stackoverflow.com/users/10742164/tyrone-pope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548884711, "creation_date": 1548883867, "last_edit_date": 1548884490, "question_id": 54449841, "link": "https://stackoverflow.com/questions/54449841/i-need-to-be-able-to-run-pycharm-modules-off-of-a-usb", "title": "I need to be able to run pycharm + modules off of a USB", "body": "<p>I need to run Pycharm using pygame/numpy on multiple computers from a USB drive.</p>\n\n<p>I have to submit a \"create\" project, which I'm doing a a game using pygame. To make this game, I use Pycharm, a python IDE, along with the modules pygame and numpy. When I program at home, I have no issues. I have all the files, pycharm, winpython, and all the files I need on my USB, and it uses the interpeter that is on my USB.</p>\n\n<p>When I get to school, however is when the problems occur. My first issue is that Pycharm won't let me run my programs. I get \"Interpreter is not found\" or something like that, and I haven't been able to solve this issue. What I've tried is to rename the path to the python interpreter Z:/path (what the usb is at home) to D:/path. </p>\n\n<p>What I've tried:</p>\n\n<p>I have also tried making a persistent USB, so that I could install ubuntu, then pycharm,python,pyagme, and numpy. I however failed, and every time O fixed on error with the USB I would get another. I managed to put Ubuntu on the USB and get it to load, but I haven't been able to get the data to save after reboot.</p>\n"}, {"tags": ["python", "sonarqube", "bandit-python"], "comments": [{"owner": {"reputation": 629, "user_id": 6619811, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgE_-pIeidI/AAAAAAAAAAI/AAAAAAAARRg/0kkX9SLO1R4/photo.jpg?sz=128", "display_name": "Alban A. - SonarSource Team", "link": "https://stackoverflow.com/users/6619811/alban-a-sonarsource-team"}, "edited": false, "score": 0, "creation_date": 1548931806, "post_id": 54449777, "comment_id": 95725652, "body": "Which version of SonarPython do you have? (Because <b>Bandit</b> is supported since SonarPython 1.11)"}, {"owner": {"reputation": 629, "user_id": 6619811, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgE_-pIeidI/AAAAAAAAAAI/AAAAAAAARRg/0kkX9SLO1R4/photo.jpg?sz=128", "display_name": "Alban A. - SonarSource Team", "link": "https://stackoverflow.com/users/6619811/alban-a-sonarsource-team"}, "edited": false, "score": 0, "creation_date": 1548931936, "post_id": 54449777, "comment_id": 95725728, "body": "Note: SonarPython 1.11 is embedded by default in SonarQube 7.6"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4374904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff3fe554c0be542962fa7d83b0d29bc?s=128&d=identicon&r=PG", "display_name": "yegorski", "link": "https://stackoverflow.com/users/4374904/yegorski"}, "edited": false, "score": 0, "creation_date": 1549046941, "post_id": 54458937, "comment_id": 95777841, "body": "Nice, I grabbed sonar-python plugin version <code>1.11.0.2473</code> on the release page <a href=\"https://docs.sonarqube.org/display/PLUG/SonarPython\" rel=\"nofollow noreferrer\">docs.sonarqube.org/display/PLUG/SonarPython</a>  After I put <code>sonar-python-plugin-1.10.0.2131.jar</code> in <code>&#47;usr&#47;local&#47;sonar&#47;extensions&#47;plugins&#47;</code> and restart the SonarQube service, I&#39;m seeing the report in the UI.  Scanner is showing the upload in the logs too, which is helpful +1:  <code>INFO: Sensor Import of Bandit issues [python] (done) | time=738ms</code>"}, {"owner": {"reputation": 691, "user_id": 1257420, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/cOXmL.png?s=128&g=1", "display_name": "3lokh", "link": "https://stackoverflow.com/users/1257420/3lokh"}, "edited": false, "score": 0, "creation_date": 1574925443, "post_id": 54458937, "comment_id": 104403116, "body": "Is it possible to triage the bandit report from the sonar cube ? Last time I checked it just displays the report but can&#39;t do any triage. I might be wrong. @Alexandre - SonarSource, can you please confirm ?"}], "tags": [], "owner": {"reputation": 409, "user_id": 4919399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5veKFTb7lkM/AAAAAAAAAAI/AAAAAAAAAEQ/3I5Q15E5T1I/photo.jpg?sz=128", "display_name": "Alexandre - SonarSource", "link": "https://stackoverflow.com/users/4919399/alexandre-sonarsource"}, "is_accepted": true, "score": 3, "last_activity_date": 1548932012, "creation_date": 1548932012, "answer_id": 54458937, "question_id": 54449777, "link": "https://stackoverflow.com/questions/54449777/sonarqube-does-not-display-bandits-python-security-vulnerability-report/54458937#54458937", "title": "SonarQube does not display Bandit&#39;s Python security vulnerability report", "body": "<p>We added very recently the support of Bandit in SonarPython.</p>\n\n<p>Are you using SonarPython 1.11 in your SonarQube 7.4 instance?\nYou can check that in $SQ_HOME/extensions/plugins. If this is not the case, simply replace the sonar-python-plugin-xxx.jar by the 1.11 and that should fix your problem.</p>\n\n<p><a href=\"https://docs.sonarqube.org/display/PLUG/SonarPython\" rel=\"nofollow noreferrer\">https://docs.sonarqube.org/display/PLUG/SonarPython</a></p>\n\n<p>Thanks </p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 4374904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff3fe554c0be542962fa7d83b0d29bc?s=128&d=identicon&r=PG", "display_name": "yegorski", "link": "https://stackoverflow.com/users/4374904/yegorski"}, "edited": false, "score": 0, "creation_date": 1564575404, "post_id": 57248356, "comment_id": 101075540, "body": "Thanks Tony. Per my comment, my issue was resolved by upgrading to SonarPython 1.11.0.2473."}], "tags": [], "owner": {"reputation": 309, "user_id": 9482943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3GgWHf4zmbI/AAAAAAAAAAI/AAAAAAAAAEY/jmHA5jqN6rY/photo.jpg?sz=128", "display_name": "Tony Aziz", "link": "https://stackoverflow.com/users/9482943/tony-aziz"}, "is_accepted": false, "score": 1, "last_activity_date": 1564382349, "creation_date": 1564382349, "answer_id": 57248356, "question_id": 54449777, "link": "https://stackoverflow.com/questions/54449777/sonarqube-does-not-display-bandits-python-security-vulnerability-report/57248356#57248356", "title": "SonarQube does not display Bandit&#39;s Python security vulnerability report", "body": "<p>U have to add a .bandit file in your project root and define rules there.</p>\n\n<p>then u also need to install pip install bandit into your env. \nHope it works for you. this way works for me and it generates a report as defined by rules.</p>\n"}], "owner": {"reputation": 55, "user_id": 4374904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff3fe554c0be542962fa7d83b0d29bc?s=128&d=identicon&r=PG", "display_name": "yegorski", "link": "https://stackoverflow.com/users/4374904/yegorski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1899, "favorite_count": 0, "accepted_answer_id": 54458937, "answer_count": 2, "score": 3, "last_activity_date": 1599738929, "creation_date": 1548883530, "last_edit_date": 1599738929, "question_id": 54449777, "link": "https://stackoverflow.com/questions/54449777/sonarqube-does-not-display-bandits-python-security-vulnerability-report", "title": "SonarQube does not display Bandit&#39;s Python security vulnerability report", "body": "<h1>Overview</h1>\n\n<p>I'm using SonarQube 7.4.0.18908 to gather code coverage and perform static code analysis for a Python 3.6 project. The server is running in AWS. Things are working as expected (see screenshot below).</p>\n\n<p>Now I'd like to add security scanning for the project. I \"chose\" <a href=\"https://github.com/PyCQA/bandit\" rel=\"nofollow noreferrer\">Bandit</a>, but really that seems to be the only tool which currently integrates with SonarQube for Python, as described in <a href=\"https://docs.sonarqube.org/display/PLUG/Import+Bandit+Issues+Reports\" rel=\"nofollow noreferrer\">Import Bandit Issues Reports</a>. The SonarPython plugin supports Bandit analysis, which is installed on the SonarQube server. To generate vulnerability report locally, I'm using Bandit 1.5.1 pip3 module.</p>\n\n<h1>Issue</h1>\n\n<p>The vulnerability report is not displayed - possibly not even uploaded - to SonarQube (see same screenshot below).</p>\n\n<h1>Steps to Reproduce</h1>\n\n<p>I added this line to the project's <code>sonar-project.properties</code> file:</p>\n\n<pre><code>sonar.python.bandit.reportPaths=bandit-report.json\n</code></pre>\n\n<p>I then ran the report:</p>\n\n<pre><code>pip3 install bandit==1.5.1\nbandit --format json --output bandit-report.json --recursive src\n</code></pre>\n\n<p>I verified that <code>bandit-report.json</code> contains correct data:</p>\n\n<pre><code>{\n  \"errors\": [],\n  \"generated_at\": \"2019-01-30T14:49:18Z\",\n  \"metrics\": {\n...\n\"results\": [\n    {\n      \"code\": \"8 def prepare_df_for_comparison(df, name, ignore_columns=None, sort_columns=None):\\n9     assert df is not None\\n10 \\n11     # upper-case all columns\\n12     df.columns = [x.upper() for x in df.columns]\\n\",\n      \"filename\": \"./build/lib/tasks/compare_df.py\",\n      \"issue_confidence\": \"HIGH\",\n      \"issue_severity\": \"LOW\",\n      \"issue_text\": \"Use of assert detected. The enclosed code will be removed when compiling to optimised byte code.\",\n...\n\n</code></pre>\n\n<p>I then published to SonarQube:</p>\n\n<pre><code>sonar-scanner\n</code></pre>\n\n<p>The output of the scanner:</p>\n\n<pre><code>INFO: Scanner configuration file: NONE\nINFO: Project root configuration file: /root_dir/sonar-project.properties\nINFO: SonarQube Scanner 3.2.0.1227\nINFO: Java 1.8.0_191 Oracle Corporation (64-bit)\nINFO: Linux 4.9.125-linuxkit amd64\nINFO: User cache: /root/.sonar/cache\nINFO: SonarQube server 7.4.0\nINFO: Default locale: \"en_US\", source code encoding: \"UTF-8\" (analysis is platform dependent)\nINFO: Publish mode\nINFO: Load global settings\nINFO: Load global settings (done) | time=126ms\nINFO: Server id: &lt;snip&gt;\nINFO: User cache: /root/.sonar/cache\nINFO: Load/download plugins\nINFO: Load plugins index\nINFO: Load plugins index (done) | time=102ms\nINFO: Load/download plugins (done) | time=130ms\nINFO: Loaded core extensions:\nINFO: Process project properties\nINFO: Load project repositories\nINFO: Load project repositories (done) | time=84ms\nINFO: Load quality profiles\nINFO: Load quality profiles (done) | time=33ms\nINFO: Load active rules\nINFO: Load active rules (done) | time=554ms\nINFO: Load metrics repository\nINFO: Load metrics repository (done) | time=27ms\nINFO: Project key: security-scan\nINFO: Project base dir: /root_dir/src\nINFO: -------------  Scan Security Scan\nINFO: Base dir: /root_dir/src\nINFO: Working dir: /root_dir/src/.scannerwork\nINFO: Source paths: config, dag_factories, operators, tasks\nINFO: Test paths: tests\nINFO: Source encoding: UTF-8, default locale: en_US\nINFO: Load server rules\nINFO: Load server rules (done) | time=187ms\nINFO: Language is forced to py\nINFO: Index files\nINFO: Excluded sources:\nINFO:   **/*.pyc\nINFO:   **/*.ini\nINFO: Excluded tests:\nINFO:   **/*.pyc\nINFO: 95 files indexed\nINFO: 82 files ignored because of inclusion/exclusion patterns\nINFO: Quality profile for py: Sonar way\nINFO: Sensor Python Squid Sensor [python]\nWARN: Metric 'comment_lines_data' is deprecated. Provided value is ignored.\nINFO: Sensor Python Squid Sensor [python] (done) | time=2831ms\nINFO: Sensor PythonXUnitSensor [python]\nINFO: Sensor PythonXUnitSensor [python] (done) | time=318ms\nINFO: Sensor JaCoCo XML Report Importer [jacoco]\nINFO: Sensor JaCoCo XML Report Importer [jacoco] (done) | time=6ms\nINFO: Sensor SonarJavaXmlFileSensor [java]\nINFO: Sensor SonarJavaXmlFileSensor [java] (done) | time=1ms\nINFO: Sensor Zero Coverage Sensor\nINFO: Sensor Zero Coverage Sensor (done) | time=54ms\nINFO: SCM Publisher is disabled\nINFO: 3 files had no CPD blocks\nINFO: Calculating CPD for 61 files\nINFO: CPD calculation finished\nINFO: Analysis report generated in 2349ms, dir size=617 KB\nINFO: Analysis reports compressed in 15384ms, zip size=233 KB\nINFO: Analysis report uploaded in 108ms\nINFO: ANALYSIS SUCCESSFUL, you can browse https://sonarqube.mydomain/dashboard?id=security-scan\nINFO: Note that you will be able to access the updated dashboard once the server has processed the submitted analysis report\nINFO: More about the report processing at https://sonarqube.mydomain/api/ce/task?id=&lt;snip&gt;\nINFO: Task total time: 26.187 s\nINFO: ------------------------------------------------------------------------\nINFO: EXECUTION SUCCESS\nINFO: ------------------------------------------------------------------------\nINFO: Total time: 27.558s\nINFO: Final Memory: 16M/295M\nINFO: ------------------------------------------------------------------------\n</code></pre>\n\n<p>Here is the full <code>sonar-project.properties</code> file:</p>\n\n<pre><code>sonar.host.url=https://sonarqube.mydomain\nsonar.scm.disabled=true\n\nsonar.projectKey=security-scan\nsonar.projectName=Security Scan\nsonar.projectVersion=1.0\n\nsonar.language=py\n\nsonar.sources=src\nsonar.tests=tests\nsonar.python.coverage.reportPath=coverage.xml\n\nsonar.python.bandit.reportPaths=bandit-report.json\n\nsonar.exclusions=**/*.pyc,**/*.ini\nsonar.test.exclusions=**/*.pyc\n</code></pre>\n\n<p>But nowhere in the SonarQube UI do I see this report. What am I missing?</p>\n\n<h1>Related Issues</h1>\n\n<p><a href=\"https://stackoverflow.com/questions/46864556/python-code-for-security-analysis-using-bandit\">Python code for security analysis using Bandit</a>.</p>\n\n<p>This is the only related issue I could find on SO. My issue is different. As I mentioned, Bandit report is generated correctly locally. But the issue seems to be with the upload to SonarQube.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mOHa0.png\" rel=\"nofollow noreferrer\">Empty vulnerability report screenshot</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 304, "user_id": 10491234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1d76d6f325bebed98cbb0a3d7c40c2?s=128&d=identicon&r=PG&f=1", "display_name": "Jared C", "link": "https://stackoverflow.com/users/10491234/jared-c"}, "edited": false, "score": 0, "creation_date": 1548883475, "post_id": 54449713, "comment_id": 95708278, "body": "See <a href=\"https://pytorch.org/docs/stable/torch.html#torch.randn\" rel=\"nofollow noreferrer\">pytorch.org/docs/stable/torch.html#torch.randn</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "edited": false, "score": 0, "creation_date": 1548883853, "post_id": 54449809, "comment_id": 95708439, "body": "Where is the &#39;<b>call</b>&#39; method?"}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548883878, "post_id": 54449809, "comment_id": 95708451, "body": "<a href=\"https://pytorch.org/docs/stable/_modules/torch/nn/modules/module.html#Module\" rel=\"nofollow noreferrer\">pytorch.org/docs/stable/_modules/torch/nn/modules/&hellip;</a>  -  search <code>__call__</code>"}], "tags": [], "owner": {"reputation": 153, "user_id": 9253874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3e51820942c61b16b4e51ed885f6c0?s=128&d=identicon&r=PG&f=1", "display_name": "stefan", "link": "https://stackoverflow.com/users/9253874/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1548883875, "last_edit_date": 1548883875, "creation_date": 1548883671, "answer_id": 54449809, "question_id": 54449713, "link": "https://stackoverflow.com/questions/54449713/how-is-the-parameter-passed-into-the-constructor/54449809#54449809", "title": "How is the parameter passed into the constructor?", "body": "<pre><code>net = Net()\n</code></pre>\n\n<p>calls the <code>__init__</code> method without a argument.</p>\n\n<pre><code>out = net(input)\n</code></pre>\n\n<p>calls the <code>__call__</code> method with <code>input</code> as argument.\nSince <code>Net</code> does not implemented this, it must be implemented in the base class <code>nn.Module</code></p>\n\n<p><a href=\"https://pytorch.org/docs/stable/_modules/torch/nn/modules/module.html#Module\" rel=\"nofollow noreferrer\">here</a> you can find the sources of <code>nn.Module</code> and there is <code>__call__</code> defined with <code>input</code> as parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 8469, "user_id": 2504762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af5ca9c20dafdb1e4e1005468fdf75f7?s=128&d=identicon&r=PG", "display_name": "Gaurang Shah", "link": "https://stackoverflow.com/users/2504762/gaurang-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1548884294, "creation_date": 1548884294, "answer_id": 54449942, "question_id": 54449713, "link": "https://stackoverflow.com/questions/54449713/how-is-the-parameter-passed-into-the-constructor/54449942#54449942", "title": "How is the parameter passed into the constructor?", "body": "<p>you are not passing an argument to a <code>Class</code> you are passing an argument to <code>object</code>. There is difference. </p>\n\n<p>Following example shows how to achieve this. You need to implement <code>__call__</code> method. </p>\n\n<pre><code>class CallableClass:\n    def __init__(self):\n        pass\n\n\n    def __call__(self, *args, **kwargs):\n        print(args)\n\n\nclass Net(CallableClass):\n    def __init__(self):\n        super(Net, self).__init__()\n        pass\n\nnet = Net()\nnet(100)\n</code></pre>\n"}], "owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 54449809, "answer_count": 2, "score": 0, "last_activity_date": 1548884294, "creation_date": 1548883216, "question_id": 54449713, "link": "https://stackoverflow.com/questions/54449713/how-is-the-parameter-passed-into-the-constructor", "title": "How is the parameter passed into the constructor?", "body": "<p>This code:</p>\n\n<pre><code>class Net(nn.Module):\n    def __init__(self):\n        super(Net, self).__init__()\n\n        self.conv1 = nn.Conv2d(1,6,5)\n        self.conv2 = nn.Conv2d(6, 16, 5)\n        self.fc1 = nn.Linear(16*5*5, 120)\n        self.fc2 = nn.Linear(120, 84)\n        self.fc3 = nn.Linear(84, 10)\n\n     def forward(self, x):\n            x = F.max_pool2d(F.relu(self.conv1(x)), (2,2))\n            x = F.max_pool2d(F.relu(self.conv2(x)), 2)\n            x = x.view(-1, self.num_flat_features(x))\n            x = F.relu(self.fc1(x))\n            x = F.relu(self.fc2(x))\n            x = self.fc3(x)\n\n            return x\n\n    def num_flat_features(self, x):\n        size = x.size()[1:]\n        num_features = 1\n        for s in size:\n            num_features *= s\n\n        return num_features\n\nnet = Net()\n\ninput = torch.randn(1,1,32,32)\nout = net(input)\n\nprint(out)\n</code></pre>\n\n<p>I am learning python and trying to understand how this constructor works. My questions are these 2 lines:</p>\n\n<pre><code>input = torch.randn(1,1,32,32)\nout = net(input)\n</code></pre>\n\n<p>In the <strong>init</strong> initialization, I can't see how the 'input' is used for initialization. </p>\n"}, {"tags": ["python", "file", "text", "python-3.7"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1548883527, "post_id": 54449663, "comment_id": 95708295, "body": "It looks like you&#39;re just appending data to the file. Is that what you want to know, or will the &quot;edits&quot; involve other things like changing existing lines or deleting some of them."}, {"owner": {"reputation": 504, "user_id": 10089328, "user_type": "registered", "profile_image": "https://graph.facebook.com/2161565864080010/picture?type=large", "display_name": "Lucas Hort", "link": "https://stackoverflow.com/users/10089328/lucas-hort"}, "edited": false, "score": 0, "creation_date": 1548883829, "post_id": 54449663, "comment_id": 95708430, "body": "You need to split the lines to get the columns. <code>line.split(&#39;,&#39;)</code> will generate a vector with 3 index... To write with 3 columns : file1,write(firstcolumn + &#39;, &#39; + secondcolumn + &#39;, &#39; + thirdcolumn)"}, {"owner": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "edited": false, "score": 0, "creation_date": 1548884072, "post_id": 54449663, "comment_id": 95708531, "body": "I was trying to split the line, but then I got strings and I don&#39;t know how to make the first column with that, also there were problems with adding those values to new list"}, {"owner": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "edited": false, "score": 0, "creation_date": 1548884298, "post_id": 54449663, "comment_id": 95708613, "body": "I don&#39;t care if I got a new file (file_2.txt for example) with these 10 rows and 3 columns, or I append additional 5 rows to existing file."}, {"owner": {"reputation": 1058, "user_id": 6659095, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c632542e2d79eb46c23e26044828385b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.cysl", "link": "https://stackoverflow.com/users/6659095/mr-cysl"}, "edited": false, "score": 0, "creation_date": 1548884345, "post_id": 54449663, "comment_id": 95708632, "body": "@CroSimpson2.0 Please see my answer below."}, {"owner": {"reputation": 934, "user_id": 3629284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce149d07ecada6f0ec130900e3dfed8?s=128&d=identicon&r=PG&f=1", "display_name": "Debendra", "link": "https://stackoverflow.com/users/3629284/debendra"}, "edited": false, "score": 0, "creation_date": 1548884916, "post_id": 54449663, "comment_id": 95708833, "body": "I have solved in just 3 lines of code. See my answer below."}, {"owner": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "edited": false, "score": 0, "creation_date": 1548885507, "post_id": 54449663, "comment_id": 95709041, "body": "Thank you all for these answers! I&#39;ve been trying to solve this problem for an hour and you did it in 3 minutes! Thx again:)"}, {"owner": {"reputation": 934, "user_id": 3629284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce149d07ecada6f0ec130900e3dfed8?s=128&d=identicon&r=PG&f=1", "display_name": "Debendra", "link": "https://stackoverflow.com/users/3629284/debendra"}, "edited": false, "score": 0, "creation_date": 1548912860, "post_id": 54449663, "comment_id": 95716054, "body": "Sorry, I was having late night, didn&#39;t checked my code. my 3 lines codes just works fine now."}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 3629284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce149d07ecada6f0ec130900e3dfed8?s=128&d=identicon&r=PG&f=1", "display_name": "Debendra", "link": "https://stackoverflow.com/users/3629284/debendra"}, "is_accepted": false, "score": 0, "last_activity_date": 1548912755, "last_edit_date": 1548912755, "creation_date": 1548883641, "answer_id": 54449802, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54449802#54449802", "title": "How to edit a text file?", "body": "<p>Short and easy. Just 3 lines.</p>\n\n<pre><code>with open('file_1.txt', 'r+') as f:\n    for num, content in enumerate(f.readlines()):\n        f.write(f'{num+6}, {content[3:]}')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "edited": false, "score": 0, "creation_date": 1548884509, "post_id": 54449832, "comment_id": 95708695, "body": "Thx for a suggestion. If you know any other way without this module, I would like to see it."}, {"owner": {"reputation": 1058, "user_id": 6659095, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c632542e2d79eb46c23e26044828385b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.cysl", "link": "https://stackoverflow.com/users/6659095/mr-cysl"}, "reply_to_user": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "edited": false, "score": 0, "creation_date": 1548884697, "post_id": 54449832, "comment_id": 95708764, "body": "@CroSimpson2.0 There are a couple of working solutions without pandas below. However, pandas is one of the most powerful (and standard) libs (along with numpy, scipy, etc.) for data pipeline and you should definitely try to use it, as it is way simpler to use."}], "tags": [], "owner": {"reputation": 1058, "user_id": 6659095, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c632542e2d79eb46c23e26044828385b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.cysl", "link": "https://stackoverflow.com/users/6659095/mr-cysl"}, "is_accepted": false, "score": 2, "last_activity_date": 1548884138, "last_edit_date": 1548884138, "creation_date": 1548883811, "answer_id": 54449832, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54449832#54449832", "title": "How to edit a text file?", "body": "<p>If this is a csv-like file, you may want to use pandas (which is one of the best ways for dataframe manipulation). A quick example:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv(\"&lt;path_to_data_file&gt;\", header=None)\ndf = pd.concat([df, df])\ndf[0] = list(range(1, 11))\ndf.to_csv(\"result.csv\", header=None, index=None)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1769, "user_id": 5435253, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/C0nBl.png?s=128&g=1", "display_name": "CSMaverick", "link": "https://stackoverflow.com/users/5435253/csmaverick"}, "is_accepted": false, "score": 0, "last_activity_date": 1548883991, "creation_date": 1548883991, "answer_id": 54449869, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54449869#54449869", "title": "How to edit a text file?", "body": "<p>Pythonic-way: It'll append the newlines to the file.</p>\n\n<pre><code>with open('sample.txt', 'r') as f:\nl = [i.strip() for i in f.readlines()]\nmax_row = int(l[-1].split(',')[0])\n\nx = [str(i) for i in range(max_row+1,11)]\ny = [i.split(',', 1)[-1] for i in l]\n\nwith open('sample.txt', 'a') as f:\n    for item in [x[i]+',' + y[i] for i in range(len(x))]:\n        f.write(\"%s\\n\" % item)\n</code></pre>\n\n<p>PS: max row can be length of the number of lines</p>\n"}, {"tags": [], "owner": {"reputation": 5515, "user_id": 4946896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbe7e09627974c401e4eca85d23cefe5?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4946896/rafael"}, "is_accepted": false, "score": 0, "last_activity_date": 1548884065, "creation_date": 1548884065, "answer_id": 54449891, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54449891#54449891", "title": "How to edit a text file?", "body": "<p>Another way:</p>\n\n<pre><code>with open(\"test.txt\", \"r+\") as file1:\n    lines = file1.readlines()\n    index = 0\n    i = 6\n    imax = 10\n    while i &lt;= imax:\n        sentence = lines[index].split(\", \")[1:]\n        sentence.insert(0, str(i))\n        file1.write(\", \".join(sentence))\n        i += 1\n        index += 1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1, 10, 20\n2, 20, 30\n3, 30, 50\n4, 35, 60\n5, 50, 100\n6, 10, 20\n7, 20, 30\n8, 30, 50\n9, 35, 60\n10, 50, 100\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 0, "last_activity_date": 1548884230, "creation_date": 1548884230, "answer_id": 54449929, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54449929#54449929", "title": "How to edit a text file?", "body": "<p>First, you need to read all data from the input, and store it.</p>\n\n<p>Then go through it again and write it to the file.</p>\n\n<pre><code>data = []\n\nwith open(\"file_1.txt\", \"r+\") as file1:\n\n    # read the data\n\n    for line in file1:\n        # .strip() to remove the newline\n        # .split(\", \") to split into 3 values\n        # map(int, ...) to convert each from string to integer\n        index, column2, column3 = map(int, line.strip().split(\", \"))\n\n        #save the second and third coluumn\n        data.append((column2, column3))\n\n    # now write it back again:\n\n    for column2, column3 in data:\n        index += 1  # continue incrementing the index\n\n        # format the lines and write them into the file\n        file1.write(\"{}, {}, {}\\n\".format(index, column2, column3))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "edited": false, "score": 0, "creation_date": 1549021456, "post_id": 54449964, "comment_id": 95764452, "body": "Hi Alex! I was going throughout your code and I can&#39;t fully understand it. Can you please tell me why did you write colon at the line where you were using find method ?"}, {"owner": {"reputation": 376, "user_id": 4581085, "user_type": "registered", "profile_image": "https://graph.facebook.com/8836527/picture?type=large", "display_name": "Alex F", "link": "https://stackoverflow.com/users/4581085/alex-f"}, "reply_to_user": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "edited": false, "score": 0, "creation_date": 1549052136, "post_id": 54449964, "comment_id": 95779850, "body": "@CroSimpson2.0 sorry for the opaque code, hopefully this new edit is a bit better.  <code>str[a:]</code> will return a substring starting with the a&#39;th character until the end of the string (ex: <code>&#39;hello&#39;[3:] # returns &#39;lo&#39;</code>), so I&#39;ve used this to extract Cols 2 &amp; 3 by finding the first comma position"}], "tags": [], "owner": {"reputation": 376, "user_id": 4581085, "user_type": "registered", "profile_image": "https://graph.facebook.com/8836527/picture?type=large", "display_name": "Alex F", "link": "https://stackoverflow.com/users/4581085/alex-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1549052462, "last_edit_date": 1549052462, "creation_date": 1548884416, "answer_id": 54449964, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54449964#54449964", "title": "How to edit a text file?", "body": "<p>This approach works directly with each line as a string, without splitting any more columns than necessary.</p>\n\n<p>The first for loop extacts Cols 2&amp;3 (with leading comma) into a List, tracking the line count. The second loop appends this list incrementing index starting with the count.</p>\n\n<pre><code>with open(\"file_1.txt\", \"r+\") as file1:\n    our_data = []\n    count = 0\n    for line in file1:\n        first_comma_pos = line.find(',')\n        # extract cols 2&amp;3 including the leading comma\n        our_data.append(line[first_comma_pos:])\n        count += 1\n\n    for i in range(count):\n        sentence = str(i + count) + our_data[i] + '\\n'\n        file1.write(sentence)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 5632532, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203879087177665/picture?type=large", "display_name": "Mirek Machura", "link": "https://stackoverflow.com/users/5632532/mirek-machura"}, "is_accepted": true, "score": 0, "last_activity_date": 1548885094, "last_edit_date": 1548885094, "creation_date": 1548884790, "answer_id": 54450034, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54450034#54450034", "title": "How to edit a text file?", "body": "<p>Script below will build new file and you can set number of lines that you want to create.</p>\n\n<p>First all lines are read from input file and then it writes number of lines you set to new file.</p>\n\n<p><code>list_emitter</code> can infinitely yield items from given list, so you can just adjust <code>output_lines_count</code> variable to make your output file even bigger.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def list_emitter(l):\n    \"\"\"This generator will endlessly yield items from given list.\"\"\"\n    while True:\n        for item in l:\n            yield item\n\n\nwith open('file_1.txt') as input_file:\n    lines = input_file.readlines()    # Create list of lines\n\nwith open('output_file.txt', 'w') as output_file:\n    output_lines_count = 10 # Set how many output lines you want\n    for counter, line in enumerate(list_emitter(lines)):\n        if counter == output_lines_count:\n            break\n        first, second, third = line.strip().split() # Parse line\n        output_file.write('{}, {} {}\\n'.format(counter+1, second, third))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 6420136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/983c6ca38b846df42359f133994e719a?s=128&d=identicon&r=PG", "display_name": "rudevdr", "link": "https://stackoverflow.com/users/6420136/rudevdr"}, "is_accepted": false, "score": 0, "last_activity_date": 1548886075, "creation_date": 1548886075, "answer_id": 54450311, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file/54450311#54450311", "title": "How to edit a text file?", "body": "<p>This module also works:</p>\n\n<pre><code>def edit(nrows, filename):\n    nrows +=1 #to avoid off-by-one error because dealing with lists\n\n    outf = open(filename, 'a')\n\n    column_1 = [1, 2, 3, 4, 5]\n    column_2 = [10, 20, 30, 35, 50]\n    column_3 = [20, 30, 50, 60, 100]\n\n    last_column_1 = column_1[-1]\n    list_1 = list(range(last_column_1+1, last_column_1+nrows))\n    list_2 = nrows//len(column_2)*column_2 + column_2[0:nrows%len(column_2)]\n    list_3 = nrows//len(column_3)*column_3 + column_3[0:nrows%len(column_3)]\n\n    for c1, c2, c3 in zip(list_1, list_2, list_3):\n        outf.write(\"{}, {}, {}\\n\".format(c1, c2, c3))\n\nif __name__ == '__main__':\n    edit(10, 'file.txt')\n</code></pre>\n\n<p>Assuming there is a <code>file.txt</code> with text:</p>\n\n<pre><code>1, 10, 20\n2, 20, 30\n3, 30, 50\n4, 35, 60\n5, 50, 100\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8344534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df153330d79e99aca5ed2ccefda0dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cro Simpson2.0", "link": "https://stackoverflow.com/users/8344534/cro-simpson2-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1475, "favorite_count": 0, "accepted_answer_id": 54450034, "answer_count": 8, "score": 0, "last_activity_date": 1549052462, "creation_date": 1548882977, "last_edit_date": 1548883360, "question_id": 54449663, "link": "https://stackoverflow.com/questions/54449663/how-to-edit-a-text-file", "title": "How to edit a text file?", "body": "<p>I am trying to edit a text file in python 3.7. Basically, I have a text file (file_1.txt) that contains numbers - 3 columns and 5 rows like this one</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1, 10, 20\n2, 20, 30\n3, 30, 50\n4, 35, 60\n5, 50, 100\n</code></pre>\n\n<p>I would like to edit that file in order to get something a little bit different, basically this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1, 10, 20\n2, 20, 30\n3, 30, 50\n4, 35, 60\n5, 50, 100\n6, 10, 20\n7, 20, 30\n8, 30, 50\n9, 35, 60\n10, 50, 100\n</code></pre>\n\n<p>The second and third column are copied, and the first column is continuing with numbers, adding one each new line.\nI was trying to do this but I wasn't successful. Here is what I've tried:</p>\n\n<pre><code>with open(\"file_1.txt\", \"r+\") as file1:\n    file1.read()\n    i = 6\n    imax = 10\n    while i &lt;= imax:\n        sentence = str(i) + \"\\n\"\n        file1.write(sentence)\n        i = i + 1\n</code></pre>\n\n<p>I don't understand how to copy the second and third column.</p>\n\n<p>Does anyone know how to do this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4731, "user_id": 1467926, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e0148d321d2f35a32f9c93d1d5dac478?s=128&d=identicon&r=PG&f=1", "display_name": "Fermat&#39;s Little Student", "link": "https://stackoverflow.com/users/1467926/fermats-little-student"}, "edited": false, "score": 1, "creation_date": 1548883144, "post_id": 54449659, "comment_id": 95708138, "body": "first of all, 2*2*2 is an expression, not equation"}, {"owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "edited": false, "score": 0, "creation_date": 1548883241, "post_id": 54449659, "comment_id": 95708176, "body": "What Python version? Either <code>python --version</code> from cmd line or run a script containing: <code>import sys; print(sys.version)</code>"}, {"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "edited": false, "score": 1, "creation_date": 1548883534, "post_id": 54449659, "comment_id": 95708303, "body": "Note <code>print &quot;2*2*2&quot;</code> returns <code>&quot;2*2*2&quot;</code> because <code>&quot;...&quot;</code> indicates a string of text and not an expression. In other-words it&#39;s doing exactly as you told it to do."}], "answers": [{"tags": [], "owner": {"reputation": 835, "user_id": 4629624, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/218b21a18c900e28e458c815f9c04f5b?s=128&d=identicon&r=PG&f=1", "display_name": "V. Brunelle", "link": "https://stackoverflow.com/users/4629624/v-brunelle"}, "is_accepted": false, "score": 0, "last_activity_date": 1548883909, "last_edit_date": 1548883909, "creation_date": 1548883332, "answer_id": 54449734, "question_id": 54449659, "link": "https://stackoverflow.com/questions/54449659/how-to-calculate-equations-in-python-eg-222/54449734#54449734", "title": "How to calculate equations in python? (eg. 2*2*2)", "body": "<p>In the python shell (type <code>python</code> in terminal or cmd), type </p>\n\n<pre><code>print(2*2*2)\n</code></pre>\n\n<p>to print the result.\nYou can also type </p>\n\n<pre><code>2*2*2\n</code></pre>\n\n<p>and it will print <code>8</code> again.\nThis should work. Write the same line in a script and it will work too. However, in a script, you can't just type 2*2*2 to print the results, you need to use <code>print()</code>.</p>\n\n<p>If instead of writnig 2*2*2, you need to do something like 1+2+3+4+5, which is a sum on a list like <code>list=[1,2,3,4,5]</code>, simply write</p>\n\n<pre><code>sum(list)\n</code></pre>\n\n<p>If you want to do the sum of some elements in a dictionary like <code>d={1:2,2:4,3:8,4:16,5:32,6:64}</code> on the element from 3 to 5 inclusively, do</p>\n\n<pre><code>sum(d[i] for i in range(3, 5 + 1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 7563100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806dccda0be008ac6cc82b35dfc4c84b?s=128&d=identicon&r=PG&f=1", "display_name": "TPereira", "link": "https://stackoverflow.com/users/7563100/tpereira"}, "is_accepted": false, "score": 0, "last_activity_date": 1548883398, "creation_date": 1548883398, "answer_id": 54449747, "question_id": 54449659, "link": "https://stackoverflow.com/questions/54449659/how-to-calculate-equations-in-python-eg-222/54449747#54449747", "title": "How to calculate equations in python? (eg. 2*2*2)", "body": "<p>Either don't pass it as string like:</p>\n\n<p>Python 3</p>\n\n<pre><code>print(2*2*2) \n</code></pre>\n\n<p>Python 2</p>\n\n<pre><code>print 2*2*2\n</code></pre>\n\n<p>Or use eval function, like:</p>\n\n<pre><code>print(eval(\"2*2*2\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 810, "user_id": 10989396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4caa8f53ec0ebff61132b4cb58539467?s=128&d=identicon&r=PG&f=1", "display_name": "hyperTrashPanda", "link": "https://stackoverflow.com/users/10989396/hypertrashpanda"}, "is_accepted": false, "score": 0, "last_activity_date": 1548883601, "creation_date": 1548883601, "answer_id": 54449790, "question_id": 54449659, "link": "https://stackoverflow.com/questions/54449659/how-to-calculate-equations-in-python-eg-222/54449790#54449790", "title": "How to calculate equations in python? (eg. 2*2*2)", "body": "<p>First of all, check your Python version, by running <code>python --version</code>.</p>\n\n<p>In Python 2.x, <code>print</code> can be called without parentheses, but one of the main changes in Python 3.x is that <code>print(...)</code> requires them.</p>\n\n<p>Python is a dynamic language, where types are inferred from their use. \"2*2*2\" is a <em>string type</em>, that depending on your version you can be printed by using either <code>print \"2*2*2\"</code>, or <code>print(\"2*2*2\")</code>.</p>\n\n<p>The returned data types can sometimes be confusing</p>\n\n<pre><code>Python 2.7.12 (default, Dec  4 2017, 14:50:18)\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;\n&gt;&gt;&gt; 2*2*2      # This will return an integer\n8\n&gt;&gt;&gt; 2.*2.*2.   # This will return a floating-point number\n8.0\n&gt;&gt;&gt; \"2*2*2\"    # This will return the literal string\n'2*2*2'\n&gt;&gt;&gt; 2*\"hello\"  # This will again, return a string\n'hellohello'\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10746834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AdVsyfEpN9o/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hLatsaa_zpIzS9CKzF893JvzvAdg/mo/photo.jpg?sz=128", "display_name": "IDontKnowWhatImDoing", "link": "https://stackoverflow.com/users/10746834/idontknowwhatimdoing"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "closed_date": 1548884481, "answer_count": 3, "score": -2, "last_activity_date": 1548883909, "creation_date": 1548882963, "question_id": 54449659, "link": "https://stackoverflow.com/questions/54449659/how-to-calculate-equations-in-python-eg-222", "closed_reason": "Duplicate", "title": "How to calculate equations in python? (eg. 2*2*2)", "body": "<p>can anyone give me the code needed to calculate sums and equations in python?\nE.g 2*2*2</p>\n\n<p>I have tried things such as </p>\n\n<p>Print \"2*2*2\"\nand such</p>\n\n<p>nothing gave me an answer</p>\n"}, {"tags": ["python", "json"], "answers": [{"tags": [], "owner": {"reputation": 18540, "user_id": 7434365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h6XG2.jpg?s=128&g=1", "display_name": "Joe Iddon", "link": "https://stackoverflow.com/users/7434365/joe-iddon"}, "is_accepted": false, "score": 2, "last_activity_date": 1548883430, "creation_date": 1548883430, "answer_id": 54449754, "question_id": 54449650, "link": "https://stackoverflow.com/questions/54449650/unable-to-extract-key-value-from-json-string-using-python/54449754#54449754", "title": "Unable to extract key/value from JSON string using Python", "body": "<p>One of your lines currently reads <code>r.json()</code>. This parses the result of the request as a JSON string and <strong>returns the result</strong> which you are not assigning to any variable.</p>\n\n<p>Instead try something like:</p>\n\n<pre><code>import requests\nr = requests.get('http://api.open-notify.org/iss-now.json?print=pretty')\nr_json = r.json()\nprint('message:', r_json['message'])\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>message: success\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9388559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee3fa32fc5fe43ece0455f4e45b5c3b?s=128&d=identicon&r=PG", "display_name": "JonnyNewo", "link": "https://stackoverflow.com/users/9388559/jonnynewo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548883430, "creation_date": 1548882931, "question_id": 54449650, "link": "https://stackoverflow.com/questions/54449650/unable-to-extract-key-value-from-json-string-using-python", "title": "Unable to extract key/value from JSON string using Python", "body": "<p>I can't figure out how to print a specific key/value from a string of JSON data after using requests.get. My understanding is that, when using request.get, the data is formatted as a dictionary by Python. As such, I thought I would be able to print any key/value I wanted by treating it like a normal dictionary: x = thisdict[\"brand\"]. So far I've only managed to get it to print the full JSON string, which isn't what I need.</p>\n\n<pre><code>import requests\n\n# Pulling ISS position data as json string.\nr = requests.get('http://api.open-notify.org/iss-now.json?print=pretty')\nr.json()\n\n# Printing\nprint (r.text)\n</code></pre>\n\n<p>How would I print the current key/value ('message': 'status') from the json string?</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "numba"], "comments": [{"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1548964996, "post_id": 54449631, "comment_id": 95744667, "body": "From your question, I take it this is being called multiple times?  If that&#39;s the case you can speed things up immensely by using the <code>set_data</code> method of an existing line in matplotlib."}, {"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "reply_to_user": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1548970932, "post_id": 54449631, "comment_id": 95747164, "body": "@user2699  Yes, that is exactly what I do with the output of this function.  What I posted is the main bottleneck because it gets called frequently as I pan around.  However, I did change the outer part of this code (not shown) so that it gets called less frequently by buffering more date beyond the x-limits of the plot.  So it only has to re-calc when you pan beyond a certain limit.  That has helped the user experience a good bit."}, {"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1548973890, "post_id": 54449631, "comment_id": 95748218, "body": "I&#39;ve faced similar problems (although on less than 100 million points), and can include part of the code I&#39;ve written that&#39;s relevant.  What I found most effective is caching the downsampled signal and only downsampling when it makes a substantial difference in the view. As long as the data is (somewhat) uniformly sampled having exact x points is irrelevant."}, {"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "reply_to_user": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1548975818, "post_id": 54449631, "comment_id": 95748844, "body": "@user2699 I would like to see how you do the caching .  I am doing something like that now.  Basically loading data beyond the x limits by some amount and making the point density a bit more than needed.  Then it triggers a new recalc only if you zoom in far enough that the point density gets  low or if you pan beyond the buffers edge.  I would like to see how someone else does it since I made most of it up and I know there are some logic holes.  Mine will needlessly recalc sometimes."}, {"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 0, "creation_date": 1548978590, "post_id": 54449631, "comment_id": 95749649, "body": "I&#39;ve included it in an answer.  Let me know how it works for you, it&#39;s been pretty robust in my use but there may be issues I&#39;ve missed."}], "answers": [{"comments": [{"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1548952115, "post_id": 54462769, "comment_id": 95738109, "body": "Nice indexing trick and avoiding the mask.  I wouldn&#39;t have thought that <code>sort</code> would be faster. I am getting 87, 421, and 338ms for v1, v2, and v3.  I&#39;d like to get it back to that sub 100ms range but I&#39;ll take every improvement I can get.   However, I did notice the code above will error if x is not exactly num_bin*pts_per_bin elements long ... which is often.  That is why I was doing <code>y_temp = y[:num_bins*pts_per_bin].reshape</code>"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1548957717, "post_id": 54462769, "comment_id": 95741176, "body": "@AeroEngy You&#39;re right, included that. Could you check the timing result when you return right after the <code>arg(min|max)</code> calls in order to see the contribution from the following call to <code>sort</code>? There are different ways to merge the indices but on my machine it really didn&#39;t matter."}, {"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1548958355, "post_id": 54462769, "comment_id": 95741533, "body": "I ran it through a profile and got 339ms total (142ms for <code>argmax</code> &amp; 196ms for <code>argmin</code>).  The <code>sort</code> was trivial at 45us.  So I think you have removed all other overhead. To do it any faster would require some unknown new approach."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 1, "creation_date": 1548966917, "post_id": 54462769, "comment_id": 95745489, "body": "@AeroEngy Maybe you could follow <a href=\"https://stackoverflow.com/a/12200671/3767239\">this approach</a> in order to compile your own <code>argmin_max</code> function that computes the argmin and argmax in one go instead of iterating over the array twice. For an array of that size the difference should be measurable."}, {"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1548972435, "post_id": 54462769, "comment_id": 95747720, "body": "Thanks for the link!  I&#39;m going to first try to make a numba version of a single pass argminmax to see how it compares.  I haven&#39;t used numba or cython before but it looks interesting.  I&#39;m a recent convert to Python from Matlab so I am used to speeding up code with MEX which seem like a similar idea."}, {"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1548990309, "post_id": 54462769, "comment_id": 95752321, "body": "Using your answer + that link helped me make a nice &amp; fast version with numba.  I posted it as a separate answer for posterity but will except your answer since you lead me down the correct path.  Thanks again!"}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": true, "score": 3, "last_activity_date": 1548957585, "last_edit_date": 1548957585, "creation_date": 1548944937, "answer_id": 54462769, "question_id": 54449631, "link": "https://stackoverflow.com/questions/54449631/improve-min-max-downsampling/54462769#54462769", "title": "Improve min/max downsampling", "body": "<p>I managed to get an improved performance by using the output of <code>arg(min|max)</code> directly to index the data arrays. This comes at the cost of an extra call to <code>np.sort</code> but the axis to be sorted has only two elements (the min. / max. indices) and the overall array is rather small (number of bins):</p>\n\n<pre><code>def min_max_downsample_v3(x, y, num_bins):\n    pts_per_bin = x.size // num_bins\n\n    x_view = x[:pts_per_bin*num_bins].reshape(num_bins, pts_per_bin)\n    y_view = y[:pts_per_bin*num_bins].reshape(num_bins, pts_per_bin)\n    i_min = np.argmin(y_view, axis=1)\n    i_max = np.argmax(y_view, axis=1)\n\n    r_index = np.repeat(np.arange(num_bins), 2)\n    c_index = np.sort(np.stack((i_min, i_max), axis=1)).ravel()\n\n    return x_view[r_index, c_index], y_view[r_index, c_index]\n</code></pre>\n\n<p>I checked the timings for your example and I obtained:</p>\n\n<ul>\n<li><code>min_max_downsample_v1</code>: 110 ms \u00b1 5 ms</li>\n<li><code>min_max_downsample_v2</code>: 240 ms \u00b1 8.01 ms</li>\n<li><code>min_max_downsample_v3</code>: 164 ms \u00b1 1.23 ms</li>\n</ul>\n\n<p>I also checked returning directly after the calls to <code>arg(min|max)</code> and the result was equally 164 ms, i.e. there's no real overhead after that anymore.</p>\n"}, {"comments": [{"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1548988174, "post_id": 54470935, "comment_id": 95751877, "body": "Thanks, I didn&#39;t consider storing down-sampled version at different factors like that for later use.  I&#39;ll probably borrow that and incorporate it into my routine."}], "tags": [], "owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "is_accepted": false, "score": 2, "last_activity_date": 1548978496, "creation_date": 1548978496, "answer_id": 54470935, "question_id": 54449631, "link": "https://stackoverflow.com/questions/54449631/improve-min-max-downsampling/54470935#54470935", "title": "Improve min/max downsampling", "body": "<p>So this doesn't address speeding up the specific function in question, but it does show a few ways of plotting a line with a large number of points somewhat effectively.\nThis assumes that the x points are ordered and uniformly (or close to uniformly) sampled.</p>\n\n<p>Setup </p>\n\n<pre><code>from pylab import *\n</code></pre>\n\n<p>Here's a function I like that reduces the number of points by randomly choosing one in each interval.\nIt isn't guaranteed to show every peak in the data, but it doesn't have as many problems as directly decimating the data, and is fast.</p>\n\n<pre><code>def calc_rand(y, factor):\n    split = y[:len(y)//factor*factor].reshape(-1, factor)\n    idx = randint(0, split.shape[-1], split.shape[0])\n    return split[arange(split.shape[0]), idx]\n</code></pre>\n\n<p>And here's the min and max to see the signal envelope</p>\n\n<pre><code>def calc_env(y, factor):\n    \"\"\"\n    y : 1D signal\n    factor : amount to reduce y by (actually returns twice this for min and max)\n    Calculate envelope (interleaved min and max points) for y\n    \"\"\"\n    split = y[:len(y)//factor*factor].reshape(-1, factor)\n    upper = split.max(axis=-1)\n    lower = split.min(axis=-1)\n    return c_[upper, lower].flatten()\n</code></pre>\n\n<p>The following function can take either of these, and uses them to reduce the data being drawn.\nThe number of points actually taken is 5000 by default, which should far exceed a monitor's resolution.\nData is cached after it's reduced.\nMemory may be an issue, especially with large amounts of data, but it shouldn't exceed the amount required by the original signal.</p>\n\n<pre><code>def plot_bigly(x, y, *, ax=None, M=5000, red=calc_env, **kwargs):\n    \"\"\"\n    x : the x data\n    y : the y data\n    ax : axis to plot on\n    M : The maximum number of line points to display at any given time\n    kwargs : passed to line\n    \"\"\"\n    assert x.shape == y.shape, \"x and y data must have same shape!\"\n    if ax is None:\n        ax = gca()\n\n    cached = {}\n\n    # Setup line to be drawn beforehand, note this doesn't increment line properties so\n    #  style needs to be passed in explicitly\n    line = plt.Line2D([],[], **kwargs)\n    def update(xmin, xmax):\n        \"\"\"\n        Update line data\n\n        precomputes and caches entire line at each level, so initial\n        display may be slow but panning and zooming should speed up after that\n        \"\"\"\n        # Find nearest power of two as a factor to downsample by\n        imin = max(np.searchsorted(x, xmin)-1, 0)\n        imax = min(np.searchsorted(x, xmax) + 1, y.shape[0])\n        L = imax - imin + 1\n        factor = max(2**int(round(np.log(L/M) / np.log(2))), 1)\n\n        # only calculate reduction if it hasn't been cached, do reduction using nearest cached version if possible\n        if factor not in cached:\n            cached[factor] = red(y, factor=factor)\n\n        ## Make sure lengths match correctly here, by ensuring at least\n        #   \"factor\" points for each x point, then matching y length\n        #  this assumes x has uniform sample spacing - but could be modified\n        newx = x[imin:imin + ((imax-imin)//factor)* factor:factor]\n        start = imin//factor\n        newy = cached[factor][start:start + newx.shape[-1]]\n        assert newx.shape == newy.shape, \"decimation error {}/{}!\".format(newx.shape, newy.shape)\n\n        ## Update line data\n        line.set_xdata(newx)\n        line.set_ydata(newy)\n\n    update(x[0], x[-1])\n    ax.add_line(line)\n    ## Manually update limits of axis, as adding line doesn't do this\n    #   if drawing multiple lines this can quickly slow things down, and some\n    #   sort of check should be included to prevent unnecessary changes in limits\n    #   when a line is first drawn.\n    ax.set_xlim(min(ax.get_xlim()[0], x[0]), max(ax.get_xlim()[1], x[1]))\n    ax.set_ylim(min(ax.get_ylim()[0], np.min(y)), max(ax.get_ylim()[1], np.max(y)))\n\n    def callback(*ignore):\n        lims = ax.get_xlim()\n        update(*lims)\n\n    ax.callbacks.connect('xlim_changed', callback)\n\n    return [line]\n</code></pre>\n\n<p>Here's some test code</p>\n\n<pre><code>L=int(100e6)\nx=linspace(0,1,L)\ny=0.1*randn(L)+sin(2*pi*18*x)\nplot_bigly(x,y, red=calc_env)\n</code></pre>\n\n<p>On my machine this displays very quickly.  Zooming has a bit of lag, especially when it's by a large amount.  Panning has no issues.  Using random selection instead of the min and max is quite a bit faster, and only has issues on very high levels of zoom.</p>\n"}, {"comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1549040354, "post_id": 54472283, "comment_id": 95774940, "body": "That&#39;s awesome! I wasn&#39;t aware that with Numba you can do it all in Python. The resulting code is super easy to read and integrating it is just a decorator away. Thanks for sharing the code :-)"}, {"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1549045870, "post_id": 54472283, "comment_id": 95777387, "body": "@a_guest I was very surprised with how easy it was to use.  Before I added the <code>prange</code> and <code>parallel=True</code>  the time was ~86ms which made me happy.  After adding those it is amazing how much faster it is than Numpy alone. It does take about 1/2 second or so to compile on the first use but this gets called a lot so that doesn&#39;t matter at all."}], "tags": [], "owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "is_accepted": false, "score": 2, "last_activity_date": 1548991846, "last_edit_date": 1548991846, "creation_date": 1548990178, "answer_id": 54472283, "question_id": 54449631, "link": "https://stackoverflow.com/questions/54449631/improve-min-max-downsampling/54472283#54472283", "title": "Improve min/max downsampling", "body": "<p><strong>EDIT: Added parallel=True to numba ... even faster</strong></p>\n\n<p>I ended up making a hybrid of a single pass argmin+max routine and the improved indexing from @a_guest's answer and link to <a href=\"https://stackoverflow.com/questions/12200580/numpy-function-for-simultaneous-max-and-min\">this related simultaneous min max question</a>.</p>\n\n<p>This version returns the correct x-values for each min/max y pair and thanks to <code>numba</code> is a actually a little faster than the \"fast but not quite correct\" version. </p>\n\n<pre><code>from numba import jit, prange\n@jit(parallel=True)\ndef min_max_downsample_v4(x, y, num_bins):\n    pts_per_bin = x.size // num_bins\n    x_view = x[:pts_per_bin*num_bins].reshape(num_bins, pts_per_bin)\n    y_view = y[:pts_per_bin*num_bins].reshape(num_bins, pts_per_bin)    \n    i_min = np.zeros(num_bins,dtype='int64')\n    i_max = np.zeros(num_bins,dtype='int64')\n\n    for r in prange(num_bins):\n        min_val = y_view[r,0]\n        max_val = y_view[r,0]\n        for c in range(pts_per_bin):\n            if y_view[r,c] &lt; min_val:\n                min_val = y_view[r,c]\n                i_min[r] = c\n            elif y_view[r,c] &gt; max_val:\n                max_val = y_view[r,c]\n                i_max[r] = c                \n    r_index = np.repeat(np.arange(num_bins), 2)\n    c_index = np.sort(np.stack((i_min, i_max), axis=1)).ravel()        \n    return x_view[r_index, c_index], y_view[r_index, c_index]\n</code></pre>\n\n<p>Comparing the speeds using <code>timeit</code> shows the <code>numba</code> code is roughly 2.6x faster and providing better results that v1.  It is a little over 10x faster than doing numpy's argmin &amp; argmax in series. </p>\n\n<pre><code>%timeit min_max_downsample_v1(x_big ,y_big ,2000)\n96 ms \u00b1 2.46 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n\n%timeit min_max_downsample_v2(x_big ,y_big ,2000)\n507 ms \u00b1 4.75 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\n%timeit min_max_downsample_v3(x_big ,y_big ,2000)\n365 ms \u00b1 1.27 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\n%timeit min_max_downsample_v4(x_big ,y_big ,2000)\n36.2 ms \u00b1 487 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1549283412, "post_id": 54505741, "comment_id": 95835138, "body": "I did try pyqtgraph and it did seem faster.  It also has built in min/max downsampling routine which is nice.  However, I didn&#39;t really like it&#39;s plot mechanics.   If you read the question/answers you&#39;ll see that I am doing min/max with a reshape instead of array_split.  <code>reshape</code> has much less overhead since it returns a single view of the array.  <code>array_split</code> seems to return a <code>list</code> of views.  Splitting a 1e8 element array takes ~2ms while reshape is ~520ns ... so reshape is 3800x faster on my machine."}, {"owner": {"reputation": 325, "user_id": 11009349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lBAWp.png?s=128&g=1", "display_name": "danielhrisca", "link": "https://stackoverflow.com/users/11009349/danielhrisca"}, "reply_to_user": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "edited": false, "score": 0, "creation_date": 1549375860, "post_id": 54505741, "comment_id": 95873981, "body": "array_split is indeed a lot slower then reshaping"}], "tags": [], "owner": {"reputation": 325, "user_id": 11009349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lBAWp.png?s=128&g=1", "display_name": "danielhrisca", "link": "https://stackoverflow.com/users/11009349/danielhrisca"}, "is_accepted": false, "score": 0, "last_activity_date": 1549216312, "creation_date": 1549216312, "answer_id": 54505741, "question_id": 54449631, "link": "https://stackoverflow.com/questions/54449631/improve-min-max-downsampling/54505741#54505741", "title": "Improve min/max downsampling", "body": "<p>Did you try pyqtgraph for interactive plotting? It's more responsive than matplotlib.</p>\n\n<p>One trick I use for downsampling is to use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.array_split.html\" rel=\"nofollow noreferrer\">array_split</a> and compute min and max for the splits. The split is done according to the number of samples per pixel of the plot area. </p>\n"}], "owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1415, "favorite_count": 3, "accepted_answer_id": 54462769, "answer_count": 4, "score": 7, "last_activity_date": 1549216312, "creation_date": 1548882841, "last_edit_date": 1548990670, "question_id": 54449631, "link": "https://stackoverflow.com/questions/54449631/improve-min-max-downsampling", "title": "Improve min/max downsampling", "body": "<p>I have some large arrays (~100 million points) that I need to interactively plot.  I am currenlty using Matplotlib.   Plotting the arrays as-is gets very slow and is a waste since you can't visualize that many points anyway.</p>\n\n<p>So I made a min/max decimation function that I tied to the 'xlim_changed' callback of the axis.  I went with a min/max approach because the data contains fast spikes that I do not want to miss by just stepping through the data. There are more wrappers that crop to the x-limits, and skip processing under certain conditions but the relevant part is below:</p>\n\n<pre><code>def min_max_downsample(x,y,num_bins):\n    \"\"\" Break the data into num_bins and returns min/max for each bin\"\"\"\n    pts_per_bin = x.size // num_bins    \n\n    #Create temp to hold the reshaped &amp; slightly cropped y\n    y_temp = y[:num_bins*pts_per_bin].reshape((num_bins, pts_per_bin))\n    y_out      = np.empty((num_bins,2))\n    #Take the min/max by rows.\n    y_out[:,0] = y_temp.max(axis=1)\n    y_out[:,1] = y_temp.min(axis=1)\n    y_out = y_out.ravel()\n\n    #This duplicates the x-value for each min/max y-pair\n    x_out = np.empty((num_bins,2))\n    x_out[:] = x[:num_bins*pts_per_bin:pts_per_bin,np.newaxis]\n    x_out = x_out.ravel()\n    return x_out, y_out\n</code></pre>\n\n<p>This works pretty well and is sufficiently fast (~80ms on 1e8 points &amp; 2k bins).  There is very little lag as it periodically recalculates &amp; updates the line's x &amp; y-data.</p>\n\n<p>However, my only complaint is in the x-data.  This code duplicates the x-value of each bin's left edge and doesn't return the true x-location of the y min/max pairs.   I typically set the number of bins to double the axis pixel width. So you can't really see the difference because the bins are so small...but I know its there... and it bugs me. </p>\n\n<p>So attempt number 2 which does return the actual x-values for every min/max pair.  However it is about 5x slower.  </p>\n\n<pre><code>def min_max_downsample_v2(x,y,num_bins):\n    pts_per_bin = x.size // num_bins\n    #Create temp to hold the reshaped &amp; slightly cropped y\n    y_temp = y[:num_bins*pts_per_bin].reshape((num_bins, pts_per_bin))\n    #use argmax/min to get column locations\n    cc_max = y_temp.argmax(axis=1)\n    cc_min = y_temp.argmin(axis=1)    \n    rr = np.arange(0,num_bins)\n    #compute the flat index to where these are\n    flat_max = cc_max + rr*pts_per_bin\n    flat_min = cc_min + rr*pts_per_bin\n    #Create a boolean mask of these locations\n    mm_mask  = np.full((x.size,), False)\n    mm_mask[flat_max] = True\n    mm_mask[flat_min] = True  \n    x_out = x[mm_mask]    \n    y_out = y[mm_mask]  \n    return x_out, y_out\n</code></pre>\n\n<p>This takes roughly 400+ ms on my machine which becomes pretty noticeable.  So my question is basically is there a way to go faster and provide the same results?  The bottleneck is mostly in the <code>numpy.argmin</code> and <code>numpy.argmax</code> functions which are a good bit slower than <code>numpy.min</code> and <code>numpy.max</code>.</p>\n\n<p>The answer might be to just live with version #1 since it visually doesn't really matter.  Or maybe try to speed it up something like cython (which I have never used). </p>\n\n<p>FYI using Python 3.6.4 on Windows ... example usage would be something like this:</p>\n\n<pre><code>x_big = np.linspace(0,10,100000000)\ny_big = np.cos(x_big )\nx_small, y_small = min_max_downsample(x_big ,y_big ,2000) #Fast but not exactly correct.\nx_small, y_small = min_max_downsample_v2(x_big ,y_big ,2000) #correct but not exactly fast.\n</code></pre>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1548924745, "post_id": 54449596, "comment_id": 95721345, "body": "Please, provide the error message as text to make it easy for other people in your situation to find it."}, {"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1548924967, "post_id": 54449596, "comment_id": 95721454, "body": "If you followed the <a href=\"https://doc.scrapy.org/en/latest/intro/install.html\" rel=\"nofollow noreferrer\">official installation instructions</a>, consider <a href=\"https://github.com/scrapy/scrapy/issues\" rel=\"nofollow noreferrer\">opening a bug report</a>"}], "owner": {"reputation": 13, "user_id": 5749475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30010bb281fabbfad0ba8d6b1256c0fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5749475/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549278095, "creation_date": 1548882673, "last_edit_date": 1549278095, "question_id": 54449596, "link": "https://stackoverflow.com/questions/54449596/python-import-service-identity-error-cannot-import-name-dnsname", "title": "Python import service_identity error: cannot import name DNSName", "body": "<p>I start learning Scrapy and got this error message. I have googled it and installed/upgraded service_identity and related python packages but still received the same error when importing service_identity.</p>\n\n<ul>\n<li>OS: Windows 7 64-bit</li>\n<li>Python: 2.7.15 Anaconda</li>\n<li>service_identity: 18.1.0</li>\n<li>pyopenssl: 17.5.0</li>\n<li>pyasn1: 0.4.5</li>\n<li>pyasn1-modules: 0.2.3</li>\n</ul>\n\n<p>Error msg: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>import service_identity\nTraceback (most recent call last):\n\n  File \"ipython-input-2-709fa376dd62\", line 1, in &lt;module&gt;\n    import service_identity\n\n  File \"C:\\anaconda2\\lib\\site-packages\\service_identity\\__init__.py\", line 7, in &lt;module&gt;\n    from . import cryptography, pyopenssl\n\n  File \"C:\\anaconda2\\lib\\site-packages\\service_identity\\cryptography.py\", line 9, in &lt;module&gt;\n    from cryptography.x509 import (\n\nImportError: cannot import name DNSName\n</code></pre>\n"}, {"tags": ["python", "image", "compression", "python-imaging-library"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1548882586, "post_id": 54449562, "comment_id": 95707891, "body": "You could use an intermediate intensity as baseline, instead of zero."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1548883145, "post_id": 54449562, "comment_id": 95708139, "body": "In other words map -127...127 to 0..255. Also note that PIL supports <code>&quot;I&quot;</code> (32-bit signed integer pixels) and <code>&quot;F&quot;</code> (32-bit floating point pixels) <i>single</i> channel image <a href=\"https://pillow.readthedocs.io/en/stable/handbook/concepts.html#concept-modes\" rel=\"nofollow noreferrer\">modes</a>, so perhaps you could use three of those."}], "answers": [{"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": true, "score": 1, "last_activity_date": 1548883250, "creation_date": 1548883250, "answer_id": 54449722, "question_id": 54449562, "link": "https://stackoverflow.com/questions/54449562/how-to-put-a-negative-0-rgb-color-values-to-an-image-in-pil/54449722#54449722", "title": "How to put a negative (&lt;0) RGB color values to an image in PIL?", "body": "<p>Use modulo 256 for each of the <code>R</code>, <code>G</code>, <code>B</code> values. That means that all values end up in range [0-255], i.e. one byte, e.g. -1 maps to 255.</p>\n\n<p>Then, for two <em>R</em> values <code>R0</code> and <code>R1</code>, their difference would be:</p>\n\n<pre><code>Rdiff = (R0 - R1) % 256\n</code></pre>\n\n<p>Later on, you can do the inverse:</p>\n\n<pre><code>R0 = (R1 + Rdiff) % 256\n</code></pre>\n\n<p>The calculation will be correct as long as all inputs are also in range 0-255 (which they are, in this case).</p>\n\n<p>These are some sample encoded (<code>Rdiff</code>) values, with that logic:</p>\n\n<pre><code>R0=50, R1=20  --&gt; Rdiff=30\nR0=10, R1=50  --&gt; Rdiff=216\nR0=0,  R1=5   --&gt; Rdiff=251\nR0=33, R1=200 --&gt; Rdiff=89\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10992641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IhgX6d_E3Hw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPTc6TX8DRabb6B_HVE9tFQPGqrCQ/mo/photo.jpg?sz=128", "display_name": "pyreq", "link": "https://stackoverflow.com/users/10992641/pyreq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 54449722, "answer_count": 1, "score": 2, "last_activity_date": 1548883250, "creation_date": 1548882496, "last_edit_date": 1548882584, "question_id": 54449562, "link": "https://stackoverflow.com/questions/54449562/how-to-put-a-negative-0-rgb-color-values-to-an-image-in-pil", "title": "How to put a negative (&lt;0) RGB color values to an image in PIL?", "body": "<p>I am trying to make a kind of delta encoding task for school and I need to put the difference between consequtive pixels into next pixels just so I decode them later. Unfortunately, if the difference is negative PIL function putdata will somehow convert the value to 0 which makes it impossible for me to decode it later using an inverse filter. What could I do to make it possible? Note that encoded image doesn't have to look nice, it just has to contain the data needed for me to decode it.</p>\n\n<pre><code>from PIL import Image\n\nimg = Image.open(\"lena.bmp\")\nimg = img.convert(\"RGB\")\nencoded_img = Image.new(\"RGB\", (img.size[0], img.size[1]))\ndecoded_img = Image.new(\"RGB\", (img.size[0], img.size[1]))\ncolorlist = []\npixels = []\n\n# Encoding\nimg.show()\n\nfor pixel in img.getdata():\n\n    R0 = pixel[0]\n    G0 = pixel[1]\n    B0 = pixel[2]\n    colorlist.append(R0)\n    colorlist.append(G0)\n    colorlist.append(B0)\n\n    if len(colorlist) &gt; 3:\n        R0 -= colorlist[len(colorlist) - 6]\n        G0 -= colorlist[len(colorlist) - 5]\n        B0 -= colorlist[len(colorlist) - 4]\n\n    pixels.append((R0, G0, B0))\n\nencoded_img.putdata(pixels)\nencoded_img.show()\nencoded_img.save(\"encoded.bmp\")\n</code></pre>\n"}, {"tags": ["python", "geospatial", "polygon", "geopandas"], "comments": [{"owner": {"reputation": 2737, "user_id": 7384740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H2BbL.png?s=128&g=1", "display_name": "Dodge", "link": "https://stackoverflow.com/users/7384740/dodge"}, "edited": false, "score": 0, "creation_date": 1548882577, "post_id": 54449528, "comment_id": 95707886, "body": "Can you provide sample data and perhaps <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1548883319, "post_id": 54449528, "comment_id": 95708210, "body": "By <i>spare</i>, do you mean <i>sparse</i>?"}, {"owner": {"reputation": 51, "user_id": 6233665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fffad43c08af253b6aa59f1eb807285?s=128&d=identicon&r=PG&f=1", "display_name": "Rita", "link": "https://stackoverflow.com/users/6233665/rita"}, "edited": false, "score": 0, "creation_date": 1548905838, "post_id": 54449528, "comment_id": 95714145, "body": "yes, edited. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 746, "user_id": 7644596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178d41ea6715a98f5aa2fafde437cb27?s=128&d=identicon&r=PG&f=1", "display_name": "jberrio", "link": "https://stackoverflow.com/users/7644596/jberrio"}, "is_accepted": false, "score": 0, "last_activity_date": 1549322895, "last_edit_date": 1549322895, "creation_date": 1549269719, "answer_id": 54512598, "question_id": 54449528, "link": "https://stackoverflow.com/questions/54449528/geopandas-color-closest-shapes-the-same-color/54512598#54512598", "title": "geopandas color closest shapes the same color", "body": "<p>The code below indicates an algorithm that will join the polygons with 'no value' to the closest polygons with a valid value, using a spatial join (nearest neighbor) based on their centroids.</p>\n\n<p>Note the code is a draft of the code you need; it indicates the general algorithm but you need to complete the functions based on your data and your variables. </p>\n\n<pre><code># gdf with all the polygons\ngdf1 = gpd.read_file(...)\n\n# calculate a column with the centroid geometry; \n# it will be used later.\n# note: this is not the active gdf geometry at this stage\ngdf1['geometry_pt'] = gdf1['geometry'].centroid\n\n# set the point geometry as the active geometry\ngdf1.set_geometry('geometry_pt')\n\n# filter out the gdf in two gdfs, with/without the value you want\ngdf1_yesval = gdf1.loc[gdf1['field1'] != 0]\ngdf1_noval  = gdf1.loc[gdf1['field1'] == 0]\n\n# perform a spatial join to assign the closest value to the points with no value\n# for this, apply the code in the link below\ngdf1_noval_joined = gdf1_noval.apply(...  nearest... gdf1_yesval... )\n\n# do the necessary column operations in the joined gdf \n# to update your desired columns with values from the spatially joined gdf\ngdf1_noval_joined['field1'] = gdf1_noval_joined['joinedfieldA']\n\n# delete the unnecessary columns in the joined gdf\ngdf1_noval_joined.drop(columns=['joinedfieldA', 'joinedfieldB'], inplace=True)\n\n# concatenate the two gdfs to make one\ndf2 = pd.concat([gdf1_yesval, gdf1_noval_joined])\n\n# convert it into a gdf again\ngdf2 = gpd.GeoDataFrame(df2, geometry='geometry')\n</code></pre>\n\n<p>The link where the nearest neighbor join function is explained is: <a href=\"https://gis.stackexchange.com/q/222315/93912\">https://gis.stackexchange.com/q/222315/93912</a></p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 51, "user_id": 6233665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fffad43c08af253b6aa59f1eb807285?s=128&d=identicon&r=PG&f=1", "display_name": "Rita", "link": "https://stackoverflow.com/users/6233665/rita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549322895, "creation_date": 1548882341, "last_edit_date": 1548905813, "question_id": 54449528, "link": "https://stackoverflow.com/questions/54449528/geopandas-color-closest-shapes-the-same-color", "title": "geopandas color closest shapes the same color", "body": "<p>I have a geopandas file with 100+ polygons and a sparse set (~10 of which) have a value of interest. Is there an easy way for me to assign the remaining 90+ polygons a value based on the value of the nearest non-zero polygon?</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["python", "excel", "win32com"], "comments": [{"owner": {"reputation": 368, "user_id": 3266402, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/376841ba8cfb722cf4991a13d5b868b0?s=128&d=identicon&r=PG&f=1", "display_name": "Burtski", "link": "https://stackoverflow.com/users/3266402/burtski"}, "edited": false, "score": 0, "creation_date": 1588270270, "post_id": 54449520, "comment_id": 108841720, "body": "So it turns out that a user can open a dialog box on ANY excel sheet and you will have the same problem. That is, if another instance of Excel is being used by the user it is possible that an open dialog box on an unrelated sheet will cause the same problem."}], "answers": [{"comments": [{"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556470992, "post_id": 55892457, "comment_id": 98441896, "body": "Hello! While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value."}, {"owner": {"reputation": 86, "user_id": 2828033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60267798713280f1d378e189536ace66?s=128&d=identicon&r=PG&f=1", "display_name": "Erik S&#228;llstr&#246;m", "link": "https://stackoverflow.com/users/2828033/erik-s%c3%a4llstr%c3%b6m"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556473903, "post_id": 55892457, "comment_id": 98442726, "body": "@Valentino I added some context before the code. I hope it helps!"}, {"owner": {"reputation": 1804, "user_id": 483265, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/586b48298b8e7603940100a879e0a4d0?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/483265/alex"}, "edited": false, "score": 0, "creation_date": 1578389976, "post_id": 55892457, "comment_id": 105413681, "body": "tried to use your code. Got error: AttributeError: &#39;&lt;win32com.gen_py.Microsoft Excel 16.0 Object Library.Workbooks instance at 0x87375264&gt;&#39; object has no attribute &#39;Add&#39;  when calling: self.xlApp.Workbooks.Add() where: self._xl = win32com.client.gencache.EnsureDispatch(&#39;Excel.Application&#39;) \t\tself.xlApp = ComWrapper(self._xl)"}], "tags": [], "owner": {"reputation": 86, "user_id": 2828033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60267798713280f1d378e189536ace66?s=128&d=identicon&r=PG&f=1", "display_name": "Erik S&#228;llstr&#246;m", "link": "https://stackoverflow.com/users/2828033/erik-s%c3%a4llstr%c3%b6m"}, "is_accepted": false, "score": 4, "last_activity_date": 1556473852, "last_edit_date": 1556473852, "creation_date": 1556469852, "answer_id": 55892457, "question_id": 54449520, "link": "https://stackoverflow.com/questions/54449520/call-was-rejected-by-callee-in-win32com-if-a-dialog-box-is-open-or-excel-is-othe/55892457#55892457", "title": "Call was rejected by callee in win32com if a dialog box is open or excel is otherwise waiting for the user", "body": "<p>I have been struggling with the same problem, but now I have made a solution that works for me so far.</p>\n\n<p>I created a class, ComWrapper, that I wrap the Excel COM object in. It automatically wraps every nested object and call in ComWrapper, and unwraps them when they are used as arguments to function calls or assignments to wrapped objects. The wrapper works by catching the \"Call was rejected by callee\"-exceptions and retrying the call until the timeout defined at the top is reached. If the timeout is reached, the exception is finally thrown outside the wrapper object.</p>\n\n<p>Function calls to wrapped objects are automatically wrapped by a function _com_call_wrapper, which is where the magic happens.</p>\n\n<p>To make it work, just wrap the com object from Dispatch using ComWrapper and then use it as usual, like at the bottom of the code. Comment if there are problems.</p>\n\n<pre><code>import win32com.client\nfrom pywintypes import com_error\nimport time\nimport logging\n\n_DELAY = 0.05  # seconds\n_TIMEOUT = 60.0  # seconds\n\n\ndef _com_call_wrapper(f, *args, **kwargs):\n    \"\"\"\n    COMWrapper support function. \n    Repeats calls when 'Call was rejected by callee.' exception occurs.\n    \"\"\"\n    # Unwrap inputs\n    args = [arg._wrapped_object if isinstance(arg, ComWrapper) else arg for arg in args]\n    kwargs = dict([(key, value._wrapped_object)\n                   if isinstance(value, ComWrapper)\n                   else (key, value)\n                   for key, value in dict(kwargs).items()])\n\n    start_time = None\n    while True:\n        try:\n            result = f(*args, **kwargs)\n        except com_error as e:\n            if e.strerror == 'Call was rejected by callee.':\n                if start_time is None:\n                    start_time = time.time()\n                    logging.warning('Call was rejected by callee.')\n\n                elif time.time() - start_time &gt;= _TIMEOUT:\n                    raise\n\n                time.sleep(_DELAY)\n                continue\n\n            raise\n\n        break\n\n    if isinstance(result, win32com.client.CDispatch) or callable(result):\n        return ComWrapper(result)\n    return result\n\n\nclass ComWrapper(object):\n    \"\"\"\n    Class to wrap COM objects to repeat calls when 'Call was rejected by callee.' exception occurs.\n    \"\"\"\n\n    def __init__(self, wrapped_object):\n        assert isinstance(wrapped_object, win32com.client.CDispatch) or callable(wrapped_object)\n        self.__dict__['_wrapped_object'] = wrapped_object\n\n    def __getattr__(self, item):\n        return _com_call_wrapper(self._wrapped_object.__getattr__, item)\n\n    def __getitem__(self, item):\n        return _com_call_wrapper(self._wrapped_object.__getitem__, item)\n\n    def __setattr__(self, key, value):\n        _com_call_wrapper(self._wrapped_object.__setattr__, key, value)\n\n    def __setitem__(self, key, value):\n        _com_call_wrapper(self._wrapped_object.__setitem__, key, value)\n\n    def __call__(self, *args, **kwargs):\n        return _com_call_wrapper(self._wrapped_object.__call__, *args, **kwargs)\n\n    def __repr__(self):\n        return 'ComWrapper&lt;{}&gt;'.format(repr(self._wrapped_object))\n\n\n_xl = win32com.client.dynamic.Dispatch('Excel.Application')\nxl = ComWrapper(_xl)\n\n# Do stuff with xl instead of _xl, and calls will be attempted until the timeout is\n# reached if \"Call was rejected by callee.\"-exceptions are thrown.\n</code></pre>\n"}], "owner": {"reputation": 368, "user_id": 3266402, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/376841ba8cfb722cf4991a13d5b868b0?s=128&d=identicon&r=PG&f=1", "display_name": "Burtski", "link": "https://stackoverflow.com/users/3266402/burtski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1415, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1556473852, "creation_date": 1548882318, "question_id": 54449520, "link": "https://stackoverflow.com/questions/54449520/call-was-rejected-by-callee-in-win32com-if-a-dialog-box-is-open-or-excel-is-othe", "title": "Call was rejected by callee in win32com if a dialog box is open or excel is otherwise waiting for the user", "body": "<p>I need to determine if Excel is ready to accept a COM object from win32com in Python. For instance if a dialog box is open in excel, any call to a win32com function will cause a 'Call was rejected by callee' error.</p>\n\n<p>Through trial and error I have found that if Excel ( actaully I assume any Office product ) has a dialog box open, any call to win32com will result in an error.</p>\n\n<p>After quite a bit of googling I have found many questions about what amounts to self inflicted dialog boxes being open. i.e. doing a Excel.SaveAs() will open a dialog box on the sheet and you are stuck until the user closes it.</p>\n\n<p>In my case I have a user that has opened a dialog box or in some otherway has interacted with Excel and left it waiting for input. Something as simple a starting to enter a formula on the formula bar will cause the win32com function to return with an error.</p>\n\n<p>So couple of questions:\nIs there a way to determine if Excel is ready for a command?\nIs there a way to tell what box is open (what is excel waiting for?)\nIs there a way to close the box through win32com ... remember that as far as I can tell anything I do with win32com will return an error when it is in this state</p>\n\n<p>I know I could do a try: catch: but I would need that around every win32com function ( at this point there are a lot of them). I think that that approach would make the code unnecessarily long and complex.</p>\n"}, {"tags": ["python", "html", "selenium-webdriver"], "comments": [{"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 1, "creation_date": 1548883732, "post_id": 54449519, "comment_id": 95708391, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that the code can be run and tested."}, {"owner": {"reputation": 43, "user_id": 10847905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db236f5caf97aea77460192c36004f4?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Oh", "link": "https://stackoverflow.com/users/10847905/eric-oh"}, "reply_to_user": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 0, "creation_date": 1548926078, "post_id": 54449519, "comment_id": 95722150, "body": "I have added it"}], "owner": {"reputation": 43, "user_id": 10847905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db236f5caf97aea77460192c36004f4?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Oh", "link": "https://stackoverflow.com/users/10847905/eric-oh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548917272, "creation_date": 1548882317, "last_edit_date": 1548917272, "question_id": 54449519, "link": "https://stackoverflow.com/questions/54449519/how-to-scrape-content-from-script-tag-using-selenium-python", "title": "How to scrape content from script tag using Selenium python", "body": "<p>I'm a beginner in Selenium and I need help with my code. I am trying to extract data from the script tag that tells me the annual prices of each drug when I hover over it. It would be great if I could know how to change the price sheet from UK to the other options so I could extract the data from those graphs as well. I am trying to extract from this code :</p>\n\n<pre><code>&lt;!-- ========== Block abacus-spend-graph ==========\n$(function() {\n        ///detect page size to determine if we need to resize\n        labelTop = ($(document).width() &lt; 1265) ? 10 : 0;\n    $('#spend_graph').css('height', '70px');        // #37828 - reduce to 70\n\n        Highcharts.setOptions({ lang: { numericSymbols: [ 'k' , 'M' , 'B' , 'T' , 'P' , 'E'] } });\n\n        $('#spend_graph').highcharts({\n            chart: {\n                type: 'bar',\n                marginRight: 35,    // #37828\n                marginBottom: 5     // #37828\n            },\n            title: {\n                text: '',\n                style: { display : 'none' }\n            },\n            credits: {\n                enabled: false\n            },  \n            legend: {\n                y:labelTop,\n                enabled: false,\n                maxHeight:90,\n                itemDistance: 15,\n                reversed: true,\n                itemStyle:\n                {\n                    color: '#444',\n                    fontWeight: 'normal',\n                    padding: '4px'\n                }\n            },\n            xAxis: {\n                categories: \n                [\n                    'Actual Annual Spending (US Market)', 'Abacus Annual Value (US Market)' // #37828, #58587\n                ],\n                tickLength: 20,\n                labels: {\n                    y: 4,\n                    style: {\n                        fontSize: '12px'\n                    }\n                }\n            },\n            yAxis: {\n                min: 0,\n                title: {\n                    enabled: false,     // #37828\n                    text: 'Annual Spending'\n                },\n                gridLineWidth: 0,       // #58587\n                stackLabels: {\n                    enabled: true,\n                    style: {                        \n                        color: (Highcharts.theme &amp;&amp; Highcharts.theme.textColor) || 'gray'\n                    },\n                    formatter: function() { return FloatToCurrency(Math.round(this.total/1000000)*1000000, '$,', 'c0'); }, // Round to nearest million\n                }\n            },\n            tooltip: {\n                //headerFormat: '&lt;span class=\"hc-tip-cap\"&gt;{point.key}&lt;/span&gt;&lt;table class=\"hc-tipt\"&gt;',\n                headerFormat: '&lt;span class=\"hc-tip\"&gt;',\n                footerFormat: '&lt;/span&gt;',\n                formatter: function() { return '&lt;b&gt;' + this.series.name + '&lt;/b&gt;: ' + FloatToCurrency(Math.round(this.y/1000000)*1000000, '$,', 'c0') + '&lt;br /&gt;Annual Volume: ' + FloatToString(this.series.options.vol); }, // Round to nearest million\n                useHTML: true\n            },\n            plotOptions: {\n                series: {\n                    stacking: 'normal',\n                    cursor: 'pointer',\n                    pointPadding: .07,\n                    groupPadding: .07\n                }\n            },            \n            series: \n            [\n                { name: 'Velcade', drugNum: 44, stack: 'drugs', data: [{ y: 1262732812.0000, color: '#9b9ea5' }, { y: 242267658.36919075144508670521 }], color: '#db4d72', colorLower: '#db4d72', colorHigher: '#7dbea0', vol: 282238, selected: false },\n{ name: 'Pomalyst', drugNum: 32, stack: 'drugs', data: [{ y: 743195055.0000, color: '#bcbec3' }, { y: 52466947.533000000000000 }], color: '#e788a1', colorLower: '#e788a1', colorHigher: '#a8d4c0', vol: 52467, selected: false },\n{ name: 'Farydak', drugNum: 14, stack: 'drugs', data: [{ y: 8595625.0000, color: '#dddee1' }, { y: 588196.584924000000000000 }], color: '#f3c3d0', colorLower: '#f3c3d0', colorHigher: '#d3e9df', vol: 809, selected: false }\n            ],\n            exporting: {\n                enabled: false\n            }\n        });\n});\n\n\n\n// ============ End abacus-spend-graph ============ --&gt;\n</code></pre>\n\n<p>I just want to extract the y values of the drugs near the bottom of the page. However, I am unsure how to locate this part of the script tag</p>\n\n<p>Tried code:</p>\n\n<pre><code>url = \n    urllib.urlopen('http://abacus.realendpoints.com/ConsoleTemplate.aspx \n    ?act=qlrd&amp;req=nav&amp;mop=abacus!main&amp;pk=ed5a81ad-9367-41c8-aa6b- \n    18a08199ddcf&amp;ab-eff=1000&amp;ab-tox=0.1&amp;ab-nov=1&amp;ab-rare=1&amp;ab-pop=1&amp;ab- \n    dev=1&amp;ab-prog=1.0&amp;ab-need=1&amp;ab-time=1543102810')\n    soup = BeautifulSoup(url.read(), 'lxml')\n    data  = soup.find_all(\"script\").string\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>UserWarning: The soupsieve package is not installed. CSS selectors cannot be used.\n  'The soupsieve package is not installed. CSS selectors cannot be used.'\nTraceback (most recent call last):\n  File \"other.py\", line 12, in &lt;module&gt;\n    soup = BeautifulSoup(url.read(), 'lxml')\n  File \"__init__.py\", line 196, in __init__\n    % \",\".join(features))\nbs4.FeatureNotFound: Couldn't find a tree builder with the features you requested: lxml. Do you need to install a parser library?\n</code></pre>\n\n<p>However, I would like to try to use Selenium Python to solve this problem rather than beautifulsoup. </p>\n"}, {"tags": ["python", "scikit-learn", "nmf"], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 2547408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9955e648605f272a9a00692d7909cce1?s=128&d=identicon&r=PG&f=1", "display_name": "MattY", "link": "https://stackoverflow.com/users/2547408/matty"}, "edited": false, "score": 2, "creation_date": 1578129520, "post_id": 54451005, "comment_id": 105344543, "body": "Dimensionality reduction is the classic use case. But, worth mentioning that NMF is also a clustering method. Under certain constraints, it is theoretically equivalent to K-Means."}], "tags": [], "owner": {"reputation": 1383, "user_id": 10971439, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Di_R1hzPhZ4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZvu7iaJyb1N8s2y71G32W2t5hCaw/mo/photo.jpg?sz=128", "display_name": "Stanislas Morbieu", "link": "https://stackoverflow.com/users/10971439/stanislas-morbieu"}, "is_accepted": true, "score": 3, "last_activity_date": 1548890083, "creation_date": 1548890083, "answer_id": 54451005, "question_id": 54449518, "link": "https://stackoverflow.com/questions/54449518/nmf-as-a-clustering-method-in-python-scikit/54451005#54451005", "title": "NMF as a clustering method in Python Scikit", "body": "<p>NMF is not a classification method, it is a dimensionality reduction method. When you process your texts with <code>CountVectorizer</code>, you have a high number of dimensions and NMF allows to reduce it.</p>\n\n<p>NMF approximates the documents*terms matrix X by: W * H.</p>\n\n<p>The new dimensions can be seen as topics, so for a given document you can see in W which topics the document belongs the most since the values are non negative (if the value is high, the document is highly related to the topic).</p>\n\n<p>Similarly, for a given topic, you can get the words highly related to it using H.</p>\n\n<p>To answer your question, you can cluster the documents into topics and represent each topic in a human-friendly manner by giving the most related words.</p>\n"}], "owner": {"reputation": 63, "user_id": 4357369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ed1eafe00df5b51ef8e35871131361f2?s=128&d=identicon&r=PG&f=1", "display_name": "rafmat24", "link": "https://stackoverflow.com/users/4357369/rafmat24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1963, "favorite_count": 1, "accepted_answer_id": 54451005, "answer_count": 1, "score": 3, "last_activity_date": 1548890083, "creation_date": 1548882315, "question_id": 54449518, "link": "https://stackoverflow.com/questions/54449518/nmf-as-a-clustering-method-in-python-scikit", "title": "NMF as a clustering method in Python Scikit", "body": "<p>I am working on implementing a Python script for NMF text data clustering. In my work I am using Scikit NMF implementation, however as I understand, in Scikit NMF is more like classification method than a clustering method.</p>\n\n<p>I have developed a simple script working on some sample arcticles. I am preprocessing them and putting as an input for NMF. According to papers shared by my professor I receive some clusters, however I have no idea how to visualize/present them.</p>\n\n<p>Anyone of you have any idea how to make this human-friendly to read? :)</p>\n\n<p>Code of main script below:</p>\n\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer, CountVectorizer\nfrom sklearn.cluster import KMeans\nfrom sklearn.preprocessing import normalize\nfrom sklearn.decomposition import LatentDirichletAllocation, NMF\nfrom sklearn.preprocessing import normalize\nimport pandas as pd\nfrom preprocess import *\n\n\n# loading data\nraw_text_data = loading_bbc_datasets(5)\n\ntext_data = text_preparing(raw_text_data)\ntf_vectorizer = TfidfVectorizer()\nY = tf_vectorizer.fit_transform(text_data)\nY_norm = normalize(Y)\n\nnmf = NMF(n_components=5, random_state=1, alpha=.1, l1_ratio=0.5)\nA = nmf.fit_transform(Y_norm)\nX = nmf.components_\nfeatures = tf_vectorizer.get_feature_names()\nprint(features)\n\nAF = pd.DataFrame(Y_norm.toarray())\nWF = pd.DataFrame(A)\nHF = pd.DataFrame(X)\n\nAF.to_csv('Y.csv', sep=',', header=features)\nWF.to_csv('A.csv', sep=',', header=['C1', 'C2', 'C3', 'C4', 'C5'])\nHF.to_csv('X.csv', sep=',', header=features)\n</code></pre>\n"}, {"tags": ["python", "ansible-2.x"], "owner": {"reputation": 21, "user_id": 10992585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a7fe828073b3193b2a16160fb87d20?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Rayhshtat", "link": "https://stackoverflow.com/users/10992585/mark-rayhshtat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548882298, "creation_date": 1548882298, "question_id": 54449516, "link": "https://stackoverflow.com/questions/54449516/ansible-use-of-fetch-action-in-my-python-module", "title": "Ansible: Use of fetch action in my Python module", "body": "<p>I try to implement new Ansible module in Python which includes 2 parts:</p>\n\n<ol>\n<li><p>collect conf file from sensor gateway and put this file on remote host as a temp file</p></li>\n<li><p>fetch action - get this file to local host (ansible server)</p></li>\n</ol>\n\n<p>In the end of running Ansible delete all the temp files</p>\n\n<p>I finish a first part and don't know how to implement fetch action.</p>\n\n<p>I can do second part as a additional tasks (fetch module for copy file to local host + file module for deleting temp conf file from remote host) in the ansible playbook but i want to do all action in my module without any additional tasks.</p>\n"}, {"tags": ["python", "optimization", "nonlinear-optimization"], "answers": [{"tags": [], "owner": {"reputation": 1430, "user_id": 5682512, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0b543a3897886a2bee848c0a72598144?s=128&d=identicon&r=PG", "display_name": "k88", "link": "https://stackoverflow.com/users/5682512/k88"}, "is_accepted": true, "score": 1, "last_activity_date": 1548896746, "creation_date": 1548896746, "answer_id": 54451926, "question_id": 54449502, "link": "https://stackoverflow.com/questions/54449502/limit-the-coefficient-valule-on-google-or-tools/54451926#54451926", "title": "Limit the coefficient valule on google OR-Tools", "body": "<p>You will have to set them to the decision variables (which in this case seem to be how much of which food item to eat) and add an upper bound for each food item that describes its range.</p>\n\n<p>So in this case:</p>\n\n<pre><code>upper_bounds = [4, 6, 5, 2]\n# Objective: minimize the sum of (price-normalized) foods.\nobjective = solver.Objective()\nfor i in range(0, len(data)):\n    food[i] = solver.NumVar(0.0, upper_bounds[i], data[i][0])\n    objective.SetCoefficient(food[i], 4)\nobjective.SetMinimization()\n</code></pre>\n\n<p>Note that <code>solver.NumVar</code> takes 3 arguments, first the lower bound, second the upper bound and last its name. Hope this helps. </p>\n"}], "owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 54451926, "answer_count": 1, "score": 1, "last_activity_date": 1548896746, "creation_date": 1548882241, "question_id": 54449502, "link": "https://stackoverflow.com/questions/54449502/limit-the-coefficient-valule-on-google-or-tools", "title": "Limit the coefficient valule on google OR-Tools", "body": "<p>I Have a problem very similar to the <a href=\"https://developers.google.com/optimization/lp/glop\" rel=\"nofollow noreferrer\">The Stigler diet</a> </p>\n\n<p>I have replicated the results \nwith my data in the below code:</p>\n\n<pre><code>data = [\n['f1', 10, 15, 17, 10],\n['f2', 2, 11, 12, 14],\n['f3', 5, 17, 16, 13],\n['f4', 8, 12, 8, 16]\n]\n\nnutrients = [\n    [\"protein\",15.5],\n    [\"carbohydrates\",12.3]]\n\nTM = 10\nnutrients = [\n    [\"protein\",15.5*TM],\n    [\"carbohydrates\",12.3*TM]]\n\nfood = [[]] * len(data)\n\n# Objective: minimize the sum of (price-normalized) foods.\nobjective = solver.Objective()\nfor i in range(0, len(data)):\n    food[i] = solver.NumVar(0.0, solver.infinity(), data[i][0])\n    objective.SetCoefficient(food[i], 4)\nobjective.SetMinimization()\n\n# Create the constraints, one per nutrient.\n\nconstraints = [0] * len(nutrients)\nfor i in range(0, len(nutrients)):\n    constraints[i] = solver.Constraint(nutrients[i][1], solver.infinity())\n    for j in range(0, len(data)):\n        constraints[i].SetCoefficient(food[j], data[j][i+3])\n\n\nstatus = solver.Solve()\n\nif status == solver.OPTIMAL:\n    # Display the amounts (in dollars) to purchase of each food.\n    price = 0\n    num_nutrients = len(data[i]) - 3\n    nutrients = [0] * (len(data[i]) - 3)\n    for i in range(0, len(data)):\n        price += food[i].solution_value()\n\n        for nutrient in range(0, num_nutrients):\n            nutrients[nutrient] += data[i][nutrient+3] * food[i].solution_value()\n\n        if food[i].solution_value() &gt; 0:\n            print (\"%s = %f\" % (data[i][0], food[i].solution_value()))\n\n    print ('Optimal  price: $%.2f' % (price))\nelse:  # No optimal solution was found.\n    if status == solver.FEASIBLE:\n        print ('A potentially suboptimal solution was found.')\n    else:\n        print ('The solver could not solve the problem.')\n</code></pre>\n\n<p>Which returns this result: </p>\n\n<pre><code>f1 = 0.770492 f3 = 8.868852 Optimal  price: $9.64\n</code></pre>\n\n<p>Which is fine, except that I have and upperbound for each type of food: \nE.G: </p>\n\n<pre><code>f1 = 4\nf2 = 6\nf3 = 5\nf4 =2\n</code></pre>\n\n<p>How can I add this part to the constrains? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "edited": false, "score": 1, "creation_date": 1548883216, "post_id": 54449491, "comment_id": 95708167, "body": "What have tried?"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 3013381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbeb001fab8be995fffc700a6a8e7c4c?s=128&d=identicon&r=PG&f=1", "display_name": "ByrnesW", "link": "https://stackoverflow.com/users/3013381/byrnesw"}, "is_accepted": false, "score": 0, "last_activity_date": 1548883502, "creation_date": 1548883502, "answer_id": 54449769, "question_id": 54449491, "link": "https://stackoverflow.com/questions/54449491/how-to-loop-over-directory-and-append-to-a-master-file/54449769#54449769", "title": "How to loop over directory and append to a master file?", "body": "<p>Without knowing more about the formatting of the output, I can help with reading in each of the worksheets in the directory. </p>\n\n<pre><code>import os\nimport pandas as pd\n\ndef parse_folder(folder_path):\n\n    # Loop over files in path\n    for f in os.listdir(folder_path):\n\n        # Construct full path\n        f_path = folder_path + \"\\\\\" + f + \"\\\\cust_data_\" + f + \".xlsx\"\n\n        # Read the workbook and store information into pandas dataframe\n        # See https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html for options\n        wkbk = pd.read_excel(os.path.abspath(f_path), header=0)\n\n        # // Do whatever needs to be done to the file here //\n\n\nif __name__ == \"__main__\":\n    folder_path = os.path.abspath(\"C:\\\\customer\\\\\")\n    parse_folder(folder_path)\n</code></pre>\n\n<p>This function will loop over each of the files in your directory and read them all in with pandas read_excel(). The variable wkbk is a pandas dataframe, which can be parsed for whatever information you need in it. </p>\n\n<p>For outputting the data from each file I would recommend looking into xlsxwriter if you want to compile all of the information and output it to a master excel sheet. The limitation with xlsxwriter is that it cannot append to existing files, only write out completely new ones. A workaround to this reading in the current master list and then rewriting it in the new file.</p>\n"}], "owner": {"reputation": 14915, "user_id": 454671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08ee7269f7d8d5da435e00d62f3310c6?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/454671/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548883799, "creation_date": 1548882185, "last_edit_date": 1548883799, "question_id": 54449491, "link": "https://stackoverflow.com/questions/54449491/how-to-loop-over-directory-and-append-to-a-master-file", "title": "How to loop over directory and append to a master file?", "body": "<p>I have a monthly file stored in monthly folders on my windows machine like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\customer\\201811\\cust_data_201811.xls\nC:\\customer\\201812\\cust_data_201812.xls\nC:\\customer\\201901\\cust_data_201901.xls\n...\n</code></pre>\n\n<p>This will keep growing as the year progresses.\nI need to write a python program that will iterate over these directories, read each of these files and keep appending to a master file which will be written out to a separate xls file.\nHow can I do it?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1548884363, "post_id": 54449441, "comment_id": 95708641, "body": "Where&#39;s 2.2 in your DataFrame?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1548884431, "post_id": 54449441, "comment_id": 95708664, "body": "Perhaps <a href=\"https://stackoverflow.com/questions/53927460/how-do-i-slice-or-filter-multiindex-dataframe-levels/53927461#53927461\">Select rows in pandas MultiIndex DataFrame</a> might be useful."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1548884458, "post_id": 54449441, "comment_id": 95708674, "body": "So long as your index is lexsorted (can check with <code>df.index.is_lexsorted()</code>) the normal slicing works: <code>df[:(2,2)]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "edited": false, "score": 3, "creation_date": 1548893390, "post_id": 54451053, "comment_id": 95711342, "body": "Please consider adding some context around your code so we know what it does and why."}], "tags": [], "owner": {"reputation": 1038, "user_id": 10972959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5j5i.jpg?s=128&g=1", "display_name": "Hubert Dudek", "link": "https://stackoverflow.com/users/10972959/hubert-dudek"}, "is_accepted": false, "score": 0, "last_activity_date": 1548925724, "last_edit_date": 1548925724, "creation_date": 1548890398, "answer_id": 54451053, "question_id": 54449441, "link": "https://stackoverflow.com/questions/54449441/selecting-range-on-multi-index-pandas-dataframe/54451053#54451053", "title": "Selecting range on multi index pandas dataframe", "body": "<p>I assume that you want to select records bigger or equal than 2, 2 (2 in first and second column) so you have to do:</p>\n\n<pre><code>df.query('module_id &gt;= 2 &amp; id &gt;= 2')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1620, "user_id": 1051624, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/nA2VW.jpg?s=128&g=1", "display_name": "2083", "link": "https://stackoverflow.com/users/1051624/2083"}, "is_accepted": true, "score": 0, "last_activity_date": 1548926855, "creation_date": 1548926855, "answer_id": 54457266, "question_id": 54449441, "link": "https://stackoverflow.com/questions/54449441/selecting-range-on-multi-index-pandas-dataframe/54457266#54457266", "title": "Selecting range on multi index pandas dataframe", "body": "<p>(based on @ALollz comment, which is the right answer)</p>\n\n<p><code>df[:(2,2)]</code></p>\n"}], "owner": {"reputation": 1620, "user_id": 1051624, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/nA2VW.jpg?s=128&g=1", "display_name": "2083", "link": "https://stackoverflow.com/users/1051624/2083"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 54457266, "answer_count": 2, "score": 1, "last_activity_date": 1548926855, "creation_date": 1548881933, "question_id": 54449441, "link": "https://stackoverflow.com/questions/54449441/selecting-range-on-multi-index-pandas-dataframe", "title": "Selecting range on multi index pandas dataframe", "body": "<p>I have a pandas dataframe with a multiindex (module_id, id).\nI'm trying to select all row less than or equal to 2.2 (module_id.id)</p>\n\n<pre><code>                calculated\nmodule_id id\n1       1           False\n        2           False\n        3           False\n2       1           True\n        2           True\n        3           True\n</code></pre>\n\n<p>How would you do this?</p>\n"}, {"tags": ["python", "set", "spacy"], "comments": [{"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548882053, "post_id": 54449420, "comment_id": 95707646, "body": "Can you simplify your example?"}, {"owner": {"reputation": 430, "user_id": 6242902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea21877fc2f4b203b1b1d01c1e3649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Atonal", "link": "https://stackoverflow.com/users/6242902/atonal"}, "reply_to_user": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548882212, "post_id": 54449420, "comment_id": 95707703, "body": "@AlexYu Basically the example says I have two list of two elements. Their corresponding elements are equal to each other. But the lists themselves are not because of ordering. However the sets of those lists are not equal (why could that be?).  The later part is to show the equality of the initial list elements remains invariant across iterative applications of <code>list(set(list(set(...</code>."}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548882352, "post_id": 54449420, "comment_id": 95707773, "body": "<code>(set(a) == set(b)) == False</code> and no other manipulations with conversion to lists cannot make inequal sets equal. What&#39;s wrong in your opinion?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548882357, "post_id": 54449420, "comment_id": 95707775, "body": "can you reproduce that with pure list of strings (drop the spacy part that we cannot reproduce)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548882421, "post_id": 54449420, "comment_id": 95707800, "body": "no need to convert to a set, compare sorted lists."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1548882476, "post_id": 54449420, "comment_id": 95707835, "body": "This looks like it may actually be a spaCy bug. The <code>Token.__hash__</code> implementation seems to be inconsistent with its rich comparison method."}, {"owner": {"reputation": 430, "user_id": 6242902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea21877fc2f4b203b1b1d01c1e3649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Atonal", "link": "https://stackoverflow.com/users/6242902/atonal"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548882532, "post_id": 54449420, "comment_id": 95707860, "body": "@Jean-Fran&#231;oisFabre No. I can&#39;t replicate it with pure strings. It only happens in the code involving Spacy code. And also comparing sorted lists works fine. My curiosity however is there because Spacy code doesn&#39;t change the definition of <b>eq</b> on the sets globally so why they don&#39;t work?!"}, {"owner": {"reputation": 430, "user_id": 6242902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea21877fc2f4b203b1b1d01c1e3649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Atonal", "link": "https://stackoverflow.com/users/6242902/atonal"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1548882594, "post_id": 54449420, "comment_id": 95707895, "body": "@user2357112 That makes sense! Edit: You&#39;re right! hash(a[0]) != hash(b[1])"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1548882632, "post_id": 54449420, "comment_id": 95707909, "body": "&quot;user2357112&quot; and &quot;That makes sense&quot; are often found in the same sentence."}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1548882790, "post_id": 54449420, "comment_id": 95707985, "body": "@user2357112  Do you mean <a href=\"https://github.com/explosion/spacy/blob/master/spacy/tokens/token.pyx\" rel=\"nofollow noreferrer\">github.com/explosion/spacy/blob/master/spacy/tokens/token.py&zwnj;&#8203;x</a> ? What&#39;s wrong with <code>Token.__hash__</code> ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 2, "creation_date": 1548883026, "post_id": 54449420, "comment_id": 95708099, "body": "@AlexYu: <code>Token.__hash__</code> is using <code>self.i</code>, while the rich comparison routine is comparing <code>self.idx</code> against <code>other.idx</code>. I don&#39;t know enough about spaCy to know whether that should produce consistent results, but it&#39;s a definite red flag, and the results of Atonal&#39;s manual hash comparison indicate an inconsistency."}], "owner": {"reputation": 430, "user_id": 6242902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea21877fc2f4b203b1b1d01c1e3649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Atonal", "link": "https://stackoverflow.com/users/6242902/atonal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1548881886, "creation_date": 1548881886, "question_id": 54449420, "link": "https://stackoverflow.com/questions/54449420/why-set-equality-breaks-here", "title": "Why set equality breaks here?", "body": "<p>I have a function <code>f</code> that is defined like below:</p>\n\n<pre><code>def f(doc):\n    return filter(lambda ent: ..., doc.ents)\n</code></pre>\n\n<p><code>doc</code> is a Spacy document object and <code>doc.ents</code> returns a generator object. There's also <code>doc.noun_chunks</code> that returns a generator object. Something weird happens however:</p>\n\n<pre><code>&gt;&gt;&gt; a = list(f(doc))\n[Apple, Banana]\n\n&gt;&gt;&gt; b = list(doc.noun_chunks)\n[Banana, Apple]\n\n&gt;&gt;&gt; a[0] == b[1]\nTrue\n\n&gt;&gt;&gt; a[1] == b[0]\nTrue\n\n&gt;&gt;&gt; set(a) == set(b)\nFalse\n\n&gt;&gt;&gt; list(set(a))[0] == list(set(b))[1]\nTrue\n\n&gt;&gt;&gt; list(set(a))[1] == list(set(b))[0]\nTrue\n\n&gt;&gt;&gt; set(list(set(a))) == set(list(set(b)))\nFalse\n</code></pre>\n\n<p>Why the set equality doesn't work here?!</p>\n\n<p>P.S. I'm writing an app for a client using Spacy, so unfortunately can't paste the complete code here and also faked the names \"f\", \"Apple\" and \"Banana\"... but that shouldn't matter.</p>\n"}, {"tags": ["python", "pandas", "filter", "group-by", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1548881990, "creation_date": 1548881990, "answer_id": 54449447, "question_id": 54449406, "link": "https://stackoverflow.com/questions/54449406/find-column-values-that-are-present-for-multiple-months-in-pandas/54449447#54449447", "title": "Find column values that are present for multiple months in pandas", "body": "<p>You can do this with <code>groupby</code> and <code>nunique</code>:</p>\n\n<pre><code>u = df['DateTime'].dt.month.groupby(df.ID).nunique()\nu\n\nID\n367341012    1\n367341034    1\n367341045    2\n367341093    3\nName: DateTime, dtype: int64\n\nu.index[u &gt; 1]\n# Int64Index([367341045, 367341093], dtype='int64', name='ID')\n</code></pre>\n"}], "owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 54449447, "answer_count": 1, "score": 1, "last_activity_date": 1548887738, "creation_date": 1548881816, "last_edit_date": 1548887738, "question_id": 54449406, "link": "https://stackoverflow.com/questions/54449406/find-column-values-that-are-present-for-multiple-months-in-pandas", "title": "Find column values that are present for multiple months in pandas", "body": "<p>how to filter the ids which are existed into multiple months with DateTime in Pandas, Python 3 </p>\n\n<pre><code>DateTime             ID                                         \n2011-01-30 08:00:59 367341093   \n2011-01-30 08:03:00 367341093   \n2011-02-01 08:03:59 367341093\n2011-02-01 08:05:00 367341093\n2011-03-12 08:05:00 367341093\n2011-03-12 08:05:00 367341093\n2011-01-15 08:05:00 367341034\n2011-01-15 08:05:00 367341034\n2011-01-15 08:05:00 367341012\n2011-01-15 08:05:00 367341012\n2011-01-15 08:05:00 367341012\n2011-02-23 08:05:00 367341045\n2011-02-23 08:05:00 367341045\n2011-03-01 08:05:00 367341045\n</code></pre>\n\n<p>result should be two ids which are in multiple months 1,2 and 3</p>\n\n<pre><code>result = [367341045, 367341093]\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "intervals"], "answers": [{"comments": [{"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 0, "creation_date": 1548968593, "post_id": 54449907, "comment_id": 95746216, "body": "ValueError: cannot handle non-unique indices. I know I am getting it from &quot;idx.get_indexer(df2.index)&quot;"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1548975952, "last_edit_date": 1548975952, "creation_date": 1548884123, "answer_id": 54449907, "question_id": 54449399, "link": "https://stackoverflow.com/questions/54449399/selecting-minimum-from-dataframe-based-on-range-from-another-dataframe/54449907#54449907", "title": "Selecting minimum from dataframe based on range from another dataframe", "body": "<p>Perliminary preparation: conversion of all involved columns and indices to <code>datetime</code>.</p>\n\n<pre><code>df[['StDt', 'EnDt']] = df[['StDt', 'EnDt']].apply(pd.to_datetime, errors='coerce') \ndf2.index = pd.to_datetime(df2.index, errors='coerce')\n\ndf\n\n  Type       StDt       EnDt\n0    A 2012-01-02 2012-01-04\n1    B 2012-01-06 2012-01-06\n\ndf2\n            KBWI\nDate            \n2012-01-02  45.0\n2012-01-03  32.0\n2012-01-04  14.0\n2012-01-05  26.0\n2012-01-06  27.0\n</code></pre>\n\n<p></p>\n\n<p>One simple method is to use <code>pd.IntervalIndex</code> and <code>groupby</code> to find the minimum:</p>\n\n<pre><code>idx = pd.IntervalIndex.from_arrays(df['StDt'], df['EnDt'], closed='both')\ndf['Minimum'] = df2['KBWI'].groupby(idx.get_indexer_non_unique(df2.index)).min()\ndf\n\n  Type       StDt       EnDt  Minimum\n0    A 2012-01-02 2012-01-04     14.0\n1    B 2012-01-06 2012-01-06     27.0\n</code></pre>\n\n<p>This works assuming <code>df</code>'s index is also a <code>RangeIndex</code> (numeric, monotonically increasing).</p>\n"}], "owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 54449907, "answer_count": 1, "score": 1, "last_activity_date": 1554177526, "creation_date": 1548881795, "last_edit_date": 1554177526, "question_id": 54449399, "link": "https://stackoverflow.com/questions/54449399/selecting-minimum-from-dataframe-based-on-range-from-another-dataframe", "title": "Selecting minimum from dataframe based on range from another dataframe", "body": "<p>I have a datafrme <code>df1</code> as:</p>\n\n<pre><code>Type    StDt    EnDt\nA   1/2/2012    1/4/2012\nB   1/6/2012    1/6/2012\n</code></pre>\n\n<p>I have another dataframe <code>df2</code> with all dates until 2019 as:</p>\n\n<pre><code>             KBWI\nDate             \n2012-01-02  45.00\n2012-01-03  32.00\n2012-01-04  14.00\n2012-01-05  26.00\n2012-01-06  27.00\n</code></pre>\n\n<p>For each row in <code>df1</code>, I need to use the date range StDt, EnDt to extract all rows from df2 and take its minimum to get the following:</p>\n\n<pre><code>Type    StDt    EnDt       Minimum\nA   1/2/2012    1/4/2012   14.00\nB   1/6/2012    1/6/2012   27.00\n</code></pre>\n\n<p>I am not sure how to do it efficiently as dataframes are large.</p>\n"}, {"tags": ["python", "sympy"], "owner": {"reputation": 121, "user_id": 10796828, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VS1HsvKWYmg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaO-7EbnKsJWrMRZyIVoBKlSA8kocQ/mo/photo.jpg?sz=128", "display_name": "Alex Marshall", "link": "https://stackoverflow.com/users/10796828/alex-marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548881590, "creation_date": 1548881590, "question_id": 54449349, "link": "https://stackoverflow.com/questions/54449349/generate-a-multi-variable-polynomial-in-sympy", "title": "Generate a multi variable polynomial in sympy", "body": "<p>I have several lists with the coefficients of some multivariate polynomials, and I need to write them in a polynomial form. For example, for the code below</p>\n\n<pre><code>from sympy import Poly\n\nlist = [0,1,2,3,4,5]\n\nx = sym.Symbol('x')\ny = sym.Symbol('y')\nprint(Poly([0,1,2,3,4,5],x,y))\n</code></pre>\n\n<p>I want to have printed x+2*x*y+3*x^2+4*y+5*y^2. But I am getting this error <code>sympy.polys.polyerrors.MultivariatePolynomialError: 'list' representation not supported</code> Can someone help me with this? Thank you!</p>\n"}, {"tags": ["python", "list", "numpy", "for-loop", "probability"], "comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1548882034, "post_id": 54449345, "comment_id": 95707635, "body": "what are x and y in this method?"}, {"owner": {"reputation": 419, "user_id": 7039236, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c719c5b1913841ced259e0847ab152f?s=128&d=identicon&r=PG&f=1", "display_name": "MeC", "link": "https://stackoverflow.com/users/7039236/mec"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1548893829, "post_id": 54449345, "comment_id": 95711446, "body": "x and y are irrelevant. just two random equations."}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1548898755, "post_id": 54449345, "comment_id": 95712702, "body": "My bad, was wondering was all. GL"}], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 7039236, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c719c5b1913841ced259e0847ab152f?s=128&d=identicon&r=PG&f=1", "display_name": "MeC", "link": "https://stackoverflow.com/users/7039236/mec"}, "edited": false, "score": 0, "creation_date": 1548893791, "post_id": 54449469, "comment_id": 95711431, "body": "Hm, yes I see that I didn&#39;t explain what I wanted well enough. I want to iterate through a list of probabilities so setting an arbitrary cutoff won&#39;t work. I edited my explanation now."}, {"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "reply_to_user": {"reputation": 419, "user_id": 7039236, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c719c5b1913841ced259e0847ab152f?s=128&d=identicon&r=PG&f=1", "display_name": "MeC", "link": "https://stackoverflow.com/users/7039236/mec"}, "edited": false, "score": 0, "creation_date": 1548905745, "post_id": 54449469, "comment_id": 95714122, "body": "Ah, okay. In that case I&#39;d do it similarly except instead of checking <code>p &lt; cutoff</code> I&#39;d check <code>random() &lt; p</code>."}, {"owner": {"reputation": 419, "user_id": 7039236, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c719c5b1913841ced259e0847ab152f?s=128&d=identicon&r=PG&f=1", "display_name": "MeC", "link": "https://stackoverflow.com/users/7039236/mec"}, "edited": false, "score": 0, "creation_date": 1548960991, "post_id": 54449469, "comment_id": 95742743, "body": "That&#39;s great, I came to a similar conclusion. Thank you for all the options - I learned something new about lambda functions."}], "tags": [], "owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "is_accepted": true, "score": 2, "last_activity_date": 1548905689, "last_edit_date": 1548905689, "creation_date": 1548882079, "answer_id": 54449469, "question_id": 54449345, "link": "https://stackoverflow.com/questions/54449345/how-to-probabilistically-populate-a-list-in-python/54449469#54449469", "title": "How to probabilistically populate a list in python?", "body": "<p>You've already generated a list of probabilities - <code>p_list</code> - that correspond to each value in <code>my_list</code> you want to generate. The pythonic way to do so is via a a ternary operator and a list comprehension:</p>\n\n<pre><code>import random\nmy_list = [(x*y if random() &lt; p else x-y) for p in p_list]\n</code></pre>\n\n<p>If we were to expand this into a proper <code>for</code> loop:</p>\n\n<pre><code>my_list = []\nfor p in p_list:\n    if random() &lt; p:\n        my_list.append(x*y)\n    else:\n        my_list.append(x-y)\n</code></pre>\n\n<hr>\n\n<p>If we wanted to be even more pythonic, regarding <code>calc1</code> and <code>calc2</code>, we could make them into lambdas:</p>\n\n<pre><code>calc1 = lambda x,y: x*y\ncalc2 = lambda x,y: x-y\n...\nmy_list = [calc1(x,y) if random() &lt; p else calc2(x,y) for p in p_list]\n</code></pre>\n\n<p>or, depending on how <code>x</code> and <code>y</code> vary for your function (assuming they're not static), you could even do the comprehension in two steps:</p>\n\n<pre><code>calc_list = [calc1 if random() &lt; p else calc2 for p in p_list]\nmy_list = [calc(x,y) for calc in calc_list]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 7039236, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c719c5b1913841ced259e0847ab152f?s=128&d=identicon&r=PG&f=1", "display_name": "MeC", "link": "https://stackoverflow.com/users/7039236/mec"}, "edited": false, "score": 0, "creation_date": 1548961023, "post_id": 54449499, "comment_id": 95742754, "body": "Thanks, I appreciate minimal changes to the original code."}], "tags": [], "owner": {"reputation": 3571, "user_id": 2693875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7853fb2bdc0b5958a28da6984178c82?s=128&d=identicon&r=PG", "display_name": "Greg Dubicki", "link": "https://stackoverflow.com/users/2693875/greg-dubicki"}, "is_accepted": false, "score": 1, "last_activity_date": 1548882231, "creation_date": 1548882231, "answer_id": 54449499, "question_id": 54449345, "link": "https://stackoverflow.com/questions/54449345/how-to-probabilistically-populate-a-list-in-python/54449499#54449499", "title": "How to probabilistically populate a list in python?", "body": "<p>I took approach of minimal changes to the original code and easy to understand syntax:</p>\n\n<pre><code>import numpy as np\n\np_list = np.random.uniform(low=0.0, high=1.0, size=(500,))\n\nmy_list = []\n\n# uncomment below 2 lines to make this code syntactially correct\n#x = 1\n#y = 2\n\nfor p in p_list:\n        # randoms are uniformly distributed over the half-open interval [low, high)\n        # so check if p is in [0, 0.5) for equation 1 or [0.5, 1) for equation 2\n        if p &lt; 0.5:\n                calc1 = x*y # equation 1\n                my_list.append(calc1)\n        else:\n                calc2 = (x-y) # equation 2\n                my_list.append(calc2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "is_accepted": false, "score": 0, "last_activity_date": 1548894634, "creation_date": 1548894634, "answer_id": 54451675, "question_id": 54449345, "link": "https://stackoverflow.com/questions/54449345/how-to-probabilistically-populate-a-list-in-python/54451675#54451675", "title": "How to probabilistically populate a list in python?", "body": "<p>The other answers seem to assume you want to keep the calculated chances around. If all you are after is a list of results for which equation 1 was used p% of the time and equation 2  100-p% of the time, this is all you need:</p>\n\n<pre><code>from random import random, seed\n\ninputs = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\n# change the seed to see different 'random' outcomes\nseed(1)\nresults = [x * x if random() &gt; 0.5 else 2 * x for x in inputs]\n\nprint(results)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2706549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6ea782d2ced3e63b5939213e4d428f?s=128&d=identicon&r=PG&f=1", "display_name": "vRathee", "link": "https://stackoverflow.com/users/2706549/vrathee"}, "is_accepted": false, "score": 0, "last_activity_date": 1548956123, "creation_date": 1548956123, "answer_id": 54466256, "question_id": 54449345, "link": "https://stackoverflow.com/questions/54449345/how-to-probabilistically-populate-a-list-in-python/54466256#54466256", "title": "How to probabilistically populate a list in python?", "body": "<p>If you are ok to use numpy worth trying the choice method.</p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy-1.14.1/reference/generated/numpy.random.choice.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy-1.14.1/reference/generated/numpy.random.choice.html</a></p>\n"}], "owner": {"reputation": 419, "user_id": 7039236, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c719c5b1913841ced259e0847ab152f?s=128&d=identicon&r=PG&f=1", "display_name": "MeC", "link": "https://stackoverflow.com/users/7039236/mec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 54449469, "answer_count": 4, "score": 4, "last_activity_date": 1548956123, "creation_date": 1548881583, "last_edit_date": 1548893757, "question_id": 54449345, "link": "https://stackoverflow.com/questions/54449345/how-to-probabilistically-populate-a-list-in-python", "title": "How to probabilistically populate a list in python?", "body": "<p>I want to use a basic for loop to populate a list of values in Python but I would like the values to be calculate probabilistically such that p% of the time the values are calculated in (toy) equation 1 and 100-p% of the time the values are calculated in equation 2. </p>\n\n<p>Here's what I've got so far:</p>\n\n<pre><code>    # generate list of random probabilities \n    p_list = np.random.uniform(low=0.0, high=1.0, size=(500,))\n    my_list = []\n\n    # loop through but where to put 'p'? append() should probably only appear once\n    for p in p_list:\n        calc1 = x*y # equation 1\n        calc2 = (x-y) # equation 2\n        my_list.append(calc1)\n        my_list.append(calc2)\n</code></pre>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 461, "user_id": 3223037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5e3ac2a7520b10158039e7a2ead7946?s=128&d=identicon&r=PG&f=1", "display_name": "BillyJo_rambler", "link": "https://stackoverflow.com/users/3223037/billyjo-rambler"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1548881753, "post_id": 54449335, "comment_id": 95707531, "body": "I am not sure I understand what you mean? I thought I was modifying &#39;pimp&#39; and not the num_list?"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1548881904, "post_id": 54449335, "comment_id": 95707590, "body": "In your second example, each iteration of the loop is creating it&#39;s own copy of <code>[[1,2,3,4,5], [1,2,3,4,5]]</code>. In the first example, you are iterating over <code>num_list</code> each time - which means you are modifying the lists in <code>num_list</code>."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548881992, "post_id": 54449335, "comment_id": 95707629, "body": "@Jean-Fran&#231;oisFabre I&#39;m not sure this is the quite the same thing as the duplicate. Because the OP is not modifying the item they are iterating over... This is a list of lists."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548882009, "post_id": 54449335, "comment_id": 95707631, "body": "yes too trigger happy. Reopened. But now it&#39;s unclear :)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548882159, "post_id": 54449335, "comment_id": 95707679, "body": "there is no difference, except that you&#39;re keeping the reference of the lists you removed as <code>num_list</code>. What do you want to achieve? make a copy of the lists if you don&#39;t want them altered."}, {"owner": {"reputation": 461, "user_id": 3223037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5e3ac2a7520b10158039e7a2ead7946?s=128&d=identicon&r=PG&f=1", "display_name": "BillyJo_rambler", "link": "https://stackoverflow.com/users/3223037/billyjo-rambler"}, "edited": false, "score": 0, "creation_date": 1548882294, "post_id": 54449335, "comment_id": 95707737, "body": "I use num_list on different loops throughout my code, so I was not aware it was being altered. I assumed (being a noob) that by iterating over it and modiying &#39;pimp&#39;, I was only modifying &#39;pimp&#39; and not the original list of lists."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1548883111, "post_id": 54449335, "comment_id": 95708125, "body": "Iterating over <code>num_list</code> means <code>pimp</code> is a reference to each list in <code>num_list</code>, so when you modify it you are changing the list in <code>num_list</code>. Create a copy if you don&#39;t want this side effect."}, {"owner": {"reputation": 461, "user_id": 3223037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5e3ac2a7520b10158039e7a2ead7946?s=128&d=identicon&r=PG&f=1", "display_name": "BillyJo_rambler", "link": "https://stackoverflow.com/users/3223037/billyjo-rambler"}, "edited": false, "score": 0, "creation_date": 1548883305, "post_id": 54449335, "comment_id": 95708205, "body": "Perfect, thanks for the advice."}], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 3223037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5e3ac2a7520b10158039e7a2ead7946?s=128&d=identicon&r=PG&f=1", "display_name": "BillyJo_rambler", "link": "https://stackoverflow.com/users/3223037/billyjo-rambler"}, "edited": false, "score": 0, "creation_date": 1548883256, "post_id": 54449395, "comment_id": 95708185, "body": "Perfect, I will have a read about deep (and shallow) copying.. Thanks for this."}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 1, "last_activity_date": 1548881782, "creation_date": 1548881782, "answer_id": 54449395, "question_id": 54449335, "link": "https://stackoverflow.com/questions/54449335/my-list-of-lists-is-being-altered-and-i-dont-know-why/54449395#54449395", "title": "My list of lists is being altered and I dont know why", "body": "<p>Currently when you do <code>for pimp in num_list</code>, you are iterating over the reference to your original list <code>num_list</code>. So you changes in the <code>pimp</code> are reflected in the original nested <code>num_list</code>. To avoid it, you need to create a deep copy of your <code>num_list</code> in your for loop. This can be done using <code>deepcopy</code> which creates a copy of nested lists including all sublists.</p>\n\n<pre><code>from copy import deepcopy\n\nnum_list = [[1,2,3,4,5], [1,2,3,4,5]]\nfor num in [1,2,3,4,5]:\n    for pimp in deepcopy(num_list):\n        if num in pimp:\n            pimp.remove(num)\n        print(pimp)\n</code></pre>\n\n<hr>\n\n<pre><code>[2, 3, 4, 5]\n[2, 3, 4, 5]\n[1, 3, 4, 5]\n[1, 3, 4, 5]\n[1, 2, 4, 5]\n[1, 2, 4, 5]\n[1, 2, 3, 5]\n[1, 2, 3, 5]\n[1, 2, 3, 4]\n[1, 2, 3, 4]\n</code></pre>\n"}], "owner": {"reputation": 461, "user_id": 3223037, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5e3ac2a7520b10158039e7a2ead7946?s=128&d=identicon&r=PG&f=1", "display_name": "BillyJo_rambler", "link": "https://stackoverflow.com/users/3223037/billyjo-rambler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 54449395, "answer_count": 1, "score": 0, "last_activity_date": 1548881990, "creation_date": 1548881524, "question_id": 54449335, "link": "https://stackoverflow.com/questions/54449335/my-list-of-lists-is-being-altered-and-i-dont-know-why", "title": "My list of lists is being altered and I dont know why", "body": "<p>I have this small loop, which loops over some numbers, then loops over a list of list. If the number within the first loop is within the loop, it is removed. However, I noticed that this ie being removed from the list of list and not the list from withe loop. Code below</p>\n\n<pre><code>num_list = [[1,2,3,4,5], [1,2,3,4,5]]\nfor num in [1,2,3,4,5]:\n    for pimp in num_list:\n        if num in pimp:\n            pimp.remove(num)\n        print(pimp)\n</code></pre>\n\n<p>Yet, it works as expected in the following code:</p>\n\n<pre><code>for num in [1,2,3,4,5]:\n    for pimp in [[1,2,3,4,5], [1,2,3,4,5]]:\n        if num in pimp:\n            pimp.remove(num)\n        print(pimp)\n</code></pre>\n\n<p>What is the difference? What am I missing here?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 11571, "user_id": 6466279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Reprk.jpg?s=128&g=1", "display_name": "Kannan Kandasamy", "link": "https://stackoverflow.com/users/6466279/kannan-kandasamy"}, "edited": false, "score": 1, "creation_date": 1548881551, "post_id": 54449322, "comment_id": 95707442, "body": "What code you tried so far?"}, {"owner": {"reputation": 577, "user_id": 10209499, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z61xy9mE50w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oAmAsQVz5u8JEjZ4Zlf3NNzI1Nug/mo/photo.jpg?sz=128", "display_name": "Maria Nazari", "link": "https://stackoverflow.com/users/10209499/maria-nazari"}, "reply_to_user": {"reputation": 11571, "user_id": 6466279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Reprk.jpg?s=128&g=1", "display_name": "Kannan Kandasamy", "link": "https://stackoverflow.com/users/6466279/kannan-kandasamy"}, "edited": false, "score": 0, "creation_date": 1548882082, "post_id": 54449322, "comment_id": 95707649, "body": "@KannanKandasamy I tried using pivot, but it doesn&#39;t give me what I am looking for ... I&#39;m playing around using metl and pivot but not luck yet"}, {"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 0, "creation_date": 1548882190, "post_id": 54449322, "comment_id": 95707694, "body": "Maybe you will find something like this of help: <code>pd.get_dummies(df, columns=[&quot;product&quot;]).groupby(&quot;recipe&quot;).sum(min_count=1)</code>"}, {"owner": {"reputation": 577, "user_id": 10209499, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z61xy9mE50w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oAmAsQVz5u8JEjZ4Zlf3NNzI1Nug/mo/photo.jpg?sz=128", "display_name": "Maria Nazari", "link": "https://stackoverflow.com/users/10209499/maria-nazari"}, "reply_to_user": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 0, "creation_date": 1548882654, "post_id": 54449322, "comment_id": 95707921, "body": "@gorjan your code is interesting, but I have thousands of products names, and only want the top 10. Your method will not work. I also want the columns to be labeled product 1 - 10 and with the actual product names in the cells."}, {"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 0, "creation_date": 1548882954, "post_id": 54449322, "comment_id": 95708064, "body": "What do you mean by top 10?"}, {"owner": {"reputation": 577, "user_id": 10209499, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z61xy9mE50w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oAmAsQVz5u8JEjZ4Zlf3NNzI1Nug/mo/photo.jpg?sz=128", "display_name": "Maria Nazari", "link": "https://stackoverflow.com/users/10209499/maria-nazari"}, "reply_to_user": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 0, "creation_date": 1548883694, "post_id": 54449322, "comment_id": 95708369, "body": "@gorjan so I will have 100s of products matched to each recipe, and I only want the top n of these based on their another column called cos_score. I don&#39;t want 100s of product columns, I just want the top n products for each recipe."}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1548884328, "creation_date": 1548884328, "answer_id": 54449950, "question_id": 54449322, "link": "https://stackoverflow.com/questions/54449322/how-to-pivot-pandas-dataframe-on-specific-rows/54449950#54449950", "title": "How to pivot pandas dataframe on specific rows", "body": "<p>This is actually a <code>groupby</code> and <a href=\"https://stackoverflow.com/questions/53218931/how-do-i-unnest-explode-a-column-in-a-pandas-dataframe\">unnesting</a> problem.</p>\n\n<pre><code>u = df.groupby('recipe')['product'].apply(list)\npd.DataFrame(u.tolist(), index=u.index).rename(lambda x: 'p{}'.format(x+1), axis=1)\n\n       p1 p2 p3 p4 p5 p6\nrecipe                  \na       A  B  C  D  E  F\nb       A  B  G  I  K  F\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 10209499, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z61xy9mE50w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oAmAsQVz5u8JEjZ4Zlf3NNzI1Nug/mo/photo.jpg?sz=128", "display_name": "Maria Nazari", "link": "https://stackoverflow.com/users/10209499/maria-nazari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 54449950, "answer_count": 1, "score": 1, "last_activity_date": 1548884328, "creation_date": 1548881462, "last_edit_date": 1548881577, "question_id": 54449322, "link": "https://stackoverflow.com/questions/54449322/how-to-pivot-pandas-dataframe-on-specific-rows", "title": "How to pivot pandas dataframe on specific rows", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>df = pd.DataFrame({'recipe': ['a', 'a', 'a', 'a', 'a','a', 'b', 'b', 'b', 'b', 'b','b'],\n                   'product': ['A', 'B', 'C', 'D', 'E', 'F', 'A', 'B', 'G', 'I', 'K', 'F']})\n</code></pre>\n\n<p>And I want to pivot the dataframe for the output to have one row for each recipe and multiple columns for each product, ex:</p>\n\n<pre><code>recipe  p1  p2  p3  p4  p5  p6\na       A   B   C   D   E   F\nb       A   B   G   I   K   F\n</code></pre>\n\n<p>Also, there are multiple products, but I want the top 6 based on another column that gives a ranking for how relevant the product is</p>\n"}, {"tags": ["python", "json", "flask"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1548881711, "post_id": 54449318, "comment_id": 95707518, "body": "That&#39;s... improbable. Forward slashes don&#39;t need escaping in JSON -- only backslashes do -- and I&#39;ve never seen an engine that tries to escape forward slashes (since doing so would make its behavior contrary-to-spec). Could you provide a <i>complete</i> <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> -- that is, the shortest code code someone can run themselves <i>without needing to add or change anything</i> to see the problem?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1548882047, "post_id": 54449318, "comment_id": 95707642, "body": "That said, what is the <code>json</code> function you&#39;re using here? Where did it come from? If you included your <code>import</code>s, we might already know, but as it is, the question isn&#39;t complete enough to know what you&#39;re trying to do even as-is."}, {"owner": {"reputation": 340, "user_id": 6479865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cb335108aa0a4b6a65984a2f602c44?s=128&d=identicon&r=PG", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/6479865/vaibhav"}, "edited": false, "score": 0, "creation_date": 1548882332, "post_id": 54449318, "comment_id": 95707758, "body": "Which library are you using? (ie. where is the <code>json</code> function from?)"}, {"owner": {"reputation": 2851, "user_id": 8003790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439b528b13c53ea231f24bb46136c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "IMCoins", "link": "https://stackoverflow.com/users/8003790/imcoins"}, "edited": false, "score": 0, "creation_date": 1548928097, "post_id": 54449318, "comment_id": 95723361, "body": "You should use <a href=\"https://flask-restplus.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">flask-restplus</a>. :)"}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 3629284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce149d07ecada6f0ec130900e3dfed8?s=128&d=identicon&r=PG&f=1", "display_name": "Debendra", "link": "https://stackoverflow.com/users/3629284/debendra"}, "is_accepted": false, "score": 2, "last_activity_date": 1548927707, "last_edit_date": 1548927707, "creation_date": 1548882505, "answer_id": 54449563, "question_id": 54449318, "link": "https://stackoverflow.com/questions/54449318/flask-disable-json-response-escaping/54449563#54449563", "title": "Flask disable JSON response escaping", "body": "<p>Use built in json response method.</p>\n\n<pre><code>from flask import jsonify\n\n@app.route('/login/')\ndef login():\n    return jsonify({\"url\": \"https://www.google.com/\"})\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6542022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5TT7z.png?s=128&g=1", "display_name": "DavidShefcik", "link": "https://stackoverflow.com/users/6542022/davidshefcik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548927707, "creation_date": 1548881447, "question_id": 54449318, "link": "https://stackoverflow.com/questions/54449318/flask-disable-json-response-escaping", "title": "Flask disable JSON response escaping", "body": "<p>I am trying to pass a url in a json response for a REST API using flask and when I try to send a url it goes from \"<a href=\"https://www.google.com/\" rel=\"nofollow noreferrer\">https://www.google.com/</a>\" to /\\ on the slashes. How can I prevent this from happening?</p>\n\n<p>Already tried decoding to utf-8. Already tried passing as a variable.</p>\n\n<pre><code>def login():\n    return json({\"url\": \"https://www.google.com/\"})\n</code></pre>\n\n<p>Not change slashes in url.</p>\n"}, {"tags": ["python", "apache-spark", "bigdata", "oozie", "hue"], "comments": [{"owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 0, "creation_date": 1548881304, "post_id": 54449240, "comment_id": 95707314, "body": "&quot;<code>ImportError: No module named happybase</code>&quot; &lt;- Are you sure you have the <code>happybase</code> module installed on the actual cluster you&#39;re submitting to?"}, {"owner": {"reputation": 31, "user_id": 10992575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Aqxsc023OJc/AAAAAAAAAAI/AAAAAAAAAg0/tPNhZA9dXBg/photo.jpg?sz=128", "display_name": "Carlos Segovia", "link": "https://stackoverflow.com/users/10992575/carlos-segovia"}, "reply_to_user": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 0, "creation_date": 1548882336, "post_id": 54449240, "comment_id": 95707760, "body": "Thanks for answering Jordan My Happybase dependency is installed on the virtualenv that I want to use. When I use the &quot;spark-submit&quot; command in the console directly I have no problem since I configure the Spark as follows: PYSPARK_PYTHON =path_to_venv PYSPARK_DRIVER_PYTHON =path_to_venv spark.yarn.appMasterEnv.PYSPARK_PYTHON =path_to_venv spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON =path_to_venv  The problem seems to be that HUE ignores my configuration and wants to use the default python environment of the OS"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10992575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Aqxsc023OJc/AAAAAAAAAAI/AAAAAAAAAg0/tPNhZA9dXBg/photo.jpg?sz=128", "display_name": "Carlos Segovia", "link": "https://stackoverflow.com/users/10992575/carlos-segovia"}, "is_accepted": true, "score": 0, "last_activity_date": 1549285166, "creation_date": 1549285166, "answer_id": 54516675, "question_id": 54449240, "link": "https://stackoverflow.com/questions/54449240/error-submitting-workflow-in-hue-dependencies-import-error/54516675#54516675", "title": "Error submitting workflow in HUE | Dependencies Import error", "body": "<p>With the help of Cloudera Support I was solved this problem in this way: </p>\n\n<ol>\n<li><p>Add the below to the spark opts:</p>\n\n<p>--conf spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON=path_to_venv  --conf spark.yarn.appMasterEnv.PYSPARK_PYTHON=path_to_venv</p></li>\n</ol>\n\n<p>2, The Spark Launcher also needs this environment variable set, so set this as a job property</p>\n\n<pre><code>&lt;property&gt; \n&lt;name&gt;oozie.launcher.mapred.child.env&lt;/name&gt; \n&lt;value&gt;PYSPARK_PYTHON=path_to_venv&lt;/value&gt; \n&lt;/property&gt;\n</code></pre>\n\n<ul>\n<li>Obviously the <strong><em>path_to_venv</em></strong> must be in the same path in all the nodes of the cluster.  </li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 10992575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Aqxsc023OJc/AAAAAAAAAAI/AAAAAAAAAg0/tPNhZA9dXBg/photo.jpg?sz=128", "display_name": "Carlos Segovia", "link": "https://stackoverflow.com/users/10992575/carlos-segovia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 1, "accepted_answer_id": 54516675, "answer_count": 1, "score": 2, "last_activity_date": 1549285166, "creation_date": 1548881068, "last_edit_date": 1548886596, "question_id": 54449240, "link": "https://stackoverflow.com/questions/54449240/error-submitting-workflow-in-hue-dependencies-import-error", "title": "Error submitting workflow in HUE | Dependencies Import error", "body": "<p>I get an import error when I submit a workflow with Hue, which contains a Spark-Action. </p>\n\n<p>The traceback is below:</p>\n\n<pre><code>2019-01-30 16:31:48,048 [main] INFO  org.apache.spark.deploy.yarn.ApplicationMaster  - Waiting for spark context initialization...\n\nTraceback (most recent call last):\n  File \"mover.py\", line 7, in &lt;module&gt;\n    import happybase\nImportError: No module named happybase\n2019-01-30 16:31:48,169 [Driver] ERROR org.apache.spark.deploy.yarn.ApplicationMaster  - User application exited with status 1\n</code></pre>\n\n<p>In my cluster I have a Python virtualenv enviroment with all my dependencies, my cluster was configured using the Cloudera instructions for Spark, here: <a href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/spark_python.html\" rel=\"nofollow noreferrer\">https://www.cloudera.com/documentation/enterprise/latest/topics/spark_python.html</a></p>\n\n<p>When I use the spark-submit command in the console, I can run my app without any problems. The problems just appears when I use Hue.</p>\n\n<p>Researching I found this article <a href=\"http://www.learn4master.com/big-data/pyspark/run-pyspark-on-oozie\" rel=\"nofollow noreferrer\">http://www.learn4master.com/big-data/pyspark/run-pyspark-on-oozie</a> and I tried to do the same thing without success. </p>\n\n<p>My workflow code generated by Hue is: </p>\n\n<pre><code>&lt;workflow-app name=\"Copy by hour\" xmlns=\"uri:oozie:workflow:0.5\"&gt;\n&lt;start to=\"spark-c88a\"/&gt;\n&lt;kill name=\"Kill\"&gt;\n&lt;message&gt;Action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]&lt;/message&gt;\n&lt;/kill&gt;\n&lt;action name=\"spark-c88a\" retry-max=\"1\" retry-interval=\"1\"&gt;\n&lt;spark xmlns=\"uri:oozie:spark-action:0.2\"&gt;\n&lt;job-tracker&gt;${jobTracker}&lt;/job-tracker&gt;\n&lt;name-node&gt;${nameNode}&lt;/name-node&gt;\n&lt;configuration&gt;\n&lt;property&gt;\n&lt;name&gt;spark.executorEnv.PYSPARK_PYTHON&lt;/name&gt;\n&lt;value&gt;/opt/env_cluster/bin/python2&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n&lt;name&gt;spark.yarn.appMasterEnv.PYSPARK_PYTHON&lt;/name&gt;\n&lt;value&gt;/opt/env_cluster/bin/python2&lt;/value&gt;\n&lt;/property&gt;\n&lt;/configuration&gt;\n&lt;master&gt;yarn&lt;/master&gt;\n&lt;mode&gt;cluster&lt;/mode&gt;\n&lt;name&gt;landing_to_daily&lt;/name&gt;\n&lt;jar&gt;mover.py&lt;/jar&gt;\n&lt;arg&gt;1&lt;/arg&gt;\n&lt;arg&gt;-s&lt;/arg&gt;\n&lt;arg&gt;eir_landing&lt;/arg&gt;\n&lt;arg&gt;-d&lt;/arg&gt;\n&lt;arg&gt;eir_daily&lt;/arg&gt;\n&lt;file&gt;/user/spark/eir/apps/mover.py#mover.py&lt;/file&gt;\n&lt;/spark&gt;\n&lt;ok to=\"End\"/&gt;\n&lt;error to=\"email-77d4\"/&gt;\n&lt;/action&gt;\n&lt;action name=\"email-77d4\"&gt;\n&lt;email xmlns=\"uri:oozie:email-action:0.2\"&gt;\n&lt;to&gt;prueba@mail.com&lt;/to&gt;\n&lt;subject&gt;Error | Copy by hour&lt;/subject&gt;\n&lt;body&gt;Error in Workflow landing to daily &lt;/body&gt;\n&lt;content_type&gt;text/plain&lt;/content_type&gt;\n&lt;/email&gt;\n&lt;ok to=\"Kill\"/&gt;\n&lt;error to=\"Kill\"/&gt;\n&lt;/action&gt;\n&lt;end name=\"End\"/&gt;\n&lt;/workflow-app&gt;\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1548881105, "post_id": 54449221, "comment_id": 95707222, "body": "<code>os.listdir</code> returns a list. What exactly are you trying to do?"}, {"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 1, "creation_date": 1548881107, "post_id": 54449221, "comment_id": 95707224, "body": "<code>files = os.listdir(&quot;.&#47;oldcsv&quot;)</code> and then just do whatever with it."}, {"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1548881150, "post_id": 54449221, "comment_id": 95707251, "body": "and i really dont see why you cant use an append here."}, {"owner": {"reputation": 41, "user_id": 10601256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVzkA.jpg?s=128&g=1", "display_name": "MichaelP", "link": "https://stackoverflow.com/users/10601256/michaelp"}, "edited": false, "score": 0, "creation_date": 1548881417, "post_id": 54449221, "comment_id": 95707373, "body": "OK this seems like a brainfart on my side. &quot;List&quot; is even in the name. I was just trying to create a new list and put the output of listdir in there with append, which naturally won&#39;t work, because I can&#39;t append a list as entry of a list. Sorry that I can&#39;t give you both a check for &quot;answered question&quot; and I probably need more sleep. Or sugar to get my brain working again."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10601256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVzkA.jpg?s=128&g=1", "display_name": "MichaelP", "link": "https://stackoverflow.com/users/10601256/michaelp"}, "edited": false, "score": 0, "creation_date": 1548886719, "post_id": 54449463, "comment_id": 95709448, "body": "This is actually 100% what I was looking for. Works perfectly. Great tool, thanks again!"}], "tags": [], "owner": {"reputation": 613, "user_id": 7230752, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6d89885a9eb7e005ab6acf3c71099fbf?s=128&d=identicon&r=PG", "display_name": "tidylobster", "link": "https://stackoverflow.com/users/7230752/tidylobster"}, "is_accepted": true, "score": 1, "last_activity_date": 1548882067, "creation_date": 1548882067, "answer_id": 54449463, "question_id": 54449221, "link": "https://stackoverflow.com/questions/54449221/how-to-save-os-listdir-output-as-list/54449463#54449463", "title": "How to save os.listdir output as list", "body": "<p>There's a <a href=\"https://docs.python.org/3/library/glob.html\" rel=\"nofollow noreferrer\">glob</a> module in the standard library that can solve your problem with a single function call: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import glob \n\ncsv_files = glob.glob(\"./*.csv\")  # get all .csv files from the working dir\nassert isinstance(csv_files, list)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10601256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVzkA.jpg?s=128&g=1", "display_name": "MichaelP", "link": "https://stackoverflow.com/users/10601256/michaelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 54449463, "answer_count": 1, "score": 0, "last_activity_date": 1548882067, "creation_date": 1548880966, "question_id": 54449221, "link": "https://stackoverflow.com/questions/54449221/how-to-save-os-listdir-output-as-list", "title": "How to save os.listdir output as list", "body": "<p>I am trying to save all entries of <code>os.listdir(\"./oldcsv\")</code> separately in a list but I don't know how to manipulate the output before it is processed.</p>\n\n<p>What I am trying to do is generate a list containing the absolute pathnames of all *.csv files in a folder, which can later be used to easily manipulate those files' contents. I don't want to put lots of hardcoded pathnames in the script, as it is annoying and hard to read.</p>\n\n<pre><code>import os\n\nfor file in os.listdir(\"./oldcsv\"):\n    if file.endswith(\".csv\"):\n        print(os.path.join(\"/oldcsv\", file))\n</code></pre>\n\n<p>Normally I would use a loop with <code>.append</code> but in this case I cannot do so, since <code>os.listdir</code> just seems to create a \"blob\" of content. Probably there is an easy solution out there, but my brain won't think of it.</p>\n"}, {"tags": ["python", "xlsxwriter"], "comments": [{"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1548887915, "post_id": 54449209, "comment_id": 95709877, "body": "You will need to create a small working example that demonstrates the issue."}, {"owner": {"reputation": 19, "user_id": 8027302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ahgOH2qA6AA/AAAAAAAAAAI/AAAAAAAAAD8/Vk82644HPkc/photo.jpg?sz=128", "display_name": "Leonardo Leal", "link": "https://stackoverflow.com/users/8027302/leonardo-leal"}, "reply_to_user": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1548896732, "post_id": 54449209, "comment_id": 95712223, "body": "@jmcnamara I&#39;m sorry to not put an example of my code, that&#39;s because I have a big one but I have good news, I&#39;ve just found the problem few minutes ago and it was my mistake. I was setting a font_size style with px as string like this &#39;18px&#39;. My apologize and thanks."}], "owner": {"reputation": 19, "user_id": 8027302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ahgOH2qA6AA/AAAAAAAAAAI/AAAAAAAAAD8/Vk82644HPkc/photo.jpg?sz=128", "display_name": "Leonardo Leal", "link": "https://stackoverflow.com/users/8027302/leonardo-leal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548880934, "creation_date": 1548880934, "question_id": 54449209, "link": "https://stackoverflow.com/questions/54449209/excel-unable-to-get-css-styles-from-xlsxwriter-python", "title": "Excel unable to get css styles from xlsxwriter python", "body": "<p>I am creating a report in xlsxwriter with some styles like merged cells, font styles, colors, etc...</p>\n\n<p>All code seems right, I'm following the docs and tips and the file is being saved correctly but when I try to open the file on Microsoft Excel it says that the file has some corrupted styles.</p>\n\n<p>When I open the file on Libre Office, Numbers and Wps, everything works well..</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548881446, "post_id": 54449197, "comment_id": 95707388, "body": "Not sure what you mean in the first &quot;bad&quot; idea; <code>x*x</code> matches <code>xxx</code>. It fails on the <i>first</i> attempt, since <code>x*</code> indeed matches everything and there is nothing left for the trailing <code>x</code> to match, but the RE engine then backtracks and tries matching again, being &quot;less greedy&quot; with <code>x*</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548881590, "post_id": 54449197, "comment_id": 95707465, "body": "Yes, regular expressions are just strings, so you just concatenate them with <code>+</code>. (<code>x*x</code> isn&#39;t as <i>efficient</i> as <code>xx*</code> would be, but that&#39;s a different problem.)"}, {"owner": {"reputation": 14015, "user_id": 1441328, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b96e85a38e05615837daedb7296a9f49?s=128&d=identicon&r=PG", "display_name": "ridiculous_fish", "link": "https://stackoverflow.com/users/1441328/ridiculous-fish"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548881610, "post_id": 54449197, "comment_id": 95707476, "body": "The first bad idea is to match with re1, and then re2. That fails for <code>&#39;x*&#39;</code> and <code>&#39;x&#39;</code> matching &quot;xxx&quot;. The second bad idea is to match re1 + re2, which fails for <code>&#39;a|b&#39;</code> and <code>&#39;c&#39;</code> matching &quot;ac&quot;."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548881902, "post_id": 54449197, "comment_id": 95707589, "body": "The first one does <i>not</i> fail; the second just requires explicit parenthesization because concatenation has higher precedence than <code>|</code>."}, {"owner": {"reputation": 14015, "user_id": 1441328, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b96e85a38e05615837daedb7296a9f49?s=128&d=identicon&r=PG", "display_name": "ridiculous_fish", "link": "https://stackoverflow.com/users/1441328/ridiculous-fish"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548882329, "post_id": 54449197, "comment_id": 95707755, "body": "Yeah wrapping each pattern in a non-capturing group and then appending them is my current best idea; the main flaw is that it mishandles back references."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548882349, "post_id": 54449197, "comment_id": 95707769, "body": "What do you mean by &quot;mishandles back references&quot;?"}, {"owner": {"reputation": 15866, "user_id": 83144, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d23b2cf9de6548618d481fd39afd5d66?s=128&d=identicon&r=PG", "display_name": "mattmc3", "link": "https://stackoverflow.com/users/83144/mattmc3"}, "edited": false, "score": 0, "creation_date": 1573055251, "post_id": 54449197, "comment_id": 103757920, "body": "@ridiculous_fish - Instead of using numbered back references which break on appending, you could try named ones which may be less likely to collide depending on how much control you have of the regex parts you&#39;re combining: <a href=\"https://www.regular-expressions.info/named.html\" rel=\"nofollow noreferrer\">regular-expressions.info/named.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1548881946, "post_id": 54449412, "comment_id": 95707615, "body": "Why not just capture both <code>re1</code> and <code>re2</code> groups then? But I would assume that causes another problem if one of those have a capturing group inside.  My original thought would be to have <code>f&#39;({re1})(*)({re2})&#39;</code>, at which point you can just look for group 0 and group 2."}, {"owner": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "edited": false, "score": 0, "creation_date": 1548882006, "post_id": 54449412, "comment_id": 95707630, "body": "the OP already talked about concatenating (also with non-capturing groups, which is better), but said the problem was with backreferences"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548882017, "post_id": 54449412, "comment_id": 95707633, "body": "I switched to a non-capturing group, which is what parenetheses mean in &quot;real&quot; regular expressions. (Python regular expressions have lots of features, including capture groups, that make them strictly more power than actual regular expressions.)"}, {"owner": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "edited": false, "score": 0, "creation_date": 1548882114, "post_id": 54449412, "comment_id": 95707657, "body": "in all languages I know, groups are capturing by default"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548882202, "post_id": 54449412, "comment_id": 95707698, "body": "And every language you know implements something that is a superset of regular expressions as they were originally defined (as a simple representation of a finite automaton)."}, {"owner": {"reputation": 14015, "user_id": 1441328, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b96e85a38e05615837daedb7296a9f49?s=128&d=identicon&r=PG", "display_name": "ridiculous_fish", "link": "https://stackoverflow.com/users/1441328/ridiculous-fish"}, "edited": false, "score": 0, "creation_date": 1548882584, "post_id": 54449412, "comment_id": 95707890, "body": "This almost works except for backreferences. For example append <code>(.)\\1</code> (matches &#39;aa&#39;, &#39;bb&#39;, etc) to itself, you get <code>(.)\\1(.)\\1</code> (matches &#39;aaba&#39;; what you instead want is <code>(.)\\1(.)\\2</code> (&#39;aabb&#39;)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548882895, "post_id": 54449412, "comment_id": 95708029, "body": "OK, <i>that&#39;s</i> a bit tricky to work around. It&#39;s somewhat like the problem of formally defining beta reduction on lambda calculus, because you have to account for name collisions in the variables used. (Note that back references are one of the things that make Python&#39;s regular expressions not <i>really</i> regular expressions; they allow you to match strings that even a context-free grammar cannot match, but at the same time Python regexes cannot match some languages that CFGs can.)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548882937, "post_id": 54449412, "comment_id": 95708052, "body": "Basically, you have to figure out how many captures groups are in <code>re1</code>, then <i>add</i> that number to each backreference in <code>re2</code>. Then, given <code>re1</code> and your modified <code>re2</code> (call it <code>re2a</code>), you can use <code>&#39;(?:%s)%s&#39; % (re1, re2a)</code>. Unless you already know how many captures groups are in <code>re1</code>, determine how many there are is probably worthy of a question by itself."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1548885526, "post_id": 54449412, "comment_id": 95709051, "body": "(Update: it&#39;s actually easy to find out how many capture groups there are; compile the regular expression and examine the <code>groups</code> attribute of the resulting object. Modifying the second regular expression to update any back references is still a bit tricky, requiring you to parse the regular expression and rebuild it. There are also name collisions to worry about if both expressions use <code>(?P...)</code> groups.)"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1548881961, "last_edit_date": 1548881961, "creation_date": 1548881849, "answer_id": 54449412, "question_id": 54449197, "link": "https://stackoverflow.com/questions/54449197/python-appending-two-regular-expressions/54449412#54449412", "title": "Python: appending two regular expressions", "body": "<p>Regular expressions concatenate; in fact, it's one of the basic rules for construction more complicated regular expressions from the basics. However, doing so may require explicit parenthesization.</p>\n\n<pre><code>re1 = 'x*'\nre2 = 'x'\n# This works because 'x*x' and '(x*)x' are equivalent regular expressions\nif re.match(re1 + re2, 'xxx'):\n    print(\"Success!\")\n\nre1 = 'a|b'\nre2 = 'c'\n# Here, you need the parentheses because 'a|bc' and '(a|b)c' are not equivalent.\n# \"Parentheses\" here means a non-capturing group.\nif re.match(\"(?:%s)%s\" % (re1, re2), \"ac\"):\n    print(\"Success!\")\n</code></pre>\n"}], "owner": {"reputation": 14015, "user_id": 1441328, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b96e85a38e05615837daedb7296a9f49?s=128&d=identicon&r=PG", "display_name": "ridiculous_fish", "link": "https://stackoverflow.com/users/1441328/ridiculous-fish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548881961, "creation_date": 1548880902, "question_id": 54449197, "link": "https://stackoverflow.com/questions/54449197/python-appending-two-regular-expressions", "title": "Python: appending two regular expressions", "body": "<p>I have two regular expressions (alternatively, their pattern strings) and I would like to concatenate them.</p>\n\n<p>That is given <code>re1</code> and <code>re2</code>, I would like to construct <code>re3</code>, where <code>re3</code> matches S iff <code>re1</code> matches some prefix of S, and then <code>re2</code> matches the remainder.</p>\n\n<p>Some bad ideas:</p>\n\n<ol>\n<li><p>Match <code>re1</code> and then <code>re2</code> on the remainder. This fails for example for <code>/x*/ + /x/</code> on the string \"xxx\" since the greedy match consumes the last x.</p></li>\n<li><p>Append the patterns. This fails for example on <code>/a|b/</code> + <code>/c/</code> since that produces <code>/a|bc/</code>, and <code>|</code> has lower precedence than catenation.</p></li>\n</ol>\n\n<p>Some better ideas:</p>\n\n<ol>\n<li><p>Append the patterns inside non-capturing groups. This solve the precedence problem; however it mishandles back references. This is currently my least bad idea.</p></li>\n<li><p>\"Manually backtrack\" by enumerating <em>all</em> of the ways that <code>re1</code> can match S, followed by <code>re2</code> on the remainder after the match. Unfortunately there doesn't seem to be any support for this in Python.</p></li>\n</ol>\n\n<p>Any better approaches? Thanks!</p>\n"}, {"tags": ["python", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1548924513, "post_id": 54449194, "comment_id": 95721218, "body": "Could you provide the corresponding URL?"}, {"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1548934225, "post_id": 54449194, "comment_id": 95727019, "body": "Maybe the website isn&#39;t using utf8 encoding? If you could provide us with an url we could tell you more."}, {"owner": {"reputation": 12943, "user_id": 4094231, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/da5d12e4b0c319022432a23fc5344831?s=128&d=identicon&r=PG&f=1", "display_name": "Umair Ayub", "link": "https://stackoverflow.com/users/4094231/umair-ayub"}, "edited": false, "score": 0, "creation_date": 1548944651, "post_id": 54449194, "comment_id": 95733327, "body": "Dude, open that CSV in a text editor like Notepad or Notepad++ and it will show perfectly ... but if you open file in Microsoft Excel it will show incorrect data"}, {"owner": {"reputation": 13, "user_id": 10992531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eab94d538df1a8524d679ba60a12fda?s=128&d=identicon&r=PG&f=1", "display_name": "zakaria", "link": "https://stackoverflow.com/users/10992531/zakaria"}, "edited": false, "score": 0, "creation_date": 1549182930, "post_id": 54449194, "comment_id": 95806710, "body": "I actually solved it by opening excel and load the data from the CSV file. I also had to choose UTF-8 from the list"}, {"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1549276764, "post_id": 54449194, "comment_id": 95831705, "body": "zakaria, could you please provide a response to your question indicating how you solved your issue?"}, {"owner": {"reputation": 13, "user_id": 10992531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eab94d538df1a8524d679ba60a12fda?s=128&d=identicon&r=PG&f=1", "display_name": "zakaria", "link": "https://stackoverflow.com/users/10992531/zakaria"}, "reply_to_user": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1549304016, "post_id": 54449194, "comment_id": 95846569, "body": "@Gallaecio sure,"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 10992531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eab94d538df1a8524d679ba60a12fda?s=128&d=identicon&r=PG&f=1", "display_name": "zakaria", "link": "https://stackoverflow.com/users/10992531/zakaria"}, "is_accepted": false, "score": 1, "last_activity_date": 1549303989, "creation_date": 1549303989, "answer_id": 54521995, "question_id": 54449194, "link": "https://stackoverflow.com/questions/54449194/scrapy-isnt-showing-the-arabic-letters/54521995#54521995", "title": "scrapy isnt showing the arabic letters", "body": "<p>since <code>@gallaecio</code> wanted me to write an answer to my question </p>\n\n<p>here is what i did: </p>\n\n<p>1- open an empty excel sheet</p>\n\n<p>2- go to data </p>\n\n<p>3- choose From text/csv </p>\n\n<p>4- under the file origin i had to change it from 1252 Western European(Windows) TO 65001 Unicode ( UTF-8 ), now i can read the arabic text ! </p>\n\n<p>5- Load ! </p>\n"}, {"tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": true, "score": 1, "last_activity_date": 1549306166, "creation_date": 1549306166, "answer_id": 54522494, "question_id": 54449194, "link": "https://stackoverflow.com/questions/54449194/scrapy-isnt-showing-the-arabic-letters/54522494#54522494", "title": "scrapy isnt showing the arabic letters", "body": "<p>If I take the data you report in your question, and assign it to a variable, like this:</p>\n\n<pre><code>&gt;&gt;&gt; a = (b'\\xd8\\xa8\\xd8\\xb1\\xd9\\x82\\xd9\\x85 \"\\xd9\\x85\\xd8\\xb0\\xd9\\x87'\n      b'\\xd9\\x84\".. \\xd8\\xa8\\xd9\\x86\\xd8\\xb2\\xd9\\x8a\\xd9\\x85\\xd8\\xa9 \\xd9'\n      b'\\x8a\\xd8\\xaa\\xd9\\x81\\xd9\\x88\\xd9\\x82 \\xd8\\xb9\\xd9\\x84\\xd9\\x89'\n      b' \\xd9\\x85\\xd9\\x8a\\xd8\\xb3\\xd9\\x8a \\xd9\\x88\\xd8\\xb1\\xd9\\x88'\n      b'\\xd9\\x86\\xd8\\xa7\\xd9\\x84\\xd8\\xaf\\xd9\\x88 \\xd9\\x88\\xd8\\xb5\\xd9'\n      b'\\x84\\xd8\\xa7\\xd8\\xad')\n</code></pre>\n\n<p>and I then decode these bytes on the (reasonable) assumption that they are UTF-8:</p>\n\n<pre><code>&gt;&gt;&gt; a.decode()\n'\u0628\u0631\u0642\u0645 \"\u0645\u0630\u0647\u0644\".. \u0628\u0646\u0632\u064a\u0645\u0629 \u064a\u062a\u0641\u0648\u0642 \u0639\u0644\u0649 \u0645\u064a\u0633\u064a \u0648\u0631\u0648\u0646\u0627\u0644\u062f\u0648 \u0648\u0635\u0644\u0627\u062d'\n</code></pre>\n\n<p>it seems to me that you are getting back what you might be expecting, just not quite in the way you expect it.</p>\n"}], "owner": {"reputation": 13, "user_id": 10992531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eab94d538df1a8524d679ba60a12fda?s=128&d=identicon&r=PG&f=1", "display_name": "zakaria", "link": "https://stackoverflow.com/users/10992531/zakaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 54522494, "answer_count": 2, "score": 0, "last_activity_date": 1549306166, "creation_date": 1548880896, "last_edit_date": 1548901918, "question_id": 54449194, "link": "https://stackoverflow.com/questions/54449194/scrapy-isnt-showing-the-arabic-letters", "title": "scrapy isnt showing the arabic letters", "body": "<p>I have spent the whole day looking for a way to display the Arabic letters with <code>scrapy</code> and nothing worked for me! I am scraping an Arabic website but i am not getting the right format of the arabic language.</p>\n\n<p>here is what i am actually getting when i am saving the results in a csv file: </p>\n\n<pre><code>\"\u00d8\u00a8\u00d8\u00b7\u00d9\u201e \u00d9\u201e\u00d9\u0160\u00d9\u00d8\u00b1\u00d8\u00a8\u00d9\u02c6\u00d9\u201e \u00d8\u00a7\u00d9\u201e\u00d9\u201a\u00d8\u00af\u00d9\u0160\u00d9\u2026\" \u00d9\u0160\u00d8\u00b1\u00d8\u00af \u00d8\u00b9\u00d9\u201e\u00d9\u2030 \u00d8\u00a3\u00d9\u2020\u00d8\u00b5\u00d8\u00a7\u00d8\u00b1 \"\u00d8\u00a7\u00d9\u201e\u00d8\u00b1\u00d9\u0160\u00d8\u00af\u00d8\u00b2\"\n</code></pre>\n\n<p>here is my function:</p>\n\n<pre><code>def parse_details(self, response):\n    vars = ArticlesItem()\n    vars[\"title\"] = response.css(\"h1.sna_content_heading::text\").extract_first().strip()\n    vars[\"article_summary\"] = response.css(\"span.article-summary\").extract_first().strip()\n    vars[\"article_content\"] = [i.strip() for i in response.css(\"div.article-body p::text\").extract()]\n    vars[\"tags\"] = [i.strip() for i in response.css(\"div.article-tags h2.tags::text\").extract()]\n    yield vars\n</code></pre>\n\n<p>i tried to add <code>encode(\"utf-8\")</code> but i am still not getting the right format </p>\n\n<pre><code>vars[\"title\"] = ...extract_first().strip().encode(\"utf-8\")\n</code></pre>\n\n<p>i am getting something like this:</p>\n\n<pre><code>b'\\xd8\\xa8\\xd8\\xb1\\xd9\\x82\\xd9\\x85 \"\\xd9\\x85\\xd8\\xb0\\xd9\\x87'\n      b'\\xd9\\x84\".. \\xd8\\xa8\\xd9\\x86\\xd8\\xb2\\xd9\\x8a\\xd9\\x85\\xd8\\xa9 \\xd9'\n      b'\\x8a\\xd8\\xaa\\xd9\\x81\\xd9\\x88\\xd9\\x82 \\xd8\\xb9\\xd9\\x84\\xd9\\x89'\n      b' \\xd9\\x85\\xd9\\x8a\\xd8\\xb3\\xd9\\x8a \\xd9\\x88\\xd8\\xb1\\xd9\\x88'\n      b'\\xd9\\x86\\xd8\\xa7\\xd9\\x84\\xd8\\xaf\\xd9\\x88 \\xd9\\x88\\xd8\\xb5\\xd9'\n      b'\\x84\\xd8\\xa7\\xd8\\xad'\n</code></pre>\n"}, {"tags": ["python", "if-statement", "string-matching"], "comments": [{"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1548881818, "post_id": 54449176, "comment_id": 95707559, "body": "Sounds like a problem for <a href=\"https://www.w3schools.com/python/python_regex.asp\" rel=\"nofollow noreferrer\">RegEx</a> (short for regular expressions)."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "is_accepted": false, "score": 1, "last_activity_date": 1548881740, "creation_date": 1548881740, "answer_id": 54449385, "question_id": 54449176, "link": "https://stackoverflow.com/questions/54449176/how-to-open-a-file-in-python-read-the-comments-find-a-word-after-the-com/54449385#54449385", "title": "How to open a file in python, read the comments (&quot;#&quot;), find a word after the comments and select the word after it?", "body": "<p>You should start by reading the file into a list and then work through that instead:</p>\n\n<pre><code>file = 'test.txt' #&lt;- call file whatever you want\nwith open(file, \"r\") as f:\n    txt = f.readlines()\n    for line in txt:\n        if line.startswith ('\"#\"'):\n            word = line.split(\" Column.4: \")\n            try:\n                print(word[1])\n            except IndexError:\n                print(word)\n        else:\n            print(\"n\")\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>&gt;&gt;&gt; ['\"#\" XDI/1.0 XDAC/1.4 Athena/0.9.25\\n']\n&gt;&gt;&gt; pre_edge\n</code></pre>\n\n<p>Used a try and except catch because the first line also starts with <em>\"#\"</em> and we can't split that with your current logic.</p>\n\n<p>Also, as a side note, in the question you have the file with lines starting as <em>\"#\"</em> with the quotation marks so the <code>startswith()</code> function was altered as such.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 8822587, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159323910985062/picture?type=large", "display_name": "Luis Carlos Colocho Hurtarte", "link": "https://stackoverflow.com/users/8822587/luis-carlos-colocho-hurtarte"}, "edited": false, "score": 0, "creation_date": 1548887691, "post_id": 54449497, "comment_id": 95709813, "body": "This worked great for the comments. But after the comment lines, I have some Content is still been read line by line. I added:     else:          data = line.strip().split() but only adds the last line of the file, and does not appends the lines without comments. How could I do that?"}, {"owner": {"reputation": 76, "user_id": 5632532, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203879087177665/picture?type=large", "display_name": "Mirek Machura", "link": "https://stackoverflow.com/users/5632532/mirek-machura"}, "reply_to_user": {"reputation": 47, "user_id": 8822587, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159323910985062/picture?type=large", "display_name": "Luis Carlos Colocho Hurtarte", "link": "https://stackoverflow.com/users/8822587/luis-carlos-colocho-hurtarte"}, "edited": false, "score": 0, "creation_date": 1548923294, "post_id": 54449497, "comment_id": 95720554, "body": "@Luis Carlos Colocho Hurtarte I&#39;ve updated my answer. If i understand correctly that except comment lines you want to proceed regular lines, then adding <code>else</code> statement should work. Just be careful to put <code>else</code> clause on correct level. In python there exist <code>for-else</code> statement, so if you put <code>else</code> on the same level as <code>for</code> it would capture only the last line."}], "tags": [], "owner": {"reputation": 76, "user_id": 5632532, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203879087177665/picture?type=large", "display_name": "Mirek Machura", "link": "https://stackoverflow.com/users/5632532/mirek-machura"}, "is_accepted": true, "score": 2, "last_activity_date": 1548923166, "last_edit_date": 1548923166, "creation_date": 1548882228, "answer_id": 54449497, "question_id": 54449176, "link": "https://stackoverflow.com/questions/54449176/how-to-open-a-file-in-python-read-the-comments-find-a-word-after-the-com/54449497#54449497", "title": "How to open a file in python, read the comments (&quot;#&quot;), find a word after the comments and select the word after it?", "body": "<p>In case that <code>#</code> comment contain str <code>Column.4:</code> as stated above, you could parse it this way.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open(filepath) as f:\n    for line in f:\n        if line.startswith('#'):\n            # Here you proceed comment lines\n            if 'Column.4' in line:\n                first, remainder = line.split('Column.4: ')\n                # Remainder contains everything after '# Column.4: '\n                # So if you want to get first word -&gt;\n                word = remainder.split()[0]\n        else:\n            # Here you can proceed lines that are not comments\n            pass\n</code></pre>\n\n<h3>Note</h3>\n\n<p>Also it is a good practice to use <code>for line in f:</code> statement instead of <code>f.readlines()</code> (as mentioned in other answers), because this way you don't load all lines into memory, but proceed them one by one.</p>\n"}, {"comments": [{"owner": {"reputation": 5728, "user_id": 7907591, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vpof.jpg?s=128&g=1", "display_name": "Morse", "link": "https://stackoverflow.com/users/7907591/morse"}, "edited": false, "score": 1, "creation_date": 1548905300, "post_id": 54449550, "comment_id": 95714011, "body": "While this might answer the authors question, it lacks some explaining words and/or links to documentation.Raw code snippets are not very helpful without some phrases around them. You may also find how to write a <a href=\"https://stackoverflow.com/help/how-to-answer\">good answer</a> very helpful."}], "tags": [], "owner": {"reputation": 2737, "user_id": 7384740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H2BbL.png?s=128&g=1", "display_name": "Dodge", "link": "https://stackoverflow.com/users/7384740/dodge"}, "is_accepted": false, "score": 1, "last_activity_date": 1548882439, "creation_date": 1548882439, "answer_id": 54449550, "question_id": 54449176, "link": "https://stackoverflow.com/questions/54449176/how-to-open-a-file-in-python-read-the-comments-find-a-word-after-the-com/54449550#54449550", "title": "How to open a file in python, read the comments (&quot;#&quot;), find a word after the comments and select the word after it?", "body": "<pre><code>with open('stuff.txt', 'r+') as f:\n    data = f.readlines()\n\nfor line in data:\n    words = line.split()\n    if words and ('#' in words[0]) and (\"Column.4:\" in words):\n        print(words[-1])\n\n# pre_edge\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 8822587, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159323910985062/picture?type=large", "display_name": "Luis Carlos Colocho Hurtarte", "link": "https://stackoverflow.com/users/8822587/luis-carlos-colocho-hurtarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 54449497, "answer_count": 3, "score": 1, "last_activity_date": 1548923166, "creation_date": 1548880823, "last_edit_date": 1548881334, "question_id": 54449176, "link": "https://stackoverflow.com/questions/54449176/how-to-open-a-file-in-python-read-the-comments-find-a-word-after-the-com", "title": "How to open a file in python, read the comments (&quot;#&quot;), find a word after the comments and select the word after it?", "body": "<p>I have a function that loops through a file that Looks like this:</p>\n\n<pre><code>\"#\" XDI/1.0 XDAC/1.4 Athena/0.9.25\n\n\"#\" Column.4:                      pre_edge\n\nContent\n</code></pre>\n\n<p>That is to say that after the \"#\" there is a comment. My function aims to read each line and if it starts with a specific word, select what is after the \":\"</p>\n\n<p>For example if I had These two lines. I would like to read through them and if the line starts with \"#\" and contains the word \"Column.4\" the word \"pre_edge\" should be stored.</p>\n\n<p>An example of my current approach follows:</p>\n\n<pre><code>with open(file, \"r\") as f:\n        for line in f:\n            if line.startswith ('#'):\n                word = line.split(\" Column.4:\")[1]\n            else:\n                print(\"n\")\n</code></pre>\n\n<p>I think my Trouble is specifically after finding a line that starts with \"#\" how can I parse/search through it? and save its Content if it contains the desidered word.</p>\n"}]