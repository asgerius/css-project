[{"tags": ["python", "django", "heroku", "django-registration"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6238624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b8d40ccbcf3c18126d19447d07fba0a0?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fynn", "link": "https://stackoverflow.com/users/6238624/a-fynn"}, "edited": false, "score": 0, "creation_date": 1465042342, "post_id": 37585710, "comment_id": 62741895, "body": "Yes, I did. My app running with no problem on local... And I still have no idea bout this problem..."}], "tags": [], "owner": {"reputation": 1218, "user_id": 2517131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NA3BR.jpg?s=128&g=1", "display_name": "Lauri Elias", "link": "https://stackoverflow.com/users/2517131/lauri-elias"}, "is_accepted": false, "score": 0, "last_activity_date": 1464853754, "creation_date": 1464853754, "answer_id": 37585710, "question_id": 37580566, "link": "https://stackoverflow.com/questions/37580566/importerror-on-heroku-django-registration-redux/37585710#37585710", "title": "ImportError on Heroku django-registration-redux", "body": "<p>Did you follow the guide here <a href=\"http://django-registration-redux.readthedocs.io/en/latest/quickstart.html\" rel=\"nofollow\">http://django-registration-redux.readthedocs.io/en/latest/quickstart.html</a> to install django-registration-redux? Specifically this part:</p>\n\n<pre><code>INSTALLED_APPS = (\n    'django.contrib.sites',\n    'registration', #should be immediately above 'django.contrib.auth'\n    'django.contrib.auth',\n    # ...other installed applications...\n)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6238624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b8d40ccbcf3c18126d19447d07fba0a0?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fynn", "link": "https://stackoverflow.com/users/6238624/a-fynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464853754, "creation_date": 1464824993, "last_edit_date": 1464825719, "question_id": 37580566, "link": "https://stackoverflow.com/questions/37580566/importerror-on-heroku-django-registration-redux", "title": "ImportError on Heroku django-registration-redux", "body": "<p>I have no problem with my apps when it's running locally. But it's happen on heroku. I was successfully deployed my app to heroku but when I open it (My <code>DEBUG</code> still <code>TRUE</code>) it was give me <code>ImportError No module named forms</code> comes from <code>from registration.forms import RegistrationFormUniqueEmail</code>. I have confusing bout that because when I start <code>heroku run python manage.py shell</code> and doing import <code>from registration.forms import RegistrationFormUniqueEmail</code> it's nothing error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YMHPx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YMHPx.png\" alt=\"enter image description here\"></a></p>\n\n<p>urls.py</p>\n\n<pre><code>from myapp.forms import CustomRegistrationForm\nfrom registration.backends.default.views import RegistrationView\n\nurlpatterns = [\n     url(r'^register/$', logout_required(RegistrationView.as_view(form_class=CustomRegistrationForm)), name='registration_register'),\n     url(r'^', include('registration.backends.default.urls')),\n]\n</code></pre>\n\n<p>myapp/forms.py</p>\n\n<pre><code>from registration.forms import RegistrationFormUniqueEmail\nfrom .validators import ForbiddenUsernamesValidator\n\nclass CustomRegistrationForm(RegistrationFormUniqueEmail):\n    def __init__(self, *args, **kwargs):\n        super(CustomRegistrationForm, self).__init__(*args, **kwargs)\n        self.fields['username'].validators.append(ForbiddenUsernamesValidator)\n</code></pre>\n\n<p>myapp/validators.py</p>\n\n<pre><code>from django.contrib.auth.models import User\nfrom django.core.exceptions import ValidationError\n\ndef ForbiddenUsernamesValidator(value):\n    forbidden_usernames = ['admin', 'settings', 'news', 'about', 'help', '........']\n    if value.lower() in forbidden_usernames:\n        raise ValidationError('This username is forbidden.')\n    if len(value) &lt; 4:\n        raise ValidationError('Username must have at least 4 characters.')\n</code></pre>\n\n<p>Here's my app <a href=\"https://glacial-wave-87412.herokuapp.com/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "json", "serialization", "yaml"], "answers": [{"tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 1, "last_activity_date": 1464899889, "creation_date": 1464899889, "answer_id": 37601684, "question_id": 37580545, "link": "https://stackoverflow.com/questions/37580545/deserialize-json-yaml-from-binary-stream-which-contains-other-data/37601684#37601684", "title": "Deserialize json/yaml from binary stream which contains other data", "body": "<p>You cannot do what you want because the YAML parser consumes the complete stream even if you dummp an explicit end (<code>yaml.dump(some_obj, stream, explicit_end=True)</code> (which essentially insert <code>...\\n</code> before <code>awesome</code>) and it also doesn't work when writing <code>---\\nawesome</code> (the document separator). The YAML parser consumes the word <code>awesome</code>\u00b9 both when you use <code>yaml.load()</code> as well as when you use <code>yaml.load_all()</code>.</p>\n\n<p>The part up front works fine, so you can consider doing something like:</p>\n\n<pre><code>import ruamel.yaml as yaml\n\nfile_name = 'test.comb'\n\nsome_obj = dict(a = [1, 2], b = {3: 42})\n\nwith open(file_name, 'w') as stream:\n    stream.write('lol'.encode())\n    yaml.dump(some_obj, stream, explicit_end=True)\n    stream.write('awesome'.encode())\n\n\nwith open(file_name) as stream:\n    assert stream.read(3) == 'lol'\n    stream_data = ''\n    while True:\n        stream_data += stream.read(1)\n        if stream_data[-4:] == '...\\n':\n            break\n    recovered = yaml.load(stream_data)\n    assert stream.read(7) == 'awesome'\n\nprint(recovered)\n</code></pre>\n\n<p>which gives (in Python2):</p>\n\n<pre><code>{'a': [1, 2], 'b': {3: 42}}\n</code></pre>\n\n<p>and the file contents are:</p>\n\n<pre><code>lola: [1, 2]\nb: {3: 42}\n...\nawesome\n</code></pre>\n\n<p>I use a similar technique, but reading lines with <code>for line in stream</code>, which cannot be combined with normal <code>read()</code> operations, for files that have a YAML header with metadata, followed by normal text (non-indented so emacs can properly work on it).</p>\n\n<hr>\n\n<p>\u00b9 <sub>I consider reading past the end-of-stream marker (<code>...</code>) a bug in the Python YAML parser so I'll try and fix this in the next release.</sub></p>\n"}], "owner": {"reputation": 176, "user_id": 1413688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d115368b8d3fef0d6c7a9adcf07379b7?s=128&d=identicon&r=PG", "display_name": "MadcowD", "link": "https://stackoverflow.com/users/1413688/madcowd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37601684, "answer_count": 1, "score": 0, "last_activity_date": 1464899889, "creation_date": 1464824796, "last_edit_date": 1464897691, "question_id": 37580545, "link": "https://stackoverflow.com/questions/37580545/deserialize-json-yaml-from-binary-stream-which-contains-other-data", "title": "Deserialize json/yaml from binary stream which contains other data", "body": "<p>Suppose I have a binary stream <code>stream</code> and I generate it as follows.</p>\n\n<pre><code>stream.write('lol'.encode())\nyaml.dump(some_obj, stream)\nstream.write('awesome'.encode())\n</code></pre>\n\n<p>Then do I have to write a custom parser of some sort for the stream or can I recover <code>some_obj</code> as follows.</p>\n\n<pre><code>stream.read(3)\nrecovered = yaml.load(stream)\nstream.read(7)\n</code></pre>\n\n<p>If this doesn't work with yaml serialization, does it work with json serialization?</p>\n"}, {"tags": ["python", "logarithm", "easing", "trigonometry", "motordriver"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464825603, "post_id": 37580485, "comment_id": 62648144, "body": "Do you or a colleague have access to Graphpad Prism? It&#39;s excellent for interpolating series like this."}, {"owner": {"reputation": 568, "user_id": 1072283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab6aae7aa48f96cf5ea5ab5d3aa2247d?s=128&d=identicon&r=PG", "display_name": "dongle", "link": "https://stackoverflow.com/users/1072283/dongle"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464825930, "post_id": 37580485, "comment_id": 62648228, "body": "I&#39;m not familiar with it\u2026 looks interesting"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464875169, "post_id": 37580485, "comment_id": 62672173, "body": "Did you end up downloading Prism and doing some analyses? I&#39;m playing with it now, if you&#39;re available just ping me in the <a href=\"http://chat.stackoverflow.com/rooms/6/python\">Python chat room</a> and we can discuss the data."}, {"owner": {"reputation": 568, "user_id": 1072283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab6aae7aa48f96cf5ea5ab5d3aa2247d?s=128&d=identicon&r=PG", "display_name": "dongle", "link": "https://stackoverflow.com/users/1072283/dongle"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464875406, "post_id": 37580485, "comment_id": 62672338, "body": "I did, but I am totally stumped on how to use it :)"}], "answers": [{"tags": [], "owner": {"reputation": 2098, "user_id": 3066295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ccdcfa01f25dc7356ff110ddafef05?s=128&d=identicon&r=PG", "display_name": "TT--", "link": "https://stackoverflow.com/users/3066295/tt"}, "is_accepted": false, "score": 0, "last_activity_date": 1512077600, "creation_date": 1512077600, "answer_id": 47582954, "question_id": 37580485, "link": "https://stackoverflow.com/questions/37580485/curve-for-stepper-motor-frequency-ease-in/47582954#47582954", "title": "Curve for stepper motor frequency ease-in", "body": "<p>If you are trying to print out the new frequency multiple times, just remove the line with <code>break</code>.</p>\n\n<p>This code produces the output that follows.</p>\n\n<pre><code>current_freq = 97.\nend_freq = 1134\n\n# number of times to send the current freqency\nt = 4\n\nwhile current_freq &lt; end_freq:\n    i = 1\n    t = t + t * .1673\n    print(\"t=%10f\" % (t))\n    while i &lt;= t:\n        print(\"i=\", i, end=' ')\n        print(\"  freq %.2f\" % current_freq)\n        i = i + 1\n        #break\n    current_freq = current_freq + current_freq * .1673\n</code></pre>\n\n<p>Output (truncated)</p>\n\n<pre><code>t=  4.669200\ni= 1   freq 97.00\ni= 2   freq 97.00\ni= 3   freq 97.00\ni= 4   freq 97.00\nt=  5.450357\ni= 1   freq 113.23\ni= 2   freq 113.23\ni= 3   freq 113.23\ni= 4   freq 113.23\ni= 5   freq 113.23\nt=  6.362202\ni= 1   freq 132.17\ni= 2   freq 132.17\ni= 3   freq 132.17\ni= 4   freq 132.17\ni= 5   freq 132.17\ni= 6   freq 132.17\nt=  7.426598\ni= 1   freq 154.28\ni= 2   freq 154.28\ni= 3   freq 154.28\ni= 4   freq 154.28\ni= 5   freq 154.28\ni= 6   freq 154.28\ni= 7   freq 154.28\nt=  8.669068\ni= 1   freq 180.10\ni= 2   freq 180.10\ni= 3   freq 180.10\ni= 4   freq 180.10\ni= 5   freq 180.10\ni= 6   freq 180.10\ni= 7   freq 180.10\ni= 8   freq 180.10\nt= 10.119403\ni= 1   freq 210.22\ni= 2   freq 210.22\ni= 3   freq 210.22\ni= 4   freq 210.22\ni= 5   freq 210.22\ni= 6   freq 210.22\ni= 7   freq 210.22\ni= 8   freq 210.22\ni= 9   freq 210.22\ni= 10   freq 210.22\nt= 11.812379\ni= 1   freq 245.40\ni= 2   freq 245.40\ni= 3   freq 245.40\ni= 4   freq 245.40\ni= 5   freq 245.40\ni= 6   freq 245.40\ni= 7   freq 245.40\ni= 8   freq 245.40\ni= 9   freq 245.40\ni= 10   freq 245.40\ni= 11   freq 245.40\n.\n.\n.\n</code></pre>\n"}], "owner": {"reputation": 568, "user_id": 1072283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab6aae7aa48f96cf5ea5ab5d3aa2247d?s=128&d=identicon&r=PG", "display_name": "dongle", "link": "https://stackoverflow.com/users/1072283/dongle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512077600, "creation_date": 1464824446, "last_edit_date": 1464826438, "question_id": 37580485, "link": "https://stackoverflow.com/questions/37580485/curve-for-stepper-motor-frequency-ease-in", "title": "Curve for stepper motor frequency ease-in", "body": "<p>I am writing some software to control a five phase stepper motor. The speed of the stepper motor is controlled by the frequency of a pulse I am sending to the motor controller. My present challenge is that I want to ease-in and ease-out of movements. I am actually replicating the behaviour of some old software which I do not have the source code for. I have an understanding of the logic of the easing, and it behaves as so:</p>\n\n<ol>\n<li>when the ending / sustained speed is slow, the ease-in is slower / takes longer</li>\n<li>when the ending / sustained speed is fast, the ease-in is faster / is shorter</li>\n</ol>\n\n<p>For example\u2026 when the sustained speed is 693 Hz, the ease-in is 766 milliseconds long. I have sampled this ease-in curve using a Saleae logic analyzer. Here is the curve:</p>\n\n<p><a href=\"https://i.stack.imgur.com/apDFK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/apDFK.png\" alt=\"enter image description here\"></a></p>\n\n<p>The starting frequency is 97.77 Hz. <a href=\"https://docs.google.com/spreadsheets/d/1yJmjk63uW4I-A5wQexn4wMLwFfs0wspnhzEQsqX5IoA/edit?usp=sharing\" rel=\"nofollow noreferrer\">Here is a link to the actual data</a>. So I am trying to figure out how to implement the proper logic / formula for this in code. The following bit of code will spit out increments of Hz that are relatively close to the increments I need, but the thing I can't figure out is how to get it to repeat/hold the same <code>current_freq</code> for an increasingly long duration of time \u2013 which is what essentially creates the curve that you see in the graph. My multiplier creating the increments is also off, but it is relatively close\u2026</p>\n\n<p>** edit \u2013 I think the below in theory works as far as adding a dimension of incrementing time to hold the stepping up <code>current_freq</code>, but there's something wrong with my implementation... it's just doing each frequency once.</p>\n\n<pre><code>current_freq = 97.\nend_freq = 1134\n\nt = 4 \n# number of times to send the current freqency\n\nprint current_freq\n\nwhile current_freq &lt; end_freq:\n    i = 1\n    t = t+t * .1673\n    print i\n    while i &lt;= t:\n        print current_freq\n        i = i+1\n        break\n    current_freq = current_freq + current_freq * .1673\n</code></pre>\n\n<p>Any ideas? Is this a logarithm? Sin or cos? In case it isn't blatantly obvious I am horrible at math.</p>\n"}, {"tags": ["python", "string", "python-2.7", "for-loop", "indexing"], "comments": [{"owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1464824316, "post_id": 37580436, "comment_id": 62647798, "body": "<code>word.index( letter )</code> will always return the index of the first occurance of <code>a</code> (which is 0) even though you&#39;re calling it multiple times in a loop."}, {"owner": {"reputation": 13, "user_id": 6382596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608f939af5cbfd6330fad62540378a6d?s=128&d=identicon&r=PG&f=1", "display_name": "bariox", "link": "https://stackoverflow.com/users/6382596/bariox"}, "reply_to_user": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1464824419, "post_id": 37580436, "comment_id": 62647824, "body": "@101 yes I understand this, but how can I change my code to get it to return the index of the other two occurrences also"}, {"owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1464824521, "post_id": 37580436, "comment_id": 62647855, "body": "Check the first answer in the above link, it gives what you&#39;re after."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1464824526, "post_id": 37580436, "comment_id": 62647857, "body": "@bariox: do read the documentation for methods you use. <a href=\"https://docs.python.org/2/library/stdtypes.html#str.index\" rel=\"nofollow noreferrer\"><code>str.index()</code></a> takes additional arguments, like <code>start</code>. <code>word.index(letter, index + 1)</code> would start searching from the last location. Or just <i>generate an index as you go along</i>; you have a loop, increment a counter in it. Or have Python do this for you with <code>enumerate()</code>."}, {"owner": {"reputation": 13, "user_id": 6382596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608f939af5cbfd6330fad62540378a6d?s=128&d=identicon&r=PG&f=1", "display_name": "bariox", "link": "https://stackoverflow.com/users/6382596/bariox"}, "reply_to_user": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 1, "creation_date": 1464825750, "post_id": 37580436, "comment_id": 62648185, "body": "@101 Thanks I was able to implement that post into my code"}], "owner": {"reputation": 13, "user_id": 6382596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608f939af5cbfd6330fad62540378a6d?s=128&d=identicon&r=PG&f=1", "display_name": "bariox", "link": "https://stackoverflow.com/users/6382596/bariox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1464824440, "answer_count": 0, "score": 0, "last_activity_date": 1464824146, "creation_date": 1464824146, "question_id": 37580436, "link": "https://stackoverflow.com/questions/37580436/how-to-get-the-index-of-duplicates-in-a-string", "closed_reason": "Duplicate", "title": "How to get the index of duplicates in a string", "body": "<p>Python cannot seem to differentiate between duplicates of the same letter. For example:</p>\n\n<pre><code>word = \"australia\"\nvariable = \"a\"\nfor letter in word:\n    if variable == letter:\n        index = word.index( letter )\n        print index\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>0\n0\n0\n</code></pre>\n\n<p>While python knows that there are three occurrences of the letter \"a\" in the word \"australia\", it keeps returning the index of the first occurrence. How can I fix this? Thanks.</p>\n"}, {"tags": ["php", "python", "exec", "webhooks", "cgi-bin"], "comments": [{"owner": {"reputation": 23293, "user_id": 2812842, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/u3oty.png?s=128&g=1", "display_name": "Robbie Averill", "link": "https://stackoverflow.com/users/2812842/robbie-averill"}, "edited": false, "score": 0, "creation_date": 1464824600, "post_id": 37580432, "comment_id": 62647873, "body": "It&#39;s totally possible, and there&#39;s nothing wrong with your code (assuming that asterix is a typo). It&#39;s likely that the user running your web server doesn&#39;t have permission to run the command. You can test this from the command line by running your script as that user instead of the default. I don&#39;t know how to do it on windows, but on a unix system it&#39;d be something like <code>sudo -u apache php myscript.php</code> (if <code>apache</code> runs your web server)"}, {"owner": {"reputation": 75, "user_id": 5046672, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-TImRF304i1A/AAAAAAAAAAI/AAAAAAAAAjI/LoA3Y7q0Sso/photo.jpg?sz=128", "display_name": "Samson", "link": "https://stackoverflow.com/users/5046672/samson"}, "reply_to_user": {"reputation": 23293, "user_id": 2812842, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/u3oty.png?s=128&g=1", "display_name": "Robbie Averill", "link": "https://stackoverflow.com/users/2812842/robbie-averill"}, "edited": false, "score": 0, "creation_date": 1464826255, "post_id": 37580432, "comment_id": 62648332, "body": "The asterisks were an attempt to highlight that line as the one to focus on in my script. I&#39;ll fix that to remove confusion."}, {"owner": {"reputation": 985, "user_id": 5357503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/524652594354467/picture?type=large", "display_name": "middlestump", "link": "https://stackoverflow.com/users/5357503/middlestump"}, "edited": false, "score": 0, "creation_date": 1464831544, "post_id": 37580432, "comment_id": 62649419, "body": "So many things can go wrong here. It will be more usefull if you could post what the error is that you see. shell_exec is not a safe way of doing things. Why not a pure PHP solution or a pure python solution instead of mixing?"}, {"owner": {"reputation": 75, "user_id": 5046672, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-TImRF304i1A/AAAAAAAAAAI/AAAAAAAAAjI/LoA3Y7q0Sso/photo.jpg?sz=128", "display_name": "Samson", "link": "https://stackoverflow.com/users/5046672/samson"}, "edited": false, "score": 0, "creation_date": 1464850395, "post_id": 37580432, "comment_id": 62655166, "body": "For a number of reasons but the main one is that I&#39;m using one Python-only library and one PHP-only library. I could forego the PHP script, but the problem there is receiving the webhooks (POSTs mainly). Frankly, I don&#39;t fully understand how to create an endpoint to send requests to using python. In PHP it is simple. I just send the request to the URL of the script. With Python it isn&#39;t so easy because everything is in the cgi-bin. I am still learning, so go easy on me, but an explanation of how to create a python endpoint would solve my problem."}], "answers": [{"tags": [], "owner": {"reputation": 4253, "user_id": 972240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4CIP1.png?s=128&g=1", "display_name": "gevorg", "link": "https://stackoverflow.com/users/972240/gevorg"}, "is_accepted": false, "score": 0, "last_activity_date": 1467372403, "last_edit_date": 1495542776, "creation_date": 1467372403, "answer_id": 38144268, "question_id": 37580432, "link": "https://stackoverflow.com/questions/37580432/how-can-i-call-shell-exec-from-php-webhook/38144268#38144268", "title": "How can I call shell_exec() from PHP webhook?", "body": "<p><strong>Problem</strong></p>\n\n<p>As <a href=\"https://stackoverflow.com/users/2812842/robbie-averill\">Robbie Averill</a> mentioned, most probably you have a permission issue and you can fix it by adding additional permissions to user that is used to run the web server. However, I think it is not a good style to mix <a href=\"/questions/tagged/php\" class=\"post-tag\" title=\"show questions tagged &#39;php&#39;\" rel=\"tag\">php</a> with <a href=\"/questions/tagged/python\" class=\"post-tag\" title=\"show questions tagged &#39;python&#39;\" rel=\"tag\">python</a>, and if you cannot re-write <code>SECpull.py</code> to <a href=\"/questions/tagged/php\" class=\"post-tag\" title=\"show questions tagged &#39;php&#39;\" rel=\"tag\">php</a>, then better do everything in <a href=\"/questions/tagged/python\" class=\"post-tag\" title=\"show questions tagged &#39;python&#39;\" rel=\"tag\">python</a>. </p>\n\n<p>I suggest you to use <a href=\"http://flask.pocoo.org/\" rel=\"nofollow noreferrer\">Flask</a> for that.</p>\n\n<p><strong>Sample</strong></p>\n\n<pre><code># server.py\nfrom flask import Flask\napp = Flask(__name__)\n\n# Setup custom route here\n@app.route(\"/\") \ndef index():\n    # Add SECpull.py logic here.\n    return \"Welcome To Python Server!\"\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>\n\n<p><strong>Setup</strong></p>\n\n<pre><code>$ pip install Flask\n$ python server.py\n\n* Running on http://localhost:5000/\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5046672, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-TImRF304i1A/AAAAAAAAAAI/AAAAAAAAAjI/LoA3Y7q0Sso/photo.jpg?sz=128", "display_name": "Samson", "link": "https://stackoverflow.com/users/5046672/samson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 415, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467372494, "creation_date": 1464824121, "last_edit_date": 1467372494, "question_id": 37580432, "link": "https://stackoverflow.com/questions/37580432/how-can-i-call-shell-exec-from-php-webhook", "title": "How can I call shell_exec() from PHP webhook?", "body": "<p>I'm having a major issue and I can't find a solution. I currently have a PHP script that accepts a webhook (HTTP POST) as a trigger. Based on variables contained in the POST, an exec('python script') is supposed to run, and return some variables. It works fine when I run it from the command line it works fine, but when I try to trigger the script from any type of HTTP request, the exec() function does not run. Here is the section of code that is affected:</p>\n\n<pre><code>$command = shell_exec('python C:\\\\xampp\\\\cgi-bin\\\\SECpull.py');\n\n$company_dump = print_r($command, TRUE);\n$fp = fopen('retvals.txt', 'w');\nfwrite($fp, $company_dump);\nfclose($fp);\n</code></pre>\n\n<p>If it isn't possible to have an exec() function in a PHP script that is triggerd by an HTTP POST, then how should I go about this?      </p>\n"}, {"tags": ["python", "file", "buffer"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1464835415, "post_id": 37580411, "comment_id": 62650232, "body": "You should consider using an actual message queue. It will handle access and persistence for you."}, {"owner": {"reputation": 55, "user_id": 3434905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EI1W1.png?s=128&g=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/3434905/federico"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1464837820, "post_id": 37580411, "comment_id": 62650741, "body": "@IgnacioVazquez-Abrams I understand the scope of queues, but I need this information to be secured if any power shutdown happens, and for my understanding a queue will not be safe and data can get lost."}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1464838361, "post_id": 37580411, "comment_id": 62650862, "body": "It will be if you configure it correctly."}, {"owner": {"reputation": 55, "user_id": 3434905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EI1W1.png?s=128&g=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/3434905/federico"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1464838525, "post_id": 37580411, "comment_id": 62650898, "body": "Can you help me more? is there any working module?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3434905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EI1W1.png?s=128&g=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/3434905/federico"}, "edited": false, "score": 0, "creation_date": 1464837389, "post_id": 37580653, "comment_id": 62650660, "body": "I don&#39;t want to get updates, but just one to put information at the bottom, and another to increment and delete the data, only when the send function was successful."}, {"owner": {"reputation": 1082, "user_id": 1918858, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a9249e7767f226a6d279b460e2e7616?s=128&d=identicon&r=PG&f=1", "display_name": "user1918858", "link": "https://stackoverflow.com/users/1918858/user1918858"}, "reply_to_user": {"reputation": 55, "user_id": 3434905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EI1W1.png?s=128&g=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/3434905/federico"}, "edited": false, "score": 0, "creation_date": 1464897392, "post_id": 37580653, "comment_id": 62686861, "body": "Deleting data from top of a file is a very expensive operation, you are better off maintaining a seek position and rolling over to another file after writing X entries. Once the entire file is read and processed we should delete the file."}, {"owner": {"reputation": 1082, "user_id": 1918858, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a9249e7767f226a6d279b460e2e7616?s=128&d=identicon&r=PG&f=1", "display_name": "user1918858", "link": "https://stackoverflow.com/users/1918858/user1918858"}, "reply_to_user": {"reputation": 55, "user_id": 3434905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EI1W1.png?s=128&g=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/3434905/federico"}, "edited": false, "score": 0, "creation_date": 1464897435, "post_id": 37580653, "comment_id": 62686881, "body": "Also if you want a distributed solution for this, you can look at Apache Bookkeeper"}], "tags": [], "owner": {"reputation": 1082, "user_id": 1918858, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a9249e7767f226a6d279b460e2e7616?s=128&d=identicon&r=PG&f=1", "display_name": "user1918858", "link": "https://stackoverflow.com/users/1918858/user1918858"}, "is_accepted": false, "score": 0, "last_activity_date": 1464825677, "creation_date": 1464825677, "answer_id": 37580653, "question_id": 37580411, "link": "https://stackoverflow.com/questions/37580411/python-how-to-use-file-as-a-queue/37580653#37580653", "title": "python - How to use file as a Queue", "body": "<pre><code>#!/usr/bin/python\nimport time\n\noffset = 0\nwhile True:\n    infile=open(\"./log.txt\")\n    infile.seek(offset)\n    for line in infile:\n        print line // do something\n    offset=infile.tell()\n    infile.close()\n    time.sleep(10)\n</code></pre>\n\n<p>Only updates to log.txt are printed using this method</p>\n"}], "owner": {"reputation": 55, "user_id": 3434905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EI1W1.png?s=128&g=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/3434905/federico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2541, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465491156, "creation_date": 1464823944, "last_edit_date": 1465491156, "question_id": 37580411, "link": "https://stackoverflow.com/questions/37580411/python-how-to-use-file-as-a-queue", "title": "python - How to use file as a Queue", "body": "<p>I need to use a file as a <em>Queue</em> but I don't know how to start (also any other aproach is welcome), because I have a non-secure transmission between my device and a computer, and I need all the data to be saved until it is sent and successfully recieved. The DATA is a list which always holds the same type and amount of elements. I imagine something like this to be the file structure:</p>\n\n<pre><code>FILE\nDATA 0 &lt;- send_pointer \nDATA 1\nDATA 2\nDATA 3 \n       &lt;- new_item\n</code></pre>\n\n<p>So the code will look like:</p>\n\n<pre><code>while True:\n    DATA = data_gather()\n    FILE.write(DATA, new_item)\n    new_item += 1\n    x = FILE.read(send_pointer)\n    if send_function(x):\n        FILE.delete(send_pointer)\n        send_pointer += 1\n    else:\n        print('error sending x')\n</code></pre>\n\n<p>I hope you understand my issue, my english is not the best.</p>\n\n<p><strong>EDIT</strong>\nI installed this module: <a href=\"https://pypi.python.org/pypi/pqueue/0.1.1\" rel=\"nofollow\">https://pypi.python.org/pypi/pqueue/0.1.1</a></p>\n\n<p>But I don't know how to use it well. I can't find a way to delete the data I have already read from the file.</p>\n\n<p>Thanks!</p>\n\n<p><strong>EDIT 2</strong>\nSolved with pqueue.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 28637, "user_id": 99989, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLbIt.jpg?s=128&g=1", "display_name": "Neil G", "link": "https://stackoverflow.com/users/99989/neil-g"}, "edited": false, "score": 0, "creation_date": 1464822889, "post_id": 37580272, "comment_id": 62647394, "body": "This question has unfortunately no useful answers: <a href=\"http://stackoverflow.com/questions/22773443/built-in-function-in-numpy-to-interpret-an-integer-to-an-array-of-boolean-values\" title=\"built in function in numpy to interpret an integer to an array of boolean values\">stackoverflow.com/questions/22773443/&hellip;</a>"}, {"owner": {"reputation": 1239, "user_id": 5209610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/doSfi.jpg?s=128&g=1", "display_name": "Vladislav Martin", "link": "https://stackoverflow.com/users/5209610/vladislav-martin"}, "edited": false, "score": 0, "creation_date": 1464823270, "post_id": 37580272, "comment_id": 62647493, "body": "What&#39;s wrong with the accepted answer to the question that you linked? I apologize if I&#39;m not reading something correctly, but the accepted answer to that question seems to outline pretty neatly how to do exactly what you are asking for."}, {"owner": {"reputation": 28637, "user_id": 99989, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLbIt.jpg?s=128&g=1", "display_name": "Neil G", "link": "https://stackoverflow.com/users/99989/neil-g"}, "reply_to_user": {"reputation": 1239, "user_id": 5209610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/doSfi.jpg?s=128&g=1", "display_name": "Vladislav Martin", "link": "https://stackoverflow.com/users/5209610/vladislav-martin"}, "edited": false, "score": 0, "creation_date": 1464823361, "post_id": 37580272, "comment_id": 62647521, "body": "@VladislavMartin I have to convert my integer to an array of <code>np.int8</code>, which is ugly, and the output puts most significant bits first, and groups the bits into groups of 8 \u2014 neither are things I want."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1464842722, "post_id": 37580272, "comment_id": 62652003, "body": "In your one example, the order of the bits is ambiguous.  Please add the comment about the order of the bits to the question.  Perhaps include the expected output for the integer 8."}, {"owner": {"reputation": 28637, "user_id": 99989, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLbIt.jpg?s=128&g=1", "display_name": "Neil G", "link": "https://stackoverflow.com/users/99989/neil-g"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1464870350, "post_id": 37580272, "comment_id": 62668335, "body": "@WarrenWeckesser Good point."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464825026, "post_id": 37580551, "comment_id": 62647983, "body": "<code>np.invert</code> does not reverse the order of the bits."}, {"owner": {"reputation": 1239, "user_id": 5209610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/doSfi.jpg?s=128&g=1", "display_name": "Vladislav Martin", "link": "https://stackoverflow.com/users/5209610/vladislav-martin"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464825547, "post_id": 37580551, "comment_id": 62648130, "body": "Wow... what was I thinking? Well, fixed it. Does that look better @user2357112"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464825751, "post_id": 37580551, "comment_id": 62648187, "body": "Sort of, but you have a lingering reference to the order of the bits being &quot;already reversed by the previous step&quot;. Also, it looks like the questioner wants to autocompute the smallest required width instead of specifying a width manually, and for completeness, you should probably show how to get the NumPy array the questioner asked for out of this."}, {"owner": {"reputation": 1239, "user_id": 5209610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/doSfi.jpg?s=128&g=1", "display_name": "Vladislav Martin", "link": "https://stackoverflow.com/users/5209610/vladislav-martin"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464826362, "post_id": 37580551, "comment_id": 62648356, "body": "@user2357112 I see. All of those are good points, I&#39;ve made changes to my answer to address each of them - please let me know if I&#39;ve yet to present my answer is a satisfactory manner. It&#39;s important that anyone who sees this would get some use out of it (especially the OP!) :)"}], "tags": [], "owner": {"reputation": 1239, "user_id": 5209610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/doSfi.jpg?s=128&g=1", "display_name": "Vladislav Martin", "link": "https://stackoverflow.com/users/5209610/vladislav-martin"}, "is_accepted": false, "score": 2, "last_activity_date": 1464826305, "last_edit_date": 1464826305, "creation_date": 1464824858, "answer_id": 37580551, "question_id": 37580272, "link": "https://stackoverflow.com/questions/37580272/numpy-boolean-array-representation-of-an-integer/37580551#37580551", "title": "numpy Boolean array representation of an integer", "body": "<p>First, use <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.binary_repr.html\" rel=\"nofollow\"><code>np.binary_repr</code></a> to get the binary representation of the integer value. Remember to specify the bit-width you desire for your bit array here. I have included a way to programmatically determine the number of bits required to represent the given integer:</p>\n\n<pre><code>&gt;&gt;&gt; n = 5\n&gt;&gt;&gt; bin_n = bin(n)\n'0b101'\n&gt;&gt;&gt; smallest_length = n.bit_length()\n3\n&gt;&gt;&gt; bin_array = np.binary_repr(5, width=smallest_length)\nbin_array = '101'\n</code></pre>\n\n<p>Then, reverse the order of the bits in the output binary string:</p>\n\n<pre><code>&gt;&gt; reversed_bin_array[::-1]\nreversed_bin_array = '101'\n</code></pre>\n\n<p>Then, finally to get an array of bits with the earlier-specified bit-width, use <a href=\"https://pypi.python.org/pypi/bitarray/\" rel=\"nofollow\"><code>bitarray</code></a>. I have found that the <code>bitarray</code> object is a very useful means to conveniently store and operate on bit arrays:</p>\n\n<pre><code>&gt;&gt;&gt; bitarray('11110010') # from a string\n</code></pre>\n\n<p>I hope this helps, happy coding!</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 6412159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9410c6906701eb82c81eb548c7aaabdb?s=128&d=identicon&r=PG&f=1", "display_name": "Dorival Neto", "link": "https://stackoverflow.com/users/6412159/dorival-neto"}, "is_accepted": false, "score": 1, "last_activity_date": 1464826549, "creation_date": 1464826549, "answer_id": 37580756, "question_id": 37580272, "link": "https://stackoverflow.com/questions/37580272/numpy-boolean-array-representation-of-an-integer/37580756#37580756", "title": "numpy Boolean array representation of an integer", "body": "<p>Maybe it is not the easiest, but a compact way is</p>\n\n<p><code>from numpy import array\narray([i for i in bin(5)[2:]]) == '1'\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 2, "last_activity_date": 1464841501, "creation_date": 1464841501, "answer_id": 37582642, "question_id": 37580272, "link": "https://stackoverflow.com/questions/37580272/numpy-boolean-array-representation-of-an-integer/37582642#37582642", "title": "numpy Boolean array representation of an integer", "body": "<p>Here's an approach using <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.binary_repr.html\" rel=\"nofollow\"><code>np.binary_repr</code></a> and <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.fromstring.html\" rel=\"nofollow\"><code>np.fromstring</code></a> -</p>\n\n<pre><code>np.fromstring(np.binary_repr(num), dtype=np.uint8)==49\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [39]: num\nOut[39]: 17\n\nIn [40]: np.fromstring(np.binary_repr(num), dtype=np.uint8)==49\nOut[40]: array([ True, False, False, False,  True], dtype=bool)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28637, "user_id": 99989, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLbIt.jpg?s=128&g=1", "display_name": "Neil G", "link": "https://stackoverflow.com/users/99989/neil-g"}, "edited": false, "score": 0, "creation_date": 1464870524, "post_id": 37583076, "comment_id": 62668467, "body": "Clever!  I&#39;m actually specifying the <code>m = int(floor(log(n, 2) + 1))</code>, so this solution is the shortest for me."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 3, "last_activity_date": 1464843970, "creation_date": 1464843970, "answer_id": 37583076, "question_id": 37580272, "link": "https://stackoverflow.com/questions/37580272/numpy-boolean-array-representation-of-an-integer/37583076#37583076", "title": "numpy Boolean array representation of an integer", "body": "<p>If <code>n</code> is the integer, the expression <code>(n &amp; (1 &lt;&lt; np.arange(int(floor(log(n, 2) + 1))))) &gt; 0</code> will create a boolean array representing the bits, with the least significant bit in the first position.</p>\n\n<p>For example,</p>\n\n<pre><code>In [224]: n = 5\n\nIn [225]: from math import floor, log\n\nIn [226]: n = 5\n\nIn [227]: (n &amp; (1 &lt;&lt; np.arange(int(floor(log(n, 2) + 1))))) &gt; 0\nOut[227]: array([ True, False,  True], dtype=bool)\n\nIn [228]: n = 8\n\nIn [229]: (n &amp; (1 &lt;&lt; np.arange(int(floor(log(n, 2) + 1))))) &gt; 0\nOut[229]: array([False, False, False,  True], dtype=bool)\n\nIn [230]: n = 514\n\nIn [231]: (n &amp; (1 &lt;&lt; np.arange(int(floor(log(n, 2) + 1))))) &gt; 0\nOut[231]: array([False,  True, False, False, False, False, False, False, False,  True], dtype=bool)\n</code></pre>\n"}], "owner": {"reputation": 28637, "user_id": 99989, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLbIt.jpg?s=128&g=1", "display_name": "Neil G", "link": "https://stackoverflow.com/users/99989/neil-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 37583076, "answer_count": 4, "score": 2, "last_activity_date": 1503138423, "creation_date": 1464822870, "last_edit_date": 1503138423, "question_id": 37580272, "link": "https://stackoverflow.com/questions/37580272/numpy-boolean-array-representation-of-an-integer", "title": "numpy Boolean array representation of an integer", "body": "<p>What's the easiest way to produce a numpy Boolean array representation of an integer?  For example, map <code>6</code> to <code>np.array([False, True, True], dtype=np.bool)</code>.</p>\n"}, {"tags": ["python", "sorting", "cython"], "answers": [{"tags": [], "owner": {"reputation": 4924, "user_id": 2862719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yzhk5.png?s=128&g=1", "display_name": "m00am", "link": "https://stackoverflow.com/users/2862719/m00am"}, "is_accepted": false, "score": 0, "last_activity_date": 1469628217, "creation_date": 1469628217, "answer_id": 38615228, "question_id": 37580268, "link": "https://stackoverflow.com/questions/37580268/sort-a-list-of-cdef-objects-by-attribute-in-a-cdef-class/38615228#38615228", "title": "Sort a list of cdef objects by attribute in a cdef class", "body": "<h2>What is going wrong here</h2>\n\n<p>The Python- lambda function can not access the cdef attribute of <code>Edge</code>. If you try to directly access the attribute of a cdef class from python you will get an error unless you add either the <code>readonly</code> (for read access) or the <code>public</code> (for read and write access) to the attribute definition.</p>\n\n<p>Take this Edge class for example:</p>\n\n<pre><code>cdef class Edge:\n    cdef readonly int savings # visible from python\n    cdef int foo # not visible from python\n\n    def __init__(self, int s):\n        self.savings = s\n        self.foo = 42\n\n    def __repr__(self):\n        \"\"\"Friendly representation so we can see how the edges sort.\"\"\"\n        return \"Edge: {}\".format(self.savings)\n</code></pre>\n\n<p>If we compile this (assume it resides in the file <code>sortlist.pyx</code>) and import it in a Python shell:</p>\n\n<pre><code>In [1]: import sortlist as sl\n\nIn [2]: e = sl.Edge(42)\n\nIn [3]: e.savings\nOut[3]: 23\n\nIn [4]: e.foo\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-4-3ebfe6d526e9&gt; in &lt;module&gt;()\n----&gt; 1 e.foo\n\nAttributeError: 'sortlist.Edge' object has no attribute 'foo'\n</code></pre>\n\n<p>If you access the <code>readonly</code> attribute <code>saving</code> everything works, but the Cython only attribute <code>foo</code> throws the error you are getting. It is not that the attribute is not there, Python just can not see it.</p>\n\n<h2>Working example</h2>\n\n<p>Basically the fix is: Add <code>readonly</code> to the declaration of savings in the Edge class. The Edge class above works with the following code.</p>\n\n<pre><code>cdef class Alist:\n    cdef list inner\n\n    def __init__(self):\n        self.inner = []\n\n    cdef void append(self, Edge a):\n        self.inner.append(a)\n\n    cdef void sort(self):\n        self.inner.sort(key = lambda c : c.savings)\n\ndef test_sorting():\n    # create edges with saving between 0 an 9\n    edges = [Edge(i) for i in range(10)]\n    # create an intersting instance for sorting\n    shuffle(edges)\n    al = Alist()\n    # fill the inner list\n    for e in edges:\n        al.append(e)\n    print(\"Finished Alist:\", al.inner)\n    al.sort()\n    print(\"Sorted Alist:\", al.inner)\n</code></pre>\n\n<h2>Why you might not need <strong>richcmp</strong> (where it is now)</h2>\n\n<p>When you define a <code>__richcmp__</code> method in <code>Alist</code> it can be used to compare two <code>Alist</code> objects. Hence the typing as Edge is not useful here. </p>\n\n<p>What you could do is define a <code>richcmp</code> method for <code>Edge</code>, meaning a method that can be used to compare two <code>Edge</code> objects. I would strongly advise to implement <strong>all</strong> comparisons then. Because like it is now it might show some weird behavior like</p>\n\n<pre><code>In [1]: e1 = Edge(42)\n\nIn [2]: e2 = Edge(42)\n\nIn [3]: e3 = Edge(23)\n\nIn [4]: e1 &lt; e2\nOut[4]: False\n# How it is supposed to be\n\nIn [5]: e1 == e2\nOut[5]: False \n# This should be True\n\nIn [6]: e1 &lt; e3\nOut[6]: True\n# How it is supposed to be\n\nIn [6]: e1 &lt;= e3\nOut[6]: False\n# This should be True\n</code></pre>\n\n<p>because all comparisons that are not <code>op=0</code> which is the <code>&lt;</code> operation (also available as <code>cpython.object.Py_LT</code>) default to False. So if you want to use this, go all the way.</p>\n\n<p>More details on rich comparison can be found <a href=\"http://docs.cython.org/en/latest/src/userguide/special_methods.html#rich-comparisons\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 1501463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e1322cea0fd51d70ed982ebfc5ae1a?s=128&d=identicon&r=PG", "display_name": "user1501463", "link": "https://stackoverflow.com/users/1501463/user1501463"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469629641, "creation_date": 1464822859, "last_edit_date": 1469629641, "question_id": 37580268, "link": "https://stackoverflow.com/questions/37580268/sort-a-list-of-cdef-objects-by-attribute-in-a-cdef-class", "title": "Sort a list of cdef objects by attribute in a cdef class", "body": "<p>I would like to sort the list <code>inner</code> of this class. The list contains objects of a cdef class called <code>Edge</code>. The Edge class contains a member variable called <code>savings</code>. I would like sort the list by this variable.</p>\n\n<pre><code>cdef class Alist:\n    def __init__(self):\n        self.inner = []\n    cdef list inner\n    cdef void append(self, Edge a):\n        self.inner.append(a)\n    cdef void pop(self, int a):\n        self.inner.pop(a)\n    cdef void insert(self,int pos,Edge a):\n        self.inner.insert(pos,a)\n    cdef int index(self,Edge a):\n        if a in self.inner:\n            return self.inner.index(a)\n        return -1\n    cdef Edge get(self, int i):\n        return &lt;Edge&gt; self.inner[i]\n    cdef void sort(self):\n        self.inner.sort(key = lambda c : c.Savings)\n        #self.inner.sort()\n    def __len__(self):\n        return len(self.inner)\n\n    def __richcmp__(Edge self, Edge other,int op):\n        if op == 0:\n            if self.inner.savings &lt; other.inner.savings:\n                return True\n        return False\n</code></pre>\n\n<p>In order to do that, I created the method <code>sort</code> inside the class, but when I execute it, I obtain the following error message:</p>\n\n<blockquote>\n  <p>Exception AttributeError: \"'fib.Edge' object has no attribute 'savings'\" in 'fib.Alist.sort' ignored</p>\n</blockquote>\n"}, {"tags": ["python", "json", "node.js", "mongodb", "immutability"], "answers": [{"tags": [], "owner": {"reputation": 8186, "user_id": 5919473, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vPkmT.jpg?s=128&g=1", "display_name": "profesor79", "link": "https://stackoverflow.com/users/5919473/profesor79"}, "is_accepted": false, "score": 3, "last_activity_date": 1466977400, "creation_date": 1466977400, "answer_id": 38043469, "question_id": 37580165, "link": "https://stackoverflow.com/questions/37580165/how-to-make-a-field-immutable-after-creation-in-mongodb/38043469#38043469", "title": "How to make a field immutable after creation in MongoDB?", "body": "<p>imho there is no know methods to prevent updates inside mongo.\nAs you can control app behavior, then someone will still able to make this update outside the app. Mongo don't have triggers - which in sql world have the possibility to play as a data guards and prevent field changes.</p>\n\n<p>As you re not using ODM, then all you can have is CQRS pattern which will allow you to control app behavior and prevent such updates.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10507073, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eg6TdWq8nXA/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXFi9B4F-HQQf-R8nnGxR4N11CI0g/mo/photo.jpg?sz=128", "display_name": "Lubo Kirov", "link": "https://stackoverflow.com/users/10507073/lubo-kirov"}, "is_accepted": false, "score": 1, "last_activity_date": 1541585298, "creation_date": 1541585298, "answer_id": 53187299, "question_id": 37580165, "link": "https://stackoverflow.com/questions/37580165/how-to-make-a-field-immutable-after-creation-in-mongodb/53187299#53187299", "title": "How to make a field immutable after creation in MongoDB?", "body": "<p>I had the same problem with field modifications.</p>\n\n<p>Try <a href=\"https://www.npmjs.com/package/mongoose-immutable-plugin\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/mongoose-immutable-plugin</a></p>\n\n<p>The plugin will reject each modification-attempt on a field and it works for</p>\n\n<ol>\n<li><p>Update</p></li>\n<li><p>UpdateOne</p></li>\n<li><p>FindOneAndUpdate</p></li>\n<li><p>UpdateMany</p></li>\n<li><p>Re-save</p></li>\n</ol>\n\n<p>It supports array, nesting objects, etc. types of field and guards deep immutability.</p>\n\n<p>Plugin also handles update-options as $set, $inc, etc.</p>\n"}], "owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2429, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1541585298, "creation_date": 1464822215, "last_edit_date": 1464822538, "question_id": 37580165, "link": "https://stackoverflow.com/questions/37580165/how-to-make-a-field-immutable-after-creation-in-mongodb", "title": "How to make a field immutable after creation in MongoDB?", "body": "<p>Use case: I'm writing a backend using MongoDB (and Flask).  At the moment this is not using any ORM like Mongoose/Mongothon.  I'd like to store the _id of the user which created each document in the document.  I'd like it to be impossible to modify that field after creation.  The backend currently allows arbitrary updates using (essentially) <code>collection.update_one({\"_id\": oid}, {\"$set\": request.json})</code></p>\n\n<p>I could filter out the _creator_id field from request.json (something like <code>del request.json[\"_creator_id\"]</code>) but I'm concerned that doesn't cover all possible ways in which the syntax could be modified to cause the field to be updated (hmm, dot notation?).  Ideally I'd like a way to make fields write-once in MongoDB itself, but failing that, some bulletproof way to prevent updates of a field in code.</p>\n"}, {"tags": ["python", "numbers", "currency-formatting"], "comments": [{"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 3, "creation_date": 1464822445, "post_id": 37580151, "comment_id": 62647272, "body": "why would you get downvoted for no reason?"}, {"owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "reply_to_user": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1464822511, "post_id": 37580151, "comment_id": 62647287, "body": "@leekaiinthesky, currency might conain <code>,</code> or <code>.</code>."}, {"owner": {"reputation": 4731, "user_id": 1716866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411da970ac5de2f1a0d66a10741b0e9c?s=128&d=identicon&r=PG", "display_name": "leekaiinthesky", "link": "https://stackoverflow.com/users/1716866/leekaiinthesky"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1464822513, "post_id": 37580151, "comment_id": 62647288, "body": "@TigerhawkT3 Not exactly duplicate, since the <code>.</code> is still meaningful."}, {"owner": {"reputation": 4731, "user_id": 1716866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411da970ac5de2f1a0d66a10741b0e9c?s=128&d=identicon&r=PG", "display_name": "leekaiinthesky", "link": "https://stackoverflow.com/users/1716866/leekaiinthesky"}, "edited": false, "score": 0, "creation_date": 1464822604, "post_id": 37580151, "comment_id": 62647316, "body": "@sparkandshine You want to input the locale as well? Or will you know what characters you want to take out (in which case regular expressions are sufficient)?"}, {"owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1464823177, "post_id": 37580151, "comment_id": 62647463, "body": "@TigerhawkT3, I edited my question and cited the post you mentioned. Pls check it."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1464823446, "post_id": 37580151, "comment_id": 62647553, "body": "This is definitely not a duplicate, going from currency to just  decimal numbers is a whole lot more involved."}], "answers": [{"tags": [], "owner": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "is_accepted": true, "score": 5, "last_activity_date": 1464890239, "creation_date": 1464890239, "answer_id": 37598997, "question_id": 37580151, "link": "https://stackoverflow.com/questions/37580151/parse-currency-into-numbers-in-python/37598997#37598997", "title": "Parse currency into numbers in Python", "body": "<h2>Using babel</h2>\n\n<p>The babel documentation notes that <a href=\"http://babel.pocoo.org/en/latest/numbers.html#parsing-numbers\" rel=\"noreferrer\">the number parsing is not fully implemented yes</a> but they have done a lot of work to get currency info into the library.  You can use <code>get_currency_name()</code> and <code>get_currency_symbol()</code> to get currency details, and also all other <code>get_...</code> functions to get the normal number details (decimal point, minus sign, etc.).</p>\n\n<p>Using that information you can exclude from a currency string the currency details (name, sign) and groupings (e.g. <code>,</code> in the US).  Then you change the decimal details into the ones used by the <code>C</code> locale (<code>-</code> for minus, and <code>.</code> for the decimal point).</p>\n\n<p>This results in this code (i added an object to keep some of the data, which may come handy in further processing):</p>\n\n<pre><code>import re, os\nfrom babel import numbers as n\nfrom babel.core import default_locale\n\nclass AmountInfo(object):\n    def __init__(self, name, symbol, value):\n        self.name = name\n        self.symbol = symbol\n        self.value = value\n\ndef parse_currency(value, cur):\n    decp = n.get_decimal_symbol()\n    plus = n.get_plus_sign_symbol()\n    minus = n.get_minus_sign_symbol()\n    group = n.get_group_symbol()\n    name = n.get_currency_name(cur)\n    symbol = n.get_currency_symbol(cur)\n    remove = [plus, name, symbol, group]\n    for token in remove:\n        # remove the pieces of information that shall be obvious\n        value = re.sub(re.escape(token), '', value)\n    # change the minus sign to a LOCALE=C minus\n    value = re.sub(re.escape(minus), '-', value)\n    # and change the decimal mark to a LOCALE=C decimal point\n    value = re.sub(re.escape(decp), '.', value)\n    # just in case remove extraneous spaces\n    value = re.sub('\\s+', '', value)\n    return AmountInfo(name, symbol, value)\n\n#cur_loc = os.environ['LC_ALL']\ncur_loc = default_locale()\nprint('locale:', cur_loc)\ntest = [ (n.format_currency(123456.789, 'USD', locale=cur_loc), 'USD')\n       , (n.format_currency(-123456.78, 'PLN', locale=cur_loc), 'PLN')\n       , (n.format_currency(123456.789, 'PLN', locale=cur_loc), 'PLN')\n       , (n.format_currency(123456.789, 'IDR', locale=cur_loc), 'IDR')\n       , (n.format_currency(123456.789, 'JPY', locale=cur_loc), 'JPY')\n       , (n.format_currency(-123456.78, 'JPY', locale=cur_loc), 'JPY')\n       , (n.format_currency(123456.789, 'CNY', locale=cur_loc), 'CNY')\n       , (n.format_currency(-123456.78, 'CNY', locale=cur_loc), 'CNY')\n       ]\n\nfor v,c in test:\n    print('As currency :', c, ':', v.encode('utf-8'))\n    info = parse_currency(v, c)\n    print('As value    :', c, ':', info.value)\n    print('Extra info  :', info.name.encode('utf-8')\n                         , info.symbol.encode('utf-8'))\n</code></pre>\n\n<p>The output looks promising (in US locale):</p>\n\n<pre><code>$ export LC_ALL=en_US\n$ ./cur.py\nlocale: en_US\nAs currency : USD : b'$123,456.79'\nAs value    : USD : 123456.79\nExtra info  : b'US Dollar' b'$'\nAs currency : PLN : b'-z\\xc5\\x82123,456.78'\nAs value    : PLN : -123456.78\nExtra info  : b'Polish Zloty' b'z\\xc5\\x82'\nAs currency : PLN : b'z\\xc5\\x82123,456.79'\nAs value    : PLN : 123456.79\nExtra info  : b'Polish Zloty' b'z\\xc5\\x82'\nAs currency : IDR : b'Rp123,457'\nAs value    : IDR : 123457\nExtra info  : b'Indonesian Rupiah' b'Rp'\nAs currency : JPY : b'\\xc2\\xa5123,457'\nAs value    : JPY : 123457\nExtra info  : b'Japanese Yen' b'\\xc2\\xa5'\nAs currency : JPY : b'-\\xc2\\xa5123,457'\nAs value    : JPY : -123457\nExtra info  : b'Japanese Yen' b'\\xc2\\xa5'\nAs currency : CNY : b'CN\\xc2\\xa5123,456.79'\nAs value    : CNY : 123456.79\nExtra info  : b'Chinese Yuan' b'CN\\xc2\\xa5'\nAs currency : CNY : b'-CN\\xc2\\xa5123,456.78'\nAs value    : CNY : -123456.78\nExtra info  : b'Chinese Yuan' b'CN\\xc2\\xa5'\n</code></pre>\n\n<p>And it still works in different locales (Brazil is notable for using the comma as a decimal mark):</p>\n\n<pre><code>$ export LC_ALL=pt_BR\n$ ./cur.py \nlocale: pt_BR\nAs currency : USD : b'US$123.456,79'\nAs value    : USD : 123456.79\nExtra info  : b'D\\xc3\\xb3lar americano' b'US$'\nAs currency : PLN : b'-PLN123.456,78'\nAs value    : PLN : -123456.78\nExtra info  : b'Zloti polon\\xc3\\xaas' b'PLN'\nAs currency : PLN : b'PLN123.456,79'\nAs value    : PLN : 123456.79\nExtra info  : b'Zloti polon\\xc3\\xaas' b'PLN'\nAs currency : IDR : b'IDR123.457'\nAs value    : IDR : 123457\nExtra info  : b'Rupia indon\\xc3\\xa9sia' b'IDR'\nAs currency : JPY : b'JP\\xc2\\xa5123.457'\nAs value    : JPY : 123457\nExtra info  : b'Iene japon\\xc3\\xaas' b'JP\\xc2\\xa5'\nAs currency : JPY : b'-JP\\xc2\\xa5123.457'\nAs value    : JPY : -123457\nExtra info  : b'Iene japon\\xc3\\xaas' b'JP\\xc2\\xa5'\nAs currency : CNY : b'CN\\xc2\\xa5123.456,79'\nAs value    : CNY : 123456.79\nExtra info  : b'Yuan chin\\xc3\\xaas' b'CN\\xc2\\xa5'\nAs currency : CNY : b'-CN\\xc2\\xa5123.456,78'\nAs value    : CNY : -123456.78\nExtra info  : b'Yuan chin\\xc3\\xaas' b'CN\\xc2\\xa5'\n</code></pre>\n\n<hr>\n\n<p>It is worth to point out that <code>babel</code> has some encoding problems.  That is because the locale files (in <code>locale-data</code>) do use different encoding themselves.  If you're working with currencies you're familiar with that should not be a problem.  But if you try unfamiliar currencies you might run into problems (i just learned that Poland uses <code>iso-8859-2</code>, not <code>iso-8859-1</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 4153569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e129e272154848a88c8bdab5e3e10881?s=128&d=identicon&r=PG&f=1", "display_name": "aj8907", "link": "https://stackoverflow.com/users/4153569/aj8907"}, "is_accepted": false, "score": 8, "last_activity_date": 1589989717, "last_edit_date": 1589989717, "creation_date": 1589901324, "answer_id": 61894534, "question_id": 37580151, "link": "https://stackoverflow.com/questions/37580151/parse-currency-into-numbers-in-python/61894534#61894534", "title": "Parse currency into numbers in Python", "body": "<p>Below is a general currency parser that doesn't rely on the babel library.</p>\n\n<pre><code>import numpy as np\nimport re\n\ndef currency_parser(cur_str):\n    # Remove any non-numerical characters\n    # except for ',' '.' or '-' (e.g. EUR)\n    cur_str = re.sub(\"[^-0-9.,]\", '', cur_str)\n    # Remove any 000s separators (either , or .)\n    cur_str = re.sub(\"[.,]\", '', cur_str[:-3]) + cur_str[-3:]\n\n    if '.' in list(cur_str[-3:]):\n        num = float(cur_str)\n    elif ',' in list(cur_str[-3:]):\n        num = float(cur_str.replace(',', '.'))\n    else:\n        num = float(cur_str)\n\n    return np.round(num, 2)\n\n</code></pre>\n\n<p>Here is a pytest script that tests the function:</p>\n\n<pre><code>import numpy as np\nimport pytest\nimport re\n\n\ndef currency_parser(cur_str):\n    # Remove any non-numerical characters\n    # except for ',' '.' or '-' (e.g. EUR)\n    cur_str = re.sub(\"[^-0-9.,]\", '', cur_str)\n    # Remove any 000s separators (either , or .)\n    cur_str = re.sub(\"[.,]\", '', cur_str[:-3]) + cur_str[-3:]\n\n    if '.' in list(cur_str[-3:]):\n        num = float(cur_str)\n    elif ',' in list(cur_str[-3:]):\n        num = float(cur_str.replace(',', '.'))\n    else:\n        num = float(cur_str)\n\n    return np.round(num, 2)\n\n\n@pytest.mark.parametrize('currency_str, expected', [\n    (\n            '.3', 0.30\n    ),\n    (\n            '1', 1.00\n    ),\n    (\n            '1.3', 1.30\n    ),\n    (\n            '43,324', 43324.00\n    ),\n    (\n            '3,424', 3424.00\n    ),\n    (\n            '-0.00', 0.00\n    ),\n    (\n            'EUR433,432.53', 433432.53\n    ),\n    (\n            '25.675,26 EUR', 25675.26\n    ),\n    (\n            '2.447,93 EUR', 2447.93\n    ),\n    (\n            '-540,89EUR', -540.89\n    ),\n    (\n            '67.6 EUR', 67.60\n    ),\n    (\n            '30.998,63 CHF', 30998.63\n    ),\n    (\n            '0,00 CHF', 0.00\n    ),\n    (\n            '159.750,00 DKK', 159750.00\n    ),\n    (\n            '\u00a3 2.237,85', 2237.85\n    ),\n    (\n            '\u00a3 2,237.85', 2237.85\n    ),\n    (\n            '-1.876,85 SEK', -1876.85\n    ),\n    (\n            '59294325.3', 59294325.30\n    ),\n    (\n            '8,53 NOK', 8.53\n    ),\n    (\n            '0,09 NOK', 0.09\n    ),\n    (\n            '-.9 CZK', -0.9\n    ),\n    (\n            '35.255,40 PLN', 35255.40\n    ),\n    (\n            '-PLN123.456,78', -123456.78\n    ),\n    (\n            'US$123.456,79', 123456.79\n    ),\n    (\n            '-PLN123.456,78', -123456.78\n    ),\n    (\n            'PLN123.456,79', 123456.79\n    ),\n    (\n            'IDR123.457', 123457\n    ),\n    (\n            'JP\u00a5123.457', 123457\n    ),\n    (\n            '-JP\\xc2\\xa5123.457', -123457\n    ),\n    (\n            'CN\\xc2\\xa5123.456,79', 123456.79\n    ),\n    (\n            '-CN\\xc2\\xa5123.456,78', -123456.78\n    ),\n])\ndef test_currency_parse(currency_str, expected):\n    assert currency_parser(currency_str) == expected\n</code></pre>\n"}], "owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6305, "favorite_count": 3, "accepted_answer_id": 37598997, "answer_count": 2, "score": 11, "last_activity_date": 1589989717, "creation_date": 1464822163, "last_edit_date": 1495541859, "question_id": 37580151, "link": "https://stackoverflow.com/questions/37580151/parse-currency-into-numbers-in-python", "title": "Parse currency into numbers in Python", "body": "<p>I just learnt from <a href=\"https://stackoverflow.com/questions/37579712/format-numbers-as-currency-in-python\">Format numbers as currency in Python</a> that the Python module <a href=\"http://babel.pocoo.org/en/latest/index.html\" rel=\"noreferrer\">babel</a> provides <a href=\"http://babel.pocoo.org/en/latest/numbers.html\" rel=\"noreferrer\"><code>babel.numbers.format_currency</code></a> to format numbers as currency. For instance,</p>\n\n<pre><code>from babel.numbers import format_currency\n\ns = format_currency(123456.789, 'USD', locale='en_US')  # u'$123,456.79'\ns = format_currency(123456.789, 'EUR', locale='fr_FR')  # u'123\\xa0456,79\\xa0\\u20ac'\n</code></pre>\n\n<p>How about the reverse, from currency to numbers, such as <code>$123,456,789.00</code> --> <code>123456789</code>? <code>babel</code> provides <a href=\"http://babel.pocoo.org/en/latest/api/numbers.html#number-parsing\" rel=\"noreferrer\"><code>babel.numbers.parse_number</code></a> to parse local numbers, but I didn't found something like <code>parse_currency</code>. So, what is the ideal way to parse local currency into numbers?</p>\n\n<hr>\n\n<p>I went through <a href=\"https://stackoverflow.com/questions/1450897/python-removing-characters-except-digits-from-string\">Python: removing characters except digits from string</a>.</p>\n\n<pre><code># Way 1\nimport string\nall=string.maketrans('','')\nnodigs=all.translate(all, string.digits)\n\ns = '$123,456.79'\nn = s.translate(all, nodigs)    # 12345679, lost `.`\n\n# Way 2\nimport re\nn = re.sub(\"\\D\", \"\", s)         # 12345679\n</code></pre>\n\n<p>It doesn't take care the decimal separator <code>.</code>.</p>\n\n<hr>\n\n<p>Remove all non-numeric characters, except for <code>.</code>, from a string (refer to <a href=\"https://stackoverflow.com/questions/947776/strip-all-non-numeric-characters-except-for-from-a-string-in-python\">here</a>),</p>\n\n<pre><code>import re\n\n# Way 1:\ns = '$123,456.79'\nn = re.sub(\"[^0-9|.]\", \"\", s)   # 123456.79\n\n# Way 2:\nnon_decimal = re.compile(r'[^\\d.]+')\ns = '$123,456.79'\nn = non_decimal.sub('', s)      # 123456.79\n</code></pre>\n\n<p>It does process the decimal separator <code>.</code>.</p>\n\n<hr>\n\n<p>But the above solutions don't work when coming to, for instance,</p>\n\n<pre><code>from babel.numbers import format_currency\ns = format_currency(123456.789, 'EUR', locale='fr_FR')  # u'123\\xa0456,79\\xa0\\u20ac'\nnew_s = s.encode('utf-8') # 123\u00a0456,79\u00a0\u20ac\n</code></pre>\n\n<p>As you can see, the format of currency varies. <strong>What is the ideal way to parse currency into numbers in a general way?</strong></p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "boto3"], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 5776824, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e5723ab917ee72b95ecc3b0df0d2d1db?s=128&d=identicon&r=PG&f=1", "display_name": "Chittolina", "link": "https://stackoverflow.com/users/5776824/chittolina"}, "edited": false, "score": 0, "creation_date": 1464825035, "post_id": 37580244, "comment_id": 62647986, "body": "I just checked the <a href=\"https://github.com/boto/boto3/blob/develop/boto3/exceptions.py\" rel=\"nofollow noreferrer\">exceptions file</a> but the &#39;S3UploadFailedError&#39; seems to be empty, it&#39;s just a Boto3Error subclass without implementation... I&#39;m new with python so I may have misunderstood this. However i&#39;ll try using head_object"}, {"owner": {"reputation": 10887, "user_id": 5314382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aj9Lv.jpg?s=128&g=1", "display_name": "Jordon Phillips", "link": "https://stackoverflow.com/users/5314382/jordon-phillips"}, "reply_to_user": {"reputation": 225, "user_id": 5776824, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e5723ab917ee72b95ecc3b0df0d2d1db?s=128&d=identicon&r=PG&f=1", "display_name": "Chittolina", "link": "https://stackoverflow.com/users/5776824/chittolina"}, "edited": false, "score": 0, "creation_date": 1464885784, "post_id": 37580244, "comment_id": 62680219, "body": "@Chittolina it&#39;s the exception that will be raised if the transfer fails. See the source <a href=\"https://github.com/boto/boto3/blob/develop/boto3/s3/transfer.py#L379\" rel=\"nofollow noreferrer\">here</a>. If you don&#39;t trust clean return, then head_object is the way to go."}], "tags": [], "owner": {"reputation": 10887, "user_id": 5314382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aj9Lv.jpg?s=128&g=1", "display_name": "Jordon Phillips", "link": "https://stackoverflow.com/users/5314382/jordon-phillips"}, "is_accepted": true, "score": 9, "last_activity_date": 1464822729, "creation_date": 1464822729, "answer_id": 37580244, "question_id": 37580092, "link": "https://stackoverflow.com/questions/37580092/boto3-verify-if-the-file-has-been-uploaded-using-upload-file/37580244#37580244", "title": "Boto3: Verify if the file has been uploaded using upload_file()", "body": "<p>It will raise <code>boto3.exceptions.S3UploadFailedError</code>. You can also do a <a href=\"http://boto3.readthedocs.io/en/latest/reference/services/s3.html#S3.Client.head_object\" rel=\"noreferrer\"><code>head_object</code></a> request to verify that the object looks like it should. This will raise a <code>botocore.ClientError</code> with the code <code>404</code> if the object does not exist.</p>\n"}, {"tags": [], "owner": {"reputation": 10169, "user_id": 6017840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0178fd0ada940a400e40867315020b2?s=128&d=identicon&r=PG&f=1", "display_name": "mootmoot", "link": "https://stackoverflow.com/users/6017840/mootmoot"}, "is_accepted": false, "score": 1, "last_activity_date": 1464856534, "creation_date": 1464856534, "answer_id": 37586636, "question_id": 37580092, "link": "https://stackoverflow.com/questions/37580092/boto3-verify-if-the-file-has-been-uploaded-using-upload-file/37586636#37586636", "title": "Boto3: Verify if the file has been uploaded using upload_file()", "body": "<p>There is few ways to check. First, you should always make sha256 hash for your file. When you upload, remember to put this info inside the Meta part of the object upload script. </p>\n\n<ul>\n<li>read the whole file, retrieve the sha256 has from the header meta, and recalculate the has to check it is tally. </li>\n<li>Add an events for the bucket on PUT. When file successfully uploaded, send the events to a queue which you can inspect.  So in success upload but your program crash afterwards, you still have a fall back than reupload the file again. </li>\n</ul>\n"}], "owner": {"reputation": 225, "user_id": 5776824, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e5723ab917ee72b95ecc3b0df0d2d1db?s=128&d=identicon&r=PG&f=1", "display_name": "Chittolina", "link": "https://stackoverflow.com/users/5776824/chittolina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5689, "favorite_count": 3, "accepted_answer_id": 37580244, "answer_count": 2, "score": 5, "last_activity_date": 1464856534, "creation_date": 1464821776, "question_id": 37580092, "link": "https://stackoverflow.com/questions/37580092/boto3-verify-if-the-file-has-been-uploaded-using-upload-file", "title": "Boto3: Verify if the file has been uploaded using upload_file()", "body": "<p>I'm making a backup script using boto3 using this line to upload the item:</p>\n\n<pre><code>bucket.upload_file(backup_file_name,bucket_path+backup_file_name)\n</code></pre>\n\n<p>How can I verify if this file has really been uploaded to my bucket? I tried to find something using boto3 doc but I didn't found anything. Does this method throws any exception that I can handle?</p>\n"}, {"tags": ["python", "numpy", "piecewise"], "comments": [{"owner": {"reputation": 5426, "user_id": 4887423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yW2L2.jpg?s=128&g=1", "display_name": "Willie Cheng", "link": "https://stackoverflow.com/users/4887423/willie-cheng"}, "edited": false, "score": 0, "creation_date": 1464821911, "post_id": 37580059, "comment_id": 62647115, "body": "Please look at this <a href=\"http://stackoverflow.com/help\">URL</a> it will be handy to lift your quality up"}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1464822271, "creation_date": 1464822271, "answer_id": 37580178, "question_id": 37580059, "link": "https://stackoverflow.com/questions/37580059/constructing-piecewise-function-from-changepoints-in-numpy/37580178#37580178", "title": "Constructing piecewise function from changepoints in Numpy", "body": "<pre><code>In [1]: import numpy\n\nIn [2]: A = numpy.array([1, 7, 1000, 1500])\n\nIn [3]: B = numpy.array([True, False, True, True, False, True, False, False])\n\nIn [4]: A[B.cumsum() - 1]\nOut[4]: array([   1,    1,    7, 1000, 1000, 1500, 1500, 1500])\n</code></pre>\n\n<p><code>B.cumsum() - 1</code> computes which element of A to use for each element of the output, and then <code>A[B.cumsum() - 1]</code> extracts those elements. You could probably also work out a way to use <code>numpy.repeat</code> to do this.</p>\n"}], "owner": {"reputation": 75, "user_id": 6411997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d4ed4f3b89ab16cacf6d180c519cfc?s=128&d=identicon&r=PG&f=1", "display_name": "jdc", "link": "https://stackoverflow.com/users/6411997/jdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37580178, "answer_count": 1, "score": 1, "last_activity_date": 1464822271, "creation_date": 1464821565, "question_id": 37580059, "link": "https://stackoverflow.com/questions/37580059/constructing-piecewise-function-from-changepoints-in-numpy", "title": "Constructing piecewise function from changepoints in Numpy", "body": "<p>I want to construct a piecewise function from changepoints in python. I expect my inputs and outputs to be large, so speed is important.</p>\n\n<p>Input:</p>\n\n<ul>\n<li>int numpy array: <code>A = [1,7, 1000, 1500]</code></li>\n<li>bool numpy array: <code>B = [True, False, True, True, False, True, False, False]</code> where the length of <code>A</code> is equal to the number of <code>True</code> in <code>B</code></li>\n</ul>\n\n<p>Output: </p>\n\n<ul>\n<li>int numpy array: <code>C = [1, 1, 7, 1000, 1000, 1500, 1500, 1500]</code> where the length of <code>C</code> is the same as the length of <code>B</code></li>\n</ul>\n\n<p>Essentially each element of <code>A</code> is repeated until the next <code>True</code> in <code>B</code> shows up in which case the next element of <code>A</code> is used.</p>\n"}, {"tags": ["python", "python-3.x", "string", "algorithm", "optimization"], "answers": [{"tags": [], "owner": {"reputation": 1020, "user_id": 1626720, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bd64e41615937abec68bb821b1e1f774?s=128&d=identicon&r=PG", "display_name": "hhbilly", "link": "https://stackoverflow.com/users/1626720/hhbilly"}, "is_accepted": true, "score": -1, "last_activity_date": 1464833115, "last_edit_date": 1464833115, "creation_date": 1464828680, "answer_id": 37581013, "question_id": 37579917, "link": "https://stackoverflow.com/questions/37579917/find-the-shortest-substring-whose-replacement-makes-the-string-contain-equal-num/37581013#37581013", "title": "Find the shortest substring whose replacement makes the string contain equal number of each character", "body": "<p>Here's one solution with limited testing done. This should give you some ideas on how to improve your code.</p>\n\n<pre><code>from collections import Counter\nimport sys\nimport math\n\nn = int(input())\ns1 = input()\ns = Counter(s1)\n\nif all(e &lt;= n/4 for e in s.values()):\n    print(0)\n    sys.exit(0)\n\nresult = math.inf\nout = 0\nfor mnum in range(n):\n    s[s1[mnum]] -= 1\n    while all(e &lt;= n/4 for e in s.values()) and out &lt;= mnum:\n        result = min(result, mnum - out + 1)\n        s[s1[out]] += 1\n        out += 1\n\nprint(result)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 13387316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a909b2b442d0a83b569754d7dc6807c?s=128&d=identicon&r=PG", "display_name": "cxz", "link": "https://stackoverflow.com/users/13387316/cxz"}, "edited": false, "score": 1, "creation_date": 1594797041, "post_id": 59117844, "comment_id": 111248164, "body": "Nice logic, but can you help me elaborate on how this came to your mind? Or this algorthm is rather familiar, but I cannot think up of another example of it, can you point out the origin of the algorithm?"}, {"owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "reply_to_user": {"reputation": 101, "user_id": 13387316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a909b2b442d0a83b569754d7dc6807c?s=128&d=identicon&r=PG", "display_name": "cxz", "link": "https://stackoverflow.com/users/13387316/cxz"}, "edited": false, "score": 0, "creation_date": 1594921917, "post_id": 59117844, "comment_id": 111304024, "body": "@cxz maybe there&#39;s an existing algorithm, but I&#39;m not aware of it. How did I come to this? Each substring candidate must have enough redundant characters to be replaced with. So, we don&#39;t have to check all the possible substrings, but only those having enough redundant characters, and this is achievable in <code>O(n)</code>"}], "tags": [], "owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "is_accepted": false, "score": 5, "last_activity_date": 1575149522, "last_edit_date": 1575149522, "creation_date": 1575129600, "answer_id": 59117844, "question_id": 37579917, "link": "https://stackoverflow.com/questions/37579917/find-the-shortest-substring-whose-replacement-makes-the-string-contain-equal-num/59117844#59117844", "title": "Find the shortest substring whose replacement makes the string contain equal number of each character", "body": "<p>The minimal substring can be found in <code>O(N)</code> time and <code>O(N)</code> space.</p>\n\n<p>First count a frequency <code>fr[i]</code> of each character from the input of length <code>n</code>.\nNow, the most important thing to realise is that the necessary and sufficient condition for a substring to be considered minimal, it must contain each excessive character with a frequency of at least <code>fr[i] - n/4</code>. Otherwise, it won't be possible to replace the missing characters. So, our task is to go through each such substring and pick the one with the minimal length.</p>\n\n<p>But how to find all of them efficiently?</p>\n\n<p>At start, <code>minLength</code> is <code>n</code>. We introduce <code>2</code> pointer indices - <code>left</code> and <code>right</code> (initially <code>0</code>) that define a substring from <code>left</code> to <code>right</code> in the original string <code>str</code>. Then, we increment <code>right</code> until the frequency of each excessive character in <code>str[left:right]</code> is at least <code>fr[i] - n/4</code>. But it's not all yet since <code>str[left : right]</code> may contain unnecessary chars to the left (for example, they're not excessive and so can be removed). So, we increment <code>left</code> as long as <code>str[left : right]</code> still contains enough excessive elements. When we're finished we update <code>minLength</code> if it's larger than <code>right - left</code>. We repeat the procedure until <code>right &gt;= n</code>.</p>\n\n<p>Let's consider an example. Let <code>GAAAAAAA</code> be the input string. Then, the algorithm steps are as below:</p>\n\n<p>1.Count frequencies of each character:</p>\n\n<pre><code>['G'] = 1, ['A'] = 6, ['T'] = 0, ['C'] = 0 ('A' is excessive here)\n</code></pre>\n\n<p>2.Now iterate through the original string:</p>\n\n<pre><code>Step#1: |G|AAAAAAA\n    substr = 'G' - no excessive chars (left = 0, right = 0) \nStep#2: |GA|AAAAAA\n    substr = 'GA' - 1 excessive char, we need 5 (left = 0, right = 1)\nStep#3: |GAA|AAAAA\n    substr = 'GAA' - 2 excessive chars, we need 5 (left = 0, right = 2)\nStep#4: |GAAA|AAAA\n    substr = 'GAAA' - 3 excessive chars, we need 5 (left = 0, right = 3)\nStep#5: |GAAAA|AAA\n    substr = 'GAAAA' - 4 excessive chars, we need 5 (left = 0, right = 4)\nStep#6: |GAAAAA|AA\n    substr = 'GAAAAA' - 5 excessive chars, nice but can we remove something from left? 'G' is not excessive anyways. (left = 0, right = 5)\nStep#7: G|AAAAA|AA\n    substr = 'AAAAA' - 5 excessive chars, wow, it's smaller now. minLength = 5 (left = 1, right = 5)   \nStep#8: G|AAAAAA|A\n    substr = 'AAAAAA' - 6 excessive chars, nice, but can we reduce the substr? There's a redundant 'A'(left = 1, right = 6)\nStep#9: GA|AAAAA|A\n    substr = 'AAAAA' - 5 excessive chars, nice, minLen = 5 (left = 2, right = 6)\nStep#10: GA|AAAAAA|\n    substr = 'AAAAAA' - 6 excessive chars, nice, but can we reduce the substr? There's a redundant 'A'(left = 2, right = 7)\nStep#11: GAA|AAAAA|\n    substr = 'AAAAA' - 5 excessive chars, nice, minLen = 5 (left = 3, right = 7)\nStep#12: That's it as right &gt;= 8\n</code></pre>\n\n<p>Or the full code below:</p>\n\n<pre><code>from collections import Counter\n\nn = int(input())\ngene = raw_input()\nchar_counts = Counter()\nfor i in range(n):\n    char_counts[gene[i]] += 1\n\nn_by_4 = n / 4\nmin_length = n\nleft = 0\nright = 0\n\nsubstring_counts = Counter()\nwhile right &lt; n:\n    substring_counts[gene[right]] += 1\n    right += 1\n\n    has_enough_excessive_chars = True\n    for ch in \"ACTG\":\n        diff = char_counts[ch] - n_by_4\n        # the char cannot be used to replace other items\n        if (diff &gt; 0) and (substring_counts[ch] &lt; diff):\n            has_enough_excessive_chars = False\n            break\n\n    if has_enough_excessive_chars:\n        while left &lt; right and substring_counts[gene[left]] &gt; (char_counts[gene[left]] - n_by_4):\n            substring_counts[gene[left]] -= 1\n            left += 1\n\n        min_length = min(min_length, right - left)\n\nprint (min_length)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6392465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/006355319bf0f4029fa1fbce65c46927?s=128&d=identicon&r=PG", "display_name": "Kara", "link": "https://stackoverflow.com/users/6392465/kara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1832, "favorite_count": 0, "accepted_answer_id": 37581013, "answer_count": 2, "score": 2, "last_activity_date": 1618949349, "creation_date": 1464820636, "last_edit_date": 1618949349, "question_id": 37579917, "link": "https://stackoverflow.com/questions/37579917/find-the-shortest-substring-whose-replacement-makes-the-string-contain-equal-num", "title": "Find the shortest substring whose replacement makes the string contain equal number of each character", "body": "<p>I have a string of length <code>n</code> composed of letters <code>A</code>,<code>G</code>,<code>C</code> and <code>T</code>. The string is steady if it contains equal number of <code>A</code>,<code>G</code>,<code>C</code> and <code>T</code>(each <code>n/4</code> times). I need to find the minimum length of the substring that when replaced makes it steady. Here's a <a href=\"https://www.hackerrank.com/challenges/bear-and-steady-gene\" rel=\"nofollow noreferrer\">link</a> to the full description of the problem.</p>\n\n<p>Suppose <code>s1=AAGAAGAA</code>. </p>\n\n<p>Now since <code>n=8</code> ideally it should have 2 <code>A</code>s, 2 <code>T</code>s, 2 <code>G</code>s and 2 <code>C</code>s. It has 4 excessive <code>A</code>s. Hence we need a substring which contains at least 4 <code>A</code>s.</p>\n\n<p>I start by taking a 4 character substring from left and if not found then I increment a variable <code>mnum</code>(ie look for 5 variable substrings and so on).</p>\n\n<p>We get <code>AAGAA</code> as an answer. <strong>But it's too slow.</strong></p>\n\n<pre><code> from collections import Counter\n import sys\n n=int(input())       #length of string\n s1=input()\n s=Counter(s1)\n le=int(n/4)          #ideal length of each element\n comp={'A':le,'G':le,'C':le,'T':le}    #dictionary containing equal number of all elements\n s.subtract(comp)     #Finding by how much each element ('A','G'...) is in excess or loss\n a=[]\n b=[]\n for x in s.values():   #storing frequency(s.values--[4,2]) of elements which are in excess\n    if(x&gt;0):\n      a.append(x)\n for x in s.keys():         #storing corresponding elements(s.keys--['A','G'])\n    if(s[x]&gt;0):\n       b.append(x)\n mnum=sum(a)            #minimum substring length to start with\n if(mnum==0):\n   print(0)\n   sys.exit\n flag=0\n while(mnum&lt;=n):  #(when length 4 substring with all the A's and G's is not found increasing to 5 and so on)\n    for i in range(n-mnum+1):     #Finding substrings with length mnum in s1\n       for j in range(len(a)):    #Checking if all of excess elements are present\n           if(s1[i:i+mnum].count(b[j])==a[j]):\n              flag=1\n           else:\n              flag=0\n\n       if(flag==1):\n          print(mnum)\n          sys.exit()\n    mnum+=1\n</code></pre>\n"}, {"tags": ["python", "django", "youtube", "oauth-2.0"], "comments": [{"owner": {"reputation": 2945, "user_id": 3091263, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/dec60715d31d3391b366b3ac2ecbd5b8?s=128&d=identicon&r=PG&f=1", "display_name": "ger.s.brett", "link": "https://stackoverflow.com/users/3091263/ger-s-brett"}, "edited": false, "score": 1, "creation_date": 1464850287, "post_id": 37579877, "comment_id": 62655107, "body": "I think you are not calling the django manage.py script but something else. You should check your path settings."}, {"owner": {"reputation": 3204, "user_id": 4992248, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/73b487b53259bc9cfbfcfb33d718bfa5?s=128&d=identicon&r=PG&f=1", "display_name": "TitanFighter", "link": "https://stackoverflow.com/users/4992248/titanfighter"}, "reply_to_user": {"reputation": 2945, "user_id": 3091263, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/dec60715d31d3391b366b3ac2ecbd5b8?s=128&d=identicon&r=PG&f=1", "display_name": "ger.s.brett", "link": "https://stackoverflow.com/users/3091263/ger-s-brett"}, "edited": false, "score": 0, "creation_date": 1464864234, "post_id": 37579877, "comment_id": 62664151, "body": "@ger.s.brett I activate <code>virtualenv</code> (source /my/path/bin/activate), then <code>cd</code> to the folder with <code>manage.py</code>, then start <code>python manage.py shell</code> (I do it multiply times every day and the rest functions\\classes work ok in this project :), then execute the <code>youtube search</code> function from the link above and I see the error above. Do I do anything wrong?"}], "answers": [{"tags": [], "owner": {"reputation": 3204, "user_id": 4992248, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/73b487b53259bc9cfbfcfb33d718bfa5?s=128&d=identicon&r=PG&f=1", "display_name": "TitanFighter", "link": "https://stackoverflow.com/users/4992248/titanfighter"}, "is_accepted": true, "score": 1, "last_activity_date": 1464871540, "creation_date": 1464871540, "answer_id": 37592283, "question_id": 37579877, "link": "https://stackoverflow.com/questions/37579877/youtube-search-in-django-manage-py-error-unrecognized-arguments-shell/37592283#37592283", "title": "Youtube search in Django -&gt; manage.py: error: unrecognized arguments: shell", "body": "<p>As I don't need to pass any arguments from command line to the function, I simply removed this:</p>\n\n<pre><code>  argparser.add_argument(\"--q\", help=\"Search term\", default=\"Google\")\n  argparser.add_argument(\"--max-results\", help=\"Max results\", default=25)\n  args = argparser.parse_args()\n</code></pre>\n\n<p>and pass arguments I need directly to the function:</p>\n\n<pre><code>search_queue = 'Jingle Bells'\nmax_results = 5\nyoutube_search(search_queue, max_results) \n</code></pre>\n\n<p>and make changes here:</p>\n\n<pre><code>def youtube_search(q, max_results):  # old version: def youtube_search(options):\n  youtube = build(YOUTUBE_API_SERVICE_NAME, YOUTUBE_API_VERSION,\n    developerKey=DEVELOPER_KEY)\n\n  # Call the search.list method to retrieve results matching the specified\n  # query term.\n  search_response = youtube.search().list(\n    q=q,  # old version: q=options.q,\n    part=\"id,snippet\",\n    maxResults=max_results # old version: maxResults=options.max_results\n  ).execute()\n</code></pre>\n"}], "owner": {"reputation": 3204, "user_id": 4992248, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/73b487b53259bc9cfbfcfb33d718bfa5?s=128&d=identicon&r=PG&f=1", "display_name": "TitanFighter", "link": "https://stackoverflow.com/users/4992248/titanfighter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 0, "accepted_answer_id": 37592283, "answer_count": 1, "score": 1, "last_activity_date": 1464871540, "creation_date": 1464820437, "last_edit_date": 1464865232, "question_id": 37579877, "link": "https://stackoverflow.com/questions/37579877/youtube-search-in-django-manage-py-error-unrecognized-arguments-shell", "title": "Youtube search in Django -&gt; manage.py: error: unrecognized arguments: shell", "body": "<p><a href=\"https://developers.google.com/youtube/v3/code_samples/python#search_by_keyword\" rel=\"nofollow\">Youtube Code</a></p>\n\n<p>If I use this code in IDLE - everything is ok, but when I use in Django project, i.e. run via <code>python manage.py shell</code> I see the next:</p>\n\n<pre><code>usage: manage.py [--auth_host_name AUTH_HOST_NAME] [--noauth_local_webserver]\n                 [--auth_host_port [AUTH_HOST_PORT [AUTH_HOST_PORT ...]]]\n                 [--logging_level {DEBUG,INFO,WARNING,ERROR,CRITICAL}]\n                 [--max-results MAX_RESULTS]\nmanage.py: error: unrecognized arguments: shell\n</code></pre>\n\n<p>I found that error occurs at line: <code>args = argparser.parse_args()</code>, but can not find how to fix that. Can anyone help?</p>\n\n<p><strong>Edit:</strong>\nOnce I launched shell, I call youtube_search(), but when interpreter executes line <code>args = argparser.parse_args()</code>, shell closes and I see the message above.</p>\n"}, {"tags": ["python", "python-2.7", "ipython"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464823245, "post_id": 37579873, "comment_id": 62647483, "body": "Does IPython work? If so, don&#39;t worry about it."}, {"owner": {"reputation": 83, "user_id": 5802780, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/la9gy.jpg?s=128&g=1", "display_name": "Dany4k", "link": "https://stackoverflow.com/users/5802780/dany4k"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464887886, "post_id": 37579873, "comment_id": 62681520, "body": "@MattDMo the problem is that it doesn&#39;t work :c"}, {"owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "edited": false, "score": 0, "creation_date": 1500574024, "post_id": 37579873, "comment_id": 77410518, "body": "Receiving the exact same error message when trying to install sphinx-js."}], "owner": {"reputation": 83, "user_id": 5802780, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/la9gy.jpg?s=128&g=1", "display_name": "Dany4k", "link": "https://stackoverflow.com/users/5802780/dany4k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1464820411, "creation_date": 1464820411, "question_id": 37579873, "link": "https://stackoverflow.com/questions/37579873/installing-ipython-command-line", "title": "Installing Ipython - command Line", "body": "<p>Im currently installing Ipython for a school project. Im doing it through windows command line using the command \"pip install ipython\" and I always get this error in the end: </p>\n\n<p>WindowsError: [Error 32] The process cannot access the file because it is being used by another process: 'c:\\users\\daniel\\appdata\\local\\temp\\pip-ni1wof-record\\install-record.txt'</p>\n\n<p>I already reinstalled Python 2.7 but didn't change a thing. I also restarted the computer.\nAny idea what I'm doing wrong?</p>\n"}, {"tags": ["python", "pandas", "bioinformatics"], "comments": [{"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1464828357, "post_id": 37579803, "comment_id": 62648792, "body": "Is there any guarantee that there will be one-to-one parity between matching References with different SampleType? In other words, if we have 1,000 rows with the (HG19      Tumor) values, will there also be 1,000 rows with ( HG19      Normal)?"}, {"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1464828383, "post_id": 37579803, "comment_id": 62648801, "body": "And what about the ID field? Should each row in your example output df have matching IDs?"}, {"owner": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "reply_to_user": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1464828612, "post_id": 37579803, "comment_id": 62648854, "body": "No to both questions. For example in the example I&#39;ve used here, row 1 has no normal match. Also row 8 has an ID which is unique (no other row with that ID)."}, {"owner": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "reply_to_user": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1464828961, "post_id": 37579803, "comment_id": 62648920, "body": "I think the answer to first part of the question is to use: <code>df.groupby([&#39;ID&#39;,&#39;Reference&#39;]).filter(lambda x:set(x.SampleType)=={&#39;Tumor&#39;,&#39;Normal&#39;})</code> But I don&#39;t know how to do the second part."}, {"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1465422292, "post_id": 37579803, "comment_id": 62900515, "body": "Did either of the answers here provide a solution for you? If so, you should accept it so that it is no longer listed as being open."}], "answers": [{"tags": [], "owner": {"reputation": 3277, "user_id": 5019586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/60b763a46dbd40938a6031a75cfe7d29?s=128&d=identicon&r=PG&f=1", "display_name": "ysearka", "link": "https://stackoverflow.com/users/5019586/ysearka"}, "is_accepted": false, "score": 1, "last_activity_date": 1464860294, "last_edit_date": 1464860294, "creation_date": 1464856898, "answer_id": 37586777, "question_id": 37579803, "link": "https://stackoverflow.com/questions/37579803/pandas-dataframe-grouping-by-multiple-columns-and-dropping-duplicate-rows/37586777#37586777", "title": "Pandas dataframe grouping by multiple columns and dropping duplicate rows", "body": "<p>In order to create your new dataframes you can use pandas conditionnal slicing: (in your question you made a mistake on the dataframe <code>NORMAL</code> on the line with index 5, the <code>SampleType</code> should be <code>Normal</code> not <code>Tumor</code>)</p>\n\n<pre><code>NORMAL = df[df['SampleType']=='Normal'].copy()\nTUMOR = df[df['SampleType']=='Tumor'].copy()\n</code></pre>\n\n<p>or if you have a chance to have anything else than <code>'normal'</code> and <code>'tumor'</code> and you wan't to get everything but <code>'normal'</code>:</p>\n\n<pre><code>NORMAL = df[df['SampleType']=='Normal']\nTUMOR = df[~df['SampleType']=='Normal']\n</code></pre>\n\n<p>Then in order to drop the duplicates and keep the specific values, you can create another column which keeps the same information but made out of integers (easier to sort than strings lists):</p>\n\n<pre><code>NORMAL['Whatever'] = 0\nTUMOR['Whatever'] = 0\n</code></pre>\n\n<p>Of course you can do this before splitting your dataframe df (then you only do it on one dataframe instead of two). Complete this column:</p>\n\n<pre><code>NORMAL.ix[NORMAL['Reference'] == 'HG19','Whatever'] = 1\nTUMOR.ix[TUMOR['Reference'] == 'HG19','Whatever'] = 1\nNORMAL.ix[NORMAL['Reference'] == 'HG18','Whatever'] = 2\nTUMOR.ix[TUMOR['Reference'] == 'HG18','Whatever'] = 2\n</code></pre>\n\n<p>Then sort by this new column, and drop the duplicates, keeping only the first row:</p>\n\n<pre><code>NORMAL.sort_values(by = 'Whatever', inplace = True)\nNORMAL.drop_duplicates(subset = 'ID',inplace = True)\nTUMOR.sort_values(by = 'Whatever', inplace = True)\nTUMOR.drop_duplicates(subset = 'ID',inplace = True)\n</code></pre>\n\n<p>And in order to get the expected output, delete the temporary column, and resort by index:</p>\n\n<pre><code>NORMAL.drop('Whatever',1,inplace = True)\nNORMAL.sort_index(inplace = True)\nTUMOR.drop('Whatever',1,inplace = True)\nTUMOR.sort_index(inplace = True)\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>Out[3]: NORMAL\n    ID              Reference   SampleType\n3   TCGA-AB-0001    GRCh37      Normal\n6   TCGA-AB-0002    GRCh37      Normal\n\n\nOut[32]: TUMOR\n    ID              Reference   SampleType\n0   TCGA-AB-0001    HG19        Tumor\n8   TCGA-AB-0003    GRCh37      Tumor\n9   TCGA-AB-0002    GRCh37      Tumor\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "edited": false, "score": 0, "creation_date": 1466021518, "post_id": 37602550, "comment_id": 63150134, "body": "Sorry, I lost track of things. Thanks this is what I was looking for."}, {"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "reply_to_user": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "edited": false, "score": 0, "creation_date": 1466035099, "post_id": 37602550, "comment_id": 63155242, "body": "Thx for checking back in. This was an interesting one. I see a lot of questions like this that generally follow the pattern of taking a tall dataframe and making it wider by joining rows on some criteria. I feel like there is (or at least should be) a more generalizable and elegant way of doing this."}, {"owner": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "edited": false, "score": 0, "creation_date": 1466112945, "post_id": 37602550, "comment_id": 63196288, "body": "Yes, I was also hoping that maybe there would a one or two-liner using groupby/filter/pivot/etc. Ideally I would like to do this on dataframes with many columns, instead of three in which case the index can also be included as an extra column. But your solution does the job, and I&#39;m not sure there&#39;s a more compact way to do it. So thanks for that."}], "tags": [], "owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "is_accepted": true, "score": 2, "last_activity_date": 1464903474, "creation_date": 1464903474, "answer_id": 37602550, "question_id": 37579803, "link": "https://stackoverflow.com/questions/37579803/pandas-dataframe-grouping-by-multiple-columns-and-dropping-duplicate-rows/37602550#37602550", "title": "Pandas dataframe grouping by multiple columns and dropping duplicate rows", "body": "<p>It is still not 100% clear to me what the desired output is. But this seems to do the trick based on my understanding.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\n\ndf = pd.DataFrame({'ID':['TCGA-AB-0001','TCGA-AB-0001','TCGA-AB-0001','TCGA-AB-0001','TCGA-AB-0002','TCGA-AB-0002','TCGA-AB-0002','TCGA-AB-0002','TCGA-AB-0003','TCGA-AB-0002', 'TCGA-AB-0001', 'TCGA-AB-0001'],\n              'Reference':['HG19','HG18','HG19','GRCh37','HG18','HG19','GRCh37','HG19','GRCh37','GRCh37', 'GRCh37', 'GRCh37'],\n             'SampleType':['Tumor','Tumor','Normal','Normal','Tumor','Normal','Normal','Tumor','Tumor','Tumor', 'Normal', 'Tumor']\n               })\n</code></pre>\n\n<p>This is slightly longer than the original example and tests having redundant candidate rows.</p>\n\n<pre><code>              ID Reference SampleType\n0   TCGA-AB-0001      HG19      Tumor\n1   TCGA-AB-0001      HG18      Tumor\n2   TCGA-AB-0001      HG19     Normal\n3   TCGA-AB-0001    GRCh37     Normal\n4   TCGA-AB-0002      HG18      Tumor\n5   TCGA-AB-0002      HG19     Normal\n6   TCGA-AB-0002    GRCh37     Normal\n7   TCGA-AB-0002      HG19      Tumor\n8   TCGA-AB-0003    GRCh37      Tumor\n9   TCGA-AB-0002    GRCh37      Tumor\n10  TCGA-AB-0001    GRCh37     Normal\n11  TCGA-AB-0001    GRCh37      Tumor\n</code></pre>\n\n<p>Now we create a temp df that may have \"redundant\" rows.</p>\n\n<pre><code>##\n# Create the df with sort and first level filtering\n##\ndf_2 = df.groupby(['ID','Reference']).filter(lambda x:set(x.SampleType)=={'Tumor','Normal'}).drop_duplicates(['ID', 'Reference', 'SampleType']).sort(['ID','Reference', 'SampleType'])\n# By dropping dups and sorting, the SampleType column must alternate: Normal, Tumor, Normal...\n\n# Break into two pieces for horizontal concat\nleft = df_2.iloc[np.arange(0,df_2.shape[0], 2)]\nright = df_2.iloc[np.arange(1, df_2.shape[0], 2)]\n\n# Reindex by ID so that pd.concat can properly match rows\nleft['old_index'] = left.index.values\nleft.index = left['ID']\nright['old_index'] = right.index.values\nright.index = right['ID']\nright.columns = [c + '_2' for c in right.columns]  # Rename right side columns so we can groupby(['ID'])\n\n# Horizontal concat\ntemp = pd.concat([left, right], axis=1)  # with possible duplicates for each unique (ID, Reference) tuple\ntemp.index = np.arange(temp.shape[0])  \ntemp\n\n             ID Reference SampleType  old_index          ID_2 Reference_2  \\\n0  TCGA-AB-0001    GRCh37     Normal          3  TCGA-AB-0001      GRCh37\n1  TCGA-AB-0001      HG19     Normal          2  TCGA-AB-0001        HG19\n2  TCGA-AB-0002    GRCh37     Normal          6  TCGA-AB-0002      GRCh37\n3  TCGA-AB-0002      HG19     Normal          5  TCGA-AB-0002        HG19\n\n  SampleType_2  old_index_2\n0        Tumor           11\n1        Tumor            0\n2        Tumor            9\n3        Tumor            7\n</code></pre>\n\n<p>If I understand correctly, we only want to keep one row for each ID, choosing them in order of <code>priority = ['GRCh37', 'HG19', 'HG18']</code></p>\n\n<pre><code>##\n# Second level of filtering using priority list\n##\npriority = ['GRCh37', 'HG19', 'HG18']\ng = temp.groupby(['ID'])\n\ndef filter_2(grp, priority = ['GRCh37', 'HG19', 'HG18']):\n    pos = np.argsort(grp['Reference'], priority).iloc[0]\n    idx = grp.index[pos]\n    return grp.loc[idx, :]\n\nfinal = temp.groupby(['ID']).apply(filter_2)\nfinal.index = np.arange(final.shape[0])\n</code></pre>\n\n<p>Which yields my understanding of the final desired output. NOTE: this is different than the original example since I expanded in the input df.</p>\n\n<pre><code>final\n\n             ID Reference SampleType  old_index          ID_2 Reference_2  \\\n0  TCGA-AB-0001    GRCh37     Normal          3  TCGA-AB-0001      GRCh37\n1  TCGA-AB-0002    GRCh37     Normal          6  TCGA-AB-0002      GRCh37\n\n  SampleType_2  old_index_2\n0        Tumor           11\n1        Tumor            9\n</code></pre>\n"}], "owner": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1168, "favorite_count": 2, "accepted_answer_id": 37602550, "answer_count": 2, "score": 1, "last_activity_date": 1464903474, "creation_date": 1464820071, "question_id": 37579803, "link": "https://stackoverflow.com/questions/37579803/pandas-dataframe-grouping-by-multiple-columns-and-dropping-duplicate-rows", "title": "Pandas dataframe grouping by multiple columns and dropping duplicate rows", "body": "<p>I am trying to do a task (in bioinformatics, TCGA data) using a dataframe of the following form:</p>\n\n<pre><code>df = pd.DataFrame({'ID':['TCGA-AB-0001','TCGA-AB-0001','TCGA-AB-0001','TCGA-AB-0001','TCGA-AB-0002','TCGA-AB-0002','TCGA-AB-0002','TCGA-AB-0002','TCGA-AB-0003','TCGA-AB-0002'],\n              'Reference':['HG19','HG18','HG19','GRCh37','HG18','HG19','GRCh37','HG19','GRCh37','GRCh37'],\n             'SampleType':['Tumor','Tumor','Normal','Normal','Tumor','Normal','Normal','Tumor','Tumor','Tumor']\n               })\n</code></pre>\n\n<p>which looks like:</p>\n\n<pre><code>             ID Reference SampleType\n0  TCGA-AB-0001      HG19      Tumor\n1  TCGA-AB-0001      HG18      Tumor\n2  TCGA-AB-0001      HG19     Normal\n3  TCGA-AB-0001    GRCh37     Normal\n4  TCGA-AB-0002      HG18      Tumor\n5  TCGA-AB-0002      HG19     Normal\n6  TCGA-AB-0002    GRCh37     Normal\n7  TCGA-AB-0002      HG19      Tumor\n8  TCGA-AB-0003    GRCh37      Tumor\n9  TCGA-AB-0002    GRCh37      Tumor\n</code></pre>\n\n<p>I am trying to match pairs of rows if they have the same 'Reference' and different 'SampleType'. The result will be a new dataframe of the following form:</p>\n\n<pre><code>             TUMOR                                     NORMAL\nindex        ID Reference SampleType      index        ID Reference SampleType\n0  TCGA-AB-0001      HG19      Tumor      2  TCGA-AB-0001      HG19     Normal\n7  TCGA-AB-0002      HG19      Tumor      5  TCGA-AB-0002      HG19      Tumor\n9  TCGA-AB-0002    GRCh37      Tumor      6  TCGA-AB-0002    GRCh37     Normal\n</code></pre>\n\n<p>Now I would like to drop duplicate IDs but to do so the priority is according to the list [GRCh37, HG19, HG18]. So if for example both HG19 and HG18 exist with the same ID, I will keep HG19. The result should look like the following:</p>\n\n<pre><code>             TUMOR                                     NORMAL\nindex        ID Reference SampleType      index        ID Reference SampleType\n0  TCGA-AB-0001      HG19      Tumor      2  TCGA-AB-0001      HG19     Normal\n9  TCGA-AB-0002    GRCh37      Tumor      6  TCGA-AB-0002    GRCh37     Normal\n</code></pre>\n\n<p>is there a way to do this by groupby or some other pandas function?</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["python", "datetime", "strptime"], "comments": [{"owner": {"reputation": 1197, "user_id": 4315942, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13fac34ec442ab52ae6829df8ed91d76?s=128&d=identicon&r=PG&f=1", "display_name": "Bakri Bitar", "link": "https://stackoverflow.com/users/4315942/bakri-bitar"}, "edited": false, "score": 0, "creation_date": 1464820243, "post_id": 37579802, "comment_id": 62646535, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3743222/how-do-i-convert-datetime-to-date-in-python\">How do I convert datetime to date (in Python)?</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1464820249, "post_id": 37579802, "comment_id": 62646538, "body": "<i>&quot;I&#39;ve tried everything&quot;</i> - where <i>is</i> what you&#39;ve tried, then? Broadly, either: 1. extract just the date part then parse it; or 2. parse the whole thing then call <code>.date()</code> to discard the time."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1197, "user_id": 4315942, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13fac34ec442ab52ae6829df8ed91d76?s=128&d=identicon&r=PG&f=1", "display_name": "Bakri Bitar", "link": "https://stackoverflow.com/users/4315942/bakri-bitar"}, "edited": false, "score": 0, "creation_date": 1464821933, "post_id": 37579802, "comment_id": 62647126, "body": "@BakriBitar The answers there just say to use <code>.date()</code>, which he&#39;s already doing. His problem is with the parsing."}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464822384, "post_id": 37579802, "comment_id": 62647253, "body": "thank you so much!"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464824512, "post_id": 37580133, "comment_id": 62647853, "body": "<code>pedido_data = datetime.datetime.strptime(pedido_data, &#39;%Y-%m-%d %H:%M:%S&#39;).date() TypeError: must be string, not datetime.datetime</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464824721, "post_id": 37580133, "comment_id": 62647896, "body": "What is the value of <code>pedido_data</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464824759, "post_id": 37580133, "comment_id": 62647913, "body": "It should be a string like <code>&#39;2016-06-01 16:05:20&#39;</code>, but that error indicates that it&#39;s already a <code>datetime</code>."}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464825000, "post_id": 37580133, "comment_id": 62647971, "body": "It is already a date time stored in mysql, but I need to remove the second"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464825071, "post_id": 37580133, "comment_id": 62647996, "body": "You want to remove the second, but leave the hours and minutes?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464825120, "post_id": 37580133, "comment_id": 62648009, "body": "The error message indicates that you already parsed it. If so, you should just use <code>pedido_data.date()</code>."}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464825958, "post_id": 37580133, "comment_id": 62648239, "body": "<code>AttributeError: &#39;NoneType&#39; object has no attribute &#39;date&#39;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464826007, "post_id": 37580133, "comment_id": 62648256, "body": "That means <code>pedido_data</code> contains <code>None</code>, not a datetime."}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464826025, "post_id": 37580133, "comment_id": 62648262, "body": "<code>pedidos = con.cursor.fetchall() for pedido in pedidos: pedido_data = pedido[4]</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464826065, "post_id": 37580133, "comment_id": 62648271, "body": "I guess that row of the database table contains <code>NULL</code> in this column."}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464826096, "post_id": 37580133, "comment_id": 62648284, "body": "<code>print pedido_data</code> response <code>2016-06-01 16:05:20</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "edited": false, "score": 0, "creation_date": 1464826182, "post_id": 37580133, "comment_id": 62648311, "body": "Either edit your question or post a new question. I can&#39;t answer you like this."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1464822004, "creation_date": 1464822004, "answer_id": 37580133, "question_id": 37579802, "link": "https://stackoverflow.com/questions/37579802/i-need-to-convert-datetime-to-date-without-seconds-in-python/37580133#37580133", "title": "I need to convert datetime to date without seconds in python", "body": "<p>Even though you're going to discard the time, you still need to include it in your format string, since it exists in the string you're parsing. <code>strptime()</code> doesn't know that you don't care about the time, it just needs to match the input against the format string.</p>\n\n<pre><code>dt = datetime.strptime('2016-06-01 16:05:20', '%Y-%m-%d %H:%M:%S').date()\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3662, "favorite_count": 1, "accepted_answer_id": 37580133, "answer_count": 1, "score": 0, "last_activity_date": 1464822004, "creation_date": 1464820063, "question_id": 37579802, "link": "https://stackoverflow.com/questions/37579802/i-need-to-convert-datetime-to-date-without-seconds-in-python", "title": "I need to convert datetime to date without seconds in python", "body": "<p>I need to convert datetime to date without seconds in python, how to execute this:</p>\n\n<pre><code>from datetime import datetime\ndt = datetime.strptime('2016-06-01 16:05:20', '%Y-%m-%d').date()\nprint dt\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"teste.py\", line 5, in &lt;module&gt;\n    dt = datetime.strptime('2016-06-01 16:05:20', '%Y-%m-%d').date()\n  File \"/usr/lib/python2.7/_strptime.py\", line 328, in _strptime\n    data_string[found.end():])\nValueError: unconverted data remains:  16:05:20\n</code></pre>\n\n<p>I've tried everything<br>\nCan help?</p>\n"}, {"tags": ["python", "ubuntu", "virtualenv", "ckan"], "comments": [{"owner": {"reputation": 4362, "user_id": 235993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5469f74c7012246bc8aac93b13daefa8?s=128&d=identicon&r=PG", "display_name": "amercader", "link": "https://stackoverflow.com/users/235993/amercader"}, "edited": false, "score": 1, "creation_date": 1464946144, "post_id": 37579783, "comment_id": 62704762, "body": "This is a really old version of the docs! Follow the latest version and it will save you a lot of trouble: <a href=\"http://docs.ckan.org/en/latest/extensions/index.html\" rel=\"nofollow noreferrer\">docs.ckan.org/en/latest/extensions/index.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6411894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5GfQ.png?s=128&g=1", "display_name": "Sean Yee", "link": "https://stackoverflow.com/users/6411894/sean-yee"}, "edited": false, "score": 0, "creation_date": 1464822642, "post_id": 37579901, "comment_id": 62647321, "body": "Thank you for the prompt response! I&#39;m getting the following error for your first suggestion:      Cannot find command &#39;git&#39;     Storing debug log for failure in /home/yee_s/.pip/pip.log  For the second suggestion, I get:      Cannot find command &#39;git&#39;     Storing debug log for failure in /home/yee_s/.pip/pip.log"}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "reply_to_user": {"reputation": 13, "user_id": 6411894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5GfQ.png?s=128&g=1", "display_name": "Sean Yee", "link": "https://stackoverflow.com/users/6411894/sean-yee"}, "edited": false, "score": 0, "creation_date": 1464822774, "post_id": 37579901, "comment_id": 62647361, "body": "You&#39;ll need to install git:  <code>sudo apt-get install git</code>"}], "tags": [], "owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "is_accepted": true, "score": 0, "last_activity_date": 1464820552, "creation_date": 1464820552, "answer_id": 37579901, "question_id": 37579783, "link": "https://stackoverflow.com/questions/37579783/issues-setting-up-ckan-virtual-environment/37579901#37579901", "title": "Issues setting up CKAN virtual environment", "body": "<p>If you go to that URL in your browser, you will see it has a pointer to github now:</p>\n\n<blockquote>\n  <p>This repository has been deleted\n  Our apologies, but the repository \"ckan\" has been deleted.\n  It now lives at <a href=\"https://github.com/okfn/ckan\" rel=\"nofollow\">https://github.com/okfn/ckan</a>.</p>\n</blockquote>\n\n<p>So, instead you do:</p>\n\n<pre><code> pip install -e 'git+git://github.com/ckan/ckan#egg=Package'\n</code></pre>\n\n<p>or</p>\n\n<pre><code> pip install -e 'git+https://github.com/ckan/ckan#egg=Package'\n</code></pre>\n\n<p>I quoted the URL as a good practice (because # is comment character in the shell), but in this context it isn't interpreted that way, so it isn't strictly necessary.</p>\n"}], "owner": {"reputation": 13, "user_id": 6411894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d5GfQ.png?s=128&g=1", "display_name": "Sean Yee", "link": "https://stackoverflow.com/users/6411894/sean-yee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 37579901, "answer_count": 1, "score": 1, "last_activity_date": 1464820552, "creation_date": 1464819965, "question_id": 37579783, "link": "https://stackoverflow.com/questions/37579783/issues-setting-up-ckan-virtual-environment", "title": "Issues setting up CKAN virtual environment", "body": "<p>I'm following the <a href=\"http://docs.ckan.org/en/ckan-1.4.3/prepare-extensions.html\" rel=\"nofollow\">Prepare to Use Extensions</a> document and I'm having issues installing CKAN into a virtual environment. </p>\n\n<pre><code>sudo apt-get install virtualenv python-pip mercurial\nvirtualenv /home/ubuntu/pyenv\n. /home/ubuntu/pyenv/bin/activate\n</code></pre>\n\n<p>At first this failed, but then I found that <i>virtualenv</i> should be <i>python-virtualenv</i>. </p>\n\n<p>Now I'm having issues with:</p>\n\n<pre><code>pip install -e hg+http://bitbucket.org/okfn/ckan#egg=ckan\n</code></pre>\n\n<p>I'm getting an error code 255, and when I visit the URL, it looks like the source has been deleted and moved to Github. I'm a beginner to Ubuntu, Python and CKAN so I'm not sure how to properly change this command to point to the new location.</p>\n\n<p>I tried to use the following, but it didn't work for me:</p>\n\n<pre><code>pip install -e hg+https://github.com/ckan/ckan#egg=ckan\n</code></pre>\n\n<p>How should I continue to install CKAN in the virtual environment?</p>\n"}, {"tags": ["python", "scikit-learn", "cluster-analysis", "hierarchical-clustering"], "answers": [{"tags": [], "owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "is_accepted": true, "score": 0, "last_activity_date": 1464844336, "creation_date": 1464844336, "answer_id": 37583140, "question_id": 37579759, "link": "https://stackoverflow.com/questions/37579759/agglomerativeclustering-on-a-correlation-matrix/37583140#37583140", "title": "AgglomerativeClustering on a correlation matrix", "body": "<p>Hierarchical clustering supports different \"linkage\" strategies.</p>\n\n<ul>\n<li>single-link: this connects points on the minimum distance to the others in the cluster</li>\n<li>complete-link: this connects based on the maximum distance to the cluster</li>\n<li>...</li>\n</ul>\n\n<p>If you want a high minimum correlation = small maximum distance, this calls for complete linkage.</p>\n\n<p>You may want to treat negative correlations as \"good\", too.\ni.e. use <code>dist = 1 - abs(corr)</code>.</p>\n\n<p>Make sure to use ghe dendrogram. If you have outliers in your data, you want to cut into (n_clusters+n_outliers) partitions.</p>\n"}], "owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 0, "accepted_answer_id": 37583140, "answer_count": 1, "score": 0, "last_activity_date": 1464844336, "creation_date": 1464819813, "question_id": 37579759, "link": "https://stackoverflow.com/questions/37579759/agglomerativeclustering-on-a-correlation-matrix", "title": "AgglomerativeClustering on a correlation matrix", "body": "<p>I have a correlation matrix of typical structure that is of size 288x288 that is defined by:</p>\n\n<pre><code>from sklearn.cluster import AgglomerativeClustering\ndf = read_returns()\ncorrel_matrix = df.corr()\n</code></pre>\n\n<p>where read_returns gives me a dataframe with a date index, and columns of the returns of assets.</p>\n\n<p>Now - I want to cluster these correlations to reduce the population size.</p>\n\n<p>By doing some reading and experimenting I discovered AgglomerativeClustering - and it appears at first pass to be an appropriate solution to my problem.</p>\n\n<p>I define a distance metric as <code>((.5*(1-correl_matrix))**.5)</code> and have:</p>\n\n<pre><code>cluster = AgglomerativeClustering(n_clusters=40, linkage='average')\ncluster.fit(((.5*(1-correl_matrix))**.5).values)\nlabel_groups = cluster.labels_\n</code></pre>\n\n<p>To observe some of the data and cross check my work I pick out cluster <code>1</code> and observe the pairwise correlations and find the min correlation between two items with that group in my dataset to find :</p>\n\n<pre><code>single_cluster = []\nfor i in range(0,correl_matrix.shape[0]):\n    if label_groups[i]==1:\n        single_cluster.append(correl_matrix.index[i])\n\nmin_correl = 1.0\nfor x in single_cluster:\n    for y in single_cluster:\n        if x&lt;&gt;y:\n            if correl_matrix[x][y]&lt;min_correl:\n                min_correl = correl_matrix[x][y]\n\nprint min_correl\n</code></pre>\n\n<p>and get a min pairwise correlation of .20</p>\n\n<p>To me this seems quite low - but \"low based off what?\" is a fair question to which I have no answer.</p>\n\n<p>I would like to anticipate/enforce each pairwise correlation of a cluster to be >=.7 or something like this.</p>\n\n<p>Is this possible in AgglomerativeClustering?</p>\n\n<p>Am I accidentally going down the wrong path?</p>\n"}, {"tags": ["python", "html", "flask", "forms", "pygal"], "comments": [{"owner": {"reputation": 1163, "user_id": 3649456, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/879c62cc885a2b9a636d3088768c5c44?s=128&d=identicon&r=PG&f=1", "display_name": "hum3", "link": "https://stackoverflow.com/users/3649456/hum3"}, "edited": false, "score": 0, "creation_date": 1512383307, "post_id": 37579750, "comment_id": 82220193, "body": "I want to do the same.  Looks relatively straightforward from the documentation: <a href=\"http://pygal.org/en/stable/documentation/configuration/value.html#links\" rel=\"nofollow noreferrer\">pygal.org/en/stable/documentation/configuration/&hellip;</a>"}], "owner": {"reputation": 475, "user_id": 3246693, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d1c6dd31b70803228e7904322233ec00?s=128&d=identicon&r=PG&f=1", "display_name": "user3246693", "link": "https://stackoverflow.com/users/3246693/user3246693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 816, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1468504468, "creation_date": 1464819766, "question_id": 37579750, "link": "https://stackoverflow.com/questions/37579750/pygal-click-bar-and-post-data", "title": "Pygal - Click bar and post data?", "body": "<p>I am trying to create a simple charting web app using pygal and flask to chart some financial data I have stored in a mysql database.  The data in the DB is hierarchical, and I want the app to start at the top of the hierarchy and allow the user to drill down by simply clicking on the relevant parts of the chart.</p>\n\n<p>I am using flask to display the dynamically generated pygal charts.</p>\n\n<p>Sample DB data:</p>\n\n<pre><code>guid | name | value | parentGuid | Description\n------------------------------------------------\n1234 | cat1 | 1     | null       | Blah, blah\n4567 | cat2 | 55    | null       | asfdsa\n8901 | cat3 | 22    | 1234       | asfdsa\n5435 | cat4 | 3     | 8901       | afdsa\netc...\n</code></pre>\n\n<p>I have no problem drilling down the hierarchy using python + sql, but where I'm stumped is how I drill down using links in my pygal chart.</p>\n\n<pre><code>@app.route('/', methods=['GET', 'POST'])\ndef index(): \n    if request.method == 'POST':\n        chart = graph_sub(request.form['guid'])\n        return render_template('Graph3.html', chart=chart)\n    else:\n        chart = graph_main()\n        return render_template('Graph3.html', chart=chart)\n\n\ndef graph_main(): \n    \"\"\" render svg graph \"\"\"\n    line_chart = pygal.HorizontalBar()\n    line_chart.title = 'Root Accounts'\n    RootAccts = GetRootAccounts() # Returns a list of lists containing accounts and account data.\n    for Acct in RootAccts:  \n        line_chart.add({\n            'title': Acct[1], # Acct Name\n            'tooltip': Acct[4], # Acct description\n            'xlink': {'href': '/'} # Hyperlink that I want to pass POST data back to the form.\n        }, [{\n            'value': Acct[2]), # Acct Value\n            'label': Acct[4], # Acct Description\n            'xlink': {'href': '/'} # Hyperlink that I want to pass POST data back to the form.\n        }])\n    return line_chart.render()\n\ndef graph_sub(parentGuid):\n    ### This works fine if I pass a parent GUID to it\n    ### Now the question is how do I pass the guid to it from my pygal chart?\n    return line_chart.render()\n</code></pre>\n\n<p>So when I click on the links embedded in the pygal chart</p>\n\n<pre><code>'xlink': {'href': '/'}\n</code></pre>\n\n<p>How can I make it redirect back to the same page and pass the GUID of the selected account as POST data?  Or is there another way to do this that doesn't involve POST?</p>\n\n<p>The page reloading every time they click something so I'm hoping to keep this as simple as possible without having to involve ajax/java/etc... though if there are no other options I am open to it.</p>\n\n<p>I don't have it coded yet, but there will also be some additional form controls added to the page that will allow the user to set date ranges to control how much data is displayed.  I was planning to use POST to pass user input around, but before I get too far down that road, I need to figure out how I can manage this base functionality.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["python", "flask", "pagination", "sqlalchemy"], "comments": [{"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1464833633, "post_id": 37579722, "comment_id": 62649847, "body": "You are handling page 1 through a POST, but you&#39;re most likely handling page 2 through a GET. That&#39;s why <code>form.search_term.data</code> is None; there&#39;s no form from which to get the value."}, {"owner": {"reputation": 1236, "user_id": 4750577, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/35005349/picture?type=large", "display_name": "Anekdotin", "link": "https://stackoverflow.com/users/4750577/anekdotin"}, "reply_to_user": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1464837910, "post_id": 37579722, "comment_id": 62650760, "body": "Any idea how to fix it :/"}], "owner": {"reputation": 1236, "user_id": 4750577, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/35005349/picture?type=large", "display_name": "Anekdotin", "link": "https://stackoverflow.com/users/4750577/anekdotin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464819663, "creation_date": 1464819663, "question_id": 37579722, "link": "https://stackoverflow.com/questions/37579722/python-flask-pagination-passing-form-variable-into-query", "title": "Python flask pagination passing form variable into query", "body": "<p>I am trying to pass a form variable into pagination.  If I hardcode the search, then my pagination works.  My non-hardcoded query works for page 1, but on trying to go into further pages I get the error:</p>\n\n<pre><code>TypeError: cannot concatenate 'str' and 'NoneType' objects\n</code></pre>\n\n<p>I only posted the code I thought was relevant.</p>\n\n<pre><code>@search.route('/search', methods=['GET', 'POST'])\ndef search():\n    form = searchForm()\n    search_term = form.searchString.data\n\n    print search_term\n    search = False\n    q = request.args.get('q')\n    if q:\n        search = True\n\n    try:\n        page = int(request.args.get('page', 1))\n    except ValueError:\n        page = 1\n\n    PER_PAGE = 10\n    inner_window = 4\n    outer_window = 3\n    offset = page * 1\n\n\n    #doesnt work\n    links = Item.query.filter(Item.title.like('%' + search_term + '%')).paginate(page, 10, True)\n\n    #works\n    links = Item.query.filter(Item.title.like('%hel%')).paginate(page, 10, True)\n\n    #doesnt work at all\n    #links = db.query.filter(func.mid(Item.description, 1, 3).all()).paginate(page, 10, True)\n\n    total = Item.query.filter(Item.title.like('%' +search_term + '%')).count()\n    pagination = get_pagination(page=page,\n                                links=links,\n                                 per_page=PER_PAGE,\n                                offset=offset,\n\n                                search_term=search_term,\n                                inner_window=inner_window,\n                                outer_window = outer_window,\n                                search=search,\n\n\n                                total = total,        #total number of results\n                                format_total=True,   #format total. example 1,024\n                                format_number=True,  #turn on format flag\n                                record_name='links'\n\n                            )\n\n    return render_template('search/searchPage.html', form=form, links=links, pagination=pagination, page=page, per_page = PER_PAGE)\n</code></pre>\n\n<p>search_term prints the form input correctly on page 1, but page 2 onward prints \"None\"</p>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 23298, "user_id": 408182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/02jXt.jpg?s=128&g=1", "display_name": "eandersson", "link": "https://stackoverflow.com/users/408182/eandersson"}, "edited": false, "score": 0, "creation_date": 1464819812, "post_id": 37579721, "comment_id": 62646398, "body": "If you want to buffer all of the debug logging, you would need some sort of custom implementation."}, {"owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1464819905, "post_id": 37579721, "comment_id": 62646425, "body": "Buffering causes other problems if you have a lot of logging, so why not just redirect to a file?"}, {"owner": {"reputation": 71, "user_id": 5811932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9767ad40e69ef36a493c052d12adc12a?s=128&d=identicon&r=PG&f=1", "display_name": "boogie_bullfrog", "link": "https://stackoverflow.com/users/5811932/boogie-bullfrog"}, "edited": false, "score": 0, "creation_date": 1464820078, "post_id": 37579721, "comment_id": 62646482, "body": "unfortunately, my logging has to occur after I write to a <a href=\"https://github.com/sccn/labstreaminglayer\" rel=\"nofollow noreferrer\">lab streaming layer</a> network.. logging to a file interferes with this communication. timing out for just under a half second avoids this problem, but isn&#39;t desireable in time sensitive applications"}], "owner": {"reputation": 71, "user_id": 5811932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9767ad40e69ef36a493c052d12adc12a?s=128&d=identicon&r=PG&f=1", "display_name": "boogie_bullfrog", "link": "https://stackoverflow.com/users/5811932/boogie-bullfrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464819660, "creation_date": 1464819660, "last_edit_date": 1495540366, "question_id": 37579721, "link": "https://stackoverflow.com/questions/37579721/how-to-avoid-the-impact-of-verbose-logging", "title": "How to avoid the impact of verbose logging?", "body": "<p>How can one buffer verbose logging statements (i.e. <code>logging.debug(\"...\")</code>) until the end of a python process? \nWould this require a custom logger? </p>\n\n<p>My current setup uses a config file similar to <a href=\"https://stackoverflow.com/questions/4441842/python-logging-configuration-file\">Scott's</a></p>\n\n<p>(Windows Python2.7)</p>\n"}, {"tags": ["python", "locale", "currency-formatting"], "answers": [{"comments": [{"owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 0, "creation_date": 1464820415, "post_id": 37579832, "comment_id": 62646592, "body": "Thx. I just found <a href=\"http://babel.pocoo.org/en/latest/api/numbers.html\" rel=\"nofollow noreferrer\"><code>babel.numbers.format_currency</code></a> under your guide."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 0, "creation_date": 1464820515, "post_id": 37579832, "comment_id": 62646630, "body": "No worries, it is a pretty neat lib, it does a multitude of things. I added the link to format_currency and the doc example."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 1, "creation_date": 1464821045, "post_id": 37579832, "comment_id": 62646815, "body": "I know you can parse without the dollar sign if you pass the locale but  with <code>$123,456,789.00</code> I am not sure how or if you can handle that. <a href=\"http://babel.pocoo.org/en/latest/numbers.html#parsing-numbers\" rel=\"nofollow noreferrer\">babel.pocoo.org/en/latest/numbers.html#parsing-numbers</a>"}, {"owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 0, "creation_date": 1464822255, "post_id": 37579832, "comment_id": 62647216, "body": "Thx. It is not fair to ask a new question. So, I start a new question, <a href=\"http://stackoverflow.com/questions/37580151/format-currency-as-numbers-in-python\">Format currency as numbers in Python</a>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 1, "creation_date": 1464822767, "post_id": 37579832, "comment_id": 62647358, "body": "No prob, I actually have an idea for a parser that can work for any currency, I will give you a ping when I get something working but hopefully there is a nice lib already"}, {"owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 0, "creation_date": 1464823288, "post_id": 37579832, "comment_id": 62647501, "body": "Many thanks. Sadly, <a href=\"http://stackoverflow.com/questions/37580151/format-local-currency-as-numbers-in-python\">Format local currency as numbers in Python</a> is labeled as duplicate. I don&#39;t think it is duplicate."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 1, "creation_date": 1464823543, "post_id": 37579832, "comment_id": 62647576, "body": "I reopened the question as it is certainly not a dupe, there is a lot more to going from a formatted currency string back to a decimal"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 9, "last_activity_date": 1515100653, "last_edit_date": 1515100653, "creation_date": 1464820219, "answer_id": 37579832, "question_id": 37579712, "link": "https://stackoverflow.com/questions/37579712/format-numbers-as-currency-in-python/37579832#37579832", "title": "Format numbers as currency in Python", "body": "<p><a href=\"http://babel.pocoo.org/en/latest/numbers.html\" rel=\"noreferrer\">babel.numbers</a> </p>\n\n<pre><code>In [22]: from babel.numbers import format_decimal\nIn [23]:  format_decimal(12345, locale='de_DE')\nOut[23]: u'12.345'\n\nIn [24]: format_decimal(1.2345, locale='sv_SE')\nOut[24]: u'1,234'\n</code></pre>\n\n<p>Or in your case <a href=\"http://babel.pocoo.org/en/latest/api/numbers.html#babel.numbers.format_currency\" rel=\"noreferrer\">format_currency</a>:</p>\n\n<pre><code>In [7]: from babel.numbers import format_currency\n\nIn [8]: print format_currency(1099.98, 'USD', locale='en_US')\n$1,099.98\n\nIn [9]: print format_currency(1099.98, 'USD', locale='es_CO')\n1.099,98\u00a0US$\n\nIn [10]: print format_currency(1099.98, 'EUR', locale='de_DE')\n1.099,98\u00a0\u20ac\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3032, "user_id": 88406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b8df8cd7729e9e503186b061265583d8?s=128&d=identicon&r=PG", "display_name": "squarism", "link": "https://stackoverflow.com/users/88406/squarism"}, "edited": false, "score": 0, "creation_date": 1584556422, "post_id": 57258421, "comment_id": 107475666, "body": "This doesn&#39;t seem to work on python 3.7.6.  I used the package babel and format_number instead."}], "tags": [], "owner": {"reputation": 21, "user_id": 248517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a59a6b10157eea5641509ac9418d56?s=128&d=identicon&r=PG", "display_name": "vrieswerk", "link": "https://stackoverflow.com/users/248517/vrieswerk"}, "is_accepted": false, "score": 2, "last_activity_date": 1564419912, "creation_date": 1564419912, "answer_id": 57258421, "question_id": 37579712, "link": "https://stackoverflow.com/questions/37579712/format-numbers-as-currency-in-python/57258421#57258421", "title": "Format numbers as currency in Python", "body": "<p>For reference (for those that are looking to format numbers similar to how you would format currency), you can use <a href=\"https://docs.python.org/3/library/locale.html#locale.format_string\" rel=\"nofollow noreferrer\">locale.format_string</a> to format numbers</p>\n\n<pre><code>value = 123456789\n\nimport locale\nlocale.setlocale(locale.LC_ALL, 'de_DE') \nprint(locale.format_string('%.2f', value, True))\n</code></pre>\n\n<p>Would return</p>\n\n<pre><code>123.456.789,00\n</code></pre>\n"}], "owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18277, "favorite_count": 4, "accepted_answer_id": 37579832, "answer_count": 2, "score": 10, "last_activity_date": 1564419912, "creation_date": 1464819636, "last_edit_date": 1495540474, "question_id": 37579712, "link": "https://stackoverflow.com/questions/37579712/format-numbers-as-currency-in-python", "title": "Format numbers as currency in Python", "body": "<p>I learn from <a href=\"https://stackoverflow.com/questions/320929/currency-formatting-in-python\">Currency formatting in Python</a>, use the <a href=\"https://docs.python.org/2/library/locale.html\" rel=\"noreferrer\">locale</a> module to format numbers as currency. For instance,</p>\n\n<pre><code>#! /usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport locale\n\nvalue = 123456789\n\nl = locale.setlocale(locale.LC_ALL, '')     # LC_CTYPE=en_US.UTF-8;LC_NUMERIC=fr_FR.UTF-8;LC_TIME=fr_FR.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=fr_FR.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=fr_FR.UTF-8;LC_NAME=fr_FR.UTF-8;LC_ADDRESS=fr_FR.UTF-8;LC_TELEPHONE=fr_FR.UTF-8;LC_MEASUREMENT=fr_FR.UTF-8;LC_IDENTIFICATION=fr_FR.UTF-8\ns = locale.currency(value, grouping=True)   # 123 456 789,00 \u20ac\n\nlocale.setlocale(locale.LC_ALL, 'en_US.utf-8') \ns = locale.currency(value, grouping=True)   # $123,456,789.00\n\nlocale.setlocale(locale.LC_ALL, 'en_US')    # WHY? locale.Error: unsupported locale setting\ns = locale.currency(value, grouping=True)\n</code></pre>\n\n<p>I'd like to format numbers to other currency, say <code>de_DE</code>. I encounter the issue <code>locale.Error: unsupported locale setting</code> since the locale <code>de_DE</code> is not in the list of <code>locale -a</code>.</p>\n\n<pre><code>locale.setlocale(locale.LC_ALL, 'de_DE')        # locale.Error: unsupported locale setting\ns = locale.currency(value, grouping=True)\n</code></pre>\n\n<p>One solution is to add this locale to my machine. Is there a better way?</p>\n"}, {"tags": ["python", "csv", "redmine"], "comments": [{"owner": {"reputation": 23298, "user_id": 408182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/02jXt.jpg?s=128&g=1", "display_name": "eandersson", "link": "https://stackoverflow.com/users/408182/eandersson"}, "edited": false, "score": 0, "creation_date": 1464819746, "post_id": 37579675, "comment_id": 62646373, "body": "I tried it out with the following URL and it works fine <code>http:&#47;&#47;winterolympicsmedals.com&#47;medals.csv</code>"}, {"owner": {"reputation": 25, "user_id": 4613674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4f2fdd68568dd9492c2ccccce8dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "JDP", "link": "https://stackoverflow.com/users/4613674/jdp"}, "reply_to_user": {"reputation": 23298, "user_id": 408182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/02jXt.jpg?s=128&g=1", "display_name": "eandersson", "link": "https://stackoverflow.com/users/408182/eandersson"}, "edited": false, "score": 0, "creation_date": 1464820259, "post_id": 37579675, "comment_id": 62646541, "body": "This also works for me. However copying the URL I have above, and the URL you provided results in exactly the same behavior on my browser, but my URL still doesn&#39;t do anything in Python."}, {"owner": {"reputation": 23298, "user_id": 408182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/02jXt.jpg?s=128&g=1", "display_name": "eandersson", "link": "https://stackoverflow.com/users/408182/eandersson"}, "edited": false, "score": 0, "creation_date": 1464820365, "post_id": 37579675, "comment_id": 62646575, "body": "It&#39;s unfortunately impossible for us to assist here, as the page you linked is internal."}, {"owner": {"reputation": 25, "user_id": 4613674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4f2fdd68568dd9492c2ccccce8dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "JDP", "link": "https://stackoverflow.com/users/4613674/jdp"}, "reply_to_user": {"reputation": 23298, "user_id": 408182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/02jXt.jpg?s=128&g=1", "display_name": "eandersson", "link": "https://stackoverflow.com/users/408182/eandersson"}, "edited": false, "score": 0, "creation_date": 1464821021, "post_id": 37579675, "comment_id": 62646809, "body": "I&#39;m pretty sure someone with knowledge of Redmine or how to authenticate or login through requests would be able to at least point me in the right direction."}, {"owner": {"reputation": 23298, "user_id": 408182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/02jXt.jpg?s=128&g=1", "display_name": "eandersson", "link": "https://stackoverflow.com/users/408182/eandersson"}, "edited": false, "score": 0, "creation_date": 1464823327, "post_id": 37579675, "comment_id": 62647512, "body": "You are right, I assumed that this was an internal only site."}], "owner": {"reputation": 25, "user_id": 4613674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4f2fdd68568dd9492c2ccccce8dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "JDP", "link": "https://stackoverflow.com/users/4613674/jdp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464820359, "creation_date": 1464819442, "last_edit_date": 1464820359, "question_id": 37579675, "link": "https://stackoverflow.com/questions/37579675/trying-to-download-csv-file-from-redmine-using-requests", "title": "Trying to download CSV file from Redmine using Requests", "body": "<p>I've gone through a few somewhat similar questions and tried the suggestions, but I haven't quite gotten to an answer. I'm trying to download a CSV file of a Redmine forum using Python. </p>\n\n<p>If I follow the link below within a browser (on a network that can access it), it will immediately download the CSV file.</p>\n\n<blockquote>\n  <p><a href=\"http://bugs.internal.com/projects/issues/issues.csv?utf8=%E2%9C%93&amp;columns=all&amp;description=1\" rel=\"nofollow\">http://bugs.internal.com/projects/issues/issues.csv?utf8=%E2%9C%93&amp;columns=all&amp;description=1</a></p>\n</blockquote>\n\n<p>And I'm just looking for the same behavior from Python. Here's what I've tried so far. I think this should be printing the whole CSV file, but it just prints a blank.</p>\n\n<pre><code>import csv\nimport requests\n\nCSV_URL = 'http://bugs.internal.com/projects/issues/issues.csv?utf8=%E2%9C%93&amp;columns=all&amp;description=1'\n\nwith requests.Session() as s:\n    download = s.get(CSV_URL)\n\n    decoded_content = download.content.decode('utf-8')\n\n    cr = csv.reader(decoded_content.splitlines(), delimiter=',')\n    my_list = list(cr)\n    for row in my_list:\n        print(row)\n</code></pre>\n\n<p>Does anyone have any pointers? I think it's something with the URL, but I don't know where to start. </p>\n"}, {"tags": ["python", "import", "importerror", "irc"], "comments": [{"owner": {"reputation": 1590, "user_id": 1248471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35417c3606cd7b06af313abbbb14353?s=128&d=identicon&r=PG", "display_name": "mtt2p", "link": "https://stackoverflow.com/users/1248471/mtt2p"}, "edited": false, "score": 1, "creation_date": 1464819539, "post_id": 37579651, "comment_id": 62646290, "body": "the irc modul is missing search it with pip  &quot;pip search IRCBot&quot;"}, {"owner": {"reputation": 1590, "user_id": 1248471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35417c3606cd7b06af313abbbb14353?s=128&d=identicon&r=PG", "display_name": "mtt2p", "link": "https://stackoverflow.com/users/1248471/mtt2p"}, "edited": false, "score": 0, "creation_date": 1464819652, "post_id": 37579651, "comment_id": 62646337, "body": "pip is a package management system"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6411860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7L-bJnZcxIQ/AAAAAAAAAAI/AAAAAAAAAWc/zTqUAJTnWJ8/photo.jpg?sz=128", "display_name": "Max Lynch", "link": "https://stackoverflow.com/users/6411860/max-lynch"}, "edited": false, "score": 0, "creation_date": 1464820018, "post_id": 37579731, "comment_id": 62646460, "body": "when I enter:     python-32 -c &#39;import struct;print( 8 * struct.calcsize(&quot;P&quot;))&#39; into Terminal it returns: 32  presumably that means Im running 32 bit. What does that mean?"}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1464820156, "post_id": 37579731, "comment_id": 62646504, "body": "Hi, Welcome to StackOverflow.  It would be helpful if you gave a more detailed answer, like describing how to check python&#39;s bit size, as well as the package&#39;s bit size."}], "tags": [], "owner": {"reputation": 1, "user_id": 6411939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a835a1de0aba03dfb1744596a92944?s=128&d=identicon&r=PG", "display_name": "Jag", "link": "https://stackoverflow.com/users/6411939/jag"}, "is_accepted": false, "score": 0, "last_activity_date": 1464819706, "creation_date": 1464819706, "answer_id": 37579731, "question_id": 37579651, "link": "https://stackoverflow.com/questions/37579651/importerror-cannot-import-name-ircbot/37579731#37579731", "title": "ImportError: cannot import name IRCBot", "body": "<p>Please check what version you have - If you have 32-bits version of package and 64-bits version of Python (or reverse situation) then the import never running .</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6411860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7L-bJnZcxIQ/AAAAAAAAAAI/AAAAAAAAAWc/zTqUAJTnWJ8/photo.jpg?sz=128", "display_name": "Max Lynch", "link": "https://stackoverflow.com/users/6411860/max-lynch"}, "edited": false, "score": 0, "creation_date": 1464820112, "post_id": 37579785, "comment_id": 62646495, "body": "Adding .bot didn&#39;t do the trick. I have got irc installed though. Im using Python 2.7.10"}, {"owner": {"reputation": 17, "user_id": 1259063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bf80b6a9edffcfb6616f21a1f9a6e?s=128&d=identicon&r=PG", "display_name": "flang3r", "link": "https://stackoverflow.com/users/1259063/flang3r"}, "reply_to_user": {"reputation": 11, "user_id": 6411860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7L-bJnZcxIQ/AAAAAAAAAAI/AAAAAAAAAWc/zTqUAJTnWJ8/photo.jpg?sz=128", "display_name": "Max Lynch", "link": "https://stackoverflow.com/users/6411860/max-lynch"}, "edited": false, "score": 0, "creation_date": 1464876057, "post_id": 37579785, "comment_id": 62672869, "body": "I see on <a href=\"http://irckit.readthedocs.io/en/latest/installation.html#installing-with-pip\" rel=\"nofollow noreferrer\">irckit.readthedocs.io/en/latest/&hellip;</a> that you need irckit installed."}], "tags": [], "owner": {"reputation": 17, "user_id": 1259063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bf80b6a9edffcfb6616f21a1f9a6e?s=128&d=identicon&r=PG", "display_name": "flang3r", "link": "https://stackoverflow.com/users/1259063/flang3r"}, "is_accepted": false, "score": 0, "last_activity_date": 1464819973, "creation_date": 1464819973, "answer_id": 37579785, "question_id": 37579651, "link": "https://stackoverflow.com/questions/37579651/importerror-cannot-import-name-ircbot/37579785#37579785", "title": "ImportError: cannot import name IRCBot", "body": "<p>The problem is that python can't find the class named  IRCbot inside irc.\nDo you have irc installed? If so, ypu could try to do</p>\n\n<p>from irc.bot import IRCBot</p>\n\n<p>If you don't have irc installed you can install it with pip:</p>\n\n<p>pip install irc</p>\n\n<p>What version of python are you using?</p>\n"}], "owner": {"reputation": 11, "user_id": 6411860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7L-bJnZcxIQ/AAAAAAAAAAI/AAAAAAAAAWc/zTqUAJTnWJ8/photo.jpg?sz=128", "display_name": "Max Lynch", "link": "https://stackoverflow.com/users/6411860/max-lynch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1464819973, "creation_date": 1464819336, "last_edit_date": 1464819471, "question_id": 37579651, "link": "https://stackoverflow.com/questions/37579651/importerror-cannot-import-name-ircbot", "title": "ImportError: cannot import name IRCBot", "body": "<p>I'm importing a module and its all done in the same file:</p>\n\n<pre><code>from irc import IRCBot, run_bot\n\nclass greeterBot(IRCBot):\n    def greet(self, nick, messege, channel):\n        return 'Hi %s' % nick\n\n    def command_patterns(self):\n        return (\n            self.ping('^hello', self.greet),\n            )\nhost = \"coolwhizserver\"\nport = 6667\nnick = 'Alfred'\n\nrun_bot(greeterBot, host, port, nick ['#randomchannel'])\n</code></pre>\n\n<p>This is the code, I'll print the output below:</p>\n\n<p><code>Traceback (most recent call last):\n  File \"Greeter.py\", line 1, in &lt;module&gt;\n    from irc import IRCBot, run_bot\nImportError: cannot import name IRCBot</code></p>\n"}, {"tags": ["python", "apache", "ubuntu", "flask", "permission-denied"], "comments": [{"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464819392, "post_id": 37579631, "comment_id": 62646231, "body": "Have you restarted apache since the changes?"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464819493, "post_id": 37579631, "comment_id": 62646265, "body": "@RitLew: yes! sudo service apache2 restart"}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464819549, "post_id": 37579631, "comment_id": 62646293, "body": "Also, is there already a file named out.txt in the directory?"}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464819624, "post_id": 37579631, "comment_id": 62646326, "body": "Do you have write permissions on the directory itself?"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464819657, "post_id": 37579631, "comment_id": 62646341, "body": "@RitLew yes, it has also 777 chmod"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464819715, "post_id": 37579631, "comment_id": 62646359, "body": "@RitLew Yes, this directory 777 too."}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464819720, "post_id": 37579631, "comment_id": 62646363, "body": "Try giving a full path to out.txt, I have a feeling that code might have a different working directory when apache runs it"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820048, "post_id": 37579631, "comment_id": 62646471, "body": "@RitLew Okay) That works! But now I see another problem in apache log: /bin/sh: 1: &#39;my command which you can see above&#39;: not found. Do you have any idea, how to change sh to bash?"}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820103, "post_id": 37579631, "comment_id": 62646492, "body": "Which command is it referring to?"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820188, "post_id": 37579631, "comment_id": 62646513, "body": "@ritlew /bin/sh: 1: sudo python ~/neural_artistic_style/neural_artistic_style.py --subject /var/www/superapp/superapp/uploads/image.jpg --style /var/www/superapp/superapp/uploads/style.jpg --iterations 2 --network ~/neural_artistic_style/imagenet-vgg-verydeep-19.mat: not found"}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820241, "post_id": 37579631, "comment_id": 62646534, "body": "You said you were using a virtualenv, do you have apache set up to reference it?"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820468, "post_id": 37579631, "comment_id": 62646613, "body": "Can you explain, whay do you mean?) Probably I didn&#39;t."}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820641, "post_id": 37579631, "comment_id": 62646677, "body": "Follow this link and go to the apache configuration: <a href=\"http://www.enigmeta.com/2012/08/16/starting-flask/#setup-the-server\" rel=\"nofollow noreferrer\">enigmeta.com/2012/08/16/starting-flask/#setup-the-server</a>"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820741, "post_id": 37579631, "comment_id": 62646706, "body": "Okay! Thanks a lot!"}, {"owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "edited": false, "score": 0, "creation_date": 1464820802, "post_id": 37579631, "comment_id": 62646733, "body": "This might also be what you need to do. <a href=\"http://stackoverflow.com/questions/27450998/run-mod-wsgi-with-virtualenv-or-python-with-version-different-that-system-defaul#answers-header\" title=\"run mod wsgi with virtualenv or python with version different that system defaul%23answers header\">stackoverflow.com/questions/27450998/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1502, "user_id": 3342429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTzTs.jpg?s=128&g=1", "display_name": "ritlew", "link": "https://stackoverflow.com/users/3342429/ritlew"}, "is_accepted": true, "score": 0, "last_activity_date": 1464820208, "creation_date": 1464820208, "answer_id": 37579831, "question_id": 37579631, "link": "https://stackoverflow.com/questions/37579631/apache-errno-13-file-permission-denied/37579831#37579831", "title": "Apache: Errno 13 file permission denied", "body": "<p>The problem is that apache runs your code in which will have a different working directory, one which you do not intend to write the file into. You must supply a full path to the file.</p>\n\n<pre><code>f = open('/path/to/my/out.txt', 'w')\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1949, "favorite_count": 1, "accepted_answer_id": 37579831, "answer_count": 1, "score": 0, "last_activity_date": 1464820208, "creation_date": 1464819235, "question_id": 37579631, "link": "https://stackoverflow.com/questions/37579631/apache-errno-13-file-permission-denied", "title": "Apache: Errno 13 file permission denied", "body": "<p>I use AWS EC2 to run my application \"Neural network in art\". To send images I deploy a website based on flask + virtualenv + apache. After sending the image on the server starts the script, which print each iteration and I want to store it in out.txt</p>\n\n<p><code>__init__.py:</code></p>\n\n<pre><code>#...\ndef apply_style(image_name, style_name, iterations):\n    command = ['\"python ~/neural_artistic_style/neural_artistic_style.py', \\\n            ' --subject ', '/var/www/superapp/superapp/uploads/' + image_name, \\\n            ' --style ', '/var/www/superapp/superapp/uploads/' + style_name, \\\n            ' --iterations ', iterations, \\\n            ' --network ~/neural_artistic_style/imagenet-vgg-verydeep-19.mat\"']\n    str = ''.join(command)\n    network = Popen(str, shell=True, stdout=PIPE)\n    stats = []\n    for out in network.stdout:\n        stats.append(out)\n    line = ' '.join(stats)\n    return line\n\n@app.route('/upload', methods=['GET', 'POST'])\ndef upload():\n    if request.method == 'POST':\n        image = request.files['image']\n        style = request.files['style']\n        iterations = request.form['iter']\n        if file and style:\n#Saving images...                \n            result = apply_style(image_name, style_name, iterations)\n            f = open('out.txt', 'w')\n            f.write(result)\n            f.close()\n            return 'FINISHED'\n#...\n</code></pre>\n\n<p>Well, I can upload image via HTTP without writing result in out.txt, but when I do, apache log shows this:</p>\n\n<pre><code>[Wed Jun 01 ...] [:error] [pid 2360:tid 14...]     return self.view_functions[rule.endpoint](**req.view_args)\n[Wed Jun 01 ...] [:error] [pid 2360:tid 14...]   File \"/var/www/superapp/superapp/__init__.py\", line 72, in upload\n[Wed Jun 01 ...] [:error] [pid 2360:tid 14...]     f = open('out.txt', 'w')\n[Wed Jun 01 ...] [:error] [pid 2360:tid 14...] IOError: [Errno 13] Permission denied: 'out.txt'\n</code></pre>\n\n<p>All files in this directory now have 777 permission. When I try to write something using simple script like <code>script.py:</code></p>\n\n<pre><code>f = open('out.txt', 'w')\nf.write('some words')\nf.close()\n</code></pre>\n\n<p>everithing works. But with apache it doesn't. Has anyone any ideas how to fix it?</p>\n"}, {"tags": ["python", "datetime", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1464875740, "post_id": 37593323, "comment_id": 62672601, "body": "OK, so this works: <code>pd.to_datetime(nanos).dt.tz_localize(&#39;UTC&#39;).dt.tz_convert(&#39;U&zwnj;&#8203;S&#47;Eastern&#39;)</code> - but the docs for <code>Series.tz_localize()</code> don&#39;t seem to mention <code>dt</code> at all, so that&#39;s pretty non-discoverable.  Thanks for the expert help.  Do you have any idea how I can make Pandas always print the microseconds part even when it&#39;s zero?"}, {"owner": {"reputation": 107245, "user_id": 644898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2833d485728ee2f603802242ebc9826?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/644898/jeff"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1464876292, "post_id": 37593323, "comment_id": 62673054, "body": "<a href=\"http://pandas.pydata.org/pandas-docs/stable/timeseries.html#time-date-components\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/&hellip;</a> tons of docs"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1464882440, "post_id": 37593323, "comment_id": 62678053, "body": "I was hoping for something similar to <code>pd.options.display.max_rows</code> which controls how things are printed without having to reimplement the printing code.  No such luck I guess."}, {"owner": {"reputation": 107245, "user_id": 644898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2833d485728ee2f603802242ebc9826?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/644898/jeff"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1464882537, "post_id": 37593323, "comment_id": 62678122, "body": "that is implemented for Series displays but not for Insex as that is amazingly complex - if u want to contribute a patch great"}], "tags": [], "owner": {"reputation": 107245, "user_id": 644898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2833d485728ee2f603802242ebc9826?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/644898/jeff"}, "is_accepted": true, "score": 5, "last_activity_date": 1464874188, "creation_date": 1464874188, "answer_id": 37593323, "question_id": 37579590, "link": "https://stackoverflow.com/questions/37579590/pandas-datetimeindex-vs-to-datetime-discrepancies/37593323#37593323", "title": "Pandas DatetimeIndex vs to_datetime discrepancies", "body": "<p>There is 1 way to convert things, <code>pd.to_datetime()</code>, yes you can directly construct a <code>DatetimeIndex</code>, but it is restrictive on purpose, while <code>to_datetime</code> is quite flexible.</p>\n\n<p>So <code>to_datetime</code> will give you a similar object to what you input, if you input an array-like, then you will get a <code>DatetimeIndex</code>, input a <code>Series</code> you will get a <code>Series</code>.</p>\n\n<pre><code>In [5]: nanos = [1462282258000000000, 1462282258100000000, 1462282258200000000]\n</code></pre>\n\n<p>By default it will convert with a <code>unit='ns'</code> which lines up here</p>\n\n<pre><code>In [7]: pd.to_datetime(nanos)\nOut[7]: DatetimeIndex(['2016-05-03 13:30:58', '2016-05-03 13:30:58.100000', '2016-05-03 13:30:58.200000'], dtype='datetime64[ns]', freq=None)\n</code></pre>\n\n<p>So one thing we could do is make a Series out of this. The <em>index</em> is INTEGER here, the <em>values</em> are Datetimes.</p>\n\n<pre><code>In [10]: s = Series(pd.to_datetime(nanos))\n\nIn [11]: s\nOut[11]: \n0   2016-05-03 13:30:58.000\n1   2016-05-03 13:30:58.100\n2   2016-05-03 13:30:58.200\ndtype: datetime64[ns]\n</code></pre>\n\n<p>You then can use the <code>.dt</code> accessor to operate on the <em>values</em>. <code>Series.tz_localize</code> operates on the <em>index</em>.</p>\n\n<pre><code>In [12]: s.dt.tz_localize('US/Eastern')\nOut[12]: \n0          2016-05-03 13:30:58-04:00\n1   2016-05-03 13:30:58.100000-04:00\n2   2016-05-03 13:30:58.200000-04:00\ndtype: datetime64[ns, US/Eastern]\n</code></pre>\n"}], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 1, "accepted_answer_id": 37593323, "answer_count": 1, "score": 4, "last_activity_date": 1464874188, "creation_date": 1464818913, "question_id": 37579590, "link": "https://stackoverflow.com/questions/37579590/pandas-datetimeindex-vs-to-datetime-discrepancies", "title": "Pandas DatetimeIndex vs to_datetime discrepancies", "body": "<p>I'm trying to convert a Pandas Series of epoch timestamps to human-readable times.  There are at least two obvious ways to do this: <code>pd.DatetimeIndex</code> and <code>pd.to_datetime()</code>.  They seem to work in quite different ways:</p>\n\n<pre><code>In [1]: import pandas as pd\n\nIn [3]: nanos = pd.Series([1462282258000000000, 1462282258100000000, 1462282258200000000])\n\nIn [4]: pd.to_datetime(nanos)\nOut[4]: \n0   2016-05-03 13:30:58.000\n1   2016-05-03 13:30:58.100\n2   2016-05-03 13:30:58.200\ndtype: datetime64[ns]\n\nIn [5]: pd.DatetimeIndex(nanos)\nOut[5]: \nDatetimeIndex([       '2016-05-03 13:30:58', '2016-05-03 13:30:58.100000',\n               '2016-05-03 13:30:58.200000'],\n              dtype='datetime64[ns]', freq=None)\n</code></pre>\n\n<p>With <code>to_datetime()</code>, the display resolution is milliseconds, and <code>.000</code> is printed on whole seconds.  With <code>DatetimeIndex</code>, the display resolution is microseconds (which I like), but the decimal part is completely omitted on whole seconds.</p>\n\n<p>Then, try converting the time zone:</p>\n\n<pre><code>In [12]: pd.DatetimeIndex(nanos).tz_localize('UTC')                   \nOut[12]: \nDatetimeIndex([       '2016-05-03 13:30:58+00:00',\n               '2016-05-03 13:30:58.100000+00:00',\n               '2016-05-03 13:30:58.200000+00:00'],\n              dtype='datetime64[ns, UTC]', freq=None)\n\nIn [13]: pd.to_datetime(nanos).tz_localize('UTC')  \nTypeError: index is not a valid DatetimeIndex or PeriodIndex\n</code></pre>\n\n<p>This is strange: the timezone functions don't work with a plain datetime Series, only with a DatetimeIndex.  Why would that be?  The <code>tz_localize()</code> method exists and is documented here: <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.tz_localize.html\" rel=\"nofollow\">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.tz_localize.html</a></p>\n\n<p>I've tried Pandas 0.17.0 and 0.18.1 with the same results.</p>\n\n<p>I'm not trying to make an actual index, so all else being equal I would have expected to use <code>to_datetime()</code> - I just can't get time zone methods to work with it.</p>\n"}, {"tags": ["python", "matplotlib", "anaconda"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1464819104, "post_id": 37579539, "comment_id": 62646128, "body": "Drop into the debugger and look at what the font name is."}, {"owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "reply_to_user": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1464867135, "post_id": 37579539, "comment_id": 62666004, "body": "Okay for anyone having the same issue , I fixed it by modifying the font_manager.py , changing some lines the win32installedfont() by this : <code>key, direc, any = winreg.EnumValue( local, j) if not is_string_like(direc):     continue if not os.path.dirname(direc):     direc = os.path.join(directory, direc) direc = direc.split(&#39;\\0&#39;, 1)[0]</code>"}], "owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464818628, "creation_date": 1464818628, "question_id": 37579539, "link": "https://stackoverflow.com/questions/37579539/error-when-importing-matplotlib-using-anaconda-ide", "title": "Error when importing Matplotlib using Anaconda IDE", "body": "<p>I have just installed Anaconda 3 and I'm trying to use Pylab to plot a function . But when using the line code :<code>from matplotlib import *</code> , I get the following error , that I've been trying to solve for 3 days . I already tried the conda update -all, or instaling a previous version of Matplotlib .\nHere is the error : </p>\n\n<pre><code>runfile('C:/Users/USUARIO/.spyder2-py3/temp.py', wdir='C:/Users/USUARIO/.spyder2-py3')\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-1-9b55d1cb87fc&gt;\", line 1, in &lt;module&gt;\n    runfile('C:/Users/USUARIO/.spyder2-py3/temp.py', wdir='C:/Users/USUARIO/.spyder2-py3')\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 714, in runfile\n    execfile(filename, namespace)\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 89, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"C:/Users/USUARIO/.spyder2-py3/temp.py\", line 3, in &lt;module&gt;\n    from pylab import *\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\pylab.py\", line 1, in &lt;module&gt;\n    from matplotlib.pylab import *\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\pylab.py\", line 231, in &lt;module&gt;\n    import matplotlib.finance\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\finance.py\", line 27, in &lt;module&gt;\n    from matplotlib.collections import LineCollection, PolyCollection\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\collections.py\", line 27, in &lt;module&gt;\n    import matplotlib.backend_bases as backend_bases\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\backend_bases.py\", line 62, in &lt;module&gt;\n    import matplotlib.textpath as textpath\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\textpath.py\", line 15, in &lt;module&gt;\n    import matplotlib.font_manager as font_manager\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\font_manager.py\", line 1421, in &lt;module&gt;\n    _rebuild()\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\font_manager.py\", line 1406, in _rebuild\n    fontManager = FontManager()\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\font_manager.py\", line 1044, in __init__\n    self.ttffiles = findSystemFonts(paths) + findSystemFonts()\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\font_manager.py\", line 313, in findSystemFonts\n    for f in win32InstalledFonts(fontdir):\n\n  File \"C:\\Anaconda3\\lib\\site-packages\\matplotlib\\font_manager.py\", line 231, in win32InstalledFonts\n    direc = os.path.abspath(direc).lower()\n\n  File \"C:\\Anaconda3\\lib\\ntpath.py\", line 535, in abspath\n    path = _getfullpathname(path)\n\nValueError: _getfullpathname: embedded null character`\n</code></pre>\n\n<p>Any idea on how to fix it ?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1464846656, "post_id": 37579516, "comment_id": 62653381, "body": "For future reference, it makes it much easier to answer a question if the asker provides code to replicate some sample data to work with.  As your question is presented, a person providing an answer won&#39;t be able to validate against what your expectations are."}, {"owner": {"reputation": 648, "user_id": 1908806, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0e81053220eb512d279771636eac3911?s=128&d=identicon&r=PG", "display_name": "Sheridan Gray", "link": "https://stackoverflow.com/users/1908806/sheridan-gray"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1464887217, "post_id": 37579516, "comment_id": 62681096, "body": "Thanks :)  Week 1 with pandas - still learning the ropes!"}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1464847399, "creation_date": 1464847399, "answer_id": 37583844, "question_id": 37579516, "link": "https://stackoverflow.com/questions/37579516/transform-category-start-time-end-time-dataframe-for-plotting-in-pandas/37583844#37583844", "title": "Transform category, start_time, end_time DataFrame for plotting in pandas", "body": "<p>I suspect this will work though I haven't verified.</p>\n\n<pre><code>df_count = pd.DataFrame(index=rng)\n\ndef count_cats(x, df):\n    date = x.name[0]\n    condition1 = df.start &lt;= date\n    condition2 = df.end &gt;= date\n    df_slice = df.loc[condition1 &amp; condition2, 'category']\n    return pd.Series([df_slice.unique().size], index=['CountCats'])\n\ndf_count = df_count.apply(lambda x: count_cats(x, df)) \n</code></pre>\n"}], "owner": {"reputation": 648, "user_id": 1908806, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0e81053220eb512d279771636eac3911?s=128&d=identicon&r=PG", "display_name": "Sheridan Gray", "link": "https://stackoverflow.com/users/1908806/sheridan-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576007698, "creation_date": 1464818482, "last_edit_date": 1576007698, "question_id": 37579516, "link": "https://stackoverflow.com/questions/37579516/transform-category-start-time-end-time-dataframe-for-plotting-in-pandas", "title": "Transform category, start_time, end_time DataFrame for plotting in pandas", "body": "<p>I have a pandas DataFrame:</p>\n\n<pre><code>df.info()\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 32656 entries, 94418 to 2\nData columns (total 8 columns):\ncustomer_id             32656 non-null object\nsession_id              32656 non-null int64\nstart                   32656 non-null datetime64[ns, America/Los_Angeles]\nend                     32656 non-null datetime64[ns, America/Los_Angeles]\nlength                  32656 non-null timedelta64[ns]\ncategory                32656 non-null object\nrounded_start           32656 non-null datetime64[ns, America/Los_Angeles]\nrounded_end             32656 non-null datetime64[ns, America/Los_Angeles]\ndtypes: datetime64[ns, America/Los_Angeles](4), int64(1), object(2), timedelta64[ns](1)\nmemory usage: 2.2+ MB\n</code></pre>\n\n<p>I also create a DateTimeIndex:</p>\n\n<pre><code>rng = pd.date_range(df['rounded_start'].min(), end=df['rounded_start'].max(), freq='5Min')\n</code></pre>\n\n<p>How do I tie the two datasets together so that I can plot each point in the range on the x-axis and shows the count of how many categories are included during that time?</p>\n"}, {"tags": ["python", "django", "url", "parameters"], "comments": [{"owner": {"reputation": 10506, "user_id": 5520354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QgGFm.jpg?s=128&g=1", "display_name": "C14L", "link": "https://stackoverflow.com/users/5520354/c14l"}, "edited": false, "score": 0, "creation_date": 1464818474, "post_id": 37579453, "comment_id": 62645889, "body": "How to &quot;separate&quot; what? And why would you use <code>urlparse</code> when you are using Django and can simply access <code>request.GET</code>?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1464818533, "post_id": 37579453, "comment_id": 62645913, "body": "Where is your code? Precisely which step are you stuck at? Can you get the URL? Extract the query parameter? Decode the e.g. <code>%2C</code> in the query parameter value?"}], "answers": [{"tags": [], "owner": {"reputation": 1590, "user_id": 1248471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35417c3606cd7b06af313abbbb14353?s=128&d=identicon&r=PG", "display_name": "mtt2p", "link": "https://stackoverflow.com/users/1248471/mtt2p"}, "is_accepted": false, "score": 0, "last_activity_date": 1464819758, "last_edit_date": 1464819758, "creation_date": 1464818708, "answer_id": 37579559, "question_id": 37579453, "link": "https://stackoverflow.com/questions/37579453/how-can-i-extract-city-region-country-from-url-django/37579559#37579559", "title": "How can I extract City, Region, Country from URL? Django", "body": "<p>use django request object  \"domain/search/?city=vienna\"</p>\n\n<p>in \n<strong>django class based views</strong>:</p>\n\n<pre><code>self.request.GET['city']\n</code></pre>\n\n<p>in \n<strong>django function based views</strong></p>\n\n<pre><code>def get_something(request):\n    return HttpResponse(\"%s\" % request.GET['city'] )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 545, "user_id": 5326903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-T6X4g0on2bE/AAAAAAAAAAI/AAAAAAAAACs/N_avSF6FSW0/photo.jpg?sz=128", "display_name": "Lyken", "link": "https://stackoverflow.com/users/5326903/lyken"}, "is_accepted": false, "score": 0, "last_activity_date": 1464818929, "creation_date": 1464818929, "answer_id": 37579595, "question_id": 37579453, "link": "https://stackoverflow.com/questions/37579453/how-can-i-extract-city-region-country-from-url-django/37579595#37579595", "title": "How can I extract City, Region, Country from URL? Django", "body": "<p>python 2.7</p>\n\n<pre><code>&gt;&gt;&gt; from urlparse import urlparse, parse_qs\n&gt;&gt;&gt; u = urlparse('http://localhost:8000/search/?city=New+York%2C+NY%2C+United+States')\n&gt;&gt;&gt; q = parse_qs(u.query)\n&gt;&gt;&gt; q['city']\n['New York, NY, United States']\n&gt;&gt;&gt; q['city'][0].split(', ')\n['New York', 'NY', 'United States']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10506, "user_id": 5520354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QgGFm.jpg?s=128&g=1", "display_name": "C14L", "link": "https://stackoverflow.com/users/5520354/c14l"}, "is_accepted": false, "score": 0, "last_activity_date": 1464819432, "creation_date": 1464819432, "answer_id": 37579673, "question_id": 37579453, "link": "https://stackoverflow.com/questions/37579453/how-can-i-extract-city-region-country-from-url-django/37579673#37579673", "title": "How can I extract City, Region, Country from URL? Django", "body": "<p>Simply in the Django view function. The <code>request</code> object has a <code>request.GET</code> property. </p>\n\n<pre><code>def my_view(request):\n    crc = request.GET.get(city, None)\n\n    if crc:\n        city, region, country = crc.split(',')\n\n    # ...\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 5405436, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-OyuDrJGS-qw/AAAAAAAAAAI/AAAAAAAAJhE/GFWdGAekInI/photo.jpg?sz=128", "display_name": "Seif", "link": "https://stackoverflow.com/users/5405436/seif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1464819758, "creation_date": 1464818157, "last_edit_date": 1495535341, "question_id": 37579453, "link": "https://stackoverflow.com/questions/37579453/how-can-i-extract-city-region-country-from-url-django", "title": "How can I extract City, Region, Country from URL? Django", "body": "<p>My search field returns something like this:</p>\n\n<blockquote>\n  <p><a href=\"http://localhost:8000/search/?city=New+York%2C+NY%2C+United+States\" rel=\"nofollow noreferrer\">http://localhost:8000/search/?city=New+York%2C+NY%2C+United+States</a></p>\n</blockquote>\n\n<p>How can I extract City, Region, Country. I've been through this document: <a href=\"https://docs.python.org/2/library/urlparse.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/urlparse.html</a></p>\n\n<p>and this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/37570768/how-can-i-extract-city-region-country-from-a-url-django\">How can I extract City, Region, Country from a URL? Django</a></p>\n\n<p>But not completely sure how to seperate them.</p>\n"}, {"tags": ["python", "django", "authentication"], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464818113, "creation_date": 1464818113, "last_edit_date": 1495540366, "question_id": 37579442, "link": "https://stackoverflow.com/questions/37579442/django-calling-the-authenticate-method-of-a-class-that-inherits-from-remoteuse", "title": "Django : Calling the authenticate method of a class that inherits from RemoteUserBackend", "body": "<p>I am currently having difficulty customizing Djangos authentication system.\nIn my scenario there is no database and authentication happens through a http request. There are no tables to read from or write from.</p>\n\n<p>This <a href=\"https://stackoverflow.com/questions/1057149/django-users-and-authentication-from-external-source\">thread</a> here  deals pretty much with the same case I am dealing with however i do not understand how a user is being created in his example. I also read <a href=\"https://docs.djangoproject.com/en/dev/howto/auth-remote-user/\" rel=\"nofollow noreferrer\">this</a> from django manual  regarding <code>REMOTE_USER</code> authentication.Coming back to the first link the user posted this code here.It consists of a backend and a user object</p>\n\n<p>Backend - inherit from RemoteUserBackend</p>\n\n<pre><code>from django.contrib.auth.backends import RemoteUserBackend\n\nclass MyRemoteUserBackend (RemoteUserBackend):\n    # Create a User object if not already in the database?\n    create_unknown_user = False\n\n    def get_user (self, user_id):\n        user = somehow_create_an_instance_of (MyUser, user_id)    ----&gt;A\n        return user\n\n    def authenticate (self, **credentials):\n        check_credentials ()\n        user = somehow_create_an_instance_of (MyUser, credentials) ----&gt;B\n        return user\n</code></pre>\n\n<p>Then the user:</p>\n\n<pre><code>from django.contrib.auth.models import User\n\nclass MyUser (User):\n\n    def save (self):\n        \"\"\"saving to DB disabled\"\"\"\n        pass\n\n    objects = None # we cannot really use this w/o local DB\n\n    username = \"\"  # and all the other properties likewise.\n                   # They're defined as model.CharField or similar,\n                   # and we can't allow that\n\n    def get_group_permissions (self):\n        \"\"\"If you don't make your own permissions module,\n           the default also will use the DB. Throw it away\"\"\"\n        return [] # likewise with the other permission defs\n\n    def get_and_delete_messages (self):\n        \"\"\"Messages are stored in the DB. Darn!\"\"\"\n        return []\n</code></pre>\n\n<p>Now my question is I would like to do something like this in my view</p>\n\n<pre><code>def my_view(request):\n    username = request.POST['username']\n    password = request.POST['password']\n    user = authenticate(username=username, password=password)\n    if user is not None:\n        if user.is_active:\n            login(request, user)\n</code></pre>\n\n<p>Now how can I have <code>authenticate</code> method from <code>MyRemoteUserBackend</code> be called in the above code snippet and what does the snippet mean by <code>somehow_create_an_instance_of</code> any suggestions on this would be great</p>\n"}, {"tags": ["python", "python-2.7", "wtforms", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5525180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-krQRKNkoDp4/AAAAAAAAAAI/AAAAAAAAAOY/YjVvr6_csAM/photo.jpg?sz=128", "display_name": "Greg Quinlan", "link": "https://stackoverflow.com/users/5525180/greg-quinlan"}, "edited": false, "score": 0, "creation_date": 1464819579, "post_id": 37579552, "comment_id": 62646313, "body": "I had unnecessarily mystified how the WTForm class worked. After reviewing the source of Flask-WTF and WTFrom, I was able to clarify that Flask-WTF&#39;s validate_on_submit() is simply Flask-WTF&#39;s is_submitted() and WTForm validate(). is_submitted() checks for the response and the POST or PUT method."}, {"owner": {"reputation": 101, "user_id": 5525180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-krQRKNkoDp4/AAAAAAAAAAI/AAAAAAAAAOY/YjVvr6_csAM/photo.jpg?sz=128", "display_name": "Greg Quinlan", "link": "https://stackoverflow.com/users/5525180/greg-quinlan"}, "edited": false, "score": 0, "creation_date": 1464819695, "post_id": 37579552, "comment_id": 62646352, "body": "I&#39;d appreciate input from a more expert user. Is putting the category into the form and then using the form as post data unnecessary? Thanks in advance."}, {"owner": {"reputation": 600, "user_id": 9691276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5tfX.jpg?s=128&g=1", "display_name": "malan88", "link": "https://stackoverflow.com/users/9691276/malan88"}, "edited": false, "score": 0, "creation_date": 1545501076, "post_id": 37579552, "comment_id": 94641513, "body": "I&#39;d also appreciate more input from expert users. I am about to start writing exactly these sort of tests, and my suspicion is that you do <i>not</i> need to use the actual form to create the <code>POST</code> data, but I can imagine it might make things <i>easier</i>. I am going to test this question out by simply printing the request <code>POST</code> data during a normal route use (i.e., adding <code>print(request.form)</code> to the actual route), but my suspicion is that it will just be contained in easily identifiable variables according to the WTForm variable naming conventions. Will report back after testing."}, {"owner": {"reputation": 600, "user_id": 9691276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5tfX.jpg?s=128&g=1", "display_name": "malan88", "link": "https://stackoverflow.com/users/9691276/malan88"}, "edited": false, "score": 0, "creation_date": 1545501392, "post_id": 37579552, "comment_id": 94641583, "body": "Premature report: The data in <code>request.form</code> is contained in an <code>ImmutableMultiDict</code>, an object with which I am not familiar but will read the documentation on. One thing I will note, however, is that the <code>csrf</code> token may present a challenge for not using the WTF form. Since you use the <code>validate_on_submit()</code> method I will assume that you <i>are</i> using the <code>csrf</code> token so I imagine that the token is already generated in the post data. Without the form, my suspicion is, you will not have a <code>csrf</code> token and you will not properly validate. Will investigate further."}, {"owner": {"reputation": 600, "user_id": 9691276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5tfX.jpg?s=128&g=1", "display_name": "malan88", "link": "https://stackoverflow.com/users/9691276/malan88"}, "edited": false, "score": 0, "creation_date": 1548283034, "post_id": 37579552, "comment_id": 95490746, "body": "Belated update: a regular dictionary works just fine. The CSRF token is an issue, but there are separate answers to that precise question (not all of the solutions always work)."}], "tags": [], "owner": {"reputation": 101, "user_id": 5525180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-krQRKNkoDp4/AAAAAAAAAAI/AAAAAAAAAOY/YjVvr6_csAM/photo.jpg?sz=128", "display_name": "Greg Quinlan", "link": "https://stackoverflow.com/users/5525180/greg-quinlan"}, "is_accepted": true, "score": 2, "last_activity_date": 1464818673, "creation_date": 1464818673, "answer_id": 37579552, "question_id": 37579411, "link": "https://stackoverflow.com/questions/37579411/testing-a-post-that-uses-flask-wtf-validate-on-submit/37579552#37579552", "title": "Testing a POST that uses Flask-WTF validate_on_submit", "body": "<p>Using py.test and a conftest.py recommended by <a href=\"http://alexmic.net/flask-sqlalchemy-pytest/\" rel=\"nofollow\">Delightful testing with pytest and SQLAlchemy</a>, here's a test that confirms the added category.</p>\n\n<pre><code>def test_add_category_post(app, session):\n    \"\"\"Does add category post a new category?\"\"\"\n    TESTEMAIL = \"test@test.org\"\n    TESTUSER = \"Joe Test\"\n    user = Users.query.filter(Users.email==TESTEMAIL).first()\n    category = Category(name=\"Added Category\", users_id=user.id)\n    form = CategoryForm(formdata=None, obj=category)\n    with app.test_client() as c:\n        with c.session_transaction() as sess:\n            sess['email'] = TESTEMAIL\n            sess['username'] = TESTUSER \n            sess['users_id'] = user.id\n            response = c.post(\n                '/category/add', data=form.data, follow_redirects=True)\n    assert response.status_code == 200\n    added_category = Category.query.filter(\n        Category.name==\"Added Category\").first()\n    assert added_category\n    session.delete(added_category)\n    session.commit()\n</code></pre>\n\n<p>Note that the new category is assigned to a variable and then used to create a form. The form's data is used in the post. </p>\n"}, {"tags": [], "owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "is_accepted": false, "score": 3, "last_activity_date": 1564864131, "creation_date": 1564864131, "answer_id": 57341875, "question_id": 37579411, "link": "https://stackoverflow.com/questions/37579411/testing-a-post-that-uses-flask-wtf-validate-on-submit/57341875#57341875", "title": "Testing a POST that uses Flask-WTF validate_on_submit", "body": "<p>You should have different configurations for your app, depending if you are local / in production / executing unit tests. One configuration you can set is</p>\n\n<pre><code>WTF_CSRF_ENABLED = False\n</code></pre>\n\n<p>See <a href=\"https://flask-wtf.readthedocs.io/en/stable/config.html\" rel=\"nofollow noreferrer\">flask-wtforms documentation</a>.</p>\n"}], "owner": {"reputation": 101, "user_id": 5525180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-krQRKNkoDp4/AAAAAAAAAAI/AAAAAAAAAOY/YjVvr6_csAM/photo.jpg?sz=128", "display_name": "Greg Quinlan", "link": "https://stackoverflow.com/users/5525180/greg-quinlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3334, "favorite_count": 0, "accepted_answer_id": 37579552, "answer_count": 2, "score": 8, "last_activity_date": 1564864131, "creation_date": 1464817957, "question_id": 37579411, "link": "https://stackoverflow.com/questions/37579411/testing-a-post-that-uses-flask-wtf-validate-on-submit", "title": "Testing a POST that uses Flask-WTF validate_on_submit", "body": "<p>I am stumped on testing a POST to add a category to the database where I've used Flask_WTF for validation and CSRF protection.  For the CRUD operations pm my website. I've used Flask, Flask_WTF and Flask-SQLAlchemy. It is my first independent project, and I find myself a little at a lost on how to test the Flask-WTForm validate_on_submit function.</p>\n\n<p>Here's are the models:</p>\n\n<pre><code>class Users(db.Model):\n    id = db.Column(db.Integer, primary_key=True, unique=True)\n    name = db.Column(db.String(80), nullable=False)\n    email = db.Column(db.String(250), unique=True)\n\nclass Category(db.Model):\n    id = db.Column(db.Integer, primary_key=True, unique=True)\n    name = db.Column(db.String(250), nullable=False, unique=True)\n    users_id = db.Column(db.Integer, db.ForeignKey('users.id'))\n</code></pre>\n\n<p>Here's the form:</p>\n\n<pre><code>class CategoryForm(Form):\n    name = StringField(\n        'Name', [validators.Length(min=4, max=250, message=\"name problem\")])\n</code></pre>\n\n<p>And here's the controller:</p>\n\n<pre><code>@category.route('/category/add', methods=['GET', 'POST'])\n@login_required\ndef addCategory():\n    \"\"\" Add a new category.\n        Returns: Redirect Home.\n    \"\"\"\n    # Initiate the form.\n    form = CategoryForm()\n    # On POST of a valid form, add the new category.\n    if form.validate_on_submit():\n        category = Category(\n            form.name.data, login_session['users_id'])\n        db.session.add(category)\n        db.session.commit()\n        flash('New Category %s Successfully Created' % category.name)\n        return redirect(url_for('category.showHome'))\n    else:\n        # Render the form to add the category.\n        return render_template('newCategory.html', form=form)\n</code></pre>\n\n<p>How do I write a test for the if statement with the validate_on_submit function?</p>\n"}, {"tags": ["python", "import", "python-import"], "comments": [{"owner": {"reputation": 501, "user_id": 3928560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b35683a49ac592d674344e400b93062d?s=128&d=identicon&r=PG&f=1", "display_name": "MartinP", "link": "https://stackoverflow.com/users/3928560/martinp"}, "edited": false, "score": 0, "creation_date": 1464818836, "post_id": 37579384, "comment_id": 62646014, "body": "I am not sure but maybe that help You: <a href=\"http://stackoverflow.com/questions/19876079/opencv-cannot-find-module-cv2\" title=\"opencv cannot find module cv2\">stackoverflow.com/questions/19876079/&hellip;</a>"}, {"owner": {"reputation": 4179, "user_id": 1611830, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f01b49db716cde6fbec9d43b1f15c0f1?s=128&d=identicon&r=PG", "display_name": "user1611830", "link": "https://stackoverflow.com/users/1611830/user1611830"}, "reply_to_user": {"reputation": 501, "user_id": 3928560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b35683a49ac592d674344e400b93062d?s=128&d=identicon&r=PG&f=1", "display_name": "MartinP", "link": "https://stackoverflow.com/users/3928560/martinp"}, "edited": false, "score": 0, "creation_date": 1464818973, "post_id": 37579384, "comment_id": 62646072, "body": "@MartinP thank you very much !!"}], "owner": {"reputation": 4179, "user_id": 1611830, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f01b49db716cde6fbec9d43b1f15c0f1?s=128&d=identicon&r=PG", "display_name": "user1611830", "link": "https://stackoverflow.com/users/1611830/user1611830"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5469, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464817866, "creation_date": 1464817866, "question_id": 37579384, "link": "https://stackoverflow.com/questions/37579384/importing-a-python-lib-with-an-so-file", "title": "importing a python lib with an so file", "body": "<p>I am new to <code>Python</code> and I have installed <code>OpenCV</code> library which ends with <code>cv2.so</code> file installed in <code>/usr/local/lib/python2.7/site-packages</code>. When I try to import this library in my code with <code>import cv2</code>, I get</p>\n\n<pre><code>ImportError: No module named cv2\n</code></pre>\n\n<p>How can I manage that </p>\n"}, {"tags": ["python", "sqlite", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2972, "user_id": 1951065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0248f7bae0b87311ebabc3f6c51b2154?s=128&d=identicon&r=PG", "display_name": "cd98", "link": "https://stackoverflow.com/users/1951065/cd98"}, "edited": false, "score": 0, "creation_date": 1464819192, "post_id": 37579444, "comment_id": 62646161, "body": "Oh, now I understand, thanks! Do you have a reference on how to define NTILE for sqlite? That would be helpful for the answer, I think"}, {"owner": {"reputation": 4316, "user_id": 6005451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5d2854ebcf1678d4fab4f7bedd6b9f?s=128&d=identicon&r=PG&f=1", "display_name": "EoinS", "link": "https://stackoverflow.com/users/6005451/eoins"}, "reply_to_user": {"reputation": 2972, "user_id": 1951065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0248f7bae0b87311ebabc3f6c51b2154?s=128&d=identicon&r=PG", "display_name": "cd98", "link": "https://stackoverflow.com/users/1951065/cd98"}, "edited": false, "score": 1, "creation_date": 1464821664, "post_id": 37579444, "comment_id": 62647017, "body": "@cd98 took me a minute to replicate, EDIT made with your alternative to NTILE()!"}], "tags": [], "owner": {"reputation": 4316, "user_id": 6005451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5d2854ebcf1678d4fab4f7bedd6b9f?s=128&d=identicon&r=PG&f=1", "display_name": "EoinS", "link": "https://stackoverflow.com/users/6005451/eoins"}, "is_accepted": true, "score": 2, "last_activity_date": 1464821636, "last_edit_date": 1464821636, "creation_date": 1464818116, "answer_id": 37579444, "question_id": 37579374, "link": "https://stackoverflow.com/questions/37579374/ntile-for-sqlite-from-pandas-gives-operational-error/37579444#37579444", "title": "NTILE for Sqlite from Pandas gives OPERATIONAL ERROR", "body": "<p>There is no <code>NTILE () OVER</code> functionality in SQLITE</p>\n\n<p>Gives me the same error, need to create this using more complex query or functions</p>\n\n<p><a href=\"http://www2.sqlite.org/cvstrac/wiki?p=UnsupportedSqlAnalyticalFunctions\" rel=\"nofollow\">Here is a list of unsupported analytical functions</a> not available in SQLITE</p>\n\n<p>NTILE is one of these</p>\n\n<p>The optimizer goes inside the query first to find <code>OVER</code>, which it thinks is a column name and does <em>not</em> expect <code>(</code> to follow a column name, so gives you this error.</p>\n\n<p>To replicate NTILE try this:</p>\n\n<pre><code>select * ,\ncase \n  when \n    (select count(*)+0.0 from marks_sql b where table.Marks &gt;= b.Marks)\n    /(select count(*) from marks_sql ) &gt;0.5 \n  then 1 \n  else 2 end\nfrom marks_sql;\n</code></pre>\n\n<p>In order to do this in such a way that the table can grow in size and this technique still applies we have do a few things:</p>\n\n<p>So first we order the table by <code>Marks</code> (essentially create a ranking).  This counts the rows with higher or equal <code>Marks</code>:</p>\n\n<pre><code>select count(*)+0.0 from marks_sql b where table.Marks &gt;= b.Marks  --rank of Mark\n</code></pre>\n\n<p>We add <code>0.0</code> to make this number a float so our fraction works in the next step.</p>\n\n<p>We then take the rank and divide it by the total row count</p>\n\n<pre><code>select count(*) from marks_sql -- row count\n</code></pre>\n\n<p>This gives us a distribution over the range of scores, the percentile for each Student.  But we do not care about each exact percentile, we care about the <code>NTILE(2)</code> or whether they are in the top half.  </p>\n\n<p>That is where the <code>CASE</code> statement comes into play.  If the percentile of the student is over 50% they fall in the #1 group, the top 50th percentile.  Everyone else falls in the #2 group.</p>\n"}], "owner": {"reputation": 2972, "user_id": 1951065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0248f7bae0b87311ebabc3f6c51b2154?s=128&d=identicon&r=PG", "display_name": "cd98", "link": "https://stackoverflow.com/users/1951065/cd98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 1, "accepted_answer_id": 37579444, "answer_count": 1, "score": 3, "last_activity_date": 1464821636, "creation_date": 1464817803, "question_id": 37579374, "link": "https://stackoverflow.com/questions/37579374/ntile-for-sqlite-from-pandas-gives-operational-error", "title": "NTILE for Sqlite from Pandas gives OPERATIONAL ERROR", "body": "<p>I'm trying to use the NTILE function for querying a SQLite database from pandas, but I haven't succeeded, even though I've rechecked the syntax many times.</p>\n\n<p>Self-contained example below.\nSetup:</p>\n\n<pre><code>import pandas as pd\nfrom sqlalchemy import create_engine\ndisk_engine = create_engine('sqlite:///test.db')\n\nmarks = pd.DataFrame({'StudentID': ['S1', 'S2', 'S3', 'S4', 'S5'],\n                      'Marks': [75, 83, 91, 83, 93]})\nmarks.to_sql('marks_sql', disk_engine, if_exists='replace')\n</code></pre>\n\n<p>Now try to use NTILE:</p>\n\n<pre><code>q = \"\"\"select StudentID, Marks, NTILE(2) OVER (ORDER BY Marks DESC)\n        AS groupexample FROM marks_sql\"\"\"\npd.read_sql_query(q, disk_engine)\n</code></pre>\n\n<p>The traceback is long, but it's main parts are:</p>\n\n<pre><code>OperationalError: near \"(\": syntax error\nOperationalError: (sqlite3.OperationalError) near \"(\": syntax error [SQL: 'select StudentID, Marks, NTILE(2) OVER (ORDER BY Marks DESC)\\n        AS groupexample FROM marks_sql']\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 1, "creation_date": 1464819167, "post_id": 37579284, "comment_id": 62646150, "body": "<code>barh</code> returns a list of <code>Rectangle</code>  artists which you can introspect."}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "reply_to_user": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1464874465, "post_id": 37579284, "comment_id": 62671579, "body": "When constructed with an axis as well?"}], "answers": [{"comments": [{"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1464873874, "post_id": 37579755, "comment_id": 62671118, "body": "TypeError: &#39;AxesSubplot&#39; object is not iterable (because I&#39;m plotting it with an axis): is there a way to do this with an axis?"}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": false, "score": 3, "last_activity_date": 1464819805, "creation_date": 1464819805, "answer_id": 37579755, "question_id": 37579284, "link": "https://stackoverflow.com/questions/37579284/matplotlib-get-coordinates-of-top-and-bottom-of-horizontal-bar-edges/37579755#37579755", "title": "Matplotlib get coordinates of top and bottom of horizontal bar edges", "body": "<p>Every bar is a Rectangle object:</p>\n\n<pre><code>br = plt.barh(y_pos, performance, xerr=error, align='center', alpha=0.4)\nfor b in br:\n    print b\n    w,h = b.get_width(), b.get_height()\n    # lower left vertex\n    x0, y0 = b.xy\n    # lower right vertex\n    x1, y1 = x0+w,y0\n    # top left vertex\n    x2, y2 = x0,y0+h\n    # top right vertex\n    x3, y3 = x0+w,y0+h\n    print (x0,y0), (x1,y1), (x2,y2), (x3,y3)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Rectangle(0,-0.4;10.9438x0.8)\n(0.0, -0.4) (10.943792845675922, -0.4) (0.0, 0.4) (10.943792845675922, 0.4)\nRectangle(0,0.6;3.87667x0.8)\n(0.0, 0.6) (3.8766706874993693, 0.6) (0.0, 1.4) (3.8766706874993693, 1.4)\nRectangle(0,1.6;6.13112x0.8)\n(0.0, 1.6) (6.131123295324526, 1.6) (0.0, 2.4000000000000004) (6.131123295324526, 2.4000000000000004)\nRectangle(0,2.6;10.875x0.8)\n(0.0, 2.6) (10.875021819863152, 2.6) (0.0, 3.4000000000000004) (10.875021819863152, 3.4000000000000004)\nRectangle(0,3.6;10.9706x0.8)\n(0.0, 3.6) (10.970580117194409, 3.6) (0.0, 4.4) (10.970580117194409, 4.4)\n</code></pre>\n"}], "owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2281, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1498829291, "creation_date": 1464817322, "last_edit_date": 1498829291, "question_id": 37579284, "link": "https://stackoverflow.com/questions/37579284/matplotlib-get-coordinates-of-top-and-bottom-of-horizontal-bar-edges", "title": "Matplotlib get coordinates of top and bottom of horizontal bar edges", "body": "<p>Given this sample horizontal bar chart:</p>\n\n<pre><code>\"\"\"\nSimple demo of a horizontal bar chart.\n\"\"\"\nimport matplotlib.pyplot as plt\nplt.rcdefaults()\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n\n# Example data\npeople = ('Tom', 'Dick', 'Harry', 'Slim', 'Jim')\ny_pos = np.arange(len(people))\nperformance = 3 + 10 * np.random.rand(len(people))\nerror = np.random.rand(len(people))\n\nplt.barh(y_pos, performance, xerr=error, align='center', alpha=0.4)\nplt.yticks(y_pos, people)\nplt.xlabel('Performance')\nplt.title('How fast do you want to go today?')\n\nplt.show()\n</code></pre>\n\n<p>How can I get the y coordinates of the top edge of the top bar and the bottom edge of the bottom bar (assume the bar chart is actually an axis, like this: ax.barh...).</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "pip", "python-bob"], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "edited": false, "score": 0, "creation_date": 1464819685, "post_id": 37579708, "comment_id": 62646347, "body": "I have tried that without any success, every dependence is installed successfully except for Bob . measure"}, {"owner": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "edited": false, "score": 0, "creation_date": 1464820227, "post_id": 37579708, "comment_id": 62646527, "body": "None,  only Bob. Measure"}, {"owner": {"reputation": 349, "user_id": 1291418, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0IbbL.jpg?s=128&g=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/1291418/vivek"}, "reply_to_user": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "edited": false, "score": 0, "creation_date": 1464827172, "post_id": 37579708, "comment_id": 62648549, "body": "@user3025898 use pip3 install bob.measure. It works. If you have dependencies then install them using my answer"}, {"owner": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "edited": false, "score": 0, "creation_date": 1464867934, "post_id": 37579708, "comment_id": 62666613, "body": "PIP 3 is for python3 I am using python 2"}, {"owner": {"reputation": 349, "user_id": 1291418, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0IbbL.jpg?s=128&g=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/1291418/vivek"}, "reply_to_user": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "edited": false, "score": 0, "creation_date": 1464878349, "post_id": 37579708, "comment_id": 62674832, "body": "The error you are getting is from old netlib library. you should upgrade your python or can have both python2 and python3 together as well"}, {"owner": {"reputation": 3859, "user_id": 1007877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVGNK.png?s=128&g=1", "display_name": "vimdude", "link": "https://stackoverflow.com/users/1007877/vimdude"}, "edited": false, "score": 0, "creation_date": 1478270132, "post_id": 37579708, "comment_id": 68098858, "body": "apt-get install python3-pip"}], "tags": [], "owner": {"reputation": 349, "user_id": 1291418, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0IbbL.jpg?s=128&g=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/1291418/vivek"}, "is_accepted": false, "score": 0, "last_activity_date": 1464826055, "last_edit_date": 1464826055, "creation_date": 1464819613, "answer_id": 37579708, "question_id": 37579280, "link": "https://stackoverflow.com/questions/37579280/cannot-install-bob-measure-python-package/37579708#37579708", "title": "Cannot install bob.measure python package", "body": "<p>Install dependencies on Ubuntu:</p>\n\n<pre><code>sudo apt-get install libboost-all-dev\nsudo apt-get install libblitz0-dev\nsudo apt-get install cmake\nsudo apt-get install libhdf5-serial-dev\nsudo apt-get install libtiff5\nsudo apt-get install libtiff5-dev\nsudo apt-get install libtiff-tools\nsudo apt-get install giflib-dbg\n</code></pre>\n\n<p>Try installing using pip</p>\n\n<pre><code>$ pip install numpy\n$ pip install bob.extension\n$ pip install bob.blitz\n$ pip install bob.core\n$ pip install bob.io.base\n$ pip install bob.io.image\n</code></pre>\n\n<p>Install bob.measure  </p>\n\n<p>Install following dependencies if not present</p>\n\n<pre><code>sudo apt-get install libopenblas-dev\nsudo apt-get  install libcppnetlib-dev\nsudo apt-get  install python-netlib\napt-get install libfreetype6-dev\n</code></pre>\n\n<p>Use pip3</p>\n\n<pre><code>sudo pip3 install bob.measure\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "is_accepted": false, "score": 0, "last_activity_date": 1464868071, "creation_date": 1464868071, "answer_id": 37590990, "question_id": 37579280, "link": "https://stackoverflow.com/questions/37579280/cannot-install-bob-measure-python-package/37590990#37590990", "title": "Cannot install bob.measure python package", "body": "<p>Solution:</p>\n\n<p>Remove all bob packages, such as:</p>\n\n<pre><code>$ pip install numpy\n$ pip install bob.extension\n$ pip install bob.blitz\n$ pip install bob.core\n$ pip install bob.io.base\n$ pip install bob.io.image\n</code></pre>\n\n<p>Do not remove installed dependencies.</p>\n\n<p>then re-install bob with:</p>\n\n<pre><code>$ sudo apt-get install python-software-properties #to install \"add-apt-repository\"\n$ sudo add-apt-repository ppa:biometrics/bob #only the first time\n$ sudo apt-get update #repeat this every time you need to update\n$ sudo apt-get install bob\n</code></pre>\n\n<p>from: <a href=\"https://github.com/idiap/bob/wiki/Binary-Installation\" rel=\"nofollow\">https://github.com/idiap/bob/wiki/Binary-Installation</a></p>\n"}], "owner": {"reputation": 483, "user_id": 3025898, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/441c7887fb68457fea236d45ff0a0ba9?s=128&d=identicon&r=PG&f=1", "display_name": "user3025898", "link": "https://stackoverflow.com/users/3025898/user3025898"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2141, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524746620, "creation_date": 1464817310, "last_edit_date": 1524746620, "question_id": 37579280, "link": "https://stackoverflow.com/questions/37579280/cannot-install-bob-measure-python-package", "title": "Cannot install bob.measure python package", "body": "<p>I have installed all the dependencies of bob.measure according to the graph presented in <a href=\"https://github.com/idiap/bob/wiki/Dependencies\" rel=\"nofollow\">https://github.com/idiap/bob/wiki/Dependencies</a> and <a href=\"https://github.com/idiap/bob/wiki/Installation\" rel=\"nofollow\">https://github.com/idiap/bob/wiki/Installation</a>:</p>\n\n<p>However, I cannot install the package this is the traceback:</p>\n\n<pre><code>omar@ubuntuv2:~/bob.measure$ sudo python setup.py \nTraceback (most recent call last):\n  File \"setup.py\", line 50, in &lt;module&gt;\n    boost_modules = boost_modules,\n  File \"/usr/local/lib/python2.7/dist-packages/bob/blitz/extension.py\", line 52, in __init__\n    BobExtension.__init__(self, *args, **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/bob/extension/__init__.py\", line 294, in __init__\n    bob_includes, bob_libraries, bob_library_dirs, bob_macros = get_bob_libraries(self.bob_packages)\n  File \"/usr/local/lib/python2.7/dist-packages/bob/extension/__init__.py\", line 186, in get_bob_libraries\n    pkg = importlib.import_module(package)\n  File \"/usr/lib/python2.7/importlib/__init__.py\", line 37, in import_module\n    __import__(name)\n  File \"/usr/local/lib/python2.7/dist-packages/bob/math/__init__.py\", line 6, in &lt;module&gt;\n    bob.extension.load_bob_library('bob.math', __file__)\n  File \"/usr/local/lib/python2.7/dist-packages/bob/extension/__init__.py\", line 237, in load_bob_library\n    ctypes.cdll.LoadLibrary(full_libname)\n  File \"/usr/lib/python2.7/ctypes/__init__.py\", line 443, in LoadLibrary\n    return self._dlltype(name)\n  File \"/usr/lib/python2.7/ctypes/__init__.py\", line 365, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: /usr/local/lib/python2.7/dist-packages/bob/math/libbob_math.so: undefined symbol: dsyevd_\n</code></pre>\n\n<p>All the bob.measure dependencies are up to date.\nI have an Ubuntu 14.04 system.</p>\n"}, {"tags": ["python", "python-multiprocessing"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1464817773, "post_id": 37579261, "comment_id": 62645628, "body": "Why is this at all surprising? You don&#39;t wait for any of your processes to do anything, and nothing about this output suggests that A&#39;s termination is early."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 2, "creation_date": 1464818059, "post_id": 37579261, "comment_id": 62645729, "body": "Perhaps you&#39;ve missed the point of running processes or threads. They run parallel to the main thread/process, so your code continues to move forward. Use <code>.join()</code> if you want to wait for the process to finish (in this case never)."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1464818960, "post_id": 37579261, "comment_id": 62646069, "body": "Are you trying to <i>wait</i> for a Ctrl-C?"}, {"owner": {"reputation": 499, "user_id": 5721839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-cqGkX2ngzTQ/AAAAAAAAAAI/AAAAAAAAAQM/y9k8pJDMNF4/photo.jpg?sz=128", "display_name": "Sean McVeigh", "link": "https://stackoverflow.com/users/5721839/sean-mcveigh"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464819046, "post_id": 37579261, "comment_id": 62646105, "body": "@user2357112 Yes, I&#39;d like to run all processes until some event or interupt"}], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": false, "score": 3, "last_activity_date": 1464817820, "creation_date": 1464817820, "answer_id": 37579379, "question_id": 37579261, "link": "https://stackoverflow.com/questions/37579261/please-explain-this-early-termination-of-multiprocess-process-subclass/37579379#37579379", "title": "Please explain this early termination of multiprocess.Process subclass?", "body": "<p>It's unclear to me what you expect this to do.  After starting the processes, the code immediately enters the <code>finally:</code> block and explicitly terminates all of them.  So of course they stop.</p>\n\n<p>As to why only \"A\" says it's alive, that may vary across platforms (OS).  Your <code>run()</code> method is just a \"busy loop\", printing as fast as possible non-stop.  The processes are killed so soon after starting them that it looks like, on <em>your</em> platform, the OS never got around to scheduling a time slice for the other processes before you terminated them.</p>\n\n<p>Try, e.g., sticking a <code>time.sleep(10)</code> after the loop that starts the processes.  That will delay killing the processes for 10 seconds, and that's probably enough time for <code>B</code> and <code>C</code> to get some love ;-) from the operating system before they're killed.</p>\n"}], "owner": {"reputation": 499, "user_id": 5721839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-cqGkX2ngzTQ/AAAAAAAAAAI/AAAAAAAAAQM/y9k8pJDMNF4/photo.jpg?sz=128", "display_name": "Sean McVeigh", "link": "https://stackoverflow.com/users/5721839/sean-mcveigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464818884, "creation_date": 1464817211, "last_edit_date": 1464818884, "question_id": 37579261, "link": "https://stackoverflow.com/questions/37579261/please-explain-this-early-termination-of-multiprocess-process-subclass", "title": "Please explain this early termination of multiprocess.Process subclass?", "body": "<p>I have the following test code subclassing Process from <a href=\"https://docs.python.org/3.5/library/multiprocessing.html\" rel=\"nofollow\">multiprocessing</a>:</p>\n\n<pre><code>import multiprocessing as mp\n\nclass TestProcess(mp.Process):\n    def __init__(self,name):\n        super().__init__()\n        self.name = name\n\n    def run(self):\n        while True:\n            print('{} says \"I am alive\"'.format(self.name))\n\nif __name__ == \"__main__\" :\n\n    procs = [TestProcess(i) for i in list('ABC')]\n\n    try:\n        for p in procs:\n            print('starting {}'.format(p.name))\n            p.start()\n    except KeyboardInterrupt:\n        print('caught interrupt')\n    except Exception as e:\n        print(str(e))\n    finally:\n        for p in procs:\n            print('stopping {}'.format(p.name))\n            p.terminate()\n</code></pre>\n\n<p>for some reason A terminates early without ever sending <kbd>ctrl</kbd> + <kbd>c</kbd> and process B and C never seem to run:</p>\n\n<pre><code>host:~ user$ python process_example.py\n    starting A\n    starting B\n    starting C\n    A says \"I am alive\"\n    [... x 16 lines]\n    A says \"I am alistopping A\n    stopping B\n    stopping C\n</code></pre>\n\n<p>If anyone can explain this, I'd greatly appreciate it.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Thanks all for the prompt responses; I've updated to the following:</p>\n\n<pre><code>import time\nimport multiprocessing as mp\n\nclass TestProcess(mp.Process):\n    def __init__(self,name):\n        super().__init__()\n        self.name = name\n\n    def run(self):\n        while True:\n            print('{} says \"I am alive\"'.format(self.name))\n            time.sleep(1)\n\nif __name__ == \"__main__\" :\n\n    procs = [TestProcess(i) for i in list('ABC')]\n\n    try:\n        for p in procs :\n            print('starting {}'.format(p.name))\n            p.start()\n        for p in procs :\n            print('joining {}'.format(p.name))\n            p.join()\n    except KeyboardInterrupt:\n        print('caught interrupt')\n    except Exception as e:\n        print(str(e))\n    finally:\n        for p in procs :\n            print('stopping {}'.format(p.name))\n            p.terminate()\n</code></pre>\n\n<p>Now I get:</p>\n\n<pre><code>host:~ user$ python process_example.py\nstarting A\nstarting B\nstarting C\nA says \"I am alive\"\njoining A\nB says \"I am alive\"\nC says \"I am alive\"\nA says \"I am alive\"\nB says \"I am alive\"\nC says \"I am alive\"\nA says \"I am alive\"\nB says \"I am alive\"\nC says \"I am alive\"\nA says \"I am alive\"\nB says \"I am alive\"\nC says \"I am alive\"\nA says \"I am alive\"\nB says \"I am alive\"\nC says \"I am alive\"\nB says \"I am alive\"\nA says \"I am alive\"\nC says \"I am alive\"\n^Ccaught interrupt\nstopping A\nstopping B\nstopping C\n</code></pre>\n\n<p>So only joining one thread is necessary?</p>\n"}, {"tags": ["python", "google-app-engine", "google-api-python-client", "stackdriver", "google-cloud-monitoring"], "comments": [{"owner": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "edited": false, "score": 0, "creation_date": 1465037561, "post_id": 37579213, "comment_id": 62740502, "body": "Your error is saying it&#39;s a badly formatted request.  Looking at the <a href=\"https://cloud.google.com/trace/api/reference/rest/v1/projects/patchTraces#traces\" rel=\"nofollow noreferrer\">formal definition</a> of the JSON request, there are constraints on the data, which the sample you linked to does not satisfy.  Have you tried setting feild values that exactly match the specification?  If so, what does your request look like and what error did you get?"}], "answers": [{"comments": [{"owner": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "edited": false, "score": 0, "creation_date": 1465409876, "post_id": 37708994, "comment_id": 62893962, "body": "After installing everything to get that example to work, I get errors, saying that the trace API hasn&#39;t been enabled. However, the project_id that it gives is for that project doesn&#39;t belong to me. Regardless of which project_id I provide or whether I provide the name or numeric id, it always fails referencing #32555940559: NetworkError(code=StatusCode.PERMISSION_DENIED, details=&quot;Stackdriver Trace API has not been used in project 32555940559 before or it is disabled. Enable it by visiting <a href=\"https://console.developers.google.com/apis/api/cloudtrace/overview?project=32555940559\" rel=\"nofollow noreferrer\">console.developers.google.com/apis/api/cloudtrace/&hellip;</a> then retry."}, {"owner": {"reputation": 31, "user_id": 6441650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0416891f36d05e9a2f66540dae4a7f1?s=128&d=identicon&r=PG&f=1", "display_name": "user6441650", "link": "https://stackoverflow.com/users/6441650/user6441650"}, "reply_to_user": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "edited": false, "score": 0, "creation_date": 1465443696, "post_id": 37708994, "comment_id": 62905978, "body": "That is an error you will get if you run <code>gcloud login</code> instead of <code>gcloud beta auth application-default login</code>. Please follow the instructions on the readme file, specifically step #2"}, {"owner": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "edited": false, "score": 1, "creation_date": 1465513233, "post_id": 37708994, "comment_id": 62945989, "body": "I managed to get the demo running - the missing install of gax_google_devtools_cloudtrace_v1 took care of the issue. I&#39;m now trying to get the example working from within the appengine environment, and I&#39;m back to an exception on: &quot;from grpc.beta import implementations:&quot; &quot;ImportError: No module named beta&quot; (This is having done a pip install -t lib for gax_google_devtools_cloudtrace_v1, grpc, and grpcio, and adding lib to the appenginge_config.py&#39;s vendors."}, {"owner": {"reputation": 31, "user_id": 6441650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0416891f36d05e9a2f66540dae4a7f1?s=128&d=identicon&r=PG&f=1", "display_name": "user6441650", "link": "https://stackoverflow.com/users/6441650/user6441650"}, "reply_to_user": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "edited": false, "score": 0, "creation_date": 1465603432, "post_id": 37708994, "comment_id": 62986701, "body": "gRPC on GAE is not supported yet. Google is working on it. But for your purpose, you do not need to use gRPC, use json and urlfetch like your original solution should work, now that you fixed the data problem."}, {"owner": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "edited": false, "score": 0, "creation_date": 1465838785, "post_id": 37708994, "comment_id": 63057531, "body": "See the &quot;Second Update,&quot; above. Regardless of what Json I use, the original solution receives errors."}, {"owner": {"reputation": 31, "user_id": 6441650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0416891f36d05e9a2f66540dae4a7f1?s=128&d=identicon&r=PG&f=1", "display_name": "user6441650", "link": "https://stackoverflow.com/users/6441650/user6441650"}, "reply_to_user": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "edited": false, "score": 0, "creation_date": 1467101675, "post_id": 37708994, "comment_id": 63578871, "body": "The error in your second update is because: 1) you used 0 for span id, that is not valid. 2) you put span_id in a separate span object than the one you wanted to put it in. Hence you ended up having 2 span objects, one without span_id, one with only span_id, which is invalid."}], "tags": [], "owner": {"reputation": 31, "user_id": 6441650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0416891f36d05e9a2f66540dae4a7f1?s=128&d=identicon&r=PG&f=1", "display_name": "user6441650", "link": "https://stackoverflow.com/users/6441650/user6441650"}, "is_accepted": false, "score": 2, "last_activity_date": 1465443961, "last_edit_date": 1465443961, "creation_date": 1465406425, "answer_id": 37708994, "question_id": 37579213, "link": "https://stackoverflow.com/questions/37579213/in-python-communicating-with-stackdriver-always-returns-success-doesnt-send-a/37708994#37708994", "title": "In python, communicating with stackdriver always returns success, doesn&#39;t send anything", "body": "<p>The issue is in the format of your data. You can not send empty messages either. The best way to explore how to use the API is to go to the StackDriver Trace API explorer, you will find out the exact data structure to send:\n<a href=\"https://cloud.google.com/trace/api/reference/rest/v1/projects/patchTraces#traces\" rel=\"nofollow\">https://cloud.google.com/trace/api/reference/rest/v1/projects/patchTraces#traces</a></p>\n\n<p>Pay special attention to the format of traceId. It needs to be 32 character hex string like this:  7d9d1a6e2d1f3f27484992f33d97e5cb</p>\n\n<p>Here is a working python example to show how to use the 3 methods on StackDriver trace on github: <a href=\"https://github.com/qike/cloud-trace-samples-python\" rel=\"nofollow\">https://github.com/qike/cloud-trace-samples-python</a></p>\n\n<p>Copy paste code below:</p>\n\n<pre><code>\n\ndef list_traces(stub, project_id):\n    \"\"\"Lists traces in the given project.\"\"\"\n    trace_id = None\n    req = trace_pb2.ListTracesRequest(project_id=project_id)\n    try:\n        resp = stub.ListTraces(req, TIMEOUT)\n        for t in resp.traces:\n            trace_id = t.trace_id\n            print(\"Trace is: {}\".format(t.trace_id))\n    except NetworkError, e:\n        logging.warning('Failed to list traces: {}'.format(e))\n        sys.exit(1)\n    return trace_id\n\n\ndef patch_traces(stub, project_id):\n    req = trace_pb2.PatchTracesRequest(project_id=project_id)\n    trace_id = str(uuid.uuid1()).replace('-', '')\n    now = time.time()\n\n    trace = req.traces.traces.add()\n    trace.project_id = project_id\n    trace.trace_id = trace_id\n    span1 = trace.spans.add()\n    span1.span_id = 1\n    span1.name = \"/span1.{}\".format(trace_id)\n    span1.start_time.seconds = int(now)-10\n    span1.end_time.seconds = int(now)\n\n    span2 = trace.spans.add()\n    span2.span_id = 2\n    span2.name = \"/span2\"\n    span2.start_time.seconds = int(now)-8\n    span2.end_time.seconds = int(now)-5\n\n    try:\n        resp = stub.PatchTraces(req, TIMEOUT)\n        print(\"Trace added successfully.\\n\"\n              \"To view list of traces, go to: \"\n              \"http://console.cloud.google.com/traces/traces?project={}&tr=2\\n\"\n              \"To view this trace added, go to: \"\n              \"http://console.cloud.google.com/traces/details/{}?project={}\"\n              .format(project_id, trace_id, project_id))\n    except NetworkError, e:\n        logging.warning('Failed to patch traces: {}'.format(e))\n        sys.exit(1)\n\n\ndef get_trace(stub, project_id, trace_id):\n    req = trace_pb2.GetTraceRequest(project_id=project_id,\n                                    trace_id=trace_id)\n    try:\n        resp = stub.GetTrace(req, TIMEOUT)\n        print(\"Trace retrieved: {}\".format(resp))\n    except NetworkError, e:\n        logging.warning('Failed to get trace: {}'.format(e))\n        sys.exit(1)\n\n</code></pre>\n\n<p><b>UPDATED to answer error received from API explorer</b></p>\n\n<p>Regarding the errors you got from using API explorer, it was due to using 0 as span_id. It should be a 64 bit int other than 0.</p>\n\n<p>I also observed that the span_id you set is in a different span object than the one you intended. Make sure you don't by mistake clicking on a \"+\" sign to add a new span object.</p>\n\n<p>Below is a successful patch request I sent to my project through API explorer:</p>\n\n<pre><code>{\n \"traces\": [\n  {\n   \"projectId\": \"&lt;project ID&gt;\",  // I used string ID, not numeric number\n   \"traceId\": \"1234123412341234aaaabb3412347891\",\n   \"spans\": [\n    {\n     \"spanId\": \"1\",\n     \"name\": \"foo\",\n     \"startTime\": \"2016-06-01T05:01:23.045123456Z\",\n     \"endTime\": \"2016-06-01T05:01:25.045123456Z\"\n    }\n   ]\n  }\n ]\n}\nResponse\n\n200\n</code></pre>\n"}], "owner": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1466024517, "creation_date": 1464817008, "last_edit_date": 1466024517, "question_id": 37579213, "link": "https://stackoverflow.com/questions/37579213/in-python-communicating-with-stackdriver-always-returns-success-doesnt-send-a", "title": "In python, communicating with stackdriver always returns success, doesn&#39;t send anything", "body": "<p>For some inexplicable reason, google provides no stackdriver api for appengine, so I'm stuck implementing one. No worries - I thought - I have already worked with the API builder to talk to bigquery, so I built up a client and started trying to send events:</p>\n\n<pre><code>credentials = SignedJwtAssertionCredentials(STACKDRIVER_AUTH_GOOGLE_CLIENT_EMAIL,\n                                            STACKDRIVER_AUTH_GOOGLE_PRIVATE_KEY,\n                                            scope='https://www.googleapis.com/auth/trace.append')\n\nhttp = httplib2.Http()\ncredentials.refresh(http) #Working around an oauth2client bug\ncredentials = credentials.authorize(http)\nservice = build('cloudtrace', 'v1', http=http)\nbatch = service.new_batch_http_request()\nbatch.add(service.projects().patchTraces(\n        body=traces_json,\n        projectId=STACKDRIVER_AUTH_GOOGLE_PROJECT_ID))\nprint batch.execute()\n</code></pre>\n\n<p>I left out the definition of traces_json because no matter what I send, the service always responds with an error. If traces_json = '{}':</p>\n\n<pre><code>{u'error': {u'code': 400,\n            u'errors': [{u'domain': u'global',\n                         u'message': u'Invalid value at \\'traces\\' (type.googleapis.com/google.devtools.cloudtrace.v1.Traces), \"{}\"',\n                         u'reason': u'badRequest'}],\n            u'message': u'Invalid value at \\'traces\\' (type.googleapis.com/google.devtools.cloudtrace.v1.Traces), \"{}\"',\n            u'status': u'INVALID_ARGUMENT'}}\n</code></pre>\n\n<p>But even if I use a body, crafted from the google <a href=\"https://developers.google.com/resources/api-libraries/documentation/cloudtrace/v1/python/latest/cloudtrace_v1.projects.html\" rel=\"nofollow noreferrer\">documentation</a>, I still get the same error.</p>\n\n<p>I'm running a packet sniffer on the machine where I'm attempting this, and only very rarely see it actually communicating with googleapis.com.</p>\n\n<p>So the question is, really, what am I missing that will get me sending events to stackdriver?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here's the most recent iteration of what I'd been working with, though using the google doc example verbatim (with the exception of changing the project id) produces the same result.</p>\n\n<pre><code>{\n    \"traces\": [\n        {\n            \"projectId\": \"projectname\",\n            \"traceId\": \"1234123412341234aaaabb3412347890\",\n            \"spans\": [\n                {\n                    \"kind\": \"RPC_SERVER\",\n                    \"name\": \"trace_name\",\n                    \"labels\": {\"label1\": \"value1\", \"label2\": \"value2\"},\n                    \"spanId\": \"spanId1\",\n                    \"startTime\": \"2016-06-01T05:01:23.045123456Z\",\n                    \"endTime\": \"2016-06-01T05:01:23.945123456Z\",\n                },\n            ],\n        },\n    ],\n}\n</code></pre>\n\n<p>And the error message that comes with it:</p>\n\n<pre><code>{u'error': {u'code': 400,\n            u'errors': [{u'domain': u'global',\n                         u'message': u'Invalid value at \\'traces\\' (type.googleapis.com/google.devtools.cloudtrace.v1.Traces), \"MY ENTIRE JSON IS REPEATED HERE\"',\n                         u'reason': u'badRequest'}],\n            u'message': u'Invalid value at \\'traces\\' (type.googleapis.com/google.devtools.cloudtrace.v1.Traces), \"MY ENTIRE JSON IS REPEATED HERE\"',\n            u'status': u'INVALID_ARGUMENT'}}\n</code></pre>\n\n<p><strong>SECOND UPDATE</strong></p>\n\n<p>Doing this in the explorer produces approximately the same result. I had to switch to a numeric span_id because, despite the docs' statement that it only has to be a unique string, I get errors about requiring what appears to be a 64-bit integer, any time I provide anything else.</p>\n\n<pre><code>PATCH https://cloudtrace.googleapis.com/v1/projects/[number or name]/traces?key={YOUR_API_KEY}\n{\n \"traces\": [\n  {\n   \"projectId\": \"[number or name]\",\n   \"traceId\": \"1234123412341234aaaabb3412347891\",\n   \"spans\": [\n    {\n     \"kind\": \"RPC_SERVER\",\n     \"name\": \"trace_name\",\n     \"labels\": {\n      \"label1\": \"value1\"\n     },\n     \"startTime\": \"2016-06-01T05:01:23.045123456Z\",\n     \"endTime\": \"2016-06-01T05:01:25.045123456Z\"\n    },\n    {\n     \"spanId\": \"0\"\n    }\n   ]\n  }\n ]\n}\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>{\n \"error\": {\n  \"code\": 400,\n  \"message\": \"Request contains an invalid argument.\",\n  \"status\": \"INVALID_ARGUMENT\"\n }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oMLt5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oMLt5.png\" alt=\"Traces definition from the API &quot;Try It!&quot; page\"></a></p>\n"}, {"tags": ["python", "django", "installation"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5161318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lWMLtRP77nA/AAAAAAAAAAI/AAAAAAAAABM/XfxHDrR7Mto/photo.jpg?sz=128", "display_name": "Alexander Arnold", "link": "https://stackoverflow.com/users/5161318/alexander-arnold"}, "is_accepted": false, "score": 2, "last_activity_date": 1464816571, "creation_date": 1464816571, "answer_id": 37579097, "question_id": 37579042, "link": "https://stackoverflow.com/questions/37579042/after-installing-django-in-virtual-environment-still-cant-import-module/37579097#37579097", "title": "After installing django in virtual environment, still can&#39;t import module", "body": "<p>Original poster here.</p>\n\n<p>I installed django using pip so it was in the python 2.7 binaries while i was working with python 3.5. </p>\n\n<p>Using pip3 install django solved it.</p>\n"}], "owner": {"reputation": 41, "user_id": 5161318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lWMLtRP77nA/AAAAAAAAAAI/AAAAAAAAABM/XfxHDrR7Mto/photo.jpg?sz=128", "display_name": "Alexander Arnold", "link": "https://stackoverflow.com/users/5161318/alexander-arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1527866347, "creation_date": 1464816327, "last_edit_date": 1527866347, "question_id": 37579042, "link": "https://stackoverflow.com/questions/37579042/after-installing-django-in-virtual-environment-still-cant-import-module", "title": "After installing django in virtual environment, still can&#39;t import module", "body": "<p>I am trying to use django for web dev, but after I install it, I try to use import it in the interpreter and it says it gives me an import error. Here is what I do.</p>\n\n<pre><code>virtualenv venv --distribute\nsource venv/bin/activate\n</code></pre>\n\n<p>so now I am in the virtual environment (venv)</p>\n\n<pre><code>pip install django\npython\nimport django\n</code></pre>\n\n<p>Then I get an ImportError</p>\n\n<pre><code>&gt;&gt;&gt; import django\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'django'\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "numpy", "scipy", "statistics"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1464838868, "post_id": 37579036, "comment_id": 62650963, "body": "<i>&quot;... due to the size of the real data arrays and memory constraints.&quot;</i> Please give a typical size of the array and the actual memory constraints."}], "answers": [{"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 5, "last_activity_date": 1464839115, "last_edit_date": 1464839115, "creation_date": 1464838682, "answer_id": 37582209, "question_id": 37579036, "link": "https://stackoverflow.com/questions/37579036/accelerating-one-to-many-correlation-calculations-in-python/37582209#37582209", "title": "Accelerating one-to-many correlation calculations in Python", "body": "<p>The module <a href=\"http://docs.scipy.org/doc/scipy/reference/spatial.distance.html\" rel=\"noreferrer\"><code>scipy.spatial.distance</code></a> implements the \"correlation distance\", which is simply one minus the correlation cofficient.  You can use the function <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html\" rel=\"noreferrer\"><code>cdist</code></a> to compute the one-to-many distances, and get the correlation coefficients by subtracting the result from 1.</p>\n\n<p>Here's a modified version of your script that includes the calculation of the correlation coefficients using <code>cdist</code>:</p>\n\n<pre><code>import numpy as np\nimport scipy.stats as sps\nfrom scipy.spatial.distance import cdist\n\nnp.random.seed(0)\n\ndef correlateOneWithMany(one, many):\n    \"\"\"Return Pearson's correlation coef of 'one' with each row of 'many'.\"\"\"\n    pr_arr = np.zeros((many.shape[0], 2), dtype=np.float64)\n    pr_arr[:] = np.nan\n    for row_num in np.arange(many.shape[0]):\n        pr_arr[row_num, :] = sps.pearsonr(one, many[row_num, :])\n    return pr_arr\n\nobs, varz = 10 ** 3, 500\nX = np.random.uniform(size=(obs, varz))\n\npr = correlateOneWithMany(X[0, :], X)\n\nc = 1 - cdist(X[0:1, :], X, metric='correlation')[0]\n\nprint(np.allclose(c, pr[:, 0]))\n</code></pre>\n\n<p>Timing:</p>\n\n<pre><code>In [133]: %timeit correlateOneWithMany(X[0, :], X)\n10 loops, best of 3: 37.7 ms per loop\n\nIn [134]: %timeit 1 - cdist(X[0:1, :], X, metric='correlation')[0]\n1000 loops, best of 3: 1.11 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 719469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a08652e7d1d1aa3e9cf1fbfe8929d50?s=128&d=identicon&r=PG", "display_name": "dewarrn1", "link": "https://stackoverflow.com/users/719469/dewarrn1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 37582209, "answer_count": 1, "score": 5, "last_activity_date": 1464839115, "creation_date": 1464816296, "question_id": 37579036, "link": "https://stackoverflow.com/questions/37579036/accelerating-one-to-many-correlation-calculations-in-python", "title": "Accelerating one-to-many correlation calculations in Python", "body": "<p>I'd like to calculate the Pearson's correlation coefficient between a vector and each row of an array in Python (numpy and or scipy are assumed).  Use of standard correlation matrix calculation functions will not be possible due to the size of the real data arrays and memory constraints.  Here's my naive implementation: </p>\n\n<pre><code>import numpy as np\nimport scipy.stats as sps\n\nnp.random.seed(0)\n\ndef correlateOneWithMany(one, many):\n    \"\"\"Return Pearson's correlation coef of 'one' with each row of 'many'.\"\"\"\n    pr_arr = np.zeros((many.shape[0], 2), dtype=np.float64)\n    pr_arr[:] = np.nan\n    for row_num in np.arange(many.shape[0]):\n        pr_arr[row_num, :] = sps.pearsonr(one, many[row_num, :])\n    return pr_arr\n\nobs, varz = 10 ** 3, 500\nX = np.random.uniform(size=(obs, varz))\n\npr = correlateOneWithMany(X[0, :], X)\n\n%timeit correlateOneWithMany(X[0, :], X)\n# 10 loops, best of 3: 38.9 ms per loop\n</code></pre>\n\n<p>Any thoughts on accelerating this would be greatly appreciated!</p>\n"}, {"tags": ["python", "sql", "oracle"], "comments": [{"owner": {"reputation": 32143, "user_id": 4955425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0RDl.jpg?s=128&g=1", "display_name": "sstan", "link": "https://stackoverflow.com/users/4955425/sstan"}, "edited": false, "score": 0, "creation_date": 1464816698, "post_id": 37578985, "comment_id": 62645187, "body": "You would use Oracle&#39;s export/import tools for that.  You can google it for more info."}, {"owner": {"reputation": 32256, "user_id": 2568341, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/00f2307dd5844ae534b79c218bb60fff?s=128&d=identicon&r=PG&f=1", "display_name": "krokodilko", "link": "https://stackoverflow.com/users/2568341/krokodilko"}, "edited": false, "score": 0, "creation_date": 1464817844, "post_id": 37578985, "comment_id": 62645650, "body": "Just export and import a table using <code>exp&#47;inp</code> =&gt; <a href=\"https://docs.oracle.com/cd/B28359_01/server.111/b28319/exp_imp.htm\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/B28359_01/server.111/b28319/exp_imp.htm</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21818, "user_id": 5726467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9459ca28b927bebf9dab2f2aebfa0ac?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksej", "link": "https://stackoverflow.com/users/5726467/aleksej"}, "is_accepted": true, "score": 3, "last_activity_date": 1464828764, "last_edit_date": 1464828764, "creation_date": 1464816710, "answer_id": 37579131, "question_id": 37578985, "link": "https://stackoverflow.com/questions/37578985/create-copy-of-oracle-database-table-to-another-oracle-database-using-sql/37579131#37579131", "title": "Create copy of Oracle database table to another Oracle database using SQL", "body": "<p>You can create a <a href=\"https://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5005.htm\" rel=\"nofollow\">DBLink</a> to connect the source and the target DB, then simply use SQL to save your data in the linked DB.</p>\n\n<p>Something like:</p>\n\n<pre><code>create database link \"TARGET\"\nconnect to YOUR_SCHEMA\nidentified by YOUR_PASSWORD\nusing YOUR_CONNECTION_STRING;\n</code></pre>\n\n<p>Once you have a DBLink, you can use plain SQL, no matter the involved tables are on different DB:</p>\n\n<pre><code>INSERT INTO YOUR_TABLE@TARGET SELECT * FROM YOUR_TABLE\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 4032103, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "EvanL", "link": "https://stackoverflow.com/users/4032103/evanl"}, "edited": false, "score": 0, "creation_date": 1464818397, "post_id": 37579200, "comment_id": 62645859, "body": "Is there a way to do this without creating a database link and just adding @username/password@instance instead of @databaseLink?"}, {"owner": {"reputation": 106, "user_id": 3195447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51500bc9e4c9718a1f64c55464f8a357?s=128&d=identicon&r=PG&f=1", "display_name": "kayla210", "link": "https://stackoverflow.com/users/3195447/kayla210"}, "reply_to_user": {"reputation": 63, "user_id": 4032103, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "EvanL", "link": "https://stackoverflow.com/users/4032103/evanl"}, "edited": false, "score": 0, "creation_date": 1464879598, "post_id": 37579200, "comment_id": 62675864, "body": "As far as I know, no. This was given to me as a solution to the exact same problem you&#39;re having by a DBA several months back. It worked fairly well for my purposes."}], "tags": [], "owner": {"reputation": 106, "user_id": 3195447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51500bc9e4c9718a1f64c55464f8a357?s=128&d=identicon&r=PG&f=1", "display_name": "kayla210", "link": "https://stackoverflow.com/users/3195447/kayla210"}, "is_accepted": false, "score": 1, "last_activity_date": 1464817286, "last_edit_date": 1464817286, "creation_date": 1464816965, "answer_id": 37579200, "question_id": 37578985, "link": "https://stackoverflow.com/questions/37578985/create-copy-of-oracle-database-table-to-another-oracle-database-using-sql/37579200#37579200", "title": "Create copy of Oracle database table to another Oracle database using SQL", "body": "<p>Try creating a database link: <a href=\"https://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5005.htm\" rel=\"nofollow\">https://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5005.htm</a>\n<a href=\"http://psoug.org/definition/create_database_link.htm\" rel=\"nofollow\">http://psoug.org/definition/create_database_link.htm</a></p>\n\n<p>You'll only need to create the database link once, unless the credentials you need to connect with change at any point.</p>\n\n<pre><code>CREATE DATABASE LINK [Database Link Name] \nCONNECT TO [Username] IDENTIFIED BY [Password]\nUSING '[Service Name]';\n</code></pre>\n\n<p>Once the link is created, you can do something like this to retrieve data from a separate database and do whatever you want with it:</p>\n\n<pre><code>SELECT * FROM inputTable@[Database Link Name Here]\n</code></pre>\n\n<p>In this case:</p>\n\n<pre><code>SELECT * INTO outputTable\nFROM inputTable@databaseLink\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 840, "user_id": 1267945, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4d7013c0c2ff42965193cc2f4219e8e1?s=128&d=identicon&r=PG", "display_name": "chungtinhlakho", "link": "https://stackoverflow.com/users/1267945/chungtinhlakho"}, "is_accepted": false, "score": 0, "last_activity_date": 1464817067, "creation_date": 1464817067, "answer_id": 37579229, "question_id": 37578985, "link": "https://stackoverflow.com/questions/37578985/create-copy-of-oracle-database-table-to-another-oracle-database-using-sql/37579229#37579229", "title": "Create copy of Oracle database table to another Oracle database using SQL", "body": "<p>have try openQuery? in sql server, you can link to an oracle database, after that you can just you it when Openquery</p>\n\n<p>example</p>\n\n<pre><code>Select * into T_NewTable from openquery(connectionanme, 'select * from your source table')\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4032103, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "EvanL", "link": "https://stackoverflow.com/users/4032103/evanl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "accepted_answer_id": 37579131, "answer_count": 3, "score": 2, "last_activity_date": 1464828764, "creation_date": 1464816049, "question_id": 37578985, "link": "https://stackoverflow.com/questions/37578985/create-copy-of-oracle-database-table-to-another-oracle-database-using-sql", "title": "Create copy of Oracle database table to another Oracle database using SQL", "body": "<p>I am wondering if there is a simple way to copy either an entire Oracle database table or data rows into another Oracle database table (different databases).  Is there some type of way to do this using SQL language?  My initial thought is to use a SQL query like this:</p>\n\n<pre><code>INSERT INTO outputTable\nSELECT * FROM username/password@instance.inputTable\n</code></pre>\n\n<p>If not with SQL, is there another way to do this?  I am trying to automate this task so performing a copy using SQL Developer or something along those lines will not suffice unfortunately.  I am trying to do this using Python.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3206, "user_id": 3000589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5f9QJ.png?s=128&g=1", "display_name": "martijnn2008", "link": "https://stackoverflow.com/users/3000589/martijnn2008"}, "edited": false, "score": 0, "creation_date": 1464816041, "post_id": 37578927, "comment_id": 62644871, "body": "What is the input of your file? I feel like there is code missing. Also, maybe give a smaller example."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6323401, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d32d2516691389951cf126f1b5e9f6fb?s=128&d=identicon&r=PG&f=1", "display_name": "Izzino", "link": "https://stackoverflow.com/users/6323401/izzino"}, "edited": false, "score": 0, "creation_date": 1464829298, "post_id": 37579082, "comment_id": 62649004, "body": "Thank you so much, it was killing me haha."}], "tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": true, "score": 1, "last_activity_date": 1464850772, "last_edit_date": 1464850772, "creation_date": 1464816506, "answer_id": 37579082, "question_id": 37578927, "link": "https://stackoverflow.com/questions/37578927/how-do-i-concatenate-lines-from-a-file-onto-a-single-line-of-code/37579082#37579082", "title": "How do I concatenate lines from a file onto a single line of code?", "body": "<p>Your <code>indents</code> string ends with a newline, like this: <code>\"    \\n\"</code>. You want to get rid of that. </p>\n\n<pre><code>indents=f.readline().strip('\\n')\n</code></pre>\n\n<p>When reading from a text file, there will always be a newline character at the end of each line until you've reached the end of the file. </p>\n\n<p><code>print()</code> will also add a single newline to its output by default. If you don't want that, you can pass an <code>end</code> argument. </p>\n\n<pre><code>print('this line doesn't need another newline.\\n', end='')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6390384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee4569273c675a21683828859eeb4c4?s=128&d=identicon&r=PG", "display_name": "\u0410\u0421TPOHOMOC", "link": "https://stackoverflow.com/users/6390384/%d0%90%d0%a1tpohomoc"}, "is_accepted": false, "score": -1, "last_activity_date": 1464818608, "creation_date": 1464818608, "answer_id": 37579536, "question_id": 37578927, "link": "https://stackoverflow.com/questions/37578927/how-do-i-concatenate-lines-from-a-file-onto-a-single-line-of-code/37579536#37579536", "title": "How do I concatenate lines from a file onto a single line of code?", "body": "<p>Just use multiple lines string in your program as an input.<p>\ninputBasicCode = \"\"\"<p>\n...<p>\n'\"\"\"<p>\nIt is more simple and clear way to do program input. Perfect for debugging. Just concentrate on the target.<p></p>\n\n<p><a href=\"https://www.reddit.com/r/dailyprogrammer/comments/4lpygb/20160530_challenge_269_easy_basic_formatting/\" rel=\"nofollow\">More details of the task is on Reddit.com site</a></p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6323401, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d32d2516691389951cf126f1b5e9f6fb?s=128&d=identicon&r=PG&f=1", "display_name": "Izzino", "link": "https://stackoverflow.com/users/6323401/izzino"}, "edited": false, "score": 0, "creation_date": 1464829339, "post_id": 37580700, "comment_id": 62649009, "body": "Thanks RJM you were right about the problem, but that solution didn&#39;t work for me."}, {"owner": {"reputation": 1, "user_id": 6412096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633baa3b0c54fae047a93e47bd494af7?s=128&d=identicon&r=PG&f=1", "display_name": "RJM", "link": "https://stackoverflow.com/users/6412096/rjm"}, "reply_to_user": {"reputation": 15, "user_id": 6323401, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d32d2516691389951cf126f1b5e9f6fb?s=128&d=identicon&r=PG&f=1", "display_name": "Izzino", "link": "https://stackoverflow.com/users/6323401/izzino"}, "edited": false, "score": 0, "creation_date": 1464842477, "post_id": 37580700, "comment_id": 62651919, "body": "@lzzino there&#39;s another way you can suppress the newline, try <code>print(indents*block+line, end=&quot; &quot;)</code>, this will end the <code>print</code> statement with a space rather then newline."}], "tags": [], "owner": {"reputation": 1, "user_id": 6412096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633baa3b0c54fae047a93e47bd494af7?s=128&d=identicon&r=PG&f=1", "display_name": "RJM", "link": "https://stackoverflow.com/users/6412096/rjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1464826073, "creation_date": 1464826073, "answer_id": 37580700, "question_id": 37578927, "link": "https://stackoverflow.com/questions/37578927/how-do-i-concatenate-lines-from-a-file-onto-a-single-line-of-code/37580700#37580700", "title": "How do I concatenate lines from a file onto a single line of code?", "body": "<p>Your statement <code>print(indents*block+line)</code> inherently adds a new line character at the end. Since the python \"print\" statement adds newline regardless of whats inside the print command.\nAdd a comma at the end of the print statement like this <code>print(indents*block+line,)</code> and it will not print the newline character.</p>\n"}], "owner": {"reputation": 15, "user_id": 6323401, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d32d2516691389951cf126f1b5e9f6fb?s=128&d=identicon&r=PG&f=1", "display_name": "Izzino", "link": "https://stackoverflow.com/users/6323401/izzino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37579082, "answer_count": 3, "score": 1, "last_activity_date": 1464850772, "creation_date": 1464815826, "last_edit_date": 1464819398, "question_id": 37578927, "link": "https://stackoverflow.com/questions/37578927/how-do-i-concatenate-lines-from-a-file-onto-a-single-line-of-code", "title": "How do I concatenate lines from a file onto a single line of code?", "body": "<p>I'm new to programming and currently working on problem  <a href=\"https://www.reddit.com/r/dailyprogrammer/comments/4lpygb/20160530_challenge_269_easy_basic_formatting/\" rel=\"nofollow\">#269 from r/dailyprogrammer.</a> I want to add the ability to read files and format them based on the indention format given. My current code:</p>\n\n<pre><code>import sys\n\nfilename=input(\"What file would you like to reformat?\")\nf=open(filename,\"r\")\nn_lines= int(f.readline())\nindents=(f.readline())\n\nblock=0\nfor line in f:\n    line=line.lstrip('\u00b7\u00bb \\t')\n    if line.startswith('ENDIF') or line.startswith('NEXT'):\n        block-=1\n    print(indents*block+line)\n    if line.startswith('FOR') or line.startswith('IF'):\n        block+=1\n</code></pre>\n\n<p>gives me this</p>\n\n<pre><code>VAR I\n\nFOR I=1 TO 31\n\n\u00b7\u00b7\u00b7\u00b7\nIF !(I MOD 3) THEN\n\n\u00b7\u00b7\u00b7\u00b7\n\u00b7\u00b7\u00b7\u00b7\nPRINT \"FIZZ\"\n\n\u00b7\u00b7\u00b7\u00b7\nENDIF\n\n\u00b7\u00b7\u00b7\u00b7\nIF !(I MOD 5) THEN\n\n\u00b7\u00b7\u00b7\u00b7\n\u00b7\u00b7\u00b7\u00b7\nPRINT \"BUZZ\"\n\n\u00b7\u00b7\u00b7\u00b7\nENDIF\n\n\u00b7\u00b7\u00b7\u00b7\nIF (I MOD 3) &amp;&amp; (I MOD 5) THEN\n\n\u00b7\u00b7\u00b7\u00b7\n\u00b7\u00b7\u00b7\u00b7\nPRINT \"FIZZBUZZ\"\n\n\u00b7\u00b7\u00b7\u00b7\nENDIF\n\nNEXT\n</code></pre>\n\n<p>,but I want it to print the pseudo indentions+line on the same line.</p>\n"}, {"tags": ["python", "filesystems", "naming"], "answers": [{"comments": [{"owner": {"reputation": 27450, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1464860749, "post_id": 37579133, "comment_id": 62661677, "body": "In general, <code>%</code> is a problematic character for use in a file name.  See <a href=\"http://stackoverflow.com/questions/4814040/allowed-characters-in-filename\" title=\"allowed characters in filename\">stackoverflow.com/questions/4814040/&hellip;</a> for a full discussion."}], "tags": [], "owner": {"reputation": 213, "user_id": 5294289, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a7627848a6033b774f22759c9f986350?s=128&d=identicon&r=PG&f=1", "display_name": "BiggerD", "link": "https://stackoverflow.com/users/5294289/biggerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1464816718, "creation_date": 1464816718, "answer_id": 37579133, "question_id": 37578891, "link": "https://stackoverflow.com/questions/37578891/sensible-way-to-create-filenames-for-files-based-on-urls/37579133#37579133", "title": "Sensible way to create filenames for files based on URLs?", "body": "<p>What if you use '%2F'? It's the '/' but html encoded.</p>\n\n<p>source:\n<a href=\"http://www.w3schools.com/tags/ref_urlencode.asp\" rel=\"nofollow\">http://www.w3schools.com/tags/ref_urlencode.asp</a></p>\n"}, {"tags": [], "owner": {"reputation": 27450, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1464861194, "creation_date": 1464861194, "answer_id": 37588424, "question_id": 37578891, "link": "https://stackoverflow.com/questions/37578891/sensible-way-to-create-filenames-for-files-based-on-urls/37588424#37588424", "title": "Sensible way to create filenames for files based on URLs?", "body": "<p>The easiest way to represent what's almost certainly a directory structure on the server is to do like <code>wget</code> does and replicate that structure on your local machine.</p>\n\n<p>Thus the <code>/</code> characters become directory delimiters, and your <code>www.mysite.com/dir1/pageA.png</code> would become a PNG file called <code>pageA.png</code> in a directory called <code>dir1</code>, and <code>dir1</code> is located in a directory called <code>www.mysite.com</code>.</p>\n\n<p>It's simple, guaranteed to be reversible, and doesn't risk ambiguous results.</p>\n"}], "owner": {"reputation": 51837, "user_id": 194000, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/03e72a161e69eaafe1213344c8568a28?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/194000/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1464861194, "creation_date": 1464815686, "question_id": 37578891, "link": "https://stackoverflow.com/questions/37578891/sensible-way-to-create-filenames-for-files-based-on-urls", "title": "Sensible way to create filenames for files based on URLs?", "body": "<p>I am screenshotting a bunch of web pages, using Python with Selenium. I want to save the  PNGs locally for reference. The list of URLs looks something like this:</p>\n\n<pre><code>www.mysite.com/dir1/pageA\nwww.mysite.com/dir1/pageB\n</code></pre>\n\n<p>My question is about what filenames to give the screenshotted PNGs. </p>\n\n<p>If I call the image files e.g. <code>www.mysite.com/dir1/pageA.png</code> the meaningless slashes will inevitably cause problems at some point. </p>\n\n<p>I could replace all the <code>/</code> characters in the URL with <code>_</code>, but I suspect that might cause problems too, e.g. if there are already <code>_</code> characters in the URL. (I don't strictly need to be able to work backwards from the filename to the URL, but it wouldn't be a bad thing.)</p>\n\n<p>What's a sensible way to handle the naming?</p>\n"}, {"tags": ["python", "bash"], "comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 1, "creation_date": 1464815761, "post_id": 37578878, "comment_id": 62644731, "body": "It should yes. Don&#39;t see why something like this wouldn&#39;t work."}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 1, "creation_date": 1464815956, "post_id": 37578878, "comment_id": 62644831, "body": "Change &#39;python&#39; to &#39;echo&#39; and see what prints out."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1464815977, "post_id": 37578878, "comment_id": 62644841, "body": "Aside: All-caps variable names are bad form. See POSIX conventions at <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/basedefs/&hellip;</a> -- fourth paragraph -- which specifies the namespace of <b>lowercase</b> variables as reserved for application use. Using upper-case variables in your applications means you can override a variable with meaning to the shell or system by mistake."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 1, "creation_date": 1464816001, "post_id": 37578878, "comment_id": 62644854, "body": "@Marichyasana, better would be to <code>set -x</code> earlier, or to change <code>python</code> to <code>printf &#39;%q\\n&#39;</code>. <code>echo</code>&#39;s output is very often misleading."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 1, "creation_date": 1464816040, "post_id": 37578878, "comment_id": 62644867, "body": "@Marichyasana, ...for instance, you can&#39;t tell the difference between <code>echo cat &quot;hello world&quot;</code> and <code>echo cat &quot;hello&quot; &quot;world&quot;</code>, but they&#39;re very different commands."}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1464816133, "post_id": 37578878, "comment_id": 62644908, "body": "@Charles Duffy good advice, thanks."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1464816299, "post_id": 37578878, "comment_id": 62644996, "body": "...re: <code>for host in $HOSTNAMES</code>, by the way, see <a href=\"http://mywiki.wooledge.org/DontReadLinesWithFor\" rel=\"nofollow noreferrer\">mywiki.wooledge.org/DontReadLinesWithFor</a>, and <a href=\"http://mywiki.wooledge.org/BashFAQ/001\" rel=\"nofollow noreferrer\">mywiki.wooledge.org/BashFAQ/001</a> for the better-practice alternative."}, {"owner": {"reputation": 157, "user_id": 1243364, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e897c080e6073d277bc6f95907914b6c?s=128&d=identicon&r=PG", "display_name": "Niag Ntawv", "link": "https://stackoverflow.com/users/1243364/niag-ntawv"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1464816773, "post_id": 37578878, "comment_id": 62645225, "body": "@CharlesDuffy Thanks for the links. I&#39;ve looked at those previously as well. I don&#39;t remember why I changed it to a for loop but when I was originally just testing basic Bash commands for iteration I was using the while do method outlined in that article."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1464816970, "post_id": 37578878, "comment_id": 62645306, "body": "I&#39;d suggest extending your answer to provide a standalone reproducer per <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> -- something folks can run to reproduce your problem without needing things like your <code>pytest</code> or <code>test.txt</code> or <code>iptext.txt</code>, all of which are required for the code given in the question to run."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1464817056, "post_id": 37578878, "comment_id": 62645342, "body": "...see the answer by Diego as-amended, which is a good example of a reproducer: Inasmuch as it calls Python code, that Python code is right there in the answer (and is written to be as terse as possible, including only the minimum contents necessary for the demonstration); code included in a question should follow those same principals."}], "answers": [{"comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1464815809, "post_id": 37578910, "comment_id": 62644756, "body": "Looks like he want to pass them to <code>sys.argv</code> tho?"}, {"owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1464815891, "post_id": 37578910, "comment_id": 62644792, "body": "I don&#39;t think so. <code>HOSTNAMES</code>, <code>ZONE</code>, etc. look like env vars."}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1464815967, "post_id": 37578910, "comment_id": 62644839, "body": "Except he&#39;s iterating over them, and passing them to <code>--host</code>? He just spelled the passed variable wrong"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1464816231, "post_id": 37578910, "comment_id": 62644955, "body": "@Torxed, ...spelled it wrong, or made a mistake in other code they didn&#39;t show (for instance, read it in inside a loop a la <a href=\"http://mywiki.wooledge.org/BashFAQ/024\" rel=\"nofollow noreferrer\">mywiki.wooledge.org/BashFAQ/024</a>)."}, {"owner": {"reputation": 157, "user_id": 1243364, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e897c080e6073d277bc6f95907914b6c?s=128&d=identicon&r=PG", "display_name": "Niag Ntawv", "link": "https://stackoverflow.com/users/1243364/niag-ntawv"}, "edited": false, "score": 0, "creation_date": 1464817065, "post_id": 37578910, "comment_id": 62645344, "body": "@DiegoTorresMilano I did see another post referencing what you said with regards to exporting the variables to make it accessible to python. I guess where the confusion was for me is would I be running something like, python pytest.py --host os.environ[&#39;HOSTNAME&#39;] --zone os.environ[&#39;ZONE&#39;] etc? Sorry, probably asking a lot of noob questions, but what does the -c option do? I looked at the man pages in my shell and it didn&#39;t have that option on there."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 157, "user_id": 1243364, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e897c080e6073d277bc6f95907914b6c?s=128&d=identicon&r=PG", "display_name": "Niag Ntawv", "link": "https://stackoverflow.com/users/1243364/niag-ntawv"}, "edited": false, "score": 0, "creation_date": 1464817124, "post_id": 37578910, "comment_id": 62645367, "body": "@NiagNtawv, no, the <code>os.environ[&#39;HOSTNAME&#39;]</code> and <code>os.environ[&#39;ZONE&#39;]</code> code would be inside the Python file. <code>python -c &#39;python code here&#39;</code> runs the code given on the command line, allowing a terse example that can be copied-and-pasted without needing a new file to run, but that <code>python code here</code> could also be contents of a <code>.py</code> file."}], "tags": [], "owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "is_accepted": false, "score": 2, "last_activity_date": 1464816175, "last_edit_date": 1464816175, "creation_date": 1464815764, "answer_id": 37578910, "question_id": 37578878, "link": "https://stackoverflow.com/questions/37578878/how-to-pass-bash-variables-as-python-arguments/37578910#37578910", "title": "How to pass Bash variables as Python arguments", "body": "<p>As long as the variables are exported, they're accessible from Python.</p>\n\n<pre><code>$ export VAR=val\n$ python -c \"import os; print os.environ['VAR']\"\nval\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 1243364, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e897c080e6073d277bc6f95907914b6c?s=128&d=identicon&r=PG", "display_name": "Niag Ntawv", "link": "https://stackoverflow.com/users/1243364/niag-ntawv"}, "edited": false, "score": 0, "creation_date": 1464839871, "post_id": 37579099, "comment_id": 62651147, "body": "this looks to be what I was after. Yes the real script is set to parse the parameters being passed in, I just wasn&#39;t sure if this was how it&#39;s done in bash and python."}], "tags": [], "owner": {"reputation": 96, "user_id": 6082876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddiHP.png?s=128&g=1", "display_name": "Brendan D.", "link": "https://stackoverflow.com/users/6082876/brendan-d"}, "is_accepted": true, "score": 4, "last_activity_date": 1464816579, "creation_date": 1464816579, "answer_id": 37579099, "question_id": 37578878, "link": "https://stackoverflow.com/questions/37578878/how-to-pass-bash-variables-as-python-arguments/37579099#37579099", "title": "How to pass Bash variables as Python arguments", "body": "<p>Yes, seems to work just fine to me.</p>\n\n<p>To test, I threw together a very quick python script called test.py:</p>\n\n<pre><code>#!/usr/bin/python\nimport sys\n\nprint 'number of arguments: ', len(sys.argv)\n#we know sys.argv[0] is the script name, let's look at sys.argv[1]\nprint sys.argv[1]\n</code></pre>\n\n<p>Then, in your terminal, set a variable:</p>\n\n<pre><code>&gt;testvar=\"TESTING\"\n</code></pre>\n\n<p>And try your script, passing the variable into the script:</p>\n\n<pre><code>&gt;python test.py $testvar\n&gt;number of arguments: 2\n&gt;TESTING\n</code></pre>\n\n<p>Admittedly I'm not very well-versed in Python, but this did seem to accomplish what you wanted. That said, this assumes the Python script you referenced is already set up to parse the names of the parameters being passed to it - you'll notice my test script does NOT do that, it simply spits out whatever you pass into it.</p>\n"}], "owner": {"reputation": 157, "user_id": 1243364, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e897c080e6073d277bc6f95907914b6c?s=128&d=identicon&r=PG", "display_name": "Niag Ntawv", "link": "https://stackoverflow.com/users/1243364/niag-ntawv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2069, "favorite_count": 0, "accepted_answer_id": 37579099, "answer_count": 2, "score": 1, "last_activity_date": 1464816579, "creation_date": 1464815608, "last_edit_date": 1495542241, "question_id": 37578878, "link": "https://stackoverflow.com/questions/37578878/how-to-pass-bash-variables-as-python-arguments", "title": "How to pass Bash variables as Python arguments", "body": "<p>I'm trying to figure out if it is possible to pass values stored in a variable in Bash in as argument values in a python script.</p>\n\n<p>We have a python script that we use to create DNS records in BIND and I've been tasked with cleaning up our outdated DNS database. so far I have something like this in bash:</p>\n\n<pre><code>HOSTNAMES=$(&lt;/Users/test/test.txt)\n\nZONE=\"zone name here\"\n\nIP=$(&lt;/Users/test/iptest.txt)\n\nfor host in $HOSTNAMES\ndo\n  python pytest.py --host $HOSTNAMES --zone $ZONE --ip $IP\ndone\n</code></pre>\n\n<p>Unfortunately, I don't have a test environment where I can test this on before I run it on prod and I don't have any experience with Python or Bash scripting. I've mainly only done Powershell scripting, but was wondering if something like what I have above would work.</p>\n\n<p>I've looked around on the forums here but have not found anything that I could make sense of. This post seems to answer my question somewhat, but I'm still not completely sure how this works. <a href=\"https://stackoverflow.com/questions/7521061/how-to-pass-a-bash-variable-to-python\">How to pass a Bash variable to Python?</a></p>\n"}, {"tags": ["python", "python-2.7", "typeerror"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464815823, "post_id": 37578877, "comment_id": 62644765, "body": "Start by learning Python 3, not 2."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1464816055, "post_id": 37578877, "comment_id": 62644875, "body": "Even before the type problems, this code is full of syntax errors. You need to post code you actually ran."}, {"owner": {"reputation": 11, "user_id": 6411719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c083507f2a0b0dfa557b5b68addc10e?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Stark", "link": "https://stackoverflow.com/users/6411719/karl-stark"}, "edited": false, "score": 0, "creation_date": 1464816059, "post_id": 37578877, "comment_id": 62644881, "body": "Alright but will this work in python 3?"}, {"owner": {"reputation": 11, "user_id": 6411719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c083507f2a0b0dfa557b5b68addc10e?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Stark", "link": "https://stackoverflow.com/users/6411719/karl-stark"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464816179, "post_id": 37578877, "comment_id": 62644930, "body": "@user2357112 this is the code I ran... It works just fine till the mathematical part"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1464816358, "post_id": 37578877, "comment_id": 62645028, "body": "@KarlStark: No it&#39;s not. If you tried to run this code, you would get a SyntaxError instead of a TypeError. This code is different from the code you actually ran on every single line, as every single line has a syntax problem that would have aborted compilation with a SyntaxError before the TypeError could occur."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1464819393, "post_id": 37578877, "comment_id": 62646232, "body": "@KarlStark I really want to know, what made you type this code here instead of copy pasting the actual code you ran? A lot of people do this and I can&#39;t understand the motivation."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464816572, "post_id": 37579055, "comment_id": 62645126, "body": "While learning Python 3 would be a good move, I think mixing syntax corrections and Python 2-&gt;3 conversions confuses the issue."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464816664, "post_id": 37579055, "comment_id": 62645171, "body": "@user2357112 perhaps, but since it&#39;s the OP&#39;s first day learning Python, I want to get them on the right track as quickly as possible."}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1464816625, "last_edit_date": 1464816625, "creation_date": 1464816392, "answer_id": 37579055, "question_id": 37578877, "link": "https://stackoverflow.com/questions/37578877/error-shown-in-python-typeerror-unsupported-operand-types-for-or-pow/37579055#37579055", "title": "Error shown in Python - TypeError : unsupported operand type(s) for ** or pow() :&#39;str&#39; and &#39;int&#39;", "body": "<p>First and foremost, if you're just starting, you <strong><em>really</em></strong> should be learning Python 3, not 2. </p>\n\n<p>The code you posted has many issues. Here's a line-by-line breakdown, with corrections in Python 3:</p>\n\n<pre><code>a=raw_input(''enter age'') \nb=raw_input(''sibling's age'')\n</code></pre>\n\n<p>You need to use either single quotes <code>'</code> or double quotes <code>\"</code>, but not two single quotes to define strings. Try:</p>\n\n<pre><code>a = int(input(\"Enter age\"))\nb = int(input(\"Sibling's age\"))\n</code></pre>\n\n<p>There is no <code>raw_input()</code> in Python 3, it's just <a href=\"https://docs.python.org/3/library/functions.html#input\" rel=\"nofollow\"><code>input()</code></a>. This function also returns a string, so if you want to do math on it you need to call <a href=\"https://docs.python.org/3/library/functions.html#int\" rel=\"nofollow\"><code>int()</code></a> to turn the result into an integer.</p>\n\n<pre><code>Square=a**2 + b**2 + 2ab\n</code></pre>\n\n<p>As long as <code>a</code> and <code>b</code> are ints, the first two parts of the expression are fine, but you need to remember that all operations in Python are explicit, so you'll need to fix the last part like so:</p>\n\n<pre><code>Square = a**2 + b**2 + 2*a*b\n</code></pre>\n\n<p>Now for the last part:</p>\n\n<pre><code>If square &lt;160:\n    Print 'really young people' \nElse:\n    Print 'square of sum &gt;160'\n</code></pre>\n\n<p>Python is case-sensitive. Since you used <code>Square</code> above, you'll need to use the same capitalization down here. Likewise, builtin keywords and functions are all in lowercase (<code>if</code>, <code>else</code>, <code>print()</code>, etc.). Finally, in Python 3 <a href=\"https://docs.python.org/3/library/functions.html#print\" rel=\"nofollow\"><code>print</code></a> is a function, not a statement, so you'll need parentheses <code>( )</code> around your arguments:</p>\n\n<pre><code>if Square &lt; 160:\n    print(\"Really young people\")\nelse:\n    print(\"square of sum &gt; 160\")\n</code></pre>\n\n<hr>\n\n<p>So, here's your complete Python 3 code:</p>\n\n<pre><code>a = int(input(\"Enter age\"))\nb = int(input(\"Sibling's age\"))\nSquare = a**2 + b**2 + 2*a*b\nif Square &lt; 160:\n    print(\"Really young people\")\nelse:\n    print(\"square of sum &gt; 160\")\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6411719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c083507f2a0b0dfa557b5b68addc10e?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Stark", "link": "https://stackoverflow.com/users/6411719/karl-stark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1464816625, "creation_date": 1464815606, "last_edit_date": 1464815803, "question_id": 37578877, "link": "https://stackoverflow.com/questions/37578877/error-shown-in-python-typeerror-unsupported-operand-types-for-or-pow", "title": "Error shown in Python - TypeError : unsupported operand type(s) for ** or pow() :&#39;str&#39; and &#39;int&#39;", "body": "<p>I just started python today..  Spent hours on codeacademy and learnt quite a bit so I thought I'd make my own program to square the ages of a person and their sibling. Very basic just a starter. Pretty useless actually just wanted to see what I can do.  I keep getting this TypeError mentioned in the title. Here's my code :</p>\n\n<pre><code>a=raw_input(''enter age'') \nb=raw_input(''sibling's age'') \nSquare=a**2 + b**2 + 2ab\nIf square &lt;160:\n    Print 'really young people' \nElse:\n    Print 'square of sum &gt;160'\n</code></pre>\n\n<p>Please help\nThanks!! </p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1464823605, "post_id": 37579847, "comment_id": 62647590, "body": "One minor suggestion: if the graph is truly intended to run over a <i>single</i> image, I&#39;d recommend replacing the <code>tf.train.string_input_producer()</code> and reader pipeline with <code>image = tf.decode_jpeg(tf.read_file(&quot;&#47;home&#47;tensor&#47;...&#47;inputImage.jpg&zwnj;&#8203;&quot;))</code>, and then you don&#39;t need the queue runners."}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1464854752, "post_id": 37579847, "comment_id": 62657638, "body": "You are right, I updated my answer to make it more complete"}, {"owner": {"reputation": 43, "user_id": 6411724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1df8a4980dcea3e29f8d8bef8e2eee65?s=128&d=identicon&r=PG&f=1", "display_name": "nsalman", "link": "https://stackoverflow.com/users/6411724/nsalman"}, "edited": false, "score": 0, "creation_date": 1465197130, "post_id": 37579847, "comment_id": 62782567, "body": "Thank you to all this seems to have worked - what I do not understand however is why aren&#39;t we using the information stored in the Saver ?  <code>with tf.Session() as sess:     ckpt = tf.train.get_checkpoint_state(FLAGS.checkpoint_dir)     if ckpt and ckpt.model_checkpoint_path:       saver.restore(sess, ckpt.model_checkpoint_path)     else:       print(&#39;No checkpoint file found&#39;)       return </code>"}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "edited": false, "score": 0, "creation_date": 1465202876, "post_id": 37579847, "comment_id": 62785692, "body": "You can of course use a previously saved model, I did not include it in my answer for clarity."}, {"owner": {"reputation": 402, "user_id": 927972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24381e039c7c79f1939609861ad8c1ce?s=128&d=identicon&r=PG", "display_name": "DMTishler", "link": "https://stackoverflow.com/users/927972/dmtishler"}, "edited": false, "score": 1, "creation_date": 1477527623, "post_id": 37579847, "comment_id": 67807857, "body": "When restoring the previously trained cifar10 model AND using a single image configuration like above, an error occurs as the expected shape of tensors in the model are based on the batch size when training. Is it possible to use placeholders with the training input pipeline to fix this? <a href=\"http://stackoverflow.com/questions/38177753/tensorflow-inference-with-single-image-with-cifar-10-example\" title=\"tensorflow inference with single image with cifar 10 example\">stackoverflow.com/questions/38177753/&hellip;</a>"}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "reply_to_user": {"reputation": 402, "user_id": 927972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24381e039c7c79f1939609861ad8c1ce?s=128&d=identicon&r=PG", "display_name": "DMTishler", "link": "https://stackoverflow.com/users/927972/dmtishler"}, "edited": false, "score": 0, "creation_date": 1477527994, "post_id": 37579847, "comment_id": 67807947, "body": "@DMTishler : So you can use placeholders with <code>None</code> batch size, so that they can work with any size of batch_size: <code>tf.placeholder(tf.float32, [None, 32, 32, 3])</code>. You can also create a fake batch of images based on the single image repeated <code>batch_size</code> times and give that to the network."}, {"owner": {"reputation": 402, "user_id": 927972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24381e039c7c79f1939609861ad8c1ce?s=128&d=identicon&r=PG", "display_name": "DMTishler", "link": "https://stackoverflow.com/users/927972/dmtishler"}, "edited": false, "score": 0, "creation_date": 1478807720, "post_id": 37579847, "comment_id": 68311417, "body": "Yeah the fake batch method was how I originally got around the issue. But RE the use of placeholders, how is that implemented along side the queue runners in the cifar10 example? I thought they used that method instead of a feed dict so I am unsure where to tie in a placeholder for the input."}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "reply_to_user": {"reputation": 402, "user_id": 927972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24381e039c7c79f1939609861ad8c1ce?s=128&d=identicon&r=PG", "display_name": "DMTishler", "link": "https://stackoverflow.com/users/927972/dmtishler"}, "edited": false, "score": 0, "creation_date": 1478807959, "post_id": 37579847, "comment_id": 68311534, "body": "@DMTishler : I&#39;m not sure I understand your question, maybe you can post it in a separate post. One thing to know is that you can feed values for any node in the graph, even if they are not placeholders."}, {"owner": {"reputation": 531, "user_id": 2908475, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7706848ca3ec888ed41e7447bbea0bf1?s=128&d=identicon&r=PG&f=1", "display_name": "So S", "link": "https://stackoverflow.com/users/2908475/so-s"}, "edited": false, "score": 0, "creation_date": 1488232778, "post_id": 37579847, "comment_id": 72132287, "body": "It seems like <code>tf.image.per_image_withening</code> is replaced by <code>tf.image.per_image_standardization</code> due to <a href=\"https://github.com/tensorflow/models/issues/693\" rel=\"nofollow noreferrer\">github.com/tensorflow/models/issues/693</a>"}], "tags": [], "owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "is_accepted": true, "score": 4, "last_activity_date": 1464854571, "last_edit_date": 1464854571, "creation_date": 1464820306, "answer_id": 37579847, "question_id": 37578876, "link": "https://stackoverflow.com/questions/37578876/how-to-feed-cifar10-trained-model-with-my-own-image-and-get-label-as-output/37579847#37579847", "title": "How to feed Cifar10 trained model with my own image and get label as output?", "body": "<p>Some basics first:</p>\n\n<ol>\n<li>First you define your graph: image queue, image preprocessing, inference of the convnet, top-k accuracy</li>\n<li>Then you create a <code>tf.Session()</code> and work inside it: starting the queue runners, and calls to <code>sess.run()</code></li>\n</ol>\n\n<hr>\n\n<p>Here is what your code should look like</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># 1. GRAPH CREATION \nfilename_queue = tf.train.string_input_producer(['/home/tensor/.../inputImage.jpg'])\n...  # NO CREATION of a tf.Session here\nfloat_image = ...\nimages = tf.expand_dims(float_image, 0)  # create a fake batch of images (batch_size=1)\nlogits = faultnet.inference(images)\n_, top_k_pred = tf.nn.top_k(logits, k=5)\n\n# 2. TENSORFLOW SESSION\nwith tf.Session() as sess:\n    sess.run(init_op)\n\n    coord = tf.train.Coordinator()\n    threads = tf.train.start_queue_runners(coord=coord)\n\n    top_indices = sess.run([top_k_pred])\n    print (\"Predicted \", top_indices[0], \" for your input image.\")\n</code></pre>\n\n<hr>\n\n<h2>EDIT:</h2>\n\n<p>As @mrry suggests, if you only need to work on a <em>single</em> image, you can remove the queue runners:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># 1. GRAPH CREATION\ninput_img = tf.image.decode_jpeg(tf.read_file(\"/home/.../your_image.jpg\"), channels=3)\nreshaped_image = tf.image.resize_image_with_crop_or_pad(tf.cast(input_img, width, height), tf.float32)\nfloat_image = tf.image.per_image_withening(reshaped_image)\nimages = tf.expand_dims(float_image, 0)  # create a fake batch of images (batch_size = 1)\nlogits = faultnet.inference(images)\n_, top_k_pred = tf.nn.top_k(logits, k=5)\n\n# 2. TENSORFLOW SESSION\nwith tf.Session() as sess:\n  sess.run(init_op)\n\n  top_indices = sess.run([top_k_pred])\n  print (\"Predicted \", top_indices[0], \" for your input image.\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7277946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1378157075536717/picture?type=large", "display_name": "Norbert B&#225;tfai", "link": "https://stackoverflow.com/users/7277946/norbert-b%c3%a1tfai"}, "is_accepted": false, "score": 0, "last_activity_date": 1481476693, "last_edit_date": 1495540809, "creation_date": 1481476693, "answer_id": 41088847, "question_id": 37578876, "link": "https://stackoverflow.com/questions/37578876/how-to-feed-cifar10-trained-model-with-my-own-image-and-get-label-as-output/41088847#41088847", "title": "How to feed Cifar10 trained model with my own image and get label as output?", "body": "<p>The original source code in cifar10_eval.py can also be used for testing own individual images as it is shown in the following console output</p>\n\n<pre><code>nbatfai@robopsy:~/Robopsychology/repos/gpu/tensorflow/tensorflow/models/image/cifar10$ python cifar10_eval.py --run_once True 2&gt;/dev/null\n[ -0.63916457  -3.31066918   2.32452989   1.51062226  15.55279636\n-0.91585422   1.26451302  -4.11891603  -7.62230825  -4.29096413]\ndeer\nnbatfai@robopsy:~/Robopsychology/repos/gpu/tensorflow/tensorflow/models/image/cifar10$ python cifar2bin.py matchbox.png input.bin \nnbatfai@robopsy:~/Robopsychology/repos/gpu/tensorflow/tensorflow/models/image/cifar10$ python cifar10_eval.py --run_once True 2&gt;/dev/null\n[ -1.30562115  12.61497402  -1.34208572  -1.3238833   -6.13368177\n-1.17441642  -1.38651907  -4.3274951    2.05489922   2.54187846]\nautomobile\nnbatfai@robopsy:~/Robopsychology/repos/gpu/tensorflow/tensorflow/models/image/cifar10$ \n</code></pre>\n\n<p>and code snippet</p>\n\n<pre><code>#while step &lt; num_iter and not coord.should_stop():\n# predictions = sess.run([top_k_op])\nprint(sess.run(logits[0]))\nclassification = sess.run(tf.argmalogits[0], 0))\ncifar10classes = [\"airplane\", \"automobile\", \"bird\", \"cat\", \"deer\", \"dog\", \"frog\", \"horse\", \"ship\", \"truck\"]\nprint(cifar10classes[classification])\n\n#true_count += np.sum(predictions)\nstep += 1\n\n# Compute precision @ 1.\nprecision = true_count / total_sample_count\n# print('%s: precision @ 1 = %.3f' % (datetime.now(), precision))\n</code></pre>\n\n<p>More details can be found in the post <a href=\"https://stackoverflow.com/questions/39848610/how-can-i-test-own-image-to-cifar-10-tutorial-on-tensorflow\">How can I test own image to Cifar-10 tutorial on Tensorflow?</a></p>\n"}], "owner": {"reputation": 43, "user_id": 6411724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1df8a4980dcea3e29f8d8bef8e2eee65?s=128&d=identicon&r=PG&f=1", "display_name": "nsalman", "link": "https://stackoverflow.com/users/6411724/nsalman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3159, "favorite_count": 1, "accepted_answer_id": 37579847, "answer_count": 2, "score": 4, "last_activity_date": 1481476693, "creation_date": 1464815598, "last_edit_date": 1464861374, "question_id": 37578876, "link": "https://stackoverflow.com/questions/37578876/how-to-feed-cifar10-trained-model-with-my-own-image-and-get-label-as-output", "title": "How to feed Cifar10 trained model with my own image and get label as output?", "body": "<p>I am trying to use the trained model based on the <a href=\"https://www.tensorflow.org/versions/r0.8/tutorials/deep_cnn/index.html\" rel=\"nofollow\">Cifar10 tutorial</a> and would like to feed\nit with an external image 32x32 (jpg or png).<br>\nMy goal is to be able to get <strong>the label as an output</strong>.\nIn other words, I want to feed the Network with a single jpeg image of size 32 x 32, 3 channels with no label as an input and have the inference process <em>give me</em> the <code>tf.argmax(logits, 1)</code>.<br>\nBasically I would like to be able to use the trained cifar10 model on an external image and see what class it will spit out.</p>\n\n<p>I have been trying to do that based on the Cifar10 Tutorial and unfortunately always have issues. especially with the Session concept and the batch concept.</p>\n\n<p>Any help doing that with Cifar10 would be greatly appreciated. </p>\n\n<p>Here is the implemented code so far with compilation issues :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python\n\nfrom __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\n\nfrom datetime import datetime\nimport math\nimport time\n\nimport tensorflow.python.platform\nfrom tensorflow.python.platform import gfile\nimport numpy as np\nimport tensorflow as tf\n\nimport cifar10\nimport cifar10_input\nimport os\nimport faultnet_flags\nfrom PIL import Image\n\nFLAGS = tf.app.flags.FLAGS\n\ndef evaluate():\n\n  filename_queue = tf.train.string_input_producer(['/home/tensor/.../inputImage.jpg'])\n\n  reader = tf.WholeFileReader()\n  key, value = reader.read(filename_queue)\n\n  input_img = tf.image.decode_jpeg(value)\n\n  init_op = tf.initialize_all_variables()\n\n# Problem in here with Graph / session\n  with tf.Session() as sess:\n    sess.run(init_op)\n\n    coord = tf.train.Coordinator()\n    threads = tf.train.start_queue_runners(coord=coord)\n\n    for i in range(1): \n      image = input_img.eval()\n\n    print(image.shape)\n    Image.fromarray(np.asarray(image)).show()\n\n# Problem in here is that I have only one image as input and have no label and would like to have\n# it compatible with the Cifar10 network\n    reshaped_image = tf.cast(image, tf.float32)\n    height = FLAGS.resized_image_size\n    width = FLAGS.resized_image_size\n    resized_image = tf.image.resize_image_with_crop_or_pad(reshaped_image, width, height)\n    float_image = tf.image.per_image_whitening(resized_image)  # reshaped_image\n    num_preprocess_threads = 1\n    images = tf.train.batch(\n      [float_image],\n      batch_size=128,\n      num_threads=num_preprocess_threads,\n      capacity=128)\n    coord.request_stop()\n    coord.join(threads)\n\n    logits = faultnet.inference(images)\n\n    # Calculate predictions.\n    #top_k_predict_op = tf.argmax(logits, 1)\n\n    # print('Current image is: ')\n    # print(top_k_predict_op[0])\n\n    # this does not work since there is a problem with the session\n    # and the Graph conflicting\n    my_classification = sess.run(tf.argmax(logits, 1))\n\n    print ('Predicted ', my_classification[0], \" for your input image.\")\n\n\ndef main(argv=None):\n  evaluate()\n\nif __name__ == '__main__':\n  tf.app.run() '''\n</code></pre>\n"}, {"tags": ["python", "mysql", "orm", "sqlalchemy", "pyqt"], "answers": [{"tags": [], "owner": {"reputation": 542, "user_id": 2931220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MHW6g.png?s=128&g=1", "display_name": "Zyend", "link": "https://stackoverflow.com/users/2931220/zyend"}, "is_accepted": true, "score": 0, "last_activity_date": 1464816565, "creation_date": 1464816565, "answer_id": 37579094, "question_id": 37578763, "link": "https://stackoverflow.com/questions/37578763/which-orm-to-use-for-python-and-mysql/37579094#37579094", "title": "Which ORM to use for Python and MySql?", "body": "<p><strong>Qt Sql</strong> is the SQL Framework that comes with Qt library. It provides basic (and classic) classes to access a database, execute queries and fetch the results.*Qt can be recompiled to support various DBMS such as MySQL, Postgres etc.</p>\n\n<p><strong>Sql Connector</strong>\nI assume you refer to MySql Connector ?\nIf so, it's a set of C++ classes to access natively a MySql database.\nClasses are almost the same than those in QtSQL. But you don't have to support the Wrapper layer of Qt. But of course, you cannot access another database than MySQL.</p>\n\n<p><strong>Sql Alchemy</strong>\nIt's hard to briefly explain the complexity of an ORM.\nObject Relation Mapping. Wikipedia says:</p>\n\n<blockquote>\n  <p>\"A technique for converting data between incompatible type systems in\n  object-oriented programming languages\"</p>\n</blockquote>\n\n<p>It's a good definition. It's basically a technique to map table / queries data into Object-Oriented data structure. </p>\n\n<p>For example, an ORM engine hides the process that explicitly maps the fields of a TABLE to an OO class.\nIn addition, it works the same whatever the database you're accessing (as long as the ORM knows the DBMS dialect).</p>\n\n<p>For such a purpose, Python language and philosophy perfectly fits an ORM. \nBut an ORM such as SqlAlchemy is everything but an Object-Oriented Database !</p>\n\n<p>It has some limitations though.\nIf you need to make complex queries (and believe me, it often happens in specific contexts), it becomes a bit tricky to use it properly and you might experience performance penalties. </p>\n\n<p>If you need just need to access a single table with hundreds records...it won't be worth it as the initialization process is a bit laborious.</p>\n\n<p>Z.</p>\n"}], "owner": {"reputation": 1508, "user_id": 6405985, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/78736a4802ae6a766a28829994cd7fff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Wang", "link": "https://stackoverflow.com/users/6405985/peter-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1908, "favorite_count": 0, "closed_date": 1464825163, "accepted_answer_id": 37579094, "answer_count": 1, "score": 0, "last_activity_date": 1464816565, "creation_date": 1464815125, "question_id": 37578763, "link": "https://stackoverflow.com/questions/37578763/which-orm-to-use-for-python-and-mysql", "closed_reason": "Opinion-based", "title": "Which ORM to use for Python and MySql?", "body": "<p>So I have a database that stores a lot of information about many different objects; to simplify it, just imagine a database that stores information about the weights of 100 dogs and 100 cats over a period of a few years. I made a GUI, and I want one of the tabs to allow the user to enter a newly taken weight or change the past weight of a pet if it was wrong. </p>\n\n<p>I created the GUI using Qt Designer. Before, I communicated with the database using SqlAlchemy. However, PyQt4 also offers QtSql, which I think is another ORM? Could someone explain to me how the ORM exactly works, and what the difference is between SqlAlchemy, QtSql, and even Sql Connector?</p>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 0, "creation_date": 1464814743, "post_id": 37578628, "comment_id": 62644235, "body": "What do you mean by &quot;it doesn&#39;t run&quot;? Are you getting an error? The wrong result?"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1464814754, "post_id": 37578628, "comment_id": 62644242, "body": "Is that your actual indentation, or did you transcribe it badly?"}, {"owner": {"reputation": 35, "user_id": 6411645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/507bcc06a573d7f4b2ba209b7476df2a?s=128&d=identicon&r=PG&f=1", "display_name": "bansheemon", "link": "https://stackoverflow.com/users/6411645/bansheemon"}, "edited": false, "score": 0, "creation_date": 1464815071, "post_id": 37578628, "comment_id": 62644390, "body": "Entering 1 character it works fine, but for 2 and more i&#39;m getting following error:  Traceback (most recent call last):   File &quot;C:\\~~\\ghfhf.py&quot;, line 44, in &lt;module&gt;     fnIsBin(binWord)   File &quot;C:\\~~\\ghfhf.py&quot;, line 26, in fnIsBin     print (character[count], &quot;OK&quot;) IndexError: string index out of range  And yes, it&#39;s my actual intendation. Is it wrong? I&#39;m begginer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1464815111, "post_id": 37578628, "comment_id": 62644416, "body": "<code>character[count]</code> should be <code>string[count]</code>, or just <code>character</code>."}, {"owner": {"reputation": 2145, "user_id": 2403000, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2303300fa4b29197c3a11eea331afdbf?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2403000/peter"}, "edited": false, "score": 0, "creation_date": 1464815168, "post_id": 37578628, "comment_id": 62644439, "body": "As an alternative (this isn&#39;t worth posting as an answer), <code>not s.replace(&#39;0&#39;, &#39;&#39;).replace(&#39;1&#39;, &#39;&#39;)</code> will return <code>True</code> if <code>s</code> only contains 0&#39;s and 1&#39;s, and <code>False</code> if not"}], "answers": [{"comments": [{"owner": {"reputation": 478030, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 0, "creation_date": 1464815280, "post_id": 37578673, "comment_id": 62644489, "body": "This allows for whitespace at the beginning and end of the string (which might be desired or not, just pointing it out)."}], "tags": [], "owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1464815781, "last_edit_date": 1464815781, "creation_date": 1464814740, "answer_id": 37578673, "question_id": 37578628, "link": "https://stackoverflow.com/questions/37578628/python-checking-if-string-consists-only-of-1s-and-0s/37578673#37578673", "title": "Python, checking if string consists only of 1&#39;s and 0&#39;s", "body": "<p>You can use the <code>int</code> object and give it a base. It will fail if the object passed doesn't consist of a binary representation. Recall that a binary string is base 2.</p>\n\n<pre><code>def fnIsBin(string):\n    try:\n        binary_repr = int(string, 2)\n    except ValueError as err\n        print(\"error: {0}\".format(err))\n        return False\n    return True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "is_accepted": false, "score": 5, "last_activity_date": 1464815197, "last_edit_date": 1464815197, "creation_date": 1464814875, "answer_id": 37578706, "question_id": 37578628, "link": "https://stackoverflow.com/questions/37578628/python-checking-if-string-consists-only-of-1s-and-0s/37578706#37578706", "title": "Python, checking if string consists only of 1&#39;s and 0&#39;s", "body": "<p>Your function fails because you never actually return <code>True</code>. That means if the string is actually binary, you'd return <code>None</code> which Python would consider as <code>False</code> in any boolean check.</p>\n\n<p>Simply add <code>return True</code> at the end of the function.</p>\n\n<p>As @Barmar mentioned in the comment, you also print the value of <code>character[count]</code> instead of <code>string[count]</code> which would cause <code>IndexError</code>.</p>\n\n<p>An easier way to check if the string is binary would be:</p>\n\n<pre><code>test_string = '010101'\nall_binary = all(c in '01' for c in test_string)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3471, "user_id": 316723, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/752df5a606619b92b23612feda4420ad?s=128&d=identicon&r=PG", "display_name": "naktinis", "link": "https://stackoverflow.com/users/316723/naktinis"}, "is_accepted": false, "score": 0, "last_activity_date": 1464815960, "last_edit_date": 1464815960, "creation_date": 1464815010, "answer_id": 37578735, "question_id": 37578628, "link": "https://stackoverflow.com/questions/37578628/python-checking-if-string-consists-only-of-1s-and-0s/37578735#37578735", "title": "Python, checking if string consists only of 1&#39;s and 0&#39;s", "body": "<p>Here's one of the ways you could rewrite your function and maintain a similar structure (looping through each character):</p>\n\n<pre><code>def fnIsBin(string):\n    for character in string:\n        if not character in '01':\n            return False\n    return True\n</code></pre>\n\n<p>You could also do it using regular expressions:</p>\n\n<pre><code>import re\ndef fnIsBin(string):\n    return re.match(r'^[10]+$', '01') is not None\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 6411645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/507bcc06a573d7f4b2ba209b7476df2a?s=128&d=identicon&r=PG&f=1", "display_name": "bansheemon", "link": "https://stackoverflow.com/users/6411645/bansheemon"}, "edited": false, "score": 0, "creation_date": 1464815770, "post_id": 37578755, "comment_id": 62644737, "body": "thank you, this is the clearest answer i got. :) i&#39;m learning python from srtach on codecaemy and i doesn&#39;t get more complicated code i was given by the others. :)"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1464815078, "creation_date": 1464815078, "answer_id": 37578755, "question_id": 37578628, "link": "https://stackoverflow.com/questions/37578628/python-checking-if-string-consists-only-of-1s-and-0s/37578755#37578755", "title": "Python, checking if string consists only of 1&#39;s and 0&#39;s", "body": "<p>You're printing <code>OK</code> for each character that's <code>0</code> or <code>1</code>, even though there may be a later character that isn't. You need to wait until the end of the loop to know that it's really OK.</p>\n\n<pre><code>def fnIsBin(string):\n    for character in string:\n        if character != '0' and character != '1':\n            print (character, \"ERROR\")\n            return False\n    print \"OK\"\n    return True\n</code></pre>\n\n<p>There's no need for <code>break</code> after <code>return False</code> -- returning from the function automatically breaks out of the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": false, "score": 2, "last_activity_date": 1465036848, "last_edit_date": 1465036848, "creation_date": 1465036536, "answer_id": 37629154, "question_id": 37578628, "link": "https://stackoverflow.com/questions/37578628/python-checking-if-string-consists-only-of-1s-and-0s/37629154#37629154", "title": "Python, checking if string consists only of 1&#39;s and 0&#39;s", "body": "<p>There are many ways to do this:</p>\n\n<p>Set:</p>\n\n<pre><code>fnInBin(s):\n    return set(s).issubset({'0', '1'}) and bool(s)\n</code></pre>\n\n<p>Regular expression:</p>\n\n<pre><code>fnInBin(s):\n    return bool(re.fullmatch('[01]+', s))\n</code></pre>\n\n<p>Integer conversion: </p>\n\n<pre><code>fnIsBin(s):\n    try:\n       int(s, 2)\n       return True\n    except ValueError:\n       return False\n</code></pre>\n\n<p>The last one will strip whitespace from the input, though. </p>\n\n<pre><code>fnIsBin('\\n 1   ') == True\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6411645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/507bcc06a573d7f4b2ba209b7476df2a?s=128&d=identicon&r=PG&f=1", "display_name": "bansheemon", "link": "https://stackoverflow.com/users/6411645/bansheemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3173, "favorite_count": 0, "accepted_answer_id": 37578755, "answer_count": 5, "score": 0, "last_activity_date": 1465036908, "creation_date": 1464814622, "last_edit_date": 1465034737, "question_id": 37578628, "link": "https://stackoverflow.com/questions/37578628/python-checking-if-string-consists-only-of-1s-and-0s", "title": "Python, checking if string consists only of 1&#39;s and 0&#39;s", "body": "<p>I'm trying to write a function that checks if given string is binary or not. I'm using a while loop to browse characters in string one by one. If all of them are 0's or 1's it's going to return True, if anything is not  - break the loop and return False.\nI've just written this tiny part of code, but it doesn't run. Why?</p>\n\n<pre><code>def fnIsBin(string):\n    count = 0\n    while count &lt; len(string):\n        character = string[count]\n        if character == '0' or character == '1':\n            print (count, character[count], \"OK\")\n            count = count+1\n            continue\n        else:\n            print (count, character[count], \"ERROR\")\n            return False\n            break\n</code></pre>\n\n<p>EDIT:<br>\nI also tried using 'set' to elude iterating with loop, but i don't quite get how does \"set(string)\" work. I got error that i cant consider it as a list. So how can I compare elements to 0 &amp; 1?</p>\n\n<pre><code>def fnIsBin(string):\ncharactersList = set(string)\nif len(charactersList) &gt; 2:\n    return False\nelse:\n    if (charactersList[0] == '0' or charactersList[0] == '1') and (charactersList[1] == '0' or charactersList[1] == '1'): #there i made error, how to deal with it?\n        return True\n    else:\n        return False\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1464818149, "post_id": 37578530, "comment_id": 62645764, "body": "City is a text column and you want to aggregate <i>max transacted city name</i>? Do you mean max of city count? Or the alphabetically highest city?"}, {"owner": {"reputation": 3617, "user_id": 5533254, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1285de90b169d6f6a99ed63ba93a6b64?s=128&d=identicon&r=PG&f=1", "display_name": "Satya", "link": "https://stackoverflow.com/users/5533254/satya"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1464843543, "post_id": 37578530, "comment_id": 62652310, "body": "@Parfait-Exactly!!! i want max of city count or you can say Favourite city..."}], "answers": [{"tags": [], "owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "is_accepted": false, "score": 1, "last_activity_date": 1464819191, "creation_date": 1464819191, "answer_id": 37579626, "question_id": 37578530, "link": "https://stackoverflow.com/questions/37578530/looping-over-a-dataframe-and-fetching-related-data-from-another-dataframe-panda/37579626#37579626", "title": "looping over a dataframe and fetching related data from another dataframe :PANDAS", "body": "<p>You can use the groupby and apply functionality more efficiently.</p>\n\n<p>Group by both city and maild and get the maximum date and total number of transactions. Sort by the max date.</p>\n\n<pre><code>g=d.groupby(['maild','city'])['txn_date'].agg(['count','max']).sort_values('max',ascending=False)\n</code></pre>\n\n<p>Then group that by just maild and get the index of the highest count</p>\n\n<pre><code>g.groupby(level='maild')['count'].agg(lambda x:pd.Series.argmax(x)[1])\n</code></pre>\n\n<p>-</p>\n\n<pre><code>maild\nsatya    a\nxyz      f\n</code></pre>\n\n<p>Btw, in your example you have transactions for satya for both a and b on 2016-01-01. How did you decide b was the right answer?</p>\n"}, {"comments": [{"owner": {"reputation": 3617, "user_id": 5533254, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1285de90b169d6f6a99ed63ba93a6b64?s=128&d=identicon&r=PG&f=1", "display_name": "Satya", "link": "https://stackoverflow.com/users/5533254/satya"}, "edited": false, "score": 0, "creation_date": 1464843994, "post_id": 37579682, "comment_id": 62652449, "body": "@Victor-Your suggestion works  fine on whole dataframe, but i have another condition like--- for each mail id i have to consider thier LAST 12Months Transactions...so how to fit that condition in your code? ex. if fo r &#39;satya&#39; say there is another txn date &#39;2014-02-01&#39; then that should not be considered as his last txn date is &#39;2016-06-01&#39;and delta of 365 days is &#39;2015-06-01&#39;... so ia have to achieve this situation also. can you please help!!!"}, {"owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "reply_to_user": {"reputation": 3617, "user_id": 5533254, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1285de90b169d6f6a99ed63ba93a6b64?s=128&d=identicon&r=PG&f=1", "display_name": "Satya", "link": "https://stackoverflow.com/users/5533254/satya"}, "edited": false, "score": 0, "creation_date": 1464877434, "post_id": 37579682, "comment_id": 62674081, "body": "it seems that you can just filter the entire dataset first to exclude everything less than 12 months ago?"}], "tags": [], "owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "is_accepted": false, "score": 1, "last_activity_date": 1464819951, "last_edit_date": 1464819951, "creation_date": 1464819472, "answer_id": 37579682, "question_id": 37578530, "link": "https://stackoverflow.com/questions/37578530/looping-over-a-dataframe-and-fetching-related-data-from-another-dataframe-panda/37579682#37579682", "title": "looping over a dataframe and fetching related data from another dataframe :PANDAS", "body": "<p>Here's an alternative that might be a little easier to read:</p>\n\n<pre><code>def f(g):\n    dc=g.groupby('city')['txn_date']\n    dc_sorted=dc.agg(['count','max']).sort_values('max',ascending=False)\n    return dc_sorted['count'].argmax()\n\nd.groupby(['maild']).apply(f)\n</code></pre>\n\n<p>However, I suspect that <code>apply</code> will have some performance issues on very large tables.</p>\n"}, {"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 0, "last_activity_date": 1464920526, "creation_date": 1464920526, "answer_id": 37604959, "question_id": 37578530, "link": "https://stackoverflow.com/questions/37578530/looping-over-a-dataframe-and-fetching-related-data-from-another-dataframe-panda/37604959#37604959", "title": "looping over a dataframe and fetching related data from another dataframe :PANDAS", "body": "<p>Consider an <code>apply</code> and <code>transform</code> function. The first runs group counts on <code>maild</code> and <code>city</code> according to time frame and second maximizes the count by <code>maild</code>. Finally the <code>groupby()</code> filtering at end keeps the pair whose count equals max count.</p>\n\n<pre><code>def last12mos(row):\n    row['count'] = 0\n    row.loc[row['txn_date'] &gt;= row['txn_date'].max() - timedelta(days=365), 'count'] = 1\n    row['count'] = row['count'].sum()\n    return(row)\n\nbasedf = basedf.groupby(['maild', 'city']).apply(last12mos)    \nbasedf['maxcount'] = basedf.groupby(['maild'])['count'].transform(max)\n\nfinaldf = basedf[basedf['count'] == basedf['maxcount']].\\\n                                            groupby(['maild', 'city']).aggregate(max)\n</code></pre>\n"}], "owner": {"reputation": 3617, "user_id": 5533254, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1285de90b169d6f6a99ed63ba93a6b64?s=128&d=identicon&r=PG&f=1", "display_name": "Satya", "link": "https://stackoverflow.com/users/5533254/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1464920526, "creation_date": 1464814232, "last_edit_date": 1464816135, "question_id": 37578530, "link": "https://stackoverflow.com/questions/37578530/looping-over-a-dataframe-and-fetching-related-data-from-another-dataframe-panda", "title": "looping over a dataframe and fetching related data from another dataframe :PANDAS", "body": "<p>I  have a dataframe having all transaction data of customers. columns  are mailid,txn_date,city. Now I have a situation where I have to consider customer's from 01jan2016 and for each of mailid in that I have to fetch their txn data from base file and by considering their last 12 Month data(txn date between last Txn date and -365days timedelta) then finding out their max transacted city name.</p>\n\n<p>sample base dataframe</p>\n\n<pre><code>#df\nmaild   txn_date   city\nsatya   2015-07-21  a\nsatya   2015-08-11  b\nsatya   2016-05-11  c\nxyz     2016-06-01  f\nsatya   2016-06-01  a\nsatya   2016-06-01  b\n</code></pre>\n\n<p>As I need cust from 2016-01-01 so I did</p>\n\n<pre><code>d = df[['mailid', 'txn-date']][df['txn_date'] &gt;= '2016-01-01']\n</code></pre>\n\n<p>now for each mailid in d I have to fetch each of their last 12Month transaction data  from base Dataframe df and calculate their  max city transacted. For that I am using a for loop like</p>\n\n<pre><code>x = d.groupby(['mailid'])['txn-date'].max().reset_index() #### finding their last transacted date to find out a 12 Month back date\nx['max_city'] = 'N'  ## giving default value as 'N'\nfor idx,row in x.iterrows():\n g = row[1].date()\n h = g-timedelta(days=365)  ###getting the last 12 Month date \n y = df[(df['mailid']==row[0]) &amp; (df['txn_date'] &gt;= str(h))]\n y.sort(['txn_date'],ascending=True,inplace=True)  ### sorting it bcoz i want to consider the last txn when count for one or more cities become same \n c = y.groupby(['mailid','city']).size().reset_index()\n v = c.groupby(['mailid'])[0].max().reset_index()\n dca = pd.merge(y,c,on=['mailid','city'],how='left')\n dcb = pd.merge(dca,v,on=['mailid',0])\n m = dcb.drop_duplicates(['mailid'],take_last=True)\n row[2] = m['city'].unique()[0]\n</code></pre>\n\n<p>o/p:</p>\n\n<pre><code>maild  max_city\nsatya   b   ### as in last 12 month 2016-06-01 2015-06-01  txn in a=2 b= 2 so last is b so will consider b as max city\nxyz     f\n</code></pre>\n\n<p>Though my code works(I am sure it is un-organised and no proper naming convention used  as I was practicing) for small chunk of data and the loop will hit the main Base dataFrame df  for each customer present in dataframe x.  </p>\n\n<p>So my main concern is if my df will be of 100Mln rows and x will be of 6mln Rows . then the for loop will executed 6Mln times and will hit df to fetch matched mailid data and do the operation to find max transacted city.</p>\n\n<p>if in 1 min it will calculate 3 mailid's max city. then for 6mln it will take 2mln minutes... which will be a serious problem...</p>\n\n<p>So need suggestion from you guys on how to optimize the scenario..thereby hitting main base fewer times and applying some more convenient PANDAS way to d that(which i am not able to do yet)...</p>\n\n<p>Please, suggest!!!!Thanks in Adv.  </p>\n"}, {"tags": ["python", "audio", "blender"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5991221, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-GuqXqNiTb50/AAAAAAAAAAI/AAAAAAAAAQ0/pQtDwyT08eM/photo.jpg?sz=128", "display_name": "FG tv", "link": "https://stackoverflow.com/users/5991221/fg-tv"}, "edited": false, "score": 0, "creation_date": 1464854825, "post_id": 37582630, "comment_id": 62657695, "body": "I put bpy.context.object.scale[0] to try to update de scale[1] value that is always changing because I baked it to a sound, but, even if the scale[1] is always changing, it prints always the same value"}, {"owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "reply_to_user": {"reputation": 93, "user_id": 5991221, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-GuqXqNiTb50/AAAAAAAAAAI/AAAAAAAAAQ0/pQtDwyT08eM/photo.jpg?sz=128", "display_name": "FG tv", "link": "https://stackoverflow.com/users/5991221/fg-tv"}, "edited": false, "score": 0, "creation_date": 1464859753, "post_id": 37582630, "comment_id": 62660985, "body": "Using <code>frame_set()</code> should give the values from the baked sound. Otherwise you could try using <a href=\"https://www.blender.org/api/blender_python_api_current/bpy.types.FCurve.html#bpy.types.FCurve.evaluate\" rel=\"nofollow noreferrer\"><code>fcurve.evaluate(frame)</code></a>"}], "tags": [], "owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "is_accepted": true, "score": 1, "last_activity_date": 1464860033, "last_edit_date": 1464860033, "creation_date": 1464841389, "answer_id": 37582630, "question_id": 37578517, "link": "https://stackoverflow.com/questions/37578517/blender-scale-value-not-updating/37582630#37582630", "title": "Blender scale value not updating", "body": "<p>You are looking at the wrong values.</p>\n\n<p>You have <code>v = scale[1]</code> then set <code>scale[0] = i</code> and then <code>print(v)</code> so your reading scale.y and changing scale.x then looking at scale.y</p>\n\n<p>It is better to use <a href=\"https://www.blender.org/api/blender_python_api_current/bpy.types.Scene.html#bpy.types.Scene.frame_set\" rel=\"nofollow\"><code>scene.frame_set()</code></a> to change frames via python.</p>\n\n<p>Another approach to getting a keyed value is to use <a href=\"https://www.blender.org/api/blender_python_api_current/bpy.types.FCurve.html#bpy.types.FCurve.evaluate\" rel=\"nofollow\"><code>fcurve.evaluate(frame)</code></a></p>\n\n<pre><code>import bpy\n\ns = bpy.context.scene.frame_start \ne = bpy.context.scene.frame_end\n\nvalues = []\nf = bpy.context.object.animation_data.action.fcurves.find('scale', index=1)\n\nfor i in range(s,e):\n    v = f.evaluate(i)\n    print('At frame ',str(i), ' value ' ,str(v))\n    values.extend([v])\n</code></pre>\n\n<p>And if you are planning to keyframe the values, you don't need to change frames as you can specify the frame in <a href=\"https://www.blender.org/api/blender_python_api_current/bpy.types.bpy_struct.html#bpy.types.bpy_struct.keyframe_insert\" rel=\"nofollow\"><code>keyframe_insert(data_path, frame=f)</code></a></p>\n\n<pre><code>obj.keyframe_insert('scale', frame=2)\nobj.keyframe_insert('scale', index=1, frame=5) # key only scale.y\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5991221, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-GuqXqNiTb50/AAAAAAAAAAI/AAAAAAAAAQ0/pQtDwyT08eM/photo.jpg?sz=128", "display_name": "FG tv", "link": "https://stackoverflow.com/users/5991221/fg-tv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 37582630, "answer_count": 1, "score": 0, "last_activity_date": 1464860033, "creation_date": 1464814159, "question_id": 37578517, "link": "https://stackoverflow.com/questions/37578517/blender-scale-value-not-updating", "title": "Blender scale value not updating", "body": "<p>When I run this script:</p>\n\n<pre><code>import bpy\nimport math\n\ns = bpy.context.scene.frame_start \ne = bpy.context.scene.frame_end\n\nvalues = []\nprint(s)\nprint(e)\n\nfor i in range(s,e):\n    bpy.context.scene.frame_current = i\n    print(i)\n    v = (bpy.context.object.scale[1])\n    bpy.context.object.scale[0] = i\n    print('At frame ',str(i), ' value ' ,str(v))\n    values.extend([bpy.context.object.scale[1]])\n</code></pre>\n\n<p>It gives me the right number of frames, but the value is always the same, even if the scale[1] of the object is baked to a sound, so it always change between the frames.</p>\n\n<p>It looks like Blender doesn't update the value and it always take the value of the frame during the which the text is ran.</p>\n\n<p>Any way to update the value during the running of the code in real time?</p>\n"}, {"tags": ["python", "ctypes", "named-pipes", "io-completion-ports"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1465028560, "post_id": 37578491, "comment_id": 62738102, "body": "Are you using 64-bit Python?  Try specifying <code>.argtypes</code> for all your functions to ensure items are marshaled to C correctly."}], "answers": [{"tags": [], "owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "is_accepted": true, "score": 0, "last_activity_date": 1465242505, "creation_date": 1465242505, "answer_id": 37665695, "question_id": 37578491, "link": "https://stackoverflow.com/questions/37578491/error-no-more-items-with-named-pipe-and-io-completion-port/37665695#37665695", "title": "ERROR_NO_MORE_ITEMS with named pipe and IO completion port", "body": "<p>I figured it out. A completion packet is queued after <strong>any</strong> operation on a pipe. It means that <code>GetQueuedCompletionStatus</code> will return after client connection, write and read operation.</p>\n\n<p>What was happening in my situation:</p>\n\n<ol>\n<li>I received data from external program. Completion packet was queued.</li>\n<li>I read a pipe. Another completion packet was queued.</li>\n<li>During the subsequent read, if there was no new data in the pipe, <code>ReadFile</code> returned 0 and <code>overlapped_struct.Internal</code> indicated ERROR_NO_MORE_ITEMS, which is perfectly correct: there was no new data in the pipe.</li>\n</ol>\n"}], "owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 37665695, "answer_count": 1, "score": 0, "last_activity_date": 1465242505, "creation_date": 1464814052, "last_edit_date": 1464865444, "question_id": 37578491, "link": "https://stackoverflow.com/questions/37578491/error-no-more-items-with-named-pipe-and-io-completion-port", "title": "ERROR_NO_MORE_ITEMS with named pipe and IO completion port", "body": "<p>I have a simple named pipe server implemented in python+ctypes:</p>\n\n<pre><code>pipe = windll.kernel32.CreateNamedPipeA('\\\\\\\\.\\\\pipe\\\\pipe_name', PIPE_ACCESS_DUPLEX | FILE_FLAG_OVERLAPPED, PIPE_TYPE_BYTE, 1, 0, 0, 0, None)\n\noverlapped_struct = OVERLAPPED()\n\nwindll.kernel32.ConnectNamedPipe(pipe, byref(overlapped_struct))\n\niocp = windll.kernel32.CreateIoCompletionPort(pipe, None, WPARAM(707070707), 0)\n\nwhile True:\n    bytes_transferred = DWORD()\n    completion_key = WPARAM()\n    overlapped_struct_ptr = POINTER(OVERLAPPED)()\n    windll.kernel32.GetQueuedCompletionStatus(iocp, byref(bytes_transferred), byref(completion_key), byref(overlapped_struct_ptr), INFINITE)\n\n    bytes_available = DWORD()\n    windll.kernel32.PeekNamedPipe(pipe, None, 0, None, byref(bytes_available))\n\n    buf = create_string_buffer(bytes_available.value)\n    ret_code = windll.kernel32.ReadFile(pipe, byref(buf), bytes_available.value, None, overlapped_struct_ptr)\n</code></pre>\n\n<p>It receives data from external program. I expect that <code>GetQueuedCompletionStatus</code> will return only when something arrives to the pipe, but it's not always the case. Sometimes, after it dequeues completion packet, I can see that <code>bytes_available == 0</code>, <code>ret_code == 0</code> and <code>overlapped_struct.Internal == 256</code> (which I assume means ERROR_NO_MORE_ITEMS).</p>\n\n<p>Any ideas on why does it happen?</p>\n"}, {"tags": ["python", "python-2.7", "google-api", "google-api-python-client", "vision"], "comments": [{"owner": {"reputation": 2725, "user_id": 2251058, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8ffc7bebb06ae9943708d99f3621c1b5?s=128&d=identicon&r=PG", "display_name": "Akshay Hazari", "link": "https://stackoverflow.com/users/2251058/akshay-hazari"}, "edited": false, "score": 0, "creation_date": 1496810696, "post_id": 37578483, "comment_id": 75806558, "body": "Have you found anything resolving Problem 1 <code>Insufficient tokens for quota group</code>. Is it because of many simultaneous requests."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "reply_to_user": {"reputation": 2725, "user_id": 2251058, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8ffc7bebb06ae9943708d99f3621c1b5?s=128&d=identicon&r=PG", "display_name": "Akshay Hazari", "link": "https://stackoverflow.com/users/2251058/akshay-hazari"}, "edited": false, "score": 0, "creation_date": 1496876037, "post_id": 37578483, "comment_id": 75846415, "body": "I never solved this :("}, {"owner": {"reputation": 2725, "user_id": 2251058, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8ffc7bebb06ae9943708d99f3621c1b5?s=128&d=identicon&r=PG", "display_name": "Akshay Hazari", "link": "https://stackoverflow.com/users/2251058/akshay-hazari"}, "edited": false, "score": 0, "creation_date": 1496897371, "post_id": 37578483, "comment_id": 75851628, "body": "Using the rest API instead was a better work around for this."}], "answers": [{"tags": [], "owner": {"reputation": 267, "user_id": 4601014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/955477854ff8eabf654172fe7c174a71?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4601014/isaac"}, "is_accepted": false, "score": -1, "last_activity_date": 1476704308, "creation_date": 1476704308, "answer_id": 40085414, "question_id": 37578483, "link": "https://stackoverflow.com/questions/37578483/google-vision-apis-label-detection/40085414#40085414", "title": "Google Vision API&#39;s label detection", "body": "<p>Try rebuilding the \"service\" for each loop/call to the image, so as to refresh the token</p>\n"}], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1476704308, "creation_date": 1464814016, "last_edit_date": 1464814379, "question_id": 37578483, "link": "https://stackoverflow.com/questions/37578483/google-vision-apis-label-detection", "title": "Google Vision API&#39;s label detection", "body": "<p><strong>Problem 1:</strong>  </p>\n\n<p>I'm using <code>Vision API's label detection</code> and I'm getting the following error: </p>\n\n<blockquote>\n  <p>\"<strong>HttpError 429</strong> when requesting\n  <a href=\"https://vision.googleapis.com/v1/images:annotate?alt=json\" rel=\"nofollow\">https://vision.googleapis.com/v1/images:annotate?alt=json</a> returned\n  \"Insufficient tokens for quota group and limit DefaultGroupUSER-100s\n  using the limit by ID mynumericid@mynumericid.\"</p>\n</blockquote>\n\n<p>I'm not issuing to many requests, about 9 per minute, which is way lower than the limit per 100 seconds ( <code>Queries/100s/User Limit 1,000</code> ), so I've no idea why this error message is displaying.</p>\n\n<hr>\n\n<p><strong>Problem 2</strong></p>\n\n<p>Instead of sending 9 requests, one per image (as I'm using above), I'm able to request then at once on the same request, the problem is that some images <strong>cannot be labeled</strong> and the response doesn't specify which ones, so it's impossible to know <strong>which label corresponds to which image</strong>, i.e:  </p>\n\n<p><strong>The request</strong> with <strong>9 images</strong> to be labeled:</p>\n\n<pre><code> service_request = service.images().annotate(body={\n        'requests': [{\n            'image': {\n                'content': image1.decode('UTF-8')\n            },\n             'image': {\n                'content': image2.decode('UTF-8')\n            },\netc..\n</code></pre>\n\n<hr>\n\n<p><strong>Response:</strong></p>\n\n<p>The response contains only <strong>8 labels</strong> and the image names aren't specified, so I've no idea which image couldn't be labeled.</p>\n\n<p>Example response:</p>\n\n<pre><code>{u'responses': [{u'labelAnnotations': [{u'score': 0.95578641, u'mid': u'/m/036qh8', u'description': u'produce'}, {u'score': 0.917763, u'mid': u'/m/02wbm', u'description': u'food'}, {u'score': 0.7463333, u'mid': u'/m/0270h', u'description': u'dessert'}, {u'score': 0.70616114, u'mid': u'/m/0krfg', u'description': u'meal'}, {u'score': 0.69225645, u'mid': u'/m/0f4s2w', u'description': u'vegetable'}, {u'score': 0.68722612, u'mid': u'/m/02xwb', u'description': u'fruit'}, {u'score': 0.58573318, u'mid': u'/m/0hz4q', u'description': u'breakfast'}, {u'score': 0.52691895, u'mid': u'/m/05cq63', u'description': u'kue'}]}]}\n</code></pre>\n\n<hr>\n\n<p>I'm aware that this question is very specific and I'm just hopping that one of you, with previous experience about this, can share it with me.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 948, "user_id": 2272115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb81bcc84a2c14ece9ebeb9c32fdff19?s=128&d=identicon&r=PG", "display_name": "user2272115", "link": "https://stackoverflow.com/users/2272115/user2272115"}, "edited": false, "score": 0, "creation_date": 1464814152, "post_id": 37578437, "comment_id": 62643896, "body": "Please provide an example of the text file contents, and what you have tried for logging into twitter."}, {"owner": {"reputation": 277, "user_id": 5195316, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh5.googleusercontent.com/-Q-_x7bkOeBA/AAAAAAAAAAI/AAAAAAAAAFI/oeTaj3FX4Rs/photo.jpg?sz=128", "display_name": "Coto TheArcher", "link": "https://stackoverflow.com/users/5195316/coto-thearcher"}, "reply_to_user": {"reputation": 948, "user_id": 2272115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb81bcc84a2c14ece9ebeb9c32fdff19?s=128&d=identicon&r=PG", "display_name": "user2272115", "link": "https://stackoverflow.com/users/2272115/user2272115"}, "edited": false, "score": 0, "creation_date": 1464819516, "post_id": 37578437, "comment_id": 62646280, "body": "Logging into twitter was not a problem. I coded that using:  driver.get(&quot;<a href=\"https://twitter.com&quot;\" rel=\"nofollow noreferrer\">twitter.com&quot;</a>) elem = driver.find_element_by_name(&#39;username&#39;) elem.send_keys(&quot;MyTwitterUsername&quot;) elem = driver.find_element_by_name(&#39;password&#39;) elem.send_keys(&quot;MyTwitterPassword&quot;) etc., and it worked just fine. The tweeting part is the issue."}], "owner": {"reputation": 277, "user_id": 5195316, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh5.googleusercontent.com/-Q-_x7bkOeBA/AAAAAAAAAAI/AAAAAAAAAFI/oeTaj3FX4Rs/photo.jpg?sz=128", "display_name": "Coto TheArcher", "link": "https://stackoverflow.com/users/5195316/coto-thearcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464819473, "creation_date": 1464813795, "last_edit_date": 1464819473, "question_id": 37578437, "link": "https://stackoverflow.com/questions/37578437/loading-lines-with-selenium", "title": "Loading lines with Selenium", "body": "<p>In Python 2.7, using Selenium, I want the script to open the 'masters.txt' file. Then, go to Twitter (while logged in beforehand), and post the line like so:</p>\n\n<pre><code>driver.get(\"https://twitter.com\")\nelem = driver.find_element_by_name('tweet')\nelem.send_keys(line1 + \" #worked\")\nelem = driver.find_element_by_xpath('//*[@id=\"timeline\"]/div[2]/div/form/div[2]/div[2]/button')\nelem.send_keys(Keys.RETURN)\n</code></pre>\n\n<p>then, the same, except:</p>\n\n<pre><code>elem.send_keys(line2 + \" #worked\")\n</code></pre>\n\n<p>then, the same, except:</p>\n\n<pre><code>elem.send_keys(line3 + \" #worked\")\n</code></pre>\n\n<p>etc...</p>\n\n<p>So, load every single line &amp; tweet it + \"with another text I've added\". How is that possible?</p>\n\n<p>Thanks in advance! :)</p>\n\n<p>EDIT: Example of 'master.txt' (text file) contents:</p>\n\n<pre><code>test\nblablabla\nawesome\nThis is an awesome Tweet\nsomething\nanother line\n</code></pre>\n\n<p>etc...</p>\n\n<p>What I've tried:\nf = open(\"masters.txt\")\nlines = f.readlines()\nfor line in lines:\n    elem.send_keys(line + \" #worked\")</p>\n\n<p>However that doesn't exactly work and messes it up etc... If someone could complete my code and write me what I'm looking for, that would be great! :)</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "is_accepted": false, "score": 0, "last_activity_date": 1464814069, "creation_date": 1464814069, "answer_id": 37578497, "question_id": 37578426, "link": "https://stackoverflow.com/questions/37578426/creating-a-stopwatch-progam-for-python-3-3-only-in-idle/37578497#37578497", "title": "Creating a Stopwatch progam for Python 3.3 only in IDLE", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/datetime.html#timedelta-objects\" rel=\"nofollow\"><code>datetime.timedelta()</code></a>:</p>\n\n<pre><code>import datetime\n\nprint(datetime.timedelta(seconds=total))\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>In [10]: print datetime.timedelta(seconds=10000000)\n115 days, 17:46:40\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3933, "user_id": 1821750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEYw6.png?s=128&g=1", "display_name": "Charles Addis", "link": "https://stackoverflow.com/users/1821750/charles-addis"}, "is_accepted": false, "score": 0, "last_activity_date": 1464816472, "last_edit_date": 1464816472, "creation_date": 1464815516, "answer_id": 37578859, "question_id": 37578426, "link": "https://stackoverflow.com/questions/37578426/creating-a-stopwatch-progam-for-python-3-3-only-in-idle/37578859#37578859", "title": "Creating a Stopwatch progam for Python 3.3 only in IDLE", "body": "<p>Think of it like this... Idle is really no different than coding in the interactive python interpreter which I do all the time (well, I use ipython).</p>\n\n<p>Think of your stopwatch like an object. What functionality does it have? Things like start, stop, reset.</p>\n\n<p>This may not be the most efficient way to solve the problem but here is what I would do.</p>\n\n<pre><code>&gt;&gt;&gt; import time\n&gt;&gt;&gt; class StopwatchException:\n    pass\n\n&gt;&gt;&gt; class IsRunningException(StopwatchException):\n    pass\n\n&gt;&gt;&gt; class NotRunningException(StopwatchException):\n    pass\n\n&gt;&gt;&gt; class Stopwatch():\n    def __init__(self):\n        self._times = []\n        self._is_running = False\n    def start(self):\n        if self._is_running:\n            raise IsRunningException\n        self._is_running = True\n        tracker = {\n            'start': time.time(),\n            'stop': None,\n            }\n        self._times.append(tracker)\n    def stop(self):\n        if not self._is_running:\n            raise NotRunningException\n        tracker = self._times[-1]\n        # the dict is mutable, and tracker is a shallow copy\n        tracker['stop'] = time.time()\n        #print(self._times[-1])\n        self._is_running = False\n    def reset(self):\n        if self._is_running:\n            raise IsRunningException\n        self._times = []\n    def total(self):\n        if self._is_running:\n            raise IsRunningException\n        total = 0.0\n        for t in self._times:\n            total += t['stop'] - t['start']\n        return total\n\n&gt;&gt;&gt; s = Stopwatch()\n&gt;&gt;&gt; s.start()\n&gt;&gt;&gt; s.stop()\n&gt;&gt;&gt; s.total()\n6.499619960784912\n&gt;&gt;&gt; s.reset()\n&gt;&gt;&gt; s.total()\n0.0\n</code></pre>\n\n<p>To me, anytime you want to model a real world object or \"thing\", OOP makes the most sense. Heres a simple argument for each element of the program:</p>\n\n<hr>\n\n<h2>Classes</h2>\n\n<ul>\n<li>StopwatchException \n\n<ul>\n<li>Base exception class for the stopwatch class.</li>\n</ul></li>\n<li>IsRunningException \n\n<ul>\n<li>Raised if the stopwatch is running when it should be stopped.</li>\n</ul></li>\n<li>NotRunningException \n\n<ul>\n<li>Raised if the stopwatch is not running when it should be.</li>\n</ul></li>\n<li>Stopwatch\n\n<ul>\n<li>This represents the actual stopwatch.</li>\n</ul></li>\n</ul>\n\n<h2>Stopwatch Class</h2>\n\n<ul>\n<li><strong>init</strong>\n\n<blockquote>\n  <p>A basic stopwatch class really only needs to instance variables. A variable that stores each start/stop time (allows them to be computed later) and a variable that stores the \"state\" of the stopwatch (on/off or running/stopped).</p>\n</blockquote></li>\n<li><code>start</code>\n\n<ol>\n<li>First we need to make sure the stopwatch isn't already running.</li>\n<li><blockquote>\n  <p>Then we need to set it's state to running and store the time in <code>self._times</code>.\n  I chose to use a local variable and store each time pair as a dictionary with the keys 'start' and 'stop'. I chose a dictionary because it is mutable. You could also have a list with index 0 being the start time and index 1 being the stop time. You cannot use a tuple for this since tuples are immutable.\n  Also, the \"temporary\" variable is not necessary but I used it for readability.</p>\n</blockquote></li>\n</ol></li>\n<li><code>stop</code>\n\n<ol>\n<li>First we need to make sure the stopwatch is actually running.</li>\n<li><blockquote>\n  <p>Then we set the state as 'stopped' (using our boolean <code>self._is_running</code>) and store our stop time, similar to what we did with <code>start</code>. I think it doesn't matter whether you set the boolean at the beginning or the end, although I chose to set it at the beginning of the start function and the end of the stop function so that the times would not include the time needed to update a boolean variable (even though it's a trivial task, it could be much more complex in more complex programs).</p>\n</blockquote></li>\n</ol></li>\n<li><code>reset</code>\n\n<ol>\n<li>Make sure the stopwatch isn't running</li>\n<li>Set <code>self._times</code> to be an empty list.</li>\n</ol></li>\n<li><code>total</code>\n\n<ol>\n<li>Make sure the stopwatch isn't running.\n\n<ul>\n<li>Optional: You can stop the stopwatch here if it's running, but I prefer to raise an exception.</li>\n</ul></li>\n<li>Iterate through each list item in <code>self._times</code> and calculate the difference between stop and start.</li>\n</ol></li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 6411656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-zkOlW0ewjew/AAAAAAAAAAI/AAAAAAAATfk/aGns7Sr5rHg/photo.jpg?sz=128", "display_name": "Michael Brown", "link": "https://stackoverflow.com/users/6411656/michael-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464816472, "creation_date": 1464813774, "last_edit_date": 1464813831, "question_id": 37578426, "link": "https://stackoverflow.com/questions/37578426/creating-a-stopwatch-progam-for-python-3-3-only-in-idle", "title": "Creating a Stopwatch progam for Python 3.3 only in IDLE", "body": "<p>I have an assignment where I need to create a stopwatch, but only for IDLE. Here's what I have so far, I'm not sure how to convert the times to normal time.</p>\n\n<pre><code>import time\nstart = 0\ndef stopwatch():\n    while True:\n        command = input(\"Type: start, stop, reset, or quit: \\n\")\n        if (command == \"quit\"):\n            break\n        elif (command == \"start\"):\n            start = time.time()\n            print(start)\n            stopwatch2()\n        elif (command == \"stop\"):\n            stopwatch()\n        elif (command == \"reset'\"):\n              stopwatch()\n        else :\n            break\n\ndef stopwatch2():\n    while True:\n        command = input(\"Type: stop, reset, or quit: \\n\")\n        if (command == \"quit\"):\n            break\n        elif (command == \"stop\"):\n            total = time.time() - start\n            print(total)\n            stopwatch()\n        elif (command == \"reset'\"):\n              stopwatch()\n        else:\n            break\n\nstopwatch()\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 7684, "user_id": 988966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANBfx.jpg?s=128&g=1", "display_name": "axiom", "link": "https://stackoverflow.com/users/988966/axiom"}, "edited": false, "score": 0, "creation_date": 1464818112, "post_id": 37578416, "comment_id": 62645745, "body": "Your headers are jumbled up?"}], "answers": [{"tags": [], "owner": {"reputation": 7684, "user_id": 988966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANBfx.jpg?s=128&g=1", "display_name": "axiom", "link": "https://stackoverflow.com/users/988966/axiom"}, "is_accepted": true, "score": 4, "last_activity_date": 1464822865, "last_edit_date": 1464822865, "creation_date": 1464815636, "answer_id": 37578882, "question_id": 37578416, "link": "https://stackoverflow.com/questions/37578416/precision-and-recall-on-pyspark-decisiontree-model-diverges-from-manual-results/37578882#37578882", "title": "Precision and Recall on PySpark DecisionTree model diverges from manual results", "body": "<p>The problem is that you are using MultiClassMetrics for processing output of a Binary classifier. From the <a href=\"https://spark.apache.org/docs/1.5.2/api/java/index.html?org/apache/spark/mllib/evaluation/MulticlassMetrics.html\" rel=\"nofollow\">docs</a>:</p>\n\n<pre><code>recall()\nReturns recall (equals to precision for multiclass classifier because sum of all false positives is equal to sum of all false negatives)\n</code></pre>\n\n<p>To get correct results, use recall(label=1):</p>\n\n<pre><code>&gt;&gt;&gt; print metricsp.recall(label=1)\n0.75\n</code></pre>\n\n<p>BTW, headers in your <code>df.show()</code> seem to be jumbled up, it should be:</p>\n\n<pre><code>+----------+------------+\n|prediction|target_index|\n+----------+------------+\n|       0.0|         1.0|\n|       0.0|         0.0|\n|       0.0|         0.0|\n|       1.0|         1.0|\n|       1.0|         0.0|\n|       1.0|         0.0|\n|       1.0|         1.0|\n|       1.0|         1.0|\n+----------+------------+\n</code></pre>\n"}], "owner": {"reputation": 16296, "user_id": 307283, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XCWqj.jpg?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/307283/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1561, "favorite_count": 0, "accepted_answer_id": 37578882, "answer_count": 1, "score": 2, "last_activity_date": 1464876734, "creation_date": 1464813752, "last_edit_date": 1464876734, "question_id": 37578416, "link": "https://stackoverflow.com/questions/37578416/precision-and-recall-on-pyspark-decisiontree-model-diverges-from-manual-results", "title": "Precision and Recall on PySpark DecisionTree model diverges from manual results", "body": "<p>I trained a <code>DecisionTree</code> model on a PySpark dataframe. The resulting dataframe is simulated below:</p>\n\n<pre><code>rdd = sc.parallelize(\n    [\n        (0., 1.), \n        (0., 0.), \n        (0., 0.), \n        (1., 1.), \n        (1.,0.), \n        (1.,0.),\n        (1.,1.),\n        (1.,1.)\n    ]\n)\ndf = sqlContext.createDataFrame(rdd, [\"prediction\", \"target_index\"])\ndf.show()\n+----------+------------+\n|prediction|target_index|\n+----------+------------+\n|       0.0|         1.0|\n|       0.0|         0.0|\n|       0.0|         0.0|\n|       1.0|         1.0|\n|       1.0|         0.0|\n|       1.0|         0.0|\n|       1.0|         1.0|\n|       1.0|         1.0|\n+----------+------------+\n</code></pre>\n\n<p>So let's calculate a metric, recall:</p>\n\n<pre><code>metricsp = MulticlassMetrics(df.rdd)\nprint metricsp.recall()\n0.625\n</code></pre>\n\n<p>Ok. Let's try to confirm that this is correct:</p>\n\n<pre><code>tp = df[(df.target_index == 1) &amp; (df.prediction == 1)].count()\ntn = df[(df.target_index == 0) &amp; (df.prediction == 0)].count()\nfp = df[(df.target_index == 0) &amp; (df.prediction == 1)].count()\nfn = df[(df.target_index == 1) &amp; (df.prediction == 0)].count()\nprint \"True Positives:\", tp\nprint \"True Negatives:\", tn\nprint \"False Positives:\", fp\nprint \"False Negatives:\", fn\nprint \"Total\", df.count()\nTrue Positives: 3\nTrue Negatives: 2\nFalse Positives: 2\nFalse Negatives: 1\nTotal 8\n</code></pre>\n\n<p>and calculate recall:</p>\n\n<pre><code>r = float(tp)/(tp + fn)\nprint \"recall\", r\n\nrecall 0.75\n</code></pre>\n\n<p>and the results differ. What I'm doing wrong?</p>\n\n<p>BTW, all functions from the <code>Metrics</code> class are giving the same results:</p>\n\n<pre><code>print metricsp.recall()\nprint metricsp.precision()\nprint metricsp.fMeasure()\n0.625\n0.625\n0.625\n</code></pre>\n"}, {"tags": ["python", "selenium", "cookies", "phantomjs"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 0, "creation_date": 1464861319, "post_id": 37578697, "comment_id": 62662137, "body": "It is available in stackoverflow website,but it can&#39;t work in other website.So does it have a common way to overcom this issue?"}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "reply_to_user": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 0, "creation_date": 1464862309, "post_id": 37578697, "comment_id": 62662874, "body": "It works with other websites. Note that you first need to set the domain with <code>driver.get(&#39;http:&#47;&#47;...&#39;)</code> before calling <code>driver.add_cookie</code> and make sure that domain of the cookie is the same as the one from the current page."}, {"owner": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 0, "creation_date": 1464864321, "post_id": 37578697, "comment_id": 62664214, "body": "Yeah,I run this code without error,but when I changed <code>driver.get(&#39;http:&#47;&#47;stackoverflow.com&#47;&#39;)</code> to <code>driver.get(&#39;https:&#47;&#47;github.com&#47;&#39;)</code>  ,it will raise <code>KeyError: &#39;expiry&#39;</code>.And it will raise <code>&quot;errorMessage&quot;:&quot;Unable to set Cookie&quot;</code> in other websites,"}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "reply_to_user": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 0, "creation_date": 1464864884, "post_id": 37578697, "comment_id": 62664569, "body": "I would remove the domain and check that the key exists: <code>driver.add_cookie({k: cookie[k] for k in (&#39;name&#39;, &#39;value&#39;, &#39;path&#39;, &#39;expiry&#39;) if k in cookie})</code>"}, {"owner": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 1, "creation_date": 1464866686, "post_id": 37578697, "comment_id": 62665716, "body": "I remove the &#39;domain&#39; as what you do,but this code can&#39;t correctly process the &#39;<a href=\"https://github.com/\" rel=\"nofollow noreferrer\">github.com</a>&#39; website yet,it raises <code>&quot;errorMessage&quot;:&quot;Can only set Cookies for the current domain&quot;</code>"}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "reply_to_user": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 0, "creation_date": 1464867531, "post_id": 37578697, "comment_id": 62666329, "body": "I&#39;ve just tested this example with <code>.get(&#39;https:&#47;&#47;github.com&#47;login&#39;)</code> and without the <code>domain</code> key. I don&#39;t get any exception and the cookies are created as expected."}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "reply_to_user": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 0, "creation_date": 1464867763, "post_id": 37578697, "comment_id": 62666483, "body": "Note that you cannot insert cookies from a domain that is different from the current page domain. You need to call <code>.get(&quot;http...&quot;)</code> first to set the domain."}, {"owner": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "edited": false, "score": 0, "creation_date": 1464868701, "post_id": 37578697, "comment_id": 62667147, "body": "Actually I always call .get(&#39;http...&#39;) before add cookies.Here is the total code: <code>from selenium import webdriver phantompath=&#39;C:\\\\code\\\\browser\\\\phantomjs-2.1.1-windows\\\\pha&zwnj;&#8203;ntomjs-2.1.1-windows&zwnj;&#8203;\\\\bin\\\\phantomjs.exe&zwnj;&#8203;&#39; driver = webdriver.PhantomJS(executable_path=phantompath) driver.get(&#39;https:&#47;&#47;github.com&#47;login&#39;) cookies = driver.get_cookies() print(cookies) driver.delete_all_cookies()  for cookie in cookies :     driver.add_cookie({k: cookie[k] for k in (&#39;name&#39;, &#39;value&#39; , &#39;path&#39;,&#39;expiry&#39;)})</code>After I press F5 key, it will raise &quot;errorMessage&quot;:&quot;Can only set Cookies for the current domain&quot;"}, {"owner": {"reputation": 85078, "user_id": 31610, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/20571f32acd27d2cf5f1b1f42ea1a75b?s=128&d=identicon&r=PG", "display_name": "Geo", "link": "https://stackoverflow.com/users/31610/geo"}, "edited": false, "score": 0, "creation_date": 1483542395, "post_id": 37578697, "comment_id": 70139523, "body": "The <code>delete_all_cookies</code> part was really useful. Thank you!"}], "tags": [], "owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "is_accepted": true, "score": 6, "last_activity_date": 1464814831, "creation_date": 1464814831, "answer_id": 37578697, "question_id": 37578397, "link": "https://stackoverflow.com/questions/37578397/how-to-set-cookies-in-phantomjs-using-selenium-with-python/37578697#37578697", "title": "How to set cookies in phantomjs using selenium with python?", "body": "<p>The PhantomJS driver doesn't support all the keys from the cookie dictionary. One way to overcome this issue is to select the keys:</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.PhantomJS()\ndriver.get('http://stackoverflow.com/')\n\ncookies = driver.get_cookies()\n\ndriver.delete_all_cookies()\n\nfor cookie in cookies :\n    driver.add_cookie({k: cookie[k] for k in ('name', 'value', 'domain', 'path', 'expiry')})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 7802982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a9c9178723b80a1047a8a03c7db7fd?s=128&d=identicon&r=PG&f=1", "display_name": "HiddenStrawberry", "link": "https://stackoverflow.com/users/7802982/hiddenstrawberry"}, "reply_to_user": {"reputation": 8268, "user_id": 7602518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ddcddc4afafdfc5603b2473b191c74f?s=128&d=identicon&r=PG", "display_name": "Pedro Castilho", "link": "https://stackoverflow.com/users/7602518/pedro-castilho"}, "edited": false, "score": 0, "creation_date": 1491132697, "post_id": 43162218, "comment_id": 73409624, "body": "@Pedro Castilho Thanks"}, {"owner": {"reputation": 2397, "user_id": 5209435, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d14a78299ebf996ea9b9054cc3bd26ba?s=128&d=identicon&r=PG", "display_name": "Matt Stannett", "link": "https://stackoverflow.com/users/5209435/matt-stannett"}, "edited": false, "score": 0, "creation_date": 1510797789, "post_id": 43162218, "comment_id": 81591832, "body": "As an addition to @HiddenStrawberry&#39;s answer above, the dot/period infront of the domain is required even for values such as <code>localhost</code> - as I found out the hard way.  Chrome and Firefox drivers would add the cookie with the domain set to <code>localhost</code> but the PhantomJS driver would only successfully add the cookie if the domain was set to <code>.localhost</code>."}], "tags": [], "owner": {"reputation": 61, "user_id": 7802982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a9c9178723b80a1047a8a03c7db7fd?s=128&d=identicon&r=PG&f=1", "display_name": "HiddenStrawberry", "link": "https://stackoverflow.com/users/7802982/hiddenstrawberry"}, "is_accepted": false, "score": 6, "last_activity_date": 1491132617, "last_edit_date": 1491132617, "creation_date": 1491082135, "answer_id": 43162218, "question_id": 37578397, "link": "https://stackoverflow.com/questions/37578397/how-to-set-cookies-in-phantomjs-using-selenium-with-python/43162218#43162218", "title": "How to set cookies in phantomjs using selenium with python?", "body": "<p>You need to change the domain parameter for each cookie. The domain field must be formatted like this:</p>\n\n<pre><code>driver = webdriver.PhantomJS()\ndriver.get('http://www.baidu.com')\ndriver.delete_all_cookies()\n\nfor item in cookie_dictionary: \n    driver.add_cookie({\n      'domain': '.baidu.com', # note the dot at the beginning\n      'name': item['name'],\n      'value': item['value'],\n      'path': '/',\n      'expires': None\n    })\n\ndriver.get('http://www.baidu.com')\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4619596, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f2d9d2ffc2a4b5f015ffa5e5ac5c556a?s=128&d=identicon&r=PG&f=1", "display_name": "Louise", "link": "https://stackoverflow.com/users/4619596/louise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11527, "favorite_count": 4, "accepted_answer_id": 37578697, "answer_count": 2, "score": 5, "last_activity_date": 1491132617, "creation_date": 1464813666, "question_id": 37578397, "link": "https://stackoverflow.com/questions/37578397/how-to-set-cookies-in-phantomjs-using-selenium-with-python", "title": "How to set cookies in phantomjs using selenium with python?", "body": "<p><a href=\"https://i.stack.imgur.com/gMWqc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gMWqc.png\" alt=\"enter image description here\"></a></p>\n\n<p>It raise an error message said \"Can only set Cookies for the current domain\",but all I did is just put the old cookies in.Sometime I add the 'correct' domain,it will raise error Message \"Unable to set Cookie\".\nAnd I tested it in Firefox,Firefox also cant work.</p>\n\n<pre><code>from selenium import webdriver\ndriver = webdriver.PhantomJS(executable_path=phantompath)\ndriver.get('http://stackoverflow.com/')\ndriver.get_screenshot_as_file('1.png')\ncookies = driver.get_cookies()\ndriver.delete_all_cookies()\ndriver.get_cookies()\nfor cookie in cookies:\n    driver.add_cookie(cookie)\n</code></pre>\n"}, {"tags": ["python", "dictionary", "pandas"], "comments": [{"owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 1, "creation_date": 1464813721, "post_id": 37578346, "comment_id": 62643647, "body": "Why not use <code>json</code>?"}, {"owner": {"reputation": 23, "user_id": 4420947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rqhKs5z7Q-I/AAAAAAAAAAI/AAAAAAAAhxw/KiCsDbvOSLA/photo.jpg?sz=128", "display_name": "R Ross", "link": "https://stackoverflow.com/users/4420947/r-ross"}, "reply_to_user": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1464816472, "post_id": 37578346, "comment_id": 62645084, "body": "I&#39;m stuck with this output regrettably."}, {"owner": {"reputation": 2061, "user_id": 4734216, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a9b07b624d0fd036fbfbc572e86ba22?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/4734216/d-adams"}, "edited": false, "score": 0, "creation_date": 1464834831, "post_id": 37578346, "comment_id": 62650114, "body": "what is duplicate about the key value pairs?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4420947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rqhKs5z7Q-I/AAAAAAAAAAI/AAAAAAAAhxw/KiCsDbvOSLA/photo.jpg?sz=128", "display_name": "R Ross", "link": "https://stackoverflow.com/users/4420947/r-ross"}, "edited": false, "score": 0, "creation_date": 1464838450, "post_id": 37580997, "comment_id": 62650880, "body": "In python3 you will need to call the appropriate namespace, eg. collections.Mapping."}, {"owner": {"reputation": 1205, "user_id": 2726279, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/02dd604908396fad7f3a6fb7df912ba2?s=128&d=identicon&r=PG", "display_name": "Tim Hoffmann", "link": "https://stackoverflow.com/users/2726279/tim-hoffmann"}, "reply_to_user": {"reputation": 23, "user_id": 4420947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rqhKs5z7Q-I/AAAAAAAAAAI/AAAAAAAAhxw/KiCsDbvOSLA/photo.jpg?sz=128", "display_name": "R Ross", "link": "https://stackoverflow.com/users/4420947/r-ross"}, "edited": false, "score": 0, "creation_date": 1464902383, "post_id": 37580997, "comment_id": 62689374, "body": "You mean collections.abc.Mapping. Btw. would you accept the above answer as a solution?"}, {"owner": {"reputation": 23, "user_id": 4420947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rqhKs5z7Q-I/AAAAAAAAAAI/AAAAAAAAhxw/KiCsDbvOSLA/photo.jpg?sz=128", "display_name": "R Ross", "link": "https://stackoverflow.com/users/4420947/r-ross"}, "edited": false, "score": 0, "creation_date": 1464903896, "post_id": 37580997, "comment_id": 62689986, "body": "Sorry. My first SE post. Will do"}], "tags": [], "owner": {"reputation": 1205, "user_id": 2726279, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/02dd604908396fad7f3a6fb7df912ba2?s=128&d=identicon&r=PG", "display_name": "Tim Hoffmann", "link": "https://stackoverflow.com/users/2726279/tim-hoffmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1464828533, "creation_date": 1464828533, "answer_id": 37580997, "question_id": 37578346, "link": "https://stackoverflow.com/questions/37578346/extract-values-from-heavily-nested-list-of-dictionaries-with-duplicate-key-value/37580997#37580997", "title": "Extract Values from heavily nested list of dictionaries with duplicate key value pairs", "body": "<p>If you know that the data will have exactly the format from above and you really just need these two values, you can access it directly (assuming <code>data</code> is your above structure):</p>\n\n<pre><code>print data[0]['Rows'][2]['Rows'][3]['Cells'][1]['Value']\nprint data[0]['Rows'][2]['Rows'][3]['Cells'][2]['Value']\n</code></pre>\n\n<p>However, this is error prone, both in writing down the correct expression and with respect to changes of the order of the lists (which might not be defined in your format). Since there is a semantical structure behind the data, you could translate the raw data back into an easily accessible object. You might want to change some details but this is a good starting point:</p>\n\n<pre><code>from collections import Mapping\nimport pandas as pd\n\nclass Report(Mapping):\n    def __init__(self, data):\n        self.sections = OrderedDict()\n        for row in data.pop('Rows'):\n            getattr(self, 'make_%s' % row['RowType'])(row)\n        self.__dict__.update(data)\n\n    def make_Header(self, row):\n        self.header = [c['Value'] for c in row['Cells']]\n\n    def make_Section(self, sec):\n        def make_row(row):\n            cells = [c['Value'] for c in row['Cells']]\n            return pd.Series(map(float, cells[1:]), name=cells[0])\n\n        self.sections[sec['Title']] = pd.DataFrame(make_row(r) for r in sec['Rows'])\n\n    def __getitem__(self, item):\n        return self.sections[item]\n\n    def __len__(self):\n        return len(self.sections)\n\n    def __iter__(self):\n        return iter(self.sections)\n\n\nreport = Report(data[0])\nprint report.ReportName\nprint report['Cash and Cash Equivalents']\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4420947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rqhKs5z7Q-I/AAAAAAAAAAI/AAAAAAAAhxw/KiCsDbvOSLA/photo.jpg?sz=128", "display_name": "R Ross", "link": "https://stackoverflow.com/users/4420947/r-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 37580997, "answer_count": 1, "score": 1, "last_activity_date": 1464828533, "creation_date": 1464813479, "question_id": 37578346, "link": "https://stackoverflow.com/questions/37578346/extract-values-from-heavily-nested-list-of-dictionaries-with-duplicate-key-value", "title": "Extract Values from heavily nested list of dictionaries with duplicate key value pairs", "body": "<p>Trying to extract Total Cash and Cash Equivalent values from complex and messy list of dictionaries. A shortened version of the structure follows below. </p>\n\n<p>I've tried: maps, Dataframe.from_dict &amp; .from_records. Trying to avoid using RE.</p>\n\n<p>I'm stumped.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> [{u'Fields': [],\r\n  u'ReportDate': u'2 June 2016',\r\n  u'ReportID': u'BalanceSheet',\r\n  u'ReportName': u'Balance Sheet',\r\n  u'ReportTitles': [u'Balance Sheet',\r\n                    u'Test Company',\r\n                    u'As at 30 June 2016'],\r\n  u'ReportType': u'BalanceSheet',\r\n  u'Rows': [{u'Cells': [{u'Value': u''},\r\n                        {u'Value': u'30 Jun 2016'},\r\n                        {u'Value': u'30 Jun 2015'}],\r\n             u'RowType': u'Header'},\r\n            {u'RowType': u'Section', u'Rows': [], u'Title': u'Assets'},\r\n            {u'RowType': u'Section',\r\n             u'Rows': [{u'Cells': [{u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'c0bxx922-cc31-4d53-b060-cbf23511`2533'}],\r\n                                    u'Value': u'Test Bank 1'},\r\n                                   {u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'c1b4xx22-cc31-4d53-b060-cb45282533'}],\r\n                                    u'Value': u'5555.20'},\r\n                                   {u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'c2b44922-cc31-4d53-b060-cbf4532582533'}],\r\n                                    u'Value': u'5555.20'}],\r\n                        u'RowType': u'Row'},\r\n                       {u'Cells': [{u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'290c7c3c-a712-4ads6f-9a2f-3d5258aad5a9e'}],\r\n                                    u'Value': u'Test Bank 2'},\r\n                                   {u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'490c7c32-axxxdf6f-9a2f-3db682a3ad5a9e'}],\r\n                                    u'Value': u'55555.20'},\r\n                                   {u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'490xxc3c-a71-adsf6f-9a2f-3d3aad5a9e'}],\r\n                                    u'Value': u'55555.20'}],\r\n                        u'RowType': u'Row'},\r\n                       {u'Cells': [{u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'c6d4da40-f0df1b0-8f7d-xx45b1405'}],\r\n                                    u'Value': u'Test Bank 3'},\r\n                                   {u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'c6d4da4fg-df-41b0-8f7d-54xx345b1405'}],\r\n                                    u'Value': u'5555.20'},\r\n                                   {u'Attributes': [{u'Id': u'account',\r\n                                                     u'Value': u'c6d4dafgss-9-41b0-8f7d-60xx5b1405'}],\r\n                                    u'Value': u'5555.20'}],\r\n                        u'RowType': u'Row'},\r\n                    {u'Cells': [{u'Value': u'Total Cash and Cash Equivalents'},\r\n                                {u'Value': u'5555555.20'},\r\n                                {u'Value': u'5555555.20'}],\r\n                     u'RowType': u'SummaryRow'}],\r\n          u'Title': u'Cash and Cash Equivalents'},\r\n         {u'RowType': u'Section',</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "graph"], "answers": [{"comments": [{"owner": {"reputation": 3019, "user_id": 204634, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4a229e97e0c0282fc51cba8082d53250?s=128&d=identicon&r=PG", "display_name": "lorenzog", "link": "https://stackoverflow.com/users/204634/lorenzog"}, "edited": false, "score": 2, "creation_date": 1464815291, "post_id": 37578709, "comment_id": 62644494, "body": "That looks sensible. Obviously I had found that link 2 minutes after writing my post..."}], "tags": [], "owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "is_accepted": true, "score": 2, "last_activity_date": 1464827218, "last_edit_date": 1464827218, "creation_date": 1464814877, "answer_id": 37578709, "question_id": 37578327, "link": "https://stackoverflow.com/questions/37578327/loading-and-saving-graphs-in-python/37578709#37578709", "title": "Loading and saving graphs in python", "body": "<p><a href=\"https://networkx.github.io/\" rel=\"nofollow\">NetworkX</a> provides abundant file formats for reading and writing graphs. Refer to <a href=\"https://networkx.github.io/documentation/development/reference/readwrite.html\" rel=\"nofollow\">Reading and writing graphs</a> for the detailed description. For instance,</p>\n\n<pre><code>import networkx as nx\n\n# Create a graph\nG = nx.florentine_families_graph()\n\n# Save to a file\nfilename = 'florentine_families_graph.graphml'\nG = nx.write_graphml(G, filename)\n\n# Load from a file\nfilename = 'florentine_families_graph.graphml'\nG = nx.read_graphml(filename)\n</code></pre>\n"}], "owner": {"reputation": 3019, "user_id": 204634, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4a229e97e0c0282fc51cba8082d53250?s=128&d=identicon&r=PG", "display_name": "lorenzog", "link": "https://stackoverflow.com/users/204634/lorenzog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 1, "accepted_answer_id": 37578709, "answer_count": 1, "score": 2, "last_activity_date": 1464827218, "creation_date": 1464813410, "last_edit_date": 1495539850, "question_id": 37578327, "link": "https://stackoverflow.com/questions/37578327/loading-and-saving-graphs-in-python", "title": "Loading and saving graphs in python", "body": "<p>I need to create a graph based on a set of input files. Since those files could be loaded during separate iterations, I need to <strong>save the graph</strong> and be able to add to it after <strong>re-loading the graph information from file</strong>.</p>\n\n<p>The obvious choice seems <a href=\"http://graphviz.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">graphviz</a> but the python API doesn't seem to allow loading. <a href=\"https://github.com/erocarrera/pydot\" rel=\"nofollow noreferrer\">PyDot</a> has a <code>parse_dot_data</code> file and is also referenced in <a href=\"https://stackoverflow.com/a/36388704/204634\">this answer</a> but the documentation is non-existing and there's no clear way to 'append' to a graph. Then there's <a href=\"https://networkx.readthedocs.io/en/stable/index.html\" rel=\"nofollow noreferrer\">networkX</a> which seem to have the <a href=\"https://networkx.readthedocs.io/en/stable/index.html\" rel=\"nofollow noreferrer\">ability to load</a> although it's nowhere in the documentation to be found. Lastly there's <a href=\"https://graph-tool.skewed.de/static/doc/index.html\" rel=\"nofollow noreferrer\">graph-tool</a> which is overkill and requires more libraries and tool than I need for this simple job.</p>\n\n<p>I'm sure this must be a solved problem and I'm reluctant to \"reinvent the wheel\" and write a database/persistence layer to accomplish this.</p>\n\n<p>How can I make a simple graph in Python, save it somewhere and load it when needed?</p>\n"}, {"tags": ["python", "dictionary", "heat"], "comments": [{"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1464813588, "post_id": 37578325, "comment_id": 62643579, "body": "You need to map the [-25, 25] z-axis values to RGB values."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464815689, "post_id": 37578325, "comment_id": 62644693, "body": "Try <a href=\"http://stanford.edu/~mwaskom/software/seaborn/\" rel=\"nofollow noreferrer\"><code>seaborn</code></a>."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 2, "creation_date": 1464821230, "post_id": 37578325, "comment_id": 62646877, "body": "<a href=\"http://matplotlib.org/gallery.html#\" rel=\"nofollow noreferrer\">Visit the Gallery</a>, find something that has a feature you want, study the example code, try to adapt it to your problem, visit the <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.colorbar\" rel=\"nofollow noreferrer\">API docs</a>."}], "owner": {"reputation": 31, "user_id": 2596369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874a1a8b848786df69716a744ae0fbaf?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2596369/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464813408, "creation_date": 1464813408, "question_id": 37578325, "link": "https://stackoverflow.com/questions/37578325/how-to-create-a-heat-map-in-python-with-colorbar-and-hight-resolution-values-in", "title": "How to create a Heat Map in Python with Colorbar and hight resolution values in X, Y?", "body": "<p>I have the next code in python to generate a 3D figure with MatPlotLib, but i need your help to change my code in order to be able to create a Heat Map instead the 3D figure.</p>\n\n<p>My actual code:</p>\n\n<p>Data Source-->\ndata.dat  contains:</p>\n\n<p><em>(1st column is 'x', \n2nd column is 'y' \nand third column is 'z')</em></p>\n\n<pre><code>0.00    0.00    0.38\n1.11    0.00    0.38\n.\n.\n.\n95.00    1.80    0.38\n.\n.\n.\n</code></pre>\n\n<p>This file have 3231 similar rows...\nCode:</p>\n\n<pre><code>**f_name='/home/data.dat'\ndata=np.loadtxt(f_name, delimiter='\\t', unpack=True)\ndatos=np.array(data.tolist())\nx = datos[0,:]\ny = datos[1,:]\nz = datos[2,:]\nxi = np.linspace(min(x), max(x))\nyi = np.linspace(min(y), max(y))\nX, Y = np.meshgrid(xi, yi)\nZ = griddata(x, y, z, xi, yi)\nZ[np.isnan(Z)] = 0\nfig = plt.figure()\nax = Axes3D(fig)\nsurf= ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=cm.jet_r ,     linewidth=1, antialiased=True)\nax.set_zlim(-25, 25)\nax.set_xlim(0, 100)\nax.set_ylim(0, 102)\n#more resolution:\nstart_x, end_x = ax.get_xlim()\nax.xaxis.set_ticks(np.arange(start_x, end_x, 0.25))\nax.xaxis.set_major_formatter(FormatStrFormatter('%0.1f'))\nstart_y, end_y = ax.get_ylim()\nax.yaxis.set_ticks(np.arange(start_y, end_y, 0.25))\nax.yaxis.set_major_formatter(FormatStrFormatter('%0.1f'))\n#ColorBar:\nfig.colorbar(surf, shrink=0.5, aspect=5)\nax.set_xlabel('X')\nax.set_ylabel('Y')\nax.set_zlabel('Z')\nax.set_title('3D Figure')\nfig.savefig(pathfilename, dpi=300)**\n</code></pre>\n\n<p>so... i would like to generate a Heat Map using the same data source, when the 'z' column is the color depth, and also increase the X, Y resolution like in this 3D figure.</p>\n\n<p>Can you help me?\nOthers Heat Map examples in this site are good reference but i do not understand exactly what changes i need to do in my actual code using my data source (data.dat).</p>\n\n<p>Most of time, this code will execute offline.</p>\n\n<p>I prefer a free library like MatPlotLib or another free solution that you know.</p>\n\n<p>Thanks a lot!!! </p>\n"}, {"tags": ["python", "github", "github3.py"], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 4157918, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c734e4da8ca06e323dbca65a5a75306c?s=128&d=identicon&r=PG&f=1", "display_name": "Jfach", "link": "https://stackoverflow.com/users/4157918/jfach"}, "edited": false, "score": 0, "creation_date": 1464894394, "post_id": 37578664, "comment_id": 62685171, "body": "Can confirm <code>as_dict()</code> proves to be helpful for a number of different objects in the library."}], "tags": [], "owner": {"reputation": 149, "user_id": 5811833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f2309d74f99a49ee9df67a8e57926a?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Shapiro", "link": "https://stackoverflow.com/users/5811833/jesse-shapiro"}, "is_accepted": true, "score": 0, "last_activity_date": 1464814704, "creation_date": 1464814704, "answer_id": 37578664, "question_id": 37578259, "link": "https://stackoverflow.com/questions/37578259/clone-url-of-a-pull-request/37578664#37578664", "title": "clone url of a pull request", "body": "<p><code>github3.pull_request(owner, repo, number).as_dict()['head']['repo']['clone_url']</code></p>\n"}], "owner": {"reputation": 201, "user_id": 4157918, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c734e4da8ca06e323dbca65a5a75306c?s=128&d=identicon&r=PG&f=1", "display_name": "Jfach", "link": "https://stackoverflow.com/users/4157918/jfach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 37578664, "answer_count": 1, "score": 0, "last_activity_date": 1464821564, "creation_date": 1464813172, "last_edit_date": 1464821564, "question_id": 37578259, "link": "https://stackoverflow.com/questions/37578259/clone-url-of-a-pull-request", "title": "clone url of a pull request", "body": "<p>I'm trying to get the clone URL of a pull request. For example in Ruby using the Octokit library, I can fetch it from the head and base like so, where <code>pr</code> is a PullRequest object: <code>pr.head.repo.clone_url</code> or <code>pr.base.repo.clone_url</code>.\nHow can I achieve the same thing using github3.py?</p>\n"}, {"tags": ["python", "multithreading"], "answers": [{"comments": [{"owner": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464814134, "post_id": 37578438, "comment_id": 62643885, "body": "unfortunately it still doesn&#39;t update the variable inside the infinite loop"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464818558, "post_id": 37578438, "comment_id": 62645923, "body": "It updates the <code>NUM</code> variable in the thread object instance... to update <code>mod.NUM</code> just do that with <code>mod.NUM = 2</code> ... etc."}, {"owner": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464852214, "post_id": 37578438, "comment_id": 62656105, "body": "that far I&#39;ve gotten already, my problem here is that the updated variable is not being fed to the infinite loop..."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464852793, "post_id": 37578438, "comment_id": 62656404, "body": "@nxet: what loop? you&#39;re asking what is the problem in code not shown? My wild guess is that the statement at line 42 in some_module.py contains a mistake... but it&#39;s a VERY wild guess :-D"}, {"owner": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464853027, "post_id": 37578438, "comment_id": 62656549, "body": "man I was this close to open up <code>some_module.py</code> and see for any error there :/ this is how lost I am here. basically the thread I&#39;m launching has an infinite loop within, and the variable I want to update is what the loop parses to execute. I thought it was irrelevant, but at this point it might be worth noting that some_module.py actually is a multiplexing script. basically I say &#39;5 7&#39; to the module, and it runs infinitely multiplexing said values between two led bars (extremely roughly explained). I need to update the value and see the change reflected with the leds"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464858783, "post_id": 37578438, "comment_id": 62660250, "body": "Modules in Python are (normally) singletons. This means that you cannot have one &quot;instance&quot; of a module running with some global values and another instance running with other global values. This is technically possible by messing with <code>sys.modules</code> but only in very few cases you really want to do that. What you should do instead is changing <code>some_module.py</code> so that it becomes a <code>class</code> that can be multiply instanced (once per thread). May be you should just take the code and put into <code>thr</code> directly..."}, {"owner": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464859710, "post_id": 37578438, "comment_id": 62660934, "body": "that&#39;s my whole point, I don&#39;t want multiple instances. I hope I didn&#39;t get wrong your comment, but instead of running a new instance everytime NUM needs to be updated, I just want the loop inside the thread to notice that change and run accordingly. I&#39;ve tried a <code>while NUM == NUM</code> inside a while True loop (always inside the imported module), to see if that was noticing the change and then restarting the loop, but it didn&#39;t."}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 1, "last_activity_date": 1464813800, "creation_date": 1464813800, "answer_id": 37578438, "question_id": 37578254, "link": "https://stackoverflow.com/questions/37578254/python-update-thread-variable/37578438#37578438", "title": "python - update thread variable", "body": "<p>The problem is that you're creating a new thread each time you \"call\" (i.e. instantiate) <code>thr</code>. Change your code to</p>\n\n<pre><code>t = thr()\nt.start()\ntime.sleep(1)\nt.NUM = 2\ntime.sleep(1)\nt.NUM = 6\ntime.sleep(1)\nt.NUM = 8\ntime.sleep(1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464852763, "post_id": 37579474, "comment_id": 62656388, "body": "I&#39;m afraid that&#39;s a bit too generic for my limited knowledge of the language, and reading the link provided didn&#39;t help much unfortunately. can you please elaborate a bit more on this? thanks a lot"}, {"owner": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464856201, "post_id": 37579474, "comment_id": 62658524, "body": "the second link was way more helpful. but am I wrong to assume I&#39;m forced to kill and spawn a new thread everytime?"}, {"owner": {"reputation": 501, "user_id": 3928560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b35683a49ac592d674344e400b93062d?s=128&d=identicon&r=PG&f=1", "display_name": "MartinP", "link": "https://stackoverflow.com/users/3928560/martinp"}, "reply_to_user": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "edited": false, "score": 0, "creation_date": 1464883051, "post_id": 37579474, "comment_id": 62678481, "body": "@nxet I don`t uderstand :)What mean - &quot;I&#39;m forced to kill and spawn a new thread everytime?&quot;"}], "tags": [], "owner": {"reputation": 501, "user_id": 3928560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b35683a49ac592d674344e400b93062d?s=128&d=identicon&r=PG&f=1", "display_name": "MartinP", "link": "https://stackoverflow.com/users/3928560/martinp"}, "is_accepted": false, "score": 0, "last_activity_date": 1464855311, "last_edit_date": 1464855311, "creation_date": 1464818258, "answer_id": 37579474, "question_id": 37578254, "link": "https://stackoverflow.com/questions/37578254/python-update-thread-variable/37579474#37579474", "title": "python - update thread variable", "body": "<p>Maybe try use queue for change NUM variable.</p>\n\n<p><a href=\"https://docs.python.org/2/library/queue.html\" rel=\"nofollow\">https://docs.python.org/2/library/queue.html</a></p>\n\n<p>Check examples here :</p>\n\n<p><a href=\"https://pymotw.com/2/Queue/\" rel=\"nofollow\">https://pymotw.com/2/Queue/</a></p>\n\n<p>Generally speakinig the queue allows You send data between threads. Use <code>get()</code> for getting data from queue and <code>put()</code> for put data to queue.</p>\n"}], "owner": {"reputation": 701, "user_id": 1727037, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f6655db283a83b981f6ec38da3db0784?s=128&d=identicon&r=PG", "display_name": "nxet", "link": "https://stackoverflow.com/users/1727037/nxet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2001, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1464855311, "creation_date": 1464813139, "question_id": 37578254, "link": "https://stackoverflow.com/questions/37578254/python-update-thread-variable", "title": "python - update thread variable", "body": "<p>how do I update a variable inside a running thread, which is an infinite loop based on such variable?<br>\na simplified version of what I tried is what follows, to no results of course, and I can't find any pointer.</p>\n\n<pre><code>import some_module as mod\nimport threading\n\nclass thr (threading.Thread):\n    NUM = 5  # set a default value to start the script\n    def run (self):\n        mod.NUM = NUM\n        mod.main_loop()\n\ntry:\n    thr().start()\n    time.sleep(1)\n    thr().NUM = 2\n    time.sleep(1)\n    thr().NUM = 6\n    time.sleep(1)\n    thr().NUM = 8\n</code></pre>\n"}, {"tags": ["python", "numpy", "text-parsing"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1464813525, "post_id": 37578226, "comment_id": 62643538, "body": "Please post the full traceback."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1464813575, "post_id": 37578226, "comment_id": 62643567, "body": "You don&#39;t even use <code>np.genfromtxt</code> in your posted code."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464814002, "post_id": 37578226, "comment_id": 62643804, "body": "Please don&#39;t post data on external websites. Copy it into your question."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464814040, "post_id": 37578226, "comment_id": 62643825, "body": "Questions seeking debugging help (<b>&quot;why isn&#39;t this code working?&quot;</b>) must include the desired behavior, <i>a specific problem or error</i> and <i>the shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without <b>a clear problem statement</b> are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1464814853, "post_id": 37578226, "comment_id": 62644283, "body": "Actually with this setup it is easier to download that data from the external website than it would be copy-n-paste it from question."}, {"owner": {"reputation": 545, "user_id": 3801980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oS5gN.jpg?s=128&g=1", "display_name": "Muno", "link": "https://stackoverflow.com/users/3801980/muno"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1464815202, "post_id": 37578226, "comment_id": 62644459, "body": "@kindall Should be good now"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464815362, "post_id": 37578226, "comment_id": 62644526, "body": "Your <code>fromregex</code> call makes no sense, and the exception you&#39;re getting is <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.fromregex.html\" rel=\"nofollow noreferrer\">documented</a>. It&#39;s what happens when your dtype isn&#39;t valid for a structured array, which is one of the several things that make no sense about your <code>fromregex</code> call. What were you expecting it to do? How did you expect that regex to extract any data from your file?"}, {"owner": {"reputation": 545, "user_id": 3801980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oS5gN.jpg?s=128&g=1", "display_name": "Muno", "link": "https://stackoverflow.com/users/3801980/muno"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464815759, "post_id": 37578226, "comment_id": 62644729, "body": "@user2357112 I believe <code>np.fromregex</code> does the following &quot;Construct an array from a text file, using regular expression parsing.&quot; My textfile is not suitable for parsing with just one delimiter, so I thought that a regex would do the trick. I now see, however, that <code>np.fromregex</code> actually returns part of the file matching the regex I pass in! So I really need something that returns everything but whatever matches the regex."}], "answers": [{"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1464815450, "post_id": 37578825, "comment_id": 62644576, "body": "Is this supposed to be an answer?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1464816134, "post_id": 37578825, "comment_id": 62644909, "body": "It&#39;s too long to be comment!  Plus you jumped in with your question before I finished editing.  I&#39;m still not done editing."}, {"owner": {"reputation": 545, "user_id": 3801980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oS5gN.jpg?s=128&g=1", "display_name": "Muno", "link": "https://stackoverflow.com/users/3801980/muno"}, "edited": false, "score": 0, "creation_date": 1464816889, "post_id": 37578825, "comment_id": 62645280, "body": "@hpaulj I think the following should work: <code>theta = np.fromregex(&quot;RegLogTheta&quot;, regexp = r&quot;\\s+,(\\d+)\\s+,&quot;, dtype = [(np.float128)])</code>. The only problem is that [(np.float128)] is not a recognized dtype, which I don&#39;t understand why."}, {"owner": {"reputation": 545, "user_id": 3801980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oS5gN.jpg?s=128&g=1", "display_name": "Muno", "link": "https://stackoverflow.com/users/3801980/muno"}, "edited": false, "score": 0, "creation_date": 1464817761, "post_id": 37578825, "comment_id": 62645623, "body": "@hpaulj Oh you edited after I commented, too. Let me check that edit first."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1464832829, "post_id": 37578825, "comment_id": 62649669, "body": "I generalized your pattern to handle scientific notation."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1464832793, "last_edit_date": 1464832793, "creation_date": 1464815392, "answer_id": 37578825, "question_id": 37578226, "link": "https://stackoverflow.com/questions/37578226/nonetype-object-is-not-subscriptable-using-np-fromregex/37578825#37578825", "title": "&#39;NoneType&#39; object is not subscriptable -- using `np.fromregex`", "body": "<p>The file has multiple lines, with comma separation, 3 numbers perline, except the last has only 2</p>\n\n<pre><code>In [182]: fname='../Downloads/pastie-10860707.txt'\n\nIn [183]: np.fromregex(fname,regexp=pattern,dtype=float)\n... \nnp.fromregex(fname,regexp=pattern,dtype=float)\n\n/usr/lib/python3/dist-packages/numpy/lib/npyio.py in fromregex(file, regexp, dtype)\n   1240             # Create the new array as a single data-type and then\n   1241             #   re-interpret as a single-field structured array.\n-&gt; 1242             newdtype = np.dtype(dtype[dtype.names[0]])\n   1243             output = np.array(seq, dtype=newdtype)\n   1244             output.dtype = dtype\n\nTypeError: 'NoneType' object is not subscriptable\n</code></pre>\n\n<p>Loaded with a simple 'br' read, the file looks like:</p>\n\n<pre><code>In [184]: txt\nOut[184]: b'2.75386225e+00,1.80508078e+00,2.95729122e+00,\\n-4.21413726e+00,  -3.38139076e+00,  -4.22751379e+00,\\n ...      4.23010784e-01,  -1.14839331e+00,  -9.56098910e-01,\\n        -1.15019836e+00,   1.13845303e-06'\n</code></pre>\n\n<p>That missing number on the last line will give <code>genfromtxt</code> problems.</p>\n\n<p>Your choice of pattern is wrong.  It looks like a delimiter pattern.  But the pattern in <code>fromregex</code> docs produces groups: </p>\n\n<pre><code>regexp = r\"(\\\\d+)\\\\s+(...)\"\n</code></pre>\n\n<p><code>fromregex</code> does</p>\n\n<pre><code>seq = regexp.findall(file.read())  # read whole file and group it\noutput = np.array(seq, dtype=dtype)  # make array from seq\n</code></pre>\n\n<p>If you want to use <code>fromregex</code> you need to come up with a pattern that produces a list of tuples that can be turned into an array directly.</p>\n\n<p>================</p>\n\n<p>Though looking again at the error messsage I see that the immediate problem is with the <code>dtype</code>.   <code>dtype=float</code> is not a valid dtype spec for this function.  It expects a compound dtype (structured).</p>\n\n<p>The error is produced by this action, where <code>float</code> is your <code>dtype</code> parameter:</p>\n\n<pre><code>In [189]: np.dtype(float).names[0]\n ...\nTypeError: 'NoneType' object is not subscriptable\n</code></pre>\n\n<p>But it's trying to do this because the pattern has produced</p>\n\n<pre><code>In [194]: pattern.findall(txt)\nOut[194]: \n[b',',\n b',',\n b',',\n b'\\n',\n b',',\n b' ',\n b' ',\n ....]\n</code></pre>\n\n<p>not the list of tuples that it expected.</p>\n\n<p>==================</p>\n\n<p>I can load the file with</p>\n\n<pre><code>In [213]: np.genfromtxt(txt.splitlines(),delimiter=',',usecols=[0,1])\nOut[213]: \narray([[  2.75386225e+00,   1.80508078e+00],\n       [ -4.21413726e+00,  -3.38139076e+00],\n       [  7.46991792e-01,  -1.08010066e+00],\n        ...\n       [  4.23010784e-01,  -1.14839331e+00],\n       [ -1.15019836e+00,   1.13845303e-06]])\n</code></pre>\n\n<p>I'm using <code>usecols</code> to temporarily get around the problem with only 2 numbers on the last line.</p>\n\n<p>If I remove the <code>\\n</code> and split it on commas, I can parse the resulting text fields directly with <code>np.array</code>.</p>\n\n<pre><code>In [231]: txt1=txt.replace(b'\\n',b'').split(b',')\n\nIn [232]: np.array(txt1,float)\nOut[232]: \narray([  2.75386225e+00,   1.80508078e+00,   2.95729122e+00,\n        -4.21413726e+00,  -3.38139076e+00,  -4.22751379e+00,\n          ...\n         4.23010784e-01,  -1.14839331e+00,  -9.56098910e-01,\n        -1.15019836e+00,   1.13845303e-06])\n</code></pre>\n\n<p>This pattern includes the decimal and scientific notation:</p>\n\n<pre><code>In [266]: pattern=re.compile(br\"(\\d+\\.\\d+e[\\+\\-]\\d+)\")\n\nIn [267]: np.fromregex(fname,regexp=pattern,dtype=np.dtype([('f0',float)]))['f0']\nOut[267]: \narray([  2.75386225e+00,   1.80508078e+00,   2.95729122e+00,\n         4.21413726e+00,   3.38139076e+00,   4.22751379e+00,\n      ...\n         4.23010784e-01,   1.14839331e+00,   9.56098910e-01,\n         1.15019836e+00,   1.13845303e-06])\n</code></pre>\n\n<p>For now I'm creating a structured array and extracting that field.  There may be a way around that.  But <code>fromregex</code> seems to favor the use of structured dtypes.</p>\n"}], "owner": {"reputation": 545, "user_id": 3801980, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oS5gN.jpg?s=128&g=1", "display_name": "Muno", "link": "https://stackoverflow.com/users/3801980/muno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "closed_date": 1464967293, "accepted_answer_id": 37578825, "answer_count": 1, "score": -3, "last_activity_date": 1464832793, "creation_date": 1464813057, "last_edit_date": 1495540726, "question_id": 37578226, "link": "https://stackoverflow.com/questions/37578226/nonetype-object-is-not-subscriptable-using-np-fromregex", "closed_reason": "Not suitable for this site", "title": "&#39;NoneType&#39; object is not subscriptable -- using `np.fromregex`", "body": "<p>This question has many answers (see <a href=\"https://stackoverflow.com/questions/9320766/python-math-typeerror-nonetype-object-is-not-subscriptable\">Python Math - TypeError: &#39;NoneType&#39; object is not subscriptable</a>). My question is different, because I correctly expect <code>np.genfromtxt(...)</code> to return an array (i.e <code>np.genfromtxt(...)</code> is not an in place function).</p>\n\n<p>I am trying to parse and store the following into a single dimensional array:</p>\n\n<p><a href=\"http://pastie.org/10860707#2-3\" rel=\"nofollow noreferrer\">http://pastie.org/10860707#2-3</a></p>\n\n<p>To do so, I tried:</p>\n\n<pre><code>pattern = re.compile(b'[\\s,]')\ntheta = np.fromregex(\"RegLogTheta\", regexp = pattern, dtype = float)\n</code></pre>\n\n<p>This is the traceback (how should it be formatted?):</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/Users/ahanagrawal/Documents/Java/MachL/Chap3/ExamScoreVisual2.py\", line    36, in &lt;module&gt;\ntheta = np.fromregex(\"RegLogTheta\", regexp = pattern, dtype = float)\nFile \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/numpy/lib/npyio.py\", line 1240, in fromregex\nnewdtype = np.dtype(dtype[dtype.names[0]])\nTypeError: 'NoneType' object is not subscriptable\n</code></pre>\n\n<p>If you would like to run this, please download the text file from: <a href=\"http://pastie.org/10860707#2-3\" rel=\"nofollow noreferrer\">http://pastie.org/10860707#2-3</a> and run the code above.</p>\n"}, {"tags": ["python", "redis", "legacy-code"], "comments": [{"owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "edited": false, "score": 0, "creation_date": 1464817178, "post_id": 37578207, "comment_id": 62645393, "body": "Do you need that list just once, or on an ongoing basis?"}, {"owner": {"reputation": 446, "user_id": 511178, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4d83182f264ba7b9518331d1f1483218?s=128&d=identicon&r=PG", "display_name": "Emmet Brown", "link": "https://stackoverflow.com/users/511178/emmet-brown"}, "reply_to_user": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "edited": false, "score": 0, "creation_date": 1464818377, "post_id": 37578207, "comment_id": 62645843, "body": "Once a week is fine (just for deleting unuseful data). Could be a batch process."}, {"owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "edited": false, "score": 1, "creation_date": 1464825175, "post_id": 37578207, "comment_id": 62648022, "body": "In that case, given the above limitations, I suggest you take a dump of the db and process it using a newer version of Redis or even entirely offline with rdb-tools."}, {"owner": {"reputation": 446, "user_id": 511178, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4d83182f264ba7b9518331d1f1483218?s=128&d=identicon&r=PG", "display_name": "Emmet Brown", "link": "https://stackoverflow.com/users/511178/emmet-brown"}, "reply_to_user": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "edited": false, "score": 0, "creation_date": 1464927079, "post_id": 37578207, "comment_id": 62695775, "body": "Will it be more effective than dumping all keys and doing the search in Python?"}], "owner": {"reputation": 446, "user_id": 511178, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4d83182f264ba7b9518331d1f1483218?s=128&d=identicon&r=PG", "display_name": "Emmet Brown", "link": "https://stackoverflow.com/users/511178/emmet-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464814850, "creation_date": 1464812997, "last_edit_date": 1464814850, "question_id": 37578207, "link": "https://stackoverflow.com/questions/37578207/value-lookup-in-redis-2-4", "title": "Value lookup in Redis 2.4", "body": "<p>I need to list the keys that contain a certain value. Normally I would use the <strong>SCAN</strong> command, but the problem is that my client is using <strong>Redis server version 2.4.14</strong> and updating is not an option (legacy app with a lot of hacks might break).</p>\n\n<p>What would you guys do? I'm using \"redis\" python client.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "list"], "comments": [{"owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 1, "creation_date": 1464813322, "post_id": 37578160, "comment_id": 62643433, "body": "Why not just <code>[[a[x], a[x+1]] for x in range(len(a)-1)]</code>? assuming <code>a= [1, 4, 5, 7, 9, 12, 15]</code>"}, {"owner": {"reputation": 35, "user_id": 5870732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce752a11299cd50eacd7dbe1ac2a08b?s=128&d=identicon&r=PG&f=1", "display_name": "Teller", "link": "https://stackoverflow.com/users/5870732/teller"}, "reply_to_user": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1464814462, "post_id": 37578160, "comment_id": 62644071, "body": "Make that the answer and I&#39;ll give you credit! This is exactly what I want!"}], "answers": [{"tags": [], "owner": {"reputation": 3546, "user_id": 5726823, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/78229e810f7580e7fa0d5fefc50f1b7c?s=128&d=identicon&r=PG", "display_name": "illright", "link": "https://stackoverflow.com/users/5726823/illright"}, "is_accepted": false, "score": 0, "last_activity_date": 1464813494, "creation_date": 1464813494, "answer_id": 37578351, "question_id": 37578160, "link": "https://stackoverflow.com/questions/37578160/python-return-a-linear-cumulative-pairs-of-a-list-of-numbers/37578351#37578351", "title": "Python return a linear/cumulative pairs of a list of numbers", "body": "<p>What about implementing this function like that:</p>\n\n<pre><code>def pairwise(itr):\n    return list(zip(itr[:-1], itr[1:]))\n</code></pre>\n\n<p>So for a list <code>[1, 4, 5, 7, 9, 12, 15]</code> this function would zip <code>[1, 4, 5, 7, 9, 12]</code> and <code>[4, 5, 7, 9, 12, 15]</code>, returning the expected <code>[(1, 4), (4, 5), (5, 7), (7, 9), (9, 12), (12, 15)]</code></p>\n"}, {"tags": [], "owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1464813505, "creation_date": 1464813505, "answer_id": 37578353, "question_id": 37578160, "link": "https://stackoverflow.com/questions/37578160/python-return-a-linear-cumulative-pairs-of-a-list-of-numbers/37578353#37578353", "title": "Python return a linear/cumulative pairs of a list of numbers", "body": "<p>Do you have to have an iterator? You can just using slicing and <code>zip</code> to get a list of the desired pairs.</p>\n\n<pre><code>a = [1, 4, 5, 7, 9, 12, 15]\nidx_pairs = [list(z) for z in zip(a[:-1], a[1:])]\nidx_pairs\n&gt;&gt;&gt;[[1, 4], [4, 5], [5, 7], [7, 9], [9, 12], [12, 15]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1859, "user_id": 6195051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d0f5e025b59a5e36c70fdd4333530?s=128&d=identicon&r=PG&f=1", "display_name": "Neapolitan", "link": "https://stackoverflow.com/users/6195051/neapolitan"}, "is_accepted": false, "score": 0, "last_activity_date": 1464814811, "last_edit_date": 1464814811, "creation_date": 1464813694, "answer_id": 37578403, "question_id": 37578160, "link": "https://stackoverflow.com/questions/37578160/python-return-a-linear-cumulative-pairs-of-a-list-of-numbers/37578403#37578403", "title": "Python return a linear/cumulative pairs of a list of numbers", "body": "<p>The problem is that izip is taking an item off the iterator each time, which is why the end up in pairs.  Here is a direct approach to forming the iterator:</p>\n\n<pre><code>def pairwise(iterable):\n    seq = iter(iterable)\n    a = next(seq)\n    for b in seq:\n        yield a,b\n        a = b\n\nlist(pairwise([1,2,3,4]))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[(1, 2), (2, 3), (3, 4)]\n</code></pre>\n\n<p>Though if you have the lists, the following is more compact:</p>\n\n<pre><code>L = [1,2,3,4]\nlist(zip(L[:-1], L[1:]))\n</code></pre>\n\n<hr>\n\n<p>Cleaner iterator version, using tee and izip from itertools:</p>\n\n<pre><code>from itertools import tee, izip\ndef pairwise(iterable):\n    L1, L2 = tee(iterable)\n    next(L2)\n    return izip(L1,L2)\n</code></pre>\n\n<hr>\n\n<p>Times for the three versions.  Note that the second version requires a list rather than an iterator, hence the use of the python 2.7 <code>range</code> vs <code>xrange</code>.</p>\n\n<pre><code>%timeit list(pairwise(xrange(1000)))\n10000 loops, best of 3: 97.3 \u00b5s per loop\n\n%timeit list(pairwise(range(1000)))\n10000 loops, best of 3: 51.1 \u00b5s per loop\n\n%timeit list(pairwise(xrange(1000)))\n10000 loops, best of 3: 60.6 \u00b5s per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6342310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a9c18ccb64f8e09c6eac09267c8568?s=128&d=identicon&r=PG&f=1", "display_name": "BeardedOne85", "link": "https://stackoverflow.com/users/6342310/beardedone85"}, "edited": false, "score": 0, "creation_date": 1464814119, "post_id": 37578423, "comment_id": 62643870, "body": "@Leva7 is a great answer and works for everything except if a generator is passed in since generators can not handle slicing."}], "tags": [], "owner": {"reputation": 55, "user_id": 6342310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a9c18ccb64f8e09c6eac09267c8568?s=128&d=identicon&r=PG&f=1", "display_name": "BeardedOne85", "link": "https://stackoverflow.com/users/6342310/beardedone85"}, "is_accepted": false, "score": 0, "last_activity_date": 1464813765, "creation_date": 1464813765, "answer_id": 37578423, "question_id": 37578160, "link": "https://stackoverflow.com/questions/37578160/python-return-a-linear-cumulative-pairs-of-a-list-of-numbers/37578423#37578423", "title": "Python return a linear/cumulative pairs of a list of numbers", "body": "<p>This should do the trick for you:</p>\n\n<pre><code>def pairwise(l1):\n    l1Iter = iter(l1)\n    pre = next(l1Iter)\n    result = []\n    for curr in l1Iter:\n        result.append([pre, curr])\n        pre = curr\n    return result\n</code></pre>\n\n<p>Or if you don't need this list and a generator if fine:</p>\n\n<pre><code>def pairwise_gen(l1):\n    l1Iter = iter(l1)\n    pre = next(l1Iter)\n    for curr in l1Iter:\n       yield pre, curr\n       pre = curr\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "is_accepted": true, "score": 1, "last_activity_date": 1464814655, "creation_date": 1464814655, "answer_id": 37578640, "question_id": 37578160, "link": "https://stackoverflow.com/questions/37578160/python-return-a-linear-cumulative-pairs-of-a-list-of-numbers/37578640#37578640", "title": "Python return a linear/cumulative pairs of a list of numbers", "body": "<p>Why not just <code>[[a[x], a[x+1]] for x in range(len(a)-1)]</code>? assuming <code>a= [1, 4, 5, 7, 9, 12, 15]</code></p>\n"}], "owner": {"reputation": 35, "user_id": 5870732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce752a11299cd50eacd7dbe1ac2a08b?s=128&d=identicon&r=PG&f=1", "display_name": "Teller", "link": "https://stackoverflow.com/users/5870732/teller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 37578640, "answer_count": 5, "score": 1, "last_activity_date": 1551122429, "creation_date": 1464812826, "last_edit_date": 1551122429, "question_id": 37578160, "link": "https://stackoverflow.com/questions/37578160/python-return-a-linear-cumulative-pairs-of-a-list-of-numbers", "title": "Python return a linear/cumulative pairs of a list of numbers", "body": "<p>I have a pandas dataframe which has a messy concatenation of many different tables. I want to segment these tables out and perform operations on them. I have a list of table header locations that looks like this: [1, 4, 5, 7, 9, 12, 15] - so the header of the first table is at index 1, the header of the second table is at index 4, etc. My goal is to use this list to slice the dataframe and extract information from each slice and munge the data into something pretty. </p>\n\n<p>I'm trying to get a list of pairs like this for this purpose: [[1,4], [4,5], [5,7], [7,9], [9,12], [12,15]]</p>\n\n<p>I tried this function, but its not quite returning what I want, it returns pairs like this: 1,4, 5,7, 9,12 - this is making me skip over every other table :/.</p>\n\n<pre><code>def pairwise(iterable): #this is what is wrong\n    a = iter(iterable)\n    return izip(a, a)\n</code></pre>\n\n<p>Am I missing something? I'm going crazy here.</p>\n"}, {"tags": ["python", "django", "serialization", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 5808505, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b39e609b4bd9fb4efa20e44c0e4d5519?s=128&d=identicon&r=PG&f=1", "display_name": "Henry H", "link": "https://stackoverflow.com/users/5808505/henry-h"}, "edited": false, "score": 0, "creation_date": 1464815491, "post_id": 37578461, "comment_id": 62644597, "body": "This error is triggered after changing to your suggestion: AttributeError at /likes/api/1/ Got AttributeError when attempting to get a value for field <code>voted_object</code> on serializer <code>VoteSerializer</code>. The serializer field might be named incorrectly and not match any attribute or key on the <code>VotedItem</code> instance. Original exception text was: &#39;VotedItem&#39; object has no attribute &#39;voted_object&#39;. Thanks for your help though."}, {"owner": {"reputation": 15098, "user_id": 4458034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f986d9d2a1920cd4c9c71110a2dc7905?s=128&d=identicon&r=PG", "display_name": "Linovia", "link": "https://stackoverflow.com/users/4458034/linovia"}, "edited": false, "score": 0, "creation_date": 1464865910, "post_id": 37578461, "comment_id": 62665180, "body": "The answer above is correct. You should mark it as such and start a new question."}], "tags": [], "owner": {"reputation": 30737, "user_id": 136008, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3rbg6.jpg?s=128&g=1", "display_name": "jpic", "link": "https://stackoverflow.com/users/136008/jpic"}, "is_accepted": true, "score": 23, "last_activity_date": 1464813893, "creation_date": 1464813893, "answer_id": 37578461, "question_id": 37578159, "link": "https://stackoverflow.com/questions/37578159/listserializer-object-is-not-callable/37578461#37578461", "title": "&#39;ListSerializer&#39; object is not callable", "body": "<p>The error is that it's trying to call the serializer_class, which is an instance of ListSerializer, instead of a clas.</p>\n\n<p>Shouldn't this:</p>\n\n<pre><code>serializer_class = VoteSerializer(queryset, many=True)\n</code></pre>\n\n<p>Be that:</p>\n\n<pre><code>serializer_class = VoteSerializer\n</code></pre>\n"}], "owner": {"reputation": 524, "user_id": 5808505, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b39e609b4bd9fb4efa20e44c0e4d5519?s=128&d=identicon&r=PG&f=1", "display_name": "Henry H", "link": "https://stackoverflow.com/users/5808505/henry-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9893, "favorite_count": 2, "accepted_answer_id": 37578461, "answer_count": 1, "score": 11, "last_activity_date": 1464813893, "creation_date": 1464812826, "question_id": 37578159, "link": "https://stackoverflow.com/questions/37578159/listserializer-object-is-not-callable", "title": "&#39;ListSerializer&#39; object is not callable", "body": "<p>I am trying to implement Django-Rest framework for a voting application with content_type objects.  I tried using the <a href=\"https://github.com/Ian-Foote/rest-framework-generic-relations\" rel=\"noreferrer\">rest-framework-generic-relations</a> for serializers.py.  It seems to me that the error might be within serializer.py / views.py, but I am new to this framework and would appreciate your help!</p>\n\n<p>views.py:</p>\n\n<pre><code>class vote_detail(generics.RetrieveUpdateDestroyAPIView):\n    queryset = VotedItem.objects.all()\n    serializer_class = VoteSerializer(queryset, many=True)\n</code></pre>\n\n<p>serializers.py:</p>\n\n<pre><code>from rest_framework import serializers\nfrom .models import VotedItem\nfrom posts.models import Post\nfrom generic_relations.relations import GenericRelatedField\n\nclass PostSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Post\n        fields = ('title',)\n\nclass VoteSerializer(serializers.ModelSerializer):\n        \"\"\"\n        A `VotedItem` serializer with a `GenericRelatedField` mapping all possible\n        models to their respective serializers.\n        \"\"\"\n    voted_object = GenericRelatedField({\n        Post: PostSerializer(),\n    })\n\n    class Meta:\n        model = VotedItem\n        fields = ('user', 'voted_object')\n</code></pre>\n\n<p>and models.py:</p>\n\n<pre><code>from __future__ import unicode_literals\n\nfrom datetime import datetime\n\nfrom django.utils.encoding import python_2_unicode_compatible\nfrom django.db import models\nfrom django.contrib.contenttypes.fields import GenericForeignKey, GenericRelation\nfrom django.contrib.contenttypes.models import ContentType\nfrom django.core.urlresolvers import reverse\nfrom django.utils import timezone\nfrom django.contrib.auth.models import User\nfrom social_count.managers import VoteManager\n\nSCORES = (\n    (+1, '+1'),\n    (-1, '-1'),\n)\n\n@python_2_unicode_compatible\nclass VotedItem(models.Model):\n    \"\"\"\n    A vote on an object by a User.\n    \"\"\"\n    user = models.ForeignKey(User)\n    content_type = models.ForeignKey(\n        ContentType,\n        null=True,\n        blank=True,\n        on_delete=models.CASCADE,\n    )\n    object_id = models.PositiveIntegerField(        \n        null=True,\n    )\n    content_object = GenericForeignKey('content_type', 'object_id')\n    vote = models.SmallIntegerField(choices=SCORES, blank=True, null=True)\n    flag = models.NullBooleanField(blank=True, null=True)\n    timestamp = models.DateTimeField(auto_now=False, auto_now_add=True)\n\n    objects = VoteManager()\n\n    class Meta:\n        db_table = 'votes'\n        # One vote per user per object\n        unique_together = (('user', 'content_type', 'object_id'),)\n\n    def __str__(self):\n        return '%s: %s on %s' % (self.user, self.vote, self.content_object)\n\n    def is_upvote(self):\n        return self.vote == 1\n\n    def is_downvote(self):\n        return self.vote == -1\n</code></pre>\n\n<p>When I visit www.mypage.com/likes/api/1/ I get an error message:</p>\n\n<pre><code>Traceback:\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  149.                     response = self.process_exception_by_middleware(e, request)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/django/views/decorators/csrf.py\" in wrapped_view\n  58.         return view_func(*args, **kwargs)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/django/views/generic/base.py\" in view\n  68.             return self.dispatch(request, *args, **kwargs)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/rest_framework/views.py\" in dispatch\n  466.             response = self.handle_exception(exc)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/rest_framework/views.py\" in dispatch\n  463.             response = handler(request, *args, **kwargs)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/rest_framework/generics.py\" in get\n  286.         return self.retrieve(request, *args, **kwargs)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/rest_framework/mixins.py\" in retrieve\n  57.         serializer = self.get_serializer(instance)\n\nFile \"/home/henry/newpine/src/env/local/lib/python2.7/site-packages/rest_framework/generics.py\" in get_serializer\n  111.         return serializer_class(*args, **kwargs)\n\nException Type: TypeError at /likes/api/1/\nException Value: 'ListSerializer' object is not callable\n</code></pre>\n"}, {"tags": ["python", "opencv", "video", "overlap"], "comments": [{"owner": {"reputation": 11, "user_id": 6411122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eceb795f478ce70147ebcad1f977e409?s=128&d=identicon&r=PG&f=1", "display_name": "La26", "link": "https://stackoverflow.com/users/6411122/la26"}, "edited": false, "score": 0, "creation_date": 1464874989, "post_id": 37578035, "comment_id": 62672025, "body": "Thank you for your answer! Actually, what I would like to do is to merge the videos: I would like to see the 3 cars of each video at the same time"}], "answers": [{"tags": [], "owner": {"reputation": 2174, "user_id": 5876041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-CBOOazSg3-c/AAAAAAAAAAI/AAAAAAAAAao/6MQIFAQGtGY/photo.jpg?sz=128", "display_name": "Saransh Kejriwal", "link": "https://stackoverflow.com/users/5876041/saransh-kejriwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1464847616, "creation_date": 1464847616, "answer_id": 37583901, "question_id": 37578035, "link": "https://stackoverflow.com/questions/37578035/create-a-video-of-layered-videos/37583901#37583901", "title": "Create a video of layered videos", "body": "<p>I'm not sure what you mean by \"made of 3 other videos\", here are 2 ideas:</p>\n\n<p>1) the 3 videos are seen one after another in succession:</p>\n\n<p>If this is the case, you can check which if the current video is finished. If it isn't, add its frame, else append the frame from the next video:</p>\n\n<pre><code>ret1,img1=cap1.read()//read 1st video\nret2,img2=cap2.read()//2nd\nret3,img3=cap3.read()//3rd\n\nif(cap1.isOpened()):\n   video_summary.write(img1)\nelif(cap2.isOpened()):\n   video_summary.write(img2)\nelif(cap3.isOpened()):\n   video_summary.write(img3)\n</code></pre>\n\n<p>2) you need to overlay the 3 videos one over another:</p>\n\n<p>In this case, you should look up the addWeighted function</p>\n"}], "owner": {"reputation": 11, "user_id": 6411122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eceb795f478ce70147ebcad1f977e409?s=128&d=identicon&r=PG&f=1", "display_name": "La26", "link": "https://stackoverflow.com/users/6411122/la26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464847616, "creation_date": 1464812324, "question_id": 37578035, "link": "https://stackoverflow.com/questions/37578035/create-a-video-of-layered-videos", "title": "Create a video of layered videos", "body": "<p>I'm a python and OpenCV beginner!\nI would like to create a video made of 3 others videos. Each video is a moving car on a black background</p>\n\n<p>I created the video which is empty for the moment: </p>\n\n<pre><code>video_summary=cv2.VideoWriter(video_output_path ,fourcc,video_fps ,(480,270), True)\n</code></pre>\n\n<p>Now, I would like to add videos called 0, 2 and 4 from \"video_a_ajouter\" in video_summary.</p>\n\n<pre><code>video_a_ajouter=[0,2,4]\nvideo_working=[]\n</code></pre>\n\n<p>So, I did this:</p>\n\n<pre><code>for i in video_a_ajouter:    video_working.append(cv2.VideoCapture(output_directory_path+'output_TP_'+str(video_a_ajouter[0])+'.avi'))\n        video_a_ajouter.remove(video_a_ajouter[0])\n</code></pre>\n\n<p>I would like to know how to put the 3 videos in video_summary, considering that 0 overlaps 2 and 2 overlaps 4</p>\n\n<p>Thank you in advance for your help !! :)</p>\n"}, {"tags": ["python", "pandas", "dataframe", "group-by"], "comments": [{"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 1, "creation_date": 1464814036, "post_id": 37578012, "comment_id": 62643824, "body": "Nothing happens because you are trying to modify a copy of the original frame. Generally when you do <code>B[&#39;Sale&#39;][boolean]</code> you&#39;re likely to get a copy instead of a view, so when you attempt to modify this nothing happens to the original. To avoid this, try to use <code>B.loc[boolean, &#39;Sale&#39;]</code> more often, which in more cases would return a view of the original instead of a copy. See more <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 1, "last_activity_date": 1464813194, "creation_date": 1464813194, "answer_id": 37578265, "question_id": 37578012, "link": "https://stackoverflow.com/questions/37578012/filling-columns-based-on-multiple-row-values-in-python/37578265#37578265", "title": "filling columns based on multiple row values in Python", "body": "<p>I think you can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.fillna.html\" rel=\"nofollow\"><code>fillna</code></a> by <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.sum.html\" rel=\"nofollow\"><code>sum</code></a>:</p>\n\n<pre><code>df['Sale'] = df.groupby('Month', sort = False).Sale.apply(lambda x: x.fillna(x.sum()))\nprint (df)\n     Month Type  Sale\n0  2016-01    A  20.0\n1  2016-02    A  10.0\n2  2016-01    B  40.0\n3  2016-02    B  30.0\n4  2016-01    C  60.0\n5  2016-02    C  40.0\n6  2016-01    D  60.0\n7  2016-02    D  40.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1112, "user_id": 3460791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/622fc1a80ca92577d75eff2b4138b040?s=128&d=identicon&r=PG", "display_name": "Ana", "link": "https://stackoverflow.com/users/3460791/ana"}, "edited": false, "score": 0, "creation_date": 1464815844, "post_id": 37578658, "comment_id": 62644774, "body": "This looks interesting! But should I first define <code>B</code>? I did <code>B=A.fillna(A)</code> and it didn&#39;t do anything."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 1112, "user_id": 3460791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/622fc1a80ca92577d75eff2b4138b040?s=128&d=identicon&r=PG", "display_name": "Ana", "link": "https://stackoverflow.com/users/3460791/ana"}, "edited": false, "score": 0, "creation_date": 1464817032, "post_id": 37578658, "comment_id": 62645334, "body": "<code>A.fillna(A)</code> won&#39;t do anything because they are the same frame so no values to use to fill in the missing ones. It&#39;s <code>A.fillna(B)</code> that you&#39;re looking for, so yes you should first define <code>B</code>. You can interpret this as &quot;Fill the missing values of <code>A</code> with the corresponding values in <code>B</code>&quot;."}], "tags": [], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "is_accepted": false, "score": 1, "last_activity_date": 1464814694, "creation_date": 1464814694, "answer_id": 37578658, "question_id": 37578012, "link": "https://stackoverflow.com/questions/37578012/filling-columns-based-on-multiple-row-values-in-python/37578658#37578658", "title": "filling columns based on multiple row values in Python", "body": "<p>Actually, since pandas 0.14 you can use <code>fillna</code> directly on the dataframe you need to fill in missing values.</p>\n\n<pre><code>A.fillna(B)\nOut[8]: \n        Type  Sale\nMonth             \n2016-01    A  20.0\n2016-02    A  10.0\n2016-01    B  40.0\n2016-02    B  30.0\n2016-01    C  60.0\n2016-02    C  40.0\n2016-01    D  60.0\n2016-02    D  40.0 \n</code></pre>\n\n<p>I remember this because a PR was made to incorporate this after I asked a similar question a while back.</p>\n\n<p>This will fill the missing values in <code>A</code> with those corresponding to <code>B</code> which have matching labels (index/column). This is more general as <code>A</code> and <code>B</code> do not need to be identically labelled, and the code stays the same when you have a multi-index.</p>\n"}], "owner": {"reputation": 1112, "user_id": 3460791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/622fc1a80ca92577d75eff2b4138b040?s=128&d=identicon&r=PG", "display_name": "Ana", "link": "https://stackoverflow.com/users/3460791/ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "accepted_answer_id": 37578265, "answer_count": 2, "score": 1, "last_activity_date": 1464815212, "creation_date": 1464812249, "question_id": 37578012, "link": "https://stackoverflow.com/questions/37578012/filling-columns-based-on-multiple-row-values-in-python", "title": "filling columns based on multiple row values in Python", "body": "<p>I have a dataframe <code>A</code> with some empty cells that I want to fill to have dataframe <code>B</code>. Here is a sample data:</p>\n\n<pre><code>A=\n    Month   Type    Sale\n    2016-01 A       20\n    2016-02 A       10\n    2016-01 B       40\n    2016-02 B       30\n    2016-01 C   \n    2016-02 C   \n    2016-01 D   \n    2016-02 D   \n\nB=\n    Month   Type    Sale\n    2016-01 A       20\n    2016-02 A       10\n    2016-01 B       40\n    2016-02 B       30\n    2016-01 C       60\n    2016-02 C       40\n    2016-01 D       60\n    2016-02 D       40\n</code></pre>\n\n<p>Here is what I have done:</p>\n\n<pre><code>emptTypes= ['C', 'D']\nx = A.groupby('Month', sort = False).Sale.sum()\nB['Sale'][B['Type'].isin(emptTypes) &amp; B['Month'].isin(x.index)]=x\n</code></pre>\n\n<p>And nothing happens!</p>\n"}, {"tags": ["python", "printing", "pycharm", "pywin32"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 4463496, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UXj05.jpg?s=128&g=1", "display_name": "TheEggSample", "link": "https://stackoverflow.com/users/4463496/theeggsample"}, "edited": false, "score": 2, "creation_date": 1464892878, "post_id": 37586129, "comment_id": 62684327, "body": "Thanks, that helped a ton.  I actually had to replace PRINTER_ACCESS_ADMINISTER to PRINTER_ALL_ACCESS, because for whatever reason I still was getting the &quot;Access denied&quot;."}], "tags": [], "owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "is_accepted": true, "score": 5, "last_activity_date": 1464854948, "creation_date": 1464854948, "answer_id": 37586129, "question_id": 37578005, "link": "https://stackoverflow.com/questions/37578005/access-denied-when-attempting-to-remove-printer/37586129#37586129", "title": "Access denied when attempting to remove printer", "body": "<p>The documentation states that <em>Printer handle must be opened for PRINTER_ACCESS_ADMINISTER</em>. Something like this might work:</p>\n\n<pre><code>PRINTER_DEFAULTS = {\"DesiredAccess\":win32print.PRINTER_ACCESS_ADMINISTER} \nwin32print.OpenPrinter(self.printers[i]['pPrinterName'], PRINTER_DEFAULTS)\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 4463496, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UXj05.jpg?s=128&g=1", "display_name": "TheEggSample", "link": "https://stackoverflow.com/users/4463496/theeggsample"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 37586129, "answer_count": 1, "score": 1, "last_activity_date": 1464854948, "creation_date": 1464812223, "last_edit_date": 1464854454, "question_id": 37578005, "link": "https://stackoverflow.com/questions/37578005/access-denied-when-attempting-to-remove-printer", "title": "Access denied when attempting to remove printer", "body": "<pre><code>def on_printer_button_clicked(self, button):\n    for i in range(len(self.printer_buttons)):\n        if button == self.printer_buttons[i]:\n            pHandle = win32print.OpenPrinter(self.printers[i]['pPrinterName'])\n    win32print.DeletePrinter(pHandle)\n    return\n</code></pre>\n\n<p>So all I'm doing is opening the printer handle and calling the function Delete Printer, as you can see.  Here's what I get in the console when I run the function:  </p>\n\n<pre><code>uninstall_windowGUI.py\", line 57, in on_printer_button_clicked\nwin32print.DeletePrinter(pHandle)\npywintypes.error: (5, 'DeletePrinter', 'Access is denied.')\n</code></pre>\n\n<p>I've tried running the IDE (Pycharm in Administrator mode, and still get the same issue.  Any idea on how to move on?  I'm kind of stuck until I can figure this out.  (Also:  I'm using Gtk and Gdk to create the interface, if that makes a differece.)</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 478030, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 1, "creation_date": 1464812536, "post_id": 37577965, "comment_id": 62643021, "body": "If you haven&#39;t computed any aggregates yet, you of course have to look at all rows to be able to tell which ones are matching your criteria.  If you want to do many look-ups of this kind with partially overlapping criteria, you might be able to preprocess the data in a way that the individual look-ups can be sped up, but you need to look at each row at least once at some point."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 1, "creation_date": 1464813230, "post_id": 37577965, "comment_id": 62643383, "body": "pandas can do <a href=\"http://pandas.pydata.org/pandas-docs/stable/groupby.html\" rel=\"nofollow noreferrer\">grouping and split-apply-combine</a> types of operations (better than R imo). This seems to be exactly what you&#39;re looking for. Start here and maybe ask another question If you have an example that you need help with."}, {"owner": {"reputation": 63, "user_id": 6411519, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dd35c003ca90eaaafe9d65d34d36568?s=128&d=identicon&r=PG&f=1", "display_name": "bulldog91", "link": "https://stackoverflow.com/users/6411519/bulldog91"}, "edited": false, "score": 0, "creation_date": 1464813503, "post_id": 37577965, "comment_id": 62643528, "body": "Thanks for the tips. Sven: couldn&#39;t the lookup be achieved in O(1) time with some sort of hashing system, where all the &quot;label&quot; columns constitute keys and the data of interest (here, SAT scores) constitute values? Or is this unfeasible, and O(n) is realistically the best one could hope for here?  EDIT: On perusal, it looks like pbreach&#39;s link describes just that. Thanks a ton!"}, {"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1464827753, "post_id": 37577965, "comment_id": 62648669, "body": "You have the right idea, ask another question if your code doesn&#39;t behave as expected."}], "answers": [{"tags": [], "owner": {"reputation": 2061, "user_id": 4734216, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a9b07b624d0fd036fbfbc572e86ba22?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/4734216/d-adams"}, "is_accepted": false, "score": 0, "last_activity_date": 1464832807, "last_edit_date": 1464832807, "creation_date": 1464831223, "answer_id": 37581302, "question_id": 37577965, "link": "https://stackoverflow.com/questions/37577965/most-efficient-way-to-aggregate-tabular-data-meeting-certain-conditions-in-pytho/37581302#37581302", "title": "Most efficient way to aggregate tabular data meeting certain conditions in Python in O(1) time?", "body": "<p>You cannot do this in O(1) time. </p>\n\n<p>This problem has more than one complexity associated with it. I can think of three:  Prepossessing, insertion, and lookup. </p>\n\n<p>You could do this in O(nlog(n)) preproccessing  +  O(log(n)) lookup time, and O(log(n)) insertion as follows:</p>\n\n<pre><code> from collections import deque\n datatable = collections.deque(your_data_table)\n column_names = ['col1', 'col2'...etc]\n</code></pre>\n\n<p>Keep an extra data structure updated which always has a list of pointers to rows of your main table sorted by each column. I.E if you have a data table with 6 columns, you will need 6 sorted arrays with values that point to row numbers of your main table. This extra structure should take up the same amount of memory as your original data table. </p>\n\n<pre><code>overhead_structure = {}\nfor column, column_name in zip( column_names, table):\n    row_indexes, sorted_column_values = sort(column)\n    overhead_structure[column_name] = (sorted_column_values, row_indexes)\n</code></pre>\n\n<p>With the new extra overhead of a sorted meta-data -> you can search for rows that satisfy your criterion with binary search on each of the rows upon which you have conditions. </p>\n\n<pre><code>from bisect import bisect_left\noverhead_index = bisect_left(overhead_structure[column_name], 1, lo,hi)\nreal_index = overhead_structure[column_name][overhead_index][1]\n</code></pre>\n\n<p>Also with the new overhead of sorted meta-data, each time you add another row to your main table, you will have to cram in the pointer to it in your new meta-data sorts. So you will have to figure out where that row belongs in each column sort. </p>\n\n<pre><code>for column_name in column_names:\n    overhead_index = bisect_left(overhead_structure[column_name],1, lo,hi)\n    real_index = overhead_structure[column_name][overhead_index]\n    overhead_structure[column_name].insert(overhead_index, (new_item, real_index))\n\ndatatable.append(new_item)\n</code></pre>\n\n<p>This is the fastest way I can think of off the top of my head.. I suspect there is a more robust and better way to do this though, because it is EXACTLY what SQL databases have to deal with under the hood with SELECT statements, and years of smart people working hard have made those queries fairly optimized. </p>\n\n<p>EDIT: </p>\n\n<p>Using arbitrary data types will give you headaches with insertion, because the native array has fixed lengths. Using a doubly linked list datatype could make insertion time go down, and create even MORE memory overhead, but keep the other complexities where I estimated them. I wrote some sudo-code with python '''deque'''</p>\n"}], "owner": {"reputation": 63, "user_id": 6411519, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dd35c003ca90eaaafe9d65d34d36568?s=128&d=identicon&r=PG&f=1", "display_name": "bulldog91", "link": "https://stackoverflow.com/users/6411519/bulldog91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464832807, "creation_date": 1464812098, "last_edit_date": 1464829376, "question_id": 37577965, "link": "https://stackoverflow.com/questions/37577965/most-efficient-way-to-aggregate-tabular-data-meeting-certain-conditions-in-pytho", "title": "Most efficient way to aggregate tabular data meeting certain conditions in Python in O(1) time?", "body": "<p>Let's say I have a table with a bunch of data in long format (each row has one data point). For instance, let's say we have a table of people's SAT scores, with columns for state, city, school, gender, race, and person. My goal is to find a way to easily pull out and average data points corresponding to certain groupings of the data. </p>\n\n<p>For instance, if I were to want to average the SAT scores associated with males in Texas, or white females in NYC. What's the best way to do this in Python (I suppose it's similar to <code>tapply</code> in R)? Boolean indexing on a <code>Pandas</code> data structure? Is this done in <code>O(1)</code> time? Obviously the dumbest possible way would be to crawl through row by row, check if each row meets the conditions, and collect the numbers that do, but I can't help but think there's a better way than this; I don't this to become unnecessarily slow as my datasets get bigger. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1464859253, "post_id": 37577939, "comment_id": 62660613, "body": "The issue is most likely with how the call to <code>ax2.plot</code> is being made in <code>candlestick_ohlc</code>, however because <i>we</i> do not know what <code>candlestick_ohlc</code> does, we cannot clarify and it is up to you to add details. It is my <i>guess</i> that <code>candlestick_ohlc</code> adds the independant variable in the plotting of the candlesticks (the time-scale, most likely), and your call to <code>ax2v.plot(bit.slowMacd....</code> does not. Please clarify the following things: where does <code>candlestick_ohlc</code> come from (give its implementation if you made it yourself) and specify the details of the variables <code>ohlc</code> and <code>bit.slowMacd</code>."}, {"owner": {"reputation": 6453, "user_id": 564653, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3cc2680ff3543245b1dfb032ac3bec5?s=128&d=identicon&r=PG", "display_name": "Ted pottel", "link": "https://stackoverflow.com/users/564653/ted-pottel"}, "reply_to_user": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1464872570, "post_id": 37577939, "comment_id": 62670072, "body": "I took out the cpode to draw the candle stick chart and moving averg chart.  I have two charts at the botton."}, {"owner": {"reputation": 6453, "user_id": 564653, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3cc2680ff3543245b1dfb032ac3bec5?s=128&d=identicon&r=PG", "display_name": "Ted pottel", "link": "https://stackoverflow.com/users/564653/ted-pottel"}, "reply_to_user": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1464872658, "post_id": 37577939, "comment_id": 62670145, "body": "I took out the top code for candle stick and moving averg.  The bottom has code to draw the vol as a bar grap with the folllowing line of code ax3.fill_between(bit.listAll[macdStart:],0, bit.vol[macdStart:], facecolor=&#39;#0079a3&#39;) and is centered tghe other chart is a line chart and usses the same data vol but is not centered ax5.plot(RateOfChange[macdStart:]) does any one know how I can get both of thses charts to be ceyered or roght justified???"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1464874328, "post_id": 37577939, "comment_id": 62671447, "body": "You&#39;re not getting the comment I made: please update your post to include the relevant information. There is indeed no <code>align</code> keyword for a plotted line. Your issue stems (most likely) from not having the two datasets in the middle figure aligned by their x-data."}], "owner": {"reputation": 6453, "user_id": 564653, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3cc2680ff3543245b1dfb032ac3bec5?s=128&d=identicon&r=PG", "display_name": "Ted pottel", "link": "https://stackoverflow.com/users/564653/ted-pottel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464813730, "creation_date": 1464811981, "last_edit_date": 1464813730, "question_id": 37577939, "link": "https://stackoverflow.com/questions/37577939/charts-are-not-matching-up-one-is-centered-the-other-is-left-justified-in-matplo", "title": "Charts are not matching up one is centered the other is left justified in matplotlib", "body": "<p>Im Trying to make a stock chart this is what I have.\nA candle stick chart of the price with a overlapping moving averg.  On the button is a bar chart of the vol.</p>\n\n<p>The issue is the candle stick chart and vol chart are centered, while the moving averg is right justified.  Thus when the moving averg chart overlaps the candle stick, they are not lines up on the x axes.\n(UPDATE: I just added two more charts at the buttom that use the plot methed, they are left justified to, it seems like al the charts I do using plot are left justified while the res are centered)</p>\n\n<p>I use ax2v = ax2.twinx() to get the moving averg to be on same graph as candle stick.  Ax2 is for candle stick, ax2v is for moving averg.</p>\n\n<p>I did look this up and stack overflow and saw some one said you add  align='center', IO tried  thatv as follows\nax2v.plot(bit.slowMacd[macdStart:], align='center')\nand got a error saying TypeError: There is no Line2D property \"align\"</p>\n\n<p>The code snippet for the candle stick and moving averg chart</p>\n\n#\n\n<pre><code>### SET UO CANDLE STICK CHART\nx = 0\ny = len(bit.listAll)\n\nohlc = []\nwhile x &lt; y:\n    append_me = bit.listAll[x], bit.openPrice[x], bit.biggestPrice[x], bit.smallestPrice[x], bit.closePrice[x], bit.vol[x]\n    ohlc.append(append_me)\n    x+=1\ncandlestick_ohlc(ax2, ohlc[macdStart:], width=0.4, colorup='#77d879', colordown='#db3f3f')\n</code></pre>\n\n<p>ax2v.plot(bit.slowMacd[macdStart:], align='center')</p>\n\n<p>The complete program\ndef drawGraph():</p>\n\n<pre><code>#######################################################################\n# Set up chart postions and title\nfig = plt.figure()\nax1 = plt.subplot2grid((6,1), (0,0), rowspan=1, colspan=1)\nplt.title(\"Test\")\nplt.ylabel('H-L')\nax2 = plt.subplot2grid((6,1), (1,0), rowspan=4, colspan=1, sharex=ax1)\nplt.ylabel('Price')\nax2v = ax2.twinx()\n#ax2v2 = ax2.twinx()\n\nax3 = plt.subplot2grid((6,1), (5,0), rowspan=1, colspan=1, sharex=ax1)\nplt.ylabel('MAvgs')\n######################################################################\n\n######################################################################\n### SET UO CANDLE STICK CHART\nx = 0\ny = len(bit.listAll)\n\nohlc = []\nwhile x &lt; y:\n    append_me = bit.listAll[x], bit.openPrice[x], bit.biggestPrice[x], bit.smallestPrice[x], bit.closePrice[x], bit.vol[x]\n    ohlc.append(append_me)\n    x+=1\ncandlestick_ohlc(ax2, ohlc[macdStart:], width=0.4, colorup='#77d879', colordown='#db3f3f')\nax2v.plot(bit.slowMacd[macdStart:], align='center')\n#ax2v.plot(bit.fastMacd[macdStart:], , align='center')\n#####################################################################\n\n#####################################################################\n### VOL CHART\nax3.fill_between(bit.listAll,0, bit.vol, facecolor='#0079a3')\n\n\n\n\nplt.show()\n\nax2v.plot(bit.slowMacd[macdStart:])\n#ax2v.plot(bit.fastMacd[macdStart:], , align='center')\n#####################################################################\n</code></pre>\n"}, {"tags": ["python", "subprocess"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1464812588, "post_id": 37577819, "comment_id": 62643044, "body": "both of these methods will wait for the process to finish, answers in the question in above comment will show you ways to process the output in chunks while it is running."}, {"owner": {"reputation": 10194, "user_id": 3291506, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fr49T.png?s=128&g=1", "display_name": "Startec", "link": "https://stackoverflow.com/users/3291506/startec"}, "edited": false, "score": 0, "creation_date": 1464812828, "post_id": 37577819, "comment_id": 62643183, "body": "I missed that. Thank you. I too vote to close this."}], "answers": [{"tags": [], "owner": {"reputation": 2380, "user_id": 5927496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a888e2216c350c2f12ee4b3b05e90759?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Clarembeau", "link": "https://stackoverflow.com/users/5927496/alexis-clarembeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1464812027, "creation_date": 1464812027, "answer_id": 37577952, "question_id": 37577819, "link": "https://stackoverflow.com/questions/37577819/should-i-use-popens-wait-or-communicate-to-read-stdout-in-subprocess-in-python/37577952#37577952", "title": "Should I use Popen&#39;s wait or communicate to read stdout in subprocess in Python 3?", "body": "<p>I think you should use communicate. The message warns you about performance issues with the default behaviour of the method. In fact, there's a buffer size parameter to the popen constructor that can be tuned to improve a lot performance for large data size. </p>\n\n<p>I hope it will help :) </p>\n"}], "owner": {"reputation": 10194, "user_id": 3291506, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fr49T.png?s=128&g=1", "display_name": "Startec", "link": "https://stackoverflow.com/users/3291506/startec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 0, "closed_date": 1464813350, "answer_count": 1, "score": 1, "last_activity_date": 1464812027, "creation_date": 1464811553, "question_id": 37577819, "link": "https://stackoverflow.com/questions/37577819/should-i-use-popens-wait-or-communicate-to-read-stdout-in-subprocess-in-python", "closed_reason": "Duplicate", "title": "Should I use Popen&#39;s wait or communicate to read stdout in subprocess in Python 3?", "body": "<p>I am trying to run a subprocess in Python 3 and constantly read the output.</p>\n\n<p>In the documentation for <code>subprocess</code> in Python 3 I see the following:</p>\n\n<blockquote>\n  <p>Popen.wait(timeout=None)</p>\n  \n  <p>Wait for child process to terminate. Set and return returncode attribute.\n  <strong>Warning This will deadlock when using stdout=PIPE and/or stderr=PIPE</strong>\n  and the child process generates enough output to a pipe such that it\n  blocks waiting for the OS pipe buffer to accept more data. Use\n  communicate() to avoid that.</p>\n</blockquote>\n\n<p>Which makes me think I should use <code>communicate</code> as the amount of data from stdout is quite large.  However, reading the documentation again shows this:</p>\n\n<blockquote>\n  <p>Popen.communicate(input=None, timeout=None)...</p>\n  \n  <p>Interact with process: Send data to stdin. Read data from stdout and stderr, until end-of-file is reached.</p>\n  \n  <p><strong>Note The data read is buffered in memory, so do not use this method if the data size is large or\n  unlimited.</strong></p>\n</blockquote>\n\n<p>So again, it seems like there are problems with reading starndard out from subprocesses this way.  Can someone please tell me the best / safest way to run a subprocess and read all of its (potentially large amount) of stdout?</p>\n"}, {"tags": ["python", "numpy", "random"], "comments": [{"owner": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "edited": false, "score": 0, "creation_date": 1464811638, "post_id": 37577803, "comment_id": 62642564, "body": "You should also define what probability distribution you expect. Uniform in euclidean space, I guess."}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1464811936, "post_id": 37577803, "comment_id": 62642723, "body": "You can reduce the space for the subsequent numbers based on the constraints. For the most basic case, if d=2, and the first number is 0.4, generate the second in the interval [0, sqrt(1-0.4**2)]?"}, {"owner": {"reputation": 305, "user_id": 5049786, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d791f7d2b108761fbe794bc47c3099e7?s=128&d=identicon&r=PG", "display_name": "lamb_da_calculus", "link": "https://stackoverflow.com/users/5049786/lamb-da-calculus"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1464812016, "post_id": 37577803, "comment_id": 62642761, "body": "@ayhan: wouldn&#39;t this make it very unlikely for the last few dimensions to be high numbers (as this would require all previously dimensions being small), thus hurting randomness?"}, {"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1464812227, "post_id": 37577803, "comment_id": 62642879, "body": "&quot;nearly all of the high-dimensional space is &quot;far away&quot; from the centre. To put it another way, the high-dimensional unit hypercube can be said to consist almost entirely of the &quot;corners&quot; of the hypercube, with almost no &quot;middle&quot;&quot; -- <a href=\"https://en.wikipedia.org/wiki/Curse_of_dimensionality\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Curse_of_dimensionality</a>"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1464814895, "post_id": 37577803, "comment_id": 62644305, "body": "@lamb_da_calculus You&#39;re right, the first number should&#39;t come from a uniform distribution."}, {"owner": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "edited": false, "score": 0, "creation_date": 1464826052, "post_id": 37577803, "comment_id": 62648267, "body": "I implemented the answer of @user2357112 in my answer, but don&#39;t want to steal the credit it deserves. If you are satisfied with both, accept that one, because mine is a mere implementation."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "edited": false, "score": 0, "creation_date": 1464812497, "post_id": 37577963, "comment_id": 62643003, "body": "@WalterTross: Indeed, which is why we have the second step to fix the norm."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1464824940, "last_edit_date": 1492085956, "creation_date": 1464812090, "answer_id": 37577963, "question_id": 37577803, "link": "https://stackoverflow.com/questions/37577803/generating-random-vectors-of-euclidean-norm-1-in-python/37577963#37577963", "title": "Generating random vectors of Euclidean norm &lt;= 1 in Python?", "body": "<p>Based on the Wolfram Mathworld article on <a href=\"http://mathworld.wolfram.com/HyperspherePointPicking.html\" rel=\"nofollow noreferrer\">hypersphere point picking</a> and <a href=\"https://math.stackexchange.com/questions/87230/picking-random-points-in-the-volume-of-sphere-with-uniform-probability\">Nate Eldredge's answer</a> to a similar question on math.stackexchange.com, you can generate such a vector by generating a vector of <code>d</code> independent Gaussian random variables and a random number <code>U</code> uniformly distributed over the closed interval <code>[0, 1]</code>, then normalizing the vector to norm <code>U^(1/d)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "is_accepted": false, "score": 4, "last_activity_date": 1464859181, "last_edit_date": 1464859181, "creation_date": 1464820144, "answer_id": 37579811, "question_id": 37577803, "link": "https://stackoverflow.com/questions/37577803/generating-random-vectors-of-euclidean-norm-1-in-python/37579811#37579811", "title": "Generating random vectors of Euclidean norm &lt;= 1 in Python?", "body": "<p>Based on the answer by user2357112, you need something like this:</p>\n\n<pre><code>import numpy as np\n...\ninv_d = 1.0 / d\nfor ...:\n    gauss = np.random.normal(size=d)\n    length = np.linalg.norm(gauss)\n    if length == 0.0:\n        x = gauss\n    else:\n        r = np.random.rand() ** inv_d\n        x = np.multiply(gauss, r / length)\n        # conceptually: / length followed by * r\n    # do something with x\n</code></pre>\n\n<p>(this is my second Python program, so don't shoot at me...)</p>\n\n<p>The tricks are that</p>\n\n<ul>\n<li>the combination of d independent gaussian variables with same \u03c3 is a gaussian distribution in d dimensions, which, remarkably, has spherical symmetry,</li>\n<li>the gaussian distribution in d dimensions can be projected onto the unit sphere by dividing by the norm, and</li>\n<li>the uniform distribution in a d-dimensional unit sphere has cumulative radial distribution r<sup>d</sup> (which is what you <a href=\"https://en.wikipedia.org/wiki/Inverse_transform_sampling\" rel=\"nofollow\">need to invert</a>)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1110, "user_id": 4120777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZb7p.png?s=128&g=1", "display_name": "Vincenzo Lavorini", "link": "https://stackoverflow.com/users/4120777/vincenzo-lavorini"}, "is_accepted": false, "score": -1, "last_activity_date": 1506679627, "last_edit_date": 1506679627, "creation_date": 1506679076, "answer_id": 46486398, "question_id": 37577803, "link": "https://stackoverflow.com/questions/37577803/generating-random-vectors-of-euclidean-norm-1-in-python/46486398#46486398", "title": "Generating random vectors of Euclidean norm &lt;= 1 in Python?", "body": "<p>this is the Python / Numpy code I am using. Since it does not use loops, is much faster:</p>\n\n<pre><code>n_vectors=1000\nd=2\n\nrnd_vec=np.random.uniform(-1, 1, size=(n_vectors, d))                # the initial random vectors\nunif=np.random.uniform(size=n_vectors)                               # a second array random numbers\nscale_f=np.expand_dims(np.linalg.norm(rnd_vec, axis=1)/unif, axis=1) # the scaling factors\nrnd_vec=rnd_vec/scale_f                                              # the random vectors in R^d\n</code></pre>\n\n<p>The second array of random numbers (<em>unif</em>) is needed as second scaling factor because otherwise all the vectors will have euclidean norm equal to one.</p>\n"}], "owner": {"reputation": 305, "user_id": 5049786, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d791f7d2b108761fbe794bc47c3099e7?s=128&d=identicon&r=PG", "display_name": "lamb_da_calculus", "link": "https://stackoverflow.com/users/5049786/lamb-da-calculus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3892, "favorite_count": 2, "accepted_answer_id": 37577963, "answer_count": 3, "score": 14, "last_activity_date": 1506679627, "creation_date": 1464811466, "last_edit_date": 1464811750, "question_id": 37577803, "link": "https://stackoverflow.com/questions/37577803/generating-random-vectors-of-euclidean-norm-1-in-python", "title": "Generating random vectors of Euclidean norm &lt;= 1 in Python?", "body": "<p>More specifically, given a natural number d, how can I generate random vectors in R^d such that each vector x has Euclidean norm &lt;= 1?</p>\n\n<p>Generating random vectors via numpy.random.rand(1,d) is no problem, but the likelihood of such a random vector having norm &lt;= 1 is predictably bad for even not-small d. For example, even for d = 10 about 0.2% percent of such random vectors have appropriately small norm. So that seems like a silly solution.</p>\n\n<p>EDIT: Re: Walter's comment, yes, I'm looking for a uniform distribution over vectors in the unit ball in R^d.</p>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 1, "creation_date": 1464811475, "post_id": 37577785, "comment_id": 62642491, "body": "You can&#39;t. There&#39;s not a way to use multiple versions of Python in the same project."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1464811891, "post_id": 37577785, "comment_id": 62642702, "body": "There are lots of python libraries for docx files. Do you have to use docxfactory?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1464812451, "post_id": 37577785, "comment_id": 62642982, "body": "Also which library are you using from Google? It looks to me like they support both python versions: <a href=\"https://developers.google.com/api-client-library/python/apis/analytics/v3\" rel=\"nofollow noreferrer\">developers.google.com/api-client-library/python/apis/analyti&zwnj;&#8203;cs/&hellip;</a>"}, {"owner": {"reputation": 181, "user_id": 6357910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc473bfd0b5d1a9bf2017358d4d417b3?s=128&d=identicon&r=PG&f=1", "display_name": "McHenry", "link": "https://stackoverflow.com/users/6357910/mchenry"}, "edited": false, "score": 0, "creation_date": 1464814607, "post_id": 37577785, "comment_id": 62644157, "body": "Well on that link for the analytics it says it is only compatible with Python 2.6, 2.7, 3.3, or 3.4... I am using 3.5.1... I do not really know if that means it is not supported or not."}, {"owner": {"reputation": 181, "user_id": 6357910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc473bfd0b5d1a9bf2017358d4d417b3?s=128&d=identicon&r=PG&f=1", "display_name": "McHenry", "link": "https://stackoverflow.com/users/6357910/mchenry"}, "edited": false, "score": 0, "creation_date": 1464814729, "post_id": 37577785, "comment_id": 62644223, "body": "Alex, also the docxfactory does exactly what I want in that it creates charts and tables quite easily... I have not found any other library that can do what it does.  Not that it does not exist obviously."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464815075, "post_id": 37577785, "comment_id": 62644392, "body": "Have you looked at <a href=\"https://pypi.python.org/pypi/docx\" rel=\"nofollow noreferrer\"><code>docx</code></a>?"}, {"owner": {"reputation": 181, "user_id": 6357910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc473bfd0b5d1a9bf2017358d4d417b3?s=128&d=identicon&r=PG&f=1", "display_name": "McHenry", "link": "https://stackoverflow.com/users/6357910/mchenry"}, "edited": false, "score": 0, "creation_date": 1464815582, "post_id": 37577785, "comment_id": 62644629, "body": "MattDMo,  Yes I have as far as I could tell it does not have the functionality I am looking for specifically creating charts ie things like pie charts and bar graphs and such."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 6357910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc473bfd0b5d1a9bf2017358d4d417b3?s=128&d=identicon&r=PG&f=1", "display_name": "McHenry", "link": "https://stackoverflow.com/users/6357910/mchenry"}, "edited": false, "score": 0, "creation_date": 1464815113, "post_id": 37578051, "comment_id": 62644418, "body": "I will give this a try and see if I can get it to work."}, {"owner": {"reputation": 181, "user_id": 6357910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc473bfd0b5d1a9bf2017358d4d417b3?s=128&d=identicon&r=PG&f=1", "display_name": "McHenry", "link": "https://stackoverflow.com/users/6357910/mchenry"}, "edited": false, "score": 0, "creation_date": 1464890311, "post_id": 37578051, "comment_id": 62682853, "body": "This definitely works... I will just now have to see if I can incorporate it into my application properly... Thanks!"}], "tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": true, "score": 9, "last_activity_date": 1464984489, "last_edit_date": 1464984489, "creation_date": 1464812367, "answer_id": 37578051, "question_id": 37577785, "link": "https://stackoverflow.com/questions/37577785/multiple-python-interpreters-used-in-the-same-project/37578051#37578051", "title": "Multiple Python Interpreters used in the same project?", "body": "<p>One idea is to write two seperate scripts; one for analytics and one for docxfactory. Decide which of these is the driver, and have that driver shell the other -- being sure to invoke the appropriate version of python.</p>\n\n<p>ex:</p>\n\n<pre><code>#/usr/bin/env python2.7\nimport subprocess\n# Do something with analytics\n# ...\n# Now call docxfactory script\nsubprocess.call(['python3', 'docxcript.py'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1123, "user_id": 801203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cef1136ec4289e3706f354d0641612d0?s=128&d=identicon&r=PG", "display_name": "Ayrat", "link": "https://stackoverflow.com/users/801203/ayrat"}, "edited": false, "score": 1, "creation_date": 1464872031, "post_id": 37579206, "comment_id": 62669621, "body": "thanks, but what you described is how to use two python versions for <i>running</i> apps, not for editing them. I.e., this does make pycharm <i>parse</i> files accordingly (python3 files will have &#39;errors&#39; if you use python2 interpr for the project)."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6320679"}, "is_accepted": false, "score": 5, "last_activity_date": 1464816984, "creation_date": 1464816984, "answer_id": 37579206, "question_id": 37577785, "link": "https://stackoverflow.com/questions/37577785/multiple-python-interpreters-used-in-the-same-project/37579206#37579206", "title": "Multiple Python Interpreters used in the same project?", "body": "<p>To use different interpreters on pycharm is easy, follow these steps bellow:</p>\n\n<ul>\n<li>First you need to add a new interpreter,  go to section \"settings\"</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/01KUn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/01KUn.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Select the tab \"Project Interpreter\"</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/jTPzu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jTPzu.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Click on gear at right side on top</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/AQvjQ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AQvjQ.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Click on Plus signal to add a new interpreter</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/1igWF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1igWF.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Select the Python Executable interpreter and apply/quit other frames</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/LYcgb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LYcgb.png\" alt=\"enter image description here\"></a></p>\n\n<p>To change the interpreter, you need to follow this another steps</p>\n\n<ul>\n<li>Click on the run listbox, and select the option \"Edit Configurations\"</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/ZRqOE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZRqOE.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>At this window locate the section \"Python Interpreter\" and click on bottom arrow to select a new interpreter</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/BoMsG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BoMsG.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Click on \"apply.</li>\n</ul>\n\n<p>After these steps, you can change the interpreter any time.</p>\n"}, {"comments": [{"owner": {"reputation": 823, "user_id": 374437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5Lakp.jpg?s=128&g=1", "display_name": "Veltzer Doron", "link": "https://stackoverflow.com/users/374437/veltzer-doron"}, "edited": false, "score": 0, "creation_date": 1513614765, "post_id": 40724089, "comment_id": 82710596, "body": "there&#39;s a space missing at &#39;... could stop workingat any...&#39;"}, {"owner": {"reputation": 3478, "user_id": 737297, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6bvSS.png?s=128&g=1", "display_name": "Mike Furlender", "link": "https://stackoverflow.com/users/737297/mike-furlender"}, "edited": false, "score": 2, "creation_date": 1540480589, "post_id": 40724089, "comment_id": 92890605, "body": "Awesome. All the other posts say there&#39;s no way to do it, but there is very much a way to do it :D"}, {"owner": {"reputation": 1440, "user_id": 1336078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa4b792bca20ed25290cc9a7edac8b0?s=128&d=identicon&r=PG", "display_name": "wjv", "link": "https://stackoverflow.com/users/1336078/wjv"}, "edited": false, "score": 0, "creation_date": 1560495249, "post_id": 40724089, "comment_id": 99762731, "body": "It should also be noted that there <i>is</i> a GUI way to do it \u2026 <i>if</i> you have access to IntelliJ IDEA Ultimate (with the Python plugin). In IDEA Ultimate, just pick the menu option &quot;File \u2192 Project Structure\u2026&quot;, and then you can add modules to the project. These modules remain available and configurable once you switch back to PyCharm."}, {"owner": {"reputation": 2168, "user_id": 4543133, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/709a50f4434a5236a949f4e5c7dbc2fb?s=128&d=identicon&r=PG", "display_name": "YTerle", "link": "https://stackoverflow.com/users/4543133/yterle"}, "edited": false, "score": 1, "creation_date": 1577547892, "post_id": 40724089, "comment_id": 105196454, "body": "Thank you! Works still on PyCharm 2019.3.1"}, {"owner": {"reputation": 19074, "user_id": 499449, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b26233b0a336a8396f49a6926eca51?s=128&d=identicon&r=PG", "display_name": "Stuart Golodetz", "link": "https://stackoverflow.com/users/499449/stuart-golodetz"}, "edited": false, "score": 0, "creation_date": 1613149608, "post_id": 40724089, "comment_id": 116996008, "body": "Thanks - this is exceptionally useful, making my life a lot easier!"}], "tags": [], "owner": {"reputation": 1116, "user_id": 1350867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a98c25a30bcd6023c3c45c8cf859ed?s=128&d=identicon&r=PG", "display_name": "Mark Veltzer", "link": "https://stackoverflow.com/users/1350867/mark-veltzer"}, "is_accepted": false, "score": 20, "last_activity_date": 1515552002, "last_edit_date": 1515552002, "creation_date": 1479743285, "answer_id": 40724089, "question_id": 37577785, "link": "https://stackoverflow.com/questions/37577785/multiple-python-interpreters-used-in-the-same-project/40724089#40724089", "title": "Multiple Python Interpreters used in the same project?", "body": "<p>This is actually possible with a bit of hacking.</p>\n\n<ul>\n<li>close the pycharm IDE.</li>\n<li>open <code>$PROJECT/.idea/modules.xml</code> and add another module with a different name like this:</li>\n</ul>\n\n<p><code>&lt;modules&gt;\n      &lt;module fileurl=\"file://$PROJECT_DIR$/.idea/jobs.iml\" filepath=\"$PROJECT_DIR$/.idea/jobs.iml\" /&gt;\n      &lt;module fileurl=\"file://$PROJECT_DIR$/.idea/synonymer.iml\" filepath=\"$PROJECT_DIR$/.idea/synonymer.iml\" /&gt;\n    &lt;/modules&gt;</code></p>\n\n<ul>\n<li>now add a file by the same name in <code>$PROJECT/.idea</code>.</li>\n<li>reopen the project.</li>\n<li>open project settings where you will see something like this:<a href=\"https://i.stack.imgur.com/f92qv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/f92qv.png\" alt=\"enter image description here\"></a></li>\n<li>notice that now there are <strong>two modules</strong> and you can configure each one separately. This means that you can configure folders, exclusion and different interpreters. Now it's you job to configure things properly.</li>\n</ul>\n\n<p>Caveat: This is a hack which has no GUI in pycharm. This could stop working at any upgrade to pycharm. However, I don't think it will for various reasons.</p>\n"}, {"comments": [{"owner": {"reputation": 683, "user_id": 1756187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/517a1dabef1700d51ecdcc15d95e0e35?s=128&d=identicon&r=PG", "display_name": "Slawek Rewaj", "link": "https://stackoverflow.com/users/1756187/slawek-rewaj"}, "edited": false, "score": 2, "creation_date": 1567685832, "post_id": 56875333, "comment_id": 102042274, "body": "This is the real answer ;)"}, {"owner": {"reputation": 4126, "user_id": 159570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13fbbc7c48d899eda17dfefa8e106214?s=128&d=identicon&r=PG", "display_name": "Joe Coder", "link": "https://stackoverflow.com/users/159570/joe-coder"}, "edited": false, "score": 0, "creation_date": 1574322789, "post_id": 56875333, "comment_id": 104193488, "body": "Awesome!  I got hung up on the initial error during the &quot;Attach&quot; step, but this is a nice workaround."}, {"owner": {"reputation": 3503, "user_id": 2514228, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65725e6bdaf64eaa27e13a675c537fd8?s=128&d=identicon&r=PG", "display_name": "Micah Smith", "link": "https://stackoverflow.com/users/2514228/micah-smith"}, "edited": false, "score": 0, "creation_date": 1587908851, "post_id": 56875333, "comment_id": 108688649, "body": "This works great! It works at least in Pycharm CE 2020.1"}], "tags": [], "owner": {"reputation": 4508, "user_id": 494983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b959fa42f155acebefcf622bcfb7deed?s=128&d=identicon&r=PG", "display_name": "Jake Biesinger", "link": "https://stackoverflow.com/users/494983/jake-biesinger"}, "is_accepted": false, "score": 9, "last_activity_date": 1562175048, "creation_date": 1562175048, "answer_id": 56875333, "question_id": 37577785, "link": "https://stackoverflow.com/questions/37577785/multiple-python-interpreters-used-in-the-same-project/56875333#56875333", "title": "Multiple Python Interpreters used in the same project?", "body": "<p>Not sure if this applies in Community Edition, but in Professional, this is straightforward. We use it to have a separately managed virtualenv + interpreter for each of several Google Cloud Functions under the same Git + PyCharm projects.</p>\n\n<p>Assuming you have a project structure like mine:</p>\n\n<pre><code>myproject\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 function1\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 requirements.txt\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 function2\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 requirements.txt\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 main.py\n\u251c\u2500\u2500 README.md\n</code></pre>\n\n<ol>\n<li>Open your project and set up the interpreter + virtualenv as usual (File -> Settings -> Project -> Project Interpreter). Create a new virtualenv interpreter, saving it under your project's root (e.g., <code>myproject/venv</code>)\n\n<ul>\n<li>Note: This will be the default interpreter which we will override for  <code>function1</code> and <code>function2</code>.</li>\n</ul></li>\n<li>Create a <em>new</em> PyCharm project for each subfolder that needs its own virtualenv. You'll <strong>attach</strong> this project to your existing project.\n\n<ul>\n<li>File -> Open -> Select the subfolder (e.g., <code>function1</code>) -> OK -> \"Attach\"</li>\n<li>Note: A <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360003428800--The-project-at-uses-a-non-standard-layout-and-cannot-be-attached-to-this-project-since-update-to-2019-1\" rel=\"noreferrer\">bug</a> in PyCharm may cause an error message here... if so, choose <code>open in a new window</code> instead of <code>attach</code>, then close the new window and try again.</li>\n</ul></li>\n<li>Go back to project interpreter settings. Notice: there are now two projects listed, the root <code>myproject</code> and the subfolder <code>function1</code>. \n\n<ul>\n<li>Configure each project's interpreter as you like, e.g., creating a new virtualenv interpreter stored under <code>myproject/function1/venv</code>. These now act as totally independent interpreters and PyCharm plays nicely with both.</li>\n</ul></li>\n<li>Repeat steps 2-3 for as many subfolders/virtualenvs as you want, such as <code>function2</code> in my example.</li>\n</ol>\n\n<p>If everything went well, you'll notice that the subfolders are <strong>bolded</strong>, indicating that they are really separate projects.</p>\n"}], "owner": {"reputation": 181, "user_id": 6357910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc473bfd0b5d1a9bf2017358d4d417b3?s=128&d=identicon&r=PG&f=1", "display_name": "McHenry", "link": "https://stackoverflow.com/users/6357910/mchenry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6740, "favorite_count": 3, "accepted_answer_id": 37578051, "answer_count": 4, "score": 17, "last_activity_date": 1562175048, "creation_date": 1464811395, "last_edit_date": 1464814991, "question_id": 37577785, "link": "https://stackoverflow.com/questions/37577785/multiple-python-interpreters-used-in-the-same-project", "title": "Multiple Python Interpreters used in the same project?", "body": "<p>I am using pycharm and it only lets you use one interpreter for example Python 2.7.5 or Python 3.5.1.</p>\n\n<p>The problem is I have certain modules one from google to access analytics data and one called docxfactory that I want to use together.</p>\n\n<p>I can only get docxfactory to work on Python 3.5.1 and I can only get analytics to work on 2.7.5... </p>\n\n<p>How can I get it so I can use these two modules together?  I read an answer on here that said to have them in two different projects and unless I did that wrong I tried that with no success... any ideas?</p>\n"}, {"tags": ["python", "c++", "object", "cython"], "comments": [{"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1464811249, "post_id": 37577676, "comment_id": 62642347, "body": "If you are going to literally rewrite Python code in C++ then you will gain nothing. But you can extract data from Python objects and operate on pure C++, that will definitely give you great performance boost, mostly because you can drop heavy polymorphism."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1464816059, "post_id": 37577676, "comment_id": 62644882, "body": "So, essentially you want to implement the data structure in <code>Python</code> and implement the algorithm that acts on that DS is <code>C++</code>, right?"}, {"owner": {"reputation": 550, "user_id": 6046281, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a97f01723e54ef60ceb3a27151a1667?s=128&d=identicon&r=PG", "display_name": "duncster94", "link": "https://stackoverflow.com/users/6046281/duncster94"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1464870906, "post_id": 37577676, "comment_id": 62668729, "body": "@Jim That&#39;s the idea :)"}], "answers": [{"comments": [{"owner": {"reputation": 550, "user_id": 6046281, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a97f01723e54ef60ceb3a27151a1667?s=128&d=identicon&r=PG", "display_name": "duncster94", "link": "https://stackoverflow.com/users/6046281/duncster94"}, "edited": false, "score": 0, "creation_date": 1464875825, "post_id": 37592955, "comment_id": 62672679, "body": "Thanks for this.   I agree, the effort put into learning the API is probably not worth my time. Extracting the data seems like a good idea. I decided last night that I mine aswell try to rewrite my classes in C++ if I&#39;m going seriously commit myself to learning the language.  If it so happens that I can&#39;t manage it, I&#39;ll look into the data extraction."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 2, "last_activity_date": 1464873266, "creation_date": 1464873266, "answer_id": 37592955, "question_id": 37577676, "link": "https://stackoverflow.com/questions/37577676/using-python-objects-in-c/37592955#37592955", "title": "Using Python objects in C++", "body": "<p>Yes. You will get a speed-up over pure python but not on par with the increase you'd get if you were using pure <code>C/C++</code>. If you want to handle Python Objects you'll need to do it via the <a href=\"https://docs.python.org/3/c-api/index.html\" rel=\"nofollow\"><code>Python C/API</code></a>; this adds overhead to the execution, the price you must pay for being allowed to interact with Python. </p>\n\n<p>Do note this involves a lot of complexity since you need to be familiar with the API and read up what functions do with object references, how to create Lists, pack Tuples et cetera. You can skip through all these if you just create a couple of <code>public</code> Cython <code>cdef</code> functions that wrap the methods on your objects. This generates all the <code>CPython</code> code that handles these for you.</p>\n\n<p>A little example in which a silly object is wrapped and embedded might look like this (note, I'm using <code>.c</code> for this, <code>c++</code> has similar steps):</p>\n\n<pre><code>class PyClass(object):\n\n    def __init__(self):\n        self.data = []\n\n    def add(self, val):\n        self.data.append(val)\n\n    def __str__(self):\n        return \"Data: \" + str(self.data)\n\ncdef public object createPyClass():\n    return PyClass()\n\ncdef public void addData(object p, int val):\n    p.add(val)\n\ncdef public char* printCls(object p):\n    return bytes(str(p), encoding = 'utf-8')\n</code></pre>\n\n<p>Compiling with <code>cython pycls.pyx</code> (use <code>--cplus</code> for <code>c++</code>) will generate a <code>.c</code> and <code>.h</code> file containing the source and the function declarations respectively. All you need to do now is create a <code>main.c</code> file that starts up Python and you're ready to call these functions:</p>\n\n<pre><code>#include \"Python.h\"   // Python.h always gets included first.\n#include \"pycls.h\"    // Include your header file.\n\nint main(int argc, char *argv[])\n{\n    Py_Initialize();   // initialize Python\n    PyInit_pycls();    // initialize module (initpycls(); in Py2)\n    PyObject *obj = createPyClass();\n    for(int i=0; i&lt;10; i++){\n        addData(obj, i);\n    }\n    printf(\"%s\\n\", printCls(obj));\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Compiling this with the proper flags (which you can obtain from <code>python3.5-config</code> of <code>python-config</code> [Py2]):</p>\n\n<pre><code>gcc pycls.c main.c -L$(python3.5-config --cflags) -I$(python3.5-config --ldflags) -std=c99\n</code></pre>\n\n<p>Will create your executable which interacts with your object:</p>\n\n<pre><code>./a.out\nData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>All this is done by using <code>Cython</code> along with the <code>public</code> keyword that generates the <code>.h</code> header file. You could alternatively just compile a python module with Cython and create the header/handle the additional boilerplate yourself. Since I don't think you want to get boggled down with <code>C-API</code> learning, this shouldn't be the way to go.</p>\n\n<p>As @freakish states in his comment, it would be ideal to extract the data (<a href=\"http://docs.scipy.org/doc/numpy-1.11.0/reference/c-api.array.html#c.PyArray_DATA\" rel=\"nofollow\"><code>numpy</code> has a <code>C-API</code> you can use for this</a>) and work on it in pure <code>C++</code>. Generally if you work your loops in <code>C/C++</code> and perform the grunt work there, you'll get good speed ups. </p>\n"}], "owner": {"reputation": 550, "user_id": 6046281, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a97f01723e54ef60ceb3a27151a1667?s=128&d=identicon&r=PG", "display_name": "duncster94", "link": "https://stackoverflow.com/users/6046281/duncster94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2648, "favorite_count": 0, "accepted_answer_id": 37592955, "answer_count": 1, "score": 3, "last_activity_date": 1464873266, "creation_date": 1464810968, "last_edit_date": 1464811264, "question_id": 37577676, "link": "https://stackoverflow.com/questions/37577676/using-python-objects-in-c", "title": "Using Python objects in C++", "body": "<p>I'm writing a code that calculates the images of nonlinear maps using methods from interval analysis, applies a minkowski sum and repeats for an arbitrary number of iterations.</p>\n\n<p>I've written a working code in Python, however I would like to be able to implement some of the more iteration/recursion intensive parts of the algorithm in C++ to benefit from the increased speed. I have used Cython in the past with great results, but I'd like to practice my C++.</p>\n\n<p>Also, my objects are complicated enough that I'd rather avoid having to implement them in C++ (baby steps!).</p>\n\n<p>So my questions are:</p>\n\n<p>1) Does using Python objects in C++ prevent any improvement in efficiency?</p>\n\n<p>2) If not, is it possible to use Cython to wrap a C++ function which iterates/recurses over a python object?</p>\n\n<p>To be more specific, I have a recursive algorithm that recurses over the left and right children of a BST (though it's a fairly heavily modified BST so I'd rather not get bogged down with the details of implementing it in C++), however the runtime is quite prohibitive, so I'd like to write it in C++.</p>\n"}, {"tags": ["python", "bash", "terminal", "anaconda"], "comments": [{"owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1464811453, "post_id": 37577666, "comment_id": 62642474, "body": "what do you get if you run &quot;echo $PYTHONPATH&quot; from the shell?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3125347"}, "reply_to_user": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1464811840, "post_id": 37577666, "comment_id": 62642678, "body": "@Isogen74 /Users/UCL_Astronomy/Documents/PTS/pts:/Users/UCL_Astronomy/&zwnj;&#8203;Documents/PTS/pts:"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3125347"}, "reply_to_user": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1464812576, "post_id": 37577666, "comment_id": 62643042, "body": "@Isogen74 Any thoughts?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464812909, "post_id": 37577666, "comment_id": 62643226, "body": "Links to documentation and pastes of terminal output are <b>much</b> more useful than random screen captures. Links can be viewed for information you may have missed. Text can be copied and pasted to try (and look for formatting/character oddities)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3125347"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464812952, "post_id": 37577666, "comment_id": 62643246, "body": "@EtanReisner Apologies, will update with text and links now."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464812983, "post_id": 37577666, "comment_id": 62643260, "body": "For example: According to <a href=\"http://www.skirt.ugent.be/pts/_install_mac_set_up.html\" rel=\"nofollow noreferrer\">this page</a> which I assume is the one you were using you have included one path too many in your <code>PYTHONPATH</code> value. You should have stopped at <code>&#47;PTS</code> and not ended with <code>&#47;PTS&#47;pts</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3125347"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464813114, "post_id": 37577666, "comment_id": 62643318, "body": "@EtanReisner Many thanks, it always takes a fresh eye to see the obvious istake! Now all working fine, thank you very much!"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1464815149, "post_id": 37577666, "comment_id": 62644430, "body": "<b>PLEASE DO NOT POST TEXT AS IMAGES</b>. Copy and paste the text into your question. Images are not searchable, and can not be interpreted by screen readers for those with visual impairments. Use the <a href=\"https://stackoverflow.com/posts/37577666/edit\">edit</a> link to modify your question. See <a href=\"http://meta.stackoverflow.com/a/285557/1426065\">this</a> for more information."}], "answers": [{"tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": true, "score": 0, "last_activity_date": 1464814872, "creation_date": 1464814872, "answer_id": 37578705, "question_id": 37577666, "link": "https://stackoverflow.com/questions/37577666/anaconda-problems-modifying-pyhtonpath-in-profile-and-bash-profile/37578705#37578705", "title": "Anaconda problems modifying PYHTONPATH in .profile and .bash_profile", "body": "<p>You have set <code>PYTHONPATH</code> incorrectly. You included one path component too many.</p>\n\n<p>From <a href=\"http://www.skirt.ugent.be/pts/_install_mac_set_up.html\" rel=\"nofollow\">Configuring paths and aliases</a></p>\n\n<blockquote>\n  <p>Add the following lines:</p>\n</blockquote>\n\n<pre><code>export PYTHONPATH=~/PTS\nalias pts=\"python -m pts.do\"\nalias ipts=\"python -im pts.do\"\n</code></pre>\n\n<p>But you added the equivalent of</p>\n\n<pre><code>export PYTHONPATH=~/PTS/pts\n</code></pre>\n\n<p>which path <em>includes</em> the <code>pts</code> module that the error is complaining about.</p>\n\n<p>Remove the <code>/pts</code> bit from your <code>PYTHONPATH</code> line and things should work.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3125347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 37578705, "answer_count": 1, "score": 0, "last_activity_date": 1464814872, "creation_date": 1464810922, "last_edit_date": 1464813011, "question_id": 37577666, "link": "https://stackoverflow.com/questions/37577666/anaconda-problems-modifying-pyhtonpath-in-profile-and-bash-profile", "title": "Anaconda problems modifying PYHTONPATH in .profile and .bash_profile", "body": "<p>So I have my .profile and .bash_profile setup as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NHMaZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NHMaZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I am also using the anaconda Python package.</p>\n\n<p>I'm following these set of instructions found here:</p>\n\n<p><a href=\"http://www.skirt.ugent.be/pts/_install_mac_set_up.html\" rel=\"nofollow noreferrer\">http://www.skirt.ugent.be/pts/_install_mac_set_up.html</a></p>\n\n<p>And receiving this error message:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cLpnT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cLpnT.png\" alt=\"enter image description here\"></a></p>\n\n<p>\"No module named pts\"</p>\n\n<p>Does anyone know where I have gone wrong?? There seems to be a comflict with Anaconda and the <code>pythonpath=</code> command in the .bash_profile file...?</p>\n\n<p>Any suggestions on how to fix this/marry the two up would be much appreciated!</p>\n"}, {"tags": ["python", "json", "encoding"], "comments": [{"owner": {"reputation": 708, "user_id": 3401706, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ece1e92fd692086ce8f6fe7c63caa979?s=128&d=identicon&r=PG&f=1", "display_name": "saq7", "link": "https://stackoverflow.com/users/3401706/saq7"}, "edited": false, "score": 0, "creation_date": 1464810802, "post_id": 37577549, "comment_id": 62642111, "body": "Welcome, to hell! <a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "edited": false, "score": 0, "creation_date": 1464810821, "post_id": 37577549, "comment_id": 62642120, "body": "what happens if you remove .decode(&#39;utf-8&#39;) ?"}, {"owner": {"reputation": 1614, "user_id": 2131783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5f7a6c30de72d289b4c4605601b0f47?s=128&d=identicon&r=PG", "display_name": "Thomas Kowalski", "link": "https://stackoverflow.com/users/2131783/thomas-kowalski"}, "edited": false, "score": 0, "creation_date": 1464810880, "post_id": 37577549, "comment_id": 62642154, "body": "Already tried :  File &quot;C:\\Python34\\lib\\json_<i>init_</i>.py&quot;, line 312, in loads     s.__class__.__name__)) TypeError: the JSON object must be str, not &#39;bytes&#39;"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1464811011, "post_id": 37577549, "comment_id": 62642217, "body": "try using the <code>codec</code> module to deal with the UTF-8 data"}, {"owner": {"reputation": 2451, "user_id": 4702072, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-hub0mTOr0DQ/AAAAAAAAAAI/AAAAAAAAABI/Kmd7FYRMRwY/photo.jpg?sz=128", "display_name": "YOBA", "link": "https://stackoverflow.com/users/4702072/yoba"}, "edited": false, "score": 0, "creation_date": 1464812116, "post_id": 37577549, "comment_id": 62642823, "body": "have you tried using requests library -&gt; requests.get(url).json() ?"}, {"owner": {"reputation": 1614, "user_id": 2131783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5f7a6c30de72d289b4c4605601b0f47?s=128&d=identicon&r=PG", "display_name": "Thomas Kowalski", "link": "https://stackoverflow.com/users/2131783/thomas-kowalski"}, "edited": false, "score": 0, "creation_date": 1464812593, "post_id": 37577549, "comment_id": 62643050, "body": "it does just the same"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 5811833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f2309d74f99a49ee9df67a8e57926a?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Shapiro", "link": "https://stackoverflow.com/users/5811833/jesse-shapiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1464813193, "creation_date": 1464813193, "answer_id": 37578264, "question_id": 37577549, "link": "https://stackoverflow.com/questions/37577549/json-encoding-and-downloading-from-a-url/37578264#37578264", "title": "JSON encoding and downloading from a URL", "body": "<p>JSON can be encoded in any of UTF-8, UTF-16, or UTF-32. I would try decoding as UTF-16 instead of UTF-8.</p>\n"}], "owner": {"reputation": 1614, "user_id": 2131783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5f7a6c30de72d289b4c4605601b0f47?s=128&d=identicon&r=PG", "display_name": "Thomas Kowalski", "link": "https://stackoverflow.com/users/2131783/thomas-kowalski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464813193, "creation_date": 1464810525, "question_id": 37577549, "link": "https://stackoverflow.com/questions/37577549/json-encoding-and-downloading-from-a-url", "title": "JSON encoding and downloading from a URL", "body": "<p>I'm trying to get JSON from a Steam inventory. I get the data like this :</p>\n\n<pre><code>def downloadString(url):\n    req = urllib.request.Request(\n        url, \n        data=None, \n        headers={\n            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.47 Safari/537.36'\n        }\n    )\n    f = urllib.request.urlopen(req)\n    return f.read().decode(\"utf-8\")\n</code></pre>\n\n<p>Now, I get a problem with encoding. Steam is using symbols like \"Black star\" ('\\u2605') which causes the json part to crash :</p>\n\n<pre><code>def test(string):\n    print(json.loads(string))\n\ntest(downloadString(url))\n</code></pre>\n\n<blockquote>\n  <p>File \"C:\\Python34\\lib\\encodings\\cp1252.py\", line 19, in encode\n      return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n  UnicodeEncodeError: 'charmap' codec can't encode character '\\u2605' in position 83559: character maps to </p>\n</blockquote>\n\n<p>I don't really understand how I can do something else... Any help would be... helpful.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "edited": false, "score": 1, "creation_date": 1464814899, "post_id": 37578573, "comment_id": 62644308, "body": "Legend - thanks a lot for that.  I&#39;m new at python/pandas, and learned a few things from this post.  Thx"}, {"owner": {"reputation": 13049, "user_id": 4413446, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z2gMy.png?s=128&g=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/4413446/romain"}, "reply_to_user": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "edited": false, "score": 0, "creation_date": 1464815078, "post_id": 37578573, "comment_id": 62644396, "body": "Cool ! Since pandas has been created at first for financial analysis, it has huge capabilities on time series operations."}, {"owner": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "edited": false, "score": 0, "creation_date": 1464815790, "post_id": 37578573, "comment_id": 62644748, "body": "Thanks for the edits, and re: your comment thats what it looks like.   Bit lazy on my side, but does pandas also include econometrics / forecasting capabilities?  I&#39;m trying to find examples online of cool things to do with financial data and pandas, but most things seem to be moving averages etc..."}, {"owner": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "edited": false, "score": 0, "creation_date": 1464816114, "post_id": 37578573, "comment_id": 62644898, "body": "Sorry - one last question.  Lets say I want to exclude time when the market is closed.  I don&#39;t mind backfilling data when the market is open, but I don&#39;t want to backfill when the market is closed (because a moving average on it will overweight the dummy data when the market is closed.. i think?)    Would you just set the df[time between x &amp; y] = NaN?"}, {"owner": {"reputation": 13049, "user_id": 4413446, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z2gMy.png?s=128&g=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/4413446/romain"}, "reply_to_user": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "edited": false, "score": 0, "creation_date": 1464988388, "post_id": 37578573, "comment_id": 62729540, "body": "First, sorry for my late answer.  Check this documentation, pandas includes some other features like <a href=\"http://pandas.pydata.org/pandas-docs/stable/computation.html#exponentially-weighted-windows\" rel=\"nofollow noreferrer\">exponentially weighted windows</a> However, for more advanced time series analysis you should check the <code>tsa</code> package of <a href=\"http://statsmodels.sourceforge.net/stable/tsa.html\" rel=\"nofollow noreferrer\">StatsModels</a>. I&#39;m not a specialist of stock analysis. I&#39;ve just edited the answer to include an example of resampling and moving average with missing values. Hope it helps."}, {"owner": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "edited": false, "score": 0, "creation_date": 1465218745, "post_id": 37578573, "comment_id": 62795435, "body": "Thanks a lot for your help. I&#39;m no specialist either! haha"}], "tags": [], "owner": {"reputation": 13049, "user_id": 4413446, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z2gMy.png?s=128&g=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/4413446/romain"}, "is_accepted": true, "score": 3, "last_activity_date": 1464988359, "last_edit_date": 1464988359, "creation_date": 1464814381, "answer_id": 37578573, "question_id": 37577470, "link": "https://stackoverflow.com/questions/37577470/python-pandas-moving-average-with-uneven-period-lengths/37578573#37578573", "title": "Python Pandas - Moving Average with uneven period lengths", "body": "<p>You can do something like this.</p>\n\n<ul>\n<li>Resample at the frequency you want (or downsampling)\n\n<ul>\n<li>You have to pay attention here to the resampling strategy. It has to be consistent with the meaning of your data. Here I have arbitrary used <code>bfill</code> (back fill that use next valid value) but another strategy could be more appropriate like <code>ffill</code> (forward fill that propagates the last valid value). </li>\n</ul></li>\n<li>Compute a moving average.</li>\n<li>Maybe you will have to deal with the index</li>\n</ul>\n\n<p>Note: This syntax for <code>rolling</code> has been introduced in <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rolling.html\" rel=\"nofollow noreferrer\">pandas 0.18.0</a>. However it is possible to do the same thing in previous version with <code>pd.rolling_mean</code>.</p>\n\n<pre><code># Test data\nd = {'data': [15.0, 18.25, 16.5, 17.199999999999999, 18.18],\n 'date_time': ['1/06/2016 19:27',\n  '1/06/2016 19:28',\n  '1/06/2016 19:30',\n  '1/06/2016 19:33',\n  '1/06/2016 19:34'],\n 'index': [46701, 46702, 46703, 46704, 46705]}\n\ndf = DataFrame(d)\ndf['date_time'] = pd.to_datetime(df['date_time'])\n\n# Setting the date as the index\ndf.set_index('date_time', inplace=True)\n# Resampling data\ndf = df.resample('1T').bfill()\n# Performing moving average\ndf['moving'] = df['data'].rolling(window=3, center=True).mean()\ndf.plot(y=['data', 'moving'])\ndf\n                      data  index     moving\ndate_time                                   \n2016-01-06 19:27:00  15.00  46701        NaN\n2016-01-06 19:28:00  18.25  46702  16.583333\n2016-01-06 19:29:00  16.50  46703  17.083333\n2016-01-06 19:30:00  16.50  46703  16.733333\n2016-01-06 19:31:00  17.20  46704  16.966667\n2016-01-06 19:32:00  17.20  46704  17.200000\n2016-01-06 19:33:00  17.20  46704  17.526667\n2016-01-06 19:34:00  18.18  46705        NaN\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/PDZm7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PDZm7.png\" alt=\"plot\"></a></p>\n\n<h2>Edit</h2>\n\n<p>Here is an example with missing data.</p>\n\n<pre><code># Random data parameters\nnum_sample = (0, 100)\nnb_sample = 1000\nstart_date = '2016-06-02'\nfreq = '2T'\n\nrandom_state = np.random.RandomState(0)\n\n# Generating random data\ndf = pd.DataFrame({'data': random_state.randint(num_sample[0], num_sample[1], nb_sample)},\n                          index=random_state.choice(\n                              pd.date_range(start=pd.to_datetime(start_date), periods=nb_sample * 3,\n                                            freq=freq),\n                              nb_sample))\n# Removing duplicate index\ndf = df.groupby(df.index).first()\n# Removing data for closed periods\ndf.loc[(df.index.hour &gt;= 22) | (df.index.hour &lt;= 7),'data'] = np.nan\n# Resampling\ndf = df.resample('1T').ffill()\n# Moving average by hours\ndf['avg'] = df['data'].rolling(window=60).mean()\n\nax = df.plot(kind='line', subplots=True)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/CKTe2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CKTe2.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1215, "favorite_count": 2, "accepted_answer_id": 37578573, "answer_count": 1, "score": 2, "last_activity_date": 1464988359, "creation_date": 1464810227, "question_id": 37577470, "link": "https://stackoverflow.com/questions/37577470/python-pandas-moving-average-with-uneven-period-lengths", "title": "Python Pandas - Moving Average with uneven period lengths", "body": "<p>I'm trying to figure out how to deal with time series data in pandas that has uneven period lengths.  The first example I'm looking at is how to calculate a moving average for the last 15 days. Here is an example of the data (time is UTC)</p>\n\n<pre><code>index   date_time         data\n46701   1/06/2016 19:27   15.00\n46702   1/06/2016 19:28   18.25\n46703   1/06/2016 19:30   16.50\n46704   1/06/2016 19:33   17.20\n46705   1/06/2016 19:34   18.18\n</code></pre>\n\n<p>I'm not sure if I should just fill in data so its all even 1 minute increments, or if there is a smarter way...  If anyone has suggestions it would be much appreciated</p>\n\n<p>Thanks - KC</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 3, "creation_date": 1464810095, "post_id": 37577421, "comment_id": 62641734, "body": "<b>Mandatory Warning</b> - Please do not use <code>list</code> as variable name as it shadows the builtin functions"}, {"owner": {"reputation": 1936, "user_id": 4036532, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mouPp.jpg?s=128&g=1", "display_name": "Katya Handler", "link": "https://stackoverflow.com/users/4036532/katya-handler"}, "edited": false, "score": 0, "creation_date": 1464810234, "post_id": 37577421, "comment_id": 62641809, "body": "What do you want your output to be?"}, {"owner": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464810313, "post_id": 37577421, "comment_id": 62641854, "body": "Mandatory Warning  ok thanks"}, {"owner": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464810387, "post_id": 37577421, "comment_id": 62641889, "body": "Katya Handler the output is working but in rare cases it show the error and the outcome is like naji gaming gameplay"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464810458, "post_id": 37577489, "comment_id": 62641925, "body": "oh so x = randint(0,11) is from 0 to 10 ?"}, {"owner": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464810628, "post_id": 37577489, "comment_id": 62642014, "body": "but i have if z &lt; 8"}, {"owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "reply_to_user": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464810853, "post_id": 37577489, "comment_id": 62642139, "body": "You also have &quot;z == x&quot; so what happens if they are both 10? Brackets are your friend when you have multiple sub-operations in the same if statement."}, {"owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "reply_to_user": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464811092, "post_id": 37577489, "comment_id": 62642264, "body": "See answer from @Austin below which explains the bracketing issue nicely."}, {"owner": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464814593, "post_id": 37577489, "comment_id": 62644149, "body": "ok thanks man i red the comment and now i know what i was doing wrong"}], "tags": [], "owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "is_accepted": false, "score": 2, "last_activity_date": 1464810304, "creation_date": 1464810304, "answer_id": 37577489, "question_id": 37577421, "link": "https://stackoverflow.com/questions/37577421/list-index-out-of-range-in-a-random-generating-program/37577489#37577489", "title": "List index out of range in a random generating program", "body": "<p>Your list contains 12 items, so the valid index range is 0 to 11. </p>\n\n<p>Your rand generator returns a value between 0 and 10.</p>\n\n<p>10 + 2 is more than 11 - so you're trying to access a list index which is off the end of the list.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "edited": false, "score": 0, "creation_date": 1464814534, "post_id": 37577670, "comment_id": 62644112, "body": "i understand now thank you very much for your time man that was really helpful"}], "tags": [], "owner": {"reputation": 70, "user_id": 4926921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e15e3699d8c686ee1ad88724240fbf7?s=128&d=identicon&r=PG&f=1", "display_name": "Austin S.", "link": "https://stackoverflow.com/users/4926921/austin-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1464810939, "creation_date": 1464810939, "answer_id": 37577670, "question_id": 37577421, "link": "https://stackoverflow.com/questions/37577421/list-index-out-of-range-in-a-random-generating-program/37577670#37577670", "title": "List index out of range in a random generating program", "body": "<p>The problem is in your statement</p>\n\n<pre><code>if z == x or z == y and z &lt; 8:\n</code></pre>\n\n<p>Try putting parentheses around (z == x or z == y).  In the event that z == x, your program does not ensure that z &lt; 8.  You can test this by entering</p>\n\n<pre><code>if 1 or 1 and 0:\n    print('TRUE!')\n</code></pre>\n\n<p>and comparing the output to </p>\n\n<pre><code>if (1 or 1) and 0:\n    print('TRUE!')\n</code></pre>\n\n<p>In short, you're saying \"a or (b and c),\" but you want to express \"(a or b) and c.\"</p>\n\n<p>I'm not really sure that I understand the purpose of your program, but as long as you guarantee that your z value is less than 8, you should not get an out of bounds exception.</p>\n"}], "owner": {"reputation": 1, "user_id": 6411443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e1d01687a75cc079490359f399747b?s=128&d=identicon&r=PG&f=1", "display_name": "naji", "link": "https://stackoverflow.com/users/6411443/naji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464810939, "creation_date": 1464810002, "last_edit_date": 1464810062, "question_id": 37577421, "link": "https://stackoverflow.com/questions/37577421/list-index-out-of-range-in-a-random-generating-program", "title": "List index out of range in a random generating program", "body": "<p>I was working on a program that take random\nwords from a list and combine them into one sentence\nbut I keep getting an error:</p>\n\n<pre><code>  File \"test2.py\", line 13, in generater\n    print list[z+2] ,\nIndexError: list index out of range\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>def generater():\n    list = [\"naji\", \"gaming\", \"gameplay\", \"start\", \"stuped\", \"awesome\", \"fast\", \"new\", \"racing\", \"shoting\", \"cool\", \"super\"]\n    from random import randint \n    x = randint(0,11)\n    print list[x] ,\n    y = randint(0,11)\n    if y == x and y != 0 :\n        print list[y-1] ,\n    else :\n        print list[y] , \n    z = randint(0,11) \n    if z == x or z == y and z &lt; 8 :\n        print list[z+2] ,\n    elif z == x or z == y and z &gt; 9 :\n        print list[z-5]\n    else :\n        print list[z]\ngenerater() \n</code></pre>\n"}, {"tags": ["javascript", "python", "asp.net", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 1, "creation_date": 1464812004, "post_id": 37577405, "comment_id": 62642758, "body": "you&#39;ll need to check which actual requests are being done when yo do any action to replicate them with scrapy, and which request comes with the response that has the information you want, I would recommend using <code>Firebug</code> for firefox or developer tools on chrome.   If you want to emulate a browser, please try selenium"}, {"owner": {"reputation": 4546, "user_id": 2781701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5745f276004f077454f27cde70858a1d?s=128&d=identicon&r=PG", "display_name": "Rafael Almeida", "link": "https://stackoverflow.com/users/2781701/rafael-almeida"}, "edited": false, "score": 0, "creation_date": 1464813233, "post_id": 37577405, "comment_id": 62643384, "body": "as eLRuLL said, you can use selenium for this to emulate a click or if you want to keep scrapy you can use splash with docker. Never tried for click emulating but for loading javascript works like a charm."}, {"owner": {"reputation": 125, "user_id": 3337499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6080efddce86eecd2776f1888fff97?s=128&d=identicon&r=PG", "display_name": "toni_piu", "link": "https://stackoverflow.com/users/3337499/toni-piu"}, "edited": false, "score": 0, "creation_date": 1464819575, "post_id": 37577405, "comment_id": 62646311, "body": "Sure, okay. I will try with Selenium then. Anyway, with the code I wrote I&#39;m getting an error 500, that means I&#39;m sending wrong my POST parameters. Maybe I&#39;m just missing something stupid. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 3337499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6080efddce86eecd2776f1888fff97?s=128&d=identicon&r=PG", "display_name": "toni_piu", "link": "https://stackoverflow.com/users/3337499/toni-piu"}, "edited": false, "score": 0, "creation_date": 1464868341, "post_id": 37582781, "comment_id": 62666877, "body": "Thanks! That&#39;s really helpful. The thing is, if I can&#39;t find my EVENTTARGET so simply, how I&#39;m supposed to find them dinamically to scrap the website? Is there any way to retrieve all those parameters via Python?"}, {"owner": {"reputation": 336, "user_id": 4999362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22cd1124922d68fa2100cbc028e9554?s=128&d=identicon&r=PG&f=1", "display_name": "Datalker", "link": "https://stackoverflow.com/users/4999362/datalker"}, "reply_to_user": {"reputation": 125, "user_id": 3337499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6080efddce86eecd2776f1888fff97?s=128&d=identicon&r=PG", "display_name": "toni_piu", "link": "https://stackoverflow.com/users/3337499/toni-piu"}, "edited": false, "score": 0, "creation_date": 1464926963, "post_id": 37582781, "comment_id": 62695750, "body": "EVENTTARGET is the same as id, just with one replacement. So I would start with <code>target.replace(&#39;_&#39;,&#39;$&#39;)</code>. Usually they are either stored in html/js, or in Cookies, or generated on the fly (the trickiest case, here you would need to consider Selenium or Splash)."}], "tags": [], "owner": {"reputation": 336, "user_id": 4999362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22cd1124922d68fa2100cbc028e9554?s=128&d=identicon&r=PG&f=1", "display_name": "Datalker", "link": "https://stackoverflow.com/users/4999362/datalker"}, "is_accepted": false, "score": -1, "last_activity_date": 1464908207, "last_edit_date": 1464908207, "creation_date": 1464842393, "answer_id": 37582781, "question_id": 37577405, "link": "https://stackoverflow.com/questions/37577405/scrapy-crawling-not-working-on-aspx-website/37582781#37582781", "title": "Scrapy crawling not working on ASPX website", "body": "<p>Do agree with ELRuLL -  Firebug is your best friend while scraping.\nIf you want to avoid JS simulation then you need reproduce carefully all the params/headers that are being sent. </p>\n\n<p>For example from what I see\nfor __EVENTTARGET you're sending just \n    <code>id=\"ctl00_m_g_36ea0310_893d_4a19_9ed1_88a133d06423_ctl00_Repeater2_ctl01_lnk_Diputado\")</code> </p>\n\n<p>and via Firebug we see that:</p>\n\n<pre><code>__EVENTTARGET=ctl00$m$g_36ea0310_893d_4a19_9ed1_88a133d06423$ctl00$Repeater2$ctl01$lnk_Diputado\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/631QF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/631QF.png\" alt=\"Form in firebug\"></a>\nIt maybe the reason and maybe not, just repeat and test. </p>\n\n<p><a href=\"http://getfirebug.com/whatisfirebug\" rel=\"nofollow noreferrer\">Firebug link</a> just in case.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 3337499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6080efddce86eecd2776f1888fff97?s=128&d=identicon&r=PG", "display_name": "toni_piu", "link": "https://stackoverflow.com/users/3337499/toni-piu"}, "edited": false, "score": 0, "creation_date": 1465411796, "post_id": 37603423, "comment_id": 62895073, "body": "OUuaaa! Awesome! This is just what I needed! Thank you very much! It really solves my need of getting the strings dinamically :)"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 7, "last_activity_date": 1464908927, "last_edit_date": 1495542810, "creation_date": 1464908168, "answer_id": 37603423, "question_id": 37577405, "link": "https://stackoverflow.com/questions/37577405/scrapy-crawling-not-working-on-aspx-website/37603423#37603423", "title": "Scrapy crawling not working on ASPX website", "body": "<p>If you look at the data posted to the form in chrome or firebug you can see there are many fields passed in the post request, there are a few that are essential and must be parsed from the original page, parsing the ids from the  <code>div.sangria ul li a</code> tags is not sufficient as the actual data posted is slightly different, what is posted is in the Javascript function, <code>WebForm_DoPostBackWithOptions</code> which is in the <em>href</em> not the <em>id</em> attribute:</p>\n\n<pre><code>href='javascript:WebForm_DoPostBackWithOptions(new \n WebForm_PostBackOptions(\"ctl00$m$g_36ea0310_893d_4a19_9ed1_88a133d06423$ctl00$Repeater1$ctl03$lnk_Grupo\", \"\", true, \"\", \"\", false, true))'&gt;\n</code></pre>\n\n<p>Sometimes all the underscores are replaced with dollar signs so it is easy to do a <em>str.replace</em> to get them in the correct order but not really in this case, we could use a regex to parse but I like the <a href=\"https://github.com/redapple/js2xml\" rel=\"nofollow noreferrer\">js2xml</a> lib which can parse a javascript function and its args into an xml tree.</p>\n\n<p>The following code using requests shows you how can get the data from  the initial request and get to all the pages you want:</p>\n\n<pre><code>import requests\nfrom  lxml import html\nimport js2xml\n\npost = \"http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx\"\n\n\ndef validate(xml):\n    # these fields are the minimum required as cannot be hardcoded\n    data = {\"__VIEWSTATEGENERATOR\": xml.xpath(\"//*[@id='__VIEWSTATEGENERATOR']/@value\")[0],\n            \"__EVENTVALIDATION\": xml.xpath(\"//*[@id='__EVENTVALIDATION']/@value\")[0],\n            \"__VIEWSTATE\": xml.xpath(\"//*[@id='__VIEWSTATE']/@value\")[0],\n            \" __REQUESTDIGEST\": xml.xpath(\"//*[@id='__REQUESTDIGEST']/@value\")[0]}\n    return data\n\n\n\nwith requests.Session() as s:\n    # make initial requests to get the links/hrefs and the from fields\n    r = s.get(\n        \"http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx\")\n    xml = html.fromstring(r.content)\n    hrefs = xml.xpath(\"//*[@id='moduloBusqueda']//div[@class='sangria']/ul/li/a/@href\")\n    form_data = validate(xml)\n    for h in hrefs:\n        js_xml = js2xml.parse(h)\n        _id = js_xml.xpath(\n            \"//identifier[@name='WebForm_PostBackOptions']/following-sibling::arguments/string[starts-with(.,'ctl')]\")[\n            0]\n        form_data[\"__EVENTTARGET\"] = _id.text\n        r = s.post(post, data=form_data)\n        xml = html.fromstring(r.content)\n        print(xml.xpath(\"//ul[@class='listadoVert02']/ul/li/a/text()\"))\n</code></pre>\n\n<p>If we run the code above we see the different text output from all teh anchor tags:</p>\n\n<pre><code>In [2]: with requests.Session() as s:\n   ...:         r = s.get(\n   ...:             \"http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx\")\n   ...:         xml = html.fromstring(r.content)\n   ...:         hrefs = xml.xpath(\"//*[@id='moduloBusqueda']//div[@class='sangria']/ul/li/a/@href\")\n   ...:         form_data = validate(xml)\n   ...:         for h in hrefs:\n   ...:                 js_xml = js2xml.parse(h)\n   ...:                 _id = js_xml.xpath(\n   ...:                     \"//identifier[@name='WebForm_PostBackOptions']/following-sibling::arguments/string[starts-with(.,'ctl')]\")[\n   ...:                     0]\n   ...:                 form_data[\"__EVENTTARGET\"] = _id.text\n   ...:                 r = s.post(post, data=form_data)\n   ...:                 xml = html.fromstring(r.content)\n   ...:                 print(xml.xpath(\"//ul[@class='listadoVert02']/ul/li/a/text()\"))\n   ...:         \n[u'Abo\\xedn Abo\\xedn, Sonsoles Trinidad', u'Adrados Gautier, M\\xaa Paloma', u'Aguado Del Olmo, M\\xaa Josefa', u'\\xc1lvarez Padilla, M\\xaa Nadia', u'Arribas Del Barrio, Jos\\xe9 M\\xaa', u'Ballar\\xedn Valc\\xe1rcel, \\xc1lvaro C\\xe9sar', u'Berrio Fern\\xe1ndez-Caballero, M\\xaa In\\xe9s', u'Berzal Andrade, Jos\\xe9 Manuel', u'Cam\\xedns Mart\\xednez, Ana', u'Carballedo Berlanga, M\\xaa Eugenia', 'Cifuentes Cuencas, Cristina', u'D\\xedaz Ayuso, Isabel Natividad', u'Escudero D\\xedaz-Tejeiro, Marta', u'Fermosel D\\xedaz, Jes\\xfas', u'Fern\\xe1ndez-Quejo Del Pozo, Jos\\xe9 Luis', u'Garc\\xeda De Vinuesa Gardoqui, Ignacio', u'Garc\\xeda Mart\\xedn, Mar\\xeda Bego\\xf1a', u'Garrido Garc\\xeda, \\xc1ngel', u'G\\xf3mez Ruiz, Jes\\xfas', u'G\\xf3mez-Angulo Rodr\\xedguez, Juan Antonio', u'Gonz\\xe1lez Gonz\\xe1lez, Isabel Gema', u'Gonz\\xe1lez Jim\\xe9nez, Bartolom\\xe9', u'Gonz\\xe1lez Taboada, Jaime', u'Gonz\\xe1lez-Mo\\xf1ux V\\xe1zquez, Elena', u'Gonzalo L\\xf3pez, Rosal\\xeda', 'Izquierdo Torres, Carlos', u'Li\\xe9bana Montijano, Pilar', u'Mari\\xf1o Ortega, Ana Isabel', u'Moraga Valiente, \\xc1lvaro', u'Mu\\xf1oz Abrines, Pedro', u'N\\xfa\\xf1ez Guijarro, Jos\\xe9 Enrique', u'Olmo Fl\\xf3rez, Luis Del', u'Ongil Cores, M\\xaa Gador', 'Ortiz Espejo, Daniel', u'Ossorio Crespo, Enrique Mat\\xedas', 'Peral Guerra, Luis', u'P\\xe9rez Baos, Ana Isabel', u'P\\xe9rez Garc\\xeda, David', u'Pla\\xf1iol De Lacalle, Regina M\\xaa', u'Redondo Alcaide, M\\xaa Isabel', u'Roll\\xe1n Ojeda, Pedro', u'S\\xe1nchez Fern\\xe1ndez, Alejandro', 'Sanjuanbenito Bonal, Diego', u'Serrano Guio, Jos\\xe9 Tom\\xe1s', u'Serrano S\\xe1nchez-Capuchino, Alfonso Carlos', 'Soler-Espiauba Gallo, Juan', 'Toledo Moreno, Lucila', 'Van-Halen Acedo, Juan']\n[u'Andaluz Andaluz, M\\xaa Isabel', u'Ardid Jim\\xe9nez, M\\xaa Isabel', u'Carazo G\\xf3mez, M\\xf3nica', u'Casares D\\xedaz, M\\xaa Luc\\xeda Inmaculada', u'Cepeda Garc\\xeda De Le\\xf3n, Jos\\xe9 Carmelo', 'Cruz Torrijos, Diego', u'Delgado G\\xf3mez, Carla', u'Franco Pardo, Jos\\xe9 Manuel', u'Freire Campo, Jos\\xe9 Manuel', u'Gabilondo Pujol, \\xc1ngel', 'Gallizo Llamas, Mercedes', u\"Garc\\xeda D'Atri, Ana\", u'Garc\\xeda-Rojo Garrido, Pedro Pablo', u'G\\xf3mez Montoya, Rafael', u'G\\xf3mez-Chamorro Torres, Jos\\xe9 \\xc1ngel', u'Gonz\\xe1lez Gonz\\xe1lez, M\\xf3nica Silvana', u'Leal Fern\\xe1ndez, M\\xaa Isaura', u'Llop Cuenca, M\\xaa Pilar', 'Lobato Gandarias, Juan', u'L\\xf3pez Ruiz, M\\xaa Carmen', u'Manguan Valderrama, Eva M\\xaa', u'Maroto Illera, M\\xaa Reyes', u'Mart\\xednez Ten, Carmen', u'Mena Romero, M\\xaa Carmen', u'Moreno Navarro, Juan Jos\\xe9', u'Moya Nieto, Encarnaci\\xf3n', 'Navarro Lanchas, Josefa', 'Nolla Estrada, Modesto', 'Pardo Ortiz, Josefa Dolores', u'Quintana Viar, Jos\\xe9', u'Rico Garc\\xeda-Hierro, Enrique', u'Rodr\\xedguez Garc\\xeda, Nicol\\xe1s', u'S\\xe1nchez Acera, Pilar', u'Sant\\xedn Fern\\xe1ndez, Pedro', 'Segovia Noriega, Juan', 'Vicente Viondi, Daniel', u'Vinagre Alc\\xe1zar, Agust\\xedn']\n['Abasolo Pozas, Olga', 'Ardanuy Pizarro, Miguel', u'Beirak Ulanosky, Jazm\\xedn', u'Camargo Fern\\xe1ndez, Ra\\xfal', 'Candela Pokorna, Marco', 'Delgado Orgaz, Emilio', u'D\\xedaz Rom\\xe1n, Laura', u'Espinar Merino, Ram\\xf3n', u'Espinosa De La Llave, Mar\\xeda', u'Fern\\xe1ndez Rubi\\xf1o, Eduardo', u'Garc\\xeda G\\xf3mez, M\\xf3nica', 'Gimeno Reinoso, Beatriz', u'Guti\\xe9rrez Benito, Eduardo', 'Huerta Bravo, Raquel', u'L\\xf3pez Hern\\xe1ndez, Isidro', u'L\\xf3pez Rodrigo, Jos\\xe9 Manuel', u'Mart\\xednez Abarca, Hugo', u'Morano Gonz\\xe1lez, Jacinto', u'Ongil L\\xf3pez, Miguel', 'Padilla Estrada, Pablo', u'Ruiz-Huerta Garc\\xeda De Viedma, Lorena', 'Salazar-Alonso Revuelta, Cecilia', u'San Jos\\xe9 P\\xe9rez, Carmen', u'S\\xe1nchez P\\xe9rez, Alejandro', u'Serra S\\xe1nchez, Isabel', u'Serra S\\xe1nchez, Clara', 'Sevillano De Las Heras, Elena']\n[u'Aguado Crespo, Ignacio Jes\\xfas', u'\\xc1lvarez Cabo, Daniel', u'Gonz\\xe1lez Pastor, Dolores', u'Iglesia Vicente, M\\xaa Teresa De La', 'Lara Casanova, Francisco', u'Marb\\xe1n De Frutos, Marta', u'Marcos Arias, Tom\\xe1s', u'Meg\\xedas Morales, Jes\\xfas Ricardo', u'N\\xfa\\xf1ez S\\xe1nchez, Roberto', 'Reyero Zubiri, Alberto', u'Rodr\\xedguez Dur\\xe1n, Ana', u'Rubio Ruiz, Juan Ram\\xf3n', u'Ruiz Fern\\xe1ndez, Esther', u'Sol\\xeds P\\xe9rez, Susana', 'Trinidad Martos, Juan', 'Veloso Lozano, Enrique', u'Zafra Hern\\xe1ndez, C\\xe9sar']\n</code></pre>\n\n<p>You can add the exact same logic to your spider, I just used requests to show you a working example. You should also be aware that not every asp.net site behaves the same, you may have to re-validate for every post as in this related <a href=\"https://stackoverflow.com/questions/36724326/making-subsequent-post-request-in-session-doesnt-work-web-scraping/36725215#36725215\">answer</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1498, "user_id": 5578348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99783dcf33b635d3a81e0ad0b6b72c83?s=128&d=identicon&r=PG&f=1", "display_name": "Wilfredo", "link": "https://stackoverflow.com/users/5578348/wilfredo"}, "is_accepted": false, "score": 1, "last_activity_date": 1464970932, "last_edit_date": 1464970932, "creation_date": 1464965189, "answer_id": 37617412, "question_id": 37577405, "link": "https://stackoverflow.com/questions/37577405/scrapy-crawling-not-working-on-aspx-website/37617412#37617412", "title": "Scrapy crawling not working on ASPX website", "body": "<p>I think that scrapy's <code>from_response</code> could help you a lot (maybe this isn't the best re but for it, but you'll get the idea), try something like this:</p>\n\n<pre><code>import scrapy\nimport urllib\nfrom scrapy.http.request.form import FormRequest\n\n\nclass AsambleaMadrid(scrapy.Spider):\n    name = \"Asamblea_Madrid\"\n    start_urls = ['http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx']\n\n    def parse(self, response):\n        ids_re = r'WebForm_PostBackOptions\\(([^,]*)'\n        for id in response.css('#moduloBusqueda li a').re(ids_re):\n            target = urllib.unquote(id).strip('\"')\n            formdata = {'__EVENTTARGET': target}\n            request = FormRequest.from_response(response=response,\n                                                formdata=formdata,\n                                                callback=self.takeEachParty,\n                                                dont_click=True)\n            yield request\n\n    def takeEachParty(self, response):\n        print response.css('.listadoVert02 li a::text').extract()\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 3337499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6080efddce86eecd2776f1888fff97?s=128&d=identicon&r=PG", "display_name": "toni_piu", "link": "https://stackoverflow.com/users/3337499/toni-piu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3317, "favorite_count": 3, "accepted_answer_id": 37603423, "answer_count": 3, "score": 3, "last_activity_date": 1466001222, "creation_date": 1464809922, "last_edit_date": 1466001222, "question_id": 37577405, "link": "https://stackoverflow.com/questions/37577405/scrapy-crawling-not-working-on-aspx-website", "title": "Scrapy crawling not working on ASPX website", "body": "<p>I'm scraping the Madrid Assembly's website, built in aspx, and I have no idea how to simulate clicks on the links where I need to get the corresponding politicians from. I tried this:</p>\n\n<pre><code>import scrapy\n\nclass AsambleaMadrid(scrapy.Spider):\n\nname        =   \"Asamblea_Madrid\"\nstart_urls  =   ['http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx']\n\ndef parse(self, response):\n\n    for id in response.css('div#moduloBusqueda div.sangria div.sangria ul li a::attr(id)'):\n        target                  =   id.extract()\n        url                     =   \"http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx\"\n\n        formdata=   {'__EVENTTARGET': target,\n                     '__VIEWSTATE': '/wEPDwUBMA9kFgJmD2QWAgIBD2QWBAIBD2QWAgIGD2QWAmYPZBYCAgMPZBYCAgMPFgIeE1ByZXZpb3VzQ29udHJvbE1vZGULKYgBTWljcm9zb2Z0LlNoYXJlUG9pbnQuV2ViQ29udHJvbHMuU1BDb250cm9sTW9kZSwgTWljcm9zb2Z0LlNoYXJlUG9pbnQsIFZlcnNpb249MTQuMC4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49NzFlOWJjZTExMWU5NDI5YwFkAgMPZBYMAgMPZBYGBSZnXzM2ZWEwMzEwXzg5M2RfNGExOV85ZWQxXzg4YTEzM2QwNjQyMw9kFgJmD2QWAgIBDxYCHgtfIUl0ZW1Db3VudAIEFghmD2QWAgIBDw8WBB4PQ29tbWFuZEFyZ3VtZW50BTRHcnVwbyBQYXJsYW1lbnRhcmlvIFBvcHVsYXIgZGUgbGEgQXNhbWJsZWEgZGUgTWFkcmlkHgRUZXh0BTRHcnVwbyBQYXJsYW1lbnRhcmlvIFBvcHVsYXIgZGUgbGEgQXNhbWJsZWEgZGUgTWFkcmlkZGQCAQ9kFgICAQ8PFgQfAgUeR3J1cG8gUGFybGFtZW50YXJpbyBTb2NpYWxpc3RhHwMFHkdydXBvIFBhcmxhbWVudGFyaW8gU29jaWFsaXN0YWRkAgIPZBYCAgEPDxYEHwIFL0dydXBvIFBhcmxhbWVudGFyaW8gUG9kZW1vcyBDb211bmlkYWQgZGUgTWFkcmlkHwMFL0dydXBvIFBhcmxhbWVudGFyaW8gUG9kZW1vcyBDb211bmlkYWQgZGUgTWFkcmlkZGQCAw9kFgICAQ8PFgQfAgUhR3J1cG8gUGFybGFtZW50YXJpbyBkZSBDaXVkYWRhbm9zHwMFIUdydXBvIFBhcmxhbWVudGFyaW8gZGUgQ2l1ZGFkYW5vc2RkBSZnX2MxNTFkMGIxXzY2YWZfNDhjY185MWM3X2JlOGUxMTZkN2Q1Mg9kFgRmDxYCHgdWaXNpYmxlaGQCAQ8WAh8EaGQFJmdfZTBmYWViMTVfOGI3Nl80MjgyX2ExYjFfNTI3ZDIwNjk1ODY2D2QWBGYPFgIfBGhkAgEPFgIfBGhkAhEPZBYCAgEPZBYEZg9kFgICAQ8WAh8EaBYCZg9kFgQCAg9kFgQCAQ8WAh8EaGQCAw8WCB4TQ2xpZW50T25DbGlja1NjcmlwdAW7AWphdmFTY3JpcHQ6Q29yZUludm9rZSgnVGFrZU9mZmxpbmVUb0NsaWVudFJlYWwnLDEsIDEsICdodHRwOlx1MDAyZlx1MDAyZnd3dy5hc2FtYmxlYW1hZHJpZC5lc1x1MDAyZkVTXHUwMDJmUXVlRXNMYUFzYW1ibGVhXHUwMDJmQ29tcG9zaWNpb25kZWxhQXNhbWJsZWFcdTAwMmZMb3NEaXB1dGFkb3MnLCAtMSwgLTEsICcnLCAnJykeGENsaWVudE9uQ2xpY2tOYXZpZ2F0ZVVybGQeKENsaWVudE9uQ2xpY2tTY3JpcHRDb250YWluaW5nUHJlZml4ZWRVcmxkHgxIaWRkZW5TY3JpcHQFIVRha2VPZmZsaW5lRGlzYWJsZWQoMSwgMSwgLTEsIC0xKWQCAw8PFgoeCUFjY2Vzc0tleQUBLx4PQXJyb3dJbWFnZVdpZHRoAgUeEEFycm93SW1hZ2VIZWlnaHQCAx4RQXJyb3dJbWFnZU9mZnNldFhmHhFBcnJvd0ltYWdlT2Zmc2V0WQLrA2RkAgEPZBYCAgUPZBYCAgEPEBYCHwRoZBQrAQBkAhcPZBYIZg8PFgQfAwUPRW5nbGlzaCBWZXJzaW9uHgtOYXZpZ2F0ZVVybAVfL0VOL1F1ZUVzTGFBc2FtYmxlYS9Db21wb3NpY2lvbmRlbGFBc2FtYmxlYS9Mb3NEaXB1dGFkb3MvUGFnZXMvUmVsYWNpb25BbGZhYmV0aWNhRGlwdXRhZG9zLmFzcHhkZAICDw8WBB8DBQZQcmVuc2EfDgUyL0VTL0JpZW52ZW5pZGFQcmVuc2EvUGFnaW5hcy9CaWVudmVuaWRhUHJlbnNhLmFzcHhkZAIEDw8WBB8DBRpJZGVudGlmaWNhY2nDs24gZGUgVXN1YXJpbx8OBTQvRVMvQXJlYVVzdWFyaW9zL1BhZ2luYXMvSWRlbnRpZmljYWNpb25Vc3Vhcmlvcy5hc3B4ZGQCBg8PFgQfAwUGQ29ycmVvHw4FKGh0dHA6Ly9vdXRsb29rLmNvbS9vd2EvYXNhbWJsZWFtYWRyaWQuZXNkZAIlD2QWAgIDD2QWAgIBDxYCHwALKwQBZAI1D2QWAgIHD2QWAgIBDw8WAh8EaGQWAgIDD2QWAmYPZBYCAgMPZBYCAgUPDxYEHgZIZWlnaHQbAAAAAAAAeUABAAAAHgRfIVNCAoABZBYCAgEPPCsACQEADxYEHg1QYXRoU2VwYXJhdG9yBAgeDU5ldmVyRXhwYW5kZWRnZGQCSQ9kFgICAg9kFgICAQ9kFgICAw8WAh8ACysEAWQYAgVBY3RsMDAkUGxhY2VIb2xkZXJMZWZ0TmF2QmFyJFVJVmVyc2lvbmVkQ29udGVudDMkVjRRdWlja0xhdW5jaE1lbnUPD2QFKUNvbXBvc2ljacOzbiBkZSBsYSBBc2FtYmxlYVxMb3MgRGlwdXRhZG9zZAVHY3RsMDAkUGxhY2VIb2xkZXJUb3BOYXZCYXIkUGxhY2VIb2xkZXJIb3Jpem9udGFsTmF2JFRvcE5hdmlnYXRpb25NZW51VjQPD2QFGkluaWNpb1xRdcOpIGVzIGxhIEFzYW1ibGVhZJ',\n                     '__EVENTVALIDATION': '/wEWCALIhqvYAwKh2YVvAuDF1KUDAqCK1bUOAqCKybkPAqCKnbQCAqCKsZEJAvejv84Dtkx5dCFr3QGqQD2wsFQh8nP3iq8',\n                     '__VIEWSTATEGENERATOR': 'BAB98CB3',\n                     '__REQUESTDIGEST': '0x476239970DCFDABDBBDF638A1F9B026BD43022A10D1D757B05F1071FF3104459B4666F96A47B4845D625BCB2BE0D88C6E150945E8F5D82C189B56A0DA4BC859D'}\n\n        yield scrapy.FormRequest(url=url, formdata= formdata, callback=self.takeEachParty)\n\n\ndef takeEachParty(self, response):\n\n     print response.css('ul.listadoVert02 ul li::text').extract()\n</code></pre>\n\n<p>Going into the source code of the website, I can see how links look like, and how they send the JavaScript query. This is one of the links I need to access:</p>\n\n<pre><code>&lt;a id=\"ctl00_m_g_36ea0310_893d_4a19_9ed1_88a133d06423_ctl00_Repeater1_ctl00_lnk_Grupo\" href=\"javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&amp;quot;ctl00$m$g_36ea0310_893d_4a19_9ed1_88a133d06423$ctl00$Repeater1$ctl00$lnk_Grupo&amp;quot;, &amp;quot;&amp;quot;, true, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, false, true))\"&gt;Grupo Parlamentario Popular de la Asamblea de Madrid&lt;/a&gt;\n</code></pre>\n\n<p>I have been reading so many articles about, but probably the problem is my ignorance in respect. </p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>EDITED:</strong></p>\n\n<p><strong>SOLUTION:</strong> I finally did it! Translating the very helpul code from Padraic Cunningham into Scrapy way. As I specified the issue for Scrapy, I want to post the result just in case someone has the same problem as I had.</p>\n\n<p>So here it goes:</p>\n\n<pre><code>import scrapy\nimport js2xml\n\nclass AsambleaMadrid(scrapy.Spider):\n\n     name        =   \"AsambleaMadrid\"\n     start_urls  =   ['http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx']\n\n    def parse(self, response):\n\n         source  =   response\n         hrefs   =   response.xpath(\"//*[@id='moduloBusqueda']//div[@class='sangria']/ul/li/a/@href\").extract()\n         form_data = self.validate(source)\n         for ref in hrefs:\n             # js2xml allows us to parse the JS function and params, and so to grab the __EVENTTARGET\n             js_xml            = js2xml.parse(ref)\n             _id               = js_xml.xpath(\n                            \"//identifier[@name='WebForm_PostBackOptions']/following-sibling::arguments/string[starts-with(.,'ctl')]\")[0]\n             form_data[\"__EVENTTARGET\"] = _id.text\n\n             url_diputado    =   'http://www.asambleamadrid.es/ES/QueEsLaAsamblea/ComposiciondelaAsamblea/LosDiputados/Paginas/RelacionAlfabeticaDiputados.aspx'\n             # The proper way to send a POST in scrapy is by using the FormRequest\n             yield scrapy.FormRequest(url=url_diputado, formdata=form_data, callback=self.extract_parties, method='POST')\n\n     def validate(self, source):\n         # these fields are the minimum required as cannot be hardcoded\n         data = {\"__VIEWSTATEGENERATOR\": source.xpath(\"//*[@id='__VIEWSTATEGENERATOR']/@value\")[0].extract(),\n             \"__EVENTVALIDATION\": source.xpath(\"//*[@id='__EVENTVALIDATION']/@value\")[0].extract(),\n             \"__VIEWSTATE\": source.xpath(\"//*[@id='__VIEWSTATE']/@value\")[0].extract(),\n             \" __REQUESTDIGEST\": source.xpath(\"//*[@id='__REQUESTDIGEST']/@value\")[0].extract()}\n         return data\n\n     def extract_parties(self, response):\n         source      =   response\n         name        =   source.xpath(\"//ul[@class='listadoVert02']/ul/li/a/text()\").extract()\n         print name\n</code></pre>\n\n<p>I hope is clear. Thanks everybody, again!</p>\n"}, {"tags": ["python", "multithreading"], "answers": [{"tags": [], "owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "is_accepted": false, "score": 1, "last_activity_date": 1464811200, "last_edit_date": 1464811200, "creation_date": 1464810670, "answer_id": 37577596, "question_id": 37577372, "link": "https://stackoverflow.com/questions/37577372/ways-to-end-a-worker-process-in-a-thread-in-python-3/37577596#37577596", "title": "Ways to end a worker process in a thread in Python 3", "body": "<blockquote>\n  <p>What options exist to end the workers infinite loop?</p>\n</blockquote>\n\n<p>Run with the while loop polling a <code>threading.semaphore</code> object instance, rather than a constant <code>True</code> boolean. Signal the semaphore from the killing thread when you want to kill the worker, and it will drop out of the loop.</p>\n\n<p>If you want the main thread to wait for the worker to finish, then signal the semaphore, and then do a <code>thread.join()</code> to block the main thread until the worker has finished doing whatever it needs to do. Just remember to signal the semaphore first, or it will hang ;)</p>\n\n<p>That said, you've daemonized the thread, so you don't need to kill it. The process will die when there are no non-daemon threads left alive. <em>UPDATE</em> To remove the daemon effect as you want the thread to exit cleanly, just remove this line:</p>\n\n<pre><code>t.daemon = True  # thread dies when main thread (only non-daemon thread) exits.\n</code></pre>\n"}], "owner": {"reputation": 10194, "user_id": 3291506, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/fr49T.png?s=128&g=1", "display_name": "Startec", "link": "https://stackoverflow.com/users/3291506/startec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464823459, "creation_date": 1464809775, "last_edit_date": 1495540366, "question_id": 37577372, "link": "https://stackoverflow.com/questions/37577372/ways-to-end-a-worker-process-in-a-thread-in-python-3", "title": "Ways to end a worker process in a thread in Python 3", "body": "<p>I am wondering the ways to end a worker thread in Python 3.</p>\n\n<p>If you look at this code sample from <a href=\"https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python\">this question</a> the <code>worker</code> has a <code>while True</code> loop in it and all I see is that <code>q.task_done()</code> is called.  </p>\n\n<p>Why is this worker automatically ended?  </p>\n\n<p>Specifically I am interested in: </p>\n\n<p><strong>What options exist to end the workers infinite loop?</strong> </p>\n\n<p>It seems like the only options would be to call <code>break</code> or <code>return</code> but I am not sure if those even kill the thread.</p>\n\n<p>To be clear I actually want this thread to die when its task has completed and I do not see the ways to kill the thread documented anywhere.</p>\n\n<pre><code>#!python3\nimport threading\nfrom queue import Queue\nimport time\n\n# lock to serialize console output\nlock = threading.Lock()\n\ndef do_work(item):\n    time.sleep(.1) # pretend to do some lengthy work.\n    # Make sure the whole print completes or threads can mix up output in one line.\n    with lock:\n        print(threading.current_thread().name,item)\n\n# The worker thread pulls an item from the queue and processes it\ndef worker():\n    while True:\n        item = q.get()\n        do_work(item)\n        q.task_done()\n\n# Create the queue and thread pool.\nq = Queue()\nfor i in range(4):\n     t = threading.Thread(target=worker)\n     t.daemon = True  # thread dies when main thread (only non-daemon thread) exits.\n     t.start()\n\n# stuff work items on the queue (in this case, just a number).\nstart = time.perf_counter()\nfor item in range(20):\n    q.put(item)\n\nq.join()       # block until all tasks are done\n\n# \"Work\" took .1 seconds per task.\n# 20 tasks serially would be 2 seconds.\n# With 4 threads should be about .5 seconds (contrived because non-CPU intensive \"work\")\n\nprint('time:',time.perf_counter() - start)\n</code></pre>\n"}, {"tags": ["python", "date", "datetime"], "comments": [{"owner": {"reputation": 7159, "user_id": 877279, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5fa0544f9a87c652a5b5c1d4b401fcae?s=128&d=identicon&r=PG", "display_name": "Tyler Sebastian", "link": "https://stackoverflow.com/users/877279/tyler-sebastian"}, "edited": false, "score": 2, "creation_date": 1464809787, "post_id": 37577326, "comment_id": 62641572, "body": "I don&#39;t know if I totally understand what you are trying to accomplish, but why not just grab the last day of the month and see if it&#39;s less than 6 days away? see: <a href=\"http://stackoverflow.com/questions/42950/get-last-day-of-the-month-in-python\" title=\"get last day of the month in python\">stackoverflow.com/questions/42950/&hellip;</a>"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1464809907, "post_id": 37577326, "comment_id": 62641638, "body": "<code>1 &lt;= weekFromToday.day</code> this will only be True if &quot;week from today&quot; lies on the first day of the month."}, {"owner": {"reputation": 2226, "user_id": 1762447, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ze95O.jpg?s=128&g=1", "display_name": "tkyass", "link": "https://stackoverflow.com/users/1762447/tkyass"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1464810806, "post_id": 37577326, "comment_id": 62642112, "body": "@TadhgMcDonald-Jensen you&#39;re right! I need to change that. Should I create a range then and check if day=1 lies in them? if so print it."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1464811086, "post_id": 37577326, "comment_id": 62642259, "body": "I still don&#39;t understand what you are trying to do, are you trying to see if the week does not extend into the next month? Or are you trying to, given another date, see if it is within a week from the current date?  If it is the second case use <code>today &lt;= OTHER_DATE &lt;= weekFromToday</code> and if the first case Tyler&#39;s suggestion would be the solution."}, {"owner": {"reputation": 2226, "user_id": 1762447, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ze95O.jpg?s=128&g=1", "display_name": "tkyass", "link": "https://stackoverflow.com/users/1762447/tkyass"}, "edited": false, "score": 0, "creation_date": 1464813418, "post_id": 37577326, "comment_id": 62643473, "body": "I edited my question, I hope its clearer now!"}], "answers": [{"comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1464812735, "post_id": 37578059, "comment_id": 62643121, "body": "you realize you can make a specific date with <code>datetime.date(year, month, day)</code> right?  That would be a significantly easier way to test..."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1464813895, "post_id": 37578059, "comment_id": 62643748, "body": "also I don&#39;t think the iteration would be necessary for this, if the months are different then the wanted day would be <code>datetime.date(weekFromToday.year, weekFromToday.month, 1)</code>"}, {"owner": {"reputation": 2226, "user_id": 1762447, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ze95O.jpg?s=128&g=1", "display_name": "tkyass", "link": "https://stackoverflow.com/users/1762447/tkyass"}, "edited": false, "score": 0, "creation_date": 1464880958, "post_id": 37578059, "comment_id": 62676923, "body": "@Do0msDay Thanks a lot!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6410654"}, "is_accepted": true, "score": 4, "last_activity_date": 1464822035, "last_edit_date": 1464822035, "creation_date": 1464812399, "answer_id": 37578059, "question_id": 37577326, "link": "https://stackoverflow.com/questions/37577326/python-get-day-if-its-in-a-dates-range/37578059#37578059", "title": "python get day if its in a dates range", "body": "<p>The only thing I can come up with, without having to make use of iteration is:</p>\n\n<pre><code>import datetime, calendar\n\ntoday = datetime.date.today()\nweek_from_today = today + datetime.timedelta(days=6)\nlast_day_of_month = today.replace(day=calendar.monthrange(today.year,today.month)[-1])\n\nif today.month != week_from_today.month:\n    print datetime.date(week_from_today.year, week_from_today.month, 1)\nelif today &lt;= last_day_of_month &lt;= week_from_today:\n    print last_day_of_month \n</code></pre>\n\n<p>since today it's <code>2016-06-02</code> it's hard to test the code.<br>\nTry changing the variable <code>today</code> to another day. I used the dates <code>2016-05-25</code> and <code>2016-05-26</code> to test the code.</p>\n\n<p>to set a custom date: <code>today = datetime.date(yyyy, m, d)</code></p>\n"}], "owner": {"reputation": 2226, "user_id": 1762447, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ze95O.jpg?s=128&g=1", "display_name": "tkyass", "link": "https://stackoverflow.com/users/1762447/tkyass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 37578059, "answer_count": 1, "score": 1, "last_activity_date": 1464822035, "creation_date": 1464809599, "last_edit_date": 1464813107, "question_id": 37577326, "link": "https://stackoverflow.com/questions/37577326/python-get-day-if-its-in-a-dates-range", "title": "python get day if its in a dates range", "body": "<p>I'm trying to check if first date of the month and the last date of the month lies in a range of dates (the range is 7 days window starting from current date) . below is an example for what I'm trying to achieve:</p>\n\n<pre><code>import datetime, calendar\n\ntoday = datetime.date.today()\ndate_list = [today + datetime.timedelta(days=x) for x in range(0, 7)]\nlastDayOfMonth = today.replace(day=calendar.monthrange(today.year,today.month)[-1])\nif 1 in [ date_list[i].day for i in range(0, len(date_list))]:\n    print \"we have first day of month in range\"\n\nelif lastDayOfMonth  in  [ date_list[i].day for i in range(0, len(date_list))]:\n    print \" we have last date of month in the range\"\n</code></pre>\n\n<p>I'm wondering if there is a cleaner way for doing that? I also want to print the exact date if I find it in the list but I don't know how without expanding the for loop in the if statement and save print <code>date_list[i]</code> if it matches my condition. so instead of printing the message when I find the first day in the range I should print the actual date. same for last date. </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "scikit-learn", "cythonize"], "comments": [{"owner": {"reputation": 16864, "user_id": 288875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/516193e369370693f2991ccec37b4dfc?s=128&d=identicon&r=PG", "display_name": "Andre Holzner", "link": "https://stackoverflow.com/users/288875/andre-holzner"}, "edited": false, "score": 0, "creation_date": 1464809402, "post_id": 37577210, "comment_id": 62641368, "body": "what happens when you do start python and do:  <code>import cython; print cython.__version__</code>  ?"}, {"owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "reply_to_user": {"reputation": 16864, "user_id": 288875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/516193e369370693f2991ccec37b4dfc?s=128&d=identicon&r=PG", "display_name": "Andre Holzner", "link": "https://stackoverflow.com/users/288875/andre-holzner"}, "edited": false, "score": 0, "creation_date": 1464809588, "post_id": 37577210, "comment_id": 62641468, "body": "This happens: &quot;0.20.1post0&quot;. So the version is not 0.24?"}, {"owner": {"reputation": 16864, "user_id": 288875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/516193e369370693f2991ccec37b4dfc?s=128&d=identicon&r=PG", "display_name": "Andre Holzner", "link": "https://stackoverflow.com/users/288875/andre-holzner"}, "edited": false, "score": 1, "creation_date": 1464810284, "post_id": 37577210, "comment_id": 62641838, "body": "you probably have two versions of cython installed (e.g. in different directories -- could it be that one is system wide and the more recent version in your personal directory ?) and your python interpreter picks up the wrong one. You can check where your imported cython comes from by doing: <code>import cython; print cython.__file__</code>"}, {"owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "reply_to_user": {"reputation": 16864, "user_id": 288875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/516193e369370693f2991ccec37b4dfc?s=128&d=identicon&r=PG", "display_name": "Andre Holzner", "link": "https://stackoverflow.com/users/288875/andre-holzner"}, "edited": false, "score": 1, "creation_date": 1464811147, "post_id": 37577210, "comment_id": 62642301, "body": "yep, removed the older version and now I do not receive that error anymore. Thanks"}], "owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1211, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468961180, "creation_date": 1464809184, "last_edit_date": 1468961180, "question_id": 37577210, "link": "https://stackoverflow.com/questions/37577210/build-sklearn-error-cythonize-failed", "title": "build sklearn error cythonize failed", "body": "<pre><code> $ sudo python setup.py build\n</code></pre>\n\n<p>Gives me the following:</p>\n\n<pre><code>Partial import of sklearn during the build process.\nGenerating cython files\nCythonizing sources\nsklearn\nProcessing sklearn/_isotonic.pyx\nTraceback (most recent call last):\n  File \"/home/scikit-learn/build_tools/cythonize.py\", line 198, in &lt;module&gt;\n    main(root_dir_arg)\n  File \"/home/ascikit-learn/build_tools/cythonize.py\", line 190, in main\n    check_and_cythonize(root_dir)\n  File \"/home/scikit-learn/build_tools/cythonize.py\", line 182, in check_and_cythonize\n    cythonize_if_unchanged(cur_dir, cython_file, gen_file, hashes)\n  File \"/home/scikit-learn/build_tools/cythonize.py\", line 156, in cythonize_if_unchanged\n    cythonize(full_cython_path, full_gen_file_path)\n  File \"/home/scikit-learn/build_tools/cythonize.py\", line 61, in cythonize\n    raise Exception('Building scikit-learn requires Cython &gt;= 0.21')\nException: Building scikit-learn requires Cython &gt;= 0.21\nTraceback (most recent call last):\n  File \"setup.py\", line 297, in &lt;module&gt;\n    setup_package()\n  File \"setup.py\", line 280, in setup_package\n    generate_cython()\n  File \"setup.py\", line 185, in generate_cython\n    raise RuntimeError(\"Running cythonize failed!\")\nRuntimeError: Running cythonize failed!\n</code></pre>\n\n<p>While cython is installed:</p>\n\n<pre><code>Processing ./Cython-0.24-cp27-cp27mu-manylinux1_x86_64.whl\nInstalling collected packages: Cython\n  Found existing installation: Cython 0.24\n    Uninstalling Cython-0.24:\n      Successfully uninstalled Cython-0.24\nSuccessfully installed Cython-0.24\n</code></pre>\n"}, {"tags": ["python", "function", "parameters", "call", "local"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 3, "creation_date": 1464809222, "post_id": 37577186, "comment_id": 62641286, "body": "The function that you are trying to call is not in the scope of the other function. See <a href=\"http://stackoverflow.com/q/7969949\">What&#39;s the difference between globals(), locals(), and vars()?</a>"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 4, "creation_date": 1464810589, "post_id": 37577186, "comment_id": 62641995, "body": "Why are you using a list of function names when you can just use a list of functions?"}, {"owner": {"reputation": 1335, "user_id": 1261764, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a223548a288659768f2592a494196d?s=128&d=identicon&r=PG", "display_name": "abidinberkay", "link": "https://stackoverflow.com/users/1261764/abidinberkay"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1464815036, "post_id": 37577186, "comment_id": 62644370, "body": "@TadhgMcDonald-Jensen wow i did not know that. I am total beginner to python. thanks man."}], "owner": {"reputation": 1335, "user_id": 1261764, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a223548a288659768f2592a494196d?s=128&d=identicon&r=PG", "display_name": "abidinberkay", "link": "https://stackoverflow.com/users/1261764/abidinberkay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464809087, "creation_date": 1464809087, "question_id": 37577186, "link": "https://stackoverflow.com/questions/37577186/python3-taking-function-name-as-parameter-and-call-it-with-parameter", "title": "Python3 taking function name as parameter and call it with parameter", "body": "<p>I need to take name of function that I want to call as parameter from a list. I achieved this with the code (the result is b. if I say liste[0] result is a, so it works.):</p>\n\n<pre><code>def a():\n    print(\"aaaa\")\n    return None\ndef b():\n    print(\"bbbb\")\n    return None\nliste = ['a','b']\ninputMethodName =  liste[1]\nlocals()[inputMethodName]()\n</code></pre>\n\n<p>But in this example I do same thing(at least I see in that way thats why I ask this question), it is giving an error. Code is:</p>\n\n<pre><code>filterPassFlag = 1\ncontrolListForFilter = ['firstCharController']\n\ndef firstCharController(singleLine):\n    if singleLine[0] == \"1\":\n        filterPassFlag = 0\n    return None\n\ndef startControl(singleLine):\n    controlListForFilterIterator  = 0\n    while (controlListForFilterIterator &lt; len(controlListForFilter)) &amp; (filterPassFlag == 1):\n        inputMethodName = controlListForFilter[controlListForFilterIterator]\n        locals()[inputMethodName](singleLine) #******ERROR IN THAT LINE.\n        controlListForFilterIterator = controlListForFilterIterator + 1\n    return None\n\nsingleLine = \"bla bla bla bla\"\nstartControl(singleLine)\n</code></pre>\n\n<p>output is:</p>\n\n<pre><code>&gt; Traceback (most recent call last):   File\n&gt; \"C:/Users/BerkayS/Desktop/phyondeneme/phytonTest.py\", line 37, in\n&gt; &lt;module&gt;\n&gt;     startControl(singleLine)   File \"C:/Users/BerkayS/Desktop/phyondeneme/phytonTest.py\", line 24, in\n&gt; startControl\n&gt;     locals()[inputMethodName](singleLine) KeyError: 'firstCharController' Process finished with exit code 1\n</code></pre>\n\n<p>When I delete the line contains the error (local() line) program is working. But what is the difference between two example?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 0, "creation_date": 1464809106, "post_id": 37577178, "comment_id": 62641226, "body": "Can you add image as text to answer?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6411368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d35ea4ad67f1bbef971287b76deeff?s=128&d=identicon&r=PG&f=1", "display_name": "EricJames", "link": "https://stackoverflow.com/users/6411368/ericjames"}, "edited": false, "score": 0, "creation_date": 1464901186, "post_id": 37577281, "comment_id": 62688809, "body": "Thank you @jezrael for your help yesterday, you response was very helpful. However, I came across another problem and would really appreciate your help. The above csv file - I want to create a function - when we run the script it asks us to enter module code. If module code equal to our module in the list than sum length of 4 and 5 and divide by total*100. When a user enters a module code the script should return percentage value. Can you please help me, how can i do that? I really appreciate your help."}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 2, "last_activity_date": 1464809783, "last_edit_date": 1464809783, "creation_date": 1464809482, "answer_id": 37577281, "question_id": 37577178, "link": "https://stackoverflow.com/questions/37577178/count-frequency-of-a-number-in-a-column-while-equals-to-text-in-another-column/37577281#37577281", "title": "Count frequency of a number in a column while equals to text in another column", "body": "<p>I think you need <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing\" rel=\"nofollow\"><code>boolean indexing</code></a>:</p>\n\n<pre><code>print (df[(df.module == 'CS1203') &amp; (df.q1 == 4)])\n   year   course  module  q1  q2\n0  2015  Physics  CS1203   4   2\n1  2015  Physics  CS1203   4   3\n3  2015  Physics  CS1203   4   4\n\nprint (len(df[(df.module == 'CS1203') &amp; (df.q1 == 4)]))\n3\n</code></pre>\n\n<p>If need count in all <code>q</code> columns first use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.melt.html\" rel=\"nofollow\"><code>melt</code></a>:</p>\n\n<pre><code>df = pd.melt(df, id_vars=['year','course','module'], value_name='q')\n   year   course  module  q1  q2\n0  2015  Physics  CS1203   4   2\n1  2015  Physics  CS1203   4   3\n2  2015  Physics  CS1203   3   1\n3  2015  Physics  CS1203   4   4\n4  2015  English  IR0001   2   5\n5  2015  English  IR0001   1   2\n6  2015  English  IR0001   3   1\n7  2015  English  IR0001   5   3\n8  2015  English  IR0001   4   3\n\nprint (df[(df.module == 'CS1203') &amp; (df.q == 4)])\n    year   course  module variable  q\n0   2015  Physics  CS1203       q1  4\n1   2015  Physics  CS1203       q1  4\n3   2015  Physics  CS1203       q1  4\n12  2015  Physics  CS1203       q2  4\n\nprint (len(df[(df.module == 'CS1203') &amp; (df.q == 4)]))\n4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1464809919, "last_edit_date": 1464809919, "creation_date": 1464809488, "answer_id": 37577285, "question_id": 37577178, "link": "https://stackoverflow.com/questions/37577178/count-frequency-of-a-number-in-a-column-while-equals-to-text-in-another-column/37577285#37577285", "title": "Count frequency of a number in a column while equals to text in another column", "body": "<p>you can first filter your DF by module (<code>df.module == 'CS1203'</code>), then filter columns selecting only those matching <code>q\\d+</code> RegEx, select only <code>4</code>s and finally calculate the sum:</p>\n\n<pre><code>In [74]: (df[df.module == 'CS1203'].filter(regex=r'q\\d+') == 4).sum()\nOut[74]:\nq1    3\nq2    1\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1540, "user_id": 6297504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FUlnHAlBzYU/AAAAAAAAAAI/AAAAAAAABu0/feK9LrMcSKU/photo.jpg?sz=128", "display_name": "Andreas Hsieh", "link": "https://stackoverflow.com/users/6297504/andreas-hsieh"}, "is_accepted": false, "score": 1, "last_activity_date": 1464809945, "last_edit_date": 1495535638, "creation_date": 1464809945, "answer_id": 37577410, "question_id": 37577178, "link": "https://stackoverflow.com/questions/37577178/count-frequency-of-a-number-in-a-column-while-equals-to-text-in-another-column/37577410#37577410", "title": "Count frequency of a number in a column while equals to text in another column", "body": "<p>Maybe you can try something like this:</p>\n\n<pre><code>df.groupby(['module','q1'])['module'].agg({'Frequency':'count'})\n</code></pre>\n\n<p>Please refer to this <a href=\"https://stackoverflow.com/questions/23402150/grouping-and-computing-frequency-pandas\">post</a>.</p>\n"}], "owner": {"reputation": 33, "user_id": 6411368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d35ea4ad67f1bbef971287b76deeff?s=128&d=identicon&r=PG&f=1", "display_name": "EricJames", "link": "https://stackoverflow.com/users/6411368/ericjames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 37577281, "answer_count": 3, "score": 3, "last_activity_date": 1464812622, "creation_date": 1464809066, "last_edit_date": 1464812622, "question_id": 37577178, "link": "https://stackoverflow.com/questions/37577178/count-frequency-of-a-number-in-a-column-while-equals-to-text-in-another-column", "title": "Count frequency of a number in a column while equals to text in another column", "body": "<p>This is from sample csv</p>\n\n<p>Roughly it looks like this 5 columns </p>\n\n<p>Clipboard:</p>\n\n<pre><code>Year  Course  Modul Q1 Q2\n2015 Physics CS1203  4  2 \n2015 Physics CS1203  4  3 \n2015 Physics CS1203  3  1 \n2015 Physics CS1203  4  4 \n2015 English IR0001  2  5 \n2015 English IR0001  1  2 \n2015 English IR0001  3  1 \n2015 English IR0001  5  3 \n2015 English IR0001  4  3\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>df = pd.read_clipboard()\n</code></pre>\n\n<p>I grouped by modules, now i want to count number of 4s in module CS1203. I am new at this, so sorry in advance if this is stupid question. I really appreciate your help.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "windows", "deployment"], "answers": [{"tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": true, "score": 1, "last_activity_date": 1464811757, "creation_date": 1464811757, "answer_id": 37577880, "question_id": 37577162, "link": "https://stackoverflow.com/questions/37577162/deploy-python-app-and-as-part-of-process-install-python-git-virtualenv-on-wind/37577880#37577880", "title": "Deploy python app and as part of process install python, git, virtualenv on windows", "body": "<p>We done something very similar to this. Here's what we did. Create an installer (we used NSIS <a href=\"http://nsis.sourceforge.net/Main_Page\" rel=\"nofollow\">http://nsis.sourceforge.net/Main_Page</a>) that installs python. After python is installed, we then run a python script that performs the rest of the steps.</p>\n\n<p>Once you have python on your target, the rest of the steps are a piece of cake.</p>\n"}], "owner": {"reputation": 4511, "user_id": 761029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61632f95eac41001d48905db6fc53ae1?s=128&d=identicon&r=PG", "display_name": "Ominus", "link": "https://stackoverflow.com/users/761029/ominus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 37577880, "answer_count": 1, "score": 0, "last_activity_date": 1464816122, "creation_date": 1464809002, "last_edit_date": 1464816122, "question_id": 37577162, "link": "https://stackoverflow.com/questions/37577162/deploy-python-app-and-as-part-of-process-install-python-git-virtualenv-on-wind", "title": "Deploy python app and as part of process install python, git, virtualenv on windows", "body": "<p>How would i have a self contained setup file that would do the following processes...</p>\n\n<ol>\n<li>Install python 2.7 (it just download/launch the python installer doesn't have to automate it just get and launch it)</li>\n<li>Install Git (same as above)</li>\n<li>Install PiP</li>\n<li>Install Python Virtualenv</li>\n<li>Clone a repo</li>\n<li>create virtualenv</li>\n<li>Activate the virtualenv</li>\n<li>pip install the requirements folder</li>\n<li>create a desktop shortcut</li>\n</ol>\n\n<p>I am not looking for a how to i am just trying to save myself 100 steps when i deploy the app i have just finished. Before i write any custom scripts i wanted to make sure there wasn't already a good tool or best practice to handle this kind of setup process. </p>\n\n<p>In the past i have just frozen my apps and deployed them as an exe using a setup wizard like INNO but i really like the idea of just dropping the repo on the users machine and then letting the app pull from master when a new release comes out without having to repackage and distribute an exe each time.</p>\n\n<p>My other thought was maybe just turn the entire thing into an egg and just deploy it as a python package that is installed from pip using a git repo. This seems like the best bet but still leaves me installing all the requirements. The other downside is i lose the virtualenv so updating the app as an egg would also update requirements in the users main python lib and that just doesn't sit well with me.</p>\n\n<p>The app actually updates itself based by comparing the local version number and the corresponding database version number. If they don't match it git pulls the changes and then runs pip install -r requirements.txt to catch any new packages that may be needed. </p>\n"}, {"tags": ["python", "python-3.x", "zip", "zipfile"], "comments": [{"owner": {"reputation": 512, "user_id": 1450698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a4de8e1142226ebcb098e6de3cae97f?s=128&d=identicon&r=PG", "display_name": "Squall", "link": "https://stackoverflow.com/users/1450698/squall"}, "edited": false, "score": 0, "creation_date": 1464809238, "post_id": 37577153, "comment_id": 62641293, "body": "You could use <code>StringIO</code> and <code>BytesIO</code> from the <code>io</code> module."}, {"owner": {"reputation": 1594, "user_id": 2512078, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NDKib.png?s=128&g=1", "display_name": "spikespaz", "link": "https://stackoverflow.com/users/2512078/spikespaz"}, "reply_to_user": {"reputation": 512, "user_id": 1450698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a4de8e1142226ebcb098e6de3cae97f?s=128&d=identicon&r=PG", "display_name": "Squall", "link": "https://stackoverflow.com/users/1450698/squall"}, "edited": false, "score": 0, "creation_date": 1464809286, "post_id": 37577153, "comment_id": 62641314, "body": "@Squall Could I please have that in answer format with an example to get me started? I have never done anything like that before."}], "answers": [{"tags": [], "owner": {"reputation": 512, "user_id": 1450698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a4de8e1142226ebcb098e6de3cae97f?s=128&d=identicon&r=PG", "display_name": "Squall", "link": "https://stackoverflow.com/users/1450698/squall"}, "is_accepted": true, "score": 1, "last_activity_date": 1464809982, "creation_date": 1464809982, "answer_id": 37577417, "question_id": 37577153, "link": "https://stackoverflow.com/questions/37577153/write-text-file-into-a-zip-without-temp-files/37577417#37577417", "title": "Write text file into a zip without temp files", "body": "<p>Use <code>io.StringIO</code> to create a file-like object in memory:</p>\n\n<pre><code>import io\nimport os\nimport zipfile\n\nprint(\"Note: All theme files need to be inside of the 'theme_files' folder.\")\nthemeName = input(\"\\nTheme name: \")\nthemeAuthor = input(\"\\nTheme author: \")\nthemeDescription = input(\"\\nTheme description: \")\nthemeContact = input(\"\\nAuthor contact: \")\notherInfo = input(\"\\nAdd custom information? y/n: \")\nif otherInfo == \"y\":\n    os.system(\"cls\" if os.name == \"nt\" else \"clear\")\n    print(\"\\nEnter extra theme package information below.\\n--------------------\\n\")\n    themeInfo = input()\n\npakName = themeName.replace(\" \", \"_\").lower()\n\npakInf = io.StringIO()\npakInf.write(\"Theme name: \"+ themeName +\"\\n\"+\"Theme author: \"+ themeAuthor +\"\\n\"+\"Theme description: \"+ themeDescription +\"\\n\"+\"Author contact: \"+ themeContact)\nif otherInfo == \"y\":\n    pakInf.write(\"\\n\"+ themeInfo)\n\nthemePak = zipfile.ZipFile(pakName +\".tpk\", \"w\")\nthemePak.writestr(\"package.inf\", pakInf.getvalue())\nfor dirname, subdirs, files in os.walk(\"theme_files\"):\n    themePak.write(dirname)\n    for filename in files:\n        themePak.write(os.path.join(dirname, filename))\n\nthemePak.close()\n</code></pre>\n"}], "owner": {"reputation": 1594, "user_id": 2512078, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NDKib.png?s=128&g=1", "display_name": "spikespaz", "link": "https://stackoverflow.com/users/2512078/spikespaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 37577417, "answer_count": 1, "score": 0, "last_activity_date": 1464809982, "creation_date": 1464808980, "question_id": 37577153, "link": "https://stackoverflow.com/questions/37577153/write-text-file-into-a-zip-without-temp-files", "title": "Write text file into a zip without temp files", "body": "<p>In the code below, I need to wright <code>package.inf</code> directly into the zip file created at the bottom of the script.</p>\n\n<pre><code>import os\nimport zipfile\n\nprint(\"Note: All theme files need to be inside of the 'theme_files' folder.\")\nthemeName = input(\"\\nTheme name: \")\nthemeAuthor = input(\"\\nTheme author: \")\nthemeDescription = input(\"\\nTheme description: \")\nthemeContact = input(\"\\nAuthor contact: \")\notherInfo = input(\"\\nAdd custom information? y/n: \")\nif otherInfo == \"y\":\n    os.system(\"cls\" if os.name == \"nt\" else \"clear\")\n    print(\"\\nEnter extra theme package information below.\\n--------------------\\n\")\n    themeInfo = input()\n\npakName = themeName.replace(\" \", \"_\").lower()\n\npakInf = open(\"package.inf\", \"w\")\npakInf.write(\"Theme name: \"+ themeName +\"\\n\"+\"Theme author: \"+ themeAuthor +\"\\n\"+\"Theme description: \"+ themeDescription +\"\\n\"+\"Author contact: \"+ themeContact)\nif otherInfo == \"y\":\n    pakInf.write(\"\\n\"+ themeInfo)\n\npakInf.close()\n\nthemePak = zipfile.ZipFile(pakName +\".tpk\", \"w\")\nfor dirname, subdirs, files in os.walk(\"theme_files\"):\n    themePak.write(dirname)\n    for filename in files:\n        themePak.write(os.path.join(dirname, filename))\n\nthemePak.close()\n</code></pre>\n\n<p>Write <code>pakInf</code> into <code>themePak</code> without creating any temporary files.</p>\n"}, {"tags": ["python", "jupyter"], "comments": [{"owner": {"reputation": 2922, "user_id": 378826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eed752c6937edcf8597e360c627582?s=128&d=identicon&r=PG", "display_name": "Dilettant", "link": "https://stackoverflow.com/users/378826/dilettant"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 1, "creation_date": 1464809212, "post_id": 37577127, "comment_id": 62641280, "body": "The idea was already in your question. You wrote &quot;and was trying to print the remaining entries&quot; so that is where print is for. other ways would be to write (to a file object you opened before, or to place it in a variable. len(a) is as @self rightfully notes a statement that returns a value but not necessarily to some output. Some times the magic that helps often, irritates. One reason why in pytho we adhere to being explicit (most time). Keep up learning python and ask to be helped."}], "answers": [{"comments": [{"owner": {"reputation": 270, "user_id": 1161800, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8933900727c9057b6d7d30f08c220be9?s=128&d=identicon&r=PG", "display_name": "AdamSC", "link": "https://stackoverflow.com/users/1161800/adamsc"}, "edited": false, "score": 0, "creation_date": 1464809863, "post_id": 37577214, "comment_id": 62641616, "body": "Ok so there is a difference between &#39;returning&#39; and &#39;printing&#39; and because lens is only returning what ever it evaluates it needs to kind of dump that in order to move on to the next evaluation.  If I want it more permanent I need to print which is kind of like letting the system write it down so it can move onto the next thing?"}, {"owner": {"reputation": 310, "user_id": 4064616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-H0d6ywsTqA4/AAAAAAAAAAI/AAAAAAAAABE/fojG8gjbAMM/photo.jpg?sz=128", "display_name": "John Kahn", "link": "https://stackoverflow.com/users/4064616/john-kahn"}, "reply_to_user": {"reputation": 270, "user_id": 1161800, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8933900727c9057b6d7d30f08c220be9?s=128&d=identicon&r=PG", "display_name": "AdamSC", "link": "https://stackoverflow.com/users/1161800/adamsc"}, "edited": false, "score": 1, "creation_date": 1464810074, "post_id": 37577214, "comment_id": 62641724, "body": "@AdamS.Cochran I believe it actually just keeps track of the last thing returned and will print that."}], "tags": [], "owner": {"reputation": 310, "user_id": 4064616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-H0d6ywsTqA4/AAAAAAAAAAI/AAAAAAAAABE/fojG8gjbAMM/photo.jpg?sz=128", "display_name": "John Kahn", "link": "https://stackoverflow.com/users/4064616/john-kahn"}, "is_accepted": true, "score": 4, "last_activity_date": 1464809210, "creation_date": 1464809210, "answer_id": 37577214, "question_id": 37577127, "link": "https://stackoverflow.com/questions/37577127/difference-between-len-and-print-len/37577214#37577214", "title": "Difference between Len and Print Len()", "body": "<p>len(list) does not print anything, it only returns. If you are using REPL (read - evaluate - print - loop) then it will print the returned value and loop. Therefore to print more than one you must call print.</p>\n\n<p><a href=\"http://www.tutorialspoint.com/python/list_len.htm\" rel=\"nofollow\">Here is the method documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "is_accepted": false, "score": 3, "last_activity_date": 1464809254, "creation_date": 1464809254, "answer_id": 37577220, "question_id": 37577127, "link": "https://stackoverflow.com/questions/37577127/difference-between-len-and-print-len/37577220#37577220", "title": "Difference between Len and Print Len()", "body": "<p><a href=\"https://docs.python.org/2/library/functions.html#len\" rel=\"nofollow\"><code>len</code></a> returns a value, only in the REPL you'll see the value returned without assigning the value to a variable. More specifically,</p>\n\n<blockquote>\n  <p>len(s)</p>\n  \n  <p>Return the length (the number of items) of an object. The argument may\n  be a sequence (such as a string, bytes, tuple, list, or range) or a\n  collection (such as a dictionary, set, or frozen set).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2922, "user_id": 378826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eed752c6937edcf8597e360c627582?s=128&d=identicon&r=PG", "display_name": "Dilettant", "link": "https://stackoverflow.com/users/378826/dilettant"}, "is_accepted": false, "score": 0, "last_activity_date": 1464809364, "creation_date": 1464809364, "answer_id": 37577249, "question_id": 37577127, "link": "https://stackoverflow.com/questions/37577127/difference-between-len-and-print-len/37577249#37577249", "title": "Difference between Len and Print Len()", "body": "<p>You need print or write when it is not clear, that everything that produces some value needs to be echoed (like in an interactive session we call REPL Read Eval Print Loop).</p>\n\n<p>So:</p>\n\n<pre><code>v = len([1, 42])\n</code></pre>\n\n<p>places the value 2 in v.</p>\n\n<p>So in a script executed that has the following 3 lines:</p>\n\n<pre><code>v = len([1, 42])\nlen([1, 42])\nprint v\n</code></pre>\n\n<p>only one line will be printed (i.e. the last one with the value 2 being shown.</p>\n"}, {"tags": [], "owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 0, "last_activity_date": 1464809475, "creation_date": 1464809475, "answer_id": 37577277, "question_id": 37577127, "link": "https://stackoverflow.com/questions/37577127/difference-between-len-and-print-len/37577277#37577277", "title": "Difference between Len and Print Len()", "body": "<p>Look at it this way.</p>\n\n<pre><code>n = len(a)\n</code></pre>\n\n<p>sets <code>n</code> to the returned value.</p>\n\n<pre><code>n = print(len(a))\n</code></pre>\n\n<p>assigns <code>None</code> to <code>n</code>, because that's what <code>print()</code> returns.  Printing the value to the console is a side effect, in functional-programming terms, even though that is usually why you invoke <code>print()</code> on anything.</p>\n\n<p>(In trad. Python 2 it was a syntax error, because <code>print</code> was a keyword.)</p>\n\n<p>At the Python prompt, the value of <code>len(a)</code> also gets printed by the Python interpreter, but that's because the Python interpreter automatically does that, for your convenience.</p>\n\n<p>In a regular Python program, basically only <code>print()</code> and <code>write()</code> etc produce output, and most operations (<code>len</code>, <code>+</code>, <code>open</code>, etc etc) only return something, without printing it.  (Think how noisy a program would be if it printed everything it calculated.)</p>\n"}], "owner": {"reputation": 270, "user_id": 1161800, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8933900727c9057b6d7d30f08c220be9?s=128&d=identicon&r=PG", "display_name": "AdamSC", "link": "https://stackoverflow.com/users/1161800/adamsc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9413, "favorite_count": 0, "accepted_answer_id": 37577214, "answer_count": 4, "score": 1, "last_activity_date": 1464809475, "creation_date": 1464808889, "question_id": 37577127, "link": "https://stackoverflow.com/questions/37577127/difference-between-len-and-print-len", "title": "Difference between Len and Print Len()", "body": "<p>I've recently started doing data analysis in Python and since I didn't learn Python from scratch I feel I've missed a few nuances.</p>\n\n<p>One thing I noticed is in one of my reports I had imported a data set from a CSV, put it in as a dictionary, manipulated it and was trying to print the remaining entries.</p>\n\n<p>I used:</p>\n\n<pre><code>len(a)\nlen(b)\nlen(c)\n</code></pre>\n\n<p>When I did this only one of the numbers was returning and so I spent a significant amount of time debugging my code. In the end I found similar code online and tried to copy its syntax. The change that worked was:</p>\n\n<pre><code>print len(a)\nprint len(b)\nprint len(c)\n</code></pre>\n\n<p>I'm trying to understand the difference between the two commands. Initial I thought len just printed out a count, but I guess its something different?</p>\n\n<p>Does len only have 'memory' for one count? Why do I need to add print?</p>\n"}, {"tags": ["python", "scripting"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1464809294, "post_id": 37577064, "comment_id": 62641319, "body": "Related <a href=\"http://stackoverflow.com/q/7351744\">split string in to 2 based on last occurrence of a separator</a>"}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "edited": false, "score": 0, "creation_date": 1464811999, "post_id": 37577142, "comment_id": 62642754, "body": "what if i were to use a function with no parameter as so: getnextcallid(). Is it possible to extract an display an empty string. eg. &#39; &#39;&#39; &#39;?"}, {"owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "edited": false, "score": 0, "creation_date": 1464818350, "post_id": 37577142, "comment_id": 62645830, "body": "how would i partition just the name of the function? eg. s = &#39;datediff(varchar(30),timestamp(3),timestamp(3))&#39; to just s=&#39;datediff&#39;"}], "tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 3, "last_activity_date": 1464809287, "last_edit_date": 1464809287, "creation_date": 1464808939, "answer_id": 37577142, "question_id": 37577064, "link": "https://stackoverflow.com/questions/37577064/string-splitting-python/37577142#37577142", "title": "String splitting python", "body": "<blockquote>\n  <p>Is there a way to split it just by the first occurrence and last occurrence of parenthesis?</p>\n</blockquote>\n\n<p>Yes, use <a href=\"https://docs.python.org/2/library/stdtypes.html#str.partition\" rel=\"nofollow\"><code>partition</code></a> and <a href=\"https://docs.python.org/2/library/stdtypes.html#str.rpartition\" rel=\"nofollow\"><code>rpartition</code></a>.</p>\n\n<pre><code>&gt;&gt;&gt; s = 'datediff(varchar(30),timestamp(3),timestamp(3))'\n&gt;&gt;&gt; s.partition(\"(\")\n('datediff', '(', 'varchar(30),timestamp(3),timestamp(3))')\n&gt;&gt;&gt; s.partition(\"(\")[2]\n'varchar(30),timestamp(3),timestamp(3))'\n&gt;&gt;&gt; s.partition(\"(\")[2].rpartition(\")\")\n('varchar(30),timestamp(3),timestamp(3)', ')', '')\n&gt;&gt;&gt; s.partition(\"(\")[2].rpartition(\")\")[0]\n'varchar(30),timestamp(3),timestamp(3)'\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>&gt;&gt;&gt; def extract(s):\n...     return s.partition(\"(\")[2].rpartition(\")\")[0]\n...\n&gt;&gt;&gt; print(extract('datediff(varchar(30),timestamp(3),timestamp(3))'))\nvarchar(30),timestamp(3),timestamp(3)\n&gt;&gt;&gt; print(extract('reverse(text)'))\ntext\n&gt;&gt;&gt; print(extract('checkcluster(int,int,int,int,int)'))\nint,int,int,int,int\n&gt;&gt;&gt; print(extract('declaredown(int)'))\nint\n</code></pre>\n"}], "owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 37577142, "answer_count": 1, "score": 0, "last_activity_date": 1464809287, "creation_date": 1464808699, "question_id": 37577064, "link": "https://stackoverflow.com/questions/37577064/string-splitting-python", "title": "String splitting python", "body": "<p>I am trying to parse a file and split the line in python. Currently i can parse the file and load it into a list.</p>\n\n<p>I am trying to take each line and split it by the parenthesis,</p>\n\n<pre><code>'datediff(varchar(30),timestamp(3),timestamp(3))'\nreverse(text)\ncheckcluster(int,int,int,int,int)\ndeclaredown(int)\n</code></pre>\n\n<p>I am trying to extract the parameters in side the function as so:</p>\n\n<pre><code>['varchar(30),timestamp(3),timestamp(3)','text','int,int,int,int,int','int']\n</code></pre>\n\n<p>However the result i am getting is:</p>\n\n<pre><code>['varchar(30', 'text', 'int,int,int,int,int', 'int']\n</code></pre>\n\n<p>I believe its because of bracket in varchar. \nIs there a way to split it just by the first occurrence and last occurrence of parenthesis?</p>\n"}, {"tags": ["python", "html", "selenium"], "comments": [{"owner": {"reputation": 23, "user_id": 6206221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c5f670440162c3ebdb75651f4291e2?s=128&d=identicon&r=PG&f=1", "display_name": "Apriconer", "link": "https://stackoverflow.com/users/6206221/apriconer"}, "reply_to_user": {"reputation": 8483, "user_id": 5318223, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/be47da4995eb4e8dff0ab4637e5773d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kiril S.", "link": "https://stackoverflow.com/users/5318223/kiril-s"}, "edited": false, "score": 0, "creation_date": 1464814613, "post_id": 37577040, "comment_id": 62644161, "body": "Hi Kiril, that one uses a specific id, which would restrict the selection to my knowledge. I&#39;d like to get the entire page. I&#39;ll try it using html as the selector."}, {"owner": {"reputation": 2068, "user_id": 1890387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbec6decacb35cd426ab73d7df6fbce?s=128&d=identicon&r=PG", "display_name": "Mobrockers", "link": "https://stackoverflow.com/users/1890387/mobrockers"}, "edited": false, "score": 1, "creation_date": 1464848953, "post_id": 37577040, "comment_id": 62654384, "body": "No that answer uses the body tag ,which is the complete site content."}], "owner": {"reputation": 23, "user_id": 6206221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c5f670440162c3ebdb75651f4291e2?s=128&d=identicon&r=PG&f=1", "display_name": "Apriconer", "link": "https://stackoverflow.com/users/6206221/apriconer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 1, "closed_date": 1464890679, "answer_count": 0, "score": 0, "last_activity_date": 1464808640, "creation_date": 1464808640, "question_id": 37577040, "link": "https://stackoverflow.com/questions/37577040/getting-visible-text-selenium", "closed_reason": "Duplicate", "title": "Getting visible text Selenium", "body": "<p>I'm using Python with Selenium. I discovered, perhaps poorly, that if I load <code>driver.get(view-source:http://www.example.com)</code> through the Firefox driver, the site loads faster and also resolves some other issues I'm having. However, <code>driver.page_source</code> is not loading the html is displayed. Instead, a sort of template is loaded that looks like:</p>\n\n<pre><code>&lt;html webdriver=\"true\"&gt;...\n&lt;spand id=\"line2\"&gt;...\n&lt;spand id=\"line3\"&gt;...\n&lt;spand id=\"line4\"&gt;...\n</code></pre>\n\n<p>None of the page content is existent in this result. If it makes sense, the id tags then become encased in their own tags. For example, usually the page has the line</p>\n\n<pre><code>&lt;Header id=\"NewsHeadline\"&gt;Some text here&lt;/Header&gt;\n</code></pre>\n\n<p>Now, the page looks like <code>&lt;spand id=\"line4\"&gt;&lt;header&gt;id=\"Newsheadline\"&lt;/header&gt;&lt;/span&gt;</code></p>\n\n<p>To make my question short, is there some way I can get the visible text (which happens to be the html) without using <code>driver.page_source</code>? Thanks!</p>\n"}, {"tags": ["python", "drop-down-menu", "tkinter", "filepath"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1464821917, "post_id": 37577039, "comment_id": 62647116, "body": "<a href=\"http://effbot.org/tkinterbook/listbox.htm\" rel=\"nofollow noreferrer\">The Tkinter Listbox Widget</a>"}, {"owner": {"reputation": 1157, "user_id": 5601431, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MSYp6.jpg?s=128&g=1", "display_name": "Parviz Karimli", "link": "https://stackoverflow.com/users/5601431/parviz-karimli"}, "edited": false, "score": 0, "creation_date": 1472191150, "post_id": 37577039, "comment_id": 65661799, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8647735/tkinter-listbox\">Tkinter Listbox</a>"}], "answers": [{"tags": [], "owner": {"reputation": 524, "user_id": 4242180, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddcdac4de4d5e8177e3620370eba86f5?s=128&d=identicon&r=PG&f=1", "display_name": "terratunaz", "link": "https://stackoverflow.com/users/4242180/terratunaz"}, "is_accepted": true, "score": 2, "last_activity_date": 1464816977, "last_edit_date": 1464816977, "creation_date": 1464810612, "answer_id": 37577578, "question_id": 37577039, "link": "https://stackoverflow.com/questions/37577039/python-what-is-the-syntax-for-adding-a-command-to-a-tkinter-listbox-item/37577578#37577578", "title": "Python: What is the syntax for adding a command to a tkinter Listbox item?", "body": "<p>According to this,\n<a href=\"http://effbot.org/tkinterbook/listbox.htm\" rel=\"nofollow\">http://effbot.org/tkinterbook/listbox.htm</a>\nThe listbox item does not have a command option. So what you need to do instead is to bind an event to it. Here is a complete working example. </p>\n\n<pre><code>from tkinter import *\nimport os\n\nroot = Tk()\nclass MainGui:\n    def __init__(self, master):\n        self.mypathLabel = Label(master, text=\"Copy and Paste your filepath here:\")\n        self.mypathEntry = Entry(master, bg=\"black\", fg=\"white\", relief=SUNKEN)\n        self.mypathSaveButton = Button(master, text=\"Save Path\", bg=\"black\", fg=\"white\", command=self.save_path)\n        self.mypathList = Listbox(master, bg=\"black\", fg=\"white\")\n\n        self.mypathLabel.pack()\n        self.mypathEntry.pack()\n        self.mypathSaveButton.pack()\n        self.mypathList.pack()\n        self.mypathList.bind(\"&lt;Double-Button-1&gt;\", self.open_path)\n\n    def save_path(self):\n        fp = self.mypathEntry.get()\n        self.mypathEntry.delete(0, 'end')\n        self.mypathList.insert(1, fp)\n\n    def open_path(self, event):\n        list_item = self.mypathList.curselection()\n        fp = self.mypathList.get(list_item[0])\n        print(fp)\n        try:\n            with open(fp, 'r') as result:\n                print(result.read())\n        except Exception as e:\n            print(e)    \n\nMainGui(root)\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6141343, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/00f9fb071ff8c96e8d632204a16e68e0?s=128&d=identicon&r=PG&f=1", "display_name": "mattyb", "link": "https://stackoverflow.com/users/6141343/mattyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "accepted_answer_id": 37577578, "answer_count": 1, "score": -1, "last_activity_date": 1464816977, "creation_date": 1464808638, "question_id": 37577039, "link": "https://stackoverflow.com/questions/37577039/python-what-is-the-syntax-for-adding-a-command-to-a-tkinter-listbox-item", "title": "Python: What is the syntax for adding a command to a tkinter Listbox item?", "body": "<p>below is my code for creating a tool that takes a file path, stores the value, and then opens the specific file path selected by the user. </p>\n\n<p>Currently, I'm looking to take the user entry <code>mypathEntry</code> that is stored in the <code>mypathList</code> listbox after clicking the <code>Save</code> button and add a command to it. The command will open that selected file path. My current code returns an error message regarding <code>mypathList.add_command(command=Open)</code> stating that Listbox instance has no attribute 'add_command'.</p>\n\n<p><strong>What is the syntax for adding a command to a listbox item?</strong></p>\n\n<pre><code>from Tkinter import *\nimport os\n\nroot = Tk()\n\ndef Save():\n    fp = mypathEntry.get()\n    scribe = open('filepath.txt', 'w')\n    scribe.write(fp)\n    mypathEntry.delete(0, 'end')\n    mypathList.insert(1, fp)\n\ndef Open():\n    path = fp\n\nmenu = Menu(root)\n##root.config(menu=menu)\n\n##subMenu = Menu(menu)\n##menu.add_cascade(label=\"Filepaths\", menu=subMenu)\n##subMenu.add_command(command=Save)\n\nmypathLabel = Label(root, text=\"Copy and Paste your filepath here:\")\nmypathEntry = Entry(root, bg=\"black\", fg=\"white\", relief=SUNKEN)\nmypathSaveButton = Button(root, text=\"Save Path\", bg=\"black\", fg=\"white\", command=Save)\n\nmypathList = Listbox(root, bg=\"black\", fg=\"white\")\nmypathList.add_command(command=Open)\n\n\nmypathLabel.pack()\nmypathEntry.pack()\nmypathSaveButton.pack()\nmypathList.pack()\n\n\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5960018, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh6.googleusercontent.com/-X9g9IVTgar0/AAAAAAAAAAI/AAAAAAAABgg/oElEUUbh7mk/photo.jpg?sz=128", "display_name": "Turab Hassan", "link": "https://stackoverflow.com/users/5960018/turab-hassan"}, "edited": false, "score": 0, "creation_date": 1464914571, "post_id": 37577151, "comment_id": 62693082, "body": "Thanks, works perfectly. Is it possible to define the list in the forms.py file or that needs to be defined in the html? my list is going to be big, like 100 options and thats why I want the auto complete feature. or is there a better way to implement this?"}, {"owner": {"reputation": 1434, "user_id": 377655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yMoLD.jpg?s=128&g=1", "display_name": "Elwin Arens", "link": "https://stackoverflow.com/users/377655/elwin-arens"}, "reply_to_user": {"reputation": 73, "user_id": 5960018, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh6.googleusercontent.com/-X9g9IVTgar0/AAAAAAAAAAI/AAAAAAAABgg/oElEUUbh7mk/photo.jpg?sz=128", "display_name": "Turab Hassan", "link": "https://stackoverflow.com/users/5960018/turab-hassan"}, "edited": false, "score": 0, "creation_date": 1464931343, "post_id": 37577151, "comment_id": 62696970, "body": "If your list can grow large one way to approach this would be to instead create a forms.CharField() and use an API source for searching that fills this field. Up to 1k options Python/Django should easily manage, but beyond that a search API would be interesting. If the answer helped you, feel free to upvote and accept it :-)"}], "tags": [], "owner": {"reputation": 1434, "user_id": 377655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yMoLD.jpg?s=128&g=1", "display_name": "Elwin Arens", "link": "https://stackoverflow.com/users/377655/elwin-arens"}, "is_accepted": true, "score": 1, "last_activity_date": 1464808970, "creation_date": 1464808970, "answer_id": 37577151, "question_id": 37577037, "link": "https://stackoverflow.com/questions/37577037/python-django-getting-user-input/37577151#37577151", "title": "Python Django Getting user input", "body": "<p>You are using a forms.HiddenInput() as the widget and then add the form field yourself. This doesn't work that way. What if you change the field class to TextInput:</p>\n\n<pre><code>class BusinessName(forms.Form):\n    business_name = forms.CharField(widget = forms.TextInput())\n</code></pre>\n\n<p>If you're goal is to add custom attributes to the widget, then this can be done by providing an attrs dictionary:</p>\n\n<pre><code>class BusinessName(forms.Form):\n    business_name = forms.CharField(widget = forms.TextInput(attrs={\n        'list': 'browser'\n    }))\n</code></pre>\n\n<p>Or you could have a look at the <a href=\"https://pypi.python.org/pypi/django-widget-tweaks\" rel=\"nofollow\">django-widget-tweaks</a> package to add attributes in the template.</p>\n"}], "owner": {"reputation": 73, "user_id": 5960018, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh6.googleusercontent.com/-X9g9IVTgar0/AAAAAAAAAAI/AAAAAAAABgg/oElEUUbh7mk/photo.jpg?sz=128", "display_name": "Turab Hassan", "link": "https://stackoverflow.com/users/5960018/turab-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1527, "favorite_count": 0, "accepted_answer_id": 37577151, "answer_count": 1, "score": 2, "last_activity_date": 1464808970, "creation_date": 1464808633, "question_id": 37577037, "link": "https://stackoverflow.com/questions/37577037/python-django-getting-user-input", "title": "Python Django Getting user input", "body": "<p>I am setting up a simple html page, the page captures the information that the user entered and based on the information that the user entered makes a new page. The problem is that I cant get back the information entered by the user at the backed and I dont understand where I am going wrong.</p>\n\n<p>My views file is setup like this:</p>\n\n<pre><code>def suggestion(request):  \n    if request.method == 'POST':\n        form = BusinessName(request.POST)\n        if form.is_valid():\n            data=form.cleaned_data  \n            context = insert_function_here(data)\n            return render( request,'mainpage.html', context)\n    else:\n        form = BusinessName()  \n        context = {'form':form}\n        return render( request,'mainpage.html', context) \n</code></pre>\n\n<p>My forms.py is setup like this:</p>\n\n<pre><code>class BusinessName(forms.Form):\n    business_name = forms.CharField(widget = forms.HiddenInput(), required = False)\n</code></pre>\n\n<p>The relevant part of my html is set up like this:</p>\n\n<pre><code>&lt;form id=\"user_input_form\" method=\"post\" action=\"http://127.0.0.1:8000/textinsighters/suggestion\"&gt;\n    Enter Your Business Name : &lt;input type=\"text\" list=\"browsers\" name=\"browser\" id=\"user_input\"&gt;\n    {% csrf_token %}\n    {{ form }}\n      &lt;datalist id=\"browsers\"&gt;\n        &lt;option value=\"Internet Explorer\"&gt;\n        &lt;option value=\"Firefox\"&gt;\n        &lt;option value=\"Chrome\"&gt;\n        &lt;option value=\"Opera\"&gt;\n        &lt;option value=\"Safari\"&gt;\n      &lt;/datalist&gt;\n      &lt;button onclick=\"myFunction()\"&gt;Submittt&lt;/button&gt;\n&lt;/form&gt;\n&lt;script&gt;\n    function myFunction() {\ndocument.getElementById(\"id_business_name\").value = document.getElementById(\"user_input\").value;                                            \ndocument.getElementById(\"user_input_form\").submit();\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I want an auto-completing list so thats why I am creating a form in html. I get the user input, set the value of the Django form field to the value that the user entered and submit it. I should get something back but the variable 'data' in views doesnt contain the user input.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "r", "excel"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1464808577, "post_id": 37576915, "comment_id": 62640939, "body": "For code and data, please indent four spaces so it stands out. I&#39;ve done this for you in this case, so you can see the difference."}, {"owner": {"reputation": 1, "user_id": 6411290, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j0nmAZztNo/AAAAAAAAAAI/AAAAAAAABNk/rHZ7KVCc1mk/photo.jpg?sz=128", "display_name": "vishal lakha", "link": "https://stackoverflow.com/users/6411290/vishal-lakha"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1464808815, "post_id": 37576915, "comment_id": 62641062, "body": "thank you sir for the formatting of question. can you suggest me some easy way to achieve the desired format of my data. there are more than 10 thousands datapoints."}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 6035139, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10156685056205201/picture?type=large", "display_name": "Rosa Alejandra", "link": "https://stackoverflow.com/users/6035139/rosa-alejandra"}, "is_accepted": false, "score": 0, "last_activity_date": 1464809352, "creation_date": 1464809352, "answer_id": 37577246, "question_id": 37576915, "link": "https://stackoverflow.com/questions/37576915/how-to-combine-different-cells-according-to-the-customer-id/37577246#37577246", "title": "How to combine different cells according to the customer ID?", "body": "<p>In Python, you can use <a href=\"http://pandas.pydata.org/pandas-docs/version/0.15.2/tutorials.html\" rel=\"nofollow\">pandas</a>.</p>\n\n<p>Install it, then try</p>\n\n<pre><code>import pandas as pd\n\n# Read the cvs file\ndf = pd.read_csv('yourFileName.csv')\n\n# Group by CustomerID and join Descriptions with commas\ndf.groupby('CustomerID')['Description'].apply(','.join)\n\n# Save the result in cvs file\ndf.to_csv('resultFileName.csv', index=False)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3291, "user_id": 5371744, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/46f5879f19191378df4548b2a96392a8?s=128&d=identicon&r=PG&f=1", "display_name": "Sowmya S. Manian", "link": "https://stackoverflow.com/users/5371744/sowmya-s-manian"}, "is_accepted": true, "score": 0, "last_activity_date": 1464809580, "creation_date": 1464809580, "answer_id": 37577319, "question_id": 37576915, "link": "https://stackoverflow.com/questions/37576915/how-to-combine-different-cells-according-to-the-customer-id/37577319#37577319", "title": "How to combine different cells according to the customer ID?", "body": "<p>You can use <code>aggregate()</code> function, Created my own data, you can do this for your own data frame above. Based on <code>Customer</code> number, the <code>Texts</code> are concatenated</p>\n\n<pre><code>&gt; df &lt;- data.frame(Customer = c(1,1,2,3,3,4), Texts = c(\"AAA\",\"aaa\",\"BBB\",\"bbb\",\"CCC\",\"ccc\"))\n&gt; df\n   Customer Texts\n1        1   AAA\n2        1   aaa\n3        2   BBB\n4        3   bbb\n5        3   CCC\n6        4   ccc\n\n\n&gt; aggregate(Texts~Customer,toString,data=df)\n     Customer    Texts\n 1          1 AAA, aaa\n 2          2      BBB\n 3          3 bbb, CCC\n 4          4      ccc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3722, "user_id": 5249203, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62ade2eeb123f33d7fdc8d54fd4122f9?s=128&d=identicon&r=PG&f=1", "display_name": "user5249203", "link": "https://stackoverflow.com/users/5249203/user5249203"}, "is_accepted": false, "score": 0, "last_activity_date": 1464815060, "last_edit_date": 1464815060, "creation_date": 1464814756, "answer_id": 37578677, "question_id": 37576915, "link": "https://stackoverflow.com/questions/37576915/how-to-combine-different-cells-according-to-the-customer-id/37578677#37578677", "title": "How to combine different cells according to the customer ID?", "body": "<p>other ways to do this include using <code>plyr</code> and <code>data.table</code>. data.table is probably more efficient, simple and as well offers control.  </p>\n\n<pre><code>library(plyr)\nddply(df, .(ID), summarize, Text = paste(Text, collapse = \",\"))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>require(DT)\nDT &lt;- data.table(df)\n# group the table by ID and then add a new column by pasting the list \n# of values in each group together. \n\nDT[, list(Text = paste(Text, collapse = \",\")), by = ID]\n\n   ID                                                                                Text\n1: 17850                              WHITE HANGING HEART T-LIGHT HOLDER,WHITE METAL LANTERN\n2: 13047  ASSORTED COLOUR BIRD ORNAMENT,POPPY'S PLAYHOUSE BEDROOM, POPPY'S PLAYHOUSE KITCHEN\n</code></pre>\n\n<p>Data</p>\n\n<hr>\n\n<pre><code>df &lt;- data.frame(ID = c(17850,17850,13047,13047,13047),\n      Text = c(\"WHITE HANGING HEART T-LIGHT HOLDER\",\"WHITE METAL LANTERN\",\n              \" ASSORTED COLOUR BIRD ORNAMENT\",\"POPPY'S PLAYHOUSE BEDROOM\",\n              \" POPPY'S PLAYHOUSE KITCHEN\"))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6411290, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2j0nmAZztNo/AAAAAAAAAAI/AAAAAAAABNk/rHZ7KVCc1mk/photo.jpg?sz=128", "display_name": "vishal lakha", "link": "https://stackoverflow.com/users/6411290/vishal-lakha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1464823739, "accepted_answer_id": 37577319, "answer_count": 3, "score": -2, "last_activity_date": 1464827170, "creation_date": 1464808175, "last_edit_date": 1464827170, "question_id": 37576915, "link": "https://stackoverflow.com/questions/37576915/how-to-combine-different-cells-according-to-the-customer-id", "closed_reason": "Duplicate", "title": "How to combine different cells according to the customer ID?", "body": "<p>I have a transaction data set and I want to transform this according to the customer ID. the sample is given below.</p>\n\n<pre><code>CustomerID    Description\n\n17850         WHITE HANGING HEART T-LIGHT HOLDER\n17850         WHITE METAL LANTERN\n13047         ASSORTED COLOUR BIRD ORNAMENT\n13047         POPPY'S PLAYHOUSE BEDROOM\n13047         POPPY'S PLAYHOUSE KITCHEN\n</code></pre>\n\n<p>I want this data set in  the following order:-</p>\n\n<pre><code>17850         WHITE HANGING HEART T-LIGHT HOLDER, WHITE METAL LANTERN\n13047         ASSORTED COLOUR BIRD ORNAMENT,POPPY'S PLAYHOUSE BEDROOM, POPPY'S PLAYHOUSE KITCHEN\n</code></pre>\n\n<p>The dataset is in csv format and each value in separate cell.\ncan anyone suggest any method to do this in excel or R or python?</p>\n"}, {"tags": ["python", "csv"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5929677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14e9ce98b03af802a9d93dd6dd818a8?s=128&d=identicon&r=PG&f=1", "display_name": "djjordand6", "link": "https://stackoverflow.com/users/5929677/djjordand6"}, "edited": false, "score": 0, "creation_date": 1464809156, "post_id": 37577157, "comment_id": 62641249, "body": "This is for some schoolwork at school, so the first solution may be better than the one using Pandas. Although, Pandas looks like the better option. Let me have a look at the first solution."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 15, "user_id": 5929677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14e9ce98b03af802a9d93dd6dd818a8?s=128&d=identicon&r=PG&f=1", "display_name": "djjordand6", "link": "https://stackoverflow.com/users/5929677/djjordand6"}, "edited": false, "score": 0, "creation_date": 1464809301, "post_id": 37577157, "comment_id": 62641327, "body": "I think I misread the question initially. Something like this would likely be more appropriate to get the row in the csv file that you need."}, {"owner": {"reputation": 15, "user_id": 5929677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14e9ce98b03af802a9d93dd6dd818a8?s=128&d=identicon&r=PG&f=1", "display_name": "djjordand6", "link": "https://stackoverflow.com/users/5929677/djjordand6"}, "edited": false, "score": 0, "creation_date": 1464809604, "post_id": 37577157, "comment_id": 62641477, "body": "I get the error    _csv.Error: iterator should return strings, not bytes (did you open the file in text mode?) when running"}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 15, "user_id": 5929677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14e9ce98b03af802a9d93dd6dd818a8?s=128&d=identicon&r=PG&f=1", "display_name": "djjordand6", "link": "https://stackoverflow.com/users/5929677/djjordand6"}, "edited": false, "score": 0, "creation_date": 1464809720, "post_id": 37577157, "comment_id": 62641543, "body": "What version of python are you using? Try replacing <code>&#39;rb&#39;</code> with <code>&#39;r&#39;</code> in the <code>open</code> function."}, {"owner": {"reputation": 15, "user_id": 5929677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14e9ce98b03af802a9d93dd6dd818a8?s=128&d=identicon&r=PG&f=1", "display_name": "djjordand6", "link": "https://stackoverflow.com/users/5929677/djjordand6"}, "edited": false, "score": 0, "creation_date": 1464810121, "post_id": 37577157, "comment_id": 62641752, "body": "It doesnt give the error with &#39;r&#39;, but I want to get the value in the third column of that row (or the value after the second comma) @pbreach"}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 15, "user_id": 5929677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14e9ce98b03af802a9d93dd6dd818a8?s=128&d=identicon&r=PG&f=1", "display_name": "djjordand6", "link": "https://stackoverflow.com/users/5929677/djjordand6"}, "edited": false, "score": 0, "creation_date": 1464810290, "post_id": 37577157, "comment_id": 62641840, "body": "No problem, just index <code>row</code> to get the third element with <code>row[2]</code>. I&#39;ll update."}], "tags": [], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "is_accepted": true, "score": 1, "last_activity_date": 1464810636, "last_edit_date": 1464810636, "creation_date": 1464808992, "answer_id": 37577157, "question_id": 37576905, "link": "https://stackoverflow.com/questions/37576905/how-do-i-make-my-program-give-me-the-value-of-a-certain-cell-in-a-csv/37577157#37577157", "title": "How do I make my program give me the value of a certain cell in a CSV?", "body": "<p>You could just iterate through the lines of the csv file and return a particular column of the row that contains the 8 digit number:</p>\n\n<pre><code>import csv\n\ndef get_row(filename, number, column):\n    with open(filename, 'r') as f:\n        for row in csv.reader(f):\n            if str(number) in row:\n                return row[column+1]\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5929677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14e9ce98b03af802a9d93dd6dd818a8?s=128&d=identicon&r=PG&f=1", "display_name": "djjordand6", "link": "https://stackoverflow.com/users/5929677/djjordand6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 37577157, "answer_count": 1, "score": 0, "last_activity_date": 1464810636, "creation_date": 1464808134, "last_edit_date": 1464808568, "question_id": 37576905, "link": "https://stackoverflow.com/questions/37576905/how-do-i-make-my-program-give-me-the-value-of-a-certain-cell-in-a-csv", "title": "How do I make my program give me the value of a certain cell in a CSV?", "body": "<p>I am having problems with trying to make my program find a certain cell in a CSV file. My program will ask you for a 8 digit number. If it is in the CSV file, the row should be written to a text file. It then should proceed to ask the user how much of the product they want to buy. This quantity will then be multiplied to give a final price. The price will be written to a variable named totalPrice.</p>\n\n<p>My initial problem is with the quantity since I cannot retrieve it from the third column of the row of the entered GTIN-8 number in my CSV file.</p>\n\n<p>My code is:</p>\n\n<pre><code>import csv\nimport sys\nimport re\nimport os\n\naddItem = \"\"\ngtinNum = \"\"\nquantity = 0\ntotalPrice = 0\nrestart = \"\"\n\nf = open(\"ChocolateCSV.csv\", \"rt\")\n\ndef restart():\n    restart = input(\"Would you like to restart? Y/N\")\n\n    if restart.lower() == \"y\":\n        gtinQuestion()\n    else:\n        print(receiptCont)\n        sys.exit()\n\ndef quantityQuestion():\n    quantity = input(\"How much would you like?\")\n\n\ndef scanGTIN():\n    global rows\n    rows = re.split('\\n', f.read())\n    global receiptCont\n    receiptCont = receipt.read()\n\n   for index, row in enumerate(rows):\n        global cells\n        cells = row.split(',')\n        if gtinNum in cells:\n            receipt.write(receiptCont)\n            receipt.close()\n            quantityQuestion()\n\ndef gtinQuestion():\n    global gtinNum\n    global receipt\n    receipt = open(\"receipt.txt\", \"r+\")\n    gtinNum = input(\"Please enter the GTIN-8 Code of the product you would like to order:\")\n\n    if gtinNum.isdigit() == False or len(gtinNum) != 8:\n        gtinQuestion()\n    elif gtinNum.isdigit() == True and len(gtinNum) == 8:\n        scanGTIN()\n\n\ngtinQuestion()\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1464808078, "post_id": 37576839, "comment_id": 62640705, "body": "<code>python</code> tag without code?. Please post what you&#39;ve done."}, {"owner": {"reputation": 1, "user_id": 6221496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c4e14e4de556b246825e4ca68ac2ff1?s=128&d=identicon&r=PG&f=1", "display_name": "hon", "link": "https://stackoverflow.com/users/6221496/hon"}, "edited": false, "score": 0, "creation_date": 1464808240, "post_id": 37576839, "comment_id": 62640785, "body": "Python, sorry i thought open csv, means read csv"}, {"owner": {"reputation": 4442, "user_id": 1678467, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5f1e2e084cb0946c2c159ceaee9f43a0?s=128&d=identicon&r=PG", "display_name": "tnknepp", "link": "https://stackoverflow.com/users/1678467/tnknepp"}, "edited": false, "score": 0, "creation_date": 1464808383, "post_id": 37576839, "comment_id": 62640849, "body": "Try pandas.read_csv.  Give it a shot and come back when you have a code example."}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 6035139, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10156685056205201/picture?type=large", "display_name": "Rosa Alejandra", "link": "https://stackoverflow.com/users/6035139/rosa-alejandra"}, "is_accepted": false, "score": 0, "last_activity_date": 1464808344, "creation_date": 1464808344, "answer_id": 37576959, "question_id": 37576839, "link": "https://stackoverflow.com/questions/37576839/searching-a-csv-file-and-then-outputting-a-term-associating-to-the-term/37576959#37576959", "title": "searching a csv file and then outputting a term associating to the term", "body": "<p>You can use <a href=\"http://pandas.pydata.org/pandas-docs/version/0.15.2/tutorials.html\" rel=\"nofollow\">pandas</a> </p>\n\n<p>Install it, then try</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('yourFile.csv')\nprint df\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6221496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c4e14e4de556b246825e4ca68ac2ff1?s=128&d=identicon&r=PG&f=1", "display_name": "hon", "link": "https://stackoverflow.com/users/6221496/hon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1464808344, "creation_date": 1464807888, "last_edit_date": 1464808286, "question_id": 37576839, "link": "https://stackoverflow.com/questions/37576839/searching-a-csv-file-and-then-outputting-a-term-associating-to-the-term", "title": "searching a csv file and then outputting a term associating to the term", "body": "<p>I am creating a code, that read a csvs file and search for a specific item code and then it will output the name of the item.\nHow would i do this?\nI don't have any code yet </p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "python", "ksoap", "spyne"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 6411253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GtD4T.png?s=128&g=1", "display_name": "Dirk van der Merwe", "link": "https://stackoverflow.com/users/6411253/dirk-van-der-merwe"}, "is_accepted": true, "score": 1, "last_activity_date": 1464808117, "last_edit_date": 1495535642, "creation_date": 1464808117, "answer_id": 37576895, "question_id": 37576838, "link": "https://stackoverflow.com/questions/37576838/error-when-connecting-ksoap-to-spyne-the-attribute-http-schemas-xmlsoap-org/37576895#37576895", "title": "Error when connecting kSoap to Spyne The attribute &#39;{http://schemas.xmlsoap.org/soap/encoding/}root&#39; is not allowed", "body": "<p>I found the answer.  I do not claim to understand why it work but it did.  See <a href=\"https://stackoverflow.com/questions/8949020/how-can-you-remove-namespace-declarations-in-ksoap\">How can you remove namespace declarations in ksoap?</a> for more details.</p>\n\n<p>Here is the code that I added to my java program:</p>\n\n<pre><code>try {\n    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);\n\n    SoapSerializationEnvelope soapEnvelope = new  SoapSerializationEnvelope(SoapEnvelope.VER11);\n    soapEnvelope.dotNet = true;\n    soapEnvelope.setOutputSoapObject(Request);\n    soapEnvelope.setAddAdornments(false);\n    HttpTransportSE transport = new HttpTransportSE(URL);\n\n    transport.call(SOAP_ACTION, soapEnvelope);\n    resultString = (SoapPrimitive) soapEnvelope.getResponse();\n\n    Log.i(TAG, \"Result Celsius: \" + resultString);\n} catch (Exception ex) {\n    Log.e(TAG, \"Error: \" + ex.getMessage());\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 6411253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GtD4T.png?s=128&g=1", "display_name": "Dirk van der Merwe", "link": "https://stackoverflow.com/users/6411253/dirk-van-der-merwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 37576895, "answer_count": 1, "score": 1, "last_activity_date": 1464808181, "creation_date": 1464807884, "last_edit_date": 1464808181, "question_id": 37576838, "link": "https://stackoverflow.com/questions/37576838/error-when-connecting-ksoap-to-spyne-the-attribute-http-schemas-xmlsoap-org", "title": "Error when connecting kSoap to Spyne The attribute &#39;{http://schemas.xmlsoap.org/soap/encoding/}root&#39; is not allowed", "body": "<p>I have a soap server written in python using spyne.  I have also created a soap client in python using suds.  It works perfect.  Here is the code for the server</p>\n\n<pre><code>class Personnel(ServiceBase):\n\n@rpc(_returns=String)\ndef personnel(self):\n    \"\"\"Docstrings for service methods appear as documentation in the wsdl.\n    &lt;b&gt;What fun!&lt;/b&gt;\n\n    @param name the name to say hello to\n    @param times the number of times to say hello\n    @return the completed array\n    \"\"\"\n    employees_list = employees()\n    employees_list.populate_from_db(\"elleo\", \"odoo\", \"0801\", \"127.0.0.1\")\n\n    tstString = \"Dirk\"\n\n    return tstString\n\napplication = Application([Personnel], 'elleo.personnel',\n                    in_protocol=Soap11(validator='lxml'),\n                    out_protocol=Soap11())\n\nwsgi_application = WsgiApplication(application)\n</code></pre>\n\n<p>When connect with my android program using kSOAP, I get an error.  Here is the code:</p>\n\n<pre><code>    String SOAP_ACTION = \"http://192.168.1.100:8000/personnel\";\n    String METHOD_NAME = \"personnel\";\n    String NAMESPACE = \"elleo.personnel\";\n    String URL = \"http://192.168.1.100:8000/?wsdl\";\n\n\n    try {\n        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);\n\n        SoapSerializationEnvelope soapEnvelope = new  SoapSerializationEnvelope(SoapEnvelope.VER11);\n        soapEnvelope.dotNet = true;\n        soapEnvelope.setOutputSoapObject(Request);\n        HttpTransportSE transport = new HttpTransportSE(URL);\n\n        transport.call(SOAP_ACTION, soapEnvelope);\n        resultString = (SoapPrimitive) soapEnvelope.getResponse();\n\n        Log.i(TAG, \"Result Celsius: \" + resultString);\n    } catch (Exception ex) {\n        Log.e(TAG, \"Error: \" + ex.getMessage());\n    }\n</code></pre>\n\n<p>I get the following error message:</p>\n\n<pre><code>  &lt;faultstring&gt;:1:0:ERROR:SCHEMASV:SCHEMAV_CVC_COMPLEX_TYPE_3_2_1: Element '{elleo.personnel}personnel', attribute '{http://schemas.xmlsoap.org/soap/encoding/}root': The attribute '{http://schemas.xmlsoap.org/soap/encoding/}root' is not allowed.&lt;/faultstring&gt;\n</code></pre>\n\n<p>Any idea how to solve this.  This is just a small program that I try to use to establish communications. I will expand the program if this part work.</p>\n"}, {"tags": ["java", "python", "regex"], "comments": [{"owner": {"reputation": 13937, "user_id": 3824919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HpYR.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3824919/tom"}, "edited": false, "score": 0, "creation_date": 1464807756, "post_id": 37576721, "comment_id": 62640562, "body": "Why do you want to ignore lines like <code>String blub = &quot;...&quot;; &#47;&#47; this blub means something</code>?"}, {"owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "edited": false, "score": 2, "creation_date": 1464807863, "post_id": 37576721, "comment_id": 62640605, "body": "Where do you have that url that is matched? That is indeed a comment if pasted in a Java source. The solution is not to restrict comments to the beginning of the file, but to do proper parsing. In some rare cases it can be sufficient to only handle this special case, but it looks like your case is rather complex, with urls and stuff. Could you please clarify the requirements?"}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1464808120, "post_id": 37576721, "comment_id": 62640725, "body": "&quot;Chop down a tree using screwdriver&quot;"}, {"owner": {"reputation": 157, "user_id": 4480167, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f3e50c32cf2d2fde774aa23b7707c44?s=128&d=identicon&r=PG&f=1", "display_name": "stumped221", "link": "https://stackoverflow.com/users/4480167/stumped221"}, "edited": false, "score": 0, "creation_date": 1464808441, "post_id": 37576721, "comment_id": 62640875, "body": "I&#39;m open to suggestions.. but I think we can all agree that &quot;<a href=\"http://regexr.com/foo.html?q=bar\" rel=\"nofollow noreferrer\">regexr.com/foo.html?q=bar</a>&quot; is NOT a valid Java comment?"}, {"owner": {"reputation": 157, "user_id": 4480167, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f3e50c32cf2d2fde774aa23b7707c44?s=128&d=identicon&r=PG&f=1", "display_name": "stumped221", "link": "https://stackoverflow.com/users/4480167/stumped221"}, "edited": false, "score": 0, "creation_date": 1464808773, "post_id": 37576721, "comment_id": 62641035, "body": "Tamas Hegedus I have a huge pile of unstructured data.  It could literally be anything.. but I need to do the best I can at getting all the java comments out of the text."}, {"owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1464809913, "post_id": 37576721, "comment_id": 62641642, "body": "@stumped221 <code>((?:&#47;\\*.*?\\*&#47;)|(?:\\s*&#47;&#47;.*(?:\\n)?))</code> This works for the most part, but for the urls such as <code>http:&#47;&#47;google.com</code> it would match <code>google.com</code> as a comment, how would you like to handle that?. I&#39;m making the assumption that <code>single line comments</code> can come at the end of the line, if this is not expected let me know and I&#39;ll change that and it will work"}, {"owner": {"reputation": 153096, "user_id": 50476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6326af218d1a113fd9a8fd9668b2d7c8?s=128&d=identicon&r=PG", "display_name": "Bart Kiers", "link": "https://stackoverflow.com/users/50476/bart-kiers"}, "edited": false, "score": 1, "creation_date": 1464810681, "post_id": 37576721, "comment_id": 62642054, "body": "Doing this reliably is not possible with a single regex."}], "answers": [{"comments": [{"owner": {"reputation": 153096, "user_id": 50476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6326af218d1a113fd9a8fd9668b2d7c8?s=128&d=identicon&r=PG", "display_name": "Bart Kiers", "link": "https://stackoverflow.com/users/50476/bart-kiers"}, "edited": false, "score": 1, "creation_date": 1464810474, "post_id": 37577433, "comment_id": 62641936, "body": "Word of caution for the OP: the above will catch most comments, but will not work as expected when string literals contain escaped quotes, and when there are char literals like this: <code>char c = &#39;&quot;&#39; &#47;*&quot;*&#47; ;</code>  (the comment <code>&#47;*&quot;*&#47;</code> is not matched). These are 2 of the things that caught my eye, I&#39;m sure there are more corner cases."}, {"owner": {"reputation": 157, "user_id": 4480167, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f3e50c32cf2d2fde774aa23b7707c44?s=128&d=identicon&r=PG&f=1", "display_name": "stumped221", "link": "https://stackoverflow.com/users/4480167/stumped221"}, "edited": false, "score": 0, "creation_date": 1464810541, "post_id": 37577433, "comment_id": 62641977, "body": "Yeah.. it doesn&#39;t match block comments :("}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 153096, "user_id": 50476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6326af218d1a113fd9a8fd9668b2d7c8?s=128&d=identicon&r=PG", "display_name": "Bart Kiers", "link": "https://stackoverflow.com/users/50476/bart-kiers"}, "edited": false, "score": 0, "creation_date": 1464813198, "post_id": 37577433, "comment_id": 62643370, "body": "@BartKiers Thanks for bringing that to my attention, it should work now."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1464868509, "post_id": 37577433, "comment_id": 62666987, "body": "@Rawing, Sorry, just check your demo doesn&#39;t recognize a comment after a comment (in the same line) or <code>&#47;&#47; bla bla *&#47; also fails</code>.  See <a href=\"https://regex101.com/r/cQ8kX9/4\" rel=\"nofollow noreferrer\">regex101.com/r/cQ8kX9/4</a>"}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": -1, "last_activity_date": 1464870051, "last_edit_date": 1464870051, "creation_date": 1464810055, "answer_id": 37577433, "question_id": 37576721, "link": "https://stackoverflow.com/questions/37576721/find-java-comments-multi-and-single-line-using-regex/37577433#37577433", "title": "Find java comments (multi and single line) using regex", "body": "<p>You can try this pattern:</p>\n\n<pre><code>(?ms)^[^'\"\\n]*?(?:(?:\"(?:\\\\.|[^\"])*\"|'\\\\?.')[^'\"\\n]*?)*((?:(?://[^\\n]*|/\\*.*?\\*/)[ \\t]*)+)\n</code></pre>\n\n<p>This captures comments in group 1, but only if the comment is not inside a string. <a href=\"https://regex101.com/r/cQ8kX9/6\" rel=\"nofollow\">Demo.</a></p>\n\n<hr>\n\n<p>Breakdown:</p>\n\n<pre><code>(?ms)                 multiline flag, makes ^ match at the start of a line\n                      singleline flag makes . match newlines\n^                     start of line\n[^'\"\\n]*?             match anything but \" or ' or newline\n(?:                   then, any number strings:\n    (?:\n        \"             start with a quote...\n        (?:           ...followed by any number of...\n            \\\\.       ...a backslash and the escaped character\n        |             or\n            [^\"]      any character other than \"\n        )*\n        \"             ...and finally the closing quote\n    |                 or...\n        '\\\\?.'        a single character in single quotes, possibly escaped\n    )\n    [^'\"\\n]*?         and everything up to the next string or newline\n)*\n(                     finally, capture (any number of) comments:\n    (?:\n        (?:           either...\n            //[^\\n]*  a single line comment\n        |             or\n            /\\*.*?\\*/ a multiline comment\n        )\n        [ \\t]*        and any subsequent comments if only separated by whitespace\n    )+\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1464869006, "last_edit_date": 1592644375, "creation_date": 1464868281, "answer_id": 37591082, "question_id": 37576721, "link": "https://stackoverflow.com/questions/37576721/find-java-comments-multi-and-single-line-using-regex/37591082#37591082", "title": "Find java comments (multi and single line) using regex", "body": "<p>The regex you are looking for is one that allows the comment beginning (<code>//</code> or <code>/*</code>) to appear anywhere except in each of the regexps that result in tokens that can contain those substrings inside.  If you look at the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html\" rel=\"nofollow noreferrer\">lexical structure of java language</a>, you'll see that the only lexical element that can contain a <code>//</code> or a <code>/*</code> inside is the string literal, so to match a comment inside a string you have to match all the string (for not having a string literal <strong>before</strong> your match that happens to begin a string literal --- and contain your comment inside)</p>\n<p>So, the string <em>before</em> your comment should be composed of any valid string that don't begin a string literal (without ending) and so, it can be rounded by any number of string literals with any string that doesn't form a string literal in between.  If you consider a string literal, it should be matched by the following:</p>\n<pre><code>\\&quot;()*\\&quot;\n</code></pre>\n<p>and the inside of the parenthesis must be filled with something that cannot be a <code>\\n</code>, a single <code>&quot;</code>, a single <code>\\</code>, and also not a unicode literal <code>\\uxxxx</code> that results in a valid <code>&quot;</code> (java forbids to use normal java characters to be encoded as unicode sequences, so this last case doesn't apply) but can be a escaped <code>\\\\</code> or a escaped <code>\\&quot;</code>, so this leads to</p>\n<pre><code>\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;\n</code></pre>\n<p>and this can be repeated any number of times optionaly, and preceded of any character not being a <code>&quot;</code> (that should begin the last part considered):</p>\n<pre><code>([^\\\\&quot;](\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;)?)*\n</code></pre>\n<p>well, the previous part to our valid string should be matched by this string, and then comes the comment string, it can be any of two forms:</p>\n<pre><code>\\/\\/[^\\n]*$\n</code></pre>\n<p>or</p>\n<pre><code>/\\*([^\\*]|\\*[^\\/])*\\*\\/\n</code></pre>\n<p>(this is, a slash, an asterisk (escaped), and any number of things that can be: either something different than a <code>*</code> or <code>*</code> followed by something not a <code>/</code>, to finally reach a <code>*/</code> sequence)</p>\n<p>These can be grouped in an alternative group, as in:</p>\n<pre><code>(\\/\\/[^\\n]*\\n|\\/\\*([^\\*]|\\*[^\\/])*\\*\\/)\n</code></pre>\n<p>finally, our expression shows:</p>\n<pre><code>^([^\\\\&quot;](\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;)?)*(\\/\\/[^\\n]*|\\/\\*([^\\*]|\\*[^/])*\\*\\/)\n</code></pre>\n<p>But you should be careful that your matched comment begins not at the beginning, but in the 4th group (in the mark of the 4th left parenthesis) and the regexp should match the string from the beginning, see <a href=\"https://regex101.com/r/gV3uM4/1\" rel=\"nofollow noreferrer\">demo</a></p>\n<h1>Note</h1>\n<p>Think you are matching not only the comment, but the text before.  This makes the result match to be composed of what is before the matching you want and the matched.  Also think that if you try this regexp with several comments in sequence, it will match only the last, as we have not covered the case of a  <code>/* ... /* .... */</code> sequence (the comment is also something that can be embedded into a comment, but considering also this case will make you hate regexps forever.  The correct way to cope with this problem is to write a <code>lex/flex</code> specification to get the java tokens and you'll only get them, but this is out of scope in this explanation.  See an probably valid example <a href=\"https://regex101.com/r/gV3uM4/3\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 157, "user_id": 4480167, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f3e50c32cf2d2fde774aa23b7707c44?s=128&d=identicon&r=PG&f=1", "display_name": "stumped221", "link": "https://stackoverflow.com/users/4480167/stumped221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464870051, "creation_date": 1464807467, "last_edit_date": 1464810561, "question_id": 37576721, "link": "https://stackoverflow.com/questions/37576721/find-java-comments-multi-and-single-line-using-regex", "title": "Find java comments (multi and single line) using regex", "body": "<p>I found the following regex online at <a href=\"http://regexlib.com/\" rel=\"nofollow\">http://regexlib.com/</a></p>\n\n<pre><code>(\\/\\*(\\s*|.*?)*\\*\\/)|(\\/\\/.*)\n</code></pre>\n\n<p>It seems to work well for the following matches:</p>\n\n<pre><code>// Compute the exam average score for the midterm exam\n\n/**\n* The HelloWorld program implements an application that\n*/\n</code></pre>\n\n<p>BUT it also tends to match </p>\n\n<pre><code>http://regexr.com/foo.html?q=bar\n</code></pre>\n\n<p>at least starting at the <code>//</code></p>\n\n<p>I'm new to regex and a total infant, but I read that if you put a caret at the beginning it forces the match to start at the beginning of the line, however this doesn't seem to work on RegExr.  </p>\n\n<p>I'm using the following:</p>\n\n<pre><code>^(\\/\\*(\\s*|.*?)*\\*\\/)|(\\/\\/.*)$\n</code></pre>\n"}, {"tags": ["python", "forms", "http-headers", "robotframework"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6224915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kfCjH.jpg?s=128&g=1", "display_name": "Avatar User04", "link": "https://stackoverflow.com/users/6224915/avatar-user04"}, "is_accepted": false, "score": 0, "last_activity_date": 1464945567, "creation_date": 1464945567, "answer_id": 37610531, "question_id": 37576697, "link": "https://stackoverflow.com/questions/37576697/python-robo-framework-how-to-sent-form-data-in-http-request/37610531#37610531", "title": "python robo framework - how to sent form data in http request?", "body": "<p>It has been resolved by doing the following in the code </p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>url = '<a href=\"http://httpbin.org/post\" rel=\"nofollow\">http://httpbin.org/post</a>'\n      files = {'file': open('report.xls', 'rb')}</p>\n      \n      <p>r = requests.post(url, files=files)\n      r.text</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 6224915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kfCjH.jpg?s=128&g=1", "display_name": "Avatar User04", "link": "https://stackoverflow.com/users/6224915/avatar-user04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1464945567, "creation_date": 1464807399, "last_edit_date": 1464807891, "question_id": 37576697, "link": "https://stackoverflow.com/questions/37576697/python-robo-framework-how-to-sent-form-data-in-http-request", "title": "python robo framework - how to sent form data in http request?", "body": "<p>I'm trying to automate the following flow in python robo , using requests 'requests' </p>\n\n<p><code>curl -X POST https://localhost:12443/api/customdata/upload/userid/user_values --form \"user_data=@user1_data_values\"</code></p>\n\n<p><code>user1_data_values</code> is the file which will have details of some information which user want to sent to server for processing </p>\n\n<p>I am able to do post request in my automation code without 'form'</p>\n\n<pre><code>&gt;&gt;&gt;&gt;&gt; POST request using URL: https://localhost:12443/api/customdata/upload/userid/user_values\n06/02/2016 00:00:48 [DEBUG] [user_data] - &gt;&gt;&gt;&gt;&gt; Data in request: None\n06/02/2016 00:00:48 [DEBUG] [user_data] - &lt;&lt;&lt;&lt;&lt; Received 200 HTTP code\n</code></pre>\n\n<p>I don't have any clues to how to send the form data &amp; where to keep the file (<code>user1_data_values</code>) and how to call the file in test cases.</p>\n"}, {"tags": ["python", "r", "pandas", "memory"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1464808907, "last_edit_date": 1495542694, "creation_date": 1464807769, "answer_id": 37576808, "question_id": 37576661, "link": "https://stackoverflow.com/questions/37576661/python-pandas-memory-subsetting-and-releasing-main-data-frame/37576808#37576808", "title": "Python Pandas memory - subsetting and releasing main data frame", "body": "<p>you can try the following trick (if you can read the whole CSV file into memory):</p>\n\n<pre><code>DF = pd.read_csv(\"Test.csv\").query(\"A == 'Y'\")\n</code></pre>\n\n<p>Alternatively, you can read your data in chunks, using <a href=\"https://stackoverflow.com/a/25962187/5741205\">read_csv()</a></p>\n\n<p>But i would strongly recommend you to save your data in HDF5 Table format (you may also want to compress it) - then you could read your data conditionally, using <a href=\"http://pandas.pydata.org/pandas-docs/stable/io.html#advanced-queries\" rel=\"nofollow noreferrer\">where</a> parameter in <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_hdf.html\" rel=\"nofollow noreferrer\">read_hdf()</a> function.</p>\n\n<p>For example:</p>\n\n<pre><code>df = pd.read_hdf('/path/to/my_storage.h5', 'my_data', where=\"A == 'Y'\")\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/37012035/5741205\">Here</a> you can find some examples and a comparison of usage for different storage options</p>\n"}], "owner": {"reputation": 1259, "user_id": 5209231, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/04622c078723ee937e8cf088706d19dd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5209231/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 37576808, "answer_count": 1, "score": 0, "last_activity_date": 1464808907, "creation_date": 1464807263, "last_edit_date": 1464807441, "question_id": 37576661, "link": "https://stackoverflow.com/questions/37576661/python-pandas-memory-subsetting-and-releasing-main-data-frame", "title": "Python Pandas memory - subsetting and releasing main data frame", "body": "<p>I have Pandas data frame big data frame loaded into memory. \nTrying to utilize memory more efficient way.</p>\n\n<p>For this purposes, i won't use this data frame after i will subset from this data frame only rows i am interested are:</p>\n\n<pre><code>DF = pd.read_csv(\"Test.csv\")\nDF = DF[DF['A'] == 'Y']\n</code></pre>\n\n<p>Already tried this solution but not sure if it most effective.\nIs solution above is most efficient for memory usage?\nPlease advice.</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 7900, "user_id": 2259934, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/lqiMo.jpg?s=128&g=1", "display_name": "Paul Becotte", "link": "https://stackoverflow.com/users/2259934/paul-becotte"}, "edited": false, "score": 0, "creation_date": 1464808259, "post_id": 37576657, "comment_id": 62640794, "body": "sqlalchemy doesn&#39;t set up the tables for you, it just issues sql.  The fact that the linked answer worked tells you that the field existed (if the field didn&#39;t exist, the issued SQL would have thrown an error).  The field is only a primary key if you set it up that way when you issued the DDL to create the table.  Modifying a row will not issue any DDL or change your schema in any way."}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 0, "creation_date": 1464813133, "post_id": 37576657, "comment_id": 62643327, "body": "Why do you want to validate the schema?"}], "answers": [{"tags": [], "owner": {"reputation": 1452, "user_id": 1591367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BDi5e.png?s=128&g=1", "display_name": "MOCKBA", "link": "https://stackoverflow.com/users/1591367/mockba"}, "is_accepted": false, "score": 0, "last_activity_date": 1465070133, "creation_date": 1465070133, "answer_id": 37634443, "question_id": 37576657, "link": "https://stackoverflow.com/questions/37576657/validation-when-updating-sqlalchemy-row/37634443#37634443", "title": "Validation when updating SQLAlchemy row", "body": "<p>to extract the list of columns based on ORM class definition:</p>\n\n<pre><code>from sqlalchemy import inspect\nmapper = inspect(your_orm_class)\ncolumns = [i.key for i in mapper.attrs]\n</code></pre>\n\n<p>to extract primary key name based on ORM class definition:</p>\n\n<pre><code>from sqlalchemy.orm import class_mapper\npk = class_mapper(your_orm_class).primary_key[0].name\n</code></pre>\n\n<p>then modify your validation function / class to check the input against those values.</p>\n"}], "owner": {"reputation": 1740, "user_id": 3061818, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fd883788c39828b216d2b8f80492b80d?s=128&d=identicon&r=PG&f=1", "display_name": "ukrutt", "link": "https://stackoverflow.com/users/3061818/ukrutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465070133, "creation_date": 1464807246, "last_edit_date": 1495541757, "question_id": 37576657, "link": "https://stackoverflow.com/questions/37576657/validation-when-updating-sqlalchemy-row", "title": "Validation when updating SQLAlchemy row", "body": "<p>I'm successfully able to update a row in my SQLAlchemy-driven database (using the answers to <a href=\"https://stackoverflow.com/questions/9667138/how-to-update-sqlalchemy-row-entry\">How to update SQLAlchemy row entry?</a>).  Before I'm happy, I want to do some validation.  Specifically, I want to</p>\n\n<ul>\n<li><p>make sure that the field exists in this table (I think I can do this with <code>hasattr</code>)</p></li>\n<li><p>make sure that the field is not a primary key</p></li>\n</ul>\n"}, {"tags": ["python", "nlp", "nltk", "importerror", "textblob"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 3, "creation_date": 1464808287, "post_id": 37576649, "comment_id": 62640804, "body": "show the entire traceback please."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1464820556, "post_id": 37576649, "comment_id": 62646646, "body": "Try: <code>pip install -U nltk</code>"}], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 4518186, "user_type": "registered", "profile_image": "https://graph.facebook.com/649937893/picture?type=large", "display_name": "Nitin Kashyap", "link": "https://stackoverflow.com/users/4518186/nitin-kashyap"}, "is_accepted": false, "score": 2, "last_activity_date": 1464808295, "creation_date": 1464808295, "answer_id": 37576944, "question_id": 37576649, "link": "https://stackoverflow.com/questions/37576649/when-i-try-to-import-textblob-i-get-importerror-cannot-import-name-compat-wh/37576944#37576944", "title": "When I try to import TextBlob I get &quot;ImportError: cannot import name compat&quot;. What does this mean? How can I fix it?", "body": "<p>Are you sure textblob is installed correctly? You might want to try </p>\n\n<pre><code>pip install -U textblob\npython -m textblob.download_corpora\n</code></pre>\n\n<p>Try running the code afterwards, it should work correctly.</p>\n"}], "owner": {"reputation": 650, "user_id": 5472184, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10207779348992508/picture?type=large", "display_name": "Danny David Leybzon", "link": "https://stackoverflow.com/users/5472184/danny-david-leybzon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2939, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464808295, "creation_date": 1464807236, "last_edit_date": 1495541370, "question_id": 37576649, "link": "https://stackoverflow.com/questions/37576649/when-i-try-to-import-textblob-i-get-importerror-cannot-import-name-compat-wh", "title": "When I try to import TextBlob I get &quot;ImportError: cannot import name compat&quot;. What does this mean? How can I fix it?", "body": "<p>From what I can tell \"compat\" is some component of NLTK, TextBlob is built on. Strangely, I've imported TextBlob in the past, so this must be something recent. I've updated both TextBlob and NLTK to their most recent versions, so that's not what the problem is.</p>\n\n<p>Similar questions such as <a href=\"https://stackoverflow.com/questions/35100967/nltk-cant-using-importerror-cannot-import-name-compat\">this one</a> remain basically unresolved, since the recommendation is basically \"don't import all of NLTK\".</p>\n\n<p>Edit: My code is as follows</p>\n\n<p><code>from textblob import TextBlob</code></p>\n"}]