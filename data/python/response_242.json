[{"tags": ["python", "python-3.x", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 22919, "user_id": 7093741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9cJi0.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7093741/chris"}, "edited": false, "score": 1, "creation_date": 1567037348, "post_id": 57701334, "comment_id": 101846508, "body": "Try <code>yahoo.reset_index()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "is_accepted": true, "score": 0, "last_activity_date": 1567103970, "creation_date": 1567103970, "answer_id": 57716121, "question_id": 57701334, "link": "https://stackoverflow.com/questions/57701334/how-can-i-modify-the-index-of-my-pandas-dataframe/57716121#57716121", "title": "How can I modify the index of my pandas dataframe?", "body": "<p>Chris comment work like a charm:</p>\n\n<p>yahoo.reset_index()</p>\n"}], "owner": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 57716121, "answer_count": 1, "score": 2, "last_activity_date": 1572630279, "creation_date": 1567036602, "last_edit_date": 1572630279, "question_id": 57701334, "link": "https://stackoverflow.com/questions/57701334/how-can-i-modify-the-index-of-my-pandas-dataframe", "title": "How can I modify the index of my pandas dataframe?", "body": "<p>I have this python code </p>\n\n<pre><code>def get_yahoo(tickers, startdate, enddate):\n    from pandas_datareader import data as pdr\n    import pandas as pd\n    def data(ticker):\n        return(pdr.get_data_yahoo(ticker, start=startdate, end=enddate))\n    datas=map(data,tickers)\n    return(pd.concat(datas,keys=tickers,names=['Ticker','Date']))\n\n\n\ntickers_example=['MSFT', 'AAPL']\nyahoo=get_yahoo(tickers_example, \"2017-01-01\", \"2018-01-01\")\n</code></pre>\n\n<p>That is returning a pandas dataframe with this \"composed (ticker,date)\" index:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XI4lN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XI4lN.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I need my pandas Dataframe with the index and columns with a format like that:\n<a href=\"https://i.stack.imgur.com/PsK1E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PsK1E.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I get that?</p>\n"}, {"tags": ["python", "tkinter", "python-3.6"], "comments": [{"owner": {"reputation": 9342, "user_id": 646382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab24c0e23c30888c23e2d4fe9991cf2b?s=128&d=identicon&r=PG", "display_name": "jonsca", "link": "https://stackoverflow.com/users/646382/jonsca"}, "edited": false, "score": 0, "creation_date": 1567039239, "post_id": 57701324, "comment_id": 101846830, "body": "Is there some reason why you are writing what appear to be comments in quotes?"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1567049462, "post_id": 57701324, "comment_id": 101848600, "body": "<code>geometry</code> takes a <code>str</code>: <code>top.geometry(f&#39;{x}x{y}&#39;)</code>, then you don&#39;t have to change the rest of your code."}], "answers": [{"tags": [], "owner": {"reputation": 1539, "user_id": 11616717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cdbe1b931109671227d3261ffe4cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Axois", "link": "https://stackoverflow.com/users/11616717/axois"}, "is_accepted": false, "score": 2, "last_activity_date": 1567045151, "creation_date": 1567045151, "answer_id": 57702134, "question_id": 57701324, "link": "https://stackoverflow.com/questions/57701324/an-application-to-economics-my-original-application/57702134#57702134", "title": "An application to Economics. My original application", "body": "<p>The definition of <code>geometry</code> is the following</p>\n\n<blockquote>\n  <p>Set geometry to NEWGEOMETRY of the form =widthxheight+x+y. Return\n          current value if None is given.</p>\n</blockquote>\n\n<p>Hence to set the value of your window to be 1650x1100, you can simply pass it into the <code>geometry</code> method.</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import *\nimport math\nfrom math import *\nimport matplotlib \nfrom matplotlib import *\nfrom pylab import plot, show\n\n# Define Empty List\nx_Data = []\ny_Data = []\n# Create Window and Define it's Size\ntop = tk.Tk()\ntop.title(\"Inflation Adjusted Calculator\")\ntop.geometry('1650x1100')\nmainloop() \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11991680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FRHud.jpg?s=128&g=1", "display_name": "Johnny4Q", "link": "https://stackoverflow.com/users/11991680/johnny4q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567048472, "creation_date": 1567036423, "last_edit_date": 1567048472, "question_id": 57701324, "link": "https://stackoverflow.com/questions/57701324/an-application-to-economics-my-original-application", "title": "An application to Economics. My original application", "body": "<p>My Program gives me an error when I run it saying that I passed 3 arguments into top.geometry(x,y) when I only have passed two.</p>\n\n<pre><code>I've tried using \"foo\" and that made it worse. What I am trying to do is create a tkinter application that will calculate the amount of money adjusted for inflation at a future year.\n\n    #!/usr/bin/env python3\n    import tkinter as tk\n    from tkinter import *\n    import math\n    from math import *\n    import matplotlib \n    from matplotlib import *\n    from pylab import plot, show\n\n    \"set window geometry variables\"\n    (x,y) = (1650,1100)\n    \"Define Empty List\"\n    x_Data = []\n    y_Data = []\n    \"Create Window and Define it's Size\"\n    top = tk.Tk()\n    top.title(\"Inflation Adjusted Calculator\")\n    top.geometry(x,y)\n\n\n\n\nTraceback (most recent call last):\n  File \"/home/jacob/Documents/Python Programs/Inflation_Calculator_Program.py\", line 17, in &lt;module&gt;\n    top.geometry(x,y)\nTypeError: wm_geometry() takes from 1 to 2 positional arguments but 3 were given\n</code></pre>\n"}, {"tags": ["python", "patsy"], "answers": [{"tags": [], "owner": {"reputation": 22919, "user_id": 7093741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9cJi0.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7093741/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1567036852, "creation_date": 1567036852, "answer_id": 57701356, "question_id": 57701323, "link": "https://stackoverflow.com/questions/57701323/moving-a-bunch-of-distinct-items-to-the-end-of-a-python-list/57701356#57701356", "title": "Moving a bunch of distinct items to the end of a python list", "body": "<p>If your logic is to put any item that contains <em>country</em> to the back, use <code>sorted</code> with key:</p>\n\n<pre><code>l = ['Intercept', 'a', 'country[T.BE]', 'country[T.CY]', 'country[T.DE]', 'b', 'c', 'd', 'e']\nsorted(l, key=lambda x: 'country' in x)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['Intercept',\n 'a',\n 'b',\n 'c',\n 'd',\n 'e',\n 'country[T.BE]',\n 'country[T.CY]',\n 'country[T.DE]']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1548, "user_id": 4512454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vph2YroPovY/AAAAAAAAAAI/AAAAAAAAApg/9uKkj1GGwn8/photo.jpg?sz=128", "display_name": "dmontaner", "link": "https://stackoverflow.com/users/4512454/dmontaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1567037353, "last_edit_date": 1567037353, "creation_date": 1567037018, "answer_id": 57701379, "question_id": 57701323, "link": "https://stackoverflow.com/questions/57701323/moving-a-bunch-of-distinct-items-to-the-end-of-a-python-list/57701379#57701379", "title": "Moving a bunch of distinct items to the end of a python list", "body": "<p>Here I assume having or not the <code>country[</code> text is what you want to split... then you can use:</p>\n\n<pre><code>li = ['Intercept', 'a', 'country[T.BE]', 'country[T.CY]', 'country[T.DE]', 'b', 'c', 'd', 'e']\n[x for x in li if not 'country[' in x] + [x for x in li if 'country[' in x]\n</code></pre>\n"}], "owner": {"reputation": 1806, "user_id": 5318986, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-OHjhTntiSho/AAAAAAAAAAI/AAAAAAAAB-k/fdjsrqR3A_0/photo.jpg?sz=128", "display_name": "Martien Lubberink", "link": "https://stackoverflow.com/users/5318986/martien-lubberink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 57701356, "answer_count": 2, "score": 0, "last_activity_date": 1568819162, "creation_date": 1567036406, "last_edit_date": 1567039385, "question_id": 57701323, "link": "https://stackoverflow.com/questions/57701323/moving-a-bunch-of-distinct-items-to-the-end-of-a-python-list", "title": "Moving a bunch of distinct items to the end of a python list", "body": "<p>I have this python list:</p>\n\n<p><code>['Intercept', 'a', 'country[T.BE]', 'country[T.CY]', 'country[T.DE]', 'b', 'c', 'd', 'e']</code></p>\n\n<p>I want the country items at the end:</p>\n\n<p><code>['Intercept', 'a', 'b', 'c', 'd', 'e', 'country[T.BE]', 'country[T.CY]', 'country[T.DE]']</code></p>\n\n<p>How to accomplish this?</p>\n\n<p>(Note, the items are column headers of a dataframe that I will use for regression analysis. The column names and the weird ordering are generated by patsy.dmatrices.)</p>\n\n<p>I tried sorting, pop, del, and list comprehension, but to no avail. In this case I decided not to explain what I did to solve this problem and did not work. It is a simple problem, and unlike one commentators, I do not have decades of programming experience.</p>\n"}, {"tags": ["python", "bundle", "pyinstaller"], "comments": [{"owner": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1567062895, "post_id": 57701301, "comment_id": 101852416, "body": "This can help: <a href=\"https://stackoverflow.com/questions/57611000/include-data-with-spec-file-using-pyinstaller/57634809#57634809\" title=\"include data with spec file using pyinstaller\">stackoverflow.com/questions/57611000/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 11692180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc0d0d20ad920845d5f14bc135eeb80?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy95", "link": "https://stackoverflow.com/users/11692180/tommy95"}, "reply_to_user": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1567177271, "post_id": 57701301, "comment_id": 101898588, "body": "Hi, I had seen the post thanks, but even after reading it it&#39;s still quite obscure how I should do it. His code isn&#39;t commented enough for me"}, {"owner": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1567179505, "post_id": 57701301, "comment_id": 101899642, "body": "Add a minimal version of your code so we can help."}, {"owner": {"reputation": 11, "user_id": 11692180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc0d0d20ad920845d5f14bc135eeb80?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy95", "link": "https://stackoverflow.com/users/11692180/tommy95"}, "reply_to_user": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1567182764, "post_id": 57701301, "comment_id": 101900954, "body": "Thanks, solved the problem thanks to this page: <a href=\"https://stackoverflow.com/questions/53587322/how-do-i-include-files-with-pyinstaller\" title=\"how do i include files with pyinstaller\">stackoverflow.com/questions/53587322/&hellip;</a>  Will update my post with solution"}, {"owner": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1567183235, "post_id": 57701301, "comment_id": 101901147, "body": "It is better to add the answer as <b>Answer</b>, so can help others with a similar problem."}, {"owner": {"reputation": 11, "user_id": 11692180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc0d0d20ad920845d5f14bc135eeb80?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy95", "link": "https://stackoverflow.com/users/11692180/tommy95"}, "reply_to_user": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1567183448, "post_id": 57701301, "comment_id": 101901237, "body": "Followed your advice, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11692180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc0d0d20ad920845d5f14bc135eeb80?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy95", "link": "https://stackoverflow.com/users/11692180/tommy95"}, "is_accepted": false, "score": 0, "last_activity_date": 1567183397, "creation_date": 1567183397, "answer_id": 57730479, "question_id": 57701301, "link": "https://stackoverflow.com/questions/57701301/how-to-choose-file-path-in-python-script-when-using-pyinstaller/57730479#57730479", "title": "How to choose file path in python script when using pyinstaller?", "body": "<p>I Solved it thanks to this page: <a href=\"https://stackoverflow.com/questions/53587322/how-do-i-include-files-with-pyinstaller\">How do I include files with pyinstaller?</a></p>\n\n<p>I put the database.xlsx in a file called database at the same directory level as where ecobel.py is.</p>\n\n<p>I call database.xlsx this way in my ecobel.py script:</p>\n\n<pre><code>import sys\nif getattr(sys, 'frozen', False):\n    database = xlrd.open_workbook(os.path.join(sys._MEIPASS,'database/database.xlsx'))\nelse:\n    database = xlrd.open_workbook('database/database.xlsx')\n</code></pre>\n\n<p>Then I type this in the command prompt: </p>\n\n<pre><code>--clean -y -n \"ecobel\" --add-data=\"database\\database.xlsx;database\" ecobel.py\n</code></pre>\n\n<p>\"ecobel\" will put the .exe file in a folder called ecobel. Don't know what -y and -n stand for, nor what --clean does, if someone can help.</p>\n"}], "owner": {"reputation": 11, "user_id": 11692180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc0d0d20ad920845d5f14bc135eeb80?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy95", "link": "https://stackoverflow.com/users/11692180/tommy95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 504, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567183419, "creation_date": 1567036184, "last_edit_date": 1567183419, "question_id": 57701301, "link": "https://stackoverflow.com/questions/57701301/how-to-choose-file-path-in-python-script-when-using-pyinstaller", "title": "How to choose file path in python script when using pyinstaller?", "body": "<p>I have a python script that takes data from an excel file (database.xlsx). I want to freeze the script (ecobel.py) using pyinstaller.</p>\n\n<p>I'd like to know if in the python script I should use the current path where the database file is or if I should reference where I'm putting it in the executable path. I'm currently just calling the path where I'd normally put the database file on my laptop.</p>\n\n<p>In addition, after entering the right path, I'm currently typing this in the comand prompt:</p>\n\n<pre><code>--onefile --add-data database.xlsx;. ecobel.py\n</code></pre>\n\n<p>which returns \"No such file or directory: 'database.xlsx'\" when launching the formed executable file.</p>\n"}, {"tags": ["python", "apache-storm", "streamparse"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11991695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1d188fd462bb4ae4acba4bb368c296?s=128&d=identicon&r=PG&f=1", "display_name": "z11373", "link": "https://stackoverflow.com/users/11991695/z11373"}, "edited": false, "score": 0, "creation_date": 1567101378, "post_id": 57714258, "comment_id": 101872941, "body": "Thanks @Re&#39;em! I have looked at our Python code, and I don&#39;t see any print statement there. However, you&#39;re right, earlier I thought it&#39;s network issue, but then I scaled down to one node and still see the error, I also think something wrong with the JSON serialization between those processes as you said. I looked at streamparse log and storm worker log, and yet still not able to figure out the culprit. For extra info, it worked fine earlier, then I deployed my change and start seein the error, but even after revert it back, it still gave same error, so likely not due to my change."}], "tags": [], "owner": {"reputation": 150, "user_id": 1761505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66b5a3c319b4b6e7a97dbdc8a2898d6?s=128&d=identicon&r=PG", "display_name": "Re&#39;em", "link": "https://stackoverflow.com/users/1761505/reem"}, "is_accepted": false, "score": 0, "last_activity_date": 1567095722, "creation_date": 1567095722, "answer_id": 57714258, "question_id": 57701296, "link": "https://stackoverflow.com/questions/57701296/how-to-troubleshoot-apache-storm-worker-crash/57714258#57714258", "title": "how to troubleshoot apache storm worker crash", "body": "<p>Whenever I see a Serializer Exception in external process bolts (e.g. Python bolts), I suspect the external process is printing something to the stdout stream.</p>\n\n<p>Storm utilizes stdin/stdout of bolt processes to do its own communication, any logging in Python bolts should be done to stderr or to a file.</p>\n"}], "owner": {"reputation": 1, "user_id": 11991695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1d188fd462bb4ae4acba4bb368c296?s=128&d=identicon&r=PG&f=1", "display_name": "z11373", "link": "https://stackoverflow.com/users/11991695/z11373"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567095722, "creation_date": 1567036127, "last_edit_date": 1567043401, "question_id": 57701296, "link": "https://stackoverflow.com/questions/57701296/how-to-troubleshoot-apache-storm-worker-crash", "title": "how to troubleshoot apache storm worker crash", "body": "<p>I have a python code running (via streamparse) on Apache Storm 1.1.1, and recently notice the Storm worker keep crashing. Below is what I found from the worker log. I run out of ideas what can be the culprit, as the log doesn't give me enough clue. The topology worked fine before. Any idea where else I can start looking into?</p>\n\n<pre><code>2019-08-28 15:05:32.947 o.a.s.s.ShellSpout Thread-11-event_spout-executor[10 10] [INFO] Launched subprocess with pid 10054\n2019-08-28 15:05:32.951 o.a.s.d.executor Thread-11-event_spout-executor[10 10] [INFO] Opened spout event_spout:(10)\n2019-08-28 15:05:32.953 o.a.s.d.executor Thread-11-event_spout-executor[10 10] [INFO] Activating spout event_spout:(10)\n2019-08-28 15:05:32.953 o.a.s.s.ShellSpout Thread-11-event_spout-executor[10 10] [INFO] Start checking heartbeat...\n2019-08-28 15:05:32.961 o.a.s.util Thread-11-event_spout-executor[10 10] [ERROR] Async loop died!\njava.lang.RuntimeException: pid:10054, name:event_spout exitCode:-1, errorString:\n        at org.apache.storm.spout.ShellSpout.querySubprocess(ShellSpout.java:218) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.spout.ShellSpout.sendSyncCommand(ShellSpout.java:145) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.spout.ShellSpout.activate(ShellSpout.java:266) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.daemon.executor$fn__4962$fn__4977$fn__5008.invoke(executor.clj:641) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.util$async_loop$fn__557.invoke(util.clj:484) [storm-core-1.1.1.jar:1.1.1]\n        at clojure.lang.AFn.run(AFn.java:22) [clojure-1.7.0.jar:?]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\nCaused by: java.lang.RuntimeException: org.apache.storm.multilang.NoOutputException: Pipe to subprocess seems to be broken! No output read.\nSerializer Exception:\n        at org.apache.storm.utils.ShellProcess.readShellMsg(ShellProcess.java:127) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.spout.ShellSpout.querySubprocess(ShellSpout.java:183) ~[storm-core-1.1.1.jar:1.1.1]\n        ... 6 more\n2019-08-28 15:05:32.968 o.a.s.d.executor Thread-11-event_spout-executor[10 10] [ERROR]\njava.lang.RuntimeException: pid:10054, name:event_spout exitCode:-1, errorString:\n        at org.apache.storm.spout.ShellSpout.querySubprocess(ShellSpout.java:218) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.spout.ShellSpout.sendSyncCommand(ShellSpout.java:145) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.spout.ShellSpout.activate(ShellSpout.java:266) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.daemon.executor$fn__4962$fn__4977$fn__5008.invoke(executor.clj:641) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.util$async_loop$fn__557.invoke(util.clj:484) [storm-core-1.1.1.jar:1.1.1]\n        at clojure.lang.AFn.run(AFn.java:22) [clojure-1.7.0.jar:?]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\nCaused by: java.lang.RuntimeException: org.apache.storm.multilang.NoOutputException: Pipe to subprocess seems to be broken! No output read.\nSerializer Exception:\n        at org.apache.storm.utils.ShellProcess.readShellMsg(ShellProcess.java:127) ~[storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.spout.ShellSpout.querySubprocess(ShellSpout.java:183) ~[storm-core-1.1.1.jar:1.1.1]\n        ... 6 more\n2019-08-28 15:05:33.009 o.a.s.util Thread-11-event_spout-executor[10 10] [ERROR] Halting process: (\"Worker died\")\njava.lang.RuntimeException: (\"Worker died\")\n        at org.apache.storm.util$exit_process_BANG_.doInvoke(util.clj:341) [storm-core-1.1.1.jar:1.1.1]\n        at clojure.lang.RestFn.invoke(RestFn.java:423) [clojure-1.7.0.jar:?]\n        at org.apache.storm.daemon.worker$fn__5632$fn__5633.invoke(worker.clj:763) [storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.daemon.executor$mk_executor_data$fn__4848$fn__4849.invoke(executor.clj:276) [storm-core-1.1.1.jar:1.1.1]\n        at org.apache.storm.util$async_loop$fn__557.invoke(util.clj:494) [storm-core-1.1.1.jar:1.1.1]\n        at clojure.lang.AFn.run(AFn.java:22) [clojure-1.7.0.jar:?]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\n2019-08-28 15:05:33.018 o.a.s.d.worker Thread-16 [INFO] Shutting down worker tmon-4-1567019114 ba5b3695-b390-4c3e-9d92-af0771f17b86 6700\n</code></pre>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11991685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6b57744f02c4b09719271a43d083e2?s=128&d=identicon&r=PG&f=1", "display_name": "dzudzitsu", "link": "https://stackoverflow.com/users/11991685/dzudzitsu"}, "edited": false, "score": 0, "creation_date": 1567036655, "post_id": 57701330, "comment_id": 101846408, "body": "Bingo, you are a regex master!"}], "tags": [], "owner": {"reputation": 5399, "user_id": 3248412, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3yGCF.jpg?s=128&g=1", "display_name": "vs97", "link": "https://stackoverflow.com/users/3248412/vs97"}, "is_accepted": true, "score": 1, "last_activity_date": 1567037037, "last_edit_date": 1567037037, "creation_date": 1567036529, "answer_id": 57701330, "question_id": 57701294, "link": "https://stackoverflow.com/questions/57701294/how-to-separate-interfaces-names/57701330#57701330", "title": "How to separate interfaces names", "body": "<p>How about something as simple as this?</p>\n\n<pre><code>(?&lt;=\\d: )\\w+\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/dnFj3F/1\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p>Explanation:</p>\n\n<pre><code>(?&lt;=\\d: )   Positive lookbehind - start with a number, then : and whitespace, but this is not captured.\n\\w+         Match all [a-zA-Z0-9], so until the next :\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28, "user_id": 11964087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e6e6a54553e34cbb14d02ba458370bf?s=128&d=identicon&r=PG", "display_name": "nocut", "link": "https://stackoverflow.com/users/11964087/nocut"}, "is_accepted": false, "score": 0, "last_activity_date": 1567060791, "last_edit_date": 1567060791, "creation_date": 1567060005, "answer_id": 57704182, "question_id": 57701294, "link": "https://stackoverflow.com/questions/57701294/how-to-separate-interfaces-names/57704182#57704182", "title": "How to separate interfaces names", "body": "<p><em><code>[user@localhost ~]# ip link show | cut -f 2 -d \":\" | grep -v [0-9][0-9]</code></em></p>\n\n<p>The above command should be suffice to grep output required by you.</p>\n"}], "owner": {"reputation": 45, "user_id": 11991685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6b57744f02c4b09719271a43d083e2?s=128&d=identicon&r=PG&f=1", "display_name": "dzudzitsu", "link": "https://stackoverflow.com/users/11991685/dzudzitsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57701330, "answer_count": 2, "score": 1, "last_activity_date": 1567060791, "creation_date": 1567036107, "question_id": 57701294, "link": "https://stackoverflow.com/questions/57701294/how-to-separate-interfaces-names", "title": "How to separate interfaces names", "body": "<p>As a result of my bash 'ip link show' command I got a string which contains list of all my ip interfaces.\nI want to somehow separate the names of each single interfaces name.\nHere is the string: </p>\n\n<pre><code>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\nlink/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n2: enp7s0f1: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN mode DEFAULT group default qlen 1000\nlink/ether f0:76:1c:35:7b:76 brd ff:ff:ff:ff:ff:ff\n3: wlp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000\nlink/ether ac:b5:7d:0f:2d:6b brd ff:ff:ff:ff:ff:ff\n</code></pre>\n\n<p>Names of the interfaces may vary. Currently they are: lo, enp7s0f1, wlp8s0.</p>\n\n<p>I tried to split the string with the regex:</p>\n\n<pre><code>[0-9]{2}[:]|[0-9]{1}[:]\n</code></pre>\n\n<p>And then, after 1:, 2:, 3: first thing will be interface names but it also splits me MAC addresses and generate a mess.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "visual-studio-code"], "comments": [{"owner": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1567096920, "post_id": 57701282, "comment_id": 101871072, "body": "Did you try deletting *.pyc files and <code>__pycache__</code> folders? Sometimes, those two hold the modification. When you re-run the software, they will be created again."}, {"owner": {"reputation": 831, "user_id": 1837856, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c66f35382eeef07837d10aa4f4694edf?s=128&d=identicon&r=PG&f=1", "display_name": "masotann", "link": "https://stackoverflow.com/users/1837856/masotann"}, "reply_to_user": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1567098696, "post_id": 57701282, "comment_id": 101871840, "body": "Thanks for the comment @AlexanderSantos. It looks like when I run the cells, *.pyc does not get created. As a test, I ran the script via <code>python test.py</code> to create the <code>__pycache__</code> folder and did your suggestions.  Unfortunately it didn&#39;t change the output of the script"}, {"owner": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1567099782, "post_id": 57701282, "comment_id": 101872296, "body": "This may be an issue from VSCode&#39;s Python extension. I highly recommend to <a href=\"https://github.com/microsoft/vscode-python/issues\" rel=\"nofollow noreferrer\">create an issue on their repository (GitHub)</a>."}, {"owner": {"reputation": 831, "user_id": 1837856, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c66f35382eeef07837d10aa4f4694edf?s=128&d=identicon&r=PG&f=1", "display_name": "masotann", "link": "https://stackoverflow.com/users/1837856/masotann"}, "reply_to_user": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1567106101, "post_id": 57701282, "comment_id": 101874793, "body": "Thanks @AlexanderSantos, I&#39;ll also open an issue on their git repo"}], "owner": {"reputation": 831, "user_id": 1837856, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c66f35382eeef07837d10aa4f4694edf?s=128&d=identicon&r=PG&f=1", "display_name": "masotann", "link": "https://stackoverflow.com/users/1837856/masotann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567095263, "creation_date": 1567035905, "last_edit_date": 1567095263, "question_id": 57701282, "link": "https://stackoverflow.com/questions/57701282/vscode-file-not-synching-between-duplicate-workspaces", "title": "VSCode File not synching between duplicate workspaces", "body": "<p>I use vscode with python/notebook extension, so I can run cells in the <code>.py</code> file one at a time.  I'm seeing that modifying files does not change the behavior when opening the same workspace in different windows.</p>\n\n<p>Steps to reproduce:</p>\n\n<ol>\n<li><p>Open a folder and create two files: <code>func.py</code> and <code>test.py</code></p></li>\n<li><p>in <code>func.py</code>, add the lines:</p></li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>    #%%\n    def run_test():\n        return 'a' \n</code></pre>\n\n<ol start=\"3\">\n<li>in <code>test.py</code>, add the lines:</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>    #%%\n    run_test()\n</code></pre>\n\n<ol start=\"4\">\n<li><p>save both files, and open new workspace by <code>Duplicate Workspace in new Window</code> command.  </p></li>\n<li><p>in the first window, open <code>func.py</code> and in the second window, open <code>test.py</code></p></li>\n<li><p>Run the cell in <code>test.py</code> by <code>ctrl+shift</code> to get the expected output <code>a</code>.</p></li>\n<li><p>Change the content of <code>func.py</code> in the first window to <code>return 'b'</code>. Save the file.</p></li>\n<li><p>When step 6 is repeated, I expect the output to be <code>b</code> but  I still get <code>a</code>.  </p></li>\n</ol>\n\n<p>This behavior leads me to believe that duplicate workspaces cannot share file updates.  Does anyone have a workaround/solution for this?  Thanks in advance.</p>\n"}, {"tags": ["python", "django", "python-social-auth"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1567036157, "post_id": 57701271, "comment_id": 101846317, "body": "Are you really running a secure (<code>https</code>) server at <code>127.0.0.1:8000</code>?"}, {"owner": {"reputation": 51, "user_id": 10740526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QZGupRjEt0U/AAAAAAAAAAI/AAAAAAAAACw/o2bF8SNJxmE/photo.jpg?sz=128", "display_name": "Ibrahim Fakih", "link": "https://stackoverflow.com/users/10740526/ibrahim-fakih"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1567036262, "post_id": 57701271, "comment_id": 101846332, "body": "So are you saying that my redirect url needs to <a href=\"http://127.0.0.1:8000/oauth/complete/google-oauth2/\" rel=\"nofollow noreferrer\">127.0.0.1:8000/oauth/complete/google-oauth2</a>, instead of https://?"}, {"owner": {"reputation": 51, "user_id": 10740526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QZGupRjEt0U/AAAAAAAAAAI/AAAAAAAAACw/o2bF8SNJxmE/photo.jpg?sz=128", "display_name": "Ibrahim Fakih", "link": "https://stackoverflow.com/users/10740526/ibrahim-fakih"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1567036400, "post_id": 57701271, "comment_id": 101846366, "body": "So i made it to <a href=\"http://127.0.0.1:8000/oauth/complete/google-oauth2/\" rel=\"nofollow noreferrer\">127.0.0.1:8000/oauth/complete/google-oauth2</a>, and that still did not solve the problem"}], "owner": {"reputation": 51, "user_id": 10740526, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QZGupRjEt0U/AAAAAAAAAAI/AAAAAAAAACw/o2bF8SNJxmE/photo.jpg?sz=128", "display_name": "Ibrahim Fakih", "link": "https://stackoverflow.com/users/10740526/ibrahim-fakih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567035860, "creation_date": 1567035860, "question_id": 57701271, "link": "https://stackoverflow.com/questions/57701271/djanogo-python-social-auth-for-social-media-login", "title": "Djanogo - Python Social Auth for social media login", "body": "<p>I am trying to use python-social-auth to have users login with their facebook or google accounts. After the user gets the google login page and logs in to their account, I have trouble redirecting back to my site.  It says </p>\n\n<blockquote>\n  <p><strong>This site can\u2019t be reached</strong> 127.0.0.1 took too long to respond.</p>\n</blockquote>\n\n<p>I followed the documentation: <a href=\"https://python-social-auth.readthedocs.io/en/latest/configuration/django.html\" rel=\"nofollow noreferrer\">https://python-social-auth.readthedocs.io/en/latest/configuration/django.html</a></p>\n\n<p>The following is in <strong>settings.py</strong>:</p>\n\n<pre><code>SOCIAL_AUTH_GOOGLE_OAUTH2_KEY  = \"xxxxxxxxxxxxxxxxx\"\nSOCIAL_AUTH_GOOGLE_OAUTH2_SECRET  = \"xxxxxxxxxxxxxxxxx\"\n\nINSTALLED_APPS = [\n   ...\n   ...\n   'social_django',\n   ...  \n]\n\nMIDDLEWARE = [\n...\n'social_django.middleware.SocialAuthExceptionMiddleware',\n]\n\nTEMPLATES = [\n{\n    ...\n        'context_processors': [\n            ...\n            'social_django.context_processors.backends',  # &lt;--\n            'social_django.context_processors.login_redirect', # &lt;--\n        ],\n    },\n },\n]\n\nAUTHENTICATION_BACKENDS = (\n'social_core.backends.google.GoogleOAuth2',\n'social_core.backends.twitter.TwitterOAuth',\n'social_core.backends.facebook.FacebookOAuth2',\n'django.contrib.auth.backends.ModelBackend',\n) \n\nSOCIAL_AUTH_PIPELINE = (\n'social_core.pipeline.social_auth.social_details',\n'social_core.pipeline.social_auth.social_uid',\n'social_core.pipeline.social_auth.auth_allowed',\n'social_core.pipeline.social_auth.social_user',\n'social_core.pipeline.user.get_username',\n'social_core.pipeline.social_auth.associate_by_email', \n'social_core.pipeline.user.create_user',\n'social_core.pipeline.social_auth.associate_user',\n'social_core.pipeline.social_auth.load_extra_data',\n'social_core.pipeline.user.user_details',\n)\n</code></pre>\n\n<p>In the google OAuth client, under Authorized redirect URIs, I have: <a href=\"https://127.0.0.1:8000/oauth/complete/google-oauth2/\" rel=\"nofollow noreferrer\">https://127.0.0.1:8000/oauth/complete/google-oauth2/</a></p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 4, "last_activity_date": 1567036121, "creation_date": 1567036121, "answer_id": 57701295, "question_id": 57701260, "link": "https://stackoverflow.com/questions/57701260/hourly-aggregation-of-counts-pandas/57701295#57701295", "title": "Hourly aggregation of counts pandas", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.cumsum.html\" rel=\"nofollow noreferrer\"><code>cumsum</code></a> and <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.mask.html\" rel=\"nofollow noreferrer\"><code>mask</code></a></p>\n\n<pre><code>df['spike_count'] = df.spike.cumsum().mask(df.spike.eq(0), 0)\n</code></pre>\n\n<hr>\n\n<pre><code>                     hour  spike  spike_count\ndate_time                                    \n2014-11-22 00:00:00     0      0            0\n2014-11-22 01:00:00     1      1            1\n2014-11-22 02:00:00     2      1            2\n2014-11-22 03:00:00     3      1            3\n2014-11-22 04:00:00     4      0            0\n2014-11-22 05:00:00     5      0            0\n2014-11-22 06:00:00     6      0            0\n2014-11-22 07:00:00     7      0            0\n2014-11-22 08:00:00     8      1            4\n2014-11-22 09:00:00     9      0            0\n2014-11-22 10:00:00    10      0            0\n2014-11-22 11:00:00    11      1            5\n2014-11-22 12:00:00    12      0            0\n2014-11-22 13:00:00    13      0            0\n2014-11-22 14:00:00    14      1            6\n2014-11-22 15:00:00    15      0            0\n2014-11-22 16:00:00    16      0            0\n2014-11-22 17:00:00    17      0            0\n2014-11-22 18:00:00    18      0            0\n2014-11-22 19:00:00    19      1            7\n2014-11-22 20:00:00    20      0            0\n2014-11-22 21:00:00    21      0            0\n2014-11-22 22:00:00    22      0            0\n2014-11-22 23:00:00    23      1            8\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 9431573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/848a4411210fa5cc94667e757cccfcf2?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9431573/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57701295, "answer_count": 1, "score": 2, "last_activity_date": 1567036121, "creation_date": 1567035705, "question_id": 57701260, "link": "https://stackoverflow.com/questions/57701260/hourly-aggregation-of-counts-pandas", "title": "Hourly aggregation of counts pandas", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>                      hour  spike  spike_count\ndate_time           \n2014-11-22 00:00:00     0     0     0\n2014-11-22 01:00:00     1     1     0\n2014-11-22 02:00:00     2     1     0\n2014-11-22 03:00:00     3     1     0\n2014-11-22 04:00:00     4     0     0\n2014-11-22 05:00:00     5     0     0\n2014-11-22 06:00:00     6     0     0\n2014-11-22 07:00:00     7     0     0\n2014-11-22 08:00:00     8     1     0\n2014-11-22 09:00:00     9     0     0\n2014-11-22 10:00:00     10    0     0\n2014-11-22 11:00:00     11    1     0\n2014-11-22 12:00:00     12    0     0\n2014-11-22 13:00:00     13    0     0\n2014-11-22 14:00:00     14    1     0\n2014-11-22 15:00:00     15    0     0\n2014-11-22 16:00:00     16    0     0\n2014-11-22 17:00:00     17    0     0\n2014-11-22 18:00:00     18    0     0\n2014-11-22 19:00:00     19    1     0\n2014-11-22 20:00:00     20    0     0\n2014-11-22 21:00:00     21    0     0\n2014-11-22 22:00:00     22    0     0\n2014-11-22 23:00:00     23    1     0\n</code></pre>\n\n<p>I'd like to aggregate the number of spike into the spike_count column per hour (where the hour column is the hours on a 24 hr format). So my expected output would look like this:</p>\n\n<pre><code>                      hour  spike  spike_count\ndate_time           \n2014-11-22 00:00:00     0     0     0\n2014-11-22 01:00:00     1     1     1\n2014-11-22 02:00:00     2     1     2\n2014-11-22 03:00:00     3     1     3\n2014-11-22 04:00:00     4     0     0\n2014-11-22 05:00:00     5     0     0\n2014-11-22 06:00:00     6     0     0\n2014-11-22 07:00:00     7     0     0\n2014-11-22 08:00:00     8     1     4\n2014-11-22 09:00:00     9     0     0\n2014-11-22 10:00:00     10    0     0\n2014-11-22 11:00:00     11    1     5\n2014-11-22 12:00:00     12    0     0\n2014-11-22 13:00:00     13    0     0\n2014-11-22 14:00:00     14    1     6\n2014-11-22 15:00:00     15    0     0\n2014-11-22 16:00:00     16    0     0\n2014-11-22 17:00:00     17    0     0\n2014-11-22 18:00:00     18    0     0\n2014-11-22 19:00:00     19    1     7\n2014-11-22 20:00:00     20    0     0\n2014-11-22 21:00:00     21    0     0\n2014-11-22 22:00:00     22    0     0\n2014-11-22 23:00:00     23    1     8\n</code></pre>\n\n<p>I don't know where to start or how to go about solving this. Any suggestions?</p>\n"}, {"tags": ["python", "scikit-learn", "tfidfvectorizer"], "owner": {"reputation": 1506, "user_id": 4996042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0910aacb4500f3f0177b4e489e6d4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh K", "link": "https://stackoverflow.com/users/4996042/ramesh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567035683, "creation_date": 1567035683, "question_id": 57701258, "link": "https://stackoverflow.com/questions/57701258/space-partioning-tree-optimization-for-knn-using-scikit-learn", "title": "Space Partioning Tree optimization for knn using scikit-learn", "body": "<p>I have the following tf-idf based word vectors :</p>\n\n<pre><code>1. ip_vector : The input text\n2. training_vectors for a bunch of texts in my corpus.\n</code></pre>\n\n<p>These vectors are built using <code>scikit-learn TfIdfVectorizer</code> and have the default <code>L2 normalization</code> . </p>\n\n<p>Now I am using scikit-learn's NearestNeighbor API with metric as <code>euclidean</code> and the <code>algorithm</code> as <code>ball_tree</code> and <code>kd_tree</code>.</p>\n\n<p><code>m = NearestNeighbors(metric='euclidean', algorithm='ball_tree')</code>\n<code>m.fit(training_vectors)</code>\n<code>op = m.kneighbors(ip_vector,5,return_distance=False)</code>\nwhere both the <code>training_vectors</code> and <code>ip_vector</code> are TfIdfVectorized.</p>\n\n<p>However this gives me poor results in terms of <code>time complexity</code> compared to letting the algorithm as <code>default</code> and  metric as <code>cosine</code> . I was expecting SPT based algorithms to be faster . What could be wrong here ?</p>\n"}, {"tags": ["python", "html", "placeholder", "splinter"], "comments": [{"owner": {"reputation": 11554, "user_id": 451480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/SU8kZ.jpg?s=128&g=1", "display_name": "Blaise", "link": "https://stackoverflow.com/users/451480/blaise"}, "edited": false, "score": 0, "creation_date": 1573324433, "post_id": 57701237, "comment_id": 103848383, "body": "Can you add more contextual logging? Usually it tells you why the element is not interactable. Common reasons are that the element is not rendered, doesn&#39;t take up any space or the element is overlaid with another element."}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 12811763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d334c856b4e169ab4e1450c436e7d88?s=128&d=identicon&r=PG&f=1", "display_name": "SimfikDuke", "link": "https://stackoverflow.com/users/12811763/simfikduke"}, "is_accepted": false, "score": 0, "last_activity_date": 1581512421, "creation_date": 1581512421, "answer_id": 60188965, "question_id": 57701237, "link": "https://stackoverflow.com/questions/57701237/how-to-click-on-html-placeholder-link-using-splinter-says-not-interactable/60188965#60188965", "title": "How to click on html placeholder link using Splinter? - Says not interactable", "body": "<p>You can execute javascript code directly:</p>\n\n<pre><code>browser.execute_script('document.getElementById(\"next\").click()')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11991514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9716483d9fa9dd330d1b027d7449a34?s=128&d=identicon&r=PG&f=1", "display_name": "dg2996", "link": "https://stackoverflow.com/users/11991514/dg2996"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1581512421, "creation_date": 1567035447, "last_edit_date": 1567050885, "question_id": 57701237, "link": "https://stackoverflow.com/questions/57701237/how-to-click-on-html-placeholder-link-using-splinter-says-not-interactable", "title": "How to click on html placeholder link using Splinter? - Says not interactable", "body": "<p>I am trying to navigate through a data table, but the <code>Next</code> button is a placeholder link that my Splinter code cannot click. Therefore, I cannot access the rest of the data I need. </p>\n\n<p>I have tried using:</p>\n\n<pre><code>browser.find_by_id('next').first.click()\n\nbrowser.find_by_xpath('//*[@id=\"next\"]').first.click()\n</code></pre>\n\n<p>HTML code for the <code>Next</code> button (brackets removed):</p>\n\n<pre><code>a class=\"option  clickable \" id=\"next\" data-page=\"1\"&gt;next\n</code></pre>\n\n<p>Error Message : </p>\n\n<blockquote>\n  <p>ElementNotInteractableException: Message: element not interactable\n   (Session info: chrome=76.0.3809.132)</p>\n</blockquote>\n"}, {"tags": ["python", "glom"], "answers": [{"comments": [{"owner": {"reputation": 1007, "user_id": 5758423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLzyY.jpg?s=128&g=1", "display_name": "thorwhalen", "link": "https://stackoverflow.com/users/5758423/thorwhalen"}, "edited": false, "score": 0, "creation_date": 1567612163, "post_id": 57779511, "comment_id": 102017052, "body": "Thanks for the extended answer, glom BDFL. It&#39;s sufficient information get what I&#39;m trying to do working. Still, clarification for other readers: By &quot;can be glommed&quot;, I meant a non-terminal node. Essentially, defining when an object should be considered &quot;nested&quot; and explored further. Remap (mentioned in the following section) is what I need there. Thanks."}, {"owner": {"reputation": 1007, "user_id": 5758423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLzyY.jpg?s=128&g=1", "display_name": "thorwhalen", "link": "https://stackoverflow.com/users/5758423/thorwhalen"}, "edited": false, "score": 0, "creation_date": 1567612455, "post_id": 57779511, "comment_id": 102017210, "body": "would you have a link to some cookbook/recipes that involves glom and remap together?"}, {"owner": {"reputation": 2039, "user_id": 178013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4bbc497062643a8913884e7aba305f2?s=128&d=identicon&r=PG", "display_name": "Mahmoud Hashemi", "link": "https://stackoverflow.com/users/178013/mahmoud-hashemi"}, "reply_to_user": {"reputation": 1007, "user_id": 5758423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLzyY.jpg?s=128&g=1", "display_name": "thorwhalen", "link": "https://stackoverflow.com/users/5758423/thorwhalen"}, "edited": false, "score": 0, "creation_date": 1567614286, "post_id": 57779511, "comment_id": 102018107, "body": "@thorwhalen Not beyond the case above (yet) :)"}], "tags": [], "owner": {"reputation": 2039, "user_id": 178013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4bbc497062643a8913884e7aba305f2?s=128&d=identicon&r=PG", "display_name": "Mahmoud Hashemi", "link": "https://stackoverflow.com/users/178013/mahmoud-hashemi"}, "is_accepted": true, "score": 2, "last_activity_date": 1567550549, "creation_date": 1567550549, "answer_id": 57779511, "question_id": 57701207, "link": "https://stackoverflow.com/questions/57701207/how-to-make-glom-work-with-dict-like-objects/57779511#57779511", "title": "How to make glom work with dict-like objects", "body": "<p>These are excellent questions! I'll do my best to break them out one at a time:</p>\n\n<h2>How to specify that an object can be glommed?</h2>\n\n<p>When you say \"glom\" here, I assume you mean \"access\".</p>\n\n<p>Python features a very rich data model, and while there's <em>usually</em> an intuitive meaning for \"access\" in every context, it can be expensive and risky to guess. glom's approach to this is to <a href=\"https://glom.readthedocs.io/en/latest/api.html#setup-and-registration\" rel=\"nofollow noreferrer\">provide explicit registration APIs</a>.</p>\n\n<h2>How to specify a key iterator?</h2>\n\n<p>If you want to split a <em>path</em> (e.g., the <code>'a.b.c'</code> of <code>glom(target, 'a.b.c')</code>) into the structured keys (and operations) used to access that path, I would recommend looking at <a href=\"https://glom.readthedocs.io/en/latest/api.html#glom.Path\" rel=\"nofollow noreferrer\">the <code>Path</code> type</a>, specifically, <code>Path.from_text()</code> and <code>path.items()</code>.</p>\n\n<p>If you'd like to look at an object and ascertain which paths exist within the object, that's trickier. </p>\n\n<p>At the time of writing, <code>glom</code> is still primarily designed for accessing and building known structures, with some affordances for defaults/branching. For full context-free iteration of all possible paths, the best I have to offer at the moment is <a href=\"https://boltons.readthedocs.io/en/latest/iterutils.html#boltons.iterutils.remap\" rel=\"nofollow noreferrer\">remap</a> (<a href=\"https://sedimental.org/remap.html\" rel=\"nofollow noreferrer\">cookbook</a>). Note that remap doesn't have glom's plugin/registration power, but it does work out-of-the-box for iterating glommable paths in common Python datatypes, as <a href=\"https://github.com/mahmoud/apatite/blob/6798619fa7e18b402539b36d1d7a144464c6255c/apatite/cli.py#L554-L558\" rel=\"nofollow noreferrer\">this example</a> shows (the corresponding <code>glom()</code> call is done just below).</p>\n\n<h2>How to specify how data is retrieved from a key?</h2>\n\n<p>I think this is actually addressed in <a href=\"https://glom.readthedocs.io/en/latest/api.html#setup-and-registration\" rel=\"nofollow noreferrer\">the registration APIs</a> I referenced above. The <code>get</code> keyword argument refers to a built-in operation, which must be specified for all types.</p>\n\n<p>On the off chance your definition of \"retrieve\" conflicts with the built-in <code>get</code> registration, you can override it, <em>or</em> you can specify a new operation that can be registered against using <a href=\"https://github.com/mahmoud/glom/blob/master/glom/core.py#L1328\" rel=\"nofollow noreferrer\"><code>register_op</code></a>, (e.g., how the <a href=\"https://github.com/mahmoud/glom/blob/18e54ebc5163053a2bcee73b3ce18d2ef5af1767/glom/mutation.py#L223\" rel=\"nofollow noreferrer\"><code>assign</code></a> operation was added).</p>\n\n<p>Again, great questions, you're really leveraging Python's power here. Hope this helps!</p>\n"}], "owner": {"reputation": 1007, "user_id": 5758423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLzyY.jpg?s=128&g=1", "display_name": "thorwhalen", "link": "https://stackoverflow.com/users/5758423/thorwhalen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 57779511, "answer_count": 1, "score": 3, "last_activity_date": 1567550549, "creation_date": 1567035224, "last_edit_date": 1567036178, "question_id": 57701207, "link": "https://stackoverflow.com/questions/57701207/how-to-make-glom-work-with-dict-like-objects", "title": "How to make glom work with dict-like objects", "body": "<p>Glom (<a href=\"https://glom.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://glom.readthedocs.io/en/latest/</a>) is, amongst other things, for </p>\n\n<blockquote>\n  <p>path-based access for nested structures</p>\n</blockquote>\n\n<p><strong>But how do you make it work for nested structures beyond dicts?</strong></p>\n\n<p>Consider the following class (purposely not an actual <code>collection.abc.Mapping</code>, for simplicity:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class MyMap: \n    def __init__(self, d):\n        self.d = d\n    def __getitem__(self, k):\n        \"\"\"just delegating\"\"\"\n        v = self.d[k]\n        if isinstance(v, (dict, MyMap)):\n            return MyMap(v)\n        else:\n            return v\n</code></pre>\n\n<p>This works:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>m = MyMap({'a': {'b': {'c': 'd'}}})\nassert m['a']['b']['c'] == 'd'\n</code></pre>\n\n<p>But this doesn't:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from glom import glom\nassert glom(m, 'a.b.c') == 'd'\n</code></pre>\n\n<p>I get the error:\n<code>PathAccessError: could not access 'a', part 0 of Path('a', 'b', 'c'), got error: AttributeError(\"'MyMap' object has no attribute 'a'\")</code></p>\n\n<p><strong>More specifically</strong>, how does one specify:</p>\n\n<ul>\n<li>what's a node (i.e. an object that can be glommed further)</li>\n<li>a key iterator (how to split a path into keys)</li>\n<li>an item getter (how data is retrieved from a key)</li>\n</ul>\n\n<p>In case it helps, here's the kind of function I'm looking for glom to satisfy:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dot_str_key_iterator = lambda p: p.split('.')\nbracket_getter = lambda obj, k: obj[k]\n\ndef simple_glom(target, spec, \n                node_types=(dict,), \n                key_iterator=dot_str_key_iterator,\n                item_getter=bracket_getter\n               ):\n    for k in key_iterator(spec):\n        target = item_getter(target, k)\n        if not isinstance(target, node_types):\n            break\n    return target\n</code></pre>\n\n<p>This function doesn't have all the bells and whistles, but allows me to do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>m = MyMap({'a': {'b': {'c': 'd'}}})\nsimple_glom(m, 'a.b.c', node_types=(MyMap,))\n</code></pre>\n\n<p>Or for an extreme example using all parametrizatons:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from types import FunctionType\nfrom functools import partial\n\nattr_glom = partial(simple_glom, \n                    node_types=(FunctionType, type), \n                    key_iterator=lambda p: p.split('/'), \n                    item_getter=getattr)\nassert attr_glom(MyMap, '__getitem__/__doc__') == 'just delegating'\n</code></pre>\n"}, {"tags": ["python", "pandas", "jupyter-notebook"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1567034839, "post_id": 57701163, "comment_id": 101846088, "body": "You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for questions requesting debugging help. In any case &quot;My understanding has been that using apply without an assignment should never alter the underlying dataframe.&quot; Well, but your <i>function modifies the <code>list</code>object inside the Series</i>: <code>x[i] = x[i].split(&#39;|&#39;)[0]</code>. So of course, the changes are reflected in the series, because it&#39;s still holding the same objects as before, and you&#39;ve mutated them with <code>.apply</code> (not a good approach, generally)"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11903528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fRxucclgib4/AAAAAAAAAAI/AAAAAAAAALM/Kyt7934b-nM/photo.jpg?sz=128", "display_name": "eamonious", "link": "https://stackoverflow.com/users/11903528/eamonious"}, "is_accepted": false, "score": 1, "last_activity_date": 1567035905, "creation_date": 1567035905, "answer_id": 57701281, "question_id": 57701163, "link": "https://stackoverflow.com/questions/57701163/applying-function-to-loc-call-in-pandas-is-causing-changes-to-the-underlying-dat/57701281#57701281", "title": "Applying function to loc call in pandas is causing changes to the underlying dataframe?", "body": "<p>Thanks to juanpa.arrivillaga for clarifying, I suspected the assignment in the function might be to blame but wanted to confirm that the behavior was expected.</p>\n\n<p>Here is a simpler version of the function which is successful and does not affect the underlying df:</p>\n\n<pre><code>def clean_alts(x):\n    if type(x)==list:\n        return [i.split('|')[0] for i in x]\n    else:\n        return x\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11903528, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fRxucclgib4/AAAAAAAAAAI/AAAAAAAAALM/Kyt7934b-nM/photo.jpg?sz=128", "display_name": "eamonious", "link": "https://stackoverflow.com/users/11903528/eamonious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567035905, "creation_date": 1567034766, "question_id": 57701163, "link": "https://stackoverflow.com/questions/57701163/applying-function-to-loc-call-in-pandas-is-causing-changes-to-the-underlying-dat", "title": "Applying function to loc call in pandas is causing changes to the underlying dataframe?", "body": "<p>I'm using .apply in pandas.  I applied a function called <code>clean_alts(x)</code> (see below) to a dataframe series called 'alts', containing lists of strings (alternative forms of words) or 0 values (int) where there are no alternative forms to list.  The goal was to iterate through the word lists, where they exist, and for each string, split at the first '|' and take what comes before. </p>\n\n<p>When I run <code>df.loc[:,'alts'].apply(lambda x: clean_alts(x)</code> to test the function, the function does this successfully.  </p>\n\n<p>However, if I then run <code>df['alts']</code>, I see that the underlying dataframe series has been altered as well, with the same changes.  My understanding has been that using apply without an assignment should never alter the underlying dataframe.  </p>\n\n<p>I'm concerned by this behavior, I don't want to move forward without understanding why an operation on a temporary copy of the df would affect the underlying df.</p>\n\n<p>The same thing happens when using .map, and the same thing happens if I use df[df[...] to filter instead of using loc.</p>\n\n<p>I tried mapping a simple lambda x: str(x) to the column and this did NOT affect the underlying dataframe.</p>\n\n<p>So, is it something about the way I designed the function?</p>\n\n<p>Here's the function I'm applying</p>\n\n<pre><code>def clean_alts(x):\n    if type(x)==list:\n        for i in range(len(x)):\n            if '|' in x[i]:\n                x[i] = x[i].split('|')[0]\n    return x\n</code></pre>\n\n<p>Testing the function (the code that changed the underlying df):</p>\n\n<pre><code>df.loc[:,'alts'].apply(lambda x: clean_alts(x))\n</code></pre>\n"}, {"tags": ["python", "ajax", "selenium", "web-scraping", "data-extraction"], "comments": [{"owner": {"reputation": 194, "user_id": 9802392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d parolin", "link": "https://stackoverflow.com/users/9802392/d-parolin"}, "edited": false, "score": 1, "creation_date": 1567035219, "post_id": 57701145, "comment_id": 101846150, "body": "Do you also have a self-educational interest in how to do this efficiently or are you more interested in the result of obtaining the full list from them ? Their API does not seem limited, so you can check how their web page get the results and use the API directly. <code>https:&#47;&#47;e27.co&#47;api&#47;startups&#47;?tab_name=recentlyupdated&amp;start=&zwnj;&#8203;0&amp;length=100</code> would give you the first hundred results as JSON. But with anything be nice and respect the value they provide to you as such don&#39;t constantly pull their whole list."}, {"owner": {"reputation": 29, "user_id": 11676592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbe238036e8fe5e44929ed3003379412?s=128&d=identicon&r=PG&f=1", "display_name": "qwew", "link": "https://stackoverflow.com/users/11676592/qwew"}, "reply_to_user": {"reputation": 194, "user_id": 9802392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d parolin", "link": "https://stackoverflow.com/users/9802392/d-parolin"}, "edited": false, "score": 0, "creation_date": 1567035999, "post_id": 57701145, "comment_id": 101846283, "body": "d_parolin   thanks for response, yes I have a self-educational interest, how to load this data without api, lets say for linkedin post, which have 1000+ comments how to load all comment without clicking the button."}], "answers": [{"tags": [], "owner": {"reputation": 1539, "user_id": 11616717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cdbe1b931109671227d3261ffe4cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Axois", "link": "https://stackoverflow.com/users/11616717/axois"}, "is_accepted": true, "score": 0, "last_activity_date": 1567046657, "creation_date": 1567046657, "answer_id": 57702300, "question_id": 57701145, "link": "https://stackoverflow.com/questions/57701145/how-to-load-data-without-clicking-button/57702300#57702300", "title": "How to load data without clicking button?", "body": "<p>you can directly access their API by finding where the request is receiving from by pressing the <kbd>Load More</kbd> button. In this case, the request is receiving from the following URL. </p>\n\n<pre><code>https://e27.co/api/startups/?tab_name=recentlyupdated&amp;start=10&amp;length=10\n</code></pre>\n\n<p>Hence by doing a bit of modification to the <code>length</code> and <code>start</code>, you can get more URLs. I've written a simple script to get the name of the startups.</p>\n\n<pre><code>import requests\n\nstart_number = 0\nr = requests.get('https://e27.co/api/startups/?tab_name=recentlyupdated&amp;start={}&amp;length=100'.format(start_number))\nr = r.json()\nfor i in r['data']['list']:\n    print(i['name'])\n</code></pre>\n\n<pre><code>#outputs\nRESYNC Technologies\nSwizzle\nSports365\nShopClues\nSymantec\nSpoonJoy\nSEOPRO India\nSolarium\nSHOPLINE\nStructo\nCoc Coc\nCarDekho\nChillr\nCulture Machine\nCoAssets\nCoinMKT\nCimplyFive\nCall Levels\nCereBrahm Innovations\nCouponzGuru\nAisle\nadMingle\nAppsFlyer\nAppVirality\nAmbient Digital\nAirtel\nApptopia\nLatize\nLefora\nLINC 360\nLogisticsIndonesia\nLogicGateOne Corporation\nLivspace\nLivePhuket\nLINE Ventures\nNational Tiles-Sydney\nNational Tiles-Brisbane\nNational Research Foundation\nNational Tiles\nNational Tiles-Adelaide\nNational University of Singapore School of Computing\nNational Tiles-Wagga Wagga\nNational Tiles-Springwood\nNational Tiles-Burleigh Heads\nNationkart\nNatasha\nNaturally Yours\nNative5\nNativfy\nNaturalMantra\nNative Tongue\nNewsHunt\nNimble Wireless\nNanarokom.com\nNoBroker\nNews Corp\nNaxos International\nNecesCity\nNextGen\nNotey\nNaspers Group\nNAM TRIP TRAVEL\nNavigat Group\nNanosatisfi\nNaaptol\nSingle Thailand\nsinhasoft\nSinergy\nSingsys Pte. Ltd.\nSimplilearn\nSIFS India\nSimprosys InfoMedia\nSimiCommerce\nSingPost\nSingapore Press Holdings\nSimplerCloud\nSingSaver\nSinoze\nSingapore infocomm Technology Federation\nNative Tech\nNovelship\nAthenaDesk\nZERO BrandCard\u2122\nOpen24.vn\niMyanmarHouse\nShufti Pro\nMobME Wireless\nMoolya Testing\nMofang Gongyu\nMoff Inc.\nMoonfrog Labs\nmyNoticePeriod\nMaGIC\nMomoe\nManthan\nMetaps\nMotorola Solutions\nMatchMove\nMondano\nMOL- Money Online\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 11676592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbe238036e8fe5e44929ed3003379412?s=128&d=identicon&r=PG&f=1", "display_name": "qwew", "link": "https://stackoverflow.com/users/11676592/qwew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 57702300, "answer_count": 1, "score": 0, "last_activity_date": 1567046657, "creation_date": 1567034597, "question_id": 57701145, "link": "https://stackoverflow.com/questions/57701145/how-to-load-data-without-clicking-button", "title": "How to load data without clicking button?", "body": "<p>I want to scrape the all startups name from <a href=\"https://e27.co/startups/\" rel=\"nofollow noreferrer\">https://e27.co/startups/</a>.\nYou can see that by default there are 20 names of startups, and to load more you need to click by \"Load more\" button. This button loads 10 startup names</p>\n\n<p>I have created the python script which clicking the \"Load More\" button until all(29000) startups will be loaded. Its takes a lot of time and RAM.\nHow can I load this data without this clicking?</p>\n\n<p>I heard something called by AJAX request but I don't understand how to implement this.</p>\n\n<p>Html code of button:</p>\n\n<pre><code>&lt;button class=\"button btn-load-more\" data-start=\"0\"&gt;Load More&lt;/button&gt;\n</code></pre>\n\n<p>data-start parameter is changing +10 with one click</p>\n\n<p>event code of button (JS)</p>\n\n<pre><code>        startupList.elem.find('.btn-load-more').off('.click').click(function(){\n            startupList.elem.find('.btn-load-more').addClass('hide');\n            Global.loading();\n            startupList.loadMoreIsClicked = true;\n            var start = $(this).attr('data-start')*1;\n            start += startupList.count;\n            $(this).attr('data-start', start);\n            startupList.searchAndFilterResult(start, startupList.getFormData(\"#startup_search\"), false);\n</code></pre>\n\n<p>My python code:</p>\n\n<pre><code>    def __init__(self):\n        opp = Options()\n        opp.add_argument('--blink-settings=imagesEnabled=false')\n        opp.add_argument('--headless')\n        self.driver = webdriver.Chrome('./chromedriver', chrome_options=opp)\n\n    def parse(self, e27_url = \"https://e27.co/startups/\"):\n        self.driver.get(e27_url)\n        time.sleep(3)\n        run_check, prev_value_list = True, [0, 0]\n        button = self.driver.find_element_by_xpath(\"//button[@class='button btn-load-more']\")\n\n        while run_check:\n            quantity_of_loaded_starttups =  len(self.driver.find_elements_by_xpath(\n                        \"//div[@class='startup-block startup-list-item']\"))\n            print('Loading, {} startups loaded'.format(quantity_of_loaded_starttups))\n            prev_value_list.append(quantity_of_loaded_starttups)\n            timer = 0\n            while (not button.is_displayed()):\n                time.sleep(0.1)\n                timer +=0.1\n                print(timer)\n                if timer == 60:\n                    run_check = False\n                    break\n\n\n            button.click()\n\n            if prev_value_list[-2] == prev_value_list[-1] and  prev_value_list[-3]  == prev_value_list[-1]:\n                run_check = False\n\n\n        company_names, e_urls,  = [], []\n        for item in self.driver.find_elements_by_xpath(\"//div[@class='startup-block startup-list-item']\"):\n            name = item.find_element_by_css_selector('.company-name').text\n            e27url = item.find_element_by_css_selector(\".startuplink\").get_attribute(\"href\")\n\n            yield {\"Startup\":name,\"Url\":e27url}\n</code></pre>\n\n<p>You can go e27.co/startups  and check it by yourself.</p>\n\n<p>Thanks,\nqwew</p>\n"}, {"tags": ["python", "pyspark", "pyspark-dataframes"], "answers": [{"tags": [], "owner": {"reputation": 1857, "user_id": 6275871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqyQS.jpg?s=128&g=1", "display_name": "SMaZ", "link": "https://stackoverflow.com/users/6275871/smaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1567041632, "last_edit_date": 1567041632, "creation_date": 1567040758, "answer_id": 57701727, "question_id": 57701144, "link": "https://stackoverflow.com/questions/57701144/pyspark-dataframe-get-count-of-variable-in-two-columns/57701727#57701727", "title": "Pyspark dataframe - get count of variable in two columns", "body": "<p>Try this:</p>\n\n<p>Creating DataFrame  </p>\n\n<pre><code>import pyspark.sql.functions as f\n\nl1 = [('2017-01-01','Air','Foo'),\n('2017-01-02','Foo','Bar'),\n('2017-01-03','Bar','Air'),\n('2017-01-04','Air','Foo'),\n('2017-01-09','Bar','Foo'),\n('2017-01-01','Foo','Bar'),\n('2017-01-02','Bar','Air'),\n('2017-01-01','Foo','Air'),\n('2017-01-02','Foo','Air')]\n\ndf = spark.createDataFrame(l1).toDF('id', 'col1', 'col2')\ndf.show()\n+----------+----+----+\n|        id|col1|col2|\n+----------+----+----+\n|2017-01-01| Air| Foo|\n|2017-01-02| Foo| Bar|\n|2017-01-03| Bar| Air|\n|2017-01-04| Air| Foo|\n|2017-01-09| Bar| Foo|\n|2017-01-01| Foo| Bar|\n|2017-01-02| Bar| Air|\n|2017-01-01| Foo| Air|\n|2017-01-02| Foo| Air|\n+----------+----+----+\n\n</code></pre>\n\n<p>First concat <code>col1</code> and <code>col2</code> with <code>,</code> as a separator. Split the column by <code>,</code> and then explode will give row for each word.</p>\n\n<pre><code>df.withColumn('col', f.explode(f.split(f.concat('col1',f.lit(','),'col2'),','))).groupBy('col').count().show()\n+---+-----+\n|col|count|\n+---+-----+\n|Bar|    5|\n|Foo|    7|\n|Air|    6|\n+---+-----+\n\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 3296141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5773e7e35f57c7d56035fd0888c24cd6?s=128&d=identicon&r=PG&f=1", "display_name": "pikapika", "link": "https://stackoverflow.com/users/3296141/pikapika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 57701727, "answer_count": 1, "score": 0, "last_activity_date": 1567041632, "creation_date": 1567034597, "last_edit_date": 1567035386, "question_id": 57701144, "link": "https://stackoverflow.com/questions/57701144/pyspark-dataframe-get-count-of-variable-in-two-columns", "title": "Pyspark dataframe - get count of variable in two columns", "body": "<p>I'm using pyspark dataframe with a goal to get counts of a variable which can be in multiple columns. Wrote a sql query to get this but unable to translate it for dataframes. </p>\n\n<p>Given the below dataframe, need to get counts of \"Foo\", \"Bar\", \"Air\" in Col1, Col2. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>+----------+----+-----+\r\n|      ID  |Col1|Col2 |\r\n+----------+----+-----+\r\n|2017-01-01| Air| Foo |\r\n|2017-01-02| Foo|  Bar|\r\n|2017-01-03| Bar| Air |\r\n|2017-01-04| Air|  Foo|\r\n|2017-01-09| Bar|  Foo|\r\n|2017-01-01|Foo |  Bar|\r\n|2017-01-02|Bar |  Air|\r\n|2017-01-01|Foo |  Air|\r\n|2017-01-02|Foo |  Air|\r\n+----------+----+-----+</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Expected output</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>+-------+-----+\r\n|Var .  |Count|\r\n+-------+-----+\r\n|    Foo|  7  |\r\n|    Air|  6  |\r\n|    Bar|  5  |\r\n+-------+-----+</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "android", "android-studio"], "answers": [{"tags": [], "owner": {"reputation": 870, "user_id": 9000214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81671108bc0838742fb4ca9c0daaea8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9000214/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1567034355, "creation_date": 1567034355, "answer_id": 57701119, "question_id": 57701102, "link": "https://stackoverflow.com/questions/57701102/can-we-use-my-python-code-in-android-studio/57701119#57701119", "title": "Can we use my python code in Android Studio?", "body": "<p>Yes you can. Just use a framework like PyMob.</p>\n\n<p><a href=\"http://www.pyzia.com/\" rel=\"nofollow noreferrer\">http://www.pyzia.com/</a></p>\n\n<p>Though note that it's probably much more worth your time to just learn Java than having to deal with errors and reduction in functionality that you'll get from not using the native language. </p>\n"}], "owner": {"reputation": 42, "user_id": 11991637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf7dc1312f089082d2b1ecdda8a7663?s=128&d=identicon&r=PG&f=1", "display_name": "Cemalettin Alt\u0131nsoy", "link": "https://stackoverflow.com/users/11991637/cemalettin-alt%c4%b1nsoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567034355, "creation_date": 1567034251, "question_id": 57701102, "link": "https://stackoverflow.com/questions/57701102/can-we-use-my-python-code-in-android-studio", "title": "Can we use my python code in Android Studio?", "body": "<p>I have a project and I am making this with python. But I really want to do this for mobile, so can  I use my python code in Adroid studio ?</p>\n\n<p>I mean can we entegrate it ?</p>\n"}, {"tags": ["python", "loops", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8774180, "user_type": "registered", "profile_image": "https://graph.facebook.com/1911968965789311/picture?type=large", "display_name": "Yihan Hu", "link": "https://stackoverflow.com/users/8774180/yihan-hu"}, "edited": false, "score": 0, "creation_date": 1567035938, "post_id": 57701162, "comment_id": 101846273, "body": "I am running Linux and I have read some posts saying that Linus ticks closer to 1ms but still largely depends on other programs you are running at the time. Thank you for your reply!"}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": false, "score": 2, "last_activity_date": 1567035207, "last_edit_date": 1567035207, "creation_date": 1567034753, "answer_id": 57701162, "question_id": 57701095, "link": "https://stackoverflow.com/questions/57701095/check-the-time-difference-between-the-current-time-and-the-next-5th-minute/57701162#57701162", "title": "Check the time difference between the current time and the next 5th minute", "body": "<p>You can work with a <code>timedelta</code> of 5 minutes to calculate 5 minutes in the future. This will consider any hour or day changes. Then round back to the last 5 minutes.</p>\n\n<pre><code>from datetime import datetime, timedelta\n\nnow = datetime.now()\n# go 5 minutes into the future\nlater5min = now + timedelta(0,0,0,0,5)\n# round to 5 minutes\nnext5min = datetime(later5min.year, later5min.month, later5min.day, later5min.hour, 5*int(later5min.minute/5), 0, 0)\nprint(now)\nprint(next5min)\n</code></pre>\n\n<p>For sleeping, use</p>\n\n<pre><code>sleep((next5min-now).total_seconds())\n</code></pre>\n\n<p>This will sleep including fractions of a second.</p>\n\n<blockquote>\n  <p>\"entire program is very time-sensitive\"</p>\n</blockquote>\n\n<p>Note that on Windows, the process scheduling happens only every 17 milliseconds, so your program will never be more precise than that. I can't judge for Linux.</p>\n"}, {"comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1567034972, "post_id": 57701177, "comment_id": 101846112, "body": "Like that, you&#39;re sleeping full minutes only. It will not sleep the seconds until hh:mm:00."}, {"owner": {"reputation": 294, "user_id": 2977955, "user_type": "registered", "profile_image": "https://graph.facebook.com/646012034/picture?type=large", "display_name": "adam_th", "link": "https://stackoverflow.com/users/2977955/adam-th"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1567035318, "post_id": 57701177, "comment_id": 101846166, "body": "Updated to handle seconds"}], "tags": [], "owner": {"reputation": 294, "user_id": 2977955, "user_type": "registered", "profile_image": "https://graph.facebook.com/646012034/picture?type=large", "display_name": "adam_th", "link": "https://stackoverflow.com/users/2977955/adam-th"}, "is_accepted": false, "score": -1, "last_activity_date": 1567035308, "last_edit_date": 1567035308, "creation_date": 1567034881, "answer_id": 57701177, "question_id": 57701095, "link": "https://stackoverflow.com/questions/57701095/check-the-time-difference-between-the-current-time-and-the-next-5th-minute/57701177#57701177", "title": "Check the time difference between the current time and the next 5th minute", "body": "<p>Based on your example is appears that the actual date/time is not important, just how many more seconds until the next 5th minute. In this case you could try something like:</p>\n\n<pre><code>from datetime import datetime\n\nnow = datetime.now()\ncurrent_min = now.minute\ncurrent_seconds = now.second\n\n# get how many minutes past the previous 5th minute using modulus division\n# eg if currentMin is 36, 36 % 5 = 1\ntime_past_previous_5_min = current_min % 5\n\n# calculate how many minutes to the next 5th minute\nnext_5th_min = 5 - time_past_previous_5_min\n\n# convert to seconds\nseconds = next_5th_min * 60 - current_seconds\n\n# sleep\ntime.sleep(seconds)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 8774180, "user_type": "registered", "profile_image": "https://graph.facebook.com/1911968965789311/picture?type=large", "display_name": "Yihan Hu", "link": "https://stackoverflow.com/users/8774180/yihan-hu"}, "edited": false, "score": 0, "creation_date": 1567105561, "post_id": 57701185, "comment_id": 101874584, "body": "This method is quick and simple but when the time is at 12:00 for example, the sleep time will be 0s instead of 300s. I can just add an if statement to make sleep time equal to 300s in that case. However, for my program, I think sleep 0s works just fine. Thank you!"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 65, "user_id": 8774180, "user_type": "registered", "profile_image": "https://graph.facebook.com/1911968965789311/picture?type=large", "display_name": "Yihan Hu", "link": "https://stackoverflow.com/users/8774180/yihan-hu"}, "edited": false, "score": 0, "creation_date": 1567122162, "post_id": 57701185, "comment_id": 101879366, "body": "The time is already a multiple of 5 minutes if it is 12:00:00. Why would you wait for another 5 mins?"}, {"owner": {"reputation": 65, "user_id": 8774180, "user_type": "registered", "profile_image": "https://graph.facebook.com/1911968965789311/picture?type=large", "display_name": "Yihan Hu", "link": "https://stackoverflow.com/users/8774180/yihan-hu"}, "edited": false, "score": 0, "creation_date": 1567184476, "post_id": 57701185, "comment_id": 101901604, "body": "I am implementing a program that needs this kinda mechanism."}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": false, "score": 3, "last_activity_date": 1567034999, "creation_date": 1567034999, "answer_id": 57701185, "question_id": 57701095, "link": "https://stackoverflow.com/questions/57701095/check-the-time-difference-between-the-current-time-and-the-next-5th-minute/57701185#57701185", "title": "Check the time difference between the current time and the next 5th minute", "body": "<p>Since you are only interested in finding the time needed to sleep, this should work:</p>\n\n<pre><code>...\nseconds = -(now.minute * 60 + now.second) % 300\nsleep(seconds)\n</code></pre>\n\n<p>If you also want to find the <code>target</code>, you can use</p>\n\n<pre><code>target = now + timedelta(seconds=seconds)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 8774180, "user_type": "registered", "profile_image": "https://graph.facebook.com/1911968965789311/picture?type=large", "display_name": "Yihan Hu", "link": "https://stackoverflow.com/users/8774180/yihan-hu"}, "edited": false, "score": 1, "creation_date": 1567106136, "post_id": 57701242, "comment_id": 101874806, "body": "This works perfectly for any cases! Thank you so much!"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1567035948, "last_edit_date": 1567035948, "creation_date": 1567035501, "answer_id": 57701242, "question_id": 57701095, "link": "https://stackoverflow.com/questions/57701095/check-the-time-difference-between-the-current-time-and-the-next-5th-minute/57701242#57701242", "title": "Check the time difference between the current time and the next 5th minute", "body": "<p>You can use the number of seconds since Epoch, as returned by <code>time.time()</code>, to efficiently obtain the timestamp of the next 5-minute mark with the following modulo-based calculation:</p>\n\n<pre><code>import time\nfrom datetime import datetime\ntimestamp = time.time()\nprint(datetime.fromtimestamp(timestamp))\nprint(datetime.fromtimestamp(timestamp + 300 - timestamp % 300))\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>2019-08-28 16:38:57.435255\n2019-08-28 16:40:00\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8774180, "user_type": "registered", "profile_image": "https://graph.facebook.com/1911968965789311/picture?type=large", "display_name": "Yihan Hu", "link": "https://stackoverflow.com/users/8774180/yihan-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57701242, "answer_count": 4, "score": 2, "last_activity_date": 1567038786, "creation_date": 1567034170, "last_edit_date": 1567038786, "question_id": 57701095, "link": "https://stackoverflow.com/questions/57701095/check-the-time-difference-between-the-current-time-and-the-next-5th-minute", "title": "Check the time difference between the current time and the next 5th minute", "body": "<h2>Edited (To clarify my purpose)</h2>\n\n<p>I need to write a function that divides an hour into 12 intervals, finds which interval the current time lies into, and then calculates the time difference between the current time and the larger interval boundary, e.g. 0th minute, 5th minute, 10th minute, etc... </p>\n\n<h2>Examples</h2>\n\n<p>the current time is 15:28:07, the larger interval boundary is 15:30:00</p>\n\n<p>the current time is 03:00:00, the larger interval boundary is 03:05:00</p>\n\n<p>the current time is 23:59:59, the larger interval boundary is 00:00:00</p>\n\n<h2>What I Have Tried</h2>\n\n<p>I have looked through a bunch of posts but almost all of them have users pre-define the time. Here is the draft that I have:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from datetime import datetime\n\nnow = datetime.now()\ncurrentMin = now.minute \n\n# Some code to figure out what the larger interval boundary is\nboundary = ?\n\ntarget = datetime(now.year,now.month,now.date,now.hour,boundary)\nduration = target-now\nsleepTime = round(duration.total_seconds(),2)\ntime.sleep(sleepTime)\n\n# Some other code\n\n</code></pre>\n\n<p>In order to find the next 5th minute, I have a list of all the boundaries and I plan to run loops to see which interval <code>currentMin</code> falls into and then assign the larger value of the interval to  <code>boundary</code> </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>interval = [0,5,10,15,20,25,30,35,40,45,50,55,60]\n</code></pre>\n\n<h2>Problems</h2>\n\n<p>1st is efficiency, each iteration grabs two numbers from the list and compares with <code>currentMin</code>, but my entire program is very time-sensitive. </p>\n\n<p>2nd is extreme cases, I need to take care of cases where <code>55 &lt; currentMin &lt; 60</code>, and where the next 5th min is the next day (The last case in the examples). </p>\n\n<p>Is there a better way/simple way to achieve this? Is there a built-in command that helps you to find such a time marker easily.</p>\n"}, {"tags": ["python", "pandas", "statistics"], "comments": [{"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "edited": false, "score": 0, "creation_date": 1567034639, "post_id": 57701089, "comment_id": 101846059, "body": "Can you give your expected outcome Dataframe?"}], "answers": [{"comments": [{"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567035124, "post_id": 57701153, "comment_id": 101846138, "body": "Thanks Allen. That&#39;s a good solution. Can we do it in a for loop way so I can look up other columns and add their std dev. to the original df. + where is the <code>score</code> columns is gone ?"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567035156, "post_id": 57701153, "comment_id": 101846142, "body": "Just added the score column back. Let me see how I can get a for loop solution work."}, {"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567035306, "post_id": 57701153, "comment_id": 101846161, "body": "Thanks! Because sometimes we may want to get std dev of another column and just change the variable name in the column and +_std_dev to its name and adding into it to original df. As you did!"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567035947, "post_id": 57701153, "comment_id": 101846275, "body": "@Alexander, your original for loop solution has a few issues and the reason for that specific error you are seeing is because you assigned the groupby object back to df itself. Please take a look to see if the updated solution meets your need."}, {"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567036430, "post_id": 57701153, "comment_id": 101846370, "body": "Excellent! Thanks Allen for your elegant solution!"}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 2, "last_activity_date": 1567036319, "last_edit_date": 1567036319, "creation_date": 1567034704, "answer_id": 57701153, "question_id": 57701089, "link": "https://stackoverflow.com/questions/57701089/getting-std-deviation-of-specific-column-in-a-grouped-data/57701153#57701153", "title": "Getting std deviation of specific column in a grouped data", "body": "<p>Is this what you are after?</p>\n\n<pre><code>df['std_dev_patient'] = df.score.map(df.groupby(by='score').patient.std())\ndf\n\n    patient obs treatment   score   std_dev_patient\n0   242     1   0           strong  70.710678\n1   151     2   1           weak    20.663978\n2   111     3   0           weak    20.663978\n3   122     1   1           weak    20.663978\n4   342     2   0           strong  70.710678\n</code></pre>\n\n<p>To calculate std on multiple columns in a for loop manner, just put the desired column names to the std_cols list.</p>\n\n<pre><code>std_cols = ['patient', 'obs']\n\nfor col in std_cols:\n    df[f'std_dev_{col}'] = df.score.map(df.groupby(by='score')[col].std())\n\n\npatient obs treatment   score   std_dev_patient std_dev_obs\n0       242 1       0   strong  70.710678       0.707107\n1       151 2       1   weak    20.663978       1.000000\n2       111 3       0   weak    20.663978       1.000000\n3       122 1       1   weak    20.663978       1.000000\n4       342 2       0   strong  70.710678       0.707107\n</code></pre>\n\n<p>To make OP's original for loop solution work:</p>\n\n<pre><code>std_dev_patient = []\ndf_g=df.groupby(\"score\")\ndf_g=df.groupby(\"score\")\nfor col in df.keys():\n    if col=='patient':\n        std_dev_patient.append(df_g[col].std())\n    else:\n        pass\ndf['std_dev_patient'] = df.score.map(std_dev_patient[0])\n\npatient obs treatment   score   std_dev_patient\n0   242 1   0           strong  70.710678\n1   151 2   1           weak    20.663978\n2   111 3   0           weak    20.663978\n3   122 1   1           weak    20.663978\n4   342 2   0           strong  70.710678\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567035646, "post_id": 57701188, "comment_id": 101846228, "body": "Thanks for your answer. Could you for loop approach (or what ever is doing conditional check whether the column is also numeric or not and checking its name as in my trial that would be really a solution! Thanks!"}, {"owner": {"reputation": 22919, "user_id": 7093741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9cJi0.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7093741/chris"}, "reply_to_user": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567036073, "post_id": 57701188, "comment_id": 101846296, "body": "@Alexander Do you want to find which columns are numeric?"}, {"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1567036233, "post_id": 57701188, "comment_id": 101846326, "body": "Yes exactly. In the end, I would like to have a pipeline that scan through columns and check that they are numeric or not and if they are numeric do std deviation and and them as new column to df. I edited the expected output to show this."}], "tags": [], "owner": {"reputation": 22919, "user_id": 7093741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9cJi0.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7093741/chris"}, "is_accepted": true, "score": 3, "last_activity_date": 1567036729, "last_edit_date": 1567036729, "creation_date": 1567035007, "answer_id": 57701188, "question_id": 57701089, "link": "https://stackoverflow.com/questions/57701089/getting-std-deviation-of-specific-column-in-a-grouped-data/57701188#57701188", "title": "Getting std deviation of specific column in a grouped data", "body": "<p>Use <code>pandas.Dataframe.groupby.transform</code>:</p>\n\n<pre><code>df['std_dev_patient'] = df.groupby('score')['patient'].transform('std')\nprint(df)\nprint(df.select_dtypes(np.number).dtypes)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   patient  obs  treatment   score  std_dev_patient\n0      242    1          0  strong        70.710678\n1      151    2          1    weak        20.663978\n2      111    3          0    weak        20.663978\n3      122    1          1    weak        20.663978\n4      342    2          0  strong        70.710678\n</code></pre>\n\n<p>For <code>dtype</code> checking, use <code>pandas.DataFrame.select_dtypes</code> with <code>numpy.number</code>:</p>\n\n<pre><code>import numpy as np\n\ng = df.groupby('score')\nfor c in df.select_dtypes(np.number).columns:\n    df['std_dev_%s' % c] = g[c].transform('std')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   patient  obs  treatment   score  std_dev_patient  std_dev_obs  \\\n0      242    1          0  strong        70.710678     0.707107   \n1      151    2          1    weak        20.663978     1.000000   \n2      111    3          0    weak        20.663978     1.000000   \n3      122    1          1    weak        20.663978     1.000000   \n4      342    2          0  strong        70.710678     0.707107   \n\n   std_dev_treatment  \n0            0.00000  \n1            0.57735  \n2            0.57735  \n3            0.57735  \n4            0.00000  \n</code></pre>\n"}], "owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57701188, "answer_count": 2, "score": 0, "last_activity_date": 1567036729, "creation_date": 1567034121, "last_edit_date": 1592644375, "question_id": 57701089, "link": "https://stackoverflow.com/questions/57701089/getting-std-deviation-of-specific-column-in-a-grouped-data", "title": "Getting std deviation of specific column in a grouped data", "body": "<p>I have a data that I would like to get a std deviation of that particular column then adding the results of it to the original data again.</p>\n<pre><code>import pandas as pd\n\nraw_data = {'patient': [242, 151, 111,122, 342],\n        'obs': [1, 2, 3, 1, 2],\n        'treatment': [0, 1, 0, 1, 0],\n        'score': ['strong', 'weak', 'weak', 'weak', 'strong']}\n\ndf = pd.DataFrame(raw_data, columns = ['patient', 'obs', 'treatment', 'score'])\n\ndf\n\n   patient  obs  treatment   score\n0      242    1          0  strong\n1      151    2          1    weak\n2      111    3          0    weak\n3      122    1          1    weak\n4      342    2          0  strong\n</code></pre>\n<p>So I would like to get std dev of <code>patient</code> column which is grouped by <code>score</code> column</p>\n<p>So the approach I would like have is to <strong>scan through</strong> columns and find <code>patient</code> column and check if it is also <code>numeric</code>(would like to also adding that in future) and to std deviation calculation and finally add results to the orignial <code>df</code></p>\n<p>I tried like this;</p>\n<pre><code>std_dev_patient = []\n\nfor col in df.keys():\n        \n    df=df.groupby(&quot;score&quot;)\n    \n    if df[col]=='patient':\n           np.std(col).append(std_dev_patient)\n    else:\n        pass\n    \n    df.concat([df,std_dev_patient], axis =1)\n    \n    df\n</code></pre>\n<blockquote>\n<p>TypeError: 'str' object is not callable</p>\n</blockquote>\n<p>Is there a ways to do this process efficiently ?</p>\n<p>Thx</p>\n<h1>the expected output</h1>\n<pre><code>   patient  obs  treatment   score  std_dev_patient std_dev_obs\n0      242    1          0  strong    70.71            ..\n1      151    2          1    weak    20.66            ..  \n2      111    3          0    weak    20.66            ..\n3      122    1          1    weak    20.66            .. \n4      342    2          0  strong    70.71            ..  \n</code></pre>\n"}, {"tags": ["python", "machine-learning", "hash", "scikit-learn", "imputation"], "owner": {"reputation": 11, "user_id": 11810256, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6wfVtWlkoKs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rffdugIYlWZEWbZe9qgedm2TSBa2Q/photo.jpg?sz=128", "display_name": "Omar Kaheel", "link": "https://stackoverflow.com/users/11810256/omar-kaheel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567033949, "creation_date": 1567033949, "question_id": 57701069, "link": "https://stackoverflow.com/questions/57701069/can-i-hash-text-based-data-and-use-that-for-imputation-with-scikit-learn", "title": "Can I hash text based data and use that for imputation with scikit learn?", "body": "<p>I have a database full of research data sets that span from 1972 till today. Many of the older data sets are missing much of the meta-data that is now schima.org standard. </p>\n\n<p>I was wondering if I could try hashing all of this and then using scikit-learn to impute the missing meta data with more complete ones. If not what else should I try?</p>\n"}, {"tags": ["python", "list", "recursion"], "comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567034536, "post_id": 57701068, "comment_id": 101846035, "body": "Where did that 5 come from?"}, {"owner": {"reputation": 323, "user_id": 10162123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr5u6.png?s=128&g=1", "display_name": "Parthik B.", "link": "https://stackoverflow.com/users/10162123/parthik-b"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567034787, "post_id": 57701068, "comment_id": 101846080, "body": "@ipaleka I missed that. Thanks, I&#39;ve updated the question now."}], "answers": [{"tags": [], "owner": {"reputation": 1110, "user_id": 7025361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zn7VV.png?s=128&g=1", "display_name": "LiuXiMin", "link": "https://stackoverflow.com/users/7025361/liuximin"}, "is_accepted": false, "score": 1, "last_activity_date": 1567035215, "creation_date": 1567035215, "answer_id": 57701205, "question_id": 57701068, "link": "https://stackoverflow.com/questions/57701068/how-to-update-changes-to-a-list-made-in-a-recursive-function-in-python/57701205#57701205", "title": "How to update changes to a list made in a recursive function in Python?", "body": "<p>A little change:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def woah(arr, l):\n    if l &gt; 1:\n        arr[l-1], arr[0] = arr[0], arr[l-1]\n        print(arr) # to keep track of changes\n        return woah(arr, l-1)\n\n    return arr\n\narr = [2, 3 ,4, 5 , 6]\nwoah(arr, len(arr)) # arr will be changed, and you can also accept the return value\n</code></pre>\n\n<p>A better way is define one inner function, so you can just pass arr. Leave it with you :-)</p>\n"}, {"tags": [], "owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "is_accepted": false, "score": 1, "last_activity_date": 1567035242, "creation_date": 1567035242, "answer_id": 57701208, "question_id": 57701068, "link": "https://stackoverflow.com/questions/57701068/how-to-update-changes-to-a-list-made-in-a-recursive-function-in-python/57701208#57701208", "title": "How to update changes to a list made in a recursive function in Python?", "body": "<p>since you pass a shorter list each time, the list gets shorter and shorter.\nThis shoud work:</p>\n\n<pre><code>def woah(arr, fixed):\n    if len(arr) &gt; 1:\n        arr[-1], arr[0] = arr[0], arr[-1]\n        print(arr+fixed) #to keep track of changes\n        return woah(arr[:-1],[arr[-1]]+fixed)\n\nwoah([2, 3, 4, 5, 6], [])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2159, "user_id": 2614637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443082cbe3730d73329d4c45221da6fc?s=128&d=identicon&r=PG", "display_name": "Prem Anand", "link": "https://stackoverflow.com/users/2614637/prem-anand"}, "is_accepted": true, "score": 1, "last_activity_date": 1567035248, "creation_date": 1567035248, "answer_id": 57701210, "question_id": 57701068, "link": "https://stackoverflow.com/questions/57701068/how-to-update-changes-to-a-list-made-in-a-recursive-function-in-python/57701210#57701210", "title": "How to update changes to a list made in a recursive function in Python?", "body": "<p>When you do <code>return woah(arr[:-1])</code>, you leave out the last element and thats not what you want. Try something like this</p>\n\n<pre><code>def woah(arr, n=1): \n    if len(arr) &gt; n:\n        arr[-n], arr[0] = arr[0], arr[-n]\n        print(arr)\n        return woah(arr, n+1)\n    else:\n        return arr\n\nwoah([2, 3, 4, 5, 6])\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[6, 3, 4, 5, 2]\n[5, 3, 4, 6, 2]\n[4, 3, 5, 6, 2]\n[3, 4, 5, 6, 2]\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 10162123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr5u6.png?s=128&g=1", "display_name": "Parthik B.", "link": "https://stackoverflow.com/users/10162123/parthik-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 57701210, "answer_count": 3, "score": 0, "last_activity_date": 1567035248, "creation_date": 1567033941, "last_edit_date": 1567034755, "question_id": 57701068, "link": "https://stackoverflow.com/questions/57701068/how-to-update-changes-to-a-list-made-in-a-recursive-function-in-python", "title": "How to update changes to a list made in a recursive function in Python?", "body": "<p>Basically, what I want to do is to update the changes made inside a recursive call to my main list. I tried the below, but it is creating a new list every time  and forgetting the mother list, instead returning a new child list. Lemmi explain with a basic code:</p>\n\n<pre><code>def woah(arr):\n    if len(arr) &gt; 1:\n        arr[-1], arr[0] = arr[0], arr[-1]\n        print(arr) //to keep track of changes\n        return woah(arr[:-1])\n\nwoah([2, 3, 4, 5, 6])\n\n&gt;&gt; [6, 3, 4, 5, 2]\n   [5, 3, 4, 6]\n   [4, 3, 5]\n   [3, 4]\n</code></pre>\n\n<p>I want it to finally return :</p>\n\n<blockquote>\n  <blockquote>\n    <p>output : [3, 4, 5, 6, 2]</p>\n  </blockquote>\n</blockquote>\n\n<p>Inside changes I think should've taken place to reach the desired output: </p>\n\n<blockquote>\n  <blockquote>\n    <p>[2, 3, 4, 5, 6] --> [6, 3, 4, 5, 2] --> [5, 3, 4, 6, 2] --> [4, 3, 5, 6, 2] --> [3, 4, 5, 6, 2]</p>\n  </blockquote>\n</blockquote>\n\n<p>I just want to return the changes to the main mother list without creating any new lists. How do I do that?</p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 18119, "user_id": 9284423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zakui.png?s=128&g=1", "display_name": "Henry Yik", "link": "https://stackoverflow.com/users/9284423/henry-yik"}, "is_accepted": false, "score": 1, "last_activity_date": 1567052215, "creation_date": 1567052215, "answer_id": 57702897, "question_id": 57701023, "link": "https://stackoverflow.com/questions/57701023/tkinter-notepad-program-trying-to-make-a-right-click-copy-paste-option-really-ne/57702897#57702897", "title": "tkinter notepad program trying to make a right click copy paste option really new to this can&#39;t get this to work", "body": "<p>You didn't bind <code>&lt;Button-3&gt;</code> to your <code>Text</code> widget.</p>\n\n<p>Simply add the below to your class constructor:</p>\n\n<pre><code>def __init__(self,**kwargs):\n    ...\n    self.__thisTextArea.bind(\"&lt;Button-3&gt;\",lambda e: self.__thisMenuBar.tk_popup(e.x_root + 40, e.y_root + 10, entry=\"0\"))\n</code></pre>\n\n<p>But generally I recommend making a rightclicker class instead, and apply to any widgets you want, like so:</p>\n\n<pre><code>import tkinter as tk\n\nroot = tk.Tk()\n\nclass RightClicker:\n    def __init__(self, e):\n        commands = [\"Cut\",\"Copy\",\"Paste\"]\n        menu = tk.Menu(None, tearoff=0, takefocus=0)\n\n        for txt in commands:\n            menu.add_command(label=txt, command=lambda e=e,txt=txt:self.click_command(e,txt))\n\n        menu.tk_popup(e.x_root + 40, e.y_root + 10, entry=\"0\")\n\n    def click_command(self, e, cmd):\n        e.widget.event_generate(f'&lt;&lt;{cmd}&gt;&gt;')\n\ntext = tk.Text(root)\ntext.pack()\ntext.bind(\"&lt;Button-3&gt;\", RightClicker)\nentry = tk.Entry(root)\nentry.pack()\nentry.bind(\"&lt;Button-3&gt;\", RightClicker)\nroot.mainloop()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 11535823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83d895df7b46ccac4fe6337bfa28229?s=128&d=identicon&r=PG&f=1", "display_name": "tmanrocks994", "link": "https://stackoverflow.com/users/11535823/tmanrocks994"}, "edited": false, "score": 0, "creation_date": 1567218998, "post_id": 57704013, "comment_id": 101909267, "body": "thank you so much. i did a python class a while ago and i found this part of it so interesting. you can do so much with tkinter. python idle( didnt know this till recently) was made completely with tkinter."}, {"owner": {"reputation": 129, "user_id": 11535823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83d895df7b46ccac4fe6337bfa28229?s=128&d=identicon&r=PG&f=1", "display_name": "tmanrocks994", "link": "https://stackoverflow.com/users/11535823/tmanrocks994"}, "edited": false, "score": 0, "creation_date": 1567219072, "post_id": 57704013, "comment_id": 101909278, "body": "im sure theres ways to do these exact same things in javascript/ etc but for now i got this down not till this past month did i know how to save stuff to places on your pc."}], "tags": [], "owner": {"reputation": 1755, "user_id": 9874393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zd1Tp.jpg?s=128&g=1", "display_name": "Bruno Vermeulen", "link": "https://stackoverflow.com/users/9874393/bruno-vermeulen"}, "is_accepted": true, "score": 2, "last_activity_date": 1572816600, "last_edit_date": 1572816600, "creation_date": 1567059202, "answer_id": 57704013, "question_id": 57701023, "link": "https://stackoverflow.com/questions/57701023/tkinter-notepad-program-trying-to-make-a-right-click-copy-paste-option-really-ne/57704013#57704013", "title": "tkinter notepad program trying to make a right click copy paste option really new to this can&#39;t get this to work", "body": "<p>A correct answer was given by Henry Yik. </p>\n\n<p>A complete version of Notepad with right click is given below. I have taken the liberty to refactor the program to make it more <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP8</a> compatible, mostly concerning variable names, not using wildcard imports (*) and removing some comments as code is self descriptive.</p>\n\n<pre><code>import os\nfrom tkinter import Tk, Text, Menu, Scrollbar, N, S, E, W, RIGHT, Y, END\nfrom tkinter.messagebox import showinfo\nfrom tkinter.filedialog import asksaveasfilename, askopenfilename\n\n\nclass RightClicker:\n    def __init__(self, event):\n        right_click_menu = Menu(None, tearoff=0, takefocus=0)\n\n        for txt in ['Cut', 'Copy', 'Paste']:\n            right_click_menu.add_command(\n                label=txt, command=lambda event=event, text=txt:\n                self.right_click_command(event, text))\n\n        right_click_menu.tk_popup(event.x_root + 40, event.y_root + 10, entry='0')\n\n    def right_click_command(self, event, cmd):\n        event.widget.event_generate(f'&lt;&lt;{cmd}&gt;&gt;')\n\n\nclass Notepad:\n\n    def __init__(self, **kwargs):\n        self.file_name = None\n        self.root = Tk()\n        self.root.title(\"Untitled - Notepad\")\n        self.text_area = Text(self.root)\n\n        menu_bar = Menu(self.root)\n        file_menu = Menu(menu_bar, tearoff=0)\n        edit_menu = Menu(menu_bar, tearoff=0)\n        help_menu = Menu(menu_bar, tearoff=0)\n        self.root.config(menu=menu_bar)\n\n        scrollbar = Scrollbar(self.text_area)\n        scrollbar.pack(side=RIGHT, fill=Y)\n        scrollbar.config(command=self.text_area.yview)\n        self.text_area.config(yscrollcommand=scrollbar.set)\n\n        self.text_area.bind('&lt;Button-3&gt;', RightClicker)\n\n        # set icon and window size (default is 300 x 300)\n        try:\n            self.root.wm_iconbitmap(\"Notepad.ico\")\n        except:   #pylint: disable=W0702\n            pass\n\n        try:\n            width = kwargs['width']\n        except KeyError:\n            width = 300\n\n        try:\n            height = kwargs['height']\n        except KeyError:\n            height = 300\n\n        # place notepad in the center of the screen\n        screen_width = self.root.winfo_screenwidth()\n        screen_height = self.root.winfo_screenheight()\n        left = (screen_width / 2) - (width / 2)\n        top = (screen_height / 2) - (height / 2)\n        self.root.geometry('%dx%d+%d+%d' % (width, height, left, top))\n\n        self.root.grid_rowconfigure(0, weight=1)\n        self.root.grid_columnconfigure(0, weight=1)\n\n        self.text_area.grid(sticky=N + E + S + W)\n\n        # file menu controls\n        file_menu.add_command(label=\"New\", command=self.new_file)\n        file_menu.add_command(label=\"Open\", command=self.open_file)\n        file_menu.add_command(label=\"Save\", command=self.save_file)\n        file_menu.add_separator()\n        file_menu.add_command(label=\"Exit\", command=self.quit_application)\n        menu_bar.add_cascade(label=\"File\", menu=file_menu)\n\n        # edit menu controls\n        edit_menu.add_command(label=\"Cut\", command=self.cut_text)\n        edit_menu.add_command(label=\"Copy\", command=self.copy_text)\n        edit_menu.add_command(label=\"Paste\", command=self.paste_text)\n        menu_bar.add_cascade(label=\"Edit\", menu=edit_menu)\n\n        # help menu controls\n        help_menu.add_command(label=\"About Notepad\", command=self.show_about)\n        menu_bar.add_cascade(label=\"Help\", menu=help_menu)\n\n    def quit_application(self):\n        self.root.destroy()\n\n    def show_about(self):\n        showinfo(\"Notepad\", \"Mrinal Verma\")\n\n    def open_file(self):\n        self.file_name = askopenfilename(\n            defaultextension=\".txt\",\n            filetypes=[(\"All Files\", \"*.*\"), (\"Text Documents\", \"*.txt\")])\n\n        if self.file_name == \"\":\n            self.file_name = None\n\n        else:\n            self.root.title(os.path.basename(self.file_name) + \" - Notepad\")\n            self.text_area.delete(1.0, END)\n\n            with open(self.file_name, 'r') as file:\n                self.text_area.insert(1.0, file.read())\n\n    def new_file(self):\n        self.root.title(\"Untitled - Notepad\")\n        self.file_name = None\n        self.text_area.delete(1.0, END)\n\n    def save_file(self):\n        if self.file_name is None:\n            self.file_name = asksaveasfilename(\n                initialfile='Untitled.txt', defaultextension=\".txt\",\n                filetypes=[(\"All Files\", \"*.*\"), (\"Text Documents\", \"*.txt\")])\n\n            if self.file_name == \"\":\n                self.file_name = None\n\n            else:\n                with open(self.file_name, 'w') as file:\n                    file.write(self.text_area.get(1.0, END))\n\n                self.root.title(os.path.basename(self.file_name) + \" - Notepad\")\n\n        else:\n            with open(self.file_name, 'w') as file:\n                file.write(self.text_area.get(1.0, END))\n\n    def cut_text(self):\n        self.text_area.event_generate(\"&lt;&lt;Cut&gt;&gt;\")\n\n    def copy_text(self):\n        self.text_area.event_generate(\"&lt;&lt;Copy&gt;&gt;\")\n\n    def paste_text(self):\n        self.text_area.event_generate(\"&lt;&lt;Paste&gt;&gt;\")\n\n    def run_notepad(self):\n        self.root.mainloop()\n\n\ndef main():\n    notepad = Notepad(width=600, height=400)\n    notepad.run_notepad()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11487730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08fbbfc9c8795e8542f4f9f93d88a7a7?s=128&d=identicon&r=PG&f=1", "display_name": "tmanrocks999", "link": "https://stackoverflow.com/users/11487730/tmanrocks999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 57704013, "answer_count": 2, "score": 0, "last_activity_date": 1572816600, "creation_date": 1567033501, "last_edit_date": 1572815962, "question_id": 57701023, "link": "https://stackoverflow.com/questions/57701023/tkinter-notepad-program-trying-to-make-a-right-click-copy-paste-option-really-ne", "title": "tkinter notepad program trying to make a right click copy paste option really new to this can&#39;t get this to work", "body": "<p>I have a basic notepad program that you can save stuff with but I want when you right click after highlighting something I want to be able to copy / paste.</p>\n\n<p>I haven't tried much not sure how to do this.</p>\n\n<p>Python code(notepad)</p>\n\n<pre><code>import tkinter \nimport os     \nfrom tkinter import *\nfrom tkinter.messagebox import *\nfrom tkinter.filedialog import *\n\nclass Notepad: \n    __root = Tk()\n\n# default window width and height \n__thisWidth = 300\n__thisHeight = 300\n__thisTextArea = Text(__root) \n__thisMenuBar = Menu(__root) \n__thisFileMenu = Menu(__thisMenuBar, tearoff=0) \n__thisEditMenu = Menu(__thisMenuBar, tearoff=0) \n__thisHelpMenu = Menu(__thisMenuBar, tearoff=0) \n\n# To add scrollbar \n__thisScrollBar = Scrollbar(__thisTextArea)      \n__file = None\n\ndef __init__(self,**kwargs): \n\n    # Set icon \n    try: \n            self.__root.wm_iconbitmap(\"Notepad.ico\")  \n    except: \n            pass\n\n    # Set window size (the default is 300x300) \n\n    try: \n        self.__thisWidth = kwargs['width'] \n    except KeyError: \n        pass\n\n    try: \n        self.__thisHeight = kwargs['height'] \n    except KeyError: \n        pass\n\n    # Set the window text \n    self.__root.title(\"Untitled - Notepad\") \n\n    # Center the window \n    screenWidth = self.__root.winfo_screenwidth() \n    screenHeight = self.__root.winfo_screenheight() \n\n    # For left-align \n    left = (screenWidth / 2) - (self.__thisWidth / 2)  \n\n    # For right-align \n    top = (screenHeight / 2) - (self.__thisHeight /2)  \n\n    # For top and bottom \n    self.__root.geometry('%dx%d+%d+%d' % (self.__thisWidth, \n                                          self.__thisHeight, \n                                          left, top))  \n\n    # To make the textarea auto resizable \n    self.__root.grid_rowconfigure(0, weight=1) \n    self.__root.grid_columnconfigure(0, weight=1) \n\n    # Add controls (widget) \n    self.__thisTextArea.grid(sticky = N + E + S + W) \n\n    # To open new file \n    self.__thisFileMenu.add_command(label=\"New\", \n                                    command=self.__newFile)     \n\n    # To open a already existing file \n    self.__thisFileMenu.add_command(label=\"Open\", \n                                    command=self.__openFile) \n\n    # To save current file \n    self.__thisFileMenu.add_command(label=\"Save\", \n                                    command=self.__saveFile)     \n\n    # To create a line in the dialog         \n    self.__thisFileMenu.add_separator()                                          \n    self.__thisFileMenu.add_command(label=\"Exit\", \n                                    command=self.__quitApplication) \n    self.__thisMenuBar.add_cascade(label=\"File\", \n                                   menu=self.__thisFileMenu)      \n\n    # To give a feature of cut  \n    self.__thisEditMenu.add_command(label=\"Cut\", \n                                    command=self.__cut)              \n\n    # to give a feature of copy     \n    self.__thisEditMenu.add_command(label=\"Copy\", \n                                    command=self.__copy)          \n\n    # To give a feature of paste \n    self.__thisEditMenu.add_command(label=\"Paste\", \n                                    command=self.__paste)          \n\n    # To give a feature of editing \n    self.__thisMenuBar.add_cascade(label=\"Edit\", \n                                   menu=self.__thisEditMenu)      \n\n    # To create a feature of description of the notepad \n    self.__thisHelpMenu.add_command(label=\"About Notepad\", \n                                    command=self.__showAbout)  \n    self.__thisMenuBar.add_cascade(label=\"Help\", \n                                   menu=self.__thisHelpMenu) \n\n    self.__root.config(menu=self.__thisMenuBar) \n\n    self.__thisScrollBar.pack(side=RIGHT,fill=Y)                     \n\n    # Scrollbar will adjust automatically according to the content         \n    self.__thisScrollBar.config(command=self.__thisTextArea.yview)      \n    self.__thisTextArea.config(yscrollcommand=self.__thisScrollBar.set) \n\n\ndef __quitApplication(self): \n    self.__root.destroy() \n    # exit() \n\ndef __showAbout(self): \n    showinfo(\"Notepad\",\"Mrinal Verma\") \n\ndef __openFile(self): \n\n    self.__file = askopenfilename(defaultextension=\".txt\", \n                                  filetypes=[(\"All Files\",\"*.*\"), \n                                    (\"Text Documents\",\"*.txt\")]) \n\n    if self.__file == \"\": \n\n        # no file to open \n        self.__file = None\n    else: \n\n        # Try to open the file \n        # set the window title \n        self.__root.title(os.path.basename(self.__file) + \" - Notepad\") \n        self.__thisTextArea.delete(1.0,END) \n\n        file = open(self.__file,\"r\") \n\n        self.__thisTextArea.insert(1.0,file.read()) \n\n        file.close() \n\n\n\n\n\n\n\ndef __newFile(self): \n    self.__root.title(\"Untitled - Notepad\") \n    self.__file = None\n    self.__thisTextArea.delete(1.0,END) \n\ndef __saveFile(self): \n\n    if self.__file == None: \n        # Save as new file \n        self.__file = asksaveasfilename(initialfile='Untitled.txt', \n                                        defaultextension=\".txt\", \n                                        filetypes=[(\"All Files\",\"*.*\"), \n                                            (\"Text Documents\",\"*.txt\")]) \n\n        if self.__file == \"\": \n            self.__file = None\n        else: \n\n            # Try to save the file \n            file = open(self.__file,\"w\") \n            file.write(self.__thisTextArea.get(1.0,END)) \n            file.close() \n\n            # Change the window title \n            self.__root.title(os.path.basename(self.__file) + \" - Notepad\") \n\n\n    else: \n        file = open(self.__file,\"w\") \n        file.write(self.__thisTextArea.get(1.0,END)) \n        file.close() \n\ndef __cut(self): \n    self.__thisTextArea.event_generate(\"&lt;&lt;Cut&gt;&gt;\") \n\ndef __copy(self): \n    self.__thisTextArea.event_generate(\"&lt;&lt;Copy&gt;&gt;\") \n\ndef __paste(self): \n    self.__thisTextArea.event_generate(\"&lt;&lt;Paste&gt;&gt;\") \n\ndef run(self): \n\n    # Run main application \n    self.__root.mainloop() \n\n\n\n\n\n\n\n# Run main application \nnotepad = Notepad(width=600,height=400) \nnotepad.run() \n</code></pre>\n\n<p>What I thought would work</p>\n\n<pre><code>w = Label(root, text=\"Right-click to display menu\", width=40, height=20)\nw.pack()\n\n# create a menu\npopup = Menu(root, tearoff=0)\npopup.add_command(label=\"Next\") # , command=next) etc...\npopup.add_command(label=\"Previous\")\npopup.add_separator()\npopup.add_command(label=\"Home\")\n\ndef do_popup(event):\n# display the popup menu\ntry:\n    popup.tk_popup(event.x_root, event.y_root, 0)\nfinally:\n    # make sure to release the grab (Tk 8.0a1 only)\n    popup.grab_release()\n\nw.bind(\"&lt;Button-3&gt;\", do_popup)\n\nb = Button(root, text=\"Quit\", command=root.destroy)\n b.pack()\n</code></pre>\n\n<p>I expect when u right click after highlighting that you can copy paste. At the moment there is no right click menu or function for copying/ pasting. u can remove the tab on the top for copy paste if it can be put in a right click popup.</p>\n"}, {"tags": ["python", "pandas", "hyphen"], "owner": {"reputation": 31, "user_id": 11975571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9301800ca7282b5c88e1c8beee8bdb25?s=128&d=identicon&r=PG&f=1", "display_name": "magix", "link": "https://stackoverflow.com/users/11975571/magix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567033454, "creation_date": 1567033454, "question_id": 57701020, "link": "https://stackoverflow.com/questions/57701020/filtering-datatable-with-dropdowns", "title": "Filtering datatable with dropdowns", "body": "<p>I have a datatable in Dash and I need to let user filter it with dropdowns (basic filtering doesn't have multifilter and I have to get rid of typing). I created dropdowns, but I have no idea how to write my callback. I'm pasting code for dropdowns and datatable below and would be happy if anyone could help.</p>\n\n<pre><code>    html.Div([\ndcc.Dropdown(id='owner', options=[\n    {'label': i, 'value': i} for i in df.O_Name.unique()\n], multi=True, placeholder='Select owner'),\nhtml.Div(id='owners')],\nstyle={'width': '15%', 'display': 'inline-block'}),\n\n        html.Div([\ndcc.Dropdown(id='source', options=[\n    {'label': i, 'value': i} for i in df.PZ_Name_Source.unique()\n], multi=True, placeholder='Select source'),\nhtml.Div(id='sources')],\nstyle={'width': '15%', 'display': 'inline-block'}),\n\n        html.Div([\ndcc.Dropdown(id='destination', options=[\n    {'label': i, 'value': i} for i in df.PZ_Name_Destination.unique()\n], multi=True, placeholder='Select destination'),\nhtml.Div(id='destinations')],\nstyle={'width': '15%', 'display': 'inline-block'}),\n\n        html.Div([\ndcc.Dropdown(id='tariff', options=[\n    {'label': i, 'value': i} for i in df.TariffName.unique()\n], multi=True, placeholder='Select tariff'),\nhtml.Div(id='tariffs')],\nstyle={'width': '15%', 'display': 'inline-block'}),\n\n        html.Div([\ndcc.Dropdown(id='period', options=[\n    {'label': i, 'value': i} for i in df.Period.unique()\n], multi=True, placeholder='Select period'),\nhtml.Div(id='periods')],\nstyle={'width': '15%', 'display': 'inline-block'}),\n\n\n    html.A(\n    html.Button('Export to CSV'),\n    id='download-link',\n    download=\"coeffmap.csv\",\n    href=\"\",\n    target=\"_blank\"\n    ),\n\n\n    html.A(\n    html.Button('Export to SQL'),\n    id='sql-link',\n    #download=\"coeffmap.csv\",\n    href=\"\",\n    target=\"_blank\"\n    ),   \n\n\nhtml.Div([dash_table.DataTable(\n    id='datatable',\n    columns=[\n        {\"name\": i, \"id\": i, \"deletable\": True} for i in df.columns\n    ],\n    data=df.to_dict('rows'),\n    #export_format='csv',\n    #export_headers='names',\n    editable=True,\n    filter_action=\"native\",\n    sort_action=\"native\",\n    sort_mode=\"multi\",\n    row_selectable=\"multi\",\n    row_deletable=True,\n    selected_rows=[],\n    page_action=\"native\",\n\n    page_current= 0,\n    page_size= 10000,\n),\nhtml.Div(id='table')]),\n html.Div(id='datatable-interactivity-container')\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "scikit-learn"], "comments": [{"owner": {"reputation": 870, "user_id": 9000214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c81671108bc0838742fb4ca9c0daaea8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9000214/mike"}, "edited": false, "score": 0, "creation_date": 1567033811, "post_id": 57701019, "comment_id": 101845894, "body": "Not entirely sure If I&#39;m correct on this but If I recall correctly, the left out data is that which is used for cross validation and it&#39;s being split from the total data randomly. Usually you use more like 25% of the data for Cross Validation though."}], "answers": [{"tags": [], "owner": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "is_accepted": true, "score": 0, "last_activity_date": 1567034108, "creation_date": 1567034108, "answer_id": 57701087, "question_id": 57701019, "link": "https://stackoverflow.com/questions/57701019/what-is-the-left-out-data-how-the-data-is-being-left-out-by-sklearn-model-se/57701087#57701087", "title": "What is &quot;the left out data&quot;? How the data is being left out by `sklearn.model_selection.GridSearchCV`?", "body": "<p>From the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html\" rel=\"nofollow noreferrer\">documentation</a>, this Grid search method takes in a parameter called <code>cv</code>:</p>\n\n<blockquote>\n  <p>cv : int, cross-validation generator or an iterable, optional</p>\n</blockquote>\n\n<p>This determines the value of <code>K</code> in KFold cross validation. It also provides other strategies you can follow.</p>\n\n<blockquote>\n  <p>For integer/None inputs, if the estimator is a classifier and y is either binary or multiclass, StratifiedKFold is used. In all other cases, KFold is used.</p>\n</blockquote>\n\n<p>So to answer your question, the grid search loops through the parameter space and for each parameter, conducts, for eg, 3-fold cross validation. As you can guess, this will involve leaving some (1/3rs in this case) data out at each step to calculate the prediction accuracy. This is the data that is being left out.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11566345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 57701087, "answer_count": 1, "score": 0, "last_activity_date": 1567034108, "creation_date": 1567033454, "last_edit_date": 1592644375, "question_id": 57701019, "link": "https://stackoverflow.com/questions/57701019/what-is-the-left-out-data-how-the-data-is-being-left-out-by-sklearn-model-se", "title": "What is &quot;the left out data&quot;? How the data is being left out by `sklearn.model_selection.GridSearchCV`?", "body": "<p>The doc of <code>sklearn.model_selection.GridSearchCV</code> says</p>\n<blockquote>\n<p>Estimator that was chosen by the search, i.e. estimator which gave highest score (or smallest loss if specified) on the left out data. Not available if refit=False.</p>\n<p>...</p>\n<p>The parameters selected are those that maximize the score of the left out data, unless an explicit score is passed in which case it is used instead.</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/49455806/gridsearchcv-final-model/49457445#49457445\">lots</a> people of SO also <a href=\"https://stackoverflow.com/questions/47783247/different-model-performance-evaluations-by-statsmodels-and-scikit-learn/47783775#47783775\">use</a> this <a href=\"https://stackoverflow.com/questions/24096146/how-is-scikit-learn-gridsearchcv-best-score-calculated\">term</a>.</p>\n<p>What is &quot;the left out data&quot;? Is it the left out part of cross-validation, for instance, 1/10 of the dataset?</p>\n<p>How the data is being left out by <code>sklearn.model_selection.GridSearchCV</code>?</p>\n"}, {"tags": ["python", "python-asyncio"], "comments": [{"owner": {"reputation": 1634, "user_id": 3920623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5c370ff84779b0a0cd4eb3ba3386e3?s=128&d=identicon&r=PG&f=1", "display_name": "constt", "link": "https://stackoverflow.com/users/3920623/constt"}, "edited": false, "score": 1, "creation_date": 1567049774, "post_id": 57701003, "comment_id": 101848653, "body": "I think <a href=\"https://stackoverflow.com/a/34499904/3920623\">this</a> is the right answer you&#39;re looking for."}, {"owner": {"reputation": 1048, "user_id": 2752129, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/504648913/picture?type=large", "display_name": "Matt Takao", "link": "https://stackoverflow.com/users/2752129/matt-takao"}, "reply_to_user": {"reputation": 1634, "user_id": 3920623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5c370ff84779b0a0cd4eb3ba3386e3?s=128&d=identicon&r=PG&f=1", "display_name": "constt", "link": "https://stackoverflow.com/users/3920623/constt"}, "edited": false, "score": 0, "creation_date": 1567098693, "post_id": 57701003, "comment_id": 101871839, "body": "thank you that seems to work"}], "owner": {"reputation": 1048, "user_id": 2752129, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/504648913/picture?type=large", "display_name": "Matt Takao", "link": "https://stackoverflow.com/users/2752129/matt-takao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567033325, "creation_date": 1567033325, "question_id": 57701003, "link": "https://stackoverflow.com/questions/57701003/asyncio-among-multiple-classes", "title": "Asyncio among multiple classes", "body": "<p>I'm fairly new to asyncio, and I'm not sure what is the best approach to what I'm trying to achieve.</p>\n\n<p>I have several classes, one of which will instantiate instances of the others. It will also be running a loop of listening to messages, and calling methods of other classes when it receives certain messages. </p>\n\n<p>The issue is these classes also need to run loops. Currently, I have this in my main class, as the last thing in the <code>__init__</code> def:</p>\n\n<pre><code>    ...\n    self.loop = asyncio.new_event_loop()\n    asyncio.set_event_loop(self.loop)\n    self.loop.run_until_complete(self.start_services())\n</code></pre>\n\n<p><code>self.start_services()</code> will then go on to do some things, wait for a message to be sent to start services (which all works fine), then attempts to instantiate the other classes:</p>\n\n<pre><code>    # load TPE services\n    self.logger.log(f'Loading services for TPEs: {trading_pair_exchanges}...')\n    for tpe in trading_pair_exchanges:\n        TradingPairExchangeDataService.TradingPairExchangeDataService(tpe, ['EMA26'])\n\n    # load realtime service\n    self.logger.log('Loading RealtimeService...')\n    RealTimeDataService.RealTimeDataService(trading_pair_exchanges, ['EMA26'])\n</code></pre>\n\n<p>Now the problem. As standalone tests, these classes would start their async functions like this (this would be at the end of the <code>__init__</code> def:</p>\n\n<pre><code>    loop = asyncio.get_event_loop()\n    loop.run_until_complete(self.retrieve_real_time_data())\n</code></pre>\n\n<p>This doesn't work, I've looked at a few articles but couldn't find a solution, although I now know that this is like starting a job scheduler inside a job scheduler. </p>\n\n<p>I've tried awaiting, calling a non-async function that would then await <code>self.retrieve_real_time_data()</code>, but nothing has worked so far. </p>\n\n<p>What can I do to easily add an async method to a running loop, <strong>from inside the loop while it's running, and from an <code>__init__</code>?</strong></p>\n"}, {"tags": ["python", "linux", "awk", "sh"], "comments": [{"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 2, "creation_date": 1567056398, "post_id": 57700977, "comment_id": 101850011, "body": "You should not use <code>cat</code>, both <code>grep</code> and <code>awk</code> can read file directly.  If you post output example of  <code>grep -C 5 &#39;Type: UNKNOWN&#39; </code> we may be able to all this with just one <code>awk</code> command."}], "answers": [{"tags": [], "owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "is_accepted": false, "score": 1, "last_activity_date": 1567033712, "creation_date": 1567033712, "answer_id": 57701047, "question_id": 57700977, "link": "https://stackoverflow.com/questions/57700977/python-os-system-command-skips-spaces-associated-with-awk-in-command/57701047#57701047", "title": "python os.system command skips spaces &quot; &quot; associated with awk in command", "body": "<p>Escape the <code>\"</code></p>\n\n<pre><code>os.system(\"cat syslog | grep -C 5 'Type: UNKNOWN' |grep 'INITIAL  VALUE = *' |awk '{a[$12]++ } END { for (b in a) { if (length(b) &gt; 11) print $1 \\\" \\\" $2  \\\" \\\"  $3 \\\" \\\"  b }}' &gt;&gt; uniqueCode.txt\")\n</code></pre>\n"}], "owner": {"reputation": 574, "user_id": 6302996, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/edab05f559752733cc153551b3548f10?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Kulkarni", "link": "https://stackoverflow.com/users/6302996/nikhil-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567033712, "creation_date": 1567033089, "question_id": 57700977, "link": "https://stackoverflow.com/questions/57700977/python-os-system-command-skips-spaces-associated-with-awk-in-command", "title": "python os.system command skips spaces &quot; &quot; associated with awk in command", "body": "<pre><code>os.system(\"cat syslog | grep -C 5 'Type: UNKNOWN' |grep 'INITIAL  VALUE = *' |awk '{a[$12]++ } END { for (b in a) { if (length(b) &gt; 11) print $1 \" \" $2  \" \"  $3 \" \"  b }}' &gt;&gt; uniqueCode.txt\")\n</code></pre>\n\n<p>the output of the above script is </p>\n\n<pre><code>Aug2722:45:3313452566773\nAug2722:45:3313452566376\n</code></pre>\n\n<p>but it must be </p>\n\n<pre><code>Aug 27 22:45:33 13452566773\nAug 27 22:45:33 13452566376\n</code></pre>\n\n<p>I have tried to add space with \" \" in awk but it is not working, wanted to know is there any way i can add the space </p>\n"}, {"tags": ["python", "oop", "python-2.x"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1567033092, "post_id": 57700927, "comment_id": 101845771, "body": "Where did you come up with <code>__missing__</code>?"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1567033093, "post_id": 57700927, "comment_id": 101845772, "body": "Why would the call be made with <code>exec</code>? Why not have <code>expr</code> take the arg <code>a</code> and then you can return it? Just trying to figure out the use case here, since <code>exec(expr.__code__)</code> does the same thing as <code>expr()</code>"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1567033233, "post_id": 57700927, "comment_id": 101845801, "body": "Can you show how you are using that <code>exec</code> statement?"}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "edited": false, "score": 0, "creation_date": 1567033555, "post_id": 57700927, "comment_id": 101845850, "body": "@JacoblRR , because <b>missing</b> is called when a variable is not present in the environment"}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "edited": false, "score": 0, "creation_date": 1567033676, "post_id": 57700927, "comment_id": 101845865, "body": "@ C.Nivs, I need to pass the environment in which the variables will be stored."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1567033690, "post_id": 57700927, "comment_id": 101845870, "body": "So what exactly are you trying to get to happen? Can you show us a few lines that might invoke this behavior? I have a feeling a <code>try&#47;except NameError</code> might be a better option"}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1567033928, "post_id": 57700927, "comment_id": 101845910, "body": "@C.Nivs , First, an instance of the expr class is initialized <code>expenv = ExprGlobals()</code>, then it is passed to exec. <code>exec (expr.__code__, expenv)</code>"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1567034201, "post_id": 57700927, "comment_id": 101845963, "body": "Yes but <i>why</i>? Not trying to be condescending here, it just looks like you are trying to solve a problem with this code, and there could potentially be easier ways to accomplish such a task"}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1567034407, "post_id": 57700927, "comment_id": 101846006, "body": "@C.Nivs I have an assignment. It says do it because it&#39;s part of another big program."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567034635, "post_id": 57700927, "comment_id": 101846056, "body": "this is working for me... I am not seeing any errors, and when I check the namespace, it has the expected <code>(&#39;a&#39;, 7)</code> pair. What Python version are you on? Note this will shadow <code>builtin</code> names, such as <code>list</code>, <code>print</code> etc with your default value from <code>__missing__</code>"}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1567035416, "post_id": 57700927, "comment_id": 101846184, "body": "@juanpa.arrivillaga, I use python 2.7."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567035526, "post_id": 57700927, "comment_id": 101846207, "body": "@AndrewYachmenyov well, there are significant differences with regards to <code>exec</code> between python 2 and 3. Why are you using Python 2 to begin with? It&#39;s essentially at it&#39;s official end of life. Anyway, I&#39;ll add a Python 2 tag, maybe someone knows this arcane corner"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567035716, "post_id": 57700927, "comment_id": 101846238, "body": "I&#39;ll note from the <a href=\"https://docs.python.org/2/reference/simple_stmts.html#grammar-token-exec-stmt\" rel=\"nofollow noreferrer\">documentation</a> that it says that the globals must be a dictionary, which may mean it try to convert everything with <code>dict</code>. EDIT: linked duplicate confirms, custom dicts were not allowed prior to Python 3.3."}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567036073, "post_id": 57700927, "comment_id": 101846295, "body": "@juanpa.arrivillaga If I understand correctly, ExprGlobals OrderedDict inherits from which inherits dict. If I declare this variable in the constructor of the ExprGlobals class, the code will work without errors. Hence the error in the __missing__method. More precisely, it does not work for some reason."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567036292, "post_id": 57700927, "comment_id": 101846340, "body": "@AndrewYachmenyov read the linked duplicate: <b>you cannot use custom <code>dict</code> objects for the global namespace prior to Python 3.3, exec would use the underlying C API</b> I&#39;m not sure what you mean by &quot;If I declare this variable in the constructor of the ExprGlobals class, the code will work without errors. Hence the error in the <code>__missing__</code> method.&quot; but it doesn&#39;t sound like a valid inference to me."}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567036615, "post_id": 57700927, "comment_id": 101846400, "body": "@juanpa.arrivillaga thank you for this information. I will be thinking about it. EDIT: I will now complete the question."}, {"owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567037311, "post_id": 57700927, "comment_id": 101846501, "body": "@juanpa.arrivillaga I updated the question."}], "owner": {"reputation": 1, "user_id": 11991559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CywUi2FQqmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOk_1HyW9SG8aOe0bxHyK2oZm4Nw/photo.jpg?sz=128", "display_name": "Andrew Yachmenyov", "link": "https://stackoverflow.com/users/11991559/andrew-yachmenyov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1567035785, "answer_count": 0, "score": 0, "last_activity_date": 1567036921, "creation_date": 1567032616, "last_edit_date": 1567036921, "question_id": 57700927, "link": "https://stackoverflow.com/questions/57700927/how-to-make-the-missing-variables-are-automatically-created", "closed_reason": "Duplicate", "title": "How to make the missing variables are automatically created?", "body": "<p>I need implement an expression like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def expr():\n    return a\n</code></pre>\n\n<p>The call must be made using exec:\n<code>exec(expr.__code__, expenv)</code>\nwhere <code>expenv</code> it's instance of class that inherited ordereddict. All missing variables must be created automaticaly.</p>\n\n<p>I'm tried to override <code>__missing__</code> method, but it doesn't work.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from collections import OrderedDict\n\n\nclass ExprGlobals(OrderedDict):\n\n    def __init__(self):\n        super(ExprGlobals, self).__init__()\n\n    def __missing__(self, key):\n        self[key] = 7\n        return self[key]\n\n\ndef expr():\n    return a\n\n\nexpenv = ExprGlobals()\nexec (expr.__code__, expenv)\n\n</code></pre>\n\n<p>The output is <strong>NameError: global name 'a' is not defined</strong>.\nThe variable a should be created automatically and be equal to 7.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from collections import OrderedDict\n\n\nclass ExprGlobals(OrderedDict):\n\n    def __init__(self):\n        self['a'] = 7\n        super(ExprGlobals, self).__init__()\n\n    def __missing__(self, key):\n        self[key] = 7\n        return self[key]\n\n\ndef expr():\n    return a\n\n\nexpenv = ExprGlobals()\nexec (expr.__code__, expenv)\n\n</code></pre>\n\n<p>This code will run without errors. But this is not the solution. </p>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy", "dataframe"], "comments": [{"owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "edited": false, "score": 0, "creation_date": 1567032623, "post_id": 57700913, "comment_id": 101845665, "body": "Please include the code you tried."}, {"owner": {"reputation": 11, "user_id": 10141423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe3a38de5bcb73278320ab0d9ec3e09?s=128&d=identicon&r=PG&f=1", "display_name": "abudda", "link": "https://stackoverflow.com/users/10141423/abudda"}, "edited": false, "score": 0, "creation_date": 1567033977, "post_id": 57700913, "comment_id": 101845917, "body": "The goal isnt simply just to merge the two dataframes. The &quot;ID&quot; for both DFs has to match before it is replaced"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1567035212, "post_id": 57700913, "comment_id": 101846149, "body": "That is the whole purpose of joining. It&#39;s simply <code>df1.merge(df2, on=&#39;ID&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "edited": false, "score": 1, "creation_date": 1567033079, "post_id": 57700961, "comment_id": 101845769, "body": "you can also include <code>on</code> variable <code>pd.merge(df2, df1, how=&#39;inner&#39;, on=&#39;ID&#39;)</code>"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1567033647, "post_id": 57700961, "comment_id": 101845861, "body": "Did you these answers? Because they are both wrong"}, {"owner": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1567036300, "post_id": 57700961, "comment_id": 101846342, "body": "I might have misunderstood the problem. Could you help me understand why I was wrong?"}], "tags": [], "owner": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "is_accepted": false, "score": -1, "last_activity_date": 1567032931, "creation_date": 1567032931, "answer_id": 57700961, "question_id": 57700913, "link": "https://stackoverflow.com/questions/57700913/comparing-columns-in-two-different-dataframes-for-matching-values-pandas/57700961#57700961", "title": "Comparing columns in two different dataframes for matching values Pandas", "body": "<p>Seems like a <code>merge</code> problem</p>\n\n<pre><code>pd.merge(df2, df1, how='inner')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 2649475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09uBA.jpg?s=128&g=1", "display_name": "kelmouloudi", "link": "https://stackoverflow.com/users/2649475/kelmouloudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1567034555, "creation_date": 1567034555, "answer_id": 57701141, "question_id": 57700913, "link": "https://stackoverflow.com/questions/57700913/comparing-columns-in-two-different-dataframes-for-matching-values-pandas/57701141#57701141", "title": "Comparing columns in two different dataframes for matching values Pandas", "body": "<p>Try:</p>\n\n<pre><code>df = df1.merge(df2, on='ID', how='left')\ndf[['NAME', 'EMAIL', 'ROLE-ID']]\n</code></pre>\n\n<p>It gives the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lToRw.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n"}, {"tags": [], "owner": {"reputation": 439, "user_id": 5592561, "user_type": "registered", "profile_image": "https://graph.facebook.com/1028383897183902/picture?type=large", "display_name": "Ric Hard", "link": "https://stackoverflow.com/users/5592561/ric-hard"}, "is_accepted": false, "score": 0, "last_activity_date": 1567039422, "creation_date": 1567039422, "answer_id": 57701601, "question_id": 57700913, "link": "https://stackoverflow.com/questions/57700913/comparing-columns-in-two-different-dataframes-for-matching-values-pandas/57701601#57701601", "title": "Comparing columns in two different dataframes for matching values Pandas", "body": "<p>You did not exactly state what should happen if id is not found or is avail multiple times this may not be 100% what you want. It will leave the id untouched then.B ut guess otherwise its what you wanted.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf1 = pd.DataFrame([[1,'a'],\n                    [7,'b'],\n                    [3,'e'],\n                    [2,'c']], columns=['id', 'name'])\n\ndf2 = pd.DataFrame([[1,2],\n                    [3,8],\n                    [2,10]], columns=['id', 'role'])\n\n# collect roles\nroles = []\nfor id in df1.loc[:, 'id']:\n    indices = df2.loc[:,'id'] == id\n    if np.sum(indices) == 1:\n        roles.append(df2.loc[indices, 'role'].iloc[0])\n    else:\n        # take id if role id is not given\n        roles.append(id)  # could also be None if not wanted\n\n# add role id col\ndf1.loc[:,'role-id'] = roles\n\n# delete old id\ndel df1['id']\n\nprint(df1)\n</code></pre>\n\n<p>DF1:</p>\n\n<pre><code>   id name\n0   1    a\n1   7    b\n2   3    e\n3   2    c\n</code></pre>\n\n<p>DF2:</p>\n\n<pre><code>   id  role\n0   1     2\n1   3     8\n2   2    10\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>  name  role-id\n0    a        2\n1    b        7\n2    e        8\n3    c       10\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10141423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe3a38de5bcb73278320ab0d9ec3e09?s=128&d=identicon&r=PG&f=1", "display_name": "abudda", "link": "https://stackoverflow.com/users/10141423/abudda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 323, "favorite_count": 0, "closed_date": 1567043787, "answer_count": 3, "score": 1, "last_activity_date": 1567039422, "creation_date": 1567032489, "last_edit_date": 1567034319, "question_id": 57700913, "link": "https://stackoverflow.com/questions/57700913/comparing-columns-in-two-different-dataframes-for-matching-values-pandas", "closed_reason": "Duplicate", "title": "Comparing columns in two different dataframes for matching values Pandas", "body": "<p>Here is what my two dataframes look like:</p>\n\n<p><strong>DF1</strong></p>\n\n<pre><code>NAME   EMAIL                ID\nMark   mark@gmail.com      8974\nSam    sam@gmail.com       9823\nJune   june@gmail.com      0972\nDavid  david@gmail.com     2143\n</code></pre>\n\n<p><strong>DF2</strong></p>\n\n<pre><code>ID     ROLE-ID\n2143      22\n0972      34\n8974      98\n9823      54\n</code></pre>\n\n<p>What I need to help doing:</p>\n\n<p>I need to COMPARE the ID column for both dataframes and if the ID from DF1 MATCHES with the ID of DF2, I need to replace the ID column in DF1 with the respective ROLE-ID from DF2. </p>\n\n<p>The output would look like this:</p>\n\n<p><strong>Updated DF1</strong></p>\n\n<pre><code>NAME   EMAIL               ROLE-ID\nMark   mark@gmail.com        98\nSam    sam@gmail.com         54\nJune   june@gmail.com        34\nDavid  david@gmail.com       22\n</code></pre>\n\n<p>I am using the Pandas library and tried the merge function with conditions but it didnt work</p>\n\n<pre><code>    print(pd.merge(df1, df2, on=(df1['Id'] == df2[])))\n</code></pre>\n"}, {"tags": ["python", "for-loop", "get", "python-datetime"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4688490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-cEAFalz7qCY/AAAAAAAAAAI/AAAAAAAAArc/6rCzPuAT0_8/photo.jpg?sz=128", "display_name": " KM Prak", "link": "https://stackoverflow.com/users/4688490/km-prak"}, "edited": false, "score": 0, "creation_date": 1567033191, "post_id": 57700902, "comment_id": 101845790, "body": "can you please help me pseudo code ..how to get the list of hotel , if i put 12:30 pm ..."}], "tags": [], "owner": {"reputation": 23, "user_id": 6706815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572229649459206/picture?type=large", "display_name": "Patrick Nasser", "link": "https://stackoverflow.com/users/6706815/patrick-nasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1567034069, "last_edit_date": 1567034069, "creation_date": 1567032439, "answer_id": 57700902, "question_id": 57700864, "link": "https://stackoverflow.com/questions/57700864/get-time-range-from-a-string/57700902#57700902", "title": "Get time range from a string", "body": "<p>Why don't read your csv with pandas and use '<a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html\" rel=\"nofollow noreferrer\">loc</a>'? </p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv(\"file_path\")\ndf = df.set_index(\"timestamp colum name\")\n\ntime = input(\"timestamp\")\nprint(df.loc[time,'hotel column name'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11991662, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/60c9bd129f65bc765b53a3b455cb9851?s=128&d=identicon&r=PG", "display_name": "user11991662", "link": "https://stackoverflow.com/users/11991662/user11991662"}, "is_accepted": false, "score": 1, "last_activity_date": 1567034426, "last_edit_date": 1592644375, "creation_date": 1567034426, "answer_id": 57701128, "question_id": 57700864, "link": "https://stackoverflow.com/questions/57700864/get-time-range-from-a-string/57701128#57701128", "title": "Get time range from a string", "body": "<h1>read the data file</h1>\n<pre><code>import pandas as pd \n\ndata = pd.read_csv(&quot;os.path.join(&quot;C:\\Users\\me\\Desktop&quot;,&quot;myCSVfile.csv&quot;)) \n</code></pre>\n<h1>finding trump tower in your dataframe</h1>\n<pre><code>filter = data[&quot;Hotelname&quot;]==&quot;Trump tower&quot;\n\ndataiwannause=data.where(filter, inplace = True) \n</code></pre>\n<p>Alternative try:</p>\n<pre><code>dataiwannause=data[data.Hotelname==&quot;Trump tower&quot;]\ndataiwannause=data[data[Hotelname]==&quot;Trump tower&quot;]\n</code></pre>\n<p>if you work with CSV files or XLSX files please get pandas... its really worth it\nI didnt doublecheck the code, but its something like that you need i think.\nI tried to work with csv reader, when i was new and it really sux compared to pandas.</p>\n<p>Read the &quot;10 minutes to pandas tutorial&quot;. It will save you so much time in the long run\n<a href=\"https://pandas.pydata.org/pandas-docs/stable/getting_started/10min.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/getting_started/10min.html</a></p>\n"}], "owner": {"reputation": 117, "user_id": 4688490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-cEAFalz7qCY/AAAAAAAAAAI/AAAAAAAAArc/6rCzPuAT0_8/photo.jpg?sz=128", "display_name": " KM Prak", "link": "https://stackoverflow.com/users/4688490/km-prak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1567038610, "creation_date": 1567032005, "last_edit_date": 1567038610, "question_id": 57700864, "link": "https://stackoverflow.com/questions/57700864/get-time-range-from-a-string", "title": "Get time range from a string", "body": "<p>I have a csv file which contains two columns, Hotel name(xxx)  and a string indicating the time it is open e.g.: <code>Mon-Thu, Sun 11:30 am - 10 pm  / Fri-Sat 11:30 am - 10:30 pm</code> . I want to get the list of hotels that are open at a specific time.\nThis is what I've tried:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import csv\nimport sys\nf = open(sys.argv[1],'rt')\nfinal = []\ntry:\n  reader=csv.reader(f)\n  for row in reader:\n   print row\n   final.append(row[0])\n  print final\nfinally:\n f.close()\n\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "testing"], "comments": [{"owner": {"reputation": 2331, "user_id": 2338323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/0zpne.jpg?s=128&g=1", "display_name": "SteveJ", "link": "https://stackoverflow.com/users/2338323/stevej"}, "edited": false, "score": 0, "creation_date": 1567032065, "post_id": 57700817, "comment_id": 101845542, "body": "Assuming this is homework or a quiz, and not wanting to give too much away - you want a &quot;sorted&quot; list of &quot;distinct&quot; values -- run with that. Also, you could cheat and use slicing."}], "answers": [{"tags": [], "owner": {"reputation": 2159, "user_id": 2614637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443082cbe3730d73329d4c45221da6fc?s=128&d=identicon&r=PG", "display_name": "Prem Anand", "link": "https://stackoverflow.com/users/2614637/prem-anand"}, "is_accepted": true, "score": 2, "last_activity_date": 1567031704, "creation_date": 1567031704, "answer_id": 57700828, "question_id": 57700817, "link": "https://stackoverflow.com/questions/57700817/what-one-line-code-algorithm-in-python-3-will-give-such-result/57700828#57700828", "title": "What one line code algorithm in python 3 will give such result?", "body": "<p>How about <code>sort</code>ing the list after removing duplicates, by converting to <code>set</code>?</p>\n\n<pre><code>&gt;&gt;&gt; a = sorted(set(a))\n[1, 2, 3, 4, 5, 6, 7, 8]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11861548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HAbi0s-eUpM/AAAAAAAAAAI/AAAAAAAAAxE/3XtEpooujyQ/photo.jpg?sz=128", "display_name": "hyperGeek", "link": "https://stackoverflow.com/users/11861548/hypergeek"}, "edited": false, "score": 0, "creation_date": 1567280687, "post_id": 57700895, "comment_id": 101921271, "body": "ohh i see.. i initially found out i could go with the set method although i haven&#39;t tried your stated method yet. thank you"}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 0, "last_activity_date": 1567032317, "creation_date": 1567032317, "answer_id": 57700895, "question_id": 57700817, "link": "https://stackoverflow.com/questions/57700817/what-one-line-code-algorithm-in-python-3-will-give-such-result/57700895#57700895", "title": "What one line code algorithm in python 3 will give such result?", "body": "<p>If you only need a one-line statement that fixes up the specific list you were given, you could use: </p>\n\n<pre><code>del a[6:9]\n</code></pre>\n\n<p>This deletes three values from the list, and leaves the rest in order. It will probably be quite a lot faster than sorting or using a <code>set</code>, but it's much less general. It works for the specific list given, but won't produce similar output if the unwanted values are located somewhere else.</p>\n"}], "owner": {"reputation": 11, "user_id": 11861548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HAbi0s-eUpM/AAAAAAAAAAI/AAAAAAAAAxE/3XtEpooujyQ/photo.jpg?sz=128", "display_name": "hyperGeek", "link": "https://stackoverflow.com/users/11861548/hypergeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57700828, "answer_count": 2, "score": -2, "last_activity_date": 1567032317, "creation_date": 1567031599, "question_id": 57700817, "link": "https://stackoverflow.com/questions/57700817/what-one-line-code-algorithm-in-python-3-will-give-such-result", "title": "What one line code algorithm in python 3 will give such result?", "body": "<p>The test question is in the form of a fill in the blanks and this question shows part of the code and requires me to provide the code the programmer must have entered to give the result printed in a single line statement. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a = [1, 2, 3, 4, 5, 6, 2, 4, 1, 7, 8]\n#[fill in the blank in one line]\nprint(a)\n#[1, 2, 3, 4, 5, 6 ,7 8]\n</code></pre>\n\n<p>The result is the list shown rearranged with no duplicates in it.</p>\n"}, {"tags": ["python", "wxpython"], "comments": [{"owner": {"reputation": 1175, "user_id": 1016428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6451cf8fd41987f0ddaf8a61982695db?s=128&d=identicon&r=PG", "display_name": "Infinity77", "link": "https://stackoverflow.com/users/1016428/infinity77"}, "edited": false, "score": 0, "creation_date": 1567141911, "post_id": 57700815, "comment_id": 101882573, "body": "Try to remove the self.Maximize() call and see if it works..."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11879177, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rHhjH4Hg-RQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rffbAiDZf57QqUDGkYbHSnVWrHHkQ/photo.jpg?sz=128", "display_name": "makrottk", "link": "https://stackoverflow.com/users/11879177/makrottk"}, "edited": false, "score": 0, "creation_date": 1567377608, "post_id": 57704246, "comment_id": 101937191, "body": "Thanks! I got it to work creating a frame for each display using your suggestion."}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1571050339, "post_id": 57704246, "comment_id": 103099441, "body": "If the answer resolved your problem, please mark it as accepted (gray combo box under voting buttons at left side of the answer). This is considered polite on StackOverflow. Also some guys take care about tag statistics."}], "tags": [], "owner": {"reputation": 1777, "user_id": 3939992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4184e781e63796c30e7c4a8b8ccf49f?s=128&d=identicon&r=PG&f=1", "display_name": "Petr Blahos", "link": "https://stackoverflow.com/users/3939992/petr-blahos"}, "is_accepted": true, "score": 2, "last_activity_date": 1567060217, "creation_date": 1567060217, "answer_id": 57704246, "question_id": 57700815, "link": "https://stackoverflow.com/questions/57700815/how-to-create-a-frame-in-wxpython-across-multiple-monitors/57704246#57704246", "title": "How to create a frame in wxPython across multiple monitors?", "body": "<pre><code>wx.Display.GetCount()\n# then you can get the geometry for each display\nd = wx.Display(0)\nd.GetGeometry()\n</code></pre>\n\n<p>That should give you the real sizes and positions of the displays.</p>\n"}], "owner": {"reputation": 67, "user_id": 11879177, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rHhjH4Hg-RQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rffbAiDZf57QqUDGkYbHSnVWrHHkQ/photo.jpg?sz=128", "display_name": "makrottk", "link": "https://stackoverflow.com/users/11879177/makrottk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 57704246, "answer_count": 1, "score": 0, "last_activity_date": 1567060217, "creation_date": 1567031588, "question_id": 57700815, "link": "https://stackoverflow.com/questions/57700815/how-to-create-a-frame-in-wxpython-across-multiple-monitors", "title": "How to create a frame in wxPython across multiple monitors?", "body": "<p>I'm trying to create a frame in wxPython that extends across multiple screens. The setup in which I'm trying this consists of a monitor with 1366x768 plus another monitor in portrait mode with 1080x1920. </p>\n\n<p>GetSystemMetrics(76) and GetSystemMetrics(77) from win32api result in 0 and -1144 to get the left top of the virtual screen area.</p>\n\n<p>GetSystemMetrics(78) and GetSystemMetrics(79) give me the total virtual screen resolution of 2446x1920.</p>\n\n<p>When I call the frame with pos = (GetSystemMetrics(76), GetSystemMetrics(77)) and size = (GetSystemMetrics(78), GetSystemMetrics(79)) for some reason it gives me a frame with the size of the first monitor only.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import wx\nfrom win32api import GetSystemMetrics\n\nclass SelectableFrame(wx.Frame):\n\n    c1 = None\n    c2 = None\n\n    def __init__(self, parent, id, title, pos, size):\n        wx.Frame.__init__(self, parent, id, title, pos, size, style=wx.NO_BORDER) \n        self.Show(True)\n        self.ToggleWindowStyle(wx.STAY_ON_TOP)\n        self.SetFocus()\n        self.Raise()\n        print(pos)\n        print(size)\n\n        self.Bind(wx.EVT_MOTION, self.OnMouseMove)\n        self.Bind(wx.EVT_LEFT_DOWN, self.OnMouseDown)\n        self.Bind(wx.EVT_LEFT_UP, self.OnMouseUp)\n        self.Bind(wx.EVT_PAINT, self.OnPaint)\n\n        self.SetCursor(wx.Cursor(wx.CURSOR_CROSS))\n\n        self.alphaValue = 100\n        self.SetTransparent(self.alphaValue)\n        self.Maximize(True)\n\n    def OnMouseMove(self, event):\n        global x2, y2\n        if event.Dragging() and event.LeftIsDown():\n            self.c2 = event.GetPosition()\n            x2 = self.c2.x\n            y2 = self.c2.y            \n            self.Refresh()\n\n    def OnMouseDown(self, event):\n        global x1, y1\n        self.c1 = event.GetPosition()\n        x1 = self.c1.x\n        y1 = self.c1.y\n        self.Refresh()\n\n    def OnMouseUp(self, event):\n        print(self.c1)\n        print(self.c2)\n        self.SetCursor(wx.Cursor(wx.CURSOR_ARROW))           \n        self.Destroy()\n\n    def OnPaint(self, event):\n        if self.c1 is None or self.c2 is None: return\n\n        bdc = wx.PaintDC(self)\n        dc = wx.GCDC(bdc)\n        dc.SetPen(wx.Pen('red', 1))\n        dc.SetBrush(wx.Brush(wx.Colour(0, 0, 0), wx.TRANSPARENT))\n\n        dc.DrawRectangle(self.c1.x, self.c1.y, self.c2.x - self.c1.x, self.c2.y - self.c1.y)\n\nif __name__==\"__main__\":\n\n    app=wx.App(redirect=False)\n    selectionFrame2 = SelectableFrame(\n            parent=None, \n            id=wx.ID_ANY, \n            title=\"\", \n            pos=(GetSystemMetrics(76),GetSystemMetrics(77)), \n            size=(GetSystemMetrics(78), GetSystemMetrics(79))\n            )\n    selectionFrame2.Show(True)\n\n    app.MainLoop()\n</code></pre>\n\n<p>How do I generate this frame in wxPython that extends across multiple monitors and set it up so that it works with any combination of monitors?</p>\n"}, {"tags": ["python", "if-statement", "rfid"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1567031707, "post_id": 57700810, "comment_id": 101845473, "body": "You&#39;re missing <code>except:</code> for your <code>try</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567031729, "post_id": 57700810, "comment_id": 101845476, "body": "You&#39;re missing the <code>:</code> at the end of the <code>if</code> line."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567031771, "post_id": 57700810, "comment_id": 101845480, "body": "Is the <code>if</code> statement supposed to be in the <code>try</code> block? Then it needs to be indented."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11654235"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567031776, "post_id": 57700810, "comment_id": 101845481, "body": "Okay, I get the same error when I have the &#39;:&#39; at the end of &#39;if id == a&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11654235"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567033264, "post_id": 57700810, "comment_id": 101845805, "body": "Yes, Barmar you are correct! I have figured it out"}, {"owner": {"reputation": 194, "user_id": 9802392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d parolin", "link": "https://stackoverflow.com/users/9802392/d-parolin"}, "edited": false, "score": 0, "creation_date": 1567033418, "post_id": 57700810, "comment_id": 101845826, "body": "Please also be aware that &#39;id&#39; is a built in function in Python, you are effectively overwriting it, which may never pose a problem as I have not used id in over a decade, but you never know..."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 6706815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1572229649459206/picture?type=large", "display_name": "Patrick Nasser", "link": "https://stackoverflow.com/users/6706815/patrick-nasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1567031885, "creation_date": 1567031885, "answer_id": 57700846, "question_id": 57700810, "link": "https://stackoverflow.com/questions/57700810/if-statement-trouble-in-python/57700846#57700846", "title": "If statement trouble in Python", "body": "<p>Indentation:</p>\n\n<p>Use tabs to indent the 'if' code inside 'Try', put the ':' after the comparison,   and add </p>\n\n<pre><code>except:\n    pass\n</code></pre>\n\n<p>Before Finally</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 11353641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OVhIw.jpg?s=128&g=1", "display_name": "chiko360", "link": "https://stackoverflow.com/users/11353641/chiko360"}, "is_accepted": false, "score": 0, "last_activity_date": 1567032574, "last_edit_date": 1567032574, "creation_date": 1567032242, "answer_id": 57700885, "question_id": 57700810, "link": "https://stackoverflow.com/questions/57700810/if-statement-trouble-in-python/57700885#57700885", "title": "If statement trouble in Python", "body": "<p>do this : </p>\n\n<pre><code>try:\n   id = reader.read()\n   print (id)\n   if (id == a):\n   print (\"Awesome\")\nfinally:\n   GPIO.cleanup()\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11654235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567032574, "creation_date": 1567031569, "last_edit_date": 1567031691, "question_id": 57700810, "link": "https://stackoverflow.com/questions/57700810/if-statement-trouble-in-python", "title": "If statement trouble in Python", "body": "<p>I am interfacing a RFID sensor (MFRC522) with a Raspberry Pi. I am currently testing the whole system out. Basically, once the RFID tag is swiped it outputs a number associated with it. I want the python code to read in the RFID number and compare it with the variable 'a.' When I attempt to do this, though, I am getting an invalid syntax error for the 'if' statement and I am not sure why. I am new to Python.</p>\n\n<pre><code>import RPi.GPIO as GPIO\n\nfrom mfrc522 import SimpleMFRC522\n\nGPIO.setwarings(False)\n\na = 699562167785\n\nreader = SimpleMFRC522()\n\ntry:\n    id = reader.read()\n    print (id)\n\nif id == a\n    print (\"Awesome\")\n\nfinally:\n    GPIO.cleanup()\n</code></pre>\n"}, {"tags": ["python", "kivy", "kivy-language"], "answers": [{"comments": [{"owner": {"reputation": 1338, "user_id": 11972447, "user_type": "registered", "profile_image": "https://graph.facebook.com/2518885814841581/picture?type=large", "display_name": "Arthur Pereira", "link": "https://stackoverflow.com/users/11972447/arthur-pereira"}, "edited": false, "score": 0, "creation_date": 1567046455, "post_id": 57702118, "comment_id": 101848061, "body": "Thanks again. You sir are a really kivy god. Do you know a way to do the same now with the width of the buttons inside the dropdown list? I can&#39;t get to resize then properly according to the screen size."}], "tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 1, "last_activity_date": 1567048969, "last_edit_date": 1567048969, "creation_date": 1567045004, "answer_id": 57702118, "question_id": 57700800, "link": "https://stackoverflow.com/questions/57700800/how-can-i-define-kivy-dropodown-list-max-height-according-to-the-screen-height/57702118#57702118", "title": "How can I define kivy dropodown list max height according to the screen height?", "body": "<p>In your <code>MainWindow</code> class <code>__init__()</code>, you can replace</p>\n\n<pre><code>self.min_down.max_height = 100\n</code></pre>\n\n<p>with</p>\n\n<pre><code>self.bind(size=self.resizing)\n</code></pre>\n\n<p>And add a <code>resizing()</code> method to that class:</p>\n\n<pre><code>def resizing(self, screen, new_size):\n    self.min_down.max_height = new_size[1] * 0.5\n    self.min_down.width = new_size[0] / 10\n\n    # the child of the DropDownList is a GridLayout that contains the buttons\n    for btn in self.min_down.children[0].children:\n        btn.width = self.min_down.width\n</code></pre>\n\n<p>This will adjust the <code>max_height</code> property whenever the <code>MainWindow</code> change its size.</p>\n"}], "owner": {"reputation": 1338, "user_id": 11972447, "user_type": "registered", "profile_image": "https://graph.facebook.com/2518885814841581/picture?type=large", "display_name": "Arthur Pereira", "link": "https://stackoverflow.com/users/11972447/arthur-pereira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 57702118, "answer_count": 1, "score": 1, "last_activity_date": 1567048969, "creation_date": 1567031504, "question_id": 57700800, "link": "https://stackoverflow.com/questions/57700800/how-can-i-define-kivy-dropodown-list-max-height-according-to-the-screen-height", "title": "How can I define kivy dropodown list max height according to the screen height?", "body": "<p>I've created a DropDown list and dont want it to go all over the screen. So I tried to set the max_height value but i can only put absolute values. Instead, I want it to resize with the screen like I do with size_hint.</p>\n\n<p>I also tried to pass it in kv lang. Creating a DropDown class and setting max_height as (root.height -20), buit it doesnt work as it try to get the height of the DropDown class and not the Screen.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.screenmanager import ScreenManager, Screen\nfrom kivy.lang import Builder\nfrom kivy.uix.textinput import TextInput\nfrom kivy.properties import ObjectProperty\nfrom kivy.uix.dropdown import DropDown\nfrom kivy.uix.button import Button\n\n\nclass MainWindow(Screen):\n    min = ObjectProperty(None)\n    seg = ObjectProperty(None)\n\n    def __init__(self, **kw):\n        super().__init__(**kw)\n        self.min_down = DropDown()\n        self.sec_down = DropDown()\n\n        for x in range(61):\n            btn_min = Button(text=str(x), size_hint_y=None, height=44)\n            btn_min.bind(on_release=lambda btn: self.minute(btn.text))\n            btn_min.bind(on_release=lambda dismiss: self.min_down.dismiss())\n            self.min_down.add_widget(btn_min)\n\n        self.min_down.auto_width = False\n        self.min_down.max_height = 100\n\n    def minute(self, texto):\n        self.min.text = texto\n\n\nclass NumericInput(TextInput):\n\n    def insert_text(self, string, from_undo=False):\n        new_text = self.text + string\n        self.input_filter = 'int'\n        if new_text != \"\":\n            try:\n                if int(new_text) &gt;= 0:\n                    self.text = new_text\n                    if int(new_text) &gt; 60:\n                        self.text = \"60\"\n                    if len(new_text) &gt; 2:\n                        self.text = new_text[:-1]\n\n            except ValueError:\n                TextInput.insert_text(self, \"\", from_undo=from_undo)\n\n\nclass WindowManager(ScreenManager):\n    pass\n\n\nkv = Builder.load_file(\"teste.kv\")\n\n\nclass TesteApp(App):\n    def build(self):\n        return kv\n\n\nif __name__ == \"__main__\":\n    TesteApp().run()\n</code></pre>\n\n<p>And for the kv file:</p>\n\n<pre><code>WindowManager:\n    MainWindow:\n\n&lt;MainWindow&gt;:\n    name: \"main\"\n    min: min\n\n    FloatLayout:\n        Button:\n            pos_hint:{'center_x': .27, 'center_y': .6}\n            size_hint: .05, .05\n            on_release: root.min_down.open(self)\n\n        NumericInput:\n            id: min\n\n            pos_hint:{'center_x': .4, 'center_y': .6}\n            size_hint: .15, .1\n            input_filter: \"int\"\n            hint_text: '00'\n            hint_text_color: (0, 0, 0, 1)\n            font_size: (root.width/25 + root.height/25)\n            halign: \"center\"\n            multiline: False\n</code></pre>\n"}, {"tags": ["python", "interpolation"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567032379, "post_id": 57700796, "comment_id": 101845616, "body": "<a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.lagrange.html\" rel=\"nofollow noreferrer\">docs</a>: <i>Warning: This implementation is numerically unstable. Do not expect to be able to use more than about 20 points even if they are chosen optimally.</i> so I presume that with your data there is an overflow generating such errors"}], "answers": [{"tags": [], "owner": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "is_accepted": true, "score": 1, "last_activity_date": 1567033529, "creation_date": 1567033529, "answer_id": 57701026, "question_id": 57700796, "link": "https://stackoverflow.com/questions/57700796/lagrange-interpolation-with-python-doing-something-weird/57701026#57701026", "title": "Lagrange interpolation with Python doing something weird", "body": "<p>The implementation may be making assumptions about the domain. Try shifting your domain closer to x=0</p>\n\n<pre><code>from scipy.interpolate import lagrange\nimport numpy as np\n\nx = np.array([2458723, 2458724, 2458725, 2458727, 2458728, 2458729])\ny = np.array([-2000, -900, 1000, 400, -4700, -1900])\n\npoly = lagrange(x - x.min(), y)\n\nx0 = np.linspace(x.min(), x.max(), num=10)\ny0 = poly(x0 - x0.min())\nprint(y0)\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 4414359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a8314189196f1f31ae825807125de8d0?s=128&d=identicon&r=PG&f=1", "display_name": "Raksha", "link": "https://stackoverflow.com/users/4414359/raksha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57701026, "answer_count": 1, "score": 0, "last_activity_date": 1567033529, "creation_date": 1567031481, "question_id": 57700796, "link": "https://stackoverflow.com/questions/57700796/lagrange-interpolation-with-python-doing-something-weird", "title": "Lagrange interpolation with Python doing something weird", "body": "<p>Does anyone know why it's returning such crazy numbers?</p>\n\n<pre><code>from scipy.interpolate import lagrange\n\nx = [2458723, 2458724, 2458725, 2458727, 2458728, 2458729]\ny = [-2000, -900, 1000, 400, -4700, -1900]\n\npoly = lagrange(x, y)\n\nx0 = list(np.linspace(min(x), max(x), num=10))\ny0 = poly(x0)\nprint(y0)\n</code></pre>\n\n<p>output:\n<code>[-2.88230376e+18 -6.91752903e+18 -3.45876451e+18 -8.07045053e+18\n -2.30584301e+18 -2.88230376e+18 -5.76460752e+18 -4.03522527e+18\n -2.88230376e+18 -4.03522527e+18]</code></p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1567032884, "post_id": 57700736, "comment_id": 101845733, "body": "@Thomas Weller I want the digits to be fixed regardless of the number. And you are right about the time. But this is how I managed to solve the problem by myself. I&#39;m open to corrections."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567033377, "post_id": 57700736, "comment_id": 101845820, "body": "What should it do if <code>memory</code> is not big enough? <code>change_base(100, 3, 3)</code> currently returns <code>[11 0 1]</code>, so the first digit is not in the desired base."}, {"owner": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567033603, "post_id": 57700736, "comment_id": 101845859, "body": "@Barmar as you wish, I know it will never happen. Let&#39;s say that it must return the string &quot;error: the number is too big&quot;"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1567037034, "post_id": 57700736, "comment_id": 101846458, "body": "Don&#39;t leave us in suspense!  What does it print?  Do you really want it to return floats?"}, {"owner": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1567043016, "post_id": 57700736, "comment_id": 101847472, "body": "@hpaulj Barmar method works."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567033128, "post_id": 57700967, "comment_id": 101845781, "body": "The question wants the result in a numpy array of a given size."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567033213, "post_id": 57700967, "comment_id": 101845797, "body": "<b>It must return the number number written as a vector of dimension memory</b>"}, {"owner": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "edited": false, "score": 0, "creation_date": 1567033272, "post_id": 57700967, "comment_id": 101845806, "body": "TY. You had to explicitly write &#39;012&#39;. I want it to practically work for any given base"}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "reply_to_user": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "edited": false, "score": 0, "creation_date": 1567033317, "post_id": 57700967, "comment_id": 101845815, "body": "@3sm1r: it does. Just provide more digits."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567033554, "post_id": 57700967, "comment_id": 101845849, "body": "@ThomasWeller <code>&quot;&quot;.join(map(str, range(base)))</code> will create that string for bases up to 10. It should be easy to write a function that creates the string for higher bases."}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": false, "score": 0, "last_activity_date": 1567033806, "last_edit_date": 1567033806, "creation_date": 1567032962, "answer_id": 57700967, "question_id": 57700736, "link": "https://stackoverflow.com/questions/57700736/creating-a-function-returning-an-integer-in-given-base/57700967#57700967", "title": "Creating a function returning an integer in given base", "body": "<p>There is no built-in function in Python which does it for arbitrary bases.</p>\n\n<p>There is a library called <a href=\"https://github.com/semente/python-baseconv\" rel=\"nofollow noreferrer\"><code>python-baseconv</code></a>. Your code would boil down to:</p>\n\n<pre><code>from baseconv import BaseConverter\n\nfor base in range(2,17):\n    converter = BaseConverter('0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'[:base])\n    for i in range(40):\n        print(converter.encode(i))\n</code></pre>\n\n<p>If you prefer sticking with NumPy, you can convert it to a \"vector of dimension memory\" by using <code>np.array(list(...))</code>:</p>\n\n<pre><code>from baseconv import BaseConverter\nimport numpy as np\n\ndef change_base(number,base):\n    converter = BaseConverter('0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'[:base])\n    s = converter.encode(number)\n    return np.array(list(s))\n\nfor base in range(2,17):\n    for i in range(40):\n        print(change_base(i, base))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "edited": false, "score": 0, "creation_date": 1567043144, "post_id": 57701122, "comment_id": 101847485, "body": "It works perfectly. As a side note, I am wondering whether it is possible to use the <code>padding</code> command inside <code>np.base_repr</code> in some way in order to specify the memory there, without the need of using the following line."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "edited": false, "score": 1, "creation_date": 1567043305, "post_id": 57701122, "comment_id": 101847510, "body": "I thought about that, but that adds a fixed amount of padding. There doesn&#39;t seem to be a way to say &quot;pad until it&#39;s 6 digits&quot;."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1567034357, "creation_date": 1567034357, "answer_id": 57701122, "question_id": 57700736, "link": "https://stackoverflow.com/questions/57700736/creating-a-function-returning-an-integer-in-given-base/57701122#57701122", "title": "Creating a function returning an integer in given base", "body": "<p>Create an array of zeroes with the specified size. Then use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.base_repr.html\" rel=\"nofollow noreferrer\"><code>numpy.base_repr()</code></a> to convert the number to the given base. That returns a string, you can convert that to a <code>numpy</code> array. Then overlay that on the array of zeroes.</p>\n\n<pre><code>import numpy as np\n\ndef change_base(number,base,memory):\n    result = np.zeros(memory)\n    converted = np.array(list(np.base_repr(number, base)))\n    result[-converted.shape[0]:] = converted\n    return result\n</code></pre>\n"}], "owner": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 57701122, "answer_count": 2, "score": -1, "last_activity_date": 1567034357, "creation_date": 1567030934, "last_edit_date": 1567031871, "question_id": 57700736, "link": "https://stackoverflow.com/questions/57700736/creating-a-function-returning-an-integer-in-given-base", "title": "Creating a function returning an integer in given base", "body": "<p>I want to create a function which receives as input three integer numbers: <code>number</code>, <code>base</code> and <code>memory</code>. It must return the number <code>number</code> written as a vector of dimension <code>memory</code> which is the corresponding number in base <code>base</code>. Here is how I did it together with an example:</p>\n\n<pre><code>import numpy as np\n\ndef change_base(number,base,memory):\n    result=np.zeros(memory)\n    for i in range(base**memory):\n        res=number\n        for j in range(memory):\n            v=int(res/base**(memory-(j+1)))\n            res-=v*base**(memory-(j+1))\n            result[j]=v\n    return result\n\n# example below: numbers from zero to 40 in base 3 with 6 digits available.\n\nfor i in range(40):\n    print change_base(i,3,6)\n\n</code></pre>\n\n<p>As you can see, I did it manually. How can I do the same thing using some fancy already existing python command? </p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 734, "user_id": 7479226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zCFrV.jpg?s=128&g=1", "display_name": "R&#233;mi Bonnet", "link": "https://stackoverflow.com/users/7479226/r%c3%a9mi-bonnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1567031901, "creation_date": 1567031901, "answer_id": 57700853, "question_id": 57700722, "link": "https://stackoverflow.com/questions/57700722/how-to-match-values-on-dataframe-column-in-function-of-a-changing-condition/57700853#57700853", "title": "How to match values on DataFrame column in function of a changing condition?", "body": "<p>I don't understand fully your code, and why it doesn't work, but i would just use \"sql-like\" operators to achieve your goal:</p>\n\n<pre><code>df = pd.DataFrame({\n  \"col2\": ['GE1', 'GE1', 'GE1', 'GE2', 'GE2'],\n  \"col3\": [np.nan, '1.2', np.nan, '1.3', np.nan]\n})\n\nunique_values = df.groupby(\"col2\").first()\nfinal_df = df.join(unique_values, on=\"col2\", lsuffix=\"_orig\")\n</code></pre>\n\n<p>The groupby will extract the mapping from your col2 keys to your unique values present in col3, and the join will generate the final table you want.</p>\n"}, {"tags": [], "owner": {"reputation": 22919, "user_id": 7093741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9cJi0.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7093741/chris"}, "is_accepted": true, "score": 0, "last_activity_date": 1567035296, "creation_date": 1567035296, "answer_id": 57701217, "question_id": 57700722, "link": "https://stackoverflow.com/questions/57700722/how-to-match-values-on-dataframe-column-in-function-of-a-changing-condition/57701217#57701217", "title": "How to match values on DataFrame column in function of a changing condition?", "body": "<p>IIUC, you want to do <em>ffill</em> with <code>groupby</code>:</p>\n\n<pre><code>df['Col 3'] = df.groupby('Col 2')['Col 3'].transform(lambda x: x.ffill())\nprint(df)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   Col 1  Col 2  Col 3\n0      1  'GE1'  '1.2'\n1      2  'GE1'  '1.2'\n2      3  'GE1'  '1.2'\n3      4  'GE2'  '1.3'\n4      5  'GE2'  '1.3'\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 11991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36c36f4abd2058fe8fd2f9c97fa2bce5?s=128&d=identicon&r=PG&f=1", "display_name": "Slowly-", "link": "https://stackoverflow.com/users/11991375/slowly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 57701217, "answer_count": 2, "score": 0, "last_activity_date": 1567035296, "creation_date": 1567030851, "question_id": 57700722, "link": "https://stackoverflow.com/questions/57700722/how-to-match-values-on-dataframe-column-in-function-of-a-changing-condition", "title": "How to match values on DataFrame column in function of a changing condition?", "body": "<p>I have one panda DataFrame match with NaN values in Col 3 and i'm trying to replace it with the correct value present only once in the Col 3 in function of the associated string in Col 2 :  </p>\n\n<p>What I have:</p>\n\n<p><em>Col 1</em>|<em>Col 2</em>|<em>Col 3</em></p>\n\n<p><em>1</em> | 'GE1' | '1.2'</p>\n\n<p><em>2</em> | 'GE1' | NaN</p>\n\n<p><em>3</em> | 'GE1' |NaN</p>\n\n<p><em>4</em> |'GE2' |'1.3'</p>\n\n<p><em>5</em> |'GE2'|NaN</p>\n\n<p>I've tried this :\n(match_without_nan is the same DF than match but with only the rows without NaN)</p>\n\n<p>`` `</p>\n\n<pre><code>mylist=[[match_without_nan['Col 2'],match_without_nan['Col 3']]]\n\nfor i in range(0,len(mylist)):\n    match.loc[match['Col 2'] == mylist[0][i], 'Col 3'] = mylist[1][i]\n</code></pre>\n\n<p>` ``</p>\n\n<p>This code is running without any errors but nothing changed in Col 3.</p>\n\n<p>What I would like to get :</p>\n\n<p><em>Col 1</em>|<em>Col 2</em>|<em>Col 3</em></p>\n\n<p><em>1</em> | 'GE1' | '1.2'</p>\n\n<p><em>2</em> | 'GE1' | '1.2'</p>\n\n<p><em>3</em> | 'GE1' | '1.2'</p>\n\n<p><em>4</em> |'GE2' |'1.3'</p>\n\n<p><em>5</em> |'GE2'|'1.3'</p>\n"}, {"tags": ["python", "xpath"], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 376718, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2dbd259301e80a46d5c4221ce6ea4986?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/376718/dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1567036974, "last_edit_date": 1567036974, "creation_date": 1567033019, "answer_id": 57700972, "question_id": 57700719, "link": "https://stackoverflow.com/questions/57700719/xpath-get-following-siblings-from-current-up-to-a-certain-point/57700972#57700972", "title": "xpath get following siblings from current up to a certain point", "body": "<p>selecting all a elements and all text elements then iterating through checking if it is a a tag, if not then append string and start a new tag for each new a element:</p>\n\n<pre><code>tree.xpath('//a[@target=\"_blank\"] | //a[@target=\"_blank\"]/../text()')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 341, "user_id": 376718, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2dbd259301e80a46d5c4221ce6ea4986?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/376718/dave"}, "edited": false, "score": 0, "creation_date": 1567095608, "post_id": 57701477, "comment_id": 101870482, "body": "Doesn&#39;t work: lxml.etree.XPathEvalError: Invalid expression. You can&#39;t have a * next to preceding-sibling like that..."}], "tags": [], "owner": {"reputation": 11494, "user_id": 6429072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gh4b0.png?s=128&g=1", "display_name": "Ed Bangga", "link": "https://stackoverflow.com/users/6429072/ed-bangga"}, "is_accepted": false, "score": 0, "last_activity_date": 1567116673, "last_edit_date": 1567116673, "creation_date": 1567038041, "answer_id": 57701477, "question_id": 57700719, "link": "https://stackoverflow.com/questions/57700719/xpath-get-following-siblings-from-current-up-to-a-certain-point/57701477#57701477", "title": "xpath get following siblings from current up to a certain point", "body": "<p>this is what you need.</p>\n\n<pre><code>   xpath('.//preceding-sibling::br[following-sibling::p]/text()')\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 376718, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2dbd259301e80a46d5c4221ce6ea4986?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/376718/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567116673, "creation_date": 1567030842, "last_edit_date": 1567037001, "question_id": 57700719, "link": "https://stackoverflow.com/questions/57700719/xpath-get-following-siblings-from-current-up-to-a-certain-point", "title": "xpath get following siblings from current up to a certain point", "body": "<p>here is the html:</p>\n\n<pre><code>   &lt;a href=\"\" target=\"_blank\"&gt;title&lt;/a&gt;\n    &lt;br&gt;\n    text\n    &lt;br&gt;\n    more text\n    &lt;/p&gt;\n    &lt;a href=\"\" target=\"_blank\"&gt;title2&lt;/a&gt;\n    more more text\n    &lt;/p&gt;\n    &lt;a href=\"\" target=\"_blank\"&gt;title3&lt;/a&gt;\n</code></pre>\n\n<p>I currently have selected one of the a elements and want to get the text up to the next a sibling element, there could be one or more text nodes.</p>\n\n<p>I don't know the text titles beforehand.</p>\n\n<pre><code>xpath('./following-sibling::br/text()')\n</code></pre>\n\n<p>I have tried this also:</p>\n\n<pre><code>xpath('.//*[preceding-sibling::p]following-sibling::text()')\n</code></pre>\n\n<p><strong>Expected output:</strong> <code>['text','more text']</code></p>\n"}, {"tags": ["python", "matplotlib", "seaborn", "colormap"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 3, "last_activity_date": 1567031031, "creation_date": 1567031031, "answer_id": 57700754, "question_id": 57700668, "link": "https://stackoverflow.com/questions/57700668/matplotlib-colormap-range/57700754#57700754", "title": "Matplotlib colormap range", "body": "<p>The range of colormaps is always between 0 and 1. You will need to normalize your data to this range. For example, to map the range between 0 and 400 linearly to the colors of a colormap, </p>\n\n<pre><code>import matplotlib.pyplot as plt\ncmap = plt.get_cmap('viridis')\nnorm = plt.Normalize(0, 400)\n\ncolor = cmap(norm(200.))\n</code></pre>\n"}], "owner": {"reputation": 1868, "user_id": 4504711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/583d378f497f6f55857b9e3d58bb9a11?s=128&d=identicon&r=PG&f=1", "display_name": "Botond", "link": "https://stackoverflow.com/users/4504711/botond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1443, "favorite_count": 2, "accepted_answer_id": 57700754, "answer_count": 1, "score": 1, "last_activity_date": 1567031031, "creation_date": 1567030431, "last_edit_date": 1567030810, "question_id": 57700668, "link": "https://stackoverflow.com/questions/57700668/matplotlib-colormap-range", "title": "Matplotlib colormap range", "body": "<p>I'm trying to understand how <code>matplotlib</code> colormaps work. Consider the following code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\ncmap = plt.get_cmap('jet')\nprint cmap(200)\n</code></pre>\n\n<p>which prints </p>\n\n<pre><code>(1.0, 0.46550472040668145, 0.0, 1.0)\n</code></pre>\n\n<p>So my understanding is that a colormap maps a numerical value (200 in this case) to a color value (1.0, 0.46550472040668145, 0.0, 1.0 in this case). How does matplotlib set the range for its colormap? </p>\n\n<p>Is it possible to define a maximum and a minimum value between which a linear map is applied? With <code>imshow()</code> one can set a <code>vmin</code> and a <code>vmax</code> parameter, however, I would have to do it at the colormap level because I'm providing the colormap to another function later on. </p>\n\n<p>This might be a more general question on how to colormaps work; in <code>seaborn</code>'s color palettes, for example, there is no option for the range either.</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 117, "user_id": 5853122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731758f029e1fec1eac241dbcc767940?s=128&d=identicon&r=PG&f=1", "display_name": "shyamzzp", "link": "https://stackoverflow.com/users/5853122/shyamzzp"}, "edited": false, "score": 0, "creation_date": 1567030919, "post_id": 57700665, "comment_id": 101845320, "body": "Please mention the version of the python being used."}, {"owner": {"reputation": 11, "user_id": 1628887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f402637a17d414647a7c8a993c32a?s=128&d=identicon&r=PG", "display_name": "Fultec", "link": "https://stackoverflow.com/users/1628887/fultec"}, "reply_to_user": {"reputation": 117, "user_id": 5853122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731758f029e1fec1eac241dbcc767940?s=128&d=identicon&r=PG&f=1", "display_name": "shyamzzp", "link": "https://stackoverflow.com/users/5853122/shyamzzp"}, "edited": false, "score": 0, "creation_date": 1567031031, "post_id": 57700665, "comment_id": 101845335, "body": "I&#39;m sorry. I&#39;m using Python 3.7 64-Bit. I&#39;m also using Visual Studio 2019 as my IDE."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 2, "creation_date": 1567031183, "post_id": 57700665, "comment_id": 101845370, "body": "You <i>cannot</i> destroy the login frame, as you have no reference to it.  <code>logframe</code> was a local variable within <code>loginFrameGenerate()</code>, and ceased to exist when that function returned.  (Creating another Frame called <code>logframe</code>, and destroying that in the hope that it will destroy the original, is basically voodoo.)  Making this variable global would be one way to still have access to it when you need it later."}, {"owner": {"reputation": 11, "user_id": 1628887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f402637a17d414647a7c8a993c32a?s=128&d=identicon&r=PG", "display_name": "Fultec", "link": "https://stackoverflow.com/users/1628887/fultec"}, "edited": false, "score": 0, "creation_date": 1567034290, "post_id": 57700665, "comment_id": 101845981, "body": "That makes perfect sense! Thank you!"}], "owner": {"reputation": 11, "user_id": 1628887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f402637a17d414647a7c8a993c32a?s=128&d=identicon&r=PG", "display_name": "Fultec", "link": "https://stackoverflow.com/users/1628887/fultec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567030973, "creation_date": 1567030409, "last_edit_date": 1567030973, "question_id": 57700665, "link": "https://stackoverflow.com/questions/57700665/trying-to-use-a-function-to-destroy-tkinter-frame-that-was-created-in-another-fu", "title": "Trying to use a function to destroy tkinter frame that was created in another function. Unsuccessfully", "body": "<p>I'm very new to python programming and I've been unable to find out how to get this to function properly. I'm using frames to show a login screen prior to loading the main inventory frame. I intend to record changes to inventory per user, so this is necessary for the program to function properly. </p>\n\n<p>The program calls the <code>Loginscreen()</code> and <code>LoginFrameGenerate()</code> functions to generate the top menu and the frame including labels and entry fields. (Using Tkinter)\nThe \"Log In\" button, once pressed, calls the <code>loginfun()</code> function.\nThe <code>loginfun()</code> function is supposed to use an if statement to check the username and password and if they are correct, remove the login screen frame. Once the login screen frame has been removed, the mainframe and menu functions are called.</p>\n\n<p>Unfortunately, the login screen frame will not go away when using the <code>destroy()</code> command. I can't move forward until I can get this working. Any guidance would be greatly appreciated.</p>\n\n<p>I tried the function without re-initializing the frame inside the loginfun() function, but it generates a name error. I no longer get the name error, but the frame doesn't get destroyed. I've searched google and stack overflow for hours and the only thing I could find regarding Tkinter <code>destroy()</code> was in reference to classes. I'm beginning to think I've been coding this wrong and I should have made each frame a separate class.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from tkinter import *\nimport tkinter.messagebox\nimport sys\n\nroot = Tk()\nroot.iconbitmap('Favicon.ico')\ntestusername = \"Admin\"\ntestpassword = \"Pass\"\nCurrentUser = StringVar()\nPass = StringVar()\nroot.state(\"zoomed\")\n\ndef Exitbtnclick():\n    sys.exit(0)\n\ndef logout():\n    MainFrame=Frame(root)\n    MainFrame.destroy()\n    loginScreen\n    loginFrameGenerate\n\ndef loginScreen():\n    loginMenu = Menu(root)\n    root.configure(menu=loginMenu)\n    FileMenu=Menu(loginMenu)\n    loginMenu.add_cascade(label=\"File\", menu=FileMenu)\n    FileMenu.add_cascade(label=\"Exit\",command=Exitbtnclick)\n\ndef loginFrameGenerate():\n#THIS CREATES THE LOGIN FRAME\n    logframe = Frame(root)\n    logframe.grid()\n\n    UL = Label(logframe, text=\"Username:\", font=\"Arial 10 bold\")\n    UL.grid(row=0, column=0, sticky=\"E\")\n    UE = Entry(logframe, textvariable=CurrentUser)\n    UE.grid(row=0,column=1)\n    PL = Label(logframe, text=\"Password:\", font=\"Arial 10 bold\")\n    PL.grid(row=1, column=0, sticky=\"E\")\n    PE = Entry(logframe, textvariable=Pass)\n    PE.grid(row=1,column=1)\n    loginbtn = Button(logframe, text=\"Log In\", command=loginfun)\n    loginbtn.grid(row=3,columnspan=2)\n\ndef loginfun():\n#THIS FUNCTION IS CALLED WHEN THE \"LOG IN\" BUTTON IS PRESSED\n    global testusername\n    global testpassword\n    logframe = Frame(root)   \n\n    if (CurrentUser.get() == testusername) and (Pass.get() == testpassword):\n        logframe.destroy() #THIS IS THE PART THAT DOES NOT WORK\n        initializeMainMenu\n        initializeMainFrame\n    else:\n        tkinter.messagebox.showinfo(\"Error!\", \"Invalid Username/Password\")\n        return\n\ndef initializeMainMenu():\n    mainMenu = Menu(root)\n    root.configure(menu=mainMenu)\n    FileMenu = Menu(mainMenu)\n    UserMenu = Menu(mainMenu)\n    ItemsMenu = Menu(mainMenu)\n    ReportMenu = Menu(mainMenu)\n    mainMenu.add_cascade(label=\"File\", menu=FileMenu)\n    mainMenu.add_cascade(label=\"Users\", menu=UserMenu)\n    mainMenu.add_cascade(label=\"Items\", menu=ItemsMenu)\n    mainMenu.add_cascade(label=\"Reports\", menu=ReportMenu)\n    FileMenu.add_separator()\n    FileMenu.add_command(label=\"Log Out/Switch User\", command=logout)\n    FileMenu.add_command(label=\"Exit\", command=Exitbtnclick)\n    UserMenu.add_command(label=\"Add/Remove Users\",command=random)\n\ndef initializeMainFrame():\n    ##Main Inventory Screen To Be Filled in once the user is logged in\n       MainFrame = Frame(root)\n    MainFrame.grid()\n\nloginScreen()\nloginFrameGenerate()\n\n\nroot.mainloop()\n\n</code></pre>\n"}, {"tags": ["python", "pandas", "list", "dataframe", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1567030803, "creation_date": 1567030803, "answer_id": 57700713, "question_id": 57700657, "link": "https://stackoverflow.com/questions/57700657/how-to-expand-a-df-by-a-list-of-different-dict/57700713#57700713", "title": "How to expand a df by a list of different dict?", "body": "<p>We can using <code>explode</code> start from pandas 0.25.0</p>\n\n<pre><code>df1=df.explode('information').reset_index(drop=True)\ndf1=pd.concat([df1,pd.DataFrame(df1.information.dropna().tolist())],axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 11350237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1db38be506f68c225fa2acbfc7492a9d?s=128&d=identicon&r=PG&f=1", "display_name": "chaed", "link": "https://stackoverflow.com/users/11350237/chaed"}, "is_accepted": false, "score": 0, "last_activity_date": 1567035541, "creation_date": 1567035541, "answer_id": 57701246, "question_id": 57700657, "link": "https://stackoverflow.com/questions/57700657/how-to-expand-a-df-by-a-list-of-different-dict/57701246#57701246", "title": "How to expand a df by a list of different dict?", "body": "<p>Thank you for your answer WeNYoBen, but i found something strange:</p>\n\n<p>If you consider the following df:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame({'id': pd.Series([1, 2, 3, 4, 5]),\n                   'name': pd.Series(['banana',\n                                      'apple',\n                                      'orange',\n                                      'strawberry' ,\n                                      'toast']),\n                   'information': pd.Series([[{'shape':'curve','color':'yellow'}],\n                                             [{'color':'red'},{'color':'green'}],\n                                             np.nan,\n                                             [{'shape':'round'}],\n                                             [{'amount':500}]]),\n                   'cost': pd.Series([1,2,2,10,4])})\n\n   id        name                              information  cost\n0   1      banana  [{'shape': 'curve', 'color': 'yellow'}]     1\n1   2       apple   [{'color': 'red'}, {'color': 'green'}]     2\n2   3      orange                                      NaN     2\n3   4  strawberry                     [{'shape': 'round'}]    10\n4   5       toast                        [{'amount': 500}]     4\n</code></pre>\n\n<p>(we shifted the np.nan to \"orange\")</p>\n\n<p>You will get the following result:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>   id        name  cost  shape   color  amount\n0   1      banana     1  curve  yellow     NaN\n1   2       apple     2    NaN     red     NaN\n2   2       apple     2    NaN   green     NaN\n3   3      orange     2  round     NaN     NaN\n4   4  strawberry    10    NaN     NaN   500.0\n5   5       toast     4    NaN     NaN     NaN\n</code></pre>\n\n<p>Your answer skips the np.nan of \"orange\" and fills \"toast\" with np.nan.</p>\n\n<p>How can I avoid this?</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 11350237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1db38be506f68c225fa2acbfc7492a9d?s=128&d=identicon&r=PG&f=1", "display_name": "chaed", "link": "https://stackoverflow.com/users/11350237/chaed"}, "is_accepted": false, "score": 0, "last_activity_date": 1567063937, "creation_date": 1567063937, "answer_id": 57705210, "question_id": 57700657, "link": "https://stackoverflow.com/questions/57700657/how-to-expand-a-df-by-a-list-of-different-dict/57705210#57705210", "title": "How to expand a df by a list of different dict?", "body": "<p>I found a workaround:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a = {'shape':np.nan}\ndf['information'] = df['information'].apply(lambda d: d if isinstance(d, list) else [a])\n\n   id        name                              information  cost\n0   1      banana  [{'shape': 'curve', 'color': 'yellow'}]     1\n1   2       apple   [{'color': 'red'}, {'color': 'green'}]     2\n2   3      orange                         [{'shape': nan}]     2\n3   4  strawberry                     [{'shape': 'round'}]    10\n4   5       toast                        [{'amount': 500}]     4\n\ndf1=df.explode('information').reset_index(drop=True)\ndf1=pd.concat([df1,pd.DataFrame(df1.information.dropna().tolist())],axis=1)\ndf1 = df1.drop('information',True)\n\n   id        name  cost  shape   color  amount\n0   1      banana     1  curve  yellow     NaN\n1   2       apple     2    NaN     red     NaN\n2   2       apple     2    NaN   green     NaN\n3   3      orange     2    NaN     NaN     NaN\n4   4  strawberry    10  round     NaN     NaN\n5   5       toast     4    NaN     NaN   500.0\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 11350237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1db38be506f68c225fa2acbfc7492a9d?s=128&d=identicon&r=PG&f=1", "display_name": "chaed", "link": "https://stackoverflow.com/users/11350237/chaed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1567063937, "creation_date": 1567030294, "question_id": 57700657, "link": "https://stackoverflow.com/questions/57700657/how-to-expand-a-df-by-a-list-of-different-dict", "title": "How to expand a df by a list of different dict?", "body": "<p>My problem is linked to my other question here (<a href=\"https://stackoverflow.com/questions/57686812/how-to-expand-a-df-by-different-dict-as-columns\">How to expand a df by different dict as columns?</a>):</p>\n\n<p>I have a df with A LIST (!) of different dicts as entries in a column, in my case column \"information\". I would like to expand the df by all possible dict.keys() within that list, something like that:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame({'id': pd.Series([1, 2, 3, 4, 5]),\n                   'name': pd.Series(['banana',\n                                      'apple',\n                                      'orange',\n                                      'strawberry' ,\n                                      'toast']),\n                   'information': pd.Series([[{'shape':'curve','color':'yellow'}],\n                                             [{'color':'red'},{'color':'green'}],\n                                             [{'shape':'round'}],\n                                             [{'amount':500}],\n                                             np.nan]),\n                   'cost': pd.Series([1,2,2,10,4])})\n\n   id        name                              information  cost\n0   1      banana  [{'shape': 'curve', 'color': 'yellow'}]     1\n1   2       apple   [{'color': 'red'}, {'color': 'green'}]     2\n2   3      orange                     [{'shape': 'round'}]     2\n3   4  strawberry                        [{'amount': 500}]    10\n4   5       toast                                      NaN     4\n</code></pre>\n\n<p>Should look like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>   id        name  shape   color  amount  cost\n0   1      banana  curve  yellow     NaN     1\n1   2       apple    NaN     red     NaN     2\n2   2       apple    NaN   green     NaN     2\n3   3      orange  round     NaN     NaN     2\n4   4  strawberry    NaN     NaN   500.0    10\n5   5       toast    NaN     NaN     NaN     4\n</code></pre>\n\n<p>(Note the additional row at index 2)</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 2159, "user_id": 2614637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443082cbe3730d73329d4c45221da6fc?s=128&d=identicon&r=PG", "display_name": "Prem Anand", "link": "https://stackoverflow.com/users/2614637/prem-anand"}, "is_accepted": true, "score": 0, "last_activity_date": 1567031261, "creation_date": 1567031261, "answer_id": 57700776, "question_id": 57700644, "link": "https://stackoverflow.com/questions/57700644/how-to-join-the-elements-of-the-tuple-together-and-convert-into-a-number/57700776#57700776", "title": "How to join the elements of the tuple together and convert into a number", "body": "<pre><code>&gt;&gt;&gt; a = 213\n&gt;&gt;&gt; for tupl in permutations(str(a)):\n...     num = int(''.join(tupl))\n...     print (num)\n... \n213\n231\n123\n132\n321\n312\n</code></pre>\n\n<p>Or as a one-liner</p>\n\n<pre><code>&gt;&gt;&gt; res = list(map(lambda t: int(''.join(t)), permutations(str(a))))\n&gt;&gt;&gt; print(res)\n[213, 231, 123, 132, 321, 312]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11991501, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uIfQliJpeXw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfdu_NtyGHi5W_V5uZJwv6rynsd2Q/photo.jpg?sz=128", "display_name": "Vlive", "link": "https://stackoverflow.com/users/11991501/vlive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 57700776, "answer_count": 1, "score": 1, "last_activity_date": 1567031261, "creation_date": 1567030209, "question_id": 57700644, "link": "https://stackoverflow.com/questions/57700644/how-to-join-the-elements-of-the-tuple-together-and-convert-into-a-number", "title": "How to join the elements of the tuple together and convert into a number", "body": "<pre><code>from itertools import permutations \na,b= input().split()\na = int(a)\nb = int(b)\ndefault = -1\n\nc = [int(i) for i in str(a)]\nperm = permutations(c)\nfor tupl in list(perm):\n    res = list(map(\"\".join, tupl))\n    #num =  ''.join(j) for j in tupl\n\n    print(\"\\n\")\n#    print( num)\n    # for j in range(0,len(tupl)):\n    #     print(tupl[j])\n            # res = [''.join(tups) for tups in  ]\n</code></pre>\n\n<p>I need to join elements of tup1 to make it a number.\nEach permutation number must be converted to digit number</p>\n"}, {"tags": ["python", "deep-learning", "anaconda", "conda", "caffe"], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 8462345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6vLxu.jpg?s=128&g=1", "display_name": "El_1988", "link": "https://stackoverflow.com/users/8462345/el-1988"}, "is_accepted": false, "score": 0, "last_activity_date": 1571070566, "creation_date": 1571070566, "answer_id": 58380719, "question_id": 57700632, "link": "https://stackoverflow.com/questions/57700632/install-and-import-caffe-with-anaconda-on-windows-10/58380719#58380719", "title": "Install and import Caffe with Anaconda (on Windows 10)", "body": "<p>Caffe2 is built on caffe but yes it is different. This link : <a href=\"http://gianni.rosagallina.com/en/posts/2018/10/04/caffe2-gpu-windows-1.html#step-4-build\" rel=\"nofollow noreferrer\">http://gianni.rosagallina.com/en/posts/2018/10/04/caffe2-gpu-windows-1.html#step-4-build</a> provides a good overview of what steps need to be taken to install caffe2. Incase you hit and error you cannot resolve, you can report the problems on the pytorch git and the team will help you out.</p>\n"}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1302, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1602036518, "creation_date": 1567030158, "last_edit_date": 1567093582, "question_id": 57700632, "link": "https://stackoverflow.com/questions/57700632/install-and-import-caffe-with-anaconda-on-windows-10", "title": "Install and import Caffe with Anaconda (on Windows 10)", "body": "<p>I'm struggling to just install and import <code>caffe</code> on my windows 10's Anaconda (<code>conda 4.7.11</code>). I really don't know why such a well-known deep-learning package is that hard to just install!</p>\n\n<p>First, I tried to install it. With huge difficulties, I did the following and at last, apparently installation was successful:</p>\n\n<pre><code>conda create -n caffe python=3.7\n// activate the environment REM Depending on your conda version you may have to use activate caffe\n\nconda activate caffe\n// add the anaconda channel to resolve all dependencies\n\nconda config --add channels anaconda\n// Install caffe with cuda support or install caffe-cpu if you do not want CUDA support\n\nconda install caffe-cpu -c willyd\n</code></pre>\n\n<p>And now, just trying to <code>import caffe</code>, I get this error:</p>\n\n<pre><code>&gt;&gt;&gt; import caffe\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\envs\\caffe\\lib\\site-packages\\caffe\\__init__.py\", line 1, in &lt;module&gt;\n    from .pycaffe import Net, SGDSolver, NesterovSolver, AdaGradSolver, RMSPropSolver, AdaDeltaSolver, AdamSolver, NCCL, Timer\n  File \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\envs\\caffe\\lib\\site-packages\\caffe\\pycaffe.py\", line 13, in &lt;module&gt;\n    from ._caffe import Net, SGDSolver, NesterovSolver, AdaGradSolver, \\\nImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p>What should I do? How to fix it?</p>\n\n<p>BTW, is <code>Caffe2</code> different from <code>Caffe</code>?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "edited": false, "score": 2, "creation_date": 1567031059, "post_id": 57700551, "comment_id": 101845339, "body": "<i>I know how .split works. I just tried to make you guys understand what I want exactly</i> (your comment on an answer). In that case you may have an <a href=\"https://en.m.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11915935"}, "edited": false, "score": 0, "creation_date": 1567030241, "post_id": 57700623, "comment_id": 101845171, "body": "I know how .split works. I just tried to make you guys understand what I want exactly"}], "tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": false, "score": -1, "last_activity_date": 1567030280, "last_edit_date": 1567030280, "creation_date": 1567030081, "answer_id": 57700623, "question_id": 57700551, "link": "https://stackoverflow.com/questions/57700551/can-you-save-the-split-value-in-the-split-function/57700623#57700623", "title": "Can you save the split value in the split function?", "body": "<p>That's not how <code>split()</code> works... In fact, in your example it'll <em>only</em> split the input if the whole string <code>\"*+-\"</code> is present! This is closer to what you intended - assuming integers are used as input, and don't forget that you need to convert the input to numbers:</p>\n\n<pre><code>import re\n\nwell = raw_input(\"Enter num: \")\ncheckoperator = re.split(r'[*+-]', well)\n\nif '+' in well:\n    print(int(checkoperator[0]) + int(checkoperator[1]))\nelif '-' in well:\n    print(int(checkoperator[0]) - int(checkoperator[1]))\nelif '*' in well:\n    print(int(checkoperator[0]) * int(checkoperator[1]))\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Enter num: 6 * 7\n42\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1567030388, "post_id": 57700627, "comment_id": 101845219, "body": "This isn&#39;t what OP was asking for"}, {"owner": {"reputation": 2159, "user_id": 2614637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443082cbe3730d73329d4c45221da6fc?s=128&d=identicon&r=PG", "display_name": "Prem Anand", "link": "https://stackoverflow.com/users/2614637/prem-anand"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1567031563, "post_id": 57700627, "comment_id": 101845445, "body": "@G.Anderson OP says he wanted to get number operator number using something like split. And I believe thats exactly what I have provided. Care to explain why you think OP was asking for something else?"}], "tags": [], "owner": {"reputation": 2159, "user_id": 2614637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443082cbe3730d73329d4c45221da6fc?s=128&d=identicon&r=PG", "display_name": "Prem Anand", "link": "https://stackoverflow.com/users/2614637/prem-anand"}, "is_accepted": false, "score": -1, "last_activity_date": 1567030102, "creation_date": 1567030102, "answer_id": 57700627, "question_id": 57700551, "link": "https://stackoverflow.com/questions/57700551/can-you-save-the-split-value-in-the-split-function/57700627#57700627", "title": "Can you save the split value in the split function?", "body": "<p>You can use <code>re.split</code> to split based on any occurrence of <code>+-*</code></p>\n\n<pre><code>import re\nn1, operator, n2 = re.split(r'([*+-])', well)\nif operator == '*':\n    print int(n1) * int(n2)\n...\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 8431275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f3699f33935582a8ddc02e661f1d390?s=128&d=identicon&r=PG&f=1", "display_name": "Calculus", "link": "https://stackoverflow.com/users/8431275/calculus"}, "is_accepted": false, "score": 0, "last_activity_date": 1567030352, "creation_date": 1567030352, "answer_id": 57700662, "question_id": 57700551, "link": "https://stackoverflow.com/questions/57700551/can-you-save-the-split-value-in-the-split-function/57700662#57700662", "title": "Can you save the split value in the split function?", "body": "<p>You can use negated regex expression to match all characters that are not digits or letters</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>import re\n\nstring1 = \"2+2=5\"\nstring2 = \"25-16=9\"\n\nresults1 = re.findall(r\"[^A-Za-z0-9]\", string1)\nresults2 = re.findall(r\"[^A-Za-z0-9]\", string2)\n\nprint(results1)\nprint(results2)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>['+', '=']\n['-', '=']\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11915935"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1567030352, "creation_date": 1567029596, "question_id": 57700551, "link": "https://stackoverflow.com/questions/57700551/can-you-save-the-split-value-in-the-split-function", "title": "Can you save the split value in the split function?", "body": "<p>I want to create a number operator number calculator with the \".split()\" function, so I am taking the string, it's an input but how would I know what operator he typed? is there a way to save the operator so to do something like that:</p>\n\n<pre><code>well = raw_input(\"Enter num\")\ncheckopirator = well.split(\"*+-\")\nif(checkopirator == '*'):\n  print checkopirator[0] * checkopirator[1]\nif (checkopirator == '+'):\n  print checkopirator[0] + checkopirator[1]\nif (checkopirator == '-'):\n  print checkopirator[0] - checkopirator[1]\n</code></pre>\n"}, {"tags": ["python", "django", "django-forms", "modelchoicefield"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 8386560, "user_type": "registered", "profile_image": "https://graph.facebook.com/408336332895341/picture?type=large", "display_name": "Mateusz Slisz", "link": "https://stackoverflow.com/users/8386560/mateusz-slisz"}, "is_accepted": true, "score": 2, "last_activity_date": 1567030202, "creation_date": 1567030202, "answer_id": 57700642, "question_id": 57700523, "link": "https://stackoverflow.com/questions/57700523/displaying-fields-other-than-pk-in-a-django-form-with-a-modelchoicefield/57700642#57700642", "title": "Displaying fields other than pk in a Django Form with a ModelChoiceField", "body": "<p>According to docs </p>\n\n<blockquote>\n  <p>The <strong>str</strong>() method of the model will be called to generate string representations of the objects for use in the field\u2019s choices. To provide customized representations, subclass ModelChoiceField and override label_from_instance. This method will receive a model object and should return a string suitable for representing it.</p>\n</blockquote>\n\n<p><a href=\"https://docs.djangoproject.com/en/2.2/ref/forms/fields/#modelchoicefield\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/ref/forms/fields/#modelchoicefield</a></p>\n\n<p>so you should define <code>__str__() method</code> for <code>Project</code> model e.g.</p>\n\n<pre><code>def __str__(self):\n    return self.name\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 11786934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e96fa188104201ef6dec833792e2e0e?s=128&d=identicon&r=PG&f=1", "display_name": "mvb", "link": "https://stackoverflow.com/users/11786934/mvb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 57700642, "answer_count": 1, "score": 0, "last_activity_date": 1567030202, "creation_date": 1567029413, "question_id": 57700523, "link": "https://stackoverflow.com/questions/57700523/displaying-fields-other-than-pk-in-a-django-form-with-a-modelchoicefield", "title": "Displaying fields other than pk in a Django Form with a ModelChoiceField", "body": "<p>I am building a website where users can upload files and can attach uploads to projects that they created beforehand. The upload is done with a django form where the user can specify the title, comments, etc... There is also a dropdown list where the user can choose from the existing projects that he created (list of projects is dependent on user)\nAs of now the dropdown only shows the (autogenerated) project id which is the pk of the model Project.</p>\n\n<p>I want the dropdown to show the names of the projects and not the project ID which is not very meaningful for the user.</p>\n\n<p>I have already tried </p>\n\n<pre><code>to_field_name='name' \n</code></pre>\n\n<p>but that didn't work</p>\n\n<p>I have also tried </p>\n\n<pre><code>Project.objects.filter(user=user).values_list('name')\n\nor\n\nProject.objects.filter(user=user).values('name')\n</code></pre>\n\n<p>the last two options show the project name in {'projectname} but when I select them and submit the form the error \"Select a valid choice. That choice is not one of the available choices.\"</p>\n\n<p>This is my code: </p>\n\n<p>models.py </p>\n\n<pre><code>class Upload(models.Model):\n    user = models.ForeignKey(User, on_delete=models.SET_NULL, null=True)\n    upload_date = models.DateTimeField(default=timezone.now)\n    comments = models.CharField(max_length=10000, null=True)\n    title = models.CharField(max_length=10000, null=True)\n    project = models.CharField(max_length=99, default='--None--')\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class UploadForm(ModelForm):\n    project = ModelChoiceField(label='Select Project', queryset=Project.objects.all(), to_field_name='name',\n                               empty_label='--Select Project--')\n\n    def __init__(self, *args, **kwargs):\n        user = kwargs.pop('user', None)\n        super(UploadForm, self).__init__(*args, **kwargs)\n        if user is not None:\n            self.fields['project'].queryset = Project.objects.filter(user=user)\n\n    class Meta:\n        model = Upload\n        fields = ['title', 'project', 'upload_date', 'comments']\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1567029594, "post_id": 57700522, "comment_id": 101845043, "body": "Take a look: <a href=\"https://stackoverflow.com/questions/31077366/pil-cannot-identify-image-file-for-io-bytesio-object\" title=\"pil cannot identify image file for io bytesio object\">stackoverflow.com/questions/31077366/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 11987852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a404db4c5a675e10637067b52f281e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jo_Gisbert", "link": "https://stackoverflow.com/users/11987852/jo-gisbert"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1567031596, "post_id": 57700522, "comment_id": 101845452, "body": "Thanks rafaeIc, I took a look at the suggested post but cannot solve the error. What is weird is that if I change the range of the for loop to 1 it works for the first training example. But if I keep it at 2 it give me the mentioned error."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11987852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a404db4c5a675e10637067b52f281e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jo_Gisbert", "link": "https://stackoverflow.com/users/11987852/jo-gisbert"}, "edited": false, "score": 0, "creation_date": 1567068851, "post_id": 57701603, "comment_id": 101855446, "body": "Thanks for your help @Spaceship222, I just tried changing the <code>User-agent</code> in the for loop so that now the request line in the loop is: <code>r = requests.get(df.iloc[i,1], headers=headers)</code> with <code>headers = {&#39;User-Agent&#39;: &#39;Mozilla&#47;5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit&#47;XXX.XX (KHTML, like Gecko) Chrome&#47;XX.X.XXXX.XXX Safari&#47;XXX.XX&#39;}</code> but the same error occurs: <code>OSError: cannot identify image file &lt;_io.BytesIO object at 0x1105bfd00&gt;</code> @rafaelc"}, {"owner": {"reputation": 486, "user_id": 7390103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6f9336ce4ea417426a99450ea8777c?s=128&d=identicon&r=PG&f=1", "display_name": "Spaceship222", "link": "https://stackoverflow.com/users/7390103/spaceship222"}, "reply_to_user": {"reputation": 3, "user_id": 11987852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a404db4c5a675e10637067b52f281e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jo_Gisbert", "link": "https://stackoverflow.com/users/11987852/jo-gisbert"}, "edited": false, "score": 0, "creation_date": 1567069481, "post_id": 57701603, "comment_id": 101855771, "body": "I guess your error comes from wrong url since second url should be <code>&#39;https:&#47;&#47;www.iprotego.com&#47;wp- content&#47;uploads&#47;google.jpg&#39;</code>. There is no space between &#39;wp-&#39; and &#39;content&#39;. It would be better to check response status by <code>r.raise_for_status()</code> before using <code>r.content</code>"}], "tags": [], "owner": {"reputation": 486, "user_id": 7390103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6f9336ce4ea417426a99450ea8777c?s=128&d=identicon&r=PG&f=1", "display_name": "Spaceship222", "link": "https://stackoverflow.com/users/7390103/spaceship222"}, "is_accepted": true, "score": 0, "last_activity_date": 1567040670, "last_edit_date": 1567040670, "creation_date": 1567039474, "answer_id": 57701603, "question_id": 57700522, "link": "https://stackoverflow.com/questions/57700522/how-to-retrieve-images-from-a-url-in-a-pandas-dataframe-and-store-them-as-pil-ob/57701603#57701603", "title": "How to retrieve images from a url in a pandas dataframe and store them as PIL object in a new column", "body": "<p>According to my test, if you make a request to second url with default header,you will be <em>forbidden</em> to access content(I guess server think you are web spider under \"User-agent\" == \"python-requests/2.xx.x\").So just change headers <code>User-agent</code> to be the value(e.g <code>Mozilla/5.0 (Windows NT 10.0; WOW64; rv:60.0) Gecko/20100101 Firefox/60.0</code>) as if your browser requests</p>\n"}], "owner": {"reputation": 3, "user_id": 11987852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a404db4c5a675e10637067b52f281e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jo_Gisbert", "link": "https://stackoverflow.com/users/11987852/jo-gisbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 57701603, "answer_count": 1, "score": 0, "last_activity_date": 1567073942, "creation_date": 1567029413, "last_edit_date": 1567073942, "question_id": 57700522, "link": "https://stackoverflow.com/questions/57700522/how-to-retrieve-images-from-a-url-in-a-pandas-dataframe-and-store-them-as-pil-ob", "title": "How to retrieve images from a url in a pandas dataframe and store them as PIL object in a new column", "body": "<p>I'm trying to store as a PIL object in a new column of a dataframe pictures that are located in a column of the same dataframe in the form of URL's.</p>\n\n<p>I've tried the following code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nfrom PIL import Image\nimport requests\nfrom io import BytesIO\n\npictures = [None] * 2\n\ndf = pd.DataFrame({'project_id':[\"1\", \"2\"], \n                    'image_url':['http://www.personal.psu.edu/dqc5255/gl-29.jpg',\n                                'https://www.iprotego.com/wp-content/uploads/google.jpg']})\n\n# Previously the second link was broken and led to an error, I just edited it and now works fine\n\ndf.insert(2, \"pictures\", pictures, True)\n\nfor i in range(2):\n    r = requests.get(df.iloc[i,1]) \n    df.iloc[i,2] = Image.open(BytesIO(r.content))\n\ndf\n</code></pre>\n\n<p>I expected to get a dataframe with this format but including both training examples:</p>\n\n<pre><code>    project_id                  image_url                                  pictures\n0       1    http://www.personal.psu.edu/dqc5255/gl-29.jpg &lt;PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=400x300 at 0x116EF9AC8&gt;\n</code></pre>\n\n<p>But instead got the following error:</p>\n\n<pre><code>OSError: cannot identify image file &lt;_io.BytesIO object at 0x116ec2f10&gt;\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "loops", "if-statement"], "comments": [{"owner": {"reputation": 1, "user_id": 11730554, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6Aii4emf8LQ/AAAAAAAAAAI/AAAAAAAACJw/JUxZts-Jx2w/photo.jpg?sz=128", "display_name": "karan sachdeva", "link": "https://stackoverflow.com/users/11730554/karan-sachdeva"}, "edited": false, "score": 0, "creation_date": 1567029300, "post_id": 57700498, "comment_id": 101844962, "body": "Aussi Aussi Aussi Aussi Aussi Present Present Present Check Present Present Check Present Present Present Present Check Present Present Present Present Present Present Present Present Present Present Present Present Present Present Check Check Present Present Check Present Check Present Present Present Present Present Present Present Present This is the output"}, {"owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "edited": false, "score": 0, "creation_date": 1567030644, "post_id": 57700498, "comment_id": 101845267, "body": "Did you try just <code>attendence = []</code> before your <code>for</code> loop and then <code>attendance.append(value)</code>, where <code>value</code> can be <i>Aussie</i>, <i>Present</i>, or <i>Check</i>?"}, {"owner": {"reputation": 1, "user_id": 11730554, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6Aii4emf8LQ/AAAAAAAAAAI/AAAAAAAACJw/JUxZts-Jx2w/photo.jpg?sz=128", "display_name": "karan sachdeva", "link": "https://stackoverflow.com/users/11730554/karan-sachdeva"}, "reply_to_user": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "edited": false, "score": 0, "creation_date": 1567103291, "post_id": 57700498, "comment_id": 101873679, "body": "Thank you so much! It worked!"}, {"owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "edited": false, "score": 0, "creation_date": 1567104838, "post_id": 57700498, "comment_id": 101874287, "body": "Cool beans, I added an answer to formalize what you&#39;re looking for. If you see value in my answer, you can accept it by clicking the checkmark next to it."}], "answers": [{"tags": [], "owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "is_accepted": true, "score": 0, "last_activity_date": 1567104792, "creation_date": 1567104792, "answer_id": 57716284, "question_id": 57700498, "link": "https://stackoverflow.com/questions/57700498/i-need-to-save-the-output-of-print-command-into-a-list/57716284#57716284", "title": "I need to save the output of Print command into a list", "body": "<p>You'll need to create an empty list before your loop, and then append to it during the loop.</p>\n\n<ol>\n<li>Add this before your <code>for</code> loop:</li>\n</ol>\n\n<pre><code>attendance = []\n</code></pre>\n\n<ol start=\"2\">\n<li>Add this inside of <code>for</code> loop, at the end, where <code>value</code> can be one of <em>Aussi</em>, <em>Present</em>, or <em>Check</em>:</li>\n</ol>\n\n<pre><code>attendance.append(value)\n</code></pre>\n\n<p>Here's what it might look like:</p>\n\n<pre><code>df1 =df[['Date', 'Agent Name', 'Login Time']]\n\nattendance = []\nfor x in df1['Login Time']:\n    s1 = str(x)\n    s2 = '12:00:00'\n    s3 = '3:10:00'\n    s4 = '01:00:00'\n    FMT = '%H:%M:%S'\n    tdelta = datetime.strptime(s2, FMT) - datetime.strptime(s1, FMT)\n    if x == s4:\n        value = 'Aussi'\n    elif (str(tdelta)) &lt; s3:\n        value = 'Present'\n    else: \n        value = 'Check'\n    attendance.append(value)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11730554, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6Aii4emf8LQ/AAAAAAAAAAI/AAAAAAAACJw/JUxZts-Jx2w/photo.jpg?sz=128", "display_name": "karan sachdeva", "link": "https://stackoverflow.com/users/11730554/karan-sachdeva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57716284, "answer_count": 1, "score": -1, "last_activity_date": 1567104792, "creation_date": 1567029251, "question_id": 57700498, "link": "https://stackoverflow.com/questions/57700498/i-need-to-save-the-output-of-print-command-into-a-list", "title": "I need to save the output of Print command into a list", "body": "<p>I am using pandas to compare time durations to mark attendance.\nI have used DateTime and timedelta to compare the durations. I want to save the output in the adjacent column so that we know who was present and who was not.</p>\n\n<p>I can compare the values and print if the person was present or absent, but i want to do it in the excel file in front of the name of the person</p>\n\n<pre><code>df1 =df[['Date', 'Agent Name', 'Login Time']]\n\nfor x in df1['Login Time']:\ns1 = str(x)\ns2 = '12:00:00'\ns3 = '3:10:00'\ns4 = '01:00:00'\nFMT = '%H:%M:%S'\ntdelta = datetime.strptime(s2, FMT) - datetime.strptime(s1, FMT)\nif x == s4:\n    print('Aussi')\nelif (str(tdelta)) &lt; s3:\n    print('Present')\nelse: \n    print('Check')\n</code></pre>\n\n<p>what i am thinking is, i will store the value of the output in a list and then add the list to a new column in the df.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1567032244, "post_id": 57700488, "comment_id": 101845589, "body": "You can print <code>atexit._exithandlers</code> to see what functions have been registered - hopefully there aren&#39;t too many of them.  Or, you can invoke <code>atexit._run_exitfuncs()</code> to actually run the functions, while your debugger is still active."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1567032692, "post_id": 57700488, "comment_id": 101845688, "body": "@jasonharper [(&lt;built-in function __cleanup&gt;, (), {}), (&lt;function shutdown at 0x014212B0&gt;, (), {}), (&lt;function _exit_function at 0x017EC070&gt;, (), {}), (&lt;built-in function App_CleanUp&gt;, (), {}), (&lt;function stoptrace at 0x017D4070&gt;, (), {}), (&lt;function shutdown at 0x032E4330&gt;, (), {})] ... Unfortunately, it doesn&#39;t tell me much. I guess these shutdown functions are in libraries somewhere."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1567033054, "post_id": 57700488, "comment_id": 101845764, "body": "<code>[f.func_globals[&#39;__name__&#39;] for f, _, _ in atexit._exithandlers]</code> should give you the module names for each of those functions."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1567033393, "post_id": 57700488, "comment_id": 101845822, "body": "@jasonharper &#39;AttributeError: &#39;builtin_function_or_method&#39; object has no attribute &#39;func_globals&#39;&#39;"}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567029184, "creation_date": 1567029184, "question_id": 57700488, "link": "https://stackoverflow.com/questions/57700488/how-to-debug-an-access-violation-in-atexit", "title": "How to debug an access violation in atexit", "body": "<p>A very large application I am working has a segfault when I shut it down. If I use faulthandler, it says there is an access violation in atexit</p>\n\n<pre><code>Current thread 0x00000a8c (most recent call first):\n  File \"C:\\Python27\\lib\\atexit.py\", line 24 in _run_exitfuncs\nWindows exception: access violation\n\nCurrent thread 0x00000a8c (most recent call first):\n  File \"C:\\Python27\\lib\\atexit.py\", line 24 in _run_exitfuncs\nSegmentation fault\n</code></pre>\n\n<p>That really doesn't tell me much. When I debug through the code, it goes all the way through main and out. The debugger won't step anymore after that, even though the program isn't all the way done yet. If I let it continue, it just does the segfault and doesn't show me anything.</p>\n\n<p>I imagine it is some library we are using, but how to identify it?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "export-to-csv"], "comments": [{"owner": {"reputation": 194, "user_id": 9802392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d parolin", "link": "https://stackoverflow.com/users/9802392/d-parolin"}, "edited": false, "score": 0, "creation_date": 1567034704, "post_id": 57700455, "comment_id": 101846068, "body": "Are you sure the if equations are True for all files ? You should add an else: for both and print/log if something fails the check. From your original 200 files you are looking for a matching file with a different name twice so that could be an issue. Further it seem odd that you read only 19 bytes from a line then split it and use the second split item (assuming a date is in there for pd.timedelta_range). If you could provide the folder stucture there could be much easier ways to simply iterate over the files themselves."}, {"owner": {"reputation": 1, "user_id": 11991380, "user_type": "registered", "profile_image": "https://graph.facebook.com/2422922641156214/picture?type=large", "display_name": "Arshavir Ghahramanian", "link": "https://stackoverflow.com/users/11991380/arshavir-ghahramanian"}, "reply_to_user": {"reputation": 194, "user_id": 9802392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d parolin", "link": "https://stackoverflow.com/users/9802392/d-parolin"}, "edited": false, "score": 0, "creation_date": 1567100123, "post_id": 57700455, "comment_id": 101872430, "body": "Hi, thanks for comment.. Ifigured out)).  loop was ok, the problem was pd.concat().... it perfectly worked with frame = pd.concat(frame, ignore_index=True) ... although I didn&#39;t completely undersood why.. I had only that 4 coulms in each dfs."}], "owner": {"reputation": 1, "user_id": 11991380, "user_type": "registered", "profile_image": "https://graph.facebook.com/2422922641156214/picture?type=large", "display_name": "Arshavir Ghahramanian", "link": "https://stackoverflow.com/users/11991380/arshavir-ghahramanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567028931, "creation_date": 1567028931, "question_id": 57700455, "link": "https://stackoverflow.com/questions/57700455/python-doesnt-read-all-files-in-a-loop-to-concatinate-pd-dfs", "title": "Python doesn&#39;t read all files in a loop to concatinate pd dfs", "body": "<p>$1. This code works, put only for 4 files in my database. It does not read all files and append in frame. I am trying to concatenate multiple Trend.csv files (200) in a loop. </p>\n\n<pre><code>  frame =[]\n  for raw_file_name in raw_files:\n      input_raw_path = os.path.join(raw_path, raw_file_name, 'log.txt')\n      if os.path.isfile (input_raw_path):\n          with open(input_raw_path, encoding= \"Latin-1\") as f:\n              ts = f.readline(19).split()[1]\n\n              input_superecg_path = os.path.join(superecg_path, raw_file_name, 'Trend.csv')\n              if os.path.isfile (input_superecg_path):\n                  df = pd.read_csv(input_superecg_path)\n                  df['File'] = raw_file_name\n                  df['Time'] = pd.timedelta_range(ts, freq='T', periods=df.shape[0], name='Time')\n                  df = pd.melt(df, id_vars = ['Time', 'File'], var_name = 'Parameter', value_name = 'Value')\n                  frame.append(df)\n\n\n  frame = pd.concat(frame, keys = ['Time','File','Parameter','Value'])\n</code></pre>\n\n<p>$2. I get my frame only for 4 files, instead of 200</p>\n\n<pre><code>    In [61]: frame.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nMultiIndex: 298688 entries, (Time, 0) to (Value, 74671)\nData columns (total 4 columns):\nTime         298688 non-null timedelta64[ns]\nFile         298688 non-null object\nParameter    298688 non-null object\nValue        237502 non-null float64\ndtypes: float64(1), object(2), timedelta64[ns](1)\nmemory usage: 10.5+ MB\n\nIn [62]: frame.File.unique()\nOut[62]: \narray(['ICC000013 RASESG0347  1', 'ICC000019  1',\n   'ICC000020 RASESG0341  1', 'ICC000021 RASESG0075  1'],       dtype=object)\nIn [64]: len(raw_files)\nOut[64]: 201\n</code></pre>\n"}, {"tags": ["python", "html", "xpath", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 2503, "user_id": 1860317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/N5IVQ.jpg?s=128&g=1", "display_name": "MoreScratch", "link": "https://stackoverflow.com/users/1860317/morescratch"}, "reply_to_user": {"reputation": 21453, "user_id": 1839439, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/agMKZ.png?s=128&g=1", "display_name": "Dharman", "link": "https://stackoverflow.com/users/1839439/dharman"}, "edited": false, "score": 0, "creation_date": 1567029439, "post_id": 57700438, "comment_id": 101844997, "body": "I am executing this Xpath in the Scrapy Web-scraping framework."}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1567063096, "post_id": 57700438, "comment_id": 101852501, "body": "would bs4 be an acceptable alternative?"}], "answers": [{"tags": [], "owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "is_accepted": false, "score": 1, "last_activity_date": 1567042322, "creation_date": 1567042322, "answer_id": 57701868, "question_id": 57700438, "link": "https://stackoverflow.com/questions/57700438/return-all-rows-in-a-table-that-has-specific-column-header-text-using-xpath/57701868#57701868", "title": "Return all rows in a table that has specific column header text using Xpath", "body": "<p>One possible reason that you have <em>table based layout</em> on this page: you have one big main table, each cell contains another tables and so on.</p>\n\n<p>You need to be more specific to find your target table:</p>\n\n<pre><code>//table[ tbody/tr/th[contains(text(), \"Birth Date\")] ]/tbody/tr\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2503, "user_id": 1860317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/N5IVQ.jpg?s=128&g=1", "display_name": "MoreScratch", "link": "https://stackoverflow.com/users/1860317/morescratch"}, "edited": false, "score": 0, "creation_date": 1567182345, "post_id": 57725765, "comment_id": 101900779, "body": "Works perfectly! Thanks."}], "tags": [], "owner": {"reputation": 3020, "user_id": 11946287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6b9c49c039050d74c5141b1ca4d94d?s=128&d=identicon&r=PG&f=1", "display_name": "tomjn", "link": "https://stackoverflow.com/users/11946287/tomjn"}, "is_accepted": true, "score": 1, "last_activity_date": 1567163944, "creation_date": 1567163944, "answer_id": 57725765, "question_id": 57700438, "link": "https://stackoverflow.com/questions/57700438/return-all-rows-in-a-table-that-has-specific-column-header-text-using-xpath/57725765#57725765", "title": "Return all rows in a table that has specific column header text using Xpath", "body": "<p>If I understand what you want then I think you are close. I think you want</p>\n\n<pre><code>'//table[.//th[contains(text(), \"Birth Date\")]]//tr'\n</code></pre>\n\n<p>(note the <code>.</code> before <code>//th</code> to query with respect to the table rather than the entire document).</p>\n\n<p>You could also write this as</p>\n\n<pre><code>'//table[contains(.//th/text(), \"Birth Date\")]//tr'\n</code></pre>\n"}], "owner": {"reputation": 2503, "user_id": 1860317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/N5IVQ.jpg?s=128&g=1", "display_name": "MoreScratch", "link": "https://stackoverflow.com/users/1860317/morescratch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 57725765, "answer_count": 2, "score": 0, "last_activity_date": 1567163944, "creation_date": 1567028840, "last_edit_date": 1567029479, "question_id": 57700438, "link": "https://stackoverflow.com/questions/57700438/return-all-rows-in-a-table-that-has-specific-column-header-text-using-xpath", "title": "Return all rows in a table that has specific column header text using Xpath", "body": "<p>I have the following HTML table in a page:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tbody&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Birth Date&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I have the following Xpath:</p>\n\n<pre><code>//table[//th[contains(text(), \"Birth Date\")]]/tr\n</code></pre>\n\n<p>I get rows from all tables in the page, not the one with the <code>Birth Date</code> header.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "python-3.x", "opencv"], "comments": [{"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1567029461, "post_id": 57700425, "comment_id": 101845010, "body": "Take a look at <a href=\"https://stackoverflow.com/questions/56905592/automatic-contrast-and-brightness-adjustment-of-a-color-photo-of-a-sheet-of-pape/56909036\">Automatic contrast and brightness adjustment of a color photo</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "is_accepted": false, "score": 0, "last_activity_date": 1567029545, "creation_date": 1567029545, "answer_id": 57700542, "question_id": 57700425, "link": "https://stackoverflow.com/questions/57700425/incorrect-number-of-indices-while-increasing-brightness-of-a-color-image/57700542#57700542", "title": "Incorrect number of indices while increasing brightness of a color image", "body": "<p>The problem is a colored image has multiple channels for the different color (example, RGB or RGBA) so when you do <code>img.item(i,j)</code> you are missing the third dimension (the three color channels). You can add another for loop that loops over each of the color channels but you can also just use numpy's <code>minimum</code> function to make it more efficient (i.e. add 255 to the values of your image and if it's greater than 255 it will use 255). </p>\n\n<pre><code>import numpy as np\nimport cv2\n\nimg = cv2.imread('image1.jpg',1)\nbrightness = 100\nnp.minimum(img + brightness, 255)\ncv2.imwrite('brightness.jpg', img)\ncv2.imshow('image',img)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "is_accepted": false, "score": 0, "last_activity_date": 1567038836, "creation_date": 1567038836, "answer_id": 57701552, "question_id": 57700425, "link": "https://stackoverflow.com/questions/57700425/incorrect-number-of-indices-while-increasing-brightness-of-a-color-image/57701552#57701552", "title": "Incorrect number of indices while increasing brightness of a color image", "body": "<p>One solution is to use <strong>OpenCV normalize</strong> to stretch the image to full dynamic range (0 to 255). </p>\n\n<p>Here are two output results depending upon the min and max stretch limits. Note that normalize works on float data and the min and max values are nominally stretched to full range of 0 to 1. But we ned to clip the results to this range and then scale them to the range 0 to 255 before saving as uint8 for output, if the min and max values are outside the range of 0 to 1.</p>\n\n<pre><code>The first result is stretched to min and max of 0 to 1.\n\nThe second result is stretched to min and max of 0 to 1.2 in order to make it even brighter.\n</code></pre>\n\n<p><br>\nImage:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yJzAe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yJzAe.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#!/bin/python3.7\n\nimport cv2\nimport numpy as np\n\n# read image\nimg = cv2.imread(\"zelda1_bm20_cm20.jpg\", cv2.IMREAD_COLOR)\n\n# normalize float versions\nnorm_img1 = cv2.normalize(img, None, alpha=0, beta=1, norm_type=cv2.NORM_MINMAX, dtype=cv2.CV_32F)\nnorm_img2 = cv2.normalize(img, None, alpha=0, beta=1.2, norm_type=cv2.NORM_MINMAX, dtype=cv2.CV_32F)\n\n# scale to uint8\nnorm_img1 = (255*norm_img1).astype(np.uint8)\nnorm_img2 = np.clip(norm_img2, 0, 1)\nnorm_img2 = (255*norm_img2).astype(np.uint8)\n\n# write normalized output images\ncv2.imwrite(\"zelda1_bm20_cm20_normalize1.jpg\",norm_img1)\ncv2.imwrite(\"zelda1_bm20_cm20_normalize2.jpg\",norm_img2)\n\n# display input and both output images\ncv2.imshow('original',img)\ncv2.imshow('normalized1',norm_img1)\ncv2.imshow('normalized2',norm_img2)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n\n<p><br></p>\n\n<p>Min and Max (0 to 1):</p>\n\n<p><a href=\"https://i.stack.imgur.com/8VjXl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8VjXl.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Min and Max (0 to 1.2):</p>\n\n<p><a href=\"https://i.stack.imgur.com/EfCSQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EfCSQ.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 11208732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a250f8ddc1e585e5fadc84497cf6e213?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Kumar", "link": "https://stackoverflow.com/users/11208732/raj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1567038836, "creation_date": 1567028737, "last_edit_date": 1567028789, "question_id": 57700425, "link": "https://stackoverflow.com/questions/57700425/incorrect-number-of-indices-while-increasing-brightness-of-a-color-image", "title": "Incorrect number of indices while increasing brightness of a color image", "body": "<p>Code works fine while reading a gray scale image to perform brightness. But same code doesn't work with color image.\nHow to perform brightness operation from a color image?</p>\n\n<p>While reading the image using cv2.imread at the argument 0 works fine but I tried with 1 it doesn't work as 0 is for gray scale image and 1 for color image.</p>\n\n<pre><code>import numpy as np\nimport cv2\n\nimg = cv2.imread('image1.jpg',1)\n\nheight = img.shape[0]\nwidth = img.shape[1]\nbrightness = 100\n\nfor i in np.arange(height):\n    for j in np.arange(width):\n        a = img.item(i,j)\n        b = a + brightness\n        if b &gt; 255:\n            b = 255\n        img.itemset((i,j), b)\n\ncv2.imwrite('brightness.jpg', img)\n\ncv2.imshow('image',img)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>I expect a color image to be read and perform brightness operation but it is showing ValueError: incorrect number of indices for array</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-kafka", "apache-spark-sql"], "answers": [{"tags": [], "owner": {"reputation": 1857, "user_id": 6275871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqyQS.jpg?s=128&g=1", "display_name": "SMaZ", "link": "https://stackoverflow.com/users/6275871/smaz"}, "is_accepted": false, "score": 3, "last_activity_date": 1567033675, "creation_date": 1567033675, "answer_id": 57701044, "question_id": 57700412, "link": "https://stackoverflow.com/questions/57700412/pyspark-split-the-spark-dataframe-of-type-string/57701044#57701044", "title": "Pyspark split the spark dataframe of type string", "body": "<p>Your Solution is perfectly ok. Only problem is the assignment of <code>df2</code> and <code>df3</code> after doing splits and using for the next step. After doing first split you assigned to <code>df3</code> but for subsequent splits you used <code>df2</code> only. Hence, only 3rd split statement was evaluated by a spark. </p>\n\n<p>Solution wise either don't assign to a new variable till last split</p>\n\n<pre><code>df3 = df2.withColumn('Name1', f.split('value', ',').getItem(0)).\\\n                 withColumn('Name2', f.split('value', ',').getItem(1)).\\\n                 withColumn('Name3', f.split('value', ',').getItem(2))\n\ndf3.show()\n+-----------------+-----+----------+-----+\n|            value|Name1|     Name2|Name3|\n+-----------------+-----+----------+-----+\n|      1,Visa,6574|    1|      Visa| 6574|\n|      3,Visa,6574|    3|      Visa| 6574|\n|4,MasterCard,6574|    4|MasterCard| 6574|\n|5,MasterCard,6574|    5|MasterCard| 6574|\n|   8,Maestro,8372|    8|   Maestro| 8372|\n+-----------------+-----+----------+-----+\n\n</code></pre>\n\n<p>or use an assigned variable in next split (Won't encourage to use this way unless it's necessary)</p>\n\n<pre><code>df3 = df2.withColumn('Name1', f.split('value', ',').getItem(0))\n\ndf3 = df3.withColumn('Name2', f.split('value', ',').getItem(1))\n\ndf3 = df3.withColumn('Name3', f.split('value', ',').getItem(2))\n\ndf3.show()\n+-----------------+-----+----------+-----+\n|            value|Name1|     Name2|Name3|\n+-----------------+-----+----------+-----+\n|      1,Visa,6574|    1|      Visa| 6574|\n|      3,Visa,6574|    3|      Visa| 6574|\n|4,MasterCard,6574|    4|MasterCard| 6574|\n|5,MasterCard,6574|    5|MasterCard| 6574|\n|   8,Maestro,8372|    8|   Maestro| 8372|\n+-----------------+-----+----------+-----+\n\n</code></pre>\n"}], "owner": {"reputation": 188, "user_id": 7255439, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a7555d0356059d8453cfcc9ab072efd2?s=128&d=identicon&r=PG&f=1", "display_name": "Khumar", "link": "https://stackoverflow.com/users/7255439/khumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567083707, "creation_date": 1567028617, "last_edit_date": 1567083707, "question_id": 57700412, "link": "https://stackoverflow.com/questions/57700412/pyspark-split-the-spark-dataframe-of-type-string", "title": "Pyspark split the spark dataframe of type string", "body": "<p>I am creating a spark dataframe by reading data from kafka topic using spark(batch processing,not streaming).I wanted to load this dataframe to cassandra using spark.Dataframe is in string format like below.</p>\n\n<p>root\n |-- value: string (nullable = true)</p>\n\n<pre><code>+--------------------+\n|value               |\n+--------------------+\n|\"1,Visa,6574\"       |\n|\"3,Visa,6574\"       |\n|\"4,MasterCard,6574\" |\n|\"5,MasterCard,6574\" |\n|\"8,Maestro,8372\"    |\n+--------------------+\n</code></pre>\n\n<p>I tried to split dataframe record using ',' delimiter and form new dataframe which I could data to cassandra.</p>\n\n<p>created sparkDF like below.</p>\n\n<pre><code>df = spark \\\n.read \\\n.format(\"kafka\") \\\n.option(\"kafka.bootstrap.servers\", KAFKA_BOOTSTRAP_SERVERS_CONS) \\\n.option(\"subscribe\", KAFKA_TOPIC_NAME_CONS) \\\n.option(\"startingOffsets\", \"earliest\") \\\n.load()\ndf2=df.selectExpr(\"CAST(value AS STRING)\")\ndf2.printSchema()\n</code></pre>\n\n<p>I tried to split the data using ','.</p>\n\n<pre><code>split_col=split(df2['value'],',')\ndf3=df2.withColumn('Name1',split_col.getItem(0))\ndf3=df2.withColumn('Name2',split_col.getItem(1))\ndf3=df2.withColumn('Name3',split_col.getItem(2))\n</code></pre>\n\n<p>Above code is not giving expected result,I am getting put like</p>\n\n<p>root\n |-- value: string (nullable = true)\n |-- Name3: string (nullable = true)</p>\n\n<pre><code>+-------------------+-----+\n|value              |Name3|\n+-------------------+-----+\n|\"1,Visa,6574\"      |6574\"|\n|\"3,Visa,6574\"      |6574\"|\n|\"4,MasterCard,6574\"|6574\"|\n|\"5,MasterCard,6574\"|6574\"|\n|\"8,Maestro,8372\"   |8372\"|\n+-------------------+-----+\n</code></pre>\n\n<p>I wanted to get the put like below:</p>\n\n<pre><code>+-------------------+----------+------+\n|Name1              |Name2     |Name3 |\n+-------------------+----------+------+\n| 1                 |Visa      |6574  |\n| 3                 |Visa      |6574  |\n| 4                 |MasterCard|6574  |\n| 5                 |MasterCard|6574  |\n| 8                 |Maestro   |8372  |\n+-------------------+----------+------+\n</code></pre>\n\n<p>Pls help !!</p>\n"}, {"tags": ["python", "selenium", "exception", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 770, "user_id": 7592395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hmDoF.png?s=128&g=1", "display_name": "skymon", "link": "https://stackoverflow.com/users/7592395/skymon"}, "edited": false, "score": 0, "creation_date": 1567028924, "post_id": 57700388, "comment_id": 101844864, "body": "Have you tried catching the error as stated in the python coded answer to your linked question here: <a href=\"https://stackoverflow.com/a/30731973/7592395\">stackoverflow.com/a/30731973/7592395</a>"}, {"owner": {"reputation": 3305, "user_id": 534062, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/tUb3U.jpg?s=128&g=1", "display_name": "n00b", "link": "https://stackoverflow.com/users/534062/n00b"}, "reply_to_user": {"reputation": 770, "user_id": 7592395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hmDoF.png?s=128&g=1", "display_name": "skymon", "link": "https://stackoverflow.com/users/7592395/skymon"}, "edited": false, "score": 0, "creation_date": 1567029107, "post_id": 57700388, "comment_id": 101844915, "body": "Id rather that unexpected alerts alwasy be accepted rather then handling an exception, because I want the test to continue, even if there is an unexpected alert. I can switch to the alert if i know it exist, but in this case the alert appearing is random (sometimes it pops sometimes it doesnt). my next step is to always try accepting an alert and swalling the exception if the alert doesnt exist, but it seems kind of ugly."}], "answers": [{"comments": [{"owner": {"reputation": 3305, "user_id": 534062, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/tUb3U.jpg?s=128&g=1", "display_name": "n00b", "link": "https://stackoverflow.com/users/534062/n00b"}, "edited": false, "score": 0, "creation_date": 1567086223, "post_id": 57706231, "comment_id": 101865308, "body": "That worked thanks. FYI to future googlers you can use the same code for the Firefox geckodriver (specifically the set_capability line) and it works the same. Also for the &quot;accept and notify&quot; option, i found it only worked if i set it as a single word &quot;acceptandnotify&quot; however it will still cause unit tests to fail with that option."}], "tags": [], "owner": {"reputation": 3449, "user_id": 5324105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z4RgL.jpg?s=128&g=1", "display_name": "Rahul L", "link": "https://stackoverflow.com/users/5324105/rahul-l"}, "is_accepted": true, "score": 3, "last_activity_date": 1567068182, "last_edit_date": 1567068182, "creation_date": 1567067687, "answer_id": 57706231, "question_id": 57700388, "link": "https://stackoverflow.com/questions/57700388/how-to-set-unexpectedalertbehaviour-in-selenium-python/57706231#57706231", "title": "How to set UnexpectedAlertBehaviour in Selenium Python", "body": "<p>As chromedriver becoming W3C compliant . We need use <a href=\"https://w3c.github.io/webdriver/#capabilities\" rel=\"nofollow noreferrer\">unhandledPromptBehavior</a>\nChecked on ChromeDriver 76.0.3809.126 (Runs in W3C standard compliant mode by default)</p>\n\n<pre><code>chrome_options = Options()\nchrome_options.set_capability('unhandledPromptBehavior', 'accept')\ndriver = webdriver.Chrome(options=chrome_options)\ndriver.get(\"https://www.google.com\")\ndriver.execute_script('alert(\\\"HI\\\");')\ntime.sleep(10)\nprint(driver.title)\ntime.sleep(10)\n</code></pre>\n\n<p>Reference Chromedriver: <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=2597&amp;can=2&amp;q=2597\" rel=\"nofollow noreferrer\">Issue 2597: Support new unhandledPromptBehavior modes</a></p>\n"}], "owner": {"reputation": 3305, "user_id": 534062, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/tUb3U.jpg?s=128&g=1", "display_name": "n00b", "link": "https://stackoverflow.com/users/534062/n00b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1875, "favorite_count": 0, "accepted_answer_id": 57706231, "answer_count": 1, "score": 1, "last_activity_date": 1567068182, "creation_date": 1567028472, "last_edit_date": 1567029721, "question_id": 57700388, "link": "https://stackoverflow.com/questions/57700388/how-to-set-unexpectedalertbehaviour-in-selenium-python", "title": "How to set UnexpectedAlertBehaviour in Selenium Python", "body": "<p><a href=\"https://stackoverflow.com/questions/12913453/how-to-handle-an-alert-with-unexpectedalertbehaviour-capability-in-selenium\">This question</a> deals with setting the UnexpectedAlertBehaviour of a Selenium webdriver in Java. How do you do the same thing in Python's ChromeDriver?</p>\n\n<p>I have tried the following;</p>\n\n<pre><code>    options = ChromeOptions()\n    options.headless = True\n    options.set_capability(\"UNEXPECTED_ALERT_BEHAVIOUR\", \"ACCEPT\")\n    options.set_capability(\"unexpectedAlertBehaviour\", \"accept\")\n    options.set_capability(\"CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR\", \"ACCEPT\")\n    options.set_capability(\"UnexpectedAlertBehaviour\", \"ACCEPT\")\n    webdriver.DesiredCapabilities.CHROME[\"unexpectedAlertBehaviour\"] = \"accept\"\n    cls.driver = webdriver.Chrome(chrome_options=options)\n</code></pre>\n\n<p>However, I am still randomly experiencing this unexpectedalertpresent exception:</p>\n\n<blockquote>\n  <p>selenium.common.exceptions.UnexpectedAlertPresentException: Alert Text: \n  Message: unexpected alert open: {Alert text : }</p>\n</blockquote>\n\n<p>When I run the browser in non headless mode (head mode?) I see no such alerts, but the test still randomly fails with this exception, despite my efforts to set this elusive option. </p>\n"}, {"tags": ["python", "essbase"], "comments": [{"owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 1, "creation_date": 1567028853, "post_id": 57700369, "comment_id": 101844838, "body": "Seems like an installation problem since the example provided by Essbasepy used the same call <a href=\"https://github.com/jasonwjones/essbasepy/blob/8528f9f10082fccf202aa17a081b880cc1b9eeb2/examples/mdxtest.py#L2\" rel=\"nofollow noreferrer\">github.com/jasonwjones/essbasepy/blob/&hellip;</a> Did you use the installation instruction here? <a href=\"https://github.com/jasonwjones/essbasepy#general-installation\" rel=\"nofollow noreferrer\">github.com/jasonwjones/essbasepy#general-installation</a>"}, {"owner": {"reputation": 63, "user_id": 6351142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040837c27b2fc44e99e83019108b4db7?s=128&d=identicon&r=PG&f=1", "display_name": "Blue_Lion", "link": "https://stackoverflow.com/users/6351142/blue-lion"}, "reply_to_user": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 0, "creation_date": 1567045191, "post_id": 57700369, "comment_id": 101847844, "body": "Thanks, this is helpful. I realized ESSBASEPATH environmental variable is not set. I have installed EssbaseClient but this path wasn&#39;t created during installation. The provided github link suggests C:\\Oracle\\Middleware\\EPMSystem11R1\\products\\Essbase\\EssbaseS&zwnj;&#8203;erver  but I don&#39;t have EssbaseServer folder. Instead, I have 3 other folders under C:\\ORACLE\\Middleware\\EPMSystem11R1\\products\\Essbase\\EssbaseC&zwnj;&#8203;lient. Do you know how I can find the right path for ESSBASEPATH?"}, {"owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 1, "creation_date": 1567098418, "post_id": 57700369, "comment_id": 101871717, "body": "I don&#39;t actually use Essbase but you can maybe try searching your whole system directory for the keyword EssbaseServer. Also maybe you don&#39;t have the Essbase/EPM server installed, maybe you only installed the client?  can you see if you have the path detailed here to run the server?if not you propbably dont have it installed <a href=\"https://docs.oracle.com/cd/E57185_01/EPMIS/apcs01s07.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E57185_01/EPMIS/apcs01s07.html</a>"}], "owner": {"reputation": 63, "user_id": 6351142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040837c27b2fc44e99e83019108b4db7?s=128&d=identicon&r=PG&f=1", "display_name": "Blue_Lion", "link": "https://stackoverflow.com/users/6351142/blue-lion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567028487, "creation_date": 1567028299, "last_edit_date": 1567028487, "question_id": 57700369, "link": "https://stackoverflow.com/questions/57700369/typeerror-module-object-is-not-callable-essbase", "title": "TypeError: &#39;module&#39; object is not callable - Essbase", "body": "<p>I'm trying to directly connect to Essbase using Python. I can import Essbase, but I'm getting an error </p>\n\n<pre><code>  File \"&lt;ipython-input-14-a27e56c0bf67&gt;\", line 702, in &lt;module&gt;\n    esss = Essbase.Essbase()\n\nTypeError: 'module' object is not callable\n</code></pre>\n\n<p>code</p>\n\n<pre><code>import Essbase\nimport subprocess\n\n\nif __name__ == '__main__':\n\n\n\n\n    fomat_meta = \"\"\"\n\n        alter session set dml_output alias off \n        alter session set dml_output numerical_display fixed_decimal \n        alter session set dml_output precision 2 \n        set column_width 50;\n\n\n        \"\"\"\n\n    MDX_SQL = \"\"\"\n\n\n\n               SELECT NON EMPTY {Uda([Org Unit], \"PA\")} ON ROWS\n               ,\n               {[Nov]} ON COLUMNS \n\n               from CUBE \n               where ([Measure].[33333],[Product].[CHQ]) \n           \"\"\"\n\n\n    sql = [\n\n        MDX_SQL\n    ]\n\n\n    esss = Essbase.Essbase()\n    eh = esss.connect(\"USERID\", \"PASSWORD\", \"123.123.123.123\")\n\n    print(MDX_SQL)\n    esss.bMdxQuery = True\n\n    #for sqls in sql:\n    esss.execute(MDX_SQL)\n\n    xxx = esss.rows()\n\n\n    print(\"Disconnecting...\")\n    esss.disconnect()\n</code></pre>\n\n<p>I tried calling Essbase and Essbase.Essbase\nThen I get below. I think module does exist.</p>\n\n<p>Essbase will return:\nmodule 'Essbase' from 'C:\\Python3\\Lib\\Essbase.py'</p>\n\n<p>Essbase.Essbase will return:\nmodule 'Essbase' from 'C:\\Python3\\Lib\\Essbase.py'</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1567028525, "post_id": 57700348, "comment_id": 101844745, "body": "Why not filter or query only the data you want to show, then creat the pivot from that? <code>df1=df[(df[&#39;color&#39;].isin(colorsyouwant))&amp;(df[&#39;cars&#39;].isin(ca&zwnj;&#8203;rsyouwant)]; df1.pivot(...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "is_accepted": true, "score": 0, "last_activity_date": 1567028474, "creation_date": 1567028474, "answer_id": 57700389, "question_id": 57700348, "link": "https://stackoverflow.com/questions/57700348/how-do-i-select-only-some-values-in-the-column-using-pandas-pivot-table/57700389#57700389", "title": "How do I select only some values in the column using pandas pivot table", "body": "<p>You can index using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html\" rel=\"nofollow noreferrer\"><code>loc</code></a> your pivoted table based on those values:</p>\n\n<pre><code>pivoted_df = pd.pivot_table(df, index=['cars','color'], values='year', aggfunc='count', margins=True)\npivoted_df.loc[(['honda', 'nissan'], ['white', 'black']), :]\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11330240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DQK6o.jpg?s=128&g=1", "display_name": "Ranjith Jayapal", "link": "https://stackoverflow.com/users/11330240/ranjith-jayapal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 1, "accepted_answer_id": 57700389, "answer_count": 1, "score": 0, "last_activity_date": 1567028474, "creation_date": 1567028160, "last_edit_date": 1567028301, "question_id": 57700348, "link": "https://stackoverflow.com/questions/57700348/how-do-i-select-only-some-values-in-the-column-using-pandas-pivot-table", "title": "How do I select only some values in the column using pandas pivot table", "body": "<p>I want to make a pivot table, which will sort the column values and show the data.</p>\n\n<p>I cannot able to select values in the columns</p>\n\n<p>for example:</p>\n\n<pre><code>df = pd.read_excel(\"file1.xlsx\")\n</code></pre>\n\n<p>inside this file </p>\n\n<pre><code>column name 1: cars : nissan, honda, hyundai, toyota, benz\ncolumn name 2: color: white, yellow, red, black, blue\ncolumn name 3: year: 2012, 2013, 2014, 2015, 2016\n</code></pre>\n\n<p>I want to make a pivot table as follows:</p>\n\n<pre><code>pd.pivot_table(df, index=['cars','color'], values='year', aggfunc='count', margins=True)\n</code></pre>\n\n<p>I want to create a pivot table which shows only nissan &amp; honda in the cars column, and only white &amp; black in the color column.</p>\n"}, {"tags": ["python", "group-by", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 1857, "user_id": 6275871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqyQS.jpg?s=128&g=1", "display_name": "SMaZ", "link": "https://stackoverflow.com/users/6275871/smaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1609326982, "last_edit_date": 1609326982, "creation_date": 1567044865, "answer_id": 57702101, "question_id": 57700333, "link": "https://stackoverflow.com/questions/57700333/conditional-aggregate-for-a-pyspark-dataframe/57702101#57702101", "title": "Conditional aggregate for a PySpark dataframe", "body": "<p>You need to remove <code>.otherwise</code> from the <code>count</code>. since <code>0</code> will also increase count.</p>\n<pre><code>import pyspark.sql.functions as F\n\ndf_new = df.groupBy(&quot;id&quot;).agg(\n                        F.avg(F.when((F.col(&quot;x&quot;) == 'a'), F.col('y')).otherwise(0)).alias('col1'),\n\n                        F.count(F.when((F.col(&quot;x&quot;) == 'b'), F.col('y'))).alias('col2'),\n\n                        F.sum(F.when((F.col(&quot;x&quot;) == 'b'), F.col('y')).otherwise(0)).alias('col3')\n    )\n\ndf_new.show()\n\n+---+-----+----+----+\n| id| col1|col2|col3|\n+---+-----+----+----+\n|  1|841.0|   1|2328|\n|  2|  0.0|   2|1019|\n+---+-----+----+----+\n</code></pre>\n<p>Or use <code>sum</code> like below</p>\n<pre><code>import pyspark.sql.functions as F\n\ndf_new = df.groupBy(&quot;id&quot;).agg(\n                        F.avg(F.when((F.col(&quot;x&quot;) == 'a'), F.col('y')).otherwise(0)).alias('col1'),\n\n                        F.sum(F.when((F.col(&quot;x&quot;) == 'b'), 1).otherwise(0)).alias('col2'),\n\n                        F.sum(F.when((F.col(&quot;x&quot;) == 'b'), F.col('y')).otherwise(0)).alias('col3')\n    )\n\ndf_new.show()\n+---+-----+----+----+\n| id| col1|col2|col3|\n+---+-----+----+----+\n|  1|841.0|   1|2328|\n|  2|  0.0|   2|1019|\n+---+-----+----+----+\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 2816215, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bc8c3cf6166df0e34f01d30ddc7f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "user2816215", "link": "https://stackoverflow.com/users/2816215/user2816215"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 57702101, "answer_count": 1, "score": 0, "last_activity_date": 1609326982, "creation_date": 1567028069, "last_edit_date": 1567038039, "question_id": 57700333, "link": "https://stackoverflow.com/questions/57700333/conditional-aggregate-for-a-pyspark-dataframe", "title": "Conditional aggregate for a PySpark dataframe", "body": "<p>I am trying to perform a conditional aggregate on a PySpark data frame.</p>\n\n<p>I tried sum/avg, which seem to work correctly, but somehow the count gives wrong results.</p>\n\n<pre><code>from pyspark.sql import functions as F\n\ndf = spark.createDataFrame([('a', '1', 2502, 332), \n                              ('b', '1', 2328, 56),\n                              ('a', '1', 21, 78),\n                              ('b', '2', 234, 23),\n                              ('b', '2', 785, 12)\n                             ],\n                             ['x','id', 'y','z'])\ndf.show()\n\n+---+---+----+---+\n|  x| id|   y|  z|\n+---+---+----+---+\n|  a|  1|2502|332|\n|  b|  1|2328| 56|\n|  a|  1|  21| 78|\n|  b|  2| 234| 23|\n|  b|  2| 785| 12|\n+---+---+----+---+\n</code></pre>\n\n<pre><code>df_new = df.groupBy(\"id\").agg(\n                        F.avg(F.when((F.col(\"x\") == 'a'), F.col('y'))\n                               .otherwise(0)).alias('col1'),\n\n                        F.count(F.when((F.col(\"x\") == 'b'), F.col('y'))\n                                 .otherwise(0)).alias('col2'),\n\n                        F.sum(F.when((F.col(\"x\") == 'b'), F.col('y'))\n                               .otherwise(0)).alias('col3')\n    )\ndf_new.show()\n\n+---+-----+----+----+\n| id| col1|col2|col3|\n+---+-----+----+----+\n|  1|841.0|   3|2328|\n|  2|  0.0|   2|1019|\n+---+-----+----+----+\n</code></pre>\n\n<p>The count should ideally give <code>1</code>, <code>2</code> row-wise, as in the expected result is:</p>\n\n<pre><code>+---+-----+----+----+\n| id| col1|col2|col3|\n+---+-----+----+----+\n|  1|841.0|   1|2328|\n|  2|  0.0|   2|1019|\n+---+-----+----+----+\n\n</code></pre>\n\n<p>Because the second row is the only one that matches the criteria for <code>id='1'</code> and <code>x='b'</code>. But it shows 3 for some reason.</p>\n"}, {"tags": ["python", "selenium-webdriver", "intellij-idea"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1567028248, "post_id": 57700327, "comment_id": 101844656, "body": "&quot;Why the following code does not open the website? &quot; Because you never call <code>opensite()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 770, "user_id": 7592395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hmDoF.png?s=128&g=1", "display_name": "skymon", "link": "https://stackoverflow.com/users/7592395/skymon"}, "is_accepted": false, "score": 1, "last_activity_date": 1567028230, "creation_date": 1567028230, "answer_id": 57700364, "question_id": 57700327, "link": "https://stackoverflow.com/questions/57700327/intellij-python-selenium-driver-function-is-not-getting-called-from-another-func/57700364#57700364", "title": "Intellij Python Selenium Driver Function is not getting called from another function", "body": "<p>The first lines of codes essentially do nothing, the second lines execute the two lines in the end. </p>\n\n<p>For the first you just define two functions: <code>mybrowserdriver()</code> and <code>opensite()</code> and never call them.</p>\n\n<p>In the second one, the last two lines are the ones that are actually executed, thus the function <code>mybrowserdriver()</code> is called twice. This also means that the constructor for the <code>webdriver.Chrome()</code> inside the <code>mybrowserdriver()</code> function is called twice - resulting in the two browser windows, that you are seeing.</p>\n"}, {"tags": [], "owner": {"reputation": 304, "user_id": 10038279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb593c2fc4d497d8d0082eb5a7e79146?s=128&d=identicon&r=PG&f=1", "display_name": "Numilani", "link": "https://stackoverflow.com/users/10038279/numilani"}, "is_accepted": false, "score": 0, "last_activity_date": 1567028510, "creation_date": 1567028510, "answer_id": 57700395, "question_id": 57700327, "link": "https://stackoverflow.com/questions/57700327/intellij-python-selenium-driver-function-is-not-getting-called-from-another-func/57700395#57700395", "title": "Intellij Python Selenium Driver Function is not getting called from another function", "body": "<p>The problem in the first block is right here:</p>\n\n<pre><code>  def opensite():\n</code></pre>\n\n<p>You define a function <code>opensite()</code> which calls <code>myseleniumdriver()</code>, but <code>opensite()</code> is never called, so Selenium never launches.</p>\n\n<p>In your second code block, you call <code>myseleniumdriver()</code> directly from the python script, which executes regardless. </p>\n\n<p>If you want your first script to work, try this:</p>\n\n<pre><code>   from selenium import webdriver\n\n   def mybrowserdriver():\n    chromedriver = webdriver.Chrome(\"C:/browserdrivers/chromedriver.exe\")\n    return chromedriver\n\n  def opensite():\n    mybrowserdriver().get('https://www.bing.com')\n    mybrowserdriver().maximize_window()\n\n  opensite()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10832807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4567dde140c95b6672e6fbb6d158e091?s=128&d=identicon&r=PG&f=1", "display_name": "DktPhl2018", "link": "https://stackoverflow.com/users/10832807/dktphl2018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567028510, "creation_date": 1567028034, "question_id": 57700327, "link": "https://stackoverflow.com/questions/57700327/intellij-python-selenium-driver-function-is-not-getting-called-from-another-func", "title": "Intellij Python Selenium Driver Function is not getting called from another function", "body": "<p>Driver function is not getting called in another function - website does not open</p>\n\n<p>Website is opened (twice for some reason - better than nothing) when not using driver function in another function</p>\n\n<p>Why the following code does not open the website? </p>\n\n<pre><code>   from selenium import webdriver\n\n   def mybrowserdriver():\n    chromedriver = webdriver.Chrome(\"C:/browserdrivers/chromedriver.exe\")\n    return chromedriver\n\n  def opensite():\n    mybrowserdriver().get('https://www.bing.com')\n    mybrowserdriver().maximize_window()\n</code></pre>\n\n<p>Why does the following code opens the website?</p>\n\n<pre><code>   from selenium import webdriver\n\n   def mybrowserdriver():\n    chromedriver = webdriver.Chrome(\"C:/browserdrivers/chromedriver.exe\")\n    return chromedriver\n\n   mybrowserdriver().get('https://www.bing.com')\n   mybrowserdriver().maximize_window()\n</code></pre>\n\n<p>What could be the explanation that code works outside function but it does not inside another function?</p>\n"}, {"tags": ["python", "docker", "flask", "connection", "bamboo"], "comments": [{"owner": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "edited": false, "score": 0, "creation_date": 1567028176, "post_id": 57700283, "comment_id": 101844626, "body": "can you share your docker file?"}, {"owner": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "edited": false, "score": 0, "creation_date": 1567028944, "post_id": 57700283, "comment_id": 101844870, "body": "How do you run the docker task? you can also specify the port open when running container. this could be part of bamboo environment setup."}, {"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "reply_to_user": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "edited": false, "score": 0, "creation_date": 1567029173, "post_id": 57700283, "comment_id": 101844927, "body": "@bamdan: yes, I already added."}, {"owner": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "edited": false, "score": 0, "creation_date": 1567029403, "post_id": 57700283, "comment_id": 101844985, "body": "can you show the command you use to run the task? you need to map the container port to the actual port like so. docker run -p 5000:5000. Although I&#39;m unsure how you run it without seeing it."}, {"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "reply_to_user": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "edited": false, "score": 0, "creation_date": 1567029918, "post_id": 57700283, "comment_id": 101845112, "body": "I checked the log, &#39;/usr/local/bin/docker run --detach --name myapp -p 5000:5000 myapp&#39;"}, {"owner": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "edited": false, "score": 0, "creation_date": 1567030358, "post_id": 57700283, "comment_id": 101845208, "body": "are you using docker-compose or docker-machine?"}, {"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "reply_to_user": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "edited": false, "score": 0, "creation_date": 1567030503, "post_id": 57700283, "comment_id": 101845243, "body": "I am using Docker machine"}], "answers": [{"comments": [{"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 0, "creation_date": 1567028573, "post_id": 57700380, "comment_id": 101844759, "body": "@bamdam: I have modified question with, docker file content. How do I expose the port"}, {"owner": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "reply_to_user": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 0, "creation_date": 1567028779, "post_id": 57700380, "comment_id": 101844820, "body": "great add the line of code in the answer above and see if it works."}, {"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 0, "creation_date": 1567028998, "post_id": 57700380, "comment_id": 101844881, "body": "I run using Bamboo."}, {"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 0, "creation_date": 1567029032, "post_id": 57700380, "comment_id": 101844891, "body": "Added a docker task for run the container."}], "tags": [], "owner": {"reputation": 768, "user_id": 5629854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hydL7.jpg?s=128&g=1", "display_name": "bamdan", "link": "https://stackoverflow.com/users/5629854/bamdan"}, "is_accepted": true, "score": 1, "last_activity_date": 1567030230, "last_edit_date": 1567030230, "creation_date": 1567028419, "answer_id": 57700380, "question_id": 57700283, "link": "https://stackoverflow.com/questions/57700283/bamboo-docker-image-run-error-connection-refused/57700380#57700380", "title": "Bamboo - Docker image run Error - Connection refused", "body": "<p>Without seeing the docker file this looks as though the port is not open.</p>\n\n<ul>\n<li>you need to explicitly expose the port via the dockerfile</li>\n<li>you can change the entrypoint aswell.</li>\n<li>you need to have the following in the dockerfile</li>\n</ul>\n\n<pre><code>ENTRYPOINT python app.py\nEXPOSE 5000\n</code></pre>\n"}], "owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57700380, "answer_count": 1, "score": 1, "last_activity_date": 1567030230, "creation_date": 1567027781, "last_edit_date": 1567028534, "question_id": 57700283, "link": "https://stackoverflow.com/questions/57700283/bamboo-docker-image-run-error-connection-refused", "title": "Bamboo - Docker image run Error - Connection refused", "body": "<p>I am using bamboo to run the python application(Flask app).\nAnd successfully check out the source code from repository and created docker image using bamboo itself.\nAnd tried to run the image using bamboo docker task got below <code>Connection refused</code> error.\nHow do I solve this issue.</p>\n\n<pre><code>Failed connecting to http://localhost:5000, error: Connection refused (Connection refused)\n    Attempting connection to http://localhost:5000\n     Failed connecting to http://localhost:5000,  error: Connection refused (Connection refused)\n    Attempting connection to http://localhost:5000\n    Failed connecting to http://localhost:5000, error: Connection refused (Connection refused)\n    Attempting connection to http://localhost:5000\n    Failed connecting to http://localhost:5000, error: Connection refused (Connection refused)\n    Attempting connection to http://localhost:5000\n    Failed connecting to http://localhost:5000, error: Connection refused (Connection refused)\n</code></pre>\n\n<p>Docker file:</p>\n\n<pre><code>FROM python\nCOPY . /app\nWORKDIR /app\nRUN pip install -r python_modules.txt\nENTRYPOINT [\"python\"]\nCMD [\"app.py\"]\n</code></pre>\n"}, {"tags": ["python", "bash", "apache-spark", "airflow", "spark-submit"], "comments": [{"owner": {"reputation": 6513, "user_id": 3679900, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/tFAHl.png?s=128&g=1", "display_name": "y2k-shubham", "link": "https://stackoverflow.com/users/3679900/y2k-shubham"}, "edited": false, "score": 0, "creation_date": 1567052258, "post_id": 57700262, "comment_id": 101849119, "body": "While i can&#39;t predict the problem with your set-up (sounds like an issue in <i>environment variable</i> / <i>binaries discoverability</i> on shells like <code>bash</code> / <code>zsh</code>), if you need workarounds, see <a href=\"https://stackoverflow.com/a/54092691/3679900\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 7712680, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447079805324719/picture?type=large", "display_name": "Golokesh Patra", "link": "https://stackoverflow.com/users/7712680/golokesh-patra"}, "is_accepted": false, "score": 0, "last_activity_date": 1567062101, "creation_date": 1567062101, "answer_id": 57704717, "question_id": 57700262, "link": "https://stackoverflow.com/questions/57700262/need-help-running-spark-submit-in-apache-airflow/57704717#57704717", "title": "Need help running spark-submit in Apache Airflow", "body": "<p>A similar question has already been answered - <a href=\"https://stackoverflow.com/questions/39827804/how-to-run-spark-code-in-airflow\"> StackOverFlow Link</a></p>\n\n<p>I guess the above link will help you.</p>\n\n<p>In the future if you would like to implement the same thing on <strong>AWS EMR</strong> Or <strong>AZURE</strong>, then there you have an a beautiful way to schedule spark jobs - <a href=\"https://airflow.apache.org/integration.html#aws\" rel=\"nofollow noreferrer\">Airflow Documentation</a></p>\n\n<p>An Example for the above - (AWS EMR) </p>\n\n<pre><code> &lt;airflow_EMR_task&gt; =cover_open(json.load(open(airflow_home+'/&lt;tasks_json_containing_all_spark_configurations&gt;')))\n &lt;airflow_EMR_task&gt;['Job']['Name'] =  &lt;airflow_EMR_task&gt;['Job']['Name'] + &lt;'optional_postfix'&gt;\nairflow_swperformance_cpu_creator = EmrRunJobFlowOperator(\n    task_id='&lt;task_id&gt;',\n    job_flow_overrides= &lt;airflow_EMR_task&gt;['Job'],\n    aws_conn_id='aws_default',\n    emr_conn_id='emr_default',\n    retries=1,\n    dag=dag\n)\n</code></pre>\n\n<p>And A Simple JSON would be - (the same json file as mentioned above )</p>\n\n<pre><code>{\n    \"Job\": {\n        \"Name\": \"&lt;task_name&gt;\",\n        \"LogUri\": \"&lt;task_log_uri&gt;\",\n        \"ReleaseLabel\": \"emr-5.6.0\",\n        \"Applications\": [\n            {\n                \"Name\": \"Spark\"\n            },\n            {\n                \"Name\": \"Hive\"\n            }\n        ],\n        \"Tags\": [\n            {\n                \"Key\" : \"&lt;any_tag&gt;\",\n                \"Value\" : \"&lt;any_tag&gt;\"\n            },\n            {\n                \"Key\" : \"&lt;any tag&gt;\",\n                \"Value\": \"&lt;any_tag&gt;\"\n            },\n            {\n                \"Key\" : \"&lt;any_tag&gt;\",\n                \"Value\": \"&lt;any_tag value&gt;\"\n            }\n        ],\n        \"JobFlowRole\": \"EMR_EC2_DefaultRole_Stable\",\n        \"ServiceRole\": \"EMR_DefaultRole\",\n        \"VisibleToAllUsers\": true,\n        \"Configurations\": [\n            {\n                \"Classification\": \"spark-defaults\",\n                \"Properties\": {\n                    \"spark.driver.extraJavaOptions\":\"-XX:+UseParallelGC -XX:+UseParallelOldGC -XX:CMSInitiatingOccupancyFraction=70 -XX:MaxHeapFreeRatio=70 -XX:+CMSClassUnloadingEnabled -XX:+ExitOnOutOfMemoryError -Dlog4j.configuration=log4j-custom.properties\",\n                    \"spark.executor.extraJavaOptions\":\"-verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+UseParallelGC -XX:+UseParallelOldGC -XX:CMSInitiatingOccupancyFraction=70 -XX:MaxHeapFreeRatio=70 -XX:+CMSClassUnloadingEnabled -XX:+ExitOnOutOfMemoryError -Dlog4j.configuration=log4j-custom.properties\",\n                    \"spark.scheduler.mode\": \"FAIR\",\n                    \"spark.eventLog.enabled\": \"true\",\n                    \"spark.serializer\": \"org.apache.spark.serializer.KryoSerializer\",\n                    \"spark.sql.orc.filterPushdown\": \"true\",\n                    \"spark.dynamicAllocation.enabled\": \"false\"\n                },\n                \"Configurations\": []\n            },\n            {\n                \"Classification\": \"spark\",\n                \"Properties\": {\n                    \"maximizeResourceAllocation\": \"true\"\n                },\n                \"Configurations\": []\n            },\n            {\n                \"Classification\": \"hive-site\",\n                \"Properties\": {\n                    \"javax.jdo.option.ConnectionUserName\": \"&lt;HIVE USERNAME IF ANY&gt;\",\n                    \"javax.jdo.option.ConnectionPassword\": \"&lt;&lt;hive_connection_password&gt;&gt;\",\n                    \"javax.jdo.option.ConnectionURL\": \"&lt;Hive_URL_IF_ANY\"\n                },\n                \"Configurations\": []\n            },\n            {\n                \"Classification\": \"emrfs-site\",\n                \"Properties\": {\n                    \"fs.s3.serverSideEncryption.kms.keyId\": \"&lt;&lt;encryption_key&gt;&gt;\",\n                    \"fs.s3.enableServerSideEncryption\": \"true\"\n                },\n                \"Configurations\": []\n            },\n            {\n                \"Classification\":\"spark-env\",\n                \"Configurations\":[{\n                    \"Classification\":\"export\",\n                    \"Configurations\":[],\n                    \"Properties\": {\n                        \"ANY_ENV_VARIABLE_REQUIRED_FOR_SPECIFIC_JOB\",\n                        \"ANY_ENV_VARIABLE_REQUIRED_FOR_SPECIFIC_JOB\",\n                        \"ANY_ENV_VARIABLE_REQUIRED_FOR_SPECIFIC_JOB\",\n                        \"ANY_ENV_VARIABLE_REQUIRED_FOR_SPECIFIC_JOB\",\n                        \"ANY_ENV_VARIABLE_REQUIRED_FOR_SPECIFIC_JOB\"\n            \"S3_BUCKET_NAME\":\"&lt;S3_bucekt_naem_if_Required&gt;\"\n                    }\n                }\n                ]}\n        ],\n        \"Instances\": {\n            \"Ec2KeyName\": \"&lt;ssh_key&gt;\",\n            \"KeepJobFlowAliveWhenNoSteps\": false,\n            \"Ec2SubnetId\": \"&lt;subnet&gt;\",\n            \"EmrManagedSlaveSecurityGroup\": \"&lt;security_group&gt;\",\n            \"EmrManagedMasterSecurityGroup\": \"&lt;security_group_parameter&gt;\",\n            \"AdditionalSlaveSecurityGroups\": [\n                \"&lt;self_explanatory&gt;\"\n            ],\n            \"AdditionalMasterSecurityGroups\": [\n                \"&lt;self_explanatory&gt;\"\n            ],\n            \"InstanceGroups\": [\n                {\n                    \"InstanceCount\": 4,\n                    \"InstanceRole\": \"CORE\",\n                    \"InstanceType\": \"r3.xlarge\",\n                    \"Name\": \"Core instance group - 2\"\n                },\n                {\n                    \"InstanceCount\": 1,\n                    \"InstanceRole\": \"MASTER\",\n                    \"InstanceType\": \"r3.xlarge\",\n                    \"Name\": \"Master instance group - 1\"\n                }\n            ]\n        },\n        \"BootstrapActions\": [],\n        \"Steps\": [\n            {\n                \"Name\": \"download-dependencies\",\n                \"HadoopJarStep\": {\n                    \"Jar\": \"command-runner.jar\",\n                    \"Args\": [\n                        \"aws\",\n                        \"s3\",\n                        \"cp\",\n                        \"&lt;appropriate_s3_location&gt;\",\n                        \"/home/hadoop\",\n                        \"--recursive\"\n                    ],\n                    \"Properties\": []\n                },\n                \"ActionOnFailure\": \"TERMINATE_CLUSTER\"\n            },\n            {\n                \"Name\": \"run-script\",\n                \"HadoopJarStep\": {\n                    \"Jar\": \"command-runner.jar\",\n                    \"Args\": [\n                        \"sudo\",\n                        \"/bin/sh\",\n                        \"/home/hadoop/pre-executor.sh\"\n                    ],\n                    \"Properties\": []\n                },\n                \"ActionOnFailure\": \"TERMINATE_CLUSTER\"\n            },\n            {\n                \"Name\": \"spark-submit\",\n                \"HadoopJarStep\": {\n                    \"Jar\": \"command-runner.jar\",\n                    \"Args\": [\n                        \"spark-submit\",\n                        \"/home/hadoop/analytics-job.jar\",\n            \"--run-gold-job-only\"\n                    ],\n                    \"Properties\": []\n                },\n                \"ActionOnFailure\": \"TERMINATE_CLUSTER\"\n            }\n        ]\n    }\n}\n</code></pre>\n\n<p>And that will be all.</p>\n"}, {"tags": [], "owner": {"reputation": 294, "user_id": 10129635, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VAjBvGDgPDE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oGlgtY4siJjwJ44SAoKF6_fRcm1g/mo/photo.jpg?sz=128", "display_name": "mattc-7", "link": "https://stackoverflow.com/users/10129635/mattc-7"}, "is_accepted": true, "score": 2, "last_activity_date": 1567111195, "last_edit_date": 1567111195, "creation_date": 1567101956, "answer_id": 57715683, "question_id": 57700262, "link": "https://stackoverflow.com/questions/57700262/need-help-running-spark-submit-in-apache-airflow/57715683#57715683", "title": "Need help running spark-submit in Apache Airflow", "body": "<p>I found a workaround that solved this problem.</p>\n\n<p>Create a new ssh connection (or edit the default) like the one below in the Airflow <em>Admin->Connection</em> page\n<a href=\"https://i.stack.imgur.com/CgTxq.png\" rel=\"nofollow noreferrer\">Airflow SSH Connection Example</a></p>\n\n<p>Below is a text version if you cannot see the image<br>\n<strong>Conn ID</strong>: ssh_connection<br>\n<strong>Conn Type</strong>: SSH<br>\n<strong>Host</strong>: HOST IP ADDRESS<br>\n<strong>Username</strong>: HOST USERNAME<br>\n<strong>Password</strong>: HOST PASSWORD<br>\n<strong>Port</strong>:<br>\n<strong>Extra</strong>: {\"key_file\": \"/PATH TO HOME DIR/airflow/.ssh/id_rsa\", \"allow_host_key_change\": \"true\", \"no_host_key_check\": \"true\"}  </p>\n\n<p>Then make the proper adjustments to your python script</p>\n\n<pre><code>from airflow import DAG\nfrom airflow.contrib.operators.ssh_operator import SSHOperator\nfrom airflow.operators.bash_operator import BashOperator\nfrom datetime import datetime, timedelta\n\ndefault_args = {\n    'owner': 'matthew',\n    'start_date': datetime(2019, 8, 28)\n}\n\ndag = DAG('custom-create',\n          default_args=default_args,\n          schedule_interval=timedelta(days=1),\n          params={'project_source': '~/IdeaProjects/custom-create-job',\n                  'spark_submit': '/usr/local/bin/spark-submit',\n                  'classpath': 'CLASSPATH.CustomCreate',\n                  'jar_file': 'build/libs/custom-create.jar'}\n          )\n\ntemplated_bash_command = \"\"\"\n    echo 'HOSTNAME: $HOSTNAME' #To check that you are properly connected to the host\n    cd {{ params.project_source }}\n    {{ params.spark_submit }} --class {{ classpath }} {{ jar_file }}\n\"\"\"\n\nt1 = SSHOperator(\n    task_id=\"SSH_task\",\n    ssh_conn_id='ssh_connection',\n    command=templated_bash_command,\n    dag=dag\n)\n</code></pre>\n\n<p>I hope this solution helps other people who may be running into a similar problem like I was.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11892741, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S9K4hy-KD6U/AAAAAAAAAAI/AAAAAAAAB28/P0FQo-B_VRE/photo.jpg?sz=128", "display_name": "Cleverson Zocche Sato", "link": "https://stackoverflow.com/users/11892741/cleverson-zocche-sato"}, "is_accepted": false, "score": 0, "last_activity_date": 1610473549, "creation_date": 1610473549, "answer_id": 65689205, "question_id": 57700262, "link": "https://stackoverflow.com/questions/57700262/need-help-running-spark-submit-in-apache-airflow/65689205#65689205", "title": "Need help running spark-submit in Apache Airflow", "body": "<p>Not sure if still relevant, but I solved a similar problem simply by using the absolute path to the file (full path without the '~').\nNot sure why, maybe airflow consider 'home' as another place.</p>\n"}], "owner": {"reputation": 294, "user_id": 10129635, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VAjBvGDgPDE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oGlgtY4siJjwJ44SAoKF6_fRcm1g/mo/photo.jpg?sz=128", "display_name": "mattc-7", "link": "https://stackoverflow.com/users/10129635/mattc-7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4903, "favorite_count": 2, "accepted_answer_id": 57715683, "answer_count": 3, "score": 0, "last_activity_date": 1610473549, "creation_date": 1567027622, "last_edit_date": 1567099016, "question_id": 57700262, "link": "https://stackoverflow.com/questions/57700262/need-help-running-spark-submit-in-apache-airflow", "title": "Need help running spark-submit in Apache Airflow", "body": "<p>I am a relatively new user to Python and Airflow and am having a very difficult time getting <code>spark-submit</code> to run in an Airflow task.  My goal is to get the following DAG task to run successfully</p>\n\n<pre><code>from datetime import datetime, timedelta\nfrom airflow import DAG\nfrom airflow.contrib.operators.spark_submit_operator import SparkSubmitOperator\nfrom airflow.operators.bash_operator import BashOperator\n\ndefault_args = {\n    'owner': 'matthew',\n    'start_date': datetime(2019, 7, 8)\n}\n\ndag = DAG('CustomCreate_test2',\n          default_args=default_args,\n          schedule_interval=timedelta(days=1))\n\nt3 = BashOperator(\n    task_id='run_test',\n    bash_command='spark-submit --class CLASSPATH.CustomCreate ~/IdeaProjects/custom-create-job/build/libs/custom-create.jar',\n    dag=dag\n)\n</code></pre>\n\n<p>I know the problem lies with Airflow and not with the bash because when I run the command <code>spark-submit --class CLASSPATH.CustomCreate ~/IdeaProjects/custom-create-job/build/libs/custom-create.jar</code> in the terminal it runs successfully.</p>\n\n<p>I have been getting the following error from the Airflow logs</p>\n\n<pre><code>...\n[2019-08-28 15:55:34,750] {bash_operator.py:132} INFO - Command exited with return code 1\n[2019-08-28 15:55:34,764] {taskinstance.py:1047} ERROR - Bash command failed\nTraceback (most recent call last):\n  File \"/Users/matcordo2/.virtualenv/airflow/lib/python3.7/site-packages/airflow/models/taskinstance.py\", line 922, in _run_raw_task\n    result = task_copy.execute(context=context)\n  File \"/Users/matcordo2/.virtualenv/airflow/lib/python3.7/site-packages/airflow/operators/bash_operator.py\", line 136, in execute\n    raise AirflowException(\"Bash command failed\")\nairflow.exceptions.AirflowException: Bash command failed\n...\n</code></pre>\n\n<p>I have also tried working with the <code>SparkSubmitOperator(...)</code> but have had no successful runs using it, I have only ever ended up with error logs like the following</p>\n\n<pre><code>...\n[2019-08-28 15:54:49,749] {logging_mixin.py:95} INFO - [[34m2019-08-28 15:54:49,749[0m] {[34mspark_submit_hook.py:[0m427} INFO[0m - at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)[0m\n[2019-08-28 15:54:49,803] {taskinstance.py:1047} ERROR - Cannot execute: ['spark-submit', '--master', 'yarn', '--num-executors', '2', '--total-executor-cores', '1', '--executor-cores', '1', '--executor-memory', '2g', '--driver-memory', '1g', '--name', 'CustomCreate', '--class', 'CLASSPATH.CustomCreate', '--verbose', '--queue', 'root.default', '--deploy-mode', 'cluster', '~/IdeaProjects/custom-create-job/build/libs/custom-create.jar']. Error code is: 1.\n...\n</code></pre>\n\n<p>Is there something I have to do using <code>SparkSubmitOperator(...)</code> before I can run the <code>spark-submit ...</code> command in a <code>BashOperator(...)</code> task?</p>\n\n<p>Is there a way to run my <code>spark-submit</code> command directly from the <code>SparkSubmitOperator(...)</code> task?</p>\n\n<p>Is there anything that I have to do to <code>spark_default</code> in the <em>Admin->Connections</em> page of Airflow?</p>\n\n<p>Is there anything that must be set in the <em>Admin->Users</em> page of Airflow? \n Is there anything that must be set to allow Airflow to run spark or run a jar file created by a specific user?  If so, what/how?</p>\n"}, {"tags": ["python", "python-3.x", "amazon-web-services", "aws-lambda", "amazon-kinesis"], "answers": [{"tags": [], "owner": {"reputation": 1718, "user_id": 11809808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xGaYWYEMtIc/AAAAAAAAAAI/AAAAAAAAMF0/C0tWnMhZTHo/photo.jpg?sz=128", "display_name": "Ryan Payne", "link": "https://stackoverflow.com/users/11809808/ryan-payne"}, "is_accepted": true, "score": 9, "last_activity_date": 1575321089, "last_edit_date": 1575321089, "creation_date": 1567027482, "answer_id": 57700239, "question_id": 57700238, "link": "https://stackoverflow.com/questions/57700238/how-do-i-access-the-data-from-an-aws-kinesis-data-stream-event/57700239#57700239", "title": "How do I access the data from an AWS Kinesis Data Stream event?", "body": "<p>The data you put on the stream is represented as a Base64 encoded string on each record's <code>kinesis.data</code> key. For example (truncated):</p>\n\n<pre><code>{\n    \"Records\": [\n        {\n            \"kinesis\": {\n                ...\n                \"data\": \"SGVsbG8sIHRoaXMgaXMgYSB0ZXN0Lg==\",\n                ...\n            },\n            ...\n        },\n        {\n            \"kinesis\": {\n                ...\n                \"data\": \"VGhpcyBpcyBvbmx5IGEgdGVzdC4=\",\n                ...\n            },\n            ...\n        }\n    ]\n}\n</code></pre>\n\n<p>To access the data, loop through each <code>Records</code> object and Base64 decode the <code>kinesis.data</code> value.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import base64\n\n\nfor record in event[\"Records\"]:\n    decoded_data = base64.b64decode(record[\"kinesis\"][\"data\"]).decode(\"utf-8\")\n\n    print(decoded_data)\n    # Record 1: Hello, this is a test.\n    # Record 2: This is only a test.\n</code></pre>\n\n<p><strong>Note:</strong> This example assumes that the data sent to the kinesis stream was originally <code>utf-8</code> encoded before kinesis b64 encoded it.</p>\n"}], "owner": {"reputation": 1718, "user_id": 11809808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xGaYWYEMtIc/AAAAAAAAAAI/AAAAAAAAMF0/C0tWnMhZTHo/photo.jpg?sz=128", "display_name": "Ryan Payne", "link": "https://stackoverflow.com/users/11809808/ryan-payne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2452, "favorite_count": 0, "accepted_answer_id": 57700239, "answer_count": 1, "score": 4, "last_activity_date": 1586964409, "creation_date": 1567027482, "last_edit_date": 1586964409, "question_id": 57700238, "link": "https://stackoverflow.com/questions/57700238/how-do-i-access-the-data-from-an-aws-kinesis-data-stream-event", "title": "How do I access the data from an AWS Kinesis Data Stream event?", "body": "<p>I'm working on a Python lambda that consumes an <a href=\"https://aws.amazon.com/kinesis/data-streams/\" rel=\"nofollow noreferrer\">AWS Kinesis Data Stream</a>. But I'm struggling to understand the shape of kinesis record events. For example:</p>\n\n<pre><code>{\n    \"Records\": [\n        {\n            \"kinesis\": {\n                \"kinesisSchemaVersion\": \"1.0\",\n                \"partitionKey\": \"1\",\n                \"sequenceNumber\": \"49590338271490256608559692538361571095921575989136588898\",\n                \"data\": \"SGVsbG8sIHRoaXMgaXMgYSB0ZXN0Lg==\",\n                \"approximateArrivalTimestamp\": 1545084650.987\n            },\n            \"eventSource\": \"aws:kinesis\",\n            \"eventVersion\": \"1.0\",\n            \"eventID\": \"shardId-000000000006:49590338271490256608559692538361571095921575989136588898\",\n            \"eventName\": \"aws:kinesis:record\",\n            \"invokeIdentityArn\": \"arn:aws:iam::123456789012:role/lambda-role\",\n            \"awsRegion\": \"us-east-2\",\n            \"eventSourceARN\": \"arn:aws:kinesis:us-east-2:123456789012:stream/lambda-stream\"\n        },\n        {\n            \"kinesis\": {\n                \"kinesisSchemaVersion\": \"1.0\",\n                \"partitionKey\": \"1\",\n                \"sequenceNumber\": \"49590338271490256608559692540925702759324208523137515618\",\n                \"data\": \"VGhpcyBpcyBvbmx5IGEgdGVzdC4=\",\n                \"approximateArrivalTimestamp\": 1545084711.166\n            },\n            \"eventSource\": \"aws:kinesis\",\n            \"eventVersion\": \"1.0\",\n            \"eventID\": \"shardId-000000000006:49590338271490256608559692540925702759324208523137515618\",\n            \"eventName\": \"aws:kinesis:record\",\n            \"invokeIdentityArn\": \"arn:aws:iam::123456789012:role/lambda-role\",\n            \"awsRegion\": \"us-east-2\",\n            \"eventSourceARN\": \"arn:aws:kinesis:us-east-2:123456789012:stream/lambda-stream\"\n        }\n    ]\n}\n</code></pre>\n\n<p><em>Source:</em> <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/with-kinesis.html\" rel=\"nofollow noreferrer\">Using AWS Lambda with Amazon Kinesis</a></p>\n\n<p>Where is the data I originally put on the kinesis stream represented in this object? And how do I access this data?</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 689, "user_id": 11132419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CVZly.jpg?s=128&g=1", "display_name": "Moha369", "link": "https://stackoverflow.com/users/11132419/moha369"}, "edited": false, "score": 0, "creation_date": 1567034076, "post_id": 57700203, "comment_id": 101845941, "body": "Define things properly, you said <code>category</code> instead of <code>Category</code>, and btw, no need for a for loop :+1: just define the foreign key as you defined it <code>Category_Types</code>"}, {"owner": {"reputation": 23, "user_id": 10474784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5BCKXJ5z-MY/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVimI44zb9hFuUpMKJ8rPEQkrdKFA/mo/photo.jpg?sz=128", "display_name": "Noxiss", "link": "https://stackoverflow.com/users/10474784/noxiss"}, "reply_to_user": {"reputation": 689, "user_id": 11132419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CVZly.jpg?s=128&g=1", "display_name": "Moha369", "link": "https://stackoverflow.com/users/11132419/moha369"}, "edited": false, "score": 0, "creation_date": 1567086654, "post_id": 57700203, "comment_id": 101865572, "body": "I don&#39;t understand.Do you mean to create the category as attribute of ForeignKey of Category_Types model?  Could you please share some code example ?"}, {"owner": {"reputation": 689, "user_id": 11132419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CVZly.jpg?s=128&g=1", "display_name": "Moha369", "link": "https://stackoverflow.com/users/11132419/moha369"}, "edited": false, "score": 0, "creation_date": 1567089101, "post_id": 57700203, "comment_id": 101867119, "body": "In foreign key in <code>Entry</code> class, you said <code>category</code> instead of <code>Category</code>"}], "owner": {"reputation": 23, "user_id": 10474784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5BCKXJ5z-MY/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVimI44zb9hFuUpMKJ8rPEQkrdKFA/mo/photo.jpg?sz=128", "display_name": "Noxiss", "link": "https://stackoverflow.com/users/10474784/noxiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567027274, "creation_date": 1567027274, "question_id": 57700203, "link": "https://stackoverflow.com/questions/57700203/django-dynamic-model", "title": "Django dynamic model", "body": "<p>I'm trying to create budget app and struggling for creating dropdown lists (tables in database) based on each other in admin panel. </p>\n\n<p>I want to created a entry model in which you need to choose subcategory based on category. tried with pirmary keys for all of objects of  category class but seems that it doesnt work.</p>\n\n<pre><code>class Category(models.Model):\n    # category\n    category_type = models.CharField(max_length=150)\n\n    def __str__(self):\n        return self.category_type\nclass Category_Types(models.Model):\n    parent_category = models.ForeignKey(Category, on_delete='CASCADE')\n    category_type = models.CharField(max_length=150)\n\n\n    def __str__(self):\n        return self.category_type\n\nclass Entry(models.Model):\n    # single entry to budget database\n    entry_date = models.DateTimeField(auto_now_add=True)\n    transaction_date = models.DateField()\n    try:\n        for category in Category.objects.all():\n            category_type = models.ForeignKey(category,on_delete='CASCADE')\n    except:\n        pass\n</code></pre>\n\n<p>I doesn't show me any possibilities for adding Entry in admin panel</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567028678, "post_id": 57700196, "comment_id": 101844792, "body": "Why are you doing this as a generator instead of just returning <code>.fetchall()</code>?"}, {"owner": {"reputation": 863, "user_id": 8103207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c210559b7bccc6fdf9441e91c0df97ee?s=128&d=identicon&r=PG", "display_name": "YHoffman", "link": "https://stackoverflow.com/users/8103207/yhoffman"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567029270, "post_id": 57700196, "comment_id": 101844950, "body": "I don&#39;t want all consumers growing memory, only who needs all at once will fetch all but the rest can iterate one by one without leaking ram"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567029509, "post_id": 57700196, "comment_id": 101845026, "body": "If it only happens when threading, it sounds like it&#39;s due to locking around the generator or database connection."}, {"owner": {"reputation": 863, "user_id": 8103207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c210559b7bccc6fdf9441e91c0df97ee?s=128&d=identicon&r=PG", "display_name": "YHoffman", "link": "https://stackoverflow.com/users/8103207/yhoffman"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567029719, "post_id": 57700196, "comment_id": 101845069, "body": "looks like I will need to expedite my learning of asyncio..."}], "owner": {"reputation": 863, "user_id": 8103207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c210559b7bccc6fdf9441e91c0df97ee?s=128&d=identicon&r=PG", "display_name": "YHoffman", "link": "https://stackoverflow.com/users/8103207/yhoffman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567029069, "creation_date": 1567027240, "last_edit_date": 1567029069, "question_id": 57700196, "link": "https://stackoverflow.com/questions/57700196/simple-select-query-very-slow", "title": "simple select query very slow", "body": "<p>I have a sqlite database that I use as a cache and using this function</p>\n\n<pre><code>def read_cache(table):\n    if not table.isidentifier(): # &lt;- my version of sqli protection used to allow for user to provide table and column names\n        raise ValueError(f\"Invalid table name '{table}'\")\n    for record in cur.execute(f\"SELECT * FROM {table};\"):\n        yield {**record}\n</code></pre>\n\n<p>a call <code>list(read_cache('some_values'))</code> takes forever (nearly a minute) to return, yet when I run the query against the db itself (as in <code>cur.execute('select * from some_values;').fetchall()</code> or <code>[r for r in cur.execute('select * from some_values;')]</code>) it returns immediately.</p>\n\n<p>The table in question has 40k rows, 2 columns each</p>\n\n<p>What can I do to find the issue or speed it up?</p>\n\n<p><strong>EDIT:</strong> I think I found the issue, the speed issue only occurs in an interpreter that has some <code>threading.Thread</code> running... wonder if the issue is GIL related... will have to see what to do about it...</p>\n"}, {"tags": ["python", "label", "seaborn", "median"], "owner": {"reputation": 51, "user_id": 6362483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q3vzv.jpg?s=128&g=1", "display_name": "Kimberly", "link": "https://stackoverflow.com/users/6362483/kimberly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567028451, "creation_date": 1567026987, "last_edit_date": 1567028451, "question_id": 57700139, "link": "https://stackoverflow.com/questions/57700139/placement-of-median-labels-at-median-line", "title": "Placement of median labels at median line", "body": "<p>I'm unable to properly place median labels in a boxplot. I would like to place median values on every boxplot, at the median line.</p>\n\n<p>I've extensively googled labeling boxplots and can place one value when hue is not >1. When hue has more than 1 value, the medians are not properly placed and only one value is shown on graph.</p>\n\n<pre><code>import seaborn as sns\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nimport matplotlib.ticker as ticker\n\n#Create box plots with median values\ndims = (11.7, 8.27)\nfig, ax = plt.subplots(figsize=dims)\nsns.boxplot(x= \"inquiryReason\", y=\"Time(hr)\", data=yr1, hue=\"Country\",\n                  order=['Disease-Specific','Other'])\n#Calculate medians    \nmedians = yr1.groupby(['responseClass', 'Country']) \n       ['Time(hr)'].median().values\nmedian_labels = [str(np.round(s, 2)) for s in medians]\n\n#Place median values on plot\npos = range(len(medians))\nfor tick,label in zip(pos,ax.get_xticklabels()):\nax.text(pos[tick], medians[tick], median_labels[tick], \n        horizontalalignment='center', size='small', color='b', \n        weight='semibold')\n\n# rotate x-axis by 20 degrees\nax.set_xticklabels(ax.get_xticklabels(), rotation=20)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cDgdu.jpg\" rel=\"nofollow noreferrer\">timeVReason_Country</a></p>\n"}, {"tags": ["python", "pandas", "amazon-web-services", "docker", "amazon-s3"], "comments": [{"owner": {"reputation": 611, "user_id": 8431275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f3699f33935582a8ddc02e661f1d390?s=128&d=identicon&r=PG&f=1", "display_name": "Calculus", "link": "https://stackoverflow.com/users/8431275/calculus"}, "edited": false, "score": 1, "creation_date": 1567036177, "post_id": 57700120, "comment_id": 101846320, "body": "I have an example of uploading and downloading Pandas data frames to AWS S3 here <a href=\"https://github.com/jbreija/Scripts/blob/master/aws_s3.py\" rel=\"nofollow noreferrer\">github.com/jbreija/Scripts/blob/master/aws_s3.py</a> . I don&#39;t feel like amending it to make an answer here but you can browse through that."}], "answers": [{"tags": [], "owner": {"reputation": 2463, "user_id": 1423507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352121cf562146b074ef3860dedcf4ca?s=128&d=identicon&r=PG", "display_name": "masseyb", "link": "https://stackoverflow.com/users/1423507/masseyb"}, "is_accepted": true, "score": 2, "last_activity_date": 1567036066, "last_edit_date": 1567036066, "creation_date": 1567034656, "answer_id": 57701150, "question_id": 57700120, "link": "https://stackoverflow.com/questions/57700120/how-to-pull-data-from-s3-from-within-a-local-docker-container/57701150#57701150", "title": "How to Pull Data From S3 From Within a Local Docker Container", "body": "<p>Assuming that you have <code>s3fs</code> installed as per the <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html\" rel=\"nofollow noreferrer\">doc</a>. Adding a <code>print</code> for debug:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import Flask\nimport pandas as pd\nimport numpy as np\n\nfile_name =  \"s3://foo/bar.csv\"\ndf = pd.read_csv(file_name)\nprint(df)\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef index():\n    return(\"Hello World!\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/H5kTt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H5kTt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Ref. the <a href=\"https://docs.docker.com/engine/reference/builder/\" rel=\"nofollow noreferrer\">Dockerfile reference</a>: \"The ARG instruction defines a variable that users can pass at build-time\" - in this case you need the credentials to be available during the runtime, not during the build, you can pass them in the containers runtime environment for example:</p>\n\n<pre><code>FROM python:3\n\nWORKDIR /usr/src/app\n\nCOPY requirements.txt ./\nRUN pip install -r requirements.txt\n\nENV AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}\nENV AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}\nENV AWS_REGION='us-east-1'\n\nCOPY . .\n\nENTRYPOINT [\"flask\"]\nCMD [\"run\"]\n</code></pre>\n\n<p>Build the image: <code>docker build --rm -t so:57700120 .</code>\nRun the container: <code>docker run --rm -it -p 5000:5000 -e AWS_ACCESS_KEY_ID=... -e AWS_SECRET_ACCESS_KEY=... so:57700120</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/1TTx8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1TTx8.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Note</strong>: <code>boto</code> does not recognize <code>AWS_KEY</code> / <code>AWS_SECRET_KEY</code> ref. the <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#environment-variables\" rel=\"nofollow noreferrer\">doc</a> for additional information concerning the environment variables which are recognized.</p>\n"}], "owner": {"reputation": 61, "user_id": 7021978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86aa94f1525d3ffa0083f39f87ff1416?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/7021978/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 57701150, "answer_count": 1, "score": 0, "last_activity_date": 1567036066, "creation_date": 1567026879, "question_id": 57700120, "link": "https://stackoverflow.com/questions/57700120/how-to-pull-data-from-s3-from-within-a-local-docker-container", "title": "How to Pull Data From S3 From Within a Local Docker Container", "body": "<p>I have data currently stored in an s3 bucket that I don't want to be public. I'm attempting to pandas.read_csv(\"s3_file_path\") to load a pandas DataFrame in a script that runs in a docker container. I get a permission denied error. How do I pull the dataframe while giving aws the permissions it wants?</p>\n\n<p>The end goal of this project is the create a RestApi that will process and use a statistical model on some data and return the results. I am also open to a completely different approach that avoids this problem altogether.</p>\n\n<p>As I am the only user of this aws account, just to get it working, I tried putting my aws keys directly in the Dockerfile and running 'aws configure' to essentially copy the exact process I would use if I was doing this without docker. Obviously that is insecure, but I was simply trying to get it to work before I started implementing anything more complex. Unfortunately, it didn't.</p>\n\n<p>Current Dockerfile</p>\n\n<pre><code>FROM python:3\n\nWORKDIR /usr/src/app\n\nCOPY requirements.txt ./\nRUN pip install -r requirements.txt\n\nARG AWS_KEY=My_Actual_Public_Key_In_Plain_Text\nARG AWS_SECRET_KEY=My_Actual_Secret_Key_In_Plain_Text\nARG AWS_REGION='us-east-1'\n\nRUN aws configure set aws_access_key_id $AWS_KEY \\\n&amp;&amp; aws configure set aws_secret_access_key $AWS_SECRET_KEY \\\n&amp;&amp; aws configure set default.region $AWS_REGION\n\n\nCOPY . .\n\nCMD [ \"python\", \"./run.py\" ]\n</code></pre>\n\n<p>run.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from module import app\n\napp.run(host=\"0.0.0.0\", port = 80, debug = True)\n</code></pre>\n\n<p>from <strong>init</strong>.py in module</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import Flask\nimport pandas as pd\nimport numpy as np\n\nfile_name =  \"s3://foo/bar.csv\"\ndf = pd.read_csv(file_name)\n\n@app.route(\"/\")\ndef index():\n\n    return(\"Hello World!\")\n\n</code></pre>\n\n<p>The error I get is:</p>\n\n<p>PermissionError: Access Denied</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1567027544, "post_id": 57700113, "comment_id": 101844429, "body": "If you need to remove a line containing a literal substring you don&#39;t need a regex. <code>for line in fileinput.input(file, inplace=1):</code> then <code>if &#39;de_DE&#39; not in line:</code> then write it to the other file."}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1567065748, "post_id": 57700113, "comment_id": 101853838, "body": "Manipulating XML with regex is very often a bad idea. Python has built-in XML libraries; use them."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1567183032, "last_edit_date": 1567183032, "creation_date": 1567027359, "answer_id": 57700217, "question_id": 57700113, "link": "https://stackoverflow.com/questions/57700113/how-do-i-search-for-contents-of-a-line-in-a-text-file-replace-the-line-and-sav/57700217#57700217", "title": "How do I search for contents of a line in a text file, replace the line, and save as a new file?", "body": "<p>Don't waste your time with line by line file reading.<br>\nRead the whole file at once into a string.<br>\nWork on the string using the regex below, then reset the<br>\nfile handle and write the string to the file.   </p>\n\n<p>Advantages:<br>\n- You have gigabytes of ram<br>\n- You can alter the regex to meet any search changes in the future<br>\nthat require spanning lines for instance <code>\\[\\s*de_DE\\s*\\]</code>, without<br>\nneeding to modify any language code.<br>\n- If you decide to parse the xml tags without possibly splitting up tag content<br>\nbased on anything on the line.<br>\n<em>(I can give you a regex to accomplish this if you need it)</em></p>\n\n<hr>\n\n<p>Do a re.sub() using this  </p>\n\n<p><code>.*&lt;!\\[CDATA\\[de_DE\\]\\]&gt;.*(?:\\r?\\n)?</code></p>\n\n<p><a href=\"https://regex101.com/r/xy0AHj/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/xy0AHj/1</a></p>\n"}, {"tags": [], "owner": {"reputation": 2159, "user_id": 2614637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443082cbe3730d73329d4c45221da6fc?s=128&d=identicon&r=PG", "display_name": "Prem Anand", "link": "https://stackoverflow.com/users/2614637/prem-anand"}, "is_accepted": false, "score": 0, "last_activity_date": 1567029496, "creation_date": 1567029496, "answer_id": 57700539, "question_id": 57700113, "link": "https://stackoverflow.com/questions/57700113/how-do-i-search-for-contents-of-a-line-in-a-text-file-replace-the-line-and-sav/57700539#57700539", "title": "How do I search for contents of a line in a text file, replace the line, and save as a new file?", "body": "<p>Write only the lines that doesn't contain the substring <code>searchExp</code></p>\n\n<pre><code>def replaceAll(file, searchExp):\n    for line in fileinput.input(file, inplace=1):\n        if searchExp not in line:\n            sys.stdout.write(line)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11991233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q8cQpqNWp_Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcrEzhx-BHL25menvZ8hRe5is2F9Q/photo.jpg?sz=128", "display_name": "toln dakoti", "link": "https://stackoverflow.com/users/11991233/toln-dakoti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567183032, "creation_date": 1567026837, "last_edit_date": 1567028918, "question_id": 57700113, "link": "https://stackoverflow.com/questions/57700113/how-do-i-search-for-contents-of-a-line-in-a-text-file-replace-the-line-and-sav", "title": "How do I search for contents of a line in a text file, replace the line, and save as a new file?", "body": "<p>I have an xml file that contains this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;supported-languages&gt;\n &lt;lang&gt;&lt;![CDATA[en_US]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[es_ES]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[de_DE]]&gt;&lt;/lang&gt;\n&lt;/supported-languages&gt;\n\n&lt;2ndsupported-languages&gt;\n &lt;lang&gt;&lt;![CDATA[en_US]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[es_ES]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[de_DE]]&gt;&lt;/lang&gt;\n&lt;/2ndsupported-languages&gt;\n</code></pre>\n\n<p>I only want to delete any line that contains <code>de_DE</code>, and save the file.</p>\n\n<p>So far I have this:</p>\n\n<pre><code>import fileinput\nimport sys\n\nfile = \"C:\\\\Users\\Desktop\\file.xml\"\nsearchExp = \"de_DE\"\nreplaceExp = \"\"\n\n\ndef replaceAll(file,searchExp,replaceExp):\n    for line in fileinput.input(file, inplace=1):\n        line = line.replace(searchExp,replaceExp)\n        sys.stdout.write(line)\n\nreplaceAll(file,searchExp,replaceExp)\n</code></pre>\n\n<p>Close, but not really. It will will search for \"de_DE\", but will only replace that with <code>&lt;null&gt;</code>. This is the result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;supported-languages&gt;\n &lt;lang&gt;&lt;![CDATA[en_US]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[es_ES]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[]]&gt;&lt;/lang&gt;\n&lt;/supported-languages&gt;\n\n&lt;2ndsupported-languages&gt;\n &lt;lang&gt;&lt;![CDATA[en_US]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[es_ES]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[]]&gt;&lt;/lang&gt;\n&lt;/2ndsupported-languages&gt;\n</code></pre>\n\n<p>I want my results to look like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;supported-languages&gt;\n &lt;lang&gt;&lt;![CDATA[en_US]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[es_ES]]&gt;&lt;/lang&gt;\n&lt;/supported-languages&gt;\n\n&lt;2ndsupported-languages&gt;\n &lt;lang&gt;&lt;![CDATA[en_US]]&gt;&lt;/lang&gt;\n &lt;lang&gt;&lt;![CDATA[es_ES]]&gt;&lt;/lang&gt;\n&lt;/2ndsupported-languages&gt;\n</code></pre>\n\n<p>How do I do this?</p>\n\n<p>I tried to <code>import re</code> and then replace <code>pattern</code> with\n<code>pattern = \"^.*de_DE.*$\"</code> but that did not work.</p>\n"}, {"tags": ["python", "json", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11975929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kuPLOSJ-0WU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4lkE7UTluBQvJ4uAMZugdLE02Sw/photo.jpg?sz=128", "display_name": "Red Horse", "link": "https://stackoverflow.com/users/11975929/red-horse"}, "edited": false, "score": 0, "creation_date": 1567029995, "post_id": 57700278, "comment_id": 101845123, "body": "Hi @jbndlr thank you for your response. But still, I received an error. <code>KeyError: &#39;fields&#39;</code>"}], "tags": [], "owner": {"reputation": 3868, "user_id": 5677602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Obp2Z.png?s=128&g=1", "display_name": "jbndlr", "link": "https://stackoverflow.com/users/5677602/jbndlr"}, "is_accepted": false, "score": 0, "last_activity_date": 1567027751, "creation_date": 1567027751, "answer_id": 57700278, "question_id": 57700107, "link": "https://stackoverflow.com/questions/57700107/how-to-print-out-the-exact-field-string-of-the-json-output/57700278#57700278", "title": "How to print out the exact field/string of the JSON output?", "body": "<p>The problem about your error message </p>\n\n<pre><code>  print('dasdasd', json_str[\"summary\"])\nTypeError: string indices must be integers\n</code></pre>\n\n<p>is that you try to access the named field <code>summary</code> on a string (variable <code>json_str</code>), which does not work because strings don't have fields to access by name. If you use the indexing <code>[]</code> operator on a string, you can only provide integers or ranges to extract single characters or sequences from that string. This is obviously not what you're intending.</p>\n\n<p>The keys <code>self</code> and <code>key</code> are on top level of your JSON document, whereas <code>summary</code> is under <code>fields</code>. This should do it, without any extra transformation applied:</p>\n\n<pre><code>import requests\n\nr = requests.get(url, auth=(auth))\ndata = r.json()\n\ndata_summary = data['fields']['summary']\ndata_self = data['self']\ndata_key = data['key']\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11975929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kuPLOSJ-0WU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4lkE7UTluBQvJ4uAMZugdLE02Sw/photo.jpg?sz=128", "display_name": "Red Horse", "link": "https://stackoverflow.com/users/11975929/red-horse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567029183, "creation_date": 1567026820, "last_edit_date": 1567029183, "question_id": 57700107, "link": "https://stackoverflow.com/questions/57700107/how-to-print-out-the-exact-field-string-of-the-json-output", "title": "How to print out the exact field/string of the JSON output?", "body": "<p>I'm trying to filter all the result that I got in the GET Request.\nThe Output that I want is just to get the <strong>summary: , key: and self:</strong>.\nBut I'm getting a lot of Json data.\nI've tried googling on how to do this and I'm going to nowhere.</p>\n\n<p>Here is my code:\nThe commented lines are the codes that I have tried.</p>\n\n<pre><code>import requests\nimport json\nimport re\nimport sys\nurl =\"--------\"\nauth='i.g--t----------', 'X4------'\nr = requests.get(url, auth=(auth))\ndata = r.json()\n#print( json.dumps(data, indent=2) )\n#res1 = \" \".join(re.split(\"summary\", data))\n#print (\"first string result: \", str(res1))\n#json_str = json.dumps(data)\n#resp = json.loads(json_str)\n#print (resp['id'])\n#resp_dict = json.loads(resp_str)\n#resp_dict.get('name')\n#print('dasdasd', json_str[\"summary\"])\n</code></pre>\n\n<p>Example of the Get Api Output that I'm getting using this code. <code>print( json.dumps(data, indent=2) )</code></p>\n\n<pre><code> {\n      \"id\": \"65621\",\n      \"self\": \"https://bboxxltd.atlassian.net/rest/api/2/issue/65621\",\n      \"key\": \"CMS-5901\",\n      \"fields\": {\n        \"summary\": \"new starter: Edoardo Bologna\",\n        \"customfield_10700\": [\n          {\n            \"id\": \"2\",\n            \"name\": \"BBOXX Rwanda HQ\",\n            \"_links\": {\n              \"self\": \"https://bboxxltd.atlassian.net/rest/servicedeskapi/organization/2\"\n            }\n          }\n },\n            \"inwardIssue\": {\n              \"id\": \"65862\",\n              \"key\": \"BMT-2890\",\n              \"self\": \"https://bboxxltd.atlassian.net/rest/api/2/issue/65862\",\n              \"fields\": {\n                \"summary\": \"ERP Databases access with Read Only\",\n                \"status\": {\n                  \"self\": \"https://bboxxltd.atlassian.net/rest/api/2/status/10000\",\n                  \"description\": \"\",\n                  \"iconUrl\": \"https://bboxxltd.atlassian.net/\",\n                  \"name\": \"To Do\",\n                  \"id\": \"10000\",\n                  \"statusCategory\": {\n                    \"self\": \"https://bboxxltd.atlassian.net/rest/api/2/statuscategory/2\",\n                    \"id\": 2,\n                    \"key\": \"new\",\n                    \"colorName\": \"blue-gray\",\n                    \"name\": \"To Do\"\n                  }\n                },\n                \"priority\": {\n                  \"self\": \"https://bboxxltd.atlassian.net/rest/api/2/priority/4\",\n                  \"iconUrl\": \"https://bboxxltd.atlassian.net/images/icons/priorities/low.svg\",\n                  \"name\": \"Low\",\n</code></pre>\n\n<p>My error is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"c:/Users/IanJayloG/Desktop/Python Files/Ex_Files_Learning_Python/Exercise Files/Test/Untitled-1.py\", line 17, in &lt;module&gt;\n    print('dasdasd', data[\"summary\"])\nKeyError: 'summary'\nPS C:\\Users\\IanJayloG\\Desktop\\Python Files\\Ex_Files_Learning_Python\\Exercise Files&gt; &amp; C:/Users/IanJayloG/AppData/Local/Programs/Python/Python37-32/python.exe \"c:/Users/IanJayloG/Desktop/Python Files/Ex_Files_Learning_Python/Exercise Files/Test/Untitled-1.py\"\nTraceback (most recent call last):\n  File \"c:/Users/IanJayloG/Desktop/Python Files/Ex_Files_Learning_Python/Exercise Files/Test/Untitled-1.py\", line 17, in &lt;module&gt;\n    print('dasdasd', json_str[\"summary\"])\nTypeError: string indices must be integers\n</code></pre>\n"}, {"tags": ["python", "windows", "mongodb", "networking", "pymongo"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 9092563, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IUBgRGI8W0I/AAAAAAAAAAI/AAAAAAAAG1Q/KSn7hpYJAPg/photo.jpg?sz=128", "display_name": "rom", "link": "https://stackoverflow.com/users/9092563/rom"}, "edited": false, "score": 0, "creation_date": 1567102521, "post_id": 57701416, "comment_id": 101873368, "body": "I followed your steps but was unable to solve it.  I made the changes to the config file but still received message it was &quot; WARNING: This server is bound to localhost. 2019-08-29T11:14:51.901-0700 I CONTROL  [initandlisten] **          Remote systems will be unable to connect to this server.&quot;  I was only able to get it to bind to all interfaces with running the command &quot;mongo -- --bind_ip_all&quot;.  Even after this correction, when I go to the PC #2, I try to access mongo but it doesn&#39;t work.  In PC#2, I tried typing: &quot;mongo 192.168.42.2:27017&quot; but it said &quot;mongo is not recognized as an exter..&quot;"}, {"owner": {"reputation": 163, "user_id": 9092563, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IUBgRGI8W0I/AAAAAAAAAAI/AAAAAAAAG1Q/KSn7hpYJAPg/photo.jpg?sz=128", "display_name": "rom", "link": "https://stackoverflow.com/users/9092563/rom"}, "edited": false, "score": 0, "creation_date": 1567103162, "post_id": 57701416, "comment_id": 101873628, "body": "After installing MongoDB Community Edition on PC #2, and after adding the /bin/ filepath to the PATH variable in Windows System Environment Variables did it work with the command &quot;mongo &lt;hostname&gt;:27017&quot; (no quotes).  Thank you Belly Buster!"}], "tags": [], "owner": {"reputation": 5014, "user_id": 10490683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f9ddb67fedd81bbff8c1de4630e9b87?s=128&d=identicon&r=PG&f=1", "display_name": "Belly Buster", "link": "https://stackoverflow.com/users/10490683/belly-buster"}, "is_accepted": true, "score": 1, "last_activity_date": 1567037441, "creation_date": 1567037441, "answer_id": 57701416, "question_id": 57700056, "link": "https://stackoverflow.com/questions/57700056/how-do-i-set-up-mongodb-so-that-it-is-exposed-to-my-local-windows-network/57701416#57701416", "title": "How do I set up MongoDB so that it is exposed to my local windows network?", "body": "<p>In your <a href=\"https://docs.mongodb.com/manual/reference/configuration-options/\" rel=\"nofollow noreferrer\">mongod.cfg file</a>, replace \"bindIp: 127.0.0.1\" with \"bindIpAll: true</p>\n\n<pre><code># network interfaces\nnet:\n  port: 27017\n  bindIpAll: true\n</code></pre>\n\n<p>Ensure your firewall allows traffic on port 27017, and then restart your MongoDB server in Windows Service Manager.</p>\n\n<p>You can test remote connectity just by typing:</p>\n\n<pre><code>mongo &lt;hostname&gt;\n</code></pre>\n\n<p>on a remote machine.</p>\n"}], "owner": {"reputation": 163, "user_id": 9092563, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IUBgRGI8W0I/AAAAAAAAAAI/AAAAAAAAG1Q/KSn7hpYJAPg/photo.jpg?sz=128", "display_name": "rom", "link": "https://stackoverflow.com/users/9092563/rom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 1, "accepted_answer_id": 57701416, "answer_count": 1, "score": 0, "last_activity_date": 1567039954, "creation_date": 1567026535, "last_edit_date": 1567039954, "question_id": 57700056, "link": "https://stackoverflow.com/questions/57700056/how-do-i-set-up-mongodb-so-that-it-is-exposed-to-my-local-windows-network", "title": "How do I set up MongoDB so that it is exposed to my local windows network?", "body": "<p>I just need to expose one windows computer's MongoDB database to all the others on the same Windows network.</p>\n\n<p>I searched stack overflow but nobody seems to be specifically addressing this issue. What I've done so far is gone to the mongoDB Windows computer and exposed port 27017. I also went to the config file of mongoDB and set it to [ 0.0.0.0, ::]. Then I went to computer number two and was unable to get the database from computer number one.</p>\n\n<p>I want to do this because I have code that I wrote which pulls data from the database but I can't until I figure out how to do this.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1567026696, "post_id": 57700050, "comment_id": 101844143, "body": "Did you try <i>anything</i>? It&#39;s a &quot;datetime&quot; not a &quot;timedate&quot; btw. Python has a <code>datetime</code> module exactly for this."}], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 430107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3145e241ad278a3681f33febe8608149?s=128&d=identicon&r=PG", "display_name": "rahrahruby", "link": "https://stackoverflow.com/users/430107/rahrahruby"}, "edited": false, "score": 0, "creation_date": 1567028861, "post_id": 57700350, "comment_id": 101844842, "body": "Thanks for your help, that did the trick!"}, {"owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "reply_to_user": {"reputation": 653, "user_id": 430107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3145e241ad278a3681f33febe8608149?s=128&d=identicon&r=PG", "display_name": "rahrahruby", "link": "https://stackoverflow.com/users/430107/rahrahruby"}, "edited": false, "score": 0, "creation_date": 1567029461, "post_id": 57700350, "comment_id": 101845009, "body": "@rahrahruby No problem. If you think I&#39;ve solved your problem, you can accept my answer by clicking the checkmark next to my answer."}], "tags": [], "owner": {"reputation": 1958, "user_id": 6246128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s1jHu.jpg?s=128&g=1", "display_name": "wcarhart", "link": "https://stackoverflow.com/users/6246128/wcarhart"}, "is_accepted": false, "score": 1, "last_activity_date": 1567028165, "creation_date": 1567028165, "answer_id": 57700350, "question_id": 57700050, "link": "https://stackoverflow.com/questions/57700050/timedate-reformatting/57700350#57700350", "title": "timedate reformatting", "body": "<p>You can use the <code>datetime</code> module.</p>\n\n<pre><code>&gt;&gt;&gt; import datetime\n&gt;&gt;&gt; now = datetime.datetime.now()\n&gt;&gt;&gt; now.strftime(\"%b %d\")\n'Aug 28'\n</code></pre>\n\n<p>I'd suggest reading about the <a href=\"https://www.programiz.com/python-programming/datetime\" rel=\"nofollow noreferrer\">datetime</a> module (<a href=\"https://docs.python.org/3/library/datetime.html\" rel=\"nofollow noreferrer\">official docs</a>) and <a href=\"https://www.programiz.com/python-programming/datetime/strftime\" rel=\"nofollow noreferrer\">strftime</a>.</p>\n\n<p>Relevant SO question: <a href=\"https://stackoverflow.com/questions/311627/how-to-print-a-date-in-a-regular-format\">How to print a date in a regular format?</a></p>\n"}], "owner": {"reputation": 653, "user_id": 430107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3145e241ad278a3681f33febe8608149?s=128&d=identicon&r=PG", "display_name": "rahrahruby", "link": "https://stackoverflow.com/users/430107/rahrahruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1567028390, "answer_count": 1, "score": -1, "last_activity_date": 1567029641, "creation_date": 1567026515, "last_edit_date": 1567029641, "question_id": 57700050, "link": "https://stackoverflow.com/questions/57700050/timedate-reformatting", "closed_reason": "Needs more focus", "title": "timedate reformatting", "body": "<p>My Python script is currently writing out my date from the <code>timedate</code> module request as follows:</p>\n\n<p><code>2019-08-28 14:56:52.559047</code></p>\n\n<p>I want it to be converted to:</p>\n\n<p><code>Aug 28</code></p>\n"}, {"tags": ["python", "for-loop", "recursion"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567026623, "post_id": 57700035, "comment_id": 101844114, "body": "Your result just seems to be the length of each element."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567026667, "post_id": 57700035, "comment_id": 101844130, "body": "Convert <code>list_A</code> to a <code>set</code>, then <code>in</code> will be O(1) instead of O(n)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567026746, "post_id": 57700035, "comment_id": 101844163, "body": "You&#39;re not creating a list of results, you&#39;re just counting everything all at once."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567026797, "post_id": 57700035, "comment_id": 101844181, "body": "Take a look at <code>collections.Counter</code>."}, {"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1567026818, "post_id": 57700035, "comment_id": 101844187, "body": "I don&#39;t think that&#39;s necessarily the case, if an element has an &#39;o&#39; it shouldn&#39;t be counted in the resulting list."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1567026860, "post_id": 57700035, "comment_id": 101844208, "body": "@CeliusStingher Yeah, his example doesn&#39;t include any letters that aren&#39;t in <code>list_A</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567026865, "post_id": 57700035, "comment_id": 101844213, "body": "You have lists of variable names; were these supposed to be strings?  Your posted code fails to run due to undefined symbols, no call to the function, ..."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567026973, "post_id": 57700035, "comment_id": 101844248, "body": "The <code>count</code> method or <code>collections.Counter</code> would be faster.  Use <code>sum</code> over a comprehension on <code>list_A</code>, and you give the interpreter a good chance to speed up processing with vectorizations."}, {"owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "edited": false, "score": 0, "creation_date": 1567059755, "post_id": 57700035, "comment_id": 101851030, "body": "Added a new answer that gives an example implementation.  It is a bit long, but should be the fastest possible algorithm given the languge and generic constraints.  It also allows counting multiple occurrences of the pattern, if desired."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11777712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eS1u9OMF8Cg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repEd3XTgOKfAyJZ8tG69OXybOMhQ/photo.jpg?sz=128", "display_name": "Jessica", "link": "https://stackoverflow.com/users/11777712/jessica"}, "edited": false, "score": 0, "creation_date": 1567031178, "post_id": 57700167, "comment_id": 101845368, "body": "Oops! I forgot to mention that the lists are lists of strings. Thanks Barmar! Your implementation works with those lists, but not with the lists that I have which is strange.  My strings appear like:   list_A = [&#39;CAT - cats are great&#39;, &#39;DOG - dogs are great too&#39;] list_B = [&#39;CAT - cats are great(A)DOG - dogs are great too(B)&#39;, &#39;DOG - dogs are great too(B)&#39;]  And for some reason my results return all zeros."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3, "user_id": 11777712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eS1u9OMF8Cg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repEd3XTgOKfAyJZ8tG69OXybOMhQ/photo.jpg?sz=128", "display_name": "Jessica", "link": "https://stackoverflow.com/users/11777712/jessica"}, "edited": false, "score": 0, "creation_date": 1567031322, "post_id": 57700167, "comment_id": 101845400, "body": "I assumed the first list is a list of letters, the second is a list of strings where you want to check each letter against the first."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3, "user_id": 11777712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eS1u9OMF8Cg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repEd3XTgOKfAyJZ8tG69OXybOMhQ/photo.jpg?sz=128", "display_name": "Jessica", "link": "https://stackoverflow.com/users/11777712/jessica"}, "edited": false, "score": 0, "creation_date": 1567031348, "post_id": 57700167, "comment_id": 101845404, "body": "You need to edit the question to show realistic examples."}, {"owner": {"reputation": 3, "user_id": 11777712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eS1u9OMF8Cg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repEd3XTgOKfAyJZ8tG69OXybOMhQ/photo.jpg?sz=128", "display_name": "Jessica", "link": "https://stackoverflow.com/users/11777712/jessica"}, "edited": false, "score": 0, "creation_date": 1567031696, "post_id": 57700167, "comment_id": 101845469, "body": "Sorry for the confusion. I&#39;ve edited my question with an example that&#39;s closer to what my data looks like, and I&#39;ve changed my code as it was wrong. Thanks for your help!"}, {"owner": {"reputation": 3, "user_id": 11777712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eS1u9OMF8Cg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repEd3XTgOKfAyJZ8tG69OXybOMhQ/photo.jpg?sz=128", "display_name": "Jessica", "link": "https://stackoverflow.com/users/11777712/jessica"}, "edited": false, "score": 0, "creation_date": 1567032946, "post_id": 57700167, "comment_id": 101845750, "body": "Thanks for your guidance, @Barmar. Much appreciated."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1567031957, "last_edit_date": 1567031957, "creation_date": 1567027096, "answer_id": 57700167, "question_id": 57700035, "link": "https://stackoverflow.com/questions/57700035/efficient-way-to-compare-two-lists-of-different-lengths-python/57700167#57700167", "title": "Efficient way to compare two lists of different lengths - Python", "body": "<p>Since you're looking for substrings, I don't think there's any way to optimize it. You can use a list comprehension and <code>sum()</code> to simplify the code, though.</p>\n\n<pre><code>result = [sum(phrase in sentence for phrase in list_A) for sentence in list_B]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567032100, "post_id": 57700397, "comment_id": 101845555, "body": "She&#39;s changed the question, it&#39;s now matching arbitrary substrings, not individual characters."}, {"owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567057839, "post_id": 57700397, "comment_id": 101850390, "body": "Will put a different answer to a different question in a new answer"}], "tags": [], "owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567028525, "creation_date": 1567028525, "answer_id": 57700397, "question_id": 57700035, "link": "https://stackoverflow.com/questions/57700035/efficient-way-to-compare-two-lists-of-different-lengths-python/57700397#57700397", "title": "Efficient way to compare two lists of different lengths - Python", "body": "<p>@Barmar's answer is fast and correct if you know <code>list_A</code> in advance, or only need to run it once.  If that is not the case, you may consider the below as an alternative (which should also be fast, but has more steps).</p>\n\n<pre><code>import collections \n\ndef count(target, summaries):\n    return [sum(s[t] for t in target) for s in summaries]\n\nmines = ['aa', 'ab', 'abc', 'aabc']\nsummaries = [collections.Counter(m) for m in mines]\ngold = ['a', 'b']\nsilver = ['c']\nassert count(gold, summaries) == [2, 2, 2, 3]\nassert count(silver, summaries) == [0, 0, 1, 1]\n</code></pre>\n\n<p>It's also worth noting that if you are looking at 60 / 300000, there might be some speed-ups and simplifications that are missing from this toy example, e.g. if 60 is the numbers 1-60, or alphanumerics, etc.  It might also be that the number of values that don't match is so small that it is easier to count those and remove it from the length.</p>\n"}, {"tags": [], "owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567059502, "creation_date": 1567059502, "answer_id": 57704076, "question_id": 57700035, "link": "https://stackoverflow.com/questions/57700035/efficient-way-to-compare-two-lists-of-different-lengths-python/57704076#57704076", "title": "Efficient way to compare two lists of different lengths - Python", "body": "<p>I have actually answered a nearly identical question before, which can be found here:\n<a href=\"https://stackoverflow.com/a/55914487/2284490\">https://stackoverflow.com/a/55914487/2284490</a>\nThe only difference is that you want to know <code>len(matches)</code> instead of <code>any(matches)</code> on the algorithm.</p>\n\n<p>This can be solved efficiently as variations on the <a href=\"https://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_algorithm\" rel=\"nofollow noreferrer\">Aho Corasick algorithm</a></p>\n\n<p>It is an efficient dictionary matching algorithm that locates patterns within text simultaneously in <code>O(p + q + r)</code>, with <code>p</code> = length of patterns, <code>q</code> = length of text, <code>r</code> = length of returned matches.</p>\n\n<p>You may want to run two separate state machines simultaneously, and you would need to modify them so they terminate on the first match.</p>\n\n<p>I took a stab at the modifications, starting with <a href=\"http://algo.pw/algo/64/python\" rel=\"nofollow noreferrer\">this python implementation</a></p>\n\n<pre><code>class AhoNode(object):\n    def __init__(self):\n        self.goto = {}\n        self.count = 0\n        self.fail = None\n\ndef aho_create_forest(patterns):\n    root = AhoNode()\n    for path in patterns:\n        node = root\n        for symbol in path:\n            node = node.goto.setdefault(symbol, AhoNode())\n        node.count += 1\n    return root\n\ndef aho_create_statemachine(patterns):\n    root = aho_create_forest(patterns)\n    queue = []\n    for node in root.goto.itervalues():\n        queue.append(node)\n        node.fail = root\n    while queue:\n        rnode = queue.pop(0)\n        for key, unode in rnode.goto.iteritems():\n            queue.append(unode)\n            fnode = rnode.fail\n            while fnode is not None and key not in fnode.goto:\n                fnode = fnode.fail\n            unode.fail = fnode.goto[key] if fnode else root\n            unode.count += unode.fail.count\n    return root\n\ndef aho_count_all(s, root):\n    total = 0\n    node = root\n    for i, c in enumerate(s):\n        while node is not None and c not in node.goto:\n            node = node.fail\n        if node is None:\n            node = root\n            continue\n        node = node.goto[c]\n        total += node.count\n    return total\n\ndef pattern_counter(patterns):\n    ''' Returns an efficient counter function that takes a string\n    and returns the number of patterns matched within it\n    '''\n    machine = aho_create_statemachine(patterns)\n    def counter(text):\n        return aho_count_all(text, machine)\n    return counter\n</code></pre>\n\n<p>and to use it</p>\n\n<pre><code>patterns = ['CAT - cats are great', 'DOG - dogs are great too'] \ncounter = pattern_counter(patterns)\ntext_list = ['CAT - cats are great(A)DOG - dogs are great too(B)',\n             'DOG - dogs are great too(B)']\nfor text in text_list:\n    print '%r - %s' % (text, counter(text))\n</code></pre>\n\n<p>This displays</p>\n\n<pre><code>'CAT - cats are great(A)DOG - dogs are great too(B)' - 2\n'DOG - dogs are great too(B)' - 1\n</code></pre>\n\n<p>Note that this solution counts each match individually, so looking for 'a' and 'b' in 'aba' would give 3.  If you wanted only one match per pattern, you would need to track all patterns seen, you would make a minor modification to convert the integer to a set:</p>\n\n<pre><code>- self.count = 0\n+ self.seen = set()\n...\n- node.count += 1\n+ node.seen.add(path)\n...\n- unode.count += unode.fail.count\n+ unode.seen |= unode.fail.seen\n...\n- total = 0\n+ all_seen = set()\n- total += node.count\n+ all_seen |= node.seen\n- return total\n+ return len(all_seen)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11777712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eS1u9OMF8Cg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repEd3XTgOKfAyJZ8tG69OXybOMhQ/photo.jpg?sz=128", "display_name": "Jessica", "link": "https://stackoverflow.com/users/11777712/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "accepted_answer_id": 57700167, "answer_count": 3, "score": 0, "last_activity_date": 1567059502, "creation_date": 1567026416, "last_edit_date": 1567031640, "question_id": 57700035, "link": "https://stackoverflow.com/questions/57700035/efficient-way-to-compare-two-lists-of-different-lengths-python", "title": "Efficient way to compare two lists of different lengths - Python", "body": "<p>I'm trying to compare list_A: 60 elements against list_B: ~300,000 elements, and return a count (in the form of a list) of the number of elements in list_A that appear for each of the elements in list_B.</p>\n\n<p>My lists appear like:</p>\n\n<pre><code>list_A = ['CAT - cats are great', 'DOG - dogs are great too'] \nlist_B = ['CAT - cats are great(A)DOG - dogs are great too(B)', 'DOG - dogs are great too(B)']\n</code></pre>\n\n<p>I would like my counts to return: <code>[2, 1]</code></p>\n\n<p>My implementation works, but it contains a nested for loop which leads to a long running time.</p>\n\n<pre><code>list = []\nfor i in range(len(list_B)):\n    count = 0\n    for j in range(len(list_A)):\n        if (list_A[j] in list_B[i]):\n            count += 1\n    list.append(count)\nreturn list\n</code></pre>\n\n<p>Any help would be much appreciated! Thanks :)</p>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 731, "user_id": 1386067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8614c1bebefdd0a606173aabb74c7deb?s=128&d=identicon&r=PG", "display_name": "Sergio Pulgarin", "link": "https://stackoverflow.com/users/1386067/sergio-pulgarin"}, "edited": false, "score": 0, "creation_date": 1567026472, "post_id": 57700011, "comment_id": 101844048, "body": "From the warning you are getting, it looks like the connection is working because it already has column name information (db schema). For that reason, the connection code doesn&#39;t matter that much. I would share the code that you are using to insert and the values for the columns."}, {"owner": {"reputation": 731, "user_id": 1386067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8614c1bebefdd0a606173aabb74c7deb?s=128&d=identicon&r=PG", "display_name": "Sergio Pulgarin", "link": "https://stackoverflow.com/users/1386067/sergio-pulgarin"}, "edited": false, "score": 0, "creation_date": 1567026522, "post_id": 57700011, "comment_id": 101844074, "body": "<a href=\"https://stackoverflow.com/questions/10957238/incorrect-string-value-when-trying-to-insert-utf-8-into-mysql-via-jdbc\" title=\"incorrect string value when trying to insert utf 8 into mysql via jdbc\">stackoverflow.com/questions/10957238/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 11849180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gg9J8BBYg5o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIaf0SP_Szfdl7BYjl_dzFvxKxIA/photo.jpg?sz=128", "display_name": "Leo0", "link": "https://stackoverflow.com/users/11849180/leo0"}, "reply_to_user": {"reputation": 731, "user_id": 1386067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8614c1bebefdd0a606173aabb74c7deb?s=128&d=identicon&r=PG", "display_name": "Sergio Pulgarin", "link": "https://stackoverflow.com/users/1386067/sergio-pulgarin"}, "edited": false, "score": 0, "creation_date": 1567373307, "post_id": 57700011, "comment_id": 101936573, "body": "thanks!  this was the problem"}], "owner": {"reputation": 31, "user_id": 11849180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gg9J8BBYg5o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIaf0SP_Szfdl7BYjl_dzFvxKxIA/photo.jpg?sz=128", "display_name": "Leo0", "link": "https://stackoverflow.com/users/11849180/leo0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567026201, "creation_date": 1567026201, "question_id": 57700011, "link": "https://stackoverflow.com/questions/57700011/python-mysql-incorrect-string-value", "title": "Python MySQL incorrect string value", "body": "<p>I am using MySQL 5.7 and pymysql  and when\nI am trying to store some data into the database   I am getting the following error:</p>\n\n<blockquote>\n  <p>Warning: (1366, \"Incorrect string value: '\\xF0\\x9F\\x92\\x8A' for column 'description' at row 1\")\n    result = self._query(query)</p>\n</blockquote>\n\n<p>My connection is set as follows:</p>\n\n<pre><code>self.__conn = pymysql.connect(host='localhost', port=3306, user=user, passwd=pass,db = 'twitter',\n                                  charset='utf8mb4')\n    self.__cur = self.__conn.cursor()\n</code></pre>\n\n<p>thanks in advance </p>\n"}, {"tags": ["python", "loops", "tensorflow", "keras", "tensor"], "comments": [{"owner": {"reputation": 21, "user_id": 3737091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/597e6b4b785f53657343adcf1dbac632?s=128&d=identicon&r=PG&f=1", "display_name": "user3737091", "link": "https://stackoverflow.com/users/3737091/user3737091"}, "edited": false, "score": 0, "creation_date": 1567085074, "post_id": 57699968, "comment_id": 101864579, "body": "Okay, I thought of a roundabout way. Since the mask is a constant, theoretically, I would not need to update weights. So, as long as I can convert the tensor into a numpy array, it is possible to iterate. The problem now is that keras.backend.eval() is giving out errors saying that the input should be defined- which it IS, via a placeholder (it is working if I remove this section). Any help?"}], "owner": {"reputation": 21, "user_id": 3737091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/597e6b4b785f53657343adcf1dbac632?s=128&d=identicon&r=PG&f=1", "display_name": "user3737091", "link": "https://stackoverflow.com/users/3737091/user3737091"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567025946, "creation_date": 1567025946, "question_id": 57699968, "link": "https://stackoverflow.com/questions/57699968/is-there-any-way-to-iterate-and-take-out-3d-slices-of-a-tensor", "title": "Is there any way to iterate and take out 3d slices of a tensor?", "body": "<p>Is there a way to iterate over values of a 3D tensor for multiplication?\nI have a 3x3 mask that I want to multiply with each 3 dimensional pixels of an rgb image</p>\n\n<p>AN equivalent implementation is, say I have a 3x3 tensor which is a mask and a nonex200x200x3 rgb image. I want to multiply the 3x3 mask with the (r,g,b) value at (0,0,:) and then again with (0,1,:) and so on until (0,199,:) and then on to (1,0,:) all the way upto (199,199,:) to produce a (200,200,3) array.\nThis is because each of 3x3 mask by 3x1 element is supposed to yield a 3x1 element (or a 3D pixel) for each of 200x200 pixels in the input image.</p>\n\n<p>slicing is easy enough in a numpy array since I can iterate using indices, but is there any way to do so in Keras?\nAny help is highly appreciated\nThanks</p>\n\n<p>Keras.backend.dot is able to carry out the actual multiplication, but how to go about actually taking the slice?</p>\n"}, {"tags": ["python", "python-3.x", "peewee"], "answers": [{"comments": [{"owner": {"reputation": 3046, "user_id": 3557485, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dzUaw.jpg?s=128&g=1", "display_name": "rihe", "link": "https://stackoverflow.com/users/3557485/rihe"}, "edited": false, "score": 0, "creation_date": 1567100010, "post_id": 57713849, "comment_id": 101872383, "body": "Is this more recommended then just calling <code>myDB.connect()</code> after the disconnection?"}, {"owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "reply_to_user": {"reputation": 3046, "user_id": 3557485, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dzUaw.jpg?s=128&g=1", "display_name": "rihe", "link": "https://stackoverflow.com/users/3557485/rihe"}, "edited": false, "score": 0, "creation_date": 1567460468, "post_id": 57713849, "comment_id": 101961631, "body": "It depends on what you&#39;re trying to do upon a disconnect. If the disconnect is initiated by the server after a long time idle, you may wish to retry the query that failed."}], "tags": [], "owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "is_accepted": true, "score": 3, "last_activity_date": 1567094040, "creation_date": 1567094040, "answer_id": 57713849, "question_id": 57699955, "link": "https://stackoverflow.com/questions/57699955/handling-database-disconnection-with-peewee/57713849#57713849", "title": "Handling Database Disconnection With Peewee", "body": "<p>You can use the reconnect mixin:</p>\n\n<pre><code>from playhouse.shortcuts import ReconnectMixin\n\nclass ReconnectMySQLDatabase(ReconnectMixin, MySQLDatabase):\n    pass\n\ndb = ReconnectMySQLDatabase('my_app', ...)\n</code></pre>\n\n<p>If you have a long-running script that is idle for a while, MySQL will terminate the connections if there is no activity. You can configure your mysql server not to do this, or you can use the above to automatically reconnect under certain error conditions.</p>\n"}], "owner": {"reputation": 3046, "user_id": 3557485, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/dzUaw.jpg?s=128&g=1", "display_name": "rihe", "link": "https://stackoverflow.com/users/3557485/rihe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 57713849, "answer_count": 1, "score": 3, "last_activity_date": 1567094040, "creation_date": 1567025870, "question_id": 57699955, "link": "https://stackoverflow.com/questions/57699955/handling-database-disconnection-with-peewee", "title": "Handling Database Disconnection With Peewee", "body": "<p>My code uses Peewee with MySQL. Everything worked like a charm until I tried to use it with <code>requests</code> that is used for accessing a slow server. In a nutshell, I need to upload objects to a MySQL db, but my program crashes - after uploading a few entries - with the following error:</p>\n\n<pre><code>peewee.OperationalError: (2006, 'MySQL server has gone away')\n</code></pre>\n\n<p>I understand the error, I already experienced this issue with a Flask app and the Peewee documentation helped me out in that case. But in this case I am not using Flask, it's just a simple Python script. Therefore I couldn't figure out yet how could I manage this problem.</p>\n\n<p>What is interesting that the Peewee related part has nothing to do with html requests. I am doing some non Peewee related tasks then I am calling this method:</p>\n\n<pre><code>def uploadObj (objekt):\n    with myDB.atomic():\n        entrylist.insert_many(objekt).execute()\n        print (\"upload\")\n</code></pre>\n\n<p>I assume the problem happens when the html request is slow and the connection is idle for a long time and disconnects. </p>\n\n<p>Based on <a href=\"https://stackoverflow.com/a/26507958/3557485\">this answer</a> I tried:</p>\n\n<pre><code>db = MySQLDatabase(db_name, user=db_username, passwd=db_password, host=db_host, port=db_port)\ndb.get_conn().ping(True)\n</code></pre>\n\n<p>But this didn't solve the problem. </p>\n\n<p>For my second try I tried the below code that seems fixing the problem: </p>\n\n<pre><code>def uploadObj (objekt):\n    try:\n        with myDB.atomic():\n            entrylist.insert_many(objekt).execute()\n            print (\"upload\")\n        myDB.close()\n    except:\n        myDB.connect()\n        with myDB.atomic():\n            entrylist.insert_many(objekt).execute()\n            print (\"upload\")\n</code></pre>\n\n<p>If the connection disconnects, I manually reconnect to the database.</p>\n\n<p>My question is that is this a proper solution that I can use without any possible issues? Or is there a better way to prevent the issue? </p>\n"}, {"tags": ["python", "list", "type-conversion"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567025933, "post_id": 57699946, "comment_id": 101843852, "body": "Use <code>map(int, ...)</code>"}, {"owner": {"reputation": 194, "user_id": 9802392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d parolin", "link": "https://stackoverflow.com/users/9802392/d-parolin"}, "edited": false, "score": 0, "creation_date": 1567026268, "post_id": 57699946, "comment_id": 101843974, "body": "Interesting way of using a list comprehension for an input ! If this turns into actually used code input sanitization however should happen, as the conversion on strings or nothing will fail."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6882757"}, "edited": false, "score": 0, "creation_date": 1567084003, "post_id": 57699946, "comment_id": 101863916, "body": "[[int(x) for x in sublist] for sublist in lst] or map  &gt;&gt;&gt; [map(int, sublist) for sublist in lst]"}], "owner": {"user_type": "does_not_exist", "display_name": "user6882757"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1567025965, "answer_count": 0, "score": 1, "last_activity_date": 1567025820, "creation_date": 1567025820, "question_id": 57699946, "link": "https://stackoverflow.com/questions/57699946/how-to-convert-string-into-int-for-list-of-list-in-python", "closed_reason": "Duplicate", "title": "How to convert string into int for list of list in python", "body": "<p>How to convert string into int for list of list in python. My code is below&lt; Because of split my int is converting into string</p>\n\n<pre><code>k=int(input())\nL = [(input().split()) for _ in range(k)]\nL\n</code></pre>\n\n<p>inputs</p>\n\n<pre><code>2\n11 1\n23 4\n</code></pre>\n\n<p>Out</p>\n\n<pre><code>[['11', '1'], ['23', '4']]\n</code></pre>\n\n<p>Desired Out</p>\n\n<pre><code>[[11, 1], [23, 4]]\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1567026864, "post_id": 57699937, "comment_id": 101844210, "body": "See <a href=\"https://stackoverflow.com/questions/5134893/importing-classes-from-different-files-in-a-subdirectory\">Importing classes from different files in a subdirectory</a>"}], "owner": {"reputation": 1388, "user_id": 4565405, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b40114eee9ba6552c5a74330ee56e1a0?s=128&d=identicon&r=PG", "display_name": "Spencer Sutton", "link": "https://stackoverflow.com/users/4565405/spencer-sutton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567025770, "creation_date": 1567025770, "question_id": 57699937, "link": "https://stackoverflow.com/questions/57699937/how-to-create-a-list-of-objects-based-on-all-classes-in-a-folder", "title": "How to create a list of objects based on all classes in a folder?", "body": "<p>If I have a class like this:</p>\n\n<pre><code>class A(object):\n    def __init__(self):\n         self.dynamic_objects = []\n</code></pre>\n\n<p>And a subfolder in the same location with a variable amount of files each with one class that are child of the same parent class (in other words they have the same methods and variables):</p>\n\n<pre><code>class B(Parent):\n     def run(self):\n         # logic here\n         return\n</code></pre>\n\n<p>How could I go about making the list of dynamic_objects in class A automatically populate one object for each file in the subfolder? So if my file structure is like this:</p>\n\n<pre><code>a.py\n     /subfolder\n         b.py\n         c.py\n         d.py\n</code></pre>\n\n<p>How could I make it so that the dynamic_objects list is filled with one B object, one C object, and one D object without hardcoding it in that list but just pointing it to the directory? Is this possible?</p>\n\n<p>I want to do this in my application so that anyone who wants to extend the functionality of the app can just worry about making a class with a run method in the subfolder without having to edit a.py</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1567025767, "post_id": 57699892, "comment_id": 101843802, "body": "I think this is a great question, but I have a minor terminology quibble: &quot;dict pointer&quot; - Python <i>doesn&#39;t have pointers</i>."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1567060589, "post_id": 57699892, "comment_id": 101851385, "body": "Do any of your object&#39;s methods mutate its state?  If they don&#39;t, re-using <code>__dict__</code> likely won&#39;t matter, because nothing is changing.  But if they do, it could lead to surprising behavior (under various possible solutions)."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1567061598, "post_id": 57699892, "comment_id": 101851796, "body": "Also, do you really need to use the original object and the wrapped object in an interleaved way like that?  My intuition is to say that what you want is some sort of context manager that simply modifies the method when you enter a <code>with</code> block and then puts the original version back at the end.  That would make it cumbersome to call the methods in an alternating order as you do in your example (i.e., calling a, then v, then a, then v, etc., instead of a, a, a, a, v, v, v, v), but it would segregate the modified behavior somewhat which seems a bit cleaner."}, {"owner": {"reputation": 734, "user_id": 7479226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zCFrV.jpg?s=128&g=1", "display_name": "R&#233;mi Bonnet", "link": "https://stackoverflow.com/users/7479226/r%c3%a9mi-bonnet"}, "edited": false, "score": 0, "creation_date": 1567087814, "post_id": 57699892, "comment_id": 101866284, "body": "No unfortunately, i want to simultaneously use multiple objects with different &#39;hacked-in&#39; settings."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1567214988, "post_id": 57699892, "comment_id": 101908910, "body": "My feeling is that what you are doing is a hack, but it may be the best hack for the circumstances.  If you want to be able to create an instance by providing all the state at once, then the underlying classes (<code>A1</code> and its ilk) should be modified to support that; that way you could provide all <i>relevant</i> state with an argument to <code>__init__</code>, rather than having to copy <i>all</i> state by sharing <code>__dict__</code>.  It seems to me that your solution is basically a workaround for the fact that the classes don&#39;t provide sufficient ability to copy and access relevant internal state."}], "answers": [{"comments": [{"owner": {"reputation": 734, "user_id": 7479226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zCFrV.jpg?s=128&g=1", "display_name": "R&#233;mi Bonnet", "link": "https://stackoverflow.com/users/7479226/r%c3%a9mi-bonnet"}, "edited": false, "score": 0, "creation_date": 1567026686, "post_id": 57700020, "comment_id": 101844140, "body": "I&#39;m currently using a variation of this, but the lack of inheritance is causing issues when the patched function is called internally by the object. I&#39;m adding the problematic situation to the original post. Also, and even if it&#39;s not the biggest issue, it&#39;s extremely annoying when step-by-step debugging is used."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 734, "user_id": 7479226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zCFrV.jpg?s=128&g=1", "display_name": "R&#233;mi Bonnet", "link": "https://stackoverflow.com/users/7479226/r%c3%a9mi-bonnet"}, "edited": false, "score": 0, "creation_date": 1567027113, "post_id": 57700020, "comment_id": 101844306, "body": "@R&#233;miBonnet the above solution handles inheritance, descriptor protocol (so <code>property</code>) out of the box. I&#39;ve added an example of usage. I can understand why step-by-step debugging could get annoying, but at this point, it&#39;s going to be a trade-off between simplicity and of implementation and that, I&#39;m afraid."}, {"owner": {"reputation": 734, "user_id": 7479226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zCFrV.jpg?s=128&g=1", "display_name": "R&#233;mi Bonnet", "link": "https://stackoverflow.com/users/7479226/r%c3%a9mi-bonnet"}, "edited": false, "score": 0, "creation_date": 1567027346, "post_id": 57700020, "comment_id": 101844373, "body": "i can live with the debugging issue, but the patched function being not used by the object own functions is a blocker. See <a href=\"https://repl.it/repls/OrneryLongField\" rel=\"nofollow noreferrer\">repl.it/repls/OrneryLongField</a> for the difference between the <code>__dict__</code> implementation and the proxy implementation."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 734, "user_id": 7479226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zCFrV.jpg?s=128&g=1", "display_name": "R&#233;mi Bonnet", "link": "https://stackoverflow.com/users/7479226/r%c3%a9mi-bonnet"}, "edited": false, "score": 0, "creation_date": 1567027775, "post_id": 57700020, "comment_id": 101844490, "body": "@R&#233;miBonnet You can add a method to the instance."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 2, "last_activity_date": 1567027019, "last_edit_date": 1567027019, "creation_date": 1567026286, "answer_id": 57700020, "question_id": 57699892, "link": "https://stackoverflow.com/questions/57699892/creating-views-on-an-object-by-sharing-its-dict-attribute/57700020#57700020", "title": "Creating views on an object by sharing its __dict__ attribute", "body": "<p>It sounds to me like you want a proxy object, which is what a view generally is. Briefly, the pattern can be as simple (for read-only proxies) as this:</p>\n\n<pre><code>class View:\n    def __init__(self, obj):\n        self._obj = obj\n    def __getattr__(self, attr):\n        return getattr(self._obj, attr)\n</code></pre>\n\n<p>The nice thing about <code>__getattr__</code> is that it is only called when an attribute is not found. If you want write access, then you'll need to be a bit more careful, and implement <code>__setattribute__</code> which is <em>always</em> called, and it becomes easy to inadvertently trigger infinite recursion.</p>\n\n<p>Note, because we are using <code>getattr</code> on the object being proxied, we don't have to manage recreating the interface! Method resolution, the descriptor protocol (so <code>property</code>), inheritance, etc is all handled by the usual machinery:</p>\n\n<pre><code>In [1]: class View:\n   ...:     def __init__(self, obj):\n   ...:         self._obj = obj\n   ...:     def __getattr__(self, attr):\n   ...:         return getattr(self._obj, attr)\n   ...:\n\nIn [2]: class UrFoo:\n   ...:     def __init__(self, value):\n   ...:         self.value = value\n   ...:     def foo(self):\n   ...:         return self.value\n   ...:\n\nIn [3]: class Foo(UrFoo):\n   ...:     def frognicate(self):\n   ...:         return self.value * 42\n   ...:     @property\n   ...:     def baz(self):\n   ...:         return 0\n   ...:\n\nIn [4]: foo = Foo(8)\n\nIn [5]: view = View(foo)\n\nIn [6]: view.foo()\nOut[6]: 8\n\nIn [7]: view.frognicate()\nOut[7]: 336\n\nIn [8]: view.baz\nOut[8]: 0\n</code></pre>\n"}], "owner": {"reputation": 734, "user_id": 7479226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zCFrV.jpg?s=128&g=1", "display_name": "R&#233;mi Bonnet", "link": "https://stackoverflow.com/users/7479226/r%c3%a9mi-bonnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1567029778, "creation_date": 1567025507, "last_edit_date": 1567029778, "question_id": 57699892, "link": "https://stackoverflow.com/questions/57699892/creating-views-on-an-object-by-sharing-its-dict-attribute", "title": "Creating views on an object by sharing its __dict__ attribute", "body": "<p>I'm currently looking at a maintainable, and easy-to-use way of creating \"views\" on python objects. Specifically, i have a very large collection of classes that share a couple common methods, and i would like to wrap instances of these classes in order to modify the behaviour of these methods.</p>\n\n<p>Of course, i could create for every class a new class, following the wrapper pattern, redefining the full interface and redirecting every method to the original object, except those that i wish to override. This isn't practical, due to the shear amount of code required and the maintenance required when any class would change.</p>\n\n<p>Some experimentation have shown me i could generate the wrappers with heavy use of metaclasses and introspection to \"recreate\" the interface in a wrapper object, but this proved fairly horrendous to use and debug, especially if A's have properties (code not included)</p>\n\n<p>A second attempt showed that it can be done with fairly minimal code by sharing the <code>__dict__</code> attribute and overriding <code>__class__</code>. This leads to the following code (<a href=\"https://repl.it/repls/InfantileAshamedProjector\" rel=\"nofollow noreferrer\">https://repl.it/repls/InfantileAshamedProjector</a>):</p>\n\n<pre><code>##############################\n# Existing code\n##############################\n\nclass A1:\n  def __init__(self, eggs):\n    self.eggs = eggs\n\n  # Lots of complicated functions and members\n\n  def hello(self):\n    print (\"hello, you have %d eggs\" % self.eggs)\n\n  def meeting(self):\n    self.hello()\n    print (\"goodbye\")\n\n  # Lots of complicated functions calling hello.\n\n# Lots of A2, A3, A4 with the same pattern\n\n##############################\n# \"Magic\" code for view generation\n##############################\n\nclass FutureView:\n  pass\n\ndef create_view(obj, name):\n  class View(obj.__class__):\n    def hello(self):\n      print (\"hello %s, you have %d eggs\" % (name, self.eggs))\n\n  view = FutureView()\n  view.__dict__ = obj.__dict__\n  view.__class__ = View\n\n  return view\n\n##############################\n# Sample of use\n##############################\n\na = A1(3)\na.hello() # Prints hello, you have 3 eggs\n\nv = create_view(a, \"Bob\")\nv.hello() # Prints hello Bob, you have 3 eggs\n\na.eggs = 5\na.hello() # Prints hello, you have 5 eggs\nv.hello() # Prints hello Bob, you have 5 eggs\n\na.meeting() # Prints hello, you have 5 eggs. Goodbye\nv.meeting() # Prints hello Bob, you have 5 eggs. Goodbye\n</code></pre>\n\n<p>This makes for fairly short code, and modifying the A1, A2, etc... classes doesn't require any change to the patch, which is very nice. However, i'm obviously worried about the implications of sharing <code>__dict__</code> between multiple classes. My questions are:</p>\n\n<ul>\n<li>Do you see any other way to achieve my goal, either by slightly improving the above method, or by something totally different? (Note that allowing class modification / addition without requiring any change to patching machinery is a hard requirement)</li>\n<li>What pitfalls should i be aware when i have multiple objects sharing the same <code>__dict__</code>?</li>\n<li>What is the best (less bad?) way of creating an object by providing explictly the <code>__dict__</code> and the <code>__class__</code>?</li>\n<li>Bonus: As shown in the above example, i need to attach one extra piece of information to my wrapper. Because i cannot add it to the object <code>__dict__</code>, i'm forced to add it to the class itself, either as a class member, or as a \"captured\" variable. Is there any other position where i could put it? Ideally, i would like to avoid have to create a new class for every instance of name (i want to only dynamically create a new class for every original class)</li>\n</ul>\n\n<p><strong>Other considered solutions:</strong></p>\n\n<p>Proxy objects (see juanpa.arrivillaga answer) is an almost perfect solution, but it falls short when the patched function is called internally by another function. Specifically, in the code posted above, the final calls to the <code>meeting</code> function will use the original implementation instead of the patched implementation. See <a href=\"https://repl.it/repls/OrneryLongField\" rel=\"nofollow noreferrer\">https://repl.it/repls/OrneryLongField</a> for an example.</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "data-visualization"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1567027840, "post_id": 57699888, "comment_id": 101844506, "body": "You need to stick to the example. There is a <code>norm</code> which you removed here, but which is important because it normalizes the data into the 0..1 range for the colormap."}, {"owner": {"reputation": 180, "user_id": 8408148, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/87d13f573b9e2a3ece5d3ee55769e885?s=128&d=identicon&r=PG&f=1", "display_name": "MikolajM", "link": "https://stackoverflow.com/users/8408148/mikolajm"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1567063578, "post_id": 57699888, "comment_id": 101852734, "body": "but norm is not changing anything special in my experiments. could you elaborate how to use it?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1567065781, "post_id": 57699888, "comment_id": 101853865, "body": "Just as in the example you link to"}, {"owner": {"reputation": 180, "user_id": 8408148, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/87d13f573b9e2a3ece5d3ee55769e885?s=128&d=identicon&r=PG&f=1", "display_name": "MikolajM", "link": "https://stackoverflow.com/users/8408148/mikolajm"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1567080477, "post_id": 57699888, "comment_id": 101861796, "body": "doesn&#39;t work unfortunately"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1567087942, "post_id": 57699888, "comment_id": 101866362, "body": "&quot;doesn&#39;t work&quot; isn&#39;t really a useful problem description; especially since I don&#39;t know the actual code that doesn&#39;t work for you. If you can provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (runnable self-contained code), I can look further into this."}], "owner": {"reputation": 180, "user_id": 8408148, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/87d13f573b9e2a3ece5d3ee55769e885?s=128&d=identicon&r=PG&f=1", "display_name": "MikolajM", "link": "https://stackoverflow.com/users/8408148/mikolajm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567063613, "creation_date": 1567025484, "last_edit_date": 1567063613, "question_id": 57699888, "link": "https://stackoverflow.com/questions/57699888/how-to-make-horizontal-linechart-with-categorical-variables-and-timeseries", "title": "How to make horizontal linechart with categorical variables and timeseries?", "body": "<p>I want to replicate plots from this paper: <a href=\"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5000555/pdf/nihms774453.pdf\" rel=\"nofollow noreferrer\">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5000555/pdf/nihms774453.pdf</a> I'm particularly interested in plot on page 16, right panel. I tried to do this in matplotlib but it seems to me that there is no way to access lines in linecollection.</p>\n\n<p>I don't know how to change the color of the each line, according to the value at every index. I'd like to eventually get something like here: <a href=\"https://matplotlib.org/3.1.1/gallery/lines_bars_and_markers/multicolored_line.html\" rel=\"nofollow noreferrer\">https://matplotlib.org/3.1.1/gallery/lines_bars_and_markers/multicolored_line.html</a> but for every line, according to the data. </p>\n\n<p>this is what I tried:</p>\n\n<p>the data in numpy array: <a href=\"https://pastebin.com/B1wJu9Nd\" rel=\"nofollow noreferrer\">https://pastebin.com/B1wJu9Nd</a></p>\n\n<pre><code>import pandas as pd, numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.collections import LineCollection\nfrom matplotlib import colors as mcolors\n\n%matplotlib inline\n\n\n\n\nbase_range = np.arange(qq.index.max()+1)\nfig, ax = plt.subplots(figsize=(12,8))\nax.set_xlim(qq.index.min(), qq.index.max())\n# ax.set_ylim(qq.columns[0], qq.columns[-1])\nax.set_ylim(-5, len(qq.columns) +5)\n\nline_segments = LineCollection([np.column_stack([base_range, [y]*len(qq.index)]) for y in range(len(qq.columns))],\n                               cmap='viridis',\n                               linewidths=(5),\n                               linestyles='solid', \n\n                              )\nline_segments.set_array(base_range)\nax.add_collection(line_segments)\naxcb = fig.colorbar(line_segments)\nplt.show()\n\n</code></pre>\n\n<p>my result: \n<a href=\"https://i.stack.imgur.com/bqasO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bqasO.png\" alt=\"my result\"></a></p>\n\n<p>what I want to achieve:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Kq5ld.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kq5ld.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "numpy", "numpy-ndarray"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567026391, "post_id": 57699875, "comment_id": 101844016, "body": "Many questions just do something like <code>arrayname = np.array([1, 2, 3])</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567026432, "post_id": 57699875, "comment_id": 101844032, "body": "Or <code>arrayname = np.zeros((2, 3))</code>"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1567028279, "post_id": 57699875, "comment_id": 101844664, "body": "<code>np.savetxt()</code> and <code>np.loadtxt()</code> <a href=\"https://stackoverflow.com/a/28440249/2836621\">stackoverflow.com/a/28440249/2836621</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1567028657, "post_id": 57699875, "comment_id": 101844785, "body": "For modest sized arrays, the <code>repr</code> display is useful.  <code>&#39;array([0, 0, 3])&#39;</code>. It looks a lot like the code that is used to create an array from a (nested) list.  Browse other <code>numpy</code> questions, and pay attention to the answers.  A number of higher-ranked posters copy-n-paste their answer from <code>ipython</code> sessions, showing both input and output code."}], "answers": [{"tags": [], "owner": {"reputation": 2271, "user_id": 3592211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4503144df77da1c12c3c3f922629c5ca?s=128&d=identicon&r=PG", "display_name": "Michael MacAskill", "link": "https://stackoverflow.com/users/3592211/michael-macaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1567027223, "creation_date": 1567027223, "answer_id": 57700192, "question_id": 57699875, "link": "https://stackoverflow.com/questions/57699875/how-to-communicate-a-numpy-nd-array-as-as-part-of-a-minimal-example/57700192#57700192", "title": "how to communicate a numpy Nd array as as part of a minimal example?", "body": "<p>This existing answer shows how to use <code>json.dumps()</code> to serialise to a string, although as numpy arrays are not directly serialisable, they need to be converted to a list first:</p>\n\n<p><a href=\"https://stackoverflow.com/a/51836953/3592211\">https://stackoverflow.com/a/51836953/3592211</a></p>\n"}], "owner": {"reputation": 341, "user_id": 1854821, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe39e1083250c6267b259b694dfb4200?s=128&d=identicon&r=PG", "display_name": "Timothy W. Hilton", "link": "https://stackoverflow.com/users/1854821/timothy-w-hilton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567027223, "creation_date": 1567025437, "question_id": 57699875, "link": "https://stackoverflow.com/questions/57699875/how-to-communicate-a-numpy-nd-array-as-as-part-of-a-minimal-example", "title": "how to communicate a numpy Nd array as as part of a minimal example?", "body": "<p>What's the best way to communicate array values as part of a minimal example in a python question on StackOverflow or Github?  R has the function <a href=\"https://stat.ethz.ch/R-manual/R-devel/library/base/html/dump.html\" rel=\"nofollow noreferrer\">dump()</a>, which produces a text representation of an object that can then be loaded back into an R session using <a href=\"https://stat.ethz.ch/R-manual/R-devel/library/base/html/source.html\" rel=\"nofollow noreferrer\">source()</a>.  Two lines of R code and someone else has access to the numbers/object/whatever I'm working with.</p>\n\n<p>I want to raise an issue at the <a href=\"http://holoviews.org/index.html\" rel=\"nofollow noreferrer\">holoviews</a>/<a href=\"http://geoviews.org/index.html\" rel=\"nofollow noreferrer\">geoviews</a> GitHub repo about some problems I'm having making regional plots of gridded data.  I suspect that the problem is partially related to nature of my grid, which is a 36x36 irregularly-spaced array of latitudes and longitudes.  </p>\n\n<p>Since it's not that many points I'm thinking it's probably easiest to simply include these coordinates in my question/issue.  I can probably figure out something with <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromstring.html\" rel=\"nofollow noreferrer\">fromstring()</a> and <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html\" rel=\"nofollow noreferrer\">reshape()</a>.  I wondered if there's a more concise way to do it.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1567026204, "post_id": 57699872, "comment_id": 101843953, "body": "The duplicate shows you how to loop on the dict keys to get to the element you want."}], "owner": {"reputation": 11, "user_id": 10654259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZjwrIuWZi8I/AAAAAAAAAAI/AAAAAAAAUeA/SnWtUVdFjiM/photo.jpg?sz=128", "display_name": "VLADIMIR LVI", "link": "https://stackoverflow.com/users/10654259/vladimir-lvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1567026179, "answer_count": 0, "score": 1, "last_activity_date": 1567030726, "creation_date": 1567025411, "last_edit_date": 1567030726, "question_id": 57699872, "link": "https://stackoverflow.com/questions/57699872/how-can-i-update-only-one-key-in-a-dict", "closed_reason": "Duplicate", "title": "How can I update only one key in a dict?", "body": "<p>I have </p>\n\n<pre><code>dict = {\n a: { \n  a1: 1 \n }, \n b : { b1: 2, b2: { b11: 33 } }, \n c : 12 \n}\nkeys_array = ['b', 'b2', 'b11] \nval = 100\n</code></pre>\n\n<p>function should update only one value in dict and return,\nNOT JUST GET IT, I need to update value</p>\n\n<p><code>{a: {a1: 1}, b :{b1: 2, b2: {b11:</code><strong>100</strong><code>}}, c : 12}</code></p>\n\n<p>But my function isn`t so smart like i want</p>\n\n<pre><code>def update(dict, keys_array, val):\n    if len(keys_array) == 1:\n        dict[keys_array[0]] = val\n    if len(keys_array) == 2:\n        dict[keys_array[0]][keys_array[1]] = val\n    if len(keys_array) == 3:\n        dict[keys_array[0]][keys_array[1]][keys_array[2]] = val\n    ...\n</code></pre>\n\n<h1>Solution</h1>\n\n<pre><code>def update(d, val, *keys):\n    if len(keys) &gt;= 1:\n        if keys[0] not in d:\n            d[keys[0]] = {}\n        if len(keys) &gt;= 2:\n            d[keys[0]] = update(d[keys[0]], val, *keys[1:])\n        elif len(keys) == 1:\n            d[keys[0]] = val\n\n    return d```\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567027757, "post_id": 57699869, "comment_id": 101844486, "body": "By the &quot;last 2&quot;, do you mean with respect to their alphabetical filenames, creation dates, modification dates, or what?"}, {"owner": {"reputation": 23, "user_id": 11773125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98dc018f8978c3b32a1787ec2d8882c?s=128&d=identicon&r=PG&f=1", "display_name": "fullyjosh", "link": "https://stackoverflow.com/users/11773125/fullyjosh"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567027904, "post_id": 57699869, "comment_id": 101844528, "body": "I\u2019m looking for the last 2 sorted by Creation date"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567028066, "post_id": 57699869, "comment_id": 101844591, "body": "You can get the last two items in a list with <code>sorted_filelist[-2:]</code>."}, {"owner": {"reputation": 23, "user_id": 11773125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98dc018f8978c3b32a1787ec2d8882c?s=128&d=identicon&r=PG&f=1", "display_name": "fullyjosh", "link": "https://stackoverflow.com/users/11773125/fullyjosh"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567050349, "post_id": 57699869, "comment_id": 101848772, "body": "Yeah I understand that but I need to get to the parent directories and my code example is only getting to sub directories"}], "answers": [{"tags": [], "owner": {"reputation": 518, "user_id": 9107360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6N8AT.png?s=128&g=1", "display_name": "joedeandev", "link": "https://stackoverflow.com/users/9107360/joedeandev"}, "is_accepted": false, "score": 0, "last_activity_date": 1567074142, "creation_date": 1567074142, "answer_id": 57708088, "question_id": 57699869, "link": "https://stackoverflow.com/questions/57699869/finding-the-latest-file-in-each-subdirectory/57708088#57708088", "title": "Finding the latest file in each subdirectory", "body": "<p>Try iterating through the parent directory, and then through all the sub-directories, using os.listdir().</p>\n\n<pre><code>import os\n\nparent_dir = 'path/to/parent/dir'\nfor subdir in os.listdir(parent_dir):\n    if not os.path.isdir(subdir):\n        continue\n    sorted_filelist = sorted(\n        [os.path.join(parent_dir, subdir, f) for f in os.listdir(subdir)\n        if os.path.splitext(f)[1] == '.jpg'],\n        key=os.path.getctime, reverse=True)\n    print(sorted_filelist[:2])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 0, "last_activity_date": 1567177123, "last_edit_date": 1567177123, "creation_date": 1567097510, "answer_id": 57714687, "question_id": 57699869, "link": "https://stackoverflow.com/questions/57699869/finding-the-latest-file-in-each-subdirectory/57714687#57714687", "title": "Finding the latest file in each subdirectory", "body": "<p>I think this will do what you want. Note that I sort the files by their last modification times, rather than their creation time because I think that's the way to determine which are \"most recent\".</p>\n\n<pre><code>import glob\nimport os\n\nN_MOST_RECENT = 2\npath = 'C:\\\\myfiles'\n\nfor entry in os.listdir(path):\n    subpath = os.path.join(path, entry)\n    if os.path.isdir(subpath):\n        for subentry in os.listdir(subpath):\n            subentrypath = os.path.abspath(os.path.join(subpath, subentry))\n            if os.path.isdir(subentrypath):\n                jpg_files = glob.iglob(os.path.join(subentrypath, '*.jpg'))\n                sorted_filenames = sorted(jpg_files, key=os.path.getmtime)\n                # Create list of filenames of the N most recent files.\n                most_recent = [os.path.split(name)[-1] # Extract filename from path.\n                                    for name in sorted_filenames[-N_MOST_RECENT:]]\n                print(f'{N_MOST_RECENT} most recent .jpg files in \"{subentrypath}\":\\n'\n                      f'  {most_recent}')\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11773125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98dc018f8978c3b32a1787ec2d8882c?s=128&d=identicon&r=PG&f=1", "display_name": "fullyjosh", "link": "https://stackoverflow.com/users/11773125/fullyjosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 57714687, "answer_count": 2, "score": 2, "last_activity_date": 1567177123, "creation_date": 1567025403, "last_edit_date": 1567027430, "question_id": 57699869, "link": "https://stackoverflow.com/questions/57699869/finding-the-latest-file-in-each-subdirectory", "title": "Finding the latest file in each subdirectory", "body": "<p>I have the a similar folder structure for which I need to pull the latest .jpg from each subdirectory:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>+ C:\\\\myfiles\n    + parentdir1\n        +  subdir1\n            + somename1.jpg\n            + somename2.jpg\n            + ...\n        + subdir2\n            + somename3.jpg\n            + somename4.jpg\n            + ...\n        + ...\n    + parentdir2\n        +  subdir1\n            + somename5.jpg\n            + somename6.jpg\n            + ...\n        + subdir2\n            + somename7.jpg\n            + somename8.jpg\n            + ...\n        + ...\n    + parentdir3\n        +  subdir1\n            + somename9.jpg\n            + somename10.jpg\n            + ...\n        + subdir2\n            + somename11.jpg\n            + somename12.jpg\n            + ...\n        + ...\n    + ...\n</code></pre>\n\n<p>I don't know any of the names of the folders or files but I need to access the last 2 .jpg files in each subdir.</p>\n\n<p>For the sake of making this simple, let's just assume I need to print the last 2 files created in the subdir.</p>\n\n<p>I wrote a script that will search all subdir's in a given parentdir, but I actually need to go iterate through all parentdir's as well</p>\n\n<pre><code>import os\n\npath = 'C:\\\\myfiles'\nfilelist = []\n\nfor i in range(len(os.listdir(path))):\n    subpath = path + '\\\\' + os.listdir(path)[i]\n    for root, dirs, files in os.walk(subpath):\n        for file in os.listdir(subpath):\n            filelist.append(os.path.join(root, file))\n        sorted_filelist = sorted(filelist, key=os.path.getctime)\n        print('the latest jpg file in ' + root + ' is:  ' + sorted_filelist[-1])\n        print('the 2nd last jpg file in ' + root + ' is:  ' + sorted_filelist[-2])\n    filelist.clear()\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1567025800, "post_id": 57699842, "comment_id": 101843815, "body": "That depends on specifics. E.g. how near you are in terms of memory limitation. What you describe is the optimal approach in terms of peak memory usage (ignoring additional on-the-fly processing of inner arrays), but it is a 2 pass process (so you are paying for time and IO). Appending all of those arrays to a python list before creating a numpy-array in one go consuming the list of arrays will be an alternative way consuming more memory, but not needing 2 passes, no resize-copies and more clean code."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 1, "creation_date": 1567025827, "post_id": 57699842, "comment_id": 101843823, "body": "It is not memory inefficient. It is computationally inefficient because to ensure that the array is contiguous requires allocating and <b>copying</b> the arrays for each concatenation. If you are worried about computational efficiency, you can proceed as you described. If you want to improve your memory efficiency you should use a two pass approach: (1) determine the size of the output by looping through your arrays (unloading arrays at each iteration); (2) populate your output by looping through your arrays again (unloading arrays at each iteration again)."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1567026158, "post_id": 57699842, "comment_id": 101843932, "body": "@sascha I believe that appending to a Python list just hides the second pass in the <code>list</code> to NumPy array conversion."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 1, "creation_date": 1567026329, "post_id": 57699842, "comment_id": 101843997, "body": "(continued) Note that in the first looping you could probably use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html\" rel=\"nofollow noreferrer\"><code>np.memmap()</code></a> since you are only interested in the shape."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1567037473, "post_id": 57699842, "comment_id": 101846534, "body": "Fill us in a couple of details.  What file format are you loading, and which function are you using?  What&#39;s the shape of each array?  Same for all?  Same number of columns but different rows?  What shape should end result have?  And how about the <code>dtype</code>?"}, {"owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "edited": false, "score": 0, "creation_date": 1567037661, "post_id": 57699842, "comment_id": 101846573, "body": "I am loading csv files, using pandas read_csv, each row contains a column for an  int, and then another column for a list of ints. Each of these ints vary, they can be from 2 to 200. For dtype the first column is an int, but I have been playing around with using list and numpy arrays for the 2nd column. The former can save to a smaller space, but the later takes up less RAM"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1567040976, "post_id": 57699842, "comment_id": 101847118, "body": "So what&#39;s the combined array supposed to look like?  I think all the comments assumed you were loading 200 (n,m) shaped numeric arrays, and wanted a (200,n,m) shaped result."}, {"owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "edited": false, "score": 0, "creation_date": 1567041087, "post_id": 57699842, "comment_id": 101847136, "body": "there will be about 14 million rows. The first column of each row is a single int. The second column is a list of numpy array of ints, which range from 2 to 200."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1567043310, "post_id": 57699842, "comment_id": 101847511, "body": "So you&#39;ll have a (14M, 2) shaped object dtype array.  Each element of the array points to one of those 14M small lists/arrays.  Most of the memory use will be in those small arrays which will be scattered through out memory.  All your joining does it combine the rows of pointers.  Most comments about efficient memory use and copies don&#39;t apply."}], "owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567025281, "creation_date": 1567025281, "question_id": 57699842, "link": "https://stackoverflow.com/questions/57699842/most-memory-efficient-way-to-combining-many-numpy-arrays", "title": "Most memory efficient way to combining many numpy arrays", "body": "<p>I have about 200 numpy arrays saved as files, and I would like to combine them into one big array. Currently I am doing that by using a loop and concatenating each one individually. But I heard this is memory inefficient, because concatenating also makes a copy</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7869095/concatenate-numpy-arrays-without-copying/7869472#7869472\">Concatenate Numpy arrays without copying</a></p>\n\n<blockquote>\n  <p>If you know beforehand how many arrays you need, you can instead start\n  with one big array that you allocate beforehand, and have each of the\n  small arrays be a view to the big array (e.g. obtained by slicing).</p>\n</blockquote>\n\n<p>So I am wondering if I should instead load each numpy array individually, count the row size off all the numpy arrays, create a new numpy array of this new row size, and then copy each smaller numpy array individually, and then delete that numpy array. Or is there some aspect of this I am not taking into account? </p>\n"}, {"tags": ["python", "django", "serialization", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11991161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f9268f6f4e524616d903b2f832cdf1?s=128&d=identicon&r=PG&f=1", "display_name": "peterkowalski", "link": "https://stackoverflow.com/users/11991161/peterkowalski"}, "is_accepted": true, "score": 0, "last_activity_date": 1567028993, "creation_date": 1567028993, "answer_id": 57700462, "question_id": 57699805, "link": "https://stackoverflow.com/questions/57699805/create-nested-object-1-1-relationship-from-flattened-post-request/57700462#57700462", "title": "Create nested object (1-1 relationship) from flattened POST request", "body": "<p>Overriding <code>to_internal_value()</code> and <code>to_representation()</code> wasn't correct approach. </p>\n\n<p>I've created only one serializer with all fields and overriden <code>create()</code> method:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class UserProfileSerializer(serializers.ModelSerializer):\n    username = serializers.CharField(source=\"user.username\")\n    password = serializers.CharField(\n        source=\"user.password\",\n        write_only=True,\n        required=True,\n        style={\"input_type\": \"password\"},\n    )\n    first_name = serializers.CharField(source=\"user.first_name\")\n    last_name = serializers.CharField(source=\"user.last_name\")\n    email = serializers.EmailField(source=\"user.email\")\n\n    def create(self, validated_data):\n        user_data = validated_data.pop(\"user\")\n        user = User.objects.create(**user_data)\n        user.set_password(user_data[\"password\"])\n        user.save()\n\n        profile = UserProfile.objects.create(user=user, **validated_data)\n        return profile\n\n    class Meta:\n        model = UserProfile\n        fields = (\n            \"username\",\n            \"password\",\n            \"first_name\",\n            \"last_name\",\n            \"email\",\n            \"date_updated\",\n            \"street\",\n            \"street_number\",\n            \"flat_number\",\n            \"zip_code\",\n            \"city\",\n            \"province\",\n            \"phone_number\",\n        )\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11991161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f9268f6f4e524616d903b2f832cdf1?s=128&d=identicon&r=PG&f=1", "display_name": "peterkowalski", "link": "https://stackoverflow.com/users/11991161/peterkowalski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 57700462, "answer_count": 1, "score": 2, "last_activity_date": 1567028993, "creation_date": 1567025076, "question_id": 57699805, "link": "https://stackoverflow.com/questions/57699805/create-nested-object-1-1-relationship-from-flattened-post-request", "title": "Create nested object (1-1 relationship) from flattened POST request", "body": "<p>I'm trying to implement two serializer classes which will allow me to create both user and profile objects from a flattened POST request.</p>\n\n<p>I tried the implementation described <a href=\"https://stackoverflow.com/questions/21381700/django-rest-framework-how-do-you-flatten-nested-data\">here</a> and it works perfectly fine for updating (<strong>and only updating</strong>) existing objects.</p>\n\n<p>Here is my current implementation:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># serializers.py\nclass UserSerializer(serializers.ModelSerializer):\n    password = serializers.CharField(\n        write_only=True, required=True, style={\"input_type\": \"password\"}\n    )\n\n    class Meta:\n        model = User\n        fields = (\n            \"username\",\n            \"password\",\n            # ...\n            \"date_joined\",\n        )\n        read_only_fields = (\"date_joined\")\n\n\nclass UserProfileSerializer(serializers.ModelSerializer):\n    user = UserSerializer()\n\n    def to_representation(self, instance):\n        representation = super().to_representation(instance)\n        representation.update(representation.pop(\"user\"))\n        return representation\n\n    def to_internal_value(self, data):\n        user_internal = {}\n        for key in UserSerializer.Meta.fields:\n            if key in data:\n                user_internal[key] = data.pop(key)\n\n        internal = super().to_internal_value(data)\n        internal[\"user\"] = user_internal\n        return internal\n\n    def create(self, validated_data):\n        user_data = validated_data.pop(\"user\")\n        user = User.objects.create(**user_data)\n        user.set_password(user_data[\"password\"])\n        user.save()\n\n        profile = UserProfile.objects.create(user=user, **validated_data)\n        return profile\n\n    class Meta:\n        model = UserProfile\n        fields = (\n            \"user\",\n            \"date_updated\",\n            # ...\n            \"phone_number\",\n        )\n\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code># views.py\nclass Register(generics.CreateAPIView):\n    serializer_class = UserProfileSerializer\n    name = \"userprofile-create\"\n</code></pre>\n\n<p>I expect the app to take the flattened JSON and create both user and profile objects.</p>\n\n<p>Example POST body:</p>\n\n<pre><code>{\n    \"username\": \"test_user\",\n    \"password\": \"P@$$w0rd\",\n    \"first_name\": \"Foo\",\n    \"last_name\": \"Boo\",\n    \"email\": \"foo@example.com\",\n    \"street\": \"Random Street\",\n    \"street_number\": \"11\",\n    \"flat_number\": \"11\",\n    \"zip_code\": \"11-111\",\n    \"city\": \"Some City\",\n    \"province\": 1,\n    \"phone_number\": \"111222333\"\n}\n</code></pre>\n\n<p>When I'm browsing through the API, the view still expects JSON with nested User object:</p>\n\n<pre><code>{\n    \"user\": {\n        \"username\": \"\",\n        \"password\": \"\",\n        \"first_name\": \"\",\n        \"last_name\": \"\",\n        \"email\": \"\"\n    },\n    \"street\": \"\",\n    \"street_number\": \"\",\n    \"flat_number\": \"\",\n    \"zip_code\": \"\",\n    \"city\": \"\",\n    \"province\": null,\n    \"phone_number\": \"\"\n}\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1567025058, "post_id": 57699790, "comment_id": 101843509, "body": "can you explain more on output?"}, {"owner": {"reputation": 257, "user_id": 11690491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ea6f0ee563e434e9678acee8e4283e?s=128&d=identicon&r=PG&f=1", "display_name": "benrussell80", "link": "https://stackoverflow.com/users/11690491/benrussell80"}, "reply_to_user": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1567028522, "post_id": 57699790, "comment_id": 101844743, "body": "Sure of course. Let&#39;s say my list has a run of 2 zeroes, 2 ones, 1 zero, 3 ones, then 2 zeros. Then I want the output to tell me that for zeroes I have 1 run of 0&#39;s, and 2 runs of two 0&#39;s. For ones I have 1 run of two 1&#39;s and 1 run of three 1&#39;s. Preferably, this would be outputted in a nested dictionary/JSON-like format but any other way is fine too. Hopefully that clears it up"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 11690491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ea6f0ee563e434e9678acee8e4283e?s=128&d=identicon&r=PG&f=1", "display_name": "benrussell80", "link": "https://stackoverflow.com/users/11690491/benrussell80"}, "edited": false, "score": 0, "creation_date": 1567028785, "post_id": 57699912, "comment_id": 101844822, "body": "Wow! Didn&#39;t even think that would have been the problem. That fixes it, thank you so much. Is there a better way to create a nested dictionary like this from a list of keys?"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1567029066, "last_edit_date": 1567029066, "creation_date": 1567025610, "answer_id": 57699912, "question_id": 57699790, "link": "https://stackoverflow.com/questions/57699790/how-to-find-the-number-of-every-length-of-contiguous-sequences-of-values-in-a-li/57699912#57699912", "title": "How to find the number of every length of contiguous sequences of values in a list?", "body": "<p>You're suffering from Ye Olde Replication Error.  Let's instrument your function to show the problem, adding one line to check the object ID of each dict in the list:</p>\n\n<pre><code>lengths = dict.fromkeys(arr, {})\nprint(id(lengths[0]), id(lengths[1]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>140130522360928 140130522360928\n{0: {2: 2, 1: 1, 3: 1}, 1: {2: 2, 1: 1, 3: 1}}\n</code></pre>\n\n<p>The problem is that you gave the <em>same</em> dict as initial value for each key.  When you update either of them, you're changing the <em>one</em> object to which they both refer.</p>\n\n<p>Replace it with an explicit loop -- not a mutable function argument -- that will create a new object for each dict entry:</p>\n\n<pre><code>for key in lengths:\n    lengths[key] = {}\nprint(id(lengths[0]), id(lengths[1]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>139872021765576 139872021765288\n{0: {2: 1, 1: 1}, 1: {2: 1, 3: 1}}\n</code></pre>\n\n<p>Now you have separate objects.</p>\n\n<p>If you want a one-liner, use a dict comprehension:</p>\n\n<pre><code>lengths = {key: {} for key in lengths}\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 11690491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ea6f0ee563e434e9678acee8e4283e?s=128&d=identicon&r=PG&f=1", "display_name": "benrussell80", "link": "https://stackoverflow.com/users/11690491/benrussell80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57699912, "answer_count": 1, "score": 1, "last_activity_date": 1567029293, "creation_date": 1567024984, "last_edit_date": 1567029293, "question_id": 57699790, "link": "https://stackoverflow.com/questions/57699790/how-to-find-the-number-of-every-length-of-contiguous-sequences-of-values-in-a-li", "title": "How to find the number of every length of contiguous sequences of values in a list?", "body": "<h1>Problem</h1>\n\n<p>Given a sequence (list or numpy array) of 1's and 0's how can I find the number of contiguous sub-sequences of values? I want to return a JSON-like dictionary of dictionaries.</p>\n\n<h1>Example</h1>\n\n<p><code>[0, 0, 1, 1, 0, 1, 1, 1, 0, 0]</code> would return </p>\n\n<pre><code>{\n  0: {\n        1: 1,\n        2: 2\n  },\n  1: {\n        2: 1,\n        3: 1\n  }\n\n}\n</code></pre>\n\n<h1>Tried</h1>\n\n<p>This is the function I have so far</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def foo(arr):\n    prev = arr[0]\n    count = 1\n\n    lengths = dict.fromkeys(arr, {})\n\n    for i in arr[1:]:\n        if i == prev:\n            count += 1\n        else:\n            if count in lengths[prev].keys():\n                lengths[prev][count] += 1\n            else:\n                lengths[prev][count] = 1\n\n            prev = i\n            count = 1\n\n    return lengths\n</code></pre>\n\n<p>It is outputting identical dictionaries for 0 and 1 even if their appearance in the list is different. And this function isn't picking up the last value. How can I improve and fix it? Also, does numpy offer any quicker ways to solve my problem if my data is in a numpy array? (maybe using <code>np.where(...)</code>)</p>\n"}, {"tags": ["python", "python-3.x", "telegram", "telegram-bot"], "owner": {"reputation": 33, "user_id": 10664862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RxHKL.jpg?s=128&g=1", "display_name": "ramin kazemi", "link": "https://stackoverflow.com/users/10664862/ramin-kazemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567024858, "creation_date": 1567024858, "question_id": 57699769, "link": "https://stackoverflow.com/questions/57699769/how-to-make-keyboard-button-message-text-different-from-its-caption-in-telegram", "title": "How to make Keyboard Button message text different from its caption in Telegram bot API using Python", "body": "<p>i need my bot to print a different message than its caption</p>\n\n<p>for example : button text = Turkish To English<br>\n              print message = /Turkish_To_English</p>\n\n<pre><code>def Start_Method(bot, update):\nchat_id = update.message.chat_id\nbot.sendChatAction(chat_id, 'typing')\nUser_name = update.message.chat.first_name\nbot.sendMessage(chat_id, 'Welcome Dear')\nkeyboard = [['Turkish To English'],\n            ['Turkish To Persian']]\n\nbot.sendMessage(chat_id, 'Select : ', reply_markup=ReplyKeyboardMarkup(keyboard, resize_keyboard=True, one_time_keyboard=True))\n</code></pre>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 2, "creation_date": 1567024938, "post_id": 57699754, "comment_id": 101843451, "body": "Go with the first option. Using a list comp for a side effect is an anti-pattern."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1567025029, "post_id": 57699754, "comment_id": 101843495, "body": "Note, python actually has a function for setting an attribute with a string, <code>settattr(obj, &#39;some_attribute_name&#39;, value)</code> but still, you should never use list-comprehensions for side-effects. I would say that in general, all functional programming constructs shouldn&#39;t be used for side-effects. It is not idiomatic, and will be confusing to readers."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1567025302, "post_id": 57699754, "comment_id": 101843604, "body": "Also, in general, note that for loops can almost always be considered pythonic, especially if you use the idiomatic looping constructs. List comprehensions and similar constructs are sugar, they are there for writing clean code, in the world of Python which is very much an imperative, object-oriented language, for-loops are about as idiomatic as it gets. Let me put it this way, I would never reject code in a review for having an equivalent for-loop instead of a list comprehension,  but I would certainly do it for the reverse situation."}], "owner": {"reputation": 1730, "user_id": 674301, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97e523edc8aabe111dba9f2a8e9e2da6?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/674301/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1567024948, "answer_count": 0, "score": 1, "last_activity_date": 1567024781, "creation_date": 1567024781, "question_id": 57699754, "link": "https://stackoverflow.com/questions/57699754/how-to-update-instances-of-a-class-in-a-list", "closed_reason": "Duplicate", "title": "How to update instances of a class in a list", "body": "<p>Let's say I have a bunch of instances of the following class:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Test:\n\n    def __init__(self):\n        self.x = 1\n\ntests = [Test() for _ in range(10)]\n</code></pre>\n\n<p>Now, let's say I want to update <code>x</code> for each of the instances to <code>range(10)</code>. What's a good, pythonic way to do that?</p>\n\n<p>The most straightforward would be something like:</p>\n\n<pre><code>for t, val in zip(tests,range(10)):\n    t.x = val\n</code></pre>\n\n<p>Is it possible to do it in a list comprehension?</p>\n\n<pre><code>[z[0].x = z[1] for z in zip(tests, range(10))]\n</code></pre>\n\n<p>gives an error. I guess you could add a setter method in the function and call that?</p>\n\n<pre><code>class Test:\n\n    def __init__(self):\n        self.x = 1\n\n    def setter(self, val):\n        self.x = val\n\ntests = [Test() for _ in range(10)]\n\n[z[0].setter(z[1]) for z in zip(tests, range(10)]\n</code></pre>\n\n<p>The for loop starts to look better and better. Is that the way to go?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1567025638, "post_id": 57699734, "comment_id": 101843747, "body": "You want the max date and min date for each user, right?"}], "answers": [{"comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1567027846, "post_id": 57700193, "comment_id": 101844511, "body": "I think <code>freq = &#39;MS&#39;</code>"}, {"owner": {"reputation": 919, "user_id": 1855988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7469d9cc0417b2063f6e8c58917826?s=128&d=identicon&r=PG", "display_name": "J.K", "link": "https://stackoverflow.com/users/1855988/j-k"}, "edited": false, "score": 0, "creation_date": 1567028247, "post_id": 57700193, "comment_id": 101844655, "body": "Any ideas why I am receiving this error : &#39;DataFrame&#39; object has no attribute &#39;explode&#39;"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 919, "user_id": 1855988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7469d9cc0417b2063f6e8c58917826?s=128&d=identicon&r=PG", "display_name": "J.K", "link": "https://stackoverflow.com/users/1855988/j-k"}, "edited": false, "score": 1, "creation_date": 1567028301, "post_id": 57700193, "comment_id": 101844670, "body": "@J.K the <code>explode</code> method is available for pandas versions 0.25.0+. Check your version with <code>print(pd.__version__)</code>"}, {"owner": {"reputation": 2117, "user_id": 11747861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92db693df0ca6e7ed60791abfcf30420?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Wang", "link": "https://stackoverflow.com/users/11747861/mark-wang"}, "edited": false, "score": 0, "creation_date": 1567029216, "post_id": 57700193, "comment_id": 101844939, "body": "<code>.tolist()</code> is not necessary. List like is enough for <code>explode</code>"}, {"owner": {"reputation": 919, "user_id": 1855988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7469d9cc0417b2063f6e8c58917826?s=128&d=identicon&r=PG", "display_name": "J.K", "link": "https://stackoverflow.com/users/1855988/j-k"}, "edited": false, "score": 1, "creation_date": 1567029435, "post_id": 57700193, "comment_id": 101844994, "body": "@rafaelc, I solved the answer using apply in the 10 min. then I spent more than an hour trying to explode the cell :). Thank you ! , I added my solution as an answer below."}, {"owner": {"reputation": 31, "user_id": 11991231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24eca1a1842aed39f4ec565a49e8e149?s=128&d=identicon&r=PG&f=1", "display_name": "J.H", "link": "https://stackoverflow.com/users/11991231/j-h"}, "edited": false, "score": 0, "creation_date": 1567172927, "post_id": 57700193, "comment_id": 101896166, "body": "Thanks for all the inputs. However, the method did not work out for me. I got an value error saying that the dimension of value passed is not the same as the index implied. I guess the reason is that the number of activity dates for each User ID is not identical. My pandas version is still 0.20.3. This might be part of the reason."}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 4, "last_activity_date": 1567027232, "creation_date": 1567027232, "answer_id": 57700193, "question_id": 57699734, "link": "https://stackoverflow.com/questions/57699734/how-do-i-generate-observations-between-two-dates-using-pandas/57700193#57700193", "title": "How do I generate observations between two dates using Pandas", "body": "<p>Use <code>pd.date_range</code> to generate dates from your start date to your end date. I have set the frequency to 30 days by doing <code>freq=30D</code> - choose whatever convenient for you.</p>\n\n<pre><code>df['Activity Date'] = df.apply(lambda s: pd.date_range(s['Start Date'], s['End Date'], freq='30D').tolist(), 1)\ndf = df.explode('Activity Date')\n</code></pre>\n\n<hr>\n\n<pre><code>   User ID Start Date   End Date Activity Date\n0        1 2000-01-01 2000-03-01    2000-01-01\n0        1 2000-01-01 2000-03-01    2000-01-31\n0        1 2000-01-01 2000-03-01    2000-03-01\n1        2 2002-01-01 2002-08-01    2002-01-01\n1        2 2002-01-01 2002-08-01    2002-01-31\n1        2 2002-01-01 2002-08-01    2002-03-02\n1        2 2002-01-01 2002-08-01    2002-04-01\n1        2 2002-01-01 2002-08-01    2002-05-01\n1        2 2002-01-01 2002-08-01    2002-05-31\n1        2 2002-01-01 2002-08-01    2002-06-30\n1        2 2002-01-01 2002-08-01    2002-07-30\n2       10 2003-03-01 2004-01-01    2003-03-01\n2       10 2003-03-01 2004-01-01    2003-03-31\n2       10 2003-03-01 2004-01-01    2003-04-30\n2       10 2003-03-01 2004-01-01    2003-05-30\n2       10 2003-03-01 2004-01-01    2003-06-29\n2       10 2003-03-01 2004-01-01    2003-07-29\n2       10 2003-03-01 2004-01-01    2003-08-28\n2       10 2003-03-01 2004-01-01    2003-09-27\n2       10 2003-03-01 2004-01-01    2003-10-27\n2       10 2003-03-01 2004-01-01    2003-11-26\n2       10 2003-03-01 2004-01-01    2003-12-26\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1567028397, "creation_date": 1567028397, "answer_id": 57700378, "question_id": 57699734, "link": "https://stackoverflow.com/questions/57699734/how-do-i-generate-observations-between-two-dates-using-pandas/57700378#57700378", "title": "How do I generate observations between two dates using Pandas", "body": "<h3>Comprehension</h3>\n\n<pre><code>pd.DataFrame([\n    t + (d,) for t in zip(*map(df.get, df))\n    for d in pd.date_range(t[1], t[2], freq='MS')\n], columns=[*df, 'Activity Date'])\n\n    User ID  Start Date    End Date Activity Date\n0         1  2000-01-01  2000-03-01    2000-01-01\n1         1  2000-01-01  2000-03-01    2000-02-01\n2         1  2000-01-01  2000-03-01    2000-03-01\n3         2  2002-01-01  2002-08-01    2002-01-01\n4         2  2002-01-01  2002-08-01    2002-02-01\n5         2  2002-01-01  2002-08-01    2002-03-01\n6         2  2002-01-01  2002-08-01    2002-04-01\n7         2  2002-01-01  2002-08-01    2002-05-01\n8         2  2002-01-01  2002-08-01    2002-06-01\n9         2  2002-01-01  2002-08-01    2002-07-01\n10        2  2002-01-01  2002-08-01    2002-08-01\n11       10  2003-03-01  2004-01-01    2003-03-01\n12       10  2003-03-01  2004-01-01    2003-04-01\n13       10  2003-03-01  2004-01-01    2003-05-01\n14       10  2003-03-01  2004-01-01    2003-06-01\n15       10  2003-03-01  2004-01-01    2003-07-01\n16       10  2003-03-01  2004-01-01    2003-08-01\n17       10  2003-03-01  2004-01-01    2003-09-01\n18       10  2003-03-01  2004-01-01    2003-10-01\n19       10  2003-03-01  2004-01-01    2003-11-01\n20       10  2003-03-01  2004-01-01    2003-12-01\n21       10  2003-03-01  2004-01-01    2004-01-01\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 1855988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7469d9cc0417b2063f6e8c58917826?s=128&d=identicon&r=PG", "display_name": "J.K", "link": "https://stackoverflow.com/users/1855988/j-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1567045044, "last_edit_date": 1567045044, "creation_date": 1567029365, "answer_id": 57700517, "question_id": 57699734, "link": "https://stackoverflow.com/questions/57699734/how-do-i-generate-observations-between-two-dates-using-pandas/57700517#57700517", "title": "How do I generate observations between two dates using Pandas", "body": "<p>Another solution is to use apply method, row by row, and then explode the acitivitydate column. </p>\n\n<p>Create new dataframe and convert strings to datetime : </p>\n\n<pre><code>import pandas as pd\nfrom datetime import timedelta \n\nd = {'User ID': [1], 'Start Date': ['2000-01-01'],'End Date':['2000-01-10']}\ndf1 = pd.DataFrame(data=d)\n\ndf1['Start Date'] = pd.to_datetime(df1['Start Date'])\ndf1['End Date'] = pd.to_datetime(df1['End Date'])\ndf1\n</code></pre>\n\n<p>df1 : </p>\n\n<pre><code>    User ID Start Date  End Date\n0   1   2000-01-01  2000-01-05\n1   2   2000-02-01  2000-02-20\n</code></pre>\n\n<p>For each row, pass the start and the end date to the function \"check\" : </p>\n\n<pre><code>df1['ActivityDate'] = df1.apply(lambda row: check(row['Start Date'],row['End Date']),axis=1)\ndf1 = df1.explode('ActivityDate')  \ndf1\n</code></pre>\n\n<p>Result : </p>\n\n<pre><code>    User ID Start Date  End Date    ActivityDate\n0   1   2000-01-01  2000-01-10  2000-01-01\n0   1   2000-01-01  2000-01-10  2000-01-02\n0   1   2000-01-01  2000-01-10  2000-01-03\n0   1   2000-01-01  2000-01-10  2000-01-04\n0   1   2000-01-01  2000-01-10  2000-01-05\n0   1   2000-01-01  2000-01-10  2000-01-06\n0   1   2000-01-01  2000-01-10  2000-01-07\n0   1   2000-01-01  2000-01-10  2000-01-08\n0   1   2000-01-01  2000-01-10  2000-01-09\n0   1   2000-01-01  2000-01-10  2000-01-10\n</code></pre>\n\n<p>A Simple function below to get all dates between the start and the end date, and return the result as an array. This function will be called once for each row. </p>\n\n<pre><code>def check(start,end):  \n    Result = []\n    while start &lt;= end:\n        Result.append(start)\n        start = start + timedelta(days=1)\n    return Result\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11991231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24eca1a1842aed39f4ec565a49e8e149?s=128&d=identicon&r=PG&f=1", "display_name": "J.H", "link": "https://stackoverflow.com/users/11991231/j-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1567045044, "creation_date": 1567024654, "last_edit_date": 1567024761, "question_id": 57699734, "link": "https://stackoverflow.com/questions/57699734/how-do-i-generate-observations-between-two-dates-using-pandas", "title": "How do I generate observations between two dates using Pandas", "body": "<p>I have a dataset in the following format:</p>\n\n<pre><code>User ID   Start Date   End Date\n1         '2000-01-01' '2000-03-01'\n2         '2002-01-01' '2002-08-01'\n...         ....         ....\n10        '2003-03-01' '2004-01-01'\n</code></pre>\n\n<p>How do I generate a dataset with each date between the start date and the end date for each user as follows:</p>\n\n<pre><code>User ID   Start Date  End Date      Activity Date\n1         '2000-01-01' '2000-03-01' '2000-01-01'\n1         '2000-01-01' '2000-03-01' '2000-02-01' \n1         '2000-01-01' '2000-03-01' '2000-03-01' \n2         '2002-01-01' '2002-08-01'  '2002-01-01'\n...         ....           ...           ...\n2         '2002-01-01' '2002-08-01'  '2002-07-01'\n2         '2002-01-01' '2002-08-01'  '2002-08-01'\n...         ....           ...           ...\n...         ....           ...           ...\n10        '2003-03-01' '2004-01-01'  '2003-03-01'\n10        '2003-03-01' '2004-01-01'  '2003-04-01'\n...         ....           ...           ...\n...         ....           ...           ...\n10        '2003-03-01' '2004-01-01'  '2003-12-01'\n10        '2003-03-01' '2004-01-01'  '2004-01-01'\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tornado", "python-asyncio"], "answers": [{"comments": [{"owner": {"reputation": 1514, "user_id": 3553024, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b13b527f74f2ff45154e896d6b24278?s=128&d=identicon&r=PG&f=1", "display_name": "jdesilvio", "link": "https://stackoverflow.com/users/3553024/jdesilvio"}, "edited": false, "score": 0, "creation_date": 1567083261, "post_id": 57701773, "comment_id": 101863400, "body": "I got it to work by changing the wrapper to:     <code>executor = ThreadPoolExecutor(max_workers=1);</code>     <code>return executor.submit(fn, *args, **kwargs)</code>"}], "tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": true, "score": 3, "last_activity_date": 1567041225, "creation_date": 1567041225, "answer_id": 57701773, "question_id": 57699727, "link": "https://stackoverflow.com/questions/57699727/general-solution-to-offloading-blocking-function-to-executor-in-tornado-app/57701773#57701773", "title": "General solution to offloading blocking function to executor in Tornado app", "body": "<p>Exiting a <code>with ThreadPoolExecutor</code> block waits (synchronously!) for all tasks on the executor to finish. You can't shut down an executor while the IOLoop is running; just make a global run and let it run forever. </p>\n"}], "owner": {"reputation": 1514, "user_id": 3553024, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b13b527f74f2ff45154e896d6b24278?s=128&d=identicon&r=PG&f=1", "display_name": "jdesilvio", "link": "https://stackoverflow.com/users/3553024/jdesilvio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "accepted_answer_id": 57701773, "answer_count": 1, "score": 3, "last_activity_date": 1567041225, "creation_date": 1567024618, "question_id": 57699727, "link": "https://stackoverflow.com/questions/57699727/general-solution-to-offloading-blocking-function-to-executor-in-tornado-app", "title": "General solution to offloading blocking function to executor in Tornado app", "body": "<p>I am trying to find a general solution for offloading blocking tasks to a <code>ThreadPoolExecutor</code>.</p>\n\n<p>In the example below, I can achieve the desired non-blocking result in the <code>NonBlockingHandler</code> using Tornado's <code>run_on_executor</code> decorator.</p>\n\n<p>In the <code>asyncify</code> decorator, I am trying to accomplish the same thing, but it blocks other calls.</p>\n\n<p>Any ideas how to get the <code>asyncify</code> decorator to work correctly and not cause the decorated function to block?</p>\n\n<p><strong>NOTE:</strong> I am using Python 3.6.8 and Tornado 4.5.3</p>\n\n<p>Here is the full working example:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import asyncio\nfrom concurrent.futures import ThreadPoolExecutor\nimport functools\nimport time\n\nfrom tornado.concurrent import Future,  run_on_executor\nimport tornado.ioloop\nimport tornado.web\n\n\ndef asyncify(func):\n    @functools.wraps(func)\n    async def wrapper(*args, **kwargs):\n        result = Future()\n\n        def _run_on_executor(fn):\n            @functools.wraps(fn)\n            def wrapper(*args, **kwargs):\n                with ThreadPoolExecutor(max_workers=1) as executor:\n                    return executor.submit(fn, *args, **kwargs)\n            return wrapper\n\n        @_run_on_executor\n        def _func(*args, **kwargs):\n            return func(*args, **kwargs)\n\n        def on_response(response):\n           result.set_result(response.result())\n\n        future = _func(*args, **kwargs)\n        future.add_done_callback(on_response)\n\n        return await result\n    return wrapper\n\n\nclass MainHandler(tornado.web.RequestHandler):\n    def get(self):\n        self.write(f\"Hello, {self.__class__.__name__}\")\n\n\nclass AsyncifyHandler(tornado.web.RequestHandler):\n    @asyncify\n    def get(self):\n        print(\"sleeping\")\n        time.sleep(5)\n        self.write(f\"Hello, {self.__class__.__name__}\")\n\n\nclass NonBlockingHandler(tornado.web.RequestHandler):\n    executor = ThreadPoolExecutor(max_workers=1)\n\n    @run_on_executor\n    def blocking(self):\n        print(\"sleeping\")\n        time.sleep(5)\n        self.write(f\"Hello, {self.__class__.__name__}\")\n\n    async def get(self):\n        result = Future()\n        publish = self.blocking()\n        publish.add_done_callback(\n            lambda response: result.set_result(response.result())\n        )\n        return await result\n\n\ndef make_app():\n    return tornado.web.Application([\n        (r\"/\", MainHandler),\n        (r\"/asyncify\", AsyncifyHandler),\n        (r\"/noblock\", NonBlockingHandler),\n    ], debug=True)\n\n\nif __name__ == \"__main__\":\n    app = make_app()\n    app.listen(8888)\n    tornado.ioloop.IOLoop.current().start()\n</code></pre>\n\n\n"}, {"tags": ["python", "python-2.7", "cx-oracle"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1567024791, "post_id": 57699716, "comment_id": 101843405, "body": "Edit the question to include the full error stack trace message."}, {"owner": {"reputation": 93, "user_id": 5890223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720c0849c16793a560914531bd6aba5c?s=128&d=identicon&r=PG&f=1", "display_name": "Bee", "link": "https://stackoverflow.com/users/5890223/bee"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1567025228, "post_id": 57699716, "comment_id": 101843572, "body": "@JohnGordon I left the full error message out because it is all my company&#39;s own python files, and won&#39;t mean anything to people reading this."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1567025797, "post_id": 57699716, "comment_id": 101843814, "body": "Without seeing the full trace, I don&#39;t know how to help further.  It seems like the error must be in your code somewhere."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 5890223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720c0849c16793a560914531bd6aba5c?s=128&d=identicon&r=PG&f=1", "display_name": "Bee", "link": "https://stackoverflow.com/users/5890223/bee"}, "is_accepted": true, "score": 0, "last_activity_date": 1567094739, "creation_date": 1567094739, "answer_id": 57714015, "question_id": 57699716, "link": "https://stackoverflow.com/questions/57699716/python-error-iterating-over-a-cx-oracle-result-set/57714015#57714015", "title": "Python Error Iterating Over a cx_Oracle Result Set", "body": "<p>Turns out this is a bug in cx_Oracle-6.0b2, which is the version I was using.</p>\n\n<p><a href=\"https://github.com/oracle/python-cx_Oracle/issues/86\" rel=\"nofollow noreferrer\">https://github.com/oracle/python-cx_Oracle/issues/86</a></p>\n\n<p>Upgrading to cx_Oracle-7 fixed the problem.</p>\n"}], "owner": {"reputation": 93, "user_id": 5890223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720c0849c16793a560914531bd6aba5c?s=128&d=identicon&r=PG&f=1", "display_name": "Bee", "link": "https://stackoverflow.com/users/5890223/bee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57714015, "answer_count": 1, "score": 1, "last_activity_date": 1567094739, "creation_date": 1567024573, "question_id": 57699716, "link": "https://stackoverflow.com/questions/57699716/python-error-iterating-over-a-cx-oracle-result-set", "title": "Python Error Iterating Over a cx_Oracle Result Set", "body": "<p>I have some code that iterates over a cx_oracle result set like so:</p>\n\n<pre><code>for row in out_cursor:\n    #do stuff\n    print row\n</code></pre>\n\n<p>out_cursor is a cx_oracle Cursor object. This code usually works, but sometimes I get an error like this:</p>\n\n<pre><code>for row in out_cursor:\nValueError: invalid literal for int() with base 10: '2.48752'\n</code></pre>\n\n<p>I think I am misunderstanding some fundamental concepts, because that error does not make sense to me. Why does row have to be an int? When that code works, the row that is printed is not an int, it's a list of lots of different data types. </p>\n\n<p>I'm having a hard time researching this problem. I've looked all over but don't really know what to search for! I'm hoping I'm missing something obvious that one of you stack-overflow-ers can point out to me!</p>\n"}, {"tags": ["python", "matplotlib", "graph", "annotations"], "comments": [{"owner": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "reply_to_user": {"reputation": 98, "user_id": 5982697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff5973054e8f7f188d2ce9e2619dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Heath", "link": "https://stackoverflow.com/users/5982697/heath"}, "edited": false, "score": 0, "creation_date": 1567027825, "post_id": 57699685, "comment_id": 101844501, "body": "@Heath the difference is that here the OP wants a pre-defined number of bins, which is not simply done with <code>Wr_Spr_Conv.plot(kind=&#39;bar&#39;, align=&#39;center&#39;)</code>."}, {"owner": {"reputation": 98, "user_id": 5982697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff5973054e8f7f188d2ce9e2619dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Heath", "link": "https://stackoverflow.com/users/5982697/heath"}, "reply_to_user": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "edited": false, "score": 0, "creation_date": 1567027988, "post_id": 57699685, "comment_id": 101844563, "body": "@jojo I think this answer should still work: <a href=\"https://stackoverflow.com/a/28931750/5982697\">stackoverflow.com/a/28931750/5982697</a>"}, {"owner": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "reply_to_user": {"reputation": 98, "user_id": 5982697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff5973054e8f7f188d2ce9e2619dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Heath", "link": "https://stackoverflow.com/users/5982697/heath"}, "edited": false, "score": 0, "creation_date": 1567028378, "post_id": 57699685, "comment_id": 101844695, "body": "@Heath if you can explain to me where in <a href=\"https://stackoverflow.com/questions/28931224/adding-value-labels-on-a-matplotlib-bar-chart/28931750#28931750\" title=\"adding value labels on a matplotlib bar chart\">stackoverflow.com/questions/28931224/&hellip;</a> the number of bins is set (independent on the number of data points - so for example use 3 bins) then I&#39;ll also vote for a duplicate."}, {"owner": {"reputation": 98, "user_id": 5982697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff5973054e8f7f188d2ce9e2619dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Heath", "link": "https://stackoverflow.com/users/5982697/heath"}, "edited": false, "score": 0, "creation_date": 1567030377, "post_id": 57699685, "comment_id": 101845215, "body": "Ah I see, I think it is a bit different (they&#39;re putting the labels in different spots, on the axis vs above the bars). However independent of the bin count being set explicitly, the same method can be used to set the labels, which I understood as the main question the OP was looking to solve. Something like this: <a href=\"https://gist.github.com/heathhenley/2237984e43d5e751ce8d9b45d892a812\" rel=\"nofollow noreferrer\">gist.github.com/heathhenley/2237984e43d5e751ce8d9b45d892a812</a>"}, {"owner": {"reputation": 85, "user_id": 11968163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aECbK.jpg?s=128&g=1", "display_name": "Moo10000", "link": "https://stackoverflow.com/users/11968163/moo10000"}, "edited": false, "score": 0, "creation_date": 1567032690, "post_id": 57699685, "comment_id": 101845686, "body": "It is true that I asked a similar question, however I deleted that post because I had written my question poorly.  I am going to try the posted answer later"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 11968163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aECbK.jpg?s=128&g=1", "display_name": "Moo10000", "link": "https://stackoverflow.com/users/11968163/moo10000"}, "edited": false, "score": 0, "creation_date": 1567045451, "post_id": 57700173, "comment_id": 101847892, "body": "Will try with the dataset in the morning, much thanks !"}, {"owner": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "reply_to_user": {"reputation": 85, "user_id": 11968163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aECbK.jpg?s=128&g=1", "display_name": "Moo10000", "link": "https://stackoverflow.com/users/11968163/moo10000"}, "edited": false, "score": 0, "creation_date": 1567092340, "post_id": 57700173, "comment_id": 101868918, "body": "@Moo10000 did this work for you?"}, {"owner": {"reputation": 85, "user_id": 11968163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aECbK.jpg?s=128&g=1", "display_name": "Moo10000", "link": "https://stackoverflow.com/users/11968163/moo10000"}, "edited": false, "score": 0, "creation_date": 1567096142, "post_id": 57700173, "comment_id": 101870739, "body": "It is close, now the bars are stacked, as opposed to next to each other.  ` &#39;<code>vc1 = new2[&#39;Wr_Spr_Conv&#39;].value_counts() vc2= new2[&#39;Re_Spr_Conv&#39;].value_counts() vc3 = new2[&#39;Ma_Spr_Conv&#39;].value_counts() k=[vc1,vc2,vc3] # plt.bar(vc1.index,vc1.values, align=&#39;center&#39;) plt.bar(vc2.index, vc2.values, align = &#39;center&#39;) plt.bar(vc3.index, vc3.values, align = &#39;center&#39;) plt.gca().set_xticks(vc1.index) plt.show()</code>&#39;   I dont think I need 9 bins because the series only have 1,2,and 3 values. I am working"}, {"owner": {"reputation": 85, "user_id": 11968163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aECbK.jpg?s=128&g=1", "display_name": "Moo10000", "link": "https://stackoverflow.com/users/11968163/moo10000"}, "edited": false, "score": 0, "creation_date": 1567096923, "post_id": 57700173, "comment_id": 101871075, "body": "I tried something else I found online in a post for grouped bar charts  <code>vc1 = new2[&#39;Wr_Spr_Conv&#39;].value_counts() vc2= new2[&#39;Re_Spr_Conv&#39;].value_counts() vc3 = new2[&#39;Ma_Spr_Conv&#39;].value_counts() r1 = np.arange(len(vc1)) r2 = [x + .25 for x in r1] r3 = [x + .25 for x in r2]   k=[vc1,vc2,vc3] # plt.bar(r1,vc1.values, align=&#39;center&#39;) plt.bar(r2, vc2.values, align = &#39;center&#39;) plt.bar(r3, vc3.values, align = &#39;center&#39;) plt.gca().set_xticks(vc1.index) plt.show()</code>  The first comment, everything was lined up, here the bars are all overlapping  @jojo"}, {"owner": {"reputation": 85, "user_id": 11968163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aECbK.jpg?s=128&g=1", "display_name": "Moo10000", "link": "https://stackoverflow.com/users/11968163/moo10000"}, "edited": false, "score": 0, "creation_date": 1567197275, "post_id": 57700173, "comment_id": 101905818, "body": "thanks for your help, learned a bit more about this plotting business"}], "tags": [], "owner": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "is_accepted": true, "score": 1, "last_activity_date": 1567029044, "last_edit_date": 1567029044, "creation_date": 1567027135, "answer_id": 57700173, "question_id": 57699685, "link": "https://stackoverflow.com/questions/57699685/how-do-i-annotate-the-following-graph/57700173#57700173", "title": "How do I annotate the following graph?", "body": "<p>Assuming your <code>Wr_Spr_Conv</code> is a <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html\" rel=\"nofollow noreferrer\">pandas.Series</a> you can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.value_counts.html\" rel=\"nofollow noreferrer\"><code>value_counts</code></a> and pyplot's <a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.bar.html\" rel=\"nofollow noreferrer\"><code>bar</code></a> method with the attribute <code>align='center'</code> to create a histogram <strong>with a pre-defined number of bins and centered labels</strong>.</p>\n\n<p>Here is a minimal example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nfrom matplotlib import pyplot as plt\n\nnbr_bins = 9\nWr_Spr_Conv = pd.Series( [1,1,1,2,2,5,9,2,7,7,2,3,3,3,2,2,1,2,3]) \nvc = Wr_Spr_Conv.value_counts(bins=nbr_bins)\nplt.bar(vc.index.mid, vc.values, width=0.9*vc.index.length[0], align='center')\nplt.gca().set_xticks(vc.index.mid)\nplt.show()\n\n</code></pre>\n\n<p>And the result:\n<a href=\"https://i.stack.imgur.com/8cAC0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8cAC0.png\" alt=\"enter image description here\"></a></p>\n\n<p>This should get you started!</p>\n"}], "owner": {"reputation": 85, "user_id": 11968163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aECbK.jpg?s=128&g=1", "display_name": "Moo10000", "link": "https://stackoverflow.com/users/11968163/moo10000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1567196837, "accepted_answer_id": 57700173, "answer_count": 1, "score": -1, "last_activity_date": 1567038502, "creation_date": 1567024408, "last_edit_date": 1567038502, "question_id": 57699685, "link": "https://stackoverflow.com/questions/57699685/how-do-i-annotate-the-following-graph", "closed_reason": "Duplicate", "title": "How do I annotate the following graph?", "body": "<p>I have made a histogram using 3 different pandas series. I wanted to label the groups of bars 1,2,and 3. I was unsuccessful in using xlabels to do this; technically it worked but the numbers 1,2,3 were not aligned properly with the bars. </p>\n\n<p>I have decided to skip that and try annotating. Unfortunately, I figure out how to do it properly.</p>\n\n<p>I tried using xlabels, unsuccessfully. Now I am trying annotation but I can't get more than one text to show on the graph.</p>\n\n<p>Here is an example of what the data looks like\nWr_Spr_Conv = [1,1,1,2,2,2,3,3,3,2,2,1,2,3...]</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>new2['Wr_Spr_Conv'].replace(0, pd.np.nan).dropna(inplace = True)\nnew2['Re_Spr_Conv'].replace(0, pd.np.nan).dropna(inplace = True)\nnew2['Ma_Spr_Conv'].replace(0, pd.np.nan).dropna(inplace = True)\n\n\nplt.style.use('seaborn')\nx_labels = [1,2,3]\nfig, ax1 = plt.subplots(figsize=(10,10))\n\n#ax1.spines['left'].set_position(('outward', 10))\n#ax1.spines['bottom'].set_position(('outward', 10))\n# Hide the right and top spines\n\nax1.spines['right'].set_visible(False)\nax1.spines['top'].set_visible(False)\nax1.spines['bottom'].set_visible(False)\nax1.spines['right'].set_visible(False)\nnbins = 9\nax1.tick_params(bottom=\"off\", top=\"off\", left=\"off\", right=\"off\")\n    ax1.hist([new2['Wr_Spr_Conv'],new2['Re_Spr_Conv'],new2['Ma_Spr_Conv']],nbins)\n#ax1.set_xticks(3)\n#ax1.set_xticks(3)\n#ax1.set_xlim(right =3)\n#ax1.set_xlim(left=0)\n# Only show ticks on the left and bottom spines\n#ax1.yaxis.set_ticks_position('left')\n#ax1.xaxis.set_ticks_position('bottom')    \nax1.set_xticks(x_labels)\nax1.set_xlim(right=3)  # adjust the right leaving left unchanged\nax1.set_xlim(left=1)  # adjust the left leaving right unchanged\nax1.xaxis.set_major_locator(MaxNLocator(integer=True))\n#ax1.annotate('Level 1',xy=(1,15))\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "anaconda"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 6328478, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154165809595238/picture?type=large", "display_name": "Thremane D. Henry", "link": "https://stackoverflow.com/users/6328478/thremane-d-henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1567234547, "creation_date": 1567234547, "answer_id": 57735878, "question_id": 57699641, "link": "https://stackoverflow.com/questions/57699641/attributeerror-module-tensorflow-has-no-attribute-executing-eagerly/57735878#57735878", "title": "AttributeError: module &#39;tensorflow&#39; has no attribute &#39;executing_eagerly&#39;", "body": "<p>I figured out what the issue was. The version of TensorFlow and the pre-train model must be compatible. I installed Tensorflow v1.5 in my environment and the appropriate comit package. Now I\u2019m training my model.</p>\n"}], "owner": {"reputation": 41, "user_id": 6328478, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154165809595238/picture?type=large", "display_name": "Thremane D. Henry", "link": "https://stackoverflow.com/users/6328478/thremane-d-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567234547, "creation_date": 1567024180, "last_edit_date": 1567030907, "question_id": 57699641, "link": "https://stackoverflow.com/questions/57699641/attributeerror-module-tensorflow-has-no-attribute-executing-eagerly", "title": "AttributeError: module &#39;tensorflow&#39; has no attribute &#39;executing_eagerly&#39;", "body": "<p>Hello everyone I am new to machine learning, and I am attempting to build a custom object detection model on the CPU. However, I am getting this error below after I type:</p>\n\n<pre><code>python train.py --logtostderr --train_dir=training/ -pipeline_config_path=training/ssd_mobilenet_v1_coco.config. \n</code></pre>\n\n<p>Any input would be most appreciated. My path has been config but the problem occurs the seem.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"train.py\", line 184, in &lt;module&gt;\n    tf.app.run()\n  File \"C:\\Users\\Thremane\\Anaconda3\\envs\\tensorflow1\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 124, in run\n    _sys.exit(main(argv))\n  File \"C:\\Users\\Thremane\\Anaconda3\\envs\\tensorflow1\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 136, in new_func\n    return func(*args, **kwargs)\n  File \"train.py\", line 180, in main\n    graph_hook_fn=graph_rewriter_fn)\n  File \"C:\\Users\\Thremane\\Anaconda3\\envs\\tensorflow1\\lib\\site-packages\\object_detection-0.1-py3.5.egg\\object_detection\\legacy\\trainer.py\", line 304, in train\n    train_config.optimizer)\n  File \"C:\\Users\\Thremane\\Anaconda3\\envs\\tensorflow1\\lib\\site-packages\\object_detection-0.1-py3.5.egg\\object_detection\\builders\\optimizer_builder.py\", line 45, in build\n    global_step=global_step)\n  File \"C:\\Users\\Thremane\\Anaconda3\\envs\\tensorflow1\\lib\\site-packages\\object_detection-0.1-py3.5.egg\\object_detection\\builders\\optimizer_builder.py\", line 113, in _create_learning_rate\n    staircase=config.staircase)\n  File \"C:\\Users\\Thremane\\Anaconda3\\envs\\tensorflow1\\lib\\site-packages\\object_detection-0.1-py3.5.egg\\object_detection\\utils\\learning_schedules.py\", line 79, in exponential_decay_with_burnin\n    if tf.executing_eagerly():\nAttributeError: module 'tensorflow' has no attribute 'executing_eagerly'\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 4, "last_activity_date": 1567024242, "creation_date": 1567024242, "answer_id": 57699649, "question_id": 57699631, "link": "https://stackoverflow.com/questions/57699631/joining-lists-that-are-values-of-dictionaries-when-repeated-key-exists/57699649#57699649", "title": "Joining lists that are values of dictionaries when repeated key exists", "body": "<p>You can use <code>collections.defaultdict</code>:</p>\n\n<pre><code>import collections\nd = collections.defaultdict(list)\nlist1=['a','b','a']\nlist2=[['str1','str2','str3'],['str4','str5','str5'],   ['str4','str6','str6']]\nfor a, b in zip(list1, list2):\n   d[a].extend(b)\n\nprint(dict(d))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'a': ['str1', 'str2', 'str3', 'str4', 'str6', 'str6'], 'b': ['str4', 'str5', 'str5']}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "is_accepted": false, "score": 0, "last_activity_date": 1567024314, "creation_date": 1567024314, "answer_id": 57699670, "question_id": 57699631, "link": "https://stackoverflow.com/questions/57699631/joining-lists-that-are-values-of-dictionaries-when-repeated-key-exists/57699670#57699670", "title": "Joining lists that are values of dictionaries when repeated key exists", "body": "<ul>\n<li>on top of my head you can just check if <code>key</code> is present in the <code>dict</code> or not.</li>\n</ul>\n\n<pre><code>list1=['a','b','a']\nlist2=[['str1','str2','str3'],['str4','str5','str5'],   ['str4','str6','str6']]\nd = dict()\nfor k,v in zip(list1, list2):\n    if k not in d:\n        d[k] = []\n    d[k].extends(v)\n</code></pre>\n\n<p>PS: or use <code>defaultdict</code></p>\n"}], "owner": {"reputation": 1997, "user_id": 7836530, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f11697069f27f74c1f2af72df755ef95?s=128&d=identicon&r=PG&f=1", "display_name": "JamesHudson81", "link": "https://stackoverflow.com/users/7836530/jameshudson81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1567025962, "accepted_answer_id": 57699649, "answer_count": 2, "score": 2, "last_activity_date": 1567024314, "creation_date": 1567024124, "question_id": 57699631, "link": "https://stackoverflow.com/questions/57699631/joining-lists-that-are-values-of-dictionaries-when-repeated-key-exists", "closed_reason": "Duplicate", "title": "Joining lists that are values of dictionaries when repeated key exists", "body": "<p>Maybe this question has been asked but I am unable to find a feasible answer for my case.</p>\n\n<p>I have 2 lists:</p>\n\n<pre><code>list1=['a','b','a']\nlist2=[['str1','str2','str3'],['str4','str5','str5'],   ['str4','str6','str6']]\n</code></pre>\n\n<p>I am looping over the list to generate a dictionary:</p>\n\n<pre><code>superdict={}\nlittledict={}\nfor i in range(len(list1)):\n    if bool(superdict) == False:\n        superdict[list1[i]]=list2[i]\n    elif bool(superdict) == True:\n         littledict[list1[i]]=list2[i]\n         superdict.update(littledict)\n</code></pre>\n\n<p>However given that I have a repeated key in one of the dictionaries.\nhow could I join the values of the sublist3 from list2 into key 'a'</p>\n\n<p>I was thinking in adding an</p>\n\n<pre><code>if littledict[list1[i]] in superdict:\n    do something\n</code></pre>\n\n<p>the desired output:</p>\n\n<pre><code>{'a':['str1','str2','str3','str4','str6','str6'],'b':['str4','str5','str5']}\n</code></pre>\n\n<p>How could I proceed?</p>\n"}, {"tags": ["python", "html", "django", "containers", "screenshot"], "comments": [{"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "edited": false, "score": 0, "creation_date": 1567024652, "post_id": 57699618, "comment_id": 101843351, "body": "I also have a feeling that maybe <code>django forms</code> can be helpful here, but do not have a clue how!"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1567024977, "post_id": 57699618, "comment_id": 101843474, "body": "Java or JavaScript? These are not the same things."}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1567025179, "post_id": 57699618, "comment_id": 101843544, "body": "@DanielRoseman Sorry. It is triggered by some ajax. Not java"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567025206, "post_id": 57699618, "comment_id": 101843561, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-in-browser-screenshots\">Using HTML5/Canvas/JavaScript to take in-browser screenshots</a>"}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567025264, "post_id": 57699618, "comment_id": 101843587, "body": "@ipaleka let me check"}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567025440, "post_id": 57699618, "comment_id": 101843670, "body": "@ipaleka , unfortunately that&#39;s not what I am looking for. That question talks about selecting an area inside the html page. I am talking about a simple container that is already there. And I also I am using combination of html and ajax to connect with django backend. I mistakenly said Java instead of ajax"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 2, "creation_date": 1567026243, "post_id": 57699618, "comment_id": 101843967, "body": "<a href=\"https://stackoverflow.com/a/14723900/11703358\">Well</a>: <code>html2canvas($(&#39;#div&#39;), {onrendered: function(canvas) {var img = canvas.toDataURL() window.open(img);}});</code> using accepted answer for linked SO question."}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "edited": false, "score": 0, "creation_date": 1567028267, "post_id": 57699618, "comment_id": 101844662, "body": "I guess that might be it. Thanks. Where should I put this code? Is is possible to put it inside something like this: <code>$(&#39;#button_for_div_screenshot&#39;).click(function() {...</code>"}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567029796, "post_id": 57699618, "comment_id": 101845083, "body": "@ipaleka is there a way that does not use npm?"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 1, "creation_date": 1567030340, "post_id": 57699618, "comment_id": 101845202, "body": "Yep, just <a href=\"https://github.com/niklasvh/html2canvas/releases\" rel=\"nofollow noreferrer\">download the javascript file</a> and place it inside your <code>static</code> directory."}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567032097, "post_id": 57699618, "comment_id": 101845554, "body": "@ipaleka Great. Thanks a lot for your help."}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567067774, "post_id": 57699618, "comment_id": 101854938, "body": "@ipaleka Your answer and links helped me on new keywords to search more on the problem. But among the almost 20 different posts I saw in SO and elsewhere, unfortunately none work properly. Each of them bump up into different errors which when I check those errors again nothing useful is reached. The most frequent error I bump into is <code>Uncaught (in promise) Error: Element is not attached to a Document</code>. Do you think I should ask a new question?"}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567067930, "post_id": 57699618, "comment_id": 101855012, "body": "@ipaleka Based on different answers I tried using <code>document.getElementById(&#39;the_id&#39;)</code> and even some weird stuff like <code>document.getElementById(&#39;the_id&#39;).parentNode.style.overflow = &#39;visible&#39;</code>. But still no success. Even when I pass these errors, <code>html2canvas</code> seems to not work properly and it returns blank images. Is there any other tool than <code>html2canvas</code> that can be used?"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567068018, "post_id": 57699618, "comment_id": 101855056, "body": "Sorry, I really dont know."}, {"owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1567070745, "post_id": 57699618, "comment_id": 101856419, "body": "@ipaleka Ok Thanks. I have realized what the origin of the problem is. All of this works on normal <code>div</code>s. The reason that it does not work on my <code>div</code> is that is has <code>class=&quot;row&quot;</code>. When I remove that in <code>styles</code> it works. But I need the <code>class=&quot;row&quot;</code>. I should now find a way to resolve this."}], "owner": {"reputation": 132, "user_id": 3286607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d6d892b66ea61cfd323279371f751?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/3286607/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567071891, "creation_date": 1567024064, "last_edit_date": 1567071891, "question_id": 57699618, "link": "https://stackoverflow.com/questions/57699618/how-can-i-get-screenshot-of-a-div-container-with-class-row", "title": "How can I get screenshot of a div container with class row?", "body": "<p>Consider we have a simple <code>div container</code> inside an html page which has lots of other stuff too. \nI am seeking to design a button for users, so when clicked, it returns the screenshot image of only that particular container.</p>\n\n<p>I am currently working inside a django project and wondered maybe there is a pure html solution to this without using python. However in my searches I haven't found anything on python that can help me on this either.</p>\n\n<p>For example the <code>div</code> looks something like this:</p>\n\n<pre><code>&lt;div class=\"row\" style=\"height:1200px; overflow-x: hidden;\" id=\"The_chart_that_we_want_its_screenshot\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The id is triggered by a jQuery or ajax code later in the html script which loads a chart based on some data (which is constantly changing) from database.\nAnd since every time the user opens that html page, a different chart is shown in that container, this button is needed for the sake of user's reporting needs.</p>\n\n<p>Edit: I have checked all other posts in StackOverFlow. They all work on normal divs. But not on my div, because of the class=\"row\". It seems that this class makes the screenshot blank with a color strip in the right of the image. In other words the screenshot pushes all the content of that container to the left and shows it as a narrow vertical colored strip which off course nothing can be seen from the real thing. Don't know why that is.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1567024105, "post_id": 57699612, "comment_id": 101843127, "body": "Can you come up with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ?"}, {"owner": {"reputation": 2427, "user_id": 4044400, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/66e0ff17a11f74087ee15055ce6ab367?s=128&d=identicon&r=PG", "display_name": "Jonathan Bechtel", "link": "https://stackoverflow.com/users/4044400/jonathan-bechtel"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1567024446, "post_id": 57699612, "comment_id": 101843275, "body": "Just did.  Accidentally hit the submit button before I had a chance to finish the question."}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1567024984, "post_id": 57699612, "comment_id": 101843479, "body": "are you editing?"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 5468075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353e1fff7d60a6f88da33371c910c5d?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5468075/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1567037078, "creation_date": 1567037078, "answer_id": 57701384, "question_id": 57699612, "link": "https://stackoverflow.com/questions/57699612/filling-in-missing-values-from-one-dataset-using-group-means-from-a-different-da/57701384#57701384", "title": "Filling in Missing Values from One Dataset Using Group Means From A Different Dataset", "body": "<p>One trick is to turned the grouped object into a dataframe and merge it into the test dataframe:</p>\n\n<p>Set up the data:</p>\n\n<pre><code>train_data = [     \n['A', 1],          \n['A', 2],        \n['A',2],        \n['B',3],       \n['B', 4],\n['B', 4]\n]\ntrain_df = pd.DataFrame(train_data, columns=['group', 'value'])\n\ntest_data = [     \n['A', 1],          \n['A', np.nan],        \n['A',np.nan],        \n['B',3],       \n['B', np.nan],\n['B', np.nan]\n]\ntest_df = pd.DataFrame(test_data, columns=['group', 'value'])\n\n</code></pre>\n\n<p>Do the groupby on the training data:</p>\n\n<pre><code>group_mean_df = pd.DataFrame(train_df.groupby('group').value.mean()).rename(columns={'value':'group_mean'})\n</code></pre>\n\n<p>Now merge the test data and the group mean data and do the fill na:</p>\n\n<pre><code>test_merged = test_df.merge(group_mean_df, left_on='group', right_on='group')\ntest_merged['value'] = test_merged['value'].fillna(test_merged['group_mean'])\n</code></pre>\n\n<p>You can then drop the 'group_mean' column if you want.</p>\n"}], "owner": {"reputation": 2427, "user_id": 4044400, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/66e0ff17a11f74087ee15055ce6ab367?s=128&d=identicon&r=PG", "display_name": "Jonathan Bechtel", "link": "https://stackoverflow.com/users/4044400/jonathan-bechtel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567037078, "creation_date": 1567024039, "last_edit_date": 1567024412, "question_id": 57699612, "link": "https://stackoverflow.com/questions/57699612/filling-in-missing-values-from-one-dataset-using-group-means-from-a-different-da", "title": "Filling in Missing Values from One Dataset Using Group Means From A Different Dataset", "body": "<p>I'm trying to impute missing values on my test set, and would like to use the same imputations from group means derived from my training set using a pandas <code>groupby</code> statement.</p>\n\n<p>I'm familiar with the <code>transform</code> method, but am not aware of how to use its output on a <em>different</em> dataset.  </p>\n\n<p>Right now, here's what I have on my training set:</p>\n\n<pre><code>transformer = train.groupby('BldgType')['LotFrontage'].transform('mean')\ntrain['LotFrontage'] = train['LotFrontage'].fillna(transformer)\n</code></pre>\n\n<p>The result of the <code>groupby statement</code> looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vvUNW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vvUNW.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Those are the results I want to use to impute the missing values on my test set.</p>\n\n<p>The following doesn't work, because it uses the index from the training set to infer what the value should be, not the test set:</p>\n\n<pre><code>test['LotFrontage'] = test['LotFrontage'].fillna(transformer)\n</code></pre>\n"}, {"tags": ["python", "docker", "apache-spark", "pyspark", "amazon-emr"], "answers": [{"tags": [], "owner": {"reputation": 7100, "user_id": 590335, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3a49832e1534f2aa5589a85bdc115caa?s=128&d=identicon&r=PG", "display_name": "Ophir Yoktan", "link": "https://stackoverflow.com/users/590335/ophir-yoktan"}, "is_accepted": true, "score": 0, "last_activity_date": 1568011741, "creation_date": 1568011741, "answer_id": 57849052, "question_id": 57699583, "link": "https://stackoverflow.com/questions/57699583/is-it-possible-to-run-spark-udf-functions-mainly-python-under-docker/57849052#57849052", "title": "is it possible to run spark udf functions (mainly python) under docker?", "body": "<p>Apparently yarn 3.2 supports this feature: <a href=\"https://hadoop.apache.org/docs/r3.2.0/hadoop-yarn/hadoop-yarn-site/DockerContainers.html\" rel=\"nofollow noreferrer\">https://hadoop.apache.org/docs/r3.2.0/hadoop-yarn/hadoop-yarn-site/DockerContainers.html</a></p>\n\n<p>and it expected to be available with EMR 6 (now in beta) <a href=\"https://aws.amazon.com/blogs/big-data/run-spark-applications-with-docker-using-amazon-emr-6-0-0-beta/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/big-data/run-spark-applications-with-docker-using-amazon-emr-6-0-0-beta/</a></p>\n"}], "owner": {"reputation": 7100, "user_id": 590335, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3a49832e1534f2aa5589a85bdc115caa?s=128&d=identicon&r=PG", "display_name": "Ophir Yoktan", "link": "https://stackoverflow.com/users/590335/ophir-yoktan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 57849052, "answer_count": 1, "score": 1, "last_activity_date": 1568011861, "creation_date": 1567023865, "last_edit_date": 1568011861, "question_id": 57699583, "link": "https://stackoverflow.com/questions/57699583/is-it-possible-to-run-spark-udf-functions-mainly-python-under-docker", "title": "is it possible to run spark udf functions (mainly python) under docker?", "body": "<p>I'm using <code>pyspark</code> on <code>emr</code>. To simplify the setup of <code>python</code> libraries and dependencies, we're using <code>docker</code> images.</p>\n\n<p>This works fine for general python applications (non spark), and for the spark driver (calling spark submit from within a docker image)</p>\n\n<p>However, I couldn't find a method to make the workers run within a docker image (either the \"full\" worker, or just the <code>UDF</code> functions)</p>\n\n<p><strong>EDIT</strong>\nFound a solution with beta EMR version, if there's some alternative with current (5.*) EMR versions it's still relevant </p>\n"}, {"tags": ["python", "cucumber"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1567027513, "post_id": 57699542, "comment_id": 101844420, "body": "I&#39;m not totally sure what you mean. What does it mean to use the &quot;same generated unique email address&quot;? Is it possible to enter the same email address twice on the same page? Yes it is."}, {"owner": {"reputation": 2331, "user_id": 2338323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/0zpne.jpg?s=128&g=1", "display_name": "SteveJ", "link": "https://stackoverflow.com/users/2338323/stevej"}, "edited": false, "score": 0, "creation_date": 1567032558, "post_id": 57699542, "comment_id": 101845648, "body": "You have to find a way to persist the fact that checkout occurred. Traditional ways of doing this are cookies, sessions, and backend-databases. Which choice is right for you can not  be known with the limited criteria given."}], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 11232022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a81ab0a54b1c0477e3d24368f82cd?s=128&d=identicon&r=PG&f=1", "display_name": "Sreenivasulu", "link": "https://stackoverflow.com/users/11232022/sreenivasulu"}, "is_accepted": false, "score": 0, "last_activity_date": 1567060361, "creation_date": 1567060361, "answer_id": 57704277, "question_id": 57699542, "link": "https://stackoverflow.com/questions/57699542/how-to-use-share-data-between-steps/57704277#57704277", "title": "How to use/share data between steps?", "body": "<p>Why can't. You can use for any number of scenario's. As per scenario 1 steps, you already know the unique email address what you need to enter. Take this email address to the Hooks file and store it in one public static variable inside Before annotation. Later you can use same email for n number of scenario's using that public static variable.</p>\n\n<p>If you need to use this email only for specific scenario's, add one tag to all scenario's which you need to use and tag it in Hooks file using Before({tags: tagName}). By this way, you can use this email address only for specific scenario's out of all.</p>\n"}], "owner": {"reputation": 19, "user_id": 11991209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f210c95aabc78c8dcff010e55161db?s=128&d=identicon&r=PG&f=1", "display_name": "Triskelion", "link": "https://stackoverflow.com/users/11991209/triskelion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567060361, "creation_date": 1567023637, "last_edit_date": 1567027851, "question_id": 57699542, "link": "https://stackoverflow.com/questions/57699542/how-to-use-share-data-between-steps", "title": "How to use/share data between steps?", "body": "<p>I have two different steps and pass in the same variable there. </p>\n\n<p>Scenario1: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Given the user lands on the page\n\n When user enters a unique email address\n Then user is redirected to checkout\n Then user places the order\n</code></pre>\n\n<p>Scenario2:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Given the user lands on the same page\n When the user enters the same email address above\n Then user is presented with a modal window saying you already taken this offer\n</code></pre>\n\n<p>Is it possible to use the same generated unique email address to be used on the second scenario?</p>\n"}, {"tags": ["python", "machine-learning", "statistics", "data-analysis"], "comments": [{"owner": {"reputation": 4044, "user_id": 2974951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4596e20fc7b9882d10758f75da4d4b7c?s=128&d=identicon&r=PG&f=1", "display_name": "user2974951", "link": "https://stackoverflow.com/users/2974951/user2974951"}, "edited": false, "score": 0, "creation_date": 1567082326, "post_id": 57699540, "comment_id": 101862818, "body": "This cannot be done. These 2 values are not comparable."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1567096101, "post_id": 57699540, "comment_id": 101870716, "body": "IMO, your best bet would be to save the residuals for both for all data points, then compute on the whole set rather than computing each individually"}, {"owner": {"reputation": 19, "user_id": 11715807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bbcef98da5244060cc4aa9d9e970159?s=128&d=identicon&r=PG&f=1", "display_name": "pirate_87", "link": "https://stackoverflow.com/users/11715807/pirate-87"}, "edited": false, "score": 0, "creation_date": 1568044151, "post_id": 57699540, "comment_id": 102140830, "body": "I divided a data set into 2 parts, (say 70% and 30%).  As the r-squared values are computed from the residuals of same data set, I need a way to combine those r- squared values."}], "owner": {"reputation": 19, "user_id": 11715807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bbcef98da5244060cc4aa9d9e970159?s=128&d=identicon&r=PG&f=1", "display_name": "pirate_87", "link": "https://stackoverflow.com/users/11715807/pirate-87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567519203, "creation_date": 1567023631, "last_edit_date": 1567519203, "question_id": 57699540, "link": "https://stackoverflow.com/questions/57699540/how-can-we-compute-resultant-r-squared-value-from-2-r-squared-values", "title": "How can we compute resultant r-squared value from 2 r-squared values?", "body": "<p>Is there an efficient way of combining 2 r-squared values?\nThose 2 r-squared values are computed for 2 parts of same data set(I have to divide the data in to 2 parts, say 70% and 30%). I want to calculate the resultant r-squared value. I appreciate your help. Thank you.</p>\n"}, {"tags": ["python", "string", "compare"], "comments": [{"owner": {"reputation": 194, "user_id": 9802392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d parolin", "link": "https://stackoverflow.com/users/9802392/d-parolin"}, "edited": false, "score": 2, "creation_date": 1567024579, "post_id": 57699511, "comment_id": 101843324, "body": "Welcome ! Can you post an actual code snippet ? And maybe which Python version you are using."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1567024875, "post_id": 57699511, "comment_id": 101843432, "body": "Please <a href=\"https://stackoverflow.com/posts/57699511/edit\">edit</a> your question and show how you are reading each &quot;record&quot; of the binary file."}, {"owner": {"reputation": 728, "user_id": 1292467, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5oSiH.png?s=128&g=1", "display_name": "Iakov Davydov", "link": "https://stackoverflow.com/users/1292467/iakov-davydov"}, "edited": false, "score": 1, "creation_date": 1567076470, "post_id": 57699511, "comment_id": 101859530, "body": "You are probably getting the syntax error because of an extra parenthesis symbol after the print statement. This code seems to work: <code>if a == &#39;\\x00&#39; * 256: print &#39;-&#39; * 80</code>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11991124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce26bfb77675dcdda1d84bb84de6e5a?s=128&d=identicon&r=PG&f=1", "display_name": "BillRat", "link": "https://stackoverflow.com/users/11991124/billrat"}, "edited": false, "score": 0, "creation_date": 1567092848, "post_id": 57708760, "comment_id": 101869184, "body": "Thank you, this was exactly what I needed."}, {"owner": {"reputation": 1359, "user_id": 1830725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91af73ca0ab4c1c63426d56965ae05ed?s=128&d=identicon&r=PG", "display_name": "KPLauritzen", "link": "https://stackoverflow.com/users/1830725/kplauritzen"}, "reply_to_user": {"reputation": 41, "user_id": 11991124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce26bfb77675dcdda1d84bb84de6e5a?s=128&d=identicon&r=PG&f=1", "display_name": "BillRat", "link": "https://stackoverflow.com/users/11991124/billrat"}, "edited": false, "score": 0, "creation_date": 1567168399, "post_id": 57708760, "comment_id": 101893713, "body": "great. Please accept the answer to close the question then"}], "tags": [], "owner": {"reputation": 1359, "user_id": 1830725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91af73ca0ab4c1c63426d56965ae05ed?s=128&d=identicon&r=PG", "display_name": "KPLauritzen", "link": "https://stackoverflow.com/users/1830725/kplauritzen"}, "is_accepted": true, "score": 0, "last_activity_date": 1567076594, "creation_date": 1567076594, "answer_id": 57708760, "question_id": 57699511, "link": "https://stackoverflow.com/questions/57699511/im-reading-into-a-256-byte-string-i-want-to-skip-it-if-its-all-binary-zeros/57708760#57708760", "title": "I&#39;m reading into a 256 byte string. I want to skip it, if it&#39;s all binary zeros (\\x00) Is there a single test?", "body": "<p>Your example looks to be very close. I'm not sure about Python 2, but in Python 3 you should specify that a string is binary.\nI would do something like:</p>\n\n<pre><code>empty = b'\\x00' * 256\nif record == empty:\n    print('skipped this line')\n</code></pre>\n\n<p>Remember that Python 2 uses print statements, so you should do <code>print 'skipped this line'</code> instead. </p>\n"}], "owner": {"reputation": 41, "user_id": 11991124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce26bfb77675dcdda1d84bb84de6e5a?s=128&d=identicon&r=PG&f=1", "display_name": "BillRat", "link": "https://stackoverflow.com/users/11991124/billrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57708760, "answer_count": 1, "score": 3, "last_activity_date": 1567076594, "creation_date": 1567023464, "last_edit_date": 1567076075, "question_id": 57699511, "link": "https://stackoverflow.com/questions/57699511/im-reading-into-a-256-byte-string-i-want-to-skip-it-if-its-all-binary-zeros", "title": "I&#39;m reading into a 256 byte string. I want to skip it, if it&#39;s all binary zeros (\\x00) Is there a single test?", "body": "<p>Totally new to python.  Trying to parse a file but not all records contain data.  I want to skip the records that are all hex 00. </p>\n\n<p>if record == ('\\x00' * 256):   from a sample of print(\"-\"*80))\ngave a Syntax error, hey I said I was new.  :)</p>\n\n<p>Thanks for the reply, I'm using 2.7 and reading like this....</p>\n\n<pre><code>with open(testfile, \"rb\") as f:\n    counter = 0\n    while True:\n        record = f.read(256)\n        counter += 1\n</code></pre>\n"}, {"tags": ["python", "mysql", "sql", "web-scraping", "mysql-connector-python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567023533, "post_id": 57699489, "comment_id": 101842940, "body": "You really have a <code>%</code> in the column name? Double it to <code>%%</code>."}, {"owner": {"reputation": 29, "user_id": 11991186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e328b064621596519444a54cedc52c8?s=128&d=identicon&r=PG&f=1", "display_name": "muth", "link": "https://stackoverflow.com/users/11991186/muth"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567023752, "post_id": 57699489, "comment_id": 101843013, "body": "The %s is a placeholder. This is used in MySql python connector to represent a variable name. In this case the variable is &#39;Rafael Nadal&#39;. I eventually want the user to be able select the player for themself"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567023965, "post_id": 57699489, "comment_id": 101843083, "body": "I know about <code>%s</code>. The problem is <code>First_Serve(%)</code>."}, {"owner": {"reputation": 55869, "user_id": 48503, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/672f798341250dd228b286738e8d6309?s=128&d=identicon&r=PG", "display_name": "Luke Woodward", "link": "https://stackoverflow.com/users/48503/luke-woodward"}, "edited": false, "score": 0, "creation_date": 1567023994, "post_id": 57699489, "comment_id": 101843095, "body": "Try putting the column name <code>Name</code> in backticks.  <a href=\"https://dev.mysql.com/doc/refman/5.5/en/keywords.html#keywords-5-5-detailed-N\" rel=\"nofollow noreferrer\"><code>NAME</code> is a reserved word in MySQL</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567023995, "post_id": 57699489, "comment_id": 101843096, "body": "Change that to <code>First_Serve(%%)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 55869, "user_id": 48503, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/672f798341250dd228b286738e8d6309?s=128&d=identicon&r=PG", "display_name": "Luke Woodward", "link": "https://stackoverflow.com/users/48503/luke-woodward"}, "edited": false, "score": 0, "creation_date": 1567024016, "post_id": 57699489, "comment_id": 101843102, "body": "@LukeWoodward It&#39;s not a reserved word, there&#39;s no <code>(R)</code> next to it."}, {"owner": {"reputation": 55869, "user_id": 48503, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/672f798341250dd228b286738e8d6309?s=128&d=identicon&r=PG", "display_name": "Luke Woodward", "link": "https://stackoverflow.com/users/48503/luke-woodward"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567024109, "post_id": 57699489, "comment_id": 101843129, "body": "@Barmar fair enough, it&#39;s just odd that the error is reported immediately after <code>Name</code>."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1567025736, "post_id": 57699489, "comment_id": 101843791, "body": "@muth: Should it not qouted: <code>Name =&#39;%s&#39;</code>, there is a <b>blank</b> in <code>&#39;Rafael Nadal&#39;</code>"}, {"owner": {"reputation": 29, "user_id": 11991186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e328b064621596519444a54cedc52c8?s=128&d=identicon&r=PG&f=1", "display_name": "muth", "link": "https://stackoverflow.com/users/11991186/muth"}, "reply_to_user": {"reputation": 55869, "user_id": 48503, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/672f798341250dd228b286738e8d6309?s=128&d=identicon&r=PG", "display_name": "Luke Woodward", "link": "https://stackoverflow.com/users/48503/luke-woodward"}, "edited": false, "score": 0, "creation_date": 1567033216, "post_id": 57699489, "comment_id": 101845798, "body": "@LukeWoodWard you were right, I just needed to add backticks to Name. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 11991186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e328b064621596519444a54cedc52c8?s=128&d=identicon&r=PG&f=1", "display_name": "muth", "link": "https://stackoverflow.com/users/11991186/muth"}, "edited": false, "score": 0, "creation_date": 1567024597, "post_id": 57699619, "comment_id": 101843329, "body": "Thanks but that didnt work. It returns the error &quot;Unknown column &#39;First_Serve(%%)&#39; in &#39;field list&#39;&quot;. I&#39;m pretty sure its a problem with the last part of the query because when I replace the %s with just &#39;Rafael Nadal&#39; it works perfectly."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 29, "user_id": 11991186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e328b064621596519444a54cedc52c8?s=128&d=identicon&r=PG&f=1", "display_name": "muth", "link": "https://stackoverflow.com/users/11991186/muth"}, "edited": false, "score": 0, "creation_date": 1567024848, "post_id": 57699619, "comment_id": 101843420, "body": "I&#39;ve linked to another question like this. But maybe it&#39;s different in MySQL Connector than PyMySQL."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567024701, "last_edit_date": 1567024701, "creation_date": 1567024069, "answer_id": 57699619, "question_id": 57699489, "link": "https://stackoverflow.com/questions/57699489/error-selecting-from-sql-table-using-mysql-placeholders/57699619#57699619", "title": "Error selecting from sql table using mysql placeholders", "body": "<p>Since <code>%</code> is used to mark placeholders in the SQL, you have to double it if you want to use it literally.</p>\n\n<pre><code>mySql_insert_query = \"\"\"SELECT `First_Serve(%%)` FROM `serve2` WHERE Name =%s\"\"\"\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/3037581/how-do-i-escape-from-python-mysql-query\">How do I escape % from python mysql query</a></p>\n"}], "owner": {"reputation": 29, "user_id": 11991186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e328b064621596519444a54cedc52c8?s=128&d=identicon&r=PG&f=1", "display_name": "muth", "link": "https://stackoverflow.com/users/11991186/muth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567024701, "creation_date": 1567023322, "question_id": 57699489, "link": "https://stackoverflow.com/questions/57699489/error-selecting-from-sql-table-using-mysql-placeholders", "title": "Error selecting from sql table using mysql placeholders", "body": "<p>I am trying to select some values within a table that has a column called \"Name\". That column contains tennis players names. I want to store some statistics for each player in python, but I am having trouble accessing the table. I keep getting a \"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '='Rafael Nadal'' at line 1\" As you can see, mysql clearly interprets the  %s I had in place of 'Rafael Nadal' correctly, but it still brings up an error. Can anyone help me?</p>\n\n<pre><code>recordTuple = ('Rafael Nadal', )\nmySql_insert_query = \"\"\"SELECT `First_Serve(%)` FROM `serve2` WHERE Name =%s\"\"\"\ncursor.execute(mySql_insert_query, recordTuple)\naI = cursor.fetchall()[0][0]/100\n</code></pre>\n"}, {"tags": ["python", "flask", "localhost", "spyder"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567023364, "post_id": 57699467, "comment_id": 101842873, "body": "Restarted the code where? Why is Spyder relevant here? Are you running it in the IDE?"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1567023383, "post_id": 57699467, "comment_id": 101842881, "body": "Did you stop the previous process though?It might be running as a background process"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1567023472, "post_id": 57699467, "comment_id": 101842916, "body": "If you have launched the process first in Spyder then you&#39;ll need to ctrl C in the Spyder console or restart IPython. Really, don&#39;t run the Flask dev server through Spyder, ever, it&#39;ll drive you nuts. Code in it, just never click &quot;run&quot; :) you should have seen a &quot;port in use&quot; error, though if you have done that..."}, {"owner": {"reputation": 55, "user_id": 11972228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCgz0.jpg?s=128&g=1", "display_name": "Peej1226", "link": "https://stackoverflow.com/users/11972228/peej1226"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567024678, "post_id": 57699467, "comment_id": 101843358, "body": "@roganjosh this is exactly what I did [I will update the question after I comment], but everything looks to have stopped.  Clicking the red stop square didn&#39;t seem to do anything.  But I&#39;ve restarted Spyder and it does not appear that the process is running.  How do I stop this process? it seems mad_ suggested this too, but I&#39;m new to this so, I&#39;ll continue searching."}, {"owner": {"reputation": 55, "user_id": 11972228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCgz0.jpg?s=128&g=1", "display_name": "Peej1226", "link": "https://stackoverflow.com/users/11972228/peej1226"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1567025112, "post_id": 57699467, "comment_id": 101843523, "body": "@mad_ it does seem that I have a background process running, how do I confirm and resolve this?"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1567025388, "post_id": 57699467, "comment_id": 101843641, "body": "Try gettting the pid for the process using <code>netstat -a -n -o | find &quot;5000&quot; </code>then kill it   <code>taskkill &#47;PID &lt;typeyourPIDhere&gt; &#47;F</code>"}, {"owner": {"reputation": 55, "user_id": 11972228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCgz0.jpg?s=128&g=1", "display_name": "Peej1226", "link": "https://stackoverflow.com/users/11972228/peej1226"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1567025903, "post_id": 57699467, "comment_id": 101843844, "body": "@mad_  Sorry, that&#39;s a bit over my head.  I&#39;m still new to this type of work.  But your suggestion led me to finding this webpage <a href=\"https://github.com/plotly/dash/issues/108\" rel=\"nofollow noreferrer\">github.com/plotly/dash/issues/108</a> where someone had a similar issue and found the issue resolved by killing (End Task) the python processes seen in Windows Task Manager. I did this, went back to Windows Command Prompt and ran my file and the updates are seen."}, {"owner": {"reputation": 55, "user_id": 11972228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCgz0.jpg?s=128&g=1", "display_name": "Peej1226", "link": "https://stackoverflow.com/users/11972228/peej1226"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567026073, "post_id": 57699467, "comment_id": 101843901, "body": "@roganjosh What I&#39;ve found allows me to launch my code is to navigate within the Command Prompt to C:\\Users\\XXXX\\testpageagain&gt; where I have my test main1.py  here I type &quot;python main1.py&quot;  Is this the best way to do this?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1567026459, "post_id": 57699467, "comment_id": 101844044, "body": "Navigate to that folder normally. Hold down SHIFT and right click --&gt; &quot;open command prompt window here&quot; --&gt; type <code>set FLASK_APP=main1.py</code> then <code>set FLASK_DEBUG=1</code> then <code>flask run</code>"}], "owner": {"reputation": 55, "user_id": 11972228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCgz0.jpg?s=128&g=1", "display_name": "Peej1226", "link": "https://stackoverflow.com/users/11972228/peej1226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567024786, "creation_date": 1567023198, "last_edit_date": 1567024786, "question_id": 57699467, "link": "https://stackoverflow.com/questions/57699467/updating-flask-code-used-for-local-host-127-0-0-15000", "title": "updating flask code used for local host 127.0.0.1:5000", "body": "<p>I am trying to develop a simple webpage using the Spyder IDE and Flask.  I created the standard 'hello world' page.</p>\n\n<p>From within Spyder I ran the script which I also tried running from the Windows Command Prompt/  Using the command <code>python main.py</code> I was able to launch my hello world webpage in <a href=\"http://127.0.0.1:5000/\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/</a> </p>\n\n<p>I've gone back and updated the file to change the display text. Saved the file, restarted the code and the same content appears.  </p>\n\n<p>I have cleared the cache from the chrome browser I am already using.\nI have opened this same address in other browsers (firefox and IE).\nI created another version of this file in a different folder and also launched it.</p>\n\n<pre><code>from flask import Flask\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef home():\n    return \"Hello, World! anyone?\"\n\n@app.route(\"/page2\")\ndef salvador():\n    return \"Hello, there\"\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>\n\n<p>No matter what I do, I get the same original hello world webpage.</p>\n"}, {"tags": ["python", "numpy", "pybind11"], "answers": [{"tags": [], "owner": {"reputation": 1239, "user_id": 1741477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34ae9525b1796a547c77f64fc2186d6b?s=128&d=identicon&r=PG", "display_name": "Sergei", "link": "https://stackoverflow.com/users/1741477/sergei"}, "is_accepted": true, "score": 1, "last_activity_date": 1567242394, "creation_date": 1567242394, "answer_id": 57736626, "question_id": 57699461, "link": "https://stackoverflow.com/questions/57699461/how-to-pass-a-default-numpy-array-argument-to-a-function-in-pybind11/57736626#57736626", "title": "How to pass a default numpy array argument to a function in pybind11?", "body": "<p>The problem is that value of your default argument is 3d array with zero-length dimensions, instead of 1d array of three elements. </p>\n\n<p>The constructor you are calling with <code>py_array&lt;bool&gt; ({0, 0, 0})</code>:</p>\n\n<pre><code>    explicit array_t(ShapeContainer shape, const T *ptr = nullptr, handle base = handle())\n        : array_t(private_ctor{}, std::move(shape),\n                ExtraFlags &amp; f_style ? f_strides(*shape, itemsize()) : c_strides(*shape, itemsize()),\n                ptr, base) { }\n</code></pre>\n\n<p><a href=\"https://github.com/pybind/pybind11/blob/c9d32a81f40ad540015814edf13b29980c63e39c/include/pybind11/numpy.h#L861\" rel=\"nofollow noreferrer\">https://github.com/pybind/pybind11/blob/c9d32a81f40ad540015814edf13b29980c63e39c/include/pybind11/numpy.h#L861</a></p>\n"}], "owner": {"reputation": 165, "user_id": 10266625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfe75a9e657b0214612276aa70ecad63?s=128&d=identicon&r=PG&f=1", "display_name": "polortiz40", "link": "https://stackoverflow.com/users/10266625/polortiz40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 57736626, "answer_count": 1, "score": 0, "last_activity_date": 1567242394, "creation_date": 1567023163, "last_edit_date": 1567024814, "question_id": 57699461, "link": "https://stackoverflow.com/questions/57699461/how-to-pass-a-default-numpy-array-argument-to-a-function-in-pybind11", "title": "How to pass a default numpy array argument to a function in pybind11?", "body": "<p>I am defining a method that takes py::array_t&lt; double > and py::array_t&lt; bool > as arguments. How can I tell pybind11 to default those arguments to an array of my choice? (say np.array([0, 0, 0]))</p>\n\n<p>I have tried adding the default via \"Argument\"_a = py::array_T({0, 0, 0})\nbut when I call it itells me 'array has incorrect number of dimensions: 3; expected 1' </p>\n\n<pre><code>m.def(\"foo\", [](py::array_t&lt;double&gt; Arg1,                        \n                py::array_t&lt;bool&gt; Arg2){\n\n        auto bar = Arg1.unchecked&lt;1&gt;();\n        auto bar2 = Arg2.unchecked&lt;1&gt;();\n\n                    '''other simple code that doesn't alter bar or bar2'''\n\n        return bar;\n    },\n    \"Arg1\"_a,\n    \"Arg2\"_a = py_array&lt;bool&gt; ({0, 0, 0})\n);\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib", "click"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 3934626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/szRcY.jpg?s=128&g=1", "display_name": "ColorOutOfSpace", "link": "https://stackoverflow.com/users/3934626/coloroutofspace"}, "is_accepted": false, "score": 0, "last_activity_date": 1569964512, "creation_date": 1569964512, "answer_id": 58192351, "question_id": 57699434, "link": "https://stackoverflow.com/questions/57699434/button-press-event-coordinates-being-called-before-i-actually-click/58192351#58192351", "title": "&quot;Button_Press_Event&quot; Coordinates Being Called Before I Actually Click", "body": "<p>I'll come back and delete this if it isn't right (I'd comment if I had the reputation), but it looks like you have to define a global variable outside any functions first, then use the keyword before the variable name inside a function to change its scope. Try moving \"coords = []\" outside your functions (the list will no longer be empty after the first call to \"onclick\", but each new click should replace the coordinates so it shouldn't be an issue).</p>\n\n<p>Ref: <a href=\"https://www.programiz.com/python-programming/global-keyword\" rel=\"nofollow noreferrer\">https://www.programiz.com/python-programming/global-keyword</a></p>\n"}], "owner": {"reputation": 43, "user_id": 10129142, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ZkHsht1NRY/AAAAAAAAAAI/AAAAAAAA42k/1CIyHcwfHwc/photo.jpg?sz=128", "display_name": "John Wendeborn", "link": "https://stackoverflow.com/users/10129142/john-wendeborn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569964512, "creation_date": 1567022991, "last_edit_date": 1567028482, "question_id": 57699434, "link": "https://stackoverflow.com/questions/57699434/button-press-event-coordinates-being-called-before-i-actually-click", "title": "&quot;Button_Press_Event&quot; Coordinates Being Called Before I Actually Click", "body": "<p>I am plotting a fits image of a field of stars. I am then displaying circular apertures across the image on sufficiently bright stars. Next, I am trying to click on the star that I am interested in, and getting the brightness measurement out of the nearest circle. Finally, I want to use that brightness measurement for other calculations.</p>\n\n<p>My problem is that the variable I declare to store the x,y coordinates of my click (\"coords\") seems to be getting called before I actually click, resulting in an empty array and errors. </p>\n\n<p>A co-worker sent it to me many months ago, and once upon a time it worked flawlessly. But it seems that it's stopped working. It may be a result of updating some libraries/modules, but I can't be sure.</p>\n\n<p>I have tried various combinations, including declaring \"coords\" in other function, in other locations, etc. I have tried changing the order of certain lines to perhaps get \"coords\" to be called later. I've also tried writing the code from the ground up, and have had many of the same errors. Because this specific code once worked, I attach it instead of my attempts.</p>\n\n<p>To be honest, I don't fully understand the code, as I didn't write it. As a result, I don't understand what is being called when, or what any changes I've made actually do.</p>\n\n<pre><code>def plot_image(file, vmin=5, vmax=99, threshold=5, radius=25):\n\n    hdu=fits.open(file)\n    image = hdu[0].data\n    exptime = hdu[0].header['EXPTIME']\n    band = hdu[0].header['FILTERS']\n    airmass = hdu[0].header['AIRMASS']\n    readnoise = hdu[0].header['RN_01']\n    gain = hdu[0].header['GAIN_01']\n    obj = hdu[0].header['OBJECT']\n\n    sub = image[1500:2000,1500:2000]\n\n    bkg_sigma = mad_std(sub)\n\n    mean, median, std = sigma_clipped_stats(sub, sigma=3.0, maxiters=5)\n\n    daofind = photutils.DAOStarFinder(fwhm=2., threshold=threshold*bkg_sigma)  \n    sources = daofind(sub - median) \n\n    positions = (sources['xcentroid'], sources['ycentroid'])\n    apertures = photutils.CircularAperture(positions, r=radius)\n    phot_table = photutils.aperture_photometry(sub - median, apertures)\n\n    pix = select(image, apertures)\n    print(pix)\n\n    if len(pix) == 2 or len(coords) == 2:\n        distance = np.sqrt((np.array(phot_table['xcenter'])-pix[0])**2 + (np.array(phot_table['ycenter'])-pix[1])**2)\n        star = np.argmin(dist)\n        counts = phot_table[star]['aperture_sum']\n        fluxfile = open('testfile.txt')\n\n        signal = (counts * gain) / exptime\n        err = np.sqrt(counts*gain + (readnoise**2*np.pi*radius**2))\n    else:\n        print('Pix length = 0')\n\ndef select(image, apertures, vmin = 5, vmax = 99):\n\n    global coords\n    coords = []\n\n    fig = plt.figure(figsize = (9,9))\n    ax = fig.add_subplot(111)\n\n    ax.imshow(image, cmap  = 'gist_gray_r', origin='lower', vmin = np.percentile(image, vmin), vmax = np.percentile(image, vmax), interpolation='none')\n    apertures.plot(color='blue', lw=1.5, alpha=0.5, ax = ax)\n    ax.set_title('Hello')#label='Object: '+obj+'\\nFilter: '+band)\n\n    cid = fig.canvas.mpl_connect('button_press_event', onclick)\n\n    plt.show()  \n\n    fig.canvas.mpl_disconnect(cid)\n    if None in coords:\n        return [np.nan,np.nan]\n    else:\n        return np.round(coords)\n\ndef onclick(event):\n\n    x = event.xdata\n    y = event.ydata\n    global coords\n    coords = [x, y]\n\n    plt.close()\n    return \n\ndef closeonclick(event):\n    print('Close On Click')\n    plt.close()\n    return\n</code></pre>\n\n<p>Expected Result: The image is displayed with blue apertures overlaid. Then, I click on the desired star and the coordinates I click are stored to \"coords\" and printed to the console. The window displaying the image is closed alongside the previous step, as well. Finally, using those coordinates, it finds the nearest aperture and does some science with the resulting brightness.</p>\n\n<p>Actual Result: \"coords\" is immediately printed (an empty list). Immediately after, the image is displayed. Clicking it does nothing. It doesn't change the value of \"coords\", nothing else is printed, nor does the window close.</p>\n"}, {"tags": ["python", "video", "python-requests"], "comments": [{"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1567024028, "post_id": 57699426, "comment_id": 101843104, "body": "Your link doesnt work: <code>https:&#47;&#47;ww1.123movies.domains&#47;tvseries&#47;bull-season-  2&#47;9jpHC3uD&#47;8J1Mx54O&#47;wJbEvBiB-watch-free.html?  start_watching=true&amp;_=1567021316534</code>"}, {"owner": {"reputation": 535, "user_id": 11714234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c2dcfaecfa80020952f15d603ee7d7?s=128&d=identicon&r=PG&f=1", "display_name": "DarkLeader", "link": "https://stackoverflow.com/users/11714234/darkleader"}, "reply_to_user": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1567024423, "post_id": 57699426, "comment_id": 101843263, "body": "that&#39;s just the first link that get&#39;s created in the network tab, if you try one of the others, it will work, i just downloaded a 5 secs video with one of them"}, {"owner": {"reputation": 6977, "user_id": 1569675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d38db823058012e58e2517188b9f9bc0?s=128&d=identicon&r=PG", "display_name": "Offbeatmammal", "link": "https://stackoverflow.com/users/1569675/offbeatmammal"}, "edited": false, "score": 2, "creation_date": 1567032007, "post_id": 57699426, "comment_id": 101845523, "body": "to download all the segments of a segmented MP$ (HLS or DASH) you will need to locate the manifest (eg m3u8) and parse that and request the segments that make up the video."}, {"owner": {"reputation": 535, "user_id": 11714234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c2dcfaecfa80020952f15d603ee7d7?s=128&d=identicon&r=PG&f=1", "display_name": "DarkLeader", "link": "https://stackoverflow.com/users/11714234/darkleader"}, "edited": false, "score": 0, "creation_date": 1567032647, "post_id": 57699426, "comment_id": 101845674, "body": "well, i&#39;ve checked all of the segments in the network tab, none of them had m3u8. this subject is quite new to me, can you please provide more explanation?"}, {"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 1, "creation_date": 1567046594, "post_id": 57699426, "comment_id": 101848088, "body": "Look for <code>master.m3u8</code>. <a href=\"https://stream-4-1.loadshare.org/stream/VideoID-5Xjczd53/Ry60dtNEZdzeDHMykqym7Wj-PVhL45OMuxLNI2rIH-0HUjnD6HhzRaxQFTUG3mfRHD-_lj-hgLrzI54m6b0homRf0HJWQVMx4uxcLDIM9tY8iy60-BfUFfNIoRvUuy8O/master.m3u8?token=ip=86.187.160.71~st=1567024191~exp=1567038591~acl=/%2A~hmac=35b4ef868b0e773b14719c57df5cd9bc76c2aaefddc62e67e1649a0e7bfa370d\" rel=\"nofollow noreferrer\">Example link</a> (token might be expired now)..."}], "answers": [{"tags": [], "owner": {"reputation": 535, "user_id": 11714234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c2dcfaecfa80020952f15d603ee7d7?s=128&d=identicon&r=PG&f=1", "display_name": "DarkLeader", "link": "https://stackoverflow.com/users/11714234/darkleader"}, "is_accepted": true, "score": 0, "last_activity_date": 1567121605, "creation_date": 1567121605, "answer_id": 57718820, "question_id": 57699426, "link": "https://stackoverflow.com/questions/57699426/trying-to-download-a-video-from-a-streaming-site-cant-get-the-link-i-need/57718820#57718820", "title": "trying to download a video from a streaming site, can&#39;t get the link i need", "body": "<pre><code>import requests\nimport m3u8\n\ndef download_file(url):\n\n    local_filename = 'video.ts'\n    r = requests.get(url)\n    m3u8_master = m3u8.loads(r.text)\n    playlist_url = m3u8_master.data['playlists'][0]['uri']\n    full_url = url.split('/')\n    full_url = \"/\".join(full_url[0:-2])\n    full_url += '/'\n\n    playlist_url = full_url + playlist_url\n    new_r = requests.get(playlist_url)\n    playlist = m3u8.loads(new_r.text)\n\n    with open(local_filename, 'wb') as f:\n        for segment in playlist.data['segments']:\n            url = full_url + segment['uri']\n            req = requests.get(url)\n            f.write(req.content)\n\ndownload_file(\"https://stream-4-1.loadshare.org/stream/VideoID-uJzosrrC/JToU5G8Qcw4SHs0l5HOqkCAtsSRhJvI2h2viOe9gMFgxLwl5PZPWQn4kV3zA14s5Opr9Z-poO9unm7L3I2XsjShpoq9CezUZJWqeOBwO8bbM3wFByH_hHteLDBeCi7yF/master.m3u8?token=ip=93.173.86.29~st=1567117245~exp=1567131645~acl=/*~hmac=7926c25f1766c342bd21a2273901ce3b1a83b6b8461a861175efc0588bbaae7e\")\n</code></pre>\n\n<p>so this function works.. i got some help from this video : <a href=\"https://www.youtube.com/watch?v=bytnxnZFLeg&amp;t=232s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=bytnxnZFLeg&amp;t=232s</a> if someone wants to get a more detailed explanation.</p>\n\n<p>i had to go to the network tab and find the 'master.m3u8' request and from there try to seperate the different segments and concatenate them into a single file like Offbeatmammal and VC.One said. Thank you. </p>\n"}], "owner": {"reputation": 535, "user_id": 11714234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c2dcfaecfa80020952f15d603ee7d7?s=128&d=identicon&r=PG&f=1", "display_name": "DarkLeader", "link": "https://stackoverflow.com/users/11714234/darkleader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1467, "favorite_count": 0, "accepted_answer_id": 57718820, "answer_count": 1, "score": 0, "last_activity_date": 1567121605, "creation_date": 1567022962, "last_edit_date": 1567024856, "question_id": 57699426, "link": "https://stackoverflow.com/questions/57699426/trying-to-download-a-video-from-a-streaming-site-cant-get-the-link-i-need", "title": "trying to download a video from a streaming site, can&#39;t get the link i need", "body": "<p>so i just learned how to use the requests module (not much but i saw a couple videos) and i tried to download an episode of a series i like - 'Bull'.\nso i found a function here that seems to work for a single file :</p>\n\n<pre><code>def download_file(url):\n    local_filename = 'bull-season-2-ep-5.mp4'\n    # NOTE the stream=True parameter\n    r = requests.get(url, stream=True)\n    with open(local_filename, 'wb') as f:\n        for chunk in r.iter_content(chunk_size=1024): \n            if chunk: # filter out keep-alive new chunks\n                f.write(chunk)\n                #f.flush() commented by recommendation from J.F.Sebastian\n    return local_filename\n\ndownload_file(https://ww1.123movies.domains/tvseries/bull-season-2/9jpHC3uD/8J1Mx54O/wJbEvBiB-watch-free.html?start_watching=true&amp;_=1567021316534\")\n</code></pre>\n\n<p>but as you can see from the photo below, the file is broken down into many pieces so i can't download the whole file (when i inspected the web page its blob so i went to the network tab as you can see below).</p>\n\n<p><a href=\"https://i.stack.imgur.com/JPntn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JPntn.png\" alt=\"enter image description here\"></a></p>\n\n<p>i tried to use the first link as you can see but it doesn't work.\nthe only difference in the links that got created is the 'seg' number</p>\n\n<p>for example this is one link:</p>\n\n<p><a href=\"https://stream-4-1.loadshare.org/stream/VideoID-5Xjczd53/Ry60dtNEZdzeDHMykqym7Wj-PVhL45OMuxLNI2rIH-0HUjnD6HhzRaxQFTUG3mfRHD-_lj-hgLrzI54m6b0homRf0HJWQVMx4uxcLDIM9tY8iy60-BfUFfNIoRvUuy8O/seg-15-v1-a1.ts?token=ip=93.173.86.29~st=1567021318~exp=1567035718~acl=/\" rel=\"nofollow noreferrer\">https://stream-4-1.loadshare.org/stream/VideoID-5Xjczd53/Ry60dtNEZdzeDHMykqym7Wj-PVhL45OMuxLNI2rIH-0HUjnD6HhzRaxQFTUG3mfRHD-_lj-hgLrzI54m6b0homRf0HJWQVMx4uxcLDIM9tY8iy60-BfUFfNIoRvUuy8O/seg-15-v1-a1.ts?token=ip=93.173.86.29~st=1567021318~exp=1567035718~acl=/</a>*~hmac=6eb03c58be1eb01ce659384c30e67291748d4c86679dfca47f77edcf9ee8ec37</p>\n\n<p>another one: </p>\n\n<p><a href=\"https://stream-4-1.loadshare.org/stream/VideoID-5Xjczd53/Ry60dtNEZdzeDHMykqym7Wj-PVhL45OMuxLNI2rIH-0HUjnD6HhzRaxQFTUG3mfRHD-_lj-hgLrzI54m6b0homRf0HJWQVMx4uxcLDIM9tY8iy60-BfUFfNIoRvUuy8O/seg-20-v1-a1.ts?token=ip=93.173.86.29~st=1567021318~exp=1567035718~acl=/\" rel=\"nofollow noreferrer\">https://stream-4-1.loadshare.org/stream/VideoID-5Xjczd53/Ry60dtNEZdzeDHMykqym7Wj-PVhL45OMuxLNI2rIH-0HUjnD6HhzRaxQFTUG3mfRHD-_lj-hgLrzI54m6b0homRf0HJWQVMx4uxcLDIM9tY8iy60-BfUFfNIoRvUuy8O/seg-20-v1-a1.ts?token=ip=93.173.86.29~st=1567021318~exp=1567035718~acl=/</a>*~hmac=6eb03c58be1eb01ce659384c30e67291748d4c86679dfca47f77edcf9ee8ec37</p>\n\n<p>does anyone have a fix?\nthank you!</p>\n"}, {"tags": ["python", "pyqt"], "comments": [{"owner": {"reputation": 67, "user_id": 11985088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d939db1ace1a8ed314172d21556232f9?s=128&d=identicon&r=PG&f=1", "display_name": "inquirer", "link": "https://stackoverflow.com/users/11985088/inquirer"}, "edited": false, "score": 0, "creation_date": 1567024877, "post_id": 57699422, "comment_id": 101843434, "body": "Uploaded the file to Google drive, link updated"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567025342, "post_id": 57699422, "comment_id": 101843623, "body": "I see that it works correctly, I don&#39;t see any delay and that my PC has very few resources."}, {"owner": {"reputation": 67, "user_id": 11985088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d939db1ace1a8ed314172d21556232f9?s=128&d=identicon&r=PG&f=1", "display_name": "inquirer", "link": "https://stackoverflow.com/users/11985088/inquirer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567027065, "post_id": 57699422, "comment_id": 101844290, "body": "Added gifs, how graphics work in C# and Python."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567027359, "post_id": 57699422, "comment_id": 101844378, "body": "try with: <code>self._candlestick_serie.setUseOpenGL(True)</code>"}, {"owner": {"reputation": 67, "user_id": 11985088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d939db1ace1a8ed314172d21556232f9?s=128&d=identicon&r=PG&f=1", "display_name": "inquirer", "link": "https://stackoverflow.com/users/11985088/inquirer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1567028533, "post_id": 57699422, "comment_id": 101844750, "body": "Python is probably not designed to draw a large number of candles. What can not be said about the line chart, everything turns out very quickly."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1567028675, "post_id": 57699422, "comment_id": 101844791, "body": "That problem is not python but Qt, probably that type of series is not optimized. Some time ago we asked for more love for Qt Charts but maybe for Qt 5.14 we will see improvements or have to wait for Qt6."}, {"owner": {"reputation": 1048, "user_id": 6301394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07107ec4f2aa8d9f1d5d7819aaf545ba?s=128&d=identicon&r=PG&f=1", "display_name": "misantroop", "link": "https://stackoverflow.com/users/6301394/misantroop"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1571905934, "post_id": 57699422, "comment_id": 103396957, "body": "@eyllanesc according to docs, setUseOpenGL does not support candlestick charts. I do hope charts get more attention in the future, the current options are very limited and slow."}, {"owner": {"reputation": 14215, "user_id": 1318472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bcfa49acd6894c72b05b3aee600739c?s=128&d=identicon&r=PG", "display_name": "yamen", "link": "https://stackoverflow.com/users/1318472/yamen"}, "edited": false, "score": 1, "creation_date": 1600982583, "post_id": 57699422, "comment_id": 113269826, "body": "Try <a href=\"https://github.com/highfestiva/finplot\" rel=\"nofollow noreferrer\">github.com/highfestiva/finplot</a>, which was built expressly for this purpose and works smoothly for me with over 250,000 candles. Including panning and zooming as expected. Part of the secret is drawing less detail as the chart zooms out (eg no bodies). All PyQT based."}], "answers": [{"tags": [], "owner": {"reputation": 2488, "user_id": 1651543, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c73e24aca1ada285d1c632525006ff46?s=128&d=identicon&r=PG", "display_name": "ilmiacs", "link": "https://stackoverflow.com/users/1651543/ilmiacs"}, "is_accepted": true, "score": 3, "last_activity_date": 1567064051, "creation_date": 1567064051, "answer_id": 57705248, "question_id": 57699422, "link": "https://stackoverflow.com/questions/57699422/are-fast-candlestick-charts-possible-in-python/57705248#57705248", "title": "Are fast candlestick charts possible in Python", "body": "<p>You can try <a href=\"https://pyecharts.org/#/en-us/\" rel=\"nofollow noreferrer\">pyecharts</a>. This is based on the fantastic <a href=\"https://echarts.apache.org/en/index.html\" rel=\"nofollow noreferrer\">echarts</a> library which uses web technology for rendering. I consider the performance of this library to be state-of-the-art in open-source charting solutions. Also it is well documented and pretty easy to work with. An interactive linechart with a million points renders smoothly on a current laptop. Did not test candlesticks, though.</p>\n"}], "owner": {"reputation": 67, "user_id": 11985088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d939db1ace1a8ed314172d21556232f9?s=128&d=identicon&r=PG&f=1", "display_name": "inquirer", "link": "https://stackoverflow.com/users/11985088/inquirer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1539, "favorite_count": 0, "accepted_answer_id": 57705248, "answer_count": 1, "score": 1, "last_activity_date": 1567064051, "creation_date": 1567022942, "last_edit_date": 1567026986, "question_id": 57699422, "link": "https://stackoverflow.com/questions/57699422/are-fast-candlestick-charts-possible-in-python", "title": "Are fast candlestick charts possible in Python", "body": "<p>I tried drawing a few thousand candles in matplotlib.\nWhen scrolling the chart slows down(hangs).</p>\n\n<p>Eyllanesc helped me to realize the candlestick graph in pyqt.\nThe graph is beautiful and works faster than matplotlib.</p>\n\n<p>But, all the same the chart slows down when scrolling. I changed the code a little. The file data is available <a href=\"https://drive.google.com/file/d/1trfarfC54SeO41XN5SChJogqLwTHO6ku/view\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Are relatively fast candlestick charts possible in Python, with a large amount of data?</p>\n\n<p>The fact that I have a project in C# in it tens of thousands of candles and scrolled it much faster.</p>\n\n<p>The data for drawing me offline. And I really need a lot of candles.\nMaybe there's a function to make the graph more quickly?\n(I'm not criticizing anyone, I just want to sort this out.)</p>\n\n<p>Here's how the C# chart works, with over 40,000 candles. I attach GIF animation.</p>\n\n<p><a href=\"https://gifyu.com/image/hnUF\" rel=\"nofollow noreferrer\">C#</a></p>\n\n<p><a href=\"https://gifyu.com/image/hnU0\" rel=\"nofollow noreferrer\">Python</a></p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets, QtChart\nimport math\nimport numpy as np\nimport pandas as pd\n\ndf = pd.read_csv('file.txt',\n                         index_col='DATE',\n                         parse_dates=True,\n                         infer_datetime_format=True)\n\n\no = df.iloc[:, 0].values\nh = df.iloc[:, 1].values\nl = df.iloc[:, 2].values\nz = df.iloc[:, 3].values\n\nclass MainWindow(QtWidgets.QMainWindow):\n    def __init__(self, parent=None):\n        super().__init__(parent)\n\n        self.step = 0.1\n        self._chart_view = QtChart.QChartView()\n        self.scrollbar = QtWidgets.QScrollBar(\n            QtCore.Qt.Horizontal,\n            sliderMoved=self.onAxisSliderMoved,\n            pageStep=self.step * 100,\n        )\n        self.slider = QtWidgets.QSlider(\n            QtCore.Qt.Horizontal, sliderMoved=self.onZoomSliderMoved\n        )\n\n        central_widget = QtWidgets.QWidget()\n        self.setCentralWidget(central_widget)\n\n        lay = QtWidgets.QVBoxLayout(central_widget)\n        for w in (self._chart_view, self.scrollbar, self.slider):\n            lay.addWidget(w)\n\n        self.resize(640, 480)\n\n        self._chart = QtChart.QChart()\n\n        self._candlestick_serie = QtChart.QCandlestickSeries()\n\n\n        tm = []\n\n        for i in range(0, len(z)):\n            o_ = o[i]\n            h_ = h[i]\n            l_ = l[i]\n            c_ = z[i]\n            self._candlestick_serie.append(QtChart.QCandlestickSet(o_, h_, l_, c_))\n            tm.append(str(i))\n        min_x, max_x = 0, i\n\n        self._chart.addSeries(self._candlestick_serie)\n        self._chart.createDefaultAxes()\n        self._chart.legend().hide()\n        # self._chart.setAnimationOptions(QtChart.QChart.SeriesAnimations)\n\n        self._chart.axisX(self._candlestick_serie).setCategories(tm)\n        self._chart.axisX(self._candlestick_serie).setVisible(False)\n\n        self._chart_view.setChart(self._chart)\n        self.adjust_axes(100, 200)\n        self.lims = np.array([min_x, max_x])\n\n        self.onAxisSliderMoved(self.scrollbar.value())\n\n    def adjust_axes(self, value_min, value_max):\n        self._chart.axisX(self._candlestick_serie).setRange(\n            str(value_min), str(value_max)\n        )\n\n        if value_min &gt; 0 and value_max &gt; 0 and value_max &lt; 10000:\n            ymin = np.amin(l[int(value_min): int(value_max)])\n            ymax = np.amax(h[int(value_min): int(value_max)])\n            self._chart.axisY(self._candlestick_serie).setRange(ymin, ymax)\n\n    @QtCore.pyqtSlot(int)\n    def onAxisSliderMoved(self, value):\n        r = value / ((1 + self.step) * 100)\n        l1 = self.lims[0] + r * np.diff(self.lims)\n        l2 = l1 + np.diff(self.lims) * self.step\n        self.adjust_axes(math.floor(l1), math.ceil(l2))\n\n    @QtCore.pyqtSlot(int)\n    def onZoomSliderMoved(self, value):\n        self.step=value/100\n        self.onAxisSliderMoved(self.scrollbar.value())\n        print(value)\n\nif __name__ == \"__main__\":\n    import sys\n\n    app = QtWidgets.QApplication(sys.argv)\n    w = MainWindow()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}]