[{"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 7388024, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MRB3t.png?s=128&g=1", "display_name": "wazo", "link": "https://stackoverflow.com/users/7388024/wazo"}, "edited": false, "score": 0, "creation_date": 1524701144, "post_id": 50032931, "comment_id": 87081986, "body": "How do I split it in a proper way though? I tried using str.split() but it wasn&#39;t working properly. Thanks for helping"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 182, "user_id": 7388024, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MRB3t.png?s=128&g=1", "display_name": "wazo", "link": "https://stackoverflow.com/users/7388024/wazo"}, "edited": false, "score": 0, "creation_date": 1524701316, "post_id": 50032931, "comment_id": 87082030, "body": "You need to be more specific: &quot;it wasn&#39;t working properly&quot; tells me nothing about the problem.  Split on spaces; select elements 3 (set) and 5 (game); strip the comma off the set, convert both to <code>int</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 182, "user_id": 7388024, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MRB3t.png?s=128&g=1", "display_name": "wazo", "link": "https://stackoverflow.com/users/7388024/wazo"}, "edited": false, "score": 0, "creation_date": 1524701355, "post_id": 50032931, "comment_id": 87082039, "body": "Perhaps a better way is to do this conversion on input; store the set and game as separate columns."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1524700954, "creation_date": 1524700954, "answer_id": 50032931, "question_id": 50032912, "link": "https://stackoverflow.com/questions/50032912/order-by-text-with-strings-and-numbers/50032931#50032931", "title": "Order by text with strings and numbers", "body": "<p>The sort has worked correctly.  Your set and game are combined into a single string.  Strings sort by collating sequence, not by apparent numerical value.  If you want to sort them by those numbers, you must break out the numerical portions, convert them to integers, and sort on <em>those</em> values, rather than the concatenated string values.</p>\n\n<p>Is that enough to get you moving?</p>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1524706236, "creation_date": 1524706236, "answer_id": 50033530, "question_id": 50032912, "link": "https://stackoverflow.com/questions/50032912/order-by-text-with-strings-and-numbers/50033530#50033530", "title": "Order by text with strings and numbers", "body": "<p>By using <a href=\"https://pypi.org/project/natsort/3.4.0/\" rel=\"nofollow noreferrer\"><code>natsort</code></a> </p>\n\n<pre><code>from natsort import natsorted, ns\n\nl=df.market.tolist()\n\ndf=df.set_index('market').loc[natsorted(l)].reset_index()\ndf\nOut[130]: \n                           market     stake   profit\n0   Game Winner (Set 1, Game 1)     1605.50 -1020.30\n1   Game Winner (Set 1, Game 2)     5688.30 -1516.84\n2   Game Winner (Set 1, Game 3)     2604.00 -1205.70\n3   Game Winner (Set 1, Game 4)     4638.56 -1817.72\n4   Game Winner (Set 1, Game 5)     3600.00  1488.00\n5   Game Winner (Set 1, Game 6)     8851.72 -2776.65\n6   Game Winner (Set 1, Game 7)    10477.00 -2097.00\n7   Game Winner (Set 1, Game 10)    2825.00    85.42\n8   Game Winner (Set 1, Game 11)     700.00   100.00\n9   Game Winner (Set 1, Game 12)    2280.40     9.60\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11518, "user_id": 9510729, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HbuuPS6a5d4/AAAAAAAAAAI/AAAAAAAAAvQ/8hLG9Jvhyzc/photo.jpg?sz=128", "display_name": "jxc", "link": "https://stackoverflow.com/users/9510729/jxc"}, "is_accepted": false, "score": 0, "last_activity_date": 1524712939, "creation_date": 1524712939, "answer_id": 50034337, "question_id": 50032912, "link": "https://stackoverflow.com/questions/50032912/order-by-text-with-strings-and-numbers/50034337#50034337", "title": "Order by text with strings and numbers", "body": "<p>You can try reindex based on the extracted numbers:</p>\n\n<pre><code>idx = (df.market.str\n         .extract(r'(?P&lt;set&gt;\\d+),\\s*Game\\s*(?P&lt;game&gt;\\d+)', expand=True)\n         .astype(int)\n         .sort_values(['set','game'])\n         .index)\n\ndf.reindex(idx)\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 7388024, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MRB3t.png?s=128&g=1", "display_name": "wazo", "link": "https://stackoverflow.com/users/7388024/wazo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 50033530, "answer_count": 3, "score": 0, "last_activity_date": 1524712939, "creation_date": 1524700785, "question_id": 50032912, "link": "https://stackoverflow.com/questions/50032912/order-by-text-with-strings-and-numbers", "title": "Order by text with strings and numbers", "body": "<p>I want to order this by the column \"market\", but normal \"sort_values\" from pandas doesn't work. I want to order by set and game. Could you please help?</p>\n\n<pre><code>+---+------------------------------+----------+----------+\n|   |            market            |  stake   |  profit  |\n+---+------------------------------+----------+----------+\n| 0 | Game Winner (Set 1, Game 1)  | 1605.50  | -1020.30 |\n| 1 | Game Winner (Set 1, Game 10) | 2825.00  | 85.42    |\n| 2 | Game Winner (Set 1, Game 11) | 700.00   | 100.00   |\n| 3 | Game Winner (Set 1, Game 12) | 2280.40  | 9.60     |\n| 4 | Game Winner (Set 1, Game 2)  | 5688.30  | -1516.84 |\n| 5 | Game Winner (Set 1, Game 3)  | 2604.00  | -1205.70 |\n| 6 | Game Winner (Set 1, Game 4)  | 4638.56  | -1817.72 |\n| 7 | Game Winner (Set 1, Game 5)  | 3600.00  | 1488.00  |\n| 8 | Game Winner (Set 1, Game 6)  | 8851.72  | -2776.65 |\n| 9 | Game Winner (Set 1, Game 7)  | 10477.00 | -2097.00 |\n+---+------------------------------+----------+----------+\n</code></pre>\n\n<p>This is my df. The code I used is as follow:</p>\n\n<pre><code>test = df.groupby(\"market\")[[\"stake\",\"profit\"]].sum().reset_index().sort_values(\"market\")\n</code></pre>\n"}, {"tags": ["python", "twitter", "http-status-code-422"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524702961, "post_id": 50032822, "comment_id": 87082450, "body": "Why are you converting box_coord into a string? I&#39;d have thought the original array would be better, because it should be serialized into a JSON array, and I guess that&#39;s what the API wants."}, {"owner": {"reputation": 73, "user_id": 5605789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/--OUk15VR0ZY/AAAAAAAAAAI/AAAAAAAAAjk/39CupwxtLD0/photo.jpg?sz=128", "display_name": "Tanmim Hanifa", "link": "https://stackoverflow.com/users/5605789/tanmim-hanifa"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524706045, "post_id": 50032822, "comment_id": 87083138, "body": "@Rup how would i serialize it into a json array? Can you show me please"}], "owner": {"reputation": 73, "user_id": 5605789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/--OUk15VR0ZY/AAAAAAAAAAI/AAAAAAAAAjk/39CupwxtLD0/photo.jpg?sz=128", "display_name": "Tanmim Hanifa", "link": "https://stackoverflow.com/users/5605789/tanmim-hanifa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1524702589, "creation_date": 1524700012, "last_edit_date": 1524702589, "question_id": 50032822, "link": "https://stackoverflow.com/questions/50032822/using-searchtweets-api-twitter-api-keeps-returning-422-error", "title": "Using searchtweets API, twitter api keeps returning 422 error", "body": "<p>I am trying to retrieve historical data using <a href=\"https://github.com/twitterdev/search-tweets-python\" rel=\"nofollow noreferrer\">searchtweets</a> API but I keep getting twitter 422 error. Weird thing is, before this code I had a previous code where it had worked perfectly. But after this, the old code doesn't work either</p>\n\n<p>I have followed the documentation, double checked that I have full archive access and even regenerated my tokens and access keys.</p>\n\n<p>This is my python code :</p>\n\n<pre><code>import json\nimport csv\n\nfrom searchtweets import collect_results, load_credentials, gen_rule_payload\n\nenterprise_search_args = load_credentials(\"twitter_keys.yaml\", yaml_key = \"search_tweets_api\", env_overwrite = False)\n\nfrom_date = \"2016-06-01\"\nto_date = \"2016-06-23\"\n\nwith open('map_data/london_borough.csv', 'r', newline = \"\") as csvFile:\n    boroughs = list(csv.reader(csvFile, delimiter = ','))\n    for num, borough in enumerate(boroughs):\n        if num:\n            name = boroughs[0]\n            box_coord = borough[5]\n            if box_coord:\n                box_coord = '['+box_coord.replace(',',' ')+']'\n                print(box_coord)\n                rule = gen_rule_payload(\"brexit\", results_per_call = 100, from_date = from_date, to_date = to_date)\n                rule = json.loads(rule)\n                rule['bounding_box'] = box_coord\n                rule = json.dumps(rule)\n                print(rule)\n                tweets = collect_results(rule, max_results = 500, result_stream_args = enterprise_search_args)\n                with open('%s.csv'%(name), 'w', newline = \"\") as writeFile:\n                    for tweet in tweets:\n                        writeFile.write('%s, %s, %s\\n'%(tweet.name, tweet.created_at_string, tweet.all_text))\n</code></pre>\n\n<p>And my yaml file :</p>\n\n<pre><code>search_tweets_api:\naccount_type: premium\nendpoint: https://api.twitter.com/1.1/tweets/search/fullarchive/StreamingTweets.json\nconsumer_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nconsumer_secret: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre>\n\n<p>Upon running the above code, I get this on the console: </p>\n\n<pre><code>Grabbing bearer token from OAUTH\n[-0.105400 51.507354 -0.074673 51.521028]\n{\"query\": \"brexit\", \"maxResults\": 100, \"toDate\": \"201606230000\", \"fromDate\": \"201606010000\", \"bounding_box\": \"[-0.105400 51.507354 -0.074673 51.521028]\"}\nretrying request; current status code: 422\nretrying request; current status code: 422\n</code></pre>\n\n<p>My computer clock is set to UTC co-ordinated universal time, I have quadruple checked my bearer token and regenerated a couple of times, the application access is set to read, write and access direct messages but still have no idea how to resolve this. </p>\n\n<p>Does anyone know of a solution to this or where i may be going wrong? Any help will be greatly appreciated! </p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1566379383, "last_edit_date": 1566379383, "creation_date": 1524702563, "answer_id": 50033110, "question_id": 50032815, "link": "https://stackoverflow.com/questions/50032815/how-to-do-tf-not-equal-on-sparse-tensor/50033110#50033110", "title": "How to do tf.not_equal() on sparse tensor?", "body": "<p>I think you'll have to operate on the indices/values independently.</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\n\ndef sparse_not_equal(sparse_tensor, value):\n    indices = sparse_tensor.indices\n    values = sparse_tensor.values\n    condition = tf.squeeze(tf.where(tf.not_equal(values, value)), axis=-1)\n    indices = tf.gather(indices, condition)\n    values = tf.ones(shape=(tf.shape(indices)[0],), dtype=tf.bool)\n    return tf.SparseTensor(\n      indices,\n      values,\n      sparse_tensor.dense_shape)\n\n\ndef get_sparse():\n    vals = tf.constant([2, 3, 4, 2])\n    indices = tf.constant(np.array([[1], [4], [5], [10]]))\n    dense_shape = [16]\n    return tf.SparseTensor(indices, vals, dense_shape)\n\n\nsparse_tensor = get_sparse()\nsparse_filtered = sparse_not_equal(sparse_tensor, 2)\n\n\nwith tf.Session() as sess:\n    s = sess.run(sparse_filtered)\n\nprint(s)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8679, "user_id": 2964927, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d92c32b86efa8dba1661e34957d087b1?s=128&d=identicon&r=PG", "display_name": "borgr", "link": "https://stackoverflow.com/users/2964927/borgr"}, "edited": false, "score": 0, "creation_date": 1566379672, "post_id": 50045738, "comment_id": 101634428, "body": "One should note the behaviour on 0. And that 0 are NOT returned although they might not be equal to the value (whether constant or not)."}, {"owner": {"reputation": 4435, "user_id": 4320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70285b65cf3479028fac427ae92096f?s=128&d=identicon&r=PG", "display_name": "Peter Szoldan", "link": "https://stackoverflow.com/users/4320693/peter-szoldan"}, "reply_to_user": {"reputation": 8679, "user_id": 2964927, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d92c32b86efa8dba1661e34957d087b1?s=128&d=identicon&r=PG", "display_name": "borgr", "link": "https://stackoverflow.com/users/2964927/borgr"}, "edited": false, "score": 0, "creation_date": 1566468992, "post_id": 50045738, "comment_id": 101669633, "body": "@borgr Well a sparse tensor&#39;s definition is that all non-specified values are implicitly assumed to be zero. So if there&#39;s an explicit zero in one of the matrices and no value there on the other, then those are equal and should not be returned as non-equal."}], "tags": [], "owner": {"reputation": 4435, "user_id": 4320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70285b65cf3479028fac427ae92096f?s=128&d=identicon&r=PG", "display_name": "Peter Szoldan", "link": "https://stackoverflow.com/users/4320693/peter-szoldan"}, "is_accepted": false, "score": 1, "last_activity_date": 1524757442, "last_edit_date": 1524757442, "creation_date": 1524753329, "answer_id": 50045738, "question_id": 50032815, "link": "https://stackoverflow.com/questions/50032815/how-to-do-tf-not-equal-on-sparse-tensor/50045738#50045738", "title": "How to do tf.not_equal() on sparse tensor?", "body": "<p>Supposing you want to compare two sparse tensors, and you have numbers in them, I think it's easiest to subtract one from the other and keep resulting non-zero values as \"True\" with <code>tf.sparse_retain()</code>. DomJack's answer only works if you want to compare a sparse tensor to a constant, but that's much easier with <code>tf.sparse_retain()</code> like the function <code>sparse_not_equal_to_constant()</code> below. (Please note this is not an accurate <strong>not_equal</strong> operation because it only tests existing values for inequality. Since the non-listed elements of a sparse tensor are zero, if the constant we're comparing to is not itself zero, then the rest of the matrix should also be marked as not equal. That's best done when converting back to dense, with the <code>default_value</code> parameter, but considering where the matrix had values to start with.) Tested code for comparing two sparse tensors, including function to compare it to constant:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\ndef sparse_not_equal_to_constant( s, c ):\n    a = tf.sparse_retain( s, tf.not_equal( c, s.values ) )\n    return tf.SparseTensor( a.indices, tf.ones_like( a.values, dtype = tf.bool ), dense_shape = s.dense_shape )\n\ndef sparse_not_equal( a, b ):\n    neg_b = tf.SparseTensor( b.indices, -b.values, dense_shape = b.dense_shape )\n    difference = tf.sparse_add( a, neg_b )\n    return sparse_not_equal_to_constant( difference, 0.0 )\n\n# test data\na = tf.SparseTensor( [ [ 0, 0 ], [ 1, 4 ], [ 2, 3 ] ], [ 5.0, 6, 7 ], dense_shape = ( 5, 5 ) )\nb = tf.SparseTensor( [ [ 0, 0 ], [ 0, 2 ], [ 2, 3 ] ], [ 5.0, 6, 2 ], dense_shape = ( 5, 5 ) )\ne = sparse_not_equal( a, b )\nf = tf.sparse_tensor_to_dense( e, default_value = False )\n\nwith tf.Session() as sess:\n    print( sess.run( f ) )\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>[[False False  True False False]<br>\n   [False False False False  True]<br>\n   [False False False  True False]<br>\n   [False False False False False]<br>\n   [False False False False False]]  </p>\n</blockquote>\n\n<p>as expected.</p>\n"}], "owner": {"reputation": 1283, "user_id": 39123, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/aaaaf18c8b8b06db93ab848eda85a530?s=128&d=identicon&r=PG", "display_name": "Geoffrey Anderson", "link": "https://stackoverflow.com/users/39123/geoffrey-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566379383, "creation_date": 1524699983, "last_edit_date": 1524700207, "question_id": 50032815, "link": "https://stackoverflow.com/questions/50032815/how-to-do-tf-not-equal-on-sparse-tensor", "title": "How to do tf.not_equal() on sparse tensor?", "body": "<p>I get <code>TypeError: Failed to convert object</code>. Is there some way to do <code>tf.not_equal()</code> or equivalent on a sparse tensor?  It must stay sparse; conversion to dense not permitted.</p>\n"}, {"tags": ["python", "file", "io"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524700190, "post_id": 50032810, "comment_id": 87081776, "body": "There&#39;s nothing about <code>rstrip</code> that will close the file. <code>rstrip</code> doesn&#39;t even <i>see</i> the file, just each line you read from it. Plus, it doesn&#39;t get called until after you <code>print f.closed</code>, so it would be too late for it to do anything."}, {"owner": {"reputation": 187, "user_id": 1261658, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7fd84f31283b18f77ca3ba3cc5f0c9d?s=128&d=identicon&r=PG", "display_name": "Zhehao Chen", "link": "https://stackoverflow.com/users/1261658/zhehao-chen"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524700286, "post_id": 50032810, "comment_id": 87081796, "body": "But then something would have closed the file since on the previous line it is open. Unless False for f.closed actually means it is closed."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1524700328, "post_id": 50032810, "comment_id": 87081803, "body": "The code you have works fine.  What&#39;s the next line of code?  The problem probably occurs there."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1524700442, "post_id": 50032810, "comment_id": 87081834, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the issue. An <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> means we can copy the code, paste it into an editor, change the filename to a file we have present, and run the code to reproduce the issue."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524700981, "post_id": 50032810, "comment_id": 87081952, "body": "&quot;There is literally no code that closes anything&quot; is not true: <code>with</code> closes the file. That&#39;s the whole point of using <code>with</code> statements on files."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 1261658, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7fd84f31283b18f77ca3ba3cc5f0c9d?s=128&d=identicon&r=PG", "display_name": "Zhehao Chen", "link": "https://stackoverflow.com/users/1261658/zhehao-chen"}, "edited": false, "score": 0, "creation_date": 1524700894, "post_id": 50032852, "comment_id": 87081929, "body": "Thanks! I didn&#39;t realize that I am trying to run a generator."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 1, "last_activity_date": 1524701043, "last_edit_date": 1524701043, "creation_date": 1524700330, "answer_id": 50032852, "question_id": 50032810, "link": "https://stackoverflow.com/questions/50032810/python-file-closes-itself/50032852#50032852", "title": "Python file closes itself", "body": "<p>The problem isn't in this code, but in some other code farther down that you haven't shown us.</p>\n\n<p>What you've written is creating a generator that, when iterated, will yield stripped, non-empty lines out of the file.</p>\n\n<p>That's perfectly fine. But if you don't <em>use</em> that generator until after you've closed the file, it will try to get those lines out of a closed file. (Remember, the whole point of generators is that they're <em>lazy</em>\u2014they do all the work as late as possible, using as little memory as possible.)</p>\n\n<p>From your comments, it seems like you don't think you're closing the file anywhere. But in fact you are. The whole point of using <code>with</code> statements on files is that they close the file as soon as you exit the <code>with</code> body.</p>\n\n<hr>\n\n<p>For example, if you do this:</p>\n\n<pre><code>with open(ffile, 'rb') as f:\n    print f.closed\n    lines = (line.rstrip() for line in f)\n    lines = (line for line in lines if line)\n\nfor line in lines:\n    print line\n</code></pre>\n\n<p>\u2026 that's an error, probably exactly the same kind of error you're seeing.</p>\n\n<hr>\n\n<p>But this:</p>\n\n<pre><code>with open(ffile, 'rb') as f:\n    print f.closed\n    lines = (line.rstrip() for line in f)\n    lines = (line for line in lines if line)\n\n    for line in lines:\n        print line\n</code></pre>\n\n<p>\u2026 is just fine. You're using <code>lines</code> inside the <code>with</code> statement, while the file is still open.</p>\n\n<hr>\n\n<p>And this:</p>\n\n<pre><code>with open(ffile, 'rb') as f:\n    print f.closed\n    lines = (line.rstrip() for line in f)\n    lines = (line for line in lines if line)\n    lines = list(line)\n\nfor line in lines:\n    print line\n</code></pre>\n\n<p>\u2026 is also fine. You're using the generator inside the <code>with</code> statement, and storing everything in a list, which of course is still around and taking up memory even after the file goes away.</p>\n\n<hr>\n\n<p>What you want to do is probably some variation on the first fix if possible, some variation on the second otherwise. But without seeing any of your code, there's no way of telling you anything more specific.</p>\n"}], "owner": {"reputation": 187, "user_id": 1261658, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7fd84f31283b18f77ca3ba3cc5f0c9d?s=128&d=identicon&r=PG", "display_name": "Zhehao Chen", "link": "https://stackoverflow.com/users/1261658/zhehao-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 50032852, "answer_count": 1, "score": -1, "last_activity_date": 1524701043, "creation_date": 1524699964, "last_edit_date": 1524700542, "question_id": 50032810, "link": "https://stackoverflow.com/questions/50032810/python-file-closes-itself", "title": "Python file closes itself", "body": "<p>Whenever I run the snippet here, it will print \"False\" before immediately following on the line after with \"ValueError: I/O operation on closed file\" Is there anything with rstrip that will close the file?</p>\n\n<pre><code>with open(ffile, 'rb') as f:\n    print f.closed\n    lines = (line.rstrip() for line in f)\n    lines = (line for line in lines if line) \n</code></pre>\n\n<p>This is the entire snippet</p>\n\n<pre><code>ffile = sys.argv[1]\nifile = sys.argv[2]\nsha1 = hashlib.sha1()\n\nwith open(ifile, 'rb') as f:\n    while True:\n        data = f.read(5000)\n        if not data:\n            break\n        sha1.update(data)\ndigest = sha1.hexdigest()\ndigest_int = int(digest, 16)\n\nwith open(ffile, 'rb') as f:\n    print f.closed\n    lines = (line.rstrip() for line in f)\n    lines = (line for line in lines if line) \n\n\nmaxid = 0\nfor l in lines:\n    node_name = l.split(' ')[0]\n    nextid = l.split(' ')[1]\n    nextid = int(nextid, 16)\n    if (nextid == digest_int):\n        maxid = nextid\n        break\n    elif nextid &lt; digest_int and not(\"Finger\" in node_name):\n        if nextid &gt; maxid:\n            maxid = nextid\n\nprint str(digest_int)\nprint str(maxid)\n</code></pre>\n\n<p>There is literally no code that closes anything.</p>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9482144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lTznw.jpg?s=128&g=1", "display_name": "10donovanr", "link": "https://stackoverflow.com/users/9482144/10donovanr"}, "edited": false, "score": 0, "creation_date": 1524700629, "post_id": 50032830, "comment_id": 87081873, "body": "Is this method faster than other indexing methods?"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 63, "user_id": 9482144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lTznw.jpg?s=128&g=1", "display_name": "10donovanr", "link": "https://stackoverflow.com/users/9482144/10donovanr"}, "edited": false, "score": 1, "creation_date": 1524702190, "post_id": 50032830, "comment_id": 87082250, "body": "@10donovanr This answer is fairly efficient as it is using <code>map</code> with pre-defined functions, <code>list</code> and <code>int</code>. I greated a gist here with full timings for these answers: <a href=\"https://gist.github.com/Ajax12345/def08ffd9325248e041e1fdd43178ce9\" rel=\"nofollow noreferrer\">gist.github.com/Ajax12345/def08ffd9325248e041e1fdd43178ce9</a>"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1524700085, "creation_date": 1524700085, "answer_id": 50032830, "question_id": 50032803, "link": "https://stackoverflow.com/questions/50032803/how-to-create-new-list-with-column-data-from-2-dimensinal-list/50032830#50032830", "title": "How to create new list with column data from 2 dimensinal list", "body": "<p>You can use <code>zip</code> with unpacking:</p>\n\n<pre><code>d = [[['21832', '1524', '30', '133'], ['16142', '1233', '17', '113']], \n [['23296', '1570', '34', '138'], ['17243', '1277', '18', '118']], \n [['23296', '1570', '34', '138'], ['17243', '1278', '18', '118']], \n [['25919', '1658', '35', '141'], ['19081', '1344', '21', '124']]]\nnew_d = list(map(list, zip(*[list(map(int, a)) for [*a, b], _ in d]))) \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[21832, 23296, 23296, 25919], [1524, 1570, 1570, 1658], [30, 34, 34, 35]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1524700671, "creation_date": 1524700671, "answer_id": 50032898, "question_id": 50032803, "link": "https://stackoverflow.com/questions/50032803/how-to-create-new-list-with-column-data-from-2-dimensinal-list/50032898#50032898", "title": "How to create new list with column data from 2 dimensinal list", "body": "<p>If you are happy using a 3rd party library, you can use <code>numpy</code>:</p>\n\n<pre><code>import numpy as np\n\nlst = [[['21832', '1524', '30', '133'], ['16142', '1233', '17', '113']], \n       [['23296', '1570', '34', '138'], ['17243', '1277', '18', '118']], \n       [['23296', '1570', '34', '138'], ['17243', '1278', '18', '118']], \n       [['25919', '1658', '35', '141'], ['19081', '1344', '21', '124']]]\n\nres = np.array(lst)[:,0,:3].T\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>array([['21832', '23296', '23296', '25919'],\n       ['1524', '1570', '1570', '1658'],\n       ['30', '34', '34', '35']],\n      dtype='&lt;U11')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 2016850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e124075b47fab50c30a4be25f69ade0d?s=128&d=identicon&r=PG", "display_name": "glenn15", "link": "https://stackoverflow.com/users/2016850/glenn15"}, "is_accepted": false, "score": 0, "last_activity_date": 1524701784, "creation_date": 1524701784, "answer_id": 50033026, "question_id": 50032803, "link": "https://stackoverflow.com/questions/50032803/how-to-create-new-list-with-column-data-from-2-dimensinal-list/50033026#50033026", "title": "How to create new list with column data from 2 dimensinal list", "body": "<p>All great answers! I have to throw in a list comprehension solution...</p>\n\n<pre><code>test_lists = [[['21832', '1524', '30', '133'], ['16142', '1233', '17', '113']], \n [['23296', '1570', '34', '138'], ['17243', '1277', '18', '118']], \n [['23296', '1570', '34', '138'], ['17243', '1278', '18', '118']], \n [['25919', '1658', '35', '141'], ['19081', '1344', '21', '124']]]\n\nfirst_lists = [first_list[0] for first_list in test_lists]    \n\nfirsts_list = [elements[0] for elements in first_lists]\nseconds_list = [elements[1] for elements in first_lists]\nthirds_list = [elements[2] for elements in first_lists]\nfourths_list = [elements[3] for elements in first_lists]\n\n# firsts_list: ['21832', '23296', '23296', '25919']\n# seconds_list: ['1524', '1570', '1570', '1658']\n# thirds_list: ['30', '34', '34', '35']\n# fourths_list: ['133', '138', '138', '141']\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9697620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71b809e2f4542656254a39966ab58c6?s=128&d=identicon&r=PG&f=1", "display_name": "kakanaldo", "link": "https://stackoverflow.com/users/9697620/kakanaldo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50032898, "answer_count": 3, "score": 1, "last_activity_date": 1524701784, "creation_date": 1524699905, "question_id": 50032803, "link": "https://stackoverflow.com/questions/50032803/how-to-create-new-list-with-column-data-from-2-dimensinal-list", "title": "How to create new list with column data from 2 dimensinal list", "body": "<p>I have this list  </p>\n\n<pre><code>[[['21832', '1524', '30', '133'], ['16142', '1233', '17', '113']], \n [['23296', '1570', '34', '138'], ['17243', '1277', '18', '118']], \n [['23296', '1570', '34', '138'], ['17243', '1278', '18', '118']], \n [['25919', '1658', '35', '141'], ['19081', '1344', '21', '124']]]\n</code></pre>\n\n<p>And I want to create new list like,  </p>\n\n<pre><code>[21832,23296,23296,25919]\n[1524,1570,1570,1658]\n[30,34,34,35]\n</code></pre>\n\n<p>How can I do?</p>\n"}, {"tags": ["python", "python-3.x", "pygtk", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 294, "user_id": 5651419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ROKBW.jpg?s=128&g=1", "display_name": "What", "link": "https://stackoverflow.com/users/5651419/what"}, "is_accepted": false, "score": 0, "last_activity_date": 1524701722, "creation_date": 1524701722, "answer_id": 50033018, "question_id": 50032779, "link": "https://stackoverflow.com/questions/50032779/alternating-switches-on-off/50033018#50033018", "title": "Alternating Switches ON/OFF?", "body": "<p>You can implement a similar logic to what I wrote:</p>\n\n<pre><code>#!/usr/bin/env python\n\n\nclass Switch:\n    _State = False\n\n    def __init__(self, StartingPosition=False):\n        self._State = StartingPosition\n\n    def SwitchON(self):\n        self._State = True\n\n    def SwitchOFF(self):\n        self._State = False\n\n    def Switch(self):\n        self._State = not self._State\n\n    def GetInfo(self):\n        print(self._State)\n\n\nclass Switcher:\n    def __init__(self, switchDependencyList=[]):\n        self.SwitchDependencyList = switchDependencyList\n        if len(self.SwitchDependencyList) == 0:\n            return None\n        if not len(self.SwitchDependencyList) % 2:\n            return None\n\n    def SwitchByIndex(self, Index):\n        for i, switch in enumerate(self.SwitchDependencyList):\n            if i == Index:\n                switch.SwitchON()\n            else:\n                switch.SwitchOFF()\n\n    def GetInfo(self):\n        for switch in self.SwitchDependencyList:\n            switch.GetInfo()\n\n\nsw1 = Switch()\nsw2 = Switch()\nSwitcherModule = Switcher([sw1, sw2])\nSwitcherModule.SwitchByIndex(1)\nSwitcherModule.GetInfo()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "is_accepted": true, "score": 1, "last_activity_date": 1524735790, "last_edit_date": 1524735790, "creation_date": 1524703033, "answer_id": 50033161, "question_id": 50032779, "link": "https://stackoverflow.com/questions/50032779/alternating-switches-on-off/50033161#50033161", "title": "Alternating Switches ON/OFF?", "body": "<p>I would <a href=\"https://lazka.github.io/pgi-docs/#GObject-2.0/classes/Object.html#GObject.Object.bind_property\" rel=\"nofollow noreferrer\">bind the properties</a> of both switches, inverted and sync'ed on creation:</p>\n\n<pre><code>#!/usr/bin/python3\n\nimport gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk, GObject \n\nclass SwitcherWindow(Gtk.Window):\n\n    def __init__(self):\n        Gtk.Window.__init__(self, title=\"Alt Switch Demo\")\n        self.set_border_width(10)\n\n        hbox = Gtk.Box(spacing=10)\n        self.add(hbox)\n\n        switch1 = Gtk.Switch()\n        switch1.set_active(True)\n        hbox.pack_start(switch1, True, True, 0)\n\n        switch2 = Gtk.Switch()\n        switch2.set_active(False)\n        hbox.pack_start(switch2, True, True, 0)\n\n        switch1.bind_property(\"active\", switch2, \"active\", GObject.BindingFlags.BIDIRECTIONAL | GObject.BindingFlags.SYNC_CREATE |  GObject.BindingFlags.INVERT_BOOLEAN)   \n\n\nwin = SwitcherWindow()\nwin.connect(\"destroy\", Gtk.main_quit)\nwin.show_all()\nGtk.main()\n</code></pre>\n\n<p>The solution resides on this line of code:</p>\n\n<pre><code>switch1.bind_property(\"active\", switch2, \"active\", GObject.BindingFlags.BIDIRECTIONAL | GObject.BindingFlags.SYNC_CREATE |  GObject.BindingFlags.INVERT_BOOLEAN) \n</code></pre>\n\n<p>Here you <a href=\"https://lazka.github.io/pgi-docs/#GObject-2.0/classes/Object.html#GObject.Object.bind_property\" rel=\"nofollow noreferrer\">bind</a> the <code>\"active\"</code> property of <code>switch1</code> and <code>switch2</code> with the <a href=\"https://lazka.github.io/pgi-docs/#GObject-2.0/flags.html#GObject.BindingFlags\" rel=\"nofollow noreferrer\">binding flags</a>: <a href=\"https://lazka.github.io/pgi-docs/#GObject-2.0/flags.html#GObject.BindingFlags.BIDIRECTIONAL\" rel=\"nofollow noreferrer\">bidirectional</a>, <a href=\"https://lazka.github.io/pgi-docs/#GObject-2.0/flags.html#GObject.BindingFlags.SYNC_CREATE\" rel=\"nofollow noreferrer\">sync on create</a> and <a href=\"https://lazka.github.io/pgi-docs/#GObject-2.0/flags.html#GObject.BindingFlags.INVERT_BOOLEAN\" rel=\"nofollow noreferrer\">invert boolean</a></p>\n"}, {"comments": [{"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1524916837, "post_id": 50070032, "comment_id": 87168668, "body": "Hi Paul, the question specifically asks for GtkSwitch&#39;es to be used. Binding two properties is nothing one could characterize as &quot;complex&quot;, if you compare the question code with the solution one you would see that it has less code. I think that your answer could be a comment and IF it was a route to follow, then you could present a solution. Cheers"}, {"owner": {"reputation": 260, "user_id": 8322623, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XtjmiGIeM-U/AAAAAAAAAAI/AAAAAAAAABw/RVDz5MYOGsk/photo.jpg?sz=128", "display_name": "Paul Childs", "link": "https://stackoverflow.com/users/8322623/paul-childs"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1524949366, "post_id": 50070032, "comment_id": 87177986, "body": "No it does not ask specifically for a GtkSwitch. It just asks for a switch. A GtkSwitch is given by example. The functionality the OP asks for is a radio button and for UX it is better to present a widget that visually demonstrates that functionality than widgets that don&#39;t. None of the answers above also tinker around on the ATK side of things. It is important to establish relationships between items for accessibility."}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1524949638, "post_id": 50070032, "comment_id": 87178067, "body": "Hi again Paul, I think you are assuming too much without questioning @Mauricio Rivera. You could be right but your &quot;answer&quot; is not an answer it&#39;s a comment. If you want to present it as an answer then care to elaborate a real answer. That was just my intention. Good luck"}, {"owner": {"reputation": 260, "user_id": 8322623, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XtjmiGIeM-U/AAAAAAAAAAI/AAAAAAAAABw/RVDz5MYOGsk/photo.jpg?sz=128", "display_name": "Paul Childs", "link": "https://stackoverflow.com/users/8322623/paul-childs"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1524951090, "post_id": 50070032, "comment_id": 87178433, "body": "The OP asked open endedly to be led in the right direction. Seriously. How is it not a &quot;real&quot; answer."}], "tags": [], "owner": {"reputation": 260, "user_id": 8322623, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XtjmiGIeM-U/AAAAAAAAAAI/AAAAAAAAABw/RVDz5MYOGsk/photo.jpg?sz=128", "display_name": "Paul Childs", "link": "https://stackoverflow.com/users/8322623/paul-childs"}, "is_accepted": false, "score": 0, "last_activity_date": 1524861820, "creation_date": 1524861820, "answer_id": 50070032, "question_id": 50032779, "link": "https://stackoverflow.com/questions/50032779/alternating-switches-on-off/50070032#50070032", "title": "Alternating Switches ON/OFF?", "body": "<p>No need for anything as complex as the prelisted answers. gtk already has a radiobutton widget that does it all for you. Only thing is that when it is initialised you have no buttons set, so you have to pick one to set.</p>\n"}], "owner": {"reputation": 97, "user_id": 8508996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1713d4b1d9b441fef98209c2ad952425?s=128&d=identicon&r=PG", "display_name": "Mauricio", "link": "https://stackoverflow.com/users/8508996/mauricio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 1, "accepted_answer_id": 50033161, "answer_count": 3, "score": 1, "last_activity_date": 1524861820, "creation_date": 1524699683, "question_id": 50032779, "link": "https://stackoverflow.com/questions/50032779/alternating-switches-on-off", "title": "Alternating Switches ON/OFF?", "body": "<p>So I want to have my small Python Gtk window have 2 switches. When one switch is ON, the other is turned OFF, and vice versa. I am not too sure how to control both switches. If anyone can lead me in the right direction, it'd be much appreciated.</p>\n\n<pre><code>#!/usr/bin/python3\n\nimport gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk\n\nclass SwitcherWindow(Gtk.Window):\n\ndef __init__(self):\n    Gtk.Window.__init__(self, title=\"Alt Switch Demo\")\n    self.set_border_width(10)\n\n    hbox = Gtk.Box(spacing=10)\n    self.add(hbox)\n\n    switch1 = Gtk.Switch()\n    switch1.connect(\"notify::active\", self.on_switch_activated)\n    switch1.set_active(True)\n    hbox.pack_start(switch1, True, True, 0)\n\n    switch2 = Gtk.Switch()\n    switch2.connect(\"notify::active\", self.on_switch_activated)\n    switch2.set_active(False)\n    hbox.pack_start(switch2, True, True, 0)\n\n    if switch1.get_active():\n        switch2.set_active(False)\n    else:\n        switch2.set_active(True)\n\ndef on_switch_activated(self, switch, gparam):\n    builder = Gtk.Builder()\n    sw1 = builder.get_object(\"switch1\")\n    sw2 = builder.get_object(\"switch2\")\n    if switch.get_active():\n        state = \"on\"\n        sw2.set_active(False)\n    else:\n        state = \"off\"\n        print(\"Switch was turned\", state)\n\nwin = SwitcherWindow()\nwin.connect(\"destroy\", Gtk.main_quit)\nwin.show_all()\nGtk.main()\n</code></pre>\n"}, {"tags": ["python", "c++", "visual-studio", "lua", "lupa"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524699795, "post_id": 50032746, "comment_id": 87081704, "body": "I&#39;d be very surprised if the Python 2.7 distro was built with Visual Studio 2017. Can you find you which compiler they used (maybe VS2010? but it&#39;s hopefully in the documentation) and try that?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524699857, "post_id": 50032746, "comment_id": 87081717, "body": "In any case you might be better just installing Anaconda&#39;s Python 2.7 (or miniconda&#39;s). They have binary packages of lupa you can just pip install I think."}, {"owner": {"reputation": 1, "user_id": 9538010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c00b1a1d28eef3b50714e27e6c48e76?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/9538010/wang"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524703746, "post_id": 50032746, "comment_id": 87082634, "body": "i try install Anaconda and pip install lupa,but it still happen errors.   UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode characters in position 13-50: ordinal not in range(128)      ---------------------------------------- Command &quot;python setup.py egg_info&quot; failed with error code 1 in c:\\users\\wangxin\\appdata\\local\\temp\\pip-build-qjym3p\\lupa\\"}], "owner": {"reputation": 1, "user_id": 9538010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c00b1a1d28eef3b50714e27e6c48e76?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/9538010/wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1524699340, "creation_date": 1524699340, "question_id": 50032746, "link": "https://stackoverflow.com/questions/50032746/how-to-use-setuptools-to-install-lupa-with-python", "title": "how to use setuptools to install lupa with python", "body": "<p>when i install lupa happen errors.\n<br>ENV: python2.7 32bits\n<br>vcforpython\n<br>visual studio 2017\nerrors:\n<code>\n    C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -ID:\\lupa-1.6\\LuaJIT-2.0.5\\src -IC:\\Python27\\include -IC:\\Python27\\PC /Tclupa/_lupa.c /Fobuild\\temp.win32-2.7\\Release\\lupa/_lupa.obj\n_lupa.c\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(96) : warning C4005: '_CRT_STRINGIZE' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\crtdefs.h(180) : see previous definition of '_CRT_STRINGIZE'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(99) : warning C4005: '_CRT_WIDE' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\crtdefs.h(185) : see previous definition of '_CRT_WIDE'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(142) : warning C4005: '__CRTDECL' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\crtdefs.h(650) : see previous definition of '__CRTDECL'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(196) : error C2061: syntax error : identifier '__vcrt_bool'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(196) : error C2059: syntax error : ';'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\stdint.h(111) : warning C4005: 'WCHAR_MIN' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\wchar.h(43) : see previous definition of 'WCHAR_MIN'\nerror: command 'C:\\\\Users\\\\wangxin\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\cl.exe' failed with exit status 2\n</code>\nhelp!Thanks</p>\n"}, {"tags": ["python", "matlab"], "answers": [{"tags": [], "owner": {"reputation": 2804, "user_id": 3839249, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ad280b571e90d0d0bbd2e7a19fc3644?s=128&d=identicon&r=PG&f=1", "display_name": "Yvon", "link": "https://stackoverflow.com/users/3839249/yvon"}, "is_accepted": false, "score": 0, "last_activity_date": 1524706774, "creation_date": 1524706774, "answer_id": 50033599, "question_id": 50032678, "link": "https://stackoverflow.com/questions/50032678/understanding-matlab-code-indexes/50033599#50033599", "title": "Understanding Matlab code (indexes)", "body": "<pre><code>offsetConstants = [aj(1); cj(end)];\n</code></pre>\n\n<p>Create vector <code>offsetConstants</code> of 2 terms. \nOne is first term in <code>aj</code> and the other is last term in <code>cj</code>. You are totally correct on this. </p>\n\n<pre><code>for i = N:-1:1\n</code></pre>\n\n<p>The reverse style looks like you want to back-propagate the columns in <code>price</code>. \nBut be careful for the range. <code>i+1</code> goes up to <code>N+1</code> and I guess the <code>price</code> matrix has that many columns. </p>\n\n<pre><code>    price(2:end-1,i) = A*price(2:end-1,i+1);\n</code></pre>\n\n<p>You start from column <code>N+1</code>, take the entire column except for the first and last terms, and multiply by <code>A</code>, <code>A</code> being either a scalar or a <code>(N+1)x(N+1)</code> matrix. \nThen you <em>store</em> the product into column <code>N</code>. </p>\n\n<pre><code>    price([2 end-1],i) = price([2 end-1],i) + ...\n        offsetConstants.*price([1 end],i+1);\n</code></pre>\n\n<p>At last, you take the first and last terms of the <code>N+1</code>-th column, element-wise-multiply it by <code>offsetConstants</code>, and <em>add</em> it on to the <strong>second and second-last</strong> terms. </p>\n\n<p>Iterate this procedure until taking column #2 and putting back into column #1. </p>\n\n<p>Note: <code>price([2 end-1],i)</code> is equivalent to <code>[price(2,i),price(end-1,i)]</code> which is NOT <code>price(2:end-1,i)</code>. </p>\n"}], "owner": {"reputation": 51, "user_id": 9295785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916d06d0dcc224dfa07a2c8f29c31f54?s=128&d=identicon&r=PG&f=1", "display_name": "undergrad", "link": "https://stackoverflow.com/users/9295785/undergrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524706774, "creation_date": 1524698726, "question_id": 50032678, "link": "https://stackoverflow.com/questions/50032678/understanding-matlab-code-indexes", "title": "Understanding Matlab code (indexes)", "body": "<p>I've never used Matlab before and I'm trying to convert this section of code to Python but I'm not sure I really understand what is going on. Here's the code: </p>\n\n<pre><code>  % Calculate the price at all interior nodes\n    offsetConstants = [aj(1); cj(end)];\n    for i = N:-1:1\n        price(2:end-1,i) = A*price(2:end-1,i+1);\n        % Offset the first and last terms\n        price([2 end-1],i) = price([2 end-1],i) + ...\n            offsetConstants.*price([1 end],i+1);\n</code></pre>\n\n<p>So far I have been using <a href=\"http://mathesaurus.sourceforge.net/matlab-numpy.html\" rel=\"nofollow noreferrer\">http://mathesaurus.sourceforge.net/matlab-numpy.html</a> to go through it, but I'm still lost at some parts. Heres what I have so far</p>\n\n<p>OffsetConstants is creating matrix with entries from aj and cj</p>\n\n<p>For loop is taking price at all values except 1st and last row and multiplying it by A and then adding back in the first and last terms.</p>\n\n<p>Could someone explain this to me better?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 754, "user_id": 9388050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oXK-kmCt5bU/AAAAAAAAAAI/AAAAAAAAAtE/1ykdzHTITk0/photo.jpg?sz=128", "display_name": "Orhan Solak", "link": "https://stackoverflow.com/users/9388050/orhan-solak"}, "edited": false, "score": 0, "creation_date": 1524698875, "post_id": 50032647, "comment_id": 87081482, "body": "Assignment statements in Python do not copy objects, they create bindings between a target and an object. Check this. <a href=\"https://stackoverflow.com/questions/21537078/unexpected-list-behavior-in-python\" title=\"unexpected list behavior in python\">stackoverflow.com/questions/21537078/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8697, "user_id": 1055165, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d7c25776b0ca1c13212eea512370102d?s=128&d=identicon&r=PG", "display_name": "zoran119", "link": "https://stackoverflow.com/users/1055165/zoran119"}, "is_accepted": false, "score": 0, "last_activity_date": 1524698622, "creation_date": 1524698622, "answer_id": 50032664, "question_id": 50032647, "link": "https://stackoverflow.com/questions/50032647/pandas-fillna-with-inplace-true-changes-all-dataframes-that-are-equal-to-the-one/50032664#50032664", "title": "Pandas fillna with inplace=True changes all dataframes that are equal to the one that it is supposed to operate on", "body": "<p>Consider making a copy of <code>df</code> using <code>copy</code> method: <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.copy.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.copy.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 993, "user_id": 2214180, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MAvIo.jpg?s=128&g=1", "display_name": "njha", "link": "https://stackoverflow.com/users/2214180/njha"}, "is_accepted": false, "score": 0, "last_activity_date": 1524698878, "creation_date": 1524698878, "answer_id": 50032708, "question_id": 50032647, "link": "https://stackoverflow.com/questions/50032647/pandas-fillna-with-inplace-true-changes-all-dataframes-that-are-equal-to-the-one/50032708#50032708", "title": "Pandas fillna with inplace=True changes all dataframes that are equal to the one that it is supposed to operate on", "body": "<p>You're \"pointing\" <code>df2</code> to the object that <code>df</code> points to. As such, they will be the same.</p>\n\n<p>(The following is from the <a href=\"https://docs.python.org/2/library/copy.html\" rel=\"nofollow noreferrer\">Python docs</a>).</p>\n\n<p>Assignment statements in Python do not copy objects, they create bindings between a target and an object. For collections that are mutable or contain mutable items, a copy is sometimes needed so one can change one copy without changing the other.</p>\n\n<p>To copy a dataframe, do: <code>df2 = df.copy();</code></p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 9700768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6aafbeee7e0468895f5a776a1243f6a?s=128&d=identicon&r=PG&f=1", "display_name": "apkul", "link": "https://stackoverflow.com/users/9700768/apkul"}, "is_accepted": false, "score": 0, "last_activity_date": 1524702481, "creation_date": 1524702481, "answer_id": 50033099, "question_id": 50032647, "link": "https://stackoverflow.com/questions/50032647/pandas-fillna-with-inplace-true-changes-all-dataframes-that-are-equal-to-the-one/50033099#50033099", "title": "Pandas fillna with inplace=True changes all dataframes that are equal to the one that it is supposed to operate on", "body": "<p>Thanks for the responses. To summarize, inplace=True will modify any other views on the object.\nIn my example, to avoid modifying df2, I should use\n    df2 = df.copy()\ninstead of\n    df2 = df</p>\n"}], "owner": {"reputation": 63, "user_id": 9700768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6aafbeee7e0468895f5a776a1243f6a?s=128&d=identicon&r=PG&f=1", "display_name": "apkul", "link": "https://stackoverflow.com/users/9700768/apkul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 465, "favorite_count": 0, "closed_date": 1524704667, "answer_count": 3, "score": 0, "last_activity_date": 1524702481, "creation_date": 1524698453, "question_id": 50032647, "link": "https://stackoverflow.com/questions/50032647/pandas-fillna-with-inplace-true-changes-all-dataframes-that-are-equal-to-the-one", "closed_reason": "Duplicate", "title": "Pandas fillna with inplace=True changes all dataframes that are equal to the one that it is supposed to operate on", "body": "<pre><code>import numpy as np\nimport pandas as pd\n\ndf = pd.DataFrame([[np.nan, 2, 1, 0],\n                [3, 4, np.nan, 1],\n                [np.nan, np.nan, 8, 5],\n                [np.nan, 3, np.nan, 4]],\n                columns=list('ABCD'))\ndf2 = df\ndf.fillna(value = df.mean(), inplace=True)\n</code></pre>\n\n<p>Now df2 and df are identical.\nHow do I avoid changing df2?</p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 386, "user_id": 9519442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XUpBrUTm8eY/AAAAAAAAAAI/AAAAAAAAALc/KRzYUwyb2kk/photo.jpg?sz=128", "display_name": "DevOps", "link": "https://stackoverflow.com/users/9519442/devops"}, "edited": false, "score": 2, "creation_date": 1524698963, "post_id": 50032639, "comment_id": 87081503, "body": "Well, your main error seems to be <code>Symbol not found: ___sincos_stret</code>, did you check that?"}, {"owner": {"reputation": 283, "user_id": 3152377, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1037292584/picture?type=large", "display_name": "user3152377", "link": "https://stackoverflow.com/users/3152377/user3152377"}, "reply_to_user": {"reputation": 386, "user_id": 9519442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XUpBrUTm8eY/AAAAAAAAAAI/AAAAAAAAALc/KRzYUwyb2kk/photo.jpg?sz=128", "display_name": "DevOps", "link": "https://stackoverflow.com/users/9519442/devops"}, "edited": false, "score": 1, "creation_date": 1524731318, "post_id": 50032639, "comment_id": 87092679, "body": "@DevOps Thank you! That was indeed the issue. Did a bit of research and found that I needed to update from mac os 10.8.5 to something much newer. In my case, I went to High sierra and everything worked."}, {"owner": {"reputation": 386, "user_id": 9519442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XUpBrUTm8eY/AAAAAAAAAAI/AAAAAAAAALc/KRzYUwyb2kk/photo.jpg?sz=128", "display_name": "DevOps", "link": "https://stackoverflow.com/users/9519442/devops"}, "edited": false, "score": 1, "creation_date": 1524769154, "post_id": 50032639, "comment_id": 87116560, "body": "Oh nice, taking note of that! We both learned something :)"}], "owner": {"reputation": 283, "user_id": 3152377, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1037292584/picture?type=large", "display_name": "user3152377", "link": "https://stackoverflow.com/users/3152377/user3152377"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524698364, "creation_date": 1524698364, "question_id": 50032639, "link": "https://stackoverflow.com/questions/50032639/anaconda2-installation-errors-path", "title": "Anaconda2 installation errors/$PATH", "body": "<p>GOAL: Setup python to run using Anaconda2 environment</p>\n\n<p>I updated the .bash_profile in my home folder and pointed to anaconda2 first.</p>\n\n<p>export PATH=\"/Users/myname/anaconda2/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:$PATH\"</p>\n\n<p>but when I echo $PATH at the terminal, I get back this: <code>/Users/myname/anaconda2/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin</code></p>\n\n<p>Where did all that extra stuff come from? It is not in my file.</p>\n\n<p>Could this explain why my .py files are saying they can't find any of the installed anaconda2 modules like numpy and numba that I call from my scripts?</p>\n\n<p>When I run \"python /users/myname/desktop/stackoverflow.py\" at the command line I get back these errors:</p>\n\n<pre><code>Traceback (most recent call last):   File \"/users/myname/desktop/stackoverflow.py\", line 1, in &lt;module&gt;\n    import numpy as np   File \"/Users/myname/anaconda2/lib/python2.7/site-packages/numpy/__init__.py\", line 142, in &lt;module&gt;\n    from . import add_newdocs   File \"/Users/myname/anaconda2/lib/python2.7/site-packages/numpy/add_newdocs.py\", line 13, in &lt;module&gt;\n    from numpy.lib import add_newdoc   File \"/Users/myname/anaconda2/lib/python2.7/site-packages/numpy/lib/__init__.py\", line 8, in &lt;module&gt;\n    from .type_check import *   File \"/Users/myname/anaconda2/lib/python2.7/site-packages/numpy/lib/type_check.py\", line 11, in &lt;module&gt;\n    import numpy.core.numeric as _nx   File \"/Users/myname/anaconda2/lib/python2.7/site-packages/numpy/core/__init__.py\", line 34, in &lt;module&gt;\n    from . import umath ImportError: dlopen(/Users/myname/anaconda2/lib/python2.7/site-packages/numpy/core/umath.so, 2): Symbol not found: ___sincos_stret   Referenced from: /Users/myname/anaconda2/lib/python2.7/site-packages/numpy/core/umath.so Expected in: /usr/lib/libSystem.B.dylib  in /Users/myname/anaconda2/lib/python2.7/site-packages/numpy/core/umath.so\n</code></pre>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1524721583, "post_id": 50032614, "comment_id": 87087203, "body": "The difference is that <code>get</code> submits an HTTP GET request, while <code>post</code> a POST request. The problem with your code is that you&#39;re using the <code>params</code> argument for your post data - you should use <code>data</code> instead."}, {"owner": {"reputation": 445, "user_id": 2848005, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1f7cb35725be4209bcdd3c806f3bfe4a?s=128&d=identicon&r=PG&f=1", "display_name": "py_ios_dev", "link": "https://stackoverflow.com/users/2848005/py-ios-dev"}, "reply_to_user": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1524752618, "post_id": 50032614, "comment_id": 87107113, "body": "No luck, I tried this with data argument."}], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 2848005, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1f7cb35725be4209bcdd3c806f3bfe4a?s=128&d=identicon&r=PG&f=1", "display_name": "py_ios_dev", "link": "https://stackoverflow.com/users/2848005/py-ios-dev"}, "is_accepted": true, "score": 0, "last_activity_date": 1524801681, "creation_date": 1524801681, "answer_id": 50055027, "question_id": 50032614, "link": "https://stackoverflow.com/questions/50032614/timeout-error-while-requesting-data-from-southwest-using-python-requests/50055027#50055027", "title": "Timeout error while requesting data from southwest using Python requests", "body": "<p>I missed a few arguments in the headers. It is working fine now after modifying the headers. </p>\n"}], "owner": {"reputation": 445, "user_id": 2848005, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1f7cb35725be4209bcdd3c806f3bfe4a?s=128&d=identicon&r=PG&f=1", "display_name": "py_ios_dev", "link": "https://stackoverflow.com/users/2848005/py-ios-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "accepted_answer_id": 50055027, "answer_count": 1, "score": 1, "last_activity_date": 1524801681, "creation_date": 1524698114, "last_edit_date": 1524698495, "question_id": 50032614, "link": "https://stackoverflow.com/questions/50032614/timeout-error-while-requesting-data-from-southwest-using-python-requests", "title": "Timeout error while requesting data from southwest using Python requests", "body": "<pre><code>import threading\nfrom lxml import html\nfrom bs4 import BeautifulSoup\nimport time\nimport datetime \nimport requests \n\n\ndef worker(oa,da,ods):\n    \"\"\"thread worker function\"\"\"\n    print (oa + ' ' + da + ' ' + ods + ' ' +  str(datetime.datetime.now()))\n    url = \"https://www.southwest.com\"\n    xurl = \"https://www.southwest.com/api/air-booking/v1/air-booking/page/air/booking/shopping\"\n    rh = {\n    'accept': 'application/json,text/javascript,*/*;q=0.01',\n    'accept-encoding': 'gzip, deflate, br',\n    'accept-language': 'en-US,en;q=0.5',\n    'cache-control': 'max-age=0',\n    'content-length': '454',\n    'Connection' : 'keep-alive',\n    'content-type': 'application/json',\n    'origin':'https://www.southwest.com',\n    'Referer': 'https://www.southwest.com/air/booking/select.html?originationAirportCode=MCI&amp;destinationAirportCode=SJC&amp;returnAirportCode=&amp;departureDate=2018-04-26&amp;departureTimeOfDay=ALL_DAY&amp;returnDate=&amp;returnTimeOfDay=ALL_DAY&amp;adultPassengersCount=1&amp;seniorPassengersCount=0&amp;fareType=USD&amp;passengerType=ADULT&amp;tripType=oneway&amp;promoCode=&amp;reset=true&amp;redirectToVision=true&amp;int=HOMEQBOMAIR&amp;leapfrogRequest=true',\n    'user-agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36',\n    'Authorization' : 'null null',\n    'X-Api-IDToken' : 'null',\n    'X-API-Key': 'l7xx944d175ea25f4b9c903a583ea82a1c4c',\n    'X-Channel-ID': 'southwest',\n    'X-User-Experience-ID': '7dced3e7-6667-47ff-8f19-cb1df5935eed'\n    }\n\n\n    ps = {\n    'adultPassengersCount': '1',\n    'application'   :'air-booking',\n    'departureDate' :'2018-05-28',\n    'departureTimeOfDay'    :'ALL_DAY',\n    'destinationAirportCode': 'MCO',\n    'fareType'  :'USD',\n    'int'   :'HOMEQBOMAIR',\n    'leapfrogRequest': 'true',\n    'originationAirportCode':   'MCI',\n    'passengerType' :'ADULT',\n    'promoCode' : '',\n    'redirectToVision'  : 'true',\n    'reset' : 'true',\n    'returnAirportCode': '',\n    'returnDate': '',\n    'returnTimeOfDay':  'ALL_DAY',\n    'seniorPassengersCount' : '0',\n    'site'  : 'southwest',\n    'tripType'  : 'oneway'\n    }\n\n   # with requests.Session() as s:\n    #r = requests.post(url,headers = rh ,params = ps)\n#        soup = BeautifulSoup(r.content,'html.parser')\n#        soup = BeautifulSoup(r.content,'lxml')\n    #print(r)\n    #print(r.content)\n    s = requests.Session()\n    r = s.get(url)\n    #print(r.content)\n    r = s.post(xurl,headers = rh,params = ps, timeout = 10)\n    print(r.content)    \n    print(ps)\n    print(rh)\n    print (oa + ' ' + da + ' ' + ods + ' ' + str(datetime.datetime.now()))\n\n    return\n\n\n#db = MySQLdb.connect(host=\"localhost\",user=\"root\",passwd=\"\",db=\"\")\nrcount = 0\n\ntdelta = 55\n#print(strt_date)\nthreads = []\ncount = 1 \nthr_max = 2\nr = [\"MCI\",\"DEN\",\"MCI\",\"MDW\",\"MCI\",\"DAL\"]\n\nstrt_date = (datetime.date.today() + datetime.timedelta(days=tdelta)).strftime(\"%m/%d/%Y\")\n\nwhile count &lt; 2:\n    t = threading.Thread(name=r[count-1]+r[count],target=worker,args=(r[count-1],r[count],strt_date))\n    threads.append(t)\n    t.start()\n    count = count + 2\n</code></pre>\n\n<p>Please advise what I'm doing wrong here, as I am getting timeout error. \nI tried different ways using get, post, but it isn't helping. </p>\n\n<p>I got the headers &amp; params from the network tab of developer console.</p>\n\n<p>What else can I try to successfully get the search results? \nWhat is fundamental difference between using post / get in requests? </p>\n"}, {"tags": ["python", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 833, "user_id": 2311063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k14VM.jpg?s=128&g=1", "display_name": "SaifDeen", "link": "https://stackoverflow.com/users/2311063/saifdeen"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1524698458, "post_id": 50032600, "comment_id": 87081371, "body": "I&#39;m scaling down without stretching the image"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1524698498, "post_id": 50032600, "comment_id": 87081383, "body": "ah right-o then"}, {"owner": {"reputation": 822, "user_id": 9664339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chris H", "link": "https://stackoverflow.com/users/9664339/chris-h"}, "edited": false, "score": 0, "creation_date": 1524700383, "post_id": 50032600, "comment_id": 87081821, "body": "your bounding box isn&#39;t square and it doesn&#39;t look like you are accounting for it.  I&#39;d make that square and get that working before trying with a skinny bounding box."}, {"owner": {"reputation": 833, "user_id": 2311063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k14VM.jpg?s=128&g=1", "display_name": "SaifDeen", "link": "https://stackoverflow.com/users/2311063/saifdeen"}, "reply_to_user": {"reputation": 822, "user_id": 9664339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chris H", "link": "https://stackoverflow.com/users/9664339/chris-h"}, "edited": false, "score": 0, "creation_date": 1524701258, "post_id": 50032600, "comment_id": 87082014, "body": "@ChrisH can you explain why that would help me?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1524703774, "post_id": 50032600, "comment_id": 87082642, "body": "Perform the same transformations on those points as you do with the coordinates of the bounding box corners. Follow that by translation to match any cropping/padding you do."}, {"owner": {"reputation": 833, "user_id": 2311063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k14VM.jpg?s=128&g=1", "display_name": "SaifDeen", "link": "https://stackoverflow.com/users/2311063/saifdeen"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1524733899, "post_id": 50032600, "comment_id": 87094251, "body": "I&#39;m not sure how to do that @DanMa\u0161ek"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524758026, "post_id": 50032600, "comment_id": 87110781, "body": "handling the scaling is most easily done by using pixel coordinates relative to the image size (values in.ranfe 0..1). But you will have to care about the cropping."}], "answers": [{"comments": [{"owner": {"reputation": 833, "user_id": 2311063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k14VM.jpg?s=128&g=1", "display_name": "SaifDeen", "link": "https://stackoverflow.com/users/2311063/saifdeen"}, "edited": false, "score": 0, "creation_date": 1524701627, "post_id": 50032988, "comment_id": 87082109, "body": "still not at that position"}, {"owner": {"reputation": 620, "user_id": 9006027, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---4mDk3VW9Q/AAAAAAAAAAI/AAAAAAAAES8/Jj0ra-hpKpw/photo.jpg?sz=128", "display_name": "Kazuya Hatta", "link": "https://stackoverflow.com/users/9006027/kazuya-hatta"}, "reply_to_user": {"reputation": 833, "user_id": 2311063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k14VM.jpg?s=128&g=1", "display_name": "SaifDeen", "link": "https://stackoverflow.com/users/2311063/saifdeen"}, "edited": false, "score": 0, "creation_date": 1524720378, "post_id": 50032988, "comment_id": 87086774, "body": "Ah sorry! I&#39;ll try to find other causes then"}], "tags": [], "owner": {"reputation": 620, "user_id": 9006027, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/---4mDk3VW9Q/AAAAAAAAAAI/AAAAAAAAES8/Jj0ra-hpKpw/photo.jpg?sz=128", "display_name": "Kazuya Hatta", "link": "https://stackoverflow.com/users/9006027/kazuya-hatta"}, "is_accepted": false, "score": 1, "last_activity_date": 1524701450, "creation_date": 1524701450, "answer_id": 50032988, "question_id": 50032600, "link": "https://stackoverflow.com/questions/50032600/find-new-x-y-after-resizing-and-cropping-image/50032988#50032988", "title": "Find new (X,Y) after resizing and cropping image", "body": "<p>Since you define </p>\n\n<pre><code>endX = startX + 256\nendY = startY + 256\n</code></pre>\n\n<p>And make the output image as</p>\n\n<pre><code>croppedImage = padded_image[startY:endY, startX:endX]\n</code></pre>\n\n<p>Shouldn\u2019t the new width and height be 256? instead you define them as</p>\n\n<pre><code>newWidth = 256 + dim\nnewHeight = 256 + dim\n</code></pre>\n\n<p>I think <code>dim</code> is unnecessary here</p>\n"}, {"comments": [{"owner": {"reputation": 833, "user_id": 2311063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k14VM.jpg?s=128&g=1", "display_name": "SaifDeen", "link": "https://stackoverflow.com/users/2311063/saifdeen"}, "edited": false, "score": 0, "creation_date": 1524736164, "post_id": 50034445, "comment_id": 87095740, "body": "I&#39;m sorry but your solution works perfectly! My targetHeight was at 200. Its now at 256 and all points are transformed right!"}], "tags": [], "owner": {"reputation": 822, "user_id": 9664339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chris H", "link": "https://stackoverflow.com/users/9664339/chris-h"}, "is_accepted": true, "score": 8, "last_activity_date": 1524713761, "creation_date": 1524713761, "answer_id": 50034445, "question_id": 50032600, "link": "https://stackoverflow.com/questions/50032600/find-new-x-y-after-resizing-and-cropping-image/50034445#50034445", "title": "Find new (X,Y) after resizing and cropping image", "body": "<p>Here is a function that will translate directly from the original coordinates into the cropped and scaled coordinates. You can skip all the other functions and transform points directly with this</p>\n\n<pre><code>def getNewCoords(x,y):\n    bbUpperLeftX = bb[0][0]\n    bbUpperLeftY = bb[0][1] \n    bbLowerRightX = bb[2][0] \n    bbLowerRightY = bb[2][1] \n\n    sizeX = bbLowerRightX - bbUpperLeftX\n    sizeY =  bbLowerRightY - bbUpperLeftY\n\n    sizeMax = max(sizeX, sizeY)\n\n    centerX = (bbLowerRightX + bbUpperLeftX)/2\n    centerY = (bbLowerRightY + bbUpperLeftY)/2\n\n    offsetX = (centerX-sizeMax/2)*256/sizeMax\n    offsetY = (centerY-sizeMax/2)*256/sizeMax\n\n    x = x * 256/sizeMax - offsetX \n    y = y * 256/sizeMax - offsetY\n    return (x,y)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4708497, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-S5oT5fMhhIk/AAAAAAAAAAI/AAAAAAAAABQ/VvvM_6WsiKk/photo.jpg?sz=128", "display_name": "sandesh hegde", "link": "https://stackoverflow.com/users/4708497/sandesh-hegde"}, "is_accepted": false, "score": 0, "last_activity_date": 1614334384, "creation_date": 1614334384, "answer_id": 66383857, "question_id": 50032600, "link": "https://stackoverflow.com/questions/50032600/find-new-x-y-after-resizing-and-cropping-image/66383857#66383857", "title": "Find new (X,Y) after resizing and cropping image", "body": "<p>You can use <strong>augmentit</strong> to do the task.</p>\n<pre><code>    pip install augmentit\n</code></pre>\n<p>Documentation\nlink : <a href=\"https://github.com/sandesha-hegde/augmentit\" rel=\"nofollow noreferrer\">https://github.com/sandesha-hegde/augmentit</a></p>\n"}], "owner": {"reputation": 833, "user_id": 2311063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k14VM.jpg?s=128&g=1", "display_name": "SaifDeen", "link": "https://stackoverflow.com/users/2311063/saifdeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2033, "favorite_count": 1, "accepted_answer_id": 50034445, "answer_count": 3, "score": 2, "last_activity_date": 1614334384, "creation_date": 1524697968, "last_edit_date": 1525672262, "question_id": 50032600, "link": "https://stackoverflow.com/questions/50032600/find-new-x-y-after-resizing-and-cropping-image", "title": "Find new (X,Y) after resizing and cropping image", "body": "<p>I have a image that has to be cropped around a bounding box and resized to 256x256. In my original image I have an number of Points (x,y) that are in the bounding box. </p>\n\n<p>This is my original image with my original coordinates marked:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Qh18Q.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qh18Q.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Heres the cropped result, where the red points are the right x,y and the blue ones are my current result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hfxJz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hfxJz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Heres how I'm doing it:</p>\n\n<pre><code>import numpy as np\nimport cv2\n\ndef scaleBB(bb, scale):\n    centerX = (bb[0][0] + bb[1][0]) / 2\n    centerY = (bb[0][1] + bb[2][1]) / 2\n    center = (centerX, centerY)\n    scl_center = (centerX * scale[0], centerY * scale[1])\n\n    p1 = scale * (bb[0] - center) + scl_center\n    p2 = scale * (bb[1] - center) + scl_center\n    p3 = scale * (bb[2] - center) + scl_center\n    p4 = scale * (bb[3] - center) + scl_center\n\n    return np.array([p1, p2, p3, p4])\n\n\ndef expandBB(scaledBB, size):\n    bbw = np.abs(scaledBB[0][0] - scaledBB[1][0])\n    bbh = np.abs(scaledBB[0][1] - scaledBB[2][1])\n\n    expandX = (size[0] - bbw) / 2\n    expandY = (size[1] - bbh) / 2\n\n    p1 = scaledBB[0] + (-expandX, -expandY)\n    p2 = scaledBB[1] + (+expandX, -expandY)\n    p3 = scaledBB[2] + (+expandX, +expandY)\n    p4 = scaledBB[3] + (+expandX, +expandY)\n\n    return np.array([p1, p2, p3, p4])\n\ndef recalculate_joints_points(oldX, oldY, newX, newY, joints):\n    R_x = newX / oldX\n    R_y = newY / oldY\n\n    new_joints = []\n\n    for index, joint in enumerate(joints):\n        x = joint[0]\n        y = joint[1]\n\n        n_x = round(R_x * x)\n        n_y = round(R_y * y)\n\n        print(R_x, R_y, x, y, n_x, n_y)\n\n        new_joints.append([n_x, n_y])\n\n    return np.array(new_joints)\n\ndef cropAndResizeImage(label, bb):\n    img_path = \"original.jpg\"\n    # downscale\n    image = cv2.imread(img_path)\n    # orgSize = image.shape[:2]\n    label = label\n    bb = bb\n    print(bb)\n    dim = int(256 / 2)\n    # define the target height of the bounding box\n    targetHeight = 200.0\n    w = np.abs(bb[0][0] - bb[1][0])\n    h = np.abs(bb[0][1] - bb[2][1])\n    targetScale = targetHeight / h\n    print(targetScale)\n\n    scaledImage = cv2.resize(image, (0, 0), fx=targetScale, fy=targetScale)\n    scaledBB = scaleBB(bb, (targetScale, targetScale))\n    cropRegion = expandBB(scaledBB, (256, 256))\n    print(scaledBB)\n\n    print(cropRegion)\n\n    startX = int(cropRegion[0][0] + dim)\n    startY = int(cropRegion[0][1] + dim)\n    endX = startX + 256  # cropRegion[2][0] + dim\n    endY = startY + 256  #cropRegion[2][1] + dim\n    print(startX, startY, endX, endY)\n\n    padded_image = np.pad(scaledImage, ((dim, dim), (dim, dim), (0, 0)), mode='constant')\n    croppedImage = padded_image[startY:endY, startX:endX]\n\n    # new label\n    print(image.shape, croppedImage.shape)\n    oldWidth = image.shape[1]\n    oldHeight = image.shape[0]\n    newWidth = 256 + dim\n    newHeight = 256 + dim\n\n    out_label = recalculate_joints_points(oldWidth, oldHeight, newWidth, newHeight, label)\n\n    return [croppedImage, out_label]        \n\ndef main():\n    labels = np.array([[1214, 598],\n                        [1169, 424],\n                        [1238, 273],\n                        [1267, 285],\n                        [1212, 453],\n                        [1229, 622],\n                        [1253, 279],\n                        [1173, 114],\n                        [1171, 113],\n                        [1050, 60],\n                        [1106, 143],\n                        [1140, 100],\n                        [1169, 80],\n                        [1176, 148],\n                        [1152, 280],\n                        [1087, 391]])\n\n    bb = np.array([[1050, 60],\n                    [1267, 60],\n                    [1267, 622],\n                    [1050, 622]])\n\n    img, label = cropAndResizeImage(labels, bb)\n\n    for point in label:\n        print(point)\n        x,y = point\n        cv2.circle(img,(int(x),int(y)),5,(255,0,0),-11)\n\n    cv2.imshow(\"cropped\", img)\n    cv2.waitKey()    \n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>As far as I understood is to get the new (x,y) you have to calculate the ratio (difference of size in a scale factor) but it still seems off. Any help is appreciated.</p>\n\n<p><em>EDIT 1:</em></p>\n\n<p>Using as newHeight/Width just 256 produces this image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VQnh9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VQnh9.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>*EDIT 2:</p>\n\n<p>Using solution of @ChrisH its quite perfect but still a little bit off:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XWSQP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XWSQP.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "class", "oop", "constructor"], "comments": [{"owner": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1524698163, "post_id": 50032571, "comment_id": 87081289, "body": "So as written, it is a local variable and gone so you cannot access it.  You could promote it to an instance or a class variable and then you can access it.  (Google it.)  However, while Python allows this, it isn&#39;t very good OOD . . . allowed by the language, but I would complain about it if we did a code review together . . . I would expect you to have a good justification for it and probably ask you to promote it to the interface with full get/set support."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1524698354, "post_id": 50032571, "comment_id": 87081341, "body": "How do you intend to use the variable?  Will there be only one for the class, or will each instance have its own <code>default_area</code>?  If it&#39;s a default, why do you want to change it?"}, {"owner": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1524698607, "post_id": 50032571, "comment_id": 87081405, "body": "Prune - I have seen this kind of thing for testing.  In default/production it does X, but for testing it does Y; maybe accesses a mock instead of a server.  Makes my skin crawl though . . . just a bug waiting to happen when it gets abused in production later by some other team member three years later."}], "answers": [{"tags": [], "owner": {"reputation": 294, "user_id": 5651419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ROKBW.jpg?s=128&g=1", "display_name": "What", "link": "https://stackoverflow.com/users/5651419/what"}, "is_accepted": false, "score": 0, "last_activity_date": 1524698897, "last_edit_date": 1524698897, "creation_date": 1524697943, "answer_id": 50032596, "question_id": 50032571, "link": "https://stackoverflow.com/questions/50032571/take-variable-in-constructor-of-class-und-modifying-python/50032596#50032596", "title": "take variable in constructor of class und modifying python", "body": "<p>You may associate your variable with the class by writing:\n<code>self.default_area = 20</code>. Then you can access it by <code>self.default_area</code>. The variables <code>bla</code>, <code>default_area</code> are defined in the local function scope of the class-constructor and are garbage collected due to them having no references any more. When a variable has no reference it can't be accessed. The variable area in CalcArea and the result can directly be returned.</p>\n\n<pre><code>#!/usr/bin/env python\n\nclass Rectangle:\n    def __init__(self, width, height):\n        self.Width = width\n        self.Height = height\n\n        self.default_area = self.CalcArea()\n\n    def CalcArea(self):\n        return self.Width * self.Height\n\n    def GetInfo(self):\n        print(\"X:\", self.Width)\n        print(\"Y:\", self.Height)\n        print(\"Area:\", self.default_area)\n\nrect1 = Rectangle(10, 20)\nrect1.GetInfo()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1524698627, "creation_date": 1524698627, "answer_id": 50032665, "question_id": 50032571, "link": "https://stackoverflow.com/questions/50032571/take-variable-in-constructor-of-class-und-modifying-python/50032665#50032665", "title": "take variable in constructor of class und modifying python", "body": "<p>If you want all instances to share the same <code>default_area</code>, lift it to be a class attribute:</p>\n\n<pre><code>class Rectangle:\n    count = 0\n    default_area = 20\n\n# Modify\nRectangle.default_area = 30\n</code></pre>\n\n<p>If you want each instance to have its own, make it a class attribute (as described by previous postings):</p>\n\n<pre><code>def __init__(self,width, height):\n    self.width = width\n    self.height = height\n    self.default_area = 20\n\n# Modify\nrect1.default_area = 30\n</code></pre>\n\n<p>If you want this to be a true default value, make it so in the constructor:</p>\n\n<pre><code>def __init__(self,width, height, area=20):\n    self.width = width\n    self.height = height\n    self.area = area\n\n# Modify\nrect1.area = 30\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7846724, "user_type": "registered", "profile_image": "https://graph.facebook.com/1831134710542571/picture?type=large", "display_name": "Tae", "link": "https://stackoverflow.com/users/7846724/tae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1524698897, "creation_date": 1524697774, "last_edit_date": 1524698284, "question_id": 50032571, "link": "https://stackoverflow.com/questions/50032571/take-variable-in-constructor-of-class-und-modifying-python", "title": "take variable in constructor of class und modifying python", "body": "<p>How can access the value of a variable that lies within the class constructor? </p>\n\n<p>code is</p>\n\n<pre><code>class Rectangle:\n    count = 0\n\n    def __init__(self,width, height):\n        self.width = width\n        self.height = height\n\n\n        bla = 10\n        Rectangle.count += 1\n\n        default_area = 20\n\n    def calcArea(self):\n        area = self.width * self.height\n        return area\n\n    def getcount(self):\n        print(self.count)\n</code></pre>\n\n<p>I want to modify <code>default_area</code>; how can I do this?</p>\n"}, {"tags": ["python", "loops", "directory"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1524697636, "post_id": 50032511, "comment_id": 87081164, "body": "If there are no files, there&#39;s no newest file."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1524697774, "post_id": 50032511, "comment_id": 87081201, "body": "You say &quot;My goal is for it start when there is a .mp4 file in the directory&quot;. Are you trying to <i>wait</i> for such a file to exist, or have the script automatically <i>trigger</i> when such a file is created, or when such a file is fully written, or what? What&#39;s the context; how and why is this script being run when there is no input for it?"}, {"owner": {"reputation": 9, "user_id": 9699843, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "mupperco", "link": "https://stackoverflow.com/users/9699843/mupperco"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1524699347, "post_id": 50032511, "comment_id": 87081611, "body": "i prefer to automatically trier when created"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1524699871, "post_id": 50032511, "comment_id": 87081720, "body": "If you want to trigger automatically from within your program, you need to each use the [<code>FindFirstChangeNotification</code>](<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364417(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/libra&zwnj;&#8203;ry/windows/desktop/&hellip;</a><code>&zwnj;&#8203;) API (e.g., via </code>pywin32<code>)\u2014search </code>FindFirstChangeNotification python` and you should get lots of usable examples), or use a third-party wrapper from PyPI that offers portable behavior across Windows, Mac, and Linux."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1524699987, "post_id": 50032511, "comment_id": 87081747, "body": "If that sounds hard (but it really isn&#39;t that hard), you may want to instead find a helper tool that watches for directory changes and just runs a new instance of your script with the new file(s) in your <code>sys.argv</code>."}, {"owner": {"reputation": 9, "user_id": 9699843, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "mupperco", "link": "https://stackoverflow.com/users/9699843/mupperco"}, "edited": false, "score": 0, "creation_date": 1524745613, "post_id": 50032511, "comment_id": 87101853, "body": "Thank you worked perfectly"}], "answers": [{"tags": [], "owner": {"reputation": 8697, "user_id": 1055165, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d7c25776b0ca1c13212eea512370102d?s=128&d=identicon&r=PG", "display_name": "zoran119", "link": "https://stackoverflow.com/users/1055165/zoran119"}, "is_accepted": false, "score": 0, "last_activity_date": 1524698872, "creation_date": 1524698872, "answer_id": 50032707, "question_id": 50032511, "link": "https://stackoverflow.com/questions/50032511/error-valueerror-max-arg-is-an-empty-sequence/50032707#50032707", "title": "Error &quot;ValueError: max() arg is an empty sequence&quot;", "body": "<p>Check if the list is empty first:</p>\n\n<pre><code>times = [os.path.getctime(p) for p in glob.iglob('*.[Mm][Pp]4')]\nif not times or newest != max(times): # you might want different logic here...\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 9699843, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "mupperco", "link": "https://stackoverflow.com/users/9699843/mupperco"}, "is_accepted": false, "score": 0, "last_activity_date": 1524745795, "creation_date": 1524745795, "answer_id": 50043039, "question_id": 50032511, "link": "https://stackoverflow.com/questions/50032511/error-valueerror-max-arg-is-an-empty-sequence/50043039#50043039", "title": "Error &quot;ValueError: max() arg is an empty sequence&quot;", "body": "<p>Here is the working code.ended up using watchdog</p>\n\n<pre><code>import os\nimport glob\nimport numpy as np\nimport cv2\nimport time\nfrom watchdog.observers import Observer\nfrom watchdog.events import FileSystemEventHandler\n\nclass Watcher:\n    DIRECTORY_TO_WATCH = 'C:/Users/Main/Videos/PUBG/'\n\n    def __init__(self):\n        self.observer = Observer()\n\n    def run(self):\n        event_handler = Handler()\n        self.observer.schedule(event_handler, self.DIRECTORY_TO_WATCH, recursive=True)\n        self.observer.start()\n        try:\n            while True:\n                time.sleep(1)\n        except:\n            self.observer.stop()\n\n\n        self.observer.join()\n\nclass Handler(FileSystemEventHandler):\n\n    @staticmethod\n    def on_any_event(event):\n        if event.is_directory:\n            return None\n\n        elif event.event_type == 'created':\n\n            os.chdir('C:/Users/Main/Videos/PUBG/')\n\n            newest = max(glob.iglob('*.[Mm][Pp]4'), key=os.path.getctime)\n\n            os.replace((newest), 'replay.mp4')\n\n\n            cap = cv2.VideoCapture('C:/Users/Main/Videos/PUBG/replay.mp4')\n\n            def rescale_frame(frame, percent=25):\n                width = int(frame.shape[1] * percent/ 100)\n                height = int(frame.shape[0] * percent/ 100)\n                dim = (width, height)\n                return cv2.resize(frame, dim, interpolation =cv2.INTER_AREA)\n\n            while True:\n                ret ,frame = cap.read()\n                if type(frame) == type(None):\n                    break\n                frame25 = rescale_frame(frame, percent=25)\n                cv2.imshow('frame25',frame25)\n                if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n                    break\n            cap.release()\n            cv2.destroyAllWindows()\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9699843, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "mupperco", "link": "https://stackoverflow.com/users/9699843/mupperco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1232, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1524745795, "creation_date": 1524697290, "question_id": 50032511, "link": "https://stackoverflow.com/questions/50032511/error-valueerror-max-arg-is-an-empty-sequence", "title": "Error &quot;ValueError: max() arg is an empty sequence&quot;", "body": "<p>I get error. The reason i get the error is when there are no more files with .mp4 in directory. My goal is for it start when there is a .mp4 file in the directory, but having trouble figuring out loops. </p>\n\n<pre><code>File \"C:\\PUBG\\nn.py\", line 8, in &lt;module&gt;\n    newest = max(glob.iglob('*.[Mm][Pp]4'), ke\nValueError: max() arg is an empty sequence\n</code></pre>\n\n<hr>\n\n<pre><code>import os\nimport glob\nimport numpy as np\nimport cv2\n\nos.chdir('C:/Users/Main/Videos/PUBG/')\n\nnewest = max(glob.iglob('*.[Mm][Pp]4'), key=os.path.getctime)\n\nos.replace((newest), 'replay.mp4')\n\nif newest != max(glob.iglob('*.[Mm][Pp]4'), key=os.path.getctime):\n    cap = cv2.VideoCapture('C:/Users/Main/Videos/PUBG/replay.mp4')\n\n    def rescale_frame(frame, percent=25):\n        width = int(frame.shape[1] * percent/ 100)\n        height = int(frame.shape[0] * percent/ 100)\n        dim = (width, height)\n        return cv2.resize(frame, dim, interpolation =cv2.INTER_AREA)\n\n    while True:\n        ret ,frame = cap.read()\n        if type(frame) == type(None):\n            break\n        frame25 = rescale_frame(frame, percent=25)\n        cv2.imshow('frame25',frame25)\n        if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n            break\n    cap.release()\n    cv2.destroyAllWindows()\nos.remove('replay.mp4')\n</code></pre>\n"}, {"tags": ["python", "linked-list"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524697732, "post_id": 50032481, "comment_id": 87081188, "body": "First, you almost never want to call dunder methods like <code>__iter__</code> and <code>__next__</code>. Use <code>it = iter(items)</code> and <code>next(it)</code>. Also, you should check <code>spam is None</code>, or sometimes <code>not spam</code>, but never <code>spam == None</code> except in very rare cases."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1524697744, "post_id": 50032481, "comment_id": 87081195, "body": "You&#39;re only calling <code>print</code> once, why would you expect it to print multiple times?  You&#39;re still going to need a loop.  If you can&#39;t use a <code>for</code> loop, (a silly restriction, but whatever) that only leaves <code>while</code> loops"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524699514, "post_id": 50032481, "comment_id": 87081631, "body": "One last thing: An iterator class should almost always have an <code>__iter__</code> method that just does a <code>return self</code>."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9459158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c200785fac7ddd371c12fc17ed1c2ed1?s=128&d=identicon&r=PG&f=1", "display_name": "yoman", "link": "https://stackoverflow.com/users/9459158/yoman"}, "edited": false, "score": 0, "creation_date": 1524698154, "post_id": 50032581, "comment_id": 87081287, "body": "Cheers! That would be helpful"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1524698264, "last_edit_date": 1524698264, "creation_date": 1524697856, "answer_id": 50032581, "question_id": 50032481, "link": "https://stackoverflow.com/questions/50032481/linked-list-iterator-python/50032581#50032581", "title": "linked list iterator python", "body": "<p>To iterate all of the items, you need some kind of loop\u2014whether explicit or implicit.</p>\n\n<hr>\n\n<p>You\u2019re not allowed to use <code>for val in items:</code>, which is the most obvious solution, but you can do a loop with <code>while</code>:</p>\n\n<pre><code>it = iter(items)\nwhile True:\n    try:\n        print(next(it))\n    except StopIteration:\n        break\n</code></pre>\n\n<p>This is, in fact, very close to what a <code>for</code> loop does under the covers.</p>\n\n<hr>\n\n<p>Or you can loop implicitly, say, with the <code>list</code> constructor\u2014or, even better, just by splatting the iterator:</p>\n\n<pre><code>print(*items, sep='\\n')\n</code></pre>\n\n<p>(Of course if this is a homework assignment, that's the kind of answer that will get you an F if the teacher thinks you don't understand why it works, but maybe an A if you can explain it\u2026)</p>\n\n<hr>\n\n<p>Or you can use recursion:</p>\n\n<pre><code>def printemall(items):\n    print(next(items))\n    printemall(items)\ntry:\n    printemall(iter(items))\nexcept StopIteration:\n    pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 717, "user_id": 613944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c99e588713f3e4161d7a95e1fe9fcd?s=128&d=identicon&r=PG", "display_name": "ssword", "link": "https://stackoverflow.com/users/613944/ssword"}, "is_accepted": false, "score": 3, "last_activity_date": 1573553760, "last_edit_date": 1573553760, "creation_date": 1573552200, "answer_id": 58816011, "question_id": 50032481, "link": "https://stackoverflow.com/questions/50032481/linked-list-iterator-python/58816011#58816011", "title": "linked list iterator python", "body": "<p>Just as mentioned by @abarnert , you always need a <code>__iter__</code> method for the iterator class. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class LinkedListIterator:\n    def __init__(self, head):\n        self.current = head\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        if not self.current:\n            raise StopIteration\n        else:\n            item = self.current.get_data()\n            self.current = self.current.get_next()\n            return item\n\nclass LinkedList:\n    def __init__(self):\n        self.head = None\n\n    def __iter__(self):\n        return LinkedListIterator(self.head)\n\n    def add(self, item): \n        new_node = Node(item)\n        new_node.set_next(self.head)\n        self.head = new_node\n</code></pre>\n\n<p>Now that your class is iterable, you can use \"for...in\" loop:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>test_list = LinkedList()\ntest_list.add(1)\ntest_list.add(2)\ntest_list.add(3)\nfor item in test_list:\n    print(item)\n</code></pre>\n\n<p>Please check the <a href=\"https://thispointer.com/python-how-to-make-a-class-iterable-create-iterator-class-for-it/\" rel=\"nofollow noreferrer\">tutorial here</a>.  </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 15021876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5700195fae20abd39d14c0ec31c17a8d?s=128&d=identicon&r=PG&f=1", "display_name": "Craggl", "link": "https://stackoverflow.com/users/15021876/craggl"}, "is_accepted": false, "score": -1, "last_activity_date": 1610853345, "creation_date": 1610853345, "answer_id": 65756997, "question_id": 50032481, "link": "https://stackoverflow.com/questions/50032481/linked-list-iterator-python/65756997#65756997", "title": "linked list iterator python", "body": "<p>Instead of a helper class, I found that a helper function is a bit cleaner:</p>\n<pre><code>class ListNode():\n  def __init__(self, val):\n    self.val = val\n    self.next = None\n\n  def __str__(self):\n    return ' -&gt; '.join(str(v) for v in self)\n\n  def __iter__(self):\n    return ListIterator(self)\n\ndef ListIterator(head):\n  while head:\n    yield head.val\n    head = head.next\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 14683007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15c774fe156455b72c0954612e9f8c8?s=128&d=identicon&r=PG&f=1", "display_name": "Henrik Melfald Kittang", "link": "https://stackoverflow.com/users/14683007/henrik-melfald-kittang"}, "is_accepted": false, "score": 1, "last_activity_date": 1618993931, "last_edit_date": 1618993931, "creation_date": 1618856468, "answer_id": 67167364, "question_id": 50032481, "link": "https://stackoverflow.com/questions/50032481/linked-list-iterator-python/67167364#67167364", "title": "linked list iterator python", "body": "<p>You can use the <code>yield</code> keyword to make a generator so you dont have to implement <code>__next__()</code></p>\n<pre><code>class LinkedList:\n    def __init__(self):\n        self.head = None\n\n    def __iter__(self):\n        curNode = self.head\n        while curNode:\n            yield curNode.value\n            curNode = curNode.nextNode\n\n    def add(self, item): \n        new_node = Node(item)\n        new_node.set_next(self.head)\n        self.head = new_node\n</code></pre>\n<p>And in your <code>print_iterator_explicit</code> function you can do it like this</p>\n<pre><code>def print_iterator_explicit(items):       \n    iterator = iter(ll)\n    while True:\n        try:\n            print(next(iterator))\n        except StopIteration:\n            break\n</code></pre>\n<p>Check out this link for more information on iterators and generators: <a href=\"https://anandology.com/python-practice-book/iterators.html\" rel=\"nofollow noreferrer\">Iterators and generators</a></p>\n<p>A little side note: your <code>head</code> variable is behaving like a <code>tail</code>. In a linked list the first node is called the head and the last is called the tail</p>\n"}], "owner": {"reputation": 45, "user_id": 9459158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c200785fac7ddd371c12fc17ed1c2ed1?s=128&d=identicon&r=PG&f=1", "display_name": "yoman", "link": "https://stackoverflow.com/users/9459158/yoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5241, "favorite_count": 2, "answer_count": 4, "score": 2, "last_activity_date": 1618993931, "creation_date": 1524697110, "question_id": 50032481, "link": "https://stackoverflow.com/questions/50032481/linked-list-iterator-python", "title": "linked list iterator python", "body": "<p>I want to write a function called print_iterator_explicit() which prints all of the items in a linked list by making use of the Iterator.  However, you are not permitted to use the standard \"for ... in\" loop syntax - instead you must create the Iterator object explicitly, and print each item by calling the next() method <br></p>\n\n<p>Use the iter() and next() methods in your function definition - and remember to handle the StopIteration exception! <br></p>\n\n<p>Below is what I've tried, but the print_iterator_explicit seems to have some problem which I can only print the first element but not the whole list.</p>\n\n<pre><code>class LinkedListIterator:\n\ndef __init__(self, head):\n    self.current = head\n\ndef __next__(self):\n    if self.current == None:\n        raise StopIteration\n    else:\n        item = self.current.get_data()\n        self.current = self.current.get_next()\n        return item\n\nclass LinkedList:\n\ndef __init__(self):\n    self.head = None\n\ndef __iter__(self):\n    return LinkedListIterator(self.head)\n\ndef add(self, item): \n    new_node = Node(item)\n    new_node.set_next(self.head)\n    self.head = new_node\n\ndef print_iterator_explicit(items):\n    it = items.__iter__()\n    print(it.__next__())\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "euclidean-distance"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1524701700, "post_id": 50032472, "comment_id": 87082129, "body": "When you get to a resolution, please remember to up-vote useful things and accept your favourite answer (even if you have to write it yourself), so Stack Overflow can properly archive the question."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1524699134, "creation_date": 1524699134, "answer_id": 50032729, "question_id": 50032472, "link": "https://stackoverflow.com/questions/50032472/remove-point-from-list-if-within-certain-threshold-of-any-other-point/50032729#50032729", "title": "Remove point from list if within certain threshold of any other point", "body": "<p>Your algorithm very carefully checks against <em>only</em> the point most recently added to the list, <code>new[-1]</code>.  This is insufficient.  You need another loop to make sure that you check against <em>each</em> element of <code>new</code>.  Something like this:</p>\n\n<pre><code>for n in lst:\n    too_close = False\n    for seen_point in new:  \n        # Is any previous point too close to this one (n)?\n        if not new or ((n[0] - seen_point[0]) ** 2 +     \\\n                       (n[1] - seen_point[1]) ** 2) ** .5 &lt; diff:\n            too_close = True\n            break\n\n    # If no point was too close, add this one to the \"new\" list.\n    if not too_close:\n        new.append(n)\n</code></pre>\n"}], "owner": {"reputation": 621, "user_id": 1378365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397d151de070eb420cb9802924a78dac?s=128&d=identicon&r=PG", "display_name": "mb567", "link": "https://stackoverflow.com/users/1378365/mb567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1524699198, "creation_date": 1524697062, "last_edit_date": 1524699198, "question_id": 50032472, "link": "https://stackoverflow.com/questions/50032472/remove-point-from-list-if-within-certain-threshold-of-any-other-point", "title": "Remove point from list if within certain threshold of any other point", "body": "<p>I have code that filters points from a list where the distance between them is below 3:</p>\n\n<pre><code>import numpy\nlst_x = [0,1,2,3,4,5,6,7,8,9,10]\nlst_y = [9,1,3,2,7,6,2,7,2,3,8]\nlst = numpy.column_stack((lst_x,lst_y))\n\ndiff = 3\n\nnew = []\nfor n in lst:\n    if not new or ((n[0] - new[-1][0]) ** 2 + (n[1] - new[-1][1]) ** 2) ** .5 &gt;= diff:\n    new.append(n)\n</code></pre>\n\n<p>The problem is that the output is:</p>\n\n<pre><code>[array([0, 9]), array([1, 1]), array([4, 7]), array([6, 2]), array([7, 7]), array([8, 2]), array([10,  8])]\n</code></pre>\n\n<p>point <code>[6,2]</code> and <code>[8,2]</code> are closer than 3 to each other yet they are in the results, I believe this is because the for loop is only checking one point then jumping to the next.</p>\n\n<p>How can I make it check all numbers at every point.</p>\n"}, {"tags": ["python", "arrays", "function", "delay", "vpython"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 2938778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bba86c7fd893c2b35a80c53c3b3cbea6?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/2938778/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1524762634, "creation_date": 1524762634, "answer_id": 50048573, "question_id": 50032470, "link": "https://stackoverflow.com/questions/50032470/delay-information-in-an-array-on-vpython/50048573#50048573", "title": "Delay Information in an Array on VPython", "body": "<p>You can just use the % modulo operator for the variable delay in a vpython program. In a vpython program you typically have a simulation loop that runs forever at a given frame rate.</p>\n\n<pre><code>delay = 30     # configurable delay\ncnt = 0\nwhile True:\n    rate(30)   # vpython simulation runs at 30 frames per second (fps)\n    cnt += 1\n    if cnt % delay == 0:      # delay one second  (delay/30fps = 1 second)\n        # do what you want with your array when the delay time has been reached.\n    else:\n        # do something else\n</code></pre>\n\n<p>John</p>\n"}], "owner": {"reputation": 1, "user_id": 9700727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alessandra Marchi", "link": "https://stackoverflow.com/users/9700727/alessandra-marchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524762634, "creation_date": 1524697052, "question_id": 50032470, "link": "https://stackoverflow.com/questions/50032470/delay-information-in-an-array-on-vpython", "title": "Delay Information in an Array on VPython", "body": "<p>I am working on a project in which I am storing angle values into an array temporarily, using them in a visual simulation, then deleting the values once the display is updated.</p>\n\n<p>I am attempting to create an identical array of the same values, however I want them delayed by a certain amount (I would like the amount to be variable). How would I go about doing this? I have considered zero padding the array at the beginning, however numpy zero padding does not allow appending values. </p>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1524697407, "post_id": 50032465, "comment_id": 87081085, "body": "The <code>if</code> clause in the list comprehension comes after the <code>for</code> clause."}, {"owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1524697724, "post_id": 50032465, "comment_id": 87081182, "body": "Thanks! It works, but I need to print the new string. This doesn&#39;t seem to work: <code>[print(str(re.sub(conv_regx, r&#39;\\3 \\2 \\4 \\5&#39;, str(i)))) for i in list(cnn) if &quot;Conv2d&quot; in str(i) ]</code>"}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1524697725, "post_id": 50032465, "comment_id": 87081184, "body": "There is also no need to <i>cast</i> the <code>re.sub()</code> result into a <code>str()</code> - it already is a string."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1524698023, "post_id": 50032465, "comment_id": 87081264, "body": "If you don&#39;t actually care about collecting all the strings in a list, using a list comprehension doesn&#39;t make much sense. Just use a <code>for</code> loop like in your original code then."}], "answers": [{"tags": [], "owner": {"reputation": 6367, "user_id": 6914441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc12c764b93fa915b8e5384f521fe12?s=128&d=identicon&r=PG&f=1", "display_name": "jferard", "link": "https://stackoverflow.com/users/6914441/jferard"}, "is_accepted": true, "score": 0, "last_activity_date": 1526056350, "creation_date": 1526056350, "answer_id": 50296622, "question_id": 50032465, "link": "https://stackoverflow.com/questions/50032465/using-list-comprehension-to-print-converted-string/50296622#50296622", "title": "Using list comprehension to print converted string?", "body": "<p>It's not always a good idea to <em>use</em> a list comprehension, but it is always a\ngood exercise to <em>create</em> one. Let's examine your code. You have a loop that \nshould output <code>len(layerList['C'])</code> elements and then exit. You can use <code>itertools.islice</code> to get the desired number of elements from a generator.  </p>\n\n<p>Here's a first attempt:</p>\n\n<pre><code>import itertools    \n\ndef generator():\n    for layer in list(cnn):\n        if \"Conv2d\" in str(layer):\n            yield re.sub(conv_regx, r'\\3 \\2 \\4 \\5', str(layer))\n\nprint (list(itertools.islice(generator(), len(layerList['C']))))\n</code></pre>\n\n<p>But you don't need to make a list from <code>cnn</code> because it is already iterable. \nAnd you don't need <code>layer</code> but only <code>str(layer)</code>. Why don't <code>map</code> every element\nof <code>cnn</code> to a <code>str</code>?</p>\n\n<pre><code>def generator():\n    for layer in map(str, cnn):\n        if \"Conv2d\" in layer:\n            yield re.sub(conv_regx, r'\\3 \\2 \\4 \\5', layer)\n</code></pre>\n\n<p>It also becomes very easy to convert the generator function into a generator comprehension:</p>\n\n<pre><code>g = (re.sub(conv_regx, r'\\3 \\2 \\4 \\5', layer) for layer in map(str, cnn) if \"Conv2d\" in layer)\n</code></pre>\n\n<p>And the final one-liner:</p>\n\n<pre><code>g2 = itertools.islice((re.sub(conv_regx, r'\\3 \\2 \\4 \\5', layer) for layer in map(str, cnn) if \"Conv2d\" in layer), len(layerList['C']))\n</code></pre>\n\n<p>It's clearer if you express <code>re.sub(...)</code> in a function:</p>\n\n<pre><code>def format_layer(layer):\n    return re.sub(conv_regx, r'\\3 \\2 \\4 \\5', layer)\n\ng = itertools.islice((format_layer(l) for l in map(str, cnn) if \"Conv2d\" in l), len(layerList['C']))\nprint (list(g))\n</code></pre>\n\n<p>But a loop may be more easy to understand and maintain...</p>\n"}], "owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 50296622, "answer_count": 1, "score": 1, "last_activity_date": 1526056350, "creation_date": 1524697034, "last_edit_date": 1524697719, "question_id": 50032465, "link": "https://stackoverflow.com/questions/50032465/using-list-comprehension-to-print-converted-string", "title": "Using list comprehension to print converted string?", "body": "<p>I have been trying to use list comprehension to simplify this code:</p>\n\n<pre><code>c = 0\nconv_regx = r'(Conv2d).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*'\nfor layer in list(cnn):\n     if \"Conv2d\" in str(layer):\n         print(re.sub(conv_regx, r'\\3 \\2 \\4 \\5', str(layer)))\n         c+=1\n     if c == len(layerList['C']):\n         break\n</code></pre>\n\n<p>But my attempts result in errors:</p>\n\n<pre><code>conv_regx = r'(Conv2d).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*'\nprint_name = [str(re.sub(conv_regx, r'\\3 \\2 \\4 \\5', str(i))) if \"Conv2d\" in str(i) for i in list(cnn)]\n</code></pre>\n\n<p>Like this error: </p>\n\n<pre><code>    print_name = [str(re.sub(conv_regx, r'\\3 \\2 \\4 \\5', str(i))) if \"Conv2d\" in str(i) for i in list(cnn)]\n                                                                                         ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>How do I properly use list comprehension for this task?</p>\n\n<p>Edit: </p>\n\n<p>I fixed the for and if mix up, but how do I print the string?</p>\n\n<pre><code>[print(str(re.sub(conv_regx, r'\\3 \\2 \\4 \\5', str(i)))) for i in list(cnn) if \"Conv2d\" in str(i) ]\n\n\n    [print(str(re.sub(conv_regx, r'\\3 \\2 \\4 \\5', str(i)))) for i in list(cnn) if \"Conv2d\" in str(i) ]\n         ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "django", "api", "instagram", "instagram-api"], "owner": {"reputation": 33, "user_id": 9633038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195c46e2c6912763e0d9672d04e37210?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/9633038/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1524696703, "creation_date": 1524696703, "question_id": 50032423, "link": "https://stackoverflow.com/questions/50032423/cant-login-to-instagram-from-app-redirect-uri-does-not-match-registered-redir", "title": "Can&#39;t login to instagram from app - Redirect URI does not match registered redirect URI", "body": "<p>I have django app (Djnago 1.11) with <code>social-auth-app-django==2.1.0</code></p>\n\n<p>My problem is error: <code>{\"error_type\": \"OAuthException\", \"code\": 400, \"error_message\": \"Redirect URI does not match registered redirect URI\"}</code></p>\n\n<p>when I try login with:</p>\n\n<pre><code>&lt;a href=\"{% url 'social:begin' 'instagram' %}\"&gt;Connect to instagram&lt;/a&gt;\n</code></pre>\n\n<p>My settings:</p>\n\n<pre><code>SOCIAL_AUTH_INSTAGRAM_KEY = '#############'\nSOCIAL_AUTH_INSTAGRAM_SECRET = '###########'\nSOCIAL_AUTH_INSTAGRAM_AUTH_EXTRA_ARGUMENTS = {'scope': 'likes comments relationships'}\nSOCIAL_AUTH_INSTAGRAM_REDIRECT_URL = 'http://localhost:8000/'\n</code></pre>\n\n<p>On instagram site I have also: redirect url set as: <code>http://localhost:8000/</code></p>\n"}, {"tags": ["python", "scipy", "interpolation"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1524696628, "post_id": 50032370, "comment_id": 87080864, "body": "Can you normalize your values to around 1, for fitting purposes. Some algorithms just get messed up under the hood. Normalizing the input values can help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1524696726, "post_id": 50032370, "comment_id": 87080898, "body": "Given the range of values (1e-195 to 1e-53, at least), perhaps using a logarithmic scale (also) helps?"}, {"owner": {"reputation": 15, "user_id": 9500411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eeb0847b58ac255c3317907c17f739?s=128&d=identicon&r=PG&f=1", "display_name": "Dori Levanoni", "link": "https://stackoverflow.com/users/9500411/dori-levanoni"}, "edited": false, "score": 0, "creation_date": 1524701166, "post_id": 50032370, "comment_id": 87081992, "body": "@Evert I can do some scaling, but the PDF is already normalized to a sum of 1 (these are fairly narrow distributions relative to the x-axis range) so I can&#39;t easily normalize the whole set. What I can do is floor() values (giving up some precision in the tails), effectively narrowing the x-values ranges. I&#39;d prefer not to do that since some of the values of interest are in the tails."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1524707069, "post_id": 50032370, "comment_id": 87083374, "body": "I mean to normalise your data for just the fit, then scale the results back to the actual values (so you need to keep the normalisation factor). That shouldn&#39;t matter then for the PDF, just the fitting."}, {"owner": {"reputation": 15, "user_id": 9500411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eeb0847b58ac255c3317907c17f739?s=128&d=identicon&r=PG&f=1", "display_name": "Dori Levanoni", "link": "https://stackoverflow.com/users/9500411/dori-levanoni"}, "edited": false, "score": 0, "creation_date": 1524756805, "post_id": 50032370, "comment_id": 87109997, "body": "@Evert Ah...gotcha. Seems like a good idea to try out...I&#39;ll give it a shot"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9500411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eeb0847b58ac255c3317907c17f739?s=128&d=identicon&r=PG&f=1", "display_name": "Dori Levanoni", "link": "https://stackoverflow.com/users/9500411/dori-levanoni"}, "edited": false, "score": 0, "creation_date": 1524860431, "post_id": 50052531, "comment_id": 87155954, "body": "I believe local interpolation ends up with continuous first derivatives at the knots but doesn&#39;t guarantee continuous higher order derivatives? Just checking (these PDFs are used for some work later and continuous second derivatives are very helpful in those steps), as the providing continuous first derivatives is likely sufficient!"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 15, "user_id": 9500411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eeb0847b58ac255c3317907c17f739?s=128&d=identicon&r=PG&f=1", "display_name": "Dori Levanoni", "link": "https://stackoverflow.com/users/9500411/dori-levanoni"}, "edited": false, "score": 0, "creation_date": 1524915599, "post_id": 50052531, "comment_id": 87168356, "body": "@Dori I&#39;m afraid it&#39;s been a while since I was formally taught interpolation methods; I&#39;ll look into it and get back to you :)"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 15, "user_id": 9500411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eeb0847b58ac255c3317907c17f739?s=128&d=identicon&r=PG&f=1", "display_name": "Dori Levanoni", "link": "https://stackoverflow.com/users/9500411/dori-levanoni"}, "edited": false, "score": 0, "creation_date": 1524949410, "post_id": 50052531, "comment_id": 87178003, "body": "@DoriLevanoni OK, this wasn&#39;t too hard considering it&#39;s <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.PchipInterpolator.html#scipy.interpolate.PchipInterpolator\" rel=\"nofollow noreferrer\">documented</a>: &quot;<i>The first derivatives are guaranteed to be continuous, but the second derivatives may jump at <code>x_k</code></i>&quot;. Also &quot;<i>The interpolator preserves monotonicity in the interpolation data and does not overshoot if the data is not smooth</i>&quot; might be non-trivial information for you, considering how your data is very sharply peaked."}], "tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 0, "last_activity_date": 1524780586, "creation_date": 1524780586, "answer_id": 50052531, "question_id": 50032370, "link": "https://stackoverflow.com/questions/50032370/interpolateduniveriatespline-and-interp1d-cubic-splines-not-passing-through-all/50052531#50052531", "title": "InterpolatedUniveriateSpline and interp1d cubic splines not passing through all points for very small y values?", "body": "<p>The problem seems to be that the spline interpolator you're trying to use interpolates globally, which is a very bad fit for your input. Due to the exponential cut-off, a lot of your values are exactly zero due to double precision; in this range the spline interpolators give you noise.</p>\n\n<p>Here's a numerical representation of the problem, by plotting your PDF and its spline interpolant on a semilog scale (note that where the PDF is exactly zero you get missing points in the log plot):</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nplt.figure()\nplt.semilogy(out.index, out.PDF, 'r-', out.index, out.SmoothedPDF.abs(), 'bo--',\n             markerfacecolor='none') # note the abs for log\nplt.legend(['PDF', 'SmoothedPDF (univariate spline)'])\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gDjrt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gDjrt.png\" alt=\"good match in range where the original value is above 1e-30, very bad otherwise\"></a></p>\n\n<p>Firstly, I needed to call <code>.abs()</code> on the interpolated values in order to plot the <em>negative</em> ones (we're interpolating a nonzero function!). Secondly, as I already noted, the range above x=0.2 should be missing, since the function values are exactly zero here. Instead we have noise of the order of 1e-50, just like on the small-x limit. Altogether what we can see is that where your data is smaller than 1e-30 you don't stand a chance.</p>\n\n<p>My first idea was to use <code>griddata</code>, but it shows similarly bad results (even though the numeric error is much smaller in that case). So how about using a <em>local</em> interpolator? Enter the <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.pchip_interpolate.html\" rel=\"nofollow noreferrer\">piecewise cubic Hermite spline</a>. With a slightly modified version of your code, to demonstrate both interpolation and numerical stability:</p>\n\n<pre><code>import math\nimport pandas as pd\nimport numpy as np\nfrom scipy.stats import norm\nfrom scipy.interpolate import pchip_interpolate\nimport matplotlib.pyplot as plt\n\n\ndef main():\n    breadth = 0.60\n    stepsize = 0.01\n    mean = 0.0\n    stdev = 0.02\n\n    steps = 2. * breadth / stepsize + 1\n    bigRange = np.linspace(-breadth, breadth, num=5*steps)\n    retRange = bigRange[::5]\n    probs = {}\n    for ret in retRange:\n        retup = ret + stepsize / 2.\n        retdown = ret - stepsize / 2.\n        probup = norm.cdf(retup, loc=mean, scale=stdev)\n        probdown = norm.cdf(retdown, loc=mean, scale=stdev)\n        prob = probup - probdown\n        probs[ret] = prob\n    probs = pd.Series(probs, name='PDF')\n    probs = probs / probs.sum()\n\n    tmp_big = pd.Series(index=bigRange,\n                  data=pchip_interpolate(probs.index.values, probs.values, bigRange),\n                  name='SmoothedPDF_big') # denser interpolated case\n    tmp_check = pd.Series(index=retRange,\n                    data=pchip_interpolate(probs.index.values, probs.values, retRange),\n                    name='SmoothedPDF') # base points for checking stability\n\n    out = pd.concat([probs, tmp_check], axis=1)\n    out['diff'] = out['PDF'] - out['SmoothedPDF']\n\n    return out,tmp_big\n\nif __name__ == \"__main__\":    \n    out,pchipout = main()\n    plt.figure()\n    plt.semilogy(out.index, out.PDF, 'r-', pchipout.index, pchipout.abs().values, 'bo--',\n                 markerfacecolor='none')\n    plt.legend(['PDF', 'SmoothedPDF (piecewise cubic Hermit spline)'])\n\n    plt.figure()\n    plt.plot(out.index, out.PDF, 'r-', pchipout.index, pchipout.values, 'bo--',\n             markerfacecolor='none')\n    plt.legend(['PDF', 'SmoothedPDF (piecewise cubic Hermit spline)'])\n\n\n    plt.show()\n</code></pre>\n\n<p>Proof of stability:</p>\n\n<pre><code>&gt;&gt;&gt; out['diff'].any()\nFalse\n</code></pre>\n\n<p>Logarithmic plot for error scale:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7MOqV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7MOqV.png\" alt=\"plot with PCHIP spline: very nice agreement, negligible error at 1e-180 value\"></a></p>\n\n<p>As you can see, the agreement is almost perfect. Note the distinct lack of values where your original data is exactly 0. What noise remains below values of 1e-100 on the small-x range you'll have to learn live with.</p>\n\n<p>Actual plot of the interpolated result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y6AKf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y6AKf.png\" alt=\"interpolated figure on a lin scale\"></a></p>\n"}], "owner": {"reputation": 15, "user_id": 9500411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eeb0847b58ac255c3317907c17f739?s=128&d=identicon&r=PG&f=1", "display_name": "Dori Levanoni", "link": "https://stackoverflow.com/users/9500411/dori-levanoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 50052531, "answer_count": 1, "score": 1, "last_activity_date": 1524780980, "creation_date": 1524696430, "last_edit_date": 1524780980, "question_id": 50032370, "link": "https://stackoverflow.com/questions/50032370/interpolateduniveriatespline-and-interp1d-cubic-splines-not-passing-through-all", "title": "InterpolatedUniveriateSpline and interp1d cubic splines not passing through all points for very small y values?", "body": "<p>I've been looking at smoothing some probability density Functions (PDFs) using cubic splines in scipy and I'm having issues with either <code>scipy.interpolate.InterpolatedUnivariateSpline</code> or <code>scipy.interpolate.interp1d</code> not going through all the knots when I have small values of y.</p>\n\n<pre><code>import math\nimport pandas as pd\nimport numpy as np\nfrom scipy.stats import norm\nfrom scipy.interpolate import InterpolatedUnivariateSpline, interp1d\n\n\ndef main():\n    breadth = 0.60\n    stepsize = 0.01\n    mean = 0.0\n    stdev = 0.02\n\n    steps = 2. * breadth / stepsize + 1\n    retRange = np.linspace(-breadth, breadth, num=steps)\n    probs = {}\n    for ret in retRange:\n        retup = ret + stepsize / 2.\n        retdown = ret - stepsize / 2.\n        probup = norm.cdf(retup, loc=mean, scale=stdev)\n        probdown = norm.cdf(retdown, loc=mean, scale=stdev)\n        prob = probup - probdown\n        probs[ret] = prob\n    probs = pd.Series(probs, name='PDF')\n    probs = probs / probs.sum()\n\n    spl = InterpolatedUnivariateSpline(probs.index, probs, k=3, ext='zeros')\n    tmp = pd.Series(index=retRange, data=retRange, name='SmoothedPDF').map(spl)\n\n    out = pd.concat([probs, tmp], axis=1)\n    out['diff'] = out['PDF'] - out['SmoothedPDF']\n    print out\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>The issue is that the output DataFrame shows differences. I can substitute <code>interp1d</code> instead of <code>InterpolateUnivariateSpline</code> and get the same issue (though with different results). The issue is notable in that the difference in interpolated y-value at the knot point can be larger than the original y-value.</p>\n\n<pre><code>                 PDF   SmoothedPDF          diff\n-0.60  8.670691e-195 -2.650272e-50  2.650272e-50\n-0.59  2.245130e-188  2.120217e-49 -2.120217e-49\n-0.58  4.528786e-182 -9.806006e-49  9.806006e-49\n-0.57  7.116703e-176  3.816392e-48 -3.816392e-48\n-0.56  8.712391e-170 -1.431147e-47  1.431147e-47\n-0.55  8.309255e-164  5.342948e-47 -5.342948e-47\n-0.54  6.173881e-158 -1.994065e-46  1.994065e-46\n-0.53  3.573809e-152  7.441963e-46 -7.441963e-46\n-0.52  1.611710e-146 -2.777379e-45  2.777379e-45\n-0.51  5.662799e-141  1.036532e-44 -1.036532e-44\n-0.50  1.550138e-135 -3.868390e-44  3.868390e-44\n-0.49  3.306066e-130  1.443703e-43 -1.443703e-43\n-0.48  5.493659e-125 -5.387972e-43  5.387972e-43\n-0.47  7.112603e-120  2.010818e-42 -2.010818e-42\n-0.46  7.174975e-115 -7.504477e-42  7.504477e-42\n-0.45  5.639566e-110  2.800709e-41 -2.800709e-41\n-0.44  3.453932e-105 -1.045239e-40  1.045239e-40\n-0.43  1.648294e-100  3.900884e-40 -3.900884e-40\n-0.42   6.129407e-96 -1.455830e-39  1.455830e-39\n-0.41   1.776139e-91  5.433231e-39 -5.433231e-39\n-0.40   4.010714e-87 -2.027709e-38  2.027709e-38\n-0.39   7.057745e-83  7.567514e-38 -7.567514e-38\n-0.38   9.678846e-79 -2.824235e-37  2.824235e-37\n-0.37   1.034450e-74  1.054019e-36 -1.054019e-36\n-0.36   8.616667e-71 -3.933652e-36  3.933652e-36\n-0.35   5.594107e-67  1.468059e-35 -1.468059e-35\n-0.34   2.830755e-63 -5.478870e-35  5.478870e-35\n-0.33   1.116539e-59  2.044742e-34 -2.044742e-34\n-0.32   3.432949e-56 -7.631082e-34  7.631082e-34\n-0.31   8.228222e-53  2.847958e-33 -2.847958e-33\n...              ...           ...           ...\n 0.31   0.000000e+00 -7.461634e-41  7.461634e-41\n 0.32   0.000000e+00 -3.730817e-41  3.730817e-41\n 0.33   0.000000e+00 -5.022254e-42  5.022254e-42\n 0.34   0.000000e+00  3.407958e-42 -3.407958e-42\n 0.35   0.000000e+00  8.968310e-43 -8.968310e-43\n 0.36   0.000000e+00 -2.578389e-43  2.578389e-43\n 0.37   0.000000e+00 -1.177091e-43  1.177091e-43\n 0.38   0.000000e+00  9.809089e-45 -9.809089e-45\n 0.39   0.000000e+00 -3.152922e-45  3.152922e-45\n 0.40   0.000000e+00 -4.816963e-46  4.816963e-46\n 0.41   0.000000e+00 -6.568587e-47  6.568587e-47\n 0.42   0.000000e+00  4.926440e-47 -4.926440e-47\n 0.43   0.000000e+00  9.579189e-48 -9.579189e-48\n 0.44   0.000000e+00  3.763253e-48 -3.763253e-48\n 0.45   0.000000e+00  5.131708e-49 -5.131708e-49\n 0.46   0.000000e+00 -1.924391e-49  1.924391e-49\n 0.47   0.000000e+00 -1.603659e-49  1.603659e-49\n 0.48   0.000000e+00 -2.405488e-50  2.405488e-50\n 0.49   0.000000e+00 -1.202744e-50  1.202744e-50\n 0.50   0.000000e+00 -1.586954e-51  1.586954e-51\n 0.51   0.000000e+00 -2.923336e-52  2.923336e-52\n 0.52   0.000000e+00 -3.132146e-53  3.132146e-53\n 0.53   0.000000e+00  2.610122e-54 -2.610122e-54\n 0.54   0.000000e+00  3.915183e-54 -3.915183e-54\n 0.55   0.000000e+00 -1.631326e-54  1.631326e-54\n 0.56   0.000000e+00 -1.386627e-54  1.386627e-54\n 0.57   0.000000e+00 -2.650905e-55  2.650905e-55\n 0.58   0.000000e+00  1.835242e-55 -1.835242e-55\n 0.59   0.000000e+00  4.078315e-56 -4.078315e-56\n 0.60   0.000000e+00  0.000000e+00  0.000000e+00\n\n[121 rows x 3 columns]\n</code></pre>\n\n<p>And yes, I'm working on some things that involve very low probabilities hence the scale really is (sometimes) that small.</p>\n\n<p>I can do some rescaling if it's a precision issue, but before doing so I'd like to confirm that's the issue.</p>\n\n<p>As a side note, using linear interpolate (k=1) doesn't show this issue.</p>\n"}, {"tags": ["python", "ggplot2", "axes", "plotnine"], "answers": [{"comments": [{"owner": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "edited": false, "score": 0, "creation_date": 1524865003, "post_id": 50065781, "comment_id": 87157776, "body": "Thanks for your reply, but that&#39;s not what I meant. I&#39;m trying to get plotnine to display the left axis only, but adjusting the bar heights appropriately. In my example, that would mean having the top left axis to a ymax of 5 and adjust the height of the top left bar to 1. If you run my example code with the ggplot2 package, that&#39;s the result you&#39;ll get."}], "tags": [], "owner": {"reputation": 1380, "user_id": 832573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a46ff7b0517201cb1331cb200e454b?s=128&d=identicon&r=PG", "display_name": "has2k1", "link": "https://stackoverflow.com/users/832573/has2k1"}, "is_accepted": false, "score": 0, "last_activity_date": 1524843258, "creation_date": 1524843258, "answer_id": 50065781, "question_id": 50032369, "link": "https://stackoverflow.com/questions/50032369/omit-axes-with-facet-grid-plotnine/50065781#50065781", "title": "Omit axes with facet_grid - plotnine", "body": "<p>It is misleading to have free scales for all panels yet have ticks and labels for only some of them. But if you really want to, you have to drop into Matplotlib for that</p>\n\n<pre><code>import pandas as pd\nfrom plotnine import *\n\ndf=pd.DataFrame({'A':[1,1,1,1],'B':[1,9,5,11],'C':['x','x','y','y'],'D':['a','b','a','b']})\np=ggplot(df,aes('A','B'))\np = p + geom_bar(stat=\"identity\") + facet_grid('D~C',scales='free_y')\nfig, p = p.draw(return_ggplot=True)\nfor i, ax in enumerate(p.axs):\n    if i % 2:\n        ax.set_yticklabels([])\n        ax.set_yticks([])\n</code></pre>\n"}], "owner": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 738, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1524843258, "creation_date": 1524696423, "question_id": 50032369, "link": "https://stackoverflow.com/questions/50032369/omit-axes-with-facet-grid-plotnine", "title": "Omit axes with facet_grid - plotnine", "body": "<pre><code>import pandas as pd\nfrom plotnine import *\n\ndf=pd.DataFrame({'A':[1,1,1,1],'B':[1,9,5,11],'C':['x','x','y','y'],'D':['a','b','a','b']})\np=ggplot(df,aes('A','B'))\np + geom_bar(stat=\"identity\") + facet_grid('D~C',scales='free_y')\n</code></pre>\n\n<p>This will draw axes on both the left and right grids. Is there a way to omit the axes on the right grids, such that it is only visible on the left? I know I could use <code>scales=\"fixed\"</code> but I would like them to vary between rows.</p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1524696483, "post_id": 50032339, "comment_id": 87080816, "body": "That is not valid dictionary syntax. The key is separated from the value by a <code>:</code>, and the key-value pairs are separated by <code>,</code>."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": true, "score": 3, "last_activity_date": 1524697258, "last_edit_date": 1524697258, "creation_date": 1524696845, "answer_id": 50032441, "question_id": 50032339, "link": "https://stackoverflow.com/questions/50032339/trying-to-print-dictionary-values-in-python/50032441#50032441", "title": "Trying to print dictionary values in python", "body": "<p>As you have it, <code>color</code> is currently a Python <a href=\"https://docs.python.org/3.6/library/stdtypes.html#set-types-set-frozenset\" rel=\"nofollow noreferrer\">set</a> that looks like this:</p>\n\n<pre><code>{'BlueI', 'GreenB', 'IndigoV', 'OrangeY', 'R', 'RedO', 'Violet', 'YellowG'}\n</code></pre>\n\n<p>The syntax for constructing a <a href=\"https://docs.python.org/3.6/library/stdtypes.html#mapping-types-dict\" rel=\"nofollow noreferrer\">dictionary</a> needs colons, not commas, for key/value pairs:</p>\n\n<blockquote>\n  <p>Dictionaries can be created by placing a comma-separated list of key: value pairs within braces, for example: <code>{'jack': 4098, 'sjoerd': 4127} or {4098: 'jack', 4127: 'sjoerd'}</code>, or by the <code>dict()</code> constructor.</p>\n</blockquote>\n\n<p>In your case, this would be:</p>\n\n<pre><code>color = {\n    \"R\": \"Red\",\n    \"O\": \"Orange\",\n    \"Y\": \"Yellow\",\n    \"G\": \"Green\",\n    \"B\": \"Blue\",\n    \"I\": \"Indigo\",\n    \"V\": \"Violet\"\n    }\n</code></pre>\n\n<p>Alternatively, you could use a dictionary comprehension:</p>\n\n<pre><code>color = {c[0]: c for c in \n         {'Red', 'Orange', 'Yellow', 'Green', 'Blue', 'Indigo', 'Violet'}}\n</code></pre>\n\n<p>Lastly, if you're curious as to why \"Green\" and \"B\" (among others) are smushed together, that is because of Python's <a href=\"https://docs.python.org/3.6/reference/lexical_analysis.html#string-literal-concatenation\" rel=\"nofollow noreferrer\">string literal concatenation</a>.</p>\n"}], "owner": {"reputation": 101, "user_id": 9126689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YPgGvv-gP7o/AAAAAAAAAAI/AAAAAAAACdQ/oYyejCQY7yc/photo.jpg?sz=128", "display_name": "waldokhalid", "link": "https://stackoverflow.com/users/9126689/waldokhalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 50032441, "answer_count": 1, "score": 0, "last_activity_date": 1524697428, "creation_date": 1524696240, "last_edit_date": 1524697428, "question_id": 50032339, "link": "https://stackoverflow.com/questions/50032339/trying-to-print-dictionary-values-in-python", "title": "Trying to print dictionary values in python", "body": "<p>I'm trying to write a simple program that asks for input of a favorite rainbow color first letter (ROYGBIV) and print the value of the letter given. For example, if user input is \"R\", the program will print \"Red\". I tried to use dictionaries but I couldn't get it to work. Could you help me correct my mistakes?</p>\n\n<pre><code>def rainbow():\n\n    color = {\n        \"R\", \"Red\"\n        \"O\", \"Orange\"\n        \"Y\", \"Yellow\"\n        \"G\", \"Green\"\n        \"B\", \"Blue\"\n        \"I\", \"Indigo\"\n        \"V\", \"Violet\"\n        }\n\n    userint = input(\"Enter first letter of fav color: \").upper()\n\n    if userint in color:\n        print color.get(userint,\"none\")\n\n    else:\n        print(\"no match\")\n\n\n\nrainbow()`\n</code></pre>\n"}, {"tags": ["python", "jtable", "jquery-jtable"], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 3762116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0kwT8.jpg?s=128&g=1", "display_name": "Santha Kumar", "link": "https://stackoverflow.com/users/3762116/santha-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1524706920, "creation_date": 1524706920, "answer_id": 50033616, "question_id": 50032338, "link": "https://stackoverflow.com/questions/50032338/i-am-getting-jquery-jtable-error-while-fetching-data-from-the-python-server/50033616#50033616", "title": "I am getting jQuery Jtable error while fetching data from the python server", "body": "<p>I achieved this by using python jsonify to add my json data to the front end Jtable. </p>\n\n<pre><code>for result in data:\n     json_data.append(dict(zip(row_headers,result)))\nreturn jsonify(\n    {\n        'Result': \"OK\",\n        'Records': json_data,\n    }\n</code></pre>\n\n<p>)</p>\n\n<p>Thanks </p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 9516137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52343003db85c34fc0bf9eba4b87d07?s=128&d=identicon&r=PG&f=1", "display_name": "misterP", "link": "https://stackoverflow.com/users/9516137/misterp"}, "is_accepted": false, "score": 0, "last_activity_date": 1526126232, "last_edit_date": 1526126232, "creation_date": 1525881425, "answer_id": 50257539, "question_id": 50032338, "link": "https://stackoverflow.com/questions/50032338/i-am-getting-jquery-jtable-error-while-fetching-data-from-the-python-server/50257539#50257539", "title": "I am getting jQuery Jtable error while fetching data from the python server", "body": "<p>The output you are seeing is the standard jTable application error. Your listAction has passed the server response to jTable, so there is no communications error. \nWhen the json response does NOT contain Result = 'OK' it displays the application error dialog, and shows the json Message in the dialog.\nThe very fact that the error dialog appears means jTable is not seeing Result = 'OK' in your server response. Look for that first, if you are still stuck please post your json response. The dialog is blank because there is no error <code>message</code> or jTable can't see it.</p>\n"}], "owner": {"reputation": 85, "user_id": 3762116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0kwT8.jpg?s=128&g=1", "display_name": "Santha Kumar", "link": "https://stackoverflow.com/users/3762116/santha-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 50033616, "answer_count": 2, "score": 0, "last_activity_date": 1526126232, "creation_date": 1524696238, "question_id": 50032338, "link": "https://stackoverflow.com/questions/50032338/i-am-getting-jquery-jtable-error-while-fetching-data-from-the-python-server", "title": "I am getting jQuery Jtable error while fetching data from the python server", "body": "<p>I have a jQuery Jtable in the front end and I am using python flask in my server. </p>\n\n<p>I used python flask to fetch data from the MYSQL server which I can view in the JSON format in my browser but, unfortunately I couldn't able to make the JSON data into the Jtable. </p>\n\n<p>My front end jQuery Jtable is </p>\n\n<pre><code>  $('#eventsummary').jtable({\n    actions: {\n      listAction: function (postData) {\n        return $.Deferred(function ($dfd) {\n          $.ajax({\n            url: '/backend/groupdata',\n            type: 'GET',\n            data: postData,\n            success: function (data) {\n              $dfd.resolve(data);\n              console.log(\"loading \");\n            },\n          });\n        });\n      }\n    },\n    fields: {\n      irs_type: {\n        title: \"Date &amp; Time\",\n        list: true,\n      }\n    }\n  });\n\n  $('#eventsummary').jtable('load');\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sud3U.png\" rel=\"nofollow noreferrer\">and this is the error I am getting</a></p>\n\n<p>I am also able to view my console.log code in the browser, with no error in the console. </p>\n\n<p>Can someone please help me with this </p>\n\n<p>Thanks, </p>\n"}, {"tags": ["python", "parameters"], "comments": [{"owner": {"reputation": 1684, "user_id": 3044673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBqJJ.jpg?s=128&g=1", "display_name": "bla", "link": "https://stackoverflow.com/users/3044673/bla"}, "edited": false, "score": 1, "creation_date": 1524696250, "post_id": 50032261, "comment_id": 87080724, "body": "Check out <a href=\"https://docs.python.org/3/library/statistics.html#statistics.mean\" rel=\"nofollow noreferrer\"><code>statistcs.mean</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "is_accepted": false, "score": 1, "last_activity_date": 1524696677, "creation_date": 1524696677, "answer_id": 50032415, "question_id": 50032261, "link": "https://stackoverflow.com/questions/50032261/finding-the-average-of-a-function-with-two-parameters/50032415#50032415", "title": "Finding the average of a function with two parameters", "body": "<p>The simplest fix is to redefine <code>ave_list</code> to take a single list, and from main, call it once for latitude and once for longitude:</p>\n\n<pre><code>def ave_list(mylist):\n    sum = 0.0 \n    for num in mylist:\n        sum = sum + num\n    ave = sum / len(mylist)\n    return ave\n</code></pre>\n\n<p>Python allows a function to return two values as a tuple, so you could recode your original function to return (ave_lat, ave_lon).  But why add that complication?  Here it is for learning purposes, though:</p>\n\n<pre><code>def ave_list(lat_list, long_list):\n    sum = 0.0 \n    for num in lat_list:\n        sum = sum + num\n    ave_lat = sum / len(lat_list)\n    sum = 0.0 \n    for num in lon_list:\n        sum = sum + num\n    ave_lon = sum / len(lon_list)\n    return (ave_lat, ave_lon)\n\nalat, alon = ave_list([1, 2, 3, 4], [5, 6, 7, 8])\nprint(alat, alon)\n</code></pre>\n\n<p>Of course, as @bla points out in a comment, better to use <code>statistics.mean</code>:</p>\n\n<pre><code>import statistics\nalat = statistics.mean([1,2,3,4])\nalon = statistics.mean([5,6,7,8])\nprint(alat, alon)\n</code></pre>\n\n<p>It's in python3; not sure about python2.</p>\n"}, {"tags": [], "owner": {"reputation": 1684, "user_id": 3044673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBqJJ.jpg?s=128&g=1", "display_name": "bla", "link": "https://stackoverflow.com/users/3044673/bla"}, "is_accepted": false, "score": 1, "last_activity_date": 1524697053, "last_edit_date": 1524697053, "creation_date": 1524696691, "answer_id": 50032419, "question_id": 50032261, "link": "https://stackoverflow.com/questions/50032261/finding-the-average-of-a-function-with-two-parameters/50032419#50032419", "title": "Finding the average of a function with two parameters", "body": "<p>To get rid of the error you should pass two values to your function. Instead of using it a better approach would be with <a href=\"https://docs.python.org/3/library/statistics.html#statistics.mean\" rel=\"nofollow noreferrer\"><code>statistics.mean</code></a>:</p>\n\n<pre><code>from statistics import mean\n&gt;&gt;&gt; mean([1, 2, 3])\n2\n&gt;&gt;&gt; mean([1, 2, 3.0])\n2.0\n</code></pre>\n\n<p>If that module is not available you may use:</p>\n\n<pre><code>&gt;&gt;&gt; data = [1, 2, 3]\n&gt;&gt;&gt; sum(data) / len(data)\n2\n</code></pre>\n\n<p>if you have only ints and want the result as float in python2 just convert one of the sides to float:</p>\n\n<pre><code>&gt;&gt;&gt; data = [1, 2, 3, 7]\n&gt;&gt;&gt; sum(data) / len(data)\n3\n&gt;&gt;&gt; sum(data) / float(len(data))\n3.25\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1170, "user_id": 7454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d561d513c2ddb28d2d321f2f8e495?s=128&d=identicon&r=PG&f=1", "display_name": "leoschet", "link": "https://stackoverflow.com/users/7454638/leoschet"}, "is_accepted": false, "score": 0, "last_activity_date": 1524696873, "creation_date": 1524696873, "answer_id": 50032444, "question_id": 50032261, "link": "https://stackoverflow.com/questions/50032261/finding-the-average-of-a-function-with-two-parameters/50032444#50032444", "title": "Finding the average of a function with two parameters", "body": "<p>You should remove <code>long_list</code> from <code>ave_list</code> since it isn't even used. </p>\n\n<p>If you want to calculate the <strong>separated</strong> mean of two lists you can either call <code>ave_list</code> twice, one call passing each list or making <code>ave_list</code> retur mutiple values (as a tuple, for an example)</p>\n"}, {"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 0, "last_activity_date": 1524697163, "creation_date": 1524697163, "answer_id": 50032493, "question_id": 50032261, "link": "https://stackoverflow.com/questions/50032261/finding-the-average-of-a-function-with-two-parameters/50032493#50032493", "title": "Finding the average of a function with two parameters", "body": "<p>The same thing that you do for a list, do for the other, and return 2 values as a <em>tuple</em>. (<a href=\"https://stackoverflow.com/questions/4873613/return-tuple-from-a-method\">[SO]: return tuple from a method\n</a>)</p>\n\n<p>Here's an implementation that uses <a href=\"https://docs.python.org/3/library/functions.html#sum\" rel=\"nofollow noreferrer\">[Python]: <strong>sum</strong>(<em>iterable[, start]</em>)</a>. <br>Note that it can be written in a much more compact manner, but I'm keeping all steps separate, so it's clearer:</p>\n\n<pre><code>def ave_list(lat_list, long_list):\n    lat_sum = sum(lat_list)  # Calculate the sum\n    if len(lat_list):  # Test so we don't divide by 0\n        lat_avg = lat_sum / len(lat_list)  # Calculate avg\n    else:\n        lat_avg = 0  # List empty, consider avg 0\n    long_sum = sum(long_list)  # Same thing for longitude\n    if len(long_list):\n        long_avg = long_sum / len(long_list)\n    else:\n        long_avg = 0\n    return lat_avg, long_avg\n</code></pre>\n\n<p>The results can be retrieved via <em>tuple unpacking</em> (check <a href=\"https://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences\" rel=\"nofollow noreferrer\">[Python]: Tuples and Sequences</a>):</p>\n\n<pre><code>lat_ave, long_ave = ave_list([1, 2, 3], [3, 4, 5])\n</code></pre>\n\n<p>and this should give you <strong><em>2.0</em></strong> for <code>lat_ave</code>, and <strong><em>4.0</em></strong> for <code>long_ave</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 2533975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602a0dd891870f792648378e94703926?s=128&d=identicon&r=PG", "display_name": "Peter Out", "link": "https://stackoverflow.com/users/2533975/peter-out"}, "is_accepted": false, "score": 0, "last_activity_date": 1524699331, "last_edit_date": 1524699331, "creation_date": 1524698828, "answer_id": 50032700, "question_id": 50032261, "link": "https://stackoverflow.com/questions/50032261/finding-the-average-of-a-function-with-two-parameters/50032700#50032700", "title": "Finding the average of a function with two parameters", "body": "<p>Just to add to the other answers, you can have a two argument function to calculate the average latitude &amp; longitude as follows</p>\n\n<p>Using <code>statistics.mean</code></p>\n\n<pre><code>import statistics\ndef ave_lat_long(lat_list, long_list):\n    return(statistics.mean(lat_list),statistics.mean(long_list))\n</code></pre>\n\n<p>Example of storing returned tuple of average latitude &amp; longitude in separate variables (tuple unpacking)</p>\n\n<pre><code>ave_lat,ave_long= ave_lat_long([47.7, 37.0, 32.9],[40.0, 41.0, 41.4])\n</code></pre>\n\n<p>Printing average latitude &amp; longitude</p>\n\n<pre><code>print ave_lat_long([47.7, 37.0, 32.9],[40.0, 41.0, 41.4])\n</code></pre>\n\n<p>Result (in console)</p>\n\n<pre><code>(39.2, 40.8)\n</code></pre>\n\n<p>Or, defining your own mean function as <code>ave_list</code>:</p>\n\n<pre><code>def ave_list(coordinate_list):\n    sum = 0.0 \n    for num in coordinate_list:\n        sum = sum + num\n    ave_list = sum / len(coordinate_list)\n    return round(ave_list,1)\n</code></pre>\n\n<p>Then define the function for average latitude &amp; longitude </p>\n\n<pre><code>def ave_lat_long(lat_list,long_list):\n    return (ave_list(lat_list),ave_list(long_list))\n</code></pre>\n\n<p>Printing average latitude &amp; longitude</p>\n\n<pre><code>print(ave_lat_long([47.7, 37.0, 32.9],[40.0, 41.0, 41.4]))\n</code></pre>\n\n<p>Result (in console)</p>\n\n<pre><code>(39.2, 40.8)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9700660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42027c9fa7ca0c2a08c34e9910fa2d83?s=128&d=identicon&r=PG&f=1", "display_name": "raspberry rick", "link": "https://stackoverflow.com/users/9700660/raspberry-rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1524699331, "creation_date": 1524695716, "question_id": 50032261, "link": "https://stackoverflow.com/questions/50032261/finding-the-average-of-a-function-with-two-parameters", "title": "Finding the average of a function with two parameters", "body": "<p>I'm relatively new to python and had a quick question about the code I'm trying to write...</p>\n\n<p>I'm finding the average of the values of two lists: latitude and longitude. Here's my code:</p>\n\n<pre><code>def ave_list(lat_list, long_list):\n    sum = 0.0 \n    for num in lat_list:\n        sum = sum + num\n    ave_lat = sum / len(lat_list)\n    return ave\n\ndef main():\n    print ave_list([47.7, 37.0, 32.9, 32.0, 40.0, 41.0, 41.4, 41.8, 0.2, 31.8, -6.3])\nmain()\n</code></pre>\n\n<p>So I understand how to find the average if I just had one parameter, but I don't know how to write the code with two parameters. If I run this function, it tells me that ave_list() takes exactly 2 arguments but I only gave one. I understand that, but again, I'm not sure how to get separate averages with the two parameters. Thanks in advance.</p>\n"}, {"tags": ["python", "json", "api", "parsing", "for-loop"], "answers": [{"comments": [{"owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "edited": false, "score": 1, "creation_date": 1524697206, "post_id": 50032279, "comment_id": 87081034, "body": "Hi I tried your code, maybe I did something wrong But my output looks as follow:  66057248 66057248 66057248 66057248 66057248 66057248   As you can see it keeps looping the first product over and over again and doesn&#39;t get the ID of the other products."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "edited": false, "score": 0, "creation_date": 1524697314, "post_id": 50032279, "comment_id": 87081062, "body": "@Solaiman  What happens if you change the value of <code>id</code> as suggested below?  Do you get the same result?"}, {"owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "edited": false, "score": 1, "creation_date": 1524697474, "post_id": 50032279, "comment_id": 87081111, "body": "yes forgot to mention , I had already changed the value of the id as suggested below. So yeah same results."}, {"owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "edited": false, "score": 0, "creation_date": 1524698979, "post_id": 50032279, "comment_id": 87081508, "body": "Thanks for your help @Simon , I managed to solve it. And it is json :P, anyway this code below worked:  import requests import json response = requests.get(&quot;&quot;) data =response.text parsed=json.loads(data) for i in range(0,len(parsed[&quot;products&quot;])):     print(parsed[&quot;products&quot;][i][&quot;id&quot;])"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "edited": false, "score": 0, "creation_date": 1524699058, "post_id": 50032279, "comment_id": 87081534, "body": "You could write your own answer and accept that rather than accept my answer.  You solution seems a lot different to mine. @Solaiman"}], "tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1524697889, "last_edit_date": 1524697889, "creation_date": 1524695860, "answer_id": 50032279, "question_id": 50032258, "link": "https://stackoverflow.com/questions/50032258/loop-through-json-data-in-python/50032279#50032279", "title": "Loop through JSON data in Python", "body": "<p>Json uses a dictionary so you could use <code>keys()</code> to get all the possible values and then initerate through them:</p>\n\n<pre><code>for id in parsed[\"products\"][0].keys():\n    print(parsed[\"products\"][0][id])\n</code></pre>\n\n<hr>\n\n<p>Figured it out:</p>\n\n<p>This is not json.  It is YAML (because your code lacks <code>\"</code> (speech marks)).  You need a YAML parser to run this.  Once you have then it will run correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "edited": false, "score": 0, "creation_date": 1524697980, "post_id": 50032340, "comment_id": 87081247, "body": "Which values do I have to change to merge this with my existing code and which values do I have to remove from my existing code?"}, {"owner": {"reputation": 1170, "user_id": 7454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d561d513c2ddb28d2d321f2f8e495?s=128&d=identicon&r=PG&f=1", "display_name": "leoschet", "link": "https://stackoverflow.com/users/7454638/leoschet"}, "reply_to_user": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "edited": false, "score": 0, "creation_date": 1524749891, "post_id": 50032340, "comment_id": 87105130, "body": "If I got your question right, if you change your 2 last lines for this <code>for</code>, it will print every <code>id</code> and <code>createdAt</code> for every element for every product in <code>parsed</code> dictionary"}], "tags": [], "owner": {"reputation": 1170, "user_id": 7454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d561d513c2ddb28d2d321f2f8e495?s=128&d=identicon&r=PG&f=1", "display_name": "leoschet", "link": "https://stackoverflow.com/users/7454638/leoschet"}, "is_accepted": false, "score": 1, "last_activity_date": 1524696250, "creation_date": 1524696250, "answer_id": 50032340, "question_id": 50032258, "link": "https://stackoverflow.com/questions/50032258/loop-through-json-data-in-python/50032340#50032340", "title": "Loop through JSON data in Python", "body": "<p>You can do:</p>\n\n<pre><code>for product in parsed:\n    for index in parsed[product]:\n        for element in parsed[product][index]:\n            print(element.id)\n            print(element.createdAt)\n            # ...\n</code></pre>\n\n<p>In Simon's answer the <code>id</code> value in the loop would actually be <code>'id'</code>, <code>'createdAt'</code> and etc. To print only ids as it suggests you need to assert if the key is equals to <code>'id'</code>, what makes the loop useless. </p>\n\n<p>Note: It is not suggested to use <code>id</code> as variable name. It is a reserved word, in this case you can add the underscore getting <code>id_</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 0, "creation_date": 1524715977, "post_id": 50032741, "comment_id": 87085516, "body": "Giving one item in your example was not clear. If the structure is &#39;products&#39;: [ {&#39;id&#39;: 66057248}, {&#39;id&#39;: 66057245},....], there is absolutely no need to use range and len"}, {"owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "reply_to_user": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 0, "creation_date": 1524739126, "post_id": 50032741, "comment_id": 87097612, "body": "@diek Hmm what do you mean exactly? So how should it look in your opinion?"}, {"owner": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 1, "creation_date": 1524755261, "post_id": 50032741, "comment_id": 87108950, "body": "If your json is formatted like this, <a href=\"https://dpaste.de/RUzV\" rel=\"nofollow noreferrer\">dpaste.de/RUzV</a> Then all you need is, <a href=\"https://dpaste.de/5gc2\" rel=\"nofollow noreferrer\">dpaste.de/5gc2</a>"}, {"owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "reply_to_user": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 0, "creation_date": 1524764785, "post_id": 50032741, "comment_id": 87114337, "body": "@diek thanks for the code! That worked indeed. Could you explain to me what the main difference is between the code I used and the one you provided? Still new to Python so I am trying to understand everything as much as possible :)"}, {"owner": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 1, "creation_date": 1524768702, "post_id": 50032741, "comment_id": 87116324, "body": "First, Python makes iteration so much easier than other languages. You do not have to account for the length, Python manages this. If you want to get a good understanding of it, watch Ned Batchelder&#39;s PyCon video Loop Like a Native. 29 minutes well spent"}, {"owner": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 1, "creation_date": 1524769001, "post_id": 50032741, "comment_id": 87116470, "body": "Second, when I have data[&#39;products&#39;], I have a list of dictionaries. No index is required. I then use the dictionary key, &#39;id&#39;, to access the value/data on each iteration. In more complex structures you may need to use an index to drill down"}, {"owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "reply_to_user": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 1, "creation_date": 1524774674, "post_id": 50032741, "comment_id": 87119099, "body": "Thank you very much @diek for the information and for the video, much appreciated! I have edited my answer above as you can see :)"}], "tags": [], "owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "is_accepted": true, "score": 1, "last_activity_date": 1524774615, "last_edit_date": 1524774615, "creation_date": 1524699293, "answer_id": 50032741, "question_id": 50032258, "link": "https://stackoverflow.com/questions/50032258/loop-through-json-data-in-python/50032741#50032741", "title": "Loop through JSON data in Python", "body": "<p>The solution of diek is the one that worked for me, edited my post because of this. The better code is:</p>\n\n<pre><code>import requests\nimport json\nresponse = requests.get(\"\")\ndata =response.text\nparsed=json.loads(data)\n\nfor product in parsed['products']:\n    print(product['id'])\n</code></pre>\n\n<p>The output will look as follow:</p>\n\n<pre><code>66057248\n66057245\n66057242\n66057239\n66057236\n66057233\n66057230\n66057227\n66057224\n</code></pre>\n"}], "owner": {"reputation": 278, "user_id": 9425829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234574a9d90eee521c0546722fee4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Solaiman", "link": "https://stackoverflow.com/users/9425829/solaiman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 0, "accepted_answer_id": 50032741, "answer_count": 3, "score": 1, "last_activity_date": 1524774615, "creation_date": 1524695698, "last_edit_date": 1524717080, "question_id": 50032258, "link": "https://stackoverflow.com/questions/50032258/loop-through-json-data-in-python", "title": "Loop through JSON data in Python", "body": "<p>I am still new to Python and at this moment I am experimenting with GET requests and only show values from one specific String. </p>\n\n<pre><code>import requests\nimport json\n\nresponse = requests.get(\"APIURL\")\ndata = response.text\nparsed = json.loads(data)\nid = parsed[\"products\"][0][\"id\"]\nprint(id)\n</code></pre>\n\n<p>As you can see in the code above I don't have a for loop yet, already tried different things but still didn't get it working. With the code above I get the 'id' of only the first product, of the other products I don't get the results back.</p>\n\n<p>The printed output, for the <code>dict</code> loaded from JSON, looks as follow:</p>\n\n<pre><code>{\n    products: [\n        {\n            id: 66057248,\n            createdAt: \"2018-02-28T14:55:22+01:00\",\n            updatedAt: \"2018-02-28T14:55:22+01:00\",\n            isVisible: true,\n            visibility: \"visible\",\n            hasMatrix: false\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 5509, "user_id": 98806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/187e2643c353fcabe7d55fd253b8fb2a?s=128&d=identicon&r=PG", "display_name": "Richard Inglis", "link": "https://stackoverflow.com/users/98806/richard-inglis"}, "edited": false, "score": 0, "creation_date": 1524695979, "post_id": 50032238, "comment_id": 87080635, "body": "DP2&#39;s last card is always 8 of spades, so it always wins another 2 cards"}, {"owner": {"reputation": 5509, "user_id": 98806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/187e2643c353fcabe7d55fd253b8fb2a?s=128&d=identicon&r=PG", "display_name": "Richard Inglis", "link": "https://stackoverflow.com/users/98806/richard-inglis"}, "edited": false, "score": 0, "creation_date": 1524695990, "post_id": 50032238, "comment_id": 87080637, "body": "Do you need to shuffle?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1524696485, "post_id": 50032238, "comment_id": 87080817, "body": "I think it&#39;s not the algorithm, but just a coincidence of the order and selection of cards. Try playing the game manually with the chosen cards, and see if it ends, or continues ad infinitem (be aware of the order in which cards won are appended to the existing deck)."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1524777168, "post_id": 50032238, "comment_id": 87120227, "body": "When you get to a resolution, please remember to up-vote useful things and accept your favourite answer (even if you have to write it yourself), so Stack Overflow can properly archive the question."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 8117122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23d36963279552d6d7a1702c3f5f964?s=128&d=identicon&r=PG&f=1", "display_name": "orb", "link": "https://stackoverflow.com/users/8117122/orb"}, "edited": false, "score": 0, "creation_date": 1524756993, "post_id": 50032615, "comment_id": 87110138, "body": "Thanks for the reply! I added a condition in the while loop to exit when either of the decks hits len(0). The logic for card swapping was all happening without hitting the check of the while loop from I gather. Code is now functional :)"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1524698118, "creation_date": 1524698118, "answer_id": 50032615, "question_id": 50032238, "link": "https://stackoverflow.com/questions/50032238/infinite-loop-in-war-card-game-simulator/50032615#50032615", "title": "Infinite Loop in War Card Game Simulator", "body": "<p>It's a truly infinite loop: that's the nature of the game.  There is no guaranteed end.  Here's a segment of the trace you provide (good work!) that shows the looping.  The first and last rounds listed are identical; the decks behind these are also the same in both cases.  If you want a finite game, you'll need to implement some sort of resolution to this situation.</p>\n\n<pre><code>Round  64274\nc1 13 of Hearts 3\nc2 4 of Hearts 1\nRound  64275\nc1 2 of Diamonds 4\nc2 8 of Spades 0\nRound  64276\nc1 7 of Clubs 3\nc2 2 of Diamonds 1\nRound  64277\nc1 3 of Hearts 4\nc2 8 of Spades 0\nRound  64278\nc1 13 of Hearts 3\nc2 3 of Hearts 1\nRound  64279\nc1 4 of Hearts 4\nc2 8 of Spades 0\nRound  64280\nc1 7 of Clubs 3\nc2 4 of Hearts 1\nRound  64281\nc1 2 of Diamonds 4\nc2 8 of Spades 0\nRound  64282\nc1 13 of Hearts 3\nc2 2 of Diamonds 1\nRound  64283\nc1 3 of Hearts 4\nc2 8 of Spades 0\nRound  64284\nc1 7 of Clubs 3\nc2 3 of Hearts 1\nRound  64285\nc1 4 of Hearts 4\nc2 8 of Spades 0\nRound  64286\nc1 13 of Hearts 3\nc2 4 of Hearts 1\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 8117122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a23d36963279552d6d7a1702c3f5f964?s=128&d=identicon&r=PG&f=1", "display_name": "orb", "link": "https://stackoverflow.com/users/8117122/orb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 50032615, "answer_count": 1, "score": 0, "last_activity_date": 1524698118, "creation_date": 1524695520, "question_id": 50032238, "link": "https://stackoverflow.com/questions/50032238/infinite-loop-in-war-card-game-simulator", "title": "Infinite Loop in War Card Game Simulator", "body": "<p>I'm trying to simulate a (tiny) game of War! as an exercise in OOP. I have a loop that plays two decks against each other, but it seems to loop forever, repeating the same sequence again and again. The output gets to the point where one deck has 4 card objects in it, and then the loop repeats. The loop should only be running when both Drawpile objects are greater than zero. </p>\n\n<pre><code>ranks = [2,3,4,5,6,7,8,9,10,11,12,13,14] #for use of value comparison via index\nsuits =['Diamonds','Hearts','Clubs','Spades']\nrounds = 0\n\nclass Card:\n    def __init__(self, rank, suit): \n        self.rank = rank\n        assert rank in ranks\n        assert suit in suits\n        self.suit = suit\n    def __repr_(self):\n        return '{} of {}'.format(self.rank,self.suit)\n    def __str__(self):\n        return '{} of {}'.format(self.rank,self.suit)\n    def __eq__(self, other): \n        if self.rank == other.rank:\n            return True\n        else:\n            return False\n    def __gt__(self, other): #gt compared via ordering of ranks index\n        if self.rank &gt; other.rank:\n            return True\n        else:\n            return False\n    def __lt__(self, other):\n        if self.rank &lt; other.rank:\n            return True\n        else:\n            return False\n\nclass Drawpile:\n    def __init__(self, pile =[]):\n        self.pile = pile\n    def __len__(self):\n        return len(self.pile)\n    def __getitem__(self, n):\n        return self.pile[n]\n    def add(self, n):\n        self.pile.append(n)\n    def draw(self):\n        if len(self) &lt;= 0:\n            return None\n        return self.pile.pop(0)\n\ndp1 = Drawpile([Card(2,'Diamonds'),Card(13,'Hearts'),Card(7,'Clubs')])\ndp2 = Drawpile([Card(4,'Hearts'),Card(3,'Hearts'),Card(8,'Spades')])\n\nwhile len(dp1) &gt; 0 and len(dp2) &gt; 0:\n\n    rounds += 1\n    c1 = dp1.draw()\n    c2 = dp2.draw()\n\n    print('Round ',rounds)\n    print('c1',c1, len(dp1))\n    print('c2',c2, len(dp2))\n\n    if c1 &gt; c2:\n        dp1.add(c1)\n        dp1.add(c2)\n    else:\n        dp2.add(c1)\n        dp2.add(c2)\n\nif len(dp1) &gt; len(dp2):\n    print('Pile 1 Won!')\nelse:\n    print('Pile 2 Won!')\n</code></pre>\n\n<p>Can anyone tell me where exactly this loop is getting stuck? I've tried diagramming it out and this is my second rewrite. Any ideas?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1524696395, "post_id": 50032227, "comment_id": 87080782, "body": "I&#39;d be wary of some of the assumptions here - for example, that you never need to deal with two offices in the same state, or two cities with the same name, or multi-state ZIP codes."}, {"owner": {"reputation": 11191, "user_id": 310399, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d187650935da258c633a3a0742985891?s=128&d=identicon&r=PG", "display_name": "JS.", "link": "https://stackoverflow.com/users/310399/js"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1524699526, "post_id": 50032227, "comment_id": 87081637, "body": "The data above is for example only.  I used it because it is more approachable than the short strings and hex codes of the actual (embedded) data.  Each data point is always unique and there are never more than 6 rows, usually only 3-4 rows."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1527724576, "post_id": 50032227, "comment_id": 88239466, "body": "It sounds like you should be using a real database, at least SQLite. It&#39;s okay for a rarely-changing SQL table to have many indexes."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1527726340, "post_id": 50032227, "comment_id": 88239893, "body": "2-way memory-efficient injective mappings aren&#39;t native to Python (or any programming language I&#39;m aware of), you would need to code this yourself in a lower-level language with a perfect hash. In my opinion, there should be an implementation for such a use case, at least when you have a small number of items. The counter-argument, of course, is &quot;use a database&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1527724504, "post_id": 50614796, "comment_id": 88239454, "body": "Ouch, that algorithmic complexity."}], "tags": [], "owner": {"reputation": 11191, "user_id": 310399, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d187650935da258c633a3a0742985891?s=128&d=identicon&r=PG", "display_name": "JS.", "link": "https://stackoverflow.com/users/310399/js"}, "is_accepted": false, "score": 0, "last_activity_date": 1527724246, "creation_date": 1527724246, "answer_id": 50614796, "question_id": 50032227, "link": "https://stackoverflow.com/questions/50032227/what-data-construct-to-allow-multi-key-access-even-to-other-keys/50614796#50614796", "title": "What data construct to allow multi-key access, even to other keys?", "body": "<p>Here's the solution I wound up using to access unique data with any of multiple key encodings.  Keep in mind this is a contrived example to illustrate/simplify the real problem.</p>\n\n<pre><code>import collections\n\nOfficeEntry = collections.namedtuple('OfficeEntry', ['name', 'short', 'capitol', 'zip'])\n\n\nclass OfficeNameDecoder():\n\n    def __init__(self, office_entries):\n        self.data = office_entries\n\n    def __getitem__(self, key):\n        \"\"\"\n        \"\"\"\n        for idx, li in enumerate(self.data):\n            if key in li:\n                return li\n\n        raise IndexError()\n</code></pre>\n\n<p>If we instantiate the OfficeNameDecoder with some sample data:</p>\n\n<pre><code>SAMPLE_OFFICE_ENTRIES = [ OfficeEntry('Alabama',  'AL', 'Montgomery', 36043),\n                          OfficeEntry('Colorado', 'CO', 'Denver',     80014),\n                          OfficeEntry('Florida',  'FL', 'Tallahasse', 32301) ]\n\nond = OfficeNameDecoder(SAMPLE_OFFICE_ENTRIES)\n</code></pre>\n\n<p>Accounting can get field office zip codes by doing:</p>\n\n<pre><code>ond['AL'].zip\n&gt;&gt; 36043\n</code></pre>\n\n<p>Finance can get field office zip codes using:</p>\n\n<pre><code>ond['Colorado'].zip\n&gt;&gt; 80014\n</code></pre>\n\n<p>and I can finally stop fielding phone calls from Legal for state abbreviations:</p>\n\n<pre><code>ond['Florida'].short\n&gt;&gt; 'FL'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1376, "user_id": 6190930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dfbba9c5af37b4eb37bc508a355fda7?s=128&d=identicon&r=PG", "display_name": "pgngp", "link": "https://stackoverflow.com/users/6190930/pgngp"}, "is_accepted": false, "score": 0, "last_activity_date": 1527726379, "creation_date": 1527726379, "answer_id": 50615046, "question_id": 50032227, "link": "https://stackoverflow.com/questions/50032227/what-data-construct-to-allow-multi-key-access-even-to-other-keys/50615046#50615046", "title": "What data construct to allow multi-key access, even to other keys?", "body": "<p><code>Pandas</code> are quite powerful at this kind of stuff. If you are open to using it, here's the code for it.</p>\n\n<p><strong>Define a data frame:</strong></p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df = pd.DataFrame({'Name': ['Alabama', 'Colorado', 'Florida'], 'Short': ['AL', 'CO', 'FL'], 'Capital': ['Montgomery', 'Denver', 'Tallahassee'], 'Zip': [36043, 80014, 32301]})\n&gt;&gt;&gt; df\n       Capital      Name Short    Zip\n0   Montgomery   Alabama    AL  36043\n1       Denver  Colorado    CO  80014\n2  Tallahassee   Florida    FL  32301\n</code></pre>\n\n<p><strong>Using state's 2-letter abbreviation to get the zip code:</strong></p>\n\n<pre><code>&gt;&gt;&gt; df[df['Short'] == 'AL']['Zip'].values[0]\n36043\n</code></pre>\n\n<p><strong>Using state's name to get the zip code:</strong></p>\n\n<pre><code>&gt;&gt;&gt; df[df['Name'] == 'Colorado']['Zip'].values[0]\n80014\n</code></pre>\n\n<p><strong>Using state's capital to get the state name:</strong></p>\n\n<pre><code>&gt;&gt;&gt; df[df['Capital'] == 'Tallahassee']['Name'].values[0]\n'Florida'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1527726985, "creation_date": 1527726985, "answer_id": 50615109, "question_id": 50032227, "link": "https://stackoverflow.com/questions/50032227/what-data-construct-to-allow-multi-key-access-even-to-other-keys/50615109#50615109", "title": "What data construct to allow multi-key access, even to other keys?", "body": "<p>Unfortunately, I don't think there's a non-database solution for what you are looking for. Two-way memory-efficient injective mappings aren't native to Python, or perhaps to any programming language.</p>\n\n<p>For <strong>small applications</strong> where you can guarantee that mappings between fields are injective, you can define multiple dictionaries. This need not be error-prone, you can use <code>collections.defaultdict</code> and <code>itertools.permutations</code> to create a dictionary of dictionaries. I only advise this route if your data is small but used many times.</p>\n\n<pre><code>from collections import defaultdict\nfrom itertools import permutations\n\ndata = [{'Name': 'Alabama',  'Short': 'AL', 'Capital': 'Montgomery', 'Zip': 36043},\n        {'Name': 'Colorado', 'Short': 'CO', 'Capital': 'Denver', 'Zip': 80014},\n        {'Name': 'Florida', 'Short': 'FL', 'Capital': 'Tallahassee', 'Zip': 32301}]\n\nd = defaultdict(dict)\n\nfor item in data:\n    for key1, key2 in permutations(item.keys(), 2):\n        d[(key1, key2)][item[key1]] = item[key2]\n\ndefaultdict(dict,\n            {('Capital', 'Name'): {'Denver': 'Colorado', 'Montgomery': 'Alabama',\n                                   'Tallahassee': 'Florida'},\n             ('Capital', 'Short'): {'Denver': 'CO', 'Montgomery': 'AL',\n                                    'Tallahassee': 'FL'},\n             ...\n             ('Zip', 'Name'): {32301: 'Florida', 36043: 'Alabama', 80014: 'Colorado'},\n             ('Zip', 'Short'): {32301: 'FL', 36043: 'AL', 80014: 'CO'}})\n</code></pre>\n"}], "owner": {"reputation": 11191, "user_id": 310399, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d187650935da258c633a3a0742985891?s=128&d=identicon&r=PG", "display_name": "JS.", "link": "https://stackoverflow.com/users/310399/js"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1527726985, "creation_date": 1524695432, "last_edit_date": 1524695465, "question_id": 50032227, "link": "https://stackoverflow.com/questions/50032227/what-data-construct-to-allow-multi-key-access-even-to-other-keys", "title": "What data construct to allow multi-key access, even to other keys?", "body": "<p>Before constructing some new object to perform this task, perhaps someone can point me to an existing solution or tell me what search terms I should use to research further.</p>\n\n<p>My problem is that I have a small collection of related data that comes up again and again in my problem domain.</p>\n\n<p>For example, suppose my company has a single field office in each state's capital:</p>\n\n<pre><code>'Name': 'Alabama',  'Short': 'AL', 'Capital': 'Montgomery', 'Zip': 36043\n'Name': 'Colorado', 'Short': 'CO', 'Capital': 'Denver', 'Zip': 80014\n...\n'Name': 'Florida', 'Short': 'FL', 'Capital': 'Tallahassee', 'Zip': 32301\n</code></pre>\n\n<p>Note: There are no duplicate values.</p>\n\n<p>Each business unit wants to access the zip code differently.</p>\n\n<p>Accounting wants to use the state's two letter abbreviation to access the zip code (Key-to-Data).</p>\n\n<p>Finance wants to use the full state name to access the zip code (Key-to-Data).</p>\n\n<p>Legal (always the difficult one) would also like to get the state name given the capital (Key-to-Key).</p>\n\n<p>The number of offices is small -- usually less that 4, so I would like to avoid a \"heavy\" approach such as a database.</p>\n\n<p>Ideally, I would like to simply define this data at the top of the script as a single define.</p>\n\n<p>I could of course define multiple dicts, with each key pointing to the zip code and yet another few dicts doing Key-to-Key mappings, but that seems repetive and error-prone.</p>\n\n<p>What's an elegant way to implement and access this type of many-to-one but unique data?</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "computer-vision", "deep-learning"], "answers": [{"tags": [], "owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "is_accepted": true, "score": 2, "last_activity_date": 1524696179, "creation_date": 1524696179, "answer_id": 50032328, "question_id": 50032197, "link": "https://stackoverflow.com/questions/50032197/tensorflow-gradients-are-0-weights-are-not-updating/50032328#50032328", "title": "Tensorflow gradients are 0, weights are not updating", "body": "<p>You are applying softmax two times to the output, once in <code>tf.nn.softmax</code> and again when you apply <code>softmax_cross_entropy</code>. This probably destroys any learning capability in the network.</p>\n"}], "owner": {"reputation": 3, "user_id": 5922381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec69c0e5971e45ad3951cf1400d3da0d?s=128&d=identicon&r=PG&f=1", "display_name": "mathjunkie", "link": "https://stackoverflow.com/users/5922381/mathjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 1, "accepted_answer_id": 50032328, "answer_count": 1, "score": 0, "last_activity_date": 1524696179, "creation_date": 1524695234, "last_edit_date": 1524695630, "question_id": 50032197, "link": "https://stackoverflow.com/questions/50032197/tensorflow-gradients-are-0-weights-are-not-updating", "title": "Tensorflow gradients are 0, weights are not updating", "body": "<p>I'm trying to learn TensorFlow after using Keras for a while, and I'm trying to build a ConvNet for CIFAR-10 classification. However, I think I misunderstand something in TensorFlow API, since the weights are not updating even in 1-layer net model.</p>\n\n<p>The code for the model is as follows:</p>\n\n<pre><code>num_epochs = 10 \nbatch_size = 64\n\n# Shape of mu and std is correct: (1, 32, 32, 3)\nmu = np.mean(X_train, axis=0, keepdims=True)\nsigma = np.std(X_train, axis=0, keepdims=True)\n\n# Placeholders for data &amp; normalization\n# (normalisation does not help)\ndata = tf.placeholder(np.float32, shape=(None, 32, 32, 3), name='data')\nlabels = tf.placeholder(np.int32, shape=(None,), name='labels')\ndata = (data - mu) / sigma\n\n# flatten\nflat = tf.reshape(data, shape=(-1, 32 * 32 * 3))\ndense1 = tf.layers.dense(inputs=flat, units=10)\npredictions = tf.nn.softmax(dense1)\n\nonehot_labels = tf.one_hot(indices=labels, depth=10)\n\n# Tried sparse_softmax_cross_entropy_with_logits as well\nloss = tf.losses.softmax_cross_entropy(onehot_labels=onehot_labels, logits=predictions)\nloss = tf.reduce_mean(loss)\n\n# Learning rate does not matter as the weights are not updating!\noptimizer = tf.train.AdamOptimizer(learning_rate=0.01).minimize(loss)\nloss_history = []\n\nwith tf.Session() as session:\n    tf.global_variables_initializer().run()\n    tf.local_variables_initializer().run()\n\n    for epochs in range(10):\n        print(\"Epoch:\", epochs)\n        # Load tiny batches-\n        for batch in iterate_minibatches(X_train.astype(np.float32)[:10], y_train[:10], 5):\n            inputs, target = batch\n            feed_dict = {data: inputs, labels: target}\n            loss_val, _ = session.run([loss, optimizer], feed_dict=feed_dict)\n            grads = tf.reduce_sum(tf.gradients(loss, dense1)[0])\n            grads = session.run(grads, {data: inputs, labels: target})\n            print(\"Loss:\", loss_val, \"Grads:\", grads)\n</code></pre>\n\n<p>The code produces the following output:</p>\n\n<pre><code>Epoch: 0\nLoss: 2.46115 Grads: -1.02031e-17\nLoss: 2.46041 Grads: 0.0\nEpoch: 1\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 2\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 3\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 4\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 5\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 6\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 7\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 8\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\nEpoch: 9\nLoss: 2.46115 Grads: 0.0\nLoss: 2.26115 Grads: 0.0\n</code></pre>\n\n<p>It looks like the model <strong>probably resets</strong> its weights somehow or stops learning completely.\nI have also tried sparse softmax crossentropy loss, but nothing helps.</p>\n"}, {"tags": ["python", "date", "datetime", "time", "datetime-conversion"], "comments": [{"owner": {"reputation": 7598, "user_id": 2842884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093fa30f7d60dbe70075149dbdfe4583?s=128&d=identicon&r=PG&f=1", "display_name": "bosnjak", "link": "https://stackoverflow.com/users/2842884/bosnjak"}, "edited": false, "score": 0, "creation_date": 1524695437, "post_id": 50032187, "comment_id": 87080486, "body": "What representation is that? Have you tried googling?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1524695573, "post_id": 50032187, "comment_id": 87080531, "body": "<code>datetime.datetime.strptime(&quot;20180425.142117&quot;, &quot;%Y%m%d.%H%M%S&quot;).ctime()</code>  -- See <a href=\"https://docs.python.org/3.6/library/datetime.html#strftime-strptime-behavior\" rel=\"nofollow noreferrer\">docs.python.org/3.6/library/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 1342372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525f5c3f7949d06d3a13ae912ca4eb83?s=128&d=identicon&r=PG", "display_name": "vijayshankarv", "link": "https://stackoverflow.com/users/1342372/vijayshankarv"}, "is_accepted": false, "score": 1, "last_activity_date": 1524750421, "last_edit_date": 1524750421, "creation_date": 1524696170, "answer_id": 50032327, "question_id": 50032187, "link": "https://stackoverflow.com/questions/50032187/convert-a-time-string-20180425-142117-to-human-readable-format/50032327#50032327", "title": "Convert a time string &quot;20180425.142117&quot; to human readable format?", "body": "<p>Try using the <a href=\"https://docs.python.org/2/library/datetime.html#datetime.datetime.strptime\" rel=\"nofollow noreferrer\">datetime</a> library. </p>\n\n<pre><code>import datetime as dt\ntime_str = \"20180425.142117\"\n# Convert to a datetime \ntime_dt = dt.datetime.strptime(time_str, '%Y%m%d.%H%M%S')\n# Convert back to string with the right format\nhuman_time = dt.datetime.strftime(time_dt, '%dth %b %Y, %I:%M%p')\nprint(human_time)\n</code></pre>\n\n<p>I have to say that I look up the codes each time I need to do something custom. </p>\n"}], "owner": {"reputation": 143, "user_id": 2012960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3864450ab58175665f443a3cae6edbe0?s=128&d=identicon&r=PG&f=1", "display_name": "AS_ON", "link": "https://stackoverflow.com/users/2012960/as-on"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1524750421, "creation_date": 1524695149, "question_id": 50032187, "link": "https://stackoverflow.com/questions/50032187/convert-a-time-string-20180425-142117-to-human-readable-format", "title": "Convert a time string &quot;20180425.142117&quot; to human readable format?", "body": "<p>I want this string \"20180425.142117\" to convert to human readable format. \nE.g. 25th April 2018, 2:21 pm in Python </p>\n\n<p>Any ideas how to do this? </p>\n"}, {"tags": ["python", "json", "performance"], "comments": [{"owner": {"reputation": 7598, "user_id": 2842884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093fa30f7d60dbe70075149dbdfe4583?s=128&d=identicon&r=PG&f=1", "display_name": "bosnjak", "link": "https://stackoverflow.com/users/2842884/bosnjak"}, "edited": false, "score": 0, "creation_date": 1524695315, "post_id": 50032173, "comment_id": 87080453, "body": "You can use <code>jq</code> for this, something like (untested): <code>cat *.jsonl | jq &#39;.[] | select ( .record_id | .updated_at | .updates_submitted)&#39; &gt; out</code> - I&#39;m sure this is wrong but it gives you an idea how easy it is. Check out here for more info: <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow noreferrer\">stedolan.github.io/jq</a>"}, {"owner": {"reputation": 93, "user_id": 3798666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cb3d46503a50f6f4f4888d78ef1229?s=128&d=identicon&r=PG&f=1", "display_name": "the_deuce", "link": "https://stackoverflow.com/users/3798666/the-deuce"}, "reply_to_user": {"reputation": 7598, "user_id": 2842884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093fa30f7d60dbe70075149dbdfe4583?s=128&d=identicon&r=PG&f=1", "display_name": "bosnjak", "link": "https://stackoverflow.com/users/2842884/bosnjak"}, "edited": false, "score": 0, "creation_date": 1524703317, "post_id": 50032173, "comment_id": 87082541, "body": "Looks awesome, I&#39;ll check out the performance tomorrow and get back to you. Thanks for the suggestion!"}], "owner": {"reputation": 93, "user_id": 3798666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cb3d46503a50f6f4f4888d78ef1229?s=128&d=identicon&r=PG&f=1", "display_name": "the_deuce", "link": "https://stackoverflow.com/users/3798666/the-deuce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524695075, "creation_date": 1524695075, "question_id": 50032173, "link": "https://stackoverflow.com/questions/50032173/most-efficient-way-to-concatenate-and-filter-many-jsonl-files", "title": "Most efficient way to concatenate and filter many .jsonl files", "body": "<p>I'm running into a performance issue with how I take logs to concatenate and then filter them to only the information I need. I didn't expect this to be an issue, but it is becoming clear that my hacky approach is taking way, way too long (like in the 6-12 hour range, which is unacceptable to me)</p>\n\n<p>I have about 70K .jsonl files in a folder, each with about 200 lines, and I'm trying to pull only certain fields from them and concatenate them into a single file. I'm only pulling three fields and they are short strings so it is not extremely memory intensive, but it is just taking waaayyyy too long with my method, and I know there has to be a much faster way.</p>\n\n<p>Right now, I'm just using pandas since I am familiar with it and it takes me very little time to write up a script - here is my current function:</p>\n\n<pre><code>from pathlib import Path\nimport pandas as pd\n\ndef read_files_and_concatenate(parent_directory):\n    final_df = pd.DataFrame()\n    count = 0\n    for file in Path(parent_directory).iterdir():\n        log_file = pd.read_json(str(file), dtype=str, lines=True)\n        final_df = pd.concat([final_df, log_file[['record_id', \n                                                  'updated_at', \n                                                'updates_submitted']]])\n        print('{} logs in part, {} logs in \n              master, {} files concatenated'.format(len(log_file), \n                                                 len(final_df), count))\n        count += 1\nreturn final_df\n</code></pre>\n\n<p>Again, memory isn't an issue here because each log being concatenated is only a small string - even with millions of lines, it's only a few hundred MB. I'm most familiar with python, so I would prefer a solution using it, but if there is some sort of .json command line tool or bash command that does this kind of thing efficiently I'm open for those suggestions too.</p>\n\n<p>Thanks for the help in advance!</p>\n"}, {"tags": ["python", "tcp", "redis", "udp", "synchronous"], "comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1524695199, "post_id": 50032161, "comment_id": 87080432, "body": "Do you have performance problems with the one or other option?"}, {"owner": {"reputation": 10379, "user_id": 1666071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/T4WHS.jpg?s=128&g=1", "display_name": "enapupe", "link": "https://stackoverflow.com/users/1666071/enapupe"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1524695743, "post_id": 50032161, "comment_id": 87080581, "body": "I currently have the option 1 in production but considering to move to 2."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1524696312, "post_id": 50032161, "comment_id": 87080747, "body": "Can you tolerate data loss?"}, {"owner": {"reputation": 10379, "user_id": 1666071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/T4WHS.jpg?s=128&g=1", "display_name": "enapupe", "link": "https://stackoverflow.com/users/1666071/enapupe"}, "edited": false, "score": 0, "creation_date": 1524696542, "post_id": 50032161, "comment_id": 87080836, "body": "Ideally not, but that&#39;s how it is right now so lets say I can"}], "owner": {"reputation": 10379, "user_id": 1666071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/T4WHS.jpg?s=128&g=1", "display_name": "enapupe", "link": "https://stackoverflow.com/users/1666071/enapupe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538151130, "creation_date": 1524694984, "last_edit_date": 1538151130, "question_id": 50032161, "link": "https://stackoverflow.com/questions/50032161/udp-vs-tcp-performance-on-a-python-django-application", "title": "UDP vs TCP performance on a Python/Django application", "body": "<p>Say you have to push some statistic to some final TCP (HTTP) server on the cloud, which would be the most optimal implementation option regarding TIME:</p>\n\n<ol>\n<li><p>having a local server running UDP acting as a buffer flushing data to the final HTTP server in a way your python code runs synchronously - just doing that UDP connection to push the information</p></li>\n<li><p>using something like django_rq and have workers flushing the redis (also a local server) queue to the final HTTP cloud server</p></li>\n</ol>\n\n<p>Is it possible to ensure one of the two options is going to be faster than the other? Is this something I should worry about or it's more likely to be negligible?</p>\n"}, {"tags": ["python", "variables", "global-variables"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 2, "creation_date": 1524695047, "post_id": 50032145, "comment_id": 87080393, "body": "It won&#39;t update the variable from the outer scope. If you want to keep it updated make it a member of the class."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1524695439, "post_id": 50032145, "comment_id": 87080488, "body": "You cannot pass variables around in Python. See <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a>"}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 2, "creation_date": 1524695787, "post_id": 50032145, "comment_id": 87080595, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/986006/how-do-i-pass-a-variable-by-reference\">How do I pass a variable by reference</a>"}], "answers": [{"comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1524695384, "post_id": 50032216, "comment_id": 87080469, "body": "Why bother with the var argument?"}, {"owner": {"reputation": 218, "user_id": 9648076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b38DLOxypeQ/AAAAAAAAAAI/AAAAAAAAAEs/K8sDh7C2wpk/photo.jpg?sz=128", "display_name": "Juli&#225;n Esteban Salom&#243;n Torres", "link": "https://stackoverflow.com/users/9648076/juli%c3%a1n-esteban-salom%c3%b3n-torres"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1524695649, "post_id": 50032216, "comment_id": 87080558, "body": "Doesn&#39;t was intentionally, the argument var of update can be renamed and if not used as here, can be removed."}, {"owner": {"reputation": 3, "user_id": 9700602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a9a76077fdd55bafb545c065f19557?s=128&d=identicon&r=PG&f=1", "display_name": "PRyan", "link": "https://stackoverflow.com/users/9700602/pryan"}, "edited": false, "score": 0, "creation_date": 1524695739, "post_id": 50032216, "comment_id": 87080580, "body": "I need the other if statement though, as it contains other code that needs to run."}, {"owner": {"reputation": 218, "user_id": 9648076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b38DLOxypeQ/AAAAAAAAAAI/AAAAAAAAAEs/K8sDh7C2wpk/photo.jpg?sz=128", "display_name": "Juli&#225;n Esteban Salom&#243;n Torres", "link": "https://stackoverflow.com/users/9648076/juli%c3%a1n-esteban-salom%c3%b3n-torres"}, "reply_to_user": {"reputation": 3, "user_id": 9700602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a9a76077fdd55bafb545c065f19557?s=128&d=identicon&r=PG&f=1", "display_name": "PRyan", "link": "https://stackoverflow.com/users/9700602/pryan"}, "edited": false, "score": 0, "creation_date": 1524696021, "post_id": 50032216, "comment_id": 87080644, "body": "@PRyan just replace the <code>if</code> statement and <code>update</code> method."}, {"owner": {"reputation": 3, "user_id": 9700602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a9a76077fdd55bafb545c065f19557?s=128&d=identicon&r=PG&f=1", "display_name": "PRyan", "link": "https://stackoverflow.com/users/9700602/pryan"}, "edited": false, "score": 0, "creation_date": 1524696291, "post_id": 50032216, "comment_id": 87080741, "body": "@Juli&#225;n Esteban Salom&#243;n Torres Yep, I&#39;m an idiot. thanks"}], "tags": [], "owner": {"reputation": 218, "user_id": 9648076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b38DLOxypeQ/AAAAAAAAAAI/AAAAAAAAAEs/K8sDh7C2wpk/photo.jpg?sz=128", "display_name": "Juli&#225;n Esteban Salom&#243;n Torres", "link": "https://stackoverflow.com/users/9648076/juli%c3%a1n-esteban-salom%c3%b3n-torres"}, "is_accepted": true, "score": 0, "last_activity_date": 1526385577, "last_edit_date": 1526385577, "creation_date": 1524695336, "answer_id": 50032216, "question_id": 50032145, "link": "https://stackoverflow.com/questions/50032145/python-pass-variable-into-class-from-a-function-to-change-said-variable-in-the/50032216#50032216", "title": "Python - pass variable into class from a function to change said variable in the function", "body": "<p>Return the new value in the update method and assign it in the call to the variable.              </p>\n\n<pre><code>...\nwhile running:\n  if var == 1:\n    print(var)\n    var = test.update(var)\n...\n\nclass myClass:\n  def update(self, _var): # _var is removable unless you will use it\n    return 2\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9700602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a9a76077fdd55bafb545c065f19557?s=128&d=identicon&r=PG&f=1", "display_name": "PRyan", "link": "https://stackoverflow.com/users/9700602/pryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 50032216, "answer_count": 1, "score": -2, "last_activity_date": 1526385577, "creation_date": 1524694901, "question_id": 50032145, "link": "https://stackoverflow.com/questions/50032145/python-pass-variable-into-class-from-a-function-to-change-said-variable-in-the", "title": "Python - pass variable into class from a function to change said variable in the function", "body": "<p>I have some code that's structured like so.</p>\n\n<pre><code>def function():\n    test = myClass()\n    var = 1\n    running = True\n\n    while running:\n        if var == 1:\n            print(1)\n            test.update(var)\n        if var == 2:\n            print(2)\n\nclass myClass:\n    def update(self, var):\n        var = 2\n</code></pre>\n\n<p>Essentially the code should print '1' only once and then print an indefinite number of '2's as the value of var is changed from '1' to '2' in the update method. However, it just prints loads of '1's. </p>\n\n<p>How do you change the value of a variable found in a function by using a class's method in that function?</p>\n\n<p>I've also tried with global variables and it doesn't work (and I've heard is generally frowned upon).</p>\n"}, {"tags": ["python", "ubuntu-14.04", "yapf"], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 957968, "user_type": "registered", "profile_image": "https://graph.facebook.com/721178891/picture?type=large", "display_name": "Arthur Rio", "link": "https://stackoverflow.com/users/957968/arthur-rio"}, "is_accepted": false, "score": 5, "last_activity_date": 1539337722, "creation_date": 1539337722, "answer_id": 52776862, "question_id": 50032144, "link": "https://stackoverflow.com/questions/50032144/unable-to-exclude-directory-with-yapf/52776862#52776862", "title": "Unable to exclude directory with yapf", "body": "<p>Did you try <code>yapf --in-place --recursive --parallel --exclude 'somedir/**/*.py' --exclude '**/*_pb2.py' .</code>?</p>\n\n<p><a href=\"https://github.com/google/yapf/blob/32afb3004e0967eab351ee83e3d9d55e3a02fd9b/yapf/yapflib/file_resources.py#L154\" rel=\"noreferrer\">yapf uses <code>fnmatch.fnmatch(path, exclude_pattern)</code> under the hood</a>.</p>\n"}], "owner": {"reputation": 14214, "user_id": 476410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2eca89d3f5a16ae846f501d0596116c?s=128&d=identicon&r=PG", "display_name": "tarabyte", "link": "https://stackoverflow.com/users/476410/tarabyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1539337722, "creation_date": 1524694874, "question_id": 50032144, "link": "https://stackoverflow.com/questions/50032144/unable-to-exclude-directory-with-yapf", "title": "Unable to exclude directory with yapf", "body": "<p>I'm unable to exclude a directory from being autoformatted with yapf.</p>\n\n<p>Tested usages:</p>\n\n<pre><code>yapf --in-place --recursive --parallel --exclude 'somedir' --exclude '*_pb2.py' .\nyapf --in-place --recursive --parallel --exclude 'somedir/*' --exclude '*_pb2.py' .\nyapf --in-place --recursive --parallel --exclude 'somedir/**' --exclude '*_pb2.py' .\n</code></pre>\n\n<p>It seems to take file patterns well but not folder patterns.</p>\n\n<ul>\n<li>yapf version: 0.21.0</li>\n<li>OS: Ubuntu 14.04 LTS</li>\n<li>python version: 2.7 (in a virtualenv)</li>\n</ul>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5141109, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/001d7287696a852cfa1f148a35c1d80a?s=128&d=identicon&r=PG&f=1", "display_name": "poppashingles", "link": "https://stackoverflow.com/users/5141109/poppashingles"}, "edited": false, "score": 0, "creation_date": 1524712306, "post_id": 50032214, "comment_id": 87084594, "body": "That did it! Thank you"}], "tags": [], "owner": {"reputation": 1304, "user_id": 4288666, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-kpDFIvSZPBE/AAAAAAAAAAI/AAAAAAAAAIs/zu9ta7D-g1Y/photo.jpg?sz=128", "display_name": "Robert Sim", "link": "https://stackoverflow.com/users/4288666/robert-sim"}, "is_accepted": true, "score": 1, "last_activity_date": 1524695317, "creation_date": 1524695317, "answer_id": 50032214, "question_id": 50032138, "link": "https://stackoverflow.com/questions/50032138/avoiding-duplication-in-a-python-list/50032214#50032214", "title": "Avoiding duplication in a python list", "body": "<p>At the end of the loop <code>pawn</code>'s coordinates will correspond to result from the last pawn it was tested against.  Add a <code>break</code> statement after <code>pawn.y_coordinate = -1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 1, "last_activity_date": 1524695649, "last_edit_date": 1524695649, "creation_date": 1524695332, "answer_id": 50032215, "question_id": 50032138, "link": "https://stackoverflow.com/questions/50032138/avoiding-duplication-in-a-python-list/50032215#50032215", "title": "Avoiding duplication in a python list", "body": "<pre><code>class Pawn:\n    def __init(x, y):\n        self.x_coordinate = x\n        self.y_coordinate = y\n\n    @property\n    def x_coordinate(self):\n        return self.x_coordinate\n\n    @x_coordinate.setter\n    def x_corrdinate(x):\n        self.x_coordinate = x    \n\n    @property\n    def y_coordinate(self):\n        return self.y_coordinate\n\n    @y_coordinate.setter\n    def y_corrdinate(y):\n        self.y_coordinate = y\n\n    def __hash__(self):\n        return hash(self.x_coordinate) ^ hash(self.y_coordinate)\n\n    def __eq__(self, other):\n        return self.x_coordinate == other. x_coordinate and self.x_coordinate == other.y_coordinate\n</code></pre>\n\n<p>Basically, write a class Pawn which has  x and y coordinates, override <code>__eq__()</code> method and <code>__hash__()</code>, they would be used when check <code>if pawn not in pawns:</code> the <code>__eq__()</code> is used to validate 2 Pawn instance are equal or not based on their x and y coordinates.</p>\n\n<p>How to use?</p>\n\n<pre><code>pawn = Pawn(-1, -1)\nif pawn not in pawns:\n    pawns.append(pawn)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5141109, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/001d7287696a852cfa1f148a35c1d80a?s=128&d=identicon&r=PG&f=1", "display_name": "poppashingles", "link": "https://stackoverflow.com/users/5141109/poppashingles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 50032214, "answer_count": 2, "score": 0, "last_activity_date": 1524695649, "creation_date": 1524694851, "question_id": 50032138, "link": "https://stackoverflow.com/questions/50032138/avoiding-duplication-in-a-python-list", "title": "Avoiding duplication in a python list", "body": "<p>I'm trying to put together a bit of logic for a chess game and have gotten stuck with making sure I don't place multiple pieces on the same square. My code at the moment is as follows but I'm not sure where it's not working.</p>\n\n<pre><code>def add(self, pawn, x_coordinate, y_coordinate, piece_color):\n        for each_pawn in self.pawns:\n            if each_pawn.x_coordinate == x_coordinate and each_pawn.y_coordinate == y_coordinate:\n                pawn.x_coordinate = -1\n                pawn.y_coordinate = -1\n            else:\n                pawn.x_coordinate = x_coordinate\n                pawn.y_coordinate = y_coordinate\n\n        self.pawns.append(pawn)\n</code></pre>\n\n<p>Pawns is set as an empty list at the top of the class. The idea is that the pawn I'm creating goes into the list then when any subsequent ones are created it is checking for them having the same coordinates, if it does it is placed in the -1, -1 square i.e. off the board. I'm sure it's not particularly elegant but I'm new with Python and hope to come back and refactor when I have some fundamentals working. Thanks for any help!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "edited": false, "score": 0, "creation_date": 1524695620, "post_id": 50032136, "comment_id": 87080545, "body": "It&#39;s hard to tell without seeing the data. Perhaps your two-digit floats are being converted to 64-bit floats, then converted back to text but with 20 or so digits in the decimal place. There&#39;s an extra 16 bytes per row in your csv file."}, {"owner": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "reply_to_user": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "edited": false, "score": 0, "creation_date": 1524695758, "post_id": 50032136, "comment_id": 87080585, "body": "When I load into Excel, the columns and rows it can load are exactly the same. Shouldn&#39;t I be seeing only the first column?"}, {"owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "edited": false, "score": 0, "creation_date": 1524695956, "post_id": 50032136, "comment_id": 87080632, "body": "If you use a text editor to view the raw data, you ought to be able to see the differences between the files. Excel is interpreting your data, then displaying it. It&#39;s tough to tell whether Excel is showing you two digits of precision because it&#39;s a text field, or because it has cell properties set, or what. A text editor will show you the raw text."}, {"owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "edited": false, "score": 0, "creation_date": 1524696033, "post_id": 50032136, "comment_id": 87080648, "body": "Or you could read_csv into a pd.DataFrame variable, print(df.head()), and see what it&#39;s reading before you write it back out again."}, {"owner": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "reply_to_user": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "edited": false, "score": 0, "creation_date": 1524696352, "post_id": 50032136, "comment_id": 87080761, "body": "Added new screenshot. It adds a bunch of commas, then the rest of the data is same."}, {"owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "edited": false, "score": 0, "creation_date": 1524706934, "post_id": 50032136, "comment_id": 87083345, "body": "Try specifying a semicolon as your separator with sep=&quot;;&quot; as an argument to read_csv. It looks like it&#39;s probably semicolon-separated rather than comma-separated."}, {"owner": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "reply_to_user": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "edited": false, "score": 0, "creation_date": 1524707682, "post_id": 50032136, "comment_id": 87083538, "body": "That worked, thank you, I can breathe a little now."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "edited": false, "score": 0, "creation_date": 1524698929, "post_id": 50032655, "comment_id": 87081495, "body": "Thanks, I&#39;ll get a text editor and cut to retry creating a custom code. This dataset has been causing a lot of pain for the past few weeks."}, {"owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "reply_to_user": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "edited": false, "score": 0, "creation_date": 1524698999, "post_id": 50032655, "comment_id": 87081512, "body": "Notepad++ is a nice, powerful, raw text editor for Windows that&#39;s free. Many great options out there, but Notepad++ will get you started."}, {"owner": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "edited": false, "score": 0, "creation_date": 1524705846, "post_id": 50032655, "comment_id": 87083088, "body": "Updated the question, the headers are being read all wrong and no clue why."}, {"owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "reply_to_user": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "edited": false, "score": 0, "creation_date": 1524707668, "post_id": 50032655, "comment_id": 87083534, "body": "You can also print individual cells with print(df.iloc[0, 0]) and other values for 0. That can tell you if a single cell holds a single value, or way more than you had anticipated. You may have thousands of semicolons in a single cell if read_csv is waiting for the next comma to split the string."}], "tags": [], "owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "is_accepted": true, "score": 1, "last_activity_date": 1524698523, "creation_date": 1524698523, "answer_id": 50032655, "question_id": 50032136, "link": "https://stackoverflow.com/questions/50032136/pandas-iloc-not-returning-data-slice/50032655#50032655", "title": "Pandas iloc not returning data slice", "body": "<p>There are a few problems. Your input csv has entirely different formatting from lines 0-5 than it does from 6-on. The first 6 rows are not structured like a DataFrame with rows and columns. If you need these data, you might need to write some custom code to extract them.</p>\n\n<p>A second suggestion would be to use a text editor (google for suggestions, but these are NOT Word, Excel, or Writepad) to save a smaller portion of your data to experiment with. Trying to figure out how to read csv files with a 300MB monster is going to cause you a lot of pain and wasted time.</p>\n\n<p>From 6-on, you have what appears from your partial images to be more DataFrame-like, with column headers on row 6 and data beyond that. But it's impossible to tell how many columns are there from your image. So, first, ignore the more complex structures at the top of the file, and see if you can figure out what you are reading from the rest of one file, and whether you are writing what you think you are. Once you dial in your approach on a single file, you can start iterating over more.</p>\n\n<pre><code>import pandas as pd\n\ncsv_path = \"new-data.csv\"\nout_path = \"C:\\\\Users\\\\ThirdHandBD\\\\Desktop\\\\Data Splitting\\\\pd-split\\\\1.csv\"\n\ndf = pd.read_csv(csv_path, header=6, dtype='unicode')\nprint(\"I read in a dataframe with {} columns and {} rows.\".format(\n    len(df), len(df.columns)\n))\nprint(\"The first 4 and last 4 columns are:\")\nprint(df.head(4))\nprint(df.tail(4))\n\nout_df = df.iloc[:, :1]\n# This should be the same as df, but with only the first column.\n# Check it with similar code to above.\n</code></pre>\n\n<p>If your rows are still too large to visualize with the .head() and .tail() functions, I would again urge you to start with a \"toy\" dataset so you can get an intuition for what the code is doing for you. That's tough and frustrating with large data.</p>\n"}], "owner": {"reputation": 159, "user_id": 4953613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cb20e41ef1323e2f5c50a1c39f3d5360?s=128&d=identicon&r=PG", "display_name": "Tanzir Rahman", "link": "https://stackoverflow.com/users/4953613/tanzir-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 979, "favorite_count": 0, "accepted_answer_id": 50032655, "answer_count": 1, "score": 2, "last_activity_date": 1524705791, "creation_date": 1524694827, "last_edit_date": 1524705791, "question_id": 50032136, "link": "https://stackoverflow.com/questions/50032136/pandas-iloc-not-returning-data-slice", "title": "Pandas iloc not returning data slice", "body": "<p>I am trying to split a CSV file containing stock data of 1500+ companies. The first column contains dates and subsequent columns contain company data.</p>\n\n<p>When I use the <strong>iloc</strong> feature to split the CSV file into smaller files containing lesser columns, it's generating an even bigger file.</p>\n\n<p>Following is what the data looks like.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BBMY4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BBMY4.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import pandas as pd\n\ncsv_path = \"new-data.csv\"\nfilename = 1\nout_path = \"C:\\\\Users\\\\ThirdHandBD\\\\Desktop\\\\Data Splitting\\\\pd-split\\\\\" + str(filename) + \".csv\"\n\n#column increment\nx = 30 * 59\n\n'''for index, row in df.itertuples():\n    if index == ((x * filename) + 1):\n        pd.read_csv(csv_path).iloc[:, :index].to_csv(out_path)\n        filename += 1'''\n\npd.read_csv(csv_path, skiprows = 1, dtype='unicode').iloc[:, :1].to_csv(out_path)\n</code></pre>\n\n<p><strong>New file is bigger than original.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/XWAoT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XWAoT.png\" alt=\"enter image description here\"></a></p>\n\n<p>No errors thrown, dtype set to unicode to get around the low memory error. The file size is about 300 MB and similar dtypes have worked for others with similar file sizes. Skiprows set to 1 because the first row is empty.</p>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/BWH5t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BWH5t.png\" alt=\"enter image description here\"></a></p>\n\n<p>The is what the new data looks like. It adds a bunch of commas then the rest of the data is same. How do I fix this?</p>\n\n<p><strong>EDIT x 2:</strong></p>\n\n<p>After taking mightpile's suggestion into consideration, I get rid of everything except for the headers on row 6 and cut down on rows using a text editor. Then I run the following code.</p>\n\n<pre><code>import pandas as pd\n\ncsv_path = \"C:\\\\Users\\\\ThirdHandBD\\\\Desktop\\\\Data Splitting\\\\pd-split\\\\small-data.csv\"\nout_path = \"C:\\\\Users\\\\ThirdHandBD\\\\Desktop\\\\Data Splitting\\\\pd-split\\\\1.csv\"\n\ndf = pd.read_csv(csv_path, header=0, dtype='unicode')\nprint(\"I read in a dataframe with {} columns and {} rows.\".format(\nlen(df.columns), len(df)\n))\n\nout_df = df.iloc[:, :1]\nout_df.to_csv(out_path)\n# This should be the same as df, but with only the first column.\n# Check it with similar code to above.\n</code></pre>\n\n<p><strong>RESULT</strong></p>\n\n<p>I read in a dataframe with 1546 columns and 13 rows.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VjkGm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VjkGm.png\" alt=\"enter image description here\"></a></p>\n\n<p>It only cuts a random number of column headers. When I ran mightypile's code of first and last column, I got random headers returned. My csv is not being read right and I don't understand why.</p>\n\n<pre><code>print(\"The first and last columns are:\")\nprint(df.head(1))\nprint(df.tail(1))\n</code></pre>\n\n<p><strong>TERMINAL OUT:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/iH0Lv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iH0Lv.png\" alt=\"enter image description here\"></a></p>\n\n<p>The same terminal output repeats on and on. Sorry for being a dumb human but I feel like I'm going backward instead of making progress.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "utf-8", "character-encoding"], "comments": [{"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1524695621, "post_id": 50032126, "comment_id": 87080546, "body": "Which text editor are you using?"}, {"owner": {"reputation": 471, "user_id": 3424892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ktn2K.png?s=128&g=1", "display_name": "lalengua", "link": "https://stackoverflow.com/users/3424892/lalengua"}, "reply_to_user": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1524699876, "post_id": 50032126, "comment_id": 87081722, "body": "Mostly Sublime and some times Spyder"}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 1, "creation_date": 1524727560, "post_id": 50032126, "comment_id": 87090357, "body": "source file encoding has nothing to do with &quot;*to read properly a ... terminal input&quot;. One tell python how to interpret the python code (and python will transform anyway the string in own internal representation). Output depends on the local computer, not on developer environment, so python uses them as separate issues."}, {"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1524730609, "post_id": 50032126, "comment_id": 87092245, "body": "Redefining <code>sys.stdout</code> doesn&#39;t change how terminal input is read. It is only about output."}], "owner": {"reputation": 471, "user_id": 3424892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ktn2K.png?s=128&g=1", "display_name": "lalengua", "link": "https://stackoverflow.com/users/3424892/lalengua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524694767, "creation_date": 1524694767, "question_id": 50032126, "link": "https://stackoverflow.com/questions/50032126/correct-header-for-python-utf-8-script-in-v2-7-and-v3-4", "title": "Correct header for python UTF-8 script in v2.7 and v3.4", "body": "<p>I've found many answers for different versions of python but I'll love some insights about any \"best practices\" method of both allowing UTF-8 characters in code &amp; commentd and in input recieved values.</p>\n\n<p>If this could or should change for the same script in different plattforms (win, mac, etc).</p>\n\n<p>For a time now I've been using this header in my scripts:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n</code></pre>\n\n<p>This prevents encoding errors from showing when I use UTF-8 chars in my code and comments.</p>\n\n<p>The <code>/usr/bin/env</code> part has no meaning to me in a windows box. I supose just exists for nix boxes?</p>\n\n<p>Sorry if this question is too basic, but I need a simple answer, not a much technical one.</p>\n\n<p>In my sad windows 7 world I also have to use (in Py27 only) something like this just below the heades to read properly a <code>chcp 1252</code> terminal input:</p>\n\n<pre><code>import codecs,locale,sys\nsys.stdout = codecs.getwriter(locale.getpreferredencoding())(sys.stdout)\n</code></pre>\n\n<p>I know this should be another question, but both things are connected so...</p>\n\n<p>Is there a \"magical UTF-8 headerset\" that could work on win/mac/nix without changes? Is that only posible in py3?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["javascript", "python", "node.js", "math", "svg"], "comments": [{"owner": {"reputation": 732, "user_id": 938022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7162451e81e06f4b6e6eef93e955d9e3?s=128&d=identicon&r=PG", "display_name": "Carlos C", "link": "https://stackoverflow.com/users/938022/carlos-c"}, "edited": false, "score": 0, "creation_date": 1524696237, "post_id": 50032122, "comment_id": 87080715, "body": "Can you explain why are you giving downpoints? wth haha, it&#39;s clearly  noticeable the area is not width*height"}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 1, "creation_date": 1524696538, "post_id": 50032122, "comment_id": 87080835, "body": "What are you defining area as? The sum of all polygon areas? What have you tried?"}, {"owner": {"reputation": 732, "user_id": 938022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7162451e81e06f4b6e6eef93e955d9e3?s=128&d=identicon&r=PG", "display_name": "Carlos C", "link": "https://stackoverflow.com/users/938022/carlos-c"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1524697094, "post_id": 50032122, "comment_id": 87081002, "body": "@jhpratt SVGs can have paths overlapping other paths so maybe calculating the areas of all the polygons/paths that form the SVG would be wrong, I would need to substract the overlaps and that would make it even more complex. Right now I&#39;m trying to transform the SVG to a PNG, then detect the edges/corners of the PNG, get the coordinates of those corners and then calculate the area of the complex polygon."}], "answers": [{"comments": [{"owner": {"reputation": 732, "user_id": 938022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7162451e81e06f4b6e6eef93e955d9e3?s=128&d=identicon&r=PG", "display_name": "Carlos C", "link": "https://stackoverflow.com/users/938022/carlos-c"}, "edited": false, "score": 1, "creation_date": 1524695876, "post_id": 50032154, "comment_id": 87080610, "body": "That&#39;s not even close to the correct area sorry. You can clearly see the shape it&#39;s not a rectangle, but a complex shape. I&#39;m wondering how to go through all the paths of the SVG and calculate the areas to calculate the whole area. That&#39;s the only way that comes to my mind, but I don&#39;t know how do do it. Plus, some areas are over other areas and would need to substract them, so maybe there&#39;s a a better approach."}, {"owner": {"reputation": 9245, "user_id": 25868, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/4LaN5.jpg?s=128&g=1", "display_name": "Ashley Davis", "link": "https://stackoverflow.com/users/25868/ashley-davis"}, "reply_to_user": {"reputation": 732, "user_id": 938022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7162451e81e06f4b6e6eef93e955d9e3?s=128&d=identicon&r=PG", "display_name": "Carlos C", "link": "https://stackoverflow.com/users/938022/carlos-c"}, "edited": false, "score": 0, "creation_date": 1524716148, "post_id": 50032154, "comment_id": 87085557, "body": "Well that isn&#39;t clear from your question and it&#39;s going to be pretty complicated to compute that from paths."}], "tags": [], "owner": {"reputation": 9245, "user_id": 25868, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/4LaN5.jpg?s=128&g=1", "display_name": "Ashley Davis", "link": "https://stackoverflow.com/users/25868/ashley-davis"}, "is_accepted": false, "score": -1, "last_activity_date": 1524694958, "creation_date": 1524694958, "answer_id": 50032154, "question_id": 50032122, "link": "https://stackoverflow.com/questions/50032122/calculate-area-of-complex-shaped-svg/50032154#50032154", "title": "Calculate area of complex shaped SVG", "body": "<p>The surface area of a rectangle is calculated with the following formula:</p>\n\n<pre><code>Area = length * width\n</code></pre>\n\n<p>It's pretty simple to do this in JavaScript:</p>\n\n<pre><code>var svgWidth = ...\nvar svgHeight = ...\nvar svgArea = svgWidth * svgHeight;\nconsole.log(\"The area of the SVG is \" + svgArea);\n</code></pre>\n"}], "owner": {"reputation": 732, "user_id": 938022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7162451e81e06f4b6e6eef93e955d9e3?s=128&d=identicon&r=PG", "display_name": "Carlos C", "link": "https://stackoverflow.com/users/938022/carlos-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1524696404, "creation_date": 1524694743, "last_edit_date": 1524696404, "question_id": 50032122, "link": "https://stackoverflow.com/questions/50032122/calculate-area-of-complex-shaped-svg", "title": "Calculate area of complex shaped SVG", "body": "<p>I want to be able to calculate the area of a given SVG by defining the width, therefor the length too in cm.</p>\n\n<p>It's a not only <code>height*width</code> because it's the SVG is complex shape.</p>\n\n<p>Let's say I have this SVG:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ym0Np.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ym0Np.png\" alt=\"What&#39;s the area of this SVG?\"></a></p>\n\n<p>How can I calculate it's surface area with HTML/JavaScript, or Python, or Node.JS?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1524694528, "post_id": 50032052, "comment_id": 87080273, "body": "Try moving the file after the with block."}, {"owner": {"reputation": 3, "user_id": 9700548, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dev", "link": "https://stackoverflow.com/users/9700548/dev"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524696247, "post_id": 50032052, "comment_id": 87080722, "body": "did not work, problem was it then moved the last file."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1524868878, "post_id": 50032052, "comment_id": 87158893, "body": "Formatted code and put error messages and expected result in separated lines."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1524868958, "post_id": 50032052, "comment_id": 87158916, "body": "Path separators are not consistent, some are escaped and some not."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9700548, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dev", "link": "https://stackoverflow.com/users/9700548/dev"}, "edited": false, "score": 0, "creation_date": 1524696281, "post_id": 50032090, "comment_id": 87080738, "body": "Got a list, appended it. now stuck on how to move the list of files. any suggestions.would be appreciated. still learning here. I want to delete the files in the source at the same time."}, {"owner": {"reputation": 2460, "user_id": 2715819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865993e49f832e0d08673bb6ae8f24b7?s=128&d=identicon&r=PG", "display_name": "RishiG", "link": "https://stackoverflow.com/users/2715819/rishig"}, "reply_to_user": {"reputation": 3, "user_id": 9700548, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dev", "link": "https://stackoverflow.com/users/9700548/dev"}, "edited": false, "score": 0, "creation_date": 1524696390, "post_id": 50032090, "comment_id": 87080778, "body": "<code>for file in list_of_files_to_move: shutil.move(...)</code>"}], "tags": [], "owner": {"reputation": 2460, "user_id": 2715819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865993e49f832e0d08673bb6ae8f24b7?s=128&d=identicon&r=PG", "display_name": "RishiG", "link": "https://stackoverflow.com/users/2715819/rishig"}, "is_accepted": true, "score": 0, "last_activity_date": 1524694542, "creation_date": 1524694542, "answer_id": 50032090, "question_id": 50032052, "link": "https://stackoverflow.com/questions/50032052/trying-to-move-files-in-txt-format-containing-str-meta-analysis-from-one-f/50032090#50032090", "title": "Trying to move files ( in .txt format) containing str &#39;meta-analysis&#39; from one folder to another-python", "body": "<p>You can't move the file with <code>shutil</code> while it's still open (inside the <code>with</code> clause).  First make a list of files you want to move, then move them.</p>\n"}], "owner": {"reputation": 3, "user_id": 9700548, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dev", "link": "https://stackoverflow.com/users/9700548/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 50032090, "answer_count": 1, "score": 0, "last_activity_date": 1524868878, "creation_date": 1524694287, "last_edit_date": 1524868878, "question_id": 50032052, "link": "https://stackoverflow.com/questions/50032052/trying-to-move-files-in-txt-format-containing-str-meta-analysis-from-one-f", "title": "Trying to move files ( in .txt format) containing str &#39;meta-analysis&#39; from one folder to another-python", "body": "<pre><code>import shutil\nos.chdir('D:\\Source')\n##i for counting number of files\ni=0\n\nfor file in os.listdir():\n# Trying to move the identified file to a different folder\n# but thows PermissionError      \n\n    with open(file,'r',encoding='utf-8')as F:\n        for line in F:\n            if 'meta-analysis' in line:\n                i=i+1\n                print(i)\n                print(line)\n                #attempting to move the relevant file. \n                shutil.move(file,'D:\\Research\\dest\\\\'+file )\n            else:\n                pass\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>PermissionError: [WinError 32] The process cannot access the file \n  because it is being used by another process: </p>\n</blockquote>\n\n<p>Expected behavior:</p>\n\n<p>all the files move to dest folder and moved files are deleted from Source</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1524694295, "post_id": 50032031, "comment_id": 87080191, "body": "I think you&#39;re looking for <code>ttk.Notebook</code>. (<code>import tkinter.ttk as ttk</code>)"}, {"owner": {"reputation": 1, "user_id": 9700559, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QhKx1oi8zuw/AAAAAAAAAAI/AAAAAAAAAM0/bhcxRi2Iwds/photo.jpg?sz=128", "display_name": "Sam", "link": "https://stackoverflow.com/users/9700559/sam"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1524695530, "post_id": 50032031, "comment_id": 87080510, "body": "@Aran-Fey that gives me this error: AttributeError: type object &#39;Notebook&#39; has no attribute &#39;tk&#39;  - I tried changing all of the tk.Frames to ttk.Frame aswell but the error stayed the same."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1524775324, "post_id": 50032031, "comment_id": 87119347, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your code is very confusing. One &quot;page&quot; is the root window and one &quot;page&quot; is a frame. It&#39;s not clear if that&#39;s intentional or not. Plus, you&#39;re not creating instance of either of those classes.  Allso, as Aran-Fey mentioned, the error is correct: tkinter doesn&#39;t have a Notebook. You need to use the Notebook from the ttk package. And finally, please fix the indentation problems in your code."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11270703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1sp6LiCQYHI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfDNFdFCOEWxW-mukxAh2xfiGv3Ig/mo/photo.jpg?sz=128", "display_name": "\u0413\u0435\u043d\u043d\u0430\u0434\u0438\u0439 \u0415\u0432\u0444\u0433\u0440\u0430\u0444\u043e\u0432\u0438\u0447 \u041f\u0438\u043a\u0430\u043f\u043e\u0432", "link": "https://stackoverflow.com/users/11270703/%d0%93%d0%b5%d0%bd%d0%bd%d0%b0%d0%b4%d0%b8%d0%b9-%d0%95%d0%b2%d1%84%d0%b3%d1%80%d0%b0%d1%84%d0%be%d0%b2%d0%b8%d1%87-%d0%9f%d0%b8%d0%ba%d0%b0%d0%bf%d0%be%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1553764998, "last_edit_date": 1553764998, "creation_date": 1553759752, "answer_id": 55392584, "question_id": 50032031, "link": "https://stackoverflow.com/questions/50032031/error-with-switching-frames-in-tkinter/55392584#55392584", "title": "Error with Switching frames in Tkinter", "body": "<p>This should work:</p>\n\n<pre><code>from tkinter import ttk\n\ntab_control = ttk.Notebook(self)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9700559, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QhKx1oi8zuw/AAAAAAAAAAI/AAAAAAAAAM0/bhcxRi2Iwds/photo.jpg?sz=128", "display_name": "Sam", "link": "https://stackoverflow.com/users/9700559/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553764998, "creation_date": 1524694149, "last_edit_date": 1524775072, "question_id": 50032031, "link": "https://stackoverflow.com/questions/50032031/error-with-switching-frames-in-tkinter", "title": "Error with Switching frames in Tkinter", "body": "<p>I am trying out a python GUI as part of the school curriculum, I am trying to switch frames using a button, that is set to destroy the old frame and open the new one, while I am not having any trouble opening a new frame I cannot seem to destroy the old one or load any widgets etc. into the new frame. Here is the part of the code I am having trouble with:</p>\n\n<pre><code>class welcomePage(tk.Frame):\n\ndef __init__(self, parent, controller):\n    tk.Frame.__init__(self, parent)\n    self.controller = controller\n\n    homebutton = tk.Button(self, text = \"Return Home\", command=lambda: self.home(), width = 30, height = 1)\n    homebutton.pack(padx = 10, pady= 20 )\n\n    cswitch = tk.Button(self, text = \"Customer Interface\", command=lambda: (self.destroy, CustomerPage()), width = 30, height = 1)\n    cswitch.pack(padx = 10, pady= 15 )\n\n    exit = tk.Button(self, text=\"Exit\", command=self.destroy, width = 30, height = 1)\n    exit.pack(padx = 10, pady= 20 )\n\nclass CustomerPage(tk.Tk):\ndef __init__(self, *args, **kwargs):\n    tk.Tk.__init__(self, *args, **kwargs)\n\n\n    self.title(\"Customer Interface\")\n    self.minsize(width = 300, height = 100)\n    self.maxsize(width = 9999, height = 9999)\n    tab_control = tk.Notebook(self)\n    admin1 = tk.Frame(tab_control)\n    admin2 = tk.Frame(tab_control)\n    admin3 = tk.Frame(tab_control)\n    admin4 = tk.Frame(tab_control)\n    tab_control.add(admin1, text='Menu')\n    tab_control.add(admin2, text='DataBase')\n    tab_control.add(admin3, text='Sales History')\n    tab_control.add(admin4, text='Search')        \n\n                # -- Menu -- #\n\n    homebutton = tk.Button(admin1, text = \"Return Home\", command=lambda: self.home(), width = 30, height = 1)\n    homebutton.pack(padx = 10, pady= 30 )\n\n    cswitch = tk.Button(admin1, text = \"Admin Interface\", command=lambda: self.cswitch(), width = 30, height = 1)\n    cswitch.pack(padx = 10, pady= 10 )\n\n    exit = tk.Button(admin1, text=\"Exit\", command=self.destroy, width = 30, height = 1)\n    exit.pack(padx = 10, pady= 30 )\n</code></pre>\n\n<p>Here is the error I am getting: AttributeError: module 'tkinter' has no attribute 'Notebook'</p>\n\n<p>I cant find anything online regarding this specific error so any help is greatly appreciated :).</p>\n"}, {"tags": ["python", "loops", "while-loop", "mechanicalsoup"], "comments": [{"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1524693849, "post_id": 50031945, "comment_id": 87080041, "body": "Do you even know what exception it&#39;s being thrown? I don&#39;t, I can only see a plain &quot;except all&quot; clause. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for anyone to be able to help you. Ie. we also don&#39;t know what is <code>ashr</code>, <code>tickers</code>, <code>client</code>, or even <code>buy</code>."}, {"owner": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1524693889, "post_id": 50031945, "comment_id": 87080056, "body": "Are you taking an exception?  Put a print statement in that except: clause to make sure the system isn&#39;t trying to tell you something you are ignoring."}, {"owner": {"reputation": 193, "user_id": 8798570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5313c9e8f756f042de11c1dae467eefc?s=128&d=identicon&r=PG&f=1", "display_name": "Carson P", "link": "https://stackoverflow.com/users/8798570/carson-p"}, "reply_to_user": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1524694045, "post_id": 50031945, "comment_id": 87080103, "body": "@Frank I don&#39;t have an exception because it just keeps trying to use the API&#39;s function and if it fails it tries again. So the program doesn&#39;t ever give me a traceback or anything. What do I tell it to print in the except clause to get it&#39;s error message?"}, {"owner": {"reputation": 463, "user_id": 9034823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3y2sd.jpg?s=128&g=1", "display_name": "NBlaine", "link": "https://stackoverflow.com/users/9034823/nblaine"}, "edited": false, "score": 2, "creation_date": 1524694758, "post_id": 50031945, "comment_id": 87080331, "body": "@CarsonP <code>except Exception as e: print(e)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9669507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86422d962d766327fdb49942294c9eaf?s=128&d=identicon&r=PG&f=1", "display_name": "James Bincom", "link": "https://stackoverflow.com/users/9669507/james-bincom"}, "is_accepted": true, "score": 2, "last_activity_date": 1524695063, "creation_date": 1524695063, "answer_id": 50032170, "question_id": 50031945, "link": "https://stackoverflow.com/questions/50031945/repeating-api-call-caches-response-so-i-need-to-fully-kill-it-and-try-again/50032170#50032170", "title": "Repeating API call caches response so I need to fully kill it and try again", "body": "<p>as suggested by pkisztelinski, you asked the program to continue the next phase of the iteration when there is an exception, so if exception keeps occuring it may lead to an infinite loop. </p>\n\n<p>however, if you wanted to know the exception that occurred, you could do this</p>\n\n<pre><code>while True:\n            try:\n                print \"trying to buy a\"\n                buy(ashr ,tickers[0], client)                  \n            except Exception as e:\n                print('Error occured '+str(e))\n                break\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 8798570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5313c9e8f756f042de11c1dae467eefc?s=128&d=identicon&r=PG&f=1", "display_name": "Carson P", "link": "https://stackoverflow.com/users/8798570/carson-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 50032170, "answer_count": 1, "score": 0, "last_activity_date": 1524695063, "creation_date": 1524693598, "last_edit_date": 1524694249, "question_id": 50031945, "link": "https://stackoverflow.com/questions/50031945/repeating-api-call-caches-response-so-i-need-to-fully-kill-it-and-try-again", "title": "Repeating API call caches response so I need to fully kill it and try again", "body": "<p>Essentially, I have a set of conditions that run this:</p>\n\n<pre><code>while True:\n            try:\n                print \"trying to buy a\"\n                buy(ashr ,tickers[0], client)                  \n            except:\n                continue\n            break\n</code></pre>\n\n<p>This uses an API that utilizes MechanicalSoup mostly to fill out a form or two on a website. For some reason, the action will fail after running and will continue to run (like the while True says) until I force quit the program. </p>\n\n<p>I'm assuming that something is being cached because there's no logical reason it would fail hundreds of times over.</p>\n\n<p>How can I get it to completely kill whatever it has going on and retry it from the ground up?</p>\n\n<p>Thanks</p>\n\n<p>EDIT: More code</p>\n\n<pre><code>def buy(shares, ticker, client):\n    client.trade(ticker,ita.Action.buy, shares)\n\nashr = int(200/ita.get_quote(tickers[0]))\n\nclient = ita.Account(\"example.un\", \"example.pw\")\n</code></pre>\n\n<p>ita is the main module of the InvestopediaAPI that I'm using to run buys and sells on investopedia's paper trader. If I need to give some of the code from that API I can go find it's source code.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 834, "user_id": 3887232, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/CDxpr.jpg?s=128&g=1", "display_name": "DimKoim", "link": "https://stackoverflow.com/users/3887232/dimkoim"}, "edited": false, "score": 0, "creation_date": 1524693448, "post_id": 50031900, "comment_id": 87079930, "body": "Possible duplicate of  <a href=\"https://stackoverflow.com/questions/29337928/how-to-remove-anaconda-from-windows-completely\">this post</a>. Have a look at the answer #3"}, {"owner": {"reputation": 645, "user_id": 7735095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a9cf3c226b2feddc2fcde5a0ff610c?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/7735095/jakob"}, "edited": false, "score": 0, "creation_date": 1568938548, "post_id": 50031900, "comment_id": 102443789, "body": "Maybe the possible duplicates <a href=\"https://stackoverflow.com/q/48236584/7735095\">stackoverflow.com/q/48236584/7735095</a> and <a href=\"https://stackoverflow.com/questions/53272378/which-folders-should-i-remove-after-uninstalling-anaconda-on-windows-10?noredirect=1&amp;lq=1\" title=\"which folders should i remove after uninstalling anaconda on windows 10\">stackoverflow.com/questions/53272378/&hellip;</a> could be helpful for you too?"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 11032592, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ci_L4bKA3Oc/AAAAAAAAAAI/AAAAAAAAHMk/38_43OFIurM/photo.jpg?sz=128", "display_name": "Aurelio Jimenez", "link": "https://stackoverflow.com/users/11032592/aurelio-jimenez"}, "is_accepted": false, "score": 0, "last_activity_date": 1596212087, "creation_date": 1596212087, "answer_id": 63195485, "question_id": 50031900, "link": "https://stackoverflow.com/questions/50031900/how-to-exactly-uninstall-anacondapython-3-6-4-from-windows-7/63195485#63195485", "title": "How to exactly uninstall anaconda(python 3.6.4) from windows 7?", "body": "<p>One way that worked for me was:</p>\n<p>Doing an Explorer search for <code>Uninstall-Anaconda.exe</code>, and running it afterwards.</p>\n"}], "owner": {"reputation": 51, "user_id": 9460721, "user_type": "registered", "profile_image": "https://graph.facebook.com/1653435991398900/picture?type=large", "display_name": "Biswajit Chakraborty", "link": "https://stackoverflow.com/users/9460721/biswajit-chakraborty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1596212087, "creation_date": 1524693261, "last_edit_date": 1524693423, "question_id": 50031900, "link": "https://stackoverflow.com/questions/50031900/how-to-exactly-uninstall-anacondapython-3-6-4-from-windows-7", "title": "How to exactly uninstall anaconda(python 3.6.4) from windows 7?", "body": "<p>I was trying to uninstall Anaconda Navigator (python 3.6.4) from my windows 7. There was no uninstaller shortcut in start menu, so I went like </p>\n\n<pre><code>Control Panel &gt; Programs &gt; Uninstall Python 3.6.4\n</code></pre>\n\n<p>But even after this uninstallation, this program left huge data in <code>D:\\Program Files(x86)\\Anaconda 3(actual path of the installed files)</code>. Then, I found an uninstaller.exe in the above path and tried that too. But even after uninstallation guide shows that the software is uninstalled successfully, not a single data gets deleted. How will I be able to erase Anaconda and safely go back to the basic Python 2.7(IDLE Mode) ?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "timestamp"], "comments": [{"owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "edited": false, "score": 0, "creation_date": 1524694565, "post_id": 50031872, "comment_id": 87080286, "body": "I think pandas.resampler.count is the correct way to do it"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1524693605, "creation_date": 1524693605, "answer_id": 50031946, "question_id": 50031872, "link": "https://stackoverflow.com/questions/50031872/count-rows-using-pandas-dataframe/50031946#50031946", "title": "count rows using pandas dataframe", "body": "<p>You can first convert your first column to a pd.Timedelta dtype, then set it into the index and use resample with count:</p>\n\n<pre><code>from io import StringIO\ntxt = StringIO(\"\"\"00:00:01 data1\n\n00:00:21 data2\n\n00:02:02 data3\n\n00:02:10 data4\n\n00:02:31 data5\"\"\")\n\ndf = pd.read_csv(txt, names=['Time','Value'], sep='\\s+')\n\n\ndf['Time'] = pd.to_timedelta(df['Time'])\n\ndf = df.set_index('Time')\n\ndf_out = df.resample('T').count()\n\ndf_out \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>          Value\nTime           \n00:00:01      2\n00:01:01      0\n00:02:01      3\n</code></pre>\n\n<p>To list:</p>\n\n<pre><code>df_out['Value'].tolist()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[2, 0, 3]\n</code></pre>\n"}], "owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2492, "favorite_count": 0, "accepted_answer_id": 50031946, "answer_count": 1, "score": 1, "last_activity_date": 1524696028, "creation_date": 1524693093, "last_edit_date": 1524696028, "question_id": 50031872, "link": "https://stackoverflow.com/questions/50031872/count-rows-using-pandas-dataframe", "title": "count rows using pandas dataframe", "body": "<p>I have a pandas dataframe with timestamp data.\nI want to count how many rows I have per minute, for example, given this table:</p>\n\n<p>00:00:01 data1</p>\n\n<p>00:00:21 data2</p>\n\n<p>00:02:02 data3</p>\n\n<p>00:02:10 data4</p>\n\n<p>00:02:31 data5</p>\n\n<p>the result should be [2,0, 3].\nHow can I do it?</p>\n"}, {"tags": ["python", "importerror"], "comments": [{"owner": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1524693745, "post_id": 50031831, "comment_id": 87080023, "body": "Well if you are using something like Jenkins there are login shells and non-login shells which don&#39;t process .rc files.  So I would be interested in seeing the actual value of LD_LIBRARY_PATH live from the actual bash prompt you are using.  Also I find the &quot;gf&quot; in .3gf suspicious . . . why is the gf there?"}, {"owner": {"reputation": 551, "user_id": 239205, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7a69234370d19b1d2fd0678204640f1e?s=128&d=identicon&r=PG", "display_name": "linuxstack", "link": "https://stackoverflow.com/users/239205/linuxstack"}, "reply_to_user": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1524695635, "post_id": 50031831, "comment_id": 87080554, "body": "@Frank On a bash shell doing a echo for LD_LIBRARY_PATH command gives: echo $LD_LIBRARY_PATH /usr/local/lib:/usr/local/mypython/lib:/usr/lib/x86_64-linux&zwnj;&#8203;-gnu:/usr/local/  I am sorry I am not sure about the 3gf appended at the end. I googled and could find posts with exact names ending in 3gf"}, {"owner": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1524706668, "post_id": 50031831, "comment_id": 87083272, "body": "So &quot;lapack&quot; is missing . . . you might add a second entry with lapack and see if it helps."}, {"owner": {"reputation": 551, "user_id": 239205, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7a69234370d19b1d2fd0678204640f1e?s=128&d=identicon&r=PG", "display_name": "linuxstack", "link": "https://stackoverflow.com/users/239205/linuxstack"}, "reply_to_user": {"reputation": 741, "user_id": 556488, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1efe132124e77e83be3bdade7c4384a7?s=128&d=identicon&r=PG", "display_name": "Frank Merrow", "link": "https://stackoverflow.com/users/556488/frank-merrow"}, "edited": false, "score": 0, "creation_date": 1527022813, "post_id": 50031831, "comment_id": 87966307, "body": "Thanks @FrankMerrow it worked with this workaround for a while but now I face a similar error -- ImportError: libblas.so.3gf: cannot open shared object file: No such file or directory.  I did create a symbolic link: sudo ln -s /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.7.1 /usr/lib/x86_64-linux-gnu/blas/libblas.so.3gf  I updated the ~/.bashrc with export LD_LIBRARY_PATH=:/usr/local/nest-python/lib:/usr/lib/x86_64-&zwnj;&#8203;linux-gnu/atlas:/usr&zwnj;&#8203;/local/lib:/usr/lib/&zwnj;&#8203;x86_64-linux-gnu:/us&zwnj;&#8203;r/lib/x86_64-linux-g&zwnj;&#8203;nu/lapack:/lib/x86_6&zwnj;&#8203;4-linux-gnu/blas But the issue persists. Any pointers? Plz let me know."}], "owner": {"reputation": 551, "user_id": 239205, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7a69234370d19b1d2fd0678204640f1e?s=128&d=identicon&r=PG", "display_name": "linuxstack", "link": "https://stackoverflow.com/users/239205/linuxstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524692868, "creation_date": 1524692868, "question_id": 50031831, "link": "https://stackoverflow.com/questions/50031831/python-automation-tests-importerror-liblapack-so-3gf", "title": "Python automation tests: ImportError: liblapack.so.3gf", "body": "<p>I am trying to get one of my Python automation tests working but unfortunately I encounter this error: ImportError: liblapack.so.3gf: cannot open shared object file: No such file or directory\nThe machine specs are: Linux crazlulinuxuser 4.9.0-6-amd64 #1 SMP Debian 4.9.82-1+deb9u3 (2018-03-02) x86_64 GNU/Linux</p>\n\n<p>I have installed the correct packages and here is the output from the absolute path for lapack:</p>\n\n<pre><code>/usr/lib/x86_64-linux-gnu/lapack$ ls -Faithsl\ntotal 19M\n1060118 120K drwxr-xr-x 148 root root 116K Apr 25 14:07 ../\n1705054 4.0K drwxr-xr-x   2 root root 4.0K Apr 25 14:05 ./\n1714629  12M -rw-r--r--   1 root root  12M Sep 13  2017 liblapack.a\n1725288    0 lrwxrwxrwx   1 root root   18 Sep 13  2017 liblapack.so -&gt; liblapack.so.3.7.1\n1706104    0 lrwxrwxrwx   1 root root   18 Sep 13  2017 liblapack.so.3 -&gt; liblapack.so.3.7.1\n</code></pre>\n\n<p>I have the following entry in .bashrc file: export LD_LIBRARY_PATH=/usr/local/nest-python/lib:/usr/lib/x86_64-linux-gnu:/usr/local/lib:/usr/lib/x86_64-linux-gnu/lapack</p>\n\n<p>I did follow other StackOverflow solutions to similar problems but wasn't successful in getting it working.</p>\n\n<p>What am I missing. Could someone help me troubleshoot on this issue.\nThank you.</p>\n"}, {"tags": ["python", "pandas", "performance", "datetime", "date-range"], "answers": [{"tags": [], "owner": {"reputation": 7908, "user_id": 1292238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b41e8dc5fb7440e261335294cd11b35?s=128&d=identicon&r=PG", "display_name": "azalea", "link": "https://stackoverflow.com/users/1292238/azalea"}, "is_accepted": false, "score": 2, "last_activity_date": 1524696579, "last_edit_date": 1524696579, "creation_date": 1524696198, "answer_id": 50032333, "question_id": 50031780, "link": "https://stackoverflow.com/questions/50031780/efficiently-find-overlap-of-date-time-ranges-from-2-dataframes/50032333#50032333", "title": "Efficiently find overlap of date-time ranges from 2 dataframes", "body": "<p>Assuming both <code>df1</code> and <code>df2</code> are sorted in ascending order by the <code>datetime_start</code> column (it appears so), then you just need to go through each row of the two dataframes once, resulting in an <code>O(n)</code> running time, rather than the current <code>O(n^2)</code> due to pairwise row comparison.</p>\n\n<p>The following code illustrates the idea. The key point is using iterators <code>it1</code> and <code>it2</code> to point to the current row. Since the dataframes are sorted, if row1 is already later in time than row2, we are sure that the next row in df1 is later than row2. Harder to explain in words than code:</p>\n\n<pre><code>def main(df1, df2):\n    for cat in df2.catg.unique().tolist():\n        df1[cat] = 0\n    it1 = df1.iterrows()\n    it2 = df2.iterrows()\n    idx1, row1 = next(it1)\n    idx2, row2 = next(it2)\n    while True:\n        try:\n            r1 = Range(start=row1.datetime_start, end=row1.datetime_end)\n            r2 = Range(start=row2.datetime_start, end=row2.datetime_end)\n            if r2.end &lt; r1.start:\n                # no overlap. r2 before r1. advance it2\n                idx2, row2 = next(it2)\n            elif r1.end &lt; r2.start:\n                # no overlap. r1 before r2. advance it1\n                idx1, row1 = next(it1)\n            else:\n                # overlap. overlap(row1, row2) must &gt; 0 \n                df1.loc[idx1, row2.catg] += overlap(row1, row2)\n                # determine whether to advance it1 or it2\n                if r1.end &lt; r2.end:\n                    # advance it1\n                    idx1, row1 = next(it1)\n                else:\n                    # advance it2\n                    idx2, row2 = next(it2)\n        except StopIteration:\n            break\n\nmain(df1, df2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4414, "user_id": 5241032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056c678e99e8253ad280b230ba30a7fb?s=128&d=identicon&r=PG&f=1", "display_name": "cmaher", "link": "https://stackoverflow.com/users/5241032/cmaher"}, "is_accepted": true, "score": 4, "last_activity_date": 1524751045, "last_edit_date": 1524751045, "creation_date": 1524696281, "answer_id": 50032346, "question_id": 50031780, "link": "https://stackoverflow.com/questions/50031780/efficiently-find-overlap-of-date-time-ranges-from-2-dataframes/50032346#50032346", "title": "Efficiently find overlap of date-time ranges from 2 dataframes", "body": "<p>Based on <code>timeit</code> tests, with 100 executions each, the <code>namedtuple</code> approach in the question averaged <code>15.7314</code> seconds on my machine, vs. an average of <code>1.4794</code> seconds with this approach:</p>\n\n<pre><code># determine the duration of the events in df2, in seconds\nduration = (df2.datetime_end - df2.datetime_start).dt.seconds.values\n\n# create a numpy array with one timestamp for each second \n# in which an event occurred\nseconds_range = np.repeat(df2.datetime_start.values, duration) + \\\n                np.concatenate(map(np.arange, duration)) * pd.Timedelta('1S')\n\ndf1.merge(pd.DataFrame({'datetime_start':seconds_range,\n                        'catg':np.repeat(df2.catg, duration)}). \\\n              groupby(['catg', pd.Grouper(key='datetime_start', freq='30min')]). \\\n              size(). \\\n              unstack(level=0). \\\n              reset_index(), \n          how=\"left\")\n\n#           datetime_end      datetime_start       a       b     c       d\n# 0  2016-09-11 06:30:00 2016-09-11 06:00:00     NaN     NaN   NaN     NaN\n# 1  2016-09-11 07:30:00 2016-09-11 07:00:00     NaN     NaN   NaN     NaN\n# 2  2016-09-11 08:00:00 2016-09-11 07:30:00     NaN     NaN   NaN     NaN\n# 3  2016-09-11 08:30:00 2016-09-11 08:00:00     NaN     NaN   NaN     NaN\n# 4  2016-09-11 09:00:00 2016-09-11 08:30:00   687.0     NaN   NaN     NaN\n# 5  2016-09-11 09:30:00 2016-09-11 09:00:00  1800.0     NaN   NaN     NaN\n# 6  2016-09-11 10:00:00 2016-09-11 09:30:00  1048.0     NaN   NaN     NaN\n# 7  2016-09-11 11:00:00 2016-09-11 10:30:00     NaN     NaN   NaN     NaN\n# 8  2016-09-11 14:30:00 2016-09-11 14:00:00     NaN   463.0   NaN   701.0\n# 9  2016-09-11 15:00:00 2016-09-11 14:30:00     NaN   220.0   NaN     NaN\n# 10 2016-09-11 15:30:00 2016-09-11 15:00:00     NaN   300.0   NaN  1277.0\n# 11 2016-09-11 16:00:00 2016-09-11 15:30:00  1316.0     NaN   NaN    89.0\n# 12 2016-09-11 16:30:00 2016-09-11 16:00:00   564.0   680.0   NaN     NaN\n# 13 2016-09-11 17:00:00 2016-09-11 16:30:00     NaN  1654.0   NaN     NaN\n# 14 2016-09-11 17:30:00 2016-09-11 17:00:00     NaN   389.0  20.0     NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1524699172, "last_edit_date": 1524699172, "creation_date": 1524696648, "answer_id": 50032412, "question_id": 50031780, "link": "https://stackoverflow.com/questions/50031780/efficiently-find-overlap-of-date-time-ranges-from-2-dataframes/50032412#50032412", "title": "Efficiently find overlap of date-time ranges from 2 dataframes", "body": "<p>You should see a significant (~8x in my testing) performance improvement through a few changes. The structure of your code remains the same:</p>\n\n<pre><code>def overlap(row1, row2):\n    return max(0, (min(row1[0], row2[0]) - max(row1[1], row2[1])) / np.timedelta64(1, 's'))\n\ndf1 = df1.join(pd.DataFrame(dict.fromkeys(df2.catg.unique(), 0), index=df1.index))\n\nfor idx1, row1 in enumerate(df1.iloc[:, :2].values):\n    for catg, row2 in zip(df2['catg'], df2.iloc[:, 1:3].values):\n        df1.iat[idx1, df1.columns.get_loc(catg)] += overlap(row1, row2)\n</code></pre>\n\n<p>You can get this down further via <code>numba</code>, or doing some clever <code>pandas</code> stuff which hides all your logic.</p>\n\n<p><strong>Explanation</strong></p>\n\n<ol>\n<li>Use <code>df.itertuples</code> instead of <code>df.iterrows</code></li>\n<li>Use <code>df.iat</code> instead of <code>df.loc</code></li>\n<li>Use <code>numpy</code> instead of <code>pandas</code> time objects</li>\n<li>Remove named tuple creation</li>\n<li>Remove duplicate overlap calculation</li>\n<li>Improve overlap algorithm</li>\n</ol>\n\n<p><strong>Result</strong></p>\n\n<pre><code>          datetime_end      datetime_start     a     b   c     d\n0  2016-09-11 06:30:00 2016-09-11 06:00:00     0     0   0     0\n1  2016-09-11 07:30:00 2016-09-11 07:00:00     0     0   0     0\n2  2016-09-11 08:00:00 2016-09-11 07:30:00     0     0   0     0\n3  2016-09-11 08:30:00 2016-09-11 08:00:00     0     0   0     0\n4  2016-09-11 09:00:00 2016-09-11 08:30:00   687     0   0     0\n5  2016-09-11 09:30:00 2016-09-11 09:00:00  1800     0   0     0\n6  2016-09-11 10:00:00 2016-09-11 09:30:00  1048     0   0     0\n7  2016-09-11 11:00:00 2016-09-11 10:30:00     0     0   0     0\n13 2016-09-11 14:30:00 2016-09-11 14:00:00     0   463   0   701\n14 2016-09-11 15:00:00 2016-09-11 14:30:00     0   220   0     0\n15 2016-09-11 15:30:00 2016-09-11 15:00:00     0   300   0  1277\n16 2016-09-11 16:00:00 2016-09-11 15:30:00  1316     0   0    89\n17 2016-09-11 16:30:00 2016-09-11 16:00:00   564   680   0     0\n18 2016-09-11 17:00:00 2016-09-11 16:30:00     0  1654   0     0\n19 2016-09-11 17:30:00 2016-09-11 17:00:00     0   389  20     0\n</code></pre>\n"}], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3349, "favorite_count": 2, "accepted_answer_id": 50032346, "answer_count": 3, "score": 7, "last_activity_date": 1576150104, "creation_date": 1524692636, "last_edit_date": 1576150104, "question_id": 50031780, "link": "https://stackoverflow.com/questions/50031780/efficiently-find-overlap-of-date-time-ranges-from-2-dataframes", "title": "Efficiently find overlap of date-time ranges from 2 dataframes", "body": "<p>There are some questions out there regarding finding the overlap in date or time ranges (<a href=\"https://stackoverflow.com/questions/9044084/efficient-date-range-overlap-calculation-in-python\">for example</a>). I've used these to solve my problem, but I've ended up with an <em>extremely</em> slow (and not-at-all elegant) solution to my problem. I would really appreciate it if someone has an idea of how to <strong>make this faster</strong> (and more elegant):</p>\n\n<p><strong>The Problem:</strong></p>\n\n<p>I've got 2 dataframes, <code>df1</code> and <code>df2</code>, each with 2 columns that represent a start time and an end time:</p>\n\n<pre><code>&gt;&gt;&gt; df1\n\n        datetime_start        datetime_end\n0  2016-09-11 06:00:00 2016-09-11 06:30:00\n1  2016-09-11 07:00:00 2016-09-11 07:30:00\n2  2016-09-11 07:30:00 2016-09-11 08:00:00\n3  2016-09-11 08:00:00 2016-09-11 08:30:00\n4  2016-09-11 08:30:00 2016-09-11 09:00:00\n5  2016-09-11 09:00:00 2016-09-11 09:30:00\n6  2016-09-11 09:30:00 2016-09-11 10:00:00\n7  2016-09-11 10:30:00 2016-09-11 11:00:00\n13 2016-09-11 14:00:00 2016-09-11 14:30:00\n14 2016-09-11 14:30:00 2016-09-11 15:00:00\n15 2016-09-11 15:00:00 2016-09-11 15:30:00\n16 2016-09-11 15:30:00 2016-09-11 16:00:00\n17 2016-09-11 16:00:00 2016-09-11 16:30:00\n18 2016-09-11 16:30:00 2016-09-11 17:00:00\n19 2016-09-11 17:00:00 2016-09-11 17:30:00\n\n&gt;&gt;&gt; df2\n\n        datetime_start        datetime_end catg\n4  2016-09-11 08:48:33 2016-09-11 09:41:53    a\n6  2016-09-11 09:54:25 2016-09-11 10:00:50    a\n8  2016-09-11 10:01:47 2016-09-11 10:04:55    b\n10 2016-09-11 10:08:00 2016-09-11 10:08:11    b\n12 2016-09-11 10:30:28 2016-09-11 10:30:28    b\n14 2016-09-11 10:38:18 2016-09-11 10:38:18    a\n18 2016-09-11 13:44:05 2016-09-11 13:44:05    a\n20 2016-09-11 13:46:52 2016-09-11 14:11:41    d\n23 2016-09-11 14:22:17 2016-09-11 14:33:40    b\n25 2016-09-11 15:00:12 2016-09-11 15:02:55    b\n27 2016-09-11 15:04:19 2016-09-11 15:06:36    b\n29 2016-09-11 15:08:43 2016-09-11 15:31:29    d\n31 2016-09-11 15:38:04 2016-09-11 16:09:24    a\n33 2016-09-11 16:18:40 2016-09-11 16:44:32    b\n35 2016-09-11 16:45:59 2016-09-11 16:59:01    b\n37 2016-09-11 17:08:31 2016-09-11 17:12:23    b\n39 2016-09-11 17:16:13 2016-09-11 17:16:33    c\n41 2016-09-11 17:17:23 2016-09-11 17:20:00    b\n45 2016-09-13 12:27:59 2016-09-13 12:34:21    a\n47 2016-09-13 12:38:39 2016-09-13 12:38:45    a\n</code></pre>\n\n<p>What I want is to find where the ranges in <code>df2</code> have overlap with the ranges in <code>df1</code>, how long that overlap is (in seconds), and what value of <code>df2.catg</code> that is. I want the length of that overlap inserted into a column in <code>df1</code> (that column will be named for the <code>catg</code> it represents).</p>\n\n<p><strong>Desired output</strong>:</p>\n\n<pre><code>&gt;&gt;&gt; df1\n        datetime_start        datetime_end       a       b       d     c\n0  2016-09-11 06:00:00 2016-09-11 06:30:00     0.0     0.0     0.0   0.0\n1  2016-09-11 07:00:00 2016-09-11 07:30:00     0.0     0.0     0.0   0.0\n2  2016-09-11 07:30:00 2016-09-11 08:00:00     0.0     0.0     0.0   0.0\n3  2016-09-11 08:00:00 2016-09-11 08:30:00     0.0     0.0     0.0   0.0\n4  2016-09-11 08:30:00 2016-09-11 09:00:00   687.0     0.0     0.0   0.0\n5  2016-09-11 09:00:00 2016-09-11 09:30:00  1800.0     0.0     0.0   0.0\n6  2016-09-11 09:30:00 2016-09-11 10:00:00  1048.0     0.0     0.0   0.0\n7  2016-09-11 10:30:00 2016-09-11 11:00:00     0.0     0.0     0.0   0.0\n13 2016-09-11 14:00:00 2016-09-11 14:30:00     0.0   463.0   701.0   0.0\n14 2016-09-11 14:30:00 2016-09-11 15:00:00     0.0   220.0     0.0   0.0\n15 2016-09-11 15:00:00 2016-09-11 15:30:00     0.0   300.0  1277.0   0.0\n16 2016-09-11 15:30:00 2016-09-11 16:00:00  1316.0     0.0    89.0   0.0\n17 2016-09-11 16:00:00 2016-09-11 16:30:00   564.0   680.0     0.0   0.0\n18 2016-09-11 16:30:00 2016-09-11 17:00:00     0.0  1654.0     0.0   0.0\n19 2016-09-11 17:00:00 2016-09-11 17:30:00     0.0   389.0     0.0  20.0\n</code></pre>\n\n<p><strong>The ridiculously slow way to do this:</strong></p>\n\n<p>Based on this <a href=\"https://stackoverflow.com/a/9044111/6671176\">beautiful answer</a>, I've achieved the goals I want using the following hard to follow code:</p>\n\n<pre><code>from collections import namedtuple\nRange = namedtuple('Range', ['start', 'end'])\n\ndef overlap(row1, row2):\n    r1 = Range(start=row1.datetime_start, end=row1.datetime_end)\n    r2 = Range(start=row2.datetime_start, end=row2.datetime_end)\n    latest_start = max(r1.start, r2.start)\n    earliest_end = min(r1.end, r2.end)\n    delta = (earliest_end - latest_start).total_seconds()\n    overlap = max(0, delta)\n    return overlap\n\nfor cat in df2.catg.unique().tolist():\n    df1[cat] = 0\n\nfor idx1, row1 in df1.iterrows():\n    for idx2, row2 in df2.iterrows():\n        if overlap(row1, row2) &gt; 0:\n            df1.loc[idx1, row2.catg] += overlap(row1, row2)\n</code></pre>\n\n<p>This works, but is soooo slow on larger dataframes that it's basically un-useable. If anyone has any ideas to speed this up, I'd love your input.</p>\n\n<p>Thanks in advance, and let me know if something is unclear!</p>\n\n<p><strong>dataframe setup:</strong></p>\n\n<pre><code>import pandas as pd\nfrom pandas import Timestamp\n\nd1 = {'datetime_start': {0: Timestamp('2016-09-11 06:00:00'), 1: Timestamp('2016-09-11 07:00:00'), 2: Timestamp('2016-09-11 07:30:00'), 3: Timestamp('2016-09-11 08:00:00'), 4: Timestamp('2016-09-11 08:30:00'), 5: Timestamp('2016-09-11 09:00:00'), 6: Timestamp('2016-09-11 09:30:00'), 7: Timestamp('2016-09-11 10:30:00'), 13: Timestamp('2016-09-11 14:00:00'), 14: Timestamp('2016-09-11 14:30:00'), 15: Timestamp('2016-09-11 15:00:00'), 16: Timestamp('2016-09-11 15:30:00'), 17: Timestamp('2016-09-11 16:00:00'), 18: Timestamp('2016-09-11 16:30:00'), 19: Timestamp('2016-09-11 17:00:00')}, 'datetime_end': {0: Timestamp('2016-09-11 06:30:00'), 1: Timestamp('2016-09-11 07:30:00'), 2: Timestamp('2016-09-11 08:00:00'), 3: Timestamp('2016-09-11 08:30:00'), 4: Timestamp('2016-09-11 09:00:00'), 5: Timestamp('2016-09-11 09:30:00'), 6: Timestamp('2016-09-11 10:00:00'), 7: Timestamp('2016-09-11 11:00:00'), 13: Timestamp('2016-09-11 14:30:00'), 14: Timestamp('2016-09-11 15:00:00'), 15: Timestamp('2016-09-11 15:30:00'), 16: Timestamp('2016-09-11 16:00:00'), 17: Timestamp('2016-09-11 16:30:00'), 18: Timestamp('2016-09-11 17:00:00'), 19: Timestamp('2016-09-11 17:30:00')}}\n\nd2 = {'datetime_start': {4: Timestamp('2016-09-11 08:48:33'), 6: Timestamp('2016-09-11 09:54:25'), 8: Timestamp('2016-09-11 10:01:47'), 10: Timestamp('2016-09-11 10:08:00'), 12: Timestamp('2016-09-11 10:30:28'), 14: Timestamp('2016-09-11 10:38:18'), 18: Timestamp('2016-09-11 13:44:05'), 20: Timestamp('2016-09-11 13:46:52'), 23: Timestamp('2016-09-11 14:22:17'), 25: Timestamp('2016-09-11 15:00:12'), 27: Timestamp('2016-09-11 15:04:19'), 29: Timestamp('2016-09-11 15:08:43'), 31: Timestamp('2016-09-11 15:38:04'), 33: Timestamp('2016-09-11 16:18:40'), 35: Timestamp('2016-09-11 16:45:59'), 37: Timestamp('2016-09-11 17:08:31'), 39: Timestamp('2016-09-11 17:16:13'), 41: Timestamp('2016-09-11 17:17:23'), 45: Timestamp('2016-09-13 12:27:59'), 47: Timestamp('2016-09-13 12:38:39')}, 'datetime_end': {4: Timestamp('2016-09-11 09:41:53'), 6: Timestamp('2016-09-11 10:00:50'), 8: Timestamp('2016-09-11 10:04:55'), 10: Timestamp('2016-09-11 10:08:11'), 12: Timestamp('2016-09-11 10:30:28'), 14: Timestamp('2016-09-11 10:38:18'), 18: Timestamp('2016-09-11 13:44:05'), 20: Timestamp('2016-09-11 14:11:41'), 23: Timestamp('2016-09-11 14:33:40'), 25: Timestamp('2016-09-11 15:02:55'), 27: Timestamp('2016-09-11 15:06:36'), 29: Timestamp('2016-09-11 15:31:29'), 31: Timestamp('2016-09-11 16:09:24'), 33: Timestamp('2016-09-11 16:44:32'), 35: Timestamp('2016-09-11 16:59:01'), 37: Timestamp('2016-09-11 17:12:23'), 39: Timestamp('2016-09-11 17:16:33'), 41: Timestamp('2016-09-11 17:20:00'), 45: Timestamp('2016-09-13 12:34:21'), 47: Timestamp('2016-09-13 12:38:45')}, 'catg': {4: 'a', 6: 'a', 8: 'b', 10: 'b', 12: 'b', 14: 'a', 18: 'a', 20: 'd', 23: 'b', 25: 'b', 27: 'b', 29: 'd', 31: 'a', 33: 'b', 35: 'b', 37: 'b', 39: 'c', 41: 'b', 45: 'a', 47: 'a'}}\n\ndf1 = pd.DataFrame(d1)\ndf2 = pd.DataFrame(d2)\n</code></pre>\n"}, {"tags": ["python", "docker", "swagger", "swagger-codegen"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1524692764, "post_id": 50031752, "comment_id": 87079696, "body": "Isn&#39;t the whole point about containers that they can be created and destroyed at will because applications are stateless? A container instance is not a VPS that would take a couple minutes to start, why are you reluctant to restart it?"}, {"owner": {"reputation": 5057, "user_id": 209288, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/db8f35b66aded26f2c021bbfdd053f04?s=128&d=identicon&r=PG", "display_name": "scipilot", "link": "https://stackoverflow.com/users/209288/scipilot"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1524693442, "post_id": 50031752, "comment_id": 87079927, "body": "I am debugging the root cause. Restarting the container just discards the problem and all evidence. Also I&#39;m just interested in finding the documentation for what is normally easy to find: the signal interface or management app for a server (like apachectl)."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1524693846, "post_id": 50031752, "comment_id": 87080040, "body": "I guess the answer is no. You can get a shell inside the container and <code>kill -HUP</code> the main process but for many Python webservers it will end the process and thus the container (Python webservers tend to commit seppuku and assume they will be restarted by a watchdog application). At scale some companies running Python turn the garbage collector off and just restart containers from time to time."}, {"owner": {"reputation": 5057, "user_id": 209288, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/db8f35b66aded26f2c021bbfdd053f04?s=128&d=identicon&r=PG", "display_name": "scipilot", "link": "https://stackoverflow.com/users/209288/scipilot"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1524697157, "post_id": 50031752, "comment_id": 87081020, "body": "I was hoping for a more &quot;apache graceful&quot; approach to avoid dropping current connections (if I used this approach in future for regular restarts). You want to copy that comment as an answer - I don&#39;t mind accepting &quot;no&quot;!"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1524778508, "post_id": 50031752, "comment_id": 87120811, "body": "In practice nobody cares to handle anything &quot;gracefully&quot; at the container level because the upstream load balancer is supposed to take care of it."}], "owner": {"reputation": 5057, "user_id": 209288, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/db8f35b66aded26f2c021bbfdd053f04?s=128&d=identicon&r=PG", "display_name": "scipilot", "link": "https://stackoverflow.com/users/209288/scipilot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 389, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1524692485, "creation_date": 1524692485, "question_id": 50031752, "link": "https://stackoverflow.com/questions/50031752/how-to-restart-a-python-swagger-server-in-docker-without-restarting-the-containe", "title": "How to restart a Python Swagger server in Docker without restarting the container", "body": "<p>I have a Python Swagger server running as the entrypoint in a Docker container. Every few days it seems to freeze up and stop serving API requests. Restarting the container \"solves\" it, but I'd prefer to \"hup\" it in some way (while I identify the root cause of course).</p>\n\n<p>The server is started in the final line of the Dockerfile thus:</p>\n\n<pre><code># Run the Swagger Flask REST server\nWORKDIR /app/project/python-flask-server-generated\nCMD python3 -m swagger_server\n</code></pre>\n\n<p>I know how to do this for ngnix for example: <code>docker exec my_nginx_1 nginx -s reload</code>.</p>\n\n<p>Is there a signal for the Python server generated by the Swagger editor?</p>\n"}, {"tags": ["python", "numpy", "random", "seed"], "comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1524692449, "post_id": 50031733, "comment_id": 87079590, "body": "Bonus: Any insight to the LogisticRegression cross-validations being different.  I&#39;m using <code>saga</code> solver.  Could that be why?"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1524693856, "post_id": 50031733, "comment_id": 87080045, "body": "It appears that numpy&#39;s <code>RandomState</code> class does not implement equality testing, so it gets the default behavior that is based on object identity alone.  Your unpickled object is certainly not the <i>same object</i> as the one originally pickled, so the comparison returns False even though every detail of the two objects is equal.  (My guess as to the actual problem: your computations are somehow, sometimes using the global (shared) random state rather than the provided one.)"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1524721107, "post_id": 50031733, "comment_id": 87087047, "body": "Please show the complete code of LR with cross-validation."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1524765307, "post_id": 50031733, "comment_id": 87114604, "body": "It was an error on my part where the cross-validation indicies were offset in terms of the Logistic Regression."}], "answers": [{"tags": [], "owner": {"reputation": 1775, "user_id": 279611, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2b6cc360424ff4fb8ef81fbbfcb9943c?s=128&d=identicon&r=PG", "display_name": "Alexey Tigarev", "link": "https://stackoverflow.com/users/279611/alexey-tigarev"}, "is_accepted": false, "score": 0, "last_activity_date": 1558887149, "creation_date": 1558887149, "answer_id": 56315243, "question_id": 50031733, "link": "https://stackoverflow.com/questions/50031733/why-are-serialized-numpy-random-state-objects-different-when-are-loaded/56315243#56315243", "title": "Why are serialized numpy random_state objects different when are loaded?", "body": "<p>The unpickled copy of initial random state in your example actually produces the same sequence of random numbers (tested on python 3.6, numpy 1.15.4).\nProbably the equality testing is not implemented for <code>RandomState</code> as @jasonharper pointed out. <code>==</code> returns <code>False</code>, but the states are identical in behavior.</p>\n\n<p>Following code fragment inserted after your code provided in question:</p>\n\n<pre><code>a = random_state.randint(0, 10, 5)\nb = random_state_copy.randint(0, 10, 5)\nprint(a)\nprint(b)\nprint(a==b)\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>[5 0 3 3 7]\n[5 0 3 3 7]\n[ True  True  True  True  True]\n</code></pre>\n\n<p>So, most likely, not the <code>RandomState</code> makes the run results different: look for causes of differences somewhere else.</p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1558887149, "creation_date": 1524692380, "question_id": 50031733, "link": "https://stackoverflow.com/questions/50031733/why-are-serialized-numpy-random-state-objects-different-when-are-loaded", "title": "Why are serialized numpy random_state objects different when are loaded?", "body": "<p>I'm trying to figure out why certain cross-validations using a defined set of indices, the same input data, and the same <code>random_state</code> in <code>sklearn</code> gives different results using the same <code>LogisticRegression</code> model hyperparameters.  My first thought was that the initial <code>random_state</code> may be different on subsequent runs.  Then I realized when I <code>pickle</code> the <code>random_state</code> it says the objects are different when I compare the 2 objects directly but the values in the <code>get_state</code> method are the same.  Why is this? </p>\n\n<pre><code>random_state = np.random.RandomState(0)\nprint(random_state)\n# &lt;mtrand.RandomState object at 0x12424e480&gt;\n\nwith open(\"./rs.pkl\", \"wb\") as f:\n    pickle.dump(random_state, f, protocol=pickle.HIGHEST_PROTOCOL)\nwith open(\"./rs.pkl\", \"rb\") as f:\n    random_state_copy = pickle.load(f)\n    print(random_state_copy)\n# &lt;mtrand.RandomState object at 0x126465240&gt;\nprint(random_state == random_state_copy)\n# False\nprint(str(random_state.get_state()) == str(random_state_copy.get_state()))\n# True\n</code></pre>\n\n<p>Versions:</p>\n\n<p>numpy= '1.13.3',</p>\n\n<p>Python='3.6.4 |Anaconda, Inc.| (default, Jan 16 2018, 12:04:33) \\n[GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]')</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1524692582, "post_id": 50031731, "comment_id": 87079643, "body": "You have to add dimension(s) to the smaller one. Also make sure the dtypes match."}, {"owner": {"reputation": 329, "user_id": 5773560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1dYLg.jpg?s=128&g=1", "display_name": "Robert Manson-Sawko", "link": "https://stackoverflow.com/users/5773560/robert-manson-sawko"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1524814089, "post_id": 50031731, "comment_id": 87131209, "body": "@hpaulj, the mismatch of dimensions is on purpose. Should I add it to the description? The motivation for this comes because output from genfromtxt on a collection of files gives a list of 0d or 1d arrays."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1524823706, "post_id": 50031731, "comment_id": 87136449, "body": "What sort of file produces a 0d array?"}, {"owner": {"reputation": 329, "user_id": 5773560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1dYLg.jpg?s=128&g=1", "display_name": "Robert Manson-Sawko", "link": "https://stackoverflow.com/users/5773560/robert-manson-sawko"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1549805146, "post_id": 50031731, "comment_id": 96026547, "body": "@hpaulj a file which only contains one entry in one column."}], "answers": [{"comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1524697747, "post_id": 50031805, "comment_id": 87081196, "body": "<code>concatenate([a.ravel() for a in [array1, array2]])</code> does the same but more than twice as fast."}, {"owner": {"reputation": 329, "user_id": 5773560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1dYLg.jpg?s=128&g=1", "display_name": "Robert Manson-Sawko", "link": "https://stackoverflow.com/users/5773560/robert-manson-sawko"}, "edited": false, "score": 0, "creation_date": 1549805233, "post_id": 50031805, "comment_id": 96026569, "body": "You are both right and in both cases it would result in cleaner code. I think I like <code>hstack</code> better. Is it ok to improve an answer that has already been voted on?"}], "tags": [], "owner": {"reputation": 329, "user_id": 5773560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1dYLg.jpg?s=128&g=1", "display_name": "Robert Manson-Sawko", "link": "https://stackoverflow.com/users/5773560/robert-manson-sawko"}, "is_accepted": true, "score": 3, "last_activity_date": 1524692749, "creation_date": 1524692749, "answer_id": 50031805, "question_id": 50031731, "link": "https://stackoverflow.com/questions/50031731/how-to-concatenate-a-mixed-list-of-1d-and-0d-numpy-arrays/50031805#50031805", "title": "How to concatenate a mixed list of 1d and 0d numpy arrays?", "body": "<p>Python provides a function <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.atleast_1d.html\" rel=\"nofollow noreferrer\"><code>atleast_1d</code></a> so to solve the problem </p>\n\n<pre><code>from numpy import array, concatenate, atleast_1d\narray1 = array([1.0, 2.0])\narray2 = array(3.0)\nconcatenate([atleast_1d(a) for a in [array1, array2]])\n</code></pre>\n\n<p>and in my original problem</p>\n\n<pre><code>concatenate([atleast_1d(a) for a in mixed_list])\n</code></pre>\n\n<p>would solve the concatenation issue.</p>\n"}, {"comments": [{"owner": {"reputation": 329, "user_id": 5773560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1dYLg.jpg?s=128&g=1", "display_name": "Robert Manson-Sawko", "link": "https://stackoverflow.com/users/5773560/robert-manson-sawko"}, "edited": false, "score": 0, "creation_date": 1524693530, "post_id": 50031814, "comment_id": 87079960, "body": "Hi William, that was the point of the example. The 0 dimensional array was generate by <code>genfromtxt</code>."}], "tags": [], "owner": {"reputation": 413, "user_id": 8313460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z5kkMsqri4k/AAAAAAAAAAI/AAAAAAAAHQM/5p594OQaToc/photo.jpg?sz=128", "display_name": "Willian Vieira", "link": "https://stackoverflow.com/users/8313460/willian-vieira"}, "is_accepted": false, "score": -1, "last_activity_date": 1524692796, "creation_date": 1524692796, "answer_id": 50031814, "question_id": 50031731, "link": "https://stackoverflow.com/questions/50031731/how-to-concatenate-a-mixed-list-of-1d-and-0d-numpy-arrays/50031814#50031814", "title": "How to concatenate a mixed list of 1d and 0d numpy arrays?", "body": "<p>you forgot <em>[ ]</em> when you declared second array</p>\n\n<pre><code>from numpy import array, concatenate\narray1 = array([1.0, 2.0])\narray2 = array([3.0])\nprint(concatenate([array1, array2]))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[1. 2. 3.]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 0, "last_activity_date": 1524693257, "last_edit_date": 1524693257, "creation_date": 1524692945, "answer_id": 50031839, "question_id": 50031731, "link": "https://stackoverflow.com/questions/50031731/how-to-concatenate-a-mixed-list-of-1d-and-0d-numpy-arrays/50031839#50031839", "title": "How to concatenate a mixed list of 1d and 0d numpy arrays?", "body": "<pre><code>a = np.array([1,2])\nb = np.array(3)\n</code></pre>\n\n<p>Add a dimension then stack</p>\n\n<pre><code>&gt;&gt;&gt; np.hstack([a, b[None,]])\narray([1, 2, 3])\n\n&gt;&gt;&gt; np.hstack([a, b.reshape(1)])\narray([1, 2, 3])\n\n&gt;&gt;&gt; np.concatenate((a, b.reshape(1)))\narray([1, 2, 3])\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 5773560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1dYLg.jpg?s=128&g=1", "display_name": "Robert Manson-Sawko", "link": "https://stackoverflow.com/users/5773560/robert-manson-sawko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 50031805, "answer_count": 3, "score": 1, "last_activity_date": 1549804951, "creation_date": 1524692373, "last_edit_date": 1549804951, "question_id": 50031731, "link": "https://stackoverflow.com/questions/50031731/how-to-concatenate-a-mixed-list-of-1d-and-0d-numpy-arrays", "title": "How to concatenate a mixed list of 1d and 0d numpy arrays?", "body": "<p>I am trying to concatenate a list of arrays which is a mix of zero and one dimensional arrays. They are a result of <code>genfromtxt</code> on some output files. The minimal example which breaks for me is as follows:</p>\n\n<pre><code>from numpy import array, concatenate\narray1 = array([1.0, 2.0])\narray2 = array(3.0)\nconcatenate([array1, array2])\n</code></pre>\n\n<p>This code produces an error:</p>\n\n<pre><code>ValueError: zero-dimensional arrays cannot be concatenated\n</code></pre>\n\n<p>Is there any way to concatenate in a single line a list of 1d and 0d? Thanks.</p>\n"}, {"tags": ["python", "django", "python-3.x", "sqlite"], "owner": {"reputation": 2656, "user_id": 199236, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/9I7VP.png?s=128&g=1", "display_name": "alfonso.kim", "link": "https://stackoverflow.com/users/199236/alfonso-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1538567994, "creation_date": 1524692320, "last_edit_date": 1538567994, "question_id": 50031719, "link": "https://stackoverflow.com/questions/50031719/django-orm-with-uuid-fields-using-sqlite3", "title": "Django ORM with UUID fields using sqlite3", "body": "<p>I have multiple models with the following structure:</p>\n\n<pre><code>class Element(models.Model):\n    api_id = models.UUIDField(null=False, blank=False, default=uuid.uuid4)\n    ....\n\nclass Category(models.Model):\n    api_id = models.UUIDField(null=False, blank=False, default=uuid.uuid4)\n    ....\n</code></pre>\n\n<p>...and so on.</p>\n\n<p>Then, I can fetch objects from the <code>Element</code> table:</p>\n\n<pre><code>element = Element.objects.first()\nelement.api_id\nUUID('8b278133-b8a2-4540-9dd0-129dd1394fcc')\nElement.objects.filter(api_id='8b278133-b8a2-4540-9dd0-129dd1394fcc').count()\n1\n</code></pre>\n\n<p>So far, so good. The error comes when I do the same on the <code>Category</code> table:</p>\n\n<pre><code>category = Category.objects.first()\ncategory.api_id\nUUID('f63b5052-fba1-4ad1-a8ec-673efc673f44')\nCategory.objects.filter(api_id='f63b5052-fba1-4ad1-a8ec-673efc673f44').count()\n0\n</code></pre>\n\n<p>The same occurs if I explicity convert the string to UUID:</p>\n\n<pre><code>Category.objects.filter(api_id=uuid.UUID('f63b5052-fba1-4ad1-a8ec-673efc673f44')).count()\n0\n</code></pre>\n\n<p>Both queries are converting the <code>api_id</code> to an integer:</p>\n\n<pre><code>str(Element.objects.filter(api_id='8b278133-b8a2-4540-9dd0-129dd1394fcc').query)\nSELECT ... FROM \"element\" WHERE \"element\".\"api_id\" = 8b278133b8a245409dd0129dd1394fcc\n\nstr(Category.objects.filter(api_id='f63b5052-fba1-4ad1-a8ec-673efc673f44').query)\nSELECT ... FROM \"category\" WHERE \"category\".\"api_id\" = f63b5052fba14ad1a8ec673efc673f44\n</code></pre>\n\n<p>Note that the <code>Element</code> query works as expected.</p>\n\n<p>And in the database, both fields are created as <code>char (32)</code>:</p>\n\n<pre><code>CREATE TABLE \"element\" (\"id\" integer NOT NULL PRIMARY KEY AUTOINCREMENT, \"api_id\" char(32) NOT NULL, ...)\nCREATE TABLE \"category\" (\"id\" integer NOT NULL PRIMARY KEY AUTOINCREMENT, \"api_id\" char(32) NOT NULL, ...)\n</code></pre>\n\n<p>So, if everything is equal for all the tables, why are the <code>Category</code> queries are not finding nothing by this <code>uuid</code> field?</p>\n\n<p>I'm using Python 3.5, Django 2.0, and SQLite 3.\nI tested with Postgres 9.5 and it works as expected. Only happens with SQLite3.</p>\n"}, {"tags": ["python", "tensorflow", "anomaly-detection"], "owner": {"reputation": 853, "user_id": 3104352, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c1625f12a258b53574a45a8258b228a?s=128&d=identicon&r=PG&f=1", "display_name": "user3104352", "link": "https://stackoverflow.com/users/3104352/user3104352"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 721, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1524692204, "creation_date": 1524692204, "question_id": 50031701, "link": "https://stackoverflow.com/questions/50031701/one-class-classifier-with-auto-encoder-in-tensorflow", "title": "one class classifier with auto-encoder in tensorflow", "body": "<p>I tried to predict the anomalies with deep learning. I labelled 1 for anomaly samples and 0 for non-anomaly samples. Here, I tried to build a model to obtain one-class auto-encoder defined in this <a href=\"https://www.quora.com/Do-you-have-any-implementation-of-one-class-classification-using-neural-network#FPkdx\" rel=\"nofollow noreferrer\">link</a>. First, I trained the auto-encoder for non-anomaly data and pick the maximum reconstruction error as a threshold. Then, I evaluated the test data based on this threshold. But unfortunately, all test samples are labelled as non-anomaly.</p>\n\n<pre><code>from sklearn.metrics import precision_recall_fscore_support as score\nimport pandas as pd\nfrom sklearn import preprocessing\nfrom sklearn.model_selection import train_test_split\nimport numpy as np, tensorflow as tf\nfrom sklearn import metrics\n\nTEST_SIZE = 0.2\n\n# DEEP_LEARNING_PARAMETERS\nLEARNING_RATE = 0.01\nSTEP_NUMBER = 5000\nUNITS_OF_HIDDEN_LAYER_1 = 256\nUNITS_OF_HIDDEN_LAYER_2 = 64\nDISPLAY_STEP = int(STEP_NUMBER/10)\nKEEPING_PROBABILITY = 0.8\nBATCH_PROBABILITY = 0.01\n\nANOMALY_LABEL = 1.0\nNON_ANOMALY_LABEL = 0.0\n\ndef build_graph(input_number):\n\n    # Placeholders\n    input = tf.placeholder(tf.float32, shape=[None, input_number])\n\n    # Layer 1\n    w1 = tf.Variable(tf.truncated_normal([input_number, UNITS_OF_HIDDEN_LAYER_1], stddev=0.05))\n    z1 = tf.matmul(input, w1)\n    l1 = tf.nn.tanh(z1)\n    l1_dropout = tf.nn.dropout(l1, KEEPING_PROBABILITY)\n\n    # Layer 2\n    w2 = tf.Variable(tf.truncated_normal([UNITS_OF_HIDDEN_LAYER_1, UNITS_OF_HIDDEN_LAYER_2], stddev=0.05))\n    z2 = tf.matmul(l1_dropout, w2)\n    l2 = tf.nn.tanh(z2)\n    l2_dropout = tf.nn.dropout(l2, KEEPING_PROBABILITY)\n\n    # Layer 3\n    w3 = tf.Variable(tf.truncated_normal([UNITS_OF_HIDDEN_LAYER_2, input_number], stddev=0.05))\n    b3 = tf.Variable(tf.zeros([input_number]))\n    l3 = tf.matmul(l2_dropout, w3) + b3\n    y_pred = tf.nn.tanh(l3)\n\n    loss = tf.square(y_pred - input)\n    cost = tf.reduce_mean(loss)\n    train_step = tf.train.AdamOptimizer(LEARNING_RATE).minimize(cost)\n\n    return input, train_step, y_pred, loss, cost, tf.train.Saver()\n\ndef run_model(x_train, y_train, x_test, y_test, input_number):\n    acc = []\n    train_target = np.asarray(y_train).reshape(-1,1)\n    test_target = np.asarray(y_test).reshape(-1,1)\n\n    tf.reset_default_graph()\n    input, train_step, y_pred, loss, cost, saver = build_graph(input_number)\n\n    price_list = []\n    test_predicted = []\n    threshold_loss = -1000000\n    TRAIN_NUMBER = x_train.shape[0]\n    if(TRAIN_NUMBER == 0):\n        print(\"TOTAL TRAIN IS ZERO, MODEL CANNOT BE GENERATED\")\n    else:\n        with tf.Session() as sess:\n            sess.run(tf.global_variables_initializer())\n            for i in range(STEP_NUMBER):\n                sample = np.random.randint(TRAIN_NUMBER, size=int(10))\n                batch_xs = x_train[sample][:]\n                batch_ys = train_target[sample][:]\n                train_step.run(session=sess, feed_dict={input: batch_xs})\n                if i % DISPLAY_STEP == 0:\n                    print(\"i: \", str(i) + \" cost: \" + str(sess.run([cost], feed_dict={input: x_train})[0]))\n                if i == STEP_NUMBER - 1:\n                    total_train = np.asarray(x_train).shape[0]\n                    for k in range(0, total_train):\n                        train_loss = sess.run([cost], feed_dict={input: np.asarray(x_train[k][:]).reshape(1,input_number)})[0]\n                        if(train_loss&gt;threshold_loss):\n                            threshold_loss = train_loss\n                    print(\"threshold_loss: \", str(np.round(train_loss, 8)))\n                    total_test = np.asarray(x_test).shape[0]\n                    for k in range(0, total_test):\n                        test_loss = sess.run([cost], feed_dict={input: np.asarray(x_test[k][:]).reshape(1,input_number)})[0]\n                        temp.append(100*(1-(test_loss/threshold_loss)))\n                        if(test_loss&gt;threshold_loss):\n                            test_predicted.append(1.0)\n                        else:\n                            test_predicted.append(0.0)\n\n    accuracy = np.round(sum(np.asarray(test_predicted).reshape(-1,1)==np.asarray(test_target).reshape(-1,1))/len(test_predicted), 4)\n    conf_matrix = metrics.confusion_matrix(np.asarray(test_target).reshape(-1,1), np.asarray(test_predicted).reshape(-1,1))\n    tn, fp, fn, tp = conf_matrix.ravel()\n\n    precision, recall, fscore, _ = score(np.asarray(test_target).reshape(-1,1), np.asarray(test_predicted).reshape(-1,1), average='binary')\n    print(\"TEST ACCURACY: \", accuracy)\n    print(\"PRECISION: \", precision)\n    print(\"RECALL: \", recall)\n    print(\"FSCORE: \", fscore)\n\n    print(\"TN: \", tn)\n    print(\"TP: \", tp)\n    print(\"FP: \", fp)\n    print(\"FN: \", fn)\n\n    return accuracy\n\ndata = pd.read_csv(\"test.txt\", sep=\",\")\nrow, column = data.shape\n\nlabel = data.values[:,-1]\ninput = data.values[:,0:column-1]\n\nx_train, x_test, y_train, y_test = train_test_split(input, label, train_size=0.7, shuffle=False)\n\nfiltered_input = x_train[np.where(y_train==0.0)]\ny_train = y_train[np.where(y_train==0.0)]\n\nscaler = preprocessing.Normalizer()\nx_train = scaler.transform(filtered_input)\nx_test = scaler.transform(x_test)\n\nrun_model(x_train, y_train, x_test, y_test)\n</code></pre>\n"}, {"tags": ["python", "asynchronous", "networking", "python-asyncio"], "answers": [{"tags": [], "owner": {"reputation": 936, "user_id": 3842894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pdZRP.jpg?s=128&g=1", "display_name": "MichaelsonBritt", "link": "https://stackoverflow.com/users/3842894/michaelsonbritt"}, "is_accepted": false, "score": 1, "last_activity_date": 1524731487, "last_edit_date": 1524731487, "creation_date": 1524730059, "answer_id": 50037901, "question_id": 50031699, "link": "https://stackoverflow.com/questions/50031699/getting-data-from-a-task-to-a-connection-with-asyncio/50037901#50037901", "title": "Getting data from a task to a connection with asyncio", "body": "<p>This is working in my tests by changing one line, using Python 3.4:</p>\n\n<p>Change the <code>run_until_complete()</code> call to receive a <code>(transport,protocol)</code> pair instead of a single value.</p>\n\n<p>Specifically, change <code>server = loop.run_until_complete(coro)</code> to <code>transport, protocol = loop.run_until_complete(coro)</code>, because the call executes the coroutine and returns its value which is a pair of items.  The first item is the server object, and the second entry is a protocol object which is an instance of ChatClient.</p>\n\n<p>Run the server then the client in different command windows.\nClient code:</p>\n\n<pre><code>import asyncio, json #, zen_utils\nfrom struct import *\n\nclass ChatClient(asyncio.Protocol):\n    def connection_made(self, transport):\n        self.transport = transport\n        self.address = transport.get_extra_info('peername')\n        self.data = b''\n        print('Accepted connection from {}'.format(self.address))\n\n    def data_received(self, data):\n        pass\n\n    def compile_server_data(self, data):\n        pass\n\n    def send_message(self, message):\n        message = message.encode('ascii')\n        self.transport.write(message)\n\n    def parse_message(self, raw_message):\n        pass\n\n    def print_server_status(self):\n        pass\n\n    def get_inital_data(self):\n        pass\n\n    def connection_lost(self, exc):\n        if exc:\n            print('Client {} error: {}'.format(self.address, exc))\n        elif self.data:\n            print('Client {} sent {} but then closed'\n                  .format(self.address, self.data))\n        else:\n            print('Client {} closed socket'.format(self.address))\n\n@asyncio.coroutine\ndef handle_user_input(loop, protocol):\n    \"\"\"reads from stdin in separate thread\n\n    if user inputs 'quit' stops the event loop\n    otherwise just echos user input\n    \"\"\"\n    while True:\n        message = yield from loop.run_in_executor(None, input, \"&gt; \")\n        if message == \"quit\":\n            loop.stop()\n            return\n        print(message)\n        protocol.send_message(message)\n\nif __name__ == '__main__':\n    address = \"127.0.0.1\"\n    port = 82\n\n    loop = asyncio.get_event_loop()\n    coro = loop.create_connection(ChatClient, address, port) #*address\n    transport, protocol = loop.run_until_complete(coro)\n\n    # Start a task which reads from standard input\n    asyncio.async(handle_user_input(loop,protocol))\n\n    print('Listening at {}'.format(address))\n    try:\n        loop.run_forever()\n    finally:\n        transport.close()\n        loop.close()\n</code></pre>\n\n<p>Server code, credit goes to <a href=\"http://www.bogotobogo.com/python/python_network_programming_server_client.php\" rel=\"nofollow noreferrer\">this site</a>:</p>\n\n<pre><code>import socket\n\nhost = ''        # Symbolic name meaning all available interfaces\nport = 82     # Arbitrary non-privileged port\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.bind((host, port))\ns.listen(1)\nconn, addr = s.accept()\nprint('Connected by', addr)\nwhile True:\n    data = conn.recv(1024)\n    if not data: break\n\n    print( 'Received ', repr(data) )\n    if repr(data)==\"stop\": break\n\n    conn.sendall(data)\nconn.close()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6771424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5aae70f4c3ebf99aafdfa96a2e38d8?s=128&d=identicon&r=PG&f=1", "display_name": "Jackson Michaels", "link": "https://stackoverflow.com/users/6771424/jackson-michaels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524731487, "creation_date": 1524692183, "question_id": 50031699, "link": "https://stackoverflow.com/questions/50031699/getting-data-from-a-task-to-a-connection-with-asyncio", "title": "Getting data from a task to a connection with asyncio", "body": "<p>So this should be fairly simple, i have a client that connects to a server, and it can receive messages from the server just fine. However i need to be able to send messages to the server. I am using asyncio to handle these asynchronously but i have a problem with that. How do i get the user input to my client so it can use its transport to send the data up to the server. Heres the code.</p>\n\n<pre><code>import asyncio, zen_utils, json\nfrom struct import *\n\nclass ChatClient(asyncio.Protocol):\n    def connection_made(self, transport):\n        self.transport = transport\n        self.address = transport.get_extra_info('peername')\n        self.data = b''\n        print('Accepted connection from {}'.format(self.address))\n\n        self.username = b'jacksonm'\n        json_name = b'{\"USERNAME\": \"'+self.username+b'\"}'\n        length = len(json_name)\n        code_len = pack(b'!I', length)\n        message = code_len + json_name\n        self.json_loaded = False\n        self.next_length = -1\n        self.transport.write(message)\n\n    def data_received(self, data):\n        self.data += data\n\n        if (self.json_loaded == False):\n            self.compile_server_data(data)\n        elif(self.json_loaded):\n            if (len(self.data) &gt; 4 and self.next_length == -1):\n                self.next_length = self.data[:4]\n                self.next_length = unpack(b'!I', self.next_length)[0]\n                print(\"LENGTH: \", self.next_length)\n\n            elif (len(self.data) &gt;= self.next_length):\n                self.data = self.data[4:]\n                print(\"MESSAGE: \", self.data)\n                self.next_length = -1\n\n    def compile_server_data(self, data):\n        if (self.data.find(b'}') != -1):\n            start_index = self.data.find(b'{')\n            end_index = self.data.find(b'}')\n\n            self.json_data = self.data[start_index:end_index + 1]\n            self.data = self.data[end_index + 1:]\n\n            self.json_data = self.json_data.decode('ascii')\n            self.json_data = json.loads(self.json_data)\n            self.json_loaded = True\n\n            self.print_server_status()\n\n    def send_message(self, message):\n        message = message.encode('ascii')\n        length = len(message)\n        code_len = pack(b'!I', length)\n        message = code_len + message\n\n    def parse_message(self, raw_message):\n        message = {}\n        message['SRC'] = self.username\n        message['DEST'] = b'ALL'\n        message['TIMESTAMP'] = int(time.time())\n        message['CONTENT'] = b'test_message'\n\n        json_message = json.loads(message)\n        print (json_message)\n\n    def print_server_status(self):\n        print (\"USERS:\")\n        for user in self.json_data[\"USER_LIST\"]:\n            print(user)\n        print()\n        print(\"MESSAGES:\")\n        for message in self.json_data[\"MESSAGES\"][-10:]:\n            print (\"From: \", message[0], \"     \", \"To: \", message[1])\n            print (\"Message: \", message[3])\n            print()\n\n    def get_inital_data(self):\n        pass\n\n    def connection_lost(self, exc):\n        if exc:\n            print('Client {} error: {}'.format(self.address, exc))\n        elif self.data:\n            print('Client {} sent {} but then closed'\n                  .format(self.address, self.data))\n        else:\n            print('Client {} closed socket'.format(self.address))\n\n@asyncio.coroutine\ndef handle_user_input(loop):\n    \"\"\"reads from stdin in separate thread\n\n    if user inputs 'quit' stops the event loop\n    otherwise just echos user input\n    \"\"\"\n    while True:\n        message = yield from loop.run_in_executor(None, input, \"&gt; \")\n        if message == \"quit\":\n            loop.stop()\n            return\n        print(message)\n\nif __name__ == '__main__':\n    address = zen_utils.parse_command_line('asyncio server using callbacks')\n    loop = asyncio.get_event_loop()\n    coro = loop.create_connection(ChatClient, *address)\n    server = loop.run_until_complete(coro)\n\n    # Start a task which reads from standard input\n    asyncio.async(handle_user_input(loop))\n\n    print('Listening at {}'.format(address))\n    try:\n        loop.run_forever()\n    finally:\n        server.close()\n        loop.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "memory", "python-multithreading"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1524695462, "post_id": 50031691, "comment_id": 87080494, "body": "There are two levels of memory allocation. Python frees objects when their reference count goes to zero. Unless you have complicated circular references that can&#39;t be resolved, python frees objects when the function implementing your thread returns. But that doesn&#39;t mean it goes back to the operating system. If another process needs memory, the OS may swap this process-allocated but unused memory to disk. If your program never touches the memory again, it will stay on disk."}, {"owner": {"reputation": 475, "user_id": 1516982, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1403257629/picture?type=large", "display_name": "Rikaelus", "link": "https://stackoverflow.com/users/1516982/rikaelus"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1524697040, "post_id": 50031691, "comment_id": 87080982, "body": "@tdelaney I <i>think</i> it&#39;s returning it to the OS that I&#39;m ultimately in need of. It seems very peculiar that there&#39;s no way for a process to give up memory that it no longer needs."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1524697437, "post_id": 50031691, "comment_id": 87081098, "body": "That&#39;s OS and libc implementation dependent. Linux has a <code>malloc_trim</code> C function for instance, that tries some cleanup, but I suspect that there will be some python objects sprinkled around the heap and not much will free. I think forking is the usual way to handle this. Maybe you need to post those issues here."}, {"owner": {"reputation": 475, "user_id": 1516982, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1403257629/picture?type=large", "display_name": "Rikaelus", "link": "https://stackoverflow.com/users/1516982/rikaelus"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1524700275, "post_id": 50031691, "comment_id": 87081792, "body": "@tdelaney I might post another question for that, since it&#39;d kind of be off-topic to this one. Short story is that these jobs run within a large Flask application with a lot of functionality that&#39;s dependent on the Flask current_app object, and initial attempts to pass that object into forked processes hasn&#39;t been kind."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1524700420, "post_id": 50031691, "comment_id": 87081830, "body": "Good plan! And, ouch, that seems like an &quot;interesting&quot; problem."}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 1516982, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1403257629/picture?type=large", "display_name": "Rikaelus", "link": "https://stackoverflow.com/users/1516982/rikaelus"}, "edited": false, "score": 0, "creation_date": 1524697136, "post_id": 50032068, "comment_id": 87081014, "body": "It&#39;s not; that&#39;s the annoying thing. The threads get access to a global data structure but (at least in my current jobs) aren&#39;t adding anything to it that would outlive the thread. I&#39;ve been able to mitigate the problem a little bit since my OP by calling gc.collect() regularly, but I think that&#39;s only helping prevent memory fragmentation and the process claiming more than it actually needs. The solve would be to release memory back to the OS, but I don&#39;t know if that&#39;s possible."}, {"owner": {"reputation": 21, "user_id": 8402173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3ec087543a9c50ff0d8652072d8e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/8402173/chris"}, "reply_to_user": {"reputation": 475, "user_id": 1516982, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1403257629/picture?type=large", "display_name": "Rikaelus", "link": "https://stackoverflow.com/users/1516982/rikaelus"}, "edited": false, "score": 0, "creation_date": 1524732888, "post_id": 50032068, "comment_id": 87093634, "body": "I think as Ramazan Polat&#39;s short example, your problem isn&#39;t due to the use of threads per se; the most likely explanation is that objects&#39; reference counts and not dropping to zero and so the objects are not garbage collected. Can you provide a minimal example along the lines of your app that has the same behaviour?"}, {"owner": {"reputation": 475, "user_id": 1516982, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1403257629/picture?type=large", "display_name": "Rikaelus", "link": "https://stackoverflow.com/users/1516982/rikaelus"}, "edited": false, "score": 0, "creation_date": 1524782493, "post_id": 50032068, "comment_id": 87122106, "body": "You&#39;re probably right, but I can&#39;t figure out where the problem lies. I&#39;m profiling the memory now and I&#39;m having low level functions returning, for example, adding 100MB but I&#39;m only able to free half that when I delete the variable i store the response in. There&#39;s definitely other things at work here, with memory not releasing when removed from scope. The thread was just the upper-most scope I thought would dictate a release once ended."}], "tags": [], "owner": {"reputation": 21, "user_id": 8402173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3ec087543a9c50ff0d8652072d8e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/8402173/chris"}, "is_accepted": false, "score": 2, "last_activity_date": 1524694376, "creation_date": 1524694376, "answer_id": 50032068, "question_id": 50031691, "link": "https://stackoverflow.com/questions/50031691/releasing-memory-after-threads-end/50032068#50032068", "title": "Releasing Memory After Threads End", "body": "<p>Without a concrete example of what your API and worker processes/threads are doing its hard to provide a specific answer.</p>\n\n<p>Python is a reference counted language: when an object is not referenced by any other it is free to be garbage collected. One can force the garbage collector to run (see <a href=\"https://docs.python.org/3/library/gc.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/gc.html</a>), but almost always its best to just let it do its thing.</p>\n\n<p>When your worker threads exit any objects created within the thread are likely to be garbage collected; and exception to this would be objects placed in some global data structure (but your use-case doesn't sound like that it something you would be doing).</p>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 1516982, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1403257629/picture?type=large", "display_name": "Rikaelus", "link": "https://stackoverflow.com/users/1516982/rikaelus"}, "edited": false, "score": 0, "creation_date": 1524703527, "post_id": 50032868, "comment_id": 87082583, "body": "I know the threads are being destroyed. I have debug output that periodically displays the thread count per process. The problem is that the process isn&#39;t returning memory to the OS that&#39;s claimed strictly within a thread."}], "tags": [], "owner": {"reputation": 4698, "user_id": 234775, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/37927ea4b8d74efc8bfbd44d76d07267?s=128&d=identicon&r=PG", "display_name": "Ramazan Polat", "link": "https://stackoverflow.com/users/234775/ramazan-polat"}, "is_accepted": false, "score": 1, "last_activity_date": 1524711268, "last_edit_date": 1524711268, "creation_date": 1524700430, "answer_id": 50032868, "question_id": 50031691, "link": "https://stackoverflow.com/questions/50031691/releasing-memory-after-threads-end/50032868#50032868", "title": "Releasing Memory After Threads End", "body": "<p>Just to prove that threads get destroyed after their job finished, you can run this code:</p>\n\n<pre><code>def job(o: dict):\n    count = 1\n    r = random.randrange(10, 20)\n    while count &lt; r:\n        print(f\"{o['name']}={count}/{r}\")\n        count += 1\n        time.sleep(1)\n\n    print(f\"{o['name']} finished.\")\n\n\ndef run_thread(o: dict):\n    threading.Thread(target=job, args=(o,)).start()\n\n\nif __name__ == '__main__':\n    obj1 = {\"name\": \"A\"}\n    run_thread(obj1)\n\n    obj2 = {\"name\": \"B\"}\n    run_thread(obj2)\n\n    while True:\n        time.sleep(1)\n        print(f\"THREADS: {len(threading.enumerate())}\")\n</code></pre>\n\n<p>The output will be something like this:</p>\n\n<pre><code>A=1/14\nB=1/10\nTHREADS: 3\nB=2/10\nA=2/14    \nTHREADS: 3\n...\nB finished.\nA=10/14\nA=11/14\nTHREADS: 2\nA=12/14\nTHREADS: 2\nA=13/14\nTHREADS: 2\nA finished.\nTHREADS: 1\nTHREADS: 1\nTHREADS: 1\n</code></pre>\n\n<p>As you can see, whenever a thread ends, total thread count decreases.</p>\n\n<p>UPDATE:</p>\n\n<p>Ok. I hope this script will satisfy you.</p>\n\n<pre><code>from typing import List\nimport random\nimport threading\nimport time\nimport os\nimport psutil\n\n\ndef get_mem_usage():\n    return PROCESS.memory_info().rss // 1024\n\n\ndef show_mem_usage():\n    global MAX_MEMORY\n    while True:\n        mem = get_mem_usage()\n        print(f\"Currently used memory={mem} KB\")\n        MAX_MEMORY = max(mem, MAX_MEMORY)\n        time.sleep(5)\n\n\ndef job(name: str):\n    print(f\"{name} started.\")\n    job_memory: List[int] = []\n    total_bit_length = 0\n    while command['stop_thread'] is False:\n        num = random.randrange(100000, 999999)\n        job_memory.append(num)\n        total_bit_length += int.bit_length(num)\n        time.sleep(0.0000001)\n        if len(job_memory) % 100000 == 0:\n            print(f\"{name} Memory={total_bit_length//1024} KB\")\n\n    print(f\"{name} finished.\")\n\n\ndef start_thread(name: str):\n    threading.Thread(target=job, args=(name,), daemon=True).start()\n\n\nif __name__ == '__main__':\n    command = {'stop_thread': False}\n\n    STOP_THREAD = False\n    PROCESS = psutil.Process(os.getpid())\n\n    mem_before_threads = get_mem_usage()\n\n    MAX_MEMORY = 0\n\n    print(f\"Starting memory={mem_before_threads} KB\")\n\n    threading.Thread(target=show_mem_usage, daemon=True).start()\n\n    input(\"Press enter to START threads...\\n\")\n\n    for i in range(20):\n        start_thread(\"Job\" + str(i + 1))\n\n    input(\"Press enter to STOP threads...\\n\")\n    print(\"Stopping threads...\")\n\n    command['stop_thread'] = True\n\n    time.sleep(2)  # give some time to stop threads\n\n    print(\"Threads stopped.\")\n\n    mem_after_threads = get_mem_usage()\n\n    print(f\"Memory before threads={mem_before_threads} KB\")\n    print(f\"Max Memory while threads running={MAX_MEMORY} KB\")\n    print(f\"Memory after threads stopped={mem_after_threads} KB\")\n\n    input(\"Press enter to exit.\")\n</code></pre>\n\n<p>And this is the output:</p>\n\n<pre><code>Starting memory=12980 KB\nCurrently used memory=13020 KB\nPress enter to START threads...\n\nJob1 started.\nJob2 started.\nJob3 started.\nJob4 started.\nJob5 started.\nJob6 started.\nJob7 started.\nJob8 started.\nJob9 started.\nJob10 started.\nJob11 started.\nJob12 started.\nJob13 started.\nJob14 started.\nJob15 started.\nJob16 started.\nJob17 started.\nJob18 started.\nJob19 started.\nJob20 started.\n\nPress enter to STOP threads...\nCurrently used memory=16740 KB\nCurrently used memory=19764 KB\nCurrently used memory=22516 KB\nCurrently used memory=25420 KB\nCurrently used memory=28340 KB\n\nStopping threads...\nJob12 finished.\nJob20 finished.\nJob11 finished.\nJob7 finished.\nJob18 finished.\nJob2 finished.\nJob4 finished.\nJob19 finished.\nJob16 finished.\nJob10 finished.\nJob1 finished.\nJob9 finished.\nJob6 finished.\nJob13 finished.\nJob15 finished.\nJob17 finished.\nJob3 finished.\nJob5 finished.\nJob8 finished.\nJob14 finished.\n\nThreads stopped.\n\nMemory before threads=12980 KB\nMax Memory while threads running=28340 KB\nMemory after threads stopped=13384 KB\nPress enter to exit.\nCurrently used memory=13388 KB\n</code></pre>\n\n<p>I really don't know why there is a 408 KB difference buy it may be overhead for using 15 MB memory.</p>\n"}], "owner": {"reputation": 475, "user_id": 1516982, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1403257629/picture?type=large", "display_name": "Rikaelus", "link": "https://stackoverflow.com/users/1516982/rikaelus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6624, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1524711268, "creation_date": 1524692155, "last_edit_date": 1524692779, "question_id": 50031691, "link": "https://stackoverflow.com/questions/50031691/releasing-memory-after-threads-end", "title": "Releasing Memory After Threads End", "body": "<p>I'm working on an application that is primarily an API, but also has a multithreaded background job processing system, used to perform scheduled jobs as well as ad hoc jobs that take too long for an instant API response.</p>\n\n<p>This will be forked 10 times through gunicorn. Any single forked process is capable of picking up a job to run, so job processing is balanced between the processes alongside the servicing of API requests.</p>\n\n<p>My challenge is with how each process will continue to claim the peak amount of memory it ever needed for job processing. Some jobs require 1.5GB-2GB worth of memory.</p>\n\n<p>Given enough time, eventually all 10 processes will have had to work those kinds of jobs, and each will be clinging to upwards of 2GB of memory. Even if the average memory use of the process rarely exceeds 100MB.</p>\n\n<p>These intensive jobs are only run through dedicated threads within the process.</p>\n\n<p>Is there ANY mechanism to compel Python to release the memory claimed specifically for a thread at the thread's closure? Or any general mechanism to force a Python process to reset memory to only what's actively needed at that moment?</p>\n\n<p>Side note: I'm also exploring forking instead of threading but thus far that's introducing other problems I'm not sure I can work around.</p>\n"}, {"tags": ["java", "android", "python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 1379, "user_id": 2565026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1aa211ed187202f26e1d1f4f4d2ca?s=128&d=identicon&r=PG", "display_name": "Carlos487", "link": "https://stackoverflow.com/users/2565026/carlos487"}, "edited": false, "score": 0, "creation_date": 1524694346, "post_id": 50031690, "comment_id": 87080210, "body": "I think you have to implement a POJO class in Java that matches the JSON object"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 8701632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2d2dbdbb25e41aa8523f2cab1c18c2?s=128&d=identicon&r=PG&f=1", "display_name": "magnum_skrattar", "link": "https://stackoverflow.com/users/8701632/magnum-skrattar"}, "edited": false, "score": 0, "creation_date": 1524735057, "post_id": 50031822, "comment_id": 87095019, "body": "I checked it before posting the question. It is a valid JSON."}], "tags": [], "owner": {"reputation": 5, "user_id": 9647871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3451858b453c47c7429223e9b0d5710?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel M.", "link": "https://stackoverflow.com/users/9647871/samuel-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1524693225, "last_edit_date": 1524693225, "creation_date": 1524692833, "answer_id": 50031822, "question_id": 50031690, "link": "https://stackoverflow.com/questions/50031690/django-jsonresponse-parsing-error-in-android/50031822#50031822", "title": "Django JsonResponse parsing error in Android", "body": "<p>Im not sure, but doesn't JSON arrays start like this?:</p>\n\n<p><code>[\n   {\n    }\n]</code></p>\n\n<p>Also the \"0\" seems to be not required. It will be automatically ordered</p>\n\n<p>EDIT: you can also check online if your json is valid. Just google Json formatter.</p>\n"}], "owner": {"reputation": 75, "user_id": 8701632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2d2dbdbb25e41aa8523f2cab1c18c2?s=128&d=identicon&r=PG&f=1", "display_name": "magnum_skrattar", "link": "https://stackoverflow.com/users/8701632/magnum-skrattar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1524693225, "creation_date": 1524692136, "question_id": 50031690, "link": "https://stackoverflow.com/questions/50031690/django-jsonresponse-parsing-error-in-android", "title": "Django JsonResponse parsing error in Android", "body": "<p>This is the JSON response I am getting from the server :  </p>\n\n<pre><code>{\n   \"0\": {\n   \"pk\": 41,\n   \"fields\": {\n       \"heading\": \"Empty Lecture Slot\",\n       \"notification\": \"There is a free lecture available right now for TE B on 2018-05-02 8:00-9:00\",\n       \"date\": \"2018-04-25\",\n       \"priority\": 1,\n           \"has_read\": false,\n           \"action\": \"/dashboard/set_substitute/91959\"\n       },\n       \"model\": \"Dashboard.specificnotification\"\n   }\n}\n</code></pre>\n\n<p>Here is the Java code used for parsing this JSON object : </p>\n\n<pre><code>JSONObject jsonObject = new JSONObject(response);\n</code></pre>\n\n<p>This is the error I am getting in the catch block : </p>\n\n<pre><code>org.json.JSONException: No value for {\"0\": {\"pk\": 41, \"fields\": {\"heading\": \"Empty Lecture Slot\", \"notification\": \"There is a free lecture available right now for TE B on 2018-05-02 8:00-9:00\", \"date\": \"2018-04-25\", \"priority\": 1, \"has_read\": false, \"action\": \"/dashboard/set_substitute/91959\"}, \"model\": \"Dashboard.specificnotification\"}}\n</code></pre>\n\n<p>How do I parse this object in Android.</p>\n"}, {"tags": ["python", "csv", "scripting", "reader"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524692403, "post_id": 50031689, "comment_id": 87079570, "body": "You\u2019re mixing up three different ways of parsing the file. The whole point of a <code>csv.reader</code> is that you can just do <code>for row in dataArray:</code> and the row is <i>already split into a list of values</i> without needing to call <code>split</code>. (But you have to do <code>for row in dataArray:</code>, not <code>for row in inputfile:</code>, for this to work.)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524692505, "post_id": 50031689, "comment_id": 87079612, "body": "Alternatively, if you want to split the lines manually, get rid of the <code>csv.reader</code>, and then <code>for line in inputfile:</code> makes sense\u2014but then you have to call <code>split</code> on the <code>line</code>, not on the whole file (or a reader wrapped around it)."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9560994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ca6o.png?s=128&g=1", "display_name": "Philip", "link": "https://stackoverflow.com/users/9560994/philip"}, "edited": false, "score": 0, "creation_date": 1524692604, "post_id": 50031737, "comment_id": 87079649, "body": "Thank you! Although this does print all the variables in the file, how would I just take the first column of numbers?"}, {"owner": {"reputation": 61, "user_id": 9560994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ca6o.png?s=128&g=1", "display_name": "Philip", "link": "https://stackoverflow.com/users/9560994/philip"}, "edited": false, "score": 0, "creation_date": 1524693208, "post_id": 50031737, "comment_id": 87079856, "body": "You&#39;re the best, thanks for all the help! It works now."}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": true, "score": 2, "last_activity_date": 1524692636, "last_edit_date": 1524692636, "creation_date": 1524692398, "answer_id": 50031737, "question_id": 50031689, "link": "https://stackoverflow.com/questions/50031689/python-open-file-cvs-reader-has-no-attribute/50031737#50031737", "title": "Python open file cvs reader has no attribute", "body": "<p>You need to iterate dataArray as:</p>\n\n<pre><code>for row in dataArray:\n    print(row[0])  # already split by tab by csv.reader(inputfile, delimiter='\\t')\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9560994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ca6o.png?s=128&g=1", "display_name": "Philip", "link": "https://stackoverflow.com/users/9560994/philip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 50031737, "answer_count": 1, "score": 0, "last_activity_date": 1524692636, "creation_date": 1524692135, "question_id": 50031689, "link": "https://stackoverflow.com/questions/50031689/python-open-file-cvs-reader-has-no-attribute", "title": "Python open file cvs reader has no attribute", "body": "<p>This is supposed to open a tab separated file and print the first row, and add them up. The column is just numbers. I have an error and also not sure how to go about adding them up afterwards.</p>\n\n<pre><code>with open(filePath + fileName, 'rt')  as inputfile:\n    next(inputfile)\n    dataArray = csv.reader(inputfile, delimiter='\\t')\n    for row in inputfile:\n        print dataArray.split('\\t',1)\n</code></pre>\n\n<p>Heres the error:</p>\n\n<pre><code>  File \"./Medicalsys\", line 38, in &lt;module&gt;\n    print dataArray.split('\\t',1)\nAttributeError: '_csv.reader' object has no attribute 'split'\n</code></pre>\n"}, {"tags": ["python", "if-statement", "range"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524692943, "post_id": 50031654, "comment_id": 87079760, "body": "Is your problem (a) that you don&#39;t know what semiprimes are, (b) that you don&#39;t know an algorithm to test for semiprimes, or (c) that you do, but you&#39;re stuck on some particular step in implementing it? If it&#39;s (c), show us the code you <i>do</i> know how to write, and point out the gap (like <code>count += 1 # I know I need to do count += n if i**n divides num but I don&#39;t know how to get n</code>)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1524696037, "post_id": 50031654, "comment_id": 87080650, "body": "Write a function that just checks whether a number is prime. Write another function that gets the two factors of a number, and calls the <code>isPrime()</code> function on both of them. If they&#39;re both true, the number is semiprime."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524697501, "post_id": 50031654, "comment_id": 87081119, "body": "@Barmar What are \u201cthe two factors\u201d of 60? Or 5?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524697617, "post_id": 50031654, "comment_id": 87081161, "body": "@abarnert If the number is not prime, you should be able to find a factor. Divide the number by that factor to get the other factor. Then check whether both of these are prime."}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524861811, "post_id": 50031654, "comment_id": 87156528, "body": "@Barmar (b) I Don&#39;t know an algorithm to test for semi primes. Also a semi prime number is a number made up of two primes so how do i code it to check for that"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524862567, "post_id": 50031654, "comment_id": 87156861, "body": "I just told you the algorithm to test for semi primes. Find one divisor of the number. Divide the number by that to get a second divisor. Test whether both divisors are prime. That&#39;s all there is to it."}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1524863014, "post_id": 50031654, "comment_id": 87157037, "body": "oh ok sorry thanks didnt see that"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525207670, "post_id": 50070275, "comment_id": 87265295, "body": "yep i have a prime function"}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525814625, "post_id": 50070275, "comment_id": 87502526, "body": "so my code wont report to me if the imputed number is semi prime."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525814911, "post_id": 50070275, "comment_id": 87502634, "body": "<code>if is_semiprime(number): print(number, &quot; is semiprime&quot;)</code>"}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525898568, "post_id": 50070275, "comment_id": 87541549, "body": "my code above was changed though that wont work. well idk were to put it in my code lol"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525898711, "post_id": 50070275, "comment_id": 87541619, "body": "You need to learn to separate functions that perform input and output from functions that compute results."}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525898725, "post_id": 50070275, "comment_id": 87541627, "body": "oh well i just dont get why it passed P and adds 2 sometimes not all the time"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525899202, "post_id": 50070275, "comment_id": 87541855, "body": "What is <code>P</code>, and why are you testing it in your <code>elif</code> statement?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525899313, "post_id": 50070275, "comment_id": 87541913, "body": "<code>is_prime()</code> needs to return <code>True</code> or <code>False</code> to indicate whether <code>num</code> is prime or not. It shouldn&#39;t print anything."}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525899599, "post_id": 50070275, "comment_id": 87542038, "body": "im testing it in elif statement because when is_prime(d1), is_prime(d2) go through to the els statment in is_prime it is suposed to add up to 4 which tells me that the inputed number is semiprime."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525899826, "post_id": 50070275, "comment_id": 87542134, "body": "I don&#39;t understand what you&#39;re doing at all. Stop using global variables, use parameters and return values. <code>is_semiprime()</code> calls <code>is_prime()</code> twice, they&#39;ll each set <code>P</code> differently. You only initialize <code>P</code> once, at the beginning of the script, so each time you call <code>is_prime()</code> it increments it from where it left off before."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525899860, "post_id": 50070275, "comment_id": 87542150, "body": "But your version of <code>is_semiprime()</code> doesn&#39;t even use the result of <code>is_prime()</code>. It needs to test if it&#39;s true of both <code>d1</code> and <code>d2</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525899935, "post_id": 50070275, "comment_id": 87542186, "body": "What does adding up to 4 have to do with whether a number is semiprime? I think you&#39;re very confused about what &quot;semiprime&quot; means."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525900118, "post_id": 50070275, "comment_id": 87542260, "body": "You need to write a self-contained function called <code>is_prime(num)</code> that just returns <code>True</code> or <code>False</code>. The function you&#39;ve written doesn&#39;t work like that. Once you&#39;ve done that, my <code>is_semiprime()</code> function will work. If you&#39;re having trouble with that, it&#39;s a separate question."}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525901206, "post_id": 50070275, "comment_id": 87542703, "body": "A code that will factor any number inputted and report to the user if the number was, semi prime.  this i what i have to do and it is for school. No one has completed it"}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525985783, "post_id": 50070275, "comment_id": 87579317, "body": "I know what a semiprime number is. the problem is that i cant make it tell me the number inputed is semi prime, returning true or false sends a blank line lol"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525986039, "post_id": 50070275, "comment_id": 87579428, "body": "I&#39;ve added all the other functions you need."}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525987449, "post_id": 50070275, "comment_id": 87579955, "body": "btw what version of python are you because it tells me 49 is not semi prime when it is"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525988184, "post_id": 50070275, "comment_id": 87580227, "body": "Sorry, thought the factors had to be different, so I wasn&#39;t including <code>n**.5</code> in the range checked. I changed it to <code>range(2, int(n**.5)+1)</code> and now it works."}, {"owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "edited": false, "score": 0, "creation_date": 1525988370, "post_id": 50070275, "comment_id": 87580317, "body": "ah ok cool I also changed the false in is_semiprime(n) to Capital False"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1525989712, "last_edit_date": 1525989712, "creation_date": 1524862987, "answer_id": 50070275, "question_id": 50031654, "link": "https://stackoverflow.com/questions/50031654/how-do-i-check-if-the-number-is-semi-prime/50070275#50070275", "title": "How do i check if the number is semi prime", "body": "<p>A semi-prime number is a number that's the product of two prime numbers. So the algorithm is simple:</p>\n\n<ol>\n<li>Find one divisor of the number, call it <code>d1</code>.</li>\n<li>Divide the number by <code>d1</code> to get a second divisor, <code>d2</code>.</li>\n<li>Test whether both <code>d1</code> and <code>d2</code> are prime. If they are, then the original number is semi-prime.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>def is_semiprime(n):\n    for d1 in range(2, int(n**.5)+1):\n        if n % d1 == 0:\n            d2 = n / d1\n            return is_prime(d1) and is_prime(d2)\n    return False\n\ndef is_prime(n):\n  if n == 2 or n == 3: return True\n  if n &lt; 2 or n%2 == 0: return False\n  if n &lt; 9: return True\n  if n%3 == 0: return False\n  r = int(n**0.5)\n  f = 5\n  while f &lt;= r:\n    if n%f == 0: return False\n    if n%(f+2) == 0: return False\n    f +=6\n  return True    \n\ndef ask_semiprime():\n    num = int(input(\"What number would you like to check?\"))\n    if is_semiprime(num):\n        print(num, \" is semiprime\")\n    else:\n        print(num, \" is not semiprime\")\n\nask_semiprime()\n</code></pre>\n\n<p>I copied the <code>is_prime</code> function from <a href=\"https://stackoverflow.com/questions/15285534/isprime-function-for-python-language?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">isPrime Function for Python Language</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10095411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376502bda8c43ab7a4b4a06820dd1887?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Asif Abrar Sayim", "link": "https://stackoverflow.com/users/10095411/mohammad-asif-abrar-sayim"}, "is_accepted": false, "score": 0, "last_activity_date": 1544907865, "creation_date": 1544907865, "answer_id": 53797237, "question_id": 50031654, "link": "https://stackoverflow.com/questions/50031654/how-do-i-check-if-the-number-is-semi-prime/53797237#53797237", "title": "How do i check if the number is semi prime", "body": "<p>number=int(input())</p>\n\n<p>s=number</p>\n\n<p>x=[]</p>\n\n<p>for i in range(2,number+1):</p>\n\n<pre><code>if s%i==0:\n\n    x.append(i)\n\n    s=s//I\n\n    if s==i or (i&gt;s and s!=1):\n\n        x.append(s)\n</code></pre>\n\n<p>if len(x)==2:</p>\n\n<pre><code>print(f\"{number} is a semiprime number because it is the product of Tow primes: \",end=\"\")\n</code></pre>\n\n<p>else:</p>\n\n<pre><code>print(f\"{number} is not a semiprime number because it is the product of {len(x)} primes: \",end=\"\")\n</code></pre>\n\n<p>for i in x:</p>\n\n<pre><code>if i==x[-1]:\n\n    print(i)\n\nelse:\n\n    print(str(i)+\"*\",end=\"\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13917858, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgcD4nel4B0kToTXUNk6q6tYHRDAobtRXWL38OV=k-s128", "display_name": "Ritam Sarkar", "link": "https://stackoverflow.com/users/13917858/ritam-sarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1601227304, "last_edit_date": 1601227304, "creation_date": 1600980291, "answer_id": 64054147, "question_id": 50031654, "link": "https://stackoverflow.com/questions/50031654/how-do-i-check-if-the-number-is-semi-prime/64054147#64054147", "title": "How do i check if the number is semi prime", "body": "<pre><code>def check_prime(n): #for checking wheather prime or not\n    if n &gt; 1:\n        if n == 2: return True\n        for i in range(2,n):\n            if n % i == 0:\n                return False\n                break\n        return True\n    return False\ndef primeproduct(m): #for checking wheather prime product or not \n    if m &gt;= 0:\n      for i in range(1,m):\n        if m%i == 0 and check_prime(i) and check_prime(m//i):\n            return True\n            break\n    return False\n  \n</code></pre>\n<p><em>this may help</em></p>\n"}], "owner": {"reputation": 43, "user_id": 9453607, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfzGh2KUn7M/AAAAAAAAAAI/AAAAAAAAB-8/GRgcnKmOseI/photo.jpg?sz=128", "display_name": "MarshallCodeX", "link": "https://stackoverflow.com/users/9453607/marshallcodex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5908, "favorite_count": 0, "accepted_answer_id": 50070275, "answer_count": 3, "score": 1, "last_activity_date": 1601227304, "creation_date": 1524691896, "last_edit_date": 1525986608, "question_id": 50031654, "link": "https://stackoverflow.com/questions/50031654/how-do-i-check-if-the-number-is-semi-prime", "title": "How do i check if the number is semi prime", "body": "<pre><code>def is_prime(num):\n\n    if num &gt; 1:\n\n        for i in range(2,num):\n</code></pre>\n\n<h1>return False if (num % i) == 0:</h1>\n\n<pre><code>            if (num % i) == 0:\n                return False\n</code></pre>\n\n<h1>return True if prime</h1>\n\n<pre><code>        else:\n            return True\n</code></pre>\n\n<h1>return False if not prime</h1>\n\n<pre><code>    else:\n        return False\n\ndef is_semiprime():\n        n = int(input(\"Enter a number to find out if its semiprime or not\\n&gt;&gt;&gt; \"))\n        for d1 in range(2, int(n**.5)):\n            if n % d1 == 0:\n                d2 = int(n / d1)\n</code></pre>\n\n<h1>is_prime(d1) and is_prime(d2) go through and don't tell me there true or false they just send blank lines.</h1>\n\n<pre><code>               return is_prime(d1) and is_prime(d2)\n            return False\n\nis_semiprime()\n</code></pre>\n\n<h1>when it Returns is_prime(d1) and is_prime(d2) if they are both True then return True</h1>\n"}, {"tags": ["python", "python-3.x", "tkinter", "toplevel"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 1, "creation_date": 1524692052, "post_id": 50031637, "comment_id": 87079436, "body": "Use a single Tk() call, and make a <i>Frame</i> for login and main window. Then you can <code>destroy()</code> and <code>pack()</code> the Frames to change the window."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 2, "creation_date": 1524692220, "post_id": 50031637, "comment_id": 87079497, "body": "You should never create more than one instance of <code>Tk</code>, and never call <code>mainloop()</code> more than once."}, {"owner": {"reputation": 29, "user_id": 9646811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUNRw.gif?s=128&g=1", "display_name": "Sarthak_Bisht", "link": "https://stackoverflow.com/users/9646811/sarthak-bisht"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1524708893, "post_id": 50031637, "comment_id": 87083820, "body": "@Novel ok ,i will try to use frames"}, {"owner": {"reputation": 29, "user_id": 9646811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUNRw.gif?s=128&g=1", "display_name": "Sarthak_Bisht", "link": "https://stackoverflow.com/users/9646811/sarthak-bisht"}, "edited": false, "score": 0, "creation_date": 1524710678, "post_id": 50031637, "comment_id": 87084235, "body": "from tkinter import *  def main_window():     #f2.pack_forget()     f2.destroy()     label=Label(f1,text=&quot;helow&quot;).pack()     Button(f1,text=&quot;logout&quot;,command=login_window).pack()     f1.pack()  def login_window():     #f1.pack_forget()     f1.destroy()     Label(f2,text=&quot;Password&quot;).pack()     button1=Button(f2,text=&quot;click&quot;,command=main_window).pack()     Entry(f2).pack()     f2.pack() win =Tk() f1=Frame(win) f2=Frame(win) login_window() win.mainloop() #it is generating  error:=-_tkinter.TclError: bad window path name &quot;.!frame&quot;"}, {"owner": {"reputation": 29, "user_id": 9646811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUNRw.gif?s=128&g=1", "display_name": "Sarthak_Bisht", "link": "https://stackoverflow.com/users/9646811/sarthak-bisht"}, "edited": false, "score": 0, "creation_date": 1524711002, "post_id": 50031637, "comment_id": 87084304, "body": "from tkinter import *  def main_window():     #f2.pack_forget()     f2.destroy()     label=Label(f1,text=&quot;helow&quot;).pack()     Button(f1,text=&quot;logout&quot;,command=login_window).pack()     f1.pack()  def login_window():     #f1.pack_forget()     f1.destroy()     Label(f2,text=&quot;Password&quot;).pack()     button1=Button(f2,text=&quot;click&quot;,command=main_window).pack()     Entry(f2).pack()     f2.pack() win =Tk() f1=Frame(win) f2=Frame(win) login_window() win.mainloop() #it is generating  error:=-_tkinter.TclError: bad window path name &quot;.!frame&quot;"}, {"owner": {"reputation": 29, "user_id": 9646811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUNRw.gif?s=128&g=1", "display_name": "Sarthak_Bisht", "link": "https://stackoverflow.com/users/9646811/sarthak-bisht"}, "edited": false, "score": 0, "creation_date": 1524711135, "post_id": 50031637, "comment_id": 87084330, "body": "from tkinter import *  def main_window():     #f2.pack_forget()     f2.destroy()     label=Label(f1,text=&quot;helow&quot;).pack()     Button(f1,text=&quot;logout&quot;,command=login_window).pack()     f1.pack()  def login_window():     #f1.pack_forget()     f1.destroy()     Label(f2,text=&quot;Password&quot;).pack()     button1=Button(f2,text=&quot;click&quot;,command=main_window).pack()     Entry(f2).pack()     f2.pack() win =Tk() f1=Frame(win) f2=Frame(win) login_window() win.mainloop() #it is generating  error:=-_tkinter.TclError: bad window path name &quot;.!frame&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9646811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUNRw.gif?s=128&g=1", "display_name": "Sarthak_Bisht", "link": "https://stackoverflow.com/users/9646811/sarthak-bisht"}, "edited": false, "score": 1, "creation_date": 1524744748, "post_id": 50038236, "comment_id": 87101258, "body": "ty so very much ...my kind of coding :P"}, {"owner": {"reputation": 656, "user_id": 8657905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lbkez.gif?s=128&g=1", "display_name": "ThePerson", "link": "https://stackoverflow.com/users/8657905/theperson"}, "reply_to_user": {"reputation": 29, "user_id": 9646811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUNRw.gif?s=128&g=1", "display_name": "Sarthak_Bisht", "link": "https://stackoverflow.com/users/9646811/sarthak-bisht"}, "edited": false, "score": 0, "creation_date": 1524755027, "post_id": 50038236, "comment_id": 87108797, "body": "Also, it is better if you use classes for this.  Happy to help! :)"}], "tags": [], "owner": {"reputation": 656, "user_id": 8657905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lbkez.gif?s=128&g=1", "display_name": "ThePerson", "link": "https://stackoverflow.com/users/8657905/theperson"}, "is_accepted": true, "score": 1, "last_activity_date": 1524731108, "creation_date": 1524731108, "answer_id": 50038236, "question_id": 50031637, "link": "https://stackoverflow.com/questions/50031637/how-to-switch-b-w-the-login-window-and-main-window-by-clicking-the-button-in-tki/50038236#50038236", "title": "how to switch b/w the login window and main window by clicking the button in tkinter?", "body": "<p>If you only want to use functions, this is what you can do:</p>\n\n<pre><code>from tkinter import *\n\nroot=Tk()\n\ndef main_window(win1):\n    win1.destroy()\n    win2=Frame(root)\n    win2.pack()\n    label=Label(win2,text=\"helow\").pack()\n    Button(win2,text=\"logout\",command=lambda:login_window(win2)).pack()\n\ndef login_window(win2):\n    win2.destroy()\n    win1=Frame(root)\n    win1.pack()\n    Label(win1,text=\"Password\").pack()\n    button1=Button(win1,text=\"click\",command=lambda:main_window(win1)).pack()\n    Entry(win1).pack()\n\ndef login_window1():\n    win1=Frame(root)\n    win1.pack()\n    Label(win1,text=\"Password\").pack()\n    button1=Button(win1,text=\"click\",command=lambda:main_window(win1)).pack()\n    Entry(win1).pack()\n\nlogin_window1()\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9646811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUNRw.gif?s=128&g=1", "display_name": "Sarthak_Bisht", "link": "https://stackoverflow.com/users/9646811/sarthak-bisht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 50038236, "answer_count": 1, "score": 0, "last_activity_date": 1524731108, "creation_date": 1524691807, "last_edit_date": 1524719990, "question_id": 50031637, "link": "https://stackoverflow.com/questions/50031637/how-to-switch-b-w-the-login-window-and-main-window-by-clicking-the-button-in-tki", "title": "how to switch b/w the login window and main window by clicking the button in tkinter?", "body": "<p>How to switch b/w the login window and main window? I know this types of questions are asked a lot but still i am not satisfied with the answer and please use method only helps me a lot.</p>\n\n<pre><code>from tkinter import *\ndef main_window():\n    win2=Tk()\n    label=Label(win2,text=\"helow\").pack()\n    Button(win2,text=\"logout\",command=login_window).pack()\n    win2.mainloop()\n\ndef login_window():\n    win1=Tk()\n    Label(win1,text=\"Password\").pack()\n    button1=Button(win1,text=\"click\",command=main_window).pack()\n    Entry(win1).pack()\n    win1.mainloop()\n\nlogin_window()\n</code></pre>\n"}, {"tags": ["python", "dictionary", "blackjack"], "comments": [{"owner": {"reputation": 9071, "user_id": 3541976, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6dqpk.jpg?s=128&g=1", "display_name": "Michael Ohlrogge", "link": "https://stackoverflow.com/users/3541976/michael-ohlrogge"}, "edited": false, "score": 0, "creation_date": 1524691847, "post_id": 50031627, "comment_id": 87079351, "body": "Welcome to Stack Overflow! Here are some guidelines for asking questions in order to get the most helpful responses from people: stackoverflow.com/help/how-to-ask and stackoverflow.com/help/mcveph"}, {"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1524692001, "post_id": 50031627, "comment_id": 87079412, "body": "Don&#39;t read it line by line.  Just read the whole file into <code>json.loads</code>.  If you want more help, you need to format this question.  Try backticks for inline code and four-space tabs for longer code."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "reply_to_user": {"reputation": 9071, "user_id": 3541976, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6dqpk.jpg?s=128&g=1", "display_name": "Michael Ohlrogge", "link": "https://stackoverflow.com/users/3541976/michael-ohlrogge"}, "edited": false, "score": 0, "creation_date": 1524693288, "post_id": 50031627, "comment_id": 87079872, "body": "@MichaelOhlrogge meant to post: <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a> and <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9700410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794acc6a1c10d26d63244ac81ef62582?s=128&d=identicon&r=PG&f=1", "display_name": "rick d.", "link": "https://stackoverflow.com/users/9700410/rick-d"}, "edited": false, "score": 0, "creation_date": 1525313491, "post_id": 50031855, "comment_id": 87310005, "body": "I read into json.loads. I added this code per your suggestion, Mr. Hall.    for key,value in row.items():         print(key + &quot; &quot; + str(value)). This solved my question in a way that was swift and satisfactory. Thank you."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 2, "last_activity_date": 1524693370, "last_edit_date": 1524693370, "creation_date": 1524693019, "answer_id": 50031855, "question_id": 50031627, "link": "https://stackoverflow.com/questions/50031627/error-reading-dictionary-from-json-file-too-many-values-to-unpack/50031855#50031855", "title": "Error: reading dictionary from json file: too many values to unpack", "body": "<p>In <code>for key,value in data</code>, there are two problems:</p>\n\n<ol>\n<li><code>data</code> is the list of dictionaries. You probably meant <code>for key,value in row</code>.</li>\n<li>Iterating over a dictionary only iterates over its keys. To iterate over both keys and values, do <code>for key,value in row.items()</code>.</li>\n</ol>\n\n<blockquote>\n  <p>My question is: what is meant by too many values?</p>\n</blockquote>\n\n<p><code>for key,value in data</code> means that <code>data</code> should be an iterable of pairs that get unpacked into <code>key</code> and <code>value</code>. But the first thing you get when iterating over <code>data</code> is the big dictionary it contains. To try to unpack the dictionary into <code>key, value</code>, Python iterates over the dictionary and gets all 52 keys, which is too many values.</p>\n\n<p>Think of it this way: you wouldn't do:</p>\n\n<pre><code>for row in data:\n    key, value = row\n</code></pre>\n\n<p>because the row has many keys and values. Nor would you do:</p>\n\n<pre><code>for k in row:\n    key, value = k\n</code></pre>\n\n<p>because <code>k</code> is a key of <code>row</code>, which is a string. Hence we need <code>.items()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9700410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794acc6a1c10d26d63244ac81ef62582?s=128&d=identicon&r=PG&f=1", "display_name": "rick d.", "link": "https://stackoverflow.com/users/9700410/rick-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1723, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524694064, "creation_date": 1524691745, "last_edit_date": 1524694064, "question_id": 50031627, "link": "https://stackoverflow.com/questions/50031627/error-reading-dictionary-from-json-file-too-many-values-to-unpack", "title": "Error: reading dictionary from json file: too many values to unpack", "body": "<p>See error message and dictionary below:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/richarddoi/Desktop/blackjack/test blackjack csv.py\", line 9, in &lt;module&gt;\n    for key,value in data:\nValueError: too many values to unpack (expected 2)\n\n{'Ace of Hearts': 1, 'King of Hearts': 10, 'Queen of Hearts': 10, 'Jack of Hearts': 10, '10 of Hearts': 10, '9 of Hearts': 9, '8 of Hearts': 8, '7 of Hearts': 7, '6 of Hearts': 6, '5 of Hearts': 5, '4 of Hearts': 4, '3 of Hearts': 3, '2 of Hearts': 2, 'Ace of Spades': 1, 'King of Spades': 10, 'Queen of Spades': 10, 'Jack of Spades': 10, '10 of Spades': 10, '9 of Spades': 9, '8 of Spades': 8, '7 of Spades': 7, '6 of Spades': 6, '5 of Spades': 5, '4 of Spades': 4, '3 of Spades': 3, '2 of Spades': 2, 'Ace of Clubs': 1, 'King of Clubs': 10, 'Queen of Clubs': 10, 'Jack of Clubs': 10, '10 of Clubs': 10, '9 of Clubs': 9, '8 of Clubs': 8, '7 of Clubs': 7, '6 of Clubs': 6, '5 of Clubs': 5, '4 of Clubs': 4, '3 of Clubs': 3, '2 of Clubs': 2, 'Ace of Diamonds': 1, 'King of Diamonds': 10, 'Queen of Diamonds': 10, 'Jack of Diamonds': 10, '10 of Diamonds': 10, '9 of Diamonds': 9, '8 of Diamonds': 8, '7 of Diamonds': 7, '6 of Diamonds': 6, '5 of Diamonds': 5, '4 of Diamonds': 4, '3 of Diamonds': 3, '2 of Diamonds': 2}\n</code></pre>\n\n<p>This appears when I use the following code:</p>\n\n<pre><code>import json\n\nwith open('deckfile.json') as f:\n    data = [json.loads(line) for line in f]\n    for row in data:\n        print(row)\n</code></pre>\n\n<p>But at this point, when I try to print the key and the value, using this code:</p>\n\n<pre><code>    for key,value in data:\n        print(key, value)\n</code></pre>\n\n<p>I get an error message. To date, I've used txt and binary files successfully. I've never used to a dictionary before in reading from a file.  </p>\n\n<p>My question is: what is meant by too many values? As far as I know, there is a dictionary with: the name of the card and the value of the card for every card in a 52 card deck. I used a convention to try to get the key and the value without a success.</p>\n"}, {"tags": ["python", "multiprocessing", "pipe"], "answers": [{"tags": [], "owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "is_accepted": false, "score": 2, "last_activity_date": 1524692294, "creation_date": 1524692294, "answer_id": 50031712, "question_id": 50031613, "link": "https://stackoverflow.com/questions/50031613/python-multiprocess-non-blocking-intercommunication-using-pipes/50031712#50031712", "title": "Python multiprocess non-blocking intercommunication using Pipes", "body": "<p>According to <a href=\"https://docs.python.org/2/library/multiprocessing.html?highlight=pipe#multiprocessing.Pipe\" rel=\"nofollow noreferrer\"><code>multiprocessing.Pipe()</code></a> and <a href=\"https://docs.python.org/2/library/multiprocessing.html?highlight=pipe#multiprocessing.Connection\" rel=\"nofollow noreferrer\"><code>multiprocessing.Connection</code></a> docs, a <code>Connection</code> has the <code>poll()</code> method for that.</p>\n"}, {"tags": [], "owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "is_accepted": true, "score": 7, "last_activity_date": 1524692312, "creation_date": 1524692312, "answer_id": 50031717, "question_id": 50031613, "link": "https://stackoverflow.com/questions/50031613/python-multiprocess-non-blocking-intercommunication-using-pipes/50031717#50031717", "title": "Python multiprocess non-blocking intercommunication using Pipes", "body": "<p>Use the poll function.  Change your while loop like this:</p>\n\n<pre><code> while True:\n       print('Test')\n       if parent_conn.poll():\n           msg = parent_conn.recv()\n           if msg == 'Done':\n              break\n       else:\n           do_something_else()\n</code></pre>\n"}], "owner": {"reputation": 9373, "user_id": 1581803, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7d7013acefc965b236241196601a14e5?s=128&d=identicon&r=PG", "display_name": "Vingtoft", "link": "https://stackoverflow.com/users/1581803/vingtoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2708, "favorite_count": 0, "accepted_answer_id": 50031717, "answer_count": 2, "score": 4, "last_activity_date": 1524692312, "creation_date": 1524691662, "question_id": 50031613, "link": "https://stackoverflow.com/questions/50031613/python-multiprocess-non-blocking-intercommunication-using-pipes", "title": "Python multiprocess non-blocking intercommunication using Pipes", "body": "<p>Is it possible to receive process intercommunications using Pipes in a non-blocking fashion?</p>\n\n<p>Consider the following code:</p>\n\n<pre><code>from multiprocessing import Process, Pipe\nimport time\n\ndef f(conn):\n    time.sleep(3)\n    conn.send('Done')\n    conn.close()\n\nif __name__ == '__main__':\n    parent_conn, child_conn = Pipe()\n    p = Process(target=f, args=(child_conn,))\n    p.start()\n    while True:\n       print('Test')\n       msg = parent_conn.recv()\n       if msg == 'Done':\n          break\n    print('The End')\n    p.join()\n</code></pre>\n\n<p>The <code>parent_conn.recv()</code> will block the while-loop until a message is received. Is there a way to listen for messages in a non-blocking way?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1524691765, "post_id": 50031593, "comment_id": 87079319, "body": "What problem are you having with your code?"}, {"owner": {"reputation": 27, "user_id": 9454280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59741a840ead950dcce040759a229ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Joker", "link": "https://stackoverflow.com/users/9454280/joker"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1524691892, "post_id": 50031593, "comment_id": 87079370, "body": "The system somehow said this: TypeError: remove_from_tail() missing 1 required positional argument: &#39;item&#39;. I have no idea where I did wrong."}, {"owner": {"reputation": 1188, "user_id": 4514236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ychAiduF2Y8/AAAAAAAAAAI/AAAAAAAAABM/LUFe9_quxVs/photo.jpg?sz=128", "display_name": "Peter Dolan", "link": "https://stackoverflow.com/users/4514236/peter-dolan"}, "edited": false, "score": 0, "creation_date": 1524692542, "post_id": 50031593, "comment_id": 87079630, "body": "Where do you call remove_from_tail, @Joker?"}, {"owner": {"reputation": 27, "user_id": 9454280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59741a840ead950dcce040759a229ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Joker", "link": "https://stackoverflow.com/users/9454280/joker"}, "edited": false, "score": 0, "creation_date": 1524693139, "post_id": 50031593, "comment_id": 87079832, "body": "Refer to the sample output that I have edited in the question."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1524694452, "post_id": 50031593, "comment_id": 87080251, "body": "Well, the error message tells you what the problem is. You have defined <code>remove_from_tail</code> with two arguments (<code>self</code> and <code>item</code>) but when you call it, you are passing only the implicit <code>self</code>. From reading the problem description it seems you are intended to remove the last item, so your function does not need to be told what item to remove. Thus you do not need to accept <code>item</code> in your function. Of course, you will need to change the logic of your function to actually achieve the desired goal, too."}, {"owner": {"reputation": 27, "user_id": 9454280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59741a840ead950dcce040759a229ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Joker", "link": "https://stackoverflow.com/users/9454280/joker"}, "edited": false, "score": 0, "creation_date": 1524698753, "post_id": 50031593, "comment_id": 87081447, "body": "Could you please refer to Sample2 and guide my how can I fix my code?"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1524786807, "post_id": 50031593, "comment_id": 87123211, "body": "in your <code>remove_from_tail</code> method, you should also include a check for a one-item list before the <code>while</code>-loop. I think after that you&#39;ll get the correct output for the <code>100</code> test case."}, {"owner": {"reputation": 27, "user_id": 9454280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59741a840ead950dcce040759a229ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Joker", "link": "https://stackoverflow.com/users/9454280/joker"}, "edited": false, "score": 0, "creation_date": 1524795861, "post_id": 50031593, "comment_id": 87125105, "body": "Sorry, could you elaborate on that?"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1524948465, "post_id": 50031593, "comment_id": 87177754, "body": "Sure np, I&#39;ll put it in an answer"}], "answers": [{"tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1524949023, "last_edit_date": 1524949023, "creation_date": 1524948717, "answer_id": 50080969, "question_id": 50031593, "link": "https://stackoverflow.com/questions/50031593/python-linked-list-remove/50080969#50080969", "title": "Python linked list remove", "body": "<p>The while-loop conditional handles only multiple-item lists. Try adding a condition to check for one-item lists before the while loop:</p>\n\n<pre><code># Check for an empty list\n  ...\n\n# Check for one-item list\nif current.get_next() == None:\n    data = current.get_data()\n    self.head = None\n    return data\n\n# Multi item list\n...\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9454280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59741a840ead950dcce040759a229ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Joker", "link": "https://stackoverflow.com/users/9454280/joker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 2, "answer_count": 1, "score": -1, "last_activity_date": 1524949023, "creation_date": 1524691565, "last_edit_date": 1524703711, "question_id": 50031593, "link": "https://stackoverflow.com/questions/50031593/python-linked-list-remove", "title": "Python linked list remove", "body": "<p>When the remove_from_tail() method is called, the last element in the linked list is removed from the linked list. Your solution to this exercise will be a minimal implementation of the LinkedList class that contains the following methods: <strong>init</strong>(), print_all(), add() and remove_from_tail(). To complete the remove_from_tail() method, it might be useful to create a loop and use a \"curr\" reference to locate the last element in the list, but at the same time keep a \"prev\" reference to the previous Node in the chain.  Once you have reached the end of the list, you can set the \"next\" field of the \"prev\" pointer to None to remove the last element. You can assume that there will be at least one element in the list when remove_from_tail() is called - however, if there is only one element, then you will need to set head to None when that element is removed.</p>\n\n<p>EDIT:\nI have change my code and got things right, however, there are still small things with error, and I can't seems to figure out why. This is my new code:</p>\n\n<pre><code>def remove_from_tail(self): \n    current = self.head\n    previous = current\n    while current.get_next() != None:\n        previous = current\n        current = current.get_next()\n    previous.set_next(None)\n    return current.get_data()\n</code></pre>\n\n<p>The error that has to be fixed:<a href=\"https://i.stack.imgur.com/y4phE.png\" rel=\"nofollow noreferrer\">Sample2</a></p>\n"}, {"tags": ["c#", "python", "ssl", "ssl-certificate"], "answers": [{"tags": [], "owner": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "is_accepted": true, "score": 2, "last_activity_date": 1525114522, "creation_date": 1525114522, "answer_id": 50106554, "question_id": 50031582, "link": "https://stackoverflow.com/questions/50031582/ssl-connection-is-failing-without-client-side-authentication/50106554#50106554", "title": "SSL Connection is failing without client side authentication", "body": "<p>Ssl <em>client certificate</em> authentication is indeed optional. It's when client sends its certificate to server, and server verifies this certificate is valid, is what server expects, and authenticates client with that certificate.</p>\n\n<p>However, this is not what is performed by</p>\n\n<pre><code>sslStream.AuthenticateAsClient(this.ServerAddress);\n</code></pre>\n\n<p>As documentation states, this method is</p>\n\n<blockquote>\n  <p>Called by clients to <strong>authenticate the server</strong> and optionally the client\n  in a client-server connection.</p>\n</blockquote>\n\n<p>Authenticating the server (verifying its certificate is valid, was issued for the expected domain, was issued by trusted authority) is a required step in ssl handshake. For example, using description by <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_7.1.0/com.ibm.mq.doc/sy10660_.htm\" rel=\"nofollow noreferrer\">this link</a> we see that step 3 is:</p>\n\n<blockquote>\n  <p>The SSL or TLS client verifies the server's digital certificate</p>\n</blockquote>\n\n<p>Server waits for the result of this step from client to proceed. For that reason, if you skip this step by commenting the call to <code>AuthenticateAsClient</code> - your python server correctly complains about protocol violation.</p>\n\n<p>To use client authentication you would use another overload:</p>\n\n<pre><code>X509CertificateCollection clientCerts = GetClientCerts();\nsslStream.AuthenticateAsClient(this.ServerAddress, clientCerts, true);\n</code></pre>\n\n<p>Since you are not doing that - you are not performing (optional) client authentication.</p>\n"}], "owner": {"reputation": 1075, "user_id": 740521, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e724ef960b60005ddfdf845d82e358de?s=128&d=identicon&r=PG", "display_name": "user740521", "link": "https://stackoverflow.com/users/740521/user740521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 0, "accepted_answer_id": 50106554, "answer_count": 1, "score": 1, "last_activity_date": 1525114522, "creation_date": 1524691512, "last_edit_date": 1525112031, "question_id": 50031582, "link": "https://stackoverflow.com/questions/50031582/ssl-connection-is-failing-without-client-side-authentication", "title": "SSL Connection is failing without client side authentication", "body": "<p>I read that client side authentication is optional, so I am trying to connect to my SSL server without authenticating on the client side. When I do this I get the following error on the server:</p>\n\n<pre><code>, in accept_connection\n    ssl_version=ssl.PROTOCOL_SSLv23\n  File \"/usr/lib/python2.7/ssl.py\", line 933, in wrap_socket\n    ciphers=ciphers)\n  File \"/usr/lib/python2.7/ssl.py\", line 601, in __init__\n    self.do_handshake()\n  File \"/usr/lib/python2.7/ssl.py\", line 830, in do_handshake\n    self._sslobj.do_handshake()\nSSLEOFError: EOF occurred in violation of protocol (_ssl.c:590)\n</code></pre>\n\n<p>Here is the working server and client code, everything works fine when I authenticate on the client side, but the error shows up when I comment that line out.</p>\n\n<p>Server (python):</p>\n\n<pre><code>def accept_connection(self, sock):\n    client, (addr, port) = sock.accept()\n    sslclient = ssl.wrap_socket(\n        client,\n        server_side=True,\n        certfile=self.ssl_cert_file,\n        keyfile=self.ssl_key_file,\n        ssl_version=ssl.PROTOCOL_SSLv23\n    )\n</code></pre>\n\n<p>Client (C#):</p>\n\n<pre><code>public bool Connect()\n    {\n        try\n        {\n            client = new TcpClient(this.ServerAddress, this.ServerPort);\n\n            sslStream = new SslStream(\n                client.GetStream(),\n                false,\n                new RemoteCertificateValidationCallback(ValidateCert),\n                null\n            );\n\n            try\n            {\n                sslStream.AuthenticateAsClient(this.ServerAddress);\n            }\n            catch (AuthenticationException e)\n            {\n                sslStream = null;\n                client.Close();\n                client = null;\n                return false;\n            }\n        }\n        catch (Exception e)\n        {\n            return false;\n        }\n\n        return true;\n    }\n</code></pre>\n\n<p>The above is working code with no errors. </p>\n\n<p>When I comment out the following code on the client:</p>\n\n<pre><code>//sslStream.AuthenticateAsClient(this.ServerAddress);\n</code></pre>\n\n<p>The python error mentioned above shows up, and the client connection doesn't throw any exceptions and continues running until its first read, then fails with:</p>\n\n<pre><code>This operation is only allowed using a successfully authenticated context.\n</code></pre>\n\n<p>How can I go about making this work if I do not call <code>AuthenticateAsClient</code>?</p>\n\n<p>This is how i generate certfile and keyfile</p>\n\n<pre><code>openssl req -x509 -newkey rsa:1024 -keyout my.key -out my.crt -days 365 -nodes -subj \"/C=US/ST=VA/L=Junk/O=None/OU=Junk/CN=example.local\"\n</code></pre>\n\n<p>Python is version 2.</p>\n\n<p>Perhaps I have just been misinformed that the call to <code>AuthenticateAsClient</code> is optional?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 9447984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z0D2CRY013Y/AAAAAAAAAAI/AAAAAAAAADM/PlmynwQ3s-A/photo.jpg?sz=128", "display_name": "F igura", "link": "https://stackoverflow.com/users/9447984/f-igura"}, "is_accepted": true, "score": 1, "last_activity_date": 1524691867, "creation_date": 1524691867, "answer_id": 50031647, "question_id": 50031566, "link": "https://stackoverflow.com/questions/50031566/error-when-trying-to-retrieve-class-attributes/50031647#50031647", "title": "Error when trying to retrieve class attributes.", "body": "<p>I am not sure what you want to do, but here is my suggestion.\nWhen you initialize the class, in your <strong>init</strong> class, you could add attribute to a class.\nHere is an example for Person class.</p>\n\n<pre><code>class Person(first_name, last_name):\n    def __init__(self, first_name, last_name):\n       self.first_name = first_name\n       self.last_name = last_name\n</code></pre>\n\n<p>By doing so, your Person class has attributes first_name and last_name. You could easily access them by calling myPerson.first_name, myPerson.last_name.</p>\n\n<p>I guess this is what you want? Hope this help.</p>\n"}], "owner": {"reputation": 277, "user_id": 1038902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/508ca4bb2cf7150a6e707071f50870dd?s=128&d=identicon&r=PG", "display_name": "Cracoras", "link": "https://stackoverflow.com/users/1038902/cracoras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 50031647, "answer_count": 1, "score": 0, "last_activity_date": 1524691867, "creation_date": 1524691415, "question_id": 50031566, "link": "https://stackoverflow.com/questions/50031566/error-when-trying-to-retrieve-class-attributes", "title": "Error when trying to retrieve class attributes.", "body": "<p>I am relatively new to Python, and trying to understand a function I came across, by re-writing it and trying to running on jupyter. The purpose of the function is to analyse the calling class, retrieve properties associated with it, and create string that will be part of a query that will later be run against the database. \nI have created to very simple classes and added some attributes/properties to it, but I am getting an error which I am not sure how to resolve it:</p>\n\n<pre><code>class Person(object):\n\ndef __init__(self):\n    pass\nclass Employee(Person):\n\n    __required_properties__ = ['first_name', 'last_name']\n\ndef __init__(self):\n    super().__init__()\n\ndef inherited_labels(cls):\n    return ['employee']\n\ndef build_merge_query(cls, merge_params, update_existing=False, lazy=False, relationship=None):\n    query_params = dict(merge_params=merge_params)\n    print (query_params)\n    n_merge = \"n:{} {{{}}}\".format(\n        \":\".join(cls.inherited_labels()),\n        \", \".join(\"{0}: params.create.{0}\".format(getattr(cls, p).db_property or p) \n              for p in cls.__required_properties__))\nreturn n_merge\n\nmerge_params = ('first_name', 'last_name')\n\nmyEmployee = Employee()\n\nbuild_merge_query(myEmployee, merge_params)\n</code></pre>\n\n<p>When I run this I got an \"Attribute Error: 'Employee' object has no attribute 'first_name'</p>\n\n<pre><code>&lt;ipython-input-78-2973503b3f7a&gt; in &lt;genexpr&gt;(.0)\n 21         \":\".join(cls.inherited_labels()),\n 22         \", \".join(\"{0}: params.create.{0}\".format(getattr(cls, p).db_property or p) \n---&gt; 23                   for p in cls.__required_properties__))\n 24     return n_merge\n 25 AttributeError: 'Employee' object has no attribute 'first_name'\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524691514, "post_id": 50031553, "comment_id": 87079233, "body": "I ran into a problem that was very similar. I had a non deterministic order to my class labels in my preprocessing so the order between training and evaluating was different. It might be worth looking into that the ordering is the same."}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "reply_to_user": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524691581, "post_id": 50031553, "comment_id": 87079262, "body": "Great idea. Would <code>list(train_df[&#39;Id&#39;].unique())</code> for a pandas dataframe ever return different results?"}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "reply_to_user": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524691890, "post_id": 50031553, "comment_id": 87079369, "body": "I don&#39;t think it would. I verified that <code>debug_gen.class_indices == traing_gen.class_indices</code>."}, {"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 1, "creation_date": 1524692081, "post_id": 50031553, "comment_id": 87079452, "body": "I believe i was shuffling the data in my preprocess steps and adding classes dynamically as i came across them. But it seems you&#39;re not having the same problem. Always good to try for the low hanging fruit first though"}, {"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524692366, "post_id": 50031553, "comment_id": 87079553, "body": "Have you validated that the data being flowed into the fit_generator is correct?"}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "reply_to_user": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524692505, "post_id": 50031553, "comment_id": 87079611, "body": "I haven&#39;t, but I don&#39;t know how the same <code>ImageDataGenerator</code> on the same directory would return different <code>x</code> or <code>y</code> values?"}, {"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 1, "creation_date": 1524692513, "post_id": 50031553, "comment_id": 87079617, "body": "Keras does the validation splitting before training. There is a chance that you have the classes unbalanced so its trying to predict on a class that it was never trained on"}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "reply_to_user": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524692651, "post_id": 50031553, "comment_id": 87079666, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/169803/discussion-between-ben-sandler-and-grant-williams\">continue this discussion in chat</a>."}, {"owner": {"reputation": 769, "user_id": 6169238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24e36b8286cc1c3faeb8bdc9ff5e4ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Manngo", "link": "https://stackoverflow.com/users/6169238/manngo"}, "reply_to_user": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1525723181, "post_id": 50031553, "comment_id": 87460510, "body": "@GrantWilliams This is not happening automatically. If you want a validation split you have to specify it using parameter <code>validation_split</code> in <code>fit_generator</code>. This was not done in the above code."}, {"owner": {"reputation": 238, "user_id": 11280401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZFWwo.jpg?s=128&g=1", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/11280401/ashkan"}, "edited": false, "score": 0, "creation_date": 1576873316, "post_id": 50031553, "comment_id": 105047806, "body": "Were you able to resolve your issue? I still have this issue... :("}], "answers": [{"comments": [{"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525278115, "post_id": 50121735, "comment_id": 87296881, "body": "Thanks Daniel, I&#39;m going to use your suggestions to see if they improve my results. On your last point, model.summary() prints <a href=\"https://gist.github.com/sandlerben/7f4decbfdbb52a005e72d2f3a2d4214f\" rel=\"nofollow noreferrer\">this</a>, so I do think layer 0 is resnet50."}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 1, "creation_date": 1525278250, "post_id": 50121735, "comment_id": 87296949, "body": "Yes, it is :) -- Somewhere I found once a model that had an input layer. But I don&#39;t know where."}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525371453, "post_id": 50121735, "comment_id": 87340901, "body": "I tried your suggestions and they unfortunately didn&#39;t help. I updated my answer above."}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525372353, "post_id": 50121735, "comment_id": 87341354, "body": "Also I&#39;m totally sure I&#39;m not retraining the model during evaluation. You can see my full notebook code <a href=\"https://gist.github.com/sandlerben/a7979709a39f6172f7cf0e72e393ba58\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 1, "creation_date": 1525372474, "post_id": 50121735, "comment_id": 87341420, "body": "Did you update your answer entirely and correctly? I still see the augmentation parameters in training data. It&#39;s still not the same dataset."}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 1, "creation_date": 1525372815, "post_id": 50121735, "comment_id": 87341601, "body": "A suspicion: do you have files named as &#39;final_model&#39; <b>and</b> &#39;final_model.h5&#39;? -- If the save command is somenow adding the extension automatically, you may be loading a different model."}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 1, "creation_date": 1525372860, "post_id": 50121735, "comment_id": 87341628, "body": "You can try to force deleting the files before saving (make sure the file is overriden by a new one)."}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 1, "creation_date": 1525373299, "post_id": 50121735, "comment_id": 87341803, "body": "It&#39;s true that it&#39;s not the exact same dataset but clearly the model is learning to account for the shifts and rotations by the tenth epoch (given the <code>0.8854</code> accuracy). Note also that the dataset is &quot;different&quot; on every different epoch because of the random shifts and rotations, but accuracy remains high.  There is only one model file, called <code>final_model</code>. Thanks for the suggestion though."}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525373887, "post_id": 50121735, "comment_id": 87342084, "body": "Weird.... as a last resource, I added option 3, saving only weights with numpy. (This is actually the only thing I do when working, because loading models never worked for me)"}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525374980, "post_id": 50121735, "comment_id": 87342639, "body": "While in the notebook I have the line <code>pretrained_model = load_model(&#39;final_model&#39;)</code> when I last evaluated the model I actually didn&#39;t save/load the model, I just kept it in memory. So I don&#39;t think it&#39;s that either :/"}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525383879, "post_id": 50121735, "comment_id": 87346508, "body": "The only other thing I can think of is that for some reason <code>flow_from_directory</code> isn&#39;t properly using the <code>classes</code> argument. Is that possible?"}, {"owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525537509, "post_id": 50121735, "comment_id": 87400102, "body": "Hey Daniel do you have any other suggestions?"}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "edited": false, "score": 0, "creation_date": 1525538513, "post_id": 50121735, "comment_id": 87400413, "body": "No :( unfortunately"}], "tags": [], "owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "is_accepted": false, "score": 3, "last_activity_date": 1525373809, "last_edit_date": 1525373809, "creation_date": 1525198985, "answer_id": 50121735, "question_id": 50031553, "link": "https://stackoverflow.com/questions/50031553/0-accuracy-with-evaluate-generator-but-75-accuracy-during-training-with-same-d/50121735#50121735", "title": "0% accuracy with evaluate_generator but 75% accuracy during training with same data - what is going on?", "body": "<p>Two things I suspect.</p>\n\n<p><strong>1 - No, your data is not the same.</strong>    </p>\n\n<p>You're using three types of augmentation in <code>ImageDataGenerator</code>, and it seems there isn't a random seed being set. So, test data is not equal to training data. </p>\n\n<p>And as it seems, you're also training for only one epoch, which is very little (unless you really have tons of data, but since you're using augmentation, maybe that's not the case). (PS: I don't see the <code>steps_per_epoch</code> argument in your <code>fit_generator</code> call...)    </p>\n\n<p>So, if you want to see good results, here are some solutions:</p>\n\n<ul>\n<li>remove the augmentation arguments from the generator for this test (either training and test data) - This means, remove <code>width_shift_range</code>, <code>height_shift_range</code> and <code>rotation_range</code>;    </li>\n<li>if not, train for really long, enough for your model to really get used to all kinds of augmented images (as it seems, five epochs seem still to be way too little);    </li>\n<li>or set a random seed and guarantee that the test data is equal to the training data (argument <code>seed</code> in <code>flow_from_directory</code>)  </li>\n</ul>\n\n<p><strong>2 -</strong> (This may happen if you're very new to Keras/programming, so please ignore if it's not the case) <strong>You might be running the code that defines the model again when testing.</strong></p>\n\n<p>If you run the code that defines the model again, it will replace all your previous training with random weights. </p>\n\n<p><strong>3 - Since we're out of suggestions:</strong></p>\n\n<p>Maybe save the weights instead of saving the model. I usually do this instead of saving the models. (For some reason I don't understand, I've never been able to load a model like that)    </p>\n\n<pre><code>def createModel():\n    ....\n\nmodel = createModel()\n...\nmodel.fit_generator(....)\n\nnp.save('model_weights.npy',model.get_weights())\n\nmodel = createModel()\nmodel.set_weights(np.load('model_weights.npy'))\n...\nmodel.evaluate_generator(...)\n</code></pre>\n\n<hr>\n\n<p><strong>Hint:</strong></p>\n\n<p>It's not related to the bug, but make sure that the base model layer is really layer 0. If I remember well, sequential models have an input layer and you should actually be making layer 1 untrainable instead. </p>\n\n<p>Use the <code>model.summary()</code> to confirm the number of untrainable parameters. </p>\n"}], "owner": {"reputation": 1683, "user_id": 3624201, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4103a1a9daaf21559dbb9b7f83bfa314?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Sandler", "link": "https://stackoverflow.com/users/3624201/ben-sandler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2352, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1525373809, "creation_date": 1524691337, "last_edit_date": 1525372390, "question_id": 50031553, "link": "https://stackoverflow.com/questions/50031553/0-accuracy-with-evaluate-generator-but-75-accuracy-during-training-with-same-d", "title": "0% accuracy with evaluate_generator but 75% accuracy during training with same data - what is going on?", "body": "<p>I'm encountering a very strange with a keras model using ImageDataGenerator, fit_generator, and evaluate_generator.</p>\n\n<p>I'm creating the model like so:</p>\n\n<pre><code>classes = &lt;list of classes&gt;\nnum_classes = len(classes)\n\npretrained_model = Sequential()\npretrained_model.add(ResNet50(include_top=False, weights='imagenet', pooling='avg'))\npretrained_model.add(Dense(num_classes, activation='softmax'))\n\npretrained_model.layers[0].trainable = False\n\npretrained_model.compile(\n    optimizer='adam',\n    loss='categorical_crossentropy',\n    metrics=['accuracy']\n)\n</code></pre>\n\n<p>And I'm training it like this:</p>\n\n<pre><code>idg_final = ImageDataGenerator(\n    data_format='channels_last',\n    rescale=1./255,\n    width_shift_range = 0.2,\n    height_shift_range = 0.2,\n    rotation_range=15,\n)\n\ntraing_gen = idg_final.flow_from_directory('./train', classes=classes, target_size=(224, 224), class_mode='categorical')\n\npretrained_model.fit_generator(traing_gen, epochs=1, verbose=1)\n</code></pre>\n\n<p><code>fit_generator</code> prints <code>loss: 1.0297 - acc: 0.7546</code>.</p>\n\n<p>Then, I am trying to evaluate the model on the <strong>exact same data it was trained on.</strong></p>\n\n<pre><code>debug_gen = idg_final.flow_from_directory('./train', target_size=(224, 224), class_mode='categorical', classes=classes, shuffle=True)\nprint(pretrained_model.evaluate_generator(debug_gen, steps=100))\n</code></pre>\n\n<p>Which prints <code>[10.278913383483888, 0.0]</code>.</p>\n\n<p>Why is the accuracy so different on the same exact data?</p>\n\n<p>Edit: I also wanted to point out that sometimes the accuracy is above 0.0. For example, when I use a model trained with five epochs, <code>evaluate_accuracy</code> returns 6% accuracy.</p>\n\n<hr>\n\n<p>Edit 2: Based on the answers below I made sure to train for more epochs and that the <code>ImageDataGenerator</code> for evaluation did not have random shifts and rotations. I'm still getting very high accuracy during training and extremely low accuracy during evaluation on the same dataset.</p>\n\n<p>I'm training like</p>\n\n<pre><code>idg_final = ImageDataGenerator(\n    data_format='channels_last',\n    rescale=1./255,\n    width_shift_range = 0.2,\n    height_shift_range = 0.2,\n    rotation_range=15,\n)\n\ntraing_gen = idg_final.flow_from_directory('./train', classes=classes, target_size=(224, 224), class_mode='categorical')                  \n\npretrained_model.fit_generator(traing_gen, epochs=10, verbose=1)\n</code></pre>\n\n<p>Which prints the following:</p>\n\n<pre><code>Found 9850 images belonging to 4251 classes.\nEpoch 1/10\n308/308 [==============================] - 3985s 13s/step - loss: 8.9218 - acc: 0.0860\nEpoch 2/10\n308/308 [==============================] - 3555s 12s/step - loss: 3.2710 - acc: 0.3403\nEpoch 3/10\n308/308 [==============================] - 3594s 12s/step - loss: 1.8597 - acc: 0.5836\nEpoch 4/10\n308/308 [==============================] - 3656s 12s/step - loss: 1.2712 - acc: 0.7058\nEpoch 5/10\n308/308 [==============================] - 3667s 12s/step - loss: 0.9556 - acc: 0.7795\nEpoch 6/10\n308/308 [==============================] - 3689s 12s/step - loss: 0.7665 - acc: 0.8207\nEpoch 7/10\n308/308 [==============================] - 3693s 12s/step - loss: 0.6581 - acc: 0.8498\nEpoch 8/10\n308/308 [==============================] - 3618s 12s/step - loss: 0.5874 - acc: 0.8636\nEpoch 9/10\n308/308 [==============================] - 3823s 12s/step - loss: 0.5144 - acc: 0.8797\nEpoch 10/10\n308/308 [==============================] - 4334s 14s/step - loss: 0.4835 - acc: 0.8854\n</code></pre>\n\n<p>And I'm evaluating like this on the <strong>exact same dataset</strong></p>\n\n<pre><code>idg_debug = ImageDataGenerator(\n    data_format='channels_last',\n    rescale=1./255,\n)\n\ndebug_gen = idg_debug.flow_from_directory('./train', target_size=(224, 224), class_mode='categorical', classes=classes)\nprint(pretrained_model.evaluate_generator(debug_gen))\n</code></pre>\n\n<p>Which prints the following very low accuracy: <code>[10.743386410747084, 0.0001015228426395939]</code></p>\n\n<hr>\n\n<p>The full code is <a href=\"https://gist.github.com/sandlerben/a7979709a39f6172f7cf0e72e393ba58\" rel=\"noreferrer\">here</a>.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 371, "user_id": 8809751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVYlL.jpg?s=128&g=1", "display_name": "Masterbuilder", "link": "https://stackoverflow.com/users/8809751/masterbuilder"}, "reply_to_user": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1524691822, "post_id": 50031528, "comment_id": 87079342, "body": "T,  dataframe displayed in the post is my desired output, when I populate the dataframe all the unstacked category values are NaN"}], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 8809751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVYlL.jpg?s=128&g=1", "display_name": "Masterbuilder", "link": "https://stackoverflow.com/users/8809751/masterbuilder"}, "edited": false, "score": 0, "creation_date": 1524692281, "post_id": 50031666, "comment_id": 87079521, "body": "Yep, this is what I wanted, no looping, would you be kind enough to explain  ** syntax is for."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 371, "user_id": 8809751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVYlL.jpg?s=128&g=1", "display_name": "Masterbuilder", "link": "https://stackoverflow.com/users/8809751/masterbuilder"}, "edited": false, "score": 0, "creation_date": 1524692788, "post_id": 50031666, "comment_id": 87079706, "body": "** is keyword unpacking of a dataframe.  Basically it is taking the columns or pd.Series of the dataframe and join it back to the original dataframe."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 0, "last_activity_date": 1524691970, "creation_date": 1524691970, "answer_id": 50031666, "question_id": 50031528, "link": "https://stackoverflow.com/questions/50031528/give-scores-to-dataframe-based-on-id/50031666#50031666", "title": "Give scores to dataframe based on id", "body": "<p>You can use str accessor with <code>get_dummies</code>:</p>\n\n<pre><code>df[['accountid','category']].assign(**df['category'].str.get_dummies())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>           accountid category  Hard  Narrow  Sharp  Smooth\ntimestamp                                                 \n2018-03-29       101   Smooth     0       0      0       1\n2018-03-29       102     Hard     1       0      0       0\n2018-03-30       103   Narrow     0       1      0       0\n2018-04-30       104    Sharp     0       0      1       0\n2018-04-21       105   Narrow     0       1      0       0\n</code></pre>\n\n<p>And replace 0 with nan,</p>\n\n<pre><code>df[['accountid','category']].assign(**df['category'].str.get_dummies())\\\n                            .replace(0,np.nan)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>           accountid category  Hard  Narrow  Sharp  Smooth\ntimestamp                                                 \n2018-03-29       101   Smooth   NaN     NaN    NaN     1.0\n2018-03-29       102     Hard   1.0     NaN    NaN     NaN\n2018-03-30       103   Narrow   NaN     1.0    NaN     NaN\n2018-04-30       104    Sharp   NaN     NaN    1.0     NaN\n2018-04-21       105   Narrow   NaN     1.0    NaN     NaN\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 8809751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVYlL.jpg?s=128&g=1", "display_name": "Masterbuilder", "link": "https://stackoverflow.com/users/8809751/masterbuilder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 50031666, "answer_count": 1, "score": 1, "last_activity_date": 1524701123, "creation_date": 1524691242, "last_edit_date": 1524701123, "question_id": 50031528, "link": "https://stackoverflow.com/questions/50031528/give-scores-to-dataframe-based-on-id", "title": "Give scores to dataframe based on id", "body": "<p>I have a dataframe which is indexed by date, I am trying to provide scores for each accountid based on category, if that category value exist on the index date, this dataframe will look like this.</p>\n\n<pre><code>     accountid category Smooth Hard Sharp Narrow\ntimestamp                                             \n2018-03-29       101   Smooth    1  NaN   NaN    NaN\n2018-03-29       102     Hard    NaN  1   NaN    NaN\n2018-03-30       103   Narrow    NaN  NaN   NaN    1\n2018-04-30       104    Sharp    NaN  NaN   1    NaN\n2018-04-21       105   Narrow    NaN  NaN   NaN    1\n</code></pre>\n\n<p>what is the best way to loop through the dataframe per accountid and assign scores for each category unstacked.</p>\n\n<p>here is the dataframe creation script.</p>\n\n<pre><code>import pandas as pd\nimport datetime\nidx = pd.date_range('02-28-2018', '04-29-2018')\n\ndf = pd.DataFrame(\n    [[ '101', '2018-03-29', 'Smooth','NaN','NaN','NaN','NaN'], [\n         '102', '2018-03-29', 'Hard','NaN','NaN','NaN','NaN'\n    ], [ '103', '2018-03-30', 'Narrow','NaN','NaN','NaN','NaN'], [\n         '104', '2018-04-30', 'Sharp','NaN','NaN','NaN','NaN'\n    ], [ '105', '2018-04-21', 'Narrow','NaN','NaN','NaN','NaN']],\n    columns=[ 'accountid', 'timestamp', 'category','Smooth','Hard','Sharp','Narrow'])\n\ndf['timestamp'] = pd.to_datetime(df['timestamp'])\ndf=df.set_index(['timestamp'])\nprint(df)\n</code></pre>\n"}, {"tags": ["python", "subprocess", "pipe"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1524691371, "post_id": 50031506, "comment_id": 87079158, "body": "This just looks like your regex is wrong. <code>&#39;&quot;sbin|lib&quot;&#39;</code> means the inner quotes are literal, not syntactic. That is to say, you&#39;re searching for either <code>&quot;sbin</code> or <code>lib&quot;</code>. Presumably what you really want is <code>&#39;sbin|lib&#39;</code>, without the extra quotes."}, {"owner": {"reputation": 1, "user_id": 9700387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd93347abcd1fae5cccf42e8ce25eb?s=128&d=identicon&r=PG&f=1", "display_name": "messin_around", "link": "https://stackoverflow.com/users/9700387/messin-around"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691438, "post_id": 50031506, "comment_id": 87079189, "body": "I am running commands on a Linux system so the quotes need to be there for the command ultimately to look like ps ax |egrep /usr/ |egrep &quot;sbin|lib&quot;"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691442, "post_id": 50031506, "comment_id": 87079193, "body": "The thing to understand is that in <code>egrep &quot;sbin|lib&quot;</code> passed to a shell, those double quotes are syntactic, not literal -- ie. they&#39;re serving the exact same purpose that the single quotes do in the Python, and aren&#39;t actually passed to <code>egrep</code>."}, {"owner": {"reputation": 1, "user_id": 9700387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd93347abcd1fae5cccf42e8ce25eb?s=128&d=identicon&r=PG&f=1", "display_name": "messin_around", "link": "https://stackoverflow.com/users/9700387/messin-around"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691514, "post_id": 50031506, "comment_id": 87079232, "body": "If I change the egrep to echo I get a text file that displays &quot;sbin|lib&quot;"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691533, "post_id": 50031506, "comment_id": 87079242, "body": "With the double quotes in the output file? That makes my point."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1524691608, "post_id": 50031506, "comment_id": 87079268, "body": "<code>egrep &quot;sbin|lib&quot;</code> in bash turns into <code>execvp(&quot;egrep&quot;, char[][]{&quot;egrep&quot;, &quot;sbin|lib&quot;, NULL})</code>. That&#39;s the same thing that <code>subprocess.Popen([&quot;egrep&quot;, &quot;sbin|lib&quot;])</code> does. By contrast, the code you&#39;re running in Python would be <code>egrep &#39;&quot;sbin|lib&quot;&#39;</code> in bash, and it would fail the same way if you ran it there."}, {"owner": {"reputation": 1, "user_id": 9700387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd93347abcd1fae5cccf42e8ce25eb?s=128&d=identicon&r=PG&f=1", "display_name": "messin_around", "link": "https://stackoverflow.com/users/9700387/messin-around"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691664, "post_id": 50031506, "comment_id": 87079286, "body": "Yeah, that&#39;s what I want. The double quotes are necessary because I am asking egrep to locate either sbin or lib."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691696, "post_id": 50031506, "comment_id": 87079299, "body": "Please step back and reread what I&#39;m telling you. The double quotes <b>are bash syntax, not passed to grep</b>. When you put them there in the Python code with <code>shell=False</code>, there <i>is</i> no shell to read and consume those quotes, so they <i>are</i> passed to grep, so you&#39;re running two very different commands."}, {"owner": {"reputation": 1, "user_id": 9700387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd93347abcd1fae5cccf42e8ce25eb?s=128&d=identicon&r=PG&f=1", "display_name": "messin_around", "link": "https://stackoverflow.com/users/9700387/messin-around"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691823, "post_id": 50031506, "comment_id": 87079343, "body": "Ok... I can kind of see now what you are saying. So how would I pass the literal egrep &quot;sbin|lib&quot; to a subprocess from python?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524691873, "post_id": 50031506, "comment_id": 87079363, "body": "The way I told you in my very first comment. <code>[&#39;egrep&#39;, &#39;sbin|lib&#39;]</code>"}, {"owner": {"reputation": 1, "user_id": 9700387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd93347abcd1fae5cccf42e8ce25eb?s=128&d=identicon&r=PG&f=1", "display_name": "messin_around", "link": "https://stackoverflow.com/users/9700387/messin-around"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524692017, "post_id": 50031506, "comment_id": 87079424, "body": "Ok, I will have to test it when I have the availability. Thank you for the quick response and working through it with me!"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1524692121, "post_id": 50031506, "comment_id": 87079462, "body": "BTW, is your intent to search for <code>&#47;usr&#47;sbin</code> or <code>&#47;usr&#47;lib</code>? If so, I&#39;d suggest <code>[&#39;egrep&#39;, &#39;&#47;usr&#47;(sbin|lib)&#39;]</code>."}, {"owner": {"reputation": 1, "user_id": 9700387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd93347abcd1fae5cccf42e8ce25eb?s=128&d=identicon&r=PG&f=1", "display_name": "messin_around", "link": "https://stackoverflow.com/users/9700387/messin-around"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1524745733, "post_id": 50031506, "comment_id": 87101927, "body": "Thank you so much for this! I was able to run some tests this morning and your solution worked perfectly. I guess this goes to show I need to learn more about how this processes things under the hood."}], "owner": {"reputation": 1, "user_id": 9700387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd93347abcd1fae5cccf42e8ce25eb?s=128&d=identicon&r=PG&f=1", "display_name": "messin_around", "link": "https://stackoverflow.com/users/9700387/messin-around"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524691181, "creation_date": 1524691181, "question_id": 50031506, "link": "https://stackoverflow.com/questions/50031506/multiple-subprocess-pipes-python", "title": "Multiple subprocess pipes python", "body": "<p>This is my first time on here so please bear with me. I am working through some python code and having trouble with one block in particular so I will post my code from the test script I have been working on. I have even used print debugger statements to find out what's wrong and it appears the 3rd pipe is not getting stdin from the 2nd one even though the 2nd one is piping out the output. If I comment out output3 and use output2 the file gets created and populated but once I include output3 the file is completely empty. Any help is greatly appreciated!</p>\n\n<pre><code>#!/usr/bin/python\n\nimport subprocess\n\ntry:\n  output = subprocess.Popen(['ps', 'ax'], stdout=subprocess.PIPE)\n  output2 = subprocess.Popen(['egrep', '/usr/'], stdin=output.stdout, stdout=subprocess.PIPE); output.stdout.close()\n  output3 = subprocess.Popen(['egrep', '\"sbin|lib\"'], stdin=output2.stdout, stdout=subprocess.PIPE); output2.stdout.close()\n  with output3.stdout, open('some file name', 'ab') as file:\n    for line in iter(output3.stdout.readline, b''):\n      file.write(line)\n\nexcept OSError as message:\n  print \"Display bad things {}!\".format(message)\n</code></pre>\n\n<p>I had to hand jam this so sorry if I missed some typos!</p>\n"}, {"tags": ["python", "string", "replace", "split"], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "edited": false, "score": 0, "creation_date": 1524693487, "post_id": 50031612, "comment_id": 87079944, "body": "Thanks for the help! How would I for example, change  <code>Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</code> into <code>64 3 3 3</code> with regex?"}, {"owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "edited": false, "score": 0, "creation_date": 1524694799, "post_id": 50031612, "comment_id": 87080341, "body": "I&#39;m trying to put <code>MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</code> into the same setup as your regx variable above, but I can&#39;t get it to work. But I guess the format is slightly different?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "edited": false, "score": 0, "creation_date": 1524694858, "post_id": 50031612, "comment_id": 87080356, "body": "What do you want your output to look like?"}, {"owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "edited": false, "score": 0, "creation_date": 1524695259, "post_id": 50031612, "comment_id": 87080446, "body": "I need it to look like: <code>MaxPool2d(2x2, 2,2)</code>. Also, depending on the user choice, the &quot;MaxPool&quot; string will be like this instead: <code>AvgPool2d(kernel_size=2, stride=2, padding=0)</code>. The &quot;AvgPool&quot; string through needs to end up in the same format as it does for MaxPool: <code>AvgPool2d(2x2, 2,2)</code>. I&#39;m not sure if these two strings are similar enough to just merge them together into one regx thing, or not."}, {"owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "edited": false, "score": 0, "creation_date": 1524698168, "post_id": 50031612, "comment_id": 87081294, "body": "Maybe the best option might be to define a single regx variable that creates a map for all 3 string setups/formats, and then I could just add the <code>MaxPool2d</code>, <code>AvgPool2d</code>, or <code>Conv2d</code> when I want to print a layer name/string."}, {"owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "edited": false, "score": 0, "creation_date": 1524698287, "post_id": 50031612, "comment_id": 87081319, "body": "For the single map idea, I could just take the numbers that occur past &quot;2d&quot;. But I am not sure how to do that?"}, {"owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "edited": false, "score": 0, "creation_date": 1524698734, "post_id": 50031612, "comment_id": 87081440, "body": "This doesn&#39;t seem to work for anything but Conv2d: <code>regx_map = r&#39;(2d).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d&zwnj;&#8203;+).*?(\\d+).*&#39;</code>"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 4, "last_activity_date": 1524691661, "creation_date": 1524691661, "answer_id": 50031612, "question_id": 50031488, "link": "https://stackoverflow.com/questions/50031488/simplifying-the-modification-of-strings-from-a-dynamic-list/50031612#50031612", "title": "Simplifying the modification of strings from a dynamic list?", "body": "<p>You could  use a regular expression to match:</p>\n\n<pre><code>import re\ns = 'Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))'\nregx = r'(Conv2d).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*'\n\nprint(re.sub(regx, r'\\1(\\2 -&gt; \\3, \\4x\\5, \\6,\\7,\\8,\\9)', s))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Conv2d(3 -&gt; 64, 3x3, 1,1,1,1)\n</code></pre>\n\n<p>If you wanted to make the regex slightly more robust at the cost of it being quite long:</p>\n\n<pre><code>(Conv2d)\\((\\d+),\\s(\\d+),\\skernel_size=\\((\\d+),\\s(\\d+)\\),\\sstride=\\((\\d+),\\s(\\d+)\\),\\spadding=\\((\\d+),\\s(\\d+)\\)\\)\n</code></pre>\n\n<p>Try it out <a href=\"https://regex101.com/r/yD0Itm/1\" rel=\"nofollow noreferrer\"><strong>here</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1524693863, "creation_date": 1524693863, "answer_id": 50031978, "question_id": 50031488, "link": "https://stackoverflow.com/questions/50031488/simplifying-the-modification-of-strings-from-a-dynamic-list/50031978#50031978", "title": "Simplifying the modification of strings from a dynamic list?", "body": "<p>You can use regex to parse the signatures of the functions in the strings, convert the parameters to the desired syntax, and then and then use <code>re.sub</code> to add the new signatures:</p>\n\n<pre><code>import re\nimport itertools\ndef signature(header):\n  s = re.findall('(?&lt;=\\()[\\w\\W]+(?=\\)$)', header)\n  return re.split(',\\s(?=\\w\\w)', s[0]) if s else ''\n\ndef combine_args(d):\n   if '=' in d:\n      return '{}x{}'.format(*re.findall('\\d+', d)) if 'kernel_size' in d and len(re.findall('\\d+', d)) == 2 else '{},{}'.format(*re.findall('\\d+', d)) if len(re.findall('\\d+', d)) == 2 else d\n   return d\n\ndef combine_header(d):\n  vals = [[a, list(b)] for a, b in itertools.groupby(d, key=lambda x:x.isdigit())]\n  return list(itertools.chain(*[[' -&gt; '.join(b)] if a else [combine_args(i) for i in b] for a, b in vals]))\n\nlines = ['TVLoss()', 'Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(64, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(128, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(256, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'ContentLoss((crit): MSELoss())', 'Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())']\nfinal_lines = [re.sub('(?&lt;=\\()[\\w\\W]+(?=\\)$)', ', '.join(combine_header(c)), a) for a, c in zip(lines, map(signature, lines))]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['TVLoss()', 'Conv2d(3 -&gt; 64, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(64 -&gt; 64, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(64 -&gt; 128, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(128 -&gt; 128, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(128 -&gt; 256, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(256 -&gt; 256, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'Conv2d(256 -&gt; 256, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'Conv2d(256 -&gt; 256, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(256 -&gt; 512, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())', 'Conv2d(512 -&gt; 512, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'ContentLoss((crit): MSELoss())', 'Conv2d(512 -&gt; 512, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'Conv2d(512 -&gt; 512, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)', 'Conv2d(512 -&gt; 512, 3x3, 1,1, 1,1)', 'ReLU(inplace)', 'StyleLoss((gram): GramMatrix()(crit): MSELoss())']\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 50031612, "answer_count": 2, "score": 0, "last_activity_date": 1524706942, "creation_date": 1524691078, "last_edit_date": 1524706942, "question_id": 50031488, "link": "https://stackoverflow.com/questions/50031488/simplifying-the-modification-of-strings-from-a-dynamic-list", "title": "Simplifying the modification of strings from a dynamic list?", "body": "<p>I want to change a list of strings from one format to another.</p>\n\n<p>An example of a full list can be found here: <a href=\"https://gist.github.com/ProGamerGov/1d728e7ca4cc52abf398277642e4ee78\" rel=\"nofollow noreferrer\">https://gist.github.com/ProGamerGov/1d728e7ca4cc52abf398277642e4ee78</a></p>\n\n<p>Some examples of what I am trying to do: </p>\n\n<pre><code>Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>(2): Conv2d(3 -&gt; 64, 3x3, 1,1, 1,1)\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>Conv2d(64, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>(8): Conv2d(64 -&gt; 128, 3x3, 1,1, 1,1)\n</code></pre>\n\n<p>My current code setup looks like this: </p>\n\n<pre><code>def modify_text(text, new): \n    return text.replace(\", \",\"*\", 1).replace(\", \", new, 1)\n\nfor i, layer in enumerate(net): \n        if \"Conv2d\" in str(layer):\n           layer = str(layer).replace(\",\",\" -&gt;\", 1)\n           layer = modify_text(layer, \"x\").replace(\"kernel_size=(\", \"\").replace(\"stride=(\", \"\").replace(\"padding=(\", \"\").replace(\")\",\"\", 3)\n           layer = modify_text(modify_text(layer, \",\"), \",\").replace(\"*\",\", \")\n           print(\"  (\" + str(i+1) + \"): \" + layer)\n</code></pre>\n\n<p>But I feel like I there could be a better looking/simpler way to do this?</p>\n\n<p>Edit, I've simplified my setup down to this: </p>\n\n<pre><code>regx_map = r'(2d).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*?(\\d+).*'\nregx_pool = r'(2d).*?(\\d+).*?(\\d+).*?(\\d+).*'\nfor i, layer in enumerate(net): \n     if \"Conv2d\" in str(layer):\n          print(\"  (\" + str(i+1) + \"): \" + re.sub(regx_map, r'\\1(\\2 -&gt; \\3, \\4x\\5, \\6,\\7, \\8,\\9)', str(layer)))\n     elif \"MaxPool2d\" in str(layer) or \"AvgPool2d\" in str(layer):\n          print(\"  (\" + str(i+1) + \"): \" + re.sub(regx_pool, r'\\1(\\2x\\2, \\3,\\3)', str(layer)))\n     else:\n          print(\"  (\" + str(i+1) + \"): \" + \"nn.\" + str(layer).split(\"(\", 1)[0]) \n</code></pre>\n"}, {"tags": ["python", "math", "int"], "comments": [{"owner": {"reputation": 424, "user_id": 9095830, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hRVH1yInQ4/AAAAAAAAAAI/AAAAAAAAAAs/7jstsQfDWOE/photo.jpg?sz=128", "display_name": "diegoiva", "link": "https://stackoverflow.com/users/9095830/diegoiva"}, "edited": false, "score": 2, "creation_date": 1524690606, "post_id": 50031385, "comment_id": 87078839, "body": "try using the operator * between parentheses."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 1, "creation_date": 1524690853, "post_id": 50031385, "comment_id": 87078933, "body": "<a href=\"https://www.tutorialspoint.com/python3/python_basic_operators.htm\" rel=\"nofollow noreferrer\"><code>num2^2</code></a> does probably not do, what you think it does."}], "answers": [{"comments": [{"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 1, "creation_date": 1524690956, "post_id": 50031413, "comment_id": 87078989, "body": "@DiegoContreras you cant use the <code>^</code> operator for power. that is the XOR operator. you need to change it to <code>num2**2</code>"}, {"owner": {"reputation": 2460, "user_id": 2715819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865993e49f832e0d08673bb6ae8f24b7?s=128&d=identicon&r=PG", "display_name": "RishiG", "link": "https://stackoverflow.com/users/2715819/rishig"}, "edited": false, "score": 1, "creation_date": 1524690977, "post_id": 50031413, "comment_id": 87079002, "body": "You&#39;re also missing the <code>num3</code> input"}, {"owner": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691036, "post_id": 50031413, "comment_id": 87079029, "body": "the num3 was a mistake when I copy pasted it. Try refreshing the page, I edited it"}, {"owner": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691135, "post_id": 50031413, "comment_id": 87079064, "body": "so adding the ** hasn&#39;t changed anything. Now I&#39;m getting ValueError: math domain error"}, {"owner": {"reputation": 2460, "user_id": 2715819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865993e49f832e0d08673bb6ae8f24b7?s=128&d=identicon&r=PG", "display_name": "RishiG", "link": "https://stackoverflow.com/users/2715819/rishig"}, "reply_to_user": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 2, "creation_date": 1524691228, "post_id": 50031413, "comment_id": 87079109, "body": "@T.ps: if you input bad numbers (such that the arg to the square root is less than zero) then you correctly get that error"}, {"owner": {"reputation": 424, "user_id": 9095830, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hRVH1yInQ4/AAAAAAAAAAI/AAAAAAAAAAs/7jstsQfDWOE/photo.jpg?sz=128", "display_name": "diegoiva", "link": "https://stackoverflow.com/users/9095830/diegoiva"}, "reply_to_user": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691294, "post_id": 50031413, "comment_id": 87079138, "body": "@T.ps, you should input correct values! try with num1=3, num2=10, num3=2"}, {"owner": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "reply_to_user": {"reputation": 2460, "user_id": 2715819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865993e49f832e0d08673bb6ae8f24b7?s=128&d=identicon&r=PG", "display_name": "RishiG", "link": "https://stackoverflow.com/users/2715819/rishig"}, "edited": false, "score": 0, "creation_date": 1524691406, "post_id": 50031413, "comment_id": 87079173, "body": "@RishiG That&#39;s it! I was reviewing it with a=1 b=2 c=3 but tried it with other random numbers which then worked. Is there any way to allow the number 1 to be used?"}, {"owner": {"reputation": 424, "user_id": 9095830, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hRVH1yInQ4/AAAAAAAAAAI/AAAAAAAAAAs/7jstsQfDWOE/photo.jpg?sz=128", "display_name": "diegoiva", "link": "https://stackoverflow.com/users/9095830/diegoiva"}, "reply_to_user": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691506, "post_id": 50031413, "comment_id": 87079228, "body": "@T.ps what do you mean with &quot;be used&quot;?"}, {"owner": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691591, "post_id": 50031413, "comment_id": 87079264, "body": "I would like to have the ability to use the number &quot;1&quot; without it giving me an error."}, {"owner": {"reputation": 424, "user_id": 9095830, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hRVH1yInQ4/AAAAAAAAAAI/AAAAAAAAAAs/7jstsQfDWOE/photo.jpg?sz=128", "display_name": "diegoiva", "link": "https://stackoverflow.com/users/9095830/diegoiva"}, "reply_to_user": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 1, "creation_date": 1524691996, "post_id": 50031413, "comment_id": 87079410, "body": "@T.ps The reason &quot; ValueError: math domain error &quot; is being displayed is because the square root of a negative number is a complex number, that&#39;s why! in order to don&#39;t get this error be sure on whatever input you make the number inside the square root is always greater than zero."}, {"owner": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524692348, "post_id": 50031413, "comment_id": 87079548, "body": "Problem is that most math equations involve a negative :/ Is there no way to allow it?"}, {"owner": {"reputation": 424, "user_id": 9095830, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hRVH1yInQ4/AAAAAAAAAAI/AAAAAAAAAAs/7jstsQfDWOE/photo.jpg?sz=128", "display_name": "diegoiva", "link": "https://stackoverflow.com/users/9095830/diegoiva"}, "reply_to_user": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 1, "creation_date": 1524692615, "post_id": 50031413, "comment_id": 87079653, "body": "@T.ps then i highly encourage you to use cmath library which has a built-it function sqrt() that allows complex results. i will update my edit with an example."}], "tags": [], "owner": {"reputation": 424, "user_id": 9095830, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7hRVH1yInQ4/AAAAAAAAAAI/AAAAAAAAAAs/7jstsQfDWOE/photo.jpg?sz=128", "display_name": "diegoiva", "link": "https://stackoverflow.com/users/9095830/diegoiva"}, "is_accepted": true, "score": 1, "last_activity_date": 1524693155, "last_edit_date": 1524693155, "creation_date": 1524690721, "answer_id": 50031413, "question_id": 50031385, "link": "https://stackoverflow.com/questions/50031385/typeerror-int-object-is-not-callable-on-code-that-solves-quadratic-formula/50031413#50031413", "title": "TypeError: &#39;int&#39; object is not callable on code that solves quadratic formula", "body": "<p>Just adding the operator \"*\" between num1 and num3 parentheses did the trick:</p>\n\n<pre><code>import math\nnum1 = int(input(\"Enter a:\"))\nnum2 = int(input(\"Enter b:\"))\nnum3 = int(input(\"Enter c:\"))\nresult1 = (-num2 + math.sqrt(num2**2 - 4 * (num1)*(num3)))\nresult2 = (result1 / (2 * num1))\nprint(result2)\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>If you want to allow complex results, use cmath's sqrt function.</p>\n\n<pre><code>import cmath\nnum1 = int(input(\"Enter a:\"))\nnum2 = int(input(\"Enter b:\"))\nnum3 = int(input(\"Enter c:\"))\nresult1 = (-num2 + cmath.sqrt(num2**2 - 4 * (num1)*(num3)))\nresult2 = (result1 / (2 * num1))\nprint(result2)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "reply_to_user": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691378, "post_id": 50031480, "comment_id": 87079160, "body": "@T.ps it seems to work when i input examples. What inputs do you have?"}, {"owner": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691559, "post_id": 50031480, "comment_id": 87079255, "body": "Yep, I found out that the number 1 doesn&#39;t work. Any way to allow the number 1 into the equation?"}, {"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "reply_to_user": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "edited": false, "score": 0, "creation_date": 1524691947, "post_id": 50031480, "comment_id": 87079393, "body": "@T.ps, sure. You can use (1, -1, -2) i.e. x^2 -x -2 and it should output 2.0"}], "tags": [], "owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1524691043, "creation_date": 1524691043, "answer_id": 50031480, "question_id": 50031385, "link": "https://stackoverflow.com/questions/50031385/typeerror-int-object-is-not-callable-on-code-that-solves-quadratic-formula/50031480#50031480", "title": "TypeError: &#39;int&#39; object is not callable on code that solves quadratic formula", "body": "<p>So python code has different operators than some languages like mathematica. Try this instead.</p>\n\n<pre><code>import math\nnum1 = int(input(\"Enter a:\"))\nnum2 = int(input(\"Enter b:\"))\nnum3 = int(input(\"Enter c:\"))\nresult1 = (-num2 + math.sqrt(num2**2 - 4 * (num1)*(num3)))\nresult2 = (result1 / (2 * num1))\nprint(result2)\n</code></pre>\n\n<p>the power operator is <code>**</code> instead of <code>^</code> (that is the XOR operator). and multiplication needs to be explicitly stated using the <code>*</code> operator even if its between parentheses.</p>\n"}, {"tags": [], "owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "is_accepted": false, "score": 0, "last_activity_date": 1524693339, "creation_date": 1524693339, "answer_id": 50031911, "question_id": 50031385, "link": "https://stackoverflow.com/questions/50031385/typeerror-int-object-is-not-callable-on-code-that-solves-quadratic-formula/50031911#50031911", "title": "TypeError: &#39;int&#39; object is not callable on code that solves quadratic formula", "body": "<p>It looks like you are trying to make a quadratic equation solver. While it looks like there is already an accepted answer to this question, I would like to add some additional code of my own to address some possible pitfalls.</p>\n\n<p>It looks like you are getting a <code>ValueError: math domain error</code> issues since you are passing \"invalid\" values to your <code>a, b, c</code> variables. This is due to the fact that python does not handle taking the square root of negative numbers with <code>math.sqrt</code>. <strong>However</strong>, if you want to get the imaginary solutions as well, I would recommend you use python's built-in support for handling complex numbers and use the <code>cmath.sqrt</code> as well. I suggest that you calculate and store the <code>discriminant</code> (i.e. the stuff under square root sign) as a separate variable. Your solver code might look like this (note that I also solve for <strong>both</strong> solutions as there is a \u00b1 symbol in the quadratic formula to consider):</p>\n\n<pre><code>import math\nimport cmath#complex number math module!!!\n\ndef solve_quadratic_equation(a, b, c):\n    disc = b**2 - (4*a*c)#disc = discriminant\n    sqrt_disc = cmath.sqrt(disc) if disc &lt; 0 else math.sqrt(disc)#ternary if\n    pos_answer = (-b + sqrt_disc)/(2*a)\n    neg_answer = (-b - sqrt_disc)/(2*a)\n    return (pos_answer, neg_answer)\n\ndef get_input():\n    a = int(input(\"Enter a: \"))\n    b = int(input(\"Enter b: \"))\n    c = int(input(\"Enter c: \"))\n    return (a, b, c)\n\nif __name__ == \"__main__\":\n    a, b, c = get_input()\n    answer = solve_quadratic_equation(a, b, c)\n    print(answer)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9700228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2091c3135591da0f93885c35063440d5?s=128&d=identicon&r=PG&f=1", "display_name": "T.ps", "link": "https://stackoverflow.com/users/9700228/t-ps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 50031413, "answer_count": 3, "score": 0, "last_activity_date": 1524693339, "creation_date": 1524690569, "last_edit_date": 1524690779, "question_id": 50031385, "link": "https://stackoverflow.com/questions/50031385/typeerror-int-object-is-not-callable-on-code-that-solves-quadratic-formula", "title": "TypeError: &#39;int&#39; object is not callable on code that solves quadratic formula", "body": "<p>So I wanted to create some code to make my math homework slightly quicker. I have created code that inputs a,b and c which are then placed into the mathematicla formula. This is my first math code so there might be some obvious issues. Thanks for the help!</p>\n\n<p>Code:</p>\n\n<pre><code>import math\nnum1 = int(input(\"Enter a:\"))\nnum2 = int(input(\"Enter b:\"))\nnum3 = int(input(\"Enter c:\"))\nresult1 = (-num2 + math.sqrt(num2^2 - 4 * (num1)(num3)))\nresult2 = (result1 / (2 * num1))\nprint(result2)\n</code></pre>\n"}, {"tags": ["python", "regex", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 5689064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bd339d1ca9cd7402f7357bc3cca46f?s=128&d=identicon&r=PG", "display_name": "rpspringuel", "link": "https://stackoverflow.com/users/5689064/rpspringuel"}, "edited": false, "score": 0, "creation_date": 1524767943, "post_id": 50031456, "comment_id": 87115939, "body": "In my testing there is a clear performance hit here (the above code takes about 6 times longer to run than the equivalent using <code>regex</code>) but we&#39;re still talking about less than half-a-second (~0.3 vs. ~0.05).  I&#39;ll check with my colleagues, but I think that might be an acceptable hit."}, {"owner": {"reputation": 211, "user_id": 5689064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bd339d1ca9cd7402f7357bc3cca46f?s=128&d=identicon&r=PG", "display_name": "rpspringuel", "link": "https://stackoverflow.com/users/5689064/rpspringuel"}, "edited": false, "score": 0, "creation_date": 1525030805, "post_id": 50031456, "comment_id": 87197269, "body": "After consultation, we&#39;ve decided that our use case is such that rebuilding the <code>\\p{P}</code> class is overkill and that we&#39;re better off approximating it (something more akin to the now deleted other answer) in a way that does not incur the performance hit associated with this answer.  It&#39;s a trade-off decision, though, so I&#39;m not sure if I should mark this as the accepted answer or not.  This answer solved my problem as stated, but it was the other (now deleted) answer which actually turned out to be the most helpful for the project."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 211, "user_id": 5689064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bd339d1ca9cd7402f7357bc3cca46f?s=128&d=identicon&r=PG", "display_name": "rpspringuel", "link": "https://stackoverflow.com/users/5689064/rpspringuel"}, "edited": false, "score": 0, "creation_date": 1525071718, "post_id": 50031456, "comment_id": 87207028, "body": "Sure, that&#39;s fine; I tried to answer the question you asked, &#39;how do I match what the <code>\\p{P}</code> syntax matches, with <code>re</code>&#39;, Wiktor tried to address the problem they assumed you were trying to solve with your question. It&#39;s tricky to know what to include in a question sometimes, for it to be complete enough for answerers to give you the best information you actually need (which is not always what you perhaps thought you needed)."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 1, "last_activity_date": 1525071922, "last_edit_date": 1525071922, "creation_date": 1524690915, "answer_id": 50031456, "question_id": 50031377, "link": "https://stackoverflow.com/questions/50031377/use-re-to-duplicate-pp-from-regex/50031456#50031456", "title": "Use re to duplicate \\p{P} from regex?", "body": "<p>To replicate the <code>\\p{P}</code> functionality, you'd have to manually build the set, using the <a href=\"https://docs.python.org/3/library/unicodedata.html\" rel=\"nofollow noreferrer\"><code>unicodedata</code> module</a>; you still need to manually filter all codepoints:</p>\n\n<pre><code>import re\nimport sys\nfrom unicodedata import category\n\np_class = re.escape(''.join([\n    c for c in map(chr, range(sys.maxunicode))\n    if category(c)[0] == 'P']))\n\npattern = re.compile(rf'\\b[^\\W\\d_]+\\b[{p_class}]*')\n</code></pre>\n\n<p>Personally, I'd just install <code>regex</code> at this point, and not try to manually build huge character sets.</p>\n\n<p>You may want to do some statistical analysis on what kinds of characters you actually <em>need</em> to match, rather than <em>all punctuation</em>, to narrow down that set, or express it in terms of 'not a word character or whitespace', with <code>[^\\w\\s]*</code>, which is broader but faster to match.</p>\n"}], "owner": {"reputation": 211, "user_id": 5689064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bd339d1ca9cd7402f7357bc3cca46f?s=128&d=identicon&r=PG", "display_name": "rpspringuel", "link": "https://stackoverflow.com/users/5689064/rpspringuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 50031456, "answer_count": 1, "score": 0, "last_activity_date": 1525071922, "creation_date": 1524690514, "question_id": 50031377, "link": "https://stackoverflow.com/questions/50031377/use-re-to-duplicate-pp-from-regex", "title": "Use re to duplicate \\p{P} from regex?", "body": "<p>Is there a way to duplicate the unicode category matching capability of <code>regex</code> using just <code>re</code>?  I have an <code>re</code> match string which identifies words (<code>r'\\b[^\\W\\d_]+\\b'</code>) which I would like to amend so that punctuation which is attached to the word (i.e. has no non-punctuation characters intervening between the word and the character) is included in the match.  Using <code>regex</code> I would do <code>r'\\b[^\\W\\d_]+\\b\\p{P}*'</code> but I cannot be sure that <code>regex</code> will be installed on all the systems to which the final script will be deployed and thus would like to rework the match condition to be entirely <code>re</code> compatible.  Is that possible, and if so how would I do it?</p>\n"}, {"tags": ["python", "python-3.x", "sqlalchemy", "flask-sqlalchemy", "relationships"], "answers": [{"comments": [{"owner": {"reputation": 1083, "user_id": 5819113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ECON.jpg?s=128&g=1", "display_name": "bluesmonk", "link": "https://stackoverflow.com/users/5819113/bluesmonk"}, "edited": false, "score": 0, "creation_date": 1524749325, "post_id": 50031564, "comment_id": 87104706, "body": "I&#39;m reading about primaryjoin and secondaryjoin. In the meantime, what do you mean with &quot;You could also pretty reasonably make a backref parent if you so choose.&quot; Could you provide an example?  Would it be necessary to show my code also?"}, {"owner": {"reputation": 7750, "user_id": 832136, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/MeiCh.jpg?s=128&g=1", "display_name": "Hannele", "link": "https://stackoverflow.com/users/832136/hannele"}, "reply_to_user": {"reputation": 1083, "user_id": 5819113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ECON.jpg?s=128&g=1", "display_name": "bluesmonk", "link": "https://stackoverflow.com/users/5819113/bluesmonk"}, "edited": false, "score": 0, "creation_date": 1524779204, "post_id": 50031564, "comment_id": 87121063, "body": "Added the <code>backref</code> argument to show what that would look like. Does that help?"}], "tags": [], "owner": {"reputation": 7750, "user_id": 832136, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/MeiCh.jpg?s=128&g=1", "display_name": "Hannele", "link": "https://stackoverflow.com/users/832136/hannele"}, "is_accepted": false, "score": 2, "last_activity_date": 1524779184, "last_edit_date": 1524779184, "creation_date": 1524691405, "answer_id": 50031564, "question_id": 50031376, "link": "https://stackoverflow.com/questions/50031376/override-relationship-behaviour-in-sqlalchemy/50031564#50031564", "title": "override relationship behaviour in sqlalchemy", "body": "<p>For <code>parent.pets.all()</code>, I think you could use children as a <a href=\"http://docs.sqlalchemy.org/en/latest/orm/join_conditions.html#composite-secondary-joins\" rel=\"nofollow noreferrer\">secondary join</a> condition, and treat it as an <a href=\"https://en.wikipedia.org/wiki/Associative_entity\" rel=\"nofollow noreferrer\">associative entity or junction table</a>.</p>\n\n<p>It depends on your tables but that would look something like:</p>\n\n<pre><code>Parent.pets = relationship(\n    Pet,\n    backref='parent'\n    primaryjoin=Pet.child_id == Child.id,\n    secondaryjoin=Child.parent_id == Parent.id\n)\n</code></pre>\n\n<p>You could also pretty reasonably make a backref <code>parent</code> if you so choose - this would let you access both <code>parent_a.pets</code> as well as <code>pet_a.parent</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1083, "user_id": 5819113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ECON.jpg?s=128&g=1", "display_name": "bluesmonk", "link": "https://stackoverflow.com/users/5819113/bluesmonk"}, "is_accepted": true, "score": 2, "last_activity_date": 1525268217, "creation_date": 1525268217, "answer_id": 50136024, "question_id": 50031376, "link": "https://stackoverflow.com/questions/50031376/override-relationship-behaviour-in-sqlalchemy/50136024#50136024", "title": "override relationship behaviour in sqlalchemy", "body": "<p>Using the same answer from the <a href=\"https://groups.google.com/forum/#!topic/sqlalchemy/jgKgv5zQT7E\" rel=\"nofollow noreferrer\">sqlalchemy mailing list</a>, this can be achieved using <a href=\"http://docs.sqlalchemy.org/en/latest/core/event.html\" rel=\"nofollow noreferrer\">event listeners</a>, which are called before an <code>append</code> or <code>remove</code> is called on the object in the first parameter. </p>\n\n<pre><code>@db.event.listens_for(Parent.children, 'append')\ndef _append_children(parent, child, initiator):\n    # appends also the pets bound to the child that the \n    # is being appended to the Parent\n\n    parent.pets.extend(child.pets.all())\n\n    # at the end of this call, executes\n    # parent.children.append(child)\n</code></pre>\n"}], "owner": {"reputation": 1083, "user_id": 5819113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ECON.jpg?s=128&g=1", "display_name": "bluesmonk", "link": "https://stackoverflow.com/users/5819113/bluesmonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "accepted_answer_id": 50136024, "answer_count": 2, "score": 3, "last_activity_date": 1525268217, "creation_date": 1524690509, "last_edit_date": 1524754766, "question_id": 50031376, "link": "https://stackoverflow.com/questions/50031376/override-relationship-behaviour-in-sqlalchemy", "title": "override relationship behaviour in sqlalchemy", "body": "<p>Say I have three tables in a declarative fashion, <code>Parent</code>, <code>Child</code>, and <code>Pet</code>, in such way that</p>\n\n<ul>\n<li><code>Parent</code> has a many-to-many relationship with both <code>Child</code> and <code>Pet</code></li>\n<li><code>Child</code> has a one-to-many relationship with <code>Pet</code></li>\n</ul>\n\n<p>The code for them is (using Flask-SQLAlchemy, although I believe the solution lives in the realm of SQLAlchemy rather than in Flask).</p>\n\n<pre><code>class Parent(db.Model):\n    __tablename__ = 'parents'\n\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(64))\n\n    # many to many relationship between parent and children\n    # my case allows for a children to have many parents. Don't ask.\n    children = db.relationship('Child',\n                           secondary=parents_children_relationship,\n                           backref=db.backref('parents', lazy='dynamic'),\n                           lazy='dynamic')\n\n    # many to many relationship between parents and pets\n    pets = db.relationship('Pet',\n                             secondary=users_pets_relationship,\n                             backref=db.backref('parents', lazy='dynamic'), #\n                             lazy='dynamic')\n\n# many to many relationship between parents and children\nparents_children_relationship = db.Table('parents_children_relationship',\n    db.Column('parent_id', db.Integer, db.ForeignKey('parents.id')),\n    db.Column('child_id', db.Integer, db.ForeignKey('children.id')),\n    UniqueConstraint('parent_id', 'child_id'))\n\n# many to many relationship between User and Pet \nusers_pets_relationship = db.Table('users_pets_relationship', \n    db.Column('parent_id', db.Integer, db.ForeignKey('parents.id')), \n    db.Column('pet_id', db.Integer, db.ForeignKey('pets.id')),\n    UniqueConstraint('parent_id', 'pet_id'))\n\nclass Child(db.Model):\n    __tablename__ = 'children'\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(64))\n    # parents = &lt;backref relationship with User model&gt;\n\n    # one to many relationship with pets\n    pets = db.relationship('Pet', backref='child', lazy='dynamic')\n\n\nclass Pet(db.Model):\n    __tablename__ = 'pets'\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(64))\n    # child = backref relationship with cities\n    child_id = db.Column(db.Integer, db.ForeignKey('children.id'), nullable=True)\n    # parents = &lt;relationship backref from User&gt;\n</code></pre>\n\n<p>I would like to do something like this</p>\n\n<pre><code>parent_a = Parent()    \nchild_a = Child()\npet_a = Pet()\n</code></pre>\n\n<p>I can then do this</p>\n\n<pre><code>parent_a.children.append(child_a)\n# commit/persist data\nparent_a.children.all() # [child_a]\n</code></pre>\n\n<p>I would like to achieve something like this</p>\n\n<pre><code>child_a.pets.append(pet_a)\nparent_a.children.append(child_a)\n# commit/persist data\nparent_a.children.all() # [child_a]\nparent_a.pets.all() # [pet_a], because pet_a gets \n                    # automatically added to parent using some sorcery\n                    # like for child in parent_a.children.all():\n                    #     parent.pets.append(child.pets.all())\n                    # or something like that.\n</code></pre>\n\n<p>I can achieve this with a method in the <code>Parent</code> object like <code>add_child_and_its_pets()</code>, but I would like to override the way relationship works, so I don't need to override other modules that may benefit from this behaviour, like <code>Flask-Admin</code> for instance.</p>\n\n<p>Basically how should I override the <code>backref.append</code> method or the <code>relationship.append</code> method to also append other objects from other relationships at call time i.e. on the python side? How should I override the <code>remove</code> methods as well?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 1439, "user_id": 2667066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7d58d42f44cda6559fb14a75145a53?s=128&d=identicon&r=PG", "display_name": "user2667066", "link": "https://stackoverflow.com/users/2667066/user2667066"}, "edited": false, "score": 0, "creation_date": 1524691208, "post_id": 50031290, "comment_id": 87079101, "body": "This seems to be a particular problem if multiple chrome applications are running (if, for example, I run this script twice without calling browser.close() between them. But it still manifests itself without, most of the time,"}, {"owner": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 1, "creation_date": 1524700876, "post_id": 50031290, "comment_id": 87081924, "body": "To &quot;reset&quot; the browser, have you tried calling <code>browser.quit()</code> followed by <code>browser = webdriver.Chrome()</code>?"}, {"owner": {"reputation": 1439, "user_id": 2667066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7d58d42f44cda6559fb14a75145a53?s=128&d=identicon&r=PG", "display_name": "user2667066", "link": "https://stackoverflow.com/users/2667066/user2667066"}, "reply_to_user": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1524728395, "post_id": 50031290, "comment_id": 87090877, "body": "@SIKing: thanks, I can indeed do that, but since in my real code this is being done in a recursive way, the outer code then loses track of the selenium session, which makes it a bit complicated, so I wanted to triage before going down that route. Another option would be to open a new window before .get()ing the pages, then closing the window if it hangs."}], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 2667066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7d58d42f44cda6559fb14a75145a53?s=128&d=identicon&r=PG", "display_name": "user2667066", "link": "https://stackoverflow.com/users/2667066/user2667066"}, "edited": false, "score": 0, "creation_date": 1524760544, "post_id": 50043059, "comment_id": 87112177, "body": "Thanks a lot for this, especially the options. I realise that 10 seconds may be too little for some pages - and I&#39;m happy about this causing a TimeoutException. What I&#39;m not so happy about is the fact that on my setup, all future pages also result in a TimeoutException. But since you aren&#39;t getting this, I suspect it is some weirdness in my chrome version. I don&#39;t want to quit() but opening 2 windows and closing the stalled one seems to work in my case, so I&#39;m doing that."}, {"owner": {"reputation": 1439, "user_id": 2667066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7d58d42f44cda6559fb14a75145a53?s=128&d=identicon&r=PG", "display_name": "user2667066", "link": "https://stackoverflow.com/users/2667066/user2667066"}, "edited": false, "score": 0, "creation_date": 1524761768, "post_id": 50043059, "comment_id": 87112876, "body": "Thanks, I&#39;m not sure this is quite &quot;the Answer&quot;, because I still get the pathological behaviour (that is, not the initial timeout on a slow loading page, but the following ones on fast loading pages) even when setting the options you recommended: I suspect a chrome/selenium bug. But I&#39;ll vote up the answer."}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1564440875, "post_id": 50043059, "comment_id": 101023697, "body": "This didn&#39;t work for me either... I&#39;ve tried using different chrome driver versions as well.."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1524775593, "last_edit_date": 1524775593, "creation_date": 1524745840, "answer_id": 50043059, "question_id": 50031290, "link": "https://stackoverflow.com/questions/50031290/how-to-get-a-new-page-after-selenium-times-out-on-indefinitely-loading-page/50043059#50043059", "title": "How to get a new page after selenium times out on indefinitely loading page", "body": "<p>As per your question and your own code block I have executed your own code tweaking a few <em>ChromeDriver</em> settings through the <strong>chrome.options</strong> class as below and it works <strong>perfecto</strong> :</p>\n\n<p>Code Block :</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.common.exceptions import TimeoutException\n\noptions = Options()\n\noptions.add_argument(\"start-maximized\")\noptions.add_argument(\"disable-infobars\")\noptions.add_argument(\"--disable-extensions\")\nbrowser = webdriver.Chrome(chrome_options=options, executable_path=r'C:\\Utility\\BrowserDrivers\\chromedriver.exe')\nbrowser.set_page_load_timeout(10)\n\nfor link in (\"http://www.google.com\", \"http://coastalpathogens.wordpress.com/2012/11/25/onezoom/\",\"http://www.google.com\"):\n    try:\n        print(\"getting {}\".format(link))\n        browser.get(link)\n        print(\"done!\")\n    except TimeoutException:\n        print(\"Timed out\")\n    continue\n</code></pre>\n\n<p>Console Output :</p>\n\n<pre><code>getting http://www.google.com\ndone!\ngetting http://coastalpathogens.wordpress.com/2012/11/25/onezoom/\ndone!\ngetting http://www.google.com\ndone!\n</code></pre>\n\n<h2>Issue at your end and the solution</h2>\n\n<p>There are a couple of things which you need to consider as follows :</p>\n\n<ul>\n<li>Until and unless your <em>usecase</em> have a constraint on <em>Page Load Timeout</em> you must not use <code>set_page_load_timeout()</code> as on slow networks, while invoking urls e.g. <code>http://coastalpathogens.wordpress.com/2012/11/25/onezoom/</code> the <em>Browser Client</em> may require more then <strong>10 seconds</strong> (i.e. the configured time through <code>set_page_load_timeout(10)</code>) to send <code>document.readyState equal to \"complete\"</code> to <em>Selenium</em>.</li>\n<li><p>If your <em>usecase</em> have a dependency on <em>Page Load Timeout</em>, catch the exception and invoke <code>quit()</code> to shutdown gracefully as follows :</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Chrome(executable_path=r'C:\\path\\to\\chromedriver.exe')\ndriver.set_page_load_timeout(2)\ntry :\n    driver.get(\"https://www.booking.com/hotel/in/the-taj-mahal-palace-tower.html?label=gen173nr-1FCAEoggJCAlhYSDNiBW5vcmVmaGyIAQGYATG4AQbIAQzYAQHoAQH4AQKSAgF5qAID;sid=338ad58d8e83c71e6aa78c67a2996616;dest_id=-2092174;dest_type=city;dist=0;group_adults=2;hip_dst=1;hpos=1;room1=A%2CA;sb_price_type=total;srfid=ccd41231d2f37b82d695970f081412152a59586aX1;srpvid=c71751e539ea01ce;type=total;ucfs=1&amp;#hotelTmpl\")\n    print(\"URL successfully Accessed\")\n    driver.quit()\nexcept :\n    print(\"Page load Timeout Occured. Quiting !!!\")\n    driver.quit()\n</code></pre></li>\n<li><p>Console Output :</p>\n\n<pre><code>Page load Timeout Occured. Quiting !!!\n</code></pre>\n\n<p>You can find a detailed discussion on <code>set_page_load_timeout()</code> in <a href=\"https://stackoverflow.com/questions/47694922/how-to-set-the-timeout-of-driver-get-for-python-selenium-3-8-0/47695227#47695227\"><strong>How to set the timeout of 'driver.get' for python selenium 3.8.0?</strong></a></p></li>\n<li><p>Consider replacing the usage of <code>implicitly_wait()</code> by <a href=\"https://stackoverflow.com/questions/45712431/replace-implicit-wait-with-explicit-wait-selenium-webdriver-java/45715759#45715759\">ExplicitWait</a>. Modern websites uses <em>JavaScript</em>, <em>Ajax Calls</em> and <em>React Native</em> where <em>WebDriverWait</em> will come into play and you can't mix up <code>implicitly_wait()</code> with <code>WebDriverWait()</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 1439, "user_id": 2667066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb7d58d42f44cda6559fb14a75145a53?s=128&d=identicon&r=PG", "display_name": "user2667066", "link": "https://stackoverflow.com/users/2667066/user2667066"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1780, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1524775593, "creation_date": 1524690087, "last_edit_date": 1524746359, "question_id": 50031290, "link": "https://stackoverflow.com/questions/50031290/how-to-get-a-new-page-after-selenium-times-out-on-indefinitely-loading-page", "title": "How to get a new page after selenium times out on indefinitely loading page", "body": "<p>I've come across a problematic page that causes Selenium Chrome (selenium version 3.10.0 in python 3, chromedriver Version 2.35.528157) on MacOSX to time out, I think because there is something indefinitely loading on the page. The problem is that after that timeout, all future requests to the driver to .get() a new url also fail with a timeout, even if they worked before. In fact, observing the browser it is never sent to the new url. This, of course, renders the browser useless for further sessions. </p>\n\n<p>How can I \"reset\" the driver so that I can carry on using it? Or failing that, how can I debug why the .get() command doesn't seem to work after visiting the problematic page. The code and my output are below (problematic page is <code>http://coastalpathogens.wordpress.com/2012/11/25/onezoom/</code>: I'd be interested if other people see the same thing, and with other pages too</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.common.exceptions import TimeoutException\n\nbrowser = webdriver.Chrome()\nbrowser.set_page_load_timeout(10)\nbrowser.implicitly_wait(1)\n\nfor link in (\"http://www.google.com\", \"http://coastalpathogens.wordpress.com/2012/11/25/onezoom/\",\"http://www.google.com\"):\n    try:\n        print(\"getting {}\".format(link))\n        browser.get(link)\n        print(\"done!\")\n    except TimeoutException:\n        print(\"Timed out\")\n        continue\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>getting http://www.google.com\ndone!\ngetting http://coastalpathogens.wordpress.com/2012/11/25/onezoom/\nTimed out\ngetting http://www.google.com\nTimed out\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "if-statement", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 3, "last_activity_date": 1524690229, "creation_date": 1524690229, "answer_id": 50031316, "question_id": 50031277, "link": "https://stackoverflow.com/questions/50031277/nested-if-statements-with-loc-in-pandas-python/50031316#50031316", "title": "Nested if statements with .loc in pandas / python", "body": "<p>Use separate assignments. You have different conditions to filter on, you can combine the <code>address</code> and the two <code>name*</code> filters with <code>&amp;</code> (but put parentheses around each test):</p>\n\n<pre><code>df1.loc[(df1.Address.isin(['NJ'])) &amp; (df1.name1 isin ('john', 'bob')), 'name1'] = 'N/A'\ndf1.loc[(df1.Address.isin(['NJ'])) &amp; (df1.name2 isin ('mayer', 'dylan')), 'name2'] = 'N/A'\n</code></pre>\n\n<p>You can always store the boolean filters in a variable first:</p>\n\n<pre><code>nj_address = df1.Address.isin(['NJ'])\nname1_filter = df1.name1 isin ('john', 'bob')\nname2_filter = df1.name2 isin ('mayer', 'dylan')\ndf1.loc[nj_address &amp; name1_filter, 'name1'] = 'N/A'\ndf1.loc[nj_address &amp; name2_filter, 'name2'] = 'N/A'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 3, "last_activity_date": 1524700378, "creation_date": 1524700378, "answer_id": 50032861, "question_id": 50031277, "link": "https://stackoverflow.com/questions/50031277/nested-if-statements-with-loc-in-pandas-python/50032861#50032861", "title": "Nested if statements with .loc in pandas / python", "body": "<p>Separate assignments, <a href=\"https://stackoverflow.com/a/50031316/9209546\">as shown</a> by @MartijnPeiters, are a good idea for a small number of conditions.</p>\n\n<p>For a large number of conditions, consider using <code>numpy.select</code> to separate your conditions and choices. This should make your code more readable and easier to maintain.</p>\n\n<p>For example:</p>\n\n<pre><code>import pandas as pd, numpy as np\n\ndf = pd.DataFrame({'address': ['NY', 'CA', 'NJ', 'NY', 'WS'],\n                   'name1': ['john', 'mayer', 'dylan', 'bob', 'mary'],\n                   'name2': ['mayer', 'dylan', 'mayer', 'bob', 'bob']})\n\naddress_mask = df['address'].isin(('NJ', 'NY'))\n\nconditions = [address_mask &amp; df['name1'].isin(('john', 'bob')),\n              address_mask &amp; df['name2'].isin(('mayer', 'dylan'))]\n\nchoices = ['Option 1', 'Option 2']\n\ndf['result'] = np.select(conditions, choices)\n\nprint(df)\n\n  address  name1  name2    result\n0      NY   john  mayer  Option 1\n1      CA  mayer  dylan         0\n2      NJ  dylan  mayer  Option 2\n3      NY    bob    bob  Option 1\n4      WS   mary    bob         0\n</code></pre>\n"}], "owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4438, "favorite_count": 2, "accepted_answer_id": 50032861, "answer_count": 2, "score": 5, "last_activity_date": 1524761627, "creation_date": 1524690025, "last_edit_date": 1524761627, "question_id": 50031277, "link": "https://stackoverflow.com/questions/50031277/nested-if-statements-with-loc-in-pandas-python", "title": "Nested if statements with .loc in pandas / python", "body": "<p>I am using if in a conditional statement like the below code. If address is NJ then the value of name column is changed to 'N/A'.</p>\n\n<pre><code>df1.loc[df1.Address.isin(['NJ']), 'name'] = 'N/A'\n</code></pre>\n\n<p>How do I do the same, if I have 'nested if statements' like below?</p>\n\n<pre><code># this not code just representing the logic\nif address isin ('NJ', 'NY'):\n    if name1 isin ('john', 'bob'):\n        name1 = 'N/A' \n    if name2 isin ('mayer', 'dylan'):\n        name2 = 'N/A'\n</code></pre>\n\n<p>Can I achieve above logic using <code>df.loc</code>? Or is there any other way to do it?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1524690131, "post_id": 50031264, "comment_id": 87078629, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1524690201, "post_id": 50031264, "comment_id": 87078659, "body": "What are you trying to do?  Your terminology doesn&#39;t match the code you posted, and that code is unclear."}, {"owner": {"reputation": 7598, "user_id": 2842884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093fa30f7d60dbe70075149dbdfe4583?s=128&d=identicon&r=PG&f=1", "display_name": "bosnjak", "link": "https://stackoverflow.com/users/2842884/bosnjak"}, "edited": false, "score": 0, "creation_date": 1524690285, "post_id": 50031264, "comment_id": 87078695, "body": "I have fixed the question for you John, hopefully that&#39;s what you&#39;re trying to ask. The answers are already available below"}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 2, "last_activity_date": 1524690138, "creation_date": 1524690138, "answer_id": 50031297, "question_id": 50031264, "link": "https://stackoverflow.com/questions/50031264/how-to-call-a-python-class-instance-from-a-list/50031297#50031297", "title": "How to call a Python class instance from a list?", "body": "<p>Dynamic attribute access in Python is provided with the built-in function <a href=\"https://docs.python.org/3/library/functions.html#getattr\" rel=\"nofollow noreferrer\"><code>getattr</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; getattr(x, list_[1])\n'2'\n&gt;&gt;&gt; [getattr(x, name) for name in list_]\n['1', '2']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7598, "user_id": 2842884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093fa30f7d60dbe70075149dbdfe4583?s=128&d=identicon&r=PG&f=1", "display_name": "bosnjak", "link": "https://stackoverflow.com/users/2842884/bosnjak"}, "is_accepted": true, "score": 1, "last_activity_date": 1524690150, "creation_date": 1524690150, "answer_id": 50031299, "question_id": 50031264, "link": "https://stackoverflow.com/questions/50031264/how-to-call-a-python-class-instance-from-a-list/50031299#50031299", "title": "How to call a Python class instance from a list?", "body": "<p>If you are trying to access object properties by their name, try this:</p>\n\n<pre><code>list = ['one', 'two']\nprint getattr(x, list[1])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 1, "last_activity_date": 1524690153, "creation_date": 1524690153, "answer_id": 50031300, "question_id": 50031264, "link": "https://stackoverflow.com/questions/50031264/how-to-call-a-python-class-instance-from-a-list/50031300#50031300", "title": "How to call a Python class instance from a list?", "body": "<p>You want the <code>getattr</code> function:</p>\n\n<pre><code>getattr(x, list[1])\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 5203117, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4ZwHt.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5203117/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1524690404, "accepted_answer_id": 50031299, "answer_count": 3, "score": 1, "last_activity_date": 1524693701, "creation_date": 1524689966, "last_edit_date": 1524693701, "question_id": 50031264, "link": "https://stackoverflow.com/questions/50031264/how-to-call-a-python-class-instance-from-a-list", "closed_reason": "Duplicate", "title": "How to call a Python class instance from a list?", "body": "<p>I would like to be able to select the class' property by it's name. This is my code:</p>\n\n<pre><code>class example(object):\n    def __init__(self):\n        self.one = \"1\"\n        self.two = \"2\"\n\nx = example()\nlist = [\"one\", \"two\"]\n# I want to get x.one here by referring to it by list[0]\n</code></pre>\n\n<p>How can I do this?</p>\n\n<p>Worked example:</p>\n\n<pre><code>class example(object):\n    def __init__(self):\n        self.one = \"one\"\n        self.two = \"two\"\n\n    def test(self):\n        list = [\"one\", \"two\"]\n        print(getattr(self, list[1]))\n\nx = example()\n\nx.test()\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 2, "creation_date": 1524689825, "post_id": 50031206, "comment_id": 87078470, "body": "Perhaps OP thinks that <code>break</code> ends the entire program, rather than just the for loop."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1524690540, "post_id": 50031206, "comment_id": 87078802, "body": "This works perfectly, but leads to a bit of weirdness when used as a general solution. What if the arbitrary sequence (and mapping) you&#39;re decoding allows for the sequence <code>&quot;Invalid Input&quot;</code> to be a valid result? It makes more sense to me to use exception handling for this, but YMMV :)"}, {"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 2, "creation_date": 1524690762, "post_id": 50031206, "comment_id": 87078893, "body": "@AdamSmith if i was using this in a business or research setting i&#39;d probably go with something else, but this seems to be more of a learning programming assignment, and a simple misunderstanding of how the break/printing works in the program. My solution was more towards helping OP learn then providing the best solution. Your solution and bphi&#39;s solution are both better from a technical stand point"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1524690839, "post_id": 50031206, "comment_id": 87078925, "body": "@GrantWilliams agreed, and there&#39;s certainly nothing wrong with doing it your way in Python! :)"}], "tags": [], "owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "is_accepted": true, "score": 6, "last_activity_date": 1524689710, "creation_date": 1524689710, "answer_id": 50031206, "question_id": 50031180, "link": "https://stackoverflow.com/questions/50031180/dna-to-rna-transcription-code-in-python-3-6-failing-acgtxxxcttaa-test/50031206#50031206", "title": "DNA to RNA Transcription code in Python 3.6 failing &#39;ACGTXXXCTTAA&#39; test", "body": "<p>You always print new so instead using <code>print(\"Invalid Input\")</code> you can simply change the value of new to 'Invalid Input' and print. That should fix your problem!</p>\n\n<pre><code>dna = input()\nnew = \"\"\n\nfor i in dna:\n    if i not in 'ATGC':\n        new = \"Invalid Input\"\n        break\n    if i == 'A':\n        new += 'U'\n    elif i == 'C':\n        new += 'G'\n    elif i == 'T':\n        new += 'A'\n    else:\n        new += 'C'\n\nprint(new)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2890, "user_id": 4027688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87fcbc5d23f768c0aa1c7b0f716feafb?s=128&d=identicon&r=PG&f=1", "display_name": "bphi", "link": "https://stackoverflow.com/users/4027688/bphi"}, "is_accepted": false, "score": 2, "last_activity_date": 1524690009, "creation_date": 1524690009, "answer_id": 50031270, "question_id": 50031180, "link": "https://stackoverflow.com/questions/50031180/dna-to-rna-transcription-code-in-python-3-6-failing-acgtxxxcttaa-test/50031270#50031270", "title": "DNA to RNA Transcription code in Python 3.6 failing &#39;ACGTXXXCTTAA&#39; test", "body": "<p>You could try something like this for brevity and clarity</p>\n\n<pre><code>DNA_TO_RNA_MAP = {'G': 'C', 'C': 'G', 'T': 'A', 'A': 'U'}\n\ndna = input()\n\nif any(base not in DNA_TO_RNA_MAP.keys() for base in dna):\n    print('Invalid Input')\nelse: \n    print(''.join(DNA_TO_RNA_MAP[base] for base in dna))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 4, "last_activity_date": 1524690434, "last_edit_date": 1524690434, "creation_date": 1524690023, "answer_id": 50031275, "question_id": 50031180, "link": "https://stackoverflow.com/questions/50031180/dna-to-rna-transcription-code-in-python-3-6-failing-acgtxxxcttaa-test/50031275#50031275", "title": "DNA to RNA Transcription code in Python 3.6 failing &#39;ACGTXXXCTTAA&#39; test", "body": "<p>This is a neat problem because it introduces so many concepts at once! Your direct problem is that even when you throw the <code>Invalid Input</code> error, you still print <code>new</code> which is the partially transcribed sequence. To fix that, you could have your error handling code throw an exception, or simply blank out the result. I would probably turn this into a function and throw an exception.</p>\n\n<pre><code>def dna_to_rna(dna):\n    acc = []\n    for ch in dna:\n        if ch not in 'ATGC':\n            raise ValueError(\"Invalid Input\")\n        if ch == 'A':\n            acc.append('U')\n        # ... and etc for each alternation\n    return ''.join(acc)  # return the correct complete sequence\n                         # only after all characters are processed\n\ntry:\n    result = dna_to_rna(whatever_sequence)\nexcept ValueError as e:\n    print(e)\n</code></pre>\n\n<p>However this is also a great case to use a dictionary for lookups, rather than a big long <code>if/elif/else</code> block</p>\n\n<pre><code>mapping = {'A': 'U',\n           'C': 'G',\n           'T', 'A',\n           'G', 'C'}\ntry:\n    result = ''.join([mapping.get(ch) for ch in dna])\nexcept TypeError:\n    # if any member of `dna` is not ATCG, it will try to `''.join` over\n    # a None value, which throws a TypeError\n    print(\"Invalid Input\")\nelse:\n    print(result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12809209, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d3a388c59e60f03dde8b70e55f6b0037?s=128&d=identicon&r=PG", "display_name": "ABHIRUP ROY", "link": "https://stackoverflow.com/users/12809209/abhirup-roy"}, "is_accepted": false, "score": 0, "last_activity_date": 1580330433, "creation_date": 1580330433, "answer_id": 59975227, "question_id": 50031180, "link": "https://stackoverflow.com/questions/50031180/dna-to-rna-transcription-code-in-python-3-6-failing-acgtxxxcttaa-test/59975227#59975227", "title": "DNA to RNA Transcription code in Python 3.6 failing &#39;ACGTXXXCTTAA&#39; test", "body": "<pre><code>b=input()\na=\"GCTA\"\nc=\"CGAU\"\ntry:print(''.join([c[a.index(i)]for i in b]))\nexcept:print(\"Invalid Input\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1886, "user_id": 5527075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef879760061aaa53884ab1ee19fe9589?s=128&d=identicon&r=PG&f=1", "display_name": "Feathercrown", "link": "https://stackoverflow.com/users/5527075/feathercrown"}, "edited": false, "score": 0, "creation_date": 1612389096, "post_id": 66032484, "comment_id": 116755483, "body": "Good code! Consider adding an explanation of how it works and what the main difference is between your code and theirs that fixes their issue."}], "tags": [], "owner": {"reputation": 11, "user_id": 15139377, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1e5433def246c23e4184958d972ba781?s=128&d=identicon&r=PG", "display_name": "Abhilash M", "link": "https://stackoverflow.com/users/15139377/abhilash-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1612372872, "last_edit_date": 1612372872, "creation_date": 1612372779, "answer_id": 66032484, "question_id": 50031180, "link": "https://stackoverflow.com/questions/50031180/dna-to-rna-transcription-code-in-python-3-6-failing-acgtxxxcttaa-test/66032484#66032484", "title": "DNA to RNA Transcription code in Python 3.6 failing &#39;ACGTXXXCTTAA&#39; test", "body": "<pre><code>new = ''\ndna = input()\n\nfor i in dna:\n    if i not in &quot;GCTA&quot;:\n        print('Invalid Input')\n        break\nelse:\n    for j in dna:\n        if j == 'G':\n            new += 'C'\n        elif j == 'C':\n            new +='G'\n        elif j == 'T':\n            new +='A'\n        elif j == 'A':\n            new +='U'\n        else:\n            print(&quot;Invalid Input&quot;)\nprint(new)\n</code></pre>\n"}], "owner": {"reputation": 659, "user_id": 7338544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DWwSB.jpg?s=128&g=1", "display_name": "Bikramjeet Singh", "link": "https://stackoverflow.com/users/7338544/bikramjeet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3243, "favorite_count": 0, "accepted_answer_id": 50031206, "answer_count": 5, "score": 0, "last_activity_date": 1612372872, "creation_date": 1524689581, "question_id": 50031180, "link": "https://stackoverflow.com/questions/50031180/dna-to-rna-transcription-code-in-python-3-6-failing-acgtxxxcttaa-test", "title": "DNA to RNA Transcription code in Python 3.6 failing &#39;ACGTXXXCTTAA&#39; test", "body": "<p>I am trying to solve DNA to RNA Transcription problem but my code is unable to pass this test case: <code>ACGTXXXCTTAA</code></p>\n\n<p>The transcription should be as follows:</p>\n\n<pre><code>G --&gt; C\n\nC --&gt; G\n\nT --&gt; A\n\nA --&gt; U\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>dna = input()\nnew = \"\"\n\nfor i in dna:\n    if i not in 'ATGC':\n        print(\"Invalid Input\")\n        break\n    if i == 'A':\n        new += 'U'\n    elif i == 'C':\n        new += 'G'\n    elif i == 'T':\n        new += 'A'\n    else:\n        new += 'C'\n\nprint(new)\n</code></pre>\n\n<p>This code passes all tests except aforementioned one. The correct output should be:</p>\n\n<pre><code>Invalid Input\n</code></pre>\n\n<p>The output my code gives:</p>\n\n<pre><code>Invalid Input\nUGCA\n</code></pre>\n\n<p>I have tried many iterations but I cannot get rid of <code>UGCA</code>. Even though I use <code>break</code> to get out of the loop in case of any <code>Invalid Input</code> the code is able to transcribe <code>ACGT</code> before <code>XXX</code> and print the result when it should just output <code>Invalid Input</code>.</p>\n\n<p>Can anyone see what I am missing?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "edited": false, "score": 5, "creation_date": 1524689534, "post_id": 50031134, "comment_id": 87078343, "body": "You need to <code>print(s.list)</code>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 8, "creation_date": 1524689616, "post_id": 50031134, "comment_id": 87078373, "body": "So what did you expect to happen instead? If nothing happens, <i>your code ran without errors</i>. You don&#39;t have any print calls in your code so no output will be produced."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1524690365, "post_id": 50031134, "comment_id": 87078739, "body": "You don&#39;t need any of those imports for this question."}, {"owner": {"reputation": 63, "user_id": 7011841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906c86d910f94445d9a8f2b56ebf7946?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/7011841/reza"}, "edited": false, "score": 0, "creation_date": 1524838121, "post_id": 50031134, "comment_id": 87145020, "body": "thank u all!  what Kpie said worked. I had used print(s) but it didn&#39;t work"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7011841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906c86d910f94445d9a8f2b56ebf7946?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/7011841/reza"}, "edited": false, "score": 0, "creation_date": 1524838723, "post_id": 50031238, "comment_id": 87145425, "body": "thanks for the reply!  print(s.list) worked but with what u said an error happened:                                                                                               Traceback (most recent call last):   File &quot;D:\\AI\\proj1\\myexample.py&quot;, line 27, in &lt;module&gt;     s.printObj() AttributeError: Stack instance has no attribute &#39;printObj&#39;"}, {"owner": {"reputation": 463, "user_id": 9034823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3y2sd.jpg?s=128&g=1", "display_name": "NBlaine", "link": "https://stackoverflow.com/users/9034823/nblaine"}, "reply_to_user": {"reputation": 63, "user_id": 7011841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906c86d910f94445d9a8f2b56ebf7946?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/7011841/reza"}, "edited": false, "score": 1, "creation_date": 1524838986, "post_id": 50031238, "comment_id": 87145608, "body": "did you add the <code>def printObj(self):</code> method to your class? What looks to be happening is your <code>Stack</code> object is not recognizing the method - either its not defined or there is a scoping issue"}, {"owner": {"reputation": 63, "user_id": 7011841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906c86d910f94445d9a8f2b56ebf7946?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/7011841/reza"}, "edited": false, "score": 0, "creation_date": 1524839889, "post_id": 50031238, "comment_id": 87146157, "body": "sorry! i had just forgot to define the func. u were right!"}], "tags": [], "owner": {"reputation": 463, "user_id": 9034823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3y2sd.jpg?s=128&g=1", "display_name": "NBlaine", "link": "https://stackoverflow.com/users/9034823/nblaine"}, "is_accepted": true, "score": 1, "last_activity_date": 1524689857, "creation_date": 1524689857, "answer_id": 50031238, "question_id": 50031134, "link": "https://stackoverflow.com/questions/50031134/how-can-i-cope-with-classes-in-python/50031238#50031238", "title": "how can i cope with classes in python?", "body": "<pre><code>import sys\nimport inspect\nimport heapq\nimport random\n\nclass Stack():\n\n  \"A container with a last-in-first-out (LIFO) queuing policy.\"\n\n  def __init__(self,list=[]):\n   self.list =list\n  def push(self, item):\n    print(\"Push 'item' onto the stack\")\n    return self.list.append(item)\n\n  def pop(self):\n    print(\"Pop the most recently pushed item from the stack\")\n    return self.list.pop()\n\n  def printObj(self):\n    print(\"Printing stackObj: \")\n    for x in self.list:\n      print(x)\n\ns=Stack([6,7])\n\ns.push(5)\ns.printObj()\n</code></pre>\n\n<p>As far as I can tell it is doing what you want, you just forgot your <code>prints</code> :)</p>\n"}, {"tags": [], "owner": {"reputation": 1646, "user_id": 9655255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFPJb.jpg?s=128&g=1", "display_name": "TwistedSim", "link": "https://stackoverflow.com/users/9655255/twistedsim"}, "is_accepted": false, "score": 2, "last_activity_date": 1524689900, "creation_date": 1524689900, "answer_id": 50031251, "question_id": 50031134, "link": "https://stackoverflow.com/questions/50031134/how-can-i-cope-with-classes-in-python/50031251#50031251", "title": "how can i cope with classes in python?", "body": "<p>Your code is <em>almost</em> fine. You just need to print something to see a result!</p>\n\n<p>I just want to point you a pretty nasty error that you have. You are using a mutating type as default parameter! Look at this example:</p>\n\n<pre><code>s=Stack()\ns.push(1)\ns2=Stack()\nprint(s2.list) # should be empty\n</code></pre>\n\n<p>This code actually print <code>[1]</code> ! Please read this <a href=\"http://docs.python-guide.org/en/latest/writing/gotchas/\" rel=\"nofollow noreferrer\">article</a> for more information.</p>\n"}], "owner": {"reputation": 63, "user_id": 7011841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906c86d910f94445d9a8f2b56ebf7946?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/7011841/reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 50031238, "answer_count": 2, "score": -1, "last_activity_date": 1524759288, "creation_date": 1524689383, "last_edit_date": 1524759288, "question_id": 50031134, "link": "https://stackoverflow.com/questions/50031134/how-can-i-cope-with-classes-in-python", "title": "how can i cope with classes in python?", "body": "<p>I don't know what is wrong here that when I run the code nothing happens! here is the code:</p>\n\n<pre><code>class Stack():\n    \"A container with a last-in-first-out (LIFO) queuing policy.\"\n\n    def __init__(self,list=[]):\n        self.list =list\n\n    def push(self, item):\n        \"Push 'item' onto the stack\"\n        return self.list.append(item)\n\n    def pop(self):\n        \"Pop the most recently pushed item from the stack\"\n        return self.list.pop()\n\ns=Stack([6,7])\n\ns.push(5)\n</code></pre>\n\n<p>I expect to see s is created as a list [6,7] and then 5 is added to it. but nothing happens. what should I do?</p>\n"}, {"tags": ["python", "github", "python-module"], "comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1524689384, "post_id": 50031087, "comment_id": 87078272, "body": "Have you read the <a href=\"https://packaging.python.org/\" rel=\"nofollow noreferrer\">packaging guide</a>?"}, {"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524689423, "post_id": 50031087, "comment_id": 87078283, "body": "You can upload to Pypi and people can install using pip. <a href=\"http://peterdowns.com/posts/first-time-with-pypi.html\" rel=\"nofollow noreferrer\">Docs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 5164435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e3e28d4afcb775ceb74539e9b059db?s=128&d=identicon&r=PG", "display_name": "Jonathan Beber", "link": "https://stackoverflow.com/users/5164435/jonathan-beber"}, "is_accepted": false, "score": 0, "last_activity_date": 1524689867, "creation_date": 1524689867, "answer_id": 50031240, "question_id": 50031087, "link": "https://stackoverflow.com/questions/50031087/python-modules-efficient-organizing-with-github/50031240#50031240", "title": "Python modules efficient organizing with Github", "body": "<p>Create packages and then upload them to pypi. When someone need to use your code, can install with <code>pip install</code>. If your modules aren't opensource you can create an internal pypi repository.</p>\n\n<p>You can also install modules just referencing the git repository <code>pip install git+git://github.com/jkbr/httpie.git</code>. Look at <a href=\"https://packaging.python.org\" rel=\"nofollow noreferrer\">Python packaging guide</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9700159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ragressive", "link": "https://stackoverflow.com/users/9700159/ragressive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524689867, "creation_date": 1524689157, "question_id": 50031087, "link": "https://stackoverflow.com/questions/50031087/python-modules-efficient-organizing-with-github", "title": "Python modules efficient organizing with Github", "body": "<p>In short, how should I go about updating/organizing Python modules if I want to reuse them in multiple projects and share them on my team's GitHub?</p>\n\n<p>I have a simple Python module with a few functions that I use frequently across different projects, and I also need to share my Jupyter notebooks on GitHub. I use this module there as well. </p>\n\n<p>How do I organize my packages or import them at the beginning of my notebooks so that I store them only in one place and that they're available for people who want to re-run my notebooks on their clone of my code on our GitHub repo? I want to be able to update/add to my module from time to time, and I don't want to have to copy/paste the updated package across my team's different repos and all my local project foldes.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524689382, "post_id": 50031050, "comment_id": 87078271, "body": "If this is working for you, I think it&#39;s fine. If there&#39;s something about it you don&#39;t like, tell us."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1524689726, "post_id": 50031050, "comment_id": 87078431, "body": "The only thing a class would do here, really, is add an extra layer of indirection around your access to <code>measure</code>. In some sense, a module <i>is</i> a class, but one that is, and can be, instantiated only once."}, {"owner": {"reputation": 11, "user_id": 2697712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a81ab2e791c1884c7ec9e1f5a6ef54b?s=128&d=identicon&r=PG&f=1", "display_name": "Mitesh", "link": "https://stackoverflow.com/users/2697712/mitesh"}, "edited": false, "score": 0, "creation_date": 1524759319, "post_id": 50031050, "comment_id": 87111499, "body": "I did end up using a class in profile.py and the __init__() i import the correct module. Its working fine, I thought there maybe a cleaner Object oriented way to have the machineA and machineB be a child class and inherit from the profile.py as abstract class. That way I can create an instance of abstract profile.py class."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2697712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a81ab2e791c1884c7ec9e1f5a6ef54b?s=128&d=identicon&r=PG&f=1", "display_name": "Mitesh", "link": "https://stackoverflow.com/users/2697712/mitesh"}, "edited": false, "score": 0, "creation_date": 1524759447, "post_id": 50031162, "comment_id": 87111566, "body": "Yep thats what I ended up doing. I wanted to actually see if there was a way to use OOP to define a generic Abstract class in profile.py and have the machineA and machineB be child class and implement the methods. Then I would create an instance of the abstract class in the main.py and instantiate based on the machineA or machineB."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1524689502, "creation_date": 1524689502, "answer_id": 50031162, "question_id": 50031050, "link": "https://stackoverflow.com/questions/50031050/python-modules-for-wrapper-functions/50031162#50031162", "title": "Python modules for wrapper functions", "body": "<p>The simple (though hacky) way is to use <code>__import__</code> directly.</p>\n\n<pre><code>measure = __import__(machine).measure\n</code></pre>\n\n<p>Slightly cleaner would be to use the <code>importlib</code> module.</p>\n\n<pre><code>import importlib\nmeasure = importlib.import_module(machine).measure\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 2697712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a81ab2e791c1884c7ec9e1f5a6ef54b?s=128&d=identicon&r=PG&f=1", "display_name": "Mitesh", "link": "https://stackoverflow.com/users/2697712/mitesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524689502, "creation_date": 1524689028, "question_id": 50031050, "link": "https://stackoverflow.com/questions/50031050/python-modules-for-wrapper-functions", "title": "Python modules for wrapper functions", "body": "<p>I am trying to write a generic module that provides functions that act as a wrapper to specific implementation.\nExample, my main.py script will call profile.py functions <code>profile()</code>.  The profile.py will then call either machineA or machineB <code>measure()</code> function depending on the cmd line arg which i pass in. </p>\n\n<pre><code>/main.py\n\n    tools/profile.py  -- # provides function profile\n\n          machineA/measure.py  # provides function measure\n\n          machineB/measure.py # provides function measure\n</code></pre>\n\n<p>Currently my tools/profile.py does this </p>\n\n<pre><code>if machine == 'machineA':\n  from machineA import measure\nelse:\n  from machineB import measure\n\ndef profile():\n  return measure.measure()\n</code></pre>\n\n<p>I am using modules to do this functionality,  I think there maybe a way to do this with classes, however i am not too familiar with classes to know how to get started. Any tips would be appreciated. </p>\n"}, {"tags": ["python", "django"], "owner": {"reputation": 435, "user_id": 1980630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca58bb6fa21acb72f04832fdaec72195?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Vanden Eynde", "link": "https://stackoverflow.com/users/1980630/robert-vanden-eynde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524688846, "creation_date": 1524688846, "question_id": 50031003, "link": "https://stackoverflow.com/questions/50031003/django-multiple-databases-depending-on-models", "title": "Django multiple databases depending on models", "body": "<p>on my site I have a database of projects and each project corresponds to a physical directory on the machine :</p>\n\n<pre><code>class Project(models.Model):\n    path = models.CharField()\n</code></pre>\n\n<p>In my project creation view I do something like :</p>\n\n<pre><code>Project.objects.create(path=p)\nos.mkdir(p)\n</code></pre>\n\n<p>Some external non django app creates one <strong>sqlite db</strong> per per project, each project has the same database structure (<code>{project1.path}/db.sqlite3</code>, <code>{project2.path}/db.sqlite3</code> have the same tables).</p>\n\n<p>I would like to read (and maybe write) from these db using the Django Object Model.</p>\n\n<p>Let's say each sqlite file contains a table <code>cake</code> with 2 columns <code>tastiness, price</code>. I would like to write a </p>\n\n<pre><code>class Cake(models.Model):\n    tastiness = models.Charfield()\n    price = models.IntegerField()\n</code></pre>\n\n<p>Then, I wouldn't do any migrations (the tables would just match) and I could read the db with something like:</p>\n\n<pre><code>p = Project.objects.get(id=5)\nL = Cake.objects.using(p.path + '/db.sqlite').filter(price__gt=10)\n</code></pre>\n\n<p>I've read the article <a href=\"https://docs.djangoproject.com/en/2.0/topics/db/multi-db/\" rel=\"nofollow noreferrer\">on multiple db</a> but that doesn't seem to solve my problem.</p>\n\n<p>Maybe another package than django would do the trick ? I know I could go raw <code>import sqlite3</code> but I would't benefit from the django ORM.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 3319, "user_id": 3181539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f546aff9e2f22d608c5c2b16fe6a55ad?s=128&d=identicon&r=PG", "display_name": "theofpa", "link": "https://stackoverflow.com/users/3181539/theofpa"}, "is_accepted": false, "score": 0, "last_activity_date": 1527253336, "creation_date": 1527253336, "answer_id": 50529881, "question_id": 50030978, "link": "https://stackoverflow.com/questions/50030978/python-boto3-list-instances-in-a-dataframe-windowed/50529881#50529881", "title": "Python Boto3 List Instances in a Dataframe Windowed", "body": "<p>Welcome to the world of Pandas, you'll love the way it performs operations on dataframes without expecting you to iterate over the values. I've changed your parsing a bit, to demonstrate some of it's abilities!</p>\n\n<pre><code>import boto3\nimport pandas as pd\nclient=boto3.client('ec2')\nresponse = client.describe_instances()\ndf=pd.io.json.json_normalize(\n    pd.DataFrame(\n        pd.DataFrame(\n            response['Reservations']\n        )\\\n        .apply(lambda r: r.str[0])\\. # Get only the first element of the list\n        .Instances\\\n        .values\n        )[0]\n    )[['ImageId','InstanceType','Tags']]\ndf['Name']=df.Tags.apply(lambda r: r[0]['Value']) # Get the name from the tags dict\ndf.drop(['Tags'], axis=1, inplace=True)\ndf\n</code></pre>\n\n<p>Will give you:</p>\n\n<pre><code>    ImageId InstanceType Name\n0   ami-123 t2.2xlarge   name1\n1   ami-234 t2.large     name2\n2   ami-345 m5.12xlarge  name3\n</code></pre>\n"}], "owner": {"reputation": 677, "user_id": 9671763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SJjxf3uJ4Vk/AAAAAAAAAAI/AAAAAAAAAAc/kn7QhYit8Jk/photo.jpg?sz=128", "display_name": "Ken J", "link": "https://stackoverflow.com/users/9671763/ken-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527253336, "creation_date": 1524688735, "question_id": 50030978, "link": "https://stackoverflow.com/questions/50030978/python-boto3-list-instances-in-a-dataframe-windowed", "title": "Python Boto3 List Instances in a Dataframe Windowed", "body": "<p>I'm trying to list my EC2 instances in a table with Boto3. </p>\n\n<pre><code>instances = ec2.instances.filter(\n    Filters=[{'Name': 'instance-state-name', 'Values': ['running']}])\ninstance_count = sum(1 for _ in instances.all())\nRunningInstances = []\nfor instance in instances:\n    id = instance.id\n    name = self.get_name_tag(instance)\n    type = instance.instance_type\n    mylist = {\"name\":name,\"id\":id,\"type\":type}\n    RunningInstances.append(mylist.copy())\nimport numpy as np\nimport pandas as pd\ntable = pd.DataFrame.from_dict(RunningInstances)\nprint(table)\n</code></pre>\n\n<p>This creates a table - which is great! My problem is that the columns overflow to another row even when the columns can fit in the current window:</p>\n\n<pre><code>                 id                                           name  \\\n0            i-56b243ge                                       My Really Long Name for my Instance\n1            i-89b789ga                                       My 2nd Really Long Name for my Instance\n\n                 type\n0            t2-micro\n1            t2-small\n</code></pre>\n\n<p>I just learned that Pandas exists today so I haven't quite mastered styling. Keep in mind that the name column header is to the right of the name values - I just can't put it there because of Stack's formatting. How can I get all of a Dataframe/table into a single view? </p>\n"}, {"tags": ["python", "datetime", "timezone-offset"], "comments": [{"owner": {"reputation": 444, "user_id": 1406873, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fd16a65af292f906c56ff0c87006f75?s=128&d=identicon&r=PG", "display_name": "Loisaida Sam Sandberg", "link": "https://stackoverflow.com/users/1406873/loisaida-sam-sandberg"}, "edited": false, "score": 0, "creation_date": 1524773791, "post_id": 50030950, "comment_id": 87118727, "body": "Note: I experience the same result when using <code>America&#47;New_York</code>"}], "owner": {"reputation": 444, "user_id": 1406873, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fd16a65af292f906c56ff0c87006f75?s=128&d=identicon&r=PG", "display_name": "Loisaida Sam Sandberg", "link": "https://stackoverflow.com/users/1406873/loisaida-sam-sandberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1524688638, "creation_date": 1524688638, "question_id": 50030950, "link": "https://stackoverflow.com/questions/50030950/python-convert-hour-from-edt-est-to-utc-based-on-time-of-year", "title": "Python - convert hour from EDT/EST to UTC based on time of year", "body": "<p>Eastern Standard Time is -5 (to UTC)</p>\n\n<p>Eastern Daylight Time is -4 (to UTC)</p>\n\n<p>so why doesn't this work properly?</p>\n\n<pre><code>&gt;&gt;&gt; import datetime, pytz\n\n# 5 hour difference during Eastern Standard Time\n&gt;&gt;&gt; datetime.datetime(2018, 1, 25, 16, 26, tzinfo=pytz.timezone('US/Eastern')).hour\n&gt;&gt;&gt; 16\n\n&gt;&gt;&gt; datetime.datetime(2018, 1, 25, 16, 26, tzinfo=pytz.timezone('US/Eastern')).astimezone(pytz.utc).hour\n&gt;&gt;&gt; 21\n\n# 4 hour difference during Eastern Daylight Time\n&gt;&gt;&gt; datetime.datetime(2018, 4, 25, 16, 26, tzinfo=pytz.timezone('US/Eastern')).hour\n&gt;&gt;&gt; 16\n\n# So why does this not say 20?\n&gt;&gt;&gt; datetime.datetime(2018, 4, 25, 16, 26, tzinfo=pytz.timezone('US/Eastern')).astimezone(pytz.utc).hour\n&gt;&gt;&gt; 21\n</code></pre>\n"}, {"tags": ["python", "mongodb", "unicode", "bson"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1524689324, "post_id": 50030944, "comment_id": 87078244, "body": "Why do you think Unicode keys are a problem? They are not, and you should definitely not encode them to anything."}, {"owner": {"reputation": 766, "user_id": 2440505, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/2a323ac7daf845f815344ea13342b6bd?s=128&d=identicon&r=PG", "display_name": "Christian Dechery", "link": "https://stackoverflow.com/users/2440505/christian-dechery"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1524689918, "post_id": 50030944, "comment_id": 87078523, "body": "I simply want to get rid of the u&#39;&#39; everywhere. I cannot deliver the exported file like this to another departament as it will cause problems for them to import the file."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1524690245, "post_id": 50030944, "comment_id": 87078681, "body": "But the output from Mongodb is not a file. If you want a file, then use a file serialisation format like JSON. That will avoid any need to encode anything."}, {"owner": {"reputation": 766, "user_id": 2440505, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/2a323ac7daf845f815344ea13342b6bd?s=128&d=identicon&r=PG", "display_name": "Christian Dechery", "link": "https://stackoverflow.com/users/2440505/christian-dechery"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1524697808, "post_id": 50030944, "comment_id": 87081207, "body": "Yeah, but HOW? This is exactly what I want. To output it simply as JSON. But even that I couldn&#39;t easily do because of the unicode format of the documents."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1524721561, "post_id": 50030944, "comment_id": 87087189, "body": "Use the built in json library: <code>json.dumps(my_data)</code>. No need to convert any Unicode."}], "answers": [{"tags": [], "owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "is_accepted": false, "score": -1, "last_activity_date": 1524689672, "last_edit_date": 1524689672, "creation_date": 1524689001, "answer_id": 50031045, "question_id": 50030944, "link": "https://stackoverflow.com/questions/50030944/efficient-way-of-dealing-with-mongodb-objects-in-python/50031045#50031045", "title": "Efficient way of dealing with MongoDB objects in Python", "body": "<p>Easy answer: <strong><code>Pickle</code></strong> It is very quick and an easy way to serialize and save any object.</p>\n\n<pre><code>import pickle\n\n# pickle highest performance object conversion into a bytestream \n# used to pickle n unpickle (i.e. save/load)\ndef save(file, filename='file'):\n    with open(f'{filename}.pickle', 'wb') as f:\n        pickle.dump(file, f, protocol=pickle.HIGHEST_PROTOCOL)\n\n\ndef load(filename):\n    with open(f'{filename}.pickle', 'rb') as f:\n        return pickle.load(f) \n</code></pre>\n\n<blockquote>\n  <p>Pickle is unsafe because it constructs arbitrary Python objects by invoking arbitrary functions. </p>\n  \n  <p>Pickle isn\u2019t human readable</p>\n  \n  <p>Pickle isn\u2019t language-agnostic </p>\n  \n  <p>Pickle is slow</p>\n</blockquote>\n\n<p>Downsides Addressed of Pickle: <a href=\"https://stackoverflow.com/a/21752597/6929467\">HERE</a></p>\n"}], "owner": {"reputation": 766, "user_id": 2440505, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/2a323ac7daf845f815344ea13342b6bd?s=128&d=identicon&r=PG", "display_name": "Christian Dechery", "link": "https://stackoverflow.com/users/2440505/christian-dechery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524740744, "creation_date": 1524688622, "last_edit_date": 1524740744, "question_id": 50030944, "link": "https://stackoverflow.com/questions/50030944/efficient-way-of-dealing-with-mongodb-objects-in-python", "title": "Efficient way of dealing with MongoDB objects in Python", "body": "<p>I'm trying to build a very simple MongoDB extraction script but I stumbled upon this problem of most keynames and strings being recorded as <code>unicode</code>.\nSo, when I try to just print a document it comes out with a bunch of keys and values like this <code>u'username':u'christian'</code> etc. </p>\n\n<p>And my documents in this database are rather large and complex, so I have several nested levels.</p>\n\n<p>I searched around a bit to make this conversion from unicode keys and values to ASCII but came up with nothing.</p>\n\n<p>I'm trying to convert all keys and values like so</p>\n\n<pre><code>def convert2ascii:\n    for k, v in mydict.iteritems():\n        newk = k.encode('ascii','ignore')\n        mydict[newk] = mydict.pop(k)\n        if isinstance(v, unicode):\n            mydict[newk] = v.encode('ascii','ignore')\n        elif isinstance(v, dict):\n            convert2ascii(v)\n        #elif isinstance(v, list): // todo\n        #    convert2ascii(v)\n</code></pre>\n\n<p>But I keep running into some uncovered scenario (like a list of dictionaries, or just a plain list of strings) and having to add all of those to to that function, and by now it is rather ugly.</p>\n\n<p>Any ideas on how I can make that simpler?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 2762279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAMoJ.png?s=128&g=1", "display_name": "Amr Keleg", "link": "https://stackoverflow.com/users/2762279/amr-keleg"}, "reply_to_user": {"reputation": 145, "user_id": 5468834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5798f0bd1fe21828e4192704f81bd82a?s=128&d=identicon&r=PG&f=1", "display_name": "M Sanders", "link": "https://stackoverflow.com/users/5468834/m-sanders"}, "edited": false, "score": 0, "creation_date": 1524691669, "post_id": 50031037, "comment_id": 87079287, "body": "As mentioned in the documentation, inner performs an intersection operation between the two dataframe while outer performs a union operation. So, inner join will return a subset of the dataframe that is returned by the outer join."}], "tags": [], "owner": {"reputation": 327, "user_id": 2762279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAMoJ.png?s=128&g=1", "display_name": "Amr Keleg", "link": "https://stackoverflow.com/users/2762279/amr-keleg"}, "is_accepted": true, "score": 0, "last_activity_date": 1524689096, "last_edit_date": 1524689096, "creation_date": 1524688974, "answer_id": 50031037, "question_id": 50030926, "link": "https://stackoverflow.com/questions/50030926/join-merge-not-working-in-python/50031037#50031037", "title": "Join/merge not working in python", "body": "<p>I don't know how your data looks like but all what i know is that the type of join affects how the rows will be formed after the join.</p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.join.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.join.html</a><br></p>\n\n<pre><code>how : {\u2018left\u2019, \u2018right\u2019, \u2018outer\u2019, \u2018inner\u2019}, default: \u2018left\u2019\n\nHow to handle the operation of the two objects.\n\nleft: use calling frame\u2019s index (or column if on is specified)\nright: use other frame\u2019s index\nouter: form union of calling frame\u2019s index (or column if on is specified) with other frame\u2019s index, and sort it lexicographically\ninner: form intersection of calling frame\u2019s index (or column if on is specified) with other frame\u2019s index, preserving the order of the calling\u2019s one\n</code></pre>\n\n<p>Try using <strong>'inner'</strong> join and see if that is what you need.<br>\nThis will only return rows of where <strong>pic_code</strong> is found in both dataframes and having <strong>mpe_wgt</strong>. <br></p>\n\n<p>Additionally make sure that the pic_code has no trailing/leading whitespaces so that similar pic_code from the two dataframes would match.</p>\n"}], "owner": {"reputation": 145, "user_id": 5468834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5798f0bd1fe21828e4192704f81bd82a?s=128&d=identicon&r=PG&f=1", "display_name": "M Sanders", "link": "https://stackoverflow.com/users/5468834/m-sanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 50031037, "answer_count": 1, "score": 0, "last_activity_date": 1524689133, "creation_date": 1524688564, "last_edit_date": 1524689133, "question_id": 50030926, "link": "https://stackoverflow.com/questions/50030926/join-merge-not-working-in-python", "title": "Join/merge not working in python", "body": "<p>Trying to join df61 and df_petsy_gz on pic_code. I've included the data types for the variables also. My code is outputting a bunch of NaN indicating none of the pic_codes match between the two data sets. There are a couple million lines of data so I'm certain there are a bunch of matches. I think I'm doing something wrong.</p>\n\n<pre><code>df61.head(3)\n\n mpe_wgt                        pic_code\n      10  420336479305589843900801597032\n      10  420907139300189843900792911982\n      10  420967449300189843900797682603\n\nmpe_wgt     object\npic_code    object\n\n\ndf_petsy_gz.head(3)\n\nmonthly_fiscal_year  month                        pic_code class_of_mail  \n               2017     11  420606019300189843900566128707            FC   \n               2017     11  420731629300189843900584700299            FC   \n               2017     11  420405029300189843900568579224            FC   \n\n   weight  calc_postage  calc_total_postage  MikeZone  \n   0.8750          4.02                4.02         5  \n   0.3750          2.77                2.77         6  \n   0.6875          3.60                3.60         8 \n\n monthly_fiscal_year      int64\n month                    int64\n pic_code                object\n class_of_mail           object\n weight                 float64\n calc_postage           float64\n calc_total_postage     float64\n MikeZone                 int64\n\n df61_mpe=pd.merge(df_petsy_gz,df61,on='pic_code', how='outer')\n</code></pre>\n\n<p>output</p>\n\n<pre><code>monthly_fiscal_year  month                        pic_code class_of_mail  \\\n             2017.0   11.0  420606019300189843900566128707            FC   \n             2017.0   11.0  420731629300189843900584700299            FC   \n             2017.0   11.0  420405029300189843900568579224            FC   \n             2017.0   11.0  420301349300189843900567382542            FC   \n\n   weight  calc_postage  calc_total_postage  MikeZone mpe_wgt  \n   0.8750          4.02                4.02       5.0     NaN  \n   0.3750          2.77                2.77       6.0     NaN  \n   0.6875          3.60                3.60       8.0     NaN  \n   0.5000          2.77                2.77       4.0     NaN  \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "yaml", "pyyaml"], "comments": [{"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 2, "creation_date": 1524688660, "post_id": 50030819, "comment_id": 87077933, "body": "<code>pod[&quot;spec&quot;] = {&quot;nodeSelector&quot;: {&quot;key&quot;: &quot;val&quot;}}</code> ..."}], "answers": [{"comments": [{"owner": {"reputation": 2335, "user_id": 963182, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/82b8397cc8b711c38b1f1a4dee765af9?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/963182/invictus"}, "edited": false, "score": 1, "creation_date": 1524768009, "post_id": 50034565, "comment_id": 87115960, "body": "Awesome anthon, I actually followed @zwer solution and debugged it for 4 hours on what could be wrong then realized after printing everything."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 4, "last_activity_date": 1553448178, "last_edit_date": 1553448178, "creation_date": 1524714820, "answer_id": 50034565, "question_id": 50030819, "link": "https://stackoverflow.com/questions/50030819/python-how-to-add-a-new-key-and-a-value-in-yaml-file/50034565#50034565", "title": "python: how to add a new key and a value in yaml file", "body": "<p>Once you load that YAML file, your <code>pod</code> is a dict with a single key <code>spec</code>. You can check the value for that key (<code>print(pod['spec']</code>) and you'll see that that is dict, with a single key <code>containers</code>. Since you want add an extra key <code>nodeSelector</code> to that dict you should add to <code>pod['spec']</code>:</p>\n\n<pre><code>pod['spec']['nodeSelector'] = dict(key='value')\n</code></pre>\n\n<p>Please note that the <code>key:value</code> you had in your output (without a space after the <code>:</code> and without quotes around <code>key</code> and <code>value</code>), is not a mapping but a single scalar string.</p>\n\n<hr>\n\n<p>The \"solution\" given by @zwer in his comment: </p>\n\n<p><code>pod[\"spec\"] = {\"nodeSelector\": {\"key\": \"val\"}}</code>\nis incorrect, as it will dump as: </p>\n\n<pre><code>spec:\n  nodeSelector:\n    key: val\n</code></pre>\n\n<p>i.e. replacing the value for <code>spec</code> and thereby deleting the existing dict/mapping with the key <code>containers</code>.</p>\n"}], "owner": {"reputation": 2335, "user_id": 963182, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/82b8397cc8b711c38b1f1a4dee765af9?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/963182/invictus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4531, "favorite_count": 1, "accepted_answer_id": 50034565, "answer_count": 1, "score": 5, "last_activity_date": 1553448178, "creation_date": 1524688074, "last_edit_date": 1524713957, "question_id": 50030819, "link": "https://stackoverflow.com/questions/50030819/python-how-to-add-a-new-key-and-a-value-in-yaml-file", "title": "python: how to add a new key and a value in yaml file", "body": "<p>I have the following YAML file. I need to update the YAML file with a new key-value pair using python.</p>\n\n<p>I am doing the following but, it gives me error:</p>\n\n<pre><code>pod = mylib.load_yaml(\"net/pod.yaml\")\npod['spec']['nodeSelector']['key']='val'\n</code></pre>\n\n<p>it gives error saying <code>KeyError:'nodeSelector'</code></p>\n\n<pre><code>spec:\n  containers:\n  - image: ceridwen/networking:v1\n    imagePullPolicy: Always\n    name: networking\n    readinessProbe:\n      tcpSocket:\n        port: 5000\n      initialDelaySeconds: 5\n      periodSeconds: 1\n    restartPolicy: Always\n</code></pre>\n\n<p>I need to update it with a new key value</p>\n\n<pre><code>spec:\n  containers:\n  - image: ceridwen/networking:v1\n    imagePullPolicy: Always\n    name: networking\n    readinessProbe:\n      tcpSocket:\n        port: 5000\n      initialDelaySeconds: 5\n      periodSeconds: 1\n    restartPolicy: Always\n  nodeSelector:\n    key: value \n</code></pre>\n"}, {"tags": ["python", "beautifulsoup", "web-crawler", "href"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1524687986, "post_id": 50030758, "comment_id": 87077601, "body": "Please indent your code correctly and include the <i>complete</i> error message."}, {"owner": {"reputation": 517, "user_id": 5165095, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8c9a0f900e44d54ac973a40c563fc66d?s=128&d=identicon&r=PG&f=1", "display_name": "Serious Ruffy", "link": "https://stackoverflow.com/users/5165095/serious-ruffy"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1524688520, "post_id": 50030758, "comment_id": 87077867, "body": "@DyZ thats my complete error message"}], "answers": [{"tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": false, "score": 2, "last_activity_date": 1524688856, "creation_date": 1524688856, "answer_id": 50031008, "question_id": 50030758, "link": "https://stackoverflow.com/questions/50030758/how-to-crawl-href-python-beautifulsoup/50031008#50031008", "title": "How to crawl href - Python &amp; beautifulsoup", "body": "<p>Your \"error\" of error code 0 simply indicates that everything went ok with your run. According to your example, your list <code>g_data</code> should contain all of the <code>a</code> tags that you are interested in. You should not need the second for loop to again iterate through and find nested <code>a</code> tags. As a debugging step, print the length of your lists to ensure that they are not empty. See the following:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nuser_agent = {'User-agent': 'Chrome/43.0.2357'}\n\nfor page in range(1,6):\n    r = requests.get(\"https://www.klook.com/city/30-kyoto\" + \"/?p=\" +  str(page))\n    soup = BeautifulSoup(r.content, \"lxml\")\n\n    g_data = soup.find_all(\"a\", {\"class\": \"j_activity_item_link\"})\n    for item in g_data:\n        print(item.get(\"href\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 1, "last_activity_date": 1524690164, "creation_date": 1524690164, "answer_id": 50031303, "question_id": 50030758, "link": "https://stackoverflow.com/questions/50030758/how-to-crawl-href-python-beautifulsoup/50031303#50031303", "title": "How to crawl href - Python &amp; beautifulsoup", "body": "<p>You can first find the number of pages of activities, and then use regex with <code>BeautifulSoup</code>:</p>\n\n<pre><code>import re\nfrom bs4 import BeautifulSoup as soup\ndata = soup(str(urllib.urlopen('https://www.klook.com/city/30-kyoto/?p=1').read()), 'lxml')\npage_numbers = [i.text for i in data.find_all('a', {'class':'p_num '})]\nactivities = {1:[i['href'] for i in data.find_all('a', {'href':re.compile(\"^/activity/\")})]}\nfor page in page_numbers:\n   data = soup(str(urllib.urlopen('https://www.klook.com/city/30-kyoto/?p={}'.format(page)).read()), 'lxml')\n   activities[int(page)] = [i['href'] for i in data.find_all('a', {'href':re.compile(\"^/activity/\")})]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{1: ['/activity/1079-one-day-kimono-rental-kyoto/', '/activity/1032-higashiyama-rickshaw-tour-kyoto/', '/activity/6128-kyoto-seaside-day-tour-osaka/', '/activity/1540-hankyu-1-day-tourist-pass-osaka/', '/activity/1777-icoca-ic-card-kyoto/', '/activity/1541-kix-airport-limousine-bus-transfer-kyoto/', '/activity/1753-randen-kyoto-bus-subway-1-day-pass-kyoto/', '/activity/3260-sagano-romantic-train-ticket-kyoto/', '/activity/793-japanese-lzakaya-cooking-course-kyoto/', '/activity/882-nishiki-market-teramachi-street-kyoto/', '/activity/792-morning-bento-cooking-course-kyoto/', '/activity/2918-sushi-class-experience-kyoto/', '/activity/6032-ninja-kyoto-restaurant-labyrinth-kyoto/', '/activity/5215-garden-ryokan-nanzenji-yachiyo-kyoto/', '/activity/1079-one-day-kimono-rental-kyoto/', '/activity/3260-sagano-romantic-train-ticket-kyoto/', '/activity/675-wifi-device-japan-kyoto/', '/activity/1031-arashiyama-rickshaw-tour-kyoto/', '/activity/657-day-trip-hiroshima-miyajima-kyoto/', '/activity/4774-4G-wifi-kyoto/', '/activity/2826-gionya-kimono-rental-kyoto/', '/activity/1464-kyoto-tower-admission-ticket-kyoto/', '/activity/2249-sagano-romantic-train-ticket-kyoto/', '/activity/1777-icoca-ic-card-kyoto/', '/activity/1541-kix-airport-limousine-bus-transfer-kyoto/', '/activity/1540-hankyu-1-day-tourist-pass-osaka/', '/activity/3532-wifi-device-japan-kyoto/', '/activity/1753-randen-kyoto-bus-subway-1-day-pass-kyoto/', '/activity/1319-4g-wifi-device-kyoto/', '/activity/1447-wi-ho-japan-wifi-device-kyoto/', '/activity/3826-wifi-device-japan-kyoto/', '/activity/2699-japan-wifi-device-taiwan-kyoto/', '/activity/3652-wifi-device-singapore-kyoto/', '/activity/1122-wi-ho-japan-wifi-device-kyoto/', '/activity/719-japan-docomo-sim-card-kyoto/', '/activity/6128-kyoto-seaside-day-tour-osaka/', '/activity/6241-nanzen-ji-fushimi-inari-taisha-sagano-romantic-train-day-tour/', '/activity/5137-guenpin-fugu-restaurant-kyoto/'], 2: ['/activity/1079-one-day-kimono-rental-kyoto/', '/activity/1032-higashiyama-rickshaw-tour-kyoto/', '/activity/6128-kyoto-seaside-day-tour-osaka/', '/activity/1540-hankyu-1-day-tourist-pass-osaka/', '/activity/1777-icoca-ic-card-kyoto/', '/activity/1541-kix-airport-limousine-bus-transfer-kyoto/', '/activity/1753-randen-kyoto-bus-subway-1-day-pass-kyoto/', '/activity/3260-sagano-romantic-train-ticket-kyoto/', '/activity/793-japanese-lzakaya-cooking-course-kyoto/', '/activity/882-nishiki-market-teramachi-street-kyoto/', '/activity/792-morning-bento-cooking-course-kyoto/', '/activity/2918-sushi-class-experience-kyoto/', '/activity/6032-ninja-kyoto-restaurant-labyrinth-kyoto/', '/activity/5215-garden-ryokan-nanzenji-yachiyo-kyoto/', '/activity/6543-arashiyama-golden-pavilion-temple-todaiji-kobe-mosaic-day-tour-kyoto/', '/activity/5198-nanzenji-junsei-restaurant-kyoto/', '/activity/7877-hanami-kimono-rental-kyoto/', '/activity/793-japanese-lzakaya-cooking-course-kyoto/', '/activity/9915-kyoto-osaka-sightseeing-pass-kyoto-japan/', '/activity/883-geisha-districts-tour-kyoto/', '/activity/1097-gion-kimono-experience-kyoto/', '/activity/6032-ninja-kyoto-restaurant-labyrinth-kyoto/', '/activity/792-morning-bento-cooking-course-kyoto/', '/activity/9272-4g-data-daijobu-sim-card-kyoto/', '/activity/871-sake-brewery-visit-fushimi-inari-shrine-kyoto/', '/activity/5979-tower-terrace-kyoto/', '/activity/632-kyoto-backstreet-cycling/', '/activity/646-kyoto-afternoon-exploration/', '/activity/640-kyoto-morning-sightseeing/', '/activity/872-arashiyama-bamboo-forest-half-day-tour-kyoto/', '/activity/5272-mukadeya-kyoto/', '/activity/6081-one-night-in-kyoto/', '/activity/2918-sushi-class-experience-kyoto/', '/activity/1032-higashiyama-rickshaw-tour-kyoto/', '/activity/5445-kimono-photo-shoot-kyoto/', '/activity/5215-garden-ryokan-nanzenji-yachiyo-kyoto/', '/activity/882-nishiki-market-teramachi-street-kyoto/', '/activity/7096-japan-prepaid-sim-card-kyoto/'], 3: ['/activity/1079-one-day-kimono-rental-kyoto/', '/activity/1032-higashiyama-rickshaw-tour-kyoto/', '/activity/6128-kyoto-seaside-day-tour-osaka/', '/activity/1540-hankyu-1-day-tourist-pass-osaka/', '/activity/1777-icoca-ic-card-kyoto/', '/activity/1541-kix-airport-limousine-bus-transfer-kyoto/', '/activity/1753-randen-kyoto-bus-subway-1-day-pass-kyoto/', '/activity/3260-sagano-romantic-train-ticket-kyoto/', '/activity/793-japanese-lzakaya-cooking-course-kyoto/', '/activity/882-nishiki-market-teramachi-street-kyoto/', '/activity/792-morning-bento-cooking-course-kyoto/', '/activity/2918-sushi-class-experience-kyoto/', '/activity/6032-ninja-kyoto-restaurant-labyrinth-kyoto/', '/activity/5215-garden-ryokan-nanzenji-yachiyo-kyoto/', '/activity/5271-itoh-dining-kyoto/', '/activity/9094-sagano-sightseeing-carriage-tour-kyoto/', '/activity/8192-japan-sim-card-taiwan-airport-pickup-kyoto/', '/activity/8420-south-korea-wifi-device-kyoto/', '/activity/8644-rock-climbing-at-kyoto-konpirayama-kyoto /', '/activity/9934-3g-4g-wifi-mnl-pick-up-delivery-for-japan-kyoto/', '/activity/8966-donburi-cooking-course-and-nishiki-market-tour-kyoto/', '/activity/9215-arashiyama-kyoto-food-drink-half-day-tour/']}\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 5165095, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8c9a0f900e44d54ac973a40c563fc66d?s=128&d=identicon&r=PG&f=1", "display_name": "Serious Ruffy", "link": "https://stackoverflow.com/users/5165095/serious-ruffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 50031303, "answer_count": 2, "score": 0, "last_activity_date": 1524690164, "creation_date": 1524687806, "last_edit_date": 1524688479, "question_id": 50030758, "link": "https://stackoverflow.com/questions/50030758/how-to-crawl-href-python-beautifulsoup", "title": "How to crawl href - Python &amp; beautifulsoup", "body": "<p>I am currently crawling a web page (<a href=\"https://www.klook.com/city/30-kyoto/?p=1\" rel=\"nofollow noreferrer\">https://www.klook.com/city/30-kyoto/?p=1</a>) using Python 3.4 and bs4 in order to collect the deeplinks of the respective activities.</p>\n\n<p>I found that the links are located in the html source like this:</p>\n\n<pre><code>&lt;a class=\"j_activity_item_link\" href=\"/activity/1031-arashiyama-rickshaw-tour-kyoto/\" class=\"j_activity_item_link\" data-card-tags=\"{}\" data-sold-out=\"false\" data-price=\"40.0\" data-city-id=\"30\" data-id=\"1031\" data-url-seo=\"arashiyama-rickshaw-tour-kyoto\"&gt;\n</code></pre>\n\n<p>But after several trials, this <code>href=\"/activity/1031-arashiyama-rickshaw-tour-kyoto/\"</code> never show up. </p>\n\n<p>Here is my logic so far:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nuser_agent = {'User-agent': 'Chrome/43.0.2357'}\n\nfor page in range(1,6):\n    r = requests.get(\"https://www.klook.com/city/30-kyoto\" + \"/?p=\" +  str(page))\n    soup = BeautifulSoup(r.content, \"lxml\")\n\n    g_data = soup.find_all(\"a\", {\"class\": \"j_activity_item_link\"})\n    for item in g_data:\n        Deeplink = item.find_all(\"a\")\n        for t in Deeplink:\n            print(t.get(\"href\"))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Process finished with exit code 0\n</code></pre>\n\n<p>Could you guys help me put? Any feedback is appreciated.</p>\n"}, {"tags": ["python", "pandas", "scikit-learn", "one-hot-encoding"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1524688064, "post_id": 50030751, "comment_id": 87077642, "body": "what is your expected out put"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9435456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2de2b254f5128262b1eeb78213e4270?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/9435456/michael"}, "edited": false, "score": 0, "creation_date": 1524690091, "post_id": 50030974, "comment_id": 87078609, "body": "Thank you for the answer. I have tried the mlb solution, but my actual dataset has 1 mill&#237;on examples and I get a memory error, so I wanted to look for other solutions. Also, I do want to know what i am doing wrong with OneHotEncoder."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 77, "user_id": 9435456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2de2b254f5128262b1eeb78213e4270?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/9435456/michael"}, "edited": false, "score": 0, "creation_date": 1524690352, "post_id": 50030974, "comment_id": 87078731, "body": "@Michael then just try chunk by chunk to finish the process"}, {"owner": {"reputation": 77, "user_id": 9435456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2de2b254f5128262b1eeb78213e4270?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/9435456/michael"}, "edited": false, "score": 0, "creation_date": 1524693349, "post_id": 50030974, "comment_id": 87079897, "body": "Are you able to give me an example of code to implement this please?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 77, "user_id": 9435456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2de2b254f5128262b1eeb78213e4270?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/9435456/michael"}, "edited": false, "score": 0, "creation_date": 1524693456, "post_id": 50030974, "comment_id": 87079932, "body": "@Michael something like this <a href=\"https://stackoverflow.com/questions/33542977/pandas-groupby-with-sum-on-large-csv-file\" title=\"pandas groupby with sum on large csv file\">stackoverflow.com/questions/33542977/&hellip;</a>"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1524688719, "creation_date": 1524688719, "answer_id": 50030974, "question_id": 50030751, "link": "https://stackoverflow.com/questions/50030751/how-do-i-use-onehotencoder-on-a-pandas-series-of-lists/50030974#50030974", "title": "How do I use OneHotEncoder on a pandas series of lists?", "body": "<p>For list item , you should using <code>MultiLabelBinarizer</code> in <code>sklearn</code> </p>\n\n<pre><code>from sklearn.preprocessing import MultiLabelBinarizer\nmlb = MultiLabelBinarizer()\nprint (pd.DataFrame(mlb.fit_transform(df['A']),columns=mlb.classes_, index=df.index))\n   1  2  3  4  5  7\n0  0  0  0  0  1  1\n1  0  0  1  1  1  0\n2  0  1  0  0  0  0\n3  1  1  1  1  0  0\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9435456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2de2b254f5128262b1eeb78213e4270?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/9435456/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1524688719, "creation_date": 1524687790, "question_id": 50030751, "link": "https://stackoverflow.com/questions/50030751/how-do-i-use-onehotencoder-on-a-pandas-series-of-lists", "title": "How do I use OneHotEncoder on a pandas series of lists?", "body": "<p>I have a Pandas data frame which contains a series of lists. I would like to use SciKit-Learn's OneHotEncoder on this series. I keep getting a value error.</p>\n\n<p>My problem is reproduced as:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nd = {'A': [[5,7], [3, 4, 5], [2], [1,2,3,4]]}\ndf = pd.DataFrame(data=d)\ndf\n      A\n0   [5, 7]\n1   [3, 4, 5]\n2   [2]\n3   [1, 2, 3, 4]\n\na = np.array(df['A'])\na\narray([list([5, 7]), list([3, 4, 5]), list([2]), list([1, 2, 3, 4])],\n      dtype=object)\n\nfrom sklearn.preprocessing import OneHotEncoder\nenc = OneHotEncoder(sparse = False)\n\nX = enc.fit_transform(a)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-47-64181a9f7331&gt; in &lt;module&gt;()\n----&gt; 1 X = enc.fit_transform(a)\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\preprocessing\\data.py in fit_transform(self, X, y)\n   2017         \"\"\"\n   2018         return _transform_selected(X, self._fit_transform,\n-&gt; 2019                                    self.categorical_features, copy=True)\n   2020 \n   2021     def _transform(self, X):\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\preprocessing\\data.py in _transform_selected(X, transform, selected, copy)\n   1807     X : array or sparse matrix, shape=(n_samples, n_features_new)\n   1808     \"\"\"\n-&gt; 1809     X = check_array(X, accept_sparse='csc', copy=copy, dtype=FLOAT_DTYPES)\n   1810 \n   1811     if isinstance(selected, six.string_types) and selected == \"all\":\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\validation.py in check_array(array, accept_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, ensure_min_samples, ensure_min_features, warn_on_dtype, estimator)\n    431                                       force_all_finite)\n    432     else:\n--&gt; 433         array = np.array(array, dtype=dtype, order=order, copy=copy)\n    434 \n    435         if ensure_2d:\n\nValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>I am using windows 10, python 3.6.4, SciKit-Learn 0.19.1</p>\n\n<p>Many thanks for any ideas anyone has!</p>\n"}, {"tags": ["python", "pandas", "dataframe", "data-analysis"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1524688597, "post_id": 50030744, "comment_id": 87077907, "body": "With for loop , you will see the <code>group</code> here is the data frame split by the group key      ` for name, group in df.groupby(&#39;smoker&#39;):         print(group.sort_values(by=&#39;tip_pct&#39;))`"}, {"owner": {"reputation": 1, "user_id": 9676967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db37a2f9d768766264191797e2b86c?s=128&d=identicon&r=PG&f=1", "display_name": "Mukerong", "link": "https://stackoverflow.com/users/9676967/mukerong"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1524688811, "post_id": 50030744, "comment_id": 87078006, "body": "@Wen, I understand your method will work, but I don&#39;t understand is why <code>groupby</code> the dataset first and then <code>apply(sort_values)</code> won&#39;t have any issues. Do you know the reason?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1524689012, "post_id": 50030744, "comment_id": 87078105, "body": "apply is kind of for loop so after doing one for loop another one for loop has been added the will failed"}, {"owner": {"reputation": 1, "user_id": 9676967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db37a2f9d768766264191797e2b86c?s=128&d=identicon&r=PG&f=1", "display_name": "Mukerong", "link": "https://stackoverflow.com/users/9676967/mukerong"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1524689396, "post_id": 50030744, "comment_id": 87078275, "body": "@Wen, I understand your point. However, if I directly apply <code>tips.apply(sort_values)</code>, it will have the same issue. That&#39;s why I want to understand the behind-the-scenes calculation of <code>apply()</code> and <code>groupby()</code>. It seems that the smaller dataset created by <code>groupby()</code> won&#39;t have issues with <code>apply()</code> but the original dataset does."}], "owner": {"reputation": 1, "user_id": 9676967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db37a2f9d768766264191797e2b86c?s=128&d=identicon&r=PG&f=1", "display_name": "Mukerong", "link": "https://stackoverflow.com/users/9676967/mukerong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524687764, "creation_date": 1524687764, "question_id": 50030744, "link": "https://stackoverflow.com/questions/50030744/pandas-df-apply-behind-the-scene-calculation-with-df-groupby", "title": "pandas: df.apply() behind-the-scene calculation with df.groupby()", "body": "<p>I am very confused about how <code>df.apply()</code> work. Here is one of the issues I have:</p>\n\n<pre><code>import seaborn as sns\ntips = sns.load_dataset(\"tips\")\ntips['tip_pct'] = tips['tip'] / tips['total_bill']\n\ntips.head()\n\n       total_bill   tip smoker  day    time  size   tip_pct\n0       16.99  1.01     No  Sun  Dinner     2  0.059447\n1       10.34  1.66     No  Sun  Dinner     3  0.160542\n2       21.01  3.50     No  Sun  Dinner     3  0.166587\n3       23.68  3.31     No  Sun  Dinner     2  0.139780\n4       24.59  3.61     No  Sun  Dinner     4  0.146808\n</code></pre>\n\n<p>I am trying to sort <code>tips</code> by <code>tips['tip_pct']</code> column. I can apply <code>sort_values</code> directly.</p>\n\n<pre><code>In [153]: tips.sort_values(by='tip_pct').head()\nOut[153]: \n     total_bill   tip smoker  day    time  size   tip_pct\n237       32.83  1.17    Yes  Sat  Dinner     2  0.035638\n102       44.30  2.50    Yes  Sat  Dinner     3  0.056433\n57        26.41  1.50     No  Sat  Dinner     2  0.056797\n0         16.99  1.01     No  Sun  Dinner     2  0.059447\n187       30.46  2.00    Yes  Sun  Dinner     5  0.065660\n</code></pre>\n\n<p>Now, I am trying to group this data frame by <code>smoker</code> column first, and sort by <code>tip_pct</code> column.</p>\n\n<pre><code>In [156]: tips.groupby('smoker').apply(lambda x: x.sort_values(by='tip_pct')).head()\nOut[156]: \n            total_bill   tip smoker   day    time  size   tip_pct\nsmoker                                                           \nNo     57        26.41  1.50     No   Sat  Dinner     2  0.056797\n       0         16.99  1.01     No   Sun  Dinner     2  0.059447\n       48        28.55  2.05     No   Sun  Dinner     3  0.071804\n       146       18.64  1.36     No  Thur   Lunch     3  0.072961\n       130       19.08  1.50     No  Thur   Lunch     2  0.078616\n</code></pre>\n\n<p>I tried to understand how does <code>groupby</code> and <code>apply</code> work together, so I tried the following, but it failed.</p>\n\n<pre><code>In [157]: for name, group in tips.groupby('smoker'):\n     ...:     group.apply(lambda x: x.sort_values(by='tip_pct'))\n     ...:     \n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-157-5b5096eaa4d6&gt; in &lt;module&gt;()\n      1 for name, group in tips.groupby('smoker'):\n----&gt; 2     group.apply(lambda x: x.sort_values(by='tip_pct'))\n      3 \n\n//anaconda/lib/python3.5/site-packages/pandas/core/frame.py in apply(self, func, axis, broadcast, raw, reduce, args, **kwds)\n   4260                         f, axis,\n   4261                         reduce=reduce,\n-&gt; 4262                         ignore_failures=ignore_failures)\n   4263             else:\n   4264                 return self._apply_broadcast(f, axis)\n\n//anaconda/lib/python3.5/site-packages/pandas/core/frame.py in _apply_standard(self, func, axis, ignore_failures, reduce)\n   4356             try:\n   4357                 for i, v in enumerate(series_gen):\n-&gt; 4358                     results[i] = func(v)\n   4359                     keys.append(v.name)\n   4360             except Exception as e:\n\n&lt;ipython-input-157-5b5096eaa4d6&gt; in &lt;lambda&gt;(x)\n      1 for name, group in tips.groupby('smoker'):\n----&gt; 2     group.apply(lambda x: x.sort_values(by='tip_pct'))\n      3 \n\nTypeError: (\"sort_values() got an unexpected keyword argument 'by'\", 'occurred at index total_bill')\n</code></pre>\n\n<p>My understanding the reason of the failure is because <code>apply()</code> function tries to <code>sort_value</code> on each column, so <code>by</code> doesn't apply on <code>series.sort_values()</code>. However, I don't understant why <code>groupby</code> doesn't have any issues. per my understanding, <code>groupby</code> just split the dataset, so it is still several smaller data frame, which will have issues like the above when applying <code>sort_values()</code>. </p>\n\n<p>Can anyone explain why <code>groupby</code> and <code>apply(sort_values)</code> doesn't have any issues that is caused by directly apply <code>sort_values</code> to original data frame?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "string", "python-3.x", "replace"], "comments": [{"owner": {"reputation": 323, "user_id": 9371607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFpiK.png?s=128&g=1", "display_name": "Joshua Yonathan", "link": "https://stackoverflow.com/users/9371607/joshua-yonathan"}, "edited": false, "score": 0, "creation_date": 1524687894, "post_id": 50030731, "comment_id": 87077564, "body": "<code>&#39;xpto\\\\&quot;xpto&#39;</code> works just fine for me..."}, {"owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1524688521, "post_id": 50030731, "comment_id": 87077868, "body": "@Aran-Fey I would not agree with you on this one, it is a specific use-case and even tho his question falls into the same category it does require triple escaping and a brief explanation on how it actually works. \u2013"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "edited": false, "score": 0, "creation_date": 1524688953, "post_id": 50030731, "comment_id": 87078078, "body": "@ElvirMuslic I think it&#39;s enough to clear up the OP&#39;s misunderstanding. Once they know <i>why</i> the strings are printed with double backslashes, it&#39;s easy to find out which of these 4 options produce the expected results. No fancy escaping is required here. It&#39;s easy enough to figure out and I don&#39;t see the benefit of having an answer that shows the OP how to build that exact string. Nobody will ever come across this question and think <i>&quot;Hey, that&#39;s the exact same string I wanted to build! Good thing I can just copy/paste it from here!&quot;</i>. If it&#39;s really necessary, it can be done in the comments."}, {"owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1524689316, "post_id": 50030731, "comment_id": 87078239, "body": "@Aran-Fey I do agree that if it were a question with a wider-lens i.e. <code>how does this apply to all strings?</code> not just to this one it would&#39;ve been more helpful. Much more helpful and the fact that people might face the same issue makes it deserving of an answer. Thank you for your great contributions and many, many helpful answer and comments I do appreciate it, having that I stick to what I said.  I just have an issue with the Base-Style answer, you can always (in a sense) refer to a basic type of answer that someone has written."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "edited": false, "score": 0, "creation_date": 1524689918, "post_id": 50030731, "comment_id": 87078524, "body": "@ElvirMuslic I think it&#39;s more important to provide a good and detailed explanation of the problem than it is to hold the OP&#39;s hand and spoonfeed them a solution. You mustn&#39;t forget that many people come to StackOverflow from google, and a proper explanation is <b><i>much</i></b> more useful for them than a copy/paste-able string for the OP. None of the answers down there explain the underlying problem nearly as well as the duplicate I linked does. In the long run, marking this as a dupe will help more people. If you disagree, feel free to cast a reopen vote. But my vote stays, at least for now."}, {"owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1524690667, "post_id": 50030731, "comment_id": 87078865, "body": "@Aran-Fey I understand your concern, understanding the underlying problem is fine and I agree in some cases, people do come from Google and that&#39;s the issue, they&#39;re looking for a solution to their problem. I don&#39;t need to understand advanced algebra (mostly) to perform math calculations onto my datasets. Respectfully there is a fine line there and spoon feeding is necessary especially with simple questions as you want to encourage people to grow.   Too much knowledge too much detail = burden. That is all I&#39;m saying. We the people of the internet want to make it easy. Thank you for your time"}], "answers": [{"comments": [{"owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "edited": false, "score": 0, "creation_date": 1524688452, "post_id": 50030767, "comment_id": 87077837, "body": "Awesome! I first typed the triple quotes and later removed them for simplicity reasons, however, it&#39;s really useful <code>&#39;&#39;&#39;&lt;something&gt;&#39;&#39;&#39;</code> or <code>&quot;&quot;&quot;&lt;something&gt;&quot;&quot;&quot;</code> The string will have to be ended by triple either single or double quote and thereby (almost) eliminating the chance of an issue arising with the quotes inside the  string."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 0, "last_activity_date": 1524688165, "last_edit_date": 1524688165, "creation_date": 1524687865, "answer_id": 50030767, "question_id": 50030731, "link": "https://stackoverflow.com/questions/50030731/use-one-backslash-and-quotation-marks-together-in-string/50030767#50030767", "title": "use one backslash and quotation marks together in string", "body": "<p><code>\"'xpto\\\\\\\"xpto'\"</code> is correct. Part of the confusion is distinguishing the actual string with Python's textual representation of the string.</p>\n\n<pre><code>&gt;&gt;&gt; date = \"'xpto\\\\\\\"xpto'\"\n&gt;&gt;&gt; date\n'\\'xpto\\\\\"xpto\\''\n&gt;&gt;&gt; print(date)\n'xpto\\\"xpto'\n</code></pre>\n\n<p>A simpler solution (which came to mind after reading Elvir's answer) is to use a triple-quoted raw string:</p>\n\n<pre><code>date = r\"\"\"'xpto\\\"xpto'\"\"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2116, "user_id": 6929467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8QLhMqjbYUU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZX1kiTbhsA5xQMiKWekx9fqT5Yw/photo.jpg?sz=128", "display_name": "Yono", "link": "https://stackoverflow.com/users/6929467/yono"}, "is_accepted": false, "score": 1, "last_activity_date": 1524688267, "last_edit_date": 1524688267, "creation_date": 1524687891, "answer_id": 50030771, "question_id": 50030731, "link": "https://stackoverflow.com/questions/50030731/use-one-backslash-and-quotation-marks-together-in-string/50030771#50030771", "title": "use one backslash and quotation marks together in string", "body": "<p>The following line works.</p>\n\n<pre><code>print(r\"'xpto\\\"xpto'\")\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>'xpto\\\"xpto'</p>\n</blockquote>\n\n<p>We add <strong><code>r</code></strong> to insinuate that the <strong>string</strong> is in a raw format.</p>\n\n<p><em>and/or</em> </p>\n\n<p><code>print(\"'xpto\\\\\\\"xpto'\")</code> where <code>\\\\</code> = <code>\\</code> escapes this and <code>\\\"</code> = <code>\"</code> escaping the <code>\"</code> with <code>\\</code></p>\n"}], "owner": {"reputation": 53, "user_id": 5149362, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GYEgqZqslX0/AAAAAAAAAAI/AAAAAAAAAoc/joOyVeU0q94/photo.jpg?sz=128", "display_name": "rnnhm", "link": "https://stackoverflow.com/users/5149362/rnnhm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1524687892, "accepted_answer_id": 50030767, "answer_count": 2, "score": 1, "last_activity_date": 1524688267, "creation_date": 1524687722, "question_id": 50030731, "link": "https://stackoverflow.com/questions/50030731/use-one-backslash-and-quotation-marks-together-in-string", "closed_reason": "Duplicate", "title": "use one backslash and quotation marks together in string", "body": "<p>How can i do to represent a string with (\\\") inside string</p>\n\n<p>I tried several ways:</p>\n\n<pre><code>date = 'xpto\\\"xpto'\n'xpto\"xpto'\ndate = 'xpto\\\\\"xpto'\n'xpto\\\\\"xpto'\ndata='xpto\\\\' + '\"xpto'\n'xpto\\\\\"xpto'\ndata= r'xpto\\\"xpto'\n'xpto\\\\\"xpto'\n</code></pre>\n\n<p>i need the string exactly like this </p>\n\n<blockquote>\n  <p>'xpto\\\"xpto'</p>\n</blockquote>\n\n<p>if someone knows how, I really appreciate the help</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "regression", "data-science"], "comments": [{"owner": {"reputation": 327, "user_id": 2762279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAMoJ.png?s=128&g=1", "display_name": "Amr Keleg", "link": "https://stackoverflow.com/users/2762279/amr-keleg"}, "edited": false, "score": 1, "creation_date": 1524689277, "post_id": 50030665, "comment_id": 87078221, "body": "Could you indicate the line number that caused the error?"}, {"owner": {"reputation": 13, "user_id": 9200537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62d9396372860987f631676c77c685df?s=128&d=identicon&r=PG&f=1", "display_name": "Anx8", "link": "https://stackoverflow.com/users/9200537/anx8"}, "reply_to_user": {"reputation": 327, "user_id": 2762279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAMoJ.png?s=128&g=1", "display_name": "Amr Keleg", "link": "https://stackoverflow.com/users/2762279/amr-keleg"}, "edited": false, "score": 0, "creation_date": 1524772262, "post_id": 50030665, "comment_id": 87118031, "body": "@AmrKeleg I just did that. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9200537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62d9396372860987f631676c77c685df?s=128&d=identicon&r=PG&f=1", "display_name": "Anx8", "link": "https://stackoverflow.com/users/9200537/anx8"}, "edited": false, "score": 0, "creation_date": 1524772851, "post_id": 50031326, "comment_id": 87118311, "body": "I think this might be the answer. I am yet to try it. However, it seems <code>cstats()</code> is the more appropriate function, since in my example it&#39;s not a pairwise statistic. Can you kindly update your answer so that I can accept it. Thx! <a href=\"http://minepy.readthedocs.io/en/latest/python.html#convenience-functions-example\" rel=\"nofollow noreferrer\">minepy.readthedocs.io/en/latest/&hellip;</a>"}], "tags": [], "owner": {"reputation": 218, "user_id": 9648076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b38DLOxypeQ/AAAAAAAAAAI/AAAAAAAAAEs/K8sDh7C2wpk/photo.jpg?sz=128", "display_name": "Juli&#225;n Esteban Salom&#243;n Torres", "link": "https://stackoverflow.com/users/9648076/juli%c3%a1n-esteban-salom%c3%b3n-torres"}, "is_accepted": true, "score": 1, "last_activity_date": 1524774722, "last_edit_date": 1524774722, "creation_date": 1524690270, "answer_id": 50031326, "question_id": 50030665, "link": "https://stackoverflow.com/questions/50030665/minepy-buffer-has-wrong-number-of-dimensions/50031326#50031326", "title": "minepy: Buffer has wrong number of dimensions", "body": "<p>I don't know too much about minepy but viewing the source code, <code>compute_score</code> receive <code>x</code> and <code>y</code> parameters which must be 1D arrays, then if you pass a 14xN array (2D) this wont work.</p>\n\n<p>Instead <code>pstats</code> <a href=\"http://minepy.readthedocs.io/en/latest/python.html#minepy.pstats\" rel=\"nofollow noreferrer\">(View on API)</a> receives a 2D array and <code>cstats</code><a href=\"http://minepy.readthedocs.io/en/latest/python.html#minepy.cstats\" rel=\"nofollow noreferrer\">(View on API)</a> receives a pair of 2D arrays, so you can take a look of both, as mentioned, I don't know about minepy too much or the purpose that you are looking for, but you can use them as follows:</p>\n\n<pre><code>from minepy import pstats, cstats\n\n... # Load of the data\n\nmicOneVector, ticOneVector = pstats(df)            # Returns mic and tic (Arrays of 1D)\n\nmicTwoVectors, ticTwoVectors = cstats(df, df.MEDV) # Returns mic and tic (Arrays of 1D)\n</code></pre>\n\n<p>References</p>\n\n<p><a href=\"https://github.com/minepy/minepy/blob/master/minepy/mine.pyx\" rel=\"nofollow noreferrer\">minepy - Source code</a></p>\n\n<p><a href=\"http://minepy.readthedocs.io/en/latest/python.html\" rel=\"nofollow noreferrer\">minepy - Python API</a></p>\n"}], "owner": {"reputation": 13, "user_id": 9200537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62d9396372860987f631676c77c685df?s=128&d=identicon&r=PG&f=1", "display_name": "Anx8", "link": "https://stackoverflow.com/users/9200537/anx8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 50031326, "answer_count": 1, "score": 0, "last_activity_date": 1524774722, "creation_date": 1524687441, "last_edit_date": 1524772185, "question_id": 50030665, "link": "https://stackoverflow.com/questions/50030665/minepy-buffer-has-wrong-number-of-dimensions", "title": "minepy: Buffer has wrong number of dimensions", "body": "<p>I am trying to use Maximal information coefficient in jupyter notebook, with the <a href=\"https://github.com/rupakc/UCI-Data-Analysis/tree/master/Boston%20Housing%20Dataset/Boston%20Housing\" rel=\"nofollow noreferrer\">Boston Housing dataset</a>.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom minepy import MINE\n\n#Read dataset\ndf = pd.read_csv('housing.data', delim_whitespace=True, header=None);\ncol_name = ['CRIM', 'ZN' , 'INDUS', 'CHAS', 'NOX', 'RM', 'AGE', 'DIS', 'RAD', 'TAX', 'PTRATIO', 'B', 'LSTAT', 'MEDV']\ndf.columns = col_name;\n\n#Compute MIC\nm = MINE()\nm.compute_score(df[col_name[0:13]], df.MEDV)\nprint(m.mic())\n</code></pre>\n\n<p><code>m.compute_score(..</code> is giving me a <code>ValueError: Buffer has wrong number of dimensions (expected 1, got 2)</code>.</p>\n\n<h3>Update</h3>\n\n<p>I understand now that <code>compute_score()</code> is expecting a vector instead of a matrix. What would be the proper way to find MIC scores between <code>df.MEDV</code> and the 13 features <code>df[col_name[0:13]]</code>?</p>\n"}, {"tags": ["python", "sqlalchemy", "graphene-python"], "answers": [{"tags": [], "owner": {"reputation": 248, "user_id": 1165117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fea6a5a84e2514b87340c856e37571?s=128&d=identicon&r=PG", "display_name": "jkimbo", "link": "https://stackoverflow.com/users/1165117/jkimbo"}, "is_accepted": true, "score": 0, "last_activity_date": 1525031933, "creation_date": 1525031933, "answer_id": 50090721, "question_id": 50030569, "link": "https://stackoverflow.com/questions/50030569/python-graphql-translate-uuid-to-slug/50090721#50090721", "title": "python graphql translate uuid to slug", "body": "<p>It's pretty much up to you, there aren't any particular pros or cons to either. I guess if you plan on using the slug property elsewhere in your application it makes sense to put it on your model. If it's just going to be used in your GraphQL api then keep it in the resolvers.</p>\n\n<p>To implement it in Graphene you can do it like this:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>class User(graphene.ObjectType):\n    id = graphene.ID(required=True)\n\n    def resolve_id(user, info):\n        return uuid_to_slug(user.uuid)\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 1960118, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5dead0125dfb910d6dfdd79c76f9924f?s=128&d=identicon&r=PG", "display_name": "user1960118", "link": "https://stackoverflow.com/users/1960118/user1960118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 50090721, "answer_count": 1, "score": 0, "last_activity_date": 1525031933, "creation_date": 1524687058, "question_id": 50030569, "link": "https://stackoverflow.com/questions/50030569/python-graphql-translate-uuid-to-slug", "title": "python graphql translate uuid to slug", "body": "<p>I'm using python, graphene, and sqlalchemy for an application.  All of my models have an <code>id</code> field and a <code>uuid</code> field, generated like so</p>\n\n<pre><code>id = db.Column(\n    db.Integer,\n    primary_key=True,\n    unique=True,\n    nullable=False)\n\nuuid = db.Column(\n    UUID,\n    unique=True,\n    nullable=false,\n    default=uuid.uuid4)\n</code></pre>\n\n<p>The <code>uuid</code> field will be used instead of the ID for security purposes, but the problem with uuid's is that they are too long, so to shorten them I use <a href=\"https://github.com/websauna/websauna/blob/master/websauna/utils/slug.py\" rel=\"nofollow noreferrer\">this method</a>.</p>\n\n<p>Now, I'm not entirely sure where this transformation from uuid to slug would happen.  Would I have to define a <code>@property</code> on each of the models that would return the slug? Or would this happen in the graphql resolver functions, and if so, how would that be achieved?</p>\n\n<p>All help appreciated, thank you!</p>\n"}, {"tags": ["python", "google-api", "google-drive-api", "google-api-python-client"], "answers": [{"comments": [{"owner": {"reputation": 759, "user_id": 839846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd5a878c2820cb4c011139eaf177294?s=128&d=identicon&r=PG", "display_name": "Rod0n", "link": "https://stackoverflow.com/users/839846/rod0n"}, "edited": false, "score": 0, "creation_date": 1524689707, "post_id": 50031090, "comment_id": 87078421, "body": "I&#39;ve the folder name but I get no results in the case of the get_folder function. Could it be because it&#39;s a folder that has been shared to me?"}], "tags": [], "owner": {"reputation": 61, "user_id": 915061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4260442ea7decb2c64908b55d75eeb6?s=128&d=identicon&r=PG", "display_name": "Crist&#243;bal Mackenzie", "link": "https://stackoverflow.com/users/915061/crist%c3%b3bal-mackenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1524689165, "creation_date": 1524689165, "answer_id": 50031090, "question_id": 50030526, "link": "https://stackoverflow.com/questions/50030526/getting-files-from-shared-folder/50031090#50031090", "title": "Getting files from shared folder", "body": "<p>Assuming the folder you refer to has a unique name, you could try something like the following:</p>\n\n<pre><code>def get_folder(name):\n    credentials = get_credentials()\n    http = credentials.authorize(httplib2.Http())\n    service = discovery.build('drive', 'v3', http=http)\n    results = service.files().list(\n        pageSize=10,\n        q=(\"name = '{0}'\".format(name) +\n           \" and mimeType = 'application/vnd.google-apps.folder'\"),\n        corpora=\"user\",\n        fields=\"nextPageToken, files(id, name, webContentLink, \" +\n               \"createdTime, modifiedTime)\").execute()\n    items = results.get('files', [])\n    if not items:\n        return None\n    return items[0]\n</code></pre>\n\n<p>This function specifies the mime type corresponding to a Drive folder and returns the first result that matches the given name. If your folder name is not unique then you can modify it to return every matching result.</p>\n\n<pre><code>def get_folder_contents(folder_id):\n    credentials = get_credentials()\n    http = credentials.authorize(httplib2.Http())\n    service = discovery.build('drive', 'v3', http=http)\n\n    results = service.files().list(\n        q=(\"'{0}' in parents\".format(folder_id)),\n        corpora=\"user\",\n        fields=\"nextPageToken, files(id, name, webContentLink, \" +\n               \"createdTime, modifiedTime)\").execute()\n    items = results.get('files', [])\n    if not items:\n        print('No files found.')\n    return items\n</code></pre>\n\n<p>Once you know the <code>id</code> of the Drive folder, you can query for all the items that have that <code>id</code> in <code>parents</code>.\nWith these two functions you then could do something like:</p>\n\n<pre><code>folder = get_folder('my_folder_name')\nfolder_items = get_folder_contents(folder['id'])\n\nfor item in folder_items:\n    # decide if you should download\n    my_download_function(url=item['webContentLink'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1576483465, "post_id": 50035972, "comment_id": 104900189, "body": "Would the -1 care to comment on the -1 on a 1.5 year old answer?"}], "tags": [], "owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "is_accepted": false, "score": -1, "last_activity_date": 1524723289, "creation_date": 1524723289, "answer_id": 50035972, "question_id": 50030526, "link": "https://stackoverflow.com/questions/50030526/getting-files-from-shared-folder/50035972#50035972", "title": "Getting files from shared folder", "body": "<p>File.list has a paramater called q which lets you <a href=\"https://developers.google.com/drive/v2/web/search-parameters\" rel=\"nofollow noreferrer\">search</a>. searching for 'sharedWithMe' will return everything that has been shared with your by other users.</p>\n\n<blockquote>\n  <p>sharedWithMe   boolean =, !=   Files that are in the user's \"Shared with me\" collection.</p>\n</blockquote>\n\n<pre><code>def get_folder(name):\n    credentials = get_credentials()\n    http = credentials.authorize(httplib2.Http())\n    service = discovery.build('drive', 'v3', http=http)\n    results = service.files().list(\n        pageSize=10,\n        q=(\"sharedWithMe\"),\n        corpora=\"user\",\n        fields=\"*\").execute()\n    items = results.get('files', [])\n    if not items:\n        return None\n    return items[0]\n</code></pre>\n\n<p>That will give you everything thats been shared with you.  </p>\n\n<p>If you know the name of what you are looking for you can add that as well.</p>\n\n<blockquote>\n  <p>sharedWithMe and name contains 'hello'</p>\n</blockquote>\n"}], "owner": {"reputation": 759, "user_id": 839846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd5a878c2820cb4c011139eaf177294?s=128&d=identicon&r=PG", "display_name": "Rod0n", "link": "https://stackoverflow.com/users/839846/rod0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 822, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1524723302, "creation_date": 1524686883, "last_edit_date": 1524723302, "question_id": 50030526, "link": "https://stackoverflow.com/questions/50030526/getting-files-from-shared-folder", "title": "Getting files from shared folder", "body": "<p>I'd like to access the files from a shared folder and then download them. The problem is that I only end up getting a \"Getting Started\" file and I don't know how to solve this. I tried several things, including making a query under the files().get function but with no success. This is my code:</p>\n\n<pre><code>from google.oauth2 import service_account\nimport googleapiclient.discovery\nfrom apiclient.discovery import build\nfrom oauth2client.service_account import ServiceAccountCredentials\nfrom httplib2 import Http\n\n\nscopes = ['https://www.googleapis.com/auth/drive.metadata.readonly']\ncredentials = ServiceAccountCredentials.from_json_keyfile_name('server_secret.json', scopes)\n\nhttp_auth = credentials.authorize(Http())\nservice = build('drive', 'v3', http=http_auth)\n\nresults = service.files().list(\n    pageSize=10, fields=\"nextPageToken, files(id, name)\").execute()\n\nfiles = results.get('files', [])\n\nfor f in files:\n    print(f)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "algorithm", "performance"], "comments": [{"owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 1, "creation_date": 1524687187, "post_id": 50030521, "comment_id": 87077227, "body": "There&#39;s a nice <a href=\"https://en.wikipedia.org/wiki/Dynamic_programming\" rel=\"nofollow noreferrer\">dynamic programming</a> algorithm for this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9699361"}, "reply_to_user": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 0, "creation_date": 1524687521, "post_id": 50030521, "comment_id": 87077379, "body": "Not quite sure I understand this @internet_user"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9699361"}, "edited": false, "score": 0, "creation_date": 1524698368, "post_id": 50030845, "comment_id": 87081347, "body": "I had some trouble understanding how exactly I could use DP to solve, but I did some reading on DP and it seems quite powerful and is an interesting approach."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1524698722, "post_id": 50030845, "comment_id": 87081437, "body": "In this case, you would keep track of the answers you get for each combination of input values -- that&#39;s called &quot;memoizing&quot;.  Then, if a branch of recursion gets you to a combination you&#39;ve already computed, you find that in your memo table and return the stored value instead of repeating the computation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9699361"}, "edited": false, "score": 0, "creation_date": 1524699231, "post_id": 50030845, "comment_id": 87081574, "body": "Thank you @Prune , your implementation works and I learned a lot. This takes a lot of time to run though. If I find another approach that runs faster, I will share with you. Thanks again"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1524699464, "post_id": 50030845, "comment_id": 87081626, "body": "Yes, it&#39;s slow.  Given the variety of paths you have, it will get <i>much</i> worse as your programs get longer.  It shouldn&#39;t be too slow with only 6 statements, as you have only 2^6 paths to try.  You can speed up the longer cases somewhat with DP, but the problem itself isn&#39;t trivial."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1524699322, "last_edit_date": 1524699322, "creation_date": 1524688173, "answer_id": 50030845, "question_id": 50030521, "link": "https://stackoverflow.com/questions/50030521/simple-instructions-python-implementation/50030845#50030845", "title": "Simple Instructions Python Implementation", "body": "<p>If by \"more efficient\", you mean \"might be correct\", then <strong>yes</strong>.  Your current code doesn't work for all inputs.  With that SQR \"wild-card\", you cannot trivially know whether the operation you're looking at is beneficial.  For instance</p>\n\n<pre><code>LDI  1\nADD -8\nLDI  2\nADD -1\nADD  3\nSQR\n</code></pre>\n\n<p>The maximum value comes from (-8 + -1)^2.  You should use dynamic programming (see the link provided in the first comment) to keep track of all \"best possible\" results at each step.</p>\n\n<p>You classically program this with a recursive routine that tries two branches as it considers each instruction: use / don't use that instruction in the final answer.  Then you recur with the current value of <code>X</code> and the remaining instruction list.</p>\n\n<hr>\n\n<p>If you <em>want</em> to do data-flow analysis, you <em>can</em> apply various short-cuts.  For instance, in any stream of <code>ADD</code> instructions, you can combine all negative and all positive values into a single <code>ADD</code>.  When you have a <code>LDI</code>, you consider whether the new value is greater in both true and absolute value -- the latter being what drives an improvement through <code>SQR</code>.</p>\n\n<p>Frankly, I recommend doing the bisect-recur-dynamic_programming route.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I gave this more thought.  Although DP is the way to go for large problems, this is <em>not</em> what you'll want to attack first (in my opinion).  Rather, attack the problem of whether or not to include each particular command.  You will need to do both, until further refinement.  You can't even guarantee that you want to include the <code>SQR</code> command: a subsequent subtraction can make it undesirable.</p>\n\n<p>The logic of the recursion is something like this:</p>\n\n<pre><code>def optimize(x_reg, command_list):\n    # x_reg          current value of the X register\n    # command_list   remaining list of commands\n\n    # base case\n    if len(command_list) == 0\n         return x_reg\n\n    # recursion case\n    op = command_list[0][0]\n    if op == \"ADD\":\n        new_x = x_reg + command_list[0][1]\n    elif op == \"LDI\":\n        new_x = command_list[0][1]\n    else:    # op == \"SQR\":\n        new_x = x_reg * x_reg\n\n    with_op = optimize(new_x, command_list[1:])  # Use the command\n    sans_op = optimize(x_reg, command_list[1:])  # Don't use the command\n\n    return max(with_op, sans_op)    # Return the larger of the two solutions found\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9699361"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 50030845, "answer_count": 1, "score": 1, "last_activity_date": 1524699322, "creation_date": 1524686868, "last_edit_date": 1524693033, "question_id": 50030521, "link": "https://stackoverflow.com/questions/50030521/simple-instructions-python-implementation", "title": "Simple Instructions Python Implementation", "body": "<p>A program has one register, X, initialized to 0, and supports only 3 instructions:</p>\n\n<p>LDI v: Load (store) the immediate value, v, into X\nADD v: Add the immediate value v to X and store the result in X.\nSQR: Square the value of X and store the result in X.</p>\n\n<p>An example of how the value of  would be affected by a short sequence of instructions:</p>\n\n<pre><code>Instruction     X\nLDI 5           5\nADD 2           7\nSQR             49\nADD -4          44\nLDI -3          -3\nSQR             9\n</code></pre>\n\n<p>The problem I need to solve is to skip selected instructions to get the largest possible value for <code>X</code> at program end.</p>\n\n<p>What I have so far:</p>\n\n<pre><code>def prog(n):\n    x = 0\n    arr = []\n    for i in range(n):\n        itm = input().split()\n        arr += [(itm)]\n    #arr_rev = arr[::-1]    \n    #limit = arr_rev.index([\"SQR\"])+len(arr)-1\n    limit = len(arr) - 1 - arr[::-1].index(['SQR'])\n\n    for i in range(len(arr)):\n        if i &lt; limit:\n            if arr[i][0] == \"ADD\":\n                x += int(arr[i][1])\n            elif arr[i][0] == \"LDI\":\n                x = int(arr[i][1])\n            elif arr[i][0] == \"SQR\":\n                x = x**2\n        else:\n            if arr[i][0] == \"ADD\" and int(arr[i][1]) &gt; 0:\n                x += int(arr[i][1])\n            elif arr[i][0] == \"LDI\" and int(arr[i][1]) &gt; x:\n                x = int(arr[i][1])\n            elif arr[i][0] == \"SQR\":\n                x = x**2\n\n    return x\n</code></pre>\n\n<p>Since I don't want to add negative numbers, I skip those. I also don't want to load a number less than the current <code>X</code>.</p>\n\n<p>However, <em>squaring</em> a negative number makes it positive, so the above strategy may not work in all cases. I exempted that rule in all cases until I pass the last SQR. Is there a more efficient way to do this?</p>\n"}, {"tags": ["python", "dynamic-programming"], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 6388699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1205548692797716/picture?type=large", "display_name": "Jeet Karmakar", "link": "https://stackoverflow.com/users/6388699/jeet-karmakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1545062713, "creation_date": 1545062713, "answer_id": 53818875, "question_id": 50030483, "link": "https://stackoverflow.com/questions/50030483/top-down-rod-cut-dynamic-programming/53818875#53818875", "title": "Top Down Rod Cut Dynamic Programming", "body": "<pre><code>public static int cutRod(int arr[],int n,Integer memo[]){\n    if(n&lt;=0)\n    return 0;\n    int max=Integer.MIN_VALUE;\n    if(memo[n]!=null)\n    return memo[n];\n    else{\n        for(int i=0;i&lt;n;i++)\n        {\n            max=Math.max(max,arr[i]+cutRod(arr,n-i-1,memo));\n        }\n        memo[n]=max;\n        return memo[n];\n    }\n}\n</code></pre>\n\n<p>This is the top down solution in java!</p>\n"}], "owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545062713, "creation_date": 1524686659, "question_id": 50030483, "link": "https://stackoverflow.com/questions/50030483/top-down-rod-cut-dynamic-programming", "title": "Top Down Rod Cut Dynamic Programming", "body": "<p>How would you use a top down approach to the rod cut problem such that it would return a list of all of the maximum cost for rods from length [0 - rod length] and also return the parts used to achieve that maximum cost? I have successfully implemented a bottom up approach.</p>\n\n<pre><code>def cutRod(pricelist):\n    length = len(pricelist)\n    r = [0] * length\n    s = [0] * length\n\n    for j in range(1, length):\n        maxVal = 0\n        for i in range(1, j + 1):\n            if maxVal &lt; pricelist[i] + r[j - i]:\n                maxVal = pricelist[i] + r[j - i]\n                if pricelist[j - i] != 0:\n                    s[j] = [i, j - i]\n                else:\n                    s[j] = [i]\n        r[j] = maxVal\n    return r,s\n</code></pre>\n\n<p>But with the top down approach this is far as I've gotten</p>\n\n<pre><code>def cutRod(pricelist, cost, parts):\n    length = len(pricelist)\n\n    if length &lt;= 0:\n        return [0, cost, parts]\n\n    maxVal = 0\n\n    for i in range(0, length):\n        w = pricelist[i]\n        x, cost, parts = cutRod(pricelist[:length - i - 1], cost, parts)\n        if maxVal &lt; x + w:\n            maxVal = x + w\n\n    return [maxVal, cost, parts]\n</code></pre>\n\n<p>As of right now this function returns only the maximum cost for a rod that is the same length of the list size.</p>\n"}, {"tags": ["python", "arrays", "list", "loops"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1524687180, "post_id": 50030460, "comment_id": 87077221, "body": "do <code>array=[[&quot;string&quot;] for _ in range(2)] for _ in range(2)]</code>"}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 0, "creation_date": 1524687541, "post_id": 50030460, "comment_id": 87077392, "body": "Also check your final print: it&#39;s not printing in the same order as the loop. Loop does (00,01,10,11)"}, {"owner": {"reputation": 323, "user_id": 9371607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFpiK.png?s=128&g=1", "display_name": "Joshua Yonathan", "link": "https://stackoverflow.com/users/9371607/joshua-yonathan"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1524687547, "post_id": 50030460, "comment_id": 87077398, "body": "@Jean-Fran&#231;oisFabre missing a <code>[</code> in the beginning: <code>array=[[[&quot;&quot;] for _ in range(2)] for _ in range(2)]</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1524687585, "post_id": 50030460, "comment_id": 87077419, "body": "yes, of course!"}], "owner": {"reputation": 25, "user_id": 9699940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31dedf12eb040e96332cbb863bb989fa?s=128&d=identicon&r=PG&f=1", "display_name": "Deglupta", "link": "https://stackoverflow.com/users/9699940/deglupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1524686914, "answer_count": 0, "score": 0, "last_activity_date": 1524686584, "creation_date": 1524686584, "question_id": 50030460, "link": "https://stackoverflow.com/questions/50030460/filling-multidimensional-list-by-loop", "closed_reason": "Duplicate", "title": "Filling multidimensional list by loop", "body": "<p>I have little experience coding, most of what I did was done with VBA and there you have arrays. On python you apparently do not use arrays but lists of lists if I'm not mistaken and I seem to have trouble with these. Here a sample of what I did:</p>\n\n<pre><code>array=[[\"string\"]*2]*2\n</code></pre>\n\n<p>So essentially I wanted to create a 2x2 array. This I wanted to fill using a loop, for the minimal example I fill it with a string b+a:</p>\n\n<pre><code>for b in range(0,2):\n    for a in range(0,2):\n        array[b][a]=b,\"+\",a\n        print(array[b][a])\n\nprint(array[0][0], array[1][0],array[0][1], array[1][1])\n</code></pre>\n\n<p>The first print command gives what I expected:</p>\n\n<pre><code>(0, '+', 0)\n(0, '+', 1)\n(1, '+', 0)\n(1, '+', 1)\n</code></pre>\n\n<p>But the second print command is strange:</p>\n\n<pre><code>(1, '+', 0) (1, '+', 0) (1, '+', 1) (1, '+', 1)\n</code></pre>\n\n<p>When printing array[0][0] I would expect to receive (0, '+', 0) but instead I get what I would expect to be array[1][0]. It looks like when using print inside the loop I get the results that I expect but if I print the exact same element outside of the loops I get strange results.</p>\n\n<pre><code>array[0][0]\n</code></pre>\n\n<p>should have the exact same content as</p>\n\n<pre><code>array[b][a]\n</code></pre>\n\n<p>for when I just started the loop (first print command), no?</p>\n\n<p>I'm sorry I don't really know how to describe the problem more precisely, I hope you see what my problem is.</p>\n"}, {"tags": ["python", "pandas", "selenium", "dataframe", "web-scraping"], "comments": [{"owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "edited": false, "score": 1, "creation_date": 1524696544, "post_id": 50030448, "comment_id": 87080837, "body": "<code>.append</code> is used to append the dataframe - by definition <i>add</i> new rows - that&#39;s why data you&#39;re trying to <i>insert</i> are instead attached in new rows."}, {"owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "edited": false, "score": 0, "creation_date": 1524697432, "post_id": 50030448, "comment_id": 87081095, "body": "What i&#39;m not sure about is whether <code>art_type</code> is a list that fills a single row or is it, say, a list of length 5 that&#39;s meant to fill 5 rows?"}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "reply_to_user": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "edited": false, "score": 0, "creation_date": 1524707817, "post_id": 50030448, "comment_id": 87083566, "body": "Thanks @GeneBurinsky. I think art_type is a list of items that is supposed to fill a single row at a time, with multiple items such as [Review Article, Open Access] or [Research Article] or [Research Article, Open Access}. So it could be multiple items or a single item, but is supposed to fille one row at a time. Thank you for your answer. I will try it now and see if it works."}, {"owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "edited": false, "score": 0, "creation_date": 1524708203, "post_id": 50030448, "comment_id": 87083643, "body": "It may also be helpful to not split the string into a list. For example, simply doing <code>data_dict[&#39;article_type&#39;].append(art_type.text)</code> would be more convenient and later you can use <code>panda</code>&#39;s string functionality to split as you wish. I&#39;m guessing that it would also be better in terms of memory"}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "reply_to_user": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "edited": false, "score": 0, "creation_date": 1524708740, "post_id": 50030448, "comment_id": 87083773, "body": "Oooh,ok. That&#39;s a great suggestion. And right, better in terms of memory as well."}], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "edited": false, "score": 0, "creation_date": 1524753924, "post_id": 50032469, "comment_id": 87108050, "body": "Thank you for this answer, but I am still getting an error since it raises an array must be the same length issue."}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "edited": false, "score": 0, "creation_date": 1524753989, "post_id": 50032469, "comment_id": 87108096, "body": "Further, I tried your comment on <code>data_dict[&quot;Type of Article&quot;].append(art_type.text)</code> , but that gives me a <code>Nonetype object has no attribute text</code> error."}, {"owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "reply_to_user": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "edited": false, "score": 0, "creation_date": 1524760435, "post_id": 50032469, "comment_id": 87112109, "body": "@VijayRamesh the second part comes because because sometimes certain tags are not found in the website. For example, if a journal doesn&#39;t have tags or types or for some reason the website is different in the backend then <code>element.find</code> will return a <code>Nonetype</code>. Because of this, you should always include error checkers. Regarding the second error, if you have 5 Abstracts but only 3 sets of authors, and 4 Titles then <code>pandas</code> won&#39;t be able to create the dataframe. Can you give a link to at least one of the websites you&#39;re scraping?"}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "edited": false, "score": 0, "creation_date": 1524781459, "post_id": 50032469, "comment_id": 87121789, "body": "Here&#39;s a link to one of the pages I am scraping - <a href=\"https://www.sciencedirect.com/search/advanced?qs=Climate%20Change&amp;articleTypes=REV%2CFLA&amp;show=100&amp;sortBy=relevance\" rel=\"nofollow noreferrer\">sciencedirect.com/search/&hellip;</a>"}, {"owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "reply_to_user": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "edited": false, "score": 0, "creation_date": 1524783508, "post_id": 50032469, "comment_id": 87122368, "body": "@VijayRamesh thanks for the sample url. The code above should work. I forgot to add fillers for times when nothing is found. Additionally, because in the example we are only filling in <code>&quot;Title&quot;</code> and <code>&#39;Type of Article&quot;</code>, I restricted the <code>data_dict</code> to only have those fields but you add the rest of fields, you should add back the other keys."}, {"owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "edited": false, "score": 0, "creation_date": 1524856193, "post_id": 50032469, "comment_id": 87154060, "body": "Thank you for your detailed answer! Looks like it works, and you are right, some elements are not being scraped, because they probably have different HTML paths, which I just realized. Need to figure out an if statement to scrape either this path or the other and add it to the dictionary."}], "tags": [], "owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "is_accepted": true, "score": 0, "last_activity_date": 1524784838, "last_edit_date": 1524784838, "creation_date": 1524697050, "answer_id": 50032469, "question_id": 50030448, "link": "https://stackoverflow.com/questions/50030448/rows-not-being-appended-correctly-in-pandas/50032469#50032469", "title": "Rows not being appended correctly in Pandas", "body": "<p>As per comments, <code>pd.DataFrame.append</code> is used to append the dataframe - by definition <em>add</em> new rows - that's why data you try to insert are instead attached in new rows. You can insert data into the dataframe individually but it's not pretty. For example, you can insert with <code>data.loc[i,'Title'] = atag</code> where <code>i</code> is a row counter (ie <code>i=3</code>) <em>note</em> this also needs you to create a full-sized empty dataframe. </p>\n\n<p>instead, I recommend filling a dictionary with the data first then passing the dictionary to <code>pandas</code>; ie:</p>\n\n<pre><code>import pandas as pd\nimport requests\nfrom bs4 import BeautifulSoup as bs\nimport numpy as np\n\n\n#fetch data\nsample_url = \"https://www.sciencedirect.com/search/advanced?qs=Climate%20Change&amp;articleTypes=REV%2CFLA&amp;show=100&amp;sortBy=relevance\"\nsoup = bs(requests.get(sample_url).text,\"html.parser\")\nelements = soup.find_all(\"div\", {\"class\",\"result-item-content\"})\n\n#create data container\ndata_dict = {}\nfor key in [\"Title\",\"Type of Article\",\"Names of Authors\",\"Journal &amp; Dates\"]:\n    data_dict[key] = []\n    #fields yet to add: \"Abstract\"\n\n#convenience function:\ndef add_item(item,key,data_dict):\n    #if item is found, add to data\n    if item is not None:\n        data_dict[key].append(item.text)\n    #if nothing is found, add missing flag\n    if item is None:\n        data_dict[key].append(np.nan)\n\n#loop over elements    \nfor element in elements:\n    #find element\n    art_type = element.find(\"ol\",{\"class\",\"OpenAccessArchive hor\"})\n    add_item(art_type, \"Type of Article\", data_dict)\n\n    #repeat for remainder of fields    \n    atag = element.find('a')\n    add_item(atag, 'Title', data_dict)\n\n    author = element.find(\"ol\",{\"class\",\"Authors hor undefined\"})\n    add_item(author, 'Names of Authors', data_dict)\n\n    # Find Journal Name\n    journal = element.find(\"ol\",{\"class\",\"SubType hor\"})\n    add_item(journal,'Journal &amp; Dates', data_dict)\n\ndata = pd.DataFrame(data_dict)\n</code></pre>\n\n<p>The sample output:</p>\n\n<pre><code>In [21]: data.head(n=3)\nOut[21]:\n                                     Journal &amp; Dates  \\\n0  Global Environmental Change, Volume 50, May 20...\n1  International Journal of Hygiene and Environme...\n2  Global Environmental Change, Volume 50, May 20...\n\n                                    Names of Authors  \\\n0  [K.M. Findlater, S.D. Donner, T. Satterfield, ...\n1                                [Shouro Dasgupta, ]\n2                    [Thad Kousser, Bruce Tranter, ]\n\n                                               Title     Type of Article\n0  Integration anxiety: The cognitive isolation o...  Research article,\n1      Burden of climate change on malaria mortality  Research article,\n2  The influence of political leaders on climate ...  Research article\n</code></pre>\n\n<p>Also note that there are missing values. I'd look into them...</p>\n\n<pre><code>In [37]: data.isnull().sum()\nOut[37]:\nJournal &amp; Dates      0\nNames of Authors    15\nTitle                0\nType of Article      0\ndtype: int64\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 6561617, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207107326503271/picture?type=large", "display_name": "Vijay Ramesh", "link": "https://stackoverflow.com/users/6561617/vijay-ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 50032469, "answer_count": 1, "score": 0, "last_activity_date": 1524784838, "creation_date": 1524686531, "last_edit_date": 1524753851, "question_id": 50030448, "link": "https://stackoverflow.com/questions/50030448/rows-not-being-appended-correctly-in-pandas", "title": "Rows not being appended correctly in Pandas", "body": "<p>I am currently trying to scrape data from the research database - ScienceDirect. I am obtaining the title of each research article using Beautiful Soup and adding it to an empty pandas dataframe. Following this, I obtain information on the type of research article for above articles. However, when I try to append this data to the dataframe, it is being added to the bottom ie. Instead of being added to the first 100 rows, it is creating 100 new rows. </p>\n\n<pre><code>from bs4 import BeautifulSoup as bs\nsoup = bs(requests.get(browser.current_url).text,\"html.parser\")\n\n# Using soup to retrieve the elements related to Title, Type of Article, Names of Authors and Abstract\nelements = soup.find_all(\"div\", {\"class\",\"result-item-content\"})\n\ndata = pd.DataFrame(columns = [\"Abstract\",\"Journal &amp; Dates\",\"Names of Authors\",\"Title\",\"Type of Article\"])\n\nfor element in elements:\n    atag = element.find('a')\n    if atag:\n        atag = atag.text.split(\"\\n\")\n        data = data.append({\"Title\": atag}, ignore_index=True)\n\ndata.head()\n\nAbstract    Journal &amp; Dates Names of Authors    Title   Type of Article\n0   NaN NaN NaN [Morphological, molecular identification and p...   NaN\n1   NaN NaN NaN [Assessment of soil erosion in a tropical moun...   NaN\n2   NaN NaN NaN [Ethnomedicinal assessment of Irula tribes of ...   NaN\n3   NaN NaN NaN [Latitudinal variation in summer monsoon rainf...   NaN\n4   NaN NaN NaN [IUCN greatly underestimates threat levels of ...   NaN\n</code></pre>\n\n<p>Now, I try to search for information on the Type of Research Article and I append it to the above dataframe.</p>\n\n<pre><code>for element in elements:\n    art_type = element.find(\"ol\",{\"class\",\"OpenAccessArchive hor\"})\n    if art_type:\n        art_type = art_type.text.split(\"\\n\")\n        data = data.append({\"Type of Article\": art_type}, ignore_index=True)\n\ndata.tail()\n\n    Abstract    Journal &amp; Dates Names of Authors    Title   Type of Article\n194 NaN NaN NaN NaN [Open access, Research article, ]\n195 NaN NaN NaN NaN [Research article, ]\n196 NaN NaN NaN NaN [Research article, ]\n197 NaN NaN NaN NaN [Research article, ]\n198 NaN NaN NaN NaN [Research article, ]\n</code></pre>\n\n<p>If you look at the tail of the dataframe, weirdly, it is adding the info to the last 100 or 90 rows. How do I correct this? </p>\n\n<p>Also, I am new to scraping and python. Any suggestions on what would be best way to store the data, so that I can carry out analysis on the same later? Such as a probabilistic modeling of topics?</p>\n\n<p><strong>EDIT</strong> based on the answer, I tried the following, but I am getting an error:</p>\n\n<pre><code>data_dict = {}\n\n# Create keys\nfor key in [\"Abstract\",\"Journal &amp; Dates\",\"Names of Authors\",\"Title\",\"Type of Article\"]:\n    data_dict[key] = []\n\n# Loop through the elements object\nfor element in elements:\n\n    # Find all the Title tags\n    atag = element.find('a')\n    if atag:\n        atag = atag.text.split(\"\\n\")\n        data_dict[\"Title\"].append(atag)\n\n    # Find all article_type information\n    art_type = element.find(\"ol\",{\"class\",\"OpenAccessArchive hor\"})\n    if art_type:\n        art_type = art_type.text.split(\"\\n\")\n        data_dict[\"Type of Article\"].append(art_type)\n\n    # Find Names of Authors\n    author = element.find(\"ol\",{\"class\",\"Authors hor undefined\"})\n    if author:\n        author = author.text.split(\"\\n\")\n        data_dict[\"Names of Authors\"].append(author)\n\n    # Find Journal Name\n    journal = element.find(\"ol\",{\"class\",\"SubType hor\"})\n    if journal:\n        journal = journal.text.split(\"\\n\")\n        data_dict[\"Journal &amp; Dates\"].append(journal)\n\ndata = pd.DataFrame(data_dict)\n\n*ERROR*\n~/miniconda/lib/python3.6/site-packages/pandas/core/frame.py in extract_index(data)\n   6209             lengths = list(set(raw_lengths))\n   6210             if len(lengths) &gt; 1:\n-&gt; 6211                 raise ValueError('arrays must all be same length')\n   6212 \n   6213             if have_dicts:\n</code></pre>\n\n<p>ValueError: arrays must all be same length</p>\n"}, {"tags": ["python", "mysql", "flask"], "comments": [{"owner": {"reputation": 99308, "user_id": 107744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d6a34fb9a78937e1500b7ae0b5aee37?s=128&d=identicon&r=PG&f=1", "display_name": "spencer7593", "link": "https://stackoverflow.com/users/107744/spencer7593"}, "edited": false, "score": 1, "creation_date": 1524686909, "post_id": 50030447, "comment_id": 87077098, "body": "There&#39;s a spurious backtick character after <code>WHERE</code>. And that <code>s</code> following the closing paren doesn&#39;t look right to me. (Maybe that&#39;s something special for FLASK, but it doesn&#39;t look like valid SQL.) Also, the join predicate  doesn&#39;t look right to me... maybe we meant to write <code>ON h.site_id = s.site_id</code> ?  Have we <i>tested</i> the SQL in another client (like the mysql command line client), before we incorporated it into the app?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524687291, "post_id": 50030447, "comment_id": 87077279, "body": "Please paste the whole traceback, not just a description of it. Also, what kind of database are you using? More generally, give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, rather than just random fragments of code and output."}, {"owner": {"reputation": 102, "user_id": 9173278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71c45035f32a048d6c4290f5ff0d3084?s=128&d=identicon&r=PG&f=1", "display_name": "Newbiedev", "link": "https://stackoverflow.com/users/9173278/newbiedev"}, "edited": false, "score": 0, "creation_date": 1524688008, "post_id": 50030447, "comment_id": 87077613, "body": "I&#39;ve &#233;dit my first post, with My route from app.py and the elements above. As database I&#39;m using MySQL"}, {"owner": {"reputation": 1155, "user_id": 3602094, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nUMMY.png?s=128&g=1", "display_name": "Montreal", "link": "https://stackoverflow.com/users/3602094/montreal"}, "edited": false, "score": 0, "creation_date": 1524730594, "post_id": 50030447, "comment_id": 87092235, "body": "@Newbiedev, I suppose that you do not use any additional library, but if you are interested, I can expand my answer and show how to avoid such problem using <code>SQLAlchemy</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1155, "user_id": 3602094, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nUMMY.png?s=128&g=1", "display_name": "Montreal", "link": "https://stackoverflow.com/users/3602094/montreal"}, "is_accepted": false, "score": 0, "last_activity_date": 1524730371, "creation_date": 1524730371, "answer_id": 50038007, "question_id": 50030447, "link": "https://stackoverflow.com/questions/50030447/flask-you-have-an-error-in-your-sql-syntax-near-site-ids-at-line-1/50038007#50038007", "title": "FLASK - You have an error in your SQL syntax near &#39;%(site_id)s&#39; at line 1", "body": "<p>I think, you have a mistake when you are formatting your string with sql query.\nTry this</p>\n\n<pre><code>@app.route('/historique/&lt;int:site_id&gt;')\ndef historique(site_id):\n    db = get_db()\n    query = 'SELECT * FROM sites s JOIN historique h ON h.site_id WHERE `s.site_id = {site_id}'.format(site_id=site_id)\n    db.execute(query)\n    # ... rest of the code ...\n</code></pre>\n\n<p>And yes, this backtick before <code>s.site_id</code> <em>is</em> very suspicious.</p>\n"}], "owner": {"reputation": 102, "user_id": 9173278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71c45035f32a048d6c4290f5ff0d3084?s=128&d=identicon&r=PG&f=1", "display_name": "Newbiedev", "link": "https://stackoverflow.com/users/9173278/newbiedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524730371, "creation_date": 1524686530, "last_edit_date": 1524688436, "question_id": 50030447, "link": "https://stackoverflow.com/questions/50030447/flask-you-have-an-error-in-your-sql-syntax-near-site-ids-at-line-1", "title": "FLASK - You have an error in your SQL syntax near &#39;%(site_id)s&#39; at line 1", "body": "<p>I' like to have a small explanation about Flask, Something I don't understand. I'm looking to get DATA from Database by an ID. The ID is my route parameter. \nI've create my route, but I'm having an error, And I don't understand What they are requesting in fact ? An element from Database ?</p>\n\n<blockquote>\n  <p>mysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%(site_id)s' at line 1</p>\n</blockquote>\n\n<p>My route code :</p>\n\n<pre><code>    #Construct app\napp = Flask(__name__)\napp.config.from_object('config')\napp.config.from_object('secret_config')\n\n#Database functions\ndef connect_db () :\n    g.mysql_connection = mysql.connector.connect(\n        host = app.config['DATABASE_HOST'],\n        user = app.config['DATABASE_USER'],\n        password = app.config['DATABASE_PASSWORD'],\n        database = app.config['DATABASE_NAME']\n    )\n\n    g.mysql_cursor = g.mysql_connection.cursor()\n    return g.mysql_cursor\n\n    def get_db () :\n        if not hasattr(g, 'db') :\n            g.db = connect_db()\n        return g.db\n\n@app.teardown_appcontext\ndef close_db (error) :\n    if hasattr(g, 'db') :\n        g.db.close()\n\n\n\n@app.route('/historique/&lt;int:site_id&gt;')\ndef historique(site_id):\n\ndb = get_db()\n\ndb.execute('SELECT * FROM sites s JOIN historique h ON h.site_id WHERE `s.site_id = %(site_id)s', {'id': site_id})\n\nentries = db.fetchall()\nreturn render_template('historique.html',  entries = entries)\n</code></pre>\n\n<p>And Here is my HTML Code</p>\n\n<pre><code>{% extends 'layout.html' %}\n\n{% block titre %}\n    Acceuil\n{% endblock %}\n\n{% block body %}\n&lt;h1&gt;Historique d'activit\u00e9 pour  {{ entrie.0 }}&lt;/h1&gt;\n{% for entrie in entries %}\n{% endfor %}\n{% endblock %}\n</code></pre>\n\n<p>I only like to understand. Thanks a lot for your help.</p>\n"}, {"tags": ["python", "python-3.x", "zeromq", "pyzmq"], "answers": [{"comments": [{"owner": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "edited": false, "score": 0, "creation_date": 1524732227, "post_id": 50032682, "comment_id": 87093227, "body": "This is great. Thanks for the detailed response. I&#39;m assuming in this case that send_pyobj() cannot be used &#39;raw&#39; in a pub-sub pattern (as this requires a topic subscription?). I&#39;m surprised pyzmq doesn&#39;t &#39;wrap&#39; this; I figured passing python objects in a pub-sub pattern would be the #1 use case."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "edited": false, "score": 0, "creation_date": 1524742749, "post_id": 50032682, "comment_id": 87099869, "body": "Well, after indeed many years ( actually more than I would like to admit ) with ZeroMQ-based smart distributed systems in use, I have <b>never</b> used <code>.send_string()</code>, the less the <code>.send_pyobj()</code> python-specific methods ( add-on masquerades ), so a #1 in any &quot;hitparade&quot; is indeed a subjective measure <b><code>:o)</code></b> Anyway, glad you have found the answer interesting, or even &quot; <i>great</i> &quot; -- it is a StackOverflow culture to express that as a [ +1 ] vote and by Accept-ing the interesting and helpful posts - so feel free to do so."}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 0, "last_activity_date": 1526043679, "last_edit_date": 1526043679, "creation_date": 1524698737, "answer_id": 50032682, "question_id": 50030416, "link": "https://stackoverflow.com/questions/50030416/how-do-i-send-a-dict-with-the-pub-sub-pattern-using-pyzmq/50032682#50032682", "title": "How do I send a dict with the PUB/SUB pattern using pyzmq?", "body": "<blockquote>\n  <ol start=\"3\">\n  <li>Can I have many <strong><code>PUB</code></strong> servers broadcasting?</li>\n  </ol>\n</blockquote>\n\n<h2>Yes, you can</h2>\n\n<p>Easy.</p>\n\n<hr>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>I don't receive anything on the other end... What am I doing wrong?</li>\n  </ol>\n</blockquote>\n\n<h2>Do not subscribe to <strong><code>\"1\"</code></strong> in cases, when it never comes</h2>\n\n<p>This single reason stands behind \"not receiving anything\" ( unless it started with <strong><code>\"1\"</code></strong>, which it obviously never did, as the payload was assembled right by the <strong><code>socket.send_object( ... )</code></strong> and there was never a <strong><code>\"1\"</code></strong> to match on the position of the string-alike byte[0].</p>\n\n<hr>\n\n<blockquote>\n  <ol>\n  <li>...  how to set the topic for <strong><code>send_pyobj()</code></strong>?</li>\n  </ol>\n</blockquote>\n\n<h2>Well, you never know</h2>\n\n<p>This ought be set using other means than guessing a few bytes, \"matching\" the initial section of the object-byte-string-representation.</p>\n\n<p>Simplest ever is to \"prepend\" a controlled value on the sender side like this :</p>\n\n<pre><code>import dill as pickle\n\naConstantNbytesPUB_TOPIC_FILTER_PREFIX = \"{UUID:0000-0000-0000-1111-2222}\"\n\nsocket.send( aConstantNbytesPUB_TOPIC_FILTER_PREFIX\n           + pickle.dumps( anObjectToSEND )\n             )\n...\n\naMSG = socket.recv()\nprint( pickle.loads( aMSG[ len( aConstantNbytesPUB_TOPIC_FILTER_PREFIX ):]\n                     )\n       )\n</code></pre>\n\n<p>Using a multi-part message composition is also possible, yet a bit longer to demonstrate the concept here.</p>\n\n<p>Both <strong><code>pickle</code></strong> and <strong><code>dill</code></strong> are limited in their SER/DES-strategies for object decomposition / traversal / reinstatement capabilities and security warnings are well known to be taken care off.</p>\n"}], "owner": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 2, "accepted_answer_id": 50032682, "answer_count": 1, "score": 3, "last_activity_date": 1526043679, "creation_date": 1524686383, "last_edit_date": 1524698097, "question_id": 50030416, "link": "https://stackoverflow.com/questions/50030416/how-do-i-send-a-dict-with-the-pub-sub-pattern-using-pyzmq", "title": "How do I send a dict with the PUB/SUB pattern using pyzmq?", "body": "<p>I'm trying to send a python dictionary, using something like:</p>\n\n<pre><code>import zmq\ncontext = zmq.Context()\nsocket = context.socket(zmq.PUB)\nsocket.bind(\"tcp://*:%s\" % port\nsocket.send_pyobj({'hello':'world'})\n</code></pre>\n\n<p>and receive it using:</p>\n\n<pre><code>socket.connect (\"tcp://localhost:%s\" % port)\ntopicfilter = \"1\"\n\nsocket.setsockopt_string(zmq.SUBSCRIBE, topicfilter)\n\nwhile True:\n    print(socket.recv_pyobj())\n</code></pre>\n\n<p><strong>Questions</strong>:</p>\n\n<ol>\n<li>I can't seem to figure out how to set the topic for <code>send_pyobj()</code>.</li>\n<li>Needless to say, I don't receive anything on the other end. I managed to get it going with strings and <code>send_string()</code>, so it's definitely connecting. What am I doing wrong?</li>\n<li>Can I have many <strong><code>PUB</code></strong> servers broadcasting? Thereby creating a sort of many-to-many, where other apps can dip into the flow?</li>\n</ol>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 3, "creation_date": 1524686501, "post_id": 50030414, "comment_id": 87076906, "body": "Can you show some working example code demonstrating the problem and showing what you hope to accomplish?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1524686797, "post_id": 50030414, "comment_id": 87077051, "body": "The short answer, if I understand you, is that you can&#39;t. But if you explain your motivation and give context, perhaps someone could suggest a better approach."}, {"owner": {"reputation": 1022, "user_id": 5862455, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/351a626af86085930bfb40098c38897c?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5862455/albert"}, "reply_to_user": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 1, "creation_date": 1524686812, "post_id": 50030414, "comment_id": 87077055, "body": "@glibdud well actually it&#39;s not code-specific, so you can take any such chain of exceptions. I can&#39;t do this right now. If it&#39;s mandatory then I will do this a tad later."}, {"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 2, "creation_date": 1524686962, "post_id": 50030414, "comment_id": 87077125, "body": "It&#39;s not about code specificity, it&#39;s about illustrating what you&#39;re trying to do. I can&#39;t tell that from your short description (but it&#39;s possible others might)."}], "answers": [{"comments": [{"owner": {"reputation": 1022, "user_id": 5862455, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/351a626af86085930bfb40098c38897c?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5862455/albert"}, "edited": false, "score": 0, "creation_date": 1524822450, "post_id": 50030566, "comment_id": 87135703, "body": "Seems like the best reply =D Thank you, even though, if you don&#39;t mind, I will get back to the question, but a bit later. I will add some more details."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 1, "last_activity_date": 1524687358, "last_edit_date": 1524687358, "creation_date": 1524687046, "answer_id": 50030566, "question_id": 50030414, "link": "https://stackoverflow.com/questions/50030414/how-to-catch-inner-exception-in-python/50030566#50030566", "title": "How to catch inner exception in python?", "body": "<blockquote>\n  <p>Apparently first I have to catch the outmost exception</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>I do this and then how do I except the one that follows</p>\n</blockquote>\n\n<p>You can not <code>except</code> the one that follows because you're too late.  You can examine the context of the exception you did catch, though.  Example:</p>\n\n<pre><code>&gt;&gt;&gt; def foo():\n...     try:\n...         errorerror\n...     except NameError:\n...         1/0\n...         \n&gt;&gt;&gt; try:\n...     foo()\n... except ZeroDivisionError as err:\n...     zerr = err\n...     \n&gt;&gt;&gt; zerr.__context__\nNameError(\"name 'errorerror' is not defined\")\n</code></pre>\n\n<p>When cleaning up after the inner exception, there may be other interesting info for you on the outer exception instance.  Look at: </p>\n\n<ul>\n<li>the <code>__context__</code> attribute for implicitly chained exceptions</li>\n<li>the <code>__cause__</code> attribute for explicitly chained exceptions</li>\n<li>the <code>__traceback__</code> attribute for further context if you need it</li>\n</ul>\n\n<p>See <a href=\"https://www.python.org/dev/peps/pep-3134/\" rel=\"nofollow noreferrer\">PEP 3134 -- Exception Chaining and Embedded Tracebacks</a> for further details.</p>\n"}], "owner": {"reputation": 1022, "user_id": 5862455, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/351a626af86085930bfb40098c38897c?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5862455/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 50030566, "answer_count": 1, "score": -1, "last_activity_date": 1524687358, "creation_date": 1524686370, "last_edit_date": 1524686519, "question_id": 50030414, "link": "https://stackoverflow.com/questions/50030414/how-to-catch-inner-exception-in-python", "title": "How to catch inner exception in python?", "body": "<p>Let's say I have an exception that is triggered by another one.\nI have a set of actions meant for that inner exception. Apparently first I have to catch the outmost exception, I do this and then how do I <code>except</code> the one that follows?</p>\n"}, {"tags": ["python", "decorator", "python-decorators", "exponential-backoff"], "answers": [{"tags": [], "owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "is_accepted": true, "score": 1, "last_activity_date": 1526924265, "last_edit_date": 1526924265, "creation_date": 1526923850, "answer_id": 50453891, "question_id": 50030408, "link": "https://stackoverflow.com/questions/50030408/attribute-access-on-a-decorated-callable-class/50453891#50453891", "title": "Attribute access on a decorated callable class", "body": "<p>The <code>backoff</code> module in its implementation <a href=\"https://github.com/litl/backoff/blob/master/backoff/_sync.py#L83\" rel=\"nofollow noreferrer\">uses <code>functools.wraps</code></a> which calls <code>functools.update_wrapper</code> and you can see <a href=\"https://hg.python.org/cpython/file/tip/Lib/functools.py#l43\" rel=\"nofollow noreferrer\">from the source code</a> that by default it updates the <code>__dict__</code> of the wrapper:</p>\n\n<pre><code>WRAPPER_ASSIGNMENTS = ('__module__', '__name__', '__qualname__', '__doc__',\n                       '__annotations__')\nWRAPPER_UPDATES = ('__dict__',)\ndef update_wrapper(wrapper,\n                   wrapped,\n                   assigned = WRAPPER_ASSIGNMENTS,\n                   updated = WRAPPER_UPDATES):\n    \"\"\"Update a wrapper function to look like the wrapped function\n\n       wrapper is the function to be updated\n       wrapped is the original function\n       assigned is a tuple naming the attributes assigned directly\n       from the wrapped function to the wrapper function (defaults to\n       functools.WRAPPER_ASSIGNMENTS)\n       updated is a tuple naming the attributes of the wrapper that\n       are updated with the corresponding attribute from the wrapped\n       function (defaults to functools.WRAPPER_UPDATES)\n    \"\"\"\n    for attr in assigned:\n        try:\n            value = getattr(wrapped, attr)\n        except AttributeError:\n            pass\n        else:\n            setattr(wrapper, attr, value)\n    for attr in updated:\n        getattr(wrapper, attr).update(getattr(wrapped, attr, {}))\n    +\n\u2212# Issue #17482: set __wrapped__ last so we don't inadvertently copy it\n    # from the wrapped function when updating __dict__\n    wrapper.__wrapped__ = wrapped\n    # Return the wrapper so this can be used as a decorator via partial()\n    return wrapper\n\ndef wraps(wrapped,\n          assigned = WRAPPER_ASSIGNMENTS,\n          updated = WRAPPER_UPDATES):\n    \"\"\"Decorator factory to apply update_wrapper() to a wrapper function\n\n       Returns a decorator that invokes update_wrapper() with the decorated\n       function as the wrapper argument and the arguments to wraps() as the\n       remaining arguments. Default arguments are as for update_wrapper().\n       This is a convenience function to simplify applying partial() to\n       update_wrapper().\n    \"\"\"\n    return partial(update_wrapper, wrapped=wrapped,\n                   assigned=assigned, updated=updated)\n</code></pre>\n\n<hr>\n\n<p>Unfortunately it seems impossible to achieve what you want. The <code>backoff</code> module could allow optional <code>assigned</code>/<code>updated</code> attributes lists to be passed to <code>wraps</code> to avoid the copy of the attribute. However this would really solve the issue because at that point you would not have access to <code>n_calls</code>. </p>\n\n<p>You probably need to use a mutable object instead of a plain <code>int</code>.</p>\n"}], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "accepted_answer_id": 50453891, "answer_count": 1, "score": 1, "last_activity_date": 1526924265, "creation_date": 1524686344, "last_edit_date": 1526921615, "question_id": 50030408, "link": "https://stackoverflow.com/questions/50030408/attribute-access-on-a-decorated-callable-class", "title": "Attribute access on a decorated callable class", "body": "<p>I have a callable class:</p>\n\n<pre><code>class CallMeMaybe:\n\n    __name__ = 'maybe'\n\n    def __init__(self):\n        self.n_calls = 0\n\n    def __call__(self):\n        self.n_calls += 1\n        raise Exception\n</code></pre>\n\n<p>That seems to work as advertised:</p>\n\n<pre><code>&gt;&gt;&gt; f = CallMeMaybe()\n&gt;&gt;&gt; f.n_calls\n0\n&gt;&gt;&gt; for i in range(7):\n...     try:\n...         f()\n...     except Exception:\n...         pass\n...     \n&gt;&gt;&gt; f.n_calls\n7\n</code></pre>\n\n<p>I want to decorate it with an exponential <a href=\"https://pypi.org/project/backoff/\" rel=\"nofollow noreferrer\">backoff</a>:</p>\n\n<pre><code>from backoff import on_exception, expo\ndec = on_exception(expo, Exception, max_tries=3, on_backoff=print)\nf = CallMeMaybe()\nf2 = dec(f)\n</code></pre>\n\n<p>Now it looks like attribute access stopped working:</p>\n\n<pre><code>&gt;&gt;&gt; f2.n_calls\n0\n&gt;&gt;&gt; f2()\n{'target': &lt;__main__.CallMeMaybe object at 0xcafef00d&gt;, 'args': (), 'kwargs': {}, 'tries': 1, 'elapsed': 2.1e-05, 'wait': 0.4843249208229148}\n{'target': &lt;__main__.CallMeMaybe object at 0xcafef00d&gt;, 'args': (), 'kwargs': {}, 'tries': 2, 'elapsed': 0.484935, 'wait': 1.6524016553598126}\n---------------------------------------------------------------------------\nException                                 Traceback (most recent call last)\n... blah blah blah\n&gt;&gt;&gt; f2.n_calls\n0\n</code></pre>\n\n<p>My question: who copied <code>n_calls</code> name into <code>f2</code>'s namespace, and why?  Now it holds a stale value - the correct value should be 3:</p>\n\n<pre><code>&gt;&gt;&gt; f2.__wrapped__.n_calls\n3\n</code></pre>\n"}, {"tags": ["python", "html", "json", "flask"], "comments": [{"owner": {"reputation": 486, "user_id": 5811576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45290ab2224d88a47888269ccc1a604b?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Johansson", "link": "https://stackoverflow.com/users/5811576/simon-johansson"}, "edited": false, "score": 0, "creation_date": 1524686891, "post_id": 50030354, "comment_id": 87077090, "body": "is close(f) ok? For me python complains but it might be that in python 3.6 close(f) became f.close().  Also in your case if the jsonFile exist at beginning of script but is empty it will render with data as &#39;test&#39;."}, {"owner": {"reputation": 415, "user_id": 4789252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d9b73655b305155ce5806b35dcdadcee?s=128&d=identicon&r=PG&f=1", "display_name": "PyNerd", "link": "https://stackoverflow.com/users/4789252/pynerd"}, "reply_to_user": {"reputation": 486, "user_id": 5811576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45290ab2224d88a47888269ccc1a604b?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Johansson", "link": "https://stackoverflow.com/users/5811576/simon-johansson"}, "edited": false, "score": 0, "creation_date": 1524687284, "post_id": 50030354, "comment_id": 87077276, "body": "Thank you, Simon.  Actually, I did have f.close() rather than close(f).  The json file is not empty."}, {"owner": {"reputation": 486, "user_id": 5811576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45290ab2224d88a47888269ccc1a604b?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Johansson", "link": "https://stackoverflow.com/users/5811576/simon-johansson"}, "edited": false, "score": 0, "creation_date": 1524687576, "post_id": 50030354, "comment_id": 87077417, "body": "Then if it exist you will render the template within the if statement. and data =&#39;test&#39; in your template. If you would like to read render with the data in the file you should try to read the content of the file before rendering passing it with the first statement."}], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 4789252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d9b73655b305155ce5806b35dcdadcee?s=128&d=identicon&r=PG&f=1", "display_name": "PyNerd", "link": "https://stackoverflow.com/users/4789252/pynerd"}, "edited": false, "score": 0, "creation_date": 1524753852, "post_id": 50031249, "comment_id": 87107994, "body": "Thank you.  I did this along with replacing the file_data = f.read with file_data = json.load(f).  It then worked correctly."}], "tags": [], "owner": {"reputation": 11, "user_id": 9269993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e9c1a6de7513f0743ce65059639b27?s=128&d=identicon&r=PG&f=1", "display_name": "J. Fay", "link": "https://stackoverflow.com/users/9269993/j-fay"}, "is_accepted": false, "score": 1, "last_activity_date": 1524689897, "creation_date": 1524689897, "answer_id": 50031249, "question_id": 50030354, "link": "https://stackoverflow.com/questions/50030354/writing-to-and-reading-from-json-file/50031249#50031249", "title": "Writing To and Reading From JSON File", "body": "<p>As @Simon Johansson mentions, it looks like the issue is that you are not reading the contents of the file.  Making just that change seems to work for me.</p>\n\n<pre><code>@app.route('/test')\ndef test():\n    title = \"Tests\"\n    jsonFile = \"tests.json\"\n    if os.path.exists(jsonFile):\n        file_data = \"\"\n        try:\n            with open(jsonFile) as f:\n                file_data = f.read()\n        except:\n            file_data = \"could not read file\"\n        return render_template('tests.html', title=title, data=file_data)\n    else:\n        data = {\"tests\":[{\"id\":\"1\",\"ip_addy\":\"IP1\",\"name\":\"name1\"},\n                          {\"id\":\"2\",\"ip_addy\":\"IP2\",\"name\":\"name2\"},\n                          {\"id\":\"3\",\"ip_addy\":\"IP3\",\"name\":\"name3\"}\n                         ]}\n        with open(jsonFile, \"w+\") as f:\n            json.dump(data, f)\n        f.close()\n        return render_template('tests.html', title=title, data=data)\n</code></pre>\n\n<p>I tried modifying the file data once written and the changed data does show up correctly, indicating that the data is read from the file ok if present.  </p>\n\n<p>I used a simple templates\\tests.html </p>\n\n<pre><code>&lt;html&gt;&lt;head&gt;&lt;title&gt;{{title}}&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;Data:&lt;br&gt;{{data}}&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 4789252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d9b73655b305155ce5806b35dcdadcee?s=128&d=identicon&r=PG&f=1", "display_name": "PyNerd", "link": "https://stackoverflow.com/users/4789252/pynerd"}, "is_accepted": false, "score": 1, "last_activity_date": 1524754188, "creation_date": 1524754188, "answer_id": 50046053, "question_id": 50030354, "link": "https://stackoverflow.com/questions/50030354/writing-to-and-reading-from-json-file/50046053#50046053", "title": "Writing To and Reading From JSON File", "body": "<p>This is the solution to the problem, thanks to Simon and J. Fay.  The data must be written and read as json.</p>\n\n<pre><code>@app.route('/test')\ndef test():\n    title = \"Tests\"\n    jsonFile = \"tests.json\"\n    if os.path.exists(jsonFile):\n        file_data = \"\"\n        try:\n            with open(jsonFile) as f:\n                file_data = json.load(f)\n            f.close()\n        except:\n            file_data = \"could not read file\"\n        return render_template('tests.html', title=title, data=file_data)\n    else:\n        data = {\"tests\":[{\"id\":\"1\",\"ip_addy\":\"IP1\",\"name\":\"name1\"},\n                         {\"id\":\"2\",\"ip_addy\":\"IP2\",\"name\":\"name2\"},\n                         {\"id\":\"3\",\"ip_addy\":\"IP3\",\"name\":\"name3\"}\n                         ]}\n        with open(jsonFile, \"w+\") as f:\n            json.dump(data, f)\n        f.close()\n        return render_template('tests.html', title=title, data=data)\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 4789252, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d9b73655b305155ce5806b35dcdadcee?s=128&d=identicon&r=PG&f=1", "display_name": "PyNerd", "link": "https://stackoverflow.com/users/4789252/pynerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524754188, "creation_date": 1524686123, "last_edit_date": 1524687191, "question_id": 50030354, "link": "https://stackoverflow.com/questions/50030354/writing-to-and-reading-from-json-file", "title": "Writing To and Reading From JSON File", "body": "<p>I am writing a script to check to see if a json file exists.  If it does, then it uses flask <strong>render_template</strong> function to use the data to load a web page.  If it does not, the script queries the database, puts the data in json format, and then creates and writes to the json file.  Here is some example code.</p>\n\n<pre><code>from flask import render_template\nimport json\nimport os\n\ntitle = \"Tests\"\njsonFile = \"tests.json\"\nif os.path.exists(jsonFile):\n    return render_template('tests.html', title=title, data='tests')\nelse:\n    data = '{\"tests\":[{\"id\":\"1\",\"ip_addy\":\"IP1\",\"name\":\"name1\"},\n                      {\"id\":\"2\",\"ip_addy\":\"IP2\",\"name\":\"name2\"},\n                      {\"id\":\"3\",\"ip_addy\":\"IP3\",\"name\":\"name3\"}\n                     ]}'\n    with open(jsonFile, \"w+\") as f:\n        json.dump(data, f)\n    f.close()\n    return render_template('tests.html', title=title, data=data)\n</code></pre>\n\n<p>It writes to the <strong>test.json</strong> file just fine, but when I reload the <strong>tests.html</strong> page after creating <strong>test.json</strong>, the html says there are no records to display.  Did I create the json file incorrectly?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9616e6cb4a5857d1ad52c179f3643f55?s=128&d=identicon&r=PG&f=1", "display_name": "spr_m", "link": "https://stackoverflow.com/users/9356414/spr-m"}, "edited": false, "score": 1, "creation_date": 1524687262, "post_id": 50030494, "comment_id": 87077258, "body": "This is awesome!! Thank you!"}], "tags": [], "owner": {"reputation": 3400, "user_id": 5436930, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a549d841c057b40d6af0d82da734dd5?s=128&d=identicon&r=PG&f=1", "display_name": "Grigoriy Mikhalkin", "link": "https://stackoverflow.com/users/5436930/grigoriy-mikhalkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1524686706, "creation_date": 1524686706, "answer_id": 50030494, "question_id": 50030247, "link": "https://stackoverflow.com/questions/50030247/labeling-customers-from-transactional-dataframe-pandas/50030494#50030494", "title": "Labeling customers from transactional dataframe (pandas)", "body": "<p>Here is solution that using <code>groupby</code> and <code>apply</code> with custom function:</p>\n\n<pre><code>def categorize(g):\n    if len(g) &gt; 1 and g.iloc[0]['itemDescription'] == 'X':\n        g['label'] = 'great'\n    elif len(g) &gt; 1 and g.iloc[0]['itemDescription'] != 'X':\n        g['label'] = 'awesome'\n    else:\n        g['label'] = 'boo'\n    return g\n\ndf.groupby('custID').apply(categorize)  \n#    custID  transacID   orderDate itemDescription    label\n# 0       1        111  2016-01-10               A  awesome\n# 1       1        112  2016-02-02               B  awesome\n# 2       1        112  2016-02-02               C  awesome\n# 3       1        113  2016-04-10               X  awesome\n# 4       2        211  2016-02-02               X      boo\n# 5       3        311  2016-04-05               X      boo\n# 6       4        411  2016-02-05               X    great\n# 7       4        411  2016-02-05               C    great\n# 8       4        412  2016-03-10               E    great\n# 9       4        413  2016-07-14               E    great\n</code></pre>\n\n<p>It's probable that there is more pandorable solution to this.</p>\n"}], "owner": {"reputation": 45, "user_id": 9356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9616e6cb4a5857d1ad52c179f3643f55?s=128&d=identicon&r=PG&f=1", "display_name": "spr_m", "link": "https://stackoverflow.com/users/9356414/spr-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 50030494, "answer_count": 1, "score": 1, "last_activity_date": 1524686706, "creation_date": 1524685667, "question_id": 50030247, "link": "https://stackoverflow.com/questions/50030247/labeling-customers-from-transactional-dataframe-pandas", "title": "Labeling customers from transactional dataframe (pandas)", "body": "<p>I'm working on a transactional dataset for customers that have purchased 'X'. Here's the logic:</p>\n\n<p>If the customer has a purchase history prior purchasing item 'X' (ex. custID 1) then label that customer as 'great'</p>\n\n<p>If the customer purchased X only once (ex. custID 2, 3) then label that customer as 'boo'</p>\n\n<p>If the customer purchased X as their first purchase and then purchased other items (ex. custID 4) then label that customer as 'awesome'</p>\n\n<p>I would like to write this function using python. Any suggestions would be highly appreciated.</p>\n\n<p>Current Output:</p>\n\n<pre><code>list = [(1, 111, '2016-01-10', 'A'), (1, 112, '2016-02-02', 'B'), (1, 112, '2016-02-02', 'C'), (1, 113, '2016-04-10', 'X'), (2, 211, '2016-02-02', 'X'), \n        (3, 311, '2016-04-05', 'X'), (4, 411, '2016-02-05', 'X'), (4, 411, '2016-02-05', 'C'), (4, 412, '2016-03-10', 'E'), (4, 413, '2016-07-14', 'E')]\nlabels = ['custID', 'transacID', 'orderDate', 'itemDescription']\ndf = pd.DataFrame.from_records(list, columns=labels)\ndf\n      custID transacID orderDate itemDescription\n0       1        111  2016-01-10               A\n1       1        112  2016-02-02               B\n2       1        112  2016-02-02               C\n3       1        113  2016-04-10               X\n4       2        211  2016-02-02               X\n5       3        311  2016-04-05               X\n6       4        411  2016-02-05               X\n7       4        411  2016-02-05               C\n8       4        412  2016-03-10               E\n9       4        413  2016-07-14               E\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>      custID transacID orderDate itemDescription  label\n0       1        111  2016-01-10               A  great\n1       1        112  2016-02-02               B  great\n2       1        112  2016-02-02               C  great\n3       1        113  2016-04-10               X  great\n4       2        211  2016-02-02               X  boo\n5       3        311  2016-04-05               X  boo\n6       4        411  2016-02-05               X  awesome\n7       4        411  2016-02-05               C  awesome\n8       4        412  2016-03-10               E  awesome\n9       4        413  2016-07-14               E  awesome\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "fortran", "genfromtxt"], "comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1524685828, "post_id": 50030231, "comment_id": 87076634, "body": "Did you search before asking?"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1524685897, "post_id": 50030231, "comment_id": 87076664, "body": "See <a href=\"https://stackoverflow.com/questions/5989351/reading-fortran-double-precision-format-into-python\" title=\"reading fortran double precision format into python\">stackoverflow.com/questions/5989351/&hellip;</a> Combine with <code>converters</code> in <code>genfromtxt</code>."}, {"owner": {"reputation": 486, "user_id": 5811576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45290ab2224d88a47888269ccc1a604b?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Johansson", "link": "https://stackoverflow.com/users/5811576/simon-johansson"}, "edited": false, "score": 0, "creation_date": 1524686087, "post_id": 50030231, "comment_id": 87076740, "body": "And this one <a href=\"https://stackoverflow.com/questions/1959210/python-scientific-notation-using-d-instead-of-e\" title=\"python scientific notation using d instead of e\">stackoverflow.com/questions/1959210/&hellip;</a>"}, {"owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "edited": false, "score": 0, "creation_date": 1524688371, "post_id": 50030231, "comment_id": 87077792, "body": "Yes, but my problem is I cannot load the fortran formatted numbers into python because it shows <code>nan</code>, not unable to replace <code>D</code>."}, {"owner": {"reputation": 6498, "user_id": 1004168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c05e808436031bc45a7620adc236e3d?s=128&d=identicon&r=PG", "display_name": "agentp", "link": "https://stackoverflow.com/users/1004168/agentp"}, "edited": false, "score": 0, "creation_date": 1524689641, "post_id": 50030231, "comment_id": 87078389, "body": "this seems to be specifically about using <code>genfromtxt</code> ?  Off hand I&#39;d say you need to set the type to string and convert after reading."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1524694514, "post_id": 50030231, "comment_id": 87080271, "body": "The <code>b&#39;...&#39;</code> denotes a bytestring in py3.  If you change the &#39;D&#39; to &#39;e&#39; ordinary float parsing should work."}, {"owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1524696422, "post_id": 50030231, "comment_id": 87080793, "body": "@hpaulj I&#39;m a newbie about bytestring, how exactly I should do? I tried <code>data.replace(&quot;D&quot;,&quot;e&quot;)</code>, but it doesn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1524701435, "creation_date": 1524701435, "answer_id": 50032987, "question_id": 50030231, "link": "https://stackoverflow.com/questions/50030231/how-to-read-a-file-with-fortran-formatted-numbers-into-python/50032987#50032987", "title": "How to read a file with fortran formatted numbers into python?", "body": "<pre><code>In [315]: txt = '''0.755473D-08\n     ...: 0.755473D-08\n     ...: 0.755473D-08'''\nIn [316]: np.genfromtxt(txt.splitlines())\nOut[316]: array([nan, nan, nan])\nIn [317]: np.genfromtxt(txt.splitlines(),dtype=None)\n...\nOut[317]: array([b'0.755473D-08', b'0.755473D-08', b'0.755473D-08'], dtype='|S12')\n</code></pre>\n\n<p>Using String <code>replace</code>:</p>\n\n<pre><code>In [319]: txt.replace('D','e')\nOut[319]: '0.755473e-08\\n0.755473e-08\\n0.755473e-08'\nIn [320]: np.genfromtxt(_.splitlines())\nOut[320]: array([7.55473e-09, 7.55473e-09, 7.55473e-09])\n</code></pre>\n\n<p>That could also be done line by line (when reading from a file).</p>\n\n<p>With a converter, applied to each element (column per line):</p>\n\n<pre><code>In [326]: np.genfromtxt(txt.splitlines(), converters={0:lambda x:float(x.replace('D','e'))}, encoding=None)\nOut[326]: array([7.55473e-09, 7.55473e-09, 7.55473e-09])\n</code></pre>\n\n<p>It doesn't try to do any further <code>dtype</code> conversion after the converter, so I had to include the <code>float()</code> in the converter.</p>\n"}], "owner": {"reputation": 1167, "user_id": 7613404, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af19ec64033a8acc6891f60f02cd7543?s=128&d=identicon&r=PG&f=1", "display_name": "kinder chen", "link": "https://stackoverflow.com/users/7613404/kinder-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524701435, "creation_date": 1524685611, "last_edit_date": 1524694080, "question_id": 50030231, "link": "https://stackoverflow.com/questions/50030231/how-to-read-a-file-with-fortran-formatted-numbers-into-python", "title": "How to read a file with fortran formatted numbers into python?", "body": "<p>I have a fortran formatted txt file with numbers like this <code>0.755473D-08</code>. </p>\n\n<p>if I use <code>np.genfromtxt(data,dtype=None)</code>, it shows <code>b'0.755473D-08'</code>. How can I can I get rid of <code>b</code>?</p>\n"}, {"tags": ["python", "python-3.x", "naming-conventions", "python-module"], "comments": [{"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1524685724, "post_id": 50030199, "comment_id": 87076580, "body": "I really think this depends on the use case. If you are going to have people doing things like <code>from gpio import *</code> then yeah go with the <code>GPIO</code> prefix scheme."}, {"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "reply_to_user": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 1, "creation_date": 1524685799, "post_id": 50030199, "comment_id": 87076621, "body": "I think <code>import *</code> is something that&#39;s never encouraged except in the <code>repl</code>."}, {"owner": {"reputation": 323, "user_id": 9371607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFpiK.png?s=128&g=1", "display_name": "Joshua Yonathan", "link": "https://stackoverflow.com/users/9371607/joshua-yonathan"}, "edited": false, "score": 1, "creation_date": 1524685921, "post_id": 50030199, "comment_id": 87076675, "body": "It is up to personal preference. If I am only using one class in a module then I prefer to use from module import class. If I am using multiple classes then I simply use import module."}], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1524685891, "post_id": 50030274, "comment_id": 87076662, "body": "I concur, you mostly see this type of naming in C where you don&#39;t have very good namespacing."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 5, "last_activity_date": 1524685763, "last_edit_date": 1592644375, "creation_date": 1524685763, "answer_id": 50030274, "question_id": 50030199, "link": "https://stackoverflow.com/questions/50030199/python3-module-import-naming-dilemma/50030274#50030274", "title": "python3 module import/naming dilemma", "body": "<p><a href=\"https://www.python.org/dev/peps/pep-0008/#naming-conventions\" rel=\"noreferrer\">PEP8</a> argues for <code>gpio.Input()</code>, etc.</p>\n<blockquote>\n<p>There's also the style of using a short unique prefix to group related names together. This is not used much in Python, ...</p>\n<p>In Python, this style is generally deemed unnecessary because attribute and method names are prefixed with an object, and function names are prefixed with a module name.</p>\n</blockquote>\n"}], "owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 50030274, "answer_count": 1, "score": 3, "last_activity_date": 1524685763, "creation_date": 1524685457, "question_id": 50030199, "link": "https://stackoverflow.com/questions/50030199/python3-module-import-naming-dilemma", "title": "python3 module import/naming dilemma", "body": "<p>I just finished a small all-python3 gpio module for use with Linux <code>gpiolib</code>. I've toyed with two different ways of naming and importing things in the client:</p>\n\n<h1>1</h1>\n\n<p>gpio.py</p>\n\n<pre><code>class GPIOInput(object):\n    ...\n\nclass GPIOEvent(object):\n    ...\n\nclass GPIOOutput(object):\n    ...\n</code></pre>\n\n<p>client.py</p>\n\n<pre><code>from gpio import GPIOEvent, GPIOOutput, GPIOInput\n\nirq = GPIOEvent(1, 14)\n</code></pre>\n\n<h1>2</h1>\n\n<p>gpio.py</p>\n\n<pre><code>class Input(object):\n    ...\n\nclass Event(object):\n    ...\n\nclass Output(object):\n    ...\n</code></pre>\n\n<p>client.py</p>\n\n<pre><code>import gpio\n\nirq = gpio.Event(1, 14)\n</code></pre>\n\n<p>Question: Is there a good/concrete reason to prefer one over the other? Or is it just preference?</p>\n\n<p>There isn't (for me) really a happy hybrid. I like the short names when scoped inside of the module, but if used outside of the module, really need the module name to qualify what they are. But importing gpio, and then referring to gpio.GPIOOutput seems redundant.</p>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 6, "creation_date": 1524685411, "post_id": 50030168, "comment_id": 87076436, "body": "please show the desired output"}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 1, "creation_date": 1524685798, "post_id": 50030168, "comment_id": 87076618, "body": "Please also update your question with the code you have tried."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1524686158, "post_id": 50030168, "comment_id": 87076767, "body": "Neither of those are dictionaries."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 1, "creation_date": 1524686171, "post_id": 50030168, "comment_id": 87076774, "body": "Please don&#39;t comment to provide updates. Use the edit &#39;button&#39; and update the question directly."}, {"owner": {"reputation": 31, "user_id": 2472307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc038dfc3e6159a4788183555701ecf8?s=128&d=identicon&r=PG", "display_name": "AAA", "link": "https://stackoverflow.com/users/2472307/aaa"}, "edited": false, "score": 0, "creation_date": 1524687553, "post_id": 50030168, "comment_id": 87077401, "body": "I have added the output to the question. thank you"}, {"owner": {"reputation": 2966, "user_id": 3462681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4739059ffcecfbd166bbaf9be7549237?s=128&d=identicon&r=PG&f=1", "display_name": "Roushan", "link": "https://stackoverflow.com/users/3462681/roushan"}, "edited": false, "score": 0, "creation_date": 1524687563, "post_id": 50030168, "comment_id": 87077407, "body": "<code>(&#39;Model&#39;:&#39;Toyota, &#39;Plate&#39;:&#39;A11&#39;)</code> not valid syntax"}, {"owner": {"reputation": 2966, "user_id": 3462681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4739059ffcecfbd166bbaf9be7549237?s=128&d=identicon&r=PG&f=1", "display_name": "Roushan", "link": "https://stackoverflow.com/users/3462681/roushan"}, "edited": false, "score": 0, "creation_date": 1524687664, "post_id": 50030168, "comment_id": 87077453, "body": "what yuou have tried? as of now"}], "answers": [{"tags": [], "owner": {"reputation": 2966, "user_id": 3462681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4739059ffcecfbd166bbaf9be7549237?s=128&d=identicon&r=PG&f=1", "display_name": "Roushan", "link": "https://stackoverflow.com/users/3462681/roushan"}, "is_accepted": true, "score": 0, "last_activity_date": 1524689045, "creation_date": 1524689045, "answer_id": 50031054, "question_id": 50030168, "link": "https://stackoverflow.com/questions/50030168/create-dictionaries-from-part-of-the-json-file/50031054#50031054", "title": "Create Dictionaries from part of the json File", "body": "<p>simply loop through the json object and parse the value:</p>\n\n<pre><code>d = {\n\"dict_cars\": [{\n        \"model\": \"toyota\",\n        \"plate\": \"A11\",\n        \"tickets\": [{\n                \"amount\": 50,\n                \"type\": \"A1\"\n            },\n            {\n                \"amount\": 34,\n                \"type\": \"A2\"\n            }\n        ]\n    },\n    {\n        \"model\": \"mazda\",\n        \"plate\": \"A11\",\n        \"tickets\": [{\n                \"amount\": 50,\n                \"type\": \"A1\"\n            },\n            {\n                \"amount\": 34,\n                \"type\": \"A2\"\n            }\n        ]\n    }\n]\n}\n\ndict_cars=[]\ndict_tickets=[]\nfor i,j in d.items():\n    for k in j:\n        dict_cars.append({k.get('model',''):k.get(\"plate\",\"\")})\n        for t in k.get('tickets',\"\"):\n            dict_tickets.append(t)\n\nprint(\"dict_cars = \",dict_cars)\nprint(\"dict_tickets = \",dict_tickets)\n</code></pre>\n\n<h1>out</h1>\n\n<p><code>dict_cars =  [{'toyota': 'A11'}, {'mazda': 'A11'}]\n dict_tickets =  [{'amount': 50, 'type': 'A1'}, {'amount': 34, 'type': 'A2'}, {'amount': 50, 'type': 'A1'}, {'amount': 34, 'type': 'A2'}]</code></p>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 8313460, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z5kkMsqri4k/AAAAAAAAAAI/AAAAAAAAHQM/5p594OQaToc/photo.jpg?sz=128", "display_name": "Willian Vieira", "link": "https://stackoverflow.com/users/8313460/willian-vieira"}, "is_accepted": false, "score": 0, "last_activity_date": 1524689880, "creation_date": 1524689880, "answer_id": 50031246, "question_id": 50030168, "link": "https://stackoverflow.com/questions/50030168/create-dictionaries-from-part-of-the-json-file/50031246#50031246", "title": "Create Dictionaries from part of the json File", "body": "<pre><code>import json\n\nwith open('file.json', 'r') as data:\n    text = data.read()\n\ncars = json.loads(text)['cars']\ntickets = []\n\nfor arr in cars:\n    for item in arr['tickets']:\n        tickets.append(item)\n\n    del arr['tickets']\n\nprint(tickets)\nprint(cars)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[{u'amount': 50, u'type': u'A1'}, {u'amount': 34, u'type': u'A2'}, {u'amount': 50, u'type': u'A1'}, {u'amount': 34, u'type': u'A2'}]\n[{u'plate': u'A11', u'model': u'toyota'}, {u'plate': u'A11', u'model': u'mazda'}]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2472307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc038dfc3e6159a4788183555701ecf8?s=128&d=identicon&r=PG", "display_name": "AAA", "link": "https://stackoverflow.com/users/2472307/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50031054, "answer_count": 2, "score": 1, "last_activity_date": 1524689880, "creation_date": 1524685349, "last_edit_date": 1524688544, "question_id": 50030168, "link": "https://stackoverflow.com/questions/50030168/create-dictionaries-from-part-of-the-json-file", "title": "Create Dictionaries from part of the json File", "body": "<p>I am trying to create two seperate dictionaries, one that only holds the car information, and the second, which just holds the ticket information.</p>\n\n<pre><code>{\n\"cars\": [{\n        \"model\": \"toyota\",\n        \"plate\": \"A11\",\n        \"tickets\": [{\n                \"amount\": 50,\n                \"type\": \"A1\"\n            },\n            {\n                \"amount\": 34,\n                \"type\": \"A2\"\n            }\n        ]\n    },\n    {\n        \"model\": \"mazda\",\n        \"plate\": \"A11\",\n        \"tickets\": [{\n                \"amount\": 50,\n                \"type\": \"A1\"\n            },\n            {\n                \"amount\": 34,\n                \"type\": \"A2\"\n            }\n        ]\n    }\n ]\n}\n\n\nimport json\n\nwith open('jsonfile', 'r') as data:\ncars_dict = json.load(data)\n</code></pre>\n\n<p>Then the loop to generate the two separate <code>dict</code>s. I created the loop, but still not achieving the result properly.</p>\n\n<p>Desired output will be:</p>\n\n<pre><code>dict_cars = [{'Model':'Toyota', 'Plate':'A11'},\n             {'Model':'Mazda', 'Plate':'A13'}]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>dict_cars = [{'Model':'Toyota', 'Plate':'A11', Tickets[......]},\n             {'Model':'Mazda', 'Plate':'A13'}, Tickets[......]]\n\ndict_tickets = [{'amount:50',type:'A1'},\n                {'amount:34',type:'A2'},\n                {'amount:50',type:'A1'},\n                {'amount:34',type:'A2'}]\n</code></pre>\n"}]