[{"tags": ["python", "mysql", "import-csv"], "comments": [{"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 1, "creation_date": 1568852246, "post_id": 58002055, "comment_id": 102409866, "body": "It might help to use <code>executemany</code> to do single inserts of 20K rows instead of committing 20K insert statements. I don&#39;t use mysql but I&#39;ve found a similar method speeds up PostgreSQL. The code to do it is just a bit past the middle of this page. <a href=\"https://pynative.com/python-mysql-insert-data-into-database-table/\" rel=\"nofollow noreferrer\">pynative.com/python-mysql-insert-data-into-database-table</a>"}, {"owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1568852426, "post_id": 58002055, "comment_id": 102409892, "body": "@Deepstop thanks for the suggestion, I will try it and let you know"}, {"owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1568857812, "post_id": 58002055, "comment_id": 102410834, "body": "@Deepstop it did improve drastically my import speed (now it takes 4s for 20k!), but for the row after ~200k it is taking around 2500 seconds for 20k.... any idea?"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1568888230, "post_id": 58002055, "comment_id": 102421793, "body": "Something to do with indexing maybe? Could you add the schema of TABLE to your post? Also if you are moving each 200K chunk to a list before <code>executemany</code> then you could use <code>time.time()</code>to determine if it&#39;s the <code>csv</code> file or the <code>insert</code> that is slow but I suspect the latter. However, can I also suggest that unless there&#39;s a compelling reason otherwise to stop using <code>DictReader</code> and just use <code>reader</code> with numeric indexes which should cut down some overhead on the client side if you haven&#39;t already done that."}, {"owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1568911917, "post_id": 58002055, "comment_id": 102435140, "body": "The issue now is on the database, its lagging after those thousand rows.... funny thing is that its not lagging when the file start processing, even if the table volume is huge..... weird.... I used time to measure the transactions time, tks!"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1569002509, "post_id": 58002055, "comment_id": 102468549, "body": "One other thing you could try is to close the cursor and create a new one each time. I&#39;m clutching at straws here. Other than that it is probably running out of some resource at the server end. Are you still committing every 20K rows?"}, {"owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1569109392, "post_id": 58002055, "comment_id": 102489832, "body": "@Deepstop yes, I will update the code now that I am using executemany! Tks"}, {"owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1569667740, "post_id": 58002055, "comment_id": 102676026, "body": "@Deepstop it does look like a database issue. I will accept your answer, if you want to write it :)"}], "answers": [{"tags": [], "owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "is_accepted": true, "score": 1, "last_activity_date": 1569952834, "creation_date": 1569952834, "answer_id": 58190082, "question_id": 58002055, "link": "https://stackoverflow.com/questions/58002055/python-csv-import-taking-too-much-time-after-first-200k-rows/58190082#58190082", "title": "Python CSV Import taking too much time after first 200k rows", "body": "<p>Using <code>executemany</code> to do single inserts of 20K rows instead of 20K individual <code>INSERT</code> statements will optimize the transfer, but the database itself could also be a factor in the slow performance. There is a code example just a bit past the middle of <a href=\"http://pynative.com/python-mysql-insert-data-into-database-table\" rel=\"nofollow noreferrer\">this page</a>. </p>\n\n<p>Based on our exchange of comments, the database is the ultimate culprit in the slow performance. One idea that I've seen is to disable indexing until after everything is loaded.</p>\n\n<pre><code>ALTER TABLE table DISABLE KEYS;\n... executemany called a bunch of times...\nALTER TABLE table ENABLE KEYS;\n</code></pre>\n\n<p>That might be worth a try.</p>\n"}], "owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 58190082, "answer_count": 1, "score": 1, "last_activity_date": 1569952834, "creation_date": 1568851102, "question_id": 58002055, "link": "https://stackoverflow.com/questions/58002055/python-csv-import-taking-too-much-time-after-first-200k-rows", "title": "Python CSV Import taking too much time after first 200k rows", "body": "<p>I have a python import script that imports a CSV.\nIt takes around 45 seconds to import 20k rows into a mysql db.\nThe problem is that now I have a huge file (4 million rows), and it is taking like 200 seconds to import those same 20k rows when it reaches the line ~200k of the file.</p>\n\n<p>I dont know if thats some DB issue or the file reading itself... here is my script:</p>\n\n<pre><code>import csv\nimport mysql.connector\nfrom mysql.connector import Error\nimport argparse\nfrom itertools import islice\n\nparser = argparse.ArgumentParser()\nparser.add_argument('file', type=argparse.FileType('r'))\nargs = parser.parse_args() \n\n\n\ndef parseData(row):\n    sql = \"\"\"INSERT INTO TABLE \n    (column1,column2) \n    VALUES( '%s','%s');\"\"\" % (\n        row['col1'],row['col2'],) \n\n\n    return sql\n\n\ndef dataImport(filename,connection,cursor):\n        data = csv.DictReader(filename,delimiter=';')\n        i = 0 \n        for row in data:\n            sql = parseData(row)\n            try:\n                result = cursor.execute(sql)\n                pass\n            except Error as e:\n                    pass \n\n            if i%20000 == 0: \n                connection.commit()\n\n            i=i+1\n\ndef importa(file):\n\n    try:\n        connection = mysql.connector.connect(host=host,\n                                            database=db,\n                                            user=user,\n                                            password=password)\n\n        if connection.is_connected():\n            db_Info = connection.get_server_info()\n            print(\"Connected to MySQL Server version \", db_Info)\n\n            cursor = connection.cursor()\n            dataImport(file,connection,cursor)\n\n            cursor.close()\n\n\n    except Error as e:\n        print(\"Error while connecting to MySQL\", e)\n\n\nif __name__ == \"__main__\":\n    importa(args.file)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 1, "creation_date": 1568851058, "post_id": 58002040, "comment_id": 102409689, "body": "<code>.replace</code> returns a new string, also if you should not use str and finally do <code>s = s.replace(&quot;\\xa0&quot;, &quot;&quot;)</code>"}, {"owner": {"reputation": 1458, "user_id": 11746212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe33bc21a8570b9e9c0fce89a681fa?s=128&d=identicon&r=PG&f=1", "display_name": "IronMan", "link": "https://stackoverflow.com/users/11746212/ironman"}, "edited": false, "score": 0, "creation_date": 1568851215, "post_id": 58002040, "comment_id": 102409709, "body": "Hi, it&#39;s possible to use hex codes in python strings. The string can be replaced with: <code>newString = oldString.replace(&#39;\\xa0&#39;, &#39;&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 12059760, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LtyuqWg7o0U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBw5N9xcEF4d3an5ybIVSHhplxmg/photo.jpg?sz=128", "display_name": "askquestion628", "link": "https://stackoverflow.com/users/12059760/askquestion628"}, "edited": false, "score": 0, "creation_date": 1568851918, "post_id": 58002066, "comment_id": 102409807, "body": "sorry, I made a mistake. The type of input is a unicode rather than a string. I guess this is the reason replace method not work"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 1, "last_activity_date": 1568851240, "creation_date": 1568851240, "answer_id": 58002066, "question_id": 58002040, "link": "https://stackoverflow.com/questions/58002040/delete-xa0-at-the-end-of-a-unicode/58002066#58002066", "title": "Delete \\xa0 at the end of a unicode", "body": "<p>Strings are immutable; none of their methods, nor any function, can change them in place, they always <em>return</em> a new string. You need to assign them to something to see the changed version, e.g.:</p>\n\n<pre><code>mystr = \"jdiajsi--dasdsa\\xa0\"\nmystr = mystr.replace(\"\\xa0\", \", \")\nmystr = re.sub(r'\\W+', ' ', mystr)\n</code></pre>\n\n<p>Note that I changed the name of the variable; naming a variable <code>str</code> cuts off access to the <code>str</code> constructor, which will eventually byte you.</p>\n"}], "owner": {"reputation": 51, "user_id": 12059760, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LtyuqWg7o0U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBw5N9xcEF4d3an5ybIVSHhplxmg/photo.jpg?sz=128", "display_name": "askquestion628", "link": "https://stackoverflow.com/users/12059760/askquestion628"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1568851301, "accepted_answer_id": 58002066, "answer_count": 1, "score": 0, "last_activity_date": 1568851869, "creation_date": 1568850930, "last_edit_date": 1568851869, "question_id": 58002040, "link": "https://stackoverflow.com/questions/58002040/delete-xa0-at-the-end-of-a-unicode", "closed_reason": "Duplicate", "title": "Delete \\xa0 at the end of a unicode", "body": "<p>I have a string, such as u'jdiajsi--dasdsa\\xa0'. I need to get rid of \\xao and obtain u'jdiajsi--dasdsa'. </p>\n\n<p>First, I tried str.replace(\"\\xa0\", \", \"), but it does not work. Then, I change to re.sub(r'\\W+', ' ', str), but the result is \"jdiajsi dasdsa\". The two dashes are gone...</p>\n\n<pre><code>str = \"jdiajsi--dasdsa\\xa0\"\nstr.replace(\"\\xa0\", \", \") #fail\nre.sub(r'\\W+', ' ', str)  #fail\n</code></pre>\n\n<p>The first result is no change, the second one miss --. The expected result is \"jdiajsi--dasdsa\" </p>\n\n<p>The input is unicode rather than a string</p>\n"}, {"tags": ["python", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 6402, "user_id": 6245650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vMp3K.jpg?s=128&g=1", "display_name": "Scratch&#39;N&#39;Purr", "link": "https://stackoverflow.com/users/6245650/scratchnpurr"}, "is_accepted": true, "score": 1, "last_activity_date": 1568854139, "creation_date": 1568854139, "answer_id": 58002321, "question_id": 58002035, "link": "https://stackoverflow.com/questions/58002035/linear-combination-of-images-gives-me-error/58002321#58002321", "title": "linear combination of images gives me error", "body": "<p>The second method results in values that can potentially be fractional values. Since intensity values are integer values between 0 and 255, you want to round the resulting values of your linear combination, and then set the data types as uint8.</p>\n\n<pre><code>result = alpha * imag1 + (1 - alpha) * imag2\nresult = np.around(result).astype(np.uint8)\n</code></pre>\n"}], "owner": {"reputation": 16833, "user_id": 466534, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/966493b7357dc065e054f17c10821420?s=128&d=identicon&r=PG&f=1", "display_name": "dato datuashvili", "link": "https://stackoverflow.com/users/466534/dato-datuashvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58002321, "answer_count": 1, "score": 0, "last_activity_date": 1568854139, "creation_date": 1568850819, "question_id": 58002035, "link": "https://stackoverflow.com/questions/58002035/linear-combination-of-images-gives-me-error", "title": "linear combination of images gives me error", "body": "<p>let us consider following code</p>\n\n<pre><code>import  numpy as np\n\nimport cv2 as cv\n\nimag1 =cv.imread('logos.jpg')\nimag1 =cv.cvtColor(imag1,cv.COLOR_BGR2GRAY)\nshape1 =imag1.shape\nprint(shape1)\nimag2 =cv.imread('arduino.jpg')\nimag2 =cv.cvtColor(imag2,cv.COLOR_BGR2GRAY)\nshape2 =imag2.shape\nprint(shape2)\n\nimag2 =cv.resize(imag2,(shape1[1],shape1[0]))\n\ncv.imshow('logos',imag1)\n\ncv.imshow('arduino',imag2)\nresult1 =cv.addWeighted(imag1,0.2,imag2,0.8,0)\ncv.imshow('result1',result1)\nalpha =0.5\nresult =alpha *imag1 + (1-alpha)*imag2\ncv.imshow('result',result)\ncv.waitKey(0)\n</code></pre>\n\n<p>built in function of python- cv.addWeighted  works fine, but when i am trying to implement second one, it gives me following error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Dato/Downloads/python_environment/weighted.py\", line 23, in &lt;module&gt;\n    cv.imshow('result',result)\ncv2.error: OpenCV(4.0.0) c:\\projects\\opencv-python\\opencv\\modules\\imgproc\\src\\color.hpp:261: error: (-2:Unspecified error) in function '__cdecl cv::CvtHelper&lt;struct cv::Set&lt;1,-1,-1&gt;,struct cv::Set&lt;3,4,-1&gt;,struct cv::Set&lt;0,2,5&gt;,2&gt;::CvtHelper(const class cv::_InputArray &amp;,const class cv::_OutputArray &amp;,int)'\n&gt; Unsupported depth of input image:\n&gt;     'VDepth::contains(depth)'\n&gt; where\n&gt;     'depth' is 6 (CV_64F)\n</code></pre>\n\n<p>size of images  are (223, 400) ,(223, 403), that why i applied resize function to make images equal to each other, but i can't understand what is the reason of error? thanks in advance</p>\n"}, {"tags": ["python", "database", "cassandra", "decimal", "cql"], "comments": [{"owner": {"reputation": 4241, "user_id": 6085803, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ARdCw.jpg?s=128&g=1", "display_name": "sandeep rawat", "link": "https://stackoverflow.com/users/6085803/sandeep-rawat"}, "edited": false, "score": 0, "creation_date": 1568865595, "post_id": 58002030, "comment_id": 102412108, "body": "one bad way to handle issue first caste into double and then cast decimal"}], "answers": [{"tags": [], "owner": {"reputation": 47278, "user_id": 18627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG", "display_name": "Alex Ott", "link": "https://stackoverflow.com/users/18627/alex-ott"}, "is_accepted": false, "score": 2, "last_activity_date": 1568903063, "last_edit_date": 1568903063, "creation_date": 1568876702, "answer_id": 58005495, "question_id": 58002030, "link": "https://stackoverflow.com/questions/58002030/cassandra-decimal-precision-issues/58005495#58005495", "title": "Cassandra Decimal Precision Issues", "body": "<p>CQL in contrast to SQL databases doesn't allow to customize decimal precision, etc., so you just need to use <code>decimal</code>. The data that you receive back in <code>cqlsh</code> are formatted by <code>cqlsh</code> itself - in default configuration it just calls <code>str</code> on the instance of Python's <code>Decimal</code> type (see <a href=\"https://github.com/apache/cassandra/blob/trunk/pylib/cqlshlib/formatting.py#L257\" rel=\"nofollow noreferrer\">the code</a>). It may call another formatter if decimal separator is set to value different from <code>.</code>, or if thousands separator is set.</p>\n\n<p>But I would suggest not to rely on the <code>cqlsh</code> implementation, and use driver directly, and format received <code>decimal</code> value as you want.</p>\n"}], "owner": {"reputation": 158, "user_id": 890558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed32ff56f30ab35a1644fad1df82be3c?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/890558/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1568909937, "creation_date": 1568850793, "last_edit_date": 1568909937, "question_id": 58002030, "link": "https://stackoverflow.com/questions/58002030/cassandra-decimal-precision-issues", "title": "Cassandra Decimal Precision Issues", "body": "<p>I've been storing some currency in Cassandra as decimal types, and I've discovered that they're not coming out as precisely as entered. This is normally OK, however there are times I want the precision (2-decimal places). I've attempted to add precision syntax to all of my code (create table, select, insert), and all of it fails with syntax errors. I feel like it's more efficient to do the rounding on database call rather than in a Pandas DataFrame, so I'm seeing if anyone has a solution. I'm trying the syntaxes in both cqlsh and Python.</p>\n\n<p>cqlsh 5.0.1 | Cassandra 3.11.2 | CQL spec 3.4.4 | Native protocol v4</p>\n\n<p>Tried doing it on the table column:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS myTable (\n    myid text,\n    price decimal(14,2),\n    PRIMARY KEY(id)\n);\n\ncassandra.protocol.SyntaxException: &lt;Error from server: code=2000 [Syntax error in CQL query] message=\"line XXXXX no viable alternative at input '(' (... [decimal](...):&gt;\n</code></pre>\n\n<p>I saw a comment that Cassandra does not allow precision in table definitions, so fine, moving on.</p>\n\n<p>Tried to do it on SELECT:</p>\n\n<pre><code>SELECT myid, cast(price as Decimal(14,2)) FROM myTable;\n\nSyntax Exception: mismatched input '(' expecting ')' (...myid, cast(price as Decimal[(]...)\n</code></pre>\n\n<p>I will skip the insert because the errors are redundant, and also the values in the DataFrame are of the correct precision when entered. The table storage and selection is where it gets wonky.</p>\n\n<p>The SELECT is failing because Decimal to Decimal can't be cast:\n<a href=\"http://cassandra.apache.org/doc/latest/cql/functions.html\" rel=\"nofollow noreferrer\">http://cassandra.apache.org/doc/latest/cql/functions.html</a></p>\n\n<p>If I can't specify precision in the table semantics, and I can't store it as decimal and cast it with proper precision, I suppose I am forced to:</p>\n\n<ul>\n<li>store in double and cast on select, OR </li>\n<li>programmatically round my DataFrame after it is returned?</li>\n</ul>\n\n<p><strong>Edit:</strong></p>\n\n<p>For completeness, this is one solution that works, though I'd prefer the most efficient solution, which I think would be rounding at the data fetch level. There are no precision modifiers in any CQL, using decimal type for price column. Solution adapted from (<a href=\"https://stackoverflow.com/questions/54773447/decimal-class-rounding-in-pandas\">Decimal class rounding in Pandas</a>) since df.round() doesn't work on Python Decimal.</p>\n\n<pre><code>&lt;set pandas row factory&gt;\ndf = dbConnection.execute('SELECT myid, price FROM myTable')._current_rows\ndf[['price']] = df[['price']].applymap(lambda x: x.quantize(decimal.Decimal('.01')))\n</code></pre>\n"}, {"tags": ["python", "validation", "keras"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11736147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648c7c08b263f60167444b20fe359802?s=128&d=identicon&r=PG&f=1", "display_name": "Omid", "link": "https://stackoverflow.com/users/11736147/omid"}, "is_accepted": false, "score": 0, "last_activity_date": 1569007503, "creation_date": 1569007503, "answer_id": 58034140, "question_id": 58001987, "link": "https://stackoverflow.com/questions/58001987/bayesian-inference-with-dropout-validation-set/58034140#58034140", "title": "Bayesian Inference with dropout, validation set", "body": "<p>Based on the discussion in <a href=\"https://github.com/keras-team/keras/issues/10426\" rel=\"nofollow noreferrer\">1</a>, it seems that Keras calculates the validation loss for each batch at the same time as the training loss. However, during the training process, only a running average is constantly being reported in the log for training. Therefore, the code snippet given above is doing its job as it is supposed to. It is taking log because validation loss is being calculated for each mini-batch. If I need Bayesian inference monitored in each epoch, I have to pay the computational price.  </p>\n"}], "owner": {"reputation": 1, "user_id": 11736147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648c7c08b263f60167444b20fe359802?s=128&d=identicon&r=PG&f=1", "display_name": "Omid", "link": "https://stackoverflow.com/users/11736147/omid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569007503, "creation_date": 1568850348, "last_edit_date": 1568853032, "question_id": 58001987, "link": "https://stackoverflow.com/questions/58001987/bayesian-inference-with-dropout-validation-set", "title": "Bayesian Inference with dropout, validation set", "body": "<p>I have implemented the Bayesian SegNet using Keras (<a href=\"https://github.com/keras-team/keras/issues/9412\" rel=\"nofollow noreferrer\">1</a>). To do so, I used the following custom loss function, which performs Bayesian inference for validation loss:</p>\n\n<pre><code>def custom_loss_Bayesian(y_true, y_pred):\n\n    train_loss = K.categorical_crossentropy(y_true, y_pred)                    \n\n    output_list = []\n    for i in range(n_MoteCarlo_Samples):                                       \n        output_list.append(K.categorical_crossentropy(y_true, y_pred))\n\n    Monty_sample_bin = K.stack(output_list,axis=0)  \n    val_loss_Bayesian=K.mean(Monty_sample_bin,axis=0)\n\n    return K.in_train_phase(train_loss, val_loss_Bayesian)\n</code></pre>\n\n<p>It works fine, but this approach has a big problem. By increasing the number of Monte Carlo samples, the training process takes a lot longer. This is probably due to the fact that the loop for validation loss is calculated for each training batch, but it is not used anywhere. I only need <code>val_loss_Bayesian</code> after the end of each epoch. Is there a smarter way to do this? Please note, that I want to use <code>ModelCheckpoint</code> to save the set of weights with the lowest <code>val_loss_Bayesian</code>. I tried to implement the solution by lovecambi as in <a href=\"https://github.com/keras-team/keras/issues/3155\" rel=\"nofollow noreferrer\">2</a>, such that <code>n_MonteCarlo_Samples</code> is selected based on batch number, but it did not work. It appears that when you compile a model, the properties inside the loss function cannot be changed. Any suggestions are much appreciated.</p>\n"}, {"tags": ["python", "tkinter", "passwords"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1568850618, "post_id": 58001973, "comment_id": 102409618, "body": "first: don&#39;t do <code>usr = Entry().pack()</code> because it assings <code>None</code> instead of <code>Entry</code> to <code>usr</code> because <code>pack()</code> returns always <code>None</code> and then you don&#39;t have access to <code>Entry</code> to get user name and its password. You have to do it in two steps <code>usr = Entry()</code> and <code>usr.pack()</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11294454"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568850805, "post_id": 58001973, "comment_id": 102409647, "body": "Made the edit, Im I on the right line with you?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568850948, "post_id": 58001973, "comment_id": 102409669, "body": "don&#39;t change code in question because later it will not fit to answer(s). Append new code with changes."}], "answers": [{"comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1568852495, "post_id": 58002065, "comment_id": 102409902, "body": "I use computers and different laguages almost 30 years. When I started using Python then I already know how to write code in many other languages - so I needed only Google to find examples for problems which I tried to resolved. Mostly it was problem with files/images/data/web-pages on my own use. The same was with <code>tkinter</code>. Currently I check sometimes <a href=\"http://effbot.org/tkinterbook/tkinter-index.htm\" rel=\"nofollow noreferrer\">documentation for Tkinter</a> when I something forget. It is old and incomplet but it is still the most useful page for me."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1568851234, "creation_date": 1568851234, "answer_id": 58002065, "question_id": 58001973, "link": "https://stackoverflow.com/questions/58001973/python-how-to-link-function-if-statements-to-tkinter-label/58002065#58002065", "title": "Python how to link function if statements to Tkinter Label?", "body": "<p>First: don't do </p>\n\n<pre><code>  usr = Entry().pack() \n</code></pre>\n\n<p>because it assings <code>None</code> to <code>usr</code> because <code>pack()</code> always returns <code>None</code> and then you don't have access to <code>Entry</code> to get user name and its password. You have to do it in two steps </p>\n\n<pre><code> usr = Entry()\n usr.pack()\n</code></pre>\n\n<p>For labels  and button you can even skip variables because you will not need them.</p>\n\n<hr>\n\n<p>Second: you can access function to button using <code>command=function_name</code>. It has to be name without <code>()</code> (so called <code>\"callback\"</code>). </p>\n\n<pre><code>tk.Button(mainframe, text=\"Log in\", command=ask_user)\n</code></pre>\n\n<p>When you click button then <code>mainloop</code> will run <code>ask_user()</code> </p>\n\n<p>And inside <code>ask_user</code> you can get values from <code>Entry</code> using <code>.get()</code> </p>\n\n<pre><code>    username = usr.get()\n    password = pwd.get()\n</code></pre>\n\n<hr>\n\n<p>Full code:</p>\n\n<pre><code>import tkinter as tk\n\n# --- functions ---\n\ndef ask_user():\n    username = usr.get()\n    password = pwd.get()\n\n    if username == \"Ed\" and password == \"true\":\n        app()\n    if username == \"buxton\" and password == \"logix\":\n        app()\n    else:\n        root.destroy()\n\n# --- main ---\n\nroot = tk.Tk()\n\nmainframe = tk.Frame(root)\nmainframe.columnconfigure(0, weight=1)\nmainframe.rowconfigure(0, weight=1)\nmainframe.pack(pady=100, padx=100)\n\ntk.Label(mainframe, text=\"Username\").pack()\n\nusr = tk.Entry(mainframe)\nusr.pack()\n\ntk.Label(mainframe, text=\"Password\").pack()\n\npwd = tk.Entry(mainframe)\npwd.pack()\n\ntk.Button(mainframe, text=\"Log in\", command=ask_user).pack()\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11294454"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58002065, "answer_count": 1, "score": 0, "last_activity_date": 1568851259, "creation_date": 1568850234, "last_edit_date": 1568851259, "question_id": 58001973, "link": "https://stackoverflow.com/questions/58001973/python-how-to-link-function-if-statements-to-tkinter-label", "title": "Python how to link function if statements to Tkinter Label?", "body": "<p>This is the code:</p>\n\n<pre><code>from tkinter import *\nimport glob\nimport os\nfrom PIL import Image, ImageTk, ImageGrab\nimport tkinter as tk\nimport pyautogui\nimport datetime\nimport sys\nfrom tkinter import scrolledtext\n\nroot = tk.Tk()\nroot.title(\"SIGN OFF\")\nroot.minsize(840, 800)\nmainframe = tk.Frame(root)\nmainframe.columnconfigure(0, weight=1)\nmainframe.rowconfigure(0, weight=1)\nmainframe.pack(pady=100, padx=100)\n\nusername = Label(mainframe, text = \"Username\").pack()\nusr = Entry(mainframe).pack()\npassword = Label(mainframe, text = \"Password\").pack()\npwd = Entry(mainframe).pack()\nsubmit = Button(mainframe, text = \"Log in\").pack()\n\n\ndef askUser():\n    username = input(\"Username: \")\n    password = input(\"Password: \")\n\n    if username == \"Ed\" and password == \"true\":\n        app()\n    if username == \"buxton\" and password == \"logix\":\n        app()\n    else:\n        root.destroy()\n\n\nroot.mainloop()\n</code></pre>\n\n<p>This will prompt me a window with username and password. </p>\n\n<p>How can I link the input of Username from the displayed window to <code>askUser()</code> function Username and vice versa with Password? </p>\n\n<p>If I use just this piece of code and run it:</p>\n\n<pre><code>def askUser():\n    username = input(\"Username: \")\n    password = input(\"Password: \")\n\n    if username == \"Ed\" and password == \"true\":\n        app()\n    if username == \"buxton\" and password == \"logix\":\n        app()\n    else:\n        print(\"failed\")\n</code></pre>\n\n<p>Command prompt will be the main screen of inputting password and usernames, but I need to get it on a window.</p>\n\n<p>It's a small project, if anyone has any comments about the security about this, I am not really concerned but open for suggestions! :)</p>\n"}, {"tags": ["python", "windows", "flask", "virtualenv", "setuptools"], "comments": [{"owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "edited": false, "score": 0, "creation_date": 1568849618, "post_id": 58001889, "comment_id": 102409399, "body": "have you tried using <code>python -m pip install &lt;package&gt;</code> instead of <code>pip install &lt;package&gt;</code>?"}, {"owner": {"reputation": 21, "user_id": 5470057, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1043864595634510/picture?type=large", "display_name": "Yeinor ", "link": "https://stackoverflow.com/users/5470057/yeinor"}, "reply_to_user": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "edited": false, "score": 0, "creation_date": 1568895242, "post_id": 58001889, "comment_id": 102425647, "body": "@kuco23 Yes I have!"}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 11667949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lzevvCMuhBw/AAAAAAAAAAI/AAAAAAAAn54/_v-bTRtqDOA/photo.jpg?sz=128", "display_name": "Shivam Jha", "link": "https://stackoverflow.com/users/11667949/shivam-jha"}, "edited": false, "score": 1, "creation_date": 1599670618, "post_id": 63813377, "comment_id": 112847569, "body": "Please format your code in the answers. See <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I write a good answer?</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 14248606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiDXMJ_21HqN2EieSWhnT8cn9-K4bSGThBafuN8-w=k-s128", "display_name": "Thianesh ", "link": "https://stackoverflow.com/users/14248606/thianesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1610352186, "last_edit_date": 1610352186, "creation_date": 1599660238, "answer_id": 63813377, "question_id": 58001889, "link": "https://stackoverflow.com/questions/58001889/how-to-solve-error-installing-setuptools-python-in-windows/63813377#63813377", "title": "How to solve error installing setuptools python in windows", "body": "<pre><code>pip install gitpython\n\npip install os-win\n\npip install wheel\n</code></pre>\n<p>Use <code>sudo</code> for Linux or <code>run cmd as Administrator</code> for Windows.</p>\n<p>This solved the issue for me.</p>\n"}], "owner": {"reputation": 21, "user_id": 5470057, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1043864595634510/picture?type=large", "display_name": "Yeinor ", "link": "https://stackoverflow.com/users/5470057/yeinor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3275, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1610352186, "creation_date": 1568849342, "question_id": 58001889, "link": "https://stackoverflow.com/questions/58001889/how-to-solve-error-installing-setuptools-python-in-windows", "title": "How to solve error installing setuptools python in windows", "body": "<p>can someone help me with an issue I am struggling for a couple of hours, I am trying to install \"flask-jwt-extended\" using </p>\n\n<pre><code>pip install flask-jwt-extended\n</code></pre>\n\n<p>but I am getting the following error</p>\n\n<pre><code>ERROR: Command errored out with exit status 1:\n     command: 'c:\\python.exe' -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\pip-install-fg_ccsgv\\\\flask-jwt-extended\\\\setup.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\pip-install-fg_ccsgv\\\\flask-jwt-extended\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base pip-egg-info\n         cwd: C:\\Users\\User\\AppData\\Local\\Temp\\pip-install-fg_ccsgv\\flask-jwt-extended\\\n    Complete output (3 lines):\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n    ModuleNotFoundError: No module named 'setuptools'\n    ----------------------------------------\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\n</code></pre>\n\n<p>It says I have to install setuptools, but I already have installed it.</p>\n\n<p><code>Requirement already satisfied: setuptools in c:\\lib\\site-packages (41.2.0)</code></p>\n\n<p>Can someone help me out with that? I don't know what can it be</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "merge", "singly-linked-list"], "comments": [{"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1568849893, "post_id": 58001875, "comment_id": 102409472, "body": "Because of the idnentation I am assuming that it is the same Class coming from <a href=\"https://stackabuse.com/python-linked-lists/\" rel=\"nofollow noreferrer\">here</a>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568850882, "post_id": 58001875, "comment_id": 102409658, "body": "What&#39;s your question? I suggest you write the objects down on a piece of paper, and draw pointers from variables and object attributes to the objects as it does the assignments."}, {"owner": {"reputation": 55, "user_id": 3586037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211bd665ea1043b10bfd492c054557e7?s=128&d=identicon&r=PG&f=1", "display_name": "prony", "link": "https://stackoverflow.com/users/3586037/prony"}, "edited": false, "score": 0, "creation_date": 1568859172, "post_id": 58001875, "comment_id": 102411054, "body": "My question is the following: we have two linked lists that are copy of each other (prev and prehead). I understand, prehead is updated when we do prev.next = l1 for the first time. Then, we re-declared prev as prev = prev.next. So far so good, but then, we we do prev.next again, prehead gets updated as if there was no re-declaration of prev. I mean how do the changes in prev affect prehead after the re-declaration?"}], "owner": {"reputation": 55, "user_id": 3586037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211bd665ea1043b10bfd492c054557e7?s=128&d=identicon&r=PG&f=1", "display_name": "prony", "link": "https://stackoverflow.com/users/3586037/prony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568850729, "creation_date": 1568849193, "last_edit_date": 1568850729, "question_id": 58001875, "link": "https://stackoverflow.com/questions/58001875/mergetwolists-how-the-memory-works-in-python", "title": "mergeTwoLists: How the memory works in Python?", "body": "<p>I am working on the merge-two-list problem from the leetcode. This problem requires to merge two linked lists in a sorted way. The solution code is given below. In the code, variable prev keeps being updated and eventually has the only one node from l1 or l2. However, prehead seems to memorize whenever prev.next is executed. However, it does not memorize when prev=prev.next is executed. </p>\n\n<p>For example, if you run this code for <code>l1 = 1-&gt;3-&gt;4, l2 = 1-&gt;2-&gt;4</code>. At the end:</p>\n\n<pre><code>prev = ListNode{val: 4, next: ListNode{val: 4, next: None}}. \n\nprehead = ListNode{val: -1, next: ListNode{val: 1, next: ListNode{val: 1, next: ListNode{val: 2, next: ListNode{val: 3, next: ListNode{val: 4, next: ListNode{val: 4, next: None}}}}}}}\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>        prehead = ListNode(-1)\n\n        prev = prehead\n        while l1 and l2:\n\n            if l1.val &lt;= l2.val:\n                prev.next = l1\n                l1 = l1.next\n            else:\n                prev.next = l2\n                l2 = l2.next \n\n\n            prev = prev.next\n\n        # exactly one of l1 and l2 can be non-null at this point, so connect\n        # the non-null list to the end of the merged list.\n        prev.next = l1 if l1 is not None else l2\n\n        return prehead.next\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "edited": false, "score": 0, "creation_date": 1568859018, "post_id": 58001866, "comment_id": 102411025, "body": "can&#39;t you just do if item in setence.lower()?"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10996816, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PhSfUuWhO0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNI0T7Itums4tugEBbKRcsrf6HpeQ/mo/photo.jpg?sz=128", "display_name": "Shah Wajahat", "link": "https://stackoverflow.com/users/10996816/shah-wajahat"}, "edited": false, "score": 0, "creation_date": 1569352379, "post_id": 58002914, "comment_id": 102567267, "body": "its helpfull for mee"}, {"owner": {"reputation": 983, "user_id": 10034612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMMRY.jpg?s=128&g=1", "display_name": "L&#234; T\u01b0 Th&#224;nh", "link": "https://stackoverflow.com/users/10034612/l%c3%aa-t%c6%b0-th%c3%a0nh"}, "reply_to_user": {"reputation": 5, "user_id": 10996816, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PhSfUuWhO0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNI0T7Itums4tugEBbKRcsrf6HpeQ/mo/photo.jpg?sz=128", "display_name": "Shah Wajahat", "link": "https://stackoverflow.com/users/10996816/shah-wajahat"}, "edited": false, "score": 0, "creation_date": 1569373360, "post_id": 58002914, "comment_id": 102572757, "body": "@ShahWajahat you can upvote and mark it as the right answer"}], "tags": [], "owner": {"reputation": 983, "user_id": 10034612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMMRY.jpg?s=128&g=1", "display_name": "L&#234; T\u01b0 Th&#224;nh", "link": "https://stackoverflow.com/users/10034612/l%c3%aa-t%c6%b0-th%c3%a0nh"}, "is_accepted": true, "score": 1, "last_activity_date": 1568860200, "creation_date": 1568860200, "answer_id": 58002914, "question_id": 58001866, "link": "https://stackoverflow.com/questions/58001866/matching-the-column-of-excel-of-a-list-of-python/58002914#58002914", "title": "matching the column of excel of a list of python", "body": "<p>When I try your code with the same sample data, I recognize that <code>'wine '</code> in <code>data['ingredients']</code> has whitespace, while <code>'wine'</code> in <code>word</code> doesn't have.</p>\n\n<p>My suggestion to avoid this issue is using <code>strip()</code>: <code>if item.strip() in word:</code></p>\n\n<p>Code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#...\nfor item in data[\"ingredients\"]:\n    if item.strip() in word:\n        print(item)\n#...\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>apple\nwine \ncarrot\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10996816, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PhSfUuWhO0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNI0T7Itums4tugEBbKRcsrf6HpeQ/mo/photo.jpg?sz=128", "display_name": "Shah Wajahat", "link": "https://stackoverflow.com/users/10996816/shah-wajahat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 58002914, "answer_count": 1, "score": 0, "last_activity_date": 1568860200, "creation_date": 1568849121, "last_edit_date": 1568855507, "question_id": 58001866, "link": "https://stackoverflow.com/questions/58001866/matching-the-column-of-excel-of-a-list-of-python", "title": "matching the column of excel of a list of python", "body": "<p>I have an Excel sheet where it has 2 columns. The 1st is <code>ingredient</code> and the 2nd is <code>tag</code> and I have a sentence. I want to compare the value of ingredient column to the string. If the word is matched, then add it into new list. For this purpose my code is here:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    import nltk\n    from nltk.tokenize import sent_tokenize, word_tokenize\n    import pandas as pd\n\n    setence=\"I like carrot Apple wine\"\n    word =word_tokenize(setence.lower())\n    l=[]\n\n    data=pd.read_excel('items.xlsx')\n    print(data[\"ingredients\"])\n    for item in data[\"ingredients\"]:\n\n     if item in word:\n         print(item)\n         l.append(item)\n\n\n    print(l)\n</code></pre>\n\n<p>The Excel sheet contains these values:</p>\n\n<pre><code> 0     apple\n 1     wine \n 2    carrot\n 3       egg\n 4       CUP\n</code></pre>\n\n<p>The output of the code is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>['apple', 'carrot']\n</code></pre>\n\n<p>But it didn't match wine?</p>\n"}, {"tags": ["python", "pandas", "conditional-statements"], "comments": [{"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1568849181, "post_id": 58001836, "comment_id": 102409303, "body": "Please give a minimal example."}, {"owner": {"reputation": 5, "user_id": 10757731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72950c3523f54ef137edaccb6ed2adb6?s=128&d=identicon&r=PG&f=1", "display_name": "piza25", "link": "https://stackoverflow.com/users/10757731/piza25"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1568849582, "post_id": 58001836, "comment_id": 102409391, "body": "If column A observation equals 0 and column B observation equals 1, change column A observation to 1. @roadrunner66"}], "answers": [{"tags": [], "owner": {"reputation": 1435, "user_id": 3866678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yZyO.png?s=128&g=1", "display_name": "Michael Gardner", "link": "https://stackoverflow.com/users/3866678/michael-gardner"}, "is_accepted": true, "score": 0, "last_activity_date": 1568850008, "last_edit_date": 1568850008, "creation_date": 1568849633, "answer_id": 58001919, "question_id": 58001836, "link": "https://stackoverflow.com/questions/58001836/how-to-change-values-in-column-a-based-on-values-in-column-b-and-column-a-itself/58001919#58001919", "title": "How to change values in Column A based on values in Column B and Column A itself?", "body": "<p>Your example should work but this is an alternative.</p>\n\n<pre><code>df = pd.DataFrame({'A':[0,0,1,1,0,0,1],\n              'B':[1,1,1,1,0,1,0]})\n\nfilter = (df['A'] == 0) &amp; (df['B'] == 1)\n\ndf['A'] = df['A'].where(~filter, 1)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10757731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72950c3523f54ef137edaccb6ed2adb6?s=128&d=identicon&r=PG&f=1", "display_name": "piza25", "link": "https://stackoverflow.com/users/10757731/piza25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58001919, "answer_count": 1, "score": 0, "last_activity_date": 1568850008, "creation_date": 1568848882, "last_edit_date": 1568849517, "question_id": 58001836, "link": "https://stackoverflow.com/questions/58001836/how-to-change-values-in-column-a-based-on-values-in-column-b-and-column-a-itself", "title": "How to change values in Column A based on values in Column B and Column A itself?", "body": "<p>How could I write a conditional statement that changes values in column A based on values of column B and column A itself. </p>\n\n<p>A  B ----change to--->  A  B</p>\n\n<p>0  1 -----------------------1  1</p>\n\n<p>Here is what I have tried but it does not seem to work </p>\n\n<p>df.loc[(df[A] == \"0\") &amp; (df[B] == 1) , A] == 1</p>\n\n<p>Any advice would help. Thanks.</p>\n"}, {"tags": ["python", "numpy", "syntax-error"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1568848924, "post_id": 58001817, "comment_id": 102409260, "body": "<code>Decision function shape:</code> is not a valid Python statement. What are you trying to do there?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568848943, "post_id": 58001817, "comment_id": 102409263, "body": "<code>X_test.shape: (25, 2)</code> is also not valid, I&#39;m not sure why you didn&#39;t get an error there."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568849118, "post_id": 58001817, "comment_id": 102409295, "body": "The syntax to set an array&#39;s shape is <code>np.reshape(X_test, (3, 2))</code>, <code>np.reshape(decision_function, (25,))</code>"}, {"owner": {"reputation": 87, "user_id": 11136504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5104c9b4bf3ad069c7474b06f49b2ed?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/11136504/brandon"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568849522, "post_id": 58001817, "comment_id": 102409374, "body": "Thank you for your help! That is what I needed to know."}], "owner": {"reputation": 87, "user_id": 11136504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5104c9b4bf3ad069c7474b06f49b2ed?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/11136504/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568849132, "creation_date": 1568848682, "last_edit_date": 1568849132, "question_id": 58001817, "link": "https://stackoverflow.com/questions/58001817/do-not-see-what-invalid-syntax-is-in-line-of-code", "title": "Do Not See What Invalid Syntax is in Line of Code", "body": "<p>I do not understand what the syntax error is for that particular line of code.</p>\n\n<pre><code>print(\"pred is equal to predictions: {}\".format(np.all(pred == \ngbrt.predict(X_test))))\ndecision_function = gbrt.decision_function(X_test)\nprint(\"Decision function minimum: {:.2f} maximum: {:.2f}\".format(\n        np.min(decision_function), np.max(decision_function)))\nX_test.shape: (25, 2)\nDecision function shape: (25,)\nDecision function:\n\nFile \"&lt;ipython-input-17-1457aa7b42c8&gt;\", line 34\n    Decision function shape: (25,)\n                ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "lambda", "concatenation", "f-string"], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 1648484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e315f863d37d7a11060f55fe247063e9?s=128&d=identicon&r=PG", "display_name": "fmakawa", "link": "https://stackoverflow.com/users/1648484/fmakawa"}, "edited": false, "score": 0, "creation_date": 1568880315, "post_id": 58001837, "comment_id": 102417577, "body": "okay but you have removed <code>acc</code> which is also a variable so my output here is missing that. I and I got that value using lambda which is no longer required with this form. Unless I have misunderstood"}, {"owner": {"reputation": 176, "user_id": 1648484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e315f863d37d7a11060f55fe247063e9?s=128&d=identicon&r=PG", "display_name": "fmakawa", "link": "https://stackoverflow.com/users/1648484/fmakawa"}, "edited": false, "score": 0, "creation_date": 1568881821, "post_id": 58001837, "comment_id": 102418289, "body": "I fixed your code by removing the <code>.join</code>  and still using <code>lambda</code> like so: <code>cmd_out = reduce(lambda acc, x: f&#39;{acc} -v {x[&quot;Source&quot;]}:{x[&quot;Destination&quot;]}{(&quot; &quot; if x[&quot;RW&quot;] else &quot;:ro &quot;)}&#39;, mounts, &quot;&quot;)</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 176, "user_id": 1648484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e315f863d37d7a11060f55fe247063e9?s=128&d=identicon&r=PG", "display_name": "fmakawa", "link": "https://stackoverflow.com/users/1648484/fmakawa"}, "edited": false, "score": 0, "creation_date": 1568897926, "post_id": 58001837, "comment_id": 102427276, "body": "&quot;Fixed&quot; isn&#39;t the word I would use. You are basically using <code>reduce</code> to reimplement <code>join</code>."}, {"owner": {"reputation": 176, "user_id": 1648484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e315f863d37d7a11060f55fe247063e9?s=128&d=identicon&r=PG", "display_name": "fmakawa", "link": "https://stackoverflow.com/users/1648484/fmakawa"}, "edited": false, "score": 0, "creation_date": 1568898621, "post_id": 58001837, "comment_id": 102427752, "body": "the problem of using <code>join</code> instead of <code>reduce</code> and <code>lambda</code> was that I ended missing a crucial variable in my output <code>acc</code> . <code>join</code> wasn&#39;t allowing its use."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 176, "user_id": 1648484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e315f863d37d7a11060f55fe247063e9?s=128&d=identicon&r=PG", "display_name": "fmakawa", "link": "https://stackoverflow.com/users/1648484/fmakawa"}, "edited": false, "score": 0, "creation_date": 1568899160, "post_id": 58001837, "comment_id": 102428113, "body": "<code>acc</code> is just the accumulated output of <code>reduce</code> from one iteration to the next. <code>join</code> doesn&#39;t need it, because it combines all the segments at once. Compare <code>&#39; &#39;.join(x for x in [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;])</code> with <code>reduce(lambda acc, x: acc  + x + &quot; &quot;, [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;], &quot;&quot;)</code>; the only difference is <code>reduce</code> produces a trailing space that you either don&#39;t care about or need to remove."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1568848883, "creation_date": 1568848883, "answer_id": 58001837, "question_id": 58001809, "link": "https://stackoverflow.com/questions/58001809/converting-string-concatenation-with-lambda-to-f-strings/58001837#58001837", "title": "Converting string concatenation with lambda to f strings", "body": "<p>You are trying to include <code>mounts</code> in the lambda expression, but that's what <code>reduce</code> is supposed to iterate over. I wouldn't use <code>reduce</code> here; use the <code>join</code> method instead.</p>\n\n<pre><code>cmd_out = \" \".join(f'-v {x[\"Source\"]}:{x[\"Destination\"]}{\"\" if x[\"RW\"] else \":ro\"}'\n                   for x in mounts)\n</code></pre>\n"}], "owner": {"reputation": 176, "user_id": 1648484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e315f863d37d7a11060f55fe247063e9?s=128&d=identicon&r=PG", "display_name": "fmakawa", "link": "https://stackoverflow.com/users/1648484/fmakawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 744, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568848883, "creation_date": 1568848547, "question_id": 58001809, "link": "https://stackoverflow.com/questions/58001809/converting-string-concatenation-with-lambda-to-f-strings", "title": "Converting string concatenation with lambda to f strings", "body": "<p>I am trying to wrap my head around advanced usage of f strings in Python 3 and I can't seem to figure out their usage with lambda functions. For example, when you have string concatenation that uses lambda to define some of the values in the string how do you go about using f strings? Even more so when one of the values uses an if function to define the value.</p>\n\n<p>For example, I have tried the following:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>        cmd_out = reduce(lambda acc, x: f'{acc} -v {x[\"Source\"]}:{x[\"Destination\"]}'\n                         f'{(\":ro\" if not x[\"RW\"] is True else \" \")} {mounts}')\n</code></pre>\n\n<p>But this doesn't work.</p>\n\n<p>This is the original with concatenation. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cmd_out = reduce(lambda acc,x: acc + \"-v \" + x[\"Source\"] + \":\" + x[\"Destination\"]+ (\":ro\" if not x[\"RW\"] is True else \"\") + \" \", mounts, \"\")\n</code></pre>\n\n<p>So rather than using the concatation I would like to be able to use f strings to simplify the process and reduce errors. Any thoughts?</p>\n"}, {"tags": ["python", "gekko"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 11899345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37f84915d0a661634ab9499c76bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "em_cee", "link": "https://stackoverflow.com/users/11899345/em-cee"}, "edited": false, "score": 1, "creation_date": 1569248672, "post_id": 58012734, "comment_id": 102525505, "body": "Trying this, I receive the following error: <code>TypeError: x must be a python list of GEKKO parameters, variables, or expressions</code>. Any thoughts for how to get the data type to match the function?"}, {"owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "reply_to_user": {"reputation": 153, "user_id": 11899345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37f84915d0a661634ab9499c76bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "em_cee", "link": "https://stackoverflow.com/users/11899345/em-cee"}, "edited": false, "score": 0, "creation_date": 1569267303, "post_id": 58012734, "comment_id": 102533868, "body": "Make sure the thing that you are including in the summation is a list of Gekko variables. You may need to create a new question with a minimum example to show the problem."}, {"owner": {"reputation": 153, "user_id": 11899345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37f84915d0a661634ab9499c76bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "em_cee", "link": "https://stackoverflow.com/users/11899345/em-cee"}, "edited": false, "score": 0, "creation_date": 1569291048, "post_id": 58012734, "comment_id": 102539775, "body": "In the following code:  <code>m.Equation(emissions[:,3] == sum(sum(sum(f[n,j]*-r[j,2]*unit *(.001*(i-n)**2 + 0.062*(i-n)) for i in range(years)) for n in range(i))for j in range(rec)))</code>  f and r are both Gekko array variables, unit is a Gekko parameter and i and n are the indices in the summation. I&#39;m unsure of how to combine these in another way to avoid this error or change the data type. Does <code>m.sum()</code> only work a single list?"}, {"owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "reply_to_user": {"reputation": 153, "user_id": 11899345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37f84915d0a661634ab9499c76bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "em_cee", "link": "https://stackoverflow.com/users/11899345/em-cee"}, "edited": false, "score": 0, "creation_date": 1569340813, "post_id": 58012734, "comment_id": 102562319, "body": "Did you try: <code>m.Equation(emissions[:,3] == m.sum(m.sum(m.sum(f[n,j]*-r[j,2]*unit *(.001*(i-n)**2 + 0.062*(i-n)) for i in range(years)) for n in range(i))for j in range(rec)))</code>? The <code>m.sum()</code> only works on 1D lists."}, {"owner": {"reputation": 153, "user_id": 11899345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37f84915d0a661634ab9499c76bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "em_cee", "link": "https://stackoverflow.com/users/11899345/em-cee"}, "edited": false, "score": 0, "creation_date": 1569343447, "post_id": 58012734, "comment_id": 102563541, "body": "Yes. Essentially. I pulled out the i because I realized it shouldn&#39;t be part of the sum. It now reads <code>m.Equations(emissions[i,3] == unit * m.sum(m.sum(f[n,j]* -r[j,2] *(.001*(i-n)**2 + 0.062*(i-n)) for n in range(i)) for j in range(rec)))</code> where i is in a for loop beforehand &quot;for i in range(years):&quot;"}, {"owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "reply_to_user": {"reputation": 153, "user_id": 11899345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37f84915d0a661634ab9499c76bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "em_cee", "link": "https://stackoverflow.com/users/11899345/em-cee"}, "edited": false, "score": 1, "creation_date": 1569382615, "post_id": 58012734, "comment_id": 102574379, "body": "Try it with <code>m.Equation</code> instead of <code>m.Equations</code> if you put it in a nested loop. If you write a list comprehension, I think you need to add square brackets such as: <code>[print(i) for i in range(5)]</code>. With a list comprehension try something like: <code>m.Equations(emissions[i,3] == unit * m.sum([m.sum([f[n,j]* -r[j,2] *(.001*(i-n)**2 + 0.062*(i-n)) for n in range(i)]) for j in range(rec)]))</code>"}], "tags": [], "owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "is_accepted": false, "score": 1, "last_activity_date": 1568901517, "creation_date": 1568901517, "answer_id": 58012734, "question_id": 58001757, "link": "https://stackoverflow.com/questions/58001757/is-there-a-way-to-increase-the-line-length-for-an-equation-in-gekko-after-receiv/58012734#58012734", "title": "Is there a way to increase the line length for an equation in Gekko after receiving &quot;APM model error: string &gt; 15000 characters&quot;?", "body": "<p>Try using the <code>m.sum()</code> function as a built-in GEKKO object. If you use the Python <code>sum</code> function then it creates a large summation equation that needs to be interpreted at run-time and may exceed the equation size limit. The <code>m.sum()</code> creates the summation in byte-code instead.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>m.Equation(emissions[:,3] == \\\n   m.sum(m.sum(m.sum(f[n,j]*-r[j,2]*unit *(.001*(i-n)**2 + 0.062*(i-n)) \\\n   for i in range(years)) for n in range(i))for j in range(rec)))\n</code></pre>\n\n<p>Here is a simple example that shows the difference in performance.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from gekko import GEKKO\nimport numpy as np\nimport time\nn = 5000\nv = np.linspace(0,n-1,n)\n\n# summation method 1 - Python sum\nm = GEKKO()\nt = time.time()\ns = sum(v)\ny = m.Var()\nm.Equation(y==s)\nm.solve(disp=False)\nprint(y.value[0])\nprint('Elapsed time: ' + str(time.time()-t))\nm.cleanup()\n\n# summation method 2 - Intermediates\nm = GEKKO()\nt = time.time()\ns = 0\nfor i in range(n):\n    s = m.Intermediate(s + v[i])\ny = m.Var()\nm.Equation(y==s)\nm.solve(disp=False)\nprint(y.value[0])\nprint('Elapsed time: ' + str(time.time()-t))\nm.cleanup()\n\n# summation method 3 - Gekko sum\nm = GEKKO()\nt = time.time()\ns = m.sum(v)\ny = m.Var()\nm.Equation(y==s)\nm.solve(disp=False)\nprint(y.value[0])\nprint('Elapsed time: ' + str(time.time()-t))\nm.cleanup()\n</code></pre>\n\n<p><strong>Results</strong></p>\n\n<pre><code>12497500.0\nElapsed time: 0.17874956130981445\n12497500.0\nElapsed time: 5.171698570251465\n12497500.0\nElapsed time: 0.1246955394744873\n</code></pre>\n\n<p>The 15,000 character limit for a single equation is a hard limit. We thought about making it adjustable with <code>m.options.MAX_MEMORY</code> but then large equations can make very dense matrix factorizations for the solver. It is often better to break up the equation or use other methods to reduce the equation size. </p>\n"}], "owner": {"reputation": 153, "user_id": 11899345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37f84915d0a661634ab9499c76bb9a?s=128&d=identicon&r=PG&f=1", "display_name": "em_cee", "link": "https://stackoverflow.com/users/11899345/em-cee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568901517, "creation_date": 1568848043, "question_id": 58001757, "link": "https://stackoverflow.com/questions/58001757/is-there-a-way-to-increase-the-line-length-for-an-equation-in-gekko-after-receiv", "title": "Is there a way to increase the line length for an equation in Gekko after receiving &quot;APM model error: string &gt; 15000 characters&quot;?", "body": "<p>I'm using Gekko for an optimization problem with constraints that require summations over array variables. Because these arrays are long, I keep getting the error: <code>APM model error: string &gt; 15000  characters</code></p>\n\n<p>The summation needs to be summed over three variables: i in range(1, years), n in range(1, i), and j in range(1,receptors). As it compiles, the number of variables included in each summation increases. I want to leave the code as a summation with the following line: </p>\n\n<p><code>m.Equation(emissions[:,3] == sum(sum(sum(f[n,j]*-r[j,2]*unit *(.001*(i-n)**2 + 0.062*(i-n)) for i in range(years)) for n in range(i))for j in range(rec)))</code></p>\n\n<p>However, these constraints cause the error of more than 15,000 characters for a line. </p>\n\n<p>I have previously solved the problem using for loops and intermediates to solve all of these variables outside of the \"constraint\" environment. It has given me the right answer, but takes a long time to compile the model (upwards of 4 hours for model building, and less than 3 minutes to solve it). The code looked like this:</p>\n\n<pre><code>for i in range(years): \n    emissions[i,0] = s[i,1]\n    emissions[i,1] = s[i,3]\n    emissions[i,2] = s[i,5] \n    emissions[i,3] = 0\n    emissions[i,4] = 0\n    emissions[i,5] = 0\n    for n in range(i):\n        for j in range(rec): \n            #update + binary * flux * conversion * growth \n            emissions[i,3] = m.Intermediate(emissions[i,3] + f[n,j] * - rankedcopy[j,2] * unit * (.001*(i-n)**2 + 0.062*(i-n)))\n            emissions[i,4] = m.Intermediate(emissions[i,4] + f[n,j] * - rankedcopy[j,3] * unit * (.001*(i-n)**2 + 0.062*(i-n)))\n            emissions[i,5] = m.Intermediate(emissions[i,5] + f[n,j] * - rankedcopy[j,4] * unit * (.001*(i-n)**2 + 0.062*(i-n)))\n</code></pre>\n\n<p>I'm hoping that avoiding the for loops will increase the efficiency which enables me to expand the model, but I'm unsure of a way to increase the APM model string limit. </p>\n\n<p>I am also open to other suggestions of how to embed intermediates into the summation.</p>\n"}, {"tags": ["python", "jython"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1568848125, "post_id": 58001744, "comment_id": 102409133, "body": "<code>request</code> is just a <code>unicode</code> string. you can&#39;t call get on that."}, {"owner": {"reputation": 37, "user_id": 9968765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-69SWV_rKiKk/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0UC1qvmYN1odIukctBLH_mu4BUig/mo/photo.jpg?sz=128", "display_name": "Kumar", "link": "https://stackoverflow.com/users/9968765/kumar"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1568848240, "post_id": 58001744, "comment_id": 102409148, "body": "@JacobIRR --thanks for the reply, how do we make call to the other function ?"}, {"owner": {"reputation": 38064, "user_id": 683080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ad2af1f028b1b7e76c14f83bdf26cb?s=128&d=identicon&r=PG", "display_name": "John Szakmeister", "link": "https://stackoverflow.com/users/683080/john-szakmeister"}, "edited": false, "score": 2, "creation_date": 1568848636, "post_id": 58001744, "comment_id": 102409200, "body": "Perhaps you really want to use the <a href=\"https://pypi.org/project/requests/\" rel=\"nofollow noreferrer\">requests</a> library instead?  You can also look at <a href=\"https://docs.python.org/3/library/urllib.request.html\" rel=\"nofollow noreferrer\">urllib.request</a> too.  There is some <a href=\"https://docs.python.org/3/library/urllib.request.html#examples\" rel=\"nofollow noreferrer\">example</a> code in the docs."}, {"owner": {"reputation": 4231, "user_id": 1947216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b52eaf82bd907e8b39e49aeea74273e?s=128&d=identicon&r=PG", "display_name": "mentallurg", "link": "https://stackoverflow.com/users/1947216/mentallurg"}, "edited": false, "score": 1, "creation_date": 1568848680, "post_id": 58001744, "comment_id": 102409208, "body": "Here are gut examples:  1) <a href=\"https://stackoverflow.com/questions/11763976/python-http-client-json-request-and-response-how\" title=\"python http client json request and response how\">stackoverflow.com/questions/11763976/&hellip;</a> and  2) <a href=\"https://stackoverflow.com/questions/24671566/http-client-request-method-in-python-3?rq=1\" title=\"http client request method in python 3\">stackoverflow.com/questions/24671566/&hellip;</a>"}], "owner": {"reputation": 37, "user_id": 9968765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-69SWV_rKiKk/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0UC1qvmYN1odIukctBLH_mu4BUig/mo/photo.jpg?sz=128", "display_name": "Kumar", "link": "https://stackoverflow.com/users/9968765/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568847938, "creation_date": 1568847938, "question_id": 58001744, "link": "https://stackoverflow.com/questions/58001744/how-to-make-httprequest-in-python", "title": "How to make httprequest in python", "body": "<p>I am having issue making rest call, it is throwing Exception during execution: AttributeError: 'unicode' object has no attribute 'get'</p>\n\n<pre><code>def get_headers(request):\n    #CSRF Protection\n    response = request.get('crumbIssuer/api/json')\n    if response.isSuccessful():\n        crumb = JsonPathResult(response.response, 'crumb').get()\n        return {'Jenkins-Crumb':crumb}\n\nServer = 'https://jenkins.com'\nusername = user1\npassword = pwd\n\nrequest = HttpRequest(Server, username, password)\nheaders = get_headers(request)\n</code></pre>\n"}, {"tags": ["python", "pytorch"], "comments": [{"owner": {"reputation": 429, "user_id": 6423473, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10209720678960826/picture?type=large", "display_name": "Brian Formento", "link": "https://stackoverflow.com/users/6423473/brian-formento"}, "edited": false, "score": 0, "creation_date": 1568874830, "post_id": 58001703, "comment_id": 102414853, "body": "if you follow this tutorial <a href=\"https://pytorch.org/tutorials/beginner/data_loading_tutorial.html\" rel=\"nofollow noreferrer\">pytorch.org/tutorials/beginner/data_loading_tutorial.html</a> you will get to the crop custom transform, I suggest using data loaders to apply any form of transformation, even if you&#39;re just starting out, as it will help you when you have more data. Also how many channels is the image you&#39;re plotting?"}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 8031372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwviP.jpg?s=128&g=1", "display_name": "Dr. H. Lecter", "link": "https://stackoverflow.com/users/8031372/dr-h-lecter"}, "is_accepted": true, "score": 1, "last_activity_date": 1584736152, "creation_date": 1584736152, "answer_id": 60781252, "question_id": 58001703, "link": "https://stackoverflow.com/questions/58001703/images-change-color-after-unfolding-using-pytorch/60781252#60781252", "title": "Images change color after unfolding using pytorch", "body": "<p>I think your dataset is probably fine.</p>\n\n<p>I had a similar issue in the past related to this. In this situation I have the feeling that the culprit is the matplotlib.imshow() function.</p>\n\n<p>It would be helpful if you could share the complete code you have used to plot the matplotlib figure.</p>\n\n<p>You are most likely taking a RGBA instead of a regular RGB as input into the plt.imshow() function. Thus the color are just because you also display an alpha value (A) on top of the regular red green blue (RGB).</p>\n\n<p>If that is the case I would suggest that you try to plot this</p>\n\n<pre><code>image = torch.t(data [0][0][0])\n</code></pre>\n"}], "owner": {"reputation": 629, "user_id": 7432133, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1219059728141207/picture?type=large", "display_name": "Tahjid Ashfaque", "link": "https://stackoverflow.com/users/7432133/tahjid-ashfaque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 60781252, "answer_count": 1, "score": 2, "last_activity_date": 1584736152, "creation_date": 1568847486, "question_id": 58001703, "link": "https://stackoverflow.com/questions/58001703/images-change-color-after-unfolding-using-pytorch", "title": "Images change color after unfolding using pytorch", "body": "<p>I am new to pytorch, for one of my projects I am dividing a large image into smaller tiles/patches. I am using unfold to make this happen. My code is as follows</p>\n\n<pre><code>data = training_set[1][0].data.unfold(1, 64, 64).unfold(2, 64, 64).unfold(3, 64, 64)\n</code></pre>\n\n<p>After doing this I transpose the resultant matrix since the images are flipped, like this sample code</p>\n\n<pre><code>torch.t(data [0][0][0][0])\n</code></pre>\n\n<p>but the resultant images lose color, or get discolored for some reason, and I am worried that this might affect any calculations I do based on these patches.</p>\n\n<p>The following is a screenshot of the problem<a href=\"https://i.stack.imgur.com/JKept.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JKept.png\" alt=\"enter image description here\"></a></p>\n\n<p>The top is the patch and the bottom one is the complete picture</p>\n\n<p>Any help is appreciated, thanks</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1568846988, "post_id": 58001540, "comment_id": 102408903, "body": "When you run the code from the terminal, does <code>test2.db</code> exist in the current directory?  (sqlite3 allows you to connect to a nonexistent file, but it treats it as a new empty database.)"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 1, "creation_date": 1568847006, "post_id": 58001540, "comment_id": 102408909, "body": "What gives <code>print(name)</code>?"}, {"owner": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568848106, "post_id": 58001540, "comment_id": 102409129, "body": "@JohnGordon the test2.db file and the .py file are in the same directory.   even more odd running the code from the text editor outputs this, almost like the text editor is storing the table info somehow.   &gt;&gt;&gt; user_name = &quot;Jeff&quot; &gt;&gt;&gt;  &gt;&gt;&gt; def account_balance(name): ...     cur.execute(total_bal) ...     table = cur.execute(total_bal) ...     total = 0 ...     name = user_name ...     for t in table: ...         if t[0] == name: ...             total += t[1] ...     return total ...  &gt;&gt;&gt; print(account_balance(user_name)) 150.0"}, {"owner": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "edited": false, "score": 0, "creation_date": 1568848120, "post_id": 58001540, "comment_id": 102409132, "body": "sorr for the atrocious formatting on that."}, {"owner": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1568848785, "post_id": 58001540, "comment_id": 102409229, "body": "@stovfl print name gives me &quot;Joe&quot; if i input Joe with a len of 3. I get the same issue even if I assign user_name explicitly."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1568880416, "post_id": 58001540, "comment_id": 102417613, "body": "@JeffR: <b><i>&quot;print name gives me &quot;Joe&quot;&quot;</i></b>: Now, verify it all together with <code>print(&#39;if {} == {}&#39;.format(t[0], name))</code> just before the <code>if ...</code> line."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568905331, "post_id": 58001540, "comment_id": 102431910, "body": "Can you add the line <code>import os; print(os.getcwd())</code> and run the code in both environments (Visual Studio and terminal) and show us both outputs?"}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "edited": false, "score": 0, "creation_date": 1568850421, "post_id": 58001909, "comment_id": 102409576, "body": "if you do print(results) it is giving me an empty list on your second solution. Any idea what could be causing that?  I forgot that I already tried your first solution assigning the variable to the the cur.fetchall(). Still returning 0 when I run from the command line. That solution also brings back the right amount when I run it from the text editor."}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "edited": false, "score": 0, "creation_date": 1568850553, "post_id": 58001909, "comment_id": 102409607, "body": "My guess would be the name you entered does not exactly match a record in your database."}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "edited": false, "score": 0, "creation_date": 1568851465, "post_id": 58001909, "comment_id": 102409739, "body": "Make sure you are running the script in the same working directory as your database. If you do not want to do that; import os, and add <code>os.chdir(&quot;path to db directory&quot;)</code>at the top of your script. My guess is that python is not using your pre created database and is creating a new one."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568855318, "post_id": 58001909, "comment_id": 102410389, "body": "According to <a href=\"https://docs.python.org/2/library/sqlite3.html\" rel=\"nofollow noreferrer\">the documentation</a>, you can iterate directly over the result from <code>execute()</code>; you do not have to call <code>fetch</code>."}, {"owner": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568856062, "post_id": 58001909, "comment_id": 102410510, "body": "@JohnGordon I&#39;ve found that to be true. It doesn&#39;t fix my output here unfortunately. It seems like the execute isn&#39;t giving me an actual list as it is returning as an empty list. Very confusing"}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "edited": false, "score": 0, "creation_date": 1568856121, "post_id": 58001909, "comment_id": 102410519, "body": "I did not know you could do that, very interesting! I will update my answer. @Jeff R did you try my suggestion regarding the current working directory?"}, {"owner": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "edited": false, "score": 0, "creation_date": 1568856801, "post_id": 58001909, "comment_id": 102410644, "body": "@RobertKearns Going to check it in the morning with fresh eyes. Been looking at this for several hours. Thanks for the help."}], "tags": [], "owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "is_accepted": false, "score": 0, "last_activity_date": 1568856049, "last_edit_date": 1568856049, "creation_date": 1568849505, "answer_id": 58001909, "question_id": 58001540, "link": "https://stackoverflow.com/questions/58001540/sqlite3-query-not-returning-results-in-a-function/58001909#58001909", "title": "sqlite3 query not returning results in a function", "body": "<p>You could actually just do this with your query and avoid the account balance function all together.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>statement = \"SELECT name, account FROM customers2 WHERE name = ?;\"\nname = input(\"Enter your name: \")\ncur.execute(statement, (str(name),))\nresults = cur.fetchone()\nif results:\n   print(f\"Name: {results[0]}\\nAccount Balance: {results[1]}\"\nelse:\n   print(\"Your name is not in the database\")\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 11933251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jbeUAZw-Q1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcQ0M4Ul1qC7DG7PqxG2wi66vmqkw/photo.jpg?sz=128", "display_name": "Jeff R", "link": "https://stackoverflow.com/users/11933251/jeff-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568860606, "creation_date": 1568846121, "last_edit_date": 1568860606, "question_id": 58001540, "link": "https://stackoverflow.com/questions/58001540/sqlite3-query-not-returning-results-in-a-function", "title": "sqlite3 query not returning results in a function", "body": "<p>Function using <strong>sqlite3</strong> to bring back data from a table and return #results based on criteria is only returning zero. Running the #function through Visual Studio brings back the expected results but #when I try to run it from the terminal it is interpreting the table #as being an empty list.</p>\n\n<pre><code>import sqlite3\n\ncon = sqlite3.connect('test2.db')\ncur = con.cursor()\n</code></pre>\n\n<p>small table to illistrate the problem. Table output is <code>[('Jane', 300.0), ('Joe', 100.0), ('Joe', 50.0)]</code></p>\n\n<pre><code>total_bal = \"\"\"SELECT name, amount FROM customers2\"\"\"\n\nuser_name = input(\"What is your name? \")\n\ndef account_balance(name):\n    cur.execute(total_bal)\n    table = cur.execute(total_bal)\n    total = 0\n    name = user_name\n    for t in table:\n\n        if t[0] == name:\n            total += t[1]            \n    return total\nprint(account_balance(user_name))\n</code></pre>\n\n<p>expecting to return 150 <code>if user_name input = 'Joe' or 300 if 'Jane'</code></p>\n"}, {"tags": ["python", "heroku", "github-webhook"], "comments": [{"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1568846381, "post_id": 58001531, "comment_id": 102408763, "body": "Well you&#39;d just run arbitrary code on Heroku. Do you have an application to run?"}, {"owner": {"reputation": 21, "user_id": 8334697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9950046fdb33eebf0c9c8bd55f5df23?s=128&d=identicon&r=PG&f=1", "display_name": "Walker Sorlie", "link": "https://stackoverflow.com/users/8334697/walker-sorlie"}, "reply_to_user": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1568846918, "post_id": 58001531, "comment_id": 102408889, "body": "@Chris I&#39;m trying to have Heroku run a Heroku Scheduler add-on command whenever a webhook response is received."}, {"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1568849269, "post_id": 58001531, "comment_id": 102409321, "body": "That&#39;s not how it works. Heroku <i>Scheduler</i>, as its name suggests, runs a command on a <i>schedule</i>. If you want to respond to a request to a given path you should run an application that has an appropriate route and request handler. Heroku isn&#39;t Amazon Lambda. Use the right tool for the job."}], "owner": {"reputation": 21, "user_id": 8334697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9950046fdb33eebf0c9c8bd55f5df23?s=128&d=identicon&r=PG&f=1", "display_name": "Walker Sorlie", "link": "https://stackoverflow.com/users/8334697/walker-sorlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568846878, "creation_date": 1568846061, "last_edit_date": 1568846878, "question_id": 58001531, "link": "https://stackoverflow.com/questions/58001531/how-to-configure-heroku-to-receive-webhooks-from-github", "title": "How to configure Heroku to receive webhooks from GitHub?", "body": "<p>I am trying to create a <strong>GitHub Webhook</strong> that pings a <em>URL</em> whenever one of my repos is updated. I want to ping my application running on <strong>Heroku</strong>, but I am not sure how to setup Heroku to accept an external webhook. </p>\n\n<p>I see that Heroku can create webhooks, but I don't see if Heroku can receive a payload from a  webhook. </p>\n\n<p>Is this possible?</p>\n\n<p>EDIT:\nI should add, the idea would be when Heroku receives a response from the webhook, a command from the Heroku Scheduler add-on would run. So I guess the real question is if it's possible to have Heroku receive a webhook response and then run a Heroku Scheduler add-on command.</p>\n"}, {"tags": ["python", "python-3.x", "parsing", "authentication"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568846159, "post_id": 58001523, "comment_id": 102408702, "body": "<code>auth=(username, password)</code> is specifically for HTTP Basic Authentication.  Does that website use HTTP Basic Authentication?  A lot of sites don&#39;t."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1568846787, "post_id": 58001523, "comment_id": 102408859, "body": "Don&#39;t use <code>.headers</code>, this site uses <code>&lt;form action=&quot;&#47;login&quot;</code>, search for <code>requests form login</code>"}, {"owner": {"reputation": 11, "user_id": 12087394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e23ee09b1c1512826a730439f8b60e?s=128&d=identicon&r=PG&f=1", "display_name": "7274", "link": "https://stackoverflow.com/users/12087394/7274"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568847524, "post_id": 58001523, "comment_id": 102409035, "body": "@JohnGordon To be honest I didn&#39;t know that there&#39;s different types of authentication, is there an easy way to distinguish one from another?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1568847779, "post_id": 58001523, "comment_id": 102409074, "body": "Based on @stovfl&#39;s comment, it looks like that site doesn&#39;t use it, but instead uses a plain form to log in."}], "owner": {"reputation": 11, "user_id": 12087394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01e23ee09b1c1512826a730439f8b60e?s=128&d=identicon&r=PG&f=1", "display_name": "7274", "link": "https://stackoverflow.com/users/12087394/7274"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568846990, "creation_date": 1568846000, "last_edit_date": 1568846990, "question_id": 58001523, "link": "https://stackoverflow.com/questions/58001523/how-to-authenticate-using-requests-in-python3-for-futher-parsing", "title": "How to authenticate using requests in python3 for futher parsing?", "body": "<p>I'm trying to login on <a href=\"https://accounts.pixiv.net/login\" rel=\"nofollow noreferrer\">this</a> page using requests in python3. \nFound a <a href=\"https://imgur.com/qw1kCtF\" rel=\"nofollow noreferrer\">POST-request</a> in a browser which I'm probably need to imitate.</p>\n\n<p>I copied the headers and created a requests.session, see the code below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nimport os\n\nheader = {\n'accept': 'application/json',\n'accept-encoding': 'gzip, deflate, br',\n'accept-language': 'en-US,en;q=0.5',\n'connection': 'keep-alive',\n'content-length': '596',\n'content-type': 'application/x-www-form-urlencoded',\n'host': 'accounts.pixiv.net',\n'referer': 'https://accounts.pixiv.net/login',\n'user-agent': 'Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0'}\n\nlogin_page_url = 'https://accounts.pixiv.net/login'\ntarget_url = 'https://accounts.pixiv.net/\napi/login?lang=en'\nlogin = 'MY_LOGIN'\npassword = 'MY_PASS'\n\nsession = requests.Session()\nsession.headers = header\nfirst_resp = session.get(login_page_url)\nsecond_resp = session.post(target_url, auth=(login, password))\n\nprint(second_resp)\nprint(second_resp.text)\n</code></pre>\n\n<p>But when I run this script, it just freezes for like 5 minutes and then exits with <code>.ConnectionError</code> instead of <code>Response[200]</code> or something, and I really don't have any idea why</p>\n"}, {"tags": ["python", "python-3.x", "bubble-sort"], "comments": [{"owner": {"reputation": 396, "user_id": 11651298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y7Bb7VGZEvU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOsrMxPPuvzR0R6k4W9FeP-N1D8A/mo/photo.jpg?sz=128", "display_name": "Akshit", "link": "https://stackoverflow.com/users/11651298/akshit"}, "edited": false, "score": 0, "creation_date": 1568846053, "post_id": 58001498, "comment_id": 102408675, "body": "1 is substraced from i because the indices start from 0, so the last index will be length - 1."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1568846197, "post_id": 58001498, "comment_id": 102408712, "body": "<code>while i &gt; 0</code> is correct because then <code>j == 0</code>, and you swap <code>i=1</code> and <code>j=0</code> index when <code>numList[j] &gt; numList[j+1]</code>, so therefore 2 and 1 wolud be flipped, and you get 1,2,3,4,6"}], "answers": [{"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 1, "last_activity_date": 1568846536, "creation_date": 1568846536, "answer_id": 58001595, "question_id": 58001498, "link": "https://stackoverflow.com/questions/58001498/sorting-algorithm-in-python/58001595#58001595", "title": "Sorting algorithm in Python", "body": "<blockquote>\n  <p>\"Why is 1 substracted from \"i\"?\" </p>\n</blockquote>\n\n<p>Because collections are zero-indexed. You have N elements, but the last indexable value is always <code>N-1</code></p>\n\n<p>When <code>j &lt; i</code> and you access <code>numList[j+1]</code>, then for when <code>j</code> is at its max value, <code>j == i-1</code>, and <code>i</code> is at its max value of <code>len(numList) - 1</code>, then you access <code>numList[(i-1)+1] == numList[i] == numList[len(numList) - 1]</code>, which is the last available element.  </p>\n\n<blockquote>\n  <p>two and the one that makes my head hurt the most</p>\n</blockquote>\n\n<p><code>while i &gt; 0</code> is correct because in the first iteration, <code>i == 1</code> and <code>j == 0</code>, and you swap <code>j+1 == 1</code> and <code>j == 0</code> index when <code>numList[j] &gt; numList[j+1]</code>, so therefore 2 (index 1) and 1 (index 0) would be flipped, and you get <code>1,2,3,4,6</code> from <code>2,1,3,4,6</code></p>\n"}, {"tags": [], "owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "is_accepted": false, "score": 1, "last_activity_date": 1568847830, "last_edit_date": 1568847830, "creation_date": 1568846557, "answer_id": 58001600, "question_id": 58001498, "link": "https://stackoverflow.com/questions/58001498/sorting-algorithm-in-python/58001600#58001600", "title": "Sorting algorithm in Python", "body": "<p>The algorithm carries the maximum of the first i+1 numbers to the front (so i+1-th position), by switching the neighbours until the maximum 'bubbles up'.\nIn the first iteration, i = len(numList) - 1, so the maximum of the whole numList \n(index starts at 0 and ends at len(numList) - 1) is carried to the front. \nThis is the maximum value, which should be last. Now you only have to worry about\nthe first i - 1 values, therefore i is reduced by one. \nBecause i > 1 forgets about carrying the first element to the front (being the second position), 2 and 1 in your example are not ordered correctly, as they would need to switch.\nTherefore you need the i = 1 iteration step.</p>\n\n<p>There is a great site, which helps with visualisation of the sorting algorithms.\n<a href=\"https://visualgo.net/en/sorting?slide=1\" rel=\"nofollow noreferrer\">https://visualgo.net/en/sorting?slide=1</a>. Your algorithm is called bubble-sort.</p>\n"}], "owner": {"reputation": 3, "user_id": 12023161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNVn9.png?s=128&g=1", "display_name": "Aulmeies", "link": "https://stackoverflow.com/users/12023161/aulmeies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568850300, "creation_date": 1568845758, "last_edit_date": 1568850300, "question_id": 58001498, "link": "https://stackoverflow.com/questions/58001498/sorting-algorithm-in-python", "title": "Sorting algorithm in Python", "body": "<p>Currently I found this code while learning from a video. However, the code has a flaw which was pointed out but I am unable to understand part of the algorithm and why that flaw is a 'flaw'.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>i = len(numList) - 1\n\nwhile i &gt; 1:\n    j = 0\n\n    while j &lt; i:\n\n        # If the value on the left is bigger switch values\n        if numList[j] &gt; numList[j+1]:\n            temp = numList[j]\n            numList[j] = numList[j + 1]\n            numList[j + 1] = temp\n        else:\n            print()\n\n        j += 1\n\n    i -= 1\n\nfor k in numList:\n    print(k, end=\", \")\nprint()\n</code></pre>\n\n<p>The code is supposed to order numbers from a list of numbers, however I am unable to understand two things out of it:</p>\n\n<p>One is \"Why is 1 subtracted from \"i\"?\" </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>i = len(numList) - 1\n</code></pre>\n\n<p>And two, when the last number of the algorithm is \"1\" the algorithm won't order the numbers properly. For example, a list of \"4, 2, 6, 3, 1\" will be ordered as \"2, 1, 3, 4, 6\" instead of the correct \"1, 2, 3, 4, 6,\". People from the comments pointed out the reason for this is that it should be \"while i > 0\" or \"while i >= 1\" instead of \"while i > 1\". </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>while i &gt; 1:\n</code></pre>\n\n<p>However I am unable to understand why it is like that.</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1568846324, "post_id": 58001477, "comment_id": 102408746, "body": "This example could be helpful <a href=\"https://github.com/matplotlib/matplotlib/blob/94c8e2584eba3bad7c42ede8680da714da73dbc3/examples/lines_bars_and_markers/barchart.py\" rel=\"nofollow noreferrer\">github.com/matplotlib/matplotlib/blob/&hellip;</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1568857689, "creation_date": 1568857689, "answer_id": 58002643, "question_id": 58001477, "link": "https://stackoverflow.com/questions/58001477/grouped-chart-in-python-matplotlib-pyplot/58002643#58002643", "title": "Grouped chart in python (matplotlib.pyplot)", "body": "<p>Use <code>set_index</code> and <code>pd.DataFrame.plot.bar</code></p>\n\n<p>MCVE:</p>\n\n<p>Where df,</p>\n\n<pre><code>   SYS  LOCKED  UNLOCKED\n0   A        2         3\n1   B        1         2\n2   C        4         1\n</code></pre>\n\n<p>Then,</p>\n\n<pre><code>df.set_index('SYS').plot.bar()\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/w5NNT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w5NNT.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 342, "user_id": 11724813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93e4c2c2a13f35ae5f56bc9cf5a07ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kokokoko", "link": "https://stackoverflow.com/users/11724813/kokokoko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58002643, "answer_count": 1, "score": 0, "last_activity_date": 1568857689, "creation_date": 1568845632, "last_edit_date": 1568846031, "question_id": 58001477, "link": "https://stackoverflow.com/questions/58001477/grouped-chart-in-python-matplotlib-pyplot", "title": "Grouped chart in python (matplotlib.pyplot)", "body": "<p>I have the following table as a result of a SQL query:</p>\n\n<pre><code>SYS|LOCKED|UNLOCKED|\n A |   2  |  3     |\n B |   1  |  2     |\n C |   4  |  1     |\n</code></pre>\n\n<p>This is the result of the SQL query that is put into pandas dataframe and I would like to turn it into the grouped chart where X = SYS and Y = first column with numbers of LOCKED and the second column with UNLOCKED items.\nThis is the code so far, but it misses the plot code. Any ideas?</p>\n\n<pre><code>import pyodbc\nimport os\nimport sys\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nwith open('serv1.txt', 'r') as servfile:\n    serv = servfile.read()\n\nwith open('datab1.txt', 'r') as databfile:\n    datab = databfile.read()\n\nprint(serv)\nprint(datab)\ncnxn = pyodbc.connect('Trusted_Connection=yes', driver = '{ODBC Driver 13 for SQL Server}',server = serv, database = datab)\nprint(cnxn)\nSQL_Query = pd.read_sql_query(\"\"\"select SYS,\n                                   sum(case when LOCK_STAT = 'Locked' then 1 else 0 end) as LOCKED,\n                                   sum(case when LOCK_STAT = 'Unlocked' then 1 else 0 end) as UNLOCKED\n                                from dbo.USR_02_ALL_RAW\n                                group by SYS;\"\"\")\ndf = pd.DataFrame(SQL_Query, columns=['SYS', 'LOCKED','UNLOCKED'])\n</code></pre>\n\n<p>From here on is where I am not sure about the code. The SQL query creates the table as above, but I am not sure how to put into into grouped chart where Y has two bars for each group (SYS on X axis).</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568846360, "post_id": 58001468, "comment_id": 102408757, "body": "what did you try ? Show your code. Show full error message. Did you try to draw figure with <code>N</code> sides using loop with <code>forwar</code> and <code>left</code> (or <code>right</code>)?"}, {"owner": {"reputation": 337, "user_id": 5199194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QaliC.jpg?s=128&g=1", "display_name": "Namandeep_Kaur", "link": "https://stackoverflow.com/users/5199194/namandeep-kaur"}, "edited": false, "score": 0, "creation_date": 1568848410, "post_id": 58001468, "comment_id": 102409170, "body": "Hi, I executed your code but named the turtle object &#39;foo&#39; (basically, anything but turtle) and replaced turtle with foo wherever it is being used. Also, added turtle.mainloop() at the end and it works! Let me know if you&#39;re looking for something else."}, {"owner": {"reputation": 29, "user_id": 12087419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc7a81a6b89483f2b50fc9ed4c9b62b?s=128&d=identicon&r=PG&f=1", "display_name": "Phill", "link": "https://stackoverflow.com/users/12087419/phill"}, "edited": false, "score": 0, "creation_date": 1568849355, "post_id": 58001468, "comment_id": 102409333, "body": "Yes, I am looking to get a location and diameter input from the user. Location of the target and diameter of the yellow center. Like this: location = float(input(&quot;Enter Location here: &quot;)). But I don&#39;t know how and where to put the location and diameter value in my code so that the target moves."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1568856426, "post_id": 58001468, "comment_id": 102410576, "body": "One think that&#39;s wrong with your code is that it is not indented properly \u2014 at least not as shown in your question. Indentation is very significant in Python, so please <a href=\"https://stackoverflow.com/posts/58001468/edit\">edit</a> your question and fix it."}, {"owner": {"reputation": 29, "user_id": 12087419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc7a81a6b89483f2b50fc9ed4c9b62b?s=128&d=identicon&r=PG&f=1", "display_name": "Phill", "link": "https://stackoverflow.com/users/12087419/phill"}, "edited": false, "score": 0, "creation_date": 1568859267, "post_id": 58001468, "comment_id": 102411067, "body": "So... nobody is able to answer my question?"}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1568869933, "creation_date": 1568869933, "answer_id": 58004102, "question_id": 58001468, "link": "https://stackoverflow.com/questions/58001468/code-that-draws-a-target-ask-the-user-for-input-for-the-location-of-the-target/58004102#58004102", "title": "Code that draws a target. Ask the user for input for the location of the target and the diameter of the yellow center", "body": "<blockquote>\n  <p>So... nobody is able to answer my question?</p>\n</blockquote>\n\n<p>It's not a difficult problem -- you even have a loop you don't need:</p>\n\n<pre><code>from turtle import Screen, Turtle\n\ndef origin_circle(turtle, diameter):\n    turtle.dot(diameter * 4, 'black')\n    turtle.dot(diameter * 3, 'cyan')\n    turtle.dot(diameter * 2, 'red')\n    turtle.dot(diameter, 'yellow')\n\ndiameter = float(input(\"Diameter of target center: \"))\nx_coordinate = float(input(\"X coordinate of target center: \"))\ny_coordinate = float(input(\"Y coordinate of target center: \"))\n\nscreen = Screen()\n\nturtle = Turtle()\nturtle.hideturtle()\n\nturtle.penup()\nturtle.goto(x_coordinate, y_coordinate)\n\norigin_circle(turtle, diameter)\n\nscreen.exitonclick()\n</code></pre>\n\n<p>Note that <code>turtle.dot()</code> takes a <em>diameter</em> as input and draws when the pen is <em>up</em> or <em>down</em> but <code>turtle.circle()</code> uses a <code>radius</code> and only draws when the pen is <em>down</em>.</p>\n"}], "owner": {"reputation": 29, "user_id": 12087419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc7a81a6b89483f2b50fc9ed4c9b62b?s=128&d=identicon&r=PG&f=1", "display_name": "Phill", "link": "https://stackoverflow.com/users/12087419/phill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568869933, "creation_date": 1568845526, "last_edit_date": 1568848277, "question_id": 58001468, "link": "https://stackoverflow.com/questions/58001468/code-that-draws-a-target-ask-the-user-for-input-for-the-location-of-the-target", "title": "Code that draws a target. Ask the user for input for the location of the target and the diameter of the yellow center", "body": "<p>I am having problems trying to draw (in python using turtle) the archery target and asking the user for input for location of the target and diameter of the yellow center. <a href=\"https://i.stack.imgur.com/qt0eU.png\" rel=\"nofollow noreferrer\">target image</a></p>\n\n<p>Code I have so far (probably wrong): </p>\n\n<pre><code>import turtle\n\nturtle = turtle.Turtle()\ndef origin_circle(turtle, radius):\nturtle.dot(100, 'black')\nturtle.dot(75, 'cyan')\nturtle.dot(50, 'red')\nturtle.dot(25, 'yellow')\n\nfor radius in range(100, 200, 10):\norigin_circle(turtle, radius)\n\nturtle.hideturtle()\n</code></pre>\n"}, {"tags": ["python", "ssl", "python-requests", "ssl-certificate", "aiohttp"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1568846087, "post_id": 58001466, "comment_id": 102408683, "body": "portal <a href=\"https://curl.trillworks.com/\" rel=\"nofollow noreferrer\">curl.trillworks.com</a> can convert <code>curl</code> to (more or less correct) <code>requests</code>. Maybe it can convert your <code>curl</code> too."}, {"owner": {"reputation": 4865, "user_id": 2378643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mt7f4.png?s=128&g=1", "display_name": "Anon Coward", "link": "https://stackoverflow.com/users/2378643/anon-coward"}, "edited": false, "score": 2, "creation_date": 1568846147, "post_id": 58001466, "comment_id": 102408701, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22609385/python-requests-library-define-specific-dns\">Python &#39;requests&#39; library - define specific DNS?</a>"}], "owner": {"reputation": 170, "user_id": 8419637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21c0c1fadb8b914635d482fccf02bc88?s=128&d=identicon&r=PG&f=1", "display_name": "stoneman_41", "link": "https://stackoverflow.com/users/8419637/stoneman-41"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568845518, "creation_date": 1568845518, "question_id": 58001466, "link": "https://stackoverflow.com/questions/58001466/replicating-connect-to-from-curl-in-python", "title": "Replicating &quot;--connect-to&quot; from curl in Python", "body": "<p>From the command line, I am able to successfully execute a command as follows: </p>\n\n<pre><code>curl --cacert &lt;cacert&gt; --cert &lt;cert&gt; --connect-to ::1.2.3.4: https://some-identity.com:443/endpoint\n</code></pre>\n\n<p>I am doing this so the request ends up going to the <code>1.2.3.4</code> address (from the routing perspective), but all of the SSL handshake occurs using the <code>some-identity.com</code> address. I have to do this because unfortunately, the SSL certificates in use are being signed using the <code>some-identity.com</code> address, but the private IP of the server is <code>1.2.3.4</code>.</p>\n\n<p>I am trying to use either <code>aiohttp</code> (preferably), or <code>requests</code>, but I cannot find the respective utilities to do this.</p>\n\n<p>In <code>aiohttp</code>, I see that I can pass in an <code>SSLContext</code> (in the <code>ssl</code> package) object, but unfortunately, I can't seem to find any property within an <code>SSLContext</code> object that can be set dynamically. </p>\n\n<p>For the <code>requests</code> library, it doesn't seem to have an option for me to override/change the host as I did using <code>curl</code>.</p>\n\n<p>Is there another way to go about this through Python libraries? The last ditch option would be to simply use the <code>curl</code> command itself through Python, but that is not preferred.</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "deep-learning", "tf.keras"], "answers": [{"tags": [], "owner": {"reputation": 565, "user_id": 1917160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf83018b82d500df01d3d0bfd85fc78?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Mavrin", "link": "https://stackoverflow.com/users/1917160/artem-mavrin"}, "is_accepted": true, "score": 3, "last_activity_date": 1568851918, "last_edit_date": 1568851918, "creation_date": 1568847323, "answer_id": 58001684, "question_id": 58001456, "link": "https://stackoverflow.com/questions/58001456/tensorflow-keras-accuracy-metric-under-the-hood-implementation/58001684#58001684", "title": "TensorFlow Keras &#39;accuracy&#39; metric under the hood implementation", "body": "<p>Found it: this is handled in <a href=\"https://github.com/tensorflow/tensorflow/blob/41474120daa68791e09eae99c8bdd8df093eda31/tensorflow/python/keras/engine/training_utils.py#L1007-L1046\" rel=\"nofollow noreferrer\"><code>tensorflow.python.keras.engine.training_utils.get_metric_function</code></a>. In particular, the output shape is inspected to determine which accuracy function to use.</p>\n\n<p>To elaborate, in the current implementation <a href=\"https://github.com/tensorflow/tensorflow/blob/41474120daa68791e09eae99c8bdd8df093eda31/tensorflow/python/keras/engine/training.py#L184-L400\" rel=\"nofollow noreferrer\"><code>Model.compile</code></a> either delegates metric processing to <a href=\"https://github.com/tensorflow/tensorflow/blob/41474120daa68791e09eae99c8bdd8df093eda31/tensorflow/python/keras/engine/training.py#L1563-L1575\" rel=\"nofollow noreferrer\"><code>Model._compile_eagerly</code></a> (if executing eagerly) or does it directly. In either case, <a href=\"https://github.com/tensorflow/tensorflow/blob/41474120daa68791e09eae99c8bdd8df093eda31/tensorflow/python/keras/engine/training.py#L1892-L1908\" rel=\"nofollow noreferrer\"><code>Model._cache_output_metric_attributes</code></a> is called, which calls <a href=\"https://github.com/tensorflow/tensorflow/blob/41474120daa68791e09eae99c8bdd8df093eda31/tensorflow/python/keras/engine/training_utils.py#L748-L824\" rel=\"nofollow noreferrer\"><code>collect_per_output_metric_info</code></a> for both the unweighted and weighted metrics. This function loops over the provided metrics, calling <code>get_metric_function</code> on each one.</p>\n"}], "owner": {"reputation": 565, "user_id": 1917160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf83018b82d500df01d3d0bfd85fc78?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Mavrin", "link": "https://stackoverflow.com/users/1917160/artem-mavrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 58001684, "answer_count": 1, "score": 4, "last_activity_date": 1568851918, "creation_date": 1568845458, "last_edit_date": 1568846916, "question_id": 58001456, "link": "https://stackoverflow.com/questions/58001456/tensorflow-keras-accuracy-metric-under-the-hood-implementation", "title": "TensorFlow Keras &#39;accuracy&#39; metric under the hood implementation", "body": "<p>When building a classifier using TensorFlow Keras, one often monitors model accuracy by specifying <code>metrics=['accuracy']</code> during the compilation step:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>model = tf.keras.Model(...)\nmodel.compile(optimizer=..., loss=..., metrics=['accuracy'])\n</code></pre>\n\n<p>This behaves correctly whether or not the model outputs logits or class probabilities, and whether or not the model expects ground truth labels to be one-hot-encoded vectors or integer indices (i.e., integers in the interval <code>[0, n_classes)</code>).</p>\n\n<p>This is not the case if one wants to use cross-entropy loss: each of the four combinations of the cases mentioned above requires a different <code>loss</code> value to be passed during the compilation step:</p>\n\n<ol>\n<li><p>If the model outputs probabilities and the ground truth labels are one-hot-encoded, then <code>loss='categorical_crossentropy'</code> works.</p></li>\n<li><p>If the model outputs probabilities and the ground truth labels are integer indices, then <code>loss='sparse_categorical_crossentropy'</code> works.</p></li>\n<li><p>If the model outputs logits and the ground truth labels are one-hot-encoded, then <code>loss=tf.keras.losses.CategoricalCrossentropy(from_logits=True)</code> works.</p></li>\n<li><p>If the model outputs logits and the ground truth labels are integer indices, then <code>loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True)</code> works.</p></li>\n</ol>\n\n<p>It seems that just specifying <code>loss='categorical_crossentropy'</code> is not robust enough to handle these four cases, whereas specifying <code>metrics=['accuracy']</code> <em>is</em> robust enough.</p>\n\n<hr>\n\n<p><strong>Question</strong>\nWhat is happening behind the scenes when the user specifies <code>metrics=['accuracy']</code> in the model compilation step that allows the accuracy computation to be performed correctly regardless of whether the model outputs logits or probabilities and whether the ground truth labels are one-hot-encoded vectors or integer indices?</p>\n\n<hr>\n\n<p>I suspect that the logits versus probabilities case is simple since the predicted class can be obtained as an argmax either way, but I would ideally like to be pointed to where in the TensorFlow 2 source code the computation is actually done.</p>\n\n<p>Please note that I am currently using <a href=\"https://pypi.org/project/tensorflow/2.0.0rc1/\" rel=\"nofollow noreferrer\">TensorFlow 2.0.0-rc1</a>.</p>\n\n<hr>\n\n<p><strong>Edit</strong>\nIn pure Keras, <code>metrics=['accuracy']</code> is handled explicitly in the <a href=\"https://github.com/keras-team/keras/blob/d8b226f26b35348d934edb1213061993e7e5a1fa/keras/engine/training.py#L651-L665\" rel=\"nofollow noreferrer\"><code>Model.compile</code> method</a>.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568848430, "post_id": 58001380, "comment_id": 102409174, "body": "you can use <code>find_element_by_name(...)</code> instead of <code>find_element(By.NAME, ...)</code>. The same with other <code>By.XXX</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568848821, "post_id": 58001380, "comment_id": 102409235, "body": "error shows problem with <code>gist[contents][][value]</code>, not with <code>gist[contents][][name]</code>. And I can&#39;t find <code>gist[contents][][value]</code> in HTML."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568849307, "post_id": 58001380, "comment_id": 102409326, "body": "I found this element and it has <code>style=&quot;display: none;&quot;</code> so it is invisible but Selenium can&#39;t send keys to invisible elements. You may have to use JavaScript to add text to this <code>textarea</code>. . This page probably also use JavaScript ti get pressed keys and put it in hidden <code>textarea</code> and display it as <code>&lt;span&gt;</code> or other element. OR remove value <code>display</code> to show it and then maybe you could send keys."}], "answers": [{"tags": [], "owner": {"reputation": 5766, "user_id": 8752062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd7130a2d4925c477eea540adac4ab8?s=128&d=identicon&r=PG&f=1", "display_name": "frianH", "link": "https://stackoverflow.com/users/8752062/frianh"}, "is_accepted": true, "score": 0, "last_activity_date": 1568876140, "creation_date": 1568876140, "answer_id": 58005340, "question_id": 58001380, "link": "https://stackoverflow.com/questions/58001380/selenium-is-not-reachable-by-keyboard/58005340#58005340", "title": "selenium: is not reachable by keyboard", "body": "<p>You can use this locator:</p>\n\n<pre><code>.find_element(By.CLASS_NAME, \"CodeMirror-lines\")\n</code></pre>\n\n<p>And also use <code>ActionChains</code>.</p>\n\n<p>First you need following import:</p>\n\n<pre><code>from selenium.webdriver import ActionChains\n</code></pre>\n\n<p>Try the bellow code:</p>\n\n<pre><code>driver.get(\"https://gist.github.com/\")\ndriver.find_element(By.NAME, \"gist[description]\").click()\ndriver.find_element(By.NAME, \"gist[description]\").send_keys(\"GIST DESCRIPTION\")\ndriver.find_element(By.NAME, \"gist[contents][][name]\").send_keys(\"file.md\")\n\n#HERE\nel = driver.find_element(By.CLASS_NAME, \"CodeMirror-lines\")\nActionChains(driver).move_to_element(el).click(el).send_keys('Description file').perform()\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 12087451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d60fe3b665a8d8f32441af363cdd8a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucian Blaga", "link": "https://stackoverflow.com/users/12087451/lucian-blaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 58005340, "answer_count": 1, "score": 0, "last_activity_date": 1568897003, "creation_date": 1568844889, "last_edit_date": 1568897003, "question_id": 58001380, "link": "https://stackoverflow.com/questions/58001380/selenium-is-not-reachable-by-keyboard", "title": "selenium: is not reachable by keyboard", "body": "<p>I try to publish gist on gist.github.com using python/selenium, \nThis is my current code :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>driver.find_element(By.NAME, \"gist[contents][][name]\").send_keys(\"file.md\")\n\n#import pdb; pdb.set_trace()\n\ntmp = driver.find_element(By.NAME, \"gist[contents][][value]\").send_keys(\"Description file\")\n#keyboard.write(\"Description file\")\n\n\ndriver.find_element(By.XPATH, \"//button[@name=\\'gist[public]\\']\").click()\n\ntime.sleep(30)\n</code></pre>\n\n<p>The code is paritial working, i have big problem on <code>gist[contents][][name]</code> input, app kill and return me this error : <code>is not reachable by keyboard</code>... i don't have ideea how i can fix this error, does anyone know how i can solve this problem?</p>\n\n<p>full error :</p>\n\n<pre><code>admin$ python github_login.py \nTraceback (most recent call last):\n  File \"github_login.py\", line 31, in &lt;module&gt;\n    tmp = driver.find_element(By.NAME, \"gist[contents][][value]\").send_keys(\".\")\n  File \"/usr/local/lib/python2.7/site-packages/selenium/webdriver/remote/webelement.py\", line 479, in send_keys\n    'value': keys_to_typing(value)})\n  File \"/usr/local/lib/python2.7/site-packages/selenium/webdriver/remote/webelement.py\", line 633, in _execute\n    return self._parent.execute(command, params)\n  File \"/usr/local/lib/python2.7/site-packages/selenium/webdriver/remote/webdriver.py\", line 321, in execute\n    self.error_handler.check_response(response)\n  File \"/usr/local/lib/python2.7/site-packages/selenium/webdriver/remote/errorhandler.py\", line 242, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.ElementNotInteractableException: Message: Element &lt;textarea class=\"form-control file-editor-textarea js-blob-contents js-code-textarea \" name=\"gist[contents][][value]\"&gt; is not reachable by keyboard\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "system-tray", "trayicon", "tray"], "comments": [{"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1568845157, "post_id": 58001335, "comment_id": 102408481, "body": "Maybe <a href=\"https://www.learnpyqt.com/courses/adanced-ui-features/system-tray-mac-menu-bar-applications-pyqt/\" rel=\"nofollow noreferrer\">this</a> is what you&#39;re looking for?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568847632, "post_id": 58001335, "comment_id": 102409054, "body": "don&#39;t use infinity loop in any GUI framework. Most GUI has some method to run code periodically and not block other elements (like <code>mainloop</code>/<code>event loop</code> which has to loop all time). As I remeber <code>PyQt</code> has <code>QTimer</code> for this."}, {"owner": {"reputation": 1, "user_id": 8179586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb635e7b5ef51357aba1d6689a1b524?s=128&d=identicon&r=PG", "display_name": "Leonardo Freua", "link": "https://stackoverflow.com/users/8179586/leonardo-freua"}, "reply_to_user": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1568848953, "post_id": 58001335, "comment_id": 102409265, "body": "@nathancy, I tried wth this one, but I can&#39;t because I&#39;m using infinite loop. I will try using this tutorial again, matching the furas tip. Thanks for the help from both."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8179586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb635e7b5ef51357aba1d6689a1b524?s=128&d=identicon&r=PG", "display_name": "Leonardo Freua", "link": "https://stackoverflow.com/users/8179586/leonardo-freua"}, "is_accepted": true, "score": 0, "last_activity_date": 1569520043, "creation_date": 1569520043, "answer_id": 58122172, "question_id": 58001335, "link": "https://stackoverflow.com/questions/58001335/create-a-dynamic-tray-icon-with-python/58122172#58122172", "title": "Create a dynamic Tray Icon with Python", "body": "<p>I was able to solve using QTimer of PyQT. The question below is exactly what I needed: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/31851544/threading-for-tray-icon-application\">threading for tray icon application</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8179586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb635e7b5ef51357aba1d6689a1b524?s=128&d=identicon&r=PG", "display_name": "Leonardo Freua", "link": "https://stackoverflow.com/users/8179586/leonardo-freua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 58122172, "answer_count": 1, "score": 0, "last_activity_date": 1569520043, "creation_date": 1568844552, "last_edit_date": 1568848351, "question_id": 58001335, "link": "https://stackoverflow.com/questions/58001335/create-a-dynamic-tray-icon-with-python", "title": "Create a dynamic Tray Icon with Python", "body": "<p>I am trying to create a Tray icon with Python on Ubuntu Linux (this is not important, but it is for more details). I need my small system to show an Icon (Image) according to the result (Boolean) returned from a method. All this within an <strong>infinite loop</strong>, <strong>checking every 5 minutes</strong>, ie a status icon that updates according to the return of the method.</p>\n\n<p>I tried with several different libraries, such as: <strong><code>PyQt5.QtGui</code></strong>, <strong><code>PyQt5.QtWidgets</code></strong>, <strong><code>PySimpleGUIQt</code></strong>, <strong><code>pystray</code></strong>. All of these execute a command that prevents the infinite loop from running after the first iteration. The command is: <strong><code>app.exec_()</code></strong></p>\n\n<p>Code example:</p>\n\n<pre><code>def check_network_status():\n      try:\n          requests.get('http://google.com.br/')\n          return True\n      excepte:       \n          return False\n\nwhile True:    \n  if check_network_status():\n      # show online icon\n  else:\n      # show offline icon\n</code></pre>\n\n<p>thank you in advance for any help!</p>\n"}, {"tags": ["python", "tensorflow", "nlp", "tensor2tensor"], "answers": [{"tags": [], "owner": {"reputation": 479, "user_id": 5008968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-c6ZlTTmBmsU/AAAAAAAAAAI/AAAAAAAAAhI/e_bh2msmErA/photo.jpg?sz=128", "display_name": "Hamza Abbad", "link": "https://stackoverflow.com/users/5008968/hamza-abbad"}, "is_accepted": true, "score": 0, "last_activity_date": 1574137584, "creation_date": 1574137584, "answer_id": 58926639, "question_id": 58001318, "link": "https://stackoverflow.com/questions/58001318/no-attribute-contrib-for-problems/58926639#58926639", "title": "no attribute &#39;contrib&#39; for problems()", "body": "<p>Tensor2Tensor library <a href=\"https://github.com/tensorflow/tensor2tensor/issues/1524#issuecomment-476321189\" rel=\"nofollow noreferrer\"><strong>is not yet compatible with Tensorflow 2.0</strong></a> because it still uses a lot of deprecated APIs. Your only option currently is to downgrade to an older version, such as Tensorflow 1.15.</p>\n\n<pre><code>pip3 install tensorflow==1.15.0\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 11157630, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EVhPC6HpcAM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdRZo4sj0gm5mFwXFEO3k1fdSHABA/mo/photo.jpg?sz=128", "display_name": "ML learner", "link": "https://stackoverflow.com/users/11157630/ml-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58926639, "answer_count": 1, "score": 0, "last_activity_date": 1574137584, "creation_date": 1568844405, "last_edit_date": 1568856585, "question_id": 58001318, "link": "https://stackoverflow.com/questions/58001318/no-attribute-contrib-for-problems", "title": "no attribute &#39;contrib&#39; for problems()", "body": "<p>I am trying to see the available problems() but it is giving Error.\nCan you please let me know if I am missing anything</p>\n\n<pre><code>&gt;&gt;&gt; from tensor2tensor import problems\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\\\Anaconda3\\lib\\site-packages\\tensor2tensor\\problems.py\", line 22, in &lt;module&gt;\n    from tensor2tensor.utils import registry\n  File \"C:\\Users\\\\Anaconda3\\lib\\site-packages\\tensor2tensor\\utils\\registry.py\", line 551, in &lt;module&gt;\n    attacks = tf.contrib.framework.deprecated(None, \"Use registry.attack\")(attack)\nAttributeError: module 'tensorflow' has no attribute 'contrib'\n&gt;&gt;&gt; tf.__version__\n'2.0.0-beta1'\n&gt;&gt;&gt;\n</code></pre>\n\n<p>I am working on windows</p>\n"}, {"tags": ["python", "bots", "discord", "reddit", "praw"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12087378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2976b20e13e1d3b058629393d0e3fe50?s=128&d=identicon&r=PG&f=1", "display_name": "Keonkwai", "link": "https://stackoverflow.com/users/12087378/keonkwai"}, "edited": false, "score": 0, "creation_date": 1568844918, "post_id": 58001336, "comment_id": 102408415, "body": "Ah, thanks a ton, I thought about len but ruled against it . It&#39;s been a while since I worked with python, and I had the misconception that len() simply counted amount of characters - but that&#39;s not the case for lists by the looks of it."}, {"owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "reply_to_user": {"reputation": 11, "user_id": 12087378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2976b20e13e1d3b058629393d0e3fe50?s=128&d=identicon&r=PG&f=1", "display_name": "Keonkwai", "link": "https://stackoverflow.com/users/12087378/keonkwai"}, "edited": false, "score": 1, "creation_date": 1568845015, "post_id": 58001336, "comment_id": 102408437, "body": "Right, <code>len()</code> will count characters with a string, and items for a list."}, {"owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 0, "creation_date": 1568845038, "post_id": 58001336, "comment_id": 102408444, "body": "<code>len</code> returns the number of items in any iterable. For strings it is the number of characters. For lists it is the number of elements. For dicts it is the number of keys. Etc..."}], "tags": [], "owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1568844554, "creation_date": 1568844554, "answer_id": 58001336, "question_id": 58001311, "link": "https://stackoverflow.com/questions/58001311/for-loop-store-items-in-list-then-count-and-print-numbers-of-items-in-that-lis/58001336#58001336", "title": "For loop: Store items in list, then count and print numbers of items in that list", "body": "<p><code>len()</code> is what you want. Try this:</p>\n\n<pre><code>x = []\nfor item in redditqueue:\n    x.append(item)\n    print(len(x))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1568845158, "creation_date": 1568845158, "answer_id": 58001417, "question_id": 58001311, "link": "https://stackoverflow.com/questions/58001311/for-loop-store-items-in-list-then-count-and-print-numbers-of-items-in-that-lis/58001417#58001417", "title": "For loop: Store items in list, then count and print numbers of items in that list", "body": "<p>If you want to know how many items are in <code>redditqueue</code>, then simply get the list length:</p>\n\n<pre><code>print(len(redditqueue))\n</code></pre>\n\n<p>If <code>redditqueue</code> is some sort of iterator or generator, then make a list of its entire sequence and take the length of that.</p>\n\n<pre><code>print len(list(redditqueue))\n</code></pre>\n\n<p>If that's too long, and you need to count the quantity of items in the list, then don't accumulate the elements in yet another structure ... just <em>count</em>:</p>\n\n<pre><code>for count, item in enumerate(redditqueue):\n    pass\n\nprint(count)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12087378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2976b20e13e1d3b058629393d0e3fe50?s=128&d=identicon&r=PG&f=1", "display_name": "Keonkwai", "link": "https://stackoverflow.com/users/12087378/keonkwai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568846850, "creation_date": 1568844356, "last_edit_date": 1568846850, "question_id": 58001311, "link": "https://stackoverflow.com/questions/58001311/for-loop-store-items-in-list-then-count-and-print-numbers-of-items-in-that-lis", "title": "For loop: Store items in list, then count and print numbers of items in that list", "body": "<p>Trying to count items from Reddit API, and adding them all to a list, and then printing amount of lines in said list.</p>\n\n<p>So, I have tried a few things, but they have all turned out unsuccessful so far. Why is it that this doesn't count correctly, and prints amounts of items in \"redditqueue\"? Any help/suggestions are mostly welcome!</p>\n\n<pre><code>x = []\nfor item in redditqueue: #redditqueue is a placeholder\n    x.append(item)\n    Count = x.count()\n    print(Count)\n</code></pre>\n\n<p>What I want is for the code to print 2 if there's 2 items in redditqueue, but it's simply printing the following:</p>\n\n<pre><code>0\n0\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7253499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NGD2p.jpg?s=128&g=1", "display_name": "VNE", "link": "https://stackoverflow.com/users/7253499/vne"}, "edited": false, "score": 0, "creation_date": 1568882643, "post_id": 58001300, "comment_id": 102418720, "body": "That was exactly what I was looking for :) Thanks a lot"}], "tags": [], "owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "is_accepted": true, "score": 0, "last_activity_date": 1568844264, "creation_date": 1568844264, "answer_id": 58001300, "question_id": 58001264, "link": "https://stackoverflow.com/questions/58001264/for-loop-output-into-single-list/58001300#58001300", "title": "for loop output into single list", "body": "<p>If I understand correctly you want something like this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>pages = ['https://pagetoscrape.com/?page=1',\n         'https://pagetoscrape.com/?page=2',\n         'https://pagetoscrape.com/?page=3'\n        ]\n\nurls = []\n\nfor u in pages:\n    response = requests.get(u)\n    data = response.content\n    soup = BeautifulSoup(data, 'lxml')\n    for links in soup.find_all('div', class_='item-to-scrape'):\n        link = links.a['href']\n        urls.append(link)\n        print(link)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1568845303, "creation_date": 1568845303, "answer_id": 58001440, "question_id": 58001264, "link": "https://stackoverflow.com/questions/58001264/for-loop-output-into-single-list/58001440#58001440", "title": "for loop output into single list", "body": "<p>Build your list with a list comprehension:</p>\n\n<pre><code>link_list = [links.a['href']\n                for links in soup.find_all('div', class_='item-to-scrape') ] \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7253499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NGD2p.jpg?s=128&g=1", "display_name": "VNE", "link": "https://stackoverflow.com/users/7253499/vne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58001300, "answer_count": 2, "score": 0, "last_activity_date": 1568845303, "creation_date": 1568844040, "last_edit_date": 1568844235, "question_id": 58001264, "link": "https://stackoverflow.com/questions/58001264/for-loop-output-into-single-list", "title": "for loop output into single list", "body": "<p>I am trying to extract few links, that contain other links and struggling to get the output from the for loop into a single list like stated below.</p>\n\n<p>My code:</p>\n\n<pre><code>pages = ['https://pagetoscrape.com/?page=1',\n         'https://pagetoscrape.com/?page=2',\n         'https://pagetoscrape.com/?page=3'\n        ]\n\nfor u in pages:\n    response = requests.get(u)\n    data = response.content\n    soup = BeautifulSoup(data, 'lxml')\n    for links in soup.find_all('div', class_='item-to-scrape'):\n        link = links.a['href']\n\n        print(link)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>pagetoscrape.com/url1\npagetoscrape.com/url2\npagetoscrape.com/url3\npagetoscrape.com/url4\npagetoscrape.com/url5\npagetoscrape.com/url6\npagetoscrape.com/url7\n...\n</code></pre>\n\n<p>How can I get a list like this to use it later for other operations (another loop that picks the links one by one) similar to the \"pages\" array variable?:</p>\n\n<pre><code>['pagetoscrape.com/url1', 'pagetoscrape.com/url2', 'pagetoscrape.com/url3', 'pagetoscrape.com/url4', ...]\n</code></pre>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "edited": false, "score": 0, "creation_date": 1568844524, "post_id": 58001261, "comment_id": 102408318, "body": "You might be able to configure your web driver to <b>not</b> wait for the page to load. Can you post the code you are using to initialize the web driver?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1568849748, "post_id": 58001261, "comment_id": 102409437, "body": "did you try to use <code>requests.get(url)</code> to get this HTML ? <code>requests</code> gets original file from server and it can&#39;t run JavaScript."}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1568850071, "post_id": 58001261, "comment_id": 102409511, "body": "I would use the requests library then. Seleneium is popular due to the feature of being able to render javascript on a page."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1568857221, "post_id": 58001261, "comment_id": 102410720, "body": "You could also try getting it with <code>window.fetch</code>"}, {"owner": {"reputation": 4527, "user_id": 486604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e60010c0ada3d36d496128e2e431dc56?s=128&d=identicon&r=PG", "display_name": "eth0", "link": "https://stackoverflow.com/users/486604/eth0"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568884666, "post_id": 58001261, "comment_id": 102419826, "body": "@furas the problem is a lot of automation actions need to happen before I get to this stage. Raw HTTP get is my last resort."}], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 486604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e60010c0ada3d36d496128e2e431dc56?s=128&d=identicon&r=PG", "display_name": "eth0", "link": "https://stackoverflow.com/users/486604/eth0"}, "is_accepted": true, "score": 0, "last_activity_date": 1570054746, "creation_date": 1570054746, "answer_id": 58210043, "question_id": 58001261, "link": "https://stackoverflow.com/questions/58001261/getting-selenium-page-source-before-javascript-execution/58210043#58210043", "title": "Getting Selenium page source before JavaScript execution", "body": "<p>I feel like this is a bit dirty but it works. I needed to use selenium for the first part. I then handed off to requests:</p>\n\n<pre><code>session = requests.Session()\nfor cookie in self.webdriver.get_cookies():\n    session.cookies.set(cookie['name'], cookie['value'])\n\nresponse = session.get(self.webdriver.current_url).text\n</code></pre>\n\n<p>and simply wrote the contents to a temp file and then opened that with selenium:</p>\n\n<pre><code>response_file = utils.save_to_temp_file(response, extension='.html')\nself.webdriver.get(f'file://{response_file}')`\n</code></pre>\n"}], "owner": {"reputation": 4527, "user_id": 486604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e60010c0ada3d36d496128e2e431dc56?s=128&d=identicon&r=PG", "display_name": "eth0", "link": "https://stackoverflow.com/users/486604/eth0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 58210043, "answer_count": 1, "score": 0, "last_activity_date": 1570054746, "creation_date": 1568844007, "last_edit_date": 1568884684, "question_id": 58001261, "link": "https://stackoverflow.com/questions/58001261/getting-selenium-page-source-before-javascript-execution", "title": "Getting Selenium page source before JavaScript execution", "body": "<p>I have a case where the raw page source code from the HTTP request contains some JSON data I need to capture - let's say <code>&lt;code id=\"data\"&gt;{'some':'json'}&lt;/code&gt;</code>. But the JavaScript executes, processes it, and removes the data from the DOM so I can't see it in webdriver.page_source.</p>\n\n<p>Any ideas how I can capture this? Or at least somehow disable/pause JavaScript, <code>.get()</code> the page, extract what I need from <code>source_code</code> and then re-enable/un-pause JavaScript?</p>\n"}, {"tags": ["python", "facebook-python-business-sdk"], "comments": [{"owner": {"reputation": 11081, "user_id": 969597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ccd6f3c734870720f616b887d36c05?s=128&d=identicon&r=PG", "display_name": "Teemu Ikonen", "link": "https://stackoverflow.com/users/969597/teemu-ikonen"}, "edited": false, "score": 0, "creation_date": 1568874738, "post_id": 58001257, "comment_id": 102414814, "body": "I think you just need to call get_result multiple times and the api should give results in max 1000 record batches?"}, {"owner": {"reputation": 1, "user_id": 12076338, "user_type": "registered", "profile_image": "https://graph.facebook.com/2326966247552468/picture?type=large", "display_name": "James Kruk", "link": "https://stackoverflow.com/users/12076338/james-kruk"}, "reply_to_user": {"reputation": 11081, "user_id": 969597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ccd6f3c734870720f616b887d36c05?s=128&d=identicon&r=PG", "display_name": "Teemu Ikonen", "link": "https://stackoverflow.com/users/969597/teemu-ikonen"}, "edited": false, "score": 0, "creation_date": 1568911447, "post_id": 58001257, "comment_id": 102434952, "body": "@TeemuIkonen I just tried that by creating a new variable called data2 and did the same same get_result call, but unfortunately they are identical. Maybe there&#39;s another way to get the next 1000 responses?  Maybe an additional paramter in the get_result function"}], "owner": {"reputation": 1, "user_id": 12076338, "user_type": "registered", "profile_image": "https://graph.facebook.com/2326966247552468/picture?type=large", "display_name": "James Kruk", "link": "https://stackoverflow.com/users/12076338/james-kruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568874279, "creation_date": 1568843995, "last_edit_date": 1568874279, "question_id": 58001257, "link": "https://stackoverflow.com/questions/58001257/what-is-the-limit-for-async-jobs-in-facebook-python-sdk", "title": "What is the limit for async jobs in Facebook Python SDK?", "body": "<p>I'm creating an async job with Facebook's Python SDK to get the insights (impressions, action_values, etc) for my Facebook campaigns. Right now I'd like to pull all the campaigns for the previous year by month. The total number of results should be around <code>2,000</code>. If I set the limit param in get_result to anything higher than <em>1000</em> I get a <code>FacebookRequestError</code>. The \n async_job</p>\n\n<p>(see code below) runs, and using </p>\n\n<pre><code>api_get()\n</code></pre>\n\n<p>I can tell that it pulls all the records. Is there anyway to pull all of the results from the <code>async_job</code>?</p>\n\n<pre><code>async_job = my_account.get_insights_async(fields=params.get('fields'), params=params)\nasync_job.api_get(\nwhile async_job.api_get()['async_percent_completion'] &lt; 100:\n  time.sleep(1)\n  async_job.api_get() \ndata = async_job.get_result(params={'limit':1000})\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras"], "answers": [{"tags": [], "owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "is_accepted": false, "score": 0, "last_activity_date": 1568853397, "creation_date": 1568853397, "answer_id": 58002258, "question_id": 58001215, "link": "https://stackoverflow.com/questions/58001215/pass-non-symbolic-tensor-to-keras-lambda-layer/58002258#58002258", "title": "Pass non-symbolic tensor to Keras Lambda layer", "body": "<pre><code>def convGRU(cell, length): # if length is produced by the model, use it with the inputs    \n    def inner_func(inputs):\n        code...\n    return inner_func\n\nlm = Lambda(convGRU(cell, length))(input)\n</code></pre>\n\n<p>For save/load you need to use <code>custom_objects = {'convGRU': convGRU, 'cell':cell, 'length': length}</code>, etc. Whatever Keras doesn't know automatically needs to be in <code>custom_objects</code> for loading a saved model. </p>\n"}], "owner": {"reputation": 61, "user_id": 11223907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cp_o0zqZTEU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdK5NAJhqISXcvNuUhMQLpuxnIowA/mo/photo.jpg?sz=128", "display_name": "John Brandt", "link": "https://stackoverflow.com/users/11223907/john-brandt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1210, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568853397, "creation_date": 1568843678, "question_id": 58001215, "link": "https://stackoverflow.com/questions/58001215/pass-non-symbolic-tensor-to-keras-lambda-layer", "title": "Pass non-symbolic tensor to Keras Lambda layer", "body": "<p>I am trying to pass a <code>RNNCell</code> object to a Keras lambda layer so that I can use the Tensorflow layer within a Keras model, as follows.</p>\n\n<pre><code>conv_cell = ConvGRUCell(shape = [14, 14],\n                       filters = 32,\n                       kernel = [3,3],\n                       padding = 'SAME')\n\ndef convGRU(inputs, cell, length):\n    output, final = tf.nn.bidirectional_dynamic_rnn(\n            cell, cell, x, length, dtype=tf.float32)\n    output = tf.concat(output, -1)\n    final = tf.concat(final, -1)\n    return [output, final]\n\nlm = Lambda(lambda x: convGRU(x[0], x[1], x[2])([input, conv_cell, length])\n</code></pre>\n\n<p>However, I get an error that <code>conv_cell</code> is not a symbolic tensor (it is a custom layer based on Tensorflow's GRUCell).</p>\n\n<p>Is there any way to pass the cell to the lambda layer? I got it to work with functools.partial but it fails to save/load the model because it cannot access the function inside the model.</p>\n"}, {"tags": ["python", "python-3.x", "kivy", "kivy-language", "rgba"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568843902, "post_id": 58001198, "comment_id": 102408161, "body": "as I remember as default <code>Button</code> has assigned image which color is mixed with red color and you get dark red color. You have to assign <code>None</code> in place of image and then you get correct red color. But I don&#39;t remeber name of property which keeps this image."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568845024, "post_id": 58001198, "comment_id": 102408441, "body": "see this answer for <a href=\"https://stackoverflow.com/a/20181407/1832058\">Changing the background color of a Button in Kivy</a> - you have to assing empty string to <code>background_normal</code> and <code>background_down</code> to remove images used as background in Button."}], "owner": {"reputation": 96, "user_id": 11586490, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rq3aPmSNmgs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZaHWe_Gve9bjx4am-ZfjfgTNFHw/mo/photo.jpg?sz=128", "display_name": "Callum", "link": "https://stackoverflow.com/users/11586490/callum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1568845048, "answer_count": 0, "score": 0, "last_activity_date": 1568844085, "creation_date": 1568843570, "last_edit_date": 1568844085, "question_id": 58001198, "link": "https://stackoverflow.com/questions/58001198/rgba-colours-not-coming-out-as-they-should-in-kivy", "closed_reason": "Duplicate", "title": "RGBA colours not coming out as they should in Kivy", "body": "<p>I can't get the background colour of my kivy button to come out red, giving it rgba values of <code>1,0,0,1</code> gives me a dark maroon colour. However, if I set the colour of the text to <code>1,0,0,1</code> it does give me the correct shade of red.</p>\n\n<p>I've tried various rgba combinations but to no avail. Does it have something to do with a background colour already being applied so the red mixed with a default grey makes this dark maroon colour I am seeing?</p>\n\n<pre><code>Button:\n            text: \"No\"\n            size_hint: 0.4, 0.2\n            pos_hint: {\"x\": 0.5, \"top\": 0.4}\n            background_color: 1, 0, 0, 1\n            color: 1, 0, 0, 1\n            on_press: root.no_btn(app.user_email)\n</code></pre>\n"}, {"tags": ["python", "pandas", "csv", "linear-regression"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 1, "creation_date": 1568865716, "post_id": 58001197, "comment_id": 102412131, "body": "<a href=\"https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors\">Discourage screenshots of code and/or errors</a>, this applies to data too."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1568904646, "post_id": 58001197, "comment_id": 102431549, "body": "this technique is called <a href=\"https://en.wikipedia.org/wiki/Imputation_(statistics)\" rel=\"nofollow noreferrer\">imputation</a> and is quite a big field.  it&#39;s easy to introduce bias into the regression if you&#39;ve got a significant amount of missing data especially if it&#39;s not <a href=\"https://en.wikipedia.org/wiki/Missing_data\" rel=\"nofollow noreferrer\">&quot;missing at random&quot;</a>, and I&#39;d expect number of bedrooms to be strongly correlated with price"}], "answers": [{"comments": [{"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1568854947, "post_id": 58001363, "comment_id": 102410322, "body": "Upvoted for the quality, clarity, and utility of the answer."}], "tags": [], "owner": {"reputation": 75, "user_id": 2975087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WzpWB.jpg?s=128&g=1", "display_name": "ultrahamster", "link": "https://stackoverflow.com/users/2975087/ultrahamster"}, "is_accepted": false, "score": 2, "last_activity_date": 1568845273, "last_edit_date": 1568845273, "creation_date": 1568844737, "answer_id": 58001363, "question_id": 58001197, "link": "https://stackoverflow.com/questions/58001197/unable-to-fit-the-linear-multivariate-regression-model-due-to-missing-values-in/58001363#58001363", "title": "Unable to fit the linear multivariate regression model due to missing values in CSV file", "body": "<p>Two questions in your post:</p>\n\n<ol>\n<li>Your changes are not saved to the dataframe because <code>fillna</code> would return a copy unless <code>inplace=True</code> is passed in arguments. This is why you still get the error.</li>\n<li>To save the changes to CSV you need to use <code>DataFrame.to_csv(...)</code>, but given my previous point maybe you don't need this.</li>\n</ol>\n\n<p>I would enrich your pipeline with a data cleaning step and save the cleaned data. I would do 2 separate scripts.</p>\n\n<p>Data cleaning:</p>\n\n<pre><code>path_raw_data= r\"C:\\Users\\rohit\\Desktop\\homeprices4.csv\"\npath_clean_data= r\"C:\\Users\\rohit\\Desktop\\homeprices4_clean.csv\"\ndf=pd.read_csv(path_raw_data)\nm=math.floor(df.bedrooms.median()) // m is median which I have calculated\ndf.bedrooms.fillna(m, inplace=True)\ndf.to_csv(path_clean_data)\n</code></pre>\n\n<p>Linear regression:</p>\n\n<pre><code>path_clean_data= r\"C:\\Users\\rohit\\Desktop\\homeprices4_clean.csv\"\ndf=pd.read_csv(path_clean_data)\nreg=linear_model.LinearRegression()\nreg.fit(df[['area','bedrooms','age']],df.price)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12087303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCMGbGFHC9OY9lufuO-f-RvVmAqG7tmgdJ3rVEp=k-s128", "display_name": "Rohit Aswal", "link": "https://stackoverflow.com/users/12087303/rohit-aswal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568865665, "creation_date": 1568843557, "last_edit_date": 1568865665, "question_id": 58001197, "link": "https://stackoverflow.com/questions/58001197/unable-to-fit-the-linear-multivariate-regression-model-due-to-missing-values-in", "title": "Unable to fit the linear multivariate regression model due to missing values in CSV file", "body": "<p>I am trying to perform linear regression model with multiple variables. I have a CSV file with attributes: <code>'area', 'bedrooms', 'age', 'price'</code>, but bedrooms has a <strong>missing value</strong> (i.e. <code>NaN</code>). I want to fit the model and predict the price by giving the other three attributes, but due to one missing value I am shown the error <code>input contains nan infinity or a value too large for dtype('float64')</code>. I found the median and filled in the missing value, but in the CSV file, it is not replaced and giving the error while fitting the model.\nThe CSV file is as follows:</p>\n\n<p><img src=\"https://i.stack.imgur.com/ubIS7.png\" alt=\"CSV file\"></p>\n\n<p>I have used the following codes:</p>\n\n<pre><code>df=pd.read_csv(r\"C:\\Users\\rohit\\Desktop\\homeprices4.csv\")\n\ndf\n\nm=math.floor(df.bedrooms.median()) // m is median which I have calculated\n\nm\n\ndf.bedrooms.fillna(m)\n\nreg=linear_model.LinearRegression()\n\nreg.fit(df[['area','bedrooms','age']],df.price)\n</code></pre>\n\n<p>After this line I am getting the error because bedrooms has one missing value. If I remove <code>bedrooms</code> from this line and use only <code>area</code> and <code>age</code> for prediction then <strong>NO</strong> error, and I am getting correct results.</p>\n\n<p>So my question is: How do I replace the missing value with the median in the CSV file? What is the code for that? \nWhy I am getting the error?</p>\n\n<p>Look at the screenshot for the error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7etvF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7etvF.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "microsoft-teams"], "comments": [{"owner": {"reputation": 396, "user_id": 11651298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y7Bb7VGZEvU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOsrMxPPuvzR0R6k4W9FeP-N1D8A/mo/photo.jpg?sz=128", "display_name": "Akshit", "link": "https://stackoverflow.com/users/11651298/akshit"}, "edited": false, "score": 0, "creation_date": 1568843901, "post_id": 58001191, "comment_id": 102408159, "body": "AWS lambda is a trigger based service.You can use it to run python scripts based on some trigger. You just need to find a way to send your messages to the AWS cloud as soon as you receive them(once you have the messages, you can put it to AWS stream to avoid delay).                                                                                                        <a href=\"https://aws.amazon.com/lambda/\" rel=\"nofollow noreferrer\">aws.amazon.com/lambda</a>  This article may be of some help ..<a href=\"https://medium.com/@sebastian.phelps/aws-cloudwatch-alarms-on-microsoft-teams-9b5239e23b64\" rel=\"nofollow noreferrer\">medium.com/@sebastian.phelps/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 5964345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8b6fb763dd00cbc73d89eebf30f5e63?s=128&d=identicon&r=PG&f=1", "display_name": "Contrajon", "link": "https://stackoverflow.com/users/5964345/contrajon"}, "reply_to_user": {"reputation": 396, "user_id": 11651298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y7Bb7VGZEvU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOsrMxPPuvzR0R6k4W9FeP-N1D8A/mo/photo.jpg?sz=128", "display_name": "Akshit", "link": "https://stackoverflow.com/users/11651298/akshit"}, "edited": false, "score": 0, "creation_date": 1568844467, "post_id": 58001191, "comment_id": 102408299, "body": "Thanks Akshit, definitely gives some insight into the research I am doing. I was hoping to run the python script when a message has been received rather than an outside event."}, {"owner": {"reputation": 396, "user_id": 11651298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y7Bb7VGZEvU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdOsrMxPPuvzR0R6k4W9FeP-N1D8A/mo/photo.jpg?sz=128", "display_name": "Akshit", "link": "https://stackoverflow.com/users/11651298/akshit"}, "edited": false, "score": 0, "creation_date": 1568845311, "post_id": 58001191, "comment_id": 102408514, "body": "I don&#39;t know a lot about microsoft teams but if you are open to choosing alternatives, then you can have a look at Amazon Chime and see how well it interacts with AWS cloud."}, {"owner": {"reputation": 2080, "user_id": 10013232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae968965022a2718fa707aba3046e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Cappelli", "link": "https://stackoverflow.com/users/10013232/gabriel-cappelli"}, "edited": false, "score": 0, "creation_date": 1568848684, "post_id": 58001191, "comment_id": 102409212, "body": "Maybe you&#39;ll need a Bot: <a href=\"https://docs.microsoft.com/en-us/microsoftteams/platform/concepts/bots/bot-conversations/bots-conversations\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/microsoftteams/platform/concepts/bo&zwnj;&#8203;ts/&hellip;</a>"}], "owner": {"reputation": 11, "user_id": 5964345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8b6fb763dd00cbc73d89eebf30f5e63?s=128&d=identicon&r=PG&f=1", "display_name": "Contrajon", "link": "https://stackoverflow.com/users/5964345/contrajon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568843507, "creation_date": 1568843507, "question_id": 58001191, "link": "https://stackoverflow.com/questions/58001191/is-there-a-way-to-run-a-python-script-that-is-triggered-by-a-message-received-th", "title": "Is there a way to run a Python script that is triggered by a message received through Microsoft Teams?", "body": "<p>I wanted to create a script that can read a microsoft teams message and run a python application based on that message. I tried doing some research but haven't been able to find anything other than Microsoft Bot, but it doesn't seem to do what I need.</p>\n"}, {"tags": ["python", "nlp", "spacy", "ner"], "answers": [{"comments": [{"owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 0, "creation_date": 1568844460, "post_id": 58001228, "comment_id": 102408294, "body": "That would be too much work :) ... Did consider that though. But a gut feeling tells me that ... if no one more equipped for the job did that before me. I am not going to be the one to create the new Spacy Hebrew model.... PLUS: I only want a rule based NER anyway, as it will be much more simple / effective. Again... gut feeling + some experiments with existing Hebrew NER services."}, {"owner": {"reputation": 33, "user_id": 2755793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YMIe.jpg?s=128&g=1", "display_name": "Corporal Hart", "link": "https://stackoverflow.com/users/2755793/corporal-hart"}, "reply_to_user": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 1, "creation_date": 1568845055, "post_id": 58001228, "comment_id": 102408452, "body": "Fair enough - but if you can&#39;t make a new model and one doesn&#39;t already exist, then you&#39;re pretty much out of luck with spaCy. This answer might help you as well: <a href=\"https://stackoverflow.com/a/48590848/2755793\">stackoverflow.com/a/48590848/2755793</a>"}, {"owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 0, "creation_date": 1568845860, "post_id": 58001228, "comment_id": 102408625, "body": "Yupp... tough life."}], "tags": [], "owner": {"reputation": 33, "user_id": 2755793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YMIe.jpg?s=128&g=1", "display_name": "Corporal Hart", "link": "https://stackoverflow.com/users/2755793/corporal-hart"}, "is_accepted": false, "score": 0, "last_activity_date": 1568843768, "creation_date": 1568843768, "answer_id": 58001228, "question_id": 58001184, "link": "https://stackoverflow.com/questions/58001184/using-spacys-matcher-without-a-model/58001228#58001228", "title": "Using spacy&#39;s Matcher without a model", "body": "<p>If you want to train a new statistical model with spaCy, you should read the documentation on <a href=\"https://spacy.io/usage/training\" rel=\"nofollow noreferrer\">Training spaCy\u2019s Statistical Models</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 0, "creation_date": 1568866880, "post_id": 58001824, "comment_id": 102412335, "body": "Sounds promising. Will it allow me setting tokens as an external input?"}], "tags": [], "owner": {"reputation": 238, "user_id": 8968696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7738287311c430de36dea9b0878b6d99?s=128&d=identicon&r=PG&f=1", "display_name": "hkr", "link": "https://stackoverflow.com/users/8968696/hkr"}, "is_accepted": false, "score": 0, "last_activity_date": 1568848775, "creation_date": 1568848775, "answer_id": 58001824, "question_id": 58001184, "link": "https://stackoverflow.com/questions/58001184/using-spacys-matcher-without-a-model/58001824#58001824", "title": "Using spacy&#39;s Matcher without a model", "body": "<p>As far as I know, spaCy does not have a trained model for Hebrew yet. For you to use languages without models,</p>\n\n<pre><code>from spacy.lang.he import Hebrew\nnlp = Hebrew()\n#or\nnlp = spacy.blank(\"he\")\n</code></pre>\n\n<p>Pretty sure you can build you rule-based matcher from here.</p>\n"}, {"comments": [{"owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 0, "creation_date": 1568886595, "post_id": 58007227, "comment_id": 102420886, "body": "Wow. Thanks for the big help on this. This really help to understand how to use the matcher. Thumbs up!"}, {"owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 0, "creation_date": 1569015585, "post_id": 58007227, "comment_id": 102472685, "body": "Works like a charm!! Now just left to understand what&#39;s 440 ? :-)"}, {"owner": {"reputation": 6107, "user_id": 461847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e08520b5c574ad687cee8399b9d7c2?s=128&d=identicon&r=PG", "display_name": "aab", "link": "https://stackoverflow.com/users/461847/aab"}, "reply_to_user": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 0, "creation_date": 1569055329, "post_id": 58007227, "comment_id": 102478280, "body": "440 is the internal representation for the match ID <code>&quot;poss&quot;</code>. You can see the corresponding string with <code>nlp.vocab.strings[440]</code>. (Look at the examples in the docs: <a href=\"https://spacy.io/usage/rule-based-matching.\" rel=\"nofollow noreferrer\">spacy.io/usage/rule-based-matching.</a>)"}, {"owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "edited": false, "score": 0, "creation_date": 1569102615, "post_id": 58007227, "comment_id": 102488929, "body": "Yup. got that. Thank! The thing that I try to understand now, is that if I can do dependency parsing based on spacy&#39;s dependency parsing, or &quot;inject&quot; mine."}], "tags": [], "owner": {"reputation": 6107, "user_id": 461847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e08520b5c574ad687cee8399b9d7c2?s=128&d=identicon&r=PG", "display_name": "aab", "link": "https://stackoverflow.com/users/461847/aab"}, "is_accepted": true, "score": 2, "last_activity_date": 1568895393, "last_edit_date": 1568895393, "creation_date": 1568883148, "answer_id": 58007227, "question_id": 58001184, "link": "https://stackoverflow.com/questions/58001184/using-spacys-matcher-without-a-model/58007227#58007227", "title": "Using spacy&#39;s Matcher without a model", "body": "<p>You can set the words and tags for a spacy document from another source by hand and then use the Matcher. Here's an example using English words/tags just to demonstrate:</p>\n\n<pre><code>from spacy.lang.he import Hebrew\nfrom spacy.tokens import Doc\nfrom spacy.matcher import Matcher\n\nwords = [\"my\", \"words\"]\ntags = [\"PRP$\", \"NNS\"]\n\nnlp = Hebrew()\ndoc = Doc(nlp.vocab, words=words)\nfor i in range(len(doc)):\n    doc[i].tag_ = tags[i]\n\n# This is normally set by the tagger. The Matcher validates that\n# the Doc has been tagged when you use the `\"TAG\"` attribute.\ndoc.is_tagged = True\n\nmatcher = Matcher(nlp.vocab)\npattern = [{\"TAG\": \"PRP$\"}]\nmatcher.add(\"poss\", None, pattern)\nprint(matcher(doc))\n# [(440, 0, 1)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "is_accepted": false, "score": 1, "last_activity_date": 1569103399, "creation_date": 1569103399, "answer_id": 58044449, "question_id": 58001184, "link": "https://stackoverflow.com/questions/58001184/using-spacys-matcher-without-a-model/58044449#58044449", "title": "Using spacy&#39;s Matcher without a model", "body": "<p>Sincy I am using stanfordnlp - there seem to be a gap closer :-)</p>\n\n<p><a href=\"https://github.com/explosion/spacy-stanfordnlp\" rel=\"nofollow noreferrer\">https://github.com/explosion/spacy-stanfordnlp</a></p>\n"}], "owner": {"reputation": 1552, "user_id": 4226806, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/zMvNF.png?s=128&g=1", "display_name": "rubmz", "link": "https://stackoverflow.com/users/4226806/rubmz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 58007227, "answer_count": 4, "score": 1, "last_activity_date": 1569103399, "creation_date": 1568843452, "last_edit_date": 1568844486, "question_id": 58001184, "link": "https://stackoverflow.com/questions/58001184/using-spacys-matcher-without-a-model", "title": "Using spacy&#39;s Matcher without a model", "body": "<p>I want to use spaCy's Matcher class on a new language (Hebrew) for which spaCy does not yet have a working model.</p>\n\n<p>I found a working tokenizer + POS tagger (from Stanford NLP), yet I would prefer spaCy as its Matcher can help me do some rule-based NER.</p>\n\n<p>Can the rule-based Matcher be fed with POS-tagged text instead of the standard NLP pipeline?</p>\n"}, {"tags": ["python", "json", "csv"], "answers": [{"comments": [{"owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "edited": false, "score": 0, "creation_date": 1568845763, "post_id": 58001444, "comment_id": 102408600, "body": "I agree with this approach, but you&#39;re going to end up with columns that need additional unpacking, no? One of the columns, for example, will be <code>stores</code>, and inside it you will actually have the <code>store_id</code>, <code>name</code>, etc."}], "tags": [], "owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1568845368, "creation_date": 1568845368, "answer_id": 58001444, "question_id": 58001131, "link": "https://stackoverflow.com/questions/58001131/how-can-i-import-multiple-json-files-and-dump-them-on-the-same-csv-using-python/58001444#58001444", "title": "How can I import multiple JSON files and dump them on the same CSV using Python?", "body": "<p>here an example with python3</p>\n\n<pre><code>import csv, json, sys\nimport urllib.request\n\noutputFile = open(\"test.csv\", 'w') #load csv file\nwith urllib.request.urlopen(\"https://cornershopapp.com/api/v2/stores?locality=+01020&amp;country=MX\") as url:\n    data = json.loads(url.read().decode())\n    #print (data)\noutput = csv.writer(outputFile) #create a csv.write\noutput.writerow(data[0].keys())  # header row\nfor row in data:\n    output.writerow(row.values()) #values row\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1568845473, "creation_date": 1568845473, "answer_id": 58001459, "question_id": 58001131, "link": "https://stackoverflow.com/questions/58001131/how-can-i-import-multiple-json-files-and-dump-them-on-the-same-csv-using-python/58001459#58001459", "title": "How can I import multiple JSON files and dump them on the same CSV using Python?", "body": "<p>The data structure for those sample links is hierarchical, so it will be non-trivial to flatten that to a CSV structure. There are lots of ways to do it, but I don't think this is the type of question you can just answer quickly on stackoverflow. Maybe somebody else knows about a library I don't, but I would recommend reading \"<a href=\"https://towardsdatascience.com/how-to-flatten-deeply-nested-json-objects-in-non-recursive-elegant-python-55f96533103d\" rel=\"nofollow noreferrer\">How to Flatten Deeply Nested JSON Objects in Non-Recursive Elegant Python</a>\".</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 6201006, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209214821191725/picture?type=large", "display_name": "Fernando F. Freire", "link": "https://stackoverflow.com/users/6201006/fernando-f-freire"}, "edited": false, "score": 0, "creation_date": 1568847402, "post_id": 58001460, "comment_id": 102409006, "body": "Thanks so much for the response. Since in the end I just want everything inside <code>closest_branch</code> I guess should a good solution could be querying and dumping only this part, instead of flattening the file and dumping everything. What do you think?"}], "tags": [], "owner": {"reputation": 69, "user_id": 5893900, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ig1TILt6eS8/AAAAAAAAAAI/AAAAAAAAADs/YwdUoZfTocg/photo.jpg?sz=128", "display_name": "Trevor Burke", "link": "https://stackoverflow.com/users/5893900/trevor-burke"}, "is_accepted": false, "score": 0, "last_activity_date": 1568845474, "creation_date": 1568845474, "answer_id": 58001460, "question_id": 58001131, "link": "https://stackoverflow.com/questions/58001131/how-can-i-import-multiple-json-files-and-dump-them-on-the-same-csv-using-python/58001460#58001460", "title": "How can I import multiple JSON files and dump them on the same CSV using Python?", "body": "<p>This snippet utilizes the <code>requests</code> library, which is the de-facto Python library for handling anything HTTP-related. </p>\n\n<p>This script will dump the JSON of the URLs in <code>URLs</code> to <code>output.csv</code> in the current working directory. </p>\n\n<p>EDIT: as others have pointed out, if you'd like to unnest the JSON of these endpoints you'll need to do a bit more work and I'd recommend checking out pandas and the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.io.json.json_normalize.html\" rel=\"nofollow noreferrer\">json_normalize function</a> OR study up on recursion and implement your own un-nesting function </p>\n\n<pre><code>import json\nimport csv\n\nimport requests\n\n\nURLs = ['https://cornershopapp.com/api/v2/stores?locality=+01020&amp;country=MX',\n        'https://cornershopapp.com/api/v2/stores?locality=+01110&amp;country=MX',\n        'https://cornershopapp.com/api/v2/stores?locality=+01210&amp;country=MX']\n\n\nwith open('output.csv', 'w') as url_file:\n    # create CSV writer object\n    url_writer = csv.writer(url_file, delimiter=',')\n\n    for u in URLs:\n        response = requests.get(u).text\n        json_response = json.loads(response)\n        url_writer.writerow(json_response)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6201006, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209214821191725/picture?type=large", "display_name": "Fernando F. Freire", "link": "https://stackoverflow.com/users/6201006/fernando-f-freire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1568846513, "creation_date": 1568843183, "last_edit_date": 1568846513, "question_id": 58001131, "link": "https://stackoverflow.com/questions/58001131/how-can-i-import-multiple-json-files-and-dump-them-on-the-same-csv-using-python", "title": "How can I import multiple JSON files and dump them on the same CSV using Python?", "body": "<pre><code>URLs = ['https://cornershopapp.com/api/v2/stores?locality=+01020&amp;country=MX', \n'https://cornershopapp.com/api/v2/stores?locality=+01110&amp;country=MX', \n'https://cornershopapp.com/api/v2/stores?locality=+01210&amp;country=MX']\n</code></pre>\n\n<p>I have this list of endpoints (above it's just an example - the real list is much bigger).\nI would like to get the data of these <em>JSON</em> files and append them to one <em>CSV</em>.</p>\n"}, {"tags": ["python", "python-3.x", "flask", "web-scraping"], "comments": [{"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1568880737, "post_id": 58001129, "comment_id": 102417766, "body": "Why not using the API to perform a similar task?"}, {"owner": {"reputation": 196, "user_id": 4547703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5db3a5a68f31524032dab1c2ee23ab8?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Bennasr", "link": "https://stackoverflow.com/users/4547703/amir-bennasr"}, "reply_to_user": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1568986846, "post_id": 58001129, "comment_id": 102461429, "body": "facebook won&#39;t allow you to use api to see number of likes"}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1569010826, "post_id": 58001129, "comment_id": 102471392, "body": "<a href=\"https://www.coregenie.com/how-to-get-facebook-likes-count-of-a-page-using-graph-api-2-8-ver/\" rel=\"nofollow noreferrer\">coregenie.com/&hellip;</a>"}, {"owner": {"reputation": 196, "user_id": 4547703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5db3a5a68f31524032dab1c2ee23ab8?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Bennasr", "link": "https://stackoverflow.com/users/4547703/amir-bennasr"}, "reply_to_user": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1569060029, "post_id": 58001129, "comment_id": 102479230, "body": "This method is working. Tested on 1/5/2017"}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1569150358, "post_id": 58001129, "comment_id": 102495789, "body": "No offense, @amir but... Do you trally think that people using Facebook data in 2019 are scraping it?"}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1569151713, "post_id": 58001129, "comment_id": 102496140, "body": "<a href=\"https://youtu.be/rcaDol0BdQc\" rel=\"nofollow noreferrer\">youtu.be/rcaDol0BdQc</a>"}, {"owner": {"reputation": 196, "user_id": 4547703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5db3a5a68f31524032dab1c2ee23ab8?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Bennasr", "link": "https://stackoverflow.com/users/4547703/amir-bennasr"}, "reply_to_user": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1569267272, "post_id": 58001129, "comment_id": 102533853, "body": "@Pitto , facebook is blocking the access of different facebook pages likes !!  that&#39;s why i am using the scraping method , so i can get , number of likes of any public facebook page :)"}], "owner": {"reputation": 196, "user_id": 4547703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5db3a5a68f31524032dab1c2ee23ab8?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Bennasr", "link": "https://stackoverflow.com/users/4547703/amir-bennasr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568885529, "creation_date": 1568843175, "last_edit_date": 1568885529, "question_id": 58001129, "link": "https://stackoverflow.com/questions/58001129/why-the-web-page-is-not-refreshing-my-value-when-i-use-beautifulsoup", "title": "Why the web page is not refreshing my value, when I use Beautifulsoup?", "body": "<p>I am simply trying to get any Facebook page amount of <em>likes</em>, and to show it in a simple web page. I used BeautifulSoup to scrape the amount of <em>likes</em>.</p>\n\n<p>But the problem is: once the script is running the value are not being refreshed... is there any way to re-run the script periodically?</p>\n\n<p>This is the <em>.py</em> script</p>\n\n<pre><code>      from flask import Flask, render_template\n\n        import requests\n        import string\n        import lxml.html\n        import lxml.html.clean\n        import unicodedata\n        from bs4 import BeautifulSoup\n        import re\n\n\n        user = 'EttounsiyaTV'\n        url = 'https://www.facebook.com/'+ user\n        response = requests.get(url)\n        soup = BeautifulSoup(response.content,'lxml')\n        fe = soup.find('div', attrs={'class': '_4-u3 _5sqi _5sqk'})\n        f = fe.text\n        nonBreakSpace = u'\\xa0'\n        soup = f.replace(nonBreakSpace, '')\n\n        soup = re.sub(\"\\D\",\"\",soup)\n\n        fan_number = int(soup)\n        old_number = 6206360\n        difference = old_number - fan_number\n\n\n        print(\"lost in one day {difference} \".format(difference=difference))\n\n        print(fan_number)\n\n\n        app = Flask(__name__)\n\n\n\n        @app.route(\"/\")\n        def home():\n            return render_template(\"index.html\",text=soup,text2=f)\n\n\n        if __name__ == \"__main__\":\n            app.run(debug=True)\n</code></pre>\n\n<p>And here is the <em>html</em> which is found in templates</p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;\n    &lt;html lang=\"en\" dir=\"ltr\"&gt;\n    &lt;meta http-equiv=\"refresh\" content=\"5\"/&gt;\n\n      &lt;head&gt;\n           &lt;title&gt;Flask app&lt;/title&gt;\n        &lt;link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\"&gt;\n\n\n      &lt;/head&gt;\n      &lt;body&gt;\n       &lt;center&gt; &lt;h1&gt; {{ text }}&lt;/h1&gt; &lt;center&gt;\n\n      &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>How to upload this on free host, and make it refresh every 5 seconds or something?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "data-science", "sentiment-analysis"], "comments": [{"owner": {"reputation": 509, "user_id": 4899308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a54739081b9c622d7ee3d9fcf0656b2?s=128&d=identicon&r=PG&f=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/4899308/bmw"}, "edited": false, "score": 0, "creation_date": 1568845457, "post_id": 58001112, "comment_id": 102408543, "body": "Can you provide a data sample?"}, {"owner": {"reputation": 95, "user_id": 12047400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b264708e9892ccbfb5904ababbe8b3ae?s=128&d=identicon&r=PG&f=1", "display_name": "ahmad noori", "link": "https://stackoverflow.com/users/12047400/ahmad-noori"}, "reply_to_user": {"reputation": 509, "user_id": 4899308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a54739081b9c622d7ee3d9fcf0656b2?s=128&d=identicon&r=PG&f=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/4899308/bmw"}, "edited": false, "score": 0, "creation_date": 1568846167, "post_id": 58001112, "comment_id": 102408705, "body": "@BMW i added a sample csv file."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 12047400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b264708e9892ccbfb5904ababbe8b3ae?s=128&d=identicon&r=PG&f=1", "display_name": "ahmad noori", "link": "https://stackoverflow.com/users/12047400/ahmad-noori"}, "edited": false, "score": 0, "creation_date": 1568845907, "post_id": 58001475, "comment_id": 102408639, "body": "currently i have a column called hashtags for each tweet in my dataframe. and one of the tweets has the hashtags in the question. im trying to create a new column that only has the hashtags"}], "tags": [], "owner": {"reputation": 509, "user_id": 4899308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a54739081b9c622d7ee3d9fcf0656b2?s=128&d=identicon&r=PG&f=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/4899308/bmw"}, "is_accepted": false, "score": 0, "last_activity_date": 1568860846, "last_edit_date": 1568860846, "creation_date": 1568845626, "answer_id": 58001475, "question_id": 58001112, "link": "https://stackoverflow.com/questions/58001112/extract-hashtags-from-entities-and-add-them-to-new-column/58001475#58001475", "title": "Extract hashtags from entities and add them to new column", "body": "<p>You can use a <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.apply.html#pandas.Series.apply\" rel=\"nofollow noreferrer\">pandas.Series.apply</a> to parse the hashtag as follows:</p>\n\n<pre><code>tweets['hashtags'].apply(lambda x: [d['text'] for d in x])\n</code></pre>\n\n<p>Then you need to store the output in a new column of the dataframe. This anonymous function takes the value as input and iterates over each dictionary in the list (if it's non empty), then creates a new list of the values in key: 'text'. The output would look like this:</p>\n\n<pre><code>0                                                  []\n1                             [NOJUSTICE, TrumpPence]\n2                                                  []\n3                                                  []\n4                          [CNN, newday, Trump, ISIS]\n5                                        [NeverTrump]\n6    [Trump2016, TrumpPence16, MakeAmericaGreatAgain]\n7                                                  []\n8                                                  []\n9                                                  []\ndtype: object\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 12047400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b264708e9892ccbfb5904ababbe8b3ae?s=128&d=identicon&r=PG&f=1", "display_name": "ahmad noori", "link": "https://stackoverflow.com/users/12047400/ahmad-noori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568882035, "creation_date": 1568843063, "last_edit_date": 1568882035, "question_id": 58001112, "link": "https://stackoverflow.com/questions/58001112/extract-hashtags-from-entities-and-add-them-to-new-column", "title": "Extract hashtags from entities and add them to new column", "body": "<p>I created the following dataframe from a json tweets file.</p>\n\n<pre><code>tweets['text'] =    list(map(lambda tweet: tweet['text'], tweets_data))\ntweets['date'] =    list(map(lambda tweet: tweet['created_at'], tweets_data))\ntweets['lang'] =    list(map(lambda tweet: tweet['lang'], tweets_data))\ntweets['place_type'] = list(map(lambda tweet: tweet['place']['place_type'] if tweet['place'] != None else None, tweets_data))\ntweets['place_name'] = list(map(lambda tweet: tweet['place']['full_name'] if tweet['place'] != None else None, tweets_data))\ntweets['country'] = list(map(lambda tweet: tweet['place']['country'] if tweet['place'] != None else None, tweets_data))\ntweets['hashtags'] =  list(map(lambda tweet: tweet['entities']['hashtags'], tweets_data))\n</code></pre>\n\n<p>The current output of the hashtags column is the following:</p>\n\n<pre><code>\"[{'text': 'NOJUSTICE', 'indices': [62, 72]}, {'text': 'TrumpPence', 'indices': [93, 104]}]\"\n</code></pre>\n\n<p>I'm trying to create a new column that only contains the hashtags. For example:</p>\n\n<p>NOJUSTICE and Trumpence</p>\n\n<p>I tried the following code:</p>\n\n<pre><code>ht=[]\nfor s in range(len(tweets['hashtags'])):\n    hasht=[]\n    for t in range(len(tweets.hashtags[s])):\n        hasht.append(tweets['hashtags'][s][t]['text'])\n        t=t+1\n    ht.append(hasht)\n    s=s+1\ntweets['HT']=zip(ht)\n</code></pre>\n\n<p>and I received the following error:</p>\n\n<pre><code>TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-38-9780008354d7&gt; in &lt;module&gt;\n      3     hasht=[]\n      4     for t in range(len(tweets.hashtags[s])):\n----&gt; 5         hasht.append(tweets['hashtags'][s][t]['text'])\n      6         t=t+1\n      7     ht.append(hasht)\n\nTypeError: string indices must be integers\n</code></pre>\n\n<p><a href=\"https://wetransfer.com/downloads/1e8b0af1332f0b31fa12c957ed334dd520190918223501/f66510\" rel=\"nofollow noreferrer\">sample csv file</a></p>\n\n<p>i want the hashtags column to only contain the hashtags without the indices and other stuff</p>\n\n<p>UPDATE: i used the following suggestion and got the same error</p>\n\n<pre><code>tweets['hashtags'].apply(lambda x: [d['text'] for d in x])\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "duplicates"], "comments": [{"owner": {"reputation": 1330, "user_id": 6335503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229c916be89ba4012cc6962aadaec14a?s=128&d=identicon&r=PG&f=1", "display_name": "Nf4r", "link": "https://stackoverflow.com/users/6335503/nf4r"}, "edited": false, "score": 0, "creation_date": 1568843090, "post_id": 58001085, "comment_id": 102407940, "body": "Check python <code>set</code>&#39;s."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1568843163, "post_id": 58001085, "comment_id": 102407954, "body": "just do <code>set(original_split_text)</code> you will get the unique values"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 2, "creation_date": 1568843214, "post_id": 58001085, "comment_id": 102407968, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1207406/how-to-remove-items-from-a-list-while-iterating\">How to remove items from a list while iterating?</a> and <a href=\"https://stackoverflow.com/questions/8312829/how-to-remove-item-from-a-python-list-in-a-loop\">How to remove item from a python list in a loop?</a>."}, {"owner": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568843305, "post_id": 58001085, "comment_id": 102408000, "body": "By the way, I am sure there is a much more elegant way to approach this problem and no doubt this is what someone will show me. That&#39;s great. But I will also be interested to understand why the approach I have tried did not work. Thanks very much in advance!"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1568843402, "post_id": 58001085, "comment_id": 102408026, "body": "If you modify the list while you are iterating over it, you can miss elements as the iterator doesn&#39;t know what you&#39;ve done."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568843461, "post_id": 58001144, "comment_id": 102408048, "body": "Thanks. I am at a point in learning python where I haven&#39;t yet been introduced to sets. So I am assuming there must have been some way to accomplish this assignment based on my current knowledge. Why would my loop work well but only on part of the list? Why did it stop? That&#39;s what I want to understand."}, {"owner": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568843848, "post_id": 58001144, "comment_id": 102408144, "body": "Thanks. This assignment was given before we covered the topic of  &quot;sets&quot;, so presumably there is a way to get it done without that. That&#39;s what&#39;s puzzling me. And I can&#39;t figure out why my loop works on a good chunk of the list and then stops. Just seems so strange!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568843917, "post_id": 58001144, "comment_id": 102408164, "body": "@MarkSchacter see the accepted answer <a href=\"https://stackoverflow.com/questions/6260089/strange-result-when-removing-item-from-a-list\">in this linked duplicate</a> for a good explanation of why this isn&#39;t working."}, {"owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "reply_to_user": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568844029, "post_id": 58001144, "comment_id": 102408188, "body": "@MarkSchacter It could work using a loop, but why do you have to delete from <code>data</code>?"}, {"owner": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568844484, "post_id": 58001144, "comment_id": 102408305, "body": "@MrGeek - thanks. when I remove the &#39;del data_[0]&#39; line my output is a string of 37 &#39;already&#39;s (which is the first element in the original list."}, {"owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "reply_to_user": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568844685, "post_id": 58001144, "comment_id": 102408347, "body": "@MarkSchacter Check my edit for a version with loops and no <code>set</code>s or <code>del</code>s."}, {"owner": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "edited": false, "score": 0, "creation_date": 1568857709, "post_id": 58001144, "comment_id": 102410815, "body": "@MrGeek yes, thanks. Nice and simple!"}], "tags": [], "owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "is_accepted": false, "score": 1, "last_activity_date": 1568855245, "last_edit_date": 1568855245, "creation_date": 1568843279, "answer_id": 58001144, "question_id": 58001085, "link": "https://stackoverflow.com/questions/58001085/removing-duplicate-elements-in-a-list/58001144#58001144", "title": "Removing duplicate elements in a list", "body": "<p>That's not a very good way to remove duplicates from a list. Also, you should't remove elements from a list while iterating over it like that. Consider using a set instead. Sets are not ordered, but since you're sorting the data before processing it you can use <code>sorted</code> to turn the unordered set into a sorted list.</p>\n\n<pre><code>data = ['but', 'soft', 'what', 'light', 'through', 'yonder', 'window', 'breaks', 'it', 'is', 'the', 'east', 'and', 'juliet', 'is', 'the', 'sun', 'arise', 'fair', 'sun', 'and', 'kill', 'the', 'envious', 'moon', 'who', 'is', 'already', 'sick', 'and', 'pale', 'with', 'grief']\n\nnew_data = sorted(set(data))\n\nprint(new_data)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['already', 'and', 'arise', 'breaks', 'but', 'east', 'envious', 'fair', 'grief', 'is', 'it', 'juliet', 'kill', 'light', 'moon', 'pale', 'sick', 'soft', 'sun', 'the', 'through', 'what', 'who', 'window', 'with', 'yonder']\n</code></pre>\n\n<p>You can also do this in a loop, without sets, and without <code>del</code>:</p>\n\n<pre><code>newlist = []\n\nfor x in sorted(data):\n    if x not in newlist:\n        newlist.append(x)\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7061501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83701fec1abb3e089f195b8f6ced7964?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Schacter", "link": "https://stackoverflow.com/users/7061501/mark-schacter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1568843837, "answer_count": 1, "score": -1, "last_activity_date": 1568855274, "creation_date": 1568842912, "last_edit_date": 1568855274, "question_id": 58001085, "link": "https://stackoverflow.com/questions/58001085/removing-duplicate-elements-in-a-list", "closed_reason": "Duplicate", "title": "Removing duplicate elements in a list", "body": "<p>This is a homework assignment that I have worked on for hours. Have made progress but am at the end of my rope! I have a text file that I have converted to a list of words (including some capitalized words) which I have sorted in alphabetical order. The last thing to do is remove <strong><em>duplicate words</em></strong> from the list.  I have found answers to questions about removing items from lists, but not about <strong><em>removing duplicate items</em></strong>. I have set up a loop which -- for reasons I cannot understand - only works on half of the original list.</p>\n\n<p>Here is the code I have tried:</p>\n\n<pre><code>fhand=open('romeo.txt')\ndata=fhand.read()\ndata=data.split()\ndata[0]='but'\ndata[8]='it'\ndata[13]='juliet'\ndata[17]='arise'\ndata[25]='who'\ndata.sort()\nnewlist=[]\nfor x in data:\n    if data[0] == data[1]:\n        del data[0]\n    elif data[0] != data[1]:\n        newlist.append(data[0])\n    del data [0]\nprint(newlist)\n</code></pre>\n\n<p><strong>Original split text file is:</strong> ['but', 'soft', 'what', 'light', 'through', 'yonder', 'window', 'breaks', 'it', 'is', 'the', 'east', 'and', 'juliet', 'is', 'the', 'sun', 'arise', 'fair', 'sun', 'and', 'kill', 'the', 'envious', 'moon', 'who', 'is', 'already', 'sick', 'and', 'pale', 'with', 'grief']</p>\n\n<p><strong>Expected output is:</strong> ['already', 'and', 'arise', 'breaks', 'but', 'east', 'envious', 'fair', 'grief', 'is', 'it', 'juliet', 'kill', 'light', 'moon', 'pale', 'sick', 'soft', 'sun', 'sun', 'the', 'the', 'the', 'through', 'what', 'who', 'window', 'with', 'yonder']</p>\n\n<p><strong>Actual output is:</strong> ['already', 'and', 'arise', 'breaks', 'but', 'east', 'envious', 'fair', 'grief', 'is', 'it', 'juliet', 'kill', 'light']</p>\n\n<p>So the loop does what it is supposed to do but quits after 'light'. Can't figure this out.</p>\n"}, {"tags": ["python", "arrays", "algorithm", "optimization", "permutation"], "comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1568911178, "post_id": 58001081, "comment_id": 102434844, "body": "Where is your <a href=\"https://idownvotedbecau.se/noattempt/\" rel=\"nofollow noreferrer\">attempt</a>? Also, you&#39;ll likely get more attention if you specify your target language for answers to use in your tags."}, {"owner": {"reputation": 474, "user_id": 6301603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7633d834ab70f22ca381d4b951fa70?s=128&d=identicon&r=PG&f=1", "display_name": "TTho Einthausend", "link": "https://stackoverflow.com/users/6301603/ttho-einthausend"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1570038630, "post_id": 58001081, "comment_id": 102791572, "body": "I have no idea how to optimize the complexity. ;-("}], "owner": {"reputation": 474, "user_id": 6301603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7633d834ab70f22ca381d4b951fa70?s=128&d=identicon&r=PG&f=1", "display_name": "TTho Einthausend", "link": "https://stackoverflow.com/users/6301603/ttho-einthausend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568911230, "creation_date": 1568842892, "last_edit_date": 1568911230, "question_id": 58001081, "link": "https://stackoverflow.com/questions/58001081/optimize-unranking-algorithmn-with-duplicates", "title": "Optimize unranking algorithmn with duplicates", "body": "<p>is it possible to optimize the given unrank with duplicates <code>O(n^2)</code> algorithm to a lower complexity level, if yes how?</p>\n\n<p>The algorithm is given by this Link: </p>\n\n<p><a href=\"https://www.geeksforgeeks.org/find-n-th-lexicographically-permutation-string-set-2/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/find-n-th-lexicographically-permutation-string-set-2/</a></p>\n"}, {"tags": ["python", "pandas", "csv", "scikit-learn", "multilabel-classification"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 468588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239ca3f7a7a4a38ac0c21410990b5bf4?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/468588/matt"}, "edited": false, "score": 0, "creation_date": 1568863167, "post_id": 58001743, "comment_id": 102411725, "body": "Thanks! I needed to strip the whitespace as well: <code>mlb.fit_transform(df[&quot;Tag&quot;].str.replace(&quot; &quot;,&quot;&quot;).str.split(&quot;,&quot;))</code>"}], "tags": [], "owner": {"reputation": 1435, "user_id": 3866678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yZyO.png?s=128&g=1", "display_name": "Michael Gardner", "link": "https://stackoverflow.com/users/3866678/michael-gardner"}, "is_accepted": true, "score": 2, "last_activity_date": 1568847923, "creation_date": 1568847923, "answer_id": 58001743, "question_id": 58001072, "link": "https://stackoverflow.com/questions/58001072/formatting-issues-with-multilabelbinarizer-after-reading-csv-into-pandas/58001743#58001743", "title": "Formatting issues with MultiLabelBinarizer() after reading CSV into Pandas", "body": "<p>Add .str.split(\",\")</p>\n\n<pre><code>mlb.fit_transform(df[\"Tag\"].str.split(\",\"))\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 468588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239ca3f7a7a4a38ac0c21410990b5bf4?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/468588/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 58001743, "answer_count": 1, "score": 1, "last_activity_date": 1568847923, "creation_date": 1568842817, "question_id": 58001072, "link": "https://stackoverflow.com/questions/58001072/formatting-issues-with-multilabelbinarizer-after-reading-csv-into-pandas", "title": "Formatting issues with MultiLabelBinarizer() after reading CSV into Pandas", "body": "<p>I'd like to use MultiLabelBinarizer() to prepare a column containing labels that apply to a text. For example, predicting which genres a movie might fall under based on the <a href=\"https://www.analyticsvidhya.com/blog/2019/04/predicting-movie-genres-nlp-multi-label-classification/\" rel=\"nofollow noreferrer\">title</a>. </p>\n\n<p>MultiLabelBinarizer() works great when the values are pre-defined as a list in the DataFrame:</p>\n\n<pre><code>import pandas as pd\nfrom sklearn.preprocessing import MultiLabelBinarizer\n\ndf = pd.DataFrame({\"Text\": [\"Blah blah\", \"Blah blah blah\"],\n              \"Tag\": [[\"Hi\", \"Hello\"], [\"Hey\"]]})\n\nmlb = MultiLabelBinarizer()\nprint(mlb.fit_transform(df[\"Tag\"]))\nprint(mlb.classes_)\n\n</code></pre>\n\n<p>Gives</p>\n\n<pre><code>array([[1, 0, 1],\n       [0, 1, 0]])\n\narray(['Hello', 'Hey', 'Hi'], dtype=object)\n</code></pre>\n\n<p>However, this approach fails when I'm reading a CSV or Excel file into Pandas. For example, if I make a simple CSV with the same structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tKnr8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tKnr8.png\" alt=\"Example of CSV\"></a></p>\n\n<p>And read it into Pandas + use MultiLabelBinarizer():</p>\n\n<pre><code>df = pd.read_csv(filepath)\n\nmlb = MultiLabelBinarizer()\nprint(mlb.fit_transform(df[\"Tag\"]))\nprint(mlb.classes_)\n</code></pre>\n\n<p>It treats each character as a separate class and also doesn't output as array() anymore:</p>\n\n<pre><code>[[1 1 1 1 1 1 1 1 0]\n [0 1 0 1 1 0 0 0 1]]\n\n[' ' '\"' ',' 'H' 'e' 'i' 'l' 'o' 'y']\n</code></pre>\n\n<p>Given this limitation, how can I read from a CSV or Excel file and preserve the functionality of MultiLabelBinarizer()?</p>\n"}, {"tags": ["python", "python-3.x", "search", "search-tree"], "comments": [{"owner": {"reputation": 6802, "user_id": 9609843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ceb913f05e91861333b367e0379a8e?s=128&d=identicon&r=PG&f=1", "display_name": "sanyassh", "link": "https://stackoverflow.com/users/9609843/sanyassh"}, "edited": false, "score": 1, "creation_date": 1568846422, "post_id": 58001048, "comment_id": 102408773, "body": "No links to code, only minimal reproducable code example in the question body, please."}], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 8814732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fce9ee6d3e64c2900b3b81d439c7ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Ronin", "link": "https://stackoverflow.com/users/8814732/sergey-ronin"}, "edited": false, "score": 0, "creation_date": 1569084812, "post_id": 58001940, "comment_id": 102484954, "body": "is there any way to raise an error if either of the input nodes do not belong on the tree?"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 1, "last_activity_date": 1569085111, "last_edit_date": 1569085111, "creation_date": 1568849847, "answer_id": 58001940, "question_id": 58001048, "link": "https://stackoverflow.com/questions/58001048/tree-search-given-two-nodes-in-a-tree-check-if-they-are-connected-python/58001940#58001940", "title": "Tree Search - given two nodes in a tree, check if they are connected - python", "body": "<p>You can use simple recursion:</p>\n\n<pre><code>tree = {'name': '1', 'children': [{'name': '2', 'children': [{'name': '2.1', 'children': [{'name': '3'}]}, {'name': '2.2', 'children': [{'name': '2.2.1', 'children': [{'name': '3'}]}]}]}]}\ndef in_tree(d, node):\n   return d['name'] == node or any(in_tree(i, node) for i in d.get('children', []))\n\ndef lookup(tree, a, b, flag=False):\n   if tree['name'] == b and flag:\n     return True\n   return any(lookup(j, a, b, tree['name'] == a) for j in tree.get('children', []))\n\ntest = [['3', '1'], ['3', '2'], ['2.2.1', '2.2'], ['2.2.1', '3'], ['60', '70']]\nfor a, b in test:\n   if not in_tree(tree, a) or not in_tree(tree, b):\n      raise AttributeError('Node(s) missing in tree')\n   print(any([lookup(tree, a, b), lookup(tree, b, a)]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>False\nFalse\nTrue\nTrue\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 3, in &lt;module&gt;\nAttributeError: Node(s) missing in tree\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "is_accepted": false, "score": 1, "last_activity_date": 1568852752, "creation_date": 1568852752, "answer_id": 58002195, "question_id": 58001048, "link": "https://stackoverflow.com/questions/58001048/tree-search-given-two-nodes-in-a-tree-check-if-they-are-connected-python/58002195#58002195", "title": "Tree Search - given two nodes in a tree, check if they are connected - python", "body": "<p>If I understand well you 'just' ask for a direct parent child relationship without any intermediate nodes.\nIf this is not what you're looking for, then please provide another example showing where below code fails and I can fix it.</p>\n\n<p>The code uses anytree as this is the library, that you suggested</p>\n\n<pre><code>from anytree import Node, RenderTree\n\nnodes = {} # a dict as a lookup to find nodes by name\n\ndef add_node(val, parentval=None):\n    if parentval is not None:\n        node = nodes[val] = Node(val, parent=nodes[parentval])\n    else:\n        node = nodes[val] = Node(val)\n    return node\n\ndef mk_tree():\n    top = add_node(\"1\")\n    add_node(\"2\", \"1\")\n    add_node(\"2.1\", \"2\")\n    add_node(\"3\", \"2.1\")\n    add_node(\"2.2\", \"2\")\n    add_node(\"2.2.1\", \"2.2\")\n    add_node(\"3\", \"2.2.1\")\n    return top\n\ndef is_child_or_parent(n1, n2):\n    return n1.parent == n2 or n2.parent == n1\n\ntestpatterns = [\n    (\"3\", \"1\", False),\n    (\"3\", \"2\", False),\n    (\"2.2.1\", \"2.2\", True),\n    (\"2.2.1\", \"3\", True),\n    ]\n\ndef run_test():\n    for name1, name2, expected in testpatterns:\n        node1 = nodes[name1]\n        node2 = nodes[name2]\n        rslt = is_child_or_parent(node1, node2)\n        print(node1, node2, expected, rslt)\n        assert rslt == expected\n\ntree = mk_tree()\nprint(RenderTree(tree))\nrun_test()\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 8814732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fce9ee6d3e64c2900b3b81d439c7ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Ronin", "link": "https://stackoverflow.com/users/8814732/sergey-ronin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 58001940, "answer_count": 2, "score": 1, "last_activity_date": 1569085111, "creation_date": 1568842678, "question_id": 58001048, "link": "https://stackoverflow.com/questions/58001048/tree-search-given-two-nodes-in-a-tree-check-if-they-are-connected-python", "title": "Tree Search - given two nodes in a tree, check if they are connected - python", "body": "<p>Given a search tree, e.g.</p>\n\n<pre><code>\"1\"\n \u2514 \"2\"\n    \u251c \"2.1\"\n    \u250a   \u2514 \"3\"\n    \u250a\n    \u2514 \"2.2\"\n        \u2514 \"2.2.1\"\n             \u2514 \"3\"\n</code></pre>\n\n<p>As well as two nodes, <code>a</code> and <code>b</code>, that belong on that tree, e.g. \"2.1\" and \"3\". How can we check whether <code>a</code> and <code>b</code> are parent-child (or child-parent) related / connected?</p>\n\n<p>For the first example, True should be yielded. Here are some more:</p>\n\n<pre><code>a=\"3\"      b=\"1\"    -&gt; False\na=\"3\"      b=\"2\"    -&gt; False\na=\"2.2.1\"  b=\"2.2\"  -&gt; True\na=\"2.2.1\"  b=\"3\"    -&gt; True\n</code></pre>\n\n<p>I'm currently using the <a href=\"https://anytree.readthedocs.io/en/latest/index.html\" rel=\"nofollow noreferrer\"><code>anytree</code></a> library, with which I am struggling to implement this solution. The above graph is a structural simplification. What I have currently tried implementing is outlined here: <a href=\"https://pastebin.com/Mjk7gyqH\" rel=\"nofollow noreferrer\">https://pastebin.com/Mjk7gyqH</a></p>\n\n<p>If the answer could be given with either pure python or anytree, that would be fantastic, but any answer is better than none.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "edited": false, "score": 0, "creation_date": 1568843014, "post_id": 58001015, "comment_id": 102407916, "body": "Without seeing any of the HTML on the page, I&#39;m willing to bet there is content being loaded asynchronously using JavaScript. You might need to scroll or interact with the page in another way before those elements get loaded."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1568857102, "post_id": 58001015, "comment_id": 102410698, "body": "I&#39;m looking at that page and the element is not there."}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 7876832, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8026603fd9d461598f867990a8eefbd2?s=128&d=identicon&r=PG&f=1", "display_name": "ParalysisByAnalysis", "link": "https://stackoverflow.com/users/7876832/paralysisbyanalysis"}, "is_accepted": false, "score": 0, "last_activity_date": 1568848436, "creation_date": 1568848436, "answer_id": 58001797, "question_id": 58001015, "link": "https://stackoverflow.com/questions/58001015/how-can-i-fix-my-selenium-code-with-timeout-exception-error/58001797#58001797", "title": "How can I fix my selenium code with timeout exception error?", "body": "<p>Have you tried <code>requests</code> and <code>lxml</code>?  This may solve your problem...but like Greg mentioned, this depends on the website source.</p>\n\n<pre><code>import requests\nfrom lxml import html\n\npage = requests.get(\"https://www.bol.com/nl/v/looliving-nl/1146429/\")\ntree = html.fromstring(page.content)\n\nreviews = tree.xpath(\"//div[@class='media_body'/following::p\") \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5766, "user_id": 8752062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd7130a2d4925c477eea540adac4ab8?s=128&d=identicon&r=PG&f=1", "display_name": "frianH", "link": "https://stackoverflow.com/users/8752062/frianh"}, "is_accepted": false, "score": 0, "last_activity_date": 1568874092, "creation_date": 1568874092, "answer_id": 58004825, "question_id": 58001015, "link": "https://stackoverflow.com/questions/58001015/how-can-i-fix-my-selenium-code-with-timeout-exception-error/58004825#58004825", "title": "How can I fix my selenium code with timeout exception error?", "body": "<p>Incorrect expression: <code>//div[@class='media_body'/following::p</code>.</p>\n\n<p>You can use this <code>xpath</code>: <code>//div[@class='media__body']//p</code></p>\n\n<pre><code>reviews = WebDriverWait(driver,30).until(EC.visibility_of_element_located((By.XPATH,\"//div[@class='media__body']//p\"))).text\nprint(reviews)\n</code></pre>\n\n<p>Console output:</p>\n\n<pre><code>Totaal aantal beoordelingen: 6\n</code></pre>\n"}], "owner": {"reputation": 635, "user_id": 10993097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GZUs1.png?s=128&g=1", "display_name": "TheRealTengri", "link": "https://stackoverflow.com/users/10993097/therealtengri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568874092, "creation_date": 1568842460, "question_id": 58001015, "link": "https://stackoverflow.com/questions/58001015/how-can-i-fix-my-selenium-code-with-timeout-exception-error", "title": "How can I fix my selenium code with timeout exception error?", "body": "<p>I am trying to make a selenium script in python that shows how many reviews a seller on bol.com has. Every time, I get the error <code>selenium.common.exceptions.TimeoutException: Message:</code>. Here is my code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\ndriver = webdriver.Firefox()\ndriver.get(\"https://www.bol.com/nl/v/looliving-nl/1146429/\")\nreviews = WebDriverWait(driver,30).until(EC.visibility_of_element_located((By.XPATH,\"//div[@class='media_body'/following::p\"))).text\nprint(reviews)\n</code></pre>\n\n<p>How would I fix my script?</p>\n"}, {"tags": ["python", "pdf", "xhtml", "weasyprint"], "comments": [{"owner": {"reputation": 29, "user_id": 7811972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8eb711bb87ccd568c56e770999f1c2?s=128&d=identicon&r=PG&f=1", "display_name": "SoloTriesToLearn", "link": "https://stackoverflow.com/users/7811972/solotriestolearn"}, "edited": false, "score": 0, "creation_date": 1590980152, "post_id": 58000995, "comment_id": 109875786, "body": "Did you find a solution to this? I&#39;m having similar issues"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7811972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8eb711bb87ccd568c56e770999f1c2?s=128&d=identicon&r=PG&f=1", "display_name": "SoloTriesToLearn", "link": "https://stackoverflow.com/users/7811972/solotriestolearn"}, "edited": false, "score": 0, "creation_date": 1591220235, "post_id": 62148093, "comment_id": 109977427, "body": "Thanks, I&#39;ll give it a go!"}], "tags": [], "owner": {"reputation": 1, "user_id": 12087162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6983af32ed6a36616c37b261ff93f738?s=128&d=identicon&r=PG&f=1", "display_name": "debiansid", "link": "https://stackoverflow.com/users/12087162/debiansid"}, "is_accepted": false, "score": 0, "last_activity_date": 1591090248, "last_edit_date": 1591090248, "creation_date": 1591087298, "answer_id": 62148093, "question_id": 58000995, "link": "https://stackoverflow.com/questions/58000995/why-tagweasyprint-xhtml-to-pdf-does-not-fit-a4-page/62148093#62148093", "title": "Why [tag:weasyprint] xhtml-to-pdf does not fit A4 page?", "body": "<p>Yes !\nI changed ...\nStop using Weasyprint and go to selenium, more customizable</p>\n\n<pre><code>#!/usr/bin/python3\n# -*- coding: utf-8 -*-\n\nfrom selenium import webdriver\nfrom selenium.webdriver.firefox.service import Service\nfrom selenium.webdriver.firefox.options import Options\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities\n\n\n######  SELENIUM PARAMETERS\npath_to_binary = \"/usr/bin/firefox-esr\"\npath_to_webdriver = \"/usr/local/bin/geckodriver\"\ncapabilities = webdriver.DesiredCapabilities().FIREFOX\nmy_options = Options()\nmy_options.headless = True\nmy_options.add_argument(\"--width=1426\")\nmy_options.add_argument(\"--height=2048\")\nmy_options.binary_location = path_to_binary\nmy_service = Service(path_to_webdriver)\n\n\n######  GO GO GO !\ndriver = webdriver.Firefox(service=my_service, options=my_options)\ndriver.get(\"https://educadhoc.hachette-livre.fr/extract/complet/9782401058705/show-page/page325.xhtml\")\ndriver.execute_script(\"document.body.style.transform = 'scale(3)'\")\ndriver.find_element_by_tag_name(\"body\").screenshot(\"TRY.png\")\ndriver.implicitly_wait(2)\ndriver.close()\n</code></pre>\n\n<ul>\n<li>It works like a charm but in a png image file (not too bad) ; the original web page is 1426x2048 according to the Firefox inspector.</li>\n<li>I put a <code>scale(3)</code> that you can adjust according to you in the <code>driver.execute_script</code> line in order to have a 3x more high image size and quality ... (but 3x more heavy !)</li>\n<li>You need to install a webdriver (the firefox's one in my case) in the correct path (<code>/usr/local/bin/geckodriver</code> in my case) and you have to locate the binary path too (<code>/usr/local/bin/firefox-esr</code> in my case).</li>\n<li>The last webdriver of Firefox (for Linux, Mac or Win) is downloadable at  : <a href=\"https://github.com/mozilla/geckodriver/releases\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckodriver/releases</a></li>\n<li><p>Then, you can do what you want with this PNG file ! (e.g. use <code>imagemagick</code> to convert into differnet format like pdf if you want ...) <a href=\"https://www.imagemagick.org/script/convert.php\" rel=\"nofollow noreferrer\">Link to Convert</a></p></li>\n<li><p>Hope it helps you and the others Python beginners ...</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 12087162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6983af32ed6a36616c37b261ff93f738?s=128&d=identicon&r=PG&f=1", "display_name": "debiansid", "link": "https://stackoverflow.com/users/12087162/debiansid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1591090248, "creation_date": 1568842377, "last_edit_date": 1568843422, "question_id": 58000995, "link": "https://stackoverflow.com/questions/58000995/why-tagweasyprint-xhtml-to-pdf-does-not-fit-a4-page", "title": "Why [tag:weasyprint] xhtml-to-pdf does not fit A4 page?", "body": "<p>I try to convert an \"xhtml web page\" to an \"A4 portrait pdf\" with weasyprint Python 3 API.\n<a href=\"https://educadhoc.hachette-livre.fr/extract/complet/9782401058705/show-page/page325.xhtml\" rel=\"nofollow noreferrer\">Here</a>  is the page.<br>\nBut the pdf file, at the end, does not fit A4 page.<br>\nHere is the python code :</p>\n\n<pre><code>#!/usr/bin/python3\n\nfrom weasyprint import HTML, CSS\nimport subprocess\n\nPage = HTML(url=\"https://educadhoc.hachette-livre.fr/extract/complet/9782401058705/show-page/page325.xhtml\")\nStyle = CSS(string='''\n    @page {\n        size: A4 portrait;\n        max-height:100%;\n        max-width:100%;\n        }\n''')\nPage.write_pdf(target=\"Try.pdf\", zoom=1, stylesheets=[Style])\nsubprocess.Popen([\"evince\", \"Try.pdf\"])\n</code></pre>\n\n<p>It does not fit A4 even with \"size A4 portrait\" in CSS style and \"zoom=1\" in write_pdf method!<br>\n(There is also lines shifts in the pdf file ! ...)<br>\nWhat do you suggest ?</p>\n"}, {"tags": ["python", "pandas", "merge", "timestamp", "fillna"], "comments": [{"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1568842839, "post_id": 58000993, "comment_id": 102407879, "body": "why the prices changes in the expected output ? What&#39;s the logic behind ?"}, {"owner": {"reputation": 1, "user_id": 12082864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yrwWlqwJCyc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUOLDlgHQ-XSEAzBCt3piKkDgBoQ/photo.jpg?sz=128", "display_name": "Qianyu Zhang", "link": "https://stackoverflow.com/users/12082864/qianyu-zhang"}, "reply_to_user": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1568845852, "post_id": 58000993, "comment_id": 102408621, "body": "i.e the open price for A on 2019-01-03 is 150, so we expected the close price for A on 2019-01-02 is 150."}, {"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1568851830, "post_id": 58000993, "comment_id": 102409795, "body": "I don&#39;t see any closing price equal to 150"}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 10740966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07256f72861352f5f9d0b5d82936f9e1?s=128&d=identicon&r=PG&f=1", "display_name": "manwithfewneeds", "link": "https://stackoverflow.com/users/10740966/manwithfewneeds"}, "is_accepted": false, "score": 0, "last_activity_date": 1568858782, "creation_date": 1568858782, "answer_id": 58002763, "question_id": 58000993, "link": "https://stackoverflow.com/questions/58000993/fill-multiple-rows-in-between-pandas-dataframe-rows-on-condition/58002763#58002763", "title": "Fill multiple rows in between pandas dataframe rows on condition", "body": "<p>Your logic is fuzzy for how the prices should be interpolated, but to get you started, consider this, remembering to get date into a datetime dtype:</p>\n\n<pre><code>df['Date'] = pd.to_datetime(df['Date'])\ndf = (df.groupby('Name')\n        .resample('D', on='Date')\n        .mean()\n        .swaplevel()\n        .interpolate()\n)\n\nprint(df)\n                 Open Price  Close Price\nDate       Name                         \n2019-01-01 A     100.000000   200.000000\n2019-01-02 A     150.000000   250.000000   \n2019-01-03 A     200.000000   300.000000\n2019-01-01 B     300.000000   400.000000\n2019-01-02 B     333.333333   433.333333\n2019-01-03 B     366.666667   466.666667\n2019-01-04 B     400.000000   500.000000  \n2019-01-01 C     500.000000   600.000000\n2019-01-02 C     550.000000   650.000000\n2019-01-03 C     600.000000   700.000000\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12082864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yrwWlqwJCyc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUOLDlgHQ-XSEAzBCt3piKkDgBoQ/photo.jpg?sz=128", "display_name": "Qianyu Zhang", "link": "https://stackoverflow.com/users/12082864/qianyu-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568858782, "creation_date": 1568842370, "question_id": 58000993, "link": "https://stackoverflow.com/questions/58000993/fill-multiple-rows-in-between-pandas-dataframe-rows-on-condition", "title": "Fill multiple rows in between pandas dataframe rows on condition", "body": "<p>I have a dataset like below: </p>\n\n<pre><code>pd.DataFrame({'Date':['2019-01-01','2019-01-03','2019-01-01','2019-01-04','2019-01-01','2019-01-03'],'Name':['A','A','B','B','C','C'],'Open Price':[100,200,300,400,500,600],'Close Price':[200,300,400,500,600,700]})\n</code></pre>\n\n<p>Now we can see that we have few day entries missing in this table. i.e 2019-01-02 for A, and 2019-01-02, 2019-01-03 for B and 2019-01-02 for C.</p>\n\n<p>What I'm looking to do is add dummy rows in the dataframe for these dates,</p>\n\n<p>And close price column as the same of the next open price entry for next day. And I don't care the open price, it could be either nan or 0</p>\n\n<p>Expected output</p>\n\n<pre><code>pd.DataFrame({'Date':['2019-01-01','2019-01-02','2019-01-03','2019-01-01','2019-01-02','2019-01-03','2019-01-04','2019-01-01','2019-01-02','2019-01-03'],'Name':['A','A','A','B','B','B','B','C','C','C'],'Open Price':[50,'nan',150,250,'nan','nan',350,450,'nan',550],'Close Price':[200,150,300,400,350,350,500,600,550,700]})\n</code></pre>\n\n<p>Any help would be appreciated !</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 0, "creation_date": 1568853589, "post_id": 58001073, "comment_id": 102410089, "body": "could yo change your script slightly (This is just for debugging)  and add  one line prior to <code>p= subprocess ... </code>  The line is  <code>open(&quot;commands.log&quot;, &quot;a&quot;).write(&quot;exec &quot; + command + &quot;\\n&quot;)</code>  This will create a log file of all the commands, that you try to execute.  Now you can try to call these commands with <code>bash commands.log</code>  and see whether something is blocking even without python."}, {"owner": {"reputation": 10915, "user_id": 49849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584233a4e657924299359539579b006a?s=128&d=identicon&r=PG&f=1", "display_name": "user1686", "link": "https://stackoverflow.com/users/49849/user1686"}, "edited": false, "score": 0, "creation_date": 1568869057, "post_id": 58001073, "comment_id": 102412820, "body": "Why do you use the <code>exec ...</code> and <code>shell=True</code>? That seems like a completely unnecessary layer (and a bit risky). Popen accepts an array of arguments directly."}, {"owner": {"reputation": 10915, "user_id": 49849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584233a4e657924299359539579b006a?s=128&d=identicon&r=PG&f=1", "display_name": "user1686", "link": "https://stackoverflow.com/users/49849/user1686"}, "edited": false, "score": 0, "creation_date": 1568869087, "post_id": 58001073, "comment_id": 102412828, "body": "(...In fact,why do you even run <code>curl</code> instead of using native Python &#39;requests&#39; or &#39;urllib&#39; modules?)"}, {"owner": {"reputation": 11, "user_id": 8327879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ae473a65adb5054c74ece84ad2c850?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8327879/bob"}, "edited": false, "score": 0, "creation_date": 1568870294, "post_id": 58001073, "comment_id": 102413139, "body": "Thank you so much for your suggestion. It turned out that I did not add &quot;--connect-timeout 5&quot; to the 2nd command."}, {"owner": {"reputation": 11, "user_id": 8327879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ae473a65adb5054c74ece84ad2c850?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8327879/bob"}, "reply_to_user": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 0, "creation_date": 1568870735, "post_id": 58001073, "comment_id": 102413272, "body": "@gelonida I inherited shell=True from the other file transfer command. Then I noticed the subprocess is not gone after the file transfer command is run. Found people on another thread suggest to use &quot;exec &quot; + command..."}, {"owner": {"reputation": 11, "user_id": 8327879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ae473a65adb5054c74ece84ad2c850?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8327879/bob"}, "reply_to_user": {"reputation": 10915, "user_id": 49849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584233a4e657924299359539579b006a?s=128&d=identicon&r=PG&f=1", "display_name": "user1686", "link": "https://stackoverflow.com/users/49849/user1686"}, "edited": false, "score": 0, "creation_date": 1568870915, "post_id": 58001073, "comment_id": 102413334, "body": "@grawity Regarding using requests instead of curl, this is due to our embedded system not having requests lib installed with 2.7.3 at this point."}, {"owner": {"reputation": 11, "user_id": 8327879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ae473a65adb5054c74ece84ad2c850?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8327879/bob"}, "reply_to_user": {"reputation": 10915, "user_id": 49849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584233a4e657924299359539579b006a?s=128&d=identicon&r=PG&f=1", "display_name": "user1686", "link": "https://stackoverflow.com/users/49849/user1686"}, "edited": false, "score": 0, "creation_date": 1568871744, "post_id": 58001073, "comment_id": 102413586, "body": "@grawity Yes, I will remove shell=True and exec... for this command. Thanks."}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 0, "creation_date": 1568881511, "post_id": 58001073, "comment_id": 102418133, "body": "@Bob just create the log file as I suggested, but without the exec. open(&quot;commands.log&quot;, &quot;a&quot;).write(&quot;command + &quot;\\n&quot;)  so delete the file commands.log, start your python script. and the try to call <code>bash commands.log</code> and check whether the code freezes also without python.  apart from that. I agree. if all you call via subprocess is curl, then it would probably be better to directly use python to perform the http accesses."}, {"owner": {"reputation": 11, "user_id": 8327879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ae473a65adb5054c74ece84ad2c850?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8327879/bob"}, "reply_to_user": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 0, "creation_date": 1568912369, "post_id": 58001073, "comment_id": 102435308, "body": "@gelonida The issue was resolved by adding &quot;--connect-timeout 5&quot; to curl after I checked command.log that you suggested. Thanks again."}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1568842828, "question_id": 1484000}, "owner": {"reputation": 11, "user_id": 8327879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ae473a65adb5054c74ece84ad2c850?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8327879/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1568843835, "creation_date": 1568842218, "last_edit_date": 1568843835, "question_id": 58001073, "link": "https://stackoverflow.com/questions/58001073/subsequent-call-to-python-subprocess-popen-communicate-hangs", "title": "subsequent call to python subprocess.Popen().communicate() hangs", "body": "<p>In my http request handler function, I need to perform several HTTP GET test with different uris. The code is as below:</p>\n\n<pre><code>def send_http_msg(command):\n    ...\n    p = subprocess.Popen(\"exec \" + command, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)                                  \n    result = p.communicate()\n</code></pre>\n\n<p>A typical command is <code>curl --connect-timeout 5 http://1.2.3.4:22</code>.</p>\n\n<p>The problem that I cannot resolve is that when <code>send_http_msg()</code> is called again by the calling function, <code>p.communicate()</code> just hangs and never return. I also tried <code>p.communicate(timeout=10)</code>, and it hangs also with no <code>timeoutExpired</code> exception seen.</p>\n\n<p>I also tried <code>subprocess.check_output()</code>, and it hangs the 2nd call as well.</p>\n\n<p>The python is 2.7.3.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["python", "unit-testing"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1568842080, "post_id": 58000901, "comment_id": 102407669, "body": "Can you show how you&#39;re currently doing it? &quot;Best way&quot; is pretty difficult to gauge without context."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 7044970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wJXHjr6phBw/AAAAAAAAAAI/AAAAAAAAAdc/qm13FiJaQjs/photo.jpg?sz=128", "display_name": "Marcelo Duarte Fernandes", "link": "https://stackoverflow.com/users/7044970/marcelo-duarte-fernandes"}, "is_accepted": false, "score": 1, "last_activity_date": 1568843611, "creation_date": 1568843611, "answer_id": 58001206, "question_id": 58000901, "link": "https://stackoverflow.com/questions/58000901/how-to-unit-test-a-super-call-in-python/58001206#58001206", "title": "How to unit test a super() call in python", "body": "<p>Ended up finding a way to do it. It seems like you can mock built in methods:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    @patch('&lt;path_to_mixin_file&gt;.super')\n    def test_get_data_when_no_exception(self, super):\n        super.get_processed_data.return_value = True\n        self.assertTrue(MixinToAddOnMyClass.run_validation())\n</code></pre>\n"}], "owner": {"reputation": 64, "user_id": 7044970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wJXHjr6phBw/AAAAAAAAAAI/AAAAAAAAAdc/qm13FiJaQjs/photo.jpg?sz=128", "display_name": "Marcelo Duarte Fernandes", "link": "https://stackoverflow.com/users/7044970/marcelo-duarte-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568843611, "creation_date": 1568841865, "question_id": 58000901, "link": "https://stackoverflow.com/questions/58000901/how-to-unit-test-a-super-call-in-python", "title": "How to unit test a super() call in python", "body": "<p>I have the following mixin:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class MixinToAddOnMyClass:\n    def get_data(self, request):\n        try:\n            data = super().get_processed_data(request)\n        except Exception:\n            data = {'error': 'Invalid data request'}\n</code></pre>\n\n<p>I'd like to test this mixin class - but I find it not so clean when I have to create a mock class to inherit from it so that I can test the <code>super()</code> call.</p>\n\n<p>What would be the best way to unit test it?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1568842160, "post_id": 58000898, "comment_id": 102407680, "body": "What is the <code>Index</code> for these DataFrames? Since you do <code>df2[[&#39;branch&#39;,&#39;guests&#39;]]</code> it seems like <code>branch</code> is not the Index, so these just have mis-aligned indices. Looks like you just need to do <code>on=&#39;branch&#39;</code>"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1568842527, "post_id": 58000898, "comment_id": 102407789, "body": "@ALollz That worked, thanks!"}], "owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568841836, "creation_date": 1568841836, "question_id": 58000898, "link": "https://stackoverflow.com/questions/58000898/pandas-merge-produces-no-data", "title": "Pandas merge produces no data", "body": "<p>I have 2 dataframes:</p>\n\n<p>df1:</p>\n\n<pre><code>branch    sessions users\ntoledo    10       3\nnew york  14       2\nboston    102      43\nseattle   9        7\n</code></pre>\n\n<p>df2:</p>\n\n<pre><code>branch    guests\ntoledo    10      \nnew york  14       \nboston    102      \nseattle   9    \n</code></pre>\n\n<p>The result I'm looking for merges the \"guests\" column from df2 to df1 like this:\ndf1:</p>\n\n<pre><code>branch    sessions users  guests\ntoledo    10       3      10\nnew york  14       2      14\nboston    102      43     102\nseattle   9        7      9\n</code></pre>\n\n<p>I've tried <code>concat</code>, <code>join</code> and <code>merge</code> with no luck. </p>\n\n<p>With <code>merge</code></p>\n\n<pre><code>guest_sessions = df2[['branch','guests']].copy()\npd.merge(df1, guest_sessions, left_index=True, right_index=True)\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>branch_x    sessions    users   guests_x    branch_y    guests_y\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "excel", "openpyxl", "peewee"], "comments": [{"owner": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "edited": false, "score": 0, "creation_date": 1568841991, "post_id": 58000887, "comment_id": 102407644, "body": "it&#39;s just a filename issue then. <code>models.Info.ime_prezime</code> is not returning a proper string. <code>models.Info.ime_prezime</code> is a column from the look of it. Are you trying to use the name of the model?"}, {"owner": {"reputation": 1, "user_id": 12061917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfMZP.jpg?s=128&g=1", "display_name": "Nenad Ristov", "link": "https://stackoverflow.com/users/12061917/nenad-ristov"}, "reply_to_user": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "edited": false, "score": 0, "creation_date": 1568842474, "post_id": 58000887, "comment_id": 102407771, "body": "@Buckeye14Guy I want to use the data stored into the <code>models.Info.ime_prezime</code>column  and save the file with that name."}, {"owner": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "edited": false, "score": 0, "creation_date": 1568842663, "post_id": 58000887, "comment_id": 102407830, "body": "<a href=\"https://openpyxl.readthedocs.io/en/stable/tutorial.html#saving-to-a-file\" rel=\"nofollow noreferrer\">openpyxl.readthedocs.io/en/stable/&hellip;</a>. You want to save the data to excel but <code>wb.save(&#39;{}.xlsx&#39;.format(models.Info.ime_prezime))</code> is asking <code>openpyxl</code> to save an excel file named <code>&#39;&lt;CharField: Info.ime_prezime&gt;.xlsx&#39;</code>. That won&#39;t work. You need to read the data and write it to the workbook and save it"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1568844612, "post_id": 58000887, "comment_id": 102408333, "body": "@NenadRistov: Use <code>filename = str(models.Info.ime_prezime).split()[1][:-1]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1568881488, "post_id": 58003277, "comment_id": 102418122, "body": "You do the same to Excel with openpyxl."}], "tags": [], "owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "is_accepted": true, "score": 0, "last_activity_date": 1568863312, "creation_date": 1568863312, "answer_id": 58003277, "question_id": 58000887, "link": "https://stackoverflow.com/questions/58000887/how-to-export-data-from-python-database-to-excel/58003277#58003277", "title": "How to export data from Python database to Excel", "body": "<p>Just read the data out and write it to a csv.</p>\n\n<p>You need to actually <em>query</em> your model in order to have anything to write out.</p>\n\n<pre><code>import csv\n\nwith open('sheet.csv', 'w') as fh:\n    writer = csv.writer(fh)\n    for row in Info.select().tuples():\n        writer.writerow(row)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12061917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfMZP.jpg?s=128&g=1", "display_name": "Nenad Ristov", "link": "https://stackoverflow.com/users/12061917/nenad-ristov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 58003277, "answer_count": 1, "score": 0, "last_activity_date": 1568863312, "creation_date": 1568841775, "question_id": 58000887, "link": "https://stackoverflow.com/questions/58000887/how-to-export-data-from-python-database-to-excel", "title": "How to export data from Python database to Excel", "body": "<p>I am building WebApp with Pyhton Flask and peewee. I need to export data from the database and import it to Excel.</p>\n\n<p>I found the <strong>openpyxl</strong> is python library for working with\\n Excel spreadsheets.\nThis is my code:</p>\n\n<p>models.py</p>\n\n<pre><code>class Info(Model):\n    ime_prezime=CharField()\n    ulica=CharField()\n    broj=CharField()\n\n    class Meta():\n        database=DATABASE\n</code></pre>\n\n<pre><code>import openpyxl\nimport models\n\n\nwb=openpyxl.load_workbook(\"ispratnica.xlsx\")\ntype(wb)\nsheet = wb[\"Ispratnica\"]\nsheet[\"J2\"].value=\"swongnwrb\"\nwb.save('{}.xlsx'.format(models.Info.ime_prezime))\n</code></pre>\n\n<p>When i change <code>wb.save('{}.xlsx'.format(models.Info.ime_prezime))</code> to ```wb.save('ispratnica1.xlsx'.) the code works perfectly, but when I try use data from the database it gives me error:</p>\n\n<p><code>OSError: [Errno 22] Invalid argument: '&lt;CharField: Info.ime_prezime&gt;.xlsx'</code>\nCan someone help me with this one? Please pardon me if I have any mistakes asking this question.</p>\n"}, {"tags": ["python", "subprocess", "apple-configurator"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4987050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f479ab083b30c1e56d84bf82dc4d55?s=128&d=identicon&r=PG&f=1", "display_name": "JRHutson", "link": "https://stackoverflow.com/users/4987050/jrhutson"}, "edited": false, "score": 0, "creation_date": 1568844166, "post_id": 58001004, "comment_id": 102408219, "body": "Thank you. That addressed the issue."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1568842413, "creation_date": 1568842413, "answer_id": 58001004, "question_id": 58000879, "link": "https://stackoverflow.com/questions/58000879/translating-terminal-command-to-subprocess-library/58001004#58001004", "title": "Translating Terminal Command to Subprocess Library", "body": "<p>Every argument needs to be a separate list element, you can't put <code>--format</code> and <code>JSON</code> in the same string.</p>\n\n<pre><code>getDevices = subprocess.check_output([\"cfgutil\", \"--format\", \"JSON\", \"-f\", \"get\", \"ECID\"])\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4987050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f479ab083b30c1e56d84bf82dc4d55?s=128&d=identicon&r=PG&f=1", "display_name": "JRHutson", "link": "https://stackoverflow.com/users/4987050/jrhutson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 58001004, "answer_count": 1, "score": 0, "last_activity_date": 1568842413, "creation_date": 1568841736, "last_edit_date": 1568842362, "question_id": 58000879, "link": "https://stackoverflow.com/questions/58000879/translating-terminal-command-to-subprocess-library", "title": "Translating Terminal Command to Subprocess Library", "body": "<p>I'm trying to pull data from iOS devices that are attached to my Mac.</p>\n\n<p>I have enabled the automation tool option in Configurator and am able to use cfgutil from terminal.</p>\n\n<p>When I run the command <code>cfgutil --format JSON -f get ECID</code> in Terminal a JSON is returned with a <code>\"Devices\"</code> key that has a list of ECID's in the value.</p>\n\n<p>When I try to run that command through a python script I keep getting errors.</p>\n\n<pre><code>getDevices = subprocess.check_output([\"cfgutil\", \"--format JSON\", \"-f\", \"get\", \"ECID\"])\n</code></pre>\n\n<p>returns \"cfgutil: error: Unknown option '--format JSON'</p>\n\n<p>Any idea what is preventing Terminal from just running the command and getting the output?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1568869513, "post_id": 58001590, "comment_id": 102412937, "body": "Here are some guidelines for <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>.  This provided answer may be correct, but it could benefit from an explanation.  Code only answers are not considered &quot;good&quot; answers."}], "tags": [], "owner": {"reputation": 167, "user_id": 10157587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f80c94470adfc2b921b1ab6009287a?s=128&d=identicon&r=PG&f=1", "display_name": "sayo", "link": "https://stackoverflow.com/users/10157587/sayo"}, "is_accepted": false, "score": 0, "last_activity_date": 1568846493, "creation_date": 1568846493, "answer_id": 58001590, "question_id": 58000877, "link": "https://stackoverflow.com/questions/58000877/i-want-to-reshape-a-dataframe-to-look-differently-such-that-the-rows-become-colu/58001590#58001590", "title": "I want to reshape a dataframe to look differently such that the rows become columns but unable to do so", "body": "<p>I have achieved it in this way but i was wondering if there is a way to do it with melt and reshape:</p>\n\n<p><code>cols1 = df.iloc[0]</code></p>\n\n<p><code>df_cols1 = pd.DataFrame({'Country':cols1})</code></p>\n\n<p><code>cols2 = list(df.columns)</code></p>\n\n<p><code>df_cols2 = pd.DataFrame({'Prob':cols2})</code></p>\n\n<p><code>df_cols1.reset_index(drop=True, inplace=True)</code></p>\n\n<p><code>df_cols2.reset_index(drop=True, inplace=True)</code></p>\n\n<p><code>df1 = pd.concat([df_cols1,df_cols2], axis=1)</code></p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 7684730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f6010aac2b717c6b3840516a1ec701?s=128&d=identicon&r=PG&f=1", "display_name": "Wassermann", "link": "https://stackoverflow.com/users/7684730/wassermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1568924880, "last_edit_date": 1568924880, "creation_date": 1568847390, "answer_id": 58001694, "question_id": 58000877, "link": "https://stackoverflow.com/questions/58000877/i-want-to-reshape-a-dataframe-to-look-differently-such-that-the-rows-become-colu/58001694#58001694", "title": "I want to reshape a dataframe to look differently such that the rows become columns but unable to do so", "body": "<p>Using <code>values</code> attribute you can extract underlying numpy array storing actual data of your DataFrame and use it to build a new DataFrame. <code>ravel()</code> function flattens original 2D array with a single row to 1D array so that you can build a column out of it. The whole DataFrame can be built as follows:</p>\n\n<pre><code>df1 = pd.DataFrame({'Country':df.values.ravel(), 'Prob':df.columns.values})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1568849542, "creation_date": 1568849542, "answer_id": 58001911, "question_id": 58000877, "link": "https://stackoverflow.com/questions/58000877/i-want-to-reshape-a-dataframe-to-look-differently-such-that-the-rows-become-colu/58001911#58001911", "title": "I want to reshape a dataframe to look differently such that the rows become columns but unable to do so", "body": "<p>Try <code>transpose</code>, <code>assign</code>, and <code>rename</code></p>\n\n<pre><code>df.T.assign(Prob=df.columns).rename(columns={0: 'Country'})\n\nOut[63]:\n  Country Prob\n0     USA    0\n1      UK    1\n2     UAE    2\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 10157587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f80c94470adfc2b921b1ab6009287a?s=128&d=identicon&r=PG&f=1", "display_name": "sayo", "link": "https://stackoverflow.com/users/10157587/sayo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58001694, "answer_count": 3, "score": 1, "last_activity_date": 1568924880, "creation_date": 1568841711, "last_edit_date": 1568844093, "question_id": 58000877, "link": "https://stackoverflow.com/questions/58000877/i-want-to-reshape-a-dataframe-to-look-differently-such-that-the-rows-become-colu", "title": "I want to reshape a dataframe to look differently such that the rows become columns but unable to do so", "body": "<p>My data frame looks like this :</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'0':['USA'],\n                   '1':['UK'],\n                   '2':['UAE']})\n</code></pre>\n\n<p>I want the reshaped dataframe to look like this:</p>\n\n<pre><code>df1 = pd.DataFrame({'Country':['USA','UK','UAE'],\n                   'Prob':['0','1','2']})\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "dictionary", "python-3.7"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1568841822, "post_id": 58000837, "comment_id": 102407593, "body": "use <code>.items()</code>, for example <code>e = {k: v for k,v in sorted(a.items(), key=lambda x: x[1])}</code>"}, {"owner": {"reputation": 535, "user_id": 7155895, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NKGHL.png?s=128&g=1", "display_name": "BlackFenix06", "link": "https://stackoverflow.com/users/7155895/blackfenix06"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1568924649, "post_id": 58000837, "comment_id": 102440493, "body": "Thank you for your answer. That was just what I was looking for."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 7155895, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NKGHL.png?s=128&g=1", "display_name": "BlackFenix06", "link": "https://stackoverflow.com/users/7155895/blackfenix06"}, "edited": false, "score": 0, "creation_date": 1568924313, "post_id": 58000892, "comment_id": 102440361, "body": "Thank you for your answer. That was just what I was looking for."}, {"owner": {"reputation": 535, "user_id": 7155895, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NKGHL.png?s=128&g=1", "display_name": "BlackFenix06", "link": "https://stackoverflow.com/users/7155895/blackfenix06"}, "edited": false, "score": 0, "creation_date": 1568925061, "post_id": 58000892, "comment_id": 102440647, "body": "I only have one question, can I use the dict constructor with the other methods? Or is it okay to use the dict comprehension?"}, {"owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "reply_to_user": {"reputation": 535, "user_id": 7155895, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NKGHL.png?s=128&g=1", "display_name": "BlackFenix06", "link": "https://stackoverflow.com/users/7155895/blackfenix06"}, "edited": false, "score": 0, "creation_date": 1568927485, "post_id": 58000892, "comment_id": 102441457, "body": "@BlackFenix06 It is okay to use dict comprehensions, you only use the dict constructor when you have a collection of tuples (key-value pairs)."}], "tags": [], "owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "is_accepted": true, "score": 2, "last_activity_date": 1568842138, "last_edit_date": 1568842138, "creation_date": 1568841814, "answer_id": 58000892, "question_id": 58000837, "link": "https://stackoverflow.com/questions/58000837/dictionary-comprehensions-value-sorting/58000892#58000892", "title": "Dictionary Comprehensions Value Sorting", "body": "<p>You can sort <code>a.items()</code> (key-value pairs) and use the values as the sorting criteria:</p>\n\n<pre><code>a = {\"pfdee\": 100, \"pafeeg\": 1000, \"ddsds\": 999, \"gfgfgh\": 10}\n\ne = {k : v for k, v in sorted(a.items(), key = lambda t : t[1])}\nf = {k : v for k, v in sorted(a.items(), key = lambda t : t[1], reverse = True)}\n\nprint(\"e: \" + str(e))\nprint(\"f: \" + str(f))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>e: {'gfgfgh': 10, 'pfdee': 100, 'ddsds': 999, 'pafeeg': 1000}\nf: {'pafeeg': 1000, 'ddsds': 999, 'pfdee': 100, 'gfgfgh': 10}\n</code></pre>\n\n<p>In this case, since you have a list of key-value tuples, you can just use the <code>dict</code> constructor instead of a dict comprehension:</p>\n\n<pre><code>e = dict(sorted(a.items(), key = lambda t : t[1]))\nf = dict(sorted(a.items(), key = lambda t : t[1], reverse = True))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 535, "user_id": 7155895, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NKGHL.png?s=128&g=1", "display_name": "BlackFenix06", "link": "https://stackoverflow.com/users/7155895/blackfenix06"}, "edited": false, "score": 1, "creation_date": 1568924470, "post_id": 58000919, "comment_id": 102440423, "body": "Thank you for your answer. I stated in my question that I use Python 3.7, just because from Python 3.6+ the dictionaries are sorted."}], "tags": [], "owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "is_accepted": false, "score": 1, "last_activity_date": 1568841962, "creation_date": 1568841962, "answer_id": 58000919, "question_id": 58000837, "link": "https://stackoverflow.com/questions/58000837/dictionary-comprehensions-value-sorting/58000919#58000919", "title": "Dictionary Comprehensions Value Sorting", "body": "<p>sorted takes an optional argument, called key, so you can specify a function, which returns an integer, by which sorting of the elements will be done.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>e = {i: a[i] for i in sorted(list(a.keys(), key = lambda e: len(e))}\nf = {i: a[i] for i in sorted(list(a.keys(), key = lambda e: -len(e))}\n</code></pre>\n\n<p>Though i have to warn you your code makes no sense, as dictionary is \na sequence of unordered keys mapping their values, so \nall of those dictionaries are the same.\nTry looking at the module collections and OrderedDict structure it contains.</p>\n"}, {"comments": [{"owner": {"reputation": 535, "user_id": 7155895, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NKGHL.png?s=128&g=1", "display_name": "BlackFenix06", "link": "https://stackoverflow.com/users/7155895/blackfenix06"}, "edited": false, "score": 0, "creation_date": 1568924538, "post_id": 58000923, "comment_id": 102440455, "body": "Thank you for your answer. I meant to sort for their value."}], "tags": [], "owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "is_accepted": false, "score": 1, "last_activity_date": 1568841979, "creation_date": 1568841979, "answer_id": 58000923, "question_id": 58000837, "link": "https://stackoverflow.com/questions/58000837/dictionary-comprehensions-value-sorting/58000923#58000923", "title": "Dictionary Comprehensions Value Sorting", "body": "<p>If I don't understand incorrectly this might help you get what you need. Are you talking about smallest to largest as in the keys? Or smallest to largest for the values of each key? My answer adresses the first case. Let me know please so I can delete it, since the other situation has already been answered.</p>\n\n<pre><code>a = {\"pfdee\": 100, \"pafeeg\": 1000, \"ddsds\": 999, \"gfgfgh\": 10}\nb = {i: a[i] for i in reversed(list(a.keys()))}\nc = {i: a[i] for i in sorted(list(a.keys()))}\nd = {i: a[i] for i in sorted(list(a.keys()), reverse=True)}\ne = {i: a[i] for i in sorted(a.keys(),key=len)}\nf = {i: a[i] for i in sorted(a.keys(),key=len,reverse=True)}\nprint(\"a: \" + str(a))\nprint(\"b: \" + str(b))\nprint(\"c: \" + str(c))\nprint(\"d: \" + str(d))\nprint(\"e: \" + str(e))\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 7155895, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NKGHL.png?s=128&g=1", "display_name": "BlackFenix06", "link": "https://stackoverflow.com/users/7155895/blackfenix06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1568842181, "accepted_answer_id": 58000892, "answer_count": 3, "score": -1, "last_activity_date": 1568842138, "creation_date": 1568841423, "question_id": 58000837, "link": "https://stackoverflow.com/questions/58000837/dictionary-comprehensions-value-sorting", "closed_reason": "Duplicate", "title": "Dictionary Comprehensions Value Sorting", "body": "<p>I wrote this code as a test to implement it later in the script I'm working on. The concept is simple, sorting a dictionary in different ways based on the user's choice.</p>\n\n<p>\"a\" is the default order (the order of data entry in the dictionary). \"b\" is the default order but reversed. \"c\" is the default order, but in alphabetical order (A-Z). \"d\" is the order of \"c\" but reversed (Z-A).</p>\n\n<pre><code>a = {\"pfdee\": 100, \"pafeeg\": 1000, \"ddsds\": 999, \"gfgfgh\": 10}\nb = {i: a[i] for i in reversed(list(a.keys()))}\nc = {i: a[i] for i in sorted(list(a.keys()))}\nd = {i: a[i] for i in sorted(list(a.keys()), reverse=True)}\n\nprint(\"a: \" + str(a))\nprint(\"b: \" + str(b))\nprint(\"c: \" + str(c))\nprint(\"d: \" + str(d))\n</code></pre>\n\n<p>Now, I would like to add two further orders, that is related to the quantity of each single object (so \"e\" should be from the smallest to the largest, \"f\" should be from the largest to the smallest). I did several tests, but unfortunately they were unsuccessful. I could do it in a normal for loop, but I'd like to keep the dictionary comprehensions if possible. So I ask for advice on how I should proceed, to have a better understanding.</p>\n\n<p>I specify that I am using Python 3.7</p>\n"}, {"tags": ["python", "mouseevent", "nautilus"], "answers": [{"tags": [], "owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "is_accepted": true, "score": 0, "last_activity_date": 1568850861, "creation_date": 1568850861, "answer_id": 58002037, "question_id": 58000817, "link": "https://stackoverflow.com/questions/58000817/how-to-use-python3-6-to-extract-filename-from-nautilus-gui-when-mouse-pointer-cl/58002037#58002037", "title": "How to use python3.6 to extract filename from nautilus GUI when mouse pointer clicks on a file?", "body": "<p><strong>Step 1:</strong> I created the python script as shown below and saved it in folder <code>~/.local/share/nautilus/script</code> with a filename (here I called <code>myscript.py</code>):</p>\n\n<pre><code>#!/usr/bin/env python3\n\nfrom pathlib import Path\nfrom os import environ\n\na = Path('/home/user/tmp/name.txt')\npaths = environ['NAUTILUS_SCRIPT_SELECTED_FILE_PATHS'].splitlines()\nfor p in paths:\n    a.write_text(p)\n</code></pre>\n\n<p><strong>Step 2:</strong> I had to make the <code>myscript.py</code> executable with this terminal command: </p>\n\n<pre><code>$ chmod +x ~/.local/share/nautilus/scripts/myscript.py\n</code></pre>\n"}], "owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 58002037, "answer_count": 1, "score": 0, "last_activity_date": 1568850861, "creation_date": 1568841330, "question_id": 58000817, "link": "https://stackoverflow.com/questions/58000817/how-to-use-python3-6-to-extract-filename-from-nautilus-gui-when-mouse-pointer-cl", "title": "How to use python3.6 to extract filename from nautilus GUI when mouse pointer clicks on a file?", "body": "<p>I would like to write a nautilus script using python3.6 that will extract the name of a file from nautilus when the file is clicked on by the mouse pointer. Which python module can I use, or how do I write such a script from scratch?</p>\n\n<p>For this script to be executable, I will make the script to start with:</p>\n\n<pre><code>#!/usr/bin/env python3\n</code></pre>\n\n<p>Beyond that, I will need advice on how to do what I want.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2403, "user_id": 808236, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1017506697/picture?type=large", "display_name": "iamkhush", "link": "https://stackoverflow.com/users/808236/iamkhush"}, "edited": false, "score": 0, "creation_date": 1568841719, "post_id": 58000815, "comment_id": 102407559, "body": "and what result do you actually get? <code>1320500</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 2755793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YMIe.jpg?s=128&g=1", "display_name": "Corporal Hart", "link": "https://stackoverflow.com/users/2755793/corporal-hart"}, "is_accepted": false, "score": 0, "last_activity_date": 1568842433, "last_edit_date": 1568842433, "creation_date": 1568841816, "answer_id": 58000893, "question_id": 58000815, "link": "https://stackoverflow.com/questions/58000815/how-to-add-a-comma-in-between-thousands-and-how-do-add-a-sign-when-making-a-t/58000893#58000893", "title": "How to add a comma in between thousands, and how do add a $ sign when making a table in python", "body": "<p>As stated in <a href=\"https://stackoverflow.com/questions/320929/currency-formatting-in-python\">this question</a>, the <a href=\"https://docs.python.org/3/library/locale.html\" rel=\"nofollow noreferrer\">locale</a> module can do this for you.</p>\n\n<p>Example:</p>\n\n<pre><code>import locale\n...\nlocale.setlocale( locale.LC_ALL, '' )\nq1_desktopCurr = locale.currency(q1_desktop, grouping=True)\n...\nprint(\"{:&lt;20s}{:&lt;20d}{:&lt;20}\" .format(desktop , desktop_1q , q1_desktopCurr))\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8463888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0lIr.jpg?s=128&g=1", "display_name": "BustyGerman", "link": "https://stackoverflow.com/users/8463888/bustygerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1568842243, "answer_count": 1, "score": -1, "last_activity_date": 1568842433, "creation_date": 1568841305, "question_id": 58000815, "link": "https://stackoverflow.com/questions/58000815/how-to-add-a-comma-in-between-thousands-and-how-do-add-a-sign-when-making-a-t", "closed_reason": "Duplicate", "title": "How to add a comma in between thousands, and how do add a $ sign when making a table in python", "body": "<p>We are creating a spreadsheet type table that holds values from user inputs. I need to have it so commas are added automatically. EX: 120220 needs to be 120,220 and I need a $ infront, so the final product would be $120,200</p>\n\n<p>I have tried adding the money sign just infront naturally but it didn't work</p>\n\n<pre><code>print(\"1st Quarter Sales\")\n\nprint(\"{:&lt;20s}{:&lt;20s}{:&lt;20s}\" .format(\"ITEM\" , \"QUANTITY\" , \"TOTAL SALES COST\"))\n\nprint(\"{:&lt;20s}{:&lt;20d}{:&lt;20d}\" .format(desktop , desktop_1q , q1_desktop))\n\nprint(\"{:&lt;20s}{:&lt;20d}{:&lt;20d}\" .format(laptop, laptop_1q, q1_laptop))\n\nprint(\"{:&lt;20s}{:&lt;20d}{:&lt;20d}\" .format(printer, printer_1q, q1_printer))\n\nprint(\"Total Sales: $\" , q1_total , sep=\"\")\n</code></pre>\n\n<hr>\n\n<p>This is just the printed version, above are the inputs and then taking those inputs and multiplying them to get subtotals and stuff. \"desktop\" is just a string that says DESKTOP same with laptop and printer. desktop_1q printer_1q and laptop_1q is the quantity sold and for the q1_'S are the total sales so just cost of that product * quantity. </p>\n\n<p>Final result with added commas and $ should look like $1,320,500</p>\n"}, {"tags": ["python", "pandas", "datetime", "python-datetime"], "comments": [{"owner": {"reputation": 1334, "user_id": 3532564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nSv2.jpg?s=128&g=1", "display_name": "Ian Quah", "link": "https://stackoverflow.com/users/3532564/ian-quah"}, "edited": false, "score": 0, "creation_date": 1568842611, "post_id": 58000806, "comment_id": 102407818, "body": "please format your code properly and format the sample data properly"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12087249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be70b6fc10a82f671894e59f7a4cda8a?s=128&d=identicon&r=PG&f=1", "display_name": "amenoren", "link": "https://stackoverflow.com/users/12087249/amenoren"}, "edited": false, "score": 0, "creation_date": 1568901426, "post_id": 58002773, "comment_id": 102429523, "body": "Elembie, thank you for the quick response.  I tried out your code suggestion and used the  &quot;for&quot; loop - no error this time, but all the dates came out as &quot;NaT&quot;."}, {"owner": {"reputation": 530, "user_id": 11363397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cce147ac9e935039ef6b38c4ee0c40a?s=128&d=identicon&r=PG&f=1", "display_name": "elembie", "link": "https://stackoverflow.com/users/11363397/elembie"}, "reply_to_user": {"reputation": 1, "user_id": 12087249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be70b6fc10a82f671894e59f7a4cda8a?s=128&d=identicon&r=PG&f=1", "display_name": "amenoren", "link": "https://stackoverflow.com/users/12087249/amenoren"}, "edited": false, "score": 0, "creation_date": 1568951456, "post_id": 58002773, "comment_id": 102446053, "body": "I think your dates might not be stored as <code>datetime</code> objects in your dataframe. Have you added in the <code>pd.to_datetime</code> function as in the second line of my code? Make sure you&#39;re saving the output to the column you then want to export. To check the data type of your dataframe columns you can <code>print(df.dtypes)</code>. They should be something like <code>datetime64[ns]</code>."}, {"owner": {"reputation": 1, "user_id": 12087249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be70b6fc10a82f671894e59f7a4cda8a?s=128&d=identicon&r=PG&f=1", "display_name": "amenoren", "link": "https://stackoverflow.com/users/12087249/amenoren"}, "edited": false, "score": 0, "creation_date": 1569162673, "post_id": 58002773, "comment_id": 102498589, "body": "Yup.  I did that.  I am working with sqlite3, could that be part of the issue (are datetime objects supported?) ?  I&#39;ve asked an instructor to look at my code and help me out on this issue and another one I was having.  If I figure it out, I&#39;ll post my update.  Many thanks."}, {"owner": {"reputation": 530, "user_id": 11363397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cce147ac9e935039ef6b38c4ee0c40a?s=128&d=identicon&r=PG&f=1", "display_name": "elembie", "link": "https://stackoverflow.com/users/11363397/elembie"}, "reply_to_user": {"reputation": 1, "user_id": 12087249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be70b6fc10a82f671894e59f7a4cda8a?s=128&d=identicon&r=PG&f=1", "display_name": "amenoren", "link": "https://stackoverflow.com/users/12087249/amenoren"}, "edited": false, "score": 0, "creation_date": 1569212033, "post_id": 58002773, "comment_id": 102508630, "body": "sqlite definitely supports <code>datetime</code> - regardless, you already have the data in a pandas object so you should be able to convert to whatever pandas supported object type you want. Just double check all your column references, and print out the dataframe and <code>df.dtypes</code> at all stages to check you&#39;re not missing anything. Let me know if you figure it out!"}], "tags": [], "owner": {"reputation": 530, "user_id": 11363397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cce147ac9e935039ef6b38c4ee0c40a?s=128&d=identicon&r=PG&f=1", "display_name": "elembie", "link": "https://stackoverflow.com/users/11363397/elembie"}, "is_accepted": false, "score": 0, "last_activity_date": 1568859989, "last_edit_date": 1568859989, "creation_date": 1568858851, "answer_id": 58002773, "question_id": 58000806, "link": "https://stackoverflow.com/questions/58000806/need-help-iterating-over-a-dataframe-to-get-just-the-date/58002773#58002773", "title": "Need help iterating over a dataframe to get just the date", "body": "<p>You can output a column of formatted date strings to a list using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.dt.strftime.html\" rel=\"nofollow noreferrer\">strftime</a></p>\n\n<p>e.g.</p>\n\n<pre><code>d = ['2009-08-19',\n    '2005-06-04',\n    '2003-04-05']\n\u200b\ndf = pd.DataFrame(d, columns=['dates'])\ndf['dates'] = pd.to_datetime(df['dates'])  \n\n         dates\n0   2009-08-19\n1   2005-06-04\n2   2003-04-05\n\ndates = df['dates'].dt.strftime('%Y-%m-%d').values\n</code></pre>\n\n<p>By using <code>.values</code> on the series, <code>dates</code> will be a plain python list of formatted strings, you can then loop over this normally and apply them to your API.</p>\n\n<p>If you wanted to keep the strings in the dataframe you can just assign another column</p>\n\n<pre><code>df['formatted'] = df['dates'].dt.strftime('%Y-%m-%d')\n</code></pre>\n\n<p>Worth noting that you can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.itertuples.html\" rel=\"nofollow noreferrer\">itertuples</a> or similar to loop over a dataframe.</p>\n"}], "owner": {"reputation": 1, "user_id": 12087249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be70b6fc10a82f671894e59f7a4cda8a?s=128&d=identicon&r=PG&f=1", "display_name": "amenoren", "link": "https://stackoverflow.com/users/12087249/amenoren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568869673, "creation_date": 1568841266, "last_edit_date": 1568869673, "question_id": 58000806, "link": "https://stackoverflow.com/questions/58000806/need-help-iterating-over-a-dataframe-to-get-just-the-date", "title": "Need help iterating over a dataframe to get just the date", "body": "<p>I have a pandas dataframe, date_win, created from a sqlite3 query. It looks like this:</p>\n\n<pre><code>             0\n0   2011-01-29\n1   2011-03-19\n2   2011-05-07\n3   2011-02-19\n4   2011-03-12\n5   2011-01-22\n6   2011-04-17\n</code></pre>\n\n<p>I would like to iterate over it to get the date out, convert to unix and put it into the Dark Sky api.  When I get the date out and assigned to a variable and put into my datetime conversion, the error is: </p>\n\n<blockquote>\n  <p>ValueError: time data '0    2011-01-29\\nName: 0, dtype: object' does not match format '%Y-%m-%d'</p>\n</blockquote>\n\n<p>I have tried using this for loop:\n<code>for i in range(0,len(date_win)):</code></p>\n\n<p>And:\n<code>for i in date_win:</code></p>\n\n<p>Here is my full code snippet:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for i in range(0,len(date_win)):\n\n    s = str(date_win.iloc[i])\n\n\n    dt = round(time.mktime(datetime.datetime.strptime(s, \"%Y-%m-%d\").timetuple()))\n    dt = str(dt)\n    resp = requests.get('https://api.darksky.net/forecast/[my_key]/52.52,13.4050,' + dt)\n    data=resp.json()\n    print(data['currently']['summary'])\n</code></pre>\n\n<p>Here is the error code: </p>\n\n<blockquote>\n  <p>ValueError: time data '0    2011-01-29\\nName: 0, dtype: object' does not match format '%Y-%m-%d'</p>\n</blockquote>\n\n<p>The api call works if I use <code>s = \"2011-01-01\"</code> or hard code into the api request.  I'm just not doing the iteration correctly.</p>\n"}, {"tags": ["python", "sympy"], "comments": [{"owner": {"reputation": 1330, "user_id": 6335503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229c916be89ba4012cc6962aadaec14a?s=128&d=identicon&r=PG&f=1", "display_name": "Nf4r", "link": "https://stackoverflow.com/users/6335503/nf4r"}, "edited": false, "score": 1, "creation_date": 1568841583, "post_id": 58000778, "comment_id": 102407515, "body": "Maybe <code>result = [p.args for p in result]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "edited": false, "score": 2, "creation_date": 1568843593, "post_id": 58000818, "comment_id": 102408087, "body": "You can also use p.args which gives the same tuple: <code>result = [p.args for p in result]</code>"}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "edited": false, "score": 0, "creation_date": 1568844034, "post_id": 58000818, "comment_id": 102408189, "body": "@OscarBenjamin, thank you for your observation, I updated my answer."}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 1, "last_activity_date": 1568844003, "last_edit_date": 1568844003, "creation_date": 1568841337, "answer_id": 58000818, "question_id": 58000778, "link": "https://stackoverflow.com/questions/58000778/list-one-level-unpacking/58000818#58000818", "title": "List one level &quot;unpacking&quot;", "body": "<p>Use a list comprehension:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>result = [tuple([p[0], p[1], p[2]]) for p in result]\n</code></pre>\n\n<p>I just checked the documentation of <a href=\"https://docs.sympy.org/0.7.6/modules/geometry/point3d.html\" rel=\"nofollow noreferrer\"><code>Point3D</code></a>, and it seems you can have a more elegant solution:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>result = [tuple([p.x, p.y, p.z]) for p in result]\n</code></pre>\n\n<p>Or as @OscarBenjamin has indicated in the comments, which probably is the simplest solution, you can use:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>result = [p.args for p in result]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 270, "user_id": 11760835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OGgMl.jpg?s=128&g=1", "display_name": "PepeElMago33", "link": "https://stackoverflow.com/users/11760835/pepeelmago33"}, "is_accepted": false, "score": 0, "last_activity_date": 1578146797, "creation_date": 1578146797, "answer_id": 59591435, "question_id": 58000778, "link": "https://stackoverflow.com/questions/58000778/list-one-level-unpacking/59591435#59591435", "title": "List one level &quot;unpacking&quot;", "body": "<p>Small note: A new method has been added (by me) to sympy's point class which returns all the coordinates of the point:</p>\n\n<pre><code>result = [p.coordinates for p in result]\n</code></pre>\n"}], "owner": {"reputation": 270, "user_id": 11760835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OGgMl.jpg?s=128&g=1", "display_name": "PepeElMago33", "link": "https://stackoverflow.com/users/11760835/pepeelmago33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58000818, "answer_count": 2, "score": 1, "last_activity_date": 1578146797, "creation_date": 1568841076, "question_id": 58000778, "link": "https://stackoverflow.com/questions/58000778/list-one-level-unpacking", "title": "List one level &quot;unpacking&quot;", "body": "<p>I have a function which returns Sympy points:</p>\n\n<pre><code>result = [Point3D(500, 500, 10), Point3D(-500, 500, 10), Point3D(-500, -500, 10), Point3D(500, -500, 10)]\n</code></pre>\n\n<p>But I need to get the values of the point, not the point instance, so I do this:</p>\n\n<pre><code>a, b, c, d = [], [], [], []\nfor i in range(3):\n    a.append(result[0][i])\nfor i in range(3):\n    b.append(result[1][i])\nfor i in range(3):\n    c.append(result[2][i])\nfor i in range(3):\n    d.append(result[3][i])\n\n# And then pack it:\nresult = [tuple(a), tuple(b), tuple(c), tuple(d)]\n</code></pre>\n\n<p>I know this is a horrible way of getting the desired input, which is:</p>\n\n<pre><code>result = [(500, 500, 10), (-500, 500, 10), (-500, -500, 10), (500, -500, 10)]\n</code></pre>\n\n<p>How can I do it in a better way?</p>\n"}, {"tags": ["python", "amazon-web-services", "aws-lambda", "aws-secrets-manager"], "comments": [{"owner": {"reputation": 460, "user_id": 3630905, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003714768711/picture?type=large", "display_name": "Munavir Chavody", "link": "https://stackoverflow.com/users/3630905/munavir-chavody"}, "edited": false, "score": 0, "creation_date": 1568874047, "post_id": 58000751, "comment_id": 102414511, "body": "Calling the function inside the handler function isn&#39;t working?"}], "answers": [{"tags": [], "owner": {"reputation": 1765, "user_id": 6464013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800b098105b883e97c66cc3227a58807?s=128&d=identicon&r=PG", "display_name": "amittn", "link": "https://stackoverflow.com/users/6464013/amittn"}, "is_accepted": false, "score": 6, "last_activity_date": 1568899255, "last_edit_date": 1568899255, "creation_date": 1568879285, "answer_id": 58006184, "question_id": 58000751, "link": "https://stackoverflow.com/questions/58000751/using-aws-secrets-manager-with-python-lambda-console/58006184#58006184", "title": "Using AWS Secrets Manager with Python (Lambda Console)", "body": "<ul>\n<li>Here is how i have used it using arn, <a href=\"https://aws.amazon.com/blogs/security/how-to-securely-provide-database-credentials-to-lambda-functions-by-using-aws-secrets-manager/\" rel=\"noreferrer\">following this bloc</a> hope that helps you. </li>\n<li>Worth checking what you have used to store and accordingly use one\n<code>SecretString</code> or <code>SecretBinary</code></li>\n</ul>\n\n<pre><code>    secrets_client = boto3.client('secretsmanager')\n    secret_arn = 'arn:aws:secretsmanager:eu-west-2:xxxxxxxxxxxx:secret:dashboard/auth_token'\n    auth_token = secrets_client.get_secret_value(SecretId=secret_arn).get('SecretString')\n</code></pre>\n\n<ul>\n<li><a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/secrets-manager.html\" rel=\"noreferrer\">boto3 docs</a></li>\n<li><a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/secretsmanager.html#SecretsManager.Client.get_secret_value\" rel=\"noreferrer\">get_secret_value</a> Retrieves the contents of the encrypted fields <code>SecretString</code> or <code>SecretBinary</code> from the specified version of a secret, whichever contains content.</li>\n<li>Your lambda role should have the following permissions depending on what is used\n\n<ul>\n<li><code>secretsmanager:GetSecretValue</code></li>\n<li><code>kms:Decrypt</code> required only if you use a customer-managed AWS KMS key to encrypt the secret. You do not need this permission to use the account's default AWS managed CMK for Secrets Manager.</li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1840, "user_id": 2480965, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Pm2uK.jpg?s=128&g=1", "display_name": "MacSanhe", "link": "https://stackoverflow.com/users/2480965/macsanhe"}, "is_accepted": false, "score": 0, "last_activity_date": 1570824383, "last_edit_date": 1570824383, "creation_date": 1570811329, "answer_id": 58345245, "question_id": 58000751, "link": "https://stackoverflow.com/questions/58000751/using-aws-secrets-manager-with-python-lambda-console/58345245#58345245", "title": "Using AWS Secrets Manager with Python (Lambda Console)", "body": "<p>I created an open source library called pysecret, here's the documentation of AWS Secret Manager integration: <a href=\"https://github.com/MacHu-GWU/pysecret-project#aws-key-management-service-and-secret-manager-integration\" rel=\"nofollow noreferrer\">https://github.com/MacHu-GWU/pysecret-project#aws-key-management-service-and-secret-manager-integration</a></p>\n\n<p><img src=\"https://travis-ci.org/MacHu-GWU/pysecret-project.svg?branch=master\" alt=\"\">\n<img src=\"https://codecov.io/gh/MacHu-GWU/pysecret-project/branch/master/graph/badge.svg\" alt=\"\">\n<img src=\"https://img.shields.io/pypi/pyversions/pysecret\" alt=\"\">\n<img src=\"https://img.shields.io/badge/STAR_Me_on_GitHub!--None.svg?style=social\" alt=\"\"></p>\n\n<p>I can walk you through the easiest way to do that:</p>\n\n<ol>\n<li><strong>manually put your secret value in json or create one with</strong> <code>pysecret</code>.</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pysecret import AWSSecret\n\naws_profile = \"my_aws_profile\"\naws = AWSSecret(profile_name=aws_profile)\n\nsecret_id = \"my-example-secret\"\nsecret_data = {\n    \"host\": \"www.example.com\",\n    \"port\": 1234,\n    \"database\": \"mydatabase\",\n    \"username\": \"admin\",\n    \"password\": \"mypassword\",\n    \"metadata\": {\n        \"creator\": \"Alice\"\n    }\n}\naws.deploy_secret(name=secret_id, secret_data=secret_data) # or you can pass kms_key_id if you created a custom kms key\n</code></pre>\n\n<p>Then you should be able to see the secret been created in your aws console.</p>\n\n<ol start=\"2\">\n<li><strong>read your secret value in lambda function or in any of your python code</strong>.</li>\n</ol>\n\n<pre class=\"lang-python prettyprint-override\"><code>aws = AWSSecret(profile_name=aws_profile) # in lambda code, don't need ``profile_name=aws_profile``\npassword = aws.get_secret_value(secret_id=\"my-example-secret\", key=\"password\") # mypassword\ncreator = aws.get_secret_value(secret_id=\"my-example-secret\", key=\"metadata.creator\") # Alice\n</code></pre>\n\n<p><strong>NOTE, Lambda Function IAM Role Requirement to access the secret</strong></p>\n\n<ol>\n<li>your Lambda IAM role has to have Secret Manager read access. the aws built-in policy arn:aws:iam::aws:policy/SecretsManagerReadWrite has both read and write, if you are lazy, you can use it. But I recommend you to create a custom policy only has the Read access.</li>\n<li>if you use auto-generated kms key for your secret, you have to use <code>aws kms create-grant</code> command to grant the Lambda Function IAM Role to access the kms key for encryption, here's how <a href=\"https://docs.aws.amazon.com/cli/latest/reference/kms/create-grant.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/cli/latest/reference/kms/create-grant.html</a></li>\n<li>if you use custom kms key, you should be able to edit the user of your kms key, select the Lambda Function IAM Role in your aws console.</li>\n</ol>\n\n<p>Hope this answers your question.</p>\n\n<p>If this help, please Star my project <a href=\"https://github.com/MacHu-GWU/pysecret-project\" rel=\"nofollow noreferrer\">https://github.com/MacHu-GWU/pysecret-project</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 815, "user_id": 2769803, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/18a641544d0056b63079e158bb7ab864?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth kumar", "link": "https://stackoverflow.com/users/2769803/prashanth-kumar"}, "edited": false, "score": 1, "creation_date": 1573450910, "post_id": 58764600, "comment_id": 103873164, "body": "returning the secret as json helped me. +1, Thanks"}, {"owner": {"reputation": 759, "user_id": 8083549, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2d811cffcdd5ba47505141bc9027d0e5?s=128&d=identicon&r=PG&f=1", "display_name": "django-unchained", "link": "https://stackoverflow.com/users/8083549/django-unchained"}, "reply_to_user": {"reputation": 815, "user_id": 2769803, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/18a641544d0056b63079e158bb7ab864?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth kumar", "link": "https://stackoverflow.com/users/2769803/prashanth-kumar"}, "edited": false, "score": 0, "creation_date": 1587477900, "post_id": 58764600, "comment_id": 108523177, "body": "@Prashanthkumar Did you get dictionary just by adding the <code>return</code>? I am struggling to get my credentials."}, {"owner": {"reputation": 815, "user_id": 2769803, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/18a641544d0056b63079e158bb7ab864?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth kumar", "link": "https://stackoverflow.com/users/2769803/prashanth-kumar"}, "reply_to_user": {"reputation": 759, "user_id": 8083549, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2d811cffcdd5ba47505141bc9027d0e5?s=128&d=identicon&r=PG&f=1", "display_name": "django-unchained", "link": "https://stackoverflow.com/users/8083549/django-unchained"}, "edited": false, "score": 1, "creation_date": 1587662071, "post_id": 58764600, "comment_id": 108606278, "body": "@django-unchained, hope you got it covered already, but otherwise, I just enclosed the <code>base64.b64decode(get_secret_value_response[&#39;SecretBinary&#39;])</code> inside <code>json.loads</code> when assinging it to variable &quot;secret&quot;, after that I could access the credentials as <code>secret[&quot;username&quot;]</code> <code>secret[&quot;password&quot;]</code>, or whatever your variables are inside the secrets manager secret."}, {"owner": {"reputation": 89, "user_id": 8720051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc9af77fda8ebd7afbbb04f79cdaab1b?s=128&d=identicon&r=PG&f=1", "display_name": "Denise", "link": "https://stackoverflow.com/users/8720051/denise"}, "edited": false, "score": 0, "creation_date": 1600830828, "post_id": 58764600, "comment_id": 113208964, "body": "can u provide your code ? im stuck in this situation for days"}], "tags": [], "owner": {"reputation": 273, "user_id": 12341065, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212355530318355/picture?type=large", "display_name": "Ron Marcelino", "link": "https://stackoverflow.com/users/12341065/ron-marcelino"}, "is_accepted": false, "score": 11, "last_activity_date": 1573208284, "creation_date": 1573208284, "answer_id": 58764600, "question_id": 58000751, "link": "https://stackoverflow.com/questions/58000751/using-aws-secrets-manager-with-python-lambda-console/58764600#58764600", "title": "Using AWS Secrets Manager with Python (Lambda Console)", "body": "<p>update the last part of get_secret() to:</p>\n\n<pre><code>else:\n        # Decrypts secret using the associated KMS CMK.\n        # Depending on whether the secret is a string or binary, one of these fields will be populated.\n        if 'SecretString' in get_secret_value_response:\n            secret = get_secret_value_response['SecretString']\n        else:\n            secret = base64.b64decode(get_secret_value_response['SecretBinary'])\n\nreturn json.loads(secret)  # returns the secret as dictionary\n\n</code></pre>\n\n<p>This will return a dictionary where you'll have the keys you specified in AWS Secret Manager console.</p>\n"}, {"tags": [], "owner": {"reputation": 1274, "user_id": 12375559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cc4dbc74658aeef3a1998ce5d511fe?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilia", "link": "https://stackoverflow.com/users/12375559/cecilia"}, "is_accepted": false, "score": 0, "last_activity_date": 1580470879, "creation_date": 1580470879, "answer_id": 60003236, "question_id": 58000751, "link": "https://stackoverflow.com/questions/58000751/using-aws-secrets-manager-with-python-lambda-console/60003236#60003236", "title": "Using AWS Secrets Manager with Python (Lambda Console)", "body": "<p>AWS provide some template for some supported database engines such as MySQL etc, please take a look at this <a href=\"https://github.com/aws-samples/aws-secrets-manager-rotation-lambdas/blob/master/SecretsManagerRDSMySQLRotationSingleUser/lambda_function.py\" rel=\"nofollow noreferrer\">template</a>:</p>\n\n<p>For unsupported db, check <a href=\"https://aws.amazon.com/premiumsupport/knowledge-center/lambda-function-secrets-manager/\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>The template provided above will give you an example for customizing for your own function.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10005003, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589962234466912/picture?type=large", "display_name": "Ravi Mishra", "link": "https://stackoverflow.com/users/10005003/ravi-mishra"}, "is_accepted": false, "score": 1, "last_activity_date": 1595231980, "creation_date": 1595231980, "answer_id": 62991024, "question_id": 58000751, "link": "https://stackoverflow.com/questions/58000751/using-aws-secrets-manager-with-python-lambda-console/62991024#62991024", "title": "Using AWS Secrets Manager with Python (Lambda Console)", "body": "<p>hi @Prashanth kumar did u mean something as this :\ndef get_secret():</p>\n<pre><code>secret_name = &quot;MySecretForRedshift&quot;\nregion_name = &quot;us-east-1&quot;\n\n# Create a Secrets Manager client\nsession = boto3.session.Session()\nclient = session.client(\n    service_name='secretsmanager',\n    region_name=region_name\n)\n\n# In this sample we only handle the specific exceptions for the 'GetSecretValue' API.\n# See https://docs.aws.amazon.com/secretsmanager/latest/apireference/API_GetSecretValue.html\n# We rethrow the exception by default.\n\ntry:\n    get_secret_value_response = client.get_secret_value(\n        SecretId=secret_name\n    )\nexcept ClientError as e:\n    if e.response['Error']['Code'] == 'DecryptionFailureException':\n        # Secrets Manager can't decrypt the protected secret text using the provided KMS key.\n        # Deal with the exception here, and/or rethrow at your discretion.\n        raise e\n    elif e.response['Error']['Code'] == 'InternalServiceErrorException':\n        # An error occurred on the server side.\n        # Deal with the exception here, and/or rethrow at your discretion.\n        raise e\n    elif e.response['Error']['Code'] == 'InvalidParameterException':\n        # You provided an invalid value for a parameter.\n        # Deal with the exception here, and/or rethrow at your discretion.\n        raise e\n    elif e.response['Error']['Code'] == 'InvalidRequestException':\n        # You provided a parameter value that is not valid for the current state of the resource.\n        # Deal with the exception here, and/or rethrow at your discretion.\n        raise e\n    elif e.response['Error']['Code'] == 'ResourceNotFoundException':\n        # We can't find the resource that you asked for.\n        # Deal with the exception here, and/or rethrow at your discretion.\n        raise e\nelse:\n    # Decrypts secret using the associated KMS CMK.\n    # Depending on whether the secret is a string or binary, one of these fields will be populated.\n    if 'SecretString' in get_secret_value_response:\n        secret = json.loads(get_secret_value_response['SecretString'])\n    else:\n        secret = json.loads(base64.b64decode(get_secret_value_response['SecretBinary']))\nreturn secret\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 8156810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5266651514d744147a1a01cbbcb92a9?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/8156810/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21977, "favorite_count": 4, "answer_count": 5, "score": 15, "last_activity_date": 1595231980, "creation_date": 1568840956, "question_id": 58000751, "link": "https://stackoverflow.com/questions/58000751/using-aws-secrets-manager-with-python-lambda-console", "title": "Using AWS Secrets Manager with Python (Lambda Console)", "body": "<p>I am attempting to use Secrets Manager a Lambda function in AWS. Secrets a manager is used to store database credentials to Snowflake (username, password).</p>\n\n<p>I managed to set up a secret in Secrets Manager which contains several key/value pairs (e.g. one for username, another for password).</p>\n\n<p>Now I am trying to refer to these values in my Python function code. AWS documentation kindly provides the following snippet:</p>\n\n<pre><code>import boto3\nimport base64\nfrom botocore.exceptions import ClientError\n\n\ndef get_secret():\n\n    secret_name = \"MY/SECRET/NAME\"\n    region_name = \"us-west-2\"\n\n    # Create a Secrets Manager client\n    session = boto3.session.Session()\n    client = session.client(\n        service_name='secretsmanager',\n        region_name=region_name\n    )\n\n    # In this sample we only handle the specific exceptions for the 'GetSecretValue' API.\n    # See https://docs.aws.amazon.com/secretsmanager/latest/apireference/API_GetSecretValue.html\n    # We rethrow the exception by default.\n\n    try:\n        get_secret_value_response = client.get_secret_value(\n            SecretId=secret_name\n        )\n    except ClientError as e:\n        if e.response['Error']['Code'] == 'DecryptionFailureException':\n            # Secrets Manager can't decrypt the protected secret text using the provided KMS key.\n            # Deal with the exception here, and/or rethrow at your discretion.\n            raise e\n        elif e.response['Error']['Code'] == 'InternalServiceErrorException':\n            # An error occurred on the server side.\n            # Deal with the exception here, and/or rethrow at your discretion.\n            raise e\n        elif e.response['Error']['Code'] == 'InvalidParameterException':\n            # You provided an invalid value for a parameter.\n            # Deal with the exception here, and/or rethrow at your discretion.\n            raise e\n        elif e.response['Error']['Code'] == 'InvalidRequestException':\n            # You provided a parameter value that is not valid for the current state of the resource.\n            # Deal with the exception here, and/or rethrow at your discretion.\n            raise e\n        elif e.response['Error']['Code'] == 'ResourceNotFoundException':\n            # We can't find the resource that you asked for.\n            # Deal with the exception here, and/or rethrow at your discretion.\n            raise e\n    else:\n        # Decrypts secret using the associated KMS CMK.\n        # Depending on whether the secret is a string or binary, one of these fields will be populated.\n        if 'SecretString' in get_secret_value_response:\n            secret = get_secret_value_response['SecretString']\n        else:\n            decoded_binary_secret = base64.b64decode(get_secret_value_response['SecretBinary'])\n\n    # Your code goes here.\n</code></pre>\n\n<p>Later in my <code>def lambda_handler(event, context)</code> function, I have the following snippet to establish a connection to my database:</p>\n\n<pre><code>        conn = snowflake.connector.connect(\n            user=USERNAME,\n            password=PASSWORD,\n            account=ACCOUNT,\n            warehouse=WAREHOUSE,\n            role=ROLE\n            )\n</code></pre>\n\n<p>However, I am unable to figure out how to use the <code>get_secret()</code> function to return values for parameters like <code>USERNAME</code> or <code>PASSWORD</code>. </p>\n\n<p>How can this be accomplished? Thank you for the help!</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5", "qinputdialog"], "comments": [{"owner": {"reputation": 27, "user_id": 5227425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKvP3.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/5227425/kris"}, "edited": false, "score": 0, "creation_date": 1568845835, "post_id": 58000750, "comment_id": 102408617, "body": "I should add that a really <i>perfect</i> solution would also allow to directly access all single parts of the selected row from the result, e.g. to further work with the information that the selected name was Joe (field 0) who is 30 years old (field 1). But if that is not possible a &quot;combined display&quot; version (in one string) also works good as the fallback... ;)"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1568847352, "post_id": 58000750, "comment_id": 102408998, "body": "<code>name, years, gender = &#39;Ryan 24 m&#39;.split()</code>"}, {"owner": {"reputation": 27, "user_id": 5227425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKvP3.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/5227425/kris"}, "reply_to_user": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1568974632, "post_id": 58000750, "comment_id": 102455115, "body": "Yes, of course, but that&#39;s a hack with respect to &quot;real&quot; separate fields... ;) E.g. as soon as &quot;Sara Jean&quot; joins us, we have a problem... While we can technically solve that, introducing specific delimiter characters, it would not be a very elegant solution to make these visible to the users of the graphical dialog... But thanks anyway."}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 1, "creation_date": 1568978748, "post_id": 58000750, "comment_id": 102457146, "body": "1. <code>_lst = [ x  for x in &#39;Sara Jean 24 m&#39;.split() ]</code>  2. <code>name, years, gender = [_lst if len(_lst)==3 else [_lst[0]+&#39; &#39;+_lst[1], _lst[-2], _lst[-1]]][0]</code>"}, {"owner": {"reputation": 27, "user_id": 5227425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKvP3.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/5227425/kris"}, "reply_to_user": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1568981498, "post_id": 58000750, "comment_id": 102458529, "body": "Yes, I see your point and you&#39;re basically right, that every problem can be fixed (next problem can be fixed and next and so on), but that was not my point. I just wanted to show that the design of the approach itself is a bit hackish in comparison to real separated fields, like in a nested list. In this case at some point there is e.g. a string like &quot;Theodor Karl Ludwig 101 m&quot; and we have to implement the next fix for the last fix... The solution gets more and more complicated."}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 1, "creation_date": 1568982287, "post_id": 58000750, "comment_id": 102458935, "body": "name, years, gender = [_lst if len(_lst)==3 else [&#39; &#39;.join(_lst[0:-2]), _lst[-2], _lst[-1]]][0]"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5227425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKvP3.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/5227425/kris"}, "edited": false, "score": 0, "creation_date": 1568844756, "post_id": 58001305, "comment_id": 102408365, "body": "That&#39;s a nice idea, thanks! Though not really keeping data in multiple fields, like in a table / nested list, it&#39;s an elegant trick to solve it using the normal string way."}, {"owner": {"reputation": 27, "user_id": 5227425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKvP3.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/5227425/kris"}, "edited": false, "score": 0, "creation_date": 1569191656, "post_id": 58001305, "comment_id": 102505701, "body": "Seems to be the answer for QInputDialog, though I would have hoped for real colums, but one can work with this. Probably for something like real tables (real lists of lists) other widgets / other approaches are needed..."}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 1, "last_activity_date": 1568844309, "creation_date": 1568844309, "answer_id": 58001305, "question_id": 58000750, "link": "https://stackoverflow.com/questions/58000750/is-it-possible-to-use-qinputdialog-with-nested-list-or-something-like-that/58001305#58001305", "title": "Is it possible to use QInputDialog with nested list or something like that?", "body": "<p>The <code>join()</code> method takes all items in an iterable and joins them into one string.</p>\n\n<p>Syntax: <code>string.join(iterable)</code></p>\n\n<pre><code>import sys\nfrom PyQt5.QtCore import QTimer\nfrom PyQt5 import QtWidgets\nfrom PyQt5.QtWidgets import QLineEdit, QInputDialog, QLabel, QVBoxLayout\n\n\nclass PopupDialog(QtWidgets.QDialog):\n    def __init__(self):\n        super(PopupDialog, self).__init__()\n        self.selected_item = None\n        layout = QtWidgets.QFormLayout()\n        self.setLayout(layout)\n        self.setWindowTitle(\"New Popup\")\n        self.setMinimumWidth(400)\n\n#        items = (['Ryan', 24, 'm'], ['Lisa', 22, 'f'], ['Joe', 30, 'm'])\n        items = (['Ryan', '24', 'm'], ['Lisa', '22', 'f'], ['Joe', '30', 'm'])\n        items = [ \" \".join(item) for item in items ]                              # &lt;&lt;&lt;-----&lt;\n        item, okPressed = QInputDialog.getItem(self, \"Get item\",\n                          \"Color:\", items, 0, False)\n        if okPressed and item:\n            self.selected_item = item\n\n\nclass MainWindow(QtWidgets.QWidget):\n    def __init__(self):\n        super(MainWindow, self).__init__()\n        self.setMinimumWidth(600)\n        self.setWindowTitle(\"Main Window\")\n        self.le = QtWidgets.QLineEdit()\n        button = QtWidgets.QPushButton(\"Select...\")\n        button.clicked.connect(self.get_input)\n        layout = QtWidgets.QHBoxLayout()\n        layout.addWidget(self.le)\n        layout.addWidget(button)\n        self.setLayout(layout)\n\n    def get_input(self):\n        popup = PopupDialog()\n        print(\"got selection data: \", popup.selected_item)\n        self.le.setText(popup.selected_item)\n\nif __name__ == '__main__':\n    app = QtWidgets.QApplication(sys.argv)\n    window = MainWindow()\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yJq3J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yJq3J.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 27, "user_id": 5227425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKvP3.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/5227425/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 58001305, "answer_count": 1, "score": 0, "last_activity_date": 1568844309, "creation_date": 1568840950, "last_edit_date": 1568841505, "question_id": 58000750, "link": "https://stackoverflow.com/questions/58000750/is-it-possible-to-use-qinputdialog-with-nested-list-or-something-like-that", "title": "Is it possible to use QInputDialog with nested list or something like that?", "body": "<p>All examples or documentation on PyQt5 QInputDialog I found, used simple classic lists limited to only one item per \"row\" (like in my code example (\"Red\",\"Blue\" or \"Green\")).</p>\n\n<p>I am searching for a good way to build a more detailed multidimensional list, like a table, where the user gets to see and select the whole row (with multiple values as one item) in the input dialog instead of a single value.</p>\n\n<p>For example a nested list like that:\n[['Ryan', 24, 'm'], ['Lisa', 22, 'f'], ['Joe', 30, 'm']]</p>\n\n<p>--> Imagine each one of the three lists in the list should be one row (entry) in the QInputDialog that can be selected. Like in a table with a checkbox for each row.</p>\n\n<p>Is something like that possible? Anyone knows?</p>\n\n<pre><code>#The normal (limited) version with a simple list I am referring to looks like that:\ndef getChoice(self):\n    itemlist = (\"Red\",\"Blue\",\"Green\")\n    item, okPressed = QInputDialog.getItem(self, \"Get item\",\"Color:\", itemlist, 0, False)\n    if okPressed and item:\n        print(item)\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1568840973, "post_id": 58000730, "comment_id": 102407278, "body": "what version of Python are you using? I just tired your code in Python 3.7, and it works properly."}, {"owner": {"reputation": 601, "user_id": 10583312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee33afe3dffa4da166b5c9b4793c9fa5?s=128&d=identicon&r=PG&f=1", "display_name": "Math Avengers", "link": "https://stackoverflow.com/users/10583312/math-avengers"}, "reply_to_user": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1568841292, "post_id": 58000730, "comment_id": 102407393, "body": "IDLE that runs Python 3, but the python launcher runs Python 2. Problem solved. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 1, "last_activity_date": 1568841029, "creation_date": 1568841029, "answer_id": 58000765, "question_id": 58000730, "link": "https://stackoverflow.com/questions/58000730/nameerror-after-prompting-player-to-enter-a-guess/58000765#58000765", "title": "NameError after prompting player to enter a guess", "body": "<p>The problem is that you are using Python 2, so instead of <code>input</code> use <code>raw_input</code> as follows:</p>\n\n<pre><code>player_guess_letter= raw_input(\"Guess a letter:\")\n</code></pre>\n\n<p>In Python 2, <code>input()</code> is equivalent to <code>eval(raw_input())</code>. Thus, it is trying to eval the value you entered. See more in <a href=\"https://docs.python.org/2/library/functions.html#input\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n\n<p>In Python 3, you won't have this issue.</p>\n"}], "owner": {"reputation": 601, "user_id": 10583312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee33afe3dffa4da166b5c9b4793c9fa5?s=128&d=identicon&r=PG&f=1", "display_name": "Math Avengers", "link": "https://stackoverflow.com/users/10583312/math-avengers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 58000765, "answer_count": 1, "score": 1, "last_activity_date": 1568841055, "creation_date": 1568840846, "last_edit_date": 1568841055, "question_id": 58000730, "link": "https://stackoverflow.com/questions/58000730/nameerror-after-prompting-player-to-enter-a-guess", "title": "NameError after prompting player to enter a guess", "body": "<p>I am trying to create a word puzzle, but I got a NameError after I prompt the player to enter a guess.</p>\n\n<p>My code:</p>\n\n<pre><code>.\n.\n.\nprint(\"The word is something like \" + guess)\nplayer_guess_letter= input(\"Guess a letter:\")\n</code></pre>\n\n<p>After I enter a guess, say \"f\" in the error \"NameError: name 'f' is not defined\".</p>\n"}, {"tags": ["python", "cplex", "ray", "docplex"], "comments": [{"owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "edited": false, "score": 1, "creation_date": 1568911190, "post_id": 58000663, "comment_id": 102434850, "body": "I have never heard of or used <code>ray</code> before, but your code snippet appears to be incomplete. First, there is no <code>import ray</code>. Second, according to the quick start documentation <a href=\"https://github.com/ray-project/ray\" rel=\"nofollow noreferrer\">here</a>, don&#39;t you need a <code>ray.get()</code> call? Finally, I wonder if there is a way for you to create the constraint expressions in parallel and then just call <code>m.add_constraints</code> once (in a batch)?"}, {"owner": {"reputation": 955, "user_id": 2690677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8466e82d48871df5979a9da63ed114d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sledge", "link": "https://stackoverflow.com/users/2690677/sledge"}, "reply_to_user": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "edited": false, "score": 0, "creation_date": 1568912131, "post_id": 58000663, "comment_id": 102435219, "body": "I just updated the code snippet to include the <code>import ray</code> statement.  I&#39;m not sure how the <code>ray.get()</code> command comes into play when you have N threads operating on a shared object.  The last suggestion is a good one.  I&#39;ll try it out ASAP."}], "answers": [{"tags": [], "owner": {"reputation": 5225, "user_id": 11260716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a6570e104d267276655b7ca07e08a8?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Junglas", "link": "https://stackoverflow.com/users/11260716/daniel-junglas"}, "is_accepted": false, "score": 0, "last_activity_date": 1582895880, "creation_date": 1582895880, "answer_id": 60452602, "question_id": 58000663, "link": "https://stackoverflow.com/questions/58000663/using-python-ray-with-cplex-model-object/60452602#60452602", "title": "Using Python Ray With CPLEX Model Object", "body": "<p>The <code>Model</code> object is not designed to be used in parallel. You cannot add constraints from multiple threads at the same time. This will result in undefined behavior. You will have to at least a lock to make sure only thread at a time adds constraints.</p>\n\n<p>Note that parallel model building may not be a good idea at all: the order of constraints will be more or less random. On the other hand, behavior of the solver may depend on the order of constraints (this is called performance variability). So you may have a hard time reproducing certain results/behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 548, "user_id": 9427975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc54dfe90c8ac7fb1d4124662482a9b6?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Couronne", "link": "https://stackoverflow.com/users/9427975/philippe-couronne"}, "is_accepted": false, "score": 0, "last_activity_date": 1583078863, "creation_date": 1583078863, "answer_id": 60476999, "question_id": 58000663, "link": "https://stackoverflow.com/questions/58000663/using-python-ray-with-cplex-model-object/60476999#60476999", "title": "Using Python Ray With CPLEX Model Object", "body": "<p>I understand the primary issue was the performance of module building. \nFrom the code you sent,  I have two suggestions to address this:</p>\n\n<ol>\n<li>post constraints in batches, that is store constraints in a list and add them once using Model.add_constraints(), this should be more efficient than adding them one at a time.</li>\n<li>experiment with Model.dotf() (functional-style scalar product). It avoids building auxiliary lists, passing instead a function of the key , returning the coefficient.\nThis method is new in Docplex version 2.12.\nFor example, assuming a list of 3 variables:</li>\n</ol>\n\n<blockquote>\n  <p>abc = m.integer_var_list(3, name=[\"a\", \"b\", \"c\"]) m.dotf(abc, lambda\n  k: k+2)</p>\n  \n  <blockquote>\n    <blockquote>\n      <p>docplex.mp.LinearExpression(a+2b+3c)</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>Model.dotf() is usually faster than Model.dot()</p>\n"}], "owner": {"reputation": 955, "user_id": 2690677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8466e82d48871df5979a9da63ed114d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sledge", "link": "https://stackoverflow.com/users/2690677/sledge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1583078863, "creation_date": 1568840443, "last_edit_date": 1568911943, "question_id": 58000663, "link": "https://stackoverflow.com/questions/58000663/using-python-ray-with-cplex-model-object", "title": "Using Python Ray With CPLEX Model Object", "body": "<p>I am trying to parallelize an interaction with a Python object that is computationally expensive.  I would like to use Ray to do this but so far my best efforts have failed.</p>\n\n<p>The object is a CPLEX model object and I'm trying to add a set of constraints for a list of conditions.</p>\n\n<p>Here's my setup:</p>\n\n<pre><code>import numpy as np\nimport docplex.mp.model as cpx\nimport ray\n\nm = cpx.Model(name=\"mymodel\")\n\ndef mask_array(arr, mask_val):\n    array_mask = np.argwhere(arr == mask_val)\n    arg_slice = [i[0] for i in array_mask]\n    return arg_slice\n\nweeks = [1,3,7,8,9]\nconst = 1.5\nr = rate = np.array(df['r'].tolist(), dtype=np.float)\nx1 = m.integer_var_list(data_indices, lb=lower_bound, ub=upper_bound)\nx2 = m.dot(x1, r)\n\n@ray.remote\ndef add_model_constraint(m, x2, x2sum, const):\n    m.add_constraint(x2sum &lt;= x2*const)\n    return m\n\nx2sums = []\nfor w in weeks:\n    arg_slice = mask_array(x2, w)\n    x2sum = m.dot([x2[i] for i in arg_slice], r[arg_slice])\n    x2sums.append(x2sum)\n\n#: this is the expensive part \nfor x2sum in x2sums:\n    add_model_constraint.remote(m, x2, x2sum, const)\n</code></pre>\n\n<p>In a nutshell, what I'm doing is creating a model object, some variables, and then looping over a set of weeks in order to build a constraint. I subset my variable, compute some dot products and apply the constraint. I would like to be able to create the constraint in parallel because it takes a while but so far my code just hangs and I'm not sure why.</p>\n\n<p>I don't know if I should return the model object in my function because by default the m.add_constraint method modifies the object in place.  But at the same time I know Ray returns references to the remote value so yea, not sure what's supposed to happen there.</p>\n\n<p>Is this at all a valid use of ray?  It it reasonable to expect to be able to modify a CPLEX object in this way (or any other arbitrary python object)?  </p>\n\n<p>I am new to Ray so I may be structuring this all wrong, or maybe this will never work for X, Y, and Z reason which would also be good to know.</p>\n"}, {"tags": ["python", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 6970, "user_id": 7623856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bab5bf7bb88056bdeaf4b26d2bfce16?s=128&d=identicon&r=PG&f=1", "display_name": "Belayer", "link": "https://stackoverflow.com/users/7623856/belayer"}, "is_accepted": true, "score": 0, "last_activity_date": 1610325421, "last_edit_date": 1610325421, "creation_date": 1568874239, "answer_id": 58004859, "question_id": 58000659, "link": "https://stackoverflow.com/questions/58000659/i-have-a-table-with-a-status-however-i-want-it-to-change-status-every-10-minutes/58004859#58004859", "title": "I have a table with a status however I want it to change status every 10 minutes. I&#39;m using Postgresql", "body": "<p>I can see what you're after although there is a big omission: What happens when the status has reached 'Z' and it is time to update? More on that later.</p>\n<p>Your request has 2 components, actually getting a process to run and a rolling update procedure (script) for the status. Well, Postgres has no native functionally for initiating a script. You'll have to setup a cron job, or an entry is what ever job scheduler you have. The update process is not all that difficult, except for the undefined 'Z' status problem. (So when that happens I'll just repeat the A-Z extending the code length (sort of like excel names columns).</p>\n<p>The basic update needed is to simply add 1 to the current value. But of course the statement &quot; 'A'+1 &quot; doesn't work, but the result can be obtained with the <a href=\"https://www.postgresql.org/docs/9.6/functions-string.html\" rel=\"nofollow noreferrer\">CHR and ASCII</a> functions. Chr(ascii('A')+1)) effectively accomplishes that so your update could be accomplished as:</p>\n<pre><code>Update table_name set status = chr(ascii(status)+1);\n</code></pre>\n<p>However, that fails once the status reaches 'Z'. Well it doesn't fail in the since of generating an error, but it produces '['. The following script produces 'AA' in the above case, and each time status reaches '...Z' the next status becomes '...AA'.</p>\n<pre><code>--- setup \ndrop table if exists current_stat;\ncreate table current_stat(id serial,status text,constraint status_alpha_ck check( status ~ '^[A-Z]+'));\ninsert into current_stat(status) values (null), ('A'), ('B'), ('Y'), ('Z'), ('AA'), ('ABZ')\n\n--- Update SQL\nwith curr_stat as\n   ( select id, status\n          , chr(ascii(substring(status,char_length(status),1))+1) nstat\n          , char_length(status) lstat from current_stat)  \nupdate current_stat cs\n  set status = ( select case when status is null or lstat &lt; 1     then 'A'\n                             when substring(status,lstat,1) = 'Z' then overlay( status placing 'AA' from lstat for 2)\n                             else overlay( status placing nstat from lstat for 1)\n                        end\n                   from curr_stat\n               where cs.id = curr_stat.id\n             );\n\nselect * from current_stat;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10157169, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RlFjgQsueiM/AAAAAAAAAAI/AAAAAAAACcc/7vKP6SlXpH4/photo.jpg?sz=128", "display_name": "Ant&#243;nio Lussati", "link": "https://stackoverflow.com/users/10157169/ant%c3%b3nio-lussati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58004859, "answer_count": 1, "score": -4, "last_activity_date": 1610325421, "creation_date": 1568840391, "last_edit_date": 1568844009, "question_id": 58000659, "link": "https://stackoverflow.com/questions/58000659/i-have-a-table-with-a-status-however-i-want-it-to-change-status-every-10-minutes", "title": "I have a table with a status however I want it to change status every 10 minutes. I&#39;m using Postgresql", "body": "<p>I want to change the value of a table from one status to another type <code>'A\u2019</code> and after 10 minutes I want it to become <code>'B'</code> postgres with python.</p>\n"}, {"tags": ["python", "python-import", "importerror"], "comments": [{"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1568842296, "post_id": 58000647, "comment_id": 102407714, "body": "Run <code>pip install pylint</code> and then try again and troubleshoot pylint in visual studio."}, {"owner": {"reputation": 473, "user_id": 11618797, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mtLsenvRC1Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reB7oFAKDsDEnnQ80ZQ1XOOAU7kwA/mo/photo.jpg?sz=128", "display_name": "Sachin Yadav", "link": "https://stackoverflow.com/users/11618797/sachin-yadav"}, "edited": false, "score": 0, "creation_date": 1568997349, "post_id": 58000647, "comment_id": 102466657, "body": "How does your directory tree structure look like ? Do you have sub directories ?"}], "answers": [{"tags": [], "owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "is_accepted": false, "score": 0, "last_activity_date": 1568841017, "creation_date": 1568841017, "answer_id": 58000761, "question_id": 58000647, "link": "https://stackoverflow.com/questions/58000647/no-module-named-arcade/58000761#58000761", "title": "No Module named arcade", "body": "<p>I used to have the same problem. \nThe solution in my case was installing modules by running\n<code>python -m pip install &lt;module&gt;</code> instead of <code>pip install &lt;module&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11584752, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1jg6rOJUlvI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcsaBaVe2Ov0QwF_n4FL70nmICtbA/mo/photo.jpg?sz=128", "display_name": "Mohammad Mahmoudi", "link": "https://stackoverflow.com/users/11584752/mohammad-mahmoudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1613475075, "creation_date": 1613475075, "answer_id": 66223565, "question_id": 58000647, "link": "https://stackoverflow.com/questions/58000647/no-module-named-arcade/66223565#66223565", "title": "No Module named arcade", "body": "<p>I have the same problem in the jupyter notebook and I have solved it as follow:</p>\n<pre><code>pip install notebook\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 13752012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67b2058b8ad7440173d038f280f98f30?s=128&d=identicon&r=PG&f=1", "display_name": "manarinian", "link": "https://stackoverflow.com/users/13752012/manarinian"}, "is_accepted": false, "score": 0, "last_activity_date": 1613477174, "creation_date": 1613477174, "answer_id": 66224014, "question_id": 58000647, "link": "https://stackoverflow.com/questions/58000647/no-module-named-arcade/66224014#66224014", "title": "No Module named arcade", "body": "<p>Try running these commands:</p>\n<pre><code>pip3 install arcade\nsudo pip3 intall arcade\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11979988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iRjWKoQwKxk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLU55KXuTNaj68JEIOF_eY4_VKZA/photo.jpg?sz=128", "display_name": "Jeremy Maldonado", "link": "https://stackoverflow.com/users/11979988/jeremy-maldonado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1797, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1613477174, "creation_date": 1568840303, "question_id": 58000647, "link": "https://stackoverflow.com/questions/58000647/no-module-named-arcade", "title": "No Module named arcade", "body": "<p>For class I am using python arcade. I installed it with <code>pip install arcade</code>. When I attempt to import it with <code>import arcade</code> it pops up <code>ModuleNotFoundError: No module named 'arcade'</code>. </p>\n\n<p>Ive uninstalled and reinstalled arcade. It shows up when I enter <code>pip freeze</code>. I am using VS Code on windows 10.\nWhen I look in the 'errors' tab in VS Code it says \"Unable to import 'arcade' pylint(import-error)[3,1]\"</p>\n"}, {"tags": ["python", "opengl", "vispy"], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 13312401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6363516651e864349ce5029dc69b5811?s=128&d=identicon&r=PG&f=1", "display_name": "Skryge", "link": "https://stackoverflow.com/users/13312401/skryge"}, "is_accepted": false, "score": 0, "last_activity_date": 1587123071, "last_edit_date": 1587123071, "creation_date": 1587084488, "answer_id": 61262415, "question_id": 58000631, "link": "https://stackoverflow.com/questions/58000631/vispy-display-on-second-screen/61262415#61262415", "title": "Vispy Display on Second Screen", "body": "<p>You can specify canvas size and position by doing :</p>\n\n<pre><code>from vispy import app\npos_x, pos_y, width, height = 200, 200, 200, 200 #example\ncanvas = app.Canvas(size=(width, height), position=(pos_x, pos_y))\ncanvas.show()\napp.run()\n</code></pre>\n\n<p>Have you tried to specify the monitor by adjusting the position ?</p>\n"}], "owner": {"reputation": 493, "user_id": 3054726, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d0a164722fa40106d2aaee5357bf6962?s=128&d=identicon&r=PG&f=1", "display_name": "jdbrody", "link": "https://stackoverflow.com/users/3054726/jdbrody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1587123071, "creation_date": 1568840201, "last_edit_date": 1568841960, "question_id": 58000631, "link": "https://stackoverflow.com/questions/58000631/vispy-display-on-second-screen", "title": "Vispy Display on Second Screen", "body": "<p>I am using Vispy to display some real-time signals, based on the example on the webpage.  In particular I'm using app.Canvas to create and update the display.</p>\n\n<p>Is there a way to specify geometry information when then canvas is created?  Ideally I'd like to specify the size, coordinates and monitor for the new window.  But specifying the monitor is the most important part.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1568841040, "post_id": 58000630, "comment_id": 102407303, "body": "look at the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.melt.html\" rel=\"nofollow noreferrer\">melt</a> method"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 2, "creation_date": 1568841388, "post_id": 58000630, "comment_id": 102407435, "body": "You would want <code>alarms.Error_Id.eq(1).astype(int)</code>. Notice you are trying to change the column to an integer with <code>astype</code>, not call <code>.bool</code>. But if you just have 4 errors, you are probably looking for <code>pd.get_dummies(alarms.Error_Id)</code> which you can concatenate back to the original."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1568841789, "post_id": 58000630, "comment_id": 102407581, "body": "For instance, see: <a href=\"https://stackoverflow.com/questions/23208745/adding-dummy-columns-to-the-original-dataframe\" title=\"adding dummy columns to the original dataframe\">stackoverflow.com/questions/23208745/&hellip;</a>"}], "owner": {"reputation": 19, "user_id": 9674800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f6877d0d338032aed94518aa610f5a?s=128&d=identicon&r=PG&f=1", "display_name": "sroverto", "link": "https://stackoverflow.com/users/9674800/sroverto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568841488, "creation_date": 1568840197, "last_edit_date": 1568841488, "question_id": 58000630, "link": "https://stackoverflow.com/questions/58000630/add-a-column-to-a-dataframe-if-a-condition-is-satisfied-using-isin-and-bool", "title": "Add a column to a dataframe if a condition is satisfied using isin and bool()", "body": "<p>I have some problems with writing the right code to obtain the result that I want.\nI have a df composed as follows: </p>\n\n<pre><code>df= ['Date','Error_Id','State','Alarm','Group','Production_type','Error_frequency']\n</code></pre>\n\n<p>There are 4 types of errors in the df (e.g. 1,2,3,4).</p>\n\n<p>I would like to add a column of booleans for each error, with a 1 if the error is present in the row and a 0 if not.</p>\n\n<p>I have tried to do this with the if condition, the isin() method and the bool() method but as of now I obtained only errors.\nHereafter the code I tried to use for the isin() and bool() methods</p>\n\n<pre><code>test = alarms[alarms.Error_Id.isin([1])].bool()\n</code></pre>\n\n<p>I also thought of creating a new df with this and the use it to for comparison with the original df but I think that this is not the right way to do it.</p>\n\n<p>Concerning the Error message with the isin() and bool() methods it is the following:</p>\n\n<pre><code>ValueError: The truth value of a DataFrame is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1568840147, "post_id": 58000579, "comment_id": 102407007, "body": "I&#39;m not sure I understand, you mean be able to save a variables based on iterable performance criteria?"}, {"owner": {"reputation": 2703, "user_id": 3849781, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/23e4b8c555049a94eddbfcc05ec4ae69?s=128&d=identicon&r=PG&f=1", "display_name": "YohanRoth", "link": "https://stackoverflow.com/users/3849781/yohanroth"}, "reply_to_user": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1568841412, "post_id": 58000579, "comment_id": 102407450, "body": "@CeliusStingher no it means I do not want to call different functions for different metrics, but rather call one function with variable argument."}, {"owner": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "edited": false, "score": 0, "creation_date": 1568858231, "post_id": 58000579, "comment_id": 102410896, "body": "I think it doesn&#39;t look ugly necessarily... how could this be made more elegant if it&#39;s already wrapped in a regression_score and then neatly called in your actual code?"}, {"owner": {"reputation": 3426, "user_id": 11651301, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfU_X_4xhSA/AAAAAAAAAAI/AAAAAAAAAyQ/2vyFdU6xVnM/photo.jpg?sz=128", "display_name": "Parthasarathy Subburaj", "link": "https://stackoverflow.com/users/11651301/parthasarathy-subburaj"}, "edited": false, "score": 0, "creation_date": 1569054906, "post_id": 58000579, "comment_id": 102478190, "body": "Hi, @YohanRoth, if you think the below answer was appropriate, I kindly request you to accept it as a verified answer, since it helps other users who might look into this in the future."}], "answers": [{"tags": [], "owner": {"reputation": 3426, "user_id": 11651301, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfU_X_4xhSA/AAAAAAAAAAI/AAAAAAAAAyQ/2vyFdU6xVnM/photo.jpg?sz=128", "display_name": "Parthasarathy Subburaj", "link": "https://stackoverflow.com/users/11651301/parthasarathy-subburaj"}, "is_accepted": true, "score": 1, "last_activity_date": 1568877679, "creation_date": 1568877679, "answer_id": 58005739, "question_id": 58000579, "link": "https://stackoverflow.com/questions/58000579/regression-score-with-metric-as-an-argument-in-sklearn/58005739#58005739", "title": "Regression score with metric as an argument in sklearn", "body": "<p>You can make use of <code>getattr</code> to load the required function. Please use the modified function below:</p>\n\n<pre><code>import sklearn.metrics\n\ndef regression_score(y_true, y_pred, metric):\n    function = getattr(sklearn.metrics, metric)\n    return function(y_true, y_pred)\n</code></pre>\n\n<blockquote>\n  <p>SAMPLE OUTPUT</p>\n</blockquote>\n\n<pre><code>import numpy as np\ny_true = np.array([2,3,4,1])\ny_pred = np.array([1,3,1,2])\n\nregression_score(y_true,y_pred,\"mean_absolute_error\")\n1.25\n\nregression_score(y_true,y_pred,\"mean_squared_error\")\n2.75\n</code></pre>\n\n<p>So basically you just have one function without the <code>if</code> conditions which will do your job.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 2703, "user_id": 3849781, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/23e4b8c555049a94eddbfcc05ec4ae69?s=128&d=identicon&r=PG&f=1", "display_name": "YohanRoth", "link": "https://stackoverflow.com/users/3849781/yohanroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58005739, "answer_count": 1, "score": 1, "last_activity_date": 1568877679, "creation_date": 1568839893, "question_id": 58000579, "link": "https://stackoverflow.com/questions/58000579/regression-score-with-metric-as-an-argument-in-sklearn", "title": "Regression score with metric as an argument in sklearn", "body": "<p>I am looking for sklearn solution to get regression score without knowing metric beforehand so I can do something like</p>\n\n<pre><code>score = regression_score(y_true, y_pred, metric=\"mean_squared_error\")\n</code></pre>\n\n<p>right now I am using multiple if statements and calls to different functions that looks ugly, e.g</p>\n\n<pre><code>if metric == \"mean_squared_error\":\n   score = sklearn.metrics.mean_squared_error(y_true, y_pred)\nif metric == \"neg_mean_squared_error:\n   ...\n</code></pre>\n"}, {"tags": ["python", "python-requests", "spnego"], "comments": [{"owner": {"reputation": 431, "user_id": 10249632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JEjFG.png?s=128&g=1", "display_name": "VictorDDT", "link": "https://stackoverflow.com/users/10249632/victorddt"}, "edited": false, "score": 0, "creation_date": 1568961175, "post_id": 58000573, "comment_id": 102448536, "body": "I try to use gssapi module (Windows 10) and have got the same problem."}], "owner": {"reputation": 903, "user_id": 659922, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/fe9aab6a750fe881cc58511079ff9928?s=128&d=identicon&r=PG", "display_name": "J.E.Y", "link": "https://stackoverflow.com/users/659922/j-e-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1568839826, "creation_date": 1568839826, "question_id": 58000573, "link": "https://stackoverflow.com/questions/58000573/dll-failed-to-load-issue-when-using-requests-gssapi-python", "title": "DLL failed to load issue when using requests_gssapi, Python", "body": "<p>In my Python script I need gssapi as authentication mechanism when applying requests package. </p>\n\n<p>It came to my attention that package requests_gssapi seems promising for my purpose. </p>\n\n<p>After \"pip install requests_gssapi\" and import it I got this:</p>\n\n<pre><code>&gt;&gt;&gt; from requests_gssapi import HTTPSPNEGOAuth\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\opt\\Python36\\lib\\site-packages\\requests_gssapi\\__init__.py\", line 17, in &lt;module&gt;\n    from .gssapi_ import HTTPSPNEGOAuth, REQUIRED, OPTIONAL, DISABLED  # noqa\n  File \"C:\\opt\\Python36\\lib\\site-packages\\requests_gssapi\\gssapi_.py\", line 6, in &lt;module&gt;\n    import gssapi\n  File \"C:\\opt\\Python36\\lib\\site-packages\\gssapi\\__init__.py\", line 29, in &lt;module&gt;\n    from gssapi.raw.types import NameType, RequirementFlag, AddressType  # noqa\n  File \"C:\\opt\\Python36\\lib\\site-packages\\gssapi\\raw\\__init__.py\", line 50, in &lt;module&gt;\n    from gssapi.raw.creds import *  # noqa\nImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p>To me it seemed that extra package needs to be installed, but how?</p>\n\n<p>Please help, thanks</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 295, "user_id": 9101104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92dd92412943a92bad046921d4dc5c27?s=128&d=identicon&r=PG&f=1", "display_name": "Vishwas", "link": "https://stackoverflow.com/users/9101104/vishwas"}, "edited": false, "score": 0, "creation_date": 1568840001, "post_id": 58000521, "comment_id": 102406958, "body": "Your same code working for me and got the same output as below answers.            Name\tjobs_done 0\ttom\t[coder, cook] 1\tnick\t[coder, cop] 2\tjuli\t[coder]"}], "answers": [{"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 0, "last_activity_date": 1568839841, "creation_date": 1568839841, "answer_id": 58000575, "question_id": 58000521, "link": "https://stackoverflow.com/questions/58000521/create-a-new-pandas-column-that-is-a-list-of-lists/58000575#58000575", "title": "Create a new pandas column that is a list of lists", "body": "<p>You could use a dictionary to map the lists:</p>\n\n<pre><code>lookup = {key : value for value, key in data1}\ndfA['job_id'] = dfA.job_id.apply(lambda x : [lookup[v] for v in x])\nprint(dfA)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>   Name         job_id\n0   tom  [coder, cook]\n1  nick   [coder, cop]\n2  juli        [coder]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "is_accepted": true, "score": 0, "last_activity_date": 1568840274, "creation_date": 1568840274, "answer_id": 58000641, "question_id": 58000521, "link": "https://stackoverflow.com/questions/58000521/create-a-new-pandas-column-that-is-a-list-of-lists/58000641#58000641", "title": "Create a new pandas column that is a list of lists", "body": "<pre><code>mapper = df_B.set_index('job_id').to_dict()['job']\ndfA['job_id'] = dfA['job_id'].apply(lambda lst: [mapper.get(x) for x in lst])\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&gt;&gt;&gt;dfA\n\n    Name    job_id\n0   tom     ['coder', 'cook']\n1   nick    ['coder', 'cop']\n2   juli    ['coder']\n</code></pre>\n"}], "owner": {"reputation": 433, "user_id": 6114794, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a3c35f609ef85a1e958d145052126a13?s=128&d=identicon&r=PG&f=1", "display_name": "Anderlecht", "link": "https://stackoverflow.com/users/6114794/anderlecht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58000641, "answer_count": 2, "score": 0, "last_activity_date": 1568840274, "creation_date": 1568839542, "question_id": 58000521, "link": "https://stackoverflow.com/questions/58000521/create-a-new-pandas-column-that-is-a-list-of-lists", "title": "Create a new pandas column that is a list of lists", "body": "<p>I have two tables that look something like this:</p>\n\n<pre><code>data = [['tom', [3,5]], ['nick', [3,8]], ['juli', [3]]] \ndfA = pd.DataFrame(data, columns = ['Name', 'job_id'])\n\n\ndata1 = [['coder', 3], ['cook', 5], ['cop', 8]]\ndf_B = pd.DataFrame(data1, columns = ['job', 'job_id']) \n</code></pre>\n\n<p>And I'd like to add a column to the first table such that it looks like this:</p>\n\n<pre><code>data_comb = [['tom', ['coder','cook']], ['nick', ['coder','cop']], ['juli', ['coder']]] \ndf_comb = pd.DataFrame(data_comb, columns = ['Name', 'jobs_done'])\n</code></pre>\n\n<p>I am getting an unhashable list error likely due to the list within the column. Pointers on how to solve this will be appreciated.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 1645824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qFfud.jpg?s=128&g=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/1645824/asad"}, "is_accepted": false, "score": 0, "last_activity_date": 1568887602, "creation_date": 1568887602, "answer_id": 58008586, "question_id": 58000514, "link": "https://stackoverflow.com/questions/58000514/set-dataframe-values-to-values-in-another-dataframe/58008586#58008586", "title": "Set Dataframe values to values in another Dataframe", "body": "<p>You can simply achieve it with the <a href=\"https://kite.com/python/docs/fuzzywuzzy.process&quot;\" rel=\"nofollow noreferrer\"><code>process</code></a> of fuzzywuzzy.</p>\n\n<pre><code>df_choices = df['title'].values\n</code></pre>\n\n<p>This will get the list of title from your <code>df</code> Dataframe</p>\n\n<pre><code>def fuzzratio(row, options):\n    match, score = process.extractOne(row['title'], options, scorer=fuzz.ratio)\n    row['matches'] = match\n    row['score'] = score\n    return row\n\nmatches = df2.apply(lambda x: fuzzratio(x, df_choices), axis=1)\nmatches.columns = ['title', 'matches', 'score']\n</code></pre>\n\n<p>The function <code>fuzzratio</code> is used to get best match title for all titles in your <code>df2</code> Dataframe.</p>\n\n<pre><code>merges = df2.merge(matches, on='title', how = 'inner')\nmerges = merges.loc[merges['score'] &gt;= 90]\nmerges.drop('score', axis=1, inplace=True)\nmerges.columns = ['new_title', 'title']\n</code></pre>\n\n<p>Filter all the title which have score greater than 75.</p>\n\n<pre><code>df = df.merge(merges, on='title', how = 'left')\ndf.loc[~df['new_title'].isna(), 'title'] = df['new_title']\ndf.drop('new_title', axis=1, inplace=True)\n</code></pre>\n\n<p>Merge the original <code>df</code> with titles from <code>merges</code> dataframe. After merge, overwrite the titles.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 12087130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CsFmpYHVMFY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcn0VMfGA-TvwVNDdzXP3Mun1r9Tg/photo.jpg?sz=128", "display_name": "Brandon Lau", "link": "https://stackoverflow.com/users/12087130/brandon-lau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568887602, "creation_date": 1568839518, "question_id": 58000514, "link": "https://stackoverflow.com/questions/58000514/set-dataframe-values-to-values-in-another-dataframe", "title": "Set Dataframe values to values in another Dataframe", "body": "<p>I am attempting to merge two dataframes about movies on their title columns. Unfortunately they don't share indices, are ordered differently, and do not contain all the same movies. I have cleaned up the titles enough to the point where I can compare them and determine whether they are acceptably similar to be called the same movie. Following that comparison I am trying to set those \"matching\" titles equal to eachother (taking the title from df2 and overwriting it's equivalent in df), but I can't seem to get it to work.</p>\n\n<p>This is df.head(10)</p>\n\n<pre><code>      Unnamed: 0                                       title    imdb_id  \\\n72            72                                   Gully Boy  tt2395469   \n767          767                                   Long Shot  tt2139881   \n1000        1000                                      Little  tt8085790   \n1285        1285                                       Dumbo  tt3861390   \n1342        1342                           Don\"t Stop Me Now  tt9260446   \n1358        1358  How to Train Your Dragon: The Hidden World  tt2386490   \n1621        1621                               Captive State  tt5968394   \n1658        1658                   Spider-Man: Far from Home  tt6320628   \n1944        1944                           Avengers: Endgame  tt4154796   \n1946        1946                              Captain Marvel  tt4154664   \n\n</code></pre>\n\n<p>This is df2.head(10)</p>\n\n<pre><code>      Unnamed: 0  bo_year_rank                                      title  \\\n7455           0             1                           Avengers Endgame   \n7456           1             2                              The Lion King   \n7457           2             3                            Captain Marvel    \n7458           3             4                   Spider-Man Far from Home   \n7459           4             5                                Toy Story 4   \n7460           5             6                                    Aladdin   \n7461           6             7         Fast  Furious Presents Hobbs  Shaw   \n7462           7             8                        The Wandering Earth   \n7463           8             9                                     Ne Zha   \n7464           9            10  How to Train Your Dragon The Hidden World   \n\n</code></pre>\n\n<p>The comparison function I am using:</p>\n\n<pre><code>\ndef fix_stupid_titles(title, list_titles, min_score=0):\n    # -1 score incase we don't get any matches\n    max_score = -1\n    # Returning empty name for no match as well\n    max_title = \"\"\n    # Iterating over all names in the other\n    for title2 in list_titles:\n        #Finding fuzzy match score\n        score = fuzz.ratio(title, title2)\n        # Checking if we are above our threshold and have a better score\n        if (score &gt; min_score) &amp; (score &gt; max_score):\n            max_title = title2\n            max_score = score\n\n    return (title, max_title, max_score)\n\n</code></pre>\n\n<p>My thought is to iterate through one dataframe and apply the stupid_titles function to check similarity, but then I'm not sure how to update the titles so they are equal.</p>\n\n<pre><code>for i, title in enumerate(df.title):\n    thing=fix_stupid_titles(title, df2.title, min_score=75)\n    #thing saves the return of the functoin (title, max_title, score)\n    df['title'][thing[1]]=thing[0]\n</code></pre>\n\n<p>I want the titles in <code>df</code> to be overwritten with the titles from <code>df2</code> when the function determines they are similar.</p>\n\n<p>Any help would be appreciated! Or suggestions on how to go about this more efficiently.\nThanks!</p>\n"}, {"tags": ["python", "google-cloud-dataflow", "apache-beam", "parquet"], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 7359502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa37a2368ac48af5d5c08c36a67085f3?s=128&d=identicon&r=PG", "display_name": "Steven Ensslen", "link": "https://stackoverflow.com/users/7359502/steven-ensslen"}, "edited": false, "score": 0, "creation_date": 1569555313, "post_id": 58016747, "comment_id": 102642485, "body": "I made a local copy of <code>parquetio.py</code> and added <code>file_name</code> to the dictionary <code>row</code> just above line 254 as you suggested. <code>row[&#39;file_name&#39;] = file_name</code>.  Not conceptually pretty, but was simple and worked.  Thanks."}], "tags": [], "owner": {"reputation": 106, "user_id": 11699401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61599142a9c80c196c0f49dc4fc505a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Gryzykhin", "link": "https://stackoverflow.com/users/11699401/mikhail-gryzykhin"}, "is_accepted": true, "score": 0, "last_activity_date": 1568916395, "creation_date": 1568916395, "answer_id": 58016747, "question_id": 58000462, "link": "https://stackoverflow.com/questions/58000462/how-to-tell-which-file-a-record-came-from-when-reading-multiple-parquet-files-wi/58016747#58016747", "title": "How to tell which file a record came from when reading multiple parquet files with google cloud dataflow", "body": "<p>Given current API I don't see pre-made solution for this. Although you can solve problem by either:</p>\n\n<ul>\n<li>Extending/modifying <a href=\"https://github.com/apache/beam/blob/fcf1698c5bf887d8a02ca87c02684e7bd46f4013/sdks/python/apache_beam/io/parquetio.py#L254\" rel=\"nofollow noreferrer\">ReadAllFromParquet</a> to append file name to output.</li>\n<li>Use <a href=\"https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-parquet\" rel=\"nofollow noreferrer\">BQ tools</a> for import from parquet. I'm not sure they have exactly same scenario though.</li>\n</ul>\n"}], "owner": {"reputation": 793, "user_id": 7359502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa37a2368ac48af5d5c08c36a67085f3?s=128&d=identicon&r=PG", "display_name": "Steven Ensslen", "link": "https://stackoverflow.com/users/7359502/steven-ensslen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 58016747, "answer_count": 1, "score": 0, "last_activity_date": 1568916395, "creation_date": 1568839292, "question_id": 58000462, "link": "https://stackoverflow.com/questions/58000462/how-to-tell-which-file-a-record-came-from-when-reading-multiple-parquet-files-wi", "title": "How to tell which file a record came from when reading multiple parquet files with google cloud dataflow", "body": "<p>I have a requirement to be able to trace lineage back to an individual parquet file, and to be able to perform bulk loads, say to replay a few years of parquet files if a defect was to be discovered in the dataflow.</p>\n\n<p>After many attempts, the following works for the bulk loads, where options.input is a <a href=\"https://beam.apache.org/releases/pydoc/2.15.0/_modules/apache_beam/options/value_provider.html#RuntimeValueProvider\" rel=\"nofollow noreferrer\">RuntimeValueProvider</a> and SplitFn just <code>yields</code> <code>str.split()</code>:</p>\n\n<pre><code>with beam.Pipeline(options=PipelineOptions(), argv=args) as p:\n    mainPipe = p \\\n        | 'CSV of URIs' &gt;&gt; beam.Create([options.input]) \\\n        | 'Split URIs into records' &gt;&gt; beam.ParDo(SplitFn(',')) \\\n        | \"Read Parquet\" &gt;&gt; beam.io.parquetio.ReadAllFromParquet(columns=[k for k in fields.keys()]) \n</code></pre>\n\n<p>Unfortunately <a href=\"https://beam.apache.org/releases/pydoc/2.15.0/apache_beam.io.parquetio.html\" rel=\"nofollow noreferrer\">beam.io.parquetio.ReadAllFromParquet</a> won't say which file each record came from, nor will <code>ReadFromParquet</code>, <code>parquetio</code>'s only other function.</p>\n\n<p>Short of leaving Google Cloud Dataflow or teaching the team Java, what can I do load many parquet files at once into BigQuery and know which file each record came from?  </p>\n"}, {"tags": ["python", "syntax-error", "try-catch", "try-except"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1568839532, "post_id": 58000458, "comment_id": 102406789, "body": "<i>Pretty sure my code is right</i> - The fact that compiler is telling you there is a syntax error in your code should be a strong hint that your code is <b>not</b> right."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1568839739, "post_id": 58000458, "comment_id": 102406856, "body": "@SergeyA pretty pretty, means pretty, so, yes."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1568839779, "post_id": 58000529, "comment_id": 102406876, "body": "You can omit an <code>except</code> clause if you provide a <code>finally</code> clause."}], "tags": [], "owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "is_accepted": false, "score": 2, "last_activity_date": 1568840458, "last_edit_date": 1568840458, "creation_date": 1568839588, "answer_id": 58000529, "question_id": 58000458, "link": "https://stackoverflow.com/questions/58000458/using-try-statement-but-giving-me-syntax-error/58000529#58000529", "title": "Using try statement, but giving me syntax error", "body": "<p>Try needs to have at least one of the \nexcept or finally expressions followed as in:</p>\n\n<pre><code>userNum = input('enter a number: ')\ntry:\n    num = int(userNum)\nexcept ValueError as e:\n    print(e)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 2, "last_activity_date": 1568839837, "last_edit_date": 1568839837, "creation_date": 1568839615, "answer_id": 58000532, "question_id": 58000458, "link": "https://stackoverflow.com/questions/58000458/using-try-statement-but-giving-me-syntax-error/58000532#58000532", "title": "Using try statement, but giving me syntax error", "body": "<p>you can either use finally if you want something always happen, if you want something happen on error, use except:</p>\n\n<pre><code>userNum = input('enter a number: ')\ntry:\n    num = int(userNum)\nfinally:\n    print(\"something\")\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>userNum = input('enter a number: ')\ntry:\n    num = int(userNum)\nexcept Exception:\n  print(\"exception something\")\nfinally:\n    print(\"something\")\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>userNum = input('enter a number: ')\ntry:\n    num = int(userNum)\nexcept Exception:\n    print(\"exception something\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1236, "user_id": 3056710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NrF1Z.jpg?s=128&g=1", "display_name": "agtoever", "link": "https://stackoverflow.com/users/3056710/agtoever"}, "is_accepted": false, "score": 1, "last_activity_date": 1568840238, "creation_date": 1568840238, "answer_id": 58000636, "question_id": 58000458, "link": "https://stackoverflow.com/questions/58000458/using-try-statement-but-giving-me-syntax-error/58000636#58000636", "title": "Using try statement, but giving me syntax error", "body": "<p>In the <a href=\"https://docs.python.org/3.7/reference/compound_stmts.html#try\" rel=\"nofollow noreferrer\">syntax of a <code>try</code> statement</a>, you can see that at least one <code>except</code> part <em>or</em> a <code>finally</code> part is obligatory. </p>\n\n<p>Working code with except:</p>\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code>userNum = input('enter a number: ')\ntry:\n    num = int(userNum)\nexcept:\n    print(\"you didn't enter a number\")\nprint(num)\n</code></pre>\n\n<p><a href=\"https://tio.run/##VYw7DoAgEER7TrGhQWo7Eq/gHfxsogULWXcTOT1qoHG6yXszuciRaKxVL@RZI0xwUlYZHJIgwwKkcUUO4LwRLsHAG@qiDH3mDd4bZmk484dsSQr7uZMT@J9Zb5ryVl/r@AA\" rel=\"nofollow noreferrer\" title=\"Python 3 \u2013 Try It Online\">Try it online!</a></p>\n"}], "owner": {"reputation": 9, "user_id": 12087159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAxikuklJdTsQOWcCe-_BzpUKPi2H6y_b7lB-kS=k-s128", "display_name": "Spencer Bishop", "link": "https://stackoverflow.com/users/12087159/spencer-bishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1568840458, "creation_date": 1568839273, "last_edit_date": 1568839916, "question_id": 58000458, "link": "https://stackoverflow.com/questions/58000458/using-try-statement-but-giving-me-syntax-error", "title": "Using try statement, but giving me syntax error", "body": "<p>Simple problem. I need to get the user to input a number, and then convert the string into an integer using try/except.</p>\n\n<p>I've done things similar to this before. In fact I've done much more complicated things before, which is why I'm so confused as to why my code isn't working.</p>\n\n<pre><code>userNum = input('enter a number: ')\ntry:\n    num = int(userNum)\n</code></pre>\n\n<p>For some reason this causes a syntax error.\nThe error statement reads:</p>\n\n<pre><code>Syntax Error:     num = int(userNum): &lt;string&gt;, line 3, pos 23\n</code></pre>\n\n<p>Can anyone tell me why this would cause a problem and how I could fix it? I'm so confused.</p>\n"}, {"tags": ["python", "odoo"], "comments": [{"owner": {"reputation": 11032, "user_id": 3146213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IbhfG.jpg?s=128&g=1", "display_name": "CZoellner", "link": "https://stackoverflow.com/users/3146213/czoellner"}, "edited": false, "score": 1, "creation_date": 1568876115, "post_id": 58000437, "comment_id": 102415443, "body": "A bit more info, like code, would really help, wouldn&#39;t it?"}, {"owner": {"reputation": 143, "user_id": 11592638, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219775778294917/picture?type=large", "display_name": "Francisco Gonz&#225;lez Mej&#237;as", "link": "https://stackoverflow.com/users/11592638/francisco-gonz%c3%a1lez-mej%c3%adas"}, "reply_to_user": {"reputation": 11032, "user_id": 3146213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IbhfG.jpg?s=128&g=1", "display_name": "CZoellner", "link": "https://stackoverflow.com/users/3146213/czoellner"}, "edited": false, "score": 0, "creation_date": 1569029551, "post_id": 58000437, "comment_id": 102474863, "body": "for example I want to do something like this, where the final total goes down <a href=\"https://ibb.co/ZXPXz7m\" rel=\"nofollow noreferrer\">ibb.co/ZXPXz7m</a>   Is there any code that allows you to do that and what would it be?"}], "owner": {"reputation": 143, "user_id": 11592638, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219775778294917/picture?type=large", "display_name": "Francisco Gonz&#225;lez Mej&#237;as", "link": "https://stackoverflow.com/users/11592638/francisco-gonz%c3%a1lez-mej%c3%adas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568839139, "creation_date": 1568839139, "question_id": 58000437, "link": "https://stackoverflow.com/questions/58000437/add-column-for-calculation-in-odoo", "title": "add column for calculation in odoo", "body": "<p>I need to create a new column in the screen view to calculate the final total of the products that I have entered in the system.</p>\n\n<p>I thought it was done with separator but it doesn't work, how can I add that column in tree?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 3063, "user_id": 5075720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNyMGvaELDs/AAAAAAAAAAI/AAAAAAAAVnw/P1Rt8TFE2gc/photo.jpg?sz=128", "display_name": "PaSTE", "link": "https://stackoverflow.com/users/5075720/paste"}, "edited": false, "score": 0, "creation_date": 1568839402, "post_id": 58000426, "comment_id": 102406752, "body": "It looks like you want <code>Set_Index</code> to be the index of the DataFrame--have you tried <code>DataFrame.set_index()</code>?"}, {"owner": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "edited": false, "score": 1, "creation_date": 1568840767, "post_id": 58000426, "comment_id": 102407217, "body": "if you have unique values in col2, then try <code>df.pivot_table(index=[&#39;set_index&#39;, &#39;col2&#39;])</code>."}, {"owner": {"reputation": 305, "user_id": 11639503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fZplM6k-1vw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refNq2-e0ipQrIYV9wJJTrtzj2ksg/mo/photo.jpg?sz=128", "display_name": "Kanishk Mair", "link": "https://stackoverflow.com/users/11639503/kanishk-mair"}, "reply_to_user": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "edited": false, "score": 0, "creation_date": 1568870878, "post_id": 58000426, "comment_id": 102413323, "body": "@vbrises I have multiple columns (col1 and col2), so instead of a pivot table, I worked with <code>reorder_levels</code> to get the required <code>Set_Index</code> before the default index. It finally gave me the output in desired format I mentioned above."}, {"owner": {"reputation": 177, "user_id": 6358972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/IMIBe.jpg?s=128&g=1", "display_name": "June", "link": "https://stackoverflow.com/users/6358972/june"}, "edited": false, "score": 0, "creation_date": 1582272809, "post_id": 58000426, "comment_id": 106727335, "body": "Hi, you would probably be interested in <code>pd.MultiIndex.from_tuples</code> and <code>reindex</code> <a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/03.05-hierarchical-indexing.html\" rel=\"nofollow noreferrer\">link</a>"}], "answers": [{"tags": [], "owner": {"reputation": 885, "user_id": 3836843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPTqK.jpg?s=128&g=1", "display_name": "JacoSolari", "link": "https://stackoverflow.com/users/3836843/jacosolari"}, "is_accepted": true, "score": 0, "last_activity_date": 1568839824, "creation_date": 1568839824, "answer_id": 58000572, "question_id": 58000426, "link": "https://stackoverflow.com/questions/58000426/making-multiple-columns-in-pandas-based-on-index/58000572#58000572", "title": "Making multiple columns in pandas based on index", "body": "<p>You can set the 'Set_Index' column as index, drop it and sort the rows based on the new indices.</p>\n\n<pre><code>df_new = df.set_index(df.Set_Index).drop(columns=['Set_Index']).sort_index()\ndf_new\n</code></pre>\n\n<p>And you will have the following df_new:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eqHnk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eqHnk.png\" alt=\"enter image description here\"></a></p>\n\n<p>As far as I know, every row should have an index and I would not know how to create the df_new you indicated (without index for row 2 and 4).</p>\n\n<p>You can read more about indexing in pandas here:\n<a href=\"https://brohrer.github.io/dataframe_indexing.html\" rel=\"nofollow noreferrer\">https://brohrer.github.io/dataframe_indexing.html</a></p>\n"}], "owner": {"reputation": 305, "user_id": 11639503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fZplM6k-1vw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refNq2-e0ipQrIYV9wJJTrtzj2ksg/mo/photo.jpg?sz=128", "display_name": "Kanishk Mair", "link": "https://stackoverflow.com/users/11639503/kanishk-mair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 58000572, "answer_count": 1, "score": 0, "last_activity_date": 1568868531, "creation_date": 1568839074, "last_edit_date": 1568868531, "question_id": 58000426, "link": "https://stackoverflow.com/questions/58000426/making-multiple-columns-in-pandas-based-on-index", "title": "Making multiple columns in pandas based on index", "body": "<p>I'm trying to set a pandas dataframe column into an index. Since it is a categorical column, I would like to collapse all column in same category. For example:</p>\n\n<pre><code>df\n\n  col1   Set_Index    col2\n0    1        A         'a'\n1    2        B         'b'\n2    3        A         'c'\n3    4        B         'd'\n</code></pre>\n\n<p>The new df must look like:</p>\n\n<p>Edit: I forgot to put the default index in my first draft of the output needed in final output. It must be finally look like:</p>\n\n<pre><code>new_df\n\n             col1      col2\nSet_Index \n   A      0    1       'a'\n          2    3       'c'\n   B      1    2       'b'\n          3    4       'd'\n</code></pre>\n\n<p>I tried to use the groupby() function but it didn't help much.</p>\n"}, {"tags": ["python", "postgresql"], "comments": [{"owner": {"reputation": 5764, "user_id": 9374673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6cBkp.jpg?s=128&g=1", "display_name": "Mihai Chelaru", "link": "https://stackoverflow.com/users/9374673/mihai-chelaru"}, "edited": false, "score": 2, "creation_date": 1568839892, "post_id": 58000407, "comment_id": 102406926, "body": "You should not use string formatting like this to add parameters to your queries, as it&#39;s vulnerable to SQL injection. A better practice is to follow the <a href=\"http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries\" rel=\"nofollow noreferrer\">psycopg2 docs</a> and pass variables as arguments to <code>cur.execute</code>."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1568842643, "post_id": 58000407, "comment_id": 102407825, "body": "Well, you&#39;re passing two arguments to <code>execute</code> - separated by a comma - and the second one is just <code>.format(d)</code>, which is not a valid Python expression."}], "answers": [{"tags": [], "owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "is_accepted": false, "score": 1, "last_activity_date": 1568844482, "creation_date": 1568844482, "answer_id": 58001327, "question_id": 58000407, "link": "https://stackoverflow.com/questions/58000407/syntax-error-executing-query-from-python-postgres/58001327#58001327", "title": "Syntax error executing query from python (postgres)", "body": "<p>The <a href=\"https://github.com/psycopg/psycopg2/blob/d90ad8627d0a7244abeee7cd3a9418d529dc1428/lib/extras.py#L1211\" rel=\"nofollow noreferrer\"><code>psycopg2.extras.execute_values</code></a> function can be used in inserting many values in the table.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import psycopg2.extras\n\npsycopg2.extras.execute_values(\n    cur, \n    \"INSERT INTO pages_post (pname) VALUES %s\", \n    ((n,) for n in nam)\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "is_accepted": false, "score": 0, "last_activity_date": 1568851322, "last_edit_date": 1568851322, "creation_date": 1568848852, "answer_id": 58001833, "question_id": 58000407, "link": "https://stackoverflow.com/questions/58000407/syntax-error-executing-query-from-python-postgres/58001833#58001833", "title": "Syntax error executing query from python (postgres)", "body": "<p>You should take a look at the <a href=\"http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries\" rel=\"nofollow noreferrer\">official docs for how to pass parameters to a query</a>. They provide 2 methods.</p>\n\n<p><strong>Method 1: using a sequence</strong></p>\n\n<p>You can pass your parameters using a tuple or list, but a list may be less confusing because you don't have to remember the special case of a single element tuple.</p>\n\n<pre><code>nam = ['sau','sing','loe','sta'] \nfor d in nam:\n    cur.execute(\"INSERT INTO pages_post (pname) VALUES ([%s])\", d)\n    print(len(nam))\n</code></pre>\n\n<p><strong>Method 2: using a dictionary</strong></p>\n\n<p>This one seems a little clumsy, but if you have multiple parameters in your INSERT statement, it might improve readability</p>\n\n<pre><code>nam = ['sau','sing','loe','sta'] \nfor d in nam:\n    cur.execute(\"INSERT INTO pages_post (pname) VALUES (%(pname)s)\",\n                {'pname': d} )\n    print(len(nam))\n</code></pre>\n\n<p>@OluwafemiSule's answer using <a href=\"http://initd.org/psycopg/docs/extras.html#psycopg2.extras.execute_values\" rel=\"nofollow noreferrer\"><code>execute_values</code></a> is worth looking at, too. I think it comes down to personal preference to which solution is the most readable. Unless you are worried about raw speed. In that case, the docs say that <code>execute_values</code> does have some optimizations that can make it run faster than simple loops like I've shown in Method 1 and Method 2.</p>\n"}], "owner": {"reputation": 55, "user_id": 10121712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f071e3069e8740d672b780fa2bdb4e1?s=128&d=identicon&r=PG&f=1", "display_name": "saurabh", "link": "https://stackoverflow.com/users/10121712/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568851322, "creation_date": 1568838969, "last_edit_date": 1568839355, "question_id": 58000407, "link": "https://stackoverflow.com/questions/58000407/syntax-error-executing-query-from-python-postgres", "title": "Syntax error executing query from python (postgres)", "body": "<p>I am getting syntax error in sql query statement stored in cur to store multiple list value</p>\n\n<pre><code>nam = ['sau','sing','loe','sta'] \nfor d in nam:\n    cur.execute(\"\"\"INSERT INTO pages_post (pname) VALUES ({})\"\"\", .format(d))\n    print(len(nam))'\n</code></pre>\n\n<p>getting error for the following statement </p>\n\n<pre><code>cur.execute(\"\"\"INSERT INTO pages_post (pname) VALUES ({})\"\"\", .format(d))\n</code></pre>\n\n<p>the erroe message giving is</p>\n\n<pre><code> File \"C:\\Users\\surya\\Desktop\\whtscric\\fe.py\", line 12\n    cur.execute(\"\"\"INSERT INTO pages_post (pname) VALUES ({})\"\"\", .format(d))\n                                                                  ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "if-statement"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1568839302, "post_id": 58000376, "comment_id": 102406709, "body": "Your code as-written won&#39;t even run -- it has a SyntaxError. <code>&amp;&amp;</code> is spelled <code>and</code> in python."}, {"owner": {"reputation": 2956, "user_id": 379181, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EWoW0.png?s=128&g=1", "display_name": "Oso", "link": "https://stackoverflow.com/users/379181/oso"}, "edited": false, "score": 0, "creation_date": 1568839309, "post_id": 58000376, "comment_id": 102406711, "body": "Tax brackets require calculations at each bracket up to and including the highest bracket you&#39;re in. If/elif/else only triggers for the first correct match (lowest bracket)."}, {"owner": {"reputation": 3730, "user_id": 1291935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6c0d80f8d0f580c5e1fcb208c02874d?s=128&d=identicon&r=PG", "display_name": "DrCord", "link": "https://stackoverflow.com/users/1291935/drcord"}, "edited": false, "score": 1, "creation_date": 1568839386, "post_id": 58000376, "comment_id": 102406748, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2485466/pythons-equivalent-of-logical-and-in-an-if-statement\">Python&#39;s equivalent of &amp;&amp; (logical-and) in an if-statement</a>"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1568839684, "post_id": 58000376, "comment_id": 102406840, "body": "Use <a href=\"https://realpython.com/fast-flexible-pandas/#dont-forget-numpy\" rel=\"nofollow noreferrer\">Don\u2019t Forget NumPy!</a> instead of all those <code>elif</code>.  The method described, creates bins and prices to apply."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1568839402, "creation_date": 1568839402, "answer_id": 58000491, "question_id": 58000376, "link": "https://stackoverflow.com/questions/58000376/how-to-conditionally-bin-a-value-with-python/58000491#58000491", "title": "How to conditionally bin a value, with python?", "body": "<p>You have to change your <code>elif</code> like:</p>\n\n<pre><code>elif(yearlySalary in range (38701, 82500)):\n</code></pre>\n\n<p>to know if your yearlySalary is in that range</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11678301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091d9b0bd9ae3128782b6f43386b3c9d?s=128&d=identicon&r=PG&f=1", "display_name": "pcopp", "link": "https://stackoverflow.com/users/11678301/pcopp"}, "is_accepted": false, "score": 1, "last_activity_date": 1568839411, "creation_date": 1568839411, "answer_id": 58000494, "question_id": 58000376, "link": "https://stackoverflow.com/questions/58000376/how-to-conditionally-bin-a-value-with-python/58000494#58000494", "title": "How to conditionally bin a value, with python?", "body": "<p>There's a few issues here about how tax brackets work; The brackets should be in the opposite order to catch the highest tax brackets first, and only the amount over the bracket should be taxed at that amount.</p>\n\n<p>Also, for your example, <code>elif(range (82501, 157500)):</code> will not catch yearly_salary=100000 because the else statement is not asserting whether or not yearly_salary is actually within that range.</p>\n\n<p>It is being caught in the 12% because the incorrect \"AND\" operator is used: use <code>and</code> instead of <code>&amp;&amp;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 0, "last_activity_date": 1568864798, "last_edit_date": 1568864798, "creation_date": 1568840559, "answer_id": 58000683, "question_id": 58000376, "link": "https://stackoverflow.com/questions/58000376/how-to-conditionally-bin-a-value-with-python/58000683#58000683", "title": "How to conditionally bin a value, with python?", "body": "<h2>Use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.digitize.html\" rel=\"nofollow noreferrer\"><code>np.digitize</code></a>:</h2>\n\n<ul>\n<li>It allows for cleaner code</li>\n<li><code>yearlySalary</code> is binned, without messy code like:\n\n<ul>\n<li><code>yearlySalary &gt; 9526 &amp; yearlySalary &lt; 38700</code></li>\n<li><code>elif(yearlySalary in range (38701, 82500))</code></li>\n</ul></li>\n<li>In the case of the following code, the bin sizes are as follows\n\n<ul>\n<li>10% for 0 - 9525</li>\n<li>12% for 9526 - 38700</li>\n<li>22% for 38701 - 82500</li>\n<li>24% for 82501 - 157500</li>\n<li>32% for 157501 - 200000</li>\n<li>35% for 200001 - 500000</li>\n<li>37% for 500001 and up</li>\n</ul></li>\n<li><code>.digitize</code> works by finding the index of <code>bins</code>, within which, <code>income</code> falls.  Given the index, find the corresponding value in <code>tax_per</code>.</li>\n<li><code>bin_</code> is used as a variable because <code>bin</code> is an internal python function, and we don't overwrite internal functions.</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\ndef tax_bracket(income: float) -&gt; float:\n    tax_per = np.array([.10, .12, .22, .24, .32, .35, .37])\n    bin_ = np.digitize(income, bins=[9526, 38701, 82501, 157501, 200001, 500001])\n    return income - income*(tax_per[bin_])\n\n\nyearlySalary = float(input(\"Please enter your yearly salary: \"))\nprint(tax_bracket(yearlySalary))\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>Please enter your yearly salary:  37524\n33021.12\n</code></pre>\n\n<h2>Using <code>if - elif - else</code>:</h2>\n\n<ul>\n<li>Arrange the bins from largest to smallest.</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>def old_way(yearlySalary):\n\n    if yearlySalary &gt; 500000:\n        tax = yearlySalary * .37\n        yearlySalary = yearlySalary-tax\n\n    elif yearlySalary &gt; 200000:\n        tax = yearlySalary * .35\n        yearlySalary = yearlySalary-tax\n\n    elif yearlySalary &gt; 157500:\n        tax = yearlySalary * .32\n        yearlySalary = yearlySalary-tax\n\n    elif yearlySalary &gt; 82500:\n        tax = yearlySalary * .24\n        yearlySalary = yearlySalary-tax\n\n    elif yearlySalary &gt; 38700:\n        tax = yearlySalary * .22\n        yearlySalary = yearlySalary-tax\n\n    elif yearlySalary &gt; 9525:\n        tax = yearlySalary * .12\n        yearlySalary = yearlySalary-tax\n\n    else:\n        tax = yearlySalary * .10\n        yearlySalary = yearlySalary-tax\n\n    return yearlySalary\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "is_accepted": false, "score": 0, "last_activity_date": 1568975159, "last_edit_date": 1568975159, "creation_date": 1568843911, "answer_id": 58001246, "question_id": 58000376, "link": "https://stackoverflow.com/questions/58000376/how-to-conditionally-bin-a-value-with-python/58001246#58001246", "title": "How to conditionally bin a value, with python?", "body": "<p>Here it is a short program to compute the taxes.</p>\n\n<pre><code>boundaries = [0, 9525, 38700, 82500, 157000, 200000, 500000]\npercentages = [ .10, .12,  .22, .24, .32, .35, .37]\nsal = salary = 142000\nbot_top = zip(boundaries, boundaries[1:]+[salary])\nsal_in_brkt = (top-bot if sal&gt;top else max(sal-bot,0) for bot, top in bot_top)\ntaxes = sum(pct*inbrkt for pct, inbrkt in zip(percentages, sal_in_brkt))\nprint(salary, taxes, salary-taxes) # \u21d2 142000 28369.5 113630.5\n</code></pre>\n\n<p><code>bot_top</code> produces tuples with the bottom and top extremes of each taxation bracket (note that the top for the last bracket is taken equal to the salary itself).<br>\n<code>sal_in_brkt</code> produces the fractions of the salary that are comprised between top and bottom of each bracket.<br>\n<code>taxes</code> is the sum of the products of the fractions of salary comprised in a bracket times the corresponding percentage. </p>\n\n<hr>\n\n<p>To generalize the procedure, a function <code>make_taxes</code> is defined below, that accepts as optional arguments a list of <code>boundaries</code> for tax brackets and a list of <code>percentages</code> that applies to the income inside a specific tax bracket.</p>\n\n<p>The list of boundaries starts with the minimum income to which we apply taxation (in the example it is 0) and ends with the max amont over which taxation is constant. If we have <em>N</em> boundaries the number of brackets, taking into account the greater than max one, is still <em>N</em> so we assert that the lengths of the two lists must be equal.</p>\n\n<p>The function <code>make_taxes</code> ultimately returns a function that returns the taxation for a given salary.</p>\n\n<pre><code>def make_taxes(boundaries=None, percentages=None):\n    boundaries = boundaries or [0, 9525, 38700, 82500, 157000, 200000, 500000]\n    percentages = percentages or [ .10, .12,  .22, .24, .32, .35, .37]\n    assert len(boundaries) == len(percentages)\n    def taxes(salary):\n        s = salary\n        pct_bot_top = zip(percentages, boundaries, boundaries[1:]+[s])\n        return sum(p*(t-b if s&gt;t else max(s-b, 0)) for p,b,t in pct_bot_top)\n    return taxes\n\nprint(make_taxes()(142000)) # \u21d2 28369.5\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12087140, "user_type": "registered", "profile_image": "https://graph.facebook.com/359438121604127/picture?type=large", "display_name": "tdelles", "link": "https://stackoverflow.com/users/12087140/tdelles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1568975159, "creation_date": 1568838796, "last_edit_date": 1568920836, "question_id": 58000376, "link": "https://stackoverflow.com/questions/58000376/how-to-conditionally-bin-a-value-with-python", "title": "How to conditionally bin a value, with python?", "body": "<p>So the basics of this, is that I am attempting to have a user input their yearly salary, then the program will run it through a set of if statements then return what tax bracket they are in, subtract the amount from their yearly salary and return what their gross income will be. The main problem is that it will run correctly for any amounts of $0 - $9,525 but once you jump up to the 12% and 22% it does not make it their. Like if you were to enter $100,000 it would just deduct 12% out of it when it should deduct 24%. Here is the Python code in its current form:</p>\n\n<pre><code>#Takes someone's yearly salary\nyearlySalary = eval(input(\"Please enter your yearly salary: \"))\n\nif(yearlySalary &lt; 9525):\n    tax = yearlySalary * .10\n    yearlySalary = yearlySalary-tax\n\nelif(yearlySalary &gt; 9526 &amp;&amp; yearlySalary &lt; 38700):\n    tax = yearlySalary * .12\n    yearlySalary = yearlySalary-tax\n\nelif(range (38701, 82500)):\n    tax = yearlySalary * .22\n    yearlySalary = yearlySalary-tax\n\nelif(range (82501, 157500)):\n    tax = yearlySalary * .24\n    yearlySalary = yearlySalary-tax\n\nelif(range(157501, 200000)):\n    tax = yearlySalary * .32\n    yearlySalary = yearlySalary-tax\n\nelif(range(200001, 500000)):\n    tax = yearlySalary * .35\n    yearlySalary = yearlySalary-tax\n\nelif(yearlySalary &gt; 500001):\n    tax = yearlySalary * .37\n    yearlySalary = yearlySalary-tax\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-venv"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568840331, "post_id": 58000371, "comment_id": 102407067, "body": "Hm. Not terribly familiar with <code>venv</code> yet, but I repeated the steps above and got no output from <code>pip freeze</code>. What version of Python 3 are you using?"}, {"owner": {"reputation": 347, "user_id": 5073569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CG8L4.jpg?s=128&g=1", "display_name": "Miroslav Radojevi\u0107", "link": "https://stackoverflow.com/users/5073569/miroslav-radojevi%c4%87"}, "edited": false, "score": 0, "creation_date": 1599053186, "post_id": 58000371, "comment_id": 112654121, "body": "How exactly do you call module purge command? I tried and it says: command not found. What would be the exact command?"}, {"owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "edited": false, "score": 0, "creation_date": 1599054007, "post_id": 58000371, "comment_id": 112654598, "body": "Hmmm I think it&#39;s installation specific. Here&#39;s the documentation: <a href=\"https://modules.readthedocs.io/en/latest/module.html#subcmd-purge\" rel=\"nofollow noreferrer\">modules.readthedocs.io/en/latest/module.html#subcmd-purge</a> I&#39;ve been using my university&#39;s machines where <code>module</code> was installed (I guess for security purposes), perhaps you don&#39;t need <code>module</code> command at all."}], "answers": [{"comments": [{"owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "edited": false, "score": 1, "creation_date": 1568839819, "post_id": 58000467, "comment_id": 102406892, "body": "Thanks for your answer! Unfortunately <code>virtualenv</code> is not an option, python 2 retires at the end of this year (<a href=\"https://pythonclock.org/\" rel=\"nofollow noreferrer\">pythonclock.org</a>) and the documentation of <code>virtualenv</code> itself mentions <code>venv</code> for python 3 (<a href=\"https://virtualenv.pypa.io/en/stable/#compare-contrast-with-alternatives\" rel=\"nofollow noreferrer\">virtualenv.pypa.io/en/stable/&hellip;</a>)."}, {"owner": {"reputation": 177, "user_id": 11427968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980eb64e75925ea47a77e8deedcbcdc5?s=128&d=identicon&r=PG&f=1", "display_name": "Huan", "link": "https://stackoverflow.com/users/11427968/huan"}, "reply_to_user": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "edited": false, "score": 0, "creation_date": 1568840676, "post_id": 58000467, "comment_id": 102407187, "body": "Hi, I edited my answer. I&#39;m able to get a fresh virtual env with <code>python3 -m venv test_venv</code>. I have included my python3 version. Maybe you could check the version of Python3 that you&#39;re using."}, {"owner": {"reputation": 347, "user_id": 5073569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CG8L4.jpg?s=128&g=1", "display_name": "Miroslav Radojevi\u0107", "link": "https://stackoverflow.com/users/5073569/miroslav-radojevi%c4%87"}, "edited": false, "score": 0, "creation_date": 1599042711, "post_id": 58000467, "comment_id": 112648772, "body": "I have tried calling python3 -m venv ./my_venv/ but the virtual environment involves system wide packages. My intent was to create a clean virtual environment. After activating, pip list gives quite a lot of packages. I did not place --system-site-packages argument in venv command. Does anyone have similar experience? Also pyenv.cfg has include-system-site-packages set to false. On the other hand, pip list gives a long list of packages installed system-wide that I do not wish to appear in virtual environment."}], "tags": [], "owner": {"reputation": 177, "user_id": 11427968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980eb64e75925ea47a77e8deedcbcdc5?s=128&d=identicon&r=PG&f=1", "display_name": "Huan", "link": "https://stackoverflow.com/users/11427968/huan"}, "is_accepted": true, "score": 4, "last_activity_date": 1568840720, "last_edit_date": 1568840720, "creation_date": 1568839302, "answer_id": 58000467, "question_id": 58000371, "link": "https://stackoverflow.com/questions/58000371/how-to-create-an-empty-python-virtual-environment/58000467#58000467", "title": "How to create an empty python virtual environment", "body": "<p>EDIT: </p>\n\n<p>try the following:</p>\n\n<pre><code>$ python3 --version\nPython 3.7.4\n\n$ python3 -m venv test_venv\n\n$ source ./test_venv/bin/activate\n\n$ pip list\n\nPackage    Version\n---------- -------\npip        19.0.3 \nsetuptools 40.8.0 \nYou are using pip version 19.0.3, however version 19.2.3 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n(test_venv) \n\n$ pip freeze\n(test_venv) \n\n</code></pre>\n\n<p>If you have <code>virtualenv</code> installed, to create a 'fresh' virtual env without \"system wide\" pip packages, try the following:</p>\n\n<pre><code># create new folder:\n$ mkdir test_venv\n\n# create virtual env:\n$ virtualenv test_venv/\n\n# activate virtual env:\n$ source ./test_venv/bin/activate\n\n# list packages in virtual env (test_venv):\n$ pip list\n\nPackage    Version\n---------- -------\npip        19.2.3 \nsetuptools 41.2.0 \nwheel      0.33.6 \n(test_venv) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 177, "user_id": 11427968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980eb64e75925ea47a77e8deedcbcdc5?s=128&d=identicon&r=PG&f=1", "display_name": "Huan", "link": "https://stackoverflow.com/users/11427968/huan"}, "edited": false, "score": 0, "creation_date": 1568841790, "post_id": 58000823, "comment_id": 102407582, "body": "<code>$ cat pyvenv.cfg</code>    <code>home = &#47;usr&#47;local&#47;bin include-system-site-packages = false version = 3.7.4</code> Yes, it&#39;s set to false. Is this not the default?"}], "tags": [], "owner": {"reputation": 61, "user_id": 12083893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3db6f8aec4e0499a9b9d725a6c793b?s=128&d=identicon&r=PG&f=1", "display_name": "damb", "link": "https://stackoverflow.com/users/12083893/damb"}, "is_accepted": false, "score": 1, "last_activity_date": 1568842097, "last_edit_date": 1568842097, "creation_date": 1568841350, "answer_id": 58000823, "question_id": 58000371, "link": "https://stackoverflow.com/questions/58000371/how-to-create-an-empty-python-virtual-environment/58000823#58000823", "title": "How to create an empty python virtual environment", "body": "<p>A configuration file <code>pyvenv.cfg</code> should be located within the virtual environment's root directory when we create a virtual environment with <code>venv</code>. According to the <a href=\"https://docs.python.org/3/library/venv.html\" rel=\"nofollow noreferrer\">documentation</a> this file should contain a line with an <code>include-system-site-packages</code> key and set to <code>false</code> if <code>venv</code> previously was run without the <code>--system-site-packages</code> option. </p>\n"}], "owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5232, "favorite_count": 2, "accepted_answer_id": 58000467, "answer_count": 2, "score": 4, "last_activity_date": 1568842097, "creation_date": 1568838768, "last_edit_date": 1568841548, "question_id": 58000371, "link": "https://stackoverflow.com/questions/58000371/how-to-create-an-empty-python-virtual-environment", "title": "How to create an empty python virtual environment", "body": "<p>When creating a new environment with conda we get a completely empty virtual environment:</p>\n\n<pre><code>conda create --name=test\nconda activate test\nconda list\n</code></pre>\n\n<p>The output of the last command is an empty list, there's not even <code>pip</code> installed. I'd like to achieve the same result with python <code>venv</code> command (or at least have the \"minimal\" virtual environment with only <code>pip</code> installed). When I run <code>python -m venv test</code> the new environment contains all packages available \"system-wide\":</p>\n\n<pre><code>python -m venv test\nsource test/bin/activate\npip freeze\n</code></pre>\n\n<p>outputs a long list of packages.</p>\n\n<p>According to <a href=\"https://docs.python.org/3.6/library/venv.html\" rel=\"nofollow noreferrer\">the documentation</a> the command has <code>--system-site-packages</code> parameter but it looks like it's on by default, I can't find a way to disable it. I've also tried using the old virtualenv <code>--clear</code> parameter but obviously it's not taken into account.</p>\n\n<p>EDIT:</p>\n\n<p>It turned out to be the environment modules <code>module</code> command interfering with python modules (<a href=\"https://modules.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://modules.readthedocs.io/en/latest/</a>). After running <code>module purge</code> <code>pip freeze</code> returns empty list.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 12087118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce296bb9e741f245ba0c526226db80e?s=128&d=identicon&r=PG&f=1", "display_name": "Uday", "link": "https://stackoverflow.com/users/12087118/uday"}, "edited": false, "score": 0, "creation_date": 1568842853, "post_id": 58000748, "comment_id": 102407883, "body": "Hi Dusan, Thanks a lot for you help. Unfortunatly this is nto working out and might be we have missed to add date_stamp.    ------------------------------------------------------------&zwnj;&#8203;---------------          ValueError                                Traceback (most recent call last)       &lt;ipython-input-71-e3a4de830318&gt; in &lt;module&gt;       8     name_parts = file_name.split(&quot;_&quot;)       9  ---&gt; 10     date_stamp, version = name_parts[1:]      11       12     if date_stamp not in latest_files or version &gt; latest_files[date_stamp]:       ValueError: too many values to unpack (expected 2)"}, {"owner": {"reputation": 17, "user_id": 12087118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce296bb9e741f245ba0c526226db80e?s=128&d=identicon&r=PG&f=1", "display_name": "Uday", "link": "https://stackoverflow.com/users/12087118/uday"}, "edited": false, "score": 0, "creation_date": 1568843843, "post_id": 58000748, "comment_id": 102408142, "body": "Quite Close. I made small mistake in file name while uploading this,   Source Files ======================  PyhtonReport_20180404_567_03.zip PyhtonReport_20180404_567_02.zip PyhtonReport_20180404_567_01.zip PyhtonReport_20181221_145_02.zip PyhtonReport_20181221_145_01.zip PyhtonReport_20180816_345_01.zip   End Result =======================  PyhtonReport_20180404_567_03.zip PyhtonReport_20181221_145_02.zip PyhtonReport_20180816_345_01.zip  We need to consider 1st and 2nd entries after the split. is it doable?"}, {"owner": {"reputation": 17, "user_id": 12087118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce296bb9e741f245ba0c526226db80e?s=128&d=identicon&r=PG&f=1", "display_name": "Uday", "link": "https://stackoverflow.com/users/12087118/uday"}, "edited": false, "score": 1, "creation_date": 1568844257, "post_id": 58000748, "comment_id": 102408245, "body": "Done.. I have added one more string date_stamp = name_parts[1] + name_parts[2]"}], "tags": [], "owner": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "is_accepted": true, "score": 1, "last_activity_date": 1568843665, "last_edit_date": 1568843665, "creation_date": 1568840943, "answer_id": 58000748, "question_id": 58000342, "link": "https://stackoverflow.com/questions/58000342/delete-files-from-directory-based-on-file-name-version/58000748#58000748", "title": "Delete Files from directory based on file name version", "body": "<p>The following should give you the desired end result.</p>\n\n<pre><code>import os\n\nsource = r\"C:\\Users\\Pyhton\"    \nfile_names = os.listdir(source)\n\nlatest_files = {}\nfor file_name in file_names:\n    name_parts = file_name.split(\"_\")\n    date_stamp = name_parts[1]\n\n    if date_stamp not in latest_files or file_name &gt; latest_files[date_stamp]:\n        latest_files[date_stamp] = file_name\n\n\nkeep_files = latest_files.values()\nfor file_name in file_names:\n    if file_name in keep_files:\n        continue\n\n    os.remove(os.path.join(source, file_name))\n</code></pre>\n\n<p>Create a mapping (<code>latest_files</code>) of date: latest_version_file_name and then remove all files but those in the mapping.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 12087118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce296bb9e741f245ba0c526226db80e?s=128&d=identicon&r=PG&f=1", "display_name": "Uday", "link": "https://stackoverflow.com/users/12087118/uday"}, "edited": false, "score": 0, "creation_date": 1568843389, "post_id": 58000790, "comment_id": 102408021, "body": "Need to add conditions. At this moment, above code simply delete all the files."}], "tags": [], "owner": {"reputation": 65, "user_id": 12085516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf76f4a67f3cf42feabff5649c460468?s=128&d=identicon&r=PG&f=1", "display_name": "qqqqqq", "link": "https://stackoverflow.com/users/12085516/qqqqqq"}, "is_accepted": false, "score": 0, "last_activity_date": 1568846422, "last_edit_date": 1568846422, "creation_date": 1568841165, "answer_id": 58000790, "question_id": 58000342, "link": "https://stackoverflow.com/questions/58000342/delete-files-from-directory-based-on-file-name-version/58000790#58000790", "title": "Delete Files from directory based on file name version", "body": "<p>EDIT: Sorry, i missed the part about keeping some of them!</p>\n\n<pre><code>import glob\nimport os\nfiles = glob.glob('path/to/old/files/common_part_of_files_names*.zip')\ngroups = set([f[:21] for f in files])\nfor group in groups:\n  versions = [f for f in files if f.starts_with(group)]\n  versions.remove(max(versions)) # pop latest\n  for v in versions:\n    os.remove(v)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150, "user_id": 3358251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51686f28074e2a8ed3b9a0814353a962?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo de Mayo", "link": "https://stackoverflow.com/users/3358251/mateo-de-mayo"}, "is_accepted": false, "score": 0, "last_activity_date": 1568844700, "creation_date": 1568844700, "answer_id": 58001357, "question_id": 58000342, "link": "https://stackoverflow.com/questions/58000342/delete-files-from-directory-based-on-file-name-version/58001357#58001357", "title": "Delete Files from directory based on file name version", "body": "<p>Sorry, I couldn't ressist.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def distinct_dates(files):\n    \"Remove duplicates of same date files, preserving the first ocurrence\"\n    o = {}  # Saves first occurrence as {date: file}\n    for i, date in enumerate(map(lambda f: f[13:21], files)):\n        if date not in o:\n            o[date] = files[i]\n    return list(o.values())\n</code></pre>\n\n<p>and its usage</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>files = [\n    \"PyhtonReport_20180404_03.zip\",\n    \"PyhtonReport_20180404_02.zip\",\n    \"PyhtonReport_20180404_01.zip\",\n    \"PyhtonReport_20181221_02.zip\",\n    \"PyhtonReport_20181221_01.zip\",\n    \"PyhtonReport_20180816_01.zip\",\n]\n\nprint(distinct_dates(files))\n\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12087118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce296bb9e741f245ba0c526226db80e?s=128&d=identicon&r=PG&f=1", "display_name": "Uday", "link": "https://stackoverflow.com/users/12087118/uday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 58000748, "answer_count": 3, "score": 0, "last_activity_date": 1568846422, "creation_date": 1568838666, "question_id": 58000342, "link": "https://stackoverflow.com/questions/58000342/delete-files-from-directory-based-on-file-name-version", "title": "Delete Files from directory based on file name version", "body": "<p>I would like to delete old ZIP files from directory based on file name where date created cant be taken into account</p>\n\n<p>E.g. </p>\n\n<pre><code>PyhtonReport_20180404_03.zip\nPyhtonReport_20180404_02.zip\nPyhtonReport_20180404_01.zip\nPyhtonReport_20181221_02.zip\nPyhtonReport_20181221_01.zip\nPyhtonReport_20180816_01.zip\n</code></pre>\n\n<p>End Result:</p>\n\n<pre><code>PyhtonReport_20180404_03.zip\nPyhtonReport_20181221_02.zip\nPyhtonReport_20180816_01.zip\n</code></pre>\n\n<p>I am tryign to read first 23 characters and if it match with second then compare file1 to file2. If the value is false then append to list and eventually delete it. </p>\n\n<pre><code>import os\nsource = r'C:\\Users\\Pyhton'\nfor filename in os.listdir(source):\n    GroupFile = filename[0:22]\n</code></pre>\n\n<p>Lost how to keep the value of first file and keep on checking.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "duplicates", "rows"], "comments": [{"owner": {"reputation": 552, "user_id": 6348485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154155350669188/picture?type=large", "display_name": "Swagga Ting", "link": "https://stackoverflow.com/users/6348485/swagga-ting"}, "edited": false, "score": 0, "creation_date": 1568838720, "post_id": 58000302, "comment_id": 102406506, "body": "Looks like you are confusing rows and columns. Your code example has 4 columns with 8 rows. Would that change the question to be 36 columns with 260k rows, and then change the algorithm? Please clarify thanks."}, {"owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "reply_to_user": {"reputation": 552, "user_id": 6348485, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154155350669188/picture?type=large", "display_name": "Swagga Ting", "link": "https://stackoverflow.com/users/6348485/swagga-ting"}, "edited": false, "score": 0, "creation_date": 1568839101, "post_id": 58000302, "comment_id": 102406629, "body": "Apologies. Thanks for the correction. I have changed the questions to the proper format. The row_data should have (4, 8) 8 columns by 4 rows."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1568840837, "post_id": 58000302, "comment_id": 102407235, "body": "With your data, isn&#39;t <code>total_dropped_neighbors = 8</code>?"}, {"owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1568841131, "post_id": 58000302, "comment_id": 102407334, "body": "Yes sorry. Forgot about keeping one instance of each duplicate. Thanks, @QuangHoang"}], "answers": [{"comments": [{"owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "edited": false, "score": 0, "creation_date": 1568841072, "post_id": 58000695, "comment_id": 102407313, "body": "Elegant and as fast as any compact DataFrame operation. Thank you."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1568840620, "creation_date": 1568840620, "answer_id": 58000695, "question_id": 58000302, "link": "https://stackoverflow.com/questions/58000302/checking-and-deleting-duplicate-neighbor-values-in-a-series-of-rows-for-a-datafr/58000695#58000695", "title": "Checking and deleting duplicate neighbor values in a series of rows for a DataFrame", "body": "<p>IIUC, here's what I would try:</p>\n\n<pre><code>non_dups = row_data.ne(row_data.shift(1,axis=1)).any()\n\nrow_data.loc[:,non_dups]\n</code></pre>\n\n<p>Output:    </p>\n\n<pre><code>     0    1    3    4    5    7\n0  1.1  1.2  1.3  1.4  1.5  1.6\n1  2.3  2.2  2.3  2.4  2.5  2.6\n2  2.4  2.2  2.3  2.4  2.6  2.7\n3  7.1  7.2  7.3  7.4  7.5  7.6\n</code></pre>\n"}], "owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58000695, "answer_count": 1, "score": 1, "last_activity_date": 1568841091, "creation_date": 1568838456, "last_edit_date": 1568841091, "question_id": 58000302, "link": "https://stackoverflow.com/questions/58000302/checking-and-deleting-duplicate-neighbor-values-in-a-series-of-rows-for-a-datafr", "title": "Checking and deleting duplicate neighbor values in a series of rows for a DataFrame", "body": "<p>I have a set of rows in a dataframe that have some duplicate neighboring values which are all located in <strong>the same position of each column</strong> and looks like this:</p>\n\n<pre><code>row_data = pd.DataFrame({0 : [1.1, 1.2, 1.2, 1.3, 1.4, 1.5, 1.5, 1.6],\n1 : [2.3, 2.2, 2.2, 2.3, 2.4, 2.5, 2.5, 2.6],\n2 : [2.4, 2.2, 2.2, 2.3, 2.4, 2.6, 2.6, 2.7],\n3 : [7.1, 7.2, 7.2, 7.3, 7.4, 7.5, 7.5, 7.6]}).T\n</code></pre>\n\n<p>As stated above the (1.2, 1.2) in row 0 is in the same position as (2.2, 2.2) in row 1, (2.2, 2.2) in row 2, and (7.2, 7.2) in row 3, etc...</p>\n\n<p>I want to be able to first check if there are <strong>duplicate neighbors</strong> within every row, remove the duplicates <strong>leaving only the first instance of it</strong>, and give me a count of how many <strong>total</strong> duplicates were removed.</p>\n\n<p>I've tried iterating over each row but that is much too time intensive as this dataframe is very large (36 rows by 260,000 columns). The pseudo code I'd like to have would follow this logic:</p>\n\n<pre><code>count_dup = 0\nfor index in range(0, len(row_data.columns)):\n    if row_data[index] == row_data[index+1]:\n         count_dup = count_dup + 1\n         row_data[index] = np.nan\n</code></pre>\n\n<p>My pseudo code obviously does not work but the rest would be to remove the NANs by dropping the duplicates off all columns.</p>\n\n<p>The output would be:</p>\n\n<pre><code>row_data_dropped = pd.DataFrame({0 : [1.1, 1.2, 1.3, 1.4, 1.5, 1.6],\n1 : [2.3, 2.2, 2.3, 2.4, 2.5, 2.6],\n2 : [2.4, 2.2, 2.3, 2.4, 2.6, 2.7],\n3 : [7.1, 7.2, 7.3, 7.4, 7.5, 7.6]}).T\n\ntotal_dropped_neighbors = 8\n</code></pre>\n\n<p>Is there any way I can do this?</p>\n"}, {"tags": ["python", "list", "tuples"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1568838704, "post_id": 58000297, "comment_id": 102406500, "body": "how about <code>[&#39;tuple1_1&#39;, &#39;tuple2_2&#39;, &#39;tuple2_1&#39;, &#39;tuple1_2&#39;, &#39;tuple_1&#39;]</code> ? any variations or your list would be eternally constant?"}], "answers": [{"tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 2, "last_activity_date": 1568838646, "creation_date": 1568838646, "answer_id": 58000335, "question_id": 58000297, "link": "https://stackoverflow.com/questions/58000297/python-list-to-list-of-tuples-list-2/58000335#58000335", "title": "Python list to list of tuples / list %2", "body": "<p>You can use the step portion of the slice syntax to step over every other element, and zip together the two slices, each starting at the 0th and 1st element respectively:</p>\n\n<pre><code>x = ['tuple1_1', 'tuple1_2', 'tuple2_1', 'tuple2_2']\nlist(zip(x[::2], x[1::2]))\n# returns:\n[('tuple1_1', 'tuple1_2'), ('tuple2_1', 'tuple2_2')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": false, "score": 2, "last_activity_date": 1568838651, "creation_date": 1568838651, "answer_id": 58000339, "question_id": 58000297, "link": "https://stackoverflow.com/questions/58000297/python-list-to-list-of-tuples-list-2/58000339#58000339", "title": "Python list to list of tuples / list %2", "body": "<p>I think you should <a href=\"https://stackoverflow.com/questions/4998427/how-to-group-elements-in-python-by-n-elements\">group the elements in your list</a> in groups of two, and convert that group into a tuple as follows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; l = ['tuple1_1', 'tuple1_2', 'tuple2_1', 'tuple2_2']\n&gt;&gt;&gt; N = 2\n&gt;&gt;&gt; subList = [tuple(l[n:n+N]) for n in range(0, len(l), N)]\n&gt;&gt;&gt; sublist\n[('tuple1_1', 'tuple1_2'), ('tuple2_1', 'tuple2_2')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "is_accepted": false, "score": 1, "last_activity_date": 1568839044, "last_edit_date": 1568839044, "creation_date": 1568838669, "answer_id": 58000344, "question_id": 58000297, "link": "https://stackoverflow.com/questions/58000297/python-list-to-list-of-tuples-list-2/58000344#58000344", "title": "Python list to list of tuples / list %2", "body": "<pre class=\"lang-py prettyprint-override\"><code>lis = [1,2,3,4]\nlist(zip(*([iter(lis)]*2)))\n</code></pre>\n\n<p>This returns \n<code>[(1,2), (3,4)]</code>\nThe list can be composed of any other data types.\nFor grouping some other list into tuples of length n, \njust replace 2 with n.</p>\n"}], "owner": {"reputation": 13608, "user_id": 2587904, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/31ZTY.jpg?s=128&g=1", "display_name": "Georg Heiler", "link": "https://stackoverflow.com/users/2587904/georg-heiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1568838970, "answer_count": 3, "score": 0, "last_activity_date": 1568839044, "creation_date": 1568838420, "question_id": 58000297, "link": "https://stackoverflow.com/questions/58000297/python-list-to-list-of-tuples-list-2", "closed_reason": "Duplicate", "title": "Python list to list of tuples / list %2", "body": "<p>how can a list:</p>\n\n<pre><code>['tuple1_1', 'tuple1_2', 'tuple2_1', 'tuple2_2']\n</code></pre>\n\n<p>elegantly be transformed to a list of tuples:</p>\n\n<pre><code>[('tuple1_1', 'tuple1_2'), ('tuple2_1', 'tuple2_2')]\n</code></pre>\n\n<p>in python?</p>\n\n<p>Something like <code>%2</code> to form tuples maybe?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 2048, "user_id": 10552687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd4bd62f003f927fbf2881ba3a31716?s=128&d=identicon&r=PG&f=1", "display_name": "dvo", "link": "https://stackoverflow.com/users/10552687/dvo"}, "edited": false, "score": 2, "creation_date": 1568838436, "post_id": 58000279, "comment_id": 102406404, "body": "How about simply: <code>[A-Z]{3}_[0-9]{4}</code>"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568838705, "post_id": 58000279, "comment_id": 102406501, "body": "<code>reg = re.compile(r&#39;^[A-Z]{3}-[0-9]{4}$&#39;)</code> and then <code>data_period = list(filter(reg.search, col_headers))</code>"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568839792, "post_id": 58000279, "comment_id": 102406881, "body": "<code>reg = re.compile(r&#39;^(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV&zwnj;&#8203;|DEC)-[0-9]{4}$&#39;)</code> and then <code>data_period = list(filter(reg.search, col_headers))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568839173, "post_id": 58000417, "comment_id": 102406660, "body": "This a wrong solution, as <code>re.match</code> does not require a full string match in Python. Besides, it will also match non-month data. See <a href=\"https://stackoverflow.com/questions/25034837/validate-month-year-format\">the solution here</a>."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568839524, "post_id": 58000417, "comment_id": 102406786, "body": "@WiktorStribizew, thanks for your comment. I haven&#39;t dug into this module too much."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 55, "user_id": 11168461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krx-RQzpTco/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4x0DkjwhrIuDhvOMnDg0ByuDO9g/mo/photo.jpg?sz=128", "display_name": "0tKali", "link": "https://stackoverflow.com/users/11168461/0tkali"}, "edited": false, "score": 0, "creation_date": 1568839751, "post_id": 58000417, "comment_id": 102406863, "body": "@0tKali It will actually match <code>EED_0000</code> - do you want this match?"}, {"owner": {"reputation": 55, "user_id": 11168461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krx-RQzpTco/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4x0DkjwhrIuDhvOMnDg0ByuDO9g/mo/photo.jpg?sz=128", "display_name": "0tKali", "link": "https://stackoverflow.com/users/11168461/0tkali"}, "edited": false, "score": 1, "creation_date": 1568840199, "post_id": 58000417, "comment_id": 102407027, "body": "I dont mind, Yes I would want to match such values as well so that I know something is wrong with the data"}, {"owner": {"reputation": 55, "user_id": 11168461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krx-RQzpTco/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4x0DkjwhrIuDhvOMnDg0ByuDO9g/mo/photo.jpg?sz=128", "display_name": "0tKali", "link": "https://stackoverflow.com/users/11168461/0tkali"}, "edited": false, "score": 0, "creation_date": 1568840376, "post_id": 58000417, "comment_id": 102407081, "body": "Comments from dvo , WiktorStribi\u017cew and lmiguelvargasf are extremely helpful. Really appreciate your help."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 55, "user_id": 11168461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krx-RQzpTco/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4x0DkjwhrIuDhvOMnDg0ByuDO9g/mo/photo.jpg?sz=128", "display_name": "0tKali", "link": "https://stackoverflow.com/users/11168461/0tkali"}, "edited": false, "score": 0, "creation_date": 1568840455, "post_id": 58000417, "comment_id": 102407104, "body": "@0tKali, no worries, I appreciate you validated my answer."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568840491, "post_id": 58000417, "comment_id": 102407116, "body": "@WiktorStribizew, Sir, you are really good for regular expressions."}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 0, "last_activity_date": 1568840117, "last_edit_date": 1568840117, "creation_date": 1568839031, "answer_id": 58000417, "question_id": 58000279, "link": "https://stackoverflow.com/questions/58000279/match-characters-and-digits-of-fixed-length-and-one-occurance-in-python/58000417#58000417", "title": "Match characters and digits of fixed length and one occurance in Python", "body": "<p><strong>Update:</strong> based on @WiktorStribi\u017cew observation that <code>re.match</code> does not require a full string match in Python</p>\n\n<p>The regex I am using is based upon the one that @dvo provided in a comment:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\nREGEX = '^[A-Z]{3}_[0-9]{4}$'\ncol_headers = ['JUL_2018', 'AUG_2018', 'SEP_2018', 'OCT_2018', 'NOV_2018', 'DEC_2018', 'JAN_2019', 'FEB_2019', 'MAR_2019', 'APR_2019', 'MAY_2019', 'JUN_2019', 'MAT_YA_1', 'MAT_TY_1', 'YTD_YA_1', 'YTD_TY_1', 'L3M_YA_1', 'L1M_YA_1']\nregex = re.compile(REGEX)\ndata_period = list(filter(regex.search, col_headers))\n\n</code></pre>\n\n<p>Once again, based on a comment made by @WiktorStribi\u017cew, if you do not want to match something as <code>\"SXX_0012\"</code> or <code>\"XYZ_0000\"</code>, you should use the regex he has provided in a comment:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>REGEX = r'^(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)-[0-9]{4}$'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1568839489, "creation_date": 1568839489, "answer_id": 58000509, "question_id": 58000279, "link": "https://stackoverflow.com/questions/58000279/match-characters-and-digits-of-fixed-length-and-one-occurance-in-python/58000509#58000509", "title": "Match characters and digits of fixed length and one occurance in Python", "body": "<p>Rather than use regex for this, you should just try to parse it as a date in the first place:</p>\n\n<pre><code>from datetime import datetime\ndate_fmt = \"%b_%Y\"\nfor c in col_headers:\n    try:\n        d = datetime.strptime(c, date_fmt)\n        data_period.append(c) # Or just save the datetime object directly\n    except ValueError:\n        pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 784, "user_id": 10804423, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-beoCeR4PSSM/AAAAAAAAAAI/AAAAAAAAAHE/em5A5GKGLs0/photo.jpg?sz=128", "display_name": "iggy12345", "link": "https://stackoverflow.com/users/10804423/iggy12345"}, "is_accepted": false, "score": 0, "last_activity_date": 1568839563, "creation_date": 1568839563, "answer_id": 58000525, "question_id": 58000279, "link": "https://stackoverflow.com/questions/58000279/match-characters-and-digits-of-fixed-length-and-one-occurance-in-python/58000525#58000525", "title": "Match characters and digits of fixed length and one occurance in Python", "body": "<p>The part of this code that is actually doing the matching in your solution is this</p>\n\n<pre><code>[A-Z_0-9\\d]{8}\n</code></pre>\n\n<p>The problem with this is that you're asking to find exactly 8 characters that include <code>A-Z</code>, <code>_</code>, <code>0-9</code>, and <code>\\d</code>. Now, <code>\\d</code> is equivalent to <code>0-9</code>, so you can eliminate that, but that doesn't solve the whole problem, the issue here is that you've encased the entire solution in brackets <code>[]</code>. Basically, your string will match anything that is 8 characters long and includes the above characters, ie: A_19_KJ9</p>\n\n<p>What you need to do is specify that you want exactly 3 <code>A-Z</code> characters, then a single <code>_</code>, then 4 <code>\\d</code>, see below:</p>\n\n<pre><code>[A-Z]{3}_\\d{4}\n</code></pre>\n\n<p>This will match anything with exactly 3 <code>A-Z</code> characters, then a single <code>_</code>, then 4 <code>\\d</code>(any numeric digit)</p>\n\n<p>For a better understanding of regex, I'd encourage you to use an online tool, like <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a></p>\n"}], "owner": {"reputation": 55, "user_id": 11168461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krx-RQzpTco/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4x0DkjwhrIuDhvOMnDg0ByuDO9g/mo/photo.jpg?sz=128", "display_name": "0tKali", "link": "https://stackoverflow.com/users/11168461/0tkali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "accepted_answer_id": 58000417, "answer_count": 3, "score": 2, "last_activity_date": 1568840117, "creation_date": 1568838306, "question_id": 58000279, "link": "https://stackoverflow.com/questions/58000279/match-characters-and-digits-of-fixed-length-and-one-occurance-in-python", "title": "Match characters and digits of fixed length and one occurance in Python", "body": "<p>I have a list in Python with values </p>\n\n<pre><code>['JUL_2018', 'AUG_2018', 'SEP_2018', 'OCT_2018', 'NOV_2018', 'DEC_2018', 'JAN_2019', 'FEB_2019', 'MAR_2019', 'APR_2019', 'MAY_2019', 'JUN_2019', 'MAT_YA_1', 'MAT_TY_1', 'YTD_YA_1', 'YTD_TY_1', 'L3M_YA_1', 'L1M_YA_1']\n</code></pre>\n\n<p>I want to match only strings where length is 8 and there are 3 characters before underscore and 4 digits after underscore so I eliminate values not required. I am interested only in the MMM_YYYY values from above list.</p>\n\n<p>Tried below and I am not able to filter values like <code>YTD_TY_1</code> which has multiple underscores.</p>\n\n<pre><code>        for c in col_headers:\n            d= (re.match('^(?=.*\\d)(?=.*[A-Z0-9])[A-Z_0-9\\d]{8}$',c))\n            if d:\n                data_period.append(d[0])\n</code></pre>\n"}, {"tags": ["python", "pickle", "numba"], "comments": [{"owner": {"reputation": 4102, "user_id": 10366273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1c2BX.jpg?s=128&g=1", "display_name": "MyNameIsCaleb", "link": "https://stackoverflow.com/users/10366273/mynameiscaleb"}, "edited": false, "score": 0, "creation_date": 1568838221, "post_id": 58000229, "comment_id": 102406314, "body": "For reference: <a href=\"https://docs.python.org/3/library/pickle.html#what-can-be-pickled-and-unpickled\" rel=\"nofollow noreferrer\">here</a> is what can and cannot be pickled."}, {"owner": {"reputation": 4102, "user_id": 10366273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1c2BX.jpg?s=128&g=1", "display_name": "MyNameIsCaleb", "link": "https://stackoverflow.com/users/10366273/mynameiscaleb"}, "edited": false, "score": 1, "creation_date": 1568838320, "post_id": 58000229, "comment_id": 102406355, "body": "You may able to just pickle the data portion follow instructions <a href=\"https://docs.python.org/3/library/pickle.html#pickling-class-instances\" rel=\"nofollow noreferrer\">here</a> although I&#39;m not sure because I haven&#39;t tried it."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 2, "creation_date": 1568838326, "post_id": 58000229, "comment_id": 102406359, "body": "I suppose the MemInfo objects are not pure Python, but are implemented in C and manage resources (e.g. memory) in such a way that they can&#39;t be reasonably unpickled elsewhere. Export the data into a more portable format."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1568838451, "post_id": 58000229, "comment_id": 102406408, "body": "the dict type variable <i>can</i> be pickled, but not the contents, in that case."}], "answers": [{"tags": [], "owner": {"reputation": 2110, "user_id": 1714907, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ezkwc.jpg?s=128&g=1", "display_name": "NazKazi", "link": "https://stackoverflow.com/users/1714907/nazkazi"}, "is_accepted": false, "score": 2, "last_activity_date": 1576452160, "creation_date": 1576452160, "answer_id": 59348949, "question_id": 58000229, "link": "https://stackoverflow.com/questions/58000229/why-a-dict-type-variable-content-cannot-be-pickled/59348949#59348949", "title": "Why a dict type variable content cannot be pickled?", "body": "<p>Great question. I just faced the same error and found the solution. The error occurs because numba (C language) returns a pointer instead of values like python in term of array or dict. On the other hand, pickle is asking for an python object as input. So, all you need to do is to change the numba dict to an python dict object before pickling it using dict() function.</p>\n\n<pre><code>import pickle\nfilehandler = open(\"file.dat\", 'wb') \npickle.dump(dict(myDict), filehandler, pickle.HIGHEST_PROTOCOL)\nfilehandler.close()\n</code></pre>\n"}], "owner": {"reputation": 709, "user_id": 898160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfc3d05d23774b06d0b9d2c2e0bcef9?s=128&d=identicon&r=PG", "display_name": "user898160", "link": "https://stackoverflow.com/users/898160/user898160"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576452160, "creation_date": 1568838072, "question_id": 58000229, "link": "https://stackoverflow.com/questions/58000229/why-a-dict-type-variable-content-cannot-be-pickled", "title": "Why a dict type variable content cannot be pickled?", "body": "<p>I have to use the numba's dict (numba.typed.typeddict.Dict) type to define a dictionary:</p>\n\n<pre><code>@njit\ndef init_numba_dict():\n    x = numpy.array([0], dtype=numpy.int32)\n    return {\"01234-5\": x[0], \"0-1\": x[0]}\n\nmyDict = init_numba_dict()\n</code></pre>\n\n<p>Now I need to save it to a file. I thought the following code shall work:</p>\n\n<pre><code>import pickle\nfilehandler = open(\"file.dat\", 'wb') \npickle.dump(myDict , filehandler, pickle.HIGHEST_PROTOCOL)\nfilehandler.close()\n</code></pre>\n\n<p>I got this error: \"TypeError: can't pickle _nrt_python._MemInfo objects\"</p>\n\n<p>Any hint? How can I save and restorethe content of a numba.typed.typeddict.Dict to a file?</p>\n"}, {"tags": ["python", "arrays", "numpy", "duplicates"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1568838258, "post_id": 58000218, "comment_id": 102406333, "body": "Can you give a better definition of close? Which values should you keep?"}, {"owner": {"reputation": 959, "user_id": 3080600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ceaf8fe0241610f0581b4bf28119e7?s=128&d=identicon&r=PG&f=1", "display_name": "user3080600", "link": "https://stackoverflow.com/users/3080600/user3080600"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1568838318, "post_id": 58000218, "comment_id": 102406353, "body": "@DanielMesejo within 10% of the standard deviation should do it"}, {"owner": {"reputation": 11092, "user_id": 3066077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666991815/picture?type=large", "display_name": "DarrylG", "link": "https://stackoverflow.com/users/3066077/darrylg"}, "edited": false, "score": 2, "creation_date": 1568838407, "post_id": 58000218, "comment_id": 102406397, "body": "If you first sort the values, then you can remove values based upon &quot;closeness&quot; in a single loop."}, {"owner": {"reputation": 4102, "user_id": 10366273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1c2BX.jpg?s=128&g=1", "display_name": "MyNameIsCaleb", "link": "https://stackoverflow.com/users/10366273/mynameiscaleb"}, "reply_to_user": {"reputation": 11092, "user_id": 3066077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666991815/picture?type=large", "display_name": "DarrylG", "link": "https://stackoverflow.com/users/3066077/darrylg"}, "edited": false, "score": 1, "creation_date": 1568838485, "post_id": 58000218, "comment_id": 102406422, "body": "Adding on to @DarrylG if you sort, go to each one, see if the next one is equal or less than the current one plus 10% standard deviation, if so remove and move on to check the next until the next is not within that, then go to the next number and go again. You can move in a single direction."}, {"owner": {"reputation": 745, "user_id": 7470925, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YxVDude9eeE/AAAAAAAAAAI/AAAAAAAABTM/i60VX3LXLQQ/photo.jpg?sz=128", "display_name": "jeannej", "link": "https://stackoverflow.com/users/7470925/jeannej"}, "edited": false, "score": 0, "creation_date": 1568841778, "post_id": 58000218, "comment_id": 102407579, "body": "can&#39;t you do something with <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.isclose.html\" rel=\"nofollow noreferrer\">isclose</a> numpy function?"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1568892038, "post_id": 58000218, "comment_id": 102423862, "body": "A simple possibility is eg. <code>mean=arr.mean();std=arr.std();result=arr[np.abs(arr-mean)&lt;st&zwnj;&#8203;d*0.1]</code>"}], "owner": {"reputation": 959, "user_id": 3080600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ceaf8fe0241610f0581b4bf28119e7?s=128&d=identicon&r=PG&f=1", "display_name": "user3080600", "link": "https://stackoverflow.com/users/3080600/user3080600"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568838018, "creation_date": 1568838018, "question_id": 58000218, "link": "https://stackoverflow.com/questions/58000218/removing-values-from-an-array-that-are-close-to-eachother-efficently", "title": "Removing values from an array that are close to eachother efficently", "body": "<p>I have a numpy array that has values like the following</p>\n\n<pre><code>[0.982555, 1.034195, 0.952625, 0.98255,  0.92392,  0.95262,  0.906955, 0.923915,\n 0.868995, 0.90695,  0.777775, 0.803675, 0.80368,  0.82777,  0.828215, 0.86899,\n 0.752685, 0.77777,  0.70911,  0.73267,  0.732965, 0.752675]\n</code></pre>\n\n<p>I want to remove the \"duplicate\" values however these values are not exactly the same, for example 0.77777 and 0.777775. Which one gets deleted doesn't matter, nor does the order of the array. Is there a way to do this more efficiently?</p>\n\n<p>I was thinking of using a standard deviation and a nested for loop but I was wanting something with better performance. Any ideas?</p>\n"}, {"tags": ["python", "logging"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12086917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HJw5kSE7kbE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcps_tYCPtnRvFB1_DU5kntM3o8Qw/photo.jpg?sz=128", "display_name": "William Afonso", "link": "https://stackoverflow.com/users/12086917/william-afonso"}, "edited": false, "score": 0, "creation_date": 1568881061, "post_id": 58000318, "comment_id": 102417921, "body": "Hello Chepner, thank you for your answer.  Indeed, adding &quot;logger.setLevel(logging.DEBUG)&quot; helps to print out the logging messages.  But why is there a logging.XHandler.setLevel() method if it does not work? And how could I distinguish handler configurations if I finally have to errase every configurations by setting new configurations to the logger module with logger.setLevel(logging.Y)? To finish, the second problem, with the superposing printings on the console is not solved..."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 11, "user_id": 12086917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HJw5kSE7kbE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcps_tYCPtnRvFB1_DU5kntM3o8Qw/photo.jpg?sz=128", "display_name": "William Afonso", "link": "https://stackoverflow.com/users/12086917/william-afonso"}, "edited": false, "score": 0, "creation_date": 1568897867, "post_id": 58000318, "comment_id": 102427240, "body": "A message has to pass through the logger before the handlers decide if they will &quot;react&quot; as well."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1568838553, "creation_date": 1568838553, "answer_id": 58000318, "question_id": 58000217, "link": "https://stackoverflow.com/questions/58000217/why-is-logging-not-considering-my-configurations/58000318#58000318", "title": "Why is logging not considering my configurations?", "body": "<p>You've only set the level on your two handlers, not on the logger itself.</p>\n\n<pre><code>logger = logging.getLogger(__name__)\nformatter = logging.Formatter('%(asctime)s:%(levelname)s:%(name)s:%(message)s')\n\nfile_log_handler = logging.FileHandler('logging_test.log')\nfile_log_handler.setLevel(logging.DEBUG)\nfile_log_handler.setFormatter(formatter)\nlogger.addHandler(file_log_handler)\n\nstream_log_handler = logging.StreamHandler(sys.stdout)\nstream_log_handler.setLevel(logging.DEBUG)\nstream_log_handler.setFormatter(formatter)\nlogger.addHandler(stream_log_handler)\n\nlogger.setLevel(logging.DEBUG)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12086917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HJw5kSE7kbE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcps_tYCPtnRvFB1_DU5kntM3o8Qw/photo.jpg?sz=128", "display_name": "William Afonso", "link": "https://stackoverflow.com/users/12086917/william-afonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568838553, "creation_date": 1568838017, "question_id": 58000217, "link": "https://stackoverflow.com/questions/58000217/why-is-logging-not-considering-my-configurations", "title": "Why is logging not considering my configurations?", "body": "<p>I would like to use the logging Library to print logging messages on the console I am running my script, and in logging files.</p>\n\n<p>However, I am facing two problems :</p>\n\n<p>1) the setLevel function does not seem to work</p>\n\n<p>2) When I print logging messages on the console, it appears that the buffer storing the logging messages of a run is not flushed between two run. How should I do to dispose of a clean StreamHandler?</p>\n\n<p>To solve the first problem, I tried to change the logger level to the minimum (logging.DEBUG), but it doesn't work</p>\n\n<p>To solve the second problem, I already tried the followings: </p>\n\n<p>1) sys.stdout.flush() before declaring \"Stream_log_handler = logging.StreamHandler(sys.stdout)\"</p>\n\n<p>2) logger.propagate = False</p>\n\n<p>3) Stream_log_handler = logging.StreamHandler(sys.stdout)</p>\n\n<p>handlers = logger.handlers\nfor handler in handlers : \n     logger.removeHandler(handler)</p>\n\n<p>4) logging.shutdown()</p>\n\n<p>None of these are successful.</p>\n\n<p>Here is a portion of my code:</p>\n\n<pre><code>import logging\nimport sys\n\nlogger = logging.getLogger(__name__)\nformatter = logging.Formatter('%(asctime)s:%(levelname)s:%(name)s:%(message)s')\nlevel = 'DEBUG'\n\nfile_log_handler = logging.FileHandler('logging_test.log')\nfile_log_handler.setLevel(logging.DEBUG)\nfile_log_handler.setFormatter(formatter)\nlogger.addHandler(file_log_handler)\n\nstream_log_handler = logging.StreamHandler(sys.stdout)\nstream_log_handler.setLevel(logging.DEBUG)\nstream_log_handler.setFormatter(formatter)\nlogger.addHandler(stream_log_handler)\n\ndef add(x,y):\n    \"\"\"Add function\"\"\"\n    result = x+y\n    logger.info('Add result : {}'.format(result))\n    return result\n\ndef substract(x,y):\n    \"\"\"Substract function\"\"\"\n    result = x-y\n    logger.debug('Substract result : {}'.format(result))\n    return result\n\ndef multiply(x,y):\n    \"\"\"Multiply function\"\"\"\n    result = x*y\n    logger.warning('Multiply result : {}'.format(result))\n    return result\n\ndef divide(x,y):\n    \"\"\"Divide function\"\"\"\n    try:\n        result = x-y\n        logger.debug('Divide result : {}'.format(result))\n    except ZeroDivisionError:\n        logger.error('Tried to divide by zero')\n    else:\n        return result\n\n\nnum_1 = 10\nnum_2 = 5\n\nadd_result = add(num_1, num_2)\n\nsub_result = substract(num_1, num_2)\n\nmul_result = multiply(num_1, num_2)\n\ndiv_result = divide(num_1, num_2)\n</code></pre>\n\n<p>In the console, I get :</p>\n\n<ul>\n<li>At the first run :</li>\n</ul>\n\n<p>In [3]: runfile('...')</p>\n\n<p>2019-09-18 21:56:56,636:WARNING:<strong>main</strong>:Multiply result : 50</p>\n\n<ul>\n<li>At the second run :</li>\n</ul>\n\n<p>In [4]: runfile('...')</p>\n\n<p>2019-09-18 21:56:56,636:WARNING:<strong>main</strong>:Multiply result : 50</p>\n\n<p>2019-09-18 21:56:56,636:WARNING:<strong>main</strong>:Multiply result : 50</p>\n\n<ul>\n<li>At the third run :</li>\n</ul>\n\n<p>In [4]: runfile('...')</p>\n\n<p>2019-09-18 21:56:56,636:WARNING:<strong>main</strong>:Multiply result : 50</p>\n\n<p>2019-09-18 21:56:56,636:WARNING:<strong>main</strong>:Multiply result : 50</p>\n\n<p>2019-09-18 21:56:56,636:WARNING:<strong>main</strong>:Multiply result : 50</p>\n\n<ul>\n<li>etc.</li>\n</ul>\n\n<p>Why are the logging messages stacking from a run to another?\nWhy are only the WARNING level messages that are printed?</p>\n"}, {"tags": ["python", "python-3.x", "machine-learning", "scikit-learn", "pipeline"], "answers": [{"tags": [], "owner": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "is_accepted": false, "score": 1, "last_activity_date": 1568857932, "creation_date": 1568857932, "answer_id": 58002661, "question_id": 58000187, "link": "https://stackoverflow.com/questions/58000187/how-do-i-swap-accuracy-with-another-performance-metric-from-the-score-function/58002661#58002661", "title": "How do I swap accuracy with another performance metric from the score() function after fitting the ML model in Pipeline with scikit-learn?", "body": "<p>The short answer to your question is no, unless you hack your way through and redefine/overwrite the <code>scikit-learn</code> functions.</p>\n\n<p>When you are using <code>pipe.score()</code>, it calls the score method from the classifier that is in the end of the pipeline. </p>\n\n<p>Now, what is happening under the hood is that all classifiers in <code>scikit-learn</code> are based on the <code>ClassifierMixin</code> class, for which <code>.score()</code> is defined through <code>accuracy_score</code>, and this is hard-coded (see <a href=\"https://github.com/scikit-learn/scikit-learn/blob/1495f69242646d239d89a5713982946b8ffcf9d9/sklearn/base.py#L328\" rel=\"nofollow noreferrer\">here</a>).</p>\n"}], "owner": {"reputation": 3463, "user_id": 3635544, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0519fbe01a75858617b622fbcec4c24d?s=128&d=identicon&r=PG&f=1", "display_name": "KubiK888", "link": "https://stackoverflow.com/users/3635544/kubik888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568878263, "creation_date": 1568837872, "last_edit_date": 1568878263, "question_id": 58000187, "link": "https://stackoverflow.com/questions/58000187/how-do-i-swap-accuracy-with-another-performance-metric-from-the-score-function", "title": "How do I swap accuracy with another performance metric from the score() function after fitting the ML model in Pipeline with scikit-learn?", "body": "<p>Here is a part of my code:</p>\n\n<pre><code>def ml_pipeline(self):\n    if self.control_panel['ml_pipeline_switch']:\n        self.model = make_pipeline(self.preprocessor, self.control_panel['ml_algo'][1])\n        self.model.fit(self.X_train, self.y_train)\n\ndef ml_pipeline_result(self, show_control_panel_switch=True): \n    if self.control_panel['ml_pipeline_switch']:\n        print('Model score (training set): %.3f' % self.model.score(self.X_train, self.y_train))\n        print('Model score (test set): %.3f' % self.model.score(self.X_test, self.y_test))\n</code></pre>\n\n<p>The <code>score()</code> seems to be producing accuracy. How can I swap accuracy with another performance metrics such as <code>F1-macro</code> or <code>recall-macro</code>? I couldn't find anything in the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html\" rel=\"nofollow noreferrer\">document</a>.</p>\n"}, {"tags": ["python", "recursion", "recursive-backtracking"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1568837831, "post_id": 58000147, "comment_id": 102406160, "body": "Add <code>nonlocal min_path</code> to the inner function."}, {"owner": {"reputation": 794, "user_id": 3655266, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e560cec04520e25363483b1b066efe38?s=128&d=identicon&r=PG&f=1", "display_name": "user3655266", "link": "https://stackoverflow.com/users/3655266/user3655266"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568837963, "post_id": 58000147, "comment_id": 102406207, "body": "Thanks ! that works. Is this a good practice to us nonlocal"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568838130, "post_id": 58000147, "comment_id": 102406281, "body": "It&#39;s designed precisely for this kind of use."}, {"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1568840138, "post_id": 58000147, "comment_id": 102407005, "body": "nonlocal is like global but for closures"}], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 5503828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dabcf662a8ed25def4e4069f92c63c9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Elliott", "link": "https://stackoverflow.com/users/5503828/adam-elliott"}, "is_accepted": false, "score": 0, "last_activity_date": 1568839299, "creation_date": 1568839299, "answer_id": 58000464, "question_id": 58000147, "link": "https://stackoverflow.com/questions/58000147/how-to-use-a-shared-variable-during-recursion-in-python/58000464#58000464", "title": "How to use a shared variable during Recursion in Python", "body": "<p>Your variable min_path is scoped to the main method and isn't available to functions that are members of your class object. In order to reference it inside the <strong>backtrack</strong> method, you'll either need to </p>\n\n<ol>\n<li>Define min_path as a local variable in the backtrack method (which could cause additional issues since you're calling it recursively):</li>\n</ol>\n\n<pre><code>class Solution:\ndef minPathSum(self, grid: List[List[int]]) -&gt; int:\n    if not grid:\n        return\n\n    R = len(grid)\n    C = len(grid)\n    min_path_main = None\n\n    min_path_main = backtrack(grid, 0, 0,0)\n\n    return min_path_main\n\n  def backtrack(grid, i, j, current_path):\n    min_path = None\n    if i &gt;= R or j&gt;= C:\n        break\n      current_path += grid[i][j]\n      if i == R-1 and j == C-1:\n        if not min_path:\n            min_path = current_path\n        else:\n            min_path = min(min_path, current_path)\n            print(min_path)\n            break\n    # it's possible you'll need extra logic here to manage the output. \n    output1 = backtrack(grid, i, j+1, current_path)\n    output2 = backtrack(grid, i+1, j, current_path)\n\n  return min_path\n</code></pre>\n\n<ol start=\"2\">\n<li>Define the variable as a class variable:</li>\n</ol>\n\n<pre><code>class Solution:\ndef __init__(self):\n  self.min_path = None\n\ndef minPathSum(self, grid: List[List[int]]) -&gt; int:\n    if not grid:\n        return\n\n    R = len(grid)\n    C = len(grid)\n\n    backtrack(grid, 0, 0,0)\n\n    return self.min_path\n\ndef backtrack(grid, i, j, current_path):\n    if i &gt;= R or j&gt;= C:\n        break\n      current_path += grid[i][j]\n      if i == R-1 and j == C-1:\n        if not self.min_path:\n            self.min_path = current_path\n        else:\n            self.min_path = min(self.min_path, current_path)\n            print(self.min_path)\n            break\n    backtrack(grid, i, j+1, current_path)\n    backtrack(grid, i+1, j, current_path)\n\n  return\n</code></pre>\n\n<p>May have to play around with it a little. I don't have input data, so I didn't run the code. But those are the ways you would implement the solutions I've offered. </p>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1568850310, "last_edit_date": 1568850310, "creation_date": 1568845871, "answer_id": 58001507, "question_id": 58000147, "link": "https://stackoverflow.com/questions/58000147/how-to-use-a-shared-variable-during-recursion-in-python/58001507#58001507", "title": "How to use a shared variable during Recursion in Python", "body": "<p>Since the goal is to simply find the minimum sum, there is no need to keep track of the coordinates of the path. You can instead make recursive calls with what's left of the grid from the perspective of the step you're taking:</p>\n\n<pre><code>def min_sum(g):\n    if not g or not g[0]:\n        return float('inf')\n    return g[0][0] + ((len(g) &gt; 1 or len(g[0]) &gt; 1) and min(map(min_sum, (g[1:], [*zip(*g)][1:]))))\n</code></pre>\n\n<p>so that:</p>\n\n<pre><code>min_sum([\n  [1,3,1],\n  [1,5,1],\n  [4,2,1]\n])\n</code></pre>\n\n<p>returns: <code>7</code></p>\n"}], "owner": {"reputation": 794, "user_id": 3655266, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e560cec04520e25363483b1b066efe38?s=128&d=identicon&r=PG&f=1", "display_name": "user3655266", "link": "https://stackoverflow.com/users/3655266/user3655266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568850310, "creation_date": 1568837668, "last_edit_date": 1568839209, "question_id": 58000147, "link": "https://stackoverflow.com/questions/58000147/how-to-use-a-shared-variable-during-recursion-in-python", "title": "How to use a shared variable during Recursion in Python", "body": "<p>I am implementing a backtracking based recursive solution and want to update the variable min_path based on the conditions. If I define the variable outside the recursive function, I get a reference error, what would be the best way to implement such a solution</p>\n\n<pre><code>class Solution:\ndef minPathSum(self, grid: List[List[int]]) -&gt; int:\n    if not grid:\n        return\n\n\n    R = len(grid)\n    C = len(grid[0])\n    min_path = None\n\n    def backtrack(grid, i, j, current_path):\n\n        if i &gt;= R or j&gt;= C:\n            return\n        current_path += grid[i][j]\n        if i == R-1 and j == C-1:\n            if not min_path:\n                min_path = current_path\n            else:\n                min_path = min(min_path, current_path)\n            print(min_path)\n            return\n        backtrack(grid, i, j+1, current_path)\n        backtrack(grid, i+1, j, current_path)\n\n    backtrack(grid, 0, 0,0)\n\n    return min_path\n</code></pre>\n\n<p>For reference, this is the question I am trying to solve : <a href=\"https://leetcode.com/problems/minimum-path-sum/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/minimum-path-sum/</a></p>\n"}, {"tags": ["python", "django", "admin"], "comments": [{"owner": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568837656, "post_id": 58000112, "comment_id": 102406087, "body": "Did you add a <code>path</code> to your admin site in cookbook\\cookbook\\urls.py?"}, {"owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "reply_to_user": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568837809, "post_id": 58000112, "comment_id": 102406151, "body": "INSTALLED_APPS = (     &#39;django_admin_shell&#39;,     &#39;django.contrib.auth&#39;,     &#39;django.contrib.contenttypes&#39;,     &#39;django.contrib.sessions&#39;,     &#39;django.contrib.sites&#39;,     &#39;django.contrib.messages&#39;,     # Uncomment the next line to enable the admin:     &#39;django.contrib.admin&#39;,     &#39;recipes&#39; )"}, {"owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "reply_to_user": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568837841, "post_id": 58000112, "comment_id": 102406161, "body": "from django.contrib import admin from django.urls import path  urlpatterns = (    #path(&#39;admin/&#39;, admin.site.urls),     #path(&#39;admin/&#39;, admin.site.urls ),     #urlpatterns = [     #path(&#39;admin/shell/&#39;, django_admin_shell.urls),     path(&#39;admin/&#39;, admin.site.urls), )"}, {"owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "reply_to_user": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568837939, "post_id": 58000112, "comment_id": 102406197, "body": "Hello Jordan, thanks for your answer. Yes I did."}, {"owner": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568837991, "post_id": 58000112, "comment_id": 102406217, "body": "Looks like your paths are commented. Please add it to your question so we can take a better look at it."}, {"owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "reply_to_user": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568838092, "post_id": 58000112, "comment_id": 102406262, "body": "I have tried several variants and therefore commented out a few! urlpatterns =  (path(&#39;admin/&#39;, admin.site.urls),)"}, {"owner": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568838559, "post_id": 58000112, "comment_id": 102406442, "body": "Try removing &#39;django.contrib.sites&#39; if you&#39;re not going to use more than 1 site. Take a look at <a href=\"https://stackoverflow.com/a/9737344/8895630\">this</a> post."}, {"owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "reply_to_user": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568839292, "post_id": 58000112, "comment_id": 102406702, "body": "Thanks a lot. I removed &#39;django.contrib.sites&#39; and try the commands in the python manage.py shell. It doen&#39;t work in my case"}, {"owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "reply_to_user": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568839318, "post_id": 58000112, "comment_id": 102406717, "body": "IntegrityError: UNIQUE constraint failed: django_site.id"}, {"owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "reply_to_user": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568839360, "post_id": 58000112, "comment_id": 102406735, "body": "&#39;--&gt; 383         return Database.Cursor.execute(self, query, params)     384     385     def executemany(self, query, param_list):&#39;"}, {"owner": {"reputation": 599, "user_id": 8895630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhLoF.jpg?s=128&g=1", "display_name": "Jordan M.", "link": "https://stackoverflow.com/users/8895630/jordan-m"}, "edited": false, "score": 0, "creation_date": 1568840080, "post_id": 58000112, "comment_id": 102406979, "body": "After removing <code>django.contrib.sites</code> you don&#39;t need to run the other command, that&#39;s the alternative in case you <b>do</b> need to user more than 1 site. You can&#39;t do both solutions. Just try to run your server, without creating a <code>Site</code> in the <code>shell</code>"}], "answers": [{"comments": [{"owner": {"reputation": 10592, "user_id": 4975981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ETZEG.jpg?s=128&g=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/4975981/ehsan"}, "edited": false, "score": 1, "creation_date": 1599276198, "post_id": 63747417, "comment_id": 112731949, "body": "This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/low-quality-posts/27094039\">From Review</a>"}], "tags": [], "owner": {"reputation": 11, "user_id": 6664513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e893d0150bf68912b649c2cdac4f49bb?s=128&d=identicon&r=PG&f=1", "display_name": "taty", "link": "https://stackoverflow.com/users/6664513/taty"}, "is_accepted": false, "score": 0, "last_activity_date": 1599280191, "last_edit_date": 1599280191, "creation_date": 1599249886, "answer_id": 63747417, "question_id": 58000112, "link": "https://stackoverflow.com/questions/58000112/how-can-i-fix-this-django-admin-issue-django-admin-site-matching-query-does-not/63747417#63747417", "title": "How can I fix this Django admin issue? Django admin Site matching query does not exist", "body": "<p>Add <code>SITE_ID = 1</code> in <code>settings.py</code> file.</p>\n"}], "owner": {"reputation": 1, "user_id": 12087054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1855515faafe078ca16fdc58bd4766e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/12087054/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1599280191, "creation_date": 1568837506, "last_edit_date": 1568844566, "question_id": 58000112, "link": "https://stackoverflow.com/questions/58000112/how-can-i-fix-this-django-admin-issue-django-admin-site-matching-query-does-not", "title": "How can I fix this Django admin issue? Django admin Site matching query does not exist", "body": "<p>My admin does not work. I already tried it for a couple of hours.</p>\n\n<p>The migration works:</p>\n\n<pre><code>C:\\Users\\sebas\\AI_MachineLearning\\Django_Projekt\\pythonprojects\\cookbook&gt;python manage.py migrate\nOperations to perform:\n  Apply all migrations: admin, auth, contenttypes, recipes, sessions, sites\nRunning migrations:\n  No migrations to apply.\n\nC:\\Users\\sebas\\AI_MachineLearning\\Django_Projekt\\pythonprojects\\cookbook&gt;\n\nThe Superuser is created.\n\nRunserver works:\nC:\\Users\\sebas\\AI_MachineLearning\\Django_Projekt\\pythonprojects\\cookbook&gt;python manage.py runserver\nWatching for file changes with StatReloader\nPerforming system checks...\n\nSystem check identified no issues (0 silenced).\nSeptember 18, 2019 - 22:06:57\nDjango version 2.2.5, using settings 'cookbook.settings'\nStarting development server at http://127.0.0.1:8000/\nQuit the server with CTRL-BREAK.\n</code></pre>\n\n<p>If I try the urls <code>../admin</code>:</p>\n\n<p><a href=\"http://dpaste.com/069QF7H\" rel=\"nofollow noreferrer\">http://dpaste.com/069QF7H</a></p>\n\n<hr>\n\n<p><strong>DoesNotExist at /admin/login/</strong></p>\n\n<pre><code>Site matching query does not exist.\n\nRequest Method:     GET\nRequest URL:    http://127.0.0.1:8000/admin/login/?next=/admin/\nDjango Version:     2.2.5\nException Type:     DoesNotExist\nException Value:    \n\nSite matching query does not exist.\n\nException Location:     C:\\Users\\sebas\\.conda\\envs\\pythonDjango\\lib\\site-packages\\django\\db\\models\\query.py in get, line 408\nPython Executable:  C:\\Users\\sebas\\.conda\\envs\\pythonDjango\\python.exe\nPython Version:     3.6.7\nPython Path:    \n\n['C:\\\\Users\\\\sebas\\\\AI_MachineLearning\\\\Django_Projekt\\\\pythonprojects\\\\cookbook',\n 'C:\\\\Users\\\\sebas\\\\.conda\\\\envs\\\\pythonDjango\\\\python36.zip',\n 'C:\\\\Users\\\\sebas\\\\.conda\\\\envs\\\\pythonDjango\\\\DLLs',\n 'C:\\\\Users\\\\sebas\\\\.conda\\\\envs\\\\pythonDjango\\\\lib',\n 'C:\\\\Users\\\\sebas\\\\.conda\\\\envs\\\\pythonDjango',\n 'C:\\\\Users\\\\sebas\\\\.conda\\\\envs\\\\pythonDjango\\\\lib\\\\site-packages']\n\nServer time:    Mi, 18 Sep 2019 21:55:32 +0200\n--------------------------------------------------------------------------\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1568837332, "post_id": 58000041, "comment_id": 102405972, "body": "What pandas version are you using?"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1568837387, "post_id": 58000041, "comment_id": 102405993, "body": "I don&#39;t thiink that should appear for older versions anyway right? Just for indexing on a column"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1568837459, "post_id": 58000041, "comment_id": 102406022, "body": "This happens all the time, when you <code>df</code> is a slice of another (bigger) data."}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1568837497, "post_id": 58000041, "comment_id": 102406033, "body": "I just tested this and it gives me no warnings for pandas 0.25"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1568837503, "post_id": 58000041, "comment_id": 102406035, "body": "I don&#39;t recall getting it for just indexing on a column though, no slicing done here, but not sure on older versions"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1568837620, "post_id": 58000041, "comment_id": 102406076, "body": "<code>df</code> is not the original data frame in the first place. You probably got it from another data frame, hence is a copy and whenever you modify it it&#39;ll raise that warning"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568837758, "post_id": 58000041, "comment_id": 102406126, "body": "The warning has nothing to do with uppercasing string values and everything to do with the fact that you&#39;re setting it on a dataframe which is itself a slice/copy of another dataframe. The title was misleading."}], "owner": {"reputation": 317, "user_id": 11303509, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wv_bZyfxTyw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9r9EDenB4UZFqzq_mZow0Gg5Luw/mo/photo.jpg?sz=128", "display_name": "MAMS", "link": "https://stackoverflow.com/users/11303509/mams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1568837639, "answer_count": 0, "score": 0, "last_activity_date": 1568837710, "creation_date": 1568837202, "last_edit_date": 1568837710, "question_id": 58000041, "link": "https://stackoverflow.com/questions/58000041/how-to-avoid-settingwithcopywarning-warning-when-uppercasing-string-values-in-pa", "closed_reason": "Duplicate", "title": "How to avoid SettingWithCopyWarning warning when uppercasing string values in pandas data frame?", "body": "<p>I want to change all values in a column of my pandas df to uppercase. The values are strings containing both letters and numbers.</p>\n\n<p>I used the code below:</p>\n\n<pre><code>df['Cd'] = df['Cd'].str.upper()\n</code></pre>\n\n<p>The job was performed, however, I got the warning below:</p>\n\n<pre><code>SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n</code></pre>\n\n<p>I then tried the code below:</p>\n\n<pre><code>df['Cd'] = df['Cd'].apply(lambda x: str(x).upper())\n</code></pre>\n\n<p>I still ran to the same warning.</p>\n\n<p>Please advice. Thanks!</p>\n"}, {"tags": ["python", "whoosh"], "comments": [{"owner": {"reputation": 63, "user_id": 6279837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d6ad29ac6e10863da927d40ead6f02?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Ahsan", "link": "https://stackoverflow.com/users/6279837/salman-ahsan"}, "edited": false, "score": 0, "creation_date": 1581416798, "post_id": 57999990, "comment_id": 106417336, "body": "Were you able to do it ? I am also looking to search from multiple index at the same time. Please let me know. Thanks!"}, {"owner": {"reputation": 31, "user_id": 11584886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bcc2430111907651f2f63f8335f58bb?s=128&d=identicon&r=PG&f=1", "display_name": "Yasmina", "link": "https://stackoverflow.com/users/11584886/yasmina"}, "reply_to_user": {"reputation": 63, "user_id": 6279837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d6ad29ac6e10863da927d40ead6f02?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Ahsan", "link": "https://stackoverflow.com/users/6279837/salman-ahsan"}, "edited": false, "score": 0, "creation_date": 1581527445, "post_id": 57999990, "comment_id": 106467467, "body": "Hi, no unfortunately I wasn&#39;t able to :("}, {"owner": {"reputation": 63, "user_id": 6279837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d6ad29ac6e10863da927d40ead6f02?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Ahsan", "link": "https://stackoverflow.com/users/6279837/salman-ahsan"}, "edited": false, "score": 0, "creation_date": 1581574281, "post_id": 57999990, "comment_id": 106482211, "body": "Oh. If I could find anything I will definitely share with you."}], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 4616375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f67eb72da625ceab9919c96006600fd?s=128&d=identicon&r=PG&f=1", "display_name": "Samy", "link": "https://stackoverflow.com/users/4616375/samy"}, "edited": false, "score": 0, "creation_date": 1615005938, "post_id": 66501093, "comment_id": 117564730, "body": "Parallelism is hardly the issue here,  the problem is in the search results. This wouldn&#39;t work on search_page. Also, the sorting relevancy would be screwed up."}, {"owner": {"reputation": 446, "user_id": 4616375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f67eb72da625ceab9919c96006600fd?s=128&d=identicon&r=PG&f=1", "display_name": "Samy", "link": "https://stackoverflow.com/users/4616375/samy"}, "edited": false, "score": 0, "creation_date": 1615006049, "post_id": 66501093, "comment_id": 117564739, "body": "I think the the optimal solution will somehow involve searching multiple indexes as if they were one."}, {"owner": {"reputation": 602, "user_id": 9893725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1K2dZ.jpg?s=128&g=1", "display_name": "Paulo Marques", "link": "https://stackoverflow.com/users/9893725/paulo-marques"}, "reply_to_user": {"reputation": 446, "user_id": 4616375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f67eb72da625ceab9919c96006600fd?s=128&d=identicon&r=PG&f=1", "display_name": "Samy", "link": "https://stackoverflow.com/users/4616375/samy"}, "edited": false, "score": 0, "creation_date": 1615009751, "post_id": 66501093, "comment_id": 117565121, "body": "Well, the question was how to search them at the same time. If there is the need for joining results, then having two indexes maybe is wrong."}, {"owner": {"reputation": 446, "user_id": 4616375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f67eb72da625ceab9919c96006600fd?s=128&d=identicon&r=PG&f=1", "display_name": "Samy", "link": "https://stackoverflow.com/users/4616375/samy"}, "edited": false, "score": 0, "creation_date": 1615049622, "post_id": 66501093, "comment_id": 117574019, "body": "Read the last part of the question: &quot;I can append the results of each index one after the other but I can&#39;t figure out how to sort them or if that is even possible&quot;. The problem with having one monolithic index is that it doesn&#39;t scale very well. You can concurrently search multiple index, but that wouldn&#39;t solve the issue of having to sort them, especially if the search is paginated."}], "tags": [], "owner": {"reputation": 602, "user_id": 9893725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1K2dZ.jpg?s=128&g=1", "display_name": "Paulo Marques", "link": "https://stackoverflow.com/users/9893725/paulo-marques"}, "is_accepted": false, "score": 1, "last_activity_date": 1615230331, "last_edit_date": 1615230331, "creation_date": 1614989236, "answer_id": 66501093, "question_id": 57999990, "link": "https://stackoverflow.com/questions/57999990/search-across-multiple-indexes-at-once-in-whoosh/66501093#66501093", "title": "Search across multiple indexes at once in Whoosh", "body": "<p><strong>Updated on March 8th, 2021</strong></p>\n<p>Based on comments</p>\n<h2>Loading modules</h2>\n<pre><code>from whoosh.index import create_in\nfrom whoosh.fields import *\nfrom whoosh.qparser import QueryParser\n\nimport pandas as pd\n</code></pre>\n<h2>Defining search term</h2>\n<pre><code>TERM = &quot;second&quot;\n</code></pre>\n<h2>Creating indices for this example</h2>\n<pre><code>schema = Schema(title=TEXT(stored=True), path=ID(stored=True), content=TEXT)\nix1 = create_in(&quot;indexdir1&quot;, schema)\n\nschema = Schema(title=TEXT, path=ID(stored=True), content=TEXT(stored=True))\nix2 = create_in(&quot;indexdir2&quot;, schema)\n\nwriter1 = ix1.writer()\nwriter2 = ix2.writer()\n\nfor writer in [writer1, writer2]:\n    writer.add_document(title=u&quot;First document&quot;, path=u&quot;/a&quot;,\n                        content=u&quot;This is the first document we've added! Not the second&quot;)\n    writer.add_document(title=u&quot;Second document&quot;, path=u&quot;/b&quot;,\n                        content=u&quot;The second one is even more interesting than the first one!&quot;)\n    writer.add_document(title=u&quot;Third document&quot;, path=u&quot;/c&quot;,\n                        content=u&quot;You know... This is also different from the second one!&quot;)\n    writer.commit()\n</code></pre>\n<h2>Searching by the term</h2>\n<pre><code>results = []\n\nparser = QueryParser(&quot;title&quot;, ix1.schema)\nquery = parser.parse(TERM)\nresults += list(ix1.searcher().search(query))\n\nparser = QueryParser(&quot;content&quot;, ix1.schema)\nquery = parser.parse(TERM)\nresults += list(ix2.searcher().search(query))\n</code></pre>\n<p>So far your results are</p>\n<pre><code>print(results)\n\n[&lt;Hit {'path': '/b', 'title': 'Second document'}&gt;, &lt;Hit {'content': &quot;This is the first document we've added! Not the second&quot;, 'path': '/a'}&gt;, &lt;Hit {'content': 'You know... This is also different from the second one!', 'path': '/c'}&gt;, &lt;Hit {'content': 'The second one is even more interesting than the first one!', 'path': '/b'}&gt;]\n</code></pre>\n<p>Although the results are together, they are not ordered by anything.</p>\n<h2>Transforming it into a dictionary data structure</h2>\n<pre><code>result = {&quot;path&quot;: [], &quot;title&quot;: [], &quot;content&quot;: []}\nfields = [&quot;path&quot;, &quot;title&quot;, &quot;content&quot;]\n\nfor dct in results:\n    for field in fields:\n        result[field].append(dct.get(field, None))\n</code></pre>\n<h2>Creating a pandas dataframe with the results</h2>\n<pre><code>df = pd.DataFrame(result)\nprint(df)\n</code></pre>\n<p>The dataframe is:</p>\n<pre><code>  path            title                                            content\n0   /b  Second document                                               None\n1   /a             None  This is the first document we've added! Not th...\n2   /c             None  You know... This is also different from the se...\n3   /b             None  The second one is even more interesting than t...\n</code></pre>\n<p><strong>Note</strong> Where you get <strong>None</strong> is because it doesn't match with the search</p>\n<h2>Grouping the results by &quot;path&quot; and counting results</h2>\n<pre><code>groups = df.groupby([&quot;path&quot;]).count()\n</code></pre>\n<p>The groups</p>\n<pre><code>      title  content\npath                \n/a        0        1\n/b        1        1\n/c        0        1\n</code></pre>\n<h2>Creating a score column</h2>\n<pre><code>groups[&quot;score&quot;] = groups[&quot;title&quot;] + groups[&quot;content&quot;]\n</code></pre>\n<p>With the score column</p>\n<pre><code>      title  content  score\npath                       \n/a        1        1      2\n/b        0        1      1\n/c        0        1      1\n</code></pre>\n<h2>Sorting results by score</h2>\n<pre><code>print(groups.sort_values(&quot;score&quot;, ascending=False))\n</code></pre>\n<pre><code>      title  content  score\npath                       \n/b        1        1      2\n/a        0        1      1\n/c        0        1      1\n</code></pre>\n<p><strong>Note</strong> Although is in the same order as the one printed before it may not be the case in the real world</p>\n<p>Finally, you can iterate through the dataframe and present your results.</p>\n<p><strong>End of update</strong></p>\n<hr />\n<blockquote>\n<p><strong>Note</strong> You will find the first answer below. Specifically for the &quot;<strong>at once</strong>&quot; part. After some comments, I updated the post and decided to keep this here, because it might be useful.</p>\n</blockquote>\n<hr />\n<p>Why don't use <code>concurrent.futures</code> for that?</p>\n<h2>Starting</h2>\n<pre><code>import concurrent.futures\nfrom whoosh.filedb.filestore import FileStorage\n\nstorage = FileStorage(&quot;../indexdir&quot;)\nix_1 = storage.open_index(indexname='ind_1')\nix_2 = storage.open_index(indexname='ind_2')\n\nixs = [ix_1, ix_2]\n\nTERM = &quot;TERM TO SEARCH&quot;\n</code></pre>\n<h2>Defining search function</h2>\n<pre><code>def search_things(ix, term):\n    with ix.searcher() as searcher:\n        query = QueryParser(&quot;content&quot;, ix.schema).parse(term)\n        results = searcher.search(query, terms=True)\n    return results\n</code></pre>\n<h2>Parallelizing</h2>\n<pre><code># using two workers because there are two indices\nwith concurrent.futures.ThreadPoolExecutor(max_workers = 2) as executor:\n   future_to_search = {executor.submit(search_things, ix, TERM): ix for ix in ixs}\n\n   for future in concurrent.futures.as_completed(future_to_search):\n       s = future_to_search[future]\n       try:\n          data = future.result()\n       except Exception as exc:\n          print('%r generated an exception: %s' % (s, exc))\n       else:\n          print('Search (%r) finished =&gt; %d' % (s, data))\n</code></pre>\n<p>You might need to adapt it for your needs.</p>\n"}], "owner": {"reputation": 31, "user_id": 11584886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bcc2430111907651f2f63f8335f58bb?s=128&d=identicon&r=PG&f=1", "display_name": "Yasmina", "link": "https://stackoverflow.com/users/11584886/yasmina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1615230331, "creation_date": 1568836933, "question_id": 57999990, "link": "https://stackoverflow.com/questions/57999990/search-across-multiple-indexes-at-once-in-whoosh", "title": "Search across multiple indexes at once in Whoosh", "body": "<p>I have a few indexes located in the same directory as part of a storage object.</p>\n\n<pre><code>from whoosh.filedb.filestore import FileStorage\nstorage = FileStorage(\"../indexdir\")\nix_1 = storage.open_index(indexname='ind_1')\nix_2 = storage.open_index(indexname='ind_2')\n</code></pre>\n\n<p>I want to be able to search a query through BOTH indexes at the same time and not just one of them. Is it possible to do that without having a single index?\nI can append the results of each index one after the other but I can't figure out how to sort them or if that is even possible.</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 1, "creation_date": 1568837283, "post_id": 57999985, "comment_id": 102405959, "body": "Looks like you don&#39;t have CUDA set up on your system, or possibly no GPU. You could run with <code>LSTM</code> layers instead of <code>CuDNNLSTM</code>, but if the GPU acceleration is important you are going to need to configure your GPU. That&#39;s on the OS side, not Keras or Python."}, {"owner": {"reputation": 6453, "user_id": 564653, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3cc2680ff3543245b1dfb032ac3bec5?s=128&d=identicon&r=PG", "display_name": "Ted pottel", "link": "https://stackoverflow.com/users/564653/ted-pottel"}, "reply_to_user": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1568903301, "post_id": 57999985, "comment_id": 102430706, "body": "That fixed the issue.  I got this code from a tutorial that did not talked about using a GPU.  Could you tell me what CUDA is"}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1568905573, "post_id": 57999985, "comment_id": 102432060, "body": "I just posted an answer with some links to get you started looking in to CUDA and CuDNN. If you have a GPU, try installing <code>tensorflow-gpu</code> with pip. If you don&#39;t, then just use the non-GPU LSTM layers."}], "answers": [{"tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": false, "score": 2, "last_activity_date": 1568905519, "creation_date": 1568905519, "answer_id": 58013995, "question_id": 57999985, "link": "https://stackoverflow.com/questions/57999985/keras-when-i-try-to-train-my-model-i-get-a-no-registered-kernels-error/58013995#58013995", "title": "Keras when I try to train my model I get a &quot; &lt;no registered kernels&gt;&quot; error", "body": "<p>Taken from my comment, since that seemed to help: it looks like you don't have <a href=\"https://en.wikipedia.org/wiki/CUDA\" rel=\"nofollow noreferrer\">CUDA</a>/<a href=\"https://developer.nvidia.com/cudnn\" rel=\"nofollow noreferrer\">CuDNN</a> set up on your system, or possibly no GPU. You could run with <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/layers/LSTM\" rel=\"nofollow noreferrer\"><code>LSTM</code></a> layers instead of <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/layers/CuDNNLSTM\" rel=\"nofollow noreferrer\"><code>CuDNNLSTM</code></a>, but if the GPU acceleration is important you are going to need to configure your GPU. That's on the OS side, not Keras or Python.</p>\n\n<p>To use <code>LSTM</code> layers:</p>\n\n<pre><code>from keras.layers import LSTM\n\nmodel = Sequential()\nmodel.add(LSTM(128, input_shape=(train_x.shape[1:]), return_sequences=True))\nmodel.add(Dropout(0.2))\n# ...\n</code></pre>\n\n<p>If you have a GPU and you want to use it, try installing <code>tensorflow-gpu</code> with pip and seeing if you can't get GPU acceleration working. That's kind of a whole thing, so I encourage you to do some research online and then come back to SO when you have specific questions.</p>\n"}], "owner": {"reputation": 6453, "user_id": 564653, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3cc2680ff3543245b1dfb032ac3bec5?s=128&d=identicon&r=PG", "display_name": "Ted pottel", "link": "https://stackoverflow.com/users/564653/ted-pottel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568905519, "creation_date": 1568836891, "last_edit_date": 1568839839, "question_id": 57999985, "link": "https://stackoverflow.com/questions/57999985/keras-when-i-try-to-train-my-model-i-get-a-no-registered-kernels-error", "title": "Keras when I try to train my model I get a &quot; &lt;no registered kernels&gt;&quot; error", "body": "<p>when I try to create a model, it crashes when I try to train it \ncode to create model, then train it</p>\n\n<pre><code>model = Sequential()\nmodel.add(CuDNNLSTM(128, input_shape=(train_x.shape[1:]), return_sequences=True))\nmodel.add(Dropout(0.2))\nmodel.add(BatchNormalization())\n\nmodel.add(CuDNNLSTM(128, return_sequences=True))\nmodel.add(Dropout(0.1))\nmodel.add(BatchNormalization())\n\nmodel.add(CuDNNLSTM(128))\nmodel.add(Dropout(0.2))\nmodel.add(BatchNormalization())\n\nmodel.add(Dense(32, activation='relu'))\nmodel.add(Dropout(0.2))\n\nmodel.add(Dense(2, activation='softmax'))\n\n\nopt = tf.keras.optimizers.Adam(lr=0.001, decay=1e-6)\n\n# Compile model\nmodel.compile(\n    loss='sparse_categorical_crossentropy',\n    optimizer=opt,\n    metrics=['accuracy'])\n\n# program crashes hear\nhistory = model.fit(\n    train_x, train_y,\n    batch_size=BATCH_SIZE,\n    epochs=EPOCHS,\n    validation_data=(validation_x, validation_y),\n    callbacks=[tensorboard, checkpoint] )\n</code></pre>\n\n<p>I get the following error</p>\n\n<blockquote>\n  <p>[seed=0, dropout=0, T=DT_FLOAT, input_mode=\"linear_input\",\n  direction=\"unidirectional\", rnn_mode=\"lstm\", is_training=true,\n  seed2=0] Registered devices: [CPU] Registered kernels:   </p>\n</blockquote>\n\n<p>complete stack trace</p>\n\n<pre><code>    K.batch_set_value([(v, 0) for v in self.variables])\n  File \"C:\\python37-32\\lib\\site-packages\\tensorflow\\python\\keras\\backend.py\", line 3071, in batch_set_value\n    get_session().run(assign_ops, feed_dict=feed_dict)\n  File \"C:\\python37-32\\lib\\site-packages\\tensorflow\\python\\keras\\backend.py\", line 462, in get_session\n    _initialize_variables(session)\n  File \"C:\\python37-32\\lib\\site-packages\\tensorflow\\python\\keras\\backend.py\", line 879, in _initialize_variables\n    [variables_module.is_variable_initialized(v) for v in candidate_vars])\n  File \"C:\\python37-32\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 950, in run\n    run_metadata_ptr)\n  File \"C:\\python37-32\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1173, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"C:\\python37-32\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1350, in _do_run\n    run_metadata)\n  File \"C:\\python37-32\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1370, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: No OpKernel was registered to support Op 'CudnnRNN' used by node cu_dnnlstm/CudnnRNN (defined at /Users/tpottel/programming/java/eclipse projects/BBitBotCoinUsing2/pythonproject/deeplearning/lstm-bitcoin.py:128) with these attrs: [seed=0, dropout=0, T=DT_FLOAT, input_mode=\"linear_input\", direction=\"unidirectional\", rnn_mode=\"lstm\", is_training=true, seed2=0]\nRegistered devices: [CPU]\nRegistered kernels:\n  &lt;no registered kernels&gt;\n\\\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "is_accepted": true, "score": 3, "last_activity_date": 1568837049, "last_edit_date": 1568837049, "creation_date": 1568836942, "answer_id": 57999993, "question_id": 57999967, "link": "https://stackoverflow.com/questions/57999967/pandas-groupby-column-merge-rows-of-lists-into-a-single-column-for-group/57999993#57999993", "title": "Pandas: groupby column, merge rows of lists into a single column for group?", "body": "<p>You can <code>GroupBy</code> and aggregate on the column containing lists with <code>sum</code> to concatenate the lists within the group and on <code>Feature 2</code> with <code>first</code>:</p>\n\n<pre><code>df.groupby('Groups').agg({'Feature 1':'sum', 'Feature 2':'first'}).reset_index()\n\n   Groups                        Feature 1          Feature 2\n0  GROUP A        [abc, def, ghi, jkl, mno, pqr]         1\n1  GROUP B            [stu, vwx, yz, xx, yx, zx]         2\n2  GROUP C  [text, more, stuff, here, last, one]         3\n\u200b\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 10963911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-V02Xa6m7TUk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNQqcFOTx0J5agVv87Vd3eXVNiIYQ/mo/photo.jpg?sz=128", "display_name": "n0ro", "link": "https://stackoverflow.com/users/10963911/n0ro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1880, "favorite_count": 1, "accepted_answer_id": 57999993, "answer_count": 1, "score": 3, "last_activity_date": 1568837049, "creation_date": 1568836792, "question_id": 57999967, "link": "https://stackoverflow.com/questions/57999967/pandas-groupby-column-merge-rows-of-lists-into-a-single-column-for-group", "title": "Pandas: groupby column, merge rows of lists into a single column for group?", "body": "<p>I have a Pandas dataframe that looks like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\nf1 = [['abc', 'def'], ['ghi', 'jkl'], ['mno', 'pqr'], ['stu', 'vwx'], ['yz', 'xx'], ['yx', 'zx'], ['text', 'more'], ['stuff', 'here'], ['last', 'one']]\n\nf2 = ['1', '1', '1', '2', '2', '2', '3', '3', '3']\n\ngroups = ['GROUP A', 'GROUP A', 'GROUP A', 'GROUP B', 'GROUP B', 'GROUP B', 'GROUP C', 'GROUP C', 'GROUP C']\n\n\ndf = pd.DataFrame({'Groups': groups, 'Feature 1': f1, 'Feature 2': f2})\ndf\n\n\n# DataFrame print:\n    Groups    Feature 1   Feature 2\n0   GROUP A   [abc, def]      1\n1   GROUP A   [ghi, jkl]      1\n2   GROUP A   [mno, pqr]      1\n3   GROUP B   [stu, vwx]      2\n4   GROUP B   [yz, xx]    2\n5   GROUP B   [yx, zx]    2\n6   GROUP C   [text, more]    3\n7   GROUP C   [stuff, here]   3\n8   GROUP C   [last, one]     3\n</code></pre>\n\n<p>I am trying to group the data by the 'Group' column in such a way that I can generate a dataframe that looks like this:</p>\n\n<pre><code>Groups      Feature 1                                Feature 2\nGROUP A     [abc, def, ghi, jkl, mno, pqr]           1\nGROUP B     [stu, vwx, yz, xx, yx, zx]               2\nGROUP C     [text, more, stuff, here, last, one]     3\n</code></pre>\n\n<p>In other words, my groups are repeated in the 'Groups' column, each repeat corresponding to an individual list belonging to that group.</p>\n\n<p>I want to eliminate the multiple repeats of the groups in the 'Groups' column and combine all of the individual lists associated with each group into a single, merged list containing all elements in a single row.</p>\n\n<p>I have experimented with <code>groupby()</code> a bit and searched around, but I am struggling to implement.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "numpy", "image-processing"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1568837075, "post_id": 57999933, "comment_id": 102405890, "body": "You&#39;re looking to compute the maximum Feret diameter (maximum projection length) of the shape. I explain an algorithm here: <a href=\"https://www.crisluengo.net/archives/408\" rel=\"nofollow noreferrer\">crisluengo.net/archives/408</a>"}, {"owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 0, "creation_date": 1568839842, "post_id": 57999933, "comment_id": 102406900, "body": "probably duplicated with this question, <a href=\"https://stackoverflow.com/questions/13240615/width-of-an-arbitrary-polygon\" title=\"width of an arbitrary polygon\">stackoverflow.com/questions/13240615/&hellip;</a>"}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "edited": false, "score": 0, "creation_date": 1568998147, "post_id": 57999933, "comment_id": 102466939, "body": "I think given the relatively small size of the perimeters (in number of pixels) the most efficient solution might end up being a brute force one, i.e. compute some ordering on the perimeter pixels p_1, ..., p_n and compare all pairs. Worst case time O(n^2) where n is the total size of the region (long skinny region = all pixels are on the perimeter)"}], "answers": [{"comments": [{"owner": {"reputation": 3275, "user_id": 1744886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gINfS.jpg?s=128&g=1", "display_name": "Raein Hashemi", "link": "https://stackoverflow.com/users/1744886/raein-hashemi"}, "edited": false, "score": 0, "creation_date": 1568987143, "post_id": 58001806, "comment_id": 102461607, "body": "Thank you for the answer, but I already have an approximation. I want a more accurate value."}], "tags": [], "owner": {"reputation": 417, "user_id": 2367401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17db559f7dc4475f34cabe7bf3552609?s=128&d=identicon&r=PG", "display_name": "Kyle Pena", "link": "https://stackoverflow.com/users/2367401/kyle-pena"}, "is_accepted": false, "score": 0, "last_activity_date": 1568848499, "creation_date": 1568848499, "answer_id": 58001806, "question_id": 57999933, "link": "https://stackoverflow.com/questions/57999933/calculate-the-radius-of-an-enclosing-circle-over-a-binary-mask-array/58001806#58001806", "title": "Calculate the radius of an enclosing circle over a binary mask array", "body": "<p>If you are willing to accept an approximation use this method and use the property \"major_axis_length\": <a href=\"https://scikit-image.org/docs/dev/api/skimage.measure.html#skimage.measure.regionprops\" rel=\"nofollow noreferrer\">https://scikit-image.org/docs/dev/api/skimage.measure.html#skimage.measure.regionprops</a></p>\n"}, {"comments": [{"owner": {"reputation": 417, "user_id": 2367401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17db559f7dc4475f34cabe7bf3552609?s=128&d=identicon&r=PG", "display_name": "Kyle Pena", "link": "https://stackoverflow.com/users/2367401/kyle-pena"}, "edited": false, "score": 0, "creation_date": 1568997772, "post_id": 58032283, "comment_id": 102466809, "body": "Some notes on my solution: (1) It finds it for all regions in the image. (2) It finds the greatest diameter of the convex hull of the region.  I think this is a reasonable thing to do, but you can adjust the implementation if you like."}, {"owner": {"reputation": 417, "user_id": 2367401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17db559f7dc4475f34cabe7bf3552609?s=128&d=identicon&r=PG", "display_name": "Kyle Pena", "link": "https://stackoverflow.com/users/2367401/kyle-pena"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1568997957, "post_id": 58032283, "comment_id": 102466875, "body": "Edited as @CrisLuengo suggests"}, {"owner": {"reputation": 3275, "user_id": 1744886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gINfS.jpg?s=128&g=1", "display_name": "Raein Hashemi", "link": "https://stackoverflow.com/users/1744886/raein-hashemi"}, "edited": false, "score": 0, "creation_date": 1569000109, "post_id": 58032283, "comment_id": 102467644, "body": "Thank you for making the effort, appreciate it. Your logic seems accurate but there is too much code for a simple task like this. Especially when I saw you use binary erosion and XOR just to get the border which seems unnecessary.  I finally ended up using openCV (cv2) as @Dr.H.Lecter suggested. Getting the contour with &quot;contours, hierarchy = cv2.findContours(image, 1, 2)&quot; and getting the radius of the bounding circle using &quot;(x,y),radius = cv2.minEnclosingCircle(contours[0])&quot;"}], "tags": [], "owner": {"reputation": 417, "user_id": 2367401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17db559f7dc4475f34cabe7bf3552609?s=128&d=identicon&r=PG", "display_name": "Kyle Pena", "link": "https://stackoverflow.com/users/2367401/kyle-pena"}, "is_accepted": false, "score": 2, "last_activity_date": 1568997933, "last_edit_date": 1568997933, "creation_date": 1568997685, "answer_id": 58032283, "question_id": 57999933, "link": "https://stackoverflow.com/questions/57999933/calculate-the-radius-of-an-enclosing-circle-over-a-binary-mask-array/58032283#58032283", "title": "Calculate the radius of an enclosing circle over a binary mask array", "body": "<p><a href=\"https://i.stack.imgur.com/Wa1av.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wa1av.png\" alt=\"enter image description here\"></a></p>\n\n<p>Some notes on my solution: </p>\n\n<p>(0) It accepts a binary image as input.</p>\n\n<p>(1) It finds it for all regions in the image. </p>\n\n<p>(2) It finds the greatest diameter of the convex hull of the region.  I think this is a reasonable thing to do, but you can adjust the implementation if you like.</p>\n\n<p>(3) I use the skimage.data \"coins\" image so you can reproduce yourself.</p>\n\n<pre><code>import sys\n\n# To find the diameters\nfrom skimage.measure import regionprops, label\nfrom sklearn.metrics import pairwise_distances\nfrom scipy import ndimage as ndi\nimport numpy as np\n\n# To generate test data\nfrom skimage import data\nfrom skimage.filters import sobel\nfrom skimage.morphology import watershed\n\n# For visualization\nimport matplotlib.pyplot as plt\n\nSTREL_4 = np.array([[0, 1, 0],\n                    [1, 1, 1],\n                    [0, 1, 0]], dtype=np.bool)\n\n\ndef get_border_image(region):\n    convex_hull_mask = region.convex_image\n    eroded_image = ndi.binary_erosion(convex_hull_mask, STREL_4, border_value=0)\n    border_image = np.logical_xor(convex_hull_mask, eroded_image)\n    return border_image\n\ndef get_region_diameters(img):\n\n    assert img.dtype == np.bool and len(img.shape) == 2\n\n    label_img = label(img, connectivity=img.ndim)\n\n    for region in regionprops(label_img):\n        border_image = get_border_image(region)\n        perimeter_coordinates = np.transpose(np.nonzero(border_image))\n        pairwise_distances_matrix = pairwise_distances(perimeter_coordinates)\n        i, j = np.unravel_index(np.argmax(pairwise_distances_matrix), pairwise_distances_matrix.shape)\n        ptA, ptB = perimeter_coordinates[i], perimeter_coordinates[j]\n        region_offset = np.asarray([region.bbox[0], region.bbox[1]])\n        ptA += region_offset\n        ptB += region_offset\n        yield pairwise_distances_matrix[i, j], ptA, ptB\n\nif __name__ == \"__main__\":\n\n    # Create a segmentation of the coins image, for testing purposes.\n    # You should create a binary image\n    coins = data.coins()\n    elevation_map = sobel(coins)\n    markers = np.zeros_like(coins)\n    markers[coins &lt; 30] = 1\n    markers[coins &gt; 150] = 2\n    segmentation = (watershed(elevation_map, markers) &gt; 1)\n\n    for distance, ptA, ptB in get_region_diameters(segmentation):\n        plt.imshow(segmentation)\n        x1, x2, y1, y2 = ptA[1], ptB[1], ptA[0], ptB[0]\n        plt.plot([x1, x2], [y1, y2], color='k', linestyle='-', linewidth=2)\n        print(distance, ptA, ptB)\n\n    plt.show()\n</code></pre>\n"}], "owner": {"reputation": 3275, "user_id": 1744886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gINfS.jpg?s=128&g=1", "display_name": "Raein Hashemi", "link": "https://stackoverflow.com/users/1744886/raein-hashemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1568997933, "creation_date": 1568836609, "question_id": 57999933, "link": "https://stackoverflow.com/questions/57999933/calculate-the-radius-of-an-enclosing-circle-over-a-binary-mask-array", "title": "Calculate the radius of an enclosing circle over a binary mask array", "body": "<p>I have a numpy array of an image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2xaGj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2xaGj.png\" alt=\"enter image description here\"></a></p>\n\n<p>The red is the binary mask over a specific part and my goal is to calculate the biggest diameter length in this mask. I have tried using a bounding box and measuring the diameter of the box (from one end to the other) but it is not as accurate as I want it to be, especially if the shape of the mask is close to a circle.</p>\n\n<p>My next idea is to use a bounding circle instead of a box, and measure the radius which would be very accurate. The problem is that I don't know of any packages or functions to give me a bounding circle. Even if there is such a function, I don't know how to measure the radius of the given circle as there is no sharp points in a circle to go end to end.</p>\n\n<p>Appreciate any ideas.</p>\n"}, {"tags": ["python", "image", "canvas", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1568840573, "post_id": 57999923, "comment_id": 102407152, "body": "What does this comment mean: <i>&quot;# this doesn&#39;t work&quot;</i>? Why doesn&#39;t it work? What does it do, and how is it different from what you expect? Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - we can&#39;t reproduce your problem with the code you&#39;ve posted."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1568844225, "post_id": 57999923, "comment_id": 102408239, "body": "Read <a href=\"https://stackoverflow.com/a/16424553/7414759\">Why does Tkinter image not show up if created in a function?</a>"}], "owner": {"reputation": 1, "user_id": 12086849, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6SpAfBxI5WQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfxgbRnZTJfk6Yxvic2tENKsT0Tuw/photo.jpg?sz=128", "display_name": "Martin G&#246;tze", "link": "https://stackoverflow.com/users/12086849/martin-g%c3%b6tze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568906864, "creation_date": 1568836561, "last_edit_date": 1568906864, "question_id": 57999923, "link": "https://stackoverflow.com/questions/57999923/tkinter-multiple-frames-using-canvas-images", "title": "Tkinter multiple frames: using canvas images", "body": "<p>Please help me with the second method of the class. </p>\n\n<p>I've searched a lot, and the other google solutions don't work.</p>\n\n<p>The main problem is I think <code>tkraise()</code>, but I don't know how to solve, or get the code running without the method.</p>\n\n<p>I don't know how to solve the following problem:</p>\n\n<hr>\n\n<pre><code>class Startconfig(tkinter.Tk):\n\n def __init__(self, *args, **kwargs):\n    tkinter.Tk.__init__(self, *args, **kwargs)\n\n    container = tkinter.Frame(self)\n    container.pack(side = \"top\", fill = \"both\", expand = True)\n    container.grid_rowconfigure(0, weight = 1)\n    container.grid_columnconfigure(0, weight = 1)\n\n    self.frames = {}\n\n    self.frames[\"Startmen\u00fc\"] = Startmen\u00fc(parent=container, controller=self)\n    self.frames[\"Spiel_Starten\"] = Spiel_Starten(parent=container, controller=self)\n\n    ...\n\nclass Startmen\u00fc(tkinter.Frame):\n\n  def __init__(self, parent, controller):  \n    tkinter.Frame.__init__(self, parent)\n    self.controller = controller\n\n\n    # this doesn't work\n    canvas = tkinter.Canvas(self, width = 750, height = 499)\n    zeichnung_burg = tkinter.PhotoImage(file = \"\"\"image.gif\"\"\")\n    canvas.create_image(0, 0, anchor=tkinter.NW, image=zeichnung_burg)#image = zeichnung_burg)\n    canvas.pack()\n\n\n\n    label = tkinter.Label(self, text = \"publisher:\")\n\n    starten = tkinter.Button(self, text = \"Starten\", bg = \"grey\", fg = \"black\", width = 15, height = 2,\n                            command = lambda: controller.show_frame(Spiel_Starten))\n    einstellungen = tkinter.Button(self, text = \"Einstellungen\", bg = \"grey\", fg = \"black\", width = 15, height = 2,\n                            command = lambda: controller.show_frame(Einstellungen))\n    hilfe = tkinter.Button(self, text = \"Hilfe\", bg = \"grey\", fg = \"black\", width = 15, height = 2,\n                            command = lambda: controller.show_frame(Hilfe))\n    beenden = tkinter.Button(self, text = \"Beenden\", bg = \"grey\", fg = \"black\", width = 15, height = 2,\n                             command = self.quit)\n\n    #canvas.pack()\n    starten.pack(side = tkinter.LEFT)\n    einstellungen.pack(side = tkinter.LEFT)\n    beenden.pack(side = tkinter.RIGHT)\n    hilfe.pack(side = tkinter.RIGHT)\n    label.pack(side = tkinter.LEFT, fill = tkinter.X, expand = 1)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "edited": false, "score": 1, "creation_date": 1568836877, "post_id": 57999914, "comment_id": 102405826, "body": "Can you please add sample dataset and your expected outcome? It help reproduce the error"}, {"owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "reply_to_user": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "edited": false, "score": 0, "creation_date": 1568837663, "post_id": 57999914, "comment_id": 102406089, "body": "@SIA, I have added some sample"}, {"owner": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "edited": false, "score": 0, "creation_date": 1568838625, "post_id": 57999914, "comment_id": 102406467, "body": "Can you show the expected output in tabular format?"}], "owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568843994, "creation_date": 1568836491, "last_edit_date": 1568843994, "question_id": 57999914, "link": "https://stackoverflow.com/questions/57999914/find-group-by-count-for-multiple-columns-and-append-it-to-original-dataframe-g", "title": "Find group by count for multiple columns and append it to original DataFrame , giving keyError with the field name, in Python Pandas", "body": "<p>Tried to find a group by count for multiple columns and append it to original DataFrame. Tried the below and got some error. What could be going wrong.</p>\n\n<p>colList: are the List of columns I would like to retain in the DataFrame, which are not part of group by fields. </p>\n\n<pre><code>def addCounts(x,colList):\n    #print(x.columns)\n    res = x[colList]\n    res['Prb_B_conf_sum'] = x.apply(lambda el : x['Prb_B_conf']+ el['Prb_B_conf'], axis=1)\n    res['Prb_R_conf_sum'] = x.apply(lambda el : x['Prb_R_conf']+ el['Prb_R_conf'], axis=1)\n    # May more Colums Simlar lines ..\n    res\n\ntrainPrepared = train_stack.groupby(['Main_ID', 'Sub_ID']).apply(addCounts,colListTrain)\n</code></pre>\n\n<p>Received Error:</p>\n\n<blockquote>\n  <p>pandas_libs\\index.pyx in\n  pandas._libs.index.IndexEngine._maybe_get_bool_indexer()\n  <strong>KeyError</strong>: 'Prb_B_conf_sum' During handling of the above exception, another exception occurred ... <strong>ValueError</strong>: Wrong number of items\n  passed 7, placement implies 1</p>\n</blockquote>\n\n<h1>Sample input</h1>\n\n<pre><code>  Main_ID Sub_ID ID ID_2 Prb_B_conf Prb_R_conf\n0       M      A  1  1.1          0          0\n1       M      B  2  2.1          0          0\n2       M      A  3  3.3          1          2\n3       M      B  4  4.3          1          2\n4       M      A  5  5.3          2          2\n5       M      B  6  6.3          2          2\n6       M      A  7  7.3          1          1\n7       M      B  8  8.3          1          1\n</code></pre>\n\n<h1>Expected output fields are</h1>\n\n<pre><code>Main_ID,Sub_ID,ID,ID_2,Prb_B_conf,Prb_B_conf_sum,Prb_R_conf_sum\n\nM,A,1,1.1,0,0, Sum(Prb_B_conf, when Main_ID=M,Sub_ID=A),Sum(Prb_R_conf, when Main_ID=M,Sub_ID=A)\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 955, "user_id": 4193208, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fdc4951e636f003e09dcef12ca5a483c?s=128&d=identicon&r=PG&f=1", "display_name": "liorko", "link": "https://stackoverflow.com/users/4193208/liorko"}, "edited": false, "score": 0, "creation_date": 1568836420, "post_id": 57999877, "comment_id": 102405641, "body": "Try to read about JSON files"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 10293576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2630b44bdd2ed9c316a837e204319aca?s=128&d=identicon&r=PG&f=1", "display_name": "miu", "link": "https://stackoverflow.com/users/10293576/miu"}, "edited": false, "score": 0, "creation_date": 1568839052, "post_id": 57999952, "comment_id": 102406617, "body": "so i don&#39;t need any of my forloops? just list comprehensive"}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 167, "user_id": 10293576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2630b44bdd2ed9c316a837e204319aca?s=128&d=identicon&r=PG&f=1", "display_name": "miu", "link": "https://stackoverflow.com/users/10293576/miu"}, "edited": false, "score": 0, "creation_date": 1568839175, "post_id": 57999952, "comment_id": 102406661, "body": "@miu, yes, you can directly use that list comprehension, and you will get the output you want. I would avoid using too much loops since that will increase the complexity of your program, and it will make it run slower."}, {"owner": {"reputation": 167, "user_id": 10293576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2630b44bdd2ed9c316a837e204319aca?s=128&d=identicon&r=PG&f=1", "display_name": "miu", "link": "https://stackoverflow.com/users/10293576/miu"}, "edited": false, "score": 0, "creation_date": 1568915920, "post_id": 57999952, "comment_id": 102436843, "body": "make sense, but I will have to make check so that I don&#39;t get empty data field.. but Thanks for the help"}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 2, "last_activity_date": 1568836716, "creation_date": 1568836716, "answer_id": 57999952, "question_id": 57999877, "link": "https://stackoverflow.com/questions/57999877/update-list-within-dict-values/57999952#57999952", "title": "Update List within Dict values", "body": "<p>Use the following list comprehension:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[{'int': d['invals'][0]['ifName'], 'address': d['invals'][0]['pairs']['IP']} for d in l]\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[{'int': 'Vlan1', 'address': '192.168.1.1'},\n {'int': 'Vlan2', 'address': '192.168.1.2'},\n {'int': 'Vlan3', 'address': '192.168.1.3'}]\n</code></pre>\n\n<p><strong>Note:</strong> this assumes you are keeping the same structure in every element of your list.</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 10293576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2630b44bdd2ed9c316a837e204319aca?s=128&d=identicon&r=PG&f=1", "display_name": "miu", "link": "https://stackoverflow.com/users/10293576/miu"}, "edited": false, "score": 0, "creation_date": 1568915977, "post_id": 58000373, "comment_id": 102436862, "body": "thanks for the solution, it fits what i was trying to do, I made little adjustment for validating the data I need."}], "tags": [], "owner": {"reputation": 65, "user_id": 12085516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf76f4a67f3cf42feabff5649c460468?s=128&d=identicon&r=PG&f=1", "display_name": "qqqqqq", "link": "https://stackoverflow.com/users/12085516/qqqqqq"}, "is_accepted": false, "score": 1, "last_activity_date": 1569530321, "last_edit_date": 1569530321, "creation_date": 1568838782, "answer_id": 58000373, "question_id": 57999877, "link": "https://stackoverflow.com/questions/57999877/update-list-within-dict-values/58000373#58000373", "title": "Update List within Dict values", "body": "<p>Your code overwrites first element of <code>out</code> every loop because you are referring to <code>out[0]</code> each time. Assuming you are trying to get list of unique interfaces with set IP you might want to use something like </p>\n\n<pre><code>result = []\nsaved_interfaces = []\nfor item in data:\n  for inval in item['invals']:\n    if id == i['num1'] and 'IP' in i['pairs']:\n      if inval['pairs']['IP'] and inval['ifName'] not in saved_interfaces:\n        result.append({'int':inval['ifName'],'address':inval['pairs']['IP']})\n        saved_interfaces.append(inval['ifName'])\n#print(result)\n#[{'int': 'Vlan1', 'address': '192.168.1.1'}, {'int': 'Vlan2', 'address': '192.168.1.2'}, {'int': 'Vlan3', 'address': '192.168.1.3'}]\n</code></pre>\n\n<p><code>''</code> is evaluated as <code>False</code>\n<code></code></p>\n"}], "owner": {"reputation": 167, "user_id": 10293576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2630b44bdd2ed9c316a837e204319aca?s=128&d=identicon&r=PG&f=1", "display_name": "miu", "link": "https://stackoverflow.com/users/10293576/miu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57999952, "answer_count": 2, "score": 1, "last_activity_date": 1569530321, "creation_date": 1568836312, "last_edit_date": 1568838974, "question_id": 57999877, "link": "https://stackoverflow.com/questions/57999877/update-list-within-dict-values", "title": "Update List within Dict values", "body": "<p>How do I append the dict within the list?</p>\n\n<p>For example, I have data as follows:</p>\n\n<pre><code>  [{\n    \"data\": \"11_1\",\n    \"invals\": [\n      {\n        \"num1\": \"1111111\",\n        \"ifName\": \"Vlan1\",\n        \"pairs\": {\n          \"TYPE\": \"3\",\n          \"IS_TYPE\": \"level-2\",\n          \"IP\": \"192.168.1.1\",\n        }\n      }\n    ]\n  },\n  {\n    \"data\": \"11_2\",\n    \"invals\": [\n      {\n        \"num1\": \"2222222\",\n        \"ifName\": \"Vlan2\",\n        \"pairs\": {\n          \"TYPE\": \"3\",\n          \"IS_TYPE\": \"level-2\",\n          \"IP\": \"192.168.1.2\",\n        }\n      }\n    ]\n  },\n  {\n    \"data\": \"11_3\",\n    \"invals\": [\n      {\n        \"num1\": \"33333333\",\n        \"ifName\": \"Vlan3\",\n        \"pairs\": {\n          \"TYPE\": \"3\",\n          \"IS_TYPE\": \"level-2\",\n          \"IP\": \"192.168.1.3\",\n        }\n      }\n    ]\n  }]\n</code></pre>\n\n<p>I would like to pull only data <code>ifName</code> and <code>IP</code>. \nHere I would like to get:</p>\n\n<pre><code>[{'int': 'Vlan1', 'address': '192.168.1.1'},{'int': 'Vlan2', 'address': '192.168.1.3'},{'int': 'Vlan3', 'address': '192.168.1.3'}]\n</code></pre>\n\n<p>CODE: </p>\n\n<pre><code>    out = [{ 'int': '', 'address': '' }]\n        for x in output:\n            for i in x['invals']:\n                if id == i['num1'] and 'IP' in i['pairs']:\n                    if not i['pairs']['IP'] is '':\n                        out[0]['interface'] = i['ifName']\n                        out[0]['address'] = i['pairs']['IP']\n                        if not i['ifName'] in out[0]['interface']:\n                            out[0]['interface'].update(i['ifName'])\n                            out[0]['address'].update(i['pairs']['IP'])\n</code></pre>\n\n<p>It's been overwriting old, not able to update it.</p>\n"}, {"tags": ["python", "pandas", "merge"], "comments": [{"owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "edited": false, "score": 0, "creation_date": 1568836852, "post_id": 57999871, "comment_id": 102405813, "body": "on pandas version 0.20.3 I get <code>levels=[[&#39;a_x&#39;, &#39;a_y&#39;, &#39;b_x&#39;, &#39;b_y&#39;, &#39;c_x&#39;, &#39;c_y&#39;, &#39;id&#39;], [&#39;&#39;, &#39;1&#39;, &#39;2&#39;]]</code>"}, {"owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "edited": false, "score": 0, "creation_date": 1568837208, "post_id": 57999871, "comment_id": 102405936, "body": "with the current version 0.25.1 I also get <code>[(&#39;a_x&#39;, &#39;1&#39;),             (&#39;a_x&#39;, &#39;2&#39;),             (&#39;b_x&#39;, &#39;1&#39;),             (&#39;b_x&#39;, &#39;2&#39;),             (&#39;c_x&#39;, &#39;1&#39;),             (&#39;c_x&#39;, &#39;2&#39;),             (&#39;a_y&#39;, &#39;1&#39;),             (&#39;a_y&#39;, &#39;2&#39;),             (&#39;b_y&#39;, &#39;1&#39;),             (&#39;b_y&#39;, &#39;2&#39;),             (&#39;c_y&#39;, &#39;1&#39;),             (&#39;c_y&#39;, &#39;2&#39;),             ( &#39;id&#39;,  &#39;&#39;)]</code>"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1568840513, "post_id": 57999871, "comment_id": 102407125, "body": "for me with <code>&#39;0.25.0&#39;</code> the <code>c</code> columns are duplicated..."}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1568882785, "post_id": 57999871, "comment_id": 102418795, "body": "It&#39;s very strange. In the same setup as yesterday evening, I now can&#39;t reproduce the issue, deleting the question"}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1568883685, "post_id": 57999871, "comment_id": 102419292, "body": "and undeleting the question. Currently recording a video of the strange behaviour. It&#39;s pandas 0.25.1"}], "owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568884774, "creation_date": 1568836286, "last_edit_date": 1568884774, "question_id": 57999871, "link": "https://stackoverflow.com/questions/57999871/pandas-does-not-add-suffix-to-conflicting-columns-when-merging-multiindex", "title": "pandas does not add suffix to conflicting columns when merging multiindex", "body": "<p>I'm trying to merge two dataframes with MultiIndexes. Both contain the same columns and an ID field. The merge operates on the ID, all other columns should get suffixes. But only some of them do.</p>\n\n<p>For the example, I'm using an empty dataframe, the behaviour is the same after adding data:</p>\n\n<pre><code>index_tuples=[]\n\nfor word_group in [\"a\", \"b\", \"c\"]:\n    for correctness in [\"1\", \"2\"]:\n        index_tuples.append([word_group, correctness])\n\nindex = pd.MultiIndex.from_tuples(index_tuples, names=[\"outer\", \"inner\"])\n\nframe_x = pd.DataFrame(columns = index)\nframe_x[\"id\"]=\"\"\n\nframe_y = pd.DataFrame(columns = index)\nframe_y[\"id\"]=\"\"\n\nprint(frame_x.merge(frame_y, on=\"id\").columns)\n</code></pre>\n\n<p>this prints:</p>\n\n<pre><code>MultiIndex([('a_x', '1'),\n            ('a_x', '2'),\n            (  'b', '1'),\n            (  'b', '2'),\n            ('c_x', '1'),\n            ('c_x', '2'),\n            ('a_y', '1'),\n            ('a_y', '2'),\n            (  'b', '1'),\n            (  'b', '2'),\n            ('c_y', '1'),\n            ('c_y', '2'),\n            ( 'id',  '')],\n           names=['outer', 'inner'])\n</code></pre>\n\n<p>As you can see, one of the MultiIndex columns has not received the added suffix. This behaviour doesn't occur with just two outer columns in the MultiIndex, then both get the suffix. For four outer columns (\"a\", \"b\", \"c\", \"d\"), just two get suffixed.</p>\n\n<p>What is pandas doing here ?</p>\n\n<p>UPDATE:\nSome comments pointed out that the problem can't be reproduced. I couldn't reproduce it either, so I deleted the question, then it reoccurred. This is python 3.6, pandas 0.25.1. The problem seems to be non-deterministic. It appears with different combinations on the MultiIndex, sometimes it doesn't happen at all. I took a video:</p>\n\n<p><a href=\"https://imgur.com/9tZxRoE\" rel=\"nofollow noreferrer\">https://imgur.com/9tZxRoE</a></p>\n\n<p>high-res version:\n<a href=\"https://imgur.com/a/rbSvuSl\" rel=\"nofollow noreferrer\">https://imgur.com/a/rbSvuSl</a></p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "is_accepted": false, "score": 1, "last_activity_date": 1568837074, "creation_date": 1568837074, "answer_id": 58000015, "question_id": 57999861, "link": "https://stackoverflow.com/questions/57999861/how-to-print-tensorflow-tensor-value-in-this-example/58000015#58000015", "title": "How to print tensorflow tensor value in this example?", "body": "<p>If you're using tf-1.x, you should put <code>tf.enable_eager_execution()</code> at first. I only add this line and the code works.</p>\n"}], "owner": {"reputation": 332, "user_id": 3614179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1473318420/picture?type=large", "display_name": "seilgu", "link": "https://stackoverflow.com/users/3614179/seilgu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568837074, "creation_date": 1568836235, "question_id": 57999861, "link": "https://stackoverflow.com/questions/57999861/how-to-print-tensorflow-tensor-value-in-this-example", "title": "How to print tensorflow tensor value in this example?", "body": "<p>I'm new to tensorflow and basically I copied the example somewhere but cannot compile it.</p>\n\n<pre><code>import  tensorflow as tf\nfrom    tensorflow.keras import datasets, layers, optimizers, Sequential, metrics\n\n(xs, ys),_ = datasets.mnist.load_data()\nprint('datasets:', xs.shape, ys.shape, xs.min(), xs.max())\n\nxs = tf.convert_to_tensor(xs, dtype=tf.float32) / 255.\ndb = tf.data.Dataset.from_tensor_slices((xs,ys))\ndb = db.batch(32).repeat(10)\n\nnetwork = Sequential([layers.Dense(256, activation='relu'),\n    layers.Dense(256, activation='relu'),\n    layers.Dense(256, activation='relu'),\n    layers.Dense(10)])\nnetwork.build(input_shape=(None, 28*28))\nnetwork.summary()\n\noptimizer = optimizers.SGD(lr=0.01)\nacc_meter = metrics.Accuracy()\n\nfor step, (x,y) in enumerate(db):\n\n    with tf.GradientTape() as tape:\n        x = tf.reshape(x, (-1, 28*28))\n        out = network(x)\n\n        y_onehot = tf.one_hot(y, depth=10)\n        loss = tf.square(out-y_onehot)\n        loss = tf.reduce_sum(loss) / 32\n        acc_meter.update_state(tf.argmax(out, axis=1), y)\n        grads = tape.gradient(loss, network.trainable_variables)\n        optimizer.apply_gradients(zip(grads, network.trainable_variables))\n\n        if step % 200==0:\n            print(float(loss))\n            exit()\n</code></pre>\n\n<p>This gives the error :</p>\n\n<pre><code>TypeError: float() argument must be a string or a number, not 'Tensor'\n</code></pre>\n\n<p>on the second-last line.</p>\n\n<p>However I've tried <code>loss.eval()</code>, which says <code>No default session is registered.</code> But if I write </p>\n\n<pre><code>tf.Session() as sess:\n    print(sess.run(loss))\n</code></pre>\n\n<p>it leads to some really complicated error. \nIf I write <code>print(loss.numpy())</code>, it says <code>AttributeError: 'Tensor' object has no attribute 'numpy'</code></p>\n\n<p>Everything solution I searched on the internet required the code to have a <code>tf.Session()</code> running, which in this example there isn't. How do I print out the value of the <code>loss</code> variable?</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe"], "comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1568836313, "post_id": 57999856, "comment_id": 102405598, "body": "Can you please provide an expected output."}, {"owner": {"reputation": 708, "user_id": 7420056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpE06.jpg?s=128&g=1", "display_name": "stahamtan", "link": "https://stackoverflow.com/users/7420056/stahamtan"}, "edited": false, "score": 0, "creation_date": 1568836393, "post_id": 57999856, "comment_id": 102405629, "body": "It seems like what you need is to sort data by <code>id</code>? Am I correct?"}, {"owner": {"reputation": 205, "user_id": 10376083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SUv5Xf3lm_Q/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckjNjnHlxrO3TW5Wzo2XtKw_YiEuQ/photo.jpg?sz=128", "display_name": "FARRAF", "link": "https://stackoverflow.com/users/10376083/farraf"}, "edited": false, "score": 0, "creation_date": 1568836619, "post_id": 57999856, "comment_id": 102405725, "body": "I just posed expected output, thank you"}, {"owner": {"reputation": 627, "user_id": 9701668, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-awM68pskP-Q/AAAAAAAAAAI/AAAAAAAAB1Q/DnVGA2d1iGc/photo.jpg?sz=128", "display_name": "Adirmola", "link": "https://stackoverflow.com/users/9701668/adirmola"}, "edited": false, "score": 0, "creation_date": 1568836877, "post_id": 57999856, "comment_id": 102405825, "body": "Is it possible to have more then two rows with the same ID? If so, how the third row will be handle?"}, {"owner": {"reputation": 205, "user_id": 10376083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SUv5Xf3lm_Q/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckjNjnHlxrO3TW5Wzo2XtKw_YiEuQ/photo.jpg?sz=128", "display_name": "FARRAF", "link": "https://stackoverflow.com/users/10376083/farraf"}, "edited": false, "score": 0, "creation_date": 1568836957, "post_id": 57999856, "comment_id": 102405847, "body": "Hi, I do not understand what you meant. If you mean the fifth row, then since there is no matching id, it will not be switched"}], "answers": [{"comments": [{"owner": {"reputation": 627, "user_id": 9701668, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-awM68pskP-Q/AAAAAAAAAAI/AAAAAAAAB1Q/DnVGA2d1iGc/photo.jpg?sz=128", "display_name": "Adirmola", "link": "https://stackoverflow.com/users/9701668/adirmola"}, "edited": false, "score": 0, "creation_date": 1568837202, "post_id": 57999988, "comment_id": 102405933, "body": "I didn&#39;t check but it&#39;s looks amazing. I don&#39;t see you handle checking that the Name and\\or Gender are different between swapping rows."}, {"owner": {"reputation": 205, "user_id": 10376083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SUv5Xf3lm_Q/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckjNjnHlxrO3TW5Wzo2XtKw_YiEuQ/photo.jpg?sz=128", "display_name": "FARRAF", "link": "https://stackoverflow.com/users/10376083/farraf"}, "edited": false, "score": 0, "creation_date": 1568837328, "post_id": 57999988, "comment_id": 102405971, "body": "Hi, in this example you can do that, but most of the time not, I should have write a more difficult example. For example, if id 1111 Robert is in row 0, and id 1111 Misa is in row 99, I need to find its location first, before switching"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1568837371, "post_id": 57999988, "comment_id": 102405987, "body": "As long as you have <i>at most</i> 2 rows per id, it works."}, {"owner": {"reputation": 205, "user_id": 10376083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SUv5Xf3lm_Q/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckjNjnHlxrO3TW5Wzo2XtKw_YiEuQ/photo.jpg?sz=128", "display_name": "FARRAF", "link": "https://stackoverflow.com/users/10376083/farraf"}, "edited": false, "score": 0, "creation_date": 1568837486, "post_id": 57999988, "comment_id": 102406030, "body": "I see, thank you, I ll try it and mark my question as resolved"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 0, "last_activity_date": 1568836926, "creation_date": 1568836926, "answer_id": 57999988, "question_id": 57999856, "link": "https://stackoverflow.com/questions/57999856/how-can-i-swap-selected-data-in-2-rows-based-on-criteria/57999988#57999988", "title": "How can I swap selected data in 2 rows based on criteria", "body": "<p>Instead of swapping other columns, I choose to swap <code>Name</code> and <code>Gender</code>:</p>\n\n<pre><code>def swap(x):\n    x[['Gender','Name']] = x[['Gender','Name']].values[::-1]\n    return x\n\ndf.groupby('id').apply(swap)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     id  Gender     Name       Hobby       Food\n0  1111  Female     Misa        Swim   Icecream\n1  1112    Male     Rick    Football      Pizza\n2  1111    Male   Robert  Volleyball      Pasta\n3  1112  Female  Natasha       Sleep  Hamburger\n4  1113    Male    Rondo        Read       Rice\n</code></pre>\n\n<p>Or if you insist on the correct order, then swap the other columns:</p>\n\n<pre><code>def swap2(x):\n    x[['Hobby','Food']] = x[['Hobby','Food']].values[::-1]\n\n    return x\n\nprint(df.groupby('id').apply(swap2))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     id  Gender     Name       Hobby       Food\n0  1111    Male   Robert  Volleyball      Pasta\n1  1112  Female  Natasha       Sleep  Hamburger\n2  1111  Female     Misa        Swim   Icecream\n3  1112    Male     Rick    Football      Pizza\n4  1113    Male    Rondo        Read       Rice\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 10376083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SUv5Xf3lm_Q/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckjNjnHlxrO3TW5Wzo2XtKw_YiEuQ/photo.jpg?sz=128", "display_name": "FARRAF", "link": "https://stackoverflow.com/users/10376083/farraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57999988, "answer_count": 1, "score": 1, "last_activity_date": 1568836926, "creation_date": 1568836180, "last_edit_date": 1568836754, "question_id": 57999856, "link": "https://stackoverflow.com/questions/57999856/how-can-i-swap-selected-data-in-2-rows-based-on-criteria", "title": "How can I swap selected data in 2 rows based on criteria", "body": "<p>I am new to Python.</p>\n\n<p>Suppose I have DataFrame, and want to switch selected data of all rows with similar id. </p>\n\n<p>For example:</p>\n\n<p></p>\n\n<pre><code>|  id  | Gender |  Name   |   Hobby    |   Food    |\n+------+--------+---------+------------+-----------+\n| 1111 | Male   | Robert  | Swim       | Ice-cream |\n| 1112 | Female | Natasha | Football   | Pizza     |\n| 1111 | Female | Misa    | Volleyball | Pasta     |\n| 1112 | Male   | Rick    | Sleep      | Hamburger |\n| 1113 | Male   | Rondo   | Read       | Rice      |\n+------+--------+---------+------------+-----------+\n\n\n\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>+------+--------+---------+------------+-----------+\n|  id  | Gender |  Name   |   Hobby    |   Food    |\n+------+--------+---------+------------+-----------+\n| 1111 | Male   | Robert  | Volleyball | Pasta     |\n| 1112 | Female | Natasha | Sleep      | Hamburger |\n| 1111 | Female | Misa    | Swim       | Ice-cream |\n| 1112 | Male   | Rick    | Football   | Pizza     |\n| 1113 | Male   | Rondo   | Read       | Rice      |\n+------+--------+---------+------------+-----------+\n\n</code></pre>\n\n<p>So what I want to do is to switch data (In this example only Hobby and Food) between people with same id, but  name and gender remain the same. </p>\n\n<p>So basicly, on first row, id 1111, Gender is Male, Name is Robert - Hobby will be Volleyball and Food will be Pasta. \nOn second row, id 1111, Gender is female name is Misa - hobby will be swim and food will be ice-cream. And do the same for the id 1112 as well. \nI do not have any idea at the moment, except for writing some loop and then use empty DataFramme to append and switch.\nThank you all!!</p>\n"}, {"tags": ["python", "windows", "python-multiprocessing", "python-3.7"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568836434, "post_id": 57999783, "comment_id": 102405645, "body": "I&#39;ve attempted to put your code in your question but I may not have gotten all the indentation correct. Please take a look and fix if needed."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568836530, "post_id": 57999783, "comment_id": 102405687, "body": "<a href=\"https://stackoverflow.com/help/formatting\">Formatting help</a> ... <a href=\"https://stackoverflow.com/editing-help\">more Formatting</a> ... <a href=\"https://meta.stackexchange.com/questions/3122/formatting-sandbox\">Formatting sandbox</a>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568836720, "post_id": 57999783, "comment_id": 102405758, "body": "<code>if name == &#39;main&#39;:</code> should be <code>if __name__ == &#39;__main__&#39;:</code>"}, {"owner": {"reputation": 11, "user_id": 12017000, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419629438127921/picture?type=large", "display_name": "James Sharpe", "link": "https://stackoverflow.com/users/12017000/james-sharpe"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568837628, "post_id": 57999783, "comment_id": 102406078, "body": "I have updated the code ,please can I have feedback."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568838295, "post_id": 57999783, "comment_id": 102406345, "body": "Your indentation is not correct - starting at <code>if __name__ == &#39;__main__&#39;:</code> - please fix."}, {"owner": {"reputation": 11, "user_id": 12017000, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419629438127921/picture?type=large", "display_name": "James Sharpe", "link": "https://stackoverflow.com/users/12017000/james-sharpe"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568844463, "post_id": 57999783, "comment_id": 102408295, "body": "I have resolved the small discrepancy , now please can I be provided a useful link to allow me to progress ."}, {"owner": {"reputation": 10360, "user_id": 587021, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/390ae6c8c1e917c0ac3a562680fed3b7?s=128&d=identicon&r=PG", "display_name": "A T", "link": "https://stackoverflow.com/users/587021/a-t"}, "edited": false, "score": 0, "creation_date": 1568858739, "post_id": 57999783, "comment_id": 102410984, "body": "I would also recommend taking a look at numpy. You can handle large matrices easily, and even if you use multithreading and multiprocessing, it will still speed things up because your batches will be larger."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568905184, "post_id": 57999783, "comment_id": 102431834, "body": "<a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12017000, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419629438127921/picture?type=large", "display_name": "James Sharpe", "link": "https://stackoverflow.com/users/12017000/james-sharpe"}, "edited": false, "score": 0, "creation_date": 1568888909, "post_id": 58002620, "comment_id": 102422162, "body": "Thank you very much for your assistance, such a small tweak but with massive implication for if my program works, thank you."}, {"owner": {"reputation": 11, "user_id": 12017000, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419629438127921/picture?type=large", "display_name": "James Sharpe", "link": "https://stackoverflow.com/users/12017000/james-sharpe"}, "edited": false, "score": 0, "creation_date": 1568982445, "post_id": 58002620, "comment_id": 102459006, "body": "Hi again, okay so my program works independently, and the code tweak ive made allows multiprocessing to occur, why isn&#39;t the program working, it works on the mac but doesn&#39;t work on the windows. Should I post my entire program."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 11, "user_id": 12017000, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419629438127921/picture?type=large", "display_name": "James Sharpe", "link": "https://stackoverflow.com/users/12017000/james-sharpe"}, "edited": false, "score": 0, "creation_date": 1568992480, "post_id": 58002620, "comment_id": 102464577, "body": "That sounds like a different question. You&#39;ll need to include enough cose for people to easily reproduce the problem. - <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. - <code>why isn&#39;t the program working, it works on the mac but doesn&#39;t work on the windows.</code> - you will need to be clear what you mean by this. The example code in this question with the indentation changes does work, it produces the expected result."}], "tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": true, "score": 0, "last_activity_date": 1568905141, "last_edit_date": 1568905141, "creation_date": 1568857499, "answer_id": 58002620, "question_id": 57999783, "link": "https://stackoverflow.com/questions/57999783/multiprocessor-numerical-adder/58002620#58002620", "title": "Multiprocessor Numerical Adder", "body": "<p>I don't know why exactly but this part</p>\n\n<pre><code> print(2)\n new=[]\n for i in result:\n     new.append(i)\n print(new) \n</code></pre>\n\n<p>needs to be <em>in</em> the suite of the if statement. Similar to the example in <a href=\"https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing.pool\" rel=\"nofollow noreferrer\">the documentation.</a></p>\n\n<pre><code>if __name__ == '__main__':\n    with Pool(2) as p:\n        result=p.map(Alter, Values)\n    print(2)\n    new=[]\n    for i in result:\n        new.append(i)\n    print(new) \n</code></pre>\n\n<hr>\n\n<p>I suspect that - <a href=\"https://stackoverflow.com/questions/20360686/compulsory-usage-of-if-name-main-in-windows-while-using-multiprocessi\"><code>Compulsory usage of if __name__==\u201c__main__\u201d in windows while using multiprocessing</code></a> - may be relevant.</p>\n\n<p>If you run your <strong>original</strong> code from a command shell (like PowerShell or command prompt) with <code>python -m mymodulename</code> you will see all the <em>stuff</em> that is going on - Tracebacks from multiple spawned processes. </p>\n"}], "owner": {"reputation": 11, "user_id": 12017000, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419629438127921/picture?type=large", "display_name": "James Sharpe", "link": "https://stackoverflow.com/users/12017000/james-sharpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58002620, "answer_count": 1, "score": 0, "last_activity_date": 1568905141, "creation_date": 1568835806, "last_edit_date": 1568844409, "question_id": 57999783, "link": "https://stackoverflow.com/questions/57999783/multiprocessor-numerical-adder", "title": "Multiprocessor Numerical Adder", "body": "<p>So I am currently involved in a university project looking at thousands of samples of genetic data for cancer patients, might program was going to take too long to run so I used multiprocessing, it worked fine on an apple mac my friend borrowed me,but the moment I transferred it over to a university windows system it has failed and im unsure why the program doesn't work anymore. </p>\n\n<p>I decided to strip my code as simply as possible to see the error,my program itself without the multiprocessing element to speed up the number of samples works fine. I believe the problem revolves around the code below. Instead of placing my very long program ive switched out it for a simple addition, and it still does not work, uses a very high cpu and I cannot see where I am going wrong. Kind Regards.</p>\n\n<p>Expected result is instant 5,15,25,35 instantaneously, I have windows 10 on my computer Im currently using.</p>\n\n<hr>\n\n<pre><code> import multiprocessing\n from multiprocessing import Pool\n import collections\n value=collections.namedtuple('value',['vectx','vecty'])\n Values=(value(vectx=0,vecty=5),value(vectx=5,vecty=10),value(vectx=10,vecty=15),value(vectx=15,vecty=20))\n print(1)\n def Alter(x):\n   vectx=x.vectx\n   vecty=x.vecty\n   Z=(vectx+vecty)\n   return(Z)\n if __name__ == '__main__':\n     with Pool(2) as p:\n          result=p.map(Alter, Values)\n print(2)\n new=[]\n for i in result:\n     new.append(i)\n print(new) \n</code></pre>\n"}, {"tags": ["python", "json", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "is_accepted": false, "score": 0, "last_activity_date": 1568887440, "last_edit_date": 1568887440, "creation_date": 1568886630, "answer_id": 58008292, "question_id": 57999770, "link": "https://stackoverflow.com/questions/57999770/how-to-flatten-nested-dict-formatted-source-column-of-csv-into-dataframe/58008292#58008292", "title": "How to flatten nested dict formatted &#39;_source&#39; column of csv, into dataframe", "body": "<p>I had to do something like that a while back. Basically I used a function that completely flattened out the json to identify the keys that would be turned into the columns, then iterated through the json to reconstruct a row and append each row into a \"results\" dataframe. So with the data you provided, it created 52 column row and looking through it, looks like it included all the keys into it's own column. Anything nested, for example: <code>'meta': {'rule_matcher':[{'atribs': {'website': ...]}</code> should then have a column name <code>meta.rule_matcher.atribs.website</code> where the <code>'.'</code> denotes those nested keys</p>\n\n<pre><code>data_source = {'sub_organization_id': 'default',\n 'uid': 'ac0fafe9ba98327f2d0c72ddc365ffb76336czsa13280b',\n 'project_veid': 'default',\n 'campaign_id': 'default',\n 'organization_id': 'default',\n 'meta': {'rule_matcher': [{'atribs': {'website': 'github.com/res',\n     'source': 'Explicit',\n     'version': '1.1',\n     'type': 'crawl'},\n    'results': [{'rule_type': 'hashtag',\n      'rule_tag': 'Far',\n      'description': None,\n      'project_veid': 'A7180EA-7078-0C7F-ED5D-86AD7',\n      'campaign_id': '2A6DA0C-365BB-67DD-B05830920',\n      'value': '#Far',\n      'organization_id': None,\n      'sub_organization_id': None,\n      'appid': 'ray',\n      'project_id': 'CDE2F42-5B87-C594-C900E578C',\n      'rule_id': '1838',\n      'node_id': None,\n      'metadata': {'campaign_title': 'AF',\n       'project_title': 'AF '}}]}],\n  'render': [{'attribs': {'website': 'github.com/res',\n     'version': '1.0',\n     'type': 'Page Render'},\n    'results': [{'render_status': 'success',\n      'path': 'https://east.amanaws.com/rays-ime-store/renders/b/b/70f7dffb8b276f2977f8a13415f82c.jpeg',\n      'image_hash': 'bb7674b8ea3fc05bfd027a19815f82c',\n      'url': 'https://discooprdapp.com/',\n      'load_time': 32}]}]},\n 'norm_attribs': {'website': 'github.com/res',\n  'version': '1.1',\n  'type': 'crawl'},\n 'project_id': 'default',\n 'system_timestamp': '2019-02-22T19:04:53.569623',\n 'doc': {'appid': 'subtter',\n  'links': [],\n  'response_url': 'https://discooprdapp.com',\n  'url': 'https://discooprdapp.com/',\n  'status_code': 200,\n  'status_msg': 'OK',\n  'encoding': 'utf-8',\n  'attrs': {'uid': '2ab8f2651cb32261b911c990a8b'},\n  'timestamp': '2019-02-22T19:04:53.963',\n  'crawlid': '7fd95-785-4dd259-fcc-8752f'},\n 'type': 'crawl',\n 'norm': {'body': '\\n',\n  'domain': 'discordapp.com',\n  'author': 'crawl',\n  'url': 'https://discooprdapp.com',\n  'timestamp': '2019-02-22T19:04:53.961283+00:00',\n  'id': '7fc5-685-4dd9-cc-8762f'}}\n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>def flatten_json(y):\n    out = {}\n    def flatten(x, name=''):\n        if type(x) is dict:\n            for a in x:\n                flatten(x[a], name + a + '_')\n        elif type(x) is list:\n            i = 0\n            for a in x:\n                flatten(a, name + str(i) + '_')\n                i += 1\n        else:\n            out[name[:-1]] = x\n    flatten(y)\n    return out\n\n\nflat = flatten_json(data_source)\n\n\nimport pandas as pd\nimport re\n\nresults = pd.DataFrame()\nspecial_cols = []\n\ncolumns_list = list(flat.keys())\nfor item in columns_list:\n    try:\n        row_idx = re.findall(r'\\_(\\d+)\\_', item )[0]\n    except:\n        special_cols.append(item)\n        continue\n    column = re.findall(r'\\_\\d+\\_(.*)', item )[0]\n    column = re.sub(r'\\_\\d+\\_', '.', column)\n\n    row_idx = int(row_idx)\n    value = flat[item]\n\n    results.loc[row_idx, column] = value\n\nfor item in special_cols:\n    results[item] = flat[item]\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>print (results.to_string())\n   atribs_website atribs_source atribs_version atribs_type results.rule_type results.rule_tag  results.description          results.project_veid           results.campaign_id results.value  results.organization_id  results.sub_organization_id results.appid           results.project_id results.rule_id  results.node_id results.metadata_campaign_title results.metadata_project_title attribs_website attribs_version attribs_type results.render_status                                       results.path               results.image_hash                results.url  results.load_time sub_organization_id                                             uid project_veid campaign_id organization_id norm_attribs_website norm_attribs_version norm_attribs_type project_id            system_timestamp doc_appid          doc_response_url                    doc_url  doc_status_code doc_status_msg doc_encoding                doc_attrs_uid            doc_timestamp                 doc_crawlid   type norm_body     norm_domain norm_author                  norm_url                    norm_timestamp                 norm_id\n0  github.com/res      Explicit            1.1       crawl           hashtag              Far                  NaN  A7180EA-7078-0C7F-ED5D-86AD7  2A6DA0C-365BB-67DD-B05830920          #Far                      NaN                          NaN           ray  CDE2F42-5B87-C594-C900E578C            1838              NaN                              AF                            AF   github.com/res             1.0  Page Render               success  https://east.amanaws.com/rays-ime-store/render...  bb7674b8ea3fc05bfd027a19815f82c  https://discooprdapp.com/               32.0             default  ac0fafe9ba98327f2d0c72ddc365ffb76336czsa13280b      default     default         default       github.com/res                  1.1             crawl    default  2019-02-22T19:04:53.569623   subtter  https://discooprdapp.com  https://discooprdapp.com/              200             OK        utf-8  2ab8f2651cb32261b911c990a8b  2019-02-22T19:04:53.963  7fd95-785-4dd259-fcc-8752f  crawl        \\n  discordapp.com       crawl  https://discooprdapp.com  2019-02-22T19:04:53.961283+00:00  7fc5-685-4dd9-cc-8762f\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11821781, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iFA6jd5lyWo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdA8IhRuLEZIGz9l4TfbHLhVR-qEg/photo.jpg?sz=128", "display_name": "Benjamin Brown", "link": "https://stackoverflow.com/users/11821781/benjamin-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571796849, "creation_date": 1568835743, "last_edit_date": 1571796849, "question_id": 57999770, "link": "https://stackoverflow.com/questions/57999770/how-to-flatten-nested-dict-formatted-source-column-of-csv-into-dataframe", "title": "How to flatten nested dict formatted &#39;_source&#39; column of csv, into dataframe", "body": "<p>I have a csv with 500+ rows where one column \"_source\" is stored as JSON. I want to extract that into a pandas dataframe. I need each key to be its own column. #I have a 1 mb Json file of online social media data that I need to convert the dictionary and key values into their own separate columns. The social media data is from Facebook,Twitter/web crawled... etc. There are approximately 528 separate rows of posts/tweets/text with each having many dictionaries inside dictionaries. I am attaching a few steps from my Jupyter notebook below to give a more complete understanding. need to turn all key value pairs for dictionaries inside dictionaries into columns inside a dataframe\nThank you so much this will be a huge help!!!\nI have tried changing it to a dataframe by doing this</p>\n\n<pre><code>source = pd.DataFrame.from_dict(source, orient='columns')\n</code></pre>\n\n<p>And it returns something like this... I thought it might unpack the dictionary but it did not.</p>\n\n<pre><code>#source.head()\n\n#_source\n#0   {'sub_organization_id': 'default', 'uid': 'aba...\n#1   {'sub_organization_id': 'default', 'uid': 'ab0...\n#2   {'sub_organization_id': 'default', 'uid': 'ac0...\n</code></pre>\n\n<p>below is the shape</p>\n\n<pre><code>#source.shape (528, 1)\n</code></pre>\n\n<p>below is what the an actual \"_source\" row looks like stretched out. There are many dictionaries and key:value pairs where each key needs to be its own column. Thanks! The actual links have been altered/scrambled for privacy reasons.</p>\n\n<pre><code>{'sub_organization_id': 'default',\n 'uid': 'ac0fafe9ba98327f2d0c72ddc365ffb76336czsa13280b',\n 'project_veid': 'default',\n 'campaign_id': 'default',\n 'organization_id': 'default',\n 'meta': {'rule_matcher': [{'atribs': {'website': 'github.com/res',\n     'source': 'Explicit',\n     'version': '1.1',\n     'type': 'crawl'},\n    'results': [{'rule_type': 'hashtag',\n      'rule_tag': 'Far',\n      'description': None,\n      'project_veid': 'A7180EA-7078-0C7F-ED5D-86AD7',\n      'campaign_id': '2A6DA0C-365BB-67DD-B05830920',\n      'value': '#Far',\n      'organization_id': None,\n      'sub_organization_id': None,\n      'appid': 'ray',\n      'project_id': 'CDE2F42-5B87-C594-C900E578C',\n      'rule_id': '1838',\n      'node_id': None,\n      'metadata': {'campaign_title': 'AF',\n       'project_title': 'AF '}}]}],\n  'render': [{'attribs': {'website': 'github.com/res',\n     'version': '1.0',\n     'type': 'Page Render'},\n    'results': [{'render_status': 'success',\n      'path': 'https://east.amanaws.com/rays-ime-store/renders/b/b/70f7dffb8b276f2977f8a13415f82c.jpeg',\n      'image_hash': 'bb7674b8ea3fc05bfd027a19815f82c',\n      'url': 'https://discooprdapp.com/',\n      'load_time': 32}]}]},\n 'norm_attribs': {'website': 'github.com/res',\n  'version': '1.1',\n  'type': 'crawl'},\n 'project_id': 'default',\n 'system_timestamp': '2019-02-22T19:04:53.569623',\n 'doc': {'appid': 'subtter',\n  'links': [],\n  'response_url': 'https://discooprdapp.com',\n  'url': 'https://discooprdapp.com/',\n  'status_code': 200,\n  'status_msg': 'OK',\n  'encoding': 'utf-8',\n  'attrs': {'uid': '2ab8f2651cb32261b911c990a8b'},\n  'timestamp': '2019-02-22T19:04:53.963',\n  'crawlid': '7fd95-785-4dd259-fcc-8752f'},\n 'type': 'crawl',\n 'norm': {'body': '\\n',\n  'domain': 'discordapp.com',\n  'author': 'crawl',\n  'url': 'https://discooprdapp.com',\n  'timestamp': '2019-02-22T19:04:53.961283+00:00',\n  'id': '7fc5-685-4dd9-cc-8762f'}}\n</code></pre>\n\n<p>before you post make sure the actual code works for the data attached. Thanks!</p>\n\n<p>The below code I tried but it did not work there was a syntax error that I could not figure out.</p>\n\n<p>pd.io.json.json_normalize(source_data.[_source].apply(json.loads))</p>\n\n<pre><code>pd.io.json.json_normalize(source_data.[_source].apply(json.loads))\n                                      ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>Whoever can help me with this will be a saint!</p>\n"}, {"tags": ["python", "excel", "pandas", "connection", "pyodbc"], "comments": [{"owner": {"reputation": 627, "user_id": 9701668, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-awM68pskP-Q/AAAAAAAAAAI/AAAAAAAAB1Q/DnVGA2d1iGc/photo.jpg?sz=128", "display_name": "Adirmola", "link": "https://stackoverflow.com/users/9701668/adirmola"}, "edited": false, "score": 0, "creation_date": 1568836248, "post_id": 57999764, "comment_id": 102405572, "body": "I believe you will find out all the basic to get start with from the package documentation - <a href=\"https://github.com/mkleehammer/pyodbc/wiki\" rel=\"nofollow noreferrer\">github.com/mkleehammer/pyodbc/wiki</a>"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1568837123, "post_id": 57999764, "comment_id": 102405905, "body": "So your Excel document has a query that retrieves rows from a database somewhere and you want to run the equivalent query directly from Python. Is that correct? If so, then it&#39;s almost certainly possible. The issue is that pyodbc uses ODBC connections, not OLEDB connections. BTW, you&#39;re connecting to a Microsoft SQL Server instance, right?"}], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 3869484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LJ3Z0.jpg?s=128&g=1", "display_name": "Richard Crossley", "link": "https://stackoverflow.com/users/3869484/richard-crossley"}, "is_accepted": false, "score": 1, "last_activity_date": 1568853808, "creation_date": 1568853808, "answer_id": 58002289, "question_id": 57999764, "link": "https://stackoverflow.com/questions/57999764/convert-ole-db-sql-connection-string-into-a-dataframe/58002289#58002289", "title": "Convert OLE DB SQL connection string into a dataframe?", "body": "<p>Something like this might work:</p>\n\n<p>This connects using the ODBC driver for SQL Server, runs the query and returns it to Pandas DataFrame and then prints the output.</p>\n\n<pre><code>import pyodbc\nimport pandas\n\n\ndriver = '{ODBC Driver 17 for SQL Server}'\nserver = 'server_name\\instance_name'\ndatabase = 'MarketData'\nsql = 'SELECT  * FROM [MarketData].[Gas].[KplerVesselHistory]'\n\nconn_str = 'Driver={};Server={};Trusted_Connection=True;Database={}'.format(driver, server, database)\nconn = pyodbc.connect(conn_str)\ndf = pandas.read_sql(sql, conn)\nprint(df)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11646968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e4b17a224012930768f5f8c14ac3a2?s=128&d=identicon&r=PG&f=1", "display_name": "LLONDON", "link": "https://stackoverflow.com/users/11646968/llondon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568853808, "creation_date": 1568835709, "last_edit_date": 1568843453, "question_id": 57999764, "link": "https://stackoverflow.com/questions/57999764/convert-ole-db-sql-connection-string-into-a-dataframe", "title": "Convert OLE DB SQL connection string into a dataframe?", "body": "<p>I am very new to python and SQL. I have a DB query in Excel which is very large that I am trying to move to Python directly. Currently i read it in from excel using read_excel(). </p>\n\n<p>Ive installed import pyodbc and tried to take the connection string from excel and put it into python. </p>\n\n<p>default code that i have written is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pyodbc\nconn_str = 'Provider.....'\nconn = pyodbc.connect(conn_str)\n\nSQL_Query = pd.read_sql_query(\n                '''SELECT  *        \n                FROM [MarketData].[Gas].[KplerVesselHistory]''', conn)\n</code></pre>\n\n<p>The excel connection info is as follows:</p>\n\n<pre><code>Connection type: OLE DB Query\n\nConnection string: Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=True;Initial Catalog=MarketData;Data Source=FOTDAL02PR;Use Procedure for Prepare=1;Auto Translate=True;Packet Size=4096;Workstation ID=[blank];Use Encryption for Data=False;Tag with column collation when possible=False\n\nCommand type: SQL\n</code></pre>\n\n<p>The error I'm getting is:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\dev\\bin\\pycharm\\helpers\\pydev\\_pydevd_bundle\\pydevd_exec2.py\", line 3, in Exec\n    exec(exp, global_vars, local_vars)\n  File \"&lt;string&gt;\", line 3, in &lt;module&gt;\npyodbc.InterfaceError: ('IM002', '[IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified (0) (SQLDriverConnect)')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1568835688, "post_id": 57999755, "comment_id": 102405351, "body": "what do you mean by &quot;In my real example, the integers are other thing longer&quot;?"}, {"owner": {"reputation": 270, "user_id": 11760835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OGgMl.jpg?s=128&g=1", "display_name": "PepeElMago33", "link": "https://stackoverflow.com/users/11760835/pepeelmago33"}, "reply_to_user": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1568835795, "post_id": 57999755, "comment_id": 102405396, "body": "@Imiguelvargasf this is just an example, in my real program the variables are lists but it is not relevant"}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 1, "creation_date": 1568835853, "post_id": 57999755, "comment_id": 102405418, "body": "A bit cryptic but shorter, <code>len({a, b, c}) &lt; 3</code>"}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 1, "creation_date": 1568835901, "post_id": 57999755, "comment_id": 102405440, "body": "@DanielMesejo won&#39;t work with lists which are OP real usecase"}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 1, "creation_date": 1568835921, "post_id": 57999755, "comment_id": 102405448, "body": "@DeepSpace you are right, can convert to tuples"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1568837569, "post_id": 57999755, "comment_id": 102406059, "body": "@DanielMesejo Assuming the lists don&#39;t contain unhashable values."}], "answers": [{"comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 1, "creation_date": 1568835984, "post_id": 57999795, "comment_id": 102405472, "body": "You can use set literal so you don&#39;t build and throw away a list (<code>{a,b,c}</code>) but it does not matter since OP&#39;s variables are unhashable lists"}, {"owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "edited": false, "score": 1, "creation_date": 1568836024, "post_id": 57999795, "comment_id": 102405487, "body": "or in general:  <code>lst = [a, b, c];</code>  <code>len(set(lst)) &lt; len(lst)</code>"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1568836148, "post_id": 57999795, "comment_id": 102405534, "body": "True thanks for pointing out @DeepSpace . Lists? Is that mentioned anywhere?"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1568836224, "post_id": 57999795, "comment_id": 102405560, "body": "Oh I see its mentioned in the comments @DeepSpace"}], "tags": [], "owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "is_accepted": true, "score": 5, "last_activity_date": 1568836547, "last_edit_date": 1568836547, "creation_date": 1568835888, "answer_id": 57999795, "question_id": 57999755, "link": "https://stackoverflow.com/questions/57999755/check-if-two-variables-are-equal-from-three-choices/57999795#57999795", "title": "Check if two variables are equal from three choices", "body": "<p>You could just build a <code>set</code> and check the resulting length:</p>\n\n<pre><code>a = 5\nb = 7\nc = 5\n\nif len({a,b,c}) &lt; 3:\n    pass\n</code></pre>\n\n<hr>\n\n<p>Since you mention in your real case the variables are lists, you could convert them to <code>tuples</code> which are hashable and hence can build a set from them. So instead you could do:</p>\n\n<pre><code>a = [5, 2]\nb = [7, 2]\nc = [5, 2]\n\nif len(set(map(tuple, [a,b,c]))) &lt; 3:\n    pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": false, "score": 2, "last_activity_date": 1568837294, "last_edit_date": 1568837294, "creation_date": 1568835962, "answer_id": 57999815, "question_id": 57999755, "link": "https://stackoverflow.com/questions/57999755/check-if-two-variables-are-equal-from-three-choices/57999815#57999815", "title": "Check if two variables are equal from three choices", "body": "<p>Because you are having lists, you won't be able to use a set directly. If so, you will get an error:</p>\n\n<blockquote>\n  <p>TypeError: unhashable type: 'list'</p>\n</blockquote>\n\n<p>Convert your lists to tuples, then use the following:</p>\n\n<pre><code>if len(set([tuple(a),tuple(b), tuple(c)])) &lt; 3:\n    pass\n</code></pre>\n"}], "owner": {"reputation": 270, "user_id": 11760835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OGgMl.jpg?s=128&g=1", "display_name": "PepeElMago33", "link": "https://stackoverflow.com/users/11760835/pepeelmago33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1568835914, "accepted_answer_id": 57999795, "answer_count": 2, "score": 1, "last_activity_date": 1568837294, "creation_date": 1568835651, "last_edit_date": 1568835816, "question_id": 57999755, "link": "https://stackoverflow.com/questions/57999755/check-if-two-variables-are-equal-from-three-choices", "closed_reason": "Duplicate", "title": "Check if two variables are equal from three choices", "body": "<p>I have three integers, and I need to check if two of them are equal. The code I have is quite ugly:</p>\n\n<pre><code>a = 5\nb = 7\nc = 5\nif a == b or b == c or a == b:\n    pass\n</code></pre>\n\n<p>I wonder if there is a better alternative to this kind of comparation.</p>\n"}]