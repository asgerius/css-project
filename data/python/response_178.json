[{"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 1, "creation_date": 1528330101, "post_id": 50731229, "comment_id": 88470268, "body": "Does this work? <a href=\"https://gist.github.com/jlln/338b4b0b55bd6984f883\" rel=\"nofollow noreferrer\">gist.github.com/jlln/338b4b0b55bd6984f883</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3997, "user_id": 8305660, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/41rZg.jpg?s=128&g=1", "display_name": "pyd", "link": "https://stackoverflow.com/users/8305660/pyd"}, "edited": false, "score": 0, "creation_date": 1528696367, "post_id": 50731254, "comment_id": 88588266, "body": "can you add details"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 3997, "user_id": 8305660, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/41rZg.jpg?s=128&g=1", "display_name": "pyd", "link": "https://stackoverflow.com/users/8305660/pyd"}, "edited": false, "score": 1, "creation_date": 1528696410, "post_id": 50731254, "comment_id": 88588286, "body": "@pyd what specifically do you want to know about this?"}, {"owner": {"reputation": 3997, "user_id": 8305660, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/41rZg.jpg?s=128&g=1", "display_name": "pyd", "link": "https://stackoverflow.com/users/8305660/pyd"}, "edited": false, "score": 1, "creation_date": 1528696735, "post_id": 50731254, "comment_id": 88588389, "body": "what is happening in unstacking with <code>-2</code> and reset_index with <code>-1</code>"}, {"owner": {"reputation": 4623, "user_id": 1420757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/173a84b07dfe44a7ac2b6c27d243927b?s=128&d=identicon&r=PG", "display_name": "Moj", "link": "https://stackoverflow.com/users/1420757/moj"}, "edited": false, "score": 0, "creation_date": 1557232078, "post_id": 50731254, "comment_id": 98688951, "body": "what id set_index() throw &quot;Index contains duplicate entries, cannot reshape&quot;. is there anyway around it?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 4623, "user_id": 1420757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/173a84b07dfe44a7ac2b6c27d243927b?s=128&d=identicon&r=PG", "display_name": "Moj", "link": "https://stackoverflow.com/users/1420757/moj"}, "edited": false, "score": 0, "creation_date": 1557244779, "post_id": 50731254, "comment_id": 98696638, "body": "@Moj the idea is the index being set should be unique (like a primary key). One idea would be to add a 3rd index level created using groupby and cumcount(not at my machine, so cannot test it)."}, {"owner": {"reputation": 833, "user_id": 5072692, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cEonA.jpg?s=128&g=1", "display_name": "Adarsh Ravi", "link": "https://stackoverflow.com/users/5072692/adarsh-ravi"}, "edited": false, "score": 0, "creation_date": 1557932312, "post_id": 50731254, "comment_id": 98934077, "body": "So I have a dataframe with 196 columns, one column has comma separated values. I want to split that comma separated value into different rows and duplicate the values in the other 195 columns to each of these new rows. How can I achieve that without having to specify each column name in set_index"}, {"owner": {"reputation": 5343, "user_id": 287297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Ihzmb.png?s=128&g=1", "display_name": "xApple", "link": "https://stackoverflow.com/users/287297/xapple"}, "reply_to_user": {"reputation": 833, "user_id": 5072692, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cEonA.jpg?s=128&g=1", "display_name": "Adarsh Ravi", "link": "https://stackoverflow.com/users/5072692/adarsh-ravi"}, "edited": false, "score": 1, "creation_date": 1559142285, "post_id": 50731254, "comment_id": 99330336, "body": "@AdarshRavi You can do something like this: <code>keep_columns = list(set(df.columns) - set([reshape_columns]))</code>"}, {"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "edited": false, "score": 2, "creation_date": 1587933281, "post_id": 50731254, "comment_id": 108698723, "body": "I updated pandas (version <b>1.0.3</b>) and the newest form doesn&#39;t seem to work anymore:  <code>ValueError: cannot handle a non-unique multi-index!</code>."}, {"owner": {"reputation": 444, "user_id": 7037980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1375af175b38959a5991c2e2f92b773c?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas R", "link": "https://stackoverflow.com/users/7037980/thomas-r"}, "reply_to_user": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "edited": false, "score": 0, "creation_date": 1615221934, "post_id": 50731254, "comment_id": 117618669, "body": "@cglacet I just tested the example with pandas 1.1.4 and it runs through. But while I did the split with &quot; &quot; instead of &quot;,&quot; I had the same error message. The problem was, that I used a pandas DataFrame which has been imported from a csv-file. And then in some columns, there had been additional empty spaces before or after the entries of the list. In consequence the number of resulting list entries in the two columns after the spilt have been different. Since I produced the export-import-file myself, I now created a pickle instead of a csv-file. Now the explode worked like I wanted to."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 60, "last_activity_date": 1600556343, "last_edit_date": 1600556343, "creation_date": 1528329754, "answer_id": 50731254, "question_id": 50731229, "link": "https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe/50731254#50731254", "title": "Split cell into multiple rows in pandas dataframe", "body": "<h1>pandas &gt;= 0.25</h1>\n<p>Assuming all splittable columns have the same number of comma separated items, you can split on comma and then use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.explode.html\" rel=\"noreferrer\"><code>Series.explode</code></a> on each column:</p>\n<pre><code>(df.set_index(['order_id', 'order_date'])\n   .apply(lambda x: x.str.split(',').explode())\n   .reset_index())                                                   \n\n   order_id order_date package package_code\n0         1  20/5/2018      p1         #111\n1         1  20/5/2018      p2         #222\n2         1  20/5/2018      p3         #333\n3         3  22/5/2018      p4         #444\n4         7  23/5/2018      p5         #555\n5         7  23/5/2018      p6         #666\n</code></pre>\n<p><strong>Details</strong></p>\n<p>Set the columns not to be touched as the index,</p>\n<pre><code>df.set_index(['order_id', 'order_date'])\n\n                      package    package_code\norder_id order_date                          \n1        20/5/2018   p1,p2,p3  #111,#222,#333\n3        22/5/2018         p4            #444\n7        23/5/2018      p5,p6       #555,#666\n</code></pre>\n<p>The next step is a 2-step process: Split on comma to get a column of lists, then call <code>explode</code> to explode the list values into their own rows.</p>\n<pre><code>_.apply(lambda x: x.str.split(',').explode())\n\n                    package package_code\norder_id order_date                     \n1        20/5/2018       p1         #111\n         20/5/2018       p2         #222\n         20/5/2018       p3         #333\n3        22/5/2018       p4         #444\n7        23/5/2018       p5         #555\n         23/5/2018       p6         #666\n</code></pre>\n<p>Finally, reset the index.</p>\n<pre><code>_.reset_index()\n\n   order_id order_date package package_code\n0         1  20/5/2018      p1         #111\n1         1  20/5/2018      p2         #222\n2         1  20/5/2018      p3         #333\n3         3  22/5/2018      p4         #444\n4         7  23/5/2018      p5         #555\n5         7  23/5/2018      p6         #666\n</code></pre>\n<hr />\n<h1>pandas &lt;= 0.24</h1>\n<p>This should work for any number of columns like this. The essence is a little stack-unstacking magic with <code>str.split</code>.</p>\n<pre><code>(df.set_index(['order_date', 'order_id'])\n   .stack()\n   .str.split(',', expand=True)\n   .stack()\n   .unstack(-2)\n   .reset_index(-1, drop=True)\n   .reset_index()\n)\n\n  order_date  order_id package package_code\n0  20/5/2018         1      p1         #111\n1  20/5/2018         1      p2         #222\n2  20/5/2018         1      p3         #333\n3  22/5/2018         3      p4         #444\n4  23/5/2018         7      p5         #555\n5  23/5/2018         7      p6         #666\n</code></pre>\n<p>There is another performant alternative involving <code>chain</code>, but you'd need to explicitly chain and repeat every column (a bit of a problem with a lot of columns). Choose whatever fits the description of your problem best, as there's no single answer.</p>\n<p><strong>Details</strong></p>\n<p>First, set the columns that are not to be touched as the index.</p>\n<pre><code>df.set_index(['order_date', 'order_id'])\n \n                      package    package_code\norder_date order_id                          \n20/5/2018  1         p1,p2,p3  #111,#222,#333\n22/5/2018  3               p4            #444\n23/5/2018  7            p5,p6       #555,#666\n</code></pre>\n<p>Next, <code>stack</code> the rows.</p>\n<pre><code>_.stack()\n\norder_date  order_id              \n20/5/2018   1         package               p1,p2,p3\n                      package_code    #111,#222,#333\n22/5/2018   3         package                     p4\n                      package_code              #444\n23/5/2018   7         package                  p5,p6\n                      package_code         #555,#666\ndtype: object\n</code></pre>\n<p>We have a series now. So call <code>str.split</code> on comma.</p>\n<pre><code>_.str.split(',', expand=True)\n\n                                     0     1     2\norder_date order_id                               \n20/5/2018  1        package         p1    p2    p3\n                    package_code  #111  #222  #333\n22/5/2018  3        package         p4  None  None\n                    package_code  #444  None  None\n23/5/2018  7        package         p5    p6  None\n                    package_code  #555  #666  None\n</code></pre>\n<p>We need to get rid of NULL values, so call <code>stack</code> again.</p>\n<pre><code>_.stack()\n\norder_date  order_id                 \n20/5/2018   1         package       0      p1\n                                    1      p2\n                                    2      p3\n                      package_code  0    #111\n                                    1    #222\n                                    2    #333\n22/5/2018   3         package       0      p4\n                      package_code  0    #444\n23/5/2018   7         package       0      p5\n                                    1      p6\n                      package_code  0    #555\n                                    1    #666\ndtype: object\n</code></pre>\n<p>We're almost there. Now we want the second last level of the index to become our columns, so unstack using <code>unstack(-2)</code> (<code>unstack</code> on the second last level)</p>\n<pre><code>_.unstack(-2)\n\n                      package package_code\norder_date order_id                       \n20/5/2018  1        0      p1         #111\n                    1      p2         #222\n                    2      p3         #333\n22/5/2018  3        0      p4         #444\n23/5/2018  7        0      p5         #555\n                    1      p6         #666\n</code></pre>\n<p>Get rid of the superfluous last level using <code>reset_index</code>:</p>\n<pre><code>_.reset_index(-1, drop=True)\n\n                    package package_code\norder_date order_id                     \n20/5/2018  1             p1         #111\n           1             p2         #222\n           1             p3         #333\n22/5/2018  3             p4         #444\n23/5/2018  7             p5         #555\n           7             p6         #666\n</code></pre>\n<p>And finally,</p>\n<pre><code>_.reset_index()\n\n  order_date  order_id package package_code\n0  20/5/2018         1      p1         #111\n1  20/5/2018         1      p2         #222\n2  20/5/2018         1      p3         #333\n3  22/5/2018         3      p4         #444\n4  23/5/2018         7      p5         #555\n5  23/5/2018         7      p6         #666\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4623, "user_id": 1420757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/173a84b07dfe44a7ac2b6c27d243927b?s=128&d=identicon&r=PG", "display_name": "Moj", "link": "https://stackoverflow.com/users/1420757/moj"}, "edited": false, "score": 0, "creation_date": 1557231659, "post_id": 50731258, "comment_id": 98688697, "body": "what if there are two columns that need to be expanded and have different lens?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 4623, "user_id": 1420757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/173a84b07dfe44a7ac2b6c27d243927b?s=128&d=identicon&r=PG", "display_name": "Moj", "link": "https://stackoverflow.com/users/1420757/moj"}, "edited": false, "score": 2, "creation_date": 1557236904, "post_id": 50731258, "comment_id": 98691894, "body": "@Moj, That problem isn&#39;t well defined. You can&#39;t, for example align 3 values with 5 values with a 1-to-1 mapping. I suggest you ask a new question specifying precisely your desired output, if your question hasn&#39;t been answered elsewhere."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 23, "last_activity_date": 1528334420, "last_edit_date": 1528334420, "creation_date": 1528329780, "answer_id": 50731258, "question_id": 50731229, "link": "https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe/50731258#50731258", "title": "Split cell into multiple rows in pandas dataframe", "body": "<p>Here's one way using <code>numpy.repeat</code> and <code>itertools.chain</code>. Conceptually, this is exactly what you want to do: repeat some values, chain others. Recommended for small numbers of columns, otherwise <code>stack</code> based methods may fare better.</p>\n\n<pre><code>import numpy as np\nfrom itertools import chain\n\n# return list from series of comma-separated strings\ndef chainer(s):\n    return list(chain.from_iterable(s.str.split(',')))\n\n# calculate lengths of splits\nlens = df['package'].str.split(',').map(len)\n\n# create new dataframe, repeating or chaining as appropriate\nres = pd.DataFrame({'order_id': np.repeat(df['order_id'], lens),\n                    'order_date': np.repeat(df['order_date'], lens),\n                    'package': chainer(df['package']),\n                    'package_code': chainer(df['package_code'])})\n\nprint(res)\n\n   order_id order_date package package_code\n0         1  20/5/2018      p1         #111\n0         1  20/5/2018      p2         #222\n0         1  20/5/2018      p3         #333\n1         3  22/5/2018      p4         #444\n2         7  23/5/2018      p5         #555\n2         7  23/5/2018      p6         #666\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528333387, "post_id": 50731451, "comment_id": 88471014, "body": "@coldspeed yep , I will going to highlight it again in my mind (apply is bad ! :-()"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1528362224, "post_id": 50731451, "comment_id": 88481771, "body": "If <code>apply(pd.Series)</code> is bad, isn&#39;t <code>stack</code> worse? I&#39;ve seen it often underperform simple iteration!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1528376267, "post_id": 50731451, "comment_id": 88491094, "body": "@jpp yeah it was general advice to Wen (he gets it) because he uses it a bit more than he should, and you&#39;d expect a 60k user with a gold badge to want to propagate good practices where possible ;-) sure stack sucks, but its flexibility here is useful."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 4, "last_activity_date": 1528333935, "last_edit_date": 1528333935, "creation_date": 1528331834, "answer_id": 50731451, "question_id": 50731229, "link": "https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe/50731451#50731451", "title": "Split cell into multiple rows in pandas dataframe", "body": "<p>Close to cold's method :-) </p>\n\n<pre><code>df.set_index(['order_date','order_id']).apply(lambda x : x.str.split(',')).stack().apply(pd.Series).stack().unstack(level=2).reset_index(level=[0,1])\nOut[538]: \n  order_date  order_id package package_code\n0  20/5/2018         1      p1         #111\n1  20/5/2018         1      p2         #222\n2  20/5/2018         1      p3         #333\n0  22/5/2018         3      p4         #444\n0  23/5/2018         7      p5         #555\n1  23/5/2018         7      p6         #666\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1568749641, "post_id": 57109769, "comment_id": 102371393, "body": "This is neat. It would be nice to know (a) how Pandas has implemented this function internally, (b) how this solution compares with others in terms of performance."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1569336615, "post_id": 57109769, "comment_id": 102560032, "body": "Only one column can be exploded this way"}, {"owner": {"reputation": 161, "user_id": 11236608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce8de30a6e2c5cb1b03fbac1b5537b1?s=128&d=identicon&r=PG", "display_name": "Heraknos", "link": "https://stackoverflow.com/users/11236608/heraknos"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1569400177, "post_id": 57109769, "comment_id": 102580783, "body": "@cs95 No, it&#39;s possible to explode on multiple columns by adapting like this : <code>df = pd.DataFrame([{&#39;var1&#39;: &#39;a,b,c&#39;,&#39;var3&#39;: &#39;x1,x2,x3&#39;, &#39;var2&#39;: 1}, {&#39;var1&#39;: &#39;d,e,f&#39;,&#39;var3&#39;: &#39;x1,x2,x4&#39;, &#39;var2&#39;: 2}])     df.assign(var1=df.var1.str.split(&#39;,&#39;), var3=df.var3.str.split(&#39;,&#39;)).explode(&#39;var1&#39;).explode(&#39;var3&#39;)&zwnj;&#8203;.reset_index(drop=Tr&zwnj;&#8203;ue)</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1569425385, "post_id": 57109769, "comment_id": 102595309, "body": "The result is incorrect, each column is exploded separately rather than in tandem with each other, producing more rows in the result than desired."}, {"owner": {"reputation": 161, "user_id": 11236608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce8de30a6e2c5cb1b03fbac1b5537b1?s=128&d=identicon&r=PG", "display_name": "Heraknos", "link": "https://stackoverflow.com/users/11236608/heraknos"}, "edited": false, "score": 0, "creation_date": 1569513007, "post_id": 57109769, "comment_id": 102629699, "body": "I don&#39;t understand, can you put an exemple of data and result wanted ?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1573511296, "post_id": 57109769, "comment_id": 103898485, "body": "Just run your own code and see. Anyway, if you want to do this for multiple columns, you can use apply. See my edited answer."}], "tags": [], "owner": {"reputation": 161, "user_id": 11236608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce8de30a6e2c5cb1b03fbac1b5537b1?s=128&d=identicon&r=PG", "display_name": "Heraknos", "link": "https://stackoverflow.com/users/11236608/heraknos"}, "is_accepted": false, "score": 12, "last_activity_date": 1563529376, "creation_date": 1563529376, "answer_id": 57109769, "question_id": 50731229, "link": "https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe/57109769#57109769", "title": "Split cell into multiple rows in pandas dataframe", "body": "<p>Have a look at today's pandas release 0.25 :\n<a href=\"https://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.25.0.html#series-explode-to-split-list-like-values-to-rows\" rel=\"noreferrer\">https://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.25.0.html#series-explode-to-split-list-like-values-to-rows</a></p>\n\n<pre><code>df = pd.DataFrame([{'var1': 'a,b,c', 'var2': 1}, {'var1': 'd,e,f', 'var2': 2}])\ndf.assign(var1=df.var1.str.split(',')).explode('var1').reset_index(drop=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4845, "user_id": 3601660, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9dfe9498ed911a8b1c7e386e14f98ea9?s=128&d=identicon&r=PG&f=1", "display_name": "c z", "link": "https://stackoverflow.com/users/3601660/c-z"}, "is_accepted": false, "score": 0, "last_activity_date": 1591778113, "creation_date": 1591778113, "answer_id": 62299226, "question_id": 50731229, "link": "https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe/62299226#62299226", "title": "Split cell into multiple rows in pandas dataframe", "body": "<p>Given that <code>explode</code> only affects list columns anyway, a simple solution is:</p>\n\n<pre><code># Convert columns of interest to list columns\nd[\"package\"]      = d[\"package\"].str.split(\",\")\nd[\"package_code\"] = d[\"package_code\"].str.split(\",\")\n\n# Explode the entire data frame\nd = d.apply( pandas.Series.explode )\n</code></pre>\n\n<p><strong>Advantages</strong>: </p>\n\n<ul>\n<li>Avoids having to moving the core data to an index to \"keep it out the way\" and therefore doesn't fail with a \"duplicate index\" error when the data contains repeats.</li>\n</ul>\n\n<p><strong>Disadvantages</strong>:</p>\n\n<ul>\n<li>Only works if there are no list columns already in the data (although this is almost always the case).</li>\n</ul>\n"}], "owner": {"reputation": 1023, "user_id": 3860158, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PDqD5.jpg?s=128&g=1", "display_name": "Nobel", "link": "https://stackoverflow.com/users/3860158/nobel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37621, "favorite_count": 29, "accepted_answer_id": 50731258, "answer_count": 5, "score": 37, "last_activity_date": 1608664768, "creation_date": 1528329460, "last_edit_date": 1528334009, "question_id": 50731229, "link": "https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe", "title": "Split cell into multiple rows in pandas dataframe", "body": "<p>I have a dataframe contains orders data, each order has multiple packages stored as comma separated string [<code>package</code> &amp; <code>package_code</code>] columns</p>\n\n<p>I want to split the packages data and create a row for each package including its order details</p>\n\n<p>Here is a sample input dataframe:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({\"order_id\":[1,3,7],\"order_date\":[\"20/5/2018\",\"22/5/2018\",\"23/5/2018\"], \"package\":[\"p1,p2,p3\",\"p4\",\"p5,p6\"],\"package_code\":[\"#111,#222,#333\",\"#444\",\"#555,#666\"]})\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ih2hm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ih2hm.png\" alt=\"Input Dataframe\"></a></p>\n\n<p>And this is what I am trying to achieve as output:\n<a href=\"https://i.stack.imgur.com/GLthN.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GLthN.png\" alt=\"Output\"></a></p>\n\n<p>How can I do that with pandas?</p>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1528332245, "post_id": 50731225, "comment_id": 88470770, "body": "By GCD do you mean the Greatest Common Divisor, the largest number that evenly divides to given numbers? That is the usual meaning, and for this meaning the GCD of 25 and 50 is 25. The Greatest Common Denominator is different: for 1/25 and 1/50 the greatest common denominator is indeed 50, since to add those two fractions you want to change both fractions to have a denominator of 50. If that&#39;s what you mean you should call it the Least Common Multiple (LCM)."}, {"owner": {"reputation": 420, "user_id": 2303473, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a11b35eed0c2c189ed253590c2f7b698?s=128&d=identicon&r=PG", "display_name": "phsyron", "link": "https://stackoverflow.com/users/2303473/phsyron"}, "edited": false, "score": 0, "creation_date": 1528333353, "post_id": 50731225, "comment_id": 88471004, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35870995/greatest-common-divisor\">Greatest common divisor</a>"}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1528330019, "post_id": 50731245, "comment_id": 88470252, "body": "This answer could really use some explanation."}], "tags": [], "owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "is_accepted": false, "score": 1, "last_activity_date": 1528331073, "last_edit_date": 1528331073, "creation_date": 1528329625, "answer_id": 50731245, "question_id": 50731225, "link": "https://stackoverflow.com/questions/50731225/why-is-my-greatest-common-denominator-program-not-outputting-the-right-informa/50731245#50731245", "title": "Why is my &quot;Greatest Common Denominator&quot; program not outputting the right information?", "body": "<pre><code>x = min(integer1, integer2)\nwhile integer1 % x or integer2 % x:\n    x = x - 1\n</code></pre>\n\n<ul>\n<li>avoid duplicating your code, just set <code>x</code> then apply your logic which doesn't change</li>\n<li><code>x</code> can start at the minimum value rather than the maximum</li>\n<li>for <code>x</code> to be accepted it should satisfy both <code>integer1 % x == 0</code> and <code>integer2 % x == 0</code>, so the stop condition of your <code>while</code> should be <code>integer1 % x != 0 or integer2 % x != 0</code> (and the <code>!=0</code> are here redundant with int to bool conversion so you can skip them)</li>\n<li>in general <code>a and b == 0</code> type of expression don't behave the way you probably think, the \"correct\" way is <code>a == 0 and b == 0</code>.</li>\n</ul>\n"}], "owner": {"reputation": 137, "user_id": 9879581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b5b51aaa081a889adf90b58a0d64c8?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Klope", "link": "https://stackoverflow.com/users/9879581/jay-klope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528352945, "creation_date": 1528329426, "last_edit_date": 1528352945, "question_id": 50731225, "link": "https://stackoverflow.com/questions/50731225/why-is-my-greatest-common-denominator-program-not-outputting-the-right-informa", "title": "Why is my &quot;Greatest Common Denominator&quot; program not outputting the right information?", "body": "<p>This is my program to determine the \"greatest common denominator of two numbers\"</p>\n\n<pre><code>integer1 = int(input(\"Enter an integer:\"))\ninteger2 = int(input(\"Enter an integer:\"))\n\nif integer1 &gt; integer2:\n    x = integer1\n    while integer1%x and integer2%x !=0:\n        x = x - 1\n\nelif integer2 &gt; integer1:\n    x = integer2\n    while integer1%x and integer2%x !=0:\n        x = x - 1\n\nprint(\"the gcd of\",integer1,\"and\",integer2,\"is\",x)\n</code></pre>\n\n<p>for example, when I input the values \"25\" and \"50\", my program will say the GCD is 50, which is incorrect. </p>\n"}, {"tags": ["python", "multithreading", "python-3.x", "python-multithreading"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1528329507, "post_id": 50731203, "comment_id": 88470131, "body": "&quot;From what I understand, if I set myThread.daemon=True for my spawned threads, they will automatically exit safely when the main thread exits&quot; - they will automatically exit, but abruptly and unsafely."}], "answers": [{"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": true, "score": 2, "last_activity_date": 1528332117, "creation_date": 1528332117, "answer_id": 50731478, "question_id": 50731203, "link": "https://stackoverflow.com/questions/50731203/should-i-use-events-semaphores-locks-conditions-or-a-combination-thereof-to/50731478#50731478", "title": "Should I use Events, Semaphores, Locks, Conditions, or a combination thereof to manage safely exiting my multithreaded Python program?", "body": "<p>I would use an <code>Event</code> <strong>to signal to a thread that it should exit</strong>:</p>\n\n<ul>\n<li>create an event in <code>__init__</code></li>\n<li>use the event's <code>wait()</code> in <code>run()</code> for <code>sleep</code> and for checking when to exit</li>\n<li>set the event from outside to stop the thread</li>\n</ul>\n\n<p><strong>To handle exceptions within a thread</strong>, I would have a <code>try</code>/ <code>except</code> block around everything it does. When something is caught, store the exception (and/or any other info you need), clean up and exit the thread.</p>\n\n<p>Outside, in the main thread, check for the store exceptions in all threads, if any exception is found, signal to all threads that they should exit.</p>\n\n<p><strong>To handle exceptions in the main thread</strong> (which includes also <code>SIGINT</code>), have a <code>try</code>/<code>except</code> block there and signal to all threads to stop.</p>\n\n<p>All together, with dummy exceptions and debug prints:</p>\n\n<pre><code>import threading\nimport time\n\nclass MyThread(threading.Thread):\n    def __init__(self):\n        super().__init__()\n        self.stop_requested = threading.Event()\n        self.exception = None\n\n    def run(self):\n        try:\n            # sleep for 1 second, or until stop is requested, stop if stop is requested\n            while not self.stop_requested.wait(1):\n                # do your thread thing here\n                print('in thread {}'.format(self))\n\n                # simulate a random exception:\n                import random\n                if random.randint(0, 50) == 42:\n                    1 / 0\n        except Exception as e:\n            self.exception = e\n\n        # clean up here\n        print('clean up thread {}'.format(self))\n\n    def stop(self):\n        # set the event to signal stop\n        self.stop_requested.set()\n\n# create and start some threads\nthreads = [MyThread(), MyThread(), MyThread(), MyThread()]\nfor t in threads:\n    t.start()\n\n# main thread looks at the status of all threads\ntry:\n    while True:\n        for t in threads:\n            if t.exception:\n                # there was an error in a thread - raise it in main thread too\n                # this will stop the loop\n                raise t.exception\n        time.sleep(0.2)\n\nexcept Exception as e:\n    # handle exceptions any way you like, or don't\n    # This includes exceptions in main thread as well as those in other threads\n    # (because of \"raise t.exception\" above)\n    print(e)\n\nfinally:\n    print('clan up everything')\n    for t in threads:\n        # threads will know how to clean up when stopped\n        t.stop()\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 3096324, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1372d201385e3c147b9abe679c6b70c5?s=128&d=identicon&r=PG&f=1", "display_name": "FredGooch", "link": "https://stackoverflow.com/users/3096324/fredgooch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 50731478, "answer_count": 1, "score": 2, "last_activity_date": 1528332117, "creation_date": 1528329232, "last_edit_date": 1528329822, "question_id": 50731203, "link": "https://stackoverflow.com/questions/50731203/should-i-use-events-semaphores-locks-conditions-or-a-combination-thereof-to", "title": "Should I use Events, Semaphores, Locks, Conditions, or a combination thereof to manage safely exiting my multithreaded Python program?", "body": "<p>I am writing a multithreaded python program in which the main thread and the other threads it spawns run as daemons (but not with Thread.daemon=True) that look for certain files in certain directories and perform actions with them when they exist. It is possible that an error occurs in one/any of the threads which would require the whole program to exit. However, I need the other threads to finish their current job before exiting.</p>\n\n<p>From what I understand, if I set myThread.daemon=True for my spawned threads, they will automatically exit immediately when the main thread exits. However, I want the other threads to finish their current job before exiting (unless the error is some sort of catastrophic failure, in which case I'll probably just exit everything anyway, safely or not). Therefore, I am not setting the daemon property to True for the threads. </p>\n\n<p>Looking at the threading module documentation and the various objects available to me such as Events, Semaphores, Conditions, and Locks, I'm unsure of the best way to handle my situation. Additionally, I'm unsure how to handle this scenario when the program needs to terminate due to SIGTERM/SIGINT signals.</p>\n\n<p>Some code that illustrates a simplified version of the structure of my program:</p>\n\n<pre><code>import threading\nimport signals\nimport glob\nimport time\n\nclass MyThread1( threading.thread ):\n    def __init__( self, name='MyThread1' ):\n        threading.Thread.__init__( self )\n        self.name = name\n        return\n    def run( self ):\n        while True:\n            filePathList = glob.glob( thisThreadDir + '/*.txt' )\n            for file in filePathList:\n                try:\n                    doSomeProcessing( file )\n                    # Then move the file to another thread's dir\n                    # or potentially create a new file that will \n                    # be picked up by another thread\n                except:\n                    # Need to potentially tell all other threads\n                    # to finish task and exit depending on error\n\n            # I assume this would be the place to check for some kind of\n            # flag or other indication to terminate the thread?\n            time.sleep( 30 )\n\n\n# Now imagine a few more custom threads with the same basic structure, \n# except that what is happening in doSomeProcessing() will obviously vary\n\n# Main Thread/Script\ndef sigintHandler( SIGINT, frame ):\n    # How do I handle telling all threads to finish their current loop\n    # and then exit safely when I encounter this signal?\n    sys.exit( 1 )\n\ndef sigtermHandler( SIGTERM, frame ):\n    # Same question for this signal handler\n    sys.exit( 1 )\n\nsignal.signal( signal.SIGINT, sigintHandler )\nsignal.signal( signal.SIGTERM, sigtermHandler )\n\nmyOtherThread1 = MyThread1()\nmyOtherThreadN = MyThreadN()\n\nmyOtherThread1.start()\nmyOtherThreadN.start()\n\nwhile True:\n    filePathList = glob.glob( mainDir + '/*.txt' )\n    for file in filePathList:\n        try:\n            doMainProcessing( file )\n            # Move file or write a new one in another thread's dir\n        except:\n            # Again, potentially need to exit the whole program, but want \n            # the other threads to finish their current loop first \n\n    # Check if another thread told us we need to exit?\n    time.sleep( 30 )\n</code></pre>\n"}, {"tags": ["python", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1528355944, "last_edit_date": 1528355944, "creation_date": 1528333122, "answer_id": 50731582, "question_id": 50731170, "link": "https://stackoverflow.com/questions/50731170/opencv-python-split-laplacian-houghcircles-assertion-failed/50731582#50731582", "title": "OpenCV Python Split -&gt; Laplacian -&gt; HoughCircles = Assertion failed.", "body": "<p>The image type you have mentioned in the <code>cv2.Laplacian</code> is the problem. The other thing is your code was not completed. So here is the completed code.</p>\n\n<pre><code>import cv2\nimport numpy as np\nimg = cv2.imread('stack1.png')    \n\nb, g, r = cv2.split(img)\nkSize = 3\ngBlur = cv2.blur(g, (kSize, kSize))\nprint(gBlur.shape)\ntest = np.array([])\ngEdges = cv2.Laplacian(gBlur, cv2.CV_8UC1)\ncircles = cv2.HoughCircles(gEdges, cv2.HOUGH_GRADIENT, 40, 10, param1=50,param2=60,minRadius=2,maxRadius=15)\ncircles = np.uint16(np.around(circles))\nfor i in circles[0,:]:\n    # draw the outer circle\n    cv2.circle(img,(i[0],i[1]),i[2],(0,255,0),2)\n    # draw the center of the circle\n    cv2.circle(img,(i[0],i[1]),2,(0,0,255),3)\n\ncv2.imshow('detected circles',img)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n"}], "owner": {"reputation": 98, "user_id": 9548805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476d25f0fa50ad5e5b6d1da0504631af?s=128&d=identicon&r=PG", "display_name": "A. McLean", "link": "https://stackoverflow.com/users/9548805/a-mclean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 50731582, "answer_count": 1, "score": 0, "last_activity_date": 1528355944, "creation_date": 1528328998, "question_id": 50731170, "link": "https://stackoverflow.com/questions/50731170/opencv-python-split-laplacian-houghcircles-assertion-failed", "title": "OpenCV Python Split -&gt; Laplacian -&gt; HoughCircles = Assertion failed.", "body": "<p>I'm trying to perform a hough circles operation on an <a href=\"https://i.stack.imgur.com/PhWSO.png\" rel=\"nofollow noreferrer\">image</a> after I have split the channels, blurred the results from the split (individually), and applied a Laplacian operation to the constituent components. </p>\n\n<pre><code>img = cv2.imread(fileName)\n\n\nb, g, r = cv2.split(img)\nkSize = 3\ngBlur = cv2.blur(g, (kSize, kSize))\nprint(gBlur.shape)\ntest = np.array([])\ngEdges = cv2.Laplacian(gBlur, cv2.CV_64F)\ncircles = cv2.HoughCircles(gEdges, cv2.HOUGH_GRADIENT, 40, 10,\n                        param1=50,param2=60,minRadius=2,maxRadius=15)\n</code></pre>\n\n<p>However, I am getting an Error from OpenCV stating: </p>\n\n<pre><code>OpenCV(3.4.1) Error: Assertion failed (!_image.empty() &amp;&amp; \n_image.type() == (((0) &amp; ((1 &lt;&lt; 3) - 1)) + (((1)-1) &lt;&lt; 3)) &amp;&amp; \n(_image.isMat() || _image.isUMat())) in HoughCircles, file \n/io/opencv/modules/imgproc/src/hough.cpp, line 1659\n</code></pre>\n\n<p>and </p>\n\n<pre><code>cv2.error: OpenCV(3.4.1) /io/opencv/modules/imgproc/src/hough.cpp:1659: \nerror: (-215) !_image.empty() &amp;&amp; _image.type() == (((0) &amp; ((1 &lt;&lt; 3) - 1)) \n+ (((1)-1) &lt;&lt; 3)) &amp;&amp; (_image.isMat() || _image.isUMat()) in function \nHoughCircles\n</code></pre>\n\n<p>I don't understand why this is occurring. The image is in grayscale. I've also tried changing the data type in the Laplacian operation to cv2.CV_16U, cv2.CV_8U even; however those result in a blank image - and opencv throws a different error as a result. </p>\n"}, {"tags": ["python", "performance", "csv"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1528329092, "post_id": 50731160, "comment_id": 88470023, "body": "Why are you re-opening the file, creatinga writer object,  over and over again in a loop? I would start by bringing that out of the loop..."}, {"owner": {"reputation": 7561, "user_id": 82952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6c37feda25b4887293349c1480a5fcb?s=128&d=identicon&r=PG", "display_name": "nevets1219", "link": "https://stackoverflow.com/users/82952/nevets1219"}, "edited": false, "score": 0, "creation_date": 1528329227, "post_id": 50731160, "comment_id": 88470058, "body": "You can use <code>os.path.join(...)</code> - see <a href=\"https://docs.python.org/2/library/os.path.html#os.path.join\" rel=\"nofollow noreferrer\">docs.python.org/2/library/os.path.html#os.path.join</a>"}, {"owner": {"reputation": 441, "user_id": 4364134, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Ha8V3.jpg?s=128&g=1", "display_name": "TacoCat", "link": "https://stackoverflow.com/users/4364134/tacocat"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1528329441, "post_id": 50731160, "comment_id": 88470116, "body": "@juanpa.arrivillaga how would that look like?   the line &quot;with open(...)&quot; would come above the loop and the rest of if, would stay where it is, but be in the same indentation as H.append?"}], "answers": [{"tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1528383889, "creation_date": 1528383889, "answer_id": 50744545, "question_id": 50731160, "link": "https://stackoverflow.com/questions/50731160/improve-csv-file-write-speed/50744545#50744545", "title": "Improve CSV file write speed", "body": "<p>The following approach avoids reopening your output file. It also makes use of a <code>DictWriter</code> as <code>data</code> is already a dictionary:</p>\n\n<pre><code>import os\nimport csv\n\n\nfilename = os.path.join('data', i, coin_symbol + '.csv')\nmode = 'a' if os.path.isfile(filename) else 'w'\n\nfieldnames = ['timestamp', 'open', 'close', 'min', 'max', 'volume', 'volumeQuote']\nheader = ['TimeStamp', 'Open', 'Close', 'Min', 'Max', 'Volume', 'VolumeQuote']\n\nwith open(filename, mode, newline='') as f_output:\n    csv_output = csv.DictWriter(f_output, fieldnames=fieldnames)\n\n    if mode == 'w':\n        csv_output.writerow(dict(zip(fieldnames, header)))\n\n    for row in data:\n        csv_output.writerow(row)\n</code></pre>\n\n<p><code>os.path.join()</code> is a better approach than trying to add <code>os.sep</code>.</p>\n"}], "owner": {"reputation": 441, "user_id": 4364134, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Ha8V3.jpg?s=128&g=1", "display_name": "TacoCat", "link": "https://stackoverflow.com/users/4364134/tacocat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1258, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528383889, "creation_date": 1528328936, "last_edit_date": 1528329800, "question_id": 50731160, "link": "https://stackoverflow.com/questions/50731160/improve-csv-file-write-speed", "title": "Improve CSV file write speed", "body": "<p>The code below works just fine. I'm wondering is there any way to improve the write speed of it. As it would currently take from 12 to 20 seconds to write the .csv file. </p>\n\n<pre><code>import csv\nimport os\n\ndata = [...1000 item list, where each item is a dictionary with 8 values...]\n\nfor candle in data:\n        if os.path.isfile('data'+os.sep+i+os.sep+coin_symbol+'.csv'):\n            H = []\n            H.append(candle['timestamp'])\n            H.append(candle['open'])\n            H.append(candle['close'])\n            H.append(candle['min'])\n            H.append(candle['max'])\n            H.append(candle['volume'])\n            H.append(candle['volumeQuote'])\n\n            with open('data'+os.sep+i+os.sep+coin_symbol+'.csv', 'a', newline=\"\") as csvfile:\n                csvwriter = csv.writer(csvfile, delimiter=',')\n                csvwriter.writerow(H)\n        else: \n\n                H = []\n                H.append('TimeStamp')\n                H.append('Open')\n                H.append('Close')\n                H.append('Min')\n                H.append('Max')\n                H.append('Volume')\n                H.append('VolumeQuote')\n\n\n\n                with open('data'+os.sep+i+os.sep+coin_symbol+'.csv', 'w', newline=\"\") as csvfile:\n                    csvwriter = csv.writer(csvfile, delimiter=',')\n                    csvwriter.writerow(H)\n                H = []\n                H.append(candle['timestamp'])\n                H.append(candle['open'])\n                H.append(candle['close'])\n                H.append(candle['min'])\n                H.append(candle['max'])\n                H.append(candle['volume'])\n                H.append(candle['volumeQuote'])\n\n                with open('data'+os.sep+i+os.sep+coin_symbol+'.csv', 'a', newline=\"\") as csvfile:\n                    csvwriter = csv.writer(csvfile, delimiter=',')\n                    csvwriter.writerow(H)\n</code></pre>\n\n<p>For the Else statement, is there any way to write it differently? </p>\n"}, {"tags": ["python", "matplotlib", "plot", "connection"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528328998, "post_id": 50731146, "comment_id": 88469998, "body": "To me it seems that the code does exactly what you want. Can you be more specific in how far this is not the case?"}, {"owner": {"reputation": 19, "user_id": 5834700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674672948b7d4afb96a711f61e9db99c?s=128&d=identicon&r=PG&f=1", "display_name": "IF U FLOW U KNOW", "link": "https://stackoverflow.com/users/5834700/if-u-flow-u-know"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528329143, "post_id": 50731146, "comment_id": 88470034, "body": "The code saves the coordinates in the terminal but then I would have to manually transfer them to an array. how can I transfer each click event to an empty array?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528329189, "post_id": 50731146, "comment_id": 88470044, "body": "The coordinates are saved in the <code>coords</code> array."}, {"owner": {"reputation": 19, "user_id": 5834700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674672948b7d4afb96a711f61e9db99c?s=128&d=identicon&r=PG&f=1", "display_name": "IF U FLOW U KNOW", "link": "https://stackoverflow.com/users/5834700/if-u-flow-u-know"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528329267, "post_id": 50731146, "comment_id": 88470075, "body": "Thank you for your help. how do i access the coords array? and where is it saved?"}], "owner": {"reputation": 19, "user_id": 5834700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674672948b7d4afb96a711f61e9db99c?s=128&d=identicon&r=PG&f=1", "display_name": "IF U FLOW U KNOW", "link": "https://stackoverflow.com/users/5834700/if-u-flow-u-know"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528328780, "creation_date": 1528328780, "question_id": 50731146, "link": "https://stackoverflow.com/questions/50731146/within-matplotlib-i-want-to-click-on-a-specific-portion-of-a-graph-and-save-the", "title": "Within Matplotlib: I want to click on a specific portion of a graph and save these coordinates to an empty array", "body": "<p>I am using matplotlib and have grabbed much of the code from previous questions within the stack community. </p>\n\n<p>Link here :<a href=\"https://stackoverflow.com/questions/25521120/store-mouse-click-event-coordinates-with-matplotlib\">Store mouse click event coordinates with matplotlib</a></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.integrate import trapz\n\ndef find_nearest(array,value):\n    idx = (np.abs(array-value)).argmin()\n    return array[idx]\n\ndef onclick(event):\n    global ix,iy\n    ix,iy = event.xdata, event.ydata\n    #print 'x = %d, y = %d'%(ix,iy)\n\n    global coords\n    coords.append((ix,iy))\n\n#disconnect after 2 clicks\nif len(coords) ==2:\n    fig.canvas.mpl_disconnect(cid)\n    plt.close(1)\nreturn\n\nx = np.arange(-10,10)\ny = x**2\n\nfig = plt.figure(2)\nax = fig.add_subplot(111)\nax.plot(x,y)\n\ncoords = []\n\ncid = fig.canvas.mpl_connect('button_press_event', onclick)\n\nplt.show()\n\n#integration limits\n\nch1 = np.where(x == (find_nearest(x,coords[0][0])))\nch2 = np.where(x == (find_nearest(x, coords[1][0])))\n\n#calculate integral\ny_int = trapz(y[ch1[0][0]:ch2[0][0], x = x[ch1][0][0]:ch2[0][0]])\n\nprint ''\nprint 'Integral between ' + str(coords[0][0])+ '&amp; ' + str(coords[1][0])\nprint y_int\n</code></pre>\n\n<p>I figured this would save coordinates and it does. It saves the final click in my terminal after closing the plot. </p>\n\n<p>I wish to click multiple times on the graph and possibly save the location of these clicks to an empty array to use later. \nAny suggestions or different modules to import to help are great. </p>\n"}, {"tags": ["python", "cprofile"], "answers": [{"comments": [{"owner": {"reputation": 251717, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1579184997, "post_id": 54197448, "comment_id": 105687264, "body": "Ah, yes, I was just brainlessly copying the sample from from: <a href=\"https://docs.python.org/3.6/library/profile.html#instant-user-s-manual\" rel=\"nofollow noreferrer\">docs.python.org/3.6/library/profile.html#instant-user-s-manu&zwnj;&#8203;al</a>"}, {"owner": {"reputation": 439, "user_id": 6526918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ee35cd7b2ad66f0e892cf25d809669?s=128&d=identicon&r=PG", "display_name": "HosseyNJF", "link": "https://stackoverflow.com/users/6526918/hosseynjf"}, "edited": false, "score": 2, "creation_date": 1603383160, "post_id": 54197448, "comment_id": 114026766, "body": "What if cProfiler is getting run from terminal?"}], "tags": [], "owner": {"reputation": 21, "user_id": 10916502, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/b78749d86b61087820cb68e86e1cc126?s=128&d=identicon&r=PG", "display_name": "user10916502", "link": "https://stackoverflow.com/users/10916502/user10916502"}, "is_accepted": false, "score": 2, "last_activity_date": 1547549633, "creation_date": 1547549633, "answer_id": 54197448, "question_id": 50731065, "link": "https://stackoverflow.com/questions/50731065/python-cprofile-filenamelineno-get-full-path/54197448#54197448", "title": "Python cprofile filename:lineno get full path", "body": "<p>I guess you format the output with \"pstats.Stats\" class and you have:</p>\n\n<pre><code>stats = Stats(profiler)\nstats.strip_dirs()  # remove this\n</code></pre>\n"}], "owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1547549633, "creation_date": 1528328119, "question_id": 50731065, "link": "https://stackoverflow.com/questions/50731065/python-cprofile-filenamelineno-get-full-path", "title": "Python cprofile filename:lineno get full path", "body": "<p>I use <code>cprofile</code> to get high offenders, however the <code>filename:lineno</code> is only listing the filename, but having the filepath listed would be more usefull to quickly open that path. Especially if there might be same module nams in different hierarchies. </p>\n\n<pre><code>ncalls    tottime    percall    cumtime    percall    filename:lineno(function)\n1         0.000       0.000       3.922    display.py:599 (show)\n</code></pre>\n\n<p>Is there an option to turn that into fullpath?</p>\n"}, {"tags": ["python", "python-2.7", "snappy"], "owner": {"reputation": 152, "user_id": 3451273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fcd84747ec681bca72763f7509fa65?s=128&d=identicon&r=PG&f=1", "display_name": "Leila", "link": "https://stackoverflow.com/users/3451273/leila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528331988, "creation_date": 1528328099, "last_edit_date": 1528331988, "question_id": 50731058, "link": "https://stackoverflow.com/questions/50731058/python-snappy-how-can-i-combine-multiple-compressed-snappy-files-into-one", "title": "Python-snappy: How can I combine multiple compressed snappy files into one?", "body": "<p>I have a parallel function which is compressing a large number of files using python-snappy.\nIs there a way to combine all the returned compressed streams into one snappy file?</p>\n"}, {"tags": ["python", "scikit-learn", "gaussian", "kernel"], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 6204860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gj0a.jpg?s=128&g=1", "display_name": "pcko1", "link": "https://stackoverflow.com/users/6204860/pcko1"}, "is_accepted": false, "score": 0, "last_activity_date": 1528362300, "creation_date": 1528362300, "answer_id": 50742652, "question_id": 50742651, "link": "https://stackoverflow.com/questions/50742651/gaussian-process-with-two-dimensional-feature-array-as-the-input-in-python/50742652#50742652", "title": "Gaussian process with two dimensional feature array as the input in Python", "body": "<p>I cannot see your whole code but here is my suggestion.</p>\n\n<p>Seems like your input is a matrix AND a list. The <strong>shape</strong> of the matrix <strong>X</strong> is <strong>(2,18)</strong> and the <strong>size</strong> of the list <strong>y</strong> is <strong>18</strong>.</p>\n\n<p>Therefore I recommend converting the list into array with explictly defined shape of (1,18). Run this:</p>\n\n<pre><code>y = np.reshape(y,(1,18))\n</code></pre>\n\n<p>before <code>gp.fit(X, y)</code> and let me know if it works :)</p>\n"}, {"comments": [{"owner": {"reputation": 801, "user_id": 4312519, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e5bd3a08c59d8466cff67efa6a19595d?s=128&d=identicon&r=PG&f=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/4312519/riley"}, "edited": false, "score": 0, "creation_date": 1549376973, "post_id": 50742771, "comment_id": 95874620, "body": "isn&#39;t it because of the way the OP defines the kernel?"}], "tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1528378833, "creation_date": 1528378833, "answer_id": 50742771, "question_id": 50742651, "link": "https://stackoverflow.com/questions/50742651/gaussian-process-with-two-dimensional-feature-array-as-the-input-in-python/50742771#50742771", "title": "Gaussian process with two dimensional feature array as the input in Python", "body": "<p>Why are you doing the <code>.T</code> on the X?</p>\n\n<p>This changes the shape of X from (18,2) to (2,18) and hence the error.</p>\n\n<p>The following is working for me (Just removed the <code>.T</code> from end of X):</p>\n\n<pre><code>X = np.matrix([[1.,2], [3.,4], [5.,1], [6.,5], [4, 7.], [9,8.], [1.,2], \n               [3.,4], [5.,1], [6.,5], [4,7.], [ 9,8.], [1.,2], [3.,4], \n               [5.,1], [6.,5], [4,7.], [9,8.]])\n\ny = [84, 42, 47, 55, 25, 78, 52, 25, 75, 22, 45, 45, 88, 56, 77, \n     58, 48, 79]\n\ngp.fit(X, y)\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1499704419, "open_beta_date": 1402346566, "closed_beta_date": 1400007600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/datascience/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/datascience/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/datascience/Img/apple-touch-icon.png", "audience": "Data science professionals, Machine Learning specialists, and those interested in learning more about the field", "site_url": "https://datascience.stackexchange.com", "api_site_parameter": "datascience", "logo_url": "https://cdn.sstatic.net/Sites/datascience/Img/logo.png", "name": "Data Science", "site_type": "main_site"}, "on_date": 1528378481, "question_id": 32762}, "owner": {"user_type": "does_not_exist", "display_name": "QuantumGirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1528378833, "creation_date": 1528327739, "question_id": 50742651, "link": "https://stackoverflow.com/questions/50742651/gaussian-process-with-two-dimensional-feature-array-as-the-input-in-python", "title": "Gaussian process with two dimensional feature array as the input in Python", "body": "<p>I need to implement GPR (Gaussian process regression) in Python using sci-kit learn library.</p>\n\n<p>My input X has two features. \nEx. X=[race, BMI]. And output is one dimension y=[age_expectancy]</p>\n\n<p>I want to use two Kernels; RBF and Matern, such that RBF uses the 'race' feature while Matern use the 'age' feature. \nI tried the following:</p>\n\n<pre><code>X = np.matrix([[1.,2], [3.,4], [5.,1], [6.,5],[4, 7.],[ 9,8.], [1.,2], [3.,4], [5.,1], [6.,5],[4, 7.],[ 9,8.],[1.,2], [3.,4], [5.,1], [6.,5],[4, 7.],[ 9,8.]]).T\n\n\ny=[84,  42, 47, 55,  25,  78, 52, 25, 75, 22,  45, 45, 88,  56, 77, 58,  48,  79]\n\n\nkernel = R(X[0]) * M(X[1])\n\ngp = GaussianProcessRegressor(kernel=kernel)\n\n\ngp.fit(X, y)\n</code></pre>\n\n<p>But this gives an error 'ValueError: Found input variables with inconsistent numbers of samples: [2, 18]'.</p>\n\n<p>I tried several methods but could not find a solution. Really appreciate if someone can help.</p>\n"}, {"tags": ["python", "django", "python-3.x", "virtualenv"], "comments": [{"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1528327938, "post_id": 50731010, "comment_id": 88469729, "body": "are you on a production server?"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "reply_to_user": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1528328005, "post_id": 50731010, "comment_id": 88469744, "body": "I&#39;m on my mac computer.  I left my desktop in another state and I can&#39;t pick it up until the end of August. The Desktop was using Ubuntu."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528328016, "post_id": 50731010, "comment_id": 88469748, "body": "python&gt; <code>import scipy</code> - if that or any other import from the list works, then you <b>DO</b> have packages installed."}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528328078, "post_id": 50731010, "comment_id": 88469768, "body": "But I can&#39;t run django here"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528328120, "post_id": 50731010, "comment_id": 88469784, "body": "<code>Django</code>? or <code>django</code>?"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528328169, "post_id": 50731010, "comment_id": 88469800, "body": "Why do I need to import <code>corsheaders</code>.. uhha.. it&#39;s the package that I had to install at the beginning"}, {"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 1, "creation_date": 1528328245, "post_id": 50731010, "comment_id": 88469818, "body": "It would&#39;ve been better if you formed your comments in one sentence to express what you want instead of commenting excessively"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528328300, "post_id": 50731010, "comment_id": 88469832, "body": "<code>django</code> works fine but I&#39;m getting bunch of <code>No module named </code> errors"}], "answers": [{"comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "reply_to_user": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 1, "creation_date": 1528328292, "post_id": 50731056, "comment_id": 88469829, "body": "<code>import sys</code> and then <code>print(sys.path)</code> for a list of directories. Find the one that includes <code>site-packages</code> and that will tell you the location. It&#39;s usually something like <code>&#39;C:\\\\Python36\\\\lib\\\\site-packages&#39;</code>"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528328825, "post_id": 50731056, "comment_id": 88469954, "body": "This is result <code>&#39;&#47;usr&#47;local&#47;Cellar&#47;python3&#47;3.6.2&#47;Frameworks&#47;Python.framework&zwnj;&#8203;&#47;Versions&#47;3.6&#47;lib&#47;py&zwnj;&#8203;thon3.6&#47;site-package&zwnj;&#8203;s&#39;</code>"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "reply_to_user": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528328865, "post_id": 50731056, "comment_id": 88469964, "body": "Ok so there you can either delete the packages you don&#39;t want, or use pip. I recommend pip but you can delete from the directory if pip fails for some reason"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528329065, "post_id": 50731056, "comment_id": 88470015, "body": "But isn&#39;t <code>pip</code> for <code>python2.6</code>? I used <code>pip3</code> because my <code>django</code> project works on <code>python3.x</code>. Shouldn&#39;t I keep using <code>pip3</code>? I need to command <code>python3 manage.py runserver</code>"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528329091, "post_id": 50731056, "comment_id": 88470022, "body": "Is deleting file list on the <code>site-packages</code> and delete all packages would work?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "reply_to_user": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528329242, "post_id": 50731056, "comment_id": 88470065, "body": "sorry I just say pip to mean whichever pip you are using. If you delete the folders INSIDE site-packages, that will remove them from your list of installed packages"}], "tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": true, "score": 2, "last_activity_date": 1528328794, "last_edit_date": 1528328794, "creation_date": 1528328091, "answer_id": 50731056, "question_id": 50731010, "link": "https://stackoverflow.com/questions/50731010/pip3-freeze-prints-many-packages-at-the-beginning/50731056#50731056", "title": "`pip3 freeze` prints many packages at the beginning", "body": "<p>You do have the packages if you can <code>import</code> them.</p>\n\n<p><code>import sys</code> and then check <code>print(sys.path)</code> for which directories have your packages in them.</p>\n\n<p>Typically a directory like <code>site-packages</code> will be listed.</p>\n\n<p>You can <code>pip3 uninstall &lt;package&gt;</code> what you don't want and if needed, delete from the <code>site-packages</code> directory. But <code>pip3 uninstall</code> is the preferred option.</p>\n\n<p>Note that you can also learn about your package location by doing something like : <code>pip3 show numpy</code></p>\n\n<p>Which prints:</p>\n\n<pre><code>Name: numpy\nVersion: 1.14.3\nSummary: NumPy: array processing for numbers, strings, records, and objects.\nHome-page: http://www.numpy.org\nAuthor: Travis E. Oliphant et al.\nAuthor-email: None\nLicense: BSD\nLocation: c:\\python36\\lib\\site-packages\nRequires:\nRequired-by: scipy, pandas\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528328788, "post_id": 50731135, "comment_id": 88469943, "body": "both prints : <code>&#47;usr&#47;local&#47;bin&#47;pip3</code>;"}, {"owner": {"reputation": 763, "user_id": 9023153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yrUvE.jpg?s=128&g=1", "display_name": "csevier", "link": "https://stackoverflow.com/users/9023153/csevier"}, "reply_to_user": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528329051, "post_id": 50731135, "comment_id": 88470011, "body": "Then that\u2019s definitely not your venv, I did type the command wrong for activating it. use source venv/bin/activate, and tell me if your shell changes, it should mark the venv next to your prompt"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528329239, "post_id": 50731135, "comment_id": 88470062, "body": "oh.. no module name <code>venv</code>. I don&#39;t use <code>venv</code> though..?? I would rather stick with <code>virtualenv</code>. I&#39;m not familiar wiht <code>venv</code>. Do you think it&#39;s worth it?"}, {"owner": {"reputation": 763, "user_id": 9023153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yrUvE.jpg?s=128&g=1", "display_name": "csevier", "link": "https://stackoverflow.com/users/9023153/csevier"}, "reply_to_user": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528329240, "post_id": 50731135, "comment_id": 88470063, "body": "Also, it did the venv command make a folder with venv in it etc? I noticed you are using the python3 binary so repeat seps with that."}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528330112, "post_id": 50731135, "comment_id": 88470271, "body": "I&#39;m not sure What you meant by seps. :P"}, {"owner": {"reputation": 763, "user_id": 9023153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yrUvE.jpg?s=128&g=1", "display_name": "csevier", "link": "https://stackoverflow.com/users/9023153/csevier"}, "reply_to_user": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528331444, "post_id": 50731135, "comment_id": 88470574, "body": "Sorry I mean steps haha. Also the module venv is the same thing, it was just moved into python itself in python 3"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1528331498, "post_id": 50731135, "comment_id": 88470593, "body": "Oh I see. No worries :)"}], "tags": [], "owner": {"reputation": 763, "user_id": 9023153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yrUvE.jpg?s=128&g=1", "display_name": "csevier", "link": "https://stackoverflow.com/users/9023153/csevier"}, "is_accepted": false, "score": 1, "last_activity_date": 1528328685, "creation_date": 1528328685, "answer_id": 50731135, "question_id": 50731010, "link": "https://stackoverflow.com/questions/50731010/pip3-freeze-prints-many-packages-at-the-beginning/50731135#50731135", "title": "`pip3 freeze` prints many packages at the beginning", "body": "<p>Hmm, I think by \u201cdefault packages\u201d you mean the standard library that ships with the interpreter. Many of those packages are not standard library packages. So that leads be me to believe that the problem is that the virtual env was not set up correctly and that your pip 3 binary is pointing at the global packages already installed. </p>\n\n<p>Let\u2019s clarify and confirm a few things. A virtual environment is nothing more that changing shell configurations to point to the installed python interpreter local to the directory it\u2019s configured for. Because of this when your virtual environment is activated, you should get both a shell indication next your prompt indicating which env is activated and you can also run a command to see which pip installation your shell would default to.</p>\n\n<p>I would do the following, first run this command in your shell when your virtualenvironment is activated:</p>\n\n<pre><code>which pip3\n</code></pre>\n\n<p>This will tell you the exact pip bearing used. If it points to the one in your virtual environment then great! If not, let\u2019s redo this by using the built in python 3 module for venv:</p>\n\n<pre><code>python -m venv venv\n</code></pre>\n\n<p>This will set up a venv named venv(this is convention, you can name it anything)</p>\n\n<p>Activate it:</p>\n\n<pre><code>source venv/lib/activate\n</code></pre>\n\n<p>Then check it again:</p>\n\n<pre><code>Which pip3 \n</code></pre>\n\n<p>Let me know the results </p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 8667259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/at8vC.jpg?s=128&g=1", "display_name": "gabriel", "link": "https://stackoverflow.com/users/8667259/gabriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1550944236, "last_edit_date": 1550944236, "creation_date": 1550943922, "answer_id": 54844324, "question_id": 50731010, "link": "https://stackoverflow.com/questions/50731010/pip3-freeze-prints-many-packages-at-the-beginning/54844324#54844324", "title": "`pip3 freeze` prints many packages at the beginning", "body": "<p>I had the same problem.\n<br>If you check with <code>which pip3</code> you will see <code>/usr/bin/pip3</code> instead of your virtualenv.\n<br>I recommend for new projects to have a separate folder for virtualenv. In a case like this one (or who knows) will be easier to make a copy/rename/delete it.<br></p>\n\n<p>My solution:</p>\n\n<ol>\n<li>first <code>deactivate</code></li>\n<li>upgrade virtualenv <code>pip3 install --upgrade virtualenv</code></li>\n<li>rename your virtualenv (just in case).</li>\n<li>install a new virtualenv <code>virtualenv -p python3 uenv</code></li>\n<li>activate virtualenv <code>source uenv/bin/activate</code></li>\n<li>check with <code>pip3 freeze</code> to be sure is empty</li>\n<li>install from file <code>pip3 install -r requirements.txt</code></li>\n</ol>\n\n<p>You should be OK now. If you check with <code>which pip3</code> you will see your virtualenv.\n<br>You can delete the old virtualenv.\n<br>This method allows you to write/read packages from file (<code>requirements.txt</code>), without manually editing the file. Manually editing requirements.txt is bad habbit and can lead to errors.</p>\n"}], "owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 1, "accepted_answer_id": 50731056, "answer_count": 3, "score": 2, "last_activity_date": 1550944236, "creation_date": 1528327698, "question_id": 50731010, "link": "https://stackoverflow.com/questions/50731010/pip3-freeze-prints-many-packages-at-the-beginning", "title": "`pip3 freeze` prints many packages at the beginning", "body": "<p>I created <code>virtualenv</code> and commanded <code>pip3 freeze</code> because I'm using <code>python3</code> to run my project.</p>\n\n<pre><code>virtualenv .\nsource bin/activate\npip3 freeze\n</code></pre>\n\n<p>However, <code>pip3 freeze</code> printed default(?) python3 packages even though I didn't install any packages yet:</p>\n\n<pre><code>backports.weakref==1.0rc1\nbleach==1.5.0\ncertifi==2017.7.27.1\nchardet==3.0.4\nconfigparser==3.5.0\ndefusedxml==0.5.0\nDjango==1.11.12\ndjango-allauth==0.32.0\ndjango-crispy-forms==1.6.1\ndjango-filter==1.0.4\ndjango-widget-tweaks==1.4.1\ndjangorestframework==3.7.7\nenum34==1.1.6\nflake8==3.4.1\nflake8-docstrings==1.1.0\nflake8-polyfill==1.0.1\nhtml5lib==0.9999999\nidna==2.5\nKeras==2.0.6\nMarkdown==2.6.8\nmccabe==0.6.1\nnumpy==1.13.1\noauthlib==2.0.2\nolefile==0.44\nPillow==4.2.1\nprotobuf==3.3.0\npycodestyle==2.3.1\npydocstyle==2.0.0\npyflakes==1.5.0\npython3-openid==3.1.0\npytz==2018.3\nPyYAML==3.12\nrequests==2.18.3\nrequests-oauthlib==0.8.0\nscipy==0.19.1\nsix==1.10.0\nsnowballstemmer==1.2.1\ntensorflow==1.2.1\nTheano==0.9.0\nurllib3==1.22\nWerkzeug==0.12.2\n</code></pre>\n\n<p>Obviously I don't want to install tensorflow and Theano for my virtual machine. :(</p>\n\n<p><strong>Why does it have default(?) python3 packages? Can we start it from scratch?</strong></p>\n"}, {"tags": ["python", "pandas", "date", "dataframe", "statistics"], "answers": [{"comments": [{"owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "edited": false, "score": 0, "creation_date": 1528331614, "post_id": 50731227, "comment_id": 88470616, "body": "Nevermind I figured out the issue. It works correctly."}], "tags": [], "owner": {"reputation": 1874, "user_id": 2943311, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/628287ed99b466dd57c56b3e63866538?s=128&d=identicon&r=PG&f=1", "display_name": "Barker", "link": "https://stackoverflow.com/users/2943311/barker"}, "is_accepted": true, "score": 1, "last_activity_date": 1528329445, "creation_date": 1528329445, "answer_id": 50731227, "question_id": 50731006, "link": "https://stackoverflow.com/questions/50731006/annual-weighted-average-of-pandas-dataframe/50731227#50731227", "title": "Annual weighted average of pandas dataframe", "body": "<p>The correct syntax to get a column containing your yearly averages would be</p>\n\n<pre><code>avg_all = df1['marketcap'].groupby(df1.date.dt.year).transform('mean')\n</code></pre>\n\n<p>Similarly to get the average for each year and ticker you would run:</p>\n\n<pre><code>avg_all = df1['marketcap'].groupby([df1.date.dt.year,df1.ticker]).transform('mean')\n</code></pre>\n\n<p>If you don't want it to be a column that you can map back to your dataframe but instead just want a new dataframe of your values for each year/ticker you can sub out <code>.transform('mean')</code> with <code>.mean()</code>.</p>\n\n<p>In your example data each ticker has a unique year that is the same for all values of that ticker and different from all other ticker values so grouping by year and grouping by year and ticker are equivalent operations.</p>\n"}], "owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 50731227, "answer_count": 1, "score": 0, "last_activity_date": 1528329445, "creation_date": 1528327670, "last_edit_date": 1528328527, "question_id": 50731006, "link": "https://stackoverflow.com/questions/50731006/annual-weighted-average-of-pandas-dataframe", "title": "Annual weighted average of pandas dataframe", "body": "<p>Intermediate/Beginner Python user here. I need to figure out how to calculate annual weights and weighted averages based upon some stock market data I parsed into dataframes.</p>\n\n<p>I have stock market values and dates from some interval 2003-2018 that is given like so (there are a lot more values than this snippet shows):</p>\n\n<pre><code>ticker  date    marketcap       open    high    low     close\nA   2003-03-31  8466487038.0    13.38   13.47   13.0    13.15\nA   2003-06-30  11273789220.5   19.5    19.76   19.46   19.55\nAA  2017-03-31  6031414196.0    34.06   34.74   33.6    34.4\nAA  2017-06-30  6426297428.0    33.16   33.45   32.535  32.65\nICE 2016-03-31  29363680289.5   46.396  47.184  46.242  47.028\nICE 2016-06-30  31796255816.0   50.602  51.349  50.321  51.192\n</code></pre>\n\n<p>I simply want to take an <em>annual</em> weight for each ticker's marketcap.</p>\n\n<p>Ie:</p>\n\n<pre><code>Weight(YEAR) = AVGTickerMarketCap(YEAR) / AllTickersMarketCap(YEAR)\n</code></pre>\n\n<p>Since there is more than one value for marketcap every year I need to take an average first of the marketcap for 2003, 2004, 2005...etc for each ticker - hence the AVGTickerMarketCap(YEAR).</p>\n\n<p>I'm only able to figure out how to somewhat calculate AllTickersMarketCap(YEAR):</p>\n\n<pre><code>df1['date'] = pd.to_datetime(df1.date)\navg_all = df1.groupby(df1.date.dt.year['marketcap'].transform('mean')\n</code></pre>\n\n<p>But this only seems to take the first ticker \"A\" and applies the same mean for \"A\" to every year regardless of their ticker.</p>\n\n<p>Where is the issue and how would I then go about finding AVGTickerMarketCap(YEAR)?</p>\n"}, {"tags": ["python", "python-2.7", "pip", "virtualenv"], "comments": [{"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1528327374, "post_id": 50730946, "comment_id": 88469588, "body": "Did you try uninstalling it as root? There have been times where sudo hasn&#39;t been enough and I had to <code>sudo su</code> it"}, {"owner": {"reputation": 1543, "user_id": 809584, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d577a1b45100bc0d0492b6f87d96a04?s=128&d=identicon&r=PG", "display_name": "alexakarpov", "link": "https://stackoverflow.com/users/809584/alexakarpov"}, "reply_to_user": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1528327552, "post_id": 50730946, "comment_id": 88469633, "body": "Huh? never heard of such a thing, always though sudo is equivalent to &#39;sudo su&#39; approach. Nope, didn&#39;t work, same message."}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1528327766, "post_id": 50730946, "comment_id": 88469683, "body": "<a href=\"https://askubuntu.com/questions/592825/whats-the-difference-between-sudo-and-changing-to-root\">There&#39;s a bit more info on it here</a>"}, {"owner": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "edited": false, "score": 1, "creation_date": 1528329385, "post_id": 50730946, "comment_id": 88470102, "body": "If you use virtualenv, why do you even bother to delete global packages? Do you experience any issues with these packages in your project?"}, {"owner": {"reputation": 1543, "user_id": 809584, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d577a1b45100bc0d0492b6f87d96a04?s=128&d=identicon&r=PG", "display_name": "alexakarpov", "link": "https://stackoverflow.com/users/809584/alexakarpov"}, "reply_to_user": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "edited": false, "score": 0, "creation_date": 1528329665, "post_id": 50730946, "comment_id": 88470155, "body": "not really (or not yet?), @AndriyMaletsky - I suppose I shouldn&#39;t worry too much. But being new to this stack I&#39;m just a little bit paranoid =)"}, {"owner": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "edited": false, "score": 0, "creation_date": 1528330029, "post_id": 50730946, "comment_id": 88470255, "body": "system packages and virtualenv packages don&#39;t interfere. But cleaning rubbish out of your system is definitely a good thing to do :)"}], "answers": [{"comments": [{"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 1, "creation_date": 1528328344, "post_id": 50731001, "comment_id": 88469841, "body": "In other words, no don&#39;t do that."}, {"owner": {"reputation": 1543, "user_id": 809584, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d577a1b45100bc0d0492b6f87d96a04?s=128&d=identicon&r=PG", "display_name": "alexakarpov", "link": "https://stackoverflow.com/users/809584/alexakarpov"}, "edited": false, "score": 0, "creation_date": 1528328748, "post_id": 50731001, "comment_id": 88469933, "body": "thank you sir, your explanation does make sense. however, it&#39;s very strange (and I did mention it in the question too): <i>what</i> prevents pip from deleting them, if not file permissions? does it keep some form of a log of stuff it can touch, to distinguish from stuff it can&#39;t touch?"}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 5, "last_activity_date": 1528328017, "last_edit_date": 1528328017, "creation_date": 1528327649, "answer_id": 50731001, "question_id": 50730946, "link": "https://stackoverflow.com/questions/50730946/pip-uninstall-fails-with-owned-by-os-even-under-sudo/50731001#50731001", "title": "pip uninstall fails with &quot;owned by OS&quot; - even under sudo", "body": "<p>The point is not that <code>pip</code> cannot install the package because you don't have enough permissions, but because it is not a package installed through <code>pip</code>, so it doesn't want to uninstall it.</p>\n\n<p><code>dist-packages</code> is where packages installed by the OS package manager reside; as they are handled by another package manager (e.g. <code>apt</code> on Ubuntu/Debian, <code>pacman</code> on Arch, <code>rpm</code>/<code>yum</code> on CentOS, ... ) <code>pip</code> won't touch them (but still has to know about them as they are installed packages, so they <em>can</em> be used to satisfy dependencies of <code>pip</code>-installed packages).</p>\n\n<p>You should also probably avoid to touch them unless you use the correct package manager, and even so, they may have been installed automatically to satisfy the dependencies of some program, so you may not remove them without breaking it. This can usually be checked quite easily, although the exact way depends from the precise Linux distribution you are using. </p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1528329304, "post_id": 50731133, "comment_id": 88470086, "body": "The two kinds of &quot;Not uninstalling&quot; messages I can find in regular pip come from <a href=\"https://github.com/pypa/pip/blob/729990c9869148f3f0098a2b2a0c0b92aefb8a69/src/pip/_internal/req/req_uninstall.py#L273\" rel=\"nofollow noreferrer\">here</a>; neither of them say &quot;owned by OS&quot;, and &quot;owned by OS&quot; doesn&#39;t appear anywhere in the pip repository. I&#39;m not sure where to find the Debian version."}, {"owner": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1528329672, "post_id": 50731133, "comment_id": 88470157, "body": "I believe this version can be found here: <a href=\"https://packages.debian.org/en/source/stretch/python-pip\" rel=\"nofollow noreferrer\">packages.debian.org/en/source/stretch/python-pip</a>"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1528381662, "post_id": 50731133, "comment_id": 88495186, "body": "I believe it has something to do with this patch: <a href=\"https://salsa.debian.org/python-team/modules/python-pip/blob/master/debian/patches/hands-off-system-packages.patch\" rel=\"nofollow noreferrer\">salsa.debian.org/python-team/modules/python-pip/blob/master/&zwnj;&#8203;&hellip;</a>"}], "tags": [], "owner": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "is_accepted": true, "score": 5, "last_activity_date": 1528376421, "last_edit_date": 1528376421, "creation_date": 1528328674, "answer_id": 50731133, "question_id": 50730946, "link": "https://stackoverflow.com/questions/50730946/pip-uninstall-fails-with-owned-by-os-even-under-sudo/50731133#50731133", "title": "pip uninstall fails with &quot;owned by OS&quot; - even under sudo", "body": "<p>Pip denies to uninstall these packages because Debian developers patched it to behave so. This allows you to use both <code>pip</code> and <code>apt</code> simultaneously. The \"original\" pip program doesn't have such functionality</p>\n\n<p><em>Update:</em> my answer is relevant only to old versions of Pip. For the latest versions, Pip is configured to modify only the files which reside only in its \"home directory\" - that is <code>/usr/local/lib/python3.*</code> for Debian. For the latest tools, you will get these errors when you try to delete the package, installed by <code>apt</code>:</p>\n\n<p>For <code>pip 9.0.1-2.3~ubuntu1</code> (installed from Ubuntu repository):</p>\n\n<pre><code>Not uninstalling pyyaml at /usr/lib/python3/dist-packages, outside environment /usr\n</code></pre>\n\n<p>For <code>pip 10.0.1</code> (original, installed from <a href=\"https://pypi.org\" rel=\"nofollow noreferrer\">pypi.org</a>):</p>\n\n<pre><code>Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.\n</code></pre>\n"}], "owner": {"reputation": 1543, "user_id": 809584, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d577a1b45100bc0d0492b6f87d96a04?s=128&d=identicon&r=PG", "display_name": "alexakarpov", "link": "https://stackoverflow.com/users/809584/alexakarpov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 50731133, "answer_count": 2, "score": 2, "last_activity_date": 1528376421, "creation_date": 1528327256, "question_id": 50730946, "link": "https://stackoverflow.com/questions/50730946/pip-uninstall-fails-with-owned-by-os-even-under-sudo", "title": "pip uninstall fails with &quot;owned by OS&quot; - even under sudo", "body": "<p>I'm working on a DevOps project for a client who's using Python. Though I never used it professionally, I know a few things, such as using virtualenv and pip - though not in great detail.</p>\n\n<p>When I looked at the staging box, which I am trying to prepare for running a functional test suite, I saw chaos. Tons of packages installed globally, and those installed inside a virtualenv not matching the requirements.txt of the project. OK, thought I, there's a lot of cleaning up. Starting with global packages.</p>\n\n<p>However, I ran into a problem at once:</p>\n\n<pre><code>\u279c  ~ pip uninstall PyYAML\nNot uninstalling PyYAML at /usr/lib/python2.7/dist-packages, owned by OS\n</code></pre>\n\n<p>OK, someone must've done a 'sudo pip install PyYAML'. I think I know how to fix it:</p>\n\n<pre><code>\u279c  ~ sudo pip uninstall PyYAML\nNot uninstalling PyYAML at /usr/lib/python2.7/dist-packages, owned by OS\n</code></pre>\n\n<p>Uh, apparently I don't.\nA search revealed some similar conflicts caused by users installing packages bypassing pip, but I'm not convinced - why would pip even know about them, if that was the case? Unless the \"other\" way is placing them in the same location pip would use - but if that's the case, why would it fail to uninstall under sudo?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 9861733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48267135c7af197527752642d789696a?s=128&d=identicon&r=PG&f=1", "display_name": "jerrycheng", "link": "https://stackoverflow.com/users/9861733/jerrycheng"}, "edited": false, "score": 0, "creation_date": 1528328072, "post_id": 50730978, "comment_id": 88469765, "body": "The use of <code>range</code> is brilliant!"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1528328258, "last_edit_date": 1528328258, "creation_date": 1528327495, "answer_id": 50730978, "question_id": 50730943, "link": "https://stackoverflow.com/questions/50730943/how-to-mirror-list-elemets-over-the-last-element/50730978#50730978", "title": "How to mirror list elemets over the last element?", "body": "<pre><code>lst = [x for x in range(-top, top+1, increment)]\n</code></pre>\n\n<p><code>max</code> is a built-in function, so I changed the name to <code>top</code>.</p>\n\n<p>Note that this assumes that <code>increment</code> is a divisor of <code>top</code>; this is required to properly land on 0.</p>\n"}], "owner": {"reputation": 51, "user_id": 9905971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287ff1715e36a4ff1604cb4143282ef1?s=128&d=identicon&r=PG&f=1", "display_name": "TheRagnar1", "link": "https://stackoverflow.com/users/9905971/theragnar1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528328833, "creation_date": 1528327249, "last_edit_date": 1528328833, "question_id": 50730943, "link": "https://stackoverflow.com/questions/50730943/how-to-mirror-list-elemets-over-the-last-element", "title": "How to mirror list elemets over the last element?", "body": "<p>How can I mirror list elements across 0 using a list comprehension?\nMy <code>for</code>-loop code is below.</p>\n\n<pre><code>def mirror_list(max, increment):  \n    lst = [-max]  \n    while lst[-1] &lt; max:  \n        lst.append(lst[-1] + increment)  \n    lst[-1] = max  \n    return lst\n</code></pre>\n\n<p>For instance, <code>mirror_list(10, 2)</code> would return <code>[-10, -8, -6, -4, -2, 0, 2, 4, 6, 8, 10]</code></p>\n"}, {"tags": ["python", "dictionary", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1528327069, "post_id": 50730911, "comment_id": 88469509, "body": "What have you tried so far?"}, {"owner": {"reputation": 3495, "user_id": 5453723, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4a45bdc73d29495331e9843d4c2271f6?s=128&d=identicon&r=PG&f=1", "display_name": "muazfaiz", "link": "https://stackoverflow.com/users/5453723/muazfaiz"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528327328, "post_id": 50730911, "comment_id": 88469572, "body": "I was trying some bar plots and have tried a heat map. I have a similar question <a href=\"https://stackoverflow.com/questions/50614222/python-best-way-to-visualize-dict-of-dicts/\" title=\"python best way to visualize dict of dicts\">stackoverflow.com/questions/50614222/&hellip;</a> but now I want to visualize this way and I don&#39;t know anyhting about the above mentioned plot :)"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528327386, "post_id": 50730911, "comment_id": 88469593, "body": "Be that as it may, SO is not a tutorial or code writing service.  Once you have a specific, programming question, it will be appropriate here."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1528327529, "post_id": 50730911, "comment_id": 88469629, "body": "Is there any specific name for the graph you have posted?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1528327804, "post_id": 50730911, "comment_id": 88469694, "body": "In principle the whole graph should be doable using <a href=\"https://matplotlib.org/tutorials/text/annotations.html\" rel=\"nofollow noreferrer\">annotations</a> and <a href=\"https://matplotlib.org/gallery/shapes_and_collections/artist_reference.html\" rel=\"nofollow noreferrer\"><code>Rectangle</code></a>s. But you must be very lucky if you find someone writing that code for you without stating any clear and specific problem here."}, {"owner": {"reputation": 3495, "user_id": 5453723, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4a45bdc73d29495331e9843d4c2271f6?s=128&d=identicon&r=PG&f=1", "display_name": "muazfaiz", "link": "https://stackoverflow.com/users/5453723/muazfaiz"}, "edited": false, "score": 0, "creation_date": 1528328251, "post_id": 50730911, "comment_id": 88469819, "body": "I think Parallel coordinates graph is something similar but not sure whether it exactly like this or not :("}, {"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 1, "creation_date": 1528333808, "post_id": 50730911, "comment_id": 88471106, "body": "If you start from this question you may be able to either solve the problem or get to a more specific question: <a href=\"https://stackoverflow.com/questions/49760882/python-create-word-plot-between-two-lists-in-matplotlib-to-show-list-commonality\" title=\"python create word plot between two lists in matplotlib to show list commonality\">stackoverflow.com/questions/49760882/&hellip;</a>"}], "owner": {"reputation": 3495, "user_id": 5453723, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4a45bdc73d29495331e9843d4c2271f6?s=128&d=identicon&r=PG&f=1", "display_name": "muazfaiz", "link": "https://stackoverflow.com/users/5453723/muazfaiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1301, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1528557751, "creation_date": 1528326990, "last_edit_date": 1528499955, "question_id": 50730911, "link": "https://stackoverflow.com/questions/50730911/python-visualize-nested-dictionaries", "title": "Python: Visualize nested dictionaries", "body": "<p>I have the following nested dictionary</p>\n\n<pre><code>players_info = {'Afghanistan': {'Asghar Stanikzai': 809.0,\n  'Mohammad Nabi': 851.0,\n  'Mohammad Shahzad': 1713.0,\n  'Najibullah Zadran': 643.0,\n  'Samiullah Shenwari': 774.0},\n 'Australia': {'AJ Finch': 1082.0,\n  'CL White': 988.0,\n  'DA Warner': 1691.0,\n  'GJ Maxwell': 822.0,\n  'SR Watson': 1465.0},\n 'England': {'AD Hales': 1340.0,\n  'EJG Morgan': 1577.0,\n  'JC Buttler': 985.0,\n  'KP Pietersen': 1176.0,\n  'LJ Wright': 759.0}}\n</code></pre>\n\n<p>And I want to visualize it in the following way.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nVQO0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nVQO0.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have tried to convert it into a dataframe and then visualize but I am getting errors.</p>\n\n<pre><code>from pandas.tools.plotting import parallel_coordinates\n\ndf_plot = pd.DataFrame(players_info).stack().reset_index()\ndf_plot.columns = ['Player Name', 'Country', 'Total Score']\nparallel_coordinates(df_plot, class_column='Country')\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<pre><code>ValueError: could not convert string to float: 'Asghar Stanikzai'\n</code></pre>\n\n<p>Is there a way in matplotlib or in seaborn where I can plot such a plot or similar. Please note that I want a similar plot not exactly like the one i meantioned. The idea is to plot the nested dict data in a better understandable way. Also please note that the dict here is just a small dict but in real data i have slightly bigger dict. Any suggestions will be highly appreciated. </p>\n"}, {"tags": ["python", "for-loop", "indexing"], "comments": [{"owner": {"reputation": 1893, "user_id": 8940931, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fTuu5.jpg?s=128&g=1", "display_name": "Simeon Ikudabo", "link": "https://stackoverflow.com/users/8940931/simeon-ikudabo"}, "edited": false, "score": 3, "creation_date": 1528327045, "post_id": 50730905, "comment_id": 88469503, "body": "Please do not post pictures on stack overflow when asking a question, but instead post the actual code in your question, formatted properly."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1528327184, "post_id": 50730905, "comment_id": 88469541, "body": "<a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question\"><b>Why not upload images of code on SO when asking a question?</b></a>"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 2, "creation_date": 1528327184, "post_id": 50730905, "comment_id": 88469542, "body": "<a href=\"https://docs.python.org/2/library/string.html#string.index\" rel=\"nofollow noreferrer\"><code>s.index(chr)</code></a> returns: &quot;Return the lowest index in s where the substring sub is found&quot;. So everytime you search for <code>a</code> in <code>aaa</code> it finds the first one."}], "answers": [{"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1528327666, "post_id": 50730961, "comment_id": 88469659, "body": "Recursively: <code>return string_splosion(s[:-1]) + s if len(s) &gt; 1 else s</code> :)"}], "tags": [], "owner": {"reputation": 896, "user_id": 9019560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7024d310c7521f85292ab4961accee31?s=128&d=identicon&r=PG&f=1", "display_name": "Turksarama", "link": "https://stackoverflow.com/users/9019560/turksarama"}, "is_accepted": false, "score": 3, "last_activity_date": 1528327367, "creation_date": 1528327367, "answer_id": 50730961, "question_id": 50730905, "link": "https://stackoverflow.com/questions/50730905/why-are-repeated-letters-skipped-in-some-strings/50730961#50730961", "title": "Why are repeated letters skipped in some strings?", "body": "<p>You should transcribe the code instead of posting a picture:</p>\n\n<pre><code>def string_splosion(s):\n    new = ''\n    for i in s:\n        new += s[0:int(s.index(i))+1]\n    return new\n</code></pre>\n\n<p>The problem is that index(i) returns the index of the first instance of that character, which is 2 for both l's in \"Hello\".  The fix is to just use the index directly, which is also simpler:</p>\n\n<pre><code>def string_splosion(s):\n    new = ''\n    for i in range(len(s)):\n        new += s[:i+1]\n    return new\n</code></pre>\n\n<p>Or even:</p>\n\n<pre><code>def string_splosion(s):\n    return ''.join(s[:i+1] for i in range(len(s)))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9905944, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zRh_I-yplFw/AAAAAAAAAAI/AAAAAAAAATA/CoLgoc-taq8/photo.jpg?sz=128", "display_name": "christopher nye", "link": "https://stackoverflow.com/users/9905944/christopher-nye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1528329178, "answer_count": 1, "score": -4, "last_activity_date": 1528336202, "creation_date": 1528326920, "last_edit_date": 1528336202, "question_id": 50730905, "link": "https://stackoverflow.com/questions/50730905/why-are-repeated-letters-skipped-in-some-strings", "closed_reason": "Needs details or clarity", "title": "Why are repeated letters skipped in some strings?", "body": "<p>this code is meant to 'explode' a given string s</p>\n\n<pre><code>def string_splosions(s):\n    \"\"\"erp9yoiruyfoduifgyoweruyfgouiweryg\"\"\"\n    new = ''\n    for i in s:\n        new += s[0:int(s.index(i))+1]\n    return new\n</code></pre>\n\n<p>For some reason this code can return the correct 'explosion' for most words however words which have a repeated letter they do not print correctly.\nexamples.</p>\n\n<p>Correct outputs is would be:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Code --&gt; CCoCodCode\n\nabc  --&gt; aababc\n\npie  --&gt; ppipie\n\nincorrect outputs when s is\n\nHello --&gt; HHeHelHelHello (should be HHeHelHellHello)\n</code></pre>\n\n<p>(Note: in the incorrect output there should be 1 more l in the second to last repeat.)</p>\n"}, {"tags": ["python", "python-requests", "jira", "jira-rest-api"], "comments": [{"owner": {"reputation": 2003, "user_id": 6414203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b25f1c657b4306a0d459c874e859789?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6414203/alan"}, "edited": false, "score": 0, "creation_date": 1528327824, "post_id": 50730865, "comment_id": 88469698, "body": "Out of curiousity, have you tried using <code>&quot;duedate&quot;: null</code> (or &quot;null&quot;) instead of None?"}, {"owner": {"reputation": 2003, "user_id": 6414203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b25f1c657b4306a0d459c874e859789?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6414203/alan"}, "edited": false, "score": 0, "creation_date": 1528366412, "post_id": 50730865, "comment_id": 88484765, "body": "I ask because JSON has no concept of None, nor will the sql database at the jira end."}, {"owner": {"reputation": 16356, "user_id": 1913888, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MqCvM.jpg?s=128&g=1", "display_name": "Aaron Lelevier", "link": "https://stackoverflow.com/users/1913888/aaron-lelevier"}, "reply_to_user": {"reputation": 2003, "user_id": 6414203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b25f1c657b4306a0d459c874e859789?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6414203/alan"}, "edited": false, "score": 0, "creation_date": 1528412811, "post_id": 50730865, "comment_id": 88510387, "body": "@Alan the above example get&#39;s converted to JSON. I haven&#39;t tried a raw JSON curl request through. In Python, &quot;null&quot; would be converted to the JSON string &quot;null&quot;, but <code>None</code> get&#39;s converted to JSON <code>null</code>"}, {"owner": {"reputation": 2003, "user_id": 6414203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b25f1c657b4306a0d459c874e859789?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6414203/alan"}, "edited": false, "score": 0, "creation_date": 1528415441, "post_id": 50730865, "comment_id": 88511010, "body": "Yes, json.dumps converts to null. Put and get for requests though: &quot;Note that any dictionary key whose value is None will not be added to the URL&#39;s query string.&quot; (<a href=\"http://docs.python-requests.org/en/master/user/quickstart/#passing-parameters-in-urls\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/master/user/quickstart/&hellip;</a>)"}, {"owner": {"reputation": 2003, "user_id": 6414203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b25f1c657b4306a0d459c874e859789?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6414203/alan"}, "edited": false, "score": 0, "creation_date": 1528415686, "post_id": 50730865, "comment_id": 88511060, "body": "Otherwise - shot in the dark - does the server have duedate configured as a mandatory field and/or have a duedate trigger? Last time I set up a service desk I put in a trigger and you only entered as date if you want to override the default."}], "owner": {"reputation": 16356, "user_id": 1913888, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MqCvM.jpg?s=128&g=1", "display_name": "Aaron Lelevier", "link": "https://stackoverflow.com/users/1913888/aaron-lelevier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528414577, "creation_date": 1528326617, "question_id": 50730865, "link": "https://stackoverflow.com/questions/50730865/how-to-remove-the-duedate-from-an-issue-using-jira-rest-api", "title": "How to remove the duedate from an Issue using Jira REST API", "body": "<p>I'm trying to remove the <code>duedate</code> from an Issue using Jira's REST API, but it keeps setting the <code>duedate</code> to <strong>today</strong>. </p>\n\n<p>I have tried with with the Python <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">requests</a> library as well as the <a href=\"https://jira.readthedocs.io/en/master/\" rel=\"nofollow noreferrer\">jira-python</a> package. </p>\n\n<p>Here are snippets of both.</p>\n\n<p><strong>requests</strong></p>\n\n<pre><code>import requests\n\njira_issue_key = 'PROJECT-1234'\n\nrequests.put(\n    url='http://localhost:8000/issue/%s/' % jira_issue_key, cookies=cookies,\n    json={'fields': {\"duedate\": None}})\n</code></pre>\n\n<p><strong>jira-python</strong></p>\n\n<pre><code>import os\nfrom jira import JIRA\n\nusername = 'username'\npassword = os.environ['PASSWORD']\n\njira = JIRA('https://localhost:8000', auth=(username, password))\n\nissue = jira.issue(jira_issue_key)\nissue.update(fields={\"duedate\": None})\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "edited": false, "score": 0, "creation_date": 1528326796, "post_id": 50730831, "comment_id": 88469432, "body": "What are your axes? <code>milesx</code> and <code>milesy</code>?"}, {"owner": {"reputation": 464, "user_id": 7387488, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10210077619809114/picture?type=large", "display_name": "sn3jd3r", "link": "https://stackoverflow.com/users/7387488/sn3jd3r"}, "reply_to_user": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "edited": false, "score": 0, "creation_date": 1528327027, "post_id": 50730831, "comment_id": 88469498, "body": "Updated question. I went a little fast, when i asked it. My bad. @student"}], "answers": [{"comments": [{"owner": {"reputation": 464, "user_id": 7387488, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10210077619809114/picture?type=large", "display_name": "sn3jd3r", "link": "https://stackoverflow.com/users/7387488/sn3jd3r"}, "edited": false, "score": 0, "creation_date": 1528328087, "post_id": 50731043, "comment_id": 88469773, "body": "Exactly what i was looking for. Thank you!"}, {"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "reply_to_user": {"reputation": 464, "user_id": 7387488, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10210077619809114/picture?type=large", "display_name": "sn3jd3r", "link": "https://stackoverflow.com/users/7387488/sn3jd3r"}, "edited": false, "score": 1, "creation_date": 1528328277, "post_id": 50731043, "comment_id": 88469824, "body": "Looks like no need to convert <code>Series</code> to <code>dataframe</code> for plotting."}], "tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": true, "score": 1, "last_activity_date": 1528328253, "last_edit_date": 1528328253, "creation_date": 1528328020, "answer_id": 50731043, "question_id": 50730831, "link": "https://stackoverflow.com/questions/50730831/plotting-based-on-column-criteria-in-pandas/50731043#50731043", "title": "Plotting based on column criteria in Pandas", "body": "<p>IIUC, assuming you have following dataframe:</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\n\n%matplotlib inline\n\n# input dictionary\ndf = {'carx' : ['merc','rari','merc','hond','fia','merc'],\n      'cary' : ['bent','maz','ben','merc','fia','fia'],\n      'milesx' : [0,100,2,22,5,6],\n      'milesy' : [10,3,18,2,19,2]}\n\n# creating input dataframe\ndataframe = pd.DataFrame(df)\nprint(dataframe)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>   carx  cary  milesx  milesy\n0  merc  bent       0      10\n1  rari   maz     100       3\n2  merc   ben       2      18\n3  hond  merc      22       2\n4   fia   fia       5      19\n5  merc   fia       6       2\n</code></pre>\n\n<p>Then, you want to plot values given condition which can be done using function, and using <code>apply</code>:</p>\n\n<pre><code>def my_function(row):\n    if row['carx'] == 'merc':return row['milesx']\n    if row['cary'] == 'merc': return row['milesy']\n    else: return None\n\n# filter those with only 'merc'\nfiltered = dataframe.apply(lambda row: my_function(row), axis=1)\nprint(filtered)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>0    0.0\n1    NaN\n2    2.0\n3    2.0\n4    NaN\n5    6.0\ndtype: float64\n</code></pre>\n\n<p>You do not want to plot when neither of them are which would be <code>NaN</code>, so <code>dropna()</code> may be used:</p>\n\n<pre><code># plotting\nfiltered.dropna().plot(kind='bar', legend=None);\n</code></pre>\n"}], "owner": {"reputation": 464, "user_id": 7387488, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10210077619809114/picture?type=large", "display_name": "sn3jd3r", "link": "https://stackoverflow.com/users/7387488/sn3jd3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 50731043, "answer_count": 1, "score": 0, "last_activity_date": 1528328253, "creation_date": 1528326338, "last_edit_date": 1528327007, "question_id": 50730831, "link": "https://stackoverflow.com/questions/50730831/plotting-based-on-column-criteria-in-pandas", "title": "Plotting based on column criteria in Pandas", "body": "<p>If i have a dataframe say </p>\n\n<pre><code>df = {'carx' : [merc,rari,merc,hond,fia,merc]\n      'cary' : [bent,maz,ben,merc,fia,fia]\n      'milesx' : [0,100,2,22,5,6]\n      'milesy' : [10,3,18,2,19,2]}\n</code></pre>\n\n<p>I then would like to plot the value from column <code>milesx</code> if corresponding index of <code>carx</code> has the value 'merc'. The same criteria applies for <code>cary</code> and <code>milesy</code>, else nothing should be plotted. How can i do this?</p>\n\n<p><code>milesy</code> and <code>milesx</code> should be plotted on the x-axis. The y-axis should just be some continuous values (1,2...).</p>\n"}, {"tags": ["python", "json", "serialization"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1528326588, "post_id": 50730818, "comment_id": 88469378, "body": "Is this your exact dictionary? I can&#39;t replicate your error with <code>data = {&#39;weather&#39;: [], &#39;chat&#39;: [{&#39;chat&#39;: &#39;chat&#39;}], &#39;food&#39;: []}  json.dumps(data)</code>"}, {"owner": {"reputation": 90, "user_id": 9297446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5e013f67f9e7ab062956bd90865a60?s=128&d=identicon&r=PG&f=1", "display_name": "Mr_pzling_Pie", "link": "https://stackoverflow.com/users/9297446/mr-pzling-pie"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1528326731, "post_id": 50730818, "comment_id": 88469413, "body": "It could be <code>data = {&#39;weather&#39;: [], &#39;chat&#39;: [{&#39;chat&#39;: &#39;we need to talk&#39;}], &#39;food&#39;: []}</code> or <code>data = {&#39;weather&#39;: [&#39;weather&#39;: &#39;whats the weather&#39;], &#39;chat&#39;: [], &#39;food&#39;: []}</code> or something to that effect."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1528326917, "post_id": 50730818, "comment_id": 88469470, "body": "Your first example has no errors in <code>json.dumps()</code> and your second one is invalid (you can&#39;t use a key-val pair in an array like <code>[ key: val ]</code>. Please <code>print()</code> the exact structure that&#39;s causing the crash and post it."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528327337, "post_id": 50730818, "comment_id": 88469575, "body": "<code>{...}</code> is a <code>set</code> which is not serializable"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1528327422, "post_id": 50730818, "comment_id": 88469598, "body": "<code>{...}</code> is your issue. This could be something like: <code>data = {}  data[&#39;key&#39;] = data</code> which is circular. Post your original code and someone will show you how to remove this reference, but it&#39;s all guesswork without your code."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1528327447, "post_id": 50730818, "comment_id": 88469603, "body": "remove <code>{...}</code>: <code>data[&quot;chat&quot;] = {&#39;chat&#39;:&#39;chat&#39;}</code>"}], "owner": {"reputation": 90, "user_id": 9297446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f5e013f67f9e7ab062956bd90865a60?s=128&d=identicon&r=PG&f=1", "display_name": "Mr_pzling_Pie", "link": "https://stackoverflow.com/users/9297446/mr-pzling-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1457, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1528327261, "creation_date": 1528326274, "last_edit_date": 1528327261, "question_id": 50730818, "link": "https://stackoverflow.com/questions/50730818/serializing-dictionary-for-appending-to-json-python", "title": "Serializing dictionary for appending to json Python", "body": "<p>I want to serialize a dictionary then append it to a json. The dictionary would look something like this:   <code>{'weather': [], 'chat': [{'chat': 'chat'}], 'food': []}</code>. I need to then append it to a file. I know how to append, I just need assistance with the serializing of the dictionary. When I use <code>json.dumps(data)</code>, I gives this error:  </p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/Users/Milo/Documents/JoeAITest.py\", line 38, in &lt;module&gt;\nprint(json.dumps(data))\nFile\"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/__init__.py\", line 231, in dumps\nreturn _default_encoder.encode(obj)\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 199, in encode\nchunks = self.iterencode(o, _one_shot=True)\nFile \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 257, in iterencode\nreturn _iterencode(o, 0)\nValueError: Circular reference detected\n</code></pre>\n\n<p>When I try and print <code>data</code>, it prints: <code>{'weather': [], 'chat': [{'chat': 'chat'}, {...}], 'food': []}</code>. If you have any questions, please leave a comment. If you have an answer, leave it in the answer section, as so many people leave it in the comments.<br>\nThanks!</p>\n\n<p>-User 9297446</p>\n"}, {"tags": ["python", "string", "class", "printing"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1528326484, "post_id": 50730813, "comment_id": 88469346, "body": "Why do you have <code>()</code> around <code>&#39;sampletext&#39;</code>? If you&#39;re trying to make a tuple with one element, you need a comma: <code>(&#39;sampletext&#39;,)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9319039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzY4F.png?s=128&g=1", "display_name": "Swix", "link": "https://stackoverflow.com/users/9319039/swix"}, "edited": false, "score": 1, "creation_date": 1528930148, "post_id": 50730836, "comment_id": 88698135, "body": "oops... THE PERIOD GOT ME AGAIN"}], "tags": [], "owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "is_accepted": true, "score": 2, "last_activity_date": 1528326397, "creation_date": 1528326397, "answer_id": 50730836, "question_id": 50730813, "link": "https://stackoverflow.com/questions/50730813/class-strings-and-print-functions/50730836#50730836", "title": "Class Strings and print functions", "body": "<p>Try this:</p>\n\n<pre><code>class Map():\n    room1 = ('sampletext')\n\nprint(Map.room1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>sampletext\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1528327822, "creation_date": 1528327822, "answer_id": 50731021, "question_id": 50730813, "link": "https://stackoverflow.com/questions/50730813/class-strings-and-print-functions/50731021#50731021", "title": "Class Strings and print functions", "body": "<p>The main problem is that you can't call a class.  You can call a class method, or call a method on an instance of the class.  The syntax</p>\n\n<pre><code>Map(room1)\n</code></pre>\n\n<p>attempts to create an instance (object) of <code>Map</code>, given the initialization argument <code>room1</code>, which should be a local variable.</p>\n\n<p>With the class definition you've given, I think that the proper syntax is</p>\n\n<pre><code>print(Map.room1)\n</code></pre>\n\n<p>which references the value of the class attribute <code>room1</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 9319039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzY4F.png?s=128&g=1", "display_name": "Swix", "link": "https://stackoverflow.com/users/9319039/swix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 50730836, "answer_count": 2, "score": 1, "last_activity_date": 1528327822, "creation_date": 1528326240, "question_id": 50730813, "link": "https://stackoverflow.com/questions/50730813/class-strings-and-print-functions", "title": "Class Strings and print functions", "body": "<p>I'm working on a text based game and I've done this so far:</p>\n\n<pre><code>class Map():\n    room1 = ('sampletext')\n\nprint(Map(room1))\n</code></pre>\n\n<p>but then i get an error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Owner/Downloads/Text.py\", line 3, in &lt;module&gt;\n    print(Map(room1))\nNameError: name 'room1' is not defined\n</code></pre>\n\n<p>and I don't understand why the string from the variable isn't being printed because i am calling the class, but it says that the variable isn't recognized as a variable in the code. I want feedback so I can finish up this game.</p>\n"}, {"tags": ["python", "c", "python-3.x", "python-extensions"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1528327924, "post_id": 50730811, "comment_id": 88469725, "body": "I think you have answered your own question.  Compile your DLL as 64-bit."}], "owner": {"reputation": 434, "user_id": 6578141, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/220pq.jpg?s=128&g=1", "display_name": "David Montgomery", "link": "https://stackoverflow.com/users/6578141/david-montgomery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1528326229, "creation_date": 1528326229, "question_id": 50730811, "link": "https://stackoverflow.com/questions/50730811/extending-python-with-c-on-windows-importerror-dll-load-failed-1-is-not-a-v", "title": "Extending Python with C on Windows - ImportError: DLL load failed: %1 is not a valid Win32 application", "body": "<p>So, I'm interested in communicating between a C program and a Python program so that I can neatly send tasks and data between the two. </p>\n\n<p>I figured I'd go ahead and start with <a href=\"https://www.tutorialspoint.com/python/python_further_extensions.htm\" rel=\"nofollow noreferrer\" title=\"this guide\">this guide</a>. In this guide I have a C file with contents outlined in the example in the link right above the \"Building and Installing Extensions\" title and the python code from right under it. After I run the <code>python setup.py install</code> command I try to import the created module through</p>\n\n<pre><code>&gt;&gt;&gt;import helloworld                                                                                                   \nImportError: DLL load failed: %1 is not a valid Win32 application.  \n</code></pre>\n\n<p>So I suppose the issue is that the extension is 32-bit while my Python installation is 64-bit? The python I'm using is</p>\n\n<pre><code>Python 3.6.4 |Anaconda, Inc.| (default, Jan 16 2018, 10:22:32) [MSC v.1900 64 bit (AMD64)] on win32\n</code></pre>\n\n<p>All help appreciated! </p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 1, "creation_date": 1528326287, "post_id": 50730780, "comment_id": 88469295, "body": "How come, for me it works as expected, i use python3.6.0 and use numpy1.12.0"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1528333848, "post_id": 50730780, "comment_id": 88471113, "body": "@leoschet. What version of numpy?"}], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 2, "last_activity_date": 1528327491, "last_edit_date": 1528327491, "creation_date": 1528326467, "answer_id": 50730845, "question_id": 50730780, "link": "https://stackoverflow.com/questions/50730780/numpy-squeeze-list-object-has-no-attribute-squeeze/50730845#50730845", "title": "Numpy squeeze - &#39;list&#39; object has no attribute &#39;squeeze&#39;", "body": "<p>The problem is that you can't turn <code>['', []]</code> into an array because of the lack of a properly defined dimensionality. This can be seen by the fact the simply calling <code>np.array(['', []])</code> leads to the error:</p>\n\n<pre><code>&gt;&gt;&gt; np.array(['', []])\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nValueError: setting an array element with a sequence\n</code></pre>\n\n<p>From the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.squeeze.html\" rel=\"nofollow noreferrer\">docs</a>, it says that the argument input data <code>a</code> must be <code>array_like</code>, and <code>['', []]</code> is not (not all lists are <code>array_like</code>). Unfortunately, there isn't a really easy failproof way to determine if it is array-like, as explained <a href=\"https://docs.scipy.org/doc/numpy/user/basics.creation.html#converting-python-array-like-objects-to-numpy-arrays\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>In general, numerical data arranged in an array-like structure in Python can be converted to arrays through the use of the array() function. The most obvious examples are lists and tuples. See the documentation for array() for details for its use. Some objects may support the array-protocol and allow conversion to arrays this way. A simple way to find out if the object can be converted to a numpy array using array() is simply to try it interactively and see if it works! (The Python Way).</p>\n</blockquote>\n\n<p>You could do: <code>np.squeeze([[''], []])</code> if you wanted though, as <code>([[''], []])</code> has properly defined dimensionality and can therefore be converted to a <code>numpy</code> array:</p>\n\n<pre><code>&gt;&gt;&gt; np.squeeze([[''], []])\narray([list(['']), list([])], dtype=object)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1170, "user_id": 7454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d561d513c2ddb28d2d321f2f8e495?s=128&d=identicon&r=PG&f=1", "display_name": "leoschet", "link": "https://stackoverflow.com/users/7454638/leoschet"}, "edited": false, "score": 0, "creation_date": 1528340236, "post_id": 50731621, "comment_id": 88472478, "body": "I liked the <code>dtype</code> solution, lets me get a resulting list of only non-empty objects with a simple lambda function wrapping <code>np.squeeze</code>. Also, edited my answer with why I&#39;m doing it"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1528334107, "last_edit_date": 1528334107, "creation_date": 1528333607, "answer_id": 50731621, "question_id": 50730780, "link": "https://stackoverflow.com/questions/50730780/numpy-squeeze-list-object-has-no-attribute-squeeze/50731621#50731621", "title": "Numpy squeeze - &#39;list&#39; object has no attribute &#39;squeeze&#39;", "body": "<p><code>np.squeeze</code> is really just a wrapper for <code>a.squeeze()</code>, an array method.  Your argument is a list, which doesn't have that method.  So the function tries to make an array from the list:</p>\n\n<pre><code>In [325]: np.array(['', []])\n....\nValueError: setting an array element with a sequence\n</code></pre>\n\n<p>You are trying to make an array from a mix of objects, a string and list.  </p>\n\n<pre><code>In [326]: np.array(['', []],object)\nOut[326]: array(['', list([])], dtype=object)\n</code></pre>\n\n<p>If you tell it to make an object dtype array, it can.</p>\n\n<p>But with out that specification, it first tries to make string dtype array.  But then has problems fitting the list into a string slot - hence the error.  </p>\n\n<p>Other than being a curiosity, why would you want to <code>squeeze</code> such a list?</p>\n\n<hr>\n\n<p>If the list were first, <code>np.array</code> can make an object array:</p>\n\n<pre><code>In [327]: np.array([[],''])\nOut[327]: array([list([]), ''], dtype=object)\n</code></pre>\n\n<p>This is just one of the quirks of how <code>np.array</code> works when given a list of items of different sizes and or types.  It's primary task is to make an array from a list of neatly nested lists of numbers or strings.</p>\n\n<pre><code>In [328]: np.array([[1,2,3,4]])\nOut[328]: array([[1, 2, 3, 4]])\nIn [329]: np.squeeze([[1,2,3,4]])\nOut[329]: array([1, 2, 3, 4])\n</code></pre>\n\n<p>Given a mix of items, it has to 'guess' as to what you really want; sometimes it guesses wrong, other times it gives up.</p>\n"}], "owner": {"reputation": 1170, "user_id": 7454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d561d513c2ddb28d2d321f2f8e495?s=128&d=identicon&r=PG&f=1", "display_name": "leoschet", "link": "https://stackoverflow.com/users/7454638/leoschet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2466, "favorite_count": 0, "accepted_answer_id": 50731621, "answer_count": 2, "score": 2, "last_activity_date": 1528339734, "creation_date": 1528326027, "last_edit_date": 1528339734, "question_id": 50730780, "link": "https://stackoverflow.com/questions/50730780/numpy-squeeze-list-object-has-no-attribute-squeeze", "title": "Numpy squeeze - &#39;list&#39; object has no attribute &#39;squeeze&#39;", "body": "<p>One can run the following codes and get no errors:</p>\n\n<pre><code>&gt;&gt;&gt; np.squeeze([''])\narray('', dtype='&lt;U1')\n&gt;&gt;&gt; np.squeeze([[]])\narray([], dtype=float64)\n</code></pre>\n\n<p>But running:</p>\n\n<pre><code>&gt;&gt;&gt; np.squeeze(['', []])\n</code></pre>\n\n<p>Returns the following error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:\\Users\\leonardo.schettini\\Documents\\recrutai\\recrutai\\testenv\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 1240, in squeeze\n    squeeze = a.squeeze\nAttributeError: 'list' object has no attribute 'squeeze'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"C:\\Users\\leonardo.schettini\\Documents\\recrutai\\recrutai\\testenv\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 1242, in squeeze\n    return _wrapit(a, 'squeeze')\nFile \"C:\\Users\\leonardo.schettini\\Documents\\recrutai\\recrutai\\testenv\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 42, in _wrapit\n    result = getattr(asarray(obj), method)(*args, **kwds)\nFile \"C:\\Users\\leonardo.schettini\\Documents\\recrutai\\recrutai\\testenv\\lib\\site-packages\\numpy\\core\\numeric.py\", line 492, in asarray\n    return array(a, dtype, copy=False, order=order)\nValueError: setting an array element with a sequence\n</code></pre>\n\n<p>Why does this happen?!</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<blockquote>\n  <p>what versions?</p>\n</blockquote>\n\n<ul>\n<li>python == 3.6</li>\n<li>numpy == 1.14.3</li>\n</ul>\n\n<blockquote>\n  <p>why would you want to squeeze such a list?</p>\n</blockquote>\n\n<p>I'm using an in-house dictionary to get the lemma of synonyms and acronyms. Some times, when the input word isn't in my dictionary, I choose to keep it as a lemma, some other times I prefer to drop the word. A lemma is defined as an array of <em>n</em> words.</p>\n\n<p>In order to keep track of the lemma's real position in the input text, I wanted to add in my return list the lemma of <em>0</em> words, an empty list. At a first glance I thought squeeze would drop empty lists by its own...</p>\n"}, {"tags": ["python", "pandas", "sorting", "dataframe", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 3, "last_activity_date": 1528326288, "creation_date": 1528326288, "answer_id": 50730821, "question_id": 50730702, "link": "https://stackoverflow.com/questions/50730702/how-to-use-pandas-groupby-to-sort-some-rows-descending-and-some-rows-ascending/50730821#50730821", "title": "How to use pandas groupby to sort some rows descending and some rows ascending", "body": "<p>What is happening is that <code>groupby.apply</code> doesn't have an <code>axis</code> parameter as the error suggests, you could do this instead:</p>\n\n<pre><code>df.groupby(\n    ['base_currency', 'type'], group_keys=False\n).apply(\n    lambda g: g.sort_values('price', ascending=g.name[1] == 'bid')     \n    # check the type for each group and sort accordingly\n)\n\n#   base_currency  base_volume   price type\n#3            EUR        0.364   61.41  ask\n#2            EUR        0.266   61.37  ask\n#1            EUR        7.642   61.36  ask\n#0            EUR        0.031   61.17  ask\n#7            EUR        0.133   60.45  bid\n#6            EUR        2.061   60.46  bid\n#5            EUR       23.090   60.47  bid\n#4            EUR        0.101   61.10  bid\n#11           USD        3.364  161.41  ask\n#10           USD        3.266  161.37  ask\n#9            USD       10.642  161.36  ask\n#8            USD        3.031  161.17  ask\n#15           USD        3.133  160.45  bid\n#14           USD        5.061  160.46  bid\n#13           USD       26.090  160.47  bid\n#12           USD        3.101  161.10  bid\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1528328409, "last_edit_date": 1528328409, "creation_date": 1528326299, "answer_id": 50730822, "question_id": 50730702, "link": "https://stackoverflow.com/questions/50730702/how-to-use-pandas-groupby-to-sort-some-rows-descending-and-some-rows-ascending/50730822#50730822", "title": "How to use pandas groupby to sort some rows descending and some rows ascending", "body": "<p>You can create a helper column to sort by ascending or descending dependent on <em>another</em> column.</p>\n\n<p>Here our helper column negates <code>price</code> when <code>type == 'ask'</code>. Then, when we sort by <em>ascending</em> (the default for <code>sort_values</code>), we have the desired outcome of sorting these rows by descending <code>price</code>.</p>\n\n<pre><code>import numpy as np\n\ndf['price_helper'] = df['price'] * np.where(df['type'] == 'ask', -1, 1)\n\ndf_sorted = df.sort_values(['base_currency', 'type', 'price_helper'])\\\n              .drop('price_helper', 1)\n\nprint(df_sorted)\n\n   base_currency  base_volume   price type\n3            EUR        0.364   61.41  ask\n2            EUR        0.266   61.37  ask\n1            EUR        7.642   61.36  ask\n0            EUR        0.031   61.17  ask\n7            EUR        0.133   60.45  bid\n6            EUR        2.061   60.46  bid\n5            EUR       23.090   60.47  bid\n4            EUR        0.101   61.10  bid\n11           USD        3.364  161.41  ask\n10           USD        3.266  161.37  ask\n9            USD       10.642  161.36  ask\n8            USD        3.031  161.17  ask\n15           USD        3.133  160.45  bid\n14           USD        5.061  160.46  bid\n13           USD       26.090  160.47  bid\n12           USD        3.101  161.10  bid\n</code></pre>\n\n<p><strong>Performance</strong></p>\n\n<p>Performance is similar between a <code>lambda</code>-based approach and the \"helper column\" method. In my opinion, choose what you find maintainable.</p>\n\n<pre><code>def psi(df):\n    return df.groupby(['base_currency', 'type'], group_keys=False)\\\n             .apply(lambda g: g.sort_values('price', ascending=g.name[1] == 'bid'))\n\ndef jp(df):\n    df['price_helper'] = df['price'] * np.where(df['type'] == 'ask', -1, 1)\n    return df.sort_values(['base_currency', 'type', 'price_helper'])\\\n             .drop('price_helper', 1)\n\ndata = pd.concat([data]*100000, ignore_index=True)\n\n%timeit psi(data)  # 969 ms\n%timeit jp(data)   # 899 ms\n</code></pre>\n"}], "owner": {"reputation": 1116, "user_id": 7558518, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/be20f42d5d1949818638c7370d5af667?s=128&d=identicon&r=PG&f=1", "display_name": "BlandCorporation", "link": "https://stackoverflow.com/users/7558518/blandcorporation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1528328409, "creation_date": 1528325508, "last_edit_date": 1528326541, "question_id": 50730702, "link": "https://stackoverflow.com/questions/50730702/how-to-use-pandas-groupby-to-sort-some-rows-descending-and-some-rows-ascending", "title": "How to use pandas groupby to sort some rows descending and some rows ascending", "body": "<p>I have a DataFrame like this:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame(\n    [\n              [\"EUR\"          , 0.031        , 61.170000 , \"ask\" ],\n              [\"EUR\"          , 7.642        , 61.360000 , \"ask\" ],\n              [\"EUR\"          , 0.266        , 61.370000 , \"ask\" ],\n              [\"EUR\"          , 0.364        , 61.410000 , \"ask\" ],\n              [\"EUR\"          , 0.101        , 61.100000 , \"bid\" ],\n              [\"EUR\"          , 23.090       , 60.470000 , \"bid\" ],\n              [\"EUR\"          , 2.061        , 60.460000 , \"bid\" ],\n              [\"EUR\"          , 0.133        , 60.450000 , \"bid\" ],\n              [\"USD\"          , 3.031        , 161.170000, \"ask\" ],\n              [\"USD\"          , 10.642       , 161.360000, \"ask\" ],\n              [\"USD\"          , 3.266        , 161.370000, \"ask\" ],\n              [\"USD\"          , 3.364        , 161.410000, \"ask\" ],\n              [\"USD\"          , 3.101        , 161.100000, \"bid\" ],\n              [\"USD\"          , 26.090       , 160.470000, \"bid\" ],\n              [\"USD\"          , 5.061        , 160.460000, \"bid\" ],\n              [\"USD\"          , 3.133        , 160.450000, \"bid\" ],\n    ],\n    columns = [\"base_currency\", \"base_volume\", \"price\"  , \"type\"]\n)\ndf\n</code></pre>\n\n<p>I want to reorder the rows. Specifically, I want to group the currencies (all the \"EUR\" rows together, all the \"USD\" rows together) and then, for each currency I want the \"asks\" to be sorted descending and I want the \"bids\" to be sorted ascending. Now, I can get this working fine if the DataFrame contains only a single currency, in the following way:</p>\n\n<pre><code>_df = df.groupby(\"type\").apply(lambda row: row.sort_values(by = \"price\"))\n_df\n</code></pre>\n\n<p>I've got to deal with multiple currencies, but when I try to group them in the following way</p>\n\n<pre><code>_df = df.groupby([\"base_currency\", \"type\"]).apply(\n    lambda row:\n        row.sort_values(by = \"price\") if row['type'] == 'ask' else\\\n        row.sort_values(by = \"price\", ascending = False),\n    axis = 1\n)\n_df\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>TypeError: &lt;lambda&gt;() got an unexpected keyword argument 'axis'\n</code></pre>\n\n<p>What might be going on here? How can I fix it?</p>\n"}, {"tags": ["python", "opentok"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 1364946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/134428d471fac4b910632f98c607a750?s=128&d=identicon&r=PG", "display_name": "Vahid Kowsari", "link": "https://stackoverflow.com/users/1364946/vahid-kowsari"}, "edited": false, "score": 0, "creation_date": 1528417780, "post_id": 50731270, "comment_id": 88511526, "body": "Thank you. I realized that I need to use sessions after I posted my message. For now I create sessions for each room and store the ids in the django cache if they dont exist. As for test rooms, you idea is great to just have a different session for each user.  Thank you for the quick reply."}], "tags": [], "owner": {"reputation": 1377, "user_id": 179319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a32d759adb7d3a052d6a235feafd7ca9?s=128&d=identicon&r=PG", "display_name": "Adam Ullman", "link": "https://stackoverflow.com/users/179319/adam-ullman"}, "is_accepted": true, "score": 1, "last_activity_date": 1528329891, "creation_date": 1528329891, "answer_id": 50731270, "question_id": 50730680, "link": "https://stackoverflow.com/questions/50730680/tokbox-python-api-room-creation/50731270#50731270", "title": "tokbox python api room creation", "body": "<p>You can think of sessions like a room. Anyone that is in that room will see one another. There is no way to give a name to a room, but you can keep a mapping of room name to room in some kind of storage on your server. </p>\n\n<p>I wouldn't recommend creating a test room that you reuse for everyone because you could end up with lots of people seeing one another when testing their devices. I would create a separate test session for each participant.</p>\n\n<p>For an example of this you can look at the <a href=\"http://opentokdemo.tokbox.com/\" rel=\"nofollow noreferrer\">opentokdemo</a> code. It's written in JavaScript (Node.js) unfortunately, not Python, but you can get an idea of how it works. </p>\n\n<p><a href=\"https://github.com/opentok/OpenTokRTC-V2/blob/c15a10a3d9429c70396e3511d9a1f6abfbd9a5ed/server/serverMethods.js#L330\" rel=\"nofollow noreferrer\">Here</a> is where they create a new sessionId for doing a network test. They create a new sessionId for every participant for them to test in.</p>\n\n<p><a href=\"https://github.com/opentok/OpenTokRTC-V2/blob/c15a10a3d9429c70396e3511d9a1f6abfbd9a5ed/server/serverMethods.js#L432\" rel=\"nofollow noreferrer\">Here</a> is where the logic is that tries to fetch the sessionId for a room name from persistent storage and if there is not one then it creates a new one and stores it.</p>\n"}], "owner": {"reputation": 145, "user_id": 1364946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/134428d471fac4b910632f98c607a750?s=128&d=identicon&r=PG", "display_name": "Vahid Kowsari", "link": "https://stackoverflow.com/users/1364946/vahid-kowsari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 50731270, "answer_count": 1, "score": 0, "last_activity_date": 1528329891, "creation_date": 1528325409, "question_id": 50730680, "link": "https://stackoverflow.com/questions/50730680/tokbox-python-api-room-creation", "title": "tokbox python api room creation", "body": "<p>I am trying to use Tokbox for a multi-room chat, with each room having multiple routed sessions. We have developed the FE in angular to connect to our backend to retrieve a token that is generated by calling the tokbox python apis. </p>\n\n<p>My questions:\n1. How do implement 'rooms'. I dont see where I can pass parameters during session or token creation to pass a room?</p>\n\n<ol start=\"2\">\n<li>How do create a 'test' room, where the user can choose and verify his camera/microphone/speaker selection? Can we create a generic 'test' room?</li>\n</ol>\n\n<p>Any help is much appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "video-intelligence-api"], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 9398998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DJU1u.jpg?s=128&g=1", "display_name": "MonicaPC", "link": "https://stackoverflow.com/users/9398998/monicapc"}, "is_accepted": false, "score": 0, "last_activity_date": 1532646715, "last_edit_date": 1532646715, "creation_date": 1532563158, "answer_id": 51529226, "question_id": 50730677, "link": "https://stackoverflow.com/questions/50730677/why-do-the-shot-annotations-return-in-rpc-but-are-not-present-in-json-file-on-go/51529226#51529226", "title": "Why do the Shot annotations return in RPC but are not present in json file on google storage?", "body": "<p>An empty result for shot_annotations might be caused by the client library. Please make sure to use the <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-python/tree/f2c49c8b07a82260d29de408b5d3c9d25de924ce/videointelligence\" rel=\"nofollow noreferrer\">official Google Cloud examples</a>. It is also recommended, in the beginning, to go through the Cloud Video Intelligence API <a href=\"https://cloud.google.com/video-intelligence/docs/quickstart\" rel=\"nofollow noreferrer\">Quickstart</a> and <a href=\"https://cloud.google.com/video-intelligence/docs/tutorials\" rel=\"nofollow noreferrer\">Tutorials</a>.</p>\n\n<p>Also make sure that the <a href=\"https://googlecloudplatform.github.io/google-cloud-python/latest/videointelligence/index.html\" rel=\"nofollow noreferrer\">latest version of the API</a> is called and use the v1p1beta1 endpoint that includes more functionalities.</p>\n\n<p>You can also first test the <a href=\"https://cloud.google.com/video-intelligence/\" rel=\"nofollow noreferrer\">Google Cloud video samples</a> to exclude there is a video format compatibility issue.  </p>\n"}], "owner": {"reputation": 11, "user_id": 9905923, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--rF_GTAMry0/AAAAAAAAAAI/AAAAAAAAA5Q/AY0Rct793t4/photo.jpg?sz=128", "display_name": "Peter Karp", "link": "https://stackoverflow.com/users/9905923/peter-karp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1532646715, "creation_date": 1528325390, "question_id": 50730677, "link": "https://stackoverflow.com/questions/50730677/why-do-the-shot-annotations-return-in-rpc-but-are-not-present-in-json-file-on-go", "title": "Why do the Shot annotations return in RPC but are not present in json file on google storage?", "body": "<p>I can get the shot annotations when I use the rpc from the sample code:</p>\n\n<pre><code>features = [\n    enums.Feature.LABEL_DETECTION,\n    enums.Feature.SHOT_CHANGE_DETECTION\n]\noperation = video_client.annotate_video(path, features=features, output_uri=json_file)\nresult = operation.result(timeout=90)\n\nfor i, shot in enumerate(result.annotation_results[0].shot_annotations):\n    start_time = (shot.start_time_offset.seconds +\n                  shot.start_time_offset.nanos / 1e9)\n    end_time = (shot.end_time_offset.seconds +\n                shot.end_time_offset.nanos / 1e9)\n    print('\\tShot {}: {} to {}'.format(i, start_time, end_time))\n</code></pre>\n\n<p>However the json file created by <code>annotate_video()</code> and written to the GS bucket only includes values for the keys <code>segment_label_annotations</code> and <code>shot_label_annotations</code>. The <code>shot_annotations</code> key is an empty list.</p>\n"}, {"tags": ["python", "session"], "comments": [{"owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528325159, "post_id": 50730622, "comment_id": 88468976, "body": "i think your getting an error because there is nothing in the for loop"}, {"owner": {"reputation": 1, "user_id": 9900445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb79c8219fc6c285afcf6131c83729d1?s=128&d=identicon&r=PG&f=1", "display_name": "zainab", "link": "https://stackoverflow.com/users/9900445/zainab"}, "reply_to_user": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528326597, "post_id": 50730622, "comment_id": 88469382, "body": "How to solve it as i am new to python. I need a code for to get nodes with maximum displacements values in abaqus."}, {"owner": {"reputation": 1, "user_id": 9900445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb79c8219fc6c285afcf6131c83729d1?s=128&d=identicon&r=PG&f=1", "display_name": "zainab", "link": "https://stackoverflow.com/users/9900445/zainab"}, "reply_to_user": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528326877, "post_id": 50730622, "comment_id": 88469459, "body": "square_odb_Path=&#39;squaremodalanalysis.odb&#39; squareodb=session.openodb(name=square_odb_Path)"}, {"owner": {"reputation": 1, "user_id": 9900445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb79c8219fc6c285afcf6131c83729d1?s=128&d=identicon&r=PG&f=1", "display_name": "zainab", "link": "https://stackoverflow.com/users/9900445/zainab"}, "reply_to_user": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528326920, "post_id": 50730622, "comment_id": 88469471, "body": "max_displacement=0 for x in range(len(squareodb.steps[&#39;Loading Step&#39;].frames[-1]\\.fieldoutputs[&#39;U&#39;].values[0].instance.node&zwnj;&#8203;s)): node_y_displacement = abs(squareodb.steps[&#39;Loading Step&#39;].frames[-1]\\.fieldoutputs[&#39;U&#39;].values[x].data[1]): if node_y_displacement &gt; max_displacement: max_disp_node_label = squareodb.steps[&#39;Loading Step&#39;].frames[-1]\\.fieldoutputs[&#39;U&#39;].values[x].nodeLabel field_output_dip_object_index = x max_displacement = node_y_displacement"}, {"owner": {"reputation": 1, "user_id": 9900445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb79c8219fc6c285afcf6131c83729d1?s=128&d=identicon&r=PG&f=1", "display_name": "zainab", "link": "https://stackoverflow.com/users/9900445/zainab"}, "reply_to_user": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528326937, "post_id": 50730622, "comment_id": 88469473, "body": "print&#39;\\n\\n&#39; print &#39;The node with the maximum Y displacement is %d&#39; %max_disp_node_label print &#39;The Y component of the displacement is %f&#39; %max_displacement print &#39;The magnitude of the displacement (length of disp vector) is %.5f&#39; \\ %squareodb.steps[&#39;Loading Step&#39;].frames[-1].fieldoutputs[&#39;U&#39;] \\ .values[field_output_disp_object_index].magnitude print &#39;\\n\\n&#39; print &#39;=======================================&#39;"}, {"owner": {"reputation": 1, "user_id": 9900445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb79c8219fc6c285afcf6131c83729d1?s=128&d=identicon&r=PG&f=1", "display_name": "zainab", "link": "https://stackoverflow.com/users/9900445/zainab"}, "reply_to_user": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528326959, "post_id": 50730622, "comment_id": 88469477, "body": "This one is complete code"}, {"owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528358460, "post_id": 50730622, "comment_id": 88479417, "body": "Then please edit your question an put your whole code there"}, {"owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "edited": false, "score": 0, "creation_date": 1528358523, "post_id": 50730622, "comment_id": 88479450, "body": "Here is the <a href=\"https://stackoverflow.com/posts/50730622/edit\">link</a> if you don&#39;t know how to edit a question"}], "owner": {"reputation": 1, "user_id": 9900445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb79c8219fc6c285afcf6131c83729d1?s=128&d=identicon&r=PG&f=1", "display_name": "zainab", "link": "https://stackoverflow.com/users/9900445/zainab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 527, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528349642, "creation_date": 1528325010, "last_edit_date": 1528349642, "question_id": 50730622, "link": "https://stackoverflow.com/questions/50730622/how-to-extract-values-of-maximum-displacement-in-abaqus", "title": "How to extract values of maximum displacement in abaqus?", "body": "<pre><code>square_odb_Path='squaremodalanalysis.odb'\nsquareodb=session.openodb(name=square_odb_Path)\nmax_displacement=0\nfor x in range(len(squareodb.steps['Loading Step'].frames[-1]\\.fieldoutputs['U'].values[0].instance.nodes)):\n</code></pre>\n\n<p>Getting error in line 4!</p>\n"}, {"tags": ["python", "validation", "machine-learning", "hyperparameters"], "comments": [{"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 3, "creation_date": 1528324633, "post_id": 50730555, "comment_id": 88468794, "body": "I think this question belongs better on the CrossValidated or the DataScience stack exchanges."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9905924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a99d3d1e638a197a59b738b14667de7?s=128&d=identicon&r=PG", "display_name": "user9905924", "link": "https://stackoverflow.com/users/9905924/user9905924"}, "edited": false, "score": 0, "creation_date": 1528325761, "post_id": 50730634, "comment_id": 88469158, "body": "Thank you for such a nice answer. It would be a great help if you can answer the two  questions that I had after reading your answer.   1)How does the model train if the validation step comes after the training set? Hyperparameters have to be initialized for training, right. 2) What values do the hyperparameters choose from in the validation set?   Are these random values or assigned by us or by a certain exhaustive approach."}], "tags": [], "owner": {"reputation": 136, "user_id": 9905807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d981490aca860ec634c9ef05596c9b39?s=128&d=identicon&r=PG&f=1", "display_name": "user9905807", "link": "https://stackoverflow.com/users/9905807/user9905807"}, "is_accepted": true, "score": 0, "last_activity_date": 1528325083, "creation_date": 1528325083, "answer_id": 50730634, "question_id": 50730555, "link": "https://stackoverflow.com/questions/50730555/machine-learning-query/50730634#50730634", "title": "Machine learning query", "body": "<p>Suppose you train your random forest classifier on 70% of the data you have, then it will help your classifier to identify useful attributes or features for the random forest classifier from this training data. But there are many hyper parameters e.g. depth of a Random Forest classifier, which affects the performance of RF classifier. You can check which depth gives you best performance by plotting an accuracy graph on Validation set (say another 10% of your data). After training and finding right values of hyper-parameters, you can test your classifiers performance on test data (remaining 20% of data).</p>\n"}], "owner": {"reputation": 25, "user_id": 9905924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a99d3d1e638a197a59b738b14667de7?s=128&d=identicon&r=PG", "display_name": "user9905924", "link": "https://stackoverflow.com/users/9905924/user9905924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1528329199, "accepted_answer_id": 50730634, "answer_count": 1, "score": -4, "last_activity_date": 1528325083, "creation_date": 1528324466, "question_id": 50730555, "link": "https://stackoverflow.com/questions/50730555/machine-learning-query", "closed_reason": "Needs more focus", "title": "Machine learning query", "body": "<p>Please correct me if I am wrong. \"Training Set is used for calculating parameters of a machine learning model, Validation data is used for calculating hyperparameters of the same model (we use same weights with different hyperparameters), and Test set is used for evaluating our model\". If true, can someone explain the whole process in a little more detail. TIA.</p>\n"}, {"tags": ["python", "windows", "python-3.x", "automation", "pyautogui"], "answers": [{"tags": [], "owner": {"reputation": 2576, "user_id": 2836656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa477f06ae4b66d1d762a5c1f2f09674?s=128&d=identicon&r=PG&f=1", "display_name": "clockwatcher", "link": "https://stackoverflow.com/users/2836656/clockwatcher"}, "is_accepted": true, "score": 3, "last_activity_date": 1528352771, "creation_date": 1528352771, "answer_id": 50734259, "question_id": 50730539, "link": "https://stackoverflow.com/questions/50730539/pyautogui-screenshot-where-does-it-go-how-to-save-and-find-later/50734259#50734259", "title": "Pyautogui screenshot. Where does it go? How to save and find later?", "body": "<p>Here's the link to the documentation on saving screenshots in pyautogui:</p>\n\n<p><a href=\"https://github.com/asweigart/pyautogui#user-content-screenshot-functions\" rel=\"nofollow noreferrer\">https://github.com/asweigart/pyautogui#user-content-screenshot-functions</a></p>\n\n<p>The screenshot function returns a PIL.Image.  You can save that to a file with it's save method.</p>\n\n<pre><code>import pyautogui\nim1 = pyautogui.screenshot()\nim1.save(r\"c:\\path\\to\\my\\screenshot.png\")\n</code></pre>\n\n<p>You can also pass the path where you'd like to save the file in the screenshot method call:</p>\n\n<pre><code>import pyautogui\npyautogui.screenshot(r\"c:\\path\\to\\my\\screenshot1.png\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2364, "user_id": 3829004, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/FTYkV.jpg?s=128&g=1", "display_name": "csharpcoder", "link": "https://stackoverflow.com/users/3829004/csharpcoder"}, "is_accepted": false, "score": 3, "last_activity_date": 1528434402, "creation_date": 1528434402, "answer_id": 50753699, "question_id": 50730539, "link": "https://stackoverflow.com/questions/50730539/pyautogui-screenshot-where-does-it-go-how-to-save-and-find-later/50753699#50753699", "title": "Pyautogui screenshot. Where does it go? How to save and find later?", "body": "<p>Did you followed the <a href=\"http://pyautogui.readthedocs.io/en/latest/screenshot.html\" rel=\"nofollow noreferrer\">pyautogui doc </a> ,</p>\n\n<p>It clearly says :\n <strong>PyAutoGUI can take screenshots, save them to files, and locate images within the screen</strong> , \nCalling screenshot() will return an Image object , It can be called in different ways :</p>\n\n<pre><code>&gt;&gt;&gt; im1 = pyautogui.screenshot()  # return an image object\n&gt;&gt;&gt; im2 = pyautogui.screenshot('my_screenshot.png')  # image name will be as per parameter\n&gt;&gt;&gt; im3 = pyautogui.screenshot(region=(0,0, 300, 400)) # mention spedific region to get the screenshot \n</code></pre>\n\n<p>All return a image object which can be later consumed / saved as per requirement : </p>\n\n<pre><code>&gt;&gt;&gt; im1.size()  # will return a dimension of image as a tuple  \n&gt;&gt;&gt; im2.save(\"&lt;imagepath where you wish to save your image &gt;\") # save the image\n&gt;&gt;&gt; im.getpixel((100, 200)) # return color value of the point mentioned \n</code></pre>\n\n<p>Hope this help :)</p>\n"}], "owner": {"reputation": 45, "user_id": 9899363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b3dca675008f9db25f7c3e06db9b8de?s=128&d=identicon&r=PG&f=1", "display_name": "Trevor Trinh", "link": "https://stackoverflow.com/users/9899363/trevor-trinh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15065, "favorite_count": 2, "accepted_answer_id": 50734259, "answer_count": 2, "score": 3, "last_activity_date": 1528434402, "creation_date": 1528324328, "question_id": 50730539, "link": "https://stackoverflow.com/questions/50730539/pyautogui-screenshot-where-does-it-go-how-to-save-and-find-later", "title": "Pyautogui screenshot. Where does it go? How to save and find later?", "body": "<p>I am learning from Al Sweigart's you tube video for automating the boring stuff. I got to the part of taking screenshots. He didn't really explain in his video so I tested things out. I found that it takes screenshots of the whole desktop but I don't know where they go. I can only find it when do a whole computer search and I don't know how to put it into a folder from there. </p>\n\n<p>Basically I am asking how I can store the images and find those images taken by the <code>pyautogui.screenshot()</code> function. I am not planning on using this for anything at the moment I just want to know how to do it. I went to the pyautogui website and I didn't find anything on where to find and how to save the screenshots. Thank you in advance for your time! </p>\n"}, {"tags": ["python", "pandas", "pivot-table"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528326458, "post_id": 50730602, "comment_id": 88469338, "body": "Thanks for the answer, I actually got sth similar as yours by concatenate two pivot tables (two pivot table with different columns).... So I&#39;m exploring if there&#39;s any option to incorporate them inside the pivot table with the exactly same format (I am also new to Pandas though)..."}, {"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528326734, "post_id": 50730602, "comment_id": 88469416, "body": "not quite yet.. as I want to keep all the other pivot table format the same as it is while just adding two subtotals in it."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528326756, "post_id": 50730602, "comment_id": 88469422, "body": "@Jay Can&#39;t have the cake and eat it too my friend."}, {"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528327013, "post_id": 50730602, "comment_id": 88469493, "body": "in Excel I know we can create a sub pivot table inside a major pivot table which is what I would expect, so you wouldn&#39;t believe the Pandas can do something similar? Thanks."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528327135, "post_id": 50730602, "comment_id": 88469528, "body": "@Jay if you&#39;re asking for level-wise margins, I&#39;ve already told you pivot_table doesn&#39;t support this functionality yet. Maybe they&#39;ve planned it for a future release, or maybe they haven&#39;t planned it at all. Best thing to do would be to open a feature request on the github repo and make your case. Until they implement such a feature, your only option is the workarounds. What workaround you use is upto you. I&#39;ve given you one. You may prefer another."}, {"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528327384, "post_id": 50730602, "comment_id": 88469591, "body": "Thank you @coldspeed, I would go to github and try to open a request there."}, {"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528327860, "post_id": 50730602, "comment_id": 88469710, "body": "Forgot to ask...@coldspeed  do you know if there&#39;s a way to add two calculated columns inside the originally created pivot table and to keep the original format the same? I had some attempt on this, but didn&#39;t get the solution."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1528327944, "post_id": 50730602, "comment_id": 88469730, "body": "@Jay: Yeah, take this result for example: <code>res = tb.groupby....; df = pd.concat([tb, res], axis=1)</code> You can play around with the ordering."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1528324836, "creation_date": 1528324836, "answer_id": 50730602, "question_id": 50730502, "link": "https://stackoverflow.com/questions/50730502/create-subtotals-for-rows-in-pivot-table-for-different-columns/50730602#50730602", "title": "Create subtotals for rows in pivot table for different columns", "body": "<p><code>pivot_table</code> doesn't support it, but you can compute it yourself and concatenate it later:</p>\n\n<pre><code>tb.groupby(level='Op', axis=1).sum().add_suffix('Total')\n\nOp          Total  ATotal  BTotal\nTm                               \n07-01-2018    200     100     100\n08-01-2018    400     200     200\n09-01-2018    600     300     300\nAll          1200     600     600\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 1, "accepted_answer_id": 50730602, "answer_count": 1, "score": 2, "last_activity_date": 1528324836, "creation_date": 1528324037, "question_id": 50730502, "link": "https://stackoverflow.com/questions/50730502/create-subtotals-for-rows-in-pivot-table-for-different-columns", "title": "Create subtotals for rows in pivot table for different columns", "body": "<p>I am creating a pivot table with Pandas but got stuck at the subtotals for rows within different columns (under the same Values) for a while, I've done some research on stackoverflow such as <a href=\"https://stackoverflow.com/questions/15570099/pandas-pivot-tables-row-subtotals\">Pandas Pivot tables row subtotals</a> and this <a href=\"https://stackoverflow.com/questions/36819661/subtotals-for-pandas-pivot-table-index-and-column\">Subtotals for Pandas pivot table index and column</a> (actually this one is close to but some what also different from my case) but didn't find right hint for my case, so please for this topic, thanks.</p>\n\n<p>Here I will provide a simplified DataFrame (original one is too big to show here, so their values really do not matter, the format is what I am looking for) of my case and the code I wrote to get my pivot table.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.DataFrame(\n{\n    'Co':['NN']*6,\n    'Op':['A','B']*3,\n    'Stk':[1.1,1.2,1.3]*2,\n    'Tm':['07-01-2018','08-01-2018','09-01-2018']*2,\n    'Qt':[100,200,300]*2\n}\n)\ndf\n</code></pre>\n\n<p>The df output looks like:</p>\n\n<pre><code>Co  Op  Qt  Stk Tm\n0   NN  A   100 1.1 07-01-2018\n1   NN  B   200 1.2 08-01-2018\n2   NN  A   300 1.3 09-01-2018\n3   NN  B   100 1.1 07-01-2018\n4   NN  A   200 1.2 08-01-2018\n5   NN  B   300 1.3 09-01-2018\n</code></pre>\n\n<p>Then I convert above df to my pivot table by:</p>\n\n<pre><code>df['Qt'] = df['Qt'].apply(pd.to_numeric)\ndf['Stk']=df['Stk'].apply(pd.to_numeric)\ndf['Co'] = df['Co'].astype(str)\ntb=pd.pivot_table(df,index=[\"Tm\"],columns=[\"Co\",\"Op\",\"Stk\"],aggfunc=np.sum,values=['Qt'], fill_value=0, margins=True, margins_name='All')\ntb\n</code></pre>\n\n<p>The generated pivot table looks like:</p>\n\n<pre><code>            Qt\nCo          NN                              All\nOp          A              B    \nStk         1.1  1.2  1.3  1.1  1.2  1.3    \n        Tm                          \n07-01-2018  100  0    0    100  0    0      200\n08-01-2018  0    200  0    0    200  0      400\n09-01-2018  0    0    300  0    0    300    600\n       All  100  200  300  100  200  300    1200\n</code></pre>\n\n<p>The format which I really expect is:</p>\n\n<pre><code>            Qt\nCo          NN                                                All\nOp          A              ATotal   B               BTotal\nStk         1.1  1.2  1.3           1.1  1.2  1.3   \n        Tm                          \n07-01-2018  100  0    0    100      100  0    0     100       200\n08-01-2018  0    200  0    200      0    200  0     200       400\n09-01-2018  0    0    300  300      0    0    300   300       600\n       All  100  200  300  600      100  200  300   600       1200\n</code></pre>\n\n<p>I was trying to create this exact same format for a while and still can't get the same one (I tried something like creating two separate A and B pivot tables and union them together, but it will mess with the All margins). So help is really needed here.\np.s. I am still new to stackoverflow community, so please pardon if my question is missing some aspects, thank you.</p>\n"}, {"tags": ["python", "oop", "properties", "python-decorators"], "comments": [{"owner": {"reputation": 3688, "user_id": 152544, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/11d61cf3477a68a57c22bfb68d54434e?s=128&d=identicon&r=PG", "display_name": "Michael Goerz", "link": "https://stackoverflow.com/users/152544/michael-goerz"}, "edited": false, "score": 0, "creation_date": 1528324114, "post_id": 50730489, "comment_id": 88468638, "body": "just to be clear: I don&#39;t want to use <code>__getattr__</code> to simply reroute <code>a</code> to <code>_a</code>, because that wouldn&#39;t be read-only (is there a way to make it read-only?), and it would also be undocumented."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1528324119, "post_id": 50730489, "comment_id": 88468639, "body": "See <a href=\"//stackoverflow.com/q/3431676\">Creating functions in a loop</a> for an explanation of the problem in your code."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1528324336, "post_id": 50730489, "comment_id": 88468707, "body": "What do you mean &quot;it would be undocumented&quot;?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 3, "creation_date": 1528324366, "post_id": 50730489, "comment_id": 88468716, "body": "As a side note, wouldn&#39;t it be a simpler API to just <code>@add_properties(&#39;a&#39;, &#39;b&#39;)</code> instead of requiring <code>_arg_names</code>? (Unless you need that class attribute for something else?)"}, {"owner": {"reputation": 3688, "user_id": 152544, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/11d61cf3477a68a57c22bfb68d54434e?s=128&d=identicon&r=PG", "display_name": "Michael Goerz", "link": "https://stackoverflow.com/users/152544/michael-goerz"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1528339165, "post_id": 50730489, "comment_id": 88472286, "body": "@Aran-Fey Thanks! I don&#39;t think I&#39;ve run into this late-binding problem ever before. Using <code>partial</code> solves the problem! What I meant by &quot;undocumented&quot; is that if I handled the attributes <code>a</code> and <code>b</code> in <code>__getattr__</code>, then <code>help(A)</code> wouldn&#39;t mention anything about them."}, {"owner": {"reputation": 3688, "user_id": 152544, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/11d61cf3477a68a57c22bfb68d54434e?s=128&d=identicon&r=PG", "display_name": "Michael Goerz", "link": "https://stackoverflow.com/users/152544/michael-goerz"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528339287, "post_id": 50730489, "comment_id": 88472315, "body": "@abarnert In principle, I agree. This was just my minimal example, though. In the actual code, <code>arg_names</code> is used for more than just this."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528342824, "post_id": 50730489, "comment_id": 88472980, "body": "People who understand closures (as you seem to, and many others) still usually find this confusing. This is exactly what capturing a variable in a closure means, by definition. And it seems like it\u2019s obvious that the loop variable is one variable that gets reassigned over and over, not separate variables with the same name (as it would be in, say, Scheme). And yet, people who are knowledgeable (and smarter than me) have been running into this since Python 1.x (and continue in newer languages, like Go). If someone could work out why, it would be a big step in language design\u2026"}, {"owner": {"reputation": 3688, "user_id": 152544, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/11d61cf3477a68a57c22bfb68d54434e?s=128&d=identicon&r=PG", "display_name": "Michael Goerz", "link": "https://stackoverflow.com/users/152544/michael-goerz"}, "edited": false, "score": 0, "creation_date": 1528349456, "post_id": 50730489, "comment_id": 88474853, "body": "When you put it like that, it totally makes sense. I suppose the confusion might come from having a bit of a functional programming mindset, with block-level scope, and where an assignment creates a new variable (memory location). Of course, that&#39;s not how Python works, but in a purely functional language where everything is immutable, something like the original example should work."}, {"owner": {"reputation": 3688, "user_id": 152544, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/11d61cf3477a68a57c22bfb68d54434e?s=128&d=identicon&r=PG", "display_name": "Michael Goerz", "link": "https://stackoverflow.com/users/152544/michael-goerz"}, "edited": false, "score": 0, "creation_date": 1528349616, "post_id": 50730489, "comment_id": 88474907, "body": "I&#39;d suspect my reason for having fallen into that mindset was that this problem showed up in the development of a computer algebra library, which uses a lot of functional patterns. The point of the automatic properties is in fact to enforce immutability of expressions."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528415756, "post_id": 50730489, "comment_id": 88511074, "body": "@MichaelGoerz Actually, I think it&#39;s not even about immutability. Lisp mutates all over the place, but most Lisp loop constructs create a new namespace with a new let binding for the loop variable each time through the loop. And other functional languages with mutability implement loops as sugar over tail recursion. So it&#39;s just a matter of not thinking of loops as an imperative construct\u2014or, rather, subconsciously expecting loop+closure to work in functional-loop terms, because you rarely use closures in imperative languages, even though once you think about it you can see what&#39;s happening?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528415819, "post_id": 50730489, "comment_id": 88511086, "body": "Anyway, as I said, it&#39;s not just you, it&#39;s almost everyone, and people coming from languages that encourage lots of closures maybe even more than novices. But then once you realize why it works the way it does, it&#39;s hard to imagine why you&#39;d ever have thought otherwise\u2026"}], "owner": {"reputation": 3688, "user_id": 152544, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/11d61cf3477a68a57c22bfb68d54434e?s=128&d=identicon&r=PG", "display_name": "Michael Goerz", "link": "https://stackoverflow.com/users/152544/michael-goerz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 1, "closed_date": 1528324385, "answer_count": 0, "score": 1, "last_activity_date": 1528325818, "creation_date": 1528323945, "last_edit_date": 1528325818, "question_id": 50730489, "link": "https://stackoverflow.com/questions/50730489/setting-properties-dynamically-in-class-decorator", "closed_reason": "Duplicate", "title": "Setting properties dynamically in class decorator", "body": "<p>I'd like to have a class decorator that adds properties to a class based on a class attribute <code>_arg_names</code>, as in this minimal example:</p>\n\n<pre><code>def add_properties(cls):\n    for name in cls._arg_names:\n        setattr(cls, name, property(lambda self: getattr(self, '_' + name)))\n    return cls\n\n@add_properties  # .a-&gt;._a, .b-&gt;._b\nclass A():\n    _arg_names = ('a', 'b')\n    def __init__(self):\n        self._a = 1\n        self._b = 2\n</code></pre>\n\n<p>However, when I run this, I find that all properties point to the last argument name:</p>\n\n<pre><code>&gt;&gt;&gt; x = A()\n&gt;&gt;&gt; x.a\n2\n&gt;&gt;&gt; x.b\n2\n</code></pre>\n\n<p>Any ideas why the closure inside <code>property</code> isn't working as expected? Are there any other solutions for this problem? I need the properties to be read-only, and they should show up in the class documentation.</p>\n"}, {"tags": ["python", "python-3.x", "unicode", "byte", "encode"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1528323990, "post_id": 50730466, "comment_id": 88468602, "body": "Do you mean &quot;characters with encodings <i>in UTF-8</i> larger than 3 bytes&quot;? If not, which encoding do you mean? And do you have any code of your own to show us, any attempts at all?"}, {"owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1528324126, "post_id": 50730466, "comment_id": 88468643, "body": "I&#39;m using UTF-8 encoding to save str to files."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1528324538, "post_id": 50730466, "comment_id": 88468768, "body": "1. Nothing in your example string has a UTF-8 encoding larger than 3 bytes.  2. What do you want to do when such a character is encountered? Remove it? Replace with something else?"}, {"owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "edited": false, "score": 0, "creation_date": 1528324827, "post_id": 50730466, "comment_id": 88468862, "body": "Thank you for your comment. 2. I want to remove such characters. 1. After manually removing the characters in my example, Amazon MTurk accept my CSV file. So I think some of them are more than three bytes."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1528325543, "post_id": 50730466, "comment_id": 88469093, "body": "How come you have a unicode string with something like <code>\\x9f</code> in it in the first place? I am asking because the error may be different from what you think it is. <code>&#39;\\x9f&#39;</code> is <i>&quot;Application Program Command&quot;</i>, which is not a printable character. That may be the actual problem, rather than 3-byte limit."}, {"owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1528325777, "post_id": 50730466, "comment_id": 88469164, "body": "@zvone Thank you. Do you know how can I remove all un-printable characters?"}], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1528324719, "post_id": 50730568, "comment_id": 88468821, "body": "Does the standard say that any character at or above U+0800 will use at least 3 bytes (equivalently, are the 1 and 2-bytes spaces all &quot;filled&quot;)?"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1528324824, "post_id": 50730568, "comment_id": 88468860, "body": "@wim: Yes. Did you look at the Wikipedia link I gave? I assumed that the Wikipedia article is accurate."}], "tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": false, "score": 0, "last_activity_date": 1528324770, "last_edit_date": 1528324770, "creation_date": 1528324549, "answer_id": 50730568, "question_id": 50730466, "link": "https://stackoverflow.com/questions/50730466/remove-characters-with-encodings-larger-than-3-bytes-using-python-3/50730568#50730568", "title": "Remove &quot;characters with encodings larger than 3 bytes&quot; using Python 3", "body": "<p>According to <a href=\"https://en.wikipedia.org/wiki/UTF-8#Description\" rel=\"nofollow noreferrer\">the UTF-8 standard</a>, characters with Unicode code points below U+0800 will use at most two bytes in the encoding. So just remove any character at or above U+0800. This code copies all characters that take at most two bytes and just leave out the other characters.</p>\n\n<pre><code>def remove_max3byes(x):\n    return ''.join(c for c in x if ord(c) &lt; 0x800)\n</code></pre>\n\n<p>As a comment pointed out, your example string has no characters that take more than two bytes. But this command at the REPL</p>\n\n<pre><code>remove_max3byes(chr(0x07ff))\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>'\\u07ff'\n</code></pre>\n\n<p>and this command</p>\n\n<pre><code>remove_max3byes(chr(0x0800))\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>''\n</code></pre>\n\n<p>Both are as wanted.</p>\n"}, {"comments": [{"owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "edited": false, "score": 0, "creation_date": 1528325525, "post_id": 50730589, "comment_id": 88469081, "body": "Thank you for the helpful comment. Actually, MTurk system seems not to accept two bytes characters. (1 and 3 bytes characters are accepted)"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "edited": false, "score": 0, "creation_date": 1528325661, "post_id": 50730589, "comment_id": 88469127, "body": "@ywat I think you are only guessing. And incorrectly. I&#39;m sure they support characters like <code>&#252;</code> and <code>\u0161</code>, which have 2 bytes. What they don&#39;t support is probably characters which are not printable."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "edited": false, "score": 0, "creation_date": 1528326179, "post_id": 50730589, "comment_id": 88469264, "body": "@ywat See my last edit. That may solve your problem."}, {"owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "edited": false, "score": 0, "creation_date": 1528326568, "post_id": 50730589, "comment_id": 88469367, "body": "Thank you! I&#39;ll apply this filter and try uploading."}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": true, "score": 1, "last_activity_date": 1528326402, "last_edit_date": 1528326402, "creation_date": 1528324753, "answer_id": 50730589, "question_id": 50730466, "link": "https://stackoverflow.com/questions/50730466/remove-characters-with-encodings-larger-than-3-bytes-using-python-3/50730589#50730589", "title": "Remove &quot;characters with encodings larger than 3 bytes&quot; using Python 3", "body": "<p>None of the characters in your string seems to take 3 bytes in UTF-8:</p>\n\n<pre><code>x = 'below \u00f0\\x9f~\\x83,'\n</code></pre>\n\n<p>Anyway, the way to remove them, if there were any would be:</p>\n\n<pre><code>filtered_x = ''.join(char for char in x if len(char.encode('utf-8')) &lt; 3)\n</code></pre>\n\n<p>For example (with such characters):</p>\n\n<pre><code>&gt;&gt;&gt; x = 'abcd\u6f22\u5b57efg'\n&gt;&gt;&gt; ''.join(char for char in x if len(char.encode('utf-8')) &lt; 3)\n'abcdefg'\n</code></pre>\n\n<hr>\n\n<p>BTW, you can verify that your original string does not have 3-byte encodings by doing the following:</p>\n\n<pre><code>&gt;&gt;&gt; for char in 'below \u00f0\\x9f~\\x83,':\n...     print(char, [hex(b) for b in char.encode('utf-8')])\n...\nb ['0x62']\ne ['0x65']\nl ['0x6c']\no ['0x6f']\nw ['0x77']\n  ['0x20']\n\u00f0 ['0xc3', '0xb0']\n  ['0xc2', '0x9f']\n~ ['0x7e']\n  ['0xc2', '0x83']\n, ['0x2c']\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT: A wild guess</strong></p>\n\n<p>I believe the OP asks the wrong question and the question is in fact whether the character is printable. I'll assume anything Python displays as <code>\\x&lt;number&gt;</code> is not printable, so this solution should work:</p>\n\n<pre><code>x = 'below \u00f0\\x9f~\\x83,'\nfiltered_x = ''.join(char for char in x if not repr(char).startswith(\"'\\\\x\"))\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>'below \u00f0~,'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1528420365, "creation_date": 1528420365, "answer_id": 50752058, "question_id": 50730466, "link": "https://stackoverflow.com/questions/50730466/remove-characters-with-encodings-larger-than-3-bytes-using-python-3/50752058#50752058", "title": "Remove &quot;characters with encodings larger than 3 bytes&quot; using Python 3", "body": "<p>While indirectly stated, the website only allows characters from the Basic Multilingual Plane (BMP).  That includes Unicode code points U+0000 to U+FFFF.  In UTF-8, it takes four bytes to encode anything above U+FFFF:</p>\n\n<pre><code>&gt;&gt;&gt; '\\uffff'.encode('utf8')\nb'\\xef\\xbf\\xbf'\n&gt;&gt;&gt; '\\U00010000'.encode('utf8')\nb'\\xf0\\x90\\x80\\x80'\n</code></pre>\n\n<p>This filters out Unicode code points above U+FFFF:</p>\n\n<pre><code>&gt;&gt;&gt; test_string = 'abc\u9a6c\u514b\ud83d\ude00' # emoticon is U+1F600\n&gt;&gt;&gt; ''.join(c for c in test_string if ord(c) &lt; 0x10000)\n'abc\u9a6c\u514b'\n</code></pre>\n\n<p>When encoded (note three bytes for each Chinese character):</p>\n\n<pre><code>&gt;&gt;&gt; ''.join(c for c in test_string if ord(c) &lt; 0x10000).encode('utf8')\nb'abc\\xe9\\xa9\\xac\\xe5\\x85\\x8b'\n</code></pre>\n"}], "owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 50730589, "answer_count": 3, "score": 2, "last_activity_date": 1528420365, "creation_date": 1528323780, "last_edit_date": 1528325004, "question_id": 50730466, "link": "https://stackoverflow.com/questions/50730466/remove-characters-with-encodings-larger-than-3-bytes-using-python-3", "title": "Remove &quot;characters with encodings larger than 3 bytes&quot; using Python 3", "body": "<p>I want to remove characters with encodings larger than 3 bytes.\nBecause when I upload my CSV data to Amazon Mechanical Turk system, it asks me to do it.</p>\n\n<blockquote>\n  <p>Your CSV file needs to be UTF-8 encoded and cannot contain characters \n  with encodings larger than 3 bytes. For example, some non-English \n  characters are not allowed (learn more).</p>\n</blockquote>\n\n<p>To overcome this problem,\nI want to make a <code>filter_max3bytes</code> funciton to remove those characters in Python3. </p>\n\n<pre><code>x = 'below \u00f0\\x9f~\\x83,'\ny = remove_max3byes(x)  # y==\"below ~,\"\n</code></pre>\n\n<p>Then I will apply the function before saving it to a CSV file, which is UTF-8 encoded.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25362251/python-process-a-csv-file-to-remove-unicode-characters-greater-than-3-bytes\">This post</a> is related my problem, but they uses python 2 and the solution did not worked for me.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1528325743, "post_id": 50730450, "comment_id": 88469152, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/on-topic\">On topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1528325797, "post_id": 50730450, "comment_id": 88469170, "body": "For starters, calling the function repeatedly will likely use some sort of loop.  Just what depends very much on your program architecture, especially the way you&#39;ve implemented movement in this world."}, {"owner": {"reputation": 3940, "user_id": 3542991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5bed90d1780cc70b4914ca29f46e6ea?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/3542991/arjun"}, "edited": false, "score": 0, "creation_date": 1528327735, "post_id": 50730450, "comment_id": 88469676, "body": "The position of the obstacles would be a function of the &quot;state&quot; of the world, i.e. how has the screen changed since the last call (which i assume is a movement in either direction). Tracking the scrolling would probably happen in a loop where you would make this function call. We need to know a lot more about your architecture to provide a better answer."}], "owner": {"reputation": 11, "user_id": 9856015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bca43722030e8120583a49d76d3c426?s=128&d=identicon&r=PG&f=1", "display_name": "perdue", "link": "https://stackoverflow.com/users/9856015/perdue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 12, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528323654, "creation_date": 1528323654, "question_id": 50730450, "link": "https://stackoverflow.com/questions/50730450/calling-a-function-during-a-scroll-game", "title": "calling a function during a scroll game", "body": "<p>I am making a scroll game for my final project in my computer science class, which is when the background just keeps going on and on (horizontally in my case). I have functions for obstacles and my problem is that I want the function to be called again when the background moves on from the initial 1200x650 screen. Here is an example of the code I used for one of my obstacles. I don't know how to keep calling the function after the background moves on. Thank you!</p>\n\n<pre><code>ox = 1150  \noy = randint(100,500)\nobstaclecount = 0\n\ndef obstacles():\n    global ox,oy\n\nlaserobstacles = screen.blit(obstaclez,(ox,oy))\n\nox -= 10  #moving from right to left on screen\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "if-statement", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 1200, "user_id": 2105333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjpCl.jpg?s=128&g=1", "display_name": "bobrobbob", "link": "https://stackoverflow.com/users/2105333/bobrobbob"}, "is_accepted": false, "score": 1, "last_activity_date": 1528325512, "creation_date": 1528325512, "answer_id": 50730704, "question_id": 50730408, "link": "https://stackoverflow.com/questions/50730408/implementing-if-else-in-python-dataframe-using-lambda-when-there-are-multiple-va/50730704#50730704", "title": "Implementing if-else in python dataframe using lambda when there are multiple variables", "body": "<p>you can do</p>\n\n<pre><code>df.apply(lambda x: x[\"one\"] + x[\"two\"], axis=1)\n</code></pre>\n\n<p>but i don't think that such a long lambda as <code>lambda x: x[\"one\"]*100 if x[\"two\"]&gt;8 else (x[\"one\"]*1 if x[\"two\"]&lt;8 else x[\"one\"]**2)</code> is very pythonic. apply takes any callback:</p>\n\n<pre><code>def my_callback(x):\n    if x[\"two\"] &gt; 8:\n        return x[\"one\"]*100\n    elif x[\"two\"] &lt; 8:\n        return x[\"one\"]\n    else:\n        return x[\"one\"]**2\n\ndf.apply(my_callback, axis=1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "edited": false, "score": 1, "creation_date": 1528383030, "post_id": 50730960, "comment_id": 88496145, "body": "Thanks for you very elaborate response. Even if lambda method is unreadable I just wanted to learn how it works. I was trying myself and figured out the 2nd method, but I couldn&#39;t make the df.isin() method work while using the function. I tried this -     if df[&#39;name&#39;].isin([&#39;a&#39;,&#39;b&#39;]):         df[&#39;one&#39;] = 10         return df[&#39;one&#39;] . But I am getting error &#39;str&#39; object has no attribute isin."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 3, "last_activity_date": 1528328513, "last_edit_date": 1528328513, "creation_date": 1528327346, "answer_id": 50730960, "question_id": 50730408, "link": "https://stackoverflow.com/questions/50730408/implementing-if-else-in-python-dataframe-using-lambda-when-there-are-multiple-va/50730960#50730960", "title": "Implementing if-else in python dataframe using lambda when there are multiple variables", "body": "<h3>Apply across columns</h3>\n\n<p>Use <a href=\"http://pandas.pydata.org/pandas-docs/version/0.22/generated/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\"><code>pd.DataFrame.apply</code></a> instead of <a href=\"https://pandas.pydata.org/pandas-docs/version/0.21/generated/pandas.Series.apply.html\" rel=\"nofollow noreferrer\"><code>pd.Series.apply</code></a> and specify <code>axis=1</code>:</p>\n\n<pre><code>df['one'] = df.apply(lambda row: row['one']*100 if row['two']&gt;8 else \\\n                     (row['one']*1 if row['two']&lt;8 else row['one']**2), axis=1)\n</code></pre>\n\n<p>Unreadable? Yes, I agree. Let's try again but this time rewrite as a named function.</p>\n\n<h3>Using a function</h3>\n\n<p>Note <code>lambda</code> is just an anonymous function. We can define a function explicitly and use it with <code>pd.DataFrame.apply</code>:</p>\n\n<pre><code>def calc(row):\n    if row['two'] &gt; 8:\n        return row['one'] * 100\n    elif row['two'] &lt; 8:\n        return row['one']\n    else:\n        return row['one']**2\n\ndf['one'] = df.apply(calc, axis=1)\n</code></pre>\n\n<p>Readable? Yes. But this isn't vectorised. We're looping through each row one at at at time. We might as well have used a list. Pandas isn't just for clever table formatting, you can use it for vectorised calculations using arrays in contiguous memory blocks. So let's try one more time.</p>\n\n<h3>Vectorised calculations</h3>\n\n<p>Using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\"><code>numpy.where</code></a>:</p>\n\n<pre><code>df['one'] = np.where(row['two'] &gt; 8, row['one'] * 100,\n                     np.where(row['two'] &lt; 8, row['one'],\n                              row['one']**2))\n</code></pre>\n\n<p>There we go. Readable <em>and</em> efficient. We have effectively vectorised our <code>if</code> / <code>else</code> statements. Does this mean that we are doing more calculations than necessary? Yes! But this is more than offset by the <em>way</em> in which we are performing the calculations, i.e. with well-defined blocks of memory rather than pointers. You will find an order of magnitude performance improvement.</p>\n\n<h3>Another example</h3>\n\n<p>Well, we can just use <code>numpy.where</code> again.</p>\n\n<pre><code>df['one'] = np.where(df['name'].isin(['a', 'b']), 100, df['two'])\n</code></pre>\n"}], "owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2272, "favorite_count": 2, "accepted_answer_id": 50730960, "answer_count": 2, "score": 3, "last_activity_date": 1528328513, "creation_date": 1528323337, "last_edit_date": 1528327860, "question_id": 50730408, "link": "https://stackoverflow.com/questions/50730408/implementing-if-else-in-python-dataframe-using-lambda-when-there-are-multiple-va", "title": "Implementing if-else in python dataframe using lambda when there are multiple variables", "body": "<p>I am trying to implement if-elif or if-else logic in python while working on a dataframe. I am struggling when working with more than one column.</p>\n\n<p>sample data frame</p>\n\n<pre><code>df=pd.DataFrame({\"one\":[1,2,3,4,5],\"two\":[6,7,8,9,10], \"name\": 'a', 'b', 'a', 'b', 'c'})\n</code></pre>\n\n<p>If my if-else logic is based on only one column - I know how to do it.</p>\n\n<pre><code>df['one'] = df[\"one\"].apply(lambda x: x*10 if x&lt;2 else (x**2 if x&lt;4 else x+10))\n</code></pre>\n\n<p>But I want to modify column 'one' based on values of column 'two' - and I feel its going be something like this - </p>\n\n<pre><code>lambda x, y: x*100 if y&gt;8 else (x*1 if y&lt;8 else x**2)\n</code></pre>\n\n<p>But I am not sure how to specify the second column. I tried this way but obviously that's incorrect </p>\n\n<pre><code>df['one'] = df[\"one\"][\"two\"].apply(lambda x, y: x*100 if y&gt;8 else (x*1 if y&lt;8 else x**2))\n</code></pre>\n\n<p><strong>Question 1 - what'd be the correct syntax for the above code ?</strong></p>\n\n<p><strong>Question 2 - How to implement below logic using lambda ?</strong></p>\n\n<pre><code>if df['name'].isin(['a','b'])  df['one'] = 100 else df['one'] = df['two']\n</code></pre>\n\n<p>If I write something like x.isin(['a','b']) it won't work.</p>\n"}, {"tags": ["python", "discord.py"], "comments": [{"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 5, "creation_date": 1528323358, "post_id": 50730397, "comment_id": 88468428, "body": "Which line is throwing the error?"}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 1, "creation_date": 1528323546, "post_id": 50730397, "comment_id": 88468483, "body": "It also might be easier to use a dictionary for colors and their hex values rather than two separate lists"}], "answers": [{"tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1528324337, "creation_date": 1528324337, "answer_id": 50730541, "question_id": 50730397, "link": "https://stackoverflow.com/questions/50730397/discord-py-bot-typeerror-init-takes-1-positional-argument-but-2-were-give/50730541#50730541", "title": "Discord.py bot TypeError: __init__() takes 1 positional argument but 2 were given", "body": "<p><code>Bot</code> is a subclass of <code>Client</code>.  You don't need to create both. You can also assign the role a color when you create it.</p>\n\n<pre><code>bot = commands.Bot(command_prefix = \"&gt;\")\n\ncolours = [\"Mint\",\"Green\",\"Blue\",\"Pink\",\"Purple\",\"Yellow\",\"Red\",\"Black\",\"White\",\"Gold\",\"Aqua\"]\ncolourshex = [\"1abc9c\",\"2ecc71\",\"3498db\",\"e91e63\",\"9b59b6\",\"f1c40f\",\"e74c3c\",\"080808\",\"ffffff\",\"ffa800\",\"00e5ff\"]\n\ncolourdict = dict(zip(colours, colourshex))\n\n@bot.command(pass_context=True)\nasync def colours(ctx):\n    for name, hex in colourdict.items():\n        await bot.say(\"Colour-{} {}\".format(name, hex))\n        await bot.create_role(ctx.message.server, name=name, colour=discord.Colour(hex))\n\nbot.run(\"TOKEN\")\n</code></pre>\n\n<p>You would invoke the above with <code>&gt;colours</code></p>\n"}], "owner": {"reputation": 1, "user_id": 9905842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yj3XS.png?s=128&g=1", "display_name": "W4D3N", "link": "https://stackoverflow.com/users/9905842/w4d3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 961, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1528324337, "creation_date": 1528323268, "question_id": 50730397, "link": "https://stackoverflow.com/questions/50730397/discord-py-bot-typeerror-init-takes-1-positional-argument-but-2-were-give", "title": "Discord.py bot TypeError: __init__() takes 1 positional argument but 2 were given", "body": "<p>I am trying to create a section of my Discord.py bot that creates some roles with colours that people can assign. When I try to run this I get the error shown in the question title.</p>\n\n<pre><code># Imports\n\nimport discord\nfrom discord.ext.commands import Bot\nfrom discord.ext import commands\nimport asyncio\n\n\n# Variables\n\nClient = discord.Client()\nclient = commands.Bot(command_prefix = \"&gt;\")\ncolours = [\"Mint\",\"Green\",\"Blue\",\"Pink\",\"Purple\",\"Yellow\",\"Red\",\"Black\",\"White\",\"Gold\",\"Aqua\"]\ncolourshex = [\"1abc9c\",\"2ecc71\",\"3498db\",\"e91e63\",\"9b59b6\",\"f1c40f\",\"e74c3c\",\"080808\",\"ffffff\",\"ffa800\",\"00e5ff\"]\n\n# Enable\n\n\n@client.event\nasync def on_ready():\nprint(\"Welcome to my bot\")\n\n\n# Module commands\n@client.event\nasync def on_message(message):\n    if message.content.lower().startswith(\"&gt;module\"):\n        split = message.content.split(\" \")\n        if split[1].lower() == \"colour\":\n            if split[2].lower() == \"on\":\n                for x in range(0, len(colours)-1):\n                    colourx = \"Colour-%s\" % colours[x]\n                    colourxh = colourshex[x]\n                    colourful = colourx + \" \" + colourxh\n                    await client.send_message(message.channel, colourful)\n                    await client.create_role(message.server, name=colourx)\n                    await client.edit_role(server=message.server, role=discord.Role(colourx), colour=discord.Colour(colourxh))\n</code></pre>\n"}, {"tags": ["python", "recursion", "iteration", "permutation", "distribution"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1528323262, "post_id": 50730359, "comment_id": 88468402, "body": "What exactly is your question? Do you want us to write code that gives the same output but use iteration rather than recursion?"}, {"owner": {"reputation": 497, "user_id": 6871833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fe8d6c50412f3f618dd6716255401f?s=128&d=identicon&r=PG&f=1", "display_name": "Ywapom", "link": "https://stackoverflow.com/users/6871833/ywapom"}, "edited": false, "score": 1, "creation_date": 1528323302, "post_id": 50730359, "comment_id": 88468412, "body": "Perhaps itertools permutations: <a href=\"https://docs.python.org/2/library/itertools.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/itertools.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 106023, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1528340097, "post_id": 50730443, "comment_id": 88472455, "body": "dangit, i just finished writing the same answer before reading yours. No joke, almost <a href=\"https://repl.it/repls/VillainousSneakyKeyboardmacro\" rel=\"nofollow noreferrer\">completely identical</a> :D"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 106023, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1528379970, "post_id": 50730443, "comment_id": 88493869, "body": "@user633183 I really like your solution, as it is even cleaner than mine. I encourage you to undelete it :)"}, {"owner": {"reputation": 106023, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1528385426, "post_id": 50730443, "comment_id": 88497835, "body": "Thanks, I made the answer visible again. Though I just had an idea which might speed it up even more. I&#39;ll see if it works..."}, {"owner": {"reputation": 106023, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 1, "creation_date": 1528391045, "post_id": 50730443, "comment_id": 88500903, "body": "Ajax1234, the tweak seems to have had a big impact. I created a large test case and ended up walking away because it took my first program so long to complete it. I shared the results in an update to my answer :D"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 2, "last_activity_date": 1528324985, "last_edit_date": 1528324985, "creation_date": 1528323627, "answer_id": 50730443, "question_id": 50730359, "link": "https://stackoverflow.com/questions/50730359/iterative-permutations-of-distribution/50730443#50730443", "title": "Iterative Permutations of Distribution", "body": "<p>You can use a generator function for the recursion, while applying additional logic to cut down on the number of recursive calls needed:</p>\n\n<pre><code>def listings(_cat, points, _max, current = []):\n   if len(current) == _cat:\n      yield current\n   else:\n      for i in range(_max+1):\n        if sum(current+[i]) &lt;= points:\n          if sum(current+[i]) == points or len(current+[i]) &lt; _cat:\n             yield from listings(_cat, points, _max, current+[i])\n\n\nprint(list(listings(4, 5, 2)))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[0, 1, 2, 2], [0, 2, 1, 2], [0, 2, 2, 1], [1, 0, 2, 2], [1, 1, 1, 2], [1, 1, 2, 1], [1, 2, 0, 2], [1, 2, 1, 1], [1, 2, 2, 0], [2, 0, 1, 2], [2, 0, 2, 1], [2, 1, 0, 2], [2, 1, 1, 1], [2, 1, 2, 0], [2, 2, 0, 1], [2, 2, 1, 0]]\n</code></pre>\n\n<p>While it is unclear at around what category size your solution drastically slows down, this solution will run under one second for category sizes up to <code>24</code>, searching for a total of five points with a maximum slot value of two. Note that for large point and slot values, the number of possible category sizes computed under a second increases:</p>\n\n<pre><code>import time\n\ndef timeit(f):\n   def wrapper(*args):\n     c = time.time()\n     _ = f(*args)\n     return time.time() - c\n   return wrapper\n\n@timeit\ndef wrap_calls(category_size:int) -&gt; float:\n  _ = list(listings(category_size, 5, 2))\n\nbenchmark = 0\ncategory_size = 1\nwhile benchmark &lt; 1:\n   benchmark = wrap_calls(category_size)\n   category_size += 1\n\nprint(category_size)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>24\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106023, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": true, "score": 3, "last_activity_date": 1528400428, "last_edit_date": 1528400428, "creation_date": 1528346609, "answer_id": 50733087, "question_id": 50730359, "link": "https://stackoverflow.com/questions/50730359/iterative-permutations-of-distribution/50733087#50733087", "title": "Iterative Permutations of Distribution", "body": "<p><strong>recursion isn't slow</strong></p>\n\n<p>Recursion isn't what's making it slow; consider a better algorithm</p>\n\n<pre><code>def dist (count, limit, points, acc = []):\n  if count is 0:\n    if sum (acc) is points:\n      yield acc\n  else:\n    for x in range (limit + 1):\n      yield from dist (count - 1, limit, points, acc + [x])\n</code></pre>\n\n<p>You can collect the generated results in a list</p>\n\n<pre><code>print (list (dist (count = 4, limit = 2, points = 5)))\n</code></pre>\n\n<p><strong>pruning invalid combinations</strong></p>\n\n<p>Above, we use a fixed range of <code>limit + 1</code>, but watch what happens if we're generating a combination with a (eg) <code>limit = 2</code> and <code>points = 5</code> ...</p>\n\n<pre><code>[ 2, ... ]    # 3 points remaining\n[ 2, 2, ... ] # 1 point remaining\n</code></pre>\n\n<p>At this point, using a fixed range of <code>limit + 1</code> (<code>[ 0, 1, 2 ]</code>) is silly because we know we only have 1 point remaining to spend. The only remaining options here are <code>0</code> or <code>1</code>...</p>\n\n<pre><code>[ 2, 2, 1 ... ] # 0 points remaining\n</code></pre>\n\n<p>Above we know we can use an empty range of <code>[ 0 ]</code> because there's no points left to spend. This will prevent us from attempting to validate combinations like</p>\n\n<pre><code>[ 2, 2, 2, ... ] # -1 points remaining\n[ 2, 2, 2, 0, ... ] # -1 points remaining\n[ 2, 2, 2, 1, ... ] # -2 points remaining\n[ 2, 2, 2, 2, ... ] # -3 points remaining\n</code></pre>\n\n<p>If <code>count</code> was significantly large, this could rule out a <em>huge</em> amount of invalid combinations</p>\n\n<pre><code>[ 2, 2, 2, 2, 2, 2, 2, 2, 2, ... ] # -15 points remaining \n</code></pre>\n\n<p>To implement this optimization, we could add yet another parameter to our <code>dist</code> function, but at 5 parameters, it would start to look messy. Instead we introduce an auxiliary function to control the <code>loop</code>. Adding our optimization, we trade the fixed range for a <em>dynamic</em> range of <code>min (limit, remaining) + 1</code>. And finally, since we know how many points have been allocated, we no longer need to test the <code>sum</code> of each combination; yet another expensive operation removed from our algorithm</p>\n\n<pre><code># revision: prune invalid combinations\ndef dist (count, limit, points):\n  def loop (count, remaining, acc):\n    if count is 0:\n      if remaining is 0:\n        yield acc\n    else:\n      for x in range (min (limit, remaining) + 1):\n        yield from loop (count - 1, remaining - x, acc + [x])\n  yield from loop (count, points, [])\n</code></pre>\n\n<p><strong>benchmarks</strong></p>\n\n<p>In the benchmarks below, the first version of our program is renamed to <code>dist1</code> and the faster program using a dynamic range <code>dist2</code>. We setup three tests, <code>small</code>, <code>medium</code>, and <code>large</code></p>\n\n<pre><code>def small (prg):\n  return list (prg (count = 4, limit = 2, points = 5))\n\ndef medium (prg):\n  return list (prg (count = 8, limit = 3, points = 7))\n\ndef large (prg):\n  return list (prg (count = 16, limit = 5, points = 10))\n</code></pre>\n\n<p>And now we run the tests, passing each program as an argument. Note for the <code>large</code> test, only 1 pass is done as <code>dist1</code> takes awhile to generate the result</p>\n\n<pre><code>print (timeit ('small (dist1)', number = 10000, globals = globals ()))\nprint (timeit ('small (dist2)', number = 10000, globals = globals ()))\n\nprint (timeit ('medium (dist1)', number = 100, globals = globals ()))\nprint (timeit ('medium (dist2)', number = 100, globals = globals ()))\n\nprint (timeit ('large (dist1)', number = 1, globals = globals ()))\nprint (timeit ('large (dist2)', number = 1, globals = globals ()))\n</code></pre>\n\n<p>The results for the <code>small</code> test show that pruning invalid combinations doesn't make much of a difference. However in the <code>medium</code> and <code>large</code> cases, the difference is dramatic. Our old program takes over 30 minutes for the large set, but just over 1 second using the new program!</p>\n\n<pre class=\"lang-none prettyprint-override\"><code><i>dist1 small</i>      0.8512216459494084\n<i>dist2 small</i>      0.8610155049245805   <i>(0.98x speed-up)</i>\n\n<i>dist1 medium</i>     6.142372329952195\n<i>dist2 medium</i>     0.9355670949444175   <i>(6.57x speed-up)</i>\n\n<i>dist1 large</i>   1933.0877765258774\n<i>dist2 large</i>      1.4107366011012346   <i>(1370.26x speed-up)</i></code></pre>\n\n<p>For frame of reference, the size of each result is printed below</p>\n\n<pre><code>print (len (small (dist2)))   # 16      (this is the example in your question)\nprint (len (medium (dist2)))  # 2472\nprint (len (large (dist2)))   # 336336\n</code></pre>\n\n<p><strong>checking our understanding</strong></p>\n\n<p>In the <code>large</code> benchmark with <code>count = 12</code> and <code>limit = 5</code>, using our unoptimized program we were iterating through 5<sup>12</sup>, or 244,140,625 <em>possible</em> combinations. Using our optimized program, we skip all invalid combinations resulting in 336,336 valid answers. By analyzing combination count alone, we see a staggering 99.86% of <em>possible</em> combinations are invalid. If analysis of each combination costs an equal amount of time, we can expect our optimized program to perform at a minimum of 725.88x better, due to invalid combination pruning.</p>\n\n<p>In the <code>large</code> benchmark, measured at 1370.26x faster, the optimized program meets our expectations and even goes beyond. The additional speed-up is likely owed to the fact we eliminated the call to <code>sum</code></p>\n\n<p><strong>huuuuge</strong></p>\n\n<p>To show this technique works for extremely large data sets, consider the <code>huge</code> benchmark. Our program finds 17,321,844 valid combinations amongst 7<sup>16</sup>, or 33,232,930,569,601 possibilities.</p>\n\n<p>In this test, our optimized program prunes 99.99479% of the invalid combinations. Correlating these numbers to the previous data set, we estimate the optimized program runs 1,918,556.16x faster than the unoptimized version.</p>\n\n<p>The theoretical running time of this benchmark using the unoptimized program is <strong>117.60 years</strong>. The optimized program finds the answer in just over 1 minute.</p>\n\n<pre><code>def huge (prg):\n  return list (prg (count = 16, limit = 7, points = 12))\n\nprint (timeit ('huge (dist2)', number = 1, globals = globals ()))\n# 68.06868170504458\n\nprint (len (huge (dist2)))\n# 17321844\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 6664574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3e3902314c80b32db794ce98c707f05?s=128&d=identicon&r=PG&f=1", "display_name": "Eastonium", "link": "https://stackoverflow.com/users/6664574/eastonium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 2, "accepted_answer_id": 50733087, "answer_count": 2, "score": 2, "last_activity_date": 1528400428, "creation_date": 1528323027, "question_id": 50730359, "link": "https://stackoverflow.com/questions/50730359/iterative-permutations-of-distribution", "title": "Iterative Permutations of Distribution", "body": "<p>I'm trying to generate all possible combinations of a distribution of sorts.</p>\n\n<p>For example, say you have 5 points to spend on 4 categories, but you can only spend a maximum of 2 points on any given category.\nIn this instance, all possible solutions would be as follows:</p>\n\n<pre><code>[0, 1, 2, 2]\n[0, 2, 1, 2]\n[0, 2, 2, 1]\n[1, 0, 2, 2]\n[1, 1, 1, 2]\n[1, 1, 2, 1]\n[1, 2, 0, 2]\n[1, 2, 1, 1]\n[1, 2, 2, 0]\n[2, 0, 1, 2]\n[2, 0, 2, 1]\n[2, 1, 0, 2]\n[2, 1, 1, 1]\n[2, 1, 2, 0]\n[2, 2, 0, 1]\n[2, 2, 1, 0]\n</code></pre>\n\n<p>I have successfully been able to make a recursive function that accomplishes this, but for larger numbers of categories it takes extremely long to generate. I have attempted making an iterative function instead in hopes of speeding it up, but I can't seem to get it to account for the category maximums.</p>\n\n<p>Here is my recursive function (count = points, dist = zero-filled array w/ same size as max_allo)</p>\n\n<pre><code>def distribute_recursive(count, max_allo, dist, depth=0):\n    for ration in range(max(count - sum(max_allo[depth + 1:]), 0), min(count, max_allo[depth]) + 1):\n        dist[depth] = ration\n        count -= ration\n        if depth + 1 &lt; len(dist):\n            distribute_recursive(count, max_allo, dist, depth + 1)\n        else:\n            print(dist)\n        count += ration\n</code></pre>\n"}, {"tags": ["python", "django", "google-cloud-platform"], "answers": [{"tags": [], "owner": {"reputation": 1837, "user_id": 7958995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/707cfe34ea3622520bc4cd33a09b8218?s=128&d=identicon&r=PG&f=1", "display_name": "Armin_SC", "link": "https://stackoverflow.com/users/7958995/armin-sc"}, "is_accepted": false, "score": 1, "last_activity_date": 1539263668, "creation_date": 1539263668, "answer_id": 52761010, "question_id": 50730358, "link": "https://stackoverflow.com/questions/50730358/dataflow-failed-with-return-code-1-with-airflow-dataflowhook-start-python-datafl/52761010#52761010", "title": "DataFlow failed with return code 1 with Airflow DataflowHook.start_python_dataflow", "body": "<p>This issue can be avoided by using the <a href=\"https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fapache%2Fincubator-airflow%2Fblob%2Fmaster%2Fairflow%2Fcontrib%2Foperators%2Fdataflow_operator.py%23L254&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFCe-s63u4IpjTtBgI-D0JH_RMEMg\" rel=\"nofollow noreferrer\">DataflowPythonOperator</a> and installing the <code>gcp_variant_transforms</code> API in the cloud instance.</p>\n\n<p><strong>Command to install the required components:</strong></p>\n\n<pre><code>sudo pip install git+https://github.com/googlegenomics/gcp-variant-transforms.git\n</code></pre>\n\n<p>In case someone have this issue as well, you can take a look on this <a href=\"https://groups.google.com/forum/#!msg/cloud-composer-discuss/Ycq8OVwMjjk/A-OydsS7AwAJ\" rel=\"nofollow noreferrer\">post</a> where it is described a detailed explanation of the steps that <a href=\"https://stackoverflow.com/users/2272548/srikanth\">srikanth</a> followed to execute the code successfully.</p>\n"}], "owner": {"reputation": 1, "user_id": 2272548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0fb474ed1ca916ddd0238c443a735?s=128&d=identicon&r=PG", "display_name": "srikanth", "link": "https://stackoverflow.com/users/2272548/srikanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539263668, "creation_date": 1528323026, "question_id": 50730358, "link": "https://stackoverflow.com/questions/50730358/dataflow-failed-with-return-code-1-with-airflow-dataflowhook-start-python-datafl", "title": "DataFlow failed with return code 1 with Airflow DataflowHook.start_python_dataflow", "body": "<p>And this is my code below.</p>\n\n<p>I am getting the below error, when I run the below code. I am trying to transform gvcf/vcf files in my google cloud storage to bigquery using gcp-variant-transforms api. </p>\n\n<p>[2018-06-06 16:46:42,589] {models.py:1428} INFO - Executing  on 2018-06-06 21:46:34.252526\n[2018-06-06 16:46:42,589] {base_task_runner.py:115} INFO - Running: ['bash', '-c', u'airflow run GcsToBigQuery gcsToBigquery_ID 2018-06-06T21:46:34.252526 --job_id 168 --raw -sd DAGS_FOLDER/GcsToBigQuery.py']\n[2018-06-06 16:46:43,204] {base_task_runner.py:98} INFO - Subtask: [2018-06-06 16:46:43,202] {<strong>init</strong>.py:45} INFO - Using executor SequentialExecutor\n[2018-06-06 16:46:43,284] {base_task_runner.py:98} INFO - Subtask: [2018-06-06 16:46:43,283] {models.py:189} INFO - Filling up the DagBag from /apps/airflow/dags/GcsToBigQuery.py\n[2018-06-06 16:46:43,853] {base_task_runner.py:98} INFO - Subtask: [2018-06-06 16:46:43,852] {gcp_dataflow_hook.py:111} INFO - Start waiting for DataFlow process to complete.\n[2018-06-06 16:46:46,931] {base_task_runner.py:98} INFO - Subtask: [2018-06-06 16:46:46,930] {GcsToBigQuery.py:48} ERROR - Status : FAIL : gcsToBigquery: Not able to run: <strong>DataFlow failed with return code 1</strong>\n[2018-06-06 16:46:46,931] {base_task_runner.py:98} INFO - Subtask: [2018-06-06 16:46:46,930] {python_operator.py:90} INFO - Done. Returned value was: None   </p>\n\n<p>Please help me with this issue. Thanks! </p>\n\n<pre><code>from datetime import datetime, timedelta\nfrom airflow import DAG\nfrom airflow.contrib.hooks.gcp_dataflow_hook import DataFlowHook\nfrom airflow.operators.python_operator import PythonOperator\nimport logging\n\ndefault_args = {\n    'owner': 'My Name',\n    'depends_on_past': False,\n    'start_date': datetime(2018, 6, 6),\n    'email': ['MY Email'],\n    'email_on_failure': True,\n    'email_on_retry': False,\n    'retries': 2,\n    'retry_delay': timedelta(minutes=5)\n}\n\ndag = DAG('GcsToBigQuery', default_args=default_args,\n          description='To move GVCF/VCF files from Google Cloud Storage to Big Query',\n          schedule_interval='@once',\n          start_date=datetime(2018, 6, 6))\n\ndataflow_py_file = 'gcp_variant_transforms.vcf_to_bq'\nPY_OPTIONS = ['-m']\n\nDATAFLOW_OPTIONS_PY = {\n    \"project\": \"project-Name\",\n    \"input_pattern\": \"gs://test-gvcf/1000-genomes.vcf\",\n    \"output_table\": \"trc-mayo-projectsample:1000genomicsID.1000_genomesSamp\",\n     \"staging_location\": \"gs://test-gvcf/vcftobq/staging\",\n     \"temp_location\": \"gs://test-gvcf/vcftobq/temp\",\n     \"job_name\": \"dataflowstarter25\",\n     #\"setup_file\": \"./setup.py\",\n     \"runner\": \"DataflowRunner\"\n}\n\n\ndef gcsToBigquery():\n    try:\n        dataflowHook = DataFlowHook(gcp_conn_id='google_cloud_platform_id')\n        dataflowHook.start_python_dataflow(task_id='dataflowStarter2_ID', variables=DATAFLOW_OPTIONS_PY,\n                                       dataflow=dataflow_py_file, py_options=PY_OPTIONS)\n    except Exception as e:\n        logging.error(\"Status : FAIL : gcsToBigquery: Not able to run: \" + str(e.message))\n\ngcsToBigquery_task = PythonOperator(task_id='gcsToBigquery_ID',\n                                    python_callable=gcsToBigquery,\n                                    dag=dag)\n</code></pre>\n"}, {"tags": ["python", "json", "python-2.7", "recursion", "defaultdict"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1528325539, "post_id": 50730315, "comment_id": 88469090, "body": "<code>ni[&#39;a&#39;][0]</code> is referencing the first element of the <b><code>list</code></b> value associated with key <code>&#39;a&#39;</code>. The zero in <code>[0]</code>) is an index, not a dictionary key (because <code>d</code> is just a plain <code>dict</code>), so you&#39;re trying to mix a dictionary of lists of dictionaries with a recursive <code>defaultdict</code>. This means you need to write code to convert it similar to what&#39;s in <a href=\"https://stackoverflow.com/a/50730573/355230\">@jwg&#39;s answer</a> below."}], "answers": [{"tags": [], "owner": {"reputation": 4731, "user_id": 1737957, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SiIu7.png?s=128&g=1", "display_name": "jwg", "link": "https://stackoverflow.com/users/1737957/jwg"}, "is_accepted": true, "score": 4, "last_activity_date": 1528324585, "creation_date": 1528324585, "answer_id": 50730573, "question_id": 50730315, "link": "https://stackoverflow.com/questions/50730315/how-to-convert-dict-into-recursive-defaultdict-and-load-json/50730573#50730573", "title": "How to convert dict into recursive defaultdict and load JSON?", "body": "<p>It's not enough to create a recursive dict. You have to load the JSON object into your dict recursively.</p>\n\n<p>What happens in your code is that <code>ni['a']</code> is a normal dict, not a dict of type <code>nd</code>. When you run <code>ni.update(d)</code>, update isn't clever enough to traverse <code>d</code>, writing objects on each level into objects of similar type. Instead, it just copies the first-level values and keys of <code>d</code> into <code>ni</code>. The first-level values are just ordinary dicts or whatever.</p>\n\n<p>To initialize <code>ni</code> correctly, you need to write a recursive function which determines whether each value is a dict, array or scalar. If it's a dict, it has to call <code>nd</code>, and then fill the result with values for which it will act in the same recursive way.</p>\n\n<p>OR, you can use the argument <code>object_hook</code> to <code>json.loads</code>. See <a href=\"https://docs.python.org/2/library/json.html#json.load\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/json.html#json.load</a> for details. Whatever function you pass here will be called on each dict created at any level of parsing. So the function</p>\n\n<pre><code>def defaultdict_from_dict(d):\n    nd = lambda: defaultdict(nd)\n    ni = nd()\n    ni.update(d)\n    return ni\n</code></pre>\n\n<p>or something similar would probably do the trick for you.</p>\n"}], "owner": {"reputation": 13, "user_id": 5899363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a82f67192233df9c0034b8bd6a8f617?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Popov", "link": "https://stackoverflow.com/users/5899363/vladimir-popov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1848, "favorite_count": 0, "accepted_answer_id": 50730573, "answer_count": 1, "score": 1, "last_activity_date": 1546765760, "creation_date": 1528322776, "last_edit_date": 1546765760, "question_id": 50730315, "link": "https://stackoverflow.com/questions/50730315/how-to-convert-dict-into-recursive-defaultdict-and-load-json", "title": "How to convert dict into recursive defaultdict and load JSON?", "body": "<p>Is any way to load JSON code into the recursive <code>defaultdict</code> to avoid <code>KeyError</code>, using Python 2.7?</p>\n\n<p>For example:</p>\n\n<pre><code>from __future__ import print_function\nfrom collections import defaultdict\nimport json\n\nS =  '{\"a\": [{\"b\": \"TEST1\", \"p\": \"TEST2\"}, {\"b\": \"TEST3\", \"p\": \"TEST4\"}]}'\n\nd = json.loads(S)\nnd = lambda: defaultdict(nd)\nni = nd()\nprint('1: ', ni['a'][0]['b'])\nni.update(d)\nprint('2: ', ni['a'][0]['b'])\nprint('3: ', ni['a'][1]['p'])\nprint('4: ', ni['a'][1]['c'])\n</code></pre>\n\n<p>Result</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1:  defaultdict(&lt;function &lt;lambda&gt; at 0x0266F530&gt;, {})\n2:  TEST1\n3:  TEST4\nTraceback (most recent call last):\n  File \"C:/...\", line 16, in &lt;module&gt;\n    print('4: ', ni['a'][1]['c'])\nKeyError: 'c'\n</code></pre>\n\n<p>It looks like after <code>ni.update(d)</code> <code>ni</code> works as <code>dict</code>, and not like recursive <code>defaultdict</code>. Is any way to add <code>dict</code> into a recursive <code>defaultdict</code> and keep its properties?</p>\n\n<p>I would expect result on the step 4 similar to the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>4:  defaultdict(&lt;function &lt;lambda&gt; at 0x0266F530&gt;, {})\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1528322745, "post_id": 50730294, "comment_id": 88468261, "body": "Your function recurses infinitely."}, {"owner": {"reputation": 21, "user_id": 5097014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b104bb26949c5b4ebf26f5424d647d46?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/5097014/nishant"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1528322790, "post_id": 50730294, "comment_id": 88468283, "body": "I was able to fix it by removing &quot;return&quot; and simply calling &quot;odd_or_even()&quot;. Is that the ideal solution?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1528322859, "post_id": 50730294, "comment_id": 88468299, "body": "@Nishant: Far from ideal; for example, it should take <code>number</code> as a parameter, as opposed to using a global variable."}, {"owner": {"reputation": 21, "user_id": 5097014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b104bb26949c5b4ebf26f5424d647d46?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/5097014/nishant"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1528323063, "post_id": 50730294, "comment_id": 88468350, "body": "Can I add code in comments? I removed the global variable and made it look like &quot;odd_or_even(int(input(&quot;Please enter a number of your choice: &quot;))) &quot;. Is that what you were referring to @Scott"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1528323137, "post_id": 50730294, "comment_id": 88468373, "body": "Look at @HunterM267&#39;s answer."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1528323184, "post_id": 50730294, "comment_id": 88468381, "body": "It&#39;s better to ask a new question\u2014changing the code in an already posted question (as a result of other&#39;s comments) generally is not a good idea because it changes the question."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1528322786, "creation_date": 1528322786, "answer_id": 50730317, "question_id": 50730294, "link": "https://stackoverflow.com/questions/50730294/printing-the-results-of-my-function/50730317#50730317", "title": "Printing the results of my function", "body": "<ol>\n<li>Your function <code>odd_or_even</code> calls itself at the last line, which means it will never return anything.</li>\n<li>That hasn't caused a problem (yet), because you never call <code>odd_or_even</code> from anywhere else.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "is_accepted": false, "score": 0, "last_activity_date": 1528322851, "creation_date": 1528322851, "answer_id": 50730329, "question_id": 50730294, "link": "https://stackoverflow.com/questions/50730294/printing-the-results-of-my-function/50730329#50730329", "title": "Printing the results of my function", "body": "<p>You need to pass the <code>number</code> variable into your <code>odd_or_even</code> function. You may also want to call the function.</p>\n\n<pre><code>number = int(input(\"Please enter a number of your choice: \"))   \nodd_or_even(number) #call function with number variable\n\ndef odd_or_even(number):   #define function and pass number parameter                                                       \n   if number % 2 == 0:                                                         \n      print(\"You've entered an Even number :)\")                               \n   else:                                                                       \n      print(\"You've enterd an Odd number.\")                                                                                                           \n   return #end function\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/33466860/expected-two-blank-lines-pep8-warning-in-python\">expected two blank lines pep8 warning in python</a> should answer your question relating to line 2.</p>\n"}, {"comments": [{"owner": {"reputation": 5728, "user_id": 7907591, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vpof.jpg?s=128&g=1", "display_name": "Morse", "link": "https://stackoverflow.com/users/7907591/morse"}, "edited": false, "score": 0, "creation_date": 1528326025, "post_id": 50730467, "comment_id": 88469224, "body": "Use formatting tools to make your post more readable. Code block should look like <code>code block</code>. Use <b>bold</b> <i>italics</i> if needed."}], "tags": [], "owner": {"reputation": 26, "user_id": 6725950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1714ba8955b7b51cc9b7b5892be30d3?s=128&d=identicon&r=PG&f=1", "display_name": "SDET", "link": "https://stackoverflow.com/users/6725950/sdet"}, "is_accepted": true, "score": 0, "last_activity_date": 1528338518, "last_edit_date": 1592644375, "creation_date": 1528323787, "answer_id": 50730467, "question_id": 50730294, "link": "https://stackoverflow.com/questions/50730294/printing-the-results-of-my-function/50730467#50730467", "title": "Printing the results of my function", "body": "<p><strong>1st:</strong> I would write your function definition above the code that calls it.<br />\n<strong>2nd:</strong> In line 8, the statement: return odd_or_even() makes it a recursive function. It can be fixed by removing the call to your function.</p>\n<h3>Like this:</h3>\n<pre><code>def odd_or_even(number):\n     if number % 2 == 0:\n          print(&quot;You've entered an Even number :)&quot;)\n     else:\n          print(&quot;You've enterd an Odd number.&quot;)\n     return \n\nnumber = int(input(&quot;Please enter a number of your choice: &quot;))\nodd_or_even(number)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5097014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b104bb26949c5b4ebf26f5424d647d46?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/5097014/nishant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 50730467, "answer_count": 3, "score": 0, "last_activity_date": 1528338518, "creation_date": 1528322635, "last_edit_date": 1528322987, "question_id": 50730294, "link": "https://stackoverflow.com/questions/50730294/printing-the-results-of-my-function", "title": "Printing the results of my function", "body": "<p>Its a very noob question, I am trying my hands on python and going through <a href=\"https://www.practicepython.org/exercise/2014/02/05/02-odd-or-even.html\" rel=\"nofollow noreferrer\">this</a> exercise right now. Their solution suggests it could actually be done without creating any function which makes it easier, however, I am still wondering why my function wouldn't work.</p>\n\n<p>Here's what my code looks like:</p>\n\n<pre><code>    1 number = int(input(\"Please enter a number of your choice: \"))\nCC  2 def odd_or_even():\n    3     if number % 2 == 0:\n    4         print(\"You've entered an Even number :)\")\n    5     else:\n    6         print(\"You've enterd an Odd number.\")\n    7\n    8     return odd_or_even()\n</code></pre>\n\n<p>Also, you'll notice I have a warning on second line which reads:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>oddOrEven.py|2 col 1 C| E302 expected 2 blank lines, found 0 [pep8]\n</code></pre>\n\n<p>in my vim. Can someone explain what exactly's wrong there?</p>\n"}, {"tags": ["python", "mysql"], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 9902833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e14e22aadeca21e4520bd3e8f800f?s=128&d=identicon&r=PG&f=1", "display_name": "Zach ", "link": "https://stackoverflow.com/users/9902833/zach"}, "edited": false, "score": 0, "creation_date": 1528525554, "post_id": 50730854, "comment_id": 88550511, "body": "Worked! Thanks for the help!"}], "tags": [], "owner": {"reputation": 4715, "user_id": 4534687, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50519a4d49a1bd330a8686bb9c237b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph Aleph", "link": "https://stackoverflow.com/users/4534687/aleph-aleph"}, "is_accepted": true, "score": 0, "last_activity_date": 1528326535, "creation_date": 1528326535, "answer_id": 50730854, "question_id": 50730264, "link": "https://stackoverflow.com/questions/50730264/python-mysql-attributeerror-function-object-has-no-attribute-translate/50730854#50730854", "title": "Python_MySQL: AttributeError: &#39;function&#39; object has no attribute &#39;translate&#39;", "body": "<p>You forgot to add parentheses in <code>get_text</code> function call, should be:</p>\n\n<pre><code>content = bs.find('div', {'id':'mw-content-text'}).find('p').get_text()\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 9902833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e14e22aadeca21e4520bd3e8f800f?s=128&d=identicon&r=PG&f=1", "display_name": "Zach ", "link": "https://stackoverflow.com/users/9902833/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3007, "favorite_count": 0, "accepted_answer_id": 50730854, "answer_count": 1, "score": 3, "last_activity_date": 1528326535, "creation_date": 1528322443, "question_id": 50730264, "link": "https://stackoverflow.com/questions/50730264/python-mysql-attributeerror-function-object-has-no-attribute-translate", "title": "Python_MySQL: AttributeError: &#39;function&#39; object has no attribute &#39;translate&#39;", "body": "<p>When running the following code python code I get the following code:</p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nimport datetime\nimport random\nimport pymysql\nimport re\n\nconn = pymysql.connect(host='127.0.0.1', user='root', passwd ='mypass', \ndb='mysql',charset='utf8')\n\ncur = conn.cursor()\ncur.execute('USE scraping')\n\nrandom.seed(datetime.datetime.now())\n\ndef store(title, content):\n\n    cur.execute(\"DROP TABLE IF EXISTS pages\")\n\n     sql = \"\"\"CREATE TABLE pages (id BIGINT(7) NOT NULL AUTO_INCREMENT, title VARCHAR(200)\n        , content VARCHAR(10000), created TIMESTAMP DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY(id))\"\"\"\ncur.execute(sql)\n\ncur.execute(\"\"\"INSERT INTO pages (title, content) VALUES (\"%s\", \"%s\")\"\"\", (title, content))\ncur.connection.commit()\n\ndef getLinks(articleUrl):\n     html = urlopen('http://en.wikipedia.org'+articleUrl)\n     bs = BeautifulSoup(html, 'html.parser')\n     title = bs.find('h1').get_text()\n     content = bs.find('div', {'id':'mw-content-text'}).find('p').get_text\n     store(title, content)\n     #return bs.find('div',{'id':'bodyContent'}).findAll('a',href=re.compile('^(/wiki/)((?!:).)*$'))\n\nlinks = getLinks('/wiki/Kevin_Bacon')\n#print(links)\n</code></pre>\n\n<p>I get the following error message:</p>\n\n<pre><code>  AttributeError: 'function' object has no attribute 'translate'\n</code></pre>\n\n<p>From what I can tell the failure point seems to be at this point in the code:</p>\n\n<pre><code>cur.execute(\"\"\"INSERT INTO pages (title, content) VALUES (\"%s\", \"%s\")\"\"\", (title, content))\n</code></pre>\n\n<p>I've tried trouble shooting the issue by looking at the following:</p>\n\n<pre><code>- File \"C:\\Users\\mypath\\PycharmProjects\\Scraper\\venv\\lib\\site-packages\\pymysql\\converters.py\", line 118, in escape_unicode\nreturn u\"'%s'\" % _escape_unicode(value)\n\n- File \"C:\\Users\\mypath\\PycharmProjects\\Scraper\\venv\\lib\\site-packages\\pymysql\\converters.py\", line 73, in _escape_unicode\nreturn value.translate(_escape_table)\n</code></pre>\n\n<p>Any thoughts on what might be causing the issue?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1528322538, "creation_date": 1528322538, "answer_id": 50730274, "question_id": 50730260, "link": "https://stackoverflow.com/questions/50730260/pandas-data-manipulation-multiple-measurements-per-line-to-one-per-line/50730274#50730274", "title": "Pandas data manipulation - multiple measurements per line to one per line", "body": "<p>Its' a wide to long problem </p>\n\n<pre><code>pd.wide_to_long(df,'Meas',i=['Location','Nominal'],j='drop').reset_index().drop('drop',1)\nOut[637]: \n  Location  Nominal  Meas\n0        A      4.0   3.8\n1        A      4.0   4.1\n2        A      4.0   4.3\n3        B      9.0   8.7\n4        B      9.0   8.9\n5        B      9.0   9.1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 0, "last_activity_date": 1528323582, "last_edit_date": 1528323582, "creation_date": 1528322856, "answer_id": 50730330, "question_id": 50730260, "link": "https://stackoverflow.com/questions/50730260/pandas-data-manipulation-multiple-measurements-per-line-to-one-per-line/50730330#50730330", "title": "Pandas data manipulation - multiple measurements per line to one per line", "body": "<p>Another solution, using <a href=\"https://www.google.ca/search?q=pandas+melt&amp;rlz=1C5CHFA_enGB564GB564&amp;oq=pandas+melt&amp;aqs=chrome..69i57j69i60l2j69i59l2.1287j0j4&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\"><code>melt</code></a>:</p>\n\n<pre><code>new_df = (df.melt(['Location','Nominal'],\n                  ['Meas1', 'Meas2', 'Meas3'],\n                  value_name = 'Meas')\n          .drop('variable', axis=1)\n          .sort_values('Location'))\n\n&gt;&gt;&gt; new_df\n  Location  Nominal  Meas\n0        A      4.0   3.8\n2        A      4.0   4.1\n4        A      4.0   4.3\n1        B      9.0   8.7\n3        B      9.0   8.9\n5        B      9.0   9.1\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9905709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hqb7iuk6t9Q/AAAAAAAAAAI/AAAAAAABCBk/7j2Q-ruXfKs/photo.jpg?sz=128", "display_name": "Andrew Winter", "link": "https://stackoverflow.com/users/9905709/andrew-winter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1528325011, "accepted_answer_id": 50730274, "answer_count": 2, "score": 2, "last_activity_date": 1528323582, "creation_date": 1528322429, "question_id": 50730260, "link": "https://stackoverflow.com/questions/50730260/pandas-data-manipulation-multiple-measurements-per-line-to-one-per-line", "closed_reason": "Duplicate", "title": "Pandas data manipulation - multiple measurements per line to one per line", "body": "<p>I am manipulating a data frame using Pandas in Python to match a specific format.</p>\n\n<p>I currently have a data frame with a row for each measurement location (A or B). Each row has a nominal target and multiple measured data points.</p>\n\n<p>This is the format I currently have:</p>\n\n<pre><code>df=\n    Location    Nominal Meas1   Meas2   Meas3\n    A           4.0     3.8     4.1     4.3\n    B           9.0     8.7     8.9     9.1\n</code></pre>\n\n<p>I need to manipulate this data so there is only one measured data point per row, and copy the Location and Nominal values from the source rows to the new rows. The measured data also needs to be put in the first column.</p>\n\n<p>This is the format I need:</p>\n\n<pre><code>df =\n     Meas       Location    Nominal\n     3.8        A           4.0\n     4.1        A           4.0\n     4.3        A           4.0\n     8.7        B           9.0\n     8.9        B           9.0\n     9.1        B           9.0\n</code></pre>\n\n<p>I have tried concat and append functions with and without transpose() with no success.</p>\n\n<p>This is the most similar example I was able to find, but it did not get me there:</p>\n\n<pre><code>for index, row in df.iterrows():\n    pd.concat([row]*3, ignore_index=True)\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1528322530, "post_id": 50730233, "comment_id": 88468204, "body": "I think you meant to <i>call</i> <code>convert</code>. Not assign it to Dice4"}, {"owner": {"reputation": 8541, "user_id": 8366499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9t89.jpg?s=128&g=1", "display_name": "divibisan", "link": "https://stackoverflow.com/users/8366499/divibisan"}, "edited": false, "score": 0, "creation_date": 1528323063, "post_id": 50730233, "comment_id": 88468351, "body": "Please post your code as text in your question rather than relying on outside links."}, {"owner": {"reputation": 3, "user_id": 9905822, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uHEvsBo5LAU/AAAAAAAAAAI/AAAAAAAAAHY/247GV5gpzOg/photo.jpg?sz=128", "display_name": "user9905822", "link": "https://stackoverflow.com/users/9905822/user9905822"}, "edited": false, "score": 0, "creation_date": 1528328045, "post_id": 50730233, "comment_id": 88469753, "body": "can&#39;t, the editor tells me i have too much code"}], "answers": [{"tags": [], "owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "is_accepted": true, "score": 0, "last_activity_date": 1528350993, "creation_date": 1528350993, "answer_id": 50733872, "question_id": 50730233, "link": "https://stackoverflow.com/questions/50730233/typeerror-argument-1-must-be-pygame-surface-not-builtin-function-or-method/50733872#50733872", "title": "TypeError: argument 1 must be pygame.Surface, not builtin_function_or_method", "body": "<p>As the error message tells you, you have to pass an <code>Surface</code> to the blit function.</p>\n\n<p>If you look at these lines of your code:</p>\n\n<pre><code>Dice4 = pygame.image.load(\"dice_4.png\").convert\n...\ndice4img = Dice4\n</code></pre>\n\n<p>you can see that <code>Dice4</code> / <code>dice4img</code> are references to the <code>convert</code> function. Again, that's also something the error message tells you (<em>not builtin_function_or_method</em>).</p>\n\n<p>You have to actually call the <code>convert</code> function so it returns a <code>Surface</code> and assign it to the <code>Dice4</code> variable.</p>\n\n<p><strong>TL;DR:</strong></p>\n\n<p>The lines that look like</p>\n\n<pre><code>Dice4 = pygame.image.load(\"dice_4.png\").convert\n</code></pre>\n\n<p>should look like this</p>\n\n<pre><code>Dice4 = pygame.image.load(\"dice_4.png\").convert()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9905822, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uHEvsBo5LAU/AAAAAAAAAAI/AAAAAAAAAHY/247GV5gpzOg/photo.jpg?sz=128", "display_name": "user9905822", "link": "https://stackoverflow.com/users/9905822/user9905822"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 50733872, "answer_count": 1, "score": 0, "last_activity_date": 1528350993, "creation_date": 1528322301, "last_edit_date": 1528350782, "question_id": 50730233, "link": "https://stackoverflow.com/questions/50730233/typeerror-argument-1-must-be-pygame-surface-not-builtin-function-or-method", "title": "TypeError: argument 1 must be pygame.Surface, not builtin_function_or_method", "body": "<p>Full code here:\n<a href=\"https://pastebin.com/Ne3dCpzp\" rel=\"nofollow noreferrer\">https://pastebin.com/Ne3dCpzp</a></p>\n\n<pre><code>Dice0 = pygame.image.load(\"dice_0.png\").convert\nDice1 = pygame.image.load(\"dice_1.png\").convert\nDice2 = pygame.image.load(\"dice_2.png\").convert\nDice3 = pygame.image.load(\"dice_3.png\").convert\nDice4 = pygame.image.load(\"dice_4.png\").convert\n\ndice0img = Dice0\ndice1img = Dice1\ndice2img = Dice2\ndice3img = Dice3\ndice4img = Dice4\n\n...\n\n    if dice == 0 :\n        screen.blit(dice0img, (80, 320))\n    if dice == 1 :\n        screen.blit(dice1img, (80, 320))\n    if dice == 2 :\n        screen.blit(dice2img, (80, 320))\n    if dice == 3 :\n        screen.blit(dice3img, (80, 320))\n    if dice == 4 :\n        screen.blit(dice4img, (80, 320))\n</code></pre>\n\n<p>Im currently getting an error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Ed\\Documents\\thonk\\game.py\", line 90, in &lt;module&gt;\n    screen.blit(dice4img, (80, 320))\nTypeError: argument 1 must be pygame.Surface, not builtin_function_or_method\n</code></pre>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["python", "ssl", "https", "openssl", "ssl-certificate"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9905780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Qiaoyang Huang", "link": "https://stackoverflow.com/users/9905780/qiaoyang-huang"}, "edited": false, "score": 0, "creation_date": 1528380789, "post_id": 50730350, "comment_id": 88494491, "body": "Oh I mistyped it in this version but &quot;<a href=\"https://markets.midwestiso.org/darteor/xml/submit\" rel=\"nofollow noreferrer\">markets.midwestiso.org/darteor/xml/submit</a>&quot;. is not working"}], "tags": [], "owner": {"reputation": 1172, "user_id": 4428377, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9295caadce48c5971dda44581c72181a?s=128&d=identicon&r=PG&f=1", "display_name": "aquaman", "link": "https://stackoverflow.com/users/4428377/aquaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1528322983, "creation_date": 1528322983, "answer_id": 50730350, "question_id": 50730192, "link": "https://stackoverflow.com/questions/50730192/ssl-ertificate-and-https-connection-in-python3/50730350#50730350", "title": "ssl ertificate and https connection in python3", "body": "<p>Your link (<code>\"https//:markets.midwestiso.org/darteor/xml/submit\"</code>) seems incorrect. Shouldn't it be like \n    \"<a href=\"https://markets.midwestiso.org/darteor/xml/submit\" rel=\"nofollow noreferrer\">https://markets.midwestiso.org/darteor/xml/submit</a>\".</p>\n"}], "owner": {"reputation": 1, "user_id": 9905780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Qiaoyang Huang", "link": "https://stackoverflow.com/users/9905780/qiaoyang-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528330648, "creation_date": 1528322106, "last_edit_date": 1528330648, "question_id": 50730192, "link": "https://stackoverflow.com/questions/50730192/ssl-ertificate-and-https-connection-in-python3", "title": "ssl ertificate and https connection in python3", "body": "<p>I'm trying to use OpenSSL package in python to build ssl secure connection but I got this error:</p>\n\n<pre><code>socket.gaierror: [Errno 11004] getaddrinfo failed\n</code></pre>\n\n<p>in <code>conn.connect()</code></p>\n\n<p>It takes me 2 days to debug, and the web address is correct, can somebody find out why?</p>\n\n<pre><code>from OpenSSL import SSL\n\ncerti_file = p12.get_certificate()     # (signed) certificate object\nkey_file =p12.get_privatekey()      # private key.\nca_cert = p12.get_ca_certificates() # ca chain.\n\n# ctx = Context(SSLv23_METHOD);\ncontext = SSL.Context(SSL.TLSv1_2_METHOD)\ncontext.set_options(SSL.OP_NO_SSLv2)\ncontext.use_certificate(certi_file);\ncontext.use_privatekey(key_file);\ncontext.verify_mode = ssl.CERT_NONE;\ncontext.check_hostname = None\ncontext.set_verify(VERIFY_PEER | VERIFY_FAIL_IF_NO_PEER_CERT | \nVERIFY_CLIENT_ONCE,verify_callback)\n\nconn = http.client.HTTPSConnection(\"https//:markets.midwestiso.org/darteor/xml/submit\", 80, context=context)\nconn.connect() \n</code></pre>\n"}, {"tags": ["python", "conda", "cvxopt", "cvxpy"], "answers": [{"tags": [], "owner": {"reputation": 4091, "user_id": 310477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d927bb26c26ec74248d85721666cbc8?s=128&d=identicon&r=PG", "display_name": "Ray", "link": "https://stackoverflow.com/users/310477/ray"}, "is_accepted": true, "score": 1, "last_activity_date": 1528323828, "creation_date": 1528323828, "answer_id": 50730473, "question_id": 50730177, "link": "https://stackoverflow.com/questions/50730177/conda-not-installing-latest-version/50730473#50730473", "title": "Conda Not Installing Latest Version", "body": "<p>If you look at the <a href=\"https://anaconda.org/cvxgrp/cvxpy/files?version=1.0.1\" rel=\"nofollow noreferrer\">list of files</a> for version 1.01, you'll see that the <code>win-64</code> build is only for Python 2.7. The <a href=\"http://www.cvxpy.org/install/index.html#windows\" rel=\"nofollow noreferrer\">installation instructions</a> seem to suggest that you should use <code>pip</code> to install on Windows if you're using Python 3.</p>\n"}], "owner": {"reputation": 1360, "user_id": 1618041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5a532f7f1a6acec773e7433446044fb2?s=128&d=identicon&r=PG", "display_name": "rhaskett", "link": "https://stackoverflow.com/users/1618041/rhaskett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 1, "accepted_answer_id": 50730473, "answer_count": 1, "score": 2, "last_activity_date": 1528323828, "creation_date": 1528322038, "question_id": 50730177, "link": "https://stackoverflow.com/questions/50730177/conda-not-installing-latest-version", "title": "Conda Not Installing Latest Version", "body": "<p>I'm installing cvxpy from <a href=\"https://anaconda.org/cvxgrp/cvxpy\" rel=\"nofollow noreferrer\">cvxgrp</a>.  Looking a the link it clearly shows version 1.01 for win-64.</p>\n\n<p>However when I go to run the install</p>\n\n<pre><code>conda install -c cvxgrp cvxpy\n</code></pre>\n\n<p>it downloads and installs \"cvxpy-0.4.10\".  Updating \"all\" does not seem to help.</p>\n\n<p>I checked conda info and it shows \"platform : win-64\".</p>\n\n<pre><code>conda info\n</code></pre>\n\n<p>Is there a conflict?  How can I get the latest version?</p>\n"}, {"tags": ["python", "list", "loops", "append", "iteration"], "comments": [{"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 4, "creation_date": 1528322387, "post_id": 50730172, "comment_id": 88468154, "body": "A word of caution: don&#39;t shadow built-in names like <code>list</code>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1528326104, "post_id": 50730172, "comment_id": 88469243, "body": "<code>extend</code> \u2260 <code>append</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3689436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8667c82d9a4f39d97f62d6d551d3423?s=128&d=identicon&r=PG&f=1", "display_name": "r4diohead", "link": "https://stackoverflow.com/users/3689436/r4diohead"}, "edited": false, "score": 0, "creation_date": 1528322752, "post_id": 50730237, "comment_id": 88468265, "body": "Well at first i have just list[0] = t0. Your ideas dont work"}], "tags": [], "owner": {"reputation": 61, "user_id": 6105927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aaf45591c9e535e451d066a5b533f67?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6105927/kevin"}, "is_accepted": true, "score": 1, "last_activity_date": 1528322329, "creation_date": 1528322329, "answer_id": 50730237, "question_id": 50730172, "link": "https://stackoverflow.com/questions/50730172/list-append-in-a-for-loop/50730237#50730237", "title": "List append in a &quot;for&quot; loop", "body": "<p>You should be using <code>list.append</code> since <code>list.extend</code> works on iterables; i.e. you can do stuff like <code>lst=[1,2,3];lst.extend([4,5])</code> which would give you <code>[1,2,3,4,5]</code></p>\n\n<p>see <a href=\"https://docs.python.org/3/library/stdtypes.html\" rel=\"nofollow noreferrer\">this link</a> if you want to read more</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3689436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8667c82d9a4f39d97f62d6d551d3423?s=128&d=identicon&r=PG&f=1", "display_name": "r4diohead", "link": "https://stackoverflow.com/users/3689436/r4diohead"}, "edited": false, "score": 0, "creation_date": 1528322969, "post_id": 50730311, "comment_id": 88468323, "body": "list[0]=t[0] list = [item for index in range(1,810) for item in [t[index],t[index+1],t[index]] ] i used this and i want list to have t0,t1,t2,t1,t2,t3 etc. But i get this error &#39;type&#39; object does not support item assignment"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "reply_to_user": {"reputation": 1, "user_id": 3689436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8667c82d9a4f39d97f62d6d551d3423?s=128&d=identicon&r=PG&f=1", "display_name": "r4diohead", "link": "https://stackoverflow.com/users/3689436/r4diohead"}, "edited": false, "score": 0, "creation_date": 1528323194, "post_id": 50730311, "comment_id": 88468385, "body": "@r4diohead Did you write your comment before seeing my edit? &quot;list&quot; is a keyword, so you need another name."}], "tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": false, "score": 0, "last_activity_date": 1528322755, "creation_date": 1528322755, "answer_id": 50730311, "question_id": 50730172, "link": "https://stackoverflow.com/questions/50730172/list-append-in-a-for-loop/50730311#50730311", "title": "List append in a &quot;for&quot; loop", "body": "<p>The other answers suggesting you use append fix your issue, but appending is very inefficient. You should use a list comprehension. Also, \"list\" is a keyword, so you should use another name.</p>\n\n<pre><code> my_list = [item for index in range(1,810) for item in [t[index],t[index+1],t[index]] ]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3689436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8667c82d9a4f39d97f62d6d551d3423?s=128&d=identicon&r=PG&f=1", "display_name": "r4diohead", "link": "https://stackoverflow.com/users/3689436/r4diohead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 50730237, "answer_count": 2, "score": -2, "last_activity_date": 1528328176, "creation_date": 1528322009, "last_edit_date": 1528322508, "question_id": 50730172, "link": "https://stackoverflow.com/questions/50730172/list-append-in-a-for-loop", "title": "List append in a &quot;for&quot; loop", "body": "<p>I am trying to get a list of elements using a <code>for</code> loop to index my previous list. Here's the code: </p>\n\n<pre><code>for index in range(1,810):\n    list.extend(t[index])\n    list.extend(t[index+1])\n    list.extend(t[index])\n</code></pre>\n\n<p>I already have a <code>list</code> named \"list\" and <code>t</code> is an other <code>list</code>.\nTo be more specific I want to make my list like this.</p>\n\n<pre><code>t1,t2,t1,t2,t3,t2,t3,t4 etc.\n</code></pre>\n\n<p>I get this error <code>TypeError: 'float' object is not iterable</code>.</p>\n"}, {"tags": ["python", "scala", "apache-spark"], "answers": [{"comments": [{"owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "edited": false, "score": 0, "creation_date": 1528322456, "post_id": 50730134, "comment_id": 88468178, "body": "makes sense. Let me try it out at my end. Thanks much!"}, {"owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "edited": false, "score": 0, "creation_date": 1528322602, "post_id": 50730134, "comment_id": 88468223, "body": "it gives type mismatch error: <code>Error:(32, 32) overloaded method value sampleBy with alternatives:   [T](col: String, fractions: java.util.Map[T,java.lang.Double], seed: Long)org.apache.spark.sql.DataFrame &lt;and&gt;   [T](col: String, fractions: scala.collection.immutable.Map[T,scala.Double], seed: Long)org.apache.spark.sql.DataFrame  cannot be applied to (String, scala.collection.Map[String,scala.Double], Long)     val sampled_df = pqdf.stat.sampleBy(&quot;vin&quot;, fractions, 10L)</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9905809"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321830, "creation_date": 1528321830, "answer_id": 50730134, "question_id": 50730082, "link": "https://stackoverflow.com/questions/50730082/how-to-get-distinct-values-as-a-fraction-map-in-scala/50730134#50730134", "title": "How to get distinct values as a fraction map in Scala?", "body": "<p>It gives you an error because <code>DataFrame.rdd</code> returns <code>RDD[Row]</code>. To make it work you need something that is convertible to <code>Map</code>, for example (if you want <code>Map[String, Double]</code>): </p>\n\n<pre><code>df.select(\"VIN\").distinct()\n  .select($\"VIN\".cast(\"string\"))\n  .withColumn(\"fraction\", lit(0.001))\n  .as[(String, Double)]\n  .rdd\n  .collectAsMap()\n</code></pre>\n\n<p>or </p>\n\n<pre><code>df.select(\"VIN\").distinct()\n  .withColumn(\"fraction\", lit(0.001))\n  .rdd\n  .map { case Row(vin, fraction: Double) =&gt; (vin.toString, fraction) }\n  .collectAsMap()\n</code></pre>\n"}], "owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "closed_date": 1566302887, "answer_count": 1, "score": 0, "last_activity_date": 1528321830, "creation_date": 1528321539, "question_id": 50730082, "link": "https://stackoverflow.com/questions/50730082/how-to-get-distinct-values-as-a-fraction-map-in-scala", "closed_reason": "Duplicate", "title": "How to get distinct values as a fraction map in Scala?", "body": "<p>I want to do stratified sampling on my dataframe in Scala. My dataframe has only one column and I want to form a fraction map for it. I am able to do it in pyspark but it gives me error in Scala. Here is what I tried in Scala:</p>\n\n<pre><code>import org.apache.spark.sql.functions.{lit}\nval fractions = pqdf.select(\"vin\").distinct().withColumn(\"fraction\", lit(0.001)).rdd.collect().toMap\n</code></pre>\n\n<p>It errors out saying:</p>\n\n<p><code>Error:(25, 100) Cannot prove that org.apache.spark.sql.Row &lt;:&lt; (T, U).\n    val fractions = pqdf.select(\"vin\").distinct().withColumn(\"fraction\", lit(0.001)).rdd.collect().toMap</code></p>\n\n<p>How do I resolve it? I want to use the fraction map created above in <code>.samplyBy</code> method as one of the parameters</p>\n\n<p><code>val sampled_df = pqdf.stat.sampleBy(\"vin\", fractions, 10L)</code></p>\n\n<p>This is what I tried in pyspark which works:</p>\n\n<pre><code>from pyspark.sql.functions import lit\nfractions = df.select(\"VIN\").distinct().withColumn(\"fraction\", lit(0.001)).rdd.collectAsMap()\n# fractions\nsampled_df = df.stat.sampleBy(\"VIN\", fractions, 10)\n</code></pre>\n\n<p>I am not sure how do I achieve same thing in Scala.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 1684, "user_id": 4669135, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9d4ff76c8827f4adfc6218ba952aefc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Devillers", "link": "https://stackoverflow.com/users/4669135/gabriel-devillers"}, "edited": false, "score": 0, "creation_date": 1528323161, "post_id": 50730079, "comment_id": 88468375, "body": "I am hesitating to close because I made a mistake when doing my tests. On the other hand there is no such example in the documentation and this answer could be useful when found via a search engine."}], "answers": [{"tags": [], "owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "is_accepted": true, "score": 1, "last_activity_date": 1528322148, "last_edit_date": 1528322148, "creation_date": 1528321996, "answer_id": 50730170, "question_id": 50730079, "link": "https://stackoverflow.com/questions/50730079/numpy-cross-product-of-vertical-vectors/50730170#50730170", "title": "Numpy cross product of vertical vectors", "body": "<p>I don't see any error message when doing:</p>\n\n<pre><code>a, b, c, d, e, f = 1, 2, 3, 4, 5, 6\n\nnp.cross([[a],[b],[c]],[[d],[e],[f]], axis=0)\n# array([[-3],\n#        [ 6],\n#        [-3]])\n</code></pre>\n\n<p>If the shape is (1, 3) instead of (3, 1), you can simply do</p>\n\n<pre><code>np.cross([a, b, c], [d, e, f])\n# array([-3,  6, -3])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 347, "user_id": 8667016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3612318f34c7ac23fb49b50735308b?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe D.", "link": "https://stackoverflow.com/users/8667016/felipe-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1528322080, "creation_date": 1528322080, "answer_id": 50730185, "question_id": 50730079, "link": "https://stackoverflow.com/questions/50730079/numpy-cross-product-of-vertical-vectors/50730185#50730185", "title": "Numpy cross product of vertical vectors", "body": "<p>It depends on what output you want. </p>\n\n<p>If you want a scalar output that is <code>a*d + b*e + c*f</code>, then do:</p>\n\n<pre><code>np.dot([1,2,3],[4,5,6])\n</code></pre>\n\n<p>If you want a vector output that has 3 elements and is perpendicular to the first two vectors (output of the cross product), then do:</p>\n\n<pre><code>np.cross([1,2,3],[4,5,6])\n</code></pre>\n\n<p>No need for the second set of brackets in the example you gave =)</p>\n"}], "owner": {"reputation": 1684, "user_id": 4669135, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9d4ff76c8827f4adfc6218ba952aefc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Devillers", "link": "https://stackoverflow.com/users/4669135/gabriel-devillers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "accepted_answer_id": 50730170, "answer_count": 2, "score": -1, "last_activity_date": 1528322148, "creation_date": 1528321521, "question_id": 50730079, "link": "https://stackoverflow.com/questions/50730079/numpy-cross-product-of-vertical-vectors", "title": "Numpy cross product of vertical vectors", "body": "<p>I am looking for an elegant way to compute the cross product for vectors that have more lines than columns.</p>\n\n<p>I tried: <code>np.cross([[a],[b],[c]],[[d],[e],[f]])</code> with a to f being floats and I got:</p>\n\n<blockquote>\n  <p>ValueError: incompatible dimensions for cross product</p>\n</blockquote>\n\n<p>I also tried to pass values 0 and 1 to optional parameters <code>axisa</code>, <code>axisb</code>, <code>axisc</code> and <code>axis</code> mentionned in the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.cross.html\" rel=\"nofollow noreferrer\">documentation</a>, but it did not help.</p>\n\n<p>If it is not possible to do that, does that mean that users are expected to prefer using vectors with shape (1,3) over (3,1) ?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9537342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a34e706a6d44be84507481b320ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Derek Janni", "link": "https://stackoverflow.com/users/9537342/derek-janni"}, "is_accepted": false, "score": 2, "last_activity_date": 1528322589, "creation_date": 1528322589, "answer_id": 50730283, "question_id": 50730073, "link": "https://stackoverflow.com/questions/50730073/settingwithcopywarning-in-pandas/50730283#50730283", "title": "SettingWithCopyWarning in pandas", "body": "<p><code>SettingWithCopyWarning</code> is a common side effect of using syntax like yours:</p>\n\n<pre><code>df.R2_simu[i] = df.RV[i]\n</code></pre>\n\n<p>The developers recommended using <code>df.loc[]</code> instead of using the index to access elements. Also note that using <code>for i in range(0, len(df)):</code> is less common than using <code>df.iterrows</code> or vectorized functions. For instance, this does the same thing as part of your code:</p>\n\n<pre><code>df['R2_simu'] = df['R2_simu'].apply(lambda row: 0 if row['P01'] &gt;= row['RV']) # it's generally more common to use dict notation in pandas\nOR # if you really like dot notation...\ndf.R2_simu = df.R2_simu.apply(lambda row: 0 if row.P01 &gt;= row.RV)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 1, "creation_date": 1528324199, "post_id": 50730365, "comment_id": 88468660, "body": "You don&#39;t need <code>df.loc[:,&quot;P01&quot;]</code>; you can just do <code>df[&quot;P01&quot;]</code>. This can be condensed down to one line with <code>df[&#39;R2_simu&#39;]=df[&#39;RV&#39;].mul(df[&#39;P01&#39;] &lt; df[&#39;RV&#39;])</code>."}], "tags": [], "owner": {"reputation": 4200, "user_id": 3104974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf327f4729e0af1e6bf0582391fad75?s=128&d=identicon&r=PG&f=1", "display_name": "ascripter", "link": "https://stackoverflow.com/users/3104974/ascripter"}, "is_accepted": true, "score": 2, "last_activity_date": 1528323055, "creation_date": 1528323055, "answer_id": 50730365, "question_id": 50730073, "link": "https://stackoverflow.com/questions/50730073/settingwithcopywarning-in-pandas/50730365#50730365", "title": "SettingWithCopyWarning in pandas", "body": "<p>Try setting the values on the dataframe with the <a href=\"https://pandas.pydata.org/pandas-docs/stable/indexing.html\" rel=\"nofollow noreferrer\"><code>loc</code></a> indexing, this can be the reason that internally a copy of <code>df</code> is created and written to. Change your loop to</p>\n\n<pre><code>for i in range(0, len(df)):\n\n    if df.P01[i] &gt;= df.RV[i]:\n        df.loc[i,\"R2_simu\"] = 0 \n\n    elif df.P01[i] &lt; df.RV[i]:\n        df.loc[i,\"R2_simu\"] = df.RV[i]\n    else:\n        pass\n</code></pre>\n\n<p>Even better is you don't use a loop, but vector access:</p>\n\n<pre><code>df.loc[df.loc[:,\"P01\"] &gt;= df.loc[:,\"RV\"],\"R2_simu\"] = 0\ndf.loc[df.loc[:,\"P01\"] &lt; df.loc[:,\"RV\"],\"R2_simu\"] = df.loc[df.loc[:,\"P01\"] &lt; df.loc[:,\"RV\"],\"RV\"]\n</code></pre>\n\n<p>Explained from inside to outside</p>\n\n<p><code>df.loc[:, \"col\"]</code> => take every row <code>:</code>, and column <code>col</code></p>\n\n<p><code>df.loc[x1 &gt;= x2, \"R2_simu\"]</code>=> Consider only rows where <code>x1 &gt;= x2</code> and the column <code>R2_simu</code></p>\n"}], "owner": {"reputation": 177, "user_id": 9408795, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fUTB8.jpg?s=128&g=1", "display_name": "Chi", "link": "https://stackoverflow.com/users/9408795/chi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 50730365, "answer_count": 2, "score": 1, "last_activity_date": 1528331965, "creation_date": 1528321486, "last_edit_date": 1528331965, "question_id": 50730073, "link": "https://stackoverflow.com/questions/50730073/settingwithcopywarning-in-pandas", "title": "SettingWithCopyWarning in pandas", "body": "<p>I have a dataframe as shown below:</p>\n\n<pre><code>df = \n           index     P01  unten   oben     RV   R2_simu\n2014-05-23 03:00:00  0.0    0.0    0.9    0.8         0\n2014-05-23 06:00:00  0.5    0.7    1.4    0.1         0\n2014-05-23 07:00:00  1.0    2.4    2.4    0.6         0\n2014-05-23 08:00:00 0.55   15.7   28.0    0.3         0\n....\n</code></pre>\n\n<p>and I try a loop:</p>\n\n<pre><code>for i in range(0, len(df)):\n\n    if df.P01[i] &gt;= df.RV[i]:\n        df.R2_simu[i] = 0 \n\n    elif df.P01[i] &lt; df.RV[i]:\n        df.R2_simu[i] = df.RV[i]\n    else:\n        pass\n</code></pre>\n\n<p>I expect to receive a new dataframe as shown below,</p>\n\n<pre><code>df = \n           index     P01  unten   oben     RV   R2_simu\n2014-05-23 03:00:00  0.0    0.0    0.9    0.8       0.8\n2014-05-23 06:00:00  0.5    0.7    1.4    0.1         0\n2014-05-23 07:00:00  1.0    2.4    2.4    0.6         0\n2014-05-23 08:00:00 0.55   15.7   28.0    0.6       0.6\n</code></pre>\n\n<p>however, I get the message <strong>SettingWithCopyWarning</strong>, I try to rewrite </p>\n\n<pre><code> df.R2_simu[i] = df.RV[i]\n</code></pre>\n\n<p>to</p>\n\n<pre><code> df.R2_simu[i] = df.RV[i].copy()\n</code></pre>\n\n<p>But it seems the problem still exists.</p>\n\n<p>Does anyone know how to deal with it? Thanks in advance!   </p>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 1, "creation_date": 1528321651, "post_id": 50730070, "comment_id": 88467890, "body": "Make the first <code>.*</code> non-greedy."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1528321676, "post_id": 50730070, "comment_id": 88467905, "body": "^yup:  <code>\\((.*?meh.*?)\\)</code>"}, {"owner": {"reputation": 309, "user_id": 7237305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D7nx6.jpg?s=128&g=1", "display_name": "Alison LT", "link": "https://stackoverflow.com/users/7237305/alison-lt"}, "edited": false, "score": 0, "creation_date": 1528321786, "post_id": 50730070, "comment_id": 88467946, "body": "Ah, missed that one. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1129, "user_id": 9882907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Ou94.png?s=128&g=1", "display_name": "Worthwelle", "link": "https://stackoverflow.com/users/9882907/worthwelle"}, "reply_to_user": {"reputation": 309, "user_id": 7237305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D7nx6.jpg?s=128&g=1", "display_name": "Alison LT", "link": "https://stackoverflow.com/users/7237305/alison-lt"}, "edited": false, "score": 0, "creation_date": 1528322107, "post_id": 50730129, "comment_id": 88468045, "body": "Interestingly, comparing the two options on regex101.com, this version used 131 steps at ~4ms while the non-greedy version used 146 steps at ~1ms."}], "tags": [], "owner": {"reputation": 1129, "user_id": 9882907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Ou94.png?s=128&g=1", "display_name": "Worthwelle", "link": "https://stackoverflow.com/users/9882907/worthwelle"}, "is_accepted": true, "score": 4, "last_activity_date": 1528321819, "creation_date": 1528321819, "answer_id": 50730129, "question_id": 50730070, "link": "https://stackoverflow.com/questions/50730070/non-greedy-regex-within-parenthesis-and-contains-text/50730129#50730129", "title": "Non greedy regex within parenthesis and contains text", "body": "<p>Instead of allowing all characters, you can allow all characters except the closed parenthesis by using <code>[^\\)]</code> where the <code>.</code> is now.</p>\n\n<pre><code>re.findall(r'\\(([^\\)]*meh[^\\)]*?)\\)', test)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1528322075, "post_id": 50730133, "comment_id": 88468030, "body": "<code>r&#39;\\((.*?meh.*?)\\)&#39;</code> won&#39;t work. It should be <code>re.findall(r&#39;\\(([^()]*meh[^()]*)\\)&#39;, test)</code>"}, {"owner": {"reputation": 10781, "user_id": 447901, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/11ea5dd4ad290e75422e32e1e340772e?s=128&d=identicon&r=PG", "display_name": "lit", "link": "https://stackoverflow.com/users/447901/lit"}, "edited": false, "score": 0, "creation_date": 1528323368, "post_id": 50730133, "comment_id": 88468432, "body": "Code-only answers are discouraged. Can you describe why the OP&#39;s code did not work and what the difference here is that might work?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528325628, "post_id": 50730133, "comment_id": 88469116, "body": "@WiktorStribi\u017cew - Why will non-greedy not work?  I&#39;ve always preferred the <code>[^()]</code> approach because it feels more..explicit, but I can&#39;t think of any concrete examples that would break non-greedy."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 2, "creation_date": 1528354056, "post_id": 50730133, "comment_id": 88476921, "body": "@zzxyz With <code>this is a (meh) sentence that uses (random bits of meh2) and (this is silly)</code>, it is just a coincidence <code>\\((.*?meh.*?)\\)</code> works. You <a href=\"https://regex101.com/r/0CoSVK/1\" rel=\"nofollow noreferrer\">can see it breaks with <code>(this) is a (meeeeeh) sentence that uses (random bits of meh2) and (this is silly)</code> already</a>."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528390761, "post_id": 50730133, "comment_id": 88500748, "body": "@WiktorStribi\u017cew - ah yes...lazy, but the regex starts asap.  thank you!"}, {"owner": {"reputation": 309, "user_id": 7237305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D7nx6.jpg?s=128&g=1", "display_name": "Alison LT", "link": "https://stackoverflow.com/users/7237305/alison-lt"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528473475, "post_id": 50730133, "comment_id": 88536352, "body": "@WiktorStribi\u017cew thanks for the clarification and example! I have marked your solution as accepted"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1528475142, "post_id": 50730133, "comment_id": 88537207, "body": "It is Worthwelle&#39;s answer, not mine :-)"}], "tags": [], "owner": {"reputation": 309, "user_id": 7237305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D7nx6.jpg?s=128&g=1", "display_name": "Alison LT", "link": "https://stackoverflow.com/users/7237305/alison-lt"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321827, "creation_date": 1528321827, "answer_id": 50730133, "question_id": 50730070, "link": "https://stackoverflow.com/questions/50730070/non-greedy-regex-within-parenthesis-and-contains-text/50730133#50730133", "title": "Non greedy regex within parenthesis and contains text", "body": "<pre><code>re.findall(r'\\((.*?meh.*?)\\)', test)\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 7237305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D7nx6.jpg?s=128&g=1", "display_name": "Alison LT", "link": "https://stackoverflow.com/users/7237305/alison-lt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 50730129, "answer_count": 2, "score": 2, "last_activity_date": 1528321827, "creation_date": 1528321475, "question_id": 50730070, "link": "https://stackoverflow.com/questions/50730070/non-greedy-regex-within-parenthesis-and-contains-text", "title": "Non greedy regex within parenthesis and contains text", "body": "<p>Suppose I have a string that looks like</p>\n\n<pre><code>test = 'this is a (meh) sentence that uses (random bits of meh2) and (this is silly)'\n</code></pre>\n\n<p>I want to extract ONLY text inside the parentheses if it includes the word \"meh\".</p>\n\n<p>Doing a regular non-greedy regex to match anything within parentheses:</p>\n\n<pre><code>re.findall(r'\\((.*?)\\)', test)\n</code></pre>\n\n<p>Returns</p>\n\n<pre><code>['meh', 'random bits of meh2', 'this is silly']\n</code></pre>\n\n<p>Trying to do that to only include the first and second contents:</p>\n\n<pre><code>re.findall(r'\\((.*meh.*?)\\)', test)\n</code></pre>\n\n<p>Returns</p>\n\n<pre><code>['meh) sentence that uses (random bits of meh2']\n</code></pre>\n\n<p>I want a regex to return only</p>\n\n<pre><code>['meh', 'random bits of meh2']\n</code></pre>\n\n<p>Can someone please help? Thanks!</p>\n"}, {"tags": ["python", "sonarqube", "abstract-syntax-tree"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 1248129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwkb9.jpg?s=128&g=1", "display_name": "Sajid", "link": "https://stackoverflow.com/users/1248129/sajid"}, "edited": false, "score": 0, "creation_date": 1528485555, "post_id": 50745519, "comment_id": 88541663, "body": "Thanks @Pierre-Yves for showing the workaround, it&#39;s working for me (at least the parsing part seems to be working). Hope the bug will get fixed in later version."}], "tags": [], "owner": {"reputation": 1171, "user_id": 4929594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44196c4238fb36accb3a8f0a66e04dc8?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre-Yves", "link": "https://stackoverflow.com/users/4929594/pierre-yves"}, "is_accepted": true, "score": 2, "last_activity_date": 1528386773, "creation_date": 1528386773, "answer_id": 50745519, "question_id": 50730049, "link": "https://stackoverflow.com/questions/50730049/error-running-sonar-sslr-toolkit/50745519#50745519", "title": "Error running Sonar SSLR Toolkit", "body": "<p>That's a serious bug indeed. I just logged an <a href=\"https://jira.sonarsource.com/browse/SONARPY-283\" rel=\"nofollow noreferrer\">issue</a> so that it get fixed in the next version. Thanks for reporting it!</p>\n\n<p>As a workaround, you may use an <a href=\"http://downloads.sonarsource.com/plugins/org/codehaus/sonar-plugins/python/sslr-python-toolkit/1.5/sslr-python-toolkit-1.5.jar\" rel=\"nofollow noreferrer\">older version of the SSLR Toolkit</a> which seems to work. It's based on an older version of the parser, so it could give different results in some cases.</p>\n"}], "owner": {"reputation": 127, "user_id": 1248129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwkb9.jpg?s=128&g=1", "display_name": "Sajid", "link": "https://stackoverflow.com/users/1248129/sajid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 1, "accepted_answer_id": 50745519, "answer_count": 1, "score": 2, "last_activity_date": 1542675972, "creation_date": 1528321393, "last_edit_date": 1528359793, "question_id": 50730049, "link": "https://stackoverflow.com/questions/50730049/error-running-sonar-sslr-toolkit", "title": "Error running Sonar SSLR Toolkit", "body": "<p>I am trying to add a new rule for my Python project, so according to this source (<a href=\"https://docs.sonarqube.org/display/DEV/Adding+Coding+Rules+using+XPath#AddingCodingRulesusingXPath-WritinganXPathRuleusingSSLRToolkit\" rel=\"nofollow noreferrer\">Adding Coding Rules using XPath</a>), I was trying to run sslr-python-toolkit-1.9.1.2080.jar from command line to view AST of a given piece of code but it exited with the following error:</p>\n\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread \"main\" java.lang.NoClassDefFoundError: org/sonar/sslr/toolkit/ConfigurationModel\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n    at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n    at java.lang.Class.getMethod0(Class.java:3018)\n    at java.lang.Class.getMethod(Class.java:1784)\n    at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:544)\n    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:526)\nCaused by: java.lang.ClassNotFoundException: org.sonar.sslr.toolkit.ConfigurationModel\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 7 more\n</code></pre>\n\n<p>Am I missing something? How could I make it work? I'm quite new in SonarQube arena, so please excuse my naivety and help me to solve the issue. \nThanks! </p>\n"}, {"tags": ["python", "class", "oop", "uml"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528321802, "post_id": 50730048, "comment_id": 88467955, "body": "The simplest thing to do is to have a dict somewhere mapping <code>Guest</code>s to <code>RoomBooking</code>s. If you want to hide that dict for encapsulation purposes, you could put it in a <code>RoomManager</code> object, or in your existing <code>Hotel</code> object, or just use classmethods on <code>RoomBooking</code> if it&#39;s a system-wide rather than a hotel-wide thing."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528321883, "post_id": 50730048, "comment_id": 88467978, "body": "But meanwhile, unless you&#39;re mapping your classes to a relational database\u2014in which case the answer is just a query using whatever ORM framework you&#39;re using\u2014I don&#39;t know that I&#39;d be using a <code>RoomBooking</code> class in the first place."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1528326603, "post_id": 50730048, "comment_id": 88469383, "body": "In Python associations are called &quot;mappings&quot; and it has a built-in one called <a href=\"https://docs.python.org/3/library/stdtypes.html#mapping-types-dict\" rel=\"nofollow noreferrer\"><code>dict</code></a> which sounds like what you want (so you don&#39;t have implement it yourself)."}, {"owner": {"reputation": 4944, "user_id": 6340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddf99c24b0bebc05681a2119286b120?s=128&d=identicon&r=PG&f=1", "display_name": "Ister", "link": "https://stackoverflow.com/users/6340948/ister"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528347967, "post_id": 50730048, "comment_id": 88474306, "body": "@abarnert why don&#39;t you make an answer from your comments? It seems to be a full answer. Add a code example and it&#39;s just perfect."}, {"owner": {"reputation": 29, "user_id": 3912120, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/af41918ae5e00d95a4bc29e34f51719c?s=128&d=identicon&r=PG&f=1", "display_name": "SimStil", "link": "https://stackoverflow.com/users/3912120/simstil"}, "edited": false, "score": 0, "creation_date": 1528354131, "post_id": 50730048, "comment_id": 88476963, "body": "In UML an association class can have its own attribute and operations (I guess it&#39;s methods in Python) so how would that be implemented using a dictionary? Would the method then have to just be in either the Room or Guest? For example if the method calculates the number of workdays the guest&#39;s stay based on the total duration of stay."}], "answers": [{"tags": [], "owner": {"reputation": 30989, "user_id": 3379653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/f97JZ.png?s=128&g=1", "display_name": "qwerty_so", "link": "https://stackoverflow.com/users/3379653/qwerty-so"}, "is_accepted": false, "score": 1, "last_activity_date": 1528445603, "last_edit_date": 1528445603, "creation_date": 1528359489, "answer_id": 50736208, "question_id": 50730048, "link": "https://stackoverflow.com/questions/50730048/can-an-association-class-be-implemented-in-python/50736208#50736208", "title": "Can an association class be implemented in Python?", "body": "<p>Sure you can implement it in Python. But there is not a single way. Quite often you have a database layer where the association class is used with two foreign keys (in your case to the primaries of <code>Room</code> and <code>Guest</code>). So in order to search you would just code an according SQL to be sent. In case you want to cache this table you would code it like this (or similarly) with an associative array:</p>\n\n<pre><code>from collections import defaultdict\n\nclass Room():\n    def __init__(self, num):\n        self.room_number = num\n\n    def key(self):\n        return str(self.room_number)\n\nclass Guest():\n    def __init__(self, name):\n        self.name = name\n\n    def key(self):\n        return self.name\n\ndef nested_dict(n, type):\n    if n == 1:\n        return defaultdict(type)\n    else:\n        return defaultdict(lambda: nested_dict(n-1, type))\nroom_booking = nested_dict(2, str)\n\nclass Room_Booking():\n    def __init__(self, date):\n        self.date = date\n\n\nroom1 = Room(1)\nguest1 = Guest(\"Joe\")\n\nroom_booking[room1.key()][guest1.key()] = Room_Booking(\"some date\")\n\nprint(room_booking[room1.key()][guest1.key()])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1528392104, "creation_date": 1528392104, "answer_id": 50746933, "question_id": 50730048, "link": "https://stackoverflow.com/questions/50730048/can-an-association-class-be-implemented-in-python/50746933#50746933", "title": "Can an association class be implemented in Python?", "body": "<p>Most Python applications developed from a UML design are backed by a relational database, usually via an ORM. In which case your design is pretty trivial: your <code>RoomBooking</code> is a table in the database, and the way you look up all <code>RoomBooking</code> objects for a given <code>Guest</code> is just an ORM query. Keeping it vague rather than using a particular ORM syntax, something like this:</p>\n\n<pre><code>bookings = RoomBooking.select(Guest=guest)\n</code></pre>\n\n<hr>\n\n<p>With an RDBMS but no ORM, it's not much different. Something like this:</p>\n\n<pre><code>sql = 'SELECT Room, Guest, Charge, Paid FROM RoomBooking WHERE Guest = ?'\ncur = db.execute(sql, (guest.id))\nbookings = [RoomBooking(*row) for row in cur]\n</code></pre>\n\n<hr>\n\n<p>And this points to what you'd do if you're <em>not</em> using a RDBMS: any relation that would be stored as a table with a foreign key is instead stored as some kind of dict in memory.</p>\n\n<p>For example, you might have a dict mapping guests to sets of room bookings:</p>\n\n<pre><code>bookings = guest_booking[guest]\n</code></pre>\n\n<p>Or, alternatively, if you don't have a huge number of hotels, you might have this mapping implicit, with each hotel having a 1-to-1 mapping of guests to bookings:</p>\n\n<pre><code>bookings = [hotel.bookings[guest] for hotel in hotels]\n</code></pre>\n\n<hr>\n\n<p>Since you're starting off with UML, you're probably thinking in strict OO terms, so you'll want to encapsulate this dict in some class, behind some mutator and accessor methods, so you can ensure that you don't accidentally break any invariants.</p>\n\n<p>There are a few obvious places to put it\u2014a <code>BookingManager</code> object makes sense for the guest-to-set-of-bookings mapping, and the <code>Hotel</code> itself is such an obvious place for the per-hotel-guest-to-booking that I used it without thinking above.</p>\n\n<p>But another place to put it, which is closer to the ORM design, is in a class attribute on the <code>RoomBooking</code> type, accessed by classmethods. This also allows you to extend things if you later need to, e.g., look things up by hotel\u2014you'd then put two dicts as class attributes, and ensure that a single method always updates both of them, so you know they're always consistent.</p>\n\n<p>So, let's look at that:</p>\n\n<pre><code>class RoomBooking\n    guest_mapping = collections.defaultdict(set)\n    hotel_mapping = collections.defaultdict(set)\n    def __init__(self, guest, room):\n        self.guest, self.room = guest, room\n    @classmethod\n    def find_by_guest(cls, guest):\n        return cls.guest_mapping[guest]\n    @classmethod\n    def find_by_hotel(cls, hotel):\n        return cls.hotel_mapping[hotel]\n    @classmethod\n    def add_booking(cls, guest, room):\n        booking = cls(guest, room)\n        cls.guest_mapping[guest].add(booking)\n        cls.hotel_mapping[room.hotel].add(booking)\n</code></pre>\n\n<p>Of course your <code>Hotel</code> instance probably needs to add the booking as well, so it can raise an exception if two different bookings cover the same room on overlapping dates, whether that happens in <code>RoomBooking.add_booking</code>, or in some higher-level function that calls both <code>Hotel.add_booking</code> and <code>RoomBooking.add_booking</code>.</p>\n\n<p>And if this is multi-threaded (which seems like a good possibility, given that you're heading this far down the Java-inspired design path), you'll need a big lock, or a series of fine-grained locks, around the whole transaction.</p>\n\n<p>For persistence, you probably want to store these mappings along with the public objects. But for a small enough data set, or for a server that rarely restarts, it might be simpler to just persist the public objects, and rebuild the mappings at load time by doing a bunch of <code>add_booking</code> calls as part of the load process.</p>\n\n<hr>\n\n<p>If you want to make it even more ORM-style, you can have a single <code>find</code> method that takes keyword arguments and manually executes a \"query plan\" in a trivial way:</p>\n\n<pre><code>    @classmethod\n    def find(cls, guest=None, hotel=None):\n        if guest is None and hotel is None:\n            return {booking for bookings in cls.guest_mapping.values()\n                    for booking in bookings}\n        elif hotel is None:\n            return cls.guest_mapping[guest]\n        elif guest is None:\n            return cls.hotel_mapping[hotel]\n        else:\n            return {booking for booking in cls.guest_mapping[guest] \n                    if booking.room.hotel == hotel}\n</code></pre>\n\n<p>But this is already pushing things to the point where you might want to go back and ask whether you were right to not use an ORM in the first place. If that sounds ridiculously heavy duty for your simple toy app, take a look at <code>sqlite3</code> for the database (which comes with Python, and which takes less work to use than coming up with a way to <code>pickle</code> or <code>json</code> all your data for persistence) and <code>SqlAlchemy</code> for the ORM. There's not much of a learning curve, and not much runtime overhead or coding-time boilerplate.</p>\n"}], "owner": {"reputation": 29, "user_id": 3912120, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/af41918ae5e00d95a4bc29e34f51719c?s=128&d=identicon&r=PG&f=1", "display_name": "SimStil", "link": "https://stackoverflow.com/users/3912120/simstil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1528445603, "creation_date": 1528321391, "question_id": 50730048, "link": "https://stackoverflow.com/questions/50730048/can-an-association-class-be-implemented-in-python", "title": "Can an association class be implemented in Python?", "body": "<p>I have just started learning software development and I am modelling my system in a UML Class diagram. I am unsure how I would implement this in code. </p>\n\n<p>To keep things simple let\u2019s assume the followimg example: \nThere is a Room and a Guest Class with association Room(0..<em>)-Guest(0..</em>) and an association class RoomBooking, which contains booking details. How would I model this in Python if my system wants to see all room bookings made by a particular guest?</p>\n"}, {"tags": ["python", "amazon-s3", "aws-lambda", "boto"], "comments": [{"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 0, "creation_date": 1528322179, "post_id": 50730042, "comment_id": 88468079, "body": "Your code would need to grab &quot;today&#39;s date&quot;, subtract a day, then find filenames matching that day. However, you need to be careful of timezones - what is your definition of &quot;Once we receive all the files for March 1st&quot;? What timezone is used by the files? If you run code on an EC2 instance, it will use UTC as the timezone unless you specifically code otherwise."}, {"owner": {"reputation": 402, "user_id": 1942778, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TwPct.jpg?s=128&g=1", "display_name": "Shash", "link": "https://stackoverflow.com/users/1942778/shash"}, "reply_to_user": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 0, "creation_date": 1528323317, "post_id": 50730042, "comment_id": 88468415, "body": "These are historical files. My code will be run through Lambda."}], "answers": [{"comments": [{"owner": {"reputation": 402, "user_id": 1942778, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TwPct.jpg?s=128&g=1", "display_name": "Shash", "link": "https://stackoverflow.com/users/1942778/shash"}, "edited": false, "score": 0, "creation_date": 1528409144, "post_id": 50730252, "comment_id": 88509359, "body": "How do I access the S3 file name in the python script? As there will be n number of files."}, {"owner": {"reputation": 76, "user_id": 7733772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XmY.png?s=128&g=1", "display_name": "Lane Terry", "link": "https://stackoverflow.com/users/7733772/lane-terry"}, "reply_to_user": {"reputation": 402, "user_id": 1942778, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TwPct.jpg?s=128&g=1", "display_name": "Shash", "link": "https://stackoverflow.com/users/1942778/shash"}, "edited": false, "score": 1, "creation_date": 1528410161, "post_id": 50730252, "comment_id": 88509651, "body": "Haven&#39;t worked with boto3 s3 in a bit but I believe obj.key is the filename. <a href=\"https://boto3.readthedocs.io/en/latest/guide/migrations3.html#iteration-of-buckets-and-keys\" rel=\"nofollow noreferrer\">boto3.readthedocs.io/en/latest/guide/&hellip;</a>"}], "tags": [], "owner": {"reputation": 76, "user_id": 7733772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XmY.png?s=128&g=1", "display_name": "Lane Terry", "link": "https://stackoverflow.com/users/7733772/lane-terry"}, "is_accepted": false, "score": 2, "last_activity_date": 1528325450, "last_edit_date": 1528325450, "creation_date": 1528322379, "answer_id": 50730252, "question_id": 50730042, "link": "https://stackoverflow.com/questions/50730042/aws-lambda-python-script-to-iterate-over-s3-bucket-and-copy-daily-files-to-anoth/50730252#50730252", "title": "AWS Lambda Python script to iterate over S3 bucket and copy daily files to another S3 bucket", "body": "<p>You can extract the date string portion of the filename (ideally by splitting the string on '_') and pass it into a handling function such as:</p>\n\n<pre><code>from datetime import datetime as dt\n\ndef parse_date(date_string):\n    form = \"%y%m%d%H%M%S\"\n    date = dt.strptime(date_string, form)\n\n    #dt.utcnow() will return a UTC representation of the current time\n    diff = dt.now() - date\n\n    if diff.days &gt;= 1:\n        return False\n\n    return True\n\n#False\nprint(parse_date(\"180301000014\"))\n#True as of the date of this post\nprint(parse_date(\"180606000014\"))\n</code></pre>\n\n<p>You can look at <a href=\"https://docs.python.org/3/library/datetime.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/datetime.html</a> for more info on handling dates in Python. You will need to account for time zones as well.</p>\n\n<p>For matching by day to a target date:</p>\n\n<pre><code>def by_target_date(date_string, target_date):\n    form = \"%y%m%d%H%M%S\"\n    date = dt.strptime(date_string, form)\n\n    if date &gt; target_date:\n        #Check that days match and that month and year are the same\n        if date.day == target_date.day and (date - target_date).days &lt;= 1:\n            return do_things()\n\n    if date.day == target_date.day and (target_date - date).days &lt;= 1:\n        return do_things()\n</code></pre>\n"}], "owner": {"reputation": 402, "user_id": 1942778, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TwPct.jpg?s=128&g=1", "display_name": "Shash", "link": "https://stackoverflow.com/users/1942778/shash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2832, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1528401921, "creation_date": 1528321347, "last_edit_date": 1528401921, "question_id": 50730042, "link": "https://stackoverflow.com/questions/50730042/aws-lambda-python-script-to-iterate-over-s3-bucket-and-copy-daily-files-to-anoth", "title": "AWS Lambda Python script to iterate over S3 bucket and copy daily files to another S3 bucket", "body": "<p>Requirement here is that in the source bucket we receive historical daily files. The files are of the format -</p>\n\n<p>Source bucket -</p>\n\n<pre><code>s3://sourcebucket/abc/111111_abc_1180301000014_1-3_1180301042833.txt\ns3://sourcebucket/abc/111111_cde_1180302000042_2-3_1180302042723.txt\n</code></pre>\n\n<p>These are sample values as I can't post the exact file name -</p>\n\n<blockquote>\n  <p>111111_abc_1180301000014_1-3_1180301042833.txt</p>\n  \n  <p>where 1180301000014 is the date and time 180301 - date March 1st 2018 and \n  000014 is hours, minutes and seconds - hhmmss</p>\n</blockquote>\n\n<p>Once we receive all the hourly files for March 1st, we need to copy those files to another bucket and then do further processing. Currently, the copy part is working fine. It copies all the files present in the source bucket to the destination. But, I am not sure how to apply filter such that it picks only March 1st days file first and copies it to another bucket. Then it should pick the remaining files in sequential order.</p>\n\n<p>Python script - </p>\n\n<pre><code>import boto3\nimport json\ns3 = boto3.resource('s3')\n\n\ndef lambda_handler(event, context):\n    bucket = s3.Bucket('&lt;source-bucket&gt;')\n    dest_bucket = s3.Bucket('&lt;destination-bucket&gt;')\n\n    for obj in bucket.objects.filter(Prefix='abc/',Delimiter='/'):\n        dest_key = obj.key\n        print(dest_key)\n        s3.Object(dest_bucket.name, dest_key).copy_from(CopySource = {'Bucket': obj.bucket_name, 'Key': obj.key})\n</code></pre>\n\n<p>I am not that well versed in python. In fact this is my first python script. Any guidance is appreciated.</p>\n"}, {"tags": ["python", "i2c"], "comments": [{"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1528321626, "post_id": 50730018, "comment_id": 88467885, "body": "Hi Welcome to stack overflow. We are happy to help, you and the many other people who may have the same problem and will end up reading this question. We need to know <b>what</b> problem do you have in order to do it, a piece of code is not enough, you should explain what do you expect, how is it not doing what you expect, or any error you may get when executing it"}, {"owner": {"reputation": 1904, "user_id": 7655838, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kb2qX.png?s=128&g=1", "display_name": "Ender Look", "link": "https://stackoverflow.com/users/7655838/ender-look"}, "edited": false, "score": 0, "creation_date": 1528329095, "post_id": 50730018, "comment_id": 88470024, "body": "Explain your problem a bit more please and add an expected output."}], "owner": {"reputation": 1, "user_id": 9905754, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "vr k", "link": "https://stackoverflow.com/users/9905754/vr-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528321174, "creation_date": 1528321174, "question_id": 50730018, "link": "https://stackoverflow.com/questions/50730018/is-there-a-simple-way-to-hookup-grideyeamg88xx-to-rpi3-and-program-to-get-the", "title": "Is there a simple way to hookup grideye(AMG88xx) to rpi3 and program to get the pixel data?", "body": "<p>I have a problem using busio and CircuitPython modules.</p>\n\n<p>Example code-</p>\n\n<pre><code>import time\nimport busio\nimport board\nimport adafruit_amg88xx\ni2c_bus = busio.I2C(board.SCL, board.SDA)\namg = adafruit_amg88xx.AMG88XX(i2c_bus)\nwhile True:\nfor row in amg.pixels:\n#pad to 1 decimal place\nprint(['{0:.1f}'.format(temp) for temp in row])\nprint(\"\")\nprint(\"\\n\")\ntime.sleep(1)\n</code></pre>\n"}, {"tags": ["python", "c++", "syntax", "pybind11"], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 7179746, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U7lPPmuoGKI/AAAAAAAAAAI/AAAAAAAAACE/9CPPdZVKg68/photo.jpg?sz=128", "display_name": "Airfield20", "link": "https://stackoverflow.com/users/7179746/airfield20"}, "is_accepted": true, "score": 0, "last_activity_date": 1529615901, "last_edit_date": 1529615901, "creation_date": 1528399266, "answer_id": 50748768, "question_id": 50730012, "link": "https://stackoverflow.com/questions/50730012/what-is-the-proper-syntax-to-bind-a-typedef-type-using-pybind11/50748768#50748768", "title": "What is the proper syntax to bind a typedef type using pybind11?", "body": "<p>For this specific issue, pybind will automatically interpret an std::vector type as a python list when you include <code>\"pybind11/stl.h\"</code> . Thus, a binding for this type is unnecessary. </p>\n\n<p>Ex:</p>\n\n<pre><code>#include \"pybind11.h\"\n#include \"pybind11/stl.h\"\n\nstruct data_point\n{\n    data_point() = delete;\n    data_point(const int&amp; data) :\n            m_data(data)\n    {}\n    int m_data;\n};\n\nstd::vector&lt;data_point&gt; make_vec(){\n    return {data_point(20), data_point(18)};\n}\n\nPYBIND11_MODULE(data_lib, ref)\n{\n    py::class_&lt;data_point&gt; dp(ref, \"data_point\");\n    dp.def(py::init&lt;const int&amp;&gt;());\n    dp.def_readwrite(\"m_data\", &amp;data_point::m_data);\n\n    ref.def(\"make_vec\", &amp;make_vec, \"A function that returns a vector of data_points\");\n}\n</code></pre>\n\n<p>In python, when you import the <code>data_lib</code> library you will be able to use functions that return lists of <code>data_point</code>.</p>\n\n<pre><code>import data_lib\np = data_lib.make_vec()\nprint len(p)\n</code></pre>\n\n<p>output: <code>2</code></p>\n"}], "owner": {"reputation": 198, "user_id": 7179746, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U7lPPmuoGKI/AAAAAAAAAAI/AAAAAAAAACE/9CPPdZVKg68/photo.jpg?sz=128", "display_name": "Airfield20", "link": "https://stackoverflow.com/users/7179746/airfield20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 50748768, "answer_count": 1, "score": 1, "last_activity_date": 1529615901, "creation_date": 1528321148, "question_id": 50730012, "link": "https://stackoverflow.com/questions/50730012/what-is-the-proper-syntax-to-bind-a-typedef-type-using-pybind11", "title": "What is the proper syntax to bind a typedef type using pybind11?", "body": "<p>I have a struct very similar to this:</p>\n\n<pre><code>struct data_point\n{\n    data_point() = delete;\n    data_point(const int&amp; data) :\n            m_data(data)\n    {}\n\n    int m_data;\n};\n</code></pre>\n\n<p>I also have this type declared as such.</p>\n\n<pre><code>typedef std::vector&lt;data_point&gt; data_list;\n</code></pre>\n\n<p>The binding for this struct is defined:</p>\n\n<pre><code>PYBIND11_MODULE(data_lib, ref)\n{\n    py::class_&lt;data_point&gt; dp(ref, \"data_point\");\n    dp.def(py::init&lt;const int&amp;&gt;());\n    dp.def_readwrite(\"m_data\", &amp;data_point::m_data);\n}\n</code></pre>\n\n<p>How do I define a binding for the typedef list type? \nIts not clear to me how to do this in the pybind documentation.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "protocol-buffers", "proto"], "owner": {"reputation": 159, "user_id": 6673756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0e9dl.jpg?s=128&g=1", "display_name": "lexalenka", "link": "https://stackoverflow.com/users/6673756/lexalenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528321025, "creation_date": 1528321025, "question_id": 50729987, "link": "https://stackoverflow.com/questions/50729987/clarification-on-protobuf-printfield", "title": "Clarification on Protobuf PrintField()", "body": "<p>I'm trying to use the Google Protobuf API found <a href=\"https://developers.google.com/protocol-buffers/docs/reference/python/toc-everything\" rel=\"nofollow noreferrer\">here</a> and I'm having trouble with the built in PrintField() method with the following info:</p>\n\n<blockquote>\n  <p>PrintField(field, value, out, indent=0, as_utf8=False, as_one_line=False)</p>\n  \n  <p>Print a single field name/value pair. For repeated fields, the value should be a single element.</p>\n</blockquote>\n\n<p>After merging my message, I'm able to print out the fully merged layout. However, I'd like the specific field/value pair and I'm a bit unsure how to go about doing that as I can't find any full fledged internet examples.</p>\n\n<p>I have tried the following:</p>\n\n<p>proto.PrintField(1, 1,  cStringIO.StringIO())\n, proto.PrintField('field1', 'subfield',  cStringIO.StringIO())</p>\n\n<blockquote>\n  <p>Where my message looks like:\n  message field1 {subfield = 1;}</p>\n</blockquote>\n\n<p>Running as such yields the following error: \"AttributeError: 'int' object has no attribute 'is_extension'\" this is the same in both cases, the only change being 'int' or 'string'.</p>\n"}, {"tags": ["python", "pandas", "plotnine"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1528321895, "post_id": 50729951, "comment_id": 88467982, "body": "Take a look at <code>df_slow.dtypes</code> and <code>df_fast.dtypes</code>. You&#39;ll see the difference is that the <code>&#39;value&#39;</code> column is an object for <code>df_slow</code>. So when it&#39;s trying to plot, it must be interpreting them as strings and so the y-axis gets ruined because it plots the label for every single value."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1528322044, "post_id": 50729951, "comment_id": 88468026, "body": "Also, <code>DataFrame.plot</code> seems to get it correct without issue. Try <code>df_slow.plot(x=&#39;index&#39;, y=&#39;value&#39;, marker=&#39;o&#39;, lw=0)</code>"}, {"owner": {"reputation": 44, "user_id": 7211695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e3e63ba7b966eba014edde60997166?s=128&d=identicon&r=PG&f=1", "display_name": "Solid7", "link": "https://stackoverflow.com/users/7211695/solid7"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1528323099, "post_id": 50729951, "comment_id": 88468360, "body": "Well spotted. You are right. The types differ. I didn&#39;t expect <code>pandas.melt</code> to change the datatype. I only checked <code>type(df_slow[&#39;value&#39;][0])</code> which gives float. This is a boiled down test because this happened when I was plotting something similar using plotnine and melted data frames."}], "owner": {"reputation": 44, "user_id": 7211695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e3e63ba7b966eba014edde60997166?s=128&d=identicon&r=PG&f=1", "display_name": "Solid7", "link": "https://stackoverflow.com/users/7211695/solid7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 818, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528326991, "creation_date": 1528320871, "last_edit_date": 1528326991, "question_id": 50729951, "link": "https://stackoverflow.com/questions/50729951/plotting-pandas-dataframe-after-doing-pandas-melt-is-slow-and-creates-strange-y", "title": "Plotting pandas dataframe after doing pandas melt is slow and creates strange y-axis", "body": "<p>This could be caused by me not understanding how <a href=\"http://pandas.pydata.org/pandas-docs/version/0.22/generated/pandas.melt.html\" rel=\"nofollow noreferrer\"><code>pandas.melt</code></a> works but I get strange behaviour when plotting \"melted\" dataframes using <a href=\"https://github.com/has2k1/plotnine\" rel=\"nofollow noreferrer\">plotnine</a>. Both frames has been converted from wide to long format. One frame with a column containing string values (<code>df_slow</code>) and another with only numerical values (<code>df_fast</code>). </p>\n\n<p>The following code gives different behaviour. Plotting <code>df_slow</code> is slow and gives a strange looking y-axis. Plotting <code>df_fast</code> looks ok and is fast. My guess is that pandas melt is doing something strange with the data which causes this behaviour. See example plots. </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport plotnine as p9\n\nSIZE = 200\nvalue = np.random.rand(SIZE, 1)\n\n# Create test data, one with a column containing strings, one with only numeric values\ndf_slow = pd.DataFrame({'value': value.flatten(), 'string_column': ['A']*SIZE})\ndf_fast = pd.DataFrame({'value': value.flatten()})\n\n# Set index\ndf_slow = df_slow.reset_index()\ndf_fast = df_fast.reset_index()\n\n# Convert 'df_slow', 'df_fast' to long format\ndf_slow = pd.melt(df_slow, id_vars='index')\ndf_fast = pd.melt(df_fast, id_vars='index')\n\nprint(df_slow.head())\nprint(df_fast.head())\ndf_slow = df_slow[df_slow.variable == 'value']\n\n# This is slow and has many breaks on y-axis\np = (p9.ggplot(df_slow, p9.aes(x='index', y='value')) + p9.geom_point())\np.draw()\n\n# This is much faster and y-axis looks good\np = (p9.ggplot(df_fast, p9.aes(x='index', y='value')) + p9.geom_point())\np.draw()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3kLFK.png\" rel=\"nofollow noreferrer\">slow and strange plot</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/QrDPO.png\" rel=\"nofollow noreferrer\">fast and good looking plot</a></p>\n\n<h2>Possible fix</h2>\n\n<p>Changing the type of  the \"value\" column in <code>df_slow</code> makes it behave like <code>df_fast</code> when plotting.</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># This makes df_slow behave like df_fast when plotting\ndf_slow['value'] = df_slow.value.astype(np.float64)\n</code></pre>\n\n<h2>Question</h2>\n\n<p>Is this a bug in <a href=\"https://github.com/has2k1/plotnine\" rel=\"nofollow noreferrer\">plotnine</a> (or <a href=\"http://pandas.pydata.org/pandas-docs/version/0.22/index.html\" rel=\"nofollow noreferrer\">pandas</a>) or am I doing something wrong?</p>\n\n<h2>Answer</h2>\n\n<p>When pivoting two columns with different data types, in this case string and float, I guess it makes sense that the resulting column containing both strings and floats will have the type object. As \nALollz pointed out this probably makes plotnine interpret the values as strings which causes this behavior. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1528321234, "post_id": 50729916, "comment_id": 88467754, "body": "<code>player_position</code> is a function which does not return anything.  You need to keep track of the position with a variable and update it each time you change direction."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321436, "creation_date": 1528321436, "answer_id": 50730063, "question_id": 50729916, "link": "https://stackoverflow.com/questions/50729916/need-assistance-making-a-simple-game/50730063#50730063", "title": "Need assistance making a simple game", "body": "<p>You're making a call to <code>player_position</code>, a function which does not return anything. Instead, assuming you want to keep track of the player's current position within your <code>starting_room</code> function, you'll want to keep track of the pos there.</p>\n\n<p>Something like this: (note - you'll need to add more code to break out of the <code>while</code> loop - this code should allow you to keep track of the pos though)</p>\n\n<pre><code>def player_position(pos):\n        position = pos\n        if position == goliath.spawn:\n\n            print('The Goliath Has Attacked!')\n\n            if goliath.accuracy == 1:\n\n                print('You Have Been Killed!')\n\n            else:\n                print('You Killed The Goliath!')\n\n        else:\n            print('Nothing Happens...')\n\ndef starting_room():\n    pos = 0 #initialize the pos to 0\n    while True:\n        position_update = input('Enter A Direction: ')\n        if pos == 1: #check to see if current pos is 1\n            if position_update == 'Forwards':\n                print('Room 2')\n                #you may want to add \"break\" here to stop this while loop\n\n            elif position_update == 'Backwards':\n                pos = 0\n\n            elif position_update == 'Left':\n                print('There Are Monsters In the Dark')\n\n            elif position_update == 'Right':\n                print('There Are Monsters In The Dark')\n\n        elif position_update == 'Forwards':\n            pos = 1\n\n        elif position_update == 'Backwards':\n            pos = 3\n\n        elif position_update == 'Left':\n            pos = 4\n\n        elif position_update == 'Right':\n            pos = 2\n        player_position(pos) #call the player_position function with the current pos\n\nstarting_room()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9797375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd085b1e3b9596d85968d8d8ff2f9ad?s=128&d=identicon&r=PG&f=1", "display_name": "FallOutFighter", "link": "https://stackoverflow.com/users/9797375/falloutfighter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528326855, "creation_date": 1528320715, "last_edit_date": 1528326855, "question_id": 50729916, "link": "https://stackoverflow.com/questions/50729916/need-assistance-making-a-simple-game", "title": "Need assistance making a simple game", "body": "<p>I'm just wondering how I can make it so <code>elif player_position == 1</code> will work. I want to check the value of the argument (<code>pos</code>) in function <code>player_position()</code> and execute code depending on its value. I've only been learning Python for about 1 month. </p>\n\n<pre><code>def player_position(pos):\n\n    position = pos\n\n    if position == goliath.spawn:\n        print('The Goliath Has Attacked!')\n\n        if goliath.accuracy == 1:\n            print('You Have Been Killed!')\n\n        else:\n            print('You Killed The Goliath!')\n\n    else:\n        print('Nothing Happens...')\n\n\ndef starting_room():\n\n    while True:\n\n        position_update = input('Enter A Direction: ')\n\n        if position_update == 'Forwards':\n            player_position(1)\n\n        elif position_update == 'Backwards':\n            player_position(3)\n\n        elif position_update == 'Left':\n            player_position(4)\n\n        elif position_update == 'Right':\n            player_position(2)\n\n        elif player_position == 1:\n\n            if position_update == 'Forwards':\n                print('Room 2')\n\n            elif position_update == 'Backwards':\n                player_position(0)\n\n            elif position_update == 'Left':\n                print('There Are Monsters In the Dark')\n\n            elif position_update == 'Right':\n                print('There Are Monsters In The Dark')\n\nstarting_room()\n</code></pre>\n"}, {"tags": ["python", "html", "xpath", "web-scraping", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 6814713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e8cf4703e0f253517a907c178d53d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/6814713/brendan"}, "edited": false, "score": 0, "creation_date": 1528406304, "post_id": 50733277, "comment_id": 88508375, "body": "This works perfectly. Initially, I was only seeing the keys, with blank values, but I realized I was opening the scrapy shell on windows with <code>scrapy shell http:&#47;&#47;land.elpasoco.com&#47;ResidentialBuilding.aspx?schd=53174&zwnj;&#8203;43025&amp;bldg=1</code>, which had the URL without quotes. This resulted in scrapy opening a shell for &quot;<a href=\"http://land.elpasoco.com/ResidentialBuilding.aspx?schd=5317443025\" rel=\"nofollow noreferrer\">land.elpasoco.com/ResidentialBuilding.aspx?schd=5317443025</a>&quot; (note: missing &quot;&amp;bldg=1&quot;). I fixed this by putting the url in quotes: <code>scrapy shell &quot;http:&#47;&#47;land.elpasoco.com&#47;ResidentialBuilding.aspx?schd=5317&zwnj;&#8203;443025&amp;bldg=1&quot;</code>"}], "tags": [], "owner": {"reputation": 2108, "user_id": 5939254, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rlneIgGDRmo/AAAAAAAAAAI/AAAAAAAAAY8/nARwrdmA_jY/photo.jpg?sz=128", "display_name": "Yash Pokar", "link": "https://stackoverflow.com/users/5939254/yash-pokar"}, "is_accepted": true, "score": 1, "last_activity_date": 1528347851, "creation_date": 1528347851, "answer_id": 50733277, "question_id": 50729897, "link": "https://stackoverflow.com/questions/50729897/extracting-data-from-html-table-using-scrapy-response-xpath-yields-none/50733277#50733277", "title": "Extracting data from HTML table using scrapy: response.xpath() yields None", "body": "<pre><code>import scrapy\n\n\nclass ResidentialRecordsSpider(scrapy.Spider):\n    name = \"residential_records\"\n\n    start_urls = [\n        'http://land.elpasoco.com/ResidentialBuilding.aspx?schd=5317443025&amp;bldg=1',\n    ]\n\n    def parse(self, response):\n        for record in response.xpath('//table[@width=\"90%\"]//td'):\n            key = record.xpath('./strong/text()').extract_first(default='')\n            value = record.xpath('./text()').extract_first(default='')\n\n            yield { key: value }\n</code></pre>\n\n<p>Here you need to perform some data cleaning only</p>\n"}], "owner": {"reputation": 929, "user_id": 6814713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e8cf4703e0f253517a907c178d53d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/6814713/brendan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 0, "accepted_answer_id": 50733277, "answer_count": 1, "score": 0, "last_activity_date": 1528347851, "creation_date": 1528320612, "question_id": 50729897, "link": "https://stackoverflow.com/questions/50729897/extracting-data-from-html-table-using-scrapy-response-xpath-yields-none", "title": "Extracting data from HTML table using scrapy: response.xpath() yields None", "body": "<p>I've been building a web scraper in python 3 using the scrapy library and I'm running into a problem I don't understand. I've successfully scraped other tables using inspect element on the table to get the xpath variables. However, with this table, I am unable to figure out how to extract the data from the table. I am new to HTML but not new to programming, so please help me if I'm way off here.</p>\n\n<p>An example of this web page would be: <a href=\"http://land.elpasoco.com/ResidentialBuilding.aspx?schd=5317443025&amp;bldg=1\" rel=\"nofollow noreferrer\">http://land.elpasoco.com/ResidentialBuilding.aspx?schd=5317443025&amp;bldg=1</a></p>\n\n<p>Inspecting the page and getting the xpath for the target table yields <code>//*[@id=\"aspnetForm\"]/table/tbody/tr[3]/td[1]/table/tbody/tr[1]/td/table/tbody/tr[3]/td/table</code></p>\n\n<p>However, using this in a scrapy shell <code>response.xpath(target).extract()</code> returns <code>[]</code>. Trying to target any individual cells also appears to provide the same null result. My intended result would be a dataframe or dictionary correlating something like <code>{'Dwelling Units': 1, 'Year Built': 2010 ... }</code> Any help identifying where I'm going wrong would or how to get the data formatted as such would be appreciated. Thanks!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 0, "last_activity_date": 1528321283, "last_edit_date": 1528321283, "creation_date": 1528320947, "answer_id": 50729964, "question_id": 50729892, "link": "https://stackoverflow.com/questions/50729892/calculate-bounce-rate-by-day/50729964#50729964", "title": "calculate bounce rate by day", "body": "<p>You could try like this:</p>\n\n<pre><code>bouncerate = (df.loc[df['PageViews'] == 1]\n              .groupby('Date/Timestamp')['Session ID'].count()\n              .div(df.groupby('Date/Timestamp')['Session ID']\n                   .count())\n              .to_frame('Bounce Rate'))\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>bouncerate = (df.groupby('Date/Timestamp')\n              .apply(lambda x: sum(x.PageViews == 1) / x.PageViews.count())\n              .to_frame('Bounce Rate'))\n</code></pre>\n\n<p>Both result in:</p>\n\n<pre><code>&gt;&gt;&gt; bouncerate\n                    Bounce Rate\nDate/Timestamp             \n2/14/2016          0.333333\n3/23/2016          0.666667\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321466, "creation_date": 1528321466, "answer_id": 50730066, "question_id": 50729892, "link": "https://stackoverflow.com/questions/50729892/calculate-bounce-rate-by-day/50730066#50730066", "title": "calculate bounce rate by day", "body": "<p>You need:</p>\n\n<pre><code>grp = session_df.groupby(session_df['Date/Timestamp'].dt.day)['Session_ID'].count()\nsession_1 = session_df.loc[session_df['PageViews']==1].groupby(session_df['Date/Timestamp'].dt.day)['Session_ID'].count()\npd.DataFrame({'bouncerate':list(session_1/grp)}, index=session_df['Date/Timestamp'].unique())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>           bouncerate\n2016-02-14  0.333333\n2016-03-23  0.666667\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 9905659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d670c0704882478c26d33e1fb8107ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Mr weasel", "link": "https://stackoverflow.com/users/9905659/mr-weasel"}, "is_accepted": false, "score": 1, "last_activity_date": 1528321853, "creation_date": 1528321853, "answer_id": 50730139, "question_id": 50729892, "link": "https://stackoverflow.com/questions/50729892/calculate-bounce-rate-by-day/50730139#50730139", "title": "calculate bounce rate by day", "body": "<p>You not need define separate <code>Bounced?</code> column. Take <code>count</code> of grouped rows where <code>PageViews==1</code> and divide by number of all rows for that date to get fraction</p>\n\n<pre><code>daily_session_bounce_rate = \\\n    df[df['PageViews']==1].groupby('Date/Timestamp').agg({'Session ID':'count'}) /\\\n    df.groupby('Date/Timestamp').agg({'Session ID':'count'})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2463, "user_id": 2095131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39cab2a4025e418e957c3ede56d0fad?s=128&d=identicon&r=PG", "display_name": "hcoat", "link": "https://stackoverflow.com/users/2095131/hcoat"}, "edited": false, "score": 1, "creation_date": 1528336120, "post_id": 50730149, "comment_id": 88471595, "body": "It is helpful to describe what is going on with your code. This will give context and help the OP as well as people that come across this answer in the future."}], "tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": false, "score": 0, "last_activity_date": 1528340842, "last_edit_date": 1528340842, "creation_date": 1528321915, "answer_id": 50730149, "question_id": 50729892, "link": "https://stackoverflow.com/questions/50729892/calculate-bounce-rate-by-day/50730149#50730149", "title": "calculate bounce rate by day", "body": "<pre><code>sessions_df['bounced?'] = sessions_df['PageViews']==1\ndaily_session_bounce_rate = sessions_df.groupby('Date/Timestamp').mean()['bounced?']\n</code></pre>\n\n<p>The first line creates a column based of whether <code>PageViews</code> is equal to 1. This is opposite from how you did it; you had <code>bounced?</code> be <code>True</code> when <code>PageViews</code> is more than 1 ... which, if I understand your use of \"bounced\" correctly, is a case where the user <em>didn't</em> bounce.</p>\n\n<p>The second line groups by <code>Date/Timestamp</code> and then takes the mean. Whenever you do math with booleans like this, Python casts them as int, so every time someone bounces, that's True/1, and whenever they don't, that's False/0. Thus, the sum of the values of the booleans as int is the same as the count of True. When you tell pandas to take the mean of a Series of booleans, it takes the sum/count of True, and divides by the total number of values, which is the same as finding the percentage of times you have True.</p>\n\n<p>Thus, grouping by Date and taking the mean gives you a dataframe where the rows are dates and the columns are the means for that date. The resulting dataframe has a column for each column of the original dataframe (in this case, you have a column consisting of the mean <code>PageViews</code> for each date, and a column of the mean <code>bounced?</code> for each date). If you just want the bounce percentage, you can subset the data frame with <code>['bounced?']</code></p>\n"}], "owner": {"reputation": 767, "user_id": 4602281, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/196ebe50c7744544c120e8ab49f07da5?s=128&d=identicon&r=PG&f=1", "display_name": "qshng", "link": "https://stackoverflow.com/users/4602281/qshng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 50729964, "answer_count": 4, "score": 1, "last_activity_date": 1528340842, "creation_date": 1528320576, "last_edit_date": 1528320959, "question_id": 50729892, "link": "https://stackoverflow.com/questions/50729892/calculate-bounce-rate-by-day", "title": "calculate bounce rate by day", "body": "<p>This seems like a really easy task, but I have been struggling with it for a while.</p>\n\n<p>I want to calculated the (number of sessions with PageView==1) / (total number of sessions) per day, sample data below</p>\n\n<p><code>session_df</code></p>\n\n<pre><code>Date/Timestamp  Session ID  PageViews\n2/14/2016          a           1\n2/14/2016          b           5\n2/14/2016          c           8\n3/23/2016          d           1\n3/23/2016          e           1\n3/23/2016          f           2\n</code></pre>\n\n<p>and the expected output:</p>\n\n<pre><code>Date/Timestamp  BounceRate\n2/14/2016       0.333333333\n3/23/2016       0.666666667\n</code></pre>\n\n<p>I tried first add a <code>Bounced?</code> column based on the PageViews number, then groupby and calculate the percentage, then I need to filter out the <code>bounced?==False</code> which is very cumbersome. If anyone can suggest a better way for doing this that would be great!</p>\n\n<pre><code>sessions_df['Bounced?'] = sessions_df['PageViews']&gt;1\ndt = pd.DatetimeIndex(sessions_df['Date/Timestamp'])\ndaily_session_bounce_rate = sessions_df.groupby([dt.date, 'Bounced?']).agg({'Session ID':'count'})\n\ndaily_session_bounce_rate = daily_session_bounce_rate.groupby(level=0).apply(lambda x: x / float(x.sum()))\ndaily_session_bounce_rate\n# this is my output\n           Bounced? Session ID\n2016-01-01  False   0.459893\n            True    0.540107\n\n\n#filter data\ndaily_session_bounce_rate.loc[daily_session_bounce_rate['Bounced?']==True,['level_0','Session ID']]\n</code></pre>\n"}, {"tags": ["python", "pandas", "count", "duplicates", "overlap"], "comments": [{"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1528320583, "post_id": 50729885, "comment_id": 88467520, "body": "Can you post the expected output?"}, {"owner": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1528320843, "post_id": 50729885, "comment_id": 88467614, "body": "Yes. I want a matrix dataframe."}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1528320902, "post_id": 50729885, "comment_id": 88467633, "body": "If something were shared among three columns, how many overlaps would the be?"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 1, "creation_date": 1528320944, "post_id": 50729885, "comment_id": 88467640, "body": "Harv Ipan is asking for the expected output, not a <i>description</i> of the output."}, {"owner": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "edited": false, "score": 0, "creation_date": 1528321037, "post_id": 50729885, "comment_id": 88467674, "body": "I do not know how to write the output but the expected output is like next comment."}, {"owner": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "edited": false, "score": 0, "creation_date": 1528321238, "post_id": 50729885, "comment_id": 88467756, "body": "Dog                         Cat                      Bird                                                                      Dog        6                            1                            1                                              Cat         1                            6                           3                                                                Bird        1                            3                           6"}], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "edited": false, "score": 0, "creation_date": 1528585721, "post_id": 50730094, "comment_id": 88565428, "body": "TypeError: unsupported operand type(s) for @: &#39;DataFrame&#39; and &#39;DataFrame&#39;"}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "reply_to_user": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "edited": false, "score": 0, "creation_date": 1528617343, "post_id": 50730094, "comment_id": 88569973, "body": "What is your <code>pandas</code> version? It works on pandas <code>0.23.0</code>; in any event, you can fall back on matrix multiplication with <code>res = pd.DataFrame(df3.values @ df3.T.values, index=df3.index, columns=df3.index)</code>"}], "tags": [], "owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321616, "creation_date": 1528321616, "answer_id": 50730094, "question_id": 50729885, "link": "https://stackoverflow.com/questions/50729885/how-to-count-overlapped-values-among-columns/50730094#50730094", "title": "How to count overlapped values among columns", "body": "<p>Here is one way. The main challenge is to get a crosstabulation of animals and features. After that, the co-occurrence matrix is obtained with matrix multiplication.</p>\n\n<p>Note that the numbers on the diagonal reflect the number of unique features of each animal, which is different from your example.</p>\n\n<pre><code># get rid of duplicates and align animal names with features\ndf2 = df.stack().reset_index(1).drop_duplicates()\n# get a crosstabulation\ndf3 = pd.crosstab(df2.iloc[:, 1], df2.iloc[:, 0])\n# coocurrence matrix is obtained with matrix multiplication\nres = df3.T @ df3\n# level_1  Bird  Cat  Dog\n# level_1\n# Bird        6    3    1\n# Cat         3    4    1\n# Dog         1    1    5\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 7479634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbdc348667310d64b56faaba89bbd9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_Hanks", "link": "https://stackoverflow.com/users/7479634/tom-hanks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528321616, "creation_date": 1528320537, "last_edit_date": 1528321466, "question_id": 50729885, "link": "https://stackoverflow.com/questions/50729885/how-to-count-overlapped-values-among-columns", "title": "How to count overlapped values among columns", "body": "<p>Please let me ask a question about pandas dataframe.\nFor example, I have a dataframe like this.</p>\n\n<pre><code>df = pd.DataFrame({'Dog': ['aa','bb','cc','dd','aa','ff'], 'Cat':['dd','ee','dd','as','ae','ee'], 'Bird':['ff','cd','ee','def','ae','as']})\ndf\n</code></pre>\n\n<p>Each column represents animal's information.\nI want to know how many overlaps exist among animals.\nFor instance, Dog and Cat share \"dd\", so one overlap.\nDog and Bird share \"ff\", so one overlap.</p>\n\n<p>Some animals have duplicates in their own columns.\nFor example, Dog has a duplicate as \"aa\".\nSo I want to remove the duplicates in an animal first and then want to analyze the number of duplicates among animals.</p>\n\n<p>If you could give me your thoughts, I would be grateful for that very much.</p>\n\n<p>P.S. Expected output is like this panel.</p>\n\n<p><a href=\"https://i.stack.imgur.com/LQ3aF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LQ3aF.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "algorithm", "loops", "depth-first-search"], "comments": [{"owner": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "edited": false, "score": 0, "creation_date": 1528320634, "post_id": 50729869, "comment_id": 88467536, "body": "Do you have a specific error or portion of the program written that is not yielding the desired results?"}, {"owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "reply_to_user": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "edited": false, "score": 0, "creation_date": 1528321388, "post_id": 50729869, "comment_id": 88467797, "body": "It never stops running as their is no break/return in the iterMove() function. This is because there are no good moves (ie. moving the 0 doesn&#39;t lower the heruistics). Apparently you have to continue to iterate contineously towards the goal state but I do not understand how that is specifically implimented."}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "edited": false, "score": 0, "creation_date": 1528378012, "post_id": 50730940, "comment_id": 88492465, "body": "So I ran this with my code, the first issue is that position is referenced before assignment. Do I set position in the while loop as all possible iterations from start_position. ie <code>for possible_move in neighbours(starting_position) :    position = swap(puzzle, possible_move) </code>"}, {"owner": {"reputation": 35094, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "reply_to_user": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "edited": false, "score": 0, "creation_date": 1528383500, "post_id": 50730940, "comment_id": 88496471, "body": "@Jack That was a mistake.  Make it queue instead.  It is a queue of tuples and the position is a part of the tuple."}, {"owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "edited": false, "score": 0, "creation_date": 1528411109, "post_id": 50730940, "comment_id": 88509924, "body": "Do I have to define a set called seen?  Because it&#39;s not defined in the code. Nor is solved"}, {"owner": {"reputation": 35094, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "reply_to_user": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "edited": false, "score": 0, "creation_date": 1528414331, "post_id": 50730940, "comment_id": 88510765, "body": "@Jack Yes.  solved should be the position you are looking for.  And seen needs to be a set.  That&#39;s part of why I said &quot;the critical piece of code&quot; and not &quot;working code&quot;."}], "tags": [], "owner": {"reputation": 35094, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": false, "score": 0, "last_activity_date": 1528383413, "last_edit_date": 1528383413, "creation_date": 1528327212, "answer_id": 50730940, "question_id": 50729869, "link": "https://stackoverflow.com/questions/50729869/python-n-puzzle-8-puzzle-solver-heruistics-how-to-iterate/50730940#50730940", "title": "Python: N Puzzle (8-Puzzle) Solver Heruistics: How to iterate?", "body": "<p>To implement A* in Python you can use <a href=\"https://docs.python.org/3/library/heapq.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/heapq.html</a> for a priority queue.  You put possible positions into the queue with a priority of \"cost so far + heuristic for remaining cost\".  When you take them out of the queue you check a set of already seen positions.  Skip this one if you've seen the position, else add it to the set and then process.</p>\n\n<p>An untested version of the critical piece of code:</p>\n\n<pre><code>queue = [(heuristic(starting_position), 0, starting_position, None)]\nwhile 0 &lt; len(queue):\n    (est_moves, cur_moves, position, history) = heapq.heappop(queue)\n    if position in seen:\n        continue\n    elif position = solved:\n        return history\n    else:\n        seen.add(position)\n        for move in possible_moves(position):\n            next_position = position_after_move(position, move)\n            est_moves = cur_moves + 1 + heuristic(next_position)\n            heapq.heappush(queue,\n                          (est_moves, cur_moves+1,\n                           next_position, (move, history)))\nreturn None\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 693, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528383413, "creation_date": 1528320469, "last_edit_date": 1528321422, "question_id": 50729869, "link": "https://stackoverflow.com/questions/50729869/python-n-puzzle-8-puzzle-solver-heruistics-how-to-iterate", "title": "Python: N Puzzle (8-Puzzle) Solver Heruistics: How to iterate?", "body": "<p>I have written a selection of functions to try and solve a N-puzzle / 8-puzzle.  </p>\n\n<p>I am quite content with my ability to manipulate the puzzle but am struggling with how to iterate and find the best path. My skills are not in OOP either and so the functions are simple.</p>\n\n<p>The idea is obviously to reduce the heruistic distance and place all pieces in their desired locations.</p>\n\n<p>I have read up a lot of other questions regarding this topic but they're often more advanced and OOP focused.</p>\n\n<p>When I try and iterate through there are no good moves. I'm not sure how to perform the A* algorithm. </p>\n\n<pre><code>from math import sqrt, fabs\nimport copy as cp\n\n# Trial puzzle\npuzzle1 = [\n    [3,5,4],\n    [2,1,0],\n    [6,7,8]]\n\n# This function is used minimise typing later\ndef starpiece(piece):\n    '''Checks the input of a *arg and returns either tuple'''\n    if piece == ():\n        return 0\n    elif isinstance(piece[0], (str, int)) == True:\n        return piece[0]\n    elif isinstance(piece[0], (tuple, list)) and len(piece[0]) == 2:\n        return piece[0]\n\n# This function creates the goal puzzle layout\ndef goal(puzzle):\n    '''Input a nested list and output an goal list'''\n    n = len(puzzle) * len(puzzle)\n    goal = [x for x in range(1,n)]\n    goal.append(0)\n    nested_goal = [goal[i:i+len(puzzle)] for i in range(0, len(goal), len(puzzle))]\n    return nested_goal\n\n# This fuction gives either the coordinates (as a tuple) of a piece in the puzzle\n# or the piece in the puzzle at give coordinates \ndef search(puzzle, *piece):\n    '''Input a puzzle and piece value and output a tuple of coordinates. \n    If no piece is selected 0 is chosen by default. If coordinates are \n    entered the piece value at those coordinates are outputed'''\n    piece = starpiece(piece)\n    if isinstance(piece, (tuple, list)) == True:\n        return puzzle[piece[0]][piece[1]]\n    for slice1, sublist in enumerate(puzzle):\n        for slice2, item in enumerate(sublist):\n            if puzzle[slice1][slice2] == piece:\n                x, y = slice1, slice2\n    return (x, y)  \n\n# This function gives the neighbours of a piece at a given position as a list of coordinates\ndef neighbours(puzzle, *piece):\n    '''Input a position (as a tuple) or piece and output a list \n    of adjacent neighbours. Default are the neighbours to 0'''\n    length = len(puzzle) - 1\n    return_list = []\n    piece = starpiece(piece)\n    if isinstance(piece, tuple) != True:\n        piece = search(puzzle, piece)\n    if (piece[0] - 1) &gt;= 0:\n        x_minus = (piece[0] - 1)\n        return_list.append((x_minus, piece[1]))\n    if (piece[0] + 1) &lt;= length:\n        x_plus = (piece[0] + 1)\n        return_list.append((x_plus, piece[1]))\n    if (piece[1] - 1) &gt;= 0:\n        y_minus = (piece[1] - 1)\n        return_list.append((piece[0], y_minus))\n    if (piece[1] + 1) &lt;= length:\n        y_plus = (piece[1] + 1)\n        return_list.append((piece[0], y_plus))\n    return return_list\n\n# This function swaps piece values of adjacent cells \ndef swap(puzzle, cell1, *cell2):\n    '''Moves two cells, if adjacent a swap occurs. Default value for cell2 is 0.\n    Input either a cell value or cell cooridinates''' \n    cell2 = starpiece(cell2)\n    if isinstance(cell1, (str, int)) == True:\n        cell1 = search(puzzle, cell1)    \n    if isinstance(cell2, (str, int)) == True:\n        cell2 = search(puzzle, cell2) \n    puzzleSwap = cp.deepcopy(puzzle)\n    if cell1 == cell2:\n        print('Warning: no swap occured as both cell values were {}'.format(search(puzzle,cell1)))\n        return puzzleSwap\n    elif cell1 in neighbours(puzzleSwap, cell2):\n        puzzleSwap[cell1[0]][cell1[1]], puzzleSwap[cell2[0]][cell2[1]] = puzzleSwap[cell2[0]][cell2[1]], puzzleSwap[cell1[0]][cell1[1]]\n        return puzzleSwap\n    else:\n        print('''Warning: no swap occured as cells aren't adjacent''')\n        return puzzleSwap\n\n# This function gives true if a piece is in it's correct position\ndef inplace(puzzle, p):\n    '''Ouputs bool on whether a piece is in it's correct position'''\n    if search(puzzle, p) == search(goal(puzzle), p):\n        return True\n    else:\n        return False\n\n# These functions give heruistic measurements \ndef heruistic(puzzle):\n    '''All returns heruistic (misplaced, total distance) as a tuple. Other \n    choices are: heruistic misplaced, heruistic distance or heruistic list'''\n    heruistic_misplaced = 0\n    heruistic_distance = 0\n    heruistic_distance_total = 0\n    heruistic_list = []\n    for sublist in puzzle:\n        for item in sublist:\n            if inplace(puzzle, item) == False:\n                heruistic_misplaced += 1          \n    for sublist in puzzle:\n        for item in sublist:\n            a = search(puzzle, item)\n            b = search(goal(puzzle), item)\n            heruistic_distance = int(fabs(a[0] - b[0]) + fabs(a[1] - b[1]))\n            heruistic_distance_total += heruistic_distance\n            heruistic_list.append(heruistic_distance)\n\n    return (heruistic_misplaced, heruistic_distance_total, heruistic_list)\n\ndef hm(puzzle):\n    '''Outputs heruistic misplaced'''\n    return heruistic(puzzle)[0]\n\ndef hd(puzzle):\n    '''Outputs total heruistic distance'''\n    return heruistic(puzzle)[1]\n\ndef hl(puzzle):\n    '''Outputs heruistic list'''\n    return heruistic(puzzle)[2]\n\ndef hp(puzzle, p):\n    '''Outputs heruistic distance at a given location'''\n    x, y = search(puzzle, p)[0], search(puzzle, p)[1]\n    return heruistic(puzzle)[2][(x * len(puzzle)) + y]\n\n# This is supposted to iterate along a route according to heruistics but doesn't work\ndef iterMove(puzzle):\n    state = cp.deepcopy(puzzle)\n    while state != goal(puzzle):\n        state_hd = hd(state)\n        state_hm = hm(state)\n        moves = neighbours(state)\n        ok_moves = []\n        good_moves = []\n        for move in moves:\n            maybe_state = swap(state, move)\n            if hd(maybe_state) &lt; state_hd and hm(maybe_state) &lt; state_hm:\n                good_moves.append(move)\n            elif hd(maybe_state) &lt; state_hd:\n                ok_moves.append(move)\n            elif hm(maybe_state) &lt; state_hm:\n                ok_moves.append(move)\n        if good_moves != []:\n            print(state)\n            state = swap(state, good_moves[0])\n        elif ok_moves != []:\n            print(state)\n            state = swap(state, ok_moves[0])\n\n\n&gt;&gt; iterMove(puzzle1)\n'no good moves'\n</code></pre>\n"}, {"tags": ["python", "api", "kubernetes", "scheduler"], "comments": [{"owner": {"reputation": 1897, "user_id": 9498806, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d0bry", "link": "https://stackoverflow.com/users/9498806/d0bry"}, "edited": false, "score": 0, "creation_date": 1528386927, "post_id": 50729834, "comment_id": 88498762, "body": "What version of <a href=\"https://github.com/kubernetes-client/python\" rel=\"nofollow noreferrer\">Kubernetes Python Client</a> do you use?"}, {"owner": {"reputation": 3096, "user_id": 3808276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXVzR.jpg?s=128&g=1", "display_name": "Abu Shoeb", "link": "https://stackoverflow.com/users/3808276/abu-shoeb"}, "reply_to_user": {"reputation": 1897, "user_id": 9498806, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d0bry", "link": "https://stackoverflow.com/users/9498806/d0bry"}, "edited": false, "score": 0, "creation_date": 1528393138, "post_id": 50729834, "comment_id": 88501923, "body": "Metadata-Version: 2.1, Name: kubernetes, Version: 6.0.0"}, {"owner": {"reputation": 3096, "user_id": 3808276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXVzR.jpg?s=128&g=1", "display_name": "Abu Shoeb", "link": "https://stackoverflow.com/users/3808276/abu-shoeb"}, "reply_to_user": {"reputation": 1897, "user_id": 9498806, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "d0bry", "link": "https://stackoverflow.com/users/9498806/d0bry"}, "edited": false, "score": 0, "creation_date": 1528467763, "post_id": 50729834, "comment_id": 88533044, "body": "@d0bry let me know if you need additional information. Also any luck with that?"}, {"owner": {"reputation": 135, "user_id": 405407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e717c3a27e45887c4578f649f4e6c86e?s=128&d=identicon&r=PG", "display_name": "chinuy", "link": "https://stackoverflow.com/users/405407/chinuy"}, "edited": false, "score": 1, "creation_date": 1528852950, "post_id": 50729834, "comment_id": 88660293, "body": "I got the same issue. And the issue seems yet unsolved <a href=\"https://github.com/kubernetes-client/gen/issues/52\" rel=\"nofollow noreferrer\">github.com/kubernetes-client/gen/issues/52</a>"}, {"owner": {"reputation": 3096, "user_id": 3808276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXVzR.jpg?s=128&g=1", "display_name": "Abu Shoeb", "link": "https://stackoverflow.com/users/3808276/abu-shoeb"}, "reply_to_user": {"reputation": 135, "user_id": 405407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e717c3a27e45887c4578f649f4e6c86e?s=128&d=identicon&r=PG", "display_name": "chinuy", "link": "https://stackoverflow.com/users/405407/chinuy"}, "edited": false, "score": 0, "creation_date": 1529425724, "post_id": 50729834, "comment_id": 88864667, "body": "@chinuy I switched to v2.0 with k8 v1.7 and it seemed working."}], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 9184911, "user_type": "registered", "profile_image": "https://graph.facebook.com/1619101931492931/picture?type=large", "display_name": "Ishak Hari", "link": "https://stackoverflow.com/users/9184911/ishak-hari"}, "is_accepted": false, "score": 0, "last_activity_date": 1584322900, "creation_date": 1584322900, "answer_id": 60699400, "question_id": 50729834, "link": "https://stackoverflow.com/questions/50729834/kubernetes-python-client-api-create-namespaced-binding-method-shows-target-nam/60699400#60699400", "title": "Kubernetes Python Client API create_namespaced_binding() method shows target.name: Required value error", "body": "<p>I faced the same problem am using <strong>python3</strong>, i just uninstalled <strong>kubernetes library</strong> by typing:</p>\n\n<pre><code> pip3 uninstall kubernetes \n</code></pre>\n\n<p>then i installed version <code>2.0.0</code> by typing: </p>\n\n<pre><code> pip install kubernetes==2.0.0\n</code></pre>\n\n<p>verify that is successfully installed:</p>\n\n<pre><code> pip3 freeze | grep kubernetes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1559, "user_id": 3855364, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7DpBm.png?s=128&g=1", "display_name": "Mina Michael", "link": "https://stackoverflow.com/users/3855364/mina-michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1610220841, "creation_date": 1610220841, "answer_id": 65646811, "question_id": 50729834, "link": "https://stackoverflow.com/questions/50729834/kubernetes-python-client-api-create-namespaced-binding-method-shows-target-nam/65646811#65646811", "title": "Kubernetes Python Client API create_namespaced_binding() method shows target.name: Required value error", "body": "<p>I've used this workaround <a href=\"https://github.com/kubernetes-client/python/issues/825#issuecomment-613863221\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>I've rewritten the <code>scheduler</code> function like this:</p>\n<pre><code>def scheduler(name, node, namespace=&quot;default&quot;):\n    target=client.V1ObjectReference()\n    target.kind=&quot;Node&quot;\n    target.apiVersion=&quot;v1&quot;\n    target.name= node\n    meta=client.V1ObjectMeta()\n    meta.name=name\n    body=client.V1Binding(target=target)\n    body.metadata=meta\n    return v1.create_namespaced_binding(namespace, body, _preload_content=False)\n</code></pre>\n"}], "owner": {"reputation": 3096, "user_id": 3808276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXVzR.jpg?s=128&g=1", "display_name": "Abu Shoeb", "link": "https://stackoverflow.com/users/3808276/abu-shoeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1610220841, "creation_date": 1528320249, "last_edit_date": 1528467674, "question_id": 50729834, "link": "https://stackoverflow.com/questions/50729834/kubernetes-python-client-api-create-namespaced-binding-method-shows-target-nam", "title": "Kubernetes Python Client API create_namespaced_binding() method shows target.name: Required value error", "body": "<p>I'm using Kubernetes <a href=\"https://github.com/kubernetes-client/python\" rel=\"nofollow noreferrer\">Python Client to implement</a> to implement a custom scheduler. Here is the code of the scheduler.</p>\n\n<pre><code>from kubernetes import client, config, watch\nfrom kubernetes.client.rest import ApiException\nconfig.load_kube_config()\nv1 = client.CoreV1Api()\n\nscheduler_name = 'custom-scheduler-test'\n\ndef nodes_available():\n    ready_nodes = []\n    for n in v1.list_node().items:\n        for status in n.status.conditions:\n            if status.status == 'True' and status.type == 'Ready':\n                ready_nodes.append(n.metadata.name)\n    return ready_nodes\n\ndef scheduler(name, node, namespace='default'):\n    body = client.V1ConfigMap()\n    target = client.V1ObjectReference()\n    target.kind = 'Node'\n    target.apiVersion = 'v1'\n    target.name = node\n    meta = client.V1ObjectMeta()\n    meta.name = name\n    body.target = target\n    body.metadata = meta\n    return v1.create_namespaced_binding(namespace, body)\n\ndef main():\n    w = watch.Watch()\n    for event in w.stream(v1.list_namespaced_pod, 'default'):\n        if event['object'].status.phase == 'Pending' and event['object'\n                ].spec.scheduler_name == scheduler_name:\n            try:\n                res = scheduler(event['object'].metadata.name,random.choice(nodes_available()))\n            except ApiException as e:\n                print (\"Exception when calling CoreV1Api-&gt;create_namespaced_binding: %s\\n\" % e)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>This code worked before for Kubernetes 1.6 but now I have 1.7 and it shows <code>target.name: Required value</code>. Any clue to fix the error? </p>\n\n<p>Error Message</p>\n\n<pre><code>Exception when calling CoreV1Api-&gt;create_namespaced_binding: (500)\nReason: Internal Server Error\nHTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json', 'Date': 'Wed, 06 Jun 2018 20:55:04 GMT', 'Content-Length': '120'})\nHTTP response body: {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"target.name: Required value\",\"code\":500} \n</code></pre>\n\n<p><strong>Updated on 2018-06-08</strong></p>\n\n<p>If I use <code>body = client.V1Binding()</code> instead of <code>body = client.V1ConfigMap()</code> it shows following error message    </p>\n\n<pre><code> File \"/usr/lib/python2.7/site-packages/kubernetes/client/models/v1_binding.py\", line 64, in __init__\n    self.target = target\n  File \"/usr/lib/python2.7/site-packages/kubernetes/client/models/v1_binding.py\", line 156, in target\n    raise ValueError(\"Invalid value for `target`, must not be `None`\")\nValueError: Invalid value for `target`, must not be `None`\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "macos", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321486, "last_edit_date": 1528321486, "creation_date": 1528321006, "answer_id": 50729980, "question_id": 50729809, "link": "https://stackoverflow.com/questions/50729809/selenium-remote-webdriver-error-connection-refused/50729980#50729980", "title": "Selenium remote webdriver error (Connection refused)", "body": "<p>As per the <em>API Docs</em> the <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html#module-selenium.webdriver.remote.webdriver\" rel=\"nofollow noreferrer\"><strong>Remote WebDriver</strong></a> implementation is as follows:</p>\n\n<pre><code>class selenium.webdriver.remote.webdriver.WebDriver(command_executor='http://127.0.0.1:4444/wd/hub', desired_capabilities=None, browser_profile=None, proxy=None, keep_alive=False, file_detector=None, options=None)\n</code></pre>\n\n<p>An <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver/selenium.webdriver.common.desired_capabilities.html#module-selenium.webdriver.common.desired_capabilities\" rel=\"nofollow noreferrer\"><strong>example</strong></a>:</p>\n\n<pre><code># Instantiate an instance of Remote WebDriver with the desired capabilities.\ndriver = webdriver.Remote(desired_capabilities=capabilities, command_executor=selenium_grid_url)    \n</code></pre>\n\n<p>So you need to change the line of code from:</p>\n\n<pre><code>driver= webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.CHROME,command_executor='http://127.0.0.1:4444')\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>driver= webdriver.Remote(desired_capabilities=DesiredCapabilities().CHROME,command_executor='http://127.0.0.1:4444')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 2, "last_activity_date": 1528325626, "creation_date": 1528325626, "answer_id": 50730721, "question_id": 50729809, "link": "https://stackoverflow.com/questions/50729809/selenium-remote-webdriver-error-connection-refused/50730721#50730721", "title": "Selenium remote webdriver error (Connection refused)", "body": "<p>Make sure you've started the <a href=\"https://www.seleniumhq.org/download/\" rel=\"nofollow noreferrer\">Selenium Standalone Server</a>:</p>\n\n<pre><code>java -jar /path/to/selenium-server-standalone-&lt;version&gt;.jar \n</code></pre>\n\n<p>You should see output which looks something like this:</p>\n\n<pre><code>Jun 06, 2018 6:47:59 PM org.openqa.grid.selenium.GridLauncher main\nINFO: Launching a standalone server\n18:47:59.720 INFO - Java: Oracle Corporation 24.171-b02\n18:47:59.722 INFO - OS: Linux 3.13.0-149-generic amd64\n18:47:59.731 INFO - v2.13.0, with Core v2.13.0. Built from revision 14793\n18:47:59.889 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub\n18:47:59.891 INFO - Version Jetty/5.1.x\n18:47:59.892 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]\n18:47:59.893 INFO - Started HttpContext[/selenium-server,/selenium-server]\n18:47:59.893 INFO - Started HttpContext[/,/]\n18:47:59.915 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@6c15f918\n18:47:59.915 INFO - Started HttpContext[/wd,/wd]\n18:47:59.919 INFO - Started SocketListener on 0.0.0.0:4444\n18:47:59.919 INFO - Started org.openqa.jetty.jetty.Server@606145c5\n</code></pre>\n\n<p>Notice, in particular the line which reads:</p>\n\n<pre><code>RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub\n</code></pre>\n\n<p>Use this URL in <code>command_executor</code>:</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Remote(\n    desired_capabilities=webdriver.DesiredCapabilities.CHROME,\n    command_executor='http://127.0.0.1:4444/wd/hub')\ndriver.get('http://www.google.com')\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9539923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f46cfea5c0e1a4cfecf60d42ec56e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Ro0t777", "link": "https://stackoverflow.com/users/9539923/ro0t777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2237, "favorite_count": 2, "accepted_answer_id": 50730721, "answer_count": 2, "score": 2, "last_activity_date": 1528325626, "creation_date": 1528320106, "question_id": 50729809, "link": "https://stackoverflow.com/questions/50729809/selenium-remote-webdriver-error-connection-refused", "title": "Selenium remote webdriver error (Connection refused)", "body": "<pre><code>from selenium import webdriver\nimport sys\nimport os\ncwd = os.getcwd()\ndriver= webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.CHROME,command_executor='http://127.0.0.1:4444')\ndriver.get('http://www.google.com')\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>urllib.error.URLError: &lt;urlopen error [Errno 61] Connection refused&gt;\n</code></pre>\n\n<p>this program works a while ago, but now it does not. this is why I think it is a system error. (OSX 10.13.4)</p>\n"}, {"tags": ["python", "jupyter-notebook", "jupyter", "bokeh", "jupyter-lab"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 2483446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd89dae949dd10cb385e05e7666f5cfe?s=128&d=identicon&r=PG", "display_name": "jdep", "link": "https://stackoverflow.com/users/2483446/jdep"}, "edited": false, "score": 0, "creation_date": 1528489551, "post_id": 50752420, "comment_id": 88543306, "body": "That&#39;s what I was afraid of. Thanks for the info."}], "tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": false, "score": 1, "last_activity_date": 1528424031, "creation_date": 1528424031, "answer_id": 50752420, "question_id": 50729806, "link": "https://stackoverflow.com/questions/50729806/showing-bokeh-plots-in-binder/50752420#50752420", "title": "Showing Bokeh plots in Binder", "body": "<p>Bokeh server apps, such as the one embedded in the notebook you link to, required the ability to open and maintain a websocket connection to the client. It's entirely possible that Binder is running behind some sort of proxy such as Nginx, and that they do not automatically proxy websocket connections. You might take things up with Binder support to ask them if this is the case or if there is any network configuration change they can make on their end. </p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 2483446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd89dae949dd10cb385e05e7666f5cfe?s=128&d=identicon&r=PG", "display_name": "jdep", "link": "https://stackoverflow.com/users/2483446/jdep"}, "edited": false, "score": 0, "creation_date": 1541480090, "post_id": 52825904, "comment_id": 93221825, "body": "Thanks, juniper. I should have updated. This method was not implemented when I asked originally, but @bigreddot pointed me to this method on Twitter later this summer. Marking this as the accepted answer now for anyone who sees this later."}], "tags": [], "owner": {"reputation": 5222, "user_id": 899470, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/38ICt.jpg?s=128&g=1", "display_name": "juniper-", "link": "https://stackoverflow.com/users/899470/juniper"}, "is_accepted": true, "score": 2, "last_activity_date": 1539645143, "creation_date": 1539645143, "answer_id": 52825904, "question_id": 50729806, "link": "https://stackoverflow.com/questions/50729806/showing-bokeh-plots-in-binder/52825904#52825904", "title": "Showing Bokeh plots in Binder", "body": "<p>How about this example using <code>nbserverproxy</code>?</p>\n\n<p><a href=\"https://mybinder.readthedocs.io/en/latest/sample_repos.html#running-a-bokeh-server-with-binder\" rel=\"nofollow noreferrer\">https://mybinder.readthedocs.io/en/latest/sample_repos.html#running-a-bokeh-server-with-binder</a></p>\n"}], "owner": {"reputation": 143, "user_id": 2483446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd89dae949dd10cb385e05e7666f5cfe?s=128&d=identicon&r=PG", "display_name": "jdep", "link": "https://stackoverflow.com/users/2483446/jdep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 52825904, "answer_count": 2, "score": 0, "last_activity_date": 1539645143, "creation_date": 1528320091, "question_id": 50729806, "link": "https://stackoverflow.com/questions/50729806/showing-bokeh-plots-in-binder", "title": "Showing Bokeh plots in Binder", "body": "<p>I have a simple Jupyter Notebook that produces a <code>bokeh</code> plot from a <code>pandas</code> dataframe with some associated bokeh widgets. When I run it in both Jupyter Notebook and Lab, it outputs the plot and widgets and is interactive as designed. However, when I put those same files in a GitHub repo (<a href=\"https://github.com/deppen8/leiap_dashboard\" rel=\"nofollow noreferrer\">https://github.com/deppen8/leiap_dashboard</a>) and ran Binder, the output plot and widgets are not displayed.</p>\n\n<p>My <code>requirements.txt</code> is simple:</p>\n\n<pre><code>pandas\nbokeh\n</code></pre>\n\n<p>My <code>postBuild</code> is also simple:</p>\n\n<pre><code>jupyter labextension install jupyterlab_bokeh\njupyter trust survey_dashboard.ipynb\n</code></pre>\n\n<p>Am I missing something in these files to make <code>bokeh</code> (with widgets) work with Binder? Or is there something fundamentally incompatible about the bokeh widgets?</p>\n"}, {"tags": ["python", "pip", "google-cloud-dataflow", "google-cloud-pubsub", "requirements.txt"], "comments": [{"owner": {"reputation": 2936, "user_id": 3058302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9E2mA.jpg?s=128&g=1", "display_name": "amport", "link": "https://stackoverflow.com/users/3058302/amport"}, "edited": false, "score": 0, "creation_date": 1528814111, "post_id": 50729803, "comment_id": 88644786, "body": "Would you mind posting that last edit as your own answer? For future reference of the community."}, {"owner": {"reputation": 3806, "user_id": 1335793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jnl3V.png?s=128&g=1", "display_name": "Davos", "link": "https://stackoverflow.com/users/1335793/davos"}, "edited": false, "score": 0, "creation_date": 1538667235, "post_id": 50729803, "comment_id": 92232922, "body": "The docs say that you should just be using apache-beam SDK now, not google-cloud-dataflow anymore, see <a href=\"https://cloud.google.com/dataflow/docs/installing-dataflow-sdk\" rel=\"nofollow noreferrer\">cloud.google.com/dataflow/docs/installing-dataflow-sdk</a> I think having both of those (especially without versions) in the requirements could be problematic. You should always specify versions in a production app. It&#39;s fine for libraries to use &gt;= and the like in their dependencies, but for your production apps,  <i>Always pin your packages</i> <a href=\"https://nvie.com/posts/pin-your-packages/\" rel=\"nofollow noreferrer\">nvie.com/posts/pin-your-packages</a>"}, {"owner": {"reputation": 3806, "user_id": 1335793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jnl3V.png?s=128&g=1", "display_name": "Davos", "link": "https://stackoverflow.com/users/1335793/davos"}, "edited": false, "score": 0, "creation_date": 1538667524, "post_id": 50729803, "comment_id": 92233079, "body": "The Hitchiker&#39;s guide suggests to always created your requirements file using pip freeze: <a href=\"https://docs.python-guide.org/dev/virtualenvs/#lower-level-virtualenv\" rel=\"nofollow noreferrer\">docs.python-guide.org/dev/virtualenvs/#lower-level-virtualen&zwnj;&#8203;v</a> <code>pip freeze &gt; requirements.txt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2484, "user_id": 4652515, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2e351e259ed06a0a23381da0ebfa2717?s=128&d=identicon&r=PG&f=1", "display_name": "John Allard", "link": "https://stackoverflow.com/users/4652515/john-allard"}, "edited": false, "score": 0, "creation_date": 1533081183, "post_id": 51506084, "comment_id": 90212276, "body": "this is happening again to me now. My jobs ran fine for over a month but last night they all started failing with a missing dependency. Why would stuff begin to break without any new deployments? The expectation is that, once code is deployed, it should run fine without having to worry about it randomly breaking due to changed you guys make to the back end. Example job-id: 2018-07-31_01_00_04-12578868961948807002"}, {"owner": {"reputation": 3806, "user_id": 1335793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jnl3V.png?s=128&g=1", "display_name": "Davos", "link": "https://stackoverflow.com/users/1335793/davos"}, "edited": false, "score": 0, "creation_date": 1538666827, "post_id": 51506084, "comment_id": 92232631, "body": "I think it is generally bad advice to remove versions from requirements of a production application. When you deploy something like this in a managed environment (like dataflow), you aren&#39;t necessarily doing a deployment that is final. Your code may be wrapped and containerized, and those container images could be rebuilt at any time at the whim of the managed service provider for something upstream in e.g. a dockerfile. Even if you were deploying to a VM, in between your testing on a local build and deploying there could be a new version of one package that breaks the build on production."}], "tags": [], "owner": {"reputation": 303, "user_id": 9980065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a519b62ca8944e18f742972e498013?s=128&d=identicon&r=PG&f=1", "display_name": "Atybzz", "link": "https://stackoverflow.com/users/9980065/atybzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1532459909, "creation_date": 1532459909, "answer_id": 51506084, "question_id": 50729803, "link": "https://stackoverflow.com/questions/50729803/google-python-cloud-dataflow-instances-broke-without-new-deployment-failed-pubs/51506084#51506084", "title": "Google Python cloud-dataflow instances broke without new deployment (failed pubsub import)", "body": "<p>Building on the solution provided by <a href=\"https://stackoverflow.com/users/4652515/john-allard\">John Allard</a>, <a href=\"https://cloud.google.com/appengine/docs/standard/python/tools/using-libraries-python-27#copying_a_third-party_library\" rel=\"nofollow noreferrer\">removing the version</a> from the requirements.txt will automatically default to the latest version. Thus, with no version specified for <code>apache-beam[gcp]</code> , <code>google-cloud-dataflow</code> and <code>google-cloud-pubsub</code> they will all run on the latest version and solve the dependency issue. The requirements.txt will look like the following:</p>\n\n<pre><code>Flask==0.12.2\napache-beam[gcp]\ngunicorn==19.7.1\ngoogle-cloud-dataflow\ngoogle-cloud-datastore==1.3.0\npytz\ngoogle-cloud-pubsub\ngoogle-gax\ngrpc-google-iam-v1\ngoogleapis-common-protos\ngoogle-cloud==0.32\nsix==1.10.0\nprotobuf\n</code></pre>\n"}], "owner": {"reputation": 2484, "user_id": 4652515, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2e351e259ed06a0a23381da0ebfa2717?s=128&d=identicon&r=PG&f=1", "display_name": "John Allard", "link": "https://stackoverflow.com/users/4652515/john-allard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532459909, "creation_date": 1528320077, "last_edit_date": 1528327893, "question_id": 50729803, "link": "https://stackoverflow.com/questions/50729803/google-python-cloud-dataflow-instances-broke-without-new-deployment-failed-pubs", "title": "Google Python cloud-dataflow instances broke without new deployment (failed pubsub import)", "body": "<p>I have defined a few different Cloud Dataflow jobs for Python in the Google AppEngine Flex Environment. I have defined my requirements in a requirements.txt file, included my setup.py file, and everything was working just fine. My last deployment was on May 3rd, 2018. Looking through logs, I see that one of my jobs began failing on May 22nd, 2018. The job fails with a stack trace resulting from a bad import, seen below.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/dataflow_worker/batchworker.py\", line 582, in do_work\n    work_executor.execute()\n  File \"/usr/local/lib/python2.7/dist-packages/dataflow_worker/executor.py\", line 166, in execute\n    op.start()\n  File \"apache_beam/runners/worker/operations.py\", line 294, in apache_beam.runners.worker.operations.DoOperation.start (apache_beam/runners/worker/operations.c:10607)\n    def start(self):\n  File \"apache_beam/runners/worker/operations.py\", line 295, in apache_beam.runners.worker.operations.DoOperation.start (apache_beam/runners/worker/operations.c:10501)\n    with self.scoped_start_state:\n  File \"apache_beam/runners/worker/operations.py\", line 300, in apache_beam.runners.worker.operations.DoOperation.start (apache_beam/runners/worker/operations.c:9702)\n    pickler.loads(self.spec.serialized_fn))\n  File \"/usr/local/lib/python2.7/dist-packages/apache_beam/internal/pickler.py\", line 225, in loads\n    return dill.loads(s)\n  File \"/usr/local/lib/python2.7/dist-packages/dill/dill.py\", line 277, in loads\n    return load(file)\n  File \"/usr/local/lib/python2.7/dist-packages/dill/dill.py\", line 266, in load\n    obj = pik.load()\n  File \"/usr/lib/python2.7/pickle.py\", line 858, in load\n    dispatch[key](self)\n  File \"/usr/lib/python2.7/pickle.py\", line 1090, in load_global\n    klass = self.find_class(module, name)\n  File \"/usr/local/lib/python2.7/dist-packages/dill/dill.py\", line 423, in find_class\n    return StockUnpickler.find_class(self, module, name)\n  File \"/usr/lib/python2.7/pickle.py\", line 1124, in find_class\n    __import__(module)\n  File \"/usr/local/lib/python2.7/dist-packages/dataflow_pipeline/tally_overages.py\", line 27, in &lt;module&gt;\n    from google.cloud import pubsub\n  File \"/usr/local/lib/python2.7/dist-packages/google/cloud/pubsub.py\", line 17, in &lt;module&gt;\n    from google.cloud.pubsub_v1 import PublisherClient\n  File \"/usr/local/lib/python2.7/dist-packages/google/cloud/pubsub_v1/__init__.py\", line 17, in &lt;module&gt;\n    from google.cloud.pubsub_v1 import types\n  File \"/usr/local/lib/python2.7/dist-packages/google/cloud/pubsub_v1/types.py\", line 26, in &lt;module&gt;\n    from google.iam.v1.logging import audit_data_pb2\nImportError: No module named logging\n</code></pre>\n\n<p>So the main issue seems to come from the pubsub dependency relying on importing <code>google.iam.v1.logging</code>, which is installed from <code>grpc-google-iam-v1</code>. </p>\n\n<p>Here is my requirements.txt file</p>\n\n<pre><code>Flask==0.12.2\napache-beam[gcp]==2.1.1\ngunicorn==19.7.1\ngoogle-cloud-dataflow==2.1.1\ngoogle-cloud-datastore==1.3.0\npytz\ngoogle-cloud-pubsub\ngoogle-gax\ngrpc-google-iam-v1\ngoogleapis-common-protos\ngoogle-cloud==0.32\nsix==1.10.0\nprotobuf\n</code></pre>\n\n<p>I am able to run everything locally just fine by doing the following from my project.</p>\n\n<pre><code>$ virtualenv --no-site-packages .\n$ . bin/activate\n$ pip install --ignore-installed -r requirements.txt\n$ python main.py\nNo handlers could be found for logger \"oauth2client.contrib.multistore_file\"\nINFO:werkzeug: * Running on http://0.0.0.0:8080/ (Press CTRL+C to quit)\nINFO:werkzeug: * Restarting with stat\nNo handlers could be found for logger \"oauth2client.contrib.multistore_file\"\nWARNING:werkzeug: * Debugger is active!\nINFO:werkzeug: * Debugger PIN: 317-820-645\n</code></pre>\n\n<p>specifically, I am able to do the following locally just fine</p>\n\n<pre><code>$ python\n&gt;&gt;&gt; from google.cloud import pubsub\n&gt;&gt;&gt; import google.iam.v1.logging\n&gt;&gt;&gt; google.iam.v1.logging.__file__\n'/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/google/iam/v1/logging/__init__.pyc'\n</code></pre>\n\n<p>So I know that the installation of the <code>grpc-google-iam-v1</code> package is working just fine locally.. the required files are there. </p>\n\n<p>My questions are </p>\n\n<ol>\n<li>Why is the install of <code>grpc-google-iam-v1</code> on the Google AppEngine Flex Environment not installing all of the files correctly? I must be missing the <code>/site-packages/google/iam/v1/logging</code> directory.</li>\n<li>Why would this randomly start failing? I didn't do any more deploys, the same code was running and working on the 21st and then it broke on the 22nd on May.  </li>\n</ol>\n\n<hr>\n\n<p>I was able to get the pipeline running again after changing the requirements.txt file to</p>\n\n<pre><code>Flask==0.12.2\napache-beam[gcp]\ngoogle-cloud-dataflow\ngunicorn==19.7.1\ngoogle-cloud-datastore==1.3.0\npytz\ngoogle-cloud-pubsub\ngoogle-gax\ngrpc-google-iam-v1\ngoogleapis-common-protos\ngoogle-cloud==0.32\nsix==1.10.0\nprotobuf\n</code></pre>\n\n<p>so simply removing the version requirements from <code>apache-beam[gcp]</code> and <code>google-cloud-dataflow</code> did the trick.</p>\n"}, {"tags": ["python", "django", "django-anymail"], "answers": [{"tags": [], "owner": {"reputation": 4892, "user_id": 647002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/901717ff317580d55f04a8d91d883721?s=128&d=identicon&r=PG", "display_name": "medmunds", "link": "https://stackoverflow.com/users/647002/medmunds"}, "is_accepted": true, "score": 3, "last_activity_date": 1528327515, "last_edit_date": 1528327515, "creation_date": 1528327180, "answer_id": 50730932, "question_id": 50729779, "link": "https://stackoverflow.com/questions/50729779/anymail-not-sending-an-email-in-a-django-test-despite-that-mail-outbox-is-empty/50730932#50730932", "title": "AnyMail not sending an email in a Django test, despite that mail.outbox is empty?", "body": "<p>Anymail only captures messages in the outbox if you are using its <a href=\"http://anymail.readthedocs.io/en/stable/tips/test_backend/#testing-your-app\" rel=\"nofollow noreferrer\">test EmailBackend</a>:</p>\n\n<pre><code>@override_settings(EMAIL_BACKEND=\"anymail.backends.test.EmailBackend\")\n#                                                  ^^^^\nclass SendActivationEmailTestCase(TestCase):\n    ...\n</code></pre>\n\n<p>This doesn't apply in your case, because you're using the live Mailgun EmailBackend. That will indeed attempt to send the message (assuming you've also got MAILGUN_API_KEY set properly\u2014and since the <code>email.send()</code> didn't raise an error, you probably do).</p>\n\n<p>So you need to investigate why the mail appears to be sent, but you don't seem to be receiving it. The best place to start diagnosing any email sending issue is Mailgun's logs: <a href=\"https://app.mailgun.com/app/logs/\" rel=\"nofollow noreferrer\">https://app.mailgun.com/app/logs/</a>. (Be sure to select your correct sending domain from the menu on the left.) </p>\n\n<ul>\n<li><p>If you see an Accepted and Delivered event for your test message, the problem is at the receiving end. (Check your spam folder.)</p></li>\n<li><p>If you see Accepted, then Rejected or Fail events, the problem is at Mailgun: Anymail is managing to post your email to Mailgun, but Mailgun is refusing or unable to deliver it. Check the log events for an explanation. (A from_email that doesn't match a validated sender domain is a likely cause.)</p></li>\n<li><p>If you don't even see an Accepted event in Mailgun's logs, then the problem is Python-side: the message isn't even making it to Mailgun. You may be able to find out more by checking the <a href=\"http://anymail.readthedocs.io/en/stable/sending/anymail_additions/#esp-send-status\" rel=\"nofollow noreferrer\">anymail_status</a> that Anymail attaches to the email as it sends it:</p>\n\n<pre><code>def send_activation_email(user):\n    # ...\n    email.send()\n    print(email.anymail_status.status)  # should be {'queued'}\n    print(email.anymail_status.esp_response.content)  # raw Mailgun API response\n</code></pre></li>\n</ul>\n\n<p>If none of that reveals the source of the problem, please update your question to include the raw Mailgun API response and any relevant events from Mailgun's logs.</p>\n"}], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 50730932, "answer_count": 1, "score": 0, "last_activity_date": 1528327515, "creation_date": 1528319967, "question_id": 50729779, "link": "https://stackoverflow.com/questions/50729779/anymail-not-sending-an-email-in-a-django-test-despite-that-mail-outbox-is-empty", "title": "AnyMail not sending an email in a Django test, despite that mail.outbox is empty?", "body": "<p>I'd like to write a Django unit test which tests that an email is sent without actually sending it (as described in <a href=\"https://docs.djangoproject.com/en/2.0/topics/testing/tools/#email-services\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.0/topics/testing/tools/#email-services</a>), but can also be configured to send an actual email (to inspect its formatting, etc.).</p>\n\n<p>Right now, I have just an 'ordinary' test:</p>\n\n<pre><code>from django.test import TestCase, override_settings\nfrom django.core import mail\nfrom lucy_web.test_factories import FamilyFactory, UserFactory\nfrom lucy_web.views.app_invite import send_activation_email\n\n\n# @override_settings(EMAIL_BACKEND=\"anymail.backends.mailgun.EmailBackend\")\nclass SendActivationEmailTestCase(TestCase):\n    def test_send_activation_email(self):\n        user = UserFactory(email='kurt@startwithlucy.com')\n        family = FamilyFactory(employee_user=user)\n        send_activation_email(user=user)\n\n        self.assertEqual(len(mail.outbox), 1)\n        self.assertEqual(mail.outbox[0].recipients(), [user.email])\n        self.assertIn(\n            f\"Your activation code is {family.activation_code}.\",\n            mail.outbox[0].body)\n</code></pre>\n\n<p>(The test makes use of <a href=\"http://factoryboy.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\"><code>factory_boy</code></a> test fixtures for certain models). This test passes, but if I comment in the <code>override_settings</code> decorator, I get an error:</p>\n\n<pre><code>(venv) Kurts-MacBook-Pro-2:lucy-web kurtpeek$ python manage.py test lucy_web.tests.test_app_invite\nCreating test database for alias 'default'...\nSystem check identified no issues (0 silenced).\nF\n======================================================================\nFAIL: test_send_activation_email (lucy_web.tests.test_app_invite.SendActivationEmailTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/kurtpeek/Documents/Dev/lucy2/lucy-web/lucy_web/tests/test_app_invite.py\", line 15, in test_send_activation_email\n    self.assertEqual(len(mail.outbox), 1)\nAssertionError: 0 != 1\n\n----------------------------------------------------------------------\nRan 1 test in 0.787s\n\nFAILED (failures=1)\nDestroying test database for alias 'default'...\n</code></pre>\n\n<p>Since the <code>mail.outbox</code> is empty, I would expect that I would receive an actual email, but I checked my inbox and didn't receive anything.</p>\n\n<p>For the sake of completeness, here is the function I'm testing:</p>\n\n<pre><code>from django.conf import settings\nfrom django.core.mail import EmailMultiAlternatives\nfrom django.template.loader import render_to_string\n\n\ndef send_activation_email(user):\n    context = {\n        'activation_code': user.family.activation_code,\n        'page_title': 'Lucy Invitation',\n        'company': user.family.package.company,\n        'num_sessions': user.family.session_count,\n        'domain': settings.EMAIL_IMAGE_DOMAIN}\n\n    message_text = render_to_string('email/activation_code.txt', context)\n    message_html = render_to_string('email/activation_code.html', context)\n\n    email = EmailMultiAlternatives(\n        subject='LUCY Invitation',\n        body=message_text,\n        from_email=settings.DEFAULT_FROM_EMAIL,\n        to=[user.email],\n        reply_to=[settings.SUPPORT_EMAIL])\n    email.attach_alternative(message_html, \"text/html\")\n    email.send()\n</code></pre>\n\n<p>To increase my confusion, from the AnyMail docs (<a href=\"http://anymail.readthedocs.io/en/stable/tips/test_backend/#testing-your-app\" rel=\"nofollow noreferrer\">http://anymail.readthedocs.io/en/stable/tips/test_backend/#testing-your-app</a>), it would seem that AnyMail also captures emails in the <code>outbox</code> in a test.</p>\n\n<p>Can someone point out might what be going wrong here? Why am I neither receiving an email, nor seeing anything in the <code>mail.outbox</code>?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1528320176, "post_id": 50729776, "comment_id": 88467370, "body": "This has nothing to do with self. <code>logger.addHandler</code> doesn&#39;t return anything, so you can&#39;t return the result of that from your setup method. Just return the logger."}, {"owner": {"reputation": 2011, "user_id": 4638004, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/wAveK.jpg?s=128&g=1", "display_name": "VelikiiNehochuha", "link": "https://stackoverflow.com/users/4638004/velikiinehochuha"}, "edited": false, "score": 0, "creation_date": 1528320184, "post_id": 50729776, "comment_id": 88467375, "body": "into setup_logger you return result of the addHandler, not logger istance, so you get attribute error."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1528320196, "post_id": 50729776, "comment_id": 88467380, "body": "<code>return logger</code>, not <code>logger.addHandler(logger_handler)</code>. <code>Logger.addHandler()</code> doesn&#39;t return anything."}, {"owner": {"reputation": 9018, "user_id": 1542569, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5bfeb320707d1af314a1a0fd683d50a?s=128&d=identicon&r=PG&f=1", "display_name": "courteouselk", "link": "https://stackoverflow.com/users/1542569/courteouselk"}, "edited": false, "score": 0, "creation_date": 1528320233, "post_id": 50729776, "comment_id": 88467397, "body": "And consider using <code>@staticmethod</code>"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 6307667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60694b74f45849254ab353a5e0cad87d?s=128&d=identicon&r=PG&f=1", "display_name": "Elizabeth", "link": "https://stackoverflow.com/users/6307667/elizabeth"}, "is_accepted": true, "score": 3, "last_activity_date": 1528320219, "creation_date": 1528320219, "answer_id": 50729829, "question_id": 50729776, "link": "https://stackoverflow.com/questions/50729776/how-self-works-inside-a-class-in-python/50729829#50729829", "title": "How self works inside a class in python", "body": "<p>The issue is that logger.addHandler() isn't returning anything, so you're assigning None (returned from logger.addHandler()) to self.logger.</p>\n\n<p>Try this:</p>\n\n<pre><code># Add the Handler to the Logger\nlogger.addHandler(logger_handler)\nreturn logger\n</code></pre>\n"}], "owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 50729829, "answer_count": 1, "score": 1, "last_activity_date": 1528320267, "creation_date": 1528319963, "question_id": 50729776, "link": "https://stackoverflow.com/questions/50729776/how-self-works-inside-a-class-in-python", "title": "How self works inside a class in python", "body": "<p>I need some help with the following code:</p>\n\n<pre><code>import logging\n\nclass TestLoggin:\n\n    def __init__(self):\n        # Create the Logger\n        self.logger = logging.getLogger(__name__)\n        self.logger.setLevel(logging.DEBUG)\n\n        # Create the Handler for logging data to a file\n        logger_handler = logging.FileHandler('output.log')\n        logger_handler.setLevel(logging.DEBUG)\n\n        # Create a Formatter for formatting the log messages\n        logger_formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s',  datefmt='%d-%m-%Y %H:%M:%S')\n\n        # Add the Formatter to the Handler\n        logger_handler.setFormatter(logger_formatter)\n\n        # Add the Handler to the Logger\n        self.logger.addHandler(logger_handler)\n</code></pre>\n\n<p>The logging module works fine when the setup is inside the <code>__init__</code> method. But if I try to remove it to a new method, as below: </p>\n\n<pre><code>import logging\n\nclass TestLoggin:\n\n    def __init__(self):\n        self.logger = self.setup_logger(output_path)\n\n    def example_using_logger(self):\n        self.logger.error('it will raise an error')    \n\n    def setup_logger(self, output_path):\n        # Create the Logger\n        logger = logging.getLogger(__name__)\n        logger.setLevel(logging.DEBUG)\n\n        # Create the Handler for logging data to a file\n        logger_handler = logging.FileHandler(output_path)\n        logger_handler.setLevel(logging.DEBUG)\n\n        # Create a Formatter for formatting the log messages\n        logger_formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s',  datefmt='%d-%m-%Y %H:%M:%S')\n\n        # Add the Formatter to the Handler\n        logger_handler.setFormatter(logger_formatter)\n\n        # Add the Handler to the Logger\n        return logger.addHandler(logger_handler)\n</code></pre>\n\n<p>And try to use the logger module <code>self.logger.error('it will raise an error')</code>, I got the following error: <code>AttributeError: 'NoneType' object has no attribute 'error'</code>.</p>\n\n<p>I know the raised error is because <code>logger</code> is not recognized as part of the module, but as just a new variable. That is because I didn't grasp the fundamental of <code>self</code>. I'm new to Python, so I need some help here: How can I fix this, and the <em>why</em> of the problem. This last one would help me to understand a little more about the <code>self</code>.</p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9878628, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_d0HASMZuJM/AAAAAAAAAAI/AAAAAAAAABc/d_foNYFaoKA/photo.jpg?sz=128", "display_name": "Kaniel", "link": "https://stackoverflow.com/users/9878628/kaniel"}, "reply_to_user": {"reputation": 47, "user_id": 7838236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6cd865ba29faf95fc5a93814ed06307?s=128&d=identicon&r=PG&f=1", "display_name": "Yuhe Zhu", "link": "https://stackoverflow.com/users/7838236/yuhe-zhu"}, "edited": false, "score": 0, "creation_date": 1528321151, "post_id": 50729986, "comment_id": 88467714, "body": "@YuheZhu It&#39;s fine, I wasn&#39;t trying to sound mad or anything. I apologize if I did."}, {"owner": {"reputation": 2790, "user_id": 1830793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E88mv.jpg?s=128&g=1", "display_name": "Zev", "link": "https://stackoverflow.com/users/1830793/zev"}, "edited": false, "score": 0, "creation_date": 1528321530, "post_id": 50729986, "comment_id": 88467853, "body": "This answer is more of a comment than a true answer. See <a href=\"https://meta.stackexchange.com/questions/139661/how-to-get-initial-reputation-on-stack-overflow-with-the-new-user-restrictions-i/139689\">how to get initial reputation</a> for some tips for getting enough reputation to comment."}, {"owner": {"reputation": 1, "user_id": 9878628, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_d0HASMZuJM/AAAAAAAAAAI/AAAAAAAAABc/d_foNYFaoKA/photo.jpg?sz=128", "display_name": "Kaniel", "link": "https://stackoverflow.com/users/9878628/kaniel"}, "reply_to_user": {"reputation": 2790, "user_id": 1830793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E88mv.jpg?s=128&g=1", "display_name": "Zev", "link": "https://stackoverflow.com/users/1830793/zev"}, "edited": false, "score": 0, "creation_date": 1528330735, "post_id": 50729986, "comment_id": 88470424, "body": "@Zev I don&#39;t see how it isn&#39;t an answer, I gave a solution and it should fix their problem."}, {"owner": {"reputation": 2790, "user_id": 1830793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E88mv.jpg?s=128&g=1", "display_name": "Zev", "link": "https://stackoverflow.com/users/1830793/zev"}, "edited": false, "score": 0, "creation_date": 1528332981, "post_id": 50729986, "comment_id": 88470937, "body": "@Kaniel It was my impression that your answer corrected a mistake in the question Yuhe Zhu was asking rather than the issue itself (why after installing the module it still was showing as not found). Perhaps Yuhe Zhu can clarify."}], "tags": [], "owner": {"reputation": 1, "user_id": 9878628, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_d0HASMZuJM/AAAAAAAAAAI/AAAAAAAAABc/d_foNYFaoKA/photo.jpg?sz=128", "display_name": "Kaniel", "link": "https://stackoverflow.com/users/9878628/kaniel"}, "is_accepted": false, "score": -1, "last_activity_date": 1528321024, "creation_date": 1528321024, "answer_id": 50729986, "question_id": 50729751, "link": "https://stackoverflow.com/questions/50729751/modulenotfounderror-no-module-named-user-agent/50729986#50729986", "title": "ModuleNotFoundError: No module named &#39;user_agent&#39;", "body": "<p>I don't understand why you're trying to install/import <code>user-agent</code>, the module's name is <code>face_recognition</code>.</p>\n\n<p>Try using <code>pip install -U face_recognition</code> then <code>import face_recognition</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 7838236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6cd865ba29faf95fc5a93814ed06307?s=128&d=identicon&r=PG&f=1", "display_name": "Yuhe Zhu", "link": "https://stackoverflow.com/users/7838236/yuhe-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2468, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1592212833, "creation_date": 1528319895, "last_edit_date": 1528321137, "question_id": 50729751, "link": "https://stackoverflow.com/questions/50729751/modulenotfounderror-no-module-named-user-agent", "title": "ModuleNotFoundError: No module named &#39;user_agent&#39;", "body": "<p>I am trying to run this on my computer <a href=\"https://github.com/WuLC/GoogleImagesDownloader\" rel=\"nofollow noreferrer\">https://github.com/WuLC/GoogleImagesDownloader</a></p>\n\n<p>But I keep getting an error of </p>\n\n<pre><code>ModuleNotFoundError: No module named 'user_agent'\n</code></pre>\n\n<p>even though I did </p>\n\n<pre><code>pip install -U user_agent\n</code></pre>\n\n<p>I can't figure out why.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "edited": false, "score": 0, "creation_date": 1528375478, "post_id": 50729787, "comment_id": 88490504, "body": "thank you for your help, this works great with the exception of the first line: &#39;PERIOD DT&#39; - i am getting the following error: &#39;TypeError: &#39;list&#39; object is not callable&#39; - am i missing something in the code? i am still using the lines:"}, {"owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "edited": false, "score": 0, "creation_date": 1528375490, "post_id": 50729787, "comment_id": 88490516, "body": "DF = pd.DataFrame.from_dict(A, orient=&#39;index&#39;) DF= DF.transpose()"}, {"owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "edited": false, "score": 0, "creation_date": 1528375551, "post_id": 50729787, "comment_id": 88490550, "body": "also, is there another way to just hardcode the date in the dataframe similar to &#39;DF[&#39;column&#39;] = &#39;date&#39;?"}, {"owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "edited": false, "score": 0, "creation_date": 1528375986, "post_id": 50729787, "comment_id": 88490885, "body": "ok, it looks like if i remove the pd.to_datetime section and only use the variable, it works!  thanks again for your help!"}], "tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": true, "score": 0, "last_activity_date": 1528320002, "creation_date": 1528320002, "answer_id": 50729787, "question_id": 50729742, "link": "https://stackoverflow.com/questions/50729742/pandas-fill-column-with-date/50729787#50729787", "title": "Pandas Fill column with date", "body": "<p>Your <code>missing</code> list has 5 elements while other lists have only 1. All the lists in the dict that you pass for dataframes should have same number of elements. Consider below approach.</p>\n\n<pre><code>A = pd.DataFrame({'PERIOD DT': list(pd.to_datetime(currdate)) * len(missing),\n           'TEAM': missing,\n           'REGION': ['NA']* len(missing),\n           'SECTOR': ['OTHER'] * len(missing),\n           'REVENUE': [0] * len(missing)\n})\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>PERIOD DT   TEAM    REGION  SECTOR  REVENUE\n0   3/31/2018   GREEN   NA  OTHER   0\n1   3/31/2018   YELLOW  NA  OTHER   0\n2   3/31/2018   RED NA  OTHER   0\n3   3/31/2018   BLUE    NA  OTHER   0\n4   3/31/2018   PINK    NA  OTHER   0\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 9872200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517e27eef3d8f8cb23717206037e8d15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9872200/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 50729787, "answer_count": 1, "score": 1, "last_activity_date": 1528320002, "creation_date": 1528319833, "question_id": 50729742, "link": "https://stackoverflow.com/questions/50729742/pandas-fill-column-with-date", "title": "Pandas Fill column with date", "body": "<p>I am trying to fill a DataFrame column(entire column) in with a static date but which has to be a variable.  I am able to fill in numbers using numpy, but I am unable to fill in a date for a column:</p>\n\n<pre><code>currdate = ['3/31/2018'] #this is what I need filled in\nmissing = ['GREEN', 'YELLOW', 'RED', 'BLUE', 'PINK']\n</code></pre>\n\n<p>Section 1:</p>\n\n<pre><code>A = ({'PERIOD DT':                     pd.to_datetime(currdate),\n           'TEAM':                              missing,\n           'REGION':                            ['NA'],\n           'SECTOR':                            ['OTHER'],\n           'REVENUE':                           [0]})\n</code></pre>\n\n<p>Can anyone explain why the above code does not fill down in each respective column?  For each column with the exception of 'TEAM', the values only fill in the first row of data within the DataFrame.</p>\n\n<pre><code>DF = pd.DataFrame.from_dict(A, orient='index')\nDF= DF.transpose()\n</code></pre>\n\n<p>Section 2:</p>\n\n<pre><code>zeroVal = [0]\nn = len(DF)\nDF['SECTOR'] = 'OTHER'\nDF['REGION'] = 'NA'\nDF.loc[:,'REVENUE'] = np.zeros(n)\n</code></pre>\n\n<p>I tried using the below to fill in the 'currdate' I am using in the 'PERIOD DT' column, but I am unable to get it to work:</p>\n\n<pre><code>DF['PERIOD DT'] = pd.to_datetime(currdate)\n</code></pre>\n\n<p>Without telling each column what to do in section 2, I get the following output:\nI would like all of the values in the columns to be the same filled down each column with the exception of the TEAM that i fill in using a variable referencing a list</p>\n\n<pre><code>    PERIOD DT    TEAM    REGION    SECTOR    REVENUE\n0   2018-03-31   GREEN   NA        OTHER     0.00\n1       NONE     YELLOW  NONE      NONE      NONE\n2       NONE     RED     NONE      NONE      NONE\n3       NONE     BLUE    NONE      NONE      NONE\n4       NONE     PINK    NONE      NONE      NONE\n</code></pre>\n\n<p>My intended output:</p>\n\n<pre><code>    PERIOD DT    TEAM    REGION    SECTOR    REVENUE\n0   2018-03-31   GREEN   NA        OTHER     0.00\n1   2018-03-31   YELLOW  NA        OTHER     0.00\n2   2018-03-31   RED     NA        OTHER     0.00\n3   2018-03-31   BLUE    NA        OTHER     0.00\n4   2018-03-31   PINK    NA        OTHER     0.00\n</code></pre>\n\n<p>Questions: 1, why can't i get the variable/DF 'A' to fill down each column based on the information i supplied and \n2 how do i manually fill in the date (via a variable) down the column 'PERIOD DT'?</p>\n"}, {"tags": ["python", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "edited": false, "score": 0, "creation_date": 1528319773, "post_id": 50729712, "comment_id": 88467225, "body": "<code>ast.literal_eval</code> wont complete because your list is not in proper list format (elements separated by a comma surrounded by outer brackets)."}, {"owner": {"reputation": 634, "user_id": 1868436, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/F3MXS.jpg?s=128&g=1", "display_name": "Santino", "link": "https://stackoverflow.com/users/1868436/santino"}, "reply_to_user": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "edited": false, "score": 0, "creation_date": 1528319879, "post_id": 50729712, "comment_id": 88467259, "body": "I used csv.Dictwriter to write to the csv, how else can I persist?"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1528319935, "post_id": 50729712, "comment_id": 88467279, "body": "That doesn&#39;t look like a <code>csv</code> - no commas. Can you show your <code>csv</code> writing code?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1528319997, "post_id": 50729712, "comment_id": 88467306, "body": "Usually, the answer is that you shouldn&#39;t be storing a list of floats as a single column in a CSV file, but instead storing each float as its own column. But if you really do need to store a list of floats, don&#39;t store the repr of the list, use a nested CSV, or JSON, or some other format designed for persistence and therefore trivial to parse."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "edited": false, "score": 0, "creation_date": 1528320106, "post_id": 50729712, "comment_id": 88467344, "body": "A <code>DictWriter</code> will write values to a single column header (fieldname). As it looks, that &quot;list&quot; is really just a string with brackets on the end and space separation. Does it represent a whole row in the CSV file? Or just one column?"}, {"owner": {"reputation": 634, "user_id": 1868436, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/F3MXS.jpg?s=128&g=1", "display_name": "Santino", "link": "https://stackoverflow.com/users/1868436/santino"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528320338, "post_id": 50729712, "comment_id": 88467441, "body": "added the csv writer code, is pretty straightforward. will likely takeup @abarnert idea of saving in json."}, {"owner": {"reputation": 634, "user_id": 1868436, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/F3MXS.jpg?s=128&g=1", "display_name": "Santino", "link": "https://stackoverflow.com/users/1868436/santino"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528320890, "post_id": 50729712, "comment_id": 88467630, "body": "@abarnert can you post your response as answer? so I can accept it"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528323129, "post_id": 50729712, "comment_id": 88468372, "body": "@Santino OK, done."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 1, "last_activity_date": 1528323019, "creation_date": 1528323019, "answer_id": 50730355, "question_id": 50729712, "link": "https://stackoverflow.com/questions/50729712/reading-a-csv-persisted-list-of-floats-back-into-a-list-of-floats/50730355#50730355", "title": "Reading a csv persisted list of floats back into a list of floats", "body": "<p>CSV only stores string columns. Using it to store strings, ints, floats, and a few other basic types is fine, as long as you manually convert the objects: whenever you do <code>str(i)</code> to an int, you can get the int back with <code>int(s)</code>.</p>\n\n<p>But that isn't true for a list of floats. There's no function you can use to get back the result of <code>str(lst)</code> on an arbitrary list.<sup>1</sup> And it isn't true for\u2026 whatever you have, which seems to be most likely a numpy array or Pandas Series\u2026 either.<sup>2</sup></p>\n\n<p>If you can store each float as a separate column, instead of storing a list of them in a single column, that's the easiest answer. But it may not be appropriate.<sup>3</sup></p>\n\n<p>So, you just need to pick some other function to use in place of the implicit <code>str</code>, which <em>can</em> be reversed with a simple function call. There are formats designed for persisting data to strings\u2014JSON, XML, even a nested CSV\u2014so that's the first place to look.</p>\n\n<hr>\n\n<p>Usually JSON should be the first one you look at. As long as it can handle all of your data (and it definitely can here), it's dead simple to use, someone's already thought throw all the annoying edge cases, and there's code to parse it for every platform in the universe.</p>\n\n<p>So, you write the value like this:</p>\n\n<pre><code>row_dict['prob_array'] = json.dumps(res)\n</code></pre>\n\n<p>And then you can read it back like this:</p>\n\n<pre><code>prob_array = json.loads(row['prob_array'])\n</code></pre>\n\n<p>If <code>prob_array</code> is actually a numpy arrays or Pandas series or something rather than a list, you'll want to either convert through <code>list</code>, or use numpy or Pandas JSON methods instead of the stdlib module.</p>\n\n<p>The only real problem here is that if you want the CSV to be human-readable/editable, the escaped commas and quotes could be pretty ugly.</p>\n\n<hr>\n\n<p>In this case, you can define a simpler format that's still easy to write and parse for your specific data, and also more human-readable, like just space-separated floats:</p>\n\n<pre><code>row_dict['prob_array'] = ' '.join(map(str, res))\n\nprob_array = [float(val) for val in row['prob_array'].split()]\n</code></pre>\n\n<hr>\n\n<p><sub>1. Sometimes you can use <code>ast.literal_eval</code>, but relying on that is never a good idea, and it isn't working here.</sub></p>\n\n<p><sub>2. The human-readable format used by numpy and Pandas is even less parser-friendly than the one used by Python lists. You <em>could</em> switch to their <code>repr</code> instead of their <code>str</code>, but it still isn't going to <code>ast.literal_eval</code>.</sub></p>\n\n<p><sub>3. For an obvious example, imagine a table with two different arbitrary-length lists\u2026</sub></p>\n"}], "owner": {"reputation": 634, "user_id": 1868436, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/F3MXS.jpg?s=128&g=1", "display_name": "Santino", "link": "https://stackoverflow.com/users/1868436/santino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 50730355, "answer_count": 1, "score": 0, "last_activity_date": 1528323019, "creation_date": 1528319649, "last_edit_date": 1528320298, "question_id": 50729712, "link": "https://stackoverflow.com/questions/50729712/reading-a-csv-persisted-list-of-floats-back-into-a-list-of-floats", "title": "Reading a csv persisted list of floats back into a list of floats", "body": "<p>I have persisted a list of floats in a csv file and it appears thus (a single row).</p>\n\n<pre><code>\"[6.61501123e-04 1.23390303e-04 1.59454121e-03 2.17852772e-02\n  :\n 3.02987776e-04 3.83064064e-03 6.90607396e-04 3.30468375e-03\n 2.78064613e-02]\"\n</code></pre>\n\n<p>Now when converting reading back to a list, I am using the <code>ast</code> literal_eval approach:\n<code>probs = [float(p) for p in ast.literal_eval(row['prob_array'])]</code></p>\n\n<p>And I get this error:</p>\n\n<pre><code>    probs = [float(p) for p in ast.literal_eval(row['prob_array'])]\n  File \"/Users/santino/anaconda/lib/python2.7/ast.py\", line 49, in literal_eval\n    node_or_string = parse(node_or_string, mode='eval')\n  File \"/Users/santino/anaconda/lib/python2.7/ast.py\", line 37, in parse\n    return compile(source, filename, mode, PyCF_ONLY_AST)\n  File \"&lt;unknown&gt;\", line 1\n    [6.61501123e-04 1.23390303e-04 1.59454121e-03 2.17852772e-02\n                                 ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>Not sure how I can instruct ast to read the exponent syntax, or am I wrong in assuming it's the exponent syntax that is causing the exception.</p>\n\n<p>Edit: I used csv.DictWriter to persist into the csv file. Is there a different way I should be persisting?</p>\n\n<p>Edit2:</p>\n\n<pre><code>with open(\"./input_file.csv\",\"w\") as r:\n    writer = csv.DictWriter(r,fieldnames=[\"item_id\",\"item_name\",\"prob_array\"])\n    writer.writeheader()\n        res_list = ...\n        for i,res in enumerate(res_list):\n            row_dict = {}\n            row_dict['item_id'] = id_list[i]\n            row_dict['prob_array'] = res\n            row_dict['item_name'] = item_list[i]\n            writer.writerow(row_dict)\n</code></pre>\n"}, {"tags": ["python", "pdb", "hydrogen"], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 4521071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d777db351886f3cbda9d80299d429e9?s=128&d=identicon&r=PG&f=1", "display_name": "Lambert_W", "link": "https://stackoverflow.com/users/4521071/lambert-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321148, "last_edit_date": 1528321148, "creation_date": 1528320815, "answer_id": 50729936, "question_id": 50729705, "link": "https://stackoverflow.com/questions/50729705/how-do-you-use-pdb-in-hydrogen/50729936#50729936", "title": "How do you use pdb in Hydrogen?", "body": "<p>I had read <a href=\"https://stackoverflow.com/a/37903700/4521071\">this answer</a> and tried to implement \"C. From Within Your Program\". It had thrown errors, and I gave up. However, I went to <a href=\"https://pymotw.com/2/pdb/\" rel=\"nofollow noreferrer\">the source</a> that the answer had cited, and used this code:</p>\n\n<pre><code>import pdb\n\nclass MyObj(object):\n\n    def __init__(self, num_loops):\n        self.count = num_loops\n\n    def go(self):\n        for i in range(self.count):\n            pdb.set_trace()\n            print(i)\n        return\n\nif __name__ == '__main__':\n    MyObj(5).go()\n</code></pre>\n\n<p>From this, I was able to get <code>pdb</code> to run in Hydrogen.</p>\n"}], "owner": {"reputation": 115, "user_id": 4521071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d777db351886f3cbda9d80299d429e9?s=128&d=identicon&r=PG&f=1", "display_name": "Lambert_W", "link": "https://stackoverflow.com/users/4521071/lambert-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528321148, "creation_date": 1528319620, "question_id": 50729705, "link": "https://stackoverflow.com/questions/50729705/how-do-you-use-pdb-in-hydrogen", "title": "How do you use pdb in Hydrogen?", "body": "<p>I am new to debugging in Python, and I currently use Hydrogen within Atom to do most of my Python work. I have looked into debugging, and it seems that the Python package <a href=\"https://docs.python.org/3/library/pdb.html\" rel=\"nofollow noreferrer\"><code>pdb</code></a> is the standard way to debug in Python. Most of the examples I can find seem to require using a command line on a <code>.py</code> file. However, in Hydrogen I would want to run it within the kernel on individual lines of the code, since I don't think <code>pdb</code> will work on a markdown (<code>.md</code>) file. Is there a way I can debug within my workflow, or do I need to make <code>.py</code> files of my code and run <code>pdb</code> on them?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 1, "creation_date": 1528319797, "post_id": 50729702, "comment_id": 88467230, "body": "Why are there only two value columns listed, while each list contains three elements?"}, {"owner": {"reputation": 820, "user_id": 5626341, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/225ed59da2a212f403bb7948cf396b5e?s=128&d=identicon&r=PG&f=1", "display_name": "kloddant", "link": "https://stackoverflow.com/users/5626341/kloddant"}, "edited": false, "score": 0, "creation_date": 1528319903, "post_id": 50729702, "comment_id": 88467267, "body": "What framework are you using to output html?  Django or something else?  Or are you just using print statements to output the html to the console?  Or are you using python to write the html to a file?"}, {"owner": {"reputation": 3, "user_id": 9627283, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pKbyKt0lJ-A/AAAAAAAAAAI/AAAAAAAAADA/twW1oXy9nVM/photo.jpg?sz=128", "display_name": "tahsin raza", "link": "https://stackoverflow.com/users/9627283/tahsin-raza"}, "edited": false, "score": 0, "creation_date": 1528319962, "post_id": 50729702, "comment_id": 88467293, "body": "I need  first 2 values only.As per my use case it can be first 2 or last 2 or first and last.Basically I need a approach so that I can make it generic"}, {"owner": {"reputation": 3, "user_id": 9627283, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pKbyKt0lJ-A/AAAAAAAAAAI/AAAAAAAAADA/twW1oXy9nVM/photo.jpg?sz=128", "display_name": "tahsin raza", "link": "https://stackoverflow.com/users/9627283/tahsin-raza"}, "reply_to_user": {"reputation": 820, "user_id": 5626341, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/225ed59da2a212f403bb7948cf396b5e?s=128&d=identicon&r=PG&f=1", "display_name": "kloddant", "link": "https://stackoverflow.com/users/5626341/kloddant"}, "edited": false, "score": 0, "creation_date": 1528320037, "post_id": 50729702, "comment_id": 88467320, "body": "@kloddant , I just need print statement.Eventually i will redirect the output to Email in html table format"}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1528320483, "post_id": 50729702, "comment_id": 88467493, "body": "Are you sure that your dictionary looks like that? A single string containing &quot;x, y, z&quot; as key?"}, {"owner": {"reputation": 3, "user_id": 9627283, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pKbyKt0lJ-A/AAAAAAAAAAI/AAAAAAAAADA/twW1oXy9nVM/photo.jpg?sz=128", "display_name": "tahsin raza", "link": "https://stackoverflow.com/users/9627283/tahsin-raza"}, "reply_to_user": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1528320614, "post_id": 50729702, "comment_id": 88467530, "body": "@pitto, Yup.It is a single key."}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1528357242, "post_id": 50729702, "comment_id": 88478737, "body": "Hello @tahsinraza!  I&#39;ve prepared a solution for you.  If you find it useful please remember upvote and/or choose it as answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "is_accepted": true, "score": 0, "last_activity_date": 1566034052, "last_edit_date": 1566034052, "creation_date": 1528320697, "answer_id": 50729912, "question_id": 50729702, "link": "https://stackoverflow.com/questions/50729702/convert-dict-to-html-table/50729912#50729912", "title": "Convert dict to HTML table", "body": "<p>Please test the following script, explanation is available in the comments:</p>\n\n<pre><code>dict_data = {'x,y,z':['1','5','6'],'p,q,r':['10','25','36']}\n\n# Here I prepare the html variable I will be updating later\nhtml = '&lt;table style=\"width:100%\"&gt;'\n\n# Let's cycle the elements in dict_data\nfor dict_item in dict_data:\n    html += '&lt;tr&gt;'\n    # Using split I unpack the values in the key using the , as delimiter\n    key_values = dict_item.split(',')\n    # Time to fill the table rows with the single key subunits\n    html += '&lt;th&gt;' + key_values[0] + '&lt;/th&gt;'\n    html += '&lt;th&gt;' + key_values[1] + '&lt;/th&gt;'\n    html += '&lt;th&gt;' + key_values[2] + '&lt;/th&gt;'\n    # Then we access the 1st element of dict_item key in dict_data\n    html += '&lt;th&gt;' + dict_data[dict_item][0] + '&lt;/th&gt;'\n    # And then the 2nd \n    html += '&lt;th&gt;' + dict_data[dict_item][1] + '&lt;/th&gt;'\n    # Let's mark the end of the row before the next loop (if any)\n    html += '&lt;/tr&gt;'\n# Do not forget to close the table too\nhtml += '&lt;/table&gt;'    \n# Here's the final result    \nprint html\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9627283, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pKbyKt0lJ-A/AAAAAAAAAAI/AAAAAAAAADA/twW1oXy9nVM/photo.jpg?sz=128", "display_name": "tahsin raza", "link": "https://stackoverflow.com/users/9627283/tahsin-raza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "accepted_answer_id": 50729912, "answer_count": 1, "score": 0, "last_activity_date": 1566034052, "creation_date": 1528319606, "last_edit_date": 1528319679, "question_id": 50729702, "link": "https://stackoverflow.com/questions/50729702/convert-dict-to-html-table", "title": "Convert dict to HTML table", "body": "<p>I am new in Python and I wanted to convert below dictionary to html table format in python. Please let me know the efficient way to do achieve this</p>\n\n<p>Input </p>\n\n<pre><code>dict_data = {'x,y,z':['1','5','6'],'p,q,r':['10','25','36']}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>col1     col2 col3 val1 val2\n\nx     y    z    1     5\n\np     q    r        10    25\n</code></pre>\n"}, {"tags": ["python", "dictionary", "replace"], "comments": [{"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 4, "creation_date": 1528319608, "post_id": 50729672, "comment_id": 88467156, "body": "Those apostrophes are there because its a string datatype."}, {"owner": {"reputation": 183, "user_id": 6317020, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-Z8aCfSFeyrY/AAAAAAAAAAI/AAAAAAAAC3s/PJ25l9b83jw/photo.jpg?sz=128", "display_name": "Jake Steele", "link": "https://stackoverflow.com/users/6317020/jake-steele"}, "edited": false, "score": 0, "creation_date": 1528319755, "post_id": 50729672, "comment_id": 88467219, "body": "Here is an answer. Can&#39;t mark as duplicate <a href=\"https://stackoverflow.com/questions/18283725/how-to-create-a-python-dictionary-with-double-quotes-as-default-quote-format\" title=\"how to create a python dictionary with double quotes as default quote format\">stackoverflow.com/questions/18283725/&hellip;</a>"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1528320041, "post_id": 50729672, "comment_id": 88467322, "body": "Maybe you should show the code you are using to &quot;write this into SQL&quot;. Your question is impossible to understand otherwise."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1528320748, "post_id": 50729672, "comment_id": 88467577, "body": "There are no apostrophes in the dictionary, it contains strings. When you print a dictionary, it puts quotes around the strings, but they&#39;re not really in there."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1528320799, "post_id": 50729672, "comment_id": 88467594, "body": "If you substitute into your prepared SQL query properly, the quotes shouldn&#39;t be put into it."}, {"owner": {"reputation": 2076, "user_id": 3111788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b848b20de04ec23c2784e68fe57f118?s=128&d=identicon&r=PG", "display_name": "dmulter", "link": "https://stackoverflow.com/users/3111788/dmulter"}, "edited": false, "score": 1, "creation_date": 1528325418, "post_id": 50729672, "comment_id": 88469051, "body": "Sounds like maybe you want to encode the dict as a string and write to a single database column? If that&#39;s the case, you should be able to find an existing answer in SO pretty easily."}, {"owner": {"reputation": 718, "user_id": 7828747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-rpAHEAvybg4/AAAAAAAAAAI/AAAAAAAAQ_k/kPewVmIP2ww/photo.jpg?sz=128", "display_name": "Emac", "link": "https://stackoverflow.com/users/7828747/emac"}, "edited": false, "score": 0, "creation_date": 1528381038, "post_id": 50729672, "comment_id": 88494715, "body": "Thanks for those who left useful feedback. What dmulter said pointed me in the right direction. I needed to convert the dictionary to a single string, and I found my solution here:  <a href=\"https://stackoverflow.com/questions/10472907/how-to-convert-dictionary-into-string\" title=\"how to convert dictionary into string\">stackoverflow.com/questions/10472907/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 718, "user_id": 7828747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-rpAHEAvybg4/AAAAAAAAAAI/AAAAAAAAQ_k/kPewVmIP2ww/photo.jpg?sz=128", "display_name": "Emac", "link": "https://stackoverflow.com/users/7828747/emac"}, "is_accepted": false, "score": 0, "last_activity_date": 1528393415, "creation_date": 1528393415, "answer_id": 50747256, "question_id": 50729672, "link": "https://stackoverflow.com/questions/50729672/python-replace-apostrophes-in-dictionary/50747256#50747256", "title": "Python replace apostrophes in dictionary", "body": "<p>Instead of leaving the question open, I wanted to answer it myself. One of the comments pointed me in the right direction that I needed to convert my dictionary to a string, and I found the solution to do that here: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/10472907/how-to-convert-dictionary-into-string\">How to convert dictionary into string</a></p>\n"}], "owner": {"reputation": 718, "user_id": 7828747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-rpAHEAvybg4/AAAAAAAAAAI/AAAAAAAAQ_k/kPewVmIP2ww/photo.jpg?sz=128", "display_name": "Emac", "link": "https://stackoverflow.com/users/7828747/emac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 691, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1528393415, "creation_date": 1528319463, "question_id": 50729672, "link": "https://stackoverflow.com/questions/50729672/python-replace-apostrophes-in-dictionary", "title": "Python replace apostrophes in dictionary", "body": "<p>I have a dictionary that has apostrophes for the value and key in every entry. For instance one entry would look like this: </p>\n\n<pre><code>{'lat': '38.683959', 'lon': '-90.265198', 'accuracy': '3'}\n</code></pre>\n\n<p>I need to get rid of these apostrophes so I can write them into SQL. The single quotes cause an error when I try to write them. What is the best way to get rid of all of the apostrophes?</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["python", "thread-synchronization"], "comments": [{"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 1, "creation_date": 1528319659, "post_id": 50729644, "comment_id": 88467170, "body": "<a href=\"https://github.com/python/cpython/blob/master/Modules/_threadmodule.c\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/master/Modules/_threadmodule.&zwnj;&#8203;c</a>"}, {"owner": {"reputation": 1167, "user_id": 7586189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81e805c3d53c754785d05a137f41a0c6?s=128&d=identicon&r=PG&f=1", "display_name": "user7586189", "link": "https://stackoverflow.com/users/7586189/user7586189"}, "reply_to_user": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 0, "creation_date": 1528320204, "post_id": 50729644, "comment_id": 88467384, "body": "@TimPeters, perfect, thank you:-)"}], "answers": [{"tags": [], "owner": {"reputation": 1167, "user_id": 7586189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81e805c3d53c754785d05a137f41a0c6?s=128&d=identicon&r=PG&f=1", "display_name": "user7586189", "link": "https://stackoverflow.com/users/7586189/user7586189"}, "is_accepted": true, "score": 0, "last_activity_date": 1528890637, "creation_date": 1528890637, "answer_id": 50836546, "question_id": 50729644, "link": "https://stackoverflow.com/questions/50729644/where-can-i-find-the-source-code-for-python-low-level-threading-api-thread-exte/50836546#50836546", "title": "where can I find the source code for python Low-level threading API _thread extension module?", "body": "<p>Answered by Tim Peters, the Cpython implementation:</p>\n\n<p>github.com/python/cpython/blob/master/Modules/_threadmodule.c</p>\n"}], "owner": {"reputation": 1167, "user_id": 7586189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81e805c3d53c754785d05a137f41a0c6?s=128&d=identicon&r=PG&f=1", "display_name": "user7586189", "link": "https://stackoverflow.com/users/7586189/user7586189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 50836546, "answer_count": 1, "score": 0, "last_activity_date": 1528890637, "creation_date": 1528319344, "question_id": 50729644, "link": "https://stackoverflow.com/questions/50729644/where-can-i-find-the-source-code-for-python-low-level-threading-api-thread-exte", "title": "where can I find the source code for python Low-level threading API _thread extension module?", "body": "<p>Specifically the source code of lock, which is implemented directly by the <strong>_thread</strong> extension module.</p>\n"}, {"tags": ["python", "git", "macos", "python-2.7", "ubuntu"], "answers": [{"tags": [], "owner": {"reputation": 854, "user_id": 2168400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/718578047a0386fb7c3ba576a1a6c9d1?s=128&d=identicon&r=PG", "display_name": "alfonso", "link": "https://stackoverflow.com/users/2168400/alfonso"}, "is_accepted": true, "score": 1, "last_activity_date": 1528321259, "last_edit_date": 1528321259, "creation_date": 1528320956, "answer_id": 50729966, "question_id": 50729603, "link": "https://stackoverflow.com/questions/50729603/cannot-import-python-module-after-naming-my-own-file-the-same-name-as-the-module/50729966#50729966", "title": "Cannot import Python module after naming my own file the same name as the module", "body": "<p>I figured it out ... I had to remove <code>census.pyc</code> from my project. Crisis averted.</p>\n"}], "owner": {"reputation": 854, "user_id": 2168400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/718578047a0386fb7c3ba576a1a6c9d1?s=128&d=identicon&r=PG", "display_name": "alfonso", "link": "https://stackoverflow.com/users/2168400/alfonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 50729966, "answer_count": 1, "score": 0, "last_activity_date": 1528382329, "creation_date": 1528319181, "last_edit_date": 1528382329, "question_id": 50729603, "link": "https://stackoverflow.com/questions/50729603/cannot-import-python-module-after-naming-my-own-file-the-same-name-as-the-module", "title": "Cannot import Python module after naming my own file the same name as the module", "body": "<p>I am using the Python module called <code>census</code>. I accidentally named a file  <code>census.py</code> and in that same file I added <code>from census import Census</code>.</p>\n\n<p>I ran the <code>census.py</code> script locally, and received the following:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"acs5/census.py\", line 9, in &lt;module&gt;\n    from census import Census\n  File \"/Users/.../census.py\", line 9, in &lt;module&gt;\nImportError: cannot import name Census\n</code></pre>\n\n<p>My mistake was naming the file <code>census.py</code> when I already have a <code>census</code> module in scope creating some kind of circular reference. I've since tried renaming the file and that didn't work. I removed and reinstalled <code>census</code> with pip and that didn't work either. I've also inspected the syspath and didn't see anything obvious that's wrong.</p>\n\n<p>The project is also under source control with git, and I'm afraid that instead of using <code>git mv old_name new_name</code> I just renamed the files in my IDE. Maybe the git logs are out of wack... Not sure about this either and I've been investigating if git might be involved.</p>\n\n<p>Stupidly, I thought that whatever local issue I had on my MacBook wouldn't exist on the remote Ubuntu server. So I ran the script on the server and received the same error. So now I'm stuck with two mess ups... Anyway, locally I have MacOS Anaconda2 and the remote server is Ubuntu's Python 2.7 install.</p>\n\n<p>Can somebody please help me resolve my module issues?</p>\n"}, {"tags": ["javascript", "python", "d3.js", "jupyter-notebook"], "comments": [{"owner": {"reputation": 30153, "user_id": 7106086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V7fFc.png?s=128&g=1", "display_name": "Andrew Reid", "link": "https://stackoverflow.com/users/7106086/andrew-reid"}, "edited": false, "score": 0, "creation_date": 1528321080, "post_id": 50729599, "comment_id": 88467693, "body": "It looks as though you are using d3v3 methods with d3v5. <code>d3.layout.force()</code> is now <code>d3.forceSimulation()</code> for example.  v4 introduced a number of method name changes due to the &quot;great namespace flattening&quot; of D3."}, {"owner": {"reputation": 19, "user_id": 9905650, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155581892793977/picture?type=large", "display_name": "Karan Desai", "link": "https://stackoverflow.com/users/9905650/karan-desai"}, "reply_to_user": {"reputation": 30153, "user_id": 7106086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V7fFc.png?s=128&g=1", "display_name": "Andrew Reid", "link": "https://stackoverflow.com/users/7106086/andrew-reid"}, "edited": false, "score": 0, "creation_date": 1528322448, "post_id": 50729599, "comment_id": 88468174, "body": "so I tried using this version of D3: <a href=\"https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js\" rel=\"nofollow noreferrer\">cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js</a>            still does not work"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10103661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6ad38e10d564ecaf58747ae212e678?s=128&d=identicon&r=PG&f=1", "display_name": "cyclicembrace", "link": "https://stackoverflow.com/users/10103661/cyclicembrace"}, "is_accepted": false, "score": 0, "last_activity_date": 1534054236, "last_edit_date": 1534054236, "creation_date": 1534052740, "answer_id": 51806060, "question_id": 50729599, "link": "https://stackoverflow.com/questions/50729599/unable-to-incorporate-d3-in-python-jupyter-notebook/51806060#51806060", "title": "Unable to incorporate d3 in python Jupyter notebook", "body": "<p>There are a few factors at work here. </p>\n\n<p>d3v4++ does not work like d3v3, so if you revert to d3v3, it might work.</p>\n\n<p>Loading d3v4 in a script with requirejs should work.\ni.e. in a cell:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\nrequire.config({paths: {d3: \"d3.min.js\"}});\nconsole.log(d3)\nrequire([\"d3\"], function(d3) {\n  console.log(d3.version);\n});\n</code></pre>\n\n<p>And there's the other thing where the browser caches the content of the uri. So what might happen is if you, through testing out different types of d3 you manage to accidentally load a jupyter notebook with d3, the results are cached. You'll have to explicitly close and reopen the browser to test out the results. If there's a way to get jupyter notebook to send out non caching headers, that would be excellent, if not you'll have to send redirect the browser to a proxy that adds headers that specify non caching.</p>\n"}], "owner": {"reputation": 19, "user_id": 9905650, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155581892793977/picture?type=large", "display_name": "Karan Desai", "link": "https://stackoverflow.com/users/9905650/karan-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 615, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1534054236, "creation_date": 1528319162, "question_id": 50729599, "link": "https://stackoverflow.com/questions/50729599/unable-to-incorporate-d3-in-python-jupyter-notebook", "title": "Unable to incorporate d3 in python Jupyter notebook", "body": "<p>I am trying to run the following code inside Jupyter notebook, but there is no d3 based network diagram displayed. All I see is a small box but no network diagram. It would be great if someone could help in identifying what I am doing wrong. I am on MacOS</p>\n\n<p>Here is the code:</p>\n\n<p>I am exporting a son file then using that to create the d3 diagram inside the Jupyter notebook</p>\n\n<pre><code>from networkx.readwrite import json_graph\ndata = json_graph.node_link_data(G)\nwith open('graph.json', 'w') as f:\njson.dump(data, f, indent=4)\n\n\n%%html\n&lt;div id=\"d3-container\"&gt;&lt;/div&gt;\n&lt;style&gt;\ncircle.node {stroke: #fff; stroke-width: 1.5px;}\nline.link {stroke: #999; stroke-opacity: .6;}\n&lt;/style&gt;\n\n\n%%javascript\n// We load the latest version of d3.js from the Web.\nrequire.config({paths: {d3: \"https://d3js.org/d3.v5.min.js\"}});\nrequire([\"d3\"], function(d3) {\n\n    // Parameter declaration, the height and width of our viz.\n    var width = 300,\n        height = 300;\n\n    // Colour scale for node colours.\n    var color = d3.scale.category10();\n\n    // We create a force-directed dynamic graph layout.\n    // D3 has number of layouts - refer to the documentation.\n    var force = d3.layout.force()\n        .charge(-120)\n        .linkDistance(30)\n        .size([width, height]);\n\n    // We select the &lt; div&gt; we created earlier and add an \n    // SVG = Scalable Vector Graphics\n    var svg = d3.select(\"#d3-container\").select(\"svg\")\n    if (svg.empty()) {\n        svg = d3.select(\"#d3-container\").append(\"svg\")\n                    .attr(\"width\", width)\n                    .attr(\"height\", height);\n    }\n\n    // We load the JSON network file.\n    d3.json(\"graph.json\", function(error, graph) {\n        // Within this block, the network has been loaded\n        // and stored in the 'graph' object.\n\n        // We load the nodes and links into the force-directed\n        // graph and initialise the dynamics.\n        force.nodes(graph.nodes)\n            .links(graph.links)\n            .start();\n\n        // We create a &lt; line&gt; SVG element for each link\n        // in the graph.\n        var link = svg.selectAll(\".link\")\n            .data(graph.links)\n            .enter().append(\"line\")\n            .attr(\"class\", \"link\");\n\n        // We create a &lt; circle&gt; SVG element for each node\n        // in the graph, and we specify a few attributes.\n        var node = svg.selectAll(\".node\")\n            .data(graph.nodes)\n            .enter().append(\"circle\")\n            .attr(\"class\", \"node\")\n            .attr(\"r\", 5)  // radius\n            .style(\"fill\", function(d) {\n                // We colour the node depending on the degree.\n                return color(d.degree); \n            })\n            .call(force.drag);\n\n        // The label each node its node number from the networkx graph.\n        node.append(\"title\")\n            .text(function(d) { return d.id; });\n\n\n\n        // We bind the positions of the SVG elements\n        // to the positions of the dynamic force-directed graph,\n        // at each time step.\n        force.on(\"tick\", function() {\n            link.attr(\"x1\", function(d) { return d.source.x; })\n                .attr(\"y1\", function(d) { return d.source.y; })\n                .attr(\"x2\", function(d) { return d.target.x; })\n                .attr(\"y2\", function(d) { return d.target.y; });\n\n            node.attr(\"cx\", function(d) { return d.x; })\n                .attr(\"cy\", function(d) { return d.y; });\n        });\n    });\n});\n</code></pre>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 1155, "user_id": 2685624, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2d79469caef0f8420b12cce0d2c48cba?s=128&d=identicon&r=PG&f=1", "display_name": "Dux", "link": "https://stackoverflow.com/users/2685624/dux"}, "edited": false, "score": 0, "creation_date": 1528319291, "post_id": 50729581, "comment_id": 88466996, "body": "You would need to split your string in half first, and then take letters alternating from both strings. Do this n times"}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "reply_to_user": {"reputation": 1155, "user_id": 2685624, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2d79469caef0f8420b12cce0d2c48cba?s=128&d=identicon&r=PG&f=1", "display_name": "Dux", "link": "https://stackoverflow.com/users/2685624/dux"}, "edited": false, "score": 0, "creation_date": 1528374922, "post_id": 50729581, "comment_id": 88490127, "body": "Yes, precisely. I was stuck at taking letters alternating from both strings part. I just simply don&#39;t know how to do it haha."}], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1528399656, "post_id": 50729686, "comment_id": 88505136, "body": "Thanks a lot, but could you care to explain the format part please? &quot;s2 = &quot;&quot;.join([&quot;{0}{1}&quot;.format(x, y) for (x, y) in zip(b, a)])&quot; Thanks."}], "tags": [], "owner": {"reputation": 63, "user_id": 9905659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d670c0704882478c26d33e1fb8107ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Mr weasel", "link": "https://stackoverflow.com/users/9905659/mr-weasel"}, "is_accepted": false, "score": 1, "last_activity_date": 1528319524, "creation_date": 1528319524, "answer_id": 50729686, "question_id": 50729581, "link": "https://stackoverflow.com/questions/50729581/python-how-to-reverse-multiple-slice-manipulation-of-a-string/50729686#50729686", "title": "Python: how to reverse multiple slice manipulation of a string", "body": "<p>It is simply <code>zip</code> operation on the strings. You can't just use <code>zip</code> directly however, need to format it to string.</p>\n\n<pre><code>s = \"ABCDEF\"\na = s[1::2]\nb = s[::2]\n\nprint(a,b)\n\ns2 = \"\".join([\"{0}{1}\".format(x, y) for (x, y) in zip(b, a)])\n\nprint(s2)\n\n\n&gt;&gt;&gt; BDF ACE\n&gt;&gt;&gt; ABCDEF\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1528391551, "post_id": 50729843, "comment_id": 88501136, "body": "Thanks a lot. Would you care to explain what lambda is and why it is used in this instance please? Thanks!"}], "tags": [], "owner": {"reputation": 91, "user_id": 9799350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/729a6af835d89ee4ec2debc880a55c68?s=128&d=identicon&r=PG&f=1", "display_name": "simonz", "link": "https://stackoverflow.com/users/9799350/simonz"}, "is_accepted": false, "score": 0, "last_activity_date": 1528320327, "creation_date": 1528320327, "answer_id": 50729843, "question_id": 50729581, "link": "https://stackoverflow.com/questions/50729581/python-how-to-reverse-multiple-slice-manipulation-of-a-string/50729843#50729843", "title": "Python: how to reverse multiple slice manipulation of a string", "body": "<p>You could use <code>map</code> to concatenate the elements of <code>b</code> and <code>a</code> pairwise, which yields a list of strings of length 2. Then use <code>join</code> to concatenate these into the original string:</p>\n\n<pre><code>a = \"BDF\"\nb = \"ACE\"\ns = \"\".join(map(lambda x,y: x+y, b, a))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1528391484, "post_id": 50729866, "comment_id": 88501106, "body": "Thank you so much for the help. I honestly didn&#39;t know the zip function. I tried it without adding &quot;end=&#39;&#39; &quot; first and it just gave me the print result in multiple rows. This end= input works like a charm. How does it do this? Thanks again!"}], "tags": [], "owner": {"reputation": 11, "user_id": 7999113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_E2k8wUiKyY/AAAAAAAAAAI/AAAAAAAABpk/zCckefXdEng/photo.jpg?sz=128", "display_name": "Samar Elsheikh", "link": "https://stackoverflow.com/users/7999113/samar-elsheikh"}, "is_accepted": false, "score": 1, "last_activity_date": 1528320857, "last_edit_date": 1528320857, "creation_date": 1528320462, "answer_id": 50729866, "question_id": 50729581, "link": "https://stackoverflow.com/questions/50729581/python-how-to-reverse-multiple-slice-manipulation-of-a-string/50729866#50729866", "title": "Python: how to reverse multiple slice manipulation of a string", "body": "<p>By using <code>zip</code> you can loop through two lists simultaneously. By adding <code>end=\"\"</code> to <code>print</code> function, it continues to print at the same line.</p>\n\n<p>This should work:</p>\n\n<pre><code>expression=\"This is a test!\"\nfirst=expression[1::2]\nsecond=expression[::2]\n\nfor i,j in zip(first,second):\n    print(j+i,end=\"\")\n</code></pre>\n\n<p>Hence the output is:</p>\n\n<pre><code>This is a test\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1528392767, "post_id": 50729905, "comment_id": 88501741, "body": "I honestly cannot dream of an even more thorough and comprehensive answer than this. Thank you so much sir. As a python rookie, I get to learn about map and zip through the answers here. But could you care to explain what (lambda x, y: x + y, b, a) means to me please? Or if you can give me some relevant material to read up on, that would work as well. Thank you so much sir!"}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1528402880, "post_id": 50729905, "comment_id": 88506784, "body": "I did read up a little bit on map function and lambda. But why does &quot;&quot;.join(map(lambda x, y: x + y, b, a)) works while directly using map(lambda x,y: x + y, b, a) will only produce nonsense for me? It seems like a superfluous step to me. Thanks."}, {"owner": {"reputation": 4200, "user_id": 3104974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf327f4729e0af1e6bf0582391fad75?s=128&d=identicon&r=PG&f=1", "display_name": "ascripter", "link": "https://stackoverflow.com/users/3104974/ascripter"}, "reply_to_user": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1528475279, "post_id": 50729905, "comment_id": 88537282, "body": "@Bowen: <code>map(lambda x,y: x + y, b, a)</code> yields a list (python2) or an iterator-object (python3). Each element of the result will be the sum of the zipped elements of <code>a</code> and <code>b</code>. Sum of strings is concatenation. So you have an iterable of 2-character-strings after the <code>map</code> (or <code>zip</code>). You then need to put these 2-character strings one after the other. That&#39;s what <code>join</code> does (here with an empty string as separator)."}, {"owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "edited": false, "score": 0, "creation_date": 1528996568, "post_id": 50729905, "comment_id": 88727922, "body": "Thank you so much. You are very good at explaining things sir. I will sure play around more with map and lambda more to get a good grip on it."}], "tags": [], "owner": {"reputation": 4200, "user_id": 3104974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf327f4729e0af1e6bf0582391fad75?s=128&d=identicon&r=PG&f=1", "display_name": "ascripter", "link": "https://stackoverflow.com/users/3104974/ascripter"}, "is_accepted": true, "score": 3, "last_activity_date": 1528321098, "last_edit_date": 1528321098, "creation_date": 1528320643, "answer_id": 50729905, "question_id": 50729581, "link": "https://stackoverflow.com/questions/50729581/python-how-to-reverse-multiple-slice-manipulation-of-a-string/50729905#50729905", "title": "Python: how to reverse multiple slice manipulation of a string", "body": "<p>Some of the other answers lack up to two important aspects of your full question</p>\n\n<ul>\n<li>What happens when number of characters is odd? The last character will be missing if you <code>zip</code> or <code>map</code> sequences of unequal length.</li>\n<li>What about recursive encryption?</li>\n</ul>\n\n<p>So here's your decrypt function:</p>\n\n<pre><code>def encrypt(text, n):\n    if n &lt;= 0:\n        return text\n    else:\n        a = encrypt(text, n-1)[1::2]\n        b = encrypt(text, n-1)[::2]\n        return a+b\n\ndef decrypt(text, n):\n    if n &lt;= 0:\n        return text\n    else:\n        a, b = text[:len(text)//2], text[len(text)//2:]\n        text = \"\".join(map(lambda x, y: x + y, b, a))\n        text = decrypt(text, n-1)\n        if len(b) &gt; len(a):\n            # happens for odd number of characters. We need to append last from b\n            text += b[-1]\n        return text\n\ns = \"This is a test!\"\n\nprint(\"n=1: {0}\".format(decrypt(encrypt(s, 1), 1)))\nprint(\"n=2: {0}\".format(decrypt(encrypt(s, 2), 2)))\nprint(\"n=3: {0}\".format(decrypt(encrypt(s, 3), 3)))\n\n&gt;&gt;&gt; n=1: This is a test!\n&gt;&gt;&gt; n=2: This is a test!\n&gt;&gt;&gt; n=3: This is a test!\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 217, "user_id": 9872061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUUuY.jpg?s=128&g=1", "display_name": "Prins", "link": "https://stackoverflow.com/users/9872061/prins"}, "edited": false, "score": 0, "creation_date": 1528323590, "post_id": 50729923, "comment_id": 88468495, "body": "The answer provided by @ascriptor should be accepted since it was provided first and fully addresses the question."}], "tags": [], "owner": {"reputation": 217, "user_id": 9872061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUUuY.jpg?s=128&g=1", "display_name": "Prins", "link": "https://stackoverflow.com/users/9872061/prins"}, "is_accepted": false, "score": 1, "last_activity_date": 1528323207, "last_edit_date": 1528323207, "creation_date": 1528320735, "answer_id": 50729923, "question_id": 50729581, "link": "https://stackoverflow.com/questions/50729581/python-how-to-reverse-multiple-slice-manipulation-of-a-string/50729923#50729923", "title": "Python: how to reverse multiple slice manipulation of a string", "body": "<p>From your question it seems to me that you wish to create a separate function that can be used to decrypt a string encrypted using your encrypt function.  If so, then something similar to the following can be done:</p>\n\n<pre><code>def decrypt(text, n):\n  if n &lt;= 0:\n    return text\n  else:\n    num = len(text) // 2\n    a = text[:num:]\n    b = text[num::]\n\n    answer = \"\".join(map(lambda x,y: x+y, b, a))\n    answer = decrypt(answer, n-1)\n\n    return answer if (len(text) % 2 == 0) else answer + b[-1]\n</code></pre>\n"}], "owner": {"reputation": 719, "user_id": 5336013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be95f013788c9c74226dcd08489ff1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Liu", "link": "https://stackoverflow.com/users/5336013/bowen-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 1, "accepted_answer_id": 50729905, "answer_count": 5, "score": 3, "last_activity_date": 1528323207, "creation_date": 1528319085, "question_id": 50729581, "link": "https://stackoverflow.com/questions/50729581/python-how-to-reverse-multiple-slice-manipulation-of-a-string", "title": "Python: how to reverse multiple slice manipulation of a string", "body": "<p>I am working on an interesting Python coding question:</p>\n\n<p>Take every 2nd char from the string, then the other chars, that are not every 2nd char, and concat them as new String.\nDo this n times!</p>\n\n<p>For instance:</p>\n\n<p>\"This is a test!\", 1 -> \"hsi  etTi sats!\"\n\"This is a test!\", 2 -> \"hsi  etTi sats!\" -> \"s eT ashi tist!\"</p>\n\n<p>The function I wrote is:</p>\n\n<pre><code>def encrypt(text, n):\n    if n &lt;= 0:\n        return text\n    else:\n        a = encrypt(text, n-1)[1::2]\n        b = encrypt(text, n-1)[::2]\n        return a+b\n</code></pre>\n\n<p>This seems to work, shown by the results of a testing function. But now I don't know how to reverse this action. For instance, with (\"hsi etTi sats!\", 1) as input, how shall I manipulate it so it can be restored to \"This is a test!\"? I know how to take every other character of a list, but how do you put them back. I am still in the early stage of learning Python, so I guess this is due to holes in my knowledge of something fundamental.</p>\n\n<pre><code>String = \"ABCDEF\"\na= String[1::2] = \"BDF\"\nb= String[::2] =\"ACE\"\n</code></pre>\n\n<p>How do you manipulate a and b so that String can be restored? I am not sure if I have clarified myself.</p>\n\n<p>Thank you for your time in advance.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528319164, "post_id": 50729574, "comment_id": 88466950, "body": "You are storing values as function attributes, instead of passing them as variables? Also, apart from that, the problem is that your recursive function func2 never stops from calling itself, you have an inifnite loop"}, {"owner": {"reputation": 47, "user_id": 7210992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etM2IUdOH1s/AAAAAAAAAAI/AAAAAAAAAIg/aqDWaNT-Uns/photo.jpg?sz=128", "display_name": "Arihant Bedagkar", "link": "https://stackoverflow.com/users/7210992/arihant-bedagkar"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528319500, "post_id": 50729574, "comment_id": 88467093, "body": "I know, this is the short version of my actual program."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528319710, "post_id": 50729574, "comment_id": 88467197, "body": "But when is your &quot;game&quot; supposed to stop?"}, {"owner": {"reputation": 47, "user_id": 7210992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etM2IUdOH1s/AAAAAAAAAAI/AAAAAAAAAIg/aqDWaNT-Uns/photo.jpg?sz=128", "display_name": "Arihant Bedagkar", "link": "https://stackoverflow.com/users/7210992/arihant-bedagkar"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528319769, "post_id": 50729574, "comment_id": 88467224, "body": "I tested my code with passing them as regular variables, it worked. I would like to know what is causing this error? I mean, are function attributes are constants?"}, {"owner": {"reputation": 47, "user_id": 7210992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etM2IUdOH1s/AAAAAAAAAAI/AAAAAAAAAIg/aqDWaNT-Uns/photo.jpg?sz=128", "display_name": "Arihant Bedagkar", "link": "https://stackoverflow.com/users/7210992/arihant-bedagkar"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528319829, "post_id": 50729574, "comment_id": 88467239, "body": "As I said, @OlivierMelan&#231;on, this is testing/debugging version of my code"}, {"owner": {"reputation": 47, "user_id": 7210992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etM2IUdOH1s/AAAAAAAAAAI/AAAAAAAAAIg/aqDWaNT-Uns/photo.jpg?sz=128", "display_name": "Arihant Bedagkar", "link": "https://stackoverflow.com/users/7210992/arihant-bedagkar"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528319992, "post_id": 50729574, "comment_id": 88467304, "body": "Umm... reason for down vote?"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528320063, "post_id": 50729574, "comment_id": 88467331, "body": "Using function arguments like this is just really bad practice and things can go very wrong with that. And, yes I know this is testing, but I need more information about what you are trying to do to be able to help. When is the game supposed to end. What do you want your function to output, etc."}, {"owner": {"reputation": 47, "user_id": 7210992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etM2IUdOH1s/AAAAAAAAAAI/AAAAAAAAAIg/aqDWaNT-Uns/photo.jpg?sz=128", "display_name": "Arihant Bedagkar", "link": "https://stackoverflow.com/users/7210992/arihant-bedagkar"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528320388, "post_id": 50729574, "comment_id": 88467456, "body": "I am a new learner to Python, just started few days ago, shifting from Java to Python is hard. Some other stackoverflow answers showed my to use function attributes to pass values from one function to another. Please can you tell me whats the difference between using them as function attributes and variables? Also, I have clearly mentioned as to what output I am trying to get, my very first line tells about the desired output"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1528320639, "post_id": 50729574, "comment_id": 88467539, "body": "I suggest you do not use function attribute, I myself almost never see the need to use them. And since you do not want to answer the question of &quot;when should the game stop&quot;, I&#39;ll let someone you&#39;ll be willing to provide more details to help you instead."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1528322505, "post_id": 50730013, "comment_id": 88468197, "body": "Neither of these are arrays, they are <i>list objects</i>, which don&#39;t have dimensions, but can be arbitrarily nested."}], "tags": [], "owner": {"reputation": 47, "user_id": 7210992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etM2IUdOH1s/AAAAAAAAAAI/AAAAAAAAAIg/aqDWaNT-Uns/photo.jpg?sz=128", "display_name": "Arihant Bedagkar", "link": "https://stackoverflow.com/users/7210992/arihant-bedagkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1528321152, "creation_date": 1528321152, "answer_id": 50730013, "question_id": 50729574, "link": "https://stackoverflow.com/questions/50729574/two-dimensional-list-error-in-python/50730013#50730013", "title": "two-dimensional list error in python", "body": "<p>I got the solution,</p>\n\n<p>Actually, I recently shifted from Java to Python, started learning Python few days ago,</p>\n\n<p>In Java we used to create multi-dimensional arrays like <code>array[][]</code>, so in Python, I tried the same thing, <code>list = [[]]</code></p>\n\n<p>But that didn't work, as it is same as <code>array[][0]</code>, so to create multi-dimensional array in Python, I did, <code>lists = [[], []]</code>, a two-dimensional array.</p>\n"}], "owner": {"reputation": 47, "user_id": 7210992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etM2IUdOH1s/AAAAAAAAAAI/AAAAAAAAAIg/aqDWaNT-Uns/photo.jpg?sz=128", "display_name": "Arihant Bedagkar", "link": "https://stackoverflow.com/users/7210992/arihant-bedagkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528321152, "creation_date": 1528319039, "question_id": 50729574, "link": "https://stackoverflow.com/questions/50729574/two-dimensional-list-error-in-python", "title": "two-dimensional list error in python", "body": "<p>I want to store the guesses of different <code>iterator</code> values in two-dimensional list</p>\n\n<p>e.g.,</p>\n\n<pre><code>&gt;&gt;&gt;print(characters)\n&gt;&gt;&gt;[['a', 'b', 'c'], ['d', 'e', 'f'], ['g', 'h', 'i']]\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>def func1():\n    func1.characters = [[]]\n    func1.iterator = 0\n    func2()\n\n\ndef func2():\n    if func1.iterator == 3:\n        func1.iterator = 0\n    guess = input(\"Guess A Character: \")\n\n    if not (guess in func1.characters[func1.iterator]):\n        func1.characters[func1.iterator].append(guess)\n\n    print(\"Characters guessed: \" + ''.join(func1.characters[func1.iterator]))\n    func1.iterator += 1\n    func2()\n</code></pre>\n\n<p>I am getting an error saying <code>IndexError: list index out of range</code>\nI don't know how can I store values in <code>characters</code> list</p>\n\n<p>This is what I am trying to do,</p>\n\n<p>User inputs <code>'a'</code>, checks if <code>'a'</code> is present in <code>characters[0]</code> or not, if not, then, value gets stored in <code>characters[0][0]</code>, <code>iterator</code> increments to 1</p>\n\n<p>User inputs <code>'b'</code>, checks if <code>'b'</code> is present in <code>characters[1]</code> or not, if not, then, value gets stored in <code>characters[1][0]</code>, <code>iterator</code> increments to 2</p>\n\n<p>User inputs <code>'c'</code>, checks if <code>'c'</code> is present in <code>characters[2]</code> or not, if not, then, value gets stored in <code>characters[2][0]</code>, <code>iterator</code> increments to 3\n, <code>iterator</code> changes back to 0</p>\n\n<p>User inputs <code>'d'</code>, value gets stored in <code>characters[0][1]</code> and so on...</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528319973, "post_id": 50729552, "comment_id": 88467296, "body": "Do you definitely need the <code>NaN</code> entry there?"}, {"owner": {"reputation": 173, "user_id": 7695780, "user_type": "registered", "profile_image": "https://graph.facebook.com/1583137158367370/picture?type=large", "display_name": "Alexandra Espich&#225;n", "link": "https://stackoverflow.com/users/7695780/alexandra-espich%c3%a1n"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1528321800, "post_id": 50729552, "comment_id": 88467953, "body": "If it is possible, but I could ignore it."}], "answers": [{"tags": [], "owner": {"reputation": 1178, "user_id": 5856119, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/8vzgn.jpg?s=128&g=1", "display_name": "An economist", "link": "https://stackoverflow.com/users/5856119/an-economist"}, "is_accepted": false, "score": 1, "last_activity_date": 1528326256, "creation_date": 1528326256, "answer_id": 50730815, "question_id": 50729552, "link": "https://stackoverflow.com/questions/50729552/split-column-containing-lists-into-different-rows-in-pandas/50730815#50730815", "title": "Split Column containing lists into different rows in pandas", "body": "<p>This is rather convoluted way, which drops empty cells:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'id': [1,2,3],\n                   'info': [[1,2], [3], [ ]]})\n\nunstack_df = df.set_index(['id'])['info'].apply(pd.Series)\\\n                                         .stack()\\\n                                         .reset_index(level=1, drop=True)\n\nunstack_df = unstack_df.reset_index()\nunstack_df.columns = ['id', 'info']\n\nunstack_df\n\n&gt;&gt;\n       id   info\n    0   1   1.0\n    1   1   2.0\n    2   2   3.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1528329220, "creation_date": 1528329220, "answer_id": 50731200, "question_id": 50729552, "link": "https://stackoverflow.com/questions/50729552/split-column-containing-lists-into-different-rows-in-pandas/50731200#50731200", "title": "Split Column containing lists into different rows in pandas", "body": "<p>Here's one way using <code>np.repeat</code> and <code>itertools.chain</code>. Converting empty lists to <code>{np.nan}</code> is a trick to fool Pandas into accepting an iterable as a value. This allows <code>chain.from_iterable</code> to work error-free.</p>\n\n<pre><code>import numpy as np\nfrom itertools import chain\n\ndf.loc[~df['info'].apply(bool), 'info'] = {np.nan}\n\nres = pd.DataFrame({'id': np.repeat(df['id'], df['info'].map(len).values),\n                    'info': list(chain.from_iterable(df['info']))})\n\nprint(res)\n\n   id  info\n0   1   1.0\n0   1   2.0\n1   2   3.0\n2   3   NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1376, "user_id": 6190930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dfbba9c5af37b4eb37bc508a355fda7?s=128&d=identicon&r=PG", "display_name": "pgngp", "link": "https://stackoverflow.com/users/6190930/pgngp"}, "is_accepted": true, "score": 6, "last_activity_date": 1528334981, "creation_date": 1528334981, "answer_id": 50731768, "question_id": 50729552, "link": "https://stackoverflow.com/questions/50729552/split-column-containing-lists-into-different-rows-in-pandas/50731768#50731768", "title": "Split Column containing lists into different rows in pandas", "body": "<p>You can try this out:</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df = pd.DataFrame({'id': [1,2,3], 'info': [[1,2],[3],[]]})\n&gt;&gt;&gt; s = df.apply(lambda x: pd.Series(x['info']), axis=1).stack().reset_index(level=1, drop=True)\n&gt;&gt;&gt; s.name = 'info'\n&gt;&gt;&gt; df2 = df.drop('info', axis=1).join(s)\n&gt;&gt;&gt; df2['info'] = pd.Series(df2['info'], dtype=object)\n&gt;&gt;&gt; df2\n   id info\n0   1    1\n0   1    2\n1   2    3\n2   3  NaN\n</code></pre>\n\n<p>Similar question is posted in <a href=\"https://stackoverflow.com/questions/27263805/pandas-when-cell-contents-are-lists-create-a-row-for-each-element-in-the-list\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 7884876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66db80dc9f17922c361fc26273b777f1?s=128&d=identicon&r=PG&f=1", "display_name": "Patel", "link": "https://stackoverflow.com/users/7884876/patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1537463799, "creation_date": 1537463799, "answer_id": 52430195, "question_id": 50729552, "link": "https://stackoverflow.com/questions/50729552/split-column-containing-lists-into-different-rows-in-pandas/52430195#52430195", "title": "Split Column containing lists into different rows in pandas", "body": "<p>Try these methods too...</p>\n\n<p><strong>Method 1</strong></p>\n\n<pre><code>def split_dataframe_rows(df,column_selectors):\n    # we need to keep track of the ordering of the columns\n    def _split_list_to_rows(row,row_accumulator,column_selector):\n        split_rows = {}\n        max_split = 0\n        for column_selector in column_selectors:\n            split_row = row[column_selector]\n            split_rows[column_selector] = split_row\n            if len(split_row) &gt; max_split:\n                max_split = len(split_row)\n\n        for i in range(max_split):\n            new_row = row.to_dict()\n            for column_selector in column_selectors:\n                try:\n                    new_row[column_selector] = split_rows[column_selector].pop(0)\n                except IndexError:\n                    new_row[column_selector] = ''\n            row_accumulator.append(new_row)\n\n    new_rows = []\n    df.apply(_split_list_to_rows,axis=1,args = (new_rows,column_selectors))\n    new_df = pd.DataFrame(new_rows, columns=df.columns)\n    return new_df\n</code></pre>\n\n<p><strong>Method 2</strong></p>\n\n<pre><code>def flatten_data(json = None):\n    df = pd.DataFrame(json)\n    list_cols = [col for col in df.columns if type(df.loc[0, col]) == list]\n    for i in range(len(list_cols)):\n        col = list_cols[i]\n        meta_cols = [col for col in df.columns if type(df.loc[0, col]) != list] + list_cols[i+1:]\n        json_data = df.to_dict('records')\n        df = json_normalize(data=json_data, record_path=col, meta=meta_cols, record_prefix=col+str('_'), sep='_')\n    return json_normalize(df.to_dict('records'))\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 7695780, "user_type": "registered", "profile_image": "https://graph.facebook.com/1583137158367370/picture?type=large", "display_name": "Alexandra Espich&#225;n", "link": "https://stackoverflow.com/users/7695780/alexandra-espich%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8989, "favorite_count": 2, "closed_date": 1563606934, "accepted_answer_id": 50731768, "answer_count": 4, "score": 9, "last_activity_date": 1537463799, "creation_date": 1528318975, "question_id": 50729552, "link": "https://stackoverflow.com/questions/50729552/split-column-containing-lists-into-different-rows-in-pandas", "closed_reason": "Duplicate", "title": "Split Column containing lists into different rows in pandas", "body": "<p>I have a dataframe in pandas like this:</p>\n\n<pre><code>id     info\n1      [1,2]\n2      [3]\n3      []\n</code></pre>\n\n<p>And I want to split it into different rows like this:</p>\n\n<pre><code>id     info\n1      1 \n1      2 \n2      3 \n3      NaN\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python", "python-3.x", "cmake", "pip", "python-packaging"], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1528318969, "creation_date": 1528318969, "question_id": 50729548, "link": "https://stackoverflow.com/questions/50729548/how-do-i-create-a-python-package-wrapper-around-c-libraries-that-can-be-installe", "title": "How do I create a Python package wrapper around C libraries that can be installed via pip?", "body": "<p>I have not had much luck with this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/50709217/how-do-you-compile-a-c-library-with-multiple-dependencies-into-a-python-package\">How do you compile a C library with multiple dependencies into a Python package? Cmake?</a></p>\n\n<p>I have a python package with functions which wrap around several C libraries. I have done this with ctypes, linking to the C libraries installed via <code>sudo make</code> within <code>/usr/local/lib</code></p>\n\n<p>However, this is not the best solution. Those C libraries should be installed when the python package is installed via github or pip, correct? Currently, these C libraries each require cmake. </p>\n\n<p>How do you compile the C libraries upon installation of the python package? Is there another recommended way to distribute python packages which wrap around C functions? </p>\n"}, {"tags": ["python", "google-app-engine", "deployment", "gcloud"], "comments": [{"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1528344247, "post_id": 50729516, "comment_id": 88473305, "body": "I think you need to revisit your <code>requirements.txt</code> content: I&#39;m fairly certain that neither <code>Flask</code> nor <code>gunicorn</code> provide <code>firebase_admin</code> - you probably have missing dependencies. Maybe try this approach to discover them: <a href=\"https://stackoverflow.com/questions/50627798/adding-a-local-repository-for-dependency-injection-in-python-on-google-cloud/50633000#50633000\" title=\"adding a local repository for dependency injection in python on google cloud\">stackoverflow.com/questions/50627798/&hellip;</a>"}, {"owner": {"reputation": 269, "user_id": 7304116, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-n7TCtnRd0gg/AAAAAAAAAAI/AAAAAAAAAAA/-RMarMdA9Dk/photo.jpg?sz=128", "display_name": "Vasco", "link": "https://stackoverflow.com/users/7304116/vasco"}, "reply_to_user": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1528357946, "post_id": 50729516, "comment_id": 88479136, "body": "Thank you for the tip @DanCornilescu but still getting the same errors, even after adding all dependencies to the <b>requirements.txt</b> file"}, {"owner": {"reputation": 754, "user_id": 9551346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cbdfe64d02c9d59bd378599266add1f?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Panunzio", "link": "https://stackoverflow.com/users/9551346/federico-panunzio"}, "edited": false, "score": 0, "creation_date": 1528375569, "post_id": 50729516, "comment_id": 88490573, "body": "This is indeed a dependency issue. Does it work locally? You state you have all modules installed into a virtual env. I just made a quick test by doing the following:  $ virtualenv test $ source test/bin/activate $ pip freeze (make sure there\u2019s nothing already installed) $ pip install firebase_admin Run you python script importing firebase_admin.  I also tried deploying just by adding \u201cfirebase-admin==2.11.0\u201d into the requirements.txt file. Also no issue when deploying. If it\u2019s still not working, could you show us the updated requirements.txt and a snippet code of main.py?"}, {"owner": {"reputation": 269, "user_id": 7304116, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-n7TCtnRd0gg/AAAAAAAAAAI/AAAAAAAAAAA/-RMarMdA9Dk/photo.jpg?sz=128", "display_name": "Vasco", "link": "https://stackoverflow.com/users/7304116/vasco"}, "edited": false, "score": 0, "creation_date": 1528402088, "post_id": 50729516, "comment_id": 88506389, "body": "Yes, it seems like a dependency issue. I added all my dependencies to my requirements. txt file. Yes, it is running locally, I just want to host it Google cloud console. I did what you say, creating a new virtualenv test  and there were no dependencies applied to it I <code>pip install firebase_admin</code> but still getting the same errors"}, {"owner": {"reputation": 754, "user_id": 9551346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cbdfe64d02c9d59bd378599266add1f?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Panunzio", "link": "https://stackoverflow.com/users/9551346/federico-panunzio"}, "edited": false, "score": 0, "creation_date": 1528452495, "post_id": 50729516, "comment_id": 88523884, "body": "@VasilVasilev could you share a snippet code of main.py?"}, {"owner": {"reputation": 269, "user_id": 7304116, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-n7TCtnRd0gg/AAAAAAAAAAI/AAAAAAAAAAA/-RMarMdA9Dk/photo.jpg?sz=128", "display_name": "Vasco", "link": "https://stackoverflow.com/users/7304116/vasco"}, "reply_to_user": {"reputation": 754, "user_id": 9551346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cbdfe64d02c9d59bd378599266add1f?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Panunzio", "link": "https://stackoverflow.com/users/9551346/federico-panunzio"}, "edited": false, "score": 0, "creation_date": 1528460707, "post_id": 50729516, "comment_id": 88528571, "body": "@FedericoPanunzio Ofc.. I added a section to the question you can have a look"}, {"owner": {"reputation": 754, "user_id": 9551346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cbdfe64d02c9d59bd378599266add1f?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Panunzio", "link": "https://stackoverflow.com/users/9551346/federico-panunzio"}, "edited": false, "score": 0, "creation_date": 1528466502, "post_id": 50729516, "comment_id": 88532279, "body": "@VasilVasilev From where i&#39;m standing, there&#39;s not much else I can do. Your configuration looks fine and the code is correct. This must be something related to your local environment"}], "answers": [{"tags": [], "owner": {"reputation": 4453, "user_id": 7950592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c6EsH.png?s=128&g=1", "display_name": "Nebulastic", "link": "https://stackoverflow.com/users/7950592/nebulastic"}, "is_accepted": false, "score": 0, "last_activity_date": 1582046187, "creation_date": 1582046187, "answer_id": 60286214, "question_id": 50729516, "link": "https://stackoverflow.com/questions/50729516/cant-upload-python-script-on-google-cloud-console-error-response-13-erro/60286214#60286214", "title": "Can&#39;t Upload python script on Google Cloud Console. (Error response [13] &amp;&amp; Error response [9])", "body": "<p>You are using fairly low versions of gunicorn and Flask. I would upgrade them accordingly (<a href=\"https://cloud.google.com/appengine/docs/flexible/python/quickstart\" rel=\"nofollow noreferrer\">google example</a>) and add firebase-admin, firebase and some other dependencies as well. Example requirements.txt:</p>\n\n<pre><code>Flask==1.1.1\ngunicorn==20.0.4\nmoment==0.8.2\nfirebase==3.0.1\nfirebase-admin==3.2.1\ngoogle-api-python-client==1.7.11\n</code></pre>\n\n<p>I would recommend you put those dependencies in your requirements.txt file and only install from that file in a virtualenv.</p>\n\n<pre><code>pip3 install -r requirements.txt\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 7304116, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-n7TCtnRd0gg/AAAAAAAAAAI/AAAAAAAAAAA/-RMarMdA9Dk/photo.jpg?sz=128", "display_name": "Vasco", "link": "https://stackoverflow.com/users/7304116/vasco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 497, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582046187, "creation_date": 1528318800, "last_edit_date": 1528460676, "question_id": 50729516, "link": "https://stackoverflow.com/questions/50729516/cant-upload-python-script-on-google-cloud-console-error-response-13-erro", "title": "Can&#39;t Upload python script on Google Cloud Console. (Error response [13] &amp;&amp; Error response [9])", "body": "<p>I have been trying last day to deploy my script to Google Cloud console but without success!\nGcloud Version: </p>\n\n<pre><code>Google Cloud SDK 204.0.0\nbeta 2017.09.15\nbq 2.0.34\ncore 2018.06.04\ngsutil 4.31\n</code></pre>\n\n<p>yaml file:</p>\n\n<pre><code>runtime: python\nenv: flex\nentrypoint: gunicorn -b :$PORT main:app\n\nruntime_config:\n  python_version: 3\nmanual_scaling:\n  instances: 1\nresources:\n  cpu: 1\n  memory_gb: 1\n  disk_size_gb: 10\n</code></pre>\n\n<p>requirements.txt file:</p>\n\n<pre><code>Flask==0.12.2\ngunicorn==19.8.1\n</code></pre>\n\n<p>I tried deploying with <code>gcloud beta app deploy</code> and I am getting the following error:</p>\n\n<pre><code>ERROR: (gcloud.app.deploy) Error Response: [9]\nApplication startup error:\n[2018-06-06 09:28:47 +0000] [1] [INFO] Starting gunicorn 19.8.1\n[2018-06-06 09:28:47 +0000] [1] [INFO] Listening at: http://0.0.0.0:8080 (1)\n[2018-06-06 09:28:47 +0000] [1] [INFO] Using worker: sync\n[2018-06-06 09:28:47 +0000] [7] [INFO] Booting worker with pid: 7\n[2018-06-06 09:28:47 +0000] [7] [ERROR] Exception in worker process\nTraceback (most recent call last):\n  File \"/env/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 583, in spawn_worker\n    worker.init_process()\n  File \"/env/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 129, in init_process\n    self.load_wsgi()\n  File \"/env/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 138, in load_wsgi\n    self.wsgi = self.app.wsgi()\n  File \"/env/lib/python3.6/site-packages/gunicorn/app/base.py\", line 67, in wsgi\n    self.callable = self.load()\n  File \"/env/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 52, in load\n    return self.load_wsgiapp()\n  File \"/env/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 41, in load_wsgiapp\n    return util.import_app(self.app_uri)\n  File \"/env/lib/python3.6/site-packages/gunicorn/util.py\", line 350, in import_app\n    __import__(module)\n  File \"/home/vmagent/app/main.py\", line 5, in &lt;module&gt;\n    import firebase_admin\nModuleNotFoundError: No module named 'firebase_admin'\n[2018-06-06 09:28:47 +0000] [7] [INFO] Worker exiting (pid: 7)\n[2018-06-06 09:28:47 +0000] [1] [INFO] Shutting down: Master\n[2018-06-06 09:28:47 +0000] [1] [INFO] Reason: Worker failed to boot.\n</code></pre>\n\n<p>I also have all my modules installed into a virtual env... </p>\n\n<p>However, I also tried deploying with <code>gcloud app deploy</code> and I am getting a different error -> <code>ERROR: (gcloud.beta.app.deploy) Error Response: [13] Error while processing files.</code> Referring to a similar issue which is closed now (<a href=\"https://github.com/GoogleCloudPlatform/getting-started-java/issues/281\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/getting-started-java/issues/281</a>) I did this command <code>gcloud config set app/use_deprecated_preparation True</code>, as the majority of people are saying that is working but for me is NOT!</p>\n\n<p>Code snipet from my main.py</p>\n\n<pre><code># [START app]\nimport logging\nimport sys\n\nimport firebase_admin\nimport moment\n\nfrom datetime import datetime\nfrom firebase_admin import credentials, db\nfrom flask import Flask, json, make_response, render_template, request\n\nfrom apiclient.discovery import build, build_from_document\nfrom firebase import firebase\nfrom httplib2 import Http\nfrom oauth2client.service_account import ServiceAccountCredentials\n\nservice_account = 'FIREBASE-ADMIN-SDK-KEY'\ndatabase_url = 'FIRABE-DB-URL'\n\ncred = credentials.Certificate(service_account)\n\n# Initialize the app with a service account, granting admin privileges\nfirebase_admin.initialize_app(cred, {\n    'databaseURL': database_url\n})\n\nfirebase = firebase.FirebaseApplication(database_url, None)\n\nuser_id = \"\"\n\nrootDB = db.reference()\nmessagesDb = rootDB.child('messages')\n\napp = Flask(__name__)\n\nif sys.version_info.major &lt; 3:\n    reload(sys)\nsys.setdefaultencoding('utf8')\n\nscopes = ['https://www.googleapis.com/auth/chat.bot']\n\ncredentials = ServiceAccountCredentials.from_json_keyfile_name(\n    'Google-Serviced-Account-KEY', scopes)\n\nhttp_auth = credentials.authorize(Http())\n\nchat = build('chat', 'v1', http=http_auth, cache_discovery=False)\n\n\n# Using the rest api (send message function)\n@app.route('/receiver', methods=['POST'])\ndef message_responses():\n\n    #Some Code here\n\n    return 'OK'\n\n# [END message_response]\n\n\n@app.route('/getMeasages', methods=['POST'])\ndef get_messages():\n\n    # Some Code here\n\n    return 'OK'\n\n# [END get_messages]\n\n@app.route('/test', methods=['POST'])\ndef resp_get():\n\n    event_data = request.get_json()\n    print(event_data)\n\n    return 'OK'\n\n\n@app.route('/', methods=['GET'])\ndef home_get():    \n\n    return render_template('home.html')\n\n\nif __name__ == '__main__':\n    # This is used when running locally. Gunicorn is used to run the\n    # application on Google App Engine. See entrypoint in app.yaml.\n    app.run(host='localhost', port=8080, debug=True)\n# [END app]\n</code></pre>\n"}, {"tags": ["python", "pandas", "csv", "datetime"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1528318901, "post_id": 50729511, "comment_id": 88466835, "body": "<code>pd.to_datetime(df[&#39;column&#39;], format=&#39;%Y&#47;%m&#47;%d %H:%M&#39;, errors=&#39;coerce&#39;)</code>"}, {"owner": {"reputation": 338, "user_id": 9390116, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LiquidSnake", "link": "https://stackoverflow.com/users/9390116/liquidsnake"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528318954, "post_id": 50729511, "comment_id": 88466868, "body": "@coldspeed can I have a bit of explanation ?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528318978, "post_id": 50729511, "comment_id": 88466874, "body": "it converts the string column to datetime as per the format specified"}, {"owner": {"reputation": 338, "user_id": 9390116, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LiquidSnake", "link": "https://stackoverflow.com/users/9390116/liquidsnake"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528319242, "post_id": 50729511, "comment_id": 88466980, "body": "It doesn&#39;t work either :/"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528319299, "post_id": 50729511, "comment_id": 88466999, "body": "&quot;it doesn&#39;t work&quot; is not a helpful response."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528319316, "post_id": 50729511, "comment_id": 88467012, "body": "I need to know exactly what it is you are getting as opposed to what it is you expect."}, {"owner": {"reputation": 338, "user_id": 9390116, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LiquidSnake", "link": "https://stackoverflow.com/users/9390116/liquidsnake"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528319483, "post_id": 50729511, "comment_id": 88467081, "body": "Well the dataframe remains the same. For information the column is like this: <code>MeasurementGMT</code> and all the values under this column is in this format <code>&#39;%Y&#47;%m&#47;%d %H:%M&#39;</code> but using this as you preconised: <code>pandas.to_datetime(df_aq[&#39;MeasurementGMT&#39;], format=&#39;%Y-%m-%d %H:%M:%00&#39;, errors=&#39;coerce&#39;)</code> nothing changes"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528319507, "post_id": 50729511, "comment_id": 88467097, "body": "Dear sir, please assign the result back to a column."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528319553, "post_id": 50729511, "comment_id": 88467125, "body": "<code>df[&#39;date&#39;] = pd.to_datetime(...)</code>"}], "owner": {"reputation": 338, "user_id": 9390116, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LiquidSnake", "link": "https://stackoverflow.com/users/9390116/liquidsnake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1528319044, "answer_count": 0, "score": 0, "last_activity_date": 1528318794, "creation_date": 1528318794, "question_id": 50729511, "link": "https://stackoverflow.com/questions/50729511/change-date-format-of-a-dataframe", "closed_reason": "Duplicate", "title": "Change date format of a dataframe", "body": "<p>I've a csv file that I'm using with <code>pandas</code>, I have several columns but one of them is a date in a certain format such as <code>'%Y/%m/%d %H:%M'</code> and I want to convert every value under this column in a format like this: <code>'%Y-%m-%d %H:%M:00'</code> How will I proceed ? I tried this: <code>df.to_csv(output.csv', date_format='%Y-%m-%d %H:%M:00')</code> but nothing works, the file remain the same. </p>\n"}, {"tags": ["python", "matlab", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1528325412, "last_edit_date": 1528325412, "creation_date": 1528324833, "answer_id": 50730601, "question_id": 50729464, "link": "https://stackoverflow.com/questions/50729464/how-can-i-create-a-matlab-file-from-python-with-multi-dimensional-arrays-in-a-ma/50730601#50730601", "title": "How can I create a Matlab file from Python with multi-dimensional arrays in a Matlab data structure?", "body": "<p>Here's a stab at the task:</p>\n\n<pre><code>In [292]: dt = np.dtype([('key1',int),('key2',int, (3,)),('key3',object)])\nIn [293]: arr = np.zeros((5,), dt)\nIn [294]: arr\nOut[294]: \narray([(0, [0, 0, 0], 0), (0, [0, 0, 0], 0), (0, [0, 0, 0], 0),\n       (0, [0, 0, 0], 0), (0, [0, 0, 0], 0)],\n      dtype=[('key1', '&lt;i8'), ('key2', '&lt;i8', (3,)), ('key3', 'O')])\nIn [295]: arr['key1']=np.arange(5)\nIn [296]: arr['key2']=np.arange(15).reshape(5,3)\nIn [302]: arr['key3']=[1,np.arange(5),np.ones((2,3),int),'astring',[['a','b']]]\nIn [303]: io.savemat('test.mat', {'astruct':arr})\n</code></pre>\n\n<p>In Octave:</p>\n\n<pre><code>&gt;&gt; load test.mat\n&gt;&gt; format compact\n&gt;&gt; astruct\nastruct =\n\n  1x5 struct array containing the fields:\n\n    key1\n    key2\n    key3\n&gt;&gt; astruc.key1\nerror: 'astruc' undefined near line 1 column 1\n&gt;&gt; astruct.key1\nans = 0\nans = 1\nans = 2\nans = 3\nans = 4\n&gt;&gt; astruct.key2\nans =\n  0  1  2\nans =\n  3  4  5\nans =\n  6  7  8\nans =\n   9  10  11\nans =\n  12  13  14\n&gt;&gt; astruct.key3\nans = 1\nans =\n  0  1  2  3  4\nans =\n  1  1  1\n  1  1  1\nans = astring\nans = ab\n</code></pre>\n\n<p>Back in <code>ipython</code>:</p>\n\n<pre><code>In [304]: d = io.loadmat('test.mat')\nIn [305]: d\nOut[305]: \n{'__header__': b'MATLAB 5.0 MAT-file Platform: posix, Created on: Wed Jun  6 15:36:23 2018',\n '__version__': '1.0',\n '__globals__': [],\n 'astruct': array([[(array([[0]]), array([[0, 1, 2]]), array([[1]])),\n         (array([[1]]), array([[3, 4, 5]]), array([[0, 1, 2, 3, 4]])),\n         (array([[2]]), array([[6, 7, 8]]), array([[1, 1, 1],\n        [1, 1, 1]])),\n         (array([[3]]), array([[ 9, 10, 11]]), array(['astring'], dtype='&lt;U7')),\n         (array([[4]]), array([[12, 13, 14]]), array([['a', 'b']], dtype='&lt;U1'))]],\n       dtype=[('key1', 'O'), ('key2', 'O'), ('key3', 'O')])}\n</code></pre>\n\n<p>So while a created a <code>numpy</code> structured array with dtypes like <code>int</code> and <code>int(3)</code>, the loaded array has object dtype for all fields.  <code>loadmat</code> makes heavy use of object dtype arrays to handle the generality of MATLAB cells and struct.  <code>loadmat</code> has various  loading parameters, which we can play with.</p>\n\n<p>This was just a guess based on previous experience loading MATLAB files.  If this isn't what you want, I'd suggest constructing sample data in MATLAB, save that, and then load to see how <code>loadmat</code> constructs it.  You may have to go back and forth a few times to work out the bugs.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9540505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oe7GT.jpg?s=128&g=1", "display_name": "dmueller", "link": "https://stackoverflow.com/users/9540505/dmueller"}, "is_accepted": false, "score": 0, "last_activity_date": 1528480805, "last_edit_date": 1528480805, "creation_date": 1528465257, "answer_id": 50761972, "question_id": 50729464, "link": "https://stackoverflow.com/questions/50729464/how-can-i-create-a-matlab-file-from-python-with-multi-dimensional-arrays-in-a-ma/50761972#50761972", "title": "How can I create a Matlab file from Python with multi-dimensional arrays in a Matlab data structure?", "body": "<p>Given the direction provided by hpaulj, I developed the following function that created a structure from a list of objects.</p>\n\n<pre><code>    def listobj2struct(list_in):\n    \"\"\"Converts a list of objects to a structured array.\n\n    Parameters\n    ----------\n    list_in: list\n        List of objects\n\n    Returns\n    -------\n    struct: np.array\n        Structured array\n    \"\"\"\n\n    # Create data type for each variable in object\n    keys = list(vars(list_in[0]).keys())\n    data_type = []\n    for key in keys:\n        data_type.append((key, list))\n\n    # Create structured array based on data type and length of list\n    dt = np.dtype(data_type)\n    struct = np.zeros((len(list_in),), dt)\n\n    # Populate the structure with data from the objects\n    for n, item in enumerate(list_in):\n        new_dict = vars(item)\n        for key in new_dict:\n            struct[key][n] = new_dict[key]\n\n    return struct\n</code></pre>\n\n<p>To complete what I needed to do to create a Matlab file from a complex nesting of objects I also wrote the following functions. Perhaps this will help others facing similar tasks. There may be better ways, but this worked for me.</p>\n\n<pre><code>    def obj2dict(obj):\n    \"\"\"Converts object variables to dictionaries. Works recursively to all levels of objects.\n\n    Parameters\n    ----------\n    obj: object\n        Object of some class\n\n    Returns\n    -------\n    obj_dict: dict\n        Dictionary of all object variables\n    \"\"\"\n\n    obj_dict = vars(obj)\n    for key in obj_dict:\n        # Clean out NoneTypes\n        if obj_dict[key] is None:\n            obj_dict[key] = []\n        # If variable is another object convert to dictionary recursively\n        elif str(type(obj_dict[key]))[8:13] == 'Class':\n            obj_dict[key]=obj2dict(obj_dict[key])\n\n    return obj_dict\n\n\ndef listobj2dict(list_in):\n    \"\"\"Converts list of objects to list of dictionaries. Works recursively to all levels of objects.\n\n    Parameters\n    ----------\n    obj: object\n        Object of some class\n\n    Returns\n    -------\n    new_list: list\n        List of dictionaries\n    \"\"\"\n    new_list = []\n    for obj in list_in:\n        new_list.append(obj2dict(obj))\n    return new_list\n\n\ndef listdict2struct(list_in):\n    \"\"\"Converts a list of dictionaries to a structured array.\n\n    Parameters\n    ----------\n    list_in: list\n        List of dictionaries\n\n    Returns\n    -------\n    struct: np.array\n        Structured array\n    \"\"\"\n\n    # Create data type for each variable in object\n    keys = list(list_in[0].keys())\n    data_type = []\n    for key in keys:\n        data_type.append((key, list))\n\n    # Create structured array based on data type and length of list\n    dt = np.dtype(data_type)\n    struct = np.zeros((len(list_in),), dt)\n\n    # Populate the structure with data from the objects\n    for n, item in enumerate(list_in):\n        new_dict = item\n        for key in new_dict:\n            struct[key][n] = new_dict[key]\n\n    return struct\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9540505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oe7GT.jpg?s=128&g=1", "display_name": "dmueller", "link": "https://stackoverflow.com/users/9540505/dmueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1528480805, "creation_date": 1528318573, "question_id": 50729464, "link": "https://stackoverflow.com/questions/50729464/how-can-i-create-a-matlab-file-from-python-with-multi-dimensional-arrays-in-a-ma", "title": "How can I create a Matlab file from Python with multi-dimensional arrays in a Matlab data structure?", "body": "<p>I am trying to create a Matlab file (*.mat) from Python that contains a Matlab data structure that would look like:</p>\n\n<pre><code>s.key1 where key1 is an array of values\ns.key2 where key2 is an array of 1D arrays \ns.key3 where key3 is an array of 2D arrays \n</code></pre>\n\n<p>If I use savemat and a dictionary, the Matlab output is a cell array rather than a Matlab data structure.</p>\n\n<p>I have tried using </p>\n\n<pre><code>np.core.records.fromarrays(data_list, names=q_keys)\n</code></pre>\n\n<p>but this doesn't seem to work for keys with 2D arrays. I have both 2D and 3D arrays that need to be in a Matlab structure for compatibility with an existing file format. Is there a way to do this in Python?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 1206, "user_id": 3083094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lved8.jpg?s=128&g=1", "display_name": "Wasi", "link": "https://stackoverflow.com/users/3083094/wasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1528319131, "creation_date": 1528319131, "answer_id": 50729591, "question_id": 50729431, "link": "https://stackoverflow.com/questions/50729431/code-for-list-elements/50729591#50729591", "title": "Code for list elements", "body": "<p>To fetch multiple elements that match the same css selector you can use the <code>find_elements_by_css_selector()</code> method like below. It will find all the web elements that matches the css selector and return a list of those web elements. So, you can iterate over that list:</p>\n\n<pre><code>segui_css_selector= \"._5f5mN.jIbKX.KUBKM.yZn4P\"\nselector_link_gente_seguita=\".FPmhX.notranslate.zsYNt\"\ntime.sleep(3)\nfor element in driver.find_elements_css_selector(segui_css_selector):\n    time.sleep(5)\n    link = element.find_element_by_css_selector (selector_link_gente_seguita).text\n    print(link)\n    driver.get (\"https://www.instagram.com/\" + link + \"/\")\n    time.sleep(3)\n    segui = driver.find_element_by_xpath (\"/html/body/span/section/main/div/header/section/div[1]/span/span[1]/button\")\n    segui.click()\n    time.sleep(3)\n    driver.get (\"https://www.instagram.com/\" + Pagina + \"/\")\n    time.sleep(2)\n    driver.find_element_by_xpath ('//a[@href=''\"/' + Pagina + '/followers/''\"]').click ()\n\n\n    time.sleep (5)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9859146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8989965ba24f442f89abab8d694e6ec?s=128&d=identicon&r=PG&f=1", "display_name": "Guest00001", "link": "https://stackoverflow.com/users/9859146/guest00001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528319131, "creation_date": 1528318405, "question_id": 50729431, "link": "https://stackoverflow.com/questions/50729431/code-for-list-elements", "title": "Code for list elements", "body": "<p>I'm having some problems with with a list.\nThe code that i need has to do this\nI have a list of elements that the code founds by css selector, whe the code has found all the elements,\nIt has to takes the text from the first element of the list, insert the text in a link, let the broswer look for that link, then return to the initial page where the list is present, look again for the same list, this time the code must take the text of the second element and do the same, therefore, must put the text in a link and look for it, then return it to the initial page ...</p>\n\n<p>The code that i wrote is this</p>\n\n<pre><code>segui_css_selector= \"._5f5mN.jIbKX.KUBKM.yZn4P\"\nselector_link_gente_seguita=\".FPmhX.notranslate.zsYNt\"\n\nwhile a&lt;50:\n\n    #start the loop\n\n    time.sleep(3)\n    segui= driver.find_element_by_css_selector(segui_css_selector)\n    time.sleep(1)\n    a += 1\n    print (a)\n    time.sleep (5)\n    link=driver.find_element_by_css_selector (selector_link_gente_seguita).text\n    print(link)\n    driver.get (\"https://www.instagram.com/\" + link + \"/\")\n    time.sleep(3)\n    segui = driver.find_element_by_xpath (\"/html/body/span/section/main/div/header/section/div[1]/span/span[1]/button\")\n    segui.click()\n    time.sleep(3)\n    driver.get (\"https://www.instagram.com/\" + Pagina + \"/\")\n    time.sleep(2)\n    driver.find_element_by_xpath ('//a[@href=''\"/' + Pagina + '/followers/''\"]').click ()\n\n\n    time.sleep (5)\n\n\n\na = 0\n</code></pre>\n\n<p>the problem is this, when the code has finished the first cycle, so: it takes the text from the first element, puts it in the link, makes the link search and then returns to the initial page, the code continues to take the text always from the first element.\nI do not know how to make it continues the loop by taking the text from different elements each time</p>\n\n<p>This is an example of elements list:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;a class=\"FPmhX notranslate zsYNt \" title=\"zoe1\" href=\"/zoe1/\"&gt;A&lt;/a&gt;\r\n\r\n&lt;a class=\"FPmhX notranslate zsYNt \" title=\"zoe2\" href=\"/zoe2/\"&gt;B&lt;/a&gt;\r\n\r\n&lt;a class=\"FPmhX notranslate zsYNt \" title=\"zoe3\" href=\"/zoe3/\"&gt;C&lt;/a&gt;\r\n\r\n&lt;a class=\"FPmhX notranslate zsYNt \" title=\"zoe4\" href=\"/zoe4/\"&gt;D&lt;/a&gt;\r\n\r\n&lt;a class=\"FPmhX notranslate zsYNt \" title=\"zoe5\" href=\"/zoe5/\"&gt;E&lt;/a&gt;\r\n\r\n&lt;a class=\"FPmhX notranslate zsYNt \" title=\"zoe6\" href=\"/zoe6/\"&gt;F&lt;/a&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 1147, "user_id": 4205457, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4b72cb12b00fa10f636d5f8ad9987c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolabo", "link": "https://stackoverflow.com/users/4205457/nicolabo"}, "edited": false, "score": 0, "creation_date": 1528319577, "post_id": 50729629, "comment_id": 88467142, "body": "Thanks, it works. However do you know how to do it, using existing structure (with group.by.rolling.apply)?  In other words, is possible to create a function which could be nested in apply()? Thanks"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1147, "user_id": 4205457, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4b72cb12b00fa10f636d5f8ad9987c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolabo", "link": "https://stackoverflow.com/users/4205457/nicolabo"}, "edited": false, "score": 0, "creation_date": 1528320614, "post_id": 50729629, "comment_id": 88467529, "body": "@Nicolabo Base on my knowledge I do not know how to make it in with nested - apply"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1528319269, "creation_date": 1528319269, "answer_id": 50729629, "question_id": 50729425, "link": "https://stackoverflow.com/questions/50729425/estimate-weighed-average-for-rollinggroupby/50729629#50729629", "title": "Estimate weighed average for RollingGroupby", "body": "<p>Like this ? </p>\n\n<pre><code>pd.concat([(x.val1*x.wt).rolling(window=2,min_periods=1).sum()/x.wt.rolling(window=2,min_periods=1).sum() for _,x in df.groupby('id')])\nOut[592]: \n0    0.823389\n1    0.295437\n2    0.072459\n3    0.333050\n4    0.445683\n5    0.913049\n6    0.704820\n7    0.317114\n8    0.325059\n9    0.179366\ndtype: float64\n</code></pre>\n"}], "owner": {"reputation": 1147, "user_id": 4205457, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4b72cb12b00fa10f636d5f8ad9987c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolabo", "link": "https://stackoverflow.com/users/4205457/nicolabo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528322031, "creation_date": 1528318385, "last_edit_date": 1528322031, "question_id": 50729425, "link": "https://stackoverflow.com/questions/50729425/estimate-weighed-average-for-rollinggroupby", "title": "Estimate weighed average for RollingGroupby", "body": "<p>I want to calculate a weighted average for RollingGroupby object. Unfortunately, I got an error:</p>\n\n<pre><code>only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>np.random.seed(9999)\ndf = pd.DataFrame(np.random.random(20).reshape(10, 2), columns = ['val1', 'val2'])\ndf['id'] = np.repeat([1, 2], 5)\ndf['wt'] = [1, 2] * 5\n\ndef weighted_average(data, value, weight):\n    return np.average(data[value], weights = data[weight], axis = 0)\n\ndfwavg = df.groupby('id')[['val1', 'wt']]\\\n        .rolling(window=2, min_periods=1)\\\n        .apply(weighted_average, 'wt')\n</code></pre>\n\n<p>Does anybody know what's the problem? Thanks.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Would be great if a solution uses the existing structure (with group.by.rolling.apply). In other words, the best option could be to nest a modified function in <code>apply()</code>.</p>\n"}, {"tags": ["python", "bokeh"], "comments": [{"owner": {"reputation": 79, "user_id": 5382934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3MFTi.jpg?s=128&g=1", "display_name": "Gerardo Gonzalez", "link": "https://stackoverflow.com/users/5382934/gerardo-gonzalez"}, "edited": false, "score": 0, "creation_date": 1550860959, "post_id": 50729418, "comment_id": 96441493, "body": "You cant try the following instruction :   fig.xaxis.formatter = PrintfTickFormatter(format=&#39;%0.0f %%&#39;)"}], "answers": [{"tags": [], "owner": {"reputation": 697, "user_id": 1041958, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/k80sC.jpg?s=128&g=1", "display_name": "StormsEdge", "link": "https://stackoverflow.com/users/1041958/stormsedge"}, "is_accepted": true, "score": 7, "last_activity_date": 1528319106, "creation_date": 1528319106, "answer_id": 50729588, "question_id": 50729418, "link": "https://stackoverflow.com/questions/50729418/formatting-bokeh-x-axis-from-decimal-to-percentage-with-printftickformatter/50729588#50729588", "title": "Formatting Bokeh x axis from decimal to percentage with PrintfTickFormatter", "body": "<p>I was able to solve the issue via the below:</p>\n\n<pre><code>from bokeh.models import NumeralTickFormatter\n\nfig.xaxis.formatter = NumeralTickFormatter(format='0 %')\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 1041958, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/k80sC.jpg?s=128&g=1", "display_name": "StormsEdge", "link": "https://stackoverflow.com/users/1041958/stormsedge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2525, "favorite_count": 0, "accepted_answer_id": 50729588, "answer_count": 1, "score": 1, "last_activity_date": 1528319106, "creation_date": 1528318342, "question_id": 50729418, "link": "https://stackoverflow.com/questions/50729418/formatting-bokeh-x-axis-from-decimal-to-percentage-with-printftickformatter", "title": "Formatting Bokeh x axis from decimal to percentage with PrintfTickFormatter", "body": "<p>I am new to Bokeh and am currently trying to change the x axis of a histogram from decimal based to percentage based.  I have been trying to use <code>PrintfTickFormatter</code> but I am apparently missing something.  When I try both of the below line of code I receive no output.  I tried tweaking the format declaration and I did achieve a percentage, but it was translating the decimals as &lt; 1% or rounding to 1%.  Any thoughts on how to fix?  I have seen a few different posts on SO, but none seem to directly apply</p>\n\n<pre><code>fig.xaxis.formatter = PrintfTickFormatter(format='0 %')\n</code></pre>\n"}, {"tags": ["python", "petl"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1528318443, "post_id": 50729365, "comment_id": 88466626, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6282042/assignment-inside-lambda-expression-in-python\">Assignment inside lambda expression in Python</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "edited": false, "score": 0, "creation_date": 1528320001, "post_id": 50729489, "comment_id": 88467308, "body": "Wow, that makes a lot of sense. I&#39;m just learning Python and don&#39;t have a grasp of how lambda expressions really work. Thanks for explaining. Btw, the function I&#39;m trying to write will actually return a table with the populated Price for that date."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1528320114, "post_id": 50729489, "comment_id": 88467347, "body": "@user7496931 When you&#39;re just learning, the simplest thing to do is not use <code>lambda</code> at all, just use <code>def</code>. When you find yourself getting annoyed that &quot;I wish I could just put this 15-character function definition inline&quot; or &quot;I wish I didn&#39;t have to come up with a name for this throwaway callback function&quot;, that&#39;s when <code>lambda</code> comes to the rescue. But by that point, you should understand Python functions, expressions, etc. well enough that <code>lambda</code> will be obvious instead of tricky."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 1, "last_activity_date": 1528318683, "creation_date": 1528318683, "answer_id": 50729489, "question_id": 50729365, "link": "https://stackoverflow.com/questions/50729365/whats-wrong-with-this-lambda-function-using-petl/50729489#50729489", "title": "What&#39;s wrong with this lambda function using petl?", "body": "<p>There are three major problems with your function.</p>\n\n<p>First, you're trying to assign a value to <code>v</code>. But assignments are statements, not expressions. You can't put statements inside expressions in Python, and <code>lambda</code> is an expression. But you can always just use <code>def</code> instead:</p>\n\n<pre><code>def func(v, row):\n    v = '100' if row['Cambridge Parser'] == '3/31/1989'\ntable = etl.convert(table, 'Price List', func, pass_row=True)\n</code></pre>\n\n<p>Second, <code>'100' if row['Cambridge Parser'] == '3/31/1989'</code> is not a valid expression in Python. <code>if</code> statements may not require <code>else</code>, but <code>if</code> expressions do. So, it would have to look more like this:</p>\n\n<pre><code>def func(v, row):\n    v = '100' if row['Cambridge Parser'] == '3/31/1989' else v\ntable = etl.convert(table, 'Price List', func, pass_row=True)\n</code></pre>\n\n<p>\u2026 or:</p>\n\n<pre><code>def func(v, row):\n    if row['Cambridge Parser'] == '3/31/1989':\n        v = '100'\ntable = etl.convert(table, 'Price List', func, pass_row=True)\n</code></pre>\n\n<p>Finally, even after you fix that, assigning a value to <code>v</code> doesn't do any good anyway. <code>v</code> is just the name of the parameter to your function. Rebinding that name to some other value is pointless; once you exit the function, that parameter no longer exists. In particular, it won't have any effect on whatever value was passed into the function.</p>\n\n<p>If you look at the example function, it doesn't try to assign anything, it just returns the new value. Which is what you want to do here. So, either:</p>\n\n<pre><code>def func(v, row):\n    if row['Cambridge Parser'] == '3/31/1989':\n        return '100'\n    else:\n        return v\ntable = etl.convert(table, 'Price List', func, pass_row=True)\n</code></pre>\n\n<p>\u2026 or, if you want to make it as concise as possible even if that means you don't understand your own code:</p>\n\n<pre><code>table = etl.convert(table, 'Price List', lambda v, row: '100' if row['Cambridge Parser'] == '3/31/1989' else v, pass_row=True)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 50729489, "answer_count": 1, "score": 0, "last_activity_date": 1528318683, "creation_date": 1528318134, "question_id": 50729365, "link": "https://stackoverflow.com/questions/50729365/whats-wrong-with-this-lambda-function-using-petl", "title": "What&#39;s wrong with this lambda function using petl?", "body": "<p>I have the following table:</p>\n\n<pre><code>+----------------+---------+------------+\n| Cambridge Data | IRR     | Price List |\n+================+=========+============+\n| '3/31/1989'    | '4.37%' |            |\n+----------------+---------+------------+\n| '4/30/1989'    | '5.35%' |            |\n+----------------+---------+------------+\n</code></pre>\n\n<p>I want to convert the table and populate a Price List of <code>100</code> when the date in Cambridge Data is '4/30/1989'. I have the following function using petl:</p>\n\n<pre><code># Add an initial price to base calculations for Price List\ndef insert_initial_price(self, table):\n    table = etl.convert(table, 'Price List', lambda v, row: v = '100' if row['Cambridge Parser'] == '3/31/1989', pass_row=True)\n    return table\n</code></pre>\n\n<p>Here's an example using a similar method from petl's documentation:</p>\n\n<pre><code>&gt;&gt;&gt; # conversion can access other values from the same row\n... table12 = etl.convert(table1, 'baz',\n...                       lambda v, row: v * float(row.bar),\n...                       pass_row=True)\n&gt;&gt;&gt; table12\n+-----+-------+--------------------+\n| foo | bar   | baz                |\n+=====+=======+====================+\n| 'A' | '2.4' | 28.799999999999997 |\n+-----+-------+--------------------+\n| 'B' | '5.7' |              193.8 |\n+-----+-------+--------------------+\n| 'C' | '1.2' |               67.2 |\n+-----+-------+--------------------+\n</code></pre>\n"}, {"tags": ["python", "twitter-bootstrap", "flask", "bokeh"], "comments": [{"owner": {"reputation": 477, "user_id": 3365529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1ceB.jpg?s=128&g=1", "display_name": "hernvnc", "link": "https://stackoverflow.com/users/3365529/hernvnc"}, "edited": false, "score": 0, "creation_date": 1528318544, "post_id": 50729353, "comment_id": 88466671, "body": "Shouldn&#39;t make_plot() return one single value since you are appending the output of it to the plots array with plots.append()?"}], "answers": [{"tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": false, "score": 1, "last_activity_date": 1528425901, "last_edit_date": 1528425901, "creation_date": 1528424436, "answer_id": 50752466, "question_id": 50729353, "link": "https://stackoverflow.com/questions/50729353/flask-templating-causing-duplicate-html/50752466#50752466", "title": "Flask Templating Causing Duplicate HTML", "body": "<p>Your template loop is not right. A <code>plot</code> in your <code>plots</code> list looks like: <code>(script, div)</code>. You loop over all the <code>plot</code> in <code>plots</code>, but then you also do this:</p>\n\n<pre><code>{% for part in plot %}\n&lt;div class=\"container-fluid\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col\" id=\"graphblock\"&gt;\n      {{part | safe}}\n    &lt;/div&gt;\n    &lt;div class=\"col\" id=\"graphblock\"&gt;\n      {{part | safe}}\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n{% endfor %}\n</code></pre>\n\n<p>The first iteration over a part includes the script twice, then the next iteration includes the div twice. This causes things to be duplicated. </p>\n"}], "owner": {"reputation": 161, "user_id": 8891334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-KNc9N6Y6xpE/AAAAAAAAAAI/AAAAAAAAADU/hCY5gKFw4M4/photo.jpg?sz=128", "display_name": "user8891334", "link": "https://stackoverflow.com/users/8891334/user8891334"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574473117, "creation_date": 1528318076, "last_edit_date": 1574473117, "question_id": 50729353, "link": "https://stackoverflow.com/questions/50729353/flask-templating-causing-duplicate-html", "title": "Flask Templating Causing Duplicate HTML", "body": "<p>For some reason when I use child templating with blocks in Flask, my HTML content is being rendered as duplicates. I am using Bootstrap and Bokeh to make graph visualizations. Each of the divs in my Dashboard.html child template are being rendered with duplicates. Does anyone know why this may be the case? Did I set up the templating incorrectly? </p>\n\n<p>Below is my layout.html file: </p>\n\n<p><strong>Layout.html</strong></p>\n\n<pre><code>    &lt;!doctype html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;link type=\"text/css\" href=\"index.css\" /&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\" integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"http://cdn.bokeh.org/bokeh/release/bokeh-0.12.16.min.css\" type=\"text/css\" /&gt;\n  &lt;script type=\"text/javascript\" src=\"http://cdn.bokeh.org/bokeh/release/bokeh-0.12.16.min.js\"&gt;&lt;/script&gt;\n    &lt;title&gt;Embed Demo&lt;/title&gt;\n\n  &lt;/head&gt;\n  &lt;body&gt;\n\n\n{% block body %}{% endblock %}\n\n\n&lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js\" integrity=\"sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This is my child template file: </p>\n\n<p><strong>Dashboard.html</strong></p>\n\n<pre><code> {% extends \"layout.html\" %}\n{% block body %}\n    {% for plot in plots %}\n        {% for part in plot %}\n        &lt;div class=\"container-fluid\"&gt;\n          &lt;div class=\"row\"&gt;\n            &lt;div class=\"col\" id=\"graphblock\"&gt;\n                  {{part | safe}}\n            &lt;/div&gt;\n            &lt;div class=\"col\" id=\"graphblock\"&gt;\n                   {{part | safe}}\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        {% endfor %}\n    {% endfor %}\n{% endblock %}\n</code></pre>\n\n<p>Here is my Flask server: </p>\n\n<p><strong>Server.py</strong></p>\n\n<pre><code>import random\nfrom flask import Flask, render_template\nfrom bokeh.plotting import figure\nfrom bokeh.embed import components\n\napp = Flask(__name__, static_folder='../static/dist', template_folder='../static/client')\n\n@app.route('/dashboard/')\ndef show_dashboard():\n    plots = []\n    plots.append(make_plot())\n\n    return render_template('dashboard.html', plots=plots)\n\ndef make_plot():\n    plot = figure(plot_height=300, sizing_mode='scale_width')\n\n    x = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n    y = [2**v for v in x]\n\n    plot.line(x, y, line_width=4)\n\n    script, div = components(plot)\n    return script, div\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 4531757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ccfd8fa814dd495cc7c1615693e0b253?s=128&d=identicon&r=PG&f=1", "display_name": "Murali", "link": "https://stackoverflow.com/users/4531757/murali"}, "edited": false, "score": 0, "creation_date": 1528324193, "post_id": 50729470, "comment_id": 88468656, "body": "Thank you. I am using MS-SQL server and given logic did work perfectly."}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 0, "last_activity_date": 1528318602, "creation_date": 1528318602, "answer_id": 50729470, "question_id": 50729347, "link": "https://stackoverflow.com/questions/50729347/python-pd-read-sql-where-cause-parameters/50729470#50729470", "title": "Python pd.read_sql where cause parameters", "body": "<p>Use a parameterized query:</p>\n\n<pre><code>item2 = pd.read_sql(\"\"\"\nSELECT * from [dbo].[ITEM]\nwhere item_age3 IN ({})\n\"\"\".format(','.join('?'*len(df1.age3))), conn, \nparams=list(df1.age3))\n</code></pre>\n\n<p>depending on the database backend this syntax may use <code>'%s'</code> or <code>%(name)s</code> instead of <code>'?'</code>. See PEP249 <code>paramstyle</code> for more information.</p>\n"}], "owner": {"reputation": 449, "user_id": 4531757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ccfd8fa814dd495cc7c1615693e0b253?s=128&d=identicon&r=PG&f=1", "display_name": "Murali", "link": "https://stackoverflow.com/users/4531757/murali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 50729470, "answer_count": 1, "score": 0, "last_activity_date": 1528318602, "creation_date": 1528318063, "question_id": 50729347, "link": "https://stackoverflow.com/questions/50729347/python-pd-read-sql-where-cause-parameters", "title": "Python pd.read_sql where cause parameters", "body": "<p><strong>Use case:</strong>\nWe have nested queries and our tables have 10 to 20 million rows. Here our intention is to reduce the query CPU time by smart filter</p>\n\n<p><strong><em>I like to filter my columns in pd.read_sql by other data frame column name. Is that possible?</em></strong></p>\n\n<p>Step 1: df1 data frame age1 and age3 are my future filter columns for pd.read_sql</p>\n\n<pre><code>raw_data1 = {'age1': [23,45,21],'age2': [10,20,50], 'age3':['forty','fortyone','fortyfour']}\n    df1 = pd.DataFrame(raw_data1, columns = ['age1','age2','age3'])\n    df1\n</code></pre>\n\n<p>Step2: I like take age1 from above df1 dataframe want to use in below pd.read_sql like below to get item1 dataframe</p>\n\n<pre><code>item1 = pd.read_sql(\"\"\"\nSELECT * from [dbo].[ITEM]\nwhere item_age1 = df1.age1\n\"\"\", conn)\n</code></pre>\n\n<p>Step3: I like to take age3 from above df1 dataframe want to use in below pd.read_sql like below to get item2 dataframe</p>\n\n<pre><code>item2 = pd.read_sql(\"\"\"\nSELECT * from [dbo].[ITEM]\nwhere item_age3 = df1.age3\n\"\"\", conn)\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark", "multiprocessing"], "comments": [{"owner": {"reputation": 29493, "user_id": 3269809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRvqq.jpg?s=128&g=1", "display_name": "Alper t. Turker", "link": "https://stackoverflow.com/users/3269809/alper-t-turker"}, "edited": false, "score": 1, "creation_date": 1528318950, "post_id": 50729345, "comment_id": 88466867, "body": "You use <code>local</code> mode so, &quot;master&quot; is the only node you have. What else do you expect here? If you have distributed cluster, you should point connect to it (not use <code>local[*]</code>). Also what is <code>renameColumns</code> and <code>validate</code> suppose to do?"}, {"owner": {"reputation": 6641, "user_id": 2697, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/17404e0c1869fec55dd69f7c033de12e?s=128&d=identicon&r=PG", "display_name": "Iker Jimenez", "link": "https://stackoverflow.com/users/2697/iker-jimenez"}, "edited": false, "score": 2, "creation_date": 1613413971, "post_id": 50729345, "comment_id": 117062646, "body": "Shouldn&#39;t the last line be <code>p.map(processTest, keys)</code>?"}, {"owner": {"reputation": 474, "user_id": 11618586, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-na5mlvpBiKM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcvd0lfEqlQeIfzkzkANFoQHVXK-A/mo/photo.jpg?sz=128", "display_name": "thentangler", "link": "https://stackoverflow.com/users/11618586/thentangler"}, "reply_to_user": {"reputation": 6641, "user_id": 2697, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/17404e0c1869fec55dd69f7c033de12e?s=128&d=identicon&r=PG", "display_name": "Iker Jimenez", "link": "https://stackoverflow.com/users/2697/iker-jimenez"}, "edited": false, "score": 2, "creation_date": 1615259809, "post_id": 50729345, "comment_id": 117630046, "body": "@IkerJimenez I was thinking the same too"}], "answers": [{"tags": [], "owner": {"reputation": 1357, "user_id": 7049567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f25d5d4bcb95c6881bd4d20627b7c1b0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Bendevis", "link": "https://stackoverflow.com/users/7049567/paul-bendevis"}, "is_accepted": true, "score": 1, "last_activity_date": 1528376151, "creation_date": 1528376151, "answer_id": 50741797, "question_id": 50729345, "link": "https://stackoverflow.com/questions/50729345/how-to-distribute-multiprocessing-pool-to-spark-workers/50741797#50741797", "title": "How to Distribute Multiprocessing Pool to Spark Workers", "body": "<p>In a closer read of the SparkSession.Builder API Docs, the string passed to the <code>SparkSession.builder.master('xxxx')</code> is the host in the connection to the master node via: spark://xxxx:7077. \nLike user8371915 said, I needed to not be on a standalone local master. Instead this fix worked like a charm:</p>\n\n<pre><code>SparkSession.builder.master('yarn')\n</code></pre>\n\n<p><a href=\"https://spark.apache.org/docs/2.3.0/api/java/org/apache/spark/sql/SparkSession.Builder.html#master-java.lang.String-\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/2.3.0/api/java/org/apache/spark/sql/SparkSession.Builder.html#master-java.lang.String-</a></p>\n"}], "owner": {"reputation": 1357, "user_id": 7049567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f25d5d4bcb95c6881bd4d20627b7c1b0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Bendevis", "link": "https://stackoverflow.com/users/7049567/paul-bendevis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2726, "favorite_count": 0, "accepted_answer_id": 50741797, "answer_count": 1, "score": 4, "last_activity_date": 1615307943, "creation_date": 1528318056, "last_edit_date": 1615307943, "question_id": 50729345, "link": "https://stackoverflow.com/questions/50729345/how-to-distribute-multiprocessing-pool-to-spark-workers", "title": "How to Distribute Multiprocessing Pool to Spark Workers", "body": "<p>I am trying to use multiprocessing to read 100 csv files in parallel (and subsequently process them separately in parallel). Here is my code running in Jupyter hosted on my EMR master node in AWS. (Eventually it will be 100k csv files hence the need for distributed reading).</p>\n<pre><code>import findspark\nimport boto3\nfrom multiprocessing.pool import ThreadPool\nimport logging\nimport sys\nfindspark.init()\nfrom pyspark import SparkContext, SparkConf, sql\nconf = SparkConf().setMaster(&quot;local[*]&quot;)\nconf.set('spark.scheduler.mode', 'FAIR')\nsc = SparkContext.getOrCreate(conf)\nspark = sql.SparkSession.builder.master(&quot;local[*]&quot;).appName(&quot;ETL&quot;).getOrCreate()\ns3 = boto3.resource(...)\nbucket = ''\nbucketObj = s3.Bucket(bucket)\nnumNodes = 64\ndef processTest(key):\n    logger.info(key + ' ---- Start\\n')\n    fLog = spark.read.option(&quot;header&quot;, &quot;true&quot;) \\\n                         .option(&quot;inferSchema&quot;, &quot;true&quot;) \\\n                         .csv(buildS3Path(bucket) + key)\n    logger.info(key + ' ---- Finish Read\\n')\n    fLog = renameColumns(NAME_MAP, fLog)\n    logger.info(key + ' ---- Finish Rename\\n')\n    (landLog, flags) = validate(fLog)\n    logger.info(key + ' ---- Finish Validation\\n')\n\nfiles = list(bucketObj.objects.filter(Prefix=subfolder))\nkeys = list(map(lambda obj: obj.key, files))\nkeys = keys\n# files = s3C.list_objects(Bucket=bucket, Prefix=subfolder)['Contents']\np = ThreadPool(numNodes)\np.map(processTest, keys)\n</code></pre>\n<p>It runs fine except that it only uses the master node.\n<a href=\"https://i.stack.imgur.com/VNFO3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VNFO3.png\" alt=\"The blue line is my master node.\" /></a></p>\n<p>The blue line is the CPU usage on my master node.\nAll the logs show that I'm running on one machine:</p>\n<pre><code> INFO:pyspark:172.31.29.33\n</code></pre>\n<p>How do I make spark distribute the pool to the workers?</p>\n"}, {"tags": ["python", "list", "dictionary", "key"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528318165, "post_id": 50729340, "comment_id": 88466498, "body": "I don&#39;t understand what order you want there. <code>list1</code> has Europe, America, Asia, Oceania, Africa; <code>list2</code> and <code>list3</code> has America, Europe, Asia, Oceania, Africa. So it seems like you&#39;re trying to get the same meaningless arbitrary order from the dict, but then swap the first two values, which I can&#39;t imagine why that would be useful."}, {"owner": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "edited": false, "score": 0, "creation_date": 1528318190, "post_id": 50729340, "comment_id": 88466510, "body": "The ordering of your examples aren&#39;t consistent - what order are you trying to maintain?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528318317, "post_id": 50729340, "comment_id": 88466567, "body": "Anything reasonable that you might is pretty easy to do. For example, if you want the values in sorted-key order (<code>Africa, America, Asia, Europe, Oceania</code> for all three dicts), that&#39;s just <code>list1 = [dict1[key] for key in sorted(dict1)]</code>? But you have to first know what order you want, and be able to express it in words, before you (or anyone else) can write the code for it."}, {"owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1528318381, "post_id": 50729340, "comment_id": 88466593, "body": "Oh sorry about being unclear about that, the dicts can be ordered any way they want. Edited it to be more clear."}], "answers": [{"tags": [], "owner": {"reputation": 633, "user_id": 9129474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e0ac29fe165b7dc500ba09ca6488b3?s=128&d=identicon&r=PG&f=1", "display_name": "Biarys", "link": "https://stackoverflow.com/users/9129474/biarys"}, "is_accepted": false, "score": 1, "last_activity_date": 1528318331, "creation_date": 1528318331, "answer_id": 50729416, "question_id": 50729340, "link": "https://stackoverflow.com/questions/50729340/separate-dicts-into-three-lists-preserving-order-based-on-key/50729416#50729416", "title": "Separate dicts into three lists preserving order based on key", "body": "<p>There's a built in method for dictionaries in Python</p>\n\n<pre><code>list1 = dict1.values()\n</code></pre>\n\n<p>etc...</p>\n\n<p>results in</p>\n\n<pre><code>dict_values([200, 344, 204, 38, 14])\n</code></pre>\n\n<p>Also, you can use list comprehensions</p>\n\n<pre><code>list1 = [x for y,x in dict1.items()]\n</code></pre>\n\n<p>results in </p>\n\n<pre><code>[200, 344, 204, 38, 14]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1528318798, "post_id": 50729500, "comment_id": 88466782, "body": "This worked! Thanks, but I found a better way thanks to another user."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1528318881, "post_id": 50729500, "comment_id": 88466826, "body": "@PEREZje does the other answer actually preserve order? It should if the dicts were generated the same way using Python3.6+ but it will not in any other case."}, {"owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1528318919, "post_id": 50729500, "comment_id": 88466845, "body": "I put the solution as an answer to this post, for my purposes it preserves order. Your method is better if I want a distinct ordering."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1528319073, "post_id": 50729500, "comment_id": 88466918, "body": "@PEREZje I&#39;m unsure to understand the order you were looking for, but if abarnet&#39;s answer worked, then great"}, {"owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1528319422, "post_id": 50729500, "comment_id": 88467060, "body": "I wasn&#39;t really looking for a specific order, merely that the three lists were ordered the same way. @abarnert answer helped for just letting  python &quot;choose&quot; the order, your way is better if I want to choose my own order."}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": false, "score": 1, "last_activity_date": 1528318723, "creation_date": 1528318723, "answer_id": 50729500, "question_id": 50729340, "link": "https://stackoverflow.com/questions/50729340/separate-dicts-into-three-lists-preserving-order-based-on-key/50729500#50729500", "title": "Separate dicts into three lists preserving order based on key", "body": "<p>If the order of the keys is arbitrary, then you need to hardcode it in some iterable. You can then use a list comprehension to get values from keys in the desired order.</p>\n\n<pre><code>d1 = {'America': 200, 'Europe': 344, 'Asia': 204, 'Oceania': 38, 'Africa': 14}\nd2 = {'Europe': 394, 'America': 225, 'Asia': 293, 'Oceania': 43, 'Africa': 26}\nd3 = {'Europe': 420, 'America': 250, 'Asia': 363, 'Oceania': 43, 'Africa': 27}\n\norder = ['America', 'Europe', 'Asia', 'Oceania', 'Africa']\n\nlist1 = [d1[k] for k in order] # [200, 344, 204, 38, 14]\nlist2 = [d2[k] for k in order] # [225, 394, 293, 43, 26]\nlist3 = [d3[k] for k in order] # [250, 420, 363, 43, 27]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "is_accepted": false, "score": 0, "last_activity_date": 1528318863, "creation_date": 1528318863, "answer_id": 50729529, "question_id": 50729340, "link": "https://stackoverflow.com/questions/50729340/separate-dicts-into-three-lists-preserving-order-based-on-key/50729529#50729529", "title": "Separate dicts into three lists preserving order based on key", "body": "<p>So I found the best solution thanks to @abarnert:</p>\n\n<pre><code>list1 = [count_2016[key] for key in sorted(count_2016)]\nlist2 = [count_2017[key] for key in sorted(count_2017)]\nlist3 = [count_2018[key] for key in sorted(count_2018)]\n</code></pre>\n\n<p>This preserves the same order for every list.</p>\n"}], "owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1528318863, "creation_date": 1528318019, "last_edit_date": 1528318421, "question_id": 50729340, "link": "https://stackoverflow.com/questions/50729340/separate-dicts-into-three-lists-preserving-order-based-on-key", "title": "Separate dicts into three lists preserving order based on key", "body": "<p>Okay maybe my title isn't the best but this is basically my problem:\nI have three dicts that look like this:</p>\n\n<pre><code>dict1 = {'America': 200, 'Europe': 344, 'Asia': 204, 'Oceania': 38, 'Africa': 14}\ndict2 = {'Europe': 394, 'America': 225, 'Asia': 293, 'Oceania': 43, 'Africa': 26}\ndict3 = {'Europe': 420, 'America': 250, 'Asia': 363, 'Oceania': 43, 'Africa': 27}\n</code></pre>\n\n<p>What I would like to do is this, split the dictionaries into three lists that is \"split\" properly based on their key values, so like this:</p>\n\n<pre><code>list1 = [200, 344, 204, 38, 14]\nlist2 = [225, 394, 293, 43, 26]\nlist3 = [250, 420, 363, 43, 27]\n</code></pre>\n\n<p>EDIT: The desired order = ['America', 'Europe', 'Asia', 'Oceania', 'Africa']</p>\n\n<p>Is this easily possible? I have tried a bunch of for-loops but can't preserve order properly.</p>\n"}, {"tags": ["python", "sql", "pandas"], "comments": [{"owner": {"reputation": 633, "user_id": 9129474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e0ac29fe165b7dc500ba09ca6488b3?s=128&d=identicon&r=PG&f=1", "display_name": "Biarys", "link": "https://stackoverflow.com/users/9129474/biarys"}, "edited": false, "score": 0, "creation_date": 1528318775, "post_id": 50729327, "comment_id": 88466770, "body": "I cant fully get what you are trying to do? Could you clarify it a bit more and perhaps show some of your python code?"}, {"owner": {"reputation": 71, "user_id": 2469349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fccb4bff1a5526cd7d90174b11752ced?s=128&d=identicon&r=PG", "display_name": "nnvutisa", "link": "https://stackoverflow.com/users/2469349/nnvutisa"}, "edited": false, "score": 0, "creation_date": 1528319836, "post_id": 50729327, "comment_id": 88467243, "body": "Can you give an example of the input? From your description, I would try groupby person, sort by date, and then count."}], "owner": {"reputation": 11, "user_id": 9905546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93df9ea7d44feb7224c695638f351bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Jimbo83", "link": "https://stackoverflow.com/users/9905546/jimbo83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528321622, "creation_date": 1528317974, "last_edit_date": 1528321622, "question_id": 50729327, "link": "https://stackoverflow.com/questions/50729327/pandas-countif-with-condition", "title": "Pandas countif with condition", "body": "<p>I have a data set in pandas with a unique event key, a person key, a date, and other various columns. I am trying to add a new column that would give the count of events for the person prior to the date on that row. I keep searching but I am only finding results for set criteria (i.e. df ['x']=df [df ['date']&lt;'2018-06-01'] where the date does not dybamically change with each row) or for a .apply (function) method which takes a long time.</p>\n\n<p>I am thinking about putting the df into an sqlite db and then joining the table to itself and then a count distinct case statement. Example below. However, there are additional manipulations I need to do subsequently and I assume there has to be a quicker way to do this in python. Any suggestions?</p>\n\n<pre><code>Sample data in df- dates repeat and not in order. Multiple people can be on one date and a person can have multiple events on a single date.\n[Event, person, date]\n[1,1,2018-01-03]\n[2,1,2018-01-01]\n[3,1,2018-01-02]\n[4,2,2018-01-04]\n[5,2,2018-01-05]\n\nDesired output\n\n[Event, person, date, count of evnt]\n[1,1,2018-01-03,    2]\n[2,1,2018-01-01,    0]\n[3,1,2018-01-02,    1]\n[4,2,2018-01-04,    0]\n[5,2,2018-01-05,    1]\n</code></pre>\n\n<p>Sorry for the format, I am on my phone.</p>\n\n<p>Example:</p>\n\n<p>Say the fields are evebt, person, date I would</p>\n\n<pre><code>Select event, \n             person, \n             date,  \n             Count (distinct (case when ((t2.date less than\nt1.date) And (t2.person=t1.person))\n Then t2.event else null end)) event_count\n\nFrom t1\n\nLeft outer join t1 as t2 on (t2.event=t1.event)\n\nGroup by event, person, date.\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "selenium-webdriver", "web-scraping"], "comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528347968, "post_id": 50729310, "comment_id": 88474308, "body": "What is the current output? You can successfully switch to frame, but getting <code>NoSuchElementException</code> on <code>ilink</code> definition?"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528350970, "post_id": 50729310, "comment_id": 88475464, "body": "In your answer you&#39;re using search by <code>@id</code> to find iframe, while in your question - search by tag name... In case there are more than one <code>iframe</code> on page you might switch to wrong <code>iframe</code> which doesn&#39;t contain required element"}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528351016, "post_id": 50729310, "comment_id": 88475479, "body": "Sir, i tried with both of them."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528351139, "post_id": 50729310, "comment_id": 88475519, "body": "It&#39;s hard to tell what&#39;s wrong without seeing the page source. IMHO your solution is not the best way to deal with iframes... :)"}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528351220, "post_id": 50729310, "comment_id": 88475551, "body": "This is not actually a solution, just a workaround."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528351820, "post_id": 50729310, "comment_id": 88475787, "body": "You said you got <code>TimeoutException</code>. You mean you used explicit wait to find link inside an iframe? It&#39;s not reflected in your question"}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528352469, "post_id": 50729310, "comment_id": 88476110, "body": "This is originally how i tried. As I keep trying in different ways so in question I showed one of such. See the edit sir."}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528353359, "post_id": 50729310, "comment_id": 88476542, "body": "Check out the edit sir. I&#39;ve included source code."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528357059, "post_id": 50729310, "comment_id": 88478637, "body": "I&#39;m afraid I see no elements with class name <code>job-company-name</code>"}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528360706, "post_id": 50729310, "comment_id": 88480707, "body": "If this portion help you solve this sir. Please take a look at <a href=\"https://www.dropbox.com/s/pmm84836hdw3wj2/Untitled1.jpg?dl=0\" rel=\"nofollow noreferrer\">this image</a>. I tried to wrap the information to fit the important portion within the image."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1528361507, "post_id": 50729310, "comment_id": 88481234, "body": "The same problem - I see no elements on page with class name <code>job-company-name</code> and no links, so it&#39;s hard to tell what&#39;s wrong with the code"}], "answers": [{"tags": [], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "is_accepted": false, "score": 0, "last_activity_date": 1528350762, "creation_date": 1528350762, "answer_id": 50733813, "question_id": 50729310, "link": "https://stackoverflow.com/questions/50729310/trouble-fetching-a-link-from-a-dynamic-webpage/50733813#50733813", "title": "Trouble fetching a link from a dynamic webpage", "body": "<p>It seems I've found out a solution to deal with the problem. I'm ready to take out my answer If any better solution comes along:</p>\n\n<pre><code>links = [urljoin(link,items.find_element_by_css_selector(\".user-name\").get_attribute(\"href\")) for items in wait.until(EC.presence_of_all_elements_located((By.CSS_SELECTOR, \".contact\")))]\nfor link in links:\n    driver.get(link)\n    name = wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, \"h2 span\"))).text\n    ilink = driver.find_element_by_css_selector(\"#tab-content\").get_attribute(\"src\")\n    driver.get(ilink)   #this is what I did to get around that\n    try:\n        link = driver.find_element_by_css_selector(\".job-company-name a\").text\n    except Exception: link = \"\"\n    print(name,link)\n</code></pre>\n\n<p>Instead of switching to iframe I just parsed the link within iframe and made use of it. This is not the solution I expected but it works.</p>\n"}], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528353243, "creation_date": 1528317927, "last_edit_date": 1528353243, "question_id": 50729310, "link": "https://stackoverflow.com/questions/50729310/trouble-fetching-a-link-from-a-dynamic-webpage", "title": "Trouble fetching a link from a dynamic webpage", "body": "<p>I've written a script in python in combination with selenium to parse a certain link from a webpage. The link is within an <code>iframe</code>. I've tried to switch to it but can't read the content from it to fetch that specific link I'm after.</p>\n\n<p>Here is how to get there:</p>\n\n<ol>\n<li><p>There is a link to log-in which is free.</p></li>\n<li><p>After logging in, the website automatically leads to the first page of the desired content.</p></li>\n<li><p>There are few names (members) there, which have links connected to each of their profile.</p></li>\n<li><p>After going in that profile page there is a link to their present company (located under professional experience) which is what I wish to parse.</p></li>\n</ol>\n\n<p>The desired link (under proffessional experience) within the first profile looks <a href=\"https://www.dropbox.com/s/q4zvpt09pus04na/Untitled.jpg?dl=0\" rel=\"nofollow noreferrer\">like this</a>:</p>\n\n<p><a href=\"https://login.xing.com/continue?dest_url=https%3A%2F%2Fwww.xing.com%2Fcommunities%2Fgroups%2Ffuhrpark-update-68fe-1076244%2Fmember_states%3Fsorting%3Dalphabetical&amp;force_dest=1\" rel=\"nofollow noreferrer\">This is the log in link</a></p>\n\n<p>This is the script I've tried so far with:</p>\n\n<pre><code>from selenium import webdriver\nfrom urllib.parse import urljoin\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\nlink = \"https://www.xing.com\"\n\ndriver = webdriver.Chrome()\ndriver.get(\"replace with above link\")\nwait = WebDriverWait(driver, 10)\n\nwait.until(EC.presence_of_element_located((By.CSS_SELECTOR, \"#login_form_username\"))).send_keys(\"user\")\nwait.until(EC.presence_of_element_located((By.CSS_SELECTOR, \"#login_form_password\"))).send_keys(\"pass\",Keys.RETURN)\n\nlinks = [urljoin(link,items.find_element_by_css_selector(\".user-name\").get_attribute(\"href\")) for items in wait.until(EC.presence_of_all_elements_located((By.CSS_SELECTOR, \".contact\")))]\nfor link in links:\n    driver.get(link)\n    name = wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, \"h2 span\"))).text\n    wait.until(EC.frame_to_be_available_and_switch_to_it(driver.find_element_by_css_selector(\"#tab-content\")))\n    #I get timeout exception in the following line\n    link = wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, \".job-company-name a\"))).text\n    print(name,link)\n</code></pre>\n\n<p>I don't know if this is helpful. Anyaways, <a href=\"https://www.dropbox.com/s/pl69yxtl6dzohp0/source%20code.txt?dl=0\" rel=\"nofollow noreferrer\">link to the source</a></p>\n"}, {"tags": ["python", "recovery"], "comments": [{"owner": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1528317895, "post_id": 50729289, "comment_id": 88466394, "body": "You didn&#39;t press <code>CTRL + S</code> even once while writing your whole program? And it depends on which IDE you have. WingIDE has an autosave."}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 4, "creation_date": 1528317926, "post_id": 50729289, "comment_id": 88466402, "body": "This is an issue with whatever editor you were using, not Python."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9047306"}, "edited": false, "score": 0, "creation_date": 1528317959, "post_id": 50729289, "comment_id": 88466413, "body": "I saved it constantly. My computer shut down while I was editing, though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9047306"}, "edited": false, "score": 0, "creation_date": 1528317994, "post_id": 50729289, "comment_id": 88466430, "body": "I was typing the code right into IDLE."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9878628, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_d0HASMZuJM/AAAAAAAAAAI/AAAAAAAAABc/d_foNYFaoKA/photo.jpg?sz=128", "display_name": "Kaniel", "link": "https://stackoverflow.com/users/9878628/kaniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1528325562, "creation_date": 1528325562, "answer_id": 50730707, "question_id": 50729289, "link": "https://stackoverflow.com/questions/50729289/unexpected-computer-shutdown-while-python-file-wasnt-saved/50730707#50730707", "title": "Unexpected computer shutdown while python file wasn&#39;t saved", "body": "<p>Unless it was backed up somewhere automatically, it's gone permanently.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 5261501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d0f6084e3c7c5af216fe1633042b088?s=128&d=identicon&r=PG&f=1", "display_name": "chf2117", "link": "https://stackoverflow.com/users/5261501/chf2117"}, "is_accepted": false, "score": 1, "last_activity_date": 1528325797, "creation_date": 1528325797, "answer_id": 50730740, "question_id": 50729289, "link": "https://stackoverflow.com/questions/50729289/unexpected-computer-shutdown-while-python-file-wasnt-saved/50730740#50730740", "title": "Unexpected computer shutdown while python file wasn&#39;t saved", "body": "<p>You can look for a .swp or other backup file by typing in a terminal:</p>\n\n<pre><code>$ls -a /path/to/python/file\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9047306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528325797, "creation_date": 1528317818, "question_id": 50729289, "link": "https://stackoverflow.com/questions/50729289/unexpected-computer-shutdown-while-python-file-wasnt-saved", "title": "Unexpected computer shutdown while python file wasn&#39;t saved", "body": "<p>I was adding final touches to a python code when my computer unexpectedly shut down. When I turned it back on and opened the file, it was blank. Is it possible for me to recover the contents of that file?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1528318002, "post_id": 50729248, "comment_id": 88466442, "body": "You don&#39;t need a loop here; if you can&#39;t do this with an elementwise operation over the whole series (you can, but it may not be obvious\u2014see, e.g., <code>df.name1.str.find(&#39;-&#39;)</code>), you can at least do it with <code>apply</code>. For example, look at what <code>df.name1.apply(lambda s: &#39;-&#39; in s)</code> gives you, and then what <code>df[df.name1.apply(lambda s: &#39;-&#39; in s)]</code> gives you."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": false, "score": 0, "last_activity_date": 1528428460, "last_edit_date": 1528428460, "creation_date": 1528427222, "answer_id": 50752761, "question_id": 50729248, "link": "https://stackoverflow.com/questions/50729248/how-to-run-if-else-statement-on-a-loop-within-a-dataframe/50752761#50752761", "title": "How to run if-else statement on a loop within a dataframe", "body": "<p>Pandas is designed to let you apply operations to entire columns rather than use a for-loop like you're describing.  One method you might be looking for is <code>str.split()</code> with <code>expand=True</code>:</p>\n\n<pre><code>&gt;&gt;&gt; df.name1.str.split('-', expand=True)\n           0        1\n0     Braund     None\n1   Cummings  Johnson\n2  Heikkinen    Smith\n</code></pre>\n\n<p>Notice that names without a hyphen will be given <code>None</code> for the second element.  You could also filter down to only hyphenated last names first:</p>\n\n<pre><code>&gt;&gt;&gt; df.loc[df.name1.str.contains('-'), 'name1'].str.split('-', expand=True)\n           0        1\n1   Cummings  Johnson\n2  Heikkinen    Smith\n</code></pre>\n\n<p>To rename the columns:</p>\n\n<pre><code>df.loc[df.name1.str.contains('-'), 'name1']\\\n    .str.split('-', expand=True)\\\n    .rename(columns={0: 'name2', 1: 'name3'})\n</code></pre>\n\n<p>Lastly, if you really need to mimic exactly your example, you could use <code>ffill()</code>:</p>\n\n<pre><code>&gt;&gt;&gt; df.name1.str.split('-', expand=True).ffill(axis=1)\n           0        1\n0     Braund   Braund\n1   Cummings  Johnson\n2  Heikkinen    Smith\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 9905502, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "crlaoy", "link": "https://stackoverflow.com/users/9905502/crlaoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528428460, "creation_date": 1528317654, "last_edit_date": 1528427888, "question_id": 50729248, "link": "https://stackoverflow.com/questions/50729248/how-to-run-if-else-statement-on-a-loop-within-a-dataframe", "title": "How to run if-else statement on a loop within a dataframe", "body": "<p>I have a dataframe with a column name1, I want to run an if-else statement to break out the lastname with special character '-' and output them like name2 and name3, how do I do that?</p>\n\n<pre><code>import pandas as pd \n\nd = {\n    'name1': ['Braund', 'Cummings-Johnson', 'Heikkinen-Smith'],\n    'name2': ['Braund', 'Cummings', 'Heikkinen'],\n    'name3': ['Braund', 'Johnson', 'Smith']\n}\n\ndf = pd.DataFrame(d)\n</code></pre>\n"}, {"tags": ["python", "numpy", "tensorflow", "numpy-ndarray"], "answers": [{"tags": [], "owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "is_accepted": true, "score": 0, "last_activity_date": 1528318265, "creation_date": 1528318265, "answer_id": 50729404, "question_id": 50729241, "link": "https://stackoverflow.com/questions/50729241/create-new-tensor-based-on-indexes-from-another-tensor-and-allocate-with-its-va/50729404#50729404", "title": "Create new tensor based on indexes from another tensor and allocate with it&#39;s values", "body": "<p>You could use <a href=\"https://www.tensorflow.org/api_docs/python/tf/sparse_to_dense\" rel=\"nofollow noreferrer\"><code>tf.sparse_to_dense</code></a> for that:</p>\n\n<pre><code>tf.sparse_to_dense(tf.to_int32(t[:, :2]), [3, 3], t[:, 2])[..., None]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 4586155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nzl9F.png?s=128&g=1", "display_name": "BenBoulderite", "link": "https://stackoverflow.com/users/4586155/benboulderite"}, "is_accepted": false, "score": 0, "last_activity_date": 1528320084, "last_edit_date": 1528320084, "creation_date": 1528319347, "answer_id": 50729645, "question_id": 50729241, "link": "https://stackoverflow.com/questions/50729241/create-new-tensor-based-on-indexes-from-another-tensor-and-allocate-with-its-va/50729645#50729645", "title": "Create new tensor based on indexes from another tensor and allocate with it&#39;s values", "body": "<p>How about:</p>\n\n<pre><code>import numpy as np\n\nt = np.asarray([[0,1,1.5],[1,1,7.3],[2,0,2.3]])\n\nt1 = np.zeros([3,3,1])\nt1[t[:,0].astype(int), t[:,1].astype(int),0] = t[:,2]\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 7896823, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HqgyivjK878/AAAAAAAAAAI/AAAAAAAAA8g/HlAgksfrjcY/photo.jpg?sz=128", "display_name": "Elena Zherdeva", "link": "https://stackoverflow.com/users/7896823/elena-zherdeva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 50729404, "answer_count": 2, "score": 0, "last_activity_date": 1528320084, "creation_date": 1528317609, "question_id": 50729241, "link": "https://stackoverflow.com/questions/50729241/create-new-tensor-based-on-indexes-from-another-tensor-and-allocate-with-its-va", "title": "Create new tensor based on indexes from another tensor and allocate with it&#39;s values", "body": "<p>I have a tensor <code>t</code> looks like this <code>[[0, 1, 1.5], [1, 1, 7.3], [2, 0, 2.3]]</code> and I need to create new tensor <code>t1</code> with shape (3, 3, 1) where <code>t1[t[:, :1], t[:, 1:2]]</code>(elements from first column used as first coordinate, elements from second column as second coordinate) is allocated with elements from third column of <code>t</code>. Like this <code>t1 = [[[0.0], [1.5], [0.0]], [[0.0], [7.3], [0.0]], [[2.3], [0.0], [0.0]]]</code>. How can I do it using matrix operations in TensorFlow (or Numpy) without cycles? </p>\n"}, {"tags": ["javascript", "python", "numpy", "blender", "unreal-engine4"], "answers": [{"tags": [], "owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "is_accepted": true, "score": 0, "last_activity_date": 1528319326, "creation_date": 1528319326, "answer_id": 50729641, "question_id": 50729229, "link": "https://stackoverflow.com/questions/50729229/display-480x115x115-3-d-numpy-model-in-browser/50729641#50729641", "title": "Display 480x115x115 3-D Numpy model in browser?", "body": "<blockquote>\n  <p>What is the cheapest way to display a 480x115x115 3-D model on my\n  personal website? I've heard of Maya, Blender, Unity, and Unreal\n  Engine, but don't know which to use.</p>\n</blockquote>\n\n<p>Maya and Blender are both modeling tools only. They are not made for displaying models on web browsers. They are used to create the 3D models. </p>\n\n<p>You can do this with Unity or Unreal Engine since both exports to WebGL which you can display your sites. I would use one of these since thy are both game engines and are optimized for this. </p>\n\n<p>Another option you have is <a href=\"https://www.blend4web.com/en/\" rel=\"nofollow noreferrer\">Blend4Web</a> which is a plugin for Blender. It exports your model to be viewed in a web browser. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9905282"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 50729641, "answer_count": 1, "score": 1, "last_activity_date": 1528319326, "creation_date": 1528317588, "last_edit_date": 1592644375, "question_id": 50729229, "link": "https://stackoverflow.com/questions/50729229/display-480x115x115-3-d-numpy-model-in-browser", "title": "Display 480x115x115 3-D Numpy model in browser?", "body": "<p>What is the cheapest way to display a 480x115x115 3-D model on my personal website?  I've heard of Maya, Blender, Unity, and Unreal Engine, but don't know which to use.</p>\n<h3>Picture of the model of Benji's torso:</h3>\n<p><img src=\"https://imgur.com/gallery/i4wMLZd\" alt=\"Benji's torso\" /></p>\n<h3>My specs:</h3>\n<p>No Unity: I currently only have an Ubuntu laptop so I can't use Unity quickly.</p>\n<h2>Details about Benji's &quot;body&quot; in numpy:</h2>\n<ol>\n<li>I have 1 representation which is his body as a solid, 3-D Numpy array of arrays of arrays.</li>\n<li>I have another representation which is his body's shell (the surface pixels of his body).  This representation has shape (480,115,115) and contains 378,477 &quot;on&quot; pixels.  (ie. Big-O(1,000,000)).  For further context, 480x115x115 is O(6,000,000)  The solid Benji has many many more &quot;on&quot; pixels.  This gives you an idea of the scale of rendering we're talking about.</li>\n</ol>\n<p>I rendered this shell (representation 2) in Blender 2.79 (2.79b-linux-glibc219-x86_64) on my 64-bit Ubuntu 16.04 machine, and it was unmanageable.  Whenever I tried to select or move the model, my machine would freeze.  I want to rotate Benji in 4 pi steradians, view him from every arbitrary angle, etc.  The Blender delay was not acceptable for my needs.  I'm hoping this delay is not because I have too many data points, because I want to render Benji in high-definition.</p>\n<h3>My vision, web and graphics background:</h3>\n<ol>\n<li>approx. 20 hours getting basic Flask server running for class</li>\n<li>approx. 50 hours Computer Vision class in undergrad (MATLAB)</li>\n<li>approx. 50 hours Graphics research (dealing with plots, etc. in Numpy)</li>\n<li>approx. 50 independent hours dealing with Numpy for this project</li>\n<li>approx. 200 hours dealing with Java (C/C++/C#-like syntax) for various intro classes</li>\n<li>approx. 2 hours dealing with JS (ie. I want to avoid JavaScript technical details if at all possible)</li>\n<li>Most recently I've been working in Numpy, Python, Blender, and Flask</li>\n</ol>\n<p>I post this to help answerers understand what would take me a long time vs. what would take me a short time.  Please let me know whatever other information I can post to help you help me.  If there's a clear best solution to this 3-D modeling problem, I will take the time to learn whatever syntax and implementation details are required.</p>\n<p>Thanks for reading this long post!</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1528317867, "creation_date": 1528317867, "answer_id": 50729299, "question_id": 50729226, "link": "https://stackoverflow.com/questions/50729226/how-to-use-groupby-in-pandas-dataframe-to-get-mean-for-the-following-data/50729299#50729299", "title": "How to use groupby in pandas dataframe to get mean for the following data?", "body": "<p>You can do <code>groupby</code> <code>mean</code> then <code>melt</code> </p>\n\n<pre><code>df.groupby('place')[['red','green','yellow']].mean().reset_index().melt('place')\nOut[576]: \n  place variable  value\n0    MO      red    0.6\n1    NJ      red    1.4\n2    VA      red    4.4\n3    MO    green    2.2\n4    NJ    green    3.2\n5    VA    green    2.6\n6    MO   yellow    3.0\n7    NJ   yellow    3.8\n8    VA   yellow    6.6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": false, "score": 2, "last_activity_date": 1528318162, "creation_date": 1528318162, "answer_id": 50729373, "question_id": 50729226, "link": "https://stackoverflow.com/questions/50729226/how-to-use-groupby-in-pandas-dataframe-to-get-mean-for-the-following-data/50729373#50729373", "title": "How to use groupby in pandas dataframe to get mean for the following data?", "body": "<p>You need to <code>stack</code> the data and then <code>groupby</code> them to find the <code>mean</code>.</p>\n\n<pre><code>data = df.set_index(['items', 'place']).stack().rename_axis(['items', 'place', 'category']).reset_index(name='value')\ndata.groupby(['category', 'place'])['value'].mean().reset_index(name='avg_quantity')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     category place avg_quantity\n0    green    MO    2.2\n1    green    NJ    3.2\n2    green    VA    2.6\n3      red    MO    0.6\n4      red    NJ    1.4\n5      red    VA    4.4\n6   yellow    MO    3.0\n7   yellow    NJ    3.8\n8   yellow    VA    6.6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 1, "last_activity_date": 1528318562, "creation_date": 1528318562, "answer_id": 50729461, "question_id": 50729226, "link": "https://stackoverflow.com/questions/50729226/how-to-use-groupby-in-pandas-dataframe-to-get-mean-for-the-following-data/50729461#50729461", "title": "How to use groupby in pandas dataframe to get mean for the following data?", "body": "<p>You just need <code>groupby</code> + <code>mean</code> + <code>stack</code></p>\n\n<pre><code>df.groupby('place').mean().stack().rename_axis(['name', 'color']).to_frame('avg').reset_index()\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>  place   color  avg\n0    MO     red  0.6\n1    MO   green  2.2\n2    MO  yellow  3.0\n3    NJ     red  1.4\n4    NJ   green  3.2\n5    NJ  yellow  3.8\n6    VA     red  4.4\n7    VA   green  2.6\n8    VA  yellow  6.6\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 9463814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6ab4f4466c96f5744815bd8c24da048?s=128&d=identicon&r=PG&f=1", "display_name": "user9463814", "link": "https://stackoverflow.com/users/9463814/user9463814"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 50729299, "answer_count": 3, "score": 3, "last_activity_date": 1528318562, "creation_date": 1528317567, "question_id": 50729226, "link": "https://stackoverflow.com/questions/50729226/how-to-use-groupby-in-pandas-dataframe-to-get-mean-for-the-following-data", "title": "How to use groupby in pandas dataframe to get mean for the following data?", "body": "<p>I have my data as follows, the values in the dataframe are the quantities, while 'red','yellow', 'green' are the <strong>categories</strong></p>\n\n<pre><code>items  place     red     green   yellow  \na      VA         1       7       9\nb      VA         3       0       19\nc      VA         5       1        0\nd      VA         11      3        4\ne      VA         2       2        1\na      NJ         0       0        3\nb      NJ         3       0        9\nc      NJ         2       4        0\nd      NJ         0       5        6\ne      NJ         2       7        1\na      MO         0       0        5\nb      MO         1       0        4\nc      MO         1       4        0\nd      MO         0       0        5\ne      MO         1       7        1\n</code></pre>\n\n<p>For each place-category combination, I would like to compute the mean of these quantities across all 5 items (a,b,c,d,e), </p>\n\n<pre><code>category  place  Avg_quantity\nred        VA     ..\ngreen      VA .   ..\nyellow     VA     ..\n red       NJ     ..\ngreen      NJ     ..\nyellow     NJ     ..\n red       MO     ..\ngreen      MO     ..\nyellow     MO     ..\n</code></pre>\n"}, {"tags": ["python", "excel", "colors", "openpyxl", "fill"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1528362751, "post_id": 50729188, "comment_id": 88482108, "body": "You could add a border to the cells."}], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 8960783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d0f9da8d2da008a81955d73355dcbd?s=128&d=identicon&r=PG&f=1", "display_name": "secretagentmango", "link": "https://stackoverflow.com/users/8960783/secretagentmango"}, "is_accepted": true, "score": 0, "last_activity_date": 1528377125, "creation_date": 1528377125, "answer_id": 50742171, "question_id": 50729188, "link": "https://stackoverflow.com/questions/50729188/how-do-i-color-a-cell-with-openpyxl-while-retaining-the-grid-lines/50742171#50742171", "title": "How do I color a cell with openpyxl while retaining the grid lines?", "body": "<p>I just ended up drawing a border around each cell. I used this for reference:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24917201/applying-borders-to-a-cell-in-openpyxl\">Applying borders to a cell in OpenPyxl</a></p>\n\n<p>My initial concern was that I would have to draw each side of the box individually and I didn't want my code to drone on, but creating one full border and then applying it was fine.</p>\n"}], "owner": {"reputation": 383, "user_id": 8960783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d0f9da8d2da008a81955d73355dcbd?s=128&d=identicon&r=PG&f=1", "display_name": "secretagentmango", "link": "https://stackoverflow.com/users/8960783/secretagentmango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "accepted_answer_id": 50742171, "answer_count": 1, "score": 3, "last_activity_date": 1528377125, "creation_date": 1528317412, "question_id": 50729188, "link": "https://stackoverflow.com/questions/50729188/how-do-i-color-a-cell-with-openpyxl-while-retaining-the-grid-lines", "title": "How do I color a cell with openpyxl while retaining the grid lines?", "body": "<p>Right now I am coloring a cell in openpyxl in Python by importing this:</p>\n\n<pre><code>from openpyxl.styles import Color, PatternFill, Font, Border\n</code></pre>\n\n<p>and then doing this:</p>\n\n<pre><code>myFill = PatternFill(start_color='FF0000', \n                     end_color='FF0000', \n                     fill_type = 'solid')\n\nws.cell(row=row,column=column).fill = myFill\n</code></pre>\n\n<p>Where \"ws\" is a worksheet, row and column are a particular row and column, etc.</p>\n\n<p>This works great, but adjacent cells are totally filled and it's hard to distinguish one cell from another without grid lines. Is there any simple way to adjust this code so that the grid lines remain but the color is still there?</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "answers": [{"tags": [], "owner": {"reputation": 999, "user_id": 9683408, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NL6ApeRSPGk/AAAAAAAAAAI/AAAAAAAAAAo/9K9ux_rYMMo/photo.jpg?sz=128", "display_name": "Cory Nezin", "link": "https://stackoverflow.com/users/9683408/cory-nezin"}, "is_accepted": true, "score": 0, "last_activity_date": 1528329070, "creation_date": 1528329070, "answer_id": 50731179, "question_id": 50729148, "link": "https://stackoverflow.com/questions/50729148/shape-error-feeding-value-for-tensor/50731179#50731179", "title": "Shape Error Feeding Value for Tensor", "body": "<p>When you use a feed_dict, it doesn't automatically know that you want to feed it into the FIRST x that appears in your class, it could try to feed it anywhere x appears.  In particular, it looks like it's feeding it into the last assignment of x: x = Dropout(0.25)(x).  Since that has size ? x 256, it doesn't work.  In order to fix this, use the following:</p>\n\n<pre><code>input = tf.placeholder(tf.float32, shape=(BATCH_SIZE, 160, 320, 6))\nx = input\n</code></pre>\n\n<p>and then in your feed_dict, do </p>\n\n<pre><code>feed_dict={input: batch_x, y: batch_y}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4600641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649c02aa4bc9235b03eaf7ee788bce11?s=128&d=identicon&r=PG&f=1", "display_name": "ankahira", "link": "https://stackoverflow.com/users/4600641/ankahira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 50731179, "answer_count": 1, "score": 0, "last_activity_date": 1528329070, "creation_date": 1528317284, "question_id": 50729148, "link": "https://stackoverflow.com/questions/50729148/shape-error-feeding-value-for-tensor", "title": "Shape Error Feeding Value for Tensor", "body": "<p>I am trying to follow <a href=\"https://blog.keras.io/keras-as-a-simplified-interface-to-tensorflow-tutorial.html\" rel=\"nofollow noreferrer\">this</a> guide to implement Keras layers in Tensorflow tensors. </p>\n\n<p>I create the placeholders and model as follows. </p>\n\n<pre><code>sess = tf.Session()\nK.set_session(sess)\nK.set_learning_phase(1)\n\n# Initialize placeholders\n\nx = tf.placeholder(tf.float32, shape=(BATCH_SIZE, 160, 320, 6))\ny = tf.placeholder(tf.float32, [None])\n\n# Create Model\nx = Conv2D(64, kernel_size=3, strides=2, activation='relu', padding='same')(x)\nx = Conv2D(64, kernel_size=3, strides=2, activation='relu', padding='same')(x)\nx = MaxPooling2D(pool_size=(2, 2), strides=(2, 2), padding='same')(x)\n\nx = Conv2D(128, kernel_size=3, strides=2, activation='relu', padding='same')(x)\nx = Conv2D(128, kernel_size=3, strides=2, activation='relu', padding='same')(x)\nx = MaxPooling2D(pool_size=(2, 2), strides=(2, 2), padding='same')(x)\n\nx = Conv2D(256, kernel_size=3, strides=2, activation='relu', padding='same')(x)\nx = Conv2D(256, kernel_size=3, strides=2, activation='relu', padding='same')(x)\nx = MaxPooling2D(pool_size=(2, 2), strides=(2, 2), padding='same')(x)\n\n\nx = Flatten()(x)\n\nx = Dropout(0.5)(x)\n\nx = Dense(256, activation='relu')(x)\nx = Dropout(0.5)(x)\nx = Dense(256, activation='relu')(x)\nx = Dropout(0.25)(x)\npreds = Dense(1)(x)\n</code></pre>\n\n<p>And I run it as follows. </p>\n\n<pre><code>with sess.as_default():\n    for i in range(EPOCHS):\n\n        for batch in range(len(x_train) // BATCH_SIZE):\n            batch_x = x_train[batch * BATCH_SIZE:min((batch + 1) * BATCH_SIZE, len(x_train))]\n            batch_y = y_train[batch * BATCH_SIZE:min((batch + 1) * BATCH_SIZE, len(y_train))]\n\n            opt = sess.run(train_step, feed_dict={x: batch_x, y: batch_y})\n</code></pre>\n\n<p>I run into the error \" Cannot feed value of shape (8, 160, 320, 6) for Tensor 'dropout_3/dropout/mul:0', which has shape '(?, 256)' \"</p>\n"}, {"tags": ["python", "python-2.7", "mcafee"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1528317166, "post_id": 50729090, "comment_id": 88466056, "body": "I don&#39;t think you have a string -- you have a dictionary in which the strong you want is a value. Access it with its corresponding key: <code>system[u&#39;EPOLeafNode.NodeName&#39;]</code>."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1528317213, "post_id": 50729090, "comment_id": 88466083, "body": "You don&#39;t have the string <code>&quot;{u&#39;EPOLeafNode.NodeName&#39;: u&#39;WORKSTATION001&#39;}&quot;</code>, you just have the dictionary <code>{u&#39;EPOLeafNode.NodeName&#39;: u&#39;WORKSTATION001&#39;}</code>. So just do <code>system[u&#39;EPOLeafNode.NodeName&#39;]</code>, or <code>system.values()[0]</code>, or whatever."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1528317613, "post_id": 50729090, "comment_id": 88466266, "body": "I think the error message is pretty clear\u2014<code>system</code> isn&#39;t a string\u2014what part don&#39;t you understand?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9905487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c312e9431c09477b377a1c813028c0?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/9905487/rob-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1528317600, "creation_date": 1528317600, "answer_id": 50729237, "question_id": 50729090, "link": "https://stackoverflow.com/questions/50729090/attributeerror-when-splitting-a-string/50729237#50729237", "title": "AttributeError when splitting a string", "body": "<p>Thanks for the quick responses.  Referencing via system[u'EPOLeafNode.NodeName'] did the trick.  </p>\n\n<p>Updated (working) code:</p>\n\n<pre><code>for system in epoSystems:\n    computerName = system[u'EPOLeafNode.NodeName']\n    print computerName\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9905487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c312e9431c09477b377a1c813028c0?s=128&d=identicon&r=PG&f=1", "display_name": "Rob G", "link": "https://stackoverflow.com/users/9905487/rob-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 565, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1528317600, "creation_date": 1528317065, "last_edit_date": 1528317493, "question_id": 50729090, "link": "https://stackoverflow.com/questions/50729090/attributeerror-when-splitting-a-string", "title": "AttributeError when splitting a string", "body": "<p>I have a <code>dict</code> object in which I'm trying to parse out and capture only a part of the string.</p>\n\n<p>I'm using McAfee EPO Python API's and can grab results of a query, but I don't think that is relevant to this question.</p>\n\n<p>Here is the strings in the objects (multiple lines of similar content).  What I'm after is extracting the <code>'WORKSTATION001'</code> text from this string.</p>\n\n<pre><code>{u'EPOLeafNode.NodeName': u'WORKSTATION001'}\n</code></pre>\n\n<p>Here's the code I'm using:</p>\n\n<pre><code>for system in epoSystems:\n    computerName = system.rstrip().split('u')\n    print computerName\n</code></pre>\n\n<p>This results in: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    computerName = system.rstrip().split('u')\nAttributeError: 'dict' object has no attribute 'rstrip'\n</code></pre>\n\n<p>Any ideas on how to grab just that string?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1972, "user_id": 5695018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lkHBu.jpg?s=128&g=1", "display_name": "Ziyad Edher", "link": "https://stackoverflow.com/users/5695018/ziyad-edher"}, "edited": false, "score": 1, "creation_date": 1528316917, "post_id": 50729040, "comment_id": 88465954, "body": "Hi, welcome to Stack Overflow. Could you edit the question to tell us what the code should be doing and paste the error trace in full?"}, {"owner": {"reputation": 647, "user_id": 4288069, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OitGe.jpg?s=128&g=1", "display_name": "Ben Quigley", "link": "https://stackoverflow.com/users/4288069/ben-quigley"}, "edited": false, "score": 0, "creation_date": 1528316994, "post_id": 50729040, "comment_id": 88465988, "body": "The error should tell you what line of code is throwing it. That part is big, can you include it please?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9904775, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-chWuFZSy9vk/AAAAAAAAAAI/AAAAAAAAABQ/QwYpm_efRJk/photo.jpg?sz=128", "display_name": "Raghav Sharma", "link": "https://stackoverflow.com/users/9904775/raghav-sharma"}, "edited": false, "score": 0, "creation_date": 1528318289, "post_id": 50729102, "comment_id": 88466553, "body": "the loop works for 138 enteries out of 31000 entries but does not when nan is encountered ."}, {"owner": {"reputation": 1, "user_id": 9904775, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-chWuFZSy9vk/AAAAAAAAAAI/AAAAAAAAABQ/QwYpm_efRJk/photo.jpg?sz=128", "display_name": "Raghav Sharma", "link": "https://stackoverflow.com/users/9904775/raghav-sharma"}, "edited": false, "score": 0, "creation_date": 1528318313, "post_id": 50729102, "comment_id": 88466563, "body": "by what should i replace nan and how?"}, {"owner": {"reputation": 1, "user_id": 9904775, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-chWuFZSy9vk/AAAAAAAAAAI/AAAAAAAAABQ/QwYpm_efRJk/photo.jpg?sz=128", "display_name": "Raghav Sharma", "link": "https://stackoverflow.com/users/9904775/raghav-sharma"}, "edited": false, "score": 0, "creation_date": 1528318580, "post_id": 50729102, "comment_id": 88466684, "body": "i ran df1 = df.replace(np.nan, &#39;&#39;, regex=True) and after that the above loop it worked thanks for your help :)"}, {"owner": {"reputation": 647, "user_id": 4288069, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OitGe.jpg?s=128&g=1", "display_name": "Ben Quigley", "link": "https://stackoverflow.com/users/4288069/ben-quigley"}, "reply_to_user": {"reputation": 1, "user_id": 9904775, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-chWuFZSy9vk/AAAAAAAAAAI/AAAAAAAAABQ/QwYpm_efRJk/photo.jpg?sz=128", "display_name": "Raghav Sharma", "link": "https://stackoverflow.com/users/9904775/raghav-sharma"}, "edited": false, "score": 0, "creation_date": 1528318598, "post_id": 50729102, "comment_id": 88466688, "body": "That&#39;s between you and your god, but my first impulse is just to skip those lines."}], "tags": [], "owner": {"reputation": 647, "user_id": 4288069, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OitGe.jpg?s=128&g=1", "display_name": "Ben Quigley", "link": "https://stackoverflow.com/users/4288069/ben-quigley"}, "is_accepted": false, "score": 0, "last_activity_date": 1528317122, "creation_date": 1528317122, "answer_id": 50729102, "question_id": 50729040, "link": "https://stackoverflow.com/questions/50729040/typeerror-expected-string-or-bytes-like/50729102#50729102", "title": "TypeError: expected string or bytes-like", "body": "<p>My guess is the issue is <code>reciept['subject'][i]</code> is not pulling a string. You could throw a quick <code>print(reciept['subject'][i])</code> in before that line and check.</p>\n"}], "owner": {"reputation": 1, "user_id": 9904775, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-chWuFZSy9vk/AAAAAAAAAAI/AAAAAAAAABQ/QwYpm_efRJk/photo.jpg?sz=128", "display_name": "Raghav Sharma", "link": "https://stackoverflow.com/users/9904775/raghav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528325349, "creation_date": 1528316853, "last_edit_date": 1528325349, "question_id": 50729040, "link": "https://stackoverflow.com/questions/50729040/typeerror-expected-string-or-bytes-like", "title": "TypeError: expected string or bytes-like", "body": "<p>I was working on a code  and the error occurred on the first line of \nthe for loop block , the corpus variable was still updated by some entries even though the error occurred \nplease help me remove this error</p>\n\n<pre><code>for i in range (0 ,N):\n    data = re.sub('[^a-z A-Z]','',reciept['subject'][i])\n    data=data.lower()\n    data=data.split()\n    data=[word for word in data if word not in set(stopwords.words('english'))]\n    from nltk.stem.porter import PorterStemmer\n    ps=PorterStemmer()\n    data=[ps.stem(word) for word in data if word not in set(stopwords.words('english'))]\n    data=' '.join(data)\n    corpus_recipt.append(data)\n</code></pre>\n\n<p>the error says as follows\nTypeError: expected string or bytes-like object</p>\n"}]