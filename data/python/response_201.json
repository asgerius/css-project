[{"tags": ["python"], "comments": [{"owner": {"reputation": 665, "user_id": 10610632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb8dce0aefdec2cde25c0a79c32739?s=128&d=identicon&r=PG&f=1", "display_name": "RoyM", "link": "https://stackoverflow.com/users/10610632/roym"}, "edited": false, "score": 0, "creation_date": 1542274344, "post_id": 53310555, "comment_id": 93512716, "body": "You might want to append .lower() to all your playermoves, so that a player can write both &quot;Paper&quot; and &quot;paper&quot; as an example. If you want to do that, then all your checks will have to be against lowercase as well."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1542240224, "creation_date": 1542240224, "answer_id": 53310599, "question_id": 53310555, "link": "https://stackoverflow.com/questions/53310555/python-rock-paper-scissors-game/53310599#53310599", "title": "Python Rock Paper Scissors game", "body": "<p>You have created two <code>randomnumber</code> variables: one inside <code>get_computermove</code>, the other inside <code>calculate_winner</code>.  The second one has no value defined.  The first one disappears as soon as you leave the function.  Instead, try this: save the return value from each function, and pass those into the final routine.</p>\n\n<pre><code>def main():\n    computermove = get_computermove()\n    playermove = get_playermove()\n    calculatewinner(computermove, playermove)\n\n...\ndef calculatewinner(randomnumber, playermove):\n</code></pre>\n\n<p>You can do a little better with variable names, but this should keep the rest of your code intact.</p>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 2951469, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/jCjWX.png?s=128&g=1", "display_name": "Rachit Bhargava", "link": "https://stackoverflow.com/users/2951469/rachit-bhargava"}, "is_accepted": false, "score": 0, "last_activity_date": 1542240246, "creation_date": 1542240246, "answer_id": 53310602, "question_id": 53310555, "link": "https://stackoverflow.com/questions/53310555/python-rock-paper-scissors-game/53310602#53310602", "title": "Python Rock Paper Scissors game", "body": "<p>That's a great way to approach this problem, but you need to be aware that anything returned in Python is not stored as a global variable, unless you explicitly do so. Whenever you call get_computermove() function, it does return a 'randomnumber', but it gets lost since you do not store it anywhere. Also, you would need to turn it in to the calculatewinner() function as one of the arguments for it to be accessible inside the function.</p>\n\n<p>On a side note, the first line in your code has 'randomnumber' misspelled.</p>\n"}], "owner": {"reputation": 3, "user_id": 10654793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e22aeeb1a3f6f6fc832025cf32c19493?s=128&d=identicon&r=PG&f=1", "display_name": "Onkenstein", "link": "https://stackoverflow.com/users/10654793/onkenstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 53310599, "answer_count": 2, "score": 0, "last_activity_date": 1542240246, "creation_date": 1542239918, "question_id": 53310555, "link": "https://stackoverflow.com/questions/53310555/python-rock-paper-scissors-game", "title": "Python Rock Paper Scissors game", "body": "<p>I am in a beginning programming class and was assigned a \"Rock, Paper Scissors\" game to write. The instructors stipulated that the functions be named as I have them, and that the game loop with no way to end without closing the program. For some reason, when I run this code I am told that the \"randomnumber\" is not defined. What am I doing wrong? Thanks</p>\n\n<pre><code>import random\nkeepgoing = 1\n\ndef main():\n    get_computermove()\n    get_playermove()\n    calculatewinner()\n\ndef get_computermove():\n    computermove = random.randint(1, 3)\n    randomnumber = computermove\n    return randomnumber\n\ndef get_playermove():\n    playermove = input('Please pick rock, paper, or scissors. ')\n    return playermove\n\ndef calculatewinner():\n    if randomumber == 1 and playermove == \"rock\":\n        print('It is a tie!')\n    elif randomnumber == 2 and playermove == \"paper\":\n        print('It is a tie!')\n    elif randomnumber == 3 and playermove == \"scissors\":\n        print('It is a tie!')\n    elif randomnumber == \"1\" and playermove == \"Paper\":\n        print('Paper covers rock. You win!')\n    elif randomnumber == \"1\" and playermove == \"scissors\":\n        print('Rock breaks scissors. You lose.')\n    elif randomnumber == \"2\" and playermove == \"Rock\":\n        print('Paper covers rock. You lose.')\n    elif randomnumber == \"2\" and playermove == \"Scissors\":\n        print('Scissors cuts paper. You win!')\n    elif randomnumber == \"3\" and playermove == \"Rock\":\n        print('Rock breaks scissors. You win!')\n    elif randomnumber == \"3\" and playermove == \"Paper\":\n        print('Scissors cuts paper. You lose.')\n\nwhile keepgoing == 1:\n    main()\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "data-science", "data-analysis"], "comments": [{"owner": {"reputation": 521, "user_id": 6907488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/90bc7679dac46ba7ffedcb83799819ac?s=128&d=identicon&r=PG&f=1", "display_name": "dozyaustin", "link": "https://stackoverflow.com/users/6907488/dozyaustin"}, "edited": false, "score": 0, "creation_date": 1542240394, "post_id": 53310547, "comment_id": 93502021, "body": "Do not have a direct answer -- never dug deep enough, but Pandas calls ous the speed of its <code>.unique()</code> in the documentation itself. <a href=\"https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.unique.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/version/0.23.4/generated/&hellip;</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542245552, "post_id": 53310547, "comment_id": 93503244, "body": "<code>unique</code> doesn&#39;t make special use of numpy multidimensionality.  It&#39;s a very different kind of operation than sum and multiply.  It sorts a 1d array, and then looks for adjacent duplicates.  np.lib.arraysetops._unique1d"}, {"owner": {"reputation": 1486, "user_id": 6828711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2j21.png?s=128&g=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/6828711/nan"}, "edited": false, "score": 0, "creation_date": 1542250594, "post_id": 53310547, "comment_id": 93504293, "body": "Also, np.unique enables a lot more than pandas unique.  like returning the indices of where they were found, the ability to reconstruct the original array and the counts of the unique values that were found."}, {"owner": {"reputation": 8346, "user_id": 6573902, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/nplar.jpg?s=128&g=1", "display_name": "sophros", "link": "https://stackoverflow.com/users/6573902/sophros"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 3, "creation_date": 1542266407, "post_id": 53310547, "comment_id": 93508636, "body": "@hpaulj - as per the documentation pointed out by @dozyaustin the speed of <code>pandas</code> <code>unique()</code> is not related to sorting (which would require a lot of additional memory and time; on the access to the first unique element). Rather, the operation uses a hashmap to track elements that the iterator has already visited on its course through the dataframe."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 13677082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wt8aF.jpg?s=128&g=1", "display_name": "Dylan McCullough", "link": "https://stackoverflow.com/users/13677082/dylan-mccullough"}, "is_accepted": false, "score": 0, "last_activity_date": 1592290751, "creation_date": 1592290751, "answer_id": 62402653, "question_id": 53310547, "link": "https://stackoverflow.com/questions/53310547/why-is-pd-unique-faster-than-np-unique/62402653#62402653", "title": "Why is pd.unique() faster than np.unique()?", "body": "<p>np.unique() is treating the data as an array, so it goes through every value individually then identifies the unique fields.</p>\n\n<p>whereas, pandas has pre-built metadata which contains this information and pd.unique() is simply calling on the metadata which contains 'unique' info, so it doesn't have to calculate it again. </p>\n"}], "owner": {"reputation": 141, "user_id": 8780437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17afd8f23373555a45a2a8df44c673a?s=128&d=identicon&r=PG&f=1", "display_name": "Songcheng Li", "link": "https://stackoverflow.com/users/8780437/songcheng-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 954, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1592290751, "creation_date": 1542239851, "question_id": 53310547, "link": "https://stackoverflow.com/questions/53310547/why-is-pd-unique-faster-than-np-unique", "title": "Why is pd.unique() faster than np.unique()?", "body": "<p>I tried to compare the two, one is pandas.unique() and another one is numpy.unique(), and I found out that the latter actually surpass the first one.<br>\nI am not sure whether the excellency is linear or not.  </p>\n\n<p>Can anyone please tell me why such a difference exists, with regards to the code implementation? In what case should I use which?</p>\n\n<p><sub>Thanks in advance. I am new to Stackoverflow, so sorry if I have asked too much.</sub></p>\n"}, {"tags": ["python", "indentation"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1542240158, "post_id": 53310544, "comment_id": 93501958, "body": "It is inconsistent, look at the line below <code>with open(&#39;tweets.csv&#39;, &#39;a&#39;) as file:</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "is_accepted": true, "score": 13, "last_activity_date": 1542240475, "creation_date": 1542240475, "answer_id": 53310635, "question_id": 53310544, "link": "https://stackoverflow.com/questions/53310544/inconsistent-use-of-tabs-and-spaces-in-indentation-notepad-python/53310635#53310635", "title": "inconsistent use of tabs and spaces in indentation notepad++ Python", "body": "<p>It means exactly what is sounds like: you indented your code with spaces in some places and with tabs in others. To fix this, in Notepad++, go to <strong>Edit</strong> -> <strong>Blank Operations</strong> -> <strong>TAB to Space</strong> (PEP 8 recommends using spaces vs. tabs).</p>\n"}, {"comments": [{"owner": {"reputation": 395, "user_id": 9210198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86c5322b9acbab8527b991231fb50a0?s=128&d=identicon&r=PG&f=1", "display_name": "PaPaB1nG0", "link": "https://stackoverflow.com/users/9210198/papab1ng0"}, "edited": false, "score": 0, "creation_date": 1542241176, "post_id": 53310695, "comment_id": 93502206, "body": "thank you for your suggestion, i will look into those editors then"}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 0, "creation_date": 1542245211, "post_id": 53310695, "comment_id": 93503181, "body": "I&#39;ve always preferred Visual Studio (free IDE for personal/educational/open-source use) or Visual Studio Code (free text editor for all uses). VS Code is built off of the same framework as Atom and is similar in many aspects, but is faster. And Sublime costs money... Anyway, this is strongly opinion-based, but I thought I&#39;d throw in my two cents."}], "tags": [], "owner": {"reputation": 23, "user_id": 7040939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vimox.jpg?s=128&g=1", "display_name": "NitroX", "link": "https://stackoverflow.com/users/7040939/nitrox"}, "is_accepted": false, "score": 0, "last_activity_date": 1542240994, "creation_date": 1542240994, "answer_id": 53310695, "question_id": 53310544, "link": "https://stackoverflow.com/questions/53310544/inconsistent-use-of-tabs-and-spaces-in-indentation-notepad-python/53310695#53310695", "title": "inconsistent use of tabs and spaces in indentation notepad++ Python", "body": "<p>To be sure about spacing in Python scripts, you can use some of sophisticated text editors. I would recommend you to use Sublime Text 3 or Atom so you can easily handle it next time.</p>\n"}], "owner": {"reputation": 395, "user_id": 9210198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86c5322b9acbab8527b991231fb50a0?s=128&d=identicon&r=PG&f=1", "display_name": "PaPaB1nG0", "link": "https://stackoverflow.com/users/9210198/papab1ng0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9870, "favorite_count": 1, "accepted_answer_id": 53310635, "answer_count": 2, "score": 6, "last_activity_date": 1542240994, "creation_date": 1542239842, "question_id": 53310544, "link": "https://stackoverflow.com/questions/53310544/inconsistent-use-of-tabs-and-spaces-in-indentation-notepad-python", "title": "inconsistent use of tabs and spaces in indentation notepad++ Python", "body": "<p>I am getting an inconsistent use of tabs and spaces in indentation error after adding only one line of code and I can't see why it would throw the error, here is the code:</p>\n\n<pre><code>auth = tweepy.OAuthHandler(consumer_key, consumer_secret) #create authentcation handler\n\nauth.set_access_token(access_token, access_secret) #set access tokens to connect to twitter dev account\n\napi = tweepy.API(auth, wait_on_rate_limit=True, wait_on_rate_limit_notify=True) #consume tweepy api function, \n\ntweets = api.user_timeline('realDonaldTrump', count=30) \n\ntweets_list = []\nfor each_tweet in tweets:\n    tweets_list.append(each_tweet._json)\nwith open('tweets.csv', 'a') as file:\n        file.write(json.dumps(tweets_list, indent=4))\n\nmy_demo_list = []\nwith open('tweets.csv', encoding='utf-8') as csvFile:  \n    all_data = json.load(csvFile)\n    for json_tweet_data in all_data:\n        tweet_id = json_tweet_data['id']\n        text = json_tweet_data['text']\n        favorite_count = json_tweet_data['favorite_count']\n        retweet_count = json_tweet_data['retweet_count']\n        created_at = json_tweet_data['created_at']\n        #lang= json_tweet_data['lang']\n        my_demo_list.append({'tweet_id': str(tweet_id),\n                             'text': str(text),\n                             'favorite_count': int(favorite_count),\n                             'retweet_count': int(retweet_count),\n                             'created_at': created_at,\n                             'lang':str(lang)\n                            })\n        print(my_demo_list)\n        tweet_json = pd.DataFrame(my_demo_list, columns = \n                                  ['tweet_id', 'text', \n                                   'favorite_count', 'retweet_count', \n                                   'created_at','language'])        \nprint(tweet_json)\n</code></pre>\n\n<p>the #lang = json_tweet_data['lang'] line is where the error is appearing and if I remove it or comment it out like it is in the code shown, it will work fine, from what I can see everything is indented fine, what could be the issue here?</p>\n"}, {"tags": ["javascript", "python", "tensorflow", "tensorflow.js"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 1288230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2fec5aaa6ec36f94861f6dd3b98767?s=128&d=identicon&r=PG", "display_name": "GChabot", "link": "https://stackoverflow.com/users/1288230/gchabot"}, "edited": false, "score": 0, "creation_date": 1543102025, "post_id": 53316830, "comment_id": 93797848, "body": "Thank you edkeveked, I simplified my problem too much and introduced a mistake... anyway, you are right, they do produce the same code and there is no difference as far I&#39;ve seen between Python and Javascript Tensorflow :)"}], "tags": [], "owner": {"reputation": 14633, "user_id": 5069957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/597577c2765adaa190e4524d3a3860fe?s=128&d=identicon&r=PG&f=1", "display_name": "edkeveked", "link": "https://stackoverflow.com/users/5069957/edkeveked"}, "is_accepted": true, "score": 1, "last_activity_date": 1542276094, "creation_date": 1542276094, "answer_id": 53316830, "question_id": 53310539, "link": "https://stackoverflow.com/questions/53310539/difference-between-tensorflow-and-tensorflow-js/53316830#53316830", "title": "Difference between Tensorflow and Tensorflow.js?", "body": "<p>Both programs outputs the same result. If the js output is different, make sure you are using the latest version 0.13.3. </p>\n\n<p>Output of python code <a href=\"https://repl.it/@kedevked/convolution-tensorflow\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The following is the js code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var x = tf.tensor([0.101,0.102,0.103,0.104,0.105,0.106,0.107,0.108,0.109,0.110,0.111,0.112,0.113,0.114,0.115,0.116,0.117,0.118,0.119,0.120,0.121,0.122,0.123,0.124,0.125,0.126,0.127,0.128,0.129,0.130,0.131,0.132,0.133,0.134,0.135,0.136,0.137,0.138,0.139,0.140,0.141,0.142,0.143,0.144,0.145,0.146,0.147,0.148,0.149,0.150,0.151,0.152,0.153,0.154,0.155,0.156,0.157,0.158,0.159,0.160,0.161,0.162,0.163,0.164,0.165,0.166,0.167,0.168,0.169,0.170,0.171,0.172,0.173,0.174,0.175,0.176,0.177,0.178,0.179,0.180,0.181,0.182,0.183,0.184,0.185,0.186,0.187,0.188,0.189,0.190,0.191,0.192,0.193,0.194,0.195,0.196,0.197,0.198,0.199,0.200,0.201,0.202,0.203,0.204,0.205,0.206,0.207,0.208,0.209,0.210,0.211,0.212,0.213,0.214,0.215,0.216,0.217,0.218,0.219,0.220,0.221,0.222,0.223,0.224,0.225,0.226,0.227,0.228,0.229,0.230,0.231,0.232,0.233,0.234,0.235,0.236,0.237,0.238,0.239,0.240,0.241,0.242,0.243,0.244,0.245,0.246,0.247,0.248,0.249,0.250,0.251,0.252,0.253,0.254,0.255,0.256,0.257,0.258,0.259,0.260,0.261,0.262,0.263,0.264,0.265,0.266,0.267,0.268,0.269,0.270,0.271,0.272,0.273,0.274,0.275,0.276,0.277,0.278,0.279,0.280,0.281,0.282,0.283,0.284,0.285,0.286,0.287,0.288,0.289,0.290,0.291,0.292,0.293,0.294,0.295,0.296,0.297,0.298,0.299,0.300,0.301,0.302,0.303,0.304,0.305,0.306,0.307,0.308,0.309,0.310,0.311,0.312,0.313,0.314,0.315,0.316,0.317,0.318,0.319,0.320,0.321,0.322,0.323,0.324,0.325,0.326,0.327,0.328,0.329,0.330,0.331,0.332,0.333,0.334,0.335,0.336,0.337,0.338,0.339,0.340,0.341,0.342,0.343,0.344,0.345,0.346,0.347,0.348,0.349,0.350,0.351,0.352,0.353,0.354,0.355,0.356,0.357,0.358,0.359,0.360,0.361,0.362,0.363,0.364,0.365,0.366,0.367,0.368,0.369,0.370,0.371,0.372,0.373,0.374,0.375,0.376,0.377,0.378,0.379,0.380,0.381,0.382,0.383,0.384,0.385,0.386,0.387,0.388,0.389,0.390,0.391,0.392,0.393,0.394,0.395,0.396,0.397,0.398,0.399,0.400]).reshape([1,10,10,3])\r\nvar filters = tf.tensor([0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,0.10,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.20,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.40,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.50,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.60,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.70,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.80,0.81]).reshape([3,3,3,3])\r\nvar bias = tf.tensor([0.1,0.2,0.3])\r\n\r\nvar out = tf.add(\r\n  tf.conv2d(x, filters, [2, 2], 'same'),\r\n  bias)\r\n\r\nout.print()</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;!-- Load TensorFlow.js --&gt;\r\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.13.3/dist/tf.min.js\"&gt; &lt;/script&gt;\r\n  &lt;/head&gt;\r\n\r\n  &lt;body&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 143, "user_id": 1288230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2fec5aaa6ec36f94861f6dd3b98767?s=128&d=identicon&r=PG", "display_name": "GChabot", "link": "https://stackoverflow.com/users/1288230/gchabot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 53316830, "answer_count": 1, "score": 1, "last_activity_date": 1542276174, "creation_date": 1542239793, "last_edit_date": 1542276174, "question_id": 53310539, "link": "https://stackoverflow.com/questions/53310539/difference-between-tensorflow-and-tensorflow-js", "title": "Difference between Tensorflow and Tensorflow.js?", "body": "<p>I was expecting these two programs to return the same result:</p>\n\n<p><em>main.js</em>:</p>\n\n<pre><code>const tf = require('@tensorflow/tfjs');\nrequire('@tensorflow/tfjs-node');\n\nvar x = tf.tensor([0.101,0.102,0.103,0.104,0.105,0.106,0.107,0.108,0.109,0.110,0.111,0.112,0.113,0.114,0.115,0.116,0.117,0.118,0.119,0.120,0.121,0.122,0.123,0.124,0.125,0.126,0.127,0.128,0.129,0.130,0.131,0.132,0.133,0.134,0.135,0.136,0.137,0.138,0.139,0.140,0.141,0.142,0.143,0.144,0.145,0.146,0.147,0.148,0.149,0.150,0.151,0.152,0.153,0.154,0.155,0.156,0.157,0.158,0.159,0.160,0.161,0.162,0.163,0.164,0.165,0.166,0.167,0.168,0.169,0.170,0.171,0.172,0.173,0.174,0.175,0.176,0.177,0.178,0.179,0.180,0.181,0.182,0.183,0.184,0.185,0.186,0.187,0.188,0.189,0.190,0.191,0.192,0.193,0.194,0.195,0.196,0.197,0.198,0.199,0.200,0.201,0.202,0.203,0.204,0.205,0.206,0.207,0.208,0.209,0.210,0.211,0.212,0.213,0.214,0.215,0.216,0.217,0.218,0.219,0.220,0.221,0.222,0.223,0.224,0.225,0.226,0.227,0.228,0.229,0.230,0.231,0.232,0.233,0.234,0.235,0.236,0.237,0.238,0.239,0.240,0.241,0.242,0.243,0.244,0.245,0.246,0.247,0.248,0.249,0.250,0.251,0.252,0.253,0.254,0.255,0.256,0.257,0.258,0.259,0.260,0.261,0.262,0.263,0.264,0.265,0.266,0.267,0.268,0.269,0.270,0.271,0.272,0.273,0.274,0.275,0.276,0.277,0.278,0.279,0.280,0.281,0.282,0.283,0.284,0.285,0.286,0.287,0.288,0.289,0.290,0.291,0.292,0.293,0.294,0.295,0.296,0.297,0.298,0.299,0.300,0.301,0.302,0.303,0.304,0.305,0.306,0.307,0.308,0.309,0.310,0.311,0.312,0.313,0.314,0.315,0.316,0.317,0.318,0.319,0.320,0.321,0.322,0.323,0.324,0.325,0.326,0.327,0.328,0.329,0.330,0.331,0.332,0.333,0.334,0.335,0.336,0.337,0.338,0.339,0.340,0.341,0.342,0.343,0.344,0.345,0.346,0.347,0.348,0.349,0.350,0.351,0.352,0.353,0.354,0.355,0.356,0.357,0.358,0.359,0.360,0.361,0.362,0.363,0.364,0.365,0.366,0.367,0.368,0.369,0.370,0.371,0.372,0.373,0.374,0.375,0.376,0.377,0.378,0.379,0.380,0.381,0.382,0.383,0.384,0.385,0.386,0.387,0.388,0.389,0.390,0.391,0.392,0.393,0.394,0.395,0.396,0.397,0.398,0.399,0.400]).reshape([1,10,10,3])\nvar filters = tf.tensor([0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,0.10,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.20,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.40,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.50,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.60,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.70,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.80,0.81]).reshape([3,3,3,3])\nvar bias = tf.tensor([0.1,0.2,0.3])\n\nvar out = tf.add(\n  tf.conv2d(x, filters, [2, 2], 'same'),\n  bias)\n\nconsole.log(x.dataSync())\n</code></pre>\n\n<p><em>main.py</em>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nimport json\n\nx = tf.constant([0.101,0.102,0.103,0.104,0.105,0.106,0.107,0.108,0.109,0.110,0.111,0.112,0.113,0.114,0.115,0.116,0.117,0.118,0.119,0.120,0.121,0.122,0.123,0.124,0.125,0.126,0.127,0.128,0.129,0.130,0.131,0.132,0.133,0.134,0.135,0.136,0.137,0.138,0.139,0.140,0.141,0.142,0.143,0.144,0.145,0.146,0.147,0.148,0.149,0.150,0.151,0.152,0.153,0.154,0.155,0.156,0.157,0.158,0.159,0.160,0.161,0.162,0.163,0.164,0.165,0.166,0.167,0.168,0.169,0.170,0.171,0.172,0.173,0.174,0.175,0.176,0.177,0.178,0.179,0.180,0.181,0.182,0.183,0.184,0.185,0.186,0.187,0.188,0.189,0.190,0.191,0.192,0.193,0.194,0.195,0.196,0.197,0.198,0.199,0.200,0.201,0.202,0.203,0.204,0.205,0.206,0.207,0.208,0.209,0.210,0.211,0.212,0.213,0.214,0.215,0.216,0.217,0.218,0.219,0.220,0.221,0.222,0.223,0.224,0.225,0.226,0.227,0.228,0.229,0.230,0.231,0.232,0.233,0.234,0.235,0.236,0.237,0.238,0.239,0.240,0.241,0.242,0.243,0.244,0.245,0.246,0.247,0.248,0.249,0.250,0.251,0.252,0.253,0.254,0.255,0.256,0.257,0.258,0.259,0.260,0.261,0.262,0.263,0.264,0.265,0.266,0.267,0.268,0.269,0.270,0.271,0.272,0.273,0.274,0.275,0.276,0.277,0.278,0.279,0.280,0.281,0.282,0.283,0.284,0.285,0.286,0.287,0.288,0.289,0.290,0.291,0.292,0.293,0.294,0.295,0.296,0.297,0.298,0.299,0.300,0.301,0.302,0.303,0.304,0.305,0.306,0.307,0.308,0.309,0.310,0.311,0.312,0.313,0.314,0.315,0.316,0.317,0.318,0.319,0.320,0.321,0.322,0.323,0.324,0.325,0.326,0.327,0.328,0.329,0.330,0.331,0.332,0.333,0.334,0.335,0.336,0.337,0.338,0.339,0.340,0.341,0.342,0.343,0.344,0.345,0.346,0.347,0.348,0.349,0.350,0.351,0.352,0.353,0.354,0.355,0.356,0.357,0.358,0.359,0.360,0.361,0.362,0.363,0.364,0.365,0.366,0.367,0.368,0.369,0.370,0.371,0.372,0.373,0.374,0.375,0.376,0.377,0.378,0.379,0.380,0.381,0.382,0.383,0.384,0.385,0.386,0.387,0.388,0.389,0.390,0.391,0.392,0.393,0.394,0.395,0.396,0.397,0.398,0.399,0.400])\nx = tf.reshape(x, [1,10,10,3])\n\nfilters = tf.constant([0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,0.10,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.20,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.40,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.50,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.60,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.70,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.80,0.81])\nfilters = tf.reshape(filters, [3,3,3,3])\n\nbias = tf.constant([0.1,0.2,0.3])\n\nout = tf.math.add(\n  tf.nn.conv2d(x, filters, [1, 2, 2, 1], 'SAME'),\n  bias)\n\nwith tf.Session() as sess:\n  print(json.dumps(sess.run(out).tolist()))\n</code></pre>\n\n<p>Instead, they return very different values:</p>\n\n<ul>\n<li>The first 5 values of the tensor returned by the Javascript version are:   0.10100000351667404, 0.10199999809265137, 0.10300000011920929, 0.10400000214576721, 0.10499999672174454</li>\n<li>The first 5 values of the tensor returned by the Python version are: 1.8199000358581543, 1.9838900566101074, 2.1478798389434814, 1.8911800384521484, 2.058410167694092</li>\n</ul>\n\n<p>Did I miss something? Shouldn't I expect these two programs to produce the same outcome?</p>\n"}, {"tags": ["python", "function", "mysql-python"], "comments": [{"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1542239747, "post_id": 53310496, "comment_id": 93501833, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26497846/python-mysql-parameter-queries-for-dynamic-table-names\">Python MySQL parameter queries for dynamic table names</a>"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1542239801, "post_id": 53310496, "comment_id": 93501851, "body": "A table name isn&#39;t supposed to be dynamic though. Consider turning it into a column."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8620294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4378bc9bcefed8d568fdc037c4b35815?s=128&d=identicon&r=PG", "display_name": "Avarthar", "link": "https://stackoverflow.com/users/8620294/avarthar"}, "edited": false, "score": 0, "creation_date": 1542240146, "post_id": 53310571, "comment_id": 93501954, "body": "Thanks for the quick answer :), I tried to find some documentation on that, but found nothing for the past three hours. I will add the accepted answer as soon as the four minutes delay passes. Thank you again :)"}, {"owner": {"reputation": 521, "user_id": 6907488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/90bc7679dac46ba7ffedcb83799819ac?s=128&d=identicon&r=PG&f=1", "display_name": "dozyaustin", "link": "https://stackoverflow.com/users/6907488/dozyaustin"}, "reply_to_user": {"reputation": 15, "user_id": 8620294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4378bc9bcefed8d568fdc037c4b35815?s=128&d=identicon&r=PG", "display_name": "Avarthar", "link": "https://stackoverflow.com/users/8620294/avarthar"}, "edited": false, "score": 0, "creation_date": 1542240504, "post_id": 53310571, "comment_id": 93502052, "body": "@Avarthar here is a decent overview <a href=\"https://www.programiz.com/python-programming/methods/string/format\" rel=\"nofollow noreferrer\">programiz.com/python-programming/methods/string/format</a>, it&#39;s pretty simple unless you try to do something seriously complex.   For example, expanding on your original query, is super simple:  <code>SELECT * FROM {} WHERE id = {}&quot;.format(table, int(id))</code>"}], "tags": [], "owner": {"reputation": 521, "user_id": 6907488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/90bc7679dac46ba7ffedcb83799819ac?s=128&d=identicon&r=PG&f=1", "display_name": "dozyaustin", "link": "https://stackoverflow.com/users/6907488/dozyaustin"}, "is_accepted": true, "score": 0, "last_activity_date": 1542240023, "creation_date": 1542240023, "answer_id": 53310571, "question_id": 53310496, "link": "https://stackoverflow.com/questions/53310496/python-mysql-connector-python-select-statement-with-function-defined-variable/53310571#53310571", "title": "Python + MySQL.Connector-Python: select_statement with function defined variables", "body": "<p>Python has the <code>.format()</code>syntax just for these kinds of situations - handling a dynamic value (such as <code>table</code> being inserted into a string (including SQL queries). </p>\n\n<p><code>query = \"SELECT * FROM {} WHERE id = %(id)s\".format(table)</code></p>\n\n<p>It's cleaner and more reliable in my daily use than the prior approaches such as yours. </p>\n"}], "owner": {"reputation": 15, "user_id": 8620294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4378bc9bcefed8d568fdc037c4b35815?s=128&d=identicon&r=PG", "display_name": "Avarthar", "link": "https://stackoverflow.com/users/8620294/avarthar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 1, "accepted_answer_id": 53310571, "answer_count": 1, "score": 0, "last_activity_date": 1542240023, "creation_date": 1542239470, "question_id": 53310496, "link": "https://stackoverflow.com/questions/53310496/python-mysql-connector-python-select-statement-with-function-defined-variable", "title": "Python + MySQL.Connector-Python: select_statement with function defined variables", "body": "<p>I have started a small project yesterday in python and finally managed to make a database selection function that works, but I was wondering if anybody could tell me if the way I wrote it is good or could eventually end up in multiple problems.</p>\n\n<p>The idea was to make a function that I could call to request/update a table where I would store players data for a small online game I want to create via Python, Pygame and MySQL.Connector-Python</p>\n\n<p>So, here is the function code (I have tried to keep it as clean as possible and as intuitive as I could with my current knowledge of Python which is limited currently as I just picked it back up this week.)</p>\n\n<p>The part I am not sure is the select_statement variable where I do not know for sure if the way I used concatenation is okay or if there is a way as simple and efficient.</p>\n\n<pre><code>def db_select(selection, table):\n    dbc = db_connect()\n\n    if dbc:\n        print(\"The SQL connection was successful.\")\n    else:\n        print(\"The SQL connection could not be established.\")\n\n    cur = dbc.cursor()\n\n    select_statement = \"SELECT * FROM \" + table + \" WHERE id = %(id)s\"\n\n    cur.execute(select_statement, {'id': selection})\n\n    print(cur.fetchone()[1])\n\n    dbc.close()\n    print(\"The SQL connection was closed successfully.\")\n</code></pre>\n"}, {"tags": ["python", "sql", "postgresql", "python-3.6", "tornado"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9610227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1705447206212746/picture?type=large", "display_name": "Jo&#227;o Pedro Gomes", "link": "https://stackoverflow.com/users/9610227/jo%c3%a3o-pedro-gomes"}, "edited": false, "score": 0, "creation_date": 1542288138, "post_id": 53311009, "comment_id": 93520859, "body": "The problem is that as I do this select it shows in the front end, if I give an upper or lower it will impact the way it is shown but thanks for participating"}], "tags": [], "owner": {"reputation": 120, "user_id": 7376349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06a17a4157895802f358fa36a85147af?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/7376349/ahmed"}, "is_accepted": false, "score": 1, "last_activity_date": 1542243844, "creation_date": 1542243844, "answer_id": 53311009, "question_id": 53310495, "link": "https://stackoverflow.com/questions/53310495/problem-with-a-query-duplicate-value-different-forms-sql-using-python/53311009#53311009", "title": "Problem with a query: duplicate value different forms (SQL) using Python", "body": "<p>Try to use the <code>upper</code> or <code>lower</code> function:</p>\n\n<pre><code>SELECT DISTINCT LOWER(txt_city)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9610227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1705447206212746/picture?type=large", "display_name": "Jo&#227;o Pedro Gomes", "link": "https://stackoverflow.com/users/9610227/jo%c3%a3o-pedro-gomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542243844, "creation_date": 1542239455, "last_edit_date": 1542239663, "question_id": 53310495, "link": "https://stackoverflow.com/questions/53310495/problem-with-a-query-duplicate-value-different-forms-sql-using-python", "title": "Problem with a query: duplicate value different forms (SQL) using Python", "body": "<p>I have a problem in my database because every day it does a new data load and ends up registering cities written in different ways, for example: \"San Francisco\" and \"SAN FRANCISCO\" which reflects in errors in the hour to show this data for the user to choose. Currently the query and the code that return this data are:</p>\n\n<pre><code>import tornado.web\nimport simplejson\nimport json\n\n\nfrom tornado import gen\n\n\nclass LocaisHelperHandler(tornado.web.RequestHandler):\n    @gen.coroutine\n    def get(self):\n        query = \"\"\"SELECT DISTINCT txt_city AS value, txt_state AS complement, 'city' AS type\n                    FROM imoveis.imoveis\n                    UNION\n                    SELECT DISTINCT txt_neighborhood AS value, CONCAT(txt_city,', ',txt_state AS complement,\n                    'txt_neighborhood' AS type\n                    FROM imoveis.imoveis WHERE txt_cidade \"\"\"\n\n        cursor = yield self.application.db.execute(query)\n        locals = cursor.fetchall()\n\n        response = simplejson.dumps(locals)\n        self.set_header(\"Content-Type\", 'application/json; charset=\"utf-8\"')\n        self.set_status(200)\n        self.write(response)\n        return\n</code></pre>\n\n<p>My question is how to unify this query so that it shows only \"San Francisco\" remembering that I do not show only the city, in this query I also get data like state and neighborhood.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 113, "user_id": 7135146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a76970eb72e8ff2eafd641503cd47ff7?s=128&d=identicon&r=PG&f=1", "display_name": "directive-41", "link": "https://stackoverflow.com/users/7135146/directive-41"}, "edited": false, "score": 0, "creation_date": 1542240485, "post_id": 53310469, "comment_id": 93502049, "body": "I don&#39;t think this is a duplicate based on the referenced existing answer. It doesn&#39;t address the core of OP&#39;s question."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 7135146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a76970eb72e8ff2eafd641503cd47ff7?s=128&d=identicon&r=PG&f=1", "display_name": "directive-41", "link": "https://stackoverflow.com/users/7135146/directive-41"}, "edited": false, "score": 0, "creation_date": 1542240560, "post_id": 53310614, "comment_id": 93502062, "body": "An alternative to the string slice is to split on &#39;.&#39; and retain the last element. That would capture any length extension."}], "tags": [], "owner": {"reputation": 113, "user_id": 7135146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a76970eb72e8ff2eafd641503cd47ff7?s=128&d=identicon&r=PG&f=1", "display_name": "directive-41", "link": "https://stackoverflow.com/users/7135146/directive-41"}, "is_accepted": true, "score": 0, "last_activity_date": 1542240296, "creation_date": 1542240296, "answer_id": 53310614, "question_id": 53310469, "link": "https://stackoverflow.com/questions/53310469/python-detecting-different-extensions-on-files/53310614#53310614", "title": "Python detecting different extensions on files", "body": "<p>Periodically read the files in the folder and compare to a set of files remaining after the last execution of your script. Use <code>os.listdir()</code> and <code>isfile()</code>.</p>\n\n<p>Read the extension of new files and copy them to a directory based on internal rules. This is a simple string slice, e.g., <code>filename[-3:]</code> for 3-character extensions.</p>\n\n<p>Remove moved files from your set of last results. Use <code>os.rename()</code> or <code>shutil.move()</code>.\nSleep until next execution is scheduled.</p>\n"}], "owner": {"reputation": 3, "user_id": 10654794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7e233be9df5b56122a1b1ab760f60c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ellipsis", "link": "https://stackoverflow.com/users/10654794/ellipsis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1542240257, "accepted_answer_id": 53310614, "answer_count": 1, "score": 0, "last_activity_date": 1542240296, "creation_date": 1542239305, "question_id": 53310469, "link": "https://stackoverflow.com/questions/53310469/python-detecting-different-extensions-on-files", "closed_reason": "Duplicate", "title": "Python detecting different extensions on files", "body": "<p>How do i make python listen for changes to a folder on my desktop, and every time a file was added, the program would read the file name and categorize it it based on the extension?</p>\n\n<p>This is a part of a more detailed program but I don't know how to get started on this part. This part of the program detects when the user drags a file into a folder on his/her desktop and then moves that file to a different location based on the file extension. </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "edited": false, "score": 0, "creation_date": 1542240117, "post_id": 53310442, "comment_id": 93501949, "body": "<code>df.groupby(&quot;Week&quot;)[(&quot;C&quot;, &quot;D&quot;)]</code> isn&#39;t what you want?"}, {"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "reply_to_user": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "edited": false, "score": 0, "creation_date": 1542240344, "post_id": 53310442, "comment_id": 93502011, "body": "@CJ59: I have a bigger data set where I want to drop about 4 things and keep about 700 others. Is there a way to get the compliment? But otherwise, yes."}, {"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "reply_to_user": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "edited": false, "score": 0, "creation_date": 1542240675, "post_id": 53310442, "comment_id": 93502079, "body": "@CJ59 I got it to work thanks for the help!"}, {"owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "edited": false, "score": 0, "creation_date": 1542240979, "post_id": 53310442, "comment_id": 93502160, "body": "NP, the answer below is how I&#39;d have done it exactly"}], "answers": [{"comments": [{"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1542240688, "post_id": 53310637, "comment_id": 93502082, "body": "This is a method that works, although I was pretty convinced that there was a non-loopy way of doing it. See my answer. Nonetheless, thanks for the input."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "reply_to_user": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1542240827, "post_id": 53310637, "comment_id": 93502118, "body": "I see, but note that the loop is not really part of the solution to get rid of some columns. The dropping is just done while using a loop which I assume you&#39;ll need anyway for processing your groups."}], "tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 0, "last_activity_date": 1542240498, "creation_date": 1542240498, "answer_id": 53310637, "question_id": 53310442, "link": "https://stackoverflow.com/questions/53310442/is-there-a-concise-way-of-removing-rows-in-every-group-of-a-groupby-object/53310637#53310637", "title": "Is there a concise way of removing rows in every group of a GroupBy object?", "body": "<p>Are you perhaps searching for </p>\n\n<pre><code>for name, group in df.groupby('Week'):\n    print(name, group.drop(columns=['Week', 'BloodType']))\n\n1           C         D\n0  0.496714 -0.469474\n2  0.647689 -0.463418\n4 -0.234153  0.241962\n6  1.579213 -1.724918\n7  0.767435 -0.562288\n2           C        D\n1 -0.138264  0.54256\n3  1.523030 -0.46573\n5 -0.234137 -1.91328\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "is_accepted": true, "score": 2, "last_activity_date": 1542240639, "creation_date": 1542240639, "answer_id": 53310651, "question_id": 53310442, "link": "https://stackoverflow.com/questions/53310442/is-there-a-concise-way-of-removing-rows-in-every-group-of-a-groupby-object/53310651#53310651", "title": "Is there a concise way of removing rows in every group of a GroupBy object?", "body": "<p>Based off of CJ59's answer I came up with this concise solution:</p>\n\n<pre><code>week_group = week_group[df.columns.difference([\"Week\", \"BloodType\"])]\n</code></pre>\n"}], "owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53310651, "answer_count": 2, "score": 0, "last_activity_date": 1542240639, "creation_date": 1542239133, "question_id": 53310442, "link": "https://stackoverflow.com/questions/53310442/is-there-a-concise-way-of-removing-rows-in-every-group-of-a-groupby-object", "title": "Is there a concise way of removing rows in every group of a GroupBy object?", "body": "<p>Consider the following data that closely resembles the <a href=\"http://pandas.pydata.org/pandas-docs/stable/groupby.html\" rel=\"nofollow noreferrer\">Pandas' Group By Tutorial</a>:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({'Week' : [1, 2, 1, 2,\n                                 1, 2, 1, 1],\n                           'BloodType' : ['A+', 'AB', 'AB', 'B',\n                                  'B', 'B+', 'AB', 'AB'],\n                           'C' : np.random.randn(8),\n                           'D' : np.random.randn(8)})\n</code></pre>\n\n<p>This produces a <code>DataFrame</code> that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uC6iz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uC6iz.png\" alt=\"Sample Data\"></a></p>\n\n<p>I want to group by the <code>\"Week\"</code> and then apply some operation to only the columns <code>C</code> and <code>D</code>. So I tried:</p>\n\n<pre><code>week_group = df.groupby('Week')\nweek_group.apply(lambda x: x.drop([\"BloodType\", \"Week\"], 1))\n</code></pre>\n\n<p>Which I originally interpreted as for every <code>DataFrame</code> drop the <code>\"BloodType\"</code> and <code>\"Week\"</code> column and give me the resulting group. However, it gives me:</p>\n\n<p><a href=\"https://i.stack.imgur.com/k0aHg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k0aHg.png\" alt=\"Sample apply\"></a></p>\n\n<p>However, I would have expected it to give me a <code>Group</code>, where each index was a <code>DataFrame</code> with only columns <code>C</code> and <code>D</code>. I did not expect a <code>DataFrame</code>. </p>\n\n<p>I tried switching out <code>apply</code> with <code>transform</code> and <code>agg</code> which gave:</p>\n\n<pre><code>ValueError: transform must return a scalar value for each group\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>ValueError: cannot copy sequence with size 2 to array axis with dimension 5\n</code></pre>\n\n<p>respectively. Is there a relatively simple transformation that can remove rows by name for each <code>DataFrame</code> in in a pandas <code>Group</code> and return the resulting <code>Group</code> object (or perform the operation in place)? </p>\n"}, {"tags": ["python", "pandas", "dataframe", "time-series"], "answers": [{"comments": [{"owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 1, "creation_date": 1542240075, "post_id": 53310433, "comment_id": 93501929, "body": "If the OP just wants to know if there are <i>any</i> missing records in the data, couldn&#39;t they just compare the number of expected records in the set for that time-frame with the actual number of records? Even if they don&#39;t know the time-frame offhand, couldn&#39;t we take a time difference between the first and last record to find that information?"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 3, "last_activity_date": 1542239678, "last_edit_date": 1542239678, "creation_date": 1542239099, "answer_id": 53310433, "question_id": 53310400, "link": "https://stackoverflow.com/questions/53310400/detecting-missing-timestamp/53310433#53310433", "title": "Detecting missing timestamp", "body": "<p>If your goal is to indicate <em>where</em> you are missing timestamps, you can convert to datetime and use <code>diff</code> to see the time difference between rows, then  use <code>&gt;'00:00:05'</code> to see if the gap is greater than 5 seconds:</p>\n\n<pre><code>&gt;&gt;&gt; pd.to_datetime(df['timestamp']).diff() &gt; '00:00:05'\n0     False\n1     False\n2     False\n3     False\n4     False\n5     False\n6     False\n7     False\n8      True\n9     False\n10    False\n11    False\n12    False\n13    False\nName: timestamp, dtype: bool\n</code></pre>\n\n<p>This indicates you are missing records above index <code>8</code></p>\n\n<p>If your goal is simply to see <em>whether</em> you are missing timestamps, use <code>any</code>:</p>\n\n<pre><code>&gt;&gt;&gt; (pd.to_datetime(df['timestamp']).diff() &gt; '00:00:05').any()\nTrue\n</code></pre>\n\n<p>Indicating that you are indeed missing timestamps somewhere</p>\n\n<p><strong>[EDIT]</strong> as per @JoranBeasley's suggestion, you can also use the mode of your time differences to infer the desired frequency:</p>\n\n<pre><code>d = pd.to_datetime(df['timestamp']).diff()\n\n&gt;&gt;&gt; (d &gt; d.mode()[0])\n0     False\n1     False\n2     False\n3     False\n4     False\n5     False\n6     False\n7     False\n8      True\n9     False\n10    False\n11    False\n12    False\n13    False\nName: timestamp, dtype: bool\n</code></pre>\n\n<p>Because <code>d.mode()[0]</code> will return the most common frequency observed:</p>\n\n<pre><code>&gt;&gt;&gt; d.mode()[0]\nTimedelta('0 days 00:00:05')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1542239114, "creation_date": 1542239114, "answer_id": 53310440, "question_id": 53310400, "link": "https://stackoverflow.com/questions/53310400/detecting-missing-timestamp/53310440#53310440", "title": "Detecting missing timestamp", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.diff.html\" rel=\"nofollow noreferrer\">.diff()</a> to calculate the difference between adjacent timestamps are greater than a certain threshold (e.g. 7 seconds).</p>\n"}], "owner": {"reputation": 1923, "user_id": 4240774, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2a49f40d7a889fe063ae99f601ce09b?s=128&d=identicon&r=PG&f=1", "display_name": "B_B", "link": "https://stackoverflow.com/users/4240774/b-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1542239678, "creation_date": 1542238814, "last_edit_date": 1542239085, "question_id": 53310400, "link": "https://stackoverflow.com/questions/53310400/detecting-missing-timestamp", "title": "Detecting missing timestamp", "body": "<p>I have following dataframe having a timestamp and value. Timestamp increases by 5 seconds and notice that there are missing records between 23:02:02 &amp; 23:06:32. </p>\n\n<p>Is there a simple way to detect if there are missing records between timestamps?</p>\n\n<pre><code>timestamp   value\n23:01:27    2915\n23:01:32    2916\n23:01:37    2919\n23:01:42    2924\n23:01:47    2926\n23:01:52    2928\n23:01:57    2933\n23:02:02    2937 # &lt;- missing timestamp\n23:06:32    3102 # &lt;- between these lines\n23:06:37    3109\n23:06:42    3114\n23:06:47    3122\n23:06:52    3126\n23:06:57    3129\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 1, "user_id": 8969265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656c2fda4c705c3637015ca75d3b64f?s=128&d=identicon&r=PG&f=1", "display_name": "user8969265", "link": "https://stackoverflow.com/users/8969265/user8969265"}, "edited": false, "score": 0, "creation_date": 1542313127, "post_id": 53310327, "comment_id": 93535000, "body": "Yeah, that question helped me a lot, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "is_accepted": false, "score": 5, "last_activity_date": 1542238657, "creation_date": 1542238657, "answer_id": 53310377, "question_id": 53310327, "link": "https://stackoverflow.com/questions/53310327/python-overlapping-regex-search/53310377#53310377", "title": "Python: Overlapping regex search", "body": "<p>You will want to use a capturing group with a lookahead <code>(?=(regex_here))</code>:</p>\n\n<pre><code>import re\nregx = re.compile(\"(?=(test))\")\nprint(regx.findall(\"testest\"))\n\n&gt;&gt;&gt; ['test', 'test']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1223, "user_id": 1939996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqnfN.jpg?s=128&g=1", "display_name": "soundstripe", "link": "https://stackoverflow.com/users/1939996/soundstripe"}, "is_accepted": false, "score": -1, "last_activity_date": 1542239818, "creation_date": 1542239818, "answer_id": 53310542, "question_id": 53310327, "link": "https://stackoverflow.com/questions/53310327/python-overlapping-regex-search/53310542#53310542", "title": "Python: Overlapping regex search", "body": "<p>Regex expressions are greedy. They consume as much of the target string as possible. Once consumed, a character is not examined again, so overlapping patterns are not found. </p>\n\n<p>To do this you need to use a feature of python regular expressions called a look ahead assertion. You will look for instances of the character <code>t</code> where it is followed by <code>est</code>. The look ahead does not consume parts of the string. </p>\n\n<pre><code>    import re\n\n    regx = re.compile('t(?=est)')\n\n    print([m.start() for m in regx.finditer('testest')])\n</code></pre>\n\n<p><code>[0,3]</code></p>\n\n<p>More details on this page: <a href=\"https://docs.python.org/3/howto/regex.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/howto/regex.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8969265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656c2fda4c705c3637015ca75d3b64f?s=128&d=identicon&r=PG&f=1", "display_name": "user8969265", "link": "https://stackoverflow.com/users/8969265/user8969265"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "closed_date": 1542239519, "answer_count": 2, "score": -1, "last_activity_date": 1542253657, "creation_date": 1542238280, "last_edit_date": 1542253657, "question_id": 53310327, "link": "https://stackoverflow.com/questions/53310327/python-overlapping-regex-search", "closed_reason": "Duplicate", "title": "Python: Overlapping regex search", "body": "<p>So if I create a program in python (3.7) that looks like this:</p>\n\n<pre><code>import re\nregx = re.compile(\"test\")\nprint(regx.findall(\"testest\"))\n</code></pre>\n\n<p>and run it, then I will get:</p>\n\n<pre><code>[\"test\"]\n</code></pre>\n\n<p>Even though there are two instances of \"test\" it's only showing me one which I think is because a letter from the first \"test\" is being used in the second \"test\". How can I make a program that will give me <code>[\"test\", \"test\"]</code> as a result instead?</p>\n"}, {"tags": ["python", "django", "caching", "scaling"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1542239191, "post_id": 53310308, "comment_id": 93501689, "body": "i dont understand what your question is... none of those alternatives would necessarily &quot;take the load off your server&quot; ... what do you even mean when you say &quot;take the load off my server&quot;?  why do you think that you will run into scaling issues using your current method?"}, {"owner": {"reputation": 69, "user_id": 10158233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86033600e08d4184ad8d2bb3b4c28647?s=128&d=identicon&r=PG&f=1", "display_name": "Ty C", "link": "https://stackoverflow.com/users/10158233/ty-c"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1542239945, "post_id": 53310308, "comment_id": 93501894, "body": "I am afraid concurrent requests and utilization of my database will cause it to delay significantly?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 2, "creation_date": 1542240091, "post_id": 53310308, "comment_id": 93501938, "body": "and is this just some gut feeling? or you have some measurments to back this up? also what does &quot;delay significantly&quot; mean? 1 second is a ton of time to a PC ... but its pretty inconsequential to a human.  a pretty smart guy once said &quot;Premature optimization is the root of all evil&quot;"}, {"owner": {"reputation": 620, "user_id": 4104548, "user_type": "registered", "profile_image": "https://graph.facebook.com/673666049/picture?type=large", "display_name": "Asher", "link": "https://stackoverflow.com/users/4104548/asher"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1542242604, "post_id": 53310308, "comment_id": 93502578, "body": "I second @JoranBeasley. My experience of Django and Postgressql databases are that they are fast and robust. If you haven&#39;t actually experienced any delay in production then I wouldn&#39;t be concerned."}], "owner": {"reputation": 69, "user_id": 10158233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86033600e08d4184ad8d2bb3b4c28647?s=128&d=identicon&r=PG&f=1", "display_name": "Ty C", "link": "https://stackoverflow.com/users/10158233/ty-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542238124, "creation_date": 1542238124, "question_id": 53310308, "link": "https://stackoverflow.com/questions/53310308/real-time-ranking-django-scalability-issue", "title": "Real time ranking django scalability issue", "body": "<p>I am making a real time sports ranking application using django and Postgressql and my performance time seems to be alright as of one user. However, I use save signals to update related models entirely without any cache. I was wondering how I could maintain the real time ranking and updating aspect but take the load off of my server and database. I have looked into django-channels, PUSHER, and redis but am unsure of where to go. Any help is appreciated.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 1, "creation_date": 1542238514, "post_id": 53310346, "comment_id": 93501492, "body": "should be <code>another[-3:]</code>. +1"}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "reply_to_user": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1542239047, "post_id": 53310346, "comment_id": 93501650, "body": "@sacul thank you! This was the leftover of my test if it&#39;s working as expected... :)"}], "tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": true, "score": 1, "last_activity_date": 1542238989, "last_edit_date": 1542238989, "creation_date": 1542238421, "answer_id": 53310346, "question_id": 53310276, "link": "https://stackoverflow.com/questions/53310276/check-if-each-element-in-the-last-few-positions-of-a-list-are-in-another-list/53310346#53310346", "title": "Check if each element in the last few positions of a list are in another list", "body": "<p>You can use <code>sets</code>, which allow testing for intersection:</p>\n\n<pre><code>if set(pile).intersection(set(another[-3:])):\n    print(\"yes\")\nelse:\n    print(\"no\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 2951469, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/jCjWX.png?s=128&g=1", "display_name": "Rachit Bhargava", "link": "https://stackoverflow.com/users/2951469/rachit-bhargava"}, "is_accepted": false, "score": 0, "last_activity_date": 1542238587, "creation_date": 1542238587, "answer_id": 53310367, "question_id": 53310276, "link": "https://stackoverflow.com/questions/53310276/check-if-each-element-in-the-last-few-positions-of-a-list-are-in-another-list/53310367#53310367", "title": "Check if each element in the last few positions of a list are in another list", "body": "<p>Well, I would recommend going ahead with slicing off the last three elements of the list and checking them in pile. That's one of the simplest ways to solve this problem and a good approach to go ahead with (while you are still learning how to play with Python).</p>\n\n<p>Here's what I might do.</p>\n\n<pre><code>checker = True  ## variable to keep track of whether or not was 'yes' printed and prevent re-printing of 'yes' in cases when multiple elements satisfy the condition\n\nfor num in another[-4:]:\n    if num in pile and checker:\n        print ('yes')\n        checker = False\n\nif checker:\n    print ('no')\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10586029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ec6044b5c3aa8a8cabb76c5948e0372?s=128&d=identicon&r=PG&f=1", "display_name": "datguywelbs123", "link": "https://stackoverflow.com/users/10586029/datguywelbs123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 53310346, "answer_count": 2, "score": 2, "last_activity_date": 1542238989, "creation_date": 1542237905, "last_edit_date": 1542238102, "question_id": 53310276, "link": "https://stackoverflow.com/questions/53310276/check-if-each-element-in-the-last-few-positions-of-a-list-are-in-another-list", "title": "Check if each element in the last few positions of a list are in another list", "body": "<p>I have looked around and not found a question asking about the last items in a list rather than the whole list.\nI am trying to do something if one of the last items in a list are in another list.</p>\n\n<pre><code>pile = [2,6,9]\n\nanother = [1,5,6,5,4,1,6,7]\n\nif another[-1:-4:-1] in pile:  #if one of the last 3 items in 'another' are in the list 'pile' then print yes\n\n    print(\"yes\")\nelse:\n\n    print(\"no\")\n</code></pre>\n\n<p>I tried to use slicing but I don't think its the right way to do it, I'm new to this btw.\n I'm trying to make the program get the last 3 items in the list 'another', and if one of the last 3 elements is in the other list 'pile' print yes.\nIn this case, 6 is within 'another[-1:-4:-1]' and in 'pile', but I don't know how to write it in code so that it works</p>\n\n<p>I used this basic example to try and explain it, but in the program that I am writing, new items are appended onto the list 'another' so the indexes of the last items will change. I only need to check the last items and not the rest of the items.</p>\n"}, {"tags": ["python", "python-3.x", "ibm-watson", "tone-analyzer"], "comments": [{"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 3, "creation_date": 1542238277, "post_id": 53310264, "comment_id": 93501416, "body": "What&#39;s your question?"}], "answers": [{"tags": [], "owner": {"reputation": 2451, "user_id": 1432067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FRo8J.jpg?s=128&g=1", "display_name": "Vidyasagar Machupalli", "link": "https://stackoverflow.com/users/1432067/vidyasagar-machupalli"}, "is_accepted": true, "score": 1, "last_activity_date": 1542257941, "last_edit_date": 1542257941, "creation_date": 1542251353, "answer_id": 53311853, "question_id": 53310264, "link": "https://stackoverflow.com/questions/53310264/extracting-data-from-list-of-dictionaries-from-tone-analysers-json-response/53311853#53311853", "title": "Extracting data from list of dictionaries from Tone Analyser&#39;s JSON response", "body": "<p>First of all, as your JSON is not well-formed, I am using the JSON from the Tone analyzer API reference available <a href=\"https://console.bluemix.net/apidocs/tone-analyzer\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>Using the JSON from the API reference and Pandas json_normalize, here's the code I came up with </p>\n\n<pre><code>from pandas.io.json import json_normalize\n\njsonfile = {\n  \"document_tone\": {\n    \"tones\": [\n      {\n        \"score\": 0.6165,\n        \"tone_id\": \"sadness\",\n        \"tone_name\": \"Sadness\"\n      },\n      {\n        \"score\": 0.829888,\n        \"tone_id\": \"analytical\",\n        \"tone_name\": \"Analytical\"\n      }\n    ]\n  },\n  \"sentences_tone\": [\n    {\n      \"sentence_id\": 0,\n      \"text\": \"Team, I know that times are tough!\",\n      \"tones\": [\n        {\n          \"score\": 0.801827,\n          \"tone_id\": \"analytical\",\n          \"tone_name\": \"Analytical\"\n        }\n      ]\n    },\n    {\n      \"sentence_id\": 1,\n      \"text\": \"Product sales have been disappointing for the past three quarters.\",\n      \"tones\": [\n        {\n          \"score\": 0.771241,\n          \"tone_id\": \"sadness\",\n          \"tone_name\": \"Sadness\"\n        },\n        {\n          \"score\": 0.687768,\n          \"tone_id\": \"analytical\",\n          \"tone_name\": \"Analytical\"\n        }\n      ]\n    },\n    {\n      \"sentence_id\": 2,\n      \"text\": \"We have a competitive product, but we need to do a better job of selling it!\",\n      \"tones\": [\n        {\n          \"score\": 0.506763,\n          \"tone_id\": \"analytical\",\n          \"tone_name\": \"Analytical\"\n        }\n      ]\n    }\n  ]\n}\n\nmydata = json_normalize(jsonfile['sentences_tone'])\nmydata.head(3)\nprint(mydata)\n\ntones_data = json_normalize(data=jsonfile['sentences_tone'], record_path='tones')\ntones_data.head(3)\nprint(tones_data)\n</code></pre>\n\n<p>The output dataframe will be </p>\n\n<pre><code>   sentence_id                        ...                                            tones\n0            0                        ...[{'score': 0.801827, 'tone_id': 'analytical', ...\n1            1                        ...[{'score': 0.771241, 'tone_id': 'sadness', 'to...\n2            2                        ...[{'score': 0.506763, 'tone_id': 'analytical', ...\n\n[3 rows x 3 columns]\n      score     tone_id   tone_name\n0  0.801827  analytical  Analytical\n1  0.771241     sadness     Sadness\n2  0.687768  analytical  Analytical\n3  0.506763  analytical  Analytical\n</code></pre>\n\n<p>Also, I have created REPL for you to change the input and run the code on the browser - <a href=\"https://repl.it/@aficionado/DarkturquoiseUnnaturalDistributeddatabase\" rel=\"nofollow noreferrer\">https://repl.it/@aficionado/DarkturquoiseUnnaturalDistributeddatabase</a></p>\n\n<p>Refer this Kaggle link to understand more about <a href=\"https://www.kaggle.com/jboysen/quick-tutorial-flatten-nested-json-in-pandas/notebook\" rel=\"nofollow noreferrer\">flattening JSON in Python using Pandas</a></p>\n"}], "owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "closed_date": 1542293198, "accepted_answer_id": 53311853, "answer_count": 1, "score": 0, "last_activity_date": 1542261172, "creation_date": 1542237808, "last_edit_date": 1542261172, "question_id": 53310264, "link": "https://stackoverflow.com/questions/53310264/extracting-data-from-list-of-dictionaries-from-tone-analysers-json-response", "closed_reason": "Duplicate", "title": "Extracting data from list of dictionaries from Tone Analyser&#39;s JSON response", "body": "<p>I am analysing text using IBM Watson's Tone analyser and I am trying to extract all information relating to the sentence tone (e.g; <code>sentence_id</code>, <code>text</code>, <code>tones</code>, <code>tone_id</code>, <code>tone_name</code>, <code>score</code>) and add that to a dataframe (with columns; <code>sentence_id</code>, <code>text</code>, <code>tones</code>, <code>tone_id</code>, <code>score</code> and <code>tone_name</code>). This is a sample of the output I have:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&gt; [{'document_tone': {'tones': [{'score': 0.551743,\r\n     'tone_id': 'analytical',\r\n     'tone_name': 'Analytical'}]},\r\n  'sentences_tone': [{'sentence_id': 0,\r\n    'text': '@jozee25 race is the basis on which quotas are implemented.',\r\n    'tones': []},\r\n   {'sentence_id': 1, 'text': 'helloooooo', 'tones': []}]},\r\n {'document_tone': {'tones': []}},\r\n {'document_tone': {'tones': [{'score': 0.802429,\r\n     'tone_id': 'analytical',\r\n     'tone_name': 'Analytical'},\r\n    {'score': 0.60167, 'tone_id': 'confident', 'tone_name': 'Confident'}]},\r\n  'sentences_tone': [{'sentence_id': 0,\r\n    'text': '@growawaysa @cricketandre i have the answer on top yard from dpw:it is not currently \"surplus to govt requirements\".it is still being used for garaging until a new facility is ready in maitland.the',\r\n    'tones': [{'score': 0.631014,\r\n      'tone_id': 'analytical',\r\n      'tone_name': 'Analytical'}]},\r\n   {'sentence_id': 1,\r\n    'text': 'cost of the housing options will of course depend on prospects for cross subsidisation.',\r\n    'tones': [{'score': 0.589295,\r\n      'tone_id': 'analytical',\r\n      'tone_name': 'Analytical'},\r\n     {'score': 0.509368, 'tone_id': 'confident', 'tone_name': 'Confident'}]}]},\r\n {'document_tone': {'tones': [{'score': 0.58393,\r\n     'tone_id': 'tentative',\r\n     'tone_name': 'Tentative'},\r\n    {'score': 0.641954, 'tone_id': 'analytical', 'tone_name': 'Analytical'}]}},\r\n {'document_tone': {'tones': [{'score': 0.817073,\r\n     'tone_id': 'joy',\r\n     'tone_name': 'Joy'},\r\n    {'score': 0.920556, 'tone_id': 'analytical', 'tone_name': 'Analytical'},\r\n    {'score': 0.808202, 'tone_id': 'tentative', 'tone_name': 'Tentative'}]},\r\n  'sentences_tone': [{'sentence_id': 0,\r\n    'text': 'thanks @khayadlangaand colleagues for the fascinating tour yesterday.really',\r\n    'tones': [{'score': 0.771305, 'tone_id': 'joy', 'tone_name': 'Joy'},\r\n     {'score': 0.724236, 'tone_id': 'analytical', 'tone_name': 'Analytical'}]},\r\n   {'sentence_id': 1,\r\n    'text': 'eyeopening and i learnt a lot.',\r\n    'tones': [{'score': 0.572756, 'tone_id': 'joy', 'tone_name': 'Joy'},\r\n     {'score': 0.842108, 'tone_id': 'analytical', 'tone_name': 'Analytical'},\r\n     {'score': 0.75152, 'tone_id': 'tentative', 'tone_name': 'Tentative'}]}]},</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This is the code I have wrote to get this output:</p>\n\n<pre><code>result =[]\nfor i in helen['Tweets']:\n   tone_analysis = tone_analyzer.tone(\n       {'text': i},\n       'application/json'\n   ).get_result()\n   result.append(tone_analysis)\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot", "curve"], "answers": [{"comments": [{"owner": {"reputation": 6719, "user_id": 2945357, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd030641417e32d532056ed59e3340e3?s=128&d=identicon&r=PG", "display_name": "Andreas K.", "link": "https://stackoverflow.com/users/2945357/andreas-k"}, "edited": false, "score": 0, "creation_date": 1542268634, "post_id": 53310548, "comment_id": 93509591, "body": "Thanks, I didn&#39;t know that. However setting antialiasing to False makes the curves look pixelated, so this solves one problem but creates another one. It seems that the best option is to increase the width of the second curve and keep the antialiasing."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1542239863, "creation_date": 1542239863, "answer_id": 53310548, "question_id": 53310246, "link": "https://stackoverflow.com/questions/53310246/how-to-deal-with-the-pixelization-of-overlapping-curves-in-matplotlib/53310548#53310548", "title": "How to deal with the &quot;pixelization&quot; of overlapping curves in Matplotlib", "body": "<p>The effect you describe is called antialiasing. It's usually wanted to obtain smoother images. You can turn antialiasing off on a per artist basis. (However, <a href=\"https://github.com/matplotlib/matplotlib/issues/10825\" rel=\"nofollow noreferrer\">not all</a> artists really obey to the setting in every backend.)</p>\n\n<p>For the <code>plot</code> this could look like</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.linspace(0, np.pi, 100)\ny1 = np.sin(x)\ny2 = np.zeros(x.shape) \ny2[:51] = np.sin(x[:51])\ny2[51:] = 2 - np.sin(x[51:])\n\nfig, axes = plt.subplots(1,2, figsize=(6,3))\nfor aa, ax in zip([True, False], axes.flat):\n    ax.plot(x, y1, lw=4, color='k', antialiased=aa)\n    ax.plot(x, y2, lw=4, color='yellow', antialiased=aa)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/45Get.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/45Get.png\" alt=\"enter image description here\"></a></p>\n\n<p>As consequence when antialiasing is turned off, a pixel is either occupied by the respective color of the line, or not. </p>\n"}], "owner": {"reputation": 6719, "user_id": 2945357, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd030641417e32d532056ed59e3340e3?s=128&d=identicon&r=PG", "display_name": "Andreas K.", "link": "https://stackoverflow.com/users/2945357/andreas-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 53310548, "answer_count": 1, "score": 0, "last_activity_date": 1542270951, "creation_date": 1542237690, "last_edit_date": 1542270951, "question_id": 53310246, "link": "https://stackoverflow.com/questions/53310246/how-to-deal-with-the-pixelization-of-overlapping-curves-in-matplotlib", "title": "How to deal with the &quot;pixelization&quot; of overlapping curves in Matplotlib", "body": "<p>I have the following problem: when I plot two or more curves (of the same linewidth) they look \"pixelized\" at the regions where they overlap.\nHere's an example:</p>\n\n<pre><code>x = np.linspace(0, np.pi, 100)\ny1 = np.sin(x)\ny2 = np.zeros(x.shape) \ny2[:51] = np.sin(x[:51])\ny2[51:] = 2 - np.sin(x[51:])\n\nfig, ax = plt.subplots(1, 1, figsize=(3,3))\nax.plot(x, y1, lw=4, color='k')\nax.plot(x, y2, lw=4, color='yellow')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jvVSO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jvVSO.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>To my understanding, this is happening because the pixels at the curve edges have some level of transparency which makes them more smooth-looking. However, there is this side effect in the case of overlapping curves: the edge-pixels of the first curve are visible through the edge-pixels of the second curve. </p>\n\n<p>How to deal with this side effect? One idea is to increase the width of the last curve, however this solution is not ideal for me because I would like the curves to have exactly the same width at the regions where they do not overlap. </p>\n"}, {"tags": ["python", "numpy", "matplotlib", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 2306, "user_id": 3991649, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/nwb21.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3991649/tim"}, "is_accepted": false, "score": -1, "last_activity_date": 1542237972, "creation_date": 1542237972, "answer_id": 53310286, "question_id": 53310228, "link": "https://stackoverflow.com/questions/53310228/how-can-i-make-seaborn-distribution-subplots-in-a-loop/53310286#53310286", "title": "How can I make seaborn distribution subplots in a loop?", "body": "<p>Specify which subplot each <code>distplot</code> should fall on:</p>\n\n<pre><code>f = plt.figure()\nfor i in range(10):\n    f.add_subplot(4, 3, i+1)\n    sns.distplot(data[i,0,0,0], hist=False)\nplt.show()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 824, "user_id": 6113825, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ba4ded202ecfc8c73ff8be3d53dc6d19?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Goal", "link": "https://stackoverflow.com/users/6113825/jason-goal"}, "edited": false, "score": 0, "creation_date": 1574187921, "post_id": 53310484, "comment_id": 104139637, "body": "This way, how can one manage to further modify the subplot like adding the title or axis label, specify sticks etc., etc."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 13, "last_activity_date": 1542239419, "creation_date": 1542239419, "answer_id": 53310484, "question_id": 53310228, "link": "https://stackoverflow.com/questions/53310228/how-can-i-make-seaborn-distribution-subplots-in-a-loop/53310484#53310484", "title": "How can I make seaborn distribution subplots in a loop?", "body": "<p>You would want to use the <code>ax</code> argument of the seaborn <code>distplot</code> function to supply an existing axes to it. Looping can be simplified by looping over the flattened array of axes. </p>\n\n<pre><code>fig, axes = plt.subplots(ncols=4, nrows=3)\n\nfor i, ax in zip(range(10), axes.flat):\n    sns.distplot(data[i,0,0,0], hist=False, ax=ax)\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 4068, "user_id": 3942806, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1193e4d5d50054c8385084accc4bd6c8?s=128&d=identicon&r=PG&f=1", "display_name": "maximusdooku", "link": "https://stackoverflow.com/users/3942806/maximusdooku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10984, "favorite_count": 2, "accepted_answer_id": 53310484, "answer_count": 2, "score": 8, "last_activity_date": 1542239419, "creation_date": 1542237599, "question_id": 53310228, "link": "https://stackoverflow.com/questions/53310228/how-can-i-make-seaborn-distribution-subplots-in-a-loop", "title": "How can I make seaborn distribution subplots in a loop?", "body": "<p>I have a 5D array called <code>data</code></p>\n\n<pre><code>for i in range(10):\n     sns.distplot(data[i,0,0,0], hist=False)\n</code></pre>\n\n<p>But I want to make them inside subplots instead. How can I do it?</p>\n\n<p>Tried this:</p>\n\n<pre><code>plt.rc('figure', figsize=(4, 4))  \nfig=plt.figure()\nfig, ax = plt.subplots(ncols=4, nrows=3)\n\nfor i in range(10):\n    ax[i].sns.distplot(data[i,0,0,0], hist=False)\nplt.show()\n</code></pre>\n\n<p>This obviously doesn't work.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542242053, "post_id": 53310226, "comment_id": 93502439, "body": "I think you just need to do some timings on realistic data.  We can make guesses from experience, but they&#39;ll be just that - guesses."}], "answers": [{"tags": [], "owner": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "is_accepted": false, "score": 1, "last_activity_date": 1542300413, "last_edit_date": 1542300413, "creation_date": 1542294802, "answer_id": 53322477, "question_id": 53310226, "link": "https://stackoverflow.com/questions/53310226/python-numpy-structured-arrays-vs-same-datatype-array-operation-cost/53322477#53322477", "title": "Python Numpy: Structured Arrays vs Same Datatype Array Operation Cost", "body": "<p>I did some performance testing on several array types. My test results are available as an answer at this topic:<br>\n<a href=\"https://stackoverflow.com/questions/53127409\">is ndarray faster than recarray access?</a><br>\n(Ignore the downvote on my question. Apparently someone didn't like how I asked it.)  </p>\n\n<p>The short version: extracting data from a masked array was much slower than the same operation on a ndarray. Access times for a structured array and a recarray were slower than a ndarray, but all were fractions of a second. Clearly there is  overhead when using masked arrays (maybe similar to a record array?). There is a good discussion of the differences between array types here:<br>\n<a href=\"http://numpy-discussion.10968.n7.nabble.com/structured-arrays-recarrays-and-record-arrays-td39549.html\" rel=\"nofollow noreferrer\">numpy-discussion:structured-arrays-recarrays-and-record-arrays</a></p>\n\n<p>There are other limitations. For example, many (most/all) of the numpy matrix and math operations are limited to ndarrays (require same data type). I don't think these apply to your case, since you are using the structured array like a table. </p>\n"}], "owner": {"reputation": 4501, "user_id": 5252492, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/QYvFc.png?s=128&g=1", "display_name": "azazelspeaks", "link": "https://stackoverflow.com/users/5252492/azazelspeaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542300413, "creation_date": 1542237592, "last_edit_date": 1542239257, "question_id": 53310226, "link": "https://stackoverflow.com/questions/53310226/python-numpy-structured-arrays-vs-same-datatype-array-operation-cost", "title": "Python Numpy: Structured Arrays vs Same Datatype Array Operation Cost", "body": "<p>I want to create an array of arrays of the structure:</p>\n\n<pre><code>[line_number,count,temperature,humidity,sensor1_on,sensor2_on]\n</code></pre>\n\n<p>Where the first two need to be <code>uint32</code>, while temperature and humidity can be <code>uint8</code>, and the <code>sensor_on</code>s can be of type <code>bool</code>.</p>\n\n<p>I later need to sort the 2d array based on the combination of <code>line_number</code> and then count. I also need to perform averages and other statistical computation on lists of all the temperature and humidity data (separately).</p>\n\n<p>I found structured arrays which are convenient for data storage and retrieval:  </p>\n\n<pre><code>np_data=np.zeros([num_lines],\n                          dtype='uint32,'#Line No\n                                'uint32,'# Count\n                                'uint8,' #TEMP\n                                'uint8,' #HUMID\n                                'bool,' #S1 On\n                                'bool'#S2 On\n                          )\n</code></pre>\n\n<p>for this vs</p>\n\n<pre><code>np_data=np.zeros([num_lines,5],dtype='uint32') \n# I would pack my bools into the last uint32 and then unpack later \n# but it seems like a waste of space\n</code></pre>\n\n<p>Do I lose anything (numpy processing power, vectorized processing, sorting speed, etc) by creating the structured array vs the one with all the same data types? Is there another solution one would recommend?</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542238124, "post_id": 53310218, "comment_id": 93501372, "body": "Can you make this reproducible by defining the dataframe inside your code and stating which version of matplotlib and pandas you are using? See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 231, "user_id": 9588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf790714b8407e3494ca2c3f2058703?s=128&d=identicon&r=PG&f=1", "display_name": "user9588528", "link": "https://stackoverflow.com/users/9588528/user9588528"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542249049, "post_id": 53310218, "comment_id": 93503963, "body": "Edited post to include this"}], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 9588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf790714b8407e3494ca2c3f2058703?s=128&d=identicon&r=PG&f=1", "display_name": "user9588528", "link": "https://stackoverflow.com/users/9588528/user9588528"}, "edited": false, "score": 0, "creation_date": 1542256504, "post_id": 53311839, "comment_id": 93505491, "body": "Thank you, this works.  Would you please explain why would one rather use tick_params() or setp()?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 231, "user_id": 9588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf790714b8407e3494ca2c3f2058703?s=128&d=identicon&r=PG&f=1", "display_name": "user9588528", "link": "https://stackoverflow.com/users/9588528/user9588528"}, "edited": false, "score": 1, "creation_date": 1542288342, "post_id": 53311839, "comment_id": 93520946, "body": "If you set the fontsize, both are equally well suited. The difference is that you cannot set <i>every</i> property via <code>tick_params</code>. So for example, if you want to change the <code>rotation_mode</code> of a label, you cannot use <code>tick_params</code>. If then you want to change the fontsize and the rotation mode, using a single line with <code>setp</code> is preferable. Another argument: When you haven&#39;t imported pyplot, you won&#39;t do that exactly for use of <code>setp</code>. So in that case you can use <code>tick_params</code> or the longer variant of using a loop."}, {"owner": {"reputation": 664, "user_id": 7515189, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5KfF.jpg?s=128&g=1", "display_name": "Murtaza Haji", "link": "https://stackoverflow.com/users/7515189/murtaza-haji"}, "edited": false, "score": 0, "creation_date": 1600211501, "post_id": 53311839, "comment_id": 113014886, "body": "i tried all these methods still not able to set my ticks fontsize. Please someone help me. <a href=\"https://ibb.co/HTKC9nM\" rel=\"nofollow noreferrer\">ibb.co/HTKC9nM</a>"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1542251191, "creation_date": 1542251191, "answer_id": 53311839, "question_id": 53310218, "link": "https://stackoverflow.com/questions/53310218/matplotlib-y-axis-labels-disappearing-with-fontsize-change/53311839#53311839", "title": "matplotlib y axis labels disappearing with fontsize change", "body": "<p>The problem you face here is that the ticklabels are not actually defined before the figure is drawn. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib.ticker import MaxNLocator\n\nfig, ax = plt.subplots()\nax.plot([1,3,4,2])\nax.xaxis.set_major_locator(MaxNLocator(integer=True))\nax.set_xticklabels(ax.get_xticklabels(),fontsize=12)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5ShJb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ShJb.png\" alt=\"enter image description here\"></a></p>\n\n<p>You may draw the figure, before accessing those labels</p>\n\n<pre><code>fig, ax = plt.subplots()\nax.plot([1,3,4,2])\nax.xaxis.set_major_locator(MaxNLocator(integer=True))\n\nfig.canvas.draw()\nax.set_xticklabels(ax.get_xticklabels(),fontsize=12)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/YcQMk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YcQMk.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, in order to change the fontsize of the ticklabels, one would rather use  </p>\n\n<pre><code>ax.tick_params(axis=\"x\", labelsize=12)\n</code></pre>\n\n<p>or set the property to the labels, without actually setting the labels' content. E.g. via <code>setp</code></p>\n\n<pre><code>plt.setp(ax.get_xticklabels(), fontsize=12)\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 9588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf790714b8407e3494ca2c3f2058703?s=128&d=identicon&r=PG&f=1", "display_name": "user9588528", "link": "https://stackoverflow.com/users/9588528/user9588528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 53311839, "answer_count": 1, "score": 1, "last_activity_date": 1542251191, "creation_date": 1542237547, "last_edit_date": 1542247302, "question_id": 53310218, "link": "https://stackoverflow.com/questions/53310218/matplotlib-y-axis-labels-disappearing-with-fontsize-change", "title": "matplotlib y axis labels disappearing with fontsize change", "body": "<p>I have the following code to plot the contents of a dataframe.</p>\n\n<p>Using pandas and matplotlib:</p>\n\n<pre><code>thedata = {'2013':[0.0,0.0]\n          ,'2014':[0.0,0.0]\n          ,'2015':[0.0,0.0]\n          ,'2016':[1,0.0]\n          ,'2017':[0.0,0.0]\n          ,'2018':[1,0.0]}\n\nmy_df = pd.DataFrame(thedata, index=['Green cars','Red cars'])\n\n    plt.figure(figsize=(7,3))\n    my_ax = plt.gca()\n    my_ax.clear()\n    my_ax.yaxis.set_major_locator(MaxNLocator(integer=True))\n\n    my_df.transpose().plot(kind='bar'\n                , stacked=True  \n                , ax=my_ax\n                ).grid(True,'major','y')\n\n    my_ax.legend(loc=9, bbox_to_anchor=(0.5, -0.1), frameon=False, ncol=2, fontsize=12 )\n    plt.title('All the cars', fontsize = 12 )\n    my_ax.set_xticklabels(my_ax.get_xticklabels(),rotation='horizontal', fontsize=12)\n#     my_ax.set_yticklabels(my_ax.get_yticklabels(),fontsize=12)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vt6h6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vt6h6.jpg\" alt=\"The dataframe and the output\"></a></p>\n\n<p>The last line is commented out in order to get the output displayed.  I want to increase the font size of the y axis labels to be the same as the x, but when i un-comment that line and run it, the y axis labels just disappear and nothing is displayed there.</p>\n\n<p>Why is this happening and how do I fix it?</p>\n\n<p>Edit: - create the dataframe; pandas 0.23.0, matplotlib 2.2.2</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5", "qlabel"], "answers": [{"tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1542238774, "creation_date": 1542238774, "answer_id": 53310394, "question_id": 53310192, "link": "https://stackoverflow.com/questions/53310192/pyqt5-qlabel-overlay-eachother-even-after-using-grid/53310394#53310394", "title": "PyQT5 : Qlabel overlay eachother even after using grid", "body": "<p>void <code>QMainWindow::setCentralWidget(QWidget *widget)</code></p>\n\n<p>Sets the given widget to be the main window's central widget.</p>\n\n<p>Note: QMainWindow takes ownership of the widget pointer and deletes it at the appropriate time.</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import (QMainWindow, QWidget, QLabel, QApplication, QToolTip, QPushButton, \n                             QMessageBox, QGridLayout, QHBoxLayout, QVBoxLayout, QTextEdit)\nfrom PyQt5.QtGui  import QIcon, QFont\nfrom PyQt5.QtCore import Qt, QTime\n\nclass BgColorExperiment(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        # moves the widget to a position on the screen at x=300, y=300 coordinates\n        self.left = 300\n        self.top  = 300\n        # resizes the widget (250px wide and 150px high) \n        self.width  = 450\n        self.height = 450\n        # title of Widget shown in the titlebar\n        self.title ='Suivi des BDs cr\u00e9es'\n        # sets the application icon\n        self.setWindowIcon(QIcon('suivibdicon.png'))\n        # Set the status bar\n        self.statusBar().showMessage('Engineered by idiots')\n        # parent\n        self.init_ui()\n\n    def init_ui(self):\n        # Artiste\n        self.setObjectName('MainWidget')\n        self.setStyleSheet(\"\"\"\n            #MainWidget {\n                background-color: #333;\n                }\n            .QLabel{\n                color: green;\n                background-color: #333;\n                selection-color: yellow;\n                selection-background-color: blue;\n                font-family : Consolas;\n                font-size: 10pt;\n                }\n            .QToolTip {\n                background-color: #333;\n                color: #fff;\n                border: red solid 1px;\n                opacity: 100;\n                font-family : Consolas;\n                font-size: 10pt;\n                }\n            .QMessageBox {\n                background-color: #333;\n                }\n            QStatusBar {\n                color: green;\n                font-family : Consolas;\n                font-size: 10pt;\n                }\n        \"\"\")\n        # violence\n        self.label  = QLabel('position of the mouse', self)\n        self.label1 = QLabel('some words \u4e00\u4e9b\u5355\u8bcd', self)\n        self.label2 = QLabel('digital clock', self)\n\n        centralWidget = QWidget()                         # +++++\n        self.setCentralWidget(centralWidget)              # +++++\n\n        grid = QGridLayout(centralWidget)                 # +++++ centralWidget\n\n        # just blablabla\n        grid.addWidget(self.label1, 0, 0)\n\n        # Digital Clock\n        grid.addWidget(self.label2, 1, 0)\n\n        # Mouse tracking\n        x, y = 0, 0\n        self.text = \"x: {0}, y: {1}\".format(x, y)\n        self.label = QLabel(self.text, self) # display the x and y coordinates of a mouse pointer in a label widget.\n        grid.addWidget(self.label, 2, 0)\n        self.setMouseTracking(True)\n\n#        # push button widget and set a tooltip (useless)\n#        #btn = QPushButton('Button', self)\n#        #btn.setToolTip('This is a &lt;b&gt;QPushButton&lt;/b&gt; widget for refresh')\n#        #btn.resize(btn.sizeHint())\n#        #hbox.addWidget(btn)\n\n        # set the grid\n#        self.setLayout(grid)                                          # -----\n        # set the window size using the setGeometry\n        self.setGeometry(self.left, self.top, self.width, self.height)\n        # set the window title\n        self.setWindowTitle(self.title)\n        self.show()                                 # displays the widget on the screen\n\n    def closeEvent(self, event): # Define behavior when clicking on the x button on the title bar\n        reply = QMessageBox.question(self, 'Message',  \"Are you sure to quit?\", QMessageBox.Yes | QMessageBox.No, QMessageBox.No)\n        if reply == QMessageBox.Yes:\n            event.accept()\n        else:\n            event.ignore()\n\n    def mouseMoveEvent(self, e): # for following the position of the mouse\n        x, y = e.x(), e.y()\n        text = \"x: {0}, y: {1}\".format(x, y)\n        self.label.setText(text)\n\n    def showTime(self): # for printing the time (format = 'hh:mm:ss')\n        time = QTime.currentTime()\n        text = time.toString('hh:mm:ss')\n        self.label2.setText(text)\n\nif __name__ == '__main__':\n    APP = QApplication(sys.argv)\n    EXP = BgColorExperiment()\n    sys.exit(APP.exec_()) # mainloop of the application\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9BcqO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9BcqO.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 9876578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUY4B.jpg?s=128&g=1", "display_name": "SemsemT", "link": "https://stackoverflow.com/users/9876578/semsemt"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "closed_date": 1542243440, "accepted_answer_id": 53310394, "answer_count": 1, "score": -1, "last_activity_date": 1542240813, "creation_date": 1542237402, "last_edit_date": 1542240813, "question_id": 53310192, "link": "https://stackoverflow.com/questions/53310192/pyqt5-qlabel-overlay-eachother-even-after-using-grid", "closed_reason": "Duplicate", "title": "PyQT5 : Qlabel overlay eachother even after using grid", "body": "<p>I'm new and I just want to learn how to code some UI. My problem with PyQt5 is the following. </p>\n\n<p>I just create 3 labels (each named label, label1 and label2). One is supposed to contain just text, another one is supposed to print the time and the third one is supposed to print the position (x, y) of the mouse. </p>\n\n<p>When I use the grid layout, it just print Qlabels at the same place even if I specify a different position with grid add widget.</p>\n\n<p>Any help is appreciated. Thank you in advance.</p>\n\n<p>My code :</p>\n\n<pre><code>#Source : https://stackoverflow.com/questions/46007891/setting-background-color-of-pyqt5-qwidget\nimport sys\nfrom PyQt5.QtWidgets import (QMainWindow, QWidget, QLabel, QApplication, QToolTip, QPushButton, \n                             QMessageBox, QGridLayout, QHBoxLayout, QVBoxLayout, QTextEdit)\nfrom PyQt5.QtGui import QIcon, QFont\nfrom PyQt5.QtCore import Qt, QTime\n\nclass BgColorExperiment(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        # moves the widget to a position on the screen at x=300, y=300 coordinates\n        self.left = 300\n        self.top  = 300\n        # resizes the widget (250px wide and 150px high) \n        self.width  = 450\n        self.height = 450\n        # title of Widget shown in the titlebar\n        self.title ='Suivi des BDs cr\u00e9es'\n        # sets the application icon\n        self.setWindowIcon(QIcon('suivibdicon.png'))\n        # Set the status bar\n        self.statusBar().showMessage('Engineered by idiots')\n        # parent\n        self.init_ui()\n\n    def init_ui(self):\n        # Artiste\n        self.setObjectName('MainWidget')\n        self.setStyleSheet(\"\"\"\n            #MainWidget {\n                background-color: #333;\n                }\n            .QLabel{\n                color: green;\n                background-color: #333;\n                selection-color: yellow;\n                selection-background-color: blue;\n                font-family : Consolas;\n                font-size: 10pt;\n                }\n            .QToolTip {\n                background-color: #333;\n                color: #fff;\n                border: red solid 1px;\n                opacity: 100;\n                font-family : Consolas;\n                font-size: 10pt;\n                }\n            .QMessageBox {\n                background-color: #333;\n                }\n            QStatusBar {\n                color: green;\n                font-family : Consolas;\n                font-size: 10pt;\n                }\n        \"\"\")\n        # violence\n        self.label  = QLabel('position of the mouse', self)\n        self.label1 = QLabel('some words \u4e00\u4e9b\u5355\u8bcd', self)\n        self.label2 = QLabel('digital clock', self)\n\n        grid = QGridLayout()\n\n        # just blablabla\n        grid.addWidget(self.label1, 0, 0)\n\n        # Digital Clock\n        grid.addWidget(self.label2, 1, 0)\n\n        # Mouse tracking\n        x, y = 0, 0\n        self.text = \"x: {0}, y: {1}\".format(x, y)\n        self.label = QLabel(self.text, self) # display the x and y coordinates of a mouse pointer in a label widget.\n        grid.addWidget(self.label, 2, 0)\n        self.setMouseTracking(True)\n\n#        # push button widget and set a tooltip (useless)\n#        #btn = QPushButton('Button', self)\n#        #btn.setToolTip('This is a &lt;b&gt;QPushButton&lt;/b&gt; widget for refresh')\n#        #btn.resize(btn.sizeHint())\n#        #hbox.addWidget(btn)\n\n        # set the grid\n        self.setLayout(grid)\n        # set the window size using the setGeometry\n        self.setGeometry(self.left, self.top, self.width, self.height)\n        # set the window title\n        self.setWindowTitle(self.title)\n        self.show()                                 # displays the widget on the screen\n\n    def closeEvent(self, event): # Define behavior when clicking on the x button on the title bar\n        reply = QMessageBox.question(self, 'Message',  \"Are you sure to quit?\", QMessageBox.Yes | QMessageBox.No, QMessageBox.No)\n        if reply == QMessageBox.Yes:\n            event.accept()\n        else:\n            event.ignore()\n\n    def mouseMoveEvent(self, e): # for following the position of the mouse\n        x, y = e.x(), e.y()\n        text = \"x: {0}, y: {1}\".format(x, y)\n        self.label.setText(text)\n\n    def showTime(self): # for printing the time (format = 'hh:mm:ss')\n        time = QTime.currentTime()\n        text = time.toString('hh:mm:ss')\n        self.label2.setText(text)\n\nif __name__ == '__main__':\n    APP = QApplication(sys.argv)\n    EXP = BgColorExperiment()\n    sys.exit(APP.exec_()) # mainloop of the application\n</code></pre>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "edited": false, "score": 1, "creation_date": 1542237553, "post_id": 53310163, "comment_id": 93501198, "body": "Only two things to do when running out of memory - get more or use less."}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 1, "creation_date": 1542237591, "post_id": 53310163, "comment_id": 93501205, "body": "It&#39;s very hard to see where your code is using so much memory if you don&#39;t post it."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1542237690, "post_id": 53310163, "comment_id": 93501239, "body": "Can you read through <code>&#47;var&#47;log&#47;messages</code> ? (use <code>less &#47;var&#47;log&#47;messages</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10654712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a3a124307557daba43a0d369ec0b14?s=128&d=identicon&r=PG&f=1", "display_name": "J.2025", "link": "https://stackoverflow.com/users/10654712/j-2025"}, "is_accepted": true, "score": 0, "last_activity_date": 1547171100, "creation_date": 1547171100, "answer_id": 54139303, "question_id": 53310163, "link": "https://stackoverflow.com/questions/53310163/how-to-resolve-logging-out-of-memory-error/54139303#54139303", "title": "how to resolve logging out of memory error?", "body": "<p>Root cause was we were using epoch date function inside shell script which was being called every second. That caused hogging. </p>\n"}], "owner": {"reputation": 1, "user_id": 10654712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a3a124307557daba43a0d369ec0b14?s=128&d=identicon&r=PG&f=1", "display_name": "J.2025", "link": "https://stackoverflow.com/users/10654712/j-2025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 54139303, "answer_count": 1, "score": 0, "last_activity_date": 1547171100, "creation_date": 1542237235, "last_edit_date": 1542238198, "question_id": 53310163, "link": "https://stackoverflow.com/questions/53310163/how-to-resolve-logging-out-of-memory-error", "title": "how to resolve logging out of memory error?", "body": "<p>I am getting above error in my docker container which only has automation scripts(python 2.7.11) and to log errors i am using logging package.</p>\n\n<pre><code>Traceback (most recent call last):\n\nFile \"/usr/lib/python2.7/logging/__init__.py\", line 885, in emit\nself.flush()\n\nFile \"/usr/lib/python2.7/logging/__init__.py\", line 845, in flush\nself.stream.flush()\nIOError: [Errno 12] Out of memory\n</code></pre>\n\n<p>else i see below error as launch_err\nI got above error as launch_err for that docker container and all i see in log is this\n\"(:[Errno 12] Out of memory [/usr/lib/python2.7/site-packages/supervisor/supervisord.py|runforever|235] [/usr/lib/python2.7/site-packages/supervisor/dispatchers.py|handle_read_event|232] [/usr/lib/python2.7/site-packages/supervisor/dispatchers.py|record_output|166] [/usr/lib/python2.7/site-packages/supervisor/dispatchers.py|_log|142] [/usr/lib/python2.7/site-packages/supervisor/loggers.py|info|275] [/usr/lib/python2.7/site-packages/supervisor/loggers.py|log|293] [/usr/lib/python2.7/site-packages/supervisor/loggers.py|emit|86] [/usr/lib/python2.7/site-packages/supervisor/loggers.py|handleError|90]</p>\n\n<p>that container has 1GB mem , i tried increasing upto 4GB but it still crashes and logs same error. I believe its memory leak from logging package where its not able to release handlers to flush buffers. </p>\n"}, {"tags": ["python", "class", "operator-overloading"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1542237324, "post_id": 53310157, "comment_id": 93501119, "body": "Why does <code>vector2D</code> subclass <code>point2D</code>? A vector is not a point."}, {"owner": {"reputation": 7672, "user_id": 4999991, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/y69di.png?s=128&g=1", "display_name": "Foad", "link": "https://stackoverflow.com/users/4999991/foad"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542237430, "post_id": 53310157, "comment_id": 93501158, "body": "well, mathematically speaking true, but computationally: it can inherit all the methods without any issues."}], "answers": [{"comments": [{"owner": {"reputation": 7672, "user_id": 4999991, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/y69di.png?s=128&g=1", "display_name": "Foad", "link": "https://stackoverflow.com/users/4999991/foad"}, "edited": false, "score": 0, "creation_date": 1542238425, "post_id": 53310318, "comment_id": 93501458, "body": "Would you be so kind to show me how it should be done? are you saying that I can put some if statements inside those methods and then return different things based on the input? probably using <code>isinstance</code>?"}, {"owner": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "reply_to_user": {"reputation": 7672, "user_id": 4999991, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/y69di.png?s=128&g=1", "display_name": "Foad", "link": "https://stackoverflow.com/users/4999991/foad"}, "edited": false, "score": 0, "creation_date": 1542238567, "post_id": 53310318, "comment_id": 93501516, "body": "Exactly so. Please try that and update the question if you have more difficulties."}], "tags": [], "owner": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "is_accepted": false, "score": 0, "last_activity_date": 1542238195, "creation_date": 1542238195, "answer_id": 53310318, "question_id": 53310157, "link": "https://stackoverflow.com/questions/53310157/how-to-do-operator-overloading-between-two-different-classes-in-python/53310318#53310318", "title": "How to do operator overloading between two different classes in python", "body": "<p>You clearly know how to overload operators. Use type checking to return objects of the desired type or <a href=\"https://docs.python.org/3.6/library/constants.html#NotImplemented\" rel=\"nofollow noreferrer\">NotImplemented</a> in each case.</p>\n"}], "owner": {"reputation": 7672, "user_id": 4999991, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/y69di.png?s=128&g=1", "display_name": "Foad", "link": "https://stackoverflow.com/users/4999991/foad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542238195, "creation_date": 1542237190, "last_edit_date": 1542237456, "question_id": 53310157, "link": "https://stackoverflow.com/questions/53310157/how-to-do-operator-overloading-between-two-different-classes-in-python", "title": "How to do operator overloading between two different classes in python", "body": "<p>Consider the main class</p>\n\n<pre><code>class point2D:\n    def __init__(x, y):\n        self.x = x\n        self.y = y\n    def __sub__(self, other):\n        return vector2D(self.x - other.x, self.y - other.y)\n</code></pre>\n\n<p>and the subclass:</p>\n\n<pre><code>class vector2D(point2D):\n    def __add__(self, other):\n        return vector2D(self.x + other.x, self.y + other.y)\n</code></pre>\n\n<p>now I want the <code>+</code> operator also to be able to add a <code>vector2D</code> and a <code>point2D</code> object and return a <code>point2D</code> object. And <code>-</code> operator between any of the classes to return <code>vector2D</code> anyway. I would appreciate if you could help me know if/how can I do that in Python <code>3.*</code>. </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 3, "last_activity_date": 1542237238, "creation_date": 1542237238, "answer_id": 53310164, "question_id": 53310111, "link": "https://stackoverflow.com/questions/53310111/pandas-drop-columns-based-on-column-name-and-content/53310164#53310164", "title": "Pandas drop columns based on column name AND content", "body": "<h3><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.filter.html\" rel=\"nofollow noreferrer\"><code>filter</code></a> + <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.isnull.html\" rel=\"nofollow noreferrer\"><code>isnull</code></a> + <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop.html\" rel=\"nofollow noreferrer\"><code>drop</code></a></h3>\n\n<p>First filter your dataframe for column labels, then calculate which are all null:</p>\n\n<pre><code>nulls = df.filter(like='Unnamed').isnull().all()\n\ndf = df.drop(nulls[nulls].index, axis='columns')\n\nprint(df)\n\n   a  b   c  Unnamed: 5\n0  1  2 NaN           5\n1  3  4 NaN           6\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 2815937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d971bcd67df202d5a5555f0efa3fc93d?s=128&d=identicon&r=PG&f=1", "display_name": "andbeonetraveler", "link": "https://stackoverflow.com/users/2815937/andbeonetraveler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 53310164, "answer_count": 1, "score": 1, "last_activity_date": 1542239176, "creation_date": 1542236960, "question_id": 53310111, "link": "https://stackoverflow.com/questions/53310111/pandas-drop-columns-based-on-column-name-and-content", "title": "Pandas drop columns based on column name AND content", "body": "<p>I have a dataframe like this:</p>\n\n<pre><code>df = pd.DataFrame([[1,2,np.nan,np.nan,5],[3,4,np.nan,np.nan,6]],columns=['a','b','c','Unnamed: 4','Unnamed: 5'])\n\ndf\nOut[16]: \n   a  b   c  Unnamed: 4  Unnamed: 5\n0  1  2 NaN         NaN           5\n1  3  4 NaN         NaN           6\n</code></pre>\n\n<p>I want to drop columns that are BOTH all nan AND have 'Unnamed: ' in the name (as often happens when importing a dataframe from a file with columns that have no name in the header). Desired output:</p>\n\n<pre><code>   a  b   c  Unnamed: 5\n0  1  2 NaN           5\n1  3  4 NaN           6\n</code></pre>\n\n<p>I can do: </p>\n\n<pre><code>df[[col for col in df.columns if 'Unnamed: ' not in col]]\nOut[18]: \n   a  b   c\n0  1  2 NaN\n1  3  4 NaN\n</code></pre>\n\n<p>or: </p>\n\n<pre><code>df.dropna(how='all',axis=1)\n\nOut[19]: \n   a  b  Unnamed: 5\n0  1  2           5\n1  3  4           6\n</code></pre>\n\n<p>Is there a pythonic way to do both these things simultaneously (connected by AND not OR)?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": true, "score": 1, "last_activity_date": 1542237519, "creation_date": 1542237519, "answer_id": 53310210, "question_id": 53310109, "link": "https://stackoverflow.com/questions/53310109/in-pandas-how-can-i-reduce-the-rows-so-that-i-only-accept-the-row-with-the-first/53310210#53310210", "title": "In Pandas how can I reduce the rows so that I only accept the row with the first true in every sub group of trues?", "body": "<p>Use some boolean masking for this and do it in one line:</p>\n\n<pre><code>df.loc[(df['bool'] != df['bool'].shift(1))]\n</code></pre>\n\n<p>out:</p>\n\n<pre><code>&gt;&gt;&gt; df.loc[(df['bool'] != df['bool'].shift(1))]\n   a    b  c   bool\n0  1  243  0   True\n1  1  253  1  False\n2  1  267  0   True\n4  1  234  0  False\n5  1  255  0   True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1542237600, "creation_date": 1542237600, "answer_id": 53310229, "question_id": 53310109, "link": "https://stackoverflow.com/questions/53310109/in-pandas-how-can-i-reduce-the-rows-so-that-i-only-accept-the-row-with-the-first/53310229#53310229", "title": "In Pandas how can I reduce the rows so that I only accept the row with the first true in every sub group of trues?", "body": "<p>IIUC</p>\n\n<pre><code>df.groupby(df['bool'].ne(True).cumsum()).head(2)\nOut[201]: \n   a    b  c   bool\n0  1  243  0   True\n1  1  253  1  False\n2  1  267  0   True\n4  1  234  0  False\n5  1  255  0   True\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 2463199, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/baedb86182954a84f95c208e4b2861e8?s=128&d=identicon&r=PG", "display_name": "Nothing", "link": "https://stackoverflow.com/users/2463199/nothing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 53310210, "answer_count": 2, "score": 0, "last_activity_date": 1542237600, "creation_date": 1542236954, "question_id": 53310109, "link": "https://stackoverflow.com/questions/53310109/in-pandas-how-can-i-reduce-the-rows-so-that-i-only-accept-the-row-with-the-first", "title": "In Pandas how can I reduce the rows so that I only accept the row with the first true in every sub group of trues?", "body": "<p>As an example, consider the following:</p>\n\n<p>Input</p>\n\n<pre><code>a b   c  bool\n1 243 0  true\n1 253 1  false\n1 267 0  true\n1 245 0  true\n1 234 0  false\n1 255 0  true\n1 275 0  true\n1 295 0  true\n</code></pre>\n\n<p>I want the output to be the following:</p>\n\n<pre><code>a b   c  bool\n1 243 0  true\n1 253 1  false\n1 267 0  true\n1 234 0  false\n1 255 0  true\n</code></pre>\n"}, {"tags": ["python", "python-unittest"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1542237141, "post_id": 53310098, "comment_id": 93501064, "body": "I would suggest raising an error inside the test that you think is being skipped just to be sure that it is being skipped."}, {"owner": {"reputation": 512, "user_id": 8105524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrcPT.jpg?s=128&g=1", "display_name": "wowserx", "link": "https://stackoverflow.com/users/8105524/wowserx"}, "edited": false, "score": 0, "creation_date": 1542239467, "post_id": 53310098, "comment_id": 93501762, "body": "You should perform the skip check inside the test case method, and then raise <code>unittest.SkipTest(reason)</code>."}, {"owner": {"reputation": 3, "user_id": 1937973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e23f7133794eba0486199243be2e88?s=128&d=identicon&r=PG", "display_name": "garrettbn", "link": "https://stackoverflow.com/users/1937973/garrettbn"}, "edited": false, "score": 0, "creation_date": 1542254997, "post_id": 53310098, "comment_id": 93505169, "body": "In this case, I&#39;ll go inside the test and check for my condition and use <code>self.fail(&#39;Reason&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 0, "last_activity_date": 1542237126, "creation_date": 1542237126, "answer_id": 53310147, "question_id": 53310098, "link": "https://stackoverflow.com/questions/53310098/python-skipping-unittests/53310147#53310147", "title": "Python Skipping Unittests", "body": "<p>You mean, this doesn't work when <code>test_a</code> is run before <code>test_f</code>?</p>\n\n<p>This is normal behavior, as the condition is tested when the decorator is constructed, which is before <code>test_a</code> is executed (when the unit test classes are registered).</p>\n\n<p>It feels like you want to deactivate tests if previous tests are broken, but this is not the proper way of doing so.</p>\n"}], "owner": {"reputation": 3, "user_id": 1937973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e23f7133794eba0486199243be2e88?s=128&d=identicon&r=PG", "display_name": "garrettbn", "link": "https://stackoverflow.com/users/1937973/garrettbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 53310147, "answer_count": 1, "score": 0, "last_activity_date": 1542237126, "creation_date": 1542236878, "question_id": 53310098, "link": "https://stackoverflow.com/questions/53310098/python-skipping-unittests", "title": "Python Skipping Unittests", "body": "<p>I have Python 2.7 selenium unit tests that need to run in a particular order and if one test fails inside a class, there is no point in running the remainging tests in that class. I know this is bad and the tests should run independently. </p>\n\n<p>In the code below, I'm trying to use test_a to set bar=False so that test_f gets skipped. This is not working for me and I was trying to figure out why.</p>\n\n<pre><code>from unittest import TestCase, main as unittest_main, skipIf\n\n\nclass TestSimpleFoo(TestCase):\n    foo = 'bar'\n    bar = True\n\n    def setUp(self):\n        pass\n\n    def test_a(self):\n        self.assertEqual(self.__class__.foo, 'bar')\n        self.__class__.foo = 'can'\n        # can i skip test_f ???\n        self.__class__.bar = False\n\n    @skipIf(bar == False, \"skipping\")\n    def test_f(self):\n        self.assertEqual(self.__class__.foo, 'can')\n\n\nif __name__ == '__main__':\n    unittest_main()\n</code></pre>\n"}, {"tags": ["python", "opencv", "opencv3.0", "nvidia-jetson"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11203210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52abb28797f31edd11b27567516c7a2a?s=128&d=identicon&r=PG", "display_name": "Aaron O&#39;Connor", "link": "https://stackoverflow.com/users/11203210/aaron-oconnor"}, "is_accepted": false, "score": 3, "last_activity_date": 1552568651, "creation_date": 1552568651, "answer_id": 55163291, "question_id": 53310086, "link": "https://stackoverflow.com/questions/53310086/opencv-gving-error-assert-false-in-file-qasciikey-cpp-line-495-on-multiple/55163291#55163291", "title": "OpenCV gving error &quot;ASSERT: &quot;false&quot; in file qasciikey.cpp, line 495&quot; on multiple windows", "body": "<p>I found that un-checking \"Unix-compatible keyboard\" in MobaXterm/Settings/X11, with keyboard set to \"us\" solved this error for me. </p>\n"}, {"tags": [], "owner": {"reputation": 3844, "user_id": 4007718, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8aa13a28fe794b2f67c79d63e6dbd244?s=128&d=identicon&r=PG", "display_name": "Fazzolini", "link": "https://stackoverflow.com/users/4007718/fazzolini"}, "is_accepted": false, "score": 0, "last_activity_date": 1559719216, "creation_date": 1559719216, "answer_id": 56455837, "question_id": 53310086, "link": "https://stackoverflow.com/questions/53310086/opencv-gving-error-assert-false-in-file-qasciikey-cpp-line-495-on-multiple/56455837#56455837", "title": "OpenCV gving error &quot;ASSERT: &quot;false&quot; in file qasciikey.cpp, line 495&quot; on multiple windows", "body": "<p>I had a similar error message (<code>ASSERT: \"false\" in file qasciikey.cpp, line 495</code>) when running code on Raspberry Pi. I was able to make this problem go away by using <code>cv2.namedWindow()</code> first to create a window where images should be displayed.</p>\n\n<p>You should try this solution and see if the problem goes away:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import cv2\nimport numpy as np\n\nimg1=np.random.randn(300,400)\nimg2=np.random.randn(600,400)\n\ncv2.namedWindow('win1')\ncv2.namedWindow('win2')\n\ncv2.imshow('win1', img1)\ncv2.imshow('win2', img2)\n</code></pre>\n"}], "owner": {"reputation": 1313, "user_id": 2379009, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae835956888df88e73113700d913a55b?s=128&d=identicon&r=PG", "display_name": "DankMasterDan", "link": "https://stackoverflow.com/users/2379009/dankmasterdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1559719216, "creation_date": 1542236824, "last_edit_date": 1542237425, "question_id": 53310086, "link": "https://stackoverflow.com/questions/53310086/opencv-gving-error-assert-false-in-file-qasciikey-cpp-line-495-on-multiple", "title": "OpenCV gving error &quot;ASSERT: &quot;false&quot; in file qasciikey.cpp, line 495&quot; on multiple windows", "body": "<p>I am trying to use multiple OpenCV windows in python on my Jetson TX2. However, I get the error: \"ASSERT: \"false\" in file qasciikey.cpp, line 495\"</p>\n\n<p>Below is the minimum reproducible code:</p>\n\n<pre><code>import cv2\nimport numpy as np\n\nimg1=np.random.randn(300,400)\nimg2=np.random.randn(600,400)\n\ncv2.imshow('win1', img1)\ncv2.imshow('win2', img2)\n</code></pre>\n\n<p>And here is the error trace:</p>\n\n<pre><code>Could not initialize OpenGL for RasterGLSurface, reverting to RasterSurface.\nQXcbConnection: XCB error: 145 (Unknown), sequence: 164, resource id: 0, major code: 139 (Unknown), minor code: 20\nCould not initialize OpenGL for RasterGLSurface, reverting to RasterSurface.\nASSERT: \"false\" in file qasciikey.cpp, line 495\nAborted (core dumped)\n</code></pre>\n\n<p>Please help. Thanks!</p>\n\n<p><strong>EDIT:</strong> \nThe error only happens when I ssh into the Jetson (via MobaXterm v10.5). If I run the code directly from the Jetson, I do not get this error. </p>\n"}, {"tags": ["python", "lambda"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1542236809, "post_id": 53310053, "comment_id": 93500932, "body": "Well, you just did. All you had to do was switch the argument names, without rewriting the whole lambda function. Were you looking for something else?"}, {"owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542236844, "post_id": 53310053, "comment_id": 93500943, "body": "@user2357112 they are looking for a function that can swap the argument positions of another function."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1542236997, "post_id": 53310053, "comment_id": 93501004, "body": "Why are you assigning lambdas to names? Both the camelcase and named lambdas are against PEP8"}, {"owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "edited": false, "score": 0, "creation_date": 1542237207, "post_id": 53310053, "comment_id": 93501089, "body": "Forget PEP. There is almost never a reason to assign a <code>lambda</code> to anything."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1542286347, "post_id": 53310053, "comment_id": 93519805, "body": "Please stop harping on the lambda expression. There is no functional (pun intended) difference between a function defined by a <code>def</code> statement and a function defined by a lambda expression, and the choice to use a lambda expression here doesn&#39;t affect the main question."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1542236935, "post_id": 53310097, "comment_id": 93500980, "body": "This does add a layer of indirection, though."}, {"owner": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 0, "creation_date": 1542236981, "post_id": 53310097, "comment_id": 93500996, "body": "I don&#39;t get why you can&#39;t just call <code>someLambdaFunction(y, x)</code> directly?"}, {"owner": {"reputation": 7908, "user_id": 1292238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b41e8dc5fb7440e261335294cd11b35?s=128&d=identicon&r=PG", "display_name": "azalea", "link": "https://stackoverflow.com/users/1292238/azalea"}, "reply_to_user": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 0, "creation_date": 1542237153, "post_id": 53310097, "comment_id": 93501072, "body": "@slider Probably only the OP knows the answer. Possibly, the lambda function acts as an argument of an existing interface?"}, {"owner": {"reputation": 569, "user_id": 1838230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTckL.jpg?s=128&g=1", "display_name": "ZWang", "link": "https://stackoverflow.com/users/1838230/zwang"}, "reply_to_user": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 1, "creation_date": 1542237208, "post_id": 53310097, "comment_id": 93501090, "body": "@slider I&#39;m trying to integrate a lambda function with multiple variables using quad and it only integrates over the first argument of the function."}], "tags": [], "owner": {"reputation": 7908, "user_id": 1292238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b41e8dc5fb7440e261335294cd11b35?s=128&d=identicon&r=PG", "display_name": "azalea", "link": "https://stackoverflow.com/users/1292238/azalea"}, "is_accepted": false, "score": 3, "last_activity_date": 1542236873, "creation_date": 1542236873, "answer_id": 53310097, "question_id": 53310053, "link": "https://stackoverflow.com/questions/53310053/python-lambda-function-variable-ordering/53310097#53310097", "title": "Python Lambda function variable ordering", "body": "<p>Yes, you can do something like this:</p>\n\n<pre><code>someLambdaFunction = lambda x,y: x+x**2+y\nsomeOtherLambdaFunction = lambda y, x: someLambdaFunction(x, y)\n</code></pre>\n\n<p>Basically, reuse the original <code>someLambdaFunction</code></p>\n"}, {"tags": [], "owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "is_accepted": true, "score": 2, "last_activity_date": 1542237144, "creation_date": 1542237144, "answer_id": 53310150, "question_id": 53310053, "link": "https://stackoverflow.com/questions/53310053/python-lambda-function-variable-ordering/53310150#53310150", "title": "Python Lambda function variable ordering", "body": "<p>You can write a general function that swaps the first two arguments of another function:</p>\n\n<pre><code>def swap2(func):\n    \"\"\" Swap the first two arguments of a function \"\"\"\n    def wrapped(x, y, *args, **kwargs):\n        return func(y, x, *args, **kwargs)\n\n    return wrapped\n\nf = lambda x,y: x+x**2+y\nf_swapped= swap2(f)\n\nassert f(3, 4) == f_swapped(4, 3)\n</code></pre>\n\n<p>This works because functions are just regular Python objects, that can be passed around just like integers, strings, etc.</p>\n\n<p>By the way, there is almost never a reason to write <code>something = lambda ...</code>. Use <code>def something(...)</code> instead.</p>\n"}], "owner": {"reputation": 569, "user_id": 1838230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTckL.jpg?s=128&g=1", "display_name": "ZWang", "link": "https://stackoverflow.com/users/1838230/zwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 53310150, "answer_count": 2, "score": 1, "last_activity_date": 1542237179, "creation_date": 1542236673, "last_edit_date": 1542237179, "question_id": 53310053, "link": "https://stackoverflow.com/questions/53310053/python-lambda-function-variable-ordering", "title": "Python Lambda function variable ordering", "body": "<p>If I state a lambda function like this:</p>\n\n<pre><code>someLambdaFunction = lambda x,y: x+x**2+y\n</code></pre>\n\n<p>can I reverse the ordering of that lambda to say</p>\n\n<pre><code>someOtherLambdaFunction = lambda y,x: x+x**2+y\n</code></pre>\n\n<p>without rewriting the whole lambda function? Just switch the arguments?</p>\n"}, {"tags": ["python", "visual-studio-code"], "comments": [{"owner": {"reputation": 20003, "user_id": 10335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/af44f496fec83ffbb8283b4c7122b246?s=128&d=identicon&r=PG", "display_name": "neves", "link": "https://stackoverflow.com/users/10335/neves"}, "edited": false, "score": 0, "creation_date": 1615932863, "post_id": 53310042, "comment_id": 117845042, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/56825741/setting-the-python-path-for-local-project-in-vs-code-without-using-the-settings\">Setting the Python path for local project in VS Code without using the settings.json file</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1491, "user_id": 1229503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5255e98adc2c03fb0defadad2f12514b?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/1229503/cory"}, "is_accepted": false, "score": 2, "last_activity_date": 1542236611, "creation_date": 1542236611, "answer_id": 53310043, "question_id": 53310042, "link": "https://stackoverflow.com/questions/53310042/is-there-any-way-to-parameterize-vs-codes-python-pythonpath-setting/53310043#53310043", "title": "Is there any way to parameterize VS Code&#39;s python.pythonPath setting?", "body": "<p>After some trial-and-error, I found some answers.</p>\n\n<h2>First of all, make sure your virtualenv is visible to VS Code's Python extension</h2>\n\n<p>Two settings appear to control where the Python extension looks for interpreters and environments, <code>python.venvPath</code> and <code>python.venvFolders</code>. The first one is officially documented on the <a href=\"https://code.visualstudio.com/docs/python/settings-reference\" rel=\"nofollow noreferrer\">settings reference</a>. I can't find any official documentation for the second one, but there are lots of references to it on the Internet.</p>\n\n<p>I set my paths as follows. We use virtualenvwrapper.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UjCdk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UjCdk.png\" alt=\"I set my paths as follows. We use virtualenvwrapper.\"></a></p>\n\n<p>I recommend setting these at either the <strong>User</strong> or <strong>Workspace</strong> level. If you have some team members using different types of virtualenvs, or installing venvs somewhere other than the default, you might want to keep this at the User level so it can be modified by them.</p>\n\n<h2>Second, make sure you haven't accidentally set it somewhere else</h2>\n\n<p>VS Code has multiple settings levels; <strong>Default</strong> &lt; <strong>User</strong> &lt; <strong>Workspace</strong> &lt; <strong>Folder</strong>.</p>\n\n<p>In my case (and for many other team members) we had a <code>python.pythonPath</code> setting at the <strong>Folder</strong> level, which overrides all the others. <em>The <strong>Folder</strong> level has the highest priority.</em></p>\n\n<p>You may need to open and edit <code>settings.json</code> at each level and delete the setting. Once you have done so, VS Code <em>should</em> pick up the path to Python in your virtualenv automatically, meaning you don't have to set it at all.</p>\n\n<h2>If you still must set the <code>python.pythonPath</code> manually . . .</h2>\n\n<p>... I recommend setting it at the <strong>Folder</strong> level and <em>hiding</em> <code>${workspaceFolder}/.vscode</code> from version control. This allows you to:</p>\n\n<ul>\n<li><p>Give each user the ability to set it themselves</p></li>\n<li><p>Give users the ability to set it <em>separately</em> for each project as they switch between projects.</p></li>\n</ul>\n\n<p>And again, make sure your team doesn't accidentally change this setting at the Workspace level, so you can keep your <code>project.code-workspace</code> file clean in version control.</p>\n"}], "owner": {"reputation": 1491, "user_id": 1229503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5255e98adc2c03fb0defadad2f12514b?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/1229503/cory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542236611, "creation_date": 1542236611, "question_id": 53310042, "link": "https://stackoverflow.com/questions/53310042/is-there-any-way-to-parameterize-vs-codes-python-pythonpath-setting", "title": "Is there any way to parameterize VS Code&#39;s python.pythonPath setting?", "body": "<p>Background: I am a developer on a team that uses Python and uses VS Code heavily. We'd like to be able to share our <code>project.code-workspace</code> but one of the critical settings is <code>python.pythonPath</code> which specifies the Python executable.</p>\n\n<p>Because we use virtualenvs (and at least 2 different operating systems), we can't specify this setting, it will be a different absolute path on various machines.</p>\n\n<p>We also can't <em>not</em> specify, it, though; without it set, many features of the Python extension don't work. As soon as anyone sets it locally in that workspace, the file is modified in version control. We constantly risk someone changing it and then committing their change, breaking it for everyone else.</p>\n\n<p>The result is that we are unable to commit a <code>.code-workspace</code> file because it can't be parameterized.</p>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "edited": false, "score": 0, "creation_date": 1542238487, "post_id": 53310005, "comment_id": 93501482, "body": "Use a regular file"}, {"owner": {"reputation": 15, "user_id": 7723070, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251064688334329/picture?type=large", "display_name": "Muneeb Bilal", "link": "https://stackoverflow.com/users/7723070/muneeb-bilal"}, "reply_to_user": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "edited": false, "score": 0, "creation_date": 1542241898, "post_id": 53310005, "comment_id": 93502398, "body": "nope, it did not work"}], "owner": {"reputation": 15, "user_id": 7723070, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251064688334329/picture?type=large", "display_name": "Muneeb Bilal", "link": "https://stackoverflow.com/users/7723070/muneeb-bilal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542236439, "creation_date": 1542236439, "question_id": 53310005, "link": "https://stackoverflow.com/questions/53310005/change-the-script-everytime-i-work-on-the-new-scratch-file-in-pycharm", "title": "change the script everytime I work on the new scratch file in pycharm", "body": "<p>Why I do have to change the script path manually according to the new scratch file I make on pycharm, Is there anyway the pycharm would automatically make the changes in the script path as I make new scratch file ?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10654672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2822e559c7474a8b75a5ea75bcffc7d6?s=128&d=identicon&r=PG&f=1", "display_name": "telba", "link": "https://stackoverflow.com/users/10654672/telba"}, "edited": false, "score": 0, "creation_date": 1542767157, "post_id": 53310707, "comment_id": 93683914, "body": "Thanks for your advice. I have such a small data set (and I am just starting out) that I opted to write this in a for loop in line with my code. With your advice, it&#39;s straightforward to define this as a function and call this subroutine in other parts of the code."}, {"owner": {"reputation": 521, "user_id": 6907488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/90bc7679dac46ba7ffedcb83799819ac?s=128&d=identicon&r=PG&f=1", "display_name": "dozyaustin", "link": "https://stackoverflow.com/users/6907488/dozyaustin"}, "reply_to_user": {"reputation": 35, "user_id": 10654672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2822e559c7474a8b75a5ea75bcffc7d6?s=128&d=identicon&r=PG&f=1", "display_name": "telba", "link": "https://stackoverflow.com/users/10654672/telba"}, "edited": false, "score": 0, "creation_date": 1542962821, "post_id": 53310707, "comment_id": 93759400, "body": "@telba that also definitely works. I have come to appreciate the way wrapping steps in functions helps the code &quot;tell you&quot; what it&#39;s doing ... a for loop can get complex and confusing, but if wrapped in <code>loop_that_does_x()</code> it becomes self explanatory."}, {"owner": {"reputation": 521, "user_id": 6907488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/90bc7679dac46ba7ffedcb83799819ac?s=128&d=identicon&r=PG&f=1", "display_name": "dozyaustin", "link": "https://stackoverflow.com/users/6907488/dozyaustin"}, "reply_to_user": {"reputation": 35, "user_id": 10654672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2822e559c7474a8b75a5ea75bcffc7d6?s=128&d=identicon&r=PG&f=1", "display_name": "telba", "link": "https://stackoverflow.com/users/10654672/telba"}, "edited": false, "score": 0, "creation_date": 1542962870, "post_id": 53310707, "comment_id": 93759426, "body": "@telba Also ... if you feel like marking me as the correct answer ;) that would be lovely (would be one of my first answers)."}], "tags": [], "owner": {"reputation": 521, "user_id": 6907488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/90bc7679dac46ba7ffedcb83799819ac?s=128&d=identicon&r=PG&f=1", "display_name": "dozyaustin", "link": "https://stackoverflow.com/users/6907488/dozyaustin"}, "is_accepted": true, "score": 0, "last_activity_date": 1542241072, "creation_date": 1542241072, "answer_id": 53310707, "question_id": 53309996, "link": "https://stackoverflow.com/questions/53309996/linear-regression-with-moving-window-in-python/53310707#53310707", "title": "Linear regression with moving window in python", "body": "<ol>\n<li><p>Wrap the modeling and plotting in a function. </p></li>\n<li><p>Then call this function from another function that subsets the arrays to the user specified range before feeding the \"cleaned\" data to the prediction function. </p></li>\n</ol>\n\n<p>pseudocode: </p>\n\n<pre><code>def select_window(data, start, stop): \n    clean data = data[start:stop,:]\n    X = clean_data[without_y]\n    y = clean_data[y]\n\n    prediction_function(X, y)\n\ndef prediction_function(X,y):\n   predict_on_X_and_y_and_plot_as_you_desire\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 10654672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2822e559c7474a8b75a5ea75bcffc7d6?s=128&d=identicon&r=PG&f=1", "display_name": "telba", "link": "https://stackoverflow.com/users/10654672/telba"}, "is_accepted": false, "score": 1, "last_activity_date": 1542767405, "creation_date": 1542767405, "answer_id": 53404506, "question_id": 53309996, "link": "https://stackoverflow.com/questions/53309996/linear-regression-with-moving-window-in-python/53404506#53404506", "title": "Linear regression with moving window in python", "body": "<p>Here's what I ended up with:</p>\n\n<pre><code>data = np.genfromtxt('data.csv', delimiter=',')\n\nw = data[:,0]\nx = data[:,1]\ny = data[:,2]\nz = data[:,3]\n\n\nlenw = int(len(w))\nlenx = int(len(x))    #change the value within inner parenthesis to suit different dataset\n\nwindow = int(6)      #change window size\nwdata_avg = np.zeros(lenw - window + 1)\na = np.zeros(lenw-window+1)\nb = np.zeros(lenx-window + 1)\n\nfor i in np.arange(len(w)):\n    wdata = w[i:i + window]\n    xdata = x[i:i+window]\n    a[i], b[i] = np.polyfit(wdata, xdata,1)\n    wdata_avg[i] = np.mean(wdata)\n    if i == (lenw - window):\n        break\n</code></pre>\n\n<p>There may be some inconsistencies in the code, since I tried to format it so it was general rather than specific to my data.</p>\n"}], "owner": {"reputation": 35, "user_id": 10654672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2822e559c7474a8b75a5ea75bcffc7d6?s=128&d=identicon&r=PG&f=1", "display_name": "telba", "link": "https://stackoverflow.com/users/10654672/telba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1686, "favorite_count": 0, "accepted_answer_id": 53310707, "answer_count": 2, "score": 0, "last_activity_date": 1542767405, "creation_date": 1542236375, "question_id": 53309996, "link": "https://stackoverflow.com/questions/53309996/linear-regression-with-moving-window-in-python", "title": "Linear regression with moving window in python", "body": "<p>I am trying to write a program to determine the slope and intercept of a linear regression model over a moving window of points, i.e. from (x1, y1) to (x2, y2) and then from (x2, y2) to (x3, y3). I have successfully carried out a linear regression across the two numpy arrays (x and y), but I am not sure how to approach this project. I would like the window size to be a user-input parameter. I can reshape my two arrays using array subsetting and achieve the a window over which the linear regression is carried out, but i do not know how to automate this and how to save each slope and intercept into a file. I have tried my best, but I am a new programmer and don't know where to look. Can someone point me in the right direction? Thank you!</p>\n\n<p>Below is my code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport seaborn as sns\nimport scipy as sp\nimport numpy as np\nimport math as math\n\n##import data from file\ndata = np.genfromtxt('CA_data.csv', delimiter=',')\nprint(np.shape(data))\n#print(data)\n##subset 2D array into 1D arrays\nTinv = data[:,0]\nA_data = data[:,1]\nB_data = data[:,2]\nC_data = data[:,3]\n\n\n\na = np.empty_like([])\nb = np.empty_like([])\n\n##linear regression\n###for i,j in a.range(Tinv[i:j]):\n    Tnew[i] = Tinv[i:j]\n\n\n\n\na, b = np.polyfit(Tinv, A_data,1)\n\nprint(\"slope = \", a)\nprint(\"intercept = \", b)\n\n# #visualize optimized slope\n# a_vals = np.linspace(-6500, 0, 400)\n# rss = np.empty_like(a_vals)\n# for i, a in enumerate(a_vals):\n#   rss[i] = np.sum((A_data - a*Tinv - b)**2)\n# _ = plt.plot(a_vals, rss, '-')\n# _ = plt.xlabel('slope')\n# _ = plt.ylabel('residual sum of squares')\n# _ = plt.show()\n\n##Theoretical plot for optimal values\nstartx = Tinv[0]\nendx = Tinv[-1]\n\n#print(startx)\n#print(endx)\nx = np.array([startx, endx])\ny = a*x + b\n\n##plot the data\nplt.plot(Tinv, A_data, marker = '.', color = 'r', linestyle = 'none')\nplt.plot(x,y)       #plot theoretical data\nplt.margins(0.02)\nplt.axis([0.00275, 0.0035, 0.5, 3.0])\nplt.xlabel(\"x\")\nplt.ylabel('y')\nplt.title('title')\nplt.show()\n\n\n# print(Tinv)\n# print(A_data)\n# print(B_data)\n# print(C_data)\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "keras", "lstm", "rnn"], "comments": [{"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1542261269, "post_id": 53309967, "comment_id": 93506784, "body": "What is <code>y_train</code> shape? What are you trying to predict for each sequence?"}, {"owner": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "reply_to_user": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1542265970, "post_id": 53309967, "comment_id": 93508468, "body": "The  Y_train shape is (500,10,1) i am trying to predict value of a story 10 days in future"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542269736, "post_id": 53314287, "comment_id": 93510140, "body": "Thanks for your solution but when i try this i get another error.                 <code>ValueError: Error when checking target: expected dense_3 to have shape (10, 1) but got array with shape (10, 14)</code> Also i tried to have return_sequences turned on in both layers which resulted in same error."}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542270391, "post_id": 53314287, "comment_id": 93510463, "body": "@NeerajNatu Are you sure <code>y_train</code> has a shape of <code>(n_samples, 10, 1)</code>? Aren&#39;t you mistakenly passing <code>x_train</code> in place of <code>y_train</code> for the target values, since the error says that array you have passed as labels has a shape of <code>(10,14)</code>."}, {"owner": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542270810, "post_id": 53314287, "comment_id": 93510678, "body": "I wished that was the error, but no. I reshape my dataframes to np arrays <code>X_train = np.reshape(Train_data_scaled.values,(500,10,14)); Y_train = np.reshape(Train_labels_scaled.values,(500,10,1)); X_eval = np.reshape(Validation_data_scaled.values,(10,10,14)); Y_eval = np.reshape(Validation_labels_scaled.values,(10,10,1));</code>           and then i use this to train the model.                                                                                   <code>Hist =  Model.fit(x = X_train, y = Y_train, epochs = 300, callbacks=[tensorboard], validation_data=(X_eval,Y_eval));</code>"}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542271045, "post_id": 53314287, "comment_id": 93510799, "body": "@NeerajNatu Could you edit your question and update it with the new <code>model.summary()</code> after modifications and also the shape of <code>y_train</code> and <code>y_val</code>? <b>Don&#39;t remove the previous information, add your edit at the end.</b>"}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542271167, "post_id": 53314287, "comment_id": 93510868, "body": "@NeerajNatu The new one, after you have modified your code according to my answer."}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542271852, "post_id": 53314287, "comment_id": 93511211, "body": "@NeerajNatu Strange indeed! The output shape of the model is <code>(None, 10, 1)</code> and you are saying that both <code>y_train</code> and <code>y_val</code> have a shape of <code>(?, 10, 1)</code>. However, the modes says they are not: <code>got array with shape (10, 14)</code>. Nothing comes to my mind except checking the shapes right before calling <code>fit()</code> method to make sure they are correct."}, {"owner": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542274090, "post_id": 53314287, "comment_id": 93512536, "body": "I hate myself when i do this, made a rookie mistake. I use pickle to store the data after prep and then load during the model training where i stored the X_train in all the files."}, {"owner": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "edited": false, "score": 0, "creation_date": 1542275727, "post_id": 53314287, "comment_id": 93513570, "body": "Thanks for your help, i would have banged my head around for a couple of days before stumbling on this."}], "tags": [], "owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "is_accepted": true, "score": 1, "last_activity_date": 1542266579, "creation_date": 1542266579, "answer_id": 53314287, "question_id": 53309967, "link": "https://stackoverflow.com/questions/53309967/valueerror-error-when-checking-target-expected-dense-3-to-have-2-dimensions-b/53314287#53314287", "title": "ValueError: Error when checking target: expected dense_3 to have 2 dimensions, but got array with shape (500, 10, 14)", "body": "<p>Since you want to predict value of a story 10 days in the future you need to set the <code>return_sequences</code> argument of second LSTM layer to <code>True</code> to make the output shape of the whole model <code>(None, 10, 1)</code>:</p>\n\n<pre><code>## Second LSTM Layer\nX = LSTM(10, return_sequences=True)(X)\n</code></pre>\n\n<p>Further, a more general solution to predict the values <code>d</code> days in the future is to use a <code>RepeatVector</code> layer right after the first LSTM layer. This time you need to set <code>return_sequences</code> argument of the first LSTM layer to <code>False</code>:</p>\n\n<pre><code>d = 5  # how many days in the future you want to predict?\n\n## First LSTM Layer\nX = LSTM(10, input_shape = (10,14), name = 'LSTM_1')(X_input);\n\nX = RepeatVector(d)(X)\n\n## Second LSTM Layer\nX = LSTM(10, return_sequences=True)(X)\n</code></pre>\n\n<p>It's as if the first LSTM layer encodes the input data and the second LSTM layer predicts the future value(s) based on that encoded representation. Also, it is needless to say that the shape of label arrays (i.e. <code>y_train</code>) must also be <code>(n_samples, d, n_feats)</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 6937452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeJSc.jpg?s=128&g=1", "display_name": "Neeraj Natu", "link": "https://stackoverflow.com/users/6937452/neeraj-natu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2726, "favorite_count": 0, "accepted_answer_id": 53314287, "answer_count": 1, "score": 1, "last_activity_date": 1594121889, "creation_date": 1542236235, "last_edit_date": 1542271244, "question_id": 53309967, "link": "https://stackoverflow.com/questions/53309967/valueerror-error-when-checking-target-expected-dense-3-to-have-2-dimensions-b", "title": "ValueError: Error when checking target: expected dense_3 to have 2 dimensions, but got array with shape (500, 10, 14)", "body": "<p>Keras: 2.1.6, python 3.6, tensorflow 1.8.0</p>\n\n<p>I am trying to train a Sequence Model that has two LSTM layers and 3 dense layers. I had done some data preparation beforehand and setup my data in the format the LSTM layer requires it, i.e. <code>(n_samples, n_timesteps, n_features)</code>. My data has 14 features and is actually a long sequence of 5000 steps thus I have broken it down to 500 samples to 10 time steps each. Once I completed that, I started with below model, but soon ran into the error of Input shape for the last layer. I tried using Sequential and Functional API both yield the same error.</p>\n\n<pre><code>import keras \nfrom keras import callbacks\nimport tensorflow as tf\nfrom keras.models import Model\nfrom keras.layers import Input, Dense\nfrom keras.layers import LSTM\n\n\nX_input = Input(X_train.shape[1:]);\n\n## First LSTM Layer\nX = LSTM(10, return_sequences=True, input_shape = (10,14), name = 'LSTM_1')(X_input);\n\n## Second LSTM Layer\nX = LSTM(10)(X);\n\n## First Dense Layer\nX = Dense(10, activation='relu', name = 'dense_1')(X)\n\n## Second Dense Layer\nX = Dense(5, activation='relu', name = 'dense_2')(X)\n\n## Final Dense Layer\nX = Dense(1, activation='relu', name = 'dense_3')(X)\n\n    ##The model object\nmodel = Model(inputs = X_input, outputs = X, name='LSTMModel')\n\nmodel.compile(optimizer = \"Adam\" , loss = \"mean_squared_error\", metrics = ['mean_squared_error','cosine', 'mae']);\n\nModel.fit(x = X_train, y = Y_train, epochs = 300, callbacks=[tensorboard], validation_data=(X_eval,Y_eval));\n</code></pre>\n\n<p>My data is of shape <code>(500,10,14)</code>:</p>\n\n<pre><code>&gt;&gt;&gt; X_train.shape\n(500,10,14)\n</code></pre>\n\n<p>And my model summary looks like such:</p>\n\n<pre><code>model.summary()\n_________________________________________________________________\nLayer (type)                 Output Shape              Param #\n=================================================================\ninput_1 (InputLayer)         (None, 10, 14)            0\n_________________________________________________________________\nLSTM_1 (LSTM)                (None, 10, 10)            1000\n_________________________________________________________________\nLSTM_2 (LSTM)                (None, 10)                840\n_________________________________________________________________\ndense_1 (Dense)              (None, 10)                110\n_________________________________________________________________\ndense_2 (Dense)              (None, 5)                 55\n_________________________________________________________________\ndense_3 (Dense)              (None, 1)                 6\n=================================================================\nTotal params: 2,011\nTrainable params: 2,011\nNon-trainable params: 0\n_________________________________________________________________\n</code></pre>\n\n<p>Although, I still get the error:</p>\n\n<pre><code>ValueError: Error when checking target: expected dense_3 to have 2 dimensions, but got array with shape (500, 10, 14)\n</code></pre>\n\n<p>The shape of my labels are as follows:</p>\n\n<pre><code>X_train = np.reshape(Train_data_scaled.values,(500,10,14));\nY_train = np.reshape(Train_labels_scaled.values,(500,10,1));\nX_eval = np.reshape(Validation_data_scaled.values,(10,10,14));\nY_eval = np.reshape(Validation_labels_scaled.values,(10,10,1));\n</code></pre>\n\n<p>After adding the layer of RepeatVector I find another issue here is the stack trace of the same.</p>\n\n<pre><code>_________________________________________________________________\nLayer (type)                 Output Shape              Param #\n=================================================================\ninput_1 (InputLayer)         (None, 10, 14)            0\n_________________________________________________________________\nLSTM_1 (LSTM)                (None, 10)                1000\n_________________________________________________________________\nrepeat_vector_1 (RepeatVecto (None, 10, 10)            0\n_________________________________________________________________\nLSTM_2 (LSTM)                (None, 10, 10)            840\n_________________________________________________________________\ndense_1 (Dense)              (None, 10, 10)            110\n_________________________________________________________________\ndense_2 (Dense)              (None, 10, 5)             55\n_________________________________________________________________\ndense_3 (Dense)              (None, 10, 1)             6\n=================================================================\nTotal params: 2,011\nTrainable params: 2,011\nNon-trainable params: 0\n_________________________________________________________________\nTraceback (most recent call last):\n  File \".\\lstm.py\", line 76, in &lt;module&gt;\n    tf.app.run()\n  File \"C:\\Program Files\\Python36\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 126, in run\n    _sys.exit(main(argv))\n  File \".\\lstm.py\", line 67, in main\n    Hist =  Model.fit(x = X_train, y = Y_train, epochs = 300,batch_size=10, callbacks=[tensorboard], validation_data=(X_eval,Y_eval));\n  File \"C:\\Program Files\\Python36\\lib\\site-packages\\keras\\engine\\training.py\", line 1630, in fit\n    batch_size=batch_size)\n  File \"C:\\Program Files\\Python36\\lib\\site-packages\\keras\\engine\\training.py\", line 1480, in _standardize_user_data\n    exception_prefix='target')\n  File \"C:\\Program Files\\Python36\\lib\\site-packages\\keras\\engine\\training.py\", line 123, in _standardize_input_data\n    str(data_shape))\nValueError: Error when checking target: expected dense_3 to have shape (10, 1) but got array with shape (10, 14)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1542236166, "post_id": 53309940, "comment_id": 93500726, "body": "Apparently prepending the new line did something."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1542236235, "post_id": 53309940, "comment_id": 93500753, "body": "Scratch that, it&#39;s the hash."}, {"owner": {"reputation": 662, "user_id": 2325694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e557f0b61a4c84567abca5ca66e3c3f3?s=128&d=identicon&r=PG", "display_name": "Joe Linoff", "link": "https://stackoverflow.com/users/2325694/joe-linoff"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1542236240, "post_id": 53309940, "comment_id": 93500755, "body": "Yup, do you have any idea why? I didn&#39;t see anything in the docs that would explain it."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1542236285, "post_id": 53309940, "comment_id": 93500770, "body": "Do not use <code>re.M</code>. It is a common problem. The argument expected there is not the flag."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1542236303, "post_id": 53309940, "comment_id": 93500780, "body": "Nope. I suggest you amend your question for specificity - why does adding a <code>#</code> at the beginning of a string check <code>re.findall</code> results, or something similar - without the newline."}, {"owner": {"reputation": 662, "user_id": 2325694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e557f0b61a4c84567abca5ca66e3c3f3?s=128&d=identicon&r=PG", "display_name": "Joe Linoff", "link": "https://stackoverflow.com/users/2325694/joe-linoff"}, "edited": false, "score": 0, "creation_date": 1542236519, "post_id": 53309940, "comment_id": 93500859, "body": "Thank you Wictor, you solved it. I will post the answer below."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1542236697, "post_id": 53309940, "comment_id": 93500904, "body": "And I will close as a dupe once I find a good one."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1542237332, "post_id": 53309940, "comment_id": 93501123, "body": "Closed. See <a href=\"https://stackoverflow.com/questions/11958728/python-regex-findall-and-multiline\" title=\"python regex findall and multiline\">stackoverflow.com/questions/11958728/&hellip;</a>. It is a known problem. Same thing with <code>re.sub</code> - <a href=\"https://stackoverflow.com/questions/42581/python-re-sub-with-a-flag-does-not-replace-all-occurrences\">Python re.sub with a flag does not replace all occurrences</a>."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1542237476, "post_id": 53309940, "comment_id": 93501178, "body": "What is &quot;funny&quot; is that <code>re.M</code> is totally redundant for this <code>{{\\s*.+\\s*}}</code> pattern since it has no <code>^</code> or <code>$</code> anchors."}], "answers": [{"comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1542237626, "post_id": 53310089, "comment_id": 93501217, "body": "@usr2564301 <code>re.M</code> redefines what <code>^</code> and <code>$</code> match and does not change <code>.</code> begavior. <code>re.S</code> or <code>re.DOTALL</code> makes <code>.</code> match any char."}], "tags": [], "owner": {"reputation": 662, "user_id": 2325694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e557f0b61a4c84567abca5ca66e3c3f3?s=128&d=identicon&r=PG", "display_name": "Joe Linoff", "link": "https://stackoverflow.com/users/2325694/joe-linoff"}, "is_accepted": true, "score": 0, "last_activity_date": 1542237243, "last_edit_date": 1542237243, "creation_date": 1542236835, "answer_id": 53310089, "question_id": 53309940, "link": "https://stackoverflow.com/questions/53309940/why-does-python-re-findall-for-the-same-regex-produce-different-results-for-tw/53310089#53310089", "title": "Why does python re.findall() for the same regex produce different results for two equivalent input strings?", "body": "<p>I was using <code>re.M</code> incorrectly, this is the corrected code. Many thanks to [@Wictor][1] for pointing this out. Also, a number of others pointed out that <code>re.M</code> is not needed at all. Thank you all.</p>\n\n<pre><code>#!/usr/bin/env python\nimport re\n\nex1 = '''\\\nipv4: {{ var1 }}\ntimestamp: {{ var2 }}\n'''\n\nex2 = '#\\n' + ex1\n\nre1 = re.compile(r'{{\\s*.+\\s*}}')\nprint(re1.findall(ex1))  # 2 matches\nprint(re1.findall(ex2))  # 2 matches\nassert re1.findall(ex1, re.M) == re1.findall(ex2, re.M)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['{{ var1 }}', '{{ var2 }}']\n['{{ var1 }}', '{{ var2 }}']\n</code></pre>\n"}], "owner": {"reputation": 662, "user_id": 2325694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e557f0b61a4c84567abca5ca66e3c3f3?s=128&d=identicon&r=PG", "display_name": "Joe Linoff", "link": "https://stackoverflow.com/users/2325694/joe-linoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1542237320, "accepted_answer_id": 53310089, "answer_count": 1, "score": 1, "last_activity_date": 1542237243, "creation_date": 1542236041, "question_id": 53309940, "link": "https://stackoverflow.com/questions/53309940/why-does-python-re-findall-for-the-same-regex-produce-different-results-for-tw", "closed_reason": "Duplicate", "title": "Why does python re.findall() for the same regex produce different results for two equivalent input strings?", "body": "<p>Why is <code>re.findall()</code> only showing a <em>single</em> match for the first expression (<code>ex1</code>) but <em>two matches</em> for the second expression (<code>ex2</code>). I expected two matches for both cases because they appear to be equivalent for this case.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/bin/env python\nimport re\n\n# first expression (no leading new line)\nex1 = '''\\\nipv4: {{ var1 }}\ntimestamp: {{ var2 }}\n'''\n\n# second expression, prepended '#\\n'\nex2 = '#\\n' + ex1\n\nre1 = re.compile(r'{{\\s*.+\\s*}}')\n\n# Why are they different?\nprint(re1.findall(ex1, re.M))  # 1 match\nprint(re1.findall(ex2, re.M))  # 2 matches\n#assert re1.findall(ex1, re.M) == re1.findall(ex2, re.M)\n</code></pre>\n\n<p>Here is the output. It is the same for python2 and python3:</p>\n\n<pre><code>['{{ var2 }}']\n['{{ var1 }}', '{{ var2 }}']\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1542236106, "creation_date": 1542236106, "answer_id": 53309948, "question_id": 53309909, "link": "https://stackoverflow.com/questions/53309909/what-is-the-python-equivalent-for-the-r-function-names/53309948#53309948", "title": "What is the Python equivalent for the R function names( )?", "body": "<p>There is no equivalent. The concept does not exist in Python. Some specific types have roughly analogous concepts, like the index of a Pandas Series, but arbitrary Python sequence types don't have names for their elements.</p>\n"}, {"tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": true, "score": 0, "last_activity_date": 1542236219, "creation_date": 1542236219, "answer_id": 53309964, "question_id": 53309909, "link": "https://stackoverflow.com/questions/53309909/what-is-the-python-equivalent-for-the-r-function-names/53309964#53309964", "title": "What is the Python equivalent for the R function names( )?", "body": "<p>not sure if there is anything directly equivalent, especially for getting names.  some objects, like <code>dict</code>s, provide <code>.keys()</code> method that allows getting things out</p>\n\n<p>sort of relevant are the <code>getattr</code> and <code>setattr</code> primitives, but it's pretty rare to use these in production code</p>\n\n<p>I was going to talk about Pandas, but I see user2357112 has just pointed that out already!</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 9815306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hM9kMzukFU4/AAAAAAAAAAI/AAAAAAAAIS8/ZJbkXLjGTY4/photo.jpg?sz=128", "display_name": "surya ambati", "link": "https://stackoverflow.com/users/9815306/surya-ambati"}, "is_accepted": false, "score": 1, "last_activity_date": 1588922210, "last_edit_date": 1588922210, "creation_date": 1588897518, "answer_id": 61669971, "question_id": 53309909, "link": "https://stackoverflow.com/questions/53309909/what-is-the-python-equivalent-for-the-r-function-names/61669971#61669971", "title": "What is the Python equivalent for the R function names( )?", "body": "<p>In Python (pandas) we have <code>.columns</code> function which is equivalent to <code>names()</code> function in R:</p>\n\n<p>Ex:</p>\n\n<pre><code># Import pandas package  \nimport pandas as pd  \n\n# making data frame  \ndata = pd.read_csv(\"Filename.csv\")  \n\n# Extract column names\nlist(data.columns) \n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 9100276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TXse.jpg?s=128&g=1", "display_name": "Matthaeus Gaius Caesar", "link": "https://stackoverflow.com/users/9100276/matthaeus-gaius-caesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1664, "favorite_count": 0, "accepted_answer_id": 53309964, "answer_count": 3, "score": 0, "last_activity_date": 1588922210, "creation_date": 1542235859, "last_edit_date": 1542236301, "question_id": 53309909, "link": "https://stackoverflow.com/questions/53309909/what-is-the-python-equivalent-for-the-r-function-names", "title": "What is the Python equivalent for the R function names( )?", "body": "<p>The function <code>names()</code> in R gets or sets the names of an object. What is the Python equivalent to this function, including import?</p>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>names(x)\n\nnames(x) &lt;- value\n</code></pre>\n\n<p><strong>Arguments:</strong></p>\n\n<p>(x) an R object.</p>\n\n<p>(value) a character vector of up to the same length as x, or NULL.</p>\n\n<p><strong>Details:</strong></p>\n\n<p><code>Names()</code> is a generic accessor function, and names&lt;- is a generic replacement function. The default methods get and set the \"names\" attribute of a vector (including a list) or pairlist.</p>\n\n<p><a href=\"https://www.rdocumentation.org/packages/base/versions/3.5.1/topics/names\" rel=\"nofollow noreferrer\">Continue R Documentation on Names( )</a></p>\n"}, {"tags": ["python", "scrapy", "web-crawler"], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 8283966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yDgBR.jpg?s=128&g=1", "display_name": "Sewake", "link": "https://stackoverflow.com/users/8283966/sewake"}, "is_accepted": true, "score": 0, "last_activity_date": 1542359978, "creation_date": 1542359978, "answer_id": 53334787, "question_id": 53309888, "link": "https://stackoverflow.com/questions/53309888/how-to-avoid-undesired-fields-in-response-scrapy/53334787#53334787", "title": "How to avoid undesired fields in response (scrapy)", "body": "<p>Please use a more explicit title to help other people who may have the same concerns; \"garbage\" is a very vague word.</p>\n\n<p>You can have more information about the <code>meta</code> attribute in Scrapy documentation <a href=\"https://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request.meta\" rel=\"nofollow noreferrer\">here</a></p>\n\n<blockquote>\n  <p>A dict that contains arbitrary metadata for this request.  This dict\n  is empty for new Requests, and is usually populated by different\n  Scrapy components (extensions, middlewares, etc).  So the data\n  contained in this dict depends on the extensions you have enabled.</p>\n</blockquote>\n\n<p>If you want to avoid having all these informations populated by Scrapy in your json, you can do as follow:</p>\n\n<pre><code>def parse(self, response):\n  for tfg in response.css('li.row-fluid'):\n    doc={}\n    data = tfg.css('book-basics')\n    doc['titulo'] = tfg.css('h2 a::text').extract_first()\n    doc['url'] = response.urljoin(tfg.css('h2 a::attr(href)').extract_first())\n\n    request = scrapy.Request(doc['url'], callback=self.parse_detail)\n    request.meta['detail'] = doc\n    yield request\n\n  next = response.css('a.next::attr(href)').extract_first()\n  if next is not None:\n    next_page = response.urljoin(next)\n    yield scrapy.Request(next_page, callback=self.parse)\n\ndef parse_detail(self, response):\n  detail = response.meta['detail']\n  detail['page_count'] = ' '.join(response.css('dd.page.count::text').extract())\n  detail['keywords'] = ' '.join(response.css('div.descripcio a::text').extract())\n  yield detail\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10654477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3faa15d3de5b57c3af521ab5286b352?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Calvo", "link": "https://stackoverflow.com/users/10654477/marcos-calvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 53334787, "answer_count": 1, "score": -2, "last_activity_date": 1542477802, "creation_date": 1542235713, "last_edit_date": 1542477802, "question_id": 53309888, "link": "https://stackoverflow.com/questions/53309888/how-to-avoid-undesired-fields-in-response-scrapy", "title": "How to avoid undesired fields in response (scrapy)", "body": "<p>Hi and thanks in advance:</p>\n\n<p>When I run scrapy I put the items in a .json but instead of the items I want I get some garbage:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iAJdO.png\" rel=\"nofollow noreferrer\">download latency,download tieout, depth and download slot are the not desired ones</a></p>\n\n<pre><code> 1 import scrapy\n 2\n 3 class LibresSpider(scrapy.Spider):\n 4     name = 'libres'\n 5     allowed_domains = ['www.todostuslibros.com']\n 6     start_urls = ['https://www.todostuslibros.com/mas_vendidos/']\n 7\n 8     def parse(self, response):\n 9         for tfg in response.css('li.row-fluid'):\n10             doc={}\n11             data = tfg.css('book-basics')\n12             doc['titulo'] = tfg.css('h2 a::text').extract_first()\n13             doc['url'] = response.urljoin(tfg.css('h2 a::attr(href)').extract_first())\n14\n15             yield scrapy.Request(doc['url'], callback=self.parse_detail, meta=doc)\n16\n17         next = response.css('a.next::attr(href)').extract_first()\n18         if next is not None:\n19            next_page = response.urljoin(next)\n20            yield scrapy.Request(next_page, callback=self.parse)\n21\n22     def parse_detail(self, response):\n23\n24         detail = response.meta\n25         detail['page_count'] = ' '.join(response.css('dd.page.count::text').extract())\n26         detail['keywords'] = ' '.join(response.css('div.descripcio a::text').extract())\n27\n28         yield detail\n</code></pre>\n\n<p>I know that those undesired data came with the response (line 26) but I would like to know how to avoid that data which ends in my json.</p>\n"}, {"tags": ["python", "ssh"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5739247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c44214d539e1c6f25dadd55d9e6db7b?s=128&d=identicon&r=PG&f=1", "display_name": "LUX", "link": "https://stackoverflow.com/users/5739247/lux"}, "is_accepted": false, "score": 1, "last_activity_date": 1542335017, "last_edit_date": 1542335017, "creation_date": 1542334620, "answer_id": 53330517, "question_id": 53309879, "link": "https://stackoverflow.com/questions/53309879/paramiko-with-continuous-stdout-while-running-remote-python-script/53330517#53330517", "title": "Paramiko with continuous stdout while running remote python script", "body": "<p>Problem solved. The solution was actually very simple. I had to request a psuedo-terminal from the server when running a Python script (<code>command</code> = <code>'python3.6 test.py'</code>). This is done in Paramiko by simply setting the <code>get_pty</code> bool flag to <code>True</code>. See below (note the <code>get_pty</code> in <code>exec_command</code>):</p>\n\n<pre><code>class SSH:\n    client = None\n\n    def __init__(self, address, username, password):\n        self.client = client.SSHClient()\n        self.client.set_missing_host_key_policy(client.AutoAddPolicy())\n        self.client.connect(address, username=username, password=password, look_for_keys=False)\n\n    def send_command(self, command):\n        if(self.client):\n            stdin, stdout, stderr = self.client.exec_command(command, get_pty=True)\n            while not stdout.channel.exit_status_ready():\n                OUT = stdout.channel.recv(1024)\n                print(OUT)\n        else:\n            print(\"Connection not opened.\")\n</code></pre>\n\n<p>I'm now successfully continuously printing the output of the Python script in real-time.</p>\n"}], "owner": {"reputation": 11, "user_id": 5739247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c44214d539e1c6f25dadd55d9e6db7b?s=128&d=identicon&r=PG&f=1", "display_name": "LUX", "link": "https://stackoverflow.com/users/5739247/lux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542335017, "creation_date": 1542235689, "last_edit_date": 1542316340, "question_id": 53309879, "link": "https://stackoverflow.com/questions/53309879/paramiko-with-continuous-stdout-while-running-remote-python-script", "title": "Paramiko with continuous stdout while running remote python script", "body": "<p>I'm trying to run a remote Python script using Paramiko and have it forward anything Python prints back to the client in realtime (i.e. continuous stdout). I connect to my server by calling my class with the following:</p>\n\n<pre><code>class SSH:\n    client = None\n\n    def __init__(self, address, username, password):\n        self.client = client.SSHClient()\n        self.client.set_missing_host_key_policy(client.AutoAddPolicy())\n        self.client.connect(address, username=username, password=password, look_for_keys=False)\n</code></pre>\n\n<p>I then send commands to the server through my <code>send_command</code> function:</p>\n\n<pre><code>def send_command(self, command):\n    if(self.client):\n        stdin, stdout, stderr = self.client.exec_command(command)\n        for i in range(5): # just print 5 bytes\n            print(stdout.channel.recv(1))\n            time.sleep(0.1)\n    else:\n        print(\"Connection not opened.\")\n</code></pre>\n\n<p>Normally, this would work with any continuous/looping command that fills the buffer on stdout as it loops. My problem is that for some reason stdout is filled only when the Python script finishes running, and anything that Python would output comes up only AFTER the script finishes. I want it to print <strong>while</strong> the script is running. This is the test script I'm using:</p>\n\n<pre><code>from time import sleep\nprint(\"Test.\")\nsleep(1)\nprint(\"Test again.\")\nsleep(2)\nprint(\"Final test.\")\n</code></pre>\n\n<p>Is there a way around this or am I doing anything wrong? Thanks in advance.</p>\n"}, {"tags": ["python", "python-2.7", "tkinter", "pygame"], "comments": [{"owner": {"reputation": 61, "user_id": 7904665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153d0f4f27e5fb90b1413ffbe6e72d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Goldman Lee", "link": "https://stackoverflow.com/users/7904665/goldman-lee"}, "edited": false, "score": 0, "creation_date": 1542235995, "post_id": 53309863, "comment_id": 93500682, "body": "I&#39;m not sure if this helps but mainloop isn&#39;t a variable, it&#39;s a function, try <code>top.mainloop()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 10637784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3dd17057bd7250516aaa243b5b8a0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Orang O&#39; Man", "link": "https://stackoverflow.com/users/10637784/orang-o-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1542241177, "creation_date": 1542241177, "answer_id": 53310721, "question_id": 53309863, "link": "https://stackoverflow.com/questions/53309863/how-to-make-tkinter-pygame-work-together/53310721#53310721", "title": "How to make Tkinter &amp; pygame work together?", "body": "<p>Turns out you don't need Tkinter you can just do this: </p>\n\n<pre><code>import pygame\nfrom pygame.locals import *\n\npygame.init()\nwhite = (255,255,255)\nsize = [1024, 720]\nscreen = pygame.display.set_mode(size)\npygame.display.set_caption(\"Hello Universe\")\ndone = False\nclock = pygame.time.Clock()\nbackground_image = pygame.image.load(\"background_image.gif\").convert()\n\nwhile done == False:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n\n\n        screen.blit(background_image, [0,0])\n        pygame.display.flip()\n        clock.tick(60)\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10637784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3dd17057bd7250516aaa243b5b8a0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Orang O&#39; Man", "link": "https://stackoverflow.com/users/10637784/orang-o-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542241177, "creation_date": 1542235554, "last_edit_date": 1542237091, "question_id": 53309863, "link": "https://stackoverflow.com/questions/53309863/how-to-make-tkinter-pygame-work-together", "title": "How to make Tkinter &amp; pygame work together?", "body": "<p>The background of my game is an image the only problem is that two windows appear, I only want one. Two windows appear, one is small and with the image and the other is large but with nothing in it. What can I do to make both work together? Code: </p>\n\n<pre><code>import pygame\nfrom pygame.locals import *\nfrom Tkinter import *\nimport Tkinter as Tk\n\nblack = (\"#000000\")\nwhite = (\"#FFFFFF\")\ngreen = (\"#00CD00\")\nyellow = (\"#FFFF00\")\n\npygame.init()\ndisplay = pygame.display.set_mode((1024,720))\npygame.display.set_caption(\"Hello Universe\")\n\nroot = Tk.Tk()\nbackground_image=Tk.PhotoImage(file=\"/home/jar/python/background_image.gif\")\nbackground_label = Tk.Label(root, image=background_image)\nbackground_label.place(x=0, y=0, relwidth=1, relheight=1)\nroot.mainloop()\n\nquit = False\nwhile not quit:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            quit = True\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 709, "user_id": 583088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c02e06d197dea0eae72a635f31f3991?s=128&d=identicon&r=PG", "display_name": "user583088", "link": "https://stackoverflow.com/users/583088/user583088"}, "edited": false, "score": 0, "creation_date": 1542236161, "post_id": 53309831, "comment_id": 93500721, "body": "modifying this question as I also did                                                                      def shift_bits(bayer):     return (bayer &gt;&gt; 2) getting error in both scenarios                                    TypeError: ufunc &#39;right_shift&#39; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &#39;&#39;safe&#39;&#39;"}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1542242332, "post_id": 53309831, "comment_id": 93502501, "body": "Can you show us an example of input, and the expected output? Where are you getting your &quot;raw data&quot; from?"}, {"owner": {"reputation": 709, "user_id": 583088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c02e06d197dea0eae72a635f31f3991?s=128&d=identicon&r=PG", "display_name": "user583088", "link": "https://stackoverflow.com/users/583088/user583088"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1542242694, "post_id": 53309831, "comment_id": 93502604, "body": "I have camera raw data it is 14bit data"}], "owner": {"reputation": 709, "user_id": 583088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c02e06d197dea0eae72a635f31f3991?s=128&d=identicon&r=PG", "display_name": "user583088", "link": "https://stackoverflow.com/users/583088/user583088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542235327, "creation_date": 1542235327, "question_id": 53309831, "link": "https://stackoverflow.com/questions/53309831/how-do-i-convert-14-bit-bayer-data-to-12-bit-data-in-python", "title": "how do i convert 14 bit bayer data to 12 bit data in python", "body": "<p>I need to convert  14bit bayer (raw ) data to 12-bit raw data in python. I know I need to use bit shifting right. but I am not sure how do I use it in python\ni tried this \nnewbayer=np.right_shift(bayer,2)</p>\n\n<p>not sure i am doing it right.</p>\n"}, {"tags": ["python", "turtle-graphics"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 0, "creation_date": 1542238214, "post_id": 53310262, "comment_id": 93501397, "body": "So you&#39;re saying I need to place my end fill under def building instead of cityscape"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 0, "creation_date": 1542238308, "post_id": 53310262, "comment_id": 93501425, "body": "@DonniBenotti, no, I&#39;m saying you need one <code>end_fill()</code> for every <code>begin_fill()</code>.  I&#39;m adding a complete code listing to my answer."}, {"owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "edited": false, "score": 0, "creation_date": 1542239279, "post_id": 53310262, "comment_id": 93501706, "body": "I misread that entirely the first time, I was a little stressed, but it worked out. thanks for your help. It turned out well in the end."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1542238350, "last_edit_date": 1542238350, "creation_date": 1542237805, "answer_id": 53310262, "question_id": 53309808, "link": "https://stackoverflow.com/questions/53309808/python-turtle-graphics-filling-issue/53310262#53310262", "title": "Python turtle graphics filling issue", "body": "<p>You left <code>turtle.end_fill()</code> off the end of your <code>building()</code> function.  I'd also write <code>main()</code> as follows:</p>\n\n<pre><code>def main():\n    turtle.setup(900, 900)\n    turtle.speed('fastest')\n    cityscape(-300, -400, 300, 'gray')\n    cityscape(0, -400, 300, 'gray')\n    building(-300, -100, 'gray')\n    turtle.mainloop()\n</code></pre>\n\n<p>Complete code listing with the above fix and some style changes:</p>\n\n<pre><code>from turtle import Screen, Turtle\n\ndef main():\n    screen = Screen()\n    screen.setup(900, 900)\n\n    yertle = Turtle(visible=False)\n    yertle.speed('fastest')\n\n    cityscape(yertle, -300, -400, 300, 'gray')\n    cityscape(yertle, 0, -400, 300, 'gray')\n    building(yertle, -300, -100, 'gray')\n\n    screen.mainloop()\n\ndef cityscape(turtle, x, y, width, color):\n    turtle.penup()\n    turtle.goto(x, y)\n    turtle.pendown()\n\n    turtle.color(color)\n\n    turtle.begin_fill()\n    for _ in range(4):\n        turtle.forward(width)\n        turtle.left(90)\n    turtle.end_fill()\n\ndef building(turtle, x, y, color):\n    turtle.penup()\n    turtle.goto(x, y)\n    turtle.pendown()\n\n    turtle.color(color)\n\n    turtle.begin_fill()\n    turtle.forward(100)\n    turtle.left(90)\n    turtle.forward(100)\n    turtle.right(90)\n    turtle.forward(100)\n    turtle.left(90)\n    turtle.forward(200)\n    turtle.right(90)\n    turtle.forward(100)\n    turtle.right(90)\n    turtle.forward(250)\n    turtle.left(90)\n    turtle.forward(70)\n    turtle.left(90)\n    turtle.forward(175)\n    turtle.right(90)\n    turtle.forward(80)\n    turtle.right(90)\n    turtle.forward(100)\n    turtle.left(90)\n    turtle.forward(70)\n    turtle.right(90)\n    turtle.forward(425)\n    turtle.right(90)\n    turtle.forward(425)\n    turtle.end_fill()\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10583281, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964697760497410/picture?type=large", "display_name": "Donni Benotti", "link": "https://stackoverflow.com/users/10583281/donni-benotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542238583, "creation_date": 1542235235, "last_edit_date": 1542238583, "question_id": 53309808, "link": "https://stackoverflow.com/questions/53309808/python-turtle-graphics-filling-issue", "title": "Python turtle graphics filling issue", "body": "<p>I'm supposed to draw a building for my Python class, and the <code>fillcolor()</code> function does its job for two of the shapes, but for the last shape, even though I finish the circuit so to speak, it won't fill it with the color I need:</p>\n\n<pre><code>import turtle\n\ndef main():\n    turtle.setup(900, 900)\n    cityscape(-300, -400, 300, 'gray')\n    cityscape(0, -400, 300, 'gray')\n    building(-300, -100, 'gray')\n    turtle.speed(0)\n\ndef cityscape(x, y, width, color):\n    turtle.penup()\n    turtle.goto(x, y)\n    turtle.pencolor('gray')\n    turtle.fillcolor(color)\n    turtle.pendown()\n    turtle.begin_fill()\n    for count in range(4):\n        turtle.forward(width)\n        turtle.left(90)\n    turtle.end_fill()\n\ndef building(x, y, color):\n    turtle.penup()\n    turtle.goto(x, y)\n    turtle.fillcolor(color)\n    turtle.pendown()\n    turtle.begin_fill()\n    turtle.forward(100)\n    turtle.left(90)\n    turtle.forward(100)\n    turtle.right(180)\n    turtle.left(90)\n    turtle.forward(100)\n    turtle.left(90)\n    turtle.forward(200)\n    turtle.right(90)\n    turtle.forward(100)\n    turtle.right(90)\n    turtle.forward(250)\n    turtle.left(90)\n    turtle.forward(70)\n    turtle.left(90)\n    turtle.forward(175)\n    turtle.right(90)\n    turtle.forward(80)\n    turtle.right(90)\n    turtle.forward(100)\n    turtle.left(90)\n    turtle.forward(70)\n    turtle.right(90)\n    turtle.forward(425)\n    turtle.right(90)\n    turtle.forward(425)\n\n\nmain()\n</code></pre>\n\n<p>How can I resolve this?</p>\n"}, {"tags": ["python", "flask", "alembic"], "comments": [{"owner": {"reputation": 700, "user_id": 6274595, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/fbccb62f5faf92749bd3183879fbd21e?s=128&d=identicon&r=PG&f=1", "display_name": "PL200", "link": "https://stackoverflow.com/users/6274595/pl200"}, "edited": false, "score": 3, "creation_date": 1542235552, "post_id": 53309805, "comment_id": 93500549, "body": "Restore the deleted folder would be a good first step."}, {"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 2, "creation_date": 1542235589, "post_id": 53309805, "comment_id": 93500562, "body": "You <i>are</i> using some kind of version control, right?"}, {"owner": {"reputation": 69, "user_id": 9283843, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O9UQPK0In_g/AAAAAAAAAAI/AAAAAAAAADk/leOLUlBh7JI/photo.jpg?sz=128", "display_name": "GM Crow", "link": "https://stackoverflow.com/users/9283843/gm-crow"}, "edited": false, "score": 0, "creation_date": 1542236394, "post_id": 53309805, "comment_id": 93500809, "body": "Here&#39;s the thing... I wasn&#39;t using any version control."}, {"owner": {"reputation": 1365, "user_id": 4032503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZyGYGtRux0/AAAAAAAAAAI/AAAAAAAACPo/xgHTSkTRldM/photo.jpg?sz=128", "display_name": "noslenkwah", "link": "https://stackoverflow.com/users/4032503/noslenkwah"}, "edited": false, "score": 0, "creation_date": 1542241231, "post_id": 53309805, "comment_id": 93502229, "body": "If you are OK losing your old migrations, just remove alembic and re-initialize it. Oh and also backup everything before you start, though I think that lesson has already been learned."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 2722347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed1226ad741d954044eed43355456f33?s=128&d=identicon&r=PG", "display_name": "txtsd", "link": "https://stackoverflow.com/users/2722347/txtsd"}, "is_accepted": false, "score": 6, "last_activity_date": 1542473781, "creation_date": 1542473781, "answer_id": 53353420, "question_id": 53309805, "link": "https://stackoverflow.com/questions/53309805/reset-alembic-after-deleting-migration-folder/53353420#53353420", "title": "Reset Alembic after deleting migration folder", "body": "<p>Delete that particular record in the table alembic_version that's in your database. There's only one varchar column called version_num, so this expression should work:</p>\n\n<p><code>delete from alembic_version where version_num='470572fac7a1';</code></p>\n"}, {"comments": [{"owner": {"reputation": 185, "user_id": 10426919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c62e6677fb335ac026469f3348dcd19?s=128&d=identicon&r=PG&f=1", "display_name": "boxcarcoder", "link": "https://stackoverflow.com/users/10426919/boxcarcoder"}, "edited": false, "score": 0, "creation_date": 1610471869, "post_id": 56568978, "comment_id": 116141743, "body": "After deleting the <code>&#47;migrations</code> folder, make sure the new <code>&#47;migrations</code> folder contains the following files: alembic.ini, env.py, and script.py.mako."}], "tags": [], "owner": {"reputation": 758, "user_id": 7578588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff2332a2ae76b3c1cec7743b94ca7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Kortink", "link": "https://stackoverflow.com/users/7578588/mark-kortink"}, "is_accepted": false, "score": 3, "last_activity_date": 1560368681, "last_edit_date": 1560368681, "creation_date": 1560366968, "answer_id": 56568978, "question_id": 53309805, "link": "https://stackoverflow.com/questions/53309805/reset-alembic-after-deleting-migration-folder/56568978#56568978", "title": "Reset Alembic after deleting migration folder", "body": "<p>Delete the <code>/migrations</code> directory and rename/replicate your applications database. Then start from scratch.</p>\n\n<pre><code>flask db init\nflask db migrate\nflask db upgrade\n</code></pre>\n\n<p>Now repopulate your new empty database with data from your backup.</p>\n"}], "owner": {"reputation": 69, "user_id": 9283843, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O9UQPK0In_g/AAAAAAAAAAI/AAAAAAAAADk/leOLUlBh7JI/photo.jpg?sz=128", "display_name": "GM Crow", "link": "https://stackoverflow.com/users/9283843/gm-crow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8602, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1583166330, "creation_date": 1542235215, "last_edit_date": 1542243017, "question_id": 53309805, "link": "https://stackoverflow.com/questions/53309805/reset-alembic-after-deleting-migration-folder", "title": "Reset Alembic after deleting migration folder", "body": "<p>I accidentally deleted my migrations folder. So I ran <code>flask db init</code>, and everything ran smoothly. But when I ran <code>flask db migrate</code>, it gave me this error:</p>\n\n<pre><code>INFO  [alembic.runtime.migration] Context impl SQLiteImpl.\nINFO  [alembic.runtime.migration] Will assume non-transactional DDL.\nERROR [root] Error: Can't locate revision identified by '470572fac7a1'\n</code></pre>\n\n<p>From what I understand, it's looking for my other migration folder which is long gone. How can I solve this?</p>\n"}, {"tags": ["python", "python-2.7", "pandas", "dataframe", "group-by"], "comments": [{"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 1, "creation_date": 1542236194, "post_id": 53309776, "comment_id": 93500741, "body": "You need to groupby both position and draft year"}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "reply_to_user": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1542236418, "post_id": 53309776, "comment_id": 93500822, "body": "yeah but how do i get the count and the median in the same sentence? or i have to do it separately? Because when i end it with the <code>count</code> method i get a count for all the columns, so i cant get the median"}], "answers": [{"comments": [{"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "edited": false, "score": 0, "creation_date": 1542272710, "post_id": 53310882, "comment_id": 93511662, "body": "Great answer Chris, this is what i was really looking for. Thanks a lot!! :)"}, {"owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "reply_to_user": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "edited": false, "score": 1, "creation_date": 1542289262, "post_id": 53310882, "comment_id": 93521466, "body": "@Miguel2488 there technically may be players with the same name in the same position so you may want to count <code>ID</code> and not <code>Player</code> as I did in my example."}, {"owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "edited": false, "score": 0, "creation_date": 1542311710, "post_id": 53310882, "comment_id": 93534391, "body": "No chris it&#39;s ok, i wanted to see how many times the players&#39; names were repeated to see if they were playing in different positions or not, and this did the job. Thank you!!"}], "tags": [], "owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "is_accepted": true, "score": 3, "last_activity_date": 1542242598, "creation_date": 1542242598, "answer_id": 53310882, "question_id": 53309776, "link": "https://stackoverflow.com/questions/53309776/grouping-columns-and-extracting-statistics-in-python-3/53310882#53310882", "title": "Grouping columns and extracting statistics in Python 3", "body": "<p>You can <code>groupby</code> and use <code>agg</code></p>\n\n<pre><code>df.groupby(['Position', 'Draft Year']).agg({'Superstar':'median', 'Player':'count'})\n\n                           Superstar    Player\nPosition    Draft Year      \nC            2015           0.096742       2\nPG           2015           0.152033       1\nSF           2015           0.075664       2\n</code></pre>\n\n<p>or you can create a function</p>\n\n<pre><code>def my_agg(x):\n    names = {\n        'Superstar Median': x['Superstar'].median(),\n        'Player Count': x['Player'].count(),\n    }\n\n    return pd.Series(names, index=['Superstar Median', 'Player Count'])\n\ndf.groupby(['Position', 'Draft Year']).apply(my_agg)\n\n                        Superstar Median    Player Count\nPosition    Draft Year      \nC             2015          0.096742           2.0\nPG            2015          0.152033           1.0\nSF            2015          0.075664           2.0\n</code></pre>\n"}], "owner": {"reputation": 1194, "user_id": 9542954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624734454261564/picture?type=large", "display_name": "Miguel 2488", "link": "https://stackoverflow.com/users/9542954/miguel-2488"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53310882, "answer_count": 1, "score": 1, "last_activity_date": 1542242598, "creation_date": 1542235080, "question_id": 53309776, "link": "https://stackoverflow.com/questions/53309776/grouping-columns-and-extracting-statistics-in-python-3", "title": "Grouping columns and extracting statistics in Python 3", "body": "<p>I'm using the NBA Draft dataframe, which can be obtained <a href=\"https://eimtgit.uoc.edu/prog_datasci_cat/prog_datasci_4/raw/ba658d89bd4e0ae4452ca22b1a077b6a7a2f4bae/data/historical_projections.csv?inline=false\" rel=\"nofollow noreferrer\">here</a> and reading it with pandas.</p>\n\n<p>This is how it looks like:</p>\n\n<pre><code>              Player  Position   ID         Draft Year Projected SPM Superstar  Starter Role Player Bust\n0   Karl-Anthony Towns  C   karl-anthony-towns  2015    1.030606    0.134767    0.427183    0.163083    0.274967\n1   Justise Winslow     SF  justise-winslow     2015    0.875329    0.083529    0.510905    0.176767    0.228800\n2   Stanley Johnson     SF  stanley-johnson     2015    0.679493    0.067800    0.423733    0.278500    0.229967\n3   Jahlil Okafor       C   jahlil-okafor       2015    0.521661    0.058717    0.409900    0.235533    0.295850\n4   D`Angelo Russell    PG  d-angelo-russell    2015    0.511967    0.152033    0.342283    0.096583    0.409100\n</code></pre>\n\n<p>Now what i was trying was to group by the <code>position</code> column and get the count of players in each <code>draft year</code>. At the same time i wanted to display the median of the <code>superstar</code> column. </p>\n\n<p>This is my code so far:</p>\n\n<pre><code>data['Median'] = data['Superstar'].median()\ndata[data['Draft Year']&gt;=2015].groupby('Position').count()\n</code></pre>\n\n<p>But i think this is not yelling what i want. Someone can please point me in the right direction?</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 6, "creation_date": 1542235013, "post_id": 53309752, "comment_id": 93500378, "body": "You never <code>open()</code> csv_merge"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1542235026, "post_id": 53309752, "comment_id": 93500384, "body": "<code>csv_merge != csv_in</code>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1542235042, "post_id": 53309752, "comment_id": 93500391, "body": "How was <code>csv_merge</code> initialized?"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1542235197, "post_id": 53309752, "comment_id": 93500439, "body": "Even if you did open <code>csv_merge</code>, you close it each time through the loop."}, {"owner": {"reputation": 85, "user_id": 2934524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8nii.gif?s=128&g=1", "display_name": "MrKarma4u", "link": "https://stackoverflow.com/users/2934524/mrkarma4u"}, "edited": false, "score": 0, "creation_date": 1542235920, "post_id": 53309752, "comment_id": 93500662, "body": "I have edited my question."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 8691323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97e831ee35878d2f0cffc3d84c4291?s=128&d=identicon&r=PG&f=1", "display_name": "jtwilson", "link": "https://stackoverflow.com/users/8691323/jtwilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1542236709, "creation_date": 1542236709, "answer_id": 53310058, "question_id": 53309752, "link": "https://stackoverflow.com/questions/53309752/i-am-confused-with-my-python-valueerror-i-o-operation-on-closed-file/53310058#53310058", "title": "I am confused with my Python. ValueError: I/O operation on closed file", "body": "<p>You never open csv_merge properly and even if you do you still close csv_merge after the first item in csv_list is written.</p>\n\n<p>Why are you even using things like <code>csv_merge.close()</code>?<br>\nThe convention is to use things like <code>with open(csv_merge, 'w') as f:</code>, that way the file always gets closed, even if the loop or script fails to execute properly.</p>\n"}], "owner": {"reputation": 85, "user_id": 2934524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8nii.gif?s=128&g=1", "display_name": "MrKarma4u", "link": "https://stackoverflow.com/users/2934524/mrkarma4u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1542248345, "creation_date": 1542234868, "last_edit_date": 1592644375, "question_id": 53309752, "link": "https://stackoverflow.com/questions/53309752/i-am-confused-with-my-python-valueerror-i-o-operation-on-closed-file", "title": "I am confused with my Python. ValueError: I/O operation on closed file", "body": "<p>Kida lost here. I am trying to get a consolidated csv and I keep getting this error:</p>\n<blockquote>\n<p>File &quot;consolidate.py&quot;, line 26, in csv_merge.write(line)</p>\n<p>ValueError: I/O operation on closed file.</p>\n</blockquote>\n<p>I tried moving indentation:</p>\n<pre><code>csv_header='name,location,age,phonenumber'\ncsv_out = 'consolidated.csv'\n\ncsv_d\ndir_tree = os.walk(csv_dir)\nfor dirpath, dirnames, filenames in dir_tree:\n   pass\n\ncsv_list = []\nfor file in filenames:\n   if file.endswith('.csv'):\n      csv_list.append(file)\n\ncsv_merge = open(csv_out, 'w')\ncsv_merge.write(csv_header)\ncsv_merge.write('\\n')ir = os.getcwd()\nfor file in csv_list:\n        csv_in = open(file)\n        for line in csv_in:\n           if line.startswith(csv_header):\n              continue\n           csv_merge.write(line)\n        csv_in.close()\n        csv_merge.close()\nprint('Verify consolidated CSV file : ' + csv_out)\n</code></pre>\n<p>But this didn't work. How can I resolve this error?</p>\n"}, {"tags": ["python", "csv", "flask", "pythonanywhere"], "comments": [{"owner": {"reputation": 1365, "user_id": 4032503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZyGYGtRux0/AAAAAAAAAAI/AAAAAAAACPo/xgHTSkTRldM/photo.jpg?sz=128", "display_name": "noslenkwah", "link": "https://stackoverflow.com/users/4032503/noslenkwah"}, "edited": false, "score": 1, "creation_date": 1542235486, "post_id": 53309707, "comment_id": 93500520, "body": "According to <a href=\"https://stackoverflow.com/questions/20015550/read-file-data-without-saving-it-in-flask\">this</a> question, the solution is to do <code>request_file.read()</code> instead of <code>request_file.stream.read()</code>. I&#39;ve never done it that way myself but it seemed to work for that question&#39;s OP."}], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1542301433, "last_edit_date": 1542301433, "creation_date": 1542295165, "answer_id": 53322572, "question_id": 53309707, "link": "https://stackoverflow.com/questions/53309707/transform-an-uploaded-csv-file-upload-with-flask/53322572#53322572", "title": "Transform an Uploaded CSV File Upload with Flask", "body": "<p>The <code>csv.reader()</code> function takes a file object instead of text. One way to do it is to save the file then reopen it in the transform function. </p>\n\n<pre><code>from flask import Flask, make_response, request\nimport operator\nimport io\nimport csv    \n\napp = Flask(__name__)\n\n\ndef transform():\n  with open('myfile.csv', 'rb') as f:\n    reader = csv.reader(f)  \n    all = []\n    row = next(reader)\n    row.append('Pet4')\n    all.append(row)\n    for row in reader:\n      pet4 = row[0]\n      row[0] = \"Birds\"\n      row.append(pet4)\n      all.append(row)\n    sortedlist = sorted(all, key=operator.itemgetter(0))  \n  return sortedlist\n\n@app.route('/')\ndef form():\n  return \"\"\"\n    &lt;html&gt;\n        &lt;body&gt;\n            &lt;h1&gt;Upload a CSV File&lt;/h1&gt;\n\n            &lt;form action=\"/transform\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n                &lt;input type=\"file\" name=\"data_file\" /&gt;\n                &lt;input type=\"submit\" /&gt;\n            &lt;/form&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n\"\"\"\n\n@app.route('/transform', methods=[\"POST\"])\ndef transform_view():\n  request_file = request.files['data_file']\n  request_file.save(\"myfile.csv\")\n  if not request_file:\n    return \"No file\"\n  #file_contents = io.StringIO(request_file.stream.read().decode(\"UTF8\"), newline=None)\n  #file_contents = request_file.stream.read().decode(\"utf-8\")\n\n  result = transform()\n  print result\n\n  response = make_response(result)\n  response.headers[\"Content-Disposition\"] = \"attachment; filename=result.csv\"\n  return response\nif __name__ == '__main__':\n    app.run()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 466, "user_id": 11405279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc02b5c83d80a87c47be47ee65e6de5?s=128&d=identicon&r=PG&f=1", "display_name": "JBLaf", "link": "https://stackoverflow.com/users/11405279/jblaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1587043296, "creation_date": 1587043296, "answer_id": 61251309, "question_id": 53309707, "link": "https://stackoverflow.com/questions/53309707/transform-an-uploaded-csv-file-upload-with-flask/61251309#61251309", "title": "Transform an Uploaded CSV File Upload with Flask", "body": "<p>As Mike C. said the problem is that csv.reader() function takes a file object (or equivalent) instead of text. But instead of saving a file on the disk, you can decode on the stream :</p>\n\n<pre><code>stream = codecs.iterdecode(request_file.stream, 'utf-8')\nresult = transform(stream)\n</code></pre>\n\n<p>which makes for the full code :</p>\n\n<pre><code>import codecs\nimport operator\nfrom flask import Flask, make_response, request\nimport csv\n\napp = Flask(__name__)\n\ndef transform(text_file_contents):\n  reader = csv.reader(text_file_contents)\n  list_all = []\n\n  row = next(reader)\n  row.append('Pet4')\n  list_all.append(row)\n\n  for row in reader:\n    pet4 = row[0]\n    row[0] = \"Birds\"\n    row.append(pet4)\n    list_all.append(row)\n  sortedlist = sorted(list_all, key=operator.itemgetter(0))\n  return sortedlist\n\n\n@app.route('/')\ndef form():\n  return \"\"\"\n    &lt;html&gt;\n        &lt;body&gt;\n            &lt;h1&gt;Upload a CSV File&lt;/h1&gt;\n\n            &lt;form action=\"/transform\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n                &lt;input type=\"file\" name=\"data_file\" /&gt;\n                &lt;input type=\"submit\" /&gt;\n            &lt;/form&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n\"\"\"\n\n@app.route('/transform', methods=[\"POST\"])\ndef transform_view():\n    request_file = request.files['data_file']\n    if not request_file:\n        return \"No file\"\n\n\n    stream = codecs.iterdecode(request_file.stream, 'utf-8')\n    result = transform(stream)\n\n    response = make_response(str(result))\n    response.headers[\"Content-Disposition\"] = \"attachment; filename=result.csv\"\n    return response\n\nif __name__ == '__main__':\n    app.run()\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 1542066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ce706720bb6283ee2b5b062a499062?s=128&d=identicon&r=PG", "display_name": "lpm", "link": "https://stackoverflow.com/users/1542066/lpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1515, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1587043296, "creation_date": 1542234651, "last_edit_date": 1542236463, "question_id": 53309707, "link": "https://stackoverflow.com/questions/53309707/transform-an-uploaded-csv-file-upload-with-flask", "title": "Transform an Uploaded CSV File Upload with Flask", "body": "<p>I have a simple Flask app hosted on Python Anywhere. The app provides an interface where a user can upload a CSV file, and the app inserts a new column into the uploaded CSV file by overwriting the first column (<code>row[0]</code>) and putting the original <code>row[0]</code> at the end of the file and downloads the transformed file for the user. So, the CSV input looks like this (first row is a header row that should be unmodified save for the addition of a 4th column name):</p>\n\n<pre><code>Pet1,Pet2,Pet3\nCats,Dogs,Mice\n</code></pre>\n\n<p>And the output should look like:</p>\n\n<pre><code>Pet1,Pet2,Pet3,Pet4\nBirds,Dogs,Mice,Cats\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>from flask import Flask, make_response, request\nimport operator\nimport io\nimport csv\n\napp = Flask(__name__)\n\ndef transform(text_file_contents):\n  reader = csv.reader(text_file_contents)\n  all = []\n  row = next(reader)\n  row.append('Pet4')\n  all.append(row)\n  for row in reader:\n    pet4 = row[0]\n    row[0] = \"Birds\"\n    row.append(pet4)\n    all.append(row)\n  sortedlist = sorted(all, key=operator.itemgetter(0))\n  return sortedlist\n\n\n@app.route('/')\ndef form():\n  return \"\"\"\n    &lt;html&gt;\n        &lt;body&gt;\n            &lt;h1&gt;Upload a CSV File&lt;/h1&gt;\n\n            &lt;form action=\"/transform\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n                &lt;input type=\"file\" name=\"data_file\" /&gt;\n                &lt;input type=\"submit\" /&gt;\n            &lt;/form&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n\"\"\"\n\n@app.route('/transform', methods=[\"POST\"])\ndef transform_view():\n  request_file = request.files['data_file']\n  if not request_file:\n    return \"No file\"\n\nfile_contents = request_file.stream.read().decode(\"utf-8\")\n\nresult = transform(file_contents)\n\nresponse = make_response(result)\nresponse.headers[\"Content-Disposition\"] = \"attachment; filename=result.csv\"\nreturn response\n</code></pre>\n\n<p>This is the error I am getting:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/home/user/.virtualenvs/myvirtualenv/lib/python3.6/site-packages/flask/app.py\", line 2292, in wsgi_app\nresponse = self.full_dispatch_request()\nFile \"/home/user/.virtualenvs/myvirtualenv/lib/python3.6/site-packages/flask/app.py\", line 1815, in full_dispatch_request\nrv = self.handle_user_exception(e)\nFile \"/home/user/.virtualenvs/myvirtualenv/lib/python3.6/site-packages/flask/app.py\", line 1718, in handle_user_exception\nreraise(exc_type, exc_value, tb)\nFile \"/home/user/.virtualenvs/myvirtualenv/lib/python3.6/site-packages/flask/_compat.py\", line 35, in reraise\nraise value\nFile \"/home/user/.virtualenvs/myvirtualenv/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\nrv = self.dispatch_request()\nFile \"/home/user/.virtualenvs/myvirtualenv/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\nreturn self.view_functions[rule.endpoint](**req.view_args)\nFile \"/home/user/mysite/callnumbers.py\", line 62, in transform_view\nresult = transform(file_contents)\nFile \"/home/user/mysite/callnumbers.py\", line 18, in transform\nrow[0] = row[1]\nIndexError: list index out of range\n</code></pre>\n\n<p>I can tell that my script isn't reading the uploaded input file correctly (hence not being able to find the data in the columns I am trying to reference and the <code>IndexError</code>) but I haven't been able to find any examples of Flask using the Python CSV library to parse an uploaded file and manipulate columns in the way I need to. How can I resolve this? Any pointers in the right direction are much appreciated!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 1, "creation_date": 1542234829, "post_id": 53309636, "comment_id": 93500311, "body": "Not a full answer: I think I&#39;d split dots and digits from letters using regexp, look up multiplier in a table, convert digits to a float (or Decimal, if humans are going to look at it and will find the float precision offputing), and multiply."}, {"owner": {"reputation": 3144, "user_id": 10640534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25583304ddb01032ed802cbd87b17d53?s=128&d=identicon&r=PG&f=1", "display_name": "Patol75", "link": "https://stackoverflow.com/users/10640534/patol75"}, "edited": false, "score": 0, "creation_date": 1542235133, "post_id": 53309636, "comment_id": 93500418, "body": "What if you split your expression between the float part and the string part (regexp), and then multiply the float part by a power of 10 based on the value of the string part?"}], "answers": [{"tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": false, "score": 4, "last_activity_date": 1542235299, "last_edit_date": 1542235299, "creation_date": 1542234919, "answer_id": 53309757, "question_id": 53309636, "link": "https://stackoverflow.com/questions/53309636/converting-input-from-non-integer-bit-rates-into-something-workable/53309757#53309757", "title": "Converting input from non-integer bit rates into something workable", "body": "<p>I'd do something like:</p>\n\n<pre><code>import re\n\nUNITS = {\n    'k': 1e3,\n    'm': 1e6,\n    'g': 1e9,\n    't': 1e12,\n}\n\ndef parse_bps(s):\n    m = re.match(r'^([0-9]+(\\.[0-9]*)?)([tgmk])?bps$', s, re.IGNORECASE)\n    if not m:\n        raise ValueError(f\"unsupported value for parse_bps: {repr(s)}\")\n    val = float(m.group(1))\n    unit = m.group(3)\n    if unit:\n        val *= UNITS[unit.lower()]\n    return val\n\n\ntests = [\n    '10bps', '10kbps', '20Mbps', '20Gbps', '3.838Mbps',\n    '3.838Mbps', '100kbps', '126.533kbps', '5.23Mbps',\n    '100Mbps', '1.7065Gbps', '20Gbps',\n]\n\nfor s in tests:\n    print(f'  {repr(s)} = {parse_bps(s)}')\n</code></pre>\n\n<p>though it's probably better not to ignore case.  <a href=\"https://en.wikipedia.org/wiki/Metric_prefix\" rel=\"nofollow noreferrer\">SI units</a> officially make big differences based on case, generally speaking capitals meaning multiply and lower case meaning divide.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1542234965, "creation_date": 1542234965, "answer_id": 53309764, "question_id": 53309636, "link": "https://stackoverflow.com/questions/53309636/converting-input-from-non-integer-bit-rates-into-something-workable/53309764#53309764", "title": "Converting input from non-integer bit rates into something workable", "body": "<p>I think it might be better to use regular expressions here, and capture the \"number part\", and the \"unit prefix part\":</p>\n\n<pre><code>import re\n\nbandwidth_rgx = re.compile(r'^(\\d*(?:\\.\\d*)?)\\s*([GMk]?)(?:bps)?$')\n</code></pre>\n\n<p>so now we can match a given string, and obtain the number part, and the unit prefix part:</p>\n\n<pre><code>&gt;&gt;&gt; bandwidth_rgx.search('126.533kbps')[1]\n'126.533'\n&gt;&gt;&gt; bandwidth_rgx.search('126.533kbps')[2]\n'k'\n</code></pre>\n\n<p>so we can make a conversion dictionary, like:</p>\n\n<pre><code>unit_prefix = {\n    '': 1,\n    'k': 1000,\n    'M': 1000000,\n    'G': 1000000000\n}\n</code></pre>\n\n<p>and use a function to obtain the bandwidth, for example as a float:</p>\n\n<pre><code>def get_bandwidth(text):\n    m = bandwidth_rgx.search(text)\n    return float(m[1]) * unit_prefix[m[2]]\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>&gt;&gt;&gt; get_bandwidth('3.838Mbps')\n3838000.0\n&gt;&gt;&gt; get_bandwidth('100kbps')\n100000.0\n&gt;&gt;&gt; get_bandwidth('126.533kbps')\n126533.0\n&gt;&gt;&gt; get_bandwidth('5.23Mbps')\n5230000.0\n&gt;&gt;&gt; get_bandwidth('100Mbps')\n100000000.0\n&gt;&gt;&gt; get_bandwidth('1.7065Gbps')\n1706500000.0\n&gt;&gt;&gt; get_bandwidth('20Gbps')\n20000000000.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "is_accepted": false, "score": 1, "last_activity_date": 1542235200, "creation_date": 1542235200, "answer_id": 53309799, "question_id": 53309636, "link": "https://stackoverflow.com/questions/53309636/converting-input-from-non-integer-bit-rates-into-something-workable/53309799#53309799", "title": "Converting input from non-integer bit rates into something workable", "body": "<p>Answer that requires bare minimum code changes and assumes your input is safe:</p>\n\n<pre><code>if \"kbps\" in bandwidth:\n    bw=bandwidth.replace('kbps', '* 1e3')\nelif \"Mbps\" in bandwidth:\n    bw=bandwidth.replace('Mbps', '* 1e6')\nelif \"Gbps\" in bandwidth:\n    bw=bandwidth.replace('Gbps', '* 1e9')\nelse:\n    bw='0'\nbw_int = eval(bandwidth)\n</code></pre>\n\n<p>Of course, make sure your input is safe, and there are some security and performance considerations for <code>eval</code> (<a href=\"https://stackoverflow.com/questions/1832940/why-is-using-eval-a-bad-practice\">Why is using &#39;eval&#39; a bad practice?</a>), but sometimes, you just want to get something out quickly :)</p>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 8060285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8a896bb6a92d7e98347d6d499d579d?s=128&d=identicon&r=PG", "display_name": "Mamoon Raja", "link": "https://stackoverflow.com/users/8060285/mamoon-raja"}, "is_accepted": true, "score": 4, "last_activity_date": 1542235317, "creation_date": 1542235317, "answer_id": 53309826, "question_id": 53309636, "link": "https://stackoverflow.com/questions/53309636/converting-input-from-non-integer-bit-rates-into-something-workable/53309826#53309826", "title": "Converting input from non-integer bit rates into something workable", "body": "<p>You can cast value before <code>kbps</code>, <code>Mbps</code> or <code>Gbps</code> to float and multiply it by 1000, 1000,000 and so on. That will work for either case.</p>\n\n<p>For Example:</p>\n\n<pre><code>if \"kbps\" in bandwidth:\n    bw = bandwidth.replace('kbps', '')\n    bw = str(float(bw) * 1000)\nelif \"Mbps\" in bandwidth:\n    bw = bandwidth.replace('Mbps', '')\n    bw = str(float(bw) * 1000* 1000)\nelif \"Gbps\" in bandwidth:\n    bw = bandwidth.replace('Gbps', '')\n    bw = str(float(bw) * 1000 * 1000 * 1000)\nelse:\n    bw='0'\n</code></pre>\n"}], "owner": {"reputation": 326, "user_id": 3746195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0b0cb2a70daac856f8c9a11f94b8bb05?s=128&d=identicon&r=PG&f=1", "display_name": "user3746195", "link": "https://stackoverflow.com/users/3746195/user3746195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 53309826, "answer_count": 4, "score": 4, "last_activity_date": 1542235659, "creation_date": 1542234251, "last_edit_date": 1542235659, "question_id": 53309636, "link": "https://stackoverflow.com/questions/53309636/converting-input-from-non-integer-bit-rates-into-something-workable", "title": "Converting input from non-integer bit rates into something workable", "body": "<p>I have a program whose input has changed.  It originally worked when using integers and the integers had units like:  \"kbps\", \"Mbps\", \"Gbps\".  An example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>10kbps\n20Mbps\n20Gbps\n</code></pre>\n\n<p>I used \"if/then\" to convert all strings to bps:</p>\n\n<pre><code>if \"kbps\" in bandwidth:\n    bw=bandwidth.replace('kbps', '000')\nelif \"Mbps\" in bandwidth:\n    bw=bandwidth.replace('Mbps', '000000')\nelif \"Gbps\" in bandwidth:\n    bw=bandwidth.replace('Gbps', '000000000')\nelse:\n    bw='0'\n</code></pre>\n\n<p>I'd print \"bw\" as an integer \"int(bw)\", and it worked fine.  Now, the input has changed.  Here are samples of actual inputs:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>3.838Mbps\n100kbps\n126.533kbps\n5.23Mbps\n100Mbps\n1.7065Gbps\n20Gbps\n</code></pre>\n\n<p>The numbers are not integers.  Not only can I not print because it is not an integer, the unit conversion doesn't work with decimals.  For example, 3.838Mbps becomes 3.838000000.  </p>\n\n<p>Can someone suggest an efficient way to work with these inputs?  I can't find the right balance of splitting, regexp matching, etc. and am wondering if there are some methods I don't know about.  </p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1542234885, "creation_date": 1542234885, "answer_id": 53309755, "question_id": 53309583, "link": "https://stackoverflow.com/questions/53309583/reading-a-datafile-abalone-and-converting-to-numpy-array/53309755#53309755", "title": "Reading a datafile (abalone) and converting to numpy array", "body": "<p>You can use pandas:</p>\n\n<pre><code>import pandas as pd\n\nabalone_data = pd.read_csv('C:/path/abalone.dat', header=None).values\nabalone_data.shape\n</code></pre>\n\n<p>OUtput:</p>\n\n<pre><code>(4177, 9)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "is_accepted": true, "score": 2, "last_activity_date": 1542235829, "last_edit_date": 1542235829, "creation_date": 1542235423, "answer_id": 53309839, "question_id": 53309583, "link": "https://stackoverflow.com/questions/53309583/reading-a-datafile-abalone-and-converting-to-numpy-array/53309839#53309839", "title": "Reading a datafile (abalone) and converting to numpy array", "body": "<p>You can add <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.loadtxt.html\" rel=\"nofollow noreferrer\">unpack</a> parameter to <code>numpy.loadtxt()</code>. Then you can <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.transpose.html\" rel=\"nofollow noreferrer\">numpy.transpose()</a> the newly created numpy array to get the required shape of array.</p>\n\n<pre><code>import numpy as np\n\ndattyp = [('sex',object),('length',float),('diameter',float),('height',float),('whole weight',float),('shucked weight',float),('viscera weight',float),('shell weight',float),('rings',int)]\n\nabalone_data = np.loadtxt('C:/path/abalone.dat',dtype = dattyp, delimiter = ',', unpack=True)\nabalone_data = np.array((abalone_data)).transpose()\n\nprint(abalone_data.shape)\n</code></pre>\n\n<p><strong>Out:</strong></p>\n\n<pre><code>(4177, 9)\n</code></pre>\n\n<p><strong>From the documentation:</strong></p>\n\n<blockquote>\n  <p>unpack : bool, optional</p>\n  \n  <p>If True, the returned array is transposed, so that arguments may be\n  unpacked using x, y, z = loadtxt(...). When used with a structured\n  data-type, arrays are returned for each field. Default is False.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 9336097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c880de107e26c21e7cd9cd5f7f19f49?s=128&d=identicon&r=PG&f=1", "display_name": "Pol Prot", "link": "https://stackoverflow.com/users/9336097/pol-prot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 53309839, "answer_count": 2, "score": 1, "last_activity_date": 1542248835, "creation_date": 1542233903, "last_edit_date": 1542248835, "question_id": 53309583, "link": "https://stackoverflow.com/questions/53309583/reading-a-datafile-abalone-and-converting-to-numpy-array", "title": "Reading a datafile (abalone) and converting to numpy array", "body": "<p>When I try to load the UCI abalone data file as follows:</p>\n\n<pre><code>dattyp = [('sex',object),('length',float),('diameter',float),('height',float),('whole weight',float),('shucked weight',float),('viscera weight',float),('shell weight',float),('rings',int)]\n\nabalone_data = np.loadtxt('C:/path/abalone.dat',dtype = dattyp, delimiter = ',')\n\nprint(abalone_data.shape)\nprint(abalone_data[0])\n&gt;&gt;(4177,)\n  ('M',  0.455,  0.365,  0.095,  0.514,  0.2245,  0.101,  0.15, 15)\n</code></pre>\n\n<p><code>Abalone_data</code> is an array with 1 column instead of 9. Later on, when I want to add other data as extra columns, this gives me problems. Is there any way to transform this data to a <code>(4177, 9)</code> matrix where I can do the usual adding of columns etc?\n<br>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1542233846, "post_id": 53309557, "comment_id": 93499931, "body": "You&#39;ll certainly have to override methods than create new instances if you want those new instances to be of your custom class. FWIW it seems like the problem is that just subclassing complex because it can hold two values is the root of your problem."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1542234078, "post_id": 53309557, "comment_id": 93500014, "body": "Why are you subclassing complex to begin with?"}, {"owner": {"reputation": 9899, "user_id": 76810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/66bc542765c1079e1dfb89dcf3b5348c?s=128&d=identicon&r=PG", "display_name": "SSteve", "link": "https://stackoverflow.com/users/76810/ssteve"}, "edited": false, "score": 0, "creation_date": 1542234332, "post_id": 53309557, "comment_id": 93500107, "body": "I&#39;m subclassing complex because I want to inherit the things it already knows how to do. I wish I could find the answer that subclassed complex to make a Point class. I thought it seemed fairly elegant. So should I abandon that approach and just create a class from scratch that implements all the functionality I wanted to inherit from complex?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542234599, "post_id": 53309557, "comment_id": 93500212, "body": "What do you want to inherit?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542234751, "post_id": 53309557, "comment_id": 93500276, "body": "It seems like you need to override almost everything you want to inherit, so you&#39;re not really gaining much by inheriting."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1542234824, "post_id": 53309557, "comment_id": 93500304, "body": "Subclassing is useful for classes that mostly modify the object in place. It&#39;s not really that good for classes where most operations return new instances of the class."}, {"owner": {"reputation": 9899, "user_id": 76810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/66bc542765c1079e1dfb89dcf3b5348c?s=128&d=identicon&r=PG", "display_name": "SSteve", "link": "https://stackoverflow.com/users/76810/ssteve"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542234966, "post_id": 53309557, "comment_id": 93500363, "body": "@Barmar &quot;It&#39;s not really that good for classes where most operations return new instances of the class.&quot; seems to be the key as to why I shouldn&#39;t take this approach."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542235091, "post_id": 53309557, "comment_id": 93500408, "body": "Yes, that was my point. Whether you subclass or not, you&#39;re going to have to implement all those operations in your class."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1542235211, "post_id": 53309557, "comment_id": 93500446, "body": "You might find reading the section titled <a href=\"https://docs.python.org/3/library/numbers.html#implementing-the-arithmetic-operations\" rel=\"nofollow noreferrer\">Implementing the arithmetic operations</a> in the documentation worthwhile."}], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 3394510, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d3860f752c60cd72fac9f9335b87b0cb?s=128&d=identicon&r=PG&f=1", "display_name": "ekiim", "link": "https://stackoverflow.com/users/3394510/ekiim"}, "is_accepted": false, "score": 1, "last_activity_date": 1542235111, "creation_date": 1542235111, "answer_id": 53309785, "question_id": 53309557, "link": "https://stackoverflow.com/questions/53309557/do-i-have-to-override-all-math-operators-in-a-subclass/53309785#53309785", "title": "Do I have to override all math operators in a subclass?", "body": "<p>The problem, is that your class, when it uses any of the data model functions belonging to complex It returns a complex, so you'll need to turn this in to your <code>Point2d</code> class</p>\n\n<p>adding this method should do the trick</p>\n\n<pre><code>def __add__(self, b):\n    return Point2d(super().__add__(b))\n</code></pre>\n\n<p>But still there should be a better way of doing it. But this is the way to dynamically wrap some Data Model (dunder) methods.</p>\n\n<p>By the way, the distance function you can make it shorter something like this </p>\n\n<pre><code>def distanceTo(self, otherPoint):\n    return abs(self - otherPoint)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 1, "creation_date": 1542235506, "post_id": 53309806, "comment_id": 93500533, "body": "Actually, you can avoid this kind of boilerplate in python."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 0, "creation_date": 1542235601, "post_id": 53309806, "comment_id": 93500567, "body": "Well, yes, with more compact, less readable boilerplate. I&#39;m not advocating its use."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1542235223, "creation_date": 1542235223, "answer_id": 53309806, "question_id": 53309557, "link": "https://stackoverflow.com/questions/53309557/do-i-have-to-override-all-math-operators-in-a-subclass/53309806#53309806", "title": "Do I have to override all math operators in a subclass?", "body": "<p>In general, prefer composition to inheritance. You can implement all the desired operations in terms of complex numbers.</p>\n\n<pre><code>class Point2D:\n    def __init__(self, x, y):\n        self._p = complex(x,y)\n\n    @classmethod\n    def _from_complex(self, z):\n        return Point2D(z.real, z.imag)\n\n    def __add__(self, other):\n        return Point2D._from_complex(self._p + other._p)\n\n    # etc\n</code></pre>\n\n<p>Is it a lot of boilerplate? Yes. But it's not really boilerplate you can avoid.</p>\n"}, {"comments": [{"owner": {"reputation": 9899, "user_id": 76810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/66bc542765c1079e1dfb89dcf3b5348c?s=128&d=identicon&r=PG", "display_name": "SSteve", "link": "https://stackoverflow.com/users/76810/ssteve"}, "edited": false, "score": 0, "creation_date": 1542315480, "post_id": 53310110, "comment_id": 93535930, "body": "This ends up being easiest and most straightforward."}], "tags": [], "owner": {"reputation": 2870, "user_id": 623913, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nO2YC.jpg?s=128&g=1", "display_name": "Cartucho", "link": "https://stackoverflow.com/users/623913/cartucho"}, "is_accepted": true, "score": 1, "last_activity_date": 1542236957, "creation_date": 1542236957, "answer_id": 53310110, "question_id": 53309557, "link": "https://stackoverflow.com/questions/53309557/do-i-have-to-override-all-math-operators-in-a-subclass/53310110#53310110", "title": "Do I have to override all math operators in a subclass?", "body": "<p>In this case I suggest to implement your class <code>Point2d</code> from scratch. </p>\n\n<p>If you're lazy, take a look to some lib like sympy which includes a <code>Point</code> class and other geometry stuff <a href=\"https://docs.sympy.org/latest/modules/geometry/index.html\" rel=\"nofollow noreferrer\">https://docs.sympy.org/latest/modules/geometry/index.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "is_accepted": false, "score": 1, "last_activity_date": 1542241019, "last_edit_date": 1542241019, "creation_date": 1542240261, "answer_id": 53310605, "question_id": 53309557, "link": "https://stackoverflow.com/questions/53309557/do-i-have-to-override-all-math-operators-in-a-subclass/53310605#53310605", "title": "Do I have to override all math operators in a subclass?", "body": "<p>I'm going to mention a way of overriding all the methods without manually writing each of them, but only because we are all <a href=\"https://mail.python.org/pipermail/tutor/2003-October/025932.html\" rel=\"nofollow noreferrer\">consenting adults</a> here. I don't really recommend it, it is much clearer if you just override each and every operation. That said, you can write a class wrapper which inspects all the methods of the base class and converts the output to a point if it is a complex type.</p>\n\n<pre><code>import math\nimport inspect\n\n\ndef convert_to_base(cls):\n    def decorate_func(name, method, base_cls):\n        def method_wrapper(*args, **kwargs):\n            obj = method(*args, **kwargs)\n            return cls.convert(obj, base_cls) if isinstance(obj, base_cls) else obj\n        return method_wrapper if name not in ('__init__', '__new__') else method\n    for base_cls in cls.__bases__:\n        for name, method in inspect.getmembers(base_cls, inspect.isroutine):  # Might want to change this filter\n            setattr(cls, name, decorate_func(name, method, base_cls))\n    return cls\n\n\n@convert_to_base\nclass Point2d(complex):\n\n    @classmethod\n    def convert(cls, obj, base_cls):\n        # Use base_cls if you need to know which base class to convert.\n        return cls(obj.real, obj.imag)\n\n    def distanceTo(self, otherPoint):\n        return math.sqrt((self.real - otherPoint.real)**2 + (self.imag - otherPoint.imag)**2)\n\n    def x(self):\n        return self.real\n\n    def y(self):\n        return self.imag\n\np1 = Point2d(3, 3)\np2 = Point2d(6, 7)\np3 = p1 + p2\np4 = p3.distanceTo(p1)\nprint(p4)\n\n# 9.219544457292887\n</code></pre>\n\n<p>What is happening here is that it just checks all the methods of the base class, and if what it returns is of the type of the base class, converts it to the child class, as defined by the special classmethod in the child class.</p>\n"}], "owner": {"reputation": 9899, "user_id": 76810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/66bc542765c1079e1dfb89dcf3b5348c?s=128&d=identicon&r=PG", "display_name": "SSteve", "link": "https://stackoverflow.com/users/76810/ssteve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 53310110, "answer_count": 4, "score": 3, "last_activity_date": 1542241019, "creation_date": 1542233771, "question_id": 53309557, "link": "https://stackoverflow.com/questions/53309557/do-i-have-to-override-all-math-operators-in-a-subclass", "title": "Do I have to override all math operators in a subclass?", "body": "<p>I want to make a simple Point2d class in a Python 3.7 program that implements just a few features. I saw in an SO answer (that I can't find now) that one way to create a Point class was to override <code>complex</code> so I wrote this:</p>\n\n<pre><code>import math\n\nclass Point2d(complex):\n\n    def distanceTo(self, otherPoint):\n        return math.sqrt((self.real - otherPoint.real)**2 + (self.imag - otherPoint.imag)**2)\n\n    def x(self):\n        return self.real\n\n    def y(self):\n        return self.imag\n</code></pre>\n\n<p>This works:</p>\n\n<pre><code>In [48]: p1 = Point2d(3, 3)\n\nIn [49]: p2 = Point2d(6, 7)\n\nIn [50]: p1.distanceTo(p2)\nOut[50]: 5.0\n</code></pre>\n\n<p>But when I do this, <code>p3</code> is instance of <code>complex</code>, not <code>Point2d</code>:</p>\n\n<pre><code>In [51]: p3 = p1 + p2\n\nIn [52]: p3.distanceTo(p1)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-52-37fbadb3015e&gt; in &lt;module&gt;\n----&gt; 1 p3.distanceTo(p1)\n\nAttributeError: 'complex' object has no attribute 'distanceTo'\n</code></pre>\n\n<p>Most of my background is in Objective-C and C# so I'm still trying to figure out the pythonic way of doing things like this. Do I need to override all the math operators I want to use on my Point2d class? Or am I going about this completely the wrong way?</p>\n"}, {"tags": ["python", "python-attrs"], "comments": [{"owner": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "edited": false, "score": 0, "creation_date": 1542233810, "post_id": 53309516, "comment_id": 93499915, "body": "This is not really what <code>attrs</code> is for. What exactly are you trying to accomplish?"}, {"owner": {"reputation": 105, "user_id": 4107109, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/GNBGv.jpg?s=128&g=1", "display_name": "truthling", "link": "https://stackoverflow.com/users/4107109/truthling"}, "reply_to_user": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "edited": false, "score": 0, "creation_date": 1542322020, "post_id": 53309516, "comment_id": 93538336, "body": "@roeen30 I made significant changes to the code examples, which I hope more clearly illustrates the problem I was trying to solve."}, {"owner": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "edited": false, "score": 0, "creation_date": 1542395375, "post_id": 53309516, "comment_id": 93566898, "body": "It is clearer what you&#39;re trying to do, but not why. Idiomatic path operations are provided by the excellent <code>pathlib</code> - take a look at it if you haven&#39;t already. As the main goal of <code>attrs</code> is creating quick record classes, it doesn&#39;t really help you here, where you have a class with one pre-determined attribute (<code>root</code>). Looks like trying to fit a square peg through a round hole."}, {"owner": {"reputation": 651, "user_id": 6791157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725f511399d3b965c45c3c1b610d145b?s=128&d=identicon&r=PG&f=1", "display_name": "roeen30", "link": "https://stackoverflow.com/users/6791157/roeen30"}, "edited": false, "score": 1, "creation_date": 1542395464, "post_id": 53309516, "comment_id": 93566922, "body": "As a side note, if you can&#39;t avoid using <code>__get&#47;setattribute__()</code>, it is clearer to just use the <code>getattr()</code> and <code>setattr()</code> builtins."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4107109, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/GNBGv.jpg?s=128&g=1", "display_name": "truthling", "link": "https://stackoverflow.com/users/4107109/truthling"}, "edited": false, "score": 1, "creation_date": 1542322094, "post_id": 53311537, "comment_id": 93538354, "body": "That would do the trick, but I&#39;m interested in starting to use attrs."}], "tags": [], "owner": {"reputation": 1145, "user_id": 10322652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ea8a8d2082f7abea596dfd001b31b9?s=128&d=identicon&r=PG&f=1", "display_name": "Cheche", "link": "https://stackoverflow.com/users/10322652/cheche"}, "is_accepted": false, "score": 0, "last_activity_date": 1542248660, "creation_date": 1542248660, "answer_id": 53311537, "question_id": 53309516, "link": "https://stackoverflow.com/questions/53309516/dynamically-define-attributes-that-depend-on-earlier-defined-attributes/53311537#53311537", "title": "Dynamically define attributes that depend on earlier defined attributes", "body": "<p>Can't guess why would you like to access as <code>self.paths.path</code>. But, here is what i'd do:</p>\n\n<pre><code>class D(object):\n    root = os.getcwd()\n    paths = dict()\n\n    def __init__(self, paths=[]):\n        self.paths.update({'root': self.root})\n        for path in paths:\n            self.paths.update({path: os.path.join(self.root, path)})\n\n    def __str__(self):\n        return str(self.paths)    \n\nd = D(paths=['static', 'bin', 'source'])\nprint(d)\nprint(d.paths['bin'])\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>{'root': '/home/runner', 'static': '/home/runner/static', 'bin': '/home/runner/bin', 'source': '/home/runner/source'}\n/home/runner/bin\n</code></pre>\n\n<p>You can make this more complex. Just an example. Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2388, "user_id": 476759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/174e7b0ff60963f821d0b9a4f1a3ef52?s=128&d=identicon&r=PG", "display_name": "hynek", "link": "https://stackoverflow.com/users/476759/hynek"}, "is_accepted": false, "score": 3, "last_activity_date": 1542370594, "creation_date": 1542370594, "answer_id": 53337750, "question_id": 53309516, "link": "https://stackoverflow.com/questions/53309516/dynamically-define-attributes-that-depend-on-earlier-defined-attributes/53337750#53337750", "title": "Dynamically define attributes that depend on earlier defined attributes", "body": "<p>First attempt: you can't just attach random data to the class and hope that attrs (in this case astuple) will pick it up. attrs specifically tries to avoid magic and guessing, which means that you have to indeed define your attributes on the class.</p>\n\n<p>Second attempt: you cannot use attribute name in the class scope (i.e. within <code>class Paths:</code> but outside of a method because \u2013 as Python tells you \u2013 at this point they are still internal data that is used by <code>@attr.s</code>.</p>\n\n<p>The most elegant approach I can think of is a generic factory that takes the path as an argument and builds the full path:</p>\n\n<pre><code>In [1]: import attr\n\nIn [2]: def make_path_factory(path):\n   ...:     def path_factory(self):\n   ...:         return os.path.join(self.root, path)\n   ...:     return attr.Factory(path_factory, takes_self=True)\n</code></pre>\n\n<p>Which you can use like this:</p>\n\n<pre><code>In [7]: @attr.s\n   ...: class C(object):\n   ...:     root = attr.ib()\n   ...:     a = attr.ib(make_path_factory(\"a\"))\n   ...:     b = attr.ib(make_path_factory(\"b\"))\n\nIn [10]: C(\"/tmp\")\nOut[10]: C(root='/tmp', a='/tmp/a', b='/tmp/b')\n\nIn [11]: attr.astuple(C(\"/tmp\"))\nOut[11]: ('/tmp', '/tmp/a', '/tmp/b')\n</code></pre>\n\n<p>attrs being attrs, you can of course go further and define your own attr.ib wrapper:</p>\n\n<pre><code>In [12]: def path(p):\n    ...:     return attr.ib(make_path_factory(p))\n\nIn [13]: @attr.s\n    ...: class D(object):\n    ...:     root = attr.ib()\n    ...:     a = path(\"a\")\n    ...:     b = path(\"b\")\n    ...:\n\nIn [14]: D(\"/tmp\")\nOut[14]: D(root='/tmp', a='/tmp/a', b='/tmp/b')\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4107109, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/GNBGv.jpg?s=128&g=1", "display_name": "truthling", "link": "https://stackoverflow.com/users/4107109/truthling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1542391619, "creation_date": 1542233541, "last_edit_date": 1542391619, "question_id": 53309516, "link": "https://stackoverflow.com/questions/53309516/dynamically-define-attributes-that-depend-on-earlier-defined-attributes", "title": "Dynamically define attributes that depend on earlier defined attributes", "body": "<p>I want an object that represents a path <code>root</code> and an arbitrary number of subdirectories that are constructed with <code>os.path.join(root)</code>.  I want to access these paths with the form <code>self.root</code>, <code>self.path_a</code>, <code>self.path_b</code>, etc... In addition to accessing them directly via <code>self.path_a</code>, I want to be able to iterate over them.  Unfortunately, the approach below does not allow iterating over them via <code>attr.astuple(paths)</code></p>\n\n<p>The first bit of code below is what I came up with.  It works but feels a little hacky to me.  Since this is my first use of <a href=\"https://pypi.org/project/attrs/\" rel=\"nofollow noreferrer\">attrs</a> I am wondering if there is a more intuitive/idiomatic way to approach this.  It took me quite a while to figure out how to write the fairly simple class below, so I thought I might be missing something obvious.</p>\n\n<h3>My approach</h3>\n\n<pre><code>@attr.s\nclass Paths(object):\n    subdirs = attr.ib()\n    root = attr.ib(default=os.getcwd())\n    def __attrs_post_init__(self):\n        for name in self.subdirs:\n            subdir = os.path.join(self.root, name)\n            object.__setattr__(self, name, subdir)\n\n    def mkdirs(self):\n        \"\"\"Create `root` and `subdirs` if they don't already exist.\"\"\"\n        if not os.path.isdir(self.root):\n            os.mkdir(self.root)\n        for subdir in self.subdirs:\n            path = self.__getattribute__(subdir)\n            if not os.path.isdir(path):\n                os.mkdir(path)\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; p = Paths(subdirs=['a', 'b', 'c'], root='/tmp')\n&gt;&gt;&gt; p\nPaths(subdirs=['a', 'b', 'c'], root='/tmp')\n&gt;&gt;&gt; p.a\n'/tmp/a'\n&gt;&gt;&gt; p.b\n'/tmp/b'\n&gt;&gt;&gt; p.c\n'/tmp/c'\n</code></pre>\n\n<p>The following was my first attempt, which doesn't work. </p>\n\n<h3>Failed attempt</h3>\n\n<pre><code>@attr.s\nclass Paths(object):\n    root = attr.ib(default=os.getcwd())\n    subdir_1= attr.ib(os.path.join(root, 'a'))\n    subdir_2= attr.ib(os.path.join(root, 'b'))\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-31-71f19d55e4c3&gt; in &lt;module&gt;()\n    1 @attr.s\n----&gt; 2 class Paths(object):\n    3     root = attr.ib(default=os.getcwd())\n    4     subdir_1= attr.ib(os.path.join(root, 'a'))\n    5     subdir_2= attr.ib(os.path.join(root, 'b'))\n\n&lt;ipython-input-31-71f19d55e4c3&gt; in Paths()\n    2 class Paths(object):\n    3     root = attr.ib(default=os.getcwd())\n--&gt; 4     subdir_1= attr.ib(os.path.join(root, 'a'))\n    5     subdir_2= attr.ib(os.path.join(root, 'b'))\n    6\n\n~/miniconda3/lib/python3.6/posixpath.py in join(a, *p)\n    76     will be discarded.  An empty last part will result in a path that\n    77     ends with a separator.\"\"\"\n--&gt; 78     a = os.fspath(a)\n    79     sep = _get_sep(a)\n    80     path = a\n\nTypeError: expected str, bytes or os.PathLike object, not _CountingAttr\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1542236422, "post_id": 53309547, "comment_id": 93500825, "body": "Maybe add <code>df.expanding(axis=1).min() </code>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 11, "last_activity_date": 1542234136, "last_edit_date": 1542234136, "creation_date": 1542233726, "answer_id": 53309547, "question_id": 53309511, "link": "https://stackoverflow.com/questions/53309511/how-do-you-remove-values-not-in-a-cluster-using-a-pandas-data-frame/53309547#53309547", "title": "How do you remove values not in a cluster using a pandas data frame?", "body": "<p>We can do this with a <em>cummulative product</em> over the second axis with <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.cumprod.html\" rel=\"noreferrer\"><strong><code>pandas.cumprod</code></strong> [pandas-doc]</a>:</p>\n\n<pre><code>&gt;&gt;&gt; df.cumprod(axis=1)\n   0  1  2  3  4  5  6  7  8\n0  1  1  1  0  0  0  0  0  0\n1  1  1  1  1  1  0  0  0  0\n2  1  1  1  0  0  0  0  0  0\n3  1  0  0  0  0  0  0  0  0\n</code></pre>\n\n<p>The same result can here be obtained with <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.cummin.html\" rel=\"noreferrer\"><strong><code>pandas.cummin</code></strong> [pandas-doc]</a>:</p>\n\n<pre><code>&gt;&gt;&gt; df.cummin(axis=1)\n   0  1  2  3  4  5  6  7  8\n0  1  1  1  0  0  0  0  0  0\n1  1  1  1  1  1  0  0  0  0\n2  1  1  1  0  0  0  0  0  0\n3  1  0  0  0  0  0  0  0  0\n</code></pre>\n"}], "owner": {"reputation": 716, "user_id": 5487719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c13222ec55741a745468165dd471315?s=128&d=identicon&r=PG&f=1", "display_name": "Zmann3000", "link": "https://stackoverflow.com/users/5487719/zmann3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 2, "accepted_answer_id": 53309547, "answer_count": 1, "score": 9, "last_activity_date": 1542234136, "creation_date": 1542233516, "question_id": 53309511, "link": "https://stackoverflow.com/questions/53309511/how-do-you-remove-values-not-in-a-cluster-using-a-pandas-data-frame", "title": "How do you remove values not in a cluster using a pandas data frame?", "body": "<p>If I have a pandas data frame like this made up of 0 and 1s:</p>\n\n<pre><code> 1 1 1 0 0 0 0 1 0\n 1 1 1 1 1 0 0 0 0\n 1 1 1 0 0 0 0 1 0 \n 1 0 0 0 0 1 0 0 0 \n</code></pre>\n\n<p>How do I filter out outliers such that I get something like this:</p>\n\n<pre><code> 1 1 1 0 0 0 0 0 0 \n 1 1 1 1 1 0 0 0 0\n 1 1 1 0 0 0 0 0 0\n 1 0 0 0 0 0 0 0 0\n</code></pre>\n\n<p>Such that I remove the outliers.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 3, "creation_date": 1542233426, "post_id": 53309456, "comment_id": 93499784, "body": "Was <code>outfilehandle</code> also created with <code>encoding=&#39;utf-8&#39;</code>?"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1542233534, "post_id": 53309456, "comment_id": 93499816, "body": "If data items for <code>writerow</code> aren&#39;t strings, they are converted with <code>str</code> but <code>str(b&#39;n&#39;) == &quot;b&#39;n&#39;&quot;</code>"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1542233740, "post_id": 53309456, "comment_id": 93499889, "body": "How are you viewing the contents of the <code>.csv</code> file?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1542234141, "post_id": 53309456, "comment_id": 93500040, "body": "Your snippet of code is not so relevant as you say it is. It seems to search for a sequence of digits and do something with them. Are you sure that is an important part of your problem?"}, {"owner": {"reputation": 13, "user_id": 10654545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e2c3fe6fa6d7b5325fa8030cb5e910?s=128&d=identicon&r=PG&f=1", "display_name": "steven.m787", "link": "https://stackoverflow.com/users/10654545/steven-m787"}, "edited": false, "score": 0, "creation_date": 1542239871, "post_id": 53309456, "comment_id": 93501875, "body": "Peter, I am viewing the contents in Excel. I use the default to set outfilehandle, which I believe in Python 3 is utf-8 but I could be wrong."}, {"owner": {"reputation": 13, "user_id": 10654545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e2c3fe6fa6d7b5325fa8030cb5e910?s=128&d=identicon&r=PG&f=1", "display_name": "steven.m787", "link": "https://stackoverflow.com/users/10654545/steven-m787"}, "edited": false, "score": 0, "creation_date": 1542239924, "post_id": 53309456, "comment_id": 93501889, "body": "Michael, what would be a potential solution to stop writerow from converting to str?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10654545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e2c3fe6fa6d7b5325fa8030cb5e910?s=128&d=identicon&r=PG&f=1", "display_name": "steven.m787", "link": "https://stackoverflow.com/users/10654545/steven-m787"}, "edited": false, "score": 0, "creation_date": 1542289812, "post_id": 53310609, "comment_id": 93521834, "body": "I modified my code, but the resulting cell contents now look like: &#229;&#177;&#177;&#232;&#165;&#191;&#232; instead of the Chinese characters in the input text file. I have read through the links provided, but am unsure how to apply that information to writing to a csv. Thanks in advance."}, {"owner": {"reputation": 13, "user_id": 10654545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e2c3fe6fa6d7b5325fa8030cb5e910?s=128&d=identicon&r=PG&f=1", "display_name": "steven.m787", "link": "https://stackoverflow.com/users/10654545/steven-m787"}, "edited": false, "score": 0, "creation_date": 1542290475, "post_id": 53310609, "comment_id": 93522305, "body": "Realizing this is an Excel issue. Opening the file in Notepad displays the &quot;correct&quot; characters."}, {"owner": {"reputation": 7908, "user_id": 1292238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b41e8dc5fb7440e261335294cd11b35?s=128&d=identicon&r=PG", "display_name": "azalea", "link": "https://stackoverflow.com/users/1292238/azalea"}, "reply_to_user": {"reputation": 13, "user_id": 10654545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e2c3fe6fa6d7b5325fa8030cb5e910?s=128&d=identicon&r=PG&f=1", "display_name": "steven.m787", "link": "https://stackoverflow.com/users/10654545/steven-m787"}, "edited": false, "score": 0, "creation_date": 1542301063, "post_id": 53310609, "comment_id": 93529215, "body": "@steven.m787 you may need to change Excel&#39;s encoding. see this: <a href=\"https://www.itg.ias.edu/content/how-import-csv-file-uses-utf-8-character-encoding-0\" rel=\"nofollow noreferrer\">itg.ias.edu/content/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7908, "user_id": 1292238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b41e8dc5fb7440e261335294cd11b35?s=128&d=identicon&r=PG", "display_name": "azalea", "link": "https://stackoverflow.com/users/1292238/azalea"}, "is_accepted": true, "score": 1, "last_activity_date": 1542240278, "creation_date": 1542240278, "answer_id": 53310609, "question_id": 53309456, "link": "https://stackoverflow.com/questions/53309456/how-to-read-in-chinese-text-and-write-chinese-characters-to-csv-python-3/53310609#53310609", "title": "How to read in Chinese text and write Chinese characters to csv - Python 3", "body": "<p>First, make sure to create <code>outfilehandle</code> with <code>encoding='utf-8'</code>, as suggested by <a href=\"https://stackoverflow.com/questions/53309456/how-to-read-in-chinese-text-and-write-chinese-characters-to-csv-python-3#comment93499784_53309456\">Peter Wood</a>, like so:</p>\n\n<pre><code>outfilehandle = csv.writer(open('outfile.csv', 'w', encoding='utf-8'))\n</code></pre>\n\n<p>Then there is no need to call <code>date.encode(\"utf-8-sig\")</code>, just change lines 7-8 in your code snippet into:</p>\n\n<pre><code>localrow.append(date)\nlocalrow.append(title)\n</code></pre>\n\n<p>Also, it may be helpful to read <a href=\"https://docs.python.org/3/howto/unicode.html\" rel=\"nofollow noreferrer\">Python Unicode HOWTO</a> and <a href=\"http://python-notes.curiousefficiency.org/en/latest/python3/text_file_processing.html\" rel=\"nofollow noreferrer\">Processing Text Files in Python 3</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10654545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e2c3fe6fa6d7b5325fa8030cb5e910?s=128&d=identicon&r=PG&f=1", "display_name": "steven.m787", "link": "https://stackoverflow.com/users/10654545/steven-m787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 53310609, "answer_count": 1, "score": 1, "last_activity_date": 1542240278, "creation_date": 1542233262, "question_id": 53309456, "link": "https://stackoverflow.com/questions/53309456/how-to-read-in-chinese-text-and-write-chinese-characters-to-csv-python-3", "title": "How to read in Chinese text and write Chinese characters to csv - Python 3", "body": "<p>I've searched SO but have not been able to find the answer to this specific problem. I am trying to read in from a .txt file of Chinese characters. When I try to write to a .csv, the contents of cells look like this:</p>\n\n<p>b'\\xef\\xbb\\xbf\\xe5' </p>\n\n<p>as opposed to:</p>\n\n<p>\u5c71\u897f\u8944\u6c7e</p>\n\n<p>How can I output to a .csv the latter format? Snippet of relevant code is below:</p>\n\n<pre><code>infilehandle = open(infilepath, encoding = 'utf-8') # open .txt file\ntxtlines = infilehandle.read().replace('\\n', '')\ndate_pattern = re.compile('(\\d{4}.\\d{1,2}.\\d{1,2})')\ndate = date_pattern.findall(txtlines)[0]\ntitle = txtlines.split(date)[0]\nlocalrow = []\nlocalrow.append(date.encode(\"utf-8-sig\"))\nlocalrow.append(title.encode(\"utf_8_sig\"))\noutfilehandle.writerow(localrow) # writes to .csv\n</code></pre>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 6, "creation_date": 1542233264, "post_id": 53309429, "comment_id": 93499711, "body": "<code>if x == &quot;yes&quot;:</code> - you&#39;ve not defined <code>x</code> anywhere?"}, {"owner": {"reputation": 17, "user_id": 8628726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef8afd8f8fee4df38106014d7691d0a?s=128&d=identicon&r=PG", "display_name": "ScriptKiddie", "link": "https://stackoverflow.com/users/8628726/scriptkiddie"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1542233311, "post_id": 53309429, "comment_id": 93499729, "body": "I cant believe Ive made such a silly mistake! thanks for pointing it out!"}, {"owner": {"reputation": 17, "user_id": 8628726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef8afd8f8fee4df38106014d7691d0a?s=128&d=identicon&r=PG", "display_name": "ScriptKiddie", "link": "https://stackoverflow.com/users/8628726/scriptkiddie"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1542233423, "post_id": 53309429, "comment_id": 93499782, "body": "Ive changed it to answer, but the same result occurs. no email is sent"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1542233451, "post_id": 53309429, "comment_id": 93499791, "body": "Your mistake should have thrown an error...what IDE are you using?"}, {"owner": {"reputation": 17, "user_id": 8628726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef8afd8f8fee4df38106014d7691d0a?s=128&d=identicon&r=PG", "display_name": "ScriptKiddie", "link": "https://stackoverflow.com/users/8628726/scriptkiddie"}, "edited": false, "score": 0, "creation_date": 1542233614, "post_id": 53309429, "comment_id": 93499849, "body": "Im just running it from powershell. I&#39;ll run it on PyCharm and see what error pops up"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1542233862, "post_id": 53309429, "comment_id": 93499942, "body": "Most of the code is irrelevant to your problem. See how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1542233922, "post_id": 53309429, "comment_id": 93499965, "body": "<code>combo.readlines()</code> will read to the end of the file. Saying <code>for line in combo</code> finds no lines left to iterate."}, {"owner": {"reputation": 17, "user_id": 8628726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef8afd8f8fee4df38106014d7691d0a?s=128&d=identicon&r=PG", "display_name": "ScriptKiddie", "link": "https://stackoverflow.com/users/8628726/scriptkiddie"}, "edited": false, "score": 0, "creation_date": 1542234401, "post_id": 53309429, "comment_id": 93500134, "body": "Thanks for this! I added combo.seek(0) to get back to the beginning, and the code works perfectly now!"}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1542233501, "post_id": 53309490, "comment_id": 93499808, "body": "Can you explain why they didn&#39;t get an error for this?"}], "tags": [], "owner": {"reputation": 1568, "user_id": 5338754, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/20d06c03e09644769c1c9f0d7f92a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/5338754/henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1542233421, "creation_date": 1542233421, "answer_id": 53309490, "question_id": 53309429, "link": "https://stackoverflow.com/questions/53309429/python-loop-not-running/53309490#53309490", "title": "Python loop not running", "body": "<p>As pointed out by @Robin Zigmond, you haven't declared <code>x</code> yet.</p>\n\n<p>A useful thing whilst debugging code that is evidently not functioning, I always find, is to use print statements to check what I believe to be true. In this case, you could check immediately before the <code>if</code> statement by doing <code>print(x)</code>, to see what the value was - that would have highlighted that the variable didn't exist.</p>\n"}], "owner": {"reputation": 17, "user_id": 8628726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef8afd8f8fee4df38106014d7691d0a?s=128&d=identicon&r=PG", "display_name": "ScriptKiddie", "link": "https://stackoverflow.com/users/8628726/scriptkiddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1542233852, "creation_date": 1542233146, "last_edit_date": 1542233852, "question_id": 53309429, "link": "https://stackoverflow.com/questions/53309429/python-loop-not-running", "title": "Python loop not running", "body": "<p>can anyone help me fix the following code? After the question is asked, and when I reply \"yes\", the rest of the program doesn't run. No emails are sent.\n<em>Note that I've replaced the login data with 'example' just for this question. The actual code has valid login details</em>\nEdited the variable from \"x\" to \"answer\"</p>\n\n<pre><code>combo = open(\"combo.txt\", \"r\")\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\nimport smtplib\ncount = str(len(combo.readlines(  )))\nprint (\"There are \" + count + \" amount of combos\")\nanswer = input(\"Would you like to run this program?: \")\n\n\nfor line in combo:\n    pieces = line.split(\":\")\n    email = pieces[0]\n    password = pieces[1]\n    if answer == \"yes\":\n        msg = MIMEMultipart()\n        message = \"Dear user, your Spotify account has been hacked\\n\" + \"Your spotify email is: \" + email + \", and your password is: \" +password + \"\\n Please change your password ASAP\"\n        passwordEmail = \"example\"\n        msg['From'] = \"example@gmail.com\"\n        msg['To'] = email\n        msg['Subject'] = \"Spotify Account Hacked\"\n        msg.attach(MIMEText(message, 'plain'))\n        server = smtplib.SMTP('smtp.gmail.com: 587')\n        server.starttls()\n        server.login(msg['From'], passwordEmail)\n        server.sendmail(msg['From'], msg['To'], msg.as_string())\n        server.quit()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "amazon-s3", "amazon-efs"], "comments": [{"owner": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1542239090, "post_id": 53309424, "comment_id": 93501659, "body": "Lambda functions do not have access to EFS."}, {"owner": {"reputation": 1179, "user_id": 7224714, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/O86ux.jpg?s=128&g=1", "display_name": "asur", "link": "https://stackoverflow.com/users/7224714/asur"}, "reply_to_user": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1542280198, "post_id": 53309424, "comment_id": 93516171, "body": "@Michael-sqlbot.. What is the suggestible solution for this."}, {"owner": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1542289517, "post_id": 53309424, "comment_id": 93521653, "body": "You&#39;d need to access EFS from servers running in EC2.   Lambda containers don&#39;t currently support this.  Note also that Stack Overflow is not really intended for questions asking for an off-site article, resource, or how-to on getting started with a task: <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>."}, {"owner": {"reputation": 1179, "user_id": 7224714, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/O86ux.jpg?s=128&g=1", "display_name": "asur", "link": "https://stackoverflow.com/users/7224714/asur"}, "reply_to_user": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 1, "creation_date": 1542301614, "post_id": 53309424, "comment_id": 93529557, "body": "Thank you @Michael-sqlbot.. Could you let me know any Forum where I can shoot this question"}], "owner": {"reputation": 1179, "user_id": 7224714, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/O86ux.jpg?s=128&g=1", "display_name": "asur", "link": "https://stackoverflow.com/users/7224714/asur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1543245646, "creation_date": 1542233132, "last_edit_date": 1543245646, "question_id": 53309424, "link": "https://stackoverflow.com/questions/53309424/lambda-function-to-decrypt-files-adds-the-required-metadata-and-sends-them-to-s", "title": "Lambda function to decrypt files, adds the required metadata and sends them to S3 bucket", "body": "<p>I need to write a File decryption lambda function which will get executed when a new file lands to the EFS. This can use Cloudwatch events when the final trigger file is copied.The function picks up the encrypted file, decrypts them, adds the required metadata and sends them to the S3 bucket.</p>\n\n<p>Please provide me links so that I can go through and read few blogs before start writing Lambda function</p>\n"}, {"tags": ["python", "pandas", "int"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 3, "creation_date": 1542232844, "post_id": 53309358, "comment_id": 93499561, "body": "What <code>int</code> value do you expect for <code>NaN</code>?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 3, "creation_date": 1542232844, "post_id": 53309358, "comment_id": 93499563, "body": "What are the inputs, what are the outputs, and what are the desired outputs? Samples can help us diagnose the issue"}, {"owner": {"reputation": 1, "user_id": 10216167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yUcc.jpg?s=128&g=1", "display_name": "Satyartha Prakash", "link": "https://stackoverflow.com/users/10216167/satyartha-prakash"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1542233414, "post_id": 53309358, "comment_id": 93499778, "body": "@G.Anderson Sorry about that. Just edited."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1542233487, "post_id": 53309358, "comment_id": 93499801, "body": "And what are your current outputs given that input?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1542233498, "post_id": 53309358, "comment_id": 93499805, "body": "An unfortunate feature of pandas is that any numeric column with NaN becomes a float data type automatically.  You could convert to a string and trim.  However the column would be data type &#39;object&#39;."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1542233885, "post_id": 53309358, "comment_id": 93499953, "body": "<code>myCol.astype(str).str.split(&#39;.&#39;, expand=True)[0].tolist()</code>  But, I don&#39;t think this gives you the output you are expecting."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 7037727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffdec026885a87ff836cb65816005b0e?s=128&d=identicon&r=PG&f=1", "display_name": "faris", "link": "https://stackoverflow.com/users/7037727/faris"}, "is_accepted": false, "score": 0, "last_activity_date": 1542233890, "creation_date": 1542233890, "answer_id": 53309579, "question_id": 53309358, "link": "https://stackoverflow.com/questions/53309358/unable-to-convert-float-to-int-in-pandas/53309579#53309579", "title": "unable to convert float to int in pandas", "body": "<p>Unfortunately NaN is a floating point number on its own (please check the IEEE 754 floating-point standard).  Therefore, unless you drop the rows with NaNs, your conversion to <code>int</code> will always fail!</p>\n\n<p>Your approach of using <code>astype</code> is correct otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1542234074, "creation_date": 1542234074, "answer_id": 53309607, "question_id": 53309358, "link": "https://stackoverflow.com/questions/53309358/unable-to-convert-float-to-int-in-pandas/53309607#53309607", "title": "unable to convert float to int in pandas", "body": "<p>You can try this to create strings:</p>\n\n<pre><code>myCol.astype(str).str.split('.', expand=True)[0].tolist()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['nan', '0', '-1', '0', '0', '2']\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10216167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yUcc.jpg?s=128&g=1", "display_name": "Satyartha Prakash", "link": "https://stackoverflow.com/users/10216167/satyartha-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542234074, "creation_date": 1542232744, "last_edit_date": 1542233379, "question_id": 53309358, "link": "https://stackoverflow.com/questions/53309358/unable-to-convert-float-to-int-in-pandas", "title": "unable to convert float to int in pandas", "body": "<p>I want to convert a column which has values -1.0, 0.0 and Nans to int. I have tried both <code>pd.tonumeric</code> and also <code>myCol.astype</code></p>\n\n<pre><code>myCol = pd.to_numeric(myCol,downcast='signed', errors = 'coerce')\nmyCol.astype(np.int64, errors= 'ignore')\n</code></pre>\n\n<p>None of these approaches work. \nDesired input and output</p>\n\n<pre><code>input: myCol = pd.Series([np.nan, 0.0, -1.0, 0.0, 0.0, 2.0])\noutput: Nan, 0, -1, 0, 0, 2\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542232807, "post_id": 53309330, "comment_id": 93499547, "body": "I&#39;m unclear what your question is? What is wrong with your current approach and why do you import SQLAlchemy and never use it?"}, {"owner": {"reputation": 61, "user_id": 10071912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GSPhDbbWWK8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oZyjCis3nrQ922tFCRnR-JoCsCzw/mo/photo.jpg?sz=128", "display_name": "John S", "link": "https://stackoverflow.com/users/10071912/john-s"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542233131, "post_id": 53309330, "comment_id": 93499657, "body": "I want to email John, Bob and Fred individually with their own Customer Comment.  I&#39;ve edited my post to remove the import of sqlalchemy"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542233288, "post_id": 53309330, "comment_id": 93499719, "body": "You need some kind of email client. Your SQL query is too quick to really care, unless I&#39;m misunderstanding. That&#39;s where the focus of your research should be; it&#39;s leaving things a bit broad atm."}, {"owner": {"reputation": 61, "user_id": 10071912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GSPhDbbWWK8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oZyjCis3nrQ922tFCRnR-JoCsCzw/mo/photo.jpg?sz=128", "display_name": "John S", "link": "https://stackoverflow.com/users/10071912/john-s"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542234260, "post_id": 53309330, "comment_id": 93500084, "body": "I agree.  It&#39;s very broad as I am looking for resources to enlighten me :)  I am familiar with sending emails in general with smtplib however lack the knowledge to loop through email addresses within a MySQL table."}], "owner": {"reputation": 61, "user_id": 10071912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GSPhDbbWWK8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oZyjCis3nrQ922tFCRnR-JoCsCzw/mo/photo.jpg?sz=128", "display_name": "John S", "link": "https://stackoverflow.com/users/10071912/john-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542255837, "creation_date": 1542232614, "last_edit_date": 1542255837, "question_id": 53309330, "link": "https://stackoverflow.com/questions/53309330/python-email-multiple-email-addresses-individually-tailored-information-stored", "title": "Python: Email Multiple Email Addresses Individually Tailored Information stored in MySQL Database", "body": "<p>I am looking to email 3 individuals a separate email of relevant information to that specific individual in Python.</p>\n\n<p>John is in charge of \"Cars\", Bob in charge of \"Trucks\", Fred in charge of \"Vans\", etc....</p>\n\n<p>These email addresses are stored in a table named 'Manager' in MySQL Database 'Stats'.  The relevant information to each Manager is stored in the same MySQL Database 'Stats' but in a table named 'Information'</p>\n\n<p><strong>Manager Table:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/zhxFZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zhxFZ.png\" alt=\"First Table\"></a></p>\n\n<p><strong>Information Table:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/k4CEE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k4CEE.png\" alt=\"Second Table\"></a></p>\n\n<p>What is the best approach from here to email John the Customer Comments from his department Cars?</p>\n\n<p>This is my very basic starting point:</p>\n\n<pre><code>import pymysql\n\nconn = pymysql.connect(host='localhost', port=3306, user='root', passwd='root', db='stats')\ncur = conn.cursor(pymysql.cursors.DictCursor)\n\ncur.execute(\"SELECT * FROM Information\")\nresult_set = cur.fetchall()\nfor row in result_set:\n    print(\"%s, %s\" % (row[\"Department\"], row[\"CustomerComment\"]))\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "edited": false, "score": 1, "creation_date": 1542235738, "post_id": 53309419, "comment_id": 93500608, "body": "This works, but not as is. It was creating a ton of duplicate columns and adding all of the numbers, resulting in inaccurate values. But adding two methods to the chain, <code>reset_index</code> and <code>drop_duplicates</code>, worked:  <code>pd.wide_to_long(df,[&#39;Substance&#39;,&#39;Category&#39;,&#39;Quantity&#39;], &#39;ID&#39;,&#39;Num&#39;,&#39;&#39;,&#39;.+&#39;)\\   .reset_index().drop_duplicates(subset=[&#39;ID&#39;, &#39;Num&#39;])\\   .groupby([&#39;ID&#39;,&#39;Category&#39;])[&#39;Quantity&#39;].sum()\\   .unstack().reset_index()</code>"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1542236008, "post_id": 53309419, "comment_id": 93500685, "body": "I&#39;ll add this nifty solution also needs some adaptation for the older <code>pandas</code> 0.19."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1542233104, "creation_date": 1542233104, "answer_id": 53309419, "question_id": 53309324, "link": "https://stackoverflow.com/questions/53309324/reshape-pandas-dataframe-to-turn-categorical-columns-into-individual-columns/53309419#53309419", "title": "Reshape pandas dataframe to turn categorical columns into individual columns", "body": "<p>You need to use <code>pd.melt</code> then <code>groupby</code>:</p>\n\n<pre><code>np.random.seed(0)\n\ndf = pd.DataFrame(data=[list('ABCDE'), \n          ['Crude Oil', 'Natural Gas', 'Gasoline', 'Diesel', 'Bitumen'],\n          ['Natural Gas', 'Salt water', 'Waste water', 'Motor oil', 'Sour Gas'],\n          ['Oil', 'Gas', 'Refined', 'Refined', 'Oil'],\n          ['Gas', 'Water', 'Water', 'Oil', 'Gas'],\n          list(np.random.randint(10, 100, 5)),\n          list(np.random.randint(10, 100, 5))]\n          ).T\ndf.columns =['ID', 'Substance1', 'Substance2', 'Category1', 'Category2', 'Quantity1', 'Quantity2']\n\npd.wide_to_long(df,['Substance','Category','Quantity'], 'ID','Num','','.+')\\\n  .groupby(['ID','Category'])['Quantity'].sum()\\\n  .unstack().reset_index()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Category ID   Gas   Oil  Refined  Water\n0         A  19.0  54.0      NaN    NaN\n1         B  57.0   NaN      NaN   93.0\n2         C   NaN   NaN     74.0   31.0\n3         D   NaN  46.0     77.0    NaN\n4         E  97.0  77.0      NaN    NaN\n</code></pre>\n"}], "owner": {"reputation": 1054, "user_id": 1426941, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f3c7357f1ed4399f4264556a11e679e?s=128&d=identicon&r=PG", "display_name": "robroc", "link": "https://stackoverflow.com/users/1426941/robroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542235159, "creation_date": 1542232596, "question_id": 53309324, "link": "https://stackoverflow.com/questions/53309324/reshape-pandas-dataframe-to-turn-categorical-columns-into-individual-columns", "title": "Reshape pandas dataframe to turn categorical columns into individual columns", "body": "<p>I have data that looks like this:</p>\n\n<pre><code>df = pd.DataFrame(data=[list('ABCDE'), \n          ['Crude Oil', 'Natural Gas', 'Gasoline', 'Diesel', 'Bitumen'],\n          ['Natural Gas', 'Salt water', 'Waste water', 'Motor oil', 'Sour Gas'],\n          ['Oil', 'Gas', 'Refined', 'Refined', 'Oil'],\n          ['Gas', 'Water', 'Water', 'Oil', 'Gas'],\n          list(np.random.randint(10, 100, 5)),\n          list(np.random.randint(10, 100, 5))]\n          ).T\ndf.columns =['ID', 'Substance1', 'Substance2', 'Category1', 'Category2', 'Quantity1', 'Quantity2']\n\n  ID   Substance1  Substance2 Category1 Category2 Quantity1 Quantity2\n0  A    Crude Oil  Natural Gas      Oil       Gas        85        14\n1  B  Natural Gas   Salt water      Gas     Water        95        78\n2  C     Gasoline  Waste water  Refined     Water        33        25\n3  D       Diesel    Motor oil  Refined       Oil        49        54\n4  E      Bitumen     Sour Gas      Oil       Gas        92        86\n</code></pre>\n\n<p>The <code>Category</code> and <code>Quantity</code> columns refer to the corresponding the <code>Substance</code> columns. </p>\n\n<p>I want to expand the <code>Category</code> columns as a new column for each unique value and have the <code>Quantity</code> value as the cell value. Non-existant categories would be NaN. So the resulting frame would look like this:</p>\n\n<pre><code>  ID   Oil  Gas Water Refined\n0  A    85   14   NaN     NaN\n1  B   NaN   95    78     NaN\n2  C   NaN  NaN    25      33\n3  D    54  NaN   NaN      49  \n4  E    92   86   NaN     NaN\n</code></pre>\n\n<p>I tried <code>.melt()</code> followed by <code>.pivot_table()</code> but for some reason values get duplicated across the new category columns.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1542232347, "post_id": 53309250, "comment_id": 93499323, "body": "How does accessing <code>values</code> disturb the order?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542232454, "post_id": 53309250, "comment_id": 93499376, "body": "Can you please link the source of this info? I&#39;m already hanging behind on versions due to <code>agg()</code> going :/"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1542232481, "post_id": 53309250, "comment_id": 93499387, "body": "Just use <code>.values</code>, nothing to worry"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": true, "score": 2, "last_activity_date": 1542236457, "last_edit_date": 1542236457, "creation_date": 1542235714, "answer_id": 53309889, "question_id": 53309250, "link": "https://stackoverflow.com/questions/53309250/pandas-as-matrix-to-values-keep-column-order/53309889#53309889", "title": "Pandas as_matrix() to values keep column order", "body": "<p>As you point out, <code>.as_matrix()</code> is deprecated.  (See below for comparison to <code>.values</code>.)</p>\n\n<p>Regardless, seems like you can get the columns in respective order by using <code>.loc</code> first:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nnp.random.seed(444)\n\nprices = pd.DataFrame(np.random.randn(200, 4), columns=list('abcd'))\ncolumns = list('cad')\nprices.pct_change().dropna().loc[:, columns].values\n</code></pre>\n\n<p>Here's the <a href=\"https://github.com/pandas-dev/pandas/blob/6d031f2b739ac1197cbb81b36cdea5f954d4e065/pandas/core/generic.py\" rel=\"nofollow noreferrer\">source</a> for <code>.as_matrix()</code> versus <code>.values</code>.  You'll notice only a slight difference:</p>\n\n<pre><code>def as_matrix(self, columns=None):\n    warnings.warn(\"Method .as_matrix will be removed in a future version. \"\n                      \"Use .values instead.\", FutureWarning, stacklevel=2)\n    self._consolidate_inplace()\n    return self._data.as_array(transpose=self._AXIS_REVERSED,\n                               items=columns)\n\n@property\ndef values(self):\n    self._consolidate_inplace()\n    return self._data.as_array(transpose=self._AXIS_REVERSED)\n</code></pre>\n\n<p>Hence if you really wanted to, you could just recreate <code>.as_matrix()</code> without the warning.  (But I would strongly prefer the first method; it's the public API; it doesn't make you deal with Pandas internal <code>Block</code> type yourself.)</p>\n\n<pre><code>chg = prices.pct_change().dropna()\nval = chg._data.as_array(transpose=chg._AXIS_REVERSED, items=columns)\nassert np.allclose(val, prices.pct_change().dropna().loc[:, columns].values)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10525968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0fe748f8d101edd9c5aaeb82cfa85e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Furness", "link": "https://stackoverflow.com/users/10525968/jonathan-furness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2511, "favorite_count": 0, "accepted_answer_id": 53309889, "answer_count": 1, "score": 1, "last_activity_date": 1542236457, "creation_date": 1542232300, "last_edit_date": 1542232774, "question_id": 53309250, "link": "https://stackoverflow.com/questions/53309250/pandas-as-matrix-to-values-keep-column-order", "title": "Pandas as_matrix() to values keep column order", "body": "<p>I currently use the .as_matrix() function in order to ensure that the numpy array keeps the correct column order; however this is due to be depreciated. How can I ensure the column order is maintained once the as_matrix function is depreciated by using the suggested .values function? Or is there another method?</p>\n\n<p>Many thanks</p>\n\n<p>Example with as_matrix</p>\n\n<pre><code>In: prices.pct_change()[1:].as_matrix(stocks)\n\nOut: array([-0.00283364,  0.0012285 ,  0.0014199 ,  0.00142983, -0.0053432 ])\n</code></pre>\n\n<p>Example with Values</p>\n\n<pre><code>In: prices.pct_change()[1:].values\n\nOut: array([ 0.00142983,  0.0014199 , -0.00283364, -0.0053432 ,  0.0012285 ])\n</code></pre>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 3459, "user_id": 7106850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIEnR.jpg?s=128&g=1", "display_name": "vezunchik", "link": "https://stackoverflow.com/users/7106850/vezunchik"}, "edited": false, "score": 0, "creation_date": 1542283103, "post_id": 53309208, "comment_id": 93517878, "body": "Try to use <code>response.css(&#39;div.jobsearch-SerpJobCard.row.result.clickcard&zwnj;&#8203;&#39;)</code> if you want to use all classes. But you can decrease this amount. Then you have duplicate variable here <code>for titles in titles:</code>. And also extraction is wrong. Use <code>.xpath(&#39;.&#47;&#47;h2&#47;a&#47;text()&#39;).extract()</code> or <code>.css(&#39;h2 a::text&#39;).extract()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3401, "user_id": 408951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82eda1711eeafd65c59205a5454458e?s=128&d=identicon&r=PG", "display_name": "Thiago Curvelo", "link": "https://stackoverflow.com/users/408951/thiago-curvelo"}, "is_accepted": true, "score": 0, "last_activity_date": 1547761124, "last_edit_date": 1547761124, "creation_date": 1542338936, "answer_id": 53331000, "question_id": 53309208, "link": "https://stackoverflow.com/questions/53309208/scrapy-simple-divclass-response-xpath-attribute-not-returning-data/53331000#53331000", "title": "Scrapy - Simple div[@class] response.xpath attribute not returning data", "body": "<p>I noticed that there is no <code>clickcard</code> class int the downloaded HTML code, but it is there after page load. Surely it is added by some javascript code.\nAs Scrapy doesn't execute javascript, you may want to double check the page source when some selector fails unexpectedly (instead of 'inspect element').\nBesides that, a shorter selector like '.jobsearch-SerpJobCard' would do the job.</p>\n\n<p>Regarding the question in the title, to get an attribute data you may use <code>xpath('.//div/@class')</code> or <code>css('div::attr(class)')</code>. E.g:</p>\n\n<pre><code>def parse(self, response):\n    titles = response.css('.jobsearch-SerpJobCard')\n    for title in titles:\n        item = {}\n        item['role_titletext'] = title.xpath('.//h2/a/@title').get()\n        # or\n        # item['role_titletext'] = title.css('h2 a::attr(title)').get()\n        yield item\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10654434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d389b0f67aa9eb1c4aaaa8e91e3ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Jamwg", "link": "https://stackoverflow.com/users/10654434/jamwg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "accepted_answer_id": 53331000, "answer_count": 1, "score": 0, "last_activity_date": 1547761124, "creation_date": 1542232076, "last_edit_date": 1547761025, "question_id": 53309208, "link": "https://stackoverflow.com/questions/53309208/scrapy-simple-divclass-response-xpath-attribute-not-returning-data", "title": "Scrapy - Simple div[@class] response.xpath attribute not returning data", "body": "<p>I have written some scrapy code to obtain HTML links from Indeed search page results. My start URL is a http address that provides a list of job ads. I am trying to scrape the URL for each job shown on the page and the job title. My problem appears to be the <code>titles = response.xpath</code> attribute. If I use a job specific attribute, I get data, but when I use the attribute shown below in my code I get nothing (not even the column headers). This is despite the fact that the attribute encompasses everything that I need. Any help welcomed, as I am just a beginner.</p>\n\n<p>I'm outputting to a CSV file and I've used this code successfully elsewhere, so I'm wondering if it is something about the way they have coded the target URL page. It's driving me nuts!</p>\n\n<pre><code>from scrapy.spiders import Spider\nfrom scrapy.selector import Selector\nfrom ICcom4.items import Scrape4Item\nfrom scrapy.linkextractors import LinkExtractor\nfrom scrapy.utils.response import get_base_url\nfrom scrapy.spiders import CSVFeedSpider\nimport requests\n\nclass MySpider(Spider):\n    name = \"Scrape4\"\n    allowed_domains = [\"indeed.co.uk\"]\n\n    start_urls = ['http://www.indeed.co.uk/jobs?as_and=a&amp;as_phr=&amp;as_any=&amp;as_not=IT+construction&amp;as_ttl=Project+Manager&amp;as_cmp=&amp;jt=contract&amp;st=&amp;salary=%C2%A310K-%C2%A3999K&amp;radius=25&amp;l=&amp;fromage=2&amp;limit=50&amp;sort=date&amp;psf=advsrch',]\n\n    def parse(self, response):\n        titles = response.xpath('//div[@class=\"jobsearch-SerpJobCard row result clickcard\"]')\n\n        items = []\n        for titles in titles:\n            item = Scrape4Item()\n            base_url = get_base_url(response)\n            home_url = (\"http://www.indeed.co.uk\")\n            item ['_pageURL'] = base_url\n            item ['role_titletext'] = titles.xpath('//h2/a/text()').extract()\n\n            items.append(item)\n        return items\n</code></pre>\n\n<p>Thanks for the guidance Elena, but I'm afraid that your suggestions made no difference. I still get no data return. I have resolved the duplicate variable (<em>for titles in titles1</em>) which I tested as a standalone change satisfactorily. However, the other suggestions made no difference. I also tried running the scrape with just the request for a URL to be returned, and it still didn't work. Revised example is below.</p>\n\n<pre><code>from scrapy.spiders import Spider\nfrom scrapy.selector import Selector\nfrom ICcom4.items import Scrape4Item\nfrom scrapy.linkextractors import LinkExtractor\nfrom scrapy.utils.response import get_base_url\nfrom scrapy.spiders import CSVFeedSpider\nimport requests\n\nclass MySpider(Spider):\n    name = \"Scrape4\"\n    allowed_domains = [\"indeed.co.uk\"]\n\n    start_urls = ['http://www.indeed.co.uk/jobs?as_and=a&amp;as_phr=&amp;as_any=&amp;as_not=IT+construction&amp;as_ttl=Project+Manager&amp;as_cmp=&amp;jt=contract&amp;st=&amp;salary=%C2%A310K-%C2%A3999K&amp;radius=25&amp;l=&amp;fromage=2&amp;limit=50&amp;sort=date&amp;psf=advsrch',]\n\n    def parse(self, response):\n        titles1 = response.css('div.jobsearch-SerpJobCard.row.result.clickcard')\n        #also tried as titles = response.css('div.jobsearch-SerpJobCard row result clickcard')\n\n        items = []\n        for titles in titles1:\n            item = Scrape4Item()\n            base_url = get_base_url(response)\n            home_url = (\"http://www.indeed.co.uk\")\n            item ['_pageURL'] = base_url\n            item ['role_titletext'] = titles.xpath('.//h2/a/text()').extract()\n        #also tried as item ['role_titletext'] = titles.css('h2 a::text').extract()\n            items.append(item)\n        return items\n</code></pre>\n\n<p><strong>EDIT:</strong>\nThanks you Thiago. That's cracked it! You're a superstar! \nThanks to you and Elena for having patience with a newbie.\nJust to complete the circle for anybody else, the final code that I used that worked was as below. This returns the search page url and the job title :-) ;</p>\n\n<pre><code>from scrapy.spiders import Spider\nfrom scrapy.selector import Selector\nfrom ICcom4.items import Scrape4Item\nfrom scrapy.linkextractors import LinkExtractor\nfrom scrapy.utils.response import get_base_url\nfrom scrapy.spiders import CSVFeedSpider\nimport requests\n\nclass MySpider(Spider):\n    name = \"Scrape4\"\n    allowed_domains = [\"indeed.co.uk\"]\n    start_urls = ['http://www.indeed.co.uk/jobs?as_and=a&amp;as_phr=&amp;as_any=&amp;as_not=IT+construction&amp;as_ttl=Project+Manager&amp;as_cmp=&amp;jt=contract&amp;st=&amp;salary=%C2%A310K-%C2%A3999K&amp;radius=25&amp;l=&amp;fromage=2&amp;limit=50&amp;sort=date&amp;psf=advsrch',]\n\n    def parse(self, response):\n        titles = response.css('.jobsearch-SerpJobCard')\n        items = []\n        for titles in titles:\n            item = Scrape4Item()\n            base_url = get_base_url(response)\n            home_url = (\"http://www.indeed.co.uk\")\n            item ['_pageURL'] = base_url\n            item ['role_titletext'] = title.xpath('.//h2/a/@title').extract()\n        items.append(item)\n        return items\n</code></pre>\n"}, {"tags": ["python", "mocking", "python-unittest"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1542232230, "post_id": 53309207, "comment_id": 93499275, "body": "Have you check the packages <a href=\"https://requests-mock.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">requests-mock</a>? It is very useful when mocking <code>requests</code> calls."}, {"owner": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "edited": false, "score": 0, "creation_date": 1542283664, "post_id": 53309207, "comment_id": 93518197, "body": "Can we see an example of your current mocking? I can write up a better example of how it should look if I have a starting point. Essentially you&#39;d just assign the response (or a portion of a mocked response) to an already encoded value. You can either do that with raw bytes like this: <code>b&#39;\\xE2\\x98\\xBA&#39;</code> or by starting with the encoded string and call <code>encode</code> like this: <code>&#39;\u263a&#39;.encode(&#39;utf-8&#39;)</code>"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1542291692, "post_id": 53309207, "comment_id": 93523071, "body": "What should <code>requests.content.encode(&#39;utf-8&#39;,data))</code> do?"}, {"owner": {"reputation": 892, "user_id": 2883071, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e5ba9b9e7e629478194565fc83b46cda?s=128&d=identicon&r=PG&f=1", "display_name": "user2883071", "link": "https://stackoverflow.com/users/2883071/user2883071"}, "reply_to_user": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "edited": false, "score": 0, "creation_date": 1542315834, "post_id": 53309207, "comment_id": 93536073, "body": "@wholevinski added a sample"}, {"owner": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "edited": false, "score": 2, "creation_date": 1542318770, "post_id": 53309207, "comment_id": 93537231, "body": "You can assign arbitrary attributes to a <code>Mock</code>, so it&#39;d be something like: <code>mock_fct_return = mock.Mock(content=b&#39;some content you want to decode&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 892, "user_id": 2883071, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e5ba9b9e7e629478194565fc83b46cda?s=128&d=identicon&r=PG&f=1", "display_name": "user2883071", "link": "https://stackoverflow.com/users/2883071/user2883071"}, "edited": false, "score": 0, "creation_date": 1542465339, "post_id": 53337210, "comment_id": 93582058, "body": "Just a follow up question.. the <code>.content.decode</code>, which library is that from? I thought it was from the requests library.. but it turns out it isn&#39;t? (I didnt import requests, and was still able to use <code>content.decode</code>"}, {"owner": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "reply_to_user": {"reputation": 892, "user_id": 2883071, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e5ba9b9e7e629478194565fc83b46cda?s=128&d=identicon&r=PG&f=1", "display_name": "user2883071", "link": "https://stackoverflow.com/users/2883071/user2883071"}, "edited": false, "score": 0, "creation_date": 1542465792, "post_id": 53337210, "comment_id": 93582186, "body": "<code>.content</code> is an attribute on the response object coming back from the <code>requests</code> library. <code>.decode</code> is a function on strings. <code>.content</code> is in raw byte form, so using <code>decode</code> will take those bytes and turn them back into the intended representation (perhaps a UTF8 smiley face like above). Whenever you see a <code>u</code> before a string in python 2.7, that&#39;s a unicode string; the default strings in python 3 are already unicode. I could go on for awhile about this; I&#39;d recommend checking out: <a href=\"https://stackoverflow.com/questions/15092437/python-encoding-utf-8\" title=\"python encoding utf 8\">stackoverflow.com/questions/15092437/python-encoding-utf-8</a>"}], "tags": [], "owner": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "is_accepted": true, "score": 1, "last_activity_date": 1542368661, "creation_date": 1542368661, "answer_id": 53337210, "question_id": 53309207, "link": "https://stackoverflow.com/questions/53309207/python-unittest-mock-library/53337210#53337210", "title": "Python unittest.mock library", "body": "<p>Here's how you can mock the response like I was saying above. Note that I took some liberties to make your code and my test actually work. They are included in comments:</p>\n\n<pre><code>\"\"\"request_module.py\"\"\"\nimport requests\n\n\nclass SomeClass(object):\n    \"\"\"I put these in a class, since you had self as your first arg\"\"\"\n    def sample_fct(self, endpoint):\n        try:\n            request = requests.post (endpoint, verify=False)\n        except requests.exceptions.RequestException as e:\n            raise\n        return request\n\n    def get_something(self, test):\n        try:\n            response = self.sample_fct(test)\n            resp_text = response.content.decode('utf-8')\n            # Changed to return the value instead of print it\n            return resp_text\n        except:\n            raise \n</code></pre>\n\n<p>You can see in the test how I assign the return value of your mocked <code>sample_fct</code> to an arbitrary <code>Mock</code> object. That object can have arbitrary attributes assigned to it, which can aid in testing for return values that may be many attribute levels deep.</p>\n\n<pre><code>\"\"\"test_request_module.py\"\"\"\nimport unittest\nimport unittest.mock as mock\n\nfrom request_module import SomeClass\n\nclass TestRequests(unittest.TestCase):\n    @mock.patch('request_module.SomeClass.sample_fct')\n    def test_get_something(self, mock_sample_fct):\n        mock_sample_fct.return_value = mock.Mock(content=b'some content you want to decode \\xE2\\x98\\xBA')\n        # Testing that your decoded value is returned\n        some_class = SomeClass()\n        result = some_class.get_something('some_test_value')\n        # Note the decoded smiley face\n        self.assertEqual('some content you want to decode \u263a', result)\n</code></pre>\n\n<p>Note that you can also assign attributes of attributes on a <code>Mock</code>. So if your caller is expecting something like <code>request.attributes.nested_attributes.value</code>, you could do something like this and <code>Mock</code> will allow it:</p>\n\n<pre><code>mock_ret = mock.Mock()\nmock_ret.request.attributes.nested_attributes.value = 'deep attr value'\n</code></pre>\n"}], "owner": {"reputation": 892, "user_id": 2883071, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e5ba9b9e7e629478194565fc83b46cda?s=128&d=identicon&r=PG&f=1", "display_name": "user2883071", "link": "https://stackoverflow.com/users/2883071/user2883071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 53337210, "answer_count": 1, "score": 0, "last_activity_date": 1542368661, "creation_date": 1542232066, "last_edit_date": 1542315817, "question_id": 53309207, "link": "https://stackoverflow.com/questions/53309207/python-unittest-mock-library", "title": "Python unittest.mock library", "body": "<p>I'm writing unit tests for a requests library. For most of my libraries, I run a <code>.content.decode('utf-8')</code> on the response to get to the actual text. However when I'm mocking this response from the api call, how do I mock a response object which is received by the requests call? is there a <code>requests.content.encode('utf-8',data))</code> look alike process which can actually mock the response coming in (in encoded format) from the API call, and then I decode that object.</p>\n\n<p>sample code:</p>\n\n<pre><code>def sample_fct(self, endpoint):\n    try:\n        request = requests.post (endpoint, verify=False)\n    except requests.exceptions.RequestException as e:\n        raise\n    return request\n\ndef get_something(self,test):\n    try:\n        response = self.sample_fct(test)\n        resp_text = response_bare.content.decode('utf-8')\n        print resp_text\n    except:\n        raise \n</code></pre>\n\n<p>So for instance, if I wanted to unit test the <code>get_something</code> function, I need to mock the <code>sample_fct</code> function. to do this, i would have to set the <code>sample_fct.return_value</code> to a request object that it is returning.</p>\n\n<p>So how do I create that object.</p>\n"}, {"tags": ["python", "pandas", "styles", "python-3.6"], "comments": [{"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "reply_to_user": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "edited": false, "score": 0, "creation_date": 1542258828, "post_id": 53309119, "comment_id": 93506049, "body": "well I will say thar&#39;s kinda duplicate, but I posted because I tried that code and got some error, and I tried hard to find mistake which I did not find it, thanks for it"}], "answers": [{"comments": [{"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "edited": false, "score": 0, "creation_date": 1542258677, "post_id": 53312746, "comment_id": 93506000, "body": "well I guess that was the mistake which was generating this error, in the else i was returning my initial DataFrame, which was wrong in this case, well thank you so much for correcting me, I have one more question, this is just highlighting one word, how can I highlight the full row?"}, {"owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "reply_to_user": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "edited": false, "score": 0, "creation_date": 1542259349, "post_id": 53312746, "comment_id": 93506200, "body": "Something like this? <a href=\"https://stackoverflow.com/questions/43596579/how-to-use-python-pandas-stylers-for-coloring-an-entire-row-based-on-a-given-col\" title=\"how to use python pandas stylers for coloring an entire row based on a given col\">stackoverflow.com/questions/43596579/&hellip;</a>"}, {"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "edited": false, "score": 0, "creation_date": 1542259939, "post_id": 53312746, "comment_id": 93506371, "body": "well thanks but, I already did it, thank you so much for your kind help"}, {"owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "edited": false, "score": 0, "creation_date": 1542260111, "post_id": 53312746, "comment_id": 93506431, "body": "that was really helpful since, you corrected my first mistake, thanks a lot"}], "tags": [], "owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "is_accepted": true, "score": 1, "last_activity_date": 1542259646, "last_edit_date": 1542259646, "creation_date": 1542258284, "answer_id": 53312746, "question_id": 53309119, "link": "https://stackoverflow.com/questions/53309119/can-somebody-help-me-to-correct-my-following-code-at-the-styling-point-in-pandas/53312746#53312746", "title": "can somebody help me to correct my following code at the styling point in Pandas Python", "body": "<p>You were close. I'm not exactly sure why you got THAT error, but one issue was that you were returning your initial dataframe within the <code>else</code> block of your list comprehension.</p>\n\n<p>If you replace that line with this, you may have better luck.</p>\n\n<pre><code>df.style.apply(lambda x: [\"background: yellow\" if v == \"noise\" else \"\" for v in x], axis = 1)\n</code></pre>\n\n<p>In this case, you are iterating over each row in your <code>df</code>, highlighting cells that equal <code>noise</code>.</p>\n\n<p>Help from / possible duplicate of <a href=\"https://stackoverflow.com/questions/41203959/conditionally-format-python-pandas-cell\">Conditionally format Python pandas cell</a></p>\n\n<p>Edit:\nRipping off @scott-boston and <a href=\"https://stackoverflow.com/questions/43596579/how-to-use-python-pandas-stylers-for-coloring-an-entire-row-based-on-a-given-col\">How to use Python Pandas Stylers for coloring an entire row based on a given column?</a>,</p>\n\n<pre><code>def highlight_row(s,keyword,column):\n    is_keyword = pd.Series(data=False, index=s.index)\n    is_keyword[column] = s.loc[column] == keyword\n    return ['background-color: yellow' if is_keyword.any() else '' for v in is_keyword]\n\ndf.style.apply(highlight_row, keyword=\"noise\", column=[\"flagged\"], axis=1)\n</code></pre>\n"}], "owner": {"reputation": 804, "user_id": 2298012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/iNtLs.jpg?s=128&g=1", "display_name": "id101112", "link": "https://stackoverflow.com/users/2298012/id101112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1542260210, "accepted_answer_id": 53312746, "answer_count": 1, "score": 2, "last_activity_date": 1542259646, "creation_date": 1542231599, "question_id": 53309119, "link": "https://stackoverflow.com/questions/53309119/can-somebody-help-me-to-correct-my-following-code-at-the-styling-point-in-pandas", "closed_reason": "Duplicate", "title": "can somebody help me to correct my following code at the styling point in Pandas Python", "body": "<pre><code>for idx,ids in enumerate(uniq):\n    SV = df_CenteredWin[df_CenteredWin['subVoyageIDs'] == ids]\n\n    SV['minGroup']= np.isnan(SV.groupby(pd.TimeGrouper('30T')).DateTime.diff().dt.seconds)\n    SV['groups'] = (SV['minGroup'].shift(1) != SV['minGroup']).astype(int).cumsum()\n    SV_Noise = SV[SV['zScore_Noise'] == 'noise']\n    uniqueID= SV_Noise.groups.unique()\n\n    print(uniqueID, SV_Noise.subVoyageIDs.unique())\n\n    for idx, groupid in enumerate(uniqueID):\n        groups = SV[SV['groups'] == groupid]\n        groups_nosie = groups[groups['zScore_Noise'] == 'noise']\n        data = pd.DataFrame(data = { 'distance' : groups.Distance,\n                       'Speed' : groups.Speed,\n                        'Z-Score' :  groups.centeredZScore,\n                         'flagged' :  groups.zScore_Noise.values})\n        display(data.style.apply(lambda x: ['background: Yellow' if x.name == 'noise' else data for i in x]))     \n</code></pre>\n\n<p>can anyone explain me what is wrong in this line, and how can I correct it</p>\n\n<pre><code>display(data.style.apply(lambda x: ['background: Yellow' if x.name == 'noise' else data for i in x]))\n</code></pre>\n\n<p>I have this following data where i am trying to highlight the row where the flagged column is equal to 'noise'</p>\n\n<pre><code> DateTime            Speed      Score        Distance   flagged\n2011-01-09 12:21:59 1.840407   -0.845713    0.030673    noisefree\n2011-01-09 12:23:00 4.883493    2.307917    0.082748    noisefree\n2011-01-09 12:24:00 4.413968    1.752545    0.073566    noisefree\n2011-01-09 12:24:59 4.950600    2.178342    0.081135    noisefree\n2011-01-09 12:26:00 10.014879   4.355568    0.169697    noise\n2011-01-09 12:27:00 7.534325    2.535460    0.125572    noisefree\n2011-01-09 12:27:59 6.965328    2.122056    0.114154    noisefree\n2011-01-09 12:29:00 6.993480    1.963185    0.118501    noisefree \n</code></pre>\n\n<p>and the error is: </p>\n\n<pre><code>AttributeError: 'DataFrame' object has no attribute 'rstrip'\n</code></pre>\n"}, {"tags": ["python", "mitmproxy"], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 6871901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0e846c09421a687519bdee7788203e?s=128&d=identicon&r=PG&f=1", "display_name": "VB_Dojnaz", "link": "https://stackoverflow.com/users/6871901/vb-dojnaz"}, "is_accepted": true, "score": 2, "last_activity_date": 1542405379, "last_edit_date": 1542405379, "creation_date": 1542352040, "answer_id": 53333009, "question_id": 53309111, "link": "https://stackoverflow.com/questions/53309111/mitmproxy-python-ignore-all-hosts-with-https-ssl/53333009#53333009", "title": "mitmproxy &amp; python - ignore all hosts with https/ssl", "body": "<p>There is a script file called <a href=\"https://github.com/mitmproxy/mitmproxy/blob/master/examples/complex/tls_passthrough.py\" rel=\"nofollow noreferrer\">tls_passthrough.py</a> on the mitmproxy GitHub which ignores hosts which has previously failed a handshake due to the user not trusting the new certificate. Although it does not save for other sessions.</p>\n\n<p>What this also means is that the first SSL connection from this perticular host the will always fail. What I suggest you do is write out all the IPs which has failed previously into a text document and ignore all hosts which are in that text file.</p>\n\n<p><a href=\"https://github.com/mitmproxy/mitmproxy/blob/master/examples/complex/tls_passthrough.py\" rel=\"nofollow noreferrer\">tls_passthrough.py</a></p>\n\n<p>To simply start it, you just add it with the script argument \"-s (tls_passthrough.py path)\" </p>\n\n<p>Example,</p>\n\n<pre><code>mitmproxy -s tls_passthrough.py\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5732427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3d69bb5b651d2e55b7249bba99ceec?s=128&d=identicon&r=PG&f=1", "display_name": "Eclipsum", "link": "https://stackoverflow.com/users/5732427/eclipsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2485, "favorite_count": 0, "accepted_answer_id": 53333009, "answer_count": 1, "score": 3, "last_activity_date": 1542405379, "creation_date": 1542231550, "last_edit_date": 1542237240, "question_id": 53309111, "link": "https://stackoverflow.com/questions/53309111/mitmproxy-python-ignore-all-hosts-with-https-ssl", "title": "mitmproxy &amp; python - ignore all hosts with https/ssl", "body": "<p>I've done alot of research, and I can't find anything which actually solves my issue.</p>\n\n<p>Since basically no site accepts mitmdumps certificate for https, I want to ignore those hosts. I can access a specific website with \"--ignore-hosts (ip)\" like normal, but I need to ignore all HTTPS/SSL hosts.\nIs there any way I can do this at all?</p>\n\n<p>Thanks alot!</p>\n"}, {"tags": ["python", "xpath", "web-scraping", "beautifulsoup", "empty-list"], "comments": [{"owner": {"reputation": 497, "user_id": 6871833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fe8d6c50412f3f618dd6716255401f?s=128&d=identicon&r=PG&f=1", "display_name": "Ywapom", "link": "https://stackoverflow.com/users/6871833/ywapom"}, "edited": false, "score": 0, "creation_date": 1542232354, "post_id": 53309097, "comment_id": 93499326, "body": "did you try the xpath without the /text() ?  Then get the innerHTML"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 10257188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9fac25e34d82a9fc98d2847adf23036?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew5Johnson", "link": "https://stackoverflow.com/users/10257188/matthew5johnson"}, "is_accepted": false, "score": 2, "last_activity_date": 1542232281, "creation_date": 1542232281, "answer_id": 53309246, "question_id": 53309097, "link": "https://stackoverflow.com/questions/53309097/python-xpath-returns-empty-list-exilead/53309246#53309246", "title": "python xpath returns empty list - exilead", "body": "<blockquote>\n  <p>When I checked the html source I realised I actually cannot find the element I am looking for (the number of results) on the source.</p>\n</blockquote>\n\n<p>This suggests that the data you're looking for is dynamically generated with javascript. You'll need to be able to see the element you're looking for in the html source.</p>\n\n<p>To confirm this being the cause of your error, you could try something really simple like:</p>\n\n<pre><code>html = r.text\nsoup = BeautifulSoup(html, 'lxml')\n</code></pre>\n\n<p>*note the 'lxml' above.</p>\n\n<p>And then manually check 'soup' to see if your desired element is there.</p>\n"}, {"comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 1, "creation_date": 1542311418, "post_id": 53309406, "comment_id": 93534264, "body": "Please remember to consider hitting the check mark next to the answer to check resolved.  <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 1, "last_activity_date": 1542233029, "creation_date": 1542233029, "answer_id": 53309406, "question_id": 53309097, "link": "https://stackoverflow.com/questions/53309097/python-xpath-returns-empty-list-exilead/53309406#53309406", "title": "python xpath returns empty list - exilead", "body": "<p>I can get that with a css selector combination of <code>small.pull-right</code> to target the tag and the class name of the element.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nurl = 'https://www.exalead.com/search/web/results/?q=lead+poisoning'\nres = requests.get(url)\nsoup = BeautifulSoup(res.content, \"lxml\")\nprint(soup.select_one('small.pull-right').text)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10654409, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YRS0QikrUVY/AAAAAAAAAAI/AAAAAAAAGrQ/8w_vUhcWZbM/photo.jpg?sz=128", "display_name": "Elisa Macchi", "link": "https://stackoverflow.com/users/10654409/elisa-macchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542233029, "creation_date": 1542231453, "question_id": 53309097, "link": "https://stackoverflow.com/questions/53309097/python-xpath-returns-empty-list-exilead", "title": "python xpath returns empty list - exilead", "body": "<p>I'm fairly new to scraping with Python. \nI am trying to obtain the number of search results from a query on Exilead. In this <a href=\"https://i.stack.imgur.com/QavJP.png\" rel=\"nofollow noreferrer\">example</a> I would like to get \"\n586,564 results\".</p>\n\n<p>This is the code I am running:</p>\n\n<pre><code>r = requests.get(URL, headers=headers)\ntree = html.fromstring(r.text)\nstats = tree.xpath('//[@id=\"searchform\"]/div/div/small/text()')\n</code></pre>\n\n<p>This returns an empty list.</p>\n\n<p>I copy-pasted the xPath directly from the elements' page.<br>\nAs an alternative, I have tried using Beautiful soup:</p>\n\n<pre><code>html = r.text\nsoup = BeautifulSoup(html, 'xml')\nstats = soup.find('small', {'class': 'pull-right'}).text\n</code></pre>\n\n<p>which returns a Attribute error: NoneType object does not have attribute text.</p>\n\n<p>When I checked the html source I realised I actually cannot find the element I am looking for (the number of results) on the source.</p>\n\n<p>Does anyone know why this is happening and how this can be resolved?\nThanks a lot!</p>\n"}, {"tags": ["python", "swift", "pyaudio", "librosa"], "comments": [{"owner": {"reputation": 729, "user_id": 9927423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0389f52eb5c6b3681ef4e8ea6fe593e?s=128&d=identicon&r=PG&f=1", "display_name": "smitty_werbenjagermanjensen", "link": "https://stackoverflow.com/users/9927423/smitty-werbenjagermanjensen"}, "edited": false, "score": 0, "creation_date": 1542231783, "post_id": 53309083, "comment_id": 93499087, "body": "did you try pip install -u librosa maybe? or sudo pip install librosa.... Also what happens when you type import librosa.display ? or run this sudo apt-get install python-pyaudio. If none of those work make sure you ran the setup.py for them"}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1542231809, "post_id": 53309083, "comment_id": 93499097, "body": "Are you sure that you&#39;re using the same version of Python in Swift? Maybe you&#39;re using Py3 in one case and 2 in the other so it doesn&#39;t find the modules because you only have them in Py3 (or vice versa)."}], "answers": [{"comments": [{"owner": {"reputation": 3920, "user_id": 1642174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6e8286905664bb64af8b1067bf8e3e7?s=128&d=identicon&r=PG", "display_name": "Finn Gaida", "link": "https://stackoverflow.com/users/1642174/finn-gaida"}, "edited": false, "score": 0, "creation_date": 1558367940, "post_id": 53312168, "comment_id": 99069633, "body": "This helped me. To make it more clear for others encountering this problem: Swift for TF uses the latest Python executable in <code>&#47;Library&#47;Frameworks&#47;Python.framework&#47;</code> <b>including</b> <code>pip</code>! So you need to use <i>that</i> <code>pip</code> to install your required packaged."}], "tags": [], "owner": {"reputation": 369, "user_id": 4632983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff0da9ad1ff1b9de59524c231053703d?s=128&d=identicon&r=PG&f=1", "display_name": "David Cittadini", "link": "https://stackoverflow.com/users/4632983/david-cittadini"}, "is_accepted": false, "score": 2, "last_activity_date": 1542253817, "creation_date": 1542253817, "answer_id": 53312168, "question_id": 53309083, "link": "https://stackoverflow.com/questions/53309083/swift-python-no-module-named-librosa-or-pyaudio/53312168#53312168", "title": "Swift + Python: No module named librosa or pyaudio", "body": "<p>The Swift for TensorFlow Python module is built linked against the system Python.  So, if you use something like homebrew to install Python2/Python3 then Swift for TensorFlow will not see those packages installed.  Therefore, you have to make sure that you uninstall python@2 and use the system Python.  The system Python does not include <a href=\"https://pip.pypa.io/en/stable/installing/\" rel=\"nofollow noreferrer\">pip</a> and so you will need to install that.  Once you have installed pip you can see that Swift for TensorFlow has already installed a few Python libraries for you (which is why matplotlib.pyplot and numpy could be imported).  Now, you can pip install the Python libraries you need and they will indeed now be seen inside Swift for TensorFlow.</p>\n"}], "owner": {"reputation": 369, "user_id": 4632983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff0da9ad1ff1b9de59524c231053703d?s=128&d=identicon&r=PG&f=1", "display_name": "David Cittadini", "link": "https://stackoverflow.com/users/4632983/david-cittadini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542253817, "creation_date": 1542231365, "question_id": 53309083, "link": "https://stackoverflow.com/questions/53309083/swift-python-no-module-named-librosa-or-pyaudio", "title": "Swift + Python: No module named librosa or pyaudio", "body": "<p>I am performing a simple test to load Python libraries in a Swift app (below is the code).  All the Python libraries load OK except librosa and pyaudio (yes I have them installed via pip and yes they work in native Python).  When I run the app I get the error message \"Python exception: No module named x\", where x is librosa or pyaudio.  The other Python libraries load and work perfectly.  So, what do I have to do in order to get the librosa and pyaudio libraries to work in Swift?</p>\n\n<pre><code>let np = Python.import(\"numpy\")\nlet plt = Python.import(\"matplotlib.pyplot\")\nlet rosa = Python.import(\"librosa\")\nlet audio = Python.import(\"pyaudio\")\nlet display = Python.import(\"IPython.display\")\nlet pd = Python.import(\"pandas\")\n</code></pre>\n\n<p>My system:</p>\n\n<pre><code>macOS Mojave: Version 10.14.2 Beta (18C38b)\nXcode: Version 10.1 (10B61)\nToolchain: Swift for TensorFlow Development Snapshot 2018-10-17\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "django-rest-framework", "django-class-based-views"], "answers": [{"comments": [{"owner": {"reputation": 2633, "user_id": 1346462, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d1f6672543041dd640661891b99af2b5?s=128&d=identicon&r=PG", "display_name": "Sharpless512", "link": "https://stackoverflow.com/users/1346462/sharpless512"}, "edited": false, "score": 1, "creation_date": 1591514147, "post_id": 53311319, "comment_id": 110080015, "body": "Make sure to add the &quot;serializers&quot; before it so:  cat = serializers.PrimaryKeyRelatedField(queryset=Category.objects&zwnj;&#8203;.all())"}], "tags": [], "owner": {"reputation": 2344, "user_id": 1274783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72e9098421dc70d5b66024c2ebe8484?s=128&d=identicon&r=PG", "display_name": "ivissani", "link": "https://stackoverflow.com/users/1274783/ivissani"}, "is_accepted": true, "score": 1, "last_activity_date": 1542246669, "creation_date": 1542246669, "answer_id": 53311319, "question_id": 53309082, "link": "https://stackoverflow.com/questions/53309082/django-rest-framework-post-fails-null-value-in-column-cat-id-violates-not-nul/53311319#53311319", "title": "Django Rest Framework POST fails: null value in column &quot;cat_id&quot; violates not-null constraint", "body": "<p>Probably what you want is to define the field <code>cat</code> in your <code>TaskSerializer</code> to be a <code>PrimaryKeyRelatedField</code><a href=\"https://www.django-rest-framework.org/api-guide/relations/#primarykeyrelatedfield\" rel=\"nofollow noreferrer\">(documentation here)</a>, in your case would be:</p>\n\n<pre><code>class TaskSerializer(serializers.ModelSerializer):\n    cat = PrimaryKeyRelatedField(queryset=Category.objects.all())\n    class Meta:\n        model = Task\n        fields = ('id', 'name', 'cat')\n</code></pre>\n\n<p>Then in your request just send the pk in the <code>\"cat\"</code> field like so:</p>\n\n<pre><code>{\n    \"name\": \"buy-some\",\n    \"cat\": 1\n}\n</code></pre>\n\n<p>This should do the trick.</p>\n"}], "owner": {"reputation": 416, "user_id": 7389282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390095e10a5b28999b524818f7d406fc?s=128&d=identicon&r=PG&f=1", "display_name": "curiousdev", "link": "https://stackoverflow.com/users/7389282/curiousdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 53311319, "answer_count": 1, "score": 3, "last_activity_date": 1542246669, "creation_date": 1542231363, "last_edit_date": 1542238739, "question_id": 53309082, "link": "https://stackoverflow.com/questions/53309082/django-rest-framework-post-fails-null-value-in-column-cat-id-violates-not-nul", "title": "Django Rest Framework POST fails: null value in column &quot;cat_id&quot; violates not-null constraint", "body": "<p>I've recently converted my views to generic class-based views, however I've just noticed that POST requests fail on classes that have foreign-keys. The following is my code, followed by the error message.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class Category(models.Model):\n    name = models.CharField(max_length=25, blank=False)\n\n    class Meta:\n        ordering = ('id',)\n\n\nclass Task(models.Model):\n    name = models.CharField(max_length=25, blank=False)\n    cat = models.ForeignKey(Category, on_delete=models.CASCADE)\n\n    class Meta:\n        ordering = ('id',)\n</code></pre>\n\n<p><strong>serializers.py</strong></p>\n\n<pre><code>class TaskSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Task\n        fields = ('id', 'name', 'cat_id')\n\n\nclass CategorySerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Category\n        fields = ('id', 'name')\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>class TaskList(generics.ListCreateAPIView):\n    \"\"\"\n    List all Tasks (OR for specified cat_id)\n    \"\"\"\n    queryset = Task.objects.all()\n    serializer_class = TaskSerializer\n    filter_fields = ('cat_id',)\n</code></pre>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>path('tasks/', views.TaskList.as_view()),\n</code></pre>\n\n<p><strong>Error returned</strong></p>\n\n<pre><code>django.db.utils.IntegrityError: null value in column \"cat_id\" violates not-null constraint\nDETAIL:  Failing row contains (51, buy-some, null).\n</code></pre>\n\n<p><strong>REQUEST content: JSON Object</strong></p>\n\n<pre><code>{\n    \"name\": \"buy-some\",\n    \"cat_id\": 1\n}\n</code></pre>\n\n<p>Additionally, <em>Content-Type, Accept</em> headers are set to <em>application/json</em>.</p>\n\n<p><strong>Category with id=1 exists</strong></p>\n"}, {"tags": ["python", "flask", "request", "python-requests"], "comments": [{"owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "reply_to_user": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "edited": false, "score": 0, "creation_date": 1542233300, "post_id": 53309045, "comment_id": 93499724, "body": "The post you&#39;ve mentioned does not clarify how to send and unpack the dictionary object using Flask.request.files attribute."}], "answers": [{"comments": [{"owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "edited": false, "score": 0, "creation_date": 1542232681, "post_id": 53309310, "comment_id": 93499497, "body": "I am intentionally using the <code>requests.post(url, files=list())</code> and not <code>requests.post(url, json=str())</code> since I would like to be able to send both the files and dictionary with the same request."}, {"owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "reply_to_user": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "edited": false, "score": 0, "creation_date": 1542233000, "post_id": 53309310, "comment_id": 93499613, "body": "@alphanumeric Your request doesn&#39;t include any files. The variable <code>multiple_files</code> in the client contains only dicts, lists, and strings."}, {"owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "edited": false, "score": 0, "creation_date": 1542233026, "post_id": 53309310, "comment_id": 93499624, "body": "Since I would like to keep the question as simple as possible the <code>multiple_files</code> list contains the dictionary object only and not the files."}], "tags": [], "owner": {"reputation": 1133, "user_id": 2387597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e97d265245b5a76657576d13768f6698?s=128&d=identicon&r=PG", "display_name": "n8sty", "link": "https://stackoverflow.com/users/2387597/n8sty"}, "is_accepted": false, "score": 1, "last_activity_date": 1542232522, "creation_date": 1542232522, "answer_id": 53309310, "question_id": 53309045, "link": "https://stackoverflow.com/questions/53309045/how-to-get-python-dictionary-via-flask-request-files-attribute/53309310#53309310", "title": "How to get Python dictionary via Flask request files attribute", "body": "<p>This is happening because you're posting files instead of data. This should work:</p>\n\n<pre><code>import flask\n\napp = flask.Flask(__name__)\n\n@app.route('/test', methods=['GET','POST'])\ndef route():   \n    print('got data: {}'.format(flask.request.json))\n    return Response()\n\nif __name__ == '__main__':\n    app.run('0.0.0.0', 5000)\n</code></pre>\n\n<p>and then send data to your app by</p>\n\n<pre><code>import requests  \n\ndictionary_1 = {\"file\": {\"url\": \"https://bootstrap.pypa.io/get-pip.py\"}}  \n\nresponse = requests.post('http://127.0.0.1:5000/test', json=dictionary_1)\n</code></pre>\n\n<p>In your example there's no need to post the file unless I'm misunderstanding something</p>\n"}, {"tags": [], "owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "is_accepted": false, "score": 0, "last_activity_date": 1542261760, "last_edit_date": 1542261760, "creation_date": 1542232540, "answer_id": 53309313, "question_id": 53309045, "link": "https://stackoverflow.com/questions/53309045/how-to-get-python-dictionary-via-flask-request-files-attribute/53309313#53309313", "title": "How to get Python dictionary via Flask request files attribute", "body": "<p>Solution # 1:</p>\n\n<pre><code>from flask import Flask, request, Response\nimport StringIO, json \n\napp = Flask(__name__)\n\n@app.route('/test', methods=['GET','POST'])\ndef route():  \n    print('got files: %s' % request.files)\n    for key, file_storage in request.files.items():\n        string_io = StringIO.StringIO()\n        file_storage.save(string_io)\n        data = json.loads(string_io.getvalue())\n        print('data: %s type: %s' % (data, type(data)) ) \n\n    return Response()\n\nif __name__ == '__main__':\n    app.run('0.0.0.0', 5000)\n</code></pre>\n\n<p>Solution # 2:</p>\n\n<pre><code>from flask import Flask, request, Response\nimport tempfile, json, os, time   \n\napp = Flask(__name__)\n\n@app.route('/test', methods=['GET','POST'])\ndef route():   \n    print('got files: %s' % request.files)\n\n    for key, _file in request.files.items():\n        tmp_filepath = os.path.join(tempfile.mktemp(), str(time.time()))\n        if not os.path.exists(os.path.dirname(tmp_filepath)):\n            os.makedirs(os.path.dirname(tmp_filepath))\n\n        _file.save(tmp_filepath)\n\n        with open(tmp_filepath) as f:\n            json_data = json.loads(f.read())\n\n        print type(json_data), json_data \n\n    return Response(json_data)\n\nif __name__ == '__main__':\n    app.run('0.0.0.0', 5000)\n</code></pre>\n"}], "owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2976, "favorite_count": 1, "closed_date": 1542397750, "answer_count": 2, "score": 1, "last_activity_date": 1542397756, "creation_date": 1542231157, "last_edit_date": 1542337213, "question_id": 53309045, "link": "https://stackoverflow.com/questions/53309045/how-to-get-python-dictionary-via-flask-request-files-attribute", "closed_reason": "Duplicate", "title": "How to get Python dictionary via Flask request files attribute", "body": "<p>With <code>server.py</code> running:</p>\n\n<pre><code>from flask import Flask, request, Response\n\napp = Flask(__name__)\n\n@app.route('/test', methods=['GET','POST'])\ndef route():   \n    print('got files: %s' % request.files)\n    return Response()\n\nif __name__ == '__main__':\n    app.run('0.0.0.0', 5000)\n</code></pre>\n\n<p>send a request using <code>client.py</code>:</p>\n\n<pre><code>import json, requests  \n\ndictionary_1 = {\"file\": {\"url\": \"https://bootstrap.pypa.io/get-pip.py\"}}  \n\nfiles = [('dictionary_1', ('get-pip.py', json.dumps(dictionary_1), 'application/json'))]\n\nresponse = requests.post('http://127.0.0.1:5000/test', files=files)\n</code></pre>\n\n<p>Server logs that it received a request:</p>\n\n<pre><code>got files: ImmutableMultiDict([('dictionary_1', &lt;FileStorage: u'get-pip.py' ('application/json')&gt;)]) \n</code></pre>\n\n<p>Apparently, the <code>dictionary_1</code> was received as <code>FileStorage</code> object.\nHow to turn the received <code>FileStorage</code> into the Python dictionary?</p>\n\n<h1>edited later</h1>\n\n<p>The possible duplicate post does not clarify how to send and unpack the Python dictionary object sent via <code>requests(files=list())</code></p>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1542231096, "post_id": 53309015, "comment_id": 93498784, "body": "How is that a bad result?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542231125, "post_id": 53309015, "comment_id": 93498798, "body": "@roganjosh: it probably swaps the day and the month."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542231196, "post_id": 53309015, "comment_id": 93498833, "body": "Possibly. But they got it to a datetime. Either need <code>day_first</code> argument or pass a format string and <code>strf</code> it back out. This has to be a dupe."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542231596, "post_id": 53309015, "comment_id": 93499012, "body": "You either deal with a datetime format inherent to pandas or convert back to a string with the new format. Your desired format (without quotation marks) is not possible in python representations of the data."}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542231831, "post_id": 53309138, "comment_id": 93499111, "body": "I&#39;m not so sure. My <i>guess</i> is that they want to convert back to a string because this would not result in a natural representation that&#39;s useful for much. I think it&#39;s an XY problem."}, {"owner": {"reputation": 292, "user_id": 7379645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffc913fb82d339382a5f779baed9150?s=128&d=identicon&r=PG&f=1", "display_name": "James Fulton", "link": "https://stackoverflow.com/users/7379645/james-fulton"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542232014, "post_id": 53309138, "comment_id": 93499184, "body": "I think since the desired <code>result=[05-01-2017,05-01-2017]</code> and there are no string marks around the result dates like there was around the input dates, that they want it in datetime format. However, I shall wait for their response."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542232238, "post_id": 53309138, "comment_id": 93499278, "body": "Think you&#39;re right on that. Can&#39;t test atm so I think it relies on clarification from OP on what exactly they intend."}, {"owner": {"reputation": 87, "user_id": 10098317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c50fa6f273a677b4416330fda06b52f?s=128&d=identicon&r=PG&f=1", "display_name": "Dr. know", "link": "https://stackoverflow.com/users/10098317/dr-know"}, "edited": false, "score": 0, "creation_date": 1542233650, "post_id": 53309138, "comment_id": 93499861, "body": "thanks James for your clarification"}], "tags": [], "owner": {"reputation": 292, "user_id": 7379645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffc913fb82d339382a5f779baed9150?s=128&d=identicon&r=PG&f=1", "display_name": "James Fulton", "link": "https://stackoverflow.com/users/7379645/james-fulton"}, "is_accepted": false, "score": 0, "last_activity_date": 1542232144, "last_edit_date": 1542232144, "creation_date": 1542231704, "answer_id": 53309138, "question_id": 53309015, "link": "https://stackoverflow.com/questions/53309015/convert-a-series-of-string-to-date/53309138#53309138", "title": "Convert a series of string to date", "body": "<p>You just need to specify the format of the dates in your column. This works for me from your example. Simple.</p>\n\n<pre><code>pd.to_datetime(df['Date'], format = '%d.%m.%Y')\n</code></pre>\n\n<p>I'm assuming that the numbers in your dates are day.month.year respectively and not month.day.year. If the latter is true then you should use <code>format = '%m.%d.%Y'</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542232054, "post_id": 53309184, "comment_id": 93499202, "body": "This doesn&#39;t address <code>pandas</code> at all, so will be unusable in its current form"}], "tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1542231916, "creation_date": 1542231916, "answer_id": 53309184, "question_id": 53309015, "link": "https://stackoverflow.com/questions/53309015/convert-a-series-of-string-to-date/53309184#53309184", "title": "Convert a series of string to date", "body": "<p>If you know your dates are always going to be strings in the form of MM.DD.YYYY, and you just wand MM-DD-YYYY instead, then you don't have to deal with any <code>datetime</code> conversions.  You can just do a substitution on the string:</p>\n\n<pre><code>&gt;&gt;&gt; from datetime import datetime\n&gt;&gt;&gt; mydatestrings = ['05.01.2017','05.02.2017','05.03.2017']\n&gt;&gt;&gt; newdates = [ d.replace('.','-') for d in mydatestrings ]\n&gt;&gt;&gt; print(newdates)\n['05-01-2017', '05-02-2017', '05-03-2017']\n</code></pre>\n\n<p>On the other hand, if you really want to get all of your dates as 'datetime' objects in Python, you can make a new list like this:</p>\n\n<pre><code>&gt;&gt;&gt; datetime_objs = [ datetime.strptime(d, '%m.%d.%Y') for d in mydatestrings ]\n</code></pre>\n\n<p>Then format it however you need to:</p>\n\n<pre><code>&gt;&gt;&gt; print(datetime_objs[1].strftime('%m-%d-%Y'))\n05-02-2017\n&gt;&gt;&gt; print(datetime_objs[1].strftime('%b, %d %Y'))\nMay, 02 2017\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 10098317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c50fa6f273a677b4416330fda06b52f?s=128&d=identicon&r=PG&f=1", "display_name": "Dr. know", "link": "https://stackoverflow.com/users/10098317/dr-know"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1139, "favorite_count": 0, "closed_date": 1542235520, "answer_count": 2, "score": 0, "last_activity_date": 1542248733, "creation_date": 1542231004, "last_edit_date": 1542248733, "question_id": 53309015, "link": "https://stackoverflow.com/questions/53309015/convert-a-series-of-string-to-date", "closed_reason": "Duplicate", "title": "Convert a series of string to date", "body": "<p>I have the data like this</p>\n\n<p><code>df['Date']=['05.01.2017','05.01.2017']</code></p>\n\n<p>I tried </p>\n\n<p><code>df1= pd.to_datetime(df['Date'])</code></p>\n\n<p>but it turned a bad result </p>\n\n<p>Id like to get the new data like this</p>\n\n<p><code>result=[05-01-2017,05-01-2017]</code></p>\n"}, {"tags": ["python", "input", "pygame", "sprite"], "comments": [{"owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "edited": false, "score": 0, "creation_date": 1542264936, "post_id": 53308966, "comment_id": 93508048, "body": "If you look at the code you posted you should see that it&#39;s not enough to answer your question. Where do you set <code>onGround</code> to <code>True</code>? What about <code>falling</code>? You set <code>velocity</code>, but what happens with this value? If this is the entire code for the <code>Player</code> class, it&#39;s obvious why it doesn&#39;t work (<code>onGround</code> is never <code>True</code>, hence <code>jump</code> does nothing, and even if it was <code>True</code>, you just set an atrribute you never use elsewhere)."}, {"owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "edited": false, "score": 0, "creation_date": 1542265021, "post_id": 53308966, "comment_id": 93508079, "body": "Maybe take a look at <a href=\"https://stackoverflow.com/q/14354171/142637\">this</a> question to get an idea of how to implement jumping."}], "owner": {"reputation": 79, "user_id": 10559791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a776402423e006cd3a14135c4748460?s=128&d=identicon&r=PG&f=1", "display_name": "d827", "link": "https://stackoverflow.com/users/10559791/d827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1610378372, "answer_count": 0, "score": 0, "last_activity_date": 1610378421, "creation_date": 1542230747, "last_edit_date": 1608649718, "question_id": 53308966, "link": "https://stackoverflow.com/questions/53308966/pygame-platformer-how-to-get-character-to-jump", "closed_reason": "Duplicate", "title": "Pygame platformer - How to get character to jump", "body": "<p>I am currently trying to make a Mario-type platformer using pygame and the MVC design pattern. My progress as of right now is getting a character on screen and having it move left and right.</p>\n\n<p>My goal is to have this character have the ability to jump when spacebar is pressed. It is definitely recognizing that spacebar is pressed, but the character just stops in place instead of jumping. Here is the code for the character that I currently have:</p>\n\n<pre><code>import pygame\n\n\nclass Player(pygame.sprite.Sprite):\n    def __init__(self, name, x, y, img_file):\n        pygame.sprite.Sprite.__init__(self)\n\n        self.image = pygame.image.load(img_file).convert_alpha()\n        self.rect = self.image.get_rect()\n        self.rect.x = x\n        self.rect.y = y\n        self.falling = True\n        self.onGround = False\n        self.v = 0\n        self.speed = 2\n\n    def moveLeft(self):\n        self.rect.x -= self.speed\n    def moveRight(self):\n        self.rect.x += self.speed\n    def jump(self):\n        if self.onGround == False:\n            return\n        self.velocity = 8\n        self.onGround = False\n</code></pre>\n\n<p>and here is the controller part corresponding to this:</p>\n\n<pre><code>if event.type == pygame.KEYDOWN:\n    if(event.key == pygame.K_SPACE):\n        self.player.jump()\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10654436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1b278ad88e20e8b2b4d190a034269d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan H", "link": "https://stackoverflow.com/users/10654436/jordan-h"}, "edited": false, "score": 1, "creation_date": 1542392675, "post_id": 53325225, "comment_id": 93565693, "body": "Thank you for the response, John!  Unfortunately, the integrated terminal is not what I&#39;m referencing. The latest update of the Python extension for VSCode introduced the ability to run code interactively in a cell-based environment based on Jupyter notebooks rather than having to run the entire script at once.   <a href=\"https://code.visualstudio.com/docs/python/editing#_jupyter-code-cells\" rel=\"nofollow noreferrer\">code.visualstudio.com/docs/python/editing#_jupyter-code-cell&zwnj;&#8203;s</a>  The screenshots in the above link show a Python Interactive window whose font matches that of the editor which is what I&#39;m trying to achieve as well."}, {"owner": {"reputation": 4183, "user_id": 3218693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IFDuC.jpg?s=128&g=1", "display_name": "Bill Huang", "link": "https://stackoverflow.com/users/3218693/bill-huang"}, "edited": false, "score": 0, "creation_date": 1556390197, "post_id": 53325225, "comment_id": 98425747, "body": "IT IS NOT REFERRING TO THE TERMINAL. It is &quot;Python Interactive&quot;. A sample screenshot is here: <a href=\"https://imgur.com/XiHuPal\" rel=\"nofollow noreferrer\">imgur.com/XiHuPal</a> . The default font size on the Python Interactive panel is so small and that is so irritating."}], "tags": [], "owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "is_accepted": false, "score": -1, "last_activity_date": 1542304101, "creation_date": 1542304101, "answer_id": 53325225, "question_id": 53308965, "link": "https://stackoverflow.com/questions/53308965/python-interactive-window-font/53325225#53325225", "title": "Python Interactive Window Font", "body": "<p>If you're talking about the integrated terminal (which is actually a command shell for whichever operating system you're using, not just for Python), then you are looking for the <code>terminal.integrated.fontFamily</code> setting in your <code>settings.json</code> file. For example, you could use the following line:</p>\n\n<pre><code>\"terminal.integrated.fontFamily\": \"Consolas\",\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120, "user_id": 10923026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08d89a59f60c9cda57638ccd0322edc?s=128&d=identicon&r=PG&f=1", "display_name": "universality", "link": "https://stackoverflow.com/users/10923026/universality"}, "is_accepted": false, "score": 1, "last_activity_date": 1570007337, "creation_date": 1570007337, "answer_id": 58198498, "question_id": 53308965, "link": "https://stackoverflow.com/questions/53308965/python-interactive-window-font/58198498#58198498", "title": "Python Interactive Window Font", "body": "<p>Currently, the only way to achieve this is by zooming in or out the entire VS Code window with View -> Appearance -> Zoom In/Zoom Out or use the <code>Cmd</code> + <code>+</code> or <code>Cmd</code> + <code>-</code> shortcuts (CTRL instead of Cmd on Windows). Do that until you get the desirable font size on the Python Interactive window.</p>\n\n<p>Of course zooming in or out will change the Python interactive window and the editor font size, but you can go to Settings and increase or decrease the font size of the editor until it becomes around same size as the Python Interactive window font size.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14985752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce0cc382783665c10902a50803ee637?s=128&d=identicon&r=PG&f=1", "display_name": "Rob.T Ryu", "link": "https://stackoverflow.com/users/14985752/rob-t-ryu"}, "is_accepted": false, "score": 0, "last_activity_date": 1610391271, "creation_date": 1610391271, "answer_id": 65672896, "question_id": 53308965, "link": "https://stackoverflow.com/questions/53308965/python-interactive-window-font/65672896#65672896", "title": "Python Interactive Window Font", "body": "<p>I found workaround, I'm putting it for other users:</p>\n<ol>\n<li>Have &quot;Custom UI&quot; extension:</li>\n</ol>\n<p><a href=\"https://marketplace.visualstudio.com/items?itemName=iocave.customize-ui\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=iocave.customize-ui</a></p>\n<ol start=\"2\">\n<li><p>Add custom styleheet to increase editor font size:\n&quot;customizeUI.stylesheet&quot;: {\n&quot;.view-line&quot;: &quot;font-size: 18px&quot;\n}</p>\n</li>\n<li><p>Zoom out whole window : Cmd + -</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 51, "user_id": 10654436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1b278ad88e20e8b2b4d190a034269d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan H", "link": "https://stackoverflow.com/users/10654436/jordan-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1369, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1610391271, "creation_date": 1542230743, "question_id": 53308965, "link": "https://stackoverflow.com/questions/53308965/python-interactive-window-font", "title": "Python Interactive Window Font", "body": "<p>Is it possible to change the font family shown in the new python interactive window that is produced when using the Python extension in VSCode?</p>\n"}, {"tags": ["python", "python-3.x", "hash", "hashmap", "hashcode"], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1542232333, "post_id": 53308980, "comment_id": 93499314, "body": "For a Python <code>int</code> object, though, the speed difference between <code>x % 16</code> and <code>x &amp; 15</code> is minimal."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1542232402, "post_id": 53308980, "comment_id": 93499351, "body": "probably, but why making it slower?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1542232999, "post_id": 53308980, "comment_id": 93499612, "body": "I&#39;ve had test runs where <i><code>&amp;</code></i> was slightly slower. The overhead of dealing with Python objects appears to overwhelm whatever differences there might be in the underlying arithmetic."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1542263215, "post_id": 53308980, "comment_id": 93507463, "body": "lesson #1: avoid premature optimization :) If you code your routine in assembly, masks will be faster. Otherwise, compilers will take care of that. And Python will just do whatever it pleases."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1618408090, "last_edit_date": 1618408090, "creation_date": 1542230868, "answer_id": 53308980, "question_id": 53308932, "link": "https://stackoverflow.com/questions/53308932/whats-the-difference-between-using-vs-mod-operators-in-calculating-indexes-h/53308980#53308980", "title": "What&#39;s the difference between using &amp; vs MOD operators in calculating indexes (Hash Table implementation)?", "body": "<pre><code>array_index = hash_code &amp; 15\n</code></pre>\n<p>is equivalent to (on positive values):</p>\n<pre><code>array_index = hash_code % 16\n</code></pre>\n<p>it only works in the case when all significant bits of the number are ones (which is when the number is of the form <code>2**n - 1</code>).</p>\n<p>Both remove the highest part of the number bits.</p>\n<p>Bit-masking is way faster than division. So it's used when possible to speed up computations. Every time you see:</p>\n<pre><code>b = a % modulo\n</code></pre>\n<p>with <code>a &gt; 0</code> and <code>modulo</code> is a power of 2 (<code>modulo == 2**n</code>), you can write:</p>\n<pre><code>b = a &amp; (modulo-1)\n</code></pre>\n<p>instead. If the modulo is not a power of 2, then it cannot be done that way (and compiled languages optimizers often substitute power of 2 modulos or divisions/multiplications by the faster bit masking/shifting operation)</p>\n<p>Even if it's true that bit-masking is way faster than division/modulus in assembly language, python is interpreted and that speed optimization is not really noticeable. Anyway if the intent is to mask bits, <code>&amp;</code> operator makes more sense.</p>\n"}], "owner": {"reputation": 1979, "user_id": 6484358, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/mnuro.jpg?s=128&g=1", "display_name": "Anu", "link": "https://stackoverflow.com/users/6484358/anu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 53308980, "answer_count": 1, "score": 2, "last_activity_date": 1618408090, "creation_date": 1542230635, "last_edit_date": 1542231338, "question_id": 53308932, "link": "https://stackoverflow.com/questions/53308932/whats-the-difference-between-using-vs-mod-operators-in-calculating-indexes-h", "title": "What&#39;s the difference between using &amp; vs MOD operators in calculating indexes (Hash Table implementation)?", "body": "<p>For general hash table implementation:</p>\n\n<ul>\n<li><p>Compute the hash of the key,\n<code>hash(key)=hashcode</code></p></li>\n<li><p>Map the hashcode to the table/array.\n<code>hashcode % array_length = index</code></p></li>\n<li><p>once we get the index, we add a node (the key, value, update next pointer) in the Linked List at that index.</p></li>\n</ul>\n\n<p>So, the question is, what's the difference between:</p>\n\n<pre><code>def _get_index(self, key):\n\n   # compute the hashcode\n   hash_code = hash(key)\n   array_index = hash_code &amp; 15  # FIXME : why?\n   return array_index\n</code></pre>\n\n<p>and </p>\n\n<pre><code> array_index = hash_code % 15\n</code></pre>\n\n<p>For example:\nfor INPUT:</p>\n\n<pre><code>hm =MyHashMap()\nhm.put(\"1\", \"sachin\")\nhm.put(\"2\", \"sehwag\")\nhm.put(\"3\", \"ganguly\")\nprint(hm.get(\"1\"))\nprint(hm.get(\"2\"))\nprint(hm.get(\"3\"))\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>sachin\nsehwag\nganguly\n</code></pre>\n\n<p>'&amp;' operator instead of '%' that doesn't make sense to me? because it doesn't work always as % operator in computing the index, But, I have seenn developer using <code>&amp;</code> in some implementations of Hashtable</p>\n\n<p>Any suggestion?</p>\n"}, {"tags": ["python", "lambda", "overflow"], "answers": [{"comments": [{"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "reply_to_user": {"reputation": 3, "user_id": 12361853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4672080f9e37dcdf05037a664f6daaa1?s=128&d=identicon&r=PG&f=1", "display_name": "nick-mast", "link": "https://stackoverflow.com/users/12361853/nick-mast"}, "edited": false, "score": 1, "creation_date": 1573578214, "post_id": 53310258, "comment_id": 103923645, "body": "@nick-mast has just corrected an error where I wasn&#39;t taking the log of <code>lamb</code> in the first term.  not sure how I missed this when I wrote it!"}], "tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": true, "score": 0, "last_activity_date": 1573577962, "last_edit_date": 1573577962, "creation_date": 1542237766, "answer_id": 53310258, "question_id": 53308919, "link": "https://stackoverflow.com/questions/53308919/overflow-error-in-poisson-distribution-implementation/53310258#53310258", "title": "Overflow error in poisson distribution implementation", "body": "<p>you probably want to be working on a log scale; i.e. log-likelihoods.  this is pretty common in stats as likelihoods are generally pretty small and floating point numbers only really work down to ~1e-300.</p>\n\n<p>I think this function would look something like:</p>\n\n<pre><code>import numpy as np\nfrom scipy.special import loggamma\n\ndef log_likelihood(lamb, S):\n  return np.log(lamb) * S - loggamma(S + 1) - lamb\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10165064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c451afaa225c9450976e89e29db0d1?s=128&d=identicon&r=PG&f=1", "display_name": "FeWa", "link": "https://stackoverflow.com/users/10165064/fewa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 53310258, "answer_count": 1, "score": 0, "last_activity_date": 1573577962, "creation_date": 1542230566, "last_edit_date": 1573577335, "question_id": 53308919, "link": "https://stackoverflow.com/questions/53308919/overflow-error-in-poisson-distribution-implementation", "title": "Overflow error in poisson distribution implementation", "body": "<p>I'm trying to implement a poisson distribution as a lambda function in my code:</p>\n\n<pre><code>likelihood = lambda lamb: lamb**S / math.factorial(S) * numpy.exp(-lamb)\n</code></pre>\n\n<p>S has the value 124. Now the compiler returns me the following error, in the line in which I define the function:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>OverflowError: (34, 'Numer ical result out of range')\n</code></pre>\n\n<p>What did I do wrong with implementing that lambda function?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1542230534, "post_id": 53308911, "comment_id": 93498573, "body": "Hint: use <i>slicing</i>."}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1542230702, "post_id": 53308911, "comment_id": 93498645, "body": "What if the user enters 4 or 7?"}, {"owner": {"reputation": 47, "user_id": 10553861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1087269fe803af5345ea468f37b224bc?s=128&d=identicon&r=PG&f=1", "display_name": "Garesh", "link": "https://stackoverflow.com/users/10553861/garesh"}, "edited": false, "score": 0, "creation_date": 1542230802, "post_id": 53308911, "comment_id": 93498682, "body": "if the user enters 3 then it will look like this. teams = [[1, 4, 7], [2, 5, 8], [3, 6, 9]] and for 7 it looks like teams = [ [1, 8], [2, 9], [3], [4], [5], [6], [7] ]"}], "answers": [{"tags": [], "owner": {"reputation": 2306, "user_id": 3991649, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/nwb21.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3991649/tim"}, "is_accepted": false, "score": 1, "last_activity_date": 1542230857, "creation_date": 1542230857, "answer_id": 53308978, "question_id": 53308911, "link": "https://stackoverflow.com/questions/53308911/sorting-out-lists-into-nested-lists/53308978#53308978", "title": "Sorting out lists into nested lists", "body": "<p>You can slice it into the correct number of sublists:</p>\n\n<pre><code>slice_size = int(len(members) / no_of_teams)\nteams = []\nfor i in range(no_of_teams):\n    teams.append( members[i * slice_size: i * slice_size + slice_size]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10553861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1087269fe803af5345ea468f37b224bc?s=128&d=identicon&r=PG&f=1", "display_name": "Garesh", "link": "https://stackoverflow.com/users/10553861/garesh"}, "edited": false, "score": 0, "creation_date": 1542231850, "post_id": 53308996, "comment_id": 93499119, "body": "Thank You. This has helped a lot for me."}, {"owner": {"reputation": 2306, "user_id": 3991649, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/nwb21.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3991649/tim"}, "reply_to_user": {"reputation": 47, "user_id": 10553861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1087269fe803af5345ea468f37b224bc?s=128&d=identicon&r=PG&f=1", "display_name": "Garesh", "link": "https://stackoverflow.com/users/10553861/garesh"}, "edited": false, "score": 1, "creation_date": 1542835034, "post_id": 53308996, "comment_id": 93715518, "body": "Hi @Garesh if this or any answer has solved your question please consider <a href=\"https://meta.stackexchange.com/q/5234/179419\">accepting it</a> by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this."}], "tags": [], "owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "is_accepted": true, "score": 3, "last_activity_date": 1542232107, "last_edit_date": 1542232107, "creation_date": 1542230948, "answer_id": 53308996, "question_id": 53308911, "link": "https://stackoverflow.com/questions/53308911/sorting-out-lists-into-nested-lists/53308996#53308996", "title": "Sorting out lists into nested lists", "body": "<p>A good way is to use slicing:</p>\n\n<pre><code>number = int(input(...))\nmembers = list(range(1, 10))\nchunks = len(members) // number\nteams = [members[i*chunks:i*chunks+number]\n         for i in range(number)]\n</code></pre>\n\n<p>You could also use step size instead:</p>\n\n<pre><code>teams = [members[i::number]\n         for i in range(number)]\n</code></pre>\n\n<p>This will yield your desired output:</p>\n\n<ul>\n<li>in each iteration, we start the slice at the next item in the list</li>\n<li>the slice goes up in <code>n</code> steps</li>\n</ul>\n\n<p>So, if <code>n</code> is 3, the 1st iteration will give a slice containing the indexes 0, 3, 6, 9..... since the step size is 3\nThe 2nd iteration gives indexes 1, 4, 7...\nThe 3rd iteration gives indexes 2, 5, 8...\nIteration stops here at the 3rd since <code>n</code> dictates this too. </p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10553861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1087269fe803af5345ea468f37b224bc?s=128&d=identicon&r=PG&f=1", "display_name": "Garesh", "link": "https://stackoverflow.com/users/10553861/garesh"}, "edited": false, "score": 0, "creation_date": 1542231822, "post_id": 53309005, "comment_id": 93499104, "body": "Thank You for the help sir. I spent hours on figuring it out."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1542230972, "creation_date": 1542230972, "answer_id": 53309005, "question_id": 53308911, "link": "https://stackoverflow.com/questions/53308911/sorting-out-lists-into-nested-lists/53309005#53309005", "title": "Sorting out lists into nested lists", "body": "<p>Given there are <code>n</code> teams, we can use list comprehension to construct <code>n</code> slices, such that the <em>i</em>-th element is assigned to the <em>i mod n</em>-th team:</p>\n\n<pre><code>teams = [ members[i::n] for i in range(n) ]\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; n= 1\n&gt;&gt;&gt; [ members[i::n] for i in range(n) ]\n[[1, 2, 3, 4, 5, 6, 7, 8, 9]]\n&gt;&gt;&gt; n= 2\n&gt;&gt;&gt; [ members[i::n] for i in range(n) ]\n[[1, 3, 5, 7, 9], [2, 4, 6, 8]]\n&gt;&gt;&gt; n= 3\n&gt;&gt;&gt; [ members[i::n] for i in range(n) ]\n[[1, 4, 7], [2, 5, 8], [3, 6, 9]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10553861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1087269fe803af5345ea468f37b224bc?s=128&d=identicon&r=PG&f=1", "display_name": "Garesh", "link": "https://stackoverflow.com/users/10553861/garesh"}, "edited": false, "score": 1, "creation_date": 1542231885, "post_id": 53309013, "comment_id": 93499131, "body": "Thank You. This has helped me a lot. Gave a like to your answer as well."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 1, "last_activity_date": 1542230998, "creation_date": 1542230998, "answer_id": 53309013, "question_id": 53308911, "link": "https://stackoverflow.com/questions/53308911/sorting-out-lists-into-nested-lists/53309013#53309013", "title": "Sorting out lists into nested lists", "body": "<p>You can slice the list:</p>\n\n<pre><code>teams = [members[i::no_of_teams] for i in range(no_of_teams)]\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10553861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1087269fe803af5345ea468f37b224bc?s=128&d=identicon&r=PG&f=1", "display_name": "Garesh", "link": "https://stackoverflow.com/users/10553861/garesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53308996, "answer_count": 4, "score": 4, "last_activity_date": 1542232155, "creation_date": 1542230482, "last_edit_date": 1542232155, "question_id": 53308911, "link": "https://stackoverflow.com/questions/53308911/sorting-out-lists-into-nested-lists", "title": "Sorting out lists into nested lists", "body": "<p>I am trying to figure out how to append elements from the list into a pattern where I put them into the nested lists.</p>\n\n<p>For example:</p>\n\n<pre><code>members = [1, 2, 3, 4, 5, 6, 7, 8, 9]\nno_of_teams = int(input('no. of teams? '))\nteams = [ [ ] for _ in range(no_of_teams)]\n</code></pre>\n\n<p>So that my output will end up looking like this:</p>\n\n<p>no_of_teams? 2</p>\n\n<pre><code>teams = [ [1, 3, 5, 7, 9], [2, 4, 6, 8]]\n</code></pre>\n\n<p>if the user enters 3 then it will look like this:</p>\n\n<pre><code>teams = [[1, 4, 7], [2, 5, 8], [3, 6, 9]]\n</code></pre>\n\n<p>and for 7 it looks like</p>\n\n<pre><code>teams = [ [1, 8], [2, 9], [3], [4], [5], [6], [7] ]\n</code></pre>\n"}, {"tags": ["python", "geospatial", "gdal", "geotiff"], "answers": [{"tags": [], "owner": {"reputation": 1893, "user_id": 2832976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c06a48cb81bc7a5d934b92dce67510?s=128&d=identicon&r=PG&f=1", "display_name": "LuisTavares", "link": "https://stackoverflow.com/users/2832976/luistavares"}, "is_accepted": true, "score": 0, "last_activity_date": 1542789191, "last_edit_date": 1542789191, "creation_date": 1542788281, "answer_id": 53407770, "question_id": 53308857, "link": "https://stackoverflow.com/questions/53308857/create-a-geotiff-file-from-scattered-data-in-python/53407770#53407770", "title": "Create a Geotiff file from scattered data in python", "body": "<p>The tutorial you pointed in your question is the theory behind gdal_grid utility:</p>\n\n<p><a href=\"https://www.gdal.org/gdal_grid.html\" rel=\"nofollow noreferrer\">https://www.gdal.org/gdal_grid.html</a></p>\n\n<p>Check the bottom of the page for examples of how to interpolate a geotiff from scattered data.</p>\n\n<p>For how to use in python:</p>\n\n<p><a href=\"https://gis.stackexchange.com/questions/254330/python-gdal-grid-correct-use\">https://gis.stackexchange.com/questions/254330/python-gdal-grid-correct-use</a></p>\n"}], "owner": {"reputation": 45, "user_id": 7912481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aae36d1d11cf9fa6715ddc3182d870f2?s=128&d=identicon&r=PG&f=1", "display_name": "Davide", "link": "https://stackoverflow.com/users/7912481/davide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "accepted_answer_id": 53407770, "answer_count": 1, "score": -1, "last_activity_date": 1542789191, "creation_date": 1542230256, "question_id": 53308857, "link": "https://stackoverflow.com/questions/53308857/create-a-geotiff-file-from-scattered-data-in-python", "title": "Create a Geotiff file from scattered data in python", "body": "<p>I have a dataset of points (latitude, longitude, value) and i want to create a Geotiff file from these points. </p>\n\n<p>latitude,longitude and the value are float32 numbers </p>\n\n<p>I want to generate a custom raster that interpolate over those points.\n<a href=\"https://www.gdal.org/grid_tutorial.html\" rel=\"nofollow noreferrer\">https://www.gdal.org/grid_tutorial.html</a></p>\n\n<p>I want to obtain a grid as in the link above and for every point in the grid have a value (computed from original points with some kind of interpolation i guess)</p>\n"}, {"tags": ["python", "matplotlib", "png", "jpeg", "imread"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542230171, "post_id": 53308792, "comment_id": 93498408, "body": "<code>dolphin.png</code> is a grey scale image with a single channel. Is your question how to duplicate those channels to have a grey RGB image?"}, {"owner": {"reputation": 1021, "user_id": 2137370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b92c5a40d0a2e92ce33b9ed6ca876a4f?s=128&d=identicon&r=PG", "display_name": "evolved", "link": "https://stackoverflow.com/users/2137370/evolved"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542230233, "post_id": 53308792, "comment_id": 93498440, "body": "No it has three channels. Please look at the output of <code>imgcv.shape</code>. It is  <code>(320, 500, 3)</code>"}, {"owner": {"reputation": 1021, "user_id": 2137370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b92c5a40d0a2e92ce33b9ed6ca876a4f?s=128&d=identicon&r=PG", "display_name": "evolved", "link": "https://stackoverflow.com/users/2137370/evolved"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542230460, "post_id": 53308792, "comment_id": 93498542, "body": "There seems to be something wrong with the <code>imread</code> command of matplotlib (or how I use it) as it results in an image with only one channel. <code>img.shape</code> yields <code>(320, 500)</code>"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542231307, "post_id": 53308792, "comment_id": 93498883, "body": "So you mean <code>cv2.imread</code> is more trustworthy than <code>plt.imread</code>? I guess we can find out if you provide the original image."}, {"owner": {"reputation": 1021, "user_id": 2137370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b92c5a40d0a2e92ce33b9ed6ca876a4f?s=128&d=identicon&r=PG", "display_name": "evolved", "link": "https://stackoverflow.com/users/2137370/evolved"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1542232217, "post_id": 53308792, "comment_id": 93499268, "body": "Yes, thats what I see as a result. However, I expect that <code>plt.imread</code> also results in a numpy array with three channels. Thanks for your help, I provided the original image. I also tested with the png image from the matplotlib tutorial: <a href=\"https://matplotlib.org/_images/stinkbug.png\" rel=\"nofollow noreferrer\">matplotlib.org/_images/stinkbug.png</a> which is also missing two channels when reading with <code>plt.imread</code>"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1542234236, "post_id": 53308792, "comment_id": 93500078, "body": "cv2.imread by default loads a 3 channel image, even if the original is single channel (like in this case)"}, {"owner": {"reputation": 1021, "user_id": 2137370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b92c5a40d0a2e92ce33b9ed6ca876a4f?s=128&d=identicon&r=PG", "display_name": "evolved", "link": "https://stackoverflow.com/users/2137370/evolved"}, "edited": false, "score": 0, "creation_date": 1542273702, "post_id": 53308792, "comment_id": 93512299, "body": "Thanks for your help. I was no aware that <code>cv2.imread</code> loads three channels by default."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1542235544, "creation_date": 1542235544, "answer_id": 53309861, "question_id": 53308792, "link": "https://stackoverflow.com/questions/53308792/matplotlib-missing-channel-using-imread/53309861#53309861", "title": "Matplotlib: Missing channel using imread", "body": "<p>As I see it, matplotlib's <code>imread</code> correctly reads in the image. If the image contains only a single channel, the resulting numpy array will be 2D. If the image contains 3 or 4 channels, the numpy array will be 3D.</p>\n\n<p>Taking the dolphin image from the question you get</p>\n\n<pre><code>plt.imread(\"https://i.stack.imgur.com/cInHj.png\").shape\n&gt; (320, 500)\n</code></pre>\n\n<p>Concerning the stinkbug image from the matplotlib documentation there is indeed a little problem. The image you see is a grey scale image as well, </p>\n\n<pre><code>plt.imread(\"https://matplotlib.org/_images/stinkbug.png\").shape\n&gt; (375, 500)\n</code></pre>\n\n<p>However the tutorial claims it to be a 3 channel image. This is correct from the point of view of the tutorial, because it takes the image from the <code>doc</code> on the github repository folder. </p>\n\n<pre><code>plt.imread(\"https://raw.githubusercontent.com/matplotlib/matplotlib/master/doc/_static/stinkbug.png\").shape\n&gt; (375, 500, 3)\n</code></pre>\n\n<p>The problem is that the documentation is built through sphinx and sphinx-gallery and in addition may use some other libraries. In the course of this, the image is not copied in its raw format to the output folder. This problem has been reported already <a href=\"https://github.com/matplotlib/matplotlib/issues/11296\" rel=\"nofollow noreferrer\">here</a>, the reason is not yet fully tracked down.</p>\n\n<p>In any case, the remaining open question is then, why does <code>cv2.imread</code> give you a 3D array for a greyscale image?</p>\n\n<p>From the <a href=\"https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_gui/py_image_display/py_image_display.html\" rel=\"nofollow noreferrer\">OpenCV <code>imread</code> documentation</a>:</p>\n\n<blockquote>\n  <p>Second argument is a flag which specifies the way image should be read.</p>\n  \n  <ul>\n  <li>cv2.IMREAD_COLOR : Loads a color image. Any transparency of image will be neglected. It is the default flag.</li>\n  <li>cv2.IMREAD_GRAYSCALE : Loads image in grayscale mode</li>\n  <li>cv2.IMREAD_UNCHANGED : Loads image as such including alpha channel</li>\n  </ul>\n  \n  <p>Note Instead of these three flags, you can simply pass integers 1, 0 or -1 respectively.</p>\n</blockquote>\n\n<p>So here you need to specify yourself, which mode you want to use. </p>\n\n<p>Let's verify:</p>\n\n<pre><code>import cv2\nimport urllib.request as req\n\ndolphinurl =\"https://i.stack.imgur.com/cInHj.png\"\nstinkbugweburl = \"https://matplotlib.org/_images/stinkbug.png\"\nstinkbuggiturl = \"https://raw.githubusercontent.com/matplotlib/matplotlib/master/doc/_static/stinkbug.png\"\n\ndef printshape(url, **kw):\n    req.urlretrieve(url, \"image_name.png\")\n    im = cv2.imread(\"image_name.png\", **kw)\n    print(im.shape)\n\nprintshape(dolphinurl)\nprintshape(stinkbugweburl)\nprintshape(stinkbugweburl)\n</code></pre>\n\n<p>This prints </p>\n\n<pre><code>(320, 500, 3)\n(375, 500, 3)\n(375, 500, 3)\n</code></pre>\n\n<p>while if you specify greyscale,</p>\n\n<pre><code>printshape(dolphinurl,0)\nprintshape(stinkbugweburl,0)\nprintshape(stinkbugweburl,0)\n</code></pre>\n\n<p>it'll print</p>\n\n<pre><code>(320, 500)\n(375, 500)\n(375, 500)\n</code></pre>\n\n<p>In that sense it's up to the user to decide how they want to read in the image.</p>\n"}], "owner": {"reputation": 1021, "user_id": 2137370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b92c5a40d0a2e92ce33b9ed6ca876a4f?s=128&d=identicon&r=PG", "display_name": "evolved", "link": "https://stackoverflow.com/users/2137370/evolved"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "accepted_answer_id": 53309861, "answer_count": 1, "score": 0, "last_activity_date": 1542235544, "creation_date": 1542229966, "last_edit_date": 1542232084, "question_id": 53308792, "link": "https://stackoverflow.com/questions/53308792/matplotlib-missing-channel-using-imread", "title": "Matplotlib: Missing channel using imread", "body": "<p>When I try to load an image that has three channels with matplotlib it only has one channel when I issue the numpy <code>shape</code> command. This shows the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lc73t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lc73t.png\" alt=\"One channel image with matplotlib\"></a></p>\n\n<p>Here is the code I used:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.image as mpimg\nimport numpy as np\n\nimg = mpimg.imread('dolphin.png')\nplt.imshow(img)\nplt.show()\n\nimg.shape\n(320, 500)\n</code></pre>\n\n<p>I also followed the <a href=\"https://matplotlib.org/users/image_tutorial.html\" rel=\"nofollow noreferrer\">matplotlib image tutorial</a> which uses the same commands as above.</p>\n\n<p>Loading the image with opencv the result is an image with three channels, as expected.</p>\n\n<pre><code>import cv2\nimgcv = cv2.imread('dolphin.png')\nplt.imshow(imgcv)\nplt.show()\n\nimgcv.shape\n(320, 500, 3)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gCt0A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gCt0A.png\" alt=\"Three channel image with cv2\"></a></p>\n\n<p>I am using Python 3.5.6 with anaconda.</p>\n\n<p>Here is a short output of the <code>conda list</code> command:</p>\n\n<pre><code>...\nmatplotlib                3.0.0\n...\nopencv3                   3.1.0\n...\npillow                    5.2.0\n...\n</code></pre>\n\n<p>The original image I used:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cInHj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cInHj.png\" alt=\"Original dolphin image\"></a></p>\n\n<p><strong>Am I missing a package or is there another command to load a *.png file? Everything seems to work with *.jpg images</strong></p>\n"}, {"tags": ["python", "numpy", "memory-management", "scipy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542250726, "post_id": 53308751, "comment_id": 93504325, "body": "How many non-zeros will there be in <code>Q</code>.  What do you intend to do with the array after it&#39;s filled in?"}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542250476, "post_id": 53309056, "comment_id": 93504266, "body": "<code>csr</code> format isn&#39;t good for iterative assignment.  <code>lil</code> format is better."}], "tags": [], "owner": {"reputation": 292, "user_id": 7379645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffc913fb82d339382a5f779baed9150?s=128&d=identicon&r=PG&f=1", "display_name": "James Fulton", "link": "https://stackoverflow.com/users/7379645/james-fulton"}, "is_accepted": false, "score": 0, "last_activity_date": 1542231206, "creation_date": 1542231206, "answer_id": 53309056, "question_id": 53308751, "link": "https://stackoverflow.com/questions/53308751/how-do-i-compress-matrix-to-avoid-memory-error/53309056#53309056", "title": "how do I compress matrix to avoid memory error?", "body": "<p>Just to point this out you are trying to create an array which is 3,351,248 x 3,351,248 in size. This is 11,230,863,157,504 entries! 11.2 trillion entries! The fact that you tried to print this makes me think you hadn't realised how big it was. I don't think you will be able to do this without sparse matrices. First of all you should probably make sure you need to do this and see if there is some other way. </p>\n\n<p>Otherwise you can create a sparse matrix using scipy</p>\n\n<pre><code>import numpy as np\nimport scipy\nQ = scipy.sparse.csr_matrix((n_unique_Bin,n_unique_Bin), dtype = np.int8)\n</code></pre>\n\n<p>Then go from there.</p>\n"}], "owner": {"reputation": 687, "user_id": 5120817, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/00a69b2e66d22b52bfbf7324b400a7b3?s=128&d=identicon&r=PG", "display_name": "lpt", "link": "https://stackoverflow.com/users/5120817/lpt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542238148, "creation_date": 1542229742, "last_edit_date": 1542238148, "question_id": 53308751, "link": "https://stackoverflow.com/questions/53308751/how-do-i-compress-matrix-to-avoid-memory-error", "title": "how do I compress matrix to avoid memory error?", "body": "<p>Following is the numpy array I have. I need to create a matrix containing zeors for an instance like <code>np.zeroes([1,1])</code>.</p>\n\n<pre><code>newEdges = \n\narray([['0', 'Firm'],\n       ['1', 'Firm'],\n       ['2', 'Firm'],\n       ..., \n       ['binA', 'year2017_bin'],\n       ['binA', 'year2017_bin'],\n       ['binA', 'year2017_bin']],\n      dtype='&lt;U21')\n\n\n\nnewEdges.shape \n\n#(63673218, 2)\n\nnewEdges.size\n#127346436\n</code></pre>\n\n<p>However, based on the size of my matrix (as you can see above, that is, <code>(63673218, 2)</code>), if I run syntax to generate the zeroes matrix I get a <code>Memory Error</code>. </p>\n\n<p>He is full syntax:</p>\n\n<pre><code>print(newEdges)\nunique_Bin = np.unique(newEdges[:,0])\nn_unique_Bin = len(unique_Bin)\nunique_Bin\nn_unique_Bin\n#3351248\n\nQ = np.zeros([n_unique_Bin,n_unique_Bin])\n\n--------------------------------------------------------------------------\nMemoryError                               Traceback (most recent call last)\n&lt;ipython-input-16-581dfaca2eab&gt; in &lt;module&gt;()\n----&gt; 1 Q = np.zeros([n_unique_Bin,n_unique_Bin])\n\nMemoryError: \n</code></pre>\n\n<p>How do I resolve this error? Or, how would I safely convert this huge matrix to a sparse matrix for further calculation done below:</p>\n\n<pre><code>for n, employer_employee in enumerate(newEdges):\n    #print(employer_employee)\n    #copy the array for the original o be intact\n    eee = np.copy(newEdges)\n\n    #sustitue the current tuple with a empty one to avoid self comparing\n    eee[n] = (None,None)\n    #get the index for the current employee, the one on the y axis\n    employee_index = np.where(employer_employee[0] != unique_Bin)\n\n    #get the indexes where the the employees letter match\n    eq_index = np.where(eee[:,1] == employer_employee[1])[0]\n    eq_employee = eee[eq_index,0]\n    #add at the final array Q by index\n    for emp in eq_employee:\n        #print(np.unique(emp))\n        emp_index = np.where(unique_Bin == emp)\n        #print(emp)\n\n        Q[employee_index,emp_index]+= 1\n#         print(Q)\n\nprint(Q)\n</code></pre>\n\n<p>I have 24GB left in the memory for this calculation.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 3, "creation_date": 1542229821, "post_id": 53308750, "comment_id": 93498249, "body": "Expected output?"}, {"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1542231161, "post_id": 53308750, "comment_id": 93498813, "body": "look at <code>pandas.pivot</code>. if you can&#39;t get it in one go, get a column/value for each of your columns and then left join them all together"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1542236487, "creation_date": 1542236487, "answer_id": 53310019, "question_id": 53308750, "link": "https://stackoverflow.com/questions/53308750/pandas-boolean-statements-to-clean-up-dataset/53310019#53310019", "title": "Pandas boolean statements to clean up dataset", "body": "<p>Let's try:</p>\n\n<pre><code>df1 = df.set_index('id')\n\ndf1.columns = ['Col'+i if i.isdigit() else i for i in df1.columns]\n\ndf2 = df1.reset_index()\npd.wide_to_long(df2, ['Col','value'],'id','num','','.+').reset_index(level=1, drop=True).set_index('Col', append=True)['value'].unstack()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Col  cond  ph  temp\nid                 \n1       3   7    44\n2       5   5    45\n3       8   5    12\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "is_accepted": false, "score": 0, "last_activity_date": 1542237523, "creation_date": 1542237523, "answer_id": 53310212, "question_id": 53308750, "link": "https://stackoverflow.com/questions/53308750/pandas-boolean-statements-to-clean-up-dataset/53310212#53310212", "title": "Pandas boolean statements to clean up dataset", "body": "<pre><code>import pandas as pd\n\n# Initialize example input dataframe\ncol_names = ['id', '1', 'value1', '2', 'value2', '3', 'value3']\ndata = [\n    [1, 'ph', 7, 'temp', 44, 'cond', 3],\n    [2, 'temp', 45, 'cond', 5, 'ph', 5],\n    [3, 'temp', 12, 'ph', 5, 'cond', 8],\n]\ndf = pd.DataFrame(data, columns=col_names)\n\n# Reshape dataframe\ndf2 = pd.concat([\n    df[['id', '1', 'value1']].rename(columns={'1': 'parameter', 'value1': 'value'}),\n    df[['id', '2', 'value2']].rename(columns={'2': 'parameter', 'value2': 'value'}),\n    df[['id', '3', 'value3']].rename(columns={'3': 'parameter', 'value3': 'value'}),\n])\ndf2 = df2.pivot(index='id', columns='parameter', values='value')\n</code></pre>\n\n<p>gives as result:</p>\n\n<pre><code>In [3]: df2\nOut[3]:\nparameter  cond  ph  temp\nid\n1             3   7    44\n2             5   5    45\n3             8   5    12\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10654307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1df010d67dbe977f7848e6b2a8d677a0?s=128&d=identicon&r=PG", "display_name": "Leah", "link": "https://stackoverflow.com/users/10654307/leah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1542237523, "creation_date": 1542229739, "last_edit_date": 1542235205, "question_id": 53308750, "link": "https://stackoverflow.com/questions/53308750/pandas-boolean-statements-to-clean-up-dataset", "title": "Pandas boolean statements to clean up dataset", "body": "<p>I am working with some messy EPA data that needs to be cleaned up. It looks like this:</p>\n\n<pre><code>id   1   value1   2    value2   3   value3\n1    ph    7     temp   44     cond  3\n2    temp  45    cond   5      ph    5    \n3    temp  12    ph     5      cond    8  \n</code></pre>\n\n<p>I would like to make new columns <code>ph</code>, <code>temp</code>, <code>alk</code>, <code>cond</code>, etc. while maintaining every value corresponding to the column in the row. Expected output would look something like this:</p>\n\n<pre><code>id   ph   temp   cond\n1    7    44     3\n2    5    45     5   \n3    5    12     8  \n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1542230101, "post_id": 53308708, "comment_id": 93498385, "body": "Well you are importing <code>*</code> but using <code>tk.</code>. Should probably fix that first."}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 2723396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3a7f83f479a4b2615e5d7b88b6cce9dc?s=128&d=identicon&r=PG&f=1", "display_name": "hirschme", "link": "https://stackoverflow.com/users/2723396/hirschme"}, "edited": false, "score": 0, "creation_date": 1542240360, "post_id": 53308860, "comment_id": 93502013, "body": "I get &quot;TclError: image &quot;pyimage1&quot; doesn&#39;t exist&quot;. Does that code work for you?"}, {"owner": {"reputation": 648, "user_id": 2723396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3a7f83f479a4b2615e5d7b88b6cce9dc?s=128&d=identicon&r=PG&f=1", "display_name": "hirschme", "link": "https://stackoverflow.com/users/2723396/hirschme"}, "edited": false, "score": 2, "creation_date": 1542241463, "post_id": 53308860, "comment_id": 93502277, "body": "OK, the code works after adding the master=root attribute to PhotoImage."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 648, "user_id": 2723396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3a7f83f479a4b2615e5d7b88b6cce9dc?s=128&d=identicon&r=PG&f=1", "display_name": "hirschme", "link": "https://stackoverflow.com/users/2723396/hirschme"}, "edited": false, "score": 0, "creation_date": 1542241616, "post_id": 53308860, "comment_id": 93502313, "body": "That should not matter here. I have never used <code>master</code> with PhotoImage and this code works fine on my end."}], "tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": true, "score": 9, "last_activity_date": 1542230290, "creation_date": 1542230290, "answer_id": 53308860, "question_id": 53308708, "link": "https://stackoverflow.com/questions/53308708/how-to-display-an-image-from-a-numpy-array-in-tkinter/53308860#53308860", "title": "How to display an image from a numpy array in tkinter?", "body": "<p>You need to use <code>PhotoImage</code> from <code>ImageTk</code>.</p>\n\n<p>Do this instead:</p>\n\n<pre><code>import tkinter as tk\nimport numpy as np\nfrom PIL import Image, ImageTk\n\nroot = tk.Tk()\n\narray = np.ones((40,40))*150\nimg =  ImageTk.PhotoImage(image=Image.fromarray(array))\n\ncanvas = tk.Canvas(root,width=300,height=300)\ncanvas.pack()\ncanvas.create_image(20,20, anchor=\"nw\", image=img)\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 648, "user_id": 2723396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3a7f83f479a4b2615e5d7b88b6cce9dc?s=128&d=identicon&r=PG&f=1", "display_name": "hirschme", "link": "https://stackoverflow.com/users/2723396/hirschme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9424, "favorite_count": 4, "accepted_answer_id": 53308860, "answer_count": 1, "score": 8, "last_activity_date": 1542230290, "creation_date": 1542229527, "last_edit_date": 1542230162, "question_id": 53308708, "link": "https://stackoverflow.com/questions/53308708/how-to-display-an-image-from-a-numpy-array-in-tkinter", "title": "How to display an image from a numpy array in tkinter?", "body": "<p>The following short code is meant to create an array with numpy, convert it into an image object with PIL and then insert into a canvas on a tkinter window.</p>\n\n<pre><code>from tkinter import *\nfrom PIL import Image\n\nroot = Tk()\narray = np.ones((40,40))*150\nimg = Image.fromarray(array)\ncanvas = Canvas(root,width=300,height=300)\ncanvas.pack()\ncanvas.create_image(20,20,anchor=NW,image=img)\n\nroot.mainloop()\n</code></pre>\n\n<p>This throws the error:</p>\n\n<pre><code>TclError: image \"&lt;PIL.Image.Image image mode=F size=40x40 at 0x7F42D3BC3290&gt;\" doesn't exist\n</code></pre>\n"}, {"tags": ["python", "numpy", "audio", "pyaudio", "wave"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1542229791, "post_id": 53308674, "comment_id": 93498232, "body": "<a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/signal.html\" rel=\"nofollow noreferrer\">Scipy</a> has signal processing, and <a href=\"https://stackoverflow.com/questions/2648151/python-frequency-detection\">this answer</a> discusses other possibilities"}, {"owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "edited": false, "score": 0, "creation_date": 1542230047, "post_id": 53308674, "comment_id": 93498360, "body": "Binary, hex and decimal all represent the same thing. <code>0xA</code>=<code>10</code>=<code>1010</code>. Just running your data through an FFT won&#39;t give you the fundamental frequency. The voice produces multiple frequencies and, as such, you need to do more processing and analysis to get <i>the frequency</i>."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 10493979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4cc603511bef88835e5bf6008e5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie", "link": "https://stackoverflow.com/users/10493979/ollie"}, "edited": false, "score": 0, "creation_date": 1542277633, "post_id": 53309191, "comment_id": 93514649, "body": "Hi, this works really well for the sine waves, but what do I need to change to change the input to be a wav file? I&#39;ve tried just replacing y with the array of data, but it doesn&#39;t seem to work."}, {"owner": {"reputation": 2863, "user_id": 5425172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4UU5.png?s=128&g=1", "display_name": "Reveille", "link": "https://stackoverflow.com/users/5425172/reveille"}, "reply_to_user": {"reputation": 85, "user_id": 10493979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4cc603511bef88835e5bf6008e5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie", "link": "https://stackoverflow.com/users/10493979/ollie"}, "edited": false, "score": 1, "creation_date": 1542371847, "post_id": 53309191, "comment_id": 93554814, "body": "Did you set your array&#39;s mean to 0 first? I went ahead and moved this step to the function itself. I have the wav to array converter code somewhere too; will add here soon."}, {"owner": {"reputation": 2863, "user_id": 5425172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4UU5.png?s=128&g=1", "display_name": "Reveille", "link": "https://stackoverflow.com/users/5425172/reveille"}, "reply_to_user": {"reputation": 85, "user_id": 10493979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4cc603511bef88835e5bf6008e5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie", "link": "https://stackoverflow.com/users/10493979/ollie"}, "edited": false, "score": 0, "creation_date": 1542630003, "post_id": 53309191, "comment_id": 93624689, "body": "added a wav example."}, {"owner": {"reputation": 85, "user_id": 10493979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4cc603511bef88835e5bf6008e5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie", "link": "https://stackoverflow.com/users/10493979/ollie"}, "edited": false, "score": 0, "creation_date": 1542795341, "post_id": 53309191, "comment_id": 93694358, "body": "Thank you, it works really well. If you want to print out the frequency, you need to find the maximum value in X, then use the same index from the frq array."}], "tags": [], "owner": {"reputation": 2863, "user_id": 5425172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4UU5.png?s=128&g=1", "display_name": "Reveille", "link": "https://stackoverflow.com/users/5425172/reveille"}, "is_accepted": true, "score": 11, "last_activity_date": 1597332155, "last_edit_date": 1597332155, "creation_date": 1542231934, "answer_id": 53309191, "question_id": 53308674, "link": "https://stackoverflow.com/questions/53308674/audio-frequencies-in-python/53309191#53309191", "title": "Audio Frequencies in Python", "body": "<p>This function below finds the frequency spectrum. I have also included a sine signal and a WAV file sample application. This is for educational purposes; you may alternatively use the readily available <a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.magnitude_spectrum.html\" rel=\"nofollow noreferrer\">matplotlib.pyplot.magnitude_spectrum</a> (see below).</p>\n<pre><code>from scipy import fft, arange\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.io import wavfile\nimport os\n\n\ndef frequency_sepectrum(x, sf):\n    &quot;&quot;&quot;\n    Derive frequency spectrum of a signal from time domain\n    :param x: signal in the time domain\n    :param sf: sampling frequency\n    :returns frequencies and their content distribution\n    &quot;&quot;&quot;\n    x = x - np.average(x)  # zero-centering\n\n    n = len(x)\n    print(n)\n    k = arange(n)\n    tarr = n / float(sf)\n    frqarr = k / float(tarr)  # two sides frequency range\n\n    frqarr = frqarr[range(n // 2)]  # one side frequency range\n\n    x = fft(x) / n  # fft computing and normalization\n    x = x[range(n // 2)]\n\n    return frqarr, abs(x)\n\n\n# Sine sample with a frequency of 1hz and add some noise\nsr = 32  # sampling rate\ny = np.linspace(0, 2*np.pi, sr)\ny = np.tile(np.sin(y), 5)\ny += np.random.normal(0, 1, y.shape)\nt = np.arange(len(y)) / float(sr)\n\nplt.subplot(2, 1, 1)\nplt.plot(t, y)\nplt.xlabel('t')\nplt.ylabel('y')\n\nfrq, X = frequency_sepectrum(y, sr)\n\nplt.subplot(2, 1, 2)\nplt.plot(frq, X, 'b')\nplt.xlabel('Freq (Hz)')\nplt.ylabel('|X(freq)|')\nplt.tight_layout()\n\n\n# wav sample from https://freewavesamples.com/files/Alesis-Sanctuary-QCard-Crickets.wav\nhere_path = os.path.dirname(os.path.realpath(__file__))\nwav_file_name = 'Alesis-Sanctuary-QCard-Crickets.wav'\nwave_file_path = os.path.join(here_path, wav_file_name)\nsr, signal = wavfile.read(wave_file_path)\n\ny = signal[:, 0]  # use the first channel (or take their average, alternatively)\nt = np.arange(len(y)) / float(sr)\n\nplt.figure()\nplt.subplot(2, 1, 1)\nplt.plot(t, y)\nplt.xlabel('t')\nplt.ylabel('y')\n\nfrq, X = frequency_sepectrum(y, sr)\n\nplt.subplot(2, 1, 2)\nplt.plot(frq, X, 'b')\nplt.xlabel('Freq (Hz)')\nplt.ylabel('|X(freq)|')\nplt.tight_layout()\n\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cQadd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cQadd.png\" alt=\"Sine signal\" /></a></p>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/cEJKa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cEJKa.png\" alt=\"WAV file\" /></a></p>\n<p>You may also refer to <a href=\"https://docs.scipy.org/doc/scipy/reference/tutorial/fftpack.html\" rel=\"nofollow noreferrer\">SciPy's Fourier Transforms</a> and <a href=\"https://matplotlib.org/3.1.0/api/_as_gen/matplotlib.axes.Axes.magnitude_spectrum.html\" rel=\"nofollow noreferrer\">Matplotlib's magnitude spectrum plotting</a> pages for extra reading and features.</p>\n<pre><code>magspec = plt.magnitude_spectrum(y, sr)  # returns a tuple with the frequencies and associated magnitudes\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/etuFr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/etuFr.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 85, "user_id": 10493979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b4cc603511bef88835e5bf6008e5ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie", "link": "https://stackoverflow.com/users/10493979/ollie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11989, "favorite_count": 4, "accepted_answer_id": 53309191, "answer_count": 1, "score": 6, "last_activity_date": 1597332155, "creation_date": 1542229416, "last_edit_date": 1542230977, "question_id": 53308674, "link": "https://stackoverflow.com/questions/53308674/audio-frequencies-in-python", "title": "Audio Frequencies in Python", "body": "<p>I'm writing a code to analyse a single audio frequency sung by a voice. I need a way to analyse the frequency of the note. Currently I am using PyAudio to record the audio file, which is stored as a <code>.wav</code>, and then immediately play it back. </p>\n\n<pre><code>import numpy as np\nimport pyaudio\nimport wave\n\n# open up a wave\nwf = wave.open('file.wav', 'rb')\nswidth = wf.getsampwidth()\nRATE = wf.getframerate()\n# use a Blackman window\nwindow = np.blackman(chunk)\n# open stream\np = pyaudio.PyAudio()\nstream = p.open(format =\n                p.get_format_from_width(wf.getsampwidth()),\n                channels = wf.getnchannels(),\n                rate = RATE,\n                output = True)\n\n# read some data\ndata = wf.readframes(chunk)\n\nprint(len(data))\nprint(chunk*swidth)\n\n# play stream and find the frequency of each chunk\nwhile len(data) == chunk*swidth:\n    # write data out to the audio stream\n    stream.write(data)\n    # unpack the data and times by the hamming window\n    indata = np.array(wave.struct.unpack(\"%dh\"%(len(data)/swidth),\\\n                                         data))*window\n    # Take the fft and square each value\n    fftData=abs(np.fft.rfft(indata))**2\n    # find the maximum\n    which = fftData[1:].argmax() + 1\n    # use quadratic interpolation around the max\n    if which != len(fftData)-1:\n        y0,y1,y2 = np.log(fftData[which-1:which+2:])\n        x1 = (y2 - y0) * .5 / (2 * y1 - y2 - y0)\n        # find the frequency and output it\n        thefreq = (which+x1)*RATE/chunk\n        print(\"The freq is %f Hz.\" % (thefreq))\n    else:\n        thefreq = which*RATE/chunk\n        print(\"The freq is %f Hz.\" % (thefreq))\n    # read some more data\n    data = wf.readframes(chunk)\nif data:\n    stream.write(data)\nstream.close()\np.terminate()\n</code></pre>\n\n<p>The problem is with the while loop. The condition is never true for some reason. I printed out the two values (len(data) and (chunk*swidth)), and they were 8192 and 4096 respectively. I then tried using 2*chunk*swidth in the while loop, which threw this error:</p>\n\n<pre><code>File \"C:\\Users\\Ollie\\Documents\\Computing A Level CA\\pyaudio test.py\", line 102, in &lt;module&gt;\ndata))*window\nValueError: operands could not be broadcast together with shapes (4096,) (2048,)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542229487, "post_id": 53308602, "comment_id": 93498132, "body": "Hi, to add code you need to paste the code into the question and place control + k or command + k (mac) to format it properly. Please do this as it will be easier for people to answer."}, {"owner": {"reputation": 13, "user_id": 10315912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f3d51e7706f240ef6836d32ed4323f?s=128&d=identicon&r=PG&f=1", "display_name": "V Chau", "link": "https://stackoverflow.com/users/10315912/v-chau"}, "reply_to_user": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 1, "creation_date": 1542229796, "post_id": 53308602, "comment_id": 93498235, "body": "Awesome, thank you for the tip!"}], "owner": {"reputation": 13, "user_id": 10315912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f3d51e7706f240ef6836d32ed4323f?s=128&d=identicon&r=PG&f=1", "display_name": "V Chau", "link": "https://stackoverflow.com/users/10315912/v-chau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542229777, "creation_date": 1542229044, "last_edit_date": 1542229777, "question_id": 53308602, "link": "https://stackoverflow.com/questions/53308602/querying-and-writing-keywords-to-a-new-column", "title": "Querying and writing keywords to a new column", "body": "<p>I have a script I wrote with the help of some online resources but it isn't quite doing what I need it to.  I am taking an existing csv file, querying 4 textfields within that file for a group of keywords and than writing the results to a new CSV file.  Right now the script only looks at any given textfield and than if it finds any of the keywords within the text file, it writes each keyword to a separate column for that record.  I need to be able to do 2 things with the script.</p>\n\n<p>1) Query more than one textfield.  So instead of just 'essay1', I need to query 'essay1','essay2','essay3','essay4' for all those keywords.</p>\n\n<p>2) If the script finds any of those keywords, it should write whatever keyword it finds into one column versus individual columns for that particular record.  </p>\n\n<pre><code>import csv\nimport time\n\n#Read data from word enrichment\nf = open('word_enrichment_approved.txt', 'r')\nallKeywords = f.read().lower().split(\"\\n\")\nf.close()\n\n#Read in raw data from csv file\n#Import the 'essay' column from the CSV file\nallTexts = []\nfullRow = []\nwith open('Join_train_and_resources_edited.csv') as csvfile:\n    reader = csv.DictReader(csvfile)\n    for row in reader:\n        #the full row for each entry, which will be used to recreate the improved CSV file \n        fullRow.append((row['record_id'],row['teacher_id'],row['teacher_prefix'],row['school_state'],row['project_submitted_datetime'],\n                        row['project_grade_category'], row['project_subject_categories'], row['project_subject_subcategories'],\n                        row['project_title'],row['project_essay_1'],row['project_essay_2'],row['project_essay_3'],row['project_essay_4'],\n                        row['project_resource_summary'],row['teacher_number_of_previously_posted_projects'],row['project_is_approved'],\n                        row['id-1'],row['quantity'],row['price']))\n\n        #the column we want to parse for our keywords (change to mactch actual name of the column)\n        row = row['project_essay_1'].lower()\n        allTexts.append(row)\n#NEW! a flag used to keep track of which row is being printed to the CSV file   \ncounter = 0\n#NEW! use the current date and time to create a unique output filename\ntimestr = time.strftime(\"%Y-%m-%d-(%H-%M-%S)\")\nfilename = 'output-' + str(timestr) + '.csv'\n\n#NEW! Open the new output CSV file to append ('a') rows one at a time.\nwith open(filename, 'a') as csvfile:\n\n    #NEW! define the column headers and write them to the new file\n    fieldnames = ['id', 'teacher_id','teacher_prefix    ','school_state','project_submitted_datetime','project_grade_category',\n                  'project_subject_categories','project_subject_subcategories','project_title','project_essay_1','project_essay_2',\n                  'project_essay_3','project_essay_4','project_resource_summary','teacher_number_of_previously_posted_projects',\n                  'project_is_approved','id-1','quantity','price']\n    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n    writer.writeheader()\n\n    #NEW! define the output for each row and then print to the output csv file\n    writer = csv.writer(csvfile)\n\n    for entry in allTexts:\n\n        matches = 0\n        storedMatches = []\n\n        #for each entry:\n        allWords = entry.split(' ')\n        for words in allWords:\n\n            #remove punctuation that will interfere with matching\n            words = words.replace(',', '')\n            words = words.replace('.', '')\n            words = words.replace(';', '')\n\n            #if a keyword match is found, store the result.\n            if words in allKeywords:\n                if words in storedMatches:\n                    continue\n                else:\n                    storedMatches.append(words)\n                matches += 1\n\n        #CHANGED! send any matches to a new row of the csv file.\n        if matches == 0:\n            newRow = fullRow[counter]\n        else:\n            matchTuple = tuple(storedMatches)\n            newRow = fullRow[counter] + matchTuple\n\n        #NEW! write the result of each row to the csv file\n        writer.writerows([newRow])\n        counter += 1\n</code></pre>\n"}, {"tags": ["python", "flask", "flask-sqlalchemy", "marshmallow"], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 1761521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3bf9cdee52067928d3f9aa20b18a27b6?s=128&d=identicon&r=PG", "display_name": "spitfiredd", "link": "https://stackoverflow.com/users/1761521/spitfiredd"}, "is_accepted": true, "score": 0, "last_activity_date": 1542239889, "creation_date": 1542239889, "answer_id": 53310549, "question_id": 53308586, "link": "https://stackoverflow.com/questions/53308586/flask-marshmallow-schema-returning-an-attribute-error/53310549#53310549", "title": "Flask Marshmallow - schema returning an attribute error?", "body": "<p>My instance to KeywordSchema needs to be <code>keywords_schema = KeywordSchema(many=True, only=['keyword'])</code></p>\n\n<p>Then in my endpoint</p>\n\n<pre><code>class Keywords(Resource):\n    def get(self):\n        '''Head to http://localhost:5000/api/v1/keywords\n\n        Returns a list of all keywords.\n\n        Example Output:\n\n        [\n            \"foo\",\n            \"bar\",\n            \"baz\"\n        ]\n\n        '''\n        keywords = Keyword.query.all()\n        result = keywords_schema.dump(keywords)\n        return jsonify([d['keyword'] for d in result.data])\n</code></pre>\n"}], "owner": {"reputation": 2285, "user_id": 1761521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3bf9cdee52067928d3f9aa20b18a27b6?s=128&d=identicon&r=PG", "display_name": "spitfiredd", "link": "https://stackoverflow.com/users/1761521/spitfiredd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 53310549, "answer_count": 1, "score": 0, "last_activity_date": 1542239924, "creation_date": 1542228943, "last_edit_date": 1542239924, "question_id": 53308586, "link": "https://stackoverflow.com/questions/53308586/flask-marshmallow-schema-returning-an-attribute-error", "title": "Flask Marshmallow - schema returning an attribute error?", "body": "<p>I am trying to return a list of all keywords from a database that looks something like</p>\n\n<pre><code>  [\n    'foo',\n    'bar',\n    'baz',\n  ]\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class Keyword(db.Model, SurrogatePK):\n    __tablename__ = 'keywords'\n    keyword = Column(db.Text, nullable=False, unique=True)\n\n    def __repr__(self):\n        \"\"\"Represent instance as a unique string.\"\"\"\n        return '&lt;Keyword({keyword})&gt;'.format(keyword=self.keyword)\n</code></pre>\n\n<p><strong>Schema</strong></p>\n\n<pre><code>class KeywordSchema(ma.ModelSchema):\n    class Meta:\n        model = Keyword\n</code></pre>\n\n<p>Then ,</p>\n\n<pre><code>keywords_schema = KeywordSchema(many=True, only='keyword')\n</code></pre>\n\n<p><strong>Route</strong></p>\n\n<pre><code>class Keywords(Resource):\n    def get(self):\n        '''Head to http://localhost:5000/api/v1/keywords\n\n        Returns a list of all keywords.\n\n        '''\n        keywords = Keyword.query.all()\n        result = keywords_schema.dump(keywords)\n        return jsonify({'keywords': result})\n</code></pre>\n\n<p>This is throwing an `AttributeError'</p>\n\n<p>Partial Trace</p>\n\n<pre><code>File \"C:\\Users\\ddonovan\\DHG\\web\\flask-research\\Query-Metadata\\metadata\\views.py\", line 33, in get\n    result = keywords_schema.dump(keywords)\n  File \"c:\\users\\ddonovan\\.edm\\envs\\flask\\lib\\site-packages\\marshmallow\\schema.py\", line 491, in dump\n    self._update_fields(processed_obj, many=many)\n  File \"c:\\users\\ddonovan\\.edm\\envs\\flask\\lib\\site-packages\\marshmallow\\schema.py\", line 760, in _update_fields\n    ret = self.__filter_fields(field_names, obj, many=many)\n  File \"c:\\users\\ddonovan\\.edm\\envs\\flask\\lib\\site-packages\\marshmallow\\schema.py\", line 834, in __filter_fields\n    '\"{0}\" is not a valid field for {1}.'.format(key, obj))\nAttributeError: \"w\" is not a valid field for &lt;Keyword(numpy)&gt;\n</code></pre>\n"}, {"tags": ["python", "excel", "python-3.x", "xlrd"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1542229622, "post_id": 53308559, "comment_id": 93498183, "body": "<a href=\"https://stackoverflow.com/posts/53308559/edit\">Edit</a> your Question and give an examples of <i>&quot;by column name instead of column number&quot;</i>"}, {"owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1542230518, "post_id": 53308559, "comment_id": 93498566, "body": "i have made changes in my question."}, {"owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1542231067, "post_id": 53308559, "comment_id": 93498776, "body": "can you show me how ?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "edited": false, "score": 0, "creation_date": 1542317012, "post_id": 53309492, "comment_id": 93536518, "body": "thanks stovfl for your answer but you are only printing the column index in but i want to print all the data of corresponding of column name. can you show me how i should use these column index for fetch correspondin row data of it"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "reply_to_user": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "edited": false, "score": 0, "creation_date": 1542318182, "post_id": 53309492, "comment_id": 93537011, "body": "@George.S: From your Question: <i>&quot; i know how to fetch data in case of fixed column.&quot;</i>. <a href=\"https://stackoverflow.com/posts/53309492/edit\">Edit</a> you Question and show a <b>not fixed</b> data table and <b>how you</b> do this using the <code>col_idx</code> list."}, {"owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "edited": false, "score": 0, "creation_date": 1542355295, "post_id": 53309492, "comment_id": 93546651, "body": "Actually &quot; i know how to fetch data in case of fixed column.&quot; but problem is that in your code if i changed column header of my excel. it is print the column index in same order. so tell me how would my code knows that which header is residing in which column. i think i have cleared my point."}, {"owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "edited": false, "score": 0, "creation_date": 1542382035, "post_id": 53309492, "comment_id": 93560537, "body": "Thanks for update but it is still not working when header of fieldnames[&#39;Cascade&#39;, &#39;Market&#39;, &#39;Schedule&#39;, &#39;Name]  and  Sheet([&#39;Cascade&#39;, &#39;Schedule&#39;, &#39;Name&#39;, &#39;Market&#39;]) are equal. it is not showing the exact position of column header."}], "tags": [], "owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "is_accepted": true, "score": 1, "last_activity_date": 1542474006, "last_edit_date": 1542474006, "creation_date": 1542233423, "answer_id": 53309492, "question_id": 53308559, "link": "https://stackoverflow.com/questions/53308559/how-to-read-excel-data-by-column-name-in-python-using-xlrd/53309492#53309492", "title": "How to read Excel data by column name in python using xlrd", "body": "<blockquote>\n  <p><strong>Comment</strong>: still not working when header of<br>\n  <code>fieldnames = ['Cascade', 'Market', 'Schedule', 'Name]</code> and<br>\n  <code>Sheet(['Cascade', 'Schedule', 'Name', 'Market'])</code> are equal.</p>\n</blockquote>\n\n<p>Keep order of <code>fieldnames</code> in <code>col_idx</code>, was not my initial goal.  </p>\n\n<hr>\n\n<blockquote>\n  <p><strong>Question</strong>:  I want to fetch data by column name</p>\n</blockquote>\n\n<p>The following <code>OOP</code> solution will work:  </p>\n\n<pre><code>class OrderedByName():\n    \"\"\"\n    Privides a generator method, to iterate in Column Name ordered sequence\n    Provides subscription, to get columns index by name. using class[name]\n    \"\"\"\n    def __init__(self, sheet, fieldnames, row=0):\n        \"\"\"\n        Create a OrderedDict {name:index} from 'fieldnames'\n        :param sheet: The Worksheet to use\n        :param fieldnames: Ordered List of Column Names\n        :param row: Default Row Index for the Header Row\n        \"\"\"\n        from collections import OrderedDict\n        self.columns = OrderedDict().fromkeys(fieldnames, None)\n        for n in range(sheet.ncols):\n            self.columns[sheet.cell(row, n).value] = n\n\n    @property\n    def ncols(self):\n        \"\"\"\n        Generator, equal usage as range(xlrd.ncols), \n          to iterate columns in ordered sequence\n        :return: yield Column index\n        \"\"\"\n        for idx in self.columns.values():\n            yield idx\n\n    def __getitem__(self, item):\n        \"\"\"\n        Make class object subscriptable\n        :param item: Column Name\n        :return: Columns index\n        \"\"\"\n        return self.columns[item]\n</code></pre>\n\n<blockquote>\n  <p><strong>Usage</strong>:  </p>\n</blockquote>\n\n<pre><code># Worksheet Data\nsheet([['Schedule', 'Cascade', 'Market'],\n       ['SF05UB0', 'DO Macro Upgrade', 'Upper Cnetral Valley'],\n       ['DE03HO0', 'DO Macro Upgrade', 'Toledo'],\n       ['SF73XC4', 'DO Macro Upgrade', 'SF Bay']]\n      )\n\n# Instantiate with Ordered List of Column Names\n# NOTE the different Order of Column Names\nby_name = OrderedByName(sheet, ['Cascade', 'Market', 'Schedule'])\n\n# Iterate all Rows and all Columns Ordered as instantiated\nfor row in range(sheet.nrows):\n    for col in by_name.ncols:\n        value = sheet.cell(row, col).value\n        print(\"cell({}).value == {}\".format((row,col), value))\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p><strong>Output</strong>:</p>\n\n<pre><code>cell((0, 1)).value == Cascade\ncell((0, 2)).value == Market\ncell((0, 0)).value == Schedule\ncell((1, 1)).value == DO Macro Upgrade\ncell((1, 2)).value == Upper Cnetral Valley\ncell((1, 0)).value == SF05UB0\ncell((2, 1)).value == DO Macro Upgrade\ncell((2, 2)).value == Toledo\ncell((2, 0)).value == DE03HO0\ncell((3, 1)).value == DO Macro Upgrade\ncell((3, 2)).value == SF Bay\ncell((3, 0)).value == SF73XC4\n</code></pre>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Get Index of <strong>one</strong> Column by Name  </p>\n\n<pre><code>print(\"cell{}.value == {}\".format((1, by_name['Schedule']),\n                                    sheet.cell(1, by_name['Schedule']).value))\n#&gt;&gt;&gt; cell(1, 0).value == SF05UB0\n</code></pre>\n</blockquote>\n\n<p><strong><em>Tested with Python: 3.5</em></strong></p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "edited": false, "score": 0, "creation_date": 1542382208, "post_id": 53309608, "comment_id": 93560638, "body": "Thank Xukrao for your answer but i do not know how to perform operation over excel data using pandas. so i am unable to use it."}], "tags": [], "owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "is_accepted": false, "score": 4, "last_activity_date": 1542234078, "creation_date": 1542234078, "answer_id": 53309608, "question_id": 53308559, "link": "https://stackoverflow.com/questions/53308559/how-to-read-excel-data-by-column-name-in-python-using-xlrd/53309608#53309608", "title": "How to read Excel data by column name in python using xlrd", "body": "<p>Alternatively you could also make use of <a href=\"https://pandas.pydata.org/\" rel=\"nofollow noreferrer\"><code>pandas</code></a>, which is a comprehensive data analysis library with built-in <a href=\"https://pandas.pydata.org/pandas-docs/stable/io.html#excel-files\" rel=\"nofollow noreferrer\">excel I/O capabilities</a>.</p>\n\n<pre><code>import pandas as pd\n\nfile_location =r\"C:\\Users\\esatnir\\Desktop\\Sprint Vision.xlsx\"\n\n# Read out first sheet of excel file and return as pandas dataframe\ndf = pd.read_excel(file_location)\n\n# Reduce dataframe to target columns (by filtering on column names)\ndf = df[['Cascade', 'Schedule Name', 'Market']]\n</code></pre>\n\n<p>where a quick view of the resulting dataframe <code>df</code> will show:</p>\n\n<pre><code>In [1]: df\nOut[1]:\n   Cascade     Schedule Name                Market\n0  SF05UB0  DO Macro Upgrade  Upper Central Valley\n1  DE03HO0  DO Macro Upgrade                Toledo\n2  SF73XC4  DO Macro Upgrade                SF Bay\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "edited": false, "score": 0, "creation_date": 1542315885, "post_id": 53309626, "comment_id": 93536091, "body": "thanks Alexis for your answer. i want to fetch complete data of &#39;schedule name&#39; instead of individual value. can you show me how ?"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "edited": false, "score": 0, "creation_date": 1542318718, "post_id": 53309626, "comment_id": 93537211, "body": "Done. (I assume row 0 contains the column names, so it&#39;s not included in the column values.)"}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 2, "last_activity_date": 1542318662, "last_edit_date": 1542318662, "creation_date": 1542234185, "answer_id": 53309626, "question_id": 53308559, "link": "https://stackoverflow.com/questions/53308559/how-to-read-excel-data-by-column-name-in-python-using-xlrd/53309626#53309626", "title": "How to read Excel data by column name in python using xlrd", "body": "<p>Your column names are in the first row of the spreadsheet, right? So read the first row and construct a mapping from names to column indices. </p>\n\n<pre><code>column_pos = [ (sheet.cell(0, i).value, i) for i in range(sheet.ncols) ]\ncolidx = dict(column_pos)\n</code></pre>\n\n<p>Or as a one-liner:  </p>\n\n<pre><code>colidx = dict( (sheet.cell(0, i).value, i) for i in range(sheet.ncols) )\n</code></pre>\n\n<p>You can then use the index to interpret column names, for example:</p>\n\n<pre><code>print(sheet.cell(5, colidx[\"Schedule Name\"]).value)\n</code></pre>\n\n<p>To get an entire column, you can use a list comprehension:</p>\n\n<pre><code>schedule = [ sheet.cell(i, colidx[\"Schedule Name\"]).value for i in range(1, sheet.nrows) ]\n</code></pre>\n\n<p>If you really wanted to, you could create a wrapper for the <code>cell</code> function that handles the interpretation. But I think this is simple enough.</p>\n"}, {"comments": [{"owner": {"reputation": 1418, "user_id": 10909029, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0YRxuRljzs8/AAAAAAAAAAI/AAAAAAAAAWE/FNoSUn49Qjg/photo.jpg?sz=128", "display_name": "jupiterbjy", "link": "https://stackoverflow.com/users/10909029/jupiterbjy"}, "edited": false, "score": 0, "creation_date": 1593870173, "post_id": 62729618, "comment_id": 110930687, "body": "As op commented on @Xukrao&#39;s answer that also utilize pandas, op don&#39;t know how to use pandas."}], "tags": [], "owner": {"reputation": 1, "user_id": 13807537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e616a6bfddd546c897bf2fa4b6519dd?s=128&d=identicon&r=PG&f=1", "display_name": "Shreyash Kulkarni", "link": "https://stackoverflow.com/users/13807537/shreyash-kulkarni"}, "is_accepted": false, "score": 0, "last_activity_date": 1593875298, "last_edit_date": 1593875298, "creation_date": 1593868602, "answer_id": 62729618, "question_id": 53308559, "link": "https://stackoverflow.com/questions/53308559/how-to-read-excel-data-by-column-name-in-python-using-xlrd/62729618#62729618", "title": "How to read Excel data by column name in python using xlrd", "body": "<p>You can make use of pandas. Below is the sample code for identifying the columns and rows in an excel sheet.</p>\n<pre><code>import pandas as pd\n\nfile_location =r&quot;Your_Excel_Path&quot;\n\n# Read out first sheet of excel file and return as pandas dataframe\ndf = pd.read_excel(file_location)\n\n\ntotal_rows=len(df.axes[0])\ntotal_cols=len(df.axes[1])\n\n# Print total number of rows in an excel sheet\nprint(&quot;Number of Rows: &quot;+str(total_rows))\n\n# Print total number of columns in an excel sheet\nprint(&quot;Number of Columns: &quot;+str(total_cols))\n\n# Print column names in an excel sheet\nprint(df.columns.ravel())\n</code></pre>\n<p>Now once you have the column data, you can convert it into a list of values.</p>\n"}], "owner": {"reputation": 65, "user_id": 9872657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10043da48c140f9e3ad7ac9db9bc3d51?s=128&d=identicon&r=PG&f=1", "display_name": "Sat.N", "link": "https://stackoverflow.com/users/9872657/sat-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11726, "favorite_count": 1, "accepted_answer_id": 53309492, "answer_count": 4, "score": 2, "last_activity_date": 1593875298, "creation_date": 1542228849, "last_edit_date": 1542268231, "question_id": 53308559, "link": "https://stackoverflow.com/questions/53308559/how-to-read-excel-data-by-column-name-in-python-using-xlrd", "title": "How to read Excel data by column name in python using xlrd", "body": "<p>I am trying to read the data of large excel file(almost 100000 row). \nI am using 'xlrd Module' in python to fetch the data from excel. \nI want to fetch data by column name(<strong>Cascade,Schedule Name,Market</strong>) instead of column number(<strong>0,1,2</strong>). \nBecause my excel columns are not fixed. \ni know how to fetch data in case of fixed column.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zm6ZX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zm6ZX.png\" alt=\"enter image description here\"></a></p>\n\n<p>here is the code by which i am fetching data from the excel for fixed column</p>\n\n<pre><code>import xlrd\n\nfile_location =r\"C:\\Users\\Desktop\\Vision.xlsx\"\nworkbook=xlrd.open_workbook(file_location)\nsheet= workbook.sheet_by_index(0)\nprint(sheet.ncols,sheet.nrows,sheet.name,sheet.number)\n\nfor i in range(sheet.nrows):\n   flag = 0\n   for j in range(sheet.ncols):\n      value=sheet.cell(i,j).value\n</code></pre>\n\n<p>If anyone has any solution of this, kindly let me know</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1542229387, "post_id": 53308539, "comment_id": 93498091, "body": "Does the axis argument in <code>pandas.DataFrame.rolling</code> help? e.g. <code>df.rolling(axis=1)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "edited": false, "score": 0, "creation_date": 1542229711, "post_id": 53308667, "comment_id": 93498207, "body": "This works to output each teams current average but I would like to place that number into the df at each game so that every game has that teams current average rating. My df is larger than the example above."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "edited": false, "score": 1, "creation_date": 1542229893, "post_id": 53308667, "comment_id": 93498275, "body": "@GNMO11 Hm, I understand what you want now but have no idea how you want the information to be exposed in the dataframe. Mind posting expected output? (e.g. explaining how columns would be organized, etc)"}, {"owner": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "edited": false, "score": 0, "creation_date": 1542230192, "post_id": 53308667, "comment_id": 93498422, "body": "Edited with expected output"}, {"owner": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "edited": false, "score": 0, "creation_date": 1542234228, "post_id": 53308667, "comment_id": 93500073, "body": "this is great! Is it possible to extend to more columns than just <code>Visitor_rtg&#39;, &#39;Home_rtg</code>. I tried adding them into line 2 and then changing the reshape number in the last line to match the number of added columns but am getting an error of <code>Length mismatch</code>"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "edited": false, "score": 0, "creation_date": 1542235735, "post_id": 53308667, "comment_id": 93500607, "body": "@GNMO11 yes it is. Ideally, you&#39;ll have a third <code>.stack().reset_index()</code> structure, add this to concat, and re-adjust the shapes throughout the rest of the code"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 1, "last_activity_date": 1542232318, "last_edit_date": 1592644375, "creation_date": 1542229387, "answer_id": 53308667, "question_id": 53308539, "link": "https://stackoverflow.com/questions/53308539/pandas-rolling-mean-depending-on-row-value/53308667#53308667", "title": "Pandas Rolling Mean Depending on Row Value", "body": "<h3><code>stack</code>+<code>concat</code>+<code>groupby</code>+<code>mean</code></h3>\n<p>IIUC, you can <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.stack.html\" rel=\"nofollow noreferrer\"><code>stack</code></a> your dataframe, and <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html\" rel=\"nofollow noreferrer\"><code>groupby</code></a>+<a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.mean.html\" rel=\"nofollow noreferrer\"><code>mean</code></a> the values. No need for <code>rolling</code></p>\n<pre><code>f = df[['Visitor', 'Home']].stack().reset_index(drop=True)\ns = df[['Visitor_rtg', 'Home_rtg']].stack().reset_index(drop=True)\npd.concat([f, s], axis=1).groupby(0)[1].mean()\n</code></pre>\n<p>Outputs</p>\n<pre><code>Bucks       110.2\nCeltics     100.7\nHornet      109.2\nPelicans     88.1\nSixers       86.3\nThunder      97.7\nWarriors    105.6\nName: 1, dtype: float64\n</code></pre>\n<hr />\n<h3>Edited answer</h3>\n<p>To get your desired output, you can use <code>expanding</code> (not rolling) to get the mean and <code>transform</code> to broadcast back to each original row. In the end, just <code>reshape</code> underlying values of your <code>dataframe</code> to get final output</p>\n<pre><code>df2 = pd.concat([f, s], axis=1)\ndf2[1] = df2.groupby(0).transform(lambda s: s.expanding().mean())\npd.DataFrame(df2.values.reshape(-1,4), columns=df.columns)\n\n\n    Visitor     Home    Visitor_rtg Home_rtg\n0   Sixers      83.4    Celtics     100.7\n1   Thunder     97.7    Warriors    105.6\n2   Bucks       110.2   Hornets     109.2\n3   Pelicans    88.1    Sixers      86.3\n4   Hornets     99.65   Wizards     102.3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "is_accepted": false, "score": 0, "last_activity_date": 1542229653, "creation_date": 1542229653, "answer_id": 53308733, "question_id": 53308539, "link": "https://stackoverflow.com/questions/53308539/pandas-rolling-mean-depending-on-row-value/53308733#53308733", "title": "Pandas Rolling Mean Depending on Row Value", "body": "<p>A not particularly pleasant solution:</p>\n\n<pre><code>df = pd.DataFrame([['Sixers', 'Celtics', 83.4, 100.7], \n                   ['Pelicans', 'Sixers', 88.1, 89.2]], \n                  columns=['Visitor', 'Home', 'Visitor_rtg', 'Home_rtg'])\nmelted = df.melt(['Visitor', 'Home'])\npd.concat([melted.loc[melted['variable'] == 'Visitor_rtg', ['Visitor', 'value']].rename(columns={'Visitor': 'Team'}), \n            melted.loc[melted['variable'] == 'Home_rtg', ['Home', 'value']].rename(columns={'Home': 'Team'})], \n           axis=0, \n           ignore_index=True\n      ).groupby('Team').mean()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 0, "last_activity_date": 1542232132, "last_edit_date": 1542232132, "creation_date": 1542230674, "answer_id": 53308944, "question_id": 53308539, "link": "https://stackoverflow.com/questions/53308539/pandas-rolling-mean-depending-on-row-value/53308944#53308944", "title": "Pandas Rolling Mean Depending on Row Value", "body": "<p>You can use <code>reshape</code> on the underlying <code>numpy</code> arrays for an efficient solution.</p>\n\n<hr>\n\n<p><strong><em>Step 1</em></strong><br>\nThere is quite a bit of reshaping involved, and finally putting the data into an <code>empty</code> numpy array.</p>\n\n<pre><code>home = df.iloc[:, [1,3]]\naway = df.iloc[:, [0,2]]\ntotal = np.empty((home.shape[0] * 2, home.shape[1]), dtype=object)\ntotal[::2] = away\ntotal[1::2] = home\n</code></pre>\n\n<p><strong><em>Step 2</em></strong><br>\nNow that we have the data formatted, we can use <code>expanding.mean</code> and a bit more reshaping</p>\n\n<pre><code>d = pd.DataFrame({'team': total[:, 0], 'score': total[:, 1].astype(float)}) \nout = d.groupby('team').score.expanding().mean().reset_index().sort_values(by='level_1') \n\npd.DataFrame(\n    out[['team', 'score']].values.reshape(-1, 4)[:, [0,2,1,3]],\n    columns=df.columns\n)\n</code></pre>\n\n<p></p>\n\n<pre><code>    Visitor      Home Visitor_rtg Home_rtg\n0    Sixers   Celtics        83.4    100.7\n1   Thunder  Warriors        97.7    105.6\n2     Bucks   Hornets       110.2    109.2\n3  Pelicans    Sixers        88.1     86.3\n4   Hornets   Wizards       99.65    102.3\n</code></pre>\n"}], "owner": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 53308667, "answer_count": 3, "score": 1, "last_activity_date": 1542275163, "creation_date": 1542228760, "last_edit_date": 1542230179, "question_id": 53308539, "link": "https://stackoverflow.com/questions/53308539/pandas-rolling-mean-depending-on-row-value", "title": "Pandas Rolling Mean Depending on Row Value", "body": "<p>I have the following dataframe in pandas:</p>\n\n<pre><code>Visitor    Home     Visitor_rtg    Home_rtg\n Sixers    Celtics     83.4         100.7\n Thunder   Warriors    97.7         105.6\n Bucks     Hornets     110.2        109.2\n Pelicans  Sixers      88.1         89.2\n Hornets   Wizards     90.1         102.3\n</code></pre>\n\n<p>What I would like to do is keep the rolling mean of rtg for each team, regardless of if they are home or visitor. So for example in the fourth row the sixers home_rtg would be <code>86.3</code> because <code>(83.4+89.2) / 2</code>. And the final row the Hornets would be <code>99.65</code> because <code>(109.2+90.1)/2</code> I have found <code>df.rolling()</code> but cant figure out how to get this to only calculate per team. The ordering also matters because I want to track the rating progression throughout the season.</p>\n\n<p>Expected output:</p>\n\n<pre><code>Visitor    Home     Visitor_rtg    Home_rtg\n Sixers    Celtics     83.4         100.7\n Thunder   Warriors    97.7         105.6\n Bucks     Hornets     110.2        109.2\n Pelicans  Sixers      88.1         *86.3\n Hornets   Wizards     *99.65        102.3\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 6, "last_activity_date": 1542228810, "creation_date": 1542228810, "answer_id": 53308549, "question_id": 53308522, "link": "https://stackoverflow.com/questions/53308522/better-way-to-test-membership-in-multiple-sets/53308549#53308549", "title": "Better way to test membership in multiple sets?", "body": "<p>You can simplify this with:</p>\n\n<pre><code>def in_set(num):\n    return {\n        'set1': num in set1,\n        'set2': num in set2,\n        'set3': num in set3\n    }\n</code></pre>\n\n<p>You can even make a dictionary of the set names that map on these sets and then use dictionary comprehension:</p>\n\n<pre><code>my_sets = {\n    'set1': set1,\n    'set2': set2,\n    'set3': set3\n}\n\ndef in_set(num):\n    return {\n        k: num in v\n        for k, v in my_sets.items()\n    }\n</code></pre>\n\n<p>Here we can easily change the sets (or their names), and thus for example work with more/other sets.</p>\n"}, {"comments": [{"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 1, "creation_date": 1542229430, "post_id": 53308660, "comment_id": 93498108, "body": "Furthermore. consider doing away with &#39;set1&#39; names as well and have something that can be called by index."}], "tags": [], "owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "is_accepted": false, "score": 2, "last_activity_date": 1542229371, "creation_date": 1542229371, "answer_id": 53308660, "question_id": 53308522, "link": "https://stackoverflow.com/questions/53308522/better-way-to-test-membership-in-multiple-sets/53308660#53308660", "title": "Better way to test membership in multiple sets?", "body": "<p>Start from a dictionary in the first place; naming individual variables in a var1, var2, var3 pattern usually indicates you need some kind of container in the first place anyway. </p>\n\n<p>Then it becomes a simple dict comprehension:</p>\n\n<pre><code>Sets = {'set1' : {1,2,3}, 'set2' : {2,3,4}, 'set3' : {3,4,5} };\ndef in_set( x ): return {i : x in Sets[i] for i in Sets }\n\nin_set( 2 )  #&gt;  {'set2': True, 'set1': True, 'set3': False}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1203, "user_id": 10508893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19088d413e74d87a8f6e0f288cbddb45?s=128&d=identicon&r=PG&f=1", "display_name": "LeKhan9", "link": "https://stackoverflow.com/users/10508893/lekhan9"}, "is_accepted": false, "score": 1, "last_activity_date": 1542229784, "creation_date": 1542229784, "answer_id": 53308759, "question_id": 53308522, "link": "https://stackoverflow.com/questions/53308522/better-way-to-test-membership-in-multiple-sets/53308759#53308759", "title": "Better way to test membership in multiple sets?", "body": "<p>If you make a list of all your sets, then you can do something like this:</p>\n\n<pre><code>sets = [set1, set2, set3]\n\nnum = 1\nprint {'set{}'.format(i+1): num in set_i for i, set_i in enumerate(sets)}\n</code></pre>\n\n<p>The comprehension isn't the cleanest, but its not too bad either :)</p>\n\n<p>output:</p>\n\n<pre><code>{'set1': True, 'set2': False, 'set3': False}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 588, "user_id": 3394510, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d3860f752c60cd72fac9f9335b87b0cb?s=128&d=identicon&r=PG&f=1", "display_name": "ekiim", "link": "https://stackoverflow.com/users/3394510/ekiim"}, "is_accepted": false, "score": 1, "last_activity_date": 1542230197, "creation_date": 1542230197, "answer_id": 53308844, "question_id": 53308522, "link": "https://stackoverflow.com/questions/53308522/better-way-to-test-membership-in-multiple-sets/53308844#53308844", "title": "Better way to test membership in multiple sets?", "body": "<p>When it comes to the pythonic way of doing things, depends on a slightly broader picture, </p>\n\n<p>For instance, you can create a function, that given an element a collection of sets, it will return which sets contains it, something like this.</p>\n\n<pre><code>def contained_in_which(elem, list_of_sets):\n    temp = []\n    for i, s in enumerate(list_of_sets):\n        if elem in s:\n            temp.append(i)\n</code></pre>\n\n<p>This could be one way, not very pythonic but clean. </p>\n\n<p>If you want to get more sophisticated you could do something like this.</p>\n\n<p>Depending on the case, this seems a little bit more generic, to use, because It's just an extra attribute for the set, and you can do stuff like this, The interesting part is that arranging a little better your data structure you can extend a lot of the defaults.</p>\n\n<pre><code>class NamedSet(set):\n    def __init__(self, *args, name=\"SET\"):\n        if isinstance(args[0], set) and len(args) == 1:\n            args = list(args[0])    \n        self.name = name\n        super().__init__(args)\n\nset1 = NamedSet({1,2,3}, name=\"ONE\")\nset2 = NamedSet({2,3,4}, name=\"TWO\")\nset3 = NamedSet({4,5,6}, name=\"THREE\")\nsetList = [set1, set2, set3]\n\nn = 2 \nfor i in filter(lambda i_set: 2 in i_set, setList):\n    print(i.name)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1542233804, "creation_date": 1542233804, "answer_id": 53309565, "question_id": 53308522, "link": "https://stackoverflow.com/questions/53308522/better-way-to-test-membership-in-multiple-sets/53309565#53309565", "title": "Better way to test membership in multiple sets?", "body": "<p>Here's something flexible and user-friendly utilizing <a href=\"https://docs.python.org/3/library/functools.html#functools.reduce\" rel=\"nofollow noreferrer\"><code>functools.reduce()</code></a>:</p>\n\n<pre><code>from functools import reduce\n\n# Update and return dictionary d.\nupdate_dict = lambda d, key, value: (d.update({key: value}), d)[1]\n\ndef in_sets(num, **kwargs):\n    return reduce(lambda d, kv: update_dict(d, kv[0], num in kv[1]), kwargs.items(), {})\n\nif __name__ == '__main__':\n\n    test1 = in_sets(3, set1={1,2,3}, set2={2,3,4}, set3={4,5,6})\n    print(test1)  # -&gt; {'set1': True, 'set2': True, 'set3': False}\n\n    test2 = in_sets(5, set1={1,2,3}, set2={2,3,4}, set3={4,5,6})\n    print(test2)  # -&gt; {'set1': False, 'set2': False, 'set3': True}\n</code></pre>\n"}], "owner": {"reputation": 2732, "user_id": 8072983, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2af71503f7b0b407c5b3538925b9df3?s=128&d=identicon&r=PG&f=1", "display_name": "876868587", "link": "https://stackoverflow.com/users/8072983/876868587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 53308549, "answer_count": 5, "score": 3, "last_activity_date": 1542299874, "creation_date": 1542228670, "last_edit_date": 1542299874, "question_id": 53308522, "link": "https://stackoverflow.com/questions/53308522/better-way-to-test-membership-in-multiple-sets", "title": "Better way to test membership in multiple sets?", "body": "<p>My code here is terrible, is there a pythonic way to improve it?</p>\n\n<p>I have three sets:</p>\n\n<pre><code>set1 = {1,2,3}\nset2 = {2,3,4}\nset3 = {4,5,6}\n</code></pre>\n\n<p>and a combined set</p>\n\n<pre><code>combined = set1 | set2 | set3\n</code></pre>\n\n<p>I need a dict that returns whether a number is each set.</p>\n\n<p>For example</p>\n\n<pre><code>d[2] = {'set1':True, 'set2':True, 'set3':False}\n</code></pre>\n\n<p>My code is like this:</p>\n\n<pre><code>def in_set(num):\n    d = {}\n    if num in set1:\n        d['set1'] = True\n    else:\n        d['set1'] = False\n\n    if num in set2:\n        d['set2'] = True\n    else:\n        d['set2'] = False\n\n    if num in set3:\n        d['set3'] = True\n    else:\n        d['set3'] = False\n\n    return d\n</code></pre>\n"}, {"tags": ["python", "string", "list"], "comments": [{"owner": {"reputation": 1526, "user_id": 10484131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zw40h.png?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/10484131/felix"}, "edited": false, "score": 0, "creation_date": 1542228847, "post_id": 53308507, "comment_id": 93497862, "body": "I see no question in your full text. What do you want to know?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1542228987, "post_id": 53308507, "comment_id": 93497924, "body": "It is completely unclear what you want to do. How, exactly, does the content in <code>airstrikes</code> tell you how to transform <code>reinforces</code>? Show examples of the results you would expect if your transform was successful; given the examples here."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1542229033, "post_id": 53308507, "comment_id": 93497949, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described.  Since you haven&#39;t specified a problem, we&#39;re at a loss."}, {"owner": {"reputation": 167, "user_id": 6879352, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/87b4d9e6a98c035b8c93ff76392a841d?s=128&d=identicon&r=PG&f=1", "display_name": "DonutSteve", "link": "https://stackoverflow.com/users/6879352/donutsteve"}, "edited": false, "score": 0, "creation_date": 1542229082, "post_id": 53308507, "comment_id": 93497973, "body": "I have updated the description. Hope it helps"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6879352, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/87b4d9e6a98c035b8c93ff76392a841d?s=128&d=identicon&r=PG&f=1", "display_name": "DonutSteve", "link": "https://stackoverflow.com/users/6879352/donutsteve"}, "edited": false, "score": 0, "creation_date": 1542229278, "post_id": 53308622, "comment_id": 93498043, "body": "I thought I needed to do some kind of error handling to check if it was out of bounds. Index seems like a smart solution. I will try it out"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 167, "user_id": 6879352, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/87b4d9e6a98c035b8c93ff76392a841d?s=128&d=identicon&r=PG&f=1", "display_name": "DonutSteve", "link": "https://stackoverflow.com/users/6879352/donutsteve"}, "edited": false, "score": 0, "creation_date": 1542229453, "post_id": 53308622, "comment_id": 93498118, "body": "@DonutSteve You do. That is why I suggested googling/searching <code>try&#47;except</code>. You could compare to <code>len(airstrike)</code>, but that is less idiomatic in Python."}, {"owner": {"reputation": 167, "user_id": 6879352, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/87b4d9e6a98c035b8c93ff76392a841d?s=128&d=identicon&r=PG&f=1", "display_name": "DonutSteve", "link": "https://stackoverflow.com/users/6879352/donutsteve"}, "edited": false, "score": 0, "creation_date": 1542229773, "post_id": 53308622, "comment_id": 93498222, "body": "Oh yeah, I was just stating I had thought about it. So it is nice to see I was on the right track"}], "tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": false, "score": 2, "last_activity_date": 1542229156, "creation_date": 1542229156, "answer_id": 53308622, "question_id": 53308507, "link": "https://stackoverflow.com/questions/53308507/removing-a-range-of-characters-at-specific-indexes-in-string/53308622#53308622", "title": "Removing a &#39;range&#39; of characters at specific indexes in string", "body": "<p>Use <code>index</code> to find where to strike, then remove the character the usual way:</p>\n\n<pre><code>&gt;&gt;&gt; reinforce = \"abcdefg\"\n&gt;&gt;&gt; airstrike = \"   *   \"\n&gt;&gt;&gt; strike_at = airstrike.index('*')\n&gt;&gt;&gt; reinforce[:strike_at]+reinforce[strike_at+1:]\n'abcefg'\n</code></pre>\n\n<p>of course, you need to make sure <code>strike_at+1</code> is a legal index (see <code>try</code> and <code>except</code>).</p>\n"}], "owner": {"reputation": 167, "user_id": 6879352, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/87b4d9e6a98c035b8c93ff76392a841d?s=128&d=identicon&r=PG&f=1", "display_name": "DonutSteve", "link": "https://stackoverflow.com/users/6879352/donutsteve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542229156, "creation_date": 1542228582, "last_edit_date": 1542229067, "question_id": 53308507, "link": "https://stackoverflow.com/questions/53308507/removing-a-range-of-characters-at-specific-indexes-in-string", "title": "Removing a &#39;range&#39; of characters at specific indexes in string", "body": "<p>I have looked over similar questions, but I still have trouble figuring this one out. </p>\n\n<p>I have two Lists of strings, one of which consists of characters like 'abcdefg' and another one consisting of strings which consist of white spaces and a special character. The special character indicates where I should remove characters from my 'abcdefg' string. The special character's position in the list would be the same position I would need to remove a character from the first list. I also need to remove the adjacent characters.</p>\n\n<p>EDIT: I want to remove a character (and the adjacent characters) at the same position the '*' char is located in airstrikes, but in reinforces. Does this make sense?</p>\n\n<pre><code>reinforces = [\"abcdefg\", \"hijklmn\"]\nairstrikes = [\"   *   \"]\nbattlefield = reinforces[0]\nbomb_range = []\ncount = 0\n\nif range(len(airstrikes)) != 0:\n    for airstrike in airstrikes:\n        for char in airstrike:\n            print(count)\n            count = count + 1\n            if (char == '*'):\n                bomb_range.append(count-1)\n                bomb_range.append(count)\n                bomb_range.append(count+1)\n                break\n\n\n#Trying to hardcode it initially just to get it to work. Some kind of looping is needed though.\nbattlefield = battlefield[:bomb_range[0]] + battlefield[bomb_range[1]:]\nbattlefield = battlefield[:bomb_range[1]] + battlefield[bomb_range[2]:]\n#battlefield = battlefield[:bomb_range[2]] + battlefield[bomb_range[3]:] #Will not work of course. But how could I achieve what I want?\n</code></pre>\n\n<p>I am sorry about the nested loops. If it hurts looking at it, feel free to bash and correct me. I am sorry if I missed any answers on this forum which could have helped me find a solution. Know that I did try to find one. </p>\n"}, {"tags": ["python", "numpy", "matplotlib", "histogram", "median"], "answers": [{"tags": [], "owner": {"reputation": 292, "user_id": 7379645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffc913fb82d339382a5f779baed9150?s=128&d=identicon&r=PG&f=1", "display_name": "James Fulton", "link": "https://stackoverflow.com/users/7379645/james-fulton"}, "is_accepted": true, "score": 1, "last_activity_date": 1542229092, "creation_date": 1542229092, "answer_id": 53308607, "question_id": 53308497, "link": "https://stackoverflow.com/questions/53308497/plotting-medians-of-bins-of-data/53308607#53308607", "title": "Plotting Medians of Bins of Data", "body": "<p>You could plot the median against the bin centers. The center of each bin can be calculated using this</p>\n\n<pre><code>import numpy as np\nbin_center = (np.asarray(bins[1:])+np.asarray(bins[:-1]))/2\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8671360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ccdd8669c21c9234d226eddf553a06e?s=128&d=identicon&r=PG&f=1", "display_name": "hlku2334", "link": "https://stackoverflow.com/users/8671360/hlku2334"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 53308607, "answer_count": 1, "score": 1, "last_activity_date": 1542229359, "creation_date": 1542228539, "last_edit_date": 1542229359, "question_id": 53308497, "link": "https://stackoverflow.com/questions/53308497/plotting-medians-of-bins-of-data", "title": "Plotting Medians of Bins of Data", "body": "<p>I have computed the bins of my data x values and also the median of each bin corresponding to a y value. Below is a sample of my data I used to compute: </p>\n\n<ul>\n<li>x values range from 0 to 1</li>\n<li>y values range anywhere from any value but each y value has a x value associated with it</li>\n</ul>\n\n<p>My code:</p>\n\n<pre><code>hist1, bins1 = np.histogram(x)\nmedians_1 = pd.Series(y).groupby(pd.cut(x, bins1)).median()\n\nhist = [129, 126, 94, 133, 179, 206, 142, 147, 90, 185] \nbins = [0.,         0.09999926, 0.19999853, 0.29999779, 0.39999706,\n    0.49999632, 0.59999559, 0.69999485, 0.79999412, 0.8999933,\n    0.99999265]\nmedians_1 = [ 14.42145   14.428275  14.427865  14.42535   14.42613 \n14.430235 14.441055  14.43472   14.424155  14.4187  ]\n</code></pre>\n\n<p>I am wondering how I can plot the median values for each associated \"bin\"? </p>\n\n<p>I tried to plot a scatter plot but I only have the median values and not any x axis values. Also, I can not plot the medians vs. the original x values because they are not the same size. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1193, "user_id": 3130972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4ff81464abbb8caa6914f1cb56adac8?s=128&d=identicon&r=PG&f=1", "display_name": "grrrrrr", "link": "https://stackoverflow.com/users/3130972/grrrrrr"}, "edited": false, "score": 0, "creation_date": 1542228595, "post_id": 53308480, "comment_id": 93497760, "body": "Is it not returning anything or not printing anything? For the function to return it needs a return statement"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1542228622, "post_id": 53308480, "comment_id": 93497776, "body": "There is no return statement in the login function (literally), so it is not returning anything. It is also not called anywhere, so it is not even running."}, {"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 0, "creation_date": 1542228633, "post_id": 53308480, "comment_id": 93497783, "body": "Of course the function doesn&#39;t return anything - you never tell it to. You need to put <code>return [whatever you want to return]</code> at the end of your function (or elsewhere in it) in order for it to return something."}, {"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "reply_to_user": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 0, "creation_date": 1542229005, "post_id": 53308480, "comment_id": 93497933, "body": "@GreenCloakGuy I don&#39;t think they want to return, by the looks of it they are going to write logic where &quot;Access granted&quot; goes. There are other logical errors as well that I think are why it&#39;s not working."}, {"owner": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "reply_to_user": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 1, "creation_date": 1542229399, "post_id": 53308480, "comment_id": 93498099, "body": "@user I fixed the list but the function is still not working. Can you help me? I am new to coding"}, {"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542229568, "post_id": 53308480, "comment_id": 93498160, "body": "Ah. In login() you&#39;ve added j but removed the thing about iterating through j.  Replace the line:  <code>if username == i and password == [j]:</code> with <code>if username == i and password == [i]:</code> and I think it will work. I&#39;ve added the whole new <code>login()</code> function to my answer."}, {"owner": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "reply_to_user": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542230415, "post_id": 53308480, "comment_id": 93498522, "body": "@user now I have the error code mentioned above. How can I fix it?"}, {"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542230590, "post_id": 53308480, "comment_id": 93498597, "body": "@AnnaHamelin do you mean you are getting &quot;Incorrect Login credentials, please try again.&quot;? If so, you&#39;ll need to go through and reorder the lists so the usernames match up with the passwords, I don&#39;t see how else this could fail unless the code to retrieve the lists comes up blank."}, {"owner": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "reply_to_user": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542230716, "post_id": 53308480, "comment_id": 93498653, "body": "@user I am seeing the message: &#39;int&#39; object is not iterable"}, {"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542230805, "post_id": 53308480, "comment_id": 93498686, "body": "@AnnaHamelin Oh. I made a mistake in this line (long time since python.) Replace <code>for i in len(usernameslist)</code> with <code>for i in range(len(usernameslist))</code> I&#39;ll replace it on my answer as well."}, {"owner": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "reply_to_user": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542230955, "post_id": 53308480, "comment_id": 93498738, "body": "@user This time, I ran it and entered a correct username and password  and got &quot;Incorrect Login credentials, please try again. Incorrect Login credentials, please try again. Incorrect Login credentials, please try again. Incorrect Login credentials, please try again. Incorrect Login credentials, please try again.&quot;"}, {"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542231106, "post_id": 53308480, "comment_id": 93498791, "body": "@AnnaHamelin Multiple... times? Odd. Try replacing <code>if username == i and password == [i]</code> with <code>if username == i and password == i</code>, as it is showing <code>password</code> as an index of a list."}, {"owner": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "reply_to_user": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542231201, "post_id": 53308480, "comment_id": 93498836, "body": "@user the same problem occurred"}, {"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1542231463, "post_id": 53308480, "comment_id": 93498948, "body": "@AnnaHamelin Okay. This must mean that the data is corrupted. What I would recommend is making a backup of the username and password files. Then, get rid of all passwords and usernames except 1 pair and check if they work. Make sure that the <code>users</code> and <code>passwords</code> are also actually filled with data and the retrieval commands actually work.  I think this is as far StackOverflow can help you programmatically as now it&#39;s to do with the system and retrieving data. I&#39;d gratefully appreciate if you would accept my answer with the green tick if you feel it is satisfactory :)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "edited": false, "score": 1, "creation_date": 1542229874, "post_id": 53308575, "comment_id": 93498268, "body": "The username and password are not being requested when I run the program...any ideas?"}, {"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "reply_to_user": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "edited": false, "score": 0, "creation_date": 1542229932, "post_id": 53308575, "comment_id": 93498301, "body": "Ah. You aren&#39;t calling <code>login()</code>. Just add <code>login()</code> on its own at the very end of your program and it should work."}], "tags": [], "owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "is_accepted": false, "score": 2, "last_activity_date": 1542230842, "last_edit_date": 1542230842, "creation_date": 1542228893, "answer_id": 53308575, "question_id": 53308480, "link": "https://stackoverflow.com/questions/53308480/using-lists-to-check-usernames-and-passwords/53308575#53308575", "title": "Using lists to check usernames and passwords", "body": "<p>The problem is in <code>login()</code>, you are using <code>i</code> as an iterator within itself.</p>\n\n<pre><code>def login():\n    username = input(\"Please enter your username: \")\n    password = input(\"Please enter your password: \")  \n    for i in [usernameslist]:\n        if username == [i]:\n            for j in [passwordslist]:\n                if password == [j]:\n                    return \"Access granted!\"\n                else:\n                    return \"Incorrect Login credentials, please try again.\"\n        else:\n            return \"Incorrect Login credentials, please try again.\"\n</code></pre>\n\n<p>This above should find the password and work with your logic.\nHowever, shouldn't you be using the specific username for the password? This is checking if the username and the password are available, not whether the password matches the username. As you are looping through password and username <strong>separately</strong>, you would simply check if someone has the password and someone has the username, whether it is the same person or not. If so, replace with this:</p>\n\n<pre><code>def login():\n    username = input(\"Please enter your username: \")\n    password = input(\"Please enter your password: \")  \n    for i in range(len(usernameslist)):\n        if username == i and password == j:\n            return \"Access granted!\"\n        else:\n            return \"Incorrect Login credentials, please try again.\"\n</code></pre>\n\n<p>Make sure with this that the usernames and passwords are ordered the same within both lists. Or, I'd recommend storing a <strong>2D list</strong> looking something like this:</p>\n\n<p><code>list = [[\"Annie\",\"password1\"],[\"bob\",\"wordpass39\"]]</code> where the first entry is the username and second is the password.</p>\n\n<p><strong>Edit:</strong> with the fixed <code>login()</code> function you should now do this:</p>\n\n<pre><code>def login():\n    username = input(\"Please enter your username: \")\n    password = input(\"Please enter your password: \")  \n    for i in range(len(usernameslist)):\n        if username == i and password == i:\n            print(\"Access granted!\")\n        else:\n            print(\"Incorrect Login credentials, please try again.\")\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10652932, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IHgNsdA6YWo/AAAAAAAAAAI/AAAAAAAAHcI/btjX_c3Tc0M/photo.jpg?sz=128", "display_name": "Anna Hamelin", "link": "https://stackoverflow.com/users/10652932/anna-hamelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1625, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542230988, "creation_date": 1542228431, "last_edit_date": 1542230988, "question_id": 53308480, "link": "https://stackoverflow.com/questions/53308480/using-lists-to-check-usernames-and-passwords", "title": "Using lists to check usernames and passwords", "body": "<p><strong>I'm not sure why this code isn't working. I have the error TypeError: 'int' object is not iterable</strong> I need the code to check the usernames and passwords from two different lists, and if the username and password match spots in the list and are correct, the user is \"granted access.\"</p>\n\n<pre><code>#Part 1: Opening the files and grabbing data\nfilename1 = \"c:\\\\Users\\\\Anna Hamelin\\\\Documents\\\\Python Scripts\\\\SourceCode\\\\Project2\\\\usernames.txt\"\nfile = open(filename1, \"r\")\n\n#Usernames\nusers = file.read()\nusernameslist = [line.strip() for line in open(\"c:\\\\Users\\\\Anna Hamelin\\\\Documents\\\\Python Scripts\\\\SourceCode\\\\Project2\\\\usernames.txt\")]\nprint(users)                #Check file\nprint(usernameslist)       #Check usernames list\n\nfilename2 = \"c:\\\\Users\\\\Anna Hamelin\\\\Documents\\\\Python Scripts\\\\SourceCode\\\\Project2\\\\passwords.txt\"\nfile = open(filename2, \"r\")\n\n#Passwords\npasswords = file.read()\npasswordslist = [line.strip() for line in open(\"c:\\\\Users\\\\Anna Hamelin\\\\Documents\\\\Python Scripts\\\\SourceCode\\\\Project2\\\\passwords.txt\")]\nprint(passwords)            #Check file\nprint(passwordslist)       #Check passwords list\n\n#Compile the usernames and passwords lists for easy checking\ncompiled_list = list(zip(usernameslist,passwordslist))\nprint(compiled_list)\n\n#Scores\nfilename3 = \"c:\\\\Users\\\\Anna Hamelin\\\\Documents\\\\Python Scripts\\\\SourceCode\\\\Project2\\\\scores.txt\"\nfile = open(filename3, \"r\")\n\nscores = file.read()\nscoreslist = [line.strip() for line in open(\"c:\\\\Users\\\\Anna Hamelin\\\\Documents\\\\Python Scripts\\\\SourceCode\\\\Project2\\\\scores.txt\")]\nprint(scores)           #Check file\nprint(scoreslist)       #Check scores\n\ndef login():\n    username = input(\"Please enter your username: \")\n    password = input(\"Please enter your password: \")  \n    for i in range(len(usernameslist)):\n        if username == i and password == [i]:\n            print(\"Access granted!\")\n        else:\n            print(\"Incorrect Login credentials, please try again.\")\n\n\nlogin()\n</code></pre>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1542228503, "post_id": 53308470, "comment_id": 93497726, "body": "Do your translations <i>do the same thing</i>? That should provide your answer."}, {"owner": {"reputation": 107, "user_id": 5661698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec222ce4d7ec39f262ccb632d15922b9?s=128&d=identicon&r=PG&f=1", "display_name": "PaperRockBazooka", "link": "https://stackoverflow.com/users/5661698/paperrockbazooka"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1542228690, "post_id": 53308470, "comment_id": 93497798, "body": "I am not sure if they do the same thing hence the question!"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1542228710, "post_id": 53308470, "comment_id": 93497806, "body": "So did you <i>test</i> them? What you&#39;ve posted here isn&#39;t valid syntax on its own, and neither actually creates a list."}, {"owner": {"reputation": 107, "user_id": 5661698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec222ce4d7ec39f262ccb632d15922b9?s=128&d=identicon&r=PG&f=1", "display_name": "PaperRockBazooka", "link": "https://stackoverflow.com/users/5661698/paperrockbazooka"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1542229010, "post_id": 53308470, "comment_id": 93497936, "body": "Oh i thought this would be simple for an experienced coder-- like reading a equation from a subject matter someone is familiar in. I didnt realize you need the variables in context to be able to figure out list comps. Sorry! p.s. if this isnt a list comprehension what is it?"}], "answers": [{"tags": [], "owner": {"reputation": 292, "user_id": 7379645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffc913fb82d339382a5f779baed9150?s=128&d=identicon&r=PG&f=1", "display_name": "James Fulton", "link": "https://stackoverflow.com/users/7379645/james-fulton"}, "is_accepted": true, "score": 1, "last_activity_date": 1542232245, "last_edit_date": 1542232245, "creation_date": 1542228910, "answer_id": 53308580, "question_id": 53308470, "link": "https://stackoverflow.com/questions/53308470/am-i-interpreting-this-list-comprehension-correctly-in-python/53308580#53308580", "title": "Am I interpreting this list comprehension correctly in python?", "body": "<p>I think it is right. You are looping correctly. However, you aren't adding the words to a list? Do you mean to be doing this? </p>\n\n<p>So for the first one you could use</p>\n\n<pre><code>my_list = []\nfor word in mytokens:\n    if word.lemma_ != \"-PRON-\":\n        my_list.append(word.lemma_.lower().strip())\n    else:\n        my_list.append(word.lower_)\n</code></pre>\n\n<p>By adding them to a list like this it means you can directly compare the output of your translation and the output of the list comprehension. <code>mytokens</code> should be exactly the same as <code>my_list</code> if done correctly.</p>\n\n<p>Also there is a small mistake in the second translation. It should be:</p>\n\n<pre><code>for word in mytokens:\n    if word not in stopwords and word not in punctuations:\n        yield word\n</code></pre>\n\n<p>You could also modify this second translation to add all your words to a list. </p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 5661698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec222ce4d7ec39f262ccb632d15922b9?s=128&d=identicon&r=PG&f=1", "display_name": "PaperRockBazooka", "link": "https://stackoverflow.com/users/5661698/paperrockbazooka"}, "edited": false, "score": 0, "creation_date": 1542231921, "post_id": 53308600, "comment_id": 93499148, "body": "oh interesting! Thank you i will give this a shot"}], "tags": [], "owner": {"reputation": 3677, "user_id": 10553976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0OtkRHQ0PKw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAFTLpkUFgg8Wso5q8W5jNUeEeS7Q/mo/photo.jpg?sz=128", "display_name": "Charles Landau", "link": "https://stackoverflow.com/users/10553976/charles-landau"}, "is_accepted": false, "score": 1, "last_activity_date": 1542229032, "creation_date": 1542229032, "answer_id": 53308600, "question_id": 53308470, "link": "https://stackoverflow.com/questions/53308470/am-i-interpreting-this-list-comprehension-correctly-in-python/53308600#53308600", "title": "Am I interpreting this list comprehension correctly in python?", "body": "<p>Let's simplify this:</p>\n\n<pre><code>coll = [\"Gerry\", \"Mary\", \"Sue\"]\n\ncomprehended = [ word.lower() for word in coll]\n\ndef comprehender(coll):\n  coll_out = []\n  for word in coll:\n      coll_out.append(word.lower())\n  return coll_out\n</code></pre>\n\n<p>If you run this, you can be assured that the two are equivalent by using <code>assert</code> or just <code>return</code>ing <code>comprehended == comprehender(coll)</code></p>\n\n<p>This is a valid sanity check you can do on any list comprehension, you just vary this pattern to match the logic of your comprehension.</p>\n"}], "owner": {"reputation": 107, "user_id": 5661698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec222ce4d7ec39f262ccb632d15922b9?s=128&d=identicon&r=PG&f=1", "display_name": "PaperRockBazooka", "link": "https://stackoverflow.com/users/5661698/paperrockbazooka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53308580, "answer_count": 2, "score": -1, "last_activity_date": 1542232245, "creation_date": 1542228405, "last_edit_date": 1542228502, "question_id": 53308470, "link": "https://stackoverflow.com/questions/53308470/am-i-interpreting-this-list-comprehension-correctly-in-python", "title": "Am I interpreting this list comprehension correctly in python?", "body": "<p>I am still fairly new to python and still have some fumbles when reading list comprehensions. I tried translating two list comprehensions I saw in a tutorial into its elongated form. Did I translate correctly? </p>\n\n<p>list comprehension 1</p>\n\n<pre><code>mytokens = [ word.lemma_.lower().strip() if word.lemma_ != \"-PRON-\" else word.lower_ for word in mytokens ]\n</code></pre>\n\n<p>translation 1</p>\n\n<pre><code>for word in mytokens:\n    if word.lemma_ != \"-PRON-\":\n        word.lemma_.lower().strip()\n    else:\n        word.lower_\n</code></pre>\n\n<p>list comprehension 2</p>\n\n<pre><code>mytokens = [ word for word in mytokens if word not in stopwords and word not in punctuations ]\n</code></pre>\n\n<p>translation 2 </p>\n\n<pre><code>for word in mytokens:\n    if word not in stopwords and not in punctuations:\n        yield word\n</code></pre>\n\n<p>for translation 2, I dont think \"yield word\" would be correct since its not a definition. I am guessing list comprehension 2 does the if statement and places the word back into the list mytokens so maybe it should be a .append?</p>\n"}, {"tags": ["python", "arrays", "django", "python-3.x"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1542228513, "post_id": 53308464, "comment_id": 93497731, "body": "You use <code>{% for .. %}</code> loops."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1542228530, "post_id": 53308464, "comment_id": 93497736, "body": "What have you tried, and what exactly is the problem with it?"}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 5747770, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7gvCtpDxjzc/AAAAAAAAAAI/AAAAAAAAEsk/kd8cIkTnkZY/photo.jpg?sz=128", "display_name": "Ankur Gulati", "link": "https://stackoverflow.com/users/5747770/ankur-gulati"}, "edited": false, "score": 0, "creation_date": 1542228904, "post_id": 53308561, "comment_id": 93497889, "body": "If the answer was helpful, please accept and upvote the answer. Thanks."}], "tags": [], "owner": {"reputation": 305, "user_id": 5747770, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7gvCtpDxjzc/AAAAAAAAAAI/AAAAAAAAEsk/kd8cIkTnkZY/photo.jpg?sz=128", "display_name": "Ankur Gulati", "link": "https://stackoverflow.com/users/5747770/ankur-gulati"}, "is_accepted": false, "score": 0, "last_activity_date": 1542228854, "creation_date": 1542228854, "answer_id": 53308561, "question_id": 53308464, "link": "https://stackoverflow.com/questions/53308464/mixing-and-iterating-list-of-tuples-into-a-text-template/53308561#53308561", "title": "Mixing and iterating list of tuples into a text template", "body": "<pre><code>names = ['joseph', 'parker', 'john']\ninterests = [('apples', 'design'),('bananas','economy'),('pears','medicine')]\nfor i in names:\n    for j in interests:\n        text_template = 'hi my name is '+i + ', i like '+ j[0]+', im studying '+j[1]+' everytime / '\n        print (text_template)\n</code></pre>\n\n<p>This should work.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 10348759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RZx_rHR20ho/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPtQBIsXI7oMF5vhmb_JO22-3-IZQ/mo/photo.jpg?sz=128", "display_name": "Mauro Encinas", "link": "https://stackoverflow.com/users/10348759/mauro-encinas"}, "edited": false, "score": 1, "creation_date": 1542235375, "post_id": 53308563, "comment_id": 93500486, "body": "Thanks!!, you helped me a lot, I&#39;m starting to learn about for loops."}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": true, "score": 1, "last_activity_date": 1542228856, "creation_date": 1542228856, "answer_id": 53308563, "question_id": 53308464, "link": "https://stackoverflow.com/questions/53308464/mixing-and-iterating-list-of-tuples-into-a-text-template/53308563#53308563", "title": "Mixing and iterating list of tuples into a text template", "body": "<p>I suggest a slight change to your template, such that field names are not duplicated.</p>\n\n<pre><code>text_template = 'hi my name is {name}, i like {interest}, im studying {degree} everytime / '\n</code></pre>\n\n<p>Now you can do:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import product\n&gt;&gt;&gt; for name, (interest, degree) in product(names, interests):\n...:    print(text_template.format(name=name, interest=interest, degree=degree))\n...:    \nhi my name is joseph, i like apples, im studying design everytime / \nhi my name is joseph, i like bananas, im studying economy everytime / \nhi my name is joseph, i like pears, im studying medicine everytime / \nhi my name is parker, i like apples, im studying design everytime / \nhi my name is parker, i like bananas, im studying economy everytime / \nhi my name is parker, i like pears, im studying medicine everytime / \nhi my name is john, i like apples, im studying design everytime / \nhi my name is john, i like bananas, im studying economy everytime / \nhi my name is john, i like pears, im studying medicine everytime / \n</code></pre>\n\n<p>... and in case the blank lines are important:</p>\n\n<pre><code>&gt;&gt;&gt; for i, (name, (interest, degree)) in enumerate(product(names, interests), 1):\n...:    print(text_template.format(name=name, interest=interest, degree=degree))\n...:    if not i%len(names):\n...:        print()\n...:        \nhi my name is joseph, i like apples, im studying design everytime / \nhi my name is joseph, i like bananas, im studying economy everytime / \nhi my name is joseph, i like pears, im studying medicine everytime / \n\nhi my name is parker, i like apples, im studying design everytime / \nhi my name is parker, i like bananas, im studying economy everytime / \nhi my name is parker, i like pears, im studying medicine everytime / \n\nhi my name is john, i like apples, im studying design everytime / \nhi my name is john, i like bananas, im studying economy everytime / \nhi my name is john, i like pears, im studying medicine everytime / \n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10348759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RZx_rHR20ho/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPtQBIsXI7oMF5vhmb_JO22-3-IZQ/mo/photo.jpg?sz=128", "display_name": "Mauro Encinas", "link": "https://stackoverflow.com/users/10348759/mauro-encinas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53308563, "answer_count": 2, "score": 2, "last_activity_date": 1542228856, "creation_date": 1542228386, "last_edit_date": 1542228580, "question_id": 53308464, "link": "https://stackoverflow.com/questions/53308464/mixing-and-iterating-list-of-tuples-into-a-text-template", "title": "Mixing and iterating list of tuples into a text template", "body": "<p>I got a list and a list of tuples, each containing strings:</p>\n\n<pre><code>names = ['joseph', 'parker', 'john']\ninterests = [('apples', 'design'),('bananas','economy'),('pears','medicine')]\n\ntext_template = 'hi my name is {name}, i like {interests}, im studying {interests} everytime / '\n</code></pre>\n\n<p>I'm trying to achieve this:</p>\n\n<pre><code>hi my name is joseph, i like apples, im studying design everytime / \nhi my name is joseph, i like bananas, im studying economy everytime / \nhi my name is joseph, i like pears, im studying medicine everytime \n\n\nhi my name is parker, i like apples, im studying design everytime / \nhi my name is parker, i like bananas, im studying economy everytime / \nhi my name is parker, i like pears, im studying medicine everytime \n\nhi my name is john, i like apples, im studying design everytime / \nhi my name is john, i like bananas, im studying economy everytime / \nhi my name is john, i like pears, im studying medicine everytime \n</code></pre>\n\n<p>thanks, all!!</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542228285, "post_id": 53308430, "comment_id": 93497634, "body": "Please show the full traceback"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1542228590, "post_id": 53308430, "comment_id": 93497758, "body": "What&#39;s the shape of <code>x</code> and <code>y2</code>?  Of <code>curvefit</code> if it gets that far?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10654266"}, "edited": false, "score": 0, "creation_date": 1542228800, "post_id": 53308430, "comment_id": 93497843, "body": "I have added a screenshot of the traceback in the post. Or at least I think I did."}], "owner": {"user_type": "does_not_exist", "display_name": "user10654266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542229949, "creation_date": 1542228185, "last_edit_date": 1542229949, "question_id": 53308430, "link": "https://stackoverflow.com/questions/53308430/polyfit-error-1d-or-2d-array-needed-for-y", "title": "polyfit error 1d or 2d array needed for y", "body": "<p><a href=\"https://i.stack.imgur.com/Ubp0I.png\" rel=\"nofollow noreferrer\">Click here to see traceback</a></p>\n\n<p>I have the following question: </p>\n\n<p>Write a Python program to generate data that uses the sum of a random variable (which has a Gaussian distribution) and a 4th-degree polynomial equation (3x4+x3+3x2+4x+5). Using least squares polynomial fit, curve the generated data using a model until your model can accurately predict all values</p>\n\n<p>with the following start on the question: </p>\n\n<pre><code>import random\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndef mainFunc():\n    poly_coeff=[3,1,3,4,5]\n    poly=np.poly1d(poly_coeff)\n    print(poly)\n    y = poly(random.randint(0,10)) + min(10,max(0,random.gauss(2,3)))\n    x=np.arange(-10,10)\n    curvefit=np.polyfit(x,y,4)\n    y_new=np.polyfit(curvefit,x)\n    plt.plot(x,y, '-or')\n    plt.plot(x,y_new, '-b')\n    plt.show()\n\n\nmainFunc()\n</code></pre>\n\n<p>Can anyone help with the array error that is being generated? </p>\n"}, {"tags": ["python", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 7383, "user_id": 234657, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/24edf474c7978302df1e0589058e16f9?s=128&d=identicon&r=PG", "display_name": "Chris Curvey", "link": "https://stackoverflow.com/users/234657/chris-curvey"}, "is_accepted": false, "score": 0, "last_activity_date": 1542242699, "creation_date": 1542242699, "answer_id": 53310890, "question_id": 53308405, "link": "https://stackoverflow.com/questions/53308405/summing-up-datetimes-without-using-pandas/53310890#53310890", "title": "Summing up datetimes without using pandas", "body": "<p>There's a lot of ways to solve this, but I'll try to stay as close to your existing code as I can:</p>\n\n<pre><code>def get_data(avrains):\n    \"\"\"\n    opens the file specified in avrains and returns a dictionary\n    keyed by date, containing a 2-tuple of the total rainfall and\n    the count of data points, like so:\n    {\n      date(2018, 11, 1) : (0.25, 6),\n      date(2018, 11, 2) : (0.00, 5),\n    }\n    \"\"\"\n    print('opening{}'.format(avrains))\n    rainfall_totals = dict()\n\n    with open(avrains, 'r') as rfile:\n        header = rfile.readline()\n        for line in rfile:\n            line = (line.strip())\n            row = line.split(',')\n            d = datetime.strptime(row[0], '%Y-%m-%d %H:%M:%S')\n            r = row[-1]\n\n            try:\n                daily_rainfall, daily_count = rainfalls[d]\n                daily_rainfall += r\n                daily_count += 1\n                rainfalls[d] = (daily_rainfall, daily_count)\n            except KeyError:\n                # if we don't find that date in rainfalls, add it\n                rainfalls[d] = (r, 1)\n\n    return rainfalls\n</code></pre>\n\n<p>Now when you call <code>get_data(\"/path/to/file\")</code>, you'll get back a dictionary.  You can spit out the values with some thing like this:</p>\n\n<pre><code>foo = get_data(\"/path/to/file\")\nfor (measure_date, (rainfall, observations)) in foo.items():\n    print measure_date, rainfall, observations\n</code></pre>\n\n<p>(I will leave the formatting of the date, and any sorting or file-writing as an exercise :) ) </p>\n"}], "owner": {"reputation": 21, "user_id": 10654256, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3_OqoiMVWLI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBbqG6f27ATERIo_NE8kiWsdoySLQ/mo/photo.jpg?sz=128", "display_name": "Sarah Reuter", "link": "https://stackoverflow.com/users/10654256/sarah-reuter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542242699, "creation_date": 1542228026, "last_edit_date": 1542228389, "question_id": 53308405, "link": "https://stackoverflow.com/questions/53308405/summing-up-datetimes-without-using-pandas", "title": "Summing up datetimes without using pandas", "body": "<p>I have a data set of rain fall in half hour intervals. I want to sum up the rainfall for each day and keep track of how many data points are summed per day to account for data gaps. Then I want to create a new file with a column for the date, a column for the rainfall, and a column for how many data points were available to sum for each day. \ndaily sum is my function that is trying to do this, get data is my function for extracting the data. </p>\n\n<pre><code>def get_data(avrains):\n    print('opening{}'.format(avrains))\n    with open(avrains, 'r') as rfile:\n        header = rfile.readline()\n        dates = []\n        rainfalls = []\n        for line in rfile:\n            line = (line.strip())\n            row = line.split(',')\n            d = datetime.strptime(row[0], '%Y-%m-%d %H:%M:%S')\n            r = row[-1]\n            dates.append(d)\n            rainfalls.append(float(r))\n        data = zip(dates, rainfalls)\n        data = sorted(data)\n        return (data)\n\ndef dailysum(rains):\n    day_date = []\n    rain_sum = []\n    for i in rains:\n        dayi = i[0]\n        rainsi = i[1]\n    for i in dayi:\n        try:\n            if dayi[i]== dayi[i+1]:\n                s= rains[i]+rains[i+1]\n                rain_sum.append(float(s))\n        except:\n            pass\n            day_date.append(dayi[i]) \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1542229021, "post_id": 53308384, "comment_id": 93497941, "body": "When you tell it to send <code>df[&#39;fruit&#39;]</code>, it sends the entire column at once. You can loop through the column instead, sending each followed by a newline <code>&#39;\\n&#39;</code> and then send enter"}, {"owner": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1542230000, "post_id": 53308384, "comment_id": 93498339, "body": "Is there any way to tell selenium webdriver that &#39;\\n&#39; means a new line? Is there any way I can add a <code>&#39;Control&#39; + &#39;Shift&#39;</code> command after every row is sent by send_keys() so that the lines stay separate? I am still learning this so please forgive me if these questions sound weird. I have tried looking for an answer but in vain. That&#39;s why as a last resort I have posted it out here so that the experts can guide me."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1542230246, "post_id": 53308384, "comment_id": 93498446, "body": "Selenium already <i>&quot;knows&quot;</i> that <code>&#39;\\n&#39;</code> is a new-line character, so if to use code <code>send_keys(&#39;foo\\nbar&#39;)</code> string will appear in textarea splitted into two sub-strings"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1542230359, "post_id": 53308384, "comment_id": 93498497, "body": "<code>&#39;\\n&#39;</code> <i>is</i> a newline character, at least in most character encodings, and it should be read as such. And never apologize for asking honest questions, that&#39;s why this site exists and that&#39;s how you learn."}, {"owner": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "edited": false, "score": 0, "creation_date": 1542230566, "post_id": 53308384, "comment_id": 93498580, "body": "Sorry i had a typo in my previous comment. I actually wanted to say &#39;Shift&#39; + &#39;Enter&#39; for new line. I saw your solution and just replied to it too."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 2, "creation_date": 1542234291, "post_id": 53308384, "comment_id": 93500094, "body": "FYI... <code>driver.implicitly_wait(5)</code> doesn&#39;t actually wait for the page to load. What it does it sets the default wait time for implicit waits that last the life of <code>driver</code>. So from then on, any time you go to access an element on the page it will wait up to 5s for the element. See <a href=\"https://www.seleniumhq.org/docs/04_webdriver_advanced.jsp#implicit-waits\" rel=\"nofollow noreferrer\">the docs</a> for more info. It&#39;s not a good practice to use implicit waits. If you look at the Selenium contributors, they recommend against it. You should use <code>WebDriverWait</code> instead."}, {"owner": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1542303080, "post_id": 53308384, "comment_id": 93530343, "body": "Really appreciate your inputs and guidance @JeffC. I will surely look into <code>WebDriverWait</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "edited": false, "score": 0, "creation_date": 1542230576, "post_id": 53308738, "comment_id": 93498589, "body": "I used the solution <code>text_field.send_keys(&quot;\\n&quot;.join(df[&#39;fruit&#39;]))</code> which you had provided and it worked perfectly. Thanks a lot for helping me out!!"}, {"owner": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "edited": false, "score": 0, "creation_date": 1542230669, "post_id": 53308738, "comment_id": 93498636, "body": "And that google translate page was just for highlighting my problem and not really meant for any translations.. :-)"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "edited": false, "score": 0, "creation_date": 1542230780, "post_id": 53308738, "comment_id": 93498672, "body": "@Code_Sipra , oh, I see :) But if in a future you will need translator, note that <code>googletrans.py</code> work flawlessly :))"}, {"owner": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "edited": false, "score": 0, "creation_date": 1542233473, "post_id": 53308738, "comment_id": 93499797, "body": "Noted. Thanks again!"}], "tags": [], "owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "is_accepted": true, "score": 3, "last_activity_date": 1542229687, "creation_date": 1542229687, "answer_id": 53308738, "question_id": 53308384, "link": "https://stackoverflow.com/questions/53308384/send-values-from-dataframe-using-send-keys-in-selenium-using-python/53308738#53308738", "title": "Send values from dataframe using send_keys() in Selenium using Python", "body": "<p>You can try to send concatenated string as</p>\n\n<pre><code>text_field.send_keys(\" \".join(df['fruit']))\n</code></pre>\n\n<p>or with new-line characters:</p>\n\n<pre><code>text_field.send_keys(\"\\n\".join(df['fruit']))\n</code></pre>\n\n<p>P.S. Instead of using Selenium to translate strings you can use <a href=\"https://pypi.org/project/googletrans/\" rel=\"nofollow noreferrer\">GoogleTranslateAPI python binding</a>:</p>\n\n<p>In Terminal/CommandLine:</p>\n\n<pre><code>pip install git+https://github.com/BoseCorp/py-googletrans.git\n</code></pre>\n\n<p>In Python shell/IDE:</p>\n\n<pre><code>from googletrans import Translator\n\ntranslator = Translator()\n#  Translate into \"es\" (Spanish)\nprint(translator.translate(\" \".join(df['fruit']), dest='es').text)\n</code></pre>\n"}], "owner": {"reputation": 1181, "user_id": 8741108, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14b8175082dfdc1cc847871984efb6ee?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Sipra", "link": "https://stackoverflow.com/users/8741108/code-sipra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1094, "favorite_count": 0, "accepted_answer_id": 53308738, "answer_count": 1, "score": 3, "last_activity_date": 1542229687, "creation_date": 1542227916, "question_id": 53308384, "link": "https://stackoverflow.com/questions/53308384/send-values-from-dataframe-using-send-keys-in-selenium-using-python", "title": "Send values from dataframe using send_keys() in Selenium using Python", "body": "<p>I have a dataframe df. I am trying to send the values present in the column 'fruit' to the google translate page using <code>send_keys()</code> method in Selenium and python. Below is an example code that replicates what I am trying to do.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nimport pandas as pd\n\n# Create a test dataframe\nfruit = ['This is apple', 'This is orange', 'This is mango']\nbucket = ['A', 'B', 'C']\ndf = pd.DataFrame({\"fruit\": fruit, \"bucket\": bucket})\n\n# create a new Firefox session\ndriver = webdriver.Firefox()\n\n# Wait for the page to load\ndriver.implicitly_wait(5)\n\n# Maximize the browser window\ndriver.maximize_window()\n\n# navigate to the home page\ndriver.get(\"https://translate.google.co.in/\")\n\n# Locate the text field to update values\ntext_field = driver.find_element_by_name(\"text\")\n\n# Clears any value already present in text field\ntext_field.clear()\n\n# Updates the string 'Breaking Bad' in search bar\ntext_field.send_keys(df['fruit'])\ntext_field.send_keys(Keys.ENTER)\n</code></pre>\n\n<p>Although it works, the rows are all being sent as a single line like this:</p>\n\n<pre><code>This is appleThis is orangeThis is mango\n</code></pre>\n\n<p>I want the values to appear in the google translate page like this:</p>\n\n<pre><code>This is apple\nThis is orange\nThis is mango\n</code></pre>\n\n<p>Any help on how to make this happen would be really appreciated. I have Python 3.6.6 and my selenium version is 3.141.0. My OS is Windows 10 (64 Bit).</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1542228043, "post_id": 53308341, "comment_id": 93497544, "body": "Why isn&#39;t your code producing your desired output?"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 0, "creation_date": 1542228545, "post_id": 53308341, "comment_id": 93497740, "body": "@blacksite Nope, <code>df.columns</code> is an index and it actually does have <code>str</code> accessor ."}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1542228600, "post_id": 53308341, "comment_id": 93497762, "body": "@RafaelC, huh, TIL. Thanks. Deleting my other comment."}], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 2, "last_activity_date": 1542227886, "creation_date": 1542227886, "answer_id": 53308381, "question_id": 53308341, "link": "https://stackoverflow.com/questions/53308341/removing-strings-in-a-series-of-headers/53308381#53308381", "title": "Removing strings in a series of headers", "body": "<p>Your way works for me, but there are alternatives:</p>\n\n<p>One way is to split your column names and take the last word:</p>\n\n<pre><code>df.columns = [i.split()[-1] for i in df.columns]\n&gt;&gt;&gt; df\n   Alabama  Arizona  Washington\n0        1        3           2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1542228075, "post_id": 53308402, "comment_id": 93497560, "body": "You could add <code>inplace=True</code> to make it in place"}], "tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": true, "score": 3, "last_activity_date": 1542228126, "last_edit_date": 1542228126, "creation_date": 1542228015, "answer_id": 53308402, "question_id": 53308341, "link": "https://stackoverflow.com/questions/53308341/removing-strings-in-a-series-of-headers/53308402#53308402", "title": "Removing strings in a series of headers", "body": "<p>Here is another solution, not in place:</p>\n\n<pre><code>df.rename(columns=lambda x: x.split()[-1])\n</code></pre>\n\n<p>or in place:</p>\n\n<pre><code>df.rename(columns=lambda x: x.split()[-1], inplace = True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "is_accepted": false, "score": 0, "last_activity_date": 1542228165, "creation_date": 1542228165, "answer_id": 53308429, "question_id": 53308341, "link": "https://stackoverflow.com/questions/53308341/removing-strings-in-a-series-of-headers/53308429#53308429", "title": "Removing strings in a series of headers", "body": "<p>You can use the <code>re</code> module for this:</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df = pd.DataFrame({'State Income of Alabama':[1], \n...                    'State Income of Washington':[2],\n...                    'State Income of Arizona':[3]})\n&gt;&gt;&gt; \n&gt;&gt;&gt; import re\n&gt;&gt;&gt; df.columns = [re.sub('State Income of ', '', col) for col in df]\n&gt;&gt;&gt; df\n   Alabama  Washington  Arizona\n0        1           2        3\n</code></pre>\n\n<p><code>re.sub('State Income of', '', col)</code> will replace any occurrence of 'State Income of' with an empty string (with \"nothing,\" effectively) in the string <code>col</code>.</p>\n"}], "owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 53308402, "answer_count": 3, "score": 0, "last_activity_date": 1542229373, "creation_date": 1542227706, "last_edit_date": 1542229373, "question_id": 53308341, "link": "https://stackoverflow.com/questions/53308341/removing-strings-in-a-series-of-headers", "title": "Removing strings in a series of headers", "body": "<p>I have a number of columns in a dataframe:</p>\n\n<pre><code>df = pd.DataFrame({'Date':[1990],'State Income of Alabama':[1], \n                   'State Income of Washington':[2],\n                   'State Income of Arizona':[3]})\n</code></pre>\n\n<p>All headers have the same number of strings and all have the exact same strings with exactly one white space between the State's name.</p>\n\n<p>I want to take out the strings 'State Income of ' and leave the state in tact as a new header for the set so they just all read:</p>\n\n<pre><code>Alabama  Washington  Arizona\n1        2           3\n</code></pre>\n\n<p>I've tried using the replace columns function in Python like:</p>\n\n<pre><code>df.columns = df.columns.str.replace('State Income of ', '')\n</code></pre>\n\n<p>But this isn't giving me the desired output.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1542227948, "post_id": 53308339, "comment_id": 93497496, "body": "That&#39;s nothing to do with argparse, that&#39;s just how Python represents a dictionary. See <a href=\"https://stackoverflow.com/q/10279712/3001761\">stackoverflow.com/q/10279712/3001761</a>"}, {"owner": {"reputation": 446, "user_id": 10559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94635030126eb4fd6e0b207a00411a4d?s=128&d=identicon&r=PG&f=1", "display_name": "WSLUser", "link": "https://stackoverflow.com/users/10559356/wsluser"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1542228302, "post_id": 53308339, "comment_id": 93497640, "body": "Yes I removed the label but that still doesn&#39;t help me determine how to get the output to print multiple lines instead of a single line."}, {"owner": {"reputation": 446, "user_id": 10559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94635030126eb4fd6e0b207a00411a4d?s=128&d=identicon&r=PG&f=1", "display_name": "WSLUser", "link": "https://stackoverflow.com/users/10559356/wsluser"}, "edited": false, "score": 0, "creation_date": 1542228629, "post_id": 53308339, "comment_id": 93497780, "body": "Easier readability. Eventually I&#39;ll be adding in user input for each of these arguments along with a few other things."}, {"owner": {"reputation": 446, "user_id": 10559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94635030126eb4fd6e0b207a00411a4d?s=128&d=identicon&r=PG&f=1", "display_name": "WSLUser", "link": "https://stackoverflow.com/users/10559356/wsluser"}, "edited": false, "score": 0, "creation_date": 1542228938, "post_id": 53308339, "comment_id": 93497901, "body": "ballpointBen, thanks, I am eventually passing into a json file but not sure the width solutions will work. I just tried that pprint method and got TypeError: &#39;module&#39; object is not callable"}], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 10559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94635030126eb4fd6e0b207a00411a4d?s=128&d=identicon&r=PG&f=1", "display_name": "WSLUser", "link": "https://stackoverflow.com/users/10559356/wsluser"}, "edited": false, "score": 0, "creation_date": 1542229051, "post_id": 53308532, "comment_id": 93497959, "body": "That did the trick. Thank you!"}, {"owner": {"reputation": 1312, "user_id": 9717184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ad422fe492f8008ce2945c57c5148d?s=128&d=identicon&r=PG", "display_name": "connectyourcharger", "link": "https://stackoverflow.com/users/9717184/connectyourcharger"}, "reply_to_user": {"reputation": 446, "user_id": 10559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94635030126eb4fd6e0b207a00411a4d?s=128&d=identicon&r=PG&f=1", "display_name": "WSLUser", "link": "https://stackoverflow.com/users/10559356/wsluser"}, "edited": false, "score": 0, "creation_date": 1542229396, "post_id": 53308532, "comment_id": 93498098, "body": "@WSLUser If you found my answer useful, please accept it by clicking the check mark next to it, thanks!"}, {"owner": {"reputation": 446, "user_id": 10559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94635030126eb4fd6e0b207a00411a4d?s=128&d=identicon&r=PG&f=1", "display_name": "WSLUser", "link": "https://stackoverflow.com/users/10559356/wsluser"}, "edited": false, "score": 0, "creation_date": 1542290121, "post_id": 53308532, "comment_id": 93522054, "body": "Sorry! I marked it appropriately"}], "tags": [], "owner": {"reputation": 1312, "user_id": 9717184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ad422fe492f8008ce2945c57c5148d?s=128&d=identicon&r=PG", "display_name": "connectyourcharger", "link": "https://stackoverflow.com/users/9717184/connectyourcharger"}, "is_accepted": true, "score": 1, "last_activity_date": 1542228712, "creation_date": 1542228712, "answer_id": 53308532, "question_id": 53308339, "link": "https://stackoverflow.com/questions/53308339/print-each-argument-on-different-lines/53308532#53308532", "title": "Print each argument on different lines", "body": "<p>You could try pretty-printing it:</p>\n\n<pre><code>&gt;&gt;&gt; args = {'prog': None, 'summ': None}\n&gt;&gt;&gt; from pprint import pprint\n&gt;&gt;&gt; pprint(args)\n{'prog': None,\n'summ': None}\n</code></pre>\n\n<p>See this <a href=\"https://stackoverflow.com/a/10279727/9717184\">question/answer</a>.</p>\n"}], "owner": {"reputation": 446, "user_id": 10559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94635030126eb4fd6e0b207a00411a4d?s=128&d=identicon&r=PG&f=1", "display_name": "WSLUser", "link": "https://stackoverflow.com/users/10559356/wsluser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "closed_date": 1542229062, "accepted_answer_id": 53308532, "answer_count": 1, "score": -3, "last_activity_date": 1542228712, "creation_date": 1542227700, "last_edit_date": 1542228240, "question_id": 53308339, "link": "https://stackoverflow.com/questions/53308339/print-each-argument-on-different-lines", "closed_reason": "Duplicate", "title": "Print each argument on different lines", "body": "<p>Snippet of code:</p>\n\n<pre><code>import argparse\n\nparser = argparse.ArgumentParser(description='Process some values.')\n\nparser.add_argument('--proj', metavar='P', type=str, nargs= 1,\n                    help='Identify the project')\n\nparser.add_argument('--summ', metavar='S', type=str, nargs= '+',\n                    help='Write a summary')\n\nargs = parser.parse_args()\n\na = vars(args)\n\nprint(a)\n</code></pre>\n\n<p>Execute <code>python3 filename.py</code> </p>\n\n<p>Output:</p>\n\n<pre><code>{'proj': None, 'summ': None}\n</code></pre>\n\n<p>This is only a single line printed.</p>\n\n<p>Instead I want to see:</p>\n\n<pre><code>{'proj' : None,\n\n 'summ' : None}\n</code></pre>\n\n<p>This has multiple lines printed, thus easier to read output. Please clarify if any other detail needed.</p>\n"}, {"tags": ["python", "opencv", "multiprocessing", "pickle"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1542230173, "post_id": 53308334, "comment_id": 93498409, "body": "Just create the <code>VideoCapture</code> instance in <code>run</code>. This wouldn&#39;t work even if you could pickle it, since then you&#39;d try to access and control the camera from 2 different processes."}, {"owner": {"reputation": 343, "user_id": 2386301, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7d022174e97791d3f48d38b5917128e?s=128&d=identicon&r=PG", "display_name": "user2386301", "link": "https://stackoverflow.com/users/2386301/user2386301"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1542235494, "post_id": 53308334, "comment_id": 93500525, "body": "I think my point is, as long as the videocapture object exist as a member of MyProcess, even if my run function is irrelevant to it, I still can&#39;t multiprocess the run function."}, {"owner": {"reputation": 178, "user_id": 4958081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7ZLDY.png?s=128&g=1", "display_name": "secavfr", "link": "https://stackoverflow.com/users/4958081/secavfr"}, "edited": false, "score": 0, "creation_date": 1610475561, "post_id": 53308334, "comment_id": 116143646, "body": "It&#39;s been some time but did you find any solution ?"}, {"owner": {"reputation": 73, "user_id": 9329400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d657687abaeeafd7aa7d5363b0410e?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Bone", "link": "https://stackoverflow.com/users/9329400/joshua-bone"}, "edited": false, "score": 0, "creation_date": 1610570667, "post_id": 53308334, "comment_id": 116179340, "body": "I have not found a solution. In the end I did not use multiprocessing."}], "owner": {"reputation": 343, "user_id": 2386301, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7d022174e97791d3f48d38b5917128e?s=128&d=identicon&r=PG", "display_name": "user2386301", "link": "https://stackoverflow.com/users/2386301/user2386301"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2852, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1542227687, "creation_date": 1542227687, "question_id": 53308334, "link": "https://stackoverflow.com/questions/53308334/python-multiprocess-cant-pickle-opencv-videocapture-object", "title": "Python multiprocess can&#39;t pickle opencv videocapture object", "body": "<p>I am trying to create a independent process to handle my image acquire from camera. But multiprocessing seems to have difficulty pickling videocapture module from opencv. Can anyone suggest a work around ? I am using python 3.7.1 </p>\n\n<pre><code>from multiprocessing import Process\nimport multiprocessing as mp\nimport time\nimport logging\nimport logging.handlers\nimport sys\n\nimport logging\nfrom enum import Enum\nimport cv2\n\n\nclass Logger():\n    @property\n    def logger(self):\n        component = \"{}.{}\".format(type(self).__module__, type(self).__name__)\n        #default log handler to dump output to console\n\n        return logging.getLogger(component)\n\n\n\nclass MyProcess(Logger):\n\n    def __init__(self, ):\n        self.process = Process(target = self.run, args=())\n        self.exit = mp.Event()\n        self.logger.info(\"initialize class\")\n        self.capture = cv2.VideoCapture(0)\n\n    def run(self):\n        while not self.exit.is_set():\n\n            pass\n        print(\"You exited!\")\n\n    def shutdown(self):\n        print(\"Shutdown initiated\")\n        self.exit.set()\n\n\nif __name__ == \"__main__\":\n    p = MyProcess()\n    p.process.start()\n    print( \"Waiting for a while\")\n    time.sleep(3)\n    p.shutdown()\n    time.sleep(3)\n    print(\"Child process state: {}\".format(p.process.is_alive())) \n</code></pre>\n\n<p>The return error specific said it videocapture object can't be pickled.</p>\n\n<p>File \"C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Anaconda3_64\\lib\\multiprocessing\\reduction.py\", line 60, in dump\n    ForkingPickler(file, protocol).dump(obj)</p>\n\n<p>TypeError: can't pickle cv2.VideoCapture objects</p>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 15506, "user_id": 5792244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8b7f62698a5d33a0bf49f47118d32b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave2e", "link": "https://stackoverflow.com/users/5792244/dave2e"}, "edited": false, "score": 0, "creation_date": 1542231901, "post_id": 53308326, "comment_id": 93499139, "body": "See this question for R: <a href=\"https://stackoverflow.com/questions/17811871/run-r-script-from-bat-batch-file\" title=\"run r script from bat batch file\">stackoverflow.com/questions/17811871/&hellip;</a>"}, {"owner": {"reputation": 76, "user_id": 1284046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159fd2876affc1d08b9b9d9033c6ab6e?s=128&d=identicon&r=PG", "display_name": "JonnyCab", "link": "https://stackoverflow.com/users/1284046/jonnycab"}, "reply_to_user": {"reputation": 15506, "user_id": 5792244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8b7f62698a5d33a0bf49f47118d32b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave2e", "link": "https://stackoverflow.com/users/5792244/dave2e"}, "edited": false, "score": 0, "creation_date": 1542235329, "post_id": 53308326, "comment_id": 93500475, "body": "Thanks @Dave2e That sounds like it will fit the bill, assuming that the batch commands will wait until the Rscript has completed. I think the SQL is fairly straightforward, so that only leaves the python."}], "owner": {"reputation": 76, "user_id": 1284046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159fd2876affc1d08b9b9d9033c6ab6e?s=128&d=identicon&r=PG", "display_name": "JonnyCab", "link": "https://stackoverflow.com/users/1284046/jonnycab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542227615, "creation_date": 1542227615, "question_id": 53308326, "link": "https://stackoverflow.com/questions/53308326/how-to-use-a-windows-batch-file-to-run-an-r-script-followed-by-a-python-script", "title": "How to use a Windows batch file to run an R script, followed by a Python script, then a T-SQL query?", "body": "<p>I have three separate daily processes that all take a long time to run, which means a lot of waiting around. For some very good reasons, they need to use the different languages.</p>\n\n<p>I'm guessing there has to be a way to run all three, (consecutively as they rely on the previous process being completed,) using a Windows batch file.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1542227641, "post_id": 53308319, "comment_id": 93497348, "body": "The lambda is only the first line, the second are the items to &quot;load&quot; into the <code>defaultdict</code>."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542227660, "post_id": 53308319, "comment_id": 93497360, "body": "Where did you find that code?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542227688, "post_id": 53308319, "comment_id": 93497371, "body": "The list comprehension seems pointless; using <code>dict_foo</code> directly would accomplish the same thing."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542227711, "post_id": 53308319, "comment_id": 93497378, "body": "What do you mean by &quot;if d[key] when the key doesn&#39;t exist&quot;?"}, {"owner": {"reputation": 469, "user_id": 8787039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b932fa899094df6809bb3c772bf1a27?s=128&d=identicon&r=PG&f=1", "display_name": "Gene Xu", "link": "https://stackoverflow.com/users/8787039/gene-xu"}, "edited": false, "score": 0, "creation_date": 1542230022, "post_id": 53308319, "comment_id": 93498348, "body": "I simplified the code when I posted the question. The list comprehension actually is like this: [(w, func(i)) for w, i in dict_foo.items()]"}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 8787039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b932fa899094df6809bb3c772bf1a27?s=128&d=identicon&r=PG&f=1", "display_name": "Gene Xu", "link": "https://stackoverflow.com/users/8787039/gene-xu"}, "edited": false, "score": 1, "creation_date": 1542228042, "post_id": 53308376, "comment_id": 93497543, "body": "Thanks a lot! Now I finally got it! Thanks a million!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1542227871, "creation_date": 1542227871, "answer_id": 53308376, "question_id": 53308319, "link": "https://stackoverflow.com/questions/53308319/defaultdict-lambda-with-two-arguments-its-not-argument-per-se-for-lack-of-word/53308376#53308376", "title": "defaultdict lambda with two arguments (it&#39;s not argument per se for lack of word)", "body": "<p>The part after the comma (<code>,</code>) is <em>not</em> part of the lambda-expression, these are elements that are treated like these would as if you had constructed a <code>dict</code>. Like described in the <a href=\"https://docs.python.org/3.7/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Returns a new dictionary-like object. defaultdict is a subclass of the\n  built-in dict class. It overrides one method and adds one writable\n  instance variable. <strong>The remaining functionality is the same as for\n  the <code>dict</code> class</strong> and is not documented here.</p>\n</blockquote>\n\n<p>Now a <code>dict</code> can take as parameter an iterable of 2-tuples, and it then will add these as key-value pairs.</p>\n\n<p>So the above is, more or less, equivalent to:</p>\n\n<pre><code>d = defaultdict(lambda: a)\nfor w, i in dict_foo.items():\n    d[w] = i\n</code></pre>\n\n<p>Given <code>dict_foo</code> is a dictionary, it is probably more elegant to write:</p>\n\n<pre><code>d = defaultdict(lambda: a, dict_foo)\n</code></pre>\n\n<p>We here thus construct a <code>defaultdict</code> with as key-value pairs the items in <code>dict_foo</code>, and we use <code>lambda: a</code> as a \"factory\" to construct values for missing keys.</p>\n"}], "owner": {"reputation": 469, "user_id": 8787039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b932fa899094df6809bb3c772bf1a27?s=128&d=identicon&r=PG&f=1", "display_name": "Gene Xu", "link": "https://stackoverflow.com/users/8787039/gene-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542227871, "creation_date": 1542227591, "question_id": 53308319, "link": "https://stackoverflow.com/questions/53308319/defaultdict-lambda-with-two-arguments-its-not-argument-per-se-for-lack-of-word", "title": "defaultdict lambda with two arguments (it&#39;s not argument per se for lack of word)", "body": "<p>Hi I'm new to python defaultdict and it's callable argument. I have the following mocked code. Can someone help me to understand it?</p>\n\n<pre><code>a = 1.0\nd = defaultdict(\n        lambda: a,\n        [(w, i) for w, i in dict_foo.items()])\n</code></pre>\n\n<p>What would d look like if d[key] when the key doesn't exist?</p>\n"}, {"tags": ["python", "numpy", "indexing"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1542227470, "post_id": 53308283, "comment_id": 93497277, "body": "What&#39;s the shape of <code>matA</code> and <code>matB</code>?"}, {"owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "edited": false, "score": 1, "creation_date": 1542227771, "post_id": 53308283, "comment_id": 93497403, "body": "Hard to answer without details, including how big is big, how fast is the current solution (and why isn&#39;t that fast enough)?"}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 1, "last_activity_date": 1542227993, "last_edit_date": 1542227993, "creation_date": 1542227561, "answer_id": 53308312, "question_id": 53308283, "link": "https://stackoverflow.com/questions/53308283/numpy-fill-in-a-matrix-with-a-smaller-one-fast/53308312#53308312", "title": "Numpy: Fill in a Matrix With a Smaller One FAST", "body": "<p>We could simply get a view into the input with <a href=\"https://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.broadcast_to.html\" rel=\"nofollow noreferrer\"><code>np.broadcast_to</code></a>  to get the desired output -</p>\n\n<pre><code>matA = np.broadcast_to(matB[:,:,:,None,None], matB.shape + (N,M))\n</code></pre>\n\n<p>Being a view, its virtually free -</p>\n\n<pre><code>In [292]: matB = np.random.rand(20,20,20)\n\nIn [293]: N,M = 20,20\n\nIn [294]: %timeit np.broadcast_to(matB[:,:,:,None,None], matB.shape + (N,M))\n100000 loops, best of 3: 4.02 \u00b5s per loop\n</code></pre>\n\n<p>If you need an output with its own memory space, create a copy with  <code>matA.copy()</code>.</p>\n\n<hr>\n\n<p>Alternatively, we could use <code>np.repeat</code> -</p>\n\n<pre><code>np.repeat(matB[:,:,:,None],N*M,axis=-1).reshape(matB.shape+(N,M))\n</code></pre>\n"}], "owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 53308312, "answer_count": 1, "score": -3, "last_activity_date": 1542227993, "creation_date": 1542227378, "question_id": 53308283, "link": "https://stackoverflow.com/questions/53308283/numpy-fill-in-a-matrix-with-a-smaller-one-fast", "title": "Numpy: Fill in a Matrix With a Smaller One FAST", "body": "<p>I'd like to fill in one matrix with copies of another one, like so:</p>\n\n<pre><code>for i in range(N):\n   for j in range(M):\n      matA[:,:,:,i,j] = matB\n</code></pre>\n\n<p>But I have many big dimensions, so I am looking for a faster way.</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1542228305, "post_id": 53308144, "comment_id": 93497643, "body": "Which user input values are producing the above please?"}, {"owner": {"reputation": 13, "user_id": 10654119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QVmjnCsegLI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAwMpFVzmbkq0TlOv2vTl1T9Gsq8Q/mo/photo.jpg?sz=128", "display_name": "Narendra", "link": "https://stackoverflow.com/users/10654119/narendra"}, "reply_to_user": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1542311179, "post_id": 53308144, "comment_id": 93534154, "body": "Took random inputs Ex- Toronto,Canada"}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 6042206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMQZp.jpg?s=128&g=1", "display_name": "Kamikaze_goldfish", "link": "https://stackoverflow.com/users/6042206/kamikaze-goldfish"}, "edited": false, "score": 0, "creation_date": 1542240840, "post_id": 53310530, "comment_id": 93502121, "body": "Nice answer.. Do you stay on SO all the time?"}, {"owner": {"reputation": 13, "user_id": 10654119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QVmjnCsegLI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAwMpFVzmbkq0TlOv2vTl1T9Gsq8Q/mo/photo.jpg?sz=128", "display_name": "Narendra", "link": "https://stackoverflow.com/users/10654119/narendra"}, "edited": false, "score": 0, "creation_date": 1543795515, "post_id": 53310530, "comment_id": 94035152, "body": "I&#39;m trying to get 10 day weather forecast from same website after user inputs. I&#39;m unable scrape html. Please help."}], "tags": [], "owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "is_accepted": true, "score": 0, "last_activity_date": 1542239697, "creation_date": 1542239697, "answer_id": 53310530, "question_id": 53308144, "link": "https://stackoverflow.com/questions/53308144/scrape-web-pages-with-beautiful-soup-and-python-3/53310530#53310530", "title": "Scrape Web Pages with Beautiful Soup and Python 3", "body": "<p>remove comment from the html which are <code>&lt;!--[if lte IE 9]&gt;</code> and <code>&lt;![endif]--&gt;</code>  and <code>.select()</code> right element</p>\n\n<pre><code>...\nhtml = response.text\nhtml = html.replace('&lt;!--[if lte IE 9]&gt;', '').replace('&lt;![endif]--&gt;', '')\nsoup = BeautifulSoup(html, features=\"lxml\")\nright_table = soup.select('#conditions tr')\nfor tr in right_table:\n    print(tr.text.replace('\\n', ''))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10654119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QVmjnCsegLI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAwMpFVzmbkq0TlOv2vTl1T9Gsq8Q/mo/photo.jpg?sz=128", "display_name": "Narendra", "link": "https://stackoverflow.com/users/10654119/narendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 53310530, "answer_count": 1, "score": -2, "last_activity_date": 1542239697, "creation_date": 1542226763, "question_id": 53308144, "link": "https://stackoverflow.com/questions/53308144/scrape-web-pages-with-beautiful-soup-and-python-3", "title": "Scrape Web Pages with Beautiful Soup and Python 3", "body": "<p>Started learning python 3 and beautiful soap \ntrying to get the result from a web page with the following code:</p>\n\n<pre><code>import mechanicalsoup\nfrom bs4 import BeautifulSoup\nbrowser = mechanicalsoup.StatefulBrowser()\nbrowser.open(\"http://www.intellicast.com/\")\nbrowser.select_form()\nbrowser[\"query\"] = input(\"Enter city,Country\")\nresponse = browser.submit_selected()\nhtml = response.text\nsoup = BeautifulSoup(html, features=\"lxml\")\nright_table = soup.find_all('td', id=\"conditions\")\nprint(right_table)\n</code></pre>\n\n<p>I'm stuck at this point\nBased on user input result should look like this:</p>\n\n<p>32\u00b0F\nFeels Like: 23\u00b0\nWind Chill: 23\u00b0<br>\nCeiling:    5400\nHeat Index: 32\u00b0<br>\nVisibility: 10mi\nDew Point:  16\u00b0<br>\nWind:       12mph\nHumidity:   51%<br>\nDirection:  330\u00b0NNW\nPressure:   30.53\"<br>\nGusts:      17mph</p>\n\n<p>How to get this result, please help.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "min"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542226811, "post_id": 53308141, "comment_id": 93496977, "body": "... That&#39;s not a dataframe. That&#39;s HTML."}, {"owner": {"reputation": 1, "user_id": 10653695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BiULgfrr2Gk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAAnFKwyqOrimN9o0ZF_obL7LQM1g/mo/photo.jpg?sz=128", "display_name": "pythonNewbie", "link": "https://stackoverflow.com/users/10653695/pythonnewbie"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1542227719, "post_id": 53308141, "comment_id": 93497381, "body": "Yes I needed to represent it in the question, tried to clean it up using HTML tags."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1542227846, "post_id": 53308141, "comment_id": 93497438, "body": "Oh man, that was a lot of wasted effort :/ drop the HTML, copy/paste <code>.head()</code> (or similar), highlight it all, and click the <code>{}</code> button in the editor, or press <code>ctrl</code> + <code>k</code> :)"}, {"owner": {"reputation": 2987, "user_id": 8173870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoZ3j.jpg?s=128&g=1", "display_name": "HackSlash", "link": "https://stackoverflow.com/users/8173870/hackslash"}, "edited": false, "score": 1, "creation_date": 1542237383, "post_id": 53308141, "comment_id": 93501141, "body": "Welcome to StackOverflow. This is a site where we can help with code you are writing. It&#39;s not often that someone will just write a large program for you. Please get started with the solution you want to build and come back when you need help. Then post the code and what part you need help with."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10653695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BiULgfrr2Gk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAAnFKwyqOrimN9o0ZF_obL7LQM1g/mo/photo.jpg?sz=128", "display_name": "pythonNewbie", "link": "https://stackoverflow.com/users/10653695/pythonnewbie"}, "edited": false, "score": 0, "creation_date": 1542287040, "post_id": 53310178, "comment_id": 93520192, "body": "Sorry yes this part can be done in SQL.  As stated in the original post wanted to to this rolling back the the first entries in the data.  So this would have to go back to around 2013."}, {"owner": {"reputation": 1, "user_id": 10653695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BiULgfrr2Gk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAAnFKwyqOrimN9o0ZF_obL7LQM1g/mo/photo.jpg?sz=128", "display_name": "pythonNewbie", "link": "https://stackoverflow.com/users/10653695/pythonnewbie"}, "edited": false, "score": 0, "creation_date": 1542289007, "post_id": 53310178, "comment_id": 93521311, "body": "Think of it like a window around the data that starts at the current date and looks back across that last 12 entries to find the minimum, then for the previous date it does the same thing for the previous 12 entries and so on to the beginning of the data set."}, {"owner": {"reputation": 2987, "user_id": 8173870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoZ3j.jpg?s=128&g=1", "display_name": "HackSlash", "link": "https://stackoverflow.com/users/8173870/hackslash"}, "reply_to_user": {"reputation": 1, "user_id": 10653695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BiULgfrr2Gk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAAnFKwyqOrimN9o0ZF_obL7LQM1g/mo/photo.jpg?sz=128", "display_name": "pythonNewbie", "link": "https://stackoverflow.com/users/10653695/pythonnewbie"}, "edited": false, "score": 0, "creation_date": 1542298482, "post_id": 53310178, "comment_id": 93527706, "body": "Ok, so you need a for loop and an array to store your minimums as you go. You feed the dates in to the SQL query and save the result in your array."}], "tags": [], "owner": {"reputation": 2987, "user_id": 8173870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoZ3j.jpg?s=128&g=1", "display_name": "HackSlash", "link": "https://stackoverflow.com/users/8173870/hackslash"}, "is_accepted": false, "score": -1, "last_activity_date": 1542237310, "creation_date": 1542237310, "answer_id": 53310178, "question_id": 53308141, "link": "https://stackoverflow.com/questions/53308141/i-need-to-find-the-minimum-value-for-a-large-dataframe-that-will-group-by-site/53310178#53310178", "title": "I need to find the minimum value for a large dataframe that will group by site (location of the facility) and for a rolling previous 12 months period", "body": "<p>This can totally be done in SQL:</p>\n\n<pre><code>SELECT site, MIN(amount)\nFROM YourDataSource\nWHERE date BETWEEN '11/30/2017' AND '10/31/2018'\nGROUP BY site\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10653695, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BiULgfrr2Gk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAAnFKwyqOrimN9o0ZF_obL7LQM1g/mo/photo.jpg?sz=128", "display_name": "pythonNewbie", "link": "https://stackoverflow.com/users/10653695/pythonnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542297796, "creation_date": 1542226740, "last_edit_date": 1542297796, "question_id": 53308141, "link": "https://stackoverflow.com/questions/53308141/i-need-to-find-the-minimum-value-for-a-large-dataframe-that-will-group-by-site", "title": "I need to find the minimum value for a large dataframe that will group by site (location of the facility) and for a rolling previous 12 months period", "body": "<p>The dataframe looks like:</p>\n\n<pre><code>   site     desc        unit    date            amount \n1  site a   metric1     lbs     10/31/2018      13.00 \n2  site a   metric1     lbs     9/30/2018       12.00 \n3  site a   metric1     lbs     8/31/2018       16.00 \n4  site a   metric1     lbs     7/31/2018       19.00 \n5  site a   metric1     lbs     6/30/2018       11.00 \n6  site a   metric1     lbs     5/31/2018       13.50 \n7  site a   metric1     lbs     4/30/2018       13.00 \n8  site a   metric1     lbs     3/31/2018       12.00 \n9  site a   metric1     lbs     2/28/2018       16.00 \n10 site a   metric1     lbs     1/31/2018       19.00 \n11 site a   metric1     lbs     12/31/2017      11.00 \n12 site a   metric1     lbs     11/30/2017      13.50 \n13 site a   metric1     lbs     10/31/2017      13.50 \n</code></pre>\n\n<p>I would like to find the min value for each site for a 12 month date range:\nfor site a from 11/30/2017 to 10/31/2018 the min would be 11.00.\nfor site a from 10/31/2017 to 9/30/2018 the min would be 11.00.\nThis will go back to about 2013 data by month.  I would like to do this with Python since the window frame I tried in SQL can't do MIN without unbounded preceding which blows the 12 month range.</p>\n"}, {"tags": ["python", "python-2.7", "cycle"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1542226766, "post_id": 53308099, "comment_id": 93496961, "body": "Look into <code>for</code> and <code>while</code>"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1542226780, "creation_date": 1542226780, "answer_id": 53308150, "question_id": 53308099, "link": "https://stackoverflow.com/questions/53308099/how-to-cycle-in-python/53308150#53308150", "title": "how to cycle in python?", "body": "<p>I guess you want <code>os.listdir</code></p>\n\n<pre><code>for  fname in os.listdir(basepath):\n     if fname[-3:] in [\"jpg\",\"gif\",\"png\"]:\n        print(\"this is an image:\",os.path.join(basepath,name))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1542226786, "creation_date": 1542226786, "answer_id": 53308153, "question_id": 53308099, "link": "https://stackoverflow.com/questions/53308099/how-to-cycle-in-python/53308153#53308153", "title": "how to cycle in python?", "body": "<p>you can get a list of all your files with a '.jpg' extension using:</p>\n\n<pre><code>import glob, os\nos.chdir(\"/mydir\")\nfor file in glob.glob(\"*.jpg\"):\n    print(file)\n</code></pre>\n\n<p>You can put your code in a function and then call it for every file instead of the print statement.</p>\n"}], "owner": {"reputation": 11, "user_id": 10651773, "user_type": "registered", "profile_image": "https://graph.facebook.com/2289113281117614/picture?type=large", "display_name": "\u013dubo Pifko Rusn&#225;k", "link": "https://stackoverflow.com/users/10651773/%c4%bdubo-pifko-rusn%c3%a1k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 432, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1542229488, "creation_date": 1542226505, "last_edit_date": 1542229488, "question_id": 53308099, "link": "https://stackoverflow.com/questions/53308099/how-to-cycle-in-python", "title": "how to cycle in python?", "body": "<p>I have the code to retrieve the parameters from the photo. I would need to put it in the loop so it would load all of my photos from the folder and write them down in Python`enter code here</p>\n\n<pre><code>import requests\n\nBASE_URL = 'https://westeurope.api.cognitive.microsoft.com/face/v1.0/detect'\nheaders = {\n  'Ocp-Apim-Subscription-Key': 'd7264e9252674c9292b0d8b295cf3251',\n  'Content-Type': 'application/octet-stream'\n}\nparameters = {\n  'returnFaceId': 'true',\n  'returnFaceLandmarks': 'false',\n  'returnFaceAttributes': 'age,gender,emotion'\n}\n\nimg_path = 'C:\\\\Users\\\\Pifko\\\\Desktop\\\\bakalarka\\\\subject13session2_Moment5up.jpg' \nimg_data = open(img_path, 'rb').read()\n\ndef post_image(img_data):\n    response = requests.post(BASE_URL, params=parameters,\n                         headers=headers, data=img_data)\n    try:\n        return response.json()\n    except:\n        return None\n    print(post_image(img_data))\n</code></pre>\n"}, {"tags": ["python", "pyomo"], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 8126904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K9ToU.jpg?s=128&g=1", "display_name": "programmar", "link": "https://stackoverflow.com/users/8126904/programmar"}, "edited": false, "score": 0, "creation_date": 1542228029, "post_id": 53308361, "comment_id": 93497537, "body": "Thanks for your help. I run into this error when I want to make sure that Power is indexed by T. That&#39;s why i use the line <code>model.Power = Set(model.T)</code> and not <code>model.Power = Set()</code>. Sorry maybe I wasn&#39;t clear in the description."}], "tags": [], "owner": {"reputation": 1203, "user_id": 10508893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19088d413e74d87a8f6e0f288cbddb45?s=128&d=identicon&r=PG&f=1", "display_name": "LeKhan9", "link": "https://stackoverflow.com/users/10508893/lekhan9"}, "is_accepted": false, "score": 0, "last_activity_date": 1542227827, "creation_date": 1542227827, "answer_id": 53308361, "question_id": 53308094, "link": "https://stackoverflow.com/questions/53308094/pyomo-keyerror-when-creating-instance-from-data-dictionary/53308361#53308361", "title": "Pyomo KeyError when creating instance from data dictionary", "body": "<p>I am not sure why you are running into the bug exactly, but if I run the code as such I am able to index properly:</p>\n\n<pre><code>from pyomo.core.base import AbstractModel, Set\n\nmodel = AbstractModel()\n\nmodel.T = Set(ordered=True)\n\n#1: model.Power = Set(model.T)\nmodel.Power = Set()\n\ninstance = model.create_instance(data={None: {\n    'T': {None: [0,1,2,3]}, \n    'Power': {None: [0,900,1500,1800]} \n} })\n\nprint 'Printing T vals\\n'\nfor k in instance.component('T'):\n    print k\n\nprint '\\nPrinting Power vals\\n'\n\nfor k in instance.component('Power'):\n    print k\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Printing T vals\n\n0\n1\n2\n3\n\nPrinting Power vals\n\n0\n1500\n900\n1800\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1203, "user_id": 10508893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19088d413e74d87a8f6e0f288cbddb45?s=128&d=identicon&r=PG&f=1", "display_name": "LeKhan9", "link": "https://stackoverflow.com/users/10508893/lekhan9"}, "edited": false, "score": 0, "creation_date": 1542233612, "post_id": 53309295, "comment_id": 93499847, "body": "nice! glad you solved it. Consider upvoting your own answer so others can find it easily."}], "tags": [], "owner": {"reputation": 408, "user_id": 8126904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K9ToU.jpg?s=128&g=1", "display_name": "programmar", "link": "https://stackoverflow.com/users/8126904/programmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1542232478, "creation_date": 1542232478, "answer_id": 53309295, "question_id": 53308094, "link": "https://stackoverflow.com/questions/53308094/pyomo-keyerror-when-creating-instance-from-data-dictionary/53309295#53309295", "title": "Pyomo KeyError when creating instance from data dictionary", "body": "<p>That's the solution:\nInstead of trying to index a Set, I should have used an indexed Parameter, which was actually what I intended to do.</p>\n\n<pre><code>from pyomo.environ import *\n\nmodel = AbstractModel()\n\nmodel.T = Set(ordered=True)\n\nmodel.Power = Param(model.T)\n\ninstance = model.create_instance(data={None: {\n    'T': {None: [0,1,2,3]}, \n    'Power': {None: [0,900,1500,1800]} \n} })\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 8126904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K9ToU.jpg?s=128&g=1", "display_name": "programmar", "link": "https://stackoverflow.com/users/8126904/programmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542232478, "creation_date": 1542226484, "last_edit_date": 1542228411, "question_id": 53308094, "link": "https://stackoverflow.com/questions/53308094/pyomo-keyerror-when-creating-instance-from-data-dictionary", "title": "Pyomo KeyError when creating instance from data dictionary", "body": "<p>The <code>Set model.Power</code> should be indexed by <code>model.T</code>. As the code below shows, an abstract model is created and an instance will be created by loading data from a dictionary.  </p>\n\n<pre><code>from pyomo.environ import *\n\nmodel = AbstractModel()\n\nmodel.T = Set(ordered=True)\n\n#1: model.Power = Set(model.T)\nmodel.Power = Set()\n\ninstance = model.create_instance(data={None: {\n    'T': {None: [0,1,2,3]}, \n    'Power': {None: [0,900,1500,1800]} \n} })\n</code></pre>\n\n<p>The code works like this. But Power will not be indexed. When I uncomment the line #1 and comment the line below I get the following error. </p>\n\n<pre><code>KeyError: 'Cannot construct index None in array set Power'\n</code></pre>\n\n<p>No matter how I write the dictionary I cannot solve this. </p>\n\n<p>How can I make sure that Power ist indexed by T and that I can create the instance from a dictionary? </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1542226460, "post_id": 53308072, "comment_id": 93496814, "body": "Because <code>is</code> checks reference equality, which is basically comparing two integers (the references), but <code>==</code> typically takes a lot of comparisons, and possible casting, etc."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1542226715, "post_id": 53308072, "comment_id": 93496935, "body": "&quot;However they can be both used for comparing numbers&quot; - sure, if you want to perform a bizarre comparison that <a href=\"https://ideone.com/QRxKYT\" rel=\"nofollow noreferrer\"><b>is not</b> an equality test</a>."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 2, "creation_date": 1542226915, "post_id": 53308072, "comment_id": 93497024, "body": "you cannot use it to check equal numbers with the exception of a handful of small numbers ...<code>x = 5000*2;print(x is 10000)</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1542227117, "post_id": 53308072, "comment_id": 93497115, "body": "Try assigning <code>x = 258</code> and <code>y = 258</code> (or larger numbers) on <i>separate</i> lines (not <code>x = 258; y = 258</code>, and then check the value of <code>x is y</code>."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1542227178, "post_id": 53308072, "comment_id": 93497149, "body": "@WillemVanOnsem: Correct, but pedantically, pointers are not integers."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1542227743, "post_id": 53308072, "comment_id": 93497392, "body": "@chepner <code>257</code> will do :)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1542227893, "post_id": 53308072, "comment_id": 93497463, "body": "@Idlehands Could have sworn 257 was in the list of interned ints for some reason."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1542227937, "post_id": 53308072, "comment_id": 93497492, "body": "Also <code>x = 1.0; x is 1.0</code> will fail miserably."}], "owner": {"reputation": 167, "user_id": 5442731, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zyDTEzXCVHo/AAAAAAAAAAI/AAAAAAAAAhY/uYsLbyVmxwE/photo.jpg?sz=128", "display_name": "SJ Bey", "link": "https://stackoverflow.com/users/5442731/sj-bey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "closed_date": 1542228262, "answer_count": 0, "score": 0, "last_activity_date": 1542230265, "creation_date": 1542226406, "last_edit_date": 1542230265, "question_id": 53308072, "link": "https://stackoverflow.com/questions/53308072/why-is-is-faster-than-for-number-equality-test", "closed_reason": "Duplicate", "title": "Why &#39;is&#39; is faster than &#39;==&#39; for number equality test", "body": "<p>I know '==' is used to check the equality of two values and 'is' is used to test the identity of objects in Python as pointed out in <a href=\"https://stackoverflow.com/questions/132988/is-there-a-difference-between-and-is-in-python\">this</a> post. However they can be both used for comparing numbers besides their other applications. I did some tests using both of them to compare two integers and 'is' appears to run faster. Why is that? and if that's true is there any other reason to use '==' for number comparisons at all?</p>\n\n<pre><code>timeit.timeit('1 is 1', number=10**8)\n2.3460144830169156\n\ntimeit.timeit('1 == 1', number=10**8)\n2.9029528259998187\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "group-by", "visualization"], "comments": [{"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 3, "creation_date": 1542227474, "post_id": 53308054, "comment_id": 93497279, "body": "<a href=\"http://seaborn.pydata.org/generated/seaborn.barplot.html\" rel=\"nofollow noreferrer\">seaborn barplots</a> accept a second variable <code>hue</code> that allows this sort of grouping."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 5226914, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10200728186284936/picture?type=large", "display_name": "hunsnowboarder", "link": "https://stackoverflow.com/users/5226914/hunsnowboarder"}, "edited": false, "score": 0, "creation_date": 1542258889, "post_id": 53309179, "comment_id": 93506068, "body": "Thank you for your reply. Unfortunately I get a &quot;Could not interpret&quot; Year&quot; error. What am I doing wrong? :( Thank you!"}, {"owner": {"reputation": 1002, "user_id": 10565773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40441b070c35533ffafe21809dfcf787?s=128&d=identicon&r=PG&f=1", "display_name": "kevins_1", "link": "https://stackoverflow.com/users/10565773/kevins-1"}, "reply_to_user": {"reputation": 125, "user_id": 5226914, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10200728186284936/picture?type=large", "display_name": "hunsnowboarder", "link": "https://stackoverflow.com/users/5226914/hunsnowboarder"}, "edited": false, "score": 0, "creation_date": 1542293540, "post_id": 53309179, "comment_id": 93524285, "body": "It may be an issue of the data table shape or format. Have you tried reseting the index in your groupby with reset_index()?"}, {"owner": {"reputation": 125, "user_id": 5226914, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10200728186284936/picture?type=large", "display_name": "hunsnowboarder", "link": "https://stackoverflow.com/users/5226914/hunsnowboarder"}, "edited": false, "score": 0, "creation_date": 1542294093, "post_id": 53309179, "comment_id": 93524650, "body": "Thank you so much Kevin! No, I didnt reset the index. So now I reset it and works like a charm! :) Thank you so much! Is there any way to sort all these chart in descending order? I mean that the region which has the most sales should be put first and all the others follow in a descending order? Thank you again for your tremendous help!"}, {"owner": {"reputation": 1002, "user_id": 10565773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40441b070c35533ffafe21809dfcf787?s=128&d=identicon&r=PG&f=1", "display_name": "kevins_1", "link": "https://stackoverflow.com/users/10565773/kevins-1"}, "reply_to_user": {"reputation": 125, "user_id": 5226914, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10200728186284936/picture?type=large", "display_name": "hunsnowboarder", "link": "https://stackoverflow.com/users/5226914/hunsnowboarder"}, "edited": false, "score": 0, "creation_date": 1542295025, "post_id": 53309179, "comment_id": 93525274, "body": "You can typically order the data visualized using catplot&#39;s order parameters like col_order (maybe row_order, hue_order, or order depending on your taste). Have you tried that out?"}, {"owner": {"reputation": 125, "user_id": 5226914, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10200728186284936/picture?type=large", "display_name": "hunsnowboarder", "link": "https://stackoverflow.com/users/5226914/hunsnowboarder"}, "edited": false, "score": 0, "creation_date": 1542296629, "post_id": 53309179, "comment_id": 93526441, "body": "I know I should be looking arounc col_order but I am not sure what should I add as parameter... I could not figure it out from the information on catplot method unfortunately. :("}], "tags": [], "owner": {"reputation": 1002, "user_id": 10565773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40441b070c35533ffafe21809dfcf787?s=128&d=identicon&r=PG&f=1", "display_name": "kevins_1", "link": "https://stackoverflow.com/users/10565773/kevins-1"}, "is_accepted": true, "score": 2, "last_activity_date": 1542231881, "creation_date": 1542231881, "answer_id": 53309179, "question_id": 53308054, "link": "https://stackoverflow.com/questions/53308054/pandas-groupby-group-visualization-by-dividing-between-groups/53309179#53309179", "title": "Pandas groupby group visualization by dividing between groups", "body": "<p>Following ChrisD's advice you can obtain a working result with <a href=\"http://seaborn.pydata.org/generated/seaborn.catplot.html#seaborn.catplot\" rel=\"nofollow noreferrer\">seaborn's <code>catplot</code></a> to display your bars into different facets by region.</p>\n\n<pre><code>sns.catplot(x='Year', y='Sales', col='Region', data=groups, kind='bar')\n</code></pre>\n\n<p>You may have to format the aspect ratios for your display purposes.</p>\n"}], "owner": {"reputation": 125, "user_id": 5226914, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10200728186284936/picture?type=large", "display_name": "hunsnowboarder", "link": "https://stackoverflow.com/users/5226914/hunsnowboarder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3049, "favorite_count": 0, "accepted_answer_id": 53309179, "answer_count": 1, "score": 0, "last_activity_date": 1542231881, "creation_date": 1542226315, "question_id": 53308054, "link": "https://stackoverflow.com/questions/53308054/pandas-groupby-group-visualization-by-dividing-between-groups", "title": "Pandas groupby group visualization by dividing between groups", "body": "<p>I am facing a very annoying problem. I have a dataset where I have the sales amounts for different regions and years.</p>\n\n<p>I would like to visualize the yearly aggregated sales amounts based on different regions.</p>\n\n<p>Below is my groupby code:</p>\n\n<pre><code>groups = df.groupby([\"Region\", \"Year\"])[\"Sales\"].sum()\ngroups.plot.bar(color=\"blue\")\nplt.show()\n</code></pre>\n\n<p>And the output I get looks like this:\n<a href=\"https://i.stack.imgur.com/5Jw9G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Jw9G.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have two questions:\n1. How could I somehow separate the region and year bars from each other as this way my chart looks really confusing? A separator line or actually a highlighter would also work, or even a bigger gap would be a good solution to me.\n(Please see below, what I mean:)\n<a href=\"https://i.stack.imgur.com/798d0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/798d0.png\" alt=\"enter image description here\"></a>\nor\n<a href=\"https://i.stack.imgur.com/jxKY1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jxKY1.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have no clue at all, how to solve this problem.</p>\n\n<p>Question no 2. How could I have this image sorted by the regions with most sales, followed by the second most sales yearly, and so on? Kind of sorting in a descending order based on regions.</p>\n\n<p>I tried the code below:</p>\n\n<pre><code>groups = df.groupby([\"Region\", \"Year\"])[\"Sales\"].sum()\ngroups2=groups.sort_values(axis=[0][1],ascending=False)\ngroups.plot.bar(color=\"blue\")\nplt.show()\n</code></pre>\n\n<p>But I get a list index out of range error. Using axis=[0] does not solve the problem.</p>\n\n<p>Thank you very much for your help in advance!</p>\n"}, {"tags": ["python", "python-3.x", "cyclomatic-complexity"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1542226145, "post_id": 53307984, "comment_id": 93496679, "body": "you should define <code>map_func</code> once and for all in <code>__init__</code> so it&#39;s not redone each time, else what&#39;s the point of a dictionary"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1542226162, "post_id": 53307984, "comment_id": 93496687, "body": "besides that I see no complexity..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1542226243, "post_id": 53307984, "comment_id": 93496719, "body": "also you have functions and strings called the same. Please change that. This is probably why it doesn&#39;t work for you"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1542226597, "post_id": 53307984, "comment_id": 93496874, "body": "Why would it reduce cyclomatic complexity? You introduce a factory function that calls one of two other funcs that you could have called by name yourself? Also: use <code>dict.get()</code> or die horribly on &quot;alosdfb&#246;oads&quot; given to your mapper. This is almost code obfuscation - who knows what 1 or 2 might do?"}, {"owner": {"reputation": 375, "user_id": 3734690, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IecaV.jpg?s=128&g=1", "display_name": "Chinmaya B", "link": "https://stackoverflow.com/users/3734690/chinmaya-b"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1542227166, "post_id": 53307984, "comment_id": 93497139, "body": "@PatrickArtner That was just for example I will change my options from 1,2 to something more sensible, my previous (too complex code had) a single method with if else ladder for choosing an option."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 3734690, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IecaV.jpg?s=128&g=1", "display_name": "Chinmaya B", "link": "https://stackoverflow.com/users/3734690/chinmaya-b"}, "edited": false, "score": 0, "creation_date": 1542227031, "post_id": 53308079, "comment_id": 93497077, "body": "Your code throws error <code>Traceback (most recent call last):   File &quot;function_call_dict.py&quot;, line 20, in &lt;module&gt;     print(t.select_one(1))     return map_func[option]() TypeError: &#39;str&#39; object is not callable</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 375, "user_id": 3734690, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IecaV.jpg?s=128&g=1", "display_name": "Chinmaya B", "link": "https://stackoverflow.com/users/3734690/chinmaya-b"}, "edited": false, "score": 0, "creation_date": 1542227243, "post_id": 53308079, "comment_id": 93497185, "body": "weird, as I tested it as is. Are you sure you copied exactly?"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1542226421, "creation_date": 1542226421, "answer_id": 53308079, "question_id": 53307984, "link": "https://stackoverflow.com/questions/53307984/reducing-cyclomatic-complexity-of-object-oriented-python-code/53308079#53308079", "title": "Reducing cyclomatic complexity of object oriented python code", "body": "<p>first, the dictionary should be defined in <code>__init__</code> or you have <code>O(n)</code> complexity each time you enter your <code>select_one</code> function (dictionary is built each time, which makes the example in your link wrong)</p>\n\n<p>second, your methods have the same name as your attributes. Change that:</p>\n\n<pre><code>class trial:\n    def __init__(self):\n        self.a = 'a'\n        self.b = 'b'\n        self.map_func = {\n        1 : self.f_a,\n        2 : self.f_b\n        }\n\n    def f_a(self):\n        return self.a\n\n    def f_b(self):\n        return self.b\n\n    def select_one(self, option):\n        return self.map_func[option]()\n\nt = trial()\nprint(t.select_one(1))\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 3734690, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IecaV.jpg?s=128&g=1", "display_name": "Chinmaya B", "link": "https://stackoverflow.com/users/3734690/chinmaya-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 53308079, "answer_count": 1, "score": 2, "last_activity_date": 1542227597, "creation_date": 1542225958, "last_edit_date": 1542227597, "question_id": 53307984, "link": "https://stackoverflow.com/questions/53307984/reducing-cyclomatic-complexity-of-object-oriented-python-code", "title": "Reducing cyclomatic complexity of object oriented python code", "body": "<p>I am trying to reduce cylomatic complexity of code, because according to <a href=\"https://github.com/klen/pylama\" rel=\"nofollow noreferrer\">pylama</a> my definition is 'too complex' and suggested <a href=\"https://lintlyci.github.io/Flake8Rules/rules/C901.html\" rel=\"nofollow noreferrer\">solution</a> includes calling functions with dictionary mappings.</p>\n\n<p>So I tried it on my object oriented code but failed miserably.</p>\n\n<pre><code>class trial:\n    def __init__(self):\n        self.a = 'a'\n        self.b = 'b'\n\n    def a(self):\n        return self.a\n\n    def b(self):\n        return self.b\n\n    def select_one(self, option):\n        map_func = {\n        1 : self.a,\n        2 : self.b\n        }\n        return map_func[option]()\n\nt = trial()\nprint(t.select_one(1))\n</code></pre>\n\n<p>If this is not possible what are the other possible solutions to reduce cyclomatic complexity.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1542226046, "post_id": 53307961, "comment_id": 93496636, "body": "<code>with open(str(fname), &quot;w&quot;) as f:</code> that kills the contents of the file so it doesn&#39;t work"}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1542226438, "post_id": 53307961, "comment_id": 93496799, "body": "I just made an update to that code."}, {"owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "edited": false, "score": 1, "creation_date": 1542226987, "post_id": 53307961, "comment_id": 93497059, "body": "given that you call f.read() opening in &#39;r+&#39; is just wasted resources. better to open once in read and again in write if you are not really going to seek to read AND write."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 1, "creation_date": 1542228468, "post_id": 53307961, "comment_id": 93497717, "body": "This looks like a <code>yaml</code> file, is the entire file in the same format? If so maybe you just need to load the <code>yaml</code> properly and change the keys/values, it&#39;ll be much simpler."}], "answers": [{"comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1542228875, "post_id": 53308171, "comment_id": 93497877, "body": "This will replace <i>everything</i> between the first <code>step</code> to the very last <code>field</code>.  Possibly truncating the entire file to just <code>&quot;global:... fields&quot;</code>"}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1542229610, "post_id": 53308171, "comment_id": 93498178, "body": "I just updated my original code with your code; I incorporated your ideas into mine.  When I run this all files are stripped of all text, so something is definitely off here, but I&#39;m not sure what it is."}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1542229801, "post_id": 53308171, "comment_id": 93498237, "body": "The &#39;steps:.*fields:&#39; won&#39;t work here because it gets the first and last occurrence of both those.  The thing is, I have many of those string patterns in my file, repeating over and over, so doing it that way strips out everything in between the first and last instance of those strings, but I need to preserve that stuff."}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1542230999, "post_id": 53308171, "comment_id": 93498752, "body": "Oh, wait, this seems to work: &quot;steps:.*?fields:&quot; However, when I use that, it still truncates everything in all the files."}, {"owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1542294962, "post_id": 53308171, "comment_id": 93525225, "body": "@Idlehands I did say &quot;Make it as tight as you need to make sure you only replace what you need to and don&#39;t get false positives.&quot; I dont know enough about the file syntax to really give a real answer, OP will have to do that."}, {"owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "reply_to_user": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1542295620, "post_id": 53308171, "comment_id": 93525692, "body": "@ryguy72 maybe you just want to replace the first instance? You can add a &#39;count=1&#39; to the re.sub to make it only replace the first instance. See my edit."}], "tags": [], "owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "is_accepted": false, "score": 1, "last_activity_date": 1542295350, "last_edit_date": 1542295350, "creation_date": 1542226865, "answer_id": 53308171, "question_id": 53307961, "link": "https://stackoverflow.com/questions/53307961/trying-to-do-a-find-replace-across-several-lines-in-several-text-files/53308171#53308171", "title": "Trying to do a Find/Replace Across Several Lines in Several Text Files", "body": "<p>Regex is the best answer here probably. Will make this simple. Your mileage will vary with my example regex. Make it as tight as you need to make sure you only replace what you need to and dont get false positives. </p>\n\n<pre><code>import re\n\n#re.DOTALL means it matches across newlines!    \nregex = re.compile(\"steps:.*?fields:\", flags=re.DOTALL, count=1) \n\nreplace = \"\"\"global:\nglobal:\n  schema_def:\n    fields:\"\"\"\n\ndef do_replace(fname):\n    with open(fname, 'r') as f:\n        in = f.read()\n    with open(fname, 'w') as f:\n        f.write(re.sub(regex, replace, in))\n\nfor fname in glob.glob(path):\n    print(str(fname))\n    do_replace(fname)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1542232114, "last_edit_date": 1542232114, "creation_date": 1542230988, "answer_id": 53309012, "question_id": 53307961, "link": "https://stackoverflow.com/questions/53307961/trying-to-do-a-find-replace-across-several-lines-in-several-text-files/53309012#53309012", "title": "Trying to do a Find/Replace Across Several Lines in Several Text Files", "body": "<p>Since you're doing a general replacement of things between strings, I'd say this calls for a regular expression [EDIT: Sorry, I see you've since replaced your string \"replace\" statements with regexp code]. So if your file is \"myfile.txt\", try this:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; f = open('myfile.txt', 'r')\n&gt;&gt;&gt; content = f.read()\n&gt;&gt;&gt; f.close()\n&gt;&gt;&gt; replacement = ' global:\\n   global:\\n     schema_def:\\n       fields:'\n&gt;&gt;&gt; print re.sub(r\"(\\ssteps\\:)(.*?)(\\sfields\\:)\", replacement, content, flags=re.DOTALL)\n</code></pre>\n\n<p>The output here should be the original contents of \"myfile.txt\" with all of the substitutions.</p>\n\n<p>Instead of editing files directly, the usual convention in Python is to just copy what you need from a file, change it, and write everything back to a new file.  It's less error prone this way, and should be fine unless you're dealing with an astronomically huge amount of content.  So you could replace the last line I have here with something like this:</p>\n\n<pre><code>&gt;&gt;&gt; newcontent = re.sub(r\"(\\ssteps\\:)(.*?)(\\sfields\\:)\", replacement, content, flags=re.DOTALL)\n&gt;&gt;&gt; f = open('newfile.txt', 'w')\n&gt;&gt;&gt; f.write(newcontent)\n&gt;&gt;&gt; f.close()\n</code></pre>\n"}], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53309012, "answer_count": 2, "score": 0, "last_activity_date": 1549870624, "creation_date": 1542225825, "last_edit_date": 1549870624, "question_id": 53307961, "link": "https://stackoverflow.com/questions/53307961/trying-to-do-a-find-replace-across-several-lines-in-several-text-files", "title": "Trying to do a Find/Replace Across Several Lines in Several Text Files", "body": "<p>I have several blocks of text that look like this:</p>\n\n<pre><code>  steps:\n  - class: pipe.steps.extract.Extract\n    conf:\n      unzip_patterns:\n      - .*EstimatesDaily_RealEstate_Q.*_{FD_YYYYMMDD}.*\n    id: extract\n  - class: pipe.steps.validate.Validate\n    conf:\n      schema_def:\n        fields:\n</code></pre>\n\n<p>I want to replace this block of text with this:</p>\n\n<pre><code>  global:\n    global:\n      schema_def:\n        fields:\n</code></pre>\n\n<p>The catch here is that the text crosses several lines in each text file.  Maybe there is an easy workaround for this, not sure.  More troublesome, is that is don't always have '<code>- .*EstimatesDaily_RealEstate_Q.*_{FD_YYYYMMDD}.*</code>'.  Sometimes the text is '<code>- .*EstimatesDaily_RealEstate_Y.*_{FD_YYYYMMDD}.*</code>' or it could be '<code>- .*EstimatesDaily_RealEstate_EAP_Nav.*_{FD_YYYYMMDD}.*</code>'  One thng that is always the same in each block is that it starts with this '  <code>steps:</code>' and ends with this '        <code>fields:</code>'.</p>\n\n<p>My sample code looks like this:</p>\n\n<pre><code>import glob\nimport re\npath = 'C:\\\\Users\\\\ryans\\\\OneDrive\\\\Desktop\\\\output\\\\*.yaml'\nregex = re.compile(\"steps:.*fields:\", re.DOTALL)\nprint(regex)\nreplace = \"\"\"global:\nglobal:\n  schema_def:\n    fields:\"\"\"\nfor fname in glob.glob(path):\n    #print(str(fname))\n    with open(fname, 'r+') as f:\n        text = re.sub(regex, replace, '')\n        f.seek(0)\n        f.write(text)\n        f.truncate()\n</code></pre>\n\n<p>Of course, my example isn't simple.</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning"], "answers": [{"comments": [{"owner": {"reputation": 3820, "user_id": 5623899, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Y5lUH.jpg?s=128&g=1", "display_name": "SumNeuron", "link": "https://stackoverflow.com/users/5623899/sumneuron"}, "edited": false, "score": 0, "creation_date": 1542289128, "post_id": 53320326, "comment_id": 93521379, "body": "So if I wanted to train with batched data, is there a way to predict without batched data or with different sized batches?"}, {"owner": {"reputation": 1485, "user_id": 10025506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0M1u.jpg?s=128&g=1", "display_name": "Olivier Dehaene", "link": "https://stackoverflow.com/users/10025506/olivier-dehaene"}, "reply_to_user": {"reputation": 3820, "user_id": 5623899, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Y5lUH.jpg?s=128&g=1", "display_name": "SumNeuron", "link": "https://stackoverflow.com/users/5623899/sumneuron"}, "edited": false, "score": 1, "creation_date": 1542291614, "post_id": 53320326, "comment_id": 93523036, "body": "Almost all tf operations expect batched data. For example, convolutions expect rank 4 inputs. So, except some very rare cases, you never want to use unbatched data. You can have batch_size = 1 though. Different sized batches cause no issue."}], "tags": [], "owner": {"reputation": 1485, "user_id": 10025506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0M1u.jpg?s=128&g=1", "display_name": "Olivier Dehaene", "link": "https://stackoverflow.com/users/10025506/olivier-dehaene"}, "is_accepted": true, "score": 1, "last_activity_date": 1542290008, "last_edit_date": 1542290008, "creation_date": 1542287674, "answer_id": 53320326, "question_id": 53307954, "link": "https://stackoverflow.com/questions/53307954/tensorflow-custom-estimator-predict-throwing-value-error/53320326#53320326", "title": "TensorFlow Custom Estimator predict throwing value error", "body": "<pre><code>to_predict = random_onehot((1, SEQUENCE_LENGTH, SEQUENCE_CHANNELS))\\\n        .astype(tf_type_string(I_DTYPE))\npred_features = {'input_tensors': to_predict}\n\npred_ds = tf.data.Dataset.from_tensor_slices(pred_features)\npredicted = est.predict(lambda: pred_ds, yield_single_examples=True)\n\nnext(predicted)\n</code></pre>\n\n<blockquote>\n  <p>ValueError: Tensor(\"IteratorV2:0\", shape=(), dtype=resource) must be from the same graph as Tensor(\"TensorSliceDataset:0\", shape=(), dtype=variant).</p>\n</blockquote>\n\n<p>When you use the <code>tf.data.Dataset</code> module, it actually defines an input graph which is independant from the model graph. What happens here is that you first created a small graph by calling <code>tf.data.Dataset.from_tensor_slices()</code>, then the estimator API created a second graph by calling <code>dataset.make_one_shot_iterator()</code> automatically. These 2 graphs can't communicate so it throws an error.</p>\n\n<p>To circumvent this, you should never create a dataset outside of estimator.train/evaluate/predict. This is why everything data related is wrapped inside input functions.</p>\n\n<pre><code>def predict_input_fn(data, batch_size=1):\n  dataset = tf.data.Dataset.from_tensor_slices(data)\n  return dataset.batch(batch_size).prefetch(None)\n\npredicted = est.predict(lambda: predict_input_fn(pred_features), yield_single_examples=True)\nnext(predicted)\n</code></pre>\n\n<p>Now, the graph is not created outside of the predict call.</p>\n\n<p>I also added <code>dataset.batch()</code> because the rest of your code expect batched data and it was throwing a shape error. Prefetch just speed things up.</p>\n"}], "owner": {"reputation": 3820, "user_id": 5623899, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Y5lUH.jpg?s=128&g=1", "display_name": "SumNeuron", "link": "https://stackoverflow.com/users/5623899/sumneuron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 1, "accepted_answer_id": 53320326, "answer_count": 1, "score": 1, "last_activity_date": 1542290008, "creation_date": 1542225774, "last_edit_date": 1592644375, "question_id": 53307954, "link": "https://stackoverflow.com/questions/53307954/tensorflow-custom-estimator-predict-throwing-value-error", "title": "TensorFlow Custom Estimator predict throwing value error", "body": "<p>Note: this question has an accompanying, documented <a href=\"https://colab.research.google.com/drive/1GKAqEo7qSr6kMAgxPrOrudA5eLndQ6Ub\" rel=\"nofollow noreferrer\">Colab</a> notebook.</p>\n<p>TensorFlow's documentation can, at times, leave a lot to be desired. Some of the older docs for lower level apis seem to have been expunged, and most newer documents point towards using higher level apis such as TensorFlow's subset of <code>keras</code> or <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/Estimator\" rel=\"nofollow noreferrer\"><code>estimators</code></a>. This would not be so problematic if the higher level apis did not so often rely closely on their lower levels. Case in point, <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/Estimator\" rel=\"nofollow noreferrer\"><code>estimators</code></a> (especially the <code>input_fn</code> when using TensorFlow Records).</p>\n<p>Over the following Stack Overflow posts:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/52035692/tensorflow-v1-10-store-images-as-byte-strings-or-per-channel\">Tensorflow v1.10: store images as byte strings or per channel?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52064866/tensorflow-1-10-tfrecorddataset-recovering-tfrecords\">Tensorflow 1.10 TFRecordDataset - recovering TFRecords</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52874647/tensorflow-v1-10-why-is-an-input-serving-receiver-function-needed-when-checkpoi\">Tensorflow v1.10+ why is an input serving receiver function needed when checkpoints are made without it?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52641737/tensorflow-1-10-custom-estimator-early-stopping-with-train-and-evaluate\">TensorFlow 1.10+ custom estimator early stopping with train_and_evaluate</a></li>\n<li><a href=\"https://stackoverflow.com/questions/53226898/tensorflow-custom-estimator-stuck-when-calling-evaluate-after-training\">TensorFlow custom estimator stuck when calling evaluate after training</a></li>\n</ul>\n<p>and with the gracious assistance of the TensorFlow / StackOverflow community, we have moved closer to doing what the TensorFlow <a href=\"https://www.tensorflow.org/guide/custom_estimators\" rel=\"nofollow noreferrer\">&quot;Creating Custom Estimators&quot; guide</a> has not, demonstrating how to make an estimator one might actually use in practice (rather than toy example) e.g. one which:</p>\n<ul>\n<li>has a validation set for early stopping if performance worsen,</li>\n<li>reads from TF Records because many datasets are larger than the TensorFlow recommend 1Gb for in memory, and</li>\n<li>that saves its best version whilst training</li>\n</ul>\n<p>While I still have many questions regarding this (from the best way to encode data into a TF Record, to what exactly the <code>serving_input_fn</code> expects), there is one question that stands out more prominently than the rest:</p>\n<p>How to predict with the custom estimator we just made?</p>\n<p>Under the documentation for <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/Estimator#predict\" rel=\"nofollow noreferrer\">predict</a>, it states:</p>\n<blockquote>\n<p><code>input_fn</code>: A function that constructs the features. Prediction continues until <code>input_fn</code> raises an end-of-input exception (<code>tf.errors.OutOfRangeError</code> or <code>StopIteration</code>). See Premade Estimators for more information. The function should construct and return one of the following:</p>\n<ul>\n<li>A tf.data.Dataset object: Outputs of Dataset object must have same constraints as below.</li>\n<li>features: A tf.Tensor or a dictionary of string feature name to Tensor. features are consumed by model_fn. They should satisfy the expectation of model_fn from inputs.</li>\n<li>A tuple, in which case the first item is extracted as features.</li>\n</ul>\n</blockquote>\n<p>(perhaps) Most likely, if one is using <code>estimator.predict</code>, they are using data in memory such as a dense tensor (because a held out test set would likely go through <code>evaluate</code>).</p>\n<p>So I, in the accompanying <a href=\"https://colab.research.google.com/drive/1GKAqEo7qSr6kMAgxPrOrudA5eLndQ6Ub\" rel=\"nofollow noreferrer\">Colab</a>, create a single dense example, wrap it up in a <code>tf.data.Dataset</code>, and call <code>predict</code> to get a <code>ValueError</code>.</p>\n<p>I would greatly appreciate it if someone could explain to me how I can:</p>\n<ol>\n<li>load my saved estimator</li>\n<li>given a dense, in memory example, predict the output with the estimator</li>\n</ol>\n"}]