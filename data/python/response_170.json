[{"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 1, "last_activity_date": 1523492516, "last_edit_date": 1523492516, "creation_date": 1523492139, "answer_id": 49786134, "question_id": 49786024, "link": "https://stackoverflow.com/questions/49786024/how-do-i-efficiently-update-dataframe-values-by-variable-group-based-on-multiple/49786134#49786134", "title": "How do I efficiently update dataframe values by variable group based on multiple criteria?", "body": "<p>One solution is to create a temporary <code>count</code> and then compare values.</p>\n\n<pre><code>vs = df.groupby(\"new_group\").size().to_dict()\n# vs =  {'a': 4, 'c': 5, 'b': 3}\n\ndf[\"count\"] = df[\"new_group\"].apply(lambda k: vs[k])\n\ndef comp(row):\n    if row[\"value\"] is np.nan: return row[\"count\"]\n    return min(row[\"value\"], row[\"count\"])\n\ndf[\"new_vals\"] = df.apply(comp, 1)\n# equivalent to \n# df = df[['value', 'count']].min(axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>new_group  value  count  new_vals\n   0   a    2.0      4       2.0\n   1   a    2.0      4       2.0\n   2   a    2.0      4       2.0\n   3   a    2.0      4       2.0\n   4   b    NaN      3       3,0\n   5   b    NaN      3       3.0\n   6   b    NaN      3       3.0\n   7   c    6.0      5       5.0\n   8   c    6.0      5       5.0       \n   9   c    6.0      5       5.0\n   10  c    6.0      5       5.0\n   11  c    6.0      5       5.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "is_accepted": false, "score": 1, "last_activity_date": 1523492619, "last_edit_date": 1523492619, "creation_date": 1523492249, "answer_id": 49786150, "question_id": 49786024, "link": "https://stackoverflow.com/questions/49786024/how-do-i-efficiently-update-dataframe-values-by-variable-group-based-on-multiple/49786150#49786150", "title": "How do I efficiently update dataframe values by variable group based on multiple criteria?", "body": "<p>Here's one way to do it. The idea is to calculate the number of rows per <code>name_group</code> and merge that into your dataframe as a new column (called <code>count</code>). Then <code>new_vals</code> will just be calculated as the minimum of the <code>value</code> and <code>count</code> columns:</p>\n\n<pre><code>df = df.merge(df.groupby('name_group').size().reset_index(name='count'), on='name_group')\n\ndf['new_vals'] = df[['value', 'count']].min(axis=1)\n</code></pre>\n\n<p>Then you can drop the <code>count</code> column if you want, using <code>df.drop(columns='count', inplace=True)</code>, to give:</p>\n\n<pre><code>     name name_group  value  new_vals\n0    foo1          a    2.0       2.0\n1    foo2          a    2.0       2.0\n2    foo3          a    2.0       2.0\n3    foo4          a    2.0       2.0\n4    bar1          b    NaN       3.0\n5    bar2          b    NaN       3.0\n6    bar3          b    NaN       3.0\n7   buzz1          c    6.0       5.0\n8   buzz2          c    6.0       5.0\n9   buzz3          c    6.0       5.0\n10  buzz4          c    6.0       5.0\n11  buzz5          c    6.0       5.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 659, "user_id": 4191864, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a4bfea5ec30dafc4ceab42c5f4242694?s=128&d=identicon&r=PG", "display_name": "Nizag", "link": "https://stackoverflow.com/users/4191864/nizag"}, "edited": false, "score": 0, "creation_date": 1523567578, "post_id": 49786352, "comment_id": 86626665, "body": "This doesn&#39;t seem to work with the NaN values. I&#39;m getting a type error when comparing the values of s to the value column.   My error message is: TypeError: &#39;&gt;&#39; not supported between instances of &#39;int&#39; and &#39;str&#39;"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1523493996, "creation_date": 1523493996, "answer_id": 49786352, "question_id": 49786024, "link": "https://stackoverflow.com/questions/49786024/how-do-i-efficiently-update-dataframe-values-by-variable-group-based-on-multiple/49786352#49786352", "title": "How do I efficiently update dataframe values by variable group based on multiple criteria?", "body": "<p>I will using <code>transform</code> and <code>np.where</code></p>\n\n<pre><code>s=df.groupby('name_group').name_group.transform('count')\ndf['New']=np.where(s&gt;df.value,df.value,s)\ndf\nOut[13]: \n     name name_group  value  New\n0    foo1          a    2.0  2.0\n1    foo2          a    2.0  2.0\n2    foo3          a    2.0  2.0\n3    foo4          a    2.0  2.0\n4    bar1          b    NaN  3.0\n5    bar2          b    NaN  3.0\n6    bar3          b    NaN  3.0\n7   buzz1          c    6.0  5.0\n8   buzz2          c    6.0  5.0\n9   buzz3          c    6.0  5.0\n10  buzz4          c    6.0  5.0\n11  buzz5          c    6.0  5.0\n</code></pre>\n"}], "owner": {"reputation": 659, "user_id": 4191864, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a4bfea5ec30dafc4ceab42c5f4242694?s=128&d=identicon&r=PG", "display_name": "Nizag", "link": "https://stackoverflow.com/users/4191864/nizag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1523493996, "creation_date": 1523491094, "last_edit_date": 1523491659, "question_id": 49786024, "link": "https://stackoverflow.com/questions/49786024/how-do-i-efficiently-update-dataframe-values-by-variable-group-based-on-multiple", "title": "How do I efficiently update dataframe values by variable group based on multiple criteria?", "body": "<p>I have a dataframe as follows:</p>\n\n<p>input_df: </p>\n\n<pre><code>name  name_group  value\nfoo1          a       2\nfoo2          a       2\nfoo3          a       2\nfoo4          a       2\nbar1          b\nbar2          b\nbar3          b\nbuzz1         c       6\nbuzz2         c       6\nbuzz3         c       6\nbuzz4         c       6\nbuzz5         c       6\n</code></pre>\n\n<p>Where every row in each name_group has the same \"value\", so in this case every name in name_group \"a\" has the same \"value\", every name in name_group \"b\" has the same \"value\", etc.  </p>\n\n<p>I want to create a new column \"new_vals\" that is equal to the min(# of rows in that \"name_group\", \"value\" column). If there are missing values in the \"value\" column for any \"name_group\", it should just use the # of rows in that \"name_group\". For my example dataframe, the desired output is:</p>\n\n<p>output_df:</p>\n\n<pre><code>name  name_group  value   new_vals\nfoo1          a       2          2\nfoo2          a       2          2\nfoo3          a       2          2\nfoo4          a       2          2\nbar1          b                  3\nbar2          b                  3\nbar3          b                  3\nbuzz1         c       6          5\nbuzz2         c       6          5\nbuzz3         c       6          5\nbuzz4         c       6          5\nbuzz5         c       6          5\n</code></pre>\n\n<p>Currently, the way I am achieving this is by looping through each unique value in the \"name_group\" column, finding the # of rows in that name_group, comparing it to the value in the \"value\" column, then setting the value of the \"new_val\" column based on the min value between the two. The results of this for each \"name_group\" are concatenated to another dataframe until i have my final output.</p>\n\n<p>While this method works, I feel as though there must be a more efficient way to do this rather than taking subsets the starting dataframe, processing each \"name_group\" separately, then combining everything back together. Does anyone have a more pythonic/efficient way of reproducing this functionality?</p>\n\n<p>Here's some code reflecting my current process:</p>\n\n<pre><code>output_df = pd.DataFrame()\nfor name_group in input_df['name_group'].unique():\n    # process the data one name group at a time\n    temp_df = input_df.loc[input_df['name_group'] == name_group]\n\n    max_val = temp_df['value'].max()\n    name_group_cnt = temp_df.shape[0]\n\n    # if the \"value\" column is empty, set new_val equal to the number of\n    # rows in that name_group\n    if max_val == '':\n        new_val = name_group_cnt\n    else:\n        new_val = min(max_val, name_group_cnt)\n\n    temp_df['new_val'] = new_val\n    output_df = pd.concat([output_df, temp_df])\n</code></pre>\n"}, {"tags": ["python", "ubuntu", "debugging", "ckan"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 1993667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c364e78db6cfaed5f88a2a3068070956?s=128&d=identicon&r=PG", "display_name": "Afshin", "link": "https://stackoverflow.com/users/1993667/afshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1539868392, "creation_date": 1539868392, "answer_id": 52874893, "question_id": 49786002, "link": "https://stackoverflow.com/questions/49786002/debug-a-ckan-site-using-pycharm/52874893#52874893", "title": "Debug a CKAN site using PyCharm", "body": "<p>I did somehow successful running it in pycharm. But I also looking forward for a clear description of how to do it.\nI did \"<a href=\"https://docs.ckan.org/en/latest/maintaining/installing/install-from-source.html\" rel=\"nofollow noreferrer\">install it from source</a>\" to make sure that I have every dependency that it needs. Then I opened /usr/lib/ckan/default/src/ckan in pycharm and also make configuration for running it by follwing this <a href=\"http://byatool.com/uncategorized/how-to-debug-pylons-with-pycharm/\" rel=\"nofollow noreferrer\">link</a> :</p>\n\n<p>script path: /home/${user}/ckan/lib/default/bin/paster</p>\n\n<p>parameters: serve /etc/ckan/default/development.ini</p>\n"}], "owner": {"reputation": 21, "user_id": 9605339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72aeb6fe4d90c072071a271acc992245?s=128&d=identicon&r=PG&f=1", "display_name": "Zeus", "link": "https://stackoverflow.com/users/9605339/zeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539868392, "creation_date": 1523490986, "question_id": 49786002, "link": "https://stackoverflow.com/questions/49786002/debug-a-ckan-site-using-pycharm", "title": "Debug a CKAN site using PyCharm", "body": "<p>I've successfully installed the CKAN open source solution for Open Data on Ubuntu. I would now like to debug the website in PyCharm. I've tried setting the run/debug configurations as shown in the attached screen shot and I've placed a breakpoint in the file dashboard.py. But I can't seem to hit my break point when I bring up the dashboard page in the browser. Would anyone know what I'm missing?</p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1523496268, "post_id": 49785938, "comment_id": 86588495, "body": "Your first question is answered in: <a href=\"https://stackoverflow.com/q/45874816/2449192\">stackoverflow.com/q/45874816/2449192</a> (disclaimer, that&#39;s my answer). Please only ask one question per post... the answer to your second question is because that&#39;s how the conda maintainers decided to do it. Since conda install and pip install are separate operations, and not all packages are available via both commands, it make sense to separate them."}, {"owner": {"reputation": 434, "user_id": 4101137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/17f389af9053b17ab7d5749fcb20b654?s=128&d=identicon&r=PG&f=1", "display_name": "user49404", "link": "https://stackoverflow.com/users/4101137/user49404"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1523548453, "post_id": 49785938, "comment_id": 86616677, "body": "Didn&#39;t notice that thread, thanks!"}], "owner": {"reputation": 434, "user_id": 4101137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/17f389af9053b17ab7d5749fcb20b654?s=128&d=identicon&r=PG&f=1", "display_name": "user49404", "link": "https://stackoverflow.com/users/4101137/user49404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523490348, "creation_date": 1523490348, "question_id": 49785938, "link": "https://stackoverflow.com/questions/49785938/why-does-my-anaconda-yml-file-reference-two-different-versions-of-python", "title": "Why does my anaconda *.yml file reference two different versions of python?", "body": "<p>I'm trying to understand how to read the anaconda *.yml files better, and couldn't find much documentation online:</p>\n\n<p>name: AdvML</p>\n\n<p>channels:</p>\n\n<ul>\n<li>defaults</li>\n</ul>\n\n<p>dependencies:</p>\n\n<ul>\n<li><p>jupyter=1.0.0=py36_3</p></li>\n<li><p>numpy=1.13.1=py36_0</p></li>\n<li><p>pip=9.0.1=py36_1</p></li>\n<li><p>python=3.6.2=0</p></li>\n<li><p>scikit-learn=0.19.0=np113py36_0</p></li>\n<li><p>matplotlib=2.0.2=np113py36_0</p></li>\n<li><p>pip:</p>\n\n<ul>\n<li>tensorflow==1.3.0</li>\n</ul></li>\n</ul>\n\n<p>So I have two questions:</p>\n\n<ol>\n<li><p>What does - jupyter=1.0.0=py36_3 mean? I assumed it means that the dependency is jupyter version 1.0.0, but what does =py36_3 mean? And why does the following line have =py36_0? I don't understand why particular package versions are being referenced to particular python versions, and why different python versions are being referenced.</p></li>\n<li><p>Why is there a pip heading? If I activated an anaconda environment and then used pip to install a package (eg tensorflow in this case), why isn't tensorflow just part of the regular dependency list, rather than a separate pip list?</p></li>\n</ol>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 9362220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc71acb0f39975a4368597cf3430f2b?s=128&d=identicon&r=PG&f=1", "display_name": "BigData", "link": "https://stackoverflow.com/users/9362220/bigdata"}, "edited": false, "score": 0, "creation_date": 1523556930, "post_id": 49793781, "comment_id": 86621244, "body": "Hi Stev, my last part give me a error &quot;ValueError: Can&#39;t handle mix of binary and multilabel-indicator.&quot;             accuracy = accuracy_score(y_test, predicted)     print(round(accuracy,4,)*100, &quot;%&quot;)  Do you know how to fix it?"}, {"owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "reply_to_user": {"reputation": 337, "user_id": 9362220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc71acb0f39975a4368597cf3430f2b?s=128&d=identicon&r=PG&f=1", "display_name": "BigData", "link": "https://stackoverflow.com/users/9362220/bigdata"}, "edited": false, "score": 0, "creation_date": 1523607645, "post_id": 49793781, "comment_id": 86639097, "body": "@BigData,Ooops my bad, I didn&#39;t run the rest of your code. In that case, you only need to take the second column. That column is 1 if class 1 and 0 if not, which my implication is class 0. Check my edit."}], "tags": [], "owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "is_accepted": true, "score": 20, "last_activity_date": 1523607551, "last_edit_date": 1523607551, "creation_date": 1523527623, "answer_id": 49793781, "question_id": 49785904, "link": "https://stackoverflow.com/questions/49785904/how-to-set-threshold-to-scikit-learn-random-forest-model/49793781#49793781", "title": "how to set threshold to scikit learn random forest model", "body": "<p>Assuming you are doing binary classification, it's quite easy:</p>\n\n<pre><code>threshold = 0.4\n\npredicted_proba = random_forest.predict_proba(X_test)\npredicted = (predicted_proba [:,1] &gt;= threshold).astype('int')\n\naccuracy = accuracy_score(y_test, predicted)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 9362220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc71acb0f39975a4368597cf3430f2b?s=128&d=identicon&r=PG&f=1", "display_name": "BigData", "link": "https://stackoverflow.com/users/9362220/bigdata"}, "is_accepted": false, "score": 1, "last_activity_date": 1602539513, "last_edit_date": 1602539513, "creation_date": 1523556900, "answer_id": 49803398, "question_id": 49785904, "link": "https://stackoverflow.com/questions/49785904/how-to-set-threshold-to-scikit-learn-random-forest-model/49803398#49803398", "title": "how to set threshold to scikit learn random forest model", "body": "<pre><code>random_forest = RandomForestClassifier(n_estimators=100)\nrandom_forest.fit(X_train, y_train)\n\nthreshold = 0.4\n\npredicted = random_forest.predict_proba(X_test)\npredicted[:,0] = (predicted[:,0] &lt; threshold).astype('int')\npredicted[:,1] = (predicted[:,1] &gt;= threshold).astype('int')\n\n\naccuracy = accuracy_score(y_test, predicted)\nprint(round(accuracy,4,)*100, &quot;%&quot;)\n</code></pre>\n<p>this comes with an error refers to the last accuracy part&quot; ValueError: Can't handle mix of binary and multilabel-indicator&quot;</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12860153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05902ad72786d7761bc768c3688c939?s=128&d=identicon&r=PG&f=1", "display_name": "pawan", "link": "https://stackoverflow.com/users/12860153/pawan"}, "is_accepted": false, "score": 0, "last_activity_date": 1614693257, "creation_date": 1614693257, "answer_id": 66440775, "question_id": 49785904, "link": "https://stackoverflow.com/questions/49785904/how-to-set-threshold-to-scikit-learn-random-forest-model/66440775#66440775", "title": "how to set threshold to scikit learn random forest model", "body": "<p><strong>sklearn.metrics.accuracy_score</strong> takes 1 d array but your <strong>predicted</strong> array is 2-d. This comes with an error.\n<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html</a></p>\n"}], "owner": {"reputation": 337, "user_id": 9362220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc71acb0f39975a4368597cf3430f2b?s=128&d=identicon&r=PG&f=1", "display_name": "BigData", "link": "https://stackoverflow.com/users/9362220/bigdata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15429, "favorite_count": 2, "accepted_answer_id": 49793781, "answer_count": 3, "score": 8, "last_activity_date": 1614693257, "creation_date": 1523490050, "last_edit_date": 1523553542, "question_id": 49785904, "link": "https://stackoverflow.com/questions/49785904/how-to-set-threshold-to-scikit-learn-random-forest-model", "title": "how to set threshold to scikit learn random forest model", "body": "<p>After seeing the precision_recall_curve, if I want to set threshold = 0.4, how to implement 0.4 into my random forest model (binary classification),  for any probability &lt;0.4, label it as 0, for any >=0.4, label it as 1.</p>\n\n<pre><code>from sklearn.ensemble import RandomForestClassifier\n  random_forest = RandomForestClassifier(n_estimators=100, oob_score=True, random_state=12)\n  random_forest.fit(X_train, y_train)\nfrom sklearn.metrics import accuracy_score\n  predicted = random_forest.predict(X_test)\naccuracy = accuracy_score(y_test, predicted)\n</code></pre>\n\n<p>Documentation <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_recall_curve.html\" rel=\"noreferrer\">Precision recall</a></p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9633229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942bccc500192056acf0b194684d2e46?s=128&d=identicon&r=PG&f=1", "display_name": "whadhack", "link": "https://stackoverflow.com/users/9633229/whadhack"}, "edited": false, "score": 1, "creation_date": 1523639732, "post_id": 49790520, "comment_id": 86659651, "body": "Thanks, though not clear to me how it exactly works.  So looks like you are saying, the graph is actually constructed during the run phase when all the shape information are available.   To handle different shapes for every run, the graph  has to be reconstructed on every run   That brings up another questions.   As the  graphs are different in every run.  there must different set of weights for every run too .   How does the model handle that ?"}], "tags": [], "owner": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "is_accepted": false, "score": 1, "last_activity_date": 1523519031, "last_edit_date": 1523519031, "creation_date": 1523518295, "answer_id": 49790520, "question_id": 49785875, "link": "https://stackoverflow.com/questions/49785875/tf-placeholder-and-none/49790520#49790520", "title": "tf.placeholder and None", "body": "<p><strong>Background:</strong>\nTensorFlow propagates shapes information across the entire graph given the incoming shape during the graph-construction phase. The <a href=\"https://github.com/tensorflow/tensorflow/blob/359d6f9716c0bb9bd8201ce600da98b0481a8049/tensorflow/examples/adding_an_op/zero_out_op_kernel_3.cc#L27\" rel=\"nofollow noreferrer\">code therefore looks like</a>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>.SetShapeFn([](shape_inference::InferenceContext* c) {\n      c-&gt;set_output(0, c-&gt;input(0)); // output-shape &lt;- input-shape\n      return Status::OK();\n    });\n</code></pre>\n\n<p>So each graph operation can infer its output shapes. Though, there are some ops, which do not know their output shape:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>.SetShapeFn(tensorflow::shape_inference::UnknownShape);\n</code></pre>\n\n<p>This behaves like your placeholder. It's fine. </p>\n\n<p><strong>Answer:</strong>\nAnd there are no performance penalties, as the dimensions are extracted during <a href=\"https://github.com/tensorflow/tensorflow/blob/359d6f9716c0bb9bd8201ce600da98b0481a8049/tensorflow/examples/adding_an_op/zero_out_op_kernel_3.cc#L59\" rel=\"nofollow noreferrer\">each and every compute call</a>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Set all the elements of the output tensor to 0\nconst int N = input.size();  // EXTRACTED EVERYTIME WHEN CALLED\nfor (int i = 0; i &lt; N; i++) {\n  output(i) = 0;\n}\n</code></pre>\n\n<p>So there is only <em>one</em> graph.</p>\n\n<p><em>Still</em>, providing the shape information in the placeholder is helpful for yourself and should be considered as best practice when possible. They can ensure your graph being correct. Think of using the output of an operation in two different ways, which are contradictory, e.g. same dense-layer applied to two different image sizes. \nYou will notice this issue directly during the construction of the graph. In addition, the raised error message from TensorFlow is likely to be more comprehensible. It is then a kind of compile-time error rather than a run-time error.</p>\n\n<p>Sidenote: Some potential future graph operations may need to know the exact shape beforehand. (But I haven't found a single one in the source, yet.)</p>\n"}], "owner": {"reputation": 41, "user_id": 9633229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942bccc500192056acf0b194684d2e46?s=128&d=identicon&r=PG&f=1", "display_name": "whadhack", "link": "https://stackoverflow.com/users/9633229/whadhack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523519031, "creation_date": 1523489798, "question_id": 49785875, "link": "https://stackoverflow.com/questions/49785875/tf-placeholder-and-none", "title": "tf.placeholder and None", "body": "<p>How does Tensorflow handle None in tf.placeholder shape ? Is a new graph with different size input gets created for each run ? Is there any performance penalty in training/testing as a result ? </p>\n\n<pre><code>x = tf.placeholder(tf.float32, shape=[None, None, None, None])\n\nlten = list of various shapes of rank 4 tensors. \nfor ten in lten:\n   feed_dict = {x: ten }\n   y = sess.run(y, feed_dict= feed_dict)\n</code></pre>\n\n<p>The concrete values for None could be different in the above as you can see. </p>\n"}, {"tags": ["python", "python-3.x", "file"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 4, "creation_date": 1523491401, "post_id": 49785865, "comment_id": 86587512, "body": "The &quot;opaqueness&quot; of <code>tell()</code> on a file opened in text mode simply means that the result may not match the number of characters you&#39;ve received from the file, due to end-of-line conversions and whatever other platform-specific differences there might be between text and binary files.  All it&#39;s good for is <code>seek()</code>ing back to the same position later.  However, the value is still an ordinary integer, there&#39;s nothing keeping you from printing it out if you want."}], "answers": [{"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1523494489, "post_id": 49786016, "comment_id": 86588129, "body": "The OP isn&#39;t explicitly calling <code>next()</code>...and the rest of your answer sounds mostly like pure speculation to me."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1523494930, "post_id": 49786016, "comment_id": 86588217, "body": "@martineau: There&#39;s no explicit <code>next</code> call, but <code>for</code> implicitly calls <code>next</code>. As for the rest of the answer, it is largely speculative, but the old <code>next</code>/other methods incompatibility is documented, and the implementation <i>is</i> skipping work when telling is disabled."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1523500325, "post_id": 49786016, "comment_id": 86589358, "body": "@martineau: The answer should now be much less speculative."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1523504443, "post_id": 49786016, "comment_id": 86590224, "body": "That&#39;s definitely an improvement, but I think you also ought to at least explain to the OP how their <code>for l in file:</code> is causing an implicit call to <code>next()</code> because that&#39;s plainly not obvious and they don&#39;t seem to understand how <code>file</code>s and iterators work."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1523505094, "post_id": 49786016, "comment_id": 86590416, "body": "@martineau: Explanation expanded."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1543370410, "post_id": 49786016, "comment_id": 93891627, "body": "This is heavy on the root-cause and the history of why, but offers no solution. The solution mentioned <a href=\"https://stackoverflow.com/a/42150352/202229\">here</a> is if you want pushback (or arbitrary <code>seek&#47;tell</code>ing) you can&#39;t use <code>for line in f:</code> to iterate, you must do <code>line = f.readline()</code>, <code>while line</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1543377945, "post_id": 49786016, "comment_id": 93893290, "body": "@smci: Well, yeah. The questioner already found (and linked) a post with workarounds; they asked specifically for what the error means. I suppose I&#39;ll add a bit about a workaround anyway."}, {"owner": {"reputation": 667, "user_id": 1968203, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d22b798abdbe81054291772b539dbdeb?s=128&d=identicon&r=PG", "display_name": "Alexander Cska", "link": "https://stackoverflow.com/users/1968203/alexander-cska"}, "edited": false, "score": 0, "creation_date": 1559243586, "post_id": 49786016, "comment_id": 99368754, "body": "@user2357112 Thank you so much for telling indicating this workaround. It really saved my day."}, {"owner": {"reputation": 2350, "user_id": 736151, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AWapc.jpg?s=128&g=1", "display_name": "Jo&#235;l", "link": "https://stackoverflow.com/users/736151/jo%c3%abl"}, "edited": false, "score": 0, "creation_date": 1561032204, "post_id": 49786016, "comment_id": 99936538, "body": "Very nice workaround, with very few impact on code structure. Thanks!"}, {"owner": {"reputation": 3414, "user_id": 495838, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wmbp4.jpg?s=128&g=1", "display_name": "saeedgnu", "link": "https://stackoverflow.com/users/495838/saeedgnu"}, "edited": false, "score": 0, "creation_date": 1604155127, "post_id": 49786016, "comment_id": 114263432, "body": "We can&#39;t do this for <code>csv.reader</code>, the only thing we can do is <code>next(reader)</code> or iteration, any suggestions?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 3414, "user_id": 495838, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wmbp4.jpg?s=128&g=1", "display_name": "saeedgnu", "link": "https://stackoverflow.com/users/495838/saeedgnu"}, "edited": false, "score": 0, "creation_date": 1604180171, "post_id": 49786016, "comment_id": 114269761, "body": "@saeedgnu: <code>csv.reader</code> objects don&#39;t have a <code>tell</code> method. Are you talking about calling <code>tell</code> on the underlying file? You can pass <code>iter(file.readline, &#39;&#39;)</code> to the reader to avoid disabling <code>tell</code> on the underlying file."}, {"owner": {"reputation": 3414, "user_id": 495838, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wmbp4.jpg?s=128&g=1", "display_name": "saeedgnu", "link": "https://stackoverflow.com/users/495838/saeedgnu"}, "edited": false, "score": 0, "creation_date": 1604233873, "post_id": 49786016, "comment_id": 114278639, "body": "No, I needed to pass the file object to <code>csv.reader</code>, but still use <code>fileobj.tell()</code>, I found a solution myself, I just wrapped the file object to keep track of current position, here: <a href=\"https://github.com/ilius/pyglossary/blob/master/pyglossary/plugins/csv_pyg.py#L58\" rel=\"nofollow noreferrer\">github.com/ilius/pyglossary/blob/master/pyglossary/plugins/&hellip;</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 3414, "user_id": 495838, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wmbp4.jpg?s=128&g=1", "display_name": "saeedgnu", "link": "https://stackoverflow.com/users/495838/saeedgnu"}, "edited": false, "score": 0, "creation_date": 1604234606, "post_id": 49786016, "comment_id": 114278850, "body": "@saeedgnu: It looks like passing <code>iter(file.readline, &#39;&#39;)</code> to <code>csv.reader</code> works for your use case. Your wrapper is dangerous - it&#39;s got a whole bunch of methods inherited from <code>io.TextIOWrapper</code> that your code doesn&#39;t interact properly with, including things like <code>__exit__</code>, <code>read</code>, and <code>seek</code>. It doesn&#39;t look like your wrapper has a reason to inherit from TextIOWrapper."}, {"owner": {"reputation": 3414, "user_id": 495838, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wmbp4.jpg?s=128&g=1", "display_name": "saeedgnu", "link": "https://stackoverflow.com/users/495838/saeedgnu"}, "edited": false, "score": 0, "creation_date": 1604239888, "post_id": 49786016, "comment_id": 114280295, "body": "Thanks, I fixed that and inherit from object. Not dangerous anymore!  Passing <code>iter(fileobj.readline, &#39;&#39;)</code> to <code>csv.reeder</code> or calling <code>readline()</code> inside <code>__next__</code> makes it ~3.3 times slower for me. So why do it?"}, {"owner": {"reputation": 3414, "user_id": 495838, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wmbp4.jpg?s=128&g=1", "display_name": "saeedgnu", "link": "https://stackoverflow.com/users/495838/saeedgnu"}, "edited": false, "score": 0, "creation_date": 1604240008, "post_id": 49786016, "comment_id": 114280330, "body": "BTW my use case is reading from <code>.csv.gz</code> for example, while showing a progress bar to user (<code>.tell()</code> is for progress  bar)"}, {"owner": {"reputation": 3414, "user_id": 495838, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wmbp4.jpg?s=128&g=1", "display_name": "saeedgnu", "link": "https://stackoverflow.com/users/495838/saeedgnu"}, "edited": false, "score": 0, "creation_date": 1604240330, "post_id": 49786016, "comment_id": 114280445, "body": "The ratio of running time varies from 3 to 3.5."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 19, "last_activity_date": 1598820874, "last_edit_date": 1598820874, "creation_date": 1523491056, "answer_id": 49786016, "question_id": 49785865, "link": "https://stackoverflow.com/questions/49785865/meaning-of-oserror-telling-position-disabled-by-next-call-error/49786016#49786016", "title": "Meaning of &quot;OSError: telling position disabled by next() call&quot; error?", "body": "<p>The message means exactly what it says: because you have called <code>next()</code> on the file, the use of <code>tell()</code> on that file has been disabled.</p>\n<p>It might not look like you've called <code>next</code>, but the <code>for</code> loop calls it implicitly. A <code>for</code> loop:</p>\n<pre><code>for element in thing:\n    do_stuff_with(element)\n</code></pre>\n<p>is syntactical sugar for</p>\n<pre><code>iterator = iter(thing) # the real implementation doesn't use a variable\nwhile True:\n    try:\n        element = next(iterator) # here's the next() call\n    except StopIteration:\n        break\n    do_stuff_with(element)\n</code></pre>\n<p>For a file, <code>iter(file)</code> returns the file, and the loop calls <code>next</code> on the file.</p>\n<hr />\n<p>As for why calling <code>next</code> disables <code>tell()</code>, this is for efficiency. It only happens for text files (specifically <code>io.TextIOWrapper</code>), which have to do a <a href=\"https://github.com/python/cpython/blob/v3.6.5/Modules/_io/textio.c#L1449\" rel=\"nofollow noreferrer\">bunch</a> of <a href=\"https://github.com/python/cpython/blob/v3.6.5/Modules/_io/textio.c#L1533\" rel=\"nofollow noreferrer\">extra</a> work to support <code>tell</code>; turning off <code>tell</code> support lets them skip that work. The original commit message for the <a href=\"https://github.com/python/cpython/commit/b9c4c3e455b07b362bd886f7e95aed3be5ab51f6\" rel=\"nofollow noreferrer\">change</a> that made <code>next</code> disable <code>tell</code> is &quot;Speed up next() by disabling snapshot updating then.&quot;, indicating it's for efficiency.</p>\n<p>For historical context, <a href=\"https://docs.python.org/2/library/stdtypes.html#file.next\" rel=\"nofollow noreferrer\">previous Python versions</a> used a hidden buffer for <code>next</code> that <code>tell</code> and other file methods didn't account for, causing <code>tell</code> (and other file methods) to produce not-very-meaningful results during iteration over a file. The current IO implementation would be able to support <code>tell()</code> during iteration, but <code>io.TextIOWrapper</code> prevents such calls anyway. The historical incompatibility between <code>next</code> and other methods likely contributed to why it was considered reasonable to disable parts of file functionality during iteration.</p>\n<hr />\n<p>You didn't ask for workarounds, but for the benefit of people who end up on this page looking for a workaround, I'll mention that</p>\n<pre><code>for line in iter(file.readline, ''):\n    ...\n</code></pre>\n<p>will let you iterate over the lines of a text file without disabling <code>tell</code>. (You can use <code>for line in iter(file.readline, b'')</code> for binary files, but there's not much point, because the <code>tell</code> disabling mechanism isn't there for binary files.)</p>\n"}, {"tags": [], "owner": {"reputation": 481, "user_id": 5093308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d55b7451cf31830c20de90a5248c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Zhou Hongbo", "link": "https://stackoverflow.com/users/5093308/zhou-hongbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1610609946, "last_edit_date": 1610609946, "creation_date": 1610609241, "answer_id": 65714908, "question_id": 49785865, "link": "https://stackoverflow.com/questions/49785865/meaning-of-oserror-telling-position-disabled-by-next-call-error/65714908#65714908", "title": "Meaning of &quot;OSError: telling position disabled by next() call&quot; error?", "body": "<p>If your text file is too large, there are two solutions according to <a href=\"https://stackoverflow.com/questions/29618936/how-to-solve-oserror-telling-position-disabled-by-next-call\">this answer</a>:</p>\n<ol>\n<li>Using <code>file.readline()</code> instead of <code>next()</code></li>\n</ol>\n<pre><code>with open(path, mode) as file:\n    while True:\n        line = file.readline()\n        if not line:\n            break\n        file.tell()\n</code></pre>\n<ol start=\"2\">\n<li>Using <code>offset += len(line)</code> instead of <code>file.tell()</code></li>\n</ol>\n<pre><code>offset = 0\nwith open(path, mode) as file:\n    for line in file:\n        offset += len(line)\n</code></pre>\n"}], "owner": {"reputation": 498, "user_id": 3548109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b778177dcbea4bf0c49aed217c725d4e?s=128&d=identicon&r=PG&f=1", "display_name": "berndbausch", "link": "https://stackoverflow.com/users/3548109/berndbausch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3033, "favorite_count": 2, "accepted_answer_id": 49786016, "answer_count": 2, "score": 8, "last_activity_date": 1610609946, "creation_date": 1523489726, "last_edit_date": 1523493804, "question_id": 49785865, "link": "https://stackoverflow.com/questions/49785865/meaning-of-oserror-telling-position-disabled-by-next-call-error", "title": "Meaning of &quot;OSError: telling position disabled by next() call&quot; error?", "body": "<p>This is almost the same question as <a href=\"https://stackoverflow.com/questions/29618936/how-to-solve-oserror-telling-position-disabled-by-next-call\">How to solve &quot;OSError: telling position disabled by next() call&quot;</a>. While the older question has received a few answers with useful workarounds, the meaning of the error is not clear. I wonder if anybody can comment on this.</p>\n\n<p>I am learning Python and loosely following a <a href=\"https://docs.python.org/3/tutorial/inputoutput.html\" rel=\"noreferrer\">tutorial</a>. I entered the following interactively on Fedora 23:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ python3\nPython 3.4.3 (default, Aug  9 2016, 15:36:17)\n[GCC 5.3.1 20160406 (Red Hat 5.3.1-6)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; with open(\"myfile\",\"r\") as file:\n...     for l in file:\n...         print(\"Next line: \\\"{}\\\"\".format(l))\n...         print(\"Current position {:4d}\".format(file.tell()))\n</code></pre>\n\n<p><code>myfile</code> contains a few lines of text. The output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Next line: \"This is line number 0\n\"\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 4, in &lt;module&gt;\nOSError: telling position disabled by next() call\n</code></pre>\n\n<p>Googling for this error yields a whopping 6 results. The same happens with Python 3.6.4 on Cygwin on Windows 10.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The <code>tell()</code> method for text files is <a href=\"https://docs.python.org/3/library/io.html#io.TextIOBase.tell\" rel=\"noreferrer\">documented as follows</a>:</p>\n\n<blockquote>\n  <p>Return the current stream position as an opaque number. The number\n  does not usually represent a number of bytes in the underlying binary\n  storage.</p>\n</blockquote>\n\n<p>\"Opaque number\" seems to indicate that I can't just print it. So, I replaced the second <code>print()</code> call with <code>pos = file.tell()</code>. Same result.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "edited": false, "score": 0, "creation_date": 1523489062, "post_id": 49785756, "comment_id": 86586928, "body": "So what is your problem here?"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1523489106, "post_id": 49785756, "comment_id": 86586946, "body": "What output are you expecting?  Something like <code>H</code> and <code>a</code> or <code>Hello, I very like eat banana</code>?"}, {"owner": {"reputation": 33, "user_id": 9633220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3f2045773dcae07f094a0977c7ad86?s=128&d=identicon&r=PG&f=1", "display_name": "jurek", "link": "https://stackoverflow.com/users/9633220/jurek"}, "reply_to_user": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1523489221, "post_id": 49785756, "comment_id": 86586982, "body": "@Simon Expected output: 23(start position of banana) and end position 28, if my end_loc = loc + len(word) - 1"}, {"owner": {"reputation": 33, "user_id": 9633220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3f2045773dcae07f094a0977c7ad86?s=128&d=identicon&r=PG&f=1", "display_name": "jurek", "link": "https://stackoverflow.com/users/9633220/jurek"}, "reply_to_user": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "edited": false, "score": 0, "creation_date": 1523489280, "post_id": 49785756, "comment_id": 86587006, "body": "@VasilisG. I want to skip sentence2, if word !=  in sentence2"}, {"owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "edited": false, "score": 0, "creation_date": 1523489423, "post_id": 49785756, "comment_id": 86587049, "body": "<code>find()</code> checks for substring in a string and since <code>banana1</code> as a string contains <code>banana</code> as a substring, <code>find()</code> will return the position of the substring. If you wish to find the exact word, then you will have to split the sentence and compare each word individually."}, {"owner": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "edited": false, "score": 0, "creation_date": 1523490025, "post_id": 49785756, "comment_id": 86587174, "body": "Its probably overkill in this example but regex matches have a <code>span()</code> which gives you back a tuple of the position <code>(20, 25)</code>"}, {"owner": {"reputation": 33, "user_id": 9633220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3f2045773dcae07f094a0977c7ad86?s=128&d=identicon&r=PG&f=1", "display_name": "jurek", "link": "https://stackoverflow.com/users/9633220/jurek"}, "reply_to_user": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "edited": false, "score": 0, "creation_date": 1523490393, "post_id": 49785756, "comment_id": 86587262, "body": "@SamCollins Thanks! But how to get start and end position of span() to new variable? For example i want to use start position and end position to further code."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1523490916, "post_id": 49785756, "comment_id": 86587389, "body": "<code>a[0]</code> and <code>a[1]</code>, if <code>span()</code> is stored in variable <code>a</code>"}], "answers": [{"comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1523492474, "post_id": 49786033, "comment_id": 86587746, "body": "Note that this also matches things like <code>&quot;apple, banana, cherry&quot;</code>, which may or may not be what OP wants."}, {"owner": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1523492931, "post_id": 49786033, "comment_id": 86587837, "body": "I assume he wants just the position of the word <code>banana</code> which that seems to do"}], "tags": [], "owner": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "is_accepted": true, "score": 1, "last_activity_date": 1523491178, "creation_date": 1523491178, "answer_id": 49786033, "question_id": 49785756, "link": "https://stackoverflow.com/questions/49785756/how-to-find-whole-string-using-find/49786033#49786033", "title": "How to find whole string using find()", "body": "<p>An overkill solution might be to use regex. Your expression could use work boundaries which fixes the problem with the 1 added on.</p>\n\n<pre><code>import re\ntext = 'Hello, I very like eat banana'\nstart, end = re.search(r'\\bbanana\\b', text).span()\n</code></pre>\n\n<p><code>span</code> returns a tuple so you can assign it to one variable and it will be like (20, 40) which you can access using [0] etc or into two variables like above.</p>\n\n<p>If you do this often I recommend using <code>re.compile()</code> on your regex first.</p>\n"}], "owner": {"reputation": 33, "user_id": 9633220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3f2045773dcae07f094a0977c7ad86?s=128&d=identicon&r=PG&f=1", "display_name": "jurek", "link": "https://stackoverflow.com/users/9633220/jurek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 49786033, "answer_count": 1, "score": 1, "last_activity_date": 1523491178, "creation_date": 1523488838, "last_edit_date": 1523489171, "question_id": 49785756, "link": "https://stackoverflow.com/questions/49785756/how-to-find-whole-string-using-find", "title": "How to find whole string using find()", "body": "<p>How to find whole string using <code>find()</code> function?</p>\n\n<p>For example my input:</p>\n\n<pre><code>word = 'banana'\n\nsentence1 = 'Hello, I very like eat banana'\n&gt;True\n\nsentence2 = ' Hello, I very like eat banana1'\n&gt;False\n</code></pre>\n\n<p>I want to use <code>find()</code> function, because I want get start and end position of this string.</p>\n\n<p>For example:</p>\n\n<pre><code>loc = sentence1.find(word)\n</code></pre>\n"}, {"tags": ["python", "math", "decimal", "rounding"], "comments": [{"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1523489054, "post_id": 49785753, "comment_id": 86586927, "body": "It might help elucidate the situation if the intermediate results are displayed."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8273252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e7d3547a8217c07839bdc3df954bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Toms lns", "link": "https://stackoverflow.com/users/8273252/toms-lns"}, "edited": false, "score": 0, "creation_date": 1523491940, "post_id": 49785808, "comment_id": 86587623, "body": "Thanks ! This is exactly what I am looking for"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "reply_to_user": {"reputation": 41, "user_id": 8273252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e7d3547a8217c07839bdc3df954bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Toms lns", "link": "https://stackoverflow.com/users/8273252/toms-lns"}, "edited": false, "score": 0, "creation_date": 1523492105, "post_id": 49785808, "comment_id": 86587672, "body": "Glad to help! Notice this method will merely truncate the float at a  given position and not perform true &quot;rounding&quot;"}], "tags": [], "owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "is_accepted": true, "score": 0, "last_activity_date": 1523492154, "last_edit_date": 1523492154, "creation_date": 1523489187, "answer_id": 49785808, "question_id": 49785753, "link": "https://stackoverflow.com/questions/49785753/how-to-properly-round-half-down-a-decimal-number/49785808#49785808", "title": "How to properly round half down a decimal number?", "body": "<p>Something like this?</p>\n\n<pre><code>import sys, signal, json, time\nimport random\nimport math\nnum = 0.049852124 \n# where 1 is in the position you want to truncate\nnumCoins = num - math.fmod(num, 0.001)\nprint numCoins # 0.049\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1523489952, "last_edit_date": 1523489952, "creation_date": 1523489569, "answer_id": 49785844, "question_id": 49785753, "link": "https://stackoverflow.com/questions/49785753/how-to-properly-round-half-down-a-decimal-number/49785844#49785844", "title": "How to properly round half down a decimal number?", "body": "<p>ROUND_HALF_DOWN is round <strong><em>half</em></strong> down, as in when a number is exactly halfway between two options of what to round to, it rounds down. Everything else rounds to nearest. You are significantly above the halfway point between 0.049 and 0.050, so you round to nearest.</p>\n\n<p>If you want to round <em>everything</em> down, that's ROUND_DOWN, not ROUND_HALF_DOWN.</p>\n\n<p>Also, if you want decimal arithmetic, using floats is a mistake from the start. Instead of <code>num = 0.049852124</code>, you should use avoid floats entirely with something like <code>num = Decimal('0.049852124')</code>, and you should avoid producing a float at the end.</p>\n"}], "owner": {"reputation": 41, "user_id": 8273252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e7d3547a8217c07839bdc3df954bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Toms lns", "link": "https://stackoverflow.com/users/8273252/toms-lns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 49785808, "answer_count": 2, "score": 0, "last_activity_date": 1523494769, "creation_date": 1523488828, "last_edit_date": 1523494769, "question_id": 49785753, "link": "https://stackoverflow.com/questions/49785753/how-to-properly-round-half-down-a-decimal-number", "title": "How to properly round half down a decimal number?", "body": "<p>I am trying to round half down a number, but my program doesn't want to round half down but up.</p>\n\n<p>For instance, I have 0.0498512222 \nI want to get 0.049, but the program round half up and give me 0.050</p>\n\n<p>Code</p>\n\n<pre><code>#!/usr/bin/python\nimport sys, signal, json, time\nimport random\nimport decimal\nfrom decimal import Decimal, ROUND_HALF_DOWN\nnum = 0.049852124\nnum = Decimal(num)\nnumCoins = Decimal(num.quantize(Decimal('0.001'), rounding=ROUND_HALF_DOWN))\nnumCoins = float(numCoins)\nprint numCoins\n</code></pre>\n\n<p>I don't know how to resolve this error, because it's for a cryptocurrency bot, and the <code>numCoins</code> is the number of a coin that I have. If the program round half up I'll get an error like 'Account has insufficient balance for requested action' because I can't sell more than I have.</p>\n"}, {"tags": ["python", "string", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 7361495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab0cb53129ef14bc733c87da865222a?s=128&d=identicon&r=PG&f=1", "display_name": "WhoAmIWhereAmIWhatIAmDoing", "link": "https://stackoverflow.com/users/7361495/whoamiwhereamiwhatiamdoing"}, "is_accepted": false, "score": 0, "last_activity_date": 1523488992, "creation_date": 1523488992, "answer_id": 49785784, "question_id": 49785742, "link": "https://stackoverflow.com/questions/49785742/how-to-strip-the-string-and-replace-the-existing-elements-in-dataframe/49785784#49785784", "title": "How to strip the string and replace the existing elements in DataFrame", "body": "<p>Make a array consist of the names you want. Then call \nyourarray = pd.DataFrame(yourpd, columns=yournamearray)</p>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 9632698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248f131d796844629bc654384d17d51c?s=128&d=identicon&r=PG&f=1", "display_name": "FunkyMore", "link": "https://stackoverflow.com/users/9632698/funkymore"}, "edited": false, "score": 0, "creation_date": 1523490191, "post_id": 49785787, "comment_id": 86587210, "body": "I tried similar code before. But the values doesn&#39;t change."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1523490366, "post_id": 49785787, "comment_id": 86587255, "body": "Reassign results to the column <code>df[&#39;Site Name&#39;] = df[&#39;Site Name&#39;].apply(lambda x: x.split(&#39;_&#39;)[-1])</code>"}, {"owner": {"reputation": 383, "user_id": 9633224, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_gi8yhBknNo/AAAAAAAAAAI/AAAAAAAAAHM/Et6cGkNGWqQ/photo.jpg?sz=128", "display_name": "Mark Tyler", "link": "https://stackoverflow.com/users/9633224/mark-tyler"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1523490522, "post_id": 49785787, "comment_id": 86587291, "body": "@piRSquared ah I thought it was in place. Thanks!"}], "tags": [], "owner": {"reputation": 383, "user_id": 9633224, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_gi8yhBknNo/AAAAAAAAAAI/AAAAAAAAAHM/Et6cGkNGWqQ/photo.jpg?sz=128", "display_name": "Mark Tyler", "link": "https://stackoverflow.com/users/9633224/mark-tyler"}, "is_accepted": false, "score": 0, "last_activity_date": 1523490507, "last_edit_date": 1523490507, "creation_date": 1523489007, "answer_id": 49785787, "question_id": 49785742, "link": "https://stackoverflow.com/questions/49785742/how-to-strip-the-string-and-replace-the-existing-elements-in-dataframe/49785787#49785787", "title": "How to strip the string and replace the existing elements in DataFrame", "body": "<p>Use <code>.apply()</code> to apply a function to each element in a series:</p>\n\n<pre><code>df['Site Name'] = df['Site Name'].apply(lambda x: x.split('_')[-1])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 9632698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248f131d796844629bc654384d17d51c?s=128&d=identicon&r=PG&f=1", "display_name": "FunkyMore", "link": "https://stackoverflow.com/users/9632698/funkymore"}, "edited": false, "score": 0, "creation_date": 1523490362, "post_id": 49785806, "comment_id": 86587253, "body": "I got warning message as below:"}, {"owner": {"reputation": 183, "user_id": 9632698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248f131d796844629bc654384d17d51c?s=128&d=identicon&r=PG&f=1", "display_name": "FunkyMore", "link": "https://stackoverflow.com/users/9632698/funkymore"}, "edited": false, "score": 0, "creation_date": 1523490378, "post_id": 49785806, "comment_id": 86587258, "body": "Data_Extraction_Optimized_kdf_file.py:34: SettingWithCopyWarning:  A value is trying to be set on a copy of a slice from a DataFrame. Try using .loc[row_indexer,col_indexer] = value instead  See the caveats in the documentation: <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/&hellip;</a>   SiteInfo[&#39;Site&#39;] = SiteInfo[&#39;Site&#39;].str.replace(&#39;Site_&#39;, &#39;&#39;)"}], "tags": [], "owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1523489175, "creation_date": 1523489175, "answer_id": 49785806, "question_id": 49785742, "link": "https://stackoverflow.com/questions/49785742/how-to-strip-the-string-and-replace-the-existing-elements-in-dataframe/49785806#49785806", "title": "How to strip the string and replace the existing elements in DataFrame", "body": "<p>Just call replace on the column to replace all instances of \"Site_\":</p>\n\n<pre><code>df['Site'] = df['Site'].str.replace('Site_', '')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 9632698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248f131d796844629bc654384d17d51c?s=128&d=identicon&r=PG&f=1", "display_name": "FunkyMore", "link": "https://stackoverflow.com/users/9632698/funkymore"}, "edited": false, "score": 0, "creation_date": 1523492026, "post_id": 49785934, "comment_id": 86587656, "body": "Thanks a lot! This is the best solution so far:)"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1523490326, "creation_date": 1523490326, "answer_id": 49785934, "question_id": 49785742, "link": "https://stackoverflow.com/questions/49785742/how-to-strip-the-string-and-replace-the-existing-elements-in-dataframe/49785934#49785934", "title": "How to strip the string and replace the existing elements in DataFrame", "body": "<h2>Using <code>pd.Series.str.extract</code></h2>\n\n<p>This produces a copy with an updated columns</p>\n\n<pre><code>df.assign(Site=df.Site.str.extract('\\D+(\\d+)', expand=False))\n\n      Site    Name\nIndex             \n0        1     Tom\n1        2     Tom\n2        4    Jack\n3        8    Rose\n5       11  Marrie\n6       12  Marrie\n7       21   Jacob\n8       34   Jacob\n</code></pre>\n\n<p>To persist the results, reassign to the data frame name</p>\n\n<pre><code>df = df.assign(Site=df.Site.str.extract('\\D+(\\d+)', expand=False))\n</code></pre>\n\n<hr>\n\n<h2>Using <code>pd.Series.str.split</code></h2>\n\n<pre><code>df.assign(Site=df.Site.str.split('_', 1).str[1])\n</code></pre>\n\n<h2>Alternative</h2>\n\n<p>Update instead of producing a copy</p>\n\n<pre><code>df.update(df.Site.str.extract('\\D+(\\d+)', expand=False))\n# Or\n# df.update(df.Site.str.split('_', 1).str[1])\ndf\n\n      Site    Name\nIndex             \n0        1     Tom\n1        2     Tom\n2        4    Jack\n3        8    Rose\n5       11  Marrie\n6       12  Marrie\n7       21   Jacob\n8       34   Jacob\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 0, "last_activity_date": 1523491038, "creation_date": 1523491038, "answer_id": 49786012, "question_id": 49785742, "link": "https://stackoverflow.com/questions/49785742/how-to-strip-the-string-and-replace-the-existing-elements-in-dataframe/49786012#49786012", "title": "How to strip the string and replace the existing elements in DataFrame", "body": "<p>You can use exactly what you wanted (the <code>strip</code> method)</p>\n\n<pre><code>&gt;&gt;&gt; df[\"Site\"] = df.Site.str.strip(\"Site_\")\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Index   Site     Name\n  0      1       Tom\n  1      2       Tom\n  2      4       Jack\n  3      8       Rose\n  5      11      Marrie\n  6      12      Marrie\n  7      21      Jacob\n  8      34      Jacob\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 9632698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248f131d796844629bc654384d17d51c?s=128&d=identicon&r=PG&f=1", "display_name": "FunkyMore", "link": "https://stackoverflow.com/users/9632698/funkymore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 49785934, "answer_count": 5, "score": 2, "last_activity_date": 1523491038, "creation_date": 1523488739, "last_edit_date": 1523488935, "question_id": 49785742, "link": "https://stackoverflow.com/questions/49785742/how-to-strip-the-string-and-replace-the-existing-elements-in-dataframe", "title": "How to strip the string and replace the existing elements in DataFrame", "body": "<p>I have a df as below:</p>\n\n<pre><code>Index  Site     Name\n  0    Site_1   Tom\n  1    Site_2   Tom\n  2    Site_4   Jack\n  3    Site_8   Rose\n  5    Site_11  Marrie\n  6    Site_12  Marrie\n  7    Site_21  Jacob\n  8    Site_34  Jacob\n</code></pre>\n\n<p>I would like to strip the 'Site_' and only leave the number in the \"Site\" column, as shown below:</p>\n\n<pre><code>Index   Site     Name\n  0      1       Tom\n  1      2       Tom\n  2      4       Jack\n  3      8       Rose\n  5      11      Marrie\n  6      12      Marrie\n  7      21      Jacob\n  8      34      Jacob\n</code></pre>\n\n<p>What is the best way to do this operation?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1523775852, "post_id": 49785681, "comment_id": 86693502, "body": "Spark has a built in retry configuration parameter"}], "answers": [{"tags": [], "owner": {"reputation": 1252, "user_id": 3689574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aaf32c60b7dc2da7297cf150f27abe0?s=128&d=identicon&r=PG&f=1", "display_name": "user3689574", "link": "https://stackoverflow.com/users/3689574/user3689574"}, "is_accepted": false, "score": 0, "last_activity_date": 1523775693, "creation_date": 1523775693, "answer_id": 49839312, "question_id": 49785681, "link": "https://stackoverflow.com/questions/49785681/best-effort-retries-in-pyspark/49839312#49839312", "title": "Best effort retries in PySpark", "body": "<p>What exactly do you mean by \"set spark\"?\nWhat about the python code?\nOr do you mean a failure like running out of memory?</p>\n\n<pre><code>rdd = sc.parallelize([1,2,3, 0])\n\ndef try_and_return(x, number_of_trys = 5):\n    try_number = 0;\n    return_value = None;\n\n    while (try_number &lt; number_of_trys):\n        try:\n            return_value = 1.0/x\n            break\n        except ZeroDivisionError:\n            try_number += 1\n    return return_value\n\n\nprint rdd.map(lambda x: try_and_return(x)).collect()\n</code></pre>\n\n<p>[1.0, 0.5, 0.3333333333333333, None]</p>\n"}], "owner": {"reputation": 13300, "user_id": 2521225, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39c72c6dc4d20a8e736f8ed0d08fa646?s=128&d=identicon&r=PG&f=1", "display_name": "samol", "link": "https://stackoverflow.com/users/2521225/samol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523775783, "creation_date": 1523488336, "last_edit_date": 1523775783, "question_id": 49785681, "link": "https://stackoverflow.com/questions/49785681/best-effort-retries-in-pyspark", "title": "Best effort retries in PySpark", "body": "<p>Let's say I have an RDD that I need to map over a task that can fail</p>\n\n<pre><code>rdd = sc.parallelize([1,2,3])\nrdd.map(a_task_that_can_fail)\n</code></pre>\n\n<p>Is there a way to set spark to run the task in best efforts basis. My desired behaviour is:</p>\n\n<ul>\n<li>Retry the task 5 times, if fails after 5 times, return None, if succeeds then return the result</li>\n</ul>\n"}, {"tags": ["python", "matplotlib", "latex"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3849996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d20aaf39635cdbf4e150b90042a619b?s=128&d=identicon&r=PG&f=1", "display_name": "basvanopheusden", "link": "https://stackoverflow.com/users/3849996/basvanopheusden"}, "edited": false, "score": 0, "creation_date": 1523493841, "post_id": 49785917, "comment_id": 86587990, "body": "Thanks for the suggestion! I&#39;m planning to include this figure in a manuscript that I&#39;m writing in Latex, so I prefer to have the formatting of the axes labels be the same as the text in the caption etc. But as a backup plan, I can try this"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 25, "user_id": 3849996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d20aaf39635cdbf4e150b90042a619b?s=128&d=identicon&r=PG&f=1", "display_name": "basvanopheusden", "link": "https://stackoverflow.com/users/3849996/basvanopheusden"}, "edited": false, "score": 0, "creation_date": 1523519465, "post_id": 49785917, "comment_id": 86596495, "body": "You may use &quot;stix&quot; instead of &quot;stixsans&quot;. Apart, having this in a latex document, why would you not like your initial solution, which has all the same style? How exactly do you want your ticklabels to look like?"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1523490212, "creation_date": 1523490212, "answer_id": 49785917, "question_id": 49785653, "link": "https://stackoverflow.com/questions/49785653/disabling-usetex-in-matplotlib-tick-labels/49785917#49785917", "title": "Disabling usetex in matplotlib tick labels", "body": "<p>Maybe you want to use MathText instead of latex? </p>\n\n<pre><code>plt.rcParams[\"mathtext.fontset\"] = \"stixsans\"\n</code></pre>\n\n<p>Complete example without latex:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nplt.rcParams[\"axes.labelsize\"] = \"large\"\nplt.rcParams[\"mathtext.fontset\"] = \"stixsans\"\n\n\nfig,ax=plt.subplots()\n\nall_lambda = np.linspace(-6,2,1000)\nax.plot(all_lambda,np.exp(-np.exp(all_lambda)))\nax.set_xlim([-6,2])\nax.set_ylim([-0.1,1.1])\nax.set_xlabel(r'$\\log\\lambda$')\nax.set_ylabel(r'$\\mathbb{P}(m=0\\left| \\lambda\\right)$')\nfig.tight_layout()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jkMZU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jkMZU.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 25, "user_id": 3849996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d20aaf39635cdbf4e150b90042a619b?s=128&d=identicon&r=PG&f=1", "display_name": "basvanopheusden", "link": "https://stackoverflow.com/users/3849996/basvanopheusden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523490212, "creation_date": 1523488173, "question_id": 49785653, "link": "https://stackoverflow.com/questions/49785653/disabling-usetex-in-matplotlib-tick-labels", "title": "Disabling usetex in matplotlib tick labels", "body": "<p>I'm trying to create a figure using Python (version 3.5.3) and Matplotlib (version 2.0.2). I would like one of the axes of the figure to be labeled with an equation rendered in Latex. To render the equation, I need to use the amsmath and amsfonts packages. </p>\n\n<p>The only way I have managed to do this is by globally setting usetex=True for all text in matplotlib figures. However, that causes the tick labels to be rendered in Latex as well. Can I prevent this, and if so, how? </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\npreamble='\\\\usepackage{amsmath}\\n\\\\usepackage{amsfonts}'\n\nplt.rc('text',usetex=True)\nplt.rc('text.latex',preamble=preamble)\n\nfig,ax=plt.subplots()\n\nall_lambda = np.linspace(-6,2,1000)\nax.plot(all_lambda,np.exp(-np.exp(all_lambda)))\nax.set_xlim([-6,2])\nax.set_ylim([-0.1,1.1])\nax.set_xlabel(r'$\\log\\lambda$')\nax.set_ylabel(r'$\\mathbb{P}(m=0\\lvert \\lambda)$')\nfig.tight_layout()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cXSPk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cXSPk.png\" alt=\"matplotlib graph\"></a></p>\n"}, {"tags": ["python", "tkinter", "fonts"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1523488461, "post_id": 49785649, "comment_id": 86586802, "body": "Well, you never change the button&#39;s font or font size, so... it&#39;s no surprise that it doesn&#39;t change, is it? Have you tried actually assigning the selected value to the button&#39;s <code>font</code> property?"}, {"owner": {"reputation": 1, "user_id": 9633144, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PAyVrp-zb5Q/AAAAAAAAAAI/AAAAAAAAI-8/Xg4DUYlxopg/photo.jpg?sz=128", "display_name": "Kurtis Davidson", "link": "https://stackoverflow.com/users/9633144/kurtis-davidson"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1523489377, "post_id": 49785649, "comment_id": 86587033, "body": "Yes I have. I was wondering if it&#39;s possible to change the font and size in real time when I select a font and size from the option menu."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1523489886, "post_id": 49785649, "comment_id": 86587146, "body": "You literally just need to add <code>open[&#39;font&#39;] = newFont</code>..."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1523557708, "post_id": 49785649, "comment_id": 86621676, "body": "You don&#39;t want to use names like in <code>open = Button(window, text=&quot;Open&quot;, command=open, font=manipulateFont)</code>. <code>open</code> is a Python function to open files. Your button will try to open a file on click, and you&#39;ll get a bizarre <code>TypeError: Required argument &#39;file&#39; (pos 1) not found</code>. And if you later try to open a file, your open reference is now a button..."}], "owner": {"reputation": 1, "user_id": 9633144, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PAyVrp-zb5Q/AAAAAAAAAAI/AAAAAAAAI-8/Xg4DUYlxopg/photo.jpg?sz=128", "display_name": "Kurtis Davidson", "link": "https://stackoverflow.com/users/9633144/kurtis-davidson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 890, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523488148, "creation_date": 1523488148, "question_id": 49785649, "link": "https://stackoverflow.com/questions/49785649/changing-font-with-options-menu-tkinter", "title": "Changing font with options menu Tkinter", "body": "<p>I'm trying to change the font of a button widget by using the options menu to select the different fonts and sizes. I select the fonts and sizes and get them and store them in the tuple newFont. When I test my code and print the tuple I get ('Helvetica', '13'), ('Times', '112'), etc. based on the options selected in the option menus. I'm a bit confused on why the font and size of the font of the button won't change.</p>\n\n<pre><code>from tkinter import *\n\ndef manipulateFont(*args):\n    newFont = (font.get(), fontSize.get())\n    return newFont\n\nwindow = Tk()\n\nopen = Button(window, text=\"Open\", command=open, font=manipulateFont)\n\n\"\"\"Option Menu widget for font\"\"\"\nfont = StringVar(window)\nfont.set(\"Times\")\nfont.trace(\"w\", manipulateFont)\nfontOptions = OptionMenu(window, font, \"Arial\", \"Times\", \"Helvetica\")\n\n\"\"\"Option Menu widget for font size\"\"\"\nfontSize = StringVar(window)\nfontSize.set(\"12\")\nfontSize.trace(\"w\", manipulateFont)\nfontSizeOptions = OptionMenu(window, fontSize, \"12\", \"13\", \"14\", \"15\")\n\nopen.pack(side=TOP)\nfontOptions.pack(side=TOP)\nfontSizeOptions.pack(side=TOP)\n</code></pre>\n"}, {"tags": ["python", "unicode", "printing", "terminal", "character"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1523488283, "post_id": 49785638, "comment_id": 86586750, "body": "What do you mean by &quot;valid&quot;? As far as the programming language is concerned, all Unicode code points are valid, and can be sent to the terminal. Whether the terminal has installed fonts to actually display them is an OS/installation issue."}, {"owner": {"reputation": 425, "user_id": 8341274, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5r2VQ.png?s=128&g=1", "display_name": "Ana Nimbus", "link": "https://stackoverflow.com/users/8341274/ana-nimbus"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1523569055, "post_id": 49785638, "comment_id": 86627301, "body": "@LeeDanielCrocker, by &quot;valid,&quot; I mean that the terminal is able to produce an effect that is consistent with the Unicode description of the corresponding character. For most defined characters, this would be placing a graphical representation of the character at the cursor position."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1523577396, "post_id": 49785638, "comment_id": 86629711, "body": "Yeah, that&#39;s not a language thing, but an OS/Desktop/Font thing, and might not be possible on some platforms."}], "owner": {"reputation": 425, "user_id": 8341274, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5r2VQ.png?s=128&g=1", "display_name": "Ana Nimbus", "link": "https://stackoverflow.com/users/8341274/ana-nimbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527021213, "creation_date": 1523488063, "last_edit_date": 1527021213, "question_id": 49785638, "link": "https://stackoverflow.com/questions/49785638/how-do-you-determine-which-unicode-characters-are-available-on-a-particular-term", "title": "How do you determine which Unicode characters are available on a particular terminal in Python 3?", "body": "<p>Currently, I have:</p>\n\n<pre><code>def allcharacters():\n    def ch(u):\n        try:\n            c = chr(u)\n            print(c if c else '', end='')\n        except:\n            c = ''\n        return c\n    return dict(filter(lambda en: en[1], enumerate(map(ch, range(0x110000)))))\n</code></pre>\n\n<p>The last line may be ugly (was uglier before revision), but my question centers on the call of the <code>print</code> function. This was the only way I found to force evaluation of <code>c</code>, which throws the exception needed for <code>allcharacters</code> to work by filtering out the null strings. I am interested in an alternative that has no side effects. Is there a way tell what characters are valid for a particular terminal without attempting to <code>print</code> them and without doing anything else that has a side effect?</p>\n"}, {"tags": ["python", "gcc", "centos", "pip", "sasl"], "comments": [{"owner": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "edited": false, "score": 1, "creation_date": 1523487984, "post_id": 49785606, "comment_id": 86586675, "body": "Have you tried installing the sasl packages from yum? Probably <code>cyrus-sasl</code> and <code>cyrus-sasl-devel</code>"}, {"owner": {"reputation": 17490, "user_id": 149367, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/760651162448ebb12c6a03bcee2b980a?s=128&d=identicon&r=PG", "display_name": "HP.", "link": "https://stackoverflow.com/users/149367/hp"}, "reply_to_user": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "edited": false, "score": 0, "creation_date": 1523489029, "post_id": 49785606, "comment_id": 86586919, "body": "That fixed it! HAHA @SamCollins Please put answer below and I will accept. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "is_accepted": true, "score": 2, "last_activity_date": 1523489146, "creation_date": 1523489146, "answer_id": 49785803, "question_id": 49785606, "link": "https://stackoverflow.com/questions/49785606/pip-install-pyhs2-error-command-gcc-failed-with-exit-status-1/49785803#49785803", "title": "pip install pyhs2 error: command &#39;gcc&#39; failed with exit status 1", "body": "<p>You should try installing the package <code>cyrus-sasl</code> and the development headers <code>cyrus-sasl-devel</code>.</p>\n\n<pre><code>sudo yum install cyrus-sasl cyrus-sasl-devel\n</code></pre>\n"}], "owner": {"reputation": 17490, "user_id": 149367, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/760651162448ebb12c6a03bcee2b980a?s=128&d=identicon&r=PG", "display_name": "HP.", "link": "https://stackoverflow.com/users/149367/hp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 49785803, "answer_count": 1, "score": 0, "last_activity_date": 1529461020, "creation_date": 1523487825, "question_id": 49785606, "link": "https://stackoverflow.com/questions/49785606/pip-install-pyhs2-error-command-gcc-failed-with-exit-status-1", "title": "pip install pyhs2 error: command &#39;gcc&#39; failed with exit status 1", "body": "<p>I am using Python 2.6.6 and pip version 7.1.0 in a Centos 6.9 virtual machine (that the company controls so I can't do much to upgrade).</p>\n\n<p><strong>Is there any way to work around the error below?</strong></p>\n\n<pre><code>Collecting pyhs2\n  Using cached pyhs2-0.6.0.tar.gz\nCollecting sasl (from pyhs2)\n  Using cached sasl-0.2.1.tar.gz\nRequirement already satisfied: thrift in /usr/lib/python2.6/site-packages/thrift-0.11.0-py2.6.egg (from pyhs2)\nRequirement already satisfied: six in /usr/lib/python2.6/site-packages/six-1.11.0-py2.6.egg (from sasl-&gt;pyhs2)\nInstalling collected packages: sasl, pyhs2\n  Running setup.py install for sasl ... error\n    Complete output from command /usr/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-yp38hD/sasl/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-LVlbdm-record/install-record.txt --single-version-externally-managed --compile:\n    running install\n    running build\n    running build_py\n    creating build\n    creating build/lib.linux-x86_64-2.6\n    creating build/lib.linux-x86_64-2.6/sasl\n    copying sasl/__init__.py -&gt; build/lib.linux-x86_64-2.6/sasl\n    running egg_info\n    writing requirements to sasl.egg-info/requires.txt\n    writing sasl.egg-info/PKG-INFO\n    writing top-level names to sasl.egg-info/top_level.txt\n    writing dependency_links to sasl.egg-info/dependency_links.txt\n    warning: manifest_maker: standard file '-c' not found\n    reading manifest file 'sasl.egg-info/SOURCES.txt'\n    reading manifest template 'MANIFEST.in'\n    writing manifest file 'sasl.egg-info/SOURCES.txt'\n    copying sasl/saslwrapper.cpp -&gt; build/lib.linux-x86_64-2.6/sasl\n    copying sasl/saslwrapper.h -&gt; build/lib.linux-x86_64-2.6/sasl\n    copying sasl/saslwrapper.pyx -&gt; build/lib.linux-x86_64-2.6/sasl\n    running build_ext\n    building 'sasl.saslwrapper' extension\n    creating build/temp.linux-x86_64-2.6\n    creating build/temp.linux-x86_64-2.6/sasl\n    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -Isasl -I/usr/include/python2.6 -c sasl/saslwrapper.cpp -o build/temp.linux-x86_64-2.6/sasl/saslwrapper.o\n    In file included from sasl/saslwrapper.cpp:254:\n    sasl/saslwrapper.h:22:23: error: sasl/sasl.h: No such file or directory\n    In file included from sasl/saslwrapper.cpp:254:\n    sasl/saslwrapper.h:145: error: \u2018sasl_interact_t\u2019 has not been declared\n    sasl/saslwrapper.h:148: error: \u2018sasl_conn_t\u2019 has not been declared\n    sasl/saslwrapper.h:148: error: \u2018sasl_secret_t\u2019 has not been declared\n    sasl/saslwrapper.h:151: error: ISO C++ forbids declaration of \u2018sasl_conn_t\u2019 with no type\n    sasl/saslwrapper.h:151: error: expected \u2018;\u2019 before \u2018*\u2019 token\n    sasl/saslwrapper.h:152: error: \u2018sasl_callback_t\u2019 does not name a type\n    sasl/saslwrapper.h:165: error: ISO C++ forbids declaration of \u2018sasl_secret_t\u2019 with no type\n    sasl/saslwrapper.h:165: error: expected \u2018;\u2019 before \u2018*\u2019 token\n    sasl/saslwrapper.h: In constructor \u2018saslwrapper::ClientImpl::ClientImpl()\u2019:\n    sasl/saslwrapper.h:35: error: class \u2018saslwrapper::ClientImpl\u2019 does not have any field named \u2018conn\u2019\n    sasl/saslwrapper.h:35: error: class \u2018saslwrapper::ClientImpl\u2019 does not have any field named \u2018secret\u2019\n    sasl/saslwrapper.h: In destructor \u2018saslwrapper::ClientImpl::~ClientImpl()\u2019:\n    sasl/saslwrapper.h:36: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:36: error: \u2018sasl_dispose\u2019 was not declared in this scope\n    sasl/saslwrapper.h:36: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018void saslwrapper::ClientImpl::lastCallback()\u2019:\n    sasl/saslwrapper.h:143: error: \u2018SASL_CB_LIST_END\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::init()\u2019:\n    sasl/saslwrapper.h:179: error: \u2018sasl_client_init\u2019 was not declared in this scope\n    sasl/saslwrapper.h:180: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h:181: error: \u2018sasl_errstring\u2019 was not declared in this scope\n    sasl/saslwrapper.h:187: error: \u2018SASL_CB_GETREALM\u2019 was not declared in this scope\n    sasl/saslwrapper.h:189: error: \u2018SASL_CB_USER\u2019 was not declared in this scope\n    sasl/saslwrapper.h:190: error: \u2018SASL_CB_AUTHNAME\u2019 was not declared in this scope\n    sasl/saslwrapper.h:193: error: \u2018SASL_CB_PASS\u2019 was not declared in this scope\n    sasl/saslwrapper.h:195: error: \u2018SASL_CB_PASS\u2019 was not declared in this scope\n    sasl/saslwrapper.h:203: error: \u2018SASL_NEED_PROXY\u2019 was not declared in this scope\n    sasl/saslwrapper.h:205: error: \u2018callbacks\u2019 was not declared in this scope\n    sasl/saslwrapper.h:205: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:205: error: \u2018sasl_client_new\u2019 was not declared in this scope\n    sasl/saslwrapper.h:206: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h:207: error: \u2018sasl_errstring\u2019 was not declared in this scope\n    sasl/saslwrapper.h:211: error: \u2018sasl_security_properties_t\u2019 was not declared in this scope\n    sasl/saslwrapper.h:211: error: expected \u2018;\u2019 before \u2018secprops\u2019\n    sasl/saslwrapper.h:213: error: \u2018secprops\u2019 was not declared in this scope\n    sasl/saslwrapper.h:220: error: \u2018SASL_SEC_PROPS\u2019 was not declared in this scope\n    sasl/saslwrapper.h:220: error: \u2018sasl_setprop\u2019 was not declared in this scope\n    sasl/saslwrapper.h:221: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h:223: error: \u2018sasl_dispose\u2019 was not declared in this scope\n    sasl/saslwrapper.h:229: error: \u2018SASL_AUTH_EXTERNAL\u2019 was not declared in this scope\n    sasl/saslwrapper.h:230: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h:232: error: \u2018sasl_dispose\u2019 was not declared in this scope\n    sasl/saslwrapper.h:237: error: \u2018SASL_SSF_EXTERNAL\u2019 was not declared in this scope\n    sasl/saslwrapper.h:238: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h:240: error: \u2018sasl_dispose\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::setAttr(const std::string&amp;, const std::string&amp;)\u2019:\n    sasl/saslwrapper.h:259: error: \u2018secret\u2019 was not declared in this scope\n    sasl/saslwrapper.h:260: error: \u2018sasl_secret_t\u2019 was not declared in this scope\n    sasl/saslwrapper.h:260: error: expected primary-expression before \u2018)\u2019 token\n    sasl/saslwrapper.h:260: error: expected \u2018;\u2019 before \u2018malloc\u2019\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::start(const std::string&amp;, std::string&amp;, std::string&amp;)\u2019:\n    sasl/saslwrapper.h:295: error: \u2018sasl_interact_t\u2019 was not declared in this scope\n    sasl/saslwrapper.h:295: error: \u2018prompt\u2019 was not declared in this scope\n    sasl/saslwrapper.h:301: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:301: error: \u2018sasl_client_start\u2019 was not declared in this scope\n    sasl/saslwrapper.h:302: error: \u2018SASL_INTERACT\u2019 was not declared in this scope\n    sasl/saslwrapper.h:304: error: \u2018SASL_INTERACT\u2019 was not declared in this scope\n    sasl/saslwrapper.h:305: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h:305: error: \u2018SASL_CONTINUE\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::step(const std::string&amp;, std::string&amp;)\u2019:\n    sasl/saslwrapper.h:318: error: \u2018sasl_interact_t\u2019 was not declared in this scope\n    sasl/saslwrapper.h:318: error: \u2018prompt\u2019 was not declared in this scope\n    sasl/saslwrapper.h:323: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:323: error: \u2018sasl_client_step\u2019 was not declared in this scope\n    sasl/saslwrapper.h:324: error: \u2018SASL_INTERACT\u2019 was not declared in this scope\n    sasl/saslwrapper.h:326: error: \u2018SASL_INTERACT\u2019 was not declared in this scope\n    sasl/saslwrapper.h:327: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h:327: error: \u2018SASL_CONTINUE\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::encode(const std::string&amp;, std::string&amp;)\u2019:\n    sasl/saslwrapper.h:340: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:340: error: \u2018sasl_encode\u2019 was not declared in this scope\n    sasl/saslwrapper.h:341: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::decode(const std::string&amp;, std::string&amp;)\u2019:\n    sasl/saslwrapper.h:361: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:361: error: \u2018sasl_decode\u2019 was not declared in this scope\n    sasl/saslwrapper.h:362: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::getUserId(std::string&amp;)\u2019:\n    sasl/saslwrapper.h:378: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:378: error: \u2018SASL_USERNAME\u2019 was not declared in this scope\n    sasl/saslwrapper.h:378: error: \u2018sasl_getprop\u2019 was not declared in this scope\n    sasl/saslwrapper.h:379: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018bool saslwrapper::ClientImpl::getSSF(int*)\u2019:\n    sasl/saslwrapper.h:390: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:390: error: \u2018SASL_SSF\u2019 was not declared in this scope\n    sasl/saslwrapper.h:390: error: \u2018sasl_getprop\u2019 was not declared in this scope\n    sasl/saslwrapper.h:391: error: \u2018SASL_OK\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018void saslwrapper::ClientImpl::addCallback(long unsigned int, void*)\u2019:\n    sasl/saslwrapper.h:407: error: \u2018callbacks\u2019 was not declared in this scope\n    sasl/saslwrapper.h: In member function \u2018void saslwrapper::ClientImpl::setError(const std::string&amp;, int, const std::string&amp;, const std::string&amp;)\u2019:\n    sasl/saslwrapper.h:419: error: \u2018conn\u2019 was not declared in this scope\n    sasl/saslwrapper.h:420: error: \u2018sasl_errdetail\u2019 was not declared in this scope\n    sasl/saslwrapper.h:422: error: \u2018sasl_errstring\u2019 was not declared in this scope\n    sasl/saslwrapper.h: At global scope:\n    sasl/saslwrapper.h:434: error: variable or field \u2018interact\u2019 declared void\n    sasl/saslwrapper.h:434: error: \u2018sasl_interact_t\u2019 was not declared in this scope\n    sasl/saslwrapper.h:434: error: \u2018prompt\u2019 was not declared in this scope\n    error: command 'gcc' failed with exit status 1\n\n    ----------------------------------------\nCommand \"/usr/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-yp38hD/sasl/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-LVlbdm-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-yp38hD/sasl/\n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 1759909, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6fae3d3bdf8f1c05cfc02269f3be00ba?s=128&d=identicon&r=PG", "display_name": "mobiusinversion", "link": "https://stackoverflow.com/users/1759909/mobiusinversion"}, "edited": false, "score": 0, "creation_date": 1523497446, "post_id": 49786038, "comment_id": 86588756, "body": "Thanks Peter!  Very clear and helps elucidate the mechanics."}], "tags": [], "owner": {"reputation": 4435, "user_id": 4320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70285b65cf3479028fac427ae92096f?s=128&d=identicon&r=PG", "display_name": "Peter Szoldan", "link": "https://stackoverflow.com/users/4320693/peter-szoldan"}, "is_accepted": true, "score": 2, "last_activity_date": 1523491226, "creation_date": 1523491226, "answer_id": 49786038, "question_id": 49785605, "link": "https://stackoverflow.com/questions/49785605/how-does-tensorflow-connect-the-dimensions-of-linked-convolutional-layers/49786038#49786038", "title": "How does tensorflow connect the dimensions of linked convolutional layers?", "body": "<p>When you have 1 filter (=channel) in the input and the output as well, you will get one 5x5 convolution kernel, which is used to calculate the output for pixel <strong><em>(x, y)</em></strong> by taking the Hadamard (element-wise) product of the kernel and <strong><em>input[ x - 2 : x + 3, y - 2 : y + 3 ]</em></strong> and then taking the sum of the resulting 5x5 matrix, finally applying the <em>activation function</em> ( <a href=\"https://www.tensorflow.org/api_docs/python/tf/nn/relu\" rel=\"nofollow noreferrer\"><code>tf.nn.relu()</code></a> in your case.) Since some of these coordinates point outside of the input, then the <a href=\"https://stackoverflow.com/questions/37674306/what-is-the-difference-between-same-and-valid-padding-in-tf-nn-max-pool-of-t/44102413#44102413\"><code>padding=\"SAME\"</code></a> comes into play and zero is used as a virtual element for outside positions for the sake of this calculation. Your network will learn the weights in the kernel.</p>\n\n<p>Now let's suppose you have 2 filters in the input and 1 in the output. Then you have <em>two</em> kernels, and the output will be the <em>sum</em> of the result of the two separate operations described above applied to each input channel.</p>\n\n<p>If you have 1 filters in the input and 2 in the output, then again, you have <em>two</em> kernels, and the two output channels for each pixel will be generated separately with the use of the corresponding kernels.</p>\n\n<p>Now the big jump: if you have <strong><em>k</em></strong> filters in the input and <strong><em>n</em></strong> filters in the output, then you have <strong><em>( k * n )</em></strong> different kernels to learn, and each of the <strong><em>n</em></strong> channels for each pixel in the output will be calculated as the sum of <strong><em>k</em></strong> separate convolutions on each input channel. All <strong><em>( k * n )</em></strong> kernels will be learned by the network.</p>\n"}], "owner": {"reputation": 535, "user_id": 1759909, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6fae3d3bdf8f1c05cfc02269f3be00ba?s=128&d=identicon&r=PG", "display_name": "mobiusinversion", "link": "https://stackoverflow.com/users/1759909/mobiusinversion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 2, "accepted_answer_id": 49786038, "answer_count": 1, "score": 1, "last_activity_date": 1523491226, "creation_date": 1523487814, "question_id": 49785605, "link": "https://stackoverflow.com/questions/49785605/how-does-tensorflow-connect-the-dimensions-of-linked-convolutional-layers", "title": "How does tensorflow connect the dimensions of linked convolutional layers?", "body": "<p>The is a very basic tensorflow question, but I haven't yet seen a clear explanation in the docs.  Following the <a href=\"https://www.tensorflow.org/tutorials/layers\" rel=\"nofollow noreferrer\">examples on the tensorflow site</a>, we basically have these two layers connected:</p>\n\n<pre><code>conv1 = tf.layers.conv2d(\n    inputs=input_layer,\n    filters=32,\n    kernel_size=[5, 5],\n    padding=\"same\",\n    activation=tf.nn.relu)\n</code></pre>\n\n<p>The shape at this point will be <code>(28, 28, 32)</code>. </p>\n\n<pre><code>conv2 = tf.layers.conv2d(\n    inputs=conv1,\n    filters=64,\n    kernel_size=[5, 5],\n    padding=\"same\",\n    activation=tf.nn.relu)\n</code></pre>\n\n<p>The shape at this point will be <code>(28, 28, 64)</code>.  How does tensorflow take the <code>(28, 28, 32)</code> and turn it into <code>(28, 28, 64)</code> using a 2d kernel.  Could you please explain or point me to the documentation?  How about when the output dimension of the second layer is smaller, say </p>\n\n<pre><code>conv2 = tf.layers.conv2d(\n    inputs=conv1,\n    filters=8,\n    kernel_size=[5, 5],\n    padding=\"same\",\n    activation=tf.nn.relu)\n</code></pre>\n\n<p>How would tensorflow combine the 32 dimensions into 8?  </p>\n"}, {"tags": ["python", "python-3.x", "simulator", "dice"], "comments": [{"owner": {"reputation": 344, "user_id": 8877217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec886d4b5b1bdafa8b9ef5d452ba932e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharad Khanna", "link": "https://stackoverflow.com/users/8877217/sharad-khanna"}, "edited": false, "score": 0, "creation_date": 1523487815, "post_id": 49785586, "comment_id": 86586630, "body": "Where all the methods? Why do you need 3 rollings?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1523488380, "post_id": 49785586, "comment_id": 86586772, "body": "Just use the classic <code>while True:</code> loop, take an input string via <code>input</code> and if it equals to <code>&#39;q&#39;</code> or whatever string you want to enter to quit then <code>break</code>, otherwise continue with the rest of your code. There is a dupe on So somewhere, I cant find it, but the code is something like <a href=\"https://ideone.com/1sDzJK\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 1, "user_id": 9633118, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372010842900204/picture?type=large", "display_name": "Jamie Tredinnick", "link": "https://stackoverflow.com/users/9633118/jamie-tredinnick"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1523488606, "post_id": 49785586, "comment_id": 86586836, "body": "@PaulRooney hi thanks for the response Paul where in this code would you suggest I place the while true statement or should I alter an existing while statement and replace it with your suggestion"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1523489391, "post_id": 49785586, "comment_id": 86587037, "body": "I think <code>while returnProgram ==0:</code> (line 32) is the one you want to replace. You also need to not immediately convert your input string to int, but wait until after you know its not a quit command."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1523489485, "post_id": 49785586, "comment_id": 86587066, "body": "Also try breaking your code down into a couple of functions. It will make your control flow clearer and eliminate large sections of code inside <code>try&#47;except</code> blocks."}, {"owner": {"reputation": 1, "user_id": 9633118, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372010842900204/picture?type=large", "display_name": "Jamie Tredinnick", "link": "https://stackoverflow.com/users/9633118/jamie-tredinnick"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1523495583, "post_id": 49785586, "comment_id": 86588356, "body": "@PaulRooney thanks paul I added     elif usersInput == &quot;quit&quot;:                 break             usersInput = int(usersInput) and removed the first instance of int() to the usersInput variable after &#39;quit&#39; had been defined ill work on using functions and methods in my next project still don&#39;t understand them, thanks for the help"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1523496096, "post_id": 49785586, "comment_id": 86588462, "body": "ok cool, but did it work?"}], "answers": [{"tags": [], "owner": {"reputation": 54, "user_id": 9633171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12017db1b49c0b6f431977681217ee26?s=128&d=identicon&r=PG&f=1", "display_name": "A. Ada.", "link": "https://stackoverflow.com/users/9633171/a-ada"}, "is_accepted": false, "score": 1, "last_activity_date": 1523489924, "creation_date": 1523489924, "answer_id": 49785885, "question_id": 49785586, "link": "https://stackoverflow.com/questions/49785586/how-to-implement-a-quit-option-into-my-code/49785885#49785885", "title": "How to implement a quit option into my code?", "body": "<p>You can add the following option using <a href=\"https://docs.python.org/3/library/constants.html#exit\" rel=\"nofollow noreferrer\">exit</a></p>\n\n<pre><code>elif numListInput == -1:\n    exit(0)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9633118, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372010842900204/picture?type=large", "display_name": "Jamie Tredinnick", "link": "https://stackoverflow.com/users/9633118/jamie-tredinnick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523494892, "creation_date": 1523487680, "last_edit_date": 1523494892, "question_id": 49785586, "link": "https://stackoverflow.com/questions/49785586/how-to-implement-a-quit-option-into-my-code", "title": "How to implement a quit option into my code?", "body": "<p>hi I'm fairly new to programming and am currently writing the classic dice rolling simulator in python 3.6.</p>\n\n<p>I'm trying to make it as user-friendly as I can hence the amount of code there is, I've written the code and it works but I'm having trouble creating a part of the code where if the user types in 'quit' into the 'usersInput' variable it will break the loop and quit the program. </p>\n\n<p>I'm not currently sure on where and how to place this condition into the code any help will be of great thanks.</p>\n\n<pre><code>import math\nimport random\nimport time\n\nnumberList = [4,6,8,10,12,20] #list of dice sides\n\n\nprint ('\\n'*100) #keeping the screen clean!\n\nprint(\"Hello User!\") #Intro welcome\n\nnameLoop = 0 #loop variable\n\nwhile nameLoop &lt;= 0:#start a loop for inputting name\n    usersName = str(input(\"Please enter your name:\"))\n    if len(usersName) &lt;= 0 or usersName == ' ':\n        print('\\n'*100 + \"You need to enter a name\")\n    else:\n        nameLoop += 1\n        print ('\\n'*100)\n        print (\"Hi \"+usersName+\",\"+\" let's get started\")\n        time.sleep(3)\n\nprint ('\\n'*50)\nreturnProgram = 0#loop variable\nwhile returnProgram ==0:#returns user to the welcome page\n    print (\"Welcome to the dice rolling simulator!\")#welcome page\n    print ('\\n')#new line\n\n\n    try:\n        usersInput = int(input(\"\"\"To roll a die please input how many sides\nyou would like the die to have or press the\n*ENTER* key to choose from a list:\"\"\"))\n        if usersInput == 0:#catches if a user tries to randomize a number between 0 and 0\n            print ('\\n'*100)\n            print(\"That's not enough sides! Try again!\")#error message\n            time.sleep(2)\n            print ('\\n'*100)\n            continue#continues loop and returns to welcome message\n    except ValueError:#perform action if input isnt an integer\n        print ('\\n'*100)\n        print(\"Type '0' to return\")\n        print (\"Choose a number from the list:\")\n        print (numberList)#callinf a list of pres-selected numbers to roll from\n\n        numListInputLoop = 0#loop variable\n        while numListInputLoop == 0:#enters loop for user to input more than one option from 'numberList'\n            try:\n                numListInput = int(input(\":\"))\n            except ValueError:\n                print(\"That's not a valid input\")#catches if a user tries to enter a word/letter\n                print(numberList)#reprints list of number options\n                continue#continues loop until user inputs an integer\n            else:#runs this code when a user inupts a valid integer\n                if numListInput == 4:#runs dice roll code for each option on the number list\n                    print(\"The dice rolled a %d\" % random.randint(1,4))\n                elif numListInput == 6:\n                    print(\"The dice rolled a %d\" % random.randint(1,6))\n                elif numListInput == 8:\n                    print(\"The dice rolled a %d\" % random.randint(1,8))\n                elif numListInput == 10:\n                    print(\"The dice rolled a %d\" % random.randint(1,10))\n                elif numListInput == 12:\n                    print(\"The dice rolled a %d\" % random.randint(1,12))\n                elif numListInput == 20:\n                    print(\"The dice rolled a %d\" % random.randint(1,20))\n                elif numListInput == 0:\n                    numListInputLoop += 1#exits 'numListInputLoop' loop to return to welcome page\n                    print ('\\n'*100)\n                else:\n                    print(\"That's not in the list of options\")#incase the user tries to enter anything else\n                    print(numberList)\n\n    else:#perform action if 'usersInput' is a integer\n        if usersInput == 1:#just for printing plural or singular version of the word 'side(s)'\n            print ('\\n'*100)\n            print(\"You wish to roll a die with %d side\" % usersInput)#singular\n            time.sleep(2)\n        else:\n            print ('\\n'*100)\n            print(\"You wish to roll a die with %d sides\" % usersInput)#plural\n            time.sleep(2)\n\n        diceRoll = (\"%s rolled a %s sided die\" % (usersName,usersInput))\n        rollingOne = (\"Rolling.\")\n        rollingTwo = (\"Rolling..\")\n        rollingThree = (\"Rolling...\")\n\n        print('\\n'*100)\n        print(rollingOne)\n        time.sleep(1)\n        print('\\n'*100)\n        print(rollingTwo)\n        time.sleep(1)\n        print('\\n'*100)\n        print(rollingThree)\n        time.sleep(1)\n        print('\\n'*100)\n        print(rollingOne)\n        time.sleep(1)\n        print('\\n'*100)\n        print(rollingTwo)\n        time.sleep(1)\n        print('\\n'*100)\n        print(rollingThree)\n        time.sleep(1)\n        print ('\\n'*100)#gimicy loading screen ;)\n\n        print(diceRoll)\n        print(\"The die landed on %s\" % random.randint(1,usersInput))\n        time.sleep(5)\n        print ('\\n'*100)\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "neural-network", "keras"], "comments": [{"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1523487591, "post_id": 49785536, "comment_id": 86586571, "body": "See <a href=\"https://github.com/keras-team/keras/issues/7874\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 1737, "user_id": 3657151, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a1eae85cb0bc9cf52b1b8cd64b31ec6?s=128&d=identicon&r=PG&f=1", "display_name": "user14492", "link": "https://stackoverflow.com/users/3657151/user14492"}, "reply_to_user": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 1, "creation_date": 1523487820, "post_id": 49785536, "comment_id": 86586632, "body": "@ParagS.Chandakkar Already saw that before I posted here. For them it returns a values, AFIK."}], "answers": [{"comments": [{"owner": {"reputation": 1737, "user_id": 3657151, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a1eae85cb0bc9cf52b1b8cd64b31ec6?s=128&d=identicon&r=PG&f=1", "display_name": "user14492", "link": "https://stackoverflow.com/users/3657151/user14492"}, "edited": false, "score": 0, "creation_date": 1523487751, "post_id": 49785582, "comment_id": 86586608, "body": "Nvm. I didn&#39;t see the import statement. Got it. Thx."}, {"owner": {"reputation": 27413, "user_id": 345660, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5bc3aeec09464c41078ccafacfa7832b?s=128&d=identicon&r=PG", "display_name": "Zach", "link": "https://stackoverflow.com/users/345660/zach"}, "edited": false, "score": 2, "creation_date": 1537306345, "post_id": 49785582, "comment_id": 91734820, "body": "What if I want to reset the learning rate?  e.g. something like <code>model.optimizer.lr=10</code>?"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1606399452, "post_id": 49785582, "comment_id": 114956560, "body": "Or <code>model.optimizer.lr.numpy()</code> in recent tensorflow versions. <code>lr</code> is just a variable, so assigning it works as usual: <code>model.optimizer.lr.assign(0.1)</code>"}], "tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": true, "score": 41, "last_activity_date": 1581005582, "last_edit_date": 1581005582, "creation_date": 1523487647, "answer_id": 49785582, "question_id": 49785536, "link": "https://stackoverflow.com/questions/49785536/get-learning-rate-of-keras-model/49785582#49785582", "title": "Get learning rate of keras model", "body": "<p>Use <code>eval()</code> from <code>keras.backend</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import keras.backend as K\nfrom keras.models import Sequential\nfrom keras.layers import Dense\n\nmodel = Sequential()\nmodel.add(Dense(1, input_shape=(1,)))\nmodel.add(Dense(1))\nmodel.compile(loss='mse', optimizer='adam')\n\nprint(K.eval(model.optimizer.lr))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0.001\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 3838949, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2862b7073538e2db80be0994cf541138?s=128&d=identicon&r=PG", "display_name": "Danny Wang", "link": "https://stackoverflow.com/users/3838949/danny-wang"}, "edited": false, "score": 10, "creation_date": 1548359041, "post_id": 49793497, "comment_id": 95523550, "body": "Op was asking how to GET the learning rate. Not set. Note that Keras allow dynamical changing of lr, so it&#39;s possible that you want to know the lr at a later stage after a few epochs of training"}], "tags": [], "owner": {"reputation": 744, "user_id": 8415360, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657521617653035/picture?type=large", "display_name": "Mimii Cheng", "link": "https://stackoverflow.com/users/8415360/mimii-cheng"}, "is_accepted": false, "score": 20, "last_activity_date": 1586183108, "last_edit_date": 1586183108, "creation_date": 1523526870, "answer_id": 49793497, "question_id": 49785536, "link": "https://stackoverflow.com/questions/49785536/get-learning-rate-of-keras-model/49793497#49793497", "title": "Get learning rate of keras model", "body": "<p>You can change your learning rate by  </p>\n\n<pre><code>from keras.optimizers import Adam\n\nmodel.compile(optimizer=Adam(lr=0.001), \n              loss='categorical_crossentropy', \n              metrics=['accuracy'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1667, "user_id": 1329739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41830c0600e277c0c3e0c956eb1716cb?s=128&d=identicon&r=PG", "display_name": "dturvene", "link": "https://stackoverflow.com/users/1329739/dturvene"}, "is_accepted": false, "score": 1, "last_activity_date": 1564693854, "creation_date": 1564693854, "answer_id": 57317040, "question_id": 49785536, "link": "https://stackoverflow.com/questions/49785536/get-learning-rate-of-keras-model/57317040#57317040", "title": "Get learning rate of keras model", "body": "<p>An alternate way:</p>\n\n<ol>\n<li>create an optimizer instance</li>\n</ol>\n\n<blockquote>\n  <p>opt = keras.optimizers.SGD()</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>get the learning rate from the instance</li>\n</ol>\n\n<blockquote>\n  <p>print('learning rate={}'.format(opt.lr.numpy()))</p>\n</blockquote>\n\n<ol start=\"3\">\n<li>use the optimizer in the model</li>\n</ol>\n\n<blockquote>\n  <p>model.compile(optimizer = opt, ...)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 606, "user_id": 3497258, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35f880339f03352b8e66231498e25779?s=128&d=identicon&r=PG&f=1", "display_name": "eXistanCe", "link": "https://stackoverflow.com/users/3497258/existance"}, "is_accepted": false, "score": 15, "last_activity_date": 1567541412, "creation_date": 1567541412, "answer_id": 57778151, "question_id": 49785536, "link": "https://stackoverflow.com/questions/49785536/get-learning-rate-of-keras-model/57778151#57778151", "title": "Get learning rate of keras model", "body": "<p>The best way to get all information related to the optimizer would be with <code>.get_config()</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>model.compile(optimizer=optimizerF,\n                  loss=lossF,\n                  metrics=['accuracy'])\n\nmodel.optimizer.get_config()\n\n&gt;&gt;&gt; {'name': 'Adam', 'learning_rate': 0.001, 'decay': 0.0, 'beta_1': 0.9, 'beta_2': 0.999, 'epsilon': 1e-07, 'amsgrad': False}\n</code></pre>\n\n<p>It returns a dict with all information.</p>\n"}, {"comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1606399121, "post_id": 58303321, "comment_id": 114956382, "body": "<code>str(optimizer.__class__).split(..)...</code> -&gt; <code>optimizer.__class__.__name__</code>"}], "tags": [], "owner": {"reputation": 9150, "user_id": 6365112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5U4o6.png?s=128&g=1", "display_name": "Yahya", "link": "https://stackoverflow.com/users/6365112/yahya"}, "is_accepted": false, "score": 1, "last_activity_date": 1570650517, "last_edit_date": 1570650517, "creation_date": 1570621229, "answer_id": 58303321, "question_id": 49785536, "link": "https://stackoverflow.com/questions/49785536/get-learning-rate-of-keras-model/58303321#58303321", "title": "Get learning rate of keras model", "body": "<p>Some of the optimizers don't include their names in the configs.</p>\n\n<p>Here is a complete example on how to get the configs <strong>and</strong> how to reconstruct (i.e. clone) the optimizer from their configs (which includes the learning rate as well).</p>\n\n<pre><code>import keras.optimizers as opt\n\ndef get_opt_config(optimizer):\n    \"\"\"\n    Extract Optimizer Configs from an instance of\n    keras Optimizer\n    :param optimizer: instance of keras Optimizer.\n    :return: dict of optimizer configs.\n    \"\"\"\n    if not isinstance(optimizer, opt.Optimizer):\n        raise TypeError('optimizer should be instance of '\n                        'keras.optimizers.Optimizer '\n                        'Got {}.'.format(type(optimizer)))\n    opt_config = optimizer.get_config()\n    if 'name' not in opt_config.keys():\n        _name = str(optimizer.__class__).split('.')[-1] \\\n            .replace('\\'', '').replace('&gt;', '')\n        opt_config.update({'name': _name})\n    return opt_config\n\n\ndef clone_opt(opt_config):\n    \"\"\"\n    Clone keras optimizer from its configurations.\n    :param opt_config: dict, keras optimizer configs.\n    :return: instance of keras optimizer.\n    \"\"\"\n    if not isinstance(opt_config, dict):\n        raise TypeError('opt_config must be a dict. '\n                        'Got {}'.format(type(opt_config)))\n    if 'name' not in opt_config.keys():\n        raise ValueError('could not find the name of optimizer in opt_config')\n    name = opt_config.get('name')\n    params = {k: opt_config[k] for k in opt_config.keys() if k != 'name'}\n    if name.upper() == 'ADAM':\n        return opt.Adam(**params)\n    if name.upper() == 'NADAM':\n        return opt.Nadam(**params)\n    if name.upper() == 'ADAMAX':\n        return opt.Adamax(**params)\n    if name.upper() == 'ADADELTA':\n        return opt.Adadelta(**params)\n    if name.upper() == 'ADAGRAD':\n        return opt.Adagrad(**params)\n    if name.upper() == 'RMSPROP':\n        return opt.RMSprop()\n    if name.upper() == 'SGD':\n        return opt.SGD(**params)\n    raise ValueError('Unknown optimizer name. Available are: '\n                     '(\\'adam\\',\\'sgd\\', \\'rmsprop\\', \\'adagrad\\', '\n                     '\\'adadelta\\', \\'adamax\\', \\'nadam\\'). '\n                     'Got {}.'.format(name))\n</code></pre>\n\n<h2>Test</h2>\n\n<pre><code>if __name__ == '__main__':\n    rmsprop = opt.RMSprop()\n    configs = get_opt_config(rmsprop)\n    print(configs)\n    cloned_rmsprop = clone_opt(configs)\n    print(cloned_rmsprop)\n    print(cloned_rmsprop.get_config())\n</code></pre>\n\n<h2>Outputs</h2>\n\n<pre><code>{'lr': 0.0010000000474974513, 'rho': 0.8999999761581421, 'decay': 0.0, 'epsilon': 1e-07, 'name': 'RMSprop'}\n&lt;keras.optimizers.RMSprop object at 0x7f96370a9358&gt;\n{'lr': 0.0010000000474974513, 'rho': 0.8999999761581421, 'decay': 0.0, 'epsilon': 1e-07}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": false, "score": 1, "last_activity_date": 1606399726, "creation_date": 1606399726, "answer_id": 65023649, "question_id": 49785536, "link": "https://stackoverflow.com/questions/49785536/get-learning-rate-of-keras-model/65023649#65023649", "title": "Get learning rate of keras model", "body": "<p>With Tensorflow &gt;=2.0:</p>\n<pre><code>In [1]: import tensorflow as tf\n\nIn [2]: opt = tf.keras.optimizers.Adam()\n\nIn [3]: opt.lr.numpy()\nOut[3]: 0.001\n</code></pre>\n<p><code>lr</code> is just a <a href=\"https://www.tensorflow.org/api_docs/python/tf/Variable\" rel=\"nofollow noreferrer\"><code>tf.Variable</code></a>, so its value can be changed via <a href=\"https://www.tensorflow.org/api_docs/python/tf/Variable#assign\" rel=\"nofollow noreferrer\"><code>assign()</code></a> method:</p>\n<pre><code>In [4]: opt.lr.assign(0.1)\nOut[4]: &lt;tf.Variable 'UnreadVariable' shape=() dtype=float32, numpy=0.1&gt;\n\nIn [5]: opt.lr.numpy()\nOut[5]: 0.1\n</code></pre>\n<p>Same goes with the rest of hyperparameters:</p>\n<pre><code>In [6]: opt.decay.numpy()\nOut[6]: 0.0\n\nIn [7]: opt.beta_1.numpy()\nOut[7]: 0.9\n\nIn [8]: opt.beta_2.numpy()\nOut[8]: 0.999\n</code></pre>\n"}], "owner": {"reputation": 1737, "user_id": 3657151, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a1eae85cb0bc9cf52b1b8cd64b31ec6?s=128&d=identicon&r=PG&f=1", "display_name": "user14492", "link": "https://stackoverflow.com/users/3657151/user14492"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29787, "favorite_count": 3, "accepted_answer_id": 49785582, "answer_count": 6, "score": 23, "last_activity_date": 1606399726, "creation_date": 1523487362, "last_edit_date": 1523528430, "question_id": 49785536, "link": "https://stackoverflow.com/questions/49785536/get-learning-rate-of-keras-model", "title": "Get learning rate of keras model", "body": "<p>I cannot seem to get the value of learning rate. What I get is below. </p>\n\n<p>I've tried the model for 200 epochs and want to see/change the learning rate. Is this not the correct way?</p>\n\n<pre><code>&gt;&gt;&gt; print(ig_cnn_model.optimizer.lr)\n&lt;tf.Variable 'lr_6:0' shape=() dtype=float32_ref&gt;\n</code></pre>\n"}, {"tags": ["python", "string-matching"], "comments": [{"owner": {"reputation": 3461, "user_id": 166605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/49k8V.jpg?s=128&g=1", "display_name": "G&#252;nther Jena", "link": "https://stackoverflow.com/users/166605/g%c3%bcnther-jena"}, "edited": false, "score": 1, "creation_date": 1523487439, "post_id": 49785509, "comment_id": 86586529, "body": "from the example: why would <code>child support</code> by category 81? Wouldn&#39;t it be &#39;04&#39;? The category numbers in your second example even don&#39;t exist in the dictionary or am I&#39;m wrong?"}, {"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "reply_to_user": {"reputation": 3461, "user_id": 166605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/49k8V.jpg?s=128&g=1", "display_name": "G&#252;nther Jena", "link": "https://stackoverflow.com/users/166605/g%c3%bcnther-jena"}, "edited": false, "score": 0, "creation_date": 1523487471, "post_id": 49785509, "comment_id": 86586537, "body": "@G&#252;ntherJena I think the example they are giving us contains a dumbed down data set."}, {"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 1, "creation_date": 1523487510, "post_id": 49785509, "comment_id": 86586549, "body": "Why do the categories contain a single list with one item? Instead of <code>&quot;01&quot;:[&quot;cat1, cat2, ...&quot;]</code> Could <code>&quot;01&quot;:[&quot;cat1&quot;,&quot;cat2&quot;, ...]</code> work?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1523487589, "post_id": 49785509, "comment_id": 86586569, "body": "Take the values in the keyword string and split them by the comma and convert them into a <code>set</code>. Then you can take each job description and split it into words and iterate over the sets to see which has the maximum number of matches. It&#39;s simplistic but seems appropriate if its something you are coding yourself as a beginner."}, {"owner": {"reputation": 23, "user_id": 9561090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4e0f034e4f12961fa377d2ebc02f87?s=128&d=identicon&r=PG&f=1", "display_name": "Vera.J", "link": "https://stackoverflow.com/users/9561090/vera-j"}, "edited": false, "score": 0, "creation_date": 1523487599, "post_id": 49785509, "comment_id": 86586573, "body": "Sorry, you are not wrong. the child support should be &#39;04&#39;. I just want to show the desired final layout. I&#39;ll edit a bit"}, {"owner": {"reputation": 3461, "user_id": 166605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/49k8V.jpg?s=128&g=1", "display_name": "G&#252;nther Jena", "link": "https://stackoverflow.com/users/166605/g%c3%bcnther-jena"}, "reply_to_user": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1523526128, "post_id": 49785509, "comment_id": 86600694, "body": "@MustacheMoses You&#39;re right, a list that way makes no sense"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9561090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4e0f034e4f12961fa377d2ebc02f87?s=128&d=identicon&r=PG&f=1", "display_name": "Vera.J", "link": "https://stackoverflow.com/users/9561090/vera-j"}, "edited": false, "score": 0, "creation_date": 1523488742, "post_id": 49785627, "comment_id": 86586860, "body": "Thanks! But I have a huge list of job titles so I cannot run this function for each job title?"}, {"owner": {"reputation": 3461, "user_id": 166605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/49k8V.jpg?s=128&g=1", "display_name": "G&#252;nther Jena", "link": "https://stackoverflow.com/users/166605/g%c3%bcnther-jena"}, "reply_to_user": {"reputation": 23, "user_id": 9561090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4e0f034e4f12961fa377d2ebc02f87?s=128&d=identicon&r=PG&f=1", "display_name": "Vera.J", "link": "https://stackoverflow.com/users/9561090/vera-j"}, "edited": false, "score": 0, "creation_date": 1523489089, "post_id": 49785627, "comment_id": 86586937, "body": "Sure, just added an example"}, {"owner": {"reputation": 3461, "user_id": 166605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/49k8V.jpg?s=128&g=1", "display_name": "G&#252;nther Jena", "link": "https://stackoverflow.com/users/166605/g%c3%bcnther-jena"}, "reply_to_user": {"reputation": 23, "user_id": 9561090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4e0f034e4f12961fa377d2ebc02f87?s=128&d=identicon&r=PG&f=1", "display_name": "Vera.J", "link": "https://stackoverflow.com/users/9561090/vera-j"}, "edited": false, "score": 0, "creation_date": 1523747647, "post_id": 49785627, "comment_id": 86689309, "body": "@Vera.J if you think this answer was solving your problem please consider checking this answer as the correct one. thx"}], "tags": [], "owner": {"reputation": 3461, "user_id": 166605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/49k8V.jpg?s=128&g=1", "display_name": "G&#252;nther Jena", "link": "https://stackoverflow.com/users/166605/g%c3%bcnther-jena"}, "is_accepted": true, "score": 0, "last_activity_date": 1523488843, "last_edit_date": 1523488843, "creation_date": 1523487979, "answer_id": 49785627, "question_id": 49785509, "link": "https://stackoverflow.com/questions/49785509/how-to-get-the-most-matched-value-from-a-python-dictionary/49785627#49785627", "title": "How to get the most matched value from a python dictionary", "body": "<p>Use the following solution:</p>\n\n<pre><code>def match_job_title(category_dict, job_title):                                                                           \n  job_title=set(job_title.split(' ')) # make a set with job title words                                                                                   \n  best_match=0 # the best number of  matches                                                                                                          \n  best_category=None # the best category                                                                                                    \n\n  for category, keywords in category_dict.items(): # iterate through category dict                                                                      \n    keywords=set(keywords[0].split(sep=', ')) # make set of keywords                                                                            \n    matches=len(keywords.intersection(job_title)) # intersect and get number of elements                                                                        \n    if matches&gt;best_match: # if it's better use this category                                                                                             \n      best_match=matches                                                                                                 \n      best_category=category                                                                                             \n\n  return best_category\n</code></pre>\n\n<p>Using it via:</p>\n\n<pre><code>&gt;&gt;&gt; d={ '01': ['advertising, representatives, financial, miscellaneous, other, sales'],                                      \n        '02': ['musicians, workers, officials, entertainers, actors, singers, competitors, dancers'],                          \n        '03': ['movers, station, gas, of, stock, pumping, workers, hoist, mining, freight, truck'],                            \n        '04': ['child, support, children, disable, supplemental, security, income']}\n\n&gt;&gt;&gt; match_job_title(d, 'child support')\n04\n&gt;&gt;&gt; match_job_title(d, 'financial femme fatal')\n01\n&gt;&gt;&gt; match_job_title(d, 'circus clown')==None\nTrue\n&gt;&gt;&gt; for job in ['child support', 'art director', 'truck driver']:\n...   print(job, match_job_title(d, job))\nchild support 04\nart director None\ntruck driver 03\n</code></pre>\n\n<p>A more pythonic dictionary would look like this (would need minor adaptions in code above):</p>\n\n<ul>\n<li>keys seems to be <code>int</code>, so let them be <code>int</code></li>\n<li>values should be <a href=\"https://docs.python.org/2/library/sets.html#set-objects\" rel=\"nofollow noreferrer\">sets</a> of keywords</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>{1: {'advertising', 'representatives', 'financial', 'miscellaneous', 'other', 'sales'},\n 2: {'musicians', 'workers', 'officials', 'entertainers', 'actors', 'singers', 'competitors', 'dancers'},\n 3: {'movers', 'station', 'gas', 'of', 'stock', 'pumping', 'workers', 'hoist', 'mining', 'freight', 'truck'},\n 4: {'child', 'support', 'children', 'disable', 'supplemental', 'security', 'income'}}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9561090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4e0f034e4f12961fa377d2ebc02f87?s=128&d=identicon&r=PG&f=1", "display_name": "Vera.J", "link": "https://stackoverflow.com/users/9561090/vera-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 49785627, "answer_count": 1, "score": 1, "last_activity_date": 1523488843, "creation_date": 1523487183, "last_edit_date": 1523487933, "question_id": 49785509, "link": "https://stackoverflow.com/questions/49785509/how-to-get-the-most-matched-value-from-a-python-dictionary", "title": "How to get the most matched value from a python dictionary", "body": "<p>I have a dictionary of job category keywords looks like this:</p>\n\n<pre><code>{'01': ['advertising, representatives, financial, miscellaneous, other, sales'],\n '02': ['musicians, workers, officials, entertainers, actors, singers, competitors, dancers'],\n '03': ['movers, station, gas, of, stock, pumping, workers, hoist, mining, freight, truck'],\n '04': ['child, support, children, disable, supplemental, security, income']}\n</code></pre>\n\n<p>I also have a list of job titles:</p>\n\n<pre><code>child support\nart director\ndriver\nassistant specialist\n</code></pre>\n\n<p>I am wondering if there is a way to find the most matched job category for each job title. So what I want is a new column of a key from the dictionary for each in the job title list.</p>\n\n<pre><code>job title             category     \nchild support           04\nart director            23\ntruck driver            03\nassistant specialist    17\n</code></pre>\n\n<p>The key is representing a broad job category.\nThe value in this dictionary is split unique words of more detailed subcategory names. \nA problem is the words in job title may not exist in any category names.\nAnd the words may exist in many categories.</p>\n"}, {"tags": ["python", "image", "list", "rgba"], "comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1523913216, "post_id": 49785496, "comment_id": 86748087, "body": "Because your image data is in a 1D list, it is impossible to convert this into a 2D representation if you don&#39;t have the expected rows and columns.  There are many combinations of rows and columns that can fit the image data provided so this question isn&#39;t possible to answer."}], "answers": [{"tags": [], "owner": {"reputation": 431, "user_id": 8731135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31403414a1f928e7ab619ff30e3a1b0c?s=128&d=identicon&r=PG&f=1", "display_name": "Baedsch", "link": "https://stackoverflow.com/users/8731135/baedsch"}, "is_accepted": false, "score": 0, "last_activity_date": 1523487335, "creation_date": 1523487335, "answer_id": 49785530, "question_id": 49785496, "link": "https://stackoverflow.com/questions/49785496/i-have-a-list-with-rgba-tuples-and-i-want-convert-it-to-and-image-and-save-it/49785530#49785530", "title": "I have a list with RGBA tuples and I want convert it to and image and save it", "body": "<p><a href=\"https://github.com/drj11/pypng/\" rel=\"nofollow noreferrer\">PyPNG</a>. writes NumPy arrays to images.</p>\n\n<pre><code>png.from_array([[255, 0, 0, 255],\n                [0, 255, 255, 0]], 'L').save(\"file.png\")\n</code></pre>\n\n<p>will do it</p>\n"}, {"tags": [], "owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1523489929, "creation_date": 1523489929, "answer_id": 49785886, "question_id": 49785496, "link": "https://stackoverflow.com/questions/49785496/i-have-a-list-with-rgba-tuples-and-i-want-convert-it-to-and-image-and-save-it/49785886#49785886", "title": "I have a list with RGBA tuples and I want convert it to and image and save it", "body": "<p>You can use the <a href=\"http://www.effbot.org/imagingbook/image.htm#tag-Image.Image.putdata\" rel=\"nofollow noreferrer\">Python Imaging Library</a> as an alternative, to convert your array to image:</p>\n\n<pre><code>from PIL import Image\n\npixels = [(255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (204, 204, 204, 255), (204, 204, 204, 255), (119, 119, 119, 255), (119, 119, 119, 255), (204, 204, 204, 255), (204, 204, 204, 255), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0)......]\n\n#Sample values of width and height. Change them according to your needs.\nsize = (50,50)\n\nfileName = \"image.png\"\n\nimage = Image(\"RGBA\",size)\nimage.putdata(pixels)\nimage.save(fileName)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9450353, "user_type": "registered", "profile_image": "https://graph.facebook.com/1769982243052957/picture?type=large", "display_name": "D&#39;Alex Georgiou", "link": "https://stackoverflow.com/users/9450353/dalex-georgiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1523604459, "creation_date": 1523487113, "last_edit_date": 1523495170, "question_id": 49785496, "link": "https://stackoverflow.com/questions/49785496/i-have-a-list-with-rgba-tuples-and-i-want-convert-it-to-and-image-and-save-it", "title": "I have a list with RGBA tuples and I want convert it to and image and save it", "body": "<p>I have these:</p>\n\n<pre><code>pixels = [(255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (204, 204, 204, 255), (204, 204, 204, 255), (119, 119, 119, 255), (119, 119, 119, 255), (204, 204, 204, 255), (204, 204, 204, 255), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0), (255, 255, 255, 0)......]\n</code></pre>\n\n<p>It's a list with a lot of <code>tuple</code>s and I want to convert it into an image.</p>\n\n<p>I can't find any solution.</p>\n"}, {"tags": ["python", "debugging", "line-numbers"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1523487128, "post_id": 49785461, "comment_id": 86586438, "body": "The column numbers of <i>what</i>?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1523488484, "post_id": 49785461, "comment_id": 86586807, "body": "Since <code>sys.settrace</code> trace functions aren&#39;t called on a sub-line basis, you&#39;ll probably have to do some level of bytecode rewriting anyway."}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1523488982, "creation_date": 1523488982, "answer_id": 49785780, "question_id": 49785461, "link": "https://stackoverflow.com/questions/49785461/column-number-from-a-python-frame-object/49785780#49785780", "title": "Column number from a Python frame object?", "body": "<p>Python doesn't save the column number information you want, whether in the frame object or the code object. You'd have to retrieve the source code, examine the last executed bytecode instruction, and figure out what column of the source code to match that instruction to. That's probably going to be a lot of work.</p>\n"}], "owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523562320, "creation_date": 1523486855, "last_edit_date": 1523562320, "question_id": 49785461, "link": "https://stackoverflow.com/questions/49785461/column-number-from-a-python-frame-object", "title": "Column number from a Python frame object?", "body": "<p>I know how to get the line number from a frame object in Python. For example</p>\n\n<pre><code>def f():\n    import sys\n    print(sys._getframe(1).f_lineno)\n    return 1\n\nf() + f()\n</code></pre>\n\n<p>If you save this to a file <code>test.py</code> and run <code>python test.py</code>, it will print </p>\n\n<pre><code>6\n6\n</code></pre>\n\n<p>But is it possible to get the column number, that is, something like</p>\n\n<pre><code>1\n7\n</code></pre>\n\n<p>(or some offsets thereof)? </p>\n\n<p>The <a href=\"https://docs.python.org/3/library/inspect.html\" rel=\"nofollow noreferrer\">docs</a> seem to imply it isn't saved, but maybe it can be reconstructed from the code object somehow? If it requires using <code>inspect.getsource</code> that's acceptable, but I'd like to have something that's always correct, not heuristics. </p>\n\n<p>My goal here is to make a debugger that would let you step into specific parts of a single line expression. </p>\n"}, {"tags": ["python", "subclass"], "answers": [{"comments": [{"owner": {"reputation": 4488, "user_id": 2529619, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8fe42206cbd503e03319de38fa7fd36b?s=128&d=identicon&r=PG", "display_name": "ChaimG", "link": "https://stackoverflow.com/users/2529619/chaimg"}, "edited": false, "score": 0, "creation_date": 1523487131, "post_id": 49785485, "comment_id": 86586440, "body": "I tried replacing the line with  <code>super().__new__(self, value, context)</code>. Result: No error, but outputs <code>None</code>"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 4488, "user_id": 2529619, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8fe42206cbd503e03319de38fa7fd36b?s=128&d=identicon&r=PG", "display_name": "ChaimG", "link": "https://stackoverflow.com/users/2529619/chaimg"}, "edited": false, "score": 0, "creation_date": 1523487264, "post_id": 49785485, "comment_id": 86586478, "body": "@ChaimG  Then <code>return super().__new__(value, context)</code> the value as suggested above"}], "tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": false, "score": 3, "last_activity_date": 1523490032, "last_edit_date": 1523490032, "creation_date": 1523487026, "answer_id": 49785485, "question_id": 49785427, "link": "https://stackoverflow.com/questions/49785427/convert-float-to-decimal-preserving-str-representation/49785485#49785485", "title": "Convert float to Decimal preserving str() representation", "body": "<p>Try:  </p>\n\n<pre><code>super().__new__(self, value, context)\n</code></pre>\n\n<p><code>def __new__(self, value=\"0\", context=None):</code> requires three positional arguments, <code>self</code>, <code>value</code> and <code>context</code>.</p>\n\n<p>When you do <code>super().__new__(value, context)</code> <code>self</code> (from your function) becomes <code>value</code> and <code>context</code> becomes <code>value</code>, the last two values do not need to be defined to use the function so there is nothing alerting you to this,\n<code>context</code> never actually gets passed to <code>super().__new__()</code></p>\n"}, {"comments": [{"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 2, "creation_date": 1523487708, "post_id": 49785502, "comment_id": 86586602, "body": "We cannot use <code>__init__</code> here, since the <code>Decimal</code> class does not use <code>__init__</code>. It is noted in the <a href=\"https://github.com/python/cpython/blob/3.6/Lib/_pydecimal.py#L563\" rel=\"nofollow noreferrer\">source code</a> that <code>We&#39;re immutable, so use __new__ not __init__</code>. Also, <code>__init__</code> should not return anything."}], "tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": true, "score": 3, "last_activity_date": 1523487875, "last_edit_date": 1523487875, "creation_date": 1523487148, "answer_id": 49785502, "question_id": 49785427, "link": "https://stackoverflow.com/questions/49785427/convert-float-to-decimal-preserving-str-representation/49785502#49785502", "title": "Convert float to Decimal preserving str() representation", "body": "<p>You're passing the wrong arguments to  <code>__new__</code> and you're not returning anything.</p>\n\n<p><a href=\"https://docs.python.org/3/reference/datamodel.html#object.__new__\" rel=\"nofollow noreferrer\">Documentation on how to use <code>__new__</code></a></p>\n\n<pre><code>class D(decimal.Decimal):\n\n    def __new__(cls, value=\"0\", context=None):\n        value = str(value)\n        return super().__new__(cls, value, context)\n</code></pre>\n\n<p>That being said, you should probably be using <code>__init__</code> here, since you're not doing any class type manipulation that requires the use of <code>__new__</code>.</p>\n\n<pre><code>class D(decimal.Decimal):\n\n    def __init__(self, value=\"0\", context=None):\n        value = str(value)\n        super().__init__(self, value, context)\n</code></pre>\n"}], "owner": {"reputation": 4488, "user_id": 2529619, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8fe42206cbd503e03319de38fa7fd36b?s=128&d=identicon&r=PG", "display_name": "ChaimG", "link": "https://stackoverflow.com/users/2529619/chaimg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 49785502, "answer_count": 2, "score": 3, "last_activity_date": 1523506238, "creation_date": 1523486632, "last_edit_date": 1523506238, "question_id": 49785427, "link": "https://stackoverflow.com/questions/49785427/convert-float-to-decimal-preserving-str-representation", "title": "Convert float to Decimal preserving str() representation", "body": "<p>I am trying to subclass <code>decimal.Decimal</code> so that floating point numbers get treated as strings, which in turn are treated as decimals.</p>\n\n<p>Instead of:</p>\n\n<pre><code>&gt;&gt;&gt; decimal.Decimal(1.1)\nDecimal('1.100000000000000088817841970012523233890533447265625')\n</code></pre>\n\n<p>I convert the float to a str which in turn gets converted into Decimal:</p>\n\n<pre><code>&gt;&gt;&gt; decimal.Decimal(str(1.1))\nDecimal('1.1')\n</code></pre>\n\n<p>Since I find myself doing this a lot, I decided to subclass Decimal. But the following code throws an exception in Python 3.6.4:</p>\n\n<pre><code>import decimal\n\nclass D(decimal.Decimal):\n    def __new__(self, value=\"0\", context=None):\n        value = str(value)\n        super().__new__(value, context)\n\nd = D(1.1)\nprint(d)\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Better/.PyCharmCE2018.1/config/scratches/scratch_4.py\", line 8, in &lt;module&gt;\n    d = D(1.1)\n  File \"C:/Users/Better/.PyCharmCE2018.1/config/scratches/scratch_4.py\", line 6, in __new__\n    super().__new__(value, context)\nTypeError: decimal.Decimal.__new__(X): X is not a type object (str)\n</code></pre>\n\n<p>What is the solution?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 3, "creation_date": 1523486440, "post_id": 49785391, "comment_id": 86586238, "body": "what have you tried? Are you looking for this specific date or any date in this format?"}, {"owner": {"reputation": 39, "user_id": 7136742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6253ab9c1f74096110bf3f76c9a61eb4?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Chavan", "link": "https://stackoverflow.com/users/7136742/gaurav-chavan"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1523487972, "post_id": 49785391, "comment_id": 86586669, "body": "So, I have an html snippet web-scrapped from a site. And I need to extract the date from the string which is in this format. I tried re.search but the pattern returns none.                     print(re.search(r&#39;^[1-3]*[1-9]*\\b[a-zA-Z]*\\b[1-9]{4}&#39;,str_my&zwnj;&#8203;divs)&quot;"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1523488385, "post_id": 49785391, "comment_id": 86586774, "body": "try: <code>\\b[1-3][1-9]\\s+[a-zA-Z]*\\s+[0-9]{4}\\b</code>  <a href=\"https://regex101.com/r/clHalz/1\" rel=\"nofollow noreferrer\">regex101.com/r/clHalz/1</a>"}], "answers": [{"tags": [], "owner": {"reputation": 442, "user_id": 4028195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btsHJ.png?s=128&g=1", "display_name": "Sam Collins", "link": "https://stackoverflow.com/users/4028195/sam-collins"}, "is_accepted": false, "score": 1, "last_activity_date": 1523488669, "creation_date": 1523488669, "answer_id": 49785737, "question_id": 49785391, "link": "https://stackoverflow.com/questions/49785391/regular-expression-in-python3/49785737#49785737", "title": "Regular Expression in Python3", "body": "<p>If its in the format like \"12 Apr 2018\" then you might be better off using <a href=\"https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior\" rel=\"nofollow noreferrer\">strptime()</a>. You might need to use regex though if its surrounded by other page content.</p>\n\n<pre><code>datetime.datetime.strptime(\"12 Apr 2018\", \"%d %b %Y\")\n</code></pre>\n\n<p>Which will give you back a datetime object like below</p>\n\n<pre><code>datetime.datetime(2018, 4, 12, 0, 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1523488937, "creation_date": 1523488937, "answer_id": 49785776, "question_id": 49785391, "link": "https://stackoverflow.com/questions/49785391/regular-expression-in-python3/49785776#49785776", "title": "Regular Expression in Python3", "body": "<p>You can use</p>\n\n<pre><code>\\b[1-3][0-9]\\s+[a-zA-Z]*\\s+[1-9][0-9]{3}\\b\n</code></pre>\n\n<p><a href=\"http://regex101.com/r/clHalz/2\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>It's based on you regex with some slight changes. I've replaced beginning/end of the line marks (<code>^$</code>)with word boundaries <code>\\b</code>. I've added spaces (<code>\\s+</code>) between date parts and I allowed zero in the day and year.</p>\n\n<p>When you have it, you can use <code>strptime</code>, as Sam Collins suggested.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 8008668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51acb846f5b81f2a5fab92401cf81b12?s=128&d=identicon&r=PG&f=1", "display_name": "Poke", "link": "https://stackoverflow.com/users/8008668/poke"}, "is_accepted": false, "score": 0, "last_activity_date": 1523489719, "last_edit_date": 1523489719, "creation_date": 1523489377, "answer_id": 49785827, "question_id": 49785391, "link": "https://stackoverflow.com/questions/49785391/regular-expression-in-python3/49785827#49785827", "title": "Regular Expression in Python3", "body": "<p>Assuming that the date is always in the format \"(numerical day) (3-letter abbreviated month) (4-digit year)\", the regex you want is <code>[0-9]{1,2}(?#any one digit or any two consecutive digits) [a-zA-Z]{3}(?#three letters) [0-9]{4}(?#four digits)</code></p>\n\n<p>The comments (the <code>(?#...)</code> bits) can, obviously, be omitted.</p>\n\n<p>I'd also suggest using the <code>findall</code> (or <code>finditer</code>), rather than the <code>search</code>, function of the compiled regular expression object.</p>\n\n<p>To turn the result(s) into a Python date object, I'd suggest Sam's answer - <code>time.strptime(result, \"%d %b %Y\")</code> - where '<code>result</code>' stores the matched str.</p>\n\n<p>Alternatively, for the regex, if you want it to be even more specific (though it might still catch invalid dates, like February 30), you could use <code>([0-2][0-9]|3[01]) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(?#maybe make this bit case-insensitive, if you want) [0-9]{4}</code></p>\n"}], "owner": {"reputation": 39, "user_id": 7136742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6253ab9c1f74096110bf3f76c9a61eb4?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Chavan", "link": "https://stackoverflow.com/users/7136742/gaurav-chavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1523490380, "creation_date": 1523486348, "last_edit_date": 1523490380, "question_id": 49785391, "link": "https://stackoverflow.com/questions/49785391/regular-expression-in-python3", "title": "Regular Expression in Python3", "body": "<p>How can I search a string with pattern <code>\"12 Apr 2018\"</code> in Python and convert it into a date object in python.</p>\n"}, {"tags": ["python", "tensorflow", "nvidia", "tensorrt"], "answers": [{"tags": [], "owner": {"reputation": 574, "user_id": 6302996, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/edab05f559752733cc153551b3548f10?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Kulkarni", "link": "https://stackoverflow.com/users/6302996/nikhil-kulkarni"}, "is_accepted": false, "score": 0, "last_activity_date": 1523487212, "creation_date": 1523487212, "answer_id": 49785512, "question_id": 49785298, "link": "https://stackoverflow.com/questions/49785298/attributeerror-module-object-has-no-attribute-from-tensorflow-frozen-model/49785512#49785512", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;from_tensorflow_frozen_model&#39;", "body": "<p>Just for the record (new to Python)\nI had named my py file name as uff </p>\n"}], "owner": {"reputation": 574, "user_id": 6302996, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/edab05f559752733cc153551b3548f10?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Kulkarni", "link": "https://stackoverflow.com/users/6302996/nikhil-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 819, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523487212, "creation_date": 1523485715, "last_edit_date": 1523486863, "question_id": 49785298, "link": "https://stackoverflow.com/questions/49785298/attributeerror-module-object-has-no-attribute-from-tensorflow-frozen-model", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;from_tensorflow_frozen_model&#39;", "body": "<p>I am trying to convert my PB model to tenrorrt uff model to make it work on tx2.</p>\n\n<p>I used the example code from the Nvidia forum and tried to execute it. \nI know it is some python package related issue but I am not able to solve it </p>\n\n<p>I get following error with the below code </p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>    import tensorflow as tf\n    from tensorflow.examples.tutorials.mnist import input_data\n\n    import tensorrt as trt\n    from tensorrt.parsers import uffparser\n\n\n    import pycuda.driver as cuda\n    import pycuda.autoinit\n    import numpy as np\n    from random import randint # generate a random test case\n    from PIL import Image\n    from matplotlib.pyplot import imshow #to show test case\n    import time #import system tools\n    import os\n\n    import uff\n\n    uff_model = uff.from_tensorflow_frozen_model('./rcnn_3chan.pb', ['image_tensor','detection_scores','detection_boxes' ,'detection_classes' ,'num_detections'])\n\n    parser.register_output(\"image_tensor\")\n    parser.register_output(\"detection_scores\")\n    parser.register_output(\"detection_boxes\")\n    parser.register_output(\"detection_classes\")\n    parser.register_output(\"num_detections\")\n</code></pre>\n\n\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code>    WARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tensorflow/contrib/learn/python/learn/datasets/base.py:198: retry (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed in a future version.\n    Instructions for updating:\n    Use the retry module or similar alternatives.\n    Traceback (most recent call last):\n      File \"uff.py\", line 5, in &lt;module&gt;\n        import tensorrt as trt\n      File \"/usr/local/lib/python2.7/dist-packages/tensorrt/__init__.py\", line 77, in &lt;module&gt;\n        from tensorrt import infer, parsers, utils, lite, plugins\n      File \"/usr/local/lib/python2.7/dist-packages/tensorrt/utils/__init__.py\", line 53, in &lt;module&gt;\n        from ._utils import *\n      File \"/usr/local/lib/python2.7/dist-packages/tensorrt/utils/_utils.py\", line 59, in &lt;module&gt;\n        import uff\n      File \"/home/fts/Downloads/Amruta/uff.py\", line 20, in &lt;module&gt;\n        uff_model = uff.from_tensorflow_frozen_model('./rcnn_3chan.pb', ['image_tensor','detection_scores','detection_boxes' ,'detection_classes' ,'num_detections'])\n    AttributeError: 'module' object has no attribute 'from_tensorflow_frozen_model'\n</code></pre>\n\n\n\n<p>My env Variables:</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>    export PATH=$PATH:/usr/local/cuda-9.0/bin/:/home/fts/Downloads/TensorRT-3.0.4/lib\n    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/fts/Downloads/TensorRT-3.0.4/lib\n    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-9.0/lib64:/usr/local/lib/x86_64-linux-gnu:/usr/local/cuda-9.0/lib64:/usr/local/lib/x86_64-linux-gnu\n    export CUDA_ROOT=/usr/local/cuda-9.0\n    export PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}\n    export LD_LIBRARY_PATH=/usr/local/cuda-9.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\n    export CUDA_HOME=/usr/local/cuda-9.0\n    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/extras/CUPTI/lib64\n</code></pre>\n\n\n"}, {"tags": ["python", "tensorflow", "object-detection"], "comments": [{"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 1, "creation_date": 1523486004, "post_id": 49785286, "comment_id": 86586111, "body": "You should time each operation to find the bottleneck. I&#39;m thinking its the opening image part."}, {"owner": {"reputation": 55, "user_id": 9633065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d485002345568fd629cd2217f1c832bd?s=128&d=identicon&r=PG&f=1", "display_name": "dsBoulder", "link": "https://stackoverflow.com/users/9633065/dsboulder"}, "reply_to_user": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 0, "creation_date": 1523486778, "post_id": 49785286, "comment_id": 86586329, "body": "I will try that. Thank you."}, {"owner": {"reputation": 472, "user_id": 4542891, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pJLtCAOY21Q/AAAAAAAAAAI/AAAAAAAAAGw/uhrhhBNT9zA/photo.jpg?sz=128", "display_name": "Sachin Patel", "link": "https://stackoverflow.com/users/4542891/sachin-patel"}, "edited": false, "score": 0, "creation_date": 1527593613, "post_id": 49785286, "comment_id": 88175777, "body": "Hi, @dsBoulder I am also facing the issue, the prediction is taking around 25-30 secs on GPU. Did you find any solution?. If yes can you post it as an answer?"}, {"owner": {"reputation": 484, "user_id": 5612215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Ke3I61z_BjE/AAAAAAAAAAI/AAAAAAAAAGI/FSTgOs6TWbo/photo.jpg?sz=128", "display_name": "Salman Ghauri", "link": "https://stackoverflow.com/users/5612215/salman-ghauri"}, "edited": false, "score": 0, "creation_date": 1540539671, "post_id": 49785286, "comment_id": 92911511, "body": "I read same thing on a github page, seems to be problem with Image.open I/O operation, this time can be significantly reduces by using opencv. Using tf server, I am able to achieve inference in 0.16 sec using this GPU."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 7685107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXX3B.png?s=128&g=1", "display_name": "Siddharth Das", "link": "https://stackoverflow.com/users/7685107/siddharth-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1559722771, "creation_date": 1559722771, "answer_id": 56456654, "question_id": 49785286, "link": "https://stackoverflow.com/questions/49785286/why-are-my-making-predictions-so-slow-using-faster-rcnn-using-tensorflows-object/56456654#56456654", "title": "Why are my making predictions so slow using Faster RCNN using Tensorflows Object Detection API?", "body": "<p>If you are making multiple prediction on same model then you can reduce the prediction time by loading the detection graph once and only run the session for each prediction. This will take time for first prediction but succeeding prediction will take less time.\nBut in case of using different model for each prediction, Ididn't find any way out. </p>\n"}], "owner": {"reputation": 55, "user_id": 9633065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d485002345568fd629cd2217f1c832bd?s=128&d=identicon&r=PG&f=1", "display_name": "dsBoulder", "link": "https://stackoverflow.com/users/9633065/dsboulder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 759, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1559722771, "creation_date": 1523485642, "question_id": 49785286, "link": "https://stackoverflow.com/questions/49785286/why-are-my-making-predictions-so-slow-using-faster-rcnn-using-tensorflows-object", "title": "Why are my making predictions so slow using Faster RCNN using Tensorflows Object Detection API?", "body": "<p>I am using Tensorflows Object Detection api to train my own object detection with my own data set. My issue is that it takes roughly 25-30sec to predict each image. That includes reading the image and drawing the bounding boxes. I am running on a NVIDIA K80 GPU with 1 core. Any guidance to make this go faster? I basically adopted the prediction script from the Object Detection api.</p>\n\n<p>Here are the two functions I used to make my predictions:</p>\n\n<pre><code>def predict_image(TEST_IMAGE_PATHS, PATH_TO_CKPT, category_index, save_path):\n    detection_graph = load_detection_graph(PATH_TO_CKPT)\n    prediction_dict = defaultdict()\n    start_time = time.time()\n    for image_path in TEST_IMAGE_PATHS:\n        toc = time.time()\n        filename = image_path.split('/')[-1]\n        image = Image.open(image_path)\n        # the array based representation of the image will be used later in order to prepare the\n        # result image with boxes and labels on it.\n        image_np = load_image_into_numpy_array(image)\n        # Expand dimensions since the model expects images to have shape: [1, None, None, 3]\n        image_np_expanded = np.expand_dims(image_np, axis=0)\n        # Actual detection.\n        output_dict = run_inference_for_single_image(image_np, detection_graph, filename)\n        # Visualization of the results of a detection.\n\n        vis_util.visualize_boxes_and_labels_on_image_array(\n          image_np,\n          output_dict['detection_boxes'],\n          output_dict['detection_classes'],\n          output_dict['detection_scores'],\n          category_index,\n          instance_masks=output_dict.get('detection_masks'),\n          use_normalized_coordinates=True,\n          line_thickness=8)\n        prediction_dict[filename] = output_dict\n\n        tic = time.time()\n        print('{0} saved in {1:.2f}sec'.format(filename, tic-toc))\n    end_time = time.time()\n\n\n\ndef run_inference_for_single_image(image, graph, filename):\n  with graph.as_default():\n    with tf.Session() as sess:\n      # Get handles to input and output tensors\n      ops = tf.get_default_graph().get_operations()\n      all_tensor_names = {output.name for op in ops for output in op.outputs}\n      tensor_dict = {}\n      for key in [\n          'num_detections', 'detection_boxes', 'detection_scores',\n          'detection_classes', 'detection_masks'\n      ]:\n        tensor_name = key + ':0'\n        if tensor_name in all_tensor_names:\n          tensor_dict[key] = tf.get_default_graph().get_tensor_by_name(\n              tensor_name)\n      if 'detection_masks' in tensor_dict:\n        # The following processing is only for single image\n        detection_boxes = tf.squeeze(tensor_dict['detection_boxes'], [0])\n        detection_masks = tf.squeeze(tensor_dict['detection_masks'], [0])\n        # Reframe is required to translate mask from box coordinates to image coordinates and fit the image size.\n        real_num_detection = tf.cast(tensor_dict['num_detections'][0], tf.int32)\n        detection_boxes = tf.slice(detection_boxes, [0, 0], [real_num_detection, -1])\n        detection_masks = tf.slice(detection_masks, [0, 0, 0], [real_num_detection, -1, -1])\n        detection_masks_reframed = utils_ops.reframe_box_masks_to_image_masks(\n            detection_masks, detection_boxes, image.shape[0], image.shape[1])\n        detection_masks_reframed = tf.cast(\n            tf.greater(detection_masks_reframed, 0.5), tf.uint8)\n        # Follow the convention by adding back the batch dimension\n        tensor_dict['detection_masks'] = tf.expand_dims(\n            detection_masks_reframed, 0)\n      image_tensor = tf.get_default_graph().get_tensor_by_name('image_tensor:0')\n\n      # Run inference\n      output_dict = sess.run(tensor_dict,\n                             feed_dict={image_tensor: np.expand_dims(image, 0)})\n\n      # all outputs are float32 numpy arrays, so convert types as appropriate\n      output_dict['filename'] = filename\n      output_dict['num_detections'] = int(output_dict['num_detections'][0])\n      output_dict['detection_classes'] = output_dict[\n          'detection_classes'][0].astype(np.uint8)\n      output_dict['detection_boxes'] = output_dict['detection_boxes'][0]\n      output_dict['detection_scores'] = output_dict['detection_scores'][0]\n      if 'detection_masks' in output_dict:\n        output_dict['detection_masks'] = output_dict['detection_masks'][0]\n  return output_dict\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 1, "creation_date": 1523528737, "post_id": 49785257, "comment_id": 86602489, "body": "<a href=\"https://stackoverflow.com/q/20109391/6910411\">How to make good reproducible pandas examples</a>"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9529190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df54bf7d35736a4faf12986414289bf?s=128&d=identicon&r=PG&f=1", "display_name": "Saif", "link": "https://stackoverflow.com/users/9529190/saif"}, "edited": false, "score": 0, "creation_date": 1523532339, "post_id": 49786330, "comment_id": 86604802, "body": "Thank You Simon, I need the lists with bigger sizes and support of larger than zero to be first. Here is a ample of the data support. the int value is the support value: the value of colomn1. itemsets 0 0.576923 [first_name] 1 0.423077 [hire_date] 2 0.384615 [first_name, hire_date] 3 0.384615 [first_name, last_name] 4 0.384615 [emp_no]"}, {"owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "reply_to_user": {"reputation": 59, "user_id": 9529190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df54bf7d35736a4faf12986414289bf?s=128&d=identicon&r=PG&f=1", "display_name": "Saif", "link": "https://stackoverflow.com/users/9529190/saif"}, "edited": false, "score": 0, "creation_date": 1523535366, "post_id": 49786330, "comment_id": 86606821, "body": "I dont understand. In my example the largest list is sorted first, and so is the largest int value. How should it look instead?"}], "tags": [], "owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1523493841, "creation_date": 1523493841, "answer_id": 49786330, "question_id": 49785257, "link": "https://stackoverflow.com/questions/49785257/sorting-pd-dataframe-based-on-lists-sizes-of-column-and-another-column-int-vaues/49786330#49786330", "title": "sorting pd dataframe based on lists sizes of column and another column int vaues", "body": "<p>Im using this as a test dataset:</p>\n\n<pre><code>df = pd.DataFrame({'a': [5,2,5], 'b': [[1,4,6,7], [2,6], [1,7,4]]})\n\n   a             b\n0  5  [1, 4, 6, 7]\n1  2        [2, 6]\n2  5     [1, 7, 4]\n</code></pre>\n\n<p>One way you can do this is to calculate the length of your lists, and then sort your dataframe by both the lengths and your integer column:</p>\n\n<pre><code>df['lens'] = df['b'].str.len()\n\ndf.sort_values(['a', 'lens'], ascending=False, inplace=True)\n\ndf = df.drop(columns='lens').reset_index(drop=True)\n</code></pre>\n\n<p>Which will give you this:</p>\n\n<pre><code>   a             b\n0  5  [1, 4, 6, 7]\n1  5     [1, 7, 4]\n2  2        [2, 6]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1523536614, "creation_date": 1523536614, "answer_id": 49796772, "question_id": 49785257, "link": "https://stackoverflow.com/questions/49785257/sorting-pd-dataframe-based-on-lists-sizes-of-column-and-another-column-int-vaues/49796772#49796772", "title": "sorting pd dataframe based on lists sizes of column and another column int vaues", "body": "<p>One way is to use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.lexsort.html\" rel=\"nofollow noreferrer\"><code>numpy.lexsort</code></a>:</p>\n\n<pre><code>import pandas as pd, numpy as np\n\ndf = pd.DataFrame({'a': [5,2,5], 'b': [[1,4,6,7], [2,6], [1,7,4]]})\n\ndf = df.loc[np.lexsort((df['b'].map(len), df['a']))[::-1]]\n\nprint(df)\n\n#    a             b\n# 0  5  [1, 4, 6, 7]\n# 2  5     [1, 7, 4]\n# 1  2        [2, 6]\n</code></pre>\n\n<p>This is likely to perform better for larger dataframes.</p>\n\n<p>Note, using <code>numpy.lexsort</code>, the sequence of ordering is reversed, i.e. the above code first sorts by <code>a</code>, then length of lists in <code>b</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 9529190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df54bf7d35736a4faf12986414289bf?s=128&d=identicon&r=PG&f=1", "display_name": "Saif", "link": "https://stackoverflow.com/users/9529190/saif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523536614, "creation_date": 1523485451, "last_edit_date": 1523528687, "question_id": 49785257, "link": "https://stackoverflow.com/questions/49785257/sorting-pd-dataframe-based-on-lists-sizes-of-column-and-another-column-int-vaues", "title": "sorting pd dataframe based on lists sizes of column and another column int vaues", "body": "<p>I have a Pandas dataframe of two columns:</p>\n\n<ul>\n<li>one column consists of integer values </li>\n<li>the other of  lists of different sizes as values. </li>\n</ul>\n\n<p>I want to sort the frame records according to max int value and max list size in descending order. I tried to paste the data, but it was not understandable. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1523492057, "post_id": 49785239, "comment_id": 86587661, "body": "It sounds like you need a non-trainable variable rather than a constant, like <code>tf.Variable(r, trainable=False)</code>.  Do I understand this correctly?"}, {"owner": {"reputation": 1283, "user_id": 39123, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/aaaaf18c8b8b06db93ab848eda85a530?s=128&d=identicon&r=PG", "display_name": "Geoffrey Anderson", "link": "https://stackoverflow.com/users/39123/geoffrey-anderson"}, "reply_to_user": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1523559837, "post_id": 49785239, "comment_id": 86622810, "body": "@Y.Luo that&#39;s an idea. I will try it."}, {"owner": {"reputation": 1283, "user_id": 39123, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/aaaaf18c8b8b06db93ab848eda85a530?s=128&d=identicon&r=PG", "display_name": "Geoffrey Anderson", "link": "https://stackoverflow.com/users/39123/geoffrey-anderson"}, "reply_to_user": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1523560017, "post_id": 49785239, "comment_id": 86622886, "body": "@Y.Luo TF still throws TypeError list of tensors expected, on the line tf.constant().  I passed the parameter r to the Variable constructor to create rv along with trainable=False and then used that variable rv instead of the placeholder r in the tf.reduce_mean.  So behavior of TF did not change at all, surprisingly.  Did you have some other idea in mind as to get the value from the dict_feed into this variable constructor?"}, {"owner": {"reputation": 1283, "user_id": 39123, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/aaaaf18c8b8b06db93ab848eda85a530?s=128&d=identicon&r=PG", "display_name": "Geoffrey Anderson", "link": "https://stackoverflow.com/users/39123/geoffrey-anderson"}, "reply_to_user": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1523561249, "post_id": 49785239, "comment_id": 86623527, "body": "I need a constant matrix.  I need this constant matrix to be computed from a placeholder that&#39;s passed in at run time in the feed_dict. It&#39;s really simple.  It&#39;s exactly like the docs example for tf.constant() except the source of numerical data is the feed_dict not a numpy array.  It&#39;s like placeholders were forgotten by TF devs as something anyone wants to use when making a constant.  I really don&#39;t care if tf parlance calls it a constant or a variable that is nontrainable, as long as I can run a reduce_mean on the feed_dict placeholder, and it does not get optimized."}, {"owner": {"reputation": 1283, "user_id": 39123, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/aaaaf18c8b8b06db93ab848eda85a530?s=128&d=identicon&r=PG", "display_name": "Geoffrey Anderson", "link": "https://stackoverflow.com/users/39123/geoffrey-anderson"}, "reply_to_user": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1523561511, "post_id": 49785239, "comment_id": 86623641, "body": "I&#39;d also happily accept some way to make a variable contain a 2D matrix of a single value.  It was just that the constant() function seemed right but I&#39;m not stuck on tf.constant() since there&#39;s a variable that won&#39;t train which sounds equally OK."}, {"owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1523568843, "post_id": 49785239, "comment_id": 86627189, "body": "Sorry for pointing you to a wrong direction. Could you please check if my answer with <code>tf.fill</code> works? If not, I think a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> can be really helpful here."}], "answers": [{"tags": [], "owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "is_accepted": false, "score": 0, "last_activity_date": 1523568756, "creation_date": 1523568756, "answer_id": 49806207, "question_id": 49785239, "link": "https://stackoverflow.com/questions/49785239/tensorflow-constant-throws-typeerror-with-placeholder-parameter-tf-v1-4/49806207#49806207", "title": "TensorFlow.constant() throws TypeError with placeholder parameter (TF v1.4)", "body": "<p>I think <code>tf.fill</code>(<a href=\"https://www.tensorflow.org/api_docs/python/tf/fill\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/api_docs/python/tf/fill</a>) can give you the \"constant\" tensor you want in the graph. Here is my MCVE:</p>\n\n<pre><code>import tensorflow as tf\n\nx = tf.constant([[1, 7], [2, 6], [3, 5], [4, 8]], dtype=tf.float32)\ny_true = tf.constant([[0, 4], [-1, 3], [-2, 2], [-3, 1]], dtype=tf.float32)\n\n# The section you want\nr = tf.placeholder(tf.float32, shape=[3, 1])\nglobal_bias_value = tf.reduce_mean(r)\nglobal_bias = tf.fill([4, 2], global_bias_value)\n\nw = tf.get_variable('weight', [4, 2])\ny_pred = tf.multiply(x, w) + global_bias\nloss = tf.losses.mean_squared_error(labels=y_true, predictions=y_pred)\noptimizer = tf.train.GradientDescentOptimizer(0.01)\ntrain = optimizer.minimize(loss)\n\ninit = tf.global_variables_initializer()\nsess = tf.Session()\nsess.run(init)\nfor i in range(3):\n  _, weight, bias = sess.run((train, w, global_bias),\n                           feed_dict={r: [[1], [2], [3]]})\n  print('Step: ', i)\n  print('Weight: ', weight)\n  print('Bias: ', bias)\n</code></pre>\n"}], "owner": {"reputation": 1283, "user_id": 39123, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/aaaaf18c8b8b06db93ab848eda85a530?s=128&d=identicon&r=PG", "display_name": "Geoffrey Anderson", "link": "https://stackoverflow.com/users/39123/geoffrey-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523568756, "creation_date": 1523485374, "question_id": 49785239, "link": "https://stackoverflow.com/questions/49785239/tensorflow-constant-throws-typeerror-with-placeholder-parameter-tf-v1-4", "title": "TensorFlow.constant() throws TypeError with placeholder parameter (TF v1.4)", "body": "<p>Python host language. TF v1.4.</p>\n\n<p><a href=\"https://www.tensorflow.org/versions/r1.4/api_docs/python/tf/constant\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/versions/r1.4/api_docs/python/tf/constant</a></p>\n\n<p>Nearly just like docs example (above), I need to make a constant 2-D tensor populated with scalar value, in my case some mean value, which is mean of r, but r is a placeholder, not a variable, NOT a numpy array. As such, feed_dict needs to be used to fill-in placeholder r in my application.  Now a python ndarray or some python list was used in the docs example, which won't work in my application, so that's the difference.</p>\n\n<p>In my application, global_bias (below) needs to be a tf.constant not a tf.variable -- because what I'm saying is, the optimizer needs to not learn it. Just leave it be, please.</p>\n\n<p>Note: In my application, r is a placeholder not a variable.</p>\n\n<pre><code>#global_bias_value = tf.reduce_mean(r)    # tf.constant() FAILS (below)\nglobal_bias_value = 87. # tf.constant() runs OK (below)\nglobal_bias = tf.constant(global_bias_value, shape=(I,J)) #TypeError: List of Tensors when single Tensor expected\nrhat = global_bias + fm\n</code></pre>\n\n<p>So, as I said, what TF code would be used to make a constant 2-D tensor populated with scalar value, in my case some mean value, which is mean of r, but r is a placeholder, not a variable, NOT a numpy array?</p>\n\n<p>Hey I tried .eval() but TF said you need a session to do that. So are you TF folks saying I need 2 sessions, run sequentially, just to do this little thing?  Or else are you saying I should bypass feed_dict to feed in my r placeholder actual data via numpy arrays in through the side door (in app memory as a python list or ndarray) plus the front door (feed_dict), which would be janky?  </p>\n\n<p>Thanks for clues!   I need to get one.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 3, "creation_date": 1523485323, "post_id": 49785225, "comment_id": 86585905, "body": "...please learn about loops."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1523485346, "post_id": 49785225, "comment_id": 86585912, "body": "<code>[x for x in lov_headers if x != &#39;Features &amp; Benefits&#39;]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": false, "score": 1, "last_activity_date": 1523485496, "creation_date": 1523485496, "answer_id": 49785263, "question_id": 49785225, "link": "https://stackoverflow.com/questions/49785225/remove-all-occurrences-of-strings-from-list/49785263#49785263", "title": "Remove all occurrences of strings from list", "body": "<p>Put what you want to remove into a <code>set()</code>, then use a list comprehension to filter out the results that you don't want:    </p>\n\n<pre><code>to_remove = set(['Part number', 'Features &amp; Benefits', 'Product Features', 'Packaging'])\n\nnew_list = [i for i in lov_headers if i not in to_remove]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1523485606, "post_id": 49785264, "comment_id": 86585987, "body": "The time complexity on this is not good at all."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1523485686, "post_id": 49785264, "comment_id": 86586012, "body": "Agree. But if the OP wants to remove few select headers, the time complexity does not matter. Downloading the document would take way more time than searching through a list."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1523485502, "creation_date": 1523485502, "answer_id": 49785264, "question_id": 49785225, "link": "https://stackoverflow.com/questions/49785225/remove-all-occurrences-of-strings-from-list/49785264#49785264", "title": "Remove all occurrences of strings from list", "body": "<p>You can use a <code>while</code> loop:</p>\n\n<pre><code>while 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9629922, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HI3q5ysJC6c/AAAAAAAAAAI/AAAAAAAAAAA/EfbUiButxXQ/photo.jpg?sz=128", "display_name": "Sam Palmer", "link": "https://stackoverflow.com/users/9629922/sam-palmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1523493023, "answer_count": 2, "score": -1, "last_activity_date": 1523485502, "creation_date": 1523485286, "question_id": 49785225, "link": "https://stackoverflow.com/questions/49785225/remove-all-occurrences-of-strings-from-list", "closed_reason": "Duplicate", "title": "Remove all occurrences of strings from list", "body": "<p>Someone please tell me there is a cleaner way to write this!? I want to remove all instances of 'Features &amp; Benefits'. There must be a cleaner way to do this for strings in a list.</p>\n\n<pre><code>lov_headers = [x.find('displayname').text for x in soup.find_all('attributedefinition')]\n\n\nif 'Part number' in lov_headers:\n    lov_headers.remove('Part number')\nif 'Product Features' in lov_headers:\n    lov_headers.remove('Product Features')\nif 'Packaging' in lov_headers:\n    lov_headers.remove('Packaging')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\nif 'Features &amp; Benefits' in lov_headers:\n    lov_headers.remove('Features &amp; Benefits')\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9531105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b8e5c20acbed7afe22c246d400b7cf?s=128&d=identicon&r=PG&f=1", "display_name": "Wulfa", "link": "https://stackoverflow.com/users/9531105/wulfa"}, "edited": false, "score": 0, "creation_date": 1523549917, "post_id": 49787941, "comment_id": 86617597, "body": "This was very helpful and straightforward to understand. Thank you for your help!"}], "tags": [], "owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "is_accepted": true, "score": 0, "last_activity_date": 1523506797, "creation_date": 1523506797, "answer_id": 49787941, "question_id": 49785215, "link": "https://stackoverflow.com/questions/49785215/properly-parsing-specific-output-from-terminal-in-python/49787941#49787941", "title": "Properly Parsing Specific Output from Terminal in Python", "body": "<h1>The Plan</h1>\n\n<p>The game plan is to strip off the leading text, up to and including the pound sign. Then parsing will be easier.</p>\n\n<h1>The Code</h1>\n\n<pre><code># https://stackoverflow.com/q/49785215/459745\nimport re\nimport pprint\n\noutput = \"\"\"620_ha_1 # Version: Fortigate-620B v4.0,build0271,100330 (MR2)\nVirus-DB: 11.00643(2010-03-31 17:\nExtended DB: 11.00643(2010-03-31 17:\nExtreme DB: 0.00000(2003-01-01 00:\nIPS-DB: 2.00778(2010-03-31 12:\nFortiClient application signature package: 1.167(2010-04-01 10:\nSerial-Number: FG600B3908600705\n\"\"\"\n\n# Regular expression to extract the keys/values from output. The\n# re.VERBOSE flag allows for comment inside the regular expression\nkey_value_pattern = re.compile(\"\"\"\n    \\s*      # White spaces (including new lines) preceding the key\n    ([^:]+)  # The key: anything but the colon\n    :        # The colon itself\n    (.+)     # The value\n    \"\"\", flags=re.VERBOSE)\n\n# Remove the text up to and including the pound sign\noutput = output.partition('#')[-1]\ninfoDict = dict(key_value_pattern.findall(output))\n\n# Show\npprint.pprint(infoDict)\n</code></pre>\n\n<h1>Output</h1>\n\n<pre><code>{'Extended DB': ' 11.00643(2010-03-31 17:',\n 'Extreme DB': ' 0.00000(2003-01-01 00:',\n 'FortiClient application signature package': ' 1.167(2010-04-01 10:',\n 'IPS-DB': ' 2.00778(2010-03-31 12:',\n 'Serial-Number': ' FG600B3908600705',\n 'Version': ' Fortigate-620B v4.0,build0271,100330 (MR2)',\n 'Virus-DB': ' 11.00643(2010-03-31 17:'}\n</code></pre>\n\n<h1>Notes</h1>\n\n<ul>\n<li>The code is not that long, I strike for being verbose to help explaining how things work</li>\n<li><code>str.partition</code> split the string into 3 parts: before the pound sign, the pound sign, and after the pound sign. We are only interested in the part after the pound sign.</li>\n<li>The <code>.findall</code> method will return a list of (key, value), which is perfect for making a dictionary</li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 9531105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b8e5c20acbed7afe22c246d400b7cf?s=128&d=identicon&r=PG&f=1", "display_name": "Wulfa", "link": "https://stackoverflow.com/users/9531105/wulfa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 49787941, "answer_count": 1, "score": 0, "last_activity_date": 1523506797, "creation_date": 1523485240, "question_id": 49785215, "link": "https://stackoverflow.com/questions/49785215/properly-parsing-specific-output-from-terminal-in-python", "title": "Properly Parsing Specific Output from Terminal in Python", "body": "<p>I have made a simple program that outputs text to the terminal (stdout) and another program that takes that text and parses it to match my preferred output.</p>\n\n<p>The first program just prints these lines to stdout:</p>\n\n<p><code>620_ha_1 # Version: Fortigate-620B v4.0,build0271,100330 (MR2)\nVirus-DB: 11.00643(2010-03-31 17:\nExtended DB: 11.00643(2010-03-31 17:\nExtreme DB: 0.00000(2003-01-01 00:\nIPS-DB: 2.00778(2010-03-31 12:\nFortiClient application signature package: 1.167(2010-04-01 10:\nSerial-Number: FG600B3908600705</code></p>\n\n<p>My second program then captures that output and parses it:</p>\n\n<pre><code>import subprocess\nimport re\n\ninfoDict = dict()\n\n# Prints were purely for my testing purposes\nprocess = subprocess.Popen(['python','-u', 'output.py'],stdout=subprocess.PIPE)\nwhile True:\n    output = process.stdout.readline().decode()\n    if output == '' and process.poll() is not None:\n        break\n    if output:\n        rmHost = re.sub(\".*?#\", \"\", output.strip())\n        versionInfo = re.split(\": \", rmHost)\n        # print(\"VERSION: \" + versionInfo[0] + \": \" + versionInfo[1])\n        fields = re.split(\".*?#|: \", output.strip())\n        name = fields[0]\n        data = fields[1]\n        # print(\"name: \" + name)\n        # print(\"data: \" + data)\n</code></pre>\n\n<p>Almost everything works correctly, except I don't know how to properly handle the first line while in the loop. I am trying to completely get rid of the <code>620_ha_1 #</code> portion of the output. My eventual goal is to store this all in a dict where <code>name</code> acts as the keys and <code>data</code> acts as the values.</p>\n\n<p><strong>TL;DR</strong></p>\n\n<p><em>How do I properly parse the first line of the output shown so that it matches the same format as the following lines which will allow me to store it in a dict.</em></p>\n\n<p><strong>Thank you!</strong></p>\n"}, {"tags": ["python", "python-2.7", "cuda", "gpu", "pytorch"], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 9385966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WtdbWV1QtcQ/AAAAAAAAAAI/AAAAAAAAE_4/Eod8Vj3X1-U/photo.jpg?sz=128", "display_name": "gflegar", "link": "https://stackoverflow.com/users/9385966/gflegar"}, "is_accepted": false, "score": 7, "last_activity_date": 1523485707, "creation_date": 1523485707, "answer_id": 49785296, "question_id": 49785199, "link": "https://stackoverflow.com/questions/49785199/cuda-runtime-error-48-no-kernel-image-is-available-for-execution-on-the-devic/49785296#49785296", "title": "cuda runtime error (48): no kernel image is available for execution on the device", "body": "<p>The answer is buried in that huge error message you got:</p>\n\n<blockquote>\n  <p>UserWarning: Found GPU0 GeForce 820M which is of cuda capability 2.1. PyTorch no longer supports this GPU because it is too old.</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 8885534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6MmdvH69uc/AAAAAAAAAAI/AAAAAAAAABc/CLucVdztF5M/photo.jpg?sz=128", "display_name": "\u0410\u0437\u0430\u0442 \u0421\u0443\u043b\u0442\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/8885534/%d0%90%d0%b7%d0%b0%d1%82-%d0%a1%d1%83%d0%bb%d1%82%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4857, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1523485707, "creation_date": 1523485072, "question_id": 49785199, "link": "https://stackoverflow.com/questions/49785199/cuda-runtime-error-48-no-kernel-image-is-available-for-execution-on-the-devic", "title": "cuda runtime error (48): no kernel image is available for execution on the device", "body": "<p>I'm new to pytorch. I took the code from this repository <a href=\"https://github.com/ruotianluo/ImageCaptioning.pytorch\" rel=\"nofollow noreferrer\">https://github.com/ruotianluo/ImageCaptioning.pytorch</a> and wanted to make captions to the images. Installed \"CUDA\" and when I run the script to create the annotations produces this:</p>\n\n<blockquote>\n  <p>$ CUDA_LAUNCH_BLOCKING = 1 python eval.py --model model.pth -\n  -infos_path infos.pkl --image_folder blah --num_images 1 /home/azat/anaconda2/lib/python2.7/site-packages/h5py/<strong>init</strong>.py:36:\n  FutureWarning: Conversion of the second argument of issubdtype from\n  <code>float</code> to<code>np.floating</code> is deprecated. In the future, it will be\n  treated as <code>np.float64 == np.dtype (float) .type</code>.   from ._conv\n  import register_converters as _register_converters\n  /home/azat/anaconda2/lib/python2.7/site-packages/torch/cuda/<strong>init</strong>.py:97:\n  UserWarning:\n      Found GPU0 GeForce 820M which is of cuda capability 2.1.\n      PyTorch no longer supports this GPU because it is too old.\n         warnings.warn (old_gpu_warn% (d, name, major, capability <a href=\"https://github.com/ruotianluo/ImageCaptioning.pytorch\" rel=\"nofollow noreferrer\">1</a>)) DataLoaderRaw loading images from folder: blah 0 listing all images in\n  directory blah DataLoaderRaw found 8 images THCudaCheck FAIL file = /\n  pytorch / torch / lib / THC / generic / THCTensorMathPairwise.cu line\n  = 40 error = 48: no kernel image is available for execution on the device Traceback (most recent last call last):   File \"eval.py\", line\n  122, in \n      vars (opt))   File \"/ home / azat / Programing / Python / techno_atom_neuro / Others Implementation /\n  ImageCaptioning.pytorch-master / eval_utils.py\", line 82, in\n  eval_split\n      data = loader.get_batch (split)   File \"/ home / azat / Programing / Python / techno_atom_neuro / Others Implementation /\n  ImageCaptioning.pytorch-master / dataloaderraw.py\", line 112, in\n  get_batch\n      img = Variable (preprocess (img), volatile = True)   File \"/home/azat/anaconda2/lib/python2.7/site-packages/torchvision/transforms/transforms.py\",\n  line 42, in <strong>call</strong>\n      img = t (img)   File \"/home/azat/anaconda2/lib/python2.7/site-packages/torchvision/transforms/transforms.py\",\n  line 118, in <strong>call</strong>\n      return F.normalize (tensor, self.mean, self.std)   File \"/home/azat/anaconda2/lib/python2.7/site-packages/torchvision/transforms/functional.py\",\n  line 161, in normalize\n      t.sub_ (m) .div_ (s) RuntimeError: cuda runtime error (48): no kernel image is available for execution on the device at\n  /pytorch/torch/lib/THC/generic/THCTensorMathPairwise.cu:40</p>\n</blockquote>\n\n<p>So, I want to find out what this error is, hardware or software. And how can I solve this problem. Thanks.</p>\n\n<pre><code>PyTorch\nOS: Ubuntu 16.04\nPyTorch version: 0.3.1 pip\nPython version: Python 2.7.14 :: Anaconda custom (64-bit)\nCUDA/cuDNN version: 9.1\nGPU models and configuration:\n\n$ nvidia-smi\nWed Apr 11 21:34:08 2018       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 390.48                 Driver Version: 390.48                    |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  GeForce 820M        Off  | 00000000:08:00.0 N/A |                  N/A |\n| N/A   54C    P0    N/A /  N/A |    114MiB /  1985MiB |     N/A      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0                    Not Supported                                       |\n+-----------------------------------------------------------------------------+\n</code></pre>\n"}, {"tags": ["python", "eval", "jupyter"], "answers": [{"tags": [], "owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 4, "last_activity_date": 1523485140, "creation_date": 1523485140, "answer_id": 49785208, "question_id": 49785181, "link": "https://stackoverflow.com/questions/49785181/how-can-i-make-sure-a-user-does-not-input-an-unwanted-letter-or-word-into-a-vari/49785208#49785208", "title": "How can I make sure a user does not input an unwanted letter or word into a variable which undergoes the eval function?", "body": "<p>Do not use <code>eval()</code>.</p>\n\n<pre><code>&gt;&gt;&gt; import ast\n&gt;&gt;&gt; ast.literal_eval('42')\n42\n&gt;&gt;&gt; ast.literal_eval('3.14')\n3.14\n&gt;&gt;&gt; ast.literal_eval('4-2j')\n(4-2j)\n&gt;&gt;&gt; ast.literal_eval('os.system(\"rm -rf /\")')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib64/python3.6/ast.py\", line 85, in literal_eval\n    return _convert(node_or_string)\n  File \"/usr/lib64/python3.6/ast.py\", line 84, in _convert\n    raise ValueError('malformed node or string: ' + repr(node))\nValueError: malformed node or string: &lt;_ast.Call object at 0x7f8a8e4ae978&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9633031, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alexander Tawil", "link": "https://stackoverflow.com/users/9633031/alexander-tawil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523485140, "creation_date": 1523484943, "question_id": 49785181, "link": "https://stackoverflow.com/questions/49785181/how-can-i-make-sure-a-user-does-not-input-an-unwanted-letter-or-word-into-a-vari", "title": "How can I make sure a user does not input an unwanted letter or word into a variable which undergoes the eval function?", "body": "<p>Say I input the letter g into this code, the error, g is not defined will \noccur. I imagine this is due to the fact I am using the eval function. Is \nthere any way of getting around this or is there another way of making sure a letter or word is not inputted into the code.</p>\n\n<pre><code>    c = eval(input(\"Input sin(radians(your angle))\"))\n    B = isinstance(c, (int, float, complex))\n    if B == False:\n        print (\"This is not a valid input, the input must be a number\")\n        c = eval(input(\"Input sin(radians(your angle))\"))\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "edited": false, "score": 5, "creation_date": 1523485011, "post_id": 49785179, "comment_id": 86585798, "body": "You need to fix the indentation of <code>return</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1523486263, "post_id": 49785179, "comment_id": 86586181, "body": "You may want to take a look at the <code>extend</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9633027, "user_type": "registered", "profile_image": "https://graph.facebook.com/330039957519290/picture?type=large", "display_name": "Ahmed Shady Elsadany", "link": "https://stackoverflow.com/users/9633027/ahmed-shady-elsadany"}, "edited": false, "score": 0, "creation_date": 1523485255, "post_id": 49785203, "comment_id": 86585875, "body": "return(headers_referers)                            ^ IndentationError: unindent does not match any outer indentation level gave that when i indented it with headers_referers.append()"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "reply_to_user": {"reputation": 1, "user_id": 9633027, "user_type": "registered", "profile_image": "https://graph.facebook.com/330039957519290/picture?type=large", "display_name": "Ahmed Shady Elsadany", "link": "https://stackoverflow.com/users/9633027/ahmed-shady-elsadany"}, "edited": false, "score": 1, "creation_date": 1523485754, "post_id": 49785203, "comment_id": 86586034, "body": "@AhmedShadyElsadany If you indented it correctly, you would not get that error."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1, "user_id": 9633027, "user_type": "registered", "profile_image": "https://graph.facebook.com/330039957519290/picture?type=large", "display_name": "Ahmed Shady Elsadany", "link": "https://stackoverflow.com/users/9633027/ahmed-shady-elsadany"}, "edited": false, "score": 0, "creation_date": 1523487900, "post_id": 49785203, "comment_id": 86586647, "body": "@AhmedShadyElsadany Make sure you&#39;re consistent in use of spaces vs. tabs in indentation."}], "tags": [], "owner": {"reputation": 8541, "user_id": 8366499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9t89.jpg?s=128&g=1", "display_name": "divibisan", "link": "https://stackoverflow.com/users/8366499/divibisan"}, "is_accepted": false, "score": 1, "last_activity_date": 1523488037, "last_edit_date": 1523488037, "creation_date": 1523485097, "answer_id": 49785203, "question_id": 49785179, "link": "https://stackoverflow.com/questions/49785179/returnheaders-referers-syntaxerror-return-outside-function/49785203#49785203", "title": "return(headers_referers) SyntaxError: &#39;return&#39; outside function", "body": "<p>The error is just what it says: your <code>return()</code> is outside your function. Python uses indentation to define code blocks, so for your <code>return</code> statement to be inside the function it must be indented. **So, just indent your <code>return(headers_referers)</code> so it's aligned with the <code>headers_referers.append()</code> above it.</p>\n\n<p>In the comments, @Barmar suggested the possibility that your're using mixing tabs and spaces in your indentation. In python, you should always <strong>indent with spaces</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 9633027, "user_type": "registered", "profile_image": "https://graph.facebook.com/330039957519290/picture?type=large", "display_name": "Ahmed Shady Elsadany", "link": "https://stackoverflow.com/users/9633027/ahmed-shady-elsadany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1523488037, "creation_date": 1523484940, "last_edit_date": 1523485257, "question_id": 49785179, "link": "https://stackoverflow.com/questions/49785179/returnheaders-referers-syntaxerror-return-outside-function", "title": "return(headers_referers) SyntaxError: &#39;return&#39; outside function", "body": "<pre><code>def referer_list():\n    global headers_referers     \n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://yandex.ru/yandsearch?text=%D1%%D2%?=g.sql()81%..')\n    headers_referers.append('http://vk.com/profile.php?redirect=')\n    headers_referers.append('http://www.usatoday.com/search/results?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=query?=query=..')\n    headers_referers.append('https://www.google.ru/#hl=ru&amp;newwindow=1?&amp;saf..,or.r_gc.r_pw=?.r_cp.r_qf.,cf.osb&amp;fp=fd2cf4e896a87c19&amp;biw=1680&amp;bih=882')\n    headers_referers.append('https://www.google.ru/#hl=ru&amp;newwindow=1&amp;safe..,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&amp;fp=fd2cf4e896a87c19&amp;biw=1680&amp;bih=925')\n    headers_referers.append('http://yandex.ru/yandsearch?text=')\n    headers_referers.append('https://www.google.ru/#hl=ru&amp;newwindow=1&amp;safe..,iny+gay+q=pcsny+=;zdr+query?=poxy+pony&amp;gs_l=hp.3.r?=.0i19.505.10687.0.10963.33.29.4.0.0.0.242.4512.0j26j3.29.0.clfh..0.0.dLyKYyh2BUc&amp;pbx=1&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&amp;fp?=?fd2cf4e896a87c19&amp;biw=1389&amp;bih=832')\n    headers_referers.append('http://go.mail.ru/search?mail.ru=1&amp;q=')\n    headers_referers.append('http://nova.rambler.ru/search?=btnG?=%D0?2?%D0?2?%=D0..')\n    headers_referers.append('http://ru.wikipedia.org/wiki/%D0%9C%D1%8D%D1%x80_%D0%..')\n    headers_referers.append('http://ru.search.yahoo.com/search;_yzt=?=A7x9Q.bs67zf..')\n    headers_referers.append('http://ru.search.yahoo.com/search;?_query?=l%t=?=?A7x..')\n    headers_referers.append('http://go.mail.ru/search?gay.ru.query=1&amp;q=?abc.r..')\n    headers_referers.append('/#hl=en-US?&amp;newwindow=1&amp;safe=off&amp;sclient=psy=?-ab&amp;query=%D0%BA%D0%B0%Dq=?0%BA+%D1%83%()_D0%B1%D0%B=8%D1%82%D1%8C+%D1%81bvc?&amp;=query&amp;%D0%BB%D0%BE%D0%BD%D0%B0q+=%D1%80%D1%83%D0%B6%D1%8C%D0%B5+%D0%BA%D0%B0%D0%BA%D0%B0%D1%88%D0%BA%D0%B0+%D0%BC%D0%BE%D0%BA%D0%B0%D1%81%D0%B8%D0%BD%D1%8B+%D1%87%D0%BB%D0%B5%D0%BD&amp;oq=q=%D0%BA%D0%B0%D0%BA+%D1%83%D0%B1%D0%B8%D1%82%D1%8C+%D1%81%D0%BB%D0%BE%D0%BD%D0%B0+%D1%80%D1%83%D0%B6%D1%8C%D0%B5+%D0%BA%D0%B0%D0%BA%D0%B0%D1%88%D0%BA%D0%B0+%D0%BC%D0%BE%D0%BA%D1%DO%D2%D0%B0%D1%81%D0%B8%D0%BD%D1%8B+?%D1%87%D0%BB%D0%B5%D0%BD&amp;gs_l=hp.3...192787.206313.12.206542.48.46.2.0.0.0.190.7355.0j43.45.0.clfh..0.0.ytz2PqzhMAc&amp;pbx=1&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&amp;fp=fd2cf4e896a87c19&amp;biw=1680&amp;bih=?882')\n    headers_referers.append('http://nova.rambler.ru/search?btnG=%D0%9D%?D0%B0%D0%B..')\n    headers_referers.append('http://www.google.ru/url?sa=t&amp;rct=?j&amp;q=&amp;e..')\n    headers_referers.append('http://help.baidu.com/searchResult?keywords=')\n    headers_referers.append('http://www.bing.com/search?q=')\n    headers_referers.append('https://www.yandex.com/yandsearch?text=')\n    headers_referers.append('https://duckduckgo.com/?q=')\n    headers_referers.append('http://www.ask.com/web?q=')\n    headers_referers.append('http://search.aol.com/aol/search?q=')\n    headers_referers.append('https://www.om.nl/vaste-onderdelen/zoeken/?zoeken_term=')\n    headers_referers.append('https://drive.google.com/viewerng/viewer?url=')\n    headers_referers.append('http://validator.w3.org/feed/check.cgi?url=')\n    headers_referers.append('http://host-tracker.com/check_page/?furl=')\n    headers_referers.append('http://www.online-translator.com/url/translation.aspx?direction=er&amp;sourceURL=')\n    headers_referers.append('http://jigsaw.w3.org/css-validator/validator?uri=')\n    headers_referers.append('https://add.my.yahoo.com/rss?url=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.usatoday.com/search/results?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('https://steamcommunity.com/market/search?q=')\n    headers_referers.append('http://filehippo.com/search?q=')\n    headers_referers.append('http://www.topsiteminecraft.com/site/pinterest.com/search?q=')\n    headers_referers.append('http://eu.battle.net/wow/en/search?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('http://careers.gatesfoundation.org/search?q=')\n    headers_referers.append('http://techtv.mit.edu/search?q=')\n    headers_referers.append('http://www.ustream.tv/search?q=')\n    headers_referers.append('http://www.ted.com/search?q=')\n    headers_referers.append('http://funnymama.com/search?q=')\n    headers_referers.append('http://itch.io/search?q=')\n    headers_referers.append('http://jobs.rbs.com/jobs/search?q=')\n    headers_referers.append('http://taginfo.openstreetmap.org/search?q=')\n    headers_referers.append('http://www.baoxaydung.com.vn/news/vn/search&amp;q=')\n    headers_referers.append('https://play.google.com/store/search?q=')\n    headers_referers.append('http://www.tceq.texas.gov/@@tceq-search?q=')\n    headers_referers.append('http://www.reddit.com/search?q=')\n    headers_referers.append('http://www.bestbuytheater.com/events/search?q=')\n    headers_referers.append('https://careers.carolinashealthcare.org/search?q=')\n    headers_referers.append('http://jobs.leidos.com/search?q=')\n    headers_referers.append('http://jobs.bloomberg.com/search?q=')\n    headers_referers.append('https://www.pinterest.com/search/?q=')\n    headers_referers.append('http://millercenter.org/search?q=')\n    headers_referers.append('https://www.npmjs.com/search?q=')\n    headers_referers.append('http://www.evidence.nhs.uk/search?q=')\n    headers_referers.append('http://www.shodanhq.com/search?q=')\n    headers_referers.append('http://ytmnd.com/search?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.usatoday.com/search/results?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('https://steamcommunity.com/market/search?q=')\n    headers_referers.append('http://filehippo.com/search?q=')\n    headers_referers.append('http://www.topsiteminecraft.com/site/pinterest.com/search?q=')\n    headers_referers.append('http://eu.battle.net/wow/en/search?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('http://careers.gatesfoundation.org/search?q=')\n    headers_referers.append('http://techtv.mit.edu/search?q=')\n    headers_referers.append('http://www.ustream.tv/search?q=')\n    headers_referers.append('http://www.ted.com/search?q=')\n    headers_referers.append('http://funnymama.com/search?q=')\n    headers_referers.append('http://itch.io/search?q=')\n    headers_referers.append('http://jobs.rbs.com/jobs/search?q=')\n    headers_referers.append('http://taginfo.openstreetmap.org/search?q=')\n    headers_referers.append('http://www.baoxaydung.com.vn/news/vn/search&amp;q=')\n    headers_referers.append('https://play.google.com/store/search?q=')\n    headers_referers.append('http://www.tceq.texas.gov/@@tceq-search?q=')\n    headers_referers.append('http://www.reddit.com/search?q=')\n    headers_referers.append('http://www.bestbuytheater.com/events/search?q=')\n    headers_referers.append('https://careers.carolinashealthcare.org/search?q=')\n    headers_referers.append('http://jobs.leidos.com/search?q=')\n    headers_referers.append('http://jobs.bloomberg.com/search?q=')\n    headers_referers.append('https://www.pinterest.com/search/?q=')\n    headers_referers.append('http://millercenter.org/search?q=')\n    headers_referers.append('https://www.npmjs.com/search?q=')\n    headers_referers.append('http://www.evidence.nhs.uk/search?q=')\n    headers_referers.append('http://www.shodanhq.com/search?q=')\n    headers_referers.append('http://ytmnd.com/search?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.usatoday.com/search/results?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('https://steamcommunity.com/market/search?q=')\n    headers_referers.append('http://filehippo.com/search?q=')\n    headers_referers.append('http://www.topsiteminecraft.com/site/pinterest.com/search?q=')\n    headers_referers.append('http://eu.battle.net/wow/en/search?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('http://careers.gatesfoundation.org/search?q=')\n    headers_referers.append('http://techtv.mit.edu/search?q=')\n    headers_referers.append('http://www.ustream.tv/search?q=')\n    headers_referers.append('http://www.ted.com/search?q=')\n    headers_referers.append('http://funnymama.com/search?q=')\n    headers_referers.append('http://itch.io/search?q=')\n    headers_referers.append('http://jobs.rbs.com/jobs/search?q=')\n    headers_referers.append('http://taginfo.openstreetmap.org/search?q=')\n    headers_referers.append('http://www.baoxaydung.com.vn/news/vn/search&amp;q=')\n    headers_referers.append('https://play.google.com/store/search?q=')\n    headers_referers.append('http://www.tceq.texas.gov/@@tceq-search?q=')\n    headers_referers.append('http://www.reddit.com/search?q=')\n    headers_referers.append('http://www.bestbuytheater.com/events/search?q=')\n    headers_referers.append('https://careers.carolinashealthcare.org/search?q=')\n    headers_referers.append('http://jobs.leidos.com/search?q=')\n    headers_referers.append('http://jobs.bloomberg.com/search?q=')\n    headers_referers.append('https://www.pinterest.com/search/?q=')\n    headers_referers.append('http://millercenter.org/search?q=')\n    headers_referers.append('https://www.npmjs.com/search?q=')\n    headers_referers.append('http://www.evidence.nhs.uk/search?q=')\n    headers_referers.append('http://www.shodanhq.com/search?q=')\n    headers_referers.append('http://ytmnd.com/search?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.usatoday.com/search/results?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('https://steamcommunity.com/market/search?q=')\n    headers_referers.append('http://filehippo.com/search?q=')\n    headers_referers.append('http://www.topsiteminecraft.com/site/pinterest.com/search?q=')\n    headers_referers.append('http://eu.battle.net/wow/en/search?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('http://careers.gatesfoundation.org/search?q=')\n    headers_referers.append('http://techtv.mit.edu/search?q=')\n    headers_referers.append('http://www.ustream.tv/search?q=')\n    headers_referers.append('http://www.ted.com/search?q=')\n    headers_referers.append('http://funnymama.com/search?q=')\n    headers_referers.append('http://itch.io/search?q=')\n    headers_referers.append('http://jobs.rbs.com/jobs/search?q=')\n    headers_referers.append('http://taginfo.openstreetmap.org/search?q=')\n    headers_referers.append('http://www.baoxaydung.com.vn/news/vn/search&amp;q=')\n    headers_referers.append('https://play.google.com/store/search?q=')\n    headers_referers.append('http://www.tceq.texas.gov/@@tceq-search?q=')\n    headers_referers.append('http://www.reddit.com/search?q=')\n    headers_referers.append('http://www.bestbuytheater.com/events/search?q=')\n    headers_referers.append('https://careers.carolinashealthcare.org/search?q=')\n    headers_referers.append('http://jobs.leidos.com/search?q=')\n    headers_referers.append('http://jobs.bloomberg.com/search?q=')\n    headers_referers.append('https://www.pinterest.com/search/?q=')\n    headers_referers.append('http://millercenter.org/search?q=')\n    headers_referers.append('https://www.npmjs.com/search?q=')\n    headers_referers.append('http://www.evidence.nhs.uk/search?q=')\n    headers_referers.append('http://www.shodanhq.com/search?q=')\n    headers_referers.append('http://ytmnd.com/search?q=')\n    headers_referers.append('https://www.facebook.com/sharer/sharer.php?u=https://www.facebook.com/sharer/sharer.php?u=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('https://www.facebook.com/l.php?u=https://www.facebook.com/l.php?u=')\n    headers_referers.append('https://drive.google.com/viewerng/viewer?url=')\n    headers_referers.append('http://www.google.com/translate?u=')\n    headers_referers.append('https://developers.google.com/speed/pagespeed/insights/?url=')\n    headers_referers.append('http://help.baidu.com/searchResult?keywords=')\n    headers_referers.append('http://www.bing.com/search?q=')\n    headers_referers.append('https://add.my.yahoo.com/rss?url=')\n    headers_referers.append('https://play.google.com/store/search?q=')\n    headers_referers.append('http://www.google.com/?q=')\n    headers_referers.append('http://www.usatoday.com/search/results?q=')\n    headers_referers.append('http://engadget.search.aol.com/search?q=')\n    headers_referers.append('http://' + host + '/')\nreturn(headers_referers)\n</code></pre>\n\n<p>Thats My Code Its Giving Error </p>\n\n<blockquote>\n  <p>return(headers_referers)<br>\n  SyntaxError: 'return' outside function </p>\n</blockquote>\n\n<p>what can i do i tried alot of solutions , please tell me the problem in the code.......... please note that all functions that i used append and return in it in the same file don't work and giving same error, i had some indentation errors and ifixed it and it didn't work too</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523484944, "post_id": 49785149, "comment_id": 86585772, "body": "<a href=\"https://matplotlib.org/gallery/animation/simple_anim.html#sphx-glr-gallery-animation-simple-anim-py\" rel=\"nofollow noreferrer\">matplotlib.org/gallery/animation/&hellip;</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523485011, "post_id": 49785149, "comment_id": 86585797, "body": "@PaulH &quot; I don&#39;t want to use matplotlib animation module because my time interval is variable&quot;"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1523485157, "post_id": 49785149, "comment_id": 86585840, "body": "@roganjosh pretty sure the animation module can handle that + there&#39;s still plenty to learn from the example (e.g., saving the artists and updating their data instead of creating new artists with each loop)"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523485286, "post_id": 49785149, "comment_id": 86585890, "body": "@PaulH I&#39;m trying to go through the docs now to see, but the example you linked requires a fixed <code>interval</code>"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1523485342, "post_id": 49785149, "comment_id": 86585910, "body": "@roganjosh the interval in the OP is a constant, which makes me think that they concept of the interval is misunderstood"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523485420, "post_id": 49785149, "comment_id": 86585934, "body": "@PaulH yes, I was in the process of editing my other comment after I saw your new one :) It&#39;s possible, but it could also be for the sake of simplifying the example (they didn&#39;t give <code>x</code> and <code>y</code> so it does seem an odd simplification to not have a random delay)"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523485635, "post_id": 49785149, "comment_id": 86585996, "body": "in any case, you can have a baseline constant interval and add to it via the animation function and <code>fargs</code>"}, {"owner": {"reputation": 357, "user_id": 3363813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f61979eed1177ff59ad91ac7ac126?s=128&d=identicon&r=PG&f=1", "display_name": "user3363813", "link": "https://stackoverflow.com/users/3363813/user3363813"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523490286, "post_id": 49785149, "comment_id": 86587236, "body": "@PaulH , if you know how to use variable time interval, please give me an example code as answer. Thanks"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523491042, "post_id": 49785149, "comment_id": 86587420, "body": "@user3363813 you need to update your example to better express what you&#39;re trying to achieve. what determines this variable time interval?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1523492052, "post_id": 49785149, "comment_id": 86587660, "body": "I think for the sake of the example, one could simlpy assume the question code to use <code>time.sleep(i)</code>. But how would you give variable interval to the <code>FuncAnimation</code>? I suspect one could change <code>FuncAnimation._interval</code> on the fly (e.g. using a class), but that doesn&#39;t sound like it&#39;s an obvious solution."}, {"owner": {"reputation": 357, "user_id": 3363813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f61979eed1177ff59ad91ac7ac126?s=128&d=identicon&r=PG&f=1", "display_name": "user3363813", "link": "https://stackoverflow.com/users/3363813/user3363813"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523493587, "post_id": 49785149, "comment_id": 86587949, "body": "@PaulH The interval is in the data. Its a trajectory Data. So for each coordinate point, there is an associated time."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523497753, "post_id": 49785149, "comment_id": 86588832, "body": "You lost me. You always set <code>time.sleep(1)</code> why is that?"}, {"owner": {"reputation": 357, "user_id": 3363813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f61979eed1177ff59ad91ac7ac126?s=128&d=identicon&r=PG&f=1", "display_name": "user3363813", "link": "https://stackoverflow.com/users/3363813/user3363813"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523519660, "post_id": 49785149, "comment_id": 86596595, "body": "@PaulH This is just a test, not the final code. I will put variable time like  <code>time.sleep(second)</code>"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523546648, "post_id": 49785149, "comment_id": 86615458, "body": "you need to make an example that demostrates your problem fully. For instance. This is an easy problem to solve, but I need you to tell me what the problem actually entails"}, {"owner": {"reputation": 357, "user_id": 3363813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f61979eed1177ff59ad91ac7ac126?s=128&d=identicon&r=PG&f=1", "display_name": "user3363813", "link": "https://stackoverflow.com/users/3363813/user3363813"}, "edited": false, "score": 0, "creation_date": 1523548639, "post_id": 49785149, "comment_id": 86616807, "body": "<a href=\"https://stackoverflow.com/questions/49796314/animate-with-variable-time/\">Here</a> I asked  and see the animation in the answer (consider that as example). The solution is complicated but works, it would be great to have a more simple solution. Thanks."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1523548774, "post_id": 49785149, "comment_id": 86616908, "body": "it&#39;s unclear to me how that doesn&#39;t solve your problem. it&#39;s not that complicated and you indicated that you understood what was going on."}], "owner": {"reputation": 357, "user_id": 3363813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078f61979eed1177ff59ad91ac7ac126?s=128&d=identicon&r=PG&f=1", "display_name": "user3363813", "link": "https://stackoverflow.com/users/3363813/user3363813"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "closed_date": 1523569013, "answer_count": 0, "score": 0, "last_activity_date": 1523548797, "creation_date": 1523484746, "question_id": 49785149, "link": "https://stackoverflow.com/questions/49785149/animated-scatterplot-by-loop", "closed_reason": "Duplicate", "title": "animated scatterplot by loop", "body": "<p>I am trying to animate scatterplot by loop. I don't want to use <code>matplotlib</code> <code>animation</code> module because my time interval is variable and thats why i use <code>time.sleep()</code> in loop. My code is not working perfectly. It is showing only the first point only. However, while debugging, it showing as intended. Here is my code:</p>\n\n<pre><code>fig, ax = plt.subplots()\nax.set(xlim=(10, 90), ylim=(0, 60))\nfor i in range(1,6):\n    ax.scatter(x[:i], y[:i])\n    plt.show()\n    time.sleep(1)\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "deep-learning", "keras", "loss-function"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6267424, "user_type": "registered", "profile_image": "https://graph.facebook.com/1016093871758961/picture?type=large", "display_name": "Eros Ghignoni", "link": "https://stackoverflow.com/users/6267424/eros-ghignoni"}, "is_accepted": false, "score": 0, "last_activity_date": 1525004095, "creation_date": 1525004095, "answer_id": 50086454, "question_id": 49785133, "link": "https://stackoverflow.com/questions/49785133/keras-dice-coefficient-loss-function-is-negative-and-increasing-with-epochs/50086454#50086454", "title": "Keras: Dice coefficient loss function is negative and increasing with epochs", "body": "<p>I think that the correct loss is 1 - dice_coef(y_true, y_pred)</p>\n"}, {"tags": [], "owner": {"reputation": 472, "user_id": 2723405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b509f21ad5954ddd1b6678ffa2b4d28d?s=128&d=identicon&r=PG&f=1", "display_name": "CAta.RAy", "link": "https://stackoverflow.com/users/2723405/cata-ray"}, "is_accepted": false, "score": 7, "last_activity_date": 1592136622, "last_edit_date": 1592136622, "creation_date": 1534263572, "answer_id": 51845820, "question_id": 49785133, "link": "https://stackoverflow.com/questions/49785133/keras-dice-coefficient-loss-function-is-negative-and-increasing-with-epochs/51845820#51845820", "title": "Keras: Dice coefficient loss function is negative and increasing with epochs", "body": "<p>Either <code>1-dice_coef</code> or <code>-dice_coef</code> should make no difference for convergence but\n<code>1-dice_coef</code> provides a more familiar way for monitoring since the values are in the range [0, 1], not [-1, 0].</p>\n"}], "owner": {"reputation": 349, "user_id": 3653289, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba123d5a54ce38ac3b7fb5404b1eaf94?s=128&d=identicon&r=PG&f=1", "display_name": "Deba", "link": "https://stackoverflow.com/users/3653289/deba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10376, "favorite_count": 3, "answer_count": 2, "score": 2, "last_activity_date": 1592136622, "creation_date": 1523484670, "last_edit_date": 1534356255, "question_id": 49785133, "link": "https://stackoverflow.com/questions/49785133/keras-dice-coefficient-loss-function-is-negative-and-increasing-with-epochs", "title": "Keras: Dice coefficient loss function is negative and increasing with epochs", "body": "<p>According to this Keras implementation of Dice Co-eff loss function, the loss is minus of calculated value of dice coefficient. Loss should decrease with epochs but with this implementation I am , naturally, getting always negative loss and the loss getting decreased with epochs, i.e. shifting away from 0 toward the negative infinity side, instead of getting closer to 0. <strong>If I use (1- dice co-eff) instead of (-dice co-eff) as loss, will it be wrong?</strong>\nHere's the full Keras implementation (which I was talking about): <a href=\"https://github.com/jocicmarko/ultrasound-nerve-segmentation/blob/master/train.py\" rel=\"nofollow noreferrer\">https://github.com/jocicmarko/ultrasound-nerve-segmentation/blob/master/train.py</a></p>\n\n<pre><code>smooth = 1.\n\ndef dice_coef(y_true, y_pred):\n    y_true_f = K.flatten(y_true)\n    y_pred_f = K.flatten(y_pred)\n    intersection = K.sum(y_true_f * y_pred_f)\n    return (2. * intersection + smooth) / (K.sum(y_true_f) + K.sum(y_pred_f) + smooth)\n\n\ndef dice_coef_loss(y_true, y_pred):\nreturn -dice_coef(y_true, y_pred)\n</code></pre>\n\n<p>I have shared a log of my experiment with you, although only for 2 epochs:</p>\n\n<pre><code>Train on 2001 samples, validate on 501 samples\nEpoch 1/2\nEpoch 00001: loss improved from inf to -0.73789, saving model to unet.hdf5\n - 3229s - loss: -7.3789e-01 - dice_coef: 0.7379 - val_loss: -7.9304e-01 - val_dice_coef: 0.7930\nEpoch 2/2\nEpoch 00002: loss improved from -0.73789 to -0.81037, saving model to unet.hdf5\n - 3077s - loss: -8.1037e-01 - dice_coef: 0.8104 - val_loss: -8.2842e-01 - val_dice_coef: 0.8284\npredict test data\n9/9 [==============================] - 4s 429ms/step\ndict_keys(['val_dice_coef', 'loss', 'val_loss', 'dice_coef'])\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1523487056, "last_edit_date": 1523487056, "creation_date": 1523485251, "answer_id": 49785217, "question_id": 49785127, "link": "https://stackoverflow.com/questions/49785127/flatten-pandas-data-frames-concat-result/49785217#49785217", "title": "Flatten Pandas data frames concat result", "body": "<p>By adding <code>drop=False</code> within <code>set_index</code>  then, with <code>str.contains</code> + <code>fillna</code> we achieve the expected output </p>\n\n<pre><code>dfs = [df_a.set_index(['type_1','subject_id_1'],drop=False),\n       df_b.set_index(['type_2','subject_id_2'],drop=False),\n       df_c.set_index(['type_3','subject_id_3'],drop=False)]\n\ndf = pd.concat(dfs, axis=1)\n\ndf.loc[:,df.columns.str.contains('type')]=df.loc[:,df.columns.str.contains('type')].apply(lambda x : x.fillna(df.index.to_frame()[0]).astype(int))\ndf.loc[:,df.columns.str.contains('subject_id')]=df.loc[:,df.columns.str.contains('subject_id')].apply(lambda x :x.fillna(df.index.to_frame()[1]).astype(int))\n</code></pre>\n"}], "owner": {"reputation": 2115, "user_id": 1362485, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85b32b3a16a6ab2c1dec2bc3d086bff1?s=128&d=identicon&r=PG&f=1", "display_name": "ps0604", "link": "https://stackoverflow.com/users/1362485/ps0604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 49785217, "answer_count": 1, "score": 2, "last_activity_date": 1523487056, "creation_date": 1523484652, "question_id": 49785127, "link": "https://stackoverflow.com/questions/49785127/flatten-pandas-data-frames-concat-result", "title": "Flatten Pandas data frames concat result", "body": "<p>Given the following code that concatenates three data frames, I need to flatten the result:</p>\n\n<pre><code>import pandas as pd\n\nraw_data = {\n        'type_1': [1, 1, 0, 0, 1],\n        'subject_id_1': ['1', '2', '3', '4', '5'],\n        'first_name_1': ['Alex', 'Amy', 'Allen', 'Alice', 'Ayoung']}\ndf_a = pd.DataFrame(raw_data, columns = ['type_1', 'subject_id_1', 'first_name_1'])\n\nraw_datab = {\n        'type_2': [1, 1, 0, 0, 0],\n        'subject_id_2': ['4', '5', '6', '7', '8'],\n        'first_name_2': ['Billy', 'Brian', 'Bran', 'Bryce', 'Betty']}\ndf_b = pd.DataFrame(raw_datab, columns = ['type_2', 'subject_id_2', 'first_name_2'])\n\nraw_datac = {\n        'type_3': [1, 1],\n        'subject_id_3': ['4', '5'],\n        'first_name_3': ['Joe', 'Paul']}\ndf_c = pd.DataFrame(raw_datac, columns = ['type_3', 'subject_id_3', 'first_name_3'])\n\ndfs = [df_a.set_index(['type_1','subject_id_1']),\n       df_b.set_index(['type_2','subject_id_2']),\n       df_c.set_index(['type_3','subject_id_3'])]\n\ndf = pd.concat(dfs, axis=1)\nprint (df)\n</code></pre>\n\n<p>The code prints:</p>\n\n<pre><code>    first_name_1 first_name_2 first_name_3\n0 3        Allen          NaN          NaN\n  4        Alice          NaN          NaN\n  6          NaN         Bran          NaN\n  7          NaN        Bryce          NaN\n  8          NaN        Betty          NaN\n1 1         Alex          NaN          NaN\n  2          Amy          NaN          NaN\n  4          NaN        Billy          Joe\n  5       Ayoung        Brian         Paul\n</code></pre>\n\n<p>but I need to flatten it, where the result should be a list with the following content, similar to an SQL SELECT result (couldn't include all the data, but you get the idea):</p>\n\n<pre><code>type_1   subject_id_1  first_name_1 type_2   subject_id_2  first_name_2  ...\n 0            3          Allen       0            3          NaN   ...\n 0            4          Alice       0            4          NaN   ...            \n 0            6          NaN         0            6          Bran  ...\n 0            7          NaN         0            7          Bryce ...\n 0            8          NaN         0            8          Betty ...\n 1            1          Alex        1            1          NaN   ...\n 1            2          Amy         1            2          NaN   ...    \n 1            4          NaN         1            4          Billy ...   \n 1            5          Ayoung      1            5          Brian ...   \n</code></pre>\n\n<p>Is this possible with Pandas?</p>\n"}, {"tags": ["python", "unit-testing", "mocking", "patch"], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 4358938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dgxj.png?s=128&g=1", "display_name": "Jordan Lee", "link": "https://stackoverflow.com/users/4358938/jordan-lee"}, "edited": false, "score": 0, "creation_date": 1524783685, "post_id": 49912440, "comment_id": 87122417, "body": "I tested this out and it works well. Thank you so much!"}], "tags": [], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "is_accepted": true, "score": 0, "last_activity_date": 1524109960, "creation_date": 1524109960, "answer_id": 49912440, "question_id": 49785120, "link": "https://stackoverflow.com/questions/49785120/python-mock-a-base-classs-attribute/49912440#49912440", "title": "Python mock a base class&#39;s attribute", "body": "<p>The instance member or instance variable of a class is different from class attribute or class property. this mocked the <code>attr</code> only by keeping all class attributes.</p>\n\n<pre><code>import mock\nfrom app import App\nfrom app import Base\nimport unittest\nfrom StringIO import StringIO\nclass TestApp(unittest.TestCase):\n\n    @mock.patch('sys.stdout', new_callable=StringIO)\n    def test_mock_instance_var(self, mocked_stdout):\n\n        base = Base()\n        app = App()\n\n        mock_base = mock.MagicMock(name='Base', spec=Base)\n        instance = mock_base.return_value\n        instance.attr.return_value = 'mmm'\n        base.attr = instance.attr.return_value\n        self.assertEqual(base.attr, 'mmm')\n\n        app.base = base\n\n        self.assertEqual(app.base.attr, 'mmm')\n        # the print stdout of show()\n        app.base.show()\n        self.assertEqual(mocked_stdout.getvalue(), 'mmm\\n')\n</code></pre>\n"}], "owner": {"reputation": 314, "user_id": 4358938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dgxj.png?s=128&g=1", "display_name": "Jordan Lee", "link": "https://stackoverflow.com/users/4358938/jordan-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 1, "accepted_answer_id": 49912440, "answer_count": 1, "score": 1, "last_activity_date": 1524866661, "creation_date": 1523484598, "last_edit_date": 1524866661, "question_id": 49785120, "link": "https://stackoverflow.com/questions/49785120/python-mock-a-base-classs-attribute", "title": "Python mock a base class&#39;s attribute", "body": "<p>For testing, I'd like to change a single Class instance's attribute (self.attr) in a base class.</p>\n\n<pre><code># app.py\nclass Base():\n    def __init__(self):\n        self.attr = 'original_value'\n\n    def show(self):\n        print(self.attr) \n\nclass App():\n    def __init__(self):  \n        self.base = Base()\n</code></pre>\n\n<p>Here is my attempt at mocking the Base class instance's attribute <code>attr</code></p>\n\n<pre><code># test_app.py\nfrom mock import Mock\nfrom app import App\n\ndef test_mock_inherited_class_instance():\n    \"\"\" With mocking. Change app.base.attr from 'original_value' to 'new_value'.\n    \"\"\"\n    app = App()\n    app.base = Mock()\n    app.base.attr = 'new_value'\n    app.base.show() # I'd like this to show 'new_value', NOT 'original_value'\n</code></pre>\n"}, {"tags": ["python", "dataframe", "spark-structured-streaming"], "answers": [{"comments": [{"owner": {"reputation": 468, "user_id": 1572138, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/7mLAm.jpg?s=128&g=1", "display_name": "rodrigocprates", "link": "https://stackoverflow.com/users/1572138/rodrigocprates"}, "edited": false, "score": 0, "creation_date": 1580408539, "post_id": 50095755, "comment_id": 106097494, "body": "it seems that uuidUdf() passed to withColumn function gives a &quot; assert isinstance(col, Column), &quot;col should be Column&quot; &quot; error. any thoughts?"}, {"owner": {"reputation": 43204, "user_id": 2761509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79afb77b8b7efb4ae5c39ae91eef7e61?s=128&d=identicon&r=PG&f=1", "display_name": "VB_", "link": "https://stackoverflow.com/users/2761509/vb"}, "edited": false, "score": 0, "creation_date": 1587733811, "post_id": 50095755, "comment_id": 108632900, "body": "@Atanuchatterjee UDFs works times (or even tens of times) slower in Python. It&#39;s especially important for Streaming. Better use vectorized Pandas UDFs or Scala UDFs"}, {"owner": {"reputation": 366, "user_id": 917651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RBovL.jpg?s=128&g=1", "display_name": "AlessioG", "link": "https://stackoverflow.com/users/917651/alessiog"}, "edited": false, "score": 0, "creation_date": 1597841512, "post_id": 50095755, "comment_id": 112264395, "body": "applying this solution can lead to unwanted results. Every-time an operation is applied on Df1, the values for id will be different."}, {"owner": {"reputation": 15622, "user_id": 38368, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9825eee1aeea415663794aecf29232bc?s=128&d=identicon&r=PG", "display_name": "Danny Varod", "link": "https://stackoverflow.com/users/38368/danny-varod"}, "reply_to_user": {"reputation": 366, "user_id": 917651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RBovL.jpg?s=128&g=1", "display_name": "AlessioG", "link": "https://stackoverflow.com/users/917651/alessiog"}, "edited": false, "score": 0, "creation_date": 1606067107, "post_id": 50095755, "comment_id": 114840893, "body": "@AlessioG this is the only result that makes sense for UUID - they are supposed to be unique (different) per row, per run, per machine, per timestamp etc."}, {"owner": {"reputation": 366, "user_id": 917651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RBovL.jpg?s=128&g=1", "display_name": "AlessioG", "link": "https://stackoverflow.com/users/917651/alessiog"}, "reply_to_user": {"reputation": 15622, "user_id": 38368, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9825eee1aeea415663794aecf29232bc?s=128&d=identicon&r=PG", "display_name": "Danny Varod", "link": "https://stackoverflow.com/users/38368/danny-varod"}, "edited": false, "score": 0, "creation_date": 1606116133, "post_id": 50095755, "comment_id": 114851937, "body": "@DannyVarod you are totally right on the definition. My comment was to warn about unwanted results/side effects. You can&#39;t rely on <code>Df1</code> to always have the same uuids throughout your code, because values change as you apply operations on it"}, {"owner": {"reputation": 15622, "user_id": 38368, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9825eee1aeea415663794aecf29232bc?s=128&d=identicon&r=PG", "display_name": "Danny Varod", "link": "https://stackoverflow.com/users/38368/danny-varod"}, "reply_to_user": {"reputation": 366, "user_id": 917651, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RBovL.jpg?s=128&g=1", "display_name": "AlessioG", "link": "https://stackoverflow.com/users/917651/alessiog"}, "edited": false, "score": 1, "creation_date": 1606134252, "post_id": 50095755, "comment_id": 114859549, "body": "@AlessioG true, if you iterate the results twice you&#39;ll get different results, therefore if you have to process twice, you should persist after adding the random column."}], "tags": [], "owner": {"reputation": 337, "user_id": 6862462, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gu2JsUOLows/AAAAAAAAAAI/AAAAAAAABag/gR1eBbftpPI/photo.jpg?sz=128", "display_name": "Atanu chatterjee", "link": "https://stackoverflow.com/users/6862462/atanu-chatterjee"}, "is_accepted": false, "score": 6, "last_activity_date": 1525072967, "creation_date": 1525072967, "answer_id": 50095755, "question_id": 49785108, "link": "https://stackoverflow.com/questions/49785108/spark-streaming-with-python-how-to-add-a-uuid-column/50095755#50095755", "title": "Spark streaming with python: how to add a UUID column?", "body": "<p>Please Try this:</p>\n\n<pre><code>import uuid\nfrom pyspark.sql.functions import udf\n\nuuidUdf= udf(lambda : str(uuid.uuid4()),StringType())\nDf1 = Df.withColumn(\"id\",uuidUdf())\n</code></pre>\n\n<p><strong>Note:</strong> You should assign to new DF after adding new column. (<em>Df1 = Df.withColumn(....)</em></p>\n"}, {"comments": [{"owner": {"reputation": 347, "user_id": 1910565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c517a9db3fede3e51d496b9e1b0f65?s=128&d=identicon&r=PG", "display_name": "Adam Marples", "link": "https://stackoverflow.com/users/1910565/adam-marples"}, "edited": false, "score": 2, "creation_date": 1585308999, "post_id": 51521792, "comment_id": 107720033, "body": "Yes, you want a unique id for each record, that&#39;s why they&#39;re called uuids."}], "tags": [], "owner": {"reputation": 757, "user_id": 7991002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0147d9cd911f959fac1918759ff46ced?s=128&d=identicon&r=PG", "display_name": "Pavithran Ramachandran", "link": "https://stackoverflow.com/users/7991002/pavithran-ramachandran"}, "is_accepted": false, "score": 1, "last_activity_date": 1532530003, "creation_date": 1532530003, "answer_id": 51521792, "question_id": 49785108, "link": "https://stackoverflow.com/questions/49785108/spark-streaming-with-python-how-to-add-a-uuid-column/51521792#51521792", "title": "Spark streaming with python: how to add a UUID column?", "body": "<p>Please use <code>lit</code> function so that you generate same id for all the records.\n<code>lit</code> performs the function only once and gets the column value and adds it to every record.</p>\n\n<pre><code>&gt;&gt;&gt; df.show(truncate=False)\n+---+\n|x  |\n+---+\n|0  |\n|1  |\n|2  |\n|3  |\n|4  |\n|5  |\n|6  |\n|7  |\n|8  |\n|9  |\n+---+\n&gt;&gt;&gt; import uuid\n&gt;&gt;&gt; id = str(uuid.uuid4())\n&gt;&gt;&gt; df = df.withColumn(\"id\", lit(id))\n&gt;&gt;&gt; df.show(truncate=False)\n+---+------------------------------------+\n|x  |id                                  |\n+---+------------------------------------+\n|0  |923b69d6-4bee-423d-a892-79162df5684d|\n|1  |923b69d6-4bee-423d-a892-79162df5684d|\n|2  |923b69d6-4bee-423d-a892-79162df5684d|\n|3  |923b69d6-4bee-423d-a892-79162df5684d|\n|4  |923b69d6-4bee-423d-a892-79162df5684d|\n|5  |923b69d6-4bee-423d-a892-79162df5684d|\n|6  |923b69d6-4bee-423d-a892-79162df5684d|\n|7  |923b69d6-4bee-423d-a892-79162df5684d|\n|8  |923b69d6-4bee-423d-a892-79162df5684d|\n|9  |923b69d6-4bee-423d-a892-79162df5684d|\n+---+------------------------------------+\n</code></pre>\n\n<p>Using <code>udf</code> won't solve the function as it gets called for every row, and we end up getting new uuid's for each call.</p>\n\n<pre><code>&gt;&gt;&gt; df1 = df.withColumn(\"id\",uuidUdf())\n&gt;&gt;&gt; uuidUdf= udf(lambda : str(uuid.uuid4()),StringType())\n&gt;&gt;&gt; df1 = df.withColumn(\"id\",uuidUdf())\n&gt;&gt;&gt; df1.show(truncate=False)\n+---+------------------------------------+\n|x  |id                                  |\n+---+------------------------------------+\n|0  |6d051ec6-b91a-4c42-b37c-707a293f1dc8|\n|1  |cd3c75b1-8a06-461b-82ae-51f4354296bd|\n|2  |3996a022-de99-4403-9346-74e66210f9ef|\n|3  |ad57a9c4-5c67-4545-bef6-77d89cff70d5|\n|4  |5c9a82a1-323e-4ce0-9082-e36c5a6f61db|\n|5  |7a64ee81-4c84-43d0-ab7d-0a79ed694950|\n|6  |a0fb26e7-cf1a-445d-bd26-10dc453ddc1e|\n|7  |435a7e6a-da22-4add-8953-b5c56b01c790|\n|8  |fd3c5fd8-c9d5-4725-b32a-f3ce9386b9b8|\n|9  |2291cc67-47cf-4921-80ec-b4180c73533c|\n+---+------------------------------------+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15622, "user_id": 38368, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9825eee1aeea415663794aecf29232bc?s=128&d=identicon&r=PG", "display_name": "Danny Varod", "link": "https://stackoverflow.com/users/38368/danny-varod"}, "is_accepted": false, "score": 1, "last_activity_date": 1606068363, "creation_date": 1606068363, "answer_id": 64957674, "question_id": 49785108, "link": "https://stackoverflow.com/questions/49785108/spark-streaming-with-python-how-to-add-a-uuid-column/64957674#64957674", "title": "Spark streaming with python: how to add a UUID column?", "body": "<p>From <code>pyspark</code>'s <code>functions.py</code>:</p>\n<blockquote>\n<p>note: The user-defined functions are considered deterministic by default. Due to optimization, duplicate invocations may be eliminated or the function may even be invoked more times than it is present in the query. If your function is not deterministic, call <code>asNondeterministic</code> on the user defined function. E.g.:</p>\n</blockquote>\n<pre><code>from pyspark.sql.types import IntegerType\nimport random\nrandom_udf = udf(lambda: int(random.random() * 100), IntegerType()).asNondeterministic()\n</code></pre>\n<p>So for a UUID this would be:</p>\n<pre><code>from pyspark.sql.functions import udf\nfrom pyspark.sql.types import StringType\nimport uuid\nrandom_udf = udf(lambda: str(uuid.uuid4()), StringType()).asNondeterministic()\n</code></pre>\n<p>and the usage:</p>\n<pre><code>df = df.withColumn('id', random_udf())\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 1757991, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9092b0de812ede484df38b2a6e93c5c9?s=128&d=identicon&r=PG", "display_name": "bea", "link": "https://stackoverflow.com/users/1757991/bea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7553, "favorite_count": 3, "answer_count": 3, "score": 7, "last_activity_date": 1606068363, "creation_date": 1523484498, "question_id": 49785108, "link": "https://stackoverflow.com/questions/49785108/spark-streaming-with-python-how-to-add-a-uuid-column", "title": "Spark streaming with python: how to add a UUID column?", "body": "<p>I would like to add a column with a generated id to my data frame. I have tried:</p>\n\n<pre><code>uuidUdf = udf(lambda x: str(uuid.uuid4()), StringType())\ndf = df.withColumn(\"id\", uuidUdf())\n</code></pre>\n\n<p>however, when I do this, nothing is written to my output directory. When I remove these lines, everything works fine so there must be some error but I don't see anything in the console.</p>\n\n<p>I have tried using monotonically_increasing_id() instead of generating a UUID but in my testing, this produces many duplicates. I need a unique identifier (does not have to be a UUID specifically). </p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1523484234, "post_id": 49785040, "comment_id": 86585557, "body": "So you just want the names? <code>[i[0] for i in s]</code> after you sort"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1523484301, "post_id": 49785040, "comment_id": 86585574, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22412258/get-the-first-element-of-each-tuple-in-a-list-in-python\">Get the first element of each tuple in a list in Python</a>"}, {"owner": {"reputation": 11, "user_id": 9457613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fd31c6e2d979cb6080cc2e39e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "hugole98", "link": "https://stackoverflow.com/users/9457613/hugole98"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1523484393, "post_id": 49785040, "comment_id": 86585607, "body": "That worked, thanks! Can&#39;t understand why I didn&#39;t think of that sooner!"}, {"owner": {"reputation": 11, "user_id": 9457613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fd31c6e2d979cb6080cc2e39e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "hugole98", "link": "https://stackoverflow.com/users/9457613/hugole98"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1523484434, "post_id": 49785040, "comment_id": 86585623, "body": "@chrisz, my bad, I must have not seen this in the similar questions while I was writing mine, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "reply_to_user": {"reputation": 11, "user_id": 9457613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fd31c6e2d979cb6080cc2e39e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "hugole98", "link": "https://stackoverflow.com/users/9457613/hugole98"}, "edited": false, "score": 0, "creation_date": 1523484411, "post_id": 49785067, "comment_id": 86585616, "body": "Great! <code>Happy Coding.</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1523485058, "post_id": 49785067, "comment_id": 86585812, "body": "<code>sum(s, ()))</code> <i>why are you suggesting an antipattern</i>? <i>never</i> use <code>sum</code> to concatenate sequences. That is O(N^2). Use <code>itertools.chain</code> or a flattening list-comprehension."}, {"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1523485133, "post_id": 49785067, "comment_id": 86585830, "body": "@juanpa.arrivillaga I was just trying other alternatives, may be not good idea, will remove it."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1523485168, "post_id": 49785067, "comment_id": 86585844, "body": "Flattening and then slicing isn&#39;t crazy - it can be O(N), but not if your flattening operation is O(N^2)"}], "tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": false, "score": 1, "last_activity_date": 1523485142, "last_edit_date": 1523485142, "creation_date": 1523484242, "answer_id": 49785067, "question_id": 49785040, "link": "https://stackoverflow.com/questions/49785040/selecting-part-of-a-string-in-a-list/49785067#49785067", "title": "Selecting part of a string in a list", "body": "<p>You can extract first element of <code>tuple</code> with <code>list comprehension</code>:</p>\n\n<pre><code>print ([x[0] for x in s])\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>['Neptune', 'Uranus', 'Saturn', 'Jupiter', 'Mars', 'Earth', 'Venus', 'Mercury']\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9457613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5fd31c6e2d979cb6080cc2e39e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "hugole98", "link": "https://stackoverflow.com/users/9457613/hugole98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523485142, "creation_date": 1523484075, "question_id": 49785040, "link": "https://stackoverflow.com/questions/49785040/selecting-part-of-a-string-in-a-list", "title": "Selecting part of a string in a list", "body": "<p>I'm trying to write a program that displays the names of the planets in the list Planets in descending order by their position from the Sun.</p>\n\n<p>As you can see below, I've managed to figure out how to sort the different planets by their position from the Sun (third value in the strings) but I can't figure out how to remove the numbers and just display the text, as it displays the whole strings from the list and not just the name of the planet which is what I would want ideally. Any ideas?</p>\n\n<pre><code>planet_tuples=[\n    (\"Mercury\",75,1),\n    (\"Venus\",460,2),\n    (\"Mars\",140,4),\n    (\"Earth\",510,3),\n    (\"Jupiter\",62000,5),\n    (\"Neptune\",7640,8),\n    (\"Saturn\",42700,6),\n    (\"Uranus\",8100,7),\n    ]\ns=(sorted(planet_tuples,key=lambda planet: planet[2],reverse=True))\ns.remove(planet_tuples[])\nprint (s)\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyside"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1523490706, "last_edit_date": 1523490706, "creation_date": 1523490369, "answer_id": 49785939, "question_id": 49785026, "link": "https://stackoverflow.com/questions/49785026/make-a-graph-of-qt-widgets-that-extend-outside-its-parent-window/49785939#49785939", "title": "Make a graph of Qt widgets that extend outside its parent window", "body": "<p>The solution I propose is using <code>QListWidget</code> with a <code>QMenu</code>.</p>\n\n<pre><code>import sys\n\nfrom PyQt4.QtCore import Qt\nfrom PyQt4.QtGui import QApplication, QListWidget, QListWidgetItem, QMenu\n\n\nclass MenuWidget(QListWidget):\n    DependenciesRole = Qt.UserRole\n\n    def __init__(self, items, parent=None):\n        QListWidget.__init__(self, parent)\n        for it in items:\n            name = it[\"name\"]\n            dependencies = it[\"dependencies\"]\n            it = QListWidgetItem(name)\n            self.addItem(it)\n            it.setData(MenuWidget.DependenciesRole, dependencies)\n\n    def mousePressEvent(self, event):\n        QListWidget.mousePressEvent(self, event)\n        it = self.itemAt(event.pos())\n        if it is not None:\n            dependencies = it.data(MenuWidget.DependenciesRole)\n            if dependencies:\n                menu = QMenu(self)\n                MenuWidget.add_submenu(menu, dependencies)\n                p = self.visualRect(self.indexAt(event.pos())).topRight()\n                menu.popup(self.mapToGlobal(p))\n\n    @staticmethod\n    def add_submenu(menu, items):\n        for it in items:\n            name = it[\"name\"]\n            dependencies = it[\"dependencies\"]\n            if dependencies:\n                mn = menu.addMenu(name)\n                MenuWidget.add_submenu(mn, dependencies)\n            else:\n                menu.addAction(name)\n\n\nd = [\n    {\n        'name': 'foo',\n        'dependencies': [\n            {\n                'name': 'bar',\n                'dependencies': [],\n            },\n            {\n                'name': 'when',\n                'dependencies': [\n                    {\n                        'name': 'subitem',\n                        'dependencies': [],\n                    },\n                    {\n                        'name': 'will',\n                        'dependencies': [\n                            {\n                                'name': 'it',\n                                'dependencies': [\n                                    {\n                                        'name': 'end',\n                                        'dependencies': [],\n                                        'version': 8,\n                                        'latest': 10,\n                                    },\n                                ],\n                            },\n                        ],\n                    },\n                    {\n                        'name': 'another',\n                        'dependencies': [],\n                    },\n                ],\n            },\n            {\n                'name': 'thing',\n                'dependencies': [],\n            },\n        ],\n    },\n    {\n        'name': 'some_other_thing',\n        'dependencies': [],\n    },\n    {\n        'name': 'an_asset_with_data',\n        'dependencies': [],\n    },\n    {\n        'name': 'more_things',\n        'dependencies': [],\n    },\n]\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    w = MenuWidget(d)\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/m5uZF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m5uZF.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 621, "user_id": 3626104, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c180fd9d97b554bfc4560deab4c1ecd?s=128&d=identicon&r=PG", "display_name": "ColinKennedy", "link": "https://stackoverflow.com/users/3626104/colinkennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 49785939, "answer_count": 1, "score": 1, "last_activity_date": 1523490706, "creation_date": 1523483946, "question_id": 49785026, "link": "https://stackoverflow.com/questions/49785026/make-a-graph-of-qt-widgets-that-extend-outside-its-parent-window", "title": "Make a graph of Qt widgets that extend outside its parent window", "body": "<p>I'm trying to create a basic Qt solution for the image below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pwCZ9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pwCZ9.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>(At the bottom of the post, I've included a nested dict that could be used to generate the widget-graph, if anyone would like to use it)</p>\n\n<p>Basically, I need some kind of widget / tree of widgets that can ...</p>\n\n<ul>\n<li>pop out of the main window recursively (like shown)</li>\n<li>store arbitrary data so that I can style them differently like in the given image or give each widget different actions / tooltips / etc.</li>\n<li>Ideally, whatever solution should use some kind of View, so that I can share the model with other types of displays</li>\n</ul>\n\n<p>At first I thought maybe a QTreeWidget or QTreeView could do this but I could not get those classes to extend outside of the main window like shown.</p>\n\n<p>I also tried messing around with QMenu and QMenuBar and then QMenu widgets inside a QListWidget. None of those produced good results. But I could have been creating those incorrectly.</p>\n\n<p>Here is some data that I would need to display in Qt:</p>\n\n<pre><code>[\n    {\n        'name': 'foo',\n        'dependencies': [\n            {\n                'name': 'bar',\n                'dependencies': [],\n            },\n            {\n                'name': 'when',\n                'dependencies': [\n                    {\n                        'name': 'subitem',\n                        'dependencies': [],\n                    },\n                    {\n                        'name': 'will',\n                        'dependencies': [\n                            {\n                                'name': 'it',\n                                'dependencies': [\n                                    {\n                                        'name': 'end',\n                                        'dependencies': [],\n                                        'version': 8,\n                                        'latest': 10,\n                                    },\n                                ],\n                            },\n                        ],\n                    },\n                    {\n                        'name': 'another',\n                        'dependencies': [],\n                    },\n                ],\n            },\n            {\n                'name': 'thing',\n                'dependencies': [],\n            },\n        ],\n    },\n    {\n        'name': 'some_other_thing',\n        'dependencies': [],\n    },\n    {\n        'name': 'an_asset_with_data',\n        'dependencies': [],\n    },\n    {\n        'name': 'more_things',\n        'dependencies': [],\n    },\n]\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "flask", "url-routing", "backend"], "comments": [{"owner": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "edited": false, "score": 0, "creation_date": 1523607197, "post_id": 49785019, "comment_id": 86638879, "body": "Did I understand properly? Can&#39;t you change the old endpoint?"}, {"owner": {"reputation": 838, "user_id": 2344606, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/c6Wxd.jpg?s=128&g=1", "display_name": "MaxPY", "link": "https://stackoverflow.com/users/2344606/maxpy"}, "reply_to_user": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "edited": false, "score": 1, "creation_date": 1523636928, "post_id": 49785019, "comment_id": 86658141, "body": "No, I can not. There is no control over the original blueprint, I can only use it. Trying to find a way to remove/replace route in the blueprint object"}], "answers": [{"comments": [{"owner": {"reputation": 14545, "user_id": 704616, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1414093047248799bd35f5f7ff6d4ddd?s=128&d=identicon&r=PG", "display_name": "siebz0r", "link": "https://stackoverflow.com/users/704616/siebz0r"}, "edited": false, "score": 0, "creation_date": 1566905415, "post_id": 49830875, "comment_id": 101794379, "body": "When adding a second route (<code>test</code>) to <code>bp_two</code> in the second way, the route cannot be accessed. It errs with <code>TypeError: test() got an unexpected keyword argument &#39;&#47;my&#47;route&#47;&#39;</code>."}, {"owner": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "reply_to_user": {"reputation": 14545, "user_id": 704616, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1414093047248799bd35f5f7ff6d4ddd?s=128&d=identicon&r=PG", "display_name": "siebz0r", "link": "https://stackoverflow.com/users/704616/siebz0r"}, "edited": false, "score": 0, "creation_date": 1566936913, "post_id": 49830875, "comment_id": 101809914, "body": "@siebz0r sorry but I do not see any <code>test()</code> method / function in my answer. seems to be a problem with your code."}, {"owner": {"reputation": 14545, "user_id": 704616, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1414093047248799bd35f5f7ff6d4ddd?s=128&d=identicon&r=PG", "display_name": "siebz0r", "link": "https://stackoverflow.com/users/704616/siebz0r"}, "edited": false, "score": 0, "creation_date": 1567077769, "post_id": 49830875, "comment_id": 101860210, "body": "@DanilaGanchar That&#39;s why I said &quot;when adding&quot;, in other words; when taking your code and adding another function."}], "tags": [], "owner": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "is_accepted": true, "score": 3, "last_activity_date": 1523713469, "last_edit_date": 1523713469, "creation_date": 1523704888, "answer_id": 49830875, "question_id": 49785019, "link": "https://stackoverflow.com/questions/49785019/overwrite-route-in-flask-blueprint/49830875#49830875", "title": "Overwrite route in flask blueprint", "body": "<p>There are 2 solutions which I found. <strong>First</strong>:</p>\n\n<pre><code>from flask import Flask, Blueprint\n\n\nsimple_page = Blueprint('simple_page', __name__, )\n\n\n@simple_page.route('/my/route/')\ndef my():\n    # for example it's a registered route somewhere...\n    return 'default'\n\n\n@simple_page.route('/my/route/')\ndef new_my():\n    # new endpoint / should works instead my()\n    return 'new'\n\n# map of views which we won't register in Flask app\n# you can store this somewhere in settings\nSKIP_VIEWS = (\n    # route, view function\n    ('/my/route/', my, ),\n)\n\n\nclass CustomFlask(Flask):\n\n    def add_url_rule(self, rule, endpoint=None, view_func=None, **options):\n        # Flask registers views when an application starts\n        # do not add view from SKIP_VIEWS\n        for rule_, view_func_ in SKIP_VIEWS:  # type: str, func\n            if rule_ == rule and view_func == view_func_:\n                return\n        return super(CustomFlask, self).add_url_rule(rule, endpoint, view_func, **options)\n\n\napp = CustomFlask(__name__)\napp.register_blueprint(simple_page)\napp.run(debug=True)\n</code></pre>\n\n<p><strong>Second way</strong>:</p>\n\n<p><em>two.py</em> - default blueprint with endpoint</p>\n\n<pre><code>from flask import Blueprint\n\nbp_two = Blueprint('simple_page2', __name__, )\n\n\n@bp_two.route('/my/route/')\ndef default():\n    return 'default'\n</code></pre>\n\n<p><em>test.py</em> - your blueprint + app</p>\n\n<pre><code>from flask import Flask, Blueprint\n\nfrom two import bp_two\n\nyour_bp = Blueprint('simple_page', __name__, )\n\n\n@your_bp.route('/my/route/')\ndef new_route():\n    return 'new'\n\n\napp = Flask(__name__)\n# register blueprint and turn off '/my/route/' endpoint\napp.register_blueprint(bp_two, **{'url_defaults': {'/my/route/': None}})\napp.register_blueprint(your_bp)\n\napp.run(debug=True)\n</code></pre>\n\n<p>Run app. Open <code>/my/route/</code>. You will see that default endpoint wasn't add/works.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 838, "user_id": 2344606, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/c6Wxd.jpg?s=128&g=1", "display_name": "MaxPY", "link": "https://stackoverflow.com/users/2344606/maxpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4130, "favorite_count": 0, "accepted_answer_id": 49830875, "answer_count": 1, "score": 3, "last_activity_date": 1523713469, "creation_date": 1523483881, "last_edit_date": 1523552644, "question_id": 49785019, "link": "https://stackoverflow.com/questions/49785019/overwrite-route-in-flask-blueprint", "title": "Overwrite route in flask blueprint", "body": "<p>There is a blueprint with a lot of useful routes defined, but I have no control over it (can not change it's code in any way)\nTrying to reuse it in a different app but one of the blueprint's endpoints must be overloaded. How can I achieve that?</p>\n\n<p>I tried just adding a new route to blueprint on top of the existing one:</p>\n\n<pre><code>@blueprint.route('/my/route', methods=['PUT', 'POST'])\ndef my_new_view_func(program, project):\n    # some new behavior for the endpoint\n</code></pre>\n\n<p>As the result there is duplicate url_rule in <code>app.url_map.iter_rules()</code>:</p>\n\n<pre><code>&lt;Rule '/my/route' (PUT, POST) -&gt; my_view_func&gt;,\n&lt;Rule '/my/route' (PUT, POST) -&gt; my_new_view_func&gt;,\n</code></pre>\n\n<p>and when requesting <code>/my/route</code> old viewer <code>my_view_func</code> gets executed</p>\n\n<p>Can I somehow get rid of the old url rule? Or maybe there is a better way to overwrite the route?</p>\n"}, {"tags": ["python", "api", "scopus"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1523564109, "post_id": 49785006, "comment_id": 86625108, "body": "I&#39;ve tried, but I don&#39;t have access to the resources (no &quot;Institutional Token&quot;). Your task is to get the university name of the author of journals?"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1523569027, "post_id": 49785006, "comment_id": 86627287, "body": "Can you provide example input parameters you would intend to pass to the Elsevier API and your expected outputs? does your task require an &quot;Institutional Token&quot;? <a href=\"https://dev.elsevier.com/tecdoc_developer_faq.html\" rel=\"nofollow noreferrer\">dev.elsevier.com/tecdoc_developer_faq.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3014, "user_id": 3621464, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJc4V.jpg?s=128&g=1", "display_name": "MERose", "link": "https://stackoverflow.com/users/3621464/merose"}, "is_accepted": false, "score": 0, "last_activity_date": 1598718869, "creation_date": 1598718869, "answer_id": 63649369, "question_id": 49785006, "link": "https://stackoverflow.com/questions/49785006/how-to-use-elsevier-scopus-api-to-get-list-of-all-author-affiliations-for-a-give/63649369#63649369", "title": "How to use elsevier scopus api to get list of all author affiliations for a given journal?", "body": "<p>Using the <a href=\"https://pybliometrics.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">pybliometrics package</a> that we design (we're Scopus users w/o Elsevier affiliation) it's very easy:</p>\n<pre><code>from pybliometrics.scopus import ScopusSearch\n\nq = &quot;ISSN(0036-8075)&quot;  # Query of the journal SoftwareX\ns = ScopusSearch(q)  # Handles access, retrieval and parsing\npubs = s.results  # This is a list of namedtuples, one for each publication\n\ndata = []\nfor pub in pubs:\n    if not pub.author_ids:\n        continue\n    authors = pub.author_ids.split(&quot;;&quot;)\n    affs = pub.author_afids.split(&quot;;&quot;)  # Multiple affiliations joined on hyphen!\n    data.extend(list(zip(authors, affs)))\n</code></pre>\n<p>We designed the information such that missing affiliations are simply stored as empty string.</p>\n"}], "owner": {"reputation": 101, "user_id": 4161561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a04de7f9dda78f4666a469688ec36e?s=128&d=identicon&r=PG&f=1", "display_name": "illigrad", "link": "https://stackoverflow.com/users/4161561/illigrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1598718869, "creation_date": 1523483800, "question_id": 49785006, "link": "https://stackoverflow.com/questions/49785006/how-to-use-elsevier-scopus-api-to-get-list-of-all-author-affiliations-for-a-give", "title": "How to use elsevier scopus api to get list of all author affiliations for a given journal?", "body": "<p>I'm new to using an API, and I'm currently trying to use Elsevier API. My goal is to extract the author (university) affiliations for each submission in a given journal. I've set up the API Key and looked at the  <a href=\"https://raw.githubusercontent.com/ElsevierDev/elsapy/master/exampleProg.py\" rel=\"nofollow noreferrer\">exampleProg.py</a> found here.</p>\n\n<p>The <a href=\"https://dev.elsevier.com/technical_documentation.html\" rel=\"nofollow noreferrer\">How-To</a> guides also aren't very helpful with my specific task. Could someone point me in the right direction?</p>\n"}, {"tags": ["python", "python-3.x", "subprocess", "python-asyncio", "autobahn"], "answers": [{"tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": false, "score": 0, "last_activity_date": 1523627948, "creation_date": 1523627948, "answer_id": 49818752, "question_id": 49784996, "link": "https://stackoverflow.com/questions/49784996/combining-2-asyncio-based-code-segments/49818752#49818752", "title": "Combining 2 asyncio based code segments", "body": "<p>In this code:</p>\n\n<pre><code>c=loop.create_connection(lambda: SocketClient(loop),\n                              '192.168.0.219', 6773)\n# [...]\ndef some_rpc(with_data):\n    c.send('test')\n    return json.dumps({'status': 'OK'})\n</code></pre>\n\n<p><code>create_connection</code> <a href=\"https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop.create_connection\" rel=\"nofollow noreferrer\">is a coroutine function</a>, so <code>c</code> contains a coroutine object. Such object does have a <code>send</code> method, but one that is entirely unrelated to sending things over the network. After calling <code>create_connection</code>, you probably want to get the resulting transport with something like:</p>\n\n<pre><code>transport, ignore = loop.run_until_complete(c)\n</code></pre>\n\n<p>and then use <a href=\"https://docs.python.org/3/library/asyncio-protocol.html#asyncio.WriteTransport.write\" rel=\"nofollow noreferrer\"><code>transport.write()</code></a>, not <code>c.send()</code>.</p>\n"}], "owner": {"reputation": 347, "user_id": 373999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c47e5159d488dbac96059003b8ac39?s=128&d=identicon&r=PG", "display_name": "wimg", "link": "https://stackoverflow.com/users/373999/wimg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527087487, "creation_date": 1523483740, "last_edit_date": 1527087487, "question_id": 49784996, "link": "https://stackoverflow.com/questions/49784996/combining-2-asyncio-based-code-segments", "title": "Combining 2 asyncio based code segments", "body": "<p>I'm using the Autobahn asyncio system (to talk the Websocket WAMP protocol), which works fine and I can handle incoming RPC calls and pubsub.\nMy problem is I now have to connect TCP sockets and send information over these sockets as soon as an RPC call comes in through the Autobahn part.</p>\n\n<p>The autobahn part works fine like this :</p>\n\n<pre><code>from autobahn.asyncio.component import Component, run\nfrom asyncio import sleep\nfrom autobahn.asyncio.wamp import ApplicationSession, ApplicationRunner\n\n@comp.on_join\nasync def joined(session, details):\n    print(\"Connected to websocket\")\n\n    def on_message(msg):\n        msg = json.loads(msg)\n        print(msg)\n\n    def some_rpc(with_data):\n        print(\"Doing something with the data\")\n        return json.dumps({'status': 'OK'})\n\n    try:\n        session.subscribe(on_message, u'some_pubsub_topic')\n        session.register(some_rpc, u'some_rpc_call')\n        print(\"RPC and Pubsub initialized\")\n\n    except Exception as e:\n        print(\"could not subscribe to topic: {0}\".format(e))\n\nif __name__ == \"__main__\":\n     run([comp])\n</code></pre>\n\n<p>However now I need to be able to connect to multiple regular TCP sockets :</p>\n\n<pre><code>class SocketClient(asyncio.Protocol):\n    def __init__(self, loop):\n        self.data = b''\n        self.loop = loop\n\n    def connection_made(self, transport):\n        self.transport = transport\n        print('connected')\n\n    def data_received(self, data):\n        print('Data received: {!r}'.format(data.decode()))\n\n    def send(self, data):\n        self.transport.write(data)\n\n    def connection_lost(self, exc):\n        print('The server closed the connection')\n        print('Stop the event loop')\n        self.loop.stop()\n\nloop = asyncio.get_event_loop()\n\nc=loop.create_connection(lambda: SocketClient(loop),\n                              '192.168.0.219', 6773)\nloop.run_until_complete(c)\nloop.run_forever()\nloop.close()\n</code></pre>\n\n<p>The problem is that, when I combine both and do this :</p>\n\n<pre><code>def some_rpc(with_data):\n    c.send('test')\n    return json.dumps({'status': 'OK'})\n</code></pre>\n\n<p>It barks at me and tells me :</p>\n\n<blockquote>\n  <p>StopIteration</p>\n  \n  <p>During handling of the above exception, another exception occurred:</p>\n  \n  <p>Traceback (most recent call last):   File\n  \"/usr/lib/python3.5/site-packages/autobahn/wamp/websocket.py\", line\n  95, in onMessage\n      self._session.onMessage(msg)   File \"/usr/lib/python3.5/site-packages/autobahn/wamp/protocol.py\", line\n  894, in onMessage\n      on_reply = txaio.as_future(endpoint.fn, *invoke_args, **invoke_kwargs)   File \"/usr/lib/python3.5/site-packages/txaio/aio.py\", line 400, in\n  as_future\n      return create_future_error(create_failure())   File \"/usr/lib/python3.5/site-packages/txaio/aio.py\", line 393, in\n  create_future_error\n      reject(f, error)   File \"/usr/lib/python3.5/site-packages/txaio/aio.py\", line 462, in reject\n      future.set_exception(error.value)   File \"/usr/lib64/python3.5/asyncio/futures.py\", line 365, in set_exception\n      raise TypeError(\"StopIteration interacts badly with generators \" TypeError: StopIteration interacts badly with generators and cannot be\n  raised into a Future</p>\n</blockquote>\n\n<p>Does anyone have any idea on how to call the send function from within the RPC call function ?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "edited": false, "score": 1, "creation_date": 1523483805, "post_id": 49784989, "comment_id": 86585439, "body": "What have you tried so far?"}, {"owner": {"reputation": 1, "user_id": 8231321, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3QY5XxU0hmg/AAAAAAAAAAI/AAAAAAAANJs/BdVQ3pOjACA/photo.jpg?sz=128", "display_name": "Ben Walsh", "link": "https://stackoverflow.com/users/8231321/ben-walsh"}, "edited": false, "score": 0, "creation_date": 1523483931, "post_id": 49784989, "comment_id": 86585483, "body": "Just tried the above response however because there is other info in the line it doesn&#39;t work."}, {"owner": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 1, "creation_date": 1523484035, "post_id": 49784989, "comment_id": 86585513, "body": "See <a href=\"https://stackoverflow.com/questions/11968998/remove-lines-that-contain-certain-string\">this</a>"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 1, "creation_date": 1523484241, "post_id": 49784989, "comment_id": 86585558, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11968998/remove-lines-that-contain-certain-string\">Remove lines that contain certain string</a>"}, {"owner": {"reputation": 1, "user_id": 8231321, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3QY5XxU0hmg/AAAAAAAAAAI/AAAAAAAANJs/BdVQ3pOjACA/photo.jpg?sz=128", "display_name": "Ben Walsh", "link": "https://stackoverflow.com/users/8231321/ben-walsh"}, "edited": false, "score": 0, "creation_date": 1523484285, "post_id": 49784989, "comment_id": 86585570, "body": "That is deleting all of the text file"}, {"owner": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1523484481, "post_id": 49784989, "comment_id": 86585638, "body": "@BenWalsh You should post your code in the question."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1523484532, "post_id": 49784989, "comment_id": 86585652, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49732826/remove-a-single-row-from-a-csv-without-copying-files\">Remove a single row from a csv without copying files</a>"}, {"owner": {"reputation": 1, "user_id": 8231321, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3QY5XxU0hmg/AAAAAAAAAAI/AAAAAAAANJs/BdVQ3pOjACA/photo.jpg?sz=128", "display_name": "Ben Walsh", "link": "https://stackoverflow.com/users/8231321/ben-walsh"}, "reply_to_user": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1523484987, "post_id": 49784989, "comment_id": 86585789, "body": "@pushkin That solution has worked now, however, how can I remove the old file that was used."}, {"owner": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1523485126, "post_id": 49784989, "comment_id": 86585828, "body": "@BenWalsh See <a href=\"https://stackoverflow.com/questions/6996603/how-to-delete-a-file-or-folder\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9633048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1a80af64668ee1d6415aa47a50e354?s=128&d=identicon&r=PG", "display_name": "Madhu Ancha", "link": "https://stackoverflow.com/users/9633048/madhu-ancha"}, "is_accepted": false, "score": 1, "last_activity_date": 1523498307, "last_edit_date": 1523498307, "creation_date": 1523484562, "answer_id": 49785115, "question_id": 49784989, "link": "https://stackoverflow.com/questions/49784989/deleting-a-line-from-text-file-in-python/49785115#49785115", "title": "Deleting a line from text file in python", "body": "<p>First, open the file:</p>\n\n<pre><code>f = open(\"yourfile.txt\",\"r\")\n</code></pre>\n\n<p>Next, get all your lines from the file:</p>\n\n<pre><code>lines = f.readlines()\n</code></pre>\n\n<p>Now you can close the file:</p>\n\n<pre><code>f.close()\n</code></pre>\n\n<p>And reopen it in write mode:</p>\n\n<pre><code>f = open(\"yourfile.txt\",\"w\")\n</code></pre>\n\n<p>Then, write your lines back, except the line you want to delete. </p>\n\n<pre><code>for line in lines:\n  if \"699\" not in line:\n    f.write(line)\n</code></pre>\n\n<p>At the end, close the file again.</p>\n\n<pre><code>f.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 11691427, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pgMvn8-WrAY/AAAAAAAAAAI/AAAAAAAAOZA/OytEf6GTEVs/photo.jpg?sz=128", "display_name": "Izalion", "link": "https://stackoverflow.com/users/11691427/izalion"}, "is_accepted": false, "score": 0, "last_activity_date": 1564996447, "creation_date": 1564996447, "answer_id": 57355472, "question_id": 49784989, "link": "https://stackoverflow.com/questions/49784989/deleting-a-line-from-text-file-in-python/57355472#57355472", "title": "Deleting a line from text file in python", "body": "<p>Very simple:</p>\n\n<pre><code>    with open(file, \"r+\") as f:\n        d = f.readlines()\n        posdel = num-1\n        for i in range(0,len(d)):\n            if i == posdel:\n                del d[posdel]\n    with open(file, \"w\") as textobj:\n        for n in d:\n            textobj.write(n)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8231321, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3QY5XxU0hmg/AAAAAAAAAAI/AAAAAAAANJs/BdVQ3pOjACA/photo.jpg?sz=128", "display_name": "Ben Walsh", "link": "https://stackoverflow.com/users/8231321/ben-walsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1564996447, "creation_date": 1523483713, "last_edit_date": 1523484092, "question_id": 49784989, "link": "https://stackoverflow.com/questions/49784989/deleting-a-line-from-text-file-in-python", "title": "Deleting a line from text file in python", "body": "<p>I want to delete a specific line in a text file in python. for example, say in my text file I have:</p>\n\n<pre><code>Ben Walsh - 768\n\nJames Cook - 659\n\nJamie Walsh - 4359\n\nOwen Perkins - 699\n\nDylan Thomas - 1574\n\nAdam Ward - 987\n\nAllen Woodhouse - 599\n</code></pre>\n\n<p>I want to delete any line that contains the number <code>699</code>.\nHow do I do this?</p>\n\n<p>I have tried using this to solve it,<a href=\"https://stackoverflow.com/questions/4710067/deleting-a-specific-line-in-a-file-python\">Deleting a specific line in a file (python)</a>\nhowever, using Tkinter I am asking the user to enter the number of the person they want to delete. So the number decides what is deleted because there are other items on the line it does not delete it.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1523483867, "post_id": 49784969, "comment_id": 86585459, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16659818/how-to-read-complex-numbers-from-file-with-numpy\">How to read complex numbers from file with NumPy?</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1523484387, "post_id": 49784969, "comment_id": 86585604, "body": "<code>np.real</code> docs say it only takes one argument.  Why did you specify a <code>dtype</code>?"}, {"owner": {"reputation": 31, "user_id": 7385047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1201a6f4d51980d67f72ad2a84541ab0?s=128&d=identicon&r=PG&f=1", "display_name": "Khalilrazu", "link": "https://stackoverflow.com/users/7385047/khalilrazu"}, "edited": false, "score": 0, "creation_date": 1523484612, "post_id": 49784969, "comment_id": 86585679, "body": "I tried with one only by slicing the array. It didnt work unfortunately"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1523484645, "post_id": 49784969, "comment_id": 86585694, "body": "What&#39;s the <code>dtypes</code> for this dataframe?"}, {"owner": {"reputation": 31, "user_id": 7385047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1201a6f4d51980d67f72ad2a84541ab0?s=128&d=identicon&r=PG&f=1", "display_name": "Khalilrazu", "link": "https://stackoverflow.com/users/7385047/khalilrazu"}, "edited": false, "score": 0, "creation_date": 1523484750, "post_id": 49784969, "comment_id": 86585719, "body": "&#39;object&#39; always"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1523485727, "post_id": 49784969, "comment_id": 86586024, "body": "And that &#39;complex&#39; number, is that really complex or is it a string?   <code>(2+3.12j)</code> is the normal Python display format."}, {"owner": {"reputation": 31, "user_id": 7385047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1201a6f4d51980d67f72ad2a84541ab0?s=128&d=identicon&r=PG&f=1", "display_name": "Khalilrazu", "link": "https://stackoverflow.com/users/7385047/khalilrazu"}, "edited": false, "score": 0, "creation_date": 1523490810, "post_id": 49784969, "comment_id": 86587366, "body": "I guess the complex number is a string while panda is reading that from txt"}], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1523485827, "last_edit_date": 1523485827, "creation_date": 1523484784, "answer_id": 49785154, "question_id": 49784969, "link": "https://stackoverflow.com/questions/49784969/panda-read-csv-converting-imaginary-to-real/49785154#49785154", "title": "panda read_csv() converting imaginary to real", "body": "<p>Looks like <code>astype(complex)</code> works with Numpy arrays of strings, but not with Pandas Series of objects:</p>\n\n<pre><code>cmplx = df['effective_index'].str.replace('i','j')\\ # Go engineering\n                             .values\\               # Go NumPy\n                             .astype('str')\\        # Go string\n                             .astype(np.complex)    # Go complex\n#array([ 2.56839357 +1.13908050e-06j,  2.56839835 +1.12997938e-06j,\n#        2.56840156 +1.12387232e-06j])\ndf['effective_index'] = cmplx # Go Pandas again\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7385047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1201a6f4d51980d67f72ad2a84541ab0?s=128&d=identicon&r=PG&f=1", "display_name": "Khalilrazu", "link": "https://stackoverflow.com/users/7385047/khalilrazu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534969216, "creation_date": 1523483571, "last_edit_date": 1534969216, "question_id": 49784969, "link": "https://stackoverflow.com/questions/49784969/panda-read-csv-converting-imaginary-to-real", "title": "panda read_csv() converting imaginary to real", "body": "<p>After calling a file using pandas by this two lines: </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.read_csv('PN_lateral_n_eff.txt', header=None)\ndf.columns = [\"effective_index\"]\n</code></pre>\n\n<p>here is my output: </p>\n\n<pre><code>                         effective_index\n0  2.568393573877396+1.139080496494329e-006i\n1  2.568398351899841+1.129979376397734e-006i\n2  2.568401556986464+1.123872317134941e-006i\n</code></pre>\n\n<p>after that, i can not use the numpy to convert it into a real number. Because, panda dtype was object. I tried this: </p>\n\n<pre><code>np.real(df, dtype = float)\n</code></pre>\n\n<blockquote>\n  <p>TypeError: real() got an unexpected keyword argument 'dtype'</p>\n</blockquote>\n\n<p>Any way to do that?</p>\n"}, {"tags": ["python", "multithreading"], "answers": [{"tags": [], "owner": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "is_accepted": true, "score": 1, "last_activity_date": 1523484115, "last_edit_date": 1523484115, "creation_date": 1523483604, "answer_id": 49784975, "question_id": 49784953, "link": "https://stackoverflow.com/questions/49784953/syntax-error-flask-application/49784975#49784975", "title": "Syntax error flask application", "body": "<p>The sequential arguments for <code>app.run</code> can be passed in a tuple (constructed with parentheses, but no names). The named arguments must be passed in a dictionary. Dictionaries are constructed with <code>dict()</code> or curly braces, not parentheses. </p>\n\n<p>Since <code>host</code> and <code>port</code> are the first two arguments to <code>app.run</code>, any of the following should work:</p>\n\n<pre><code># positional args, passed as a tuple\nt1 = threading.Thread(target=app.run, args=('0.0.0.0', 443))\n\n# named args, passed in a dictionary created via dict()\nt1 = threading.Thread(target=app.run, kwargs=dict(host='0.0.0.0', port=443))\n\n# named args, passed in a dictionary created via {}\nt1 = threading.Thread(target=app.run, kwargs={'host': '0.0.0.0', 'port': 443}))\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7914382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f7657d50b11a1e8626e5237bdd68e15b?s=128&d=identicon&r=PG&f=1", "display_name": "eshkere111222333", "link": "https://stackoverflow.com/users/7914382/eshkere111222333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 49784975, "answer_count": 1, "score": 0, "last_activity_date": 1523485629, "creation_date": 1523483458, "last_edit_date": 1523485629, "question_id": 49784953, "link": "https://stackoverflow.com/questions/49784953/syntax-error-flask-application", "title": "Syntax error flask application", "body": "<p>I have following code:</p>\n\n<p><code>t1 = threading.Thread(target = app.run, args = (host='0.0.0.0', port = 443))</code></p>\n\n<p>and it gives me an error: </p>\n\n<pre><code>File \"/home/deploy/tgbot/tgbot.py\", line 1170\nt1 = threading.Thread(target = app.run, args = (host='0.0.0.0', port = 443))\n                                                    ^\n</code></pre>\n\n<p>What is the problem?</p>\n"}, {"tags": ["python", "macos", "ssl", "openssl", "pip"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1523483460, "post_id": 49784924, "comment_id": 86585316, "body": "<code>pip install pyopenssl -U</code> might help?"}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 8160673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d3b8e3941f487f5e80f57f9840a8427?s=128&d=identicon&r=PG&f=1", "display_name": "Overflowed", "link": "https://stackoverflow.com/users/8160673/overflowed"}, "is_accepted": true, "score": 0, "last_activity_date": 1523483516, "creation_date": 1523483516, "answer_id": 49784960, "question_id": 49784924, "link": "https://stackoverflow.com/questions/49784924/ssl-problems-in-mac-using-pip-install/49784960#49784960", "title": "SSL Problems in Mac using pip install", "body": "<p>You can try to ignore SSL errors using:</p>\n\n<pre><code>pip install --trusted-host pypi.python.org fake-useragent\n</code></pre>\n"}], "owner": {"reputation": 186, "user_id": 2371916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58283bdfe380db3aa501c6e5961cea76?s=128&d=identicon&r=PG", "display_name": "christopher de jesus", "link": "https://stackoverflow.com/users/2371916/christopher-de-jesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "closed_date": 1523610378, "accepted_answer_id": 49784960, "answer_count": 1, "score": 1, "last_activity_date": 1523484105, "creation_date": 1523483283, "last_edit_date": 1523484105, "question_id": 49784924, "link": "https://stackoverflow.com/questions/49784924/ssl-problems-in-mac-using-pip-install", "closed_reason": "Duplicate", "title": "SSL Problems in Mac using pip install", "body": "<p>I am having a problem confirming the ssl certificate:</p>\n\n<pre><code>(\"bad handshake: Error([('SSL routines', 'SSL23_GET_SERVER_HELLO', 'tlsv1 alert protocol version')],)\",) - skipping\n</code></pre>\n\n<p><br>\nI'm trying to do something very basic and I don't understand why this keeps happening. Would someone please advise how to fix this issue?</p>\n\n<pre><code>pip install fake-useragent\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1523501585, "post_id": 49785099, "comment_id": 86589680, "body": "I use <code>commit=False</code> in another view and it works fine (doesn&#39;t output the default). I removed <code>commit=False</code> anyway to check if it works and it still outputs the default value."}], "tags": [], "owner": {"reputation": 498, "user_id": 6693443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1157346497649699/picture?type=large", "display_name": "Geancarlo Murillo", "link": "https://stackoverflow.com/users/6693443/geancarlo-murillo"}, "is_accepted": false, "score": 0, "last_activity_date": 1523484423, "creation_date": 1523484423, "answer_id": 49785099, "question_id": 49784904, "link": "https://stackoverflow.com/questions/49784904/django-form-outputting-the-default-field-value-every-time/49785099#49785099", "title": "Django form outputting the default field value every time", "body": "<blockquote>\n  <p>This save() method accepts an optional commit keyword argument, which\n  accepts either True or False. If you call save() with commit=False,\n  then it will return an object that hasn\u2019t yet been saved to the\n  database. In this case, it\u2019s up to you to call save() on the resulting\n  model instance. This is useful if you want to do custom processing on\n  the object before saving it, or if you want to use one of the\n  specialized model saving options. commit is True by default.</p>\n</blockquote>\n\n<p>You are getting an instance with your defaults values. \nLook it better in <a href=\"https://docs.djangoproject.com/en/2.0/topics/forms/modelforms/#the-save-method\" rel=\"nofollow noreferrer\">Django Docs - Save Method</a></p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523484423, "creation_date": 1523483167, "question_id": 49784904, "link": "https://stackoverflow.com/questions/49784904/django-form-outputting-the-default-field-value-every-time", "title": "Django form outputting the default field value every time", "body": "<p>Here's my model/form:</p>\n\n<pre><code>class AdvertisePost(Post):\n    position = models.IntegerField(default=DURATION_CHOICES[2][0], choices=DURATION_CHOICES)\n    duration = models.IntegerField(default=48)\n\n    def __str__(self):\n        return self.title\n\n\nclass AdvertisePostForm(forms.ModelForm):\n    position = forms.ChoiceField(widget=forms.RadioSelect, required=False, choices=DURATION_CHOICES)\n    duration = forms.IntegerField(widget=forms.NumberInput(attrs={'type':'range', 'step': '1', 'min': '1', 'max': '148'}), required=False)\n\n    class Meta:\n        model = AdvertisePost\n        fields = [\n            ...\n            'position',\n            'duration'\n        ]\n</code></pre>\n\n<p><strong>views</strong></p>\n\n<pre><code>def options(request):\n    options_form = AdvertisePostForm(request.POST or None, request.FILES or None)\n\n    if options_form.is_valid():\n        instance = options_form.save(commit=False)\n        print(instance.duration) #prints 8 every time (default value)\n        print(instance.position) #prints 48 every time (default value)\n\n    context = {\n        'options_form': options_form\n    }\n\n    return render(request, 'advertising/options.html', context)\n</code></pre>\n\n<p>and my <strong>template</strong></p>\n\n<pre><code>&lt;form method=\"post\" enctype=\"multipart/form-data\" autocomplete=\"off\"&gt;{% csrf_token %}\n    {{ options_form.position }}\n    {{ options_form.duration }}\n&lt;input type=\"submit\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Even though I change the values it outputs the same default value every time. Any idea why this is and how I can fix this?</p>\n"}, {"tags": ["python", "sqlalchemy", "flask-sqlalchemy", "flask-restful"], "answers": [{"tags": [], "owner": {"reputation": 3389, "user_id": 2037826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LK68l.jpg?s=128&g=1", "display_name": "daveruinseverything", "link": "https://stackoverflow.com/users/2037826/daveruinseverything"}, "is_accepted": true, "score": 2, "last_activity_date": 1523921229, "last_edit_date": 1523921229, "creation_date": 1523498142, "answer_id": 49786804, "question_id": 49784883, "link": "https://stackoverflow.com/questions/49784883/saving-complex-objects-in-sqlalchemy/49786804#49786804", "title": "Saving complex objects in SQLAlchemy", "body": "<p>The \"many\" side of any SQLAlchemy relationship behaves like a standard Python list. You should be creating the <code>SubItemModel</code> objects directly and appending them to <code>ItemModel</code>:</p>\n\n<pre><code>item = ItemModel(name='item1')\nsubitem1 = SubItemModel(name='subitem1')\nsubitem2 = SubItemModel(name='subitem2')\nitem.sub_items.append(subitem1)\nitem.sub_items.append(subitem2)\n</code></pre>\n\n<p>or, to append multiple items at once, you can use the standard list <code>extend</code> method:</p>\n\n<pre><code>item = ItemModel(name='item1')\nsubitem1 = SubItemModel(name='subitem1')\nsubitem2 = SubItemModel(name='subitem2')\nitem.sub_items.extend([subitem1, subitem2])\n</code></pre>\n\n<p>You can, if you want, create the subitems directly when you're adding them:</p>\n\n<pre><code>item = ItemModel(name='item1')\nitem.sub_items.extend([SubItemModel(name='subitem1'), SubItemModel(name='subitem2')])\n</code></pre>\n\n<p>Whichever option you choose, you should be adding your created <code>item</code> object to the session, which will automatically include the new child records you've created:</p>\n\n<pre><code>session.add(item)\nsession.commit()\n</code></pre>\n\n<p>Voila, your item and subitems should all be inserted into the DB at once.</p>\n"}], "owner": {"reputation": 813, "user_id": 1661212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe71037c5e14b4a66a4ff1d3a1174a4?s=128&d=identicon&r=PG", "display_name": "ropeladder", "link": "https://stackoverflow.com/users/1661212/ropeladder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2769, "favorite_count": 0, "accepted_answer_id": 49786804, "answer_count": 1, "score": 0, "last_activity_date": 1523921229, "creation_date": 1523483042, "question_id": 49784883, "link": "https://stackoverflow.com/questions/49784883/saving-complex-objects-in-sqlalchemy", "title": "Saving complex objects in SQLAlchemy", "body": "<p>I'm new to SQLAlchemy and I'm trying to create a new item that includes a list of several sub-items (simple One-to-Many relation) using Flask-RESTful and Flask-SQLAlchemy. I'm trying to create both the item and sub-items simultaneously and I'm not clear on how SQLAlchemy is supposed to work.</p>\n\n<pre><code>class ItemModel(Model):\n    __tablename__ = 'items'\n\n    id = Column(Integer, primary_key=True)\n    name = Column(String(80))\n    sub_items = relationship('SubItemModel')\n\nclass SubItemModel(db.Model):\n    __tablename__ = 'sub_items'\n\n    id = Column(Integer, primary_key=True)\n    item_id = Column(Integer, ForeignKey('items.id'))\n    name = Column(String(80))\n    item = relationship('ItemModel')\n</code></pre>\n\n<p>I want to add an <code>item</code> along with several <code>sub_items</code> (through a POST route), but I'm having trouble wrapping my head around which objects to create first and how much SQLAlchemy will do automatically. I got something working by creating an <code>item</code> with no <code>sub_items</code>, creating the <code>sub_items</code>, and then re-saving the <code>item</code> with the <code>sub_items</code>. But this seems pretty clunky, particularly in cases where either the <code>item</code> or some of the <code>sub_items</code> might already exist.</p>\n\n<p>My intuition is just to do something like this:</p>\n\n<pre><code>item = ItemModel(\n    name=\"item1\",\n    sub_items=[{name: \"subitem1\"},{name: \"subitem2\"}])\n\nsession.add(self)\nsession.commit()\n</code></pre>\n\n<p>But it's not working (I'm getting errors about unhashable types), and it seems ...too simple, somehow. Like I should define the <code>sub_item</code> objects separately. But since they depend on the item_id I'm not sure how to do this.</p>\n\n<p>I'm sure this has been answered before or explained in a simple tutorial somewhere but I haven't been able to find anything simple enough for me to understand. I'm hoping someone can walk me through the basics. (which parts are supposed to be magical and which parts do I still have to code manually...)</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "constraints", "convex-optimization", "elementwise-operations", "cvxpy"], "comments": [{"owner": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1523527109, "post_id": 49784872, "comment_id": 86601396, "body": "What is the status? Try <code>print prob.status</code>."}, {"owner": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1523527320, "post_id": 49784872, "comment_id": 86601540, "body": "If you use <code>numpy.set_printoptions(linewidth=150)</code> you may be able to print all 12 columns without carriage return."}, {"owner": {"reputation": 11, "user_id": 9572337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250988a5bc7f71a09feb1e8f0f1d09ee?s=128&d=identicon&r=PG&f=1", "display_name": "farid", "link": "https://stackoverflow.com/users/9572337/farid"}, "reply_to_user": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1523562742, "post_id": 49784872, "comment_id": 86624351, "body": "The status is optimal. Any suggestion about how to impose an elementwise constraint? What is wrong with the way I defined the elementwise constraints in the code?"}, {"owner": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1523563031, "post_id": 49784872, "comment_id": 86624514, "body": "Are you sure there is anything wrong? Due to numerical error, you should not expect to get exactly <code>0.0</code>. Take a look at <a href=\"https://math.stackexchange.com/a/2414847/339790\">this</a> code and its output. Once the entries of the matrix are rounded, it does not look that bad anymore."}, {"owner": {"reputation": 11, "user_id": 9572337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250988a5bc7f71a09feb1e8f0f1d09ee?s=128&d=identicon&r=PG&f=1", "display_name": "farid", "link": "https://stackoverflow.com/users/9572337/farid"}, "reply_to_user": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1523912166, "post_id": 49784872, "comment_id": 86747561, "body": "Maybe you&#39;re right. What makes me confused is that my results using Matlab CVX are different than the results using CVXPY, whereas both results are optimal. Have you ever experienced that?"}, {"owner": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1523912423, "post_id": 49784872, "comment_id": 86747696, "body": "I no longer use CVX. Cannot compare it to CVXPY."}, {"owner": {"reputation": 11, "user_id": 9572337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250988a5bc7f71a09feb1e8f0f1d09ee?s=128&d=identicon&r=PG&f=1", "display_name": "farid", "link": "https://stackoverflow.com/users/9572337/farid"}, "reply_to_user": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1523980317, "post_id": 49784872, "comment_id": 86780903, "body": "Is there any way to improve the precision in CVXPY?  I use Jupyter. I studied the CVXPY advanced tutorial. Based on the information there, I used the following   EPS = 1e-8     prob =cv.Problem(objective, constraints) result = prob.solve(solver=ECOS, feastol=EPS, abstol=EPS, reltol=EPS, feastol_inacc=EPS, abstol_inacc=EPS, reltol_inacc=EPS, max_iters=20, verbose=True, warm_start=True)  But I confronted with the error: &quot;name &#39;ECOS&#39; is not defined&quot;. Could you please inform me how I can solve this problem to be able to set both the solver and precision?"}, {"owner": {"reputation": 596, "user_id": 3926335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f346dad9a75758fb998efea8e873f?s=128&d=identicon&r=PG&f=1", "display_name": "steven", "link": "https://stackoverflow.com/users/3926335/steven"}, "edited": false, "score": 0, "creation_date": 1526944676, "post_id": 49784872, "comment_id": 87928992, "body": "Try cv.ECOS. A problem can have more than one optimal solution. All that matters is that they have the same optimal value."}], "owner": {"reputation": 11, "user_id": 9572337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250988a5bc7f71a09feb1e8f0f1d09ee?s=128&d=identicon&r=PG&f=1", "display_name": "farid", "link": "https://stackoverflow.com/users/9572337/farid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 893, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523614770, "creation_date": 1523482940, "last_edit_date": 1523614770, "question_id": 49784872, "link": "https://stackoverflow.com/questions/49784872/entry-wise-constraints-in-cvxpy", "title": "Entry-wise constraints in CVXPY", "body": "<p>I try to impose some elementwise constraints to the optimization variable using cvxpy. Here is the code:</p>\n\n<pre><code>import cvxpy as cv\nimport numpy as np\nimport scipy.io as spio\n\n\nmat = spio.loadmat('data.mat', squeeze_me=True)\n\nzigma_bar_region1_normal = mat['zigma_bar_region1_normal'] # array    \nJ1_multi=mat['Q1'] # array\nmultiplier1_multi=mat['multiplier1_multi'] # array\nJ1_bar_multi=mat['J1_bar_multi'] # array\nJ_multi_reg1_normal_part2=mat['J_multi_reg1_normal_part2'] # array\n\n\n# Construct the problem.\nJ_reg1_normal = cv.Variable(12,12)\nobjective = cv.Maximize( - 0.5*cv.trace(zigma_bar_region1_normal[0:12,0:12]*J_reg1_normal) + 0.5 * cv.log_det(J_reg1_normal) )\n\nconstraints = [0 &lt;= J_reg1_normal , J_reg1_normal[[0],[2,3,4,5,6,7,8,9,11]] == 0 , J_reg1_normal[[1],[3,5,6,7,8,9,10,11]] == 0 , J_reg1_normal[[2],[4,5,6,8,9,10,11]] == 0 , J_reg1_normal[[3],[5,6,7,8,9,10,11]] == 0 , J_reg1_normal[[4],[6,7,8,9,10,11]] == 0 , J_reg1_normal[[5],[6,7,8,9,10,11]] == 0 , J_reg1_normal[[6],[8,10]] == 0 , J_reg1_normal[[7],[9,10,11]] == 0 , J_reg1_normal[[8],[10,11]] == 0 , J_reg1_normal[[9],[11]] == 0 , J_reg1_normal[[10],[11]] == 0]\n\n# solution\nprob =cv.Problem(objective, constraints)\nresult = prob.solve()\nprint (J_reg1_normal.value)\n</code></pre>\n\n<p>Based on the elementwise constraints (all the constraints except for the first one) that I imposed, I expect to see the related elements of the optimization variable equal to zero but the reslut is:</p>\n\n<pre><code>J_reg1_normal.value=\n[[  5.00766997e-02  -5.37660541e-08  -7.46538281e-07  -8.10192632e-07\n   -7.64060978e-07   1.25086461e-06  -1.03525218e-06  -7.51147527e-07\n   -9.97192725e-07  -1.24346873e-06  -5.76822200e-07   1.21530067e-07]\n [ -7.45516570e-07   7.37738183e-02   1.72064920e-07   3.36427991e-07\n    2.49936553e-07   7.95798210e-07   8.55689658e-08   1.84734980e-07\n    5.75522200e-08   4.81760532e-07  -5.45853914e-07   4.76049220e-07]\n [ -1.09635151e-06   8.07142981e-08   8.19960687e-02   2.11452883e-07\n    3.22655657e-07   1.19484242e-07   5.36718902e-07   2.61031577e-07\n    4.87627330e-07   1.03295724e-06  -1.44733384e-07   1.01243499e-06]\n [ -1.35830309e-06   7.32755264e-08   6.94062445e-08   7.25212176e-02\n    1.91768276e-07   7.59513789e-07  -4.95620587e-08   1.12145754e-07\n   -7.68547755e-08   3.59067914e-07  -5.56034313e-07   4.15399606e-07]\n [ -1.39314051e-06  -6.79025204e-08   1.55459007e-07  -1.45776549e-07\n    6.81346578e-02   8.31850234e-07  -4.35358420e-07  -1.81866568e-07\n   -4.60469965e-07   7.40559772e-08  -6.77514459e-07   1.32725166e-07]\n [  2.05858432e-06  -9.48101424e-08  -1.14338605e-06  -4.12623122e-09\n    2.67424252e-07   3.76979109e-02   8.60749039e-07   6.57189508e-07\n    8.92744912e-07   1.62642738e-06   1.24010151e-06   1.99010028e-06]\n [ -2.36195268e-06  -3.28843200e-07   4.09843074e-07  -5.14056768e-07\n   -1.07897936e-06   6.30116484e-07   6.23269342e-02  -4.37659393e-07\n   -5.97223838e-07   1.64670805e-07  -7.71374907e-07   2.45341202e-07]\n [ -1.36533277e-06  -6.90559257e-08   1.70176795e-07  -1.65537164e-07\n   -5.72663106e-07   1.89104285e-07  -1.01273014e-06   6.77787610e-02\n   -4.70360657e-07   9.88740255e-08  -6.99962084e-07   1.71014478e-07]\n [ -2.27967232e-06  -2.62741831e-07   4.35173601e-07  -4.46220999e-07\n   -1.00605758e-06   7.53784772e-07  -1.54479230e-06  -1.01758995e-06\n    6.24639431e-02   2.38503887e-07  -7.65754957e-07   3.21363999e-07]\n [ -3.43939698e-06   3.53561379e-07   1.30204048e-06   1.49493315e-07\n   -3.71476002e-07   2.11241070e-06  -6.15268816e-07  -3.04934473e-07\n   -4.33420341e-07   5.78667319e-02  -2.64161958e-07   1.20573563e-06]\n [ -1.55413591e-06  -1.02842282e-06  -4.62530301e-07  -1.08225026e-06\n   -1.33228975e-06   2.83160202e-06  -1.62281474e-06  -1.30821976e-06\n   -1.53569613e-06  -7.74595167e-07   4.83412805e-02  -1.60988038e-07]\n [ -1.28773821e-06   1.16552805e-07   1.14797581e-06   7.58012666e-08\n   -4.47639123e-07   2.52974522e-06  -7.82197583e-07  -3.87727738e-07\n   -6.11770448e-07   1.16146295e-06  -1.15407365e-06   5.91020607e-02]]\n</code></pre>\n\n<p>Could you please help me undersand what is wrong with the code? How can I impose my set of elementwise equality constraints?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 0, "creation_date": 1523482892, "post_id": 49784828, "comment_id": 86585113, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/710551/import-module-or-from-module-import\">&#39;import module&#39; or &#39;from module import&#39;</a>"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1523484924, "post_id": 49784828, "comment_id": 86585763, "body": "You may want to square up your code and results."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1523489652, "post_id": 49784828, "comment_id": 86587109, "body": "Can you <i>also</i> test with Python&amp;nbsp;2?  I think the behavior <a href=\"https://stackoverflow.com/q/22397610/8586227\">is different there</a>, and we could cover both with one good answer."}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": false, "score": 1, "last_activity_date": 1523492225, "creation_date": 1523492225, "answer_id": 49786146, "question_id": 49784828, "link": "https://stackoverflow.com/questions/49784828/what-is-the-difference-between-import-pkg-a-as-a-and-from-pkg-import-a/49786146#49786146", "title": "What is the difference between &quot;import pkg.a as a&quot; and &quot;from pkg import a&quot;?", "body": "<p><code>import</code> does 3 things:</p>\n\n<ol>\n<li>Find and load modules (typically from disk) not already in <code>sys.modules</code>.</li>\n<li><em>After</em> each newly loaded module finishes execution, assign it as an attribute on its containing package (if any).</li>\n<li>Assign a variable in the scope of the <code>import</code> to allow access to the nominated module.</li>\n</ol>\n\n<p>There are many tricks:</p>\n\n<ol>\n<li><code>import a.b</code> assigns a variable <code>a</code>, so that you can write <code>a.b</code> like in the import.</li>\n<li><code>import a.b as c</code> assigns <code>c</code> to be the module<code>a.b</code>, not <code>a</code> as before.</li>\n<li><code>from a import b</code> can select a module or <em>any other attribute</em> of <code>a</code>.</li>\n<li>Step #1 of a circular import \u201csucceeds\u201d immediately because the relevant entries in <code>sys.modules</code> are created when the import <em>begins</em>.</li>\n</ol>\n\n<p>Points #2 and #4 explain the failure with a circular <code>import a.b as b</code>: the circular import goes straight to step #3, but then the import attempts to load the attribute from step #2 of the <em>outer</em> import which has yet to occur.</p>\n\n<p>The <code>from</code> ambiguity <a href=\"https://stackoverflow.com/q/6351805/8586227\">used to cause</a> the same trouble, but a <a href=\"https://bugs.python.org/issue17636\" rel=\"nofollow noreferrer\">special fallback</a> to look in <code>sys.modules</code> was added in 3.5 to support this case.  The same approach would probably work for <code>import a.b as b</code>, but that hasn\u2019t happened yet.</p>\n"}], "owner": {"reputation": 6051, "user_id": 109704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a2d9fe259b7217a9743f4a09abdc982b?s=128&d=identicon&r=PG", "display_name": "wei", "link": "https://stackoverflow.com/users/109704/wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1523650771, "creation_date": 1523482668, "last_edit_date": 1523650771, "question_id": 49784828, "link": "https://stackoverflow.com/questions/49784828/what-is-the-difference-between-import-pkg-a-as-a-and-from-pkg-import-a", "title": "What is the difference between &quot;import pkg.a as a&quot; and &quot;from pkg import a&quot;?", "body": "<p>I have two modules forming a circular import under a package</p>\n\n<pre><code>/test\n  __init__.py\n  a.py\n  b.py\n</code></pre>\n\n<p>a.py</p>\n\n<pre><code>import test.b\ndef a():\n  print(\"a\")\n</code></pre>\n\n<p>b.py</p>\n\n<pre><code>import test.a\ndef b():\n  print(\"b\")\n</code></pre>\n\n<p>But when I do \"import test.a\" from python interactive interpreter it throws AttributeError: module 'test' has no attribute 'a'</p>\n\n<pre><code>&gt;&gt;&gt; import test.a\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"test/a.py\", line 2, in &lt;module&gt;\n    import test.b as b\n  File \"test/b.py\", line 1, in &lt;module&gt;\n    import test.a as a\nAttributeError: module 'test' has no attribute 'a'\n</code></pre>\n\n<p>But when I change it to <code>from test import a</code> and <code>from test import b</code>, it works fine. </p>\n\n<p>So what is the difference?</p>\n\n<p>I am using python3.5</p>\n\n<hr>\n\n<p>Edit 1: </p>\n\n<p>As asked by @Davis Herring, python2 behaves differently. \nwhen using <code>import test.a as a</code> format there is no error thrown.</p>\n\n<pre><code>Python 2.7.12 (default, Dec  4 2017, 14:50:18)\n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import test.a\n</code></pre>\n\n<p>However, when using <code>from test import a</code> it throws error</p>\n\n<pre><code>Python 2.7.12 (default, Dec  4 2017, 14:50:18)\n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import test.a\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"test/a.py\", line 2, in &lt;module&gt;\n    from test import b\n  File \"test/b.py\", line 1, in &lt;module&gt;\n    from test import a\nImportError: cannot import name a\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7073, "user_id": 1708751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03d21276ae07910a1ab8f22f7bf282?s=128&d=identicon&r=PG", "display_name": "Sunny Patel", "link": "https://stackoverflow.com/users/1708751/sunny-patel"}, "edited": false, "score": 0, "creation_date": 1523482726, "post_id": 49784817, "comment_id": 86585040, "body": "If the order doesn&#39;t matter, you can make use of the <a href=\"https://docs.python.org/2/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>Counter</code></a> class and create <code>c = Counter(input_string)</code> and do your analysis on that object."}, {"owner": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "edited": false, "score": 2, "creation_date": 1523482772, "post_id": 49784817, "comment_id": 86585056, "body": "Try Codereview?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 7, "creation_date": 1523482782, "post_id": 49784817, "comment_id": 86585061, "body": "If you want people to make your working code cleaner, and you don&#39;t have a specific question, the <a href=\"https://codereview.stackexchange.com/\">code review</a> site is usually a better fit."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 7073, "user_id": 1708751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03d21276ae07910a1ab8f22f7bf282?s=128&d=identicon&r=PG", "display_name": "Sunny Patel", "link": "https://stackoverflow.com/users/1708751/sunny-patel"}, "edited": false, "score": 0, "creation_date": 1523482943, "post_id": 49784817, "comment_id": 86585138, "body": "@SunnyPatel <code>Counter</code> wouldn&#39;t work here because it seems like OP is counting consecutive occurrences."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1523483088, "post_id": 49784817, "comment_id": 86585192, "body": "Google &quot;python run length encoding&quot;, and in particular note the uses of itertools.groupby"}, {"owner": {"reputation": 7073, "user_id": 1708751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03d21276ae07910a1ab8f22f7bf282?s=128&d=identicon&r=PG", "display_name": "Sunny Patel", "link": "https://stackoverflow.com/users/1708751/sunny-patel"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1523483277, "post_id": 49784817, "comment_id": 86585262, "body": "@pault Ah right, I just noticed that. <a href=\"https://docs.python.org/2/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><code>itertools.groupby</code></a> is also noteworthy."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1523483538, "post_id": 49784817, "comment_id": 86585339, "body": "The aforementioned <code>itertools.groupby</code> solution would be: <code>&quot;&quot;.join([x + str(len(list(y))) for x, y in itertools.groupby(input_string)])</code>"}], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": true, "score": 5, "last_activity_date": 1523483696, "creation_date": 1523483696, "answer_id": 49784985, "question_id": 49784817, "link": "https://stackoverflow.com/questions/49784817/a-pythonic-implementation-of-string-contraction-which-lists-characters-as-they-a/49784985#49784985", "title": "a Pythonic implementation of string contraction which lists characters as they appear and their counts?", "body": "<p>The <a href=\"https://docs.python.org/3.6/library/itertools.html#itertools.groupby\" rel=\"noreferrer\"><code>itertools.groupby</code></a> function can do the \"hard part\" for you.  Here's an example (\"rle\" is short for \"run length encoding\"):</p>\n\n<pre><code>def rle(s):\n    from itertools import groupby\n    return \"\".join(letter + str(len(list(group)))\n                   for letter, group in groupby(s))\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>&gt;&gt;&gt; rle(\"aadddza\")\n'a2d3z1a1'\n</code></pre>\n\n<p>It may take a while staring at the docs to figure out how this works - <code>groupby()</code> is quite logical, but not simple.  In particular, the second element of each two-tuple it generates is not a list of matching elements from the original iterable, but is itself an iterable that <em>generates</em> a sequence of matching elements from the original iterable.  Your application only cares about the <em>number</em> of matching elements.  So the code uses <code>list(group)</code> to turn the iterable into a list, and then applies <code>len()</code> to that to get the number.</p>\n"}], "owner": {"reputation": 23, "user_id": 9632276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc622d207bd3707ddd1a2694a78e3395?s=128&d=identicon&r=PG&f=1", "display_name": "ArtfulRefraction", "link": "https://stackoverflow.com/users/9632276/artfulrefraction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 49784985, "answer_count": 1, "score": 2, "last_activity_date": 1523483696, "creation_date": 1523482618, "question_id": 49784817, "link": "https://stackoverflow.com/questions/49784817/a-pythonic-implementation-of-string-contraction-which-lists-characters-as-they-a", "title": "a Pythonic implementation of string contraction which lists characters as they appear and their counts?", "body": "<p>I implemented string contraction which lists the characters of a string with their respective counts. So, for example, the string \"aadddza\" becomes \"a2d3z1a1\". Can you offer suggestions on making what I have Pythonic?</p>\n\n<pre><code>def string_contraction(input_string):\n\n    if type(input_string) != str:\n        print(\"Not a string\")\n        return\n\n    input_string = str.lower(input_string)\n\n    prev = input_string[0]\n    s = \"\"\n    i = 0\n\n    for lett in input_string:\n        if lett == prev:\n            i += 1\n        else:\n            s += prev+str(i)\n            prev = lett\n            i = 1\n    s += lett+str(i)\n\n    return(s)\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 1033, "user_id": 982369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/l2P65.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/982369/sebastian"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1523537417, "post_id": 49784816, "comment_id": 86608404, "body": "@IljaEveril&#228; yeah that worked! for some reason if  I manually execute the last select, it returns the correct value, but when used as a filter is returning empty."}, {"owner": {"reputation": 1033, "user_id": 982369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/l2P65.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/982369/sebastian"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1523567095, "post_id": 49784816, "comment_id": 86626463, "body": "so i got it partially working, because is not filtering by the cls.id is getting every P for each A an thus getting the status string wrong."}, {"owner": {"reputation": 1033, "user_id": 982369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/l2P65.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/982369/sebastian"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1523650499, "post_id": 49784816, "comment_id": 86664847, "body": "@IljaEveril&#228; thanks for your help so far. I have updated the question to provide better info about the models and the problem. If i try with the correlate_except() I get an error"}], "answers": [{"comments": [{"owner": {"reputation": 1033, "user_id": 982369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/l2P65.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/982369/sebastian"}, "edited": false, "score": 0, "creation_date": 1523716354, "post_id": 49830986, "comment_id": 86680289, "body": "you are awesome! Yeah I realized yesterday about the non-aggregate bug. Thanks so much."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 2, "last_activity_date": 1523706665, "last_edit_date": 1523706665, "creation_date": 1523705698, "answer_id": 49830986, "question_id": 49784816, "link": "https://stackoverflow.com/questions/49784816/sqlalchemy-reference-a-subquery-from-a-case-expression/49830986#49830986", "title": "SQLAlchemy reference a subquery from a case expression", "body": "<p>It would seem that you're trying to correlate the expression to the outermost query, but as it turned out the current nested subquery approach is not feasible in MySQL, because it <a href=\"https://dev.mysql.com/doc/refman/8.0/en/subquery-restrictions.html\" rel=\"nofollow noreferrer\">does not allow correlated subqueries in FROM clause</a> at all \u2013 compared to some other databases that simply do not allow correlating with previous FROM list items, except if using LATERAL.</p>\n\n<p>On the other hand the nested subquery is redundant, since you can use aggregates in a CASE expression in the SELECT list, but in your current subquery you mix non-aggregate and aggregate expressions:</p>\n\n<pre><code>SELECT li.quantity_received, sum(li.quantity - li.received) as 'dif'\n</code></pre>\n\n<p>which is more than likely not what you wanted. Some other databases would not even allow such a query to execute, but MySQL silently picks a value for <code>li.quantity_received</code> from an unspecified row in the group, if <a href=\"https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_only_full_group_by\" rel=\"nofollow noreferrer\">ONLY_FULL_GROUP_BY</a> is disabled. It is by default enabled in 5.7.5 and onwards, and you should consider enabling it. Looking at your hybrid property's other half it looks like you probably meant to take the sum of received quantity as well.</p>\n\n<p>Below is a version of status expression that fulfills the 2 test cases you've presented in your question:</p>\n\n<pre><code> @status.expression\n def status(cls):\n     qty_received = func.coalesce(func.sum(LineItem.quantity_received), 0)\n     qty_ordered = func.coalesce(func.sum(LineItem.quantity), 0)\n\n     return select([case([\n             (qty_received == 0, \"unreceived\"),\n             (qty_received == qty_ordered, \"received\"),\n             (qty_received &lt; qty_ordered, \"partially_received\"),\n             (qty_received &gt; qty_ordered, \"over_received\")])]).\\\n         where(and_(func.coalesce(LineItem.fulfillment_status, \"\") != \"cancelled\",\n                    LineItem.o_id == cls.id)).\\\n         correlate_except(LineItem).\\\n         as_scalar()\n</code></pre>\n\n<p>I believe it's a closer representation of the Python side approach than your original. Note the use of COALESCE for NULL handling.</p>\n"}], "owner": {"reputation": 1033, "user_id": 982369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/l2P65.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/982369/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "accepted_answer_id": 49830986, "answer_count": 1, "score": 0, "last_activity_date": 1523706665, "creation_date": 1523482606, "last_edit_date": 1523650414, "question_id": 49784816, "link": "https://stackoverflow.com/questions/49784816/sqlalchemy-reference-a-subquery-from-a-case-expression", "title": "SQLAlchemy reference a subquery from a case expression", "body": "<p>I have a hybrid_property that returns a string based on some calculations made on a one-to-many relationship.</p>\n\n<p>The raw sql for the hybrid_property expression is:\nHere's the raw sql:</p>\n\n<pre><code>SELECT\n  CASE\n    WHEN s.quantity_received = 0 THEN \"unreceived\"\n    WHEN s.dif = 0.0  THEN \"received\"\n    WHEN s.dif &gt; 0.0  THEN \"partially_received\"\n    WHEN s.dif &lt; 0.0  THEN \"over_received\"\n  END as status\nFROM (\n      SELECT li.quantity_received, sum(li.quantity - li.received) as 'dif'\n      FROM line_items as li\n      WHERE li.o_id = xxx\n) as s\n</code></pre>\n\n<p>The Models</p>\n\n<pre><code>class LineItem(BaseModel):\n\n    __table__ = Table('line_items', autoload=True)\n\n   order = relationship(\"Order\", backreef=\"line_itms\", primaryjoin=\"Order.id == foregin(LineItem.o_id)\")\n\n\nclass Order(BaseModel):\n\n    __table__ = Table('orders', autoload=True)\n\n    @hybrid_property\n    def status(self):\n        qty_received, qty_ordered = 0, 0\n\n        for li in self.line_items:\n            if li.status != \"cancelled\":\n                qty_ordered += li.quantity\n                qty_received += li.quantity_received\n\n        if qty_received == 0:\n            status = \"unreceived\"\n\n        elif qty_received == qty_ordered:\n            status = \"received\"\n\n        elif qty_received &lt; qty_ordered:\n            status = \"partially_received\"\n\n        elif qty_received &gt; qty_ordered:\n            status = \"over_received\"\n\n        return status\n\n\n    @status.expression\n    def status(cls):\n        line_items_calc = select([LineItem.quantity_received,\n                    func.sum(LineItem.quantity - LineItem.quantity_received).label('dif')]) \\\n            .where(and_(LineItem.o_id == Order.id,\n                   or_(LineItem.fulfillment_status != \"cancelled\",\n                       LineItem.fulfillment_status == None))) \\\n            .alias()\n\n        qq = select([\n            case([\n                 (qs.c.quantity_received == 0, \"unreceived\"),\n                 (qs.c.dif == 0, \"received\"),\n                 (qs.c.dif &gt; 0, \"partially_received\"),\n                 (qs.c.dif &lt; 0, \"over_received\")]\n             )]) \\\n             .select_from(line_items_calc) \\\n             .as_scalar()\n\n        return qq\n</code></pre>\n\n<p>I have 2 orders, o1 and o2 with line items:</p>\n\n<pre><code>  LineItem(o_id=o1.id, quantity=1, quantity_received=1)\n  LineItem(o_id=o2.id, quantity=1, quantity_received=0)\n  LineItem(o_id=o2.id, quantity=2, quantity_received=1)\n</code></pre>\n\n<p>Order1 should have status \"received\" and Order2 should have \"partially_received\".</p>\n\n<p>But when I query for \"received\" I get nothing and when querying for \"partially_received\" I get 2 results instead of one. </p>\n\n<p>It looks like it is not filtering the LineItems by Order.id and so it uses all to calculate the status (since total_qty would be 4 and total received would be 2, which will give \"partially_received\")</p>\n\n<pre><code>Order.query().filter(Order.status == 'received').all()  # returns []\nOrder.query().filter(Order.status == 'partially_received').all()  # returns [Order1, Order2]\n</code></pre>\n\n<p>If add the <code>.correlate_except(LineItem)</code> to <strong>line_items_calc</strong> query, I get theh following error:</p>\n\n<blockquote>\n  <p>OperationalError: (_mysql_exceptions.OperationalError)  (1054,\n  \"Unknown column 'orders.id' in 'where clause'\")  [SQL: u'SELECT\n  count(*) AS count_1 \\nFROM (SELECT * \\nFROM orders \\nWHERE\n  orders.account_id = %s AND (SELECT CASE WHEN (a_3.quantity_received =\n  %s) THEN %s WHEN (a_3.dif = %s) THEN %s WHEN (a_3.dif > %s) THEN %s\n  WHEN (a_3.dif &lt; %s) THEN %s END AS a_2 \\nFROM (SELECT\n  line_items.quantity_received AS quantity_received,\n  sum(line_items.quantity - line_items.quantity_received) AS dif \\nFROM\n  line_items \\nWHERE line_items.o_id = orders.id AND\n  (line_items.fulfillment_status != %s OR line_items.fulfillment_status\n  IS NULL)) AS a_3) = %s) AS a_1'] [parameters: (1L, 0, 'unreceived', 0,\n  'received', 0, 'partially_received', 0, 'over_received', 'cancelled',\n  u'over_received')]</p>\n</blockquote>\n"}, {"tags": ["python", "regex", "django", "python-3.x"], "comments": [{"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523500197, "post_id": 49784795, "comment_id": 86589323, "body": "Try: <code>^\\&#47;users\\&#47;(\\w+)$</code>"}, {"owner": {"reputation": 2365, "user_id": 1171405, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f41c378969a3bb8ba1c128783ec9d4da?s=128&d=identicon&r=PG", "display_name": "dease", "link": "https://stackoverflow.com/users/1171405/dease"}, "reply_to_user": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523507754, "post_id": 49784795, "comment_id": 86591149, "body": "Where? There urls are dynamic - stored in the database, defined by user"}], "answers": [{"tags": [], "owner": {"reputation": 1670, "user_id": 1392229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/083edb871ee8732be160ca6930f8b7ef?s=128&d=identicon&r=PG", "display_name": "Dawid Gos\u0142awski", "link": "https://stackoverflow.com/users/1392229/dawid-gos%c5%82awski"}, "is_accepted": false, "score": 0, "last_activity_date": 1523535753, "creation_date": 1523535753, "answer_id": 49796443, "question_id": 49784795, "link": "https://stackoverflow.com/questions/49784795/check-if-string-matches-dynamic-regexp-and-find-variables/49796443#49796443", "title": "Check if string matches dynamic regexp and find variables", "body": "<p>If these endpoints are registered in Django routes, maybe just use <a href=\"https://docs.djangoproject.com/en/2.0/ref/urlresolvers/#resolve\" rel=\"nofollow noreferrer\">resolver</a> ?</p>\n\n<pre><code>from django.urls import resolve\n\nmatch = resolve(my_url)\nprint(match.args)\nprint(match.kwargs)\n</code></pre>\n"}], "owner": {"reputation": 2365, "user_id": 1171405, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f41c378969a3bb8ba1c128783ec9d4da?s=128&d=identicon&r=PG", "display_name": "dease", "link": "https://stackoverflow.com/users/1171405/dease"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523535753, "creation_date": 1523482526, "question_id": 49784795, "link": "https://stackoverflow.com/questions/49784795/check-if-string-matches-dynamic-regexp-and-find-variables", "title": "Check if string matches dynamic regexp and find variables", "body": "<p>In django web app, user may define urls with dynamic parameters, for example:</p>\n\n<blockquote>\n  <p>/users/:id</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>/posts/:postid/:commentid</p>\n</blockquote>\n\n<p>now, I have given strings, for example:\n<code>/users/mysername</code> &lt;- it matches <code>/users/:id</code> - how can I exstract \"myusername\" from it?\n/users/mysuername/something &lt;- doesn't match\n/posts/10/382 - match, extract two variables - postid and commentid</p>\n\n<p>my models.py:</p>\n\n<pre><code>class Server(BaseModel):\n    url = models.CharField(verbose_name=_('URL'), max_length=64)\n</code></pre>\n\n<p>in my view, I want to compare request's PATH_INFO:</p>\n\n<pre><code>endpoint_url = request.META.get('PATH_INFO').lower().strip().lstrip('/')\n</code></pre>\n\n<p>lets say I have a Server model instance with url: /users/:someid\nnow, when request path is: /users/somestring0\nI want to match it and extract variable someid to be \"somestring0\".</p>\n\n<p>Parmeters may contain anything - except slash (/) probably.</p>\n\n<p>How can I achieve something like that?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1523482632, "post_id": 49784792, "comment_id": 86584998, "body": "Your python code is not properly indented."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1523482811, "post_id": 49784792, "comment_id": 86585076, "body": "Hi @Hack_Hut! I&#39;ve indented your code in the way I think it was intended. In the future, please take the time to present your code nicely; it makes it easier to read and to run."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1523482966, "post_id": 49784792, "comment_id": 86585151, "body": "I moved your <code>i = 1</code> into the outer loop and got results that look essentially the same as the C output."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5457058, "user_type": "registered", "profile_image": "https://graph.facebook.com/478472475646746/picture?type=large", "display_name": "Hack_Hut", "link": "https://stackoverflow.com/users/5457058/hack-hut"}, "edited": false, "score": 0, "creation_date": 1523483165, "post_id": 49784877, "comment_id": 86585218, "body": "Absolute live saver, been scratching my head for over 2 hours on this simple bug. Cheers :)"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1523483258, "last_edit_date": 1523483258, "creation_date": 1523482997, "answer_id": 49784877, "question_id": 49784792, "link": "https://stackoverflow.com/questions/49784792/trying-to-replicate-small-c-code-in-python/49784877#49784877", "title": "Trying to replicate small C code in Python", "body": "<p>You aren't reinitializing <code>i</code> to zero before the <code>while i &lt;= k</code> loop.</p>\n\n<p>A more idiomatic (and much shorter!) way of writing this in Python would be to use a <a href=\"https://www.python.org/dev/peps/pep-0289/\" rel=\"nofollow noreferrer\">generator expression</a> with the <code>sum()</code> function to perform the summation, as well as using the <code>math.factorial()</code> function instead of calculating the factorial in a loop. Using this approach, the code becomes a pretty direct translation of the original mathematical formula:</p>\n\n<pre><code>def BitcoinAttackerSuccessProbablity(q, z):\n    # probablity of honest finding the next node is 1 - probablity the attacker\n    # will find the next\n    p = 1 - q\n    # lambda is equal to the number of blocks times by the division of attacker\n    # and honest finding the next block\n    lam = z * (q / p)\n\n    return 1 - sum(\n            (lam ** k) * math.exp(-lam) / math.factorial(k)\n            * (1 - (q / p) ** (z - k))\n            for k in range(0, z+1)\n            )\n</code></pre>\n\n<p>Note that the range is set as <code>range(0, z+1)</code> instead of <code>range(0, z)</code>, because Python ranges do not include the stop value.</p>\n"}], "owner": {"reputation": 89, "user_id": 5457058, "user_type": "registered", "profile_image": "https://graph.facebook.com/478472475646746/picture?type=large", "display_name": "Hack_Hut", "link": "https://stackoverflow.com/users/5457058/hack-hut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 49784877, "answer_count": 1, "score": 0, "last_activity_date": 1523483258, "creation_date": 1523482521, "last_edit_date": 1523483047, "question_id": 49784792, "link": "https://stackoverflow.com/questions/49784792/trying-to-replicate-small-c-code-in-python", "title": "Trying to replicate small C code in Python", "body": "<p>I'm trying to replicate some C code in python.</p>\n\n<p>Here is the C code. </p>\n\n<pre><code>#include &lt;math.h&gt;\ndouble AttackerSuccessProbability(double q, int z)\n{\n double p = 1.0 - q;\n double lambda = z * (q / p);\n double sum = 1.0;\n int i, k;\n for (k = 0; k &lt;= z; k++)\n {\n  double poisson = exp(-lambda);\n  for (i = 1; i &lt;= k; i++)\n    poisson *= lambda / i;\n    sum -= poisson * (1 - pow(q / p, z - k));\n }\n return sum;\n}\n</code></pre>\n\n<p>The C code is just modelling this equation, taken from <a href=\"https://bitcoin.org/bitcoin.pdf\" rel=\"nofollow noreferrer\">Bitcoin's whitepaper</a>\n<a href=\"https://i.stack.imgur.com/qWM8K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qWM8K.png\" alt=\"Poission probablity\"></a></p>\n\n<p>Here is my attempt in python. </p>\n\n<pre><code>def BitcoinAttackerSuccessProbablity(q, z):\n    # probablity of honest finding the next node is 1 - probablity the attacker will find the next\n    p = 1 - q\n    # lambda is equal to the number of blocks times by the division of attacker and honest finding the next block\n    lam = z * (q / p)\n    sum = 1.0\n    i = 1\n    k = 0\n\n    while k &lt;= z:\n        poisson = math.exp(-1 * lam)\n        while i &lt;= k:\n            poisson = poisson * (lam / i)\n            i = i + 1\n        sum = sum - (poisson * (1 - ((q / p) ** (z - k))))\n        k = k + 1\n\n    print(sum)\n\n\nfor x in range(0,11):\n    BitcoinAttackerSuccessProbablity(0.1, x)\n</code></pre>\n\n<p>The results from the C code are. (q and z are inputs while P is an output.) </p>\n\n<pre><code>q=0.1    \n\nz=0 P=1.0000000\nz=1 P=0.2045873\nz=2 P=0.0509779\nz=3 P=0.0131722\nz=4 P=0.0034552\nz=5 P=0.0009137\nz=6 P=0.0002428\nz=7 P=0.0000647\nz=8 P=0.0000173\nz=9 P=0.0000046\nz=10 P=0.0000012\n</code></pre>\n\n<p>I am trying to replicate these results accurately in python by converting the C code. My first 3 results (z=0,-3) are correct, however, the remaining results are incorrect. When I changed my while loop to the equivalent in C only the first two results where correct.  </p>\n\n<p>The results from my Python code</p>\n\n<pre><code>1.0\n0.20458727394278242\n0.05097789283933862\n-0.057596282822218514\n-0.1508215598462347\n-0.22737700216279746\n-0.28610012088884856\n-0.3272432217416562\n-0.3519591169464781\n-0.36186779773540745\n-0.35878211836275675\n</code></pre>\n\n<p>I think it's something simple on how loops are handled between languages. </p>\n\n<p>Any help would be much appreciated </p>\n\n<p>edit:</p>\n\n<p>Here is the first attempt </p>\n\n<pre><code>def BitcoinAttackerSuccessProbablity(q, z):\n# probablity of honest finding the next node is 1 - probablity the attacker will find the next\np = 1 - q\n#lambda is equal to the number of blocks times by the division of attacker and honest finding the next block\nlam = z * (q/p)\nsum = 1.0\n\n\nfor k in range(0, z):\n    poisson = math.exp(-1*lam)\n    for i in range(1, k):\n        poisson = poisson * (lam/i)\n    sum = sum - (poisson * (1 - ((q/p)**(z-k))))\n\nprint(sum)\n</code></pre>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 1, "last_activity_date": 1523482988, "creation_date": 1523482988, "answer_id": 49784875, "question_id": 49784784, "link": "https://stackoverflow.com/questions/49784784/ways-to-convert-cartesian-indexing-to-matrix-indexing-as-in-numpy-meshgrid/49784875#49784875", "title": "Ways to convert cartesian indexing to matrix indexing as in numpy.meshgrid", "body": "<p><code>indexing</code> only affects the order of the first two axes. <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.swapaxes.html\" rel=\"nofollow noreferrer\"><code>swapaxes(0, 1)</code></a> can be used to reverse the order:</p>\n\n<pre><code>In [106]: I,J,K,L = np.meshgrid([1,2,3],['A','B'],[10,20,30,40],['X','Y','Z'], indexing='ij')\n\nIn [107]: X,Y,Z,W = np.meshgrid([1,2,3],['A','B'],[10,20,30,40],['X','Y','Z'], indexing='xy')\n\nIn [108]: (I.swapaxes(0,1) == X).all()\nOut[108]: True\n\nIn [109]: (J.swapaxes(0,1) == Y).all()\nOut[109]: True\n\nIn [110]: (K.swapaxes(0,1) == Z).all()\nOut[110]: True\n\nIn [111]: (L.swapaxes(0,1) == W).all()\nOut[111]: True\n</code></pre>\n\n<p><code>swapaxes(0, 1)</code> converts <code>xy</code> to <code>ij</code> indexing too (of course):</p>\n\n<pre><code>In [112]: (X.swapaxes(0,1) == I).all()\nOut[112]: True\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 49784875, "answer_count": 1, "score": 0, "last_activity_date": 1523482988, "creation_date": 1523482455, "question_id": 49784784, "link": "https://stackoverflow.com/questions/49784784/ways-to-convert-cartesian-indexing-to-matrix-indexing-as-in-numpy-meshgrid", "title": "Ways to convert cartesian indexing to matrix indexing as in numpy.meshgrid", "body": "<p>I'm building some software that involves a meshgrid created using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html\" rel=\"nofollow noreferrer\"><code>np.meshgrid</code></a> and the matrix indexing (that is, setting <code>indexing = `ij`</code>). However, the function that I'm working on could potentially take meshgrids created using the cartesian indexing (that is, setting <code>indexing = `xy`</code>). Is there a quick way to go from <code>indexing = `xy`</code> to <code>indexing = `ij`</code>). When it's just 2 dimensional, I can simply transpose. However, when I go up to 3D, 4D, etc., transposition wouldn't do the job. </p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 5844782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5c65f9627194d0a73852eaf7a90057?s=128&d=identicon&r=PG&f=1", "display_name": "Jiroscopes", "link": "https://stackoverflow.com/users/5844782/jiroscopes"}, "edited": false, "score": 0, "creation_date": 1523483797, "post_id": 49784903, "comment_id": 86585434, "body": "Yes, perfect! Thank you, I&#39;ve been staring at this for hours!"}], "tags": [], "owner": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "is_accepted": true, "score": 3, "last_activity_date": 1523483154, "creation_date": 1523483154, "answer_id": 49784903, "question_id": 49784763, "link": "https://stackoverflow.com/questions/49784763/django-view-not-saving-to-model/49784903#49784903", "title": "Django view not saving to model", "body": "<p>In your view you write <code>request.user.address = ...</code>, so you add the attribute <code>address</code> to a <code>User</code> object. As far as I read your code, this is not what you want. You would like to put <code>str(address)</code> into the field <code>address</code> of the object <code>UserAddress</code> related to the <code>User</code> object from <code>request.user</code>, right?!</p>\n\n<p>So, here are the suggested edits to do so:</p>\n\n<p><em>models.py</em></p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\n\nclass UserAddress(models.Model):\n    # next line changed\n    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='user_address')\n    address = models.CharField(max_length=300, default=' ')\n</code></pre>\n\n<p><em>views.py</em></p>\n\n<pre><code>from django.shortcuts import render\nfrom django.http import HttpResponse\nfrom django.contrib.auth.decorators import login_required\nfrom ico_login.models import UserAddress \nfrom coinbase.wallet.client import Client\n\n\n@login_required()\ndef generate_address_btc(request, *args, **kwargs):\n    client = Client('api', 'key')\n    r = client.get_addresses('account_id')\n    address = r['data'][0]['address']\n    # next 2 lines changed\n    request.user.user_address.address = str(address)\n    request.user.user_address.save()\n\nreturn HttpResponse(address)\n</code></pre>\n\n<p><em>Hope that helped and happy coding!</em></p>\n"}], "owner": {"reputation": 486, "user_id": 5844782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5c65f9627194d0a73852eaf7a90057?s=128&d=identicon&r=PG&f=1", "display_name": "Jiroscopes", "link": "https://stackoverflow.com/users/5844782/jiroscopes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 49784903, "answer_count": 1, "score": 2, "last_activity_date": 1523483154, "creation_date": 1523482307, "question_id": 49784763, "link": "https://stackoverflow.com/questions/49784763/django-view-not-saving-to-model", "title": "Django view not saving to model", "body": "<p>I have a view I am calling when a user clicks a button on the site, it pulls JSON data(from the Coinbase API) and converts it to a string and should <strong>save the string pulled to the current user's account</strong>.</p>\n\n<p>Whenever they click the button it will pull the string, but nothing is saved to the account, which is the issue.</p>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.http import HttpResponse\nfrom django.contrib.auth.decorators import login_required\nfrom ico_login.models import UserAddress \nfrom coinbase.wallet.client import Client\n\n\n@login_required()\ndef generate_address_btc(request, *args, **kwargs):\n    client = Client('api', 'key')\n    r = client.get_addresses('account_id')\n    address = r['data'][0]['address']\n    request.user.address = str(address)\n    request.user.save()\n\n    return HttpResponse(address)\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\n\nclass UserAddress(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    address = models.CharField(max_length=300, default=' ')\n</code></pre>\n\n<p>urls.py </p>\n\n<pre><code>from django.contrib import admin\nfrom django.urls import path, include\nfrom ico_details import views\n\n\nurlpatterns = [\n    path('create_address/', views.generate_address_btc, name='generate')\n]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-3.6"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 4, "creation_date": 1523482337, "post_id": 49784739, "comment_id": 86584890, "body": "Please post the complete error message including traceback."}, {"owner": {"reputation": 9, "user_id": 9632905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjoVA.jpg?s=128&g=1", "display_name": "Artemiz", "link": "https://stackoverflow.com/users/9632905/artemiz"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1523482422, "post_id": 49784739, "comment_id": 86584913, "body": "I&#39;m sorry but the issue is that: there isn&#39;t any error or traceback."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1523482657, "post_id": 49784739, "comment_id": 86585006, "body": "Do you have logging that shows which paths through <code>prepare_folder</code> are actually taken? Do you have any <code>..</code> elements on the path?"}, {"owner": {"reputation": 9, "user_id": 9632905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjoVA.jpg?s=128&g=1", "display_name": "Artemiz", "link": "https://stackoverflow.com/users/9632905/artemiz"}, "edited": false, "score": 0, "creation_date": 1523483022, "post_id": 49784739, "comment_id": 86585171, "body": "Sure, I added it into the post"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1523483094, "post_id": 49784739, "comment_id": 86585194, "body": "Can you include a minimal example of the class with just the methods/statements needed to reproduce the problem and the values you are passing for the folder_paths?  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1523483214, "post_id": 49784739, "comment_id": 86585234, "body": "Your output doesn&#39;t match the code that supposedly produced it; the print calls in the code you&#39;ve shown us don&#39;t print in that format. Voting to close for no MCVE."}, {"owner": {"reputation": 9, "user_id": 9632905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjoVA.jpg?s=128&g=1", "display_name": "Artemiz", "link": "https://stackoverflow.com/users/9632905/artemiz"}, "edited": false, "score": 0, "creation_date": 1523483388, "post_id": 49784739, "comment_id": 86585304, "body": "I am updating the post as accurately as possible according to the details requested"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1523499851, "post_id": 49784739, "comment_id": 86589244, "body": "You need to carefully compare the working example you posted here and your <i>production</i> code to see what the differences are and start testing to see if those differences are the problem."}, {"owner": {"reputation": 9, "user_id": 9632905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjoVA.jpg?s=128&g=1", "display_name": "Artemiz", "link": "https://stackoverflow.com/users/9632905/artemiz"}, "edited": false, "score": 0, "creation_date": 1523516500, "post_id": 49784739, "comment_id": 86594863, "body": "Thank you wwii for your answer, I&#39;ve read again and again all my production code as you advised, exposing the issue helped me to fix it."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 9632905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjoVA.jpg?s=128&g=1", "display_name": "Artemiz", "link": "https://stackoverflow.com/users/9632905/artemiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1523517891, "last_edit_date": 1523517891, "creation_date": 1523516184, "answer_id": 49789934, "question_id": 49784739, "link": "https://stackoverflow.com/questions/49784739/python-3-6-5-os-makedirs-os-mkdir-doesnt-create-directory-without-any-error/49789934#49789934", "title": "Python 3.6.5 - os.makedirs / os.mkdir doesn&#39;t create directory without any error", "body": "<p><strong>Problem solved after compare Class sample and Production Class</strong>\n(as suggested by wwii)\nIn my class Preprocessor, it was the <code>__del__</code> function which remove the \"previews_folder\" before exit, obviously.</p>\n\n<p>Thank you all for your help</p>\n"}], "owner": {"reputation": 9, "user_id": 9632905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjoVA.jpg?s=128&g=1", "display_name": "Artemiz", "link": "https://stackoverflow.com/users/9632905/artemiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 867, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1523517891, "creation_date": 1523482188, "last_edit_date": 1523486829, "question_id": 49784739, "link": "https://stackoverflow.com/questions/49784739/python-3-6-5-os-makedirs-os-mkdir-doesnt-create-directory-without-any-error", "title": "Python 3.6.5 - os.makedirs / os.mkdir doesn&#39;t create directory without any error", "body": "<p>I need any help for a weird problem with my Python 3.6.5 code.\n<em>The error is only produced during my project execution, I haven't succeeded to recreate it during another script execution...</em>\nI would like to create some folders during <code>__init__</code> function into some class, with os.makedirs :</p>\n\n<pre><code>self.working_folder = Preprocessor.prepare_folder(working_folder)  # create final working folder\nself.previews_folder = Preprocessor.prepare_folder(previews_folder)  # create previews folder\n</code></pre>\n\n<p>Here the \"working_folder\" is created instead \"previews_folder\" isn't, <strong>without any error.</strong>\nIf I try this code : </p>\n\n<pre><code>self.working_folder = Preprocessor.prepare_folder(working_folder)  # create final working folder\nPreprocessor.prepare_folder(previews_folder)  # create previews folder\n</code></pre>\n\n<p>Both folders are created correctly.</p>\n\n<p>Details about \"Preprocessor.prepare_folder\" :</p>\n\n<pre><code>    def prepare_folder(folder_path):\n    print(\"Path to create: \", folder_path)\n    while True:\n        try:\n            os.makedirs(folder_path)\n            print(\"Folder created as: \", folder_path)\n            return folder_path\n        except FileExistsError:\n            if folder_path[-1] in (\"/\", \"\\\\\"):\n                folder_path = folder_path[:len(folder_path) - 1]\n            if folder_path[-1].isdigit():\n                temp = folder_path[-1]\n                for i in range(len(folder_path) - 2, -1, -1):\n                    try:\n                        if folder_path[i].isdigit():\n                            temp = folder_path[i] + temp\n                        else:\n                            folder_path = folder_path[:i + 1]\n                            break\n                    except IndexError:\n                        raise EnvironmentError\n                folder_path = folder_path + str(int(temp) + 1)\n            else:\n                folder_path += '1'\n</code></pre>\n\n<p>Operating System : Windows 10 x64 Family</p>\n\n<p><strong>Tracebacks:</strong></p>\n\n<pre><code>Path to create:  C:\\Users\\MPuis\\Downloads\\Tests\\classifier_temp\nFolder created as:  C:\\Users\\MPuis\\Downloads\\Tests\\classifier_temp\nPath to create:  C:\\Users\\MPuis\\Downloads\\Tests\\previews_temp\nFolder created as:  C:\\Users\\MPuis\\Downloads\\Tests\\previews_temp\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>DOS terminal with \"dir\" command:</p>\n\n<pre><code>R\u00e9pertoire de C:\\Users\\MPuis\\Downloads\\Tests\n\n11/04/2018  23:42    &lt;DIR&gt;          .\n11/04/2018  23:42    &lt;DIR&gt;          ..\n11/04/2018  23:42    &lt;DIR&gt;          classifier_temp\n10/04/2018  12:18    &lt;DIR&gt;          Models\n10/04/2018  13:12    &lt;DIR&gt;          To_sort\n               0 fichier(s)                0 octets\n               5 R\u00e9p(s)  113\u00a0340\u00a0448\u00a0768 octets libres\n</code></pre>\n\n<p><strong>Minimal class sample (creates correctly both folders, unsucceeded to recreate issue, however those are the same class, values and concerned functions than the other which doesn't work)</strong></p>\n\n<pre><code>\"\"\" A script sample of error \"\"\"\n\nif __name__ == '__main__':\n    import os\n\n    output_folder = os.path.abspath(\"C:/Users/MPuis/Downloads/Tests/Models\")\n\n\n    class Preprocessor:\n        # ---- Settings ----\n        default_wfolder = 'classifier_temp'\n        default_previews = 'previews_temp'\n\n        def __init__(self, target_folder, working_folder=default_wfolder, previews_folder=default_previews):\n            if working_folder == Preprocessor.default_wfolder:\n                working_folder = os.path.join(os.path.dirname(os.path.abspath(target_folder)), working_folder)\n            if previews_folder == Preprocessor.default_previews:\n                previews_folder = os.path.join(os.path.dirname(os.path.abspath(target_folder)), previews_folder)\n            self.target_folder = target_folder\n            self.working_folder = Preprocessor.prepare_folder(working_folder)  # create final working folder\n\n            # Error with this statement\n            self.previews_folder = Preprocessor.prepare_folder(previews_folder)  # create previews folder\n\n        @staticmethod\n        def prepare_folder(folder_path):\n            print(\"Path to create: \", folder_path)\n            while True:\n                try:\n                    os.makedirs(folder_path)\n                    print(\"Folder created as: \", folder_path)\n                    return folder_path\n                except FileExistsError:\n                    print(\"File exists\")\n                    return None\n\n\n    test = Preprocessor(target_folder=output_folder)\n    print(\"Script done\")\n</code></pre>\n\n<p>Have you any suggestions about that weird issue ?\nThank you for any help !</p>\n\n<p><strong>EDIT</strong>\nAfter some tests I tried this code:</p>\n\n<pre><code>self.working_folder = Preprocessor.prepare_folder(working_folder)  # create final working folder\nself.previews_folder = Preprocessor.prepare_folder(previews_folder)  # create previews folder\nos.makedirs(self.previews_folder)\n</code></pre>\n\n<p>and then I caught an error: \"FileExistsError: [WinError 183]\", however a \"dir\" command into DOS terminal wrote same result than precedent tests...</p>\n"}, {"tags": ["python", "json", "file"], "comments": [{"owner": {"reputation": 2597, "user_id": 7933618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/haux5.jpg?s=128&g=1", "display_name": "masterfloda", "link": "https://stackoverflow.com/users/7933618/masterfloda"}, "edited": false, "score": 1, "creation_date": 1523481941, "post_id": 49784658, "comment_id": 86584744, "body": "Can you provide the file? No, just kidding. Can you provide a small sample? If the file has more than one line, you could read it line-by-line."}, {"owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "edited": false, "score": 0, "creation_date": 1523482237, "post_id": 49784658, "comment_id": 86584852, "body": "You can easily implement your own parser that consumes the file on demand (consuming one token at time). The JSON grammar is pretty simple and won&#39;t give you any problems."}, {"owner": {"reputation": 130, "user_id": 5348912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4ad30843b475f8ea673da962d3dc63?s=128&d=identicon&r=PG&f=1", "display_name": "0xfede7c8", "link": "https://stackoverflow.com/users/5348912/0xfede7c8"}, "edited": false, "score": 0, "creation_date": 1523482821, "post_id": 49784658, "comment_id": 86585079, "body": "From the duplicate tags I found ijson and json-streamer that supposedly are libraries that do what I need. Thanks for the suggestions!! but I do not want to re-invent the wheel hehe."}], "owner": {"reputation": 130, "user_id": 5348912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4ad30843b475f8ea673da962d3dc63?s=128&d=identicon&r=PG&f=1", "display_name": "0xfede7c8", "link": "https://stackoverflow.com/users/5348912/0xfede7c8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 1, "closed_date": 1523481931, "answer_count": 0, "score": 0, "last_activity_date": 1523481686, "creation_date": 1523481686, "question_id": 49784658, "link": "https://stackoverflow.com/questions/49784658/how-to-parse-an-immense-json-file-with-python", "closed_reason": "Duplicate", "title": "How to parse an immense JSON file with Python?", "body": "<p>I'm trying to parse a <a href=\"https://www.youtube.com/watch?v=EEA33bAXyNM\" rel=\"nofollow noreferrer\">huge</a> JSON file (14GB approx.) on Python to do some data mining research I'm working on.</p>\n\n<p>The problem is that when I use the built-in JSON module, it tries to load the full file on memory, until it runs out of it.</p>\n\n<p>Of course, I could find a machine that can stand this file on RAM, in fact I have, but this is not a nice way of doing it.</p>\n\n<p>What I have tried:</p>\n\n<pre><code>import json\n\nwith open('myfile.json', 'r'):\n    loaded_json = json.load(file)\n    # ...do stuff\n</code></pre>\n\n<p>What I would like is a way of using this file with the regular JSON interface of lists and dicts, but this way should processes the file directly from disk or by chunks on memory.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 6, "creation_date": 1523481598, "post_id": 49784629, "comment_id": 86584620, "body": "You&#39;re iterating over the <i>same iterator</i>, which can only be consumed once; use <code>for i in test(): for j in test(): print(i, j)</code> instead. If you really need to share a single iterator, look into e.g. <a href=\"https://docs.python.org/3/library/itertools.html#itertools.tee\" rel=\"nofollow noreferrer\"><code>itertools.tee</code></a>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1523482157, "post_id": 49784629, "comment_id": 86584821, "body": "If you use something like <code>test = [1,2,3]</code> for your loops, it works because a list is not an <i>iterator</i>, but it is an <i>iterable</i>. In that case, each <code>for</code> loop implicitly calls <code>iter</code> to get a distinct iterator for the list. Your <code>test</code> class <i>is</i> an iterator, since it defines <code>__next__</code>, so each loop uses the same iterator."}], "answers": [{"tags": [], "owner": {"reputation": 7073, "user_id": 1708751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03d21276ae07910a1ab8f22f7bf282?s=128&d=identicon&r=PG", "display_name": "Sunny Patel", "link": "https://stackoverflow.com/users/1708751/sunny-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1523482332, "creation_date": 1523482332, "answer_id": 49784767, "question_id": 49784629, "link": "https://stackoverflow.com/questions/49784629/iterate-twice-through-an-object/49784767#49784767", "title": "Iterate twice through an object", "body": "<p>Take a look at <a href=\"https://docs.python.org/3/library/itertools.html#itertools.product\" rel=\"nofollow noreferrer\"><code>itertools.product</code></a>.</p>\n\n<p>You should be able to accomplish what you're looking for:</p>\n\n<pre><code>from itertools import product\n...\ntest = test()\nfor i, j in product(test, repeat=2):\n    print(i,j)\n</code></pre>\n\n<p>I love this library!</p>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 3, "last_activity_date": 1523484528, "last_edit_date": 1523484528, "creation_date": 1523483632, "answer_id": 49784977, "question_id": 49784629, "link": "https://stackoverflow.com/questions/49784629/iterate-twice-through-an-object/49784977#49784977", "title": "Iterate twice through an object", "body": "<p>You want an instance of <code>test</code> to be <em>iterable</em>, but not its own <em>iterator</em>. What's the difference?</p>\n\n<p>An iterable is something that, upon request, can supply an iterator. Lists are iterable, because <code>iter([1,2,3])</code> returns a new <code>listiterator</code> object (<em>not</em> the list itself). To make <code>test</code> iterable, you just need to supply an <code>__iter__</code> method (more on how to define it in a bit).</p>\n\n<p>An iterator is something that, upon request, can produce a new element. It does this by calling its <code>__next__</code> method. An iterator can be thought of as two pieces of information: a sequence of items to produce, and a cursor indicating how far along that sequence it currently is. When it reaches the end of its sequence, it raises a <code>StopIteration</code> exception to indicate that the iteration is at an end. To make an instance an iterator, you supply a <code>__next__</code> method in its class. An iterator should also have a <code>__iter__</code> method that just returns itself.</p>\n\n<p>So how do you make <code>test</code> iterable without being an iterator? By having its <code>__iter__</code> method return a new iterator each time it is called, and getting rid of its <code>__next__</code> method. The simplest way to do that is to make <code>__iter__</code> a generator function. Define your class something like:</p>\n\n<pre><code>class Test():\n\n    def __init__(self):\n        self._size = 5\n\n    def __iter__(self):\n        n = 0\n        while n &lt; self._size:\n            yield n\n            n += 1\n\n    def __len__(self):\n        return self._size\n</code></pre>\n\n<p>Now when you write</p>\n\n<pre><code>test = Test()\nfor i in test:    # implicit call to iter(test)\n    for j in test:  # implicit call to iter(test)\n        print(i, j)\n</code></pre>\n\n<p><code>i</code> and <code>j</code> both draw values from <em>separate</em> iterators over the same iterable. Each call to <code>test.__iter__</code> returns a different generator object that keeps track of its own <code>n</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 9632637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_NktcTuGbWE/AAAAAAAAAAI/AAAAAAAAAAA/PnfuorT0TxU/photo.jpg?sz=128", "display_name": "Diego Aguayo", "link": "https://stackoverflow.com/users/9632637/diego-aguayo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 49784977, "answer_count": 2, "score": 2, "last_activity_date": 1523484528, "creation_date": 1523481525, "last_edit_date": 1523483603, "question_id": 49784629, "link": "https://stackoverflow.com/questions/49784629/iterate-twice-through-an-object", "title": "Iterate twice through an object", "body": "<p>I'm trying to create an iterable object, and when I do 1 loop it is okay, but when doing multiple loops, it doesn't work. Here is my simplified code:</p>\n\n<pre><code>class test():\n\n    def __init__(self):\n        self.n = 0\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        if self.n &lt; len(self)-1:\n            self.n += 1\n            return self.n\n        else:\n            raise StopIteration\n\n    def __len__(self):\n        return 5\n\n#this is an example iteration\ntest = test()\nfor i in test:\n    for j in test:\n        print(i,j)\n\n#it prints is \n1 2\n1 3\n1 4\n\n#What i expect is\n1 1 \n1 2\n1 3\n1 4\n2 1\n2 2\n2 3\n...\n4 3\n4 4\n</code></pre>\n\n<p>How can I make this object (in this case <code>test</code>) to iterate twice and get all the combinations of number <code>i</code> and <code>j</code> in the example loop?</p>\n"}, {"tags": ["python", "matplotlib", "plot", "jupyter-notebook", "transparency"], "answers": [{"tags": [], "owner": {"reputation": 11082, "user_id": 3585557, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kHN76.jpg?s=128&g=1", "display_name": "Steven C. Howell", "link": "https://stackoverflow.com/users/3585557/steven-c-howell"}, "is_accepted": true, "score": 0, "last_activity_date": 1523481425, "creation_date": 1523481425, "answer_id": 49784615, "question_id": 49784614, "link": "https://stackoverflow.com/questions/49784614/how-do-you-save-matplotlib-figure-with-an-opaque-white-border/49784615#49784615", "title": "How do you save Matplotlib figure with an opaque white border?", "body": "<p><a href=\"https://stackoverflow.com/a/4708018/3585557\">This post</a> mentions setting <code>fig.patch.set_alpha(1)</code> which turns out to work, regardless of the <code>savefig</code> parameters.  Adding this command to the example code resolves the problem.</p>\n\n<pre><code>%matplotlib notebook\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nfig, ax = plt.subplots()\n\nfig.patch.set_alpha(1)  # solution\n\nx = np.linspace(-6, 6, 100)\nax.plot(x, np.sinc(x))\nfig.savefig('solved.png')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/SmUE7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SmUE7.png\" alt=\"enter image description here\"></a></p>\n\n<p>It turns out this is specific to Jupyter notebooks, and is probably a bug (I only have version 4.4.0).  When I run the following code above from the command line, I instead get the desired behavior (change <code>'red'</code> to <code>'white'</code> to get the opaque white border).</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nfig, ax = plt.subplots()\nx = np.linspace(-6, 6, 100)\nax.plot(x, np.sinc(x))\nplt.savefig(\n    'test.png', \n    # transparent=False, # no change\n    # frameon=True, # no change\n    # edgecolor='blue', # no change\n    facecolor='red', # no change\n    # alpha=1, # no change\n)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fU2JG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fU2JG.png\" alt=\"red\"></a></p>\n"}], "owner": {"reputation": 11082, "user_id": 3585557, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kHN76.jpg?s=128&g=1", "display_name": "Steven C. Howell", "link": "https://stackoverflow.com/users/3585557/steven-c-howell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 49784615, "answer_count": 1, "score": 0, "last_activity_date": 1523481425, "creation_date": 1523481425, "question_id": 49784614, "link": "https://stackoverflow.com/questions/49784614/how-do-you-save-matplotlib-figure-with-an-opaque-white-border", "title": "How do you save Matplotlib figure with an opaque white border?", "body": "<p>When saving a Matplotlib figure from a Jupyter notebook, how do I override the default transparent border so it will be opaque?  </p>\n\n<p>Looking at the <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.savefig.html\" rel=\"nofollow noreferrer\"><code>savefig</code> documentation</a>, there are several parameters that seem like they would affect this but actually do not seem to do anything. Here is an example.</p>\n\n<pre><code>%matplotlib notebook\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nfig, ax = plt.subplots()\nx = np.linspace(-6, 6, 100)\nax.plot(x, np.sinc(x))\nplt.savefig(\n    'test.png', \n    transparent=False, # no change\n    frameon=True, # no change\n    edgecolor='blue', # no change (want 'white' but 'blue' should be noticeable)\n    facecolor='red', # no change (want 'white' but 'red' should be noticeable)\n    alpha=1, # no change\n)\n</code></pre>\n\n<p>Here is the result.  StackOverflow does not illustrate the transparency, but note that the edge is not <code>'blue'</code> and the face is not <code>'red'</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/o8XRg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o8XRg.png\" alt=\"result\"></a></p>\n"}, {"tags": ["python", "bloomberg", "blpapi"], "comments": [{"owner": {"reputation": 861, "user_id": 3182843, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/599794324/picture?type=large", "display_name": "jrjames83", "link": "https://stackoverflow.com/users/3182843/jrjames83"}, "edited": false, "score": 0, "creation_date": 1523481733, "post_id": 49784610, "comment_id": 86584669, "body": "if you print out dir(pybbg) does it have any other similar attributes?"}, {"owner": {"reputation": 177, "user_id": 9541748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748a3fc7efd9f68f547ee064aac9def8?s=128&d=identicon&r=PG&f=1", "display_name": "mcb", "link": "https://stackoverflow.com/users/9541748/mcb"}, "reply_to_user": {"reputation": 861, "user_id": 3182843, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/599794324/picture?type=large", "display_name": "jrjames83", "link": "https://stackoverflow.com/users/3182843/jrjames83"}, "edited": false, "score": 0, "creation_date": 1523483247, "post_id": 49784610, "comment_id": 86585247, "body": "Thanks,I saw that I don&#39;t have pybbg_k but not pybbg. I change the code for pybbg_k. Im now able to run the code but I don&#39;t have any output. No &quot;data&quot; in the variable explorer..."}], "owner": {"reputation": 177, "user_id": 9541748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748a3fc7efd9f68f547ee064aac9def8?s=128&d=identicon&r=PG&f=1", "display_name": "mcb", "link": "https://stackoverflow.com/users/9541748/mcb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523481412, "creation_date": 1523481412, "question_id": 49784610, "link": "https://stackoverflow.com/questions/49784610/pybbg-module-to-exact-bloomberg-data-in-python", "title": "pybbg module to exact Bloomberg data in python", "body": "<p>I just install the pybbg package throw git clone and python setup.py install. \nI already have the bloomberg api for windows </p>\n\n<p>I try to run the examples code from the library and I keep have the message that : \"pybbg has no attribute 'Pybbg'\".</p>\n\n<p>For example : </p>\n\n<pre><code>import unittest\nimport datetime\nimport pybbg\n\nclass TestPybbg(unittest.TestCase):\n    def test_bds(self):\n        tester = pybbg.Pybbg()\n        data = tester.bdp('AAPL US Equity','PX_Last')\n        print(data)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n"}, {"tags": ["python", "c++", "python-3.x", "numpy", "python-embedding"], "comments": [{"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 1, "creation_date": 1523918008, "post_id": 49784583, "comment_id": 86749919, "body": "How are you compiling your code? This sounds like the linker didn&#39;t know it needed to link the given symbol. On the command line, libraries should always be specified after the objects that use them. See <a href=\"https://stackoverflow.com/questions/11643666/python-importerror-undefined-symbol-for-custom-c-module\" title=\"python importerror undefined symbol for custom c module\">stackoverflow.com/questions/11643666/&hellip;</a>"}, {"owner": {"reputation": 257, "user_id": 8525442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ef6e2079b81d1d9e34742522cfc004?s=128&d=identicon&r=PG&f=1", "display_name": "skincell", "link": "https://stackoverflow.com/users/8525442/skincell"}, "reply_to_user": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1523992511, "post_id": 49784583, "comment_id": 86787726, "body": "@Dunes thanks for your input! To your question, I&#39;m not sure how numpy is compiled/the symbols linked in as per the numpy multiarray sub-question. My current theory is that the cpython multiarray .so expects the python3.5m.so to be loaded into memory somehow for the numpy import; however, for some reason it is not loaded into memory when using Py_Initialize() for the python embedding, but it is for my terminal pythonX.exe call. I&#39;ve found a work around for this problem as shown in an edit in the post above. I&#39;m not happy about it as it is a messy solution (needs logic for multiple machines)"}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1524000371, "post_id": 49784583, "comment_id": 86791425, "body": "Could you provide a minimal example that demonstrates your problem? I&#39;m trying to reproduce your problem on my machine at it all just seems to work fine. I use <code>PyRun_SimpleString</code> to import numpy, create an array, do arithmetic with it and print out. I also tried directly import <code>numpy.core.multiarray</code>"}, {"owner": {"reputation": 13022, "user_id": 145567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cd9509d25909d9affa75e56e84156fb7?s=128&d=identicon&r=PG", "display_name": "Dominic Bou-Samra", "link": "https://stackoverflow.com/users/145567/dominic-bou-samra"}, "edited": false, "score": 0, "creation_date": 1544144249, "post_id": 49784583, "comment_id": 94181941, "body": "Did you get to the bottom of this? I have same issue"}], "answers": [{"tags": [], "owner": {"reputation": 1171, "user_id": 567873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/563d705b690dc0199fd50d0c46ab96ae?s=128&d=identicon&r=PG", "display_name": "2power10", "link": "https://stackoverflow.com/users/567873/2power10"}, "is_accepted": true, "score": 5, "last_activity_date": 1557219376, "creation_date": 1557219376, "answer_id": 56018943, "question_id": 49784583, "link": "https://stackoverflow.com/questions/49784583/numpy-import-fails-on-multiarray-extension-library-when-called-from-embedded-pyt/56018943#56018943", "title": "Numpy import fails on multiarray extension library when called from embedded Python within a C++ application", "body": "<p><strong>Root Cause</strong></p>\n\n<p>This error occurs because <code>multiarray.cpython-35m-x86_64-linux-gnu.so</code> module in numpy depends on <code>libpythonx.x.so</code>, be it is not explicit link the <code>libpythonx.x.so</code>. So if you use <code>ldd -d multiarray.cpython-35m-x86_64-linux-gnu.so</code> you will not see the python in the list.</p>\n\n<p>Python doesn't have issue because python binary depends on <code>libpython.x.x.so</code>, so when numpy load <code>multiarray.cpython-35m-x86_64-linux-gnu.so</code> by using <code>dlopen</code>. <code>libdl.so</code> will try to resolve the undefined symbols by checking the dependent shared library of the main program which is python. It will find it in <code>libpython.x.x.so</code>.</p>\n\n<p><strong>Solution</strong></p>\n\n<p>After knowing the root cause the solution is very easy, just help <code>libdl.so</code> to be able to find <code>libpython.x.x.so</code>. There are at least two way to achieve that:</p>\n\n<ol>\n<li>Use <code>dlopen(\"libpythonx.x.so\", RTLD_GLOBAL)</code>. After open this so use <code>RTLD_GLOBAL</code> flag, it make symbol in libpythonx.x.so available for symbol resolution of subsequently loaded shared objects.</li>\n<li>In main program which embed python, add the <code>libpythonx.x.so</code> into its dependency library.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5579204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f54278af15097184393ac60db4b72dd?s=128&d=identicon&r=PG&f=1", "display_name": "kuberry", "link": "https://stackoverflow.com/users/5579204/kuberry"}, "is_accepted": false, "score": 0, "last_activity_date": 1613080740, "creation_date": 1613080740, "answer_id": 66163572, "question_id": 49784583, "link": "https://stackoverflow.com/questions/49784583/numpy-import-fails-on-multiarray-extension-library-when-called-from-embedded-pyt/66163572#66163572", "title": "Numpy import fails on multiarray extension library when called from embedded Python within a C++ application", "body": "<p>I had a similar error with linking an application against a libpython3.5m.a (archive, not dynamic). Once it loaded something like <code>multiarray.cpython-35m-x86_64-linux-gnu.so</code>, it would expect symbols like <code>PyFloat_Type</code> to exist.</p>\n<p>In diagnosing why Python could be called directly and it would work, but my application would not, I noticed that\n<code>readelf -s myapplication</code>\nhad a PyFloat_Type symbol in the <code>.symtab</code> table but not in the <code>.dynsym</code> table.</p>\n<p>However, <code>readelf -s /asb/path/to/python3</code> had a PyFloat_Type symbol in both tables.</p>\n<p>Adding:\n<code>target_link_options(myapplication PUBLIC &quot;LINKER:-export-dynamic&quot;)</code>\nin CMake ensured that the symbols needed were also available in the <code>.dynsym</code> table. After this, it the application worked correctly.</p>\n"}], "owner": {"reputation": 257, "user_id": 8525442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ef6e2079b81d1d9e34742522cfc004?s=128&d=identicon&r=PG&f=1", "display_name": "skincell", "link": "https://stackoverflow.com/users/8525442/skincell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2202, "favorite_count": 5, "accepted_answer_id": 56018943, "answer_count": 2, "score": 12, "last_activity_date": 1613080740, "creation_date": 1523481298, "last_edit_date": 1523993733, "question_id": 49784583, "link": "https://stackoverflow.com/questions/49784583/numpy-import-fails-on-multiarray-extension-library-when-called-from-embedded-pyt", "title": "Numpy import fails on multiarray extension library when called from embedded Python within a C++ application", "body": "<p>I'm running a C++ application which tries to run python using the <a href=\"https://docs.python.org/3.5/extending/embedding.html\" rel=\"noreferrer\">https://docs.python.org/3.5/extending/embedding.html</a> function calls. This is the error that the application error message pipes are giving me.</p>\n\n<blockquote>\n  <p>class 'ImportError': \n  Importing the multiarray numpy extension module failed.  Most\n  likely you are trying to import a failed build of numpy.\n  If you're working with a numpy git repo, try <code>git clean -xdf</code> (removes all\n  files not under version control).  Otherwise reinstall numpy.</p>\n  \n  <p>Original error was: /usr/local/lib/python3.5/site-packages/numpy/core/multiarray.cpython-35m-x86_64-linux-gnu.so: undefined symbol: PyExc_UserWarning</p>\n</blockquote>\n\n<p>I'm quite puzzled as this only occurs when embedding Python in C++ as the import works when I use it through the interpreter. I'm more interested in an answer that adds to my understanding than a quick do this or do that fix. I list some system/problem information below, and some other questions that I'm considering posting about the same topic. Any guidance is appreciated!</p>\n\n<p>System/Problem information:</p>\n\n<ul>\n<li>Ubuntu 16.04, 64 bit</li>\n<li>Compiled Python 3.5.5 with enabled-shared</li>\n<li>numpy import works in the interpreter (python3.exe, and python3.5.exe)</li>\n<li>I have made sure that the  PySys_SetPath() sets the same sys.path as the output from the interpreter: <code>import sys</code>, <code>sys.path</code></li>\n<li>I can import other modules like PIL, and datetimeutil; however, numpy and pandas are not importable (pandas uses numpy or seems to)</li>\n<li>The embedded Python uses the following commands: <code>Py_Import_Import()</code>, <code>Py_Initialize()</code> (I made sure. It is only called once.), etc., but it does not get a global lock on the interpreter.</li>\n<li>The application is built with a CMake build system which compiles to MakeFiles for my system.</li>\n<li>Installed numpy-1.14.2 using pip 9.0.0 using the <code>pip3.5 install numpy</code> command</li>\n<li>The python script that causes this error has one line: <code>import numpy</code>...</li>\n<li>I do not have a .zip file that I'm importing files from.</li>\n<li>The .exe used by the Python embedded in the C++ is located at /usr/local/bin/python3 (used Py_GetProgramName() to determine this). This .exe is linked to the libpython3.5m.so.1.0, and the missing symbol lives in libpython3.5m.so.1.0 (ran nm) </li>\n<li><p>ldd on multiarray.cpython-35m-x86_64-linux-gnu.so shows:</p>\n\n<p><code>ldd multiarray.cpython-35m-x86_64-linux-gnu.so</code></p>\n\n<blockquote>\n  <p>linux-vdso.so.1 =>  (0x00007ffd9e36b000)</p>\n  \n  <p>libopenblasp-r0-39a31c03.2.18.so => /usr/local/lib/python3.5/site-packages/numpy/core/./../.libs/libopenblasp-r0-39a31c03.2.18.so (0x00007fdbe149b000)</p>\n  \n  <p>libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fdbe1192000)</p>\n  \n  <p>libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fdbe0f75000)\n  libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fdbe0bab000)\n  /lib64/ld-linux-x86-64.so.2 (0x00007fdbe3ed5000)</p>\n  \n  <p>libgfortran-ed201abd.so.3.0.0 => /usr/local/lib/python3.5/site-packages/numpy/core/./../.libs/libgfortran-ed201abd.so.3.0.0 (0x00007fdbe08b1000)</p>\n</blockquote></li>\n</ul>\n\n<p>I could/might try reinstalling numpy through different means, but I'm having trouble tracking why that might work. </p>\n\n<p>At this point, I'm assuming some hole in my knowledge exists. I have looked at a lot of similar posts regarding not being able to import the multiarray component and numpy when embedding Python in C++; however, either none of them match my specific case or as I stated there exists a hole. Here are a list of sub-questions that I will probably be asking if no one sees anything in this setup that is obviously concerning. I'll probably update the questions with links when/if I ask them (After I polish them).</p>\n\n<ul>\n<li>How does the numpy multiarray.so link to the pythonX.X.so for symbol resolution? The ldd does not seem to suggest that it ever does. Asked this question at this <a href=\"https://stackoverflow.com/questions/49866263/how-are-basic-python-symbols-linked-to-numpy-extension-dynamic-libraries\">link</a></li>\n<li>CMake Question non-related issue resolved in this <a href=\"https://stackoverflow.com/questions/49805429/cmake-findpackagepythonlibs-does-cmake-give-a-preference-to-dynamic-or-static\">question</a> asked on 4/12/18 and answered on 4/16/18.</li>\n<li>Setting PYTHONPATH in .bashrc does not seem to update what Py_GetPath() returns, I had to add in the site-packages for imports through a different methodology to sys.path. It may only update the bash script environment variable which doesn't effect the C++. </li>\n</ul>\n\n<p>I'm not asking for an answer for the above question list at this point, rather I'm giving more clues to where my gap in knowledge may be.</p>\n\n<p>Thank you for taking time from your day to read this question. Any help is appreciated. </p>\n\n<h1><strong>Edit: 4/17/18:</strong></h1>\n\n<p>Well, I found a work around, and I'm currently using it. Dunes question started making me think more closely about undefined symbols and how it could be a linker/compiler error or that the numpy import always expects an environment with those symbols already loaded into memory. This got me trying to install different versions of numpy to see if any of the older versions made a difference. They did not, but it did make the error thrown to be slightly different. When I googled that, this <a href=\"https://stackoverflow.com/questions/29880931/importerror-and-pyexc-systemerror-while-embedding-python-script-within-c-for-pam\">question appeared</a>. The accepted answer gave me a work around by adding these two lines to the pythonInterface.cpp: </p>\n\n<ul>\n<li><code>#include &lt;dlfcn.h&gt;</code></li>\n<li><code>dlopen(\"libpython3.5m.so.1.0\", RTLD_LAZY | RTLD_GLOBAL)</code></li>\n</ul>\n\n<p>These commands add the shared library to be loaded in and available to the cpython.multiarray.so. </p>\n\n<p>This is not an ideal solution as pointing to a specific .so which may be different from machine to machine. It resolves the issue for now, but it also could lead to errors where mismatches of shared libraries can occur during the python call process if the linked library to the pythonInterface.so changes, and this line does not get updated. I believe a better answer can be achieved if this <a href=\"https://stackoverflow.com/questions/49866263/how-are-basic-python-symbols-linked-to-numpy-extension-dynamic-libraries?noredirect=1&amp;lq=1\">sub-question</a> is answered, so I'm currently holding out on submitting or accepting an answer until then. Thanks!</p>\n"}, {"tags": ["python", "opencv", "raspberry-pi"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1523481400, "post_id": 49784551, "comment_id": 86584543, "body": "cv2.imencode can compress with jpeg or png for ecample. You could compress with gzip, too... But video streaming is typically done by video codecs like h264"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 3, "creation_date": 1523481414, "post_id": 49784551, "comment_id": 86584549, "body": "When speed is your question, profiling is the answer. If I were to guess, it&#39;s <code>pickle</code> that&#39;s slowing you down."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 1, "creation_date": 1523481597, "post_id": 49784551, "comment_id": 86584619, "body": "I second @Aaron. Pickling is good for preprocessing and storing a large set of files, but there&#39;s no reason to pickle to stream the data. Pickling is for fast <i>unpacking</i> of data, but it can be larger in bytes than the data itself. Streaming the data itself would be better. There&#39;s also numpy&#39;s built in converters."}, {"owner": {"reputation": 38158, "user_id": 2707792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hjDjB.png?s=128&g=1", "display_name": "Andrey Tyukin", "link": "https://stackoverflow.com/users/2707792/andrey-tyukin"}, "edited": false, "score": 1, "creation_date": 1523481758, "post_id": 49784551, "comment_id": 86584677, "body": "Depending on the application, the diffs between the frames could contain much less entropy than each individual frame. Treating it as an actual stream of images and compressing it along the time dimension could make sense for example if the frames consist mostly of static background."}, {"owner": {"reputation": 97, "user_id": 9115663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dca00862bd4c451600f5e6c9b951883?s=128&d=identicon&r=PG&f=1", "display_name": "Bao Tran", "link": "https://stackoverflow.com/users/9115663/bao-tran"}, "edited": false, "score": 0, "creation_date": 1523482775, "post_id": 49784551, "comment_id": 86585057, "body": "Thank you for your replies guys. I attach the raspberry pi on a robot to control it and it will move a lot, so the background will change, very fast even.  And I considered using h.264 too, but <a href=\"http://video-codecs.blogspot.de/2008/06/understanding-various-video-codecs.html\" rel=\"nofollow noreferrer\">articles like this</a> suggest that it is not friendly with constrained hardware (raspberry pi is not that fast and the lab router is an antique)."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1523482777, "post_id": 49784551, "comment_id": 86585059, "body": "It seems to be the network that&#39;s the cause of an issue. Can you perhaps invest in a less antique router? You could look into low latency TCP techniques, or if you can afford losing some frames, build something upon UDP. For compression, you probably want lossless if you&#39;re analyzing the data. And something lightweight, since it&#39;s an embedded system."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1523483068, "post_id": 49784551, "comment_id": 86585185, "body": "Is that connection over WiFi? It&#39;s kinda hard to imagine something this bad over a wire these days. If so, maybe there&#39;s a lot of interference there? Either other networks on the same channel, or perhaps some other 2.4GHz equipment. Check into that, and maybe consider switching over to 5Ghz link. | If it&#39;s wired, can you just ditch the router and run a direct cable?"}, {"owner": {"reputation": 97, "user_id": 9115663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dca00862bd4c451600f5e6c9b951883?s=128&d=identicon&r=PG&f=1", "display_name": "Bao Tran", "link": "https://stackoverflow.com/users/9115663/bao-tran"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1523483880, "post_id": 49784551, "comment_id": 86585464, "body": "@Dan Ma\u0161ek Yeah it is over wifi, and there are like 10 other networks from nearby labs so the interference is really bad too. I will need to steer the robot like a car between two white lines using CNN on the frames (and some object detection, if I can push it), so further image quality drop and frame loss are the last things I want. Therefore, UDP is a big no unfortunately. Maybe I will have to resort to pestering my professor to finally buy a new router after all :("}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1523483882, "post_id": 49784551, "comment_id": 86585466, "body": "Maybe look into creating an ad-hoc network between the robot and the computer that does the processing. Basically a direct link between the two machines. A reliable communication channel will be essential when it&#39;s part of a control loop like in your case."}, {"owner": {"reputation": 97, "user_id": 9115663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dca00862bd4c451600f5e6c9b951883?s=128&d=identicon&r=PG&f=1", "display_name": "Bao Tran", "link": "https://stackoverflow.com/users/9115663/bao-tran"}, "edited": false, "score": 0, "creation_date": 1523485753, "post_id": 49784551, "comment_id": 86586033, "body": "Okay, ad-hoc is an interesting suggestion, I will definitely try this, thank you :D"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 9115663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dca00862bd4c451600f5e6c9b951883?s=128&d=identicon&r=PG&f=1", "display_name": "Bao Tran", "link": "https://stackoverflow.com/users/9115663/bao-tran"}, "edited": false, "score": 0, "creation_date": 1523484567, "post_id": 49784987, "comment_id": 86585666, "body": "Thanks, I will try this tomorrow morning. There are a bunch of jumper wires connecting the pi and the robot so I left it at the lab with the robot."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1523484581, "post_id": 49784987, "comment_id": 86585671, "body": "I&#39;ll give you a plus, since this avoids the unnecessary overhead of pickling the data. It&#39;s quite relevant to OpenCV too, since the Python bindings use <code>numpy.array</code>s to represent the image. I&#39;d probably pack some metadata (size + channel count) before the pixel array to make the protocol more flexible (doesn&#39;t cost much). | Overall I don&#39;t really think this is a solution based on what OP mentioned in comments. Unreliable comms are the issue, and IMHO that doesn&#39;t go well with low cost hardware and easy solutions."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1523484760, "post_id": 49784987, "comment_id": 86585721, "body": "I&#39;d even consider throwing in some relatively lightweight compression there, like <code>zlib</code> or <code>lz4</code> on the buffer, or even doing a <code>cv2.imencode</code> into a PNG (that&#39;s basically zlib with a choice of few simple predictors)."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "reply_to_user": {"reputation": 97, "user_id": 9115663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dca00862bd4c451600f5e6c9b951883?s=128&d=identicon&r=PG&f=1", "display_name": "Bao Tran", "link": "https://stackoverflow.com/users/9115663/bao-tran"}, "edited": false, "score": 1, "creation_date": 1523486435, "post_id": 49784987, "comment_id": 86586234, "body": "@BaoTran testing is king... <code>struct</code> is apparently much slower, but <code>numpy.frombuffer(arr.tobytes())</code> is about 3x faster than <code>pickle</code> according to my testing. ymmv, and it seems like network stability is your bigger issue, but every little bit helps right?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1523486454, "post_id": 49784987, "comment_id": 86586241, "body": "@Aaron maybe scale the times by the number of iterations? This looks a bit misleading (although the proportions are still correct)."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1523486658, "post_id": 49784987, "comment_id": 86586293, "body": "@DanMa\u0161ek all I was going for was comparison.. the network will realistically be the slowest part. I did further testing where I ditched the middle 2 conditions, and used an array with shape (3200,2400,3) to get my 3x speed value to make sure loop overhead wasn&#39;t the biggest factor."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1523563978, "post_id": 49784987, "comment_id": 86625041, "body": "I have a couple of questions about your answer - I normally code in C or C++ and am new to Python. You have <code>arr = np.random.randint(0,255...</code> but as far as I can tell that will never generate 255, only up to 254. Am I mistaken, or is there some reason for that please?"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1523564142, "post_id": 49784987, "comment_id": 86625133, "body": "A further question, in C or C++, a send or a read on a TCP socket is not guaranteed to return all the bytes requested so you normally have to put it in a loop in case the image gets split because of the MTU or any restrictions on the network. Do your <code>conn.write()</code> and <code>conn.read()</code> guarantee to send/receive all the requested bytes in Python? Thank you if you have time to answer."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1523565194, "post_id": 49784987, "comment_id": 86625634, "body": "@MarkSetchell 255 v.s. 256 was an oversight on my part... you are correct. I&#39;m not sure about your question on sockets, I mostly just assumed for the purpose of this question that they work like any other file-like object.. They may require some additional structure to make sure the whole buffer gets sent / read."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1523565386, "post_id": 49784987, "comment_id": 86625724, "body": "Ok, thank you... I&#39;m just learning all the Python stuff and not too sure of things :-)"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1523565639, "post_id": 49784987, "comment_id": 86625828, "body": "@MarkSetchell IMHO, python has one of the best standard documentation websites out there. <a href=\"https://docs.python.org/3/howto/sockets.html#socket-howto\" rel=\"nofollow noreferrer\">here&#39;s</a> the quickstart on sockets in python"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1523566000, "post_id": 49784987, "comment_id": 86626001, "body": "Thank you for sharing your knowledge and time."}], "tags": [], "owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "is_accepted": true, "score": 4, "last_activity_date": 1523565293, "last_edit_date": 1523565293, "creation_date": 1523483707, "answer_id": 49784987, "question_id": 49784551, "link": "https://stackoverflow.com/questions/49784551/python-frame-data-optimization-before-sending-through-socket/49784987#49784987", "title": "Python frame data optimization before sending through socket", "body": "<p><strong>tl;dr</strong>: <code>struct</code> is actually slow.. Instead of <code>pickle</code> use <code>np.ndarray.tobytes()</code> combined with <code>np.frombuffer()</code> to eliminate overhead.</p>\n\n<p>I'm not well versed in <code>opencv</code>, which is probably the best answer, but a drop-in approach to speeding up transfer could be to use <code>struct</code> to pack and unpack the data to be sent over the network instead of <code>pickle</code>.</p>\n\n<p>Here's an example of sending a <code>numpy</code> array of known dimensions over a socket using <code>struct</code></p>\n\n<pre><code>import numpy as np\nimport socket\nimport struct\n\n#----- server ------\nconn = socket.socket()\n#connect socket somewhere\narr = np.random.randint(0,256,(320,240,3), dtype=\"B\") # unsigned bytes \"B\": camera likely returns 0-255 pixel values\nconn.write(struct.pack('230400B', *arr.flat)) #230400 unsigned bytes\n\n#----- client ------\nconn = socket.socket()\n#connect socket somewhere\ndata = conn.read(230400) #read 230400 bytes\narr = np.array(struct.unpack('230400B', data), dtype='B').reshape((320,240,3),)\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>A little digging shows numpy has a <code>tobytes</code> function that exposes a memory view of the data as a <code>bytes</code> object. This basically does the work of struct without needing the argument unpacking in the function call to encode. This prompted me to also see if we could do the unpacking too, and as long as you're okay with flying by the seat of your pants a little bit (interruptions or errors would not be caught gracefully), we can pack and unpack the data with almost zero overhead making the only limiting factor your network. </p>\n\n<p>testing script:</p>\n\n<pre><code>arr = np.random.randint(0,256,(320,240,3), dtype=\"B\") # unsigned bytes \"B\": camera likely returns 0-255 pixel values\n\nt = time()\nfor _ in range(100):\n    arr2 = pickle.loads(pickle.dumps(arr))\nprint(f'pickle pack, pickle unpack: {time()-t} sec')\n\nt = time()\nfor _ in range(100):\n    arr2 = np.array(struct.unpack('230400B', struct.pack('230400B', *arr.flat)), dtype='B').reshape((320,240,3),)\nprint(f'struct pack, struct unpack: {time()-t} sec')\n\nt = time()\nfor _ in range(100):\n    arr2 = np.array(struct.unpack('230400B', arr.tobytes()), dtype='B').reshape((320,240,3),)\nprint(f'numpy pack, struct unpack: {time()-t} sec')\n\nt = time()\nfor _ in range(100):\n    arr2 = np.frombuffer(arr.tobytes(), dtype=\"B\").reshape((320,240,3),)\nprint(f'numpy pack, numpy unpack: {time()-t} sec')\n</code></pre>\n\n<p>prints: </p>\n\n<pre>pickle pack, pickle unpack: 0.005013704299926758 sec\nstruct pack, struct unpack: 3.558577299118042 sec\nnumpy pack, struct unpack: 1.2988512516021729 sec\nnumpy pack, numpy unpack: 0.0010025501251220703 sec</pre>\n"}, {"tags": [], "owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "is_accepted": false, "score": 2, "last_activity_date": 1523488303, "last_edit_date": 1523488303, "creation_date": 1523487284, "answer_id": 49785520, "question_id": 49784551, "link": "https://stackoverflow.com/questions/49784551/python-frame-data-optimization-before-sending-through-socket/49785520#49785520", "title": "Python frame data optimization before sending through socket", "body": "<p>Since the communication speed and latency are good with a good communication link, you're probably already limited by the performance of the Raspberry regarding the frame rate. You might gain a little (if you haven't done this already) by running the image acquisition and communications in separate threads (in Python it may need to be separate processes to avoid the GIL).</p>\n\n<p>Of course, avoiding any unnecessary overhead, such as what <a href=\"https://stackoverflow.com/users/3220135/aaron\">Aaron</a> describes in his answer, especially when it's easy to do, is worth it.</p>\n\n<p>I'd even consider using some lightweight compression. Python provides <code>zlib</code>, which you can tune to trade compression ratio for CPU usage. There's also <code>bzip2</code> and since Python 3.3 <code>lzma</code> although those are more CPU intensive. You can also get bindings for things like <code>lz4</code> or <code>snappy</code> which go on the opposite end of the spectrum.</p>\n\n<p>Another alternative is using <a href=\"https://docs.opencv.org/3.4.1/d4/da8/group__imgcodecs.html#ga461f9ac09887e47797a54567df3b8b63\" rel=\"nofollow noreferrer\"><code>cv2.imencode</code></a> (and <code>cv2.imdecode</code> on the other end) with some compressed format. Since you will be processing the images, a lossless codec would seem appropriate, so PNG might be a good choice (it's basically <code>zlib</code> with a few simple predictors).</p>\n\n<p>As always whenever performance is critical, benchmark the various approaches so you can find out which suits you best.</p>\n\n<hr>\n\n<p>If you actually had a 320x240 resolution camera, I'd suggest transmitting the raw Bayer CFA data (usually colour cameras are monochrome arrays with a special colour filter). That would mean transmitting 1/3 of the data compared to RGB format (and you'd do the demosaicing on the other end). However, as this is an already scaled down image from a 5 megapixel camera, it won't help here.</p>\n\n<hr>\n\n<p>However, the critical things about the problem you mentioned:</p>\n\n<ul>\n<li><p>The connection is over WiFi</p></li>\n<li><p>There are 10 other WiFi networks around</p></li>\n<li><p>The WiFi router you're using is ancient (so quite likely just 2.4 GHz)</p></li>\n</ul>\n\n<p>Even at the best rate, you're transmitting barely 3 megabytes per second. That's not that much, so I'd look into improving the connection somehow. There are tools that allow you to scan for all the neighboring networks. Use one of them to find the least congested channel (keep in mind the overlap). Maybe you just switching to a better channel will improve the situation.</p>\n\n<p>If at all possible, you may want to use 5GHz, since this tends to be much less congested. However the ancient router may prevent that. You could look into creating an ad-hoc network between the two machines, which is basically a direct connection that does not involve any intermediate routers.</p>\n\n<p>Otherwise consider investing into a better router, and making sure you get a reliable communication link. I don't think there's much of a choice if the link is part of the control loop as in your case.</p>\n\n<hr>\n\n<p>Edit: Oh, and perhaps a directional antenna on the stationary machine?</p>\n"}, {"tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 1, "last_activity_date": 1527093379, "last_edit_date": 1527093379, "creation_date": 1526994841, "answer_id": 50468670, "question_id": 49784551, "link": "https://stackoverflow.com/questions/49784551/python-frame-data-optimization-before-sending-through-socket/50468670#50468670", "title": "Python frame data optimization before sending through socket", "body": "<p>I have been investigating just about all the options for transmitting images from a RaspberryPi over wifi - to a Mac, but the receiver could be anything.</p>\n\n<p>I decided to transmit the data in its YUV420p format as that takes the least network bandwidth - <strong>HALF</strong> that required by RGB data. I tried disabling noise-reduction increasing the ISO and everything I could imagine to make it go faster and analysed the whole thing with a very cool little logic analyser I got from Amazon for \u00a312 ($15) and the <code>sigrok</code> logic analyser software.</p>\n\n<p>Here's how I can get 36 frames per second of 320x240 pixels:</p>\n\n<pre><code>#!/usr/bin/python3\nimport io\nimport socket\nimport struct\nimport time\nimport picamera\n\nimport RPi.GPIO as GPIO\n\n# Enable GPIO pins as output for Logic Analyser probe-based debugging\nGPIO.setmode(GPIO.BCM)\nGPIO.setup(20, GPIO.OUT)\nGPIO.setup(21, GPIO.OUT)\nGPIO.setup(22, GPIO.OUT)\nGPIO.setup(23, GPIO.OUT)\n\nWIDTH=320\nHEIGHT=240\nBUFFERSIZE=WIDTH*HEIGHT*3//2\nPORT=8000\nSERVER='192.168.0.8'\nclient_socket = socket.socket()\nclient_socket.connect((SERVER, PORT))\nconnection = client_socket.makefile('wb')\ntry:\n    with picamera.PiCamera() as camera:\n        camera.resolution = (WIDTH, HEIGHT)\n        camera.framerate = 60\n        time.sleep(2)\n        start = time.time()\n        count = 0\n        stream = io.BytesIO()\n        # Use the video-port for captures...\n        while True:\n            GPIO.output(20,GPIO.HIGH)\n            frame=next(camera.capture_continuous(stream, format=\"yuv\", use_video_port=True))\n            GPIO.output(20,GPIO.LOW)\n            stream.seek(0)\n            GPIO.output(22,GPIO.HIGH)\n            connection.write(stream.read())\n            GPIO.output(22,GPIO.LOW)\n            count += 1\n            if time.time() - start &gt; 15:\n                break\n            stream.seek(0)\n            stream.truncate()\n    #connection.write(struct.pack('&lt;L', 0))\nfinally:\n    connection.close()\n    client_socket.close()\n    finish = time.time()\nprint('Sent %d images in %d seconds at %.2ffps' % (\n    count, finish-start, count / (finish-start)))\nGPIO.cleanup() \n</code></pre>\n\n<p>On the Mac, running as a server and display:</p>\n\n<pre><code>#!/usr/local/bin/python3\nimport io\nimport socket\nimport struct\nimport numpy as np\nimport cv2\n\nWIDTH=320\nHEIGHT=240\nPORT=8000\nBUFFERSIZE=WIDTH*HEIGHT*3//2\nprint(\"Running on port {}: width={}, height={}\".format(PORT,WIDTH,HEIGHT))\n\n# Start a socket listening for connections on all interfaces\nserver_socket = socket.socket()\nserver_socket.bind(('0.0.0.0', PORT))\nserver_socket.listen(0)\n\nframe=0\n\n# Accept a single connection and make a file-like object out of it\nconnection = server_socket.accept()[0].makefile('rb')\ntry:\n    while True:\n        # Construct a stream and fill with image data from network\n        image_stream = io.BytesIO()\n        image_stream.write(connection.read(BUFFERSIZE))\n        # Rewind the stream, and process\n        image_stream.seek(0)\n        img_str=image_stream.read()\n        nparr=np.fromstring(img_str,np.uint8)\n        # Data layout is here https://en.wikipedia.org/wiki/YUV#/media/File:Yuv420.svg\n        Y=nparr[0:WIDTH*HEIGHT].reshape(HEIGHT,WIDTH)\n        # ssU = sub-sampled U channel, ssV = sub-sampled V channel\n        ssU=nparr[WIDTH*HEIGHT:WIDTH*HEIGHT*5//4].reshape(HEIGHT//2,WIDTH//2)\n        ssV=nparr[WIDTH*HEIGHT*5//4:].reshape(HEIGHT//2,WIDTH//2)\n        # Up-sample the U and V channels to full size\n        U=cv2.resize(ssU,(WIDTH,HEIGHT),cv2.INTER_LINEAR)\n        V=cv2.resize(ssV,(WIDTH,HEIGHT),cv2.INTER_LINEAR)\n        # Combine the YUV into single image and convert to BGR\n        oc_YUV=cv2.merge((Y,U,V))\n        oc_BGR=cv2.cvtColor(oc_YUV,cv2.COLOR_YUV2BGR)\n        # That's actually it, but I upscale for better viewing on screen\n        tmp=cv2.resize(oc_BGR,(WIDTH*2,HEIGHT*2),cv2.INTER_LINEAR)\n        cv2.imshow('image',tmp)\n        cv2.waitKey(1)\n        frame=frame+1\nfinally:\n    connection.close()\n    server_socket.close()\n</code></pre>\n\n<p>Here's a little video of it running. It is extremely responsive and the jerkiness is only down to the fact that I resampled the screen capture down to 2fps to get it under the StackOverflow 2MB limit.</p>\n\n<p>You can safely ignore all the GPIO-related stuff in the code - that just wiggles pins high and low on the logic analyser so I can time things accurately.</p>\n\n<p><a href=\"https://i.stack.imgur.com/URcSQ.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/URcSQ.gif\" alt=\"enter image description here\"></a></p>\n\n<p>The YUV data are laid out like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ngt8q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ngt8q.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>By Original bitmapped version by Xburge03, SVG version by Qef. - Vectorised version of <a href=\"http://en.wikipedia.org/wiki/Image:Yuv420.png\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Image:Yuv420.png</a> \u2013 created with a program given on the talk page., Public Domain, <a href=\"https://en.wikipedia.org/w/index.php?curid=18105371\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/w/index.php?curid=18105371</a></p>\n</blockquote>\n\n<hr>\n\n<p>Given that your issues seem to be with the network bandwidth, my approach is based on sending YUV data, as above. I also looked at Dan's suggestion of compressing the data and, whilst the bandwidth reduction is obviously dependent on your lighting and your subject matter, the YUV data does lend itself to some <code>lz4</code> compression. I saw around 25% further reduction in network bandwidth and no perceptible increase in latency. The code looks like this:</p>\n\n<pre><code>import lz4.frame\n...\ncompressed=lz4.frame.compress(data,compression_level=lz4.frame.COMPRESSIONLEVEL_MINHC))\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 9115663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dca00862bd4c451600f5e6c9b951883?s=128&d=identicon&r=PG&f=1", "display_name": "Bao Tran", "link": "https://stackoverflow.com/users/9115663/bao-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1885, "favorite_count": 0, "accepted_answer_id": 49784987, "answer_count": 3, "score": 2, "last_activity_date": 1527093379, "creation_date": 1523481149, "last_edit_date": 1523486851, "question_id": 49784551, "link": "https://stackoverflow.com/questions/49784551/python-frame-data-optimization-before-sending-through-socket", "title": "Python frame data optimization before sending through socket", "body": "<p>Following step 6 of <a href=\"https://www.pyimagesearch.com/2015/03/30/accessing-the-raspberry-pi-camera-with-opencv-and-python/\" rel=\"nofollow noreferrer\">Adrian's guide</a> and some others, I managed to stream 320x240 frames with a speed of 10 fps and 0.1 s latency from my raspberry pi to my laptop. The problem is, when I test this system in my lab (which is equipped with an antique router), it can only stream 1-2 fps with a 1-1.5 second latency, which is totally unacceptable for what I intend to do with those frames. </p>\n\n<p>Right now, my method is simple and straight forward: the server on the raspberry pi capture a frame and store it as a 320x240x3 matrix like the guide mentioned above, then pickle that matrix and keep pumping it over a TCP socket. The client on the laptop keep receiving these frames, do some processing on them, and finally show the result with imshow. My code is rather long for a post (around 200 lines) so I would rather avoid showing it if I can.</p>\n\n<p>Is there any way to reduce the size of each frame's data (the pickled 320x240x3 matrix, its length is 230 kB) or is there a better way to transmit that data? </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Okay guys, the exact presented length of the pickled array is 230563 bytes, and the payload data should be at least 230400 bytes so overhead should be no more than 0.07% of the total package size. I think this narrows the problem down to wireless connection quality and the method for encoding the data to bytes (pickling seems to be slow). The wireless problem can be solved by creating ad-hoc network (sounds interesting but I have not tried this yet) or simply buying a better router, and the encoding problem can be solved with Aaron's solution. Hope that this will help future readers :)</p>\n"}, {"tags": ["python", "tokenize", "gensim", "corpus"], "comments": [{"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1523483081, "post_id": 49784513, "comment_id": 86585189, "body": "Did you look at this? <a href=\"https://stackoverflow.com/questions/33229360/gensim-typeerror-doc2bow-expects-an-array-of-unicode-tokens-on-input-not-a-si#33230682\" title=\"gensim typeerror doc2bow expects an array of unicode tokens on input not a si%2333230682\">stackoverflow.com/questions/33229360/&hellip;</a>"}, {"owner": {"reputation": 163, "user_id": 2669383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IBIHY.jpg?s=128&g=1", "display_name": "nvnvashisth", "link": "https://stackoverflow.com/users/2669383/nvnvashisth"}, "reply_to_user": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1523523149, "post_id": 49784513, "comment_id": 86598676, "body": "As you can see,  tokens = tokenizer.tokenize(processed_txt) --- Here the words are already tokenised."}, {"owner": {"reputation": 864, "user_id": 6582984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b394be3db81ad10291b6fb7b0122bc?s=128&d=identicon&r=PG&f=1", "display_name": "WolfgangK", "link": "https://stackoverflow.com/users/6582984/wolfgangk"}, "reply_to_user": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 1, "creation_date": 1523532894, "post_id": 49784513, "comment_id": 86605135, "body": "The link given by @MustacheMoses provides the answer. <code>corpora.Dictionary()</code> expects a list of lists, e.g. <code>[[&#39;words&#39;, &#39;for&#39;, first&#39;, &#39;document&#39;], [&#39;tokens&#39;, &#39;of&#39;, &#39;my&#39;, &#39;second&#39;, &#39;document&#39;]]</code>."}, {"owner": {"reputation": 163, "user_id": 2669383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IBIHY.jpg?s=128&g=1", "display_name": "nvnvashisth", "link": "https://stackoverflow.com/users/2669383/nvnvashisth"}, "edited": false, "score": 0, "creation_date": 1523547434, "post_id": 49784513, "comment_id": 86615983, "body": "Yeah. fixed it. dictionary = corpora.Dictionary([tokens])"}], "owner": {"reputation": 163, "user_id": 2669383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IBIHY.jpg?s=128&g=1", "display_name": "nvnvashisth", "link": "https://stackoverflow.com/users/2669383/nvnvashisth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2964, "favorite_count": 0, "closed_date": 1523613371, "answer_count": 0, "score": 1, "last_activity_date": 1523480996, "creation_date": 1523480996, "question_id": 49784513, "link": "https://stackoverflow.com/questions/49784513/typeerror-doc2bow-expects-an-array-of-unicode-tokens-on-input-not-a-single-str", "closed_reason": "Duplicate", "title": "TypeError: doc2bow expects an array of unicode tokens on input, not a single string", "body": "<p>I looked for all suggestion, where everyone says to break the string into tokens by split function. All that has been done already, but still it seems to have same error again and again.</p>\n\n<pre><code>for r in words:\n        if not r in stop_words:\n            processed_txt+=str(str(ps.stem(r) + \" \"))\n    tokenizer = RegexpTokenizer(r'\\w+')\n    tokens = tokenizer.tokenize(processed_txt)\n    #print(tokens)\n    dictionary = corpora.Dictionary(tokens)\n    #corpus = [dictionary.doc2bow(text) for text in tokens]\n    print(dictionary)\n</code></pre>\n\n<p>So now it gives below error.</p>\n\n<pre><code>raise TypeError(\"doc2bow expects an array of unicode tokens on input, not a \nsingle string\")\nTypeError: doc2bow expects an array of unicode tokens on input, not a single \nstring\n</code></pre>\n\n<p>and the output under \"tokens\" variable seems like this as below.</p>\n\n<pre><code>['becom', 'effect', 'willingli', 'without', 'need', 'obtain', 'knowledg', 'other', 'obtain', 'acquir', 'must', 'testamentari','claim', 'ownership', 'task', 'establish', 'endow', 'recept', 'willing', 'willsend', 'anoth', 'given', 'efficaci', 'presuppos']\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["python", "arrays", "math", "subtraction"], "comments": [{"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 2, "creation_date": 1523481036, "post_id": 49784499, "comment_id": 86584429, "body": "What is the code you use to get that result?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1523481756, "post_id": 49784499, "comment_id": 86584675, "body": "Magic 8-ball says you&#39;ve got NumPy arrays of dtype uint8, which can&#39;t hold negative numbers. Please learn to construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You&#39;re showing us lists, which don&#39;t support <code>A - B</code> at all."}, {"owner": {"reputation": 51, "user_id": 9529769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cd6db457b2f870c4e7a78145d839cb?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9529769/brandon"}, "reply_to_user": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1523482066, "post_id": 49784499, "comment_id": 86584786, "body": "@ducminh  I have added some additional information into the questions description above.  Thanks!"}, {"owner": {"reputation": 51, "user_id": 9529769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cd6db457b2f870c4e7a78145d839cb?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9529769/brandon"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1523482284, "post_id": 49784499, "comment_id": 86584871, "body": "@user2357112 Is this better?  I can&#39;t give you all the code here to reproduce it as the data set comes from another, personally created, module, but I believe I&#39;ve provided enough information."}], "answers": [{"tags": [], "owner": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "is_accepted": false, "score": 2, "last_activity_date": 1523481826, "last_edit_date": 1523481826, "creation_date": 1523481524, "answer_id": 49784627, "question_id": 49784499, "link": "https://stackoverflow.com/questions/49784499/python-subtracting-the-elements-of-two-arrays/49784627#49784627", "title": "Python - Subtracting the Elements of Two Arrays", "body": "<pre><code>A = [0, 1, 1, 0, 0]\nB = [1, 1, 1, 0, 1]\nnewlist = [e-B[c] for c,e in enumerate(A)]\n</code></pre>\n\n<p>Try a list comprehension. You can't get 255 with regular lists. You should've gotten <code>TypeError: unsupported operand type(s) for -: 'list' and 'list'</code></p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 9627138, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592740325315/picture?type=large", "display_name": "Ian McGarry", "link": "https://stackoverflow.com/users/9627138/ian-mcgarry"}, "is_accepted": false, "score": 0, "last_activity_date": 1523481586, "creation_date": 1523481586, "answer_id": 49784641, "question_id": 49784499, "link": "https://stackoverflow.com/questions/49784499/python-subtracting-the-elements-of-two-arrays/49784641#49784641", "title": "Python - Subtracting the Elements of Two Arrays", "body": "<p>I can't replicate this but it looks like the numbers are 8 bit and wrapping some how </p>\n"}], "owner": {"reputation": 51, "user_id": 9529769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cd6db457b2f870c4e7a78145d839cb?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/9529769/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4855, "favorite_count": 0, "closed_date": 1523482186, "answer_count": 2, "score": 0, "last_activity_date": 1523481958, "creation_date": 1523480937, "last_edit_date": 1523481958, "question_id": 49784499, "link": "https://stackoverflow.com/questions/49784499/python-subtracting-the-elements-of-two-arrays", "closed_reason": "Duplicate", "title": "Python - Subtracting the Elements of Two Arrays", "body": "<p>I am new to Python programming and stumbled across this feature of subtracting in python that I can't figure out.  I have two 0/1 arrays, both of size 400.  I want to subtract each element of array one from its corresponding element in array 2.  </p>\n\n<p>For example say you have two arrays <code>A = [0, 1, 1, 0, 0]</code> and <code>B = [1, 1, 1, 0, 1]</code>.<br>\nThen I would expect <code>A - B = [0 - 1, 1 - 1, 1 - 1, 0 - 0, 0 - 1] = [-1, 0, 0, 0, -1]</code>\nHowever in python I get <code>[255, 0, 0, 0, 255]</code>.</p>\n\n<p>Where does this 255 come from and how do I get -1 instead?</p>\n\n<p>Here's some additional information:\nThe real variables I'm working with are Y and LR_predictions.</p>\n\n<p>Y = array([[0, 0, 0, ..., 1, 1, 1]], dtype=uint8)</p>\n\n<p>LR_predictions = array([0, 1, 1, ..., 0, 1, 0], dtype=uint8)</p>\n\n<p>When I use either Y - LR_predictions or numpy.subtract(Y, LR_predictions) </p>\n\n<p>I get: array([[  0, 255, 255, ...,   1,   0,   1]], dtype=uint8)</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1523482580, "post_id": 49784719, "comment_id": 86584985, "body": "This won&#39;t work. The variable <code>counter</code> is undefined in <code>wrong_answer</code>.  You need to pass it as an argument."}, {"owner": {"reputation": 7, "user_id": 9189774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5535b3d330e917c6af8765cb1ddbdb?s=128&d=identicon&r=PG&f=1", "display_name": "mhcoder36", "link": "https://stackoverflow.com/users/9189774/mhcoder36"}, "edited": false, "score": 0, "creation_date": 1523483198, "post_id": 49784719, "comment_id": 86585229, "body": "Thanks Ian McGarry and Paul Cornelius. I did notice it was throwing me an error but putting it in as an argument rectified the problem. Thanks very much for both your help!"}, {"owner": {"reputation": 115, "user_id": 9627138, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592740325315/picture?type=large", "display_name": "Ian McGarry", "link": "https://stackoverflow.com/users/9627138/ian-mcgarry"}, "edited": false, "score": 0, "creation_date": 1523483559, "post_id": 49784719, "comment_id": 86585352, "body": "Sorry, didn&#39;t notice that. Amended."}], "tags": [], "owner": {"reputation": 115, "user_id": 9627138, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592740325315/picture?type=large", "display_name": "Ian McGarry", "link": "https://stackoverflow.com/users/9627138/ian-mcgarry"}, "is_accepted": false, "score": 0, "last_activity_date": 1523483534, "last_edit_date": 1523483534, "creation_date": 1523482086, "answer_id": 49784719, "question_id": 49784475, "link": "https://stackoverflow.com/questions/49784475/how-to-reset-3-guesses-counter/49784719#49784719", "title": "How to reset 3 guesses counter", "body": "<p>Looks like you are getting the variables max_guesses and counter mixed up. Try like this</p>\n\n<pre><code>score = 0\nmax_guesses = 3\n\ndef quiz(riddle):\n\n    counter = 0\n\n    while counter &lt; max_guesses:\n        answer = input(riddle[\"question\"] + \" \")\n\n        if right_answer(answer, riddle):\n            global score\n            score += 1\n            print(\"Correct! Well done.\\n Your score is\",score)\n        else:\n            counter +=1\n            wrong_answer(answer, counter)\n            print(\"Your score is\",score)\n\n\ndef right_answer(answer, riddle):\n    return answer == riddle[\"answer\"]\n\ndef wrong_answer(answer, counter): \n    if answer != riddle[\"answer\"]:\n        print(\"Sorry\", answer, \"is wrong.\")\n        print (\"You have\", max_guesses - counter, \" guesses left\")\n\nwith open(\"riddles.json\") as riddles_file:\n    riddles = json.load(riddles_file)\n\nfor riddle in riddles:\n    quiz(riddle)\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9189774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5535b3d330e917c6af8765cb1ddbdb?s=128&d=identicon&r=PG&f=1", "display_name": "mhcoder36", "link": "https://stackoverflow.com/users/9189774/mhcoder36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1523483534, "creation_date": 1523480861, "question_id": 49784475, "link": "https://stackoverflow.com/questions/49784475/how-to-reset-3-guesses-counter", "title": "How to reset 3 guesses counter", "body": "<p>I'm writing a quiz in Python where the user has 3 tries to get each answer right. It counts down fine to 0, but when it goes to the next question, it keeps counting down and doesn't reset to 3 guesses ie second question, answer is wrong and it says \"You have -1 guesses left\", \"You have -2 guesses left\" etc. How can I get it to reset to 3 tries for each new question? Variables are set at the top, code running is in def wrong_answer. Code below:</p>\n\n<pre><code>score = 0\nmax_guesses = 3\n\ndef quiz(riddle):\n\n    counter = 0\n\n    while counter &lt; 3:\n        answer = input(riddle[\"question\"] + \" \")\n\n        if right_answer(answer, riddle):\n            global score\n            score += 1\n            print(\"Correct! Well done.\\nYour score is\",score)\n            break\n\n        else: \n            wrong_answer(answer)\n            print(\"Your score is\",score)\n            counter +=1\n\ndef right_answer(answer, riddle):\n    return answer == riddle[\"answer\"]\n\ndef wrong_answer(answer): \n    if answer != riddle[\"answer\"]:\n        global max_guesses\n        max_guesses -= 1\n        print(\"Sorry\", answer, \"is wrong.\")\n        print (\"You have\", max_guesses, \"guesses left\")\n\nwith open(\"riddles.json\") as riddles_file:\n    riddles = json.load(riddles_file)\n\nfor riddle in riddles:\n    quiz(riddle)\n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "edited": false, "score": 0, "creation_date": 1523567516, "post_id": 49787718, "comment_id": 86626635, "body": "Can you please clarify, why it should help to use these &quot;unofficial&quot; binaries?"}, {"owner": {"reputation": 36, "user_id": 6817295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a97f7f0558a4c87a7caeb6b5d3acf12?s=128&d=identicon&r=PG", "display_name": "user6817295", "link": "https://stackoverflow.com/users/6817295/user6817295"}, "reply_to_user": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "edited": false, "score": 0, "creation_date": 1523584483, "post_id": 49787718, "comment_id": 86631249, "body": "Tf and a number of it&#39;s dependencies require compilation of C, Fortran and Cython code prior to use. The packages from the &quot;unofficial&quot; binaries website are pre-compiled and are widely utilized by the Python community developing on windows."}, {"owner": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "edited": false, "score": 0, "creation_date": 1523650689, "post_id": 49787718, "comment_id": 86664928, "body": "I downloaded and installed: <code>pip install tensorflow-1.7.0-cp36-cp36m-win_amd64.whl</code> Unfortunately I still get the same error message when importing tensorflow."}, {"owner": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "edited": false, "score": 0, "creation_date": 1523651122, "post_id": 49787718, "comment_id": 86665113, "body": "I just noticed the error is shorter. Now it&#39;s only 2 errors with &quot;DLL load failed&quot;. Here is the beginning: <code>File &quot;C:\\Users\\Dan\\AppData\\Local\\Programs\\Python\\Python36\\lib\\sit&zwnj;&#8203;e-packages\\tensorflo&zwnj;&#8203;w\\python\\pywrap_tens&zwnj;&#8203;orflow.py&quot;, line 58, in &lt;module&gt;     from tensorflow.python.pywrap_tensorflow_internal import *</code>"}], "tags": [], "owner": {"reputation": 36, "user_id": 6817295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a97f7f0558a4c87a7caeb6b5d3acf12?s=128&d=identicon&r=PG", "display_name": "user6817295", "link": "https://stackoverflow.com/users/6817295/user6817295"}, "is_accepted": false, "score": 0, "last_activity_date": 1523505076, "creation_date": 1523505076, "answer_id": 49787718, "question_id": 49784472, "link": "https://stackoverflow.com/questions/49784472/import-tensorflow-error-on-windows-with-python-3-6-2-cpu/49787718#49787718", "title": "&quot;import tensorflow&quot; error on windows with python 3.6.2 CPU", "body": "<p>Without knowing which version of tf you installed, if you haven't obtained it from the uci repository for 64 bit Windows binaries, try removing the version you have (pip uninstall tensorflow) and then download and pip installing the version from <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#tensorflow\" rel=\"nofollow noreferrer\">here</a>. Hope that helps.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "edited": false, "score": 0, "creation_date": 1523567651, "post_id": 49787836, "comment_id": 86626701, "body": "Can you please clarify why it should help to use Anaconda? I&#39;d like to stay with the officially supported way as long as possible."}, {"owner": {"reputation": 85, "user_id": 6450437, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CbZhF.png?s=128&g=1", "display_name": "Dhinakaran", "link": "https://stackoverflow.com/users/6450437/dhinakaran"}, "reply_to_user": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "edited": false, "score": 0, "creation_date": 1523592542, "post_id": 49787836, "comment_id": 86633087, "body": "it is not an unofficial way. anaconda is python distribution. the packages version managed by <code>conda</code> you can create many virtual  environment each environment you can install python packages. <a href=\"https://www.tensorflow.org/install/install_windows\" rel=\"nofollow noreferrer\">refer</a>"}], "tags": [], "owner": {"reputation": 85, "user_id": 6450437, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CbZhF.png?s=128&g=1", "display_name": "Dhinakaran", "link": "https://stackoverflow.com/users/6450437/dhinakaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1523505982, "creation_date": 1523505982, "answer_id": 49787836, "question_id": 49784472, "link": "https://stackoverflow.com/questions/49784472/import-tensorflow-error-on-windows-with-python-3-6-2-cpu/49787836#49787836", "title": "&quot;import tensorflow&quot; error on windows with python 3.6.2 CPU", "body": "<p>Use <a href=\"https://www.anaconda.com/download/#windows\" rel=\"nofollow noreferrer\">Anaconda</a> and install tensorflow in anaconda. if your already using anaconda then install tesnorflow using <code>conda install tensorflow</code></p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 1870978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbb5a229d89a4332c0654179ed27cef2?s=128&d=identicon&r=PG", "display_name": "Renato Aloi", "link": "https://stackoverflow.com/users/1870978/renato-aloi"}, "edited": false, "score": 1, "creation_date": 1523819376, "post_id": 49828450, "comment_id": 86706401, "body": "Worked for me! Thanks! Acctually I removed the 1.7 version first using the command <code>pip uninstall tensorflow</code>"}], "tags": [], "owner": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "is_accepted": true, "score": 2, "last_activity_date": 1523685728, "creation_date": 1523685728, "answer_id": 49828450, "question_id": 49784472, "link": "https://stackoverflow.com/questions/49784472/import-tensorflow-error-on-windows-with-python-3-6-2-cpu/49828450#49828450", "title": "&quot;import tensorflow&quot; error on windows with python 3.6.2 CPU", "body": "<p>I found an easy solution. Althoug the setup worked on another computer, here I needed to install an older version of tensorflow.</p>\n\n<pre><code>pip install tensorflow==1.5\n</code></pre>\n\n<p>Thanks to the hints in the comments for the <a href=\"https://gist.github.com/mrry/ee5dbcfdd045fa48a27d56664411d41c\" rel=\"nofollow noreferrer\">self check script</a>.</p>\n"}], "owner": {"reputation": 31, "user_id": 9632753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/9632753/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2469, "favorite_count": 0, "accepted_answer_id": 49828450, "answer_count": 3, "score": 1, "last_activity_date": 1523685728, "creation_date": 1523480850, "question_id": 49784472, "link": "https://stackoverflow.com/questions/49784472/import-tensorflow-error-on-windows-with-python-3-6-2-cpu", "title": "&quot;import tensorflow&quot; error on windows with python 3.6.2 CPU", "body": "<p>I just wanted to try out tensorflow but whenever I try to execute the following, I get an error. </p>\n\n<pre><code>import tensorflow as tf\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre><code>&gt;&gt;&gt; import tensorflow as tf\nTraceback (most recent call last):\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 14, in swig_import_helper\n    return importlib.import_module(mname)\n  File \"C:\\Python\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 978, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 961, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 950, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 648, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 560, in module_from_spec\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 922, in create_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 205, in _call_with_frames_removed\nImportError: DLL load failed: Eine DLL-Initialisierungsroutine ist fehlgeschlagen.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in &lt;module&gt;\n    from tensorflow.python.pywrap_tensorflow_internal import *\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 17, in &lt;module&gt;\n    _pywrap_tensorflow_internal = swig_import_helper()\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 16, in swig_import_helper\n    return importlib.import_module('_pywrap_tensorflow_internal')\n  File \"C:\\Python\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nModuleNotFoundError: No module named '_pywrap_tensorflow_internal'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\__init__.py\", line 24, in &lt;module&gt;\n    from tensorflow.python import *  # pylint: disable=redefined-builtin\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 49, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 74, in &lt;module&gt;\n    raise ImportError(msg)\nImportError: Traceback (most recent call last):\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 14, in swig_import_helper\n    return importlib.import_module(mname)\n  File \"C:\\Python\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 978, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 961, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 950, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 648, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 560, in module_from_spec\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 922, in create_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 205, in _call_with_frames_removed\nImportError: DLL load failed: Eine DLL-Initialisierungsroutine ist fehlgeschlagen.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in &lt;module&gt;\n    from tensorflow.python.pywrap_tensorflow_internal import *\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 17, in &lt;module&gt;\n    _pywrap_tensorflow_internal = swig_import_helper()\n  File \"C:\\Python\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 16, in swig_import_helper\n    return importlib.import_module('_pywrap_tensorflow_internal')\n  File \"C:\\Python\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nModuleNotFoundError: No module named '_pywrap_tensorflow_internal'\n\n\nFailed to load the native TensorFlow runtime.\n\nSee https://www.tensorflow.org/install/install_sources#common_installation_problems\n\nfor some common reasons and solutions.  Include the entire stack trace\nabove this error message when asking for help.\n</code></pre>\n\n<p>I already searched for a solution in the following threads:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/45461927/error-while-doing-import-tensorflow-tensorflow-installation-error-windows-10\">Error while doing &quot;import tensorflow&quot; (Tensorflow installation error Windows 10)</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/42011070/on-windows-running-import-tensorflow-generates-no-module-named-pywrap-tenso\">On Windows, running &quot;import tensorflow&quot; generates No module named &quot;_pywrap_tensorflow&quot; error</a></p>\n\n<p>Everytime the suggested solution was to install \"Visual C++ 2015 redistributable (x64 version)\" to get the \"MSVCP140.DLL\". I installed <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=53587\" rel=\"nofollow noreferrer\">update 3</a>, but it didn't help. I can anyway find the dll with the \"where\" command:</p>\n\n<pre><code>C:\\&gt;where msvcp140.dll\nC:\\Windows\\System32\\msvcp140.dll\n</code></pre>\n\n<p>My PC is running on Windows 10. The installed python version is 3.6.2</p>\n\n<pre><code>Python 3.6.2 (v3.6.2:5fd33b5, Jul  8 2017, 04:57:36) [MSC v.1900 64 bit (AMD64)] on win32\n</code></pre>\n\n<p>What else can I do? </p>\n"}, {"tags": ["python", "pandas", "ua-parser"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1523481576, "post_id": 49784457, "comment_id": 86584610, "body": "Look at using pandas <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas-read-csv\" rel=\"nofollow noreferrer\"><code>read_csv</code></a>"}, {"owner": {"reputation": 3928, "user_id": 7347631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/905cba2c96dba01877d265382fd921a9?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Naguib", "link": "https://stackoverflow.com/users/7347631/andrew-naguib"}, "edited": false, "score": 0, "creation_date": 1523481897, "post_id": 49784457, "comment_id": 86584730, "body": "I think the problem isn&#39;t with your code, but with the file you are passing to pandas, I have tried to read several <i>tsv</i> files using the same code your provided and pandas just works fine with <i>Python 2.7</i> and <i>Python 3.6.2</i>. Would you please show an example of the data you are passing?"}, {"owner": {"reputation": 45, "user_id": 9631868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33f0a9a6f17f216c8508f4f78fafba61?s=128&d=identicon&r=PG&f=1", "display_name": "r1ty", "link": "https://stackoverflow.com/users/9631868/r1ty"}, "edited": false, "score": 0, "creation_date": 1523482515, "post_id": 49784457, "comment_id": 86584955, "body": "Hi Andrew, the .tsv files i&#39;m using <i>should</i> be the same as the csv files, as the csv files were created by opening the tsv files in excel, selecting a sample of rows, and saving as csv"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 9631868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33f0a9a6f17f216c8508f4f78fafba61?s=128&d=identicon&r=PG&f=1", "display_name": "r1ty", "link": "https://stackoverflow.com/users/9631868/r1ty"}, "is_accepted": true, "score": 0, "last_activity_date": 1523566102, "creation_date": 1523566102, "answer_id": 49805613, "question_id": 49784457, "link": "https://stackoverflow.com/questions/49784457/csv-works-fine-tsv-gives-typeerror-expected-string-or-buffer/49805613#49805613", "title": ".csv works fine, .tsv gives &#39;TypeError: expected string or buffer&#39;", "body": "<p>Figured out the issue.. the ua-parser was failing when it came across empty cells. Removing all lines with NaN prior to parsing fixed the error. </p>\n"}], "owner": {"reputation": 45, "user_id": 9631868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33f0a9a6f17f216c8508f4f78fafba61?s=128&d=identicon&r=PG&f=1", "display_name": "r1ty", "link": "https://stackoverflow.com/users/9631868/r1ty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 49805613, "answer_count": 1, "score": 0, "last_activity_date": 1523566102, "creation_date": 1523480753, "last_edit_date": 1523482725, "question_id": 49784457, "link": "https://stackoverflow.com/questions/49784457/csv-works-fine-tsv-gives-typeerror-expected-string-or-buffer", "title": ".csv works fine, .tsv gives &#39;TypeError: expected string or buffer&#39;", "body": "<p>I'm working on a python script to parse user agent strings and reduce them down to just the 'family' (i.e., chrome, firefox, safari, etc).</p>\n\n<p>I've got a script that works completely fine when run against csv files, but when I run the files against .tsv files it gives me the following error:</p>\n\n<p>TypeError: expected string or buffer</p>\n\n<p>Anyone else run across this problem? Sample code is below.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport glob as glob\nfrom ua_parser import user_agent_parser as uaparser\n\n#THIS WORKS FINE:\n\ndef parse_uagent():\n    ua_list = []\n    uadf = pd.DataFrame()\n    for datafile in glob.glob(\"*.csv\"):\n        df = pd.read_csv(datafile, sep=',')\n        df = df[['user_agent','date_time','user_name']]\n        ua = df[df.columns[0]].values\n    for line in ua:\n        uagent = uaparser.ParseUserAgent(line)\n        ua_list.append(uagent)\n    uadf = uadf.append(ua_list)\n    print uadf\n\n\n#THIS GIVES AN ERROR:\n\ndef parse_uagent():\n    ua_list = []\n    uadf = pd.DataFrame()\n    for datafile in glob.glob(\"*.tsv\"):\n        df = pd.read_csv(datafile, sep='\\t')\n        df = df[['user_agent','date_time','user_name']]\n        ua = df[df.columns[0]].values\n    for line in ua:\n        uagent = uaparser.ParseUserAgent(line)\n        ua_list.append(uagent)\n    uadf = uadf.append(ua_list)\n    print uadf\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-92-14c05dc8ee13&gt; in &lt;module&gt;()\n     29 \n     30 \n---&gt; 31 parse_uagent()\n     32 \n\n&lt;ipython-input-92-14c05dc8ee13&gt; in parse_uagent()\n     19         ua = df[df.columns[0]].values\n     20     for line in ua:\n---&gt; 21         uagent = uaparser.ParseUserAgent(line)\n     22         ua_list.append(uagent)\n     23     uadf = uadf.append(ua_list)\n\n/anaconda2/lib/python2.7/site-packages/ua_parser/user_agent_parser.pyc in ParseUserAgent(user_agent_string, **jsParseBits)\n    247     else:\n    248         for uaParser in USER_AGENT_PARSERS:\n--&gt; 249             family, v1, v2, v3 = uaParser.Parse(user_agent_string)\n    250             if family:\n    251                 break\n\n/anaconda2/lib/python2.7/site-packages/ua_parser/user_agent_parser.pyc in Parse(self, user_agent_string)\n     49     def Parse(self, user_agent_string):\n     50         family, v1, v2, v3 = None, None, None, None\n---&gt; 51         match = self.user_agent_re.search(user_agent_string)\n     52         if match:\n     53             if self.family_replacement:\n\nTypeError: expected string or buffer\n</code></pre>\n"}, {"tags": ["python", "performance", "time"], "comments": [{"owner": {"reputation": 2598, "user_id": 2766650, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ef36288df96290326b6849710377d07e?s=128&d=identicon&r=PG&f=1", "display_name": "asdf", "link": "https://stackoverflow.com/users/2766650/asdf"}, "edited": false, "score": 0, "creation_date": 1523480368, "post_id": 49784370, "comment_id": 86584149, "body": "It is taking so long to run because the size provided to the for loops is huge. Try lowering the size provided to the <code>Field</code> class to a lower value and see how that affects runtime"}, {"owner": {"reputation": 1022, "user_id": 5863987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7wZz.png?s=128&g=1", "display_name": "NieDzejkob", "link": "https://stackoverflow.com/users/5863987/niedzejkob"}, "edited": false, "score": 4, "creation_date": 1523480469, "post_id": 49784370, "comment_id": 86584205, "body": "Well, creating tens of thousands of objects isn&#39;t instantaneous."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1523480679, "post_id": 49784370, "comment_id": 86584286, "body": "There is no good reason to set <code>self.plants</code> to a list of zeros, then overwrite them with objects. (Preallocating the list slots doesn&#39;t speed things up that much.) Just use a list comprehension: <code>self.plants = [crop() for i in range(size)]</code>. It&#39;s not going to be much faster, though, because the time it takes to call <code>crop</code> 10,000 times dwarfs the time it would take to assemble them into a list."}, {"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 4, "creation_date": 1523480884, "post_id": 49784370, "comment_id": 86584371, "body": "Also irrigate calls rain 20000 times each call calls water 10000 times so 200,000,000 or 200 million function calls. You don&#39;t need to model each plant in a field if they all act the same. And because the irrigate function uses up its entire load of water, your Corn grows to 40000 feet before it can be harvested."}], "answers": [{"tags": [], "owner": {"reputation": 5041, "user_id": 523144, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/111055402ae29758a8e32ce797380e23?s=128&d=identicon&r=PG&f=1", "display_name": "PeterE", "link": "https://stackoverflow.com/users/523144/petere"}, "is_accepted": false, "score": 0, "last_activity_date": 1523481506, "creation_date": 1523481506, "answer_id": 49784623, "question_id": 49784370, "link": "https://stackoverflow.com/questions/49784370/python-imported-code-taking-long-to-run-why/49784623#49784623", "title": "Python imported code taking long to run...why?", "body": "<p>A more efficient design would be to not model every single plant as a separate instance. As it stands you perform the exact same operation on each plant of a field. Just give the Field a size attribute and a crop attribute thus modelling just that one plant per field and multiply any size related outputs by size. </p>\n\n<p>Something along the lines of this:</p>\n\n<pre><code>class Field():\n    def rain(self):\n        self.crop.water()\n\n    def __init__(self, size, crop):\n        self.size = size\n        self.crop = crop()\n\nclass Combine():\n    def harvest(self, field):\n        quantity = field.crop.harvest() * field.size\n        return quantity\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9617279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "noob4lyfe", "link": "https://stackoverflow.com/users/9617279/noob4lyfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523481506, "creation_date": 1523480320, "question_id": 49784370, "link": "https://stackoverflow.com/questions/49784370/python-imported-code-taking-long-to-run-why", "title": "Python imported code taking long to run...why?", "body": "<p>Here is the code from one python file that I import into another file...</p>\n\n<pre><code>class Crop():\n    def water(self):\n        print('not')\n\n    def harvest(self):\n        print('not')\n\n    def __init__(self):\n        self.height = 0\nclass Corn(Crop):\n    def water(self):\n        self.height = self.height + 2\n\n    def harvest(self):\n        if self.height &gt;= 9:\n            return 1\n        else:\n            return 0\nclass Wheat(Crop):\n    def water(self):\n        self.height = self.height + 1\n\n    def harvest(self):\n        if self.height &gt;= 5:\n            return 1\n        else:\n            return 0\nclass Irrigator():\n    def __init__(self, load):\n        self.load = load\n\n    def irrigate(self, field):\n        while self.load &gt; 0:\n            self.load = self.load - 1\n            field.rain()\n</code></pre>\n\n<p>I take the above code and then I import it into another python file...</p>\n\n<pre><code>from farmhelper import *\nfrom random import *\n\n# Field for holding the crops.\nclass Field():\n    def rain(self):\n        for i in range(len(self.plants)):\n            self.plants[i].water()\n\n    def __init__(self, size, crop):\n        self.plants = [0] * size\n        for i in range(size):\n            self.plants[i] = crop()\n\nclass Combine():\n    def harvest(self, field):\n        quantity = 0\n        for i in range(len(field.plants)):\n            quantity += field.plants[i].harvest()\n        return quantity\n\n# Create fields with 10,000 of each crop\n\ncornField = Field(10000, Corn)\nwheatField = Field(10000, Wheat)\n\n# Create irrigators for each field\n\ncornIrrigator = Irrigator(20000)\nwheatIrrigator = Irrigator(500)\n\n# Create a combine for harvesting\ncombine = Combine()\n\n\n# 90 days ~3 months of growth\nfor i in range(90):\n    # Low chance of rain\n    if randint(0, 100) &gt; 95:\n        print(\"It rained\")\n        cornField.rain()\n        wheatField.rain()\n    # Always run the irrigators. Since they are never\n    # refilled they will quickly run out\n    cornIrrigator.irrigate(cornField)\n    wheatIrrigator.irrigate(wheatField)\n\n# Gather the crops - DONE\nearsOfCorn = combine.harvest(cornField)\nheadsOfWheat = combine.harvest(wheatField)\n\n# Print the result - DONE\nprint(\"Grew\", earsOfCorn, \"ears of corn\")\nprint(\"and\", headsOfWheat, \"heads of wheat\")\n</code></pre>\n\n<p>But for some reason it takes around 2 to 3 minutes for the code to run. I believe there is a problem with the latter code posted. If anyone has a solution, lemme know!</p>\n"}, {"tags": ["python", "django", "authentication", "facebook-login", "django-allauth"], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 6329996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe47a5b779bc5d077818d27b10c9e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "ralfillo", "link": "https://stackoverflow.com/users/6329996/ralfillo"}, "edited": false, "score": 0, "creation_date": 1523520433, "post_id": 49786031, "comment_id": 86597026, "body": "Hi @dethos!, now I&#39;m having a different error when login in through allauth (Facebook):   TypeError at /social-auth/facebook/login/callback/ must be str, not Profile   The receiver is going through because I can see a message on the console. Any ideas?"}, {"owner": {"reputation": 2543, "user_id": 2729584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e084672ade86cfe255fe710fe9ba66e?s=128&d=identicon&r=PG", "display_name": "dethos", "link": "https://stackoverflow.com/users/2729584/dethos"}, "reply_to_user": {"reputation": 393, "user_id": 6329996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe47a5b779bc5d077818d27b10c9e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "ralfillo", "link": "https://stackoverflow.com/users/6329996/ralfillo"}, "edited": false, "score": 0, "creation_date": 1523582589, "post_id": 49786031, "comment_id": 86630848, "body": "I will need a little more information to be able to help. like the line that cause the error or a traceback."}], "tags": [], "owner": {"reputation": 2543, "user_id": 2729584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e084672ade86cfe255fe710fe9ba66e?s=128&d=identicon&r=PG", "display_name": "dethos", "link": "https://stackoverflow.com/users/2729584/dethos"}, "is_accepted": false, "score": 0, "last_activity_date": 1523491173, "creation_date": 1523491173, "answer_id": 49786031, "question_id": 49784358, "link": "https://stackoverflow.com/questions/49784358/django-2-0-django-allauth-relatedobjectdoesnotexist-at-account-edit-user-h/49786031#49786031", "title": "Django 2.0 + django-allauth: RelatedObjectDoesNotExist at /account/edit/ (User has no profile)", "body": "<p>It seems that a <code>profile</code> record is not being created when the user signs up or at least it doesn't exist for your current user (perhaps a superuser created on the shell? or a user created by the admin? or created before the <code>profile</code> logic was added? given the the <code>profile</code> is only created in your <code>register</code> view.)</p>\n\n<p>A solution that could solve your problem is to use a signal to detect when a user is created and then create the <code>profile</code> as well, this way it doesn't matter where the user was created. It would be something like this in your <code>models.py</code> for example: </p>\n\n<pre><code>@receiver(post_save, sender=User, dispatch_uid=\"something_here\")\ndef create_profile(sender, **kwargs):\n    if kwargs.get('created', False):\n         Profile.objects.create(user=kwargs['instance'])\n</code></pre>\n\n<p>For your existing users that are missing the profile, you should add it in the django administration.</p>\n"}], "owner": {"reputation": 393, "user_id": 6329996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe47a5b779bc5d077818d27b10c9e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "ralfillo", "link": "https://stackoverflow.com/users/6329996/ralfillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1986, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523491173, "creation_date": 1523480250, "question_id": 49784358, "link": "https://stackoverflow.com/questions/49784358/django-2-0-django-allauth-relatedobjectdoesnotexist-at-account-edit-user-h", "title": "Django 2.0 + django-allauth: RelatedObjectDoesNotExist at /account/edit/ (User has no profile)", "body": "<p>I'm making a Django WebApp that allows registration and login using a form and social authentication through django-<strong>allauth</strong>.</p>\n\n<p>Registration through form is working perfectly.</p>\n\n<p>You can check out the whole project on <a href=\"https://github.com/ralfillo/social_django_website\" rel=\"nofollow noreferrer\">https://github.com/ralfillo/social_django_website</a></p>\n\n<p>When a user is created with allauth (Facebook account), login works but when I want to <strong>edit</strong> the user's account Django throws this error:</p>\n\n<blockquote>\n  <p><strong>RelatedObjectDoesNotExist at</strong> /account/edit/ User has no profile.<br>\n  <strong>Request Method:</strong>   GET<br>\n  <strong>Request URL:</strong>  <a href=\"https://development.com:8000/account/edit/\" rel=\"nofollow noreferrer\">https://development.com:8000/account/edit/</a><br>\n  <strong>Django Version:</strong>   2.0.4<br>\n  <strong>Exception Type:</strong>   RelatedObjectDoesNotExist Exception Value: User has no\n  profile.</p>\n  \n  <p><strong>On the console:</strong>   django.db.models.fields.related_descriptors.RelatedObjectDoesNotExist:\n  User has no profile.  </p>\n</blockquote>\n\n<p>The account app <strong>models.py</strong> looks like this:</p>\n\n<pre><code>from django.conf import settings\nfrom django.contrib.auth.models import User\nfrom django.db import models\n\n\nclass Profile(models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    date_of_birth = models.DateField(blank=True, null=True)\n    photo = models.ImageField(upload_to='users/%Y/%m/%d', blank=True)\n\n    def __str__(self):\n        return 'Profile for user {}'.format(self.user.username)\n</code></pre>\n\n<p>Part of <strong>views.py</strong>:</p>\n\n<pre><code>from django.contrib import messages\nfrom django.contrib.auth import authenticate, login, logout\nfrom django.contrib.auth.decorators import login_required\nfrom django.http import HttpResponse\nfrom django.shortcuts import render, redirect\n#-----\nfrom .forms import LoginForm, UserRegistrationForm, UserEditForm, ProfileEditForm\nfrom .models import Profile\n\n@login_required\ndef edit(request):\n    if request.method == 'POST':\n        user_form = UserEditForm(instance=request.user,\n                                 data=request.POST)\n        profile_form = ProfileEditForm(instance=request.user.profile,\n                                       data=request.POST,\n                                       files=request.FILES)\n        if user_form.is_valid() and profile_form.is_valid():\n            user_form.save()\n            profile_form.save()\n            messages.success(request, 'Profile updated successfully')\n        else:\n            messages.error(request, 'Error updating your profile')\n    else:\n        user_form = UserEditForm(instance=request.user)\n        profile_form = ProfileEditForm(instance=request.user.profile)\n    return render(request, 'account/edit.html', {'user_form': user_form,\n                                                 'profile_form': profile_form})\n</code></pre>\n\n<p>Part of <strong>settings.py</strong>, you can check the whole file on github (link provided above):</p>\n\n<pre><code>import os\nimport json\n\nfrom django.core.exceptions import ImproperlyConfigured\nfrom django.urls import reverse_lazy\n\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n\n# Import JSON secrets module\n\nwith open(BASE_DIR + '/secrets.json') as f:\n    secrets = json.loads(f.read())\n\n\ndef get_secret(setting, secrets=secrets):\n    \"\"\"Get the secret variable or return explicit exception\"\"\"\n    try:\n        return secrets[setting]\n    except KeyError:\n        error_msg = 'Set the {0} environment variable'.format(setting)\n        raise ImproperlyConfigured(error_msg)\n\n\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = get_secret('SECRET_KEY')\n\n\nALLOWED_HOSTS = ['development.com']\n\n\n# Application definition\n\nINSTALLED_APPS = [\n    # My Apps\n    'account',\n\n    # Django Apps\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.sites',\n\n    # Third party Apps\n    'sslserver',\n    'allauth',\n    'allauth.account',\n    'allauth.socialaccount',\n    'allauth.socialaccount.providers.facebook',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nROOT_URLCONF = 'django_social_website.urls'\n\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'templates')]\n        ,\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n                # allauth specific context processors\n                # \"allauth.account.context_processors.account\",\n                # \"allauth.socialaccount.context_processors.socialaccount\",\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'django_social_website.wsgi.application'\n\n\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n\n\n\n\n# Redirect login urls\n\nLOGIN_REDIRECT_URL = reverse_lazy('account:dashboard')\nLOGIN_URL = reverse_lazy('account:login')\n\n\nAUTHENTICATION_BACKENDS = (\n    'django.contrib.auth.backends.ModelBackend',\n    'account.authentication.EmailAuthBackend',\n\n    # `allauth` specific authentication methods, such as login by e-mail\n    \"allauth.account.auth_backends.AuthenticationBackend\",\n)\n\n\nSITE_ID = 1\n\n\nSOCIALACCOUNT_PROVIDERS = {\n    'facebook': {\n        'METHOD': 'oauth2',\n        'SCOPE': ['email', 'public_profile', 'user_friends'],\n        'AUTH_PARAMS': {'auth_type': 'reauthenticate'},\n        'INIT_PARAMS': {'cookie': True},\n        'FIELDS': [\n            'id',\n            'email',\n            'name',\n            'first_name',\n            'last_name',\n            'verified',\n            'locale',\n            'timezone',\n            'link',\n            'gender',\n            'updated_time',\n        ],\n        'EXCHANGE_TOKEN': True,\n        'LOCALE_FUNC': 'path.to.callable',\n        'VERIFIED_EMAIL': False,\n        'VERSION': 'v2.12',\n    }\n}\n\n\n# facebook\nSOCIAL_AUTH_FACEBOOK_KEY = get_secret('SOCIAL_AUTH_FACEBOOK_KEY')  # App ID\nSOCIAL_AUTH_FACEBOOK_SECRET = get_secret('SOCIAL_AUTH_FACEBOOK_SECRET')  # app key\n\n\n# little options for your page's signup.\n\nACCOUNT_EMAIL_REQUIRED = True\nACCOUNT_USERNAME_REQUIRED = True\n</code></pre>\n\n<p>It looks like if the registration and login using form and through django-allauth are not working as a whole. </p>\n\n<p>When I check the users created in both modes they look the same on Django's admin area, but it looks like allauth is not creating a profile what I suppose is not being able to use any of the login systems interchangeably.</p>\n\n<p>I know that this question is quite long, thanks for going through it :)</p>\n"}, {"tags": ["python", "file", "csv"], "comments": [{"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 1, "creation_date": 1523480388, "post_id": 49784355, "comment_id": 86584161, "body": "Can you just include the path to your desktop as part of <code>filename</code>?"}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1523480719, "post_id": 49784355, "comment_id": 86584299, "body": "<code>os.chdir</code> should be what you are looking for"}], "answers": [{"tags": [], "owner": {"reputation": 382, "user_id": 6323618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33620c3d15641e54a30f8fafe364c7df?s=128&d=identicon&r=PG&f=1", "display_name": "kkcheng", "link": "https://stackoverflow.com/users/6323618/kkcheng"}, "is_accepted": false, "score": 0, "last_activity_date": 1523481270, "creation_date": 1523481270, "answer_id": 49784578, "question_id": 49784355, "link": "https://stackoverflow.com/questions/49784355/how-to-send-the-data-written-to-a-file-csv-to-a-folder-on-my-desktop-directo/49784578#49784578", "title": "How to send the data written to a file (.csv) to a folder on my desktop (directory)?", "body": "<p>Have you tried running the script from your desktop. It looks like you haven't specified a directory. So maybe running from your desktop should output your results to your current working directory.</p>\n\n<p>Alternatively, you could try use the <a href=\"https://docs.python.org/2/library/os.html\" rel=\"nofollow noreferrer\">in-built os library</a>.</p>\n\n<pre><code>import os\nos.getcwd()    # to get the current working directory\nos.chdir(pathname)    # change your working directory to the path specified.\n</code></pre>\n\n<p>This would change your working directory to the place you want to save your files.</p>\n\n<p>Also, in regards to the last four lines of your code. <code>file</code> is not open, so you cannot close this. Also, I do not believe you need the <code>openfile</code> statement.</p>\n\n<pre><code>writeFile = open(filename, 'w')\nwriteFile.write(data[i])\nopenfile = open(Desktop, writeFile , 'r')\nfile.close()\n</code></pre>\n\n<p>Try this instead.</p>\n\n<pre><code>with open(filename, 'w') as writeFile:\n    for i in range(2, row_count):\n        if(data[i] != '&lt;br&gt;\\n' and data[i] != '\\n'):\n            writeFile.write(data[i])\n</code></pre>\n\n<p>Using this approach you shouldn't need to close the file. 'w' is to write as if a new file, change this to 'a' if you need to append to the file.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 8716484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588a160bcb1617c8af0a4756e9033fdc?s=128&d=identicon&r=PG&f=1", "display_name": "DPL", "link": "https://stackoverflow.com/users/8716484/dpl"}, "is_accepted": false, "score": 0, "last_activity_date": 1523481393, "creation_date": 1523481393, "answer_id": 49784605, "question_id": 49784355, "link": "https://stackoverflow.com/questions/49784355/how-to-send-the-data-written-to-a-file-csv-to-a-folder-on-my-desktop-directo/49784605#49784605", "title": "How to send the data written to a file (.csv) to a folder on my desktop (directory)?", "body": "<p>You just need to provide <code>writeFile.write()</code> with the <em>path</em> to your destination file, rather than just the filename (which will otherwise be saved into your current working directory.)</p>\n\n<p>Try something like:</p>\n\n<pre><code>f = open('stations.csv', 'r')\ntarget_dir = \"/path/to/your/Desktop/folder/\"\nfor line in f.readlines():\n\n        ...\n        # We can open the file outside your inner \"row\" loop\n        # using the combination of the path to your Desktop\n        # and your filename\n        with open(target_dir+filename, 'w') as writeFile:\n            for i in range(2, row_count):\n                 if(data[i] != '&lt;br&gt;\\n' and data[i] != '\\n'):\n                    writeFile.write(data[i])\n        # The \"writeFile\" object will close automatically outside the\n        # \"with ... \" block\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": false, "score": 0, "last_activity_date": 1523481534, "creation_date": 1523481534, "answer_id": 49784631, "question_id": 49784355, "link": "https://stackoverflow.com/questions/49784355/how-to-send-the-data-written-to-a-file-csv-to-a-folder-on-my-desktop-directo/49784631#49784631", "title": "How to send the data written to a file (.csv) to a folder on my desktop (directory)?", "body": "<p>As others have mentioned, you could approach this two different ways:</p>\n\n<p>1) Run the script directly from the directory to which you would like to save the files. Then you would just need to specify the full path to the .csv file you are reading.</p>\n\n<p>2) You could provide the full path to where you would like to save the files when you write them, however this seems more intensive and unnecessary.</p>\n\n<p>On another note, when opening files for the purpose of reading/writing them, use <code>with</code> to simply open the file for as long as you need it, then when you exit the <code>with</code> statement, the file will automatically be closed.</p>\n\n<p>Here is an example of Option 1 with some clean-up:</p>\n\n<pre><code>import urllib\n\ndef accessData(Id, Month):\n\n    url = \"https://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=\" + str(Id) + \"&amp;year=2017&amp;month=\" + str(Month) + \"&amp;graphspan=month&amp;format=1\"\n    infile = urllib.urlopen(url)\n    readLineByLine = infile.readlines()\n    infile.close()\n\n    return readLineByLine\n\nwith open('Path to File' + 'stations.csv', 'r') as f:\n\n    for line in f.readlines():\n\n        vals = line.split(',')\n\n        for j in range(1,13):\n\n            data = accessData(line, j)\n\n            filename = \"{}-0{}-2017.csv\".format(vals[0], j)\n\n            with open(filename, 'w') as myfile:\n\n                for i in range(2, len(data)):\n                    if data[i]!='&lt;br&gt;\\n' and data[i]!='\\n':\n                        myfile.write(data[i])\n\n            print(filename + ' - Completed')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9631155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c38927389ec5a15b5a18d6d8c780413?s=128&d=identicon&r=PG&f=1", "display_name": "Ma_", "link": "https://stackoverflow.com/users/9631155/ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1523481534, "creation_date": 1523480240, "last_edit_date": 1523481355, "question_id": 49784355, "link": "https://stackoverflow.com/questions/49784355/how-to-send-the-data-written-to-a-file-csv-to-a-folder-on-my-desktop-directo", "title": "How to send the data written to a file (.csv) to a folder on my desktop (directory)?", "body": "<p>Essentially the data is temperatures from 4 different states over the course of 12 months, so there is 48 files to be populated into my folder on my desktop directory. But I am not sure how to take the data being pulled from the web and then take the files being saved in my program to be sent to the directory of my desktop. That's what I am confused about, how to take the files being created on in my program and send them to a folder on my desktop.</p>\n\n<p>I am copying the data from the web, cleaning it up, then saving it into a file, then taking that file and wanting to save it to a folder on my desktop.</p>\n\n<p>Here is the code:  </p>\n\n<pre><code>import urllib\n\n\ndef accessData(Id, Month):\n    url = \"https://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=\" + str(Id) + \"&amp;year=2017&amp;month=\" + str(Month) + \"&amp;graphspan=month&amp;format=1\"\n    infile = urllib.urlopen(url)\n    readLineByLine = infile.readlines()\n    infile.close()\n\n    return readLineByLine\n\n\nf = open('stations.csv', 'r')\n\nfor line in f.readlines():\n    vals = line.split(',')\n\n    for j in range(1,13): # accessing months here from 1 to 12, b/c 13 exclusive\n\n        data = accessData(line, j)\n\n        filename = \"{}-0{}-2017.csv\".format(vals[0], j)\n\n        print(str(filename))\n        row_count = len(data)\n\n        for i in range(2, row_count):\n            if(data[i] != '&lt;br&gt;\\n' and data[i] != '\\n'):\n                writeFile = open(filename, 'w')\n                writeFile.write(data[i])\n                openfile = open(Desktop, writeFile , 'r')\n                file.close()\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "boto3"], "comments": [{"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1523481670, "post_id": 49784340, "comment_id": 86584645, "body": "I do not think it is possible. You may have to download the object and upload it."}, {"owner": {"reputation": 10065, "user_id": 1161906, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TAK61.png?s=128&g=1", "display_name": "bcattle", "link": "https://stackoverflow.com/users/1161906/bcattle"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1523555615, "post_id": 49784340, "comment_id": 86620610, "body": "It looks like this is not possible. Under the hood, the copy is implemented using a call to the AWS REST API with the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectCOPY.html\" rel=\"nofollow noreferrer\"><code>x-amz-copy-source</code> header</a> set. This request would also need to have an <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html\" rel=\"nofollow noreferrer\"><code>Authorization</code> header</a> that has read access to the source and write access to the destination. Even if you converted the signed URL to an <code>Authorization</code> header, it wouldn&#39;t have write access to your destination bucket."}], "owner": {"reputation": 10065, "user_id": 1161906, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TAK61.png?s=128&g=1", "display_name": "bcattle", "link": "https://stackoverflow.com/users/1161906/bcattle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1523480206, "creation_date": 1523480206, "question_id": 49784340, "link": "https://stackoverflow.com/questions/49784340/how-to-move-files-between-two-amazon-s3-buckets-using-boto-with-a-signed-url", "title": "How to move files between two Amazon S3 Buckets using boto with a signed URL?", "body": "<p>I need to copy a key from an S3 bucket I don't own into a bucket I do. To access the key in the external bucket I have a signed URL. How can I copy the key using Boto 3? </p>\n\n<p>I know I can use <a href=\"http://boto3.readthedocs.io/en/latest/reference/services/s3.html#S3.Client.copy\" rel=\"nofollow noreferrer\"><code>S3.Client.copy</code></a> to move a key, like </p>\n\n<pre><code>import boto3\ns3 = boto3.resource('s3')\ncopy_source = {\n    'Bucket': 'mybucket',\n    'Key': 'mykey'\n}\ns3.meta.client.copy(copy_source, 'otherbucket', 'otherkey')\n</code></pre>\n\n<p>Is there a way to call this function using the parameters from the signed URL? </p>\n\n<p>The URL contains the query parameters</p>\n\n<pre><code>X-Amz-Security-Token\nX-Amz-Algorithm\nX-Amz-Date\nX-Amz-SignedHeaders\nX-Amz-Expires\nX-Amz-Credential\nX-Amz-Signature\n</code></pre>\n"}, {"tags": ["python", "optimization", "c-api"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1523480308, "post_id": 49784328, "comment_id": 86584117, "body": "You seem to have missed out <a href=\"http://cython.readthedocs.io/en/latest/src/tutorial/cython_tutorial.html\" rel=\"nofollow noreferrer\"><code>Cython</code></a> from your list of options"}, {"owner": {"reputation": 163, "user_id": 3254423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f5063f6e19103876ccf31f160fb5c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Lzkatz", "link": "https://stackoverflow.com/users/3254423/lzkatz"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1523481963, "post_id": 49784328, "comment_id": 86584752, "body": "Fair point, we actually currently cythonize the file. I was wondering if extending in proper C would yield more performance."}, {"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1523482239, "post_id": 49784328, "comment_id": 86584853, "body": "How are you implementing get_first_value_after and get_values_in_range? Are you using bisect as your lists appear to be sorted?"}, {"owner": {"reputation": 163, "user_id": 3254423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f5063f6e19103876ccf31f160fb5c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Lzkatz", "link": "https://stackoverflow.com/users/3254423/lzkatz"}, "edited": false, "score": 0, "creation_date": 1523483156, "post_id": 49784328, "comment_id": 86585212, "body": "At the moment we aren&#39;t using bisect because they&#39;re lists of lists. Although bisect would probably be a quick improvement as well."}], "owner": {"reputation": 163, "user_id": 3254423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f5063f6e19103876ccf31f160fb5c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Lzkatz", "link": "https://stackoverflow.com/users/3254423/lzkatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523482025, "creation_date": 1523480164, "last_edit_date": 1523482025, "question_id": 49784328, "link": "https://stackoverflow.com/questions/49784328/optimizing-core-python-class-via-c", "title": "Optimizing core python class via C", "body": "<p>This is more of a conceptual question than a specific code question. We're looking at optimizing some of our lower level \"core\" classes in our python code. There's currently a class that essentially stores a dictionary of features, and a sorted list of things per feature. With the caveat of, what the feature represents could be any data type.</p>\n\n<p>Example:</p>\n\n<pre><code>blah = BasicClass()\nprint blah.data\n&gt;&gt; {'a': [(1, 'foo'), (2, 'bar'), (10, 'baz')],\n    'b': [(100, -133231), (236, -99594)],\n    'c': [(27, [1,2]), (35, [1,2,3,4])]}\n</code></pre>\n\n<p>This class is mostly utility functions for looking up values in the data field given certain conditions.</p>\n\n<p>Methods like:</p>\n\n<p>get_first_value_after(feat, val) - Given one of the features, and some number, find the first entry in data[feat] that has an index > val.</p>\n\n<p>get_values_in_range(feat, start_val, end_val) - Given a range, find all parts of data[feat] that have their index between start_val, and end_val.</p>\n\n<p>So on and so forth. </p>\n\n<p>I'm looking at optimizing this class to be as performant as possible, as it gets called in a lot of our stack. I've been looking into incorporating C as that would theoretically offer some gains, but it seems as if there's many ways of extending into C, and I'm not sure which path to take.</p>\n\n<p>Off the top of my head:</p>\n\n<ol>\n<li><p>Ctypes functions - create the functions in C with no reference to the python header file. Everything would use native c, and be used through the ctypes.CDLL call. Expecting the python to ctype convert before passing in.</p></li>\n<li><p>C functions module - create a helper functions module that uses pythons C API and returns PyObjects correctly. Then in my class above, I'd just make methods that pass through to the c module functions</p>\n\n<p><code>def get_first_val_after(self, feat, val):\n    return get_first_val_after_c(self.data[feat], val)</code></p></li>\n<li><p>Rewrite the whole class in C - This would allow our underlying data structure to be native c, and the functions would potentially be faster.</p></li>\n</ol>\n\n<p>I have a bit of experience with 1 and 2, but I've never done 3 before, I would hoping someone would be able to give me insight into which would potentially yield the best results.</p>\n\n<p>Thank you in advance.</p>\n\n<p>EDIT: As mentioned below, we currently cythonize the whole file. I was looking to test if extending into C proper would yield better results.</p>\n"}, {"tags": ["python", "pandas", "for-loop", "dataframe", "calculated-columns"], "comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 2, "creation_date": 1523480073, "post_id": 49784279, "comment_id": 86584016, "body": "Can you add a sample input and desired output to your post?"}, {"owner": {"reputation": 4515, "user_id": 4016674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0794ef4d308e37cd2f51a23b25488e13?s=128&d=identicon&r=PG&f=1", "display_name": "hellpanderr", "link": "https://stackoverflow.com/users/4016674/hellpanderr"}, "edited": false, "score": 1, "creation_date": 1523480197, "post_id": 49784279, "comment_id": 86584066, "body": "Just use <code>final.coldcloudy[final.coldcloudy&gt;0]+=1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 3, "last_activity_date": 1523480245, "creation_date": 1523480245, "answer_id": 49784357, "question_id": 49784279, "link": "https://stackoverflow.com/questions/49784279/how-to-do-for-loops-with-conditions-in-python-data-frame/49784357#49784357", "title": "How to do for loops with conditions in python data frame", "body": "<p>You don't need for loop:</p>\n\n<pre><code>final = pd.DataFrame({'coldcloudy':np.random.choice([0,1],20)})\n\nfinal.loc[final.coldcloudy &gt; 0, 'coldcloudy'] += 1\n\nprint(final)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    coldcloudy\n0            2\n1            2\n2            0\n3            0\n4            2\n5            2\n6            0\n7            2\n8            0\n9            0\n10           2\n11           2\n12           0\n13           2\n14           2\n15           0\n16           2\n17           0\n18           2\n19           2\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9247206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/498bf6af7c76243d2ff29af567f21781?s=128&d=identicon&r=PG&f=1", "display_name": "TheLeveyBreaks", "link": "https://stackoverflow.com/users/9247206/theleveybreaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523480245, "creation_date": 1523479942, "question_id": 49784279, "link": "https://stackoverflow.com/questions/49784279/how-to-do-for-loops-with-conditions-in-python-data-frame", "title": "How to do for loops with conditions in python data frame", "body": "<p>I am currently trying to add 1 to an entire column if the value(int) is greater than 0. The code that I am currently using for it is like so:`</p>\n\n<pre><code>for coldcloudy in final.coldcloudy:\n    final.loc[final['coldcloudy'] &gt; 0,coldcloudy] +=1\n</code></pre>\n\n<p>However I keep on getting a 'KeyError: 0' with it. Essentially, I want the code to go row by row in a particular column and add 1 if the integer is zero. for the values that are added by 1, I will add to another column. Can someone please help?</p>\n"}, {"tags": ["python", "numpy", "numba"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1523479991, "post_id": 49784269, "comment_id": 86583981, "body": "Just assign a new array to it."}, {"owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1523480038, "post_id": 49784269, "comment_id": 86584001, "body": "@OliverCharlesworth That does not work. See the minimal example."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1523485637, "post_id": 49784269, "comment_id": 86585997, "body": "<code>new_shape[0] = new_size</code> would produce an error in regular python.  <code>new_shape</code> is a tuple."}], "answers": [{"tags": [], "owner": {"reputation": 330, "user_id": 9632900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Justin Lanfranchi", "link": "https://stackoverflow.com/users/9632900/justin-lanfranchi"}, "is_accepted": true, "score": 2, "last_activity_date": 1523480997, "creation_date": 1523480997, "answer_id": 49784514, "question_id": 49784269, "link": "https://stackoverflow.com/questions/49784269/numba-how-to-delete-an-existing-array-and-assign-a-new-array-to-the-old-arrays/49784514#49784514", "title": "numba: How to delete an existing array and assign a new array to the old array&#39;s name?", "body": "<p>Your error is coming from trying to assign a new value to the <code>shape</code> attribute of the existing numpy array; that's a fixed thing, you can't just reshape an array by redefining its <code>shape</code> attr (in numpy or in numba). (In fact, <code>shape</code> is a tuple, which is immutable in any context.) You also don't need to worry about deleting the existing array; python+numpy should handle if all references to the original array go away (after which its memory will be cleaned up). So just create a new array of the desired new shape and assign values to the new array. (Also: use np.full to save a step, or probably faster still, use np.empty and fill only the values you know you need \"defaults\" in.) The following works (for 1D arrays).</p>\n\n<pre><code>import numba as nb\n\n@nb.jit(nopython=True)\ndef resize_np_array(np_array, new_size, fill_value):\n    if new_size &lt;= np_array.shape[0]:\n        return np_array\n    else:\n        new_shape = new_size\n\n        new_np_array = np.empty(shape=new_shape, dtype=np_array.dtype)\n\n        for i in range(np_array.shape[0]):\n            new_np_array[i] = np_array[i]\n\n        for i in range(np_array.shape[0], new_shape):\n            new_np_array[i] = fill_value\n\n        return new_np_array\n\n@nb.jit(nopython=True)   \ndef test_function():\n    x = np.zeros(10, dtype=np.int64)\n    x = resize_np_array(x, 20, 1)\n\n    return x\n\nx = test_function()\n</code></pre>\n"}], "owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 49784514, "answer_count": 1, "score": 0, "last_activity_date": 1523481257, "creation_date": 1523479915, "last_edit_date": 1523481257, "question_id": 49784269, "link": "https://stackoverflow.com/questions/49784269/numba-how-to-delete-an-existing-array-and-assign-a-new-array-to-the-old-arrays", "title": "numba: How to delete an existing array and assign a new array to the old array&#39;s name?", "body": "<p>Considering the following minimal not working example:</p>\n\n<pre><code>import numba as nb\nimport numpy as np\n\n@nb.jit(nopython=True)\ndef resize_np_array(np_array, new_size, fill_value):\n    if new_size &lt;= np_array.shape[0]:\n        return np_array\n    else:\n        new_shape = np_array.shape\n        new_shape[0] = new_size\n\n        new_np_array = fill_value*np.ones(new_shape, dtype=np_array.dtype)\n\n        for i in range(np_array.shape[0]):\n            new_np_array[i] = np_array[i]\n\n        return new_np_array\n\n@nb.jit(nopython=True)   \ndef test_function():\n    x = np.zeros(10, dtype=np.int64)\n    x = resize_np_array(x, 20, 0)\n\n    return x\n\nx = test_function()\n</code></pre>\n\n<p>The above code will fail with error:</p>\n\n<pre><code>  File \"A:\\anaconda\\lib\\site-packages\\numba\\typeinfer.py\", line 595, in __call__\n    (targetty, self.index, valty), loc=self.loc)\n\nTypingError: Cannot resolve setitem: (int64 x 1)[0] = int64\n</code></pre>\n\n<p>due to the line: <code>x = resize_np_array(x, 20, 0)</code> in <code>test_function</code>.</p>\n\n<p>How should I go about deleting whatever is stored in <code>x</code> so that I can reassign a new array to it?</p>\n"}, {"tags": ["python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 611, "user_id": 7218869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89fa1fa74da5809fcba8db6d49a1717?s=128&d=identicon&r=PG&f=1", "display_name": "py-D", "link": "https://stackoverflow.com/users/7218869/py-d"}, "edited": false, "score": 0, "creation_date": 1523480765, "post_id": 49784218, "comment_id": 86584318, "body": "What difficulties you are facing to create and access bookmarks?"}, {"owner": {"reputation": 4924, "user_id": 4820341, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VLxrT.png?s=128&g=1", "display_name": "floatingpurr", "link": "https://stackoverflow.com/users/4820341/floatingpurr"}, "edited": false, "score": 0, "creation_date": 1523493056, "post_id": 49784218, "comment_id": 86587860, "body": "Melissa, I provided a full answer below, tailored to your case. Hope this helps!"}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 6693443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1157346497649699/picture?type=large", "display_name": "Geancarlo Murillo", "link": "https://stackoverflow.com/users/6693443/geancarlo-murillo"}, "reply_to_user": {"reputation": 2631, "user_id": 7551257, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cb65191d421d20322e2cc7b64daa8531?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa Stewart", "link": "https://stackoverflow.com/users/7551257/melissa-stewart"}, "edited": false, "score": 0, "creation_date": 1523481046, "post_id": 49784418, "comment_id": 86584431, "body": "@MelissaStewart no idea :("}, {"owner": {"reputation": 4924, "user_id": 4820341, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VLxrT.png?s=128&g=1", "display_name": "floatingpurr", "link": "https://stackoverflow.com/users/4820341/floatingpurr"}, "edited": false, "score": 0, "creation_date": 1523493311, "post_id": 49784418, "comment_id": 86587902, "body": "@GeancarloMurillo that&#39;s not a downvote of mine, but I guess someone downvoted because this is just an example, not an answer to the OP question, Besides, it seems a mere copy and paste of the Django <a href=\"https://docs.djangoproject.com/en/2.0/topics/db/models/#extra-fields-on-many-to-many-relationships\" rel=\"nofollow noreferrer\">doc</a>."}], "tags": [], "owner": {"reputation": 498, "user_id": 6693443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1157346497649699/picture?type=large", "display_name": "Geancarlo Murillo", "link": "https://stackoverflow.com/users/6693443/geancarlo-murillo"}, "is_accepted": false, "score": 2, "last_activity_date": 1523480972, "last_edit_date": 1523480972, "creation_date": 1523480535, "answer_id": 49784418, "question_id": 49784218, "link": "https://stackoverflow.com/questions/49784218/django-adding-item-to-many-to-many-relationships/49784418#49784418", "title": "Django adding item to many-to-many relationships", "body": "<p>This is a good example for your problem</p>\n\n<pre><code>from django.db import models\n\nclass Person(models.Model):\n    name = models.CharField(max_length=128)\n\n    def __str__(self):              # __unicode__ on Python 2\n        return self.name\n\nclass Group(models.Model):\n    name = models.CharField(max_length=128)\n    members = models.ManyToManyField(Person, through='Membership')\n\n    def __str__(self):              # __unicode__ on Python 2\n        return self.name\n\nclass Membership(models.Model):\n    person = models.ForeignKey(Person, on_delete=models.CASCADE)\n    group = models.ForeignKey(Group, on_delete=models.CASCADE)\n    date_joined = models.DateField()\n    invite_reason = models.CharField(max_length=64)\n</code></pre>\n\n<p>For this models, if you want to add memberships, you do this:</p>\n\n<pre><code>&gt;&gt;&gt; ringo = Person.objects.create(name=\"Ringo Starr\")\n&gt;&gt;&gt; paul = Person.objects.create(name=\"Paul McCartney\")\n&gt;&gt;&gt; beatles = Group.objects.create(name=\"The Beatles\")\n&gt;&gt;&gt; m1 = Membership(person=ringo, group=beatles,\n...     date_joined=date(1962, 8, 16),\n...     invite_reason=\"Needed a new drummer.\")\n&gt;&gt;&gt; m1.save()\n&gt;&gt;&gt; beatles.members.all()\n&lt;QuerySet [&lt;Person: Ringo Starr&gt;]&gt;\n&gt;&gt;&gt; ringo.group_set.all()\n&lt;QuerySet [&lt;Group: The Beatles&gt;]&gt;\n&gt;&gt;&gt; m2 = Membership.objects.create(person=paul, group=beatles,\n...     date_joined=date(1960, 8, 1),\n...     invite_reason=\"Wanted to form a band.\")\n&gt;&gt;&gt; beatles.members.all()\n&lt;QuerySet [&lt;Person: Ringo Starr&gt;, &lt;Person: Paul McCartney&gt;]&gt;\n</code></pre>\n\n<p>Unlike normal many-to-many fields, you can\u2019t use add(), create(), or set() to create relationships:</p>\n\n<pre><code>&gt;&gt;&gt; # The following statements will not work\n&gt;&gt;&gt; beatles.members.add(john)\n&gt;&gt;&gt; beatles.members.create(name=\"George Harrison\")\n&gt;&gt;&gt; beatles.members.set([john, paul, ringo, george])\n</code></pre>\n\n<p>You can see this better in <a href=\"https://docs.djangoproject.com/en/1.11/topics/db/models/#extra-fields-on-many-to-many-relationships\" rel=\"nofollow noreferrer\">Django Docs</a></p>\n"}, {"comments": [{"owner": {"reputation": 4924, "user_id": 4820341, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VLxrT.png?s=128&g=1", "display_name": "floatingpurr", "link": "https://stackoverflow.com/users/4820341/floatingpurr"}, "edited": false, "score": 0, "creation_date": 1523547372, "post_id": 49786219, "comment_id": 86615941, "body": "@MelissaStewart let me know if it solved your problem. :)"}], "tags": [], "owner": {"reputation": 4924, "user_id": 4820341, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VLxrT.png?s=128&g=1", "display_name": "floatingpurr", "link": "https://stackoverflow.com/users/4820341/floatingpurr"}, "is_accepted": false, "score": 4, "last_activity_date": 1523493509, "last_edit_date": 1523493509, "creation_date": 1523492906, "answer_id": 49786219, "question_id": 49784218, "link": "https://stackoverflow.com/questions/49784218/django-adding-item-to-many-to-many-relationships/49786219#49786219", "title": "Django adding item to many-to-many relationships", "body": "<p>Well, let's start from the beginning. </p>\n\n<p>As you probably know, when you generate M2M rels with Django, you use the <code>ManyToManyField</code>. If you do not care about M2M table details, Django will manage it for you. If you want to specify the intermediary table you can use <code>ManyToManyField.through</code>. Exactly as you did. I'm going to semplify your model for explanation purposes. Something like this:</p>\n\n<pre><code>class User(models.Model):\n    username = models.CharField(null=True, unique=True, max_length=255)\n\nclass Feed(models.Model):\n    headline = models.CharField(max_length=255)\n    reader = models.ManyToManyField(User, through='Bookmark')\n\nclass Bookmark(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE, null=True)\n    feed = models.ForeignKey(Feed, on_delete=models.CASCADE, null=True)\n</code></pre>\n\n<p>Let's start Django interactive shell. I assume you have an empty database.</p>\n\n<pre><code>$ django manage.py shell\n</code></pre>\n\n<p>First of all import your models</p>\n\n<pre><code>&gt;&gt;&gt; from yourAppName.models import * \n</code></pre>\n\n<p>Now, create some data:</p>\n\n<pre><code>&gt;&gt;&gt; from bat.models import *\n&gt;&gt;&gt; u1 = User(username = 'foo')\n&gt;&gt;&gt; u1.save()\n&gt;&gt;&gt; u2 = User(username = 'bar')\n&gt;&gt;&gt; u2.save()\n&gt;&gt;&gt; User.objects.all() # get Users u1 and u2\n&lt;QuerySet [&lt;User: User object&gt;, &lt;User: User object&gt;]&gt;\n&gt;&gt;&gt; f1 = Feed(headline = 'How to use M2M in Django')\n&gt;&gt;&gt; f1.save()\n&gt;&gt;&gt; Feed.objects.all() # get Feed f1\n&lt;QuerySet [&lt;Feed: Feed object&gt;]&gt;\n</code></pre>\n\n<blockquote>\n  <ol>\n  <li>How do I add a bookmark (or rather feed) to the user?</li>\n  </ol>\n</blockquote>\n\n<p>In this case, you cannot use <code>Feed.reader.add(u1)</code>, you have to use the <code>Bookmark</code>'s Manager since you specified that's your intermediary model. </p>\n\n<pre><code>&gt;&gt;&gt; b1 = Bookmark(user=u1, feed = f1) # add Feed f1 to User u1\n&gt;&gt;&gt; b1.save() # save into database\n</code></pre>\n\n<p>We can also add another bookmark:</p>\n\n<pre><code>&gt;&gt;&gt; f2 = Feed(headline = 'Fetching data in Django like a pro!')\n&gt;&gt;&gt; f2.save()\n&gt;&gt;&gt; b2 = Bookmark(user=u1, feed = f2) # add Feed f2 to User u1\n&gt;&gt;&gt; b2.save() # save into database\n</code></pre>\n\n<p>You are done! Now, we can check if everything is fine. </p>\n\n<pre><code>&gt;&gt;&gt; brandNewBookMark = Bookmark.objects.all()[0] # get the first bookmark\n&gt;&gt;&gt; print(brandNewBookMark.user.username) # it's Foo!\nfoo\n&gt;&gt;&gt; print(brandNewBookMark.feed.headline) # Foo subscribed to f1!\nu'How to use M2M in Django'\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>How do I fetch all the feeds the User has bookmarked?</li>\n  </ol>\n</blockquote>\n\n<p>You can simply leverage the <code>Feed.reader</code> field. E.g.,</p>\n\n<pre><code>&gt;&gt;&gt; for f in Feed.objects.filter(reader = u1):\n...     print(f.headline)\n...    \nHow to use M2M in Django\nFetching data in Django like a pro!\n</code></pre>\n\n<p>That's it! Further info <a href=\"https://docs.djangoproject.com/en/2.0/topics/db/examples/many_to_many/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 2631, "user_id": 7551257, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cb65191d421d20322e2cc7b64daa8531?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa Stewart", "link": "https://stackoverflow.com/users/7551257/melissa-stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3495, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1523493509, "creation_date": 1523479691, "last_edit_date": 1523480143, "question_id": 49784218, "link": "https://stackoverflow.com/questions/49784218/django-adding-item-to-many-to-many-relationships", "title": "Django adding item to many-to-many relationships", "body": "<p>I'm new to django thus the question. I've the following Feed object and an User object which have a many-to-many relationship</p>\n\n<pre><code>class Feed(Base):\n    headline = models.CharField(max_length=255)\n    link = models.CharField(max_length=255)\n    summary = models.TextField()\n    reader = models.ManyToManyField(User, through='Bookmark')\n\nclass User(AbstractBaseUser, PermissionsMixin):\n    email = models.EmailField(unique=True, max_length=255)\n    mobile = PhoneNumberField(null=True)\n    username = models.CharField(null=True, unique=True, max_length=255)\n    full_name = models.CharField(max_length=255, blank=True, null=True)\n</code></pre>\n\n<p>The two are related using the Bookmark object.</p>\n\n<pre><code>class Bookmark(Base):\n    user = models.ForeignKey(User, on_delete=models.CASCADE, null=True)\n    feed = models.ForeignKey(Feed, on_delete=models.CASCADE, null=True)\n</code></pre>\n\n<p>My question is,</p>\n\n<ol>\n<li><p>How do I add a bookmark(or rather feed) to the user? </p></li>\n<li><p>How do I fetch all the feeds the User has bookmarked?</p></li>\n</ol>\n\n<p>Any help appreciated.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 1, "creation_date": 1523480049, "post_id": 49784258, "comment_id": 86584007, "body": "Thanks. The thing that confused me when I tried this, was the immediate output that didn&#39;t look like a 2D array. But when I subsequently called <code>a</code>,  it was displayed correctly"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1523480807, "post_id": 49784258, "comment_id": 86584339, "body": "In MATLAB <code>a(a&gt;4)</code> displays a column vector; in <code>numpy</code> <code>a[a&gt;4]</code> is 1d.  Because of the (potentially) ragged nature of boolean indexing, it can&#39;t return a 2d shape."}, {"owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 0, "creation_date": 1523560476, "post_id": 49784258, "comment_id": 86623134, "body": "What do you mean by <code># roughly equal to a = a[a&gt;3] + 1</code> ? It is not exactly the same?"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "edited": false, "score": 1, "creation_date": 1523560765, "post_id": 49784258, "comment_id": 86623275, "body": "@MikhailGenkin Same functionality but in slightly different ways. The in-place version changes the items in-place while the second one creates a new array in the fly and then reassigns it to the array."}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 4, "last_activity_date": 1523479871, "creation_date": 1523479871, "answer_id": 49784258, "question_id": 49784216, "link": "https://stackoverflow.com/questions/49784216/python-fast-subscription-of-the-elements-in-2d-array-that-satisfy-a-condition/49784258#49784258", "title": "Python: fast subscription of the elements in 2D array that satisfy a condition", "body": "<p>If you already know how boolean indexing works then just an in-place addition is all you need to do:</p>\n\n<pre><code>In [6]: a=np.array([[1,2,3],[4,5,6],[7,8,9]])\n\nIn [7]: a[a&gt;3] += 1  # roughly equal to a = a[a&gt;3] + 1\n\nIn [8]: a\nOut[8]: \narray([[ 1,  2,  3],\n       [ 5,  6,  7],\n       [ 8,  9, 10]])\n</code></pre>\n"}], "owner": {"reputation": 2721, "user_id": 4372237, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3XqU1.jpg?s=128&g=1", "display_name": "Mikhail Genkin", "link": "https://stackoverflow.com/users/4372237/mikhail-genkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 49784258, "answer_count": 1, "score": 1, "last_activity_date": 1523479871, "creation_date": 1523479677, "question_id": 49784216, "link": "https://stackoverflow.com/questions/49784216/python-fast-subscription-of-the-elements-in-2d-array-that-satisfy-a-condition", "title": "Python: fast subscription of the elements in 2D array that satisfy a condition", "body": "<p>I am new in Python and my question might be too obvious, but I did not find a sufficiently good answer.</p>\n\n<p>Suppose I have a 2D array <code>a=np.array([[1,2,3],[4,5,6],[7,8,9]])</code>. How can I subscribe those elements that satisfy a condition? Suppose, I want to increase by one those elements of <code>a</code> that are greater than 3. In Matlab, I would do it in 1 line:\n<code>a(a&gt;3)=a(a&gt;3)+1.</code> What about Python?\nThe result should be <code>[[1,2,3],[5,6,7],[8,9,10]]</code>.</p>\n\n<p>I am aware that there are functions that can return the indeces I need, like <code>np.where</code>. I am also aware that there is a way of <a href=\"https://stackoverflow.com/questions/35607818/index-a-2d-numpy-array-with-2-lists-of-indices\">indexing 2D array with two 1D arrays</a>. I was not able to combine those together.</p>\n\n<p>Of course, I am able to do it with for loop. I am interested, is there a convenient Matlab-like way of doing this?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1523482823, "post_id": 49784215, "comment_id": 86585082, "body": "If you call <code>form.save()</code> before the return statement it should work. If it doesn\u2019t, you\u2019ll need to provide more info about how to reproduce the problem."}, {"owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1523487860, "post_id": 49784215, "comment_id": 86586641, "body": "I get this error: <code>No connection could be made because the target machine actively refused it) [11&#47;Apr&#47;2018 19:03:12] &quot;POST &#47;forum&#47;post&#47; HTTP&#47;1.1&quot; 500 226230</code>"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1523489604, "post_id": 49784215, "comment_id": 86587097, "body": "That\u2019s not enough info, you need to show the full traceback. Also your redirect should probably use <code>username=self.request.user.username</code>"}, {"owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1523507488, "post_id": 49784215, "comment_id": 86591070, "body": "@Alasdair I found out why it wasn&#39;t working. It&#39;s very strange, but it was because I&#39;m using an Elasticsearch search engine and Elasticsearch wasn&#39;t running"}], "owner": {"reputation": 2543, "user_id": 2896120, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9792d203fad996eb88bdee0be7190d99?s=128&d=identicon&r=PG&f=1", "display_name": "user2896120", "link": "https://stackoverflow.com/users/2896120/user2896120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523479672, "creation_date": 1523479672, "question_id": 49784215, "link": "https://stackoverflow.com/questions/49784215/how-do-i-save-a-form-with-createview", "title": "How do I save a form with CreateView", "body": "<p>I have a <code>CreateView</code> and inside this <code>CreateView</code> there is a <code>form_valid()</code> function. It gets the user_id and assigns it to the user that's logged in user id. The user is basically creating their own question and user_id is a foreign key. </p>\n\n<pre><code>class QuestionCreate(LoginRequiredMixin, CreateView):\n    model = Questions\n    form_class = CreatePost\n\n    def form_valid(self, form):\n        form.instance.user_id = self.request.user.id\n        return redirect(\"oauth:profile\", username=self.request.user)\n</code></pre>\n\n<p>When I go to the URL of this view, I can see the view and when I try to submit a question it redirects me to the profile. However, the question is not saved in the database. I've tried inserting <code>form.save()</code> below the first line in <code>form_valid</code> and it does get saved in the table correctly, however, I don't get redirected to the profile, instead I get an error that states <code>connection error</code> what am I doing wrong?</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 1022, "user_id": 5863987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7wZz.png?s=128&g=1", "display_name": "NieDzejkob", "link": "https://stackoverflow.com/users/5863987/niedzejkob"}, "edited": false, "score": 0, "creation_date": 1523479981, "post_id": 49784195, "comment_id": 86583978, "body": "I&#39;m not exactly sure what you want to do. Can you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show the problem more clearly?"}, {"owner": {"reputation": 185, "user_id": 8242205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Q3oh.jpg?s=128&g=1", "display_name": "Christopher Bradley", "link": "https://stackoverflow.com/users/8242205/christopher-bradley"}, "reply_to_user": {"reputation": 1022, "user_id": 5863987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7wZz.png?s=128&g=1", "display_name": "NieDzejkob", "link": "https://stackoverflow.com/users/5863987/niedzejkob"}, "edited": false, "score": 0, "creation_date": 1523480875, "post_id": 49784195, "comment_id": 86584367, "body": "Gathered only essential code, lmk if I you need more."}], "answers": [{"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1523484200, "creation_date": 1523484200, "answer_id": 49785060, "question_id": 49784195, "link": "https://stackoverflow.com/questions/49784195/tic-tac-toe-game-using-turtle/49785060#49785060", "title": "Tic Tac Toe Game using Turtle", "body": "<p>This should give you the basic idea, which is compute the minimum and maximum x and y values of each box and store them in <code>BOXES</code>. This makes it very easy to determine if the given <code>x</code> and <code>y</code> coordinates passed to the <code>mouse()</code> callback function are within any of them.</p>\n\n<p>With the multiple boxes in your real code, make sure to apply the new <code>minmax()</code> function to the corners of each one of them.</p>\n\n<pre><code>import turtle\n\n\"\"\" This will be based off 1 box  instead of all 9\"\"\"\npen = turtle.Turtle()\ncorners = []\nBOXES = {}\n\nfor line in range(0, 4):\n    pen.forward(50)\n    pen.left(90)\n    corners.append(pen.pos())\n\ndef minmax(points):\n    \"\"\" Find extreme x and y values in a list of 2-D coordinates. \"\"\"\n    minx, miny, maxx, maxy = points[0][0], points[0][1], points[0][0], points[0][1]\n    for x, y in points[1:]:\n        if x &lt; minx:\n            minx = x\n        if y &lt; minx:\n            miny = y\n        if x &gt; maxx:\n            maxx = x\n        if y &gt; maxy:\n            maxy = y\n    return minx, miny, maxx, maxy\n\n\nBOXES['MIDDLEBOX'] = minmax(corners)\n\nfor i in BOXES:\n    print(i, BOXES[i])\n\"\"\"\n    POINTS FROM LEFT TO RIGHT\n    (1) - TOP LEFT CORNER\n    (2) - BOTTOM LEFT CORNER\n    (3) - BOTTOM RIGHT CORNER\n    (4) - TOP RIGHT CORNER\n\"\"\"\n\ndef mouse(x, y):\n    \"\"\" Return key of box if x, y are within global BOXES\n        or None if it's not.\n    \"\"\"\n    for key in BOXES:\n        minx, miny, maxx, maxy = BOXES[key]\n        if (minx &lt;= x &lt;= maxx) and (miny &lt;= y &lt;= maxy):\n            print(key)\n            return key\n    print('None')\n    return None  # Not found.\n\nturtle.onscreenclick(mouse)\nturtle.mainloop()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 185, "user_id": 8242205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Q3oh.jpg?s=128&g=1", "display_name": "Christopher Bradley", "link": "https://stackoverflow.com/users/8242205/christopher-bradley"}, "edited": false, "score": 0, "creation_date": 1523831517, "post_id": 49785949, "comment_id": 86709755, "body": "I used your code plus below, since I need both things and came up with this. But It will only pick up the Diagonal Boxes."}, {"owner": {"reputation": 185, "user_id": 8242205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Q3oh.jpg?s=128&g=1", "display_name": "Christopher Bradley", "link": "https://stackoverflow.com/users/8242205/christopher-bradley"}, "edited": false, "score": 0, "creation_date": 1523991730, "post_id": 49785949, "comment_id": 86787307, "body": "Its working for some reason it the Screen object wont initialize the main loop so I had to import turtle and use it. otherwise thank you."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 2, "last_activity_date": 1523490471, "creation_date": 1523490471, "answer_id": 49785949, "question_id": 49784195, "link": "https://stackoverflow.com/questions/49784195/tic-tac-toe-game-using-turtle/49785949#49785949", "title": "Tic Tac Toe Game using Turtle", "body": "<p>I believe you're making the problem harder than necessary by not taking full advantage of Python turtle.  Instead of trying to find a square within the board when clicking on the screen, make the squares of the board themselves turtles that respond to mouse clicks.  Then there's nothing to figure out, position-wise.</p>\n\n<p>Here's a reimplementation that draws a board, allows you to click on it, alternately sets the clicked sections to 'X' or 'O':</p>\n\n<pre><code>from turtle import Turtle, Screen\n\nCURSOR_SIZE = 20\nSQUARE_SIZE = 50\nFONT_SIZE = 40\nFONT = ('Arial', FONT_SIZE, 'bold')\n\nclass TicTacToe:\n    def __init__(self):\n        self.board = [['?'] * 3 for i in range(3)] # so you can interrogate squares later\n        self.turn = 'X'\n\n    def drawBoard(self):\n        background = Turtle('square')\n        background.shapesize(SQUARE_SIZE * 3 / CURSOR_SIZE)\n        background.color('black')\n        background.stamp()\n        background.hideturtle()\n\n        for j in range(3):\n            for i in range(3):\n                box = Turtle('square', visible=False)\n                box.shapesize(SQUARE_SIZE / CURSOR_SIZE)\n                box.color('white')\n                box.penup()\n                box.goto(i * (SQUARE_SIZE + 2) - (SQUARE_SIZE + 2), j * (SQUARE_SIZE + 2) - (SQUARE_SIZE + 2))\n                box.showturtle()\n                box.stamp()  # blank out background behind turtle (for later)\n\n                self.board[j][i] = box\n                box.onclick(lambda x, y, box=box, i=i, j=j: self.mouse(box, i, j))\n\n    def mouse(self, box, i, j):\n        box.onclick(None)  # disable further moves on this square\n\n        # replace square/turtle with (written) X or O\n        box.hideturtle()\n        box.color('black')\n        box.sety(box.ycor() - FONT_SIZE / 2)\n        box.write(self.turn, align='center', font=FONT)\n\n        self.board[j][i] = self.turn  # record move\n\n        self.turn = ['X', 'O'][self.turn == 'X']  # switch turns\n\nscreen = Screen()\n\ngame = TicTacToe()\n\ngame.drawBoard()\n\nscreen.mainloop()\n</code></pre>\n\n<p>You can use <code>board</code> to do scoring, or implement a smart computer player, or whatever you desire.</p>\n\n<p><a href=\"https://i.stack.imgur.com/LNFkB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LNFkB.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 185, "user_id": 8242205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Q3oh.jpg?s=128&g=1", "display_name": "Christopher Bradley", "link": "https://stackoverflow.com/users/8242205/christopher-bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5852, "favorite_count": 0, "accepted_answer_id": 49785949, "answer_count": 2, "score": 0, "last_activity_date": 1523831566, "creation_date": 1523479543, "last_edit_date": 1523831566, "question_id": 49784195, "link": "https://stackoverflow.com/questions/49784195/tic-tac-toe-game-using-turtle", "title": "Tic Tac Toe Game using Turtle", "body": "<p>This is for an extra credit assignment in Python. I've finished most until the last part where I have to determine the area of the tictactoe box chosen. </p>\n\n<p>Edit: Update, I can only detect diagonal boxes, used from combining both code reply's below.\nI can detect those 3 boxes but the rest still show as none and most logic is used with loop so I can understand where I am going wrong.</p>\n\n<pre><code>import turtle\nfrom time import sleep\nimport sys\n\nCURSOR_SIZE = 20\nSQUARE_SIZE = 99\nFONT_SIZE = 40\nFONT = ('Arial', FONT_SIZE, 'bold')\nBOXES = {}\n# TRACK BOX\npen = turtle.Turtle()\npen.penup()\n\ndef mouse(x, y):\n    print('|--------------X={0} Y={1}--------------|'.format(x, y))\n    for key in BOXES:\n        minx, miny, maxx, maxy = BOXES[key]\n        print(key, BOXES[key])\n        if (minx &lt;= x &lt;= maxx) and (miny &lt;= y &lt;= maxy):\n            print(\"Found\", key)\n            return key\n    print('None')\n    return None  # Not found.\n\nclass TicTacToe:\n    global BOXES\n    def __init__(self):\n        # CREATES 2D LIST FOR INTERROGATION\n        self.board = [['?'] * 3 for i in range(3)]\n\n    def minmax(self, points):\n        \"\"\" Find extreme x and y values in a list of 2-D coordinates. \"\"\"\n        minx, miny, maxx, maxy = points[0][0], points[0][1], points[0][0], points[0][1]\n        for x, y in points[1:]:\n            if x &lt; minx:\n                minx = x\n            if y &lt; minx:\n                miny = y\n            if x &gt; maxx:\n                maxx = x\n            if y &gt; maxy:\n                maxy = y\n        return minx, miny, maxx, maxy\n\n\n    def drawBoard(self):\n        ##############################################\n        turtle.shape('square')\n        turtle.shapesize(SQUARE_SIZE * 3 / CURSOR_SIZE)\n        turtle.color('black')\n        turtle.stamp()\n        turtle.hideturtle()\n        ##############################################\n        for j in range(3):\n            for i in range(3):\n                # CREATES SHAPE AND STORES IN PLACEHOLDER\n                turtle.shape('square')\n                box = turtle.shape('square')\n                # CREATES SHAPE SIZE AND STORES IN PLACEHOLDER\n                turtle.shapesize(SQUARE_SIZE / CURSOR_SIZE)\n                boxsize = turtle.shapesize()\n                # CREATES SHAPE COLOR\n                turtle.color('white')\n                turtle.penup()\n                # CREATES SHAPE POS AND STORES IN PLACEHOLDER\n                turtle.goto(i * (SQUARE_SIZE + 2) - (SQUARE_SIZE + 2), j * (SQUARE_SIZE + 2) - (SQUARE_SIZE + 2))\n                boxpos = turtle.pos()\n\n                mypos = []\n\n                pen.goto(boxpos[0]-50,boxpos[1]+50)\n                ##############################################\n                for line in range(0, 4):\n                    pen.forward(SQUARE_SIZE)\n                    pen.right(90)\n                    mypos.append(pen.pos())\n                turtle.showturtle()\n                turtle.stamp()\n                ##############################################\n                a = mypos[0]\n                b = mypos[1]\n                c = mypos[2]\n                d = mypos[3]\n                self.board[j][i] = [a, b, c, d]\n        ##############################################\n        BOXES['BOX01'] = self.minmax(self.board[0][0])\n        BOXES['BOX02'] = self.minmax(self.board[0][1])\n        BOXES['BOX03'] = self.minmax(self.board[0][2])\n        ##############################################\n        BOXES['BOX11'] = self.minmax(self.board[1][0])\n        BOXES['BOX12'] = self.minmax(self.board[1][1])\n        BOXES['BOX13'] = self.minmax(self.board[1][2])\n        ##############################################\n        BOXES['BOX21'] = self.minmax(self.board[2][0])\n        BOXES['BOX22'] = self.minmax(self.board[2][1])\n        BOXES['BOX23'] = self.minmax(self.board[2][2])\n        ##############################################\n        turtle.onscreenclick(mouse)\n\nturtle.setup(800, 600)\nwn = turtle.Screen()\nz = TicTacToe()\nz.drawBoard()\nturtle.mainloop()\n</code></pre>\n"}, {"tags": ["python", "bash", "python-2.7", "subprocess", "netcat"], "comments": [{"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 1, "creation_date": 1523479562, "post_id": 49784102, "comment_id": 86583795, "body": "Since you want to programmatically interact with a server via a socket, you probably don&#39;t want netcat at all. Just <a href=\"https://stackoverflow.com/q/68774/478288\">open the socket in Python</a> and send/recv as needed."}, {"owner": {"reputation": 281, "user_id": 5525128, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-err0Rv9lxmk/AAAAAAAAAAI/AAAAAAAAABU/9Jm4Ot_2MAU/photo.jpg?sz=128", "display_name": "adam", "link": "https://stackoverflow.com/users/5525128/adam"}, "reply_to_user": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 1, "creation_date": 1523539441, "post_id": 49784102, "comment_id": 86610001, "body": "@chrisaycock Managing to get it working using sockets, thanks for your help!"}], "owner": {"reputation": 281, "user_id": 5525128, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-err0Rv9lxmk/AAAAAAAAAAI/AAAAAAAAABU/9Jm4Ot_2MAU/photo.jpg?sz=128", "display_name": "adam", "link": "https://stackoverflow.com/users/5525128/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 725, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523479898, "creation_date": 1523479037, "last_edit_date": 1523479898, "question_id": 49784102, "link": "https://stackoverflow.com/questions/49784102/process-output-of-netcat-and-return-back-using-python", "title": "Process output of netcat and return back using python", "body": "<p>I run netcat to listen to a server in a bash shell:</p>\n\n<pre><code>nc domain.com 1234\n</code></pre>\n\n<p>The server outputs three numbers; I need to perform arithmetic on them and send the result back to the server.</p>\n\n<p>I have this code:</p>\n\n<pre><code>#!/usr/bin/env python\nimport subprocess\n\nnccommand = \"nc domain.com 1234 &gt; ncoutput.txt\"\nsubprocess.Popen(nccommand, shell=True)\n\nwith open(\"ncoutput.txt\") as f:\n    lines = f.readlines()\nlines = [x.strip() for x in lines]\nlines = [int(x) for x in lines]\n\nresult = (lines[0]*lines[1])/lines[2]\n\n*command to input result into the netcat stream goes here*\n</code></pre>\n\n<p><code>ncouput.txt</code> isn't created until the netcat command is closed, which is problem because I need to have it open to stream the calculation result</p>\n\n<p>Also, I'm not sure how to input a string into the command line whilst the netcat stream is still open. Should I just do <code>subprocess.Popen(numinput, shell=True)</code>?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1523479618, "last_edit_date": 1523479618, "creation_date": 1523479113, "answer_id": 49784115, "question_id": 49784079, "link": "https://stackoverflow.com/questions/49784079/how-to-iterate-2-dataframes-and-fill-a-column-in-python/49784115#49784115", "title": "How to iterate 2 DataFrames and fill a column in Python", "body": "<p>Seems like you need <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge_asof.html\" rel=\"nofollow noreferrer\"><code>merge_asof</code></a></p>\n\n<pre><code>#df1=df1.reset_index()\n#df2=df2.reset_index()\npd.merge_asof(df1,df2,left_on='index',right_on='N').drop(['C','N'],1)\nOut[143]: \n   index  A    Name\n0      3  a     Tom\n1      4  b     Tom\n2      6  c    Jack\n3      7  d    Jack\n4      9  e    Rose\n5     10  f    Rose\n6     12  g  Marrie\n7     13  h  Marrie\n8     15  i    Lucy\n9     16  j    Lucy\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 9632698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248f131d796844629bc654384d17d51c?s=128&d=identicon&r=PG&f=1", "display_name": "FunkyMore", "link": "https://stackoverflow.com/users/9632698/funkymore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 49784115, "answer_count": 1, "score": 1, "last_activity_date": 1523479618, "creation_date": 1523478896, "last_edit_date": 1523479243, "question_id": 49784079, "link": "https://stackoverflow.com/questions/49784079/how-to-iterate-2-dataframes-and-fill-a-column-in-python", "title": "How to iterate 2 DataFrames and fill a column in Python", "body": "<p>I have 2 data frames for example:</p>\n\n<p>df1:</p>\n\n<pre><code>index  A    C\n   3   a  NaN\n   4   b  NaN\n   6   c  NaN\n   7   d  NaN\n   9   e  NaN\n  10   f  NaN\n  12   g  NaN\n  13   h  NaN\n  15   i  NaN\n  16   j  NaN\n</code></pre>\n\n<p>df2(N as index):</p>\n\n<pre><code>N    Name\n2     Tom\n5    Jack\n8    Rose\n11  Marrie\n14    Lucy\n</code></pre>\n\n<p>I would like to compare the index values of these two dfs and fill column 'C' in <code>df1</code> for Name as below:</p>\n\n<pre><code>   A  B   C\n   3  a  Tom\n   4  b  Tom\n   6  c  Jack\n   7  d  Jack\n   9  e  Rose\n  10  f  Rose\n  12  g  Marrie\n  13  h  Marrie\n  15  i  Lucy\n  16  j  Lucy\n</code></pre>\n"}, {"tags": ["python", "pyspark", "spark-dataframe"], "answers": [{"comments": [{"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1524247451, "post_id": 49784120, "comment_id": 86911379, "body": "You should use <code>isinstance(x, int)</code> rather than <code>type(x) == int</code>."}], "tags": [], "owner": {"reputation": 382, "user_id": 6323618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33620c3d15641e54a30f8fafe364c7df?s=128&d=identicon&r=PG&f=1", "display_name": "kkcheng", "link": "https://stackoverflow.com/users/6323618/kkcheng"}, "is_accepted": false, "score": -3, "last_activity_date": 1523479149, "creation_date": 1523479149, "answer_id": 49784120, "question_id": 49784063, "link": "https://stackoverflow.com/questions/49784063/spark-data-frames-check-if-column-is-of-type-integer/49784120#49784120", "title": "Spark Data Frames - Check if column is of type integer", "body": "<p>Try:</p>\n\n<pre><code>if type(x) == int:\n</code></pre>\n\n<p>type(x) doesn't return 'integers', they should return int for integers.</p>\n"}, {"tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 2, "last_activity_date": 1523488952, "creation_date": 1523488952, "answer_id": 49785777, "question_id": 49784063, "link": "https://stackoverflow.com/questions/49784063/spark-data-frames-check-if-column-is-of-type-integer/49785777#49785777", "title": "Spark Data Frames - Check if column is of type integer", "body": "<p>You are iterating over the names of your columns so <code>type(x)</code> will never equal \"integer\" (it's always a string).</p>\n\n<p>You need to use <a href=\"http://spark.apache.org/docs/2.1.0/api/python/pyspark.sql.html#pyspark.sql.DataFrame.dtypes\" rel=\"nofollow noreferrer\"><code>pyspark.sql.DataFrame.dtypes</code></a></p>\n\n<pre><code>for x, t in df.dtypes:\n    if t==\"int\":\n        print(\"{col} is integer type\".format(col=x))\n</code></pre>\n\n<p>It can also be useful to look at the schema using <code>df.printSchema()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 8092720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78255246fa95680130b49787e3a7d41?s=128&d=identicon&r=PG&f=1", "display_name": "Eddmik", "link": "https://stackoverflow.com/users/8092720/eddmik"}, "is_accepted": false, "score": 1, "last_activity_date": 1558596690, "creation_date": 1558596690, "answer_id": 56270166, "question_id": 49784063, "link": "https://stackoverflow.com/questions/49784063/spark-data-frames-check-if-column-is-of-type-integer/56270166#56270166", "title": "Spark Data Frames - Check if column is of type integer", "body": "<p>You can try:</p>\n\n<pre><code>dict(df.dtypes)['column name'] == 'int'\n</code></pre>\n\n<p><code>df.dtypes</code> returns list of tuples and the easiest way to get the type as string for each column is to convert it to dict.</p>\n"}], "owner": {"reputation": 2296, "user_id": 493829, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/hgECH.jpg?s=128&g=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/493829/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6336, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1558596690, "creation_date": 1523478821, "last_edit_date": 1523489024, "question_id": 49784063, "link": "https://stackoverflow.com/questions/49784063/spark-data-frames-check-if-column-is-of-type-integer", "title": "Spark Data Frames - Check if column is of type integer", "body": "<p>I am trying to figure out what data type my column in a spark data frame is and manipulate the column based on that dedeuction.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>import pyspark\nfrom pyspark.sql import SparkSession\nspark = SparkSession.builder.appName('MyApp').getOrCreate()\ndf = spark.read.csv('Path To csv File',inferSchema=True,header=True)\n\nfor x in df.columns:\n    if type(x) == 'integer':\n    print(x+\": inside if loop\")\n</code></pre>\n\n<p>The  <code>print(x+\": inside if loop\")</code> statement never seems to get executed but I am sure there are several columns that are integer data type.\nWhat am I missing here? </p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-cloudformation"], "comments": [{"owner": {"reputation": 33116, "user_id": 4782, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/850aa09e891970d0d3c126146dd23cb6?s=128&d=identicon&r=PG", "display_name": "chris", "link": "https://stackoverflow.com/users/4782/chris"}, "edited": false, "score": 0, "creation_date": 1523481339, "post_id": 49784028, "comment_id": 86584519, "body": "That is not cloudformation. Perhaps terraform?"}, {"owner": {"reputation": 513, "user_id": 6015827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46ff56fda71f402143a7035406fa33a?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/6015827/raj"}, "reply_to_user": {"reputation": 33116, "user_id": 4782, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/850aa09e891970d0d3c126146dd23cb6?s=128&d=identicon&r=PG", "display_name": "chris", "link": "https://stackoverflow.com/users/4782/chris"}, "edited": false, "score": 0, "creation_date": 1523486601, "post_id": 49784028, "comment_id": 86586284, "body": "@chris : Yes kind of. I will refer this .py template in a .yaml file where I pass all the variable data. Then run that .yaml file for the stack creation using cloudformation.  This .py file is converted from CloudFront_S3.template located at: <a href=\"http://aws.amazon.com/cloudformation/aws-cloudformation-templates/\" rel=\"nofollow noreferrer\">aws.amazon.com/cloudformation/aws-cloudformation-templates</a>"}], "answers": [{"tags": [], "owner": {"reputation": 513, "user_id": 6015827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46ff56fda71f402143a7035406fa33a?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/6015827/raj"}, "is_accepted": true, "score": 1, "last_activity_date": 1523627088, "creation_date": 1523627088, "answer_id": 49818486, "question_id": 49784028, "link": "https://stackoverflow.com/questions/49784028/troposphere-template-for-cloudfront-using-s3-website-origin/49818486#49818486", "title": "Troposphere template for Cloudfront using S3 website origin", "body": "<p>Here is the solution that worked for me:</p>\n\n<pre><code>from troposphere.cloudfront import S3Origin, CustomOrigin\n</code></pre>\n\n<p>And changed the code to:</p>\n\n<pre><code>Origins=[Origin(Id=\"Origin 1\", DomainName=Ref(s3dnsname),\n                            CustomOriginConfig=CustomOrigin(\n                                HTTPPort=80,\n                                HTTPSPort=443,\n                                OriginProtocolPolicy=\"http-only\"\n                            ))],\n</code></pre>\n\n<p>I am using this example: <a href=\"https://github.com/cloudtools/troposphere/blob/master/examples/CloudFront_S3.py\" rel=\"nofollow noreferrer\">https://github.com/cloudtools/troposphere/blob/master/examples/CloudFront_S3.py</a></p>\n\n<p>Hope this helps anyone facing the same issue.</p>\n"}], "owner": {"reputation": 513, "user_id": 6015827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46ff56fda71f402143a7035406fa33a?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/6015827/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 49818486, "answer_count": 1, "score": 1, "last_activity_date": 1523627132, "creation_date": 1523478694, "last_edit_date": 1523627132, "question_id": 49784028, "link": "https://stackoverflow.com/questions/49784028/troposphere-template-for-cloudfront-using-s3-website-origin", "title": "Troposphere template for Cloudfront using S3 website origin", "body": "<p>I am trying to automate the deployment of a static website. I have a static website (angular/javascript/html) sitting in a bucket, and need to use the AWS Cloudfront CDN.</p>\n\n<pre><code>   s3dnsname = self.template.add_parameter(Parameter(\n        \"S3DNSName\",\n        Description=\"The DNS name of an existing S3 bucket to use as the \"\n                    \"Cloudfront distribution origin\",\n        Type=\"String\",\n    ))\n\n    myDistribution = self.template.add_resource(Distribution(\n        \"myDistribution\",\n        DistributionConfig=DistributionConfig(\n            Origins=[Origin(Id=\"Origin 1\", DomainName=Ref(s3dnsname),\n                            S3OriginConfig=S3Origin())],\n            DefaultCacheBehavior=DefaultCacheBehavior(\n                TargetOriginId=\"Origin 1\",\n                ForwardedValues=ForwardedValues(\n                    QueryString=False\n                ),\n                ViewerProtocolPolicy=\"allow-all\"),\n            Enabled=True,\n            HttpVersion='http2'\n\n        )\n    ))\n</code></pre>\n\n<p>This is my code and I am getting an error \"The parameter Origin DomainName does not refer to a valid S3 bucket.\"</p>\n\n<p>I looked into several articles/blogs on this and they all point to adding the following:</p>\n\n<pre><code>custom_origin_config { \n    origin_protocol_policy = \"http-only\" \n    http_port              = 80 \n    https_port             = 443 \n    origin_ssl_protocols   = [\"TLSv1.2\", \"TLSv1.1\", \"TLSv1\"] \n} \n</code></pre>\n\n<p>Can anyone please point me to where I need to add this part?</p>\n\n<p>Update:\nI tried to replace S3OriginConfig with CustomOriginConfig below like this:</p>\n\n<pre><code>   myDistribution = self.template.add_resource(Distribution(\n        \"myDistribution\",\n        DistributionConfig=DistributionConfig(\n            Origins=[Origin(\n                Id=\"Origin 1\",\n                DomainName=Ref(s3dnsname),\n                CustomOriginConfig=CustomOriginConfig(\n                    OriginProtocolPolicy=\"http-only\",\n                    HTTPPort=80,\n                    HTTPSPort=443))],\n            DefaultCacheBehavior=DefaultCacheBehavior(\n                TargetOriginId=\"Origin 1\",\n                ForwardedValues=ForwardedValues(\n                    QueryString=False\n                ),\n                ViewerProtocolPolicy=\"allow-all\"),\n            Enabled=True,\n            HttpVersion='http2'\n        )\n    ))\n</code></pre>\n\n<p>After running this, I get an error \"NameError: global name 'CustomOriginConfig' is not defined\"</p>\n\n<p>I am missing something here which I am not able to identify.</p>\n"}, {"tags": ["python", "numpy", "vtk"], "comments": [{"owner": {"reputation": 2508, "user_id": 1416930, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/PPDmr.jpg?s=128&g=1", "display_name": "Mathieu Westphal", "link": "https://stackoverflow.com/users/1416930/mathieu-westphal"}, "edited": false, "score": 0, "creation_date": 1523526560, "post_id": 49783981, "comment_id": 86600983, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45395269/numpy-uint8-t-arrays-to-vtkimagedata\">Numpy uint8_t arrays to vtkImageData</a>"}, {"owner": {"reputation": 143, "user_id": 8717986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDP4c.jpg?s=128&g=1", "display_name": "deep_jandu", "link": "https://stackoverflow.com/users/8717986/deep-jandu"}, "reply_to_user": {"reputation": 2508, "user_id": 1416930, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/PPDmr.jpg?s=128&g=1", "display_name": "Mathieu Westphal", "link": "https://stackoverflow.com/users/1416930/mathieu-westphal"}, "edited": false, "score": 0, "creation_date": 1523543465, "post_id": 49783981, "comment_id": 86613040, "body": "Yup I had tried that. That solution does not work. e.g. the function <code>SetSpacing</code> takes a tuple of size 3 instead to 2. Also, it gives an error <code>3D texture maps currently are not supported!</code>. So, this is not a duplicate."}, {"owner": {"reputation": 685, "user_id": 1310934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f2e0ec444c5147b6df51f973123db6?s=128&d=identicon&r=PG", "display_name": "g.stevo", "link": "https://stackoverflow.com/users/1310934/g-stevo"}, "edited": false, "score": 0, "creation_date": 1524098708, "post_id": 49783981, "comment_id": 86837904, "body": "what is the numpy format? if it is .npy - load it as a numpy object and then use ``vtk.util.numpy_support.numpy_to_vtk"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 10631346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DG84O.jpg?s=128&g=1", "display_name": "Bane Sullivan", "link": "https://stackoverflow.com/users/10631346/bane-sullivan"}, "is_accepted": false, "score": 1, "last_activity_date": 1557808890, "last_edit_date": 1557808890, "creation_date": 1548143971, "answer_id": 54303637, "question_id": 49783981, "link": "https://stackoverflow.com/questions/49783981/using-3-channel-image-in-numpy-as-texture-image-in-vtk/54303637#54303637", "title": "Using 3 channel image in numpy as texture image in vtk", "body": "<p>Assuming your image is <code>nx</code> by <code>ny</code> by 3 in a NumPy array, you could create a <code>vtkImageData</code> object and pass that to a <code>vtkTexture</code> object (this is would be the same workflow you have, just skipping the reader):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import vtk\nfrom vtk.util.numpy_support import numpy_to_vtk\nimport numpy as np\n\n# Assuming you have a 3D NumPy array as `image`:\nimage = np.random.randn(2048, 1024, 3)\n\ngrid = vtk.vtkImageData()\ngrid.SetDimensions(image.shape[1], image.shape[0], 1)\nvtkarr = numpy_to_vtk(np.flip(image.swapaxes(0,1), axis=1).reshape((-1, 3), order='F'))\nvtkarr.SetName('Image')\ngrid.GetPointData().AddArray(vtkarr)\ngrid.GetPointData().SetActiveScalars('Image')\n\nvtex = vtk.vtkTexture()\nvtex.SetInputDataObject(grid)\nvtex.Update()\n</code></pre>\n\n<p><strong><em>Note:</strong> there are some convenience methods coming to <a href=\"https://github.com/pyvista/pyvista/\" rel=\"nofollow noreferrer\">PyVista</a> to make this even easier</em>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pyvista\ntexture = pyvista.numpy_to_texture(image)\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 8717986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDP4c.jpg?s=128&g=1", "display_name": "deep_jandu", "link": "https://stackoverflow.com/users/8717986/deep-jandu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557808890, "creation_date": 1523478490, "last_edit_date": 1523543522, "question_id": 49783981, "link": "https://stackoverflow.com/questions/49783981/using-3-channel-image-in-numpy-as-texture-image-in-vtk", "title": "Using 3 channel image in numpy as texture image in vtk", "body": "<p>I have a RGB image in numpy format that I want to using for texture mapping using vtk. I usually load the texture image using <code>PNGReader</code> as should below --</p>\n\n<pre><code>png_reader = vtk.vtkPNGReader()\npng_reader.SetFileName(png_file) \ntexture.SetInputConnection(png_reader.GetOutputPort())\n</code></pre>\n\n<p>I know vtk provides some sort of python integration but I wasn't sure how to do it. </p>\n\n<p>EDIT -- I looked at <a href=\"https://stackoverflow.com/questions/45395269/numpy-uint8-t-arrays-to-vtkimagedata\">this</a>, but that solution doesn't seem to work.</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1523479837, "post_id": 49783961, "comment_id": 86583924, "body": "And where is the <i>wav</i> header?"}], "owner": {"reputation": 11, "user_id": 9632717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "mikey jan", "link": "https://stackoverflow.com/users/9632717/mikey-jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1523483055, "creation_date": 1523478426, "last_edit_date": 1523483055, "question_id": 49783961, "link": "https://stackoverflow.com/questions/49783961/convert-image-to-wav-file-and-vice-versa-python", "title": "convert image to .wav file and vice versa python", "body": "<p>i have tried doing conversion by getting each pixel value, then converting it into byte format and then writing it as .wav file. However the output file does not play. What am I doing wrong?</p>\n\n<pre><code>        import cv2\n    import numpy\n\n    from tkinter.filedialog import askopenfilename\n\n    file_path = askopenfilename(initialdir=\"C:/Users/Batman/Documents/Programming/tkinter/\",\n                               filetypes =((\"jpg\", \"*.jpg\"),(\"All Files\",\"*.*\")),\n                               title = \"Choose a file.\"\n                               )\n\n\n    img=cv2.imread(file_path,1)\n    cv2.imshow('original',img)\n\n    height, width, channels = img.shape\n\n    s = b''\n\n    for x in range(height):\n        for y in range(width):\n            for z in range(3): \n                int_num=int(img[x][y][z])\n\n                s = s+ bytes([int_num])\n\n    file = open(\"sbytes.wav\", 'wb')\n    file.write(s)\n    file.close()\n\n    cv2.waitKey(0)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 4, "creation_date": 1523478443, "post_id": 49783902, "comment_id": 86583282, "body": "Well, why not try it?"}], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1523478779, "post_id": 49783960, "comment_id": 86583451, "body": "&quot;in order&quot; is too vague. It&#39;s not left to right, which is how I&#39;d normally understand your statement."}, {"owner": {"reputation": 90, "user_id": 4342068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f46a161f1c407ec91f8b5eeaafdc48a?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4342068/rafael"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1523478822, "post_id": 49783960, "comment_id": 86583461, "body": "Agree, changing it"}], "tags": [], "owner": {"reputation": 90, "user_id": 4342068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f46a161f1c407ec91f8b5eeaafdc48a?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4342068/rafael"}, "is_accepted": false, "score": 3, "last_activity_date": 1523478891, "last_edit_date": 1523478891, "creation_date": 1523478421, "answer_id": 49783960, "question_id": 49783902, "link": "https://stackoverflow.com/questions/49783902/python-ternary-execution-order/49783960#49783960", "title": "Python ternary execution order", "body": "<p>It gets evaluated depending if meets the condition. For example:</p>\n\n<pre><code>condition = True\nprint(2 if condition else 1/0)\n#Output is 2\n\nprint((1/0, 2)[condition])\n#ZeroDivisionError is raised\n</code></pre>\n\n<p>No matter if <code>1/0</code> raise an error, is never evaluated as the condition was True on the evaluation.</p>\n\n<p>Sames happen in the other way:</p>\n\n<pre><code>condition = False\nprint(1/0 if condition else 2)\n#Output is 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "is_accepted": true, "score": 10, "last_activity_date": 1523478457, "creation_date": 1523478457, "answer_id": 49783972, "question_id": 49783902, "link": "https://stackoverflow.com/questions/49783902/python-ternary-execution-order/49783972#49783972", "title": "Python ternary execution order", "body": "<p>The condition is evaluated first, if it is False, <code>a</code> is not evaluated: <a href=\"https://docs.python.org/3/reference/expressions.html#conditional-expressions\" rel=\"noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 611, "user_id": 3754760, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fc091be85b0590682fa92cb22895bc1a?s=128&d=identicon&r=PG&f=1", "display_name": "jj172", "link": "https://stackoverflow.com/users/3754760/jj172"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "closed_date": 1523478534, "accepted_answer_id": 49783972, "answer_count": 2, "score": 3, "last_activity_date": 1523478891, "creation_date": 1523478169, "question_id": 49783902, "link": "https://stackoverflow.com/questions/49783902/python-ternary-execution-order", "closed_reason": "Duplicate", "title": "Python ternary execution order", "body": "<p>In python, if I use a ternary operator:</p>\n\n<pre><code>x = a if &lt;condition&gt; else b\n</code></pre>\n\n<p>Is <code>a</code> executed even if <code>condition</code> is false? Or does <code>condition</code> evaluate first and then goes to either <code>a</code> or <code>b</code> depending on the result?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 1119, "user_id": 5046042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lo5M0.jpg?s=128&g=1", "display_name": "galfisher", "link": "https://stackoverflow.com/users/5046042/galfisher"}, "is_accepted": true, "score": 0, "last_activity_date": 1523478600, "creation_date": 1523478600, "answer_id": 49784007, "question_id": 49783897, "link": "https://stackoverflow.com/questions/49783897/list-and-copy-of-list-what-is-the-difference/49784007#49784007", "title": "List and copy of list (what is the difference?)", "body": "<p>Both will copy the list stored in the <code>animals</code> variable and assign it to <code>pets</code> variable. The copy is by value and not by reference, so changing an item in the list assigned to <code>pets</code> won't change the list assigned to <code>animals</code> and vice-versa</p>\n"}], "owner": {"reputation": 109, "user_id": 8773813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3125cda49214c1aa411cd689cfbcb9?s=128&d=identicon&r=PG", "display_name": "michal w", "link": "https://stackoverflow.com/users/8773813/michal-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1523478751, "accepted_answer_id": 49784007, "answer_count": 1, "score": 3, "last_activity_date": 1523478600, "creation_date": 1523478132, "question_id": 49783897, "link": "https://stackoverflow.com/questions/49783897/list-and-copy-of-list-what-is-the-difference", "closed_reason": "Duplicate", "title": "List and copy of list (what is the difference?)", "body": "<p>This is my first question ever - sorry if bit trivial </p>\n\n<p>I wonder what is the difference (is there any?) between this two methods </p>\n\n<p>Method A</p>\n\n<pre><code>animals = ['cat', 'dog', 'goldfish']  \npets = animals[:] \n\nanimals.sort()\npets.append('donkey')\n\nprint(animals)\nprint(pets)\n</code></pre>\n\n<p>Method B</p>\n\n<pre><code>animals = ['cat', 'dog', 'goldfish']\npets = list(animals)\n\nanimals.sort()\npets.append('donkey')\n\nprint(animals)\nprint(pets)\n</code></pre>\n\n<p>In method A copy of list is created and assigned to new variable (pets)</p>\n\n<p>In method B new list is created and assigned to pets? </p>\n\n<p>(not sure if I'm right)  Do we creating list in method A ? </p>\n"}, {"tags": ["python", "html", "css", "pdf", "pdfkit"], "comments": [{"owner": {"reputation": 5370, "user_id": 592355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2nAdA.jpg?s=128&g=1", "display_name": "xerx593", "link": "https://stackoverflow.com/users/592355/xerx593"}, "edited": false, "score": 1, "creation_date": 1523478386, "post_id": 49783892, "comment_id": 86583251, "body": "check <a href=\"https://stackoverflow.com/questions/16627310/wkhtmltopdf-not-loading-local-css-and-images\">this</a>(, bro) (...pdfkit is a &quot;wkhtmltopdf&quot;-&quot;wrapper&quot;)"}, {"owner": {"reputation": 1849, "user_id": 919480, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/64fd20d892b2c676aa8b93748c08bb35?s=128&d=identicon&r=PG", "display_name": "cogitoergosum", "link": "https://stackoverflow.com/users/919480/cogitoergosum"}, "reply_to_user": {"reputation": 5370, "user_id": 592355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2nAdA.jpg?s=128&g=1", "display_name": "xerx593", "link": "https://stackoverflow.com/users/592355/xerx593"}, "edited": false, "score": 1, "creation_date": 1523502546, "post_id": 49783892, "comment_id": 86589882, "body": "Using <code>src</code> attribute pointing to complete URI (as shown here - <a href=\"https://stackoverflow.com/a/31905972/919480\">stackoverflow.com/a/31905972/919480</a>) helped. Thanks!"}], "owner": {"reputation": 1849, "user_id": 919480, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/64fd20d892b2c676aa8b93748c08bb35?s=128&d=identicon&r=PG", "display_name": "cogitoergosum", "link": "https://stackoverflow.com/users/919480/cogitoergosum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1922, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523514885, "creation_date": 1523478116, "last_edit_date": 1523514885, "question_id": 49783892, "link": "https://stackoverflow.com/questions/49783892/pdfkit-does-not-embed-images-in-pdf", "title": "pdfkit does not embed images in PDF", "body": "<p>I have an HTML file that shows images correctly. However, the PDF generated from this HTML file does not show those images. What am I missing?</p>\n\n<p>My Python code to generate PDF from HTML.</p>\n\n<pre><code>options = {\n        'page-size' : 'A4',\n        'dpi' : 400\n    }\ncss = ['../css/report.css', '../css/w3.css']\npdfkit.from_file(htmlFilePath, pdfFilePath, options=options, css=css)\n</code></pre>\n\n<p>The HTML file (used to generate PDF) has reference to image files as shown here:</p>\n\n<pre><code>&lt;h2 class=\"heading\"&gt;Trends of parameters and set-points&lt;/h2&gt;\n&lt;h3&gt;Trend-1&lt;/h3&gt;\n&lt;div&gt;\n    &lt;img src=\"../png/PT-1.png\"&gt;&lt;/img&gt;\n&lt;/div&gt;\n&lt;h3&gt;Trend-2&lt;/h3&gt;\n&lt;div&gt;\n    &lt;img src=\"../png/PT-2.png\"&gt;&lt;/img&gt;\n&lt;/div&gt;\n&lt;h3&gt;Trend-3&lt;/h3&gt;\n&lt;div&gt;\n    &lt;img src=\"../png/PT-3.png\"&gt;&lt;/img&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 1765, "user_id": 2896125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50e2389d60321e363a90fa4d314870a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2896125/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1523485807, "creation_date": 1523485807, "answer_id": 49785315, "question_id": 49783884, "link": "https://stackoverflow.com/questions/49783884/pressing-on-button-then-download-csv-file/49785315#49785315", "title": "pressing on button then download csv file", "body": "<p>Changed <code>WebDriverWait</code> to <code>find_elements_by_class_name</code> to find all the buttons that contain <code>class</code> \"highcharts-button\".</p>\n\n<pre><code>import time\nfrom selenium import webdriver\n\npath = \"/webdrivers/chromedriver\"\n\ndriver = webdriver.Chrome(executable_path=path)\ndriver.maximize_window()\ndriver.get('https://user.sensogram.com/signin')   #driver.get(url)-- We get url by using driver which we initialy load.\nprint (\"Opened sensogram\")\ntime.sleep(5)    #Just wait for sometime.\nemail = driver.find_element_by_xpath(\"//input[@name='usernameSignIn']\")#Find email textaera.\nemail.send_keys('username')  #Send email to this text area.\npassword = driver.find_element_by_xpath(\"//input[@name='passwordSignIn']\")\n#Find password textarea.\npassword.send_keys('password')   #send password to the password field.\nbutton_to_login = driver.find_element_by_xpath(\"//button[@ng-click='submitted=true']\")  #Find login button.\nbutton_to_login.click()      #Click on login button.\ntime.sleep(2)\n\ndriver.find_element_by_xpath(\"//*[@class='link_title' and contains (text(),'Custom Graph')]\").click()\n\n# get all buttons and find one that has 'Download CSV' text\n\nbtns = driver.find_elements_by_class_name(\"highcharts-button\")\nfor btn in btns:\n    if btn.is_displayed() and btn.text == 'Download CSV':\n        btn.click()\n\ntime.sleep(4)\ndriver.close()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9461359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ecedd2660aab161142760cce6ea01?s=128&d=identicon&r=PG&f=1", "display_name": "Moosa", "link": "https://stackoverflow.com/users/9461359/moosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 49785315, "answer_count": 1, "score": 1, "last_activity_date": 1523485807, "creation_date": 1523478077, "question_id": 49783884, "link": "https://stackoverflow.com/questions/49783884/pressing-on-button-then-download-csv-file", "title": "pressing on button then download csv file", "body": "<p>I am writing a code where i need to login into a website and after i login i press on a certain button then download the csv file. The code worked with me when I pressed on another button. However I need to press on that certain button where it includes all the data i need in the csv file and it doesn't click or give me any errors. anyways here is my code:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom time import sleep\nfrom selenium.common.exceptions import TimeoutException\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support.ui import Select\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import NoSuchElementException\nimport time\nimport re\nchromedriver = \"/webdrivers/chromedriver\"\ndriver = webdriver.Chrome(chromedriver)\ndriver.maximize_window()\ndriver.get('https://user.sensogram.com/signin')   #driver.get(url)-- We get \nurl by using driver which we initialy load.    \nprint (\"Opened sensogram\")\ntime.sleep(5)    #Just wait for sometime.\nemail = driver.find_element_by_xpath(\"//input[@name='usernameSignIn']\")#Find \nemail textaera.\nemail.send_keys('*****')  #Send email to this text area. \npassword = driver.find_element_by_xpath(\"//input[@name='passwordSignIn']\") \n#Find password textarea.\npassword.send_keys('*****')   #send password to the password field.\nbutton_to_login = driver.find_element_by_xpath(\"//button[@ng- \nclick='submitted=true']\")  #Find login button.\nbutton_to_login.click()      #Click on login button.\ntime.sleep(5)\nCustom_Graph_Button = driver.find_element_by_xpath(\"//*[@class='link_title' \nand contains (text(),'Custom Graph')]\").click()\ntime.sleep(5)\nwhile True:\nif EC.element_to_be_clickable:\n    try:\n        csv_file_button = WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.XPATH,\"//*[name()='tspan' and .='Download CSV']\"))).click() #find the download button by Xpath of the HTML then click on Download CSV button\n        print(\"\\n Button is Clicked\")\n        time.sleep(5) #download every 1 minute\n        #print(csv_file_button)\n    except TimeoutException:\n        pass\n        time.sleep(10)\n    continue\nelse:\n    pass \n</code></pre>\n\n<p>The button that includes all the data I need is the custom graph button I was able to click on it but what I am stuck on now is pressing the CSV file button. Can someone help please!!! and am new in python</p>\n"}, {"tags": ["python", "xml", "parsing"], "comments": [{"owner": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "edited": false, "score": 0, "creation_date": 1523478376, "post_id": 49783799, "comment_id": 86583242, "body": "You could flatten doc...[&#39;title-group&#39;][&#39;article-title&#39;] (see <a href=\"https://stackoverflow.com/questions/39135433/how-to-flatten-nested-python-dictionaries\" title=\"how to flatten nested python dictionaries\">stackoverflow.com/questions/39135433/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6935850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69c66cbe9feb1d4b7e46835cfcd55b6?s=128&d=identicon&r=PG&f=1", "display_name": "amol", "link": "https://stackoverflow.com/users/6935850/amol"}, "edited": false, "score": 0, "creation_date": 1523599967, "post_id": 49784894, "comment_id": 86635285, "body": "I figured it out with regex techniques.. Thanks :)"}], "tags": [], "owner": {"reputation": 1112, "user_id": 266371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lM3vo.png?s=128&g=1", "display_name": "TextGeek", "link": "https://stackoverflow.com/users/266371/textgeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1523483090, "creation_date": 1523483090, "answer_id": 49784894, "question_id": 49783799, "link": "https://stackoverflow.com/questions/49783799/how-to-get-all-text-inside-xml-tags/49784894#49784894", "title": "How to get all text inside XML tags", "body": "<p>xmltodict will likely be hard to use for your data. PMC journal articles are definitely <em>not</em> what the authors could have had in mind. Putting any but the most trivial XML into xmltodict is pounding a round peg into a square hole -- you might succeed, but it won't be pretty. I explain this further below under \"tldr\"....</p>\n\n<p>Instead, I suggest you use a library whose data model fits your data better, such as xml.dom, minidom, or recent versions of BeautifulSoup. In many such libraries you just load the document with one call and then call some function like innerText() to get all the text content of it. You could even just load the document into a browser and call the Javascript innerText() function to get what you want. If the tool you choose doesn't provide innertext() already, it is:</p>\n\n<pre><code>def innertext(node):\n    t = \"\"\n    for curNode in node.childNodes:\n        if (isinstance(curNode, Text)):\n            t += curNode.nodeValue\n        elif (isinstance(curNode, Element)):\n            t += curNode.innerText\n    return(t)\n</code></pre>\n\n<p>You could tweak that to put spaces between the text nodes, depending on your data.</p>\n\n<p>Hope that helps.</p>\n\n<p>==tldr==</p>\n\n<p>xmltodict makes an admirable attempt at making XML \"as simple as possible\"; but IMHO it errs in making it <em>simpler</em> than possible.</p>\n\n<p>xmltodict basically works by turning every element into a dict, with its children as the dict items, keyed by their element names. But in many cases (such as yours), XML data isn't very much like that at all. For example, an element can have many children with the same name, but a dict can't. </p>\n\n<p>So xmltodict has to do something special. It turns adjacent instances of the same element type into an array (without the element type). Here's an example excerpted from <a href=\"https://github.com/martinblech/xmltodict\" rel=\"nofollow noreferrer\">https://github.com/martinblech/xmltodict</a>):</p>\n\n<pre><code>&lt;and&gt;\n  &lt;many&gt;elements&lt;/many&gt;\n  &lt;many&gt;more elements&lt;/many&gt;\n&lt;/and&gt;\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>\"and\": {\n    \"many\": [\n        \"elements\", \n        \"more elements\"\n    ]\n}, \n</code></pre>\n\n<p>First off, this means that xmltodict always loses the ordering information about child elements unless they are of the same type. So a section that contains a mix of paragraphs, lists, blockquotes, and so on, will either fail to load in xmltodict, or have all the scattered instances of each kind of child gathered together, completely losing their order.</p>\n\n<p>The xmltodict approach also introduces frequent special-cases -- for example, you can't just get a list of all the children, or use len() to find out how many there are, etc. etc., because at every step you have to check whether you're really at a child element, or at a list of them.</p>\n\n<p>Looking at xmltodict's own examples, you'll see that they mostly consist of walking down the tree by element names, but every now and then there's an integer subscript -- that's for the cases where these arrays are needed. But unless the data is unusually simple (which yours isn't), you won't know where that is. For example, if one DIV in an HTML document happens to contain only one P, the code to access the P needs one fewer subscript than with another DIV that happens to have more than one P. </p>\n\n<p>It seems to me undesirable that the <em>number of subscripts</em> to get to something  depends on how many siblings it has, and their types.</p>\n\n<p>Alas, the structure still isn't good enough. Since child elements may have their own child elements, just making them strings in that extra array won't be enough. Sometimes they'll have to be dicts again, with some of their items in turn perhaps being arrays, some of whose items may be dicts, and so on. Writing the correct traversal algorithm to gather up the text is significantly harder than the DOM one shown above.</p>\n\n<p>To be completely fair, there <em>is</em> some XML in which the order doesn't matter logically -- for example, you could export a SQL table into an XML file, using a container element for each record with a child element for each field. The order of fields is not information, so if you load such XML into xmltodict, losing the order doesn't matter. Likewise if you serialized Python data that was <em>already</em> just a dict. But those are very specialized edge cases. xmltodict might be an excellent choice for a case like that -- but the articles you're looking at are very far from that.</p>\n"}], "owner": {"reputation": 1, "user_id": 6935850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69c66cbe9feb1d4b7e46835cfcd55b6?s=128&d=identicon&r=PG&f=1", "display_name": "amol", "link": "https://stackoverflow.com/users/6935850/amol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 872, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523483090, "creation_date": 1523477763, "question_id": 49783799, "link": "https://stackoverflow.com/questions/49783799/how-to-get-all-text-inside-xml-tags", "title": "How to get all text inside XML tags", "body": "<p><a href=\"https://i.stack.imgur.com/JB4xH.jpg\" rel=\"nofollow noreferrer\">xml file snapshot</a></p>\n\n<p>From above .xml file I am extracting article-id, article-title, abstract and keywords. For normal text inside single tag getting correct results. But text with multiple tags such as:</p>\n\n<pre><code> &lt;title-group&gt;\n   &lt;article-title&gt;\n      Acetylcholinesterase-Inhibiting Activity of Pyrrole Derivatives from a Novel Marine Gliding Bacterium,\n     &lt;italic&gt;Rapidithrix thailandica&lt;/italic&gt;\n   &lt;/article-title&gt;\n &lt;/title-group&gt;\n .\n .\n same is for abstract...\n</code></pre>\n\n<p>I got output as: </p>\n\n<pre><code>  OrderedDict([(u'italic**', u'Rapidithrix thailandica'), ('#text', u'Acetylcholines terase-Inhibiting Activity of Pyrrole Derivatives from a Novel Marine Gliding Ba cterium,')])\n</code></pre>\n\n<p>code has considered tag  as a text and the o/p generated is also not in the sequence.</p>\n\n<p>How to simply extract text from such input document as <strong><em>\"Acetylcholinesterase-Inhibiting Activity of Pyrrole Derivatives from a Novel Marine Gliding Bacterium, Rapidithrix thailandica\".</em></strong></p>\n\n<p>I am using below python code to perform above task..</p>\n\n<pre><code>import xmltodict\nimport os\nfrom os.path import basename\nimport re\n\n\nwith open('2630847.nxml') as fd:\n    doc = xmltodict.parse(fd.read())\n    pmc_id = doc['article']['front']['article-meta']['article-id'][1]['#text']\n\n    article_title = doc['article']['front']['article-meta']['title-group']['article-title']\n\n    y = doc['article']['front']['article-meta']['abstract']\n    y = y.items()[0]\n    article_abstract = [g.encode('ascii','ignore') for g in y][1]\n\n    z = doc['article']['front']['article-meta']['kwd-group']['kwd']\n    zz = [g.encode('ascii','ignore') for g in z]\n    article_keywords = \",\".join(zz).replace(\",\",\" \")\n\n\n    fout = open(str(pmc_id)+\".txt\",\"w\")\n    fout.write(str(pmc_id)+\"\\n\"+str(article_title)+\". \"+str(article_abstract)+\". \"+str(article_keywords))\n</code></pre>\n\n<p>Can somebody please suggest corrections..</p>\n"}, {"tags": ["python", "kubernetes", "openshift"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9108476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0734abb6056a64d0290f9f198379ec28?s=128&d=identicon&r=PG&f=1", "display_name": "gmrli", "link": "https://stackoverflow.com/users/9108476/gmrli"}, "edited": false, "score": 0, "creation_date": 1523480977, "post_id": 49784080, "comment_id": 86584407, "body": "Thanks Radek for the reply. This python module(For E.g, Module c)  is an utility module which is accessed by different python Modules (For E.g, Module A and Module B). Module A and Module B is running in different pods. Cant I run Module C in another different POD ??. Should I package Module C along with Module A and Module B separately??"}], "tags": [], "owner": {"reputation": 15982, "user_id": 3871750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ac2c6d71d9abbc8924947b8da73460?s=128&d=identicon&r=PG", "display_name": "Radek &#39;Goblin&#39; Pieczonka", "link": "https://stackoverflow.com/users/3871750/radek-goblin-pieczonka"}, "is_accepted": false, "score": 0, "last_activity_date": 1523478905, "creation_date": 1523478905, "answer_id": 49784080, "question_id": 49783768, "link": "https://stackoverflow.com/questions/49783768/kubernetes-openshift-for-python/49784080#49784080", "title": "Kubernetes OpenShift for python", "body": "<p>You don't. You deploy something that can run as a process, and as such, has a capability to contact with the external world in some way (ie. listen for requests, connect to message broker, send requests, read/write to db etc.) you do not package and deploy libraries that on their own are inoperable to the cluster.</p>\n"}], "owner": {"reputation": 43, "user_id": 9108476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0734abb6056a64d0290f9f198379ec28?s=128&d=identicon&r=PG&f=1", "display_name": "gmrli", "link": "https://stackoverflow.com/users/9108476/gmrli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523561329, "creation_date": 1523477645, "last_edit_date": 1523561329, "question_id": 49783768, "link": "https://stackoverflow.com/questions/49783768/kubernetes-openshift-for-python", "title": "Kubernetes OpenShift for python", "body": "<p>I am new to openshift, we are trying to deploy a python module in a pod which is accessed by other python code running in different pods. When i was deploying, the pod is running and immediately crash with status <strong>\"Crash Loop Back Off\"</strong>.This python code is an independent module which does not have valid entrypoint. So how to deploy those type of python modules in openshift. Appreciate for any solutions</p>\n"}, {"tags": ["python", "python-2.7", "numpy"], "comments": [{"owner": {"reputation": 437, "user_id": 8959415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae0a12a8d8b00f6a820b9fd04b2dbb77?s=128&d=identicon&r=PG&f=1", "display_name": "Janilson", "link": "https://stackoverflow.com/users/8959415/janilson"}, "edited": false, "score": 0, "creation_date": 1523477922, "post_id": 49783757, "comment_id": 86583001, "body": "If you really need to apply this function to every cell then I believe there&#39;s really no choice other than iterating through everything which is O(n*n)."}, {"owner": {"reputation": 173, "user_id": 4376760, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/100001091446024/picture?type=large", "display_name": "user45437", "link": "https://stackoverflow.com/users/4376760/user45437"}, "reply_to_user": {"reputation": 437, "user_id": 8959415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae0a12a8d8b00f6a820b9fd04b2dbb77?s=128&d=identicon&r=PG&f=1", "display_name": "Janilson", "link": "https://stackoverflow.com/users/8959415/janilson"}, "edited": false, "score": 0, "creation_date": 1523478643, "post_id": 49783757, "comment_id": 86583385, "body": "Or, how can I modify the function so that it can be applied to each cell ?"}, {"owner": {"reputation": 437, "user_id": 8959415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae0a12a8d8b00f6a820b9fd04b2dbb77?s=128&d=identicon&r=PG&f=1", "display_name": "Janilson", "link": "https://stackoverflow.com/users/8959415/janilson"}, "edited": false, "score": 0, "creation_date": 1523479743, "post_id": 49783757, "comment_id": 86583876, "body": "If you are applying your function to each and every cell you&#39;d need to call it r * c times which would result in O(n*n) regardless of the way the function is defined. What you can do is think if there are cells that you don&#39;t need to apply this function to, and then think of some way of looking up only the cells you need. But to get help in that regard you&#39;d need to show more of you code or explain what your program does so people can know what you&#39;re using <code>sum</code> for."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1523481031, "post_id": 49783757, "comment_id": 86584424, "body": "Try to come up with a calc that works with blocks of elements, for example <code>U[1:,:]</code>, or <code>U[:-1, 1:]</code>."}, {"owner": {"reputation": 173, "user_id": 4376760, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/100001091446024/picture?type=large", "display_name": "user45437", "link": "https://stackoverflow.com/users/4376760/user45437"}, "edited": false, "score": 0, "creation_date": 1523482226, "post_id": 49783757, "comment_id": 86584847, "body": "I think , that won&#39;t work. I am trying to solve a maze and so, for each cell I am trying to find the best move using value iteration. For value iteration , I need to find Utility for each cell. For each cell, I have 4 actions : Move Left, Move Right , Move Up and Move Down. The above code just shows one such function. But in actual problem, my utility will be max of values of each action. Hence for each cell I will have to apply 4 such functions as shown above  One such calculation for a matrix will be a single iteration. I need to iterate over new matrix again.This process is repeated."}], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 8959415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae0a12a8d8b00f6a820b9fd04b2dbb77?s=128&d=identicon&r=PG&f=1", "display_name": "Janilson", "link": "https://stackoverflow.com/users/8959415/janilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1523487294, "creation_date": 1523487294, "answer_id": 49785521, "question_id": 49783757, "link": "https://stackoverflow.com/questions/49783757/for-a-2d-matrix-what-is-the-faster-way-to-apply-a-function-to-each-cell-of-the/49785521#49785521", "title": "For a 2D Matrix, what is the faster way to apply a function to each cell of the matrix in python?", "body": "<p>I really don't think you need to apply any function to every cell to solve a maze. If the maze is built based on a 2d matrix, that means that the object(person, rat, whatever) that is trying to find the exit can only move in four directions: up, down, left and right.</p>\n\n<p>One of those directions is the one you came from so you can rule that one out, which leaves 3 possible moves. What you need to do then to solve the maze is check which of the 3 possible directions doesn't have a wall and follow that direction. Once you find a bifurcation, store this position and pick one of the 2 possible paths at random. If the path you choose leads to a dead end you go back to the bifurcation you came from and go the other way.</p>\n\n<p>So a single recursive fucntion that when applied to one cell checks the 3 adjacent cells you did not come from should be enough to solve a 2d maze. I really don't see why you'd ever need to apply a function to every position of a maze.</p>\n"}], "owner": {"reputation": 173, "user_id": 4376760, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/100001091446024/picture?type=large", "display_name": "user45437", "link": "https://stackoverflow.com/users/4376760/user45437"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1523487294, "creation_date": 1523477585, "last_edit_date": 1523479870, "question_id": 49783757, "link": "https://stackoverflow.com/questions/49783757/for-a-2d-matrix-what-is-the-faster-way-to-apply-a-function-to-each-cell-of-the", "title": "For a 2D Matrix, what is the faster way to apply a function to each cell of the matrix in python?", "body": "<p>I have the following function which I need to apply to each cell in a 2D matrix. My matrix can have upto 1 million cells. What is the faster way to calculate this? \nThe function is as follows :</p>\n\n<pre><code>def walkRight(r,c,walls):\n    global Pwalk\n    global rows\n    global columns\n    sum = 0\n    if c == (columns-1) or [r,c+1] in walls:\n        sum = sum + Pwalk * U[r][c]\n    else:\n        sum = sum + Pwalk * U[r][c+1]\n    if r == 0 or [r-1,c] in walls:\n        sum = sum + 0.5*(1-Pwalk) * U[r][c]\n    else:\n        sum = sum + 0.5*(1-Pwalk) *  U[r-1][c]\n    if r == rows-1 or [r+1,c] in walls:\n        sum = sum + 0.5*(1-Pwalk) * U[r][c]\n    else:\n        sum = sum + 0.5*(1-Pwalk) * U[r+1][c]\n    return sum\n</code></pre>\n"}, {"tags": ["python", "unix", "pipe", "stdout"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 5, "creation_date": 1523477704, "post_id": 49783691, "comment_id": 86582885, "body": "You&#39;ve got <i>two</i> disparate pipes (i.e. parent and child have different ones). Do the <code>pipe</code> <i>before</i> the <code>fork</code> to have a single shared pipe"}, {"owner": {"reputation": 83, "user_id": 2488202, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/95f177f1a133bae087e7679dc0cbf622?s=128&d=identicon&r=PG", "display_name": "curious", "link": "https://stackoverflow.com/users/2488202/curious"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1523477989, "post_id": 49783691, "comment_id": 86583033, "body": "Doh! Well this is embarrassing..."}, {"owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 0, "creation_date": 1523832142, "post_id": 49783691, "comment_id": 86709901, "body": "any reasons why you&#39;re using low level API like <code>os.fork</code> instead of higher level APIs like <code>subprocess</code> or <code>multiprocessing</code>?"}], "owner": {"reputation": 83, "user_id": 2488202, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/95f177f1a133bae087e7679dc0cbf622?s=128&d=identicon&r=PG", "display_name": "curious", "link": "https://stackoverflow.com/users/2488202/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523477440, "creation_date": 1523477341, "last_edit_date": 1523477440, "question_id": 49783691, "link": "https://stackoverflow.com/questions/49783691/redirecting-stdout-of-a-child-process", "title": "Redirecting stdout of a child process", "body": "<p>I am trying to create a program which forks a child process and then monitors its stdout. My understanding is that this should be achievable by creating a set of pipe fds and then setting the write end of the pipe to STDOUT in the child using dup. The code below attempts to do this</p>\n\n<pre><code>import os\nimport sys\nimport time\npid = os.fork()\npr, pw = os.pipe()\n\nif pid == 0: #Inside child\n    os.close(pr)\n    os.dup2(pw, sys.stdout.fileno())\n    print(\"Inside the child\")\n    exit(1)\n\nprint(\"Inside parent, waiting for child output..\")\nresult = os.read(pr, 1024)\nprint(result)\n</code></pre>\n\n<p>But yields the 'broken pipe' error below.</p>\n\n<pre><code>BrokenPipeError: [Errno 32] Broken pipe\nException ignored in: &lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;\nBrokenPipeError: [Errno 32] Broken pipe\nTraceback (most recent call last):\nFile \"/tmp/master.py\", line 14, in &lt;module&gt;\n  result = os.read(pr, 1024)\n</code></pre>\n\n<p>I have looked at a few examples but can't seem to figure out what I am doing wrong. The error suggests that the read end of the pipe is prematurely closed but this does not appear to be the case.</p>\n"}, {"tags": ["python", "powershell", "automation", "jira", "jira-rest-api"], "comments": [{"owner": {"reputation": 1119, "user_id": 5046042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lo5M0.jpg?s=128&g=1", "display_name": "galfisher", "link": "https://stackoverflow.com/users/5046042/galfisher"}, "edited": false, "score": 0, "creation_date": 1523477498, "post_id": 49783688, "comment_id": 86582796, "body": "What is the question?"}, {"owner": {"reputation": 1, "user_id": 9632241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b9e9c18508812999f534c19a0d9d4f?s=128&d=identicon&r=PG&f=1", "display_name": "sleep_eq_false", "link": "https://stackoverflow.com/users/9632241/sleep-eq-false"}, "reply_to_user": {"reputation": 1119, "user_id": 5046042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lo5M0.jpg?s=128&g=1", "display_name": "galfisher", "link": "https://stackoverflow.com/users/5046042/galfisher"}, "edited": false, "score": 1, "creation_date": 1523477595, "post_id": 49783688, "comment_id": 86582843, "body": "Haha jumped the gun and did not make it clear enough.. need a cup of coffee will edit..trying to create users through jira tickets"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9632241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b9e9c18508812999f534c19a0d9d4f?s=128&d=identicon&r=PG&f=1", "display_name": "sleep_eq_false", "link": "https://stackoverflow.com/users/9632241/sleep-eq-false"}, "edited": false, "score": 0, "creation_date": 1523478579, "post_id": 49783859, "comment_id": 86583353, "body": "I did see this, wondering if the post function needs to be called like running a task from a server with ldap that runs everyday to bring all the tickets with new users to be created on the domain.."}], "tags": [], "owner": {"reputation": 29, "user_id": 4967532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TqPS5.png?s=128&g=1", "display_name": "Asator", "link": "https://stackoverflow.com/users/4967532/asator"}, "is_accepted": false, "score": 0, "last_activity_date": 1523477965, "creation_date": 1523477965, "answer_id": 49783859, "question_id": 49783688, "link": "https://stackoverflow.com/questions/49783688/automated-user-creation-through-jira-tickets/49783859#49783859", "title": "Automated user creation through Jira tickets", "body": "<p>Second answer in this thread looks like it answers your question:</p>\n\n<p><a href=\"https://community.atlassian.com/t5/Jira-questions/Active-directory-user-creation-via-Jira-service-desk/qaq-p/579025\" rel=\"nofollow noreferrer\">https://community.atlassian.com/t5/Jira-questions/Active-directory-user-creation-via-Jira-service-desk/qaq-p/579025</a></p>\n\n<p><em>\"...in plugin Active Directory Attr Sync, there is post function \"Create user in Active Directory/Ldap Server\"\"</em></p>\n"}], "owner": {"reputation": 1, "user_id": 9632241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b9e9c18508812999f534c19a0d9d4f?s=128&d=identicon&r=PG&f=1", "display_name": "sleep_eq_false", "link": "https://stackoverflow.com/users/9632241/sleep-eq-false"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1523488616, "creation_date": 1523477333, "last_edit_date": 1523488616, "question_id": 49783688, "link": "https://stackoverflow.com/questions/49783688/automated-user-creation-through-jira-tickets", "title": "Automated user creation through Jira tickets", "body": "<p>Wondering if this has been done before tried searching around and have yet to see it.</p>\n\n<p>The workflow would be once someone inputs a new user account Jira ticket it will pull the information and sync to AD with all the details - <strong>username, department, description, location.</strong></p>\n\n<p>I believe this can be achieved through the REST API Jira has, but not positive. I also found that this might be able to do the trick in automation process (<a href=\"https://marketplace.atlassian.com/plugins/com.intenso.jira.plugins.ad-integration-manager/server/overview\" rel=\"nofollow noreferrer\">https://marketplace.atlassian.com/plugins/com.intenso.jira.plugins.ad-integration-manager/server/overview</a>) but have yet to deploy it to my staging environment.</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 1, "creation_date": 1523477682, "post_id": 49783682, "comment_id": 86582875, "body": "If you just want 3 columns then change the 4 to a 3? The code you posted works as intended."}, {"owner": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "reply_to_user": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1523486435, "post_id": 49783682, "comment_id": 86586235, "body": "I&#39;m having some issues when I zoom the graphic, so I changed the number of columns and rows to test it, but didn&#39;t work."}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1523542837, "post_id": 49783682, "comment_id": 86612518, "body": "<i>How</i> did it not work? Did you use the code from my answer below?"}, {"owner": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "reply_to_user": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1523546825, "post_id": 49783682, "comment_id": 86615587, "body": "Your code is working, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "edited": false, "score": 0, "creation_date": 1523546803, "post_id": 49783891, "comment_id": 86615566, "body": "Thank you, this code is working fine. How can I resize these plots?"}, {"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "reply_to_user": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "edited": false, "score": 0, "creation_date": 1523547420, "post_id": 49783891, "comment_id": 86615968, "body": "You can use the zoom feature in the lower right corner of the figure window to zoom in on any of the plots manually. If you are intending to change the x and y axis limits, then that can be done inside of the for loop as you create each of the subplots. If I have answered your question, please feel free to click the green check mark to accept my answer, thanks!"}], "tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": true, "score": 2, "last_activity_date": 1523478115, "creation_date": 1523478115, "answer_id": 49783891, "question_id": 49783682, "link": "https://stackoverflow.com/questions/49783682/how-to-plot-multiple-scatter-plots-in-the-same-window-with-matplotlib/49783891#49783891", "title": "How to plot multiple scatter plots in the same window with matplotlib?", "body": "<p>The following creates two <code>numpy</code> arrays and plots a figure with 15 subplots, arranged in 5 rows and 3 columns. Note that you can dynamically assign your <code>x</code> and <code>y</code> variables inside of the <code>for</code> loop as well, especially if you would like to loop through a set of data while creating each individual subplot:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.linspace(1,10,10)\ny = np.linspace(1,10,10)\n\nfig = plt.figure(1)\n\ncolumns = 3\nrows = 5\n\nfor i in range(1, columns*rows+1):\n    fig.add_subplot(rows, columns, i)\n    plt.scatter(x, y)\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4338, "favorite_count": 0, "accepted_answer_id": 49783891, "answer_count": 1, "score": 1, "last_activity_date": 1523478115, "creation_date": 1523477312, "question_id": 49783682, "link": "https://stackoverflow.com/questions/49783682/how-to-plot-multiple-scatter-plots-in-the-same-window-with-matplotlib", "title": "How to plot multiple scatter plots in the same window with matplotlib?", "body": "<p>I need to plot 15 scatter plots (5 rows and 3 columns) in the same window, using matplotlib. I've already found a code to solve a problem similar to this, but i can't adapt it to my problem. I think it is easy to do, but I'm having difficult with this. Can someone help me?</p>\n\n<p>This is the code I'm trying to reuse:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nw=10\nh=10\nfig=plt.figure(figsize=(8, 8))\ncolumns = 4\nrows = 5\nfor i in range(1, columns*rows +1):\n    img = np.random.randint(10, size=(h,w))\n    fig.add_subplot(rows, columns, i)\n    plt.imshow(img)\nplt.show()\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "postgresql", "pandas", "dataframe", "merge"], "comments": [{"owner": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "edited": false, "score": 0, "creation_date": 1523477372, "post_id": 49783669, "comment_id": 86582729, "body": "Please show your code."}, {"owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "reply_to_user": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "edited": false, "score": 0, "creation_date": 1523477473, "post_id": 49783669, "comment_id": 86582788, "body": "Figured that was superfluous since I showed the example and description, but I can also show my current process in code! One moment"}], "answers": [{"comments": [{"owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "edited": false, "score": 0, "creation_date": 1523625941, "post_id": 49783915, "comment_id": 86650664, "body": "I get syntax errors for a few parts of this. I&#39;m also not seeing &quot;to_psql_df&quot; as a command in pandas"}, {"owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "reply_to_user": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "edited": false, "score": 1, "creation_date": 1523627450, "post_id": 49783915, "comment_id": 86651770, "body": "Sorry, that was leftover from a longer version of the same answer. I&#39;ve edited so it should work now. Also, if you know they&#39;re the same record due to the index, you can just leave out the <code>on</code> argument in the join."}, {"owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "edited": false, "score": 0, "creation_date": 1523629547, "post_id": 49783915, "comment_id": 86653325, "body": "thank you, but my example was a trimmed down version. In actuality, I have much more than 2 rows and 2 columns. I need to check every column for it&#39;s matching cell in the other dataframe"}, {"owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "reply_to_user": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "edited": false, "score": 0, "creation_date": 1523642470, "post_id": 49783915, "comment_id": 86661062, "body": "@singmotor So you&#39;d have another <i>n</i> number of A/B columns?  If that&#39;s the case, you can extract the second line of my first section into a function that checks whether a <i>x</i> column is null and fills it in with <i>y</i> column&#39;s value."}, {"owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "edited": false, "score": 0, "creation_date": 1523646168, "post_id": 49783915, "comment_id": 86662910, "body": "I have n columns a-z, and m rows 1-n."}], "tags": [], "owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "is_accepted": false, "score": 1, "last_activity_date": 1523642548, "last_edit_date": 1523642548, "creation_date": 1523478211, "answer_id": 49783915, "question_id": 49783669, "link": "https://stackoverflow.com/questions/49783669/fastest-way-to-update-table-nulls-in-postgresql-from-dataframe/49783915#49783915", "title": "Fastest way to update table nulls in postgresql from dataframe", "body": "<p>IIUC, you can merge the two databases but maintain a record of what records come from each. Then you can check if your A column is empty and fill in the B column with the B from df2.</p>\n\n<pre><code>outdf = df1.join(df2, on=columns, how=\"outer\", rsuffix='_df2', lsuffix='_df1')\noutdf['B'] = outdf.apply(lambda x: x['B_df2'] if pd.isnull(x['A']), axis=1)\n</code></pre>\n\n<p><strong>Edit</strong>: you'd want to filter back down to different rows.</p>\n\n<pre><code>outdf = outdf.loc[:, [columns with _df1 suffix]]\noutdf.columns = [i.replace('_df1', '') for i in columns]\noutdf = outdf.sort_values(by='B')\noutdf = outdf.drop_duplicates([columns you're not filling in], keep='first')\n</code></pre>\n"}], "owner": {"reputation": 2910, "user_id": 2278676, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/169dbb83a1fdfd2cbd1d4efae32912d2?s=128&d=identicon&r=PG", "display_name": "singmotor", "link": "https://stackoverflow.com/users/2278676/singmotor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523642548, "creation_date": 1523477260, "last_edit_date": 1523480079, "question_id": 49783669, "link": "https://stackoverflow.com/questions/49783669/fastest-way-to-update-table-nulls-in-postgresql-from-dataframe", "title": "Fastest way to update table nulls in postgresql from dataframe", "body": "<p>I have a pandas dataframe and matching postgresql table, where every cell in both is either null or a timestamp.\nFor each cell in the table where the cell value equals null, and the corresponding dataframe cell value is a timestamp, I want to update the table cell value. What's the fastest way to do this?</p>\n\n<p>Currently I'm pulling in the whole table into a dataframe, comparing the two dataframes in python (cell by cell), entering those values into a 3rd dataframe (call it DFC), and then destroying the old table and building a new table from DFC. This seems inefficient.</p>\n\n<p>Example:  </p>\n\n<pre><code>**Data Frame**   **Postgres Table**\n     A    B           A    B\n1   NaN   5      1   NaN  NaN\n2    8   NaN     2    7   NaN\n\n\n\n**Goal State Postgres Table**\n     A    B\n1   NaN   5\n2    7   NaN\n</code></pre>\n\n<p>Current Code:</p>\n\n<pre><code>import pandas as pd\nfrom pandas import DataFrame\n\nd = {'A': ['None', 8], 'B': [5, 'None']}\ndf = pd.DataFrame(data=d)\nout = {'A': ['None', 'None'], 'B': ['None', 'None']}\noutdf = pd.DataFrame(data=out)\ntbl = pd.read_sql_query('select * from \"exampletable\"',con=engine)\nfor i, row in df.iterrows():\n    for j in ['A', 'B']:\n        if df.at[i, j] != 'None' and tbl.at[i, j] == 'None':\n            outdf.at[i, j] = df.at[i, j]\n        else:\n            outdf.at[i, j] = tbl.at[i, j]\ndf.to_sql('exampletable', engine, if_exists='replace')\nprint(outdf.to_string())\n</code></pre>\n"}, {"tags": ["python", "excel", "search", "multiple-columns", "python-3.6"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9632629, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212044293247120/picture?type=large", "display_name": "Ariel Cruz", "link": "https://stackoverflow.com/users/9632629/ariel-cruz"}, "edited": false, "score": 0, "creation_date": 1523495464, "post_id": 49783874, "comment_id": 86588333, "body": "thanks Dric for the info! In the code that confused you I tried to have it search for the driver name that the user input in sheet1 and find a match. As for the driver_name variable, I will look to define that earlier."}], "tags": [], "owner": {"reputation": 2977, "user_id": 3780976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd03a6382250ef22f350f1614714c703?s=128&d=identicon&r=PG&f=1", "display_name": "Dric512", "link": "https://stackoverflow.com/users/3780976/dric512"}, "is_accepted": false, "score": 0, "last_activity_date": 1523478033, "creation_date": 1523478033, "answer_id": 49783874, "question_id": 49783622, "link": "https://stackoverflow.com/questions/49783622/search-a-specific-column-in-excel-using-python/49783874#49783874", "title": "search a specific column in excel using python", "body": "<p>I am not sure of what you mean with:</p>\n\n<pre><code>for driver in sheet_1:\n    if driver in sheet_1 == True:\n</code></pre>\n\n<p>You are using the same variable for the loop as from the function.</p>\n\n<p><code>sheet_1</code> is also a panda DataFrame. The for loop iterates on the rows. </p>\n\n<p><code>driver_name</code> has not been defined (it is defined too late).</p>\n\n<p>When you call <code>replace</code>, it returns a new dataframe, you may want to add <code>inplace</code> parameter to directly modify the dataframe (Otherwise it returns a copy). But anyway it does not modify the excel file.</p>\n"}], "owner": {"reputation": 1, "user_id": 9632629, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212044293247120/picture?type=large", "display_name": "Ariel Cruz", "link": "https://stackoverflow.com/users/9632629/ariel-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523478033, "creation_date": 1523477085, "question_id": 49783622, "link": "https://stackoverflow.com/questions/49783622/search-a-specific-column-in-excel-using-python", "title": "search a specific column in excel using python", "body": "<p>I am new to coding and wanted to automate some aspects of my job for efficiency. I am writing code using python 3.6 to read an excel file (xlsx). Specifically I want it to search a specific sheet (1st sheet) and a specific column (\"Current Driver\") for a specific string \"driver_name) which the user inputs. Sorry if my code is really bad. This is what I have so far:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\n\nfile_directory = input(\"Please enter file location (directory):  \")\nfile_name = input(\"Please enter file name:  \")\nfile_location = (file_directory + \"\\\\\" + file_name)\nuser_action = input(\"What you would like to do: \" \"Example Actions: Add \nDriver, Remove Driver, Add Vehicle, Remove Vehicle\")\nprint (file_location)\n\ndef remove_driver(driver):\n    file = pd.ExcelFile(file_location)\n    sheet_1 = pd.read_excel(file, sheet_name = 0)\n    print(sheet_1)\n    for driver in sheet_1:\n        if driver in sheet_1 == True:\n            print (\"Found Driver\")\n            sheet_1.replace(driver_name, \"None\")\n        else:\n            print (\"Driver not found\")\n\nif user_action == \"Remove Driver\" or \"remove driver\":\n    driver_name = input(\"enter driver's name: \")\n    remove_driver(driver_name)\n</code></pre>\n\n<p>I placed prints in the code to see what my code was doing. You can ignore those. Any help would be greatly appreciated. </p>\n"}, {"tags": ["python", "for-loop", "zip"], "comments": [{"owner": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 0, "creation_date": 1523477057, "post_id": 49783594, "comment_id": 86582559, "body": "self-proclaimed experts usually claim they know more than they do"}], "answers": [{"tags": [], "owner": {"reputation": 2977, "user_id": 3780976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd03a6382250ef22f350f1614714c703?s=128&d=identicon&r=PG&f=1", "display_name": "Dric512", "link": "https://stackoverflow.com/users/3780976/dric512"}, "is_accepted": true, "score": 6, "last_activity_date": 1523477382, "creation_date": 1523477382, "answer_id": 49783707, "question_id": 49783594, "link": "https://stackoverflow.com/questions/49783594/for-loop-and-zip-in-python/49783707#49783707", "title": "For loop and zip in python", "body": "<p>Q1: <code>zip</code> is used to merge 2 lists together. It returns the first element of each list, then 2nd element of each list, etc. This is a trick to consider the two lists as key and data to create a dictionary.</p>\n\n<p>Q2: this is a dictionary (hash), using a method called \"dict comprehension\". It creates the dictionary shown as the output. If assigned to a variable <code>d</code>, <code>d['a'] = 10</code>, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 460, "user_id": 7401701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncvy0.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/7401701/freddy"}, "is_accepted": false, "score": 4, "last_activity_date": 1523477518, "creation_date": 1523477518, "answer_id": 49783740, "question_id": 49783594, "link": "https://stackoverflow.com/questions/49783594/for-loop-and-zip-in-python/49783740#49783740", "title": "For loop and zip in python", "body": "<p><strong>zip</strong> allows you to iterate two lists at the same time, so, for example, the following code</p>\n\n<pre><code>letters = ['a', 'b', 'c']\nnumbers = [1, 2, 3]\n\nfor letter, number in zip(letters, numbers):\n    print(f'{letter} -&gt; {number}')\n</code></pre>\n\n<p>gives you as output</p>\n\n<pre><code>a -&gt; 1\nb -&gt; 2\nc -&gt; 3\n</code></pre>\n\n<p>when you iterate with zip, you generate two vars, corresponding to the current value of each loop.</p>\n"}, {"tags": [], "owner": {"reputation": 3730, "user_id": 5235392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9cbc8664398c9a01be28d08579b86a?s=128&d=identicon&r=PG&f=1", "display_name": "shahaf", "link": "https://stackoverflow.com/users/5235392/shahaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1523477526, "creation_date": 1523477526, "answer_id": 49783742, "question_id": 49783594, "link": "https://stackoverflow.com/questions/49783594/for-loop-and-zip-in-python/49783742#49783742", "title": "For loop and zip in python", "body": "<p>just print the line you don't understand to make it clearer...</p>\n\n<p>first we define 2 arrays </p>\n\n<pre><code>Class_numbers=np.array(['a','b','c'])\n['a','b','c']\n\nstudents_per_class=np.array([10,20,30])\n[10,20,30]\n</code></pre>\n\n<p>zip just add them together like</p>\n\n<pre><code>[('a', 10), ('b', 20), ('c', 30)]\n</code></pre>\n\n<p>now we iterate on each element with x and y and create a <code>dict</code> object (hash map) <code>{ key : value}</code></p>\n\n<pre><code>{'a': 10, 'c': 30, 'b': 20}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 12675732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e3ddfadbc40dbf1801994cca170350?s=128&d=identicon&r=PG&f=1", "display_name": "sai_subramani", "link": "https://stackoverflow.com/users/12675732/sai-subramani"}, "is_accepted": false, "score": 0, "last_activity_date": 1612260738, "creation_date": 1612260738, "answer_id": 66007569, "question_id": 49783594, "link": "https://stackoverflow.com/questions/49783594/for-loop-and-zip-in-python/66007569#66007569", "title": "For loop and zip in python", "body": "<blockquote>\n<p>zip is useful to enumerate the elements in the 2 different list and\nmake a single list</p>\n<p>example :</p>\n</blockquote>\n<pre><code> x: y for x, y in zip(Class_numbers, students_per_class)\n</code></pre>\n<blockquote>\n<p>explanation:</p>\n</blockquote>\n<ul>\n<li>the element form Class_number is assigned to x which is a &quot;Key&quot; for the dictionary\nand the students_per_class is assigned to y which is a &quot;value</li>\n<li>until the loop end it will iterate to dictionary.</li>\n</ul>\n"}], "owner": {"reputation": 81, "user_id": 9600041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59b5c2412a26b247aa54b11194cbe3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/9600041/ehsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14280, "favorite_count": 2, "accepted_answer_id": 49783707, "answer_count": 4, "score": 4, "last_activity_date": 1612260738, "creation_date": 1523476974, "last_edit_date": 1523477121, "question_id": 49783594, "link": "https://stackoverflow.com/questions/49783594/for-loop-and-zip-in-python", "title": "For loop and zip in python", "body": "<p>I have a code that I am trying to understand and I need help.</p>\n\n<pre><code>import numpy as np\nClass_numbers=np.array(['a','b','c'])\nstudents_per_class=np.array([10,20,30])\nprint(\"Students counts per class:\\n{}\".format(\n{x: y for x, y in zip(Class_numbers, students_per_class)}))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Students counts per class:\n{'a': 10, 'b': 20, 'c': 30}\n</code></pre>\n\n<p>What I understand:\n1- we use {} and .format(...) to replace {} with ...</p>\n\n<p>Here are my questions:</p>\n\n<p>Q1- I do not understand \"for x, y in zip(Class_numbers, students_per_class)\". Is it like a 2d for loop? why we need the zip? Can we have 2d loop with out zip function?</p>\n\n<p>Q2-I am not understanding how x:y works! the compile understand automatically that the definition of x and y (in \"x:y\") is described in the rest of the line(e.g. for loop)?</p>\n\n<p>P.S: I am expert in MATLAB but I am new to python and it is sometimes very confusing!</p>\n\n<p>Ehsan</p>\n"}, {"tags": ["python", "numpy", "machine-learning", "linear-algebra"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 2, "last_activity_date": 1523478280, "creation_date": 1523478280, "answer_id": 49783930, "question_id": 49783587, "link": "https://stackoverflow.com/questions/49783587/how-to-split-a-social-graph-on-matrix-form/49783930#49783930", "title": "How to split a social graph (on matrix form)?", "body": "<p>This isn't all that difficult with <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/arrays.indexing.html\" rel=\"nofollow noreferrer\">numpy indexing</a>:</p>\n\n<p>Here is a sample matrix:</p>\n\n<pre><code>np.random.seed(0)\nm = np.random.randint(0, 10, (5, 5))\nprint(m)\n\n[[5 0 3 3 7]\n [9 3 5 2 4]\n [7 6 8 8 1]\n [6 7 7 8 1]\n [5 9 8 9 4]]\n</code></pre>\n\n<p>Then to get the relevant groups out of your indicator vector:</p>\n\n<pre><code>indicator = np.array([0,1,1,0,1])\ngroup1 = np.where(indicator == 0)[0] # [0 3]\ngroup2 = np.where(indicator == 1)[0] # [1 2 4]\n</code></pre>\n\n<p>And finally, to get the relevant columns and rows for each:</p>\n\n<pre><code>&gt;&gt;&gt; m[group1, :][:, group1]\n[[5 3]\n [6 8]]\n&gt;&gt;&gt; m[group2, :][:, group2]\n[[3 5 4]\n [6 8 1]\n [9 8 4]]\n</code></pre>\n"}], "owner": {"reputation": 4606, "user_id": 3747801, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1041258158/picture?type=large", "display_name": "Toke Faurby", "link": "https://stackoverflow.com/users/3747801/toke-faurby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 49783930, "answer_count": 1, "score": 0, "last_activity_date": 1523478280, "creation_date": 1523476936, "last_edit_date": 1523477266, "question_id": 49783587, "link": "https://stackoverflow.com/questions/49783587/how-to-split-a-social-graph-on-matrix-form", "title": "How to split a social graph (on matrix form)?", "body": "<p>I have a undirected binary social graph represented as a <code>2d numpy array</code>, e.g. like the picture below.\nI want to split this matrix into two, based on a binary indicator vector.</p>\n\n<p>For example if I have the graph corresponding to the image below and the indicator vector <code>[0,1,1,0,1]</code> I want <code>[2,3,5]</code> in one group, and <code>[1,4]</code> in another, thus giving me a <code>3x3</code> and a <code>2x2</code> matrix.</p>\n\n<p>I can't seem to figure out which permutations to perform/slices to take.\nAny suggestions?</p>\n\n<p><a href=\"https://i.stack.imgur.com/PmdKK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PmdKK.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-2.7", "python-webbrowser"], "comments": [{"owner": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "edited": false, "score": 0, "creation_date": 1523477850, "post_id": 49783572, "comment_id": 86582962, "body": "To get your local machine to open a web page, you need to be running a script on your local machine. So you could try running a Python script on your local machine that uses an ssh library (or possibly calls putty as a subprocess) to connect to the remote machine and run the script there. Then your Python script on the local machine should retrieve the relevant URL from the remote session and launch the web page locally."}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1523478048, "post_id": 49783572, "comment_id": 86583074, "body": "Your wording may be ambiguous or misunderstood. Is your goal to open the <b>browser</b> on your local machine? Or to have a browser on the <i>virtual machine</i> open with a <b>url</b> that points to your local machine? In other words, should the browser process run on your local machine or the virtual machine?"}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478420, "post_id": 49783572, "comment_id": 86583272, "body": "i have edited the question and clarified where <code>SimpleHTTPServer</code> is running."}, {"owner": {"reputation": 170, "user_id": 8492881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DQRAARPTD3Y/AAAAAAAAAAI/AAAAAAAAACE/C4ocy6l-w3w/photo.jpg?sz=128", "display_name": "Community", "link": "https://stackoverflow.com/users/8492881/community"}, "edited": false, "score": 0, "creation_date": 1597236683, "post_id": 49783572, "comment_id": 112066592, "body": "I wonder if you ever did make it. I want to use this type of functionality as well."}], "answers": [{"comments": [{"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523477704, "post_id": 49783723, "comment_id": 86582886, "body": "<code>webbrowser.open(url[, new=0[, autoraise=True]])</code> - this line gives <code>SyntaxError: invalid syntax</code>"}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478322, "post_id": 49783723, "comment_id": 86583208, "body": "<code>url = &quot;&lt;your-local-Ip-address&gt;:8080&#47;&quot;</code> - This is wrong, I want to open html file which is present on virtual machine and SimpleHTTPServer is running on virtual machine, not on local machine."}, {"owner": {"reputation": 596, "user_id": 6550599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd4b758d7ca9e4e5f8a519af6f175e7a?s=128&d=identicon&r=PG&f=1", "display_name": "karthik006", "link": "https://stackoverflow.com/users/6550599/karthik006"}, "reply_to_user": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478804, "post_id": 49783723, "comment_id": 86583456, "body": "your question didn&#39;t explain that untill your last edit"}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478911, "post_id": 49783723, "comment_id": 86583503, "body": "My bad. Sorry for the confusion."}], "tags": [], "owner": {"reputation": 596, "user_id": 6550599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd4b758d7ca9e4e5f8a519af6f175e7a?s=128&d=identicon&r=PG&f=1", "display_name": "karthik006", "link": "https://stackoverflow.com/users/6550599/karthik006"}, "is_accepted": false, "score": 0, "last_activity_date": 1523478079, "last_edit_date": 1523478079, "creation_date": 1523477437, "answer_id": 49783723, "question_id": 49783572, "link": "https://stackoverflow.com/questions/49783572/how-to-open-a-web-browser-with-specific-url-on-local-machine-when-script-is-runn/49783723#49783723", "title": "How to open a web browser with specific URL on local machine when script is running on virtual machine?", "body": "<p>When you use a virtual machine , you're totally switched to that environment. Also when you refer to localhost , that points to that port on the virtual machine and not your local machine . One best approach to this would be to use your Host IP address . Change your code to </p>\n\n<pre><code>import webbrowser\nurl = \"&lt;your-local-Ip-address&gt;:8080/\"\n</code></pre>\n\n<blockquote>\n  <p>Open url in a new window of the default browser, if possible,\n  otherwise, open url in the only browser window.</p>\n</blockquote>\n\n<pre><code>webbrowser.open_new(url)\n</code></pre>\n\n<blockquote>\n  <p>Open url in a new page (\u201ctab\u201d) of the default browser, if possible,\n  otherwise equivalent to open_new().</p>\n</blockquote>\n\n<pre><code>webbrowser.open_new_tab(url)\n</code></pre>\n\n<p>You can also export your host to ip-adress before starting the server.. \nIf this approach falls back . try using services like ngrok or localtunnel to expose your localhost to a public cloud and access that URl ,but that is slow and not the recommended way</p>\n"}, {"comments": [{"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478082, "post_id": 49783763, "comment_id": 86583088, "body": "It is showing <code>Making HTTP connection to &lt;ip&gt;:8080</code> and hanged there."}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "reply_to_user": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478149, "post_id": 49783763, "comment_id": 86583125, "body": "Ensure that your firewall on both your local machine and virtual machine allows traffic across port 8080 and the local machine is accepting external connections on that port. Can you see the page by putting that address in your browser manually?"}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478553, "post_id": 49783763, "comment_id": 86583342, "body": "I have to give hostname of virtual machine in URL, <code>SimpleHTTPServer</code> is running on VM, not on local machine."}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "reply_to_user": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478747, "post_id": 49783763, "comment_id": 86583437, "body": "Then shouldn&#39;t simply using <code>localhost</code> work for you? You mentioned the script is running on the virtual machine, if the webserver is also running on the virtual machine, the local machine is not involved. If you want to control your local machine <i>from</i> the virtual machine, you will need another vehicle for that communication. For your intents and purposes, your virtual machine should be thought of as a completely different computer."}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1523478857, "post_id": 49783763, "comment_id": 86583477, "body": "<code>localhost</code> works if I want to open webbrowser on VM (through VNC), but if I want to open webbrowser on local machine, it has to be <code>hostname</code>. Looks like there is no way I can webbrowser on local machine, but just display a message and let user open browser manually."}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "reply_to_user": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 1, "creation_date": 1523478936, "post_id": 49783763, "comment_id": 86583515, "body": "Correct. The SSH server (virtual machine) cannot issue commands to the client (your local machine). To do this, you would need a server running on your local machine that listens for connections/commands."}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "reply_to_user": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1523479586, "post_id": 49783763, "comment_id": 86583809, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168767/discussion-between-npatel-and-sytech\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "is_accepted": false, "score": 0, "last_activity_date": 1523477986, "last_edit_date": 1523477986, "creation_date": 1523477612, "answer_id": 49783763, "question_id": 49783572, "link": "https://stackoverflow.com/questions/49783572/how-to-open-a-web-browser-with-specific-url-on-local-machine-when-script-is-runn/49783763#49783763", "title": "How to open a web browser with specific URL on local machine when script is running on virtual machine?", "body": "<p>You can exploit the fact that the SSH client (your local machine) IP will be present in the environment variables on the server (virtual machine) when you're connected by SSH.</p>\n\n<pre><code>import os\nimport webbrowser\nconnection = os.environ.get('SSH_CONNECTION')  #corrected keyword\nclient_ip, client_port, server_ip, server_port = connection.split()\nurl = \"http://{hostname}:8080/\".format(hostname=client_ip)\nwebbrowser.open(url)\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2832, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1523478184, "creation_date": 1523476873, "last_edit_date": 1523478184, "question_id": 49783572, "link": "https://stackoverflow.com/questions/49783572/how-to-open-a-web-browser-with-specific-url-on-local-machine-when-script-is-runn", "title": "How to open a web browser with specific URL on local machine when script is running on virtual machine?", "body": "<p>I am connecting to virtual machine with putty ssh from my local machine and running a python script on virtual machine. From the script, I want to open a web browser with specific URL on my local machine. Is it possible to do so with python?</p>\n\n<p><code>SimpleHTTPServer</code> is running on virtual machine, and <code>HTML</code> file is present on it, so I can open URL on virtual machine with <code>localhost:8080</code> and for local machine, I can use hostname of virtual machine <code>&lt;hostname&gt;:8080.</code></p>\n\n<p>If I have to open the web browser on virtual machine, I can use following:</p>\n\n<pre><code>import webbrowser\nurl = \"http://localhost:8080/\"\nwebbrowser.open_new(url)\n</code></pre>\n\n<p>But if I want to open the same URL using hostname of virtual machine on local web browser, not sure what can be used:</p>\n\n<pre><code>import os\nhostname = os.uname()[1]\nurl = \"http://%s:8080/\" % hostname  # this hostname is virtual machine's hostname\nprint \"Opening this URL in your browser: %s\" % url\n# Here I have to open a web browser manually and copy the URL.\n# Looking for something which can open web browser automatically.\n</code></pre>\n"}, {"tags": ["android", "python", "python-3.x", "kivy"], "answers": [{"tags": [], "owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "is_accepted": true, "score": 3, "last_activity_date": 1523713356, "creation_date": 1523713356, "answer_id": 49832084, "question_id": 49783545, "link": "https://stackoverflow.com/questions/49783545/make-a-scrollview-scroll-underneath-another-widget-in-kivy/49832084#49832084", "title": "Make a scrollview scroll underneath another widget in kivy", "body": "<p>Please refer the example and output for details.</p>\n\n<h1>gameslist.py</h1>\n\n<ol>\n<li>Add <em>from screenmanager import GamesListScreen</em></li>\n<li>Change the root widget from <em>ScrollView</em> to a <em>BoxLayout</em>.</li>\n</ol>\n\n<h1>gameslist.kv</h1>\n\n<ol>\n<li>Add <em>#:include screenmanager.kv</em></li>\n<li>Declare GamesListScreen as a child widget of the RootWidget</li>\n<li>Make changes to the ScrollView</li>\n</ol>\n\n<h1>Example</h1>\n\n<h2>gameslist.py</h2>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.boxlayout import BoxLayout\nfrom screenmanager import GamesListScreen\n\n\nclass RootWidget(BoxLayout):\n    pass\n\n\nclass GamesListApp(App):\n    def build(self):\n        return RootWidget()\n\n\nif __name__ == \"__main__\":\n    GamesListApp().run()\n</code></pre>\n\n<h2>gameslist.kv</h2>\n\n<pre><code>#:import ScrollEffect kivy.effects.scroll.ScrollEffect\n#:import Button kivy.uix.button.Button\n#:import Window kivy.core.window.Window\n#:include screenmanager.kv\n\n&lt;RootWidget&gt;:\n    orientation: 'vertical'\n\n    GamesListScreen:\n\n    ScrollView:\n        effect_cls: ScrollEffect\n        size_hint: 1, None\n        size: Window.width, (Window.height * .85)\n\n        GridLayout:\n            do_scroll_x: False\n            height: self.minimum_height\n            size_hint_y: None\n            spacing: 5, 5\n            cols: 1\n            on_parent:\n                for i in range(10): txt = \"Game {}\".format(i); self.add_widget(Button(text = txt, size_hint_y = None,\n                height = Window.height * .1))\n</code></pre>\n\n<h1>Output</h1>\n\n<p><a href=\"https://i.stack.imgur.com/i7YlJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i7YlJ.png\" alt=\"Img01 - App Startup\"></a>\n<a href=\"https://i.stack.imgur.com/PRoW1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PRoW1.png\" alt=\"Img02 - Scroll\"></a>\n<a href=\"https://i.stack.imgur.com/a40H6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a40H6.png\" alt=\"Img03 - Navigation Button clicked\"></a></p>\n"}], "owner": {"reputation": 300, "user_id": 9457623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TqQdH.jpg?s=128&g=1", "display_name": "ZontarZon", "link": "https://stackoverflow.com/users/9457623/zontarzon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 49832084, "answer_count": 1, "score": 0, "last_activity_date": 1523713356, "creation_date": 1523476753, "question_id": 49783545, "link": "https://stackoverflow.com/questions/49783545/make-a-scrollview-scroll-underneath-another-widget-in-kivy", "title": "Make a scrollview scroll underneath another widget in kivy", "body": "<p>I want to overlay a rectangle, button, and label on top of a scrollview gridlayout in kivy, to provide a banner with the name of the current screen and a button to the nav popup. I've made a gridlayout list of buttons to link to future minigames in a puzzles app.</p>\n\n<p>The contents I want to put on top are inside screenmanager.kv, and the gridlayout is in gameslist.kv.</p>\n\n<p>Everything displays to the screen. The gridlayout scrolls vertically. However, it scrolls <em>over</em> the contents of screenmanager.kv, not under it. I want the banner to stay visible, floating over the grid, persistently in the same place at the top of the window, despite where the user has scrolled in the gridlayout.</p>\n\n<p>screenmanager.kv:</p>\n\n<pre><code>&lt;GamesListScreen&gt;:\n    canvas.before:\n        Color:\n            rgba: 1, 0.6, 0.6, 1\n        Rectangle:\n            size: self.width, (self.height * 0.15)\n            pos: 0, (self.height * 0.85)\n    Button:\n        color: 1, 1, 1, 0\n        size_hint: None, None\n        height: Window.height * 0.15\n        width: self.height\n        pos: 0, (root.top * 0.85)\n        on_release:\n            root.open_NavPopup()\n            print('pressed')\n        Image:\n            source: 'images/NavIcon.png'\n            keep_ratio: False\n            allow_stretch: True\n            y: self.parent.y\n            x: self.parent.x\n            size: self.parent.size\n\n    Label:\n        font_size: self.width * 0.1\n        color: 1,1,1,1\n        center_x: self.width / 2\n        y: self.height / 2.35\n        text: 'Games List'\n</code></pre>\n\n<p>gameslist.kv:</p>\n\n<pre><code>#:import ScrollEffect kivy.effects.scroll.ScrollEffect\n#:import Button kivy.uix.button.Button\n\n&lt;RootWidget&gt;\n    effect_cls: ScrollEffect\n    GridLayout:\n        do_scroll_x: False\n        height: self.minimum_height\n        size_hint: 1, None\n        size: Window.width, (Window.height * .85)\n        spacing: 5, 5\n        padding: [0,(Window.height * .17),0,0]\n        cols: 1\n        on_parent:\n            self.add_widget(Button(text = \"Game 1\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 2\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 3\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 4\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 5\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 6\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 7\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 8\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 9\", size_hint_y = None, height = Window.height * .1))\n            self.add_widget(Button(text = \"Game 10\", size_hint_y = None, height = Window.height * .1))\n</code></pre>\n\n<p>gameslist.py, just in case:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.lang import Builder\nfrom kivy.uix.label import Label\nfrom kivy.uix.image import Image\nfrom kivy.uix.scrollview import ScrollView\nBuilder.load_file('gameslist.kv')\n\nclass RootWidget(ScrollView):\n    pass\n\nclass runGamesList(App):\n    def build(self):\n        root = RootWidget()\n        return root\n</code></pre>\n\n<p>I tried changing the canvas.before to canvas.after and putting the overlay inside of the gridlayout so it scrolls with it. Neither worked. Any tips? Or should I give up and do something that scrolls on the x-axis?</p>\n"}]