[{"tags": ["python", "selenium", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 330, "user_id": 6796295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce7622fb12bb05586c200c23c17469c?s=128&d=identicon&r=PG&f=1", "display_name": "Sandipan Pramanik", "link": "https://stackoverflow.com/users/6796295/sandipan-pramanik"}, "is_accepted": false, "score": 0, "last_activity_date": 1474515888, "creation_date": 1474515888, "answer_id": 39629897, "question_id": 39628191, "link": "https://stackoverflow.com/questions/39628191/selenium-webdriver-python-implicit-wait-is-not-clear-to-me/39629897#39629897", "title": "Selenium Webdriver Python - implicit wait is not clear to me", "body": "<p>In case of implicit wait driver waits till elements appears in DOM but at the same time it does not guarantee that elements are usable. Elements might not be enabled to be used ( like button click ) or elements might not have shape defined at that time. </p>\n\n<p>We are not interested with all the elements on the page as far as we are using selenium. All element might not have shape even.But presence of all the element in DOM is important to have other element working correctly. So implicit wait. </p>\n\n<p>When working with any element, we use explicit wait ( WebDriverwait ) or FluentWait.</p>\n"}, {"tags": [], "owner": {"reputation": 1669, "user_id": 4600339, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-L6telLCeeD8/AAAAAAAAAAI/AAAAAAAAA4Y/CcYcmV-WK8k/photo.jpg?sz=128", "display_name": "saurabh baid", "link": "https://stackoverflow.com/users/4600339/saurabh-baid"}, "is_accepted": true, "score": 3, "last_activity_date": 1474519334, "creation_date": 1474519334, "answer_id": 39630409, "question_id": 39628191, "link": "https://stackoverflow.com/questions/39628191/selenium-webdriver-python-implicit-wait-is-not-clear-to-me/39630409#39630409", "title": "Selenium Webdriver Python - implicit wait is not clear to me", "body": "<p><strong>Implicit Wait</strong> is internal to selenium. You set it once while initializing. Then every time web driver tries to look for a element it will look for that elmemt continiously (with some polling) presence till 'implicit wait' timer expires. If the element is found then it resumes execution otherwise throws <code>NoSuchElement</code> exception. So it it founds it on first second it will come out from wait loop else if it does not find element on last second it will throw exeception.</p>\n\n<p><strong>Explicit Wait</strong> Is used for the scenario where Its required to wait for certain condition to be True. For e.g visibility of element. Its scope is limited for that particular call only.</p>\n\n<p>You can look for <a href=\"http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp\" rel=\"nofollow\">Selenium documentation</a> for more details and examples</p>\n"}], "owner": {"reputation": 55, "user_id": 6815329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBzMf.jpg?s=128&g=1", "display_name": "Ravil Asadov", "link": "https://stackoverflow.com/users/6815329/ravil-asadov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1582, "favorite_count": 1, "accepted_answer_id": 39630409, "answer_count": 2, "score": 1, "last_activity_date": 1474537322, "creation_date": 1474502066, "last_edit_date": 1474537322, "question_id": 39628191, "link": "https://stackoverflow.com/questions/39628191/selenium-webdriver-python-implicit-wait-is-not-clear-to-me", "title": "Selenium Webdriver Python - implicit wait is not clear to me", "body": "<p>Other people have asked this question and there are some answers but they do not clarify one moment. Implicit wait will wait for a specified amount of time if element is not found right away and then will run an error after waiting for the specified amount of time. Does it mean that implicit wait checks for the element the very first second and then waits for the specified time and checks at the last second again? </p>\n\n<p>I know that explicit wait polls the DOM every 500ms. What is the practical use of implicit wait if tests take longer with it? </p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1474502122, "post_id": 39628176, "comment_id": 66561811, "body": "lol that plays so fast ... how can you tell what you hit visually? you really shoudl slow down the update significantly ... it also seems to go off the side of the screen..."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1474502810, "post_id": 39628176, "comment_id": 66561964, "body": "That&#39;s a lot of code duplication!"}, {"owner": {"reputation": 21, "user_id": 6861194, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Dw76P8j-33Y/AAAAAAAAAAI/AAAAAAAAALI/IFimhBe36LI/photo.jpg?sz=128", "display_name": "Mesut Pala", "link": "https://stackoverflow.com/users/6861194/mesut-pala"}, "edited": false, "score": 0, "creation_date": 1474542982, "post_id": 39628176, "comment_id": 66578878, "body": "thanks, as i am very new to python that&#39;s the difficult bit where i am struggling.  if i remove the stuff which does the counting it works (i still have one or two issues tho)"}], "owner": {"reputation": 21, "user_id": 6861194, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Dw76P8j-33Y/AAAAAAAAAAI/AAAAAAAAALI/IFimhBe36LI/photo.jpg?sz=128", "display_name": "Mesut Pala", "link": "https://stackoverflow.com/users/6861194/mesut-pala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1512, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1474501881, "creation_date": 1474501881, "question_id": 39628176, "link": "https://stackoverflow.com/questions/39628176/bouncing-ball-game-in-python", "title": "Bouncing Ball Game in Python", "body": "<p>I am helping my little sister to help her code a bouncing ball game in python.</p>\n\n<p>The aim of the game is to hit two targets as many times as you can to earn the highest score. Every time the ball hits Target 1 and Target 2 you earn 10 points, and 30 points, respectively. </p>\n\n<p>So far we have managed to code this:</p>\n\n<pre><code>from tkinter import *\nimport random\nimport time\n\ncount = 0\nlost = False\n\nclass Ball:\n    def __init__(self, canvas, paddle, paddle2, target1, target2, color):\n        self.canvas = canvas\n        self.paddle = paddle\n        self.paddle2 = paddle2\n        self.target1 = target1\n        self.target2 = target2\n        self.id = canvas.create_oval(0, 0, 15, 15, fill=color)\n        self.canvas.move(self.id, 150, 200)\n        starts= [-3, -2, -1, 1, 2, 3]\n        random.shuffle(starts)\n        self.x = starts[0]\n        self.y = -3\n        self.canvas_height = self.canvas.winfo_height()\n        self.canvas_width = self.canvas.winfo_width()\n        self.hit_bottom=False\n\n    def hit_paddle(self,pos):\n        paddle_pos=self.canvas.coords(self.paddle.id)\n        if pos[2] &gt;= paddle_pos[0] and pos[0] &lt;= paddle_pos[2]:\n            if pos[3] &gt;= paddle_pos[1] and pos[3] &lt;= paddle_pos[3]:\n                return True\n            return False\n\n    def hit_paddle2(self,pos):\n        paddle2_pos=self.canvas.coords(self.paddle2.id)\n        if pos[2] &gt;= paddle2_pos[0] and pos[0] &lt;= paddle2_pos[2]:\n            if pos[3] &gt;= paddle2_pos[1] and pos[3] &lt;= paddle2_pos[3]:\n                return True\n            return False\n\n    def hit_target1(self,pos):\n        target1_pos=self.canvas.coords(self.target1.id)\n        if pos[2] &gt;= target1_pos[0] and pos[0] &lt;= target1_pos[2]:\n            if pos[3] &gt;= target1_pos[1] and pos[3] &lt;= target1_pos[3]:\n                return True\n            return False\n\n    def hit_target2(self,pos):\n        target2_pos=self.canvas.coords(self.target2.id)\n        if pos[2] &gt;= target2_pos[0] and pos[0] &lt;= target2_pos[2]:\n            if pos[3] &gt;= target2_pos[1] and pos[3] &lt;= target2_pos[3]:\n                return True\n            return False\n\n    def draw(self):\n        self.canvas.move(self.id, self.x, self.y)\n        pos = self.canvas.coords(self.id)\n        if pos[1] &lt;= 0:\n            self.y = 3\n        if pos[3] &gt;= self.canvas_height:\n            self.hit_bottom=True\n        if self.hit_paddle(pos)==True:\n            self.y=-3\n        if self.hit_paddle2(pos)==True:\n            self.y=3\n        if self.hit_target1(pos)==True:\n            self.y=-3\n        if self.hit_target2(pos)==True:\n            self.y=-3\n        if pos[0] &lt;= 0:\n            self.x = 3\n        if pos[2] &gt;= self.canvas_width:\n            self.x = 3\n\n            global count\n            count +=1\n            score()   \n        if pos[3] &lt;= self.canvas_height:\n            self.canvas.after(10, self.draw)\n        else:\n            self.canvas.move(self.id, 150, 200)\n            game_over()\n            global lost\n            lost = True\n\nclass Paddle:\n    def __init__(self, canvas, color):\n        self.canvas = canvas\n        self.id = canvas.create_rectangle(0, 0, 50, 10, fill=color)\n        self.canvas.move(self.id, 150, 300)\n        self.x = 0\n        self.canvas_width = self.canvas.winfo_width()\n        self.canvas.bind_all(\"&lt;KeyPress-Left&gt;\", self.move_left)\n        self.canvas.bind_all(\"&lt;KeyPress-Right&gt;\", self.move_right)\n\n    def draw(self):\n        self.canvas.move(self.id, self.x, 0)\n        pos = self.canvas.coords(self.id)\n        if pos[0] &lt;= 0:\n            self.x = 0\n        elif pos[2] &gt;= self.canvas_width:\n            self.x = 0\n\n    def move_left(self, evt):\n            self.x = -2\n\n    def move_right(self, evt):\n            self.x = 2\n\nclass Paddle2:\n    def __init__(self, canvas, color):\n        self.canvas = canvas\n        self.id = canvas.create_rectangle(0, 0, 50, 10, fill=color)\n        self.canvas.move(self.id, 0, 300)\n        self.x = 0\n        self.canvas_width = self.canvas.winfo_width()\n        self.canvas.bind_all(\"&lt;KeyPress-a&gt;\", self.move_left)\n        self.canvas.bind_all(\"&lt;KeyPress-d&gt;\", self.move_right)\n\n    def draw(self):\n        self.canvas.move(self.id, self.x, 0)\n        pos = self.canvas.coords(self.id)\n        if pos[0] &lt;= 0:\n            self.x = 0\n        elif pos[2] &gt;= self.canvas_width:\n            self.x = 0\n\n    def move_left(self, evt):\n            self.x = -2\n\n    def move_right(self, evt):\n            self.x = 2\n\nclass Target1:\n    def __init__(self, canvas, color):\n        self.canvas = canvas\n        self.id = canvas.create_oval(0, 0, 35, 35, fill=color)\n        self.canvas.move(self.id, 40, 120)\n        self.x = 0\n\n    def draw(self):\n        self.canvas.move(self.id, self.x, 0)\n        pos = self.canvas.coords(self.id)\n\nclass Target2:\n    def __init__(self, canvas, color):\n        self.canvas = canvas\n        self.id = canvas.create_oval(0, 0, 70, 70, fill=color)\n        self.canvas.move(self.id, 100, 40)\n        self.x = 0\n\n    def draw(self):\n        self.canvas.move(self.id, self.x, 0)\n        pos = self.canvas.coords(self.id)\n\ndef start_game(event):\n    global lost, count, ball\n    if lost==True:\n        ball=Ball(canvas,paddle,paddle2, target1, target2, \"red\")\n    lost = False    \n    count = 0\n    score()\n    canvas.itemconfig(game, text=\" \")\n\ndef score():\n    canvas.itemconfig(score_now, text=\"score: \" + str(count))\n\ndef game_over():\n    canvas.itemconfig(game, text=\"Game over :(\")\n\ntk = Tk()\ntk.title(\"Guller's Cool Game\")\ntk.resizable(0,0)\ntk.wm_attributes(\"-topmost\", -1)\ncanvas = Canvas(tk, width=200, height=400, bd=0,highlightthickness=0)\ncanvas.pack()\ntk.update()\n\npaddle = Paddle(canvas, \"red\")\npaddle2=Paddle2(canvas, \"black\")\ntarget1=Target1(canvas, \"yellow\")\ntarget2=Target2(canvas, \"green\")\nball = Ball(canvas, paddle, paddle2, target1, target2, \"blue\")\nscore_now = canvas.create_text(155, 10, text=\"score: \" + str(count), fill = \"red\", font=(\"Tahoma\", 12))\ngame = canvas.create_text(100, 200, text=\" \", fill=\"red\", font=(\"Tahoma\", 16))\n\nwhile 1:\n    if ball.hit_bottom==False:\n        ball.draw()\n        paddle.draw()\n        paddle2.draw()\n        target1.draw()\n        target2.draw()\n    tk.update_idletasks()\n    tk.update()\n    time.sleep(0.01)\n</code></pre>\n\n<p>How can we get the above code to work properly so that every time the ball hits target1 and target2 you get 10 points and 30 points, respectively?</p>\n\n<p>Also, how can I make it so that you get a message which says \"press any key to start\" to start the game...</p>\n\n<p>Many thanks for your time and help.</p>\n\n<p>Mesut</p>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 25709, "user_id": 429982, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2626843a1f8617b05b650b92b01ca63d?s=128&d=identicon&r=PG", "display_name": "Gerrat", "link": "https://stackoverflow.com/users/429982/gerrat"}, "edited": false, "score": 0, "creation_date": 1474501926, "post_id": 39628153, "comment_id": 66561773, "body": "Were you looking for <a href=\"https://pypi.python.org/pypi/pyperclip\" rel=\"nofollow noreferrer\">pyperclip</a> instead?"}, {"owner": {"reputation": 1, "user_id": 6861202, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208964977193602/picture?type=large", "display_name": "Manuel", "link": "https://stackoverflow.com/users/6861202/manuel"}, "reply_to_user": {"reputation": 25709, "user_id": 429982, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2626843a1f8617b05b650b92b01ca63d?s=128&d=identicon&r=PG", "display_name": "Gerrat", "link": "https://stackoverflow.com/users/429982/gerrat"}, "edited": false, "score": 0, "creation_date": 1474625874, "post_id": 39628153, "comment_id": 66618518, "body": "OMG. Sorry for wasting your time. Shame on me for that... Thanks a lot though!"}], "owner": {"reputation": 1, "user_id": 6861202, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208964977193602/picture?type=large", "display_name": "Manuel", "link": "https://stackoverflow.com/users/6861202/manuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474501681, "creation_date": 1474501681, "question_id": 39628153, "link": "https://stackoverflow.com/questions/39628153/installing-piperclip-via-pip-on-el-capitan-returns-no-matching-distribution-fou", "title": "Installing piperclip via pip on El Capitan returns &#39;no matching distribution found&#39;", "body": "<p>Afaik I'm not behind a firewall. I have anaconda installed, as well as python idle 3.6</p>\n\n<p>This is the console output I get for 'pip install -vvv piperclip':</p>\n\n<pre><code>    Collecting piperclip\n  1 location(s) to search for versions of piperclip:\n  * https://pypi.python.org/simple/piperclip/\n  Getting page https://pypi.python.org/simple/piperclip/\n  Looking up \"https://pypi.python.org/simple/piperclip/\" in the cache\n  No cache entry available\n  Starting new HTTPS connection (1): pypi.python.org\n  \"GET /simple/piperclip/ HTTP/1.1\" 404 28063\n  Status code 404 not in [200, 203, 300, 301]\n  Could not fetch URL https://pypi.python.org/simple/piperclip/: 404 Client Error: Not Found for url: https://pypi.python.org/simple/piperclip/ - skipping\n  Could not find a version that satisfies the requirement piperclip (from versions: )\nCleaning up...\nNo matching distribution found for piperclip\nException information:\nTraceback (most recent call last):\n  File \"/Users/admin/anaconda/lib/python3.5/site-packages/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/Users/admin/anaconda/lib/python3.5/site-packages/pip/commands/install.py\", line 310, in run\n    wb.build(autobuilding=True)\n  File \"/Users/admin/anaconda/lib/python3.5/site-packages/pip/wheel.py\", line 750, in build\n    self.requirement_set.prepare_files(self.finder)\n  File \"/Users/admin/anaconda/lib/python3.5/site-packages/pip/req/req_set.py\", line 370, in prepare_files\n    ignore_dependencies=self.ignore_dependencies))\n  File \"/Users/admin/anaconda/lib/python3.5/site-packages/pip/req/req_set.py\", line 522, in _prepare_file\n    finder, self.upgrade, require_hashes)\n  File \"/Users/admin/anaconda/lib/python3.5/site-packages/pip/req/req_install.py\", line 268, in populate_link\n    self.link = finder.find_requirement(self, upgrade)\n  File \"/Users/admin/anaconda/lib/python3.5/site-packages/pip/index.py\", line 491, in find_requirement\n    'No matching distribution found for %s' % req\npip.exceptions.DistributionNotFound: No matching distribution found for piperclip\n</code></pre>\n"}, {"tags": ["python", "batch-processing"], "comments": [{"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 0, "creation_date": 1474501742, "post_id": 39628131, "comment_id": 66561740, "body": "How is this related to <a href=\"https://stackoverflow.com/questions/tagged/batch-file\">batch-file</a>? Did you mean <a href=\"https://stackoverflow.com/questions/tagged/batch-processing\">batch-processing</a> instead? Please read the tag infos and update your question accordingly..."}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "reply_to_user": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 0, "creation_date": 1474501919, "post_id": 39628131, "comment_id": 66561772, "body": "@aschipfl done.. the batchfile tag was recommended so i used that.., actually the batchfile tag automatically updated my batch tag.. can&#39;t change it to just batch so i deleted it."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1474502867, "post_id": 39628131, "comment_id": 66561985, "body": "Since the name of the output file is related to that of the input file, just accept one argument\u2014the input file&#39;s name\u2014and have the script determine the name of the output file from that. i.e. just change the input file&#39;s extension."}, {"owner": {"reputation": 649, "user_id": 4979237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh4.googleusercontent.com/-IhkrApjwfYo/AAAAAAAAAAI/AAAAAAAAABA/g7-CQDdB2BI/photo.jpg?sz=128", "display_name": "Albert Rothman", "link": "https://stackoverflow.com/users/4979237/albert-rothman"}, "edited": false, "score": 0, "creation_date": 1474503023, "post_id": 39628131, "comment_id": 66562023, "body": "ditto of martineau, briefly looking at your script it looks like you may being trying to do this with out.write(&#39;&gt;{0}\\n{1}\\n&#39;.format(title,seq)). if the issue is just changing the extension just use the <a href=\"https://www.tutorialspoint.com/python/string_replace.htm\" rel=\"nofollow noreferrer\">replace() method</a>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1474503218, "post_id": 39628131, "comment_id": 66562082, "body": "You should change the extension using the <code>os.path.splitext()</code>function. Not the string <code>replace()</code> method."}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1474503904, "post_id": 39628131, "comment_id": 66562231, "body": "how would i automate this for over 100 files? each run takes a long time and i don&#39;t want to sit in front of the computer to wait for it to finish and then run the next"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1474504099, "post_id": 39628131, "comment_id": 66562270, "body": "Where do the names of the input files come from? Are they all in the same directory? Otherwise I don&#39;t see how a program could determine unless the user types them all in."}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1474504203, "post_id": 39628131, "comment_id": 66562291, "body": "@ martineau yeah they are all in the same directory."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1474504880, "post_id": 39628131, "comment_id": 66562406, "body": "Just have your script accept one argument, the name of the directory the fasta files are in, and then use <code>glob.glob()</code> to get a list of all the <code>&#39;H*.txt&#39;</code> files in it. Then, for each one, determine the output file name automatically by changing the input file&#39;s extension, then perform the processing for that pair. Rinse and repeat."}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1474504954, "post_id": 39628131, "comment_id": 66562415, "body": "@martineau do you mind writing a solution ? i am fairly new to this."}], "answers": [{"comments": [{"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1474549148, "post_id": 39628715, "comment_id": 66583168, "body": "the error says,  TypeError: splitext() missing 1 required positional arguments: &#39;p&#39;"}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1474551053, "post_id": 39628715, "comment_id": 66584514, "body": "i modified the code to: root, ext = os.path.splitext(txt_filename)  , please change your answer so i can give you a check."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1474554560, "post_id": 39628715, "comment_id": 66587060, "body": "Oh, sorry, sure thing. Also note I also optimized the code to some degree as well. That could be taken even further by preprocessing the <code>&#39;VD.fasta&#39;</code> file into an in-memory list assuming it&#39;s not too big."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 2, "last_activity_date": 1474553585, "last_edit_date": 1474553585, "creation_date": 1474506316, "answer_id": 39628715, "question_id": 39628131, "link": "https://stackoverflow.com/questions/39628131/giving-input-and-output-files-for-batch-processing/39628715#39628715", "title": "Giving input and output files for batch processing?", "body": "<p>I couldn't test this because I don't have the input files nor do I have all the third party modules installed that you do. However it should be close to what you should do, as I was trying to explain in the comments.</p>\n\n<pre><code>import glob\nimport numpy as np\nimport os\nimport pandas as pd\nimport sys\n\ndef process_txt_file(txt_filename, f):\n    root, ext = os.path.splitext(txt_filename)\n    fasta_filename = root + '.fasta'\n\n    print('processing {} -&gt; {}'.format(txt_filename, fasta_filename))\n\n    df = pd.read_csv(txt_filename, sep='\\t' )\n    with open(fasta_filename, \"w\") as out:\n        f.seek(0)  # rewind\n        for line in f:\n            title = line[1:].rstrip()\n            seq = f.readline().rstrip()\n\n            if  df['ReadID'].str.contains(title).any():\n                out.write('&gt;{0}\\n{1}\\n'.format(title, seq))\n\nif __name__ == '__main__':\n    if len(sys.argv) != 2:\n        print('usage: {} &lt;path-to-txt-files-directory&gt;'.format(sys.argv[0]))\n        sys.exit(2)\n\n    with open('VD.fasta', \"r+\") as f:\n        for input_filename in glob.glob(os.path.join(sys.argv[1], 'H*.txt'):\n            process_txt_file(input_filename, f)\n</code></pre>\n"}], "owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1474, "favorite_count": 1, "accepted_answer_id": 39628715, "answer_count": 1, "score": 2, "last_activity_date": 1474553585, "creation_date": 1474501490, "last_edit_date": 1474506849, "question_id": 39628131, "link": "https://stackoverflow.com/questions/39628131/giving-input-and-output-files-for-batch-processing", "title": "Giving input and output files for batch processing?", "body": "<p>I have more than 100 .txt files in a directory, that I want to run the same python script for each one of the files. Right now I have to type a similar command over 100 times because there is a slight variation for each command because the input and output file names are different. I was wondering if this could done automatically.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport os\nimport argparse\n\nparser = argparse.ArgumentParser(description='Excelseq ')\nparser.add_argument('-i','--txt', help='Input file name',required=True)\nparser.add_argument('-o','--output',help='output file name', required=True)\nargs = parser.parse_args()\n\ndf = pd.read_csv(args.txt, sep='\\t' )\nf=open('VD.fasta', \"r+\")\nout = open(args.output, \"w\")\n\nfor line in f:\n    title = line[1:]\n    title = title.rstrip()\n\n    seq = f.readline()\n    seq = seq.rstrip()\n\n    if  df['ReadID'].str.contains(title).any():\n        out.write('&gt;{0}\\n{1}\\n'.format(title,seq))\n</code></pre>\n\n<p>The code takes 1 input file: <code>df</code> which is given by <code>-i</code>, it is a .txt file, and the script checks if the <code>ReadID</code> from the .txt file is in the .fasta file. If it is, the script will print out the <code>title</code> and <code>seq</code>. But for each output file, I would like the name to be the same as the .txt file but with a .fasta extension.</p>\n\n<p>For example:</p>\n\n<pre><code>input file1 : H100.txt\noutput file1: H100.fasta\n\ninput file2 : H101.txt\noutput file2: H101.fasta\n\ninput file3: H102.txt\noutput file3: H102.fasta\n\n...\n</code></pre>\n\n<p><strong>How would I automate this for over 100 files? Each run takes a long time and I don't want to sit in front of the computer to wait for it to finish and then run the next.</strong></p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-ec2", "boto"], "comments": [{"owner": {"reputation": 11362, "user_id": 5017586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6cf237e6b3b0f4e8ed76d138336bed4?s=128&d=identicon&r=PG&f=1", "display_name": "error2007s", "link": "https://stackoverflow.com/users/5017586/error2007s"}, "edited": false, "score": 0, "creation_date": 1474501880, "post_id": 39628128, "comment_id": 66561766, "body": "Did you read this <a href=\"http://stackoverflow.com/questions/9575148/with-boto-how-can-i-name-a-newly-spawned-ec2-instance\" title=\"with boto how can i name a newly spawned ec2 instance\">stackoverflow.com/questions/9575148/&hellip;</a>"}, {"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1474503344, "post_id": 39628128, "comment_id": 66562110, "body": "What boto api are you using to create an instance?"}], "answers": [{"tags": [], "owner": {"reputation": 10887, "user_id": 5314382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aj9Lv.jpg?s=128&g=1", "display_name": "Jordon Phillips", "link": "https://stackoverflow.com/users/5314382/jordon-phillips"}, "is_accepted": false, "score": 0, "last_activity_date": 1474583123, "creation_date": 1474583123, "answer_id": 39649819, "question_id": 39628128, "link": "https://stackoverflow.com/questions/39628128/is-there-a-way-to-set-a-tag-on-an-ec2-instance-while-creating-it/39649819#39649819", "title": "Is there a way to set a tag on an EC2 instance while creating it?", "body": "<p>At the time of writing, there is no way to do this in a single operation.</p>\n"}], "owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474593482, "creation_date": 1474501484, "last_edit_date": 1474593482, "question_id": 39628128, "link": "https://stackoverflow.com/questions/39628128/is-there-a-way-to-set-a-tag-on-an-ec2-instance-while-creating-it", "title": "Is there a way to set a tag on an EC2 instance while creating it?", "body": "<p>Is that a way to create an EC2 instance with tags(I mean, adding tag as parameter when creating instance)</p>\n\n<p>I can't find this function in boto APIs.  According to the document, we can only add tags after creating. </p>\n\n<p>However, when creating on the browser, we can configure the tags when creating. So can we do the same thing in boto? (In our course we are required to tag our resource when creating, which is for bill monitor purpose, so adding tags after creating is not allowed.....)</p>\n"}, {"tags": ["python", "shell", "python-os"], "answers": [{"comments": [{"owner": {"reputation": 1379, "user_id": 1470373, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/8813c92211aa9ac1dbc7fe5da731fc67?s=128&d=identicon&r=PG", "display_name": "Rusty Weber", "link": "https://stackoverflow.com/users/1470373/rusty-weber"}, "edited": false, "score": 0, "creation_date": 1474502771, "post_id": 39628156, "comment_id": 66561950, "body": "Ensuring that you strip the string of white space before hand might be needed as white space can result in errors. logins = int(str(res).strip())"}], "tags": [], "owner": {"reputation": 525, "user_id": 6054354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ceded6ae4840a96589df5d87f9522a7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Kolar", "link": "https://stackoverflow.com/users/6054354/l-kolar"}, "is_accepted": false, "score": 1, "last_activity_date": 1474501705, "creation_date": 1474501705, "answer_id": 39628156, "question_id": 39628113, "link": "https://stackoverflow.com/questions/39628113/read-number-of-users-from-os-using-python/39628156#39628156", "title": "read number of users from OS using python", "body": "<p>To convert string to integer use function int(). For instance <code>res_integer = int(res)</code></p>\n"}], "owner": {"reputation": 37, "user_id": 6749366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-VXJAl01hIQc/AAAAAAAAAAI/AAAAAAAAAeQ/q9qg3uWCIuE/photo.jpg?sz=128", "display_name": "Hamed Haddadian", "link": "https://stackoverflow.com/users/6749366/hamed-haddadian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474501705, "creation_date": 1474501405, "question_id": 39628113, "link": "https://stackoverflow.com/questions/39628113/read-number-of-users-from-os-using-python", "title": "read number of users from OS using python", "body": "<p>I am writing a nagios plugin that would exit based on number of users that are logged into my instance.</p>\n\n<pre><code>import argparse\nimport subprocess\nimport os\nimport commands\nimport sys\n\nif __name__ == '__main__':\n        parser = argparse.ArgumentParser(description='checks number of logged in users')\n        parser.add_argument('-c','--critical', help='enter the value for critical limit', nargs='?', const=10)\n        parser.add_argument('-w','--warning',  help='enter the value for warning limit', nargs='?', const=5)\n        args = parser.parse_args()\n        x= commands.getstatusoutput(\"users | tr ' ' '\\n' | sort -u | wc -l\")\n        a= os.popen(\"users | tr ' ' '\\n' | sort -u | wc -l\").read()\n        print type(a)\n        print \"value of critical is %s\" % (args.critical)\n        print a\n        (co, res) = x\n        print \"result from command is %s\" % (res)\n        print type(res)\n        if a &gt;=  args.critical:\n                print \"we are critical\"\n                sys.exit(2)\n        elif a &lt;= args.warning:\n                print \" we are ok\"\n                sys.exit(0)\n        elif (a &gt;= args.warning and a &lt; args.critical):\n                print \"we are warning\"\n                sys.exit(1)\n        else:\n                print \"Unkown\"\n                sys.exit(3)\n</code></pre>\n\n<p>however the issue is for my if statements the result I am getting from commands.getstatusoutput or os.popen are string. how can I get the actual number of users from a shell command.</p>\n\n<pre><code>python test.py -c\n&lt;type 'str'&gt;\nvalue of critical is 10\n1\n\nresult from command is 1\n&lt;type 'str'&gt;\nwe are critical\n</code></pre>\n"}, {"tags": ["python", "pandas", "hdf5"], "comments": [{"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1474520761, "post_id": 39628082, "comment_id": 66566131, "body": "Take a look at the <a href=\"http://pandas.pydata.org/pandas-docs/stable/io.html#indexing\" rel=\"nofollow noreferrer\">indexing</a> in <a href=\"http://pandas.pydata.org/pandas-docs/stable/io.html#hdf5-pytables\" rel=\"nofollow noreferrer\">HDF5 docs</a>, and the <b><i><a href=\"http://pandas.pydata.org/pandas-docs/stable/cookbook.html#hdfstore\" rel=\"nofollow noreferrer\">cookbook</a></i></b>. Especially, refer to <a href=\"http://stackoverflow.com/questions/15798209/pandas-group-by-query-on-large-data-in-hdfstore\">this</a> and <a href=\"http://stackoverflow.com/questions/25459982/trouble-with-grouby-on-millions-of-keys-on-a-chunked-file-in-python-pandas/25471765#25471765\">this</a> answers."}, {"owner": {"reputation": 795, "user_id": 3563448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/de5d2fa5813e44bf3b943607e5347666?s=128&d=identicon&r=PG&f=1", "display_name": "kakk11", "link": "https://stackoverflow.com/users/3563448/kakk11"}, "edited": false, "score": 0, "creation_date": 1474558394, "post_id": 39628082, "comment_id": 66589777, "body": "What is your chunking scheme in hdf5 file? Try to order it so that you read minimal amount of chunks each time."}, {"owner": {"reputation": 67, "user_id": 1253493, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a86432a098c356369f544fc2588cccb?s=128&d=identicon&r=PG", "display_name": "user1253493", "link": "https://stackoverflow.com/users/1253493/user1253493"}, "edited": false, "score": 0, "creation_date": 1474623480, "post_id": 39628082, "comment_id": 66617012, "body": "I don&#39;t know what the chunking scheme is. Initially I had the data in month by month form then I wrote a loop to append it all to one file."}], "owner": {"reputation": 67, "user_id": 1253493, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a86432a098c356369f544fc2588cccb?s=128&d=identicon&r=PG", "display_name": "user1253493", "link": "https://stackoverflow.com/users/1253493/user1253493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474501145, "creation_date": 1474501145, "question_id": 39628082, "link": "https://stackoverflow.com/questions/39628082/improve-hdf5-data-frames-query-time", "title": "Improve HDF5 Data frames Query time", "body": "<p>I have converted a large (6GB) dataframe to a hdf5 file. It contains roughly 30m transactions from 100k user ids over 10 years. I am looking to recreate the state of each user id at 48 different points in time. So for example \"for each user ID how many transactions did they have before '1 Jan 2012'\". This is one summary field.</p>\n\n<p>My current method is to query the hdf5 for each user_id using the pandas query function for hdf5, then cycle through each date and output the summary at the certain point in time. The issue with this is that it takes too long per user id - sometimes 10-20 seconds each. It appears that the hdf5 query takes the most time.</p>\n\n<p>Is there a way that I can create an index on the hdf5 file to speed up the query or would sorting it by user_id help? All of the data manipulation is in pandas but I am unable to distribute the work across multiple machines due to environment constraints.</p>\n"}, {"tags": ["python", "pyqt", "maya"], "answers": [{"tags": [], "owner": {"reputation": 4158, "user_id": 4759736, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JHRRj.jpg?s=128&g=1", "display_name": "Green Cell", "link": "https://stackoverflow.com/users/4759736/green-cell"}, "is_accepted": false, "score": 1, "last_activity_date": 1474519822, "creation_date": 1474519822, "answer_id": 39630491, "question_id": 39628044, "link": "https://stackoverflow.com/questions/39628044/items-are-not-adding-in-correctly-in-qtablewidget-in-maya/39630491#39630491", "title": "Items are not adding in correctly in QTableWidget in Maya", "body": "<p>In your <code>setTable()</code> method, you are looping through the geometries, then you are looping through the rows. Since each geometry represents a row you only really need to loop through them and remove the other loop.</p>\n\n<p>Modifying it like so fixes the output:</p>\n\n<pre><code>def setTable(self):\n    # Adding the list of mesh found in scene into first column\n    geos = get_all_geos()\n    for i in range(0, len(geos)):\n        item = cmds.listRelatives(geos[i], parent=True)[0]\n        # instead of being populated with the list of items, I got the same name for the entire column\n        self.myTable.setItem(i, 0, QtGui.QTableWidgetItem(item))\n\n        # sets the combobox into the second column\n        box = combo_box()\n        nameList = (\"test1\",\"test2\",\"test3\")\n        box.addItems(nameList)\n        self.myTable.setCellWidget(i,1,box)\n        box.currentIndexChanged.connect(partial(self.tmp, i))\n</code></pre>\n\n<p>The reason it was failing was because your second loop kept overriding the rows with the last geo in the list.</p>\n"}], "owner": {"reputation": 1295, "user_id": 3212246, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c8d82749b8b5ebcba450be264de56f21?s=128&d=identicon&r=PG&f=1", "display_name": "dissidia", "link": "https://stackoverflow.com/users/3212246/dissidia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1474519822, "creation_date": 1474500706, "question_id": 39628044, "link": "https://stackoverflow.com/questions/39628044/items-are-not-adding-in-correctly-in-qtablewidget-in-maya", "title": "Items are not adding in correctly in QTableWidget in Maya", "body": "<p>I am trying to create a table, where it has 2 columns and several rows.\nColumn1 will be listing all the available mesh/geos in the scene while Column2 will be in the form of combo box per cell where it contains several options - depending on the mesh/geos from Column1, it will lists different shader options in the combobox as it will be reading off from a file. Meaning to say in the table, each item is on a per-row basis.</p>\n\n<p>I am currently having issues with populating the list of mesh/geos into Column1. Suppose my scene has 5 geos - <code>pCube1, pCube2, pCube3, pCube4, pCube5</code>, in my table, I would be expecting the Column0 of its 5 rows to be populated with <code>pCube#</code>, however instead of that, I got <code>pCube5</code> as my output result instead.</p>\n\n<p>Please see the following code:</p>\n\n<pre><code>from PyQt4 import QtGui, QtCore\nfrom functools import partial\nimport maya.cmds as cmds\n\n\nclass combo_box( QtGui.QComboBox ):\n    # For combox\n    def __init__( self, *args, **kwargs ):\n        super( combo_box, self ).__init__( *args, **kwargs)\n\ndef get_all_geos():\n    all_geos = cmds.ls(type='mesh')\n    return all_geos\n\n\nclass TestTable( QtGui.QWidget ):\n    def __init__( self, parent=None ):\n        QtGui.QWidget.__init__( self, parent )\n\n        self.setLayout( QtGui.QVBoxLayout() )\n        self.resize( 600, 300 )\n\n        self.myTable = QtGui.QTableWidget()\n        self.myTable.setColumnCount( 2 )\n\n        rowCount = len(get_all_geos())\n        self.myTable.setRowCount(rowCount)    \n\n        self.setTable()  \n\n        self.layout().addWidget(self.myTable)\n        self.myTable.cellChanged.connect(self.update) \n\n    def setTable(self):\n        # Adding the list of mesh found in scene into first column\n        for geo in get_all_geos():\n            item = cmds.listRelatives(geo, parent=True)[0]\n            for i in range(0, self.myTable.rowCount()):\n                # instead of being populated with the list of items, I got the same name for the entire column\n                self.myTable.setItem(i, 0, QtGui.QTableWidgetItem(item))\n\n                # sets the combobox into the second column\n                box = combo_box()\n                nameList = (\"test1\",\"test2\",\"test3\")\n                box.addItems(nameList)\n                self.myTable.setCellWidget(i,1,box)\n                box.currentIndexChanged.connect(partial(self.tmp, i))\n\n    def tmp(self, rowIndex, comboBoxIndex):\n        item = \"item \" + str(comboBoxIndex)\n        self.myTable.setItem(rowIndex, 2, QtGui.QTableWidgetItem(item))\n\n\n\nif __name__ == \"__main__\":\n    tableView = TestTable()\n    tableView.show()\n</code></pre>\n\n<p>In my <code>setTable</code> function, the <code>item</code> is not being processed correctly? when I am trying to add it into the QTableWidget. Can someone advise?</p>\n\n<p>Additionally, if anyone could answers, does the format I have used, would it be applicable for the scenario I am trying to achieve as I mentioned at the start of the post?</p>\n"}, {"tags": ["python", "sqlite", "zendesk"], "answers": [{"tags": [], "owner": {"reputation": 25709, "user_id": 429982, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2626843a1f8617b05b650b92b01ca63d?s=128&d=identicon&r=PG", "display_name": "Gerrat", "link": "https://stackoverflow.com/users/429982/gerrat"}, "is_accepted": false, "score": 0, "last_activity_date": 1474501635, "creation_date": 1474501635, "answer_id": 39628146, "question_id": 39628043, "link": "https://stackoverflow.com/questions/39628043/inserting-python-variable-data-into-sqlite-table-not-saving/39628146#39628146", "title": "inserting python variable data into sqlite table not saving", "body": "<p>Your table likely isn't created because you haven't committed yet, and your sql fails before it commits.  It should work when you fix your 2nd sql statement.</p>\n\n<p>You're not inserting the variables you've created into the table.  You need to use parameters.  There are <a href=\"https://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute\" rel=\"nofollow\">two ways of parameterizing your sql statement</a>.  I'll show the named placeholders one:</p>\n\n<pre><code>c.execute(\"INSERT INTO ticketstest VALUES (:id, :subj, :created, :body)\", \n    {'id':id, 'subj':subj, 'created':created, 'body':body}\n)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6861172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N1UL8.png?s=128&g=1", "display_name": "TheFoolinRed", "link": "https://stackoverflow.com/users/6861172/thefoolinred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474501635, "creation_date": 1474500699, "question_id": 39628043, "link": "https://stackoverflow.com/questions/39628043/inserting-python-variable-data-into-sqlite-table-not-saving", "title": "inserting python variable data into sqlite table not saving", "body": "<p>I'm querying a json on a website for data, then saving that data into a variable so I can put it into a sqlite table. I'm 2 out of 3 for what I'm trying to do, but the sqlite side is just mystifying. I'm able to request the data, from there I can verify that the variable has data when I test it with a print, but all of my sqlite stuff is failing. It's not even creating a table, much less updating the table (but it is printing all the results to the buffer for some reason) Any idea what I'm doing wrong here? Disclaimer: Bit of a python noob. I've successfully created test tables just copying the stuff off of the  <a href=\"https://docs.python.org/2/library/sqlite3.html\" rel=\"nofollow\">python sqlite doc</a></p>\n\n<pre><code># this is requesting the data and seems to work\nfor ticket in zenpy.search(\"bananas\"):\nid = ticket.id\nsubj = ticket.subject\ncreated = ticket.created_at\nfor comment in zenpy.tickets.comments(ticket.id):\n    body = comment.body\n\n# connecting to sqlite db that exists. things seem to go awry here\nconn = sqlite3.connect('example.db')\nc = conn.cursor()\n\n# Creating the table table (for some reason table is not being created at all)\nc.execute('''CREATE TABLE tickets_test\n         (ticket id, ticket subject, creation date, body text)''')\n\n# Inserting the variables into the sqlite table \nc.execute(\"INSERT INTO ticketstest VALUES (id, subj, created, body)\")\n\n# committing changes the changes and closing\nc.commit()\nc.close()\n</code></pre>\n\n<p>I'm on Windows 64bit and using pycharm to do this. </p>\n"}, {"tags": ["python", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1474537131, "post_id": 39628053, "comment_id": 66575051, "body": "The <code>Style</code> class is no longer used. Please use the correct documentation for the version of openpyxl you&#39;re using."}, {"owner": {"reputation": 357, "user_id": 509882, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/f45f1eaa5c8b481856508e071bd341fd?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/509882/arthur"}, "edited": false, "score": 0, "creation_date": 1569256430, "post_id": 39628053, "comment_id": 102529489, "body": "Here is the <a href=\"https://openpyxl.readthedocs.io/en/stable/styles.html\" rel=\"nofollow noreferrer\">documentation</a> for Style and <code>NamedStyle</code>."}], "tags": [], "owner": {"reputation": 25709, "user_id": 429982, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2626843a1f8617b05b650b92b01ca63d?s=128&d=identicon&r=PG", "display_name": "Gerrat", "link": "https://stackoverflow.com/users/429982/gerrat"}, "is_accepted": true, "score": 2, "last_activity_date": 1474500776, "creation_date": 1474500776, "answer_id": 39628053, "question_id": 39628005, "link": "https://stackoverflow.com/questions/39628005/from-openpyxl-styles-import-style-font-importerror-cannot-import-name-style/39628053#39628053", "title": "from openpyxl.styles import Style, Font ImportError: cannot import name Style", "body": "<p>Looking at the <a href=\"https://bitbucket.org/openpyxl/openpyxl/src/a4373fb5b471/openpyxl/styles/?at=default\" rel=\"nofollow\">source code</a> for openpyxl.styles, the <a href=\"https://bitbucket.org/openpyxl/openpyxl/src/a4373fb5b471f8dd6000b06e675cf37fe6a0ccad/openpyxl/styles/__init__.py?at=default&amp;fileviewer=file-view-default\" rel=\"nofollow\">__init__.py</a> file doesn't define any name: <code>Style</code>.  </p>\n\n<p>Perhaps you were looking for <code>NamedStyle</code> instead?</p>\n"}], "owner": {"reputation": 75, "user_id": 5571543, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-bigGeVM1Yx0/AAAAAAAAAAI/AAAAAAAAODo/Bq5mHXsMQxk/photo.jpg?sz=128", "display_name": "Saurabh B", "link": "https://stackoverflow.com/users/5571543/saurabh-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8262, "favorite_count": 0, "accepted_answer_id": 39628053, "answer_count": 1, "score": 1, "last_activity_date": 1474500776, "creation_date": 1474500436, "question_id": 39628005, "link": "https://stackoverflow.com/questions/39628005/from-openpyxl-styles-import-style-font-importerror-cannot-import-name-style", "title": "from openpyxl.styles import Style, Font ImportError: cannot import name Style", "body": "<p>While running a python code, I am facing the following error :</p>\n\n<pre><code>sbassi-mbpro:FacebookEventScraper-master sbassi$ python facebook_event_scraper.py \nTraceback (most recent call last):\n  File \"facebook_event_scraper.py\", line 13, in &lt;module&gt;\n    from openpyxl.styles import Style, Font\nImportError: cannot import name Style\n\npython -V\nPython 2.7.10\n</code></pre>\n"}, {"tags": ["python", "for-loop", "xml-parsing"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6836597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631caf7a533b9e2a6fc67cb9f06e447?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6836597/bill"}, "edited": false, "score": 0, "creation_date": 1474564559, "post_id": 39628092, "comment_id": 66593625, "body": "Thanks, miah! That definitely got things started. It&#39;s parsing more of the files now, but not all of them. I&#39;m now getting a <code>TypeError: Can&#39;t convert &#39;NoneType&#39; object to str implicitly</code>. Perhaps, one of the files doesn&#39;t conform to the rest and is breaking the script?"}, {"owner": {"reputation": 8538, "user_id": 1572077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d0d48254c7058151e04dbc6f13e864d8?s=128&d=identicon&r=PG", "display_name": "miah", "link": "https://stackoverflow.com/users/1572077/miah"}, "reply_to_user": {"reputation": 13, "user_id": 6836597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631caf7a533b9e2a6fc67cb9f06e447?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6836597/bill"}, "edited": false, "score": 0, "creation_date": 1474572914, "post_id": 39628092, "comment_id": 66598266, "body": "Without seeing any of the data, I would the return value from one of the <code>get_*</code> functions is <code>None</code>, so it is failing when trying to write to the content or quotes file.  I would have it print out the name of the files as it tries them, so that you can then go look at the file that fails."}, {"owner": {"reputation": 13, "user_id": 6836597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631caf7a533b9e2a6fc67cb9f06e447?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6836597/bill"}, "edited": false, "score": 0, "creation_date": 1475340870, "post_id": 39628092, "comment_id": 66909700, "body": "That worked perfectly, miah. Thanks again for your help!"}], "tags": [], "owner": {"reputation": 8538, "user_id": 1572077, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d0d48254c7058151e04dbc6f13e864d8?s=128&d=identicon&r=PG", "display_name": "miah", "link": "https://stackoverflow.com/users/1572077/miah"}, "is_accepted": true, "score": 1, "last_activity_date": 1474501198, "creation_date": 1474501198, "answer_id": 39628092, "question_id": 39627960, "link": "https://stackoverflow.com/questions/39627960/why-does-my-python-xml-parser-break-after-the-first-file/39628092#39628092", "title": "Why does my Python XML parser break after the first file?", "body": "<p>You are overwriting your function calls with the values they returned.  changing the function names should fix it.</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport re\nimport glob\nimport csv\nimport sys\n\ncontent_file = open('WWP Project/WWP_texts.txt','wt')\nquotes_file = open('WWP Project/WWP_quotes.txt', 'wt')\nlist_of_files = glob.glob(\"../../../Documents/WWPtextbase/distribution/*.xml\")\n\nns = {'wwp':'http://www.wwp.northeastern.edu/ns/textbase'}\n\ndef get_content(tree):\n    lines = ''.join(ET.tostring(tree.getroot(),encoding='unicode',method='text')).replace('\\n',' ').replace('\\t',' ').strip()\n    clean_lines = re.sub(' +',' ', lines)\n    return clean_lines.lower()\n\ndef get_quotes(tree):\n    quotes_list = []\n    for node in tree.findall('.//wwp:quote', namespaces=ns):\n        quote = ET.tostring(node,encoding='unicode',method='text')\n        clean_quote = re.sub(' +',' ', quote)\n        quotes_list.append(clean_quote)\n    return ' '.join(str(v) for v in quotes_list).replace('\\t','').replace('\\n','').lower()\n\ndef get_pid(tree):\n    for node in tree.findall('.//wwp:sourceDesc//wwp:author/wwp:persName[1]', namespaces=ns):\n        pid = node.attrib.get('ref')\n    return pid.replace('personography.xml#','') # will need to replace 'p:'\n\n\ndef get_trid(tree): # this function will eventually need to call OT (.//wwp:publicationStmt//wwp:idno)\n    for node in tree.findall('.//wwp:sourceDesc',namespaces=ns):\n        trid = node.attrib.get('n')\n    return trid\n\ncontent_file.write('pid' + '\\t' + 'trid' + '\\t' +'text' + '\\n')\nquotes_file.write('pid' + '\\t' + 'trid' + '\\t' + 'quotes' + '\\n')\n\nfor file_name in list_of_files:\n    file = open(file_name, 'rt')\n    tree = ET.parse(file)\n    file.close()\n    pid = get_pid(tree)\n    trid = get_trid(tree)\n    content = get_content(tree)\n    quotes = get_quotes(tree)\n    content_file.write(pid + '\\t' + trid + '\\t' + content + '\\n')\n    quotes_file.write(pid + '\\t' + trid + '\\t' + quotes + '\\n')\n\ncontent_file.close()\nquotes_file.close()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6836597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631caf7a533b9e2a6fc67cb9f06e447?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6836597/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 39628092, "answer_count": 1, "score": 1, "last_activity_date": 1474501198, "creation_date": 1474500144, "question_id": 39627960, "link": "https://stackoverflow.com/questions/39627960/why-does-my-python-xml-parser-break-after-the-first-file", "title": "Why does my Python XML parser break after the first file?", "body": "<p>I am working on a Python (3) XML parser that should extract the text content of specific nodes from every xml file within a folder. Then, the script should write the collected data into a tab-separated text file. So far, all the functions seem to be working. The script returns all the information that I want from the first file, but it always breaks, I believe, when it starts to parse the second file.</p>\n\n<p>When it breaks, it returns \"TypeError: 'str' object is not callable.\" I've checked the second file and found that the functions work just as well on that as the first file when I remove the first file from the folder. I'm very new to Python/XML. Any advice, help, or useful links would be greatly appreciated. Thanks!</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport re\nimport glob\nimport csv\nimport sys\n\ncontent_file = open('WWP Project/WWP_texts.txt','wt')\nquotes_file = open('WWP Project/WWP_quotes.txt', 'wt')\nlist_of_files = glob.glob(\"../../../Documents/WWPtextbase/distribution/*.xml\")\n\nns = {'wwp':'http://www.wwp.northeastern.edu/ns/textbase'}\n\ndef content(tree):\n    lines = ''.join(ET.tostring(tree.getroot(),encoding='unicode',method='text')).replace('\\n',' ').replace('\\t',' ').strip()\n    clean_lines = re.sub(' +',' ', lines)\n    return clean_lines.lower()\n\ndef quotes(tree):\n    quotes_list = []\n    for node in tree.findall('.//wwp:quote', namespaces=ns):\n        quote = ET.tostring(node,encoding='unicode',method='text')\n        clean_quote = re.sub(' +',' ', quote)\n        quotes_list.append(clean_quote)\n    return ' '.join(str(v) for v in quotes_list).replace('\\t','').replace('\\n','').lower()\n\ndef pid(tree):\n    for node in tree.findall('.//wwp:sourceDesc//wwp:author/wwp:persName[1]', namespaces=ns):\n        pid = node.attrib.get('ref')\n    return pid.replace('personography.xml#','') # will need to replace 'p:'\n\n\ndef trid(tree): # this function will eventually need to call OT (.//wwp:publicationStmt//wwp:idno)\n    for node in tree.findall('.//wwp:sourceDesc',namespaces=ns):\n        trid = node.attrib.get('n')\n    return trid\n\ncontent_file.write('pid' + '\\t' + 'trid' + '\\t' +'text' + '\\n')\nquotes_file.write('pid' + '\\t' + 'trid' + '\\t' + 'quotes' + '\\n')\n\nfor file_name in list_of_files:\n    file = open(file_name, 'rt')\n    tree = ET.parse(file)\n    file.close()\n    pid = pid(tree)\n    trid = trid(tree)\n    content = content(tree)\n    quotes = quotes(tree)\n    content_file.write(pid + '\\t' + trid + '\\t' + content + '\\n')\n    quotes_file.write(pid + '\\t' + trid + '\\t' + quotes + '\\n')\n\ncontent_file.close()\nquotes_file.close()\n</code></pre>\n"}, {"tags": ["python", "iis", "flask", "windows-authentication"], "comments": [{"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1474500177, "post_id": 39627947, "comment_id": 66561388, "body": "Reading this might help you. <a href=\"http://stackoverflow.com/questions/23894782/get-windows-username-with-flask\" title=\"get windows username with flask\">stackoverflow.com/questions/23894782/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1386, "user_id": 3688683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0lBiI.jpg?s=128&g=1", "display_name": "scomes", "link": "https://stackoverflow.com/users/3688683/scomes"}, "is_accepted": true, "score": 4, "last_activity_date": 1474578261, "last_edit_date": 1495542794, "creation_date": 1474578261, "answer_id": 39648839, "question_id": 39627947, "link": "https://stackoverflow.com/questions/39627947/how-do-i-get-the-username-of-the-current-user-in-a-flask-app-on-an-iis-server-us/39648839#39648839", "title": "How do I get the username of the current user in a Flask app on an IIS server using Windows Authentication?", "body": "<p>It turns out that the answer on <a href=\"https://stackoverflow.com/questions/33347412/rails-app-remote-user-attribute-in-iis-8-5-with-windows-authentication\">this post</a> works for my configuration as well. I simply downloaded ISAPI_Rewrite 3, copy and pasted the text into httpd.conf, and was able to access the name of the user by calling <code>request.headers.get('X-Remote-User')</code> in my Python code. </p>\n"}, {"tags": [], "owner": {"reputation": 516, "user_id": 9204563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_ScRvwmCu2Y/AAAAAAAAAAI/AAAAAAAAAIk/-SEDhEQzH5E/photo.jpg?sz=128", "display_name": "hui chen", "link": "https://stackoverflow.com/users/9204563/hui-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1606677364, "creation_date": 1606677364, "answer_id": 65064119, "question_id": 39627947, "link": "https://stackoverflow.com/questions/39627947/how-do-i-get-the-username-of-the-current-user-in-a-flask-app-on-an-iis-server-us/65064119#65064119", "title": "How do I get the username of the current user in a Flask app on an IIS server using Windows Authentication?", "body": "<p>If the user is logged in, you can use flask_login.current_user.name to get the info.</p>\n"}], "owner": {"reputation": 1386, "user_id": 3688683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0lBiI.jpg?s=128&g=1", "display_name": "scomes", "link": "https://stackoverflow.com/users/3688683/scomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6254, "favorite_count": 0, "accepted_answer_id": 39648839, "answer_count": 2, "score": 4, "last_activity_date": 1606677364, "creation_date": 1474500077, "last_edit_date": 1495541212, "question_id": 39627947, "link": "https://stackoverflow.com/questions/39627947/how-do-i-get-the-username-of-the-current-user-in-a-flask-app-on-an-iis-server-us", "title": "How do I get the username of the current user in a Flask app on an IIS server using Windows Authentication?", "body": "<p>I have a Flask app (Python 2.7) running on an IIS server in Windows 10. The server is configured to use Windows Authentication. I am using an HttpPlatformHandler in order to execute the Python code.  </p>\n\n<p>I have verified that the authentication is working and am able to see the Kerberos \"Negotiate\" auth header. However, I cannot find a way to access the username of the user who requested the page. </p>\n\n<p>I have tried printing the entire request header and request environment and it is not there. This <a href=\"https://stackoverflow.com/questions/31412852/flask-python-decoding-username-ntlm-or-negotiate-authentication-header\">post</a> seems to be about my issue but the code in it is not correct. <strong>What can I do to pass the Windows username of the requester to my python code?</strong></p>\n\n<p>I would like to access the username of the user in order to both restrict page access by user and remove certain elements from pages based on user. </p>\n"}, {"tags": ["python", "python-3.x", "price"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 4, "creation_date": 1474499738, "post_id": 39627886, "comment_id": 66561289, "body": "Can you be specific about where in your code this issue is occurring?"}], "answers": [{"tags": [], "owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "is_accepted": false, "score": 0, "last_activity_date": 1474500617, "last_edit_date": 1474500617, "creation_date": 1474500085, "answer_id": 39627948, "question_id": 39627886, "link": "https://stackoverflow.com/questions/39627886/desk-price-calculation-in-python/39627948#39627948", "title": "Desk Price Calculation in Python", "body": "<p>I guess you get an error like this (that should have been added to your question by the way) :</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 42, in &lt;module&gt;\n    display_price()\nTypeError: display_price() missing 3 required positional arguments: 'price', 'wood', and 'drawer_count'\n</code></pre>\n\n<p>You defined your <code>display_price()</code> function like this :</p>\n\n<pre><code>def display_price(price, wood, drawer_count):\n</code></pre>\n\n<p>So it expects 3 arguments when you call it, but you call it without any.</p>\n\n<p>You have to either :</p>\n\n<ol>\n<li>redefine your function without argument (that would be the most logical solution since <code>price</code>, <code>wood</code> and <code>drawer_count</code> are defined in its scope.</li>\n<li>pass these arguments to the call of this function, but that would be useless for the reason I mentionned in <strong>1</strong>. Unless you remove these arguments definition.</li>\n</ol>\n\n<p><strong>PS:</strong> You'll have the same problem with <code>calculate_price()</code> since it expects two arguments, but you pass none to it.</p>\n\n<h2>About function's arguments :</h2>\n\n<p>When you define a function, you also define the arguments it expects when you call it.</p>\n\n<p>For instance, if you define :</p>\n\n<pre><code>def f(foo):\n    # Do some stuff\n</code></pre>\n\n<p>a correct <code>f</code> call would be <code>f(some_val)</code> and not <code>f()</code></p>\n\n<p>Plus it would be useless to define <code>f</code> like this :</p>\n\n<pre><code>def f(foo):\n    foo = someval\n    # Do some other stuff\n</code></pre>\n\n<p>since foo is direcly redefined in the function's scope without even using the initial value.</p>\n\n<p>This will help you to discover functions basics :</p>\n\n<p><a href=\"http://www.tutorialspoint.com/python/python_functions.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/python/python_functions.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1474500632, "last_edit_date": 1474500632, "creation_date": 1474500233, "answer_id": 39627971, "question_id": 39627886, "link": "https://stackoverflow.com/questions/39627886/desk-price-calculation-in-python/39627971#39627971", "title": "Desk Price Calculation in Python", "body": "<p>It would appear that you wanted to pass in some parameters to your method. </p>\n\n<p>If that is the case, you need to move the \"calculate\" and \"get\" functions.</p>\n\n<p>And, no need to re-prompt for input - you already have parameters</p>\n\n<pre><code>def calculate_price(wood_type, drawers):\n    # wood_type = get_wood_type()\n    # drawers = get_drawers()\n    wood_price = 0\n    drawer_price = 0\n\n    # ... other calulations\n\n    return drawer_price + wood_price\n\ndef display_price(wood, drawer_count):\n    price = calculate_price(wood, drawer_count)\n\n    ### Either do this here, or pass in via the main method below\n    # wood = get_wood_type()\n    # drawer_count = get_drawers()\n\n    print(\"The amount of drawers you requested were: \", drawer_count, \". Their total was \", drawer_count * 30, \".\")\n    print(\"The type of would you requested was \", wood, \". The total for that was \", drawer_count * 30 - price, \".\")\n    print(\"Your total is: \", price)\n\nif __name__ == '__main__':\n\n    wood = get_wood_type()\n    drawer_count = get_drawers()\n\n    display_price(wood, drawer_count)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 2635981, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/feb29f8063c191c73f225d293d889bc2?s=128&d=identicon&r=PG", "display_name": "omar", "link": "https://stackoverflow.com/users/2635981/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1182, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1474514070, "creation_date": 1474499628, "last_edit_date": 1474514070, "question_id": 39627886, "link": "https://stackoverflow.com/questions/39627886/desk-price-calculation-in-python", "title": "Desk Price Calculation in Python", "body": "<p>I have a little exercise I need to do in Python that's called \"Desk Price Calculation\". There need to be 4 functions which are used in the program. </p>\n\n<p>My main problem is using the output of a function in another function.</p>\n\n<pre><code>def get_drawers():\n    drawers = int(input('How many goddamn drawers would you like? '))\n    return drawers\n\ndef get_wood_type():\n    print('The types of wood available are Pine, Mahogany or Oak. For any other wood, type Other')\n    wood = str(input('What type of wood would you like? '))\n    return wood\n\ndef calculate_price(wood_type, drawers):\n    wood_type = get_wood_type()\n    drawers = get_drawers()\n    wood_price = 0\n    drawer_price = 0\n\n    #wood price\n    if wood_type == \"Pine\":\n        wood_price = 100\n    elif wood_type == \"Oak\":\n        wood_price = 140\n    elif wood_type == \"Mahogany\":\n        wood_price = 180\n    else:\n        wood_price = 180\n\n    #price of drawers\n    drawer_price = drawers * 30\n\n    return drawer_price + wood_price\n\ndef display_price(price, wood, drawer_count):\n    price = calculate_price()\n    wood = get_wood_type()\n    drawer_count = get_drawers()\n\n    print(\"The amount of drawers you requested were: \", drawer_count, \". Their total was \", drawer_count * 30, \".\")\n    print(\"The type of would you requested was \", get_wood_type(), \". The total for that was \", drawer_count * 30 - calculate_price(), \".\")\n    print(\"Your total is: \", price)\n\nif __name__ == '__main__':\n\n    display_price()\n</code></pre>\n"}, {"tags": ["python", "django", "mongodb", "python-3.x", "pymongo"], "comments": [{"owner": {"reputation": 5418, "user_id": 4879270, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/MU8BU.jpg?s=128&g=1", "display_name": "Windsooon", "link": "https://stackoverflow.com/users/4879270/windsooon"}, "edited": false, "score": 0, "creation_date": 1474508635, "post_id": 39627869, "comment_id": 66563164, "body": "Please add your settings.py."}, {"owner": {"reputation": 1316, "user_id": 4155792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TaiBY.jpg?s=128&g=1", "display_name": "Gaurav Paliwal", "link": "https://stackoverflow.com/users/4155792/gaurav-paliwal"}, "reply_to_user": {"reputation": 5418, "user_id": 4879270, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/MU8BU.jpg?s=128&g=1", "display_name": "Windsooon", "link": "https://stackoverflow.com/users/4879270/windsooon"}, "edited": false, "score": 0, "creation_date": 1474530944, "post_id": 39627869, "comment_id": 66571223, "body": "I have added setting.py @Windsooon"}], "answers": [{"comments": [{"owner": {"reputation": 2950, "user_id": 3405554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ejRLl.jpg?s=128&g=1", "display_name": "harshil9968", "link": "https://stackoverflow.com/users/3405554/harshil9968"}, "edited": false, "score": 0, "creation_date": 1474531952, "post_id": 39633607, "comment_id": 66571825, "body": "He want it to be done for MongoDB you added instruction for PostGRES"}, {"owner": {"reputation": 5418, "user_id": 4879270, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/MU8BU.jpg?s=128&g=1", "display_name": "Windsooon", "link": "https://stackoverflow.com/users/4879270/windsooon"}, "reply_to_user": {"reputation": 2950, "user_id": 3405554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ejRLl.jpg?s=128&g=1", "display_name": "harshil9968", "link": "https://stackoverflow.com/users/3405554/harshil9968"}, "edited": false, "score": 0, "creation_date": 1474532608, "post_id": 39633607, "comment_id": 66572206, "body": "sorry, my mistake."}, {"owner": {"reputation": 1316, "user_id": 4155792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TaiBY.jpg?s=128&g=1", "display_name": "Gaurav Paliwal", "link": "https://stackoverflow.com/users/4155792/gaurav-paliwal"}, "edited": false, "score": 0, "creation_date": 1475571669, "post_id": 39633607, "comment_id": 66984627, "body": "improper configuration"}], "tags": [], "owner": {"reputation": 5418, "user_id": 4879270, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/MU8BU.jpg?s=128&g=1", "display_name": "Windsooon", "link": "https://stackoverflow.com/users/4879270/windsooon"}, "is_accepted": false, "score": 1, "last_activity_date": 1474532583, "last_edit_date": 1474532583, "creation_date": 1474531807, "answer_id": 39633607, "question_id": 39627869, "link": "https://stackoverflow.com/questions/39627869/how-to-use-mongodb-with-django-framework-and-python3/39633607#39633607", "title": "How to use MongoDB with Django Framework and Python3", "body": "<p>From the docs <a href=\"https://django-mongodb-engine.readthedocs.io/en/latest/topics/setup.html#configuration\" rel=\"nofollow\">django-mongodb-engine</a></p>\n\n<pre><code>DATABASES = {\n   'default' : {\n      'ENGINE' : 'django_mongodb_engine',\n      'NAME' : 'my_database'\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 1316, "user_id": 4155792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TaiBY.jpg?s=128&g=1", "display_name": "Gaurav Paliwal", "link": "https://stackoverflow.com/users/4155792/gaurav-paliwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1227, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1490098027, "creation_date": 1474499515, "last_edit_date": 1474530755, "question_id": 39627869, "link": "https://stackoverflow.com/questions/39627869/how-to-use-mongodb-with-django-framework-and-python3", "title": "How to use MongoDB with Django Framework and Python3", "body": "<p>I am a newbie to python,django, and mongoDB world. I've setup Django project (Virtualenv, Python3, Django==1.10.1 MongoDB) and installed some basic package requirements: </p>\n\n<pre><code>Django==1.10.1\ndjango-mongodb-engine==0.6.0\ndjangotoolbox==1.8.0\nmongoengine==0.9.0\npymongo==3.3.0\n</code></pre>\n\n<p>but when I tried to syncdb using <code>python3 manage.py syncdb</code>, then it's showing </p>\n\n<pre><code>~/virtenv/lib/python3.5/site-packages/django_mongodb_engine/base.py\", line 272\n    raise ImproperlyConfigured, exc_info[1], exc_info[2]\n                              ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p><strong>Settings.py</strong></p>\n\n<pre><code>import os\nimport mongoengine\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n\nDEBUG = True\n\nALLOWED_HOSTS = []\n\n# Application definition\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nROOT_URLCONF = 'fvp_amu.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'fvp_amu.wsgi.application'\n\n\n# Database\n\nDATABASES = {\n    'default' : {\n        'ENGINE' : '',\n        'NAME' : 'fvp_amu'\n        }\n    }\n\n# Password validation\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\nSTATIC_URL = '/static/'\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "reply_to_user": {"reputation": 343, "user_id": 6861122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da59c2e516726dda5784e35f6a45cb17?s=128&d=identicon&r=PG&f=1", "display_name": "Yichuan Wang", "link": "https://stackoverflow.com/users/6861122/yichuan-wang"}, "edited": false, "score": 1, "creation_date": 1474499914, "post_id": 39627884, "comment_id": 66561327, "body": "@YichuanWang And if you start with a 1-d array (<code>a_1d = numpy.array([1,2,3,4])</code>), you can always transform it into a 2-d array with eg <code>a_2d = a_1d[None, :]</code>"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 42, "last_activity_date": 1474499733, "last_edit_date": 1474499733, "creation_date": 1474499620, "answer_id": 39627884, "question_id": 39627852, "link": "https://stackoverflow.com/questions/39627852/why-does-the-shape-of-a-1d-array-not-show-the-number-of-rows-as-1/39627884#39627884", "title": "Why does the shape of a 1D array not show the number of rows as 1?", "body": "<p>The concept of <em>rows</em> and <em>columns</em> applies when you have a 2D array. However, the array <code>numpy.array([1,2,3,4])</code> is a 1D array and so has only one dimension, therefore <code>shape</code> rightly returns a single valued iterable. </p>\n\n<p>For a 2D version of the same array, consider the following instead:</p>\n\n<pre><code>&gt;&gt;&gt; a = numpy.array([[1,2,3,4]]) # notice the extra square braces\n&gt;&gt;&gt; a.shape\n(1, 4)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1205, "user_id": 4667934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hk11W.jpg?s=128&g=1", "display_name": "LinkBerest", "link": "https://stackoverflow.com/users/4667934/linkberest"}, "is_accepted": false, "score": 3, "last_activity_date": 1474500061, "creation_date": 1474500061, "answer_id": 39627945, "question_id": 39627852, "link": "https://stackoverflow.com/questions/39627852/why-does-the-shape-of-a-1d-array-not-show-the-number-of-rows-as-1/39627945#39627945", "title": "Why does the shape of a 1D array not show the number of rows as 1?", "body": "<p>Rather then converting this to a 2d array, which may not be an option every time - one could either check the <code>len()</code> of the tuple returned by shape or just check for an index error as such:</p>\n\n<pre><code>import numpy\n\na = numpy.array([1,2,3,4])\nprint(a.shape)\n# (4,)\nprint(a.shape[0])\ntry:\n    print(a.shape[1])\nexcept IndexError:\n    print(\"only 1 column\")\n</code></pre>\n\n<p>Or you could just try and assign this to a variable for later use (or return or what have you) if you know you will only have 1 or 2 dimension shapes:</p>\n\n<pre><code>try:\n    shape = (a.shape[0], a.shape[1])\nexcept IndexError:\n    shape = (1, a.shape[0])\n\nprint(shape)\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 6861122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da59c2e516726dda5784e35f6a45cb17?s=128&d=identicon&r=PG&f=1", "display_name": "Yichuan Wang", "link": "https://stackoverflow.com/users/6861122/yichuan-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87436, "favorite_count": 5, "accepted_answer_id": 39627884, "answer_count": 2, "score": 34, "last_activity_date": 1527661657, "creation_date": 1474499408, "last_edit_date": 1527661657, "question_id": 39627852, "link": "https://stackoverflow.com/questions/39627852/why-does-the-shape-of-a-1d-array-not-show-the-number-of-rows-as-1", "title": "Why does the shape of a 1D array not show the number of rows as 1?", "body": "<p>I know that numpy array has a method called shape that returns [No.of rows, No.of columns], and shape[0] gives you the number of rows, shape[1] gives you the number of columns. </p>\n\n<pre><code>a = numpy.array([[1,2,3,4], [2,3,4,5]])\na.shape\n&gt;&gt; [2,4]\na.shape[0]\n&gt;&gt; 2\na.shape[1]\n&gt;&gt; 4\n</code></pre>\n\n<p>However, if my array only have one row, then it returns [No.of columns, ]. And shape[1] will be out of the index. For example</p>\n\n<pre><code>a = numpy.array([1,2,3,4])\na.shape\n&gt;&gt; [4,]\na.shape[0]\n&gt;&gt; 4    //this is the number of column\na.shape[1]\n&gt;&gt; Error out of index\n</code></pre>\n\n<p>Now how do I get the number of rows of an numpy array if the array may have only one row?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "string", "cryptography"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1474499843, "post_id": 39627844, "comment_id": 66561309, "body": "Debugging is part of writing code, add the results of your debugging efforts to the question, not: &quot;something like&quot;. Check the length being sent/received. examine the communications with something like Charles Proxy. Understand that encrypted anything is binary data, not a character string, as such it will contain bytes that have no display character, thus best displayed as hexadecimal."}, {"owner": {"reputation": 73, "user_id": 5769950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67919d95cd309341851948bf0a865111?s=128&d=identicon&r=PG&f=1", "display_name": "Moher", "link": "https://stackoverflow.com/users/5769950/moher"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1474501006, "post_id": 39627844, "comment_id": 66561572, "body": "Thank you for a comment. This &quot;something like&quot; part was added to the question just to visualize the overall form of the encoded message when it is printed with python print function. I wasn&#39;t sure if it is even important. I think that the most important debugging result is already mentioned: the length of the encrypted message in client and in server is 256 and e.g. 243, respectively. Also, the result of the type() function is &#39;str&#39; and &#39;unicode&#39;, respectively. However, Your notice about binary data and hexadecimal representation is interesting - I am going to check it. Thank you."}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 2, "creation_date": 1474520815, "post_id": 39627844, "comment_id": 66566152, "body": "This seems like an issue with your data transmission and not with the encryption itself. The problem only came to light because the decryption procedure expected something different, but this is a valid expectation. If you don&#39;t find the issue yourself, please add the missing code which shows how the data is transmitted and received."}, {"owner": {"reputation": 1817, "user_id": 1544500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b4bb4899b045ff2151b03836e2c29ba?s=128&d=identicon&r=PG&f=1", "display_name": "user1544500", "link": "https://stackoverflow.com/users/1544500/user1544500"}, "edited": false, "score": 0, "creation_date": 1474529557, "post_id": 39627844, "comment_id": 66570346, "body": "Yes - I think we need to see the code that is responsible for transmission to help you debug the problem. Please paste!"}, {"owner": {"reputation": 73, "user_id": 5769950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67919d95cd309341851948bf0a865111?s=128&d=identicon&r=PG&f=1", "display_name": "Moher", "link": "https://stackoverflow.com/users/5769950/moher"}, "edited": false, "score": 0, "creation_date": 1474574158, "post_id": 39627844, "comment_id": 66598951, "body": "Dear mata... Guess who is awesome? You are awesome! Thank you a lot! The key word: &quot;base64&quot;. That is what I was looking for! Thank you again!"}, {"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1474576922, "post_id": 39627844, "comment_id": 66600409, "body": "In that case I&#39;ll post it as an answer so you can accept it. Glad it works :)"}], "answers": [{"tags": [], "owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "is_accepted": true, "score": 3, "last_activity_date": 1474576963, "creation_date": 1474576963, "answer_id": 39648542, "question_id": 39627844, "link": "https://stackoverflow.com/questions/39627844/python-ciphertext-length-must-be-equal-to-key-size-different-string-length-a/39648542#39648542", "title": "Python - Ciphertext length must be equal to key size - different string length after passing it to server", "body": "<p>Your encrypted message is a binary blob of data, and you seem to treat it as string in javascript, but javascript strings are not made for binary data, and when the transport format is json it gets even more complicated.</p>\n\n<p>The standard approach would be to base64 encode the encrypted message before sending and decode it when it's received.</p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 7907965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14186a90dd2a655a1587dd70a21c0064?s=128&d=identicon&r=PG&f=1", "display_name": "Vishvajeet Ramanuj", "link": "https://stackoverflow.com/users/7907965/vishvajeet-ramanuj"}, "is_accepted": false, "score": 0, "last_activity_date": 1595318523, "creation_date": 1595318523, "answer_id": 63010049, "question_id": 39627844, "link": "https://stackoverflow.com/questions/39627844/python-ciphertext-length-must-be-equal-to-key-size-different-string-length-a/63010049#63010049", "title": "Python - Ciphertext length must be equal to key size - different string length after passing it to server", "body": "<p>I got the same error when working with encryption on django project. In order to solve the error check bellow points</p>\n<ul>\n<li>Make sure to encode using base64 before sending data to db and on retrieving data decode it</li>\n<li>User Binary key for storing this field in database and not Character based field</li>\n<li>This seems silly but also make sure that you are using right pair of keys for encryption and decryption, and reading correct key for encryption and decryption. It is also good idea to check encryption is working properly by making small program so in case if there is little error in encryption it will not bother you in you project. Beacause it is comparatively hard to solve the same error in project. Because of complexity of project.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5471859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed761f9ae72c924a8a67aa3f8fe7449b?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Agarwal", "link": "https://stackoverflow.com/users/5471859/deepak-agarwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1613568770, "creation_date": 1613568770, "answer_id": 66242949, "question_id": 39627844, "link": "https://stackoverflow.com/questions/39627844/python-ciphertext-length-must-be-equal-to-key-size-different-string-length-a/66242949#66242949", "title": "Python - Ciphertext length must be equal to key size - different string length after passing it to server", "body": "<p>User mata(1st answer) works for me too. I spoiled one whole day for this.\nIn python\nimport base64</p>\n<h2>data = base64.b64encode(cipher_text)\n// send it over network</h2>\n<p>On receiving end</p>\n<p>import base64</p>\n<p>rec_data = base64.b64decode(received_data)</p>\n"}], "owner": {"reputation": 73, "user_id": 5769950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67919d95cd309341851948bf0a865111?s=128&d=identicon&r=PG&f=1", "display_name": "Moher", "link": "https://stackoverflow.com/users/5769950/moher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2770, "favorite_count": 0, "accepted_answer_id": 39648542, "answer_count": 3, "score": 4, "last_activity_date": 1613568770, "creation_date": 1474499375, "last_edit_date": 1495535244, "question_id": 39627844, "link": "https://stackoverflow.com/questions/39627844/python-ciphertext-length-must-be-equal-to-key-size-different-string-length-a", "title": "Python - Ciphertext length must be equal to key size - different string length after passing it to server", "body": "<p>I have a problem with decoding the encrypted message after passing it from client to the server. I am using <a href=\"https://cryptography.io/en/latest/hazmat/primitives/asymmetric/rsa/\" rel=\"nofollow noreferrer\">Cryptography</a>. I am encoding the message on the client side using the script below:</p>\n\n<pre><code>encMessage = public_key.encrypt(message, padding.OAEP(mgf=padding.MGF1(algorithm=hashes.SHA1()), algorithm=hashes.SHA1(),label=None))\n</code></pre>\n\n<p>After this encoding the <em>len()</em> function on the client side tells me properly that the <em>encMessage</em> is 256 long. Also the <em>type()</em> function tells me that <em>encMessage</em> is <em>'str'</em>. The <em>encMessage</em> when printed looks something like this:</p>\n\n<blockquote>\n  <p>I\\xf0gr\\xf5\\xf8\\xf2F\\xde\\xc7\\xe4\\x91\\xa1F3\\xc1\\x05\\x06\\xd7Y:\\xc9\\xcf\\xed'\\xf49\\xd5\\x99Z\\xed\\x93\\xba8\\xdd\\x0b\\xe3?</p>\n</blockquote>\n\n<p>However, when I pass this <em>encMessage</em> to the server using <em>rest_framework</em> then, after using the code below on the server side:</p>\n\n<pre><code>message = private_key.decrypt(encMessage,padding.OAEP(mgf=padding.MGF1(algorithm=hashes.SHA1()), algorithm=hashes.SHA1(),label=None))\n</code></pre>\n\n<p>I get the error: \"Ciphertext length must be equal to key size\". I checked this and now the <em>len()</em> function on the server side used on <em>encMessage</em> gives me not 256 but something smaller. Also the <em>type()</em> function shows <em>'unicode'</em>.</p>\n\n<p>I assume that there is something wrong with <em>encMessage</em> conversion during data sending from client to server but I have no idea what to do with it.</p>\n\n<p>Thank you in advance for any suggestions!</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Answering the comment about showing how I communicate with the server and send the data - this is what I do:</p>\n\n<pre><code>data = {'message': $scope.message};\nloginApi.getMessageEncrypted(data)\n    .success(\n        function(dataEncrypted) {\n            loginApi.checkMessage(dataEncrypted['encMessage'])\n                .success(\n                    function(dataDecrypted) {\n                        $log.log('Server responded properly');\n                    })\n                .error(\n                    function(errorInfo, status) {\n                        $log.info('Server user data answer error.')\n                    });\n        })\n    .error(\n        function(errorInfo, status) {\n            $log.info('Client encryption error.')\n        });\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>After clicking some button on the website angular's <em>getMessageEncrypted</em> function sends <em>message</em> in <em>data</em> variable using <em>post</em> to <em>django REST framework</em> APIview and then serializer object which are written in python on the client side. In serializer the message is encrypted using:</p>\n\n<pre><code>encMessage = public_key.encrypt(message, padding.OAEP(mgf=padding.MGF1(algorithm=hashes.SHA1()), algorithm=hashes.SHA1(),label=None))\ndataEncrypted = {'encMessage': encMessage};\nreturn dataEncrypted\n</code></pre>\n\n<p>and sent back to angular using <em>dataEncrypted</em> dictionary-like variable. Then this message is sent with angular's <em>checkMessage</em> function (also with <em>post</em>) to the <em>django REST framework</em> APIview and then serializer object on the server side. In server's serializer the message is decrypted using:</p>\n\n<pre><code>message = private_key.decrypt(encMessage,padding.OAEP(mgf=padding.MGF1(algorithm=hashes.SHA1()), algorithm=hashes.SHA1(),label=None))\n</code></pre>\n\n<p>and similarly sent back to angular in <em>dataDecrypted</em> dictionary-like variable. However, this never happens because in the decryption line I get <em>Ciphertext length must be equal to key size</em> error.</p>\n\n<p>I think that there is some change of the message coding (like utf-8, unicode or something) on the border of client-angular when encrypted message is sent to angular from python function on the client side or on the border of angular-server when encrypted message is sent from angular to python APIview on the server side.</p>\n\n<p>I am really sorry for probably lack of \"naming\" experience. I am not really into proper nomenclature.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>User <a href=\"https://stackoverflow.com/users/1350899/mata\">mata</a> answered my question. What I had to do was to encode encrypted message with <em>base64</em> before returning it to angular and sending it to server api. Then on the server side I had to decode it from <em>base64</em> and then decode the message. Thank you again!</p>\n"}, {"tags": ["python", "json", "session", "flask"], "comments": [{"owner": {"reputation": 4979, "user_id": 2676531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc88aa76113d738e11685389a1409a26?s=128&d=identicon&r=PG", "display_name": "Celeo", "link": "https://stackoverflow.com/users/2676531/celeo"}, "edited": false, "score": 0, "creation_date": 1474560511, "post_id": 39627827, "comment_id": 66591305, "body": "Is your Ajax call not updating the client cookies?"}], "answers": [{"tags": [], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "is_accepted": true, "score": 0, "last_activity_date": 1474581212, "creation_date": 1474581212, "answer_id": 39649464, "question_id": 39627827, "link": "https://stackoverflow.com/questions/39627827/invalidate-flask-session/39649464#39649464", "title": "Invalidate Flask session?", "body": "<p>Solved it .... didn't know that by default Flask uses client-side sessions !?!!? whaaat !!</p>\n\n<p>Once you install Flask-Session instead everything is fine !\n<a href=\"https://pythonhosted.org/Flask-Session/\" rel=\"nofollow\">https://pythonhosted.org/Flask-Session/</a></p>\n"}], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 39649464, "answer_count": 1, "score": 0, "last_activity_date": 1474581212, "creation_date": 1474499199, "question_id": 39627827, "link": "https://stackoverflow.com/questions/39627827/invalidate-flask-session", "title": "Invalidate Flask session?", "body": "<p>I'm testing JSON based login/logout functionality with httpie (<a href=\"https://github.com/jkbrzt/httpie#sessions\" rel=\"nofollow\">https://github.com/jkbrzt/httpie#sessions</a>).\nThe problem I have is that once I login no matter how many times I \"logout\" I can not clean up the session.\nOn the logout I can see clearly that the session is cleared, but when I call \"status\" afterwards the session \ncontent is preserved (still there) ???</p>\n\n<p>Any idea what I'm doing wrong ? How to invalidate the Session on logout ?</p>\n\n<p>here is the code :</p>\n\n<pre><code>http  -v --session=log3 -j :5000/start/status\nhttp  -v --session=log3 -j :5000/start/logout\nhttp  -v --session=log3 -j :5000/start/status\n\n\n\n@start.route('/logout', methods=['GET'])\ndef logout():\n    print session\n    session.pop('logged_in', None)\n    session.clear()\n    print session\n    return jsonify({'rv' : 'ok' })\n\n@start.route('/status', methods=['GET'])\ndef status():\n  print session\n  if 'logged_in' in session and session['logged_in'] :       \n     return jsonify({'status' : True })\n  return jsonify({'status' : False})\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "edited": false, "score": 0, "creation_date": 1474502572, "post_id": 39627822, "comment_id": 66561888, "body": "I made a whole answer about Karnaugh tables but now I&#39;m not sure anymore about what you&#39;re searching for, are you trying to associate some logical rules to a rank?"}, {"owner": {"reputation": 775, "user_id": 5248253, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4c3b74fdc4e4a76aaba792f97a7acf50?s=128&d=identicon&r=PG&f=1", "display_name": "HighwayJohn", "link": "https://stackoverflow.com/users/5248253/highwayjohn"}, "reply_to_user": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "edited": false, "score": 0, "creation_date": 1474532164, "post_id": 39627822, "comment_id": 66571967, "body": "I guess your answer fit very well to my problem. I have to think about it more"}], "answers": [{"comments": [{"owner": {"reputation": 775, "user_id": 5248253, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4c3b74fdc4e4a76aaba792f97a7acf50?s=128&d=identicon&r=PG&f=1", "display_name": "HighwayJohn", "link": "https://stackoverflow.com/users/5248253/highwayjohn"}, "edited": false, "score": 0, "creation_date": 1474531407, "post_id": 39628120, "comment_id": 66571516, "body": "Okay, this sounds good :) I will try to get my head around your answer"}, {"owner": {"reputation": 775, "user_id": 5248253, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4c3b74fdc4e4a76aaba792f97a7acf50?s=128&d=identicon&r=PG&f=1", "display_name": "HighwayJohn", "link": "https://stackoverflow.com/users/5248253/highwayjohn"}, "edited": false, "score": 0, "creation_date": 1474543365, "post_id": 39628120, "comment_id": 66579122, "body": "Thanks, a lot :) Found an algorithm for that, which works perfectly: <a href=\"http://stackoverflow.com/questions/7537125/quine-mccluskey-algorithm-in-python\">link</a>"}], "tags": [], "owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "is_accepted": true, "score": 1, "last_activity_date": 1474531728, "last_edit_date": 1474531728, "creation_date": 1474501457, "answer_id": 39628120, "question_id": 39627822, "link": "https://stackoverflow.com/questions/39627822/finding-the-smallest-common-denominator/39628120#39628120", "title": "Finding the smallest common denominator", "body": "<p>Assuming that this <code>fitness value</code> may depend of the value of each bit in your binary entry, and that you're searching the rules that can sum up your truth table (I'm not sure I understood your question very well about this point), You could use something like a <a href=\"https://en.wikipedia.org/wiki/Karnaugh_map\" rel=\"nofollow\">Karnaugh map</a></p>\n\n<p>These maps work like this :</p>\n\n<p>You list your factors (here value of 1st bit, 2nd bit...) and separate them in two lists (one for the rows, one for the columns).</p>\n\n<p>Order each list with a <a href=\"https://en.wikipedia.org/wiki/Gray_code\" rel=\"nofollow\">Gray Code</a>.</p>\n\n<p>Use the set of values for each list for respectively columns and rows in a table.</p>\n\n<p>You know have a table that represent every possibilities of values for your binary entries.</p>\n\n<p>Then, you list the fitness values for each entry in your table (1 or 0).</p>\n\n<p>Then you'll have to make groups of Trues values (or false) in your table and that will permit you to find the rule for this group (by finding the common caracteristics). You usually group these by squares, or by corners (cf. first wikipedia link).</p>\n\n<h2>Here is a (simple) example with 3 bit entries :</h2>\n\n<p>Assuming you have the following Truth table :</p>\n\n<pre><code>ABC|R\n-----\n000|0\n001|0\n010|1\n011|1\n100|1\n101|0\n110|1\n111|1\n</code></pre>\n\n<p>You can establish the following Karnaugh table :</p>\n\n<pre><code>        AB\n  |     00 |     01 |     11 |     10   &lt;-- AB\n--------------------------------------\n0 |      0 | (1)  1 | (1)  1 | (2)  1\n--------------------------------------\n1 |      0 | (1)  1 | (1)  1 |      0\n\n^\n|\nC\n</code></pre>\n\n<ul>\n<li><p>You can group the 4 in the middle, these 4 have all B True, but A and C may be True or False, so you can sum it up like this :</p>\n\n<p>(1) <code>B -&gt; R</code></p></li>\n<li><p>You also have the one on the top right :</p>\n\n<p>(2) <code>A and !B and !C -&gt; R</code></p></li>\n</ul>\n\n<p>So your rule in this case is :</p>\n\n<pre><code>B or (A and !B and !C) -&gt; R\n</code></pre>\n\n<p>As I mentionned in my comment, I am not sure about what you really want to achieve. But if you're trying to find some simple rules to sum up your truth table, maybe listing the rules found with this step is enough?</p>\n\n<p>I have no python implementation to provide but you may find some on the internet. :) At least you can do it with paper and pencil now. :)</p>\n\n<p>Feel free to ask if something isn't clear!</p>\n\n<p>Here is one of the many tutorials you can find on the internet :</p>\n\n<p><a href=\"http://www.facstaff.bucknell.edu/mastascu/eLessonsHTML/Logic/Logic3.html\" rel=\"nofollow\">http://www.facstaff.bucknell.edu/mastascu/eLessonsHTML/Logic/Logic3.html</a></p>\n\n<p><strong>PS :</strong></p>\n\n<p><code>B</code> means that B is true, and <code>!B</code> means it's false.</p>\n\n<p><strong>PS-2 :</strong></p>\n\n<p>You can also use Boole algebra to reduce your rules.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6006546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a3a9f676545495e50cf07a9e2de43f?s=128&d=identicon&r=PG", "display_name": "EdC", "link": "https://stackoverflow.com/users/6006546/edc"}, "is_accepted": false, "score": 1, "last_activity_date": 1474512590, "last_edit_date": 1495541965, "creation_date": 1474512590, "answer_id": 39629480, "question_id": 39627822, "link": "https://stackoverflow.com/questions/39627822/finding-the-smallest-common-denominator/39629480#39629480", "title": "Finding the smallest common denominator", "body": "<p>As already mentioned, this is a combinational logic minimization problem.</p>\n\n<p>The algorithm typically used is Quine-Mccluskey and somebody has already asked for and posted a Python implementation:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7537125/quine-mccluskey-algorithm-in-python\">Quine-McCluskey algorithm in Python</a></p>\n"}], "owner": {"reputation": 775, "user_id": 5248253, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4c3b74fdc4e4a76aaba792f97a7acf50?s=128&d=identicon&r=PG&f=1", "display_name": "HighwayJohn", "link": "https://stackoverflow.com/users/5248253/highwayjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "accepted_answer_id": 39628120, "answer_count": 2, "score": 2, "last_activity_date": 1474531728, "creation_date": 1474499154, "last_edit_date": 1474500085, "question_id": 39627822, "link": "https://stackoverflow.com/questions/39627822/finding-the-smallest-common-denominator", "title": "Finding the smallest common denominator", "body": "<p>I have the following problem. I have a arrays of <code>L</code> binary entries.(<code>L</code> is usually between 2 and 8 if it is of interest.) All possible combinations do exist. So there are <code>2^L</code> arrays in one realisation. Now each combination will get randomly a fitness value assigned. The fitness value is also either <code>1</code> or <code>0</code>. Now for example it could be, that the following arrays have fitness value <code>0</code>:</p>\n\n<pre><code>1000\n1010\n1100\n1001\n1011\n</code></pre>\n\n<p>Then it is true, that all arrays with a <code>10__</code> are zero and all with <code>1_00</code>. This is actually my problem. I need an algorithm which find these similarities and sort them for their rank. Like <code>10__</code> is of rank <code>2</code> and <code>1_00</code> is of rank <code>3</code>. It is most of the time possible to define all arrays with zero fitness either with a small number of low ranks or with many high ranks. So my output must be ordered and I need to know how many I have of each rank. I can imagine that this is a known problem and there is already a solution?  I hope you can help :) </p>\n"}, {"tags": ["python", "flask", "flask-restful"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474499296, "post_id": 39627804, "comment_id": 66561193, "body": "Isn&#39;t that just a standard Flask route with a <code>:path</code> mapping? The name <code>catch_all</code> could be anything"}, {"owner": {"reputation": 877, "user_id": 6439147, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JFwEU.jpg?s=128&g=1", "display_name": "Ahmad Siavashi", "link": "https://stackoverflow.com/users/6439147/ahmad-siavashi"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474499421, "post_id": 39627804, "comment_id": 66561220, "body": "@cricket_007 maybe, I&#39;m not that familiar with Flask, can I adopt the solution for restful-flask?"}, {"owner": {"reputation": 877, "user_id": 6439147, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JFwEU.jpg?s=128&g=1", "display_name": "Ahmad Siavashi", "link": "https://stackoverflow.com/users/6439147/ahmad-siavashi"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474499554, "post_id": 39627804, "comment_id": 66561243, "body": "@cricket_007 not I&#39;m not talking about the name of the function. I&#39;m looking for a way to catch all sub addresses after <code>&#47;</code>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474499619, "post_id": 39627804, "comment_id": 66561263, "body": "I&#39;m not sure why you&#39;d want to do that. Or why you need Flask-RESTful to accomplish that. You can map only one <code>Resource</code> to a <code>&#47;</code>, I believe. See here. <a href=\"http://flask-restful.readthedocs.io/en/0.3.5/quickstart.html#resourceful-routing\" rel=\"nofollow noreferrer\">flask-restful.readthedocs.io/en/0.3.5/&hellip;</a>"}, {"owner": {"reputation": 877, "user_id": 6439147, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JFwEU.jpg?s=128&g=1", "display_name": "Ahmad Siavashi", "link": "https://stackoverflow.com/users/6439147/ahmad-siavashi"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474499755, "post_id": 39627804, "comment_id": 66561293, "body": "@cricket_007 yeah, I&#39;ve already read that. I need to. sure there must be a way."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 5, "creation_date": 1474499851, "post_id": 39627804, "comment_id": 66561311, "body": "If you are needing to accept anything with slashes, then <code>api.add_resource(Endpoint, &#39;&#47;&lt;path:content&gt;&#39;)</code> should work"}], "answers": [{"tags": [], "owner": {"reputation": 456, "user_id": 10785305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2164d281261ff5f5a239a9ccd5bdcad4?s=128&d=identicon&r=PG", "display_name": "Radu Gheorghe", "link": "https://stackoverflow.com/users/10785305/radu-gheorghe"}, "is_accepted": false, "score": 1, "last_activity_date": 1556417517, "last_edit_date": 1556417517, "creation_date": 1554280470, "answer_id": 55490601, "question_id": 39627804, "link": "https://stackoverflow.com/questions/39627804/catch-all-url-in-flask-restful/55490601#55490601", "title": "Catch-All URL in flask-restful", "body": "<p><a href=\"https://stackoverflow.com/questions/39627804/catch-all-url-in-flask-restful/55490601#comment66561311_39627804\">The comment posted by cricket_007</a> solved the problem:</p>\n\n<blockquote>\n  <p>If you are needing to accept anything with slashes, then <code>api.add_resource(Endpoint, '/&lt;path:content&gt;')</code> should work</p>\n</blockquote>\n"}], "owner": {"reputation": 877, "user_id": 6439147, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JFwEU.jpg?s=128&g=1", "display_name": "Ahmad Siavashi", "link": "https://stackoverflow.com/users/6439147/ahmad-siavashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1766, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1556417517, "creation_date": 1474499016, "last_edit_date": 1474499230, "question_id": 39627804, "link": "https://stackoverflow.com/questions/39627804/catch-all-url-in-flask-restful", "title": "Catch-All URL in flask-restful", "body": "<p>There is a <a href=\"http://flask.pocoo.org/snippets/57/\" rel=\"nofollow\">Catch-All URL</a> ability in Flask</p>\n\n<blockquote>\n<pre><code>from flask import Flask app = Flask(__name__)\n\n@app.route('/', defaults={'path': ''})\n@app.route('/&lt;path:path&gt;')\ndef catch_all(path):\n    return 'You want path: %s' % path\n\nif __name__ == '__main__':\n    app.run()\n</code></pre>\n  \n  <p>A little demonstration..</p>\n\n<pre><code>% curl 127.0.0.1:5000          # Matches the first rule\nYou want path:  \n% curl 127.0.0.1:5000/foo/bar  # Matches the second rule\nYou want path: foo/bar\n</code></pre>\n</blockquote>\n\n<p>How can I have the same functionality in <code>flask-restful</code>?</p>\n"}, {"tags": ["python", "python-3.x", "reportlab", "platypus"], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5884448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153338351892647/picture?type=large", "display_name": "Adrian Serna", "link": "https://stackoverflow.com/users/5884448/adrian-serna"}, "edited": false, "score": 0, "creation_date": 1474556993, "post_id": 39641038, "comment_id": 66588803, "body": "Works perfect. I have a question, How can I do <code>para_fragment.kind</code> to be different from <code>0</code>? @B8vrede"}, {"owner": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "reply_to_user": {"reputation": 171, "user_id": 5884448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153338351892647/picture?type=large", "display_name": "Adrian Serna", "link": "https://stackoverflow.com/users/5884448/adrian-serna"}, "edited": false, "score": 0, "creation_date": 1474557113, "post_id": 39641038, "comment_id": 66588893, "body": "Adding a inline pagebreak will cause it to become kind 1 :)"}, {"owner": {"reputation": 171, "user_id": 5884448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153338351892647/picture?type=large", "display_name": "Adrian Serna", "link": "https://stackoverflow.com/users/5884448/adrian-serna"}, "edited": false, "score": 0, "creation_date": 1474557244, "post_id": 39641038, "comment_id": 66588983, "body": "&quot;Adding a inline pagebreak&quot; like \\n? :D"}, {"owner": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "reply_to_user": {"reputation": 171, "user_id": 5884448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153338351892647/picture?type=large", "display_name": "Adrian Serna", "link": "https://stackoverflow.com/users/5884448/adrian-serna"}, "edited": false, "score": 0, "creation_date": 1474557310, "post_id": 39641038, "comment_id": 66589016, "body": "No the HTML kind which is almost impossible to typ on a phone while standing in a supermarket :p"}, {"owner": {"reputation": 171, "user_id": 5884448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153338351892647/picture?type=large", "display_name": "Adrian Serna", "link": "https://stackoverflow.com/users/5884448/adrian-serna"}, "edited": false, "score": 0, "creation_date": 1474557538, "post_id": 39641038, "comment_id": 66589170, "body": "XD... something like &lt;para&gt;Some long text &lt;/br&gt; Some another long text &lt;/para&gt;"}, {"owner": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "reply_to_user": {"reputation": 171, "user_id": 5884448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153338351892647/picture?type=large", "display_name": "Adrian Serna", "link": "https://stackoverflow.com/users/5884448/adrian-serna"}, "edited": false, "score": 0, "creation_date": 1474637083, "post_id": 39641038, "comment_id": 66625555, "body": "<code>&lt;BR &#47;&gt;</code> was the one I meant :)"}], "tags": [], "owner": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "is_accepted": true, "score": 3, "last_activity_date": 1474552419, "creation_date": 1474552419, "answer_id": 39641038, "question_id": 39627803, "link": "https://stackoverflow.com/questions/39627803/overflow-hidden-on-a-paragraph-in-reportlab/39641038#39641038", "title": "overflow hidden on a Paragraph in Reportlab", "body": "<p>Reportlab doesn't seem to have a native support for hiding overflow, but we can achieve it by utilizing the <code>breakLines</code> function of a <code>Paragraph</code>. The <code>breakLines</code> functions returns an object that contains all the lines of the paragraph given a certain width, thus we can also use it to find the first line and discard everything else.</p>\n\n<p>Basically we need to do the following:</p>\n\n<ol>\n<li>Create a dummy paragraph</li>\n<li>Fetch the lines of the dummy</li>\n<li>Create a the actual paragraph based on the first line of the dummy</li>\n</ol>\n\n<p>Doing this in code looks like this:</p>\n\n<pre><code># Create a dummy paragraph to see how it would split\nlong_string = 'Here should be a variable with long content'*10\nlong_paragraph = Paragraph(long_string, style_p_footer)\n\n# Needed because of a bug in breakLines (value doesn't matter)\nlong_paragraph.width = 4.8 * cm\n\n# Fetch the lines of the paragraph for the given width\npara_fragment = long_paragraph.breakLines(width=4.8 * cm)\n\n# There are 2 kinds of returns so 2 ways to grab the first line\nif para_fragment.kind == 0:\n    shorted_text = \" \".join(para_fragment.lines[0][1])\nelse:\n    shorted_text = \" \".join([w.text for w in para_fragment.lines[0].words])\n\n# To make it pretty add ... when we break of the sentence\nif len(para_fragment.lines) &gt; 1:\n    shorted_text += \"...\"\n\n# Create the actual paragraph\nshorted_paragraph = Paragraph(shorted_text, style_p_footer)\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5884448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153338351892647/picture?type=large", "display_name": "Adrian Serna", "link": "https://stackoverflow.com/users/5884448/adrian-serna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "accepted_answer_id": 39641038, "answer_count": 1, "score": 2, "last_activity_date": 1474552419, "creation_date": 1474499016, "question_id": 39627803, "link": "https://stackoverflow.com/questions/39627803/overflow-hidden-on-a-paragraph-in-reportlab", "title": "overflow hidden on a Paragraph in Reportlab", "body": "<p>I have a <code>Table</code> with 2 cells, inside of each one there is a <code>Paragraph</code></p>\n\n<pre><code>from reportlab.platypus import Paragraph, Table, TableStyle\nfrom reportlab.lib.styles import ParagraphStyle\nfrom reportlab.lib.units import cm\n\ntable_style_footer = TableStyle(\n            [\n                ('LEFTPADDING', (0, 0), (-1, -1), 0),\n                ('RIGHTPADDING', (0, 0), (-1, -1), 0),\n                ('TOPPADDING', (0, 0), (-1, -1), 0),\n                ('BOTTOMPADDING', (0, 0), (-1, -1), 0),\n                ('BOX', (0, 0), (-1, -1), 1, (0, 0, 0)),\n                ('VALIGN', (0, 0), (-1, -1), 'TOP'),\n            ]\n        )\n\nstyle_p_footer = ParagraphStyle('Normal')\nstyle_p_footer.fontName = 'Arial'\nstyle_p_footer.fontSize = 8\nstyle_p_footer.leading = 10\n\nTable([\n       [\n        Paragraph('Send To:', style_p_footer), \n        Paragraph('Here should be a variable with long content', style_p_footer)\n       ]\n      ],\n      [1.7 * cm, 4.8 * cm],\n      style=table_style_footer\n     )\n</code></pre>\n\n<p>I need hide the overflow content of paragraph , but the paragraph instead of hide the overflow content does a break line.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 1486, "user_id": 6828711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2j21.png?s=128&g=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/6828711/nan"}, "edited": false, "score": 0, "creation_date": 1474499258, "post_id": 39627787, "comment_id": 66561179, "body": "try ... help(np.savetxt) to get what you can do with numpy function specifics. ..."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "edited": false, "score": 0, "creation_date": 1474551635, "post_id": 39628096, "comment_id": 66584888, "body": "Actually in order to make all intermediate directories if needed the os.makedirs(path, exist_ok=True) . If not needed the command will not throw an error."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1474501222, "creation_date": 1474501222, "answer_id": 39628096, "question_id": 39627787, "link": "https://stackoverflow.com/questions/39627787/create-folder-with-numpy-savetxt/39628096#39628096", "title": "Create Folder with Numpy Savetxt", "body": "<p><code>savetxt</code> just does a <code>open(filename, 'w')</code>.  <code>filename</code> can include a directory as part of the path name, but you'll have to first create the directory with something like <code>os.mkdir</code>.  In other words, use the standard Python directory and file functions.</p>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "is_accepted": false, "score": 2, "last_activity_date": 1474551942, "creation_date": 1474551942, "answer_id": 39640835, "question_id": 39627787, "link": "https://stackoverflow.com/questions/39627787/create-folder-with-numpy-savetxt/39640835#39640835", "title": "Create Folder with Numpy Savetxt", "body": "<p>Actually in order to make all intermediate directories if needed the <code>os.makedirs(path, exist_ok=True)</code> . If not needed the command will not throw an error.</p>\n"}], "owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4868, "favorite_count": 0, "accepted_answer_id": 39628096, "answer_count": 2, "score": 1, "last_activity_date": 1474551942, "creation_date": 1474498898, "question_id": 39627787, "link": "https://stackoverflow.com/questions/39627787/create-folder-with-numpy-savetxt", "title": "Create Folder with Numpy Savetxt", "body": "<p>I'm trying loop over many arrays and create files stored in different folders.</p>\n\n<p>Is there a way to have np.savetxt creating the folders I need as well?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "function", "apache-spark", "machine-learning", "distributed-computing"], "answers": [{"comments": [{"owner": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "edited": false, "score": 1, "creation_date": 1474502641, "post_id": 39627819, "comment_id": 66561910, "body": "By the way there are some useful methods you could use, like <a href=\"https://spark.apache.org/docs/latest/api/python/pyspark.html?highlight=rdd#pyspark.RDD.keys\" rel=\"nofollow noreferrer\">keys</a> or <a href=\"https://spark.apache.org/docs/latest/api/python/pyspark.html?highlight=rdd#pyspark.RDD.mapValues\" rel=\"nofollow noreferrer\">mapValues</a>."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1474605119, "post_id": 39627819, "comment_id": 66608211, "body": "I wonder why you mentioned the <code>keys()</code> Alberto, I don&#39;t see how it can help here..."}, {"owner": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1474628304, "post_id": 39627819, "comment_id": 66619933, "body": "Because you can count the number of <code>keys</code>. e.g. <code>keys = rdd.keys().count()</code>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1474646015, "post_id": 39627819, "comment_id": 66631449, "body": "Makes sense! ;)"}], "tags": [], "owner": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "is_accepted": true, "score": 1, "last_activity_date": 1474501039, "last_edit_date": 1474501039, "creation_date": 1474499139, "answer_id": 39627819, "question_id": 39627773, "link": "https://stackoverflow.com/questions/39627773/sum-in-spark-gone-bad/39627819#39627819", "title": "Sum in Spark gone bad", "body": "<p>The problem is because you missed to count the number of points grouped in each cluster, thus you have to change how <code>pdd</code> was created.</p>\n\n<pre><code>pdd = r2_10.map(lambda x: (x[0], len(x[1]))).reduceByKey(lambda a, b: a + b)\n</code></pre>\n\n<p>However, You could obtain the same result in a single pass (without computing <code>pdd</code>), by mapping the values of the <code>RDD</code> and then reducing by using <code>sum</code>.</p>\n\n<pre><code>total = r2_10.map(lambda x: len(x[1])).sum()\n</code></pre>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 39627819, "answer_count": 1, "score": 2, "last_activity_date": 1474501039, "creation_date": 1474498792, "last_edit_date": 1495535651, "question_id": 39627773, "link": "https://stackoverflow.com/questions/39627773/sum-in-spark-gone-bad", "title": "Sum in Spark gone bad", "body": "<p>Based on <a href=\"https://stackoverflow.com/questions/39235576/unbalanced-factor-of-kmeans\">Unbalanced factor of KMeans?</a>, I am trying to compute the Unbalanced Factor, but I fail.</p>\n\n<p>Every element of the RDD <code>r2_10</code> is a pair, where the key is cluster and the value is a tuple of points. All these are IDs. Below I present what happens:</p>\n\n<pre><code>In [1]: r2_10.collect()\nOut[1]: \n[(0, ('438728517', '28138008')),\n (13824, ('4647699097', '6553505321')),\n (9216, ('2575712582', '1776542427')),\n (1, ('8133836578', '4073591194')),\n (9217, ('3112663913', '59443972', '8715330944', '56063461')),\n (4609, ('6812455719',)),\n (13825, ('5245073744', '3361024394')),\n (4610, ('324470279',)),\n (2, ('2412402108',)),\n (3, ('4766885931', '3800674818', '4673186647', '350804823', '73118846'))]\n\nIn [2]: pdd = r2_10.map(lambda x: (x[0], 1)).reduceByKey(lambda a, b: a + b)\n\nIn [3]: pdd.collect()\nOut[3]: \n[(13824, 1),\n (9216, 1),\n (0, 1),\n (13825, 1),\n (1, 1),\n (4609, 1),\n (9217, 1),\n (2, 1),\n (4610, 1),\n (3, 1)]\n\nIn [4]: n = pdd.count()\n\nIn [5]: n\nOut[5]: 10\n\nIn [6]: total = pdd.map(lambda x: x[1]).sum() \n\nIn [7]: total\nOut[7]: 10\n</code></pre>\n\n<p>and <code>total</code> is supposed to have the total number of points. However, it's 10...The goal is to be 22!</p>\n\n<p>What am I missing here? </p>\n"}, {"tags": ["python", "urllib", "okta", "okta-api"], "comments": [{"owner": {"reputation": 181, "user_id": 1136781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oS5yE.jpg?s=128&g=1", "display_name": "Thomas Kirk", "link": "https://stackoverflow.com/users/1136781/thomas-kirk"}, "edited": false, "score": 0, "creation_date": 1474552713, "post_id": 39627643, "comment_id": 66585668, "body": "Can you post your script?"}], "answers": [{"tags": [], "owner": {"reputation": 1068, "user_id": 3191847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b73afa3f75c234598f5dadf53679ca?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Franusic", "link": "https://stackoverflow.com/users/3191847/jo%c3%abl-franusic"}, "is_accepted": false, "score": 0, "last_activity_date": 1489018513, "creation_date": 1489018513, "answer_id": 42684409, "question_id": 39627643, "link": "https://stackoverflow.com/questions/39627643/okta-authentification-through-python-for-parsing/42684409#42684409", "title": "okta authentification through python for parsing", "body": "<p>It sounds like what you are trying to do is to write some code in Python that will synthesize, or process, data from a website on your intranet. Further, it seems that this intranet site is secured by Okta and you are having trouble connecting to the intranet site.</p>\n\n<p>If I understood the question correctly, I suspect that the problem you are having is that the intranet site is secured via SAML. There are typically two ways to handle situations like this:</p>\n\n<ol>\n<li>(Ideal) See if the intranet site has an API you can use with an API token.</li>\n<li>Write code in Python to handle the SAML flow and get a cookie to the intranet site. If you are using <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">Requests</a>, this will mostly mean writing code to authenticate with Okta and follow the SAML redirects, using a <a href=\"http://docs.python-requests.org/en/master/user/advanced/\" rel=\"nofollow noreferrer\">Session</a> in Requests to keep track of your cookies for you.</li>\n</ol>\n"}], "owner": {"reputation": 1111, "user_id": 3442271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/687879224/picture?type=large", "display_name": "Alexis G", "link": "https://stackoverflow.com/users/3442271/alexis-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 783, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489018513, "creation_date": 1474497884, "question_id": 39627643, "link": "https://stackoverflow.com/questions/39627643/okta-authentification-through-python-for-parsing", "title": "okta authentification through python for parsing", "body": "<p>My company just implemented a okta authentification to access to the intranet. I used a script to parse some part of the intranet to syntetize some news but since okta authentification has been implemented, I cannot be connected to the intranet.\nThe only things I get trying to get the page is login to okta...</p>\n\n<p>Has someone already deal with this problem ?\nI tried used <a href=\"https://github.com/okta/oktasdk-python/tree/master/okta\" rel=\"nofollow\">https://github.com/okta/oktasdk-python/tree/master/okta</a> but apparently not useful for my need.</p>\n"}, {"tags": ["python", "numpy", "entropy"], "comments": [{"owner": {"reputation": 982, "user_id": 3298693, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dqsHJ.jpg?s=128&g=1", "display_name": "Mateus Zitelli", "link": "https://stackoverflow.com/users/3298693/mateus-zitelli"}, "edited": false, "score": 0, "creation_date": 1474498054, "post_id": 39627634, "comment_id": 66560895, "body": "<code>data1</code> have zero values inside it and Log(0) is not defined, therefore it returns nan."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474499124, "post_id": 39627718, "comment_id": 66561143, "body": "Thank you so much! Finally got it going. : ) I also tried using spicy.stats.entropy but I see that the values are different though? despite the same formula?"}, {"owner": {"reputation": 982, "user_id": 3298693, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dqsHJ.jpg?s=128&g=1", "display_name": "Mateus Zitelli", "link": "https://stackoverflow.com/users/3298693/mateus-zitelli"}, "reply_to_user": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474509734, "post_id": 39627718, "comment_id": 66563412, "body": "No worries. Take care when using <code>spicy.stats.entropy</code> because it normalizes the values, for element-wise entropy use <code>scipy.special.entr</code> as @watten-weckesser explained."}, {"owner": {"reputation": 12770, "user_id": 420867, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/d3eFg.jpg?s=128&g=1", "display_name": "drevicko", "link": "https://stackoverflow.com/users/420867/drevicko"}, "edited": false, "score": 0, "creation_date": 1517392282, "post_id": 39627718, "comment_id": 84073241, "body": "@MateusZitelli Actually zero probabilities DO make sense for Shannons entropy, but you have to interpret <code>0*log(0)</code> as zero. This makes sense since the limit as <code>p</code> goes to zero of <code>p*log(p)</code> is zero, which is about the only sensible way of interpreting <code>0*log(0)</code>."}], "tags": [], "owner": {"reputation": 982, "user_id": 3298693, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dqsHJ.jpg?s=128&g=1", "display_name": "Mateus Zitelli", "link": "https://stackoverflow.com/users/3298693/mateus-zitelli"}, "is_accepted": true, "score": 2, "last_activity_date": 1474511213, "last_edit_date": 1474511213, "creation_date": 1474498416, "answer_id": 39627718, "question_id": 39627634, "link": "https://stackoverflow.com/questions/39627634/how-can-i-fix-entropy-yielding-nan/39627718#39627718", "title": "how can i fix entropy yielding nan?", "body": "<p>The problem is that you have zero probabilities in your histogram, which don't make numerical sense when applying Shannon's entropy formula. A solution is to ignore the zero probabilities.</p>\n\n<pre><code>mu1, sigma1 = 0, 1\ns1 = np.random.normal(mu1, sigma1, 100000)\nhist1 = np.histogram(s1, bins=100, range=(-20,20), density=True)\ndata1 = hist1[0]\nnon_zero_data = data1[data1 != 0]\nent1 = -(non_zero_data*np.log(np.abs(non_zero_data))).sum() \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": false, "score": 3, "last_activity_date": 1474499132, "creation_date": 1474499132, "answer_id": 39627816, "question_id": 39627634, "link": "https://stackoverflow.com/questions/39627634/how-can-i-fix-entropy-yielding-nan/39627816#39627816", "title": "how can i fix entropy yielding nan?", "body": "<p>To compute the entropy, you could use <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.special.entr.html\" rel=\"nofollow\"><code>scipy.special.entr</code></a>.  For example,</p>\n\n<pre><code>In [147]: from scipy.special import entr\n\nIn [148]: x = np.array([3, 2, 1, 0, 0.5, 2.5, 5])\n\nIn [149]: entr(x).sum()\nOut[149]: -14.673474028700136\n</code></pre>\n\n<p>To check that result, we can also compute the entropy using <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.special.xlogy.html\" rel=\"nofollow\"><code>scipy.special.xlogy</code></a>:</p>\n\n<pre><code>In [150]: from scipy.special import xlogy\n\nIn [151]: -xlogy(x, x).sum()\nOut[151]: -14.673474028700136\n</code></pre>\n\n<p>Finally, we can verify that is the same result that you expect:</p>\n\n<pre><code>In [152]: xnz = x[x != 0]\n\nIn [153]: -(xnz*np.log(xnz)).sum()\nOut[153]: -14.673474028700136\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1778, "favorite_count": 0, "accepted_answer_id": 39627718, "answer_count": 2, "score": 1, "last_activity_date": 1474511213, "creation_date": 1474497822, "question_id": 39627634, "link": "https://stackoverflow.com/questions/39627634/how-can-i-fix-entropy-yielding-nan", "title": "how can i fix entropy yielding nan?", "body": "<p>I am trying to calculate entropy from array resulted from np.histogram by</p>\n\n<pre><code>mu1, sigma1 = 0, 1\ns1 = np.random.normal(mu1, sigma1, 100000)\nhist1 = np.histogram(s1, bins=100, range=(-20,20), density=True)\ndata1 = hist1[0]\nent1 = -(data1*np.log(np.abs(data1))).sum() \n</code></pre>\n\n<p>However, this ent1 would return nan. What is the problem here? </p>\n"}, {"tags": ["python", "django", "heroku"], "comments": [{"owner": {"reputation": 9014, "user_id": 3762142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TgKI9.png?s=128&g=1", "display_name": "Raja Simon", "link": "https://stackoverflow.com/users/3762142/raja-simon"}, "edited": false, "score": 0, "creation_date": 1474525528, "post_id": 39627603, "comment_id": 66568151, "body": "It&#39;s really hard to understand why the 500 error. But my initial thought is your local and remote is not fine.  Can you confirm there is no database involve to render the <code>&#47;</code> view function ?"}, {"owner": {"reputation": 681, "user_id": 5530234, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/32331ff9cbdb31eb9303025b0ed54ab1?s=128&d=identicon&r=PG", "display_name": "Jebediah15", "link": "https://stackoverflow.com/users/5530234/jebediah15"}, "reply_to_user": {"reputation": 9014, "user_id": 3762142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TgKI9.png?s=128&g=1", "display_name": "Raja Simon", "link": "https://stackoverflow.com/users/3762142/raja-simon"}, "edited": false, "score": 0, "creation_date": 1474558224, "post_id": 39627603, "comment_id": 66589660, "body": "@F&#39;inAwesome correct, no database involved."}, {"owner": {"reputation": 9014, "user_id": 3762142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TgKI9.png?s=128&g=1", "display_name": "Raja Simon", "link": "https://stackoverflow.com/users/3762142/raja-simon"}, "edited": false, "score": 0, "creation_date": 1474612950, "post_id": 39627603, "comment_id": 66610927, "body": "Then it must be very hard to debug...! Do you setup any environment variable in local that needs to be update in heroku as well"}], "owner": {"reputation": 681, "user_id": 5530234, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/32331ff9cbdb31eb9303025b0ed54ab1?s=128&d=identicon&r=PG", "display_name": "Jebediah15", "link": "https://stackoverflow.com/users/5530234/jebediah15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474497640, "creation_date": 1474497640, "question_id": 39627603, "link": "https://stackoverflow.com/questions/39627603/heroku-local-works-fine-but-server-error-500-with-heroku-open", "title": "Heroku local works fine but Server Error (500) with heroku open", "body": "<p>I have now followed the <a href=\"https://devcenter.heroku.com/articles/deploying-python#build-your-app-and-run-it-locally\" rel=\"nofollow\">Heroku instructions</a> as well as <a href=\"https://djangogirls.gitbooks.io/django-girls-tutorial-extensions/content/heroku/\" rel=\"nofollow\">another deploy tutorial</a>. I am able to get the app running locally when I run <code>heroku local</code> and the site looks fine. I then go for <code>heroku open</code> and I get a <code>System Error (500)</code></p>\n\n<p>My question is: a) how do I read these logs to determine the error, and b) what is some other troubleshooting when the local app runs fine but I get a server error when trying to open through the Heroku app? Thanks for any help.</p>\n\n<p>Here is the tail from <code>heroku logs</code></p>\n\n<pre><code>    2016-09-21T22:14:22.183850+00:00 heroku[web.1]: Starting process with command `gunicorn aptly.wsgi`\n2016-09-21T22:14:25.965426+00:00 app[web.1]: [2016-09-21 22:14:25 +0000] [3] [INFO] Starting gunicorn 19.6.0\n2016-09-21T22:14:26.018518+00:00 app[web.1]: [2016-09-21 22:14:26 +0000] [3] [INFO] Listening at: http://0.0.0.0:6663 (3)\n2016-09-21T22:14:26.018676+00:00 app[web.1]: [2016-09-21 22:14:26 +0000] [3] [INFO] Using worker: sync\n2016-09-21T22:14:26.023706+00:00 app[web.1]: [2016-09-21 22:14:26 +0000] [7] [INFO] Booting worker with pid: 7\n2016-09-21T22:14:26.092715+00:00 app[web.1]: [2016-09-21 22:14:26 +0000] [8] [INFO] Booting worker with pid: 8\n2016-09-21T22:14:26.764197+00:00 heroku[web.1]: State changed from starting to up\n2016-09-21T22:15:02.410363+00:00 heroku[router]: at=info method=GET path=\"/\" host=desolate-cove-94597.herokuapp.com request_id=53f43d4a-5b5c-477b-a355-39bf5156f8b3 fwd=\"73.163.191.79\" dyno=web.1 connect=1ms service=223ms status=500 bytes=239\n2016-09-21T22:15:28.285891+00:00 heroku[api]: Starting process with command `python manage.py migrate` by me@gmail.com\n2016-09-21T22:15:41.534684+00:00 heroku[run.7412]: Awaiting client\n2016-09-21T22:15:41.555107+00:00 heroku[run.7412]: Starting process with command `python manage.py migrate`\n2016-09-21T22:15:41.801070+00:00 heroku[run.7412]: State changed from starting to up\n2016-09-21T22:15:44.353920+00:00 heroku[run.7412]: State changed from up to complete\n2016-09-21T22:15:44.329626+00:00 heroku[run.7412]: Process exited with status 0\n2016-09-21T22:16:03.086299+00:00 heroku[api]: Starting process with command `python manage.py createsuperuser` by me@gmail.com\n2016-09-21T22:16:12.065178+00:00 heroku[run.2986]: Awaiting client\n2016-09-21T22:16:12.211145+00:00 heroku[run.2986]: State changed from starting to up\n2016-09-21T22:16:12.115569+00:00 heroku[run.2986]: Starting process with command `python manage.py createsuperuser`\n2016-09-21T22:16:47.426556+00:00 heroku[run.2986]: State changed from up to complete\n2016-09-21T22:16:47.417258+00:00 heroku[run.2986]: Process exited with status 0\n2016-09-21T22:17:29.613811+00:00 heroku[router]: at=info method=GET path=\"/\" host=desolate-cove-94597.herokuapp.com request_id=139eb23c-3c5c-4a0d-a39d-bdcef078c5ab fwd=\"73.163.191.79\" dyno=web.1 connect=2ms service=278ms status=500 bytes=239\n2016-09-21T22:25:20.701742+00:00 heroku[api]: Starting process with command `python manage.py migrate` by me@gmail.com\n2016-09-21T22:25:29.863579+00:00 heroku[run.1764]: Awaiting client\n2016-09-21T22:25:29.892630+00:00 heroku[run.1764]: Starting process with command `python manage.py migrate`\n2016-09-21T22:25:30.117446+00:00 heroku[run.1764]: State changed from starting to up\n2016-09-21T22:25:32.716060+00:00 heroku[run.1764]: Process exited with status 0\n2016-09-21T22:25:32.732441+00:00 heroku[run.1764]: State changed from up to complete\n2016-09-21T22:26:29.724389+00:00 heroku[router]: at=info method=GET path=\"/\" host=desolate-cove-94597.herokuapp.com request_id=7dc56798-101e-4e89-b4d6-5b892c2175c8 fwd=\"73.163.191.79\" dyno=web.1 connect=1ms service=219ms status=500 bytes=239\n</code></pre>\n"}, {"tags": ["python", "python-requests", "session-cookies", "saml", "wsgi"], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "edited": false, "score": 0, "creation_date": 1474510340, "post_id": 39627858, "comment_id": 66563547, "body": "But the cookie value I get from WSGI is a string of key-value pairs separated by colons and equal signs, while all the methods that the requests CookieJar class offers to set cookies only accept dicts and CookieJars. I could definitely use <code>split()</code> to get a dict from a string, but it seems a bit clunky and not too reliable, and I wonder if there were a more elegant way to do this."}, {"owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "edited": false, "score": 0, "creation_date": 1474513817, "post_id": 39627858, "comment_id": 66564392, "body": "OK, I guess this was the cleanest way:           <code>request = Request(environ)         req_cookies = SimpleCookie(request.cookies)         req_cookiedict = {             morsel.key : morsel.value for morsel in req_cookies.values()         }</code>  Then I can just add the dict to the <code>cookies</code> parameters of the request."}], "tags": [], "owner": {"reputation": 36, "user_id": 3234017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2775ba38bd3652d60d97671a28c9a087?s=128&d=identicon&r=PG&f=1", "display_name": "Leobuilt", "link": "https://stackoverflow.com/users/3234017/leobuilt"}, "is_accepted": true, "score": 0, "last_activity_date": 1474499440, "creation_date": 1474499440, "answer_id": 39627858, "question_id": 39627548, "link": "https://stackoverflow.com/questions/39627548/forward-wsgi-cookies-to-requests/39627858#39627858", "title": "Forward WSGI cookies to Requests", "body": "<p>Cookies are just <a href=\"https://tools.ietf.org/html/rfc6265#section-4.1\" rel=\"nofollow\">HTTP headers</a>. Just use pull the cookie value from http.cookies.SimpleCookie, and add it to your requests session's cookie <a href=\"http://docs.python-requests.org/en/master/_modules/requests/cookies/\" rel=\"nofollow\">jar</a>.</p>\n\n<p>Not a hack. :)</p>\n"}], "owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 39627858, "answer_count": 1, "score": 0, "last_activity_date": 1474499440, "creation_date": 1474497224, "question_id": 39627548, "link": "https://stackoverflow.com/questions/39627548/forward-wsgi-cookies-to-requests", "title": "Forward WSGI cookies to Requests", "body": "<p>I am developing a WSGI middleware application (Python 2.7) using Werkzeug. This app works within a SAML SSO environment and needs a SAML token to be accessed. </p>\n\n<p>The middleware also performs requests to other applications in the same SAML environment, acting on behalf of the logged in user. In order to do that without the need of user feedback, I need to forward the SAML session cookie that I can get from the WSGI environment to requests that I am performing using the Requests library. </p>\n\n<p>My issue is that the cookies that I get from WSGI/Werkzeug can only be parsed as http.cookies.SimpleCooke , while Requests accepts cookielib.CookieJar instances. </p>\n\n<p>I have not found a way to cleanly forward these session cookies without resorting to shameful hacks such as parsing the raw content of the set-cookie headers. </p>\n\n<p>Any suggestions? </p>\n\n<p>Thanks,</p>\n\n<p>gm</p>\n"}, {"tags": ["python", "django", "django-models", "django-admin", "django-suit"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1474503051, "post_id": 39627523, "comment_id": 66562029, "body": "what on earth is foo?"}, {"owner": {"reputation": 455, "user_id": 2091046, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/11bb3fee1ab01893f6f5a7c57efc7ae5?s=128&d=identicon&r=PG", "display_name": "user2091046", "link": "https://stackoverflow.com/users/2091046/user2091046"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1474528847, "post_id": 39627523, "comment_id": 66569883, "body": "@e4c5 Sorry for that one. Just base class for admin model, nothing important in this case."}], "owner": {"reputation": 455, "user_id": 2091046, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/11bb3fee1ab01893f6f5a7c57efc7ae5?s=128&d=identicon&r=PG", "display_name": "user2091046", "link": "https://stackoverflow.com/users/2091046/user2091046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474528785, "creation_date": 1474496984, "last_edit_date": 1474528785, "question_id": 39627523, "link": "https://stackoverflow.com/questions/39627523/inline-edit-of-django-foreignkey-and-proxy-models", "title": "Inline edit of django ForeignKey and proxy models", "body": "<p>I get an 404 error when I try to edit inline (in a popup) an object referenced by a ForeignKey to a <a href=\"https://docs.djangoproject.com/en/1.10/topics/db/models/#proxy-models\" rel=\"nofollow\">proxy model</a> in the admin part (using django suite) of my application.</p>\n\n<p>My base model and the proxy model:</p>\n\n<pre><code>class Book(MyBase):\n    \"\"\"\n    Base book model\n    \"\"\"\n    # [...]\n\nclass SpecialBook(Book):\n    \"\"\" \n    Need to leave this separated as a proxy model.\n    \"\"\"\n    class Meta:\n        proxy = True\n</code></pre>\n\n<p>My model to bind books with it's genre. The <code>book</code> field can hold references to both <code>Book</code> and <code>SpecialBook</code>, via documentation: </p>\n\n<blockquote>\n  <p>[proxy] class operates on the same database table as it's parent</p>\n</blockquote>\n\n<pre><code>class BookGenre(MyBase):\n    \"\"\"\n    bind books with it's genre\n    \"\"\"\n\n    book = models.ForeignKey(Book)\n    genre = models.ForeignKey(Genre)\n</code></pre>\n\n<p>The <code>admin.py</code> stuff to manage the genres:</p>\n\n<pre><code>class BookGenreInline(suit.admin.SortableTabularInline):\n    model = BookGenre\n\n    # [...]\n\n\n@admin.register(Genre)\nclass GenreAdmin(AdminBase):\n    inlines = [\n        BookGenreInline,\n        # [...],\n    ]\n    fields = [...]\n</code></pre>\n\n<p>The above generates me an admin page with a select field with the existing <code>Book</code> (and <code>SpecialBook</code>) objects. On the right to the select I've got the \"Change selected\" and \"Add another\" buttons (template imported from <a href=\"https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/related_widget_wrapper.html\" rel=\"nofollow\">here</a> I believe). The only problem is that the edit option works only when a Book object is selected, doesn't work for SpecialBook. As far as I can see it's connected with the fact that the <code>change_related_template_url</code> found <a href=\"https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/related_widget_wrapper.html#L7\" rel=\"nofollow\">here</a> isn't updated. The url for editing <code>Book</code> objects looks like <code>/admin/books/book/ID[...]</code> and works correctly, but doesn't change to <code>/admin/books/specialbook/ID[...]</code> when I select the <code>SpecialBook</code> object.</p>\n\n<p>Can anybody suggest an elegant fix here?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "edited": false, "score": 0, "creation_date": 1474503449, "post_id": 39627504, "comment_id": 66562134, "body": "Thanks for editing your answer. I think you can change the values by lists. For example <code>df.replace([r&#39;&amp;#45&#39;, r&#39;&amp;#39&#39;], [&#39;-&#39;, &#39;&#39;], regex=True)</code>, but I am not sure. Check the <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.replace.html\" rel=\"nofollow noreferrer\">docs</a>"}, {"owner": {"reputation": 1462, "user_id": 5062134, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/c2Ea0.jpg?s=128&g=1", "display_name": "medev21", "link": "https://stackoverflow.com/users/5062134/medev21"}, "reply_to_user": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "edited": false, "score": 1, "creation_date": 1474504088, "post_id": 39627504, "comment_id": 66562265, "body": "@gabra no problem and thanks for the suggestion about the edit.  Yes, the code provided in the first comment worked like a charm, this is what I need, trying to be a better python coder.  Thanks so much!"}], "answers": [{"tags": [], "owner": {"reputation": 6146, "user_id": 2029132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bf9af44407bbd2097213a6d5f3e0fb1?s=128&d=identicon&r=PG", "display_name": "gabra", "link": "https://stackoverflow.com/users/2029132/gabra"}, "is_accepted": true, "score": 1, "last_activity_date": 1474504154, "creation_date": 1474504154, "answer_id": 39628451, "question_id": 39627504, "link": "https://stackoverflow.com/questions/39627504/replacing-html-syntax-ascii-code-in-pandas-columns/39628451#39628451", "title": "replacing html syntax/ascii code in pandas columns", "body": "<p>Just to leave an answer to new people coming here, a possible solution, as discussed on the comments, is:</p>\n\n<pre><code>df.replace([r'&amp;#45', r'&amp;#39', r'&amp;amp'], ['-', '', 'and'], regex=True)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>df.replace({'&amp;#45':'-', r'&amp;#39':'', '&amp;amp':'and'}, regex=True)\n</code></pre>\n"}], "owner": {"reputation": 1462, "user_id": 5062134, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/c2Ea0.jpg?s=128&g=1", "display_name": "medev21", "link": "https://stackoverflow.com/users/5062134/medev21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 1, "closed_date": 1474530563, "accepted_answer_id": 39628451, "answer_count": 1, "score": 2, "last_activity_date": 1474525992, "creation_date": 1474496868, "last_edit_date": 1474525992, "question_id": 39627504, "link": "https://stackoverflow.com/questions/39627504/replacing-html-syntax-ascii-code-in-pandas-columns", "closed_reason": "Duplicate", "title": "replacing html syntax/ascii code in pandas columns", "body": "<p>I'm trying to find a way to replace the html syntax within a string. I get a lot of csv files, so I found pandas to be an awesome tool to deal with csv.</p>\n\n<p>Sometimes I receive data that has html syntax embedded in a string, for example in the address column, i see <code>125&amp;#45128 downing st</code> , which is <code>125-128 downing st</code>. It's not only <code>&amp;#49</code>, I also get <code>&amp;#39</code> and <code>&amp;amp</code>, which are <code>'</code> and <code>&amp;</code>.</p>\n\n<p>I tried to do this code, but I know it's not giving me the right format</p>\n\n<pre><code>df = df.replace(r'[&amp;#45]','-', regex=True)\n</code></pre>\n\n<p>I get several columns such as business name, address, city, state - so I would like to target all columns just to make sure all the html syntax are removed/replaced</p>\n\n<p>Dataframe format</p>\n\n<pre><code>    Address 1                   Company\n0   1st&amp;#452st Avenue N         johnson &amp;amp johnson\n1   243&amp;#454800 Kingsway Ave    cold &amp;amp brew \n2   300 Hwy 7                   coder&amp;#39s club\n</code></pre>\n\n<p>Desired format</p>\n\n<pre><code>    Address 1                   Company\n0   1st-2st Avenue N            johnson and johnson\n1   243-4800 Kingsway Ave       cold and brew \n2   300 Hwy 7                   coder's club \n</code></pre>\n\n<p>I'm a newbie to pandas, but so I far I love this tool.  Thanks for your help.</p>\n\n<p>UPDATE:</p>\n\n<p>Ok, I found my mistake on the code I use, this <code>df = df.replace(r'[&amp;#45]','-', regex=True)</code> should be <code>df = df.replace(r'&amp;#45','-', regex=True)</code>; this will replace that html syntax. However I still would like to find a pythonic solution to this problem.</p>\n\n<p>I am tempted to do this code in order to remove the other html syntax.</p>\n\n<pre><code>df = df.replace(r'&amp;#45','-', regex=True).replace(r'&amp;#39','', regex=True).replace(r'&amp;amp','and', regex=True)\n</code></pre>\n\n<p>is there a clean solution to this line of code?</p>\n"}, {"tags": ["python", "matplotlib", "colors", "networkx", "seaborn"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1474503678, "post_id": 39627490, "comment_id": 66562175, "body": "Doesn&#39;t <code>nx.draw</code> return the artists created?"}, {"owner": {"reputation": 4079, "user_id": 5285918, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/43d89ab985ec7bf11dec1adbac3827d4?s=128&d=identicon&r=PG&f=1", "display_name": "lanery", "link": "https://stackoverflow.com/users/5285918/lanery"}, "edited": false, "score": 1, "creation_date": 1474505343, "post_id": 39627490, "comment_id": 66562486, "body": "<code>nx.draw</code> doesn&#39;t return anything (at least not in this case), which is why I went with my answer."}], "answers": [{"comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1474503008, "post_id": 39628280, "comment_id": 66562017, "body": "Is it possible to get integer values and make it continuous in this way?"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1474515961, "post_id": 39628280, "comment_id": 66564955, "body": "hey @lanery thanks for the answer/update.  I&#39;m going to test this when I get to my computer tomorrow morning and then Approve it!"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1474566254, "post_id": 39628280, "comment_id": 66594615, "body": "Works perfect!  Thanks a lot @lanery.  Why did you do <code>sm._A = []</code>?"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1474567898, "post_id": 39628280, "comment_id": 66595443, "body": "Also, I put a follow up question on: <a href=\"http://stackoverflow.com/questions/39646027/how-to-stop-colorbar-from-reshaping-networkx-plot-python-3\" title=\"how to stop colorbar from reshaping networkx plot python 3\">stackoverflow.com/questions/39646027/&hellip;</a> w/ a shoutout to you for the <code>colorbar</code> in case you might have some insight."}, {"owner": {"reputation": 4079, "user_id": 5285918, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/43d89ab985ec7bf11dec1adbac3827d4?s=128&d=identicon&r=PG&f=1", "display_name": "lanery", "link": "https://stackoverflow.com/users/5285918/lanery"}, "reply_to_user": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1474568276, "post_id": 39628280, "comment_id": 66595661, "body": "That was borrowed from the answer I linked to, but it&#39;s basically to prevent a <code>TypeError</code> that is raised when the colorbar tries to autoscale."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1474568617, "post_id": 39628280, "comment_id": 66595839, "body": "Is there any way to append it to an already made plot instead of merging it?"}, {"owner": {"reputation": 4079, "user_id": 5285918, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/43d89ab985ec7bf11dec1adbac3827d4?s=128&d=identicon&r=PG&f=1", "display_name": "lanery", "link": "https://stackoverflow.com/users/5285918/lanery"}, "reply_to_user": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 1, "creation_date": 1474569000, "post_id": 39628280, "comment_id": 66596073, "body": "See my answer on your follow up question."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1474569769, "post_id": 39628280, "comment_id": 66596493, "body": "Thanks.  That fixed it.  I was trying to do <code>fig_2, ax_2 = plt.subplots(ncols=2)</code> then <code>ax_2[0] = ax</code> to store the old ax on a new figure"}], "tags": [], "owner": {"reputation": 4079, "user_id": 5285918, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/43d89ab985ec7bf11dec1adbac3827d4?s=128&d=identicon&r=PG&f=1", "display_name": "lanery", "link": "https://stackoverflow.com/users/5285918/lanery"}, "is_accepted": true, "score": 3, "last_activity_date": 1474503348, "last_edit_date": 1495540855, "creation_date": 1474502775, "answer_id": 39628280, "question_id": 39627490, "link": "https://stackoverflow.com/questions/39627490/how-to-add-colorbar-to-networkx-using-a-seaborn-color-palette-python-3/39628280#39628280", "title": "How to add `colorbar` to `networkx` using a `seaborn` color palette? (Python 3)", "body": "<p>I think the best thing to do here is to fake it following <a href=\"https://stackoverflow.com/a/11558629/5285918\">this answer</a> since you don't have a \"ScalarMappable\" to work with.</p>\n\n<p>For a discrete colormap</p>\n\n<pre><code>from matplotlib.colors import ListedColormap\nsm = plt.cm.ScalarMappable(cmap=ListedColormap(color_palette),\n                           norm=plt.Normalize(vmin=0, vmax=3))\nsm._A = []\nplt.colorbar(sm)\n</code></pre>\n\n<p>If you want a linear (continuous) colormap and to only show integer ticks</p>\n\n<pre><code>sm = plt.cm.ScalarMappable(cmap=sns.cubehelix_palette(3, as_cmap=True),\n                           norm=plt.Normalize(vmin=0, vmax=3))\nsm._A = []\nplt.colorbar(sm, ticks=range(4))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/pswBu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pswBu.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "accepted_answer_id": 39628280, "answer_count": 1, "score": 4, "last_activity_date": 1474503348, "creation_date": 1474496760, "last_edit_date": 1495541703, "question_id": 39627490, "link": "https://stackoverflow.com/questions/39627490/how-to-add-colorbar-to-networkx-using-a-seaborn-color-palette-python-3", "title": "How to add `colorbar` to `networkx` using a `seaborn` color palette? (Python 3)", "body": "<p>I'm trying to add a <code>colorbar</code> to my <code>networkx</code> drawn <code>matplotlib ax</code> from the range of <code>1</code> (being the lightest) and <code>3</code> (being the darkest) [check out the line w/ <code>cmap</code> below]. I'm trying to combine a lot of <code>PyData</code> functionalities. </p>\n\n<p><strong>How can I add a color bar type feature on a networkx plot using a seaborn color palette?</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/Yt5ud.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yt5ud.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code># Set up Graph\nDF_adj = pd.DataFrame(np.array(\n     [[1, 0, 1, 1],\n     [0, 1, 1, 0],\n     [1, 1, 1, 1],\n     [1, 0, 1, 1] ]), columns=['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)'], index=['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)'])\n\nG = nx.Graph(DF_adj.as_matrix())\nG = nx.relabel_nodes(G, dict(zip(range(4), ['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)'])))\n\n# Color mapping\ncolor_palette = sns.cubehelix_palette(3)\ncmap = {k:color_palette[v-1] for k,v in zip(['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)'],[2, 1, 3, 2])}\n\n# Draw\nnx.draw(G, node_color=[cmap[node] for node in G.nodes()], with_labels=True)\n</code></pre>\n\n<p>In this, they are all using <code>matplotlib</code> color palettes: <a href=\"http://jakevdp.github.io/mpl_tutorial/tutorial_pages/tut3.html\" rel=\"nofollow noreferrer\">http://jakevdp.github.io/mpl_tutorial/tutorial_pages/tut3.html</a>  I even tried converting them to a <code>ListedColormap</code> object but it didn't work. </p>\n\n<p>This doesn't work for my situation either b/c matplotlib colormap: <a href=\"https://stackoverflow.com/questions/30353363/seaborn-regplot-with-colorbar\">Seaborn regplot with colorbar?</a></p>\n\n<p>Same for <a href=\"http://matplotlib.org/examples/pylab_examples/colorbar_tick_labelling_demo.html\" rel=\"nofollow noreferrer\">http://matplotlib.org/examples/pylab_examples/colorbar_tick_labelling_demo.html</a></p>\n\n<p>This was the closest I got but it didn't work I got a autoscale Nonetype: <a href=\"https://stackoverflow.com/questions/37902459/how-do-i-use-seaborns-color-palette-as-a-colormap-in-matplotlib\">How do I use seaborns color_palette as a colormap in matplotlib?</a></p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "edited": false, "score": 0, "creation_date": 1474499687, "post_id": 39627390, "comment_id": 66561275, "body": "seems like this is a bug when a socket connection is closed destructor should kill the driver."}, {"owner": {"reputation": 873, "user_id": 8287109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8429f8b3d1797c8983ae6fabc39ef017?s=128&d=identicon&r=PG&f=1", "display_name": "allanvc", "link": "https://stackoverflow.com/users/8287109/allanvc"}, "edited": false, "score": 1, "creation_date": 1573248542, "post_id": 39627390, "comment_id": 103833984, "body": "It is 2019 and it still happens. Did you find a way to handle it in Python? In R-Selenium, I can sucessfully catch a browser crash and return to the page Selenium was."}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "edited": false, "score": 2, "creation_date": 1474528914, "post_id": 39628352, "comment_id": 66569941, "body": "Here is the thing. The code gets hung in the &quot;try&quot; section but it never reaches the except. So that means there is no exception thrown, but when the browser closes for a reason, and selenium looks for an element or tries opening a page, no exception is thrown and the code hangs.  I have edited the code on what I am doing on the except portion, it just never reaches it."}], "tags": [], "owner": {"reputation": 1379, "user_id": 1470373, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/8813c92211aa9ac1dbc7fe5da731fc67?s=128&d=identicon&r=PG", "display_name": "Rusty Weber", "link": "https://stackoverflow.com/users/1470373/rusty-weber"}, "is_accepted": false, "score": 0, "last_activity_date": 1474503336, "creation_date": 1474503336, "answer_id": 39628352, "question_id": 39627390, "link": "https://stackoverflow.com/questions/39627390/process-hangs-if-web-browser-crashes-in-selenium/39628352#39628352", "title": "Process hangs if web browser crashes in selenium", "body": "<p>The code you have provided will always hang in the event that there is an exception getting the google home page.\nWhat is probably happening is that attempting to get the google home page is resulting in an exception which would normally halt the program, but you are masking that out with the except clause.</p>\n\n<p>Attempt with the following amendment to your loop.</p>\n\n<pre><code>max_attemtps = 10\nattempts = 0\nwhile attempts &lt;= max_attempts:\n    try:\n        print \"Retrieving google\"\n        driver.get('http://www.google.com')\n        break\n   except:\n        print \"Retrieving google failed\"\n        attempts += 1\n</code></pre>\n"}], "owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 996, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1479483678, "creation_date": 1474496086, "last_edit_date": 1474529075, "question_id": 39627390, "link": "https://stackoverflow.com/questions/39627390/process-hangs-if-web-browser-crashes-in-selenium", "title": "Process hangs if web browser crashes in selenium", "body": "<p>I am using selenium + python, been using implicit waits and try/except code on python to catch errors. However I have been noticing that if the browser crashes (let's say the user closes the browser during the program's executing), my python program will hang, and the timeouts of implicit wait seems to not work when this happens. The below process will just stay there forever.</p>\n\n<pre><code>from selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.common.by import By\nfrom selenium import webdriver\nimport datetime\nimport time\nimport sys\nimport os\n\ndef open_browser():\n    print \"Opening web page...\"\n\n    driver = webdriver.Chrome()\n\n    driver.implicitly_wait(1)\n    #driver.set_page_load_timeout(30)\n    return driver\n\n\ndriver = open_browser() # Opens web browser\n\n# LET'S SAY I CLOSE THE BROWSER RIGHT HERE! \n# IF I CLOSE THE PROCESS HERE, THE PROGRAM WILL HANG FOREVER\ntime.sleep(5)\nwhile True:\n    try:\n        driver.get('http://www.google.com')\n        break\n   except:\n        driver.quit()\n        driver = open_browser()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1474496735, "post_id": 39627363, "comment_id": 66560521, "body": "Beside the point, but you may want to look at the <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">csv</a> module."}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1474496940, "post_id": 39627363, "comment_id": 66560575, "body": "What have you tried? It seems all you need to do is check each timestamp to see if it is in the last 90 seconds. Have you tried that?"}], "owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474495987, "creation_date": 1474495987, "question_id": 39627363, "link": "https://stackoverflow.com/questions/39627363/live-updating-matplotlib-plot-with-scrolling-x-axis", "title": "Live Updating Matplotlib Plot with scrolling x-axis", "body": "<p>In Python I have a code put together which pulls data from a CSV (csv looks like the following:)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>TimeStamp, ReadCount, Antenna, Protocol, RSSI, EPC, Sensor\r\n09/21/2016 15:24:40.560, 5499, 1, GEN2, -21, E036112D912508B3, 23.78,47.00,0.00,2.21, (Infinity%)\r\n09/21/2016 15:24:41.138, 5506, 1, GEN2, -9, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:41.623, 5513, 1, GEN2, -25, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:42.120, 5520, 1, GEN2, -18, E036112D912508B3, 23.78,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:42.633, 5527, 1, GEN2, -12, E036112D912508B3, 23.99,45.00,0.00,2.23, (Infinity%)\r\n09/21/2016 15:24:43.211, 5534, 1, GEN2, -9, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:43.744, 5541, 1, GEN2, -16, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>It then graphs this data - here is the code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import matplotlib\r\nimport matplotlib.pyplot as plt\r\nimport matplotlib.animation as animation\r\nfrom datetime import datetime\r\n      \r\noffset = -7.4954\r\nslope = 0.9548\r\n\r\nfig = plt.figure(facecolor='#07000d')\r\n\r\nax1 = fig.add_subplot(111, axisbg='#07000d')\r\n\r\nax1.spines['bottom'].set_color(\"#5998ff\")\r\nax1.spines['top'].set_color(\"#5998ff\")\r\nax1.spines['left'].set_color(\"#5998ff\")\r\nax1.spines['right'].set_color(\"#5998ff\")\r\n    \r\ndef animate(i):\r\n    graph_data = open('SensorLog.csv','r').read()\r\n    dataArray = graph_data.split('\\n')\r\n\r\n    xar=[]\r\n    yar=[]\r\n    \r\n    for eachLine in dataArray:\r\n        if 'TimeStamp' not in eachLine: \r\n            if len(eachLine)&gt;1:\r\n                t,rc,ant,prot,rssi,epc,temp,ten,powr,unpowr,inf=(eachLine.split(','))         \r\n                time = datetime.strptime(t, '%m/%d/%Y %H:%M:%S.%f')\r\n                clock = time.strftime('%I:%M')\r\n                xs = matplotlib.dates.datestr2num(clock)\r\n                hfmt = matplotlib.dates.DateFormatter('%m/%d/%Y\\n%I:%M:%S %p')\r\n\r\n#                Convert tension\r\n                tension = int(float(ten)*float(slope)+float(offset))\r\n                \r\n                xar.append(xs)\r\n                yar.append(tension)\r\n                \r\n    ax1.clear()\r\n    \r\n    ax1.grid(True, color='w')\r\n\r\n    plt.ylabel('Tension (lb)',color='w', fontsize=20)\r\n    plt.title('Spiral 1 Tension',color='w', fontsize=26)\r\n\r\n       \r\n    ax1.tick_params(axis='y', colors='w')\r\n    ax1.tick_params(axis='x', colors='w')\r\n    ax1.xaxis.set_major_formatter(hfmt)\r\n\r\n    fig.autofmt_xdate()\r\n    \r\n    ax1.plot (xar,yar, 'c', linewidth=2)\r\n\r\nani = animation.FuncAnimation(fig, animate, interval=10000)\r\nplt.show()</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I would like to be able to have the x-axis only show the past 90 seconds of data and not continuously grow to fit all the new data, but instead just push old data out if it is beyond that 90 second range. For example it should show points from 0-90 seconds, and one second later it will show 1-91 seconds.</p>\n\n<p>I've seen some examples but nothing that seems to work for mine. Any help?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1474495544, "post_id": 39627259, "comment_id": 66560127, "body": "I don&#39;t see any <code>y2</code> array declared in your code. Is it a remnant of a global variable from a previous run in the same python engine? (happens with PyScripter)"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1474495634, "post_id": 39627259, "comment_id": 66560153, "body": "Where is <code>y2</code> actually initialized?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1474495741, "post_id": 39627259, "comment_id": 66560195, "body": "You&#39;ve previously assigned a <code>float</code> to <code>y2</code>. <code>y2[i]</code> only works if <code>y2</code> is an array."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474495656, "post_id": 39627290, "comment_id": 66560161, "body": "I doubt that this is the problem. Try <code>y2[10] = 10</code> you&#39;ll just get <code>NameError: name &#39;y2&#39; is not defined</code>. You&#39;re answering the <i>next</i> question."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 3, "last_activity_date": 1474497359, "last_edit_date": 1474497359, "creation_date": 1474495575, "answer_id": 39627290, "question_id": 39627259, "link": "https://stackoverflow.com/questions/39627259/error-float-object-does-not-support-item-assignment/39627290#39627290", "title": "Error: &#39;float&#39; object does not support item assignment", "body": "<p>As <em>Jean-Fran\u00e7ois Fabre</em> and <em>Barmar</em> have noted, you get this message only if you have y2 already assigned to a float.  IN any case, you'll need to build the list one way or another.</p>\n\n<p>Using the <strong>numpy</strong> array facilities (credit to <em>John1024</em>):</p>\n\n<pre><code>y2 = 1.5*(1-np.exp(-x))\n</code></pre>\n\n<p>Using a <em>list comprehension</em>:</p>\n\n<pre><code>y2 = [ 1.5*(1-exp(-x[i])) for i in range(100) ]\n</code></pre>\n\n<p>If these are more advanced than you want to use, you can initialize y2 and build it in your loop:</p>\n\n<pre><code>y2 = []\nfor i in range(100):\n   y2.append(1.5*(1-exp(-x[i])))\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6860923, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iceSsG8ZOOQ/AAAAAAAAAAI/AAAAAAAAABE/Vo888et9vcY/photo.jpg?sz=128", "display_name": "Anto Robich", "link": "https://stackoverflow.com/users/6860923/anto-robich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22322, "favorite_count": 1, "accepted_answer_id": 39627290, "answer_count": 1, "score": 4, "last_activity_date": 1474497359, "creation_date": 1474495396, "question_id": 39627259, "link": "https://stackoverflow.com/questions/39627259/error-float-object-does-not-support-item-assignment", "title": "Error: &#39;float&#39; object does not support item assignment", "body": "<p>I'm programming in python and I don't understand what i'm doing wrong:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom math import exp\nx=np.linspace(0.0,4.0,100)\ny1=x\nfor i in range(100):\n\n   y2[i]=1.5*(1-exp(-x[i]))\n</code></pre>\n\n<p>This last line gives me an error that says: float object does not support item assigment. I don't understand how y2 can be considered a float object since it is a list in which every element is calculated with 1.5*(1-exp(-x[i])).</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1474498627, "post_id": 39627227, "comment_id": 66561048, "body": "What is the data? What isn&#39;t working? What is the error or undesired results? What is the desired results?"}, {"owner": {"reputation": 11, "user_id": 6860938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44bd3d71884db08236066cc0cd83c399?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver.T", "link": "https://stackoverflow.com/users/6860938/oliver-t"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1475080769, "post_id": 39627227, "comment_id": 66802436, "body": "@Parfait        Data is the value in the file, which then needs to be updated by the user input. There is no error message but it just doesn&#39;t edit the value in the column of the CSV"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1475086453, "post_id": 39627227, "comment_id": 66805725, "body": "In your try/except block, check indentation in <code>except</code>. Did you mean to read the csv file when user gets <i>ValueError</i>?"}, {"owner": {"reputation": 11, "user_id": 6860938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44bd3d71884db08236066cc0cd83c399?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver.T", "link": "https://stackoverflow.com/users/6860938/oliver-t"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1475178461, "post_id": 39627227, "comment_id": 66851884, "body": "@Parfait       CSV needs to be read and written to only when there is a valid code and then quantity entered"}], "owner": {"reputation": 11, "user_id": 6860938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44bd3d71884db08236066cc0cd83c399?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver.T", "link": "https://stackoverflow.com/users/6860938/oliver-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474907612, "creation_date": 1474495182, "last_edit_date": 1474907612, "question_id": 39627227, "link": "https://stackoverflow.com/questions/39627227/csv-stock-file-updating-value-in-file", "title": "CSV Stock file- updating value in file", "body": "<p>This is the code im having problems with. It is a basic GTIN-8 checker with the addition of a quantity input, to then be deducted from a preset value in the CSV file, but writing to CSV's is a new concept, so I am struggling to get it functioning. I need it to deduct the input of quantity from the value in the CSV, then updating the value in the CSV if the quantity is too high. I would appreciate some insight. </p>\n\n<p>The main problem is the wiping of the CSV and not appending to it, where as I need it to change the values in the file and update on command</p>\n\n<pre><code>import csv\nnew_rows = []\ncount = 1\nwhile count==1:\n    code=(input(\"Enter a GTIN-8 code or type done to exit\"))\n    length=len(code)\n    if code == \"done\":\n        f.close()\n        exit()\n    if length==8:\n        int1=int(code[0])\n        int2=int(code[1])\n        int3=int(code[2])\n        int4=int(code[3])\n        int5=int(code[4])\n        int6=int(code[5])\n        int7=int(code[6])\n        int8=int(code[7])\n        codeDigit=int(int1*3+int2+int3*3+int4+int5*3+int6+int7*3)\n        roundup=round(codeDigit, -1)\n        Bcode8th=int(roundup-codeDigit)\n        if Bcode8th==int8:\n            quantity=(int(input(\"Enter a quantity\")))\n            if quantity &lt;51:\n                try:\n                    val = int(quantity)\n                except ValueError:\n                    print(\"That's not an integer\")\n                    changes = {quantity}\n                    with open('Stock.csv', 'rb') as f:\n                        reader = csv.reader(f)\n                    for row in reader:\n                       row_one = row\n                       for key, value in changes.items():\n                           row_one = [ x.replace(key, value)for x in row_one \n                       new_rows.append(row_one) \n                with open('Stock.csv', 'ab') as f:\n                    writer = csv.writer(f)\n                    writer.writerows(new_rows)\n            else:\n                print(\"Try again\")\n    else:\n        print(\"Try again\")\n</code></pre>\n"}, {"tags": ["python", "concurrency", "yield", "coroutine", "yield-from"], "comments": [{"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1474495157, "post_id": 39627188, "comment_id": 66559987, "body": "Possibly Copy of: <a href=\"http://stackoverflow.com/questions/16181121/python-very-simple-multithreading-parallel-url-fetching-without-queue\" title=\"python very simple multithreading parallel url fetching without queue\">stackoverflow.com/questions/16181121/&hellip;</a>"}, {"owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "reply_to_user": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1474495679, "post_id": 39627188, "comment_id": 66560172, "body": "No, not quite. That one is about multiple concurrent downloads. I need only one download at a time and the consumer should be aware of every new file."}], "answers": [{"comments": [{"owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "edited": false, "score": 0, "creation_date": 1474495964, "post_id": 39627242, "comment_id": 66560267, "body": "Cool, yes, that should work and is actually quite simple."}, {"owner": {"reputation": 10371, "user_id": 3322400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l3BGk.jpg?s=128&g=1", "display_name": "Lo&#239;c", "link": "https://stackoverflow.com/users/3322400/lo%c3%afc"}, "reply_to_user": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "edited": false, "score": 0, "creation_date": 1474496037, "post_id": 39627242, "comment_id": 66560298, "body": "it should indeed, even if I coded that blind and didn&#39;t test. Please let me know if there are any issue so I can fix my answer."}, {"owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "edited": false, "score": 0, "creation_date": 1474496849, "post_id": 39627242, "comment_id": 66560550, "body": "I am quite sure this is a working answer, but the thing is my code is running inside some application (QGIS) that seems not to like when I use python <code>threading</code> (it crashes). I have to investigate the details but a solution based on coroutine might be safer."}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1474521421, "post_id": 39627242, "comment_id": 66566391, "body": "I think that a <code>t.join()</code> is missing at the end of the <code>for</code> loop. Add it in a <code>else</code> clause."}, {"owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "reply_to_user": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1474617719, "post_id": 39627242, "comment_id": 66613747, "body": "I did import threading. I will try the solution outside that application and let you know if it worked. @LaurentLAPORTE that seems right. What do you say, @Lo&#239;c?"}, {"owner": {"reputation": 10371, "user_id": 3322400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l3BGk.jpg?s=128&g=1", "display_name": "Lo&#239;c", "link": "https://stackoverflow.com/users/3322400/lo%c3%afc"}, "edited": false, "score": 0, "creation_date": 1474719133, "post_id": 39627242, "comment_id": 66652706, "body": "I don&#39;t think it is missing, maybe at the last pass through the loop there is no join() though the program doesn&#39;t need the thread to finish specifically."}], "tags": [], "owner": {"reputation": 10371, "user_id": 3322400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l3BGk.jpg?s=128&g=1", "display_name": "Lo&#239;c", "link": "https://stackoverflow.com/users/3322400/lo%c3%afc"}, "is_accepted": true, "score": 0, "last_activity_date": 1474496827, "last_edit_date": 1474496827, "creation_date": 1474495281, "answer_id": 39627242, "question_id": 39627188, "link": "https://stackoverflow.com/questions/39627188/concurrent-download-and-processing-of-large-files-in-python/39627242#39627242", "title": "Concurrent download and processing of large files in python", "body": "<p>I'd simply use <code>threading.Thread(target=process, args=(fname,))</code> and start a new thread for processing.</p>\n\n<p>But before that, end last processing thread :</p>\n\n<pre><code>t = None\nfor fname in download(urls):\n    if t is not None: # wait for last processing thread to end\n        t.join()\n    t = threading.Thread(target=process, args=(fname,))\n    t.start()\n    print('[i] thread started for %s' % fname)\n</code></pre>\n\n<p>See <a href=\"https://docs.python.org/3/library/threading.html\" rel=\"nofollow\">https://docs.python.org/3/library/threading.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "is_accepted": false, "score": 1, "last_activity_date": 1510755912, "creation_date": 1510755912, "answer_id": 47309921, "question_id": 39627188, "link": "https://stackoverflow.com/questions/39627188/concurrent-download-and-processing-of-large-files-in-python/47309921#47309921", "title": "Concurrent download and processing of large files in python", "body": "<p>A year later, we are actually using Python 3's <a href=\"https://docs.python.org/3/library/asyncio.html\" rel=\"nofollow noreferrer\"><code>asyncio</code></a> and <a href=\"https://pypi.python.org/pypi/aiohttp\" rel=\"nofollow noreferrer\"><code>aiohttp</code></a>.</p>\n"}], "owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 1, "accepted_answer_id": 39627242, "answer_count": 2, "score": 3, "last_activity_date": 1510755912, "creation_date": 1474494936, "last_edit_date": 1495535652, "question_id": 39627188, "link": "https://stackoverflow.com/questions/39627188/concurrent-download-and-processing-of-large-files-in-python", "title": "Concurrent download and processing of large files in python", "body": "<p>I have a list of URLs for large files to <strong>download</strong> (e.g. compressed archives), which I want to <strong>process</strong> (e.g. decompress the archives). </p>\n\n<p>Both download and processing take a long time and processing is heavy on disk IO, so I want to have <strong>just one of each to run at a time</strong>. Since the two tasks take about the same time and do not compete for the same resources, I want to download the next file(s) while the last is being processed.</p>\n\n<p>This is a variation of the <strong><a href=\"https://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem\" rel=\"nofollow noreferrer\">producer-consumer problem</a></strong>.</p>\n\n<p>The situation is similar to <a href=\"https://stackoverflow.com/q/12474182/512111\">reading and processing images</a> or <a href=\"https://stackoverflow.com/questions/37825218/fastest-way-to-read-and-process-100-000-urls-in-python\">downloading loads of files</a>, but my downloader calls are not (yet) picklable, so I have not been able to use multiprocessing, and both tasks take about the same time.</p>\n\n<p>Here is a dummy example, where both download and processing are blocking:</p>\n\n<pre><code>import time\nimport posixpath\n\ndef download(urls):\n    for url in urls:\n        time.sleep(3)  # this is the download (more like 1000s) \n        yield posixpath.basename(url)\n\ndef process(fname):\n    time.sleep(2)  # this is the processing part (more like 600s)\n\nurls = ['a', 'b', 'c']\nfor fname in download(urls):\n    process(fname)\n    print(fname)\n</code></pre>\n\n<p>How could I make the two tasks concurrent? Can I use <code>yield</code> or <code>yield from</code> <a href=\"https://stackoverflow.com/questions/9708902/in-practice-what-are-the-main-uses-for-the-new-yield-from-syntax-in-python-3\">in a smart way</a>, perhaps in combination with <a href=\"https://docs.python.org/2/library/collections.html#collections.deque\" rel=\"nofollow noreferrer\"><code>deque</code></a>? Or must it be <a href=\"https://docs.python.org/3.4/library/asyncio.html\" rel=\"nofollow noreferrer\"><code>asyncio</code></a> with <code>Future</code>?</p>\n"}, {"tags": ["python", "numpy", "machine-learning", "neural-network", "recurrent-neural-network"], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 2205761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c91a62266221de9655111493357f201e?s=128&d=identicon&r=PG&f=1", "display_name": "jstein123", "link": "https://stackoverflow.com/users/2205761/jstein123"}, "is_accepted": true, "score": 0, "last_activity_date": 1474504043, "creation_date": 1474504043, "answer_id": 39628442, "question_id": 39627187, "link": "https://stackoverflow.com/questions/39627187/why-isnt-my-rnn-learning/39628442#39628442", "title": "Why isn&#39;t my RNN learning?", "body": "<p>I figured it out. In case anyone wants to know why it wasn't working, it was because I was only multiplying one part of the hidden error (the part that came from the output error) by the derivative of the hidden layer activation. Now it's easily learning the addition problem within a few thousand iterations.</p>\n"}], "owner": {"reputation": 436, "user_id": 2205761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c91a62266221de9655111493357f201e?s=128&d=identicon&r=PG&f=1", "display_name": "jstein123", "link": "https://stackoverflow.com/users/2205761/jstein123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 39628442, "answer_count": 1, "score": 1, "last_activity_date": 1544496875, "creation_date": 1474494936, "last_edit_date": 1474504073, "question_id": 39627187, "link": "https://stackoverflow.com/questions/39627187/why-isnt-my-rnn-learning", "title": "Why isn&#39;t my RNN learning?", "body": "<p>I'm trying to implement a simple RNN using numpy (based on <a href=\"https://iamtrask.github.io/2015/11/15/anyone-can-code-lstm/\" rel=\"nofollow\">this article</a>), and I'm training it to do binary addition where it adds two 8-bit unsigned integers one bit at a time (starting from the end) with the purpose of having it learn to \"carry the one\" during addition when necessary. However, it doesn't seem to be learning. For training, I'm choosing two random numbers, forward propagating 8 steps with one bit from a and b as input and storing the outputs and hidden layer values at each timestep, and backpropagating 8 steps where I calculate the hidden layer error (<code>output_error.dot(weights_hidden_to_output.T)) * sigmoid_to_derivative(hidden) + future_hidden_error.dot(weights_hidden_to_hidden.T)</code>) and the updates for each of the weight matrices by matrix multiplying the parent layer by the error of the child layer. Is this the correct method?</p>\n\n<p>Here's my code if it will make it more clear. I noticed that for some reason, the weights start increasing like crazy all of a sudden every time I train it, and they cause an overflow in the sigmoid function which causes the training to fail. Any idea what could cause this?</p>\n\n<pre><code>import numpy as np\nnp.random.seed(0)\n\ndef sigmoid(x):\n    return np.atleast_2d(1/(1+np.exp(-x)))\n    #return np.atleast_2d(np.max(x, 0.01))\ndef sig_deriv(x):\n    return x*(1-x)\ndef add_bias(x):\n    return np.hstack([np.ones((len(x), 1)), x])\ndef dec_to_bin(dec):\n    return np.array(map(int, list(format(dec, '#010b'))[2:]))\ndef bin_to_dec(b):\n    out = 0\n    for bit in b:\n        out = (out &lt;&lt; 1) | bit\n    return out\n\n\nbatch_size = 8\nlearning_rate = .1\n\ninput_size = 2\nhidden_size = 16\noutput_size = 1\n\nweights_xh = 2 * np.random.random((input_size+1, hidden_size)) - 1\nweights_hh = 2 * np.random.random((hidden_size+1, hidden_size)) - 1\nweights_hy = 2 * np.random.random((hidden_size+1, output_size)) - 1\n\nxh_update = np.zeros_like(weights_xh)\nhh_update = np.zeros_like(weights_hh)\nhy_update = np.zeros_like(weights_hy)\n\nfor i in xrange(10000):\n    a = np.random.randint(0, 2**batch_size/2)\n    b = np.random.randint(0, 2**batch_size/2)\n    sum_ = a+b\n    X = add_bias(np.hstack([np.atleast_2d(dec_to_bin(a)).T, np.atleast_2d(dec_to_bin(b)).T]))\n    y = np.atleast_2d(dec_to_bin(sum_)).T\n\n    error = 0\n\n    output_errors = []\n    outputs = []\n    hiddens = [add_bias(np.zeros((1, hidden_size)))]\n    #forward propagation through time\n    for j in xrange(batch_size):\n        hidden = sigmoid(X[-j-1].dot(weights_xh) + hiddens[-1].dot(weights_hh))\n        hidden = add_bias(hidden)\n        hiddens.append(hidden)\n        output = sigmoid(hidden.dot(weights_hy))\n        outputs.append(output[0][0])\n        output_error = (y[-j-1] - output)\n        error += np.abs(output_error[0])\n        output_errors.append((output_error * sig_deriv(output)))\n\n    future_hidden_error = np.zeros((1,hidden_size))\n    #backward ppropagation through time\n    for j in xrange(batch_size):\n        output_error = output_errors[-j-1]\n        hidden = hiddens[-j-1]\n        prev_hidden = hiddens[-j-2]\n\n        hidden_error = (output_error.dot(weights_hy.T) * sig_deriv(hidden)) + future_hidden_error.dot(weights_hh.T)\n        hidden_error = np.delete(hidden_error, 0, 1) #delete bias error\n\n        xh_update += np.atleast_2d(X[j]).T.dot(hidden_error)\n        hh_update += prev_hidden.T.dot(hidden_error)\n        hy_update += hidden.T.dot(output_error)\n\n        future_hidden_error = hidden_error\n\n    weights_xh += (xh_update * learning_rate)/batch_size\n    weights_hh += (hh_update * learning_rate)/batch_size\n    weights_hy += (hy_update * learning_rate)/batch_size\n\n    xh_update *= 0\n    hh_update *= 0\n    hy_update *= 0\n\n    if i%1000==0:\n        guess = map(int, map(round, outputs[::-1]))\n        print \"Iteration {}\".format(i)\n        print \"Error: {}\".format(error)\n        print \"Problem: {} + {} = {}\".format(a, b, sum_)\n        print \"a:        {}\".format(list(dec_to_bin(a)))\n        print \"+ b:      {}\".format(list(dec_to_bin(b)))\n        print \"Solution: {}\".format(map(int, y))\n        print \"Guess:    {} ({})\".format(guess, bin_to_dec(guess))\n        print\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1474494697, "post_id": 39627112, "comment_id": 66559802, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/on-topic\">on topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here. StackOverflow is not a coding or tutorial service."}, {"owner": {"reputation": 43, "user_id": 5568935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/96bf8fab712f306f0fdfa1e74ca9ee25?s=128&d=identicon&r=PG", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5568935/aditya"}, "edited": false, "score": 0, "creation_date": 1474494761, "post_id": 39627112, "comment_id": 66559828, "body": "not much tbh. I&#39;ve found a few ways but most of them either the entire set of keys to a list or only take the greatest value. I&#39;m new to python."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1474494976, "post_id": 39627112, "comment_id": 66559918, "body": "what is meant by greatest space?"}, {"owner": {"reputation": 43, "user_id": 5568935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/96bf8fab712f306f0fdfa1e74ca9ee25?s=128&d=identicon&r=PG", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5568935/aditya"}, "reply_to_user": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1474495103, "post_id": 39627112, "comment_id": 66559971, "body": "@MoinuddinQuadri The values. HD space.  I need the keys which hold the 3 greatest values."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1474495297, "post_id": 39627112, "comment_id": 66560030, "body": "Are they all in Gb, or do you have to deal with the difference between 500Mb and 1.0 Gb?"}, {"owner": {"reputation": 43, "user_id": 5568935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/96bf8fab712f306f0fdfa1e74ca9ee25?s=128&d=identicon&r=PG", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5568935/aditya"}, "edited": false, "score": 0, "creation_date": 1474495651, "post_id": 39627112, "comment_id": 66560159, "body": "So far, they&#39;re all in Gb."}], "answers": [{"comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1474494929, "post_id": 39627153, "comment_id": 66559901, "body": "This isn&#39;t exactly correct. The sorting is done <i>lexicographically</i> not as OP wants"}, {"owner": {"reputation": 43, "user_id": 5568935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/96bf8fab712f306f0fdfa1e74ca9ee25?s=128&d=identicon&r=PG", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5568935/aditya"}, "edited": false, "score": 0, "creation_date": 1474495004, "post_id": 39627153, "comment_id": 66559929, "body": "Thank you so much. This is a lot simpler than everything i&#39;ve found so far."}, {"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1474495028, "post_id": 39627153, "comment_id": 66559946, "body": "I didn&#39;t even look at the key values, whoops. It&#39;s still &quot;sorted&quot; ;)"}], "tags": [], "owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1474494991, "last_edit_date": 1474494991, "creation_date": 1474494763, "answer_id": 39627153, "question_id": 39627112, "link": "https://stackoverflow.com/questions/39627112/sort-dict-keys-into-list/39627153#39627153", "title": "Sort dict keys into list", "body": "<p>This should work:</p>\n\n<pre><code>ips = {'192.168.100.102': '7.3G', '192.168.100.103': '3.5G', '192.168.100.101': '7.4G', '192.168.100.107': '17G'}\nsorted(ips, key=ips.get)[:3]\n</code></pre>\n\n<p>Actually this doesn't work because of the G in each value, use @Moses Koledoye's answer below. </p>\n"}, {"comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1474495334, "post_id": 39627175, "comment_id": 66560046, "body": "Note: It is assumed all the spaces are denoted in &#39;G&#39;"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1474495505, "last_edit_date": 1474495505, "creation_date": 1474494866, "answer_id": 39627175, "question_id": 39627112, "link": "https://stackoverflow.com/questions/39627112/sort-dict-keys-into-list/39627175#39627175", "title": "Sort dict keys into list", "body": "<p>Slice off the trailing <code>'G'</code> part from the values and convert them to <code>float</code> in the <em>sort key</em>:</p>\n\n<pre><code>ips = {'192.168.100.102': '7.3G', '192.168.100.103': '3.5G', '192.168.100.101': '7.4G', '192.168.100.107': '17G'}\n\nsorted_ips = sorted(ips, key=lambda x: float(ips[x][:-1]), reverse=True)[:3]\nprint(sorted_ips)\n# ['192.168.100.107', '192.168.100.101', '192.168.100.102']\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5568935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/96bf8fab712f306f0fdfa1e74ca9ee25?s=128&d=identicon&r=PG", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5568935/aditya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 39627175, "answer_count": 2, "score": -2, "last_activity_date": 1474495505, "creation_date": 1474494548, "question_id": 39627112, "link": "https://stackoverflow.com/questions/39627112/sort-dict-keys-into-list", "title": "Sort dict keys into list", "body": "<p>I have a dictionary containing IP addresses and hd space for each IP. </p>\n\n<p>{'192.168.100.102': '7.3G', '192.168.100.103': '3.5G', '192.168.100.101': '7.4G', '192.168.100.107': '17G'} </p>\n\n<p>I want to take three IPs with the greatest space and put them into a list. Is this possible?</p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 4793, "user_id": 2595183, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MNsKh.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2595183/alex"}, "edited": false, "score": 0, "creation_date": 1474494862, "post_id": 39627108, "comment_id": 66559877, "body": "using virtualenv?"}, {"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1474494896, "post_id": 39627108, "comment_id": 66559888, "body": "Describe how you installed BeautifulSoup please?"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "reply_to_user": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1474495549, "post_id": 39627108, "comment_id": 66560131, "body": "@DanielleM. Thank you for getting back to me.  I installed it by downloading (beautifulsoup4-4.5.1) from crummy.com.  Then I unzipped the folder and in terminal typed cd (then the location of the folder contents), then in terminal again I typed sudo python setup.py install.  It seemed to install and then when I tried from bs4 import BeautifulSoup I got the error."}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "reply_to_user": {"reputation": 4793, "user_id": 2595183, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MNsKh.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2595183/alex"}, "edited": false, "score": 0, "creation_date": 1474497344, "post_id": 39627108, "comment_id": 66560694, "body": "@lxer I am quite sure that I&#39;m not using a virtual environment, but I honestly wouldn&#39;t know.  I simply downloaded Python, then downloaded PyCharm, then started trying to install these modules (not sure what they are called).  Thank you."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474497923, "post_id": 39627108, "comment_id": 66560855, "body": "I would recommend going through the command line. GUIs and PyCharm may be nice, but <code>pip</code> is the recommended way to get packages installed."}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474498740, "post_id": 39627108, "comment_id": 66561066, "body": "@cricket_007 When you say command line, I assume you are referring to the terminal that is part of my Mac OSX right?  Do I need to type python in front of the command, or simply pip install beautifulsoup"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474498941, "post_id": 39627108, "comment_id": 66561108, "body": "@tforbes Yes, the &quot;terminal&quot; application, but commands are ran from the &quot;command line&quot; (they are synonymous). And no <code>python</code> unless you are running a script. <code>pip</code> is its own command. <code>install</code> is a sub-command, then <code>beautifulsoup</code> is the argument to install"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474499075, "post_id": 39627108, "comment_id": 66561136, "body": "@cricket_007 got it and thank you for that clarification.  I tried easy_install beautifulsoup4 through the command line.  I am not sure if it worked, but I didn&#39;t seem to get an error."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474497929, "post_id": 39627606, "comment_id": 66560856, "body": "Thank you.  When you say I might be facing permission problems, does the sudo command in front of what you typed help with that?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474497977, "post_id": 39627606, "comment_id": 66560869, "body": "@tforbes <a href=\"http://stackoverflow.com/a/15028735/2308683\">Use a virtualenv</a>"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474498262, "post_id": 39627606, "comment_id": 66560952, "body": "I typed the command as you had it and I received an error.  I tried to copy and paste the error into a comment but it was too long.  Is there a way for me to copy and paste code into these replies?"}, {"owner": {"reputation": 371, "user_id": 6319641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/131aa3bbdf2adc3b31593a9681f0d82c?s=128&d=identicon&r=PG&f=1", "display_name": "CasperTN", "link": "https://stackoverflow.com/users/6319641/caspertn"}, "edited": false, "score": 1, "creation_date": 1474498547, "post_id": 39627606, "comment_id": 66561020, "body": "Try:  easy_install beautifulsoup4"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474498897, "post_id": 39627606, "comment_id": 66561101, "body": "@CasperTN thank you, I typed that in using regular Mac terminal (not PyCharm).  I don&#39;t know if it worked or not, but it said, Processing dependencies for beautifulsoup4 Finished processing dependencies for beautifulsoup4 .  Is there a way for me to test if it worked?"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1474498959, "post_id": 39627606, "comment_id": 66561112, "body": "@cricket_007 Do I need to uninstall or delete what has already been done in order to setup a virtual environment?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474499070, "post_id": 39627606, "comment_id": 66561134, "body": "@tforbes You may need to install <code>virtualenv</code>, but no clean up is necessary."}, {"owner": {"reputation": 1029, "user_id": 4220177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff21ac99100f2bdd7e3003f3008e5e83?s=128&d=identicon&r=PG&f=1", "display_name": "Ilhicas", "link": "https://stackoverflow.com/users/4220177/ilhicas"}, "edited": false, "score": 1, "creation_date": 1474499079, "post_id": 39627606, "comment_id": 66561137, "body": "The easiest way to check if its installed and in python path, open a terminal, run python and type     from bs4 import BeautifulSoup  if there is no error message then its installed and on python modules path"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474499338, "post_id": 39627606, "comment_id": 66561202, "body": "@CasperTN I ran from bs4 import BeautifulSoup.  I don&#39;t get any errors when I do it from terminal, I do get errors when I do it within PyCharm Python Console.  Is that normal, and can I assume that the BeautifulSoup question has been successfully resolved?"}, {"owner": {"reputation": 371, "user_id": 6319641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/131aa3bbdf2adc3b31593a9681f0d82c?s=128&d=identicon&r=PG&f=1", "display_name": "CasperTN", "link": "https://stackoverflow.com/users/6319641/caspertn"}, "edited": false, "score": 0, "creation_date": 1474499348, "post_id": 39627606, "comment_id": 66561206, "body": "Try this:  pip install bs4"}, {"owner": {"reputation": 371, "user_id": 6319641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/131aa3bbdf2adc3b31593a9681f0d82c?s=128&d=identicon&r=PG&f=1", "display_name": "CasperTN", "link": "https://stackoverflow.com/users/6319641/caspertn"}, "edited": false, "score": 0, "creation_date": 1474499399, "post_id": 39627606, "comment_id": 66561216, "body": "And then when you import: from bs4 import BeautifulSoup"}, {"owner": {"reputation": 371, "user_id": 6319641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/131aa3bbdf2adc3b31593a9681f0d82c?s=128&d=identicon&r=PG&f=1", "display_name": "CasperTN", "link": "https://stackoverflow.com/users/6319641/caspertn"}, "edited": false, "score": 0, "creation_date": 1474499523, "post_id": 39627606, "comment_id": 66561239, "body": "Try to restart Pycharm to let it update its libraries"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474499916, "post_id": 39627606, "comment_id": 66561328, "body": "@CasperTN I received -- Successfully installed bs4-0.0.1.  When I restart Pycharm, will it update it&#39;s libraries on its own, or is it something that I need to do specifically?"}, {"owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "edited": false, "score": 0, "creation_date": 1474500094, "post_id": 39627606, "comment_id": 66561366, "body": "Wow.  Thank you all for your help.  This seems to be working perfectly fine now.  I am so very appreciative.  How do I mark that this question was successfully resolved?"}, {"owner": {"reputation": 371, "user_id": 6319641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/131aa3bbdf2adc3b31593a9681f0d82c?s=128&d=identicon&r=PG&f=1", "display_name": "CasperTN", "link": "https://stackoverflow.com/users/6319641/caspertn"}, "edited": false, "score": 0, "creation_date": 1474500158, "post_id": 39627606, "comment_id": 66561381, "body": "First up vote it by clicking the up arrow and then click the green mark."}], "tags": [], "owner": {"reputation": 371, "user_id": 6319641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/131aa3bbdf2adc3b31593a9681f0d82c?s=128&d=identicon&r=PG&f=1", "display_name": "CasperTN", "link": "https://stackoverflow.com/users/6319641/caspertn"}, "is_accepted": false, "score": -2, "last_activity_date": 1474565244, "last_edit_date": 1474565244, "creation_date": 1474497657, "answer_id": 39627606, "question_id": 39627108, "link": "https://stackoverflow.com/questions/39627108/python-beautifulsoup-mac-installation-error/39627606#39627606", "title": "Python BeautifulSoup Mac Installation Error", "body": "<p>You can use pip to install beautifulsoup on mac, by typing in the following command in Terminal:</p>\n\n<pre><code>pip install beautifulsoup4\n</code></pre>\n\n<p>You might be facing some permission problems if you are running the OS X preinstalled python as interpreter. I would suggest installing python with Homebrew if that's the case.  </p>\n"}], "owner": {"reputation": 1, "user_id": 6860729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89tg3.jpg?s=128&g=1", "display_name": "tforbes", "link": "https://stackoverflow.com/users/6860729/tforbes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474565244, "creation_date": 1474494538, "last_edit_date": 1474495842, "question_id": 39627108, "link": "https://stackoverflow.com/questions/39627108/python-beautifulsoup-mac-installation-error", "title": "Python BeautifulSoup Mac Installation Error", "body": "<p>I am completely new to all things programming.  As I am working to learn the basics of Python, I have run into a problem that I've been unable to work through by reading and Googling.</p>\n\n<p>I am trying to install BeautifulSoup, and I thought I had done so successfully, but when I try to test whether or not it's installed correctly I get an error.</p>\n\n<p>I am using PyCharm and typed the following into the Python Console:</p>\n\n<pre><code>&gt;&gt;&gt; from bs4 import BeautifulSoup\n</code></pre>\n\n<p>And I receive the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;input&gt;\", line 1, in &lt;module&gt;\n  File \"/Applications/PyCharm CE.app/Contents/helpers/pydev/_pydev_bundle/pydev_import_hook.py\", line 21, in do_import\n    module = self._system_import(name, *args, **kwargs)\nImportError: No module named 'bs4'\n</code></pre>\n\n<p>I read through a previous thread about a BeautifulSoup install error and one of the things that was mentioned was to check the preferences settings in PyCharm to ensure that it's using the right version of Python . . .</p>\n\n<p><img src=\"https://i.stack.imgur.com/SBcmp.png\" alt=\"PyCharm Project Interpreter Screenshot\"></p>\n\n<p>Anyway, I can't seem to figure out what's wrong, so any insight and help in resolving this issue would be tremendously appreciated.</p>\n"}, {"tags": ["python", "nltk"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1474494601, "post_id": 39627066, "comment_id": 66559749, "body": "Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a>.  Without the original list and other supporting items, we can&#39;t reproduce your problem.  It appears that you have the filtered words only once each, rather than the full frequency from the original text."}], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "is_accepted": true, "score": 1, "last_activity_date": 1474497941, "last_edit_date": 1474497941, "creation_date": 1474496011, "answer_id": 39627368, "question_id": 39627066, "link": "https://stackoverflow.com/questions/39627066/eliminating-stop-words-from-a-text-while-not-deleting-duplicate-regular-words/39627368#39627368", "title": "Eliminating stop words from a text, while NOT deleting duplicate regular words", "body": "<p>As you have it written now, <code>list</code> is already a distribution containing the words as keys and the occurrence count as the value:</p>\n\n<pre><code>&gt;&gt;&gt; list\nFreqDist({u',': 1993, u\"'\": 1731, u'the': 1527, u'and': 802, u'.': 764, u'to': 725, u'a': 615, u'I': 543, u'it': 527, u'she': 509, ...})\n</code></pre>\n\n<p>You then iterate over the keys meaning each word is only there once. I believe you actually want to create <code>filtered_words</code> like this:</p>\n\n<pre><code>filtered_words = [word for word in carroll if word not in stops]\n</code></pre>\n\n<p>Also, you should try to avoid using variable names that match Python builtin functions (<code>list</code> is a Python builtin function).</p>\n"}], "owner": {"reputation": 466, "user_id": 5589605, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gEcDX.jpg?s=128&g=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5589605/cody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 39627368, "answer_count": 1, "score": 0, "last_activity_date": 1474497941, "creation_date": 1474494325, "last_edit_date": 1474496227, "question_id": 39627066, "link": "https://stackoverflow.com/questions/39627066/eliminating-stop-words-from-a-text-while-not-deleting-duplicate-regular-words", "title": "Eliminating stop words from a text, while NOT deleting duplicate regular words", "body": "<p>I'm trying to create a list with the most common 50 words within a specific text file, however I want to eliminate the stop words from that list. I have done that using this code.</p>\n\n<pre><code>from nltk.corpus import gutenberg\ncarroll = nltk.Text(nltk.corpus.gutenberg.words('carroll-alice.txt'))\ncarroll_list = FreqDist(carroll)\nstops = set(stopwords.words(\"english\"))\nfiltered_words = [word for word in carroll_list if word not in stops]\n</code></pre>\n\n<p>However, this is deleting the duplicates of the words I want. Like when I do this:</p>\n\n<pre><code>fdist = FreqDist(filtered_words)\nfdist.most_common(50)\n</code></pre>\n\n<p>I get the output:</p>\n\n<pre><code> [('right', 1), ('certain', 1), ('delighted', 1), ('adding', 1), \n ('work', 1),      ('young', 1), ('Up', 1), ('soon', 1), ('use', 1),     \n ('submitted', 1), ('remedies', 1), ('tis', 1), ('uncomfortable', 1)....]\n</code></pre>\n\n<p>It is saying that there is one instance of each word, clearly it eliminated the duplicates. I want to keep the duplicates so I can see what word is most common. Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "pdf", "zip", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 35566, "user_id": 108741, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b3a383cf256d50683dfb00512e28f693?s=128&d=identicon&r=PG", "display_name": "SpliFF", "link": "https://stackoverflow.com/users/108741/spliff"}, "is_accepted": true, "score": 0, "last_activity_date": 1474496883, "creation_date": 1474496883, "answer_id": 39627509, "question_id": 39627036, "link": "https://stackoverflow.com/questions/39627036/python-downloading-pdf-into-a-zip/39627509#39627509", "title": "Python downloading PDF into a .zip", "body": "<p>Your <code>download_pdf()</code> function is saving a file but it doesn't return anything. You need to modify it so it actually returns the file path to <code>myzip.write()</code>. You don't want to hardcode test.pdf but pass unique paths to your download function so you don't end up with multiple <code>test.pdf</code> in your archive.</p>\n\n<pre><code>def dowload_pdf(url, path):\n    response = requests.get(url, stream=True)\n    with open(path, 'wb') as f:\n        f.write(response.content)\n    return path\n</code></pre>\n"}], "owner": {"reputation": 522, "user_id": 2687966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f69a4ba78551df31cc715141dbea84?s=128&d=identicon&r=PG&f=1", "display_name": "TsvGis", "link": "https://stackoverflow.com/users/2687966/tsvgis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 39627509, "answer_count": 1, "score": 0, "last_activity_date": 1474499445, "creation_date": 1474494187, "last_edit_date": 1474499445, "question_id": 39627036, "link": "https://stackoverflow.com/questions/39627036/python-downloading-pdf-into-a-zip", "title": "Python downloading PDF into a .zip", "body": "<p>What I am trying to do is loop through a list of URL to download a series of .pdfs, and save them to a .zip. At the moment I am just trying to test code using just one URL. The ERROR I am getting is:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"I:\\test_pdf_download_zip.py\", line 36, in &lt;module&gt;\n    zip_file(zipfile_name, url)\n  File \"I:\\test_pdf_download_zip.py\", line 30, in zip_file\n    myzip.write(dowload_pdf(url))\nTypeError: expected a string or other character buffer object\n</code></pre>\n\n<p>Would someone know how to pass .pdf request to the .zip correctly (avoiding the error above) in order for me to append it, or know if it is possible to do this?</p>\n\n<pre><code>import os\nimport zipfile\nimport requests\n\noutput = r\"I:\"\n\n# File name of the zipfile\nzipfile_name = os.path.join(output, \"test.zip\")\n\n# Random test pdf\nurl = r\"http://www.pdf995.com/samples/pdf.pdf\"\n\ndef create_zipfile(zipfile_name):\n    zipfile.ZipFile(zipfile_name, \"w\")\n\ndef dowload_pdf(url):\n    response = requests.get(url, stream=True)\n    with open('test.pdf', 'wb') as f:\n        f.write(response.content)\n\ndef zip_file(zip_name, url):\n    with open(zip_name,'a') as myzip:\n        myzip.write(dowload_pdf(url))\n\nif __name__ == \"__main__\":\n    create_zipfile(zipfile_name)\n    zip_file(zipfile_name, url)\n    print(\"Done\")\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "bs4"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 1, "creation_date": 1474494180, "post_id": 39626940, "comment_id": 66559565, "body": "Paste as text, not as img and in your post"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6860619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b1b00b2236d144071208ffdd6e13c1?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Malik", "link": "https://stackoverflow.com/users/6860619/kunal-malik"}, "edited": false, "score": 0, "creation_date": 1474494958, "post_id": 39627053, "comment_id": 66559909, "body": "Thanks. However, I do not want to write &quot;buyer-code&quot; in the script. I can code in &quot;Carlson Busses&quot;  and Based on this text I want to get the title in that div ( buyer-name)  as well as all the titles in the parent divs.( if it has parent tags in the hierarchy)."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 0, "last_activity_date": 1474495517, "last_edit_date": 1474495517, "creation_date": 1474494284, "answer_id": 39627053, "question_id": 39626940, "link": "https://stackoverflow.com/questions/39626940/find-the-css-path-ancestor-tags-in-html-using-python/39627053#39627053", "title": "find the CSS path (ancestor tags) in HTML using python", "body": "<p>A solution using an <a href=\"/questions/tagged/xpath\" class=\"post-tag\" title=\"show questions tagged &#39;xpath&#39;\" rel=\"tag\">xpath</a> expression :</p>\n\n<pre><code>//div[@title=\"buyer-info\"]/div[text() = \"Carlson Busses\"]/ancestor::div\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 0, "last_activity_date": 1474496874, "creation_date": 1474496874, "answer_id": 39627506, "question_id": 39626940, "link": "https://stackoverflow.com/questions/39626940/find-the-css-path-ancestor-tags-in-html-using-python/39627506#39627506", "title": "find the CSS path (ancestor tags) in HTML using python", "body": "<p>If you want to search for the div by text and get all the previous divs that have <em>title</em> attributes, first find the div using the text, then use  <code>find_all_previous</code> setting <code>title=True</code></p>\n\n<pre><code>soup = BeautifulSoup(r.text,\"lxml\")\ndiv = soup.find('div', text=\"Earl E. Byrd\")\n\nprint([div[\"title\"]] + [d[\"title\"] for d in div.find_all_previous(\"div\", title=True)])\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6860619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b1b00b2236d144071208ffdd6e13c1?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Malik", "link": "https://stackoverflow.com/users/6860619/kunal-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 39627506, "answer_count": 2, "score": 0, "last_activity_date": 1474496874, "creation_date": 1474493713, "last_edit_date": 1474496199, "question_id": 39626940, "link": "https://stackoverflow.com/questions/39626940/find-the-css-path-ancestor-tags-in-html-using-python", "title": "find the CSS path (ancestor tags) in HTML using python", "body": "<p>I want to get all the ancestor div tags where I match a text. So for example if the html looks like <a href=\"http://i.stack.imgur.com/aePNZ.png\" rel=\"nofollow\">HTML snippet</a></p>\n\n<p>And i'm searching for \"Earl E. Byrd\". I wanna get a list which contains {\"buyer-info\",\"buyer-name\"}</p>\n\n<p>This is what i did </p>\n\n<pre><code>r=requests.get(self.url,verify='/path/to/certfile')\n                soup = BeautifulSoup(r.text,\"lxml\")\n                divTags = soup.find_all('div')\n</code></pre>\n\n<p>How should I proceed ?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1474494904, "post_id": 39626913, "comment_id": 66559891, "body": "Is that really the indentation you want on the <code>task.LoopingCall</code> line?"}, {"owner": {"reputation": 63, "user_id": 3047917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5842fb6436953cabbe6dfc87525c9a67?s=128&d=identicon&r=PG&f=1", "display_name": "user3047917", "link": "https://stackoverflow.com/users/3047917/user3047917"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1474495330, "post_id": 39626913, "comment_id": 66560043, "body": "@FamousJameous yes that is the correct indentation.  It is outside of the definition which is why I am running into an issue but that is how the timed loop works.  If I put it inside of the definition, the timer no longer works correctly.  I need this timer because the loop needs to be strictly executed and this method does not have any time float issues."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1474495573, "post_id": 39626913, "comment_id": 66560139, "body": "You&#39;ve never created an object with the <code>DudeWheresMyCar</code> class. What is <code>self</code> supposed to refer to?"}, {"owner": {"reputation": 63, "user_id": 3047917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5842fb6436953cabbe6dfc87525c9a67?s=128&d=identicon&r=PG&f=1", "display_name": "user3047917", "link": "https://stackoverflow.com/users/3047917/user3047917"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1474496702, "post_id": 39626913, "comment_id": 66560512, "body": "@Barmar Removing the entire class structure or removing object still does not fix either issues in the two snippets of code. I wanted self to refer to the entire class structure like I thought a lot of programs I&#39;ve seen do but I am still new to the language."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1474496827, "post_id": 39626913, "comment_id": 66560545, "body": "That&#39;s not how <code>self</code> works. It refers to a specific class instance. You do <code>d = DudeWheresMyCar()</code> and then <code>d.loop()</code>, and then <code>self</code> refers to <code>d</code>."}, {"owner": {"reputation": 63, "user_id": 3047917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5842fb6436953cabbe6dfc87525c9a67?s=128&d=identicon&r=PG&f=1", "display_name": "user3047917", "link": "https://stackoverflow.com/users/3047917/user3047917"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1474497005, "post_id": 39626913, "comment_id": 66560587, "body": "@Barmar I believe I just worded my reply incorrectly but yes I would like self to refer to DudeWheresMyCar().  I think we may be getting a bit off topic though as I don&#39;t think this is helping me towards a solution.  If I am taking the wrong approach then please help me take the right one using an example."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3047917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5842fb6436953cabbe6dfc87525c9a67?s=128&d=identicon&r=PG&f=1", "display_name": "user3047917", "link": "https://stackoverflow.com/users/3047917/user3047917"}, "edited": false, "score": 0, "creation_date": 1474553974, "post_id": 39628234, "comment_id": 66586628, "body": "thank you so much!  This not only worked beautifully but classes, definitions and how to reference them is starting to make a lot more sense."}], "tags": [], "owner": {"reputation": 7383, "user_id": 303931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9e4f07d0a64294640efc6a1a47e9963?s=128&d=identicon&r=PG", "display_name": "RecursivelyIronic", "link": "https://stackoverflow.com/users/303931/recursivelyironic"}, "is_accepted": true, "score": 1, "last_activity_date": 1474502494, "creation_date": 1474502494, "answer_id": 39628234, "question_id": 39626913, "link": "https://stackoverflow.com/questions/39626913/assigning-a-class-variable-and-then-reassigning-in-a-definition-without-using-gl/39628234#39628234", "title": "Assigning a class variable and then reassigning in a definition without using global in Python", "body": "<p>I think you want a <code>classmethod</code>, and you need to start the the task outside of the class definition. I would expect something like the following code to work</p>\n\n<pre><code>from twisted.internet import task, reactor\n\nclass DudeWheresMyCar(object):\n    counter = 20\n\n    stringInit = 'Initialized string'\n\n    @classmethod\n    def loop(cls):\n        stringNew = 'this will be updated with a changing string'\n        if (cls.stringInit == stringNew):\n            print(stringNew)\n        elif (cls.stringInit != stringNew ):\n            cls.stringInit = stringNew\n\n\ntask.LoopingCall(DudeWheresMyCar.loop).start(DudeWheresMyCar.counter)\nreactor.run()\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3047917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5842fb6436953cabbe6dfc87525c9a67?s=128&d=identicon&r=PG&f=1", "display_name": "user3047917", "link": "https://stackoverflow.com/users/3047917/user3047917"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 39628234, "answer_count": 1, "score": 0, "last_activity_date": 1474502494, "creation_date": 1474493584, "last_edit_date": 1474496788, "question_id": 39626913, "link": "https://stackoverflow.com/questions/39626913/assigning-a-class-variable-and-then-reassigning-in-a-definition-without-using-gl", "title": "Assigning a class variable and then reassigning in a definition without using global in Python", "body": "<p>So my question is in the title and the following two snippets of code are my attempts around this.  I am trying to assign a variable as soon as the script is started and then just run the loop definition at certain time intervals and update that same variable.  I do not want to use a global.</p>\n\n<pre><code>from twisted.internet import task, reactor\n\nclass DudeWheresMyCar(object):\n    counter = 20\n    stringInit = 'initialized string'\n\n    def loop():\n        stringNew = 'this will be updated with a changing string'\n        if (stringInit == stringNew):      #Error line\n            print(stringNew)\n        elif (stringInit != stringNew ):\n            stringInit = stringNew\n        pass\n\n    task.LoopingCall(loop).start(counter)\n    reactor.run()\n</code></pre>\n\n<p>This leads to an error undefined stringInit.  I know why I am getting this error so I made an attempt to fix this using the .self variable and the code is below.</p>\n\n<pre><code>from twisted.internet import task, reactor\n\nclass DudeWheresMyCar(object):\n    counter = 20\n\n    def __init__(self):\n        self.stringInit = 'Initialized string'\n\n    def loop(self):\n        stringNew = 'this will be updated with a changing string'\n        if (self.stringInit == stringNew):\n            print(stringNew)\n        elif (self.stringInit != stringNew ):\n            self.stringInit = stringNew\n        pass\n\n    task.LoopingCall(self.loop).start(counter)    #Error line\n    reactor.run()\n</code></pre>\n\n<p>I get an error that says that self is undefined.  I understand what is causing both scenario's to throw errors but I am not sure how to change my approach to accomplish my goal.  I also ran into using a singleton but that still does not fix the problem in scenario 2.</p>\n"}, {"tags": ["python", "class", "iterable"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1474494142, "post_id": 39626898, "comment_id": 66559535, "body": "That is a really bad idea. It would make your <code>__iter__</code> and <code>__getitem__</code> inconsistent with each other."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1474494365, "post_id": 39626898, "comment_id": 66559632, "body": "Also, it wouldn&#39;t actually make <code>search</code> any neater."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4812693, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-zMgi6T65ZTM/AAAAAAAAAAI/AAAAAAAAAaU/sazbmYZk81Y/photo.jpg?sz=128", "display_name": "Lord_Zane 55", "link": "https://stackoverflow.com/users/4812693/lord-zane-55"}, "edited": false, "score": 0, "creation_date": 1474493854, "post_id": 39626948, "comment_id": 66559404, "body": "Thanks! I actually tried this, but I just realized I had messed up how to import it"}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 63, "user_id": 4812693, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-zMgi6T65ZTM/AAAAAAAAAAI/AAAAAAAAAaU/sazbmYZk81Y/photo.jpg?sz=128", "display_name": "Lord_Zane 55", "link": "https://stackoverflow.com/users/4812693/lord-zane-55"}, "edited": false, "score": 0, "creation_date": 1474494047, "post_id": 39626948, "comment_id": 66559496, "body": "@Lord_Zane55 btw, a matrix is not necessarily a &quot;sequence of rows&quot;... <code>__getitem__</code> returning a row is rather funny. It&#39;s not very intuitive."}, {"owner": {"reputation": 63, "user_id": 4812693, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-zMgi6T65ZTM/AAAAAAAAAAI/AAAAAAAAAaU/sazbmYZk81Y/photo.jpg?sz=128", "display_name": "Lord_Zane 55", "link": "https://stackoverflow.com/users/4812693/lord-zane-55"}, "edited": false, "score": 0, "creation_date": 1474494220, "post_id": 39626948, "comment_id": 66559575, "body": "I found that snippet online for iterating, could you explain how a matrix is not a &quot;sequence of rows&quot; and what <code>__getitem__</code> should be doing for future use?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1474494264, "post_id": 39626948, "comment_id": 66559595, "body": "@Bharel: <code>__getitem__</code> returning a row is perfectly ordinary. How else would you make <code>some_matrix[2][3]</code> work?"}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 0, "creation_date": 1474494596, "post_id": 39626948, "comment_id": 66559747, "body": "I mean, matrix is not a sequence at all. What&#39;s a matrix&#39;s length? The count of rows? Don&#39;t you find it funny that a matrix of 1 row and 9001 columns has a <b>length</b> of 1? It has width and height, not length... True, <code>__getitem__</code> is needed. The inheritance of <code>Sequence</code> is what makes me curious. You might argue that a length is therefore <code>width * height</code>, but then <code>__getitem__</code> is rather meaningless combined with the length. Trying to get the 9001st item (after all, that&#39;s the length) will fail."}], "tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": true, "score": 0, "last_activity_date": 1474493941, "last_edit_date": 1474493941, "creation_date": 1474493738, "answer_id": 39626948, "question_id": 39626898, "link": "https://stackoverflow.com/questions/39626898/python-iterating-over-matrix-class/39626948#39626948", "title": "Python iterating over matrix class", "body": "<p>You may implement <code>__iter__()</code> like so:</p>\n\n<pre><code>from itertools import chain\n\ndef __iter__(self):\n    return chain.from_iterable(self.matrix)\n</code></pre>\n\n<p><code>itertools.chain.from_iterable()</code> takes an iterable of iterables and combines them all together. It creates a generator thus does not use extra memory.</p>\n"}], "owner": {"reputation": 63, "user_id": 4812693, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-zMgi6T65ZTM/AAAAAAAAAAI/AAAAAAAAAaU/sazbmYZk81Y/photo.jpg?sz=128", "display_name": "Lord_Zane 55", "link": "https://stackoverflow.com/users/4812693/lord-zane-55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 39626948, "answer_count": 1, "score": 0, "last_activity_date": 1474493941, "creation_date": 1474493493, "question_id": 39626898, "link": "https://stackoverflow.com/questions/39626898/python-iterating-over-matrix-class", "title": "Python iterating over matrix class", "body": "<pre><code>from collections.abc import Sequence\n\nclass Map(Sequence):\n    \"\"\" Represents a map for a floor as a matrix \"\"\"\n\n    def __init__(self, matrix):\n        \"\"\" Takes a map as a matrix \"\"\"\n        self.matrix = matrix\n        self.height = len(matrix)\n        self.width = len(matrix[0])\n        super().__init__()\n\n    def __getitem__(self, item):\n        \"\"\" Needed by Sequence \"\"\"\n        return self.matrix[item]\n\n    def __len__(self):\n        \"\"\" Needed by Sequence \"\"\"\n        return len(self.matrix)\n\n    def search(self, entity):\n        \"\"\" Returns a generator of tuples that contain the x and y for every element in the map that matches 'entity' \"\"\"\n        for row in range(self.height):\n            for column in range(self.width):\n                if matrix[row][column] == entity:\n                    yield (row, column)\n\n\n# Examples\n\ngmap = Map([[0, 0, 0],\n           [0, 1, 0],\n           [0, 0, 0]])\n\nfor entity in gmap:\n    print(entity)\n</code></pre>\n\n<p>How can I implement<code>__iter__</code> so that </p>\n\n<pre><code>for entity in gmap:\n    print(entity)\n</code></pre>\n\n<p>yields <code>0 0 0 0 1 0 0 0 0</code> and not </p>\n\n<pre><code>[0, 0, 0]\n[0, 1, 0]\n[0, 0, 0]\n</code></pre>\n\n<p>This would save me from needing to subclass <code>Sequence</code> and would make the code for <code>search()</code> neater</p>\n\n<p>Additionally, are their any other magic methods I should be using? (aside from <code>__str__</code>, im doing that after I get iterating working)</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-dynamodb", "boto3"], "answers": [{"comments": [{"owner": {"reputation": 2799, "user_id": 73750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3XKq5.jpg?s=128&g=1", "display_name": "tayfun", "link": "https://stackoverflow.com/users/73750/tayfun"}, "edited": false, "score": 1, "creation_date": 1474536242, "post_id": 39633493, "comment_id": 66574449, "body": "Thanks, that worked! But why do the Boto3 document give the following example? <code>{ &quot;:avail&quot;:{&quot;S&quot;:&quot;Available&quot;}, &quot;:back&quot;:{&quot;S&quot;:&quot;Backordered&quot;}, &quot;:disc&quot;:{&quot;S&quot;:&quot;Discontinued&quot;} }</code> See <a href=\"http://boto3.readthedocs.io/en/latest/reference/services/dynamodb.html#DynamoDB.Client.query\" rel=\"nofollow noreferrer\">boto3.readthedocs.io/en/latest/reference/services/&hellip;</a>"}, {"owner": {"reputation": 3164, "user_id": 77533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2dbLy.jpg?s=128&g=1", "display_name": "nedned", "link": "https://stackoverflow.com/users/77533/nedned"}, "edited": false, "score": 1, "creation_date": 1503534597, "post_id": 39633493, "comment_id": 78660511, "body": "I agree, the docs are misleading. They make it seem like the values of the dictionary you provide for ExpressionAttributeValues, should themselves be dictionaries with keys such as &#39;S&#39;, &#39;B&#39;, and &#39;N&#39;, whereas I think it&#39;s just trying to indicate that those are the possible types of the values."}, {"owner": {"reputation": 3164, "user_id": 77533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2dbLy.jpg?s=128&g=1", "display_name": "nedned", "link": "https://stackoverflow.com/users/77533/nedned"}, "edited": false, "score": 0, "creation_date": 1503541502, "post_id": 39633493, "comment_id": 78662044, "body": "On second thoughts, it just seems incorrect. Perhaps from a previous version of the boto3 API."}], "tags": [], "owner": {"reputation": 29341, "user_id": 6337748, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/7Si7m.jpg?s=128&g=1", "display_name": "notionquest", "link": "https://stackoverflow.com/users/6337748/notionquest"}, "is_accepted": true, "score": 4, "last_activity_date": 1474531361, "creation_date": 1474531361, "answer_id": 39633493, "question_id": 39626894, "link": "https://stackoverflow.com/questions/39626894/boto3-query-using-keyconditionexpression/39633493#39633493", "title": "boto3 query using KeyConditionExpression", "body": "<p>Please change the ExpressionAttributeValues as mentioned below. </p>\n\n<pre><code>ExpressionAttributeValues={':cihan': 'cihan'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 312, "user_id": 6248616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-26kuT5jIg-o/AAAAAAAAAAI/AAAAAAAAAB4/w_XzUWfmAEI/photo.jpg?sz=128", "display_name": "Ishan Ojha", "link": "https://stackoverflow.com/users/6248616/ishan-ojha"}, "is_accepted": false, "score": 2, "last_activity_date": 1556115829, "creation_date": 1556115829, "answer_id": 55832413, "question_id": 39626894, "link": "https://stackoverflow.com/questions/39626894/boto3-query-using-keyconditionexpression/55832413#55832413", "title": "boto3 query using KeyConditionExpression", "body": "<p>In current versions of boto3 (1.9.128) the query mentioned in the question asked works fine, and nothing else apart from that is working now, the query mentioned below worked for me:- </p>\n\n<p><code>dynamo_client.query(\n    KeyConditionExpression='campaign_id = :201906',\n    ExpressionAttributeValues={':201906': {'S': '201906'}}\n)</code></p>\n"}, {"tags": [], "owner": {"reputation": 1757, "user_id": 7547940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9hMH.jpg?s=128&g=1", "display_name": "rayepps", "link": "https://stackoverflow.com/users/7547940/rayepps"}, "is_accepted": false, "score": 0, "last_activity_date": 1580932877, "creation_date": 1580932877, "answer_id": 60083263, "question_id": 39626894, "link": "https://stackoverflow.com/questions/39626894/boto3-query-using-keyconditionexpression/60083263#60083263", "title": "boto3 query using KeyConditionExpression", "body": "<h2>The bonus question...</h2>\n\n<p>To answer your bonus question, all the tokens are a layer of abstraction dynamo uses to ensure type consistency across the http requests made when its communicated with. Using standard http/json there is room for ambiguity in cases like \"2\" and 2. So, dynamo forces the client to wrap values in objects that specifically define their type.</p>\n\n<h2>Back to the original question...</h2>\n\n<p>With that said... its kind of ridiculous the boto3 API doesn't abstract that away for you. Although I can understand its a little out of the scope of the boto3 tool. <strong>There is hope</strong> in a library called <a href=\"https://github.com/rayepps/dynamof\" rel=\"nofollow noreferrer\">dynamof</a>. Using it your query would look like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from boto3 import client\nfrom dynamof import db as make_db\nfrom dynamof import query\n\nclient = client('dynamodb', endpoint_url='http://localstack:4569')\ndb = make_db(client)\n\nresults = db(query(\n    table_name='dict_table',\n    conditions=attr('norm').equals('cihan')\n))\n</code></pre>\n\n<p>You get the same simple API for making dynamo requests in other commonly used operations like creating a table, adding an item, updating, deleting, and scanning. More operations and features are in dev now.</p>\n\n<p><em>disclaimer: I wrote dynamof</em></p>\n"}], "owner": {"reputation": 2799, "user_id": 73750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3XKq5.jpg?s=128&g=1", "display_name": "tayfun", "link": "https://stackoverflow.com/users/73750/tayfun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10932, "favorite_count": 0, "accepted_answer_id": 39633493, "answer_count": 3, "score": 6, "last_activity_date": 1580932877, "creation_date": 1474493478, "question_id": 39626894, "link": "https://stackoverflow.com/questions/39626894/boto3-query-using-keyconditionexpression", "title": "boto3 query using KeyConditionExpression", "body": "<p>I'm having trouble understanding why below query on a DynamoDB table doesn't work:</p>\n\n<pre><code>dict_table.query(KeyConditionExpression='norm = :cihan', ExpressionAttributeValues={':cihan': {'S': 'cihan'}})\n</code></pre>\n\n<p>and throws this error: </p>\n\n<p><code>ClientError: An error occurred (ValidationException) when calling the Query operation: One or more parameter values were invalid: Condition parameter type does not match schema type</code></p>\n\n<p>while the following works:</p>\n\n<pre><code>dict_table.query(KeyConditionExpression=Key('norm').eq('cihan'))\n</code></pre>\n\n<p><code>norm</code> is a field with type string. I'm using boto3 v 1.4.0 and <a href=\"http://boto3.readthedocs.io/en/latest/reference/services/dynamodb.html#DynamoDB.Client.query\" rel=\"noreferrer\">following the docs</a>:</p>\n\n<pre><code>In [43]: boto3.__version__\nOut[43]: '1.4.0'\n</code></pre>\n\n<p>Can anyone see what's the error in the first query?</p>\n\n<p>Bonus question: What's with all the tokens and the need to replace them all the time? Why can't I just say <code>dict_table.query(KeyConditionExpression='norm = cihan')</code></p>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "edited": false, "score": 0, "creation_date": 1474496669, "post_id": 39626870, "comment_id": 66560500, "body": "You have another pipeline, &#39;scrapers.whoscored.whoscored.pipelines.EnricherPipeline&#39;: 300. What does this pipeline return?"}, {"owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "reply_to_user": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "edited": false, "score": 0, "creation_date": 1474512223, "post_id": 39626870, "comment_id": 66564024, "body": "Strangely, Scrapy never enters that pipeline. I put a debugger on the first line of process_item and it never enteres. It is supposed to return a dict."}, {"owner": {"reputation": 13041, "user_id": 466611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4acb374856006427ab9b84ff57c37371?s=128&d=identicon&r=PG", "display_name": "starrify", "link": "https://stackoverflow.com/users/466611/starrify"}, "edited": false, "score": 0, "creation_date": 1474512316, "post_id": 39626870, "comment_id": 66564055, "body": "<i>Strangely, Scrapy never enters that pipeline.</i> Is the code you posted from a single file (e.g. <code>pipelines.py</code>) or different files? <code>ITEM_PIPELINES</code> is expected to be set in the <code>settings.py</code> file."}, {"owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "edited": false, "score": 0, "creation_date": 1474512422, "post_id": 39626870, "comment_id": 66564090, "body": "Yes, ITEM_PIPELINES it&#39;s in the settings.py file. JsonPipeline is in pipelines.py and MatchSpider is a scraper."}, {"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1474536678, "post_id": 39626870, "comment_id": 66574738, "body": "Could you provide a run log? When you run scrapy spider, before it starts it outputs some info logs. Check whether your pipeline is in the lines below <code>[scrapy] INFO: Enabled item pipelines:</code>."}, {"owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "edited": false, "score": 0, "creation_date": 1474549809, "post_id": 39626870, "comment_id": 66583632, "body": "Yes, there are both there: 2016-09-22 10:09:47 [scrapy] INFO: Enabled item pipelines: [&#39;scrapers.whoscored.whoscored.pipelines.EnricherPipeline&#39;,  &#39;scrapers.whoscored.whoscored.pipelines.JsonPipeline&#39;]"}], "answers": [{"comments": [{"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 1, "creation_date": 1474553049, "post_id": 39640297, "comment_id": 66585940, "body": "If your spider never yields any results then pipeline&#39;s <code>process_item()</code> is never called, thus debugger&#39;s break point never reached."}, {"owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "reply_to_user": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1474554813, "post_id": 39640297, "comment_id": 66587244, "body": "My spider does yield results."}, {"owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "edited": false, "score": 0, "creation_date": 1474558477, "post_id": 39640297, "comment_id": 66589841, "body": "There are some ways to tell whether the first pipeline is called. (a). through scrapy logs, to check whether your pipeline is enabled. (b) In your process_item() function, do some print or logging, then check whether this function is called."}], "tags": [], "owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "is_accepted": false, "score": 0, "last_activity_date": 1474550583, "creation_date": 1474550583, "answer_id": 39640297, "question_id": 39626870, "link": "https://stackoverflow.com/questions/39626870/scrapy-pipeline-not-starting/39640297#39640297", "title": "Scrapy Pipeline not starting", "body": "<p>Ok, so the problem was that EnricherPipeline was yielding and not returning a result. After that it worked as expected, although I still don't understand why a debugger is not working in that first pipeline.</p>\n"}, {"comments": [{"owner": {"reputation": 328, "user_id": 4656967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303fafeb036f7277f70daafbe86080af?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky Chen", "link": "https://stackoverflow.com/users/4656967/rocky-chen"}, "edited": false, "score": 0, "creation_date": 1562823875, "post_id": 56966427, "comment_id": 100499939, "body": "No, i try to yield with dict and it can go into pipeline!"}, {"owner": {"reputation": 3524, "user_id": 2206464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/318ef5f6e60163d60bc7291c42a37dc6?s=128&d=identicon&r=PG", "display_name": "Jadian", "link": "https://stackoverflow.com/users/2206464/jadian"}, "reply_to_user": {"reputation": 328, "user_id": 4656967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303fafeb036f7277f70daafbe86080af?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky Chen", "link": "https://stackoverflow.com/users/4656967/rocky-chen"}, "edited": false, "score": 0, "creation_date": 1571971249, "post_id": 56966427, "comment_id": 103423555, "body": "@RockyChen It should be worked. Maybe there has other issue in your project."}], "tags": [], "owner": {"reputation": 3524, "user_id": 2206464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/318ef5f6e60163d60bc7291c42a37dc6?s=128&d=identicon&r=PG", "display_name": "Jadian", "link": "https://stackoverflow.com/users/2206464/jadian"}, "is_accepted": false, "score": -1, "last_activity_date": 1562747042, "creation_date": 1562747042, "answer_id": 56966427, "question_id": 39626870, "link": "https://stackoverflow.com/questions/39626870/scrapy-pipeline-not-starting/56966427#56966427", "title": "Scrapy Pipeline not starting", "body": "<p><strong>The true reason is:</strong></p>\n\n<p>Can't not yield any type not <code>base on dict</code>, the scrapy engine will not call pipeline.</p>\n\n<p>Odds, I spend three days to found this...</p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 4656967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303fafeb036f7277f70daafbe86080af?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky Chen", "link": "https://stackoverflow.com/users/4656967/rocky-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1562824098, "creation_date": 1562824098, "answer_id": 56982352, "question_id": 39626870, "link": "https://stackoverflow.com/questions/39626870/scrapy-pipeline-not-starting/56982352#56982352", "title": "Scrapy Pipeline not starting", "body": "<p>I write scrapy code like @FranGoitia, using return item in dict type, and it can go to pipeline well. </p>\n"}], "owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2390, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1562824098, "creation_date": 1474493387, "last_edit_date": 1474550308, "question_id": 39626870, "link": "https://stackoverflow.com/questions/39626870/scrapy-pipeline-not-starting", "title": "Scrapy Pipeline not starting", "body": "<p>I'm having problems with Scrapy pipelines.\nEnricherPipeline is never starting. I put a debugger in the fist line of process_item and it never gets control.\nJsonPipeline does start, but the first argument it receives is of type <code>generator object process_item</code> and not the MatchItem instance it should receive (when I disable the EnricherPipeline, JsonPipeline works as expected.</p>\n\n<pre><code>class MatchSpider(CrawlSpider):\n\n    def parse(self, response):\n        browser = Browser(browser='Chrome')\n        browser.get(response.url)\n        browser.find_element_by_xpath('//a[contains(text(), \"{l}\") and @title=\"{c}\"]'.format(l=self.league, c=self.country)).click()\n        browser.find_element_by_xpath('//select[@id=\"seasons\"]/option[text()=\"{s}\"]'.format(s=self.season.replace('-', '/'))).click()\n        browser.find_element_by_xpath('//a[contains(text(), \"Fixture\")]').click()\n        page_matches = browser.find_elements_by_xpath('//*[contains(@class, \"result-1 rc\")]')\n        matches.extend([m.get_attribute('href') for m in page_matches]\n        for m in matches[:1]:\n            yield Request(m, callback=self.process_match, dont_filter=True)\n\n    def process_match(self, response):\n        match_item = MatchItem()\n        match_item['url'] = response.url\n        match_item['project'] = self.settings.get('BOT_NAME')\n        match_item['spider'] = self.name\n        match_item['server'] = socket.gethostname()\n        match_item['date'] = datetime.datetime.now()\n        return match_item\n\nclass EnricherPipeline:\n    def process_item(self, item, spider):\n        self.match = defaultdict(dict)\n        self.match['date'] = item['match']['startTime']\n        self.match['referee'] = item['match']['refereeName']\n        self.match['stadium'] = item['match']['venueName']\n        self.match['exp_mins'] = item['match']['expandedMinutes']\n        yield self.match\n\n\nclass JsonPipeline:\n\n    def process_item(self, item, scraper):\n        output_dir = 'data/matches/{league}/{season}'.format(league=scraper.league, season=scraper.season)\n        if not os.path.exists(output_dir):\n            os.makedirs(output_dir)\n        file_name = \"-\".join([str(datetime.strptime(item['date'], '%Y-%m-%dT%H:%M:%S').date()),\n                              item['home']['name'], item['away']['name']]) + '.json'\n        item_path = os.sep.join((output_dir, file_name))\n        with open(item_path, 'w') as f:\n            f.write(json.dumps(item))\n\n\n\nITEM_PIPELINES = {\n    'scrapers.whoscored.whoscored.pipelines.EnricherPipeline': 300,\n    'scrapers.whoscored.whoscored.pipelines.JsonPipeline': 800,\n}\n</code></pre>\n"}, {"tags": ["python", "if-statement", "syntax"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1474493738, "post_id": 39626857, "comment_id": 66559348, "body": "If you don&#39;t have the <code>else</code>, then the interpreter has to check whether <code>x == 2</code>, even if it already ran the <code>x == 1</code> branch. Behavior may be the same, but you&#39;re making the interpreter do more work. (And it may <i>not</i> be the same -- if there were another thread, or if <code>value</code> were a property with a setter that changed <code>x</code> when <code>one</code> was assigned, then it would actually <i>need</i> to do that work)."}], "answers": [{"comments": [{"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 0, "creation_date": 1474494398, "post_id": 39626893, "comment_id": 66559653, "body": "It&#39;s never a must mate. You can just use <code>if 1 &gt;= x &gt; 0:</code> and <code>if x &gt; 1:</code>"}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 0, "creation_date": 1474494667, "post_id": 39626893, "comment_id": 66559785, "body": "Being not superfluous means it&#39;s necessary AFAIK."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 2, "last_activity_date": 1474493473, "creation_date": 1474493473, "answer_id": 39626893, "question_id": 39626857, "link": "https://stackoverflow.com/questions/39626857/else-essentially-superfluous/39626893#39626893", "title": "else essentially superfluous", "body": "<p>If the conditions are mutually exclusive then <code>else</code> is superfluous. It's not if the conditions overlap, though.</p>\n\n<pre><code>x = 2\nif x &gt; 0:\n    print 'foo'\nelse:                   # better -- elif x &gt; 1:\n    if x &gt; 1:\n        print 'bar'\n</code></pre>\n\n<p>This program prints <code>foo</code>.</p>\n\n<pre><code>x = 2\nif x &gt; 0:\n    print 'foo'\nif x &gt; 1:\n    print 'bar'\n</code></pre>\n\n<p>This program prints <code>foo</code> <code>bar</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2353, "user_id": 3524881, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/N5jfY.jpg?s=128&g=1", "display_name": "oaklander114", "link": "https://stackoverflow.com/users/3524881/oaklander114"}, "edited": false, "score": 0, "creation_date": 1474493887, "post_id": 39626896, "comment_id": 66559420, "body": "In the first example, though, the else is not essential it seems."}, {"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "reply_to_user": {"reputation": 2353, "user_id": 3524881, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/N5jfY.jpg?s=128&g=1", "display_name": "oaklander114", "link": "https://stackoverflow.com/users/3524881/oaklander114"}, "edited": false, "score": 0, "creation_date": 1474494327, "post_id": 39626896, "comment_id": 66559617, "body": "Else is never a must. It is just convenient."}], "tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": false, "score": 0, "last_activity_date": 1474494284, "last_edit_date": 1474494284, "creation_date": 1474493486, "answer_id": 39626896, "question_id": 39626857, "link": "https://stackoverflow.com/questions/39626857/else-essentially-superfluous/39626896#39626896", "title": "else essentially superfluous", "body": "<p>Else is never a must but is rather a convenience. Here are some:</p>\n\n<pre><code>if x == 1: \n    value = \"one\"\nelse:\n    value = \"not_one\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if x &lt; 1: \n    value = \"less_than_one\"\nelif x &lt; 2:\n    value = \"between_one_and_two\"\nelse:\n    value = \"more_than_two\"\n</code></pre>\n\n<hr>\n\n<p>They can both be rewritten as:</p>\n\n<pre><code>if x == 1: \n    value = \"one\"\nif x != 1:\n    value = \"not_one\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if x &lt; 1: \n    value = \"less_than_one\"\nif 1 &lt;= x &lt; 2:\n    value = \"between_one_and_two\"\nif 2 &lt;= x:\n    value = \"more_than_two\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1474495355, "last_edit_date": 1474495355, "creation_date": 1474494671, "answer_id": 39627132, "question_id": 39626857, "link": "https://stackoverflow.com/questions/39626857/else-essentially-superfluous/39627132#39627132", "title": "else essentially superfluous", "body": "<p>The <code>else</code> clause is useful if you are looking for a specific case (using <code>if</code>) and then everything else that is not covered by the <code>if</code> (using <code>else</code>). </p>\n\n<p>Often a <a href=\"https://docs.python.org/2.5/whatsnew/pep-308.html\" rel=\"nofollow\">conditional expression</a> is used:</p>\n\n<pre><code>&gt;&gt;&gt; x=3\n&gt;&gt;&gt; value='one' if x==1 else 'not one'\n&gt;&gt;&gt; value\n'not one'\n</code></pre>\n\n<p>If you did not use an <code>else</code> here (either as part of the conditional or as part of an <code>if/else</code> then <code>value</code> would not de defined:</p>\n\n<pre><code>&gt;&gt;&gt; del value   # remove the name `value`\n&gt;&gt;&gt; x\n3\n&gt;&gt;&gt; if x==1: value='one'\n... \n&gt;&gt;&gt; value\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name 'value' is not defined\n</code></pre>\n\n<p>So you do need the <code>else</code> class to make sure that <code>value</code> received a assignment if x is not 1.</p>\n\n<hr>\n\n<p>BTW, In Python, rather than long cascade of <code>if/elif/elif/else</code> you can use a dictionary with a default:</p>\n\n<pre><code>&gt;&gt;&gt; conditions={1:'one', 2:'two', 3:'three'}\n&gt;&gt;&gt; conditions.get(2,'not one, two, or three...')\n'two'\n&gt;&gt;&gt; conditions.get(19,'not one, two, or three...')\n'not one, two, or three...'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1376, "user_id": 2616735, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003840053093/picture?type=large", "display_name": "Curtis Fenner", "link": "https://stackoverflow.com/users/2616735/curtis-fenner"}, "is_accepted": false, "score": 1, "last_activity_date": 1474496177, "creation_date": 1474496177, "answer_id": 39627407, "question_id": 39626857, "link": "https://stackoverflow.com/questions/39626857/else-essentially-superfluous/39627407#39627407", "title": "else essentially superfluous", "body": "<p><code>else</code> <em>remembers</em> that the condition was <code>False</code>. For example, consider this code:</p>\n\n<pre><code>if x == 1:\n    x = 2\n    print(\"bar\")\nelse:\n   if x == 2:\n       print(\"foo\")\n</code></pre>\n\n<p><em>With</em> the <code>else</code>, only one of \"bar\" or \"foo\" will be printed.</p>\n\n<p><em>Without</em> the <code>else</code>, both \"bar\" and \"foo\" can be printed since the value of <code>x</code> can change.</p>\n\n<p>This also can help with 'overlapping' conditions:</p>\n\n<pre><code>if x &gt; 10: \n    print(\"big\")\nelif x &gt; 5: \n    print(\"medium\")\nelif x &gt; 1:\n    print(\"sizable\")\nelse:\n    print(\"small\")\n</code></pre>\n"}], "owner": {"reputation": 2353, "user_id": 3524881, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/N5jfY.jpg?s=128&g=1", "display_name": "oaklander114", "link": "https://stackoverflow.com/users/3524881/oaklander114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 39626893, "answer_count": 4, "score": 0, "last_activity_date": 1474496177, "creation_date": 1474493320, "question_id": 39626857, "link": "https://stackoverflow.com/questions/39626857/else-essentially-superfluous", "title": "else essentially superfluous", "body": "<p>I don't have a background in programming, so this is probably really dumb, but I've never considered this before: it seems that the <code>else</code> statement is essentially superfluous because when the condition is False, Python just moves to the next unindented line .</p>\n\n<p>For example, normally you would write: (if not using <code>elif</code>)</p>\n\n<pre><code>x=2\nif x == 1: \n    value = \"one\"\nelse:\n    if x == 2:\n        value = \"two\"\nprint value\n</code></pre>\n\n<p>But this works too:</p>\n\n<pre><code>x=2\nif x == 1: \n    value = \"one\"\nif x == 2:\n    value = \"two\"\nprint value\n</code></pre>\n\n<p>Could someone give an example that shows how and when the <code>else:</code> statement is essential?</p>\n"}, {"tags": ["python", "list", "loops", "ssh"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 1, "creation_date": 1474493183, "post_id": 39626819, "comment_id": 66559090, "body": "Please show some code"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 2, "creation_date": 1474493237, "post_id": 39626819, "comment_id": 66559109, "body": "It doesnt sound too difficult.  Feel free to share us some code."}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1474493486, "post_id": 39626819, "comment_id": 66559243, "body": "We are in the fog. Can you explain what you tried? If I answer by <a href=\"http://www.fabfile.org\" rel=\"nofollow noreferrer\">Fabric</a>, do you understand anything?"}, {"owner": {"reputation": 959, "user_id": 1967498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bf70cf8170cb5c30ab25bd650af289?s=128&d=identicon&r=PG", "display_name": "sharez", "link": "https://stackoverflow.com/users/1967498/sharez"}, "edited": false, "score": 0, "creation_date": 1474499617, "post_id": 39626819, "comment_id": 66561261, "body": "Use <a href=\"http://paramiko.org\" rel=\"nofollow noreferrer\">Paramiko</a> for SSH connections. Create a queue of server configuration and use threads to connect to servers concurrently. Get result from servers, put them on a list and process them later."}], "answers": [{"tags": [], "owner": {"reputation": 1029, "user_id": 4220177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff21ac99100f2bdd7e3003f3008e5e83?s=128&d=identicon&r=PG&f=1", "display_name": "Ilhicas", "link": "https://stackoverflow.com/users/4220177/ilhicas"}, "is_accepted": false, "score": 1, "last_activity_date": 1474499687, "creation_date": 1474499687, "answer_id": 39627891, "question_id": 39626819, "link": "https://stackoverflow.com/questions/39626819/python-ssh-and-comparing-output-to-an-imported-list/39627891#39627891", "title": "Python SSH and comparing output to an imported list", "body": "<p>The answer to your question if I understood correctly lies in Operative Systems principles,</p>\n\n<p>You iterate the SSH connection list, and by using Popen you are able to SSH via Shell.</p>\n\n<p>After that you need to keep a second process open as well a Pipe for the 2 processes to communicate(the one that opened the ssh via shell, this one is blocked in IO) and use the second process to make verification etc and send new commands via PIPE created by the first process. PIPE.STDIN</p>\n\n<p>In short, check Popen Python Module.</p>\n\n<p><a href=\"https://docs.python.org/2/library/subprocess.html\" rel=\"nofollow\">https://docs.python.org/2/library/subprocess.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6860841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c13ef7d10ca9f9825f9f4fba8d88bc64?s=128&d=identicon&r=PG&f=1", "display_name": "bradical", "link": "https://stackoverflow.com/users/6860841/bradical"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1474499687, "creation_date": 1474493145, "question_id": 39626819, "link": "https://stackoverflow.com/questions/39626819/python-ssh-and-comparing-output-to-an-imported-list", "title": "Python SSH and comparing output to an imported list", "body": "<p>I am looking to ssh to multiple servers 1 at a time , compare the output of an ssh command to a list, and then run a command on the items in that appear in both the output and a separate list.</p>\n\n<p>I'd like to ssh to each server in a loop \"ssh  \" but I'm unsure how to import the next server from the list into the middle of the ssh command.</p>\n\n<p>The other issue I'm having is obtaining the results of a command run which I could then compare.</p>\n\n<p>Any guidance or direction to a helpful post would be fantastic.<br>\nThank you!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2965601"}, "edited": false, "score": 0, "creation_date": 1474493779, "post_id": 39626851, "comment_id": 66559366, "body": "But I read it chunk by chunk and according to the docs I get a TextFileReader Object and not a data frame"}, {"owner": {"reputation": 786, "user_id": 2100534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9af4ba4e8071a69dcc107b9a68cdfb6?s=128&d=identicon&r=PG", "display_name": "Kyrubas", "link": "https://stackoverflow.com/users/2100534/kyrubas"}, "edited": false, "score": 0, "creation_date": 1474494629, "post_id": 39626851, "comment_id": 66559761, "body": "Updated it for considering chunk size. The TextFileReader object is a generator, so you need to iterate through it. You can make a bunch of smaller dataframes with a a list comprehension then concatenate them together."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2965601"}, "edited": false, "score": 0, "creation_date": 1474495457, "post_id": 39626851, "comment_id": 66560088, "body": "What do you mean by generator?"}, {"owner": {"reputation": 786, "user_id": 2100534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9af4ba4e8071a69dcc107b9a68cdfb6?s=128&d=identicon&r=PG", "display_name": "Kyrubas", "link": "https://stackoverflow.com/users/2100534/kyrubas"}, "edited": false, "score": 0, "creation_date": 1474495664, "post_id": 39626851, "comment_id": 66560165, "body": "The data is produced on demand so that it takes up only the memory for each chunk when that chunk is called upon: <a href=\"http://www.python-course.eu/generators.php\" rel=\"nofollow noreferrer\">python-course.eu/generators.php</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2965601"}, "edited": false, "score": 0, "creation_date": 1474496455, "post_id": 39626851, "comment_id": 66560432, "body": "Something else just came up. If I use chunk[&quot;C&quot;] == 1 in combination with an if like if chunk[&quot;C&quot;] == 1  I get ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().  Do you know how to overcome this?"}, {"owner": {"reputation": 786, "user_id": 2100534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9af4ba4e8071a69dcc107b9a68cdfb6?s=128&d=identicon&r=PG", "display_name": "Kyrubas", "link": "https://stackoverflow.com/users/2100534/kyrubas"}, "edited": false, "score": 0, "creation_date": 1474499379, "post_id": 39626851, "comment_id": 66561213, "body": "To do that you&#39;re going to need to use <code>map</code> in combination with <code>lambda</code>. <code>chunk[&quot;C&quot;] == 1</code> already returns <code>True</code> or <code>False</code> for each element in the series. This series of <code>True</code> or <code>False</code> gets applied back to <code>chunk</code> such that you&#39;re left only with the <code>True</code> rows. Ex <code>chunk[&quot;C&quot;] == 1</code> applied to your original data frame would return `[True, False, True]&#39; which in turn when used against the dataframe itself gives just row IDs 0 and 2"}, {"owner": {"reputation": 786, "user_id": 2100534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9af4ba4e8071a69dcc107b9a68cdfb6?s=128&d=identicon&r=PG", "display_name": "Kyrubas", "link": "https://stackoverflow.com/users/2100534/kyrubas"}, "edited": false, "score": 0, "creation_date": 1474500996, "post_id": 39626851, "comment_id": 66561566, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/123902/discussion-between-kyrubas-and-tumbler\">continue this discussion in chat</a>."}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1474520117, "post_id": 39626851, "comment_id": 66565935, "body": "This won&#39;t work, because there is too much to store in memory, correct? Did it work?"}], "tags": [], "owner": {"reputation": 786, "user_id": 2100534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9af4ba4e8071a69dcc107b9a68cdfb6?s=128&d=identicon&r=PG", "display_name": "Kyrubas", "link": "https://stackoverflow.com/users/2100534/kyrubas"}, "is_accepted": false, "score": 1, "last_activity_date": 1474494356, "last_edit_date": 1495541781, "creation_date": 1474493304, "answer_id": 39626851, "question_id": 39626818, "link": "https://stackoverflow.com/questions/39626818/python-pandas-write-certain-rows-in-file/39626851#39626851", "title": "Python Pandas: Write certain rows in file", "body": "<p>From <a href=\"https://stackoverflow.com/questions/19674212/pandas-data-frame-select-rows-and-clear-memory\">this</a> post:</p>\n\n<blockquote>\n<pre><code>reader = pd.read_csv('big_table.txt', sep='\\t', header=0, \n                     index_col=0, usecols=the_columns_i_want_to_use, \n                     chunksize=10000)\n\ndf = pd.concat([ chunk.ix[rows_that_I_want_] for chunk in reader ])\n</code></pre>\n</blockquote>\n\n<p>But instead make 2 data frames:</p>\n\n<pre><code>df0 = pd.concat([ chunk[chunk[\"C\"] == 0] for chunk in reader ])\ndf1 = pd.concat([ chunk[chunk[\"C\"] == 1] for chunk in reader ])\n</code></pre>\n\n<p>Then save each data frame independently</p>\n"}, {"tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": false, "score": 0, "last_activity_date": 1474520399, "creation_date": 1474520399, "answer_id": 39630613, "question_id": 39626818, "link": "https://stackoverflow.com/questions/39626818/python-pandas-write-certain-rows-in-file/39630613#39630613", "title": "Python Pandas: Write certain rows in file", "body": "<p>I would simply do it like this:</p>\n\n<pre><code>first = True\ndf = pd.read_csv('file.csv', chunksize=1e5)\nfor chunk in df:\n    if first:\n        chunk[chunk['C'] == 1].to_csv('ones.csv', header=True)\n        chunk[chunk['C'] == 0].to_csv('zero.csv', header=True)\n        first = False\n    chunk[chunk['C'] == 1].to_csv('ones.csv', header=False)\n    chunk[chunk['C'] == 0].to_csv('zero.csv', header=False)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2965601"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1474520399, "creation_date": 1474493142, "question_id": 39626818, "link": "https://stackoverflow.com/questions/39626818/python-pandas-write-certain-rows-in-file", "title": "Python Pandas: Write certain rows in file", "body": "<p>The csv file is way to big, so I am reading it chunk by chunk.\nTherefore, I use read_csv with chunksize.</p>\n\n<p>I want to store all rows, where the last entry has the value 1 in one file and all the other rows where the last entry is 0 in another file.</p>\n\n<p>Suppose it looks like this:</p>\n\n<pre><code>ID   A    B   C\n0   0.0  0.1  1\n1   0.1  0.2  0\n2   0.1  0.0  1\n</code></pre>\n\n<p>So, I want to store row with ID 0 and 2 in one file and the row with ID 1 in another file.</p>\n\n<p>How do I do that with pandas?</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1474567669, "post_id": 39626806, "comment_id": 66595331, "body": "Provide the image as well. It&#39;s difficult for anyone to answer Image related question without having the image."}, {"owner": {"reputation": 11, "user_id": 6860846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ffc526b3dcc05de2d709deb86bbffb?s=128&d=identicon&r=PG&f=1", "display_name": "Clash", "link": "https://stackoverflow.com/users/6860846/clash"}, "reply_to_user": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1474569915, "post_id": 39626806, "comment_id": 66596555, "body": "@saurabheights  the image link postimg.org/image/dz72s444t/"}, {"owner": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1474570887, "post_id": 39626806, "comment_id": 66597109, "body": "First, you should provide background Image as well as the final output you got. Next, you are using subtract, <a href=\"http://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html#subtract\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/core/doc/&hellip;</a> . This method does a diff and then saturates the image, which is causing the distortion in color. Note distortion is not just because of saturation, but also because you are doing diff with a non-black image. Since, color(hue) is more related to ratio of R,G and B colors, the ratio will go off if you subtract R,G and B from a non-zero value."}, {"owner": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1474571016, "post_id": 39626806, "comment_id": 66597180, "body": "IMHO, The answer provided by GpG is correct. You can also use the property that card has well defined red color. If you take HSV transform, you can use Hue channel to seperate Red color from background green color, however this will be less effective way for background with red colors. You can also use template matching."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6860846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ffc526b3dcc05de2d709deb86bbffb?s=128&d=identicon&r=PG&f=1", "display_name": "Clash", "link": "https://stackoverflow.com/users/6860846/clash"}, "edited": false, "score": 0, "creation_date": 1474564816, "post_id": 39627314, "comment_id": 66593773, "body": "thanks for your answer, i am really new in this area, my goal is to given an image like <a href=\"http://postimg.org/image/dz72s444t/\" rel=\"nofollow noreferrer\">postimg.org/image/dz72s444t</a> create a new image containing only the red card (so i send it to recognition). color will not be always the same so i need to subtract from background, any code would be a lot of help. thank you"}], "tags": [], "owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "is_accepted": false, "score": 0, "last_activity_date": 1474655116, "last_edit_date": 1474655116, "creation_date": 1474495712, "answer_id": 39627314, "question_id": 39626806, "link": "https://stackoverflow.com/questions/39626806/getting-new-objects-in-the-image/39627314#39627314", "title": "Getting new objects in the image", "body": "<p>If you are working with real images, I suggest the following:</p>\n\n<ul>\n<li>read colour images</li>\n<li>do some initial presmoothing</li>\n<li>substract grayscale images and threshold the result</li>\n<li>optionally do some morphological closing</li>\n<li>find the biggest region on the thresholded image with labelling</li>\n<li>get the bounding rectangle of the card area (for example cv's boundingRect) and extract this area from original colour image \u00b6</li>\n</ul>\n\n<p>An alternative would be, in general a more robust approach, based on feature detection. Check this out for starter: \n<a href=\"http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_feature2d/py_matcher/py_matcher.html\" rel=\"nofollow\">http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_feature2d/py_matcher/py_matcher.html</a>. In this case, all possible card candidates must be known in advance.</p>\n\n<p>If the card was just superimposed on the background image than this might work:</p>\n\n<pre><code># read directly to float \nimage1 = cv2.imread(\"gray_bk.png\").astype(np.float) / 255\nimage2 = cv2.imread(\"gray_novo.png\").astype(np.float) / 255\n\n# substract and threshold\nthreshold = 0.1\nbinary_image = np.abs(np.mean(image2,2) - np.mean(image1,2)) &gt; threshold\n# get card area\ny,x = np.where(binary_image)\n# extract card from the image\ncard = image2[ y.min():y.max(), x.min():x.max(),:] \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6860846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ffc526b3dcc05de2d709deb86bbffb?s=128&d=identicon&r=PG&f=1", "display_name": "Clash", "link": "https://stackoverflow.com/users/6860846/clash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474655116, "creation_date": 1474493032, "question_id": 39626806, "link": "https://stackoverflow.com/questions/39626806/getting-new-objects-in-the-image", "title": "Getting new objects in the image", "body": "<p>i am trying to build a card recognition machine. The thing is the cards will be put on top of a cenario.</p>\n\n<p>That being said i come for help on how can i compare to images, one is the empty background(cenario) and the other is the same cenario with a card on top of it.</p>\n\n<pre><code>import numpy as np\nfrom PIL import Image\nimport cv2\n\nimage1 = cv2.imread(\"gray_bk.png\")\nimage2 = cv2.imread(\"gray_novo.png\")\n\ncv2.imwrite('LutGrey.png',gray_image)\n\nnovo = cv2.subtract(image1,image2) \ncv2.imwrite(file, novo) \n</code></pre>\n\n<p>this is my code so far, the problem with it, is that the return is a black image with the card in it (OK) but the colors in the card are all messed up, how do i execute the same operation without messing the colors ? And what would be the best way to \"cut\" the card into a new (smaller) image.</p>\n"}, {"tags": ["python", "macros", "jinja2"], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 2, "last_activity_date": 1474494077, "last_edit_date": 1474494077, "creation_date": 1474493544, "answer_id": 39626907, "question_id": 39626767, "link": "https://stackoverflow.com/questions/39626767/python-jinja2-call-to-macro-results-in-undesirable-newline/39626907#39626907", "title": "Python Jinja2 call to macro results in (undesirable) newline", "body": "<p>The newlines come from the <code>{{print_if_john(...)}}</code> lines themselves, <em>not</em> the macro. </p>\n\n<p>If you were to join those up or use <code>-</code> within those blocks, the newlines disappear:</p>\n\n<pre><code>&gt;&gt;&gt; from jinja2 import Template\n&gt;&gt;&gt; t = Template('''\\\n... {% macro print_if_john(name) -%}\n... {% if name == 'John' -%}\n...   Hi John\n... {% endif %}\n... {%- endmacro -%}\n... Hello World!\n... {{print_if_john('Foo')-}}\n... {{print_if_john('Foo2')-}}\n... {{print_if_john('John')-}}\n... ''')\n&gt;&gt;&gt; t.render()\nu'Hello World!\\nHi John\\n'\n&gt;&gt;&gt; print t.render()\nHello World!\nHi John\n</code></pre>\n\n<p>Note that you can still use newlines and other whitespace within the <code>{{...}}</code> blocks.</p>\n\n<p>I removed the initial <code>-</code> from the <code>{% endif %}</code> block because when you remove the newlines from the <code>{{..}}</code> blocks, you want to <em>add one back in</em> when you actually do print the <code>Hi John</code> line. That way multiple <code>print_if_john('John')</code> calls will still get their line separators.</p>\n\n<p>The full template, freed from the demo session:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{% macro print_if_john(name) -%}\n{% if name == 'John' -%}\n  Hi John\n{% endif %}\n{%- endmacro -%}\nHello World!\n{{print_if_john('Foo')-}}\n{{print_if_john('Foo2')-}}\n{{print_if_john('John')-}}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5787246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207035371936596/picture?type=large", "display_name": "Rags Rachamadugu", "link": "https://stackoverflow.com/users/5787246/rags-rachamadugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1474494077, "creation_date": 1474492827, "question_id": 39626767, "link": "https://stackoverflow.com/questions/39626767/python-jinja2-call-to-macro-results-in-undesirable-newline", "title": "Python Jinja2 call to macro results in (undesirable) newline", "body": "<p>My JINJA2 template is like below.</p>\n\n<pre><code>{% macro print_if_john(name) -%}\n{% if name == 'John' -%}\n  Hi John\n{%- endif %}\n{%- endmacro %}\nHello World!\n{{print_if_john('Foo')}}\n{{print_if_john('Foo2')}}\n{{print_if_john('John')}}\n</code></pre>\n\n<p>The resulting output is</p>\n\n<pre><code>Hello\u2022World!\n\n\nHi\u2022John\n</code></pre>\n\n<p>I don't want the 2 newlines between 'Hello World!' and 'Hi John'. It looks like when a call to macro results in no output from macro, JINJA is inserting a newline anyways.. Is there any way to avoid this? I've put minus in the call to macro itself but that didn't help.</p>\n\n<p>Note that I tested this template and resulting code at <a href=\"http://jinja2test.tk/\" rel=\"nofollow\">http://jinja2test.tk/</a></p>\n"}, {"tags": ["python", "postgresql", "sqlalchemy"], "owner": {"reputation": 1981, "user_id": 1046775, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/86cb1a22e169b7e57727b5ea73904c43?s=128&d=identicon&r=PG", "display_name": "bhoward", "link": "https://stackoverflow.com/users/1046775/bhoward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 756, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1474492628, "creation_date": 1474492628, "question_id": 39626728, "link": "https://stackoverflow.com/questions/39626728/sqlalchemy-hybrid-property-with-class-expression-across-multiple-relationships", "title": "SQLAlchemy: hybrid property with class expression across multiple relationships", "body": "<p>I'm interested in figuring out how to write a <code>@expression</code> for the  <code>@hybrid_property</code> below.  </p>\n\n<p>The schema is a little complex since this is a small part of a much larger project, over which I don't have total control, so please don't get hung up on the odd arrangement of classes and table definitions and the use of both relationships and mappers.   I've have also had to change all the class names in order to post this here, so please forgive any minor typos.   Here are the relevant portions:</p>\n\n<p><strong>tables.py</strong></p>\n\n<pre><code>course_table = Table('course', metadata,\n    id = Column(Integer, primary_key=True),\n    name = Column(String(80)),\n    )\n\nbook_table = Table('book', metadata,\n    booknum = Column(Integer, primary_key=True),\n    title = Column(String(80)),\n    )\n\nlibrarybook = Table('librarybook', metadata,\n    dewey_num = Column(Integer, primary_key=True),\n    booknum = Column(Integer, ForeignKey('book.booknum')),\n    shelf_location = Column(String(80)),\n    )\n\n\nauthor = Table('author', metadata,\n    id = Column(Integer, primary_key=True),\n    name = Column(String(80)),\n    )\n\ncourse_book_view_table = view('course_book_view', metadata,\n    Column('course_id', Integer,\n               ForeignKey(course_table.c.id),\n               primary_key=True, autoincrement=False),\n        Column('booknum', Text,\n               ForeignKey(book_table.c.booknum),\n               primary_key=True),\n    )\n)\n</code></pre>\n\n<p><strong>model.py</strong></p>\n\n<pre><code>import tables as t\n\n\nclass Course(Base):\n    course_books=relation(Book,\n                              secondary=t.course_book_view_table,\n                              backref='courses',\n                              order_by=Book.dewey,\n                              ),\n\n    @hybrid_property\n    def course_book_author_names(self):\n          if self.course_books:\n              return list(set([lb.author.name\n                  for b in self.course_books\n                  for lb in b.library_books]))\n          else:\n              return None\n\n\n    @course_book_author_names.expression\n    def course_book_author_names(cls):\n        join_tbl = t.course_book_view_table.join(\n            t.librarybook,\n            t.librarybook.c.booknum == t.course_book_view_table.c.booknum) \\\n            .join(\n                t.author,\n                    t.author.c.booknum == t.librarybook.c.booknum\n            )\n        q = select([func.array_agg(t.author.c.name)])\n        q = q.select_from(join_tbl)\n        q = q.where(t.course_book_view_table.c.course_id == cls.id)\n        q = q.distinct()\n        return q.label('course_book_author_names')\n\nclass Book(Base):\n    pass\n\nclass Librarybook(Base):\n    pass\n\nclass Author(Base):\n    pass\n\n\nmapper(Librarybook, t.librarybook, properties=dict(\n    book = relationship(\n        Book,\n        primaryjoin=t.librarybook.c.booknum == t.book_table.c.booknum,\n        foreign_keys=[t.librarybook.c.booknum],\n        backref='library_books',\n    ),\n    author=relationship(Author, backref='books'),\n))\n\nmapper(Author, t.author)\n</code></pre>\n\n<p>I would eventually be able to use the <code>@hybrid_property</code> in two ways:</p>\n\n<p>as a python property:</p>\n\n<pre><code>&gt;&gt;&gt;course = session.query(Course).get(1234)\n&gt;&gt;&gt;course.course_book_author_names\n['Bjarne Stroustrup', 'Brian Kernighan', 'Dennis Ritchie', 'Guido van Rossum', 'James Gosling']\n</code></pre>\n\n<p>and as a class level expression for use with SA, something along the lines of:</p>\n\n<pre><code>&gt;&gt;&gt;session.query(Course).filter(Course.course_book_author_names \\\n.any(Author.name == 'Bjarne Stroustrup')).first()\n1234\n</code></pre>\n\n<p>Rather, I get an error:</p>\n\n<pre><code>session.query(Course).filter(Course.course_book_author_names \\\n.any(Author.name == 'Bjarne Stroustrup')).first()\n...\nAttributeError: Neither 'Label' object nor 'Comparator' object has an attribute 'any'\n</code></pre>\n\n<p>I'm not 100% sure that this is the right way to call it, and I'm open to suggestions for better syntax (in_ instead of any?) that would produce the right filtering effect.</p>\n\n<p>On the other hand, maybe I just need some kind of custom relationship that more directly connects courses to authors?  </p>\n\n<p>For what it's worth, the underlying database is postgres.</p>\n\n<p>Any thoughts or insights appreciated!</p>\n"}, {"tags": ["python", "python-3.x", "prime-factoring"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 1, "creation_date": 1474492640, "post_id": 39626714, "comment_id": 66558826, "body": "Why do you think multiplying all the factors of a number will return the number?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 2, "creation_date": 1474492687, "post_id": 39626714, "comment_id": 66558852, "body": "you need to find the <b>prime</b> factors, not all factors."}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1474492715, "post_id": 39626714, "comment_id": 66558868, "body": "<code>if num % k == 0:</code> what makes you think <code>k</code> is a prime?&#39;"}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1474492724, "post_id": 39626714, "comment_id": 66558877, "body": "<code>&quot;Check Product =&quot;,mySum</code> that&#39;s not a product"}, {"owner": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "edited": false, "score": 0, "creation_date": 1474492727, "post_id": 39626714, "comment_id": 66558879, "body": "You&#39;re not checking if your factors are prime numbers. So you&#39;re finding all the factors, not just prime factors."}, {"owner": {"reputation": 27, "user_id": 6776334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1055748134475042/picture?type=large", "display_name": "Matt Poretsky", "link": "https://stackoverflow.com/users/6776334/matt-poretsky"}, "edited": false, "score": 0, "creation_date": 1474492740, "post_id": 39626714, "comment_id": 66558891, "body": "I know but I do not know how to find just the prime factors"}, {"owner": {"reputation": 2039, "user_id": 2339620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/858406bb3e274f28f148e8cc86dece68?s=128&d=identicon&r=PG", "display_name": "karlosss", "link": "https://stackoverflow.com/users/2339620/karlosss"}, "edited": false, "score": 2, "creation_date": 1474492779, "post_id": 39626714, "comment_id": 66558915, "body": "<a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Sieve_of_Eratosthenes</a>"}, {"owner": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "edited": false, "score": 3, "creation_date": 1474492920, "post_id": 39626714, "comment_id": 66558970, "body": "Why do you use <code>eval</code> on your <code>input</code>? If you need to convert the input to an int you should convert it like <code>int(input(&quot;Enter an integer &gt; 1: &quot;))</code>. <code>eval</code> interpret a string as code, which is most likely not what you want. It could be used for evil if someone else were to use your program."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1474493938, "post_id": 39626714, "comment_id": 66559449, "body": "Note that you&#39;re not multiplying the factors: you&#39;re <i>adding</i> them.  This will help you find a perfect number, but it doesn&#39;t help validiate prime factorization."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6776334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1055748134475042/picture?type=large", "display_name": "Matt Poretsky", "link": "https://stackoverflow.com/users/6776334/matt-poretsky"}, "edited": false, "score": 0, "creation_date": 1474493254, "post_id": 39626774, "comment_id": 66559123, "body": "the program will not run"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 27, "user_id": 6776334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1055748134475042/picture?type=large", "display_name": "Matt Poretsky", "link": "https://stackoverflow.com/users/6776334/matt-poretsky"}, "edited": false, "score": 0, "creation_date": 1474493299, "post_id": 39626774, "comment_id": 66559155, "body": "I verified it and it working for me. Can you explain me why you mentioned this?"}, {"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "reply_to_user": {"reputation": 27, "user_id": 6776334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1055748134475042/picture?type=large", "display_name": "Matt Poretsky", "link": "https://stackoverflow.com/users/6776334/matt-poretsky"}, "edited": false, "score": 0, "creation_date": 1474493950, "post_id": 39626774, "comment_id": 66559454, "body": "@MattPoretsky if you don&#39;t call the function of course it will not run..."}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1474493366, "last_edit_date": 1474493366, "creation_date": 1474492891, "answer_id": 39626774, "question_id": 39626714, "link": "https://stackoverflow.com/questions/39626714/prime-factorization/39626774#39626774", "title": "Prime Factorization", "body": "<p>Because your code is printing all the factor instead of just prime factors. Below is the sample function you may refer for prime factorization:</p>\n\n<pre><code>def prime_factors(n):\n    prim_facs = []\n    d = 2\n    while d*d &lt;= n:\n        while (n % d) == 0:\n            prim_facs.append(d)\n            n //= d\n        d += 1\n    if n &gt; 1:\n       prim_facs.append(n)\n    return prim_facs\n\n# Sample Example\n# &gt;&gt;&gt; prime_factors(210)\n# [2, 3, 5, 7]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 1, "last_activity_date": 1474493096, "creation_date": 1474493096, "answer_id": 39626810, "question_id": 39626714, "link": "https://stackoverflow.com/questions/39626714/prime-factorization/39626810#39626810", "title": "Prime Factorization", "body": "<ol>\n<li><p><strong>Problem</strong> - If <em>f</em> is a factor, you don't want to count multiples of <em>f</em>.<br>\n<strong>Solution</strong> - Once you identify a factor <em>f</em>, divide <em>n</em> by <em>f</em>.<br>\n<strong>Example</strong> - 210 is divisible by 2; divide by 2 and thereafter process 105. That ensures you don't count any more multiples of 2 like 6 or 10. 105 is divisible by 3; divide by 3 and continue with 35.</p></li>\n<li><p><strong>Problem</strong> - Prime factors can show up multiple times. 12 = 2\u00d72\u00d73.<br>\n<strong>Solution</strong> - If <em>f</em> is a factor, keep checking for it and dividing by <em>f</em> until you've accounted for all occurrences.<br>\n<strong>Example</strong> - 12 is divisible by 2; divide by 2 to get 6. 6 is still divisible by 2; divide by 2 again to get 3. 3 is not divisible by 2; continue to the next factor.</p></li>\n</ol>\n"}], "owner": {"reputation": 27, "user_id": 6776334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1055748134475042/picture?type=large", "display_name": "Matt Poretsky", "link": "https://stackoverflow.com/users/6776334/matt-poretsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "closed_date": 1474743675, "answer_count": 2, "score": -3, "last_activity_date": 1474493366, "creation_date": 1474492556, "last_edit_date": 1474492609, "question_id": 39626714, "link": "https://stackoverflow.com/questions/39626714/prime-factorization", "closed_reason": "Duplicate", "title": "Prime Factorization", "body": "<p>So my program is supposed to find the prime factors of an integer and then the contents of the integer array is printed out and the values in the array are supposed to be multiplied together (giving you the original number) \nthis is what it is supposed to look like</p>\n\n<p>Prime Factorization Program </p>\n\n<pre><code>Enter an integer &gt; 1: 210 \n\nPrime Factors \n2\n3\n5\n7\nCheck Product = 210\n</code></pre>\n\n<p>this is my code and my results </p>\n\n<pre><code>def main():\n    a = [0]*20\n    print(\"Prime Factorization Program\")\n    print()\n    num = eval(input(\"Enter an integer &gt; 1: \"))\n    count = 0\n    for k in range(1,num):\n        if num % k == 0:\n            a[count]= k\n            count = count + 1\n\n    mySum = 0\n    for k in range(count):\n        mySum = mySum + a[k]\n    print()\n    print(\"Prime Factors\")\n    for k in range(count):\n        print(a[k])\n    print(\"Check Product =\",mySum)\n\nmain()\n</code></pre>\n\n<p>here are my result </p>\n\n<p>Prime Factorization Program</p>\n\n<pre><code>Enter an integer &gt; 1: 210\n\nPrime Factors\n1\n2\n3\n5\n6\n7\n10\n14\n15\n21\n30\n35\n42\n70\n105\nCheck Product = 366\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy", "numerical-methods", "differential-equations"], "comments": [{"owner": {"reputation": 3862, "user_id": 2991872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9bc4382fe0c117be6b29768c66439be7?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2991872/mehdi"}, "edited": false, "score": 0, "creation_date": 1474492959, "post_id": 39626681, "comment_id": 66558990, "body": "could you provide a sample code to start with and see the error? the boundary condition is a callable function according to the document, what is the problem?"}, {"owner": {"reputation": 6777, "user_id": 354979, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/glvEs.jpg?s=128&g=1", "display_name": "rhombidodecahedron", "link": "https://stackoverflow.com/users/354979/rhombidodecahedron"}, "reply_to_user": {"reputation": 3862, "user_id": 2991872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9bc4382fe0c117be6b29768c66439be7?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2991872/mehdi"}, "edited": false, "score": 0, "creation_date": 1474493239, "post_id": 39626681, "comment_id": 66559112, "body": "The problem is that <code>bc</code> is a callable function of dimension <code>n</code>, i.e. the number of equations. I have <code>n=1</code> equations but I want it to be bound on both sides, at <code>x=0</code> and also at <code>x=1</code>."}, {"owner": {"reputation": 6777, "user_id": 354979, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/glvEs.jpg?s=128&g=1", "display_name": "rhombidodecahedron", "link": "https://stackoverflow.com/users/354979/rhombidodecahedron"}, "reply_to_user": {"reputation": 3862, "user_id": 2991872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9bc4382fe0c117be6b29768c66439be7?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2991872/mehdi"}, "edited": false, "score": 0, "creation_date": 1474493371, "post_id": 39626681, "comment_id": 66559186, "body": "Also, there seems to be no tolerance on the violation of the boundary conditions. So the solutions I&#39;m getting are very far from my specified boundary."}, {"owner": {"reputation": 6777, "user_id": 354979, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/glvEs.jpg?s=128&g=1", "display_name": "rhombidodecahedron", "link": "https://stackoverflow.com/users/354979/rhombidodecahedron"}, "reply_to_user": {"reputation": 3862, "user_id": 2991872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9bc4382fe0c117be6b29768c66439be7?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2991872/mehdi"}, "edited": false, "score": 0, "creation_date": 1474493903, "post_id": 39626681, "comment_id": 66559428, "body": "@Mehdi I added a MWE"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 3, "creation_date": 1474494905, "post_id": 39626681, "comment_id": 66559893, "body": "If you specify two boundary conditions y(0)=1 and y(1)=1 for a first order ODE, then in general the problem is overdetermined and <i>there is no solution</i>.  If you specify just the initial condition y(0)=y0, you have a first order initial value problem.  In fact, in this case, you can derive the exact solution: y(x) = y0*exp(-cos(x))."}, {"owner": {"reputation": 6777, "user_id": 354979, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/glvEs.jpg?s=128&g=1", "display_name": "rhombidodecahedron", "link": "https://stackoverflow.com/users/354979/rhombidodecahedron"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1474559208, "post_id": 39626681, "comment_id": 66590400, "body": "Thanks @WarrenWeckesser, you&#39;re right, I forgot about that. If you post your comment as an answer I will accept it."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1474560707, "post_id": 39626681, "comment_id": 66591440, "body": "OK, it is posted."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10121139"}, "edited": false, "score": 0, "creation_date": 1585557191, "post_id": 39643988, "comment_id": 107791248, "body": "Suppose <a href=\"https://stackoverflow.com/questions/60924050/adapting-initial-value-problem-to-boundary-value-problem-using-scipy-integrate-s\">one is trying to create an SIR model</a>, for which one has two boundary conditions but for more than one y-component. This way, the <code>y</code> arg accepted by boundary condition function <code>bc</code> looks like <code>y=[dy1&#47;dt, dy2&#47;dt, dy3&#47;dt]</code> where <code>y1=S</code>, <code>y2=I</code>, <code>y3=R</code>. The boundary conditions are taken as <code>dyi&#47;dt[0] = some number, dyi&#47;dt[-1] = another number</code> for <code>i=1,2,3</code>. Is the problem still over-determined? If not, how can one use <code>solve_bvp</code> with more than one <code>bc</code> func?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1585564506, "post_id": 39643988, "comment_id": 107794443, "body": "@allthemikeysaretaken: <i>&quot;The boundary conditions are taken as dyi/dt[0] = some number, dyi/dt[-1] = another number for i=1,2,3. Is the problem still over-determined?&quot;</i>  That imposes 6 conditions on your 3-d system, so yes, the problem would be overdetermined, even if the two parameters in the system are considered variables.  Lutz Lehmann summarized the issue in the comments to your question."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 1, "last_activity_date": 1474560667, "creation_date": 1474560667, "answer_id": 39643988, "question_id": 39626681, "link": "https://stackoverflow.com/questions/39626681/solving-a-first-order-bvp-with-two-boundary-conditions-with-scipys-solve-bvp/39643988#39643988", "title": "Solving a first order BVP with two boundary conditions with scipy&#39;s solve_bvp", "body": "<p>If you specify two boundary conditions y(0)=1 and y(1)=1 for a first order ODE, then in general the problem is overdetermined and <em>there is no solution</em>. If you specify just the initial condition y(0)=y0, you have a first order initial value problem. In fact, in this case, you can derive the exact solution: y(x) = y0*exp(-cos(x)). </p>\n"}], "owner": {"reputation": 6777, "user_id": 354979, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/glvEs.jpg?s=128&g=1", "display_name": "rhombidodecahedron", "link": "https://stackoverflow.com/users/354979/rhombidodecahedron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1693, "favorite_count": 0, "accepted_answer_id": 39643988, "answer_count": 1, "score": 2, "last_activity_date": 1474560667, "creation_date": 1474492367, "last_edit_date": 1474493876, "question_id": 39626681, "link": "https://stackoverflow.com/questions/39626681/solving-a-first-order-bvp-with-two-boundary-conditions-with-scipys-solve-bvp", "title": "Solving a first order BVP with two boundary conditions with scipy&#39;s solve_bvp", "body": "<p>I am using scipy's BVP solver: </p>\n\n<p><a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.solve_bvp.html\" rel=\"nofollow\">http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.solve_bvp.html</a></p>\n\n<p>The problem I am running into is that you can only have as many boundary conditions as you have equations. I only have one equation but I have two boundary conditions. How can this be fixed? </p>\n\n<p><strong>MWE</strong></p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; from scipy.integrate import solve_bvp\n&gt;&gt;&gt; \n&gt;&gt;&gt; x = np.linspace(0, 1, 100)\n&gt;&gt;&gt; dydx = lambda x,y: y*np.sin(x)\n&gt;&gt;&gt; \n&gt;&gt;&gt; result = solve_bvp(dydx, \n...     lambda ya,yb: np.array([ (ya[0]-1)**2 + (yb[0]-1)**2 ]),\n...     x, [np.ones(len(x))], max_nodes=100000, tol=1e-9)\n&gt;&gt;&gt; \n&gt;&gt;&gt; result\n       message: 'The algorithm converged to the desired accuracy.'\n         niter: 2\n             p: None\n rms_residuals: array([  3.48054730e-10,   3.47134800e-10,   3.46220750e-10,\n         3.45304147e-10,   3.44446495e-10,   3.43708535e-10,\n         3.42834209e-10,   3.41730399e-10,   3.40902853e-10,\n         3.40116511e-10,   3.39286663e-10,   3.38873550e-10,\n         3.37853506e-10,   3.36632825e-10,   3.35880059e-10,\n         3.35385717e-10,   3.35453551e-10,   3.34784891e-10,\n         3.32401725e-10,   3.34486867e-10,   3.35674629e-10,\n         3.37743169e-10,   3.34329677e-10,   3.29311236e-10,\n         3.27606354e-10,   3.28578369e-10,   3.27772742e-10,\n         3.26447666e-10,   3.24908674e-10,   3.24192402e-10,\n         3.25862692e-10,   3.28872815e-10,   3.22757465e-10,\n         3.21914926e-10,   3.20227078e-10,   3.23579897e-10,\n         3.28140843e-10,   3.18151515e-10,   3.21177949e-10,\n         3.16611117e-10,   3.45372059e-10,   3.18345626e-10,\n         3.24069081e-10,   3.32570305e-10,   3.19141250e-10,\n         3.14376144e-10,   3.18278959e-10,   3.11802424e-10,\n         3.15597596e-10,   3.22818017e-10,   3.15384028e-10,\n         3.17673241e-10,   3.08099021e-10,   3.11743210e-10,\n         3.28763320e-10,   3.24475197e-10,   3.28343741e-10,\n         3.25892534e-10,   3.12411478e-10,   3.37194926e-10,\n         3.20060651e-10,   3.03517565e-10,   3.00795182e-10,\n         3.06846379e-10,   3.00064770e-10,   3.05765788e-10,\n         2.99543196e-10,   2.98157661e-10,   2.97863071e-10,\n         2.96467397e-10,   3.74567928e-10,   3.24304178e-10,\n         3.16165056e-10,   3.02449962e-10,   2.93348900e-10,\n         3.08601600e-10,   2.93492038e-10,   3.11756310e-10,\n         2.97438508e-10,   3.17903029e-10,   3.05491804e-10,\n         3.02623385e-10,   3.06340149e-10,   2.94595579e-10,\n         2.87571373e-10,   3.03866639e-10,   3.42985927e-10,\n         3.21829601e-10,   3.70164964e-10,   3.53563487e-10,\n         3.00178404e-10,   2.83888849e-10,   2.82310753e-10,\n         2.85661232e-10,   3.11405296e-10,   2.80954237e-10,\n         2.79523163e-10,   2.80819968e-10,   2.94406497e-10,\n         3.19548071e-10,   2.95355340e-10,   2.77522541e-10,\n         2.76703591e-10,   2.88121141e-10,   2.75290617e-10,\n         2.84220379e-10,   2.89876300e-10,   3.14510031e-10,\n         3.11057911e-10,   2.72303350e-10,   2.79168046e-10,\n         2.90700062e-10,   2.78438999e-10,   2.68897634e-10,\n         2.69286657e-10,   2.90472537e-10,   2.78378707e-10,\n         2.97980086e-10,   2.97008148e-10,   2.65028623e-10,\n         2.64744165e-10,   2.69437313e-10,   2.63909411e-10,\n         2.62339786e-10,   2.71045386e-10,   2.65850861e-10,\n         2.78162780e-10,   2.61231989e-10,   2.70109868e-10,\n         2.61595375e-10,   2.59299272e-10,   2.65106316e-10,\n         2.74283076e-10,   2.86861196e-10,   3.03175803e-10,\n         2.58290170e-10,   3.61324845e-10,   3.39239278e-10,\n         2.91296094e-10,   2.83918017e-10,   4.52002829e-10,\n         2.52915179e-10,   3.13709791e-10,   3.72555078e-10,\n         2.48903834e-10,   2.58089690e-10,   2.86634265e-10,\n         2.60879823e-10,   2.64643448e-10,   3.03583577e-10,\n         5.12385186e-10,   2.42415186e-10,   3.47677749e-10,\n         2.41037177e-10,   2.91624837e-10,   2.88486833e-10,\n         2.97731066e-10,   3.46537042e-10,   2.44416103e-10,\n         4.29099468e-10,   4.71320607e-10,   2.97672164e-10,\n         3.26787171e-10,   2.34920240e-10,   2.64792458e-10,\n         2.91952218e-10,   2.47064463e-10,   2.34000456e-10,\n         4.10948830e-10,   2.36520479e-10,   3.42444147e-10,\n         2.76749245e-10,   2.51379106e-10,   2.40093828e-10,\n         2.72602754e-10,   3.94004751e-10,   2.84796018e-10,\n         3.72431030e-10,   2.23313796e-10,   3.32252341e-10,\n         3.34369044e-10,   2.63230702e-10,   2.17694780e-10,\n         3.25346854e-10,   2.64869219e-10,   3.51158895e-10,\n         3.60872478e-10,   3.09047143e-10,   2.22308395e-10,\n         2.43344334e-10,   2.16527726e-10,   2.98642975e-10,\n         2.77152047e-10,   2.66161092e-10,   2.91230604e-10,\n         2.37973344e-10,   2.95802884e-10,   2.78890213e-10,\n         2.19485810e-10,   3.53536609e-10,   2.16716319e-10,\n         2.51682560e-10,   2.04749227e-10,   4.31531575e-10,\n         3.47595602e-10,   2.38112586e-10,   1.92156254e-10,\n         2.46451083e-10,   2.99903096e-10,   1.90926751e-10,\n         2.05652721e-10,   2.33415220e-10,   2.43209873e-10,\n         1.85670073e-10,   2.02780645e-10,   1.89290313e-10,\n         1.81291292e-10,   1.77940599e-10,   3.60470288e-10,\n         3.28978503e-10,   1.74204497e-10,   1.95779041e-10,\n         2.50524362e-10,   2.49249184e-10,   1.67522152e-10,\n         1.68202192e-10,   1.82172067e-10,   1.77510490e-10,\n         1.62468247e-10,   1.75426885e-10,   3.24084379e-10,\n         2.21087707e-10,   1.88843987e-10,   2.57800867e-10,\n         1.53483353e-10,   1.80491618e-10,   2.28820880e-10,\n         2.32095332e-10,   1.90031952e-10,   1.46493968e-10,\n         2.00403717e-10,   3.23811210e-10,   1.90421082e-10,\n         1.45237509e-10,   1.67970046e-10,   1.49189288e-10,\n         1.39748871e-10,   1.40621758e-10,   1.33316350e-10,\n         2.22781676e-10,   1.31021647e-10,   2.12758988e-10,\n         1.38894682e-10,   1.75219768e-10,   1.78296709e-10,\n         3.67044064e-10,   2.04279379e-10,   2.11899286e-10,\n         1.59322174e-10,   1.21129350e-10,   1.18003803e-10,\n         1.42850831e-10,   1.33020880e-10,   1.27620814e-10,\n         1.48379719e-10,   3.35008994e-10,   3.31675208e-10,\n         2.49871984e-10,   1.06526186e-10,   1.57190187e-10,\n         9.38688508e-11,   2.16167913e-10,   1.12548066e-10,\n         1.98572296e-10,   2.12773340e-10,   3.09554965e-10,\n         2.32665662e-10,   8.05365861e-11,   2.71090303e-10,\n         1.60686511e-10,   1.20088934e-10,   3.23772391e-10,\n         2.01129249e-10,   3.04370308e-10,   6.75862037e-11,\n         7.60074235e-11,   1.55486106e-10,   2.24650749e-10,\n         2.10826836e-10,   3.75354523e-10,   1.48504437e-10,\n         1.65019969e-10,   7.52309342e-11,   3.59188285e-10,\n         1.55801401e-10,   1.52568581e-10,   5.38230045e-11])\n           sol: &lt;scipy.interpolate.interpolate.PPoly object at 0x2ad860930d58&gt;\n        status: 0\n       success: True\n             x: array([ 0.        ,  0.003367  ,  0.00673401,  0.01010101,  0.01346801,\n        0.01683502,  0.02020202,  0.02356902,  0.02693603,  0.03030303,\n        0.03367003,  0.03703704,  0.04040404,  0.04377104,  0.04713805,\n        0.05050505,  0.05387205,  0.05723906,  0.06060606,  0.06397306,\n        0.06734007,  0.07070707,  0.07407407,  0.07744108,  0.08080808,\n        0.08417508,  0.08754209,  0.09090909,  0.09427609,  0.0976431 ,\n        0.1010101 ,  0.1043771 ,  0.10774411,  0.11111111,  0.11447811,\n        0.11784512,  0.12121212,  0.12457912,  0.12794613,  0.13131313,\n        0.13468013,  0.13804714,  0.14141414,  0.14478114,  0.14814815,\n        0.15151515,  0.15488215,  0.15824916,  0.16161616,  0.16498316,\n        0.16835017,  0.17171717,  0.17508418,  0.17845118,  0.18181818,\n        0.18518519,  0.18855219,  0.19191919,  0.1952862 ,  0.1986532 ,\n        0.2020202 ,  0.20538721,  0.20875421,  0.21212121,  0.21548822,\n        0.21885522,  0.22222222,  0.22558923,  0.22895623,  0.23232323,\n        0.23569024,  0.23905724,  0.24242424,  0.24579125,  0.24915825,\n        0.25252525,  0.25589226,  0.25925926,  0.26262626,  0.26599327,\n        0.26936027,  0.27272727,  0.27609428,  0.27946128,  0.28282828,\n        0.28619529,  0.28956229,  0.29292929,  0.2962963 ,  0.2996633 ,\n        0.3030303 ,  0.30639731,  0.30976431,  0.31313131,  0.31649832,\n        0.31986532,  0.32323232,  0.32659933,  0.32996633,  0.33333333,\n        0.33670034,  0.34006734,  0.34343434,  0.34680135,  0.35016835,\n        0.35353535,  0.35690236,  0.36026936,  0.36363636,  0.36700337,\n        0.37037037,  0.37373737,  0.37710438,  0.38047138,  0.38383838,\n        0.38720539,  0.39057239,  0.39393939,  0.3973064 ,  0.4006734 ,\n        0.4040404 ,  0.40740741,  0.41077441,  0.41414141,  0.41750842,\n        0.42087542,  0.42424242,  0.42760943,  0.43097643,  0.43434343,\n        0.43771044,  0.44107744,  0.44444444,  0.44781145,  0.45117845,\n        0.45454545,  0.45791246,  0.46127946,  0.46464646,  0.46801347,\n        0.47138047,  0.47474747,  0.47811448,  0.48148148,  0.48484848,\n        0.48821549,  0.49158249,  0.49494949,  0.4983165 ,  0.5016835 ,\n        0.50505051,  0.50841751,  0.51178451,  0.51515152,  0.51851852,\n        0.52188552,  0.52525253,  0.52861953,  0.53198653,  0.53535354,\n        0.53872054,  0.54208754,  0.54545455,  0.54882155,  0.55218855,\n        0.55555556,  0.55892256,  0.56228956,  0.56565657,  0.56902357,\n        0.57239057,  0.57575758,  0.57912458,  0.58249158,  0.58585859,\n        0.58922559,  0.59259259,  0.5959596 ,  0.5993266 ,  0.6026936 ,\n        0.60606061,  0.60942761,  0.61279461,  0.61616162,  0.61952862,\n        0.62289562,  0.62626263,  0.62962963,  0.63299663,  0.63636364,\n        0.63973064,  0.64309764,  0.64646465,  0.64983165,  0.65319865,\n        0.65656566,  0.65993266,  0.66329966,  0.66666667,  0.67003367,\n        0.67340067,  0.67676768,  0.68013468,  0.68350168,  0.68686869,\n        0.69023569,  0.69360269,  0.6969697 ,  0.7003367 ,  0.7037037 ,\n        0.70707071,  0.71043771,  0.71380471,  0.71717172,  0.72053872,\n        0.72390572,  0.72727273,  0.73063973,  0.73400673,  0.73737374,\n        0.74074074,  0.74410774,  0.74747475,  0.75084175,  0.75420875,\n        0.75757576,  0.76094276,  0.76430976,  0.76767677,  0.77104377,\n        0.77441077,  0.77777778,  0.78114478,  0.78451178,  0.78787879,\n        0.79124579,  0.79461279,  0.7979798 ,  0.8013468 ,  0.8047138 ,\n        0.80808081,  0.81144781,  0.81481481,  0.81818182,  0.82154882,\n        0.82491582,  0.82828283,  0.83164983,  0.83501684,  0.83838384,\n        0.84175084,  0.84511785,  0.84848485,  0.85185185,  0.85521886,\n        0.85858586,  0.86195286,  0.86531987,  0.86868687,  0.87205387,\n        0.87542088,  0.87878788,  0.88215488,  0.88552189,  0.88888889,\n        0.89225589,  0.8956229 ,  0.8989899 ,  0.9023569 ,  0.90572391,\n        0.90909091,  0.91245791,  0.91582492,  0.91919192,  0.92255892,\n        0.92592593,  0.92929293,  0.93265993,  0.93602694,  0.93939394,\n        0.94276094,  0.94612795,  0.94949495,  0.95286195,  0.95622896,\n        0.95959596,  0.96296296,  0.96632997,  0.96969697,  0.97306397,\n        0.97643098,  0.97979798,  0.98316498,  0.98653199,  0.98989899,\n        0.99326599,  0.996633  ,  1.        ])\n             y: array([[ 0.79388397,  0.79388847,  0.79390197,  0.79392447,  0.79395597,\n         0.79399647,  0.79404598,  0.79410449,  0.794172  ,  0.79424853,\n         0.79433406,  0.7944286 ,  0.79453215,  0.79464471,  0.7947663 ,\n         0.7948969 ,  0.79503653,  0.79518518,  0.79534287,  0.79550958,\n         0.79568534,  0.79587013,  0.79606397,  0.79626686,  0.7964788 ,\n         0.7966998 ,  0.79692987,  0.797169  ,  0.79741721,  0.7976745 ,\n         0.79794087,  0.79821634,  0.7985009 ,  0.79879457,  0.79909735,\n         0.79940925,  0.79973028,  0.80006043,  0.80039973,  0.80074817,\n         0.80110577,  0.80147253,  0.80184846,  0.80223358,  0.80262788,\n         0.80303138,  0.80344409,  0.80386601,  0.80429716,  0.80473755,\n         0.80518718,  0.80564606,  0.80611421,  0.80659164,  0.80707835,\n         0.80757437,  0.80807969,  0.80859433,  0.8091183 ,  0.80965162,\n         0.8101943 ,  0.81074634,  0.81130776,  0.81187857,  0.81245879,\n         0.81304843,  0.8136475 ,  0.81425602,  0.814874  ,  0.81550144,\n         0.81613838,  0.81678482,  0.81744077,  0.81810625,  0.81878128,\n         0.81946586,  0.82016002,  0.82086378,  0.82157714,  0.82230012,\n         0.82303274,  0.82377501,  0.82452696,  0.8252886 ,  0.82605994,\n         0.826841  ,  0.8276318 ,  0.82843236,  0.82924269,  0.83006282,\n         0.83089275,  0.83173252,  0.83258213,  0.83344161,  0.83431098,\n         0.83519025,  0.83607944,  0.83697858,  0.83788768,  0.83880677,\n         0.83973586,  0.84067497,  0.84162413,  0.84258336,  0.84355267,\n         0.84453209,  0.84552164,  0.84652134,  0.84753122,  0.84855129,\n         0.84958158,  0.85062211,  0.8516729 ,  0.85273397,  0.85380536,\n         0.85488708,  0.85597915,  0.85708161,  0.85819447,  0.85931775,\n         0.86045149,  0.86159571,  0.86275043,  0.86391567,  0.86509147,\n         0.86627784,  0.86747482,  0.86868242,  0.86990068,  0.87112962,\n         0.87236927,  0.87361965,  0.8748808 ,  0.87615273,  0.87743548,\n         0.87872907,  0.88003353,  0.88134889,  0.88267518,  0.88401242,\n         0.88536065,  0.88671989,  0.88809017,  0.88947152,  0.89086397,\n         0.89226754,  0.89368228,  0.89510821,  0.89654536,  0.89799375,\n         0.89945343,  0.90092442,  0.90240675,  0.90390045,  0.90540555,\n         0.9069221 ,  0.90845011,  0.90998962,  0.91154066,  0.91310327,\n         0.91467748,  0.91626331,  0.91786081,  0.91947001,  0.92109093,\n         0.92272362,  0.92436811,  0.92602442,  0.9276926 ,  0.92937269,\n         0.9310647 ,  0.93276869,  0.93448468,  0.93621271,  0.93795282,\n         0.93970504,  0.9414694 ,  0.94324595,  0.94503471,  0.94683573,\n         0.94864904,  0.95047469,  0.95231269,  0.9541631 ,  0.95602595,\n         0.95790128,  0.95978913,  0.96168953,  0.96360252,  0.96552814,\n         0.96746643,  0.96941743,  0.97138117,  0.9733577 ,  0.97534706,\n         0.97734928,  0.97936441,  0.98139248,  0.98343353,  0.98548761,\n         0.98755476,  0.98963501,  0.99172841,  0.993835  ,  0.99595481,\n         0.9980879 ,  1.0002343 ,  1.00239405,  1.0045672 ,  1.00675379,\n         1.00895385,  1.01116744,  1.0133946 ,  1.01563536,  1.01788978,\n         1.02015789,  1.02243974,  1.02473537,  1.02704483,  1.02936815,\n         1.03170539,  1.03405659,  1.03642179,  1.03880103,  1.04119437,\n         1.04360185,  1.0460235 ,  1.04845939,  1.05090954,  1.05337402,\n         1.05585286,  1.05834611,  1.06085381,  1.06337602,  1.06591277,\n         1.06846412,  1.07103012,  1.0736108 ,  1.07620622,  1.07881642,\n         1.08144145,  1.08408136,  1.0867362 ,  1.08940601,  1.09209084,\n         1.09479074,  1.09750576,  1.10023595,  1.10298135,  1.10574202,\n         1.108518  ,  1.11130934,  1.11411609,  1.1169383 ,  1.11977602,\n         1.1226293 ,  1.12549819,  1.12838274,  1.13128299,  1.13419901,\n         1.13713083,  1.14007851,  1.14304211,  1.14602166,  1.14901722,\n         1.15202884,  1.15505658,  1.15810048,  1.1611606 ,  1.16423698,\n         1.16732967,  1.17043874,  1.17356423,  1.17670619,  1.17986467,\n         1.18303973,  1.18623141,  1.18943978,  1.19266488,  1.19590676,\n         1.19916548,  1.20244108,  1.20573363,  1.20904318,  1.21236977,\n         1.21571346,  1.2190743 ,  1.22245235,  1.22584765,  1.22926027,\n         1.23269025,  1.23613766,  1.23960253,  1.24308492,  1.2465849 ,\n         1.25010251,  1.2536378 ,  1.25719083]])\n            yp: array([[ 0.        ,  0.00267302,  0.0053461 ,  0.0080193 ,  0.01069269,\n         0.01336631,  0.01604024,  0.01871453,  0.02138925,  0.02406445,\n         0.0267402 ,  0.02941655,  0.03209358,  0.03477132,  0.03744986,\n         0.04012924,  0.04280954,  0.0454908 ,  0.04817309,  0.05085648,\n         0.05354102,  0.05622677,  0.05891379,  0.06160215,  0.0642919 ,\n         0.06698311,  0.06967583,  0.07237013,  0.07506607,  0.0777637 ,\n         0.0804631 ,  0.08316431,  0.08586741,  0.08857244,  0.09127948,\n         0.09398858,  0.0966998 ,  0.09941321,  0.10212887,  0.10484683,\n         0.10756715,  0.11028991,  0.11301515,  0.11574295,  0.11847335,\n         0.12120642,  0.12394223,  0.12668083,  0.12942228,  0.13216665,\n         0.134914  ,  0.13766438,  0.14041786,  0.1431745 ,  0.14593436,\n         0.1486975 ,  0.15146398,  0.15423387,  0.15700722,  0.1597841 ,\n         0.16256456,  0.16534867,  0.16813649,  0.17092808,  0.1737235 ,\n         0.17652281,  0.17932607,  0.18213335,  0.18494471,  0.1877602 ,\n         0.1905799 ,  0.19340385,  0.19623212,  0.19906478,  0.20190187,\n         0.20474348,  0.20758965,  0.21044044,  0.21329593,  0.21615617,\n         0.21902122,  0.22189114,  0.22476599,  0.22764585,  0.23053076,\n         0.23342079,  0.236316  ,  0.23921645,  0.2421222 ,  0.24503332,\n         0.24794987,  0.2508719 ,  0.25379948,  0.25673268,  0.25967155,\n         0.26261615,  0.26556655,  0.2685228 ,  0.27148497,  0.27445313,\n         0.27742732,  0.28040762,  0.28339409,  0.28638678,  0.28938576,\n         0.29239109,  0.29540283,  0.29842105,  0.3014458 ,  0.30447715,\n         0.30751515,  0.31055988,  0.31361139,  0.31666974,  0.31973499,\n         0.32280722,  0.32588647,  0.32897281,  0.3320663 ,  0.33516701,\n         0.33827498,  0.3413903 ,  0.34451301,  0.34764319,  0.35078088,\n         0.35392616,  0.35707908,  0.3602397 ,  0.3634081 ,  0.36658432,\n         0.36976843,  0.37296049,  0.37616057,  0.37936872,  0.382585  ,\n         0.38580948,  0.38904223,  0.39228329,  0.39553273,  0.39879061,\n         0.402057  ,  0.40533195,  0.40861553,  0.4119078 ,  0.41520881,\n         0.41851863,  0.42183733,  0.42516495,  0.42850157,  0.43184723,\n         0.43520202,  0.43856597,  0.44193917,  0.44532166,  0.4487135 ,\n         0.45211476,  0.45552551,  0.45894578,  0.46237566,  0.4658152 ,\n         0.46926446,  0.47272349,  0.47619237,  0.47967114,  0.48315988,\n         0.48665863,  0.49016747,  0.49368644,  0.49721562,  0.50075505,\n         0.5043048 ,  0.50786493,  0.5114355 ,  0.51501656,  0.51860818,\n         0.52221041,  0.52582331,  0.52944695,  0.53308138,  0.53672666,\n         0.54038285,  0.54405001,  0.54772819,  0.55141745,  0.55511786,\n         0.55882946,  0.56255232,  0.5662865 ,  0.57003205,  0.57378903,\n         0.5775575 ,  0.58133751,  0.58512912,  0.58893239,  0.59274738,\n         0.59657414,  0.60041272,  0.60426319,  0.6081256 ,  0.61200001,\n         0.61588646,  0.61978503,  0.62369576,  0.6276187 ,  0.63155392,\n         0.63550147,  0.6394614 ,  0.64343376,  0.64741862,  0.65141602,\n         0.65542602,  0.65944867,  0.66348403,  0.66753215,  0.67159308,\n         0.67566687,  0.67975358,  0.68385327,  0.68796597,  0.69209174,\n         0.69623064,  0.70038272,  0.70454802,  0.7087266 ,  0.7129185 ,\n         0.71712379,  0.7213425 ,  0.72557469,  0.72982041,  0.7340797 ,\n         0.73835262,  0.74263921,  0.74693953,  0.75125361,  0.75558151,\n         0.75992327,  0.76427895,  0.76864858,  0.77303222,  0.7774299 ,\n         0.78184168,  0.7862676 ,  0.79070771,  0.79516204,  0.79963065,\n         0.80411358,  0.80861086,  0.81312256,  0.81764869,  0.82218932,\n         0.82674447,  0.8313142 ,  0.83589854,  0.84049753,  0.84511122,\n         0.84973964,  0.85438283,  0.85904083,  0.86371368,  0.86840142,\n         0.87310408,  0.8778217 ,  0.88255432,  0.88730198,  0.89206471,\n         0.89684254,  0.90163551,  0.90644365,  0.911267  ,  0.91610559,\n         0.92095945,  0.92582862,  0.93071312,  0.93561298,  0.94052825,\n         0.94545894,  0.95040508,  0.95536671,  0.96034386,  0.96533654,\n         0.97034479,  0.97536863,  0.98040809,  0.98546319,  0.99053396,\n         0.99562042,  1.0007226 ,  1.00584051,  1.01097418,  1.01612363,\n         1.02128888,  1.02646995,  1.03166686,  1.03687962,  1.04210827,\n         1.0473528 ,  1.05261324,  1.0578896 ]])\n</code></pre>\n\n<p>As you can see, y is very far from the boundary conditions of <code>y(x=0) = y(x=1) = 1</code>.</p>\n"}, {"tags": ["python", "mysql", "indexing", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": true, "score": 0, "last_activity_date": 1487446345, "last_edit_date": 1487446345, "creation_date": 1474492898, "answer_id": 39626777, "question_id": 39626659, "link": "https://stackoverflow.com/questions/39626659/confusion-on-how-to-do-add-basic-indexing-in-sqlalchemy-after-table-creation/39626777#39626777", "title": "Confusion on how to do add basic indexing in sqlalchemy after table creation", "body": "<p>Indexing in SQL and thus in SQLAlchemy happens behind the scene.</p>\n\n<p>Indexing is a feature of the underlying SQL engine and doesn't need any special query in order to utilize the performance gain. The mere definition is sufficient.</p>\n"}], "owner": {"reputation": 67, "user_id": 6810090, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b170fd890d925c90b530d40c38cf4173?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Liaiea", "link": "https://stackoverflow.com/users/6810090/jack-liaiea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 39626777, "answer_count": 1, "score": 1, "last_activity_date": 1534862420, "creation_date": 1474492236, "last_edit_date": 1534862420, "question_id": 39626659, "link": "https://stackoverflow.com/questions/39626659/confusion-on-how-to-do-add-basic-indexing-in-sqlalchemy-after-table-creation", "title": "Confusion on how to do add basic indexing in sqlalchemy after table creation", "body": "<p>I am trying to get a simple example of indexing working with a database that has 100,000 entries and see how it improves speed. The table looks something like this:</p>\n\n<pre><code>user = Table('user', metadata,\n    Column('id', Integer, primary_key=True),\n    Column('first_name', String(16), nullable=False),\n    Column('last_name', String(16), nullable=False),\n    Column('age', Integer, nullable=False),\n    Column('joined_at', DateTime(), nullable=False, index=True),\n)\n</code></pre>\n\n<p>I am given a user key/value dict with keys 'first_name', 'last_name', 'age', and 'joined_at' query looks like this:</p>\n\n<pre><code>q = session.query(UserTable).filter(and_(\n        UserTable.first_name == user['first_name'],\n        UserTable.last_name == user['last_name'],\n        UserTable.age == user['age'],\n        UserTable.joined_at == user['joined_at']))\n</code></pre>\n\n<p>I was wondering what syntax would properly use create() on the new index for joined_at to only look at the joined_at columns that are at the same Datetime as user['joined_at'] since the index was added after the table was created</p>\n\n<p>I'm not sure if the index is working or if I'm missing something since the performance didn't change after adding <code>index=True</code>. The table in MySQL didn't change.</p>\n"}, {"tags": ["python", "parallel-processing"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1474501399, "post_id": 39626625, "comment_id": 66561664, "body": "If this program is doing it&#39;s calculations fast (like it seems) IO dominates everything, so that parallel calls are not helping much (HDD too slow). If possible, use the program without writing files, e.g. using stdin, stdout."}, {"owner": {"reputation": 165, "user_id": 1230696, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/03643b0f984f68e0a476bda54c40cf7a?s=128&d=identicon&r=PG", "display_name": "Pythoneer", "link": "https://stackoverflow.com/users/1230696/pythoneer"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1474541787, "post_id": 39626625, "comment_id": 66578103, "body": "I timed the individual steps in my script, and running the external program takes about 10 times as much as the io steps combined. If I start 7 instances manually, it finishes (for a test) in 20 minutes instead of 3.5 hours. So I could probably start much more instances before io gets relevant. But how I can do this automatically without having the outputfile overwritten by a different running process? Is it possible to load an instance into some kind of virual area that is unique to each instance?"}], "owner": {"reputation": 165, "user_id": 1230696, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/03643b0f984f68e0a476bda54c40cf7a?s=128&d=identicon&r=PG", "display_name": "Pythoneer", "link": "https://stackoverflow.com/users/1230696/pythoneer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474492076, "creation_date": 1474492076, "question_id": 39626625, "link": "https://stackoverflow.com/questions/39626625/parallelize-external-program-in-python-call", "title": "parallelize external program in python call?", "body": "<p>I have an external program which I can not change.\nIt reads an input file, does some calculations, and writes out a result file. I need to run this for a million or so combinations of input parameters.\nThe way I do it at the moment is, that I open a template file, change some strings in it (to input the new parameters), write it out, start the program using os.popen(), read the output file, do a chisquare test on the result, and then I restart with a different set of parameters.</p>\n\n<p>The external program is only running on one core, so I tried to split my parameters space up and started multiple instances in different folders. Different folders were necessary because the program overwrites its output file. This works, but it still took about ~24 hours to finish.</p>\n\n<p>Is it possible to run this as seperate processes without the result file being overwritten? Or do you see any other thing I could do to speed this up?</p>\n\n<p>Thx.</p>\n"}, {"tags": ["python", "algorithm", "data-structures", "tree", "binary-tree"], "comments": [{"owner": {"reputation": 3882, "user_id": 1040597, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c993933eeeb895833f1938b8c1308964?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/1040597/saeid"}, "edited": false, "score": 0, "creation_date": 1474492063, "post_id": 39626562, "comment_id": 66558540, "body": "Can you provide a link to the original question?"}, {"owner": {"reputation": 417, "user_id": 5797743, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/775389055895727/picture?type=large", "display_name": "Joel De La Cruz", "link": "https://stackoverflow.com/users/5797743/joel-de-la-cruz"}, "reply_to_user": {"reputation": 3882, "user_id": 1040597, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c993933eeeb895833f1938b8c1308964?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/1040597/saeid"}, "edited": false, "score": 0, "creation_date": 1474492198, "post_id": 39626562, "comment_id": 66558623, "body": "@sudomakeinstall2 <a href=\"http://pastebin.com/tJ2p3YN7\" rel=\"nofollow noreferrer\">pastebin.com/tJ2p3YN7</a>"}, {"owner": {"reputation": 3882, "user_id": 1040597, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c993933eeeb895833f1938b8c1308964?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/1040597/saeid"}, "edited": false, "score": 0, "creation_date": 1474492416, "post_id": 39626562, "comment_id": 66558728, "body": "Is it from an online judge where I can test my implementation?"}, {"owner": {"reputation": 417, "user_id": 5797743, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/775389055895727/picture?type=large", "display_name": "Joel De La Cruz", "link": "https://stackoverflow.com/users/5797743/joel-de-la-cruz"}, "reply_to_user": {"reputation": 3882, "user_id": 1040597, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c993933eeeb895833f1938b8c1308964?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/1040597/saeid"}, "edited": false, "score": 0, "creation_date": 1474492549, "post_id": 39626562, "comment_id": 66558793, "body": "Not a public one sadly.. I can test the implementation myself though."}, {"owner": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "edited": false, "score": 0, "creation_date": 1474495316, "post_id": 39626562, "comment_id": 66560035, "body": "How did you implement the first solution?"}, {"owner": {"reputation": 417, "user_id": 5797743, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/775389055895727/picture?type=large", "display_name": "Joel De La Cruz", "link": "https://stackoverflow.com/users/5797743/joel-de-la-cruz"}, "reply_to_user": {"reputation": 3686, "user_id": 3132173, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6873ee643c6e04fa734682dc57104b5c?s=128&d=identicon&r=PG&f=1", "display_name": "A. Sarid", "link": "https://stackoverflow.com/users/3132173/a-sarid"}, "edited": false, "score": 0, "creation_date": 1474499404, "post_id": 39626562, "comment_id": 66561217, "body": "@A. Sarid I simply subtracted the max with the min of the tuple until it was (1,1) and if it ended up being &lt;= 0, it was set to impossible."}, {"owner": {"reputation": 662, "user_id": 1470500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/199e68f57e6816012caa86c6cd3001d2?s=128&d=identicon&r=PG", "display_name": "user1470500", "link": "https://stackoverflow.com/users/1470500/user1470500"}, "edited": false, "score": 0, "creation_date": 1474500177, "post_id": 39626562, "comment_id": 66561387, "body": "Have you tested if it is an overflow issue? I am not sure if the Decimal package can handle number up to 10^50 without losses."}, {"owner": {"reputation": 417, "user_id": 5797743, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/775389055895727/picture?type=large", "display_name": "Joel De La Cruz", "link": "https://stackoverflow.com/users/5797743/joel-de-la-cruz"}, "edited": false, "score": 0, "creation_date": 1474563798, "post_id": 39626562, "comment_id": 66593231, "body": "Do you have any suggestions to overcome this?"}], "answers": [{"tags": [], "owner": {"reputation": 417, "user_id": 5797743, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/775389055895727/picture?type=large", "display_name": "Joel De La Cruz", "link": "https://stackoverflow.com/users/5797743/joel-de-la-cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1474601649, "creation_date": 1474601649, "answer_id": 39652148, "question_id": 39626562, "link": "https://stackoverflow.com/questions/39626562/distance-from-root-search-of-tree-fails/39652148#39652148", "title": "distance from root search of tree fails", "body": "<p>Floor division allows for no loss, but maybe -1 in error which I consider for the code below.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def answer(M,F):\n    M = int(M)\n    F = int(F)\n    i = 0\n    while True:\n        if M == 1 and F == 1:\n            return str(i)\n        if M &gt; F:\n            x = F-M\n            x = x//(-F)\n            if F &lt; M-(F*x):\n                x += 1\n            M -= F*x\n        elif F &gt; M:\n            x = M-F\n            x = x//(-M)\n            if M &lt; F-(M*x):\n                x += 1\n            F -= M*x\n        else:\n            if F == M and F != 1:\n                return \"impossible\"\n        i += x\n        if M &lt; 1 or F &lt; 1:\n            return \"impossible\"\n\n    return str(i)\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 5797743, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/775389055895727/picture?type=large", "display_name": "Joel De La Cruz", "link": "https://stackoverflow.com/users/5797743/joel-de-la-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474601649, "creation_date": 1474491846, "question_id": 39626562, "link": "https://stackoverflow.com/questions/39626562/distance-from-root-search-of-tree-fails", "title": "distance from root search of tree fails", "body": "<p>The tree is as follows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>       (1,1)\n       /   \\\n    (2,1)  (1,2)\n    / \\      / \\\n (3,1)(2,3) (3,2)(1,3) \n      and onward\n</code></pre>\n\n<p>The root is (1,1), all values in the tree are tuples.</p>\n\n<pre><code>Where (x,y) is an element of the tree:\nThe leftChild will be (x+y,y)\nThe rightChild will be (x,x+y)\n</code></pre>\n\n<p>I am building a function that finds the distance from the root (1,1). I cannot build the tree from scratch as it will be too time consuming.</p>\n\n<p>I have found that 1 distance from the tuple being searched for we must subtract the the max with the min. We can work backward.</p>\n\n<pre><code>     1      2\n(3,2)-&gt;(1,2)-&gt;(1,1)\n(3,2)-&gt;(3-2,2) = (1,2)-&gt;(1,2-1) = (1,1)\ngiven this is always true:\nif x &gt; y:\n   newtuple = (x-y,y)\n   distance += 1\nelse if y &gt; x:\n   newtuple = (x,y-x)\n   distance += 1\n</code></pre>\n\n<p>Yet because possible test cases can go up to even x = 10^50, this is even too slow.</p>\n\n<p>So I have found a formally to find the amount of subtractions of x with y or vice versa to make a x > y change to y &lt; x and vice versa until (x,y) = (1,1).</p>\n\n<p>So X - Y(a certain amount of times, say z) will make x less than y...\nX - Y*z = y\nfind z via algebra... z = (Y-X)/(-Y)</p>\n\n<p>This is my code so far:</p>\n\n<pre><code>from decimal import Decimal\nimport math\n\ndef answer(M,F):\n    M = int(M)\n    F = int(F)\n    i = 0\n    while True:\n        if M == 1 and F == 1:\n            return str(i)\n        if M &gt; F:\n            x = math.ceil((F-M)/(-F))\n            M -= F*x\n        elif F &gt; M:\n            x = math.ceil((M-F)/(-M))\n            F -= M*x\n        else:\n            if F == M and F != 1:\n                return \"impossible\"\n        i += x\n        if M &lt; 1 or F &lt; 1:\n            return \"impossible\"\n\n    return str(i)\n</code></pre>\n\n<p>And it's not passing some unknown test cases, yet passes all the test cases I can think of. What test cases could I be failing? Where is my code wrong?</p>\n\n<p>p.s. used Decimal module, just removed from code to make more readible.</p>\n"}, {"tags": ["python", "python-3.4"], "comments": [{"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1474491889, "post_id": 39626502, "comment_id": 66558438, "body": "What errors are you getting?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1474492499, "post_id": 39626502, "comment_id": 66558769, "body": "You don&#39;t need to use <code>int(1)</code>; that&#39;s the same thing as <code>1</code>. The duplicate explains how to properly remove items from a list as you iterate. See <a href=\"https://stackoverflow.com/q/17299581\">Loop &quot;Forgets&quot; to Remove Some Items</a> or <a href=\"https://stackoverflow.com/q/6500888\">Removing from a list while iterating over it</a> for posts that explain why your attempt doesn&#39;t work."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1474492539, "post_id": 39626502, "comment_id": 66558788, "body": "For future reference, you would need to include your <i>expected</i> output too, not just that the output you got was unexpected."}, {"owner": {"reputation": 1, "user_id": 6860740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nhhxaoCdDOk/AAAAAAAAAAI/AAAAAAAAAEs/QcAqJOV5WiI/photo.jpg?sz=128", "display_name": "sogloarcadius", "link": "https://stackoverflow.com/users/6860740/sogloarcadius"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1474493034, "post_id": 39626502, "comment_id": 66559023, "body": "I read the posts you suggested, i think i understand now why i didn&#39;t get the expected output. Sorry i didn&#39;t explain well my problem. Thanks @Martijn Pieters"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6860740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nhhxaoCdDOk/AAAAAAAAAAI/AAAAAAAAAEs/QcAqJOV5WiI/photo.jpg?sz=128", "display_name": "sogloarcadius", "link": "https://stackoverflow.com/users/6860740/sogloarcadius"}, "edited": false, "score": 0, "creation_date": 1474492162, "post_id": 39626590, "comment_id": 66558600, "body": "sorry but i updated my post. I am not familiar with the forum but the question was why my loop dont remove one tuple from the list."}, {"owner": {"reputation": 1, "user_id": 6860740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nhhxaoCdDOk/AAAAAAAAAAI/AAAAAAAAAEs/QcAqJOV5WiI/photo.jpg?sz=128", "display_name": "sogloarcadius", "link": "https://stackoverflow.com/users/6860740/sogloarcadius"}, "edited": false, "score": 0, "creation_date": 1474492222, "post_id": 39626590, "comment_id": 66558636, "body": "It removes two tuple but one still in the list after the loop end."}, {"owner": {"reputation": 283, "user_id": 5915165, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b9af134cf40d13b2f107aedcef13c473?s=128&d=identicon&r=PG&f=1", "display_name": "Lampros Tzanetos", "link": "https://stackoverflow.com/users/5915165/lampros-tzanetos"}, "reply_to_user": {"reputation": 1, "user_id": 6860740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nhhxaoCdDOk/AAAAAAAAAAI/AAAAAAAAAEs/QcAqJOV5WiI/photo.jpg?sz=128", "display_name": "sogloarcadius", "link": "https://stackoverflow.com/users/6860740/sogloarcadius"}, "edited": false, "score": 0, "creation_date": 1474492223, "post_id": 39626590, "comment_id": 66558637, "body": "Okay I didn&#39;t know that. Can you please remove the negative review of my answer?"}], "tags": [], "owner": {"reputation": 283, "user_id": 5915165, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b9af134cf40d13b2f107aedcef13c473?s=128&d=identicon&r=PG&f=1", "display_name": "Lampros Tzanetos", "link": "https://stackoverflow.com/users/5915165/lampros-tzanetos"}, "is_accepted": false, "score": -3, "last_activity_date": 1474491960, "creation_date": 1474491960, "answer_id": 39626590, "question_id": 39626502, "link": "https://stackoverflow.com/questions/39626502/can-anybody-explain-me-why-am-i-getting-some-erros-with-the-following-python-cod/39626590#39626590", "title": "Can anybody explain me why am i getting some erros with the following python code?", "body": "<p>After your for statement you should indent before starting the if statement. </p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>liste=[(1,2),(2,3),(3,1),(1,4),(3,4)]\n      for couple in liste:</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<pre><code>        if int(1) in couple:\n\n            liste.remove(couple)\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>print(liste)\n      [(2, 3), (1, 4), (3, 4)] </p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 6860740, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nhhxaoCdDOk/AAAAAAAAAAI/AAAAAAAAAEs/QcAqJOV5WiI/photo.jpg?sz=128", "display_name": "sogloarcadius", "link": "https://stackoverflow.com/users/6860740/sogloarcadius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1474491961, "answer_count": 1, "score": 0, "last_activity_date": 1474492421, "creation_date": 1474491617, "last_edit_date": 1474492421, "question_id": 39626502, "link": "https://stackoverflow.com/questions/39626502/can-anybody-explain-me-why-am-i-getting-some-erros-with-the-following-python-cod", "closed_reason": "Duplicate", "title": "Can anybody explain me why am i getting some erros with the following python code?", "body": "<p>Can anybody explain me why am I getting some errors with the following python code?\nThe loop removes two tuple but one still in the list after the loop end.\nThe print at the end is not the result i am expected.</p>\n\n<pre><code>&gt;&gt;&gt; liste=[(1,2),(2,3),(3,1),(1,4),(3,4)]\n&gt;&gt;&gt; for couple in liste:\n...    if int(1) in couple:\n...        liste.remove(couple)\n... \n&gt;&gt;&gt; print(liste)\n[(2, 3), (1, 4), (3, 4)]\n</code></pre>\n"}, {"tags": ["python", "wxpython"], "owner": {"reputation": 9, "user_id": 6860717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f21631f8e712a090aa236de35b470dc9?s=128&d=identicon&r=PG&f=1", "display_name": "BRIAN ERICK MUNIVE PEREZ", "link": "https://stackoverflow.com/users/6860717/brian-erick-munive-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1474537036, "creation_date": 1474491554, "last_edit_date": 1474537036, "question_id": 39626483, "link": "https://stackoverflow.com/questions/39626483/how-to-connect-wxpython-with-openpyxl", "title": "How to connect wxpython with openpyxl?", "body": "<p>I am trying to use a button to show the information in every cell in a Excel file.</p>\n\n<p>Here's my code, the button has to change between cells to show me the information.</p>\n\n<p>I open the file to see the first cell, but then I can't change the cell. <code>onG</code> and <code>onf</code> are the buttons to change between cells.  </p>\n\n<pre><code>    def OnOpen(self,e):\n        dlg = wx.FileDialog(self, \"Choose a file\", self.dirname, \"\", \"*.*\", wx.OPEN )\n        if dlg.ShowModal() == wx.ID_OK:\n            self.filename=dlg.GetFilename()\n            self.dirname=dlg.GetDirectory()\n            wb = load_workbook(os.path.join(self.dirname, self.filename),'r')\n            sheet_ranget= wb['Tabelle3']\n\n            y = \"A\" \n            y1 = y + \"2\" \n            #y2\n\n            #y3\n            #y4\n            #y5\n            #y6\n            #y7\n            #y8\n\n            Ax = sheet_ranget['A1'].value\n            A1 = sheet_ranget[y1].value\n            Bx = sheet_ranget['B1'].value\n            B1 = sheet_ranget['B2'].value\n            Dx = sheet_ranget['D1'].value\n            D1 = sheet_ranget['D2'].value\n            Ex = sheet_ranget['E1'].value\n            E1 = sheet_ranget['E2'].value\n            Fx = sheet_ranget['F1'].value\n            F1 = sheet_ranget['F2'].value\n            Gx = sheet_ranget['G1'].value\n            G1 = sheet_ranget['G2'].value\n            Hx = sheet_ranget['H1'].value\n            H1 = sheet_ranget['H2'].value\n            Ix = sheet_ranget['I1'].value\n            I1 = sheet_ranget['I2'].value\n            #Jx = sheet_ranget['J1'].value\n            #J1 = sheet_ranget['J2'].value\n            a= \"\\n\\n\"\n            b= \"\\t\"\n            c=\":\"\n            d=\"Test Case Name\"\n            e=\"...\"\n            f= \"NO-\"\n            g = \"*\"\n            h = \"-\"\n            I = \"Theme\" \n\n            #------------------------------------contador inicial\n            AA=sheet_ranget['N1'].value\n            BB=sheet_ranget['N2'].value\n            CC=sheet_ranget['N3'].value\n            DD=sheet_ranget['N4'].value\n            EE=sheet_ranget['N5'].value\n            FF=sheet_ranget['N7'].value\n            GG=sheet_ranget['N8'].value\n            HH=sheet_ranget['N9'].value\n            II=sheet_ranget['N11'].value\n            JJ=sheet_ranget['N12'].value\n            KK=sheet_ranget['N14'].value\n            LL=sheet_ranget['N15'].value\n\n            #---------------------------------------Valores negativos\n            AN = sheet_ranget['O4'].value\n            BN = sheet_ranget['O5'].value\n            CN = sheet_ranget['O7'].value\n            DN = sheet_ranget['O8'].value\n            EN = sheet_ranget['O9'].value\n            FN = sheet_ranget['O11'].value\n            GN = sheet_ranget['O12'].value\n            HN = sheet_ranget['O14'].value\n            IN = sheet_ranget['O15'].value\n\n            #---------------------------------------valores negativos\n            self.PQ25I.SetValue(AN)\n            self.PQ35I.SetValue(BN)\n            self.CTVW250_I.SetValue(IN)\n            self.CTVW324_I.SetValue(CN)\n            self.CTVW325_I.SetValue(DN)\n            self.CTVW361_I.SetValue(EN)\n\n            self.CTVW360_I.SetValue(HN)\n            self.CTVW361_II.SetValue(FN)\n            self.CTVW411_I.SetValue(GN)\n\n            #---------------------------------------valores positivos\n            self.TC.SetValue(AA)\n            self.TVC.SetValue(BB)\n            self.TIC.SetValue(CC)\n            self.P25v.SetValue(DD)\n            self.P35v.SetValue(EE)\n            self.CTVW250.SetValue(LL)\n            self.CTVW324.SetValue(FF)\n            self.CTVW325.SetValue(GG)\n            self.CTVW361.SetValue(HH)\n            self.CTVW360.SetValue(KK)\n            self.CTVW361_35.SetValue(II)\n            self.CTVW411.SetValue(JJ)\n\n            self.logger.SetValue(Ax+c+b+A1+a+I+c+b+a+D1+a+Ex+a+E1+a+Fx+a+F1+a+Gx+a+G1+a+Hx+a+H1+a+Ix+a+I1)\n\n            #wb.close()\n            self.SetTitle(self.filename)\n            #bool(sheet_ranget.values)\n\n        dlg.Destroy()\n\n    def OnSave(self,e):\n        self.dirname = \"\"\n        dlg = wx.FileDialog(self, \"Save Operation File\", self.dirname, \"\",\n        \"XML (*.xml)|*.xml| TXT (*.txt)|*.txt|EXCEL (*.xls)|*.xls|All Files (*.*)|*.*\", wx.SAVE|wx.OVERWRITE_PROMPT)\n        if dlg.ShowModal() == wx.ID_OK:\n            itcontains = self.loggerb.GetValue()\n            self.filename=dlg.GetFilename()\n            self.dirname=dlg.GetDirectory()\n            filehandle=open(os.path.join(self.dirname, self.filename),'w')\n            filehandle.write(itcontains)\n            filehandle.close()\n        dlg.Destroy()\n\n    def OnSaveN(self,e):\n        self.dirname = \"\"\n        dlg = wx.FileDialog(self, \"Save Operation File\", self.dirname, \"\",\"EXCEL (*.xls)|*.xls*\", wx.SAVE|wx.OVERWRITE_PROMPT)\n        if dlg.ShowModal() == wx.ID_OK:\n            iontains = self.loggerb.GetValue()\n            self.filename=dlg.GetFilename()\n            self.dirname=dlg.GetDirectory()\n            filehandle=open(os.path.join(self.dirname, self.filename),'w')\n            filehandle.write(str(iontains))\n            filehandle.close()\n        dlg.Destroy()\n\n    def OnExit(self,e):\n        igot = self.doiexit.ShowModal() \n        if igot == wx.ID_YES:\n            self.Close(True)\n\n    def OnF(self, event):\n          self.logger.Clear()\n\n    def OnG(self, event):\n          self.logger.Clear()\n\nview = MyApp\napp = MyApp(0)\napp.MainLoop()\n\n#self.Show(True)\n</code></pre>\n"}, {"tags": ["python", "audio", "aubio"], "answers": [{"tags": [], "owner": {"reputation": 400, "user_id": 2118678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/839441d9ae267a562900287617a6af6e?s=128&d=identicon&r=PG", "display_name": "piem", "link": "https://stackoverflow.com/users/2118678/piem"}, "is_accepted": false, "score": 1, "last_activity_date": 1483959774, "creation_date": 1483959774, "answer_id": 41546550, "question_id": 39626465, "link": "https://stackoverflow.com/questions/39626465/analyze-sound-live-with-aubio/41546550#41546550", "title": "Analyze sound live with aubio?", "body": "<p>See <a href=\"https://github.com/aubio/aubio/issues/78\" rel=\"nofollow noreferrer\">https://github.com/aubio/aubio/issues/78</a> and <a href=\"https://github.com/aubio/aubio/issues/6\" rel=\"nofollow noreferrer\">https://github.com/aubio/aubio/issues/6</a></p>\n\n<p>Demo here: <a href=\"https://github.com/aubio/aubio/blob/master/python/demos/demo_pyaudio.py\" rel=\"nofollow noreferrer\">https://github.com/aubio/aubio/blob/master/python/demos/demo_pyaudio.py</a> </p>\n\n<p>Please open a new issue whenever you have a question, or use <a href=\"https://aubio.org/contact\" rel=\"nofollow noreferrer\">https://aubio.org/contact</a></p>\n"}], "owner": {"reputation": 258, "user_id": 6181778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/35fb00a2c9f0bd6ab5f9b31b190e2f0f?s=128&d=identicon&r=PG", "display_name": "cat40", "link": "https://stackoverflow.com/users/6181778/cat40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1483959774, "creation_date": 1474491471, "last_edit_date": 1474552373, "question_id": 39626465, "link": "https://stackoverflow.com/questions/39626465/analyze-sound-live-with-aubio", "title": "Analyze sound live with aubio?", "body": "<p>Is there any way for the aubio library to analyze sound <strong>live</strong>? I can get it to analyze a saved audio file just fine, but it does not seem to want to work with microphone inputs. Documentation for the Python library seems just about non-existent. All I found were <a href=\"https://github.com/aubio/aubio/tree/master/python/demos\" rel=\"nofollow\">these</a> examples, none of which seem to deal with analysis of live input. Has anyone managed to work with live input before, and how is it done?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 1, "creation_date": 1474491614, "post_id": 39626439, "comment_id": 66558295, "body": "Why do they need to be variables? Why can&#39;t you use a dictionary keyed by the name instead?"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1474491616, "post_id": 39626439, "comment_id": 66558299, "body": "Use a dictionary."}, {"owner": {"reputation": 836, "user_id": 1474727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41068ad3501beb3e85fb387f4063233a?s=128&d=identicon&r=PG", "display_name": "burhan", "link": "https://stackoverflow.com/users/1474727/burhan"}, "edited": false, "score": 1, "creation_date": 1474491682, "post_id": 39626439, "comment_id": 66558329, "body": "Yes, why not use a dictionary"}, {"owner": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "edited": false, "score": 0, "creation_date": 1474491738, "post_id": 39626439, "comment_id": 66558359, "body": "I thought dictionaries were constructed by many unique <code>key:value</code> pairs. I need lots of values stored in one list (eventually to create a separate excel file for each list)... Or am I misunderstanding how dictionaries work? Could I have <code>{str1: 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3}</code>? or <code>{str1: [1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3]}</code>. If so how would I set that up?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1474492026, "post_id": 39626439, "comment_id": 66558516, "body": "The value can be a list."}, {"owner": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "edited": false, "score": 0, "creation_date": 1474492186, "post_id": 39626439, "comment_id": 66558616, "body": "I did not know the value could be a list. So the latter example in my comment would work. Ha! Turns out all those answers saying &quot;use a dictionary&quot; were all on to something! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "edited": false, "score": 0, "creation_date": 1474495415, "post_id": 39626943, "comment_id": 66560078, "body": "Thanks! I was using just using Pandas to read data in from Excel, but I&#39;ll use the <code>csv</code> module from now on for simple things."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "reply_to_user": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "edited": false, "score": 0, "creation_date": 1474496716, "post_id": 39626943, "comment_id": 66560517, "body": "You can <a href=\"http://stackoverflow.com/a/35745283/344286\">read them without using pandas</a>, though if you have Pandas there&#39;s nothing wrong with using it to read your excel file, I&#39;m sure."}], "tags": [], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "is_accepted": false, "score": 1, "last_activity_date": 1474493730, "creation_date": 1474493730, "answer_id": 39626943, "question_id": 39626439, "link": "https://stackoverflow.com/questions/39626439/appropriate-time-to-dynamically-set-variable-names/39626943#39626943", "title": "Appropriate Time to Dynamically Set Variable Names?", "body": "<p>So, like this?</p>\n\n<pre><code>import collections\nimport csv\nimport io\n\nreader = csv.DictReader(io.StringIO('''\nweek,str1,str2,str3\n1,8,2,5\n2,1,0,3\n3,2,1,1\n'''.strip()))\n\ndata = collections.defaultdict(list)\nfor row in reader:\n    for key in ('str1', 'str2', 'str3'):\n        data[key].extend([row['week']]*int(row[key]))\n\nfrom pprint import pprint\npprint(dict(data))\n\n# Output:\n{'str1': ['1', '1', '1', '1', '1', '1', '1', '1', '2', '3', '3'],\n 'str2': ['1', '1', '3'],\n 'str3': ['1', '1', '1', '1', '1', '2', '2', '2', '3']}\n</code></pre>\n\n<p>Note: Pandas is good for crunching data and doing some interesting operations on it, but if you just need something simple you don't need it. This is one of those cases.</p>\n"}], "owner": {"reputation": 2332, "user_id": 5319229, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe016d5983a221686cebf48bc87769f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/5319229/rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474493730, "creation_date": 1474491346, "last_edit_date": 1474492965, "question_id": 39626439, "link": "https://stackoverflow.com/questions/39626439/appropriate-time-to-dynamically-set-variable-names", "title": "Appropriate Time to Dynamically Set Variable Names?", "body": "<p>Edit: Turns out the answer is an emphatic \"no\". However, I'm still struggling to populate the lists with the right amount of entries. </p>\n\n<hr>\n\n<p>I've been searching StackOverflow all over for this, and I keep seeing that dynamically setting variable names is not a good solution. However, I can't think of another way to to this. </p>\n\n<p>I have a <code>DataFrame</code> created from <code>pandas</code> (read in from excel) that has columns with string headers and integer entries, and one column that has the numbers (let's call it Week) 1 through 52 increasing sequentially. What I want to do is create separate lists each named for the column headers and the entry is the week number appearing the number of times of the listed integer. </p>\n\n<p>This is simple for a few columns, just manually create lists names, but as the number of columns grows, this could get a little out of hand.</p>\n\n<p>Atrocious explanation, it was the best I could come up with. Hopefully a simplified example will clarify. </p>\n\n<pre><code>week  str1    str2    str3   \n1       8       2        5        \n2       1       0        3    \n3       2       1        1 \n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>str1_count = [1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3] # eight 1's, one 2, and two 3's\nstr2_count = [1, 1, 3]                         # two 1's, one 3\nstr3_count = [1, 1, 1, 1, 1, 2, 2, 2, 3]       # five 1's, three 2's, one 3\n</code></pre>\n\n<p>What I have so far: </p>\n\n<pre><code>results = {}\ndf = pd.DataFrame(from_csv(...., sep = \",\"))\nfor key in df:\n    for i in df[key]\n        results[key] = i # this only creates a list with the int value of the most recent i\n</code></pre>\n"}, {"tags": ["python", "numpy", "histogram", "entropy"], "comments": [{"owner": {"reputation": 2658, "user_id": 3349443, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/407d43917bc8cd73884db65498d1563d?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/3349443/mahdi"}, "edited": false, "score": 0, "creation_date": 1474499140, "post_id": 39626432, "comment_id": 66561146, "body": "Obviously, the problem is <code>log(0)</code> in undefined. But why do you use <code>range=(-20,20)</code>? I don&#39;t think <code>np.random.normal(mu2, sigma2, 100000)</code> produces any negative number! Anyway, as long as there are no points in some of the bins, you&#39;ll get this error!"}, {"owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "reply_to_user": {"reputation": 2658, "user_id": 3349443, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/407d43917bc8cd73884db65498d1563d?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/3349443/mahdi"}, "edited": false, "score": 0, "creation_date": 1474500784, "post_id": 39626432, "comment_id": 66561518, "body": "Hey! Thanks! I got it sorted out. I used to trim out all the 0 data!"}, {"owner": {"reputation": 2658, "user_id": 3349443, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/407d43917bc8cd73884db65498d1563d?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/3349443/mahdi"}, "edited": false, "score": 0, "creation_date": 1474500957, "post_id": 39626432, "comment_id": 66561562, "body": "You&#39;re welcome! That&#39;s a good solution! If you think my answer helped, please accept the answer so the question will be marked!"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1521123458, "post_id": 39626432, "comment_id": 85605426, "body": "Why do you use <code>abs</code>? The result of histogram should always be positive"}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474493417, "post_id": 39626753, "comment_id": 66559204, "body": "Thank you Mahdi for the answer! However, for me it is returning             RuntimeWarning: divide by zero encountered in log   ent = -(i<i>np.log(abs(i))).sum() RuntimeWarning: invalid value encountered in double_scalars   ent = -(i</i>np.log(abs(i))).sum() nan"}, {"owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474493493, "post_id": 39626753, "comment_id": 66559249, "body": "and for the for loop, I get math domain error? What would be the problem?"}, {"owner": {"reputation": 2658, "user_id": 3349443, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/407d43917bc8cd73884db65498d1563d?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/3349443/mahdi"}, "reply_to_user": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474493748, "post_id": 39626753, "comment_id": 66559357, "body": "@JinJeon: Could you produce a new set of <code>s1</code> values and repeat the above code? It seems some numbers are too close to zero."}, {"owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474494464, "post_id": 39626753, "comment_id": 66559682, "body": "hmm I&#39;m still trying, and tried your version but still returns the same nan problem and math domain error."}, {"owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474494732, "post_id": 39626753, "comment_id": 66559817, "body": "Oh hmm weird. So if I try it on terminal and write it all manually again, it works. but whenever I import my .py file it shows the same error hmm :S"}, {"owner": {"reputation": 2658, "user_id": 3349443, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/407d43917bc8cd73884db65498d1563d?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/3349443/mahdi"}, "reply_to_user": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474497606, "post_id": 39626753, "comment_id": 66560764, "body": "Maybe showing the whole code would help. Could you please update your question!?"}, {"owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "edited": false, "score": 0, "creation_date": 1474498075, "post_id": 39626753, "comment_id": 66560899, "body": "Hey yep. I just attached my actual code. Didn&#39;t try to post the actual one, but I kept having issues so. Would really appreciate if you could help me out!"}], "tags": [], "owner": {"reputation": 2658, "user_id": 3349443, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/407d43917bc8cd73884db65498d1563d?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/3349443/mahdi"}, "is_accepted": true, "score": 8, "last_activity_date": 1474493851, "last_edit_date": 1474493851, "creation_date": 1474492762, "answer_id": 39626753, "question_id": 39626432, "link": "https://stackoverflow.com/questions/39626432/how-to-calculate-entropy-from-np-histogram/39626753#39626753", "title": "how to calculate entropy from np histogram", "body": "<p>You can calculate the entropy using vectorized code:</p>\n\n<pre><code>import numpy as np\n\nmu1 = 10\nsigma1 = 10\n\ns1 = np.random.normal(mu1, sigma1, 100000)\nhist1 = np.histogram(s1, bins=50, range=(-10,10), density=True)\ndata = hist1[0]\nent = -(data*np.log(np.abs(data))).sum()\n# output: 7.1802159512213191\n</code></pre>\n\n<p>But if you like to use a for loop, you may write:</p>\n\n<pre><code>import numpy as np\nimport math\n\nmu1 = 10\nsigma1 = 10\n\ns1 = np.random.normal(mu1, sigma1, 100000)\nhist1 = np.histogram(s1, bins=50, range=(-10,10), density=True)\nent = 0\nfor i in hist1[0]:\n    ent -= i * math.log(abs(i))\nprint (ent)\n# output: 7.1802159512213191\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1305, "user_id": 8748308, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d381645435bac3e6d4c7d041f6c9e93d?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hendry", "link": "https://stackoverflow.com/users/8748308/a-hendry"}, "is_accepted": false, "score": 1, "last_activity_date": 1512887369, "creation_date": 1512887369, "answer_id": 47736486, "question_id": 39626432, "link": "https://stackoverflow.com/questions/39626432/how-to-calculate-entropy-from-np-histogram/47736486#47736486", "title": "how to calculate entropy from np histogram", "body": "<p>Use <code>np.ma.log</code> to avoid inf and nan errors. <code>np.ma</code> is a masked numpy array.</p>\n"}, {"tags": [], "owner": {"reputation": 3022, "user_id": 4511978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7XW8u.jpg?s=128&g=1", "display_name": "fr_andres", "link": "https://stackoverflow.com/users/4511978/fr-andres"}, "is_accepted": false, "score": 1, "last_activity_date": 1615120939, "last_edit_date": 1615120939, "creation_date": 1520998030, "answer_id": 49269284, "question_id": 39626432, "link": "https://stackoverflow.com/questions/39626432/how-to-calculate-entropy-from-np-histogram/49269284#49269284", "title": "how to calculate entropy from np histogram", "body": "<p>So for the ultimate copypaste experience, I just merged both existing answers (thank you all) into a more comprehensive numpy-native approach. Hope it helps!</p>\n<pre><code>def entropy(hist, bit_instead_of_nat=False):\n    &quot;&quot;&quot;\n    given a list of positive values as a histogram drawn from any information source,\n    returns the entropy of its probability mass function. Usage example:\n      hist = [513, 487] # we tossed a coin 1000 times and this is our histogram\n      print entropy(hist, True)  # The result is approximately 1 bit\n      hist = [-1, 10, 10]; hist = [0] # this kind of things will trigger the warning\n    &quot;&quot;&quot;\n    h = np.asarray(hist, dtype=np.float64)\n    if h.sum()&lt;=0 or (h&lt;0).any():\n        print &quot;[entropy] WARNING, malformed/empty input %s. Returning None.&quot;%str(hist)\n        return None\n    h = h/h.sum()\n    log_fn = np.ma.log2 if bit_instead_of_nat else np.ma.log\n    return -(h*log_fn(h)).sum()\n</code></pre>\n<p><strong>Note:</strong> Probability density function and probability mass function behave differently on discrete histograms, depending on the size of the bins. See the <a href=\"https://numpy.org/doc/stable/reference/generated/numpy.histogram.html\" rel=\"nofollow noreferrer\">np.histogram</a> docstring:</p>\n<blockquote>\n<p>density : bool, optional</p>\n<p>If False, the result will contain the number of samples in each bin.\nIf True, the result is the value of the probability density function\nat the bin, normalized such that the integral over the range is 1.\nNote that the sum of the histogram values will not be equal to 1\nunless bins of unity width are chosen; it is not a probability mass\nfunction.</p>\n<p>Overrides the normed keyword if given.</p>\n</blockquote>\n"}], "owner": {"reputation": 325, "user_id": 6412513, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd1a745b5d404c0f50dbdaa77c826170?s=128&d=identicon&r=PG&f=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/6412513/vinci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5465, "favorite_count": 0, "accepted_answer_id": 39626753, "answer_count": 3, "score": 4, "last_activity_date": 1615120939, "creation_date": 1474491330, "last_edit_date": 1474498036, "question_id": 39626432, "link": "https://stackoverflow.com/questions/39626432/how-to-calculate-entropy-from-np-histogram", "title": "how to calculate entropy from np histogram", "body": "<p>I have an example of a histogram with:</p>\n\n<pre><code>mu1 = 10, sigma1 = 10\ns1 = np.random.normal(mu1, sigma1, 100000)\n</code></pre>\n\n<p>and calculated </p>\n\n<pre><code>hist1 = np.histogram(s1, bins=50, range=(-10,10), density=True)\nfor i in hist1[0]:\n    ent = -sum(i * log(abs(i)))\nprint (ent)\n</code></pre>\n\n<p>Now I want to find the entropy from the given histogram array, but since np.histogram returns two arrays, I'm having trouble calculating the entropy. How can I just call on first array of np.histogram and calculate entropy? I would also get math domain error for the entropy even if my code above is correct. :( </p>\n\n<p>**Edit:\nHow do I find entropy when Mu = 0? and log(0) yields math domain error?</p>\n\n<hr>\n\n<p>So the actual code I'm trying to write is: </p>\n\n<pre><code>mu1, sigma1 = 0, 1\nmu2, sigma2 = 10, 1\ns1 = np.random.normal(mu1, sigma1, 100000)\ns2 = np.random.normal(mu2, sigma2, 100000)\n\nhist1 = np.histogram(s1, bins=100, range=(-20,20), density=True)\ndata1 = hist1[0]\nent1 = -(data1*np.log(np.abs(data1))).sum() \n\nhist2 = np.histogram(s2, bins=100, range=(-20,20), density=True)\ndata2 = hist2[0]\nent2 = -(data2*np.log(np.abs(data2))).sum() \n</code></pre>\n\n<p>So far, the first example ent1 would yield nan, and the second, ent2, yields math domain error :(</p>\n"}, {"tags": ["python", "numpy", "optimization", "scipy"], "comments": [{"owner": {"reputation": 447, "user_id": 2595461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NqtNx.png?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/2595461/sergey"}, "edited": false, "score": 1, "creation_date": 1474493679, "post_id": 39626431, "comment_id": 66559324, "body": "In objective function you use only 3 parameters: x[1], x[12], x[3], in constraints 17, in initial conditions 18. If you expect some effect from constraints  you should use the same parameters in objective function and constraints. Try to make it work at least without constraints , and then add one by one."}, {"owner": {"reputation": 1, "user_id": 6860738, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154535314374913/picture?type=large", "display_name": "Sean Lauderdale King", "link": "https://stackoverflow.com/users/6860738/sean-lauderdale-king"}, "reply_to_user": {"reputation": 447, "user_id": 2595461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NqtNx.png?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/2595461/sergey"}, "edited": false, "score": 0, "creation_date": 1474722910, "post_id": 39626431, "comment_id": 66653729, "body": "@SergeyIvanov thank you! Would I have to use simultaneous equations in func, and then just use the inequalities as bounds for optimization?"}], "owner": {"reputation": 1, "user_id": 6860738, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154535314374913/picture?type=large", "display_name": "Sean Lauderdale King", "link": "https://stackoverflow.com/users/6860738/sean-lauderdale-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474491530, "creation_date": 1474491326, "last_edit_date": 1474491530, "question_id": 39626431, "link": "https://stackoverflow.com/questions/39626431/how-would-i-include-the-inequalities-in-this-optimization", "title": "How would I include the inequalities in this optimization?", "body": "<p>I'm using scipy.optimize.minimize to minimize the drag on the wings of an airplane based on 18 total equations. I have 10 constraints as well on the 18 variables. When I run the code, I get the error message</p>\n\n<blockquote>\n  <p>ValueError: all the input array dimensions except for the concatenation axis must match exactly</p>\n</blockquote>\n\n<p>I'm thinking this is because the size of the constraints array and the size of the variable array are different; however, I'm not sure the best way to include the constraints on existing variables using something similar.</p>\n\n<pre><code>from __future__ import division\nimport os\nimport numpy as np\nimport scipy as sp\nfrom scipy.optimize import minimize\nimport matplotlib.pyplot as plt\n\nnp.set_printoptions(suppress=True)\nos.system('clear')\n\nS = 6\nW = 10\nrho = 0.0023769                                                                                \nmu = 3.38*10**(-7)\n\ndef func(x):\n    \"\"\" Drag function to minimize \"\"\"\n    return (1/2)*rho*x[1]**2*x[12]*x[3]\n\n\ndef func_deriv(x):\n\n    dDdv = rho*x[1]*x[12]*x[3]\n    dDdCD = (1/2)*rho*x[1]**2*x[3]\n    dDdS = (1/2)*rho*x[1]**2*x[12]\n    return np.array([ dDdv, dDdCD, dDdS ])\n\n\n# Put the constraints here\ncons = ({'type': 'eq', # Calculates the required lift coefficient, CL [-]\n     'fun' : lambda x: np.array([x[0] - 2*W/(rho*x[1]**2*x[3])]),\n     'jac' : lambda x: np.array([1,(4*W)/(rho*x[1]**3*x[3]),0,(2*W)/(rho*x[1]**2*x[3]**2),0,0,0,0,0,0,0,0,0,0,0,0,0,0])},\n    {'type': 'eq', # Calculates FAA ground speed, vFAA [ft/s]\n     'fun' : lambda x: np.array([x[1] - x[2]*np.cos(x[13])]),\n     'jac' : lambda x: np.array([0,1,-np.cos(x[13]),0,0,0,0,0,0,0,0,0,0,x[2]*np.sin(x[13]),0,0,0,0])},\n    {'type': 'eq', # Calculates the span, b [ft]\n     'fun' : lambda x: np.array([x[4] - x[3]/((1+x[14])*x[5])]),\n     'jac' : lambda x: np.array([0,0,0,-1/((1+x[14])*x[5]),1,x[3]/((1+x[14])*x[5]**2),0,0,0,0,0,0,0,0,0,x[3]/((1+x[14])**2*x[5]),0,0])},\n    {'type': 'eq', # Calculates the tip chord, ct [ft]\n     'fun' : lambda x: np.array([x[6] - x[14]*x[5]]),\n     'jac' : lambda x: np.array([0,0,0,0,0,-x[14],1,0,0,0,0,0,0,0,-x[5],0,0,0])},\n    {'type': 'eq', # Calculates the Reynolds Number, Re [-]\n     'fun' : lambda x: np.array([x[7] - (rho*x[1]*x[6])/mu]),\n     'jac' : lambda x: np.array([0,-(rho*x[6])/mu,0,0,0,0,-(rho*x[1])/mu,1,0,0,0,0,0,0,0,0,0,0])},\n    {'type': 'eq', # Calculates the FAA wing area, S [ft^2]\n     'fun' : lambda x: np.array([x[3] - 1838*W/(x[2]**2)]),\n     'jac' : lambda x: np.array([0,0,3676*W/x[3]**3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},\n    {'type': 'eq', # Calculates the induced drag coefficient, CDi [-]\n     'fun' : lambda x: np.array([x[10] - x[0]**2/(np.pi*x[9]*x[8])]),\n     'jac' : lambda x: np.array([(-2*x[0])/(np.pi*x[9]*x[8]),0,0,0,0,0,0,0,x[0]**2/(np.pi*x[9]*x[8]**2),x[0]**2/(np.pi*x[9]**2*x[8]),1,0,0,0,0,0,0,0])},\n    {'type': 'eq', # Calculates the parasitic drag coefficient, CDo [-]\n     'fun' : lambda x: np.array([x[10] - x[11]]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,1,-1,0,0,0,0,0,0])},\n    {'type': 'eq', # Calculates the aspect ratio, [-]\n     'fun' : lambda x: np.array([x[9] - x[4]**2 / x[3]]),\n     'jac' : lambda x: np.array([0,0,0,x[4]**2/x[3]**2,-2*x[4] / x[3],0,0,0,0,1,0,0,0,0,0,0,0,0])},\n    {'type': 'eq', # Calculates the total drag coefficient, CDt [-]\n     'fun' : lambda x: np.array([x[12] - x[10] - x[11]]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,-1,-1,1,0,0,0,0,0])},\n    {'type': 'eq',\n     'fun' : lambda x: np.array([x[1] - (4/(np.pi*x[9]*x[8]*x[11]))**(1/4)*np.sqrt((W/x[5])/rho)]),\n     'jac' : lambda x: np.array([0,1,0,0,0, \\\n                                 (-W*(1/(x[9]*x[8]*x[11])))/(np.sqrt(2)*np.pi**(1/4)*rho*x[5]**2*np.sqrt(W/(rho*x[5]))), \\\n                                 0,0, \\\n                                 -np.sqrt(W/(rho*x[5]))/(2*np.sqrt(2)*np.pi**(1/4)*x[9]*x[8]**2*x[11]*(1/x[9]*x[8]*x[11])**(3/4)), \\\n                                 -np.sqrt(W/(rho*x[5]))/(2*np.sqrt(2)*np.pi**(1/4)*x[8]*x[9]**2*x[11]*(1/x[9]*x[8]*x[11])**(3/4)),\n                                 0, \\\n                                 -np.sqrt(W/(rho*x[5]))/(2*np.sqrt(2)*np.pi**(1/4)*x[9]*x[11]**2*x[8]*(1/x[9]*x[8]*x[11])**(3/4)), \\\n                                 0,0,0,0,0,0])},\n    {'type': 'eq', # Calculates the quarter chord sweep angle [rad]\n     'fun' : lambda x: np.array([x[17] - np.arctan((.25*(x[6]-x[5]) + x[4]*np.tan(x[13]))/x[4])]),\n     'jac' : lambda x: np.array([0,0,0,0,\\\n                                 -((np.tan(x[13])/x[4])-(x[4]*np.tan(x[13])+0.25*(x[6]-x[5]))/(x[4]**2))/((x[4]*np.tan(x[13])+0.25*(x[6]-x[5]))**2/(x[4]**2)+1), \\\n                                 0.25/(x[4]*((x[4]*np.tan(x[13])+0.25*(x[6]-x[5]))**2/(x[4]**2)+1)), \\\n                                 -0.25/(x[4]*((x[4]*np.tan(x[13])+0.25*(x[6]-x[5]))**2/(x[4]**2)+1)), \\\n                                 0,0,0,0,0,0,\\\n                                 -(1/np.cos(x[13]))/((x[4]*np.tan(x[13])+0.25*(x[6]-x[5]))**2/(x[4]**2)+1), \\\n                                 0,0,0,1])},\n    {'type': 'eq', # Calculates the change in taper ratio [-]\n     'fun' : lambda x: np.array([x[15] + 0.357 - 0.45*np.exp(0.0375*x[17])]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,-0.016875*np.exp(0.0375*x[17])])},\n    {'type': 'eq', # Calculates the Nita function for e\n     'fun' : lambda x: np.array([x[16] - 0.0524*(x[14]-x[15])**4 - 0.1500*(x[14]-x[15])**3 + 0.1659*(x[14]-x[15])**2 - 0.0706*(x[14]-x[15]) + 0.0119]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,0,0,0,0, \\\n                                 0.2096*(x[14]-x[15])**3 - 0.45*(x[14]-x[15])**2 + 0.3318*(x[14]-x[15]) - 0.0706, \\\n                                 -0.2096*(x[14]-x[15])**3 + 0.45*(x[14]-x[15])**2 - 0.3318*(x[14]-x[15]) + 0.0706,\n                                 1,0])},\n    {'type': 'eq', # Calculates the Oswald efficiency factor, e [-]\n     'fun' : lambda x: np.array([x[8] - 1/(1+x[16]*x[9])]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,1,1/(1+x[16]*x[9]**2), \\\n     0,0,0,0,0,0,1/(1+x[16]**2*x[9]),0])},\n    {'type':'ineq', # Ensures that sweep &gt; 0\n     'fun' : lambda x: np.array([x[14]]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0])},\n    {'type':'ineq', # Ensures that sweep &lt; 1.1\n     'fun' : lambda x: np.array([np.pi/4 - x[0]]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,0])},\n    {'type':'ineq', # Ensures that CL &gt; 0\n     'fun' : lambda x: np.array([x[0]]),\n     'jac' : lambda x: np.array([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},\n    {'type':'ineq', # Ensures that CL &lt; 1.1\n     'fun' : lambda x: np.array([1.1 - x[0]]),\n     'jac' : lambda x: np.array([-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},\n    {'type':'ineq', # Ensures that tr &gt; 0.2\n     'fun' : lambda x: np.array([x[14] - 0.2]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0])},\n    {'type':'ineq', # Ensures that tr &lt; 1\n     'fun' : lambda x: np.array([1 - x[14]]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0])},\n    {'type':'ineq', # Ensures that ground speed &gt; 25 kts\n     'fun' : lambda x: np.array([x[2] - 42.2]),\n     'jac' : lambda x: np.array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},\n    {'type':'ineq', # Ensures tha A &gt; 4\n     'fun' : lambda x: np.array([x[9] - 4]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0])},\n    {'type':'ineq', # Ensures tha A &lt; 20\n     'fun' : lambda x: np.array([20 - x[9]]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,0,0,0])},\n    {'type': 'ineq', # Set Re &gt; 100k to avoid Reynold's drag\n     'fun' : lambda x: np.array([x[7]-100000]),\n     'jac' : lambda x: np.array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0])})\n\n\nres = minimize(func, [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], args=(), jac=func_deriv,\n           constraints=cons, method='SLSQP', options={'disp': True})\n\n\nprint res.x\n</code></pre>\n\n<p>I'm newer to coding, so this might be completely wrong, but I'm pretty sure that it's close.</p>\n"}, {"tags": ["python", "python-xarray"], "answers": [{"comments": [{"owner": {"reputation": 15970, "user_id": 210945, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/20cb8dcc17ad4334c0f8cb1ddc28bcd0?s=128&d=identicon&r=PG", "display_name": "naught101", "link": "https://stackoverflow.com/users/210945/naught101"}, "edited": false, "score": 0, "creation_date": 1565757263, "post_id": 39627264, "comment_id": 101446911, "body": "This is now fixed, you should update your answer, @shoyer! Thank you, and fujiisoup, for your hard work :)"}, {"owner": {"reputation": 6680, "user_id": 484488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3816bd03efefc4a508ed3e3a84c7ba68?s=128&d=identicon&r=PG", "display_name": "jmilloy", "link": "https://stackoverflow.com/users/484488/jmilloy"}, "reply_to_user": {"reputation": 15970, "user_id": 210945, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/20cb8dcc17ad4334c0f8cb1ddc28bcd0?s=128&d=identicon&r=PG", "display_name": "naught101", "link": "https://stackoverflow.com/users/210945/naught101"}, "edited": false, "score": 0, "creation_date": 1566231330, "post_id": 39627264, "comment_id": 101582644, "body": "@naught101 can you post a new answer with a working example?"}], "tags": [], "owner": {"reputation": 7287, "user_id": 809705, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/93a76a800ef6c5919baa8ba91120ee98?s=128&d=identicon&r=PG", "display_name": "shoyer", "link": "https://stackoverflow.com/users/809705/shoyer"}, "is_accepted": false, "score": 4, "last_activity_date": 1474495436, "creation_date": 1474495436, "answer_id": 39627264, "question_id": 39626402, "link": "https://stackoverflow.com/questions/39626402/add-dimension-to-an-xarray-dataarray/39627264#39627264", "title": "add dimension to an xarray DataArray", "body": "<p>You've done a pretty thorough analysis of the current options, and indeed none of these are very clean.</p>\n\n<p>This would certainly be useful functionality to write for xarray, but nobody has gotten around to implementing it yet. Maybe you would be interested in helping out?</p>\n\n<p>See this GitHub issue for some API proposals: <a href=\"https://github.com/pydata/xarray/issues/170\" rel=\"nofollow\">https://github.com/pydata/xarray/issues/170</a></p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 9240176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04c046faca224ce0f5307e7037768d01?s=128&d=identicon&r=PG&f=1", "display_name": "susopeiz", "link": "https://stackoverflow.com/users/9240176/susopeiz"}, "edited": false, "score": 0, "creation_date": 1568814734, "post_id": 45064640, "comment_id": 102395377, "body": "Quick solution although it leads to lose the available attributes in x"}], "tags": [], "owner": {"reputation": 41, "user_id": 3776915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f12a19e58a1ae78f91d19fe6bdef6f?s=128&d=identicon&r=PG&f=1", "display_name": "hackz", "link": "https://stackoverflow.com/users/3776915/hackz"}, "is_accepted": false, "score": 4, "last_activity_date": 1499882317, "creation_date": 1499882317, "answer_id": 45064640, "question_id": 39626402, "link": "https://stackoverflow.com/questions/39626402/add-dimension-to-an-xarray-dataarray/45064640#45064640", "title": "add dimension to an xarray DataArray", "body": "<p>Because of the way that math is applied over new dimensions I like to multiply in order to add new dimensions.</p>\n\n<pre><code>identityb = xr.DataArray(np.ones_like(b_coords), coords=[('b', b_coords)])\ny = x * identityb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1346, "user_id": 2592560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hvb40.jpg?s=128&g=1", "display_name": "Q-man", "link": "https://stackoverflow.com/users/2592560/q-man"}, "is_accepted": true, "score": 3, "last_activity_date": 1590773757, "last_edit_date": 1590773757, "creation_date": 1570011296, "answer_id": 58199541, "question_id": 39626402, "link": "https://stackoverflow.com/questions/39626402/add-dimension-to-an-xarray-dataarray/58199541#58199541", "title": "add dimension to an xarray DataArray", "body": "<p>If <code>DA</code> is your data array with length <code>DimLen</code>, you can now use <code>expand_dims</code>:</p>\n\n<pre><code>DA.expand_dims({'NewDim':DimLen})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 9630700, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "chuaxr", "link": "https://stackoverflow.com/users/9630700/chuaxr"}, "is_accepted": false, "score": 1, "last_activity_date": 1576464872, "creation_date": 1576464872, "answer_id": 59350016, "question_id": 39626402, "link": "https://stackoverflow.com/questions/39626402/add-dimension-to-an-xarray-dataarray/59350016#59350016", "title": "add dimension to an xarray DataArray", "body": "<p>With reference to the syntax of the question:</p>\n\n<pre><code>y = x.expand_dims({\"b\": b_coords})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 619, "user_id": 6709902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tdujR.jpg?s=128&g=1", "display_name": "J.Warren", "link": "https://stackoverflow.com/users/6709902/j-warren"}, "is_accepted": false, "score": 1, "last_activity_date": 1590742015, "last_edit_date": 1590742015, "creation_date": 1588703211, "answer_id": 61620323, "question_id": 39626402, "link": "https://stackoverflow.com/questions/39626402/add-dimension-to-an-xarray-dataarray/61620323#61620323", "title": "add dimension to an xarray DataArray", "body": "<p>Using <code>.assign_coords</code> method will do it. However you can't assign coordinates to a non-existant dimension, the way to do as a one liner is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>y = x.expand_dims({b_coords.name: b_size}).assign_coords({b_coords.name: b_coords})\n</code></pre>\n"}], "owner": {"reputation": 6680, "user_id": 484488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3816bd03efefc4a508ed3e3a84c7ba68?s=128&d=identicon&r=PG", "display_name": "jmilloy", "link": "https://stackoverflow.com/users/484488/jmilloy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5725, "favorite_count": 5, "accepted_answer_id": 58199541, "answer_count": 5, "score": 9, "last_activity_date": 1590773757, "creation_date": 1474491210, "question_id": 39626402, "link": "https://stackoverflow.com/questions/39626402/add-dimension-to-an-xarray-dataarray", "title": "add dimension to an xarray DataArray", "body": "<p>I need to add a dimension to a <code>DataArray</code>, filling the values across the new dimension. Here's the original array.</p>\n\n<pre><code>a_size = 10\na_coords = np.linspace(0, 1, a_size)\n\nb_size = 5\nb_coords = np.linspace(0, 1, b_size)\n\n# original 1-dimensional array\nx = xr.DataArray(\n    np.random.random(a_size),\n    coords=[('a', a coords)])\n</code></pre>\n\n<p>I guess I could create an empty DataArray with the new dimension and copy the existing data in.</p>\n\n<pre><code>y = xr.DataArray(\n    np.empty((b_size, a_size),\n    coords=([('b', b_coords), ('a', a_coords)])\ny[:] = x\n</code></pre>\n\n<p>A better idea might be to be to use <code>concat</code>. It took me a while to figure out how to specify both the dims and the coords for the concat dimension, and none of these options seem great. Is there something I'm missing that can makes this version cleaner?</p>\n\n<pre><code># specify the dimension name, then set the coordinates\ny = xr.concat([x for _ in b_coords], 'b')\ny['b'] = b_coords\n\n# specify the coordinates, then rename the dimension\ny = xr.concat([x for _ in b_coords], b_coords)\ny.rename({'concat_dim': 'b'})\n\n# use a DataArray as the concat dimension\ny = xr.concat(\n    [x for _ in b_coords],\n    xr.DataArray(b_coords, name='b', dims=['b']))\n</code></pre>\n\n<p>Still, is there a better way to do this than either of the two above options?</p>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 1, "creation_date": 1474517467, "post_id": 39626401, "comment_id": 66565293, "body": "fyi you should do the import as <code>from sklearn.linear_model import LogisticRegression</code>"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1613422332, "post_id": 39626401, "comment_id": 117065548, "body": "when I run this code I get <code>databricks&#47;python&#47;lib&#47;python3.7&#47;site-packages&#47;sklearn&#47;utils&#47;&zwnj;&#8203;validation.py:760: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().   y = column_or_1d(y, warn=True) Out[2]: LogisticRegression(C=100000.0, class_weight=None, dual=False,                    fit_intercept=True, intercept_scaling=1, l1_ratio=None,                   max_iter=100, multi_class=&#39;auto&#39;, n_jobs=None, penalty=&#39;l2&#39;, random_state=None, solver=&#39;lbfgs&#39;, tol=0.0001, verbose=0,warm_start=False)</code>"}, {"owner": {"reputation": 389, "user_id": 2612148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e46081cfc0eb1ff61edffc63f504dcb8?s=128&d=identicon&r=PG&f=1", "display_name": "Erdem KAYA", "link": "https://stackoverflow.com/users/2612148/erdem-kaya"}, "edited": false, "score": 0, "creation_date": 1614344571, "post_id": 39626401, "comment_id": 117363903, "body": "I am pretty sure I had been using Python 2.7 by the time I had run into this issue."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2612148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e46081cfc0eb1ff61edffc63f504dcb8?s=128&d=identicon&r=PG&f=1", "display_name": "Erdem KAYA", "link": "https://stackoverflow.com/users/2612148/erdem-kaya"}, "edited": false, "score": 1, "creation_date": 1474921386, "post_id": 39630166, "comment_id": 66721452, "body": "Thanks @maxymoo. Yes, I could get other summaries with <code>statsmodels</code>."}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 2, "creation_date": 1482443034, "post_id": 39630166, "comment_id": 69786861, "body": "Are these values only odds ratios if and only if the features are independent? (i.e. there is no interaction between the features)."}, {"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "reply_to_user": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 3, "creation_date": 1482445807, "post_id": 39630166, "comment_id": 69787960, "body": "@user48956 take a look at <a href=\"http://stats.stackexchange.com/questions/57031/interpreting-interaction-terms-in-logit-regression-with-categorical-variables\" title=\"interpreting interaction terms in logit regression with categorical variables\">stats.stackexchange.com/questions/57031/&hellip;</a> for a good example of how to interpret odds ratios"}], "tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": true, "score": 18, "last_activity_date": 1474517802, "creation_date": 1474517802, "answer_id": 39630166, "question_id": 39626401, "link": "https://stackoverflow.com/questions/39626401/how-to-get-odds-ratios-and-other-related-features-with-scikit-learn/39630166#39630166", "title": "How to get odds-ratios and other related features with scikit-learn", "body": "<p>You can get the odds ratios by taking the exponent of the coeffecients:</p>\n\n<pre><code>import numpy as np\nX = df.female.values.reshape(200,1)\nclf.fit(X,y)\nnp.exp(clf.coef_)\n\n# array([[ 1.80891307]])\n</code></pre>\n\n<p>As for the other statistics, these are not easy to get from scikit-learn (where model evaluation is mostly done using cross-validation), if you need them you're better off using a different library such as <code>statsmodels</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 389, "user_id": 2612148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e46081cfc0eb1ff61edffc63f504dcb8?s=128&d=identicon&r=PG&f=1", "display_name": "Erdem KAYA", "link": "https://stackoverflow.com/users/2612148/erdem-kaya"}, "is_accepted": false, "score": 5, "last_activity_date": 1474921737, "creation_date": 1474921737, "answer_id": 39711837, "question_id": 39626401, "link": "https://stackoverflow.com/questions/39626401/how-to-get-odds-ratios-and-other-related-features-with-scikit-learn/39711837#39711837", "title": "How to get odds-ratios and other related features with scikit-learn", "body": "<p>In addition to @maxymoo's answer, to get other statistics, <code>statsmodel</code> can be used. Assuming that you have your data in a <code>DataFrame</code> called <code>df</code>, the code below should show a good summary:</p>\n\n<pre><code>import pandas as pd\nfrom patsy import dmatrices\nimport statsmodels.api as sm \n\ny, X = dmatrices( 'label ~ age + gender', data=df, return_type='dataframe')\nmod = sm.Logit(y, X)\nres = mod.fit()\nprint res.summary()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 8275142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EbUVX.jpg?s=128&g=1", "display_name": "S&#233;bastien Wieckowski", "link": "https://stackoverflow.com/users/8275142/s%c3%a9bastien-wieckowski"}, "is_accepted": false, "score": 4, "last_activity_date": 1542569690, "creation_date": 1542569690, "answer_id": 53364717, "question_id": 39626401, "link": "https://stackoverflow.com/questions/39626401/how-to-get-odds-ratios-and-other-related-features-with-scikit-learn/53364717#53364717", "title": "How to get odds-ratios and other related features with scikit-learn", "body": "<p>I don't know such a method using scikit-learn, but <strong>Table2x2</strong> from statsmodels.api.stats could be useful in your case, as it provides you with the OR, SE, CI and P value with 3 lines of codes:</p>\n\n<pre><code>import statsmodels.api as sm\ntable = sm.stats.Table2x2(np.array([[73, 756], [14, 826]]))\ntable.summary(method='normal')\n\"\"\"\n               Estimate    SE   LCB    UCB p-value\nOdds ratio        5.697       3.189 10.178   0.000\nLog odds ratio    1.740 0.296 1.160  2.320   0.000\nRisk ratio        5.283       3.007  9.284   0.000\nLog risk ratio    1.665 0.288 1.101  2.228   0.000\n\"\"\"\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 2612148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e46081cfc0eb1ff61edffc63f504dcb8?s=128&d=identicon&r=PG&f=1", "display_name": "Erdem KAYA", "link": "https://stackoverflow.com/users/2612148/erdem-kaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15500, "favorite_count": 7, "accepted_answer_id": 39630166, "answer_count": 3, "score": 16, "last_activity_date": 1595765748, "creation_date": 1474491209, "last_edit_date": 1595765748, "question_id": 39626401, "link": "https://stackoverflow.com/questions/39626401/how-to-get-odds-ratios-and-other-related-features-with-scikit-learn", "title": "How to get odds-ratios and other related features with scikit-learn", "body": "<p>I'm going through this <a href=\"https://stats.idre.ucla.edu/stata/faq/how-do-i-interpret-odds-ratios-in-logistic-regression/\" rel=\"nofollow noreferrer\">odds ratios in logistic regression tutorial</a>, and trying to get the exactly the same results with the logistic regression module of scikit-learn. With the code below, I am able to get the coefficient and intercept but I could not find a way to find other properties of the model listed in the tutorial such as <em>log-likelyhood, Odds Ratio, Std. Err., z, P&gt;|z|, [95% Conf. Interval]</em>. If someone could show me how to have them calculated with <code>sklearn</code> package, I would appreciate it.</p>\n<pre><code>import pandas as pd\nfrom sklearn.linear_model import LogisticRegression\n\nurl = 'https://stats.idre.ucla.edu/wp-content/uploads/2016/02/sample.csv'\ndf = pd.read_csv(url, na_values=[''])\ny = df.hon.values\nX = df.math.values\ny = y.reshape(200,1)\nX = X.reshape(200,1)\nclf = LogisticRegression(C=1e5)\nclf.fit(X,y)\nclf.coef_\nclf.intercept_\n</code></pre>\n"}, {"tags": ["python", "csv", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1474493970, "post_id": 39626359, "comment_id": 66559467, "body": "please show the actual error"}, {"owner": {"reputation": 114, "user_id": 5870024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac402025e821f3f88be7c8f37c5b6ef?s=128&d=identicon&r=PG&f=1", "display_name": "shark38j", "link": "https://stackoverflow.com/users/5870024/shark38j"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1474495029, "post_id": 39626359, "comment_id": 66559947, "body": "&gt;&gt;&gt; Exception in Tkinter callback Traceback (most recent call last):   File &quot;C:\\Users\\Marc\\AppData\\Local\\Programs\\Python\\Python35\\lib\\tk&zwnj;&#8203;inter_<i>init_</i>.py&quot;, line 1549, in <b>call</b>     return self.func(*args)   File &quot;C:\\Users\\Marc\\Documents\\SPC Data\\Inspection Database\\68800 Inspection.py&quot;, line 92, in submitEntry     writeCsv()   File &quot;C:\\Users\\Marc\\Documents\\SPC Data\\Inspection Database\\68800 Inspection.py&quot;, line 99, in writeCsv     cdOalWriter.writerow([now.strftime(&quot;%Y-%m-%d %H:%M&quot;),groupOal1,groupOal2,groupOal3,groupOal4,groupOal5]) NameError: name &#39;groupOal1&#39; is not defined"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1474497348, "post_id": 39626359, "comment_id": 66560696, "body": "please include the error in the question. It is unreadable as a comment. Your question should have an &quot;edit&quot; link that you can click on."}], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 5870024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac402025e821f3f88be7c8f37c5b6ef?s=128&d=identicon&r=PG&f=1", "display_name": "shark38j", "link": "https://stackoverflow.com/users/5870024/shark38j"}, "edited": false, "score": 0, "creation_date": 1474550910, "post_id": 39627644, "comment_id": 66584419, "body": "Thanks for the help.  It works if I list out the variables in the writeCsv functions, both in the def and submitEntry portions.  I couldn&#39;t get the *group0as unpack to work.  It seems like the problem is in the *items command.  There is no variable for &quot;items&quot; so how is that supposed to work?  I would really like to understand how that is supposed to work."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 114, "user_id": 5870024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac402025e821f3f88be7c8f37c5b6ef?s=128&d=identicon&r=PG&f=1", "display_name": "shark38j", "link": "https://stackoverflow.com/users/5870024/shark38j"}, "edited": false, "score": 0, "creation_date": 1474586296, "post_id": 39627644, "comment_id": 66603968, "body": "Whoops, do not pack again in <code>def()</code>, simply enumerate the packed terms. Also, when passing arguments, you do not need to keep exact names. See edit."}], "tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 0, "last_activity_date": 1474586149, "last_edit_date": 1495541965, "creation_date": 1474497896, "answer_id": 39627644, "question_id": 39626359, "link": "https://stackoverflow.com/questions/39626359/python-data-will-not-input-into-csv-file/39627644#39627644", "title": "Python data will not input into CSV file", "body": "<p>Simply pass those variables in the method, <code>writeCsv()</code>. Because the <em>groupOas</em> are local to the <code>submitEntry()</code> function, its called function, <code>writeCsv</code>, does not see such objects. Also, below uses the <a href=\"https://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-python-parameters\">argument unpack idiom</a>, <code>*</code> of list of objects (I comment out the more verbose lines):</p>\n\n<pre><code>def submitEntry():\n    groupOal1=dimOneOb1.get()\n    groupOal2=dimOneOb2.get()\n    groupOal3=dimOneOb3.get()\n    groupOal4=dimOneOb4.get()\n    groupOal5=dimOneOb5.get()\n    group0as = [groupOal1,groupOal2,groupOal3,groupOal4,groupOal5]\n\n    groupBarb1=dimTwoOb1.get()\n    groupBarb2=dimTwoOb2.get()\n    groupBarb3=dimTwoOb3.get()\n    groupBarb4=dimTwoOb4.get()\n    groupBarb5=dimTwoOb5.get()\n\n    writeCsv(*group0as)\n    # writeCsv(groupOal1,groupOal2,groupOal3,groupOal4,groupOal5)\n\ndef writeCsv(a, b, c, d, e):\n    with open(\"CD 68800 OAL.csv\", \"a\") as cdOal:\n        cdOalWriter = csv.writer(cdOal)\n        cdOalWriter.writerow([now.strftime(\"%Y-%m-%d %H:%M\"), a, b, c, d, e])\n        csOal.close()\n</code></pre>\n"}], "owner": {"reputation": 114, "user_id": 5870024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ac402025e821f3f88be7c8f37c5b6ef?s=128&d=identicon&r=PG&f=1", "display_name": "shark38j", "link": "https://stackoverflow.com/users/5870024/shark38j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474586149, "creation_date": 1474491018, "question_id": 39626359, "link": "https://stackoverflow.com/questions/39626359/python-data-will-not-input-into-csv-file", "title": "Python data will not input into CSV file", "body": "<p>I am working on a project for my shop that would allow me to track dimensions for my statistical process analysis.  I have a part with 2 dimensions that I will measure 5 samples for.  The dimension are OAL (Over All Length) and a Barb Diameter.  I got Python and tKinter to create the window and put all the data into the correct place, but it will not export to the CSV file.  It keeps telling me that the name is not defined, but the variable does exist and if I use a print command, the correct value comes up in the shell.  So I know the variable exists  I'm not sure if it's because I'm using tKinter or not.  Any help would be appreciated.</p>\n\n<pre><code>import time\nfrom tkinter import *\nimport threading\nimport csv\nimport datetime\n\n\ndef gui():\n    root = Tk()\n    root.title(\"Troy Screw Products\")\n\n    titleLabel = Label(root,text=\"Inspection Worksheet\")\n    partNumLabel = Label(root,text=\"Part #68800\")\n    now = datetime.datetime.now()\n\n    typeLabel = [\"Barb Dia\",\"Barb Dia\",\"OAL\",\"Knurl\",\"Threads\",\"Chamfer\",\"OD\",\"OD\",\"OD\"]\n    dimLabel = [\".356\",\".333\",\".437\",\".376\",\"n/a\",\".258\",\".337\",\".321\",\".305\"]\n   tolLabel = [\".354/.358\",\".331/.335\",\".433/.441\",\".374/.378\",\"1/4-20\",\".252/.263\",\".335/.339\",\".319/.323\",\".303/.307\"]\n    observations = [\"Obs 1\",\"Obs 2\",\"Obs 3\",\"Obs 4\",\"Obs 5\"]\n    cd1Obs = []\n\n    Label(text=\"Inspection Worksheet\").grid(row=0,column=0)\n    Label(text=\"Part #68800\").grid(row=1,column=0)\n\n    r=0\n    for c in typeLabel:\n             Label(text=c,relief=RIDGE,width=15).grid(row=2,column=r)\n             r=r+1\n    r=0            \n    for c in dimLabel:\n            Label(text=c,relief=RIDGE,width=15).grid(row=3,column=r)\n            r=r+1\n\n    r=0            \n    for c in tolLabel:\n            Label(text=c,relief=RIDGE,width=15).grid(row=4,column=r)\n            r=r+1\n\n    r=0            \n    for c in tolLabel:\n            Checkbutton(width=15).grid(row=5,column=r)\n            r=r+1\n\n    Label(text=\"\").grid(row=6,column=1)\n    Label(text=\"\").grid(row=7,column=1)\n\n    Label(text=\"OAL\").grid(row=8,column=2)\n    Label(text=\"Barb Dia\").grid(row=8,column=6)\n\n    r=9            \n    for c in observations:\n            Label(text=c,width=15).grid(row=r,column=1)\n            Label(text=c,width=15).grid(row=r,column=5)\n            r=r+1\n\n    dimOneOb1=StringVar()\n    dimOneOb2=StringVar()\n    dimOneOb3=StringVar()\n    dimOneOb4=StringVar()\n    dimOneOb5=StringVar()\n    dimTwoOb1=StringVar()\n    dimTwoOb2=StringVar()\n    dimTwoOb3=StringVar()\n    dimTwoOb4=StringVar()\n    dimTwoOb5=StringVar()\n\n    Entry(textvariable=dimOneOb1).grid(row=9,column=2)\n    Entry(textvariable=dimOneOb2).grid(row=10,column=2)\n    Entry(textvariable=dimOneOb3).grid(row=11,column=2)\n    Entry(textvariable=dimOneOb4).grid(row=12,column=2)\n    Entry(textvariable=dimOneOb5).grid(row=13,column=2)\n\n    Entry(textvariable=dimTwoOb1).grid(row=9,column=6)\n    Entry(textvariable=dimTwoOb2).grid(row=10,column=6)\n    Entry(textvariable=dimTwoOb3).grid(row=11,column=6)\n    Entry(textvariable=dimTwoOb4).grid(row=12,column=6)\n    Entry(textvariable=dimTwoOb5).grid(row=13,column=6)\n\n    def submitEntry():\n        groupOal1=dimOneOb1.get()\n        groupOal2=dimOneOb2.get()\n        groupOal3=dimOneOb3.get()\n        groupOal4=dimOneOb4.get()\n        groupOal5=dimOneOb5.get()\n\n        groupBarb1=dimTwoOb1.get()\n        groupBarb2=dimTwoOb2.get()\n        groupBarb3=dimTwoOb3.get()\n        groupBarb4=dimTwoOb4.get()\n        groupBarb5=dimTwoOb5.get()\n\n        writeCsv()\n\n    Button(text=\"Submit\",command=submitEntry).grid(row=14,column=7)\n\n    def writeCsv():\n        with open(\"CD 68800 OAL.csv\", \"a\") as cdOal: #open file and give file variable name; r=read, w=write, a=append\n            cdOalWriter = csv.writer(cdOal) #Give writer a variable name\n            cdOalWriter.writerow([now.strftime(\"%Y-%m-%d %H:%M\"),groupOal1,groupOal2,groupOal3,groupOal4,groupOal5])\n            csOal.close()\n\n\n\n    root.mainloop()\n\nop1 = threading.Thread(target = gui)\nop1.start()\n</code></pre>\n"}, {"tags": ["python", "unicode", "python-unicode"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474491162, "post_id": 39626338, "comment_id": 66558061, "body": "try <code># -*- coding: latin-1 -*-</code>"}, {"owner": {"reputation": 8684, "user_id": 702977, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/859cd18fc4bc067aa389b7c408eeb572?s=128&d=identicon&r=PG", "display_name": "SoftTimur", "link": "https://stackoverflow.com/users/702977/softtimur"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474491235, "post_id": 39626338, "comment_id": 66558100, "body": "still does not work... same error..."}, {"owner": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "edited": false, "score": 0, "creation_date": 1474491313, "post_id": 39626338, "comment_id": 66558138, "body": "Is it complaining about test.xlsm? Plenty of non-ascii characters there, I&#39;m sure."}, {"owner": {"reputation": 8684, "user_id": 702977, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/859cd18fc4bc067aa389b7c408eeb572?s=128&d=identicon&r=PG", "display_name": "SoftTimur", "link": "https://stackoverflow.com/users/702977/softtimur"}, "edited": false, "score": 0, "creation_date": 1474491381, "post_id": 39626338, "comment_id": 66558177, "body": "It is possible, it is just an Excel file (with macros), so is there anything I could do?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474491851, "post_id": 39626338, "comment_id": 66558424, "body": "that could help: <a href=\"http://stackoverflow.com/questions/17675780/how-to-save-xlsm-file-with-macro-using-openpyxl\" title=\"how to save xlsm file with macro using openpyxl\">stackoverflow.com/questions/17675780/&hellip;</a>"}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1474493002, "post_id": 39626338, "comment_id": 66559008, "body": "Are you sure that&#39;s your exact first line of your file? The error is complaining about line 1.  The byte <code>0xb7</code> doesn&#39;t appear to be there. Maybe try deleting both lines entirely and retyping them in manually."}, {"owner": {"reputation": 8684, "user_id": 702977, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/859cd18fc4bc067aa389b7c408eeb572?s=128&d=identicon&r=PG", "display_name": "SoftTimur", "link": "https://stackoverflow.com/users/702977/softtimur"}, "edited": false, "score": 0, "creation_date": 1474494819, "post_id": 39626338, "comment_id": 66559853, "body": "Please see my updates..."}], "owner": {"reputation": 8684, "user_id": 702977, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/859cd18fc4bc067aa389b7c408eeb572?s=128&d=identicon&r=PG", "display_name": "SoftTimur", "link": "https://stackoverflow.com/users/702977/softtimur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474494804, "creation_date": 1474490921, "last_edit_date": 1474494804, "question_id": 39626338, "link": "https://stackoverflow.com/questions/39626338/non-ascii-character-xb7-of-xlsm-file", "title": "Non-ASCII character &#39;\\xb7&#39; of xlsm file", "body": "<p>I am trying to run <a href=\"https://github.com/jmcnamara/XlsxWriter/blob/master/examples/vba_extract.py\" rel=\"nofollow noreferrer\">vba_extract.py</a> in Visual Studio by IronPython. The compilation returns an error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QBOOT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QBOOT.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>An unhandled exception of type 'Microsoft.Scripting.SyntaxErrorException' occurred in IronPython.dll\n\nAdditional information: Non-ASCII character '\\xb7' in file ../../python/vba_extract.py ../../../tests/test.xlsm on line 1, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details\n</code></pre>\n\n<p>I searched this issue, and added encoding in Line 2 of <code>vba_extract.py</code>:</p>\n\n<pre><code>#!python\n# -*- coding: utf-8 -*-\n</code></pre>\n\n<p>But it still does not work.</p>\n\n<p>Additionally, I tried the following two lines, which returned the same error:</p>\n\n<pre><code>engine.ExecuteFile(@\"../../python/irrelevant.py ../../../tests/test.xlsm\");\nengine.ExecuteFile(@\"../../tests/test.xlsm\");\n</code></pre>\n\n<p>So I guess the problem is from the encoding of <code>test.xlsm</code>.</p>\n\n<p>Could anyone help?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 836, "user_id": 1474727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41068ad3501beb3e85fb387f4063233a?s=128&d=identicon&r=PG", "display_name": "burhan", "link": "https://stackoverflow.com/users/1474727/burhan"}, "is_accepted": true, "score": 1, "last_activity_date": 1474496603, "creation_date": 1474496603, "answer_id": 39627468, "question_id": 39626332, "link": "https://stackoverflow.com/questions/39626332/n-dataframes-inner-joined-to-final-dataframe/39627468#39627468", "title": "n-dataframes inner joined to final dataframe", "body": "<p>How about this:</p>\n\n<pre><code>dflist = [df1, df2, df3, df4]\nresult_final = reduce(lambda x,y: x.merge(y, \n                         on=['Col1', 'Col2', 'Col3', 'Col4'], \n                         how='inner'), \n                     dflist)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1474524544, "creation_date": 1474524544, "answer_id": 39631467, "question_id": 39626332, "link": "https://stackoverflow.com/questions/39626332/n-dataframes-inner-joined-to-final-dataframe/39631467#39631467", "title": "n-dataframes inner joined to final dataframe", "body": "<pre><code>cols = ['Col1', 'Col2', 'Col3', 'Col4']\n\npd.concat([d.set_index(cols) for d in [df_1, df_2, df_3, df_4]], axis=1)\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 2277435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beb86dde6a7c498f482249eab564ad48?s=128&d=identicon&r=PG", "display_name": "user2277435", "link": "https://stackoverflow.com/users/2277435/user2277435"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 39627468, "answer_count": 2, "score": 1, "last_activity_date": 1474524544, "creation_date": 1474490906, "question_id": 39626332, "link": "https://stackoverflow.com/questions/39626332/n-dataframes-inner-joined-to-final-dataframe", "title": "n-dataframes inner joined to final dataframe", "body": "<p>I'm trying to figure out how to inner merge n-dataframes to a single final dataframe.</p>\n\n<p>I need to be able to specify a list of dataframes in which the inner join of <strong>all</strong> is output as another dataframe. Again, the exact number will not be known in advance, but the integer count can be.</p>\n\n<p>See the below code:</p>\n\n<pre><code>import pandas as pd\n\n\nresult = pd.merge(df_1, df_2, on=['Col1', 'Col2', 'Col3', 'Col4'], how='inner')\nresult_2 = pd.merge(df_3, df_4, on=['Col1', 'Col2', 'Col3', 'Col4'], how='inner')\nresult_final = pd.merge(result, result_2, on=['Col1', 'Col2', 'Col3', 'Col4'], how='inner')\n</code></pre>\n"}, {"tags": ["python", "root", "exit", "os.system"], "comments": [{"owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "edited": false, "score": 0, "creation_date": 1474490987, "post_id": 39626329, "comment_id": 66557976, "body": "You can use <code>sudo bash -c &quot;command &gt; file&quot;</code> to run a single command with output redirect as root. This is easy to make into a function"}, {"owner": {"reputation": 81, "user_id": 2925669, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8166e91273e969478b1116a32a39699f?s=128&d=identicon&r=PG&f=1", "display_name": "bobdxcool", "link": "https://stackoverflow.com/users/2925669/bobdxcool"}, "reply_to_user": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "edited": false, "score": 0, "creation_date": 1474493768, "post_id": 39626329, "comment_id": 66559364, "body": "@slezica I dont quite understand this. If you dont mind can you please show me an example on how to do this in the python script above ?"}, {"owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "edited": false, "score": 0, "creation_date": 1474550880, "post_id": 39626329, "comment_id": 66584398, "body": "left an example below :)"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 2, "creation_date": 1474551264, "post_id": 39626329, "comment_id": 66584663, "body": "Oups! Each and every <code>os.system</code> starts a different shell, so <code>echo 2001 7d0e &gt; &#47;sys...</code> will <b>not</b> be executed as a super user, and <code>os.system(&#39;exit&#39;)</code> is a noop: you start a subshell that immediately exits..."}], "answers": [{"tags": [], "owner": {"reputation": 62518, "user_id": 469300, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8256aabf1f8938bc2356b1fbeb227f4?s=128&d=identicon&r=PG", "display_name": "slezica", "link": "https://stackoverflow.com/users/469300/slezica"}, "is_accepted": false, "score": 0, "last_activity_date": 1474550863, "creation_date": 1474550863, "answer_id": 39640415, "question_id": 39626329, "link": "https://stackoverflow.com/questions/39626329/return-from-root-to-user-using-python-os-systemkill-not-working/39640415#39640415", "title": "Return from root to user using python os.system(&#39;kill&#39;) not working", "body": "<p>Your <code>echo</code> command doesn't work with <code>sudo</code> because the redirection to <code>&gt; /sys/bus/...</code> is made by your own user, and then given to <code>sudo echo</code>, but root is required to access the file in the 1st place.</p>\n\n<p>Try using <code>sudo bash -c 'command &gt; redirect'</code> instead, which will acquire root permissions <em>before</em> attempting the redirect:</p>\n\n<pre><code>def sudo(command):\n  return os.system(\"sudo bash -c '{}'\".format(command))\n\nsudo('echo foo &gt; /sys/restricted/file')\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 2925669, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8166e91273e969478b1116a32a39699f?s=128&d=identicon&r=PG&f=1", "display_name": "bobdxcool", "link": "https://stackoverflow.com/users/2925669/bobdxcool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1392, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474550863, "creation_date": 1474490897, "question_id": 39626329, "link": "https://stackoverflow.com/questions/39626329/return-from-root-to-user-using-python-os-systemkill-not-working", "title": "Return from root to user using python os.system(&#39;kill&#39;) not working", "body": "<p>I need to run a command from my python script as a root user (just sudo wont work), so I use os.system('sudo su') and am able to get root access. But again I need to return back to user . I tried os.system('exit'), but it still doesnt come out of root login to user login. I have to manually enter exit in the terminal to get back to user login. Can someone help me on how to do this in python ?</p>\n\n<pre><code>import os\nimport time\nos.system('clear') #clear the terminal\nos.system('sudo eject /dev/sr0')\ntime.sleep(2)\nos.system('sudo modprobe option')\ntime.sleep(2)\nos.system('sudo su')\ntime.sleep(5)\nos.system('echo 2001 7d0e &gt; /sys/bus/usb-serial/drivers/option1/new_id')\ntime.sleep(2)\nos.system('exit')\n</code></pre>\n"}, {"tags": ["python", "socket.io", "emit"], "comments": [{"owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "edited": false, "score": 0, "creation_date": 1474491144, "post_id": 39626300, "comment_id": 66558051, "body": "time.sleep(2) is outside of your while loop. That&#39;s not going to get hit."}, {"owner": {"reputation": 2467, "user_id": 4602214, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-AZ58YO9UAAA/AAAAAAAAAAI/AAAAAAAAACU/irvaBG9P40w/photo.jpg?sz=128", "display_name": "Garth", "link": "https://stackoverflow.com/users/4602214/garth"}, "reply_to_user": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "edited": false, "score": 0, "creation_date": 1474491270, "post_id": 39626300, "comment_id": 66558117, "body": "I made mistake in the question. Edited. @LaneL"}, {"owner": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "edited": false, "score": 0, "creation_date": 1474494754, "post_id": 39626300, "comment_id": 66559826, "body": "How do you even know you are connected to the client within the while loop? Did you try moving your loop into your connection handler? To me it would make more sense to start a thread with your loop after the connection has already been established."}, {"owner": {"reputation": 2467, "user_id": 4602214, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-AZ58YO9UAAA/AAAAAAAAAAI/AAAAAAAAACU/irvaBG9P40w/photo.jpg?sz=128", "display_name": "Garth", "link": "https://stackoverflow.com/users/4602214/garth"}, "reply_to_user": {"reputation": 705, "user_id": 5116789, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u5Zc7.jpg?s=128&g=1", "display_name": "LaneL", "link": "https://stackoverflow.com/users/5116789/lanel"}, "edited": false, "score": 0, "creation_date": 1474557443, "post_id": 39626300, "comment_id": 66589101, "body": "I explained in the question that I can connect inside the connection handler. The problem was I wanted to do it elsewhere."}], "owner": {"reputation": 2467, "user_id": 4602214, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-AZ58YO9UAAA/AAAAAAAAAAI/AAAAAAAAACU/irvaBG9P40w/photo.jpg?sz=128", "display_name": "Garth", "link": "https://stackoverflow.com/users/4602214/garth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 564, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1474491295, "creation_date": 1474490788, "last_edit_date": 1474491295, "question_id": 39626300, "link": "https://stackoverflow.com/questions/39626300/python-socketio-server-wont-emit-from-the-main-section-of-the-program", "title": "Python-SocketIO server won&#39;t emit from the main section of the program", "body": "<p>I have a pyhton-socketio server that servers on port 8000 and handles connections perfectly. I want to emit the following emit message every 2 seconds. When emitting the client doesn't receive a message. If I emit from where I point out in the comment it works perfect.</p>\n\n<p><strong>How can I edit this to be able to emit from inside the while loop successfully?</strong></p>\n\n<p>The python server code:</p>\n\n<pre><code>import socketio\nimport eventlet\nimport threading\nimport time\nfrom flask import Flask, render_template\n\nsio = socketio.Server()\napp = Flask(__name__)\n\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n\n# as a decorator:\n@sio.on('connect')\ndef connect_handler(sid, environ):\n    print('IP-&gt;' + environ['REMOTE_ADDR'])\n    # If I emit here it works e.g. sio.emit('status-update', {'core0_in': 8, 'core1_in': 12,'cpu_usage_in': 5, 'users': 7})\n\n\n@sio.on('disconnect')\ndef disconnect(sid):\n    print('disconnect ', sid)\n\n\nclass Server(threading.Thread):\n    def __init__(self, thread_id):\n        threading.Thread.__init__(self)\n        self.threadID = thread_id\n\n    def run(self):\n        print(\"Starting \" + self.name)\n        serve()\n\n\ndef serve():\n    if __name__ == '__main__':\n        global app\n        # wrap Flask application with socketio's middleware\n        app = socketio.Middleware(sio, app)\n\n        # deploy as an eventlet WSGI server\n        eventlet.wsgi.server(eventlet.listen(('', 8000)), app)\n\n\nserver_thread = Server(\"Server-thread\")\nserver_thread.start()\nwhile True:\n    print(\"Emitting...\")\n    sio.emit('status-update', {'core0_in': 8, 'core1_in': 12,'cpu_usage_in': 5, 'users': 7})  # when emitting here the client doesn't receive anything\n    time.sleep(2)\n</code></pre>\n"}, {"tags": ["python", "pyqt4", "pyqtgraph"], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 7010496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298a374f81ee34a7fc085e3667480b3e?s=128&d=identicon&r=PG&f=1", "display_name": "segFaultCoder", "link": "https://stackoverflow.com/users/7010496/segfaultcoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1476488612, "last_edit_date": 1476488612, "creation_date": 1476480558, "answer_id": 40052282, "question_id": 39626294, "link": "https://stackoverflow.com/questions/39626294/how-do-i-draw-a-plot-using-pyqtgraph-on-pyqt4-widget-created-in-qt-designer/40052282#40052282", "title": "How do I draw a plot using pyqtgraph on PyQt4 widget created in QT Designer?", "body": "<p>Can you share the ui_pumptest.py file source? Otherwise it's hard to tell what your intentions are.  If not, at least detail what construct you used to place in the QGraphicsView promotion process in QtDesigner (assuming you followed <a href=\"http://www.pyqtgraph.org/documentation/how_to_use.html#embedding-widgets-inside-pyqt-applications\" rel=\"nofollow\">http://www.pyqtgraph.org/documentation/how_to_use.html#embedding-widgets-inside-pyqt-applications</a>).</p>\n\n<p>pg.plot creates it's own plotwindow->plotwidget structure, so that's why you're getting a separate window if calling that.  The item you call plot on should be the container object name that was promoted in your Qt Ui file. </p>\n"}], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2201, "favorite_count": 0, "accepted_answer_id": 40052282, "answer_count": 1, "score": 1, "last_activity_date": 1476488612, "creation_date": 1474490763, "last_edit_date": 1474566490, "question_id": 39626294, "link": "https://stackoverflow.com/questions/39626294/how-do-i-draw-a-plot-using-pyqtgraph-on-pyqt4-widget-created-in-qt-designer", "title": "How do I draw a plot using pyqtgraph on PyQt4 widget created in QT Designer?", "body": "<p>I'm just starting with pyqtgraph. I have a graphicsView widget that I promoted with QT designer per the documentation. I would like to try a plot to see if it works. When I tried <code>pg.plot(x,y)</code> the program created a plot in a separate window rather than in the graphicsView widget. I'm using Windows 10, PyQt4, and Python 2.7. What am I doing wrong?</p>\n\n<pre><code>from PyQt4 import QtGui\nfrom PyQt4 import QtCore\nimport ui_test  #Gui File\nimport sys\nimport pyqtgraph as pg\n\n\nclass Gui(QtGui.QMainWindow, ui_test.Ui_MainWindow):\n\n\n    def __init__(self):        \n        super(self.__class__, self).__init__()        \n        self.setupUi(self)  # This is defined in ui_pumptest.py file automatically   \n        self.plot()\n\n    def plot(self):       \n        vb = pg.ViewBox()\n        self.graphicsView.setCentralItem(vb)\ndef main():\n    app = QtGui.QApplication(sys.argv)  # A new instance of QApplication\n    form = Gui()  # We set the form to be our ExampleApp (design)\n    form.show()  # Show the form\n    app.exec_()  # and execute the. app\n\nif __name__ == '__main__':  # if we're running file directly and not importing it\n    main()  # run the main function\n</code></pre>\n"}, {"tags": ["python", "c", "numpy"], "comments": [{"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474564917, "post_id": 39626233, "comment_id": 66593828, "body": "the 2nd guess seems wrong. numpy seems to use multi-index."}], "answers": [{"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1474496041, "post_id": 39626641, "comment_id": 66560301, "body": "<code>np.lib.stride_tricks.broadcast_arrays</code> is better spelt <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.broadcast_arrays.html\" rel=\"nofollow noreferrer\"><code>np.broadcast_arrays</code></a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 3, "creation_date": 1474496458, "post_id": 39626641, "comment_id": 66560435, "body": "Though the whole <code>stride_tricks.py</code> file is good reading if you need to dig deeper."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474556720, "post_id": 39626641, "comment_id": 66588601, "body": "I try to read the nditer c code, but don&#39;t quite understand it yet. Does nditer sacrifice performance? Does niter treat the nested loop as a single loop with variable stride?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1474560837, "post_id": 39626641, "comment_id": 66591545, "body": "I haven&#39;t dug into the <code>nditer</code> code; with all the options it is complicated.  But I&#39;ve added some examples that show how it iterates.  <code>external_loop</code> is needed to get the best speed improvement."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 6, "last_activity_date": 1474562852, "last_edit_date": 1495540307, "creation_date": 1474492158, "answer_id": 39626641, "question_id": 39626233, "link": "https://stackoverflow.com/questions/39626233/how-did-numpy-implement-multi-dimensional-broadcasting/39626641#39626641", "title": "How did numpy implement multi-dimensional broadcasting?", "body": "<p>To really get into broadcasting details you need to understand array shape and strides.  But a lot of the work is now implemented in <code>c</code> code using <code>nditer</code>.  You can read about it at <a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html\" rel=\"nofollow noreferrer\">http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html</a>.  <code>np.nditer</code> gives you access to the tool at the Python level, but its real value comes when used with <code>cython</code> or your own <code>c</code> code.</p>\n\n<p><code>np.lib.stride_tricks</code> has functions that let you play with strides.  One of its functions helps visualize how arrays are broadcasted together.  In practice the work is done with <code>nditer</code>, but this function may help understand the action:</p>\n\n<pre><code>In [629]: np.lib.stride_tricks.broadcast_arrays(np.arange(6).reshape(2,3), \n                                  np.array([[1],[2]]))\nOut[629]: \n[array([[0, 1, 2],\n        [3, 4, 5]]), \n array([[1, 1, 1],\n        [2, 2, 2]])]\n</code></pre>\n\n<p>Note that, effectively the 2nd array has been replicated to match the 1st's shape.  But the replication is done with stride tricks, not with actual copies.</p>\n\n<pre><code>In [631]: A,B=np.lib.stride_tricks.broadcast_arrays(np.arange(6).reshape(2,3), \n                                      np.array([[1],[2]]))\nIn [632]: A.shape\nOut[632]: (2, 3)\nIn [633]: A.strides\nOut[633]: (12, 4)\nIn [634]: B.shape\nOut[634]: (2, 3)\nIn [635]: B.strides\nOut[635]: (4, 0)         \n</code></pre>\n\n<p>It's this <code>(4,0)</code> strides that does the replication without copy.</p>\n\n<p>=================</p>\n\n<p>Using the python level <code>nditer</code>, here's what it does during broadcasting.</p>\n\n<pre><code>In [1]: A=np.arange(6).reshape(2,3)\nIn [2]: B=np.array([[1],[2]])\n</code></pre>\n\n<p>The plain nditer feeds elements one set at a time\n<a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html#using-an-external-loop\" rel=\"nofollow noreferrer\">http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html#using-an-external-loop</a></p>\n\n<pre><code>In [5]: it =np.nditer((A,B))\nIn [6]: for a,b in it:\n   ...:     print(a,b)\n\n0 1\n1 1\n2 1\n3 2\n4 2\n5 2\n</code></pre>\n\n<p>But when I turn <code>extenal_loop</code> on, it iterates in chunks, here respective rows of the broadcasted arrays:</p>\n\n<pre><code>In [7]: it =np.nditer((A,B), flags=['external_loop'])\nIn [8]: for a,b in it:\n   ...:     print(a,b)\n\n[0 1 2] [1 1 1]\n[3 4 5] [2 2 2]\n</code></pre>\n\n<p>With a more complex broadcasting the <code>external_loop</code> still produces 1d arrays that allow simple <code>c</code> style iteration:</p>\n\n<pre><code>In [13]: A1=np.arange(24).reshape(3,2,4)\nIn [18]: it =np.nditer((A1,np.arange(3)[:,None,None]), flags=['external_loop'])\nIn [19]: while not it.finished:\n    ...:     print(it[:])\n    ...:     it.iternext()\n    ...:     \n(array([0, 1, 2, 3, 4, 5, 6, 7]), array([0, 0, 0, 0, 0, 0, 0, 0]))\n(array([ 8,  9, 10, 11, 12, 13, 14, 15]), array([1, 1, 1, 1, 1, 1, 1, 1]))\n(array([16, 17, 18, 19, 20, 21, 22, 23]), array([2, 2, 2, 2, 2, 2, 2, 2]))\n</code></pre>\n\n<p>Note that while <code>A1</code> is (3,2,4), the nditer loop yields 3 steps (1st axis) with 2*4 length elements.  </p>\n\n<p>I found in another <code>cython/nditer</code> SO question that the first approach did not produce much of a speed improvement, but the 2nd helped a lot.  In <code>c</code> or <code>cython</code> the <code>external_loop</code> case would do simple low level iteration.</p>\n\n<p>===============</p>\n\n<p>If I broadcast on the 1 and 3rd axis, the iterator takes 2*3 steps (effectively flattening the 1st 2 axes, and feeding the 3rd):</p>\n\n<pre><code>In [20]: it =np.nditer((A1,np.arange(2)[None,:,None]), flags=['external_loop'])\nIn [21]: while not it.finished:\n    ...:     print(it[:])\n    ...:     it.iternext()\n    ...:     \n(array([0, 1, 2, 3]), array([0, 0, 0, 0]))\n(array([4, 5, 6, 7]), array([1, 1, 1, 1]))\n(array([ 8,  9, 10, 11]), array([0, 0, 0, 0]))\n(array([12, 13, 14, 15]), array([1, 1, 1, 1]))\n(array([16, 17, 18, 19]), array([0, 0, 0, 0]))\n(array([20, 21, 22, 23]), array([1, 1, 1, 1]))\n</code></pre>\n\n<p>But with <code>buffered</code>, it iterates once, feeding me 2 1d arrays:</p>\n\n<pre><code>In [22]: it =np.nditer((A1,np.arange(2)[None,:,None]), flags=['external_loop','buffered'])\nIn [23]: while not it.finished:\n    ...:     print(it[:])\n    ...:     it.iternext()\n    ...:     \n(array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]), \n array([0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1]))\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/39058641/does-cython-offer-any-reasonably-easy-and-efficient-way-to-iterate-numpy-arrays\">Does Cython offer any reasonably easy and efficient way to iterate Numpy arrays as if they were flat?</a>\nhas some speed tests, showing that buffered external loop is fastest</p>\n\n<p><code>cython</code> translates this into fast simple <code>c</code> iteration:</p>\n\n<pre><code>for xarr in it:\n   x = xarr\n   size = x.shape[0]\n   for i in range(size):\n       x[i] = x[i]+1.0\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 2, "accepted_answer_id": 39626641, "answer_count": 1, "score": 5, "last_activity_date": 1474579525, "creation_date": 1474490524, "last_edit_date": 1474579525, "question_id": 39626233, "link": "https://stackoverflow.com/questions/39626233/how-did-numpy-implement-multi-dimensional-broadcasting", "title": "How did numpy implement multi-dimensional broadcasting?", "body": "<p>Memory (row major order):</p>\n\n<pre><code>[[A(0,0), A(0,1)]\n [A(1,0), A(1,1)]]\n\nhas this memory layout: \n[A(0,0), A(0,1), A(1,0), A(1,1)]\n</code></pre>\n\n<p>I guess the algorithm work like this in the following cases.</p>\n\n<p>Broadcasting Dimension is last dimension:</p>\n\n<pre><code>[[0, 1, 2, 3]         [[1]\n                  x\n [4, 5, 6, 7]]         [10]]\n\n   A (2 by 4)            B (2 by 1)\n\nIterate 0th dimensions of A and B simultaneously {\n    Iterate last dimension of A{\n        multiply;\n    } \n}\n</code></pre>\n\n<p>Broadcasting dimension is 0th dimension:</p>\n\n<pre><code>[[0, 1, 2, 3]   \n                  x    [[1,10,100,1000]]\n [4, 5, 6, 7]]\n\n   A (2 by 4)              B (1 by 4)\n\nIterate 0th dimension of A{\n    Iterate 1st dimensions of A and B simultaneously{\n        multiply;\n    }\n}\n</code></pre>\n\n<p>Question:</p>\n\n<ol>\n<li><p>How does numpy know which order of multiplication is the best.\n(reading memory in order is better than reading memory all over the place. but how did numpy figure that out?)</p></li>\n<li><p>What would numpy do if the arrays have more than two dimension</p></li>\n<li>What would numpy do if the broadcasting dimension is not the last dimension?</li>\n</ol>\n\n<p>2nd guess of what is going on:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main(void){\n    const int nA = 12;\n    const int nB = 3;\n    int A[nA];\n    int B[nB];\n    for(int i = 0; i != nA; ++i) A[i] = i+1;\n    for(int i = 0; i != nB; ++i) B[i] = i+1;\n    //dimension\n    int dA[] = {2,3,2};\n    int dB[] = {1,3,1};\n\n    int* pA = A;\n    int* pB = B;\n    int* pA_end = A + nA;\n    //is it possible to make the compiler\n    //generate the iA and sA?\n    int iB = 0;\n    int iB_max = 2;\n    int sB[] = {1,0};\n\n    while(pA != pA_end){\n        std::cout &lt;&lt; \"*pA, *pB: \" &lt;&lt; *pA &lt;&lt; \", \" &lt;&lt; *pB &lt;&lt;std::endl;\n        std::cout &lt;&lt; \"iB: \" &lt;&lt; iB &lt;&lt;std::endl;\n        *(pA) *= *(pB);\n        ++pA;\n        pB += sB[iB];\n        ++iB;\n        if (iB == iB_max) {iB = 0; pB = B;}\n    }\n\n    for(pA = A; pA != pA_end; ++pA){\n        std::cout &lt;&lt; *(pA) &lt;&lt; \", \";\n    }\n    std::cout &lt;&lt; std::endl;       \n}\n</code></pre>\n"}, {"tags": ["python", "macos", "macos-sierra", "autopy"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1474490568, "post_id": 39626215, "comment_id": 66557736, "body": "I think you have to install openGL in your system gcc compiler first. Or find a binary distribution for your OS."}, {"owner": {"reputation": 396, "user_id": 4700050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/22a04da2adaf47d877100e33a5101fdf?s=128&d=identicon&r=PG&f=1", "display_name": "Mubariz Hajimuradov", "link": "https://stackoverflow.com/users/4700050/mubariz-hajimuradov"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476232869, "post_id": 39626215, "comment_id": 67256342, "body": "Thanks, but Lukasz&#39;s answer solved the problem."}], "answers": [{"tags": [], "owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "is_accepted": true, "score": 3, "last_activity_date": 1474490702, "creation_date": 1474490702, "answer_id": 39626280, "question_id": 39626215, "link": "https://stackoverflow.com/questions/39626215/why-i-cant-install-autopy/39626280#39626280", "title": "Why i can&#39;t install autopy?", "body": "<p>There is a known issue that for some reason wasn't fixed.</p>\n\n<p>Issue: <a href=\"https://github.com/msanders/autopy/issues/75\" rel=\"nofollow\">https://github.com/msanders/autopy/issues/75</a></p>\n\n<p>It contains following workaround (commands to type in console):</p>\n\n<pre><code>brew install libpng\nCFLAGS=\"-Wno-return-type\" pip install git+https://github.com/potpath/autopy.git\n</code></pre>\n"}], "owner": {"reputation": 396, "user_id": 4700050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/22a04da2adaf47d877100e33a5101fdf?s=128&d=identicon&r=PG&f=1", "display_name": "Mubariz Hajimuradov", "link": "https://stackoverflow.com/users/4700050/mubariz-hajimuradov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1779, "favorite_count": 0, "accepted_answer_id": 39626280, "answer_count": 1, "score": 0, "last_activity_date": 1474490702, "creation_date": 1474490454, "last_edit_date": 1474490535, "question_id": 39626215, "link": "https://stackoverflow.com/questions/39626215/why-i-cant-install-autopy", "title": "Why i can&#39;t install autopy?", "body": "<p>I'm using MacBook and Operating System is MacOS Sierra.</p>\n\n<p>I use this command to install autopy:</p>\n\n<pre><code>sudo pip install autopy\n</code></pre>\n\n<p>But i get this error:</p>\n\n<pre><code>Collecting autopy\nDownloading autopy-0.51.tar.gz (74kB)\n100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 81kB 256kB/s \nInstalling collected packages: autopy\n Running setup.py install for autopy ... error\nComplete output from command /usr/bin/python -u -c \"import setuptools, tokenize;__file__='/private/tmp/pip-build-jSobWR/autopy/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-lxk785-record/install-record.txt --single-version-externally-managed --compile:\nrunning install\nrunning build\nrunning build_py\ncreating build\ncreating build/lib.macosx-10.12-intel-2.7\ncreating build/lib.macosx-10.12-intel-2.7/autopy\ncopying autopy/__init__.py -&gt; build/lib.macosx-10.12-intel-2.7/autopy\nrunning build_ext\nbuilding 'color' extension\ncreating build/temp.macosx-10.12-intel-2.7\ncreating build/temp.macosx-10.12-intel-2.7/src\ncc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -DNDEBUG=1 -DMM_LITTLE_ENDIAN -DIS_MACOSX -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/autopy-color-module.c -o build/temp.macosx-10.12-intel-2.7/src/autopy-color-module.o -Wall -Wparentheses -Winline -Wbad-function-cast -Wdisabled-optimization -Wshadow\ncc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -DNDEBUG=1 -DMM_LITTLE_ENDIAN -DIS_MACOSX -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/MMBitmap.c -o build/temp.macosx-10.12-intel-2.7/src/MMBitmap.o -Wall -Wparentheses -Winline -Wbad-function-cast -Wdisabled-optimization -Wshadow\ncc -bundle -undefined dynamic_lookup -arch x86_64 -arch i386 -Wl,-F. build/temp.macosx-10.12-intel-2.7/src/autopy-color-module.o build/temp.macosx-10.12-intel-2.7/src/MMBitmap.o -o build/lib.macosx-10.12-intel-2.7/autopy/color.so\nbuilding 'screen' extension\ncc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -DNDEBUG=1 -DMM_LITTLE_ENDIAN -DIS_MACOSX -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/autopy-screen-module.c -o build/temp.macosx-10.12-intel-2.7/src/autopy-screen-module.o -Wall -Wparentheses -Winline -Wbad-function-cast -Wdisabled-optimization -Wshadow\ncc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -DNDEBUG=1 -DMM_LITTLE_ENDIAN -DIS_MACOSX -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/screen.c -o build/temp.macosx-10.12-intel-2.7/src/screen.o -Wall -Wparentheses -Winline -Wbad-function-cast -Wdisabled-optimization -Wshadow\ncc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -DNDEBUG=1 -DMM_LITTLE_ENDIAN -DIS_MACOSX -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/screengrab.c -o build/temp.macosx-10.12-intel-2.7/src/screengrab.o -Wall -Wparentheses -Winline -Wbad-function-cast -Wdisabled-optimization -Wshadow\nsrc/screengrab.c:48:26: warning: implicit declaration of function 'CGDisplayBitsPerPixel' is invalid in C99 [-Wimplicit-function-declaration]\n        bitsPerPixel = (uint8_t)CGDisplayBitsPerPixel(displayID);\n                                ^\nsrc/screengrab.c:174:15: warning: 'kCGLPFAFullScreen' is deprecated: first deprecated in macOS 10.6 [-Wdeprecated-declarations]\n        attribs[0] = kCGLPFAFullScreen;\n                     ^\n/System/Library/Frameworks/OpenGL.framework/Headers/CGLTypes.h:98:2: note: 'kCGLPFAFullScreen' has been explicitly marked deprecated here\n        kCGLPFAFullScreen OPENGL_ENUM_DEPRECATED(10_0, 10_6)     =  54,\n        ^\nsrc/screengrab.c:191:2: warning: 'CGLSetFullScreen' is deprecated: first deprecated in macOS 10.6 [-Wdeprecated-declarations]\n        CGLSetFullScreen(glContext);\n        ^\n/System/Library/Frameworks/OpenGL.framework/Headers/OpenGL.h:73:17: note: 'CGLSetFullScreen' has been explicitly marked deprecated here\nextern CGLError CGLSetFullScreen(CGLContextObj ctx) OPENGL_DEPRECATED(10_0, 10_6);\n                ^\nsrc/screengrab.c:194:2: warning: implicit declaration of function 'glReadBuffer' is invalid in C99 [-Wimplicit-function-declaration]\n        glReadBuffer(GL_FRONT);\n        ^\nsrc/screengrab.c:194:15: error: use of undeclared identifier 'GL_FRONT'\n        glReadBuffer(GL_FRONT);\n                     ^\nsrc/screengrab.c:197:2: warning: implicit declaration of function 'glFinish' is invalid in C99 [-Wimplicit-function-declaration]\n        glFinish();\n        ^\nsrc/screengrab.c:199:6: warning: implicit declaration of function 'glGetError' is invalid in C99 [-Wimplicit-function-declaration]\n        if (glGetError() != GL_NO_ERROR) return NULL;\n            ^\nsrc/screengrab.c:199:22: error: use of undeclared identifier 'GL_NO_ERROR'\n        if (glGetError() != GL_NO_ERROR) return NULL;\n                            ^\nsrc/screengrab.c:207:2: warning: implicit declaration of function 'glPopClientAttrib' is invalid in C99 [-Wimplicit-function-declaration]\n        glPopClientAttrib(); /* Clear attributes previously set. */\n        ^\nsrc/screengrab.c:223:2: warning: implicit declaration of function 'glPushClientAttrib' is invalid in C99 [-Wimplicit-function-declaration]\n        glPushClientAttrib(GL_CLIENT_PIXEL_STORE_BIT);\n        ^\nsrc/screengrab.c:223:21: error: use of undeclared identifier 'GL_CLIENT_PIXEL_STORE_BIT'\n        glPushClientAttrib(GL_CLIENT_PIXEL_STORE_BIT);\n                           ^\nsrc/screengrab.c:225:2: warning: implicit declaration of function 'glPixelStorei' is invalid in C99 [-Wimplicit-function-declaration]\n        glPixelStorei(GL_PACK_ALIGNMENT, BYTE_ALIGN); /* Force alignment. */\n        ^\nsrc/screengrab.c:225:16: error: use of undeclared identifier 'GL_PACK_ALIGNMENT'\n        glPixelStorei(GL_PACK_ALIGNMENT, BYTE_ALIGN); /* Force alignment. */\n                      ^\nsrc/screengrab.c:226:16: error: use of undeclared identifier 'GL_PACK_ROW_LENGTH'\n        glPixelStorei(GL_PACK_ROW_LENGTH, 0);\n                      ^\nsrc/screengrab.c:227:16: error: use of undeclared identifier 'GL_PACK_SKIP_ROWS'\n        glPixelStorei(GL_PACK_SKIP_ROWS, 0);\n                      ^\nsrc/screengrab.c:228:16: error: use of undeclared identifier 'GL_PACK_SKIP_PIXELS'\n        glPixelStorei(GL_PACK_SKIP_PIXELS, 0);\n                      ^\nsrc/screengrab.c:235:2: warning: implicit declaration of function 'glReadPixels' is invalid in C99 [-Wimplicit-function-declaration]\n        glReadPixels(x, y, width, height,\n        ^\nsrc/screengrab.c:236:30: error: use of undeclared identifier 'GL_BGRA'\n                     MMRGB_IS_BGR ? GL_BGRA : GL_RGBA,\n                                    ^\nsrc/screengrab.c:240:15: error: use of undeclared identifier 'GL_UNSIGNED_INT_8_8_8_8_REV'\n                     GL_UNSIGNED_INT_8_8_8_8_REV, /* Native format */\n                     ^\n10 warnings and 9 errors generated.\nerror: command 'cc' failed with exit status 1\n\n----------------------------------------\nCommand \"/usr/bin/python -u -c \"import setuptools, tokenize;__file__='/private/tmp/pip-build-jSobWR/autopy/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-lxk785-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/tmp/pip-build-jSobWR/autopy/\n</code></pre>\n\n<p>Why am i getting this error?</p>\n"}, {"tags": ["python", "windows", "ssl", "https", "cygwin"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1474492741, "post_id": 39626142, "comment_id": 66558892, "body": "Which pip version?"}, {"owner": {"reputation": 20089, "user_id": 827480, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/15e7a6e4a98126f1d11435ba77112214?s=128&d=identicon&r=PG", "display_name": "Eric B.", "link": "https://stackoverflow.com/users/827480/eric-b"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1474557522, "post_id": 39626142, "comment_id": 66589163, "body": "I&#39;m using pip 8.1.2.  <code>pip 8.1.2 from &#47;usr&#47;lib&#47;python2.7&#47;site-packages&#47;pip-8.1.2-py2.7.egg</code>"}, {"owner": {"reputation": 20089, "user_id": 827480, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/15e7a6e4a98126f1d11435ba77112214?s=128&d=identicon&r=PG", "display_name": "Eric B.", "link": "https://stackoverflow.com/users/827480/eric-b"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1474571100, "post_id": 39626142, "comment_id": 66597234, "body": "@KlausD. I updated my question to indicate that I&#39;ve since removed the Windows Python and installed it via cygwin only but to no avail either."}], "answers": [{"comments": [{"owner": {"reputation": 20089, "user_id": 827480, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/15e7a6e4a98126f1d11435ba77112214?s=128&d=identicon&r=PG", "display_name": "Eric B.", "link": "https://stackoverflow.com/users/827480/eric-b"}, "edited": false, "score": 0, "creation_date": 1474557599, "post_id": 39626495, "comment_id": 66589208, "body": "I gave up trying to get the windows version of python working with the path.  I just removed it and reinstalled the Cygwin version of python 2.7 and installed pip using easy_install.  But I still can&#39;t get the SSL_CERT_DIR/SSL_CERT_FILE vars to work."}, {"owner": {"reputation": 433, "user_id": 1984065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533af3c4b1adeaeea0946afb4bf431c3?s=128&d=identicon&r=PG", "display_name": "jerry", "link": "https://stackoverflow.com/users/1984065/jerry"}, "reply_to_user": {"reputation": 20089, "user_id": 827480, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/15e7a6e4a98126f1d11435ba77112214?s=128&d=identicon&r=PG", "display_name": "Eric B.", "link": "https://stackoverflow.com/users/827480/eric-b"}, "edited": false, "score": 3, "creation_date": 1474578236, "post_id": 39626495, "comment_id": 66601036, "body": "Under Linux pip conf file is located under $HOME/.config/pip/pip.conf or $HOME/.pip/pip.conf."}, {"owner": {"reputation": 20089, "user_id": 827480, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/15e7a6e4a98126f1d11435ba77112214?s=128&d=identicon&r=PG", "display_name": "Eric B.", "link": "https://stackoverflow.com/users/827480/eric-b"}, "edited": false, "score": 2, "creation_date": 1474655678, "post_id": 39626495, "comment_id": 66636389, "body": "Excellent.  Works as described.  However, why does pip not use the same CA trust store as python?"}, {"owner": {"reputation": 101, "user_id": 3569534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jMnZk.png?s=128&g=1", "display_name": "bgStack15", "link": "https://stackoverflow.com/users/3569534/bgstack15"}, "edited": false, "score": 1, "creation_date": 1513272044, "post_id": 39626495, "comment_id": 82599672, "body": "@jerry, according to the docs <a href=\"https://pip.pypa.io/en/stable/user_guide/\" rel=\"nofollow noreferrer\">pip.pypa.io/en/stable/user_guide</a> you can also use the site-wide conf at <code>&#47;etc&#47;pip.conf</code>"}, {"owner": {"reputation": 1122, "user_id": 5398884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/if3Tv.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5398884/tim"}, "edited": false, "score": 0, "creation_date": 1523640267, "post_id": 39626495, "comment_id": 86659920, "body": "directory does not exist. I&#39;m on Win 10 using python 3.6.5. I did a search for any file named pip.ini and nothing was found. I searched for pip.conf and nothing was found."}, {"owner": {"reputation": 287, "user_id": 3262423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8d66f4d574c73479ac36937366d14a?s=128&d=identicon&r=PG&f=1", "display_name": "42shadow42", "link": "https://stackoverflow.com/users/3262423/42shadow42"}, "edited": false, "score": 1, "creation_date": 1538421709, "post_id": 39626495, "comment_id": 92129731, "body": "How would you do this on a mac machine?"}], "tags": [], "owner": {"reputation": 433, "user_id": 1984065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533af3c4b1adeaeea0946afb4bf431c3?s=128&d=identicon&r=PG", "display_name": "jerry", "link": "https://stackoverflow.com/users/1984065/jerry"}, "is_accepted": true, "score": 5, "last_activity_date": 1474491601, "creation_date": 1474491601, "answer_id": 39626495, "question_id": 39626142, "link": "https://stackoverflow.com/questions/39626142/python-pip-throwing-ssl-certificate-verify-failed-even-if-certificate-chain/39626495#39626495", "title": "Python (pip) throwing [SSL: CERTIFICATE_VERIFY_FAILED] even if certificate chain updated", "body": "<p>You can add pip command line option defaults to its configuration file. In windows, it should be located under %APPDATA%\\pip\\pip.ini.</p>\n\n<p>To add a certificate, put the following lines in the file:</p>\n\n<pre><code>[global]\ncert = windows path to your certificate\n</code></pre>\n"}], "owner": {"reputation": 20089, "user_id": 827480, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/15e7a6e4a98126f1d11435ba77112214?s=128&d=identicon&r=PG", "display_name": "Eric B.", "link": "https://stackoverflow.com/users/827480/eric-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5955, "favorite_count": 3, "accepted_answer_id": 39626495, "answer_count": 1, "score": 4, "last_activity_date": 1474571043, "creation_date": 1474490200, "last_edit_date": 1495542310, "question_id": 39626142, "link": "https://stackoverflow.com/questions/39626142/python-pip-throwing-ssl-certificate-verify-failed-even-if-certificate-chain", "title": "Python (pip) throwing [SSL: CERTIFICATE_VERIFY_FAILED] even if certificate chain updated", "body": "<p>This is a followup to a <a href=\"https://stackoverflow.com/q/39356413/827480\">previous SO post</a>.</p>\n\n<p>I am using Windows/cygwin and I have the need for python to understand a custom CA certificate, as the network infrastructure resigns all SSL requests with its own certificate.</p>\n\n<p>If I try to run <code>pip search SimpleHTTPServer</code>, I get the following error message:</p>\n\n<pre><code>...\n  File \"c:\\users\\erbe\\appdata\\local\\programs\\python\\python35-32\\lib\\ssl.py\", line 633, in do_handshake\n    self._sslobj.do_handshake()\nssl.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)\n</code></pre>\n\n<p>I have tried to add the certificates to my list of trusted certificates by doing the following:</p>\n\n<ol>\n<li>Copy my .pem file to /etc/pki/ca-trust/source/anchors</li>\n<li><code>update-ca-trust extract</code></li>\n</ol>\n\n<p>I have verified that this works as I can now point to the generated PEM file and run pip successfully:  <code>pip --cert /usr/local/ssl/cert.pem search SimpleHTTPServer</code>:</p>\n\n<pre><code>$ pip --cert tls-ca-bundle.pem search SimpleHTTPServer\nComplexHTTPServer (0.1)      - A Multithreaded Python SimpleHTTPServer\nSimpleTornadoServer (1.0)    - better SimpleHTTPServer using tornado\nrangehttpserver (1.2.0)      - SimpleHTTPServer with support for Range requests\n</code></pre>\n\n<p>However, I want this to work without having to specify the certificate manually every time.  I am hoping to update the certificate chain that python uses:</p>\n\n<pre><code>$ python -c \"import ssl; print(ssl.get_default_verify_paths())\"\nDefaultVerifyPaths(cafile=None, capath=None, openssl_cafile_env='SSL_CERT_FILE', openssl_cafile='/usr/local/ssl/cert.pem', openssl_capath_env='SSL_CERT_DIR', openssl_capath='/usr/local/ssl/certs')\n</code></pre>\n\n<p>I have verified that through a series of symlinks, that /usr/local/ssl/cert.pem points to the same file.  However, if I execute <code>pip</code>, I still get the <code>[SSL: CERTIFICATE_VERIFY_FAILED]</code> error message.</p>\n\n<p>I uninstalled the Windows version of python, and reinstalled the Cygwin version of python.  With it, I ran <code>easy_install-2.7 pip</code>.  Now at least I am able to execute pip with the full certificate path without an error message:</p>\n\n<pre><code>$ pip --cert /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem search simpleHttpServer\nLittleHTTPServer (0.5.0)     - Little bit extended SimpleHTTPServer\nSimpleHTTP404Server (0.2.0)  - A Python SimpleHTTPServer, but serves 404.html if a page is not found.\ndjango-localsrv (0.1.2)      - Django app for serving static content from different sources (files, strings, urls, etc.) at custom paths,\n</code></pre>\n\n<p>Just to be safe, I also tried updating the SSL_CERT_DIR varaible to point to /etc/pki/ca-trust-extracted/pem and set the SSL_CERT_FILE to /etc/pki/ca-trust-extracted/pem/tls-ca-bundle.pem but these do not work:</p>\n\n<pre><code>$ set | grep SSL\nSSL_CERT_DIR=/etc/pki/ca-trust/extracted/pem\nSSL_CERT_FILE=/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\n\n$ python -c \"import ssl; print(ssl.get_default_verify_paths())\"\nDefaultVerifyPaths(cafile='/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem', capath='/etc/pki/ca-trust/extracted/pem', openssl_cafile_env='SSL_CERT_FILE', openssl_cafile='/usr/ssl/cert.pem', openssl_capath_env='SSL_CERT_DIR', openssl_capath='/usr/ssl/certs')\n\n\n$ pip search simpleHttpServer\nException:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  ...\n  ...\n  File \"/usr/lib/python2.7/site-packages/pip-8.1.2-py2.7.egg/pip/_vendor/requests/adapters.py\", line 477, in send\n    raise SSLError(e, request=request)\nSSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)\n</code></pre>\n\n<p>What am I doing wrong?  Is this a cygwin vs Windows problem?  Which PEM files do I need to update?  </p>\n"}, {"tags": ["python", "path", "pyfftw"], "answers": [{"comments": [{"owner": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1474536744, "post_id": 39626071, "comment_id": 66574789, "body": "Really, that works? I understood that the long version of fftw wasn&#39;t supported on ARM. pyFFTW is not currently supported on ARM for this reason. See <a href=\"https://github.com/pyFFTW/pyFFTW/issues/127\" rel=\"nofollow noreferrer\">this issue</a>. If you want to help fix this, we&#39;re keen for input (it amounts to handling the missing libraries properly and raising suitable exceptions on the Python end)."}, {"owner": {"reputation": 893, "user_id": 6574147, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/K27dr.png?s=128&g=1", "display_name": "Mesco", "link": "https://stackoverflow.com/users/6574147/mesco"}, "reply_to_user": {"reputation": 7630, "user_id": 709852, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bf402f309d40d607a369395e32a984fc?s=128&d=identicon&r=PG", "display_name": "Henry Gomersall", "link": "https://stackoverflow.com/users/709852/henry-gomersall"}, "edited": false, "score": 0, "creation_date": 1474558917, "post_id": 39626071, "comment_id": 66590207, "body": "Yes, it works. I saw this issue. I have reinstalled FFTW manually with enabled long double and float types. Than install pyFFTW by pip. I would glad to help but I am new in python and Im afraid it&#39;s beyond my scope"}], "tags": [], "owner": {"reputation": 893, "user_id": 6574147, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/K27dr.png?s=128&g=1", "display_name": "Mesco", "link": "https://stackoverflow.com/users/6574147/mesco"}, "is_accepted": true, "score": 0, "last_activity_date": 1474489948, "creation_date": 1474489948, "answer_id": 39626071, "question_id": 39626070, "link": "https://stackoverflow.com/questions/39626070/pyfftw-doesnt-find-libfftw3l-so-while-import/39626071#39626071", "title": "pyFFTW doesn&#39;t find libfftw3l.so while import", "body": "<p>The problem was with PYTHONPATH.</p>\n\n<p>To check if the file is somewhere at the disk:</p>\n\n<pre><code>$ sudo file / -name libfftw3l.so.3\n/home/pi/bin/fftw-3.3.5/.libs/libfftw3.so.3\n/usr/lib/arm-linux-gnueabihf/libfftw3.so.3\n/usr/local/lib/libfftw3.so.3\n</code></pre>\n\n<p>And add a line before import pyfftw (see <a href=\"https://docs.python.org/3/tutorial/modules.html\" rel=\"nofollow\" title=\"here\">here</a>):</p>\n\n<pre><code>import sys\nsys.path.append('/usr/local/lib/libfftw3.so.3')\n</code></pre>\n"}], "owner": {"reputation": 893, "user_id": 6574147, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/K27dr.png?s=128&g=1", "display_name": "Mesco", "link": "https://stackoverflow.com/users/6574147/mesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 39626071, "answer_count": 1, "score": 0, "last_activity_date": 1474489948, "creation_date": 1474489948, "question_id": 39626070, "link": "https://stackoverflow.com/questions/39626070/pyfftw-doesnt-find-libfftw3l-so-while-import", "title": "pyFFTW doesn&#39;t find libfftw3l.so while import", "body": "<p>In my Raspbian system I have succesfully installed pyFFTW, but there is a problem while import package.</p>\n\n<pre><code>  import pyfftw\n    File \"/usr/local/lib/python3.4/dist-packages/pyfftw/__init__.py\", line 16, in &lt;module&gt;\n  from .pyfftw import ( \nImportError: libfftw3l.so.3: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>Actually, I have FFTW installed from source.</p>\n\n<hr>\n\n<p>I've dig into __init__.py and there is an <strong>relative import</strong> line:</p>\n\n<pre><code>from .pyfftw import (\n              FFTW\n              blah blah )\n</code></pre>\n\n<p>there is no module pyfftw in the . folder but I suppose this line indicates to ./<strong>pyfftw.cpython-34m.so</strong> file which probably wraps C code of FFTW.</p>\n\n<p>How to tell to this pyfftw.cpython-34m.so file where it should look for correct path?</p>\n"}, {"tags": ["python", "printing", "spaces"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1474489959, "post_id": 39626058, "comment_id": 66557416, "body": "Upgrade to 3.x and use the <code>end</code> parameter, and/or build the string you want <i>then</i> print it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1474489986, "post_id": 39626058, "comment_id": 66557426, "body": "or do <code>sys.stdout.write(str(i))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1474490646, "creation_date": 1474490646, "answer_id": 39626273, "question_id": 39626058, "link": "https://stackoverflow.com/questions/39626058/delete-space-in-one-line-prints/39626273#39626273", "title": "delete space in one line prints", "body": "<p>In Python 3, you can use:</p>\n\n<pre><code>for i in range(5):\n    print(i, end=\"\")\n</code></pre>\n\n<p>In Python 2, however you can not achieve it via simple print. There are two ways to do it:</p>\n\n<pre><code># Way 1: Using \"sys.stdout\". But this will write to stdout \n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; for i in range(5):\n...     sys.stdout.write(str(i))\n... \n01234&gt;&gt;&gt;\n\n# Way 2: Convert it to list of string and then join them\n&gt;&gt;&gt; print ''.join(map(str, range(5)))\n01234\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6414810, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37cbdce7e204a830b2a9933a018a6ab8?s=128&d=identicon&r=PG&f=1", "display_name": "ReVaN", "link": "https://stackoverflow.com/users/6414810/revan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1474490646, "creation_date": 1474489911, "question_id": 39626058, "link": "https://stackoverflow.com/questions/39626058/delete-space-in-one-line-prints", "title": "delete space in one line prints", "body": "<p>How to remove spaces in this print ?</p>\n\n<p>For example</p>\n\n<pre><code>for i in range(5):\nprint i,\n</code></pre>\n\n<p>Will prints: 1 2 3 4 5</p>\n\n<p>But I would like to get print like: 12345</p>\n\n<p>Someone can help ?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1474490323, "post_id": 39626089, "comment_id": 66557620, "body": "Exactly what I was looking for. I am still a bit vague on how to use broadcasting properly."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1474491453, "post_id": 39626089, "comment_id": 66558217, "body": "@MadWombat See if the added comments make sense. If the concept of <code>broadcasting</code> still eludes you, I would suggest going through the docs themselves."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 0, "last_activity_date": 1474491396, "last_edit_date": 1474491396, "creation_date": 1474490004, "answer_id": 39626089, "question_id": 39626041, "link": "https://stackoverflow.com/questions/39626041/make-a-list-of-ranges-in-numpy/39626089#39626089", "title": "Make a list of ranges in numpy", "body": "<p>You can use <a href=\"http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow\"><code>broadcasting</code></a> after extending <code>starts</code> to a <code>2D</code> version and adding in the <code>1D</code> range array, like so -</p>\n\n<pre><code>x = starts[:,None] + np.arange(10)\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Let's take a small example for <code>starts</code> to see what that <code>broadcasting</code> does in this case.</p>\n\n<pre><code>In [382]: starts\nOut[382]: array([3, 1, 3, 2])\n\nIn [383]: starts.shape\nOut[383]: (4,)\n\nIn [384]: starts[:,None]\nOut[384]: \narray([[3],\n       [1],\n       [3],\n       [2]])\n\nIn [385]: starts[:,None].shape\nOut[385]: (4, 1)\n\nIn [386]: np.arange(10).shape\nOut[386]: (10,)\n</code></pre>\n\n<p>Thus, looking at the shapes and putting those together, a schematic diagram of the same would look something like this -</p>\n\n<pre><code>starts         :  4\nnp.arange(10)  :  10\n</code></pre>\n\n<p>After extending <code>starts</code> :</p>\n\n<pre><code>starts[:,None] :  4  x  1\nnp.arange(10)  :       10\n</code></pre>\n\n<p>Thus, when we add <code>starts[:,None]</code> with <code>np.arange(10)</code>, the elems of <code>starts[:,None]</code> would be broadcasted along its second axis <code>10</code> times corresponding to the length of the other array along that axis. For <code>np.arange(10)</code>, it would be converted to <code>2D</code> with its first dim being a singleton dim and its elems being broadcasted along it <code>4</code> times correspoinding to the length of <code>4</code> for the other array <code>starts[:,None]</code> along that axis. Please note that there aren't explicit replications, as under the hood the elems are broadcasted and added on the fly.</p>\n\n<p>Thus, functionally we would have the replications, like so -</p>\n\n<pre><code>In [391]: np.repeat(starts[:,None],10,axis=1)\nOut[391]: \narray([[3, 3, 3, 3, 3, 3, 3, 3, 3, 3],\n       [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n       [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],\n       [2, 2, 2, 2, 2, 2, 2, 2, 2, 2]])\n\nIn [392]: np.repeat(np.arange(10)[None],4,axis=0)\nOut[392]: \narray([[0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n       [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n       [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n       [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]])\n</code></pre>\n\n<p>These broadcasted elems are then added to give us the desired output <code>x</code>.</p>\n"}], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 39626089, "answer_count": 1, "score": 0, "last_activity_date": 1474491396, "creation_date": 1474489817, "question_id": 39626041, "link": "https://stackoverflow.com/questions/39626041/make-a-list-of-ranges-in-numpy", "title": "Make a list of ranges in numpy", "body": "<p>I want to make a list of integer sequences with random start points. The way I would do this in pure python is </p>\n\n<pre>\nx = np.zeros(1000, 10) # 1000 sequences of 10 elements each\nstarts = np.random.randint(1, 1000, 1000)\nfor i in range(len(x)):\n    x[i] = np.arange(starts[i], starts[i] + 10)\n</pre>\n\n<p>I wonder if there is a more elegant way of doing this using Numpy functionality.</p>\n"}, {"tags": ["python", "python-2.7", "tkinter", "pygame", "pygame-surface"], "answers": [{"tags": [], "owner": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1474609371, "last_edit_date": 1474609371, "creation_date": 1474576139, "answer_id": 39648328, "question_id": 39626018, "link": "https://stackoverflow.com/questions/39626018/getting-position-of-user-click-in-pygame/39648328#39648328", "title": "Getting position of user click in pygame", "body": "<p>First I have to say that I don't know anything about pygame. However, if you are already using Tkinter, I could help you maybe: I would define a new function (let's call it mouse_click). In the button-click-function I would bind the new function to the game's surface. In the new function I print out the current mouse position:</p>\n\n<pre><code>def button_click(self):\n    game_surface.bind(\"&lt;Button-1&gt;\", self.mouse_click)\n\ndef mouse_click(self, event):\n    print \"X:\", event.x\n    print \"Y:\", event.y\n</code></pre>\n\n<p>I hope this is helpful. Please notice that you should modify this code to make it work in your program (using the correct widget names and so on).\nBy the way, \"Button-1\" is the event identifier of the left mouse button.</p>\n"}, {"tags": [], "owner": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "is_accepted": false, "score": 1, "last_activity_date": 1506276140, "last_edit_date": 1506276140, "creation_date": 1474634234, "answer_id": 39660950, "question_id": 39626018, "link": "https://stackoverflow.com/questions/39626018/getting-position-of-user-click-in-pygame/39660950#39660950", "title": "Getting position of user click in pygame", "body": "<p>In the most basic form here's how you do it in pygame:</p>\n\n<pre><code>import pygame\npygame.init()\n\nscreen = pygame.display.set_mode((100, 100))\nclock = pygame.time.Clock()\n\nwhile True:\n    clock.tick(60)\n\n    for event in pygame.event.get():\n        if event.type == pygame.MOUSEBUTTONUP:  # or MOUSEBUTTONDOWN depending on what you want.\n            print(event.pos)\n        elif event.type == pygame.QUIT:\n            quit()\n\n    pygame.display.update()\n</code></pre>\n\n<p>More information on how to handle pygame events can be found in the <a href=\"http://www.pygame.org/docs/ref/event.html\" rel=\"nofollow noreferrer\">docs</a>.</p>\n\n<p>And here's how you do it in tkinter:</p>\n\n<pre><code>try:\n    import tkinter as tk  # Python 3\nexcept ImportError:\n    import Tkinter as tk  # Python 2\n\nroot = tk.Tk()\n\ndef print_pos(event):\n    print(event.x, event.y)\n\nroot.bind(\"&lt;Button-1&gt;\", print_pos)\nroot.mainloop()\n</code></pre>\n\n<p>More information on tkinter events can be found in <a href=\"http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm\" rel=\"nofollow noreferrer\">effbots documentation</a>.</p>\n\n<p>I would suggest <strong>not</strong> putting <code>break</code> in an event loop in pygame. Doing so makes all other events go un-handled, meaning that it's possible for the program to not respond to certain events.</p>\n\n<p>Your <em>\"EDIT: [...]\"</em> is unfortunately wrong, given the code you've given us. I had no problem with the code; it printed the position of where I released the mouse button and always printed just one position. So there have to be a logical error somewhere else in your code.</p>\n"}], "owner": {"reputation": 115, "user_id": 3157627, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2e54c63bf596060e0e586a33c0dee793?s=128&d=identicon&r=PG&f=1", "display_name": "joyalrj22", "link": "https://stackoverflow.com/users/3157627/joyalrj22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1765, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506276140, "creation_date": 1474489739, "last_edit_date": 1474492051, "question_id": 39626018, "link": "https://stackoverflow.com/questions/39626018/getting-position-of-user-click-in-pygame", "title": "Getting position of user click in pygame", "body": "<p>I have a pygame window embedded in a a frame in tkinter. In another frame I have a button which calls the following function when clicked:</p>\n\n<pre><code>def setStart():\nglobal start\n# set start position\nfor event in pygame.event.get():\n    if event.type == pygame.MOUSEBUTTONUP:\n        start = event.pos\n        print(\"start\",start)\n        break\n</code></pre>\n\n<p>I am intending for the program to print the position of the place where the user clicked on the pygame surface after the button is clicked. However on the first click of the button and the following click of the pygame surface there is no output. It is on the second click of the button <em>before the corresponding second  click on the pygame surface</em> that python prints out an output like : </p>\n\n<p>('start', (166, 115))</p>\n\n<p>How can I get it to give me a result right after the click on the pygame surface? I had the same problem when I had two seperate tkinter and pygame windows so the embedding of pygame into tkinter is unlikely to be the cause of the problem.</p>\n\n<p>EDIT: after further testing it appears that if the button is pressed and then the pygame surface is clicked on multiple times, upon a second click of the button the coordinates of all of these clicks are printed out as a batch. </p>\n"}, {"tags": ["python", "csv", "dictionary", "setdefault"], "comments": [{"owner": {"reputation": 3277, "user_id": 557022, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fa98831cef96f8b9fb7530160338da7?s=128&d=identicon&r=PG", "display_name": "picmate \u6d85", "link": "https://stackoverflow.com/users/557022/picmate-%e6%b6%85"}, "edited": false, "score": 0, "creation_date": 1474490125, "post_id": 39625962, "comment_id": 66557506, "body": "Could you give in an example, the structure of the final csv you are trying to create? That would be really helpful"}, {"owner": {"reputation": 37, "user_id": 6749366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-VXJAl01hIQc/AAAAAAAAAAI/AAAAAAAAAeQ/q9qg3uWCIuE/photo.jpg?sz=128", "display_name": "Hamed Haddadian", "link": "https://stackoverflow.com/users/6749366/hamed-haddadian"}, "reply_to_user": {"reputation": 3277, "user_id": 557022, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fa98831cef96f8b9fb7530160338da7?s=128&d=identicon&r=PG", "display_name": "picmate \u6d85", "link": "https://stackoverflow.com/users/557022/picmate-%e6%b6%85"}, "edited": false, "score": 0, "creation_date": 1474490304, "post_id": 39625962, "comment_id": 66557607, "body": "thank you picmate. I edited the questions with more details? let me know if I should add more info."}, {"owner": {"reputation": 3277, "user_id": 557022, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fa98831cef96f8b9fb7530160338da7?s=128&d=identicon&r=PG", "display_name": "picmate \u6d85", "link": "https://stackoverflow.com/users/557022/picmate-%e6%b6%85"}, "edited": false, "score": 0, "creation_date": 1474490672, "post_id": 39625962, "comment_id": 66557793, "body": "You are welcome, the last edit especially is great. Thanks."}, {"owner": {"reputation": 3277, "user_id": 557022, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fa98831cef96f8b9fb7530160338da7?s=128&d=identicon&r=PG", "display_name": "picmate \u6d85", "link": "https://stackoverflow.com/users/557022/picmate-%e6%b6%85"}, "edited": false, "score": 0, "creation_date": 1474491872, "post_id": 39625962, "comment_id": 66558432, "body": "I posted an answer, let me know whether that works. For your car example, it does."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6749366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-VXJAl01hIQc/AAAAAAAAAAI/AAAAAAAAAeQ/q9qg3uWCIuE/photo.jpg?sz=128", "display_name": "Hamed Haddadian", "link": "https://stackoverflow.com/users/6749366/hamed-haddadian"}, "edited": false, "score": 0, "creation_date": 1474495263, "post_id": 39626554, "comment_id": 66560020, "body": "import csv import pandas as pd  df = pd.read_csv(&#39;test.csv&#39;, names=[&#39;Vulnerability Title&#39;, &#39;Vulnerability Severity Level&#39;,&#39;Asset IP Address&#39;]) #print df grouped = df.groupby([&#39;Vulnerability Title&#39;,&#39;Vulnerability Severity Level&#39;])  groups = grouped.groups #print groups new_data = [k + (v[&#39;Asset IP Address&#39;].tolist(),) for k, v in grouped] new_df = pd.DataFrame(new_data, columns=[&#39;Vulnerability Title&#39; ,&#39;Vulnerability Severity Level&#39;, &#39;Asset IP Address&#39;])  print new_df new_df.to_csv(&#39;final.csv&#39;)"}], "tags": [], "owner": {"reputation": 3277, "user_id": 557022, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fa98831cef96f8b9fb7530160338da7?s=128&d=identicon&r=PG", "display_name": "picmate \u6d85", "link": "https://stackoverflow.com/users/557022/picmate-%e6%b6%85"}, "is_accepted": false, "score": 1, "last_activity_date": 1474491802, "creation_date": 1474491802, "answer_id": 39626554, "question_id": 39625962, "link": "https://stackoverflow.com/questions/39625962/parsing-csv-using-python/39626554#39626554", "title": "Parsing CSV using Python", "body": "<p>Answer considering your car example. Essentially, I am creating a dictionary which has the car brand as the key, and a two element tuple. The first element of the tuple is the color and the second, a list of owners.):</p>\n\n<pre><code>import csv\n\ncar_dict = {}\nwith open('&lt;file_to_read&gt;', 'rb') as fi:\n    reader = csv.reader(fi)\n    for f in reader:\n        if f[0] in car_dict:\n            car_dict[f[0]][1].append(f[2]) \n        else:\n            car_dict[f[0]] = (f[1], [f[2]])\n\nwith open('&lt;file_to_write&gt;', 'wb') as ou:\n    for k in car_dict:\n        out_string ='{}\\t{}\\t{}\\n'.format(k, car_dict[k][0], ','.join(car_dict[k][1]))\n        ou.write(out_string)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "is_accepted": true, "score": 1, "last_activity_date": 1474495901, "last_edit_date": 1474495901, "creation_date": 1474492342, "answer_id": 39626676, "question_id": 39625962, "link": "https://stackoverflow.com/questions/39625962/parsing-csv-using-python/39626676#39626676", "title": "Parsing CSV using Python", "body": "<p>When manipulate structured date, especially large data set. I would like to suggest you to use <a href=\"http://pandas.pydata.org/\" rel=\"nofollow\">pandas</a>.</p>\n\n<p>For your problem, I will give you an example of pandas groupby feature as solution. Suppose you have the data:</p>\n\n<pre><code>data = [['vt1', 3, '10.0.0.1'], ['vt1', 3, '10.0.0.2'], \n        ['vt2', 4, '10.0.10.10']]\n</code></pre>\n\n<p>The pandas to operate date is very fensy:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame(data=data, columns=['title', 'level', 'ip'])\ngrouped = df.groupby(['title', 'level'])\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>groups = grouped.groups\n</code></pre>\n\n<p>will be a dict that is almost you need.</p>\n\n<pre><code>print(groups)\n{('vt1', 3): [0, 1], ('vt2', 4): [2]}\n</code></pre>\n\n<p><code>[0,1]</code> represents the row label. Actually you can iterate on these groups to apply any operation you want. For example, If you want to save them into csv file:</p>\n\n<pre><code>new_data = [k + (v['ip'].tolist(),) for k, v in grouped]\nnew_df = pd.DataFrame(new_data, columns=['title', 'level', 'ips'])\n</code></pre>\n\n<p>Let's see what is new_df now:</p>\n\n<pre><code>  title  level                   ips\n0   vt1      3  [10.0.0.1, 10.0.0.2]\n1   vt2      4          [10.0.10.10]\n</code></pre>\n\n<p>That's what you need. And finally, save to file:</p>\n\n<pre><code>new_df.to_csv(filename)\n</code></pre>\n\n<p>I strongly suggest that you should learn pandas data manipulation. You may find that was much easier and cleaner.</p>\n"}], "owner": {"reputation": 37, "user_id": 6749366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-VXJAl01hIQc/AAAAAAAAAAI/AAAAAAAAAeQ/q9qg3uWCIuE/photo.jpg?sz=128", "display_name": "Hamed Haddadian", "link": "https://stackoverflow.com/users/6749366/hamed-haddadian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 39626676, "answer_count": 2, "score": 1, "last_activity_date": 1474495901, "creation_date": 1474489477, "last_edit_date": 1474495317, "question_id": 39625962, "link": "https://stackoverflow.com/questions/39625962/parsing-csv-using-python", "title": "Parsing CSV using Python", "body": "<p>I have the following csv file that has three fields Vulnerability Title, \nVulnerability Severity Level , Asset IP Address\nwhich shows vulnerabilities name , level of vulnerability and IP address that is having that vulnerability.\nI am trying to print a report that would list\nvulnerability in a column\nseverity next to it\nand last column list of IP address having that vulnerability.</p>\n\n<pre><code>Vulnerability Title Vulnerability Severity Level    Asset IP Address\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.103.64.10\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.103.64.10\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.103.65.10\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.103.65.164\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.103.64.10\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.10.30.81\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.10.30.81\nTLS/SSL Server Supports RC4 Cipher Algorithms (CVE-2013-2566)   4   10.10.50.82\nTLS/SSL Server Supports Weak Cipher Algorithms  6   10.103.65.164\nWeak Cryptographic Key  3   10.103.64.10\nUnencrypted Telnet Service Available    4   10.10.30.81\nUnencrypted Telnet Service Available    4   10.10.50.82\nTLS/SSL Server Supports Anonymous Cipher Suites with no Key Authentication  6   10.103.65.164\nTLS/SSL Server Supports The Use of Static Key Ciphers   3   10.103.64.10\nTLS/SSL Server Supports The Use of Static Key Ciphers   3   10.103.65.10\nTLS/SSL Server Supports The Use of Static Key Ciphers   3   10.103.65.100\nTLS/SSL Server Supports The Use of Static Key Ciphers   3   10.103.65.164\nTLS/SSL Server Supports The Use of Static Key Ciphers   3   10.103.65.164\nTLS/SSL Server Supports The Use of Static Key Ciphers   3   10.103.64.10\nTLS/SSL Server Supports The Use of Static Key Ciphers   3   10.10.30.81\n</code></pre>\n\n<p>and I would like to recreate a csv file that uses Vulnerability Title tab as the key and creates a second tab called Vulnerability Severity Level and last tab would contain all the ip addresses that has the vulnerabilities</p>\n\n<pre><code>import csv\nfrom pprint import pprint\nfrom collections import defaultdict\nimport glob\nx= glob.glob(\"/root/*.csv\")\n\nd = defaultdict()\nn = defaultdict()\nfor items in x:\n        with open(items, 'rb') as f:\n                reader = csv.DictReader(f, delimiter=',')\n                for row in reader:\n                        a = row[\"Vulnerability Title\"]\n                        b = row[\"Vulnerability Severity Level\"], row[\"Asset IP Address\"]\n                        c = row[\"Asset IP Address\"]\n        #               d = row[\"Vulnerability Proof\"]\n                        d.setdefault(a, []).append(b)\n        f.close()\npprint(d)\nwith open('results/ipaddress.csv', 'wb') as csv_file:\n        writer = csv.writer(csv_file)\n        for key, value in d.items():\n                for x,y in value:\n                        n.setdefault(y, []).append(x)\n#                       print x\n                        writer.writerow([key,n])\n\nwith open('results/ipaddress2.csv', 'wb') as csv2_file:\n        writer = csv.writer(csv2_file)\n        for key, value in d.items():\n             n.setdefault(value, []).append(key)\n             writer.writerow([key,n])\n</code></pre>\n\n<p>Since I cant explain very well. let me try to simplify</p>\n\n<p>lets say I have the following csv</p>\n\n<pre><code>Car model   owner\nHonda   Blue    James\nToyota  Blue    Tom\nChevy   Green   James\nChevy   Green   Tom\n</code></pre>\n\n<p>I am trying to create this csv as the following:</p>\n\n<pre><code>Car model   owner\nHonda   Blue    James\nToyota  Blue    Tom\nChevy   Green   James,Tom\n</code></pre>\n\n<p>both of the solutions are correct.\nhere is my final script as well</p>\n\n<pre><code>import csv\nimport pandas as pd\n\ndf = pd.read_csv('test.csv', names=['Vulnerability Title', 'Vulnerability Severity Level','Asset IP Address'])\n#print df\ngrouped = df.groupby(['Vulnerability Title','Vulnerability Severity Level'])\n\ngroups = grouped.groups\n#print groups\nnew_data = [k + (v['Asset IP Address'].tolist(),) for k, v in grouped]\nnew_df = pd.DataFrame(new_data, columns=['Vulnerability Title' ,'Vulnerability Severity Level', 'Asset IP Address'])\n\nprint new_df\nnew_df.to_csv('final.csv')\n</code></pre>\n\n<p>thank you</p>\n"}, {"tags": ["python", "email", "smtp"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 3, "creation_date": 1474492895, "post_id": 39625905, "comment_id": 66558952, "body": "Please add the full error traceback to your question!"}], "answers": [{"tags": [], "owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "is_accepted": false, "score": 0, "last_activity_date": 1474614039, "creation_date": 1474614039, "answer_id": 39654563, "question_id": 39625905, "link": "https://stackoverflow.com/questions/39625905/crash-when-sending-email-in-python-2-7-10/39654563#39654563", "title": "Crash when sending email in Python 2.7.10", "body": "<p>My standard suggestion (as I'm the developer of it) is <a href=\"https://github.com/kootenpv/yagmail\" rel=\"nofollow\">yagmail</a>.</p>\n\n<p>Install: <code>pip install yagmail</code></p>\n\n<p>Then:</p>\n\n<pre><code>import yagmail\nyag = yagmail.SMTP(fromaddr, \"pasword\")\nyag.send(toaddr, \"Hi there\", \"example\")\n</code></pre>\n\n<p>A lot of things can be made easier using the package, such as HTML email, adding attachments and avoiding having to write passwords in your script.</p>\n\n<p>For the instructions to all of this (and more, sorry for the cliches), have a look at the <a href=\"https://github.com/kootenpv/yagmail\" rel=\"nofollow\">readme on github</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 880, "user_id": 1600523, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e3cd6e9f621b8309a480e8b83f021b1a?s=128&d=identicon&r=PG", "display_name": "skynyrd", "link": "https://stackoverflow.com/users/1600523/skynyrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1474614982, "last_edit_date": 1495541304, "creation_date": 1474614982, "answer_id": 39654848, "question_id": 39625905, "link": "https://stackoverflow.com/questions/39625905/crash-when-sending-email-in-python-2-7-10/39654848#39654848", "title": "Crash when sending email in Python 2.7.10", "body": "<p>That's because you are getting error when trying to connect Google SMTP server.\nNote that if you are using Google SMTP you should use:</p>\n\n<p>Username: Your gmail address<br>\nPassword: Your gmail password</p>\n\n<p>And you should be already logged in. If you still get an error, you should check what is the problem in this list: <a href=\"https://stackoverflow.com/a/25238515/1600523\">https://stackoverflow.com/a/25238515/1600523</a></p>\n\n<p>Note: You can also use your own SMTP server.</p>\n"}], "owner": {"reputation": 173, "user_id": 4295477, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh4.googleusercontent.com/-pIihkXg_1a0/AAAAAAAAAAI/AAAAAAAAA8M/hDgl1_HRkjw/photo.jpg?sz=128", "display_name": "Adam Jarvis", "link": "https://stackoverflow.com/users/4295477/adam-jarvis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1474614982, "creation_date": 1474489296, "question_id": 39625905, "link": "https://stackoverflow.com/questions/39625905/crash-when-sending-email-in-python-2-7-10", "title": "Crash when sending email in Python 2.7.10", "body": "<p>I'm trying to send an email within python, but the program is crashing when I run it either as a function in a larger program or on it's own in the interpreter.</p>\n\n<pre><code>import smtplib\n\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\n\nfromaddr = \"exampleg@gmail.com\"\ntoaddr = \"recipient@address.com\"\nmsg = MIMEMultipart()\nmsg['From'] = fromaddr\nmsg['To'] = toaddr\nmsg['Subject'] = \"Hi there\"\n\nbody = \"example\"\nmsg.attach(MIMEText(body, 'plain'))\n\nserver = smtplib.SMTP('smtp.gmail.com', 587)\nserver.starttls()\nserver.login(fromaddr, \"Password\")\ntext = msg.as_string()\nserver.sendmail(fromaddr, toaddr, text)\nserver.quit()\n</code></pre>\n\n<p>In the interpreter, it seems to fail with <code>server = smtplib.SMTP('smtp.gmail.com', 587)</code></p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "if-statement", "list-comprehension"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 1, "creation_date": 1474489121, "post_id": 39625834, "comment_id": 66556961, "body": "I don&#39;t see any list comprehension.."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1474489150, "post_id": 39625834, "comment_id": 66556979, "body": "For a start, don&#39;t compare to <code>None</code> by equality; use identity."}, {"owner": {"reputation": 10371, "user_id": 3322400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l3BGk.jpg?s=128&g=1", "display_name": "Lo&#239;c", "link": "https://stackoverflow.com/users/3322400/lo%c3%afc"}, "edited": false, "score": 1, "creation_date": 1474489192, "post_id": 39625834, "comment_id": 66556995, "body": "One-liners are cool. But really, if you don&#39;t understand your own code, you may consider using multiple lines of code."}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1474489193, "post_id": 39625834, "comment_id": 66556996, "body": "I don&#39;t see why you&#39;re doing that <code>for x in range(len(arr or [])-2)</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1474490012, "post_id": 39625834, "comment_id": 66557448, "body": "Worrying about <code>arr</code> being <code>None</code> is just a distraction. Assume that <code>arr</code> is at least a valid list of things you can add, and go from there. You aren&#39;t checking that <code>arr</code> doesn&#39;t contain strings, after all."}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 6860252, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/gnFFD.jpg?s=128&g=1", "display_name": "Mr. Jibz", "link": "https://stackoverflow.com/users/6860252/mr-jibz"}, "edited": false, "score": 0, "creation_date": 1474489496, "post_id": 39625900, "comment_id": 66557170, "body": "This is extremely helpful and effective, thank you for the quick reply."}], "tags": [], "owner": {"reputation": 7576, "user_id": 1603840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJhqE.jpg?s=128&g=1", "display_name": "Karin", "link": "https://stackoverflow.com/users/1603840/karin"}, "is_accepted": false, "score": 1, "last_activity_date": 1474489280, "creation_date": 1474489280, "answer_id": 39625900, "question_id": 39625834, "link": "https://stackoverflow.com/questions/39625834/sum-of-list-without-lowest-and-highest-list-integers-python/39625900#39625900", "title": "Sum of list without lowest and highest list integers (python)", "body": "<p>Not sure why you need the <code>for</code> in the <code>sum</code>. It appears that <code>x</code> isn't used anywhere. This could be simplified to:</p>\n\n<pre><code>def sum_array(arr):\n    return 0 if not arr else sum(sorted(arr)[1:-1])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 1, "creation_date": 1474489562, "post_id": 39625920, "comment_id": 66557204, "body": "If there is only one element you need also return <code>0</code>"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1474489712, "post_id": 39625920, "comment_id": 66557278, "body": "I suggest you try running the above code with only one element.  You may be surprised"}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1474489917, "post_id": 39625920, "comment_id": 66557393, "body": "Alright, you win, however <a href=\"https://www.python.org/dev/peps/pep-0020/\" rel=\"nofollow noreferrer\">Zen of Python</a> says &quot;Explicit is better than implicit.&quot;. So readability is also matter."}, {"owner": {"reputation": 469, "user_id": 6860252, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/gnFFD.jpg?s=128&g=1", "display_name": "Mr. Jibz", "link": "https://stackoverflow.com/users/6860252/mr-jibz"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1474489924, "post_id": 39625920, "comment_id": 66557396, "body": "@vishes_shell - to check for one element, would I change it to read &quot;if arr is None and arr == 1&quot;?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1474490008, "post_id": 39625920, "comment_id": 66557444, "body": "To check how many elements a collection has, use the <code>len</code> function: <code>len(arr) &lt;= 1</code>  <code>len</code> is short for length"}, {"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "reply_to_user": {"reputation": 469, "user_id": 6860252, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/gnFFD.jpg?s=128&g=1", "display_name": "Mr. Jibz", "link": "https://stackoverflow.com/users/6860252/mr-jibz"}, "edited": false, "score": 0, "creation_date": 1474490026, "post_id": 39625920, "comment_id": 66557454, "body": "@Mr.Jibz i believe @ MosesKoledoye &#39;s answer is what you seek, because it more readable."}, {"owner": {"reputation": 469, "user_id": 6860252, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/gnFFD.jpg?s=128&g=1", "display_name": "Mr. Jibz", "link": "https://stackoverflow.com/users/6860252/mr-jibz"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1474490550, "post_id": 39625920, "comment_id": 66557726, "body": "@vishes_shell I agree, but the incorporation of &quot;not arr&quot; is much more concise; that&#39;s the only portion i would change to his answer."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1474491029, "post_id": 39625920, "comment_id": 66557993, "body": "If you mean that I should use <code>if not arr</code> to check for <code>None</code>, I chose not to do it that way for a reason.  That would cause other &quot;False&quot; values to <code>return 0</code>, which is potentially dangerous behaviour.  Much safer to spend the extra keystrokes for <code>if arr is None</code>"}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1474489659, "last_edit_date": 1474489659, "creation_date": 1474489337, "answer_id": 39625920, "question_id": 39625834, "link": "https://stackoverflow.com/questions/39625834/sum-of-list-without-lowest-and-highest-list-integers-python/39625920#39625920", "title": "Sum of list without lowest and highest list integers (python)", "body": "<p>The easiest way to know where both the max and min is is to sort the list.</p>\n\n<pre><code>arr = sorted(arr)\n</code></pre>\n\n<p>arr[0] is the smallest, arr[-1] is the largest</p>\n\n<p>So</p>\n\n<pre><code>if arr is None:\n    return 0\nelse:\n    return sum(sorted(arr)[1:-1])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1474489416, "post_id": 39625936, "comment_id": 66557127, "body": "<code>if arr is None or len(arr) &lt;= 1:</code> can be written as <code>if not arr</code> only"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1474489502, "post_id": 39625936, "comment_id": 66557172, "body": "<code>if arr</code> would fail on just about any <i>falsy</i> value. Better be explicit."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1474489554, "post_id": 39625936, "comment_id": 66557199, "body": "What do you mean?"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1474489579, "post_id": 39625936, "comment_id": 66557215, "body": "An array with a single item is not falsy. Although <code>sorted</code> handles that, I&#39;ll rather be explicit"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1474489852, "post_id": 39625936, "comment_id": 66557359, "body": "<code>arr[1:-1]</code> returns <code>[]</code> and the sum comes as <code>0</code> but then again &quot;explicit is better than implicit&quot;"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1474490862, "post_id": 39625936, "comment_id": 66557902, "body": "@RafaelCardoso If we pass boolean <code>False</code> into a function with your check it will return 0.  That&#39;s probably unintended behaviour, and it&#39;s much safer for it to error out on unexpected types."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 2, "last_activity_date": 1474489881, "last_edit_date": 1474489881, "creation_date": 1474489381, "answer_id": 39625936, "question_id": 39625834, "link": "https://stackoverflow.com/questions/39625834/sum-of-list-without-lowest-and-highest-list-integers-python/39625936#39625936", "title": "Sum of list without lowest and highest list integers (python)", "body": "<blockquote>\n  <p>Beautiful is better than ugly.</p>\n</blockquote>\n\n<pre><code>def sum_array(arr):\n    if arr is None or len(arr) &lt;= 1:\n         return 0\n    else:\n         return sum(sorted(arr)[1:-1])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "is_accepted": false, "score": 0, "last_activity_date": 1474501880, "last_edit_date": 1474501880, "creation_date": 1474490008, "answer_id": 39626090, "question_id": 39625834, "link": "https://stackoverflow.com/questions/39625834/sum-of-list-without-lowest-and-highest-list-integers-python/39626090#39626090", "title": "Sum of list without lowest and highest list integers (python)", "body": "<p>Here's a version which meets your requirements:</p>\n\n<pre><code>def sum_array(arr):\n    return (None if len(arr) &lt;= 1 else 0) if not arr else sum(sorted(arr)[1:-1])\n\ncases = [[j + 1 for j in range(i)] for i in range(5)]\n\nfor c in cases:\n    print(c, sum_array(c))\n\n# Requirements: Objective is to calculate sum of integers minus the min and\n# max. If array is empty, None, or if only 1 element exists, the function\n# should return 0.\n# [] None\n# [1] 0\n# [1, 2] 0\n# [1, 2, 3] 2\n# [1, 2, 3, 4] 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "is_accepted": false, "score": 0, "last_activity_date": 1474494111, "last_edit_date": 1492087237, "creation_date": 1474491728, "answer_id": 39626538, "question_id": 39625834, "link": "https://stackoverflow.com/questions/39625834/sum-of-list-without-lowest-and-highest-list-integers-python/39626538#39626538", "title": "Sum of list without lowest and highest list integers (python)", "body": "<p>You get <code>TypeError</code> because you try to <code>sum</code> lists. Let me change your code a little bit:</p>\n\n<pre><code> In[1]: arr = [1, 2, 3, 4, 5]\n        [sorted(arr)[1:-1] for x in range(len(arr))]\n\nOut[1]: [[2, 3, 4], [2, 3, 4], [2, 3, 4], [2, 3, 4], [2, 3, 4]]\n</code></pre>\n\n<p>I change your generator expression on list comprehension to show the idea. Really you generate a list on each implicit <code>next</code> call. A further consequence of this error is:</p>\n\n<pre><code> In[2]: sum([[1],[2],[3]])       # will raise TypeError\nOut[2]: TypeError: unsupported operand type(s) for +: 'int' and 'list'\n\n In[3]: sum([[1],[2],[3]], [])   # if you specify start, it will work\nOut[3]: [1, 2, 3]\n</code></pre>\n\n<p>The signature of <code>sum</code> function is <code>sum(iterable[, start])</code>. Sums <em>start</em> and the <em>items of an iterable</em> from left to right and returns the total. <code>start</code> defaults to 0. The iterable\u2018s items are normally numbers, and the start value is not allowed to be a string. In fist case you really try to sum <code>[1] + [2] + [3] + 0</code>, and because <code>+</code> between <code>list</code> and <code>int</code> is not defined, that's why you get TypeError. In the second case <code>[1] + [2] + [3] + []</code> this operation concatenates list and is perfectly valid.</p>\n\n<p>And if you want review of your code and some feedback look at Stackexchange's <a href=\"https://codereview.stackexchange.com/\">CodeReview</a> site.</p>\n\n<p>You can try this, if you like <em>one-liners</em>. Here is also an assumption that a valid array is always instance of <code>&lt;class list&gt;</code>:</p>\n\n<pre><code> In[4]: sum_array = lambda arr: sum(sorted(arr)[1:-1]) if isinstance(arr, list) else 0\n        sum_array([4, 3, 8, 1, 7, 12, 5, 9])\nOut[4]: 36\n</code></pre>\n\n<p><strong>But it's not good practice!</strong></p>\n"}], "owner": {"reputation": 469, "user_id": 6860252, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/gnFFD.jpg?s=128&g=1", "display_name": "Mr. Jibz", "link": "https://stackoverflow.com/users/6860252/mr-jibz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1708, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1474501880, "creation_date": 1474488992, "last_edit_date": 1474489108, "question_id": 39625834, "link": "https://stackoverflow.com/questions/39625834/sum-of-list-without-lowest-and-highest-list-integers-python", "title": "Sum of list without lowest and highest list integers (python)", "body": "<p>Trying to practice my list comprehension, but at this point my code is looking a little (too) long per line length comprehension: </p>\n\n<pre><code>def sum_array(arr):\n    return 0 if arr == None else sum(sorted(arr)[1:-1] for x in range(len(arr or [])-2)) \n</code></pre>\n\n<p>Objective is to calculate sum of integers minus the min and max. If array is empty, <code>None</code>, or if only 1 element exists, the function should return 0.</p>\n\n<p>I am receivingthe following</p>\n\n<blockquote>\n  <p>TypeError: unsupported operand type(s) for +: 'int' and 'list'</p>\n</blockquote>\n\n<p>Please advise!  </p>\n"}, {"tags": ["python", "macos", "environment-variables", "ipython", "jupyter-notebook"], "comments": [{"owner": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 2, "creation_date": 1474492771, "post_id": 39625721, "comment_id": 66558911, "body": "Environment variables are inherited when a process starts. So the IPython kernel gets them from the Jupyter notebook server, which gets them from the shell where you ran <code>jupyter notebook</code>. You can&#39;t change the environment variables for another process once it has started. You can either change <code>os.environ</code> inside the IPython kernel, or stop the notebook server and launch it again from a shell where you&#39;ve already made the change."}, {"owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "reply_to_user": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 0, "creation_date": 1474497797, "post_id": 39625721, "comment_id": 66560819, "body": "make as answer and I will accept."}], "answers": [{"comments": [{"owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "reply_to_user": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "edited": false, "score": 0, "creation_date": 1474498024, "post_id": 39625875, "comment_id": 66560885, "body": "Sorry about that. The problem may caused by server settings. Check <a href=\"https://github.com/jupyterhub/jupyterhub/issues/227\" rel=\"nofollow noreferrer\">github.com/jupyterhub/jupyterhub/issues/227</a> for any ideas?"}], "tags": [], "owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "is_accepted": false, "score": 3, "last_activity_date": 1474489186, "creation_date": 1474489186, "answer_id": 39625875, "question_id": 39625721, "link": "https://stackoverflow.com/questions/39625721/when-do-system-variables-update-in-ipython-kernel/39625875#39625875", "title": "When do system variables update in IPython kernel?", "body": "<p>When you do</p>\n\n<pre><code>export PATH=$PATH:&lt;absolute path&gt;\n</code></pre>\n\n<p>in a terminal, it is only effective in this terminal session. That is to say, this <code>export</code> command has no effect on other terminal sessions.</p>\n\n<p>If you want your PATH environment to be effective all the way, you need to edit your .bashrc file, and</p>\n\n<pre><code>source ~/.bashrc\n</code></pre>\n\n<p>to activate it. </p>\n"}], "owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2067, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1474492819, "creation_date": 1474488617, "last_edit_date": 1474492819, "question_id": 39625721, "link": "https://stackoverflow.com/questions/39625721/when-do-system-variables-update-in-ipython-kernel", "title": "When do system variables update in IPython kernel?", "body": "<p>I started a notebook by doing <code>jupyter notebook</code>, and then creating a new notebook.  </p>\n\n<p>Then, I went to the terminal, and I set the PATH:</p>\n\n<pre><code>export PATH=$PATH:&lt;absolute path&gt;\n</code></pre>\n\n<p>But, then when I go back to the IPython notebook, I try to print this new system variable:  </p>\n\n<pre><code>import os\nprint(os.environ[\"PATH\"].split(os.pathsep))\n</code></pre>\n\n<p>But, I don't see my <code>&lt;absolute path&gt;</code> that I just added??</p>\n\n<p>I even tried restarting the kernel, but this doesn't help at all.  What can I do?  Thank you.</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I tried to refresh my environmental variables via the terminal by doing: <code>bash --login</code>, but this did not help at all. </p>\n\n<p>Also, another thing that is peculiar about this is that when I add it to the system path manually in ipython:   </p>\n\n<pre><code>os.environ['PATH'] = os.environ['PATH'] + os.pathsep + &lt;absolute path&gt;\n</code></pre>\n\n<p>...it works fine in the notebook and kernel where I added it.  But, when I spin up another IPython kernel, it isn't on the PATH anymore.</p>\n\n<p>I'm on <code>osx</code>.</p>\n"}, {"tags": ["python", "performance", "numpy", "scipy", "nearest-neighbor"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1474488345, "post_id": 39625552, "comment_id": 66556511, "body": "What are the shapes of the inputs involved?"}, {"owner": {"reputation": 688, "user_id": 5335741, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/63e61626c2ae23f27f4939dc3b8e6dd5?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/5335741/user"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1474488508, "post_id": 39625552, "comment_id": 66556591, "body": "(100L), (40,000, 100L) , (40,000)"}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 1, "last_activity_date": 1474493133, "last_edit_date": 1474493133, "creation_date": 1474488822, "answer_id": 39625784, "question_id": 39625552, "link": "https://stackoverflow.com/questions/39625552/how-do-you-optimize-this-code-for-nn-prediction/39625784#39625784", "title": "How do you optimize this code for nn prediction?", "body": "<p>You could use <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html#scipy.spatial.distance.cdist\" rel=\"nofollow\"><code>distance.cdist</code></a> to directly get the distances <code>temp</code> and then use <code>.argmin()</code> to get min-index, like so -</p>\n\n<pre><code>minIndex = distance.cdist(training_element[None],p_data_set).argmin()\n</code></pre>\n\n<p>Here's an alternative approach using <a href=\"http://docs.scipy.org/doc/numpy-1.10.4/reference/generated/numpy.einsum.html\" rel=\"nofollow\"><code>np.einsum</code></a> -</p>\n\n<pre><code>subs = p_data_set - training_element\nminIndex =  np.einsum('ij,ij-&gt;i',subs,subs).argmin()\n</code></pre>\n\n<p><strong>Runtime test</strong></p>\n\n<p>Well I was thinking <code>cKDTree</code> would easily beat <code>cdist</code>, but I guess <code>training_element</code> being a <code>1D</code> array isn't too heavy for <code>cdist</code> and I am seeing it to beat out <code>cKDTree</code> instead by a good <strong><code>10x+</code></strong> margin! </p>\n\n<p>Here's the timing results -</p>\n\n<pre><code>In [422]: # Setup arrays\n     ...: p_data_set = np.random.randint(0,9,(40000,100))\n     ...: training_element = np.random.randint(0,9,(100,))\n     ...: \n\nIn [423]: def tree_based(p_data_set,training_element): #@ali_m's soln\n     ...:     tree = cKDTree(p_data_set)\n     ...:     dist, idx = tree.query(training_element, k=1)\n     ...:     return idx\n     ...: \n     ...: def einsum_based(p_data_set,training_element):    \n     ...:     subs = p_data_set - training_element\n     ...:     return np.einsum('ij,ij-&gt;i',subs,subs).argmin()\n     ...: \n\nIn [424]: %timeit tree_based(p_data_set,training_element)\n1 loops, best of 3: 210 ms per loop\n\nIn [425]: %timeit einsum_based(p_data_set,training_element)\n100 loops, best of 3: 17.3 ms per loop\n\nIn [426]: %timeit distance.cdist(training_element[None],p_data_set).argmin()\n100 loops, best of 3: 14.8 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1474489370, "last_edit_date": 1474489370, "creation_date": 1474489055, "answer_id": 39625848, "question_id": 39625552, "link": "https://stackoverflow.com/questions/39625552/how-do-you-optimize-this-code-for-nn-prediction/39625848#39625848", "title": "How do you optimize this code for nn prediction?", "body": "<p>Use a <a href=\"https://en.wikipedia.org/wiki/K-d_tree\" rel=\"nofollow\"><em>k</em>-D tree</a> for fast nearest-neighbour lookups, e.g. <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.html\" rel=\"nofollow\"><code>scipy.spatial.cKDTree</code></a>:</p>\n\n<pre><code>from scipy.spatial import cKDTree\n\n# I assume that p_data_set is (nsamples, ndims)\ntree = cKDTree(p_data_set)\n\n# training_elements is also assumed to be (nsamples, ndims)\ndist, idx = tree.query(training_elements, k=1)\n\npredicted_labels = p_label_set[idx]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1474491703, "post_id": 39626372, "comment_id": 66558344, "body": "if many searches are required with the same data set, I would recommend KDTree, as described above by ali_m."}], "tags": [], "owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "is_accepted": false, "score": 0, "last_activity_date": 1474491086, "creation_date": 1474491086, "answer_id": 39626372, "question_id": 39625552, "link": "https://stackoverflow.com/questions/39625552/how-do-you-optimize-this-code-for-nn-prediction/39626372#39626372", "title": "How do you optimize this code for nn prediction?", "body": "<p>Python can be quite fast programming language if used properly.\nThis is my suggestion (faster_prediction):</p>\n\n<pre><code>import numpy as np\nimport time\n\ndef euclidean(a,b):\n    return np.linalg.norm(a-b)\n\ndef prediction(training_element, p_data_set, p_label_set):\n    temp = np.array([], dtype=float)\n    for p in p_data_set:\n        temp = np.append(temp, euclidean(training_element, p))\n\n    minIndex = np.argmin(temp)\n    return p_label_set[minIndex]\n\ndef faster_prediction(training_element, p_data_set, p_label_set):    \n    temp = np.tile(training_element, (p_data_set.shape[0],1))\n    temp = np.sqrt(np.sum( (temp - p_data_set)**2 , 1))    \n\n    minIndex = np.argmin(temp)\n    return p_label_set[minIndex]   \n\n\ntraining_element = [1,2,3]\np_data_set = np.random.rand(100000, 3)*10\np_label_set = np.r_[0:p_data_set.shape[0]]\n\n\nt1 = time.time()\nresult_1 = prediction(training_element, p_data_set, p_label_set)\nt2 = time.time()\n\nt3 = time.time()\nresult_2 = faster_prediction(training_element, p_data_set, p_label_set)\nt4 = time.time()\n\n\nprint \"Execution time 1:\", t2-t1, \"value: \", result_1\nprint \"Execution time 2:\", t4-t3, \"value: \", result_2\nprint \"Speed up: \", (t4-t3) / (t2-t1)\n</code></pre>\n\n<p>I get the following result on pretty old laptop:</p>\n\n<pre><code>Execution time 1: 21.6033108234 value:  9819\nExecution time 2: 0.0176379680634 value:  9819\nSpeed up:  1224.81857013\n</code></pre>\n\n<p>which makes me think I must have done some stupid mistake :)</p>\n\n<p>In case of very huge data, where memory might be an issue, I suggest using Cython or implementing function in C++ and wrapping it in python.</p>\n"}], "owner": {"reputation": 688, "user_id": 5335741, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/63e61626c2ae23f27f4939dc3b8e6dd5?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/5335741/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 39625848, "answer_count": 3, "score": 1, "last_activity_date": 1474493163, "creation_date": 1474488038, "last_edit_date": 1474493163, "question_id": 39625552, "link": "https://stackoverflow.com/questions/39625552/how-do-you-optimize-this-code-for-nn-prediction", "title": "How do you optimize this code for nn prediction?", "body": "<p>How do you optimize this code?\nAt the moment it is running to slow for the amount of data that goes through this loop. This code runs 1-nearest neighbor. It will predict the label of the training_element based off the p_data_set</p>\n\n<pre><code>#               [x] ,           [[x1],[x2],[x3]],    [l1, l2, l3]\ndef prediction(training_element, p_data_set, p_label_set):\n    temp = np.array([], dtype=float)\n    for p in p_data_set:\n        temp = np.append(temp, distance.euclidean(training_element, p))\n\n    minIndex = np.argmin(temp)\n    return p_label_set[minIndex]\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 1, "last_activity_date": 1474489337, "creation_date": 1474489337, "answer_id": 39625921, "question_id": 39625487, "link": "https://stackoverflow.com/questions/39625487/django-form-failure/39625921#39625921", "title": "Django Form Failure", "body": "<p>The difference between those is not \"separating the fields\". It is that you have switched from the full form representation - including form labels, layout, and most importantly errors - to only displaying the two input fields themselves. </p>\n\n<p>That's fine to do of course, as for most purposes you will want the extra layout control that it gives you, but you do need to remember to put in all the other things that the basic <code>{{ form }}</code> version does.</p>\n\n<pre><code>{{ form.non_field_errors }}\n{{ form.team1.label_tag }}{{ form.team1 }}{{ form.team1.errors }}\n{{ form.team2.label_tag }}{{ form.team2 }}{{ form.team2.errors }}\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 4758444, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/jgAQ6.png?s=128&g=1", "display_name": "Alan Tingey", "link": "https://stackoverflow.com/users/4758444/alan-tingey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 39625921, "answer_count": 1, "score": 0, "last_activity_date": 1474489337, "creation_date": 1474487784, "question_id": 39625487, "link": "https://stackoverflow.com/questions/39625487/django-form-failure", "title": "Django Form Failure", "body": "<p>I have the following form:</p>\n\n<pre><code># coding=utf-8\n\nclass SelectTwoTeams(BootstrapForm):\n\n    def __init__(self, *args, **kwargs):\n        user = kwargs.pop('user', None)\n        self.currentSelectedTeam1 = kwargs.pop('currentSelectedTeam1', None)\n        self.currentSelectedTeam2 = kwargs.pop('currentSelectedTeam2', None)\n        self.currentfixturematchday = kwargs.pop('currentfixturematchday', None)\n        self.currentCampaignNo = kwargs.pop('currentCampaignNo', None)\n        super(SelectTwoTeams, self).__init__(*args, **kwargs)\n\n        cantSelectTeams = UserSelection.objects.select_related().filter(~Q(fixtureid__fixturematchday=self.currentfixturematchday),campaignno=self.currentCampaignNo)\n\n        if not cantSelectTeams:\n            queryset = StraightredTeam.objects.filter(currentteam = 1)\n        else:\n            queryset = StraightredTeam.objects.filter(currentteam = 1).exclude(teamid__in=cantSelectTeams.values_list('teamselectionid', flat=True))\n\n\n        self.fields['team1'].queryset = queryset\n        self.fields['team2'].queryset = queryset\n        self.fields['team1'].initial = self.currentSelectedTeam1\n        self.fields['team2'].initial = self.currentSelectedTeam2\n\n    team1 = forms.ModelChoiceField(queryset=StraightredTeam.objects.none(), empty_label=None,\n                               widget=forms.Select(attrs={\"class\":\"select-format\",'onchange': 'this.form.submit();'}))\n    team2 = forms.ModelChoiceField(queryset=StraightredTeam.objects.none(), empty_label=None,\n                               widget=forms.Select(attrs={\"class\":\"select-format\",'onchange': 'this.form.submit();'}))\n\n    def clean(self):\n        cleaned_data = self.cleaned_data # individual field's clean methods have already been called\n        team1 = cleaned_data.get(\"team1\")\n        team2 = cleaned_data.get(\"team2\")\n        if team1 == team2:\n            raise forms.ValidationError(\"You picked the same team!\")\n\n        return cleaned_data\n</code></pre>\n\n<p>If I use the following in my HTML file and choose the same two teams it correctly says \"You Picked the same team!\":</p>\n\n<pre><code>    &lt;form action=\"\" method=\"post\"&gt;\n        {% csrf_token %}\n        {{ form }}\n    &lt;/form&gt;\n</code></pre>\n\n<p>However, if I use the following:</p>\n\n<pre><code>    &lt;form action=\"\" method=\"post\"&gt;\n        {% csrf_token %}\n        {{ form.team1 }}{{ form.team2 }}\n    &lt;/form&gt;\n</code></pre>\n\n<p>I get no feedback. Nothing occurs when I choose the same two teams.  Any idea as to why separating the fields stops it from working?</p>\n\n<p>Many thanks, Alan.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1474487898, "post_id": 39625465, "comment_id": 66556269, "body": "Just to be clear -- You want the traceback to point the the line <code>a = compile(...)</code>?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1474488156, "post_id": 39625465, "comment_id": 66556410, "body": "No, I want the traceback to include the corresonding line for the string passed to <code>compile</code>"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1474488344, "post_id": 39625465, "comment_id": 66556510, "body": "It looks to me like it <i>does</i> keep the line number... &#39;File &quot;&lt;at runtime&gt;&quot;, <b>line 1</b>, in &lt;module&gt;&#39;.  If you add a few newlines before your <code>raise</code> statement, you&#39;ll see that number increase."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1474488465, "post_id": 39625465, "comment_id": 66556572, "body": "I want the line contents as well as the line number."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1474488668, "post_id": 39625465, "comment_id": 66556685, "body": "Ahh ... Ok, I&#39;m understanding now.  Sorry :-)"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1474489617, "post_id": 39625465, "comment_id": 66557226, "body": "@mgilson: Rephrased the title for the hope of clarity"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474490390, "post_id": 39625465, "comment_id": 66557651, "body": "When compile returns, the literal string you pass is garbage-collected (immediately with CPython).  You have to save the string where the traceback printer will look for it.  The obvious place is in a file whose name you pass to compile.  This is what IDLE does when you &#39;run&#39; the editor contents.  The other place, at least for now with CPython, is exploited in Eric&#39;s answer."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474492519, "post_id": 39625465, "comment_id": 66558777, "body": "@TerryJanReedy: Are you sure IDLE does that? The filename <code>&lt;pyshell#11&gt;</code> (actually, anything matching <code>^&lt;.*&gt;$</code>) is deliberately treated as not a real file when populating <code>linecache</code>, so presumably idle is also guilty of this hack"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474494671, "post_id": 39625465, "comment_id": 66559787, "body": "@TerryJanReedy: Idle does not do that. Idle does what I do (but also a little more, it seems)"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474571765, "post_id": 39625465, "comment_id": 66597617, "body": "My comment above about &#39;what IDLE does&#39; was about running code from the editor, where the filename given to compile is a real one.  When I run <code>exec(a)</code> in the Windows console at &#39;&gt;&gt;&gt;&#39;, <code>exec(a)</code> is also missing from the traceback, whereas IDLE does print it (but not the line <code>exec</code>ed).  IDLE does this by replacing <code>linecache.checkcache</code> with a wrapper than keep <code>&lt;pyshell#nn&gt;</code> lines (in the IDLE process).  The user process wraps traceback handling to get <code>&lt;pyshell#nn&gt;</code> lines from the IDLE process.  How did you the output above <i>with</i> <code>exec(a)</code> included?"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474574123, "post_id": 39625465, "comment_id": 66598938, "body": "The reason IDLE does not show <code>raise ValueError</code>is that when the line <code>a = compile(&#39;raise ValueError&#39;, ...)</code> is executed in the <i>user</i> process, the standard compile and linecache are used, so that <code>&#39;raise ValueError&#39;</code> is lost (as normal).  I could probably change this.  This raises the question of why Python does not do better.  I may ask."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474576516, "post_id": 39625465, "comment_id": 66600215, "body": "@TerryJanReedy: See the <a href=\"https://github.com/python/cpython/blob/4b2d53def9de6034956efe64afff80df360ff1ac/Lib/idlelib/pyshell.py#L681\" rel=\"nofollow noreferrer\">link in my answer</a> - IDLE not only needs to make <code>checkcache</code> keep those lines, but it also writes them in a very similar way to my answer."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1474576572, "post_id": 39625465, "comment_id": 66600249, "body": "<i>&quot;How did you the output above with exec(a) included?&quot;</i> - I ran it in IDLE, as you remark"}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1474489397, "post_id": 39625821, "comment_id": 66557116, "body": "That&#39;s a pretty nasty thing to monkey-patch, and it&#39;s going to cause either wrong tracebacks when you compile different code snippets with the same module name or memory leaks if you keep generating new names and caching unbounded numbers of code snippets."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1474489543, "post_id": 39625821, "comment_id": 66557191, "body": "@user2357112: I&#39;m not suggesting that <code>better_compile</code> is always a suitable replacement for <code>compile</code>, but with controlled use (creating responsible names) it should be ok"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1474489954, "post_id": 39625821, "comment_id": 66557414, "body": "Also, based on the feedback from @user2357112 -- It seems like this is a good place for a context manager that would remove the cache item when the context is exited."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1474490170, "post_id": 39625821, "comment_id": 66557523, "body": "@mgilson: Or perhap subclassing the <code>code</code> object and cleaning up in <code>__del__</code>"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1474574528, "post_id": 39625821, "comment_id": 66599149, "body": "@user2357112: thanks for the warning.  Duplicate names could avoided by having better_compile auto-generate pseudo-filenames such as <code>&lt;string#nn&gt;</code>, as with <code>&lt;pyshell#nn&gt;</code>.  The lru cache has limits.  For real file names, a file can be re-read after being dumped (but might have changed since imported).  If a traceback needs <code>&lt;string#1&gt;</code> after it is dumped, we revert to the present situation -- missing code in the traceback."}], "tags": [], "owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "is_accepted": false, "score": 3, "last_activity_date": 1474494629, "last_edit_date": 1474494629, "creation_date": 1474488950, "answer_id": 39625821, "question_id": 39625465, "link": "https://stackoverflow.com/questions/39625465/how-do-i-retain-source-lines-in-tracebacks-when-running-dynamically-compiled-cod/39625821#39625821", "title": "How do I retain source lines in tracebacks when running dynamically-compiled code objects?", "body": "<p>Using the undocumented <code>cache</code> member of the builtin <a href=\"https://docs.python.org/2/library/linecache.html\" rel=\"nofollow\"><code>linecache</code></a>, this seems to work:</p>\n\n<pre><code>def better_compile(src, name, mode):\n    # there is an example of this being set at\n    # https://hg.python.org/cpython/file/2.7/Lib/linecache.py#l104\n    from linecache import cache\n    cache[name] = (\n        len(src), None,\n        [line+'\\n' for line in src.splitlines()], name\n    )\n    return compile(src, name, mode)\n</code></pre>\n\n\n\n<pre><code>&gt;&gt;&gt; c = better_compile('raise ValueError\\n', '&lt;a name&gt;', 'exec')\n&gt;&gt;&gt; exec(c)\nTraceback (most recent call last):\n  File \"&lt;pyshell#50&gt;\", line 1, in &lt;module&gt;\n    exec(c)\n  File \"&lt;a name&gt;\", line 1, in &lt;module&gt;\n    raise ValueError\nValueError\n</code></pre>\n\n<hr>\n\n<p>It turns out this is <a href=\"https://github.com/python/cpython/blob/4b2d53def9de6034956efe64afff80df360ff1ac/Lib/idlelib/pyshell.py#L681\" rel=\"nofollow\">pretty much how IDLE does it</a></p>\n"}, {"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1474491248, "post_id": 39626362, "comment_id": 66558108, "body": "So your argument here is to wrap <code>exec</code> rather than <code>compile</code>? That might also be an option"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1474491391, "post_id": 39626362, "comment_id": 66558184, "body": "@Eric Exactly, but, of course, you have to pass the original code (<code>code</code>) to the wrapper as well, because compiled <code>a</code> did not save the sources."}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 0, "last_activity_date": 1474491627, "last_edit_date": 1474491627, "creation_date": 1474491030, "answer_id": 39626362, "question_id": 39625465, "link": "https://stackoverflow.com/questions/39625465/how-do-i-retain-source-lines-in-tracebacks-when-running-dynamically-compiled-cod/39626362#39626362", "title": "How do I retain source lines in tracebacks when running dynamically-compiled code objects?", "body": "<p>Well, you could write your own exception handler which fills the data:</p>\n\n<pre><code>code = \"\"\"\ndef f1():\n    f2()\n\ndef f2():\n    1 / 0\n\nf1()\n\"\"\"\n\na = compile(code, '&lt;at runtime&gt;', 'exec')\n\nimport sys\nimport traceback\n\ntry:\n    exec(a)\nexcept:\n    etype, exc, tb = sys.exc_info()\n    exttb = traceback.extract_tb(tb)\n\n    ## Fill the missing data:\n    exttb2 = [(fn, lnnr, funcname,\n               (code.splitlines()[lnnr-1] if fn=='&lt;at runtime&gt;'\n                else line))\n              for fn, lnnr, funcname, line in exttb]\n\n    # Print:\n    sys.stderr.write('Traceback (most recent call last):\\n')\n    for line in traceback.format_list(exttb2):\n        sys.stderr.write(line)\n    for line in traceback.format_exception_only(etype, exc):\n        sys.stderr.write(line)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 2, in &lt;module&gt;\n  File \"&lt;at runtime&gt;\", line 8, in &lt;module&gt;\n    f1()\n  File \"&lt;at runtime&gt;\", line 3, in f1\n    f2()\n  File \"&lt;at runtime&gt;\", line 6, in f2\n    1 / 0\nZeroDivisionError: integer division or modulo by zero\n</code></pre>\n\n<p>Now just wrap that compile &amp; exec into a <code>smart_exec</code> function to call every time...</p>\n"}], "owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1474576551, "creation_date": 1474487701, "last_edit_date": 1474576551, "question_id": 39625465, "link": "https://stackoverflow.com/questions/39625465/how-do-i-retain-source-lines-in-tracebacks-when-running-dynamically-compiled-cod", "title": "How do I retain source lines in tracebacks when running dynamically-compiled code objects?", "body": "<p>Say I use <a href=\"https://docs.python.org/2/library/functions.html#compile\" rel=\"nofollow\">compile</a> to create a <code>code</code> object from a string and a name:</p>\n\n<pre><code>&gt;&gt;&gt; a = compile('raise ValueError\\n', '&lt;at runtime&gt;', 'exec')\n</code></pre>\n\n<p>I would like the lines within that string to appear within the traceback (note - the following is run in IDLE):</p>\n\n<pre><code>&gt;&gt;&gt; exec(a)\nTraceback (most recent call last):\n File \"&lt;pyshell#11&gt;\", line 1, in &lt;module&gt;\n    exec(c)\n  File \"&lt;at runtime&gt;\", line 1, in &lt;module&gt;\n    raise ValueError   &lt;-- This line is what I want\nValueError\n</code></pre>\n\n<p>Alas, they do not:</p>\n\n<pre><code>&gt;&gt;&gt; exec(a)\nTraceback (most recent call last):\n File \"&lt;pyshell#11&gt;\", line 1, in &lt;module&gt;\n    exec(c)\n  File \"&lt;at runtime&gt;\", line 1, in &lt;module&gt;\nValueError\n</code></pre>\n\n<p>Without creating a temporary file, how do I make that <code>raise ValueError</code> line appear in the traceback?</p>\n"}, {"tags": ["python", "tuples", "immutability"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 3, "creation_date": 1474488067, "post_id": 39625459, "comment_id": 66556361, "body": "That&#39;s what lists are for..."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1474488320, "post_id": 39625459, "comment_id": 66556498, "body": "<code>tuple(u&#39;\ud83d\udca9 &#39;.join(source_tuple).replace(&#39;old&#39;, &#39;new&#39;).split(u&#39;\ud83d\udca9 &#39;))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1474488223, "last_edit_date": 1474488223, "creation_date": 1474487907, "answer_id": 39625515, "question_id": 39625459, "link": "https://stackoverflow.com/questions/39625459/generate-a-modified-copy-of-a-tuple/39625515#39625515", "title": "generate a modified copy of a tuple", "body": "<p>You could use some kind of comprehension:</p>\n\n<pre><code>source_tuple = ('this', 'is', 'the', 'old', 'tuple')\nnew_tuple = tuple((value if x != 3 else 'new'\n                   for x, value in enumerate(source_tuple)))\n# ('this', 'is', 'the', 'new', 'tuple')\n</code></pre>\n\n<p>This is rather idotic in this case but gives you an idea of the general concept. Better use a <strong>list</strong>, though, after all, you can change the values index-based here.</p>\n"}, {"tags": [], "owner": {"reputation": 458, "user_id": 4111573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e94b7b01366566931e42535c6974f9?s=128&d=identicon&r=PG&f=1", "display_name": "ShabashP ", "link": "https://stackoverflow.com/users/4111573/shabashp"}, "is_accepted": false, "score": 0, "last_activity_date": 1474491035, "creation_date": 1474491035, "answer_id": 39626364, "question_id": 39625459, "link": "https://stackoverflow.com/questions/39625459/generate-a-modified-copy-of-a-tuple/39626364#39626364", "title": "generate a modified copy of a tuple", "body": "<p>If you need to create new tuple with replaced element, you may use something like this:</p>\n\n<pre><code>def replace_value_in_tuple(t, ind, value):\n    return tuple(\n        map(lambda i: value if i == ind else t[i], range(len(t)))\n    )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1474491730, "post_id": 39626421, "comment_id": 66558354, "body": "You can do it like this of course but you have to admit that this code is neither short nor intuitive since it&#39;s three lines of code with two type casts just saying &quot;replace element 3 with &#39;new&#39;&quot;"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1474492037, "post_id": 39626421, "comment_id": 66558521, "body": "Try a slice then: <code>new_tuple=source_tuple[0:3]+(&#39;new&#39;,)+source_tuple[4:]</code>"}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1474492153, "post_id": 39626421, "comment_id": 66558597, "body": "This is what I wrote :)"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1474492667, "post_id": 39626421, "comment_id": 66558839, "body": "Rather than the <code>if&#47;then</code> you can do: <code>source[0:index]+type(source)((value,))+source[index+1:]</code>"}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1474493938, "post_id": 39626421, "comment_id": 66559448, "body": "This is not exactly what I was hoping to find but you can&#39;t change Python for me :). Your answer demonstrates nice approaches so I&#39;ll choose it!"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 5, "last_activity_date": 1474493198, "last_edit_date": 1474493198, "creation_date": 1474491283, "answer_id": 39626421, "question_id": 39625459, "link": "https://stackoverflow.com/questions/39625459/generate-a-modified-copy-of-a-tuple/39626421#39626421", "title": "generate a modified copy of a tuple", "body": "<hr>\n\n<p>You can use a slice on the tuple (which yields a new tuple) and concatenate:</p>\n\n<pre><code>&gt;&gt;&gt; x=3\n&gt;&gt;&gt; new_tuple=source_tuple[0:x]+('new',)+source_tuple[x+1:]\n&gt;&gt;&gt; new_tuple\n('this', 'is', 'the', 'new', 'tuple')\n</code></pre>\n\n<p>Which you can then support either a list or tuple like so:</p>\n\n<pre><code>&gt;&gt;&gt; def replace_at(source, index, value):\n...     return source[0:index]+type(source)((value,))+source[index+1:]\n...\n&gt;&gt;&gt; replace_at([1,2,3],1,'new')\n[1, 'new', 3]\n&gt;&gt;&gt; replace_at((1,2,3),1,'new')\n(1, 'new', 3)\n</code></pre>\n\n<p>Or, just do it directly on a list:</p>\n\n<pre><code>&gt;&gt;&gt; source_tuple = ('this', 'is', 'the', 'old', 'tuple')\n&gt;&gt;&gt; li=list(source_tuple)\n&gt;&gt;&gt; li[3]='new'\n&gt;&gt;&gt; new_tuple=tuple(li)\n&gt;&gt;&gt; new_tuple\n('this', 'is', 'the', 'new', 'tuple')\n</code></pre>\n\n<p>As stated in the comments -- that is what lists are for...</p>\n"}, {"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 3, "last_activity_date": 1474492472, "last_edit_date": 1474492472, "creation_date": 1474492137, "answer_id": 39626638, "question_id": 39625459, "link": "https://stackoverflow.com/questions/39625459/generate-a-modified-copy-of-a-tuple/39626638#39626638", "title": "generate a modified copy of a tuple", "body": "<p>If you're thinking of swapping values on the fly, then a <code>list</code> is the more appropriate data structure; as we already know tuples are <em>immutable</em>.</p>\n\n<p>On another note, if you're looking for a <em>swap-value</em> logic in a <code>tuple</code>, you can have a look at <a href=\"https://docs.python.org/3.4/library/collections.html#namedtuple-factory-function-for-tuples-with-named-fields\" rel=\"nofollow\"><code>collections.namedtuple</code></a> which has a <code>_replace</code> method.</p>\n\n<blockquote>\n  <p>They can be used wherever regular tuples are used</p>\n</blockquote>\n\n<pre><code>&gt;&gt;&gt; source_tuple = ('this', 'is', 'the', 'old', 'tuple')\n\n&gt;&gt;&gt; Factory = namedtuple('Factory', range(5), rename=True)\n\n&gt;&gt;&gt; source_tuple = Factory(*source_tuple)\n\n&gt;&gt;&gt; source_tuple\nFactory(_0='this', _1='is', _2='the', _3='old', _4='tuple')\n\n&gt;&gt;&gt; new_tuple = source_tuple._replace(_3='new')\n\n&gt;&gt;&gt; new_tuple\nFactory(_0='this', _1='is', _2='the', _3='new', _4='tuple')\n</code></pre>\n\n<p>Well that doesn't look too elegant. I still suggest you use a <code>list</code> instead.</p>\n"}], "owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3105, "favorite_count": 0, "accepted_answer_id": 39626421, "answer_count": 4, "score": 2, "last_activity_date": 1474493198, "creation_date": 1474487683, "last_edit_date": 1592644375, "question_id": 39625459, "link": "https://stackoverflow.com/questions/39625459/generate-a-modified-copy-of-a-tuple", "title": "generate a modified copy of a tuple", "body": "<p>I know I can't modify a tuple and I've seen ways to create a tuple from another one concatenating parts of the original manually like <a href=\"https://stackoverflow.com/questions/11458239/python-changing-value-in-a-tuple\">here</a>.</p>\n<p>But wonder whether there has emerged some pythonic way to 'modify' a tuple by implicitly creating a new one like</p>\n<pre><code>&gt;&gt;&gt; source_tuple = ('this', 'is', 'the', 'old', 'tuple')\n&gt;&gt;&gt; new_tuple = source_tuple.replace(3, 'new')\n&gt;&gt;&gt; new_tuple\n('this', 'is', 'the', 'new', 'tuple')\n</code></pre>\n<p>A possible implementation could look like this but I'm looking for a <em>built in</em> solution:</p>\n<pre><code>def replace_at(source, index, value):\n    if isinstance(source, tuple):\n        return source[:index] + (value,) + source[index + 1:]\n    elif isinstance(source, list):\n        return source[:index] + [value,] + source[index + 1:]\n    else:\n        explode()\n</code></pre>\n<p>it's not much work to implement such a functionality but like the <code>Enum</code> has demonstrated it's sometimes better to have an implementation everyone uses..</p>\n<p><strong>Edit</strong>: my goal is <em>not</em> to replace the source tuple. I know I could use lists but even in this case I would make a copy first. So I'm really just looking for a way to create a modified copy.</p>\n"}, {"tags": ["python", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474552284, "post_id": 39636557, "comment_id": 66585348, "body": "Martin this is great - definitely the right way to go with this, thanks! Now I have another issue that popped up though and I think I can resolve it with this csv function in Python. A row of data that is a &quot;successful&quot; read has 11 values (separated by commas); however if the sensor is taken away from the antenna it may still get stray readings from it which don&#39;t send back all 11 values, causing an error in the attempt to read <code>Ten</code> . Where could I put an IF statement to filter out csv lines which don&#39;t have 11 values?"}, {"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474552376, "post_id": 39636557, "comment_id": 66585412, "body": "Also is there a way to prevent matplotlib from automatically connecting two points of data from the same antenna with a line if at least 60 seconds has passed since the last data point? I get this annoying interpolated linear line which will appear if the sensor goes out of read distance and comes back in 2 minutes later - this shows an increase in tension which didn&#39;t occur, I&#39;d rather just have this data gap be empty. Any ideas?"}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "reply_to_user": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474553042, "post_id": 39636557, "comment_id": 66585934, "body": "I have updated the script to skip missing <code>Ten</code> field entries. To disconnect the data &gt; 60 seconds apart, you would need to group the data and do a plot for each group."}, {"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474553622, "post_id": 39636557, "comment_id": 66586358, "body": "I realized that sometimes the &quot;(Infinity%)&quot; of the last column is read as the Ten value - needless to say I put in a <code>try:</code> before <code>data[row[&#39;Antenna&#39;]]</code> and an <code>except: pass</code> after which I think effectively skips lines that don&#39;t have all the data values? If that&#39;s the case then perfect!  Hmm...grouping the data and doing a plot for each group. I&#39;m a bit lost on how I would go about doing this. Any more help on this end?"}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "reply_to_user": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474553717, "post_id": 39636557, "comment_id": 66586428, "body": "That would be better given your data."}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "reply_to_user": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474557818, "post_id": 39636557, "comment_id": 66589351, "body": "I have added a possible approach for grouping the data."}, {"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474558600, "post_id": 39636557, "comment_id": 66589939, "body": "Martin, just noticed you put the code together for the 60 second gaps to be ignored. This works perfectly! Thank you so much!"}, {"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474558789, "post_id": 39636557, "comment_id": 66590100, "body": "Now the only thing left which I need to figure out is how to stop the x-axis from constantly growing with new data, but instead to only show the last 5 minutes of data. It is fixed with a 5 minute range, and any data taken more than 5 minutes ago is pushed off the graph. As you can tell I am terribly new to Python and each tiny little detail I&#39;ve wanted to add has taken hours of research. You&#39;ve been a great help to me so far!"}, {"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474560206, "post_id": 39636557, "comment_id": 66591097, "body": "Martin, I&#39;ve had some success running the code with the 60 second gap data grouping, however sometimes I try to run it and I get this error: `    last_dt = data[0][0] IndexError: list index out of range`     Any ideas on why?"}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "reply_to_user": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474622120, "post_id": 39636557, "comment_id": 66616235, "body": "That would be because your data had no data points for one of the antenna. I have added a test for this. It also now only display the last 5 minutes worth of data."}, {"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474638349, "post_id": 39636557, "comment_id": 66626481, "body": "Amazing! Wow thanks so much Martin!!! I really want to play around with Python more, it&#39;s amazing what you can do with it, I just have self-taught experience from the past couple of weeks and am struggling.    I was trying to add a legend just now and had errors pop up. Tried adding labels &#39;code&#39; plot(ax, data[&#39;1&#39;], &#39;c&#39;, label=&#39;Top Tier&#39;, 2) &#39;code&#39;   and then adding &#39;code&#39; plt.legend(loc=&#39;lower right&#39;) &#39;code&#39; right before &#39;code&#39; plt.show() &#39;code&#39; at the end, however received errors. Because of the dual sets of data is there a different way I have to do this?"}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "reply_to_user": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474643016, "post_id": 39636557, "comment_id": 66629670, "body": "I&#39;m glad you liked the answer, don&#39;t forget to click on the grey tick to the side of the answer to accept it as the solution. With regards the labels, I suggest you create another question, try and make it as small and self contained as possible (i.e. you don&#39;t need the csv stuff) so you will get  more replies."}, {"owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474662117, "post_id": 39636557, "comment_id": 66639464, "body": "Can&#39;t seem to check it as the solution - says I need more reputation points. I will once I have enough though! Thanks!"}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "reply_to_user": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "edited": false, "score": 0, "creation_date": 1474709168, "post_id": 39636557, "comment_id": 66649943, "body": "You probably can&#39;t click the upvote button yet, but you can click the tick itself. You should also get a badge for doing it."}], "tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1474621674, "last_edit_date": 1474621674, "creation_date": 1474539987, "answer_id": 39636557, "question_id": 39625442, "link": "https://stackoverflow.com/questions/39625442/how-to-separate-and-graph-lines-in-array-by-a-value-in-each-line/39636557#39636557", "title": "How to separate and graph lines in array by a value in each line", "body": "<p>You can simply plot each data set using the same axis. </p>\n\n<p>The following approach uses the Python <code>csv.DictReader</code> to help with reading in the data, along with a <code>defaultdict(list)</code> to automatically split the data into lists based on the antenna for each row.</p>\n\n<p>This also adds code to addresses your comment regarding grouping data points not more than 60 seconds apart from each other, and only displaying the last 5 minutes worth of entries:</p>\n\n<pre><code>import matplotlib\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\n\nfrom datetime import datetime, timedelta\nimport collections\nimport csv\n\noffset = -7.4954\nslope = 0.9548\n\ndef plot(ax, data, colour, width):\n    if data:\n        last_dt = data[0][0]\n        sixty = timedelta(seconds=60)\n\n        x = []\n        y = []\n\n        # Plot groups of data not more than 60 seconds apart\n        for dt, ten in data:\n            if dt &lt;= last_dt + sixty:\n                x.append(dt)\n                y.append(ten)\n            else:\n                ax.plot(matplotlib.dates.date2num(x), y, colour, linewidth=width)\n                x = [dt]\n                y = [ten]\n\n            last_dt = dt\n\n        ax.plot(matplotlib.dates.date2num(x), y, colour, linewidth=width)\n\n\ndef animate(i, fig, ax):\n    # Read in the CSV file\n    data = collections.defaultdict(list)\n    fields = [\"TimeStamp\", \"ReadCount\", \"Antenna\", \"Protocol\", \"RSSI\", \"EPC\", \"Temp\", \"Ten\", \"Powr\", \"Unpowr\", \"Inf\"]\n\n    with open('SensorLog.csv') as f_input:\n        csv_input = csv.DictReader(f_input, skipinitialspace=True, fieldnames=fields)\n        header = next(csv_input)\n\n        # Separate the rows based on the Antenna field\n        for row in csv_input:\n            try:\n                data[row['Antenna']].append(\n                    [datetime.strptime(row['TimeStamp'], '%m/%d/%Y %H:%M:%S.%f'), \n                    int(float(row['Ten']) * float(slope) + float(offset))])\n            except TypeError as e:\n                pass\n\n    # Drop any data points more than 5 mins older than the last entry\n\n    latest_dt = data[row['Antenna']][-1][0]     # Last entry\n    not_before = latest_dt - timedelta(minutes=5)\n\n    for antenna, entries in data.items():\n        data[antenna] = [[dt, count] for dt, count in entries if dt &gt;= not_before]\n\n    # Redraw existing axis\n    ax.clear()\n\n    ax.spines['bottom'].set_color(\"#5998ff\")\n    ax.spines['top'].set_color(\"#5998ff\")\n    ax.spines['left'].set_color(\"#5998ff\")\n    ax.spines['right'].set_color(\"#5998ff\")\n\n    hfmt = matplotlib.dates.DateFormatter('%m/%d/%Y\\n%I:%M:%S %p')\n    ax.xaxis.set_major_formatter(hfmt)\n    fig.autofmt_xdate()\n\n    plot(ax, data['1'], 'c', 2)     # Antenna 1\n    plot(ax, data['2'], 'r', 3)     # Antenna 2\n\n    ax.grid(True, color='w')\n    plt.ylabel('Tension (lb)', color='w', fontsize=20)\n    plt.title('Spiral 1 Tension', color='w', fontsize=26)\n\n    ax.tick_params(axis='y', colors='w')\n    ax.tick_params(axis='x', colors='w')\n\nfig = plt.figure(facecolor='#07000d')\nax = fig.add_subplot(111, axisbg='#07000d')\n\nani = animation.FuncAnimation(fig, animate, fargs=(fig, ax), interval=1000)\nplt.show()\n</code></pre>\n\n<p>This would give you the following kind of output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RsCrD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RsCrD.png\" alt=\"demo plot\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 6860489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8ZcGOaMszs/AAAAAAAAAAI/AAAAAAAAADI/6SAW0gmYZuo/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6860489/jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 39636557, "answer_count": 1, "score": 2, "last_activity_date": 1562742759, "creation_date": 1474487631, "last_edit_date": 1562742759, "question_id": 39625442, "link": "https://stackoverflow.com/questions/39625442/how-to-separate-and-graph-lines-in-array-by-a-value-in-each-line", "title": "How to separate and graph lines in array by a value in each line", "body": "<p>I'm new to Python and am trying to pull data from a growing CSV, and create a live updating plot. I want to create two different x,y arrays depending on which antenna the data is coming through (one of the values in each line of data separated by commas). The data file looks like the following:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>TimeStamp, ReadCount, Antenna, Protocol, RSSI, EPC, Sensor\r\n09/21/2016 15:24:40.560, 5499, 1, GEN2, -21, E036112D912508B3, 23.78,47.00,0.00,2.21, (Infinity%)\r\n09/21/2016 15:24:41.138, 5506, 1, GEN2, -9, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:41.623, 5513, 1, GEN2, -25, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:42.120, 5520, 1, GEN2, -18, E036112D912508B3, 23.78,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:42.633, 5527, 1, GEN2, -12, E036112D912508B3, 23.99,45.00,0.00,2.23, (Infinity%)\r\n09/21/2016 15:24:43.211, 5534, 1, GEN2, -9, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)\r\n09/21/2016 15:24:43.744, 5541, 1, GEN2, -16, E036112D912508B3, 23.99,46.00,0.00,2.26, (Infinity%)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Code I have which successfully shows the graph, but just takes in all lines of data into one x,y set of arrays looks like the following: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import matplotlib\r\nimport matplotlib.pyplot as plt\r\nimport matplotlib.animation as animation\r\nfrom datetime import datetime\r\n      \r\noffset = -7.4954\r\nslope = 0.9548\r\n\r\nfig = plt.figure(facecolor='#07000d')\r\n\r\nax1 = fig.add_subplot(111, axisbg='#07000d')\r\n\r\nax1.spines['bottom'].set_color(\"#5998ff\")\r\nax1.spines['top'].set_color(\"#5998ff\")\r\nax1.spines['left'].set_color(\"#5998ff\")\r\nax1.spines['right'].set_color(\"#5998ff\")\r\n    \r\ndef animate(i):\r\n    graph_data = open('SensorLog.csv','r').read()\r\n    dataArray = graph_data.split('\\n')\r\n\r\n    xar=[]\r\n    yar=[]\r\n    \r\n    for eachLine in dataArray:\r\n        if 'TimeStamp' not in eachLine: \r\n            if len(eachLine)&gt;1:\r\n                t,rc,ant,prot,rssi,epc,temp,ten,powr,unpowr,inf=(eachLine.split(','))         \r\n                time = datetime.strptime(t, '%m/%d/%Y %H:%M:%S.%f')\r\n                clock = time.strftime('%I:%M')\r\n                xs = matplotlib.dates.datestr2num(clock)\r\n                hfmt = matplotlib.dates.DateFormatter('%m/%d/%Y\\n%I:%M:%S %p')\r\n\r\n#                Convert tension\r\n                tension = int(float(ten)*float(slope)+float(offset))\r\n                \r\n                xar.append(xs)\r\n                yar.append(tension)\r\n                \r\n    ax1.clear()\r\n    \r\n    ax1.grid(True, color='w')\r\n\r\n    plt.ylabel('Tension (lb)',color='w', fontsize=20)\r\n    plt.title('Spiral 1 Tension',color='w', fontsize=26)\r\n\r\n       \r\n    ax1.tick_params(axis='y', colors='w')\r\n    ax1.tick_params(axis='x', colors='w')\r\n    ax1.xaxis.set_major_formatter(hfmt)\r\n\r\n    fig.autofmt_xdate()\r\n    \r\n    ax1.plot (xar,yar, 'c', linewidth=2)\r\n\r\nani = animation.FuncAnimation(fig, animate, interval=10000)\r\nplt.show()</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I am trying to separate data pulled in on antenna 1 and 2 and plot each on the same graph (shared x axis) with different colored line plots...my attempt is here but it is not working:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import matplotlib\r\nimport matplotlib.pyplot as plt\r\nimport matplotlib.animation as animation\r\nfrom datetime import datetime\r\n      \r\noffset = -7.4954\r\nslope = 0.9548\r\n\r\nfig = plt.figure(facecolor='#07000d')\r\n\r\nax1 = fig.add_subplot(111, axisbg='#07000d')\r\nax2 = fig.add_subplot(111, axisbg='#07000d')\r\n\r\nax1.spines['bottom'].set_color(\"#5998ff\")\r\nax1.spines['top'].set_color(\"#5998ff\")\r\nax1.spines['left'].set_color(\"#5998ff\")\r\nax1.spines['right'].set_color(\"#5998ff\")\r\n\r\nax2.spines['bottom'].set_color(\"#5998ff\")\r\nax2.spines['top'].set_color(\"#5998ff\")\r\nax2.spines['left'].set_color(\"#5998ff\")\r\nax2.spines['right'].set_color(\"#5998ff\")\r\n    \r\ndef animate(i):\r\n    graph_data = open('SensorLog.csv','r').read()\r\n    dataArray = graph_data.split('\\n')\r\n\r\n    xar=[]\r\n    yar=[]\r\n    xar2=[]\r\n    yar2=[]    \r\n\r\n    for eachLine in dataArray:\r\n        if 'TimeStamp' not in eachLine: \r\n            if len(eachLine)&gt;1:\r\n                t,rc,ant,prot,rssi,epc,temp,ten,powr,unpowr,inf=(eachLine.split(','))         \r\n                time = datetime.strptime(t, '%m/%d/%Y %H:%M:%S.%f')\r\n                clock = time.strftime('%I:%M')\r\n                xs = matplotlib.dates.datestr2num(clock)\r\n                hfmt = matplotlib.dates.DateFormatter('%m/%d/%Y\\n%I:%M:%S %p')\r\n\r\n#                Convert tension\r\n                tension = int(float(ten)*float(slope)+float(offset))\r\n                              \r\n                if ant == '1':\r\n                    xar.append(xs)\r\n                    yar.append(tension)\r\n               \r\n                if ant == '2':\r\n                    xar2.append(xs)                    \r\n                    yar2.append(tension)\r\n                   \r\n    ax1.clear()\r\n    ax2.clear()\r\n    \r\n    ax1.grid(True, color='w')\r\n    ax2.grid(True, color='w')\r\n\r\n    plt.ylabel('Tension (lb)',color='w', fontsize=20)\r\n    plt.title('Spiral 1 Tension',color='w', fontsize=26)\r\n\r\n       \r\n    ax1.tick_params(axis='y', colors='w')\r\n    ax1.tick_params(axis='x', colors='w')\r\n    ax1.xaxis.set_major_formatter(hfmt)\r\n   \r\n    ax2.tick_params(axis='y', colors='w')\r\n    ax2.tick_params(axis='x', colors='w')\r\n    ax2.xaxis.set_major_formatter(hfmt)\r\n   \r\n    fig.autofmt_xdate()\r\n    \r\n    ax1.plot (xar,yar, 'c', linewidth=2)\r\n    ax2.plot (xar2,yar2,'r', linewidth=3)\r\n\r\nani = animation.FuncAnimation(fig, animate, interval=10000)\r\nplt.show()</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Do you guys have any input on how I could successfully separate ant 1 and ant 2 data and plot it on the same figure in different colors?</p>\n"}, {"tags": ["python", "google-apps-script"], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 3014703, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Dmxm.jpg?s=128&g=1", "display_name": "Spencer Easton", "link": "https://stackoverflow.com/users/3014703/spencer-easton"}, "is_accepted": true, "score": 0, "last_activity_date": 1474646456, "creation_date": 1474646456, "answer_id": 39665062, "question_id": 39625336, "link": "https://stackoverflow.com/questions/39625336/how-do-i-call-a-secured-google-apps-script-web-app-endpoint/39665062#39665062", "title": "How do I call a secured Google Apps Script web app endpoint?", "body": "<p>Up until a few months ago there was no authenticated way to do server to webapp calls. The webapp had to run as the author with anonymous access. \nRecently a new service was released called the Execution API. Which allows someone to execute a script using a simple REST call. </p>\n\n<p>Overview of the service:</p>\n\n<blockquote>\n  <p><a href=\"https://developers.google.com/apps-script/guides/rest/\" rel=\"nofollow\">https://developers.google.com/apps-script/guides/rest/</a>  </p>\n</blockquote>\n\n<p>Python quickstart:</p>\n\n<blockquote>\n  <p><a href=\"https://developers.google.com/apps-script/guides/rest/quickstart/target-script\" rel=\"nofollow\">https://developers.google.com/apps-script/guides/rest/quickstart/target-script</a></p>\n</blockquote>\n"}], "owner": {"reputation": 1260, "user_id": 2284202, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/T1TRx.jpg?s=128&g=1", "display_name": "Alex Egli", "link": "https://stackoverflow.com/users/2284202/alex-egli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 39665062, "answer_count": 1, "score": 0, "last_activity_date": 1474646456, "creation_date": 1474487279, "last_edit_date": 1474489671, "question_id": 39625336, "link": "https://stackoverflow.com/questions/39625336/how-do-i-call-a-secured-google-apps-script-web-app-endpoint", "title": "How do I call a secured Google Apps Script web app endpoint?", "body": "<p>I want to make a POST request to my Google Apps Script Web App, but I don't know what format google wants me to send my credentials in. I have restricted access to the API to anyone in my gmail domain. The script that is making the POST request is written in Python and running automatically on a server, no user input.</p>\n\n<p>Even a link to a page of documentation that addresses this issue would be great. I searched but couldn't find anything.</p>\n"}, {"tags": ["python", "datetime", "pandas", "time-series", "hour"], "answers": [{"comments": [{"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1474487645, "post_id": 39625417, "comment_id": 66556133, "body": "Or possibly: <code>df.Date.round(&#39;H&#39;)</code> for the group key"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1474516916, "post_id": 39625417, "comment_id": 66565165, "body": "Why not simply: <code>grouper = df[&#39;Date&#39;].dt.hour</code>; <code>df.groupby(grouper).count()</code>?"}, {"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "reply_to_user": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1474519552, "post_id": 39625417, "comment_id": 66565793, "body": "@Kartik Because you need truncate from datetime only minutes and seconds, set them to 0."}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 3, "last_activity_date": 1474488677, "last_edit_date": 1474488677, "creation_date": 1474487559, "answer_id": 39625417, "question_id": 39625328, "link": "https://stackoverflow.com/questions/39625328/pandas-grouping-by-datetime/39625417#39625417", "title": "Pandas Grouping By Datetime", "body": "<p>You can <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html\" rel=\"nofollow\"><code>groupby</code></a> by column <code>Date</code> converted to <code>h</code> and aggregate <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.size.html\" rel=\"nofollow\"><code>size</code></a>:</p>\n\n<pre><code>print (df.Date.values.astype('datetime64[h]'))\n['2012-07-12T22+0200' '2012-07-16T22+0200' '2013-12-16T17+0100'\n '2010-01-11T19+0100' '2010-02-06T12+0100' '2012-07-18T22+0200'\n '2013-11-23T10+0100']\n\nprint (df.Name.groupby([df.Date.values.astype('datetime64[h]')]).size())\n2010-01-11 19:00:00    1\n2010-02-06 12:00:00    1\n2012-07-12 22:00:00    1\n2012-07-16 22:00:00    1\n2012-07-18 22:00:00    1\n2013-11-23 10:00:00    1\n2013-12-16 17:00:00    1\ndtype: int64\n</code></pre>\n\n<p>Another solution:</p>\n\n<pre><code>print (df.Date.values.astype('&lt;M8[h]'))\n['2012-07-12T22+0200' '2012-07-16T22+0200' '2013-12-16T17+0100'\n '2010-01-11T19+0100' '2010-02-06T12+0100' '2012-07-18T22+0200'\n '2013-11-23T10+0100']\n\nprint (df.Name.groupby([df.Date.values.astype('&lt;M8[h]')]).size())\n2010-01-11 19:00:00    1\n2010-02-06 12:00:00    1\n2012-07-12 22:00:00    1\n2012-07-16 22:00:00    1\n2012-07-18 22:00:00    1\n2013-11-23 10:00:00    1\n2013-12-16 17:00:00    1\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13049, "user_id": 4413446, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z2gMy.png?s=128&g=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/4413446/romain"}, "is_accepted": false, "score": 1, "last_activity_date": 1474488374, "creation_date": 1474488374, "answer_id": 39625651, "question_id": 39625328, "link": "https://stackoverflow.com/questions/39625328/pandas-grouping-by-datetime/39625651#39625651", "title": "Pandas Grouping By Datetime", "body": "<p>Another answer using resampling. Not very efficient, I think, but interesting.</p>\n\n<pre><code># Test data\nd = {'Date': ['2012-07-12 22:20:00', '2012-07-12 22:19:00', '2013-12-16 17:50:00', '2010-01-11 19:54:00', '2010-02-06 12:10:00', '2012-07-18 22:12:00'],\n     'Name': ['name_1', 'name_1', 'name_1', 'name_2', 'name_2', 'name_5']}\n\ndf = pd.DataFrame(d)\ndf['Date'] = pd.to_datetime(df['Date'])\nresult = df.set_index('Date')\n\n# Resampling data for each hour\nresult = result.resample('H').count()\n# Filtering to keep only hours with at least one row\nresult[result['Name'] &gt; 0]\n\n                     Name\nDate                     \n2010-01-11 19:00:00     1\n2010-02-06 12:00:00     1\n2012-07-12 22:00:00     2\n2012-07-18 22:00:00     1\n2013-12-16 17:00:00     1\n</code></pre>\n"}], "owner": {"reputation": 1904, "user_id": 2605262, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a5d81ecf2f500b5a9856140a1b2e372?s=128&d=identicon&r=PG", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/2605262/lukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 39625417, "answer_count": 2, "score": 1, "last_activity_date": 1474489034, "creation_date": 1474487245, "last_edit_date": 1474489034, "question_id": 39625328, "link": "https://stackoverflow.com/questions/39625328/pandas-grouping-by-datetime", "title": "Pandas Grouping By Datetime", "body": "<p>I'm attempting to count the number of users that login to a system on an hourly basis on a given date. The date I have resembles:  </p>\n\n<pre><code>df=\n\nName      Date\nname_1    2012-07-12 22:20:00\nname_1    2012-07-16 22:19:00\nname_1    2013-12-16 17:50:00\n...\nname_2    2010-01-11 19:54:00 \nname_2    2010-02-06 12:10:00\n...\nname_2    2012-07-18 22:12:00\n...\nname_5423 2013-11-23 10:21:00\n</code></pre>\n\n<p>since I'm not interested in the users name I've deleted that column. I manage to create a grouped data structure and a new dataframe <code>df2</code> using the following command </p>\n\n<pre><code>grp = df.groupby(by=[df.Date.map(lambda x: (x.year, x.month, x.day, x.hour))])\ndf2 = pd.DataFrame({'Count' : grp.size()}).reset_index()\n</code></pre>\n\n<p><code>grp</code> converts the <code>datetime</code> type into a tuple of <code>(year, month, day, hour)</code>.</p>\n\n<p>I'm able to convert it back to a <code>datetime</code> type using a <code>for</code> loop </p>\n\n<pre><code>for i in range(len(df2)):\n    proper_date = datetime.datetime(*df2['Date'][i])\n    df2.set_value(i, 'Date', proper_date)\n</code></pre>\n\n<p>What I'm wondering is if there is a better/more efficient way of going about this?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 1382498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef575ee8410f5b1998f2f7a77199384?s=128&d=identicon&r=PG", "display_name": "rbmales", "link": "https://stackoverflow.com/users/1382498/rbmales"}, "edited": false, "score": 0, "creation_date": 1474499865, "post_id": 39625407, "comment_id": 66561313, "body": "much appreciated, exactly what I was looking for."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 2, "last_activity_date": 1474487511, "creation_date": 1474487511, "answer_id": 39625407, "question_id": 39625302, "link": "https://stackoverflow.com/questions/39625302/find-first-instance-of-a-row-in-pandas-dataframe-matching-a-criterion/39625407#39625407", "title": "find first instance of a row in pandas dataframe matching a criterion", "body": "<p>Here's one approach using <code>searchsorted</code> -</p>\n\n<pre><code>df.EventTime[df.Value.searchsorted([.4,.7,.9])]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [281]: df\nOut[281]: \n    EventTime     Value\n0  333.690569  0.097736\n1  942.624952  0.136822\n2  211.588088  0.246093\n3  514.476542  0.483235\n4  650.769771  0.643968\n5  457.457053  0.687587\n6   10.519801  0.730046\n7  692.091846  0.833983\n8  210.612897  0.922743\n9  512.066182  0.964927\n\nIn [282]: df.EventTime[df.Value.searchsorted([.4,.7,.9])]\nOut[282]: \n3    514.476542\n6     10.519801\n8    210.612897\nName: EventTime, dtype: float64\n</code></pre>\n\n<p>If you need the <code>EvenTime</code> values as an array, use <code>df.EventTime.values</code> instead.</p>\n"}], "owner": {"reputation": 123, "user_id": 1382498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef575ee8410f5b1998f2f7a77199384?s=128&d=identicon&r=PG", "display_name": "rbmales", "link": "https://stackoverflow.com/users/1382498/rbmales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "accepted_answer_id": 39625407, "answer_count": 1, "score": 0, "last_activity_date": 1474487511, "creation_date": 1474487150, "question_id": 39625302, "link": "https://stackoverflow.com/questions/39625302/find-first-instance-of-a-row-in-pandas-dataframe-matching-a-criterion", "title": "find first instance of a row in pandas dataframe matching a criterion", "body": "<p>I have a dataframe giving event time (in days) and a value associated with each event.  </p>\n\n<p>sorry for placing this in as code snippet, not sure of any other way to show format as a table in this question.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>+-----------+----------+\r\n| EventTime |  Value   |\r\n+-----------+----------+\r\n| 389.9067  | 0.076014 |\r\n| 670.9632  | 0.190521 |\r\n| 1012.2839 | 0.266599 |\r\n| 1025.2452 | 0.355095 |\r\n| 1347.1064 | 0.45189  |\r\n| 3554.909  | 0.64213  |\r\n| 3932.491  | 0.688693 |\r\n| 4450.6369 | 0.730536 |\r\n| 4819.5832 | 0.746905 |\r\n| 6252.0017 | 0.880531 |\r\n| 6951.3345 | 0.898307 |\r\n| 7607.0877 | 0.945048 |\r\n| 9044.0014 | 1.002455 |\r\n| 9433.6679 | 1.083201 |\r\n+-----------+----------+</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I am interested in obtaining the event time associated with the first value >= a given input, e.g. if input =0.40, I want to report 1347.1064</p>\n\n<p>Ideally, I would like a general solution where I supply a list of value thresholds and the dataframe, e.g. (.4, .7, .9) and obtain back a list (or any other data structure) with the corresponding event times.</p>\n\n<p>Looked around, did not see anything obvious in terms of a solution, but probably just missing something or my ignorance of pandas, trying to learn.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 7, "creation_date": 1474487073, "post_id": 39625229, "comment_id": 66555811, "body": "Er, because you called <code>__add__</code> directly? As you state, Python only does the fallback when you use the <code>+</code> operator."}, {"owner": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474487591, "post_id": 39625229, "comment_id": 66556090, "body": "Guess I wasn&#39;t aware that the fallback will not be used if I used <code>__add__</code> directly."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474488681, "post_id": 39625287, "comment_id": 66556695, "body": "So basically there happens more behind the scene when using the <code>+</code> operator which is responsible for the fallback?"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474488951, "post_id": 39625287, "comment_id": 66556874, "body": "Updated an answer. I tried my best to explain regarding how it works. In case of doubt, let me know. I&#39;ll further make an edit and will try to be more clear"}, {"owner": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474490110, "post_id": 39625287, "comment_id": 66557493, "body": "Maybe I should paraphrase my question - what is the difference between using the <code>+</code> operator and the <b>add</b> function? Reading about special methodes it looks like there is none - but apparently the <code>NotImplemented</code> case is handled differently"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474490188, "post_id": 39625287, "comment_id": 66557535, "body": "Yes. There is no difference. <code>1+2</code> is equivalent to <code>1 .__add__(2)</code>"}, {"owner": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474490734, "post_id": 39625287, "comment_id": 66557833, "body": "So why does <code>1+c</code> run like this: <code>__add__ of int --&gt; __radd__ of C</code> but <code>1 .__add__.(c)</code> runs like <code>__add__ of int --&gt; NotImplemented</code>"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474490826, "post_id": 39625287, "comment_id": 66557884, "body": "As I mentioned above in the answer <b><code>__radd__</code> functions are only called if the left operand does not support the corresponding operation and the operands are of different types</b> &lt;-- which is the case"}, {"owner": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "edited": false, "score": 0, "creation_date": 1474491051, "post_id": 39625287, "comment_id": 66558004, "body": "It finally sunk in :D Thank you!"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 1, "creation_date": 1474491517, "post_id": 39625287, "comment_id": 66558247, "body": "@MoinuddinQuadri <code>a+b</code> is NOT equivalent to a.__add__(b).  <code>a+b</code> IS equivalent to <code>import operator; operator.add(a,b)</code>.  The <code>add</code> function is the &#39;more behind the scene&#39;.  It usually starts by calling <code>a.__add__(b) and then, if necessary, </code>b.__radd__(a).  But <code>ifsubclass(type(b), type(a))</code>, then <code>b.__radd__(a)</code> is (should be) called first."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474491749, "post_id": 39625287, "comment_id": 66558366, "body": "@TerryJanReedy: Yes, and I mentioned the same in my answer (check description of __radd__()). In which part you are having doubt regarding that? May be I should correct that."}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 1, "creation_date": 1474492103, "post_id": 39625287, "comment_id": 66558565, "body": "@MoinuddinQuadri: I responded to your comment, 5th above mine.  &quot; There is no difference. 1+2 is equivalent to 1 .__add__(2)&quot;  Perhaps you meant that specifically because <code>1</code> and <code>2</code> are both ints where as I took it too generally."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1474492267, "post_id": 39625287, "comment_id": 66558656, "body": "@TerryJanReedy: Yes, my comment was specifically for <code>1</code> and <code>2</code> and it is good that you pointed it out. May be someone seeing it in the future would have the felt the same. I should have mentioned that in my comment."}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": true, "score": 6, "last_activity_date": 1474496454, "last_edit_date": 1474496454, "creation_date": 1474487087, "answer_id": 39625287, "question_id": 39625229, "link": "https://stackoverflow.com/questions/39625229/difference-between-ab-and-a-add-b/39625287#39625287", "title": "Difference between a+b and a.__add__(b)", "body": "<p><code>a+b</code> is equivalent to <code>import operator; operator.add(a,b)</code>. It starts by calling <code>a.__add__(b)</code> and then, if necessary, <code>b.__radd__(a)</code>. But <code>ifsubclass(type(b), type(a))</code>, then <code>b.__radd__(a)</code> is called first.</p>\n\n<p>Based on the <a href=\"https://docs.python.org/3/reference/datamodel.html#special-method-names\" rel=\"noreferrer\">docs on \"special\" methods</a>:</p>\n\n<ul>\n<li><p>Regarding <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__add__\" rel=\"noreferrer\"><code>__add__()</code></a>:</p>\n\n<blockquote>\n  <p><code>__add__()</code> is called to implement the binary arithmetic \"+\" operation. For instance, to evaluate the expression x + y, where x is an instance of a class that has an <code>__add__()</code> method, <code>x.__add__(y)</code> is called. </p>\n  \n  <p>If one of those methods does not support the operation with the supplied arguments, it should return <strong>NotImplemented</strong>.</p>\n</blockquote></li>\n<li><p>Regarding <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__radd__\" rel=\"noreferrer\"><code>__radd__()</code></a>:</p>\n\n<blockquote>\n  <p>These functions are only called if the left operand does not support the corresponding operation and the operands are of different types. For instance, to evaluate the expression x + y, where y is an instance of a class that has an <code>__radd__()</code> method, <code>y.__radd__(x)</code> is called if <code>x.__add__(y)</code> returns NotImplemented.</p>\n  \n  <p>If the right operand\u2019s type is a subclass of the left operand\u2019s type and that subclass provides the reflected method for the operation, this method will be called before the left operand\u2019s non-reflected method. This behavior allows subclasses to override their ancestors\u2019 operations.</p>\n</blockquote></li>\n</ul>\n\n<p><strong>Explanation with the examples based on the behaviour:</strong></p>\n\n<p><strong>Case 1:</strong></p>\n\n<pre><code>&gt;&gt;&gt; print 1+c\n('C.__radd__', &lt;__main__.C instance at 0x7ff5631397a0&gt;, 1)\nreversed result\n</code></pre>\n\n<p>These functions <code>radd</code> are only called if the left operand does not support the corresponding operation and the operands are of different types. In this case, <code>1</code> does not support addition of the class hence, it falls back to the <code>__radd__()</code> function of the <code>C</code> class. In case <code>__radd__</code> was not implement in <code>C()</code> class, it would have fallen back to <code>__add__()</code></p>\n\n<p><strong>Case2:</strong></p>\n\n<pre><code>&gt;&gt;&gt; 1 .__add__(c)\nNotImplemented\n&gt;&gt;&gt; c .__add__(1)\n('C.__add__', &lt;__main__.C instance at 0x7ff563139830&gt;, 1)\n'result'\n</code></pre>\n\n<p><code>1 .__add__(c)</code> gives <code>NotImplemented</code> as <code>1</code> is of <code>int</code> type and <code>add</code> of <code>int</code> class do not supports <code>add</code> with C class object. But <code>c .__add(1)</code> run because <code>C()</code> class supports that.</p>\n\n<p><strong>Case 3:</strong></p>\n\n<pre><code>&gt;&gt;&gt; int.__add__(1, c)\nNotImplemented\n&gt;&gt;&gt; C.__add__(c, 1)\n('C.__add__', &lt;__main__.C instance at 0x7ff5610add40&gt;, 1)\n'result'\n</code></pre>\n\n<p>Similar to <code>case 2</code>. But here, the call is made via class with first argument as object of that class. Behaviour would be same.</p>\n\n<p><strong>Case 4:</strong> </p>\n\n<pre><code>&gt;&gt;&gt; int.__add__(c, 1)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: descriptor '__add__' requires a 'int' object but received a 'instance'\n&gt;&gt;&gt; C.__add__(1, c)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: unbound method __add__() must be called with C instance as first argument (got int instance instead)\n</code></pre>\n\n<p>Vice-versa of <code>case 3</code>. As is cleared from the stack-trace, <code>__add__</code> expected the object of the calling class as the first argument, failing which resulted in exception.</p>\n"}], "owner": {"reputation": 41, "user_id": 1559309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076459946a4ecf46ca9ca941f4d7d60d?s=128&d=identicon&r=PG", "display_name": "Korred", "link": "https://stackoverflow.com/users/1559309/korred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3535, "favorite_count": 2, "accepted_answer_id": 39625287, "answer_count": 1, "score": 3, "last_activity_date": 1474496454, "creation_date": 1474486906, "question_id": 39625229, "link": "https://stackoverflow.com/questions/39625229/difference-between-ab-and-a-add-b", "title": "Difference between a+b and a.__add__(b)", "body": "<p>I am currently trying to understand where the difference between using <code>a+b</code> and <code>a.__add__(b)</code> is when it comes to custom classes. There are numerous websites that say that using the '+'-operator results in using the special method <code>__add__</code> - which is fine so far.</p>\n\n<p>But when i run the following example I get two different results.</p>\n\n<pre><code>class C:  \n  def __add__(self, other):\n    print(\"C.__add__\", self, other)\n    return \"result\"  \n  def __radd__(self, other):\n    print(\"C.__radd__\", self, other)    \n    return \"reversed result\"\n\nc = C()\nprint(1+c)\nprint()\nprint(1 .__add__(c))\nprint(int.__add__(1,c))\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>C.__radd__ &lt;C object at 0x7f60b92e9550&gt; 1\nreversed result\n\nNotImplemented\nNotImplemented\n</code></pre>\n\n<p>Now from what I understood, when executing <code>1+c</code> Python checks/executes the int <code>__add__</code> method - finds that there is no implementation for adding int and C objects - returns NotImplemented - which lets Python know to check object C for <code>__radd__</code> and executes the code within.</p>\n\n<p>Why does <code>1+c</code> result in executing the <code>__radd__</code> code but the other two version are just returning <code>NotImplemented</code> without checking <code>__radd__</code> ??</p>\n"}, {"tags": ["c#", "python", "node.js", "download", "automation"], "comments": [{"owner": {"reputation": 4063, "user_id": 1985648, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7c1e7a0afd1a923a4fcdd31764294544?s=128&d=identicon&r=PG&f=1", "display_name": "Don Cheadle", "link": "https://stackoverflow.com/users/1985648/don-cheadle"}, "edited": false, "score": 0, "creation_date": 1474487861, "post_id": 39625221, "comment_id": 66556249, "body": "There are tutorials about making HTTP requests in virtually every language - so that is indeed possible in C#, Python, NodeJS, etc. I&#39;m not sure about SAP Business Objects, or if what you describe (POST&#39;ing, GET&#39;ing a download) makes sense for that."}, {"owner": {"reputation": 1391, "user_id": 1011591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/QwmcG.jpg?s=128&g=1", "display_name": "gh0st", "link": "https://stackoverflow.com/users/1011591/gh0st"}, "reply_to_user": {"reputation": 4063, "user_id": 1985648, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7c1e7a0afd1a923a4fcdd31764294544?s=128&d=identicon&r=PG&f=1", "display_name": "Don Cheadle", "link": "https://stackoverflow.com/users/1985648/don-cheadle"}, "edited": false, "score": 0, "creation_date": 1474488280, "post_id": 39625221, "comment_id": 66556471, "body": "I might be able to dump Wireshark logs if that is of help."}, {"owner": {"reputation": 4063, "user_id": 1985648, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7c1e7a0afd1a923a4fcdd31764294544?s=128&d=identicon&r=PG&f=1", "display_name": "Don Cheadle", "link": "https://stackoverflow.com/users/1985648/don-cheadle"}, "edited": false, "score": 0, "creation_date": 1474491309, "post_id": 39625221, "comment_id": 66558135, "body": "this question is too broad - are you having a particular problem with some specific code?"}, {"owner": {"reputation": 1391, "user_id": 1011591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/QwmcG.jpg?s=128&g=1", "display_name": "gh0st", "link": "https://stackoverflow.com/users/1011591/gh0st"}, "reply_to_user": {"reputation": 4063, "user_id": 1985648, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7c1e7a0afd1a923a4fcdd31764294544?s=128&d=identicon&r=PG&f=1", "display_name": "Don Cheadle", "link": "https://stackoverflow.com/users/1985648/don-cheadle"}, "edited": false, "score": 0, "creation_date": 1474491850, "post_id": 39625221, "comment_id": 66558423, "body": "No, not in particular. But I get confused as to why when I send a request I get multiple responses. Is that a result of the primary .jsp/.html file being returned which then sources <i>it&#39;s</i> dependencies like scripts, images, etc..?"}, {"owner": {"reputation": 4063, "user_id": 1985648, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7c1e7a0afd1a923a4fcdd31764294544?s=128&d=identicon&r=PG&f=1", "display_name": "Don Cheadle", "link": "https://stackoverflow.com/users/1985648/don-cheadle"}, "edited": false, "score": 0, "creation_date": 1474492045, "post_id": 39625221, "comment_id": 66558524, "body": "when retrieving a web page (for example, hitting refresh here), the page loads everything asynchronously - so yes many different requests for all the images and .js files. Usually in a specific API request, you&#39;ll receive just 1 response from the server. <a href=\"http://igoro.com/archive/what-really-happens-when-you-navigate-to-a-url/\" rel=\"nofollow noreferrer\">igoro.com/archive/&hellip;</a>"}], "owner": {"reputation": 1391, "user_id": 1011591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/QwmcG.jpg?s=128&g=1", "display_name": "gh0st", "link": "https://stackoverflow.com/users/1011591/gh0st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474486876, "creation_date": 1474486876, "question_id": 39625221, "link": "https://stackoverflow.com/questions/39625221/how-to-automate-log-in-to-sap-business-objects", "title": "How to automate log in to SAP Business Objects", "body": "<p>I'm trying to automate a file download process of spreadsheets (.xls files) kept in a <strong>SAP Business Objects</strong> server. Here's the process:  </p>\n\n<ol>\n<li>User logs into SAP Business Objects.</li>\n<li>User selects report from a list of reports.</li>\n<li>Once the report has opened the user triggers the download from another link.</li>\n</ol>\n\n<p>Here is how I originally planned to attack this:  </p>\n\n<ol>\n<li>Send a post request to the server providing login credentials.</li>\n<li>Process response back from server to save session/cookie information.</li>\n<li><p>Send a get request to the server with the static link used to trigger the download.</p>\n\n<ul>\n<li>This request that is sent must go through one or two forwarders because viewing this request in wireshark reveals that the request that <em>actually</em> triggers the download is different from the one that initiates the download. The request that triggers the download contains counters and other parameters that I can not duplicate unless I try finding the pattern.</li>\n</ul></li>\n<li><p>Save the download response to a file.</p></li>\n</ol>\n\n<p>Is there a tutorial out there for this sort of process? I'm looking to write this in C# but if there's something better, Python, NodeJS, anything, I'm all ears.</p>\n\n<p>I'm imagining this is something simple like sending requests and processing responses but how do I handle receiving multiple responses? Would the best way to troubleshoot/debug something like this be to use Wireshark so I could watch the data requests fly back and forth between my machine and the server?</p>\n"}, {"tags": ["python", "django", "virtualenv"], "comments": [{"owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "edited": false, "score": 0, "creation_date": 1474486835, "post_id": 39625175, "comment_id": 66555688, "body": "Could you post the template  and models/forms you&#39;re using?"}, {"owner": {"reputation": 3137, "user_id": 6320655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M4BVxTY56KE/AAAAAAAAAAI/AAAAAAAAAB4/4zNEZqhVqpI/photo.jpg?sz=128", "display_name": "ospahiu", "link": "https://stackoverflow.com/users/6320655/ospahiu"}, "edited": false, "score": 0, "creation_date": 1474486882, "post_id": 39625175, "comment_id": 66555711, "body": "Looks like you&#39;re trying to convert a dictionary to a Decimal? Hard to tell without seeing the data you are working with."}, {"owner": {"reputation": 714, "user_id": 5159834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-aH1V7Vjlqn4/AAAAAAAAAAI/AAAAAAAAKuQ/3LCsGyKtPV8/photo.jpg?sz=128", "display_name": "Pierangelo Orizio", "link": "https://stackoverflow.com/users/5159834/pierangelo-orizio"}, "edited": false, "score": 0, "creation_date": 1474487128, "post_id": 39625175, "comment_id": 66555840, "body": "I have update with the models etc...."}], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 3, "last_activity_date": 1474486928, "creation_date": 1474486928, "answer_id": 39625236, "question_id": 39625175, "link": "https://stackoverflow.com/questions/39625175/cannot-convert-price-total-sum-decimal258-00-to-decimal/39625236#39625236", "title": "Cannot convert {&#39;price_total__sum&#39;: Decimal(&#39;258.00&#39;)} to Decimal", "body": "<p>As the error shows, your <code>aggregate()</code> call returns a dictionary: <code>{'price_total__sum': Decimal('258.00')}</code>. You can't set that dict as a DecimalField in the target model; you need to extract the actual value first.</p>\n\n<pre><code>price_total = CartItem.objects.filter(user_id=request.user.id).aggregate(Sum('price_total'))\npost.tot_price = price_total['price_total__sum']\n</code></pre>\n"}], "owner": {"reputation": 714, "user_id": 5159834, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-aH1V7Vjlqn4/AAAAAAAAAAI/AAAAAAAAKuQ/3LCsGyKtPV8/photo.jpg?sz=128", "display_name": "Pierangelo Orizio", "link": "https://stackoverflow.com/users/5159834/pierangelo-orizio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 39625236, "answer_count": 1, "score": 0, "last_activity_date": 1474487049, "creation_date": 1474486681, "last_edit_date": 1474487049, "question_id": 39625175, "link": "https://stackoverflow.com/questions/39625175/cannot-convert-price-total-sum-decimal258-00-to-decimal", "title": "Cannot convert {&#39;price_total__sum&#39;: Decimal(&#39;258.00&#39;)} to Decimal", "body": "<p>I get this error when I do a Sum of an entire column:</p>\n\n<pre><code>Cannot convert {'price_total__sum': Decimal('258.00')} to Decimal\n</code></pre>\n\n<p>here the entire project: <a href=\"https://github.com/pierangelo1982/djangocommerce/tree/berge\" rel=\"nofollow\">https://github.com/pierangelo1982/djangocommerce/tree/berge</a></p>\n\n<pre><code>def add_to_order(request):\n    if request.method == \"POST\":\n        form = AddOrderForm(request.POST)\n        if form.is_valid():\n            post = form.save(commit=False)\n            post.user = request.user\n            post.published_date = timezone.now()\n            post.tot_price = CartItem.objects.filter(user_id=request.user.id).aggregate(Sum('price_total'))\n            post.save()\n            cart_list = CartItem.objects.filter(user_id=request.user.id)\n            for cart in cart_list:\n                formOrder = AddOrderItemForm(request.POST)\n                post_cart = formOrder.save(commit=False)\n                post_cart.order = post\n        post_cart.product = cart.product\n        post_cart.composition = cart.composition\n        post_cart.price = cart.price\n        post_cart.quantity = cart.quantity\n        post_cart.total = cart.price_total\n        post_cart.price_discount = cart.price_discount\n                post_cart.price_reserved = cart.price_reserved\n                post_cart.save()\n            #cart_list.delete() #cancello carrello dopo ordine\n            return redirect('/order', pk=post.pk)\n    else:\n        form = AddOrderForm()\n    return render(request, 'order-form.html', {'form': form})\n</code></pre>\n\n<p>My Models Order, that receive the sum value, and the form:</p>\n\n<pre><code>class Order(models.Model):\n    user = models.ForeignKey(User, null=True, blank=True, verbose_name=\"Utente\")\n    code = models.CharField('Codice', max_length=250, null=True, blank=True)\n    tot_price = models.DecimalField('Prezzo', max_digits=10, decimal_places=2, blank=True, null=True)\n    tot_discount = models.DecimalField('Totale Scontato', max_digits=10, decimal_places=2, blank=True, null=True)\n    tot_price_reserved = models.DecimalField('Prezzo Scontato Riservato', max_digits=10, decimal_places=2, blank=True, null=True)\n    pub_date = models.DateTimeField('date published', editable=False)\n    inlavorazione = models.BooleanField('in lavorazione', default=False)\n    pagato = models.BooleanField('pagato', default=False)\n    spedito = models.BooleanField('spedito', default=False)\n    chiuso = models.BooleanField('chiuso', default=False)\n\n    def save(self, *args, **kwargs):\n        self.pub_date = datetime.now()\n        super(Order, self).save(*args, **kwargs) # Call the \"real\" save() method.\n\n    def __unicode__(self):\n        return self.pub_date.strftime('%Y-%m-%d')\n\n    class Meta:\n        verbose_name_plural = \"Ordine\"\n        ordering = ['id']\n</code></pre>\n\n<p>Form:</p>\n\n<pre><code>class AddOrderForm(ModelForm):\n    class Meta:\n        model = Order\n        fields = ['user', 'tot_price', 'tot_discount', 'tot_price_reserved']\n</code></pre>\n"}, {"tags": ["python", "algorithm", "time-complexity", "analysis"], "comments": [{"owner": {"reputation": 3882, "user_id": 1040597, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c993933eeeb895833f1938b8c1308964?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/1040597/saeid"}, "edited": false, "score": 2, "creation_date": 1474487308, "post_id": 39625159, "comment_id": 66555934, "body": "In the worst case the program never terminates."}, {"owner": {"reputation": 3784, "user_id": 1086871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3b5ca501c8756c075f442808d148729?s=128&d=identicon&r=PG", "display_name": "G. Bach", "link": "https://stackoverflow.com/users/1086871/g-bach"}, "edited": false, "score": 0, "creation_date": 1474487426, "post_id": 39625159, "comment_id": 66555989, "body": "the size of the queues is irrelevant; the question is what is the error rate of the statistical portion"}, {"owner": {"reputation": 1126, "user_id": 5527199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnkLm.jpg?s=128&g=1", "display_name": "Luke Kot-Zaniewski", "link": "https://stackoverflow.com/users/5527199/luke-kot-zaniewski"}, "edited": false, "score": 0, "creation_date": 1474487563, "post_id": 39625159, "comment_id": 66556074, "body": "how does it not terminate? unless the test can give a different result for the same input I don&#39;t see how it wouldn&#39;t terminate."}, {"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474487593, "post_id": 39625159, "comment_id": 66556094, "body": "The <code>statistical_test</code> is very relevant to the time complexity calculation here, so it&#39;s not really possible to do anything without knowing that. Read up on randomized algorithms and how their time complexity is calculated. That will give you some direction."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1474487857, "post_id": 39625159, "comment_id": 66556247, "body": "If the test can&#39;t give a different result, there doesn&#39;t seem to be any purpose in putting successful tests back on the queue to retest."}, {"owner": {"reputation": 1126, "user_id": 5527199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnkLm.jpg?s=128&g=1", "display_name": "Luke Kot-Zaniewski", "link": "https://stackoverflow.com/users/5527199/luke-kot-zaniewski"}, "edited": false, "score": 0, "creation_date": 1474488447, "post_id": 39625159, "comment_id": 66556561, "body": "This process needs to eventually terminate because retest can only be initiated by a failure and a failure always results in a decrease in the size of the queue.. so I don&#39;t see how it is infinite. I see your point now about the test but I still don&#39;t think it is infinite."}, {"owner": {"reputation": 55, "user_id": 762845, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/79619e7f0ef67d5d1216b12bb3d0254a?s=128&d=identicon&r=PG", "display_name": "franchzilla", "link": "https://stackoverflow.com/users/762845/franchzilla"}, "edited": false, "score": 0, "creation_date": 1474496862, "post_id": 39625159, "comment_id": 66560552, "body": "I tried to make the question as simple as possible. The statistical test is a chi-squared test. Each node in the tree has a probability distribution associated with its edges.  The test compares this distribution to a distribution in another tree&#39;s node. The success rate depends on these distributions, which may vary."}], "answers": [{"comments": [{"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474488887, "post_id": 39625684, "comment_id": 66556830, "body": "You are assuming that queue is initialized with all elements. If the queue is initialized with only the root node (like in a classical BFS), the algorithm returns as soon as the first node passes the test."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 1, "creation_date": 1474489036, "post_id": 39625684, "comment_id": 66556930, "body": "@Munir - that&#39;s the point in worst case analysis. The &quot;best case&quot; is irrelevant."}, {"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474489214, "post_id": 39625684, "comment_id": 66557009, "body": "I&#39;m questioning your assumption that the queue is initialized with all elements, not your analysis. The OP has not mentioned how the queue is setup at the start of the loop and we should not assume that."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474489668, "post_id": 39625684, "comment_id": 66557261, "body": "@Munir - once again, that doesn&#39;t matter. The methodology is to analyze the worst case. I claim this is when all elements are in the queue and the process I described is taking place. Then I prove the complexity. That&#39;s how this works."}, {"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474490242, "post_id": 39625684, "comment_id": 66557569, "body": "In this case, the algorithm is taking a tree as an input and setting up a queue from it starting at the root. The queue is not the input, but a step in the process The worst case should be based on the tree and not on the queue. The OP hasn&#39;t made it clear how the queue is created from the tree, and hence I feel it is unfair to make the assumption. I understand the worst case is based on worst case of input, but the input here is a tree, not a queue, just like the input to a classical BFS is a graph, not a queue. The queue is part of the implementation, not the input."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474492221, "post_id": 39625684, "comment_id": 66558634, "body": "@Munir - the algorithm operates on a queue (named <code>q</code>). How this queue is initialized is not part of the algorithm. There&#39;s no mention of a tree in the algorithm and no input other then said queue. If you suspect there&#39;s something else happening, it&#39;s not what is outlined and is irrelevant from the perspective of what <i>is</i> defined and what the question is about (I&#39;m not saying that you&#39;re necessarily wrong in thinking there&#39;s something else though)."}, {"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474492413, "post_id": 39625684, "comment_id": 66558726, "body": "The very first line says &quot;I have developed an algorithm that is kind of a variation of a BFS on a tree&quot;. Also, nodes are typically used for graphs/trees, not queues. This is a poorly formed question, and I don&#39;t think we should make an attempt to answer this without further info. For example, we don&#39;t even know what the probability is of the statistical test to return true, or if the test gives the same result each time. While the question is definitely theoretically engaging, it lacks a lot of necessary info."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474492825, "post_id": 39625684, "comment_id": 66558929, "body": "@Munir - the preface does mention resemblance to a tree, but <i>it is not a part of the defined algorithm</i>. The question is about the complexity of the defined algorithm. That is what I&#39;ve answered. The probability is again irrelevant, dealing with worst case, a 99.9% chance is no different from a 0.0001%. But it&#39;s very obvious you think otherwise, and you have every right for that. It&#39;s a shame OP asked a question and left, but that&#39;s just how SO is.."}, {"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1474492974, "post_id": 39625684, "comment_id": 66558998, "body": "Fair enough. To each his own. :) I can only hope OP sees this and improves the question."}, {"owner": {"reputation": 55, "user_id": 762845, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/79619e7f0ef67d5d1216b12bb3d0254a?s=128&d=identicon&r=PG", "display_name": "franchzilla", "link": "https://stackoverflow.com/users/762845/franchzilla"}, "edited": false, "score": 0, "creation_date": 1474496633, "post_id": 39625684, "comment_id": 66560489, "body": "I am sorry that the question is not well formed. The algorithm has lots of other details, but I tried to make it as simple as possible to analyze its core. I will try to come up with some improvements to better explain it and then edit the question."}, {"owner": {"reputation": 55, "user_id": 762845, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/79619e7f0ef67d5d1216b12bb3d0254a?s=128&d=identicon&r=PG", "display_name": "franchzilla", "link": "https://stackoverflow.com/users/762845/franchzilla"}, "edited": false, "score": 0, "creation_date": 1475868847, "post_id": 39625684, "comment_id": 67132860, "body": "I was revising this and I think the complexity might be a little lower. It is not possible that all states from 1:n-1 are in the tested list. The worst case scenario is when the tree expands homogeneously and all the elements in the last layer are in tested except the last one and it fails. I think this reduces the complexity to O(n*log(n))."}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": false, "score": 0, "last_activity_date": 1474488481, "creation_date": 1474488481, "answer_id": 39625684, "question_id": 39625159, "link": "https://stackoverflow.com/questions/39625159/algorithm-complexity-analysis-for-variable-length-queue-bfs/39625684#39625684", "title": "Algorithm Complexity Analysis for Variable Length Queue BFS", "body": "<p>The worst case scenario is the following process:</p>\n\n<blockquote>\n  <ol>\n  <li>All elements <em>1 : n-1</em> pass the test and are appended to the <code>tested</code> queue.</li>\n  <li>Element <em>n</em> fails the test, is removed from <code>q</code>, and <em>n-1</em> elements from <code>tested</code> are pushed back into <code>q</code>.</li>\n  <li>Go back to step 1 with <em>n = n-1</em></li>\n  </ol>\n</blockquote>\n\n<p>This is a classic O(n<sup>2</sup>) process.</p>\n"}], "owner": {"reputation": 55, "user_id": 762845, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/79619e7f0ef67d5d1216b12bb3d0254a?s=128&d=identicon&r=PG", "display_name": "franchzilla", "link": "https://stackoverflow.com/users/762845/franchzilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474488635, "creation_date": 1474486618, "last_edit_date": 1474488635, "question_id": 39625159, "link": "https://stackoverflow.com/questions/39625159/algorithm-complexity-analysis-for-variable-length-queue-bfs", "title": "Algorithm Complexity Analysis for Variable Length Queue BFS", "body": "<p>I have developed an algorithm that is kind of a variation of a BFS on a tree, but it includes a probabilistic factor. To check whether a node is the one I am looking for, a statistical test is performed (I won't get into too much detail about this). If the test result is positive, the node is added to another queue (called <code>tested</code>). But when a node fails the test, the nodes in the <code>tested</code> need to be tested again, so this queue is appended to the one with the nodes yet to be tested.</p>\n\n<p>In Python, considering that the queue <code>q</code> starts with the root node:</p>\n\n<pre><code>...\ntested = []\nwhile q:\n    curr = q.pop(0)\n    p = statistical_test(curr)\n    if p:\n        tested.append(curr)\n    else:\n        q.extend(curr.children())\n        q.extend(tested)\n        tested = []\nreturn tested\n</code></pre>\n\n<p>As the algorithm is probabilistic, more than one node might be in <code>tested</code> after the search, but that is expected. The problem I am facing is trying to estimate this algorithm's complexity because I can't simply use BFS's complexity as <code>q</code> and <code>tested</code> will have a variable length.</p>\n\n<p>I don't need a closed and definitive answer for this. What I need are some insights on how to deal with this situation.</p>\n"}, {"tags": ["python", "variables", "if-statement"], "comments": [{"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1474486730, "post_id": 39625125, "comment_id": 66555633, "body": "Your first <code>if</code> only enters if it&#39;s less than or equal to 50... the next check you make is if it&#39;s greater than 50 which it can&#39;t be - so that block will never execute... So your <code>else</code> clause is the only one that can execute..."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1474492514, "post_id": 39625125, "comment_id": 66558773, "body": "Python has no line terminator besides a newline - those semicolons are completely unnecessary. This isn&#39;t C! (or Java, or JavaScript, or anything else)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6860331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c210f716de165b45f7a27a4b15d1e81?s=128&d=identicon&r=PG&f=1", "display_name": "legendaryxv2", "link": "https://stackoverflow.com/users/6860331/legendaryxv2"}, "edited": false, "score": 0, "creation_date": 1474488610, "post_id": 39625227, "comment_id": 66556649, "body": "Okay I see the mistake now, i was actually thinking about doing it this way, but was not 100% sure if it would have been correct. Thank you!"}], "tags": [], "owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "is_accepted": false, "score": 1, "last_activity_date": 1474486894, "creation_date": 1474486894, "answer_id": 39625227, "question_id": 39625125, "link": "https://stackoverflow.com/questions/39625125/selecting-the-right-else-statement-depending-on-user-input/39625227#39625227", "title": "Selecting the right else statement depending on user input", "body": "<p>Your first <code>if</code> only enters if it's less than or equal to 50... the next check you make is if it's greater than 50 which it can't be - so that block will never execute... So your <code>else</code> clause is the only one that can execute... Basically, your nested <code>if</code> statements won't execute because the criteria for doing so is already excluded from the enclosing <code>if</code>.</p>\n\n<p>You're best off restructuring your logic as:</p>\n\n<pre><code>if orderTotal &gt; 150:\n    # do something\nelif orderTotal &gt; 100:\n    # do something\nelif orderTotal &gt; 50:\n    # do something\nelse: # 50 or under...\n    # do something else\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1390, "user_id": 2427263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59704067f4952d5dd82b49d1bde5f7dc?s=128&d=identicon&r=PG", "display_name": "BrianO", "link": "https://stackoverflow.com/users/2427263/briano"}, "is_accepted": false, "score": 0, "last_activity_date": 1474487235, "creation_date": 1474487235, "answer_id": 39625322, "question_id": 39625125, "link": "https://stackoverflow.com/questions/39625125/selecting-the-right-else-statement-depending-on-user-input/39625322#39625322", "title": "Selecting the right else statement depending on user input", "body": "<p>Your logic is a bit screwy. If the amount is &lt;= $50, then it is not > $50 or &lt;= $100, so anything following that nested \"if\" will never execute:</p>\n\n<pre><code>if orderTotal &lt;= 50.00:\n    if orderTotal &gt; 50.00 and orderTotal &lt;= 100.00:\n        # ** this will never run **\n    else:\n        # This will run, if orderTotal &lt;= 50.00\n</code></pre>\n\n<p>Nothing will happen if <code>orderTotal &gt; 50.00</code>, because there's no <code>else</code> for the <code>if orderTotal &lt;= 50.00</code> test. @Jon Clements' answer shows the correct way to structure your code.</p>\n"}], "owner": {"reputation": 13, "user_id": 6860331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c210f716de165b45f7a27a4b15d1e81?s=128&d=identicon&r=PG&f=1", "display_name": "legendaryxv2", "link": "https://stackoverflow.com/users/6860331/legendaryxv2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1474487293, "creation_date": 1474486471, "question_id": 39625125, "link": "https://stackoverflow.com/questions/39625125/selecting-the-right-else-statement-depending-on-user-input", "title": "Selecting the right else statement depending on user input", "body": "<p>I'm working on a little program where the user inputs a price and then the program would output the shipping cost based on the input.</p>\n\n<pre><code>#Initilaize variables\n\nlowUS = 6.00;\nmedUS = 9.00;\nhighUS = 12.00;\nlowCan = 8.00;\nmedCan = 12.00;\nhighCan = 15.00;\n\n#Greet user and ask for input\nprint(\"Welcome to Ben's shipping calculator!\");\nprint(\"We will calculate your shipping cost for you!\");\n\n\norderTotal = float(input(\"Please input your total amount.\"));\ncountry = input(\"In which country do you reside? Please type C for Canada or U or USA. \");\n\n#Validate input\nwhile country not in {'u', 'c', 'C', 'U'}:\n    print (\"Invalid input. Please try again. \")\n    country = input(\"In which country do you reside? Please type C for Canada or U or USA. \");\n\n#Determine how much the shipping fee is\nif country == 'U' or country == 'u':\n    if orderTotal &lt;= 50.00:\n        if orderTotal &gt; 50.00 and orderTotal &lt;= 100.00:\n            if orderTotal &gt; 100.00 and orderTotal &lt;= 150.00:\n                if orderTotal &gt; 150.00:\n                    print(\"Your shipping is free and your grand total is\", orderTotal)\n                else:\n                    print(\"Your shipping fee is: \", highUS);\n                    orderTotal = (orderTotal + highUS); \n            else:\n                print(\"Your shipping fee is: \", medUS);\n                orderTotal = (orderTotal + medUS);\n        else:\n            print(\"Your shipping fee is: \", lowUS);\n            orderTotal = (orderTotal + lowUS);\n\nelif country == 'c' or country == 'C':\n    if orderTotal &lt;= 50.00:\n        if orderTotal &gt; 50.00 and orderTotal &lt;= 100.00:\n            if orderTotal &gt; 100.00 and orderTotal &lt;= 150.00:\n                if orderTotal &gt; 150.00:\n                    print(\"Your shipping is free and your grand total is\", orderTotal)\n                else:\n                    print(\"Your shipping fee is: \", highCan);\n                    orderTotal = (orderTotal + highCan); \n            else:\n                print(\"Your shipping fee is: \", medCan);\n                orderTotal = (orderTotal + medCan);\n        else:\n            print(\"Your shipping fee is: \", lowCan);\n            orderTotal = (orderTotal + lowCan);\n\nprint(\"Your grand total is: $\", orderTotal);\n</code></pre>\n\n<p>I am very new to python and programming and I'm not sure if this is a good way to go at it, but I'm learning if-else statements so I thought I would give it a try. So far it only works if you input \"50\" for the amount. It will calculate based off of the country only for \"50\". I'm not sure where I went wrong, if someone could help and explain, that would be great.</p>\n"}, {"tags": ["python", "lambda", "scipy", "curve-fitting"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1911036, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6ffca60215bc28abe81981c6c9cfccd2?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/1911036/viktor"}, "edited": false, "score": 0, "creation_date": 1474489367, "post_id": 39625729, "comment_id": 66557100, "body": "can&#39;t understent. Can you write example for fitting 2 params ?"}, {"owner": {"reputation": 91, "user_id": 1911036, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6ffca60215bc28abe81981c6c9cfccd2?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/1911036/viktor"}, "edited": false, "score": 0, "creation_date": 1474490409, "post_id": 39625729, "comment_id": 66557659, "body": "Yes, it works. thanks. The problem was in parameter <code>bounds=param_bounds</code> if I delete it its working good. But I realy need it"}, {"owner": {"reputation": 447, "user_id": 2595461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NqtNx.png?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/2595461/sergey"}, "reply_to_user": {"reputation": 91, "user_id": 1911036, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6ffca60215bc28abe81981c6c9cfccd2?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/1911036/viktor"}, "edited": false, "score": 0, "creation_date": 1474490780, "post_id": 39625729, "comment_id": 66557860, "body": "I&#39;v modified again. It&#39;s working correctly with bounds."}, {"owner": {"reputation": 91, "user_id": 1911036, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6ffca60215bc28abe81981c6c9cfccd2?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/1911036/viktor"}, "edited": false, "score": 0, "creation_date": 1474490970, "post_id": 39625729, "comment_id": 66557968, "body": "I forgot to add bounds for second parameter. Its works from beginning, error mesage was not clear, I start to look for mistake in wrong place"}], "tags": [], "owner": {"reputation": 447, "user_id": 2595461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NqtNx.png?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/2595461/sergey"}, "is_accepted": true, "score": 2, "last_activity_date": 1474490729, "last_edit_date": 1474490729, "creation_date": 1474488652, "answer_id": 39625729, "question_id": 39625122, "link": "https://stackoverflow.com/questions/39625122/fitting-only-2-paramter-of-a-function-with-many-parameters-in-python/39625729#39625729", "title": "Fitting only 2 paramter of a function with many parameters in python", "body": "<p>Here is the solution for all 4 parameters of Lorentz function</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import curve_fit\n\ndef lorentz(ph, A, xc, w, f0):\n    return f0 + A * w**2 / (w**2 + (ph - xc)**2)\n\nA, xc, w, f0 = 2,2,2,2  # true values\nph = np.linspace(-5, 10, 100)\ny = lorentz(ph, A, xc, w, f0)    \nydata = y + 0.15 * np.random.normal(size=len(ph)) # sample data\npopt, pcov = curve_fit(lambda x, _A, _xc: lorentz(x, _A, _xc, w, f0), ph, ydata,bounds=([1,1], [3, 3]))\nA, xc = popt # fitted values (only two)\n</code></pre>\n\n<p>You can easily add or remove parameters by putting them under the function lorentz() or with lambda</p>\n\n<p>The result looks like this\n<a href=\"https://i.stack.imgur.com/TNhV0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TNhV0.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 91, "user_id": 1911036, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6ffca60215bc28abe81981c6c9cfccd2?s=128&d=identicon&r=PG", "display_name": "Viktor", "link": "https://stackoverflow.com/users/1911036/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 1, "accepted_answer_id": 39625729, "answer_count": 1, "score": 1, "last_activity_date": 1474490729, "creation_date": 1474486462, "last_edit_date": 1495540856, "question_id": 39625122, "link": "https://stackoverflow.com/questions/39625122/fitting-only-2-paramter-of-a-function-with-many-parameters-in-python", "title": "Fitting only 2 paramter of a function with many parameters in python", "body": "<p>I know there is a question <br>\n<a href=\"https://stackoverflow.com/questions/12208634/fitting-only-one-paramter-of-a-function-with-many-parameters-in-python\">Fitting only one parameter of a function with many parameters in python</a> <br>\nbut I have a little bit different situation. Problem with parameters of lambda function.</p>\n\n<p>I am trying to fit Lorentz func</p>\n\n<pre><code>def lorentz(ph, A, xc, w, f0):\n    return f0 + A * w**2 / (w**2 + (ph - xc)**2)\n</code></pre>\n\n<p>if I am fitting only one parameter (xc) its working good.</p>\n\n<pre><code>p1, p2, p3, p4 = params\npopt, pcov = curve_fit(lambda x, xc: lorentz(x, p1, xc, p3, p4), abjd, adata, bounds=param_bounds)\n</code></pre>\n\n<p>But if I try to fit only 2 parameters (a, xc) it fails</p>\n\n<pre><code>p1, p2, p3, p4 = params    \npopt, pcov = curve_fit(lambda x, a, xc: lorentz(x, a, xc, p3, p4), abjd, adata, bounds=param_bounds)\n</code></pre>\n\n<p>Error message is</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"template.py\", line 294, in &lt;module&gt;\n    popt, pcov = curve_fit(lambda x, a, xc: lorentz(x, a, xc, p3, p4), abjd, adata, bounds=param_bounds)\n  File \"/usr/local/lib/python2.7/dist-packages/scipy/optimize/minpack.py\", line 683, in curve_fit\n    **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/scipy/optimize/_lsq/least_squares.py\", line 769, in least_squares\n    f0 = fun_wrapped(x0)\n  File \"/usr/local/lib/python2.7/dist-packages/scipy/optimize/_lsq/least_squares.py\", line 764, in fun_wrapped\n    return np.atleast_1d(fun(x, *args, **kwargs))\n  File \"/usr/local/lib/python2.7/dist-packages/scipy/optimize/minpack.py\", line 455, in func_wrapped\n    return func(xdata, *params) - ydata\nTypeError: &lt;lambda&gt;() takes exactly 3 arguments (2 given)\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "tensorflow", "pyspark"], "comments": [{"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 1, "creation_date": 1474487064, "post_id": 39625112, "comment_id": 66555808, "body": "Functions which is passed to map is called for each record separately. So all that <code>build_graph</code> sees is a single record of shape <code>(28, 28, 1)</code>."}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1474487737, "post_id": 39625112, "comment_id": 66556180, "body": "So you basically try to create N models, and since <code>build_graph</code> doesn&#39;t return the model, discard them."}, {"owner": {"reputation": 71, "user_id": 6615948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104154898531933/picture?type=large", "display_name": "David Ott", "link": "https://stackoverflow.com/users/6615948/david-ott"}, "reply_to_user": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1475108696, "post_id": 39625112, "comment_id": 66815015, "body": "Turning the array into a list of sub-tensors fixed the issue. For example, from [10000, 28, 28,1] to [10, 1000, 28, 28,1] . Spark then properly parallelizes a tensor of [1000, 28, 28, 1] to each worker."}, {"owner": {"reputation": 626, "user_id": 3987475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lHlZ.png?s=128&g=1", "display_name": "dGRAMOP", "link": "https://stackoverflow.com/users/3987475/dgramop"}, "edited": false, "score": 0, "creation_date": 1502417534, "post_id": 39625112, "comment_id": 78211459, "body": "@DavidOtt I&#39;m glad and grateful you were able to fix the issue. You can answer you own question below to make the question show up as the answered status. People often overlook the comments section"}], "owner": {"reputation": 71, "user_id": 6615948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104154898531933/picture?type=large", "display_name": "David Ott", "link": "https://stackoverflow.com/users/6615948/david-ott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1014, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1474486413, "creation_date": 1474486413, "question_id": 39625112, "link": "https://stackoverflow.com/questions/39625112/how-to-distribute-a-tensorflow-tflearn-model-on-spark", "title": "How to distribute a Tensorflow/TFLearn model on Spark?", "body": "<p>I'm trying to run distributed image classification in Tensorflow according to this model:<a href=\"https://github.com/tflearn/tflearn/blob/master/examples/images/convnet_mnist.py\" rel=\"nofollow\">TFLearn MNIST Example</a>. Unfortunately my dataset is to large to be reliably computed on a single machine. So I'm trying to move the model and dataset onto worker nodes.</p>\n\n<pre><code># Initialize Spark\nsc_name = \"MNIST\"\nsc_master = \"local[*]\"\nfrom pyspark import SparkContext, SparkConf\nconf = SparkConf().setAppName(sc_name).setMaster(sc_master)\nsc = SparkContext(conf=conf)\n\n#Import TF/TFLearn\nfrom __future__ import division, print_function, absolute_import\nimport tensorflow as tf\n\nimport tflearn\nfrom tflearn.layers.core import input_data, dropout, fully_connected\nfrom tflearn.layers.conv import conv_2d, max_pool_2d\nfrom tflearn.layers.normalization import local_response_normalization\nfrom tflearn.layers.estimator import regression\n\n# Model to be run on workers\ndef build_graph(X):\n    with tf.Graph().as_default() as g:\n        network = input_data(shape=[None, 28, 28, 1], name='input')\n        network = conv_2d(network, 32, 3, activation='relu', regularizer=\"L2\")\n        network = max_pool_2d(network, 2)\n        network = local_response_normalization(network)\n        network = conv_2d(network, 64, 3, activation='relu', regularizer=\"L2\")\n        network = max_pool_2d(network, 2)\n        network = local_response_normalization(network)\n        network = fully_connected(network, 128, activation='tanh')\n        network = dropout(network, 0.8)\n        network = fully_connected(network, 256, activation='tanh')\n        network = dropout(network, 0.8)\n        network = fully_connected(network, 10, activation='softmax')\n        network = regression(network, optimizer='adam', learning_rate=0.01,\n                             loss='categorical_crossentropy', name='target')\n\n        # Training\n        model = tflearn.DNN(network, tensorboard_verbose=0)\n\n        with tf.Session() as sess:\n            model.fit({'input': X}, {'target': Y}, n_epoch=20,\n                   validation_set=({'input': testX}, {'target': testY}),\n                   snapshot_step=100, show_metric=True, run_id='convnet_mnist')\n\n# Data loading and preprocessing\nimport tflearn.datasets.mnist as mnist\nX, Y, testX, testY = mnist.load_data(one_hot=True)\nX = X.reshape([-1, 28, 28, 1])\ntestX = testX.reshape([-1, 28, 28, 1])\n\n#Run model on data\nrdd = sc.parallelize(X)\nrdd.map(build_graph).collect()\n</code></pre>\n\n<p>This gives me the error:\nValueError: Cannot feed value of shape (28, 28, 1) for Tensor 'input/X:0', which has shape '(?, 28, 28, 1)'</p>\n\n<p>Which I doubt is the actual problem, as X_train is of shape (55000, 28, 28, 1)</p>\n\n<p>I believe that the problem is that I either haven't parallelized the model or the data properly. If I am fundamentally misunderstanding how to do this, please let me know.</p>\n"}, {"tags": ["python", "optimization", "code-climate"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474486474, "post_id": 39625092, "comment_id": 66555497, "body": "without seeing the rest of the <code>...</code> code, it&#39;s not possible to decide. Frankly, doing a procedure for this would be overkill. Is there a way to up the threshold of the copy/paste detection?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 2, "creation_date": 1474486497, "post_id": 39625092, "comment_id": 66555508, "body": "Use a variable? Also, why are you calling <code>keys()</code> instead of testing <code>\u2026 in ddiff</code>? Seems simpler and more efficient."}, {"owner": {"reputation": 6408, "user_id": 1596786, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b214ed5d19621e478b64851098f7dc80?s=128&d=identicon&r=PG", "display_name": "FacundoGFlores", "link": "https://stackoverflow.com/users/1596786/facundogflores"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1474486971, "post_id": 39625092, "comment_id": 66555749, "body": "@Jean-Fran&#231;oisFabre check my update"}, {"owner": {"reputation": 6408, "user_id": 1596786, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b214ed5d19621e478b64851098f7dc80?s=128&d=identicon&r=PG", "display_name": "FacundoGFlores", "link": "https://stackoverflow.com/users/1596786/facundogflores"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1474487206, "post_id": 39625092, "comment_id": 66555878, "body": "@5gon12eder I updated as you suggest but it is not the issue per se. Thank you for your advice about <code>keys()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1474487378, "creation_date": 1474487378, "answer_id": 39625366, "question_id": 39625092, "link": "https://stackoverflow.com/questions/39625092/improving-code-for-similar-code-found/39625366#39625366", "title": "Improving code for similar code found", "body": "<p>just abstract the parameters and create an helper method:</p>\n\n<pre><code>def testmethod(name,localTable,m,ddiff,pk):\n    if name in ddiff:\n        npos = parseRoots(ddiff[name])\n        rval = m(localTable, pk, npos)\n    else:\n        rval = []\n\n    return rval\n</code></pre>\n\n<p>the call it:</p>\n\n<pre><code>dics_added = testmethod('iterable_item_added',localTable,makeAddDicts,ddiff,pk)\ndics_updated = testmethod('values_changed',localTable,makeUpdatedDicts,ddiff,pk)\n</code></pre>\n\n<p>note: be careful when factorizing code, you can introduce bugs (and make code better readable :)).</p>\n\n<p>Also: that helper method forces to pass a lot of local variables. Maybe creating an object and member variables would simplify even more.</p>\n\n<p>In that case, it appears to be a bit \"overkill\" to do that in order to make your review tool shut up.</p>\n"}], "owner": {"reputation": 6408, "user_id": 1596786, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b214ed5d19621e478b64851098f7dc80?s=128&d=identicon&r=PG", "display_name": "FacundoGFlores", "link": "https://stackoverflow.com/users/1596786/facundogflores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 39625366, "answer_count": 1, "score": 0, "last_activity_date": 1474487378, "creation_date": 1474486325, "last_edit_date": 1474486960, "question_id": 39625092, "link": "https://stackoverflow.com/questions/39625092/improving-code-for-similar-code-found", "title": "Improving code for similar code found", "body": "<p>I passed codeclimate to my code, and I obtained the following:</p>\n\n<blockquote>\n  <p>Similar code found in 1 other location</p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>stradd = 'iterable_item_added'\nif stradd in ddiff:\n    added = ddiff[stradd]\n    npos_added = parseRoots(added)\n    dics_added = makeAddDicts(localTable, pk, npos_added)\nelse:\n    dics_added = []\nstrchanged = 'values_changed'\nif strchanged in ddiff:\n    updated = ddiff[strchanged]\n    npos_updated = parseRoots(updated)\n    dics_updated = makeUpdatedDicts(localTable, pk, npos_updated)\nelse:\n    dics_updated = []\n</code></pre>\n\n<p>Where <code>iterable_item_added</code> and <code>values_changed</code> are repeated. How to change it?</p>\n"}, {"tags": ["python", "django", "python-2.7", "web"], "comments": [{"owner": {"reputation": 2039, "user_id": 2339620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/858406bb3e274f28f148e8cc86dece68?s=128&d=identicon&r=PG", "display_name": "karlosss", "link": "https://stackoverflow.com/users/2339620/karlosss"}, "edited": false, "score": 0, "creation_date": 1474486292, "post_id": 39625054, "comment_id": 66555386, "body": "Please show us your directory structure. Most probably, you will either need to change the import path or use <code>sys.path.append()</code>."}, {"owner": {"reputation": 49812, "user_id": 248296, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ec020fe58f82e5b8e72544ee7108a825?s=128&d=identicon&r=PG", "display_name": "warvariuc", "link": "https://stackoverflow.com/users/248296/warvariuc"}, "edited": false, "score": 2, "creation_date": 1474486846, "post_id": 39625054, "comment_id": 66555692, "body": "Please, don&#39;t write in Russian. Otherwise go here <a href=\"http://ru.stackoverflow.com/\">ru.stackoverflow.com</a>"}, {"owner": {"reputation": 57, "user_id": 3954038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75297191d7194281241ebb2652609e4d?s=128&d=identicon&r=PG&f=1", "display_name": "KingOfPing", "link": "https://stackoverflow.com/users/3954038/kingofping"}, "edited": false, "score": 0, "creation_date": 1474487272, "post_id": 39625054, "comment_id": 66555916, "body": "ok! i am translate that!"}, {"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 0, "creation_date": 1474522743, "post_id": 39625054, "comment_id": 66566868, "body": "Did you include the <code>__init__.py</code> file in the <code>article</code> directory? It&#39;s required for the directory to be treated as a module."}], "answers": [{"tags": [], "owner": {"reputation": 1001, "user_id": 5109041, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2766a0ef157cd5b8d6769c21d0971ffe?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5109041/andreas"}, "is_accepted": false, "score": 2, "last_activity_date": 1474487522, "creation_date": 1474487522, "answer_id": 39625409, "question_id": 39625054, "link": "https://stackoverflow.com/questions/39625054/attributeerror-module-object-has-no-attribute-urls/39625409#39625409", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;urls&#39;", "body": "<p>It's easier to put just quotes around the includes and don't import articles. Like so:</p>\n\n<pre><code>from django.conf.urls import url, include\nfrom django.contrib import admin\n\nurlpatterns = [\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', include('article.urls'))\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 5989058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03c6e0749c2665fda21be73eaff3396?s=128&d=identicon&r=PG", "display_name": "mohammadjh", "link": "https://stackoverflow.com/users/5989058/mohammadjh"}, "is_accepted": true, "score": 3, "last_activity_date": 1474522285, "creation_date": 1474522285, "answer_id": 39630954, "question_id": 39625054, "link": "https://stackoverflow.com/questions/39625054/attributeerror-module-object-has-no-attribute-urls/39630954#39630954", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;urls&#39;", "body": "<p>In main/urls.py</p>\n\n<pre><code>from django.conf.urls import url, include\nfrom django.contrib import admin\nfrom article import urls\n\nurlpatterns = [\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', include(urls))\n\n]\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>from django.conf.urls import url, include\nfrom django.contrib import admin\n\nurlpatterns = [\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', include('article.urls'))\n\n]\n</code></pre>\n\n<p>You can learn more from <a href=\"https://docs.djangoproject.com/en/1.10/topics/http/urls/#including-other-urlconfs\" rel=\"nofollow\">Django Documentation</a> </p>\n"}], "owner": {"reputation": 57, "user_id": 3954038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75297191d7194281241ebb2652609e4d?s=128&d=identicon&r=PG&f=1", "display_name": "KingOfPing", "link": "https://stackoverflow.com/users/3954038/kingofping"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11617, "favorite_count": 0, "accepted_answer_id": 39630954, "answer_count": 2, "score": 4, "last_activity_date": 1474522285, "creation_date": 1474486175, "last_edit_date": 1474487117, "question_id": 39625054, "link": "https://stackoverflow.com/questions/39625054/attributeerror-module-object-has-no-attribute-urls", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;urls&#39;", "body": "<p>Python 2.7 &amp; Django 1.10\nERROR:</p>\n\n<pre><code>AttributeError: 'module' object has no attribute 'urls' \n</code></pre>\n\n<p><strong>main/urls.py</strong></p>\n\n<pre><code>from django.conf.urls import url, include\nfrom django.contrib import admin\nimport article\n\nurlpatterns = [\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', include(article.urls))\n\n]\n</code></pre>\n\n<p><strong>article/urls.py</strong></p>\n\n<pre><code>from django.conf.urls import url\nfrom . import views\n\nurlpatterns = [\n\n    url(r'^$', views.basic_one, name='basic_one')\n]\n</code></pre>\n\n<p>Structure:</p>\n\n<p>APP/main/urls.py</p>\n\n<p>APP/article/urls.py</p>\n"}, {"tags": ["python", "pymongo"], "answers": [{"tags": [], "owner": {"reputation": 1921, "user_id": 4807043, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/962dbe37a32959e5ead7734f28f46771?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4807043/henry"}, "is_accepted": true, "score": 0, "last_activity_date": 1474491373, "creation_date": 1474491373, "answer_id": 39626444, "question_id": 39624983, "link": "https://stackoverflow.com/questions/39624983/pymongo-no-such-cmd-update/39626444#39626444", "title": "pymongo: no such cmd: update", "body": "<p>It turns out that this might be a bug of update_one() in TxMongo.\nSwitch to update() will be fine.  </p>\n"}], "owner": {"reputation": 1921, "user_id": 4807043, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/962dbe37a32959e5ead7734f28f46771?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4807043/henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 39626444, "answer_count": 1, "score": 0, "last_activity_date": 1474491373, "creation_date": 1474485918, "question_id": 39624983, "link": "https://stackoverflow.com/questions/39624983/pymongo-no-such-cmd-update", "title": "pymongo: no such cmd: update", "body": "<p>I am using TxMongo 16.1.0 (this one uses pymongo under the hood), Mongodb 2.4.14 in my program.<br>\nI don't understand why I receive this pymongo.errors.OperationFailure:\n(It cannot recognize <code>update</code> cmd???)    </p>\n\n<pre><code>TxMongo: command SON([('update', u'units'), ('updates', [SON([('q', {'baseIP': u'10.12.59.119'}), ('u', {'$set': {'status': 'busy'}}), ('upsert', False), ('multi', False)])]), ('writeConcern', {})]) on namespace db_test.$cmd failed with 'no such cmd: update'\n</code></pre>\n\n<p>I used Son in python to make ordered dict, but still the error.</p>\n"}, {"tags": ["java", "c#", "python", "data-structures"], "comments": [{"owner": {"reputation": 3492, "user_id": 3429133, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dmyzd.png?s=128&g=1", "display_name": "beatngu13", "link": "https://stackoverflow.com/users/3429133/beatngu13"}, "edited": false, "score": 0, "creation_date": 1474498487, "post_id": 39624938, "comment_id": 66561014, "body": "Why isn&#39;t <code>vi -&gt; (k1, k2, \u2026 , kn)</code> working for you? It seems like your keys are actually values and vice versa. If you override <code>hashCode</code> (and <code>equals</code>) correctly, a &quot;key&quot; will never be part of multiple lists."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1474554715, "post_id": 39624938, "comment_id": 66587173, "body": "The two map solution is easy to implement, and gives you O(1) lookup by key and O(1) lookup by value. You could maintain a secondary index that&#39;s sorted by value. That would save some space, but it&#39;s harder to maintain, and lookup by value would be O(log n). In addition, changing, adding, or deleting a value (that is <code>map[k] = value</code>) would be O(log n), as well, whereas with the two-map solution those operations would be O(1)."}], "answers": [{"comments": [{"owner": {"reputation": 3708, "user_id": 3486720, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/17daf39a8aca206c16772fc5867004b1?s=128&d=identicon&r=PG", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/3486720/apurva-singh"}, "edited": false, "score": 0, "creation_date": 1474486268, "post_id": 39625050, "comment_id": 66555367, "body": "On the other hand Alexey I feel it is possible to avoid two maps if the values are kept sorted (!) That is the challenge."}, {"owner": {"reputation": 4713, "user_id": 6799654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa65b345b86c22a77eb3f457c99f35?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Guseynov", "link": "https://stackoverflow.com/users/6799654/alexey-guseynov"}, "reply_to_user": {"reputation": 3708, "user_id": 3486720, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/17daf39a8aca206c16772fc5867004b1?s=128&d=identicon&r=PG", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/3486720/apurva-singh"}, "edited": false, "score": 0, "creation_date": 1474486671, "post_id": 39625050, "comment_id": 66555607, "body": "If you sort by value, then you can&#39;t sort by key (or place values in buckets by key in case of hash tables), so you loose fast search by key. Of course you can have a map key -&gt; pointer_to_a_value and store values in a sorted array. But that&#39;s actually two maps, but one is implemented as map (RB-tree, hashmap) and another as sorted vector (which is good for search but bad for insertion)."}, {"owner": {"reputation": 5929, "user_id": 676877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb52e51002fe05e9a142c42184e7873?s=128&d=identicon&r=PG", "display_name": "Brett Okken", "link": "https://stackoverflow.com/users/676877/brett-okken"}, "edited": false, "score": 0, "creation_date": 1474486781, "post_id": 39625050, "comment_id": 66555666, "body": "Use 1 Map (for key to value) and 1 Multimap (for value to keys), not 2 Multimaps."}], "tags": [], "owner": {"reputation": 4713, "user_id": 6799654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa65b345b86c22a77eb3f457c99f35?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Guseynov", "link": "https://stackoverflow.com/users/6799654/alexey-guseynov"}, "is_accepted": false, "score": 0, "last_activity_date": 1474486158, "creation_date": 1474486158, "answer_id": 39625050, "question_id": 39624938, "link": "https://stackoverflow.com/questions/39624938/need-a-bidirectional-map-which-allows-duplicate-values-and-returns-list-of-valu/39625050#39625050", "title": "Need a bidirectional Map which allows duplicate values, and returns list of values given a key", "body": "<p>High performance means that you need some sort of index to search for a key. There are no indexes that work in both directions, so actually you need two of them. So you have to use two multimaps, one for each direction, and a wrapper that will maintain them in consistent state.</p>\n"}], "owner": {"reputation": 3708, "user_id": 3486720, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/17daf39a8aca206c16772fc5867004b1?s=128&d=identicon&r=PG", "display_name": "Apurva Singh", "link": "https://stackoverflow.com/users/3486720/apurva-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486743384, "creation_date": 1474485782, "last_edit_date": 1474490529, "question_id": 39624938, "link": "https://stackoverflow.com/questions/39624938/need-a-bidirectional-map-which-allows-duplicate-values-and-returns-list-of-valu", "title": "Need a bidirectional Map which allows duplicate values, and returns list of values given a key", "body": "<p>I have a need for a data structure which I think should be a common need<br>\nI need a Map which allows duplicate values(most commonly do, but wait.. getting to the point).. see this sample<br></p>\n\n<pre><code>k1 -&gt; v1\nk2 -&gt; v1\nk3 -&gt; v1\nk4 -&gt; v2\nk5 -&gt; v2\n</code></pre>\n\n<p>Now if I do map.getByValue(v1), I should get Set(k1, k2, k3) . Otherwise it should behave like a 'normal' map. It should have high performance, so no for-loop kind of suggestions please.<br>\nAlso, note that the following will not do for me<br></p>\n\n<pre><code>v1 -&gt; (k1, k2, k3)\nv2 -&gt; (k4, k5)\n</code></pre>\n\n<p>.. since I dont want this situation ever (note, k1 is in both lists)..</p>\n\n<pre><code>v1 -&gt; (k1, k2, k3)\nv2 -&gt; (k4, k5, k1)\n</code></pre>\n\n<p>I don't want to use two map solution. I am thinking of some way to keep values sorted so that getByValue(value) is still performant.</p>\n"}, {"tags": ["python", "python-3.x", "typeerror", "attr"], "comments": [{"owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "edited": false, "score": 0, "creation_date": 1474486611, "post_id": 39624929, "comment_id": 66555576, "body": "I use python approximately 2 years, but have never encountered  such a situation."}], "answers": [{"tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": -2, "last_activity_date": 1474485951, "creation_date": 1474485951, "answer_id": 39624994, "question_id": 39624929, "link": "https://stackoverflow.com/questions/39624929/typeerror-during-assignment-to-attribute-reference/39624994#39624994", "title": "TypeError during assignment to attribute reference?", "body": "<p>If you want to raise TypeError in your code:</p>\n\n<pre><code>raise TypeError\n</code></pre>\n\n<p>I suggest you read up on exceptions and exception handling in Python for more information. <a href=\"https://docs.python.org/3/tutorial/errors.html\" rel=\"nofollow\">https://docs.python.org/3/tutorial/errors.html</a> </p>\n"}, {"comments": [{"owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "edited": false, "score": 0, "creation_date": 1474487487, "post_id": 39625088, "comment_id": 66556020, "body": "You hint me an answer <code>object.some_attr</code> raises TypeError :)"}, {"owner": {"reputation": 2319, "user_id": 2211273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d55ba6b0f08aed750502866c7e7ee77?s=128&d=identicon&r=PG", "display_name": "Kritzefitz", "link": "https://stackoverflow.com/users/2211273/kritzefitz"}, "edited": false, "score": 0, "creation_date": 1474487534, "post_id": 39625088, "comment_id": 66556047, "body": "I think that can still happen if you explicitly delete <code>__setattr__</code>. I didn&#39;t test it though."}, {"owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "reply_to_user": {"reputation": 2319, "user_id": 2211273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d55ba6b0f08aed750502866c7e7ee77?s=128&d=identicon&r=PG", "display_name": "Kritzefitz", "link": "https://stackoverflow.com/users/2211273/kritzefitz"}, "edited": false, "score": 0, "creation_date": 1474487607, "post_id": 39625088, "comment_id": 66556100, "body": "@Kritzefitz No, no you can&#39;t <code>del</code>, if you can&#39;t assign!"}, {"owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "edited": false, "score": 0, "creation_date": 1474488067, "post_id": 39625088, "comment_id": 66556360, "body": "I slightly modify my question, because you really revealed to me what I was asking about."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1474488255, "last_edit_date": 1474488255, "creation_date": 1474486308, "answer_id": 39625088, "question_id": 39624929, "link": "https://stackoverflow.com/questions/39624929/typeerror-during-assignment-to-attribute-reference/39625088#39625088", "title": "TypeError during assignment to attribute reference?", "body": "<p>This documentation line is just really out of date. It dates back to at least <a href=\"https://docs.python.org/release/1.4/ref/ref6.html#HDR2\" rel=\"nofollow\">Python 1.4</a>, long before type/class unification. I believe back then, trying to do something like</p>\n\n<pre><code>x = 1\nx.foo = 3\n</code></pre>\n\n<p>would have produced a TypeError, but I wasn't writing Python back then, and I don't have a sufficiently ancient interpreter version to test it.</p>\n\n<p>If you look at the <a href=\"https://hg.python.org/cpython/file/3.5/Objects/object.c#l914\" rel=\"nofollow\">source code</a> for attribute assignment dispatch, you can see that the documented check still exists:</p>\n\n<pre><code>if (tp-&gt;tp_setattro != NULL) {\n    ...\n    return ...;\n}\nif (tp-&gt;tp_setattr != NULL) {\n    ...\n    return ...;\n}\nPy_DECREF(name);\nassert(name-&gt;ob_refcnt &gt;= 1);\nif (tp-&gt;tp_getattr == NULL &amp;&amp; tp-&gt;tp_getattro == NULL)\n    PyErr_Format(PyExc_TypeError,\n                 \"'%.100s' object has no attributes \"\n                 \"(%s .%U)\",\n                 tp-&gt;tp_name,\n                 value==NULL ? \"del\" : \"assign to\",\n                 name);\nelse\n    PyErr_Format(PyExc_TypeError,\n                 \"'%.100s' object has only read-only attributes \"\n                 \"(%s .%U)\",\n                 tp-&gt;tp_name,\n                 value==NULL ? \"del\" : \"assign to\",\n                 name);\nreturn -1;\n</code></pre>\n\n<p>If an object's type has no routine for setting attributes, Python raises an error, complaining about \"no attributes\" or \"only read-only attributes\" depending on whether the type has a routine for getting attributes. I believe in the early days, types like <code>int</code> would have gone down this code path. However, all types now inherit such routines from <code>object</code>, so I don't think this code path is ever taken.</p>\n\n<p>There's a related code path in <a href=\"https://hg.python.org/cpython/file/3.5/Objects/typeobject.c#l3005\" rel=\"nofollow\"><code>type.__setattr__</code></a> that raises a <code>TypeError</code> for setting attributes on types written in C. This code path is still taken, but it's not as general as what the documentation describes:</p>\n\n<pre><code>if (!(type-&gt;tp_flags &amp; Py_TPFLAGS_HEAPTYPE)) {\n    PyErr_Format(\n        PyExc_TypeError,\n        \"can't set attributes of built-in/extension type '%s'\",\n        type-&gt;tp_name);\n    return -1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "edited": false, "score": 0, "creation_date": 1474486893, "post_id": 39625177, "comment_id": 66555716, "body": "It does not raise an error in my case for <code>f.func_globals</code>. I use Python 3.5.2."}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 0, "last_activity_date": 1474487723, "last_edit_date": 1474487723, "creation_date": 1474486686, "answer_id": 39625177, "question_id": 39624929, "link": "https://stackoverflow.com/questions/39624929/typeerror-during-assignment-to-attribute-reference/39625177#39625177", "title": "TypeError during assignment to attribute reference?", "body": "<p>This code produces a <code>TypeError</code> and it seems like it is what the documentation describes:</p>\n\n<pre><code>&gt;&gt;&gt; def f(): pass\n...\n&gt;&gt;&gt; f.func_globals = 0\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: readonly attribute\n</code></pre>\n\n<p>But is this <code>TypeError</code> really raised because the documentation says that? I sincerely doubt it. I guess <code>func_globals</code> implementation simply raises <code>TypeError</code> if you try to assign something to it.</p>\n\n<p><strong>BTW...</strong></p>\n\n<p>I would actually excpect the same in the next example, but it is an <code>AttributeError</code> instead:</p>\n\n<pre><code>&gt;&gt;&gt; class A(object):\n...     __slots__ = 'a',\n...\n&gt;&gt;&gt; A().b = 0\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'A' object has no attribute 'b'\n</code></pre>\n\n<p><strong>Update (Python 3)</strong></p>\n\n<p>The above was in Python 2.7. In Python 3, there is no <code>func_globals</code>, so this is not applicable (you can assign anything to it).</p>\n\n<p>What attributes function has in Python 3 seem to raise an <code>AttributeError</code> when it is read-only.</p>\n\n<pre><code>&gt;&gt;&gt; f.__globals__ = 0\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: readonly attribute\n</code></pre>\n\n<p>This makes perfect sense to me. Perhaps this part of the documentation is just a relic as far as Python 3 is concerned.</p>\n"}], "owner": {"reputation": 1737, "user_id": 6793085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59da9fd7490b959c0158e3ee56cf1a50?s=128&d=identicon&r=PG&f=1", "display_name": "godaygo", "link": "https://stackoverflow.com/users/6793085/godaygo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 39625088, "answer_count": 3, "score": 1, "last_activity_date": 1474488255, "creation_date": 1474485719, "last_edit_date": 1474487916, "question_id": 39624929, "link": "https://stackoverflow.com/questions/39624929/typeerror-during-assignment-to-attribute-reference", "title": "TypeError during assignment to attribute reference?", "body": "<p>Reading about <a href=\"https://docs.python.org/3/reference/simple_stmts.html#assignment-statements\" rel=\"nofollow\">Assignment statements</a> in the Python's docs I found this:</p>\n\n<blockquote>\n  <p>If the target is an attribute reference: The primary expression in the reference is evaluated. It should yield an object with assignable attributes; if this is not the case, <code>TypeError</code> is raised. That object is then asked to assign the assigned object to the given attribute; if it cannot perform the assignment, it raises an exception (usually but not necessarily <code>AttributeError</code>).</p>\n</blockquote>\n\n<p>I'm wondering how to get this <code>TypeError</code>?</p>\n\n<p><strong>What Python's types doesn't have routine for setting attributes?</strong></p>\n"}]